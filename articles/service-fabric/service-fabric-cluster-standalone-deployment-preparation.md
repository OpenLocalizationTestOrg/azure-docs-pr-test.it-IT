---
title: Preparazione alla distribuzione del cluster autonomo di Azure Service Fabric | Documentazione Microsoft
description: Documentazione relativa alla preparazione dell'ambiente e alla creazione della configurazione del cluster, da esaminare prima di distribuire un cluster progettato per gestire un carico di lavoro di produzione.
services: service-fabric
documentationcenter: .net
author: maburlik
manager: timlt
editor: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 1/17/2017
ms.author: maburlik;chackdan
ms.openlocfilehash: f332193f9a53260173a1010b8bf9f08726bea427
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
<a id="preparemachines"></a>

## <a name="plan-and-prepare-your-service-fabric-standalone-cluster-deployment"></a><span data-ttu-id="a8c77-103">Pianificare e preparare la distribuzione del cluster autonomo di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="a8c77-103">Plan and prepare your Service Fabric standalone cluster deployment</span></span>
<span data-ttu-id="a8c77-104">I passaggi seguenti devono essere eseguiti prima di creare il cluster.</span><span class="sxs-lookup"><span data-stu-id="a8c77-104">Perform the following steps before you create your cluster.</span></span>

### <a name="step-1-plan-your-cluster-infrastructure"></a><span data-ttu-id="a8c77-105">Passaggio 1: pianificazione dell’infrastruttura del cluster</span><span class="sxs-lookup"><span data-stu-id="a8c77-105">Step 1: Plan your cluster infrastructure</span></span>
<span data-ttu-id="a8c77-106">Prima di creare un cluster di Service Fabric sui propri computer, è possibile stabilire da quali tipi di errore il cluster non deve essere compromesso.</span><span class="sxs-lookup"><span data-stu-id="a8c77-106">You are about to create a Service Fabric cluster on machines you own, so you can decide what kinds of failures you want the cluster to survive.</span></span> <span data-ttu-id="a8c77-107">Ad esempio, sono necessarie linee di alimentazione o connessioni Internet separate per queste macchine?</span><span class="sxs-lookup"><span data-stu-id="a8c77-107">For example, do you need separate power lines or Internet connections supplied to these machines?</span></span> <span data-ttu-id="a8c77-108">È necessario inoltre considerare la sicurezza fisica di tali macchine.</span><span class="sxs-lookup"><span data-stu-id="a8c77-108">In addition, consider the physical security of these machines.</span></span> <span data-ttu-id="a8c77-109">Dove si trovano le macchine e chi ha bisogno di accedervi?</span><span class="sxs-lookup"><span data-stu-id="a8c77-109">Where are the machines located and who needs access to them?</span></span> <span data-ttu-id="a8c77-110">Dopo aver preso queste decisioni, è possibile eseguire il mapping logico delle macchine ai vari domini di errore (vedere il passaggio 4).</span><span class="sxs-lookup"><span data-stu-id="a8c77-110">After you make these decisions, you can logically map the machines to the various fault domains (see Step 4).</span></span> <span data-ttu-id="a8c77-111">La pianificazione dell'infrastruttura per i cluster di produzione è più complicata rispetto ai cluster di test.</span><span class="sxs-lookup"><span data-stu-id="a8c77-111">The infrastructure planning for production clusters is more involved than for test clusters.</span></span>

### <a name="step-2-prepare-the-machines-to-meet-the-prerequisites"></a><span data-ttu-id="a8c77-112">Passaggio 2: preparare le macchine con i prerequisiti</span><span class="sxs-lookup"><span data-stu-id="a8c77-112">Step 2: Prepare the machines to meet the prerequisites</span></span>
<span data-ttu-id="a8c77-113">Prerequisiti per ogni macchina da aggiungere al cluster:</span><span class="sxs-lookup"><span data-stu-id="a8c77-113">Prerequisites for each machine that you want to add to the cluster:</span></span>

* <span data-ttu-id="a8c77-114">Consigliati minimo 16 GB di RAM.</span><span class="sxs-lookup"><span data-stu-id="a8c77-114">A minimum of 16 GB of RAM is recommended.</span></span>
* <span data-ttu-id="a8c77-115">Consigliati minimo 40 GB di spazio disponibile su disco.</span><span class="sxs-lookup"><span data-stu-id="a8c77-115">A minimum of 40 of GB available disk space is recommended.</span></span>
* <span data-ttu-id="a8c77-116">Consigliata una CPU 4 core o superiore.</span><span class="sxs-lookup"><span data-stu-id="a8c77-116">A 4 core or greater CPU is recommended.</span></span>
* <span data-ttu-id="a8c77-117">Connessione a una o più reti protette per tutte le macchine.</span><span class="sxs-lookup"><span data-stu-id="a8c77-117">Connectivity to a secure network or networks for all machines.</span></span>
* <span data-ttu-id="a8c77-118">Windows Server 2012 R2 o Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="a8c77-118">Windows Server 2012 R2 or Windows Server 2016.</span></span> 
* <span data-ttu-id="a8c77-119">[.NET Framework 4.5.1 o versione successiva](https://www.microsoft.com/download/details.aspx?id=40773), installazione completa.</span><span class="sxs-lookup"><span data-stu-id="a8c77-119">[.NET Framework 4.5.1 or higher](https://www.microsoft.com/download/details.aspx?id=40773), full install.</span></span>
* <span data-ttu-id="a8c77-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="a8c77-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span></span>
* <span data-ttu-id="a8c77-121">Il [servizio RemoteRegistry](https://technet.microsoft.com/library/cc754820) deve essere eseguito in tutti i computer.</span><span class="sxs-lookup"><span data-stu-id="a8c77-121">The [RemoteRegistry service](https://technet.microsoft.com/library/cc754820) should be running on all the machines.</span></span>

<span data-ttu-id="a8c77-122">L'amministratore del cluster che distribuisce e configura il cluster deve disporre dei [privilegi di amministratore](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) in ogni computer.</span><span class="sxs-lookup"><span data-stu-id="a8c77-122">The cluster administrator deploying and configuring the cluster must have [administrator privileges](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) on each of the machines.</span></span> <span data-ttu-id="a8c77-123">Non è possibile installare Service Fabric in un controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="a8c77-123">You cannot install Service Fabric on a domain controller.</span></span>

### <a name="step-3-determine-the-initial-cluster-size"></a><span data-ttu-id="a8c77-124">Passaggio 3: determinare le dimensioni iniziali del cluster</span><span class="sxs-lookup"><span data-stu-id="a8c77-124">Step 3: Determine the initial cluster size</span></span>
<span data-ttu-id="a8c77-125">In ogni nodo di un cluster di Service Fabric autonomo è distribuito il runtime di Service Fabric. Tutti i nodi sono membri del cluster.</span><span class="sxs-lookup"><span data-stu-id="a8c77-125">Each node in a standalone Service Fabric cluster has the Service Fabric runtime deployed and is a member of the cluster.</span></span> <span data-ttu-id="a8c77-126">In una distribuzione di produzione tipica è presente un nodo per istanza (fisica o virtuale) del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a8c77-126">In a typical production deployment, there is one node per OS instance (physical or virtual).</span></span> <span data-ttu-id="a8c77-127">La dimensione del cluster viene determinata in base alle esigenze aziendali.</span><span class="sxs-lookup"><span data-stu-id="a8c77-127">The cluster size is determined by your business needs.</span></span> <span data-ttu-id="a8c77-128">È tuttavia necessario avere una dimensione minima del cluster di tre nodi (computer o macchine virtuali).</span><span class="sxs-lookup"><span data-stu-id="a8c77-128">However, you must have a minimum cluster size of three nodes (machines or virtual machines).</span></span>
<span data-ttu-id="a8c77-129">A scopi di sviluppo è possibile configurare più di un nodo in una macchina specifica.</span><span class="sxs-lookup"><span data-stu-id="a8c77-129">For development purposes, you can have more than one node on a given machine.</span></span> <span data-ttu-id="a8c77-130">In un ambiente di produzione, il Service Fabric supporta solo un nodo per ogni macchina virtuale o fisica.</span><span class="sxs-lookup"><span data-stu-id="a8c77-130">In a production environment, Service Fabric supports only one node per physical or virtual machine.</span></span>

### <a name="step-4-determine-the-number-of-fault-domains-and-upgrade-domains"></a><span data-ttu-id="a8c77-131">Passaggio 4: identificazione del numero di domini di errore e di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="a8c77-131">Step 4: Determine the number of fault domains and upgrade domains</span></span>
<span data-ttu-id="a8c77-132">Un *dominio di errore* è un'unità fisica di errore ed è direttamente correlato all'infrastruttura fisica nei data center.</span><span class="sxs-lookup"><span data-stu-id="a8c77-132">A *fault domain* (FD) is a physical unit of failure and is directly related to the physical infrastructure in the data centers.</span></span> <span data-ttu-id="a8c77-133">È costituito da componenti hardware (computer, commutatori, rete e altro) che condividono un singolo punto di guasto.</span><span class="sxs-lookup"><span data-stu-id="a8c77-133">A fault domain consists of hardware components (computers, switches, networks, and more) that share a single point of failure.</span></span> <span data-ttu-id="a8c77-134">Sebbene non sia presente una mappatura 1:1 tra domini di errore e rack, ogni rack può essere considerato in senso lato un dominio di errore.</span><span class="sxs-lookup"><span data-stu-id="a8c77-134">Although there is no 1:1 mapping between fault domains and racks, loosely speaking, each rack can be considered a fault domain.</span></span> <span data-ttu-id="a8c77-135">Quando si esaminano i nodi nel cluster è consigliabile distribuire i nodi tra gli ultimi tre domini di errore.</span><span class="sxs-lookup"><span data-stu-id="a8c77-135">When considering the nodes in your cluster, we strongly recommend that the nodes be distributed among at least three fault domains.</span></span>

<span data-ttu-id="a8c77-136">Quando si specificano domini di errore nel file ClusterConfig.json, è possibile scegliere il nome di ogni dominio di errore.</span><span class="sxs-lookup"><span data-stu-id="a8c77-136">When you specify FDs in ClusterConfig.json, you can choose the name for each FD.</span></span> <span data-ttu-id="a8c77-137">Il Service Fabric supporta i domini di errore gerarchici, in modo che possano rispecchiare la topologia infrastrutturale.</span><span class="sxs-lookup"><span data-stu-id="a8c77-137">Service Fabric supports hierarchical FDs, so you can reflect your infrastructure topology in them.</span></span>  <span data-ttu-id="a8c77-138">Di seguito sono riportati esempi di domini di errore validi:</span><span class="sxs-lookup"><span data-stu-id="a8c77-138">For example, the following FDs are valid:</span></span>

* <span data-ttu-id="a8c77-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span><span class="sxs-lookup"><span data-stu-id="a8c77-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span></span>
* <span data-ttu-id="a8c77-140">"faultDomain": "fd:/FD1"</span><span class="sxs-lookup"><span data-stu-id="a8c77-140">"faultDomain": "fd:/FD1"</span></span>
* <span data-ttu-id="a8c77-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span><span class="sxs-lookup"><span data-stu-id="a8c77-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span></span>

<span data-ttu-id="a8c77-142">Un *dominio di aggiornamento* è un'unità logica di nodi.</span><span class="sxs-lookup"><span data-stu-id="a8c77-142">An *upgrade domain* (UD) is a logical unit of nodes.</span></span> <span data-ttu-id="a8c77-143">Durante gli aggiornamenti orchestrati di Service Fabric (di applicazione o cluster), tutti i nodi in un dominio di aggiornamento vengono disattivati per eseguire l'aggiornamento, mentre i nodi in altri domini di aggiornamento rimangono disponibili per gestire le richieste.</span><span class="sxs-lookup"><span data-stu-id="a8c77-143">During Service Fabric orchestrated upgrades (either an application upgrade or a cluster upgrade), all nodes in a UD are taken down to perform the upgrade while nodes in other UDs remain available to serve requests.</span></span> <span data-ttu-id="a8c77-144">Gli aggiornamenti del firmware sulle macchine non rispettano i domini di aggiornamento ed è pertanto necessario eseguirli su una macchina alla volta.</span><span class="sxs-lookup"><span data-stu-id="a8c77-144">The firmware upgrades you perform on your machines do not honor UDs, so you must do them one machine at a time.</span></span>

<span data-ttu-id="a8c77-145">Il metodo più semplice per descrivere questi concetti è considerare i domini di errore come unità degli errori imprevisti e i domini di aggiornamento come unità della manutenzione pianificata.</span><span class="sxs-lookup"><span data-stu-id="a8c77-145">The simplest way to think about these concepts is to consider FDs as the unit of unplanned failure and UDs as the unit of planned maintenance.</span></span>

<span data-ttu-id="a8c77-146">Quando si specificano domini di aggiornamento nel file ClusterConfig.json è possibile scegliere il nome di ogni dominio di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="a8c77-146">When you specify UDs in ClusterConfig.json, you can choose the name for each UD.</span></span> <span data-ttu-id="a8c77-147">Di seguito sono riportati esempi di nomi validi:</span><span class="sxs-lookup"><span data-stu-id="a8c77-147">For example, the following names are valid:</span></span>

* <span data-ttu-id="a8c77-148">"upgradeDomain": "UD0"</span><span class="sxs-lookup"><span data-stu-id="a8c77-148">"upgradeDomain": "UD0"</span></span>
* <span data-ttu-id="a8c77-149">"upgradeDomain": "UD1A"</span><span class="sxs-lookup"><span data-stu-id="a8c77-149">"upgradeDomain": "UD1A"</span></span>
* <span data-ttu-id="a8c77-150">"upgradeDomain": "DomainRed"</span><span class="sxs-lookup"><span data-stu-id="a8c77-150">"upgradeDomain": "DomainRed"</span></span>
* <span data-ttu-id="a8c77-151">"upgradeDomain": "Blue"</span><span class="sxs-lookup"><span data-stu-id="a8c77-151">"upgradeDomain": "Blue"</span></span>

<span data-ttu-id="a8c77-152">Per informazioni più dettagliate sui domini di aggiornamento e di errore, vedere [Descrizione di un cluster di Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md).</span><span class="sxs-lookup"><span data-stu-id="a8c77-152">For more detailed information on upgrade domains and fault domains, see [Describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md).</span></span>

### <a name="step-5-download-the-service-fabric-standalone-package-for-windows-server"></a><span data-ttu-id="a8c77-153">Passaggio 5: scaricare il pacchetto autonomo Service Fabric per Windows Server</span><span class="sxs-lookup"><span data-stu-id="a8c77-153">Step 5: Download the Service Fabric standalone package for Windows Server</span></span>
<span data-ttu-id="a8c77-154">[Collegamento per il download - Pacchetto autonomo di Service Fabric - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690); decomprimere il pacchetto in un computer di distribuzione non appartenente al cluster o in uno dei computer che faranno parte del cluster.</span><span class="sxs-lookup"><span data-stu-id="a8c77-154">[Download Link - Service Fabric Standalone Package - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) and unzip the package, either to a deployment machine that is not part of the cluster, or to one of the machines that will be a part of your cluster.</span></span>

### <a name="step-6-modify-cluster-configuration"></a><span data-ttu-id="a8c77-155">Passaggio 6: modificare la configurazione del cluster</span><span class="sxs-lookup"><span data-stu-id="a8c77-155">Step 6: Modify cluster configuration</span></span>
<span data-ttu-id="a8c77-156">Per creare un cluster autonomo, è necessario creare un file ClusterConfig.json di configurazione del cluster autonomo che descrive la specifica del cluster.</span><span class="sxs-lookup"><span data-stu-id="a8c77-156">To create a standalone cluster you have to create a standalone cluster configuration ClusterConfig.json file, which describes the specification of the cluster.</span></span> <span data-ttu-id="a8c77-157">È possibile basare il file di configurazione sui modelli disponibili nel collegamento seguente.</span><span class="sxs-lookup"><span data-stu-id="a8c77-157">You can base the configuration file on the templates found at the below link.</span></span> <br><span data-ttu-id="a8c77-158">
[Configurazioni di cluster autonomi](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span><span class="sxs-lookup"><span data-stu-id="a8c77-158">
[Standalone Cluster Configurations](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span></span>

<span data-ttu-id="a8c77-159">Per informazioni dettagliate sulle sezioni di tale file, vedere [Impostazioni di configurazione per un cluster autonomo in Windows](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="a8c77-159">For details on the sections in this file, see [Configuration settings for standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span>

<span data-ttu-id="a8c77-160">Aprire uno dei file ClusterConfig.json del pacchetto scaricato e modificare le impostazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="a8c77-160">Open one of the ClusterConfig.json files from the package you downloaded and modify the following settings:</span></span>
| <span data-ttu-id="a8c77-161">**Impostazioni di configurazione**</span><span class="sxs-lookup"><span data-stu-id="a8c77-161">**Configuration Setting**</span></span> | <span data-ttu-id="a8c77-162">**Descrizione**</span><span class="sxs-lookup"><span data-stu-id="a8c77-162">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="a8c77-163">**NodeTypes**</span><span class="sxs-lookup"><span data-stu-id="a8c77-163">**NodeTypes**</span></span> |<span data-ttu-id="a8c77-164">I tipi di nodo permettono di separare i nodi del cluster in diversi gruppi.</span><span class="sxs-lookup"><span data-stu-id="a8c77-164">Node types allow you to separate your cluster nodes into various groups.</span></span> <span data-ttu-id="a8c77-165">Un cluster deve avere almeno un NodeType.</span><span class="sxs-lookup"><span data-stu-id="a8c77-165">A cluster must have at least one NodeType.</span></span> <span data-ttu-id="a8c77-166">Tutti i nodi in un gruppo possiedono le seguenti caratteristiche comuni: </span><span class="sxs-lookup"><span data-stu-id="a8c77-166">All nodes in a group have the following common characteristics:</span></span> <br> <span data-ttu-id="a8c77-167">**Nome** : il nome del tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="a8c77-167">**Name** - This is the node type name.</span></span> <br><span data-ttu-id="a8c77-168">**Porte di endpoint** : endpoint con nomi diversi (porte) associati a questo tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="a8c77-168">**Endpoint Ports** - These are various named end points (ports) that are associated with this node type.</span></span> <span data-ttu-id="a8c77-169">È possibile usare qualsiasi numero di porta desiderato, purché non entri in conflitto con qualsiasi altro nel manifesto e non sia già utilizzato da un'altra applicazione eseguita nel computer/VM.</span><span class="sxs-lookup"><span data-stu-id="a8c77-169">You can use any port number that you wish, as long as they do not conflict with anything else in this manifest and are not already in use by any other application running on the machine/VM.</span></span> <br> <span data-ttu-id="a8c77-170">**Proprietà di posizionamento**: descrivono proprietà per questo tipo di nodo usate come vincoli di posizionamento per i servizi di sistema o i servizi dell'utente.</span><span class="sxs-lookup"><span data-stu-id="a8c77-170">**Placement Properties** - These describe properties for this node type that you use as placement constraints for the system services or your services.</span></span> <span data-ttu-id="a8c77-171">Queste proprietà sono coppie chiave-valore definite dall'utente che forniscono metadati aggiuntivi per un determinato nodo.</span><span class="sxs-lookup"><span data-stu-id="a8c77-171">These properties are user-defined key/value pairs that provide extra meta data for a given node.</span></span> <span data-ttu-id="a8c77-172">Le proprietà del nodo possono includere ad esempio la presenza di un disco rigido o di una scheda grafica, il numero di spindle nel disco rigido, le memorie centrali e altre proprietà fisiche.</span><span class="sxs-lookup"><span data-stu-id="a8c77-172">Examples of node properties would be whether the node has a hard drive or graphics card, the number of spindles in its hard drive, cores, and other physical properties.</span></span> <br> <span data-ttu-id="a8c77-173">**Capacità** : le capacità del nodo definiscono il nome e la quantità di una particolare risorsa utilizzabile da parte di un determinato nodo.</span><span class="sxs-lookup"><span data-stu-id="a8c77-173">**Capacities** - Node capacities define the name and amount of a particular resource that a particular node has available for consumption.</span></span> <span data-ttu-id="a8c77-174">Ad esempio, un nodo può definire la propria capacità per una metrica denominata "MemoryInMb" con un valore predefinito di 2048 MB di memoria disponibile.</span><span class="sxs-lookup"><span data-stu-id="a8c77-174">For example, a node may define that it has capacity for a metric called “MemoryInMb” and that it has 2048 MB available by default.</span></span> <span data-ttu-id="a8c77-175">Queste capacità vengono usate in fase di esecuzione per garantire che i servizi che richiedono una determinata quantità di risorse vengano inseriti nei nodi in cui tali risorse sono disponibili nelle quantità richieste.</span><span class="sxs-lookup"><span data-stu-id="a8c77-175">These capacities are used at runtime to ensure that services that require particular amounts of resources are placed on the nodes that have those resources available in the required amounts.</span></span><br><span data-ttu-id="a8c77-176">**IsPrimary** : se sono definiti più NodeType, verificare che solo uno sia impostato come primario, con il valore *true*, ovvero quello in cui vengono eseguiti i servizi di sistema.</span><span class="sxs-lookup"><span data-stu-id="a8c77-176">**IsPrimary** - If you have more than one NodeType defined ensure that only one is set to primary with the value *true*, which is where the system services run.</span></span> <span data-ttu-id="a8c77-177">Tutti gli altri tipi di nodo devono essere impostati sul valore *false*</span><span class="sxs-lookup"><span data-stu-id="a8c77-177">All other node types should be set to the value *false*</span></span> |
| <span data-ttu-id="a8c77-178">**Nodi**</span><span class="sxs-lookup"><span data-stu-id="a8c77-178">**Nodes**</span></span> |<span data-ttu-id="a8c77-179">Questi sono i dettagli per ciascun nodo che farà parte del cluster (tipo di nodo, nome del nodo, indirizzo IP, dominio di errore e dominio di aggiornamento del nodo).</span><span class="sxs-lookup"><span data-stu-id="a8c77-179">These are the details for each of the nodes that are part of the cluster (node type, node name, IP address, fault domain, and upgrade domain of the node).</span></span> <span data-ttu-id="a8c77-180">I computer in cui si vuole creare il cluster devono essere elencati in questa sezione con il relativo indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="a8c77-180">The machines you want the cluster to be created on need to be listed here with their IP addresses.</span></span> <br> <span data-ttu-id="a8c77-181">Se si usa lo stesso indirizzo IP per tutti i nodi, viene creato un cluster di una casella che può essere usato per scopi di test.</span><span class="sxs-lookup"><span data-stu-id="a8c77-181">If you use the same IP address for all the nodes, then a one-box cluster is created, which you can use for testing purposes.</span></span> <span data-ttu-id="a8c77-182">Non usare cluster di una casella per la distribuzione dei carichi di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="a8c77-182">Do not use One-box clusters for deploying production workloads.</span></span> |

<span data-ttu-id="a8c77-183">Dopo che tutte le impostazioni sono state configurate per l'ambiente nella configurazione del cluster, è possibile eseguire il test nell'ambiente del cluster (passaggio 7).</span><span class="sxs-lookup"><span data-stu-id="a8c77-183">After the cluster configuration has had all settings configured to the environment, it can be tested against the cluster environment (step 7).</span></span>

<a id="environmentsetup"></a>

### <a name="step-7-environment-setup"></a><span data-ttu-id="a8c77-184">Passaggio 7.</span><span class="sxs-lookup"><span data-stu-id="a8c77-184">Step 7.</span></span> <span data-ttu-id="a8c77-185">Configurazione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="a8c77-185">Environment setup</span></span>

<span data-ttu-id="a8c77-186">Quando un amministratore di cluster configura un cluster autonomo di Service Fabric, l'ambiente deve essere configurato con i criteri seguenti:</span><span class="sxs-lookup"><span data-stu-id="a8c77-186">When a cluster administrator configures a Service Fabric standalone cluster, the environment is needs to be set up with the following criteria:</span></span> <br>
1. <span data-ttu-id="a8c77-187">L'utente che ha creato il cluster deve disporre dei privilegi di sicurezza a livello di amministratore per tutti i computer elencati come nodi nel file di configurazione del cluster.</span><span class="sxs-lookup"><span data-stu-id="a8c77-187">The user creating the cluster should have administrator-level security privileges to all machines that are listed as nodes in the cluster configuration file.</span></span>
2. <span data-ttu-id="a8c77-188">Il computer da cui viene creato il cluster e ogni computer del nodo del cluster devono rispettare i requisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="a8c77-188">Machine from which the cluster is created, as well as each cluster node machine must:</span></span>
* <span data-ttu-id="a8c77-189">Service Fabric SDK non installato</span><span class="sxs-lookup"><span data-stu-id="a8c77-189">Have Service Fabric SDK uninstalled</span></span>
* <span data-ttu-id="a8c77-190">Runtime di Service Fabric non installato</span><span class="sxs-lookup"><span data-stu-id="a8c77-190">Have Service Fabric runtime uninstalled</span></span> 
* <span data-ttu-id="a8c77-191">Servizio Windows Firewall (mpssvc) abilitato</span><span class="sxs-lookup"><span data-stu-id="a8c77-191">Have the Windows Firewall service (mpssvc) enabled</span></span>
* <span data-ttu-id="a8c77-192">Servizio Registro di sistema remoto (remoteregistry) abilitato</span><span class="sxs-lookup"><span data-stu-id="a8c77-192">Have the Remote Registry Service (remoteregistry) enabled</span></span>
* <span data-ttu-id="a8c77-193">Condivisione file (SMB) abilitata</span><span class="sxs-lookup"><span data-stu-id="a8c77-193">Have file sharing (SMB) enabled</span></span>
* <span data-ttu-id="a8c77-194">Porte aperte necessarie in base alle porte di configurazione del cluster</span><span class="sxs-lookup"><span data-stu-id="a8c77-194">Have necessary ports opened, based on cluster configuration ports</span></span>
* <span data-ttu-id="a8c77-195">Porte aperte necessarie per il servizio Registro di sistema remoto e Windows SMB: 135, 137, 138, 139 e 445</span><span class="sxs-lookup"><span data-stu-id="a8c77-195">Have necessary ports opened for Windows SMB and Remote Registry service: 135, 137, 138, 139, and 445</span></span>
* <span data-ttu-id="a8c77-196">Connettività di rete reciproca</span><span class="sxs-lookup"><span data-stu-id="a8c77-196">Have network connectivity to one another</span></span>
3. <span data-ttu-id="a8c77-197">Nessuna delle macchine ai nodi del cluster deve essere un controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="a8c77-197">None of the cluster node machines should be a Domain Controller.</span></span>
4. <span data-ttu-id="a8c77-198">Se il cluster da distribuire è protetto, convalidare che i prerequisiti di sicurezza necessari siano corretti e che siano stati configurati correttamente in base alla configurazione.</span><span class="sxs-lookup"><span data-stu-id="a8c77-198">If the cluster to be deployed is a secure cluster, validate the necessary security prerequisites are in place, and are configured correctly against the configuration.</span></span>
5. <span data-ttu-id="a8c77-199">Se i computer del cluster non sono accessibili da Internet, impostare quanto segue nella configurazione del cluster:</span><span class="sxs-lookup"><span data-stu-id="a8c77-199">If the cluster machines are not internet-accessible, set the following in the cluster configuration:</span></span>
* <span data-ttu-id="a8c77-200">Disabilitare la telemetria: in *properties* impostare *"enableTelemetry": false*</span><span class="sxs-lookup"><span data-stu-id="a8c77-200">Disable telemetry:   Under *properties* set   *"enableTelemetry": false*</span></span>
* <span data-ttu-id="a8c77-201">Disabilitare le notifiche e il download automatici della versione di Service Fabric relativi alla condizione che la versione corrente del cluster sta per raggiungere il termine del supporto: in *properties* impostare *"fabricClusterAutoupgradeEnabled": false*</span><span class="sxs-lookup"><span data-stu-id="a8c77-201">Disable automatic Fabric version downloading & notifications that the current cluster version is nearing end of support:   Under *properties* set   *"fabricClusterAutoupgradeEnabled": false*</span></span>
* <span data-ttu-id="a8c77-202">In alternativa, se l'accesso a Internet dalla rete è limitato ai domini consentiti, è necessario l'aggiornamento automatico dei domini seguenti: go.microsoft.com download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="a8c77-202">Alternatively if network internet access is limited to white-listed domains, the domains below are required for automatic upgrade:   go.microsoft.com   download.microsoft.com</span></span>

6. <span data-ttu-id="a8c77-203">Impostare le esclusioni antivirus di Service Fabric appropriate:</span><span class="sxs-lookup"><span data-stu-id="a8c77-203">Set appropriate Service Fabric antivirus exclusions:</span></span>

| <span data-ttu-id="a8c77-204">**Directory escluse dall'antivirus**</span><span class="sxs-lookup"><span data-stu-id="a8c77-204">**Antivirus Excluded directories**</span></span> |
| --- |
| <span data-ttu-id="a8c77-205">Program Files\Microsoft Service Fabric</span><span class="sxs-lookup"><span data-stu-id="a8c77-205">Program Files\Microsoft Service Fabric</span></span> |
| <span data-ttu-id="a8c77-206">FabricDataRoot (dalla configurazione del cluster)</span><span class="sxs-lookup"><span data-stu-id="a8c77-206">FabricDataRoot (from cluster configuration)</span></span> |
| <span data-ttu-id="a8c77-207">FabricLogRoot (dalla configurazione del cluster)</span><span class="sxs-lookup"><span data-stu-id="a8c77-207">FabricLogRoot (from cluster configuration)</span></span> |

| <span data-ttu-id="a8c77-208">**Processi esclusi dall'antivirus**</span><span class="sxs-lookup"><span data-stu-id="a8c77-208">**Antivirus Excluded processes**</span></span> |
| --- |
| <span data-ttu-id="a8c77-209">Fabric.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-209">Fabric.exe</span></span> |
| <span data-ttu-id="a8c77-210">FabricHost.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-210">FabricHost.exe</span></span> |
| <span data-ttu-id="a8c77-211">FabricInstallerService.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-211">FabricInstallerService.exe</span></span> |
| <span data-ttu-id="a8c77-212">FabricSetup.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-212">FabricSetup.exe</span></span> |
| <span data-ttu-id="a8c77-213">FabricDeployer.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-213">FabricDeployer.exe</span></span> |
| <span data-ttu-id="a8c77-214">ImageBuilder.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-214">ImageBuilder.exe</span></span> |
| <span data-ttu-id="a8c77-215">FabricGateway.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-215">FabricGateway.exe</span></span> |
| <span data-ttu-id="a8c77-216">FabricDCA.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-216">FabricDCA.exe</span></span> |
| <span data-ttu-id="a8c77-217">FabricFAS.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-217">FabricFAS.exe</span></span> |
| <span data-ttu-id="a8c77-218">FabricUOS.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-218">FabricUOS.exe</span></span> |
| <span data-ttu-id="a8c77-219">FabricRM.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-219">FabricRM.exe</span></span> |
| <span data-ttu-id="a8c77-220">FileStoreService.exe</span><span class="sxs-lookup"><span data-stu-id="a8c77-220">FileStoreService.exe</span></span> |

### <a name="step-8-validate-environment-using-testconfiguration-script"></a><span data-ttu-id="a8c77-221">Passaggio 8.</span><span class="sxs-lookup"><span data-stu-id="a8c77-221">Step 8.</span></span> <span data-ttu-id="a8c77-222">Convalidare l'ambiente con lo script TestConfiguration</span><span class="sxs-lookup"><span data-stu-id="a8c77-222">Validate environment using TestConfiguration script</span></span>
<span data-ttu-id="a8c77-223">Lo script TestConfiguration.ps1 è incluso nel pacchetto autonomo.</span><span class="sxs-lookup"><span data-stu-id="a8c77-223">The TestConfiguration.ps1 script can be found in the standalone package.</span></span> <span data-ttu-id="a8c77-224">Viene usato come Best Practices Analyzer per convalidare alcuni criteri indicati sopra e deve essere usato come verifica di integrità per convalidare se un cluster può essere distribuito in un determinato ambiente.</span><span class="sxs-lookup"><span data-stu-id="a8c77-224">It is used as a Best Practices Analyzer to validate some of the criteria above and should be used as a sanity check to validate whether a cluster can be deployed on a given environment.</span></span> <span data-ttu-id="a8c77-225">In caso di errore vedere l'elenco in [Configurazione dell'ambiente](service-fabric-cluster-standalone-deployment-preparation.md) per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="a8c77-225">If there is any failure, refer to the list under [Environment Setup](service-fabric-cluster-standalone-deployment-preparation.md) for troubleshooting.</span></span> 

<span data-ttu-id="a8c77-226">Questo script può essere eseguito su qualsiasi macchina con accesso amministrativo a tutte le macchine elencate come nodi nel file di configurazione del cluster.</span><span class="sxs-lookup"><span data-stu-id="a8c77-226">This script can be run on any machine that has administrator access to all the machines that are listed as nodes in the cluster configuration file.</span></span> <span data-ttu-id="a8c77-227">La macchina in cui viene eseguito lo script non deve necessariamente far parte del cluster.</span><span class="sxs-lookup"><span data-stu-id="a8c77-227">The machine that this script is run on does not have to be part of the cluster.</span></span>

```powershell
PS C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer> .\TestConfiguration.ps1 -ClusterConfigFilePath .\ClusterConfig.Unsecure.DevCluster.json
Trace folder already exists. Traces will be written to existing trace folder: C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer\DeploymentTraces
Running Best Practices Analyzer...
Best Practices Analyzer completed successfully.


LocalAdminPrivilege        : True
IsJsonValid                : True
IsCabValid                 : True
RequiredPortsOpen          : True
RemoteRegistryAvailable    : True
FirewallAvailable          : True
RpcCheckPassed             : True
NoConflictingInstallations : True
FabricInstallable          : True
Passed                     : True
```

<span data-ttu-id="a8c77-228">Questo modulo di configurazione di test attualmente non convalida la configurazione della sicurezza; questa operazione deve essere eseguita in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="a8c77-228">Currently this configuration testing module does not validate the security configuration so this has to be done independently.</span></span>  

> [!NOTE]
> <span data-ttu-id="a8c77-229">Apportiamo costantemente miglioramenti per ottimizzare il modulo; inviare eventuali suggerimenti tramite i [canali del supporto](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support) se si individua un caso errato o mancante non rilevato attualmente da TestConfiguration.</span><span class="sxs-lookup"><span data-stu-id="a8c77-229">We are continually making improvements to make this module more robust, so if there is a faulty or missing case which you believe isn't currently caught by TestConfiguration, please let us know through our [support channels](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span></span>   
> 
> 

## <a name="next-steps"></a><span data-ttu-id="a8c77-230">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="a8c77-230">Next steps</span></span>
* [<span data-ttu-id="a8c77-231">Creare un cluster autonomo in esecuzione su Windows Server</span><span class="sxs-lookup"><span data-stu-id="a8c77-231">Create a standalone cluster running on Windows Server</span></span>](service-fabric-cluster-creation-for-windows-server.md)
