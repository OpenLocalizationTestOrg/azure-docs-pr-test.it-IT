---
title: 'Autenticazione: Microsoft Threat Modeling Tool - Azure | Microsoft Docs'
description: Procedure di mitigazione delle minacce esposte in Threat Modeling Tool
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: e547469dc61eddd1d772571ab0919532ac91f128
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="security-frame-authentication--mitigations"></a><span data-ttu-id="ab742-103">Infrastruttura di sicurezza: autenticazione - Procedure di mitigazione</span><span class="sxs-lookup"><span data-stu-id="ab742-103">Security Frame: Authentication | Mitigations</span></span> 
| <span data-ttu-id="ab742-104">Prodotto o servizio</span><span class="sxs-lookup"><span data-stu-id="ab742-104">Product/Service</span></span> | <span data-ttu-id="ab742-105">Articolo</span><span class="sxs-lookup"><span data-stu-id="ab742-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="ab742-106">**Applicazione Web**</span><span class="sxs-lookup"><span data-stu-id="ab742-106">**Web Application**</span></span>    | <ul><li>[<span data-ttu-id="ab742-107">Valutare l'uso di un meccanismo di autenticazione standard per l'autenticazione nell'applicazione Web</span><span class="sxs-lookup"><span data-stu-id="ab742-107">Consider using a standard authentication mechanism to authenticate to Web Application</span></span>](#standard-authn-web-app)</li><li>[<span data-ttu-id="ab742-108">Gestire in modo sicuro scenari di autenticazione non riuscita mediante le applicazioni</span><span class="sxs-lookup"><span data-stu-id="ab742-108">Applications must handle failed authentication scenarios securely</span></span>](#handle-failed-authn)</li><li>[<span data-ttu-id="ab742-109">Abilitare l'autenticazione adattiva o incrementale</span><span class="sxs-lookup"><span data-stu-id="ab742-109">Enable step up or adaptive authentication</span></span>](#step-up-adaptive-authn)</li><li>[<span data-ttu-id="ab742-110">Assicurarsi che le interfacce amministrative siano bloccate correttamente</span><span class="sxs-lookup"><span data-stu-id="ab742-110">Ensure that administrative interfaces are appropriately locked down</span></span>](#admin-interface-lockdown)</li><li>[<span data-ttu-id="ab742-111">Implementare in modo sicuro funzionalità per la password dimenticata</span><span class="sxs-lookup"><span data-stu-id="ab742-111">Implement forgot password functionalities securely</span></span>](#forgot-pword-fxn)</li><li>[<span data-ttu-id="ab742-112">Assicurarsi che vengano implementati criteri di account e password</span><span class="sxs-lookup"><span data-stu-id="ab742-112">Ensure that password and account policy are implemented</span></span>](#pword-account-policy)</li><li>[<span data-ttu-id="ab742-113">Implementare controlli per prevenire l'enumerazione del nome utente</span><span class="sxs-lookup"><span data-stu-id="ab742-113">Implement controls to prevent username enumeration</span></span>](#controls-username-enum)</li></ul> |
| <span data-ttu-id="ab742-114">**Database**</span><span class="sxs-lookup"><span data-stu-id="ab742-114">**Database**</span></span> | <ul><li>[<span data-ttu-id="ab742-115">Usare l'autenticazione di Windows per la connessione a SQL Server, se possibile</span><span class="sxs-lookup"><span data-stu-id="ab742-115">When possible, use Windows Authentication for connecting to SQL Server</span></span>](#win-authn-sql)</li><li>[<span data-ttu-id="ab742-116">Usare l'autenticazione di Azure Active Directory per la connessione al database SQL, se possibile</span><span class="sxs-lookup"><span data-stu-id="ab742-116">When possible use Azure Active Directory Authentication for Connecting to SQL Database</span></span>](#aad-authn-sql)</li><li>[<span data-ttu-id="ab742-117">Assicurarsi che vengano applicati i criteri di account e password in SQL Server quando viene usata la modalità di autenticazione SQL</span><span class="sxs-lookup"><span data-stu-id="ab742-117">When SQL authentication mode is used, ensure that account and password policy are enforced on SQL server</span></span>](#authn-account-pword)</li><li>[<span data-ttu-id="ab742-118">Non usare l'autenticazione SQL in database indipendenti</span><span class="sxs-lookup"><span data-stu-id="ab742-118">Do not use SQL Authentication in contained databases</span></span>](#autn-contained-db)</li></ul> |
| <span data-ttu-id="ab742-119">**Hub eventi di Azure**</span><span class="sxs-lookup"><span data-stu-id="ab742-119">**Azure Event Hub**</span></span> | <ul><li>[<span data-ttu-id="ab742-120">Usare credenziali di autenticazione per dispositivo con i token di firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="ab742-120">Use per device authentication credentials using SaS tokens</span></span>](#authn-sas-tokens)</li></ul> |
| <span data-ttu-id="ab742-121">**Limite di trust di Azure**</span><span class="sxs-lookup"><span data-stu-id="ab742-121">**Azure Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="ab742-122">Abilitare Azure Multi-Factor Authentication per amministratori di Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-122">Enable Azure Multi-Factor Authentication for Azure Administrators</span></span>](#multi-factor-azure-admin)</li></ul> |
| <span data-ttu-id="ab742-123">**Limite di trust di Service Fabric**</span><span class="sxs-lookup"><span data-stu-id="ab742-123">**Service Fabric Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="ab742-124">Limitare l'accesso anonimo a un cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-124">Restrict anonymous access to Service Fabric Cluster</span></span>](#anon-access-cluster)</li><li>[<span data-ttu-id="ab742-125">Assicurarsi che il certificato da client a nodo di Service Fabric sia diverso dal certificato da nodo a nodo</span><span class="sxs-lookup"><span data-stu-id="ab742-125">Ensure that Service Fabric client-to-node certificate is different from node-to-node certificate</span></span>](#fabric-cn-nn)</li><li>[<span data-ttu-id="ab742-126">Usare Azure Active Directory per autenticare client in cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-126">Use AAD to authenticate clients to service fabric clusters</span></span>](#aad-client-fabric)</li><li>[<span data-ttu-id="ab742-127">Assicurarsi che i certificati di Service Fabric vengano ottenuti da un'Autorità di certificazione (CA) approvata</span><span class="sxs-lookup"><span data-stu-id="ab742-127">Ensure that service fabric certificates are obtained from an approved Certificate Authority (CA)</span></span>](#fabric-cert-ca)</li></ul> |
| <span data-ttu-id="ab742-128">**Identity Server**</span><span class="sxs-lookup"><span data-stu-id="ab742-128">**Identity Server**</span></span> | <ul><li>[<span data-ttu-id="ab742-129">Usare scenari di autenticazione standard supportati da Identity Server</span><span class="sxs-lookup"><span data-stu-id="ab742-129">Use standard authentication scenarios supported by Identity Server</span></span>](#standard-authn-id)</li><li>[<span data-ttu-id="ab742-130">Sostituire la cache dei token di Identity Server predefinita con un'alternativa scalabile</span><span class="sxs-lookup"><span data-stu-id="ab742-130">Override the default Identity Server token cache with a scalable alternative</span></span>](#override-token)</li></ul> |
| <span data-ttu-id="ab742-131">**Limite di Trust del computer**</span><span class="sxs-lookup"><span data-stu-id="ab742-131">**Machine Trust Boundary**</span></span> | <ul><li>[<span data-ttu-id="ab742-132">Assicurarsi che i file binari dell'applicazione distribuita abbiano una firma digitale</span><span class="sxs-lookup"><span data-stu-id="ab742-132">Ensure that deployed application's binaries are digitally signed</span></span>](#binaries-signed)</li></ul> |
| <span data-ttu-id="ab742-133">**WCF**</span><span class="sxs-lookup"><span data-stu-id="ab742-133">**WCF**</span></span> | <ul><li>[<span data-ttu-id="ab742-134">Abilitare l'autenticazione nella connessione a code MSMQ in WCF</span><span class="sxs-lookup"><span data-stu-id="ab742-134">Enable authentication when connecting to MSMQ queues in WCF</span></span>](#msmq-queues)</li><li>[<span data-ttu-id="ab742-135">WCF: non impostare il messaggio clientCredentialType su Nessuno</span><span class="sxs-lookup"><span data-stu-id="ab742-135">WCF-Do not set Message clientCredentialType to none</span></span>](#message-none)</li><li>[<span data-ttu-id="ab742-136">WCF: non impostare il trasporto clientCredentialType su Nessuno</span><span class="sxs-lookup"><span data-stu-id="ab742-136">WCF-Do not set Transport clientCredentialType to none</span></span>](#transport-none)</li></ul> |
| <span data-ttu-id="ab742-137">**API Web**</span><span class="sxs-lookup"><span data-stu-id="ab742-137">**Web API**</span></span> | <ul><li>[<span data-ttu-id="ab742-138">Assicurarsi che vengano usate tecniche di autenticazione standard per proteggere le API Web</span><span class="sxs-lookup"><span data-stu-id="ab742-138">Ensure that standard authentication techniques are used to secure Web APIs</span></span>](#authn-secure-api)</li></ul> |
| <span data-ttu-id="ab742-139">**Azure AD**</span><span class="sxs-lookup"><span data-stu-id="ab742-139">**Azure AD**</span></span> | <ul><li>[<span data-ttu-id="ab742-140">Usare scenari di autenticazione standard supportati da Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="ab742-140">Use standard authentication scenarios supported by Azure Active Directory</span></span>](#authn-aad)</li><li>[<span data-ttu-id="ab742-141">Sostituire la cache dei token di ADAL predefinita con un'alternativa scalabile</span><span class="sxs-lookup"><span data-stu-id="ab742-141">Override the default ADAL token cache with a scalable alternative</span></span>](#adal-scalable)</li><li>[<span data-ttu-id="ab742-142">Assicurarsi che venga usata la proprietà TokenReplayCache per impedire la riproduzione dei token di autenticazione ADAL</span><span class="sxs-lookup"><span data-stu-id="ab742-142">Ensure that TokenReplayCache is used to prevent the replay of ADAL authentication tokens</span></span>](#tokenreplaycache-adal)</li><li>[<span data-ttu-id="ab742-143">Usare librerie ADAL per gestire le richieste di token da client OAuth2 in AAD o in Active Directory locale</span><span class="sxs-lookup"><span data-stu-id="ab742-143">Use ADAL libraries to manage token requests from OAuth2 clients to AAD (or on-premises AD)</span></span>](#adal-oauth2)</li></ul> |
| <span data-ttu-id="ab742-144">**Gateway IoT sul campo**</span><span class="sxs-lookup"><span data-stu-id="ab742-144">**IoT Field Gateway**</span></span> | <ul><li>[<span data-ttu-id="ab742-145">Autenticare dispositivi che si connettono al gateway sul campo</span><span class="sxs-lookup"><span data-stu-id="ab742-145">Authenticate devices connecting to the Field Gateway</span></span>](#authn-devices-field)</li></ul> |
| <span data-ttu-id="ab742-146">**Gateway IoT cloud**</span><span class="sxs-lookup"><span data-stu-id="ab742-146">**IoT Cloud Gateway**</span></span> | <ul><li>[<span data-ttu-id="ab742-147">Assicurarsi che i dispositivi che si connettono al gateway cloud vengano autenticati</span><span class="sxs-lookup"><span data-stu-id="ab742-147">Ensure that devices connecting to Cloud gateway are authenticated</span></span>](#authn-devices-cloud)</li><li>[<span data-ttu-id="ab742-148">Usare credenziali di autenticazione per dispositivo</span><span class="sxs-lookup"><span data-stu-id="ab742-148">Use per-device authentication credentials</span></span>](#authn-cred)</li></ul> |
| <span data-ttu-id="ab742-149">**Archiviazione di Azure**</span><span class="sxs-lookup"><span data-stu-id="ab742-149">**Azure Storage**</span></span> | <ul><li>[<span data-ttu-id="ab742-150">Assicurarsi che l'accesso in lettura anonimo venga concesso solo ai contenitori e ai BLOB necessari</span><span class="sxs-lookup"><span data-stu-id="ab742-150">Ensure that only the required containers and blobs are given anonymous read access</span></span>](#req-containers-anon)</li><li>[<span data-ttu-id="ab742-151">Concedere l'accesso limitato agli oggetti in Archiviazione di Azure tramite la firma di accesso condiviso o criteri di accesso archiviati</span><span class="sxs-lookup"><span data-stu-id="ab742-151">Grant limited access to objects in Azure storage using SAS or SAP</span></span>](#limited-access-sas)</li></ul> |

## <span data-ttu-id="ab742-152"><a id="standard-authn-web-app"></a>Valutare l'uso di un meccanismo di autenticazione standard per l'autenticazione nell'applicazione Web</span><span class="sxs-lookup"><span data-stu-id="ab742-152"><a id="standard-authn-web-app"></a>Consider using a standard authentication mechanism to authenticate to Web Application</span></span>

| <span data-ttu-id="ab742-153">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-153">Title</span></span>                   | <span data-ttu-id="ab742-154">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-154">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-155">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-155">**Component**</span></span>               | <span data-ttu-id="ab742-156">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-156">Web Application</span></span> | 
| <span data-ttu-id="ab742-157">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-157">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-158">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-158">Build</span></span> |  
| <span data-ttu-id="ab742-159">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-159">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-160">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-160">Generic</span></span> |
| <span data-ttu-id="ab742-161">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-161">**Attributes**</span></span>              | <span data-ttu-id="ab742-162">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-162">N/A</span></span>  |
| <span data-ttu-id="ab742-163">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-163">**References**</span></span>              | <span data-ttu-id="ab742-164">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-164">N/A</span></span>  |
| <span data-ttu-id="ab742-165">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-165">Details</span></span> | <p><span data-ttu-id="ab742-166">L'autenticazione è il processo che permette a un'entità di dimostrare la propria identità, in genere mediante l'uso di credenziali, come un nome utente e una password.</span><span class="sxs-lookup"><span data-stu-id="ab742-166">Authentication is the process where an entity proves its identity, typically through credentials, such as a user name and password.</span></span> <span data-ttu-id="ab742-167">È possibile prendere in considerazione diversi protocolli di autenticazione disponibili,</span><span class="sxs-lookup"><span data-stu-id="ab742-167">There are multiple authentication protocols available which may be considered.</span></span> <span data-ttu-id="ab742-168">alcuni dei quali sono elencati di seguito:</span><span class="sxs-lookup"><span data-stu-id="ab742-168">Some of them are listed below:</span></span></p><ul><li><span data-ttu-id="ab742-169">Certificati client</span><span class="sxs-lookup"><span data-stu-id="ab742-169">Client certificates</span></span></li><li><span data-ttu-id="ab742-170">Basato su Windows</span><span class="sxs-lookup"><span data-stu-id="ab742-170">Windows based</span></span></li><li><span data-ttu-id="ab742-171">Basato su form</span><span class="sxs-lookup"><span data-stu-id="ab742-171">Forms based</span></span></li><li><span data-ttu-id="ab742-172">Federazione: AD FS</span><span class="sxs-lookup"><span data-stu-id="ab742-172">Federation - ADFS</span></span></li><li><span data-ttu-id="ab742-173">Federazione: Azure AD</span><span class="sxs-lookup"><span data-stu-id="ab742-173">Federation - Azure AD</span></span></li><li><span data-ttu-id="ab742-174">Federazione: Identity Server</span><span class="sxs-lookup"><span data-stu-id="ab742-174">Federation - Identity Server</span></span></li></ul><p><span data-ttu-id="ab742-175">Valutare l'uso di un meccanismo di autenticazione standard per identificare il processo di origine</span><span class="sxs-lookup"><span data-stu-id="ab742-175">Consider using a standard authentication mechanism to identify the source process</span></span></p>|

## <span data-ttu-id="ab742-176"><a id="handle-failed-authn"></a>Gestire in modo sicuro scenari di autenticazione non riuscita mediante le applicazioni</span><span class="sxs-lookup"><span data-stu-id="ab742-176"><a id="handle-failed-authn"></a>Applications must handle failed authentication scenarios securely</span></span>

| <span data-ttu-id="ab742-177">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-177">Title</span></span>                   | <span data-ttu-id="ab742-178">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-178">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-179">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-179">**Component**</span></span>               | <span data-ttu-id="ab742-180">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-180">Web Application</span></span> | 
| <span data-ttu-id="ab742-181">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-181">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-182">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-182">Build</span></span> |  
| <span data-ttu-id="ab742-183">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-183">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-184">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-184">Generic</span></span> |
| <span data-ttu-id="ab742-185">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-185">**Attributes**</span></span>              | <span data-ttu-id="ab742-186">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-186">N/A</span></span>  |
| <span data-ttu-id="ab742-187">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-187">**References**</span></span>              | <span data-ttu-id="ab742-188">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-188">N/A</span></span>  |
| <span data-ttu-id="ab742-189">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-189">Details</span></span> | <p><span data-ttu-id="ab742-190">Le applicazioni che eseguono l'autenticazione esplicita degli utenti devono gestire in modo sicuro gli scenari di autenticazione non riuscita. Il meccanismo di autenticazione deve:</span><span class="sxs-lookup"><span data-stu-id="ab742-190">Applications that explicitly authenticate users must handle failed authentication scenarios securely.The authentication mechanism must:</span></span></p><ul><li><span data-ttu-id="ab742-191">Negare l'accesso alle risorse con privilegi quando l'autenticazione ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="ab742-191">Deny access to privileged resources when authentication fails</span></span></li><li><span data-ttu-id="ab742-192">Visualizzare un messaggio di errore generico in caso di autenticazione non riuscita e accesso negato.</span><span class="sxs-lookup"><span data-stu-id="ab742-192">Display a generic error message after failed authentication and access denied occurs</span></span></li></ul><p><span data-ttu-id="ab742-193">Verificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="ab742-193">Test for:</span></span></p><ul><li><span data-ttu-id="ab742-194">Protezione delle risorse con privilegi dopo accessi non riusciti.</span><span class="sxs-lookup"><span data-stu-id="ab742-194">Protection of privileged resources after failed logins</span></span></li><li><span data-ttu-id="ab742-195">Visualizzazione di un messaggio di errore generico in caso di autenticazione non riuscita e accesso negato.</span><span class="sxs-lookup"><span data-stu-id="ab742-195">A generic error message is displayed on failed authentication and access denied event(s)</span></span></li><li><span data-ttu-id="ab742-196">Disabilitazione degli account dopo un numero eccessivo di tentativi non riusciti.</span><span class="sxs-lookup"><span data-stu-id="ab742-196">Accounts are disabled after an excessive number of failed attempts</span></span></li><ul>|

## <span data-ttu-id="ab742-197"><a id="step-up-adaptive-authn"></a>Abilitare l'autenticazione adattiva o incrementale</span><span class="sxs-lookup"><span data-stu-id="ab742-197"><a id="step-up-adaptive-authn"></a>Enable step up or adaptive authentication</span></span>

| <span data-ttu-id="ab742-198">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-198">Title</span></span>                   | <span data-ttu-id="ab742-199">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-199">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-200">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-200">**Component**</span></span>               | <span data-ttu-id="ab742-201">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-201">Web Application</span></span> | 
| <span data-ttu-id="ab742-202">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-202">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-203">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-203">Build</span></span> |  
| <span data-ttu-id="ab742-204">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-204">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-205">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-205">Generic</span></span> |
| <span data-ttu-id="ab742-206">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-206">**Attributes**</span></span>              | <span data-ttu-id="ab742-207">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-207">N/A</span></span>  |
| <span data-ttu-id="ab742-208">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-208">**References**</span></span>              | <span data-ttu-id="ab742-209">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-209">N/A</span></span>  |
| <span data-ttu-id="ab742-210">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-210">Details</span></span> | <p><span data-ttu-id="ab742-211">Verificare che l'applicazione abbia un passaggio di autorizzazione aggiuntivo, ad esempio con un'autenticazione adattiva o incrementale, tramite l'autenticazione a più fattori come l'invio di OTP in SMS, messaggi di posta elettronica e così via o con una richiesta di riautenticazione, in modo da coinvolgere l'utente prima di concedere l'accesso a informazioni riservate.</span><span class="sxs-lookup"><span data-stu-id="ab742-211">Verify the application has additional authorization (such as step up or adaptive authentication, via multi-factor authentication such as sending OTP in SMS, email etc. or prompting for re-authentication) so the user is challenged before being granted access to sensitive information.</span></span> <span data-ttu-id="ab742-212">Questa regola si applica anche alle modifiche importanti a un account o un'azione.</span><span class="sxs-lookup"><span data-stu-id="ab742-212">This rule also applies for making critical changes to an account or action</span></span></p><p><span data-ttu-id="ab742-213">Ciò significa che l'adattamento dell'autenticazione deve essere implementato in modo che venga applicata correttamente l'autorizzazione sensibile al contesto per impedire la manipolazione non autorizzata, ad esempio tramite la manomissione dei parametri.</span><span class="sxs-lookup"><span data-stu-id="ab742-213">This also means that the adaptation of authentication has to be implemented in such a manner that the application correctly enforces context-sensitive authorization so as to not allow unauthorized manipulation by means of in example, parameter tampering</span></span></p>|

## <span data-ttu-id="ab742-214"><a id="admin-interface-lockdown"></a>Assicurarsi che le interfacce amministrative siano bloccate correttamente</span><span class="sxs-lookup"><span data-stu-id="ab742-214"><a id="admin-interface-lockdown"></a>Ensure that administrative interfaces are appropriately locked down</span></span>

| <span data-ttu-id="ab742-215">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-215">Title</span></span>                   | <span data-ttu-id="ab742-216">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-216">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-217">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-217">**Component**</span></span>               | <span data-ttu-id="ab742-218">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-218">Web Application</span></span> | 
| <span data-ttu-id="ab742-219">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-219">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-220">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-220">Build</span></span> |  
| <span data-ttu-id="ab742-221">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-221">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-222">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-222">Generic</span></span> |
| <span data-ttu-id="ab742-223">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-223">**Attributes**</span></span>              | <span data-ttu-id="ab742-224">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-224">N/A</span></span>  |
| <span data-ttu-id="ab742-225">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-225">**References**</span></span>              | <span data-ttu-id="ab742-226">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-226">N/A</span></span>  |
| <span data-ttu-id="ab742-227">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-227">Details</span></span> | <span data-ttu-id="ab742-228">La prima soluzione consiste nel concedere l'accesso all'interfaccia amministrativa solo da un determinato intervallo IP di origine.</span><span class="sxs-lookup"><span data-stu-id="ab742-228">The first solution is to grant access only from a certain source IP range to the administrative interface.</span></span> <span data-ttu-id="ab742-229">Se tale soluzione non è applicabile, è sempre consigliabile adottare un'autenticazione adattiva o incrementale per l'accesso all'interfaccia di amministrazione.</span><span class="sxs-lookup"><span data-stu-id="ab742-229">If that solution would not be possible than it is always recommended to enforce a step-up or adaptive authentication for logging in into the administrative interface</span></span> |

## <span data-ttu-id="ab742-230"><a id="forgot-pword-fxn"></a>Implementare in modo sicuro funzionalità per la password dimenticata</span><span class="sxs-lookup"><span data-stu-id="ab742-230"><a id="forgot-pword-fxn"></a>Implement forgot password functionalities securely</span></span>

| <span data-ttu-id="ab742-231">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-231">Title</span></span>                   | <span data-ttu-id="ab742-232">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-232">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-233">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-233">**Component**</span></span>               | <span data-ttu-id="ab742-234">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-234">Web Application</span></span> | 
| <span data-ttu-id="ab742-235">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-235">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-236">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-236">Build</span></span> |  
| <span data-ttu-id="ab742-237">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-237">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-238">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-238">Generic</span></span> |
| <span data-ttu-id="ab742-239">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-239">**Attributes**</span></span>              | <span data-ttu-id="ab742-240">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-240">N/A</span></span>  |
| <span data-ttu-id="ab742-241">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-241">**References**</span></span>              | <span data-ttu-id="ab742-242">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-242">N/A</span></span>  |
| <span data-ttu-id="ab742-243">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-243">Details</span></span> | <p><span data-ttu-id="ab742-244">Verificare prima di tutto che la funzionalità Password dimenticata e altri percorsi di recupero inviino un collegamento con un token di attivazione di durata limitata, anziché la password stessa.</span><span class="sxs-lookup"><span data-stu-id="ab742-244">The first thing is to verify that forgot password and other recovery paths send a link including a time-limited activation token rather than the password itself.</span></span> <span data-ttu-id="ab742-245">Potrebbe essere necessaria una ulteriore autenticazione basata su token software, come token SMS, applicazioni mobili native e così via, prima dell'invio del collegamento.</span><span class="sxs-lookup"><span data-stu-id="ab742-245">Additional authentication based on soft-tokens (e.g. SMS token, native mobile applications, etc.) can be required as well before the link is sent over.</span></span> <span data-ttu-id="ab742-246">Evitare quindi di bloccare l'account utente durante il processo di recupero di una nuova password.</span><span class="sxs-lookup"><span data-stu-id="ab742-246">Second, you should not lock out the users account whilst the process of getting a new password is in progress.</span></span></p><p><span data-ttu-id="ab742-247">Questo potrebbe causare un attacco Denial of Service ogni volta che un utente malintenzionato decide di bloccare intenzionalmente gli utenti con un attacco automatizzato.</span><span class="sxs-lookup"><span data-stu-id="ab742-247">This could lead to a Denial of service attack whenever an attacker decides to intentionally lock out the users with an automated attack.</span></span> <span data-ttu-id="ab742-248">Ogni volta che viene avviata la richiesta di una nuova password, il messaggio visualizzato deve essere generalizzato per impedire l'enumerazione del nome utente.</span><span class="sxs-lookup"><span data-stu-id="ab742-248">Third, whenever the new password request was set in progress, the message you display should be generalized in order to prevent username enumeration.</span></span> <span data-ttu-id="ab742-249">Infine, occorre sempre impedire l'uso di password precedenti e implementare criteri di password complessi.</span><span class="sxs-lookup"><span data-stu-id="ab742-249">Fourth, always disallow the use of old passwords and implement a strong password policy.</span></span></p> |

## <span data-ttu-id="ab742-250"><a id="pword-account-policy"></a>Assicurarsi che vengano implementati criteri di account e password</span><span class="sxs-lookup"><span data-stu-id="ab742-250"><a id="pword-account-policy"></a>Ensure that password and account policy are implemented</span></span>

| <span data-ttu-id="ab742-251">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-251">Title</span></span>                   | <span data-ttu-id="ab742-252">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-252">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-253">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-253">**Component**</span></span>               | <span data-ttu-id="ab742-254">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-254">Web Application</span></span> | 
| <span data-ttu-id="ab742-255">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-255">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-256">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-256">Build</span></span> |  
| <span data-ttu-id="ab742-257">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-257">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-258">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-258">Generic</span></span> |
| <span data-ttu-id="ab742-259">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-259">**Attributes**</span></span>              | <span data-ttu-id="ab742-260">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-260">N/A</span></span>  |
| <span data-ttu-id="ab742-261">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-261">**References**</span></span>              | <span data-ttu-id="ab742-262">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-262">N/A</span></span>  |
| <span data-ttu-id="ab742-263">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-263">Details</span></span> | <p><span data-ttu-id="ab742-264">È necessario implementare criteri di account e password in conformità con i criteri e le procedure consigliate dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="ab742-264">Password and account policy in compliance with organizational policy and best practices should be implemented.</span></span></p><p><span data-ttu-id="ab742-265">Per proteggersi da attacchi di forza bruta e attacchi a dizionario è necessario implementare criteri per password complesse, per fare in modo che gli utenti creino password complesse, ad esempio con una lunghezza minima di 12 caratteri o con caratteri speciali e alfanumerici.</span><span class="sxs-lookup"><span data-stu-id="ab742-265">To defend against brute-force and dictionary based guessing: Strong password policy must be implemented to ensure that users create complex password (e.g., 12 characters minimum length, alphanumeric and special characters).</span></span></p><p><span data-ttu-id="ab742-266">È anche possibile implementare i criteri di blocco account illustrati di seguito:</span><span class="sxs-lookup"><span data-stu-id="ab742-266">Account lockout policies may be implemented in the following manner:</span></span></p><ul><li><span data-ttu-id="ab742-267">**Blocco temporaneo:** questo tipo di blocco è utile per proteggere gli utenti da attacchi di forza bruta.</span><span class="sxs-lookup"><span data-stu-id="ab742-267">**Soft lock-out:** This can be a good option for protecting your users against brute force attacks.</span></span> <span data-ttu-id="ab742-268">Ad esempio, quando l'utente immette una password errata per tre volte l'applicazione può bloccare l'account per un minuto. Questo rallenta l'attacco di forza bruta alla password e scoraggia l'utente malintenzionato dal continuare.</span><span class="sxs-lookup"><span data-stu-id="ab742-268">For example, whenever the user enters a wrong password three times the application could lock down the account for a minute in order to slow down the process of brute forcing his password making it less profitable for the attacker to proceed.</span></span> <span data-ttu-id="ab742-269">Se si dovessero implementare contromisure di blocco permanente, in questo esempio si otterrebbe un Denial of Service tramite il blocco permanente degli account.</span><span class="sxs-lookup"><span data-stu-id="ab742-269">If u were to implement hard lock-out countermeasures for this example you would achieve a "Dos" by permanently locking out accounts.</span></span> <span data-ttu-id="ab742-270">In alternativa, l'applicazione può generare una password monouso (OTP) e inviarla fuori banda all'utente, ad esempio tramite posta elettronica, SMS e così via.</span><span class="sxs-lookup"><span data-stu-id="ab742-270">Alternatively, application may generate an OTP (One Time Password) and send it out-of-band (through email, sms etc.) to the user.</span></span> <span data-ttu-id="ab742-271">Un altro approccio consiste nell'implementare CAPTCHA quando viene raggiunto un numero limite di tentativi non riusciti.</span><span class="sxs-lookup"><span data-stu-id="ab742-271">Another approach may be to implement CAPTCHA after a threshold number of failed attempts is reached.</span></span></li><li><span data-ttu-id="ab742-272">**Blocco permanente:** questo tipo di blocco deve essere applicato quando si rileva un attacco a un'applicazione da parte di un utente. Per contrastarlo, l'account dell'utente viene bloccato in modo permanente fino al termine delle analisi del team di risposta.</span><span class="sxs-lookup"><span data-stu-id="ab742-272">**Hard lock-out:** This type of lockout should be applied whenever you detect a user attacking your application and counter him by means of permanently locking out his account until a response team had time to do their forensics.</span></span> <span data-ttu-id="ab742-273">Dopo tale processo si può decidere se restituire l'account all'utente o intraprendere eventuali azioni legali.</span><span class="sxs-lookup"><span data-stu-id="ab742-273">After this process you can decide to give the user back his account or take further legal actions against him.</span></span> <span data-ttu-id="ab742-274">Questo tipo di approccio impedisce all'autore dell'attacco di penetrare ulteriormente nell'applicazione e nell'infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="ab742-274">This type of approach prevents the attacker from further penetrating your application and infrastructure.</span></span></li></ul><p><span data-ttu-id="ab742-275">Per difendersi da attacchi ad account prevedibili e predefiniti, verificare che tutte le chiavi e le password siano sostituibili e che vengano generate o sostituite dopo la fase di installazione.</span><span class="sxs-lookup"><span data-stu-id="ab742-275">To defend against attacks on default and predictable accounts, verify that all keys and passwords are replaceable, and are generated or replaced after installation time.</span></span></p><p><span data-ttu-id="ab742-276">Se l'applicazione deve generare automaticamente le password, assicurarsi che le password generate siano casuali e abbiano un'entropia elevata.</span><span class="sxs-lookup"><span data-stu-id="ab742-276">If the application has to auto-generate passwords, ensure that the generated passwords are random and have high entropy.</span></span></p>|

## <span data-ttu-id="ab742-277"><a id="controls-username-enum"></a>Implementare controlli per prevenire l'enumerazione del nome utente</span><span class="sxs-lookup"><span data-stu-id="ab742-277"><a id="controls-username-enum"></a>Implement controls to prevent username enumeration</span></span>

| <span data-ttu-id="ab742-278">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-278">Title</span></span>                   | <span data-ttu-id="ab742-279">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-279">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-280">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-280">**Component**</span></span>               | <span data-ttu-id="ab742-281">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-281">Web Application</span></span> | 
| <span data-ttu-id="ab742-282">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-282">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-283">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-283">Build</span></span> |  
| <span data-ttu-id="ab742-284">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-284">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-285">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-285">Generic</span></span> |
| <span data-ttu-id="ab742-286">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-286">**Attributes**</span></span>              | <span data-ttu-id="ab742-287">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-287">N/A</span></span>  |
| <span data-ttu-id="ab742-288">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-288">**References**</span></span>              | <span data-ttu-id="ab742-289">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-289">N/A</span></span>  |
| <span data-ttu-id="ab742-290">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-290">**Steps**</span></span> | <span data-ttu-id="ab742-291">È necessario generalizzare i messaggi di errore per prevenire l'enumerazione del nome utente.</span><span class="sxs-lookup"><span data-stu-id="ab742-291">All error messages should be generalized in order to prevent username enumeration.</span></span> <span data-ttu-id="ab742-292">A volte non è possibile evitare la divulgazione di informazioni nelle funzionalità, ad esempio in una pagina di registrazione.</span><span class="sxs-lookup"><span data-stu-id="ab742-292">Also sometimes you cannot avoid information leaking in functionalities such as a registration page.</span></span> <span data-ttu-id="ab742-293">In tal caso è necessario usare metodi di limitazione della frequenza, ad esempio i CAPTCHA, per prevenite attacchi automatizzati da parte di utenti malintenzionati.</span><span class="sxs-lookup"><span data-stu-id="ab742-293">Here you need to use rate-limiting methods like CAPTCHA to prevent an automated attack by an attacker.</span></span> |

## <span data-ttu-id="ab742-294"><a id="win-authn-sql"></a>Usare l'autenticazione di Windows per la connessione a SQL Server, se possibile</span><span class="sxs-lookup"><span data-stu-id="ab742-294"><a id="win-authn-sql"></a>When possible, use Windows Authentication for connecting to SQL Server</span></span>

| <span data-ttu-id="ab742-295">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-295">Title</span></span>                   | <span data-ttu-id="ab742-296">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-296">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-297">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-297">**Component**</span></span>               | <span data-ttu-id="ab742-298">Database</span><span class="sxs-lookup"><span data-stu-id="ab742-298">Database</span></span> | 
| <span data-ttu-id="ab742-299">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-299">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-300">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-300">Build</span></span> |  
| <span data-ttu-id="ab742-301">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-301">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-302">Locale</span><span class="sxs-lookup"><span data-stu-id="ab742-302">OnPrem</span></span> |
| <span data-ttu-id="ab742-303">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-303">**Attributes**</span></span>              | <span data-ttu-id="ab742-304">Versione SQL: tutte</span><span class="sxs-lookup"><span data-stu-id="ab742-304">SQL Version - All</span></span> |
| <span data-ttu-id="ab742-305">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-305">**References**</span></span>              | [<span data-ttu-id="ab742-306">SQL Server: scegliere una modalità di autenticazione</span><span class="sxs-lookup"><span data-stu-id="ab742-306">SQL Server - Choose an Authentication Mode</span></span>](https://msdn.microsoft.com/library/ms144284.aspx) |
| <span data-ttu-id="ab742-307">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-307">**Steps**</span></span> | <span data-ttu-id="ab742-308">L'autenticazione di Windows usa il protocollo di sicurezza Kerberos, consente l'applicazione dei criteri password per la convalida della complessità delle password e supporta il blocco account e la scadenza delle password.</span><span class="sxs-lookup"><span data-stu-id="ab742-308">Windows Authentication uses Kerberos security protocol, provides password policy enforcement with regard to complexity validation for strong passwords, provides support for account lockout, and supports password expiration.</span></span>|

## <span data-ttu-id="ab742-309"><a id="aad-authn-sql"></a>Usare l'autenticazione di Azure Active Directory per la connessione al database SQL, se possibile</span><span class="sxs-lookup"><span data-stu-id="ab742-309"><a id="aad-authn-sql"></a>When possible use Azure Active Directory Authentication for Connecting to SQL Database</span></span>

| <span data-ttu-id="ab742-310">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-310">Title</span></span>                   | <span data-ttu-id="ab742-311">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-311">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-312">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-312">**Component**</span></span>               | <span data-ttu-id="ab742-313">Database</span><span class="sxs-lookup"><span data-stu-id="ab742-313">Database</span></span> | 
| <span data-ttu-id="ab742-314">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-314">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-315">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-315">Build</span></span> |  
| <span data-ttu-id="ab742-316">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-316">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-317">SQL Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-317">SQL Azure</span></span> |
| <span data-ttu-id="ab742-318">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-318">**Attributes**</span></span>              | <span data-ttu-id="ab742-319">Versione SQL: 12</span><span class="sxs-lookup"><span data-stu-id="ab742-319">SQL Version - V12</span></span> |
| <span data-ttu-id="ab742-320">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-320">**References**</span></span>              | [<span data-ttu-id="ab742-321">Connettersi al Database SQL utilizzando l’autenticazione di Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="ab742-321">Connecting to SQL Database By Using Azure Active Directory Authentication</span></span>](https://azure.microsoft.com/documentation/articles/sql-database-aad-authentication/) |
| <span data-ttu-id="ab742-322">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-322">**Steps**</span></span> | <span data-ttu-id="ab742-323">**Versione minima:** è necessario usare la versione 12 per consentire al database SQL di Azure di usare l'autenticazione di AAD nella directory Microsoft.</span><span class="sxs-lookup"><span data-stu-id="ab742-323">**Minimum version:** Azure SQL Database V12 required to allow Azure SQL Database to use AAD Authentication against the Microsoft Directory</span></span> |

## <span data-ttu-id="ab742-324"><a id="authn-account-pword"></a>Assicurarsi che vengano applicati i criteri di account e password in SQL Server quando viene usata la modalità di autenticazione SQL</span><span class="sxs-lookup"><span data-stu-id="ab742-324"><a id="authn-account-pword"></a>When SQL authentication mode is used, ensure that account and password policy are enforced on SQL server</span></span>

| <span data-ttu-id="ab742-325">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-325">Title</span></span>                   | <span data-ttu-id="ab742-326">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-326">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-327">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-327">**Component**</span></span>               | <span data-ttu-id="ab742-328">Database</span><span class="sxs-lookup"><span data-stu-id="ab742-328">Database</span></span> | 
| <span data-ttu-id="ab742-329">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-329">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-330">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-330">Build</span></span> |  
| <span data-ttu-id="ab742-331">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-331">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-332">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-332">Generic</span></span> |
| <span data-ttu-id="ab742-333">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-333">**Attributes**</span></span>              | <span data-ttu-id="ab742-334">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-334">N/A</span></span>  |
| <span data-ttu-id="ab742-335">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-335">**References**</span></span>              | <span data-ttu-id="ab742-336">[Criteri password di SQL Server](https://technet.microsoft.com/library/ms161959(v=sql.110).aspx)</span><span class="sxs-lookup"><span data-stu-id="ab742-336">[SQL Server password policy](https://technet.microsoft.com/library/ms161959(v=sql.110).aspx)</span></span> |
| <span data-ttu-id="ab742-337">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-337">**Steps**</span></span> | <span data-ttu-id="ab742-338">Quando si usa l'autenticazione di SQL Server, in SQL Server vengono creati account di accesso che non sono basati su account utente di Windows.</span><span class="sxs-lookup"><span data-stu-id="ab742-338">When using SQL Server Authentication, logins are created in SQL Server that are not based on Windows user accounts.</span></span> <span data-ttu-id="ab742-339">Sia il nome utente che la password vengono creati mediante SQL Server e archiviati in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ab742-339">Both the user name and the password are created by using SQL Server and stored in SQL Server.</span></span> <span data-ttu-id="ab742-340">SQL Server può fare uso di meccanismi dei criteri password di Windows.</span><span class="sxs-lookup"><span data-stu-id="ab742-340">SQL Server can use Windows password policy mechanisms.</span></span> <span data-ttu-id="ab742-341">Può applicare la stessa complessità e i criteri di scadenza di Windows alle password usate all'interno di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="ab742-341">It can apply the same complexity and expiration policies used in Windows to passwords used inside SQL Server.</span></span> |

## <span data-ttu-id="ab742-342"><a id="autn-contained-db"></a>Non usare l'autenticazione SQL in database indipendenti</span><span class="sxs-lookup"><span data-stu-id="ab742-342"><a id="autn-contained-db"></a>Do not use SQL Authentication in contained databases</span></span>

| <span data-ttu-id="ab742-343">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-343">Title</span></span>                   | <span data-ttu-id="ab742-344">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-344">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-345">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-345">**Component**</span></span>               | <span data-ttu-id="ab742-346">Database</span><span class="sxs-lookup"><span data-stu-id="ab742-346">Database</span></span> | 
| <span data-ttu-id="ab742-347">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-347">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-348">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-348">Build</span></span> |  
| <span data-ttu-id="ab742-349">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-349">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-350">Locale, SQL Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-350">OnPrem, SQL Azure</span></span> |
| <span data-ttu-id="ab742-351">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-351">**Attributes**</span></span>              | <span data-ttu-id="ab742-352">Versione SQL: MSSQL2012, versione SQL: 12</span><span class="sxs-lookup"><span data-stu-id="ab742-352">SQL Version - MSSQL2012, SQL Version - V12</span></span> |
| <span data-ttu-id="ab742-353">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-353">**References**</span></span>              | [<span data-ttu-id="ab742-354">Procedure di sicurezza consigliate con i database indipendenti</span><span class="sxs-lookup"><span data-stu-id="ab742-354">Security Best Practices with Contained Databases</span></span>](http://msdn.microsoft.com/library/ff929055.aspx) |
| <span data-ttu-id="ab742-355">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-355">**Steps**</span></span> | <span data-ttu-id="ab742-356">L'assenza di criteri password applicati può aumentare la probabilità che vengano stabilite credenziali deboli in un database indipendente.</span><span class="sxs-lookup"><span data-stu-id="ab742-356">The absence of an enforced password policy may increase the likelihood of a weak credential being established in a contained database.</span></span> <span data-ttu-id="ab742-357">Fare uso dell'autenticazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="ab742-357">Leverage Windows Authentication.</span></span> |

## <span data-ttu-id="ab742-358"><a id="authn-sas-tokens"></a>Usare credenziali di autenticazione per dispositivo con i token di firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="ab742-358"><a id="authn-sas-tokens"></a>Use per device authentication credentials using SaS tokens</span></span>

| <span data-ttu-id="ab742-359">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-359">Title</span></span>                   | <span data-ttu-id="ab742-360">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-360">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-361">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-361">**Component**</span></span>               | <span data-ttu-id="ab742-362">Hub eventi di Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-362">Azure Event Hub</span></span> | 
| <span data-ttu-id="ab742-363">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-363">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-364">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-364">Build</span></span> |  
| <span data-ttu-id="ab742-365">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-365">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-366">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-366">Generic</span></span> |
| <span data-ttu-id="ab742-367">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-367">**Attributes**</span></span>              | <span data-ttu-id="ab742-368">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-368">N/A</span></span>  |
| <span data-ttu-id="ab742-369">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-369">**References**</span></span>              | [<span data-ttu-id="ab742-370">Panoramica del modello di sicurezza e autenticazione di Hub eventi</span><span class="sxs-lookup"><span data-stu-id="ab742-370">Event Hubs authentication and security model overview</span></span>](https://azure.microsoft.com/documentation/articles/event-hubs-authentication-and-security-model-overview/) |
| <span data-ttu-id="ab742-371">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-371">**Steps**</span></span> | <p><span data-ttu-id="ab742-372">Il modello di sicurezza di Hub eventi si basa su una combinazione di token di firma di accesso condiviso e autori di eventi.</span><span class="sxs-lookup"><span data-stu-id="ab742-372">The Event Hubs security model is based on a combination of Shared Access Signature (SAS) tokens and event publishers.</span></span> <span data-ttu-id="ab742-373">Il nome dell'autore rappresenta l'ID dispositivo che riceve il token.</span><span class="sxs-lookup"><span data-stu-id="ab742-373">The publisher name represents the DeviceID that receives the token.</span></span> <span data-ttu-id="ab742-374">Questo permette di associare i token generati con i rispettivi dispositivi.</span><span class="sxs-lookup"><span data-stu-id="ab742-374">This would help associate the tokens generated with the respective devices.</span></span></p><p><span data-ttu-id="ab742-375">Tutti i messaggi vengono contrassegnati con l'iniziatore sul lato del servizio, per consentire il rilevamento di tentativi di spoofing dell'origine nel payload.</span><span class="sxs-lookup"><span data-stu-id="ab742-375">All messages are tagged with originator on service side allowing detection of in-payload origin spoofing attempts.</span></span> <span data-ttu-id="ab742-376">Durante l'autenticazione dei dispositivi, generare un token di firma di accesso condiviso per dispositivo con ambito limitato a un autore univoco.</span><span class="sxs-lookup"><span data-stu-id="ab742-376">When authenticating devices, generate a per device SaS token scoped to a unique publisher.</span></span></p>|

## <span data-ttu-id="ab742-377"><a id="multi-factor-azure-admin"></a>Abilitare Azure Multi-Factor Authentication per amministratori di Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-377"><a id="multi-factor-azure-admin"></a>Enable Azure Multi-Factor Authentication for Azure Administrators</span></span>

| <span data-ttu-id="ab742-378">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-378">Title</span></span>                   | <span data-ttu-id="ab742-379">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-379">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-380">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-380">**Component**</span></span>               | <span data-ttu-id="ab742-381">Limite di trust di Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-381">Azure Trust Boundary</span></span> | 
| <span data-ttu-id="ab742-382">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-382">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-383">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="ab742-383">Deployment</span></span> |  
| <span data-ttu-id="ab742-384">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-384">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-385">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-385">Generic</span></span> |
| <span data-ttu-id="ab742-386">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-386">**Attributes**</span></span>              | <span data-ttu-id="ab742-387">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-387">N/A</span></span>  |
| <span data-ttu-id="ab742-388">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-388">**References**</span></span>              | [<span data-ttu-id="ab742-389">Informazioni su Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="ab742-389">What is Azure Multi-Factor Authentication?</span></span>](https://azure.microsoft.com/documentation/articles/multi-factor-authentication/) |
| <span data-ttu-id="ab742-390">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-390">**Steps**</span></span> | <p><span data-ttu-id="ab742-391">Multi-Factor Authentication (MFA) è un metodo di autenticazione che richiede più di un metodo di verifica e con il quale viene aggiunto un secondo livello di sicurezza critico agli accessi e alle transazioni degli utenti.</span><span class="sxs-lookup"><span data-stu-id="ab742-391">Multi-factor authentication (MFA) is a method of authentication that requires more than one verification method and adds a critical second layer of security to user sign-ins and transactions.</span></span> <span data-ttu-id="ab742-392">In genere richiede due o più dei metodi di verifica seguenti:</span><span class="sxs-lookup"><span data-stu-id="ab742-392">It works by requiring any two or more of the following verification methods:</span></span></p><ul><li><span data-ttu-id="ab742-393">Un'informazione nota (in genere una password)</span><span class="sxs-lookup"><span data-stu-id="ab742-393">Something you know (typically a password)</span></span></li><li><span data-ttu-id="ab742-394">Un oggetto che si possiede (un dispositivo attendibile non facile da duplicare, ad esempio un telefono)</span><span class="sxs-lookup"><span data-stu-id="ab742-394">Something you have (a trusted device that is not easily duplicated, like a phone)</span></span></li><li><span data-ttu-id="ab742-395">Una caratteristica fisica dell'utente (biometrica)</span><span class="sxs-lookup"><span data-stu-id="ab742-395">Something you are (biometrics)</span></span></li><ul>|

## <span data-ttu-id="ab742-396"><a id="anon-access-cluster"></a>Limitare l'accesso anonimo a un cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-396"><a id="anon-access-cluster"></a>Restrict anonymous access to Service Fabric Cluster</span></span>

| <span data-ttu-id="ab742-397">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-397">Title</span></span>                   | <span data-ttu-id="ab742-398">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-398">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-399">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-399">**Component**</span></span>               | <span data-ttu-id="ab742-400">Limite di trust di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-400">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="ab742-401">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-401">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-402">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="ab742-402">Deployment</span></span> |  
| <span data-ttu-id="ab742-403">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-403">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-404">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-404">Generic</span></span> |
| <span data-ttu-id="ab742-405">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-405">**Attributes**</span></span>              | <span data-ttu-id="ab742-406">Ambiente: Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-406">Environment - Azure</span></span>  |
| <span data-ttu-id="ab742-407">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-407">**References**</span></span>              | [<span data-ttu-id="ab742-408">Scenari di sicurezza di un cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-408">Service Fabric cluster security scenarios</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security) |
| <span data-ttu-id="ab742-409">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-409">**Steps**</span></span> | <p><span data-ttu-id="ab742-410">Per impedire a utenti non autorizzati di connettersi al cluster, è necessario proteggerlo, in particolare quando sono in esecuzione carichi di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="ab742-410">Clusters should always be secured to prevent unauthorized users from connecting to your cluster, especially when it has production workloads running on it.</span></span></p><p><span data-ttu-id="ab742-411">Durante la creazione di un cluster di Service Fabric, assicurarsi che la modalità di sicurezza sia impostata su "secure" e configurare il certificato server X.509 necessario.</span><span class="sxs-lookup"><span data-stu-id="ab742-411">While creating a service fabric cluster, ensure that the security mode is set to "secure" and configure the required X.509 server certificate.</span></span> <span data-ttu-id="ab742-412">La creazione di un cluster "insecure" permette a qualsiasi utente anonimo di connettersi al cluster, se questo espone gli endpoint di gestione a Internet pubblico.</span><span class="sxs-lookup"><span data-stu-id="ab742-412">Creating an "insecure" cluster will allow any anonymous user to connect to it if it exposes management endpoints to the public Internet.</span></span></p>|

## <span data-ttu-id="ab742-413"><a id="fabric-cn-nn"></a>Assicurarsi che il certificato da client a nodo di Service Fabric sia diverso dal certificato da nodo a nodo</span><span class="sxs-lookup"><span data-stu-id="ab742-413"><a id="fabric-cn-nn"></a>Ensure that Service Fabric client-to-node certificate is different from node-to-node certificate</span></span>

| <span data-ttu-id="ab742-414">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-414">Title</span></span>                   | <span data-ttu-id="ab742-415">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-415">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-416">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-416">**Component**</span></span>               | <span data-ttu-id="ab742-417">Limite di trust di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-417">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="ab742-418">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-418">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-419">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="ab742-419">Deployment</span></span> |  
| <span data-ttu-id="ab742-420">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-420">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-421">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-421">Generic</span></span> |
| <span data-ttu-id="ab742-422">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-422">**Attributes**</span></span>              | <span data-ttu-id="ab742-423">Ambiente: Azure, ambiente: autonomo</span><span class="sxs-lookup"><span data-stu-id="ab742-423">Environment - Azure, Environment - Stand alone</span></span> |
| <span data-ttu-id="ab742-424">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-424">**References**</span></span>              | <span data-ttu-id="ab742-425">[Sicurezza basata su certificati da client a nodo in Service Fabric](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#_client-to-node-certificate-security), [Connettersi a un cluster sicuro tramite il certificato client](https://azure.microsoft.com/documentation/articles/service-fabric-connect-to-secure-cluster/)</span><span class="sxs-lookup"><span data-stu-id="ab742-425">[Service Fabric Client-to-node certificate security](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#_client-to-node-certificate-security), [Connect to a secure cluster using client certificate](https://azure.microsoft.com/documentation/articles/service-fabric-connect-to-secure-cluster/)</span></span> |
| <span data-ttu-id="ab742-426">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-426">**Steps**</span></span> | <p><span data-ttu-id="ab742-427">La sicurezza basata su certificati da client a nodo viene configurata durante la creazione del cluster tramite il portale di Azure, modelli di Azure Resource Manager o un modello JSON autonomo specificando un certificato client di amministrazione e/o un certificato client di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="ab742-427">Client-to-node certificate security is configured while creating the cluster either through the Azure portal, Resource Manager templates or a standalone JSON template by specifying an admin client certificate and/or a user client certificate.</span></span></p><p><span data-ttu-id="ab742-428">I certificati client di amministrazione e i certificati client utente specificati devono essere diversi dai certificati primario e secondario specificati per la sicurezza da nodo a nodo.</span><span class="sxs-lookup"><span data-stu-id="ab742-428">The admin client and user client certificates you specify should be different than the primary and secondary certificates you specify for Node-to-node security.</span></span></p>|

## <span data-ttu-id="ab742-429"><a id="aad-client-fabric"></a>Usare Azure Active Directory per autenticare client in cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-429"><a id="aad-client-fabric"></a>Use AAD to authenticate clients to service fabric clusters</span></span>

| <span data-ttu-id="ab742-430">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-430">Title</span></span>                   | <span data-ttu-id="ab742-431">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-431">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-432">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-432">**Component**</span></span>               | <span data-ttu-id="ab742-433">Limite di trust di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-433">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="ab742-434">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-434">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-435">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="ab742-435">Deployment</span></span> |  
| <span data-ttu-id="ab742-436">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-436">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-437">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-437">Generic</span></span> |
| <span data-ttu-id="ab742-438">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-438">**Attributes**</span></span>              | <span data-ttu-id="ab742-439">Ambiente: Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-439">Environment - Azure</span></span> |
| <span data-ttu-id="ab742-440">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-440">**References**</span></span>              | [<span data-ttu-id="ab742-441">Scenari di sicurezza per i cluster: raccomandazioni sulla sicurezza</span><span class="sxs-lookup"><span data-stu-id="ab742-441">Cluster security scenarios - Security Recommendations</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#security-recommendations) |
| <span data-ttu-id="ab742-442">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-442">**Steps**</span></span> | <span data-ttu-id="ab742-443">I cluster in esecuzione in Azure possono anche proteggere l'accesso agli endpoint di gestione usando Azure Active Directory (AAD), oltre ai certificati client.</span><span class="sxs-lookup"><span data-stu-id="ab742-443">Clusters running on Azure can also secure access to the management endpoints using Azure Active Directory (AAD), apart from client certificates.</span></span> <span data-ttu-id="ab742-444">Per i cluster di Azure è consigliabile usare la sicurezza di AAD per l'autenticazione dei client e dei certificati per la sicurezza da nodo a nodo.</span><span class="sxs-lookup"><span data-stu-id="ab742-444">For Azure clusters, it is recommended that you use AAD security to authenticate clients and certificates for node-to-node security.</span></span>|

## <span data-ttu-id="ab742-445"><a id="fabric-cert-ca"></a>Assicurarsi che i certificati di Service Fabric vengano ottenuti da un'Autorità di certificazione (CA) approvata</span><span class="sxs-lookup"><span data-stu-id="ab742-445"><a id="fabric-cert-ca"></a>Ensure that service fabric certificates are obtained from an approved Certificate Authority (CA)</span></span>

| <span data-ttu-id="ab742-446">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-446">Title</span></span>                   | <span data-ttu-id="ab742-447">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-447">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-448">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-448">**Component**</span></span>               | <span data-ttu-id="ab742-449">Limite di trust di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-449">Service Fabric Trust Boundary</span></span> | 
| <span data-ttu-id="ab742-450">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-450">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-451">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="ab742-451">Deployment</span></span> |  
| <span data-ttu-id="ab742-452">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-452">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-453">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-453">Generic</span></span> |
| <span data-ttu-id="ab742-454">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-454">**Attributes**</span></span>              | <span data-ttu-id="ab742-455">Ambiente: Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-455">Environment - Azure</span></span> |
| <span data-ttu-id="ab742-456">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-456">**References**</span></span>              | [<span data-ttu-id="ab742-457">Certificati X.509 e Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab742-457">X.509 certificates and Service Fabric</span></span>](https://azure.microsoft.com/documentation/articles/service-fabric-cluster-security/#x509-certificates-and-service-fabric) |
| <span data-ttu-id="ab742-458">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-458">**Steps**</span></span> | <p><span data-ttu-id="ab742-459">Service Fabric usa i certificati server X.509 per l'autenticazione dei nodi e dei client.</span><span class="sxs-lookup"><span data-stu-id="ab742-459">Service Fabric uses X.509 server certificates for authenticating nodes and clients.</span></span></p><p><span data-ttu-id="ab742-460">Aspetti importanti da considerare nell'uso dei certificati in Service Fabric:</span><span class="sxs-lookup"><span data-stu-id="ab742-460">Some important things to consider while using certificates in service fabrics:</span></span></p><ul><li><span data-ttu-id="ab742-461">È consigliabile creare i certificati usati nei cluster che eseguono carichi di lavoro di produzione con un servizio certificati di Windows Server configurato correttamente oppure ottenerli da un'Autorità di certificazione (CA) approvata.</span><span class="sxs-lookup"><span data-stu-id="ab742-461">Certificates used in clusters running production workloads should be created by using a correctly configured Windows Server certificate service or obtained from an approved Certificate Authority (CA).</span></span> <span data-ttu-id="ab742-462">L'Autorità di certificazione può essere una CA esterna approvata o un'infrastruttura a chiave pubblica (PKI) a gestione interna.</span><span class="sxs-lookup"><span data-stu-id="ab742-462">The CA can be an approved external CA or a properly managed internal Public Key Infrastructure (PKI)</span></span></li><li><span data-ttu-id="ab742-463">Non usare mai in fase di produzione certificati temporanei o di test creati con strumenti come MakeCert.exe.</span><span class="sxs-lookup"><span data-stu-id="ab742-463">Never use any temporary or test certificates in production that are created with tools such as MakeCert.exe</span></span></li><li><span data-ttu-id="ab742-464">È possibile usare un certificato autofirmato, ma solo per i cluster di test e non nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="ab742-464">You can use a self-signed certificate, but should only do so for test clusters and not in production</span></span></li></ul>|

## <span data-ttu-id="ab742-465"><a id="standard-authn-id"></a>Usare scenari di autenticazione standard supportati da Identity Server</span><span class="sxs-lookup"><span data-stu-id="ab742-465"><a id="standard-authn-id"></a>Use standard authentication scenarios supported by Identity Server</span></span>

| <span data-ttu-id="ab742-466">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-466">Title</span></span>                   | <span data-ttu-id="ab742-467">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-467">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-468">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-468">**Component**</span></span>               | <span data-ttu-id="ab742-469">Identity Server</span><span class="sxs-lookup"><span data-stu-id="ab742-469">Identity Server</span></span> | 
| <span data-ttu-id="ab742-470">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-470">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-471">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-471">Build</span></span> |  
| <span data-ttu-id="ab742-472">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-472">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-473">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-473">Generic</span></span> |
| <span data-ttu-id="ab742-474">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-474">**Attributes**</span></span>              | <span data-ttu-id="ab742-475">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-475">N/A</span></span>  |
| <span data-ttu-id="ab742-476">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-476">**References**</span></span>              | [<span data-ttu-id="ab742-477">IdentityServer3: quadro generale</span><span class="sxs-lookup"><span data-stu-id="ab742-477">IdentityServer3 - The Big Picture</span></span>](https://identityserver.github.io/Documentation/docsv2/overview/bigPicture.html) |
| <span data-ttu-id="ab742-478">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-478">**Steps**</span></span> | <p><span data-ttu-id="ab742-479">Di seguito sono elencate le interazioni tipiche supportate da Identity Server:</span><span class="sxs-lookup"><span data-stu-id="ab742-479">Below are the typical interactions supported by Identity Server:</span></span></p><ul><li><span data-ttu-id="ab742-480">Comunicazione tra browser e applicazioni Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-480">Browsers communicate with web applications</span></span></li><li><span data-ttu-id="ab742-481">Comunicazione tra applicazioni Web e API Web, talvolta in modo autonomo e talvolta per conto dell'utente.</span><span class="sxs-lookup"><span data-stu-id="ab742-481">Web applications communicate with web APIs (sometimes on their own, sometimes on behalf of a user)</span></span></li><li><span data-ttu-id="ab742-482">Comunicazione tra applicazioni basate su browser e API Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-482">Browser-based applications communicate with web APIs</span></span></li><li><span data-ttu-id="ab742-483">Comunicazione tra applicazioni native e API Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-483">Native applications communicate with web APIs</span></span></li><li><span data-ttu-id="ab742-484">Comunicazione tra applicazioni basate su server e API Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-484">Server-based applications communicate with web APIs</span></span></li><li><span data-ttu-id="ab742-485">Comunicazione tra API Web e API Web, talvolta in modo autonomo e talvolta per conto dell'utente.</span><span class="sxs-lookup"><span data-stu-id="ab742-485">Web APIs communicate with web APIs (sometimes on their own, sometimes on behalf of a user)</span></span></li></ul>|

## <span data-ttu-id="ab742-486"><a id="override-token"></a>Sostituire la cache dei token di Identity Server predefinita con un'alternativa scalabile</span><span class="sxs-lookup"><span data-stu-id="ab742-486"><a id="override-token"></a>Override the default Identity Server token cache with a scalable alternative</span></span>

| <span data-ttu-id="ab742-487">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-487">Title</span></span>                   | <span data-ttu-id="ab742-488">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-488">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-489">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-489">**Component**</span></span>               | <span data-ttu-id="ab742-490">Identity Server</span><span class="sxs-lookup"><span data-stu-id="ab742-490">Identity Server</span></span> | 
| <span data-ttu-id="ab742-491">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-491">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-492">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="ab742-492">Deployment</span></span> |  
| <span data-ttu-id="ab742-493">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-493">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-494">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-494">Generic</span></span> |
| <span data-ttu-id="ab742-495">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-495">**Attributes**</span></span>              | <span data-ttu-id="ab742-496">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-496">N/A</span></span>  |
| <span data-ttu-id="ab742-497">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-497">**References**</span></span>              | [<span data-ttu-id="ab742-498">Distribuzione di Identity Server: memorizzazione nella cache</span><span class="sxs-lookup"><span data-stu-id="ab742-498">Identity Server Deployment - Caching</span></span>](https://identityserver.github.io/Documentation/docsv2/advanced/deployment.html) |
| <span data-ttu-id="ab742-499">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-499">**Steps**</span></span> | <p><span data-ttu-id="ab742-500">IdentityServer ha una semplice cache in memoria predefinita.</span><span class="sxs-lookup"><span data-stu-id="ab742-500">IdentityServer has a simple built-in in-memory cache.</span></span> <span data-ttu-id="ab742-501">Tale cache è sufficiente per le applicazioni native su scala ridotta ma, per i motivi elencati di seguito, non può essere ridimensionata per le applicazioni back-end e di livello intermedio:</span><span class="sxs-lookup"><span data-stu-id="ab742-501">While this is good for small scale native apps, it does not scale for mid tier and backend applications for the following reasons:</span></span></p><ul><li><span data-ttu-id="ab742-502">Queste applicazioni sono accessibili da più utenti contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="ab742-502">These applications are accessed by many users at once.</span></span> <span data-ttu-id="ab742-503">Il salvataggio di tutti i token di accesso nello stesso archivio crea problemi di isolamento e presenta difficoltà quando si opera su vasta scala. Un numero elevato di utenti, ognuno con un numero di token pari a quello delle risorse a cui l'app accede per suo conto, può far aumentare notevolmente la quantità e il costo delle operazioni di ricerca.</span><span class="sxs-lookup"><span data-stu-id="ab742-503">Saving all access tokens in the same store creates isolation issues and presents challenges when operating at scale: many users, each with as many tokens as the resources the app accesses on their behalf, can mean huge numbers and very expensive lookup operations</span></span></li><li><span data-ttu-id="ab742-504">Queste applicazioni vengono in genere distribuite in topologie distribuite, in cui più nodi devono avere accesso alla stessa cache.</span><span class="sxs-lookup"><span data-stu-id="ab742-504">These applications are typically deployed on distributed topologies, where multiple nodes must have access to the same cache</span></span></li><li><span data-ttu-id="ab742-505">I token memorizzati nella cache devono resistere in caso di disattivazione e riciclo del processo.</span><span class="sxs-lookup"><span data-stu-id="ab742-505">Cached tokens must survive process recycles and deactivations</span></span></li><li><span data-ttu-id="ab742-506">Per tutte queste ragioni, durante l'implementazione di app Web è consigliabile sostituire la cache dei token di Identity Server predefinita con un'alternativa scalabile, ad esempio Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="ab742-506">For all the above reasons, while implementing web apps, it is recommended to override the default Identity Server's token cache with a scalable alternative such as Azure Redis cache</span></span></li></ul>|

## <span data-ttu-id="ab742-507"><a id="binaries-signed"></a>Assicurarsi che i file binari dell'applicazione distribuita abbiano una firma digitale</span><span class="sxs-lookup"><span data-stu-id="ab742-507"><a id="binaries-signed"></a>Ensure that deployed application's binaries are digitally signed</span></span>

| <span data-ttu-id="ab742-508">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-508">Title</span></span>                   | <span data-ttu-id="ab742-509">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-509">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-510">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-510">**Component**</span></span>               | <span data-ttu-id="ab742-511">Limite di trust dei computer</span><span class="sxs-lookup"><span data-stu-id="ab742-511">Machine Trust Boundary</span></span> | 
| <span data-ttu-id="ab742-512">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-512">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-513">Distribuzione</span><span class="sxs-lookup"><span data-stu-id="ab742-513">Deployment</span></span> |  
| <span data-ttu-id="ab742-514">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-514">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-515">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-515">Generic</span></span> |
| <span data-ttu-id="ab742-516">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-516">**Attributes**</span></span>              | <span data-ttu-id="ab742-517">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-517">N/A</span></span>  |
| <span data-ttu-id="ab742-518">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-518">**References**</span></span>              | <span data-ttu-id="ab742-519">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-519">N/A</span></span>  |
| <span data-ttu-id="ab742-520">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-520">**Steps**</span></span> | <span data-ttu-id="ab742-521">Assicurarsi che i file binari dell'applicazione distribuita abbiano una firma digitale, in modo che sia possibile verificare l'integrità dei file binari.</span><span class="sxs-lookup"><span data-stu-id="ab742-521">Ensure that deployed application's binaries are digitally signed so that the integrity of the binaries can be verified</span></span>|

## <span data-ttu-id="ab742-522"><a id="msmq-queues"></a>Abilitare l'autenticazione nella connessione a code MSMQ in WCF</span><span class="sxs-lookup"><span data-stu-id="ab742-522"><a id="msmq-queues"></a>Enable authentication when connecting to MSMQ queues in WCF</span></span>

| <span data-ttu-id="ab742-523">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-523">Title</span></span>                   | <span data-ttu-id="ab742-524">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-524">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-525">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-525">**Component**</span></span>               | <span data-ttu-id="ab742-526">WCF</span><span class="sxs-lookup"><span data-stu-id="ab742-526">WCF</span></span> | 
| <span data-ttu-id="ab742-527">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-527">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-528">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-528">Build</span></span> |  
| <span data-ttu-id="ab742-529">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-529">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-530">Generico, .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="ab742-530">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="ab742-531">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-531">**Attributes**</span></span>              | <span data-ttu-id="ab742-532">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-532">N/A</span></span> |
| <span data-ttu-id="ab742-533">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-533">**References**</span></span>              | [<span data-ttu-id="ab742-534">MSDN</span><span class="sxs-lookup"><span data-stu-id="ab742-534">MSDN</span></span>](https://msdn.microsoft.com/library/ff648500.aspx) |
| <span data-ttu-id="ab742-535">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-535">**Steps**</span></span> | <span data-ttu-id="ab742-536">Il programma non riesce ad abilitare l'autenticazione quando ci si connette a code MSMQ e un utente malintenzionato può inviare messaggi in modo anonimo alla coda per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="ab742-536">Program fails to enable authentication when connecting to MSMQ queues, an attacker can anonymously submit messages to the queue for processing.</span></span> <span data-ttu-id="ab742-537">Se non si usa l'autenticazione per connettersi a una coda MSMQ usata per recapitare un messaggio a un altro programma, un utente malintenzionato potrebbe inviare un messaggio anonimo dannoso.</span><span class="sxs-lookup"><span data-stu-id="ab742-537">If authentication is not used to connect to an MSMQ queue used to deliver a message to another program, an attacker could submit an anonymous message that is malicious.</span></span>|

### <a name="example"></a><span data-ttu-id="ab742-538">Esempio</span><span class="sxs-lookup"><span data-stu-id="ab742-538">Example</span></span>
<span data-ttu-id="ab742-539">L'elemento `<netMsmqBinding/>` del file di configurazione WCF seguente indica a WCF di disabilitare l'autenticazione quando ci si connette a una coda MSMQ per il recapito di messaggi.</span><span class="sxs-lookup"><span data-stu-id="ab742-539">The `<netMsmqBinding/>` element of the WCF configuration file below instructs WCF to disable authentication when connecting to an MSMQ queue for message delivery.</span></span>
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""None"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```
<span data-ttu-id="ab742-540">Configurare MSMQ perché venga sempre richiesta l'autenticazione del certificato o del dominio di Windows per qualsiasi messaggio in ingresso o in uscita.</span><span class="sxs-lookup"><span data-stu-id="ab742-540">Configure MSMQ to require Windows Domain or Certificate authentication at all times for any incoming or outgoing messages.</span></span>

### <a name="example"></a><span data-ttu-id="ab742-541">Esempio</span><span class="sxs-lookup"><span data-stu-id="ab742-541">Example</span></span>
<span data-ttu-id="ab742-542">L'elemento `<netMsmqBinding/>` del file di configurazione WCF seguente indica a WCF di abilitare l'autenticazione quando ci si connette a una coda MSMQ.</span><span class="sxs-lookup"><span data-stu-id="ab742-542">The `<netMsmqBinding/>` element of the WCF configuration file below instructs WCF to enable certificate authentication when connecting to an MSMQ queue.</span></span> <span data-ttu-id="ab742-543">Il client viene autenticato tramite certificati X.509.</span><span class="sxs-lookup"><span data-stu-id="ab742-543">The client is authenticated using X.509 certificates.</span></span> <span data-ttu-id="ab742-544">Il certificato client deve essere presente nell'archivio certificati del server.</span><span class="sxs-lookup"><span data-stu-id="ab742-544">The client certificate must be present in the certificate store of the server.</span></span>
```
<bindings>
    <netMsmqBinding>
        <binding>
            <security>
                <transport msmqAuthenticationMode=""Certificate"" />
            </security>
        </binding>
    </netMsmqBinding>
</bindings>
```

## <span data-ttu-id="ab742-545"><a id="message-none"></a>WCF: non impostare il messaggio clientCredentialType su Nessuno</span><span class="sxs-lookup"><span data-stu-id="ab742-545"><a id="message-none"></a>WCF-Do not set Message clientCredentialType to none</span></span>

| <span data-ttu-id="ab742-546">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-546">Title</span></span>                   | <span data-ttu-id="ab742-547">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-547">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-548">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-548">**Component**</span></span>               | <span data-ttu-id="ab742-549">WCF</span><span class="sxs-lookup"><span data-stu-id="ab742-549">WCF</span></span> | 
| <span data-ttu-id="ab742-550">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-550">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-551">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-551">Build</span></span> |  
| <span data-ttu-id="ab742-552">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-552">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-553">.NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="ab742-553">.NET Framework 3</span></span> |
| <span data-ttu-id="ab742-554">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-554">**Attributes**</span></span>              | <span data-ttu-id="ab742-555">Tipo di credenziali client: nessuno</span><span class="sxs-lookup"><span data-stu-id="ab742-555">Client Credential Type - None</span></span> |
| <span data-ttu-id="ab742-556">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-556">**References**</span></span>              | <span data-ttu-id="ab742-557">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="ab742-557">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="ab742-558">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-558">**Steps**</span></span> | <span data-ttu-id="ab742-559">L'assenza di autenticazione indica che tutti possono accedere a questo servizio.</span><span class="sxs-lookup"><span data-stu-id="ab742-559">The absence of authentication means everyone is able to access this service.</span></span> <span data-ttu-id="ab742-560">Un servizio che non esegue l'autenticazione dei client consente l'accesso a tutti gli utenti.</span><span class="sxs-lookup"><span data-stu-id="ab742-560">A service that does not authenticate its clients allows access to all users.</span></span> <span data-ttu-id="ab742-561">Configurare l'applicazione per l'autenticazione con le credenziali del client.</span><span class="sxs-lookup"><span data-stu-id="ab742-561">Configure the application to authenticate against client credentials.</span></span> <span data-ttu-id="ab742-562">A tale scopo, è possibile impostare il messaggio clientCredentialType su Windows o su Certificate.</span><span class="sxs-lookup"><span data-stu-id="ab742-562">This can be done by setting the message clientCredentialType to Windows or Certificate.</span></span> |

### <a name="example"></a><span data-ttu-id="ab742-563">Esempio</span><span class="sxs-lookup"><span data-stu-id="ab742-563">Example</span></span>
```
<message clientCredentialType=""Certificate""/>
```

## <span data-ttu-id="ab742-564"><a id="transport-none"></a>WCF: non impostare il trasporto clientCredentialType su Nessuno</span><span class="sxs-lookup"><span data-stu-id="ab742-564"><a id="transport-none"></a>WCF-Do not set Transport clientCredentialType to none</span></span>

| <span data-ttu-id="ab742-565">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-565">Title</span></span>                   | <span data-ttu-id="ab742-566">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-566">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-567">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-567">**Component**</span></span>               | <span data-ttu-id="ab742-568">WCF</span><span class="sxs-lookup"><span data-stu-id="ab742-568">WCF</span></span> | 
| <span data-ttu-id="ab742-569">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-569">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-570">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-570">Build</span></span> |  
| <span data-ttu-id="ab742-571">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-571">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-572">Generico, .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="ab742-572">Generic, .NET Framework 3</span></span> |
| <span data-ttu-id="ab742-573">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-573">**Attributes**</span></span>              | <span data-ttu-id="ab742-574">Tipo di credenziali client: nessuno</span><span class="sxs-lookup"><span data-stu-id="ab742-574">Client Credential Type - None</span></span> |
| <span data-ttu-id="ab742-575">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-575">**References**</span></span>              | <span data-ttu-id="ab742-576">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span><span class="sxs-lookup"><span data-stu-id="ab742-576">[MSDN](https://msdn.microsoft.com/library/ff648500.aspx), [Fortify](https://vulncat.fortify.com/en/vulncat/index.html)</span></span> |
| <span data-ttu-id="ab742-577">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-577">**Steps**</span></span> | <span data-ttu-id="ab742-578">L'assenza di autenticazione indica che tutti possono accedere a questo servizio.</span><span class="sxs-lookup"><span data-stu-id="ab742-578">The absence of authentication means everyone is able to access this service.</span></span> <span data-ttu-id="ab742-579">Un servizio che non esegue l'autenticazione dei client consente a tutti gli utenti di accedere alle funzionalità.</span><span class="sxs-lookup"><span data-stu-id="ab742-579">A service that does not authenticate its clients allows all users to access its functionality.</span></span> <span data-ttu-id="ab742-580">Configurare l'applicazione per l'autenticazione con le credenziali del client.</span><span class="sxs-lookup"><span data-stu-id="ab742-580">Configure the application to authenticate against client credentials.</span></span> <span data-ttu-id="ab742-581">A tale scopo, è possibile impostare il trasporto clientCredentialType su Windows o su Certificate.</span><span class="sxs-lookup"><span data-stu-id="ab742-581">This can be done by setting the transport clientCredentialType to Windows or Certificate.</span></span> |

### <a name="example"></a><span data-ttu-id="ab742-582">Esempio</span><span class="sxs-lookup"><span data-stu-id="ab742-582">Example</span></span>
```
<transport clientCredentialType=""Certificate""/>
```

## <span data-ttu-id="ab742-583"><a id="authn-secure-api"></a>Assicurarsi che vengano usate tecniche di autenticazione standard per proteggere le API Web</span><span class="sxs-lookup"><span data-stu-id="ab742-583"><a id="authn-secure-api"></a>Ensure that standard authentication techniques are used to secure Web APIs</span></span>

| <span data-ttu-id="ab742-584">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-584">Title</span></span>                   | <span data-ttu-id="ab742-585">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-585">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-586">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-586">**Component**</span></span>               | <span data-ttu-id="ab742-587">API Web</span><span class="sxs-lookup"><span data-stu-id="ab742-587">Web API</span></span> | 
| <span data-ttu-id="ab742-588">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-588">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-589">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-589">Build</span></span> |  
| <span data-ttu-id="ab742-590">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-590">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-591">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-591">Generic</span></span> |
| <span data-ttu-id="ab742-592">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-592">**Attributes**</span></span>              | <span data-ttu-id="ab742-593">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-593">N/A</span></span>  |
| <span data-ttu-id="ab742-594">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-594">**References**</span></span>              | <span data-ttu-id="ab742-595">[Autenticazione e autorizzazione nell'API Web ASP.NET](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api), [Servizi di autenticazione esterna con l'API Web ASP.NET (C#)](http://www.asp.net/web-api/overview/security/external-authentication-services)</span><span class="sxs-lookup"><span data-stu-id="ab742-595">[Authentication and Authorization in ASP.NET Web API](http://www.asp.net/web-api/overview/security/authentication-and-authorization-in-aspnet-web-api), [External Authentication Services with ASP.NET Web API (C#)](http://www.asp.net/web-api/overview/security/external-authentication-services)</span></span> |
| <span data-ttu-id="ab742-596">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-596">**Steps**</span></span> | <p><span data-ttu-id="ab742-597">L'autenticazione è il processo che permette a un'entità di dimostrare la propria identità, in genere mediante l'uso di credenziali, come un nome utente e una password.</span><span class="sxs-lookup"><span data-stu-id="ab742-597">Authentication is the process where an entity proves its identity, typically through credentials, such as a user name and password.</span></span> <span data-ttu-id="ab742-598">È possibile prendere in considerazione diversi protocolli di autenticazione disponibili,</span><span class="sxs-lookup"><span data-stu-id="ab742-598">There are multiple authentication protocols available which may be considered.</span></span> <span data-ttu-id="ab742-599">alcuni dei quali sono elencati di seguito:</span><span class="sxs-lookup"><span data-stu-id="ab742-599">Some of them are listed below:</span></span></p><ul><li><span data-ttu-id="ab742-600">Certificati client</span><span class="sxs-lookup"><span data-stu-id="ab742-600">Client certificates</span></span></li><li><span data-ttu-id="ab742-601">Basato su Windows</span><span class="sxs-lookup"><span data-stu-id="ab742-601">Windows based</span></span></li><li><span data-ttu-id="ab742-602">Basato su form</span><span class="sxs-lookup"><span data-stu-id="ab742-602">Forms based</span></span></li><li><span data-ttu-id="ab742-603">Federazione: AD FS</span><span class="sxs-lookup"><span data-stu-id="ab742-603">Federation - ADFS</span></span></li><li><span data-ttu-id="ab742-604">Federazione: Azure AD</span><span class="sxs-lookup"><span data-stu-id="ab742-604">Federation - Azure AD</span></span></li><li><span data-ttu-id="ab742-605">Federazione: Identity Server</span><span class="sxs-lookup"><span data-stu-id="ab742-605">Federation - Identity Server</span></span></li></ul><p><span data-ttu-id="ab742-606">I collegamenti riportati nella sezione dei riferimenti permettono di ottenere informazioni dettagliate su come implementare ognuno degli schemi di autenticazione per proteggere un'API Web.</span><span class="sxs-lookup"><span data-stu-id="ab742-606">Links in the references section provide low-level details on how each of the authentication schemes can be implemented to secure a Web API.</span></span></p>|

## <span data-ttu-id="ab742-607"><a id="authn-aad"></a>Usare scenari di autenticazione standard supportati da Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="ab742-607"><a id="authn-aad"></a>Use standard authentication scenarios supported by Azure Active Directory</span></span>

| <span data-ttu-id="ab742-608">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-608">Title</span></span>                   | <span data-ttu-id="ab742-609">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-609">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-610">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-610">**Component**</span></span>               | <span data-ttu-id="ab742-611">Azure AD</span><span class="sxs-lookup"><span data-stu-id="ab742-611">Azure AD</span></span> | 
| <span data-ttu-id="ab742-612">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-612">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-613">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-613">Build</span></span> |  
| <span data-ttu-id="ab742-614">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-614">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-615">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-615">Generic</span></span> |
| <span data-ttu-id="ab742-616">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-616">**Attributes**</span></span>              | <span data-ttu-id="ab742-617">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-617">N/A</span></span>  |
| <span data-ttu-id="ab742-618">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-618">**References**</span></span>              | <span data-ttu-id="ab742-619">[Scenari di autenticazione per Azure AD](https://azure.microsoft.com/documentation/articles/active-directory-authentication-scenarios/), [Esempi di codice di Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-code-samples/), [Guida per gli sviluppatori di Azure Active Directory](https://azure.microsoft.com/documentation/articles/active-directory-developers-guide/)</span><span class="sxs-lookup"><span data-stu-id="ab742-619">[Authentication Scenarios for Azure AD](https://azure.microsoft.com/documentation/articles/active-directory-authentication-scenarios/), [Azure Active Directory Code Samples](https://azure.microsoft.com/documentation/articles/active-directory-code-samples/), [Azure Active Directory developer's guide](https://azure.microsoft.com/documentation/articles/active-directory-developers-guide/)</span></span> |
| <span data-ttu-id="ab742-620">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-620">**Steps**</span></span> | <p><span data-ttu-id="ab742-621">Azure Active Directory (Azure AD) semplifica l'autenticazione per gli sviluppatori fornendo le identità come servizio, con il supporto per protocolli standard del settore come OAuth 2.0 e OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="ab742-621">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="ab742-622">Azure AD supporta i cinque scenari di applicazione principali descritti di seguito:</span><span class="sxs-lookup"><span data-stu-id="ab742-622">Below are the five primary application scenarios supported by Azure AD:</span></span></p><ul><li><span data-ttu-id="ab742-623">Da Web browser ad applicazione Web: un utente deve accedere a un'applicazione Web protetta da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ab742-623">Web Browser to Web Application: A user needs to sign in to a web application that is secured by Azure AD</span></span></li><li><span data-ttu-id="ab742-624">Applicazione a pagina singola (SPA): un utente deve accedere a un'applicazione a pagina singola protetta da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ab742-624">Single Page Application (SPA): A user needs to sign in to a single page application that is secured by Azure AD</span></span></li><li><span data-ttu-id="ab742-625">Da applicazione nativa ad API Web: un'applicazione nativa in esecuzione in un telefono, un tablet o un PC deve autenticare un utente per ottenere risorse da un'API Web protetta da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ab742-625">Native Application to Web API: A native application that runs on a phone, tablet, or PC needs to authenticate a user to get resources from a web API that is secured by Azure AD</span></span></li><li><span data-ttu-id="ab742-626">Da applicazione Web ad API Web: un'applicazione Web deve ottenere risorse da un'API Web protetta da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ab742-626">Web Application to Web API: A web application needs to get resources from a web API secured by Azure AD</span></span></li><li><span data-ttu-id="ab742-627">Da daemon o applicazione server ad API Web: un'applicazione daemon o un'applicazione server priva di interfaccia utente Web deve ottenere risorse da un'API Web protetta da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ab742-627">Daemon or Server Application to Web API: A daemon application or a server application with no web user interface needs to get resources from a web API secured by Azure AD</span></span></li></ul><p><span data-ttu-id="ab742-628">Per informazioni dettagliate sull'implementazione, vedere i collegamenti riportati nella sezione dei riferimenti.</span><span class="sxs-lookup"><span data-stu-id="ab742-628">Please refer to the links in the references section for low-level implementation details</span></span></p>|

## <span data-ttu-id="ab742-629"><a id="adal-scalable"></a>Sostituire la cache dei token di ADAL predefinita con un'alternativa scalabile</span><span class="sxs-lookup"><span data-stu-id="ab742-629"><a id="adal-scalable"></a>Override the default ADAL token cache with a scalable alternative</span></span>

| <span data-ttu-id="ab742-630">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-630">Title</span></span>                   | <span data-ttu-id="ab742-631">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-631">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-632">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-632">**Component**</span></span>               | <span data-ttu-id="ab742-633">Azure AD</span><span class="sxs-lookup"><span data-stu-id="ab742-633">Azure AD</span></span> | 
| <span data-ttu-id="ab742-634">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-634">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-635">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-635">Build</span></span> |  
| <span data-ttu-id="ab742-636">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-636">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-637">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-637">Generic</span></span> |
| <span data-ttu-id="ab742-638">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-638">**Attributes**</span></span>              | <span data-ttu-id="ab742-639">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-639">N/A</span></span>  |
| <span data-ttu-id="ab742-640">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-640">**References**</span></span>              | <span data-ttu-id="ab742-641">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/) (Autenticazione moderna con Azure Active Directory per applicazioni Web), [Using Redis as ADAL token cache](https://blogs.msdn.microsoft.com/mrochon/2016/09/19/using-redis-as-adal-token-cache/) (Uso di Redis come cache dei token ADAL)</span><span class="sxs-lookup"><span data-stu-id="ab742-641">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/), [Using Redis as ADAL token cache](https://blogs.msdn.microsoft.com/mrochon/2016/09/19/using-redis-as-adal-token-cache/)</span></span>  |
| <span data-ttu-id="ab742-642">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-642">**Steps**</span></span> | <p><span data-ttu-id="ab742-643">La cache predefinita usata da ADAL (Active Directory Authentication Library) è una cache in memoria che si basa su un archivio statico, disponibile a livello di processo.</span><span class="sxs-lookup"><span data-stu-id="ab742-643">The default cache that ADAL (Active Directory Authentication Library) uses is an in-memory cache that relies on a static store, available process-wide.</span></span> <span data-ttu-id="ab742-644">Tale cache è sufficiente per le applicazioni native ma, per i motivi elencati di seguito, non può essere ridimensionata per le applicazioni back-end e di livello intermedio:</span><span class="sxs-lookup"><span data-stu-id="ab742-644">While this works for native applications, it does not scale for mid tier and backend applications for the following reasons:</span></span></p><ul><li><span data-ttu-id="ab742-645">Queste applicazioni sono accessibili da più utenti contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="ab742-645">These applications are accessed by many users at once.</span></span> <span data-ttu-id="ab742-646">Il salvataggio di tutti i token di accesso nello stesso archivio crea problemi di isolamento e presenta difficoltà quando si opera su vasta scala. Un numero elevato di utenti, ognuno con un numero di token pari a quello delle risorse a cui l'app accede per suo conto, può far aumentare notevolmente la quantità e il costo delle operazioni di ricerca.</span><span class="sxs-lookup"><span data-stu-id="ab742-646">Saving all access tokens in the same store creates isolation issues and presents challenges when operating at scale: many users, each with as many tokens as the resources the app accesses on their behalf, can mean huge numbers and very expensive lookup operations</span></span></li><li><span data-ttu-id="ab742-647">Queste applicazioni vengono in genere distribuite in topologie distribuite, in cui più nodi devono avere accesso alla stessa cache.</span><span class="sxs-lookup"><span data-stu-id="ab742-647">These applications are typically deployed on distributed topologies, where multiple nodes must have access to the same cache</span></span></li><li><span data-ttu-id="ab742-648">I token memorizzati nella cache devono resistere in caso di disattivazione e riciclo del processo.</span><span class="sxs-lookup"><span data-stu-id="ab742-648">Cached tokens must survive process recycles and deactivations</span></span></li></ul><p><span data-ttu-id="ab742-649">Per tutte queste ragioni, durante l'implementazione di app Web è consigliabile sostituire la cache dei token ADAL predefinita con un'alternativa scalabile, ad esempio Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="ab742-649">For all the above reasons, while implementing web apps, it is recommended to override the default ADAL token cache with a scalable alternative such as Azure Redis cache.</span></span></p>|

## <span data-ttu-id="ab742-650"><a id="tokenreplaycache-adal"></a>Assicurarsi che venga usata la proprietà TokenReplayCache per impedire la riproduzione dei token di autenticazione ADAL</span><span class="sxs-lookup"><span data-stu-id="ab742-650"><a id="tokenreplaycache-adal"></a>Ensure that TokenReplayCache is used to prevent the replay of ADAL authentication tokens</span></span>

| <span data-ttu-id="ab742-651">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-651">Title</span></span>                   | <span data-ttu-id="ab742-652">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-652">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-653">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-653">**Component**</span></span>               | <span data-ttu-id="ab742-654">Azure AD</span><span class="sxs-lookup"><span data-stu-id="ab742-654">Azure AD</span></span> | 
| <span data-ttu-id="ab742-655">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-655">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-656">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-656">Build</span></span> |  
| <span data-ttu-id="ab742-657">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-657">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-658">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-658">Generic</span></span> |
| <span data-ttu-id="ab742-659">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-659">**Attributes**</span></span>              | <span data-ttu-id="ab742-660">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-660">N/A</span></span>  |
| <span data-ttu-id="ab742-661">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-661">**References**</span></span>              | <span data-ttu-id="ab742-662">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/) (Autenticazione moderna con Azure Active Directory per applicazioni Web)</span><span class="sxs-lookup"><span data-stu-id="ab742-662">[Modern Authentication with Azure Active Directory for Web Applications](https://blogs.msdn.microsoft.com/microsoft_press/2016/01/04/new-book-modern-authentication-with-azure-active-directory-for-web-applications/)</span></span> |
| <span data-ttu-id="ab742-663">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-663">**Steps**</span></span> | <p><span data-ttu-id="ab742-664">La proprietà TokenReplayCache consente agli sviluppatori di definire una cache di riproduzione dei token, ovvero un archivio in cui salvare i token allo scopo di verificare che nessun token venga usato più di una volta.</span><span class="sxs-lookup"><span data-stu-id="ab742-664">The TokenReplayCache property allows developers to define a token replay cache, a store that can be used for saving tokens for the purpose of verifying that no token can be used more than once.</span></span></p><p><span data-ttu-id="ab742-665">Si tratta di una misura adatta a un tipo di attacco comune, detto attacco di riproduzione dei token, in cui un utente malintenzionato che intercetta il token inviato al momento dell'accesso potrebbe provare a inviarlo nuovamente all'app, ovvero "riprodurlo", per stabilire una nuova sessione.</span><span class="sxs-lookup"><span data-stu-id="ab742-665">This is a measure against a common attack, the aptly called token replay attack: an attacker intercepting the token sent at sign-in might try to send it to the app again (“replay” it) for establishing a new session.</span></span> <span data-ttu-id="ab742-666">Ad esempio, nel flusso di concessione del codice OIDC dopo l'autenticazione dell'utente viene inviata una richiesta all'endpoint "/signin-oidc" della relying party con i parametri "id_token", "code" e "state".</span><span class="sxs-lookup"><span data-stu-id="ab742-666">E.g., In OIDC code-grant flow, after successful user authentication, a request to "/signin-oidc" endpoint of the relying party is made with "id_token", "code" and "state" parameters.</span></span></p><p><span data-ttu-id="ab742-667">La relying party convalida la richiesta e stabilisce una nuova sessione.</span><span class="sxs-lookup"><span data-stu-id="ab742-667">The relying party validates this request and establishes a new session.</span></span> <span data-ttu-id="ab742-668">Se un antagonista acquisisce questa richiesta e la riproduce, può stabilire una sessione ed effettuare lo spoofing dell'utente.</span><span class="sxs-lookup"><span data-stu-id="ab742-668">If an adversary captures this request and replays it, he/she can establish a successful session and spoof the user.</span></span> <span data-ttu-id="ab742-669">La presenza del parametro nonce in OpenID Connect può limitare, ma non eliminare del tutto, le circostanze che permettono di mettere in atto l'attacco.</span><span class="sxs-lookup"><span data-stu-id="ab742-669">The presence of the nonce in OpenID Connect can limit but not fully eliminate the circumstances in which the attack can be successfully enacted.</span></span> <span data-ttu-id="ab742-670">Per proteggere le applicazioni, gli sviluppatori possono fornire un'implementazione di ITokenReplayCache e assegnare un'istanza a TokenReplayCache.</span><span class="sxs-lookup"><span data-stu-id="ab742-670">To protect their applications, developers can provide an implementation of ITokenReplayCache and assign an instance to TokenReplayCache.</span></span></p>|

### <a name="example"></a><span data-ttu-id="ab742-671">Esempio</span><span class="sxs-lookup"><span data-stu-id="ab742-671">Example</span></span>
```C#
// ITokenReplayCache defined in ADAL
public interface ITokenReplayCache
{
bool TryAdd(string securityToken, DateTime expiresOn);
bool TryFind(string securityToken);
}
```

### <a name="example"></a><span data-ttu-id="ab742-672">Esempio</span><span class="sxs-lookup"><span data-stu-id="ab742-672">Example</span></span>
<span data-ttu-id="ab742-673">Di seguito è riportato un esempio di implementazione dell'interfaccia ITokenReplayCache.</span><span class="sxs-lookup"><span data-stu-id="ab742-673">Here is a sample implementation of the ITokenReplayCache interface.</span></span> <span data-ttu-id="ab742-674">Personalizzare l'esempio e implementare il framework di memorizzazione nella cache specifico del progetto.</span><span class="sxs-lookup"><span data-stu-id="ab742-674">(Please customize and implement your project-specific caching framework)</span></span>
```C#
public class TokenReplayCache : ITokenReplayCache
{
    private readonly ICacheProvider cache; // Your project-specific cache provider
    public TokenReplayCache(ICacheProvider cache)
    {
        this.cache = cache;
    }
    public bool TryAdd(string securityToken, DateTime expiresOn)
    {
        if (this.cache.Get<string>(securityToken) == null)
        {
            this.cache.Set(securityToken, securityToken);
            return true;
        }
        return false;
    }
    public bool TryFind(string securityToken)
    {
        return this.cache.Get<string>(securityToken) != null;
    }
}
```
<span data-ttu-id="ab742-675">Le opzioni OIDC devono fare riferimento alla cache implementata tramite la proprietà "TokenValidationParameters", come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="ab742-675">The implemented cache has to be referenced in OIDC options via the "TokenValidationParameters" property as follows.</span></span>
```C#
OpenIdConnectOptions openIdConnectOptions = new OpenIdConnectOptions
{
    AutomaticAuthenticate = true,
    ... // other configuration properties follow..
    TokenValidationParameters = new TokenValidationParameters
    {
        TokenReplayCache = new TokenReplayCache(/*Inject your cache provider*/);
    }
}
```

<span data-ttu-id="ab742-676">Per verificare l'efficacia di questa configurazione, accedere all'applicazione locale protetta da OIDC e acquisire la richiesta all'endpoint `"/signin-oidc"` in Fiddler.</span><span class="sxs-lookup"><span data-stu-id="ab742-676">Please note that to test the effectiveness of this configuration, login into your local OIDC-protected application and capture the request to `"/signin-oidc"` endpoint in fiddler.</span></span> <span data-ttu-id="ab742-677">In assenza di protezione, la riproduzione di questa richiesta in Fiddler imposta un nuovo cookie di sessione.</span><span class="sxs-lookup"><span data-stu-id="ab742-677">When the protection is not in place, replaying this request in fiddler will set a new session cookie.</span></span> <span data-ttu-id="ab742-678">Quando la richiesta viene riprodotta dopo aver aggiunto la protezione TokenReplayCache, l'applicazione genera un'eccezione simile alla seguente: `SecurityTokenReplayDetectedException: IDX10228: The securityToken has previously been validated, securityToken: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSIsImtpZCI6Ik1uQ1......`</span><span class="sxs-lookup"><span data-stu-id="ab742-678">When the request is replayed after the TokenReplayCache protection is added, the application will throw an exception as follows: `SecurityTokenReplayDetectedException: IDX10228: The securityToken has previously been validated, securityToken: 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSIsImtpZCI6Ik1uQ1......`</span></span>

## <span data-ttu-id="ab742-679"><a id="adal-oauth2"></a>Usare librerie ADAL per gestire le richieste di token da client OAuth2 in AAD o in Active Directory locale</span><span class="sxs-lookup"><span data-stu-id="ab742-679"><a id="adal-oauth2"></a>Use ADAL libraries to manage token requests from OAuth2 clients to AAD (or on-premises AD)</span></span>

| <span data-ttu-id="ab742-680">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-680">Title</span></span>                   | <span data-ttu-id="ab742-681">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-681">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-682">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-682">**Component**</span></span>               | <span data-ttu-id="ab742-683">Azure AD</span><span class="sxs-lookup"><span data-stu-id="ab742-683">Azure AD</span></span> | 
| <span data-ttu-id="ab742-684">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-684">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-685">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-685">Build</span></span> |  
| <span data-ttu-id="ab742-686">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-686">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-687">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-687">Generic</span></span> |
| <span data-ttu-id="ab742-688">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-688">**Attributes**</span></span>              | <span data-ttu-id="ab742-689">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-689">N/A</span></span>  |
| <span data-ttu-id="ab742-690">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-690">**References**</span></span>              | [<span data-ttu-id="ab742-691">ADAL</span><span class="sxs-lookup"><span data-stu-id="ab742-691">ADAL</span></span>](https://azure.microsoft.com/documentation/articles/active-directory-authentication-libraries/) |
| <span data-ttu-id="ab742-692">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-692">**Steps**</span></span> | <p><span data-ttu-id="ab742-693">Azure AD Authentication Library (ADAL) consente agli sviluppatori di applicazioni client di autenticare facilmente gli utenti in Active Directory locale o nel cloud e quindi di ottenere token di accesso per proteggere le chiamate API.</span><span class="sxs-lookup"><span data-stu-id="ab742-693">The Azure AD authentication Library (ADAL) enables client application developers to easily authenticate users to cloud or on-premises Active Directory (AD), and then obtain access tokens for securing API calls.</span></span></p><p><span data-ttu-id="ab742-694">Azure AD Authentication Library offre numerose funzionalità che semplificano l'integrazione dell'autenticazione nelle applicazioni da parte degli sviluppatori, ad esempio il supporto asincrono, la cache di token configurabile per l'archiviazione dei token di accesso e dei token di aggiornamento e l'aggiornamento automatico dei token alla scadenza dei token di accesso, i token di aggiornamento e altre ancora.</span><span class="sxs-lookup"><span data-stu-id="ab742-694">ADAL has many features that make authentication easier for developers, such as asynchronous support, a configurable token cache that stores access tokens and refresh tokens, automatic token refresh when an access token expires and a refresh token is available, and more.</span></span></p><p><span data-ttu-id="ab742-695">Poiché Azure AD Authentication Library gestisce la maggior parte della complessità, gli sviluppatori possono concentrarsi sulla logica di business nell'applicazione e di proteggere le risorse pur non avendo competenze elevate in termini di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ab742-695">By handling most of the complexity, ADAL can help a developer focus on business logic in their application and easily secure resources without being an expert on security.</span></span> <span data-ttu-id="ab742-696">Sono disponibili librerie separate per .NET, JavaScript (client e Node.js), iOS, Android e Java.</span><span class="sxs-lookup"><span data-stu-id="ab742-696">Separate libraries are available for .NET, JavaScript (client and Node.js), iOS, Android and Java.</span></span></p>|

## <span data-ttu-id="ab742-697"><a id="authn-devices-field"></a>Autenticare dispositivi che si connettono al gateway sul campo</span><span class="sxs-lookup"><span data-stu-id="ab742-697"><a id="authn-devices-field"></a>Authenticate devices connecting to the Field Gateway</span></span>

| <span data-ttu-id="ab742-698">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-698">Title</span></span>                   | <span data-ttu-id="ab742-699">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-699">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-700">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-700">**Component**</span></span>               | <span data-ttu-id="ab742-701">Gateway IoT sul campo</span><span class="sxs-lookup"><span data-stu-id="ab742-701">IoT Field Gateway</span></span> | 
| <span data-ttu-id="ab742-702">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-702">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-703">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-703">Build</span></span> |  
| <span data-ttu-id="ab742-704">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-704">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-705">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-705">Generic</span></span> |
| <span data-ttu-id="ab742-706">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-706">**Attributes**</span></span>              | <span data-ttu-id="ab742-707">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-707">N/A</span></span>  |
| <span data-ttu-id="ab742-708">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-708">**References**</span></span>              | <span data-ttu-id="ab742-709">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-709">N/A</span></span>  |
| <span data-ttu-id="ab742-710">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-710">**Steps**</span></span> | <span data-ttu-id="ab742-711">Assicurarsi che ogni dispositivo venga autenticato dal gateway sul campo prima di accettare dati dal dispositivo e prima di agevolare le comunicazioni upstream con il gateway cloud.</span><span class="sxs-lookup"><span data-stu-id="ab742-711">Ensure that each device is authenticated by the Field Gateway before accepting data from them and before facilitating upstream communications with the Cloud Gateway.</span></span> <span data-ttu-id="ab742-712">Assicurarsi anche che i dispositivi si connettano con credenziali per dispositivo, in modo che sia possibile identificare i singoli dispositivi in modo univoco.</span><span class="sxs-lookup"><span data-stu-id="ab742-712">Also, ensure that devices connect with a per device credential so that individual devices can be uniquely identified.</span></span>|

## <span data-ttu-id="ab742-713"><a id="authn-devices-cloud"></a>Assicurarsi che i dispositivi che si connettono al gateway cloud vengano autenticati</span><span class="sxs-lookup"><span data-stu-id="ab742-713"><a id="authn-devices-cloud"></a>Ensure that devices connecting to Cloud gateway are authenticated</span></span>

| <span data-ttu-id="ab742-714">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-714">Title</span></span>                   | <span data-ttu-id="ab742-715">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-715">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-716">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-716">**Component**</span></span>               | <span data-ttu-id="ab742-717">Gateway IoT cloud</span><span class="sxs-lookup"><span data-stu-id="ab742-717">IoT Cloud Gateway</span></span> | 
| <span data-ttu-id="ab742-718">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-718">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-719">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-719">Build</span></span> |  
| <span data-ttu-id="ab742-720">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-720">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-721">Generico, C#, Node.js</span><span class="sxs-lookup"><span data-stu-id="ab742-721">Generic, C#, Node.JS,</span></span>  |
| <span data-ttu-id="ab742-722">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-722">**Attributes**</span></span>              | <span data-ttu-id="ab742-723">N/A, opzione gateway: Hub IoT di Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-723">N/A, Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="ab742-724">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-724">**References**</span></span>              | <span data-ttu-id="ab742-725">N/A, [Hub IoT di Azure con .NET](https://azure.microsoft.com/documentation/articles/iot-hub-csharp-csharp-getstarted/), [Introduzione all'hub IoT e Node.js](https://azure.microsoft.com/documentation/articles/iot-hub-node-node-getstarted), [Proteggere l'hub IoT con certificati e firma di accesso condiviso](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/), [Repository Git](https://github.com/Azure/azure-iot-sdks/tree/master/node)</span><span class="sxs-lookup"><span data-stu-id="ab742-725">N/A, [Azure IoT hub with .NET](https://azure.microsoft.com/documentation/articles/iot-hub-csharp-csharp-getstarted/), [Getting Started wih IoT hub and Node JS](https://azure.microsoft.com/documentation/articles/iot-hub-node-node-getstarted), [Securing IoT with SAS and certificates](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/), [Git repository](https://github.com/Azure/azure-iot-sdks/tree/master/node)</span></span> |
| <span data-ttu-id="ab742-726">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-726">**Steps**</span></span> | <ul><li><span data-ttu-id="ab742-727">**Generico:** il dispositivo viene autenticato tramite Transport Layer Security (TLS) o IPSec.</span><span class="sxs-lookup"><span data-stu-id="ab742-727">**Generic:** Authenticate the device using Transport Layer Security (TLS) or IPSec.</span></span> <span data-ttu-id="ab742-728">L'infrastruttura deve supportare l'uso di una chiave precondivisa (PSK) nei dispositivi che non riescono a gestire la crittografia asimmetrica completa.</span><span class="sxs-lookup"><span data-stu-id="ab742-728">Infrastructure should support using pre-shared key (PSK) on those devices that cannot handle full asymmetric cryptography.</span></span> <span data-ttu-id="ab742-729">Usare Azure AD, OAuth.</span><span class="sxs-lookup"><span data-stu-id="ab742-729">Leverage Azure AD, Oauth.</span></span></li><li><span data-ttu-id="ab742-730">**C#:** quando si crea un'istanza di DeviceClient, per impostazione predefinita il metodo Create crea un'istanza di DeviceClient che usa il protocollo AMQP per comunicare con l'hub IoT.</span><span class="sxs-lookup"><span data-stu-id="ab742-730">**C#:** When creating a DeviceClient instance, by default, the Create method creates a DeviceClient instance that uses the AMQP protocol to communicate with IoT Hub.</span></span> <span data-ttu-id="ab742-731">Per usare il protocollo HTTPS, usare l'override del metodo Create che consente di specificare il protocollo.</span><span class="sxs-lookup"><span data-stu-id="ab742-731">To use the HTTPS protocol, use the override of the Create method that enables you to specify the protocol.</span></span> <span data-ttu-id="ab742-732">Se si usa il protocollo HTTPS, è necessario aggiungere al progetto anche il pacchetto NuGet `Microsoft.AspNet.WebApi.Client` per includere lo spazio dei nomi `System.Net.Http.Formatting`.</span><span class="sxs-lookup"><span data-stu-id="ab742-732">If you use the HTTPS protocol, you should also add the `Microsoft.AspNet.WebApi.Client` NuGet package to your project to include the `System.Net.Http.Formatting` namespace.</span></span></li></ul>|

### <a name="example"></a><span data-ttu-id="ab742-733">Esempio</span><span class="sxs-lookup"><span data-stu-id="ab742-733">Example</span></span>
```C#
static DeviceClient deviceClient;

static string deviceKey = "{device key}";
static string iotHubUri = "{iot hub hostname}";

var messageString = "{message in string format}";
var message = new Message(Encoding.ASCII.GetBytes(messageString));

deviceClient = DeviceClient.Create(iotHubUri, new DeviceAuthenticationWithRegistrySymmetricKey("myFirstDevice", deviceKey));

await deviceClient.SendEventAsync(message);
```

### <a name="example"></a><span data-ttu-id="ab742-734">Esempio</span><span class="sxs-lookup"><span data-stu-id="ab742-734">Example</span></span>
<span data-ttu-id="ab742-735">**Node.js: autenticazione**</span><span class="sxs-lookup"><span data-stu-id="ab742-735">**Node.JS: Authentication**</span></span>
#### <a name="symmetric-key"></a><span data-ttu-id="ab742-736">Chiave simmetrica</span><span class="sxs-lookup"><span data-stu-id="ab742-736">Symmetric key</span></span>
* <span data-ttu-id="ab742-737">Creare un hub IoT in Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-737">Create a IoT hub on azure</span></span>
* <span data-ttu-id="ab742-738">Creare una voce nel registro delle identità dei dispositivi</span><span class="sxs-lookup"><span data-stu-id="ab742-738">Create an entry in the device identity registry</span></span>
    ```javascript
    var device = new iothub.Device(null);
    device.deviceId = <DeviceId >
    registry.create(device, function(err, deviceInfo, res) {})
    ```
* <span data-ttu-id="ab742-739">Creare un dispositivo simulato</span><span class="sxs-lookup"><span data-stu-id="ab742-739">Create a simulated device</span></span>
    ```javascript
    var clientFromConnectionString = require('azure-iot-device-amqp').clientFromConnectionString;
    var Message = require('azure-iot-device').Message;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>SharedAccessKey=<SharedAccessKey>';
    var client = clientFromConnectionString(connectionString);
    ```
#### <a name="sas-token"></a><span data-ttu-id="ab742-740">Token di firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="ab742-740">SAS Token</span></span>
* <span data-ttu-id="ab742-741">Viene generato internamente quando si usa una chiave simmetrica, ma è anche possibile generarlo e usarlo in modo esplicito</span><span class="sxs-lookup"><span data-stu-id="ab742-741">Gets internally generated when using symmetric key but we can generate and use it explicitly as well</span></span>
* <span data-ttu-id="ab742-742">Definire un protocollo: `var Http = require('azure-iot-device-http').Http;`</span><span class="sxs-lookup"><span data-stu-id="ab742-742">Define a protocol : `var Http = require('azure-iot-device-http').Http;`</span></span>
* <span data-ttu-id="ab742-743">Creare un token di firma di accesso condiviso:</span><span class="sxs-lookup"><span data-stu-id="ab742-743">Create a sas token :</span></span>
    ```javascript
    resourceUri = encodeURIComponent(resourceUri.toLowerCase()).toLowerCase();
    var deviceName = "<deviceName >";
    var expires = (Date.now() / 1000) + expiresInMins * 60;
    var toSign = resourceUri + '\n' + expires;
    // using crypto
    var decodedPassword = new Buffer(signingKey, 'base64').toString('binary');
    const hmac = crypto.createHmac('sha256', decodedPassword);
    hmac.update(toSign);
    var base64signature = hmac.digest('base64');
    var base64UriEncoded = encodeURIComponent(base64signature);
    // construct authorization string
    var token = "SharedAccessSignature sr=" + resourceUri + "%2fdevices%2f"+deviceName+"&sig="
    + base64UriEncoded + "&se=" + expires;
    if (policyName) token += "&skn="+policyName;
    return token;
    ```
* <span data-ttu-id="ab742-744">Connettersi tramite un token di firma di accesso condiviso:</span><span class="sxs-lookup"><span data-stu-id="ab742-744">Connect using sas token:</span></span> 
    ```javascript
    Client.fromSharedAccessSignature(sas, Http); 
    ```
#### <a name="certificates"></a><span data-ttu-id="ab742-745">Certificati</span><span class="sxs-lookup"><span data-stu-id="ab742-745">Certificates</span></span>
* <span data-ttu-id="ab742-746">Generare un certificato X.509 autofirmato con qualsiasi strumento, ad esempio OpenSSL, per generare file CERT e KEY in cui archiviare, rispettivamente, il certificato e la chiave</span><span class="sxs-lookup"><span data-stu-id="ab742-746">Generate a self signed X509 certificate using any tool such as OpenSSL to generate a .cert and .key files to store the certificate and the key respectively</span></span>
* <span data-ttu-id="ab742-747">Effettuare il provisioning di un dispositivo che accetta connessioni protette tramite i certificati</span><span class="sxs-lookup"><span data-stu-id="ab742-747">Provision a device that accepts secured connection using certificates.</span></span>
    ```javascript
    var connectionString = '<connectionString>';
    var registry = iothub.Registry.fromConnectionString(connectionString);
    var deviceJSON = {deviceId:"<deviceId>",
    authentication: {
        x509Thumbprint: {
        primaryThumbprint: "<PrimaryThumbprint>",
        secondaryThumbprint: "<SecondaryThumbprint>"
        }
    }}
    var device = deviceJSON;
    registry.create(device, function (err) {});
    ```
* <span data-ttu-id="ab742-748">Connettere un dispositivo usando un certificato</span><span class="sxs-lookup"><span data-stu-id="ab742-748">Connect a device using a certificate</span></span>
    ```javascript
    var Protocol = require('azure-iot-device-http').Http;
    var Client = require('azure-iot-device').Client;
    var connectionString = 'HostName=<HostName>DeviceId=<DeviceId>x509=true';
    var client = Client.fromConnectionString(connectionString, Protocol);
    var options = {
        key: fs.readFileSync('./key.pem', 'utf8'),
        cert: fs.readFileSync('./server.crt', 'utf8')
    }; 
    // Calling setOptions with the x509 certificate and key (and optionally, passphrase) will configure the client //transport to use x509 when connecting to IoT Hub
    client.setOptions(options);
    //call fn to execute after the connection is set up
    client.open(fn);
    ```

## <span data-ttu-id="ab742-749"><a id="authn-cred"></a>Usare credenziali di autenticazione per dispositivo</span><span class="sxs-lookup"><span data-stu-id="ab742-749"><a id="authn-cred"></a>Use per-device authentication credentials</span></span>

| <span data-ttu-id="ab742-750">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-750">Title</span></span>                   | <span data-ttu-id="ab742-751">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-751">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-752">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-752">**Component**</span></span>               | <span data-ttu-id="ab742-753">Gateway IoT cloud</span><span class="sxs-lookup"><span data-stu-id="ab742-753">IoT Cloud Gateway</span></span>  | 
| <span data-ttu-id="ab742-754">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-754">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-755">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-755">Build</span></span> |  
| <span data-ttu-id="ab742-756">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-756">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-757">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-757">Generic</span></span> |
| <span data-ttu-id="ab742-758">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-758">**Attributes**</span></span>              | <span data-ttu-id="ab742-759">Opzione gateway: Hub IoT di Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-759">Gateway choice - Azure IoT Hub</span></span> |
| <span data-ttu-id="ab742-760">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-760">**References**</span></span>              | [<span data-ttu-id="ab742-761">Token di sicurezza dell'hub IoT di Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-761">Azure IoT Hub Security Tokens</span></span>](https://azure.microsoft.com/documentation/articles/iot-hub-sas-tokens/) |
| <span data-ttu-id="ab742-762">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-762">**Steps**</span></span> | <span data-ttu-id="ab742-763">Usare credenziali di autenticazione per dispositivo tramite token di firma di accesso condiviso basati sulla chiave del dispositivo o sul certificato client, anziché criteri di accesso condiviso a livello di hub IoT.</span><span class="sxs-lookup"><span data-stu-id="ab742-763">Use per device authentication credentials using SaS tokens based on Device key or Client Certificate, instead of IoT Hub-level shared access policies.</span></span> <span data-ttu-id="ab742-764">Questo permette di prevenire il riutilizzo dei token di autenticazione di un dispositivo o di un gateway sul campo da parte di altri.</span><span class="sxs-lookup"><span data-stu-id="ab742-764">This prevents the reuse of authentication tokens of one device or field gateway by another</span></span> |

## <span data-ttu-id="ab742-765"><a id="req-containers-anon"></a>Assicurarsi che l'accesso in lettura anonimo venga concesso solo ai contenitori e ai BLOB necessari</span><span class="sxs-lookup"><span data-stu-id="ab742-765"><a id="req-containers-anon"></a>Ensure that only the required containers and blobs are given anonymous read access</span></span>

| <span data-ttu-id="ab742-766">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-766">Title</span></span>                   | <span data-ttu-id="ab742-767">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-767">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-768">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-768">**Component**</span></span>               | <span data-ttu-id="ab742-769">Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-769">Azure Storage</span></span> | 
| <span data-ttu-id="ab742-770">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-770">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-771">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-771">Build</span></span> |  
| <span data-ttu-id="ab742-772">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-772">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-773">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-773">Generic</span></span> |
| <span data-ttu-id="ab742-774">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-774">**Attributes**</span></span>              | <span data-ttu-id="ab742-775">Tipo di archiviazione: BLOB</span><span class="sxs-lookup"><span data-stu-id="ab742-775">StorageType - Blob</span></span> |
| <span data-ttu-id="ab742-776">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-776">**References**</span></span>              | <span data-ttu-id="ab742-777">[Gestire l'accesso in lettura anonimo a contenitori e BLOB](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/), [Firme di accesso condiviso, parte 1: informazioni sul modello di firma di accesso condiviso](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/)</span><span class="sxs-lookup"><span data-stu-id="ab742-777">[Manage anonymous read access to containers and blobs](https://azure.microsoft.com/documentation/articles/storage-manage-access-to-resources/), [Shared Access Signatures, Part 1: Understanding the SAS model](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/)</span></span> |
| <span data-ttu-id="ab742-778">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-778">**Steps**</span></span> | <p><span data-ttu-id="ab742-779">Per impostazione predefinita, solo il proprietario dell'account di archiviazione può accedere a un contenitore e ai BLOB in esso contenuti.</span><span class="sxs-lookup"><span data-stu-id="ab742-779">By default, a container and any blobs within it may be accessed only by the owner of the storage account.</span></span> <span data-ttu-id="ab742-780">Per concedere a utenti anonimi autorizzazioni di lettura per un contenitore e i relativi BLOB, è possibile impostare le autorizzazioni del contenitore per consentire l'accesso pubblico.</span><span class="sxs-lookup"><span data-stu-id="ab742-780">To give anonymous users read permissions to a container and its blobs, one can set the container permissions to allow public access.</span></span> <span data-ttu-id="ab742-781">Gli utenti anonimi possono leggere i BLOB presenti in un contenitore accessibile pubblicamente senza effettuare l'autenticazione della richiesta.</span><span class="sxs-lookup"><span data-stu-id="ab742-781">Anonymous users can read blobs within a publicly accessible container without authenticating the request.</span></span></p><p><span data-ttu-id="ab742-782">I contenitori forniscono le seguenti opzioni per la gestione dell'accesso al contenitore:</span><span class="sxs-lookup"><span data-stu-id="ab742-782">Containers provide the following options for managing container access:</span></span></p><ul><li><span data-ttu-id="ab742-783">Accesso in lettura pubblico completo: i dati del BLOB e del contenitore possono essere letti tramite richiesta anonima.</span><span class="sxs-lookup"><span data-stu-id="ab742-783">Full public read access: Container and blob data can be read via anonymous request.</span></span> <span data-ttu-id="ab742-784">I client possono enumerare i BLOB all'interno del contenitore tramite richiesta anonima, ma non sono in grado di enumerare i contenitori all'interno dell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ab742-784">Clients can enumerate blobs within the container via anonymous request, but cannot enumerate containers within the storage account.</span></span></li><li><span data-ttu-id="ab742-785">Accesso in lettura pubblico solo per i BLOB: i dati del BLOB all'interno del contenitore possono essere letti tramite richiesta anonima, ma i dati del contenitore non sono disponibili.</span><span class="sxs-lookup"><span data-stu-id="ab742-785">Public read access for blobs only: Blob data within this container can be read via anonymous request, but container data is not available.</span></span> <span data-ttu-id="ab742-786">I client non possono enumerare i BLOB all'interno del contenitore tramite richiesta anonima.</span><span class="sxs-lookup"><span data-stu-id="ab742-786">Clients cannot enumerate blobs within the container via anonymous request</span></span></li><li><span data-ttu-id="ab742-787">Nessun accesso in lettura pubblico: i dati del BLOB e del contenitore possono essere letti solo dal proprietario dell'account.</span><span class="sxs-lookup"><span data-stu-id="ab742-787">No public read access: Container and blob data can be read by the account owner only</span></span></li></ul><p><span data-ttu-id="ab742-788">L'accesso anonimo è ideale per scenari in cui alcuni BLOB devono essere sempre disponibili per l'accesso in lettura anonimo.</span><span class="sxs-lookup"><span data-stu-id="ab742-788">Anonymous access is best for scenarios where certain blobs should always be available for anonymous read access.</span></span> <span data-ttu-id="ab742-789">Per un controllo più capillare, è possibile creare una firma di accesso condiviso, che permette di delegare l'accesso limitato con autorizzazioni diverse e per un intervallo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="ab742-789">For finer-grained control, one can create a shared access signature, which enables to delegate restricted access using different permissions and over a specified time interval.</span></span> <span data-ttu-id="ab742-790">Assicurarsi che non venga assegnato per errore l'accesso anonimo a contenitori e BLOB, che possono contenere dati sensibili.</span><span class="sxs-lookup"><span data-stu-id="ab742-790">Ensure that containers and blobs, which may potentially contain sensitive data, are not given anonymous access accidentally</span></span></p>|

## <span data-ttu-id="ab742-791"><a id="limited-access-sas"></a>Concedere l'accesso limitato agli oggetti in Archiviazione di Azure tramite la firma di accesso condiviso o criteri di accesso archiviati</span><span class="sxs-lookup"><span data-stu-id="ab742-791"><a id="limited-access-sas"></a>Grant limited access to objects in Azure storage using SAS or SAP</span></span>

| <span data-ttu-id="ab742-792">Titolo</span><span class="sxs-lookup"><span data-stu-id="ab742-792">Title</span></span>                   | <span data-ttu-id="ab742-793">Dettagli</span><span class="sxs-lookup"><span data-stu-id="ab742-793">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="ab742-794">**Componente**</span><span class="sxs-lookup"><span data-stu-id="ab742-794">**Component**</span></span>               | <span data-ttu-id="ab742-795">Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="ab742-795">Azure Storage</span></span> | 
| <span data-ttu-id="ab742-796">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="ab742-796">**SDL Phase**</span></span>               | <span data-ttu-id="ab742-797">Compilare</span><span class="sxs-lookup"><span data-stu-id="ab742-797">Build</span></span> |  
| <span data-ttu-id="ab742-798">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="ab742-798">**Applicable Technologies**</span></span> | <span data-ttu-id="ab742-799">Generico</span><span class="sxs-lookup"><span data-stu-id="ab742-799">Generic</span></span> |
| <span data-ttu-id="ab742-800">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="ab742-800">**Attributes**</span></span>              | <span data-ttu-id="ab742-801">N/D</span><span class="sxs-lookup"><span data-stu-id="ab742-801">N/A</span></span> |
| <span data-ttu-id="ab742-802">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="ab742-802">**References**</span></span>              | <span data-ttu-id="ab742-803">[Firme di accesso condiviso, parte 1: informazioni sul modello di firma di accesso condiviso](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/), [Firme di accesso condiviso, parte 2: creare e usare una firma di accesso condiviso con l'archivio BLOB](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-2/), [Come delegare l'accesso agli oggetti nell'account usando firme di accesso condiviso e criteri di accesso archiviati](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies)</span><span class="sxs-lookup"><span data-stu-id="ab742-803">[Shared Access Signatures, Part 1: Understanding the SAS model](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-1/), [Shared Access Signatures, Part 2: Create and use a SAS with Blob storage](https://azure.microsoft.com/documentation/articles/storage-dotnet-shared-access-signature-part-2/), [How to delegate access to objects in your account using Shared Access Signatures and Stored Access Policies](https://azure.microsoft.com/documentation/articles/storage-security-guide/#_how-to-delegate-access-to-objects-in-your-account-using-shared-access-signatures-and-stored-access-policies)</span></span> |
| <span data-ttu-id="ab742-804">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="ab742-804">**Steps**</span></span> | <p><span data-ttu-id="ab742-805">La firma di accesso condiviso è uno strumento efficace per concedere ad altri client un accesso limitato agli oggetti nell'account di archiviazione, senza dover esporre la chiave di accesso dell'account.</span><span class="sxs-lookup"><span data-stu-id="ab742-805">Using a shared access signature (SAS) is a powerful way to grant limited access to objects in a storage account to other clients, without having to expose account access key.</span></span> <span data-ttu-id="ab742-806">La firma di accesso condiviso è un URI che racchiude nei parametri di query tutte le informazioni necessarie per l'accesso autenticato a una risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ab742-806">The SAS is a URI that encompasses in its query parameters all of the information necessary for authenticated access to a storage resource.</span></span> <span data-ttu-id="ab742-807">Per accedere alle risorse di archiviazione con la firma di accesso condiviso, il client deve solo passare la firma al costruttore o al metodo appropriato.</span><span class="sxs-lookup"><span data-stu-id="ab742-807">To access storage resources with the SAS, the client only needs to pass in the SAS to the appropriate constructor or method.</span></span></p><p><span data-ttu-id="ab742-808">È possibile usare una firma di accesso condiviso quando si desidera fornire l'accesso alle risorse dell'account di archiviazione a un client al quale non si desidera fornire la chiave dell'account.</span><span class="sxs-lookup"><span data-stu-id="ab742-808">You can use a SAS when you want to provide access to resources in your storage account to a client that can't be trusted with the account key.</span></span> <span data-ttu-id="ab742-809">Le chiavi dell'account di archiviazione includono una chiave primaria e una chiave secondaria, che garantiscono entrambi accesso amministrativo all'account e a tutte le risorse in esso presenti.</span><span class="sxs-lookup"><span data-stu-id="ab742-809">Your storage account keys include both a primary and secondary key, both of which grant administrative access to your account and all of the resources in it.</span></span> <span data-ttu-id="ab742-810">Se si espone una delle chiavi dell'account, è possibile che l'account venga utilizzato in modo dannoso o non appropriato.</span><span class="sxs-lookup"><span data-stu-id="ab742-810">Exposing either of your account keys opens your account to the possibility of malicious or negligent use.</span></span> <span data-ttu-id="ab742-811">Le firme di accesso condiviso costituiscono un'alternativa sicura per consentire ad altri client di leggere, scrivere ed eliminare dati nell'account di archiviazione sulla base delle autorizzazioni concesse e senza richiedere la chiave dell'account.</span><span class="sxs-lookup"><span data-stu-id="ab742-811">Shared access signatures provide a safe alternative that allows other clients to read, write, and delete data in your storage account according to the permissions you've granted, and without need for the account key.</span></span></p><p><span data-ttu-id="ab742-812">Se è disponibile un set logico di parametri simili ogni volta, è preferibile usare i criteri di accesso archiviati.</span><span class="sxs-lookup"><span data-stu-id="ab742-812">If you have a logical set of parameters that are similar each time, using a Stored Access Policy (SAP) is a better idea.</span></span> <span data-ttu-id="ab742-813">Poiché l'uso di una firma di accesso condiviso derivata da criteri di accesso archiviati offre la possibilità di revocare immediatamente la firma di accesso condiviso, è consigliabile usare sempre i criteri di accesso archiviati, quando possibile.</span><span class="sxs-lookup"><span data-stu-id="ab742-813">Because using a SAS derived from a Stored Access Policy gives you the ability to revoke that SAS immediately, it is the recommended best practice to always use Stored Access Policies when possible.</span></span></p>|