---
title: "Considerazioni sulla progettazione per i set di scalabilità di macchine virtuali di Azure | Microsoft Docs"
description: "Considerazioni sulla progettazione per i set di scalabilità di macchine virtuali di Azure"
keywords: "macchina virtuale linux,set di scalabilità macchine virtuali"
services: virtual-machine-scale-sets
documentationcenter: 
author: gatneil
manager: madhana
editor: tysonn
tags: azure-resource-manager
ms.assetid: c27c6a59-a0ab-4117-a01b-42b049464ca1
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/01/2017
ms.author: negat
ms.openlocfilehash: 6dbd4f22e3e949e19565030f5a10f545b89a0a3c
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="design-considerations-for-scale-sets"></a><span data-ttu-id="16069-104">Considerazioni sulla progettazione per i set di scalabilità</span><span class="sxs-lookup"><span data-stu-id="16069-104">Design Considerations For Scale Sets</span></span>
<span data-ttu-id="16069-105">Questo argomento descrive una serie di considerazioni di progettazione per i set di scalabilità di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="16069-105">This topic discusses design considerations for Virtual Machine Scale Sets.</span></span> <span data-ttu-id="16069-106">Per sapere che cosa sono i set di scalabilità di macchine virtuali, vedere [Panoramica dei set di scalabilità di macchine virtuali](virtual-machine-scale-sets-overview.md).</span><span class="sxs-lookup"><span data-stu-id="16069-106">For information about what Virtual Machine Scale Sets are, refer to [Virtual Machine Scale Sets Overview](virtual-machine-scale-sets-overview.md).</span></span>

## <a name="when-to-use-scale-sets-instead-of-virtual-machines"></a><span data-ttu-id="16069-107">Quando usare i set di scalabilità invece delle macchine virtuali?</span><span class="sxs-lookup"><span data-stu-id="16069-107">When to use scale sets instead of virtual machines?</span></span>
<span data-ttu-id="16069-108">I set di scalabilità sono in genere utili per distribuire un'infrastruttura a disponibilità elevata che include un set di computer con una configurazione simile.</span><span class="sxs-lookup"><span data-stu-id="16069-108">Generally, scale sets are useful for deploying highly available infrastructure where a set of machines have similar configuration.</span></span> <span data-ttu-id="16069-109">Tuttavia, alcune funzionalità sono disponibili soltanto nei set di scalabilità, mentre altre sono disponibili solo nelle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="16069-109">However, some features are only available in scale sets while other features are only available in VMs.</span></span> <span data-ttu-id="16069-110">Per prendere una decisione consapevole su quando usare ogni tecnologia, è consigliabile esaminare prima alcune delle funzionalità di uso comune disponibili nei set di scalabilità ma non nelle macchine virtuali:</span><span class="sxs-lookup"><span data-stu-id="16069-110">In order to make an informed decision about when to use each technology, we should first take a look at some of the commonly used features that are available in scale sets but not VMs:</span></span>

### <a name="scale-set-specific-features"></a><span data-ttu-id="16069-111">Funzionalità specifiche dei set di scalabilità</span><span class="sxs-lookup"><span data-stu-id="16069-111">Scale set-specific features</span></span>

- <span data-ttu-id="16069-112">Dopo aver specificato la configurazione di un set di scalabilità, è possibile aggiornare semplicemente la proprietà "capacity" per distribuire in parallelo altre macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="16069-112">Once you specify the scale set configuration, you can simply update the "capacity" property to deploy more VMs in parallel.</span></span> <span data-ttu-id="16069-113">Si tratta di una procedura molto più semplice rispetto alla scrittura di uno script per orchestrare la distribuzione in parallelo di molte macchine virtuali singole.</span><span class="sxs-lookup"><span data-stu-id="16069-113">This is much simpler than writing a script to orchestrate deploying many individual VMs in parallel.</span></span>
- <span data-ttu-id="16069-114">È possibile [usare il ridimensionamento automatico di Azure per la scalabilità automatica di un set di scalabilità](./virtual-machine-scale-sets-autoscale-overview.md) ma non di singole macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="16069-114">You can [use Azure Autoscale to automatically scale a scale set](./virtual-machine-scale-sets-autoscale-overview.md) but not individual VMs.</span></span>
- <span data-ttu-id="16069-115">È possibile [ricreare l'immagine delle macchine virtuali del set di scalabilità](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) ma [non delle singole macchine virtuali](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span><span class="sxs-lookup"><span data-stu-id="16069-115">You can [reimage scale set VMs](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) but [not individual VMs](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span></span>
- <span data-ttu-id="16069-116">È possibile [eseguire il provisioning eccessivo](./virtual-machine-scale-sets-design-overview.md) delle macchine virtuali del set di scalabilità per una maggiore affidabilità e tempi di distribuzione più rapidi.</span><span class="sxs-lookup"><span data-stu-id="16069-116">You can [overprovision](./virtual-machine-scale-sets-design-overview.md) scale set VMs for increased reliability and quicker deployment times.</span></span> <span data-ttu-id="16069-117">Ciò non è possibile con le singole macchine virtuali, a meno che non si scriva un apposito codice personalizzato.</span><span class="sxs-lookup"><span data-stu-id="16069-117">You cannot do this with individual VMs unless you write custom code to do this.</span></span>
- <span data-ttu-id="16069-118">È possibile specificare [criteri di aggiornamento](./virtual-machine-scale-sets-upgrade-scale-set.md) per semplificare l'implementazione degli aggiornamenti nelle macchine virtuali del set di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="16069-118">You can specify an [upgrade policy](./virtual-machine-scale-sets-upgrade-scale-set.md) to make it easy to roll out upgrades across VMs in your scale set.</span></span> <span data-ttu-id="16069-119">Con le singole macchine virtuali, è necessario orchestrare gli aggiornamenti manualmente.</span><span class="sxs-lookup"><span data-stu-id="16069-119">With individual VMs, you must orchestrate updates yourself.</span></span>

### <a name="vm-specific-features"></a><span data-ttu-id="16069-120">Funzionalità specifiche delle macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="16069-120">VM-specific features</span></span>

<span data-ttu-id="16069-121">D'altra parte, alcune funzionalità sono disponibili solo nelle macchine virtuali (almeno per il momento):</span><span class="sxs-lookup"><span data-stu-id="16069-121">On the other hand, some features are only available in VMs (at least for the time being):</span></span>

- <span data-ttu-id="16069-122">È possibile collegare dischi dati a singole macchine virtuali specifiche, mentre in un set di scalabilità i dischi dati collegati vengono configurati per tutte le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="16069-122">You can attach data disks to specific individual VMs, but attached data disks are configured for all VMs in a scale set.</span></span>
- <span data-ttu-id="16069-123">È possibile collegare dischi dati non vuoti alle singole macchine virtuali, ma non alle macchine virtuali in un set di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="16069-123">You can attach non-empty data disks to individual VMs but not VMs in a scale set.</span></span>
- <span data-ttu-id="16069-124">È possibile acquisire uno snapshot di una singola macchina virtuale, ma non di una macchina virtuale in un set di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="16069-124">You can snapshot an individual VM but not a VM in a scale set.</span></span>
- <span data-ttu-id="16069-125">È possibile acquisire un'immagine da una singola macchina virtuale, ma non da una macchina virtuale in un set di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="16069-125">You can capture an image from an individual VM but not from a VM in a scale set.</span></span>
- <span data-ttu-id="16069-126">È possibile eseguire la migrazione di una singola macchina virtuale da dischi nativi a dischi gestiti, ma la stessa operazione non può essere eseguita per le macchine virtuali in un set di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="16069-126">You can migrate an individual VM from native disks to managed disks, but you cannot do this for VMs in a scale set.</span></span>
- <span data-ttu-id="16069-127">È possibile assegnare indirizzi IP pubblici IPv6 alle schede di interfaccia di rete di singole macchine virtuali, ma la stessa operazione non può essere eseguita per le macchine virtuali in un set di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="16069-127">You can assign IPv6 public IP addresses to individual VM nics but cannot do so for VMs in a scale set.</span></span> <span data-ttu-id="16069-128">Si noti che è possibile assegnare indirizzi IP pubblici IPv6 ai servizi di bilanciamento del carico che si trovano davanti a singole macchine virtuali o a quelle di un set di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="16069-128">Note that you can assign IPv6 public IP addresses to load balancers in front of either individual VMs or scale set VMs.</span></span>

## <a name="storage"></a><span data-ttu-id="16069-129">Archiviazione</span><span class="sxs-lookup"><span data-stu-id="16069-129">Storage</span></span>

### <a name="scale-sets-with-azure-managed-disks"></a><span data-ttu-id="16069-130">Set di scalabilità con Azure Managed Disks</span><span class="sxs-lookup"><span data-stu-id="16069-130">Scale sets with Azure Managed Disks</span></span>
<span data-ttu-id="16069-131">Invece che con i tradizionali account di archiviazione di Azure, i set di scalabilità possono essere creati con [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="16069-131">Scale sets can be created with [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md) instead of traditional Azure storage accounts.</span></span> <span data-ttu-id="16069-132">Managed Disks offre i seguenti vantaggi:</span><span class="sxs-lookup"><span data-stu-id="16069-132">Managed Disks provide the following benefits:</span></span>
- <span data-ttu-id="16069-133">Non è necessario creare in precedenza un set di account di archiviazione di Azure per le macchine virtuali con set di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="16069-133">You do not have to pre-create a set of Azure storage accounts for the scale set VMs.</span></span>
- <span data-ttu-id="16069-134">È possibile definire [i dischi dati collegati](virtual-machine-scale-sets-attached-disks.md) per le macchine virtuali nel set di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="16069-134">You can define [attached data disks](virtual-machine-scale-sets-attached-disks.md) for the VMs in your scale set.</span></span>
- <span data-ttu-id="16069-135">È possibile configurare i set di scalabilità per un [supporto di massimo 1.000 macchine virtuali per set](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="16069-135">Scale sets can be configured to [support up to 1,000 VMs in a set](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="16069-136">Se si ha un modello esistente, è anche possibile [aggiornare il modello per l'uso di Managed Disks](virtual-machine-scale-sets-convert-template-to-md.md).</span><span class="sxs-lookup"><span data-stu-id="16069-136">If you have an existing template, you can also [update the template to use Managed Disks](virtual-machine-scale-sets-convert-template-to-md.md).</span></span>

### <a name="user-managed-storage"></a><span data-ttu-id="16069-137">Archiviazione gestita dall'utente</span><span class="sxs-lookup"><span data-stu-id="16069-137">User-managed Storage</span></span>
<span data-ttu-id="16069-138">Un set di scalabilità non definito con Azure Managed Disks si basa sugli account di archiviazione creati dall'utente per archiviare i dischi del sistema operativo delle macchine virtuali nel set.</span><span class="sxs-lookup"><span data-stu-id="16069-138">A scale set that is not defined with Azure Managed Disks relies on user-created storage accounts to store the OS disks of the VMs in the set.</span></span> <span data-ttu-id="16069-139">È consigliabile un rapporto di 20 o meno macchine virtuali per ogni account di archiviazione per ottenere il massimo IO e per sfruttare i vantaggi del _provisioning in eccesso_ (vedere di seguito).</span><span class="sxs-lookup"><span data-stu-id="16069-139">A ratio of 20 VMs per storage account or less is recommended to achieve maximum IO and also take advantage of _overprovisioning_ (see below).</span></span> <span data-ttu-id="16069-140">È anche consigliabile usare le diverse lettere dell'alfabeto come caratteri iniziali dei nomi degli account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="16069-140">It is also recommended that you spread the beginning characters of the storage account names across the alphabet.</span></span> <span data-ttu-id="16069-141">Questo consente di suddividere il carico tra diversi sistemi interni.</span><span class="sxs-lookup"><span data-stu-id="16069-141">Doing so helps spread load across different internal systems.</span></span> 


## <a name="overprovisioning"></a><span data-ttu-id="16069-142">Provisioning eccessivo</span><span class="sxs-lookup"><span data-stu-id="16069-142">Overprovisioning</span></span>
<span data-ttu-id="16069-143">L'impostazione predefinita per i set di scalabilità è attualmente il "provisioning eccessivo" di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="16069-143">Scale sets currently default to "overprovisioning" VMs.</span></span> <span data-ttu-id="16069-144">Con il provisioning eccessivo attivato, il set di scalabilità di fatto avvia un maggior numero di macchine virtuali rispetto a quanto richiesto, dopodiché elimina le macchine virtuali aggiuntive una volta eseguito correttamente il provisioning del numero di macchine virtuali richiesto.</span><span class="sxs-lookup"><span data-stu-id="16069-144">With overprovisioning turned on, the scale set actually spins up more VMs than you asked for, then deletes the extra VMs once the requested number of VMs are successfully provisioned.</span></span> <span data-ttu-id="16069-145">Il provisioning eccessivo migliora le percentuali di riuscita del provisioning e riduce i tempi di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="16069-145">Overprovisioning improves provisioning success rates and reduces deployment time.</span></span> <span data-ttu-id="16069-146">Le macchine virtuali aggiuntive non vengono addebitate all'utente e non se ne tiene conto per il raggiungimento dei limiti di quota.</span><span class="sxs-lookup"><span data-stu-id="16069-146">You are not billed for the extra VMs, and they do not count toward your quota limits.</span></span>

<span data-ttu-id="16069-147">Il provisioning eccessivo consente di migliorare la percentuale di riuscita del provisioning, ma può causare il comportamento confuso delle applicazioni non progettate per gestire VM aggiuntive che compaiono e scompaiono senza preavviso.</span><span class="sxs-lookup"><span data-stu-id="16069-147">While overprovisioning does improve provisioning success rates, it can cause confusing behavior for an application that is not designed to handle extra VMs appearing and then disappearing.</span></span> <span data-ttu-id="16069-148">Per disattivare il provisioning eccessivo, assicurarsi che il modello includa la stringa seguente: `"overprovision": "false"`.</span><span class="sxs-lookup"><span data-stu-id="16069-148">To turn overprovisioning off, ensure you have the following string in your template: `"overprovision": "false"`.</span></span> <span data-ttu-id="16069-149">Per altre informazioni, consultare la [documentazione dell'API REST relativa ai set di scalabilità](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span><span class="sxs-lookup"><span data-stu-id="16069-149">More details can be found in the [Scale Set REST API documentation](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span></span>

<span data-ttu-id="16069-150">Se il set di scalabilità usa l'archiviazione gestita dall'utente e se si disattiva il provisioning in eccesso, è possibile disporre di più di 20 macchine virtuali per account di archiviazione. Tuttavia, non è consigliabile superare le 40 macchine virtuali per ragioni di prestazioni I/O.</span><span class="sxs-lookup"><span data-stu-id="16069-150">If your scale set uses user-managed storage, and you turn off overprovisioning, you can have more than 20 VMs per storage account, but it is not recommended to go above 40 for IO performance reasons.</span></span> 

## <a name="limits"></a><span data-ttu-id="16069-151">Limiti</span><span class="sxs-lookup"><span data-stu-id="16069-151">Limits</span></span>
<span data-ttu-id="16069-152">Un set di scalabilità basato su un'immagine Marketplace (chiamata anche immagine di piattaforma) e configurato per usare Azure Managed Disks supporta una capacità massima di 1.000 macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="16069-152">A scale set built on a Marketplace image (also known as a platform image) and configured to use Azure Managed Disks supports a capacity of up to 1,000 VMs.</span></span> <span data-ttu-id="16069-153">Se si configura il set di scalabilità per supportare più di 100 macchine virtuali, non tutti gli scenari funzioneranno allo stesso modo, ad esempio il bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="16069-153">If you configure your scale set to support more than 100 VMs, not all scenarios work the same (for example load balancing).</span></span> <span data-ttu-id="16069-154">Per altre informazioni, vedere [Uso di set di scalabilità di macchine virtuali di grandi dimensioni](virtual-machine-scale-sets-placement-groups.md).</span><span class="sxs-lookup"><span data-stu-id="16069-154">For more information, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="16069-155">Un set di scalabilità configurato con account di archiviazione gestita dall'utente ha un limite corrente di 100 macchine virtuali. Per questa scalabilità sono consigliati 5 account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="16069-155">A scale set configured with user-managed storage accounts is currently limited to 100 VMs (and 5 storage accounts are recommended for this scale).</span></span>

<span data-ttu-id="16069-156">Un set di scalabilità basato su un'immagine personalizzata (creata dall'utente) può avere una capacità massima di 100 macchine virtuali quando configurato con Azure Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="16069-156">A scale set built on a custom image (one built by you) can have a capacity of up to 100 VMs when configured with Azure Managed disks.</span></span> <span data-ttu-id="16069-157">Se il set di scalabilità è configurato con gli account di archiviazione gestita dall'utente, è necessario creare tutti i dischi rigidi virtuali del disco del sistema operativo all'interno di un unico account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="16069-157">If the scale set is configured with user-managed storage accounts, it must create all OS disk VHDs within one storage account.</span></span> <span data-ttu-id="16069-158">Di conseguenza, il numero massimo consigliato di VM in un set di scalabilità basato su un'immagine personalizzata e su un'archiviazione gestita dall'utente è 20.</span><span class="sxs-lookup"><span data-stu-id="16069-158">As a result, the maximum recommended number of VMs in a scale set built on a custom image and user-managed storage is 20.</span></span> <span data-ttu-id="16069-159">Se si disattiva il provisioning eccessivo, è possibile arrivare a 40.</span><span class="sxs-lookup"><span data-stu-id="16069-159">If you turn off overprovisioning, you can go up to 40.</span></span>

<span data-ttu-id="16069-160">Per un numero di macchine virtuali superiore a tali limiti, è necessario distribuire più set di scalabilità, come indicato in [questo modello](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span><span class="sxs-lookup"><span data-stu-id="16069-160">For more VMs than these limits allow, you need to deploy multiple scale sets as shown in [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span></span>

