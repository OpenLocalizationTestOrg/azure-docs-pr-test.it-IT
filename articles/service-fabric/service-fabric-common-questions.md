---
title: Domande frequenti su Microsoft Azure Service Fabric | Microsoft Docs
description: Domande frequenti su Service Fabric e relative risposte
services: service-fabric
documentationcenter: .net
author: chackdan
manager: timlt
editor: 
ms.assetid: 5a179703-ff0c-4b8e-98cd-377253295d12
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/18/2017
ms.author: chackdan
ms.openlocfilehash: ee1fe4e83ce796fd50b779c0880701b9dfcefff7
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="commonly-asked-service-fabric-questions"></a><span data-ttu-id="96438-103">Domande frequenti su Service Fabric</span><span class="sxs-lookup"><span data-stu-id="96438-103">Commonly asked Service Fabric questions</span></span>

<span data-ttu-id="96438-104">Esistono molte domande frequenti sulle caratteristiche e sulle modalità di uso di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="96438-104">There are many commonly asked questions about what Service Fabric can do and how it should be used.</span></span> <span data-ttu-id="96438-105">In questo documento vengono illustrate molte di queste domande comuni e le relative risposte.</span><span class="sxs-lookup"><span data-stu-id="96438-105">This document covers many of those common questions and their answers.</span></span>

## <a name="cluster-setup-and-management"></a><span data-ttu-id="96438-106">Configurazione e gestione del cluster</span><span class="sxs-lookup"><span data-stu-id="96438-106">Cluster setup and management</span></span>

### <a name="can-i-create-a-cluster-that-spans-multiple-azure-regions-or-my-own-datacenters"></a><span data-ttu-id="96438-107">È possibile creare un cluster che si estenda a più aree di Azure o ai miei data center?</span><span class="sxs-lookup"><span data-stu-id="96438-107">Can I create a cluster that spans multiple Azure regions or my own datacenters?</span></span>

<span data-ttu-id="96438-108">Sì.</span><span class="sxs-lookup"><span data-stu-id="96438-108">Yes.</span></span> 

<span data-ttu-id="96438-109">La tecnologia di clustering principale di Service Fabric può essere usata per unire macchine in esecuzione in tutto il mondo, purché dispongano di connettività di rete l'una con l'altra.</span><span class="sxs-lookup"><span data-stu-id="96438-109">The core Service Fabric clustering technology can be used to combine machines running anywhere in the world, so long as they have network connectivity to each other.</span></span> <span data-ttu-id="96438-110">La compilazione e l'esecuzione di questo tipo di cluster possono essere tuttavia complicate.</span><span class="sxs-lookup"><span data-stu-id="96438-110">However, building and running such a cluster can be complicated.</span></span>

<span data-ttu-id="96438-111">Se si è interessati a questo scenario, invitiamo a contattarci tramite [Service Fabric Github Issues List](https://github.com/azure/service-fabric-issues) o tramite il supporto tecnico per ottenere altro materiale sussidiario.</span><span class="sxs-lookup"><span data-stu-id="96438-111">If you are interested in this scenario, we encourage you to get in contact either through the [Service Fabric Github Issues List](https://github.com/azure/service-fabric-issues) or through your support representative in order to obtain additional guidance.</span></span> <span data-ttu-id="96438-112">Il team di Service Fabric sta lavorando per fornire ulteriori informazioni, materiale sussidiario e consigli per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="96438-112">The Service Fabric team is working to provide additional clarity, guidance, and recommendations for this scenario.</span></span> 

<span data-ttu-id="96438-113">Alcuni aspetti da considerare:</span><span class="sxs-lookup"><span data-stu-id="96438-113">Some things to consider:</span></span> 

1. <span data-ttu-id="96438-114">La risorsa cluster di Service Fabric in Azure è ora divisa in aree, così come i set di scalabilità di macchine virtuali su cui viene creato il cluster.</span><span class="sxs-lookup"><span data-stu-id="96438-114">The Service Fabric cluster resource in Azure is regional today, as are the virtual machine scale sets that the cluster is built on.</span></span> <span data-ttu-id="96438-115">Ciò significa che in caso di malfunzionamento di un'area si potrebbe perdere la possibilità di gestire il cluster tramite Azure Resource Manager o il Portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="96438-115">This means that in the event of a regional failure you may lose the ability to manage the cluster via the Azure Resource Manager or the Azure Portal.</span></span> <span data-ttu-id="96438-116">Questa situazione può verificarsi anche se il cluster resta in esecuzione ed è possibile interagire direttamente con esso.</span><span class="sxs-lookup"><span data-stu-id="96438-116">This can happen even though the cluster remains running and you'd be able to interact with it directly.</span></span> <span data-ttu-id="96438-117">Azure inoltre attualmente non offre la possibilità di disporre di una singola rete virtuale che può essere usata tra le aree.</span><span class="sxs-lookup"><span data-stu-id="96438-117">In addition, Azure today does not offer the ability to have a single virtual network that is usable across regions.</span></span> <span data-ttu-id="96438-118">Ciò significa che un cluster con più aree in Azure richiede [indirizzi IP pubblici per ogni macchina virtuale nei set di scalabilità di macchine virtuali di Microsoft Azure](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine) o [gateway VPN di Azure](../vpn-gateway/vpn-gateway-about-vpngateways.md).</span><span class="sxs-lookup"><span data-stu-id="96438-118">This means that a multi-region cluster in Azure requires either [Public IP Addresses for each VM in the VM Scale Sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine) or [Azure VPN Gateways](../vpn-gateway/vpn-gateway-about-vpngateways.md).</span></span> <span data-ttu-id="96438-119">Queste opzioni di rete hanno effetti diversi sui costi, sulle prestazioni e su alcuni livelli di progettazione di applicazioni. È richiesta un'attenta analisi e una pianificazione prima di affrontare un ambiente di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="96438-119">These networking choices have different impacts on costs, performance, and to some degree application design, so careful analysis and planning is required before standing up such an environment.</span></span>
2. <span data-ttu-id="96438-120">La manutenzione, gestione e monitoraggio di tali computer possono diventare complicati, soprattutto quando estesi su _tipi_ di ambienti, ad esempio tra provider di cloud diversi o tra risorse locali e Azure.</span><span class="sxs-lookup"><span data-stu-id="96438-120">The maintenance, management, and monitoring of these machines can become complicated, especially when spanned across _types_ of environments, such as between different cloud providers or between on-premises resources and Azure.</span></span> <span data-ttu-id="96438-121">È necessario determinare accuratamente gli aggiornamenti, il monitoraggio, la gestione e la diagnostica per il cluster e le applicazioni prima di eseguire i carichi di lavoro di produzione in tale ambiente.</span><span class="sxs-lookup"><span data-stu-id="96438-121">Care must be taken to ensure that upgrades, monitoring, management, and diagnostics are understood for both the cluster and the applications before running production workloads in such an environment.</span></span> <span data-ttu-id="96438-122">Se si ha già grande esperienza di risoluzione di questi problemi in Azure o nei propri Data center, è possibile che si possano applicare queste stesse soluzioni durante la compilazione o l'esecuzione del cluster di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="96438-122">If you already have lots of experience solving these problems in Azure or within your own datacenters, then it is likely that those same solutions can be applied when building out or running your Service Fabric cluster.</span></span> 

### <a name="do-service-fabric-nodes-automatically-receive-os-updates"></a><span data-ttu-id="96438-123">I nodi di Service Fabric ricevono automaticamente aggiornamenti del sistema operativo?</span><span class="sxs-lookup"><span data-stu-id="96438-123">Do Service Fabric nodes automatically receive OS updates?</span></span>

<span data-ttu-id="96438-124">Non ancora, ma si tratta di una richiesta comune che Azure intende implementare in futuro.</span><span class="sxs-lookup"><span data-stu-id="96438-124">Not today, but this is also a common request that Azure intends to deliver.</span></span>

<span data-ttu-id="96438-125">Nel frattempo, abbiamo [fornito un'applicazione](service-fabric-patch-orchestration-application.md) attraverso la quale i sistemi operativi sottostanti ai nodi di Service Fabric ricevono patch e sono aggiornati.</span><span class="sxs-lookup"><span data-stu-id="96438-125">In the interim, we have [provided an application](service-fabric-patch-orchestration-application.md) that the operating systems underneath your Service Fabric nodes stay patched and up to date.</span></span>

<span data-ttu-id="96438-126">Il problema con gli aggiornamenti del sistema operativo è che solitamente richiedono un riavvio della macchina, causando così una perdita temporanea di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="96438-126">The challenge with OS updates is that they typically require a reboot of the machine, which results in temporary availability loss.</span></span> <span data-ttu-id="96438-127">Di per sé non sarebbe un problema, poiché Service Fabric reindirizzerà automaticamente verso altri nodi il traffico di tali servizi.</span><span class="sxs-lookup"><span data-stu-id="96438-127">By itself, that is not a problem, since Service Fabric will automatically redirect traffic for those services to other nodes.</span></span> <span data-ttu-id="96438-128">Tuttavia, se gli aggiornamenti del sistema operativo non vengono coordinati all'interno del cluster, esiste il rischio di interruzione simultanea per parecchi nodi.</span><span class="sxs-lookup"><span data-stu-id="96438-128">However, if OS updates are not coordinated across the cluster, there is the potential that many nodes go down at once.</span></span> <span data-ttu-id="96438-129">Tali riavvii simultanei possono causare la perdita totale di disponibilità per un servizio o, perlomeno, per una partizione specifica (per un servizio con stato).</span><span class="sxs-lookup"><span data-stu-id="96438-129">Such simultaneous reboots can cause complete availability loss for a service, or at least for a specific partition (for a stateful service).</span></span>

<span data-ttu-id="96438-130">In futuro Microsoft intende supportare un criterio di aggiornamento del sistema operativo completamente automatico e coordinato tra i vari domini di aggiornamento, per garantire la disponibilità nonostante i riavvii e altri guasti o errori imprevisti.</span><span class="sxs-lookup"><span data-stu-id="96438-130">In the future, we plan to support an OS update policy that is fully automated and coordinated across update domains, ensuring that availability is maintained despite reboots and other unexpected failures.</span></span>

### <a name="can-i-use-large-virtual-machine-scale-sets-in-my-sf-cluster"></a><span data-ttu-id="96438-131">È possibile usare set di scalabilità di macchine virtuali di grandi dimensioni nel cluster di Service Fabric?</span><span class="sxs-lookup"><span data-stu-id="96438-131">Can I use Large Virtual Machine Scale Sets in my SF cluster?</span></span> 

<span data-ttu-id="96438-132">**Risposta breve**: no.</span><span class="sxs-lookup"><span data-stu-id="96438-132">**Short answer** - No.</span></span> 

<span data-ttu-id="96438-133">**Risposta lunga**: anche se con i set di scalabilità di macchine virtuali di grandi dimensioni è possibile arrivare fino a 1000 istanze di VM, per farlo è necessario usare i gruppi di posizionamento.</span><span class="sxs-lookup"><span data-stu-id="96438-133">**Long Answer** - Although the Large Virtual Machine Scale Sets allow you to scale a virtual machine scale set upto 1000 VM instances, it does so by the use of Placement Groups (PGs).</span></span> <span data-ttu-id="96438-134">I domini di errore e i domini di aggiornamento sono coerenti solo in un gruppo di posizionamento. Service Fabric usa i domini di errore e i domini di aggiornamento per prendere decisioni relative al posizionamento delle repliche del servizio/istanze del servizio.</span><span class="sxs-lookup"><span data-stu-id="96438-134">Fault domains (FDs) and upgrade domains (UDs) are only consistent within a placement group Service fabric uses FDs and UDs to make placement decisions of your service replicas/Service instances.</span></span> <span data-ttu-id="96438-135">Poiché i domini di errore e i domini di aggiornamento sono confrontabili solo in un gruppo di posizionamento, Service Fabric non può usarli.</span><span class="sxs-lookup"><span data-stu-id="96438-135">Since the FDs  and UDs are comparable only within a placement group SF cannot use it.</span></span> <span data-ttu-id="96438-136">Se, ad esempio, VM1 nel gruppo di posizionamento 1 ha una topologia di dominio di errore 0 e VM9 nel gruppo di posizionamento 2 ha una topologia di domini di errore 4, non significa che VM1 e VM2 siano in due diversi rack hardware, quindi Service Fabric in questo caso non può usare i valori dei domini di errore per prendere decisioni relative al posizionamento.</span><span class="sxs-lookup"><span data-stu-id="96438-136">For example, If VM1 in PG1 has a topology of FD=0 and VM9 in PG2 has a topology of FD=4 , it does not mean that VM1 and VM2 are on two different Hardware Racks, hence SF cannot use the FD values in this case to make placement decisions.</span></span>

<span data-ttu-id="96438-137">I set di scalabilità di macchine virtuali di grandi dimensioni attualmente presentano altri problemi, ad esempio la mancanza di supporto per il bilanciamento del carico di livello 4.</span><span class="sxs-lookup"><span data-stu-id="96438-137">There are other issues with Large virtual machine scale sets currently, like the lack of level-4 Load balancing support.</span></span> <span data-ttu-id="96438-138">Per altre informazioni, vedere i [dettagli sui set di scalabilità di grandi dimensioni](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span><span class="sxs-lookup"><span data-stu-id="96438-138">Refer to for [details on Large scale sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span></span>



### <a name="what-is-the-minimum-size-of-a-service-fabric-cluster-why-cant-it-be-smaller"></a><span data-ttu-id="96438-139">Qual è la dimensione minima di un cluster di Service Fabric?</span><span class="sxs-lookup"><span data-stu-id="96438-139">What is the minimum size of a Service Fabric cluster?</span></span> <span data-ttu-id="96438-140">Perché non può essere di dimensioni minori?</span><span class="sxs-lookup"><span data-stu-id="96438-140">Why can't it be smaller?</span></span>

<span data-ttu-id="96438-141">La dimensione minima supportata per un cluster di Service Fabric che esegue carichi di lavoro di produzione è di cinque nodi.</span><span class="sxs-lookup"><span data-stu-id="96438-141">The minimum supported size for a Service Fabric cluster running production workloads is five nodes.</span></span> <span data-ttu-id="96438-142">Per scenari di sviluppo e test, sono supportati cluster a tre nodi.</span><span class="sxs-lookup"><span data-stu-id="96438-142">For dev/test scenarios, we support three node clusters.</span></span>

<span data-ttu-id="96438-143">Queste dimensioni minime esistono poiché il cluster di Service Fabric esegue un set di servizi di sistema con stato, inclusi il servizio di denominazione e la gestione del failover.</span><span class="sxs-lookup"><span data-stu-id="96438-143">These minimums exist because the Service Fabric cluster runs a set of stateful system services, including the naming service and the failover manager.</span></span> <span data-ttu-id="96438-144">Questi servizi, che tengono traccia di quali sono stati distribuiti nel cluster e dove sono attualmente ospitati, dipendono da una coerenza elevata.</span><span class="sxs-lookup"><span data-stu-id="96438-144">These services, which track what services have been deployed to the cluster and where they're currently hosted, depend on strong consistency.</span></span> <span data-ttu-id="96438-145">Tale coerenza elevata, a sua volta, dipende dalla possibilità di acquisire un *quorum* per qualsiasi aggiornamento specifico per lo stato di tali servizi, dove per quorum si intende una stretta maggioranza delle repliche (N/2 + 1) per un determinato servizio.</span><span class="sxs-lookup"><span data-stu-id="96438-145">That strong consistency, in turn, depends on the ability to acquire a *quorum* for any given update to the state of those services, where a quorum represents a strict majority of the replicas (N/2 +1) for a given service.</span></span>

<span data-ttu-id="96438-146">Detto questo, esaminiamo alcune possibili configurazioni di cluster:</span><span class="sxs-lookup"><span data-stu-id="96438-146">With that background, let's examine some possible cluster configurations:</span></span>

<span data-ttu-id="96438-147">**Un nodo**: questa opzione non offre una disponibilità elevata, in quanto perdere quel singolo nodo per qualsivoglia motivo significa perdere l'intero cluster.</span><span class="sxs-lookup"><span data-stu-id="96438-147">**One node**: this option does not provide high availability since the loss of the single node for any reason means the loss of the entire cluster.</span></span>

<span data-ttu-id="96438-148">**Due nodi**: un quorum per un servizio distribuito tra due nodi (N = 2) è 2 (2/2 + 1 = 2).</span><span class="sxs-lookup"><span data-stu-id="96438-148">**Two nodes**: a quorum for a service deployed across two nodes (N = 2) is 2 (2/2 + 1 = 2).</span></span> <span data-ttu-id="96438-149">Se viene persa una singola replica, è impossibile creare un quorum.</span><span class="sxs-lookup"><span data-stu-id="96438-149">When a single replica is lost, it is impossible to create a quorum.</span></span> <span data-ttu-id="96438-150">Dato che per aggiornare un servizio è necessario portare temporaneamente offline una replica, questa non è una configurazione utile.</span><span class="sxs-lookup"><span data-stu-id="96438-150">Since performing a service upgrade requires temporarily taking down a replica, this is not a useful configuration.</span></span>

<span data-ttu-id="96438-151">**Tre nodi**: con tre nodi (N = 3), è comunque necessario creare un quorum di duo nodi (3/2 + 1 = 2).</span><span class="sxs-lookup"><span data-stu-id="96438-151">**Three nodes**: with three nodes (N=3), the requirement to create a quorum is still two nodes (3/2 + 1 = 2).</span></span> <span data-ttu-id="96438-152">Ciò significa che è possibile perdere un singolo nodo e mantenere comunque il quorum.</span><span class="sxs-lookup"><span data-stu-id="96438-152">This means that you can lose an individual node and still maintain quorum.</span></span>

<span data-ttu-id="96438-153">La configurazione del cluster a tre nodi è supportata per gli scenari di sviluppo e test perché è possibile eseguire aggiornamenti in sicurezza e i guasti ai nodi individuali non rappresentano un rischio elevato, purché che non si verifichino contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="96438-153">The three node cluster configuration is supported for dev/test because you can safely perform upgrades and survive individual node failures, as long as they don't happen simultaneously.</span></span> <span data-ttu-id="96438-154">Per i carichi di lavoro di produzione, è necessario disporre di una maggiore resilienza a tali guasti simultanei, pertanto sono richiesti cinque nodi.</span><span class="sxs-lookup"><span data-stu-id="96438-154">For production workloads, you must be resilient to such a simultaneous failure, so five nodes are required.</span></span>

### <a name="can-i-turn-off-my-cluster-at-nightweekends-to-save-costs"></a><span data-ttu-id="96438-155">È possibile disattivare il cluster di notte o nei fine settimana per ridurre i costi?</span><span class="sxs-lookup"><span data-stu-id="96438-155">Can I turn off my cluster at night/weekends to save costs?</span></span>

<span data-ttu-id="96438-156">Generalmente, no.</span><span class="sxs-lookup"><span data-stu-id="96438-156">In general, no.</span></span> <span data-ttu-id="96438-157">Service Fabric archivia lo stato su dischi locali e temporanei, vale a dire che se la macchina virtuale viene spostata in un host diverso, i dati non vengono spostati con essa.</span><span class="sxs-lookup"><span data-stu-id="96438-157">Service Fabric stores state on local, ephemeral disks, meaning that if the virtual machine is moved to a different host, the data does not move with it.</span></span> <span data-ttu-id="96438-158">In condizioni normali, ciò non rappresenta un problema, in quanto il nuovo nodo viene aggiornato dagli altri nodi.</span><span class="sxs-lookup"><span data-stu-id="96438-158">In normal operation, that is not a problem as the new node is brought up to date by other nodes.</span></span> <span data-ttu-id="96438-159">Tuttavia, se si arrestano tutti i nodi per riavviarli in un secondo momento, è molto probabile che la maggior parte di essi verrà avviata su nuovi host, rendendo impossibile il ripristino dle sistema.</span><span class="sxs-lookup"><span data-stu-id="96438-159">However, if you stop all nodes and restart them later, there is a significant possibility that most of the nodes start on new hosts and make the system unable to recover.</span></span>

<span data-ttu-id="96438-160">Se si desidera creare cluster per testare l'applicazione prima di distribuirla, è consigliabile crearli in maniera dinamica come parte della [pipeline integrazione costante/distribuzione costante](service-fabric-set-up-continuous-integration.md).</span><span class="sxs-lookup"><span data-stu-id="96438-160">If you would like to create clusters for testing your application before it is deployed, we recommend that you dynamically create those clusters as part of your [continuous integration/continuous deployment pipeline](service-fabric-set-up-continuous-integration.md).</span></span>


### <a name="how-do-i-upgrade-my-operating-system-for-example-from-windows-server-2012-to-windows-server-2016"></a><span data-ttu-id="96438-161">Come aggiorno il sistema operativo? Ad esempio come passo da Windows Server 2012 a Windows Server 2016?</span><span class="sxs-lookup"><span data-stu-id="96438-161">How do I upgrade my Operating System (for example from Windows Server 2012 to Windows Server 2016)?</span></span>

<span data-ttu-id="96438-162">Mentre Microsoft sviluppa un'esperienza migliorata oggi l'utente è responsabile dell'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="96438-162">While we're working on an improved experience, today, you are responsible for the upgrade.</span></span> <span data-ttu-id="96438-163">È necessario aggiornare l'immagine del sistema operativo nelle macchine virtuali del cluster per una macchina virtuale per volta.</span><span class="sxs-lookup"><span data-stu-id="96438-163">You must upgrade the OS image on the virtual machines of the cluster one VM at a time.</span></span> 

## <a name="container-support"></a><span data-ttu-id="96438-164">Supporto dei contenitori</span><span class="sxs-lookup"><span data-stu-id="96438-164">Container Support</span></span>

### <a name="why-are-my-containers-that-are-deployed-to-sf-unable-to-resolve-dns-addresses"></a><span data-ttu-id="96438-165">Perché i contenitori distribuiti in Service Fabric non riescono a risolvere gli indirizzi DNS?</span><span class="sxs-lookup"><span data-stu-id="96438-165">Why are my containers that are deployed to SF unable to resolve DNS addresses?</span></span>

<span data-ttu-id="96438-166">Il problema è stato segnalato nei cluster versione 5.6.204.9494</span><span class="sxs-lookup"><span data-stu-id="96438-166">This issue has been reported on clusters that are on 5.6.204.9494 version</span></span> 

<span data-ttu-id="96438-167">**Mitigazione**: seguire [questo documento](service-fabric-dnsservice.md) per abilitare il servizio DNS di Service Fabric nel cluster.</span><span class="sxs-lookup"><span data-stu-id="96438-167">**Mitigation** :  Follow [this document](service-fabric-dnsservice.md) to enable the DNS service fabric service in your cluster.</span></span>

<span data-ttu-id="96438-168">**Correzione**: eseguire l'aggiornamento a una versione del cluster supportata successiva a 5.6.204.9494, se disponibile.</span><span class="sxs-lookup"><span data-stu-id="96438-168">**Fix** :  Upgrade to a supported cluster version that is higher than 5.6.204.9494, when it is available.</span></span> <span data-ttu-id="96438-169">Se il cluster è impostato per gli aggiornamenti automatici, verrà aggiornato automaticamente alla versione in cui questo problema è stato risolto.</span><span class="sxs-lookup"><span data-stu-id="96438-169">If your cluster is set to automatic upgrades, then the cluster will automatically upgrade to the version that has this issue fixed.</span></span>

  
## <a name="application-design"></a><span data-ttu-id="96438-170">Progettazione di applicazioni</span><span class="sxs-lookup"><span data-stu-id="96438-170">Application Design</span></span>

### <a name="whats-the-best-way-to-query-data-across-partitions-of-a-reliable-collection"></a><span data-ttu-id="96438-171">Qual è il modo migliore per eseguire query sui dati in partizioni di una raccolta Reliable Collections?</span><span class="sxs-lookup"><span data-stu-id="96438-171">What's the best way to query data across partitions of a Reliable Collection?</span></span>

<span data-ttu-id="96438-172">Le raccolte Reliable Collections sono in genere [partizionate](service-fabric-concepts-partitioning.md) per abilitare l'aumento delle istanze per maggiori prestazioni e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="96438-172">Reliable collections are typically [partitioned](service-fabric-concepts-partitioning.md) to enable scale out for greater performance and throughput.</span></span> <span data-ttu-id="96438-173">Ciò significa che lo stato di un determinato servizio può essere distribuito in decine o centinaia di macchine.</span><span class="sxs-lookup"><span data-stu-id="96438-173">That means that the state for a given service may be spread across 10s or 100s of machines.</span></span> <span data-ttu-id="96438-174">Per eseguire operazioni su quel set di dati completo, sono disponibili varie opzioni:</span><span class="sxs-lookup"><span data-stu-id="96438-174">To perform operations over that full data set, you have a few options:</span></span>

- <span data-ttu-id="96438-175">Creare un servizio che esegua una query di tutte le partizioni di un altro servizio per estrarre i dati richiesti.</span><span class="sxs-lookup"><span data-stu-id="96438-175">Create a service that queries all partitions of another service to pull in the required data.</span></span>
- <span data-ttu-id="96438-176">Creare un servizio che possa ricevere dati da tutte le partizioni di un altro servizio.</span><span class="sxs-lookup"><span data-stu-id="96438-176">Create a service that can receive data from all partitions of another service.</span></span>
- <span data-ttu-id="96438-177">Inviare periodicamente dati da ogni servizio in un archivio esterno.</span><span class="sxs-lookup"><span data-stu-id="96438-177">Periodically push data from each service to an external store.</span></span> <span data-ttu-id="96438-178">Questo approccio è appropriato solamente se si eseguono query che non fanno parte della logica di business principale.</span><span class="sxs-lookup"><span data-stu-id="96438-178">This approach is only appropriate if the queries you're performing are not part of your core business logic.</span></span>


### <a name="whats-the-best-way-to-query-data-across-my-actors"></a><span data-ttu-id="96438-179">Qual è il modo migliore per eseguire query sui dati nei vari attori?</span><span class="sxs-lookup"><span data-stu-id="96438-179">What's the best way to query data across my actors?</span></span>

<span data-ttu-id="96438-180">Gli attori sono progettati per essere unità indipendenti di stato e calcolo, pertanto è consigliabile non eseguire query generali dello stato degli attori in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="96438-180">Actors are designed to be independent units of state and compute, so it is not recommended to perform broad queries of actor state at runtime.</span></span> <span data-ttu-id="96438-181">Se è necessario eseguire query nel set completo di stati degli attori, è consigliabile piuttosto:</span><span class="sxs-lookup"><span data-stu-id="96438-181">If you have a need to query across the full set of actor state, you should consider either:</span></span>

- <span data-ttu-id="96438-182">Sostituire i servizi di attori con servizi Reliable con stato, come il numero delle richieste di rete per raccogliere tutti i dati, dal numero di attori al numero di partizioni nel servizio.</span><span class="sxs-lookup"><span data-stu-id="96438-182">Replacing your actor services with stateful reliable services, such that the number of network requests to gather all data from the number of actors to the number of partitions in your service.</span></span>
- <span data-ttu-id="96438-183">Progettare gli attori per l'invio periodico del relativo stato a un'archiviazione esterna per facilitare le query.</span><span class="sxs-lookup"><span data-stu-id="96438-183">Designing your actors to periodically push their state to an external store for easier querying.</span></span> <span data-ttu-id="96438-184">Come in precedenza, questo approccio è ideale solo se le query in esecuzione non sono richieste per il comportamento di runtime.</span><span class="sxs-lookup"><span data-stu-id="96438-184">As above, this approach is only viable if the queries you're performing are not required for your runtime behavior.</span></span>

### <a name="how-much-data-can-i-store-in-a-reliable-collection"></a><span data-ttu-id="96438-185">Quanti dai è possibile archiviare in una raccolta Reliable Collections?</span><span class="sxs-lookup"><span data-stu-id="96438-185">How much data can I store in a Reliable Collection?</span></span>

<span data-ttu-id="96438-186">In genere i servizi Reliable sono partizionati. Pertanto, la quantità di dati archiviabili è limitata solo dal numero di macchine presenti nel cluster e dalla quantità di memoria disponibile su tali macchine.</span><span class="sxs-lookup"><span data-stu-id="96438-186">Reliable services are typically partitioned, so the amount you can store is only limited by the number of machines you have in the cluster, and the amount of memory available on those machines.</span></span>

<span data-ttu-id="96438-187">Ad esempio, si supponga di avere una raccolta Reliable Collections in un servizio con 100 partizioni e 3 replica, con archiviati oggetti di dimensioni pari a 1 KB di media.</span><span class="sxs-lookup"><span data-stu-id="96438-187">As an example, suppose that you have a reliable collection in a service with 100 partitions and 3 replicas, storing objects that average 1kb in size.</span></span> <span data-ttu-id="96438-188">Si supponga quindi di disporre di un cluster di 10 macchine con 16 GB di memoria per macchina.</span><span class="sxs-lookup"><span data-stu-id="96438-188">Now suppose that you have a 10 machine cluster with 16gb of memory per machine.</span></span> <span data-ttu-id="96438-189">Per ragioni di semplicità e cautela, si supponga che il sistema operativo, i servizi di sistema, il runtime di Service Fabric e i servizi consumino 6 GB di quella memoria, lasciandone così 10 disponibili per ogni macchina o 100 per il cluster.</span><span class="sxs-lookup"><span data-stu-id="96438-189">For simplicity and to be very conservative, assume that the operating system and system services, the Service Fabric runtime, and your services consume 6gb of that, leaving 10gb available per machine, or 100gb for the cluster.</span></span>

<span data-ttu-id="96438-190">Tenendo presente che ciascun oggetto deve essere archiviato tre volte (una primaria e due repliche), si avrà una memoria sufficiente per circa 35 milioni di oggetti nella raccolta, con funzionamento a piena capacità.</span><span class="sxs-lookup"><span data-stu-id="96438-190">Keeping in mind that each object must be stored three times (one primary and two replicas), you would have sufficient memory for approximately 35 million objects in your collection when operating at full capacity.</span></span> <span data-ttu-id="96438-191">Tuttavia, si consiglia di essere preparati in caso di perdita simultanea di un dominio di errore e di un dominio di aggiornamento, che rappresentano circa 1/3 di capacità e ne ridurrebbero così il numero a circa 23 milioni.</span><span class="sxs-lookup"><span data-stu-id="96438-191">However, we recommend being resilient to the simultaneous loss of a failure domain and an upgrade domain, which represents about 1/3 of capacity, and would reduce the number to roughly 23 million.</span></span>

<span data-ttu-id="96438-192">Si noti che questo calcolo presuppone inoltre:</span><span class="sxs-lookup"><span data-stu-id="96438-192">Note that this calculation also assumes:</span></span>

- <span data-ttu-id="96438-193">Che la distribuzione dei dati nelle partizioni sia approssimativamente uniforme o che si indichino le metriche di caricamento a Cluster Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="96438-193">That the distribution of data across the partitions is roughly uniform or that you're reporting load metrics to the Cluster Resource Manager.</span></span> <span data-ttu-id="96438-194">Per impostazione predefinita, Service Fabric bilancia il carico in base al numero di repliche.</span><span class="sxs-lookup"><span data-stu-id="96438-194">By default, Service Fabric will load balance based on replica count.</span></span> <span data-ttu-id="96438-195">Nell'esempio precedente, vengono inserite 10 repliche primarie e 20 repliche secondarie su ciascun nodo nel cluster.</span><span class="sxs-lookup"><span data-stu-id="96438-195">In our example above, that would put 10 primary replicas and 20 secondary replicas on each node in the cluster.</span></span> <span data-ttu-id="96438-196">Quanto descritto in precedenza è ideale per carichi distribuiti in modo uniforme tra le partizioni.</span><span class="sxs-lookup"><span data-stu-id="96438-196">That works well for load that is evenly distributed across the partitions.</span></span> <span data-ttu-id="96438-197">Se i carichi non sono uniformi, è necessario segnalarli in modo che Resource Manager possa raggruppare più repliche di piccole dimensioni e consentire alle repliche di dimensioni maggiori di utilizzare più memoria su un singolo nodo.</span><span class="sxs-lookup"><span data-stu-id="96438-197">If load is not even, you must report load so that the Resource Manager can pack smaller replicas together and allow larger replicas to consume more memory on an individual node.</span></span>

- <span data-ttu-id="96438-198">Che il servizio Reliable in questione sia l'unico ad archiviare stato nel cluster.</span><span class="sxs-lookup"><span data-stu-id="96438-198">That the reliable service in question is the only one storing state in the cluster.</span></span> <span data-ttu-id="96438-199">Poiché è possibile distribuire più servizi in un cluster, è necessario tenere conto delle risorse di esecuzione e gestione dello stato richieste da ciascun servizio.</span><span class="sxs-lookup"><span data-stu-id="96438-199">Since you can deploy multiple services to a cluster, you need to be mindful of the resources that each will need to run and manage its state.</span></span>

- <span data-ttu-id="96438-200">Che il cluster stesso non si stia ampliando o riducendo.</span><span class="sxs-lookup"><span data-stu-id="96438-200">That the cluster itself is not growing or shrinking.</span></span> <span data-ttu-id="96438-201">Se si aggiungono più macchine, Service Fabric bilancerà nuovamente le repliche per sfruttare la capacità aggiuntiva fino a quando il numero di macchine sarà superiore al numero di partizioni nel servizio, poiché una replica singola non può estendersi alle macchine.</span><span class="sxs-lookup"><span data-stu-id="96438-201">If you add more machines, Service Fabric will rebalance your replicas to leverage the additional capacity until the number of machines surpasses the number of partitions in your service, since an individual replica cannot span machines.</span></span> <span data-ttu-id="96438-202">Al contrario, se si riduce la dimensione del cluster rimuovendo le macchine, le repliche saranno raggruppate più strettamente e avranno una minore capacità totale.</span><span class="sxs-lookup"><span data-stu-id="96438-202">By contrast, if you reduce the size of the cluster by removing machines, your replicas will be packed more tightly and have less overall capacity.</span></span>

### <a name="how-much-data-can-i-store-in-an-actor"></a><span data-ttu-id="96438-203">Quanti dati è possibile archiviare in un attore?</span><span class="sxs-lookup"><span data-stu-id="96438-203">How much data can I store in an actor?</span></span>

<span data-ttu-id="96438-204">Come per i servizi Reliable, la quantità di dati archiviabile in un servizio attore è limitata solo dallo spazio totale su disco e della memoria disponibile tra i nodi del cluster.</span><span class="sxs-lookup"><span data-stu-id="96438-204">As with reliable services, the amount of data that you can store in an actor service is only limited by the total disk space and memory available across the nodes in your cluster.</span></span> <span data-ttu-id="96438-205">Tuttavia, i singoli attori sono più efficaci quando vengono usati per racchiudere una piccola quantità di logica di business di stato e associata.</span><span class="sxs-lookup"><span data-stu-id="96438-205">However, individual actors are most effective when they are used to encapsulate a small amount of state and associated business logic.</span></span> <span data-ttu-id="96438-206">Come regola generale, un singolo attore dovrebbe avere uno stato misurabile in kilobyte.</span><span class="sxs-lookup"><span data-stu-id="96438-206">As a general rule, an individual actor should have state that is measured in kilobytes.</span></span>

## <a name="other-questions"></a><span data-ttu-id="96438-207">Altre domande</span><span class="sxs-lookup"><span data-stu-id="96438-207">Other questions</span></span>

### <a name="how-does-service-fabric-relate-to-containers"></a><span data-ttu-id="96438-208">In che modo Service Fabric è correlato ai contenitori?</span><span class="sxs-lookup"><span data-stu-id="96438-208">How does Service Fabric relate to containers?</span></span>

<span data-ttu-id="96438-209">I contenitori offrono un modo semplice per racchiudere i servizi e le relative dipendenze in modo da risultare eseguibili con coerenza in tutti gli ambiente e usabili in modo isolato su una singola macchina.</span><span class="sxs-lookup"><span data-stu-id="96438-209">Containers offer a simple way to package services and their dependencies such that they run consistently in all environments and can operate in an isolated fashion on a single machine.</span></span> <span data-ttu-id="96438-210">Service Fabric offre un modo per distribuire e gestire servizi, tra cui [quelli inclusi in un contenitore](service-fabric-containers-overview.md).</span><span class="sxs-lookup"><span data-stu-id="96438-210">Service Fabric offers a way to deploy and manage services, including [services that have been packaged in a container](service-fabric-containers-overview.md).</span></span>

### <a name="are-you-planning-to-open-source-service-fabric"></a><span data-ttu-id="96438-211">Si prevede di rendere disponibile Service Fabric in open source?</span><span class="sxs-lookup"><span data-stu-id="96438-211">Are you planning to open source Service Fabric?</span></span>

<span data-ttu-id="96438-212">Microsoft prevede di rendere disponibili in open source i framework di Reliable Services e Reliable Actors in GitHub e accetterà i contributi della community per questi progetti.</span><span class="sxs-lookup"><span data-stu-id="96438-212">We intend to open source the reliable services and reliable actors frameworks on GitHub and will accept community contributions to those projects.</span></span> <span data-ttu-id="96438-213">Seguire il [blog di Service Fabric](https://blogs.msdn.microsoft.com/azureservicefabric/) per le informazioni più recenti.</span><span class="sxs-lookup"><span data-stu-id="96438-213">Please follow the [Service Fabric blog](https://blogs.msdn.microsoft.com/azureservicefabric/) for more details as they're announced.</span></span>

<span data-ttu-id="96438-214">Non si prevede attualmente di rendere disponibile in open source il runtime di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="96438-214">The are currently no plans to open source the Service Fabric runtime.</span></span>

## <a name="next-steps"></a><span data-ttu-id="96438-215">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="96438-215">Next steps</span></span>

- [<span data-ttu-id="96438-216">Informazioni sui concetti chiave e sulle procedure consigliate di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="96438-216">Learn about core Service Fabric concepts and best practices</span></span>](https://mva.microsoft.com/en-us/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tbuZM46yC_5206218965)
