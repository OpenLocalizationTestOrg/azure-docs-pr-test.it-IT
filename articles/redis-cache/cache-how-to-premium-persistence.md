---
title: persistenza dei dati per una Cache Redis di Azure Premium aaaHow tooconfigure
description: Informazioni su come tooconfigure e gestire le istanze di Cache Redis di Azure di livello Premium di persistenza dei dati
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: b01cf279-60a0-4711-8c5f-af22d9540d38
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 08/24/2017
ms.author: sdanie
ms.openlocfilehash: 62feb6f5522e0270487f045eb303bf852434143d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-data-persistence-for-a-premium-azure-redis-cache"></a><span data-ttu-id="61537-103">Come tooconfigure persistenza dei dati per una Cache Redis di Azure Premium</span><span class="sxs-lookup"><span data-stu-id="61537-103">How tooconfigure data persistence for a Premium Azure Redis Cache</span></span>
<span data-ttu-id="61537-104">Cache Redis di Azure ha diverse offerte di cache che forniscono flessibilità nella scelta di hello della dimensione della cache e le funzionalità, incluse le funzionalità di livello Premium, ad esempio clustering, persistenza e il supporto di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="61537-104">Azure Redis Cache has different cache offerings which provide flexibility in hello choice of cache size and features, including Premium tier features such as clustering, persistence, and virtual network support.</span></span> <span data-ttu-id="61537-105">In questo articolo viene descritto come persistenza tooconfigure in premium Azure Redis Cache istanza.</span><span class="sxs-lookup"><span data-stu-id="61537-105">This article describes how tooconfigure persistence in a premium Azure Redis Cache instance.</span></span>

<span data-ttu-id="61537-106">Per informazioni su altre funzionalità di cache premium, vedere [livello Premium di Cache Redis di Azure di introduzione toohello](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="61537-106">For information on other premium cache features, see [Introduction toohello Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

## <a name="what-is-data-persistence"></a><span data-ttu-id="61537-107">Che cos'è la persistenza dei dati?</span><span class="sxs-lookup"><span data-stu-id="61537-107">What is data persistence?</span></span>
<span data-ttu-id="61537-108">[Persistenza di redis](https://redis.io/topics/persistence) consente dati toopersist memorizzati in Redis.</span><span class="sxs-lookup"><span data-stu-id="61537-108">[Redis persistence](https://redis.io/topics/persistence) allows you toopersist data stored in Redis.</span></span> <span data-ttu-id="61537-109">È anche possibile acquisire snapshot, eseguire il backup dei dati di hello, che è possibile caricare in caso di errore hardware.</span><span class="sxs-lookup"><span data-stu-id="61537-109">You can also take snapshots and back up hello data, which you can load in case of a hardware failure.</span></span> <span data-ttu-id="61537-110">Si tratta di un enorme vantaggio rispetto Basic o livello Standard in cui tutti hello dati verrà archiviato in memoria e può essere presente una perdita di dati in caso di errore in cui i nodi della Cache sono inattivi.</span><span class="sxs-lookup"><span data-stu-id="61537-110">This is a huge advantage over Basic or Standard tier where all hello data is stored in memory and there can be potential data loss in case of a failure where Cache nodes are down.</span></span> 

<span data-ttu-id="61537-111">Cache Redis di Azure offre Redis persistenza utilizzando i modelli di hello:</span><span class="sxs-lookup"><span data-stu-id="61537-111">Azure Redis Cache offers Redis persistence using hello following models:</span></span>

* <span data-ttu-id="61537-112">**Persistenza RDB** -persistenza quando RDB (database Redis) è configurata, Cache Redis di Azure mantiene uno snapshot della cache Redis hello in un formato binario toodisk in base a una frequenza di backup configurabile di Redis.</span><span class="sxs-lookup"><span data-stu-id="61537-112">**RDB persistence** - When RDB (Redis database) persistence is configured, Azure Redis Cache persists a snapshot of hello Redis cache in a Redis binary format toodisk based on a configurable backup frequency.</span></span> <span data-ttu-id="61537-113">Se si verifica un errore irreversibile che disabilita hello primario sia della cache di replica, viene ricostruita cache di hello utilizzando snapshot più recente di hello.</span><span class="sxs-lookup"><span data-stu-id="61537-113">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello most recent snapshot.</span></span> <span data-ttu-id="61537-114">Altre informazioni su hello [vantaggi](https://redis.io/topics/persistence#rdb-advantages) e [svantaggi](https://redis.io/topics/persistence#rdb-disadvantages) di persistenza RDB.</span><span class="sxs-lookup"><span data-stu-id="61537-114">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="61537-115">**Persistenza AOF** -persistenza quando AOF (Append solo file) sia configurata, Cache Redis di Azure vengono salvati ogni log tooa operazioni di scrittura che viene salvato almeno una volta al secondo in un account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="61537-115">**AOF persistence** - When AOF (Append only file) persistence is configured, Azure Redis Cache saves every write operation tooa log that is saved at least once per second into an Azure Storage account.</span></span> <span data-ttu-id="61537-116">Se si verifica un errore irreversibile che disabilita hello primario sia della cache di replica, cache di hello verrà ricostruita tramite operazioni di scrittura hello archiviato.</span><span class="sxs-lookup"><span data-stu-id="61537-116">If a catastrophic event occurs that disables both hello primary and replica cache, hello cache is reconstructed using hello stored write operations.</span></span> <span data-ttu-id="61537-117">Altre informazioni su hello [vantaggi](https://redis.io/topics/persistence#aof-advantages) e [svantaggi](https://redis.io/topics/persistence#aof-disadvantages) di persistenza AOF.</span><span class="sxs-lookup"><span data-stu-id="61537-117">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="61537-118">Persistenza verrà configurata dall'hello **nuova Cache Redis** pannello durante la creazione della cache e hello **menu Resource** per premium esistente memorizza nella cache.</span><span class="sxs-lookup"><span data-stu-id="61537-118">Persistence is configured from hello **New Redis Cache** blade during cache creation and on hello **Resource menu** for existing premium caches.</span></span>

[!INCLUDE [redis-cache-create](../../includes/redis-cache-premium-create.md)]

<span data-ttu-id="61537-119">Dopo aver selezionato un piano tariffario Premium, fare clic su **Persistenza Redis**.</span><span class="sxs-lookup"><span data-stu-id="61537-119">Once a premium pricing tier is selected, click **Redis persistence**.</span></span>

![Persistenza Redis][redis-cache-persistence]

<span data-ttu-id="61537-121">Hello nella sezione successiva hello viene descritta la modalità tooconfigure persistenza Redis nella nuova cache premium.</span><span class="sxs-lookup"><span data-stu-id="61537-121">hello steps in hello next section describe how tooconfigure Redis persistence on your new premium cache.</span></span> <span data-ttu-id="61537-122">Una volta configurata la persistenza di Redis, fare clic su **crea** toocreate premium la nuova cache con Redis persistenza.</span><span class="sxs-lookup"><span data-stu-id="61537-122">Once Redis persistence is configured, click **Create** toocreate your new premium cache with Redis persistence.</span></span>

## <a name="enable-redis-persistence"></a><span data-ttu-id="61537-123">Abilitare la persistenza Redis</span><span class="sxs-lookup"><span data-stu-id="61537-123">Enable Redis persistence</span></span>

<span data-ttu-id="61537-124">Redis è attivata la persistenza in hello **Redis persistenza dei dati** pannello scegliendo **RDB** o **AOF** persistenza.</span><span class="sxs-lookup"><span data-stu-id="61537-124">Redis persistence is enabled on hello **Redis data persistence** blade by choosing either **RDB** or **AOF** persistence.</span></span> <span data-ttu-id="61537-125">Per le nuove cache, questo pannello avviene durante il processo di creazione della cache di hello, come descritto nella sezione precedente hello.</span><span class="sxs-lookup"><span data-stu-id="61537-125">For new caches, this blade is accessed during hello cache creation process, as described in hello previous section.</span></span> <span data-ttu-id="61537-126">Per le cache esistente, hello **Redis persistenza dei dati** pannello è accessibile da hello **menu Resource** per la cache.</span><span class="sxs-lookup"><span data-stu-id="61537-126">For existing caches, hello **Redis data persistence** blade is accessed from hello **Resource menu** for your cache.</span></span>

![Impostazioni di Redis][redis-cache-settings]


## <a name="configure-rdb-persistence"></a><span data-ttu-id="61537-128">Configurare la persistenza RDB</span><span class="sxs-lookup"><span data-stu-id="61537-128">Configure RDB persistence</span></span>

<span data-ttu-id="61537-129">persistenza RDB tooenable, fare clic su **RDB**.</span><span class="sxs-lookup"><span data-stu-id="61537-129">tooenable RDB persistence, click **RDB**.</span></span> <span data-ttu-id="61537-130">persistenza RDB toodisable in una cache premium abilitato in precedenza, fare clic su **disabilitato**.</span><span class="sxs-lookup"><span data-stu-id="61537-130">toodisable RDB persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Persistenza RDB di Redis][redis-cache-rdb-persistence]

<span data-ttu-id="61537-132">tooconfigure hello l'intervallo di backup, seleziona un **frequenza di Backup** dall'elenco a discesa hello.</span><span class="sxs-lookup"><span data-stu-id="61537-132">tooconfigure hello backup interval, select a **Backup Frequency** from hello drop-down list.</span></span> <span data-ttu-id="61537-133">Le opzioni disponibili includono **15 minuti**, **30 minuti**, **60 minuti**, **6 ore**, **12 ore** e **24 ore**.</span><span class="sxs-lookup"><span data-stu-id="61537-133">Choices include **15 Minutes**, **30 minutes**, **60 minutes**, **6 hours**, **12 hours**, and **24 hours**.</span></span> <span data-ttu-id="61537-134">Questo intervallo inizia a contare verso il basso, dopo il completamento dell'operazione di backup precedente hello e quando trascorso un nuovo backup viene avviato.</span><span class="sxs-lookup"><span data-stu-id="61537-134">This interval starts counting down after hello previous backup operation successfully completes and when it elapses a new backup is initiated.</span></span>

<span data-ttu-id="61537-135">Fare clic su **Account di archiviazione** tooselect hello toouse account di archiviazione e scegliere uno hello **chiave primaria** o **chiave secondaria** toouse da hello **archiviazione Chiave** elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="61537-135">Click **Storage Account** tooselect hello storage account toouse, and choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> <span data-ttu-id="61537-136">È necessario scegliere un account di archiviazione in hello stessa area della cache di hello e un **archiviazione Premium** account è consigliato perché l'archiviazione premium ha una velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="61537-136">You must choose a storage account in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="61537-137">Se la chiave di archiviazione hello per l'account di persistenza viene rigenerata, è necessario riconfigurare chiave desiderato hello hello **chiave di archiviazione** elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="61537-137">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="61537-138">Fare clic su **OK** configurazione di persistenza toosave hello.</span><span class="sxs-lookup"><span data-stu-id="61537-138">Click **OK** toosave hello persistence configuration.</span></span>

<span data-ttu-id="61537-139">backup successivo Hello (o il primo backup per le nuove cache) è stato avviato una volta allo scadere dell'intervallo di frequenza di backup hello.</span><span class="sxs-lookup"><span data-stu-id="61537-139">hello next backup (or first backup for new caches) is initiated once hello backup frequency interval elapses.</span></span>

## <a name="configure-aof-persistence"></a><span data-ttu-id="61537-140">Configurare la persistenza AOF</span><span class="sxs-lookup"><span data-stu-id="61537-140">Configure AOF persistence</span></span>

<span data-ttu-id="61537-141">persistenza AOF tooenable, fare clic su **AOF**.</span><span class="sxs-lookup"><span data-stu-id="61537-141">tooenable AOF persistence, click **AOF**.</span></span> <span data-ttu-id="61537-142">persistenza AOF toodisable in una cache premium abilitato in precedenza, fare clic su **disabilitato**.</span><span class="sxs-lookup"><span data-stu-id="61537-142">toodisable AOF persistence on a previously enabled premium cache, click **Disabled**.</span></span>

![Persistenza AOF di Redis][redis-cache-aof-persistence]

<span data-ttu-id="61537-144">persistenza AOF tooconfigure, specificare un **primo Account di archiviazione**.</span><span class="sxs-lookup"><span data-stu-id="61537-144">tooconfigure AOF persistence, specify a **First Storage Account**.</span></span> <span data-ttu-id="61537-145">Questo account di archiviazione deve trovarsi in hello stessa area della cache di hello e un **archiviazione Premium** account è consigliato perché l'archiviazione premium ha una velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="61537-145">This storage account must be in hello same region as hello cache, and a **Premium Storage** account is recommended because premium storage has higher throughput.</span></span> <span data-ttu-id="61537-146">Facoltativamente, è possibile configurare un account di archiviazione aggiuntivo denominato **secondo account di archiviazione**.</span><span class="sxs-lookup"><span data-stu-id="61537-146">You can optionally configure an additional storage account named **Second Storage Account**.</span></span> <span data-ttu-id="61537-147">Se è configurato un secondo account di archiviazione, hello scritture toohello replica cache vengono scritti toothis secondo account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="61537-147">If a second storage account is configured, hello writes toohello replica cache are written toothis second storage account.</span></span> <span data-ttu-id="61537-148">Per ogni account di archiviazione configurato, scegliere uno hello **chiave primaria** o **chiave secondaria** toouse da hello **chiave di archiviazione** elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="61537-148">For each configured storage account, choose either hello **Primary key** or **Secondary key** toouse from hello **Storage Key** drop-down.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="61537-149">Se la chiave di archiviazione hello per l'account di persistenza viene rigenerata, è necessario riconfigurare chiave desiderato hello hello **chiave di archiviazione** elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="61537-149">If hello storage key for your persistence account is regenerated, you must reconfigure hello desired key from hello **Storage Key** drop-down.</span></span>
> 
> 

<span data-ttu-id="61537-150">Quando è abilitata la persistenza AOF, scrivere cache toohello operazioni vengono salvati toohello definito account di archiviazione (o se è stato configurato un secondo account di archiviazione di account).</span><span class="sxs-lookup"><span data-stu-id="61537-150">When AOF persistence is enabled, write operations toohello cache are saved toohello designated storage account (or accounts if you have configured a second storage account).</span></span> <span data-ttu-id="61537-151">Nell'evento di hello di un errore irreversibile che accetta verso il basso sia hello primario e cache di replica, hello stored AOF log è utilizzata della cache di hello toorebuild.</span><span class="sxs-lookup"><span data-stu-id="61537-151">In hello event of a catastrophic failure that takes down both hello primary and replica cache, hello stored AOF log is used toorebuild hello cache.</span></span>

## <a name="persistence-faq"></a><span data-ttu-id="61537-152">Domande frequenti sulla persistenza</span><span class="sxs-lookup"><span data-stu-id="61537-152">Persistence FAQ</span></span>
<span data-ttu-id="61537-153">Hello elenco seguente contiene le risposte toocommonly domande frequenti su persistenza Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="61537-153">hello following list contains answers toocommonly asked questions about Azure Redis Cache persistence.</span></span>

* [<span data-ttu-id="61537-154">È possibile abilitare la persistenza per una cache creata in precedenza?</span><span class="sxs-lookup"><span data-stu-id="61537-154">Can I enable persistence on a previously created cache?</span></span>](#can-i-enable-persistence-on-a-previously-created-cache)
* [<span data-ttu-id="61537-155">È possibile abilitare la persistenza AOF e RDB in hello contemporaneamente?</span><span class="sxs-lookup"><span data-stu-id="61537-155">Can I enable AOF and RDB persistence at hello same time?</span></span>](#can-i-enable-aof-and-rdb-persistence-at-the-same-time)
* [<span data-ttu-id="61537-156">Quale modello di persistenza è consigliabile scegliere?</span><span class="sxs-lookup"><span data-stu-id="61537-156">Which persistence model should I choose?</span></span>](#which-persistence-model-should-i-choose)
* [<span data-ttu-id="61537-157">Cosa accade se è stato ridimensionato tooa diverse dimensioni e viene ripristinato un backup effettuato prima che l'operazione di ridimensionamento hello?</span><span class="sxs-lookup"><span data-stu-id="61537-157">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)


### <a name="rdb-persistence"></a><span data-ttu-id="61537-158">Persistenza RDB</span><span class="sxs-lookup"><span data-stu-id="61537-158">RDB persistence</span></span>
* [<span data-ttu-id="61537-159">È possibile modificare la frequenza di backup RDB hello dopo che è possibile creare cache di hello?</span><span class="sxs-lookup"><span data-stu-id="61537-159">Can I change hello RDB backup frequency after I create hello cache?</span></span>](#can-i-change-the-rdb-backup-frequency-after-i-create-the-cache)
* [<span data-ttu-id="61537-160">Perché trascorrono più di 60 minuti tra i backup se è stata impostata una frequenza di backup RDB di 60 minuti?</span><span class="sxs-lookup"><span data-stu-id="61537-160">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>](#why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups)
* [<span data-ttu-id="61537-161">Backup RDB precedenti toohello cosa accade quando viene effettuato un nuovo backup?</span><span class="sxs-lookup"><span data-stu-id="61537-161">What happens toohello old RDB backups when a new backup is made?</span></span>](#what-happens-to-the-old-rdb-backups-when-a-new-backup-is-made)

### <a name="aof-persistence"></a><span data-ttu-id="61537-162">Persistenza AOF</span><span class="sxs-lookup"><span data-stu-id="61537-162">AOF persistence</span></span>
* [<span data-ttu-id="61537-163">Quando è consigliabile usare un secondo account di archiviazione?</span><span class="sxs-lookup"><span data-stu-id="61537-163">When should I use a second storage account?</span></span>](#when-should-i-use-a-second-storage-account)
* [<span data-ttu-id="61537-164">La persistenza AOF influisce sulla velocità effettiva, la latenza o le prestazioni della cache?</span><span class="sxs-lookup"><span data-stu-id="61537-164">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)
* [<span data-ttu-id="61537-165">Come è possibile rimuovere l'account di archiviazione secondo hello?</span><span class="sxs-lookup"><span data-stu-id="61537-165">How can I remove hello second storage account?</span></span>](#how-can-i-remove-the-second-storage-account)
* [<span data-ttu-id="61537-166">Che cos'è un'operazione di riscrittura e in che modo influisce sulla cache?</span><span class="sxs-lookup"><span data-stu-id="61537-166">What is a rewrite and how does it affect my cache?</span></span>](#what-is-a-rewrite-and-how-does-it-affect-my-cache)
* [<span data-ttu-id="61537-167">Quali potrebbero essere gli effetti del ridimensionamento di una cache con la persistenza AOF abilitata?</span><span class="sxs-lookup"><span data-stu-id="61537-167">What should I expect when scaling a cache with AOF enabled?</span></span>](#what-should-i-expect-when-scaling-a-cache-with-aof-enabled)
* [<span data-ttu-id="61537-168">Come vengono organizzati i dati AOF nello spazio di archiviazione?</span><span class="sxs-lookup"><span data-stu-id="61537-168">How is my AOF data organized in storage?</span></span>](#how-is-my-aof-data-organized-in-storage)


### <a name="can-i-enable-persistence-on-a-previously-created-cache"></a><span data-ttu-id="61537-169">È possibile abilitare la persistenza per una cache creata in precedenza?</span><span class="sxs-lookup"><span data-stu-id="61537-169">Can I enable persistence on a previously created cache?</span></span>
<span data-ttu-id="61537-170">Sì, la persistenza di Redis può essere configurata sia al momento della creazione della cache che nelle cache premium esistenti.</span><span class="sxs-lookup"><span data-stu-id="61537-170">Yes, Redis persistence can be configured both at cache creation and on existing premium caches.</span></span>

### <a name="can-i-enable-aof-and-rdb-persistence-at-hello-same-time"></a><span data-ttu-id="61537-171">È possibile abilitare la persistenza AOF e RDB in hello contemporaneamente?</span><span class="sxs-lookup"><span data-stu-id="61537-171">Can I enable AOF and RDB persistence at hello same time?</span></span>

<span data-ttu-id="61537-172">No, è possibile abilitare solo RDB o AOF, ma non entrambe contemporaneamente hello contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="61537-172">No, you can enable only RDB or AOF, but not both at hello same time.</span></span>

### <a name="which-persistence-model-should-i-choose"></a><span data-ttu-id="61537-173">Quale modello di persistenza è consigliabile scegliere?</span><span class="sxs-lookup"><span data-stu-id="61537-173">Which persistence model should I choose?</span></span>

<span data-ttu-id="61537-174">Persistenza AOF Salva log di tooa ogni scrittura, che ha un impatto sulla velocità effettiva, confrontato con RDB della persistenza Salva i backup in base a hello configurato l'intervallo di backup, con un impatto minimo sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="61537-174">AOF persistence saves every write tooa log, which has some impact on throughput, compared with RDB persistence which saves backups based on hello configured backup interval, with minimal impact on performance.</span></span> <span data-ttu-id="61537-175">Scegliere la persistenza AOF se l'obiettivo principale è la perdita di dati toominimize, ed è possibile gestire una diminuzione della velocità effettiva per la cache.</span><span class="sxs-lookup"><span data-stu-id="61537-175">Choose AOF persistence if your primary goal is toominimize data loss, and you can handle a decrease in throughput for your cache.</span></span> <span data-ttu-id="61537-176">Se si desidera che la velocità effettiva ottimale toomaintain nella cache, ma si desidera comunque un meccanismo per il ripristino dei dati, scegliere la persistenza del RDB.</span><span class="sxs-lookup"><span data-stu-id="61537-176">Choose RDB persistence if you wish toomaintain optimal throughput on your cache, but still want a mechanism for data recovery.</span></span>

* <span data-ttu-id="61537-177">Altre informazioni su hello [vantaggi](https://redis.io/topics/persistence#rdb-advantages) e [svantaggi](https://redis.io/topics/persistence#rdb-disadvantages) di persistenza RDB.</span><span class="sxs-lookup"><span data-stu-id="61537-177">Learn more about hello [advantages](https://redis.io/topics/persistence#rdb-advantages) and [disadvantages](https://redis.io/topics/persistence#rdb-disadvantages) of RDB persistence.</span></span>
* <span data-ttu-id="61537-178">Altre informazioni su hello [vantaggi](https://redis.io/topics/persistence#aof-advantages) e [svantaggi](https://redis.io/topics/persistence#aof-disadvantages) di persistenza AOF.</span><span class="sxs-lookup"><span data-stu-id="61537-178">Learn more about hello [advantages](https://redis.io/topics/persistence#aof-advantages) and [disadvantages](https://redis.io/topics/persistence#aof-disadvantages) of AOF persistence.</span></span>

<span data-ttu-id="61537-179">Per altre informazioni sulle prestazioni quando si usa la persistenza AOF, vedere [La persistenza AOF influisce sulla velocità effettiva, la latenza o le prestazioni della cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span><span class="sxs-lookup"><span data-stu-id="61537-179">For more information on performance when using AOF persistence, see [Does AOF persistence affect throughout, latency, or performance of my cache?](#does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache)</span></span>

### <a name="what-happens-if-i-have-scaled-tooa-different-size-and-a-backup-is-restored-that-was-made-before-hello-scaling-operation"></a><span data-ttu-id="61537-180">Cosa accade se è stato ridimensionato tooa diverse dimensioni e viene ripristinato un backup effettuato prima che l'operazione di ridimensionamento hello?</span><span class="sxs-lookup"><span data-stu-id="61537-180">What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?</span></span>

<span data-ttu-id="61537-181">Per la persistenza sia RDB sia AOF:</span><span class="sxs-lookup"><span data-stu-id="61537-181">For both RDB and AOF persistence:</span></span>

* <span data-ttu-id="61537-182">Se le prestazioni tooa di dimensioni maggiore, non vi è alcun impatto.</span><span class="sxs-lookup"><span data-stu-id="61537-182">If you have scaled tooa larger size, there is no impact.</span></span>
* <span data-ttu-id="61537-183">Se le prestazioni tooa di dimensioni inferiore e si dispone di un oggetto personalizzato [database](cache-configure.md#databases) l'impostazione che è maggiore di hello [database limite](cache-configure.md#databases) per la nuova dimensione, non ripristinare i dati in tali database.</span><span class="sxs-lookup"><span data-stu-id="61537-183">If you have scaled tooa smaller size, and you have a custom [databases](cache-configure.md#databases) setting that is greater than hello [databases limit](cache-configure.md#databases) for your new size, data in those databases isn't restored.</span></span> <span data-ttu-id="61537-184">Per altre informazioni, vedere [L'impostazione databases personalizzata viene modificata durante il ridimensionamento?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span><span class="sxs-lookup"><span data-stu-id="61537-184">For more information, see [Is my custom databases setting affected during scaling?](cache-how-to-scale.md#is-my-custom-databases-setting-affected-during-scaling)</span></span>
* <span data-ttu-id="61537-185">Se le prestazioni tooa di dimensioni inferiore e non è disponibile spazio sufficiente in hello toohold di dimensioni più piccole tutti i dati di hello dalle chiavi di backup, ultimo hello di eliminazione durante il processo di ripristino di hello, in genere utilizzando hello [allkeys lru](http://redis.io/topics/lru-cache) rimozione criteri.</span><span class="sxs-lookup"><span data-stu-id="61537-185">If you have scaled tooa smaller size, and there isn't enough room in hello smaller size toohold all of hello data from hello last backup, keys will be evicted during hello restore process, typically using hello [allkeys-lru](http://redis.io/topics/lru-cache) eviction policy.</span></span>

### <a name="can-i-change-hello-rdb-backup-frequency-after-i-create-hello-cache"></a><span data-ttu-id="61537-186">È possibile modificare la frequenza di backup RDB hello dopo che è possibile creare cache di hello?</span><span class="sxs-lookup"><span data-stu-id="61537-186">Can I change hello RDB backup frequency after I create hello cache?</span></span>
<span data-ttu-id="61537-187">Sì, è possibile modificare la frequenza di backup hello per la persistenza RDB su hello **Redis persistenza dei dati** blade.</span><span class="sxs-lookup"><span data-stu-id="61537-187">Yes, you can change hello backup frequency for RDB persistence on hello **Redis data persistence** blade.</span></span> <span data-ttu-id="61537-188">Per istruzioni, vedere [Configurare la persistenza di Redis](#configure-redis-persistence).</span><span class="sxs-lookup"><span data-stu-id="61537-188">For instructions, see [Configure Redis persistence](#configure-redis-persistence).</span></span>

### <a name="why-if-i-have-an-rdb-backup-frequency-of-60-minutes-there-is-more-than-60-minutes-between-backups"></a><span data-ttu-id="61537-189">Perché trascorrono più di 60 minuti tra i backup se è stata impostata una frequenza di backup RDB di 60 minuti?</span><span class="sxs-lookup"><span data-stu-id="61537-189">Why if I have an RDB backup frequency of 60 minutes there is more than 60 minutes between backups?</span></span>
<span data-ttu-id="61537-190">intervallo di frequenza di backup di Hello RDB persistenza per avviare il processo di backup precedente di hello è stata completata.</span><span class="sxs-lookup"><span data-stu-id="61537-190">hello RDB persistence backup frequency interval does not start until hello previous backup process has completed successfully.</span></span> <span data-ttu-id="61537-191">Se la frequenza di backup hello è di 60 minuti e accetta toosuccessfully di 15 minuti un processo di backup completo, non si avvia backup successivo hello fino a quando non 75 minuti dopo hello ora di inizio del backup precedente hello.</span><span class="sxs-lookup"><span data-stu-id="61537-191">If hello backup frequency is 60 minutes and it takes a backup process 15 minutes toosuccessfully complete, hello next backup won't start until 75 minutes after hello start time of hello previous backup.</span></span>

### <a name="what-happens-toohello-old-rdb-backups-when-a-new-backup-is-made"></a><span data-ttu-id="61537-192">Backup RDB precedenti toohello cosa accade quando viene effettuato un nuovo backup?</span><span class="sxs-lookup"><span data-stu-id="61537-192">What happens toohello old RDB backups when a new backup is made?</span></span>
<span data-ttu-id="61537-193">Tutti i backup di persistenza RDB ad eccezione di hello più recente vengono eliminati automaticamente.</span><span class="sxs-lookup"><span data-stu-id="61537-193">All RDB persistence backups except for hello most recent one are automatically deleted.</span></span> <span data-ttu-id="61537-194">L'eliminazione potrebbe non avvenire immediatamente, ma i backup meno recenti non vengono mantenuti per un tempo illimitato.</span><span class="sxs-lookup"><span data-stu-id="61537-194">This deletion may not happen immediately but older backups are not persisted indefinitely.</span></span>


### <a name="when-should-i-use-a-second-storage-account"></a><span data-ttu-id="61537-195">Quando è consigliabile usare un secondo account di archiviazione?</span><span class="sxs-lookup"><span data-stu-id="61537-195">When should I use a second storage account?</span></span>

<span data-ttu-id="61537-196">Utilizzare un secondo account di archiviazione per la persistenza AOF quando si ritiene che si dispone di maggiore rispetto alle operazioni della cache di hello set previsto.</span><span class="sxs-lookup"><span data-stu-id="61537-196">You should use a second storage account for AOF persistence when you believe you have higher than expected set operations on hello cache.</span></span>  <span data-ttu-id="61537-197">Impostazione di account di archiviazione secondaria hello contribuisce a garantire che la cache non raggiunga i limiti di larghezza di banda di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="61537-197">Setting up hello secondary storage account helps ensure your cache doesn't reach storage bandwidth limits.</span></span>

### <a name="does-aof-persistence-affect-throughout-latency-or-performance-of-my-cache"></a><span data-ttu-id="61537-198">La persistenza AOF influisce sulla velocità effettiva, la latenza o le prestazioni della cache?</span><span class="sxs-lookup"><span data-stu-id="61537-198">Does AOF persistence affect throughout, latency, or performance of my cache?</span></span>

<span data-ttu-id="61537-199">Persistenza AOF influisce sulla velocità effettiva da circa 15-20% quando la cache di hello è sotto carico massimo (CPU e carico del Server sia inferiore al 90%).</span><span class="sxs-lookup"><span data-stu-id="61537-199">AOF persistence affects throughput by about 15% – 20% when hello cache is below maximum load (CPU and Server Load both under 90%).</span></span> <span data-ttu-id="61537-200">Deve essere presente problemi di latenza quando la cache di hello è all'interno di questi limiti.</span><span class="sxs-lookup"><span data-stu-id="61537-200">There should not be latency issues when hello cache is within these limits.</span></span> <span data-ttu-id="61537-201">Tuttavia, cache di hello raggiungerà questi limiti prima con AOF abilitato.</span><span class="sxs-lookup"><span data-stu-id="61537-201">However, hello cache will reach these limits sooner with AOF enabled.</span></span>

### <a name="how-can-i-remove-hello-second-storage-account"></a><span data-ttu-id="61537-202">Come è possibile rimuovere l'account di archiviazione secondo hello?</span><span class="sxs-lookup"><span data-stu-id="61537-202">How can I remove hello second storage account?</span></span>

<span data-ttu-id="61537-203">È possibile rimuovere l'account di archiviazione secondaria di hello AOF persistenza impostando hello secondo account di archiviazione toobe stesso hello come primo account di archiviazione hello.</span><span class="sxs-lookup"><span data-stu-id="61537-203">You can remove hello AOF persistence secondary storage account by setting hello second storage account toobe hello same as hello first storage account.</span></span> <span data-ttu-id="61537-204">Per istruzioni, vedere [Configurare la persistenza AOF](#configure-aof-persistence).</span><span class="sxs-lookup"><span data-stu-id="61537-204">For instructions, see [Configure AOF persistence](#configure-aof-persistence).</span></span>

### <a name="what-is-a-rewrite-and-how-does-it-affect-my-cache"></a><span data-ttu-id="61537-205">Che cos'è un'operazione di riscrittura e in che modo influisce sulla cache?</span><span class="sxs-lookup"><span data-stu-id="61537-205">What is a rewrite and how does it affect my cache?</span></span>

<span data-ttu-id="61537-206">Quando il file AOF hello diventa sufficientemente grande, una riscrittura viene accodata automaticamente nella cache di hello.</span><span class="sxs-lookup"><span data-stu-id="61537-206">When hello AOF file becomes large enough, a rewrite is automatically queued on hello cache.</span></span> <span data-ttu-id="61537-207">Hello riscrittura Ridimensiona file AOF hello con numero minimo di operazioni hello necessari toocreate hello set di dati corrente.</span><span class="sxs-lookup"><span data-stu-id="61537-207">hello rewrite resizes hello AOF file with hello minimal set of operations needed toocreate hello current data set.</span></span> <span data-ttu-id="61537-208">Durante la riscrittura, prevede limiti sulle prestazioni tooreach prima soprattutto quando si utilizzano grandi set di dati.</span><span class="sxs-lookup"><span data-stu-id="61537-208">During rewrites, expect tooreach performance limits sooner especially when dealing with large datasets.</span></span> <span data-ttu-id="61537-209">Riscrivere più volte si verificano meno spesso come file AOF hello diventa più grande, ma sarà necessaria una quantità significativa di tempo quando si verifica.</span><span class="sxs-lookup"><span data-stu-id="61537-209">Rewrites occur less often as hello AOF file becomes larger, but will take a significant amount of time when it happens.</span></span>

### <a name="what-should-i-expect-when-scaling-a-cache-with-aof-enabled"></a><span data-ttu-id="61537-210">Quali potrebbero essere gli effetti del ridimensionamento di una cache con la persistenza AOF abilitata?</span><span class="sxs-lookup"><span data-stu-id="61537-210">What should I expect when scaling a cache with AOF enabled?</span></span>

<span data-ttu-id="61537-211">Se il file AOF hello in fase di hello di scalabilità è molto grande, quindi prevedere hello tootake operazione di scala più tempo del previsto dal momento che verrà ricaricamento file hello termine scalabilità.</span><span class="sxs-lookup"><span data-stu-id="61537-211">If hello AOF file at hello time of scaling is significantly large, then expect hello scale operation tootake longer than expected since it will be reloading hello file after scaling has finished.</span></span>

<span data-ttu-id="61537-212">Per ulteriori informazioni sulla scalabilità, vedere [cosa accade se è stato ridimensionato tooa diverse dimensioni e viene ripristinato un backup effettuato prima che l'operazione di ridimensionamento hello?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span><span class="sxs-lookup"><span data-stu-id="61537-212">For more information on scaling, see [What happens if I have scaled tooa different size and a backup is restored that was made before hello scaling operation?](#what-happens-if-i-have-scaled-to-a-different-size-and-a-backup-is-restored-that-was-made-before-the-scaling-operation)</span></span>

### <a name="how-is-my-aof-data-organized-in-storage"></a><span data-ttu-id="61537-213">Come vengono organizzati i dati AOF nello spazio di archiviazione?</span><span class="sxs-lookup"><span data-stu-id="61537-213">How is my AOF data organized in storage?</span></span>

<span data-ttu-id="61537-214">Dati archiviati nei file AOF sono suddivisa in più BLOB di pagine per le prestazioni di salvataggio hello dati toostorage tooincrease del nodo.</span><span class="sxs-lookup"><span data-stu-id="61537-214">Data stored in AOF files is divided into multiple page blobs per node tooincrease performance of saving hello data toostorage.</span></span> <span data-ttu-id="61537-215">Hello nella tabella seguente viene visualizzato il numero di BLOB di pagine vengono utilizzati per ogni livello di prezzo:</span><span class="sxs-lookup"><span data-stu-id="61537-215">hello following table displays how many page blobs are used for each pricing tier:</span></span>

| <span data-ttu-id="61537-216">Livello Premium</span><span class="sxs-lookup"><span data-stu-id="61537-216">Premium tier</span></span> | <span data-ttu-id="61537-217">Blobs</span><span class="sxs-lookup"><span data-stu-id="61537-217">Blobs</span></span> |
|--------------|-------|
| <span data-ttu-id="61537-218">P1</span><span class="sxs-lookup"><span data-stu-id="61537-218">P1</span></span>           | <span data-ttu-id="61537-219">4 per partizione</span><span class="sxs-lookup"><span data-stu-id="61537-219">4 per shard</span></span>    |
| <span data-ttu-id="61537-220">P2</span><span class="sxs-lookup"><span data-stu-id="61537-220">P2</span></span>           | <span data-ttu-id="61537-221">8 per partizione</span><span class="sxs-lookup"><span data-stu-id="61537-221">8 per shard</span></span>    |
| <span data-ttu-id="61537-222">P3</span><span class="sxs-lookup"><span data-stu-id="61537-222">P3</span></span>           | <span data-ttu-id="61537-223">16 per partizione</span><span class="sxs-lookup"><span data-stu-id="61537-223">16 per shard</span></span>   |
| <span data-ttu-id="61537-224">P4</span><span class="sxs-lookup"><span data-stu-id="61537-224">P4</span></span>           | <span data-ttu-id="61537-225">20 per partizione</span><span class="sxs-lookup"><span data-stu-id="61537-225">20 per shard</span></span>   |

<span data-ttu-id="61537-226">Quando il servizio cluster è abilitato, ogni partizione nella cache di hello ha un proprio set di BLOB di pagine, come indicato nella tabella precedente hello.</span><span class="sxs-lookup"><span data-stu-id="61537-226">When clustering is enabled, each shard in hello cache has its own set of page blobs, as indicated in hello previous table.</span></span> <span data-ttu-id="61537-227">Una cache P2 con tre partizioni, ad esempio, distribuisce il proprio file AOF su 24 BLOB di pagine (8 BLOB per partizione, con 3 partizioni).</span><span class="sxs-lookup"><span data-stu-id="61537-227">For example, a P2 cache with three shards distributes its AOF file across 24 page blobs (8 blobs per shard, with 3 shards).</span></span>

<span data-ttu-id="61537-228">Dopo una riscrittura, nello spazio di archiviazione sono presenti due set di file AOF.</span><span class="sxs-lookup"><span data-stu-id="61537-228">After a rewrite, two sets of AOF files exist in storage.</span></span> <span data-ttu-id="61537-229">Riscrive vengono eseguite in background hello e aggiungere toohello primo set di file, mentre le operazioni di impostazione che vengono inviate toohello cache durante la riscrittura hello aggiungere toohello secondo set.</span><span class="sxs-lookup"><span data-stu-id="61537-229">Rewrites occur in hello background and append toohello first set of files, while set operations that are sent toohello cache during hello rewrite append toohello second set.</span></span> <span data-ttu-id="61537-230">Una copia di backup viene archiviata temporaneamente durante la riscrittura in caso di errore, ma viene eliminata immediatamente dopo il completamento della riscrittura.</span><span class="sxs-lookup"><span data-stu-id="61537-230">A backup is temporarily stored during rewrites in case of failure, but is promptly deleted after a rewrite finishes.</span></span>


## <a name="next-steps"></a><span data-ttu-id="61537-231">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="61537-231">Next steps</span></span>
<span data-ttu-id="61537-232">Informazioni su come toouse premium più memorizzano nella cache le funzionalità.</span><span class="sxs-lookup"><span data-stu-id="61537-232">Learn how toouse more premium cache features.</span></span>

* [<span data-ttu-id="61537-233">Livello di introduzione toohello Premium di Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="61537-233">Introduction toohello Azure Redis Cache Premium tier</span></span>](cache-premium-tier-intro.md)

<!-- IMAGES -->

[redis-cache-premium-pricing-tier]: ./media/cache-how-to-premium-persistence/redis-cache-premium-pricing-tier.png

[redis-cache-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-persistence.png

[redis-cache-rdb-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-rdb-persistence.png

[redis-cache-aof-persistence]: ./media/cache-how-to-premium-persistence/redis-cache-aof-persistence.png

[redis-cache-settings]: ./media/cache-how-to-premium-persistence/redis-cache-settings.png
