---
title: Integrazione di un'app in una rete virtuale di Azure
description: Illustra come connettere un'app del servizio app di Azure a una rete virtuale di Azure nuova o esistente
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: cephalin
ms.assetid: 90bc6ec6-133d-4d87-a867-fcf77da75f5a
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/23/2017
ms.author: ccompy
ms.openlocfilehash: 61508f759cad92a8c17d72a5d68fb54994c393bc
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="integrate-your-app-with-an-azure-virtual-network"></a><span data-ttu-id="bb066-103">Integrare un'app in una rete virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="bb066-103">Integrate your app with an Azure Virtual Network</span></span>
<span data-ttu-id="bb066-104">Questo documento descrive la funzionalità di integrazione del servizio app di Azure in una rete virtuale, specificando come configurarla con le app del [servizio app di Azure](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="bb066-104">This document describes the Azure App Service virtual network integration feature and shows how to set it up with apps in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span> <span data-ttu-id="bb066-105">Se non si ha familiarità con le reti virtuali di Azure, si tratta di una funzionalità che consente di posizionare molte delle risorse di Azure in una rete instradabile non Internet a cui si controlla l'accesso.</span><span class="sxs-lookup"><span data-stu-id="bb066-105">If you are unfamiliar with Azure Virtual Networks (VNets), this is a capability that allows you to place many of your Azure resources in a non-internet routeable network that you control access to.</span></span> <span data-ttu-id="bb066-106">Queste reti possono quindi essere connesse alle reti locali usando diverse tecnologie VPN.</span><span class="sxs-lookup"><span data-stu-id="bb066-106">These networks can then be connected to your on-premises networks using a variety of VPN technologies.</span></span> <span data-ttu-id="bb066-107">Per altre informazioni sulle reti virtuali di Azure, è possibile iniziare dalla [Panoramica sulla rete virtuale di Azure][VNETOverview].</span><span class="sxs-lookup"><span data-stu-id="bb066-107">To learn more about Azure Virtual Networks, start with the information here: [Azure Virtual Network Overview][VNETOverview].</span></span> 

<span data-ttu-id="bb066-108">Il servizio app di Azure è disponibile in due forme.</span><span class="sxs-lookup"><span data-stu-id="bb066-108">The Azure App Service has two forms.</span></span> 

1. <span data-ttu-id="bb066-109">I sistemi multi-tenant che supportano l'intera gamma dei piani tariffari</span><span class="sxs-lookup"><span data-stu-id="bb066-109">The multi-tenant systems that support the full range of pricing plans</span></span>
2. <span data-ttu-id="bb066-110">La funzionalità Premium ambiente del servizio app (ASE) che consente la distribuzione nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-110">The App Service Environment (ASE) premium feature, which deploys into your VNet.</span></span> 

<span data-ttu-id="bb066-111">Questo documento tratta dell'integrazione rete virtuale, ma non dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="bb066-111">This document goes through VNet Integration and not App Service Environment.</span></span> <span data-ttu-id="bb066-112">Per altre informazioni sulla funzionalità dell'ambiente del servizio app, iniziare dall'articolo [Introduzione all'ambiente del servizio app][ASEintro].</span><span class="sxs-lookup"><span data-stu-id="bb066-112">If you want to learn more about the ASE feature, start with the information here: [App Service Environment introduction][ASEintro].</span></span>

<span data-ttu-id="bb066-113">Integrazione rete virtuale consente all'app Web di accedere alle risorse presenti nella propria rete virtuale. Al contrario, l'accesso privato all'app Web dalla rete virtuale non viene concesso.</span><span class="sxs-lookup"><span data-stu-id="bb066-113">VNet Integration gives your web app access to resources in your virtual network but does not grant private access to your web app from the virtual network.</span></span> <span data-ttu-id="bb066-114">Per accesso privato s'intende la possibilità di rendere l'app accessibile soltanto da una rete privata, ad esempio all'interno di una rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="bb066-114">Private site access refers to making your app only accessible from a private network such as from within an Azure virtual network.</span></span> <span data-ttu-id="bb066-115">L'accesso privato al sito è disponibile solo con un ambiente del servizio app configurato con un servizio di bilanciamento del carico interno (ILB).</span><span class="sxs-lookup"><span data-stu-id="bb066-115">Private site access is only available with an ASE configured with an Internal Load Balancer (ILB).</span></span> <span data-ttu-id="bb066-116">Per informazioni dettagliate in proposito, vedere [Uso di un servizio di bilanciamento del carico interno con un ambiente del servizio app][ILBASE].</span><span class="sxs-lookup"><span data-stu-id="bb066-116">For details on using an ILB ASE, start with the article here: [Creating and using an ILB ASE][ILBASE].</span></span> 

<span data-ttu-id="bb066-117">L'integrazione rete virtuale viene comunemente usata per consentire l'accesso dall'app Web a un database o a un servizio Web in esecuzione in una macchina virtuale nella rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="bb066-117">A common scenario where you would use VNet Integration is enabling access from your web app to a database or a web service running on a virtual machine in your Azure virtual network.</span></span> <span data-ttu-id="bb066-118">Con Integrazione rete virtuale non è necessario esporre un endpoint pubblico per le applicazioni nella macchina virtuale ma è possibile usare gli indirizzi instradabili non Internet privati.</span><span class="sxs-lookup"><span data-stu-id="bb066-118">With VNet Integration, you don't need to expose a public endpoint for applications on your VM but can use the private non-internet routable addresses instead.</span></span> 

<span data-ttu-id="bb066-119">La funzionalità Integrazione rete virtuale:</span><span class="sxs-lookup"><span data-stu-id="bb066-119">The VNet Integration feature:</span></span>

* <span data-ttu-id="bb066-120">richiede un piano tariffario Standard, Premium o Isolated</span><span class="sxs-lookup"><span data-stu-id="bb066-120">requires a Standard, Premium, or Isolated pricing plan</span></span> 
* <span data-ttu-id="bb066-121">funziona con reti virtuali classiche o di Resource Manager</span><span class="sxs-lookup"><span data-stu-id="bb066-121">works with Classic or Resource Manager VNet</span></span> 
* <span data-ttu-id="bb066-122">supporta TCP e UDP</span><span class="sxs-lookup"><span data-stu-id="bb066-122">supports TCP and UDP</span></span>
* <span data-ttu-id="bb066-123">funziona con le app Web, le app per dispositivi mobili e le app per le API</span><span class="sxs-lookup"><span data-stu-id="bb066-123">works with Web, Mobile, and API apps</span></span>
* <span data-ttu-id="bb066-124">consente a un'app di connettersi a 1 sola rete virtuale alla volta</span><span class="sxs-lookup"><span data-stu-id="bb066-124">enables an app to connect to only 1 VNet at a time</span></span>
* <span data-ttu-id="bb066-125">consente di integrare fino a cinque reti virtuali in un piano di servizio app</span><span class="sxs-lookup"><span data-stu-id="bb066-125">enables up to five VNets to be integrated with in an App Service Plan</span></span> 
* <span data-ttu-id="bb066-126">consente l'uso della stessa rete virtuale da parte di più app in un piano di servizio app</span><span class="sxs-lookup"><span data-stu-id="bb066-126">allows the same VNet to be used by multiple apps in an App Service Plan</span></span>
* <span data-ttu-id="bb066-127">supporta un contratto di servizio pari al 99,9% grazie al contratto di servizio sul gateway di rete virtuale</span><span class="sxs-lookup"><span data-stu-id="bb066-127">supports a 99.9% SLA due to the SLA on the VNet Gateway</span></span>

<span data-ttu-id="bb066-128">Tra le operazioni non supportate da Integrazione rete virtuale:</span><span class="sxs-lookup"><span data-stu-id="bb066-128">There are some things that VNet Integration does not support including:</span></span>

* <span data-ttu-id="bb066-129">montaggio di un'unità</span><span class="sxs-lookup"><span data-stu-id="bb066-129">mounting a drive</span></span>
* <span data-ttu-id="bb066-130">integrazione di AD</span><span class="sxs-lookup"><span data-stu-id="bb066-130">AD integration</span></span> 
* <span data-ttu-id="bb066-131">NetBios</span><span class="sxs-lookup"><span data-stu-id="bb066-131">NetBios</span></span>
* <span data-ttu-id="bb066-132">accesso al sito privato</span><span class="sxs-lookup"><span data-stu-id="bb066-132">private site access</span></span>

### <a name="getting-started"></a><span data-ttu-id="bb066-133">Introduzione</span><span class="sxs-lookup"><span data-stu-id="bb066-133">Getting started</span></span>
<span data-ttu-id="bb066-134">Prima di procedere con la connessione della propria app Web a una rete virtuale, è opportuno prendere in considerazione i seguenti aspetti:</span><span class="sxs-lookup"><span data-stu-id="bb066-134">Here are some things to keep in mind before connecting your web app to a virtual network:</span></span>

* <span data-ttu-id="bb066-135">Integrazione rete virtuale funziona solo con le app dei piani tariffari **Standard**, **Premium** o **Isolated**.</span><span class="sxs-lookup"><span data-stu-id="bb066-135">VNet Integration only works with apps in a **Standard**, **Premium**, or **Isolated** pricing plan.</span></span> <span data-ttu-id="bb066-136">Se si abilita la funzionalità e successivamente il piano di servizio app viene ridimensionato a un piano tariffario non supportato, le app perdono la connessione alle relative reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="bb066-136">If you enable the feature, and then scale your App Service Plan to an unsupported pricing plan your apps lose their connections to the VNets they are using.</span></span> 
* <span data-ttu-id="bb066-137">Se la rete virtuale di destinazione esiste già, deve trattarsi di una VPN da punto a sito con un gateway di routing dinamico per poter eseguire la connessione a un'app.</span><span class="sxs-lookup"><span data-stu-id="bb066-137">If your target virtual network already exists, it must have point-to-site VPN enabled with a Dynamic routing gateway before it can be connected to an app.</span></span> <span data-ttu-id="bb066-138">Non è possibile attivare la VPN da punto a sito se il gateway è configurato con il routing statico.</span><span class="sxs-lookup"><span data-stu-id="bb066-138">If your gateway is configured with Static routing, you cannot enable point-to-site Virtual Private Network (VPN).</span></span>
* <span data-ttu-id="bb066-139">La rete virtuale deve essere inclusa nella stessa sottoscrizione del piano di servizio app (ASP).</span><span class="sxs-lookup"><span data-stu-id="bb066-139">The VNet must be in the same subscription as your App Service Plan(ASP).</span></span> 
* <span data-ttu-id="bb066-140">Le app che si integrano con una rete virtuale usano il DNS specificato per quella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-140">The apps that integrate with a VNet use the DNS that is specified for that VNet.</span></span>
* <span data-ttu-id="bb066-141">Per impostazione predefinita, le app di integrazione instradano il traffico nella rete virtuale esclusivamente in base alle route definite nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-141">By default your integrating apps only route traffic into your VNet based on the routes that are defined in your VNet.</span></span> 

## <a name="enabling-vnet-integration"></a><span data-ttu-id="bb066-142">Abilitazione della funzionalità Integrazione rete virtuale</span><span class="sxs-lookup"><span data-stu-id="bb066-142">Enabling VNet Integration</span></span>
<span data-ttu-id="bb066-143">Questo documento è incentrato principalmente sull'uso del portale di Azure per l'integrazione rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-143">This document is focused primarily on using the Azure portal for VNet Integration.</span></span> <span data-ttu-id="bb066-144">Per abilitare l'integrazione rete virtuale con l'app tramite PowerShell, seguire le istruzioni riportate nell'articolo [Connettere l'app alla rete virtuale tramite PowerShell][IntPowershell].</span><span class="sxs-lookup"><span data-stu-id="bb066-144">To enable VNet Integration with your app using PowerShell, follow the directions here: [Connect your app to your virtual network by using PowerShell][IntPowershell].</span></span>

<span data-ttu-id="bb066-145">È possibile connettere l'app a una rete virtuale nuova o a una esistente.</span><span class="sxs-lookup"><span data-stu-id="bb066-145">You have the option to connect your app to a new or existing virtual network.</span></span> <span data-ttu-id="bb066-146">Se si crea una nuova rete durante l'integrazione, oltre a creare la rete virtuale, viene preconfigurato un gateway di routing dinamico e viene abilitata una VPN da punto a sito.</span><span class="sxs-lookup"><span data-stu-id="bb066-146">If you create a new network as a part of your integration, then in addition to just creating the VNet, a dynamic routing gateway is pre-configured for you and Point to Site VPN is enabled.</span></span> 

> [!NOTE]
> <span data-ttu-id="bb066-147">La configurazione di una nuova integrazione di reti virtuali può richiedere diversi minuti.</span><span class="sxs-lookup"><span data-stu-id="bb066-147">Configuring a new virtual network integration can take several minutes.</span></span> 
> 
> 

<span data-ttu-id="bb066-148">Per abilitare Integrazione rete virtuale, aprire le impostazioni dell'app e selezionare Rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-148">To enable VNet Integration, open your app Settings and then select Networking.</span></span> <span data-ttu-id="bb066-149">L'interfaccia utente visualizzata offre tre opzioni di rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-149">The UI that opens up offers three networking choices.</span></span> <span data-ttu-id="bb066-150">Questa guida tratta solo la funzionalità Integrazione rete virtuale, anche se le connessioni ibride e gli ambienti del servizio app sono descritti più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="bb066-150">This guide is only going into VNet Integration though Hybrid Connections and App Service Environments are discussed later in this document.</span></span> 

<span data-ttu-id="bb066-151">Se l'app non è inclusa nel piano tariffario corretto, l'interfaccia utente permette di scegliere un piano tariffario superiore.</span><span class="sxs-lookup"><span data-stu-id="bb066-151">If your app is not in the correct pricing plan, the UI enables you to scale your plan to a higher pricing plan of your choice.</span></span>

![][1]

### <a name="enabling-vnet-integration-with-a-pre-existing-vnet"></a><span data-ttu-id="bb066-152">Abilitazione della funzionalità Integrazione rete virtuale con una rete virtuale preesistente</span><span class="sxs-lookup"><span data-stu-id="bb066-152">Enabling VNet Integration with a pre-existing VNet</span></span>
<span data-ttu-id="bb066-153">L'interfaccia utente di Integrazione rete virtuale consente di selezionare da un elenco di reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="bb066-153">The VNet Integration UI allows you to select from a list of your VNets.</span></span> <span data-ttu-id="bb066-154">Le reti virtuali classiche sono quelle indicate dalla parola "classica" tra parentesi accanto al nome della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-154">The Classic VNets indicate that they are such with the word "Classic" in parentheses next to the VNet name.</span></span> <span data-ttu-id="bb066-155">L'elenco è ordinato in modo che le reti virtuali di Resource Manager siano riportate per prime.</span><span class="sxs-lookup"><span data-stu-id="bb066-155">The list is sorted such that the Resource Manager VNets are listed first.</span></span> <span data-ttu-id="bb066-156">L'immagine seguente mostra che è possibile selezionare solo una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-156">In the image shown below you can see that only one VNet can be selected.</span></span> <span data-ttu-id="bb066-157">Una rete virtuale può risultare disattivata per diversi motivi, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="bb066-157">There are multiple reasons that a VNet can be grayed out including:</span></span>

* <span data-ttu-id="bb066-158">la rete virtuale è in un'altra sottoscrizione a cui l'account ha accesso</span><span class="sxs-lookup"><span data-stu-id="bb066-158">the VNet is in another subscription that your account has access to</span></span>
* <span data-ttu-id="bb066-159">la rete virtuale non è da punto a sito</span><span class="sxs-lookup"><span data-stu-id="bb066-159">the VNet does not have Point to Site enabled</span></span>
* <span data-ttu-id="bb066-160">la rete virtuale non ha un gateway di routing dinamico</span><span class="sxs-lookup"><span data-stu-id="bb066-160">the VNet does not have a dynamic routing gateway</span></span>

![][2]

<span data-ttu-id="bb066-161">Per abilitare l'integrazione è sufficiente fare clic sulla rete virtuale con cui eseguire l'integrazione.</span><span class="sxs-lookup"><span data-stu-id="bb066-161">To enable integration simply click on the VNet you wish to integrate with.</span></span> <span data-ttu-id="bb066-162">Dopo aver selezionato la rete virtuale, l'app verrà riavviata automaticamente per rendere effettive le modifiche.</span><span class="sxs-lookup"><span data-stu-id="bb066-162">After you select the VNet, your app is automatically restarted for the changes to take effect.</span></span> 

##### <a name="enable-point-to-site-in-a-classic-vnet"></a><span data-ttu-id="bb066-163">Abilitare la connessione da punto a sito in una rete virtuale classica</span><span class="sxs-lookup"><span data-stu-id="bb066-163">Enable Point to Site in a Classic VNet</span></span>
<span data-ttu-id="bb066-164">Se la rete virtuale non ha un gateway e non è da punto a sito, è necessario eseguirne prima di tutto la configurazione.</span><span class="sxs-lookup"><span data-stu-id="bb066-164">If your VNet does not have a gateway nor has Point to Site, then you have to set that up first.</span></span> <span data-ttu-id="bb066-165">Per eseguire questa operazione per una rete virtuale classica, accedere al [portale di Azure][AzurePortal] e visualizzare l'elenco Reti virtuali (classico).</span><span class="sxs-lookup"><span data-stu-id="bb066-165">To do this for a Classic VNet, go to the [Azure portal][AzurePortal] and bring up the list of Virtual Networks(classic).</span></span> <span data-ttu-id="bb066-166">Qui fare clic sulla rete con cui eseguire l'integrazione e quindi sulla casella grande Connessioni VPN in Informazioni di base.</span><span class="sxs-lookup"><span data-stu-id="bb066-166">From here, click on the network you want to integrate with and click on the big box under Essentials called VPN Connections.</span></span> <span data-ttu-id="bb066-167">Da qui è possibile creare la VPN da punto a sito e anche fare in modo che venga creato un gateway.</span><span class="sxs-lookup"><span data-stu-id="bb066-167">From here, you can create your point to site VPN and even have it create a gateway.</span></span> <span data-ttu-id="bb066-168">La rete da punto a sito con gateway appena creata sarà pronta dopo circa 30 minuti.</span><span class="sxs-lookup"><span data-stu-id="bb066-168">After you go through the point to site with gateway creation experience it is about 30 minutes before it is ready.</span></span> 

![][8]

##### <a name="enabling-point-to-site-in-a-resource-manager-vnet"></a><span data-ttu-id="bb066-169">Abilitare la connessione da punto a sito in una rete virtuale di Resource Manager</span><span class="sxs-lookup"><span data-stu-id="bb066-169">Enabling Point to Site in a Resource Manager VNet</span></span>
<span data-ttu-id="bb066-170">Per configurare una connessione da punto a sito in una rete virtuale di Resource Manager con un gateway, è possibile usare PowerShell come descritto in [Configurare una connessione da punto a sito a una rete virtuale con PowerShell][V2VNETP2S] o usare il portale di Azure come descritto in [Configurare una connessione da punto a sito a una rete virtuale usando il portale di Azure][V2VNETPortal].</span><span class="sxs-lookup"><span data-stu-id="bb066-170">To configure a Resource Manager VNet with a gateway and Point to Site, you can use either PowerShell as documented here, [Configure a Point-to-Site connection to a virtual network using PowerShell][V2VNETP2S] or use the Azure portal as documented here, [Configure a Point-to-Site connection to a VNet using the Azure portal][V2VNETPortal].</span></span> <span data-ttu-id="bb066-171">L'interfaccia utente per eseguire questa funzionalità non è ancora disponibile.</span><span class="sxs-lookup"><span data-stu-id="bb066-171">The UI to perform this capability is not yet available.</span></span> <span data-ttu-id="bb066-172">Tenere presente che la configurazione da punto a sito non richiede la creazione di certificati,</span><span class="sxs-lookup"><span data-stu-id="bb066-172">Note that you need to create certificates for the Point to Site configuration.</span></span> <span data-ttu-id="bb066-173">poiché viene configurata automaticamente quando si connette l'app Web alla rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-173">This is automatically configured when you connect your WebApp to the VNet.</span></span> 

### <a name="creating-a-pre-configured-vnet"></a><span data-ttu-id="bb066-174">Creazione di una rete virtuale preconfigurata</span><span class="sxs-lookup"><span data-stu-id="bb066-174">Creating a pre-configured VNet</span></span>
<span data-ttu-id="bb066-175">Se si vuole creare una nuova rete virtuale configurata con un gateway e una connessione da punto a sito, è possibile usare l'interfaccia utente di rete del servizio app, ma solo per una rete virtuale di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="bb066-175">If you want to create a new VNet that is configured with a gateway and Point-to-Site, then the App Service networking UI has the capability to do that but only for a Resource Manager VNet.</span></span> <span data-ttu-id="bb066-176">Se si vuole creare una rete virtuale classica con un gateway e una connessione da punto a sito, l'operazione deve essere eseguita manualmente tramite l'interfaccia utente di rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-176">If you wish to create a Classic VNet with a gateway and Point-to-Site, then you need to do this manually through the Networking user interface.</span></span> 

<span data-ttu-id="bb066-177">Per creare una rete virtuale di Resource Manager tramite l'interfaccia utente dell'integrazione rete virtuale, è sufficiente selezionare **Crea una nuova rete virtuale** e specificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="bb066-177">To create a Resource Manager VNet through the VNet Integration UI, simply select **Create New Virtual Network** and provide the:</span></span>

* <span data-ttu-id="bb066-178">Nome della rete virtuale</span><span class="sxs-lookup"><span data-stu-id="bb066-178">Virtual Network Name</span></span>
* <span data-ttu-id="bb066-179">Blocco di indirizzi della rete virtuale</span><span class="sxs-lookup"><span data-stu-id="bb066-179">Virtual Network Address Block</span></span>
* <span data-ttu-id="bb066-180">Nome della subnet</span><span class="sxs-lookup"><span data-stu-id="bb066-180">Subnet Name</span></span>
* <span data-ttu-id="bb066-181">Blocco di indirizzi della subnet</span><span class="sxs-lookup"><span data-stu-id="bb066-181">Subnet Address Block</span></span>
* <span data-ttu-id="bb066-182">Blocco di indirizzi del gateway</span><span class="sxs-lookup"><span data-stu-id="bb066-182">Gateway Address Block</span></span>
* <span data-ttu-id="bb066-183">Blocco di indirizzi della connessione da punto a sito</span><span class="sxs-lookup"><span data-stu-id="bb066-183">Point-to-Site Address Block</span></span>

<span data-ttu-id="bb066-184">Se si vuole che la rete virtuale si connetta alle altre reti è consigliabile evitare di scegliere uno spazio di indirizzi IP che si sovrappone a tali reti.</span><span class="sxs-lookup"><span data-stu-id="bb066-184">If you want this VNet to connect to any other networks, then you should avoid picking IP address space that overlaps with those networks.</span></span> 

> [!NOTE]
> <span data-ttu-id="bb066-185">Per creare una rete virtuale di Resource Manager con un gateway sono necessari circa 30 minuti e attualmente la rete virtuale non viene integrata con l'app.</span><span class="sxs-lookup"><span data-stu-id="bb066-185">Resource Manager VNet creation with a gateway takes about 30 minutes and currently does not integrate the VNet with your app.</span></span> <span data-ttu-id="bb066-186">Dopo la creazione della rete virtuale con il gateway è necessario tornare all'interfaccia utente di Integrazione rete virtuale dell'app e selezionare la nuova rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-186">After your VNet is created with the gateway you need to come back to your app VNet Integration UI and select your new VNet.</span></span>
> 
> 

![][3]

<span data-ttu-id="bb066-187">Le reti virtuali di Azure in genere vengono create all'interno di indirizzi di rete privati.</span><span class="sxs-lookup"><span data-stu-id="bb066-187">Azure VNets normally are created within private network addresses.</span></span> <span data-ttu-id="bb066-188">Per impostazione predefinita, la funzionalità Integrazione rete virtuale instrada nella rete virtuale il traffico destinato a tali intervalli di indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="bb066-188">By default the VNet Integration feature routes any traffic destined for those IP address ranges into your VNet.</span></span> <span data-ttu-id="bb066-189">Gli intervalli di indirizzi IP privati sono:</span><span class="sxs-lookup"><span data-stu-id="bb066-189">The private IP address ranges are:</span></span>

* <span data-ttu-id="bb066-190">10.0.0.0/8 - equivalente a 10.0.0.0 - 10.255.255.255</span><span class="sxs-lookup"><span data-stu-id="bb066-190">10.0.0.0/8 - this is the same as 10.0.0.0 - 10.255.255.255</span></span>
* <span data-ttu-id="bb066-191">172.16.0.0/12 - equivalente a 172.16.0.0 - 172.31.255.255</span><span class="sxs-lookup"><span data-stu-id="bb066-191">172.16.0.0/12 - this is the same as 172.16.0.0 - 172.31.255.255</span></span> 
* <span data-ttu-id="bb066-192">192.168.0.0/16 - equivalente a 192.168.0.0 - 192.168.255.255</span><span class="sxs-lookup"><span data-stu-id="bb066-192">192.168.0.0/16 - this is the same as 192.168.0.0 - 192.168.255.255</span></span>

<span data-ttu-id="bb066-193">Lo spazio di indirizzi della rete virtuale deve essere specificato usando la notazione CIDR.</span><span class="sxs-lookup"><span data-stu-id="bb066-193">The VNet address space needs to be specified in CIDR notation.</span></span> <span data-ttu-id="bb066-194">Se non si ha familiarità con la notazione CIDR, si tratta di un metodo per specificare blocchi di indirizzi usando un indirizzo IP e un numero intero che rappresenta la network mask.</span><span class="sxs-lookup"><span data-stu-id="bb066-194">If you are unfamiliar with CIDR notation, it is a method for specifying address blocks using an IP address and an integer that represents the network mask.</span></span> <span data-ttu-id="bb066-195">Come riferimento rapido, tenere presente che 10.1.0.0/24 equivale a 256 indirizzi e 10.1.0.0/25 equivale a 128 indirizzi.</span><span class="sxs-lookup"><span data-stu-id="bb066-195">As a quick reference, consider that 10.1.0.0/24 would be 256 addresses and 10.1.0.0/25 would be 128 addresses.</span></span> <span data-ttu-id="bb066-196">Un indirizzo IPv4 che termina con /32 equivale a 1 indirizzo.</span><span class="sxs-lookup"><span data-stu-id="bb066-196">An IPv4 address with a /32 would be just 1 address.</span></span> 

<span data-ttu-id="bb066-197">Le informazioni sul server DNS impostate qui verranno usate per impostare la rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-197">If you set the DNS server information here, then that is set for your VNet.</span></span> <span data-ttu-id="bb066-198">Dopo aver creato la rete virtuale è possibile modificare queste informazioni dall'esperienza utente della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-198">After VNet creation you can edit this information from the VNet user experiences.</span></span> <span data-ttu-id="bb066-199">Se si modifica il DNS della rete virtuale, è necessario eseguire un'operazione Sincronizza rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-199">If you change the DNS of the VNet, then you need to perform a Sync Network operation.</span></span>

<span data-ttu-id="bb066-200">Quando si crea una rete virtuale classica usando l'interfaccia utente dell'integrazione rete virtuale, questa viene creata nello stesso gruppo di risorse dell'app.</span><span class="sxs-lookup"><span data-stu-id="bb066-200">When you create a Classic VNet using the VNet Integration UI, it creates a VNet in the same resource group as your app.</span></span> 

## <a name="how-the-system-works"></a><span data-ttu-id="bb066-201">Funzionamento del sistema</span><span class="sxs-lookup"><span data-stu-id="bb066-201">How the system works</span></span>
<span data-ttu-id="bb066-202">Questa funzionalità sfrutta la tecnologia VPN da punto a sito per connettere l'app alla rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-202">Under the covers this feature builds on top of Point-to-Site VPN technology to connect your app to your VNet.</span></span> <span data-ttu-id="bb066-203">Le app nei Siti Web di Microsoft Azure presentano un'architettura del sistema multi-tenant che preclude il provisioning di un'app direttamente in una rete virtuale come si fa con le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="bb066-203">Apps in Azure App Service have a multi-tenant system architecture, which precludes provisioning an app directly in a VNet as is done with virtual machines.</span></span> <span data-ttu-id="bb066-204">Grazie al ricorso alla tecnologia da punto a sito, è possibile consentire l'accesso alla rete solo alla macchina virtuale che ospita l'app.</span><span class="sxs-lookup"><span data-stu-id="bb066-204">By building on point-to-site technology we limit network access to just the virtual machine hosting the app.</span></span> <span data-ttu-id="bb066-205">L'accesso alla rete è ulteriormente limitato su questi host di app, per consentire alle app di accedere solo alle reti appositamente configurate a questo scopo.</span><span class="sxs-lookup"><span data-stu-id="bb066-205">Access to the network is further restricted on those app hosts so that your apps can only access the networks that you configure them to access.</span></span> 

![][4]

<span data-ttu-id="bb066-206">Se non è stato configurato un server DNS con la propria rete virtuale, l'app dovrà usare gli indirizzi IP per trovare la risorsa nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-206">If you haven’t configured a DNS server with your virtual network, your app will need to use IP addresses to reach resource in the VNet.</span></span> <span data-ttu-id="bb066-207">Quando si usano gli indirizzi IP, il vantaggio principale di questa funzionalità consiste nella possibilità di usare gli indirizzi privati all'interno della rete privata.</span><span class="sxs-lookup"><span data-stu-id="bb066-207">While using IP addresses, remember that the major benefit of this feature is that it enables you to use the private addresses within your private network.</span></span> <span data-ttu-id="bb066-208">Se si imposta l'app per l'uso di indirizzi IP pubblici per una delle proprie macchine virtuali, la funzionalità Integrazione rete virtuale non viene usata e le comunicazioni avvengono via Internet.</span><span class="sxs-lookup"><span data-stu-id="bb066-208">If you set your app up to use public IP addresses for one of your VMs, then you aren't using the VNet Integration feature and are communicating over the internet.</span></span>

## <a name="managing-the-vnet-integrations"></a><span data-ttu-id="bb066-209">Gestione delle integrazioni di reti virtuali</span><span class="sxs-lookup"><span data-stu-id="bb066-209">Managing the VNet Integrations</span></span>
<span data-ttu-id="bb066-210">La possibilità di connettersi e disconnettersi da una rete virtuale è a livello di app.</span><span class="sxs-lookup"><span data-stu-id="bb066-210">The ability to connect and disconnect to a VNet is at an app level.</span></span> <span data-ttu-id="bb066-211">Le operazioni che possono influenzare l'integrazione di reti virtuali tra più app sono a livello di ASP.</span><span class="sxs-lookup"><span data-stu-id="bb066-211">Operations that can affect the VNet Integration across multiple apps are at an ASP level.</span></span> <span data-ttu-id="bb066-212">Dall'interfaccia utente visualizzata a livello di app è possibile ottenere dettagli sulla rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-212">From the UI that is shown at the app level, you can get details on your VNet.</span></span> <span data-ttu-id="bb066-213">La maggior parte di queste informazioni viene visualizzata anche a livello di ASP.</span><span class="sxs-lookup"><span data-stu-id="bb066-213">Most of the same information is also shown at the ASP level.</span></span> 

![][5]

<span data-ttu-id="bb066-214">Dalla pagina Stato funzionalità di rete è possibile vedere se l'app è connessa alla rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-214">From the Network Feature Status page, you can see if your app is connected to your VNet.</span></span> <span data-ttu-id="bb066-215">Se il gateway della rete virtuale è inattivo per qualsiasi motivo, la rete viene visualizzata come non connessa.</span><span class="sxs-lookup"><span data-stu-id="bb066-215">If your VNet gateway is down for whatever reason, then this would show as not-connected.</span></span> 

<span data-ttu-id="bb066-216">Le informazioni ora disponibili nell'interfaccia utente di integrazione rete virtuale a livello di app sono le stesse fornite a livello di ASP.</span><span class="sxs-lookup"><span data-stu-id="bb066-216">The information you now have available to you in the app level VNet Integration UI is the same as the detail information you get from the ASP.</span></span> <span data-ttu-id="bb066-217">Nel dettaglio:</span><span class="sxs-lookup"><span data-stu-id="bb066-217">Here are those items:</span></span>

* <span data-ttu-id="bb066-218">Nome della rete virtuale: questo collegamento apre l'interfaccia utente della rete virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="bb066-218">VNet Name - This link opens the Azure virtual network UI</span></span>
* <span data-ttu-id="bb066-219">Località: indica la località della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-219">Location - This reflects the location of your VNet.</span></span> <span data-ttu-id="bb066-220">È possibile eseguire l'integrazione con una rete virtuale situata in un'altra località.</span><span class="sxs-lookup"><span data-stu-id="bb066-220">It is possible to integrate with a VNet in another location.</span></span>
* <span data-ttu-id="bb066-221">Stato dei certificati: qui sono riportati i certificati usati per proteggere la connessione VPN tra l'app e la rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-221">Certificate Status - There are certificates used to secure the VPN connection between the app and the VNet.</span></span> <span data-ttu-id="bb066-222">Lo stato restituisce il risultato di un test di verifica della sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="bb066-222">This reflects a test to ensure they are in sync.</span></span>
* <span data-ttu-id="bb066-223">Stato dei gateway: se i gateway sono inattivi per qualsiasi motivo, l'app non può accedere alle risorse nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-223">Gateway Status - Should your gateways be down for whatever reason then your app cannot access resources in the VNet.</span></span> 
* <span data-ttu-id="bb066-224">Spazio di indirizzi della rete virtuale: lo spazio di indirizzi IP della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-224">VNet address space - This is the IP address space for your VNet.</span></span> 
* <span data-ttu-id="bb066-225">Spazio di indirizzi da punto a sito: lo spazio di indirizzi IP da punto a sito della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-225">Point to Site address space - This is the point to site IP address space for your VNet.</span></span> <span data-ttu-id="bb066-226">L'app visualizza le comunicazioni come provenienti da uno degli IP in questo spazio di indirizzi.</span><span class="sxs-lookup"><span data-stu-id="bb066-226">Your app shows communication as coming from one of the IPs in this address space.</span></span> 
* <span data-ttu-id="bb066-227">Spazio di indirizzi da sito a sito: è possibile usare una connessione VPN da sito a sito per connettere la rete virtuale alle risorse locali o ad altre reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="bb066-227">Site to site address space - You can use Site to Site VPNs to connect your VNet to your on-premises resources or to other VNet.</span></span> <span data-ttu-id="bb066-228">Se questa impostazione è configurata, gli intervalli IP specificati con la connessione VPN vengono visualizzati qui.</span><span class="sxs-lookup"><span data-stu-id="bb066-228">Should you have that configured then the IP ranges defined with that VPN connection shows here.</span></span>
* <span data-ttu-id="bb066-229">Server DNS: qui sono elencati gli eventuali server DNS configurati con la rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-229">DNS Servers - If you have DNS Servers configured with your VNet, then they are listed here.</span></span>
* <span data-ttu-id="bb066-230">Indirizzi IP instradati alla rete virtuale: viene qui visualizzato l'elenco di indirizzi IP per cui è stato specificato il routing nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-230">IPs routed to the VNet - There are a list of IP addresses that your VNet has routing defined for, and those addresses show here.</span></span> 

<span data-ttu-id="bb066-231">L'unica operazione possibile nella vista app di Integrazione rete virtuale è la disconnessione dell'app dalla rete virtuale a cui è attualmente connessa.</span><span class="sxs-lookup"><span data-stu-id="bb066-231">The only operation you can take in the app view of your VNet Integration is to disconnect your app from the VNet it is currently connected to.</span></span> <span data-ttu-id="bb066-232">Per eseguire questa operazione, è sufficiente fare clic su Disconnetti nella parte superiore.</span><span class="sxs-lookup"><span data-stu-id="bb066-232">To do this simply click Disconnect at the top.</span></span> <span data-ttu-id="bb066-233">Questa azione non modifica la rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-233">This action does not change your VNet.</span></span> <span data-ttu-id="bb066-234">La rete virtuale e la relativa configurazione, inclusi i gateway, rimane invariata.</span><span class="sxs-lookup"><span data-stu-id="bb066-234">The VNet and its configuration including the gateways remains unchanged.</span></span> <span data-ttu-id="bb066-235">Per eliminare la rete virtuale è necessario eliminare prima le risorse al suo interno, inclusi i gateway.</span><span class="sxs-lookup"><span data-stu-id="bb066-235">If you then want to delete your VNet, you need to first delete the resources in it including the gateways.</span></span> 

<span data-ttu-id="bb066-236">La visualizzazione del piano di servizio app consente alcune operazioni aggiuntive</span><span class="sxs-lookup"><span data-stu-id="bb066-236">The App Service Plan view has a number of additional operations.</span></span> <span data-ttu-id="bb066-237">ed è anche accessibile diversamente, oltre che dall'app.</span><span class="sxs-lookup"><span data-stu-id="bb066-237">It is also accessed differently than from the app.</span></span> <span data-ttu-id="bb066-238">Per raggiungere l'interfaccia utente della rete ASP, è sufficiente aprire l'interfaccia utente ASP e scorrere verso il basso</span><span class="sxs-lookup"><span data-stu-id="bb066-238">To reach the ASP Networking UI simply open your ASP UI and scroll down.</span></span> <span data-ttu-id="bb066-239">fino a raggiungere l'elemento denominato Stato funzionalità di rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-239">There is a UI element called Network Feature Status.</span></span> <span data-ttu-id="bb066-240">L'elemento fornisce alcuni dettagli secondari sull'integrazione di reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="bb066-240">It gives some minor details around your VNet Integration.</span></span> <span data-ttu-id="bb066-241">Facendo clic su questo elemento, viene visualizzata l'interfaccia utente di Stato funzionalità di rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-241">Clicking on this UI opens the Network Feature Status UI.</span></span> <span data-ttu-id="bb066-242">Selezionando "Fare clic qui per gestire", viene visualizzato un elenco delle integrazioni di reti virtuali nell'ASP.</span><span class="sxs-lookup"><span data-stu-id="bb066-242">If you then click on "Click here to manage", the UI that lists the VNet Integrations in this ASP opens.</span></span>

![][6]

<span data-ttu-id="bb066-243">È utile ricordare la località dell'ASP quando si esaminano le località delle reti virtuali di cui si esegue l'integrazione.</span><span class="sxs-lookup"><span data-stu-id="bb066-243">The location of the ASP is good to remember when looking at the locations of the VNets you are integrating with.</span></span> <span data-ttu-id="bb066-244">Quando la rete virtuale è in un'altra località, è molto più probabile che ci siano problemi di latenza.</span><span class="sxs-lookup"><span data-stu-id="bb066-244">When the VNet is in another location you are far more likely to see latency issues.</span></span> 

<span data-ttu-id="bb066-245">La voce relativa alle reti virtuali integrate indica il numero di reti virtuali con cui le app sono integrate in questo ASP rispetto al numero di reti possibile.</span><span class="sxs-lookup"><span data-stu-id="bb066-245">The VNets integrated with is a reminder on how many VNets your apps are integrated with in this ASP and how many you can have.</span></span> 

<span data-ttu-id="bb066-246">Per visualizzare altri dettagli su ogni rete virtuale, fare clic sulla rete virtuale in questione.</span><span class="sxs-lookup"><span data-stu-id="bb066-246">To see added details on each VNet, just click on the VNet you are interested in.</span></span> <span data-ttu-id="bb066-247">Oltre ai dettagli rilevati in precedenza, viene visualizzato anche un elenco delle app nell'ASP che usano la rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-247">In addition to the details that were noted earlier, you can also see a list of the apps in this ASP that are using that VNet.</span></span> 

<span data-ttu-id="bb066-248">Sono disponibili due azioni principali.</span><span class="sxs-lookup"><span data-stu-id="bb066-248">With respect to actions there are two primary actions.</span></span> <span data-ttu-id="bb066-249">La prima è la possibilità di aggiungere route indirizzando il traffico dall'app alla propria rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-249">The first is the ability to add routes that drive traffic leaving your app into your VNet.</span></span> <span data-ttu-id="bb066-250">La seconda è la possibilità di sincronizzare i certificati e le informazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-250">The second action is the ability to sync certificates and network information.</span></span>

![][7]

<span data-ttu-id="bb066-251">**Routing**: come indicato in precedenza le route definite in una rete virtuale vengono usate per indirizzare il traffico dall'app alla propria rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-251">**Routing** As noted earlier the routes that are defined in your VNet are what is used for directing traffic into your VNet from your app.</span></span> <span data-ttu-id="bb066-252">L'invio di traffico aggiuntivo in uscita da un'app alla rete virtuale è possibile,</span><span class="sxs-lookup"><span data-stu-id="bb066-252">There are some uses though where customers want to send additional outbound traffic from an app into the VNet and for them this capability is provided.</span></span> <span data-ttu-id="bb066-253">ma la gestione del traffico da quel punto in poi dipende dalla configurazione della rete virtuale del cliente.</span><span class="sxs-lookup"><span data-stu-id="bb066-253">What happens to the traffic after that is up to how the customer configures their VNet.</span></span> 

<span data-ttu-id="bb066-254">**Certificati** : lo stato dei certificati riflette un controllo eseguito dal servizio app per verificare la validità dei certificati usati per la connessione VPN.</span><span class="sxs-lookup"><span data-stu-id="bb066-254">**Certificates** The Certificate Status reflects a check being performed by the App Service to validate that the certificates that we are using for the VPN connection are still good.</span></span> <span data-ttu-id="bb066-255">Quando la funzionalità Integrazione rete virtuale è abilitata, alla prima integrazione nella rete virtuale da una qualsiasi app in questo ASP è necessario uno scambio di certificati per garantire la sicurezza della connessione.</span><span class="sxs-lookup"><span data-stu-id="bb066-255">When VNet Integration enabled, then if this is the first integration to that VNet from any apps in this ASP, there is a required exchange of certificates to ensure the security of the connection.</span></span> <span data-ttu-id="bb066-256">Con i certificati si ottengono la configurazione DNS, le route e altre informazioni simili che descrivono la rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-256">Along with the certificates we get the DNS configuration, routes and other similar things that describe the network.</span></span>
<span data-ttu-id="bb066-257">Se vengono modificati i certificati o le informazioni di rete, è necessario eseguire nuovamente la sincronizzazione della rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-257">If those certificates or network information is changed, then you need to click "Sync Network".</span></span> <span data-ttu-id="bb066-258">**NOTA**: la sincronizzazione della rete provoca una breve interruzione della connettività tra l'app e la rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-258">**NOTE**: When you click "Sync Network" then you cause a brief outage in connectivity between your app and your VNet.</span></span> <span data-ttu-id="bb066-259">L'app non viene riavviata, ma la perdita di connettività potrebbe causare il funzionamento non corretto del sito.</span><span class="sxs-lookup"><span data-stu-id="bb066-259">While your app is not restarted, the loss of connectivity could cause your site to not function properly.</span></span> 

## <a name="accessing-on-premises-resources"></a><span data-ttu-id="bb066-260">Accesso alle risorse locali</span><span class="sxs-lookup"><span data-stu-id="bb066-260">Accessing on-premises resources</span></span>
<span data-ttu-id="bb066-261">Uno dei vantaggi offerti dalla funzionalità Integrazione rete virtuale è la possibilità per le app di accedere alle risorse locali direttamente dall'app, se la rete virtuale è connessa alla rete locale con una VPN da sito a sito.</span><span class="sxs-lookup"><span data-stu-id="bb066-261">One of the benefits of the VNet Integration feature is that if your VNet is connected to your on-premises network with a Site to Site VPN then your apps can have access to your on-premises resources from your app.</span></span> <span data-ttu-id="bb066-262">A questo scopo, tuttavia, è possibile che sia necessario aggiornare il gateway VPN locale con le route per l'intervallo IP da punto a sito.</span><span class="sxs-lookup"><span data-stu-id="bb066-262">For this to work though you may need to update your on-premises VPN gateway with the routes for your Point to Site IP range.</span></span> <span data-ttu-id="bb066-263">Quando la connessione VPN da sito a sito viene configurata per la prima volta, gli script usati per la configurazione devono impostare route che includono la VPN da punto a sito.</span><span class="sxs-lookup"><span data-stu-id="bb066-263">When the Site to Site VPN is first set up then the scripts used to configure it should set up routes including your Point to Site VPN.</span></span> <span data-ttu-id="bb066-264">Se la VPN da punto a sito viene aggiunta dopo aver creato la VPN da sito a sito, è necessario aggiornare le route manualmente.</span><span class="sxs-lookup"><span data-stu-id="bb066-264">If you add the Point to Site VPN after you create your Site to Site VPN, then you need to update the routes manually.</span></span> <span data-ttu-id="bb066-265">Le informazioni dettagliate su come eseguire questa operazione variano in base al gateway e non sono descritte in questo documento.</span><span class="sxs-lookup"><span data-stu-id="bb066-265">Details on how to do that vary per gateway and are not described here.</span></span> 

> [!NOTE]
> <span data-ttu-id="bb066-266">La funzionalità Integrazione rete virtuale non consente l'integrazione di un'app con una rete virtuale dotata di un gateway ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="bb066-266">The VNet Integration feature does not integrate an app with a VNet that has an ExpressRoute Gateway.</span></span> <span data-ttu-id="bb066-267">Anche se il gateway ExpressRoute è configurato in [modalità di coesistenza][VPNERCoex], Integrazione rete virtuale non funziona.</span><span class="sxs-lookup"><span data-stu-id="bb066-267">Even if the ExpressRoute Gateway is configured in [coexistence mode][VPNERCoex] the VNet Integration does not work.</span></span> <span data-ttu-id="bb066-268">Se è necessario accedere alle risorse tramite una connessione ExpressRoute, è possibile usare un [ambiente del servizio app][ASE] eseguito nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-268">If you need to access resources through an ExpressRoute connection, then you can use an [App Service Environment][ASE], which runs in your VNet.</span></span>
> 
> 

## <a name="pricing-details"></a><span data-ttu-id="bb066-269">Dettagli prezzi</span><span class="sxs-lookup"><span data-stu-id="bb066-269">Pricing details</span></span>
<span data-ttu-id="bb066-270">Quando si usa la funzionalità Integrazione rete virtuale è opportuno tenere presente alcune differenze nei prezzi.</span><span class="sxs-lookup"><span data-stu-id="bb066-270">There are a few pricing nuances that you should be aware of when using the VNet Integration feature.</span></span> <span data-ttu-id="bb066-271">I 3 costi correlati all'uso della funzionalità sono:</span><span class="sxs-lookup"><span data-stu-id="bb066-271">There are 3 related charges to the use of this feature:</span></span>

* <span data-ttu-id="bb066-272">Requisiti del piano tariffario ASP</span><span class="sxs-lookup"><span data-stu-id="bb066-272">ASP pricing tier requirements</span></span>
* <span data-ttu-id="bb066-273">Costi di trasferimento dati</span><span class="sxs-lookup"><span data-stu-id="bb066-273">Data transfer costs</span></span>
* <span data-ttu-id="bb066-274">Costi del gateway VPN</span><span class="sxs-lookup"><span data-stu-id="bb066-274">VPN Gateway costs.</span></span>

<span data-ttu-id="bb066-275">Perché le app possano usare questa funzionalità, devono far parte di un piano di servizio app di livello Premium o Standard.</span><span class="sxs-lookup"><span data-stu-id="bb066-275">For your apps to be able to use this feature, they need to be in a Standard or Premium App Service Plan.</span></span> <span data-ttu-id="bb066-276">Per altre informazioni sui costi, vedere i [prezzi del servizio app][ASPricing].</span><span class="sxs-lookup"><span data-stu-id="bb066-276">You can see more details on those costs here: [App Service Pricing][ASPricing].</span></span> 

<span data-ttu-id="bb066-277">A causa della modalità di gestione delle VPN da punto a sito, è sempre previsto un addebito per i dati in uscita attraverso la connessione di Integrazione rete virtuale anche se la rete virtuale si trova nello stesso data center.</span><span class="sxs-lookup"><span data-stu-id="bb066-277">Due to the way Point to Site VPNs are handled, you always have a charge for outbound data through your VNet Integration connection even if the VNet is in the same data center.</span></span> <span data-ttu-id="bb066-278">Per conoscere gli addebiti, vedere [Dettagli prezzi dei trasferimenti di dati][DataPricing].</span><span class="sxs-lookup"><span data-stu-id="bb066-278">To see what those charges are, take a look here: [Data Transfer Pricing Details][DataPricing].</span></span> 

<span data-ttu-id="bb066-279">L'ultimo elemento è il costo dei gateway di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-279">The last item is the cost of the VNet gateways.</span></span> <span data-ttu-id="bb066-280">Se il gateway non è necessario per altri motivi, ad esempio per le reti VPN da sito a sito, viene addebitato il costo dei gateway per il supporto della funzionalità Integrazione rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-280">If you don't need the gateways for something else such as Site to Site VPNs, then you are paying for gateways to support the VNet Integration feature.</span></span> <span data-ttu-id="bb066-281">Per informazioni su questi costi, vedere i [prezzi di Gateway VPN][VNETPricing].</span><span class="sxs-lookup"><span data-stu-id="bb066-281">There are details on those costs here: [VPN Gateway Pricing][VNETPricing].</span></span> 

## <a name="troubleshooting"></a><span data-ttu-id="bb066-282">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="bb066-282">Troubleshooting</span></span>
<span data-ttu-id="bb066-283">La funzionalità è semplice da configurare, ma possono comunque verificarsi problemi durante l'uso.</span><span class="sxs-lookup"><span data-stu-id="bb066-283">While the feature is easy to set up, that doesn't mean that your experience will be problem free.</span></span> <span data-ttu-id="bb066-284">In caso di problemi di accesso all'endpoint desiderato, sono disponibili varie utilità che permettono di testare la connettività dalla console dell'app.</span><span class="sxs-lookup"><span data-stu-id="bb066-284">Should you encounter problems accessing your desired endpoint there are some utilities you can use to test connectivity from the app console.</span></span> <span data-ttu-id="bb066-285">Le console disponibili sono due:</span><span class="sxs-lookup"><span data-stu-id="bb066-285">There are two console experiences you can use.</span></span> <span data-ttu-id="bb066-286">la console Kudu e la console raggiungibile nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="bb066-286">One is from the Kudu console and the other is the console that you can reach in the Azure portal.</span></span> <span data-ttu-id="bb066-287">Per accedere alla console Kudu dalla propria app, selezionare Strumenti -> Kudu.</span><span class="sxs-lookup"><span data-stu-id="bb066-287">To get to the Kudu console from your app go to Tools -> Kudu.</span></span> <span data-ttu-id="bb066-288">Questa operazione equivale a visitare [nomesito].scm.azurewebsites.net.</span><span class="sxs-lookup"><span data-stu-id="bb066-288">This is the same as going to [sitename].scm.azurewebsites.net.</span></span> <span data-ttu-id="bb066-289">Dopo l'apertura, passare alla scheda della console di debug. Per accedere alla console ospitata nel portale di Azure dalla propria app, selezionare Strumenti -> Console.</span><span class="sxs-lookup"><span data-stu-id="bb066-289">Once that opens simply go to the Debug console tab. To get to the Azure portal hosted console then from your app go to Tools -> Console.</span></span> 

#### <a name="tools"></a><span data-ttu-id="bb066-290">Strumenti</span><span class="sxs-lookup"><span data-stu-id="bb066-290">Tools</span></span>
<span data-ttu-id="bb066-291">Gli strumenti ping, nslookup e tracert non funzionano dalla console a causa di vincoli di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="bb066-291">The tools ping, nslookup and tracert won’t work through the console due to security constraints.</span></span> <span data-ttu-id="bb066-292">Per questo motivo sono stati aggiunti due strumenti separati.</span><span class="sxs-lookup"><span data-stu-id="bb066-292">To fill the void there have been two separate tools added.</span></span> <span data-ttu-id="bb066-293">Per testare la funzionalità del DNS è stato aggiunto lo strumento nameresolver.exe.</span><span class="sxs-lookup"><span data-stu-id="bb066-293">In order to test DNS functionality we added a tool named nameresolver.exe.</span></span> <span data-ttu-id="bb066-294">La sintassi è:</span><span class="sxs-lookup"><span data-stu-id="bb066-294">The syntax is:</span></span>

    nameresolver.exe hostname [optional: DNS Server]

<span data-ttu-id="bb066-295">Si può usare nameresolver per controllare i nomi host da cui dipende l'app.</span><span class="sxs-lookup"><span data-stu-id="bb066-295">You can use nameresolver to check the hostnames that your app depends on.</span></span> <span data-ttu-id="bb066-296">In questo modo è possibile verificare se la configurazione del server DNS è corretta e se si ha accesso al server DNS.</span><span class="sxs-lookup"><span data-stu-id="bb066-296">This way you can test if you have anything mis-configured with your DNS or perhaps don't have access to your DNS server.</span></span>

<span data-ttu-id="bb066-297">Il secondo strumento permette di verificare la connettività TCP a una combinazione di host e porta.</span><span class="sxs-lookup"><span data-stu-id="bb066-297">The next tool allows you to test for TCP connectivity to a host and port combination.</span></span> <span data-ttu-id="bb066-298">Si tratta dello strumento tcpping.exe, la cui sintassi è:</span><span class="sxs-lookup"><span data-stu-id="bb066-298">This tool is called tcpping.exe and the syntax is:</span></span>

    tcpping.exe hostname [optional: port]

<span data-ttu-id="bb066-299">L'utilità tcpping indica se è possibile raggiungere una porta e un host specifici.</span><span class="sxs-lookup"><span data-stu-id="bb066-299">The tcpping utility tells you if you can reach a specific host and port.</span></span> <span data-ttu-id="bb066-300">Essa visualizza il completamento solo se: è presente un'applicazione in ascolto presso la combinazione di host e porta ed è presente un accesso di rete dall'app all'host e alla porta specificati.</span><span class="sxs-lookup"><span data-stu-id="bb066-300">It only can show success if: there is an application listening at the host and port combination, and there is network access from your app to the specified host and port.</span></span>

#### <a name="debugging-access-to-vnet-hosted-resources"></a><span data-ttu-id="bb066-301">Accesso di debug a risorse ospitate su una rete virtuale</span><span class="sxs-lookup"><span data-stu-id="bb066-301">Debugging access to VNet hosted resources</span></span>
<span data-ttu-id="bb066-302">L'app potrebbe non riuscire a raggiungere un host e una porta specifici per una serie di motivi.</span><span class="sxs-lookup"><span data-stu-id="bb066-302">There are a number of things that can prevent your app from reaching a specific host and port.</span></span> <span data-ttu-id="bb066-303">Nella maggior parte dei casi il motivo è uno dei seguenti:</span><span class="sxs-lookup"><span data-stu-id="bb066-303">Most of the time it is one of three things:</span></span>

* <span data-ttu-id="bb066-304">**L'ostacolo è rappresentato da un firewall**: se è presente un firewall, si verifica il timeout TCP,</span><span class="sxs-lookup"><span data-stu-id="bb066-304">**There is a firewall in the way** If you have a firewall in the way, you will hit the TCP timeout.</span></span> <span data-ttu-id="bb066-305">che in questo caso è di 21 secondi.</span><span class="sxs-lookup"><span data-stu-id="bb066-305">That is 21 seconds in this case.</span></span> <span data-ttu-id="bb066-306">Usare lo strumento tcpping per testare la connettività.</span><span class="sxs-lookup"><span data-stu-id="bb066-306">Use the tcpping tool to test connectivity.</span></span> <span data-ttu-id="bb066-307">Il timeout TCP può essere dovuto anche ad altri motivi, ma è consigliabile iniziare dal firewall.</span><span class="sxs-lookup"><span data-stu-id="bb066-307">TCP timeouts can be due to many things beyond firewalls but start there.</span></span> 
* <span data-ttu-id="bb066-308">**Il DNS non è accessibile**: il timeout DNS è di tre secondi per ogni server DNS.</span><span class="sxs-lookup"><span data-stu-id="bb066-308">**DNS is not accessible** The DNS timeout is three seconds per DNS server.</span></span> <span data-ttu-id="bb066-309">Se si dispone di due server DNS, il timeout è di 6 secondi.</span><span class="sxs-lookup"><span data-stu-id="bb066-309">If you have two DNS servers, the timeout is 6 seconds.</span></span> <span data-ttu-id="bb066-310">Usare nameresolver per verificare il funzionamento del DNS.</span><span class="sxs-lookup"><span data-stu-id="bb066-310">Use nameresolver to see if DNS is working.</span></span> <span data-ttu-id="bb066-311">Si noti che non è possibile usare nslookup, perché non usa il DNS con cui è configurata la rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-311">Remember you can't use nslookup as that does not use the DNS your VNet is configured with.</span></span>
* <span data-ttu-id="bb066-312">**Intervallo IP P2S non valido** L'intervallo da punto a sito deve essere compreso tra gli intervalli IP privati RFC 1918 (10.0.0.0-10.255.255.255 / 172.16.0.0-172.31.255.255 / 192.168.0.0-192.168.255.255).</span><span class="sxs-lookup"><span data-stu-id="bb066-312">**Invalid P2S IP range** The point to site IP range needs to be in the RFC 1918 private IP ranges (10.0.0.0-10.255.255.255 / 172.16.0.0-172.31.255.255 / 192.168.0.0-192.168.255.255).</span></span> <span data-ttu-id="bb066-313">Se l'intervallo usa indirizzi IP esterni a tali intervalli, allora il processo non funzionerà.</span><span class="sxs-lookup"><span data-stu-id="bb066-313">If the range uses IPs outside of that, then things won't work.</span></span> 

<span data-ttu-id="bb066-314">Se il problema non rientra in nessuno dei tre casi, cercare prima di tutto le cause più semplici. Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="bb066-314">If those items don't answer your problem, look first for the simple things like:</span></span> 

* <span data-ttu-id="bb066-315">Il gateway viene visualizzato come attivo nel portale?</span><span class="sxs-lookup"><span data-stu-id="bb066-315">Does the Gateway show as being up in the portal?</span></span>
* <span data-ttu-id="bb066-316">I certificati vengono visualizzati come sincronizzati?</span><span class="sxs-lookup"><span data-stu-id="bb066-316">Do certificates show as being in sync?</span></span>
* <span data-ttu-id="bb066-317">La configurazione di rete è stata modificata senza poi eseguire una sincronizzazione della rete nell'ASP interessato?</span><span class="sxs-lookup"><span data-stu-id="bb066-317">Did anybody change the network configuration without doing a "Sync Network" in the affected ASPs?</span></span> 

<span data-ttu-id="bb066-318">Se il gateway è inattivo, è necessario riattivarlo.</span><span class="sxs-lookup"><span data-stu-id="bb066-318">If your gateway is down, then bring it back up.</span></span> <span data-ttu-id="bb066-319">Se i certificati non sono sincronizzati, passare alla visualizzazione ASP dell'integrazione di reti virtuali ed eseguire la sincronizzazione della rete.</span><span class="sxs-lookup"><span data-stu-id="bb066-319">If your certificates are out of sync, then go to the ASP view of your VNet Integration and hit "Sync Network".</span></span> <span data-ttu-id="bb066-320">Se si sospetta che sia stata apportata una modifica alla configurazione di rete virtuale senza la successiva sincronizzazione con gli ASP, passare alla visualizzazione ASP di integrazione rete virtuale ed eseguire la sincronizzazione della rete. Ricordarsi che questa operazione provocherà una breve interruzione della connessione di rete virtuale e del funzionamento delle app.</span><span class="sxs-lookup"><span data-stu-id="bb066-320">If you suspect that there has been a change made to your VNet configuration and it wasn't sync'd with your ASPs, then go to the ASP view of your VNet Integration and hit "Sync Network" Just as a reminder, this causes a brief outage with your VNet connection and your apps.</span></span> 

<span data-ttu-id="bb066-321">Se i quesiti precedenti non permettono di risolvere il problema, è necessario approfondire l'analisi:</span><span class="sxs-lookup"><span data-stu-id="bb066-321">If all of that is fine, then you need to dig in a bit deeper:</span></span>

* <span data-ttu-id="bb066-322">Sono presenti altre app che usano l'integrazione rete virtuale per raggiungere risorse nella stessa rete virtuale?</span><span class="sxs-lookup"><span data-stu-id="bb066-322">Are there any other apps using VNet Integration to reach resources in the same VNet?</span></span> 
* <span data-ttu-id="bb066-323">È possibile accedere alla console dell'app e usare tcpping per raggiungere altre risorse nella rete virtuale?</span><span class="sxs-lookup"><span data-stu-id="bb066-323">Can you go to the app console and use tcpping to reach any other resources in your VNet?</span></span> 

<span data-ttu-id="bb066-324">Se viene soddisfatta una delle condizioni precedenti, l'integrazione di reti virtuali funziona correttamente e il problema è altrove.</span><span class="sxs-lookup"><span data-stu-id="bb066-324">If either of the above are true, then your VNet Integration is fine and the problem is somewhere else.</span></span> <span data-ttu-id="bb066-325">In tal caso, scoprire perché non è possibile raggiungere una combinazione host:porta può risultare più complesso.</span><span class="sxs-lookup"><span data-stu-id="bb066-325">This is where it gets to be more of a challenge because there is no simple way to see why you can't reach a host:port.</span></span> <span data-ttu-id="bb066-326">Tra le cause possibili:</span><span class="sxs-lookup"><span data-stu-id="bb066-326">Some of the causes include:</span></span>

* <span data-ttu-id="bb066-327">È presente un firewall sull'host che impedisce l'accesso alla porta dell'applicazione dall'intervallo IP da punto a sito.</span><span class="sxs-lookup"><span data-stu-id="bb066-327">you have a firewall up on your host preventing access to the application port from your point to site IP range.</span></span> <span data-ttu-id="bb066-328">Il passaggio tra subnet spesso richiede l'accesso pubblico.</span><span class="sxs-lookup"><span data-stu-id="bb066-328">Crossing subnets often requires Public access.</span></span>
* <span data-ttu-id="bb066-329">L'host di destinazione è inattivo.</span><span class="sxs-lookup"><span data-stu-id="bb066-329">your target host is down</span></span>
* <span data-ttu-id="bb066-330">L'applicazione è inattiva.</span><span class="sxs-lookup"><span data-stu-id="bb066-330">your application is down</span></span>
* <span data-ttu-id="bb066-331">L'IP o il nome host è errato.</span><span class="sxs-lookup"><span data-stu-id="bb066-331">you had the wrong IP or hostname</span></span>
* <span data-ttu-id="bb066-332">L'applicazione è in ascolto su una porta diversa da quella prevista.</span><span class="sxs-lookup"><span data-stu-id="bb066-332">your application is listening on a different port than what you expected.</span></span> <span data-ttu-id="bb066-333">Per verificare ciò, accedere all'host e immettere "netstat -aon" dal prompt dei comandi di cmd.</span><span class="sxs-lookup"><span data-stu-id="bb066-333">You can check this by going onto that host and using "netstat -aon" from the cmd prompt.</span></span> <span data-ttu-id="bb066-334">Vengono visualizzati gli ID processo in ascolto e le relative porte.</span><span class="sxs-lookup"><span data-stu-id="bb066-334">This shows you what process ID is listening on what port.</span></span> 
* <span data-ttu-id="bb066-335">I gruppi di sicurezza di rete sono configurati in modo da impedire l'accesso all'host e alla porta dell'applicazione dall'intervallo IP da punto a sito.</span><span class="sxs-lookup"><span data-stu-id="bb066-335">your network security groups are configured in such a manner that they prevent access to your application host and port from your point to site IP range</span></span>

<span data-ttu-id="bb066-336">Tenere presente che non si conosce l'IP usato dall'app nell'intervallo IP da punto a sito, quindi è necessario consentire l'accesso all'intero intervallo.</span><span class="sxs-lookup"><span data-stu-id="bb066-336">Remember that you don't know what IP in your Point to Site IP range that your app will use so you need to allow access from the entire range.</span></span> 

<span data-ttu-id="bb066-337">Di seguito è riportata la procedura di debug aggiuntiva:</span><span class="sxs-lookup"><span data-stu-id="bb066-337">Additional debug steps include:</span></span>

* <span data-ttu-id="bb066-338">Accedere a un'altra macchina virtuale nella rete virtuale e provare a raggiungere la combinazione host:porta della risorsa da lì.</span><span class="sxs-lookup"><span data-stu-id="bb066-338">log onto another VM in your VNet and attempt to reach your resource host:port from there.</span></span> <span data-ttu-id="bb066-339">A questo scopo è possibile usare alcune utilità ping TCP o telnet, se necessario.</span><span class="sxs-lookup"><span data-stu-id="bb066-339">There are some TCP ping utilities that you can use for this purpose or can even use telnet if need be.</span></span> <span data-ttu-id="bb066-340">In questo caso si vuole solo determinare se è disponibile la connettività dall'altra macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-340">The purpose here is just to determine if connectivity is there from this other VM.</span></span> 
* <span data-ttu-id="bb066-341">Visualizzare un'applicazione in un'altra macchina virtuale e testare l'accesso all'host e alla porta dalla console dell'app.</span><span class="sxs-lookup"><span data-stu-id="bb066-341">bring up an application on another VM and test access to that host and port from the console from your app</span></span>

#### <a name="on-premises-resources"></a><span data-ttu-id="bb066-342">Risorse locali</span><span class="sxs-lookup"><span data-stu-id="bb066-342">On-premises resources</span></span> ####
<span data-ttu-id="bb066-343">Se l'applicazione non riesce a raggiungere le risorse locali, è necessario prima di tutto verificare se è possibile raggiungere una risorsa nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-343">If your app cannot reach resources on-premises, then the first thing you should check is if you can reach a resource in your VNet.</span></span> <span data-ttu-id="bb066-344">Se funziona, cercare di raggiungere l'applicazione locale da una macchina virtuale presente nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-344">If that works, try to reach the on-premises application from a VM in the VNet.</span></span> <span data-ttu-id="bb066-345">A questo scopo è possibile usare telnet o un'utilità ping TCP.</span><span class="sxs-lookup"><span data-stu-id="bb066-345">You can use telnet or a TCP ping utility.</span></span> <span data-ttu-id="bb066-346">Se la macchina virtuale non riesce a raggiungere la risorsa locale, verificare che la connessione VPN da sito a sito funzioni correttamente.</span><span class="sxs-lookup"><span data-stu-id="bb066-346">If your VM can't reach your on-premises resource, then make sure your Site to Site VPN connection is working.</span></span> <span data-ttu-id="bb066-347">Se la connessione funziona, eseguire gli stessi controlli descritti in precedenza, nonché la configurazione e lo stato del gateway locale.</span><span class="sxs-lookup"><span data-stu-id="bb066-347">If it is working, then check the same things noted earlier as well as the on-premises gateway configuration and status.</span></span> 

<span data-ttu-id="bb066-348">A questo punto, se la macchina virtuale ospitata nella rete virtuale può raggiungere il sistema locale ma l'app non ci riesce, la causa è probabilmente una delle seguenti:</span><span class="sxs-lookup"><span data-stu-id="bb066-348">Now if your VNet hosted VM can reach your on-premises system but your app can't then the reason is likely one of the following:</span></span>

* <span data-ttu-id="bb066-349">le route non sono configurate con gli intervalli di IP da punto a sito nel gateway locale</span><span class="sxs-lookup"><span data-stu-id="bb066-349">your routes are not configured with your point to site IP ranges in your on-premises gateway</span></span>
* <span data-ttu-id="bb066-350">i gruppi di sicurezza della rete bloccano l'accesso all'intervallo di IP da punto a sito</span><span class="sxs-lookup"><span data-stu-id="bb066-350">your network security groups are blocking access for your Point to Site IP range</span></span>
* <span data-ttu-id="bb066-351">i firewall locali bloccano il traffico proveniente dall'intervallo di IP da punto a sito</span><span class="sxs-lookup"><span data-stu-id="bb066-351">your on-premises firewalls are blocking traffic from your Point to Site IP range</span></span>
* <span data-ttu-id="bb066-352">nella rete virtuale è presente una route definita dall'utente (UDR) che impedisce al traffico da punto a sito di raggiungere la rete locale</span><span class="sxs-lookup"><span data-stu-id="bb066-352">you have a User Defined Route(UDR) in your VNet that prevents your Point to Site based traffic from reaching your on-premises network</span></span>

## <a name="hybrid-connections-and-app-service-environments"></a><span data-ttu-id="bb066-353">Connessioni ibride e ambienti del servizio App</span><span class="sxs-lookup"><span data-stu-id="bb066-353">Hybrid Connections and App Service Environments</span></span>
<span data-ttu-id="bb066-354">Sono disponibili tre funzioni che consentono l'accesso alle risorse ospitate su reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="bb066-354">There are three features that enable access to VNet hosted resources.</span></span> <span data-ttu-id="bb066-355">Sono:</span><span class="sxs-lookup"><span data-stu-id="bb066-355">They are:</span></span>

* <span data-ttu-id="bb066-356">Integrazione rete virtuale</span><span class="sxs-lookup"><span data-stu-id="bb066-356">VNet Integration</span></span>
* <span data-ttu-id="bb066-357">connessioni ibride</span><span class="sxs-lookup"><span data-stu-id="bb066-357">Hybrid Connections</span></span>
* <span data-ttu-id="bb066-358">Ambienti del servizio app</span><span class="sxs-lookup"><span data-stu-id="bb066-358">App Service Environments</span></span>

<span data-ttu-id="bb066-359">Per le connessioni ibride è necessario installare nella rete un agente di inoltro denominato Gestione connessione ibrida.</span><span class="sxs-lookup"><span data-stu-id="bb066-359">Hybrid Connections requires you to install a relay agent called the Hybrid Connection Manager(HCM) in your network.</span></span> <span data-ttu-id="bb066-360">Gestione connessione ibrida deve potersi connettere ad Azure e anche all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bb066-360">The HCM needs to be able to connect to Azure and also to your application.</span></span> <span data-ttu-id="bb066-361">Questa soluzione è particolarmente vantaggiosa se adottata da una rete remota, come la propria rete locale o un'altra rete ospitata sul cloud, poiché non richiede un endpoint accessibile da Internet.</span><span class="sxs-lookup"><span data-stu-id="bb066-361">This solution is especially great from a remote network such as your on-premises network or even another cloud hosted network because it does not require an internet accessible endpoint.</span></span> <span data-ttu-id="bb066-362">Gestione connessione ibrida può essere eseguita solo su sistemi Windows e prevede un massimo di cinque istanze in esecuzione per garantire un'elevata disponibilità.</span><span class="sxs-lookup"><span data-stu-id="bb066-362">The HCM only runs on Windows and you can have up to five instances running to provide high availability.</span></span> <span data-ttu-id="bb066-363">Le connessioni ibride, tuttavia, supportano solo il TCP e ogni endpoint di connessione ibrida deve corrispondere a una combinazione host:porta specifica.</span><span class="sxs-lookup"><span data-stu-id="bb066-363">Hybrid Connections only supports TCP though and each HC endpoint has to match to a specific host:port combination.</span></span> 

<span data-ttu-id="bb066-364">La funzionalità Ambiente del servizio app consente di eseguire un'istanza dei Siti Web di Microsoft Azure nella propria rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-364">The App Service Environment feature allows you to run an instance of the Azure App Service in your VNet.</span></span> <span data-ttu-id="bb066-365">In questo modo le app possono accedere alle risorse nella rete virtuale senza eseguire altri passaggi.</span><span class="sxs-lookup"><span data-stu-id="bb066-365">This lets your apps access resources in your VNet without any extra steps.</span></span> <span data-ttu-id="bb066-366">Tra i vantaggi dell'ambiente del servizio app c'è la possibilità di usare ruoli di lavoro basati su Dv2 con fino a 14 GB di RAM.</span><span class="sxs-lookup"><span data-stu-id="bb066-366">Some of the other benefits of an App Service Environment are that you can use Dv2 based workers with up to 14 GB of RAM.</span></span> <span data-ttu-id="bb066-367">Un altro vantaggio è la possibilità di ridimensionare il sistema in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="bb066-367">Another benefit is that you can scale the system to meet your needs.</span></span> <span data-ttu-id="bb066-368">A differenza degli ambienti multi-tenant, in cui la pagina ASP è limitata a 20 istanze, in un ambiente del servizio app è possibile scalare fino a 100 istanze ASP.</span><span class="sxs-lookup"><span data-stu-id="bb066-368">Unlike the multi-tenant environments where your ASP is limited to 20 instances, in an ASE you can scale up to 100 ASP instances.</span></span> <span data-ttu-id="bb066-369">Uno dei vantaggi dell'ambiente del servizio app rispetto all'integrazione di reti virtuali è che il primo è compatibile con una VPN ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="bb066-369">One of the things you get with an ASE that you don't with VNet Integration is that an App Service Environment can work with an ExpressRoute VPN.</span></span> 

<span data-ttu-id="bb066-370">Nonostante ci sia una parziale sovrapposizione, nessuna di queste funzionalità può sostituire le altre.</span><span class="sxs-lookup"><span data-stu-id="bb066-370">While there is some use case overlap, none of these feature can replace any of the others.</span></span> <span data-ttu-id="bb066-371">In base all'uso che se ne intende fare è possibile stabilire quali funzionalità usare.</span><span class="sxs-lookup"><span data-stu-id="bb066-371">Knowing what feature to use is tied to your needs.</span></span> <span data-ttu-id="bb066-372">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="bb066-372">For example:</span></span>

* <span data-ttu-id="bb066-373">Uno sviluppatore che voglia semplicemente eseguire un sito in Azure e consentire l'accesso al database nella workstation locale, può usare Connessioni ibride.</span><span class="sxs-lookup"><span data-stu-id="bb066-373">If you are a developer and simply want to run a site in Azure and have it access the database on the workstation under your desk, then the easiest thing to use is Hybrid Connections.</span></span> 
* <span data-ttu-id="bb066-374">Una grande organizzazione che voglia inserire un gran numero di proprietà Web nel cloud pubblico e gestirle nella propria rete, può usare Ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="bb066-374">If you are a large organization that wants to put a large number of web properties in the public cloud and manage them in your own network, then you want to go with the App Service Environment.</span></span> 
* <span data-ttu-id="bb066-375">Per accedere alle risorse nella rete virtuale con un numero elevato di app ospitate nel servizio app, è possibile usare la funzionalità Integrazione rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="bb066-375">If you have a number of App Service hosted apps and simply want to access resources in your VNet, then VNet Integration is the way to go.</span></span> 

<span data-ttu-id="bb066-376">Oltre ai casi d'uso è opportuno tenere conto di alcuni aspetti relativi alla semplicità.</span><span class="sxs-lookup"><span data-stu-id="bb066-376">Beyond the use cases, there are some simplicity related aspects.</span></span> <span data-ttu-id="bb066-377">Se la rete virtuale è già connessa alla rete locale, uno dei modi più semplici per usare le risorse locali è costituito dall'integrazione della rete virtuale o dall'uso di un ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="bb066-377">If your VNet is already connected to your on-premises network, then using VNet Integration or an App Service Environment is an easy way to consume on-premises resources.</span></span> <span data-ttu-id="bb066-378">Se invece la rete virtuale non è connessa alla rete locale, è molto più complicato configurare una VPN da sito a sito con la rete virtuale piuttosto che installare Gestione connessione ibrida.</span><span class="sxs-lookup"><span data-stu-id="bb066-378">On the other hand, if your VNet is not connected to your on-premises network then it's a lot more overhead to set up a site to site VPN with your VNet compared with installing the HCM.</span></span> 

<span data-ttu-id="bb066-379">Oltre a differenze funzionali, vanno considerate le differenze di prezzo.</span><span class="sxs-lookup"><span data-stu-id="bb066-379">Beyond the functional differences, there are also pricing differences.</span></span> <span data-ttu-id="bb066-380">La funzionalità Ambiente del servizio app è un'offerta di servizio Premium che garantisce il massimo delle possibilità di configurazione di rete e altre funzionalità.</span><span class="sxs-lookup"><span data-stu-id="bb066-380">The App Service Environment feature is a Premium service offering but offers the most network configuration possibilities in addition to other great features.</span></span> <span data-ttu-id="bb066-381">La funzionalità Integrazione rete virtuale può essere usata con ASP Standard o Premium ed è ideale per l'uso sicuro delle risorse in una rete virtuale dal servizio app multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="bb066-381">VNet Integration can be used with Standard or Premium ASPs and is perfect for securely consuming resources in your VNet from the multi-tenant App Service.</span></span> <span data-ttu-id="bb066-382">La funzionalità Connessioni ibride dipende attualmente da un account BizTalk che prevede diversi piani tariffari, da quello gratuito a quello meno economico, a seconda della quantità richiesta.</span><span class="sxs-lookup"><span data-stu-id="bb066-382">Hybrid Connections currently depends on a BizTalk account, which has pricing levels that start free and then get progressively more expensive based on the amount you need.</span></span> <span data-ttu-id="bb066-383">Per l'uso su più reti, tuttavia, la scelta ideale è la funzionalità Connessioni ibride, che permette di accedere a risorse in oltre 100 reti separate.</span><span class="sxs-lookup"><span data-stu-id="bb066-383">When it comes to working across many networks though, there is no other feature like Hybrid Connections, which can enable you to access resources in well over 100 separate networks.</span></span> 

<!--Image references-->
[1]: ./media/web-sites-integrate-with-vnet/vnetint-upgradeplan.png
[2]: ./media/web-sites-integrate-with-vnet/vnetint-existingvnet.png
[3]: ./media/web-sites-integrate-with-vnet/vnetint-createvnet.png
[4]: ./media/web-sites-integrate-with-vnet/vnetint-howitworks.png
[5]: ./media/web-sites-integrate-with-vnet/vnetint-appmanage.png
[6]: ./media/web-sites-integrate-with-vnet/vnetint-aspmanage.png
[7]: ./media/web-sites-integrate-with-vnet/vnetint-aspmanagedetail.png
[8]: ./media/web-sites-integrate-with-vnet/vnetint-vnetp2s.png

<!--Links-->
[VNETOverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-overview/ 
[AzurePortal]: http://portal.azure.com/
[ASPricing]: http://azure.microsoft.com/pricing/details/app-service/
[VNETPricing]: http://azure.microsoft.com/pricing/details/vpn-gateway/
[DataPricing]: http://azure.microsoft.com/pricing/details/data-transfers/
[V2VNETP2S]: http://azure.microsoft.com/documentation/articles/vpn-gateway-howto-point-to-site-rm-ps/
[IntPowershell]: http://azure.microsoft.com/documentation/articles/app-service-vnet-integration-powershell/
[ASEintro]: http://docs.microsoft.com/azure/app-service/app-service-environment/intro
[ILBASE]: http://docs.microsoft.com/azure/app-service/app-service-environment/create-ilb-ase
[V2VNETPortal]: https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal
[VPNERCoex]: http://docs.microsoft.com/en-us/azure/expressroute/expressroute-howto-coexist-resource-manager
[ASE]: http://docs.microsoft.com/azure/app-service/app-service-environment/intro
