---
title: Panoramica del modello di programmazione Reliable Service di Service Fabric | Microsoft Docs
description: Informazioni sul modello di programmazione Reliable Services di Service Fabric e su come sviluppare servizi personalizzati.
services: Service-Fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: vturecek; mani-ramaswamy
ms.assetid: 0c88a533-73f8-4ae1-a939-67d17456ac06
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: masnider;
ms.openlocfilehash: 601b1c7713c9785d949c1c72000ec7f3f63dd682
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="reliable-services-overview"></a><span data-ttu-id="64cdb-103">Panoramica di Reliable Services</span><span class="sxs-lookup"><span data-stu-id="64cdb-103">Reliable Services overview</span></span>
<span data-ttu-id="64cdb-104">Azure Service Fabric semplifica la scrittura e la gestione di Reliable Services con e senza stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-104">Azure Service Fabric simplifies writing and managing stateless and stateful Reliable Services.</span></span> <span data-ttu-id="64cdb-105">In questo argomento viene trattato quanto segue:</span><span class="sxs-lookup"><span data-stu-id="64cdb-105">This topic covers:</span></span>

* <span data-ttu-id="64cdb-106">Il modello di programmazione Reliable Services per servizi con stato e senza stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-106">The Reliable Services programming model for stateless and stateful services.</span></span>
* <span data-ttu-id="64cdb-107">Le opzioni disponibili durante lo sviluppo di un servizio Reliable Services.</span><span class="sxs-lookup"><span data-stu-id="64cdb-107">The choices you have to make when writing a Reliable Service.</span></span>
* <span data-ttu-id="64cdb-108">Alcuni scenari ed esempi dell'uso di Reliable Services e della relativa modalità di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="64cdb-108">Some scenarios and examples of when to use Reliable Services and how they are written.</span></span>

<span data-ttu-id="64cdb-109">Reliable Services è uno dei modelli di programmazione disponibili in Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="64cdb-109">Reliable Services is one of the programming models available on Service Fabric.</span></span> <span data-ttu-id="64cdb-110">L'altro è il modello di programmazione Reliable Actors, che offre un modello di programmazione con attore virtuale sulla base del modello Reliable Services.</span><span class="sxs-lookup"><span data-stu-id="64cdb-110">The other is the Reliable Actor programming model, which provides a virtual Actor programming model on top of the Reliable Services model.</span></span> <span data-ttu-id="64cdb-111">Per altre informazioni sul modello di programmazione Reliable Actors, vedere [Introduzione a Reliable Actors in Service Fabric](service-fabric-reliable-actors-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="64cdb-111">For more information on the Reliable Actors programming model, see [Introduction to Service Fabric Reliable Actors](service-fabric-reliable-actors-introduction.md).</span></span>

<span data-ttu-id="64cdb-112">Service Fabric gestisce il ciclo di vita dei servizi, dalle fasi di provisioning e distribuzione fino all'aggiornamento e all'eliminazione, usando gli strumenti di [gestione delle applicazioni di Service Fabric](service-fabric-deploy-remove-applications.md).</span><span class="sxs-lookup"><span data-stu-id="64cdb-112">Service Fabric manages the lifetime of services, from provisioning and deployment through upgrade and deletion, via [Service Fabric application management](service-fabric-deploy-remove-applications.md).</span></span>

## <a name="what-are-reliable-services"></a><span data-ttu-id="64cdb-113">Informazioni su Reliable Services</span><span class="sxs-lookup"><span data-stu-id="64cdb-113">What are Reliable Services?</span></span>
<span data-ttu-id="64cdb-114">Reliable Services offre un modello di programmazione di alto livello, semplice e potente, per specificare gli elementi importanti per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="64cdb-114">Reliable Services gives you a simple, powerful, top-level programming model to help you express what is important to your application.</span></span> <span data-ttu-id="64cdb-115">Il modello di programmazione Reliable Services offre quanto indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="64cdb-115">With the Reliable Services programming model, you get:</span></span>

* <span data-ttu-id="64cdb-116">Accesso alle restanti API di programmazione di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="64cdb-116">Access to the rest of the Service Fabric programming APIs.</span></span> <span data-ttu-id="64cdb-117">A differenza dei servizi di Service Fabric modellati come [Eseguibili guest](service-fabric-deploy-existing-app.md), Reliable Services può usare direttamente le restanti API di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="64cdb-117">Unlike Service Fabric Services modeled as [Guest Executables](service-fabric-deploy-existing-app.md), Reliable Services get to use the rest of the Service Fabric APIs directly.</span></span> <span data-ttu-id="64cdb-118">Questo consente ai servizi di:</span><span class="sxs-lookup"><span data-stu-id="64cdb-118">This allows services to:</span></span>
  * <span data-ttu-id="64cdb-119">eseguire query sul sistema</span><span class="sxs-lookup"><span data-stu-id="64cdb-119">query the system</span></span>
  * <span data-ttu-id="64cdb-120">segnalare l'integrità delle entità nel cluster</span><span class="sxs-lookup"><span data-stu-id="64cdb-120">report health about entities in the cluster</span></span>
  * <span data-ttu-id="64cdb-121">ricevere notifiche sulle modifiche alla configurazione e al codice</span><span class="sxs-lookup"><span data-stu-id="64cdb-121">receive notifications about configuration and code changes</span></span>
  * <span data-ttu-id="64cdb-122">individuare e comunicare con altri servizi,</span><span class="sxs-lookup"><span data-stu-id="64cdb-122">find and communicate with other services,</span></span>
  * <span data-ttu-id="64cdb-123">usare (scelta facoltativa) le [raccolte Reliable](service-fabric-reliable-services-reliable-collections.md)</span><span class="sxs-lookup"><span data-stu-id="64cdb-123">(optionally) use the [Reliable Collections](service-fabric-reliable-services-reliable-collections.md)</span></span>
  * <span data-ttu-id="64cdb-124">... e dando loro accesso a molte altre funzionalità, tutte prese da un modello di programmazione di prima classe in diversi linguaggi.</span><span class="sxs-lookup"><span data-stu-id="64cdb-124">...and giving them access to many other capabilities, all from a first class programming model in several programming languages.</span></span>
* <span data-ttu-id="64cdb-125">Un modello semplice per l'esecuzione di codice personalizzato simile ai modelli di programmazione di uso comune.</span><span class="sxs-lookup"><span data-stu-id="64cdb-125">A simple model for running your own code that looks like programming models you are used to.</span></span> <span data-ttu-id="64cdb-126">Il codice ha un punto di ingresso ben definito e un ciclo di vita facile da gestire.</span><span class="sxs-lookup"><span data-stu-id="64cdb-126">Your code has a well-defined entry point and easily managed lifecycle.</span></span>
* <span data-ttu-id="64cdb-127">Un modello di comunicazione modulare.</span><span class="sxs-lookup"><span data-stu-id="64cdb-127">A pluggable communication model.</span></span> <span data-ttu-id="64cdb-128">Usare il metodo di trasporto di propria scelta, ad esempio HTTP con [API Web](service-fabric-reliable-services-communication-webapi.md), WebSockets, protocolli TCP personalizzati e così via.</span><span class="sxs-lookup"><span data-stu-id="64cdb-128">Use the transport of your choice, such as HTTP with [Web API](service-fabric-reliable-services-communication-webapi.md), WebSockets, custom TCP protocols, or anything else.</span></span> <span data-ttu-id="64cdb-129">Reliable Services fornisce alcune interessanti opzioni predefinite, ma consente anche di usarne di personalizzate.</span><span class="sxs-lookup"><span data-stu-id="64cdb-129">Reliable Services provide some great out-of-the-box options you can use, or you can provide your own.</span></span>
* <span data-ttu-id="64cdb-130">Per i servizi con stato, il modello di programmazione Reliable Services consente di archiviare lo stato in modo coerente e affidabile all'interno del servizio usando [raccolte Reliable](service-fabric-reliable-services-reliable-collections.md).</span><span class="sxs-lookup"><span data-stu-id="64cdb-130">For stateful services, the Reliable Services programming model allows you to consistently and reliably store your state right inside your service by using [Reliable Collections](service-fabric-reliable-services-reliable-collections.md).</span></span> <span data-ttu-id="64cdb-131">Le raccolte Reliable sono un semplice set di classi di raccolte Reliable a disponibilità elevata che risulterà familiare a chiunque abbia usato raccolte C#.</span><span class="sxs-lookup"><span data-stu-id="64cdb-131">Reliable Collections are a simple set of highly available and reliable collection classes that will be familiar to anyone who has used C# collections.</span></span> <span data-ttu-id="64cdb-132">In passato, per la gestione di uno stato affidabile i servizi dovevano contare su sistemi esterni.</span><span class="sxs-lookup"><span data-stu-id="64cdb-132">Traditionally, services needed external systems for Reliable state management.</span></span> <span data-ttu-id="64cdb-133">Le raccolte Reliable consentono di archiviare lo stato insieme ai calcoli effettuati con gli stessi livelli di disponibilità e affidabilità garantiti dagli archivi esterni a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="64cdb-133">With Reliable Collections, you can store your state next to your compute with the same high availability and reliability you've come to expect from highly available external stores.</span></span> <span data-ttu-id="64cdb-134">Questo modello riduce anche la latenza perché si condividono le risorse di calcolo e stato necessarie per il funzionamento.</span><span class="sxs-lookup"><span data-stu-id="64cdb-134">This model also improves latency because you are co-locating the compute and state it needs to function.</span></span>

<span data-ttu-id="64cdb-135">Vedere questo video di Microsoft Virtual Academy per una panoramica di Reliable Services: <center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span><span class="sxs-lookup"><span data-stu-id="64cdb-135">Watch this Microsoft Virtual Academy video for an overview of Reliable services: <center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span></span>

## <a name="what-makes-reliable-services-different"></a><span data-ttu-id="64cdb-136">Caratteristiche distintive di Reliable Services</span><span class="sxs-lookup"><span data-stu-id="64cdb-136">What makes Reliable Services different?</span></span>
<span data-ttu-id="64cdb-137">Reliable Services in Service Fabric è diverso da eventuali servizi sviluppati in precedenza.</span><span class="sxs-lookup"><span data-stu-id="64cdb-137">Reliable Services in Service Fabric are different from services you may have written before.</span></span> <span data-ttu-id="64cdb-138">Service Fabric offre affidabilità, disponibilità, coerenza e scalabilità.</span><span class="sxs-lookup"><span data-stu-id="64cdb-138">Service Fabric provides reliability, availability, consistency, and scalability.</span></span>

* <span data-ttu-id="64cdb-139">**Affidabilità**: il servizio rimane operativo anche in ambienti non affidabili in cui i computer si guastano o presentano errori di rete o in casi in cui i servizi stessi presentano errori o arresti anomali.</span><span class="sxs-lookup"><span data-stu-id="64cdb-139">**Reliability** - Your service stays up even in unreliable environments where your machines fail or hit network issues, or in cases where the services themselves encounter errors and crash or fail.</span></span> <span data-ttu-id="64cdb-140">Per i servizi con stato, lo stato viene mantenuto anche in presenza di errori di rete o di altro tipo.</span><span class="sxs-lookup"><span data-stu-id="64cdb-140">For stateful services, your state is preserved even in the presence of network or other failures.</span></span>
* <span data-ttu-id="64cdb-141">**Disponibilità**: il servizio è raggiungibile e reattivo.</span><span class="sxs-lookup"><span data-stu-id="64cdb-141">**Availability** - Your service is reachable and responsive.</span></span> <span data-ttu-id="64cdb-142">Service Fabric mantiene il numero desiderato di copie in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="64cdb-142">Service Fabric maintains your desired number of running copies.</span></span>
* <span data-ttu-id="64cdb-143">**Scalabilità**: i servizi vengono separati dall'hardware specifico e possono essere aumentati o ridotti secondo necessità mediante l'aggiunta o la rimozione di risorse hardware o di altro tipo.</span><span class="sxs-lookup"><span data-stu-id="64cdb-143">**Scalability** - Services are decoupled from specific hardware, and they can grow or shrink as necessary through the addition or removal of hardware or other resources.</span></span> <span data-ttu-id="64cdb-144">I servizi, in particolare quelli con stato, possono essere partizionati facilmente. In questo modo, il servizio dispone di scalabilità per gestire gli errori parziali.</span><span class="sxs-lookup"><span data-stu-id="64cdb-144">Services are easily partitioned (especially in the stateful case) to ensure that the service can scale and handle partial failures.</span></span> <span data-ttu-id="64cdb-145">I servizi possono essere creati ed eliminati in modo dinamico tramite codice, consentendo di creare più istanze in base alle necessità, per esempio in caso di richieste dei clienti.</span><span class="sxs-lookup"><span data-stu-id="64cdb-145">Services can be created and deleted dynamically via code, enabling more instances to be spun up as necessary, say in response to customer requests.</span></span> <span data-ttu-id="64cdb-146">Infine, Service Fabric promuove l'uso di servizi leggeri.</span><span class="sxs-lookup"><span data-stu-id="64cdb-146">Finally, Service Fabric encourages services to be lightweight.</span></span> <span data-ttu-id="64cdb-147">Service Fabric permette il provisioning di migliaia di servizi con un unico processo, evitando così di richiedere o dedicare intere istanze o processi del sistema operativo a una singola istanza di un servizio.</span><span class="sxs-lookup"><span data-stu-id="64cdb-147">Service Fabric allows thousands of services to be provisioned within a single process, rather than requiring or dedicating entire OS instances or processes to a single instance of a service.</span></span>
* <span data-ttu-id="64cdb-148">**Coerenza**: tutte le informazioni archiviate in questo servizio hanno coerenza garantita.</span><span class="sxs-lookup"><span data-stu-id="64cdb-148">**Consistency** - Any information stored in this service can be guaranteed to be consistent.</span></span> <span data-ttu-id="64cdb-149">Questo vale anche tra più raccolte Reliable in un servizio.</span><span class="sxs-lookup"><span data-stu-id="64cdb-149">This is true even across multiple reliable collections within a service.</span></span> <span data-ttu-id="64cdb-150">È possibile apportare modifiche nelle raccolte all'interno di un servizio con transazioni atomiche.</span><span class="sxs-lookup"><span data-stu-id="64cdb-150">Changes across collections within a service can be made in a transactionally atomic manner.</span></span>

## <a name="service-lifecycle"></a><span data-ttu-id="64cdb-151">Ciclo di vita del servizio</span><span class="sxs-lookup"><span data-stu-id="64cdb-151">Service lifecycle</span></span>
<span data-ttu-id="64cdb-152">Reliable Services fornisce un ciclo di vita semplice che consente di attivare rapidamente il codice e iniziare a usarlo.</span><span class="sxs-lookup"><span data-stu-id="64cdb-152">Whether your service is stateful or stateless, Reliable Services provide a simple lifecycle that lets you quickly plug in your code and get started.</span></span>  <span data-ttu-id="64cdb-153">Per garantire l'operatività del servizio, è necessario implementare solo uno o due metodi.</span><span class="sxs-lookup"><span data-stu-id="64cdb-153">There are just one or two methods that you need to implement to get your service up and running.</span></span>

* <span data-ttu-id="64cdb-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners**: questo metodo è dove il servizio definisce gli stack di comunicazione da usare.</span><span class="sxs-lookup"><span data-stu-id="64cdb-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners** - This method is where the service defines the communication stack(s) that it wants to use.</span></span> <span data-ttu-id="64cdb-155">Lo stack di comunicazione, ad esempio [API Web](service-fabric-reliable-services-communication-webapi.md), definisce l'endpoint di ascolto o gli endpoint per il servizio, ovvero il modo in cui i client potranno raggiungerlo.</span><span class="sxs-lookup"><span data-stu-id="64cdb-155">The communication stack, such as [Web API](service-fabric-reliable-services-communication-webapi.md), is what defines the listening endpoint or endpoints for the service (how clients reach the service).</span></span> <span data-ttu-id="64cdb-156">Definisce anche in che modo i messaggi visualizzati interagiscono con il resto del codice del servizio.</span><span class="sxs-lookup"><span data-stu-id="64cdb-156">It also defines how the messages that appear interact with the rest of the service code.</span></span>
* <span data-ttu-id="64cdb-157">**RunAsync**: questo metodo è dove il servizio esegue la logica di business e dove avvierà attività in background da eseguire per tutta la durata del servizio.</span><span class="sxs-lookup"><span data-stu-id="64cdb-157">**RunAsync** - This method is where your service runs its business logic, and where it would kick off any background tasks that should run for the lifetime of the service.</span></span> <span data-ttu-id="64cdb-158">Il token di annullamento fornito indica quando l'operazione deve essere interrotta.</span><span class="sxs-lookup"><span data-stu-id="64cdb-158">The cancellation token that is provided is a signal for when that work should stop.</span></span> <span data-ttu-id="64cdb-159">Se, ad esempio, il servizio deve effettuare il pull dei messaggi da un oggetto Reliable Queue per elaborarli, questa è l'area in cui vengono eseguite tali attività.</span><span class="sxs-lookup"><span data-stu-id="64cdb-159">For example, if the service needs to pull messages out of a Reliable Queue and process them, this is where that work happens.</span></span>

<span data-ttu-id="64cdb-160">Se è la prima volta che si sente parlare di Reliable Services, è consigliabile continuare a leggere.</span><span class="sxs-lookup"><span data-stu-id="64cdb-160">If you're learning about reliable services for the first time, read on!</span></span> <span data-ttu-id="64cdb-161">Se si sta cercando una procedura dettagliata del ciclo di vita di Reliable Services, vedere [questo articolo](service-fabric-reliable-services-lifecycle.md).</span><span class="sxs-lookup"><span data-stu-id="64cdb-161">If you're looking for a detailed walkthrough of the lifecycle of reliable services, you can head over to [this article](service-fabric-reliable-services-lifecycle.md).</span></span>

## <a name="example-services"></a><span data-ttu-id="64cdb-162">Servizi di esempio</span><span class="sxs-lookup"><span data-stu-id="64cdb-162">Example services</span></span>
<span data-ttu-id="64cdb-163">Per mostrare il funzionamento del modello di programmazione descritto, di seguito sono illustrati due differenti servizi.</span><span class="sxs-lookup"><span data-stu-id="64cdb-163">Knowing this programming model, let's take a quick look at two different services to see how these pieces fit together.</span></span>

### <a name="stateless-reliable-services"></a><span data-ttu-id="64cdb-164">Reliable Services senza stato</span><span class="sxs-lookup"><span data-stu-id="64cdb-164">Stateless Reliable Services</span></span>
<span data-ttu-id="64cdb-165">Un servizio senza stato non dispone di uno stato mantenuto tra le varie chiamate.</span><span class="sxs-lookup"><span data-stu-id="64cdb-165">A stateless service is one where there is no state maintained within the service across calls.</span></span> <span data-ttu-id="64cdb-166">Qualsiasi stato presente è interamente eliminabile e non richiede sincronizzazione, replica, persistenza o disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="64cdb-166">Any state that is present is entirely disposable and doesn't require synchronization, replication, persistence, or high availability.</span></span>

<span data-ttu-id="64cdb-167">Si consideri ad esempio un servizio Calculator privo di memoria che riceve contemporaneamente tutti i termini e le operazioni da eseguire.</span><span class="sxs-lookup"><span data-stu-id="64cdb-167">For example, consider a calculator that has no memory and receives all terms and operations to perform at once.</span></span>

<span data-ttu-id="64cdb-168">In questo caso il metodo `RunAsync()` (C#) o `runAsync()` (Java) del servizio può essere vuoto, dal momento che il servizio non deve eseguire alcuna elaborazione di attività in background.</span><span class="sxs-lookup"><span data-stu-id="64cdb-168">In this case, the `RunAsync()` (C#) or `runAsync()` (Java) of the service can be empty, since there is no background task-processing that the service needs to do.</span></span> <span data-ttu-id="64cdb-169">Quando viene creato, il servizio Calculator restituisce un `ICommunicationListener` (C#) o un `CommunicationListener` (Java), ad esempio [API Web](service-fabric-reliable-services-communication-webapi.md), che apre un endpoint di ascolto su una porta.</span><span class="sxs-lookup"><span data-stu-id="64cdb-169">When the calculator service is created, it returns an `ICommunicationListener` (C#) or `CommunicationListener` (Java) (for example [Web API](service-fabric-reliable-services-communication-webapi.md)) that opens up a listening endpoint on some port.</span></span> <span data-ttu-id="64cdb-170">L'endpoint di ascolto si collegherà ai diversi metodi, ad esempio di calcolo, ad esempio "Add(n1, n2)", che definiscono l'API pubblica del servizio Calculator.</span><span class="sxs-lookup"><span data-stu-id="64cdb-170">This listening endpoint hooks up to the different calculation methods (example: "Add(n1, n2)") that define the calculator's public API.</span></span>

<span data-ttu-id="64cdb-171">Quando viene effettuata una chiamata da un client, viene richiamato il metodo appropriato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-171">When a call is made from a client, the appropriate method is invoked, and the calculator service performs the operations on the data provided and returns the result.</span></span> <span data-ttu-id="64cdb-172">Il servizio Calculator esegue le operazioni sui dati forniti e restituisce il risultato, senza archiviare alcuno stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-172">It doesn't store any state.</span></span>

<span data-ttu-id="64cdb-173">La mancata archiviazione di qualsiasi stato interno rende semplice il servizio Calculator di esempio.</span><span class="sxs-lookup"><span data-stu-id="64cdb-173">Not storing any internal state makes this example calculator simple.</span></span> <span data-ttu-id="64cdb-174">La maggior parte dei servizi non è però realmente senza stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-174">But most services aren't truly stateless.</span></span> <span data-ttu-id="64cdb-175">Al contrario, esternalizzano il proprio stato in un altro archivio.</span><span class="sxs-lookup"><span data-stu-id="64cdb-175">Instead, they externalize their state to some other store.</span></span> <span data-ttu-id="64cdb-176">Ad esempio, un'app Web che mantiene lo stato delle sessioni in una cache o in un archivio di backup non è senza stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-176">(For example, any web app that relies on keeping session state in a backing store or cache is not stateless.)</span></span>

<span data-ttu-id="64cdb-177">Un esempio comune di come i servizi senza stato vengono usati in Service Fabric è un servizio front-end che espone l'API pubblica di un'applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="64cdb-177">A common example of how stateless services are used in Service Fabric is as a front-end that exposes the public-facing API for a web application.</span></span> <span data-ttu-id="64cdb-178">Il servizio front-end richiede quindi ai servizi con stato di completare la richiesta di un utente.</span><span class="sxs-lookup"><span data-stu-id="64cdb-178">The front-end service then talks to stateful services to complete a user request.</span></span> <span data-ttu-id="64cdb-179">In questo caso, le chiamate provenienti dai client vengono indirizzate a una porta conosciuta, ad esempio la porta 80, dove è in ascolto il servizio senza stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-179">In this case, calls from clients are directed to a known port, such as 80, where the stateless service is listening.</span></span> <span data-ttu-id="64cdb-180">Il servizio senza stato riceve la chiamata, determina se quest'ultima proviene da una parte attendibile e identifica il servizio a cui è destinata.</span><span class="sxs-lookup"><span data-stu-id="64cdb-180">This stateless service receives the call and determines whether the call is from a trusted party and which service it's destined for.</span></span>  <span data-ttu-id="64cdb-181">Il servizio senza stato inoltra quindi la chiamata alla partizione corretta del servizio con stato e attende una risposta.</span><span class="sxs-lookup"><span data-stu-id="64cdb-181">Then, the stateless service forwards the call to the correct partition of the stateful service and waits for a response.</span></span> <span data-ttu-id="64cdb-182">Quando il servizio senza stato riceve una risposta, risponde al client originale.</span><span class="sxs-lookup"><span data-stu-id="64cdb-182">When the stateless service receives a response, it replies to the original client.</span></span> <span data-ttu-id="64cdb-183">Un esempio di tale servizio è disponibile in [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span><span class="sxs-lookup"><span data-stu-id="64cdb-183">An example of such a service is in our samples [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span></span> <span data-ttu-id="64cdb-184">Sono presentati anche altri modelli in altri esempi.</span><span class="sxs-lookup"><span data-stu-id="64cdb-184">This is only one example of this pattern in the samples, there are others in other samples as well.</span></span>

### <a name="stateful-reliable-services"></a><span data-ttu-id="64cdb-185">Reliable Services con stato</span><span class="sxs-lookup"><span data-stu-id="64cdb-185">Stateful Reliable Services</span></span>
<span data-ttu-id="64cdb-186">Un servizio con stato è un servizio che, per funzionare in modo corretto, deve avere una qualche porzione dello stato coerente e presente.</span><span class="sxs-lookup"><span data-stu-id="64cdb-186">A stateful service is one that must have some portion of state kept consistent and present in order for the service to function.</span></span> <span data-ttu-id="64cdb-187">Si consideri, ad esempio, un servizio che deve calcolare costantemente la media mobile di alcuni valori in base agli aggiornamenti ricevuti.</span><span class="sxs-lookup"><span data-stu-id="64cdb-187">Consider a service that constantly computes a rolling average of some value based on updates it receives.</span></span> <span data-ttu-id="64cdb-188">Per eseguire questa operazione, deve avere il set corrente di richieste in ingresso, oltre alla media corrente.</span><span class="sxs-lookup"><span data-stu-id="64cdb-188">To do this, it must have the current set of incoming requests it needs to process and the current average.</span></span> <span data-ttu-id="64cdb-189">Qualsiasi servizio che recupera, elabora e archivia informazioni in un archivio esterno, ad esempio un archivio tabelle o un BLOB di Azure, è un servizio con stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-189">Any service that retrieves, processes, and stores information in an external store (such as an Azure blob or table store today) is stateful.</span></span> <span data-ttu-id="64cdb-190">Conserva il proprio stato nell'archivio stati esterno.</span><span class="sxs-lookup"><span data-stu-id="64cdb-190">It just keeps its state in the external state store.</span></span>

<span data-ttu-id="64cdb-191">Attualmente la maggior parte dei servizi archivia il proprio stato esternamente, perché gli archivi esterni assicurano affidabilità, disponibilità, scalabilità e coerenza dello stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-191">Most services today store their state externally, since the external store is what provides reliability, availability, scalability, and consistency for that state.</span></span> <span data-ttu-id="64cdb-192">In Service Fabric, i servizi non devono necessariamente archiviare esternamente il proprio stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-192">In Service Fabric, services aren't required to store their state externally.</span></span> <span data-ttu-id="64cdb-193">Service Fabric si occupa di questi requisiti sia per il codice che per lo stato del servizio.</span><span class="sxs-lookup"><span data-stu-id="64cdb-193">Service Fabric takes care of these requirements for both the service code and the service state.</span></span>

> [!NOTE]
> <span data-ttu-id="64cdb-194">Il supporto per Reliable Services con stato non è ancora disponibile in Linux (per C# o Java).</span><span class="sxs-lookup"><span data-stu-id="64cdb-194">Support for Stateful Reliable Services is not available on Linux yet (for C# or Java).</span></span>
>

<span data-ttu-id="64cdb-195">Si supponga di voler scrivere un servizio di elaborazione immagini.</span><span class="sxs-lookup"><span data-stu-id="64cdb-195">Let's say we want to write a service that processes images.</span></span> <span data-ttu-id="64cdb-196">Per l'elaborazione, il servizio accetta un'immagine e la serie di conversioni da eseguire su di essa.</span><span class="sxs-lookup"><span data-stu-id="64cdb-196">To do this, the service takes in an image and the series of conversions to perform on that image.</span></span> <span data-ttu-id="64cdb-197">Il servizio restituisce un listener di comunicazione (si supponga che sia un'API Web) che espone un'API come `ConvertImage(Image i, IList<Conversion> conversions)`.</span><span class="sxs-lookup"><span data-stu-id="64cdb-197">This service returns a communication listener (let's suppose it's a WebAPI) that exposes an API like `ConvertImage(Image i, IList<Conversion> conversions)`.</span></span> <span data-ttu-id="64cdb-198">Quando riceve una richiesta, il servizio la memorizza in un `IReliableQueue` e restituisce alcun ID al client in modo da tracciare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="64cdb-198">When it receives a request, the service stores it in a `IReliableQueue`, and returns some id to the client so it can track the request.</span></span>

<span data-ttu-id="64cdb-199">In questo servizio `RunAsync()` potrebbe essere più complesso.</span><span class="sxs-lookup"><span data-stu-id="64cdb-199">In this service, `RunAsync()` could be more complex.</span></span> <span data-ttu-id="64cdb-200">Il servizio dispone di un ciclo all'interno di relativo `RunAsync()` che effettua il pull delle richieste da `IReliableQueue` ed esegue le conversioni richieste.</span><span class="sxs-lookup"><span data-stu-id="64cdb-200">The service has a loop inside its `RunAsync()` that pulls requests out of `IReliableQueue` and performs the conversions requested.</span></span> <span data-ttu-id="64cdb-201">I risultati vengono memorizzati un `IReliableDictionary` in modo che, al ritorno del client, possano ottenere le immagini convertite.</span><span class="sxs-lookup"><span data-stu-id="64cdb-201">The results get stored in an `IReliableDictionary` so that when the client comes back they can get their converted images.</span></span> <span data-ttu-id="64cdb-202">Per garantire che anche in caso di problemi l'immagine non vada persa, questo servizio Reliable Services effettua il pull dalla coda, esegue le conversioni e archivia il risultato in una singola transazione.</span><span class="sxs-lookup"><span data-stu-id="64cdb-202">To ensure that even if something fails the image isn't lost, this Reliable Service would pull out of the queue, perform the conversions, and store the result all in a single transaction.</span></span> <span data-ttu-id="64cdb-203">In questo modo il messaggio viene rimosso dalla coda e i risultati vengono archiviati nel dizionario dei risultati solo dopo il completamento delle conversioni.</span><span class="sxs-lookup"><span data-stu-id="64cdb-203">In this case, the message is removed from the queue and the results are stored in the result dictionary only when the conversions are complete.</span></span> <span data-ttu-id="64cdb-204">In alternativa, il servizio potrebbe estrarre l'immagine dalla coda e memorizzarla immediatamente in un archivio remoto.</span><span class="sxs-lookup"><span data-stu-id="64cdb-204">Alternatively, the service could pull the image out of the queue and immediately store it in a remote store.</span></span> <span data-ttu-id="64cdb-205">Questo ridurrebbe la quantità di stato che il servizio deve gestire, ma aumenterebbe la complessità, poiché il servizio deve a quel punto conservare i metadati necessari per gestire l'archivio remoto.</span><span class="sxs-lookup"><span data-stu-id="64cdb-205">This reduces the amount of state the service has to manage, but increases complexity since the service has to keep the necessary metadata to manage the remote store.</span></span> <span data-ttu-id="64cdb-206">Con entrambi gli approcci, in caso di errori durante l'operazione, la richiesta rimane nella coda in attesa di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="64cdb-206">With either approach, if something failed in the middle the request remains in the queue waiting to be processed.</span></span>

<span data-ttu-id="64cdb-207">Una delle caratteristiche di questo servizio è che ha l'aspetto di un normale servizio .NET.</span><span class="sxs-lookup"><span data-stu-id="64cdb-207">One thing to note about this service is that it sounds like a normal .NET service!</span></span> <span data-ttu-id="64cdb-208">L'unica differenza consiste nel fatto che le strutture dati usate, ovvero gli oggetti `IReliableQueue` e `IReliableDictionary`, sono fornite da Service Fabric e quindi offrono livelli di affidabilità, disponibilità e coerenza elevati.</span><span class="sxs-lookup"><span data-stu-id="64cdb-208">The only difference is that the data structures being used (`IReliableQueue` and `IReliableDictionary`) are provided by Service Fabric, and are highly reliable, available, and consistent.</span></span>

## <a name="when-to-use-reliable-services-apis"></a><span data-ttu-id="64cdb-209">Quando usare le API Reliable Services</span><span class="sxs-lookup"><span data-stu-id="64cdb-209">When to use Reliable Services APIs</span></span>
<span data-ttu-id="64cdb-210">È consigliabile considerare l'uso delle API Reliable Services se il servizio dell'applicazione presenta uno dei requisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="64cdb-210">If any of the following characterize your application service needs, then you should consider Reliable Services APIs:</span></span>

* <span data-ttu-id="64cdb-211">Si desiderano codici (ed eventualmente stati) di servizio con disponibilità e affidabilità elevate</span><span class="sxs-lookup"><span data-stu-id="64cdb-211">You want your service's code (and optionally state) to be highly available and reliable</span></span>
* <span data-ttu-id="64cdb-212">Sono necessarie garanzie transazionali in più unità di stato multiple, ad esempio elementi di ordine e righe di ordine.</span><span class="sxs-lookup"><span data-stu-id="64cdb-212">You need transactional guarantees across multiple units of state (for example, orders and order line items).</span></span>
* <span data-ttu-id="64cdb-213">Lo stato dell'applicazione può essere modellato naturalmente sotto forma di oggetti ReliableDictionary e ReliableQueue.</span><span class="sxs-lookup"><span data-stu-id="64cdb-213">Your application’s state can be naturally modeled as Reliable Dictionaries and Queues.</span></span>
* <span data-ttu-id="64cdb-214">Il codice o lo stato delle applicazioni deve disporre di un'elevata disponibilità, con operazioni di lettura e scrittura a bassa latenza.</span><span class="sxs-lookup"><span data-stu-id="64cdb-214">Your applications code or state needs to be highly available with low latency reads and writes.</span></span>
* <span data-ttu-id="64cdb-215">L'applicazione deve controllare la concorrenza o la granularità di operazioni transazionali su una o più raccolte Reliable Collections.</span><span class="sxs-lookup"><span data-stu-id="64cdb-215">Your application needs to control the concurrency or granularity of transacted operations across one or more Reliable Collections.</span></span>
* <span data-ttu-id="64cdb-216">Si vogliono gestire le comunicazioni o controllare lo schema di partizionamento del servizio.</span><span class="sxs-lookup"><span data-stu-id="64cdb-216">You want to manage the communications or control the partitioning scheme for your service.</span></span>
* <span data-ttu-id="64cdb-217">Il codice necessita di un ambiente di runtime a thread libero.</span><span class="sxs-lookup"><span data-stu-id="64cdb-217">Your code needs a free-threaded runtime environment.</span></span>
* <span data-ttu-id="64cdb-218">L'applicazione deve creare o eliminare definitivamente in modo dinamico gli oggetti ReliableDictionary, ReliableQueue o interi servizi in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="64cdb-218">Your application needs to dynamically create or destroy Reliable Dictionaries or Queues or whole Services at runtime.</span></span>
* <span data-ttu-id="64cdb-219">È necessario controllare a livello di codice i backup forniti da Service Fabric e ripristinare le funzionalità per lo stato del servizio.</span><span class="sxs-lookup"><span data-stu-id="64cdb-219">You need to programmatically control Service Fabric-provided backup and restore features for your service’s state.</span></span>
* <span data-ttu-id="64cdb-220">L'applicazione deve gestire la cronologia delle modifiche per le unità di stato.</span><span class="sxs-lookup"><span data-stu-id="64cdb-220">Your application needs to maintain change history for its units of state.</span></span>
* <span data-ttu-id="64cdb-221">Si vogliono utilizzare provider di stato di terze parti o svilupparne di personalizzati.</span><span class="sxs-lookup"><span data-stu-id="64cdb-221">You want to develop or consume third-party-developed, custom state providers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="64cdb-222">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="64cdb-222">Next steps</span></span>
* [<span data-ttu-id="64cdb-223">Guida introduttiva a Reliable Services di Microsoft Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="64cdb-223">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
* [<span data-ttu-id="64cdb-224">Uso avanzato del modello di programmazione Reliable Services</span><span class="sxs-lookup"><span data-stu-id="64cdb-224">Reliable Services advanced usage</span></span>](service-fabric-reliable-services-advanced-usage.md)
* [<span data-ttu-id="64cdb-225">Modello di programmazione Reliable Actors</span><span class="sxs-lookup"><span data-stu-id="64cdb-225">The Reliable Actors programming model</span></span>](service-fabric-reliable-actors-introduction.md)
