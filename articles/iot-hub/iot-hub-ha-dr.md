---
title: "Disponibilità elevata e ripristino di emergenza dell'hub IoT di Azure | Documentazione Microsoft"
description: "Descrive le funzionalità di Azure e dell'hub IoT che permettono di compilare soluzioni Azure IoT a disponibilità elevata con opzioni di ripristino di emergenza."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 76c3187549e1821908263c30e394db26ee6f75e6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="8c2be-103">Disponibilità elevata e ripristino di emergenza dell'hub IoT</span><span class="sxs-lookup"><span data-stu-id="8c2be-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="8c2be-104">Come servizio di Azure, l'hub IoT offre velocità elevata usando le ridondanze a livello di area di Azure, senza richiedere attività aggiuntive alla soluzione.</span><span class="sxs-lookup"><span data-stu-id="8c2be-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at the Azure region level, without any additional work required by the solution.</span></span> <span data-ttu-id="8c2be-105">La piattaforma Microsoft Azure offre anche numerose funzionalità che facilitano la compilazione di soluzioni con funzionalità di ripristino di emergenza o disponibilità tra aree.</span><span class="sxs-lookup"><span data-stu-id="8c2be-105">The Microsoft Azure platform also includes features to help you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="8c2be-106">Per offrire la disponibilità elevata globale tra le aree per dispositivi o utenti, progettare e preparare le soluzioni in modo da sfruttare le funzionalità di ripristino di emergenza di Azure.</span><span class="sxs-lookup"><span data-stu-id="8c2be-106">If you want to provide global, cross-region high availability for devices or users, design and prepare your solutions to take advantage of these Azure DR features.</span></span> <span data-ttu-id="8c2be-107">L'articolo [Indicazioni tecniche sulla resilienza di Azure](../resiliency/resiliency-technical-guidance.md) descrive le funzionalità integrate in Azure per la continuità aziendale e il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="8c2be-107">The article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes the built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="8c2be-108">Il documento [Ripristino di emergenza e disponibilità elevata per le applicazioni basate su Microsoft Azure][Disaster recovery and high availability for Azure applications] fornisce informazioni sull'architettura nelle strategie per consentire alle applicazioni di Azure di ottenere disponibilità elevata e ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="8c2be-108">The [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications to achieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="8c2be-109">Ripristino di emergenza dell'hub IoT di Azure</span><span class="sxs-lookup"><span data-stu-id="8c2be-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="8c2be-110">Oltre alla disponibilità elevata all'interno della stessa area, l'hub IoT implementa meccanismi di failover per il ripristino di emergenza che non richiedono alcun intervento da parte dell'utente.</span><span class="sxs-lookup"><span data-stu-id="8c2be-110">In addition to intra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from the user.</span></span> <span data-ttu-id="8c2be-111">Il ripristino di emergenza dell'hub IoT viene avviato automaticamente e ha un obiettivo del tempo di ripristino (RTO) di 2-26 ore e obiettivi del punto di ripristino (RPO) successivi.</span><span class="sxs-lookup"><span data-stu-id="8c2be-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and the following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="8c2be-112">Funzionalità</span><span class="sxs-lookup"><span data-stu-id="8c2be-112">Functionality</span></span> | <span data-ttu-id="8c2be-113">RPO</span><span class="sxs-lookup"><span data-stu-id="8c2be-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="8c2be-114">Disponibilità del servizio per le operazioni del Registro di sistema e di comunicazione</span><span class="sxs-lookup"><span data-stu-id="8c2be-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="8c2be-115">Possibile perdita di CName</span><span class="sxs-lookup"><span data-stu-id="8c2be-115">Possible CName loss</span></span> |
| <span data-ttu-id="8c2be-116">Dati sull'identità nel registro delle identità</span><span class="sxs-lookup"><span data-stu-id="8c2be-116">Identity data in identity registry</span></span> |<span data-ttu-id="8c2be-117">Perdita di dati da 0 a 5 minuti</span><span class="sxs-lookup"><span data-stu-id="8c2be-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="8c2be-118">Messaggi da dispositivo a cloud</span><span class="sxs-lookup"><span data-stu-id="8c2be-118">Device-to-cloud messages</span></span> |<span data-ttu-id="8c2be-119">Tutti i messaggi non letti vengono persi</span><span class="sxs-lookup"><span data-stu-id="8c2be-119">All unread messages are lost</span></span> |
| <span data-ttu-id="8c2be-120">Messaggi di monitoraggio delle operazioni</span><span class="sxs-lookup"><span data-stu-id="8c2be-120">Operations monitoring messages</span></span> |<span data-ttu-id="8c2be-121">Tutti i messaggi non letti vengono persi</span><span class="sxs-lookup"><span data-stu-id="8c2be-121">All unread messages are lost</span></span> |
| <span data-ttu-id="8c2be-122">Messaggi da cloud a dispositivo</span><span class="sxs-lookup"><span data-stu-id="8c2be-122">Cloud-to-device messages</span></span> |<span data-ttu-id="8c2be-123">Perdita di dati da 0 a 5 minuti</span><span class="sxs-lookup"><span data-stu-id="8c2be-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="8c2be-124">Coda di commenti da cloud a dispositivo</span><span class="sxs-lookup"><span data-stu-id="8c2be-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="8c2be-125">Tutti i messaggi non letti vengono persi</span><span class="sxs-lookup"><span data-stu-id="8c2be-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="8c2be-126">Failover di area con l'hub IoT</span><span class="sxs-lookup"><span data-stu-id="8c2be-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="8c2be-127">L'analisi completa delle topologie di distribuzione nelle soluzioni IoT esula dall'ambito di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="8c2be-127">A complete treatment of deployment topologies in IoT solutions is outside the scope of this article.</span></span> <span data-ttu-id="8c2be-128">L'articolo illustra il modello di distribuzione di *failover regionale* per obiettivi di disponibilità elevata e ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="8c2be-128">The article discusses the *regional failover* deployment model for the purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="8c2be-129">In un modello di failover regionale, il back-end della soluzione viene eseguito principalmente nella località di un data center, mentre un hub IoT e un back-end secondari vengono distribuiti nella località di un altro data center.</span><span class="sxs-lookup"><span data-stu-id="8c2be-129">In a regional failover model, the solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="8c2be-130">Se l'hub IoT nel data center principale subisce un'interruzione o viene interrotta la connettività di rete dal dispositivo al data center principale,</span><span class="sxs-lookup"><span data-stu-id="8c2be-130">If the IoT hub in the primary datacenter suffers an outage or the network connectivity from the device to the primary datacenter is interrupted.</span></span> <span data-ttu-id="8c2be-131">i dispositivi usano un endpoint di servizio secondario quando il gateway primario non è raggiungibile.</span><span class="sxs-lookup"><span data-stu-id="8c2be-131">Devices use a secondary service endpoint whenever the primary gateway cannot be reached.</span></span> <span data-ttu-id="8c2be-132">Con una funzionalità di failover tra aree, la disponibilità della soluzione può essere migliorata al di là della disponibilità elevata di una singola area.</span><span class="sxs-lookup"><span data-stu-id="8c2be-132">With a cross-region failover capability, the solution availability can be improved beyond the high availability of a single region.</span></span>

<span data-ttu-id="8c2be-133">In generale, per implementare un modello di failover regionale con l'hub IoT è necessario quanto segue:</span><span class="sxs-lookup"><span data-stu-id="8c2be-133">At a high level, to implement a regional failover model with IoT Hub, you need the following:</span></span>

* <span data-ttu-id="8c2be-134">**Un hub IoT secondario e una logica di routing del dispositivo**: in caso di interruzione del servizio nell'area primaria, i dispositivi devono avviare la connessione all'area secondaria.</span><span class="sxs-lookup"><span data-stu-id="8c2be-134">**A secondary IoT hub and device routing logic**: In the case of a service disruption in your primary region, devices must start connecting to your secondary region.</span></span> <span data-ttu-id="8c2be-135">Data la condizione con riconoscimento dello stato della maggior parte dei servizi coinvolti, gli amministratori delle soluzioni attivano comunemente il processo di failover tra aree.</span><span class="sxs-lookup"><span data-stu-id="8c2be-135">Given the state-aware nature of most services involved, it is common for solution administrators to trigger the inter-region failover process.</span></span> <span data-ttu-id="8c2be-136">Il modo migliore per comunicare il nuovo endpoint ai dispositivi, mantenendo il controllo del processo, consiste nel fare in modo che controllino regolarmente un servizio *concierge* per verificare la disponibilità dell'endpoint attualmente attivo.</span><span class="sxs-lookup"><span data-stu-id="8c2be-136">The best way to communicate the new endpoint to devices, while maintaining control of the process, is to have them regularly check a *concierge* service for the current active endpoint.</span></span> <span data-ttu-id="8c2be-137">Il servizio concierge può essere un'applicazione Web replicata e mantenuta raggiungibile con tecniche di reindirizzamento DNS, ad esempio con [Gestione traffico di Azure][Azure Traffic Manager].</span><span class="sxs-lookup"><span data-stu-id="8c2be-137">The concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="8c2be-138">**Replica del registro delle identità**: per poter essere usato, l'hub IoT secondario deve contenere tutte le identità dei dispositivi che possono connettersi alla soluzione.</span><span class="sxs-lookup"><span data-stu-id="8c2be-138">**Identity registry replication** - To be usable, the secondary IoT hub must contain all device identities that can connect to the solution.</span></span> <span data-ttu-id="8c2be-139">La soluzione deve mantenere backup con replica geografica delle identità dei dispositivi e caricarli nell'hub IoT secondario prima del passaggio all'endpoint attivo per i dispositivi.</span><span class="sxs-lookup"><span data-stu-id="8c2be-139">The solution should keep geo-replicated backups of device identities, and upload them to the secondary IoT hub before switching the active endpoint for the devices.</span></span> <span data-ttu-id="8c2be-140">La funzionalità di esportazione delle identità dei dispositivi dell'hub IoT è utile in questo contesto.</span><span class="sxs-lookup"><span data-stu-id="8c2be-140">The device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="8c2be-141">Per altre informazioni, vedere la [Guida per gli sviluppatori dell'hub IoT: registro delle identità][IoT Hub developer guide - identity registry].</span><span class="sxs-lookup"><span data-stu-id="8c2be-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="8c2be-142">**Logica di unione** : quando un'area primaria diventa di nuovo disponibile, deve essere eseguita la migrazione di tutti i dati e dello stato creati nel sito secondario all'area primaria.</span><span class="sxs-lookup"><span data-stu-id="8c2be-142">**Merging logic** - When the primary region becomes available again, all the state and data that have been created in the secondary site must be migrated back to the primary region.</span></span> <span data-ttu-id="8c2be-143">Lo stato e i dati sono per lo più correlati alle identità dei dispositivi e ai metadati dell'applicazione, che devono essere uniti all'hub IoT primario e agli altri archivi specifici dell'applicazione nell'area primaria.</span><span class="sxs-lookup"><span data-stu-id="8c2be-143">This state and data mostly relates to device identities and application metadata, which must be merged with the primary IoT hub and any other application-specific stores in the primary region.</span></span> <span data-ttu-id="8c2be-144">Per semplificare questo passaggio è consigliabile usare operazioni idempotenti.</span><span class="sxs-lookup"><span data-stu-id="8c2be-144">To simplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="8c2be-145">Le operazioni idempotenti riducono al minimo gli effetti collaterali della distribuzione coerente degli eventi e dei duplicati o del recapito non ordinato degli eventi.</span><span class="sxs-lookup"><span data-stu-id="8c2be-145">Idempotent operations minimize the side-effects from the eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="8c2be-146">La logica dell'applicazione deve essere progettata per tollerare eventuali incoerenze o uno stato "leggermente" obsoleto.</span><span class="sxs-lookup"><span data-stu-id="8c2be-146">In addition, the application logic should be designed to tolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="8c2be-147">Questa situazione può verificarsi a causa del tempo aggiuntivo necessario per il recupero dell'integrità del sistema in base agli obiettivi del punto di ripristino (RPO).</span><span class="sxs-lookup"><span data-stu-id="8c2be-147">This situation can occur due to the additional time it takes for the system to "heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8c2be-148">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8c2be-148">Next steps</span></span>
<span data-ttu-id="8c2be-149">Per altre informazioni sull'hub IoT di Azure, vedere questi collegamenti:</span><span class="sxs-lookup"><span data-stu-id="8c2be-149">Follow these links to learn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="8c2be-150">[Introduzione agli hub IoT (esercitazione)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="8c2be-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="8c2be-151">[Che cos'è l'hub IoT di Azure?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="8c2be-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
