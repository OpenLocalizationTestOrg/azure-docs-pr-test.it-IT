---
title: Accesso Web con OpenID Connect - Azure AD B2C | Microsoft Docs
description: Creazione di applicazioni web tramite l'implementazione di Azure Active Directory hello hello OpenID Connect del protocollo di autenticazione
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 89e9cfa28e4e5c34304aea355cca2dd0c4b42abc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="c3af0-103">Azure Active Directory B2C: accesso Web con OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="c3af0-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="c3af0-104">OpenID Connect è un protocollo di autenticazione basato su OAuth 2.0, che possono essere utilizzati toosecurely effettua l'accesso utente nelle applicazioni tooweb.</span><span class="sxs-lookup"><span data-stu-id="c3af0-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used toosecurely sign users in tooweb applications.</span></span> <span data-ttu-id="c3af0-105">Tramite l'implementazione di hello Azure Active Directory B2C (Azure AD B2C) di OpenID Connect, è possibile assegnare l'iscrizione, accedi, altri gestione delle identità esperienze e nella tooAzure di applicazioni web Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="c3af0-105">By using hello Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications tooAzure Active Directory (Azure AD).</span></span> <span data-ttu-id="c3af0-106">Questa guida illustra come toodo così in modo indipendente dal linguaggio.</span><span class="sxs-lookup"><span data-stu-id="c3af0-106">This guide shows you how toodo so in a language-independent manner.</span></span> <span data-ttu-id="c3af0-107">Viene descritto come toosend e ricevere messaggi HTTP senza utilizzare uno dei nostri librerie open source.</span><span class="sxs-lookup"><span data-stu-id="c3af0-107">It describes how toosend and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="c3af0-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) estende hello OAuth 2.0 *autorizzazione* protocollo per l'utilizzo come un *autenticazione* protocollo.</span><span class="sxs-lookup"><span data-stu-id="c3af0-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends hello OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="c3af0-109">In questo modo si tooperform single sign-on tramite OAuth.</span><span class="sxs-lookup"><span data-stu-id="c3af0-109">This allows you tooperform single sign-on by using OAuth.</span></span> <span data-ttu-id="c3af0-110">Introduce il concetto di hello di un *token ID*, ovvero un token di sicurezza che consente di hello client tooverify hello identità dell'utente hello e ottenere informazioni sul profilo di base sull'utente hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-110">It introduces hello concept of an *ID token*, which is a security token that allows hello client tooverify hello identity of hello user and obtain basic profile information about hello user.</span></span>

<span data-ttu-id="c3af0-111">Dal momento che estende OAuth 2.0, consente inoltre di acquisire toosecurely app *i token di accesso*.</span><span class="sxs-lookup"><span data-stu-id="c3af0-111">Because it extends OAuth 2.0, it also enables apps toosecurely acquire *access tokens*.</span></span> <span data-ttu-id="c3af0-112">È possibile utilizzare access_tokens tooaccess risorse che sono protetti da un [server autorizzazione](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="c3af0-112">You can use access_tokens tooaccess resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="c3af0-113">Si consiglia OpenID Connect per la compilazione di un'applicazione Web ospitata su un server e accessibile da browser.</span><span class="sxs-lookup"><span data-stu-id="c3af0-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="c3af0-114">Se si desidera tooadd identità tooyour portatili o desktop le applicazioni di gestione tramite Azure Active Directory B2C, è necessario utilizzare [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) anziché OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="c3af0-114">If you want tooadd identity management tooyour mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="c3af0-115">Azure Active Directory B2C estende toodo hello standard OpenID Connect protocollo più semplice autenticazione e autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-115">Azure AD B2C extends hello standard OpenID Connect protocol toodo more than simple authentication and authorization.</span></span> <span data-ttu-id="c3af0-116">Introduce hello [parametro policy](active-directory-b2c-reference-policies.md), che consente toouse OpenID Connect tooadd esperienze degli utenti, ad esempio effettua l'iscrizione, accesso e la gestione dei profili - tooyour app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-116">It introduces hello [policy parameter](active-directory-b2c-reference-policies.md), which enables you toouse OpenID Connect tooadd user experiences--such as sign-up, sign-in, and profile management--tooyour app.</span></span> <span data-ttu-id="c3af0-117">In questo caso, verrà illustrato come tooimplement toouse OpenID Connect e criteri, ognuna di queste esperienze in applicazioni web.</span><span class="sxs-lookup"><span data-stu-id="c3af0-117">Here, we show you how toouse OpenID Connect and policies tooimplement each of these experiences in your web applications.</span></span> <span data-ttu-id="c3af0-118">È inoltre mostreremo come tooget i token di accesso per l'accesso a web API.</span><span class="sxs-lookup"><span data-stu-id="c3af0-118">We'll also show you how tooget access tokens for accessing web APIs.</span></span>

<span data-ttu-id="c3af0-119">le richieste HTTP di esempio di Hello nella sezione successiva hello utilizzano la directory di esempio B2C, fabrikamb2c.onmicrosoft.com, nonché l'applicazione di esempio, https://aadb2cplayground.azurewebsites.net e criteri.</span><span class="sxs-lookup"><span data-stu-id="c3af0-119">hello example HTTP requests in hello next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="c3af0-120">Si è gratuita tootry out hello richiede manualmente utilizzando i valori o sostituirli con valori personalizzati.</span><span class="sxs-lookup"><span data-stu-id="c3af0-120">You're free tootry out hello requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="c3af0-121">Informazioni su come troppo[Ottieni B2C tenant, applicazione e i criteri](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="c3af0-121">Learn how too[get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="c3af0-122">Invio di richieste di autenticazione</span><span class="sxs-lookup"><span data-stu-id="c3af0-122">Send authentication requests</span></span>
<span data-ttu-id="c3af0-123">Quando l'app web deve utente hello tooauthenticate ed eseguito un criterio, è possibile indirizzare hello utente toohello `/authorize` endpoint.</span><span class="sxs-lookup"><span data-stu-id="c3af0-123">When your web app needs tooauthenticate hello user and execute a policy, it can direct hello user toohello `/authorize` endpoint.</span></span> <span data-ttu-id="c3af0-124">Si tratta di hello interattivo parte del flusso di hello, in cui utente hello accetta azione, a seconda dei criteri di hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-124">This is hello interactive portion of hello flow, where hello user takes action, depending on hello policy.</span></span>

<span data-ttu-id="c3af0-125">In questa richiesta, il client di hello indica autorizzazioni hello talmente tooacquire tra utente hello in hello `scope` tooexecute di criteri di parametro e hello in hello `p` parametro.</span><span class="sxs-lookup"><span data-stu-id="c3af0-125">In this request, hello client indicates hello permissions that it needs tooacquire from hello user in hello `scope` parameter and hello policy tooexecute in hello `p` parameter.</span></span> <span data-ttu-id="c3af0-126">Vengono forniti esempi di tre in hello seguenti sezioni (con interruzioni di riga per migliorare la leggibilità), ognuno dei quali utilizza criteri diversi.</span><span class="sxs-lookup"><span data-stu-id="c3af0-126">Three examples are provided in hello following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="c3af0-127">tooget un'idea di come funziona ciascuna richiesta, provare a richiesta hello incollare in un browser e l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-127">tooget a feel for how each request works, try pasting hello request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="c3af0-128">Uso di un criterio di accesso</span><span class="sxs-lookup"><span data-stu-id="c3af0-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="c3af0-129">Uso di un criterio di iscrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="c3af0-130">Uso di un criterio di modifica del profilo</span><span class="sxs-lookup"><span data-stu-id="c3af0-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="c3af0-131">Parametro</span><span class="sxs-lookup"><span data-stu-id="c3af0-131">Parameter</span></span> | <span data-ttu-id="c3af0-132">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="c3af0-132">Required?</span></span> | <span data-ttu-id="c3af0-133">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c3af0-134">client_id</span><span class="sxs-lookup"><span data-stu-id="c3af0-134">client_id</span></span> |<span data-ttu-id="c3af0-135">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-135">Required</span></span> |<span data-ttu-id="c3af0-136">applicazione Hello ID tale hello [portale di Azure](https://portal.azure.com/) assegnato tooyour app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-136">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="c3af0-137">response_type</span><span class="sxs-lookup"><span data-stu-id="c3af0-137">response_type</span></span> |<span data-ttu-id="c3af0-138">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-138">Required</span></span> |<span data-ttu-id="c3af0-139">tipo di risposta Hello, che deve includere un ID token di OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="c3af0-139">hello response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="c3af0-140">Se l'app Web necessita anche di token per chiamare un'API Web, è possibile usare `code+id_token`, come illustrato qui.</span><span class="sxs-lookup"><span data-stu-id="c3af0-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="c3af0-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="c3af0-141">redirect_uri</span></span> |<span data-ttu-id="c3af0-142">Consigliato</span><span class="sxs-lookup"><span data-stu-id="c3af0-142">Recommended</span></span> |<span data-ttu-id="c3af0-143">Hello `redirect_uri` parametro dell'app, in cui le risposte di autenticazione possono essere inviate e ricevute dall'app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-143">hello `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="c3af0-144">Deve corrispondere esattamente a uno di hello `redirect_uri` parametri che è stato registrato nel portale di hello, ad eccezione del fatto che deve essere codificato in URL.</span><span class="sxs-lookup"><span data-stu-id="c3af0-144">It must exactly match one of hello `redirect_uri` parameters that you registered in hello portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="c3af0-145">scope</span><span class="sxs-lookup"><span data-stu-id="c3af0-145">scope</span></span> |<span data-ttu-id="c3af0-146">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-146">Required</span></span> |<span data-ttu-id="c3af0-147">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="c3af0-147">A space-separated list of scopes.</span></span> <span data-ttu-id="c3af0-148">Il valore di un singolo ambito indica tooAzure AD entrambe le autorizzazioni che sono stati richiesti.</span><span class="sxs-lookup"><span data-stu-id="c3af0-148">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="c3af0-149">Hello `openid` ambito indica che un toosign autorizzazione nei dati utente e ottenere hello, sull'utente hello sotto forma di hello di token ID (toocome più su questo più avanti in articolo hello).</span><span class="sxs-lookup"><span data-stu-id="c3af0-149">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of ID tokens (more toocome on this later in hello article).</span></span> <span data-ttu-id="c3af0-150">Hello `offline_access` ambito è facoltativo per le applicazioni web.</span><span class="sxs-lookup"><span data-stu-id="c3af0-150">hello `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="c3af0-151">Indica che l'app sarà necessario un *token di aggiornamento* per tooresources di accesso di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="c3af0-151">It indicates that your app will need a *refresh token* for long-lived access tooresources.</span></span> |
| <span data-ttu-id="c3af0-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="c3af0-152">response_mode</span></span> |<span data-ttu-id="c3af0-153">Consigliato</span><span class="sxs-lookup"><span data-stu-id="c3af0-153">Recommended</span></span> |<span data-ttu-id="c3af0-154">metodo Hello che deve essere utilizzati toosend hello autorizzazione codice tooyour indietro app risultante.</span><span class="sxs-lookup"><span data-stu-id="c3af0-154">hello method that should be used toosend hello resulting authorization code back tooyour app.</span></span> <span data-ttu-id="c3af0-155">Può essere `query`, `form_post` o `fragment`.</span><span class="sxs-lookup"><span data-stu-id="c3af0-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="c3af0-156">Hello `form_post` modalità di risposta è consigliabile per motivi di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="c3af0-156">hello `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="c3af0-157">state</span><span class="sxs-lookup"><span data-stu-id="c3af0-157">state</span></span> |<span data-ttu-id="c3af0-158">Consigliato</span><span class="sxs-lookup"><span data-stu-id="c3af0-158">Recommended</span></span> |<span data-ttu-id="c3af0-159">Un valore incluso nella richiesta di hello che viene inoltre restituito in risposta token hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-159">A value included in hello request that is also returned in hello token response.</span></span> <span data-ttu-id="c3af0-160">Può trattarsi di una stringa di qualsiasi contenuto.</span><span class="sxs-lookup"><span data-stu-id="c3af0-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="c3af0-161">Per evitare gli attacchi di richiesta intersito falsa, viene in genere usato un valore univoco generato casualmente.</span><span class="sxs-lookup"><span data-stu-id="c3af0-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="c3af0-162">stato Hello è anche tooencode utilizzati informazioni sullo stato dell'utente hello in app hello prima dell'esecuzione della richiesta di autenticazione hello, ad esempio fossero nella pagina di hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-162">hello state is also used tooencode information about hello user's state in hello app before hello authentication request occurred, such as hello page they were on.</span></span> |
| <span data-ttu-id="c3af0-163">nonce</span><span class="sxs-lookup"><span data-stu-id="c3af0-163">nonce</span></span> |<span data-ttu-id="c3af0-164">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-164">Required</span></span> |<span data-ttu-id="c3af0-165">Un valore incluso nella richiesta di hello (generato da app hello) che verrà incluso nel token ID risultante hello come attestazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-165">A value included in hello request (generated by hello app) that will be included in hello resulting ID token as a claim.</span></span> <span data-ttu-id="c3af0-166">app Hello consente di verificare che gli attacchi di riproduzione token di toomitigate questo valore.</span><span class="sxs-lookup"><span data-stu-id="c3af0-166">hello app can then verify this value toomitigate token replay attacks.</span></span> <span data-ttu-id="c3af0-167">valore di Hello in genere è una stringa univoca casuale che può essere utilizzato tooidentify hello origine della richiesta di hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-167">hello value is typically a randomized unique string that can be used tooidentify hello origin of hello request.</span></span> |
| <span data-ttu-id="c3af0-168">p</span><span class="sxs-lookup"><span data-stu-id="c3af0-168">p</span></span> |<span data-ttu-id="c3af0-169">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-169">Required</span></span> |<span data-ttu-id="c3af0-170">criteri di Hello che verranno eseguito.</span><span class="sxs-lookup"><span data-stu-id="c3af0-170">hello policy that will be executed.</span></span> <span data-ttu-id="c3af0-171">È il nome di hello di un criterio che viene creato nel tenant di B2C.</span><span class="sxs-lookup"><span data-stu-id="c3af0-171">It is hello name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="c3af0-172">valore del nome criterio Hello deve iniziare con `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="c3af0-172">hello policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="c3af0-173">Informazioni su criteri e hello [framework criteri estendibile](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="c3af0-173">Learn more about policies and hello [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="c3af0-174">prompt</span><span class="sxs-lookup"><span data-stu-id="c3af0-174">prompt</span></span> |<span data-ttu-id="c3af0-175">Facoltativo</span><span class="sxs-lookup"><span data-stu-id="c3af0-175">Optional</span></span> |<span data-ttu-id="c3af0-176">tipo di Hello dell'interazione dell'utente che è obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="c3af0-176">hello type of user interaction that is required.</span></span> <span data-ttu-id="c3af0-177">Hello unico valore valido in questo momento è `login`, che forza hello tooenter utente le credenziali per tale richiesta.</span><span class="sxs-lookup"><span data-stu-id="c3af0-177">hello only valid value at this time is `login`, which forces hello user tooenter their credentials on that request.</span></span> <span data-ttu-id="c3af0-178">L'accesso Single Sign-On non avrà effetto.</span><span class="sxs-lookup"><span data-stu-id="c3af0-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="c3af0-179">A questo punto, hello verrà chiesto del flusso di lavoro del criterio di toocomplete hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-179">At this point, hello user is asked toocomplete hello policy's workflow.</span></span> <span data-ttu-id="c3af0-180">Questa operazione potrebbe comportare hello immissione di nome utente e password, accedere con un'identità di social networking, iscriversi a directory hello o qualsiasi altro numero di passaggi, a seconda di come sono definiti i criteri di hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-180">This might involve hello user entering their username and password, signing in with a social identity, signing up for hello directory, or any other number of steps, depending on how hello policy is defined.</span></span>

<span data-ttu-id="c3af0-181">Al termine di criteri di hello, utente hello Azure AD restituisce una app tooyour risposta in hello indicato `redirect_uri` parametro, utilizzando il metodo hello specificato in hello `response_mode` parametro.</span><span class="sxs-lookup"><span data-stu-id="c3af0-181">After hello user completes hello policy, Azure AD returns a response tooyour app at hello indicated `redirect_uri` parameter, by using hello method that is specified in hello `response_mode` parameter.</span></span> <span data-ttu-id="c3af0-182">risposta Hello è hello stesso per ogni hello precedono i casi, indipendentemente dal criterio hello che viene eseguita.</span><span class="sxs-lookup"><span data-stu-id="c3af0-182">hello response is hello same for each of hello preceding cases, independent of hello policy that is executed.</span></span>

<span data-ttu-id="c3af0-183">Una risposta con esito positivo che utilizza `response_mode=fragment` ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="c3af0-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="c3af0-184">Parametro</span><span class="sxs-lookup"><span data-stu-id="c3af0-184">Parameter</span></span> | <span data-ttu-id="c3af0-185">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c3af0-186">id_token</span><span class="sxs-lookup"><span data-stu-id="c3af0-186">id_token</span></span> |<span data-ttu-id="c3af0-187">Hello token ID hello app richiesto.</span><span class="sxs-lookup"><span data-stu-id="c3af0-187">hello ID token that hello app requested.</span></span> <span data-ttu-id="c3af0-188">È possibile utilizzare l'identità dell'utente di hello ID tooverify token hello e avviare una sessione utente hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-188">You can use hello ID token tooverify hello user's identity and begin a session with hello user.</span></span> <span data-ttu-id="c3af0-189">Ulteriori informazioni sul token ID e il relativo contenuto sono inclusi in hello [riferimento del token di Azure Active Directory B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="c3af0-189">More details on ID tokens and their contents are included in hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="c3af0-190">code</span><span class="sxs-lookup"><span data-stu-id="c3af0-190">code</span></span> |<span data-ttu-id="c3af0-191">Hello codice di autorizzazione che app hello richiesto, se è stato utilizzato `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="c3af0-191">hello authorization code that hello app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="c3af0-192">app Hello è possibile utilizzare toorequest codice di autorizzazione hello un token di accesso per una risorsa di destinazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-192">hello app can use hello authorization code toorequest an access token for a target resource.</span></span> <span data-ttu-id="c3af0-193">I codici di autorizzazione hanno una durata molto breve.</span><span class="sxs-lookup"><span data-stu-id="c3af0-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="c3af0-194">In genere scadono dopo circa 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="c3af0-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="c3af0-195">state</span><span class="sxs-lookup"><span data-stu-id="c3af0-195">state</span></span> |<span data-ttu-id="c3af0-196">Se un `state` parametro è incluso nella richiesta di hello, hello stesso valore deve essere visualizzato nella risposta hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-196">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="c3af0-197">Hello app deve verificare che hello `state` valori hello richiesta e risposta sono identici.</span><span class="sxs-lookup"><span data-stu-id="c3af0-197">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

<span data-ttu-id="c3af0-198">Le risposte di errore possono anche essere inviate toohello `redirect_uri` parametro in modo che app hello possibile gestirli nel modo appropriato:</span><span class="sxs-lookup"><span data-stu-id="c3af0-198">Error responses can also be sent toohello `redirect_uri` parameter so that hello app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="c3af0-199">.</span><span class="sxs-lookup"><span data-stu-id="c3af0-199">Parameter</span></span> | <span data-ttu-id="c3af0-200">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c3af0-201">error</span><span class="sxs-lookup"><span data-stu-id="c3af0-201">error</span></span> |<span data-ttu-id="c3af0-202">Una stringa di codice di errore che può essere utilizzati tooclassify tipi di errori che si verificano e che può essere utilizzato tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="c3af0-202">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="c3af0-203">error_description</span><span class="sxs-lookup"><span data-stu-id="c3af0-203">error_description</span></span> |<span data-ttu-id="c3af0-204">Un messaggio di errore specifico che consente a uno sviluppatore di identificare causa radice di hello di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-204">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |
| <span data-ttu-id="c3af0-205">state</span><span class="sxs-lookup"><span data-stu-id="c3af0-205">state</span></span> |<span data-ttu-id="c3af0-206">Vedere la descrizione completa di hello nella tabella prima di hello in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-206">See hello full description in hello first table in this section.</span></span> <span data-ttu-id="c3af0-207">Se un `state` parametro è incluso nella richiesta di hello, hello stesso valore deve essere visualizzato nella risposta hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-207">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="c3af0-208">Hello app deve verificare che hello `state` valori hello richiesta e risposta sono identici.</span><span class="sxs-lookup"><span data-stu-id="c3af0-208">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

## <a name="validate-hello-id-token"></a><span data-ttu-id="c3af0-209">Convalidare i token ID hello</span><span class="sxs-lookup"><span data-stu-id="c3af0-209">Validate hello ID token</span></span>
<span data-ttu-id="c3af0-210">Solo la ricezione di un ID token non è sufficiente tooauthenticate hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-210">Just receiving an ID token is not enough tooauthenticate hello user.</span></span> <span data-ttu-id="c3af0-211">È necessario convalidare la firma del token ID hello e verificare hello attestazioni nel token hello requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-211">You must validate hello ID token's signature and verify hello claims in hello token per your app's requirements.</span></span> <span data-ttu-id="c3af0-212">Usa Azure Active Directory B2C [i token Web JSON (Jwt)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) e pubblica i token toosign di crittografia della chiave e verificare che siano validi.</span><span class="sxs-lookup"><span data-stu-id="c3af0-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography toosign tokens and verify that they are valid.</span></span>

<span data-ttu-id="c3af0-213">Sono disponibili molte librerie open source per la convalida dei token JWT, a seconda del linguaggio preferito.</span><span class="sxs-lookup"><span data-stu-id="c3af0-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="c3af0-214">È consigliabile prendere in esame tali opzioni anziché implementare una logica di convalida personalizzata.</span><span class="sxs-lookup"><span data-stu-id="c3af0-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="c3af0-215">informazioni di Hello qui saranno utili per capire come tooproperly utilizzare tali raccolte.</span><span class="sxs-lookup"><span data-stu-id="c3af0-215">hello information here will be useful in figuring out how tooproperly use those libraries.</span></span>

<span data-ttu-id="c3af0-216">Azure Active Directory B2C dispone di un endpoint dei metadati di OpenID Connect, che consente un'app toofetch informazioni Azure Active Directory B2C in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app toofetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="c3af0-217">Queste informazioni includono endpoint, contenuti del token e chiavi per la firma dei token.</span><span class="sxs-lookup"><span data-stu-id="c3af0-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="c3af0-218">Il tenant B2C include un documento di metadati JSON per ogni criterio.</span><span class="sxs-lookup"><span data-stu-id="c3af0-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="c3af0-219">Ad esempio, hello documento di metadati per hello `b2c_1_sign_in` criteri in `fabrikamb2c.onmicrosoft.com` si trova in:</span><span class="sxs-lookup"><span data-stu-id="c3af0-219">For example, hello metadata document for hello `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="c3af0-220">Una delle proprietà hello di questo documento di configurazione è `jwks_uri`, il cui valore per hello stesso criterio sarebbe:</span><span class="sxs-lookup"><span data-stu-id="c3af0-220">One of hello properties of this configuration document is `jwks_uri`, whose value for hello same policy would be:</span></span>

<span data-ttu-id="c3af0-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="c3af0-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="c3af0-222">toodetermine quali criteri è stato utilizzato per la firma di un ID token (e da dove toofetch hello metadati), sono disponibili due opzioni.</span><span class="sxs-lookup"><span data-stu-id="c3af0-222">toodetermine which policy was used in signing an ID token (and from where toofetch hello metadata), you have two options.</span></span> <span data-ttu-id="c3af0-223">In primo luogo, il nome di criterio hello è incluso in hello `acr` attestazione nel token ID hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-223">First, hello policy name is included in hello `acr` claim in hello ID token.</span></span> <span data-ttu-id="c3af0-224">Per informazioni su come tooparse hello attestazioni da un ID token, vedere hello [riferimento del token di Azure Active Directory B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="c3af0-224">For information on how tooparse hello claims from an ID token, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="c3af0-225">L'altra opzione è criteri hello tooencode valore hello hello `state` parametro quando si invia la richiesta hello e decodificarlo in toodetermine quali criteri è stato utilizzato.</span><span class="sxs-lookup"><span data-stu-id="c3af0-225">Your other option is tooencode hello policy in hello value of hello `state` parameter when you issue hello request, and then decode it toodetermine which policy was used.</span></span> <span data-ttu-id="c3af0-226">Entrambi i metodi sono validi.</span><span class="sxs-lookup"><span data-stu-id="c3af0-226">Either method is valid.</span></span>

<span data-ttu-id="c3af0-227">Dopo aver acquistato il documento di metadati hello dall'endpoint di metadati di OpenID Connect hello, è possibile utilizzare le chiavi pubbliche RSA 256 hello (che si trovano in questo endpoint) firma hello toovalidate di token ID hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-227">After you've acquired hello metadata document from hello OpenID Connect metadata endpoint, you can use hello RSA 256 public keys (which are located at this endpoint) toovalidate hello signature of hello ID token.</span></span> <span data-ttu-id="c3af0-228">In un determinato punto nel tempo è possibile che siano presenti più chiavi elencate in questo endpoint, ognuna identificata da un'attestazione `kid`.</span><span class="sxs-lookup"><span data-stu-id="c3af0-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="c3af0-229">Hello intestazione dei token ID hello contiene inoltre un `kid` attestazione, che indica quali di queste chiavi è stata toosign utilizzati token di ID hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-229">hello header of hello ID token also contains a `kid` claim, which indicates which of these keys was used toosign hello ID token.</span></span> <span data-ttu-id="c3af0-230">Per ulteriori informazioni, vedere hello [riferimento del token di Azure Active Directory B2C](active-directory-b2c-reference-tokens.md) (hello sezione su [convalida dei token](active-directory-b2c-reference-tokens.md#token-validation), in particolare).</span><span class="sxs-lookup"><span data-stu-id="c3af0-230">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (hello section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve hello information on this-->

<span data-ttu-id="c3af0-231">Dopo aver convalidato firma hello del token ID hello, esistono diverse attestazioni che è necessario tooverify.</span><span class="sxs-lookup"><span data-stu-id="c3af0-231">After you've validated hello signature of hello ID token, there are several claims that you need tooverify.</span></span> <span data-ttu-id="c3af0-232">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="c3af0-232">For instance:</span></span>

* <span data-ttu-id="c3af0-233">È necessario convalidare hello `nonce` tooprevent attacchi di riproduzione token di attestazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-233">You should validate hello `nonce` claim tooprevent token replay attacks.</span></span> <span data-ttu-id="c3af0-234">Il valore deve essere specificato nella richiesta di accesso hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-234">Its value should be what you specified in hello sign-in request.</span></span>
* <span data-ttu-id="c3af0-235">È necessario convalidare hello `aud` attestazione tooensure che hello token ID è stato emesso per l'app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-235">You should validate hello `aud` claim tooensure that hello ID token was issued for your app.</span></span> <span data-ttu-id="c3af0-236">Il valore deve essere l'ID applicazione hello dell'app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-236">Its value should be hello application ID of your app.</span></span>
* <span data-ttu-id="c3af0-237">È necessario convalidare hello `iat` e `exp` attestazioni tooensure che hello token ID non sia scaduto.</span><span class="sxs-lookup"><span data-stu-id="c3af0-237">You should validate hello `iat` and `exp` claims tooensure that hello ID token has not expired.</span></span>

<span data-ttu-id="c3af0-238">Esistono numerose altre convalide che è consigliabile eseguire.</span><span class="sxs-lookup"><span data-stu-id="c3af0-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="c3af0-239">Questi elementi sono descritti in dettaglio in hello [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  È inoltre possibile toovalidate ulteriori attestazioni, a seconda dello scenario.</span><span class="sxs-lookup"><span data-stu-id="c3af0-239">These are described in detail in hello [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want toovalidate additional claims, depending on your scenario.</span></span> <span data-ttu-id="c3af0-240">Alcune convalide comuni includono:</span><span class="sxs-lookup"><span data-stu-id="c3af0-240">Some common validations include:</span></span>

* <span data-ttu-id="c3af0-241">Assicurando che hello utente o l'organizzazione ha effettuato l'iscrizione per l'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-241">Ensuring that hello user/organization has signed up for hello app.</span></span>
* <span data-ttu-id="c3af0-242">Assicurandosi che l'utente hello abbia l'autorizzazione diritti.</span><span class="sxs-lookup"><span data-stu-id="c3af0-242">Ensuring that hello user has proper authorization/privileges.</span></span>
* <span data-ttu-id="c3af0-243">Verificare che sia stato applicato un determinato livello di autenticazione, ad esempio l'autenticazione a più fattori di Azure.</span><span class="sxs-lookup"><span data-stu-id="c3af0-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="c3af0-244">Per ulteriori informazioni sulle attestazioni hello in un ID token, vedere hello [riferimento del token di Azure Active Directory B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="c3af0-244">For more information on hello claims in an ID token, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="c3af0-245">Dopo avere convalidato token ID hello, è possibile iniziare una sessione utente hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-245">After you have validated hello ID token, you can begin a session with hello user.</span></span> <span data-ttu-id="c3af0-246">È possibile utilizzare le attestazioni hello hello ID token tooobtain informazioni utente hello nell'app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-246">You can use hello claims in hello ID token tooobtain information about hello user in your app.</span></span> <span data-ttu-id="c3af0-247">Gli usi di queste informazioni includono la visualizzazione, i record e l'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="c3af0-248">Acquisizione di un token</span><span class="sxs-lookup"><span data-stu-id="c3af0-248">Get a token</span></span>
<span data-ttu-id="c3af0-249">Se è necessario il tooonly app web eseguire i criteri, è possibile ignorare hello prossime sezioni.</span><span class="sxs-lookup"><span data-stu-id="c3af0-249">If you need your web app tooonly execute policies, you can skip hello next few sections.</span></span> <span data-ttu-id="c3af0-250">Queste sezioni sono applicabili tooweb solo app che necessitano di toomake autenticato chiamate tooa web API e sono anche protetti da Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="c3af0-250">These sections are applicable only tooweb apps that need toomake authenticated calls tooa web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="c3af0-251">È possibile riscattare il codice di autorizzazione hello acquisito (tramite `response_type=code+id_token`) per un token toohello desiderato risorsa inviando un `POST` richiesta toohello `/token` endpoint.</span><span class="sxs-lookup"><span data-stu-id="c3af0-251">You can redeem hello authorization code that you acquired (by using `response_type=code+id_token`) for a token toohello desired resource by sending a `POST` request toohello `/token` endpoint.</span></span> <span data-ttu-id="c3af0-252">Sono attualmente, hello solo risorse che è possibile richiedere un token per l'API web di back-end dell'app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-252">Currently, hello only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="c3af0-253">convenzione di Hello per richiedere un token tooyourself è l'ID client dell'app come ambito hello toouse:</span><span class="sxs-lookup"><span data-stu-id="c3af0-253">hello convention for requesting a token tooyourself is toouse your app's client ID as hello scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="c3af0-254">.</span><span class="sxs-lookup"><span data-stu-id="c3af0-254">Parameter</span></span> | <span data-ttu-id="c3af0-255">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="c3af0-255">Required?</span></span> | <span data-ttu-id="c3af0-256">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c3af0-257">p</span><span class="sxs-lookup"><span data-stu-id="c3af0-257">p</span></span> |<span data-ttu-id="c3af0-258">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-258">Required</span></span> |<span data-ttu-id="c3af0-259">criteri che è stato utilizzato tooacquire hello autorizzazione Hello codice.</span><span class="sxs-lookup"><span data-stu-id="c3af0-259">hello policy that was used tooacquire hello authorization code.</span></span> <span data-ttu-id="c3af0-260">Non è possibile usare un criterio diverso in questa richiesta.</span><span class="sxs-lookup"><span data-stu-id="c3af0-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="c3af0-261">Si noti che si aggiunge questa stringa di query del parametro toohello, non toohello `POST` corpo.</span><span class="sxs-lookup"><span data-stu-id="c3af0-261">Note that you add this parameter toohello query string, not toohello `POST` body.</span></span> |
| <span data-ttu-id="c3af0-262">client_id</span><span class="sxs-lookup"><span data-stu-id="c3af0-262">client_id</span></span> |<span data-ttu-id="c3af0-263">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-263">Required</span></span> |<span data-ttu-id="c3af0-264">applicazione Hello ID tale hello [portale di Azure](https://portal.azure.com/) assegnato tooyour app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-264">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="c3af0-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="c3af0-265">grant_type</span></span> |<span data-ttu-id="c3af0-266">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-266">Required</span></span> |<span data-ttu-id="c3af0-267">tipo di concessione, che deve essere Hello `authorization_code` per flusso di codice di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-267">hello type of grant, which must be `authorization_code` for hello authorization code flow.</span></span> |
| <span data-ttu-id="c3af0-268">scope</span><span class="sxs-lookup"><span data-stu-id="c3af0-268">scope</span></span> |<span data-ttu-id="c3af0-269">Consigliato</span><span class="sxs-lookup"><span data-stu-id="c3af0-269">Recommended</span></span> |<span data-ttu-id="c3af0-270">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="c3af0-270">A space-separated list of scopes.</span></span> <span data-ttu-id="c3af0-271">Il valore di un singolo ambito indica tooAzure AD entrambe le autorizzazioni che sono stati richiesti.</span><span class="sxs-lookup"><span data-stu-id="c3af0-271">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="c3af0-272">Hello `openid` ambito indica che un toosign autorizzazione nei dati utente e ottenere hello, sull'utente hello sotto forma di hello di id_token parametri.</span><span class="sxs-lookup"><span data-stu-id="c3af0-272">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of id_token parameters.</span></span> <span data-ttu-id="c3af0-273">Può essere utilizzato tooget token tooyour dell'app web back-end API, rappresentato da hello stesso ID applicazione come client hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-273">It can be used tooget tokens tooyour app's own back-end web API, which is represented by hello same application ID as hello client.</span></span> <span data-ttu-id="c3af0-274">Hello `offline_access` ambito indica che l'app sarà necessario un token di aggiornamento per tooresources di accesso di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="c3af0-274">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span> |
| <span data-ttu-id="c3af0-275">code</span><span class="sxs-lookup"><span data-stu-id="c3af0-275">code</span></span> |<span data-ttu-id="c3af0-276">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-276">Required</span></span> |<span data-ttu-id="c3af0-277">codice di autorizzazione Hello acquisito nel segmento prima di hello del flusso di hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-277">hello authorization code that you acquired in hello first leg of hello flow.</span></span> |
| <span data-ttu-id="c3af0-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="c3af0-278">redirect_uri</span></span> |<span data-ttu-id="c3af0-279">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-279">Required</span></span> |<span data-ttu-id="c3af0-280">Hello `redirect_uri` parametro di un'applicazione hello in cui viene visualizzato il codice di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-280">hello `redirect_uri` parameter of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="c3af0-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="c3af0-281">client_secret</span></span> |<span data-ttu-id="c3af0-282">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-282">Required</span></span> |<span data-ttu-id="c3af0-283">segreto dell'applicazione Hello generato nel hello [portale di Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="c3af0-283">hello application secret that you generated in hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="c3af0-284">La chiave privata dell'applicazione è un elemento di sicurezza importante.</span><span class="sxs-lookup"><span data-stu-id="c3af0-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="c3af0-285">È necessario archiviarla in modo sicuro nel server.</span><span class="sxs-lookup"><span data-stu-id="c3af0-285">You should store it securely on your server.</span></span> <span data-ttu-id="c3af0-286">È necessario anche far ruotare periodicamente la chiave privata client.</span><span class="sxs-lookup"><span data-stu-id="c3af0-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="c3af0-287">Una risposta di token con esito positivo ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="c3af0-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="c3af0-288">Parametro</span><span class="sxs-lookup"><span data-stu-id="c3af0-288">Parameter</span></span> | <span data-ttu-id="c3af0-289">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c3af0-290">not_before</span><span class="sxs-lookup"><span data-stu-id="c3af0-290">not_before</span></span> |<span data-ttu-id="c3af0-291">ora di Hello al quale hello è considerato valido, in valore epoch token.</span><span class="sxs-lookup"><span data-stu-id="c3af0-291">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="c3af0-292">token_type</span><span class="sxs-lookup"><span data-stu-id="c3af0-292">token_type</span></span> |<span data-ttu-id="c3af0-293">valore di tipo di token Hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-293">hello token type value.</span></span> <span data-ttu-id="c3af0-294">Hello solo tipo di Azure AD supporta `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="c3af0-294">hello only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="c3af0-295">access_token</span><span class="sxs-lookup"><span data-stu-id="c3af0-295">access_token</span></span> |<span data-ttu-id="c3af0-296">Hello firmato il token JWT richiesto.</span><span class="sxs-lookup"><span data-stu-id="c3af0-296">hello signed JWT token that you requested.</span></span> |
| <span data-ttu-id="c3af0-297">scope</span><span class="sxs-lookup"><span data-stu-id="c3af0-297">scope</span></span> |<span data-ttu-id="c3af0-298">ambiti di Hello per cui hello token è valido.</span><span class="sxs-lookup"><span data-stu-id="c3af0-298">hello scopes for which hello token is valid.</span></span> <span data-ttu-id="c3af0-299">Possono essere usati per memorizzare i token nella cache per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="c3af0-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="c3af0-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="c3af0-300">expires_in</span></span> |<span data-ttu-id="c3af0-301">durata Hello che hello token di accesso è valido (in secondi).</span><span class="sxs-lookup"><span data-stu-id="c3af0-301">hello length of time that hello access token is valid (in seconds).</span></span> |
| <span data-ttu-id="c3af0-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="c3af0-302">refresh_token</span></span> |<span data-ttu-id="c3af0-303">Token di aggiornamento di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c3af0-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="c3af0-304">app Hello è possibile usare questo token aggiuntivi tooacquire token alla scadenza del token corrente hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-304">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="c3af0-305">Aggiornare i token sono di lunga durati e può essere utilizzato tooretain accesso tooresources per lunghi periodi di tempo.</span><span class="sxs-lookup"><span data-stu-id="c3af0-305">Refresh tokens are long-lived and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="c3af0-306">Per ulteriori informazioni, vedere toohello [riferimento token B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="c3af0-306">For more details, refer toohello [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="c3af0-307">Si noti che è necessario aver utilizzato ambito hello `offline_access` autorizzazione hello sia token richieste in ordine tooreceive un token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="c3af0-307">Note that you must have used hello scope `offline_access` in both hello authorization and token requests in order tooreceive a refresh token.</span></span> |

<span data-ttu-id="c3af0-308">Le risposte di errore si presentano nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="c3af0-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="c3af0-309">Parametro</span><span class="sxs-lookup"><span data-stu-id="c3af0-309">Parameter</span></span> | <span data-ttu-id="c3af0-310">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c3af0-311">error</span><span class="sxs-lookup"><span data-stu-id="c3af0-311">error</span></span> |<span data-ttu-id="c3af0-312">Una stringa di codice di errore che può essere utilizzati tooclassify tipi di errori che si verificano e che può essere utilizzato tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="c3af0-312">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="c3af0-313">error_description</span><span class="sxs-lookup"><span data-stu-id="c3af0-313">error_description</span></span> |<span data-ttu-id="c3af0-314">Un messaggio di errore specifico che consente a uno sviluppatore di identificare causa radice di hello di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-314">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |

## <a name="use-hello-token"></a><span data-ttu-id="c3af0-315">Usare il token di hello</span><span class="sxs-lookup"><span data-stu-id="c3af0-315">Use hello token</span></span>
<span data-ttu-id="c3af0-316">Ora che è stato acquisito un token di accesso, è possibile utilizzare token hello in web back-end tramite tooyour richieste API includendola in hello `Authorization` intestazione:</span><span class="sxs-lookup"><span data-stu-id="c3af0-316">Now that you've successfully acquired an access token, you can use hello token in requests tooyour back-end web APIs by including it in hello `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-hello-token"></a><span data-ttu-id="c3af0-317">Hello token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="c3af0-317">Refresh hello token</span></span>
<span data-ttu-id="c3af0-318">I token ID hanno breve durata.</span><span class="sxs-lookup"><span data-stu-id="c3af0-318">ID tokens are short-lived.</span></span> <span data-ttu-id="c3af0-319">È necessario aggiornarli dopo la scadenza toocontinue da tooaccess in grado di risorse.</span><span class="sxs-lookup"><span data-stu-id="c3af0-319">You must refresh them after they expire toocontinue being able tooaccess resources.</span></span> <span data-ttu-id="c3af0-320">È possibile farlo tramite l'invio di un altro `POST` richiesta toohello `/token` endpoint.</span><span class="sxs-lookup"><span data-stu-id="c3af0-320">You can do so by submitting another `POST` request toohello `/token` endpoint.</span></span> <span data-ttu-id="c3af0-321">Questa volta, fornire hello `refresh_token` parametro anziché hello `code` parametro:</span><span class="sxs-lookup"><span data-stu-id="c3af0-321">This time, provide hello `refresh_token` parameter instead of hello `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="c3af0-322">.</span><span class="sxs-lookup"><span data-stu-id="c3af0-322">Parameter</span></span> | <span data-ttu-id="c3af0-323">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-323">Required</span></span> | <span data-ttu-id="c3af0-324">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c3af0-325">p</span><span class="sxs-lookup"><span data-stu-id="c3af0-325">p</span></span> |<span data-ttu-id="c3af0-326">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-326">Required</span></span> |<span data-ttu-id="c3af0-327">Hello criteri token di aggiornamento utilizzato tooacquire hello originale.</span><span class="sxs-lookup"><span data-stu-id="c3af0-327">hello policy that was used tooacquire hello original refresh token.</span></span> <span data-ttu-id="c3af0-328">Non è possibile usare un criterio diverso in questa richiesta.</span><span class="sxs-lookup"><span data-stu-id="c3af0-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="c3af0-329">Si noti che si aggiunge questa stringa di query del parametro toohello, non toohello corpo del POST.</span><span class="sxs-lookup"><span data-stu-id="c3af0-329">Note that you add this parameter toohello query string, not toohello POST body.</span></span> |
| <span data-ttu-id="c3af0-330">client_id</span><span class="sxs-lookup"><span data-stu-id="c3af0-330">client_id</span></span> |<span data-ttu-id="c3af0-331">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-331">Required</span></span> |<span data-ttu-id="c3af0-332">applicazione Hello ID tale hello [portale di Azure](https://portal.azure.com/) assegnato tooyour app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-332">hello application ID that hello [Azure portal](https://portal.azure.com/) assigned tooyour app.</span></span> |
| <span data-ttu-id="c3af0-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="c3af0-333">grant_type</span></span> |<span data-ttu-id="c3af0-334">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-334">Required</span></span> |<span data-ttu-id="c3af0-335">tipo di Hello di concessione, che deve essere un token di aggiornamento per questo segmento del flusso di codice di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-335">hello type of grant, which must be a refresh token for this leg of hello authorization code flow.</span></span> |
| <span data-ttu-id="c3af0-336">scope</span><span class="sxs-lookup"><span data-stu-id="c3af0-336">scope</span></span> |<span data-ttu-id="c3af0-337">Consigliato</span><span class="sxs-lookup"><span data-stu-id="c3af0-337">Recommended</span></span> |<span data-ttu-id="c3af0-338">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="c3af0-338">A space-separated list of scopes.</span></span> <span data-ttu-id="c3af0-339">Il valore di un singolo ambito indica tooAzure AD entrambe le autorizzazioni che sono stati richiesti.</span><span class="sxs-lookup"><span data-stu-id="c3af0-339">A single scope value indicates tooAzure AD both permissions that are being requested.</span></span> <span data-ttu-id="c3af0-340">Hello `openid` ambito indica che un toosign autorizzazione nei dati utente e ottenere hello, sull'utente hello sotto forma di hello di token ID.</span><span class="sxs-lookup"><span data-stu-id="c3af0-340">hello `openid` scope indicates a permission toosign in hello user and get data about hello user in hello form of ID tokens.</span></span> <span data-ttu-id="c3af0-341">Può essere utilizzato tooget token tooyour dell'app web back-end API, rappresentato da hello stesso ID applicazione come client hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-341">It can be used tooget tokens tooyour app's own back-end web API, which is represented by hello same application ID as hello client.</span></span> <span data-ttu-id="c3af0-342">Hello `offline_access` ambito indica che l'app sarà necessario un token di aggiornamento per tooresources di accesso di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="c3af0-342">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span> |
| <span data-ttu-id="c3af0-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="c3af0-343">redirect_uri</span></span> |<span data-ttu-id="c3af0-344">Consigliato</span><span class="sxs-lookup"><span data-stu-id="c3af0-344">Recommended</span></span> |<span data-ttu-id="c3af0-345">Hello `redirect_uri` parametro di un'applicazione hello in cui viene visualizzato il codice di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-345">hello `redirect_uri` parameter of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="c3af0-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="c3af0-346">refresh_token</span></span> |<span data-ttu-id="c3af0-347">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-347">Required</span></span> |<span data-ttu-id="c3af0-348">Hello originale token di aggiornamento acquisito nel segmento di secondo hello del flusso di hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-348">hello original refresh token that you acquired in hello second leg of hello flow.</span></span> <span data-ttu-id="c3af0-349">Si noti che è necessario aver utilizzato ambito hello `offline_access` autorizzazione hello sia token richieste in ordine tooreceive un token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="c3af0-349">Note that you must have used hello scope `offline_access` in both hello authorization and token requests in order tooreceive a refresh token.</span></span> |
| <span data-ttu-id="c3af0-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="c3af0-350">client_secret</span></span> |<span data-ttu-id="c3af0-351">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-351">Required</span></span> |<span data-ttu-id="c3af0-352">segreto dell'applicazione Hello generato nel hello [portale di Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="c3af0-352">hello application secret that you generated in hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="c3af0-353">La chiave privata dell'applicazione è un elemento di sicurezza importante.</span><span class="sxs-lookup"><span data-stu-id="c3af0-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="c3af0-354">È necessario archiviarla in modo sicuro nel server.</span><span class="sxs-lookup"><span data-stu-id="c3af0-354">You should store it securely on your server.</span></span> <span data-ttu-id="c3af0-355">È necessario anche far ruotare periodicamente la chiave privata client.</span><span class="sxs-lookup"><span data-stu-id="c3af0-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="c3af0-356">Una risposta di token con esito positivo ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="c3af0-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="c3af0-357">Parametro</span><span class="sxs-lookup"><span data-stu-id="c3af0-357">Parameter</span></span> | <span data-ttu-id="c3af0-358">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c3af0-359">not_before</span><span class="sxs-lookup"><span data-stu-id="c3af0-359">not_before</span></span> |<span data-ttu-id="c3af0-360">ora di Hello al quale hello è considerato valido, in valore epoch token.</span><span class="sxs-lookup"><span data-stu-id="c3af0-360">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="c3af0-361">token_type</span><span class="sxs-lookup"><span data-stu-id="c3af0-361">token_type</span></span> |<span data-ttu-id="c3af0-362">valore di tipo di token Hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-362">hello token type value.</span></span> <span data-ttu-id="c3af0-363">Hello solo tipo di Azure AD supporta `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="c3af0-363">hello only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="c3af0-364">access_token</span><span class="sxs-lookup"><span data-stu-id="c3af0-364">access_token</span></span> |<span data-ttu-id="c3af0-365">Hello firmato il token JWT richiesto.</span><span class="sxs-lookup"><span data-stu-id="c3af0-365">hello signed JWT token that you requested.</span></span> |
| <span data-ttu-id="c3af0-366">scope</span><span class="sxs-lookup"><span data-stu-id="c3af0-366">scope</span></span> |<span data-ttu-id="c3af0-367">ambito Hello hello token è valido, che può essere usato per la memorizzazione nella cache i token per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="c3af0-367">hello scope that hello token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="c3af0-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="c3af0-368">expires_in</span></span> |<span data-ttu-id="c3af0-369">durata Hello che hello token di accesso è valido (in secondi).</span><span class="sxs-lookup"><span data-stu-id="c3af0-369">hello length of time that hello access token is valid (in seconds).</span></span> |
| <span data-ttu-id="c3af0-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="c3af0-370">refresh_token</span></span> |<span data-ttu-id="c3af0-371">Token di aggiornamento di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="c3af0-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="c3af0-372">app Hello è possibile usare questo token aggiuntivi tooacquire token alla scadenza del token corrente hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-372">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span>  <span data-ttu-id="c3af0-373">Aggiornare i token sono di lunga durati e può essere utilizzato tooretain accesso tooresources per lunghi periodi di tempo.</span><span class="sxs-lookup"><span data-stu-id="c3af0-373">Refresh tokens are long-lived and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="c3af0-374">Per ulteriori dettagli, consultare toohello [riferimento token B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="c3af0-374">For more detail, refer toohello [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="c3af0-375">Le risposte di errore si presentano nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="c3af0-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="c3af0-376">Parametro</span><span class="sxs-lookup"><span data-stu-id="c3af0-376">Parameter</span></span> | <span data-ttu-id="c3af0-377">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c3af0-378">error</span><span class="sxs-lookup"><span data-stu-id="c3af0-378">error</span></span> |<span data-ttu-id="c3af0-379">Una stringa di codice di errore che può essere utilizzati tooclassify tipi di errori che si verificano e che può essere utilizzato tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="c3af0-379">An error-code string that can be used tooclassify types of errors that occur and that can be used tooreact tooerrors.</span></span> |
| <span data-ttu-id="c3af0-380">error_description</span><span class="sxs-lookup"><span data-stu-id="c3af0-380">error_description</span></span> |<span data-ttu-id="c3af0-381">Un messaggio di errore specifico che consente a uno sviluppatore di identificare causa radice di hello di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-381">A specific error message that can help a developer identify hello root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="c3af0-382">Inviare una richiesta di disconnessione</span><span class="sxs-lookup"><span data-stu-id="c3af0-382">Send a sign-out request</span></span>
<span data-ttu-id="c3af0-383">Quando si desidera toosign hello utente all'esterno dell'app hello, è insufficiente tooclear i cookie dell'applicazione o in caso contrario terminare la sessione di hello con utente hello.</span><span class="sxs-lookup"><span data-stu-id="c3af0-383">When you want toosign hello user out of hello app, it is not enough tooclear your app's cookies or otherwise end hello session with hello user.</span></span> <span data-ttu-id="c3af0-384">È inoltre necessario reindirizzare hello utente tooAzure AD toosign out. Se non si toodo così, utente hello potrebbe essere in grado di tooreauthenticate tooyour app senza dover immettere nuovamente le proprie credenziali.</span><span class="sxs-lookup"><span data-stu-id="c3af0-384">You must also redirect hello user tooAzure AD toosign out. If you fail toodo so, hello user might be able tooreauthenticate tooyour app without entering their credentials again.</span></span> <span data-ttu-id="c3af0-385">in quanto avrà accesso a una sessione Single Sign-On valida con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3af0-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="c3af0-386">È possibile reindirizzare semplicemente hello utente toohello `end_session` endpoint elencato nel documento di metadati di OpenID Connect hello descritto in precedenza in hello sezione "Convalida token ID hello":</span><span class="sxs-lookup"><span data-stu-id="c3af0-386">You can simply redirect hello user toohello `end_session` endpoint that is listed in hello OpenID Connect metadata document described earlier in hello "Validate hello ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="c3af0-387">.</span><span class="sxs-lookup"><span data-stu-id="c3af0-387">Parameter</span></span> | <span data-ttu-id="c3af0-388">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="c3af0-388">Required?</span></span> | <span data-ttu-id="c3af0-389">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3af0-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c3af0-390">p</span><span class="sxs-lookup"><span data-stu-id="c3af0-390">p</span></span> |<span data-ttu-id="c3af0-391">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="c3af0-391">Required</span></span> |<span data-ttu-id="c3af0-392">criteri di Hello che si desidera che toouse toosign hello utente dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-392">hello policy that you want toouse toosign hello user out of your application.</span></span> |
| <span data-ttu-id="c3af0-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="c3af0-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="c3af0-394">Consigliato</span><span class="sxs-lookup"><span data-stu-id="c3af0-394">Recommended</span></span> |<span data-ttu-id="c3af0-395">Hello URL utente hello deve essere reindirizzato tooafter riuscita disconnessione. Se non è incluso, Azure AD B2C utente hello viene visualizzato un messaggio generico.</span><span class="sxs-lookup"><span data-stu-id="c3af0-395">hello URL that hello user should be redirected tooafter successful sign-out. If it is not included, Azure AD B2C shows hello user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="c3af0-396">Sebbene l'indirizzamento hello utente toohello `end_session` endpoint verrà cancellato alcune hello stato dell'utente single sign-on con Azure Active Directory B2C, non convalida utente hello fuori la sessione di provider di Attestazioni di identità di social networking.</span><span class="sxs-lookup"><span data-stu-id="c3af0-396">Although directing hello user toohello `end_session` endpoint will clear some of hello user's single sign-on state with Azure AD B2C, it will not sign hello user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="c3af0-397">Se utente hello seleziona hello IDP stesso durante un successivo Accedi, essi verranno riautenticare, senza immettere le proprie credenziali.</span><span class="sxs-lookup"><span data-stu-id="c3af0-397">If hello user selects hello same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="c3af0-398">Se un utente desideri toosign dall'applicazione B2C, non necessariamente significa che desiderano toosign fuori il proprio account Facebook.</span><span class="sxs-lookup"><span data-stu-id="c3af0-398">If a user wants toosign out of your B2C application, it does not necessarily mean they want toosign out of their Facebook account.</span></span> <span data-ttu-id="c3af0-399">Tuttavia, nel caso di hello di account locali, hello sessione verrà terminata correttamente.</span><span class="sxs-lookup"><span data-stu-id="c3af0-399">However, in hello case of local accounts, hello user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="c3af0-400">Uso del proprio tenant B2C</span><span class="sxs-lookup"><span data-stu-id="c3af0-400">Use your own B2C tenant</span></span>
<span data-ttu-id="c3af0-401">Se si desidera tootry queste richieste per conto proprio, è necessario innanzitutto eseguire tre passaggi seguenti e quindi sostituire i valori di esempio hello descritti in precedenza con il proprio:</span><span class="sxs-lookup"><span data-stu-id="c3af0-401">If you want tootry these requests for yourself, you must first perform these three steps, and then replace hello example values described earlier with your own:</span></span>

1. <span data-ttu-id="c3af0-402">[Creare un tenant B2C](active-directory-b2c-get-started.md)e usare il nome di hello del tenant in hello richieste.</span><span class="sxs-lookup"><span data-stu-id="c3af0-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use hello name of your tenant in hello requests.</span></span>
2. <span data-ttu-id="c3af0-403">[Creare un'applicazione](active-directory-b2c-app-registration.md) tooobtain un ID applicazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-403">[Create an application](active-directory-b2c-app-registration.md) tooobtain an application ID.</span></span> <span data-ttu-id="c3af0-404">Includere un'API Web/app Web nell'app.</span><span class="sxs-lookup"><span data-stu-id="c3af0-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="c3af0-405">Se lo si desidera, creare un segreto dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c3af0-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="c3af0-406">[Creare i criteri](active-directory-b2c-reference-policies.md) tooobtain i nomi dei criteri.</span><span class="sxs-lookup"><span data-stu-id="c3af0-406">[Create your policies](active-directory-b2c-reference-policies.md) tooobtain your policy names.</span></span>

