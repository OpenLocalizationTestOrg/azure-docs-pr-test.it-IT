---
title: aaaUpgrade da servizi mobili tooAzure servizio App
description: Informazioni su come tooeasily l'aggiornamento del tooan di applicazione di servizi mobili App del servizio Mobile App
services: app-service\mobile
documentationcenter: 
author: ggailey777
manager: syntaxc4
editor: 
ms.assetid: 9c0ac353-afb6-462b-ab94-d91b8247322f
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile
ms.devlang: dotnet
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: 2b75a1b824e8ef0d36c9053f2f19af051479f928
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-your-existing-net-azure-mobile-service-tooapp-service"></a><span data-ttu-id="c34dc-103">Aggiornare il tooApp servizio Mobile di Azure .NET esistenti del servizio</span><span class="sxs-lookup"><span data-stu-id="c34dc-103">Upgrade your existing .NET Azure Mobile Service tooApp Service</span></span>
<span data-ttu-id="c34dc-104">Servizio App per dispositivi mobili sono un nuovo modo toobuild applicazioni per dispositivi mobili con Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="c34dc-104">App Service Mobile is a new way toobuild mobile applications using Microsoft Azure.</span></span> <span data-ttu-id="c34dc-105">vedere, più toolearn [quali sono App per dispositivi mobili?].</span><span class="sxs-lookup"><span data-stu-id="c34dc-105">toolearn more, see [What are Mobile Apps?].</span></span>

<span data-ttu-id="c34dc-106">Questo argomento viene descritto come un'applicazione back-end .NET esistente da servizi mobili di Azure tooa tooupgrade nuova App per dispositivi mobili del servizio App.</span><span class="sxs-lookup"><span data-stu-id="c34dc-106">This topic describes how tooupgrade an existing .NET backend application from Azure Mobile Services tooa new App Service Mobile Apps.</span></span> <span data-ttu-id="c34dc-107">Durante l'esecuzione di questo aggiornamento, l'applicazione di servizi mobili esistente possa continuare toooperate.</span><span class="sxs-lookup"><span data-stu-id="c34dc-107">While you perform this upgrade, your existing Mobile Services application can continue toooperate.</span></span>   <span data-ttu-id="c34dc-108">Se è necessario tooupgrade un'applicazione back-end di Node.js, vedere troppo[l'aggiornamento dei servizi mobili di Node.js](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span><span class="sxs-lookup"><span data-stu-id="c34dc-108">If you need tooupgrade a Node.js backend application, refer too[Upgrading your Node.js Mobile Services](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span></span>

<span data-ttu-id="c34dc-109">Quando un back-end mobile è aggiornato tooAzure servizio App, ha accesso tooall le funzionalità del servizio App e vengono fatturate in base troppo[servizio App prezzi], non sui prezzi di servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-109">When a mobile backend is upgraded tooAzure App Service, it has access tooall App Service features and are billed according too[App Service pricing], not Mobile Services pricing.</span></span>

## <a name="migrate-vs-upgrade"></a><span data-ttu-id="c34dc-110">Eseguire la migrazione o aggiornare</span><span class="sxs-lookup"><span data-stu-id="c34dc-110">Migrate vs. upgrade</span></span>
[!INCLUDE [app-service-mobile-migrate-vs-upgrade](../../includes/app-service-mobile-migrate-vs-upgrade.md)]

> [!TIP]
> <span data-ttu-id="c34dc-111">Prima di procedere a un aggiornamento, è consigliabile [eseguire una migrazione](app-service-mobile-migrating-from-mobile-services.md) .</span><span class="sxs-lookup"><span data-stu-id="c34dc-111">It is recommended that you [perform a migration](app-service-mobile-migrating-from-mobile-services.md) before going through an upgrade.</span></span> <span data-ttu-id="c34dc-112">In questo modo, è possibile inserire entrambe le versioni dell'applicazione hello piano di servizio App stesso e non comportare senza alcun costo aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="c34dc-112">This way, you can put both versions of your application on hello same App Service Plan and incur no additional cost.</span></span>
>
>

### <a name="improvements-in-mobile-apps-net-server-sdk"></a><span data-ttu-id="c34dc-113">Miglioramenti dell’SDK del server .NET di App per dispositivi mobili</span><span class="sxs-lookup"><span data-stu-id="c34dc-113">Improvements in Mobile Apps .NET server SDK</span></span>
<span data-ttu-id="c34dc-114">L'aggiornamento toohello nuova [Mobile App SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) fornisce hello seguenti vantaggi:</span><span class="sxs-lookup"><span data-stu-id="c34dc-114">Upgrading toohello new [Mobile Apps SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) provides hello following benefits:</span></span>

* <span data-ttu-id="c34dc-115">Maggiore flessibilità alle dipendenze di NuGet.</span><span class="sxs-lookup"><span data-stu-id="c34dc-115">More flexibility on NuGet dependencies.</span></span> <span data-ttu-id="c34dc-116">Hello ambiente di hosting non fornisce le versioni dei pacchetti NuGet, pertanto è possibile utilizzare le versioni compatibili alternative.</span><span class="sxs-lookup"><span data-stu-id="c34dc-116">hello hosting environment no longer provides its own versions of NuGet packages, so you can use alternative compatible versions.</span></span> <span data-ttu-id="c34dc-117">Tuttavia, se sono presenti nuovi bugfixes critici o toohello gli aggiornamenti di sicurezza Mobile Server SDK o le dipendenze, è necessario aggiornare il servizio manualmente.</span><span class="sxs-lookup"><span data-stu-id="c34dc-117">However, if there are new critical bugfixes or security updates toohello Mobile Server SDK or dependencies, you must update your service manually.</span></span>
* <span data-ttu-id="c34dc-118">Una maggiore flessibilità nella hello SDK per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-118">More flexibility in hello mobile SDK.</span></span> <span data-ttu-id="c34dc-119">È possibile controllare in modo esplicito le funzioni e le route vengono impostate, ad esempio l'autenticazione, tabella, API e hello push endpoint di registrazione.</span><span class="sxs-lookup"><span data-stu-id="c34dc-119">You can explicitly control which features and routes are set up, such as authentication, table APIs, and hello push registration endpoint.</span></span> <span data-ttu-id="c34dc-120">vedere, più toolearn [come toouse hello server .NET SDK per App mobili di Azure](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="c34dc-120">toolearn more, see [How toouse hello .NET server SDK for Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span></span>
* <span data-ttu-id="c34dc-121">Supporto per altri tipi di progetto ASP.NET e route.</span><span class="sxs-lookup"><span data-stu-id="c34dc-121">Support for other ASP.NET project types and routes.</span></span> <span data-ttu-id="c34dc-122">È ora possibile ospitare controller MVC e Web API hello stesso progetto come progetto di back-end per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-122">You can now host MVC and Web API controllers in hello same project as your mobile backend project.</span></span>
* <span data-ttu-id="c34dc-123">Supporto per le nuove funzionalità di autenticazione del servizio App, che consentono una configurazione di autenticazione comune toouse attraverso il web e App per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-123">Support for new App Service authentication features, which allow you toouse a common authentication configuration across your web and mobile apps.</span></span>

## <span data-ttu-id="c34dc-124"><a name="overview"></a>Panoramica sull'aggiornamento di base</span><span class="sxs-lookup"><span data-stu-id="c34dc-124"><a name="overview"></a>Basic upgrade overview</span></span>
<span data-ttu-id="c34dc-125">In molti casi, l'aggiornamento sarà semplice come cambio toohello nuova App per dispositivi mobili SDK server e la ripubblicazione, il codice in una nuova istanza di App per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-125">In many cases, upgrading will be as simple as switching toohello new Mobile Apps server SDK and republishing your code onto a new Mobile App instance.</span></span> <span data-ttu-id="c34dc-126">Esistono, tuttavia, alcuni scenari che richiedono alcune configurazioni aggiuntive, ad esempio l'autenticazione avanzata e l'uso dei processi pianificati.</span><span class="sxs-lookup"><span data-stu-id="c34dc-126">There are, however some scenarios which will require some additional configuration, such as advanced authentication scenarios and working with scheduled jobs.</span></span> <span data-ttu-id="c34dc-127">Ognuno di questi è illustrato in hello sezioni in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="c34dc-127">Each of these is covered in hello later sections.</span></span>

> [!TIP]
> <span data-ttu-id="c34dc-128">Si consiglia di leggere e comprendere completamente rest hello di questo argomento prima di avviare un aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="c34dc-128">It is advised that you read and understand hello rest of this topic completely before starting an upgrade.</span></span> <span data-ttu-id="c34dc-129">Prendere nota delle funzionalità usate che sono indicate di seguito.</span><span class="sxs-lookup"><span data-stu-id="c34dc-129">Make note of any features you use which are called out below.</span></span>
>
>

<span data-ttu-id="c34dc-130">il client di servizi mobili di Hello SDK sono **non** compatibile con il server di App per dispositivi mobili nuovi hello SDK.</span><span class="sxs-lookup"><span data-stu-id="c34dc-130">hello Mobile Services client SDKs are **not** compatible with hello new Mobile Apps server SDK.</span></span> <span data-ttu-id="c34dc-131">In ordine tooprovide la continuità del servizio per l'app, non è possibile pubblicare il sito di tooa modifiche attualmente rispondendo alle richieste client pubblicato.</span><span class="sxs-lookup"><span data-stu-id="c34dc-131">In order tooprovide continuity of service for your app, you should not publish changes tooa site currently serving published clients.</span></span> <span data-ttu-id="c34dc-132">È invece necessario creare una nuova app per dispositivi mobili che agisce da duplicato.</span><span class="sxs-lookup"><span data-stu-id="c34dc-132">Instead, you should create a new mobile app that serves as a duplicate.</span></span> <span data-ttu-id="c34dc-133">È possibile inserire l'applicazione hello stesso servizio App piano tooavoid incorrere in costi finanziari aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="c34dc-133">You can put this application on hello same App Service plan tooavoid incurring additional financial cost.</span></span>

<span data-ttu-id="c34dc-134">Sarà quindi possibile due versioni di un'applicazione hello: uno che rimane hello stesso e serve le app pubblicate in hello wild e hello altro che è quindi possibile eseguire l'aggiornamento e destinazione con una nuova versione di client.</span><span class="sxs-lookup"><span data-stu-id="c34dc-134">You will then have two versions of hello application: one which stays hello same and serves published apps in hello wild, and hello other which you can then upgrade and target with a new client release.</span></span> <span data-ttu-id="c34dc-135">È possibile spostare e testare il codice le esigenze, ma è necessario assicurarsi che tutte le correzioni di bug apportate ottenere tooboth applicato.</span><span class="sxs-lookup"><span data-stu-id="c34dc-135">You can move and test your code at your pace, but you should make sure that any bug fixes you make get applied tooboth.</span></span> <span data-ttu-id="c34dc-136">Quando si ritiene che un numero desiderato di App client in hello wild have aggiornato la versione più recente di toohello, è possibile eliminare l'applicazione migrata originale hello se lo si desidera.</span><span class="sxs-lookup"><span data-stu-id="c34dc-136">Once you feel that a desired number of client apps in hello wild have updated toohello latest version, you can delete hello original migrated app if you desire.</span></span>

<span data-ttu-id="c34dc-137">Hello completo per il processo di aggiornamento hello è come segue:</span><span class="sxs-lookup"><span data-stu-id="c34dc-137">hello full outline for hello upgrade process is as follows:</span></span>

1. <span data-ttu-id="c34dc-138">Creare una nuova app per dispositivi mobili</span><span class="sxs-lookup"><span data-stu-id="c34dc-138">Create a new Mobile App</span></span>
2. <span data-ttu-id="c34dc-139">Aggiornamento hello progetto toouse hello nuovi Server SDK</span><span class="sxs-lookup"><span data-stu-id="c34dc-139">Update hello project toouse hello new Server SDKs</span></span>
3. <span data-ttu-id="c34dc-140">Rilasciare una nuova versione dell'applicazione client</span><span class="sxs-lookup"><span data-stu-id="c34dc-140">Release a new version of your client application</span></span>
4. <span data-ttu-id="c34dc-141">(Facoltativo) Eliminare l'istanza migrata originale</span><span class="sxs-lookup"><span data-stu-id="c34dc-141">(Optional) Delete your original migrated instance</span></span>

## <span data-ttu-id="c34dc-142"><a name="mobile-app-version"></a>Creazione di una seconda istanza dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="c34dc-142"><a name="mobile-app-version"></a>Creating a second application instance</span></span>
<span data-ttu-id="c34dc-143">Hello innanzitutto l'aggiornamento è toocreate hello App Mobile risorsa che ospiterà una nuova versione di hello dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c34dc-143">hello first step in upgrading is toocreate hello Mobile App resource which will host hello new version of your application.</span></span> <span data-ttu-id="c34dc-144">Se si è già eseguita la migrazione di un servizio mobile esistente, è opportuno toocreate questa versione di hello stesso piano di hosting.</span><span class="sxs-lookup"><span data-stu-id="c34dc-144">If you have already migrated an existing mobile service, you will want toocreate this version on hello same hosting plan.</span></span> <span data-ttu-id="c34dc-145">Aprire hello [portale di Azure] e passare tooyour eseguita la migrazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c34dc-145">Open hello [Azure portal] and navigate tooyour migrated application.</span></span> <span data-ttu-id="c34dc-146">Prendere nota del piano di servizio App è in esecuzione su hello.</span><span class="sxs-lookup"><span data-stu-id="c34dc-146">Make note of hello App Service Plan it is running on.</span></span>

<span data-ttu-id="c34dc-147">Successivamente, creare seconda istanza di applicazione hello hello seguente [istruzioni di creazione di back-end .NET](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span><span class="sxs-lookup"><span data-stu-id="c34dc-147">Next, create hello second application instance by following hello [.NET backend creation instructions](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span></span> <span data-ttu-id="c34dc-148">Quando richiesto tooselect piano di servizio App "piano di hosting" sceglie hello piano dell'applicazione migrata.</span><span class="sxs-lookup"><span data-stu-id="c34dc-148">When prompted tooselect you App Service Plan or "hosting plan" choose hello plan of your migrated application.</span></span>

<span data-ttu-id="c34dc-149">Probabilmente si desidererà toouse hello stesso database e Hub di notifica come è stato in servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-149">You will likely want toouse hello same database and Notification Hub as you did in Mobile Services.</span></span> <span data-ttu-id="c34dc-150">È possibile copiare questi valori aprendo [portale di Azure] navigazione toohello di applicazione originale, quindi fare clic su **impostazioni** > **le impostazioni dell'applicazione**.</span><span class="sxs-lookup"><span data-stu-id="c34dc-150">You can copy these values by opening [Azure portal] and navigating toohello original application, then click **Settings** > **Application settings**.</span></span> <span data-ttu-id="c34dc-151">In **Stringhe di connessione** copiare `MS_NotificationHubConnectionString` e `MS_TableConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="c34dc-151">Under **Connection Strings**, copy `MS_NotificationHubConnectionString` and `MS_TableConnectionString`.</span></span> <span data-ttu-id="c34dc-152">Passare tooyour nuovo aggiornamento del sito e li incolliamo in, sovrascrivendo i valori esistenti.</span><span class="sxs-lookup"><span data-stu-id="c34dc-152">Navigate tooyour new upgrade site and paste them in, overwriting any existing values.</span></span> <span data-ttu-id="c34dc-153">Ripetere questo processo per tutte le altre impostazioni dell'applicazione necessarie per l'app.</span><span class="sxs-lookup"><span data-stu-id="c34dc-153">Repeat this process for any other application settings your app needs.</span></span> <span data-ttu-id="c34dc-154">Se non si utilizza un servizio migrato, è possibile leggere le stringhe di connessione e le impostazioni dell'app da hello **configura** scheda della sezione Servizi mobili di hello hello [portale di Azure classico].</span><span class="sxs-lookup"><span data-stu-id="c34dc-154">If not using a migrated service, you can read connection strings and app settings from hello **Configure** tab of hello Mobile Services section of hello [Azure classic portal].</span></span>

<span data-ttu-id="c34dc-155">Creare una copia del progetto ASP.NET hello per l'applicazione e pubblicarlo tooyour nuovo sito.</span><span class="sxs-lookup"><span data-stu-id="c34dc-155">Make a copy of hello ASP.NET project for your application and publish it tooyour new site.</span></span> <span data-ttu-id="c34dc-156">Utilizzando una copia dell'applicazione client aggiornata con nuovo URL hello, verificare che tutto funzioni come previsto.</span><span class="sxs-lookup"><span data-stu-id="c34dc-156">Using a copy of your client application updated with hello new URL, validate that everything works as expected.</span></span>

## <a name="updating-hello-server-project"></a><span data-ttu-id="c34dc-157">Aggiornamento di project server hello</span><span class="sxs-lookup"><span data-stu-id="c34dc-157">Updating hello server project</span></span>
<span data-ttu-id="c34dc-158">Fornisce una nuova App per dispositivi mobili [Mobile App Server SDK] che fornisce gran parte di hello stessa funzionalità di runtime di servizi mobili hello.</span><span class="sxs-lookup"><span data-stu-id="c34dc-158">Mobile Apps provides a new [Mobile App Server SDK] which provides much of hello same functionality as hello Mobile Services runtime.</span></span> <span data-ttu-id="c34dc-159">In primo luogo, è necessario rimuovere tutti i pacchetti di servizi mobili toohello riferimenti.</span><span class="sxs-lookup"><span data-stu-id="c34dc-159">First, you should remove all references toohello Mobile Services packages.</span></span> <span data-ttu-id="c34dc-160">In Gestione pacchetti NuGet di hello, cercare `WindowsAzure.MobileServices.Backend`.</span><span class="sxs-lookup"><span data-stu-id="c34dc-160">In hello NuGet package manager, search for `WindowsAzure.MobileServices.Backend`.</span></span> <span data-ttu-id="c34dc-161">Per la maggior parte delle app saranno presenti diversi pacchetti, tra cui `WindowsAzure.MobileServices.Backend.Tables` e `WindowsAzure.MobileServices.Backend.Entity`.</span><span class="sxs-lookup"><span data-stu-id="c34dc-161">Most apps will see several packages here, including `WindowsAzure.MobileServices.Backend.Tables` and `WindowsAzure.MobileServices.Backend.Entity`.</span></span> <span data-ttu-id="c34dc-162">In tal caso, iniziare con il pacchetto più basso di hello nell'albero delle dipendenze di hello, ad esempio `Entity`e rimuoverlo.</span><span class="sxs-lookup"><span data-stu-id="c34dc-162">In such a case, start with hello lowest package in hello dependency tree, such as `Entity`, and remove it.</span></span> <span data-ttu-id="c34dc-163">Quando richiesto, non rimuovere tutti i pacchetti dipendenti.</span><span class="sxs-lookup"><span data-stu-id="c34dc-163">When prompted, do not remove all dependant packages.</span></span> <span data-ttu-id="c34dc-164">Ripetere questo processo finché non è stato rimosso `WindowsAzure.MobileServices.Backend` stesso.</span><span class="sxs-lookup"><span data-stu-id="c34dc-164">Repeat this process until you have removed `WindowsAzure.MobileServices.Backend` itself.</span></span>

<span data-ttu-id="c34dc-165">A questo punto si avrà un progetto che non fa più riferimento agli SDK di Servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-165">At this point you will have a project that no longer references Mobile Services SDKs.</span></span>

<span data-ttu-id="c34dc-166">Si aggiungeranno quindi riferimenti hello Mobile App SDK.</span><span class="sxs-lookup"><span data-stu-id="c34dc-166">Next you will add references hello Mobile Apps SDK.</span></span> <span data-ttu-id="c34dc-167">Per questo aggiornamento, la maggior parte degli sviluppatori verranno toodownload e installare hello `Microsoft.Azure.Mobile.Server.Quickstart` del pacchetto, come si effettuerà il pull nel set necessarie intera hello.</span><span class="sxs-lookup"><span data-stu-id="c34dc-167">For this upgrade, most developers will want toodownload and install hello `Microsoft.Azure.Mobile.Server.Quickstart` package, as this will pull in hello entire required set.</span></span>

<span data-ttu-id="c34dc-168">Saranno presenti alcuni errori del compilatore derivanti dalle differenze esistenti tra hello SDK, ma questi sono tooaddress semplice e vengono trattati nel resto di hello di questa sezione.</span><span class="sxs-lookup"><span data-stu-id="c34dc-168">There will be quite a few compiler errors resulting from differences between hello SDKs, but these are easy tooaddress and are covered in hello rest of this section.</span></span>

### <a name="base-configuration"></a><span data-ttu-id="c34dc-169">Configurazione di base</span><span class="sxs-lookup"><span data-stu-id="c34dc-169">Base configuration</span></span>
<span data-ttu-id="c34dc-170">In WebApiConfig.cs è quindi possibile sostituire:</span><span class="sxs-lookup"><span data-stu-id="c34dc-170">Then, in WebApiConfig.cs, you can replace:</span></span>

        // Use this class tooset configuration options for your mobile service
        ConfigOptions options = new ConfigOptions();

        // Use this class tooset WebAPI configuration options
        HttpConfiguration config = ServiceConfig.Initialize(new ConfigBuilder(options));

<span data-ttu-id="c34dc-171">con</span><span class="sxs-lookup"><span data-stu-id="c34dc-171">with</span></span>

        HttpConfiguration config = new HttpConfiguration();
        new MobileAppConfiguration()
            .UseDefaultConfiguration()
        .ApplyTo(config);

> [!NOTE]
> <span data-ttu-id="c34dc-172">Se si desidera toolearn ulteriori informazioni su hello nuovo .NET SDK e come tooadd/Rimuovi funzionalità server dall'app, vedere hello [come toouse hello server .NET SDK] argomento.</span><span class="sxs-lookup"><span data-stu-id="c34dc-172">If you wish toolearn more about hello new .NET server SDK and how tooadd/remove features from your app, please see hello [How toouse hello .NET server SDK] topic.</span></span>
>
>

<span data-ttu-id="c34dc-173">Se l'app Usa le funzionalità di autenticazione hello, sarà anche necessario tooregister un middleware OWIN.</span><span class="sxs-lookup"><span data-stu-id="c34dc-173">If your app makes use of hello authentication features, you will also need tooregister an OWIN middleware.</span></span> <span data-ttu-id="c34dc-174">In questo caso, è necessario spostare hello sopra il codice di configurazione in una nuova classe di avvio di OWIN.</span><span class="sxs-lookup"><span data-stu-id="c34dc-174">In this case, you should move hello above configuration code into a new OWIN Startup class.</span></span>

1. <span data-ttu-id="c34dc-175">Aggiungere il pacchetto NuGet hello `Microsoft.Owin.Host.SystemWeb` se non è già incluso nel progetto.</span><span class="sxs-lookup"><span data-stu-id="c34dc-175">Add hello NuGet package `Microsoft.Owin.Host.SystemWeb` if it is not already included in your project.</span></span>
2. <span data-ttu-id="c34dc-176">In Visual Studio fare clic con il pulsante destro del mouse sul progetto e scegliere **Aggiungi** -> **Nuovo elemento**.</span><span class="sxs-lookup"><span data-stu-id="c34dc-176">In Visual Studio, right click on your project and select **Add** -> **New Item**.</span></span> <span data-ttu-id="c34dc-177">Selezionare **Web** -> **Generale** -> **Classe di avvio di OWIN**.</span><span class="sxs-lookup"><span data-stu-id="c34dc-177">Select **Web** -> **General** -> **OWIN Startup class**.</span></span>
3. <span data-ttu-id="c34dc-178">Spostare hello di sopra di codice per MobileAppConfiguration da `WebApiConfig.Register()` toohello `Configuration()` metodo per la nuova classe di avvio.</span><span class="sxs-lookup"><span data-stu-id="c34dc-178">Move hello above code for MobileAppConfiguration from `WebApiConfig.Register()` toohello `Configuration()` method of your new startup class.</span></span>

<span data-ttu-id="c34dc-179">Verificare che hello `Configuration()` metodo termina con:</span><span class="sxs-lookup"><span data-stu-id="c34dc-179">Make sure hello `Configuration()` method ends with:</span></span>

        app.UseWebApi(config)
        app.UseAppServiceAuthentication(config);

<span data-ttu-id="c34dc-180">Esistono tooauthentication correlati di altre modifiche che sono descritte nella sezione autenticazione completa hello riportato di seguito.</span><span class="sxs-lookup"><span data-stu-id="c34dc-180">There are additional changes related tooauthentication which are covered in hello full authentication section below.</span></span>

### <a name="working-with-data"></a><span data-ttu-id="c34dc-181">Uso dei dati</span><span class="sxs-lookup"><span data-stu-id="c34dc-181">Working with Data</span></span>
<span data-ttu-id="c34dc-182">Nei servizi mobili, il nome di app per dispositivi mobili hello utilizzato come nome dello schema predefinito di hello nel programma di installazione di hello Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="c34dc-182">In Mobile Services, hello mobile app name served as hello default schema name in hello Entity Framework setup.</span></span>

<span data-ttu-id="c34dc-183">tooensure che è necessario hello stesso schema a cui fa riferimento come prima, hello utilizzare schema hello tooset hello DbContext per l'applicazione seguente:</span><span class="sxs-lookup"><span data-stu-id="c34dc-183">tooensure that you have hello same schema being referenced as before, use hello following tooset hello schema in hello DbContext for your application:</span></span>

        string schema = System.Configuration.ConfigurationManager.AppSettings.Get("MS_MobileServiceName");

<span data-ttu-id="c34dc-184">Verificare di che aver MS_MobileServiceName impostare se hello sopra.</span><span class="sxs-lookup"><span data-stu-id="c34dc-184">Please make sure you have MS_MobileServiceName set if you do hello above.</span></span> <span data-ttu-id="c34dc-185">È anche possibile fornire un altro nome di schema se l'applicazione lo ha personalizzato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="c34dc-185">You can also provide another schema name if your application customized this previously.</span></span>

### <a name="system-properties"></a><span data-ttu-id="c34dc-186">Proprietà di sistema</span><span class="sxs-lookup"><span data-stu-id="c34dc-186">System Properties</span></span>
#### <a name="naming"></a><span data-ttu-id="c34dc-187">Denominazione</span><span class="sxs-lookup"><span data-stu-id="c34dc-187">Naming</span></span>
<span data-ttu-id="c34dc-188">Nel server di servizi mobili di Azure hello SDK, le proprietà di sistema contengono sempre un doppio carattere di sottolineatura (`__`) prefisso per le proprietà di hello:</span><span class="sxs-lookup"><span data-stu-id="c34dc-188">In hello Azure Mobile Services server SDK, system properties always contain a double underscore (`__`) prefix for hello properties:</span></span>

* <span data-ttu-id="c34dc-189">__createdAt</span><span class="sxs-lookup"><span data-stu-id="c34dc-189">__createdAt</span></span>
* <span data-ttu-id="c34dc-190">__updatedAt</span><span class="sxs-lookup"><span data-stu-id="c34dc-190">__updatedAt</span></span>
* <span data-ttu-id="c34dc-191">__deleted</span><span class="sxs-lookup"><span data-stu-id="c34dc-191">__deleted</span></span>
* <span data-ttu-id="c34dc-192">__version</span><span class="sxs-lookup"><span data-stu-id="c34dc-192">__version</span></span>

<span data-ttu-id="c34dc-193">il client di servizi mobili Hello SDK hanno una logica speciale per l'analisi delle proprietà del sistema in questo formato.</span><span class="sxs-lookup"><span data-stu-id="c34dc-193">hello Mobile Services client SDKs have special logic for parsing system properties in this format.</span></span>

<span data-ttu-id="c34dc-194">In App mobili di Azure, le proprietà di sistema non sono una speciale formattare e avere hello i nomi seguenti:</span><span class="sxs-lookup"><span data-stu-id="c34dc-194">In Azure Mobile Apps, system properties no longer have a special format and have hello following names:</span></span>

* <span data-ttu-id="c34dc-195">createdAt</span><span class="sxs-lookup"><span data-stu-id="c34dc-195">createdAt</span></span>
* <span data-ttu-id="c34dc-196">updatedAt</span><span class="sxs-lookup"><span data-stu-id="c34dc-196">updatedAt</span></span>
* <span data-ttu-id="c34dc-197">deleted</span><span class="sxs-lookup"><span data-stu-id="c34dc-197">deleted</span></span>
* <span data-ttu-id="c34dc-198">version</span><span class="sxs-lookup"><span data-stu-id="c34dc-198">version</span></span>

<span data-ttu-id="c34dc-199">Hello App per dispositivi mobili client SDK utilizzare hello nuovo sistema proprietà, in modo da modifiche non sono necessari nomi tooclient codice.</span><span class="sxs-lookup"><span data-stu-id="c34dc-199">hello Mobile Apps client SDKs use hello new system properties names, so no changes are required tooclient code.</span></span> <span data-ttu-id="c34dc-200">Tuttavia, se si è direttamente effettua REST chiama servizio tooyour quindi è necessario modificare di conseguenza le query.</span><span class="sxs-lookup"><span data-stu-id="c34dc-200">However, if you are directly making REST calls tooyour service then you should change your queries accordingly.</span></span>

#### <a name="local-store"></a><span data-ttu-id="c34dc-201">Archivio locale</span><span class="sxs-lookup"><span data-stu-id="c34dc-201">Local store</span></span>
<span data-ttu-id="c34dc-202">Hello modifiche toohello nomi di proprietà di sistema indicano che un database locale di sincronizzazione non in linea per i servizi mobili non è compatibile con App per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-202">hello changes toohello names of system properties mean that an offline sync local database for Mobile Services is not compatible with Mobile Apps.</span></span> <span data-ttu-id="c34dc-203">Se possibile, è consigliabile evitare l'aggiornamento di applicazioni client da servizi mobili tooMobile che App fino a dopo le modifiche in sospeso sono state inviate toohello server.</span><span class="sxs-lookup"><span data-stu-id="c34dc-203">If possible, you should avoid upgrading client apps from Mobile Services tooMobile Apps until after pending changes have been sent toohello server.</span></span> <span data-ttu-id="c34dc-204">Quindi, hello aggiornato app deve utilizzare un nuovo nome di database.</span><span class="sxs-lookup"><span data-stu-id="c34dc-204">Then, hello upgraded app should use a new database filename.</span></span>

<span data-ttu-id="c34dc-205">Se un'applicazione client viene aggiornata da servizi mobili tooMobile App mentre sono presenti modifiche non in linea in sospeso nella coda di operazione hello, database di sistema hello deve essere aggiornato toouse hello nomi di colonna nuova.</span><span class="sxs-lookup"><span data-stu-id="c34dc-205">If a client app is upgraded from Mobile Services tooMobile Apps while there are pending offline changes in hello operation queue, then hello system database must be updated toouse hello new column names.</span></span> <span data-ttu-id="c34dc-206">In iOS, è possibile usare nomi di colonna hello toochange migrazioni lightweight.</span><span class="sxs-lookup"><span data-stu-id="c34dc-206">On iOS, this can be achieved using lightweight migrations toochange hello column names.</span></span> <span data-ttu-id="c34dc-207">In Android e hello gestito client .NET, è consigliabile scrivere toorename SQL personalizzata colonne hello per le tabelle di dati oggetto.</span><span class="sxs-lookup"><span data-stu-id="c34dc-207">On Android and hello .NET managed client, you should write custom SQL toorename hello columns for your data object tables.</span></span>

<span data-ttu-id="c34dc-208">In iOS, è necessario modificare lo schema dei dati di base per i dati entità toomatch hello successivi.</span><span class="sxs-lookup"><span data-stu-id="c34dc-208">On iOS, you should change your Core Data schema for your data entities toomatch hello following.</span></span> <span data-ttu-id="c34dc-209">Si noti che le proprietà di hello `createdAt`, `updatedAt` e `version` non hanno più un `ms_` prefisso:</span><span class="sxs-lookup"><span data-stu-id="c34dc-209">Note that hello properties `createdAt`, `updatedAt` and `version` no longer have an `ms_` prefix:</span></span>

| <span data-ttu-id="c34dc-210">Attributo</span><span class="sxs-lookup"><span data-stu-id="c34dc-210">Attribute</span></span> | <span data-ttu-id="c34dc-211">Tipo</span><span class="sxs-lookup"><span data-stu-id="c34dc-211">Type</span></span> | <span data-ttu-id="c34dc-212">Nota</span><span class="sxs-lookup"><span data-stu-id="c34dc-212">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c34dc-213">id</span><span class="sxs-lookup"><span data-stu-id="c34dc-213">id</span></span> |<span data-ttu-id="c34dc-214">Stringa, contrassegnata come obbligatoria</span><span class="sxs-lookup"><span data-stu-id="c34dc-214">String, marked required</span></span> |<span data-ttu-id="c34dc-215">chiave primaria nell'archivio remoto</span><span class="sxs-lookup"><span data-stu-id="c34dc-215">primary key in remote store</span></span> |
| <span data-ttu-id="c34dc-216">createdAt</span><span class="sxs-lookup"><span data-stu-id="c34dc-216">createdAt</span></span> |<span data-ttu-id="c34dc-217">Date</span><span class="sxs-lookup"><span data-stu-id="c34dc-217">Date</span></span> |<span data-ttu-id="c34dc-218">proprietà di sistema toocreatedAt mappe (facoltativo)</span><span class="sxs-lookup"><span data-stu-id="c34dc-218">(optional) maps toocreatedAt system property</span></span> |
| <span data-ttu-id="c34dc-219">updatedAt</span><span class="sxs-lookup"><span data-stu-id="c34dc-219">updatedAt</span></span> |<span data-ttu-id="c34dc-220">Date</span><span class="sxs-lookup"><span data-stu-id="c34dc-220">Date</span></span> |<span data-ttu-id="c34dc-221">proprietà di sistema tooupdatedAt mappe (facoltativo)</span><span class="sxs-lookup"><span data-stu-id="c34dc-221">(optional) maps tooupdatedAt system property</span></span> |
| <span data-ttu-id="c34dc-222">version</span><span class="sxs-lookup"><span data-stu-id="c34dc-222">version</span></span> |<span data-ttu-id="c34dc-223">String</span><span class="sxs-lookup"><span data-stu-id="c34dc-223">String</span></span> |<span data-ttu-id="c34dc-224">è in conflitto toodetect utilizzato (facoltativo), mappe tooversion</span><span class="sxs-lookup"><span data-stu-id="c34dc-224">(optional) used toodetect conflicts, maps tooversion</span></span> |

#### <a name="querying-system-properties"></a><span data-ttu-id="c34dc-225">Query delle proprietà di sistema</span><span class="sxs-lookup"><span data-stu-id="c34dc-225">Querying system properties</span></span>
<span data-ttu-id="c34dc-226">Servizi mobili di Azure, le proprietà di sistema non vengono inviate per impostazione predefinita, ma solo quando vengono richiesti utilizzando la stringa di query hello `__systemProperties`.</span><span class="sxs-lookup"><span data-stu-id="c34dc-226">In Azure Mobile Services, system properties are not sent by default, but only when they are requested using hello query string `__systemProperties`.</span></span> <span data-ttu-id="c34dc-227">Al contrario, nel sistema di App mobili di Azure sono proprietà **sempre selezionato** poiché sono parte del modello a oggetti hello server SDK.</span><span class="sxs-lookup"><span data-stu-id="c34dc-227">In contrast, in Azure Mobile Apps system properties are **always selected** since they are part of hello server SDK object model.</span></span>

<span data-ttu-id="c34dc-228">Questa modifica influisce principalmente sulle implementazioni personalizzate di gestori di dominio, come le estensioni di `MappedEntityDomainManager`.</span><span class="sxs-lookup"><span data-stu-id="c34dc-228">This change mainly impacts custom implementations of domain managers, such as extensions of `MappedEntityDomainManager`.</span></span> <span data-ttu-id="c34dc-229">In servizi mobili, se un client non richiede mai le proprietà del sistema, è possibile toouse un `MappedEntityDomainManager` che non effettivamente eseguire il mapping di tutte le proprietà.</span><span class="sxs-lookup"><span data-stu-id="c34dc-229">In Mobile Services, if a client never requests any system properties, it is possible toouse a `MappedEntityDomainManager` that does not actually map all properties.</span></span> <span data-ttu-id="c34dc-230">Tuttavia, in App per dispositivi mobili di Azure, queste proprietà non mappate genereranno un errore nelle query GET.</span><span class="sxs-lookup"><span data-stu-id="c34dc-230">However, in Azure Mobile Apps, these unmapped properties will cause an error in GET queries.</span></span>

<span data-ttu-id="c34dc-231">problema di hello tooresolve modo più semplice di Hello è toomodify il DTO in modo che ereditano da `ITableData` anziché `EntityData`.</span><span class="sxs-lookup"><span data-stu-id="c34dc-231">hello easiest way tooresolve hello issue is toomodify your DTOs so that they inherit from `ITableData` instead of `EntityData`.</span></span> <span data-ttu-id="c34dc-232">Aggiungere quindi hello `[NotMapped]` attributo campi toohello che devono essere omessa.</span><span class="sxs-lookup"><span data-stu-id="c34dc-232">Then, add hello `[NotMapped]` attribute toohello fields that should be omitted.</span></span>

<span data-ttu-id="c34dc-233">Ad esempio, il seguente hello definisce `TodoItem` senza proprietà di sistema:</span><span class="sxs-lookup"><span data-stu-id="c34dc-233">For example, hello following defines `TodoItem` with no system properties:</span></span>

    using System.ComponentModel.DataAnnotations.Schema;

    public class TodoItem : ITableData
    {
        public string Text { get; set; }

        public bool Complete { get; set; }

        public string Id { get; set; }

        [NotMapped]
        public DateTimeOffset? CreatedAt { get; set; }

        [NotMapped]
        public DateTimeOffset? UpdatedAt { get; set; }

        [NotMapped]
        public bool Deleted { get; set; }

        [NotMapped]
        public byte[] Version { get; set; }
    }

<span data-ttu-id="c34dc-234">Nota: se si verifica un errore `NotMapped`, aggiungere un assembly di riferimento toohello `System.ComponentModel.DataAnnotations`.</span><span class="sxs-lookup"><span data-stu-id="c34dc-234">Note: if you get errors on `NotMapped`, add a reference toohello assembly `System.ComponentModel.DataAnnotations`.</span></span>

### <a name="cors"></a><span data-ttu-id="c34dc-235">CORS</span><span class="sxs-lookup"><span data-stu-id="c34dc-235">CORS</span></span>
<span data-ttu-id="c34dc-236">Servizi mobili è incluso il supporto per CORS eseguendo il wrapping di hello soluzione ASP.NET CORS.</span><span class="sxs-lookup"><span data-stu-id="c34dc-236">Mobile Services included some support for CORS by wrapping hello ASP.NET CORS solution.</span></span> <span data-ttu-id="c34dc-237">Questo livello di ritorno a capo è stato rimosso toogive per sviluppatori di hello maggiore controllo, è possibile utilizzare direttamente [supporto ASP.NET CORS](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span><span class="sxs-lookup"><span data-stu-id="c34dc-237">This wrapping layer has been removed toogive hello developer more control, so you can directly leverage [ASP.NET CORS support](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span></span>

<span data-ttu-id="c34dc-238">le aree principali problematiche se tramite condivisione CORS Hello sono tale hello `eTag` e `Location` intestazioni devono essere consentite affinché hello client SDK toowork correttamente.</span><span class="sxs-lookup"><span data-stu-id="c34dc-238">hello main areas of concern if using CORS are that hello `eTag` and `Location` headers must be allowed in order for hello client SDKs toowork properly.</span></span>

### <a name="push-notifications"></a><span data-ttu-id="c34dc-239">Notifiche push</span><span class="sxs-lookup"><span data-stu-id="c34dc-239">Push Notifications</span></span>
<span data-ttu-id="c34dc-240">Affinché il push, hello principale che potrebbero risultare mancanti dal Server SDK hello è classe PushRegistrationHandler hello.</span><span class="sxs-lookup"><span data-stu-id="c34dc-240">For push, hello main item that you may find missing from hello Server SDK is hello PushRegistrationHandler class.</span></span> <span data-ttu-id="c34dc-241">Le registrazioni vengono gestite in modo leggermente diverso nelle app per dispositivi mobili e le registrazioni prive di tag sono abilitate per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="c34dc-241">Registrations are handled slightly differently in Mobile Apps, and tagless registrations are enabled by default.</span></span> <span data-ttu-id="c34dc-242">La gestione dei tag può essere eseguita usando API personalizzate.</span><span class="sxs-lookup"><span data-stu-id="c34dc-242">Managing tags may be accomplished by using custom APIs.</span></span> <span data-ttu-id="c34dc-243">Vedere hello [la registrazione per i tag](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) le istruzioni per ulteriori informazioni.</span><span class="sxs-lookup"><span data-stu-id="c34dc-243">Please see hello [registering for tags](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instructions for more information.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="c34dc-244">Processi pianificati</span><span class="sxs-lookup"><span data-stu-id="c34dc-244">Scheduled Jobs</span></span>
<span data-ttu-id="c34dc-245">I processi pianificati non vengono compilati in App per dispositivi mobili, pertanto tutti i processi esistenti presenti nel back-end .NET necessario toobe aggiornato singolarmente.</span><span class="sxs-lookup"><span data-stu-id="c34dc-245">Scheduled jobs are not built into Mobile Apps, so any existing jobs that you have in your .NET backend will need toobe upgraded individually.</span></span> <span data-ttu-id="c34dc-246">Un'opzione è pianificato toocreate [processo Web] nel sito di codice hello App per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-246">One option is toocreate a scheduled [Web Job] on hello Mobile App code site.</span></span> <span data-ttu-id="c34dc-247">È anche possibile configurare un controller che contiene il codice di processo e configurare hello [dell'utilità di pianificazione di Azure] toohit quell'endpoint su pianificazione hello previsto.</span><span class="sxs-lookup"><span data-stu-id="c34dc-247">You could also set up a controller that holds your job code and configure hello [Azure Scheduler] toohit that endpoint on hello expected schedule.</span></span>

### <a name="miscellaneous-changes"></a><span data-ttu-id="c34dc-248">Modifiche varie</span><span class="sxs-lookup"><span data-stu-id="c34dc-248">Miscellaneous changes</span></span>
<span data-ttu-id="c34dc-249">Tutti i ApiControllers che verranno utilizzati da un client mobile devono disporre di hello `[MobileAppController]` attributo.</span><span class="sxs-lookup"><span data-stu-id="c34dc-249">All ApiControllers which will be consumed by a mobile client must now have hello `[MobileAppController]` attribute.</span></span> <span data-ttu-id="c34dc-250">Non è più incluso per impostazione predefinita, in modo che altri toogo ApiControllers influenzato hello formattatori per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="c34dc-250">This is no longer included by default so that other ApiControllers toogo unaffected by hello mobile formatters.</span></span>

<span data-ttu-id="c34dc-251">Hello `ApiServices` oggetto non fa parte di hello SDK.</span><span class="sxs-lookup"><span data-stu-id="c34dc-251">hello `ApiServices` object is no longer part of hello SDK.</span></span> <span data-ttu-id="c34dc-252">tooaccess le impostazioni dell'App Mobile, è possibile utilizzare l'esempio hello:</span><span class="sxs-lookup"><span data-stu-id="c34dc-252">tooaccess Mobile App settings, you can use hello following:</span></span>

    MobileAppSettingsDictionary settings = this.Configuration.GetMobileAppSettingsProvider().GetMobileAppSettings();

<span data-ttu-id="c34dc-253">Analogamente, la registrazione viene ora eseguita mediante scrittura di traccia ASP.NET standard hello:</span><span class="sxs-lookup"><span data-stu-id="c34dc-253">Similarly, logging is now accomplished using hello standard ASP.NET trace writing:</span></span>

    ITraceWriter traceWriter = this.Configuration.Services.GetTraceWriter();
    traceWriter.Info("Hello, World");  

## <span data-ttu-id="c34dc-254"><a name="authentication"></a>Considerazioni sull'autenticazione</span><span class="sxs-lookup"><span data-stu-id="c34dc-254"><a name="authentication"></a>Authentication considerations</span></span>
<span data-ttu-id="c34dc-255">componenti di autenticazione Hello dei servizi mobili sono stati spostati nella funzionalità di autenticazione/autorizzazione del servizio App hello.</span><span class="sxs-lookup"><span data-stu-id="c34dc-255">hello authentication components of Mobile Services have now been moved into hello App Service Authentication/Authorization feature.</span></span> <span data-ttu-id="c34dc-256">È possibile acquisire informazioni se si abilita questa per il sito per la lettura hello [Aggiungi app per dispositivi mobili tooyour autenticazione](app-service-mobile-ios-get-started-users.md) argomento.</span><span class="sxs-lookup"><span data-stu-id="c34dc-256">You can learn about enabling this for your site by reading hello [Add authentication tooyour mobile app](app-service-mobile-ios-get-started-users.md) topic.</span></span>

<span data-ttu-id="c34dc-257">Per alcuni provider, ad esempio, Google, Facebook e AAD dovrebbe essere in grado di tooleverage registrazione hello dall'applicazione di copia.</span><span class="sxs-lookup"><span data-stu-id="c34dc-257">For some providers, such as AAD, Facebook, and Google, you should be able tooleverage hello existing registration from your copy application.</span></span> <span data-ttu-id="c34dc-258">Semplicemente necessario portale toonavigate toohello del provider e aggiungere una nuova registrazione toohello URL di reindirizzamento.</span><span class="sxs-lookup"><span data-stu-id="c34dc-258">You simply need toonavigate toohello identity provider's portal and add a new redirect URL toohello registration.</span></span> <span data-ttu-id="c34dc-259">Quindi configurare l'autenticazione/autorizzazione del servizio App con hello client ID e il segreto.</span><span class="sxs-lookup"><span data-stu-id="c34dc-259">Then configure App Service Authentication/Authorization with hello client ID and secret.</span></span>

### <a name="controller-action-authorization"></a><span data-ttu-id="c34dc-260">Autorizzazione dell'azione del controller</span><span class="sxs-lookup"><span data-stu-id="c34dc-260">Controller action authorization</span></span>
<span data-ttu-id="c34dc-261">Tutte le istanze di hello `[AuthorizeLevel(AuthorizationLevel.User)]` attributo deve essere modificate toouse hello ASP.NET standard `[Authorize]` attributo.</span><span class="sxs-lookup"><span data-stu-id="c34dc-261">Any instances of hello `[AuthorizeLevel(AuthorizationLevel.User)]` attribute must now be changed toouse hello standard ASP.NET `[Authorize]` attribute.</span></span> <span data-ttu-id="c34dc-262">Inoltre, i controller ora sono anonimi per impostazione predefinita, come nelle altre applicazioni ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="c34dc-262">Additionally, controllers are now Anonymous by default, as in other ASP.NET applications.</span></span>
<span data-ttu-id="c34dc-263">Se si utilizza uno di hello altre opzioni di AuthorizeLevel, ad esempio Admin o un'applicazione, tenere presente che questi sono stati eliminati.</span><span class="sxs-lookup"><span data-stu-id="c34dc-263">If you were using one of hello other AuthorizeLevel options, such as Admin or Application, please note that these are gone.</span></span> <span data-ttu-id="c34dc-264">È invece possibile impostare AuthorizationFilters per i segreti condivisi o configurare in modo sicuro un chiamate service to service tooenable dell'entità servizio AAD.</span><span class="sxs-lookup"><span data-stu-id="c34dc-264">You can instead set up AuthorizationFilters for shared secrets or configure an AAD Service Principal tooenable service-to-service calls securely.</span></span>

### <a name="getting-additional-user-information"></a><span data-ttu-id="c34dc-265">Recupero di informazioni aggiuntive sull'utente</span><span class="sxs-lookup"><span data-stu-id="c34dc-265">Getting additional user information</span></span>
<span data-ttu-id="c34dc-266">È possibile ottenere informazioni utente aggiuntive, tra cui i token di accesso tramite hello `GetAppServiceIdentityAsync()` metodo:</span><span class="sxs-lookup"><span data-stu-id="c34dc-266">You can get additional user information, including access tokens through hello `GetAppServiceIdentityAsync()` method:</span></span>

        FacebookCredentials creds = await this.User.GetAppServiceIdentityAsync<FacebookCredentials>();

<span data-ttu-id="c34dc-267">Inoltre, se l'applicazione accetta le dipendenze su ID utente, ad esempio conservarli in un database, è importante toonote che hello tra servizi mobili e App per dispositivi mobili del servizio App ID utente sono diversi.</span><span class="sxs-lookup"><span data-stu-id="c34dc-267">Additionally, if your application takes dependencies on user IDs, such as storing them in a database, it is important toonote that hello user IDs between Mobile Services and App Service Mobile Apps are different.</span></span> <span data-ttu-id="c34dc-268">È comunque possibile ottenere hello ID utente di servizi mobili, tuttavia.</span><span class="sxs-lookup"><span data-stu-id="c34dc-268">You can still get hello Mobile Services User ID, though.</span></span> <span data-ttu-id="c34dc-269">Le sottoclassi ProviderCredentials hello dispone di una proprietà ID utente.</span><span class="sxs-lookup"><span data-stu-id="c34dc-269">All of hello ProviderCredentials subclasses have a UserId property.</span></span> <span data-ttu-id="c34dc-270">Pertanto, proseguendo dallo esempio hello prima:</span><span class="sxs-lookup"><span data-stu-id="c34dc-270">So continuing from hello example before:</span></span>

        string mobileServicesUserId = creds.Provider + ":" + creds.UserId;

<span data-ttu-id="c34dc-271">Se l'app esegue tutte le dipendenze su ID utente, è importante utilizzare hello stessa registrazione con un provider di identità, se possibile.</span><span class="sxs-lookup"><span data-stu-id="c34dc-271">If your app does take any dependencies on user IDs, it is important that you leverage hello same registration with an identity provider if possible.</span></span> <span data-ttu-id="c34dc-272">Gli ID utente sono in genere con ambito toohello registrazione dell'applicazione che è stata usata, quindi introdurre una nuova registrazione potrebbero provocare problemi con i corrispondenti dati tootheir gli utenti.</span><span class="sxs-lookup"><span data-stu-id="c34dc-272">User IDs are typically scoped toohello application registration that was used, so introducing a new registration could create problems with matching users tootheir data.</span></span>

### <a name="custom-authentication"></a><span data-ttu-id="c34dc-273">Autenticazione personalizzata</span><span class="sxs-lookup"><span data-stu-id="c34dc-273">Custom authentication</span></span>
<span data-ttu-id="c34dc-274">Se l'app Usa una soluzione di autenticazione personalizzato, è possibile che tale sito aggiornato hello disponga di accesso toohello sistema toomake.</span><span class="sxs-lookup"><span data-stu-id="c34dc-274">If your app is using a custom authentication solution, you will want toomake sure that hello upgraded site has access toohello system.</span></span> <span data-ttu-id="c34dc-275">Seguire le istruzioni di nuovo hello per l'autenticazione personalizzata in hello [Panoramica di .NET server SDK] toointegrate la soluzione.</span><span class="sxs-lookup"><span data-stu-id="c34dc-275">Follow hello new instructions for custom authentication in hello [.NET server SDK overview] toointegrate your solution.</span></span> <span data-ttu-id="c34dc-276">Si noti che i componenti di autenticazione personalizzata hello siano ancora in anteprima.</span><span class="sxs-lookup"><span data-stu-id="c34dc-276">Please note that hello custom authentication components are still in preview.</span></span>

## <span data-ttu-id="c34dc-277"><a name="updating-clients"></a>Aggiornamento dei client</span><span class="sxs-lookup"><span data-stu-id="c34dc-277"><a name="updating-clients"></a>Updating clients</span></span>
<span data-ttu-id="c34dc-278">Dopo aver reso operativo un back-end dell'app per dispositivi mobili, è possibile lavorare su una nuova versione dell'applicazione client che ne faccia uso.</span><span class="sxs-lookup"><span data-stu-id="c34dc-278">Once you have an operational Mobile App backend, you can work on a new version of your client application which consumes it.</span></span> <span data-ttu-id="c34dc-279">App per dispositivi mobili include anche una nuova versione del client hello SDK e aggiornamento del server toohello simile precedente, sarà necessario tooremove tutti i riferimenti toohello Mobile Services SDK prima di installare le versioni di App per dispositivi mobili hello.</span><span class="sxs-lookup"><span data-stu-id="c34dc-279">Mobile Apps also includes a new version of hello client SDKs, and similar toohello server upgrade above, you will need tooremove all references toohello Mobile Services SDKs before installing hello Mobile Apps versions.</span></span>

<span data-ttu-id="c34dc-280">Una delle modifiche principali di hello tra le versioni di hello è che i costruttori di hello non richiedono una chiave applicazione.</span><span class="sxs-lookup"><span data-stu-id="c34dc-280">One of hello main changes between hello versions is that hello constructors no longer require an application key.</span></span> <span data-ttu-id="c34dc-281">È ora semplicemente passare hello URL dell'App Mobile.</span><span class="sxs-lookup"><span data-stu-id="c34dc-281">You now simply pass in hello URL of your Mobile App.</span></span> <span data-ttu-id="c34dc-282">Ad esempio, nei client .NET hello, hello `MobileServiceClient` costruttore è:</span><span class="sxs-lookup"><span data-stu-id="c34dc-282">For example, on hello .NET clients, hello `MobileServiceClient` constructor is now:</span></span>

        public static MobileServiceClient MobileService = new MobileServiceClient(
            "https://contoso.azurewebsites.net", // URL of hello Mobile App
        );

<span data-ttu-id="c34dc-283">È possibile leggere informazioni sull'installazione hello nuovi SDK e con nuova struttura di hello tramite collegamenti hello riportati di seguito:</span><span class="sxs-lookup"><span data-stu-id="c34dc-283">You can read about installing hello new SDKs and using hello new structure via hello links below:</span></span>

* [<span data-ttu-id="c34dc-284">iOS versione 3.0.0 o successiva</span><span class="sxs-lookup"><span data-stu-id="c34dc-284">iOS version 3.0.0 or later</span></span>](app-service-mobile-ios-how-to-use-client-library.md)
* [<span data-ttu-id="c34dc-285">.NET (Windows/Xamarin) versione 2.0.0 o successiva</span><span class="sxs-lookup"><span data-stu-id="c34dc-285">.NET (Windows/Xamarin) version 2.0.0 or later</span></span>](app-service-mobile-dotnet-how-to-use-client-library.md)

<span data-ttu-id="c34dc-286">Se in un'applicazione si usano le notifiche push, prendere nota di hello istruzioni di registrazione specifica per ogni piattaforma, come sono state apportate alcune modifiche sono anche.</span><span class="sxs-lookup"><span data-stu-id="c34dc-286">If your application makes use of push notifications, make note of hello specific registration instructions for each platform, as there have been some changes there as well.</span></span>

<span data-ttu-id="c34dc-287">Dopo aver hello nuova versione del client pronta, eseguire la verifica per il progetto server aggiornato in.</span><span class="sxs-lookup"><span data-stu-id="c34dc-287">When you have hello new client version ready, try it out against your upgraded server project.</span></span> <span data-ttu-id="c34dc-288">Dopo aver verificato il corretto funzionamento, è possibile rilasciare una nuova versione di toocustomers l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="c34dc-288">After validating that it works, you can release a new version of your application toocustomers.</span></span> <span data-ttu-id="c34dc-289">Infine, dopo i clienti hanno una probabilità tooreceive questi aggiornamenti, è possibile eliminare versione di servizi mobili hello dell'app.</span><span class="sxs-lookup"><span data-stu-id="c34dc-289">Eventually, once your customers have had a chance tooreceive these updates, you can delete hello Mobile Services version of your app.</span></span> <span data-ttu-id="c34dc-290">A questo punto, avere completamente aggiornato tooan App del servizio Mobile App utilizzando il server di App per dispositivi mobili più recente hello SDK.</span><span class="sxs-lookup"><span data-stu-id="c34dc-290">At this point, you have completely upgraded tooan App Service Mobile App using hello latest Mobile Apps server SDK.</span></span>

<!-- URLs. -->

[portale di Azure]: https://portal.azure.com/
[portale di Azure classico]: https://manage.windowsazure.com/
[quali sono App per dispositivi mobili?]: app-service-mobile-value-prop.md
[I already use web sites and mobile services – how does App Service help me?]: /en-us/documentation/articles/app-service-mobile-value-prop-migration-from-mobile-services
[Mobile App Server SDK]: http://www.nuget.org/packages/microsoft.azure.mobile.server
[Create a Mobile App]: app-service-mobile-xamarin-ios-get-started.md
[Add push notifications tooyour mobile app]: app-service-mobile-xamarin-ios-get-started-push.md
[Add authentication tooyour mobile app]: app-service-mobile-xamarin-ios-get-started-users.md
[dell'utilità di pianificazione di Azure]: /en-us/documentation/services/scheduler/
[processo Web]: ../app-service-web/websites-webjobs-resources.md
[come toouse hello server .NET SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
[Migrate from Mobile Services tooan App Service Mobile App]: app-service-mobile-migrating-from-mobile-services.md
[Migrate your existing Mobile Service tooApp Service]: app-service-mobile-migrating-from-mobile-services.md
[servizio App prezzi]: https://azure.microsoft.com/en-us/pricing/details/app-service/
[Panoramica di .NET server SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
