---
title: 'Azure Active Directory Domain Services: abilitare la delega vincolata Kerberos | Documentazione Microsoft'
description: Abilitare la delega vincolata Kerberos in domini gestiti di Azure Active Directory Domain Services
services: active-directory-ds
documentationcenter: 
author: mahesh-unnikrishnan
manager: stevenpo
editor: curtand
ms.assetid: 938a5fbc-2dd1-4759-bcce-628a6e19ab9d
ms.service: active-directory-ds
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: maheshu
ms.openlocfilehash: f36f16a7bb00ace9fd5164eb38ba77f015f22f5c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="configure-kerberos-constrained-delegation-kcd-on-a-managed-domain"></a><span data-ttu-id="26825-103">Configurare la delega vincolata Kerberos (KCD) in un dominio gestito</span><span class="sxs-lookup"><span data-stu-id="26825-103">Configure kerberos constrained delegation (KCD) on a managed domain</span></span>
<span data-ttu-id="26825-104">Molte applicazioni devono accedere alle risorse nel contesto dell'utente.</span><span class="sxs-lookup"><span data-stu-id="26825-104">Many applications need to access resources in the context of the user.</span></span> <span data-ttu-id="26825-105">Active Directory supporta un meccanismo denominato delega Kerberos che consente questo caso d'uso.</span><span class="sxs-lookup"><span data-stu-id="26825-105">Active Directory supports a mechanism called Kerberos delegation, which enables this use-case.</span></span> <span data-ttu-id="26825-106">È anche possibile limitare la delega in modo che siano accessibili solo risorse specifiche nel contesto dell'utente.</span><span class="sxs-lookup"><span data-stu-id="26825-106">Further, you can restrict delegation so that only specific resources can be accessed in the context of the user.</span></span> <span data-ttu-id="26825-107">I domini gestiti di Azure AD Domain Services sono diversi dai domini di Active Directory tradizionali perché sono bloccati in modo più sicuro.</span><span class="sxs-lookup"><span data-stu-id="26825-107">Azure AD Domain Services managed domains are different from traditional Active Directory domains since they are more securely locked down.</span></span>

<span data-ttu-id="26825-108">Questo articolo illustra come configurare la delega vincolata Kerberos in un dominio gestito di Azure AD Domain Services.</span><span class="sxs-lookup"><span data-stu-id="26825-108">This article shows you how to configure kerberos constrained delegation on an Azure AD Domain Services managed domain.</span></span>

## <a name="kerberos-constrained-delegation-kcd"></a><span data-ttu-id="26825-109">Delega vincolata Kerberos (KCD)</span><span class="sxs-lookup"><span data-stu-id="26825-109">Kerberos constrained delegation (KCD)</span></span>
<span data-ttu-id="26825-110">La delega Kerberos consente a un account di rappresentare un'altra entità di sicurezza, ad esempio un utente, per accedere alle risorse.</span><span class="sxs-lookup"><span data-stu-id="26825-110">Kerberos delegation enables an account to impersonate another security principal (such as a user) to access resources.</span></span> <span data-ttu-id="26825-111">Si consideri un'applicazione Web che accede a un'API Web back-end nel contesto di un utente.</span><span class="sxs-lookup"><span data-stu-id="26825-111">Consider a web application that accesses a back-end web API in the context of a user.</span></span> <span data-ttu-id="26825-112">In questo esempio l'applicazione Web, in esecuzione nel contesto di un account del servizio o di un account del computer, rappresenta l'utente durante l'accesso alla risorsa, ovvero l'API Web back-end.</span><span class="sxs-lookup"><span data-stu-id="26825-112">In this example, the web application (running in the context of a service account or a computer/machine account) impersonates the user when accessing the resource (back-end web API).</span></span> <span data-ttu-id="26825-113">La delega Kerberos non è sicura perché non limita le risorse a cui può accedere l'account di rappresentazione nel contesto dell'utente.</span><span class="sxs-lookup"><span data-stu-id="26825-113">Kerberos delegation is insecure since it does not restrict the resources the impersonating account can access in the context of the user.</span></span>

<span data-ttu-id="26825-114">La delega vincolata Kerberos consente di limitare le risorse o i servizi in cui il server specificato può agire per conto di un utente.</span><span class="sxs-lookup"><span data-stu-id="26825-114">Kerberos constrained delegation (KCD) restricts the services/resources to which the specified server can act on the behalf of a user.</span></span> <span data-ttu-id="26825-115">La delega vincolata Kerberos tradizionale richiede privilegi di amministratore di dominio per configurare un account di dominio per un servizio e limita l'account a un dominio singolo.</span><span class="sxs-lookup"><span data-stu-id="26825-115">Traditional KCD requires domain administrator privileges to configure a domain account for a service and it restricts the account to a single domain.</span></span>

<span data-ttu-id="26825-116">Alla delega vincolata Kerberos tradizionale sono anche associati alcuni problemi.</span><span class="sxs-lookup"><span data-stu-id="26825-116">Traditional KCD also has a few issues associated with it.</span></span> <span data-ttu-id="26825-117">Nei sistemi operativi precedenti, in cui l'amministratore di dominio configurava il servizio, l'amministratore del servizio non aveva modo di sapere quali servizi front-end delegati ai servizi risorsa fossero di sua proprietà.</span><span class="sxs-lookup"><span data-stu-id="26825-117">In earlier operating systems where the domain administrator configured the service, the service administrator had no useful way to know which front-end services delegated to the resource services they owned.</span></span> <span data-ttu-id="26825-118">Qualsiasi servizio front-end che potesse delegare a un servizio risorsa rappresentava un potenziale punto debole.</span><span class="sxs-lookup"><span data-stu-id="26825-118">And any front-end service that could delegate to a resource service represented a potential attack point.</span></span> <span data-ttu-id="26825-119">Se un server che ospitava un servizio front-end era compromesso ed era configurato per la delega ai servizi risorsa, anche questi ultimi potevano essere compromessi.</span><span class="sxs-lookup"><span data-stu-id="26825-119">If a server that hosted a front-end service was compromised, and it was configured to delegate to resource services, the resource services could also be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="26825-120">In un dominio gestito di Azure AD Domain Services non si hanno privilegi di amministratore di dominio.</span><span class="sxs-lookup"><span data-stu-id="26825-120">On an Azure AD Domain Services managed domain, you do not have domain administrator privileges.</span></span> <span data-ttu-id="26825-121">Di conseguenza, **non è possibile configurare la delega vincolata Kerberos tradizionale in un dominio gestito**.</span><span class="sxs-lookup"><span data-stu-id="26825-121">Therefore, **traditional KCD cannot be configured on a managed domain**.</span></span> <span data-ttu-id="26825-122">Usare la delega vincolata Kerberos basata su risorse, come illustrato in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="26825-122">Use resource-based KCD as described in this article.</span></span> <span data-ttu-id="26825-123">Questo meccanismo è anche più sicuro.</span><span class="sxs-lookup"><span data-stu-id="26825-123">This mechanism is also more secure.</span></span>
>
>

## <a name="resource-based-kerberos-constrained-delegation"></a><span data-ttu-id="26825-124">Delega vincolata Kerberos basata sulle risorse</span><span class="sxs-lookup"><span data-stu-id="26825-124">Resource-based kerberos constrained delegation</span></span>
<span data-ttu-id="26825-125">In Windows Server 2012 R2 e Windows Server 2012 la possibilità di configurare la delega vincolata per il servizio è stata trasferita dall'amministratore di dominio all'amministratore del servizio.</span><span class="sxs-lookup"><span data-stu-id="26825-125">In Windows Server 2012 R2 and Windows Server 2012, the ability to configure constrained delegation for the service has been transferred from the domain administrator to the service administrator.</span></span> <span data-ttu-id="26825-126">In questo modo l'amministratore del servizio back-end può consentire o negare i servizi front-end.</span><span class="sxs-lookup"><span data-stu-id="26825-126">In this way, the back-end service administrator can allow or deny front-end services.</span></span> <span data-ttu-id="26825-127">Questo modello è noto come **delega vincolata Kerberos basata sulle risorse**.</span><span class="sxs-lookup"><span data-stu-id="26825-127">This model is known as **resource-based kerberos constrained delegation**.</span></span>

<span data-ttu-id="26825-128">È possibile configurare la delega vincolata Kerberos basata sulle risorse usando PowerShell.</span><span class="sxs-lookup"><span data-stu-id="26825-128">Resource-based KCD is configured using PowerShell.</span></span> <span data-ttu-id="26825-129">Usare i cmdlet Set-ADComputer o Set-ADUser, a seconda che l'account di rappresentazione sia un account del computer oppure un account utente o un account del servizio.</span><span class="sxs-lookup"><span data-stu-id="26825-129">You use the Set-ADComputer or Set-ADUser cmdlets, depending on whether the impersonating account is a computer account or a user account/service account.</span></span>

### <a name="configure-resource-based-kcd-for-a-computer-account-on-a-managed-domain"></a><span data-ttu-id="26825-130">Configurare la delega vincolata Kerberos basata sulle risorse per un account del computer in un dominio gestito</span><span class="sxs-lookup"><span data-stu-id="26825-130">Configure resource-based KCD for a computer account on a managed domain</span></span>
<span data-ttu-id="26825-131">Si prenda ad esempio un'app Web in esecuzione nel computer "contoso100-webapp.contoso100.com".</span><span class="sxs-lookup"><span data-stu-id="26825-131">Assume you have a web app running on the computer 'contoso100-webapp.contoso100.com'.</span></span> <span data-ttu-id="26825-132">L'app deve accedere alla risorsa, ovvero un'API Web in esecuzione su "contoso100-api.contoso100.com", nel contesto degli utenti del dominio.</span><span class="sxs-lookup"><span data-stu-id="26825-132">It needs to access the resource (a web API running on 'contoso100-api.contoso100.com') in the context of domain users.</span></span> <span data-ttu-id="26825-133">Di seguito viene illustrato come impostare la delega vincolata Kerberos basata su risorse per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="26825-133">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADComputer -Identity contoso100-webapp.contoso100.com
Set-ADComputer contoso100-api.contoso100.com -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

### <a name="configure-resource-based-kcd-for-a-user-account-on-a-managed-domain"></a><span data-ttu-id="26825-134">Configurare la delega vincolata Kerberos basata sulle risorse per un account utente in un dominio gestito</span><span class="sxs-lookup"><span data-stu-id="26825-134">Configure resource-based KCD for a user account on a managed domain</span></span>
<span data-ttu-id="26825-135">Si prenda ad esempio un'app Web in esecuzione come account del servizio "appsvc". L'app deve accedere alla risorsa, ovvero un'API Web in esecuzione come account del servizio "backendsvc", nel contesto degli utenti del dominio.</span><span class="sxs-lookup"><span data-stu-id="26825-135">Assume you have a web app running as a service account 'appsvc' and it needs to access the resource (a web API running as a service account - 'backendsvc') in the context of domain users.</span></span> <span data-ttu-id="26825-136">Di seguito viene illustrato come impostare la delega vincolata Kerberos basata su risorse per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="26825-136">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADUser -Identity appsvc
Set-ADUser backendsvc -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

## <a name="related-content"></a><span data-ttu-id="26825-137">Contenuti correlati</span><span class="sxs-lookup"><span data-stu-id="26825-137">Related Content</span></span>
* [<span data-ttu-id="26825-138">Guida introduttiva di Azure AD Domain Services</span><span class="sxs-lookup"><span data-stu-id="26825-138">Azure AD Domain Services - Getting Started guide</span></span>](active-directory-ds-getting-started.md)
* [<span data-ttu-id="26825-139">Panoramica della delega vincolata Kerberos</span><span class="sxs-lookup"><span data-stu-id="26825-139">Kerberos Constrained Delegation Overview</span></span>](https://technet.microsoft.com/library/jj553400.aspx)
