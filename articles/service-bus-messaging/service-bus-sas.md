---
title: l'autenticazione del Bus di servizio aaaAzure con firme di accesso condiviso | Documenti Microsoft
description: Panoramica dell'autenticazione del bus di servizio con firme di accesso condiviso, dettagli dell'autenticazione con firme di accesso condiviso con il bus di servizio.
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/23/2017
ms.author: sethm
ms.openlocfilehash: 773bb11720384d7245820b56dc25b8e064ffa746
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-authentication-with-shared-access-signatures"></a><span data-ttu-id="81689-103">Autenticazione del bus di servizio con firme di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="81689-103">Service Bus authentication with Shared Access Signatures</span></span>

<span data-ttu-id="81689-104">*Firme di accesso condiviso* (SAS) sono il meccanismo di sicurezza primario hello per Bus di servizio di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="81689-104">*Shared Access Signatures* (SAS) are hello primary security mechanism for Service Bus messaging.</span></span> <span data-ttu-id="81689-105">In questo articolo viene SAS, come funzionino e come toouse loro in modo indipendente dalla piattaforma.</span><span class="sxs-lookup"><span data-stu-id="81689-105">This article discusses SAS, how they work, and how toouse them in a platform-agnostic way.</span></span>

<span data-ttu-id="81689-106">L'autenticazione SAS consente applicazioni tooauthenticate tooService Bus usando una chiave di accesso configurata nello spazio dei nomi hello o in hello messaggistica entità (coda o argomento) con cui sono associati diritti specifici.</span><span class="sxs-lookup"><span data-stu-id="81689-106">SAS authentication enables applications tooauthenticate tooService Bus using an access key configured on hello namespace, or on hello messaging entity (queue or topic) with which specific rights are associated.</span></span> <span data-ttu-id="81689-107">È quindi possibile utilizzare questa chiave toogenerate un token di firma di accesso condiviso che i client possono utilizzare tooauthenticate tooService Bus.</span><span class="sxs-lookup"><span data-stu-id="81689-107">You can then use this key toogenerate a SAS token that clients can in turn use tooauthenticate tooService Bus.</span></span>

<span data-ttu-id="81689-108">Supporto per l'autenticazione di firma di accesso condiviso è incluso in hello Azure SDK versione 2.0 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="81689-108">SAS authentication support is included in hello Azure SDK version 2.0 and later.</span></span>

## <a name="overview-of-sas"></a><span data-ttu-id="81689-109">Panoramica di SAS</span><span class="sxs-lookup"><span data-stu-id="81689-109">Overview of SAS</span></span>

<span data-ttu-id="81689-110">Le firme di accesso condiviso sono un meccanismo di autenticazione basato su hash sicuri SHA-256 o URI.</span><span class="sxs-lookup"><span data-stu-id="81689-110">Shared Access Signatures are an authentication mechanism based on SHA-256 secure hashes or URIs.</span></span> <span data-ttu-id="81689-111">SAS è un meccanismo estremamente efficace utilizzato da tutti i servizi del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="81689-111">SAS is an extremely powerful mechanism that is used by all Service Bus services.</span></span> <span data-ttu-id="81689-112">Nell'uso effettivo, SAS presenta due componenti: i *criteri di accesso condiviso* e una *firma di accesso condiviso* che viene spesso chiamata *token*.</span><span class="sxs-lookup"><span data-stu-id="81689-112">In actual use, SAS has two components: a *shared access policy* and a *Shared Access Signature* (often called a *token*).</span></span>

<span data-ttu-id="81689-113">L'autenticazione di firma di accesso condiviso nel Bus di servizio è inclusa la configurazione di hello di una chiave di crittografia con i relativi diritti in una risorsa del Bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="81689-113">SAS authentication in Service Bus involves hello configuration of a cryptographic key with associated rights on a Service Bus resource.</span></span> <span data-ttu-id="81689-114">I client attestazione accesso tooService Bus risorse presentando un token di firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="81689-114">Clients claim access tooService Bus resources by presenting a SAS token.</span></span> <span data-ttu-id="81689-115">Questo token è costituito da risorse hello URI a cui si accede e una scadenza firmata con hello chiave configurata.</span><span class="sxs-lookup"><span data-stu-id="81689-115">This token consists of hello resource URI being accessed, and an expiry signed with hello configured key.</span></span>

<span data-ttu-id="81689-116">È possibile configurare le regole di autorizzazione della firma di accesso condiviso in [inoltri](service-bus-fundamentals-hybrid-solutions.md#relays), [code](service-bus-fundamentals-hybrid-solutions.md#queues) e [argomenti](service-bus-fundamentals-hybrid-solutions.md#topics) del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="81689-116">You can configure Shared Access Signature authorization rules on Service Bus [relays](service-bus-fundamentals-hybrid-solutions.md#relays), [queues](service-bus-fundamentals-hybrid-solutions.md#queues), and [topics](service-bus-fundamentals-hybrid-solutions.md#topics).</span></span>

<span data-ttu-id="81689-117">L'autenticazione SAS utilizza hello seguenti elementi:</span><span class="sxs-lookup"><span data-stu-id="81689-117">SAS authentication uses hello following elements:</span></span>

* <span data-ttu-id="81689-118">[Regola di autorizzazione per l'accesso condiviso](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): una chiave di crittografia primaria a 256 bit in formato Base 64, una chiave secondaria facoltativa e un nome di chiave e i diritti associati (una raccolta di diritti di tipo *Listen*, *Send* o *Manage*).</span><span class="sxs-lookup"><span data-stu-id="81689-118">[Shared Access authorization rule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule): A 256-bit primary cryptographic key in Base64 representation, an optional secondary key, and a key name and associated rights (a collection of *Listen*, *Send*, or *Manage* rights).</span></span>
* <span data-ttu-id="81689-119">[Firma di accesso condiviso](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: generato utilizzando hello HMAC-SHA256 di una stringa di risorsa, costituito da hello URI della risorsa hello che è possibile accedere a e da una scadenza, con chiave di crittografia hello.</span><span class="sxs-lookup"><span data-stu-id="81689-119">[Shared Access Signature](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) token: Generated using hello HMAC-SHA256 of a resource string, consisting of hello URI of hello resource that is accessed and an expiry, with hello cryptographic key.</span></span> <span data-ttu-id="81689-120">firma Hello e altri elementi descritti nella hello le sezioni seguenti vengono formattati in un hello tooform stringa token SAS.</span><span class="sxs-lookup"><span data-stu-id="81689-120">hello signature and other elements described in hello following sections are formatted into a string tooform hello SAS token.</span></span>

## <a name="shared-access-policy"></a><span data-ttu-id="81689-121">Criteri di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="81689-121">Shared access policy</span></span>

<span data-ttu-id="81689-122">Toounderstand una cosa importante sulla firma di accesso condiviso è che inizia con un criterio.</span><span class="sxs-lookup"><span data-stu-id="81689-122">An important thing toounderstand about SAS is that it starts with a policy.</span></span> <span data-ttu-id="81689-123">Per ogni criterio si stabiliscono tre informazioni: **nome**, **ambito** e **autorizzazioni**.</span><span class="sxs-lookup"><span data-stu-id="81689-123">For each policy, you decide on three pieces of information: **name**, **scope**, and **permissions**.</span></span> <span data-ttu-id="81689-124">Hello **nome** semplicemente che; è un nome univoco all'interno di tale ambito.</span><span class="sxs-lookup"><span data-stu-id="81689-124">hello **name** is just that; a unique name within that scope.</span></span> <span data-ttu-id="81689-125">Hello ambito è abbastanza semplice: è hello URI della risorsa hello in questione.</span><span class="sxs-lookup"><span data-stu-id="81689-125">hello scope is easy enough: it's hello URI of hello resource in question.</span></span> <span data-ttu-id="81689-126">Per uno spazio dei nomi Service Bus, hello ambito è il nome di dominio completo hello (FQDN), ad esempio `https://<yournamespace>.servicebus.windows.net/`.</span><span class="sxs-lookup"><span data-stu-id="81689-126">For a Service Bus namespace, hello scope is hello fully qualified domain name (FQDN), such as `https://<yournamespace>.servicebus.windows.net/`.</span></span>

<span data-ttu-id="81689-127">Hello le autorizzazioni disponibili per i criteri sono in gran parte non necessitano di spiegazione:</span><span class="sxs-lookup"><span data-stu-id="81689-127">hello available permissions for a policy are largely self-explanatory:</span></span>

* <span data-ttu-id="81689-128">Invio</span><span class="sxs-lookup"><span data-stu-id="81689-128">Send</span></span>
* <span data-ttu-id="81689-129">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-129">Listen</span></span>
* <span data-ttu-id="81689-130">Gestisci</span><span class="sxs-lookup"><span data-stu-id="81689-130">Manage</span></span>

<span data-ttu-id="81689-131">Dopo aver creato criteri hello, viene assegnato un *chiave primaria* e *chiave secondaria*.</span><span class="sxs-lookup"><span data-stu-id="81689-131">After you create hello policy, it is assigned a *Primary Key* and a *Secondary Key*.</span></span> <span data-ttu-id="81689-132">Si tratta di chiavi di crittografia complesse.</span><span class="sxs-lookup"><span data-stu-id="81689-132">These are cryptographically strong keys.</span></span> <span data-ttu-id="81689-133">Non andranno perse o perdita li - sempre siano disponibili in hello [portale di Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="81689-133">Don't lose them or leak them - they'll always be available in hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="81689-134">È possibile utilizzare una delle chiavi di hello generato e li può essere rigenerato in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="81689-134">You can use either of hello generated keys, and you can regenerate them at any time.</span></span> <span data-ttu-id="81689-135">Tuttavia, se si rigenera o modificare la chiave primaria di hello nei criteri di hello, le firme di accesso condiviso creato da esso verranno invalidate.</span><span class="sxs-lookup"><span data-stu-id="81689-135">However, if you regenerate or change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

<span data-ttu-id="81689-136">Quando si crea uno spazio dei nomi del Bus di servizio, viene creato automaticamente un criterio per hello tutto lo spazio dei nomi denominato **RootManageSharedAccessKey**, e questo criterio ha tutte le autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="81689-136">When you create a Service Bus namespace, a policy is automatically created for hello entire namespace called **RootManageSharedAccessKey**, and this policy has all permissions.</span></span> <span data-ttu-id="81689-137">Non accedere come **radice** e non usare questo criterio a meno che non esista un motivo molto valido.</span><span class="sxs-lookup"><span data-stu-id="81689-137">You don't log on as **root**, so don't use this policy unless there's a really good reason.</span></span> <span data-ttu-id="81689-138">È possibile creare criteri aggiuntivi in hello **configura** scheda per spazio dei nomi hello nel portale di hello.</span><span class="sxs-lookup"><span data-stu-id="81689-138">You can create additional policies in hello **Configure** tab for hello namespace in hello portal.</span></span> <span data-ttu-id="81689-139">È importante toonote che un livello di struttura con un unico Bus di servizio (spazio dei nomi, coda, e così via) può avere solo backup too12 criteri allegati tooit.</span><span class="sxs-lookup"><span data-stu-id="81689-139">It's important toonote that a single tree level in Service Bus (namespace, queue, etc.) can only have up too12 policies attached tooit.</span></span>

## <a name="configuration-for-shared-access-signature-authentication"></a><span data-ttu-id="81689-140">Configurazione dell'autenticazione della firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="81689-140">Configuration for Shared Access Signature authentication</span></span>
<span data-ttu-id="81689-141">È possibile configurare hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) regola in spazi dei nomi Service Bus, code o argomenti.</span><span class="sxs-lookup"><span data-stu-id="81689-141">You can configure hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) rule on Service Bus namespaces, queues, or topics.</span></span> <span data-ttu-id="81689-142">Configurazione di un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) su un Bus di servizio di sottoscrizione non è supportata, ma è possibile utilizzare le regole configurate in un toosubscriptions accesso toosecure dello spazio dei nomi o un argomento.</span><span class="sxs-lookup"><span data-stu-id="81689-142">Configuring a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) on a Service Bus subscription is currently not supported, but you can use rules configured on a namespace or topic toosecure access toosubscriptions.</span></span> <span data-ttu-id="81689-143">Per un esempio che illustra questa procedura, vedere hello [l'autenticazione tramite firma di accesso condiviso (SAS) con le sottoscrizioni del Bus di servizio](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) esempio.</span><span class="sxs-lookup"><span data-stu-id="81689-143">For a working sample that illustrates this procedure, see hello [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c) sample.</span></span>

<span data-ttu-id="81689-144">In uno spazio dei nomi, una coda o un argomento del bus di servizio è possibile configurare fino 12 regole di questo tipo.</span><span class="sxs-lookup"><span data-stu-id="81689-144">A maximum of 12 such rules can be configured on a Service Bus namespace, queue, or topic.</span></span> <span data-ttu-id="81689-145">Le regole configurate in uno spazio dei nomi del Bus di servizio si applicano tooall entità nello spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="81689-145">Rules that are configured on a Service Bus namespace apply tooall entities in that namespace.</span></span>

![SAS](./media/service-bus-sas/service-bus-namespace.png)

<span data-ttu-id="81689-147">In questa figura, hello *manageRuleNS*, *sendRuleNS*, e *listenRuleNS* si applicano le regole di autorizzazione tooboth coda Q1 che all'argomento T1, mentre *listenRuleQ*  e *sendRuleQ* si applicano solo tooqueue Q1 e *sendRuleT* si applica solo a tootopic T1.</span><span class="sxs-lookup"><span data-stu-id="81689-147">In this figure, hello *manageRuleNS*, *sendRuleNS*, and *listenRuleNS* authorization rules apply tooboth queue Q1 and topic T1, while *listenRuleQ* and *sendRuleQ* apply only tooqueue Q1 and *sendRuleT* applies only tootopic T1.</span></span>

<span data-ttu-id="81689-148">Hello parametri principali di un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="81689-148">hello key parameters of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) are as follows:</span></span>

| <span data-ttu-id="81689-149">.</span><span class="sxs-lookup"><span data-stu-id="81689-149">Parameter</span></span> | <span data-ttu-id="81689-150">Descrizione</span><span class="sxs-lookup"><span data-stu-id="81689-150">Description</span></span> |
| --- | --- |
| <span data-ttu-id="81689-151">*KeyName*</span><span class="sxs-lookup"><span data-stu-id="81689-151">*KeyName*</span></span> |<span data-ttu-id="81689-152">Stringa che descrive la regola di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="81689-152">A string that describes hello authorization rule.</span></span> |
| <span data-ttu-id="81689-153">*PrimaryKey*</span><span class="sxs-lookup"><span data-stu-id="81689-153">*PrimaryKey*</span></span> |<span data-ttu-id="81689-154">Una codifica base64 a 256 bit chiave primaria per la firma e convalida i token di firma di accesso condiviso hello.</span><span class="sxs-lookup"><span data-stu-id="81689-154">A base64-encoded 256-bit primary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="81689-155">*SecondaryKey*</span><span class="sxs-lookup"><span data-stu-id="81689-155">*SecondaryKey*</span></span> |<span data-ttu-id="81689-156">Una con codifica base64 a 256 bit chiave secondaria per la firma e convalida i token di firma di accesso condiviso hello.</span><span class="sxs-lookup"><span data-stu-id="81689-156">A base64-encoded 256-bit secondary key for signing and validating hello SAS token.</span></span> |
| <span data-ttu-id="81689-157">*AccessRights*</span><span class="sxs-lookup"><span data-stu-id="81689-157">*AccessRights*</span></span> |<span data-ttu-id="81689-158">Un elenco di diritti di accesso concessi dalla regola di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="81689-158">A list of access rights granted by hello authorization rule.</span></span> <span data-ttu-id="81689-159">Questi diritti possono essere qualsiasi raccolta di diritti di ascolto, invio e gestione.</span><span class="sxs-lookup"><span data-stu-id="81689-159">These rights can be any collection of Listen, Send, and Manage rights.</span></span> |

<span data-ttu-id="81689-160">Quando viene eseguito il provisioning di uno spazio dei nomi del Bus di servizio, un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), con [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) impostare troppo**RootManageSharedAccessKey**, viene creato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="81689-160">When a Service Bus namespace is provisioned, a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), with [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) set too**RootManageSharedAccessKey**, is created by default.</span></span>

## <a name="generate-a-shared-access-signature-token"></a><span data-ttu-id="81689-161">Generare una firma di accesso condiviso (token)</span><span class="sxs-lookup"><span data-stu-id="81689-161">Generate a Shared Access Signature (token)</span></span>

<span data-ttu-id="81689-162">criterio Hello stesso non è il token di accesso hello per Bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="81689-162">hello policy itself is not hello access token for Service Bus.</span></span> <span data-ttu-id="81689-163">Oggetto hello da quale hello viene generato il token di accesso - con una chiave primaria o secondaria di hello è.</span><span class="sxs-lookup"><span data-stu-id="81689-163">It is hello object from which hello access token is generated - using either hello primary or secondary key.</span></span> <span data-ttu-id="81689-164">Qualsiasi client che dispone di accesso toohello specificate nella regola di autorizzazione di accesso condiviso hello chiavi di firma può generare token SAS hello.</span><span class="sxs-lookup"><span data-stu-id="81689-164">Any client that has access toohello signing keys specified in hello shared access authorization rule can generate hello SAS token.</span></span> <span data-ttu-id="81689-165">token Hello è generato da con attenzione la creazione di una stringa in hello seguente formato:</span><span class="sxs-lookup"><span data-stu-id="81689-165">hello token is generated by carefully crafting a string in hello following format:</span></span>

```
SharedAccessSignature sig=<signature-string>&se=<expiry>&skn=<keyName>&sr=<URL-encoded-resourceURI>
```

<span data-ttu-id="81689-166">Dove `signature-string` hash SHA-256 hello dell'ambito di hello del token hello (**ambito** come descritto nella sezione precedente hello) con un CRLF aggiunto e un'ora di scadenza (in secondi trascorsi hello: `00:00:00 UTC` del 1 ° gennaio 1970).</span><span class="sxs-lookup"><span data-stu-id="81689-166">Where `signature-string` is hello SHA-256 hash of hello scope of hello token (**scope** as described in hello previous section) with a CRLF appended and an expiry time (in seconds since hello epoch: `00:00:00 UTC` on 1 January 1970).</span></span> 

> [!NOTE]
> <span data-ttu-id="81689-167">tooavoid un breve scadenza dei token, è consigliabile codificare valore ora di scadenza hello come almeno un intero senza segno a 32 bit o, preferibilmente, un numero intero lungo (64 bit).</span><span class="sxs-lookup"><span data-stu-id="81689-167">tooavoid a short token expiry time, it is recommended that you encode hello expiry time value as at least a 32-bit unsigned integer, or preferably a long (64-bit) integer.</span></span>  
> 
> 

<span data-ttu-id="81689-168">hash Hello toohello simile pseudo-codice seguente esegue la ricerca e restituisce 32 byte.</span><span class="sxs-lookup"><span data-stu-id="81689-168">hello hash looks similar toohello following pseudo code and returns 32 bytes.</span></span>

```
SHA-256('https://<yournamespace>.servicebus.windows.net/'+'\n'+ 1438205742)
```

<span data-ttu-id="81689-169">i valori hash non Hello sono hello **SharedAccessSignature** stringa in modo che hello destinatario può calcolare hello hash con hello stessi parametri, che viene restituito toobe hello stesso risultato.</span><span class="sxs-lookup"><span data-stu-id="81689-169">hello non-hashed values are in hello **SharedAccessSignature** string so that hello recipient can compute hello hash with hello same parameters, toobe sure that it returns hello same result.</span></span> <span data-ttu-id="81689-170">nome della chiave hello identifica hello criteri toobe utilizzato toocompute hello hash Hello URI specifica ambito hello.</span><span class="sxs-lookup"><span data-stu-id="81689-170">hello URI specifies hello scope, and hello key name identifies hello policy toobe used toocompute hello hash.</span></span> <span data-ttu-id="81689-171">Questo è importante dal punto di vista della sicurezza.</span><span class="sxs-lookup"><span data-stu-id="81689-171">This is important from a security standpoint.</span></span> <span data-ttu-id="81689-172">Se la firma hello diversa che calcola il destinatario hello (Service Bus), l'accesso è negato.</span><span class="sxs-lookup"><span data-stu-id="81689-172">If hello signature doesn't match that which hello recipient (Service Bus) calculates, then access is denied.</span></span> <span data-ttu-id="81689-173">A questo punto è possibile che il mittente hello era toohello tasto di scelta e deve disporre dei diritti di hello specificati nei criteri di hello.</span><span class="sxs-lookup"><span data-stu-id="81689-173">At this point you can be sure that hello sender had access toohello key and should be granted hello rights specified in hello policy.</span></span>

<span data-ttu-id="81689-174">Si noti che è necessario utilizzare hello con codifica URI di risorsa per l'operazione.</span><span class="sxs-lookup"><span data-stu-id="81689-174">Note that you should use hello encoded resource URI for this operation.</span></span> <span data-ttu-id="81689-175">URI della risorsa Hello è hello che è richiesto l'URI completo di hello toowhich accesso alle risorse di Service Bus.</span><span class="sxs-lookup"><span data-stu-id="81689-175">hello resource URI is hello full URI of hello Service Bus resource toowhich access is claimed.</span></span> <span data-ttu-id="81689-176">Ad esempio `http://<namespace>.servicebus.windows.net/<entityPath>` o `sb://<namespace>.servicebus.windows.net/<entityPath>`, ovvero `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span><span class="sxs-lookup"><span data-stu-id="81689-176">For example, `http://<namespace>.servicebus.windows.net/<entityPath>` or `sb://<namespace>.servicebus.windows.net/<entityPath>`; that is, `http://contoso.servicebus.windows.net/contosoTopics/T1/Subscriptions/S3`.</span></span>

<span data-ttu-id="81689-177">regola di autorizzazione di accesso condiviso Hello utilizzata per la firma deve essere configurato sull'entità hello specificata da questo URI, o da un elemento padre nella gerarchia.</span><span class="sxs-lookup"><span data-stu-id="81689-177">hello shared access authorization rule used for signing must be configured on hello entity specified by this URI, or by one of its hierarchical parents.</span></span> <span data-ttu-id="81689-178">Ad esempio, `http://contoso.servicebus.windows.net/contosoTopics/T1` o `http://contoso.servicebus.windows.net` nell'esempio precedente hello.</span><span class="sxs-lookup"><span data-stu-id="81689-178">For example, `http://contoso.servicebus.windows.net/contosoTopics/T1` or `http://contoso.servicebus.windows.net` in hello previous example.</span></span>

<span data-ttu-id="81689-179">Un token di firma di accesso condiviso è valido per tutte le risorse in hello `<resourceURI>` utilizzato in hello `signature-string`.</span><span class="sxs-lookup"><span data-stu-id="81689-179">A SAS token is valid for all resources under hello `<resourceURI>` used in hello `signature-string`.</span></span>

<span data-ttu-id="81689-180">Hello [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in hello SAS token fa riferimento toohello **keyName** Usa il token di hello toogenerate di hello di regola di autorizzazione di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="81689-180">hello [KeyName](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_KeyName) in hello SAS token refers toohello **keyName** of hello shared access authorization rule used toogenerate hello token.</span></span>

<span data-ttu-id="81689-181">Hello *URL-encoded-resourceURI* deve essere hello stesso hello URI utilizzato in hello stringa da firmare durante il calcolo hello della firma hello.</span><span class="sxs-lookup"><span data-stu-id="81689-181">hello *URL-encoded-resourceURI* must be hello same as hello URI used in hello string-to-sign during hello computation of hello signature.</span></span> <span data-ttu-id="81689-182">Il valore deve essere [codificato in percentuale](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span><span class="sxs-lookup"><span data-stu-id="81689-182">It should be [percent-encoded](https://msdn.microsoft.com/library/4fkewx0t.aspx).</span></span>

<span data-ttu-id="81689-183">È consigliabile rigenerare periodicamente le chiavi hello utilizzati hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) oggetto.</span><span class="sxs-lookup"><span data-stu-id="81689-183">It is recommended that you periodically regenerate hello keys used in hello [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object.</span></span> <span data-ttu-id="81689-184">Le applicazioni in genere consigliabile utilizzare hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate un token di firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="81689-184">Applications should generally use hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) toogenerate a SAS token.</span></span> <span data-ttu-id="81689-185">Quando si rigenerano le chiavi di hello, è necessario sostituire hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) con primario precedente hello chiave e generare una nuova chiave come nuova chiave primaria hello.</span><span class="sxs-lookup"><span data-stu-id="81689-185">When regenerating hello keys, you should replace hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) with hello old primary key, and generate a new key as hello new primary key.</span></span> <span data-ttu-id="81689-186">In questo modo toocontinue utilizzando token per l'autorizzazione rilasciati con una chiave primaria precedente hello e non ancora scaduti.</span><span class="sxs-lookup"><span data-stu-id="81689-186">This enables you toocontinue using tokens for authorization that were issued with hello old primary key, and that have not yet expired.</span></span>

<span data-ttu-id="81689-187">Se si dispongono di chiavi hello toorevoke una chiave viene compromessa, è possibile rigenerare sia hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) hello e [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) di un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), sostituirli con le nuove chiavi.</span><span class="sxs-lookup"><span data-stu-id="81689-187">If a key is compromised and you have toorevoke hello keys, you can regenerate both hello [PrimaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_PrimaryKey) and hello [SecondaryKey](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule#Microsoft_ServiceBus_Messaging_SharedAccessAuthorizationRule_SecondaryKey) of a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule), replacing them with new keys.</span></span> <span data-ttu-id="81689-188">Questa procedura invalida tutti i token firmati con le chiavi precedenti hello.</span><span class="sxs-lookup"><span data-stu-id="81689-188">This procedure invalidates all tokens signed with hello old keys.</span></span>

## <a name="how-toouse-shared-access-signature-authentication-with-service-bus"></a><span data-ttu-id="81689-189">Modalità autenticazione di firma di accesso condiviso toouse con il Bus di servizio</span><span class="sxs-lookup"><span data-stu-id="81689-189">How toouse Shared Access Signature authentication with Service Bus</span></span>

<span data-ttu-id="81689-190">Hello seguenti scenari include la configurazione delle regole di autorizzazione, la generazione di token di firma di accesso condiviso e l'autorizzazione di client.</span><span class="sxs-lookup"><span data-stu-id="81689-190">hello following scenarios include configuration of authorization rules, generation of SAS tokens, and client authorization.</span></span>

<span data-ttu-id="81689-191">Per una procedura completa di esempio reale di un'applicazione del Bus di servizio che illustra hello configurazione e Usa SAS autorizzazione, vedere [l'autenticazione di firma di accesso condiviso con il Bus di servizio](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span><span class="sxs-lookup"><span data-stu-id="81689-191">For a full working sample of a Service Bus application that illustrates hello configuration and uses SAS authorization, see [Shared Access Signature authentication with Service Bus](http://code.msdn.microsoft.com/Shared-Access-Signature-0a88adf8).</span></span> <span data-ttu-id="81689-192">Un esempio correlato che illustra l'uso di hello SAS delle regole di autorizzazione configurati in spazi dei nomi o gli argomenti le sottoscrizioni del Bus di servizio toosecure è disponibile qui: [l'autenticazione tramite firma di accesso condiviso (SAS) con le sottoscrizioni del Bus di servizio ](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span><span class="sxs-lookup"><span data-stu-id="81689-192">A related sample that illustrates hello use of SAS authorization rules configured on namespaces or topics toosecure Service Bus subscriptions is available here: [Using Shared Access Signature (SAS) authentication with Service Bus Subscriptions](http://code.msdn.microsoft.com/Using-Shared-Access-e605b37c).</span></span>

## <a name="access-shared-access-authorization-rules-on-a-namespace"></a><span data-ttu-id="81689-193">Accesso alle regole di autorizzazione per l'accesso condiviso in uno spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-193">Access Shared Access Authorization rules on a namespace</span></span>

<span data-ttu-id="81689-194">Operazioni in radice dello spazio dei nomi del Bus di servizio hello richiedono l'autenticazione del certificato.</span><span class="sxs-lookup"><span data-stu-id="81689-194">Operations on hello Service Bus namespace root require certificate authentication.</span></span> <span data-ttu-id="81689-195">È necessario caricare un certificato di gestione per la sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="81689-195">You must upload a management certificate for your Azure subscription.</span></span> <span data-ttu-id="81689-196">tooupload un certificato di gestione, seguire i passaggi di hello [qui](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), utilizzando hello [portale di Azure][Azure portal].</span><span class="sxs-lookup"><span data-stu-id="81689-196">tooupload a management certificate, follow hello steps [here](../cloud-services/cloud-services-configure-ssl-certificate-portal.md#step-3-upload-a-certificate), using hello [Azure portal][Azure portal].</span></span> <span data-ttu-id="81689-197">Per ulteriori informazioni sui certificati di gestione di Azure, vedere hello [panoramica dei certificati di Azure](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span><span class="sxs-lookup"><span data-stu-id="81689-197">For more information about Azure management certificates, see hello [Azure certificates overview](../cloud-services/cloud-services-certs-create.md#what-are-management-certificates).</span></span>

<span data-ttu-id="81689-198">endpoint di Hello per accedere alle regole di autorizzazione di accesso condiviso in uno spazio dei nomi del Bus di servizio è il seguente:</span><span class="sxs-lookup"><span data-stu-id="81689-198">hello endpoint for accessing shared access authorization rules on a Service Bus namespace is as follows:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/
```

<span data-ttu-id="81689-199">toocreate un [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) oggetto in uno spazio dei nomi del Bus di servizio, eseguire un'operazione POST su questo endpoint con le informazioni sulle regole di hello serializzati come JSON o XML.</span><span class="sxs-lookup"><span data-stu-id="81689-199">toocreate a [SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object on a Service Bus namespace, execute a POST operation on this endpoint with hello rule information serialized as JSON or XML.</span></span> <span data-ttu-id="81689-200">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="81689-200">For example:</span></span>

```csharp
// Base address for accessing authorization rules on a namespace
string baseAddress = @"https://management.core.windows.net/<subscriptionId>/services/ServiceBus/namespaces/<namespace>/AuthorizationRules/";

// Configure authorization rule with base64-encoded 256-bit key and Send rights
var sendRule = new SharedAccessAuthorizationRule("contosoSendAll",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send });

// Operations on hello Service Bus namespace root require certificate authentication.
WebRequestHandler handler = new WebRequestHandler
{
    ClientCertificateOptions = ClientCertificateOption.Manual
};
// Access hello management certificate by subject name
handler.ClientCertificates.Add(GetCertificate(<certificateSN>));

HttpClient httpClient = new HttpClient(handler)
{
    BaseAddress = new Uri(baseAddress)
};
httpClient.DefaultRequestHeaders.Accept.Add(
    new MediaTypeWithQualityHeaderValue("application/json"));
httpClient.DefaultRequestHeaders.Add("x-ms-version", "2015-01-01");

// Execute a POST operation on hello baseAddress above toocreate an auth rule
var postResult = httpClient.PostAsJsonAsync("", sendRule).Result;
```

<span data-ttu-id="81689-201">Analogamente, utilizzare un'operazione GET su hello endpoint tooread hello regole di autorizzazione configurate nello spazio dei nomi hello.</span><span class="sxs-lookup"><span data-stu-id="81689-201">Similarly, use a GET operation on hello endpoint tooread hello authorization rules configured on hello namespace.</span></span>

<span data-ttu-id="81689-202">tooupdate o eliminare una regola di autorizzazione specifico, utilizzare hello seguenti endpoint:</span><span class="sxs-lookup"><span data-stu-id="81689-202">tooupdate or delete a specific authorization rule, use hello following endpoint:</span></span>

```http
https://management.core.windows.net/{subscriptionId}/services/ServiceBus/namespaces/{namespace}/AuthorizationRules/{KeyName}
```

## <a name="access-shared-access-authorization-rules-on-an-entity"></a><span data-ttu-id="81689-203">Accedere alle regole di autorizzazione per l'accesso condiviso in un'entità</span><span class="sxs-lookup"><span data-stu-id="81689-203">Access Shared Access Authorization rules on an entity</span></span>

<span data-ttu-id="81689-204">È possibile accedere a un [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) oggetto configurato in una coda del Bus di servizio o un argomento tramite hello [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) insieme in hello corrispondente [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) o [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span><span class="sxs-lookup"><span data-stu-id="81689-204">You can access a [Microsoft.ServiceBus.Messaging.SharedAccessAuthorizationRule](/dotnet/api/microsoft.servicebus.messaging.sharedaccessauthorizationrule) object configured on a Service Bus queue or topic through hello [AuthorizationRules](/dotnet/api/microsoft.servicebus.messaging.authorizationrules) collection in hello corresponding [QueueDescription](/dotnet/api/microsoft.servicebus.messaging.queuedescription) or [TopicDescription](/dotnet/api/microsoft.servicebus.messaging.topicdescription).</span></span>

<span data-ttu-id="81689-205">Hello seguente codice mostra come delle regole di autorizzazione tooadd per una coda.</span><span class="sxs-lookup"><span data-stu-id="81689-205">hello following code shows how tooadd authorization rules for a queue.</span></span>

```csharp
// Create an instance of NamespaceManager for hello operation
NamespaceManager nsm = NamespaceManager.CreateFromConnectionString(
    <connectionString> );
QueueDescription qd = new QueueDescription( <qPath> );

// Create a rule with send rights with keyName as "contosoQSendKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoSendKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Send }));

// Create a rule with listen rights with keyName as "contosoQListenKey"
// and add it toohello queue description.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQListenKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] { AccessRights.Listen }));

// Create a rule with manage rights with keyName as "contosoQManageKey"
// and add it toohello queue description.
// A rule with manage rights must also have send and receive rights.
qd.Authorization.Add(new SharedAccessAuthorizationRule("contosoQManageKey",
    SharedAccessAuthorizationRule.GenerateRandomKey(),
    new[] {AccessRights.Manage, AccessRights.Listen, AccessRights.Send }));

// Create hello queue.
nsm.CreateQueue(qd);
```

## <a name="use-shared-access-signature-authorization"></a><span data-ttu-id="81689-206">Usare l'autorizzazione con firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="81689-206">Use Shared Access Signature authorization</span></span>

<span data-ttu-id="81689-207">Applicazioni che usano hello Azure .NET SDK con le librerie .NET di Service Bus hello possono utilizzare l'autorizzazione di firma di accesso condiviso tramite hello [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) classe.</span><span class="sxs-lookup"><span data-stu-id="81689-207">Applications using hello Azure .NET SDK with hello Service Bus .NET libraries can use SAS authorization through hello [SharedAccessSignatureTokenProvider](/dotnet/api/microsoft.servicebus.sharedaccesssignaturetokenprovider) class.</span></span> <span data-ttu-id="81689-208">Hello codice riportato di seguito viene illustrato hello utilizzo della coda del Bus di servizio tooa toosend messaggi hello provider di token.</span><span class="sxs-lookup"><span data-stu-id="81689-208">hello following code illustrates hello use of hello token provider toosend messages tooa Service Bus queue.</span></span>

```csharp
Uri runtimeUri = ServiceBusEnvironment.CreateServiceUri("sb",
    <yourServiceNamespace>, string.Empty);
MessagingFactory mf = MessagingFactory.Create(runtimeUri,
    TokenProvider.CreateSharedAccessSignatureTokenProvider(keyName, key));
QueueClient sendClient = mf.CreateQueueClient(qPath);

//Sending hello message tooqueue.
BrokeredMessage helloMessage = new BrokeredMessage("Hello, Service Bus!");
helloMessage.MessageId = "SAS-Sample-Message";
sendClient.Send(helloMessage);
```

<span data-ttu-id="81689-209">Le applicazioni possono anche usare la firma di accesso condiviso per l'autenticazione usando una stringa di connessione della firma di accesso condiviso nei metodi che accettano stringhe di connessione.</span><span class="sxs-lookup"><span data-stu-id="81689-209">Applications can also use SAS for authentication by using a SAS connection string in methods that accept connection strings.</span></span>

<span data-ttu-id="81689-210">Si noti che autorizzazione SAS toouse con inoltri del Bus di servizio, è possibile usare le chiavi di firma di accesso condiviso configurate nello spazio dei nomi Service Bus hello.</span><span class="sxs-lookup"><span data-stu-id="81689-210">Note that toouse SAS authorization with Service Bus relays, you can use SAS keys configured on hello Service Bus namespace.</span></span> <span data-ttu-id="81689-211">Se si crea in modo esplicito un inoltro nello spazio dei nomi hello ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) con un [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) dell'oggetto, è possibile impostare regole di firma di accesso condiviso hello solo per tale inoltro.</span><span class="sxs-lookup"><span data-stu-id="81689-211">If you explicitly create a relay on hello namespace ([NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) with a [RelayDescription](/dotnet/api/microsoft.servicebus.messaging.relaydescription)) object, you can set hello SAS rules just for that relay.</span></span> <span data-ttu-id="81689-212">autorizzazione di firma di accesso condiviso toouse con le sottoscrizioni del Bus di servizio, è possibile utilizzare le chiavi di firma di accesso condiviso configurate in uno spazio dei nomi del Bus di servizio o in un argomento.</span><span class="sxs-lookup"><span data-stu-id="81689-212">toouse SAS authorization with Service Bus subscriptions, you can use SAS keys configured on a Service Bus namespace or on a topic.</span></span>

## <a name="use-hello-shared-access-signature-at-http-level"></a><span data-ttu-id="81689-213">Utilizzare la firma di accesso condiviso hello (a livello HTTP)</span><span class="sxs-lookup"><span data-stu-id="81689-213">Use hello Shared Access Signature (at HTTP level)</span></span>

<span data-ttu-id="81689-214">Ora che è stato appreso come toocreate firme di accesso condiviso per qualsiasi entità nel Bus di servizio, si è pronti a tooperform un POST HTTP:</span><span class="sxs-lookup"><span data-stu-id="81689-214">Now that you know how toocreate Shared Access Signatures for any entities in Service Bus, you are ready tooperform an HTTP POST:</span></span>

```http
POST https://<yournamespace>.servicebus.windows.net/<yourentity>/messages
Content-Type: application/json
Authorization: SharedAccessSignature sr=https%3A%2F%2F<yournamespace>.servicebus.windows.net%2F<yourentity>&sig=<yoursignature from code above>&se=1438205742&skn=KeyName
ContentType: application/atom+xml;type=entry;charset=utf-8
``` 

<span data-ttu-id="81689-215">Questa procedura funziona per ogni elemento.</span><span class="sxs-lookup"><span data-stu-id="81689-215">Remember, this works for everything.</span></span> <span data-ttu-id="81689-216">È possibile creare una firma di accesso condiviso per una coda, un argomento o una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="81689-216">You can create SAS for a queue, topic, or subscription.</span></span> 

<span data-ttu-id="81689-217">Se fornire un token di firma di accesso condiviso a un mittente o client, che non dispongono di chiave hello direttamente e non è possibile invertire tooobtain hash hello è.</span><span class="sxs-lookup"><span data-stu-id="81689-217">If you give a sender or client a SAS token, they don't have hello key directly, and they cannot reverse hello hash tooobtain it.</span></span> <span data-ttu-id="81689-218">Di conseguenza, è necessario controllare a cosa possono accedere e per quanto tempo.</span><span class="sxs-lookup"><span data-stu-id="81689-218">As such, you have control over what they can access, and for how long.</span></span> <span data-ttu-id="81689-219">Tooremember una cosa importante è che se si modifica una chiave primaria di hello nei criteri di hello, le firme di accesso condiviso creato da esso verranno invalidate.</span><span class="sxs-lookup"><span data-stu-id="81689-219">An important thing tooremember is that if you change hello primary key in hello policy, any Shared Access Signatures created from it will be invalidated.</span></span>

## <a name="use-hello-shared-access-signature-at-amqp-level"></a><span data-ttu-id="81689-220">Utilizzare la firma di accesso condiviso hello (a livello AMQP)</span><span class="sxs-lookup"><span data-stu-id="81689-220">Use hello Shared Access Signature (at AMQP level)</span></span>

<span data-ttu-id="81689-221">Nella sezione precedente hello, si è visto come toouse hello token di firma di accesso condiviso con una richiesta HTTP POST per l'invio di dati toohello Bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="81689-221">In hello previous section, you saw how toouse hello SAS token with an HTTP POST request for sending data toohello Service Bus.</span></span> <span data-ttu-id="81689-222">Come è noto, è possibile accedere a Bus di servizio utilizzando hello Advanced Message Queuing Protocol (AMQP) che è toouse protocollo hello preferito per motivi di prestazioni, in molti scenari.</span><span class="sxs-lookup"><span data-stu-id="81689-222">As you know, you can access Service Bus using hello Advanced Message Queuing Protocol (AMQP) that is hello preferred protocol toouse for performance reasons, in many scenarios.</span></span> <span data-ttu-id="81689-223">utilizzo dei token di firma di accesso condiviso con AMQP Hello è descritto nel documento hello [AMQP Claim-Based sicurezza versione 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) ovvero in bozza di lavoro poiché 2013 ma ben supportata da Azure oggi.</span><span class="sxs-lookup"><span data-stu-id="81689-223">hello SAS token usage with AMQP is described in hello document [AMQP Claim-Based Security Version 1.0](https://www.oasis-open.org/committees/download.php/50506/amqp-cbs-v1%200-wd02%202013-08-12.doc) that is in working draft since 2013 but well-supported by Azure today.</span></span>

<span data-ttu-id="81689-224">Prima di iniziare toosend dati tooService Bus, server di pubblicazione hello deve inviare il token SAS hello all'interno di un AMQP messaggio tooa ben definito AMQP nodo denominato **$cbs** (è possibile visualizzarlo come "speciale" coda utilizzata da tooacquire servizio hello e convalidare tutte token di firma di accesso condiviso Hello).</span><span class="sxs-lookup"><span data-stu-id="81689-224">Before starting toosend data tooService Bus, hello publisher must send hello SAS token inside an AMQP message tooa well-defined AMQP node named **$cbs** (you can see it as a "special" queue used by hello service tooacquire and validate all hello SAS tokens).</span></span> <span data-ttu-id="81689-225">server di pubblicazione Hello deve specificare hello **ReplyTo** campo all'interno del messaggio AMQP hello; questo è il nodo hello in cui hello servizio risponde publisher toohello con risultato hello hello di convalida di token (un semplice modello richiesta/risposta tra server di pubblicazione e servizio).</span><span class="sxs-lookup"><span data-stu-id="81689-225">hello publisher must specify hello **ReplyTo** field inside hello AMQP message; this is hello node in which hello service replies toohello publisher with hello result of hello token validation (a simple request/reply pattern between publisher and service).</span></span> <span data-ttu-id="81689-226">Viene creato questo nodo di risposta "on hello immediatamente," generale "creazione dinamica del nodo remoto", come descritto dalla specifica hello AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="81689-226">This reply node is created "on hello fly," speaking about "dynamic creation of remote node" as described by hello AMQP 1.0 specification.</span></span> <span data-ttu-id="81689-227">Dopo aver controllato che il token di firma di accesso condiviso hello è valido, publisher hello può andare avanti e avviare il servizio di toohello toosend dati.</span><span class="sxs-lookup"><span data-stu-id="81689-227">After checking that hello SAS token is valid, hello publisher can go forward and start toosend data toohello service.</span></span>

<span data-ttu-id="81689-228">Hello passaggi seguenti viene illustrato come toosend hello token di firma di accesso condiviso con il protocollo AMQP utilizzando hello [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) libreria.</span><span class="sxs-lookup"><span data-stu-id="81689-228">hello following steps show how toosend hello SAS token with AMQP protocol using hello [AMQP.Net Lite](https://github.com/Azure/amqpnetlite) library.</span></span> <span data-ttu-id="81689-229">Ciò è utile se non è possibile utilizzare ufficiale hello Service Bus SDK (ad esempio su WinRT, .net Compact Framework, .net Framework Micro e Mono) lo sviluppo in C\#.</span><span class="sxs-lookup"><span data-stu-id="81689-229">This is useful if you can't use hello official Service Bus SDK (for example on WinRT, .Net Compact Framework, .Net Micro Framework and Mono) developing in C\#.</span></span> <span data-ttu-id="81689-230">Questa libreria è certamente utile toohelp la comprensione della sicurezza basata sulle attestazioni come opera a livello AMQP hello, come visto come funziona a livello di hello HTTP (con un HTTP POST di richiesta e hello SAS token hello inviati all'interno di intestazione "Authorization").</span><span class="sxs-lookup"><span data-stu-id="81689-230">Of course, this library is useful toohelp understand how claims-based security works at hello AMQP level, as you saw how it works at hello HTTP level (with an HTTP POST request and hello SAS token sent inside hello "Authorization" header).</span></span> <span data-ttu-id="81689-231">Se non sono necessarie tali informazioni complete sui AMQP, è possibile utilizzare ufficiale hello Service Bus SDK con .net per applicazioni di Framework, che eseguiranno automaticamente.</span><span class="sxs-lookup"><span data-stu-id="81689-231">If you don't need such deep knowledge about AMQP, you can use hello official Service Bus SDK with .Net Framework applications, which will do it for you.</span></span>

### <a name="c35"></a><span data-ttu-id="81689-232">C&#35;</span><span class="sxs-lookup"><span data-stu-id="81689-232">C&#35;</span></span>

```csharp
/// <summary>
/// Send claim-based security (CBS) token
/// </summary>
/// <param name="shareAccessSignature">Shared access signature (token) toosend</param>
private bool PutCbsToken(Connection connection, string sasToken)
{
    bool result = true;
    Session session = new Session(connection);

    string cbsClientAddress = "cbs-client-reply-to";
    var cbsSender = new SenderLink(session, "cbs-sender", "$cbs");
    var cbsReceiver = new ReceiverLink(session, cbsClientAddress, "$cbs");

    // construct hello put-token message
    var request = new Message(sasToken);
    request.Properties = new Properties();
    request.Properties.MessageId = Guid.NewGuid().ToString();
    request.Properties.ReplyTo = cbsClientAddress;
    request.ApplicationProperties = new ApplicationProperties();
    request.ApplicationProperties["operation"] = "put-token";
    request.ApplicationProperties["type"] = "servicebus.windows.net:sastoken";
    request.ApplicationProperties["name"] = Fx.Format("amqp://{0}/{1}", sbNamespace, entity);
    cbsSender.Send(request);

    // receive hello response
    var response = cbsReceiver.Receive();
    if (response == null || response.Properties == null || response.ApplicationProperties == null)
    {
        result = false;
    }
    else
    {
        int statusCode = (int)response.ApplicationProperties["status-code"];
        if (statusCode != (int)HttpStatusCode.Accepted && statusCode != (int)HttpStatusCode.OK)
        {
            result = false;
        }
    }

    // hello sender/receiver may be kept open for refreshing tokens
    cbsSender.Close();
    cbsReceiver.Close();
    session.Close();

    return result;
}
```

<span data-ttu-id="81689-233">Hello `PutCbsToken()` metodo riceve hello *connessione* (istanza della classe connessione AMQP fornito da hello [AMQP .NET Lite libreria](https://github.com/Azure/amqpnetlite)) che rappresenta il servizio toohello di connessioni TCP hello e hello *sasToken* parametro hello toosend di token SAS.</span><span class="sxs-lookup"><span data-stu-id="81689-233">hello `PutCbsToken()` method receives hello *connection* (AMQP connection class instance as provided by hello [AMQP .NET Lite library](https://github.com/Azure/amqpnetlite)) that represents hello TCP connection toohello service and hello *sasToken* parameter that is hello SAS token toosend.</span></span> 

> [!NOTE]
> <span data-ttu-id="81689-234">È importante che la connessione hello viene creata con **tooEXTERNAL di impostare il meccanismo di autenticazione SASL** (e non hello normale predefinito con nome utente e password utilizzata quando non è necessario alcun token di firma di accesso condiviso hello toosend).</span><span class="sxs-lookup"><span data-stu-id="81689-234">It's important that hello connection is created with **SASL authentication mechanism set tooEXTERNAL** (and not hello default PLAIN with username and password used when you don't need toosend hello SAS token).</span></span>
> 
> 

<span data-ttu-id="81689-235">Successivamente, server di pubblicazione hello crea due collegamenti AMQP per inviare il token di firma di accesso condiviso hello e ricevere risposta hello (risultato di convalida del token hello) dal servizio hello.</span><span class="sxs-lookup"><span data-stu-id="81689-235">Next, hello publisher creates two AMQP links for sending hello SAS token and receiving hello reply (hello token validation result) from hello service.</span></span>

<span data-ttu-id="81689-236">messaggio AMQP contiene un set di proprietà e altre informazioni oltre un semplice messaggio.</span><span class="sxs-lookup"><span data-stu-id="81689-236">hello AMQP message contains a set of properties, and more information than a simple message.</span></span> <span data-ttu-id="81689-237">token SAS Hello è il corpo di hello del messaggio (tramite il relativo costruttore).</span><span class="sxs-lookup"><span data-stu-id="81689-237">hello SAS token is hello body of hello message (using its constructor).</span></span> <span data-ttu-id="81689-238">Hello **"ReplyTo"** toohello nome del nodo per la ricezione dei risultati di convalida hello sul collegamento di ricevitore hello (è possibile modificarne il nome se si desidera, e verrà creato in modo dinamico dal servizio hello) è impostata.</span><span class="sxs-lookup"><span data-stu-id="81689-238">hello **"ReplyTo"** property is set toohello node name for receiving hello validation result on hello receiver link (you can change its name if you want, and it will be created dynamically by hello service).</span></span> <span data-ttu-id="81689-239">Hello ultime tre applicazioni/personalizzato vengono utilizzate da hello servizio tooindicate il tipo di operazione ha tooexecute.</span><span class="sxs-lookup"><span data-stu-id="81689-239">hello last three application/custom properties are used by hello service tooindicate what kind of operation it has tooexecute.</span></span> <span data-ttu-id="81689-240">Come descritto dalla bozza di specifica CBS hello, devono essere hello **nome operazione** ("put-token"), hello **tipo di token** (in questo caso, un "servicebus.windows.net:sastoken"), hello e **" nome"gruppo di destinatari hello** token hello toowhich Applica (entità intera hello).</span><span class="sxs-lookup"><span data-stu-id="81689-240">As described by hello CBS draft specification, they must be hello **operation name** ("put-token"), hello **type of token** (in this case, a "servicebus.windows.net:sastoken"), and hello **"name" of hello audience** toowhich hello token applies (hello entire entity).</span></span>

<span data-ttu-id="81689-241">Dopo l'invio dei token SAS hello sul collegamento mittente hello, server di pubblicazione hello deve leggere risposta hello sul collegamento ricevitore hello.</span><span class="sxs-lookup"><span data-stu-id="81689-241">After sending hello SAS token on hello sender link, hello publisher must read hello reply on hello receiver link.</span></span> <span data-ttu-id="81689-242">risposta di Hello è un semplice messaggio AMQP con una proprietà dell'applicazione denominata **"codice di stato"** che può contenere hello uguali i valori come un codice di stato HTTP.</span><span class="sxs-lookup"><span data-stu-id="81689-242">hello reply is a simple AMQP message with an application property named **"status-code"** that can contain hello same values as an HTTP status code.</span></span>

## <a name="rights-required-for-service-bus-operations"></a><span data-ttu-id="81689-243">Diritti necessari per le operazioni del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="81689-243">Rights required for Service Bus operations</span></span>

<span data-ttu-id="81689-244">Hello nella tabella seguente mostra i diritti di accesso hello necessari per diverse operazioni sulle risorse Bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="81689-244">hello following table shows hello access rights required for various operations on Service Bus resources.</span></span>

| <span data-ttu-id="81689-245">Operazione</span><span class="sxs-lookup"><span data-stu-id="81689-245">Operation</span></span> | <span data-ttu-id="81689-246">Attestazione necessaria</span><span class="sxs-lookup"><span data-stu-id="81689-246">Claim Required</span></span> | <span data-ttu-id="81689-247">Ambito attestazione</span><span class="sxs-lookup"><span data-stu-id="81689-247">Claim Scope</span></span> |
| --- | --- | --- |
| <span data-ttu-id="81689-248">**Spazio dei nomi**</span><span class="sxs-lookup"><span data-stu-id="81689-248">**Namespace**</span></span> | | |
| <span data-ttu-id="81689-249">Configurare le regole di autorizzazione relative a uno spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-249">Configure authorization rule on a namespace</span></span> |<span data-ttu-id="81689-250">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-250">Manage</span></span> |<span data-ttu-id="81689-251">Qualsiasi indirizzo dello spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-251">Any namespace address</span></span> |
| <span data-ttu-id="81689-252">**Registro di sistema del servizio**</span><span class="sxs-lookup"><span data-stu-id="81689-252">**Service Registry**</span></span> | | |
| <span data-ttu-id="81689-253">Enumerare i criteri privati</span><span class="sxs-lookup"><span data-stu-id="81689-253">Enumerate Private Policies</span></span> |<span data-ttu-id="81689-254">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-254">Manage</span></span> |<span data-ttu-id="81689-255">Qualsiasi indirizzo dello spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-255">Any namespace address</span></span> |
| <span data-ttu-id="81689-256">Iniziare l'attesa su uno spazio dei nomi del servizio</span><span class="sxs-lookup"><span data-stu-id="81689-256">Begin listening on a namespace</span></span> |<span data-ttu-id="81689-257">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-257">Listen</span></span> |<span data-ttu-id="81689-258">Qualsiasi indirizzo dello spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-258">Any namespace address</span></span> |
| <span data-ttu-id="81689-259">Inviare listener tooa messaggi a uno spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-259">Send messages tooa listener at a namespace</span></span> |<span data-ttu-id="81689-260">Invio</span><span class="sxs-lookup"><span data-stu-id="81689-260">Send</span></span> |<span data-ttu-id="81689-261">Qualsiasi indirizzo dello spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-261">Any namespace address</span></span> |
| <span data-ttu-id="81689-262">**Coda**</span><span class="sxs-lookup"><span data-stu-id="81689-262">**Queue**</span></span> | | |
| <span data-ttu-id="81689-263">Creare una coda</span><span class="sxs-lookup"><span data-stu-id="81689-263">Create a queue</span></span> |<span data-ttu-id="81689-264">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-264">Manage</span></span> |<span data-ttu-id="81689-265">Qualsiasi indirizzo dello spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-265">Any namespace address</span></span> |
| <span data-ttu-id="81689-266">Eliminare una coda</span><span class="sxs-lookup"><span data-stu-id="81689-266">Delete a queue</span></span> |<span data-ttu-id="81689-267">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-267">Manage</span></span> |<span data-ttu-id="81689-268">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-268">Any valid queue address</span></span> |
| <span data-ttu-id="81689-269">Enumerare le code</span><span class="sxs-lookup"><span data-stu-id="81689-269">Enumerate queues</span></span> |<span data-ttu-id="81689-270">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-270">Manage</span></span> |<span data-ttu-id="81689-271">/$Resources/Queues</span><span class="sxs-lookup"><span data-stu-id="81689-271">/$Resources/Queues</span></span> |
| <span data-ttu-id="81689-272">Ottenere una descrizione della coda hello</span><span class="sxs-lookup"><span data-stu-id="81689-272">Get hello queue description</span></span> |<span data-ttu-id="81689-273">Gestisci</span><span class="sxs-lookup"><span data-stu-id="81689-273">Manage</span></span> |<span data-ttu-id="81689-274">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-274">Any valid queue address</span></span> |
| <span data-ttu-id="81689-275">Configurare le regole di autorizzazione per una coda</span><span class="sxs-lookup"><span data-stu-id="81689-275">Configure authorization rule for a queue</span></span> |<span data-ttu-id="81689-276">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-276">Manage</span></span> |<span data-ttu-id="81689-277">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-277">Any valid queue address</span></span> |
| <span data-ttu-id="81689-278">Inviare in coda toohello</span><span class="sxs-lookup"><span data-stu-id="81689-278">Send into toohello queue</span></span> |<span data-ttu-id="81689-279">Invio</span><span class="sxs-lookup"><span data-stu-id="81689-279">Send</span></span> |<span data-ttu-id="81689-280">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-280">Any valid queue address</span></span> |
| <span data-ttu-id="81689-281">Ricevere messaggi da una coda</span><span class="sxs-lookup"><span data-stu-id="81689-281">Receive messages from a queue</span></span> |<span data-ttu-id="81689-282">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-282">Listen</span></span> |<span data-ttu-id="81689-283">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-283">Any valid queue address</span></span> |
| <span data-ttu-id="81689-284">Abbandonare o completare messaggi dopo la ricezione di messaggi hello in modalità di blocco di visualizzazione</span><span class="sxs-lookup"><span data-stu-id="81689-284">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="81689-285">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-285">Listen</span></span> |<span data-ttu-id="81689-286">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-286">Any valid queue address</span></span> |
| <span data-ttu-id="81689-287">Rinviare un messaggio per il successivo recupero</span><span class="sxs-lookup"><span data-stu-id="81689-287">Defer a message for later retrieval</span></span> |<span data-ttu-id="81689-288">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-288">Listen</span></span> |<span data-ttu-id="81689-289">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-289">Any valid queue address</span></span> |
| <span data-ttu-id="81689-290">Spostare un messaggio nella coda dei messaggi non recapitabili</span><span class="sxs-lookup"><span data-stu-id="81689-290">Deadletter a message</span></span> |<span data-ttu-id="81689-291">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-291">Listen</span></span> |<span data-ttu-id="81689-292">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-292">Any valid queue address</span></span> |
| <span data-ttu-id="81689-293">Ottenere lo stato di hello associato a una sessione di coda di messaggi</span><span class="sxs-lookup"><span data-stu-id="81689-293">Get hello state associated with a message queue session</span></span> |<span data-ttu-id="81689-294">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-294">Listen</span></span> |<span data-ttu-id="81689-295">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-295">Any valid queue address</span></span> |
| <span data-ttu-id="81689-296">Imposta stato di hello associato a una sessione di coda di messaggi</span><span class="sxs-lookup"><span data-stu-id="81689-296">Set hello state associated with a message queue session</span></span> |<span data-ttu-id="81689-297">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-297">Listen</span></span> |<span data-ttu-id="81689-298">Qualsiasi indirizzo valido della coda</span><span class="sxs-lookup"><span data-stu-id="81689-298">Any valid queue address</span></span> |
| <span data-ttu-id="81689-299">**Argomento**</span><span class="sxs-lookup"><span data-stu-id="81689-299">**Topic**</span></span> | | |
| <span data-ttu-id="81689-300">Creare un argomento</span><span class="sxs-lookup"><span data-stu-id="81689-300">Create a topic</span></span> |<span data-ttu-id="81689-301">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-301">Manage</span></span> |<span data-ttu-id="81689-302">Qualsiasi indirizzo dello spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-302">Any namespace address</span></span> |
| <span data-ttu-id="81689-303">Eliminare un argomento</span><span class="sxs-lookup"><span data-stu-id="81689-303">Delete a topic</span></span> |<span data-ttu-id="81689-304">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-304">Manage</span></span> |<span data-ttu-id="81689-305">Qualsiasi indirizzo valido dell'argomento</span><span class="sxs-lookup"><span data-stu-id="81689-305">Any valid topic address</span></span> |
| <span data-ttu-id="81689-306">Enumerare gli argomenti</span><span class="sxs-lookup"><span data-stu-id="81689-306">Enumerate topics</span></span> |<span data-ttu-id="81689-307">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-307">Manage</span></span> |<span data-ttu-id="81689-308">/$Resources/Topics</span><span class="sxs-lookup"><span data-stu-id="81689-308">/$Resources/Topics</span></span> |
| <span data-ttu-id="81689-309">Ottenere una descrizione dell'argomento hello</span><span class="sxs-lookup"><span data-stu-id="81689-309">Get hello topic description</span></span> |<span data-ttu-id="81689-310">Gestisci</span><span class="sxs-lookup"><span data-stu-id="81689-310">Manage</span></span> |<span data-ttu-id="81689-311">Qualsiasi indirizzo valido dell'argomento</span><span class="sxs-lookup"><span data-stu-id="81689-311">Any valid topic address</span></span> |
| <span data-ttu-id="81689-312">Configurare le regole di autorizzazione per un argomento</span><span class="sxs-lookup"><span data-stu-id="81689-312">Configure authorization rule for a topic</span></span> |<span data-ttu-id="81689-313">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-313">Manage</span></span> |<span data-ttu-id="81689-314">Qualsiasi indirizzo valido dell'argomento</span><span class="sxs-lookup"><span data-stu-id="81689-314">Any valid topic address</span></span> |
| <span data-ttu-id="81689-315">Inviare l'argomento toohello</span><span class="sxs-lookup"><span data-stu-id="81689-315">Send toohello topic</span></span> |<span data-ttu-id="81689-316">Invio</span><span class="sxs-lookup"><span data-stu-id="81689-316">Send</span></span> |<span data-ttu-id="81689-317">Qualsiasi indirizzo valido dell'argomento</span><span class="sxs-lookup"><span data-stu-id="81689-317">Any valid topic address</span></span> |
| <span data-ttu-id="81689-318">**Sottoscrizione**</span><span class="sxs-lookup"><span data-stu-id="81689-318">**Subscription**</span></span> | | |
| <span data-ttu-id="81689-319">Creare una sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="81689-319">Create a subscription</span></span> |<span data-ttu-id="81689-320">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-320">Manage</span></span> |<span data-ttu-id="81689-321">Qualsiasi indirizzo dello spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="81689-321">Any namespace address</span></span> |
| <span data-ttu-id="81689-322">Eliminare una sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="81689-322">Delete subscription</span></span> |<span data-ttu-id="81689-323">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-323">Manage</span></span> |<span data-ttu-id="81689-324">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="81689-324">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="81689-325">Enumerare le sottoscrizioni</span><span class="sxs-lookup"><span data-stu-id="81689-325">Enumerate subscriptions</span></span> |<span data-ttu-id="81689-326">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-326">Manage</span></span> |<span data-ttu-id="81689-327">../myTopic/Subscriptions</span><span class="sxs-lookup"><span data-stu-id="81689-327">../myTopic/Subscriptions</span></span> |
| <span data-ttu-id="81689-328">Ottenere la descrizione di una sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="81689-328">Get subscription description</span></span> |<span data-ttu-id="81689-329">Gestire</span><span class="sxs-lookup"><span data-stu-id="81689-329">Manage</span></span> |<span data-ttu-id="81689-330">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="81689-330">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="81689-331">Abbandonare o completare messaggi dopo la ricezione di messaggi hello in modalità di blocco di visualizzazione</span><span class="sxs-lookup"><span data-stu-id="81689-331">Abandon or complete messages after receiving hello message in peek-lock mode</span></span> |<span data-ttu-id="81689-332">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-332">Listen</span></span> |<span data-ttu-id="81689-333">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="81689-333">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="81689-334">Rinviare un messaggio per il successivo recupero</span><span class="sxs-lookup"><span data-stu-id="81689-334">Defer a message for later retrieval</span></span> |<span data-ttu-id="81689-335">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-335">Listen</span></span> |<span data-ttu-id="81689-336">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="81689-336">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="81689-337">Spostare un messaggio nella coda dei messaggi non recapitabili</span><span class="sxs-lookup"><span data-stu-id="81689-337">Deadletter a message</span></span> |<span data-ttu-id="81689-338">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-338">Listen</span></span> |<span data-ttu-id="81689-339">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="81689-339">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="81689-340">Ottenere lo stato di hello associato a una sessione dell'argomento</span><span class="sxs-lookup"><span data-stu-id="81689-340">Get hello state associated with a topic session</span></span> |<span data-ttu-id="81689-341">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-341">Listen</span></span> |<span data-ttu-id="81689-342">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="81689-342">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="81689-343">Stato di hello set associato a una sessione dell'argomento</span><span class="sxs-lookup"><span data-stu-id="81689-343">Set hello state associated with a topic session</span></span> |<span data-ttu-id="81689-344">Attesa</span><span class="sxs-lookup"><span data-stu-id="81689-344">Listen</span></span> |<span data-ttu-id="81689-345">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="81689-345">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="81689-346">**Regole**</span><span class="sxs-lookup"><span data-stu-id="81689-346">**Rules**</span></span> | | |
| <span data-ttu-id="81689-347">Creare una regola</span><span class="sxs-lookup"><span data-stu-id="81689-347">Create a rule</span></span> |<span data-ttu-id="81689-348">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-348">Manage</span></span> |<span data-ttu-id="81689-349">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="81689-349">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="81689-350">Eliminare una regola</span><span class="sxs-lookup"><span data-stu-id="81689-350">Delete a rule</span></span> |<span data-ttu-id="81689-351">Manage</span><span class="sxs-lookup"><span data-stu-id="81689-351">Manage</span></span> |<span data-ttu-id="81689-352">../myTopic/Subscriptions/mySubscription</span><span class="sxs-lookup"><span data-stu-id="81689-352">../myTopic/Subscriptions/mySubscription</span></span> |
| <span data-ttu-id="81689-353">Enumerare le regole</span><span class="sxs-lookup"><span data-stu-id="81689-353">Enumerate rules</span></span> |<span data-ttu-id="81689-354">Manage o Listen</span><span class="sxs-lookup"><span data-stu-id="81689-354">Manage or Listen</span></span> |<span data-ttu-id="81689-355">../myTopic/Subscriptions/mySubscription/Rules</span><span class="sxs-lookup"><span data-stu-id="81689-355">../myTopic/Subscriptions/mySubscription/Rules</span></span> 

## <a name="next-steps"></a><span data-ttu-id="81689-356">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="81689-356">Next steps</span></span>

<span data-ttu-id="81689-357">toolearn più sulla messaggistica del Bus di servizio, vedere hello seguenti argomenti.</span><span class="sxs-lookup"><span data-stu-id="81689-357">toolearn more about Service Bus messaging, see hello following topics.</span></span>

* [<span data-ttu-id="81689-358">Dati fondamentali del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="81689-358">Service Bus fundamentals</span></span>](service-bus-fundamentals-hybrid-solutions.md)
* [<span data-ttu-id="81689-359">Code, argomenti e sottoscrizioni del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="81689-359">Service Bus queues, topics, and subscriptions</span></span>](service-bus-queues-topics-subscriptions.md)
* [<span data-ttu-id="81689-360">Come le code del Bus di servizio toouse</span><span class="sxs-lookup"><span data-stu-id="81689-360">How toouse Service Bus queues</span></span>](service-bus-dotnet-get-started-with-queues.md)
* [<span data-ttu-id="81689-361">Il Bus di servizio toouse argomenti e sottoscrizioni</span><span class="sxs-lookup"><span data-stu-id="81689-361">How toouse Service Bus topics and subscriptions</span></span>](service-bus-dotnet-how-to-use-topics-subscriptions.md)

[Azure portal]: https://portal.azure.com