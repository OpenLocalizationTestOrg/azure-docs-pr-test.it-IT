---
title: Database SQL - Ottimizzazione automatica | Microsoft Docs
description: Il database SQL analizza le query SQL e si adatta automaticamente al carico di lavoro dell'utente.
services: sql-database
documentationcenter: 
author: jovanpop-msft
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/05/2017
ms.author: jovanpop
ms.openlocfilehash: f5552793db2d89542782b7d9e8f996314f62e429
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="automatic-tuning"></a><span data-ttu-id="1fb6b-103">Ottimizzazione automatica</span><span class="sxs-lookup"><span data-stu-id="1fb6b-103">Automatic tuning</span></span>

<span data-ttu-id="1fb6b-104">Il database SQL di Azure è un servizio dati completamente gestito che consente di monitorare le query eseguite sul database e di migliorare automaticamente le prestazioni del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-104">Azure SQL Database is a fully managed data service that monitors the queries that are executed on the database and can automatically improve performance of the workload.</span></span> <span data-ttu-id="1fb6b-105">Il database SQL di Azure include un meccanismo di intelligence incorporato che consente di ottimizzare automaticamente le query e migliorarne le prestazioni, adattando in modo dinamico il database al carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-105">Azure SQL Database has a built-in intelligence mechanism that can automatically tune and improve performance of your queries by dynamically adapting the database to your workload.</span></span> <span data-ttu-id="1fb6b-106">L'ottimizzazione automatica nel database SQL di Azure può essere una delle funzionalità più importanti che è possibile abilitare nel database SQL di Azure per ottimizzare le prestazioni delle query.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-106">Automatic tuning in Azure SQL Database might be one of the most important features that you can enable on Azure SQL Database to optimize performance of your queries.</span></span>

<span data-ttu-id="1fb6b-107">Vedere questo articolo che descrive la procedura per [abilitare l'ottimizzazione automatica](sql-database-automatic-tuning-enable.md) tramite il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-107">See this article for the steps to [enable automatic tuning](sql-database-automatic-tuning-enable.md) using the Azure portal.</span></span>

## <a name="why-automatic-tuning"></a><span data-ttu-id="1fb6b-108">Perché optare per l'ottimizzazione automatica?</span><span class="sxs-lookup"><span data-stu-id="1fb6b-108">Why automatic tuning?</span></span>

<span data-ttu-id="1fb6b-109">Una delle attività principali per l'amministrazione classica dei database è il monitoraggio del carico di lavoro, per identificare le query SQL critiche, gli indici che devono essere aggiunti per migliorare le prestazioni e gli indici usati raramente.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-109">One of the main tasks in classic database administration is monitoring the workload, identifying critical SQL queries, indexes that should be added to improve performance, and rarely used indexes.</span></span> <span data-ttu-id="1fb6b-110">Il database SQL di Azure offre informazioni dettagliate per le query e gli indici che occorre monitorare.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-110">Azure SQL Database provides detailed insight into the queries and indexes that you need to monitor.</span></span> <span data-ttu-id="1fb6b-111">Il monitoraggio costante dei database è tuttavia un'attività complessa e tediosa, in particolare quando sono coinvolti molti database.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-111">However, constantly monitoring database is a hard and tedious task, especially when dealing with many databases.</span></span> <span data-ttu-id="1fb6b-112">Potrebbe essere impossibile gestire in modo efficiente un numero enorme di database anche con tutti gli strumenti e i report resi disponibili dal database SQL di Azure e nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-112">Managing a huge number of databases might be impossible to do efficiently even with all available tools and reports that Azure SQL Database and Azure portal provide.</span></span> <span data-ttu-id="1fb6b-113">Invece di gestire manualmente il monitoraggio e l'ottimizzazione del database, è possibile prendere in considerazione la possibilità di delegare alcune delle azioni di monitoraggio e ottimizzazione al database SQL di Azure, tramite la funzionalità di ottimizzazione automatica.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-113">Instead of monitoring and tuning your database manually, you might consider delegating some of the monitoring and tuning actions to Azure SQL Database using automatic tuning feature.</span></span> 


> [!VIDEO https://channel9.msdn.com/Blogs/Azure-in-the-Enterprise/Enabling-Azure-SQL-Database-Auto-Tuning-at-Scale-for-Microsoft-IT/player]
>

## <a name="how-does-automatic-tuning-work"></a><span data-ttu-id="1fb6b-114">Come funziona l'ottimizzazione automatica</span><span class="sxs-lookup"><span data-stu-id="1fb6b-114">How does automatic tuning work?</span></span>

<span data-ttu-id="1fb6b-115">Il database SQL di Azure include un processo di monitoraggio e analisi delle prestazioni continuo che raccoglie costantemente informazioni sulle caratteristiche del carico di lavoro e identifica potenziali problemi e miglioramenti.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-115">Azure SQL Database has a continuous performance monitoring and analysis process that constantly learns about the characteristic of your workload and identify potential issues and improvements.</span></span>

![Processo di ottimizzazione automatica](./media/sql-database-automatic-tuning/tuning-process.png)

<span data-ttu-id="1fb6b-117">Questo processo consente l'adattamento dinamico del database SQL di Azure al carico di lavoro mediante l'individuazione degli indici e dei piani che potrebbero migliorare le prestazioni dei carichi di lavoro e degli indici con effetti sui carichi di lavori.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-117">This process enables Azure SQL Database to dynamically adapt to your workload by finding what indexes and plans might improve performance of your workloads and what indexes affect your workloads.</span></span> <span data-ttu-id="1fb6b-118">In base ai risultati raccolti, l'ottimizzazione automatica applica le azioni di ottimizzazione che consentono di migliorare le prestazioni del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-118">Based on these findings, automatic tuning applies tuning actions that improve performance of your workload.</span></span> <span data-ttu-id="1fb6b-119">Inoltre, il database SQL di Azure esegue un monitoraggio costante delle prestazioni dopo qualsiasi modifica apportata dall'ottimizzazione automatica, per assicurarsi che consenta di migliorare le prestazioni del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-119">In addition, Azure SQL Database continuously monitors performance after any change made by automatic tuning to ensure that it improves performance of your workload.</span></span> <span data-ttu-id="1fb6b-120">Qualsiasi azione che non introduce miglioramenti delle prestazioni viene annullata automaticamente.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-120">Any action that didn’t improve performance is automatically reverted.</span></span> <span data-ttu-id="1fb6b-121">Il processo di verifica è una funzionalità chiave che assicura che qualsiasi modifica apportata dall'ottimizzazione automatica non diminuisca le prestazioni del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-121">This verification process is a key feature that ensures that any change made by automatic tuning does not decrease the performance of your workload.</span></span>

<span data-ttu-id="1fb6b-122">Nel database SQL di Azure sono disponibili due contesti di ottimizzazione automatica:</span><span class="sxs-lookup"><span data-stu-id="1fb6b-122">There are two automatic tuning aspects that are available in Azure SQL Database:</span></span>

 -  <span data-ttu-id="1fb6b-123">**Gestione automatica degli indici** che consente di identificare gli indici da aggiungere al database e quelli che è consigliabile rimuovere.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-123">**Automatic index management** that identifies indexes that should be added in your database, and indexes that should be removed.</span></span>
 -  <span data-ttu-id="1fb6b-124">**Correzione automatica dei piani** (presto disponibile, già presente in SQL Server 2017) che consente di identificare i piani problematici e correggere i problemi di prestazioni dei piani SQL.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-124">**Automatic plan correction** (coming soon, already available in SQL Server 2017) that identifies problematic plans and fixes SQL plan performance problems.</span></span>

## <a name="automatic-index-management"></a><span data-ttu-id="1fb6b-125">Gestione automatica degli indici</span><span class="sxs-lookup"><span data-stu-id="1fb6b-125">Automatic index management</span></span>

<span data-ttu-id="1fb6b-126">Nel database SQL di Azure la gestione degli indici è semplice perché il database SQL di Azure raccoglie informazioni sul carico di lavoro e assicura che i dati vengano indicizzati sempre in modo ottimale.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-126">In Azure SQL Database, index management is easy because Azure SQL Database learns about your workload and ensures that your data is always optimally indexed.</span></span> <span data-ttu-id="1fb6b-127">La progettazione appropriata degli indici è fondamentale per ottenere prestazioni ottimali del carico di lavoro e la gestione automatica degli indici risulta utile per ottimizzare gli indici.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-127">Proper index design is crucial for optimal performance of your workload, and automatic index management can help you optimize your indexes.</span></span> <span data-ttu-id="1fb6b-128">La gestione automatica degli indici consente di correggere i problemi di prestazioni nei database indicizzati in modo non corretto oppure di gestire e migliorare gli indici nello schema del database esistente.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-128">Automatic index management can either fix performance issues in incorrectly indexed databases, or maintain and improve indexes on the existing database schema.</span></span> 

### <a name="why-do-you-need-index-management"></a><span data-ttu-id="1fb6b-129">Utilità della gestione degli indici</span><span class="sxs-lookup"><span data-stu-id="1fb6b-129">Why do you need index management?</span></span>

<span data-ttu-id="1fb6b-130">Gli indici consentono di velocizzare alcune delle query che leggono dati dalle tabelle, ma possono rallentare le query che aggiornano i dati.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-130">Indexes speed up some of your queries that read data from the tables; however, they can slow down the queries that update data.</span></span> <span data-ttu-id="1fb6b-131">È necessario valutare con attenzione quando creare un indice e quali colonne includervi.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-131">You need to carefully analyze when to create an index and what columns you need to include in the index.</span></span> <span data-ttu-id="1fb6b-132">Alcuni indici potrebbero non essere più necessari dopo un certo periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-132">Some indexes might not be needed after some time.</span></span> <span data-ttu-id="1fb6b-133">Per questo motivo, è consigliabile individuare ed eliminare periodicamente gli indici che non portano alcun vantaggio.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-133">Therefore, you would need to periodically identify and drop the indexes that do not bring any benefits.</span></span> <span data-ttu-id="1fb6b-134">Se si ignorano gli indici inutilizzati, le prestazioni delle query di aggiornamento dei dati potrebbero risultare ridotte, senza alcun vantaggio per le query di lettura dei dati.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-134">If you ignore the unused indexes, performance of the queries that update data would be decreased without any benefit on the queries that read data.</span></span> <span data-ttu-id="1fb6b-135">Gli indici inutilizzati influiscono anche sulle prestazioni complessive del sistema perché risultano necessarie operazioni di registrazione superflue per aggiornamenti aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-135">Unused indexes also affect overall performance of the system because additional updates require unnecessary logging.</span></span>

<span data-ttu-id="1fb6b-136">Per individuare il set ottimale di indici che consentono di migliorare le prestazioni delle query di lettura dei dati dalle tabelle con un impatto minimo per gli aggiornamenti, possono essere necessarie operazioni di analisi continue e complesse.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-136">Finding the optimal set of indexes that improve performance of the queries that read data from your tables and have minimal impact on updates might require continuous and complex analysis.</span></span>

<span data-ttu-id="1fb6b-137">Il database SQL di Azure usa i meccanismi di intelligence incorporati e regole avanzate per analizzare le query, identificare gli indici che sarebbero ottimali per i carichi di lavoro correnti e gli indici che potrebbero essere rimossi.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-137">Azure SQL Database uses built-in intelligence and advanced rules that analyze your queries, identify indexes that would be optimal for your current workloads, and the indexes might be removed.</span></span> <span data-ttu-id="1fb6b-138">Il database SQL di Azure assicura di avere a disposizione il set minimo necessario di indici per l'ottimizzazione delle query di lettura dei dati, con un impatto minimo sulle altre query.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-138">Azure SQL Database ensures that you have a minimal necessary set of indexes that optimize the queries that read data, with the minimized impact on the other queries.</span></span>

### <a name="how-to-identify-indexes-that-need-to-be-changed-in-your-database"></a><span data-ttu-id="1fb6b-139">Come identificare gli indici che devono essere modificati nel database</span><span class="sxs-lookup"><span data-stu-id="1fb6b-139">How to identify indexes that need to be changed in your database?</span></span>

<span data-ttu-id="1fb6b-140">Il database SQL di Azure semplifica il processo di gestione degli indici.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-140">Azure SQL Database makes index management process easy.</span></span> <span data-ttu-id="1fb6b-141">In alternativa al processo manuale noioso di analisi del carico di lavoro e di monitoraggio degli indici, il database SQL di Azure consente di analizzare il carico di lavoro, identificare le query che potrebbero essere eseguite più rapidamente con un nuovo indice e identificare gli indici inutilizzati o duplicati.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-141">Instead of the tedious process of manual workload analysis and index monitoring, Azure SQL Database analyzes your workload, identifies the queries that could be executed faster with a new index, and identifies unused or duplicated indexes.</span></span> <span data-ttu-id="1fb6b-142">Per altre informazioni sull'identificazione degli indici che devono essere modificati, vedere [Find index recommendations in Azure portal](sql-database-advisor-portal.md) (Trovare raccomandazioni per gli indici nel portale di Azure).</span><span class="sxs-lookup"><span data-stu-id="1fb6b-142">Find more information about identification of indexes that should be changed at [Find index recommendations in Azure portal](sql-database-advisor-portal.md).</span></span>

### <a name="automatic-index-management-considerations"></a><span data-ttu-id="1fb6b-143">Considerazioni sulla gestione automatica degli indici</span><span class="sxs-lookup"><span data-stu-id="1fb6b-143">Automatic index management considerations</span></span>

<span data-ttu-id="1fb6b-144">Se si appura che le regole predefinite consentono di migliorare le prestazioni del database, è possibile delegare al database SQL di Azure la gestione automatica degli indici.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-144">If you find that the built-in rules improve the performance of your database, you might let Azure SQL database automatically manage your indexes.</span></span>

<span data-ttu-id="1fb6b-145">Le azioni richieste per creare gli indici necessari nei database SQL di Azure potrebbero usare risorse e influire temporaneamente sulle prestazioni del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-145">Actions required to create necessary indexes in Azure SQL Databases might consume resources and temporally affect workload performance.</span></span> <span data-ttu-id="1fb6b-146">Per ridurre al minimo l'impatto della creazione degli indici sulle prestazioni del carico di lavoro, il database SQL di Azure individua la finestra temporale appropriata per qualsiasi operazione di gestione degli indici.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-146">To minimize the impact of index creation on workload performance, Azure SQL Database finds the appropriate time window for any index management operation.</span></span> <span data-ttu-id="1fb6b-147">L'azione di ottimizzazione viene posticipata se il database ha bisogno di risorse per l'esecuzione del carico di lavoro e viene avviata quando per il database è disponibile una quantità di risorse inutilizzate sufficiente per essere usata per l'attività di manutenzione.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-147">Tuning action is postponed if the database needs resources to execute your workload, and started when the database has enough unused resources that can be used for the maintenance task.</span></span> <span data-ttu-id="1fb6b-148">Una funzionalità importante nella gestione automatica degli indici e la verifica delle azioni.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-148">One important feature in automatic index management is a verification of the actions.</span></span> <span data-ttu-id="1fb6b-149">Quando il database SQL di Azure crea o elimina un indice, un processo di monitoraggio analizza le prestazioni del carico di lavoro per verificare che l'azione migliori effettivamente le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-149">When Azure SQL Database creates or drops index, a monitoring process analyzes performance of your workload to verify that the action improved the performance.</span></span> <span data-ttu-id="1fb6b-150">Se non introduce miglioramenti significativi, l'azione viene annullata immediatamente.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-150">If it didn’t bring significant improvement – the action is immediately reverted.</span></span> <span data-ttu-id="1fb6b-151">In questo modo, il database SQL di Azure garantisce che le azioni automatiche non influiscano negativamente sulle prestazioni del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-151">This way, Azure SQL Database ensures that automatic actions do not negatively impact performance of your workload.</span></span> <span data-ttu-id="1fb6b-152">Gli indici creati tramite l'ottimizzazione automatica sono trasparenti per l'operazione di manutenzione sullo schema sottostante.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-152">Indexes created by automatic tuning are transparent for the maintenance operation on the underlying schema.</span></span> <span data-ttu-id="1fb6b-153">Le modifiche dello schema, ad esempio l'eliminazione o ridenominazione delle colonne, non vengono impedite dalla presenza di indici creati automaticamente.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-153">Schema changes such as dropping or renaming columns are not blocked by the presence of automatically created indexes.</span></span> <span data-ttu-id="1fb6b-154">Gli indici creati automaticamente dal database SQL di Azure vengono eliminati immediatamente in seguito all'eliminazione di tabelle o colonne correlate.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-154">Indexes that are automatically created by Azure SQL Database are immediately dropped when related table or columns is dropped.</span></span>

## <a name="automatic-plan-choice-correction"></a><span data-ttu-id="1fb6b-155">Correzione automatica del piano</span><span class="sxs-lookup"><span data-stu-id="1fb6b-155">Automatic plan choice correction</span></span>

<span data-ttu-id="1fb6b-156">La correzione automatica del piano è una nuova funzionalità di ottimizzazione automatica aggiunta in SQL Server 2017 CTP2.0 che identifica i piani SQL con comportamento errato.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-156">Automatic plan correction is a new automatic tuning feature added in SQL Server 2017 CTP2.0 that identifies SQL plans that misbehave.</span></span> <span data-ttu-id="1fb6b-157">Questa opzione di ottimizzazione automatica sarà presto disponibile nel database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-157">This automatic tuning option is coming soon on Azure SQL Database.</span></span> <span data-ttu-id="1fb6b-158">Per altre informazioni, vedere [Ottimizzazione automatica in SQL Server 2017](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span><span class="sxs-lookup"><span data-stu-id="1fb6b-158">Find more information at [Automatic tuning in SQL Server 2017](https://docs.microsoft.com/sql/relational-databases/automatic-tuning/automatic-tuning).</span></span>

## <a name="next-steps"></a><span data-ttu-id="1fb6b-159">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="1fb6b-159">Next steps</span></span>

- <span data-ttu-id="1fb6b-160">Per abilitare l'ottimizzazione automatica nel database SQL di Azure e delegare la gestione completa del carico di lavoro alla funzionalità di ottimizzazione automatica, vedere [Abilitare l'ottimizzazione automatica](sql-database-automatic-tuning-enable.md).</span><span class="sxs-lookup"><span data-stu-id="1fb6b-160">To enable automatic tuning in Azure SQL Database and let automatic tuning feature fully manage your workload, see [Enable automatic tuning](sql-database-automatic-tuning-enable.md).</span></span>
- <span data-ttu-id="1fb6b-161">Per usare l'ottimizzazione manuale, è possibile esaminare le [raccomandazioni per l'ottimizzazione nel portale di Azure](sql-database-advisor-portal.md) e applicare manualmente quelle che consentono di migliorare le prestazioni delle query.</span><span class="sxs-lookup"><span data-stu-id="1fb6b-161">To use manual tuning, you can review [Tuning recommendations in Azure portal](sql-database-advisor-portal.md) and manually apply the ones that improve performance of your queries.</span></span>
