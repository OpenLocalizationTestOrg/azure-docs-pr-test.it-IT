---
title: "libreria di client più recente del database elastico di aaaUpgrade toohello | Documenti Microsoft"
description: Eseguire l'aggiornamento alle applicazioni e librerie mediante Nuget
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 0a546510-76e7-465e-9271-f15ff0cfa959
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: ddove
ms.openlocfilehash: cc2c9179be4c53ca59cd24d832127cf277c6e695
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-an-app-toouse-hello-latest-elastic-database-client-library"></a><span data-ttu-id="b5d49-103">Aggiornare un'app toouse hello più recente database elastico libreria client</span><span class="sxs-lookup"><span data-stu-id="b5d49-103">Upgrade an app toouse hello latest elastic database client library</span></span>
<span data-ttu-id="b5d49-104">Le nuove versioni di hello [libreria client di Database elastico](sql-database-elastic-database-client-library.md) sono disponibili tramite l'interfaccia di gestione NuGetPackage NuGetand hello in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b5d49-104">New versions of hello [Elastic Database client library](sql-database-elastic-database-client-library.md) are  available through NuGetand hello NuGetPackage Manager interface in Visual Studio.</span></span> <span data-ttu-id="b5d49-105">Gli aggiornamenti contengono correzioni di bug e supportano per le nuove funzionalità della libreria client hello.</span><span class="sxs-lookup"><span data-stu-id="b5d49-105">Upgrades contain bug fixes and support for new capabilities of hello client library.</span></span>

<span data-ttu-id="b5d49-106">**Per la versione più recente di hello:** andare troppo[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span><span class="sxs-lookup"><span data-stu-id="b5d49-106">**For hello latest version:** Go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span></span>

<span data-ttu-id="b5d49-107">Ricompilare l'applicazione con una nuova libreria di hello, nonché modificare i metadati di gestore mappe partizioni esistenti archiviati in nuove funzionalità di toosupport il database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="b5d49-107">Rebuild your application with hello new library, as well as change your existing Shard Map Manager metadata stored in your Azure SQL Databases toosupport new features.</span></span>

<span data-ttu-id="b5d49-108">Eseguire questi passaggi nell'ordine assicura che le versioni precedenti della libreria client hello non sono più presenti nell'ambiente in uso quando vengono aggiornati gli oggetti di metadati, il che significa che gli oggetti di metadati della versione precedente non verrà creati dopo l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="b5d49-108">Performing these steps in order ensures that old versions of hello client library are no longer present in your environment when metadata objects are updated, which means that old-version metadata objects won’t be created after upgrade.</span></span>   

## <a name="upgrade-steps"></a><span data-ttu-id="b5d49-109">Passaggi dell'aggiornamento</span><span class="sxs-lookup"><span data-stu-id="b5d49-109">Upgrade steps</span></span>
<span data-ttu-id="b5d49-110">**1. Aggiornare le applicazioni.**</span><span class="sxs-lookup"><span data-stu-id="b5d49-110">**1. Upgrade your applications.**</span></span> <span data-ttu-id="b5d49-111">In Visual Studio, download e riferimento hello più recente versione della libreria client in tutti i progetti di sviluppo che usano la libreria hello. quindi ricompilare e distribuire.</span><span class="sxs-lookup"><span data-stu-id="b5d49-111">In Visual Studio, download and reference hello latest client library version into all of your development projects that use hello library; then rebuild and deploy.</span></span> 

* <span data-ttu-id="b5d49-112">Nella soluzione Visual Studio in uso selezionare **Strumenti** --> **Gestione pacchetti NuGet** -->  **Gestisci pacchetti NuGet per la soluzione**.</span><span class="sxs-lookup"><span data-stu-id="b5d49-112">In your Visual Studio solution, select **Tools** --> **NuGet Package Manager** -->  **Manage NuGet Packages for Solution**.</span></span> 
* <span data-ttu-id="b5d49-113">(Visual Studio 2013) Nel riquadro sinistro hello selezionare **aggiornamenti**e quindi selezionare hello **aggiornamento** pulsante pacchetto hello **Azure SQL Database elastico scala libreria Client** che compare nella hello finestra.</span><span class="sxs-lookup"><span data-stu-id="b5d49-113">(Visual Studio 2013) In hello left panel, select **Updates**, and then select hello **Update** button on hello package **Azure SQL Database Elastic Scale Client Library** that appears in hello window.</span></span>
* <span data-ttu-id="b5d49-114">(Visual Studio 2015) Impostare la casella di filtro hello troppo**disponibile**.</span><span class="sxs-lookup"><span data-stu-id="b5d49-114">(Visual Studio 2015) Set hello Filter box too**Upgrade available**.</span></span> <span data-ttu-id="b5d49-115">Selezionare tooupdate pacchetto hello e fare clic su hello **aggiornamento** pulsante.</span><span class="sxs-lookup"><span data-stu-id="b5d49-115">Select hello package tooupdate, and click hello **Update** button.</span></span>
* <span data-ttu-id="b5d49-116">(2017 di visual Studio) Nella parte superiore di hello della finestra di dialogo hello, selezionare **aggiornamenti**.</span><span class="sxs-lookup"><span data-stu-id="b5d49-116">(Visual Studio 2017) At hello top of hello dialog, select **Updates**.</span></span> <span data-ttu-id="b5d49-117">Selezionare tooupdate pacchetto hello e fare clic su hello **aggiornamento** pulsante.</span><span class="sxs-lookup"><span data-stu-id="b5d49-117">Select hello package tooupdate, and click hello **Update** button.</span></span>
* <span data-ttu-id="b5d49-118">Compilare e distribuire.</span><span class="sxs-lookup"><span data-stu-id="b5d49-118">Build and Deploy.</span></span> 

<span data-ttu-id="b5d49-119">**2. Aggiornare gli script.**</span><span class="sxs-lookup"><span data-stu-id="b5d49-119">**2. Upgrade your scripts.**</span></span> <span data-ttu-id="b5d49-120">Se si utilizza **PowerShell** script toomanage partizioni, [scaricare una nuova versione della libreria hello](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) e copiarlo nella directory hello da cui eseguire gli script.</span><span class="sxs-lookup"><span data-stu-id="b5d49-120">If you are using **PowerShell** scripts toomanage shards, [download hello new library version](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/) and copy it into hello directory from which you execute scripts.</span></span> 

<span data-ttu-id="b5d49-121">**3. Aggiornare il servizio di divisione e unione.**</span><span class="sxs-lookup"><span data-stu-id="b5d49-121">**3. Upgrade your split-merge service.**</span></span> <span data-ttu-id="b5d49-122">Se si utilizzano hello database elastico dello strumento di merge di divisione tooreorganize dati partizionati, [scaricare e distribuire hello la versione più recente dello strumento hello](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/).</span><span class="sxs-lookup"><span data-stu-id="b5d49-122">If you use hello elastic database split-merge tool tooreorganize sharded data, [download and deploy hello latest version of hello tool](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Service.SplitMerge/).</span></span> <span data-ttu-id="b5d49-123">Aggiornamento passaggi dettagliati per hello è possibile trovare servizio [qui](sql-database-elastic-scale-overview-split-and-merge.md).</span><span class="sxs-lookup"><span data-stu-id="b5d49-123">Detailed upgrade steps for hello Service can be found [here](sql-database-elastic-scale-overview-split-and-merge.md).</span></span> 

<span data-ttu-id="b5d49-124">**4. Aggiornare i database di Gestore mappe partizioni**.</span><span class="sxs-lookup"><span data-stu-id="b5d49-124">**4. Upgrade your Shard Map Manager databases**.</span></span> <span data-ttu-id="b5d49-125">Aggiornare i metadati di hello supporto mappe partizioni nel Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="b5d49-125">Upgrade hello metadata supporting your Shard Maps in Azure SQL Database.</span></span>  <span data-ttu-id="b5d49-126">Esistono due modi per eseguire questa operazione, tramite PowerShell o C#.</span><span class="sxs-lookup"><span data-stu-id="b5d49-126">There are two ways you can accomplish this, using PowerShell or C#.</span></span> <span data-ttu-id="b5d49-127">Entrambe le opzioni sono mostrate di seguito.</span><span class="sxs-lookup"><span data-stu-id="b5d49-127">Both options are shown below.</span></span>

<span data-ttu-id="b5d49-128">***Opzione 1: aggiornare i metadati tramite PowerShell***</span><span class="sxs-lookup"><span data-stu-id="b5d49-128">***Option 1: Upgrade metadata using PowerShell***</span></span>

1. <span data-ttu-id="b5d49-129">Scaricare l'utilità della riga di comando più recente di hello per NuGet da [qui](http://nuget.org/nuget.exe) e salvare la cartella tooa.</span><span class="sxs-lookup"><span data-stu-id="b5d49-129">Download hello latest command-line utility for NuGet from [here](http://nuget.org/nuget.exe) and save tooa folder.</span></span> 
2. <span data-ttu-id="b5d49-130">Aprire un prompt dei comandi, passare toohello stessa cartella e del comando hello problema:`nuget install Microsoft.Azure.SqlDatabase.ElasticScale.Client`</span><span class="sxs-lookup"><span data-stu-id="b5d49-130">Open a Command Prompt, navigate toohello same folder, and issue hello command: `nuget install Microsoft.Azure.SqlDatabase.ElasticScale.Client`</span></span>
3. <span data-ttu-id="b5d49-131">Passare toohello sottocartella contenente hello nuova DLL versione del client che è stato appena scaricato, ad esempio:`cd .\Microsoft.Azure.SqlDatabase.ElasticScale.Client.1.0.0\lib\net45`</span><span class="sxs-lookup"><span data-stu-id="b5d49-131">Navigate toohello subfolder containing hello new client DLL version you have just downloaded, for example: `cd .\Microsoft.Azure.SqlDatabase.ElasticScale.Client.1.0.0\lib\net45`</span></span>
4. <span data-ttu-id="b5d49-132">Scaricare scriptlet aggiornamento client di database elastico hello da hello [Script Center](https://gallery.technet.microsoft.com/scriptcenter/Azure-SQL-Database-Elastic-6442e6a9), e salvarlo in hello stessa cartella contenente hello DLL.</span><span class="sxs-lookup"><span data-stu-id="b5d49-132">Download hello elastic database client upgrade scriptlet from hello [Script Center](https://gallery.technet.microsoft.com/scriptcenter/Azure-SQL-Database-Elastic-6442e6a9), and save it into hello same folder containing hello DLL.</span></span>
5. <span data-ttu-id="b5d49-133">In tale cartella eseguire "PowerShell.\upgrade.ps1" dal prompt dei comandi di hello e seguire le istruzioni di hello.</span><span class="sxs-lookup"><span data-stu-id="b5d49-133">From that folder, run “PowerShell .\upgrade.ps1” from hello command prompt and follow hello prompts.</span></span>

<span data-ttu-id="b5d49-134">***Opzione 2: aggiornare i metadati tramite C#***</span><span class="sxs-lookup"><span data-stu-id="b5d49-134">***Option 2: Upgrade metadata using C#***</span></span>

<span data-ttu-id="b5d49-135">In alternativa, creare un'applicazione di Visual Studio che apre il ShardMapManager, scorre tutte le partizioni ed esegue l'aggiornamento dei metadati hello chiamando i metodi di hello [UpgradeLocalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradelocalstore.aspx) e [ UpgradeGlobalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradeglobalstore.aspx) come nel seguente esempio:</span><span class="sxs-lookup"><span data-stu-id="b5d49-135">Alternatively, create a Visual Studio application that opens your ShardMapManager, iterates over all shards, and performs hello metadata upgrade by calling hello methods [UpgradeLocalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradelocalstore.aspx) and [UpgradeGlobalStore](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.upgradeglobalstore.aspx) as in this example:</span></span> 

    ShardMapManager smm =
       ShardMapManagerFactory.GetSqlShardMapManager
       (connStr, ShardMapManagerLoadPolicy.Lazy); 
    smm.UpgradeGlobalStore(); 

    foreach (ShardLocation loc in
     smm.GetDistinctShardLocations()) 
    {   
       smm.UpgradeLocalStore(loc); 
    } 

<span data-ttu-id="b5d49-136">Tali tecniche di aggiornamento dei metadati possono essere applicate più volte senza creare problemi.</span><span class="sxs-lookup"><span data-stu-id="b5d49-136">These techniques for metadata upgrades can be applied multiple times without harm.</span></span> <span data-ttu-id="b5d49-137">Ad esempio, se una versione precedente del client crea inavvertitamente una partizione dopo aver già aggiornato, è possibile eseguire l'aggiornamento nuovamente tra tutte le partizioni tooensure tale hello versione più recente di metadati è presente nell'intera infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="b5d49-137">For example, if an older client version inadvertently creates a shard after you have already updated, you can run upgrade again across all shards tooensure that hello latest metadata version is present throughout your infrastructure.</span></span> 

<span data-ttu-id="b5d49-138">**Nota:** nuove versioni della libreria client hello pubblicato a data continuare toowork con le versioni precedenti di hello gestore mappe partizioni metadati nel database SQL di Azure e viceversa.</span><span class="sxs-lookup"><span data-stu-id="b5d49-138">**Note:**  New versions of hello client library published to-date continue toowork with prior versions of hello Shard Map Manager metadata on Azure SQL DB, and vice-versa.</span></span>   <span data-ttu-id="b5d49-139">Tuttavia è necessario toobe aggiornato tootake sfruttare alcune delle nuove funzionalità di hello client più recente di hello, i metadati.</span><span class="sxs-lookup"><span data-stu-id="b5d49-139">However tootake advantage of some of hello new features in hello latest client, metadata needs toobe upgraded.</span></span>   <span data-ttu-id="b5d49-140">Si noti che gli aggiornamenti dei metadati non influirà sulle eventuali dati utente o dati specifici dell'applicazione, solo gli oggetti creati e utilizzati da hello gestore mappe partizioni.</span><span class="sxs-lookup"><span data-stu-id="b5d49-140">Note that metadata upgrades will not affect any user-data or application-specific data, only objects created and used by hello Shard Map Manager.</span></span>  <span data-ttu-id="b5d49-141">E le applicazioni continuano toooperate tramite una sequenza di aggiornamento hello descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="b5d49-141">And applications continue toooperate through hello upgrade sequence described above.</span></span> 

## <a name="elastic-database-client-version-history"></a><span data-ttu-id="b5d49-142">Cronologia delle versioni del client di database elastico</span><span class="sxs-lookup"><span data-stu-id="b5d49-142">Elastic database client version history</span></span>
<span data-ttu-id="b5d49-143">Per la cronologia delle versioni, andare troppo[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/)</span><span class="sxs-lookup"><span data-stu-id="b5d49-143">For version history, go too[Microsoft.Azure.SqlDatabase.ElasticScale.Client](https://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/)</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]:./media/sql-database-elastic-scale-upgrade-client-library/nuget-upgrade.png

