---
title: procedure consigliate di sicurezza rete aaaAzure | Documenti Microsoft
description: "Informazioni su che alcune delle funzionalità chiave hello disponibili in Azure toohelp creare ambienti di rete sicura"
services: virtual-network
documentationcenter: na
author: tracsman
manager: rossort
editor: 
ms.assetid: d169387a-1243-4867-a602-01d6f2d8a2a1
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 01/03/2017
ms.author: jonor
ms.openlocfilehash: b851b2862428a8bd5e7525c85584fc1c14ffcabe
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="microsoft-cloud-services-and-network-security"></a><span data-ttu-id="ffe58-103">Servizi cloud Microsoft e sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="ffe58-103">Microsoft cloud services and network security</span></span>
<span data-ttu-id="ffe58-104">I Servizi cloud Microsoft offrono servizi e infrastruttura su scala elevata, capacità di livello aziendale e molte opzioni per la connettività ibrida.</span><span class="sxs-lookup"><span data-stu-id="ffe58-104">Microsoft cloud services deliver hyper-scale services and infrastructure, enterprise-grade capabilities, and many choices for hybrid connectivity.</span></span> <span data-ttu-id="ffe58-105">I clienti possono scegliere tooaccess questi servizi tramite Internet hello o con Azure ExpressRoute, che fornisce la connettività di rete privata.</span><span class="sxs-lookup"><span data-stu-id="ffe58-105">Customers can choose tooaccess these services either via hello Internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="ffe58-106">piattaforma Microsoft Azure Hello consente ai clienti tooseamlessly estendere la propria infrastruttura nel cloud hello e compilare le architetture a più livelli.</span><span class="sxs-lookup"><span data-stu-id="ffe58-106">hello Microsoft Azure platform allows customers tooseamlessly extend their infrastructure into hello cloud and build multi-tier architectures.</span></span> <span data-ttu-id="ffe58-107">Inoltre, le terze parti possono abilitare capacità avanzate offrendo servizi di sicurezza e appliance virtuali.</span><span class="sxs-lookup"><span data-stu-id="ffe58-107">Additionally, third parties can enable enhanced capabilities by offering security services and virtual appliances.</span></span> <span data-ttu-id="ffe58-108">Questo white paper offre una panoramica dei problemi relativi a sicurezza e architettura che i clienti dovrebbero tenere in considerazione quando usano i Servizi cloud Microsoft con accesso tramite ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ffe58-108">This white paper provides an overview of security and architectural issues that customers should consider when using Microsoft cloud services accessed via ExpressRoute.</span></span> <span data-ttu-id="ffe58-109">Il documento illustra anche come creare servizi più sicuri sulle reti virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-109">It also covers creating more secure services in Azure virtual networks.</span></span>

## <a name="fast-start"></a><span data-ttu-id="ffe58-110">Avvio veloce</span><span class="sxs-lookup"><span data-stu-id="ffe58-110">Fast start</span></span>
<span data-ttu-id="ffe58-111">Hello seguente grafico logica può indirizzare si tooa esempio specifico di hello numerose tecniche di sicurezza con hello piattaforma Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-111">hello following logic chart can direct you tooa specific example of hello many security techniques available with hello Azure platform.</span></span> <span data-ttu-id="ffe58-112">Per riferimento rapido, trovare l'esempio hello più adatto al caso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-112">For quick reference, find hello example that best fits your case.</span></span> <span data-ttu-id="ffe58-113">Per una spiegazione espansa, continuare la lettura tramite carta hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-113">For expanded explanations, continue reading through hello paper.</span></span>
<span data-ttu-id="ffe58-114">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="ffe58-114">[![0]][0]</span></span>

[<span data-ttu-id="ffe58-115">Esempio 1: Creare una rete perimetrale (nota anche come DMZ o subnet schermata) toohelp proteggere le applicazioni con rete sicurezza gruppi.</span><span class="sxs-lookup"><span data-stu-id="ffe58-115">Example 1: Build a perimeter network (also known as DMZ, demilitarized zone, or screened subnet) toohelp protect applications with network security groups (NSGs).</span></span>](#example-1-build-a-perimeter-network-to-help-protect-applications-with-nsgs)</br><span data-ttu-id="ffe58-116">
[Esempio 2: Creare un perimetro di rete toohelp proteggere le applicazioni con un firewall e NSGs.](#example-2-build-a-perimeter-network-to-help-protect-applications-with-a-firewall-and-nsgs)</span><span class="sxs-lookup"><span data-stu-id="ffe58-116">
[Example 2: Build a perimeter network toohelp protect applications with a firewall and NSGs.](#example-2-build-a-perimeter-network-to-help-protect-applications-with-a-firewall-and-nsgs)</span></span></br><span data-ttu-id="ffe58-117">
[Esempio 3: Creare un perimetro di rete toohelp proteggere reti con un firewall, una route definite dall'utente (UDR) e un gruppo.](#example-3-build-a-perimeter-network-to-help-protect-networks-with-a-firewall-and-udr-and-nsg)</span><span class="sxs-lookup"><span data-stu-id="ffe58-117">
[Example 3: Build a perimeter network toohelp protect networks with a firewall, user-defined route (UDR), and NSG.](#example-3-build-a-perimeter-network-to-help-protect-networks-with-a-firewall-and-udr-and-nsg)</span></span></br><span data-ttu-id="ffe58-118">
[Esempio 4: Aggiungere una connessione ibrida con un'appliance virtuale da sito a sito e con una rete virtuale privata (VPN).](#example-4-add-a-hybrid-connection-with-a-site-to-site-virtual-appliance-vpn)</span><span class="sxs-lookup"><span data-stu-id="ffe58-118">
[Example 4: Add a hybrid connection with a site-to-site, virtual appliance virtual private network (VPN).](#example-4-add-a-hybrid-connection-with-a-site-to-site-virtual-appliance-vpn)</span></span></br><span data-ttu-id="ffe58-119">
[Esempio 5: Aggiungere una connessione ibrida con un gateway VPN di Azure da sito a sito.](#example-5-add-a-hybrid-connection-with-a-site-to-site-azure-vpn-gateway)</span><span class="sxs-lookup"><span data-stu-id="ffe58-119">
[Example 5: Add a hybrid connection with a site-to-site, Azure VPN gateway.](#example-5-add-a-hybrid-connection-with-a-site-to-site-azure-vpn-gateway)</span></span></br><span data-ttu-id="ffe58-120">
[Esempio 6: Aggiungere una connessione ibrida con ExpressRoute.](#example-6-add-a-hybrid-connection-with-expressroute)</span><span class="sxs-lookup"><span data-stu-id="ffe58-120">
[Example 6: Add a hybrid connection with ExpressRoute.](#example-6-add-a-hybrid-connection-with-expressroute)</span></span></br>
<span data-ttu-id="ffe58-121">Esempi per l'aggiunta di connessioni tra reti virtuali, la disponibilità elevata e il concatenamento di servizi verranno aggiunti toothis documento su hello prossimi mesi.</span><span class="sxs-lookup"><span data-stu-id="ffe58-121">Examples for adding connections between virtual networks, high availability, and service chaining will be added toothis document over hello next few months.</span></span>

## <a name="microsoft-compliance-and-infrastructure-protection"></a><span data-ttu-id="ffe58-122">Conformità Microsoft e protezione dell'infrastruttura</span><span class="sxs-lookup"><span data-stu-id="ffe58-122">Microsoft compliance and infrastructure protection</span></span>
<span data-ttu-id="ffe58-123">le organizzazioni toohelp conforme ai nazionali, regionali e requisiti specifici del settore che regolano hello raccolta e utilizzo dei dati degli utenti, Microsoft offre più di 40 certificazioni e le attestazioni.</span><span class="sxs-lookup"><span data-stu-id="ffe58-123">toohelp organizations comply with national, regional, and industry-specific requirements governing hello collection and use of individuals’ data, Microsoft offers over 40 certifications and attestations.</span></span> <span data-ttu-id="ffe58-124">Hello più completo impostata di qualsiasi provider di servizi cloud.</span><span class="sxs-lookup"><span data-stu-id="ffe58-124">hello most comprehensive set of any cloud service provider.</span></span>

<span data-ttu-id="ffe58-125">Per ulteriori informazioni, vedere le informazioni sulla conformità hello in hello [Microsoft Trust Center][TrustCenter].</span><span class="sxs-lookup"><span data-stu-id="ffe58-125">For more information, see hello compliance information on hello [Microsoft Trust Center][TrustCenter].</span></span>

<span data-ttu-id="ffe58-126">Microsoft ha un approccio completo tooprotect servizi dell'infrastruttura cloud necessario toorun hyper su scala globale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-126">Microsoft has a comprehensive approach tooprotect cloud infrastructure needed toorun hyper-scale global services.</span></span> <span data-ttu-id="ffe58-127">Infrastruttura cloud Microsoft include hardware, software, reti e amministrative e personale addetto alle operazioni, inoltre toohello fisica data center.</span><span class="sxs-lookup"><span data-stu-id="ffe58-127">Microsoft cloud infrastructure includes hardware, software, networks, and administrative and operations staff, in addition toohello physical data centers.</span></span>

<span data-ttu-id="ffe58-128">![2]</span><span class="sxs-lookup"><span data-stu-id="ffe58-128">![2]</span></span>

<span data-ttu-id="ffe58-129">Questo approccio offre una base più sicura per i clienti toodeploy i propri servizi in cloud di Microsoft hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-129">This approach provides a more secure foundation for customers toodeploy their services in hello Microsoft cloud.</span></span> <span data-ttu-id="ffe58-130">passaggio successivo Hello è per i clienti toodesign e creare un tooprotect architettura di sicurezza di questi servizi.</span><span class="sxs-lookup"><span data-stu-id="ffe58-130">hello next step is for customers toodesign and create a security architecture tooprotect these services.</span></span>

## <a name="traditional-security-architectures-and-perimeter-networks"></a><span data-ttu-id="ffe58-131">Architetture di sicurezza tradizionali e reti perimetrali</span><span class="sxs-lookup"><span data-stu-id="ffe58-131">Traditional security architectures and perimeter networks</span></span>
<span data-ttu-id="ffe58-132">Sebbene Microsoft investe frequentemente per la protezione dell'infrastruttura cloud hello, i clienti devono proteggere anche gruppi di risorse e i servizi cloud.</span><span class="sxs-lookup"><span data-stu-id="ffe58-132">Although Microsoft invests heavily in protecting hello cloud infrastructure, customers must also protect their cloud services and resource groups.</span></span> <span data-ttu-id="ffe58-133">Un approccio più livelli di toosecurity fornisce difesa hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-133">A multilayered approach toosecurity provides hello best defense.</span></span> <span data-ttu-id="ffe58-134">Un'area di sicurezza della rete perimetrale protegge le risorse di rete interne da una rete non attendibile.</span><span class="sxs-lookup"><span data-stu-id="ffe58-134">A perimeter network security zone protects internal network resources from an untrusted network.</span></span> <span data-ttu-id="ffe58-135">Una rete perimetrale fa riferimento toohello bordi o parti della rete hello che si trovano tra hello Internet e l'infrastruttura IT aziendale hello protetto.</span><span class="sxs-lookup"><span data-stu-id="ffe58-135">A perimeter network refers toohello edges or parts of hello network that sit between hello Internet and hello protected enterprise IT infrastructure.</span></span>

<span data-ttu-id="ffe58-136">Nelle reti aziendali tipiche, infrastruttura di base hello frequentemente viene aggiunto al perimetro di hello, con più livelli di dispositivi di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ffe58-136">In typical enterprise networks, hello core infrastructure is heavily fortified at hello perimeters, with multiple layers of security devices.</span></span> <span data-ttu-id="ffe58-137">limite Hello di ogni livello è costituito da dispositivi e i punti di imposizione dei criteri.</span><span class="sxs-lookup"><span data-stu-id="ffe58-137">hello boundary of each layer consists of devices and policy enforcement points.</span></span> <span data-ttu-id="ffe58-138">Ogni livello può includere una combinazione di hello seguenti dispositivi di sicurezza di rete: firewall, prevenzione di tipo Denial of Service (DoS), il rilevamento delle intrusioni o sistemi di protezione (ID/IP) e i dispositivi VPN.</span><span class="sxs-lookup"><span data-stu-id="ffe58-138">Each layer can include a combination of hello following network security devices: firewalls, Denial of Service (DoS) prevention, Intrusion Detection or Protection Systems (IDS/IPS), and VPN devices.</span></span> <span data-ttu-id="ffe58-139">Applicazione dei criteri può richiedere formato hello di criteri di firewall, elenchi di controllo di accesso (ACL) o di routing specifico.</span><span class="sxs-lookup"><span data-stu-id="ffe58-139">Policy enforcement can take hello form of firewall policies, access control lists (ACLs), or specific routing.</span></span> <span data-ttu-id="ffe58-140">Hello prima difesa nella rete hello, accettando direttamente il traffico in ingresso da Internet, hello è una combinazione di questi meccanismi tooblock attacchi e il traffico dannoso, consentendo di ulteriori richieste legittime rete hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-140">hello first line of defense in hello network, directly accepting incoming traffic from hello Internet, is a combination of these mechanisms tooblock attacks and harmful traffic while allowing legitimate requests further into hello network.</span></span> <span data-ttu-id="ffe58-141">Questo traffico indirizza direttamente tooresources nella rete perimetrale hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-141">This traffic routes directly tooresources in hello perimeter network.</span></span> <span data-ttu-id="ffe58-142">La risorsa può quindi "parlare" tooresources più profondo nella rete hello, in transito successivo limite di hello per la convalida prima.</span><span class="sxs-lookup"><span data-stu-id="ffe58-142">That resource may then “talk” tooresources deeper in hello network, transiting hello next boundary for validation first.</span></span> <span data-ttu-id="ffe58-143">livello più esterno Hello viene denominata rete perimetrale hello perché questa parte della rete hello è esposto toohello Internet, in genere con un modulo di protezione su entrambi i lati.</span><span class="sxs-lookup"><span data-stu-id="ffe58-143">hello outermost layer is called hello perimeter network because this part of hello network is exposed toohello Internet, usually with some form of protection on both sides.</span></span> <span data-ttu-id="ffe58-144">Hello figura riportata di seguito viene illustrato un esempio di una rete perimetrale singola subnet in una rete aziendale, con due limiti di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ffe58-144">hello following figure shows an example of a single subnet perimeter network in a corporate network, with two security boundaries.</span></span>

<span data-ttu-id="ffe58-145">![3]</span><span class="sxs-lookup"><span data-stu-id="ffe58-145">![3]</span></span>

<span data-ttu-id="ffe58-146">Esistono molte architetture utilizzate tooimplement una rete perimetrale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-146">There are many architectures used tooimplement a perimeter network.</span></span> <span data-ttu-id="ffe58-147">Queste architetture possono variare da una rete di più subnet perimetrale tooa del servizio di bilanciamento carico semplice con diversi meccanismi di traffico di tooblock ogni limite e proteggere livelli più profondi di hello della rete aziendale hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-147">These architectures can range from a simple load balancer tooa multiple-subnet perimeter network with varied mechanisms at each boundary tooblock traffic and protect hello deeper layers of hello corporate network.</span></span> <span data-ttu-id="ffe58-148">La modalità di compilazione rete perimetrale hello dipende dalle esigenze specifiche di hello dell'organizzazione di hello e la tolleranza al rischio complessivo.</span><span class="sxs-lookup"><span data-stu-id="ffe58-148">How hello perimeter network is built depends on hello specific needs of hello organization and its overall risk tolerance.</span></span>

<span data-ttu-id="ffe58-149">Come i clienti spostano i cloud toopublic i carichi di lavoro, è critico toosupport funzionalità simili per l'architettura di rete perimetrale in Azure toomeet conformità e i requisiti di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ffe58-149">As customers move their workloads toopublic clouds, it is critical toosupport similar capabilities for perimeter network architecture in Azure toomeet compliance and security requirements.</span></span> <span data-ttu-id="ffe58-150">Questo documento offre indicazioni su come creare un ambiente di rete sicuro in Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-150">This document provides guidelines on how customers can build a secure network environment in Azure.</span></span> <span data-ttu-id="ffe58-151">Si concentra sulla rete perimetrale hello, ma include anche una trattazione completa di molti aspetti di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="ffe58-151">It focuses on hello perimeter network, but also includes a comprehensive discussion of many aspects of network security.</span></span> <span data-ttu-id="ffe58-152">questa discussione vengono informati quando Hello seguenti domande:</span><span class="sxs-lookup"><span data-stu-id="ffe58-152">hello following questions inform this discussion:</span></span>

* <span data-ttu-id="ffe58-153">Come è possibile creare una rete perimetrale in Azure?</span><span class="sxs-lookup"><span data-stu-id="ffe58-153">How can a perimeter network in Azure be built?</span></span>
* <span data-ttu-id="ffe58-154">Quali sono la rete perimetrale hello le funzionalità di Azure disponibili toobuild hello?</span><span class="sxs-lookup"><span data-stu-id="ffe58-154">What are some of hello Azure features available toobuild hello perimeter network?</span></span>
* <span data-ttu-id="ffe58-155">Come è possibile proteggere i carichi di lavoro back-end?</span><span class="sxs-lookup"><span data-stu-id="ffe58-155">How can back-end workloads be protected?</span></span>
* <span data-ttu-id="ffe58-156">Quali sono i carichi di lavoro di Internet comunicazioni controllate toohello in Azure?</span><span class="sxs-lookup"><span data-stu-id="ffe58-156">How are Internet communications controlled toohello workloads in Azure?</span></span>
* <span data-ttu-id="ffe58-157">Come possono essere protetti hello sulle reti locali da distribuzioni in Azure?</span><span class="sxs-lookup"><span data-stu-id="ffe58-157">How can hello on-premises networks be protected from deployments in Azure?</span></span>
* <span data-ttu-id="ffe58-158">Quando è consigliabile usare le funzionalità di sicurezza native di Azure invece di appliance o servizi di terze parti?</span><span class="sxs-lookup"><span data-stu-id="ffe58-158">When should native Azure security features be used versus third-party appliances or services?</span></span>

<span data-ttu-id="ffe58-159">Hello seguente diagramma illustra i vari livelli di sicurezza di che Azure fornisce toocustomers.</span><span class="sxs-lookup"><span data-stu-id="ffe58-159">hello following diagram shows various layers of security Azure provides toocustomers.</span></span> <span data-ttu-id="ffe58-160">Tali livelli rappresentano nativa nella piattaforma Azure stesso hello e funzionalità definita dal cliente:</span><span class="sxs-lookup"><span data-stu-id="ffe58-160">These layers are both native in hello Azure platform itself and customer-defined features:</span></span>

<span data-ttu-id="ffe58-161">![4]</span><span class="sxs-lookup"><span data-stu-id="ffe58-161">![4]</span></span>

<span data-ttu-id="ffe58-162">In ingresso da hello Internet, DDoS Azure consente di proteggere da attacchi su larga scala in Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-162">Inbound from hello Internet, Azure DDoS helps protect against large-scale attacks against Azure.</span></span> <span data-ttu-id="ffe58-163">livello successivo Hello è definito dal cliente gli indirizzi IP pubblici (endpoint), vengono utilizzati toodetermine possibile passare il tipo di traffico tramite rete virtuale toohello di hello servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="ffe58-163">hello next layer is customer-defined public IP addresses (endpoints), which are used toodetermine which traffic can pass through hello cloud service toohello virtual network.</span></span> <span data-ttu-id="ffe58-164">L'isolamento nativo della rete virtuale di Azure assicura l'isolamento completo da tutte le altre reti; consente anche il passaggio del flusso di traffico solo tramite percorsi e metodi configurati dall'utente.</span><span class="sxs-lookup"><span data-stu-id="ffe58-164">Native Azure virtual network isolation ensures complete isolation from all other networks and that traffic only flows through user configured paths and methods.</span></span> <span data-ttu-id="ffe58-165">Questi percorsi e i metodi sono livello successivo hello, dove NSGs UDR e ai dispositivi di rete virtuale possono essere utilizzato toocreate sicurezza limiti tooprotect hello le distribuzioni di applicazioni nella rete hello protetto.</span><span class="sxs-lookup"><span data-stu-id="ffe58-165">These paths and methods are hello next layer, where NSGs, UDR, and network virtual appliances can be used toocreate security boundaries tooprotect hello application deployments in hello protected network.</span></span>

<span data-ttu-id="ffe58-166">Nella sezione successiva Hello fornisce una panoramica delle reti virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-166">hello next section provides an overview of Azure virtual networks.</span></span> <span data-ttu-id="ffe58-167">Queste reti virtuali di Azure vengono create dai clienti e i carichi di lavoro distribuiti dei clienti sono collegati ad esse.</span><span class="sxs-lookup"><span data-stu-id="ffe58-167">These virtual networks are created by customers, and are what their deployed workloads are connected to.</span></span> <span data-ttu-id="ffe58-168">Le reti virtuali sono a base hello di tutte le funzionalità di sicurezza di rete hello necessari tooestablish un distribuzioni dei clienti tooprotect rete perimetrale in Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-168">Virtual networks are hello basis of all hello network security features required tooestablish a perimeter network tooprotect customer deployments in Azure.</span></span>

## <a name="overview-of-azure-virtual-networks"></a><span data-ttu-id="ffe58-169">Panoramica delle reti virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="ffe58-169">Overview of Azure virtual networks</span></span>
<span data-ttu-id="ffe58-170">Prima di traffico Internet può ottenere toohello reti virtuali di Azure, sono disponibili due livelli di protezione inerenti toohello piattaforma Azure:</span><span class="sxs-lookup"><span data-stu-id="ffe58-170">Before Internet traffic can get toohello Azure virtual networks, there are two layers of security inherent toohello Azure platform:</span></span>

1.    <span data-ttu-id="ffe58-171">**Protezione DDoS**: protezione DDoS è un livello di hello Azure rete fisica che consente di proteggere da attacchi basati su Internet su larga scala hello piattaforma Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-171">**DDoS protection**: DDoS protection is a layer of hello Azure physical network that protects hello Azure platform itself from large-scale Internet-based attacks.</span></span> <span data-ttu-id="ffe58-172">Questi attacchi utilizzano più nodi di "bot" in un toooverwhelm tentativo di un servizio in Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-172">These attacks use multiple “bot” nodes in an attempt toooverwhelm an Internet service.</span></span> <span data-ttu-id="ffe58-173">Azure vanta una solida rete di protezione DDoS su tutta la connettività Internet in ingresso, in uscita e tra le aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-173">Azure has a robust DDoS protection mesh on all inbound, outbound, and cross-Azure region connectivity.</span></span> <span data-ttu-id="ffe58-174">Questo livello di protezione DDoS dispone di attributi configurabili dall'utente e non è accessibile toohello cliente.</span><span class="sxs-lookup"><span data-stu-id="ffe58-174">This DDoS protection layer has no user configurable attributes and is not accessible toohello customer.</span></span> <span data-ttu-id="ffe58-175">livello di protezione DDoS Hello protegge Azure come piattaforma da attacchi su larga scala, viene inoltre monitorato il traffico tra Azure area e traffico in uscita.</span><span class="sxs-lookup"><span data-stu-id="ffe58-175">hello DDoS protection layer protects Azure as a platform from large-scale attacks, it also monitors out-bound traffic and cross-Azure region traffic.</span></span> <span data-ttu-id="ffe58-176">Usando dispositivi di rete virtuali nella rete virtuale hello, ulteriori livelli di resilienza possono essere configurati dal cliente hello da attacchi di scala più piccoli che non attivarsi protezione a livello di piattaforma hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-176">Using network virtual appliances on hello VNet, additional layers of resilience can be configured by hello customer against a smaller scale attack that doesn't trip hello platform level protection.</span></span> <span data-ttu-id="ffe58-177">Un esempio di DDoS in azione. Se un indirizzo IP per internet è stato attaccato da un attacco DDoS su larga scala, Azure rilevi origini hello di attacchi di hello ed eseguire lo scrubbing hello danneggiata traffico prima ha raggiunto la destinazione prevista.</span><span class="sxs-lookup"><span data-stu-id="ffe58-177">An example of DDoS in action; if an internet facing IP address was attacked by a large-scale DDoS attack, Azure would detect hello sources of hello attacks and scrub hello offending traffic before it reached its intended destination.</span></span> <span data-ttu-id="ffe58-178">Nella quasi totalità dei casi, hello attaccato endpoint non è influenzato da attacco hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-178">In almost all cases, hello attacked endpoint isn't affected by hello attack.</span></span> <span data-ttu-id="ffe58-179">In casi rari hello che viene modificato un endpoint, nessun traffico è interessato tooother endpoint, solo l'endpoint hello ad attaccata.</span><span class="sxs-lookup"><span data-stu-id="ffe58-179">In hello rare cases that an endpoint is affected, no traffic is affected tooother endpoints, only hello attacked endpoint.</span></span> <span data-ttu-id="ffe58-180">Pertanto altri clienti e servizi non subiranno alcun effetto di tale attacco.</span><span class="sxs-lookup"><span data-stu-id="ffe58-180">Thus other customers and services would see no impact from that attack.</span></span> <span data-ttu-id="ffe58-181">È toonote critici che Azure DDoS esegue la ricerca solo di attacchi su larga scala.</span><span class="sxs-lookup"><span data-stu-id="ffe58-181">It's critical toonote that Azure DDoS is only looking for large-scale attacks.</span></span> <span data-ttu-id="ffe58-182">È possibile che il servizio specifico può essere sovraccaricato prima vengono superate le soglie di protezione a livello di hello piattaforma.</span><span class="sxs-lookup"><span data-stu-id="ffe58-182">It is possible that your specific service could be overwhelmed before hello platform level protection thresholds are exceeded.</span></span> <span data-ttu-id="ffe58-183">Ad esempio, un sito Web in un singolo server IIS A0 potrebbe essere danneggiato da un attacco DDoS prima che la protezione DDoS a livello di piattaforma di Azure rilevi la minaccia.</span><span class="sxs-lookup"><span data-stu-id="ffe58-183">For example, a web site on a single A0 IIS server, could be taken offline by a DDoS attack before Azure platform level DDoS protection registered a threat.</span></span>

2.  <span data-ttu-id="ffe58-184">**Gli indirizzi IP pubblici**: indirizzo IP pubblico indirizzi (abilitati tramite gli endpoint del servizio, gli indirizzi IP pubblici, Gateway applicazione e altre funzionalità di Azure che presentano una pubblico toohello internet indirizzato tooyour la risorsa indirizzo IP) consentono di servizi cloud o gli indirizzi IP Internet pubblici toohave e porte esposte gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="ffe58-184">**Public IP Addresses**: Public IP addresses (enabled via service endpoints, Public IP addresses, Application Gateway, and other Azure features that present a public IP address toohello internet routed tooyour resource) allow cloud services or resource groups toohave public Internet IP addresses and ports exposed.</span></span> <span data-ttu-id="ffe58-185">endpoint Hello Usa l'indirizzo interno toohello traffico tooroute Network Address Translation (NAT) e la porta su hello rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-185">hello endpoint uses Network Address Translation (NAT) tooroute traffic toohello internal address and port on hello Azure virtual network.</span></span> <span data-ttu-id="ffe58-186">Questo percorso è hello modalità principale con cui il traffico esterno toopass in rete virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-186">This path is hello primary way for external traffic toopass into hello virtual network.</span></span> <span data-ttu-id="ffe58-187">indirizzi IP pubblici Hello sono configurabili toodetermine viene passato il tipo di traffico e come e dove viene convertito in toohello di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-187">hello Public IP addresses are configurable toodetermine which traffic is passed in, and how and where it's translated on toohello virtual network.</span></span>

<span data-ttu-id="ffe58-188">Quando il traffico di rete virtuale hello, sono disponibili molte funzionalità che entrano in gioco.</span><span class="sxs-lookup"><span data-stu-id="ffe58-188">Once traffic reaches hello virtual network, there are many features that come into play.</span></span> <span data-ttu-id="ffe58-189">Reti virtuali di Azure sono hello foundation per i clienti tooattach i carichi di lavoro e in cui si applica protezione a livello di rete di base.</span><span class="sxs-lookup"><span data-stu-id="ffe58-189">Azure virtual networks are hello foundation for customers tooattach their workloads and where basic network-level security applies.</span></span> <span data-ttu-id="ffe58-190">È una rete privata (un overlay della rete virtuale) in Azure per i clienti con hello seguenti funzionalità e caratteristiche:</span><span class="sxs-lookup"><span data-stu-id="ffe58-190">It is a private network (a virtual network overlay) in Azure for customers with hello following features and characteristics:</span></span>

* <span data-ttu-id="ffe58-191">**Isolamento del traffico**: una rete virtuale è limite di isolamento del traffico hello in hello piattaforma Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-191">**Traffic isolation**: A virtual network is hello traffic isolation boundary on hello Azure platform.</span></span> <span data-ttu-id="ffe58-192">Macchine virtuali (VM) in una rete virtuale non possono comunicare direttamente in una rete virtuale diversa, anche se entrambe le reti virtuali vengono create da tooVMs hello stesso cliente.</span><span class="sxs-lookup"><span data-stu-id="ffe58-192">Virtual machines (VMs) in one virtual network cannot communicate directly tooVMs in a different virtual network, even if both virtual networks are created by hello same customer.</span></span> <span data-ttu-id="ffe58-193">L'isolamento è una proprietà essenziale che assicura che le macchine virtuali e le comunicazioni dei clienti rimangano private entro una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-193">Isolation is a critical property that ensures customer VMs and communication remains private within a virtual network.</span></span>

>[!NOTE]
><span data-ttu-id="ffe58-194">Isolamento del traffico si riferisce solo tootraffic *in ingresso* toohello di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-194">Traffic isolation refers only tootraffic *inbound* toohello virtual network.</span></span> <span data-ttu-id="ffe58-195">Per il traffico in uscita predefinito da toohello di rete virtuale hello internet è consentita, ma è possibile prevenire eventualmente NSGs.</span><span class="sxs-lookup"><span data-stu-id="ffe58-195">By default outbound traffic from hello VNet toohello internet is allowed, but can be prevented if desired by NSGs.</span></span>
>
>

* <span data-ttu-id="ffe58-196">**Topologia a più livelli**: le reti virtuali consentono ai clienti topologia multilivello toodefine allocando le subnet e la designazione di spazi di indirizzi separati per diversi elementi o "livelli" dei rispettivi carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ffe58-196">**Multi-tier topology**: Virtual networks allow customers toodefine multi-tier topology by allocating subnets and designating separate address spaces for different elements or “tiers” of their workloads.</span></span> <span data-ttu-id="ffe58-197">Questi raggruppamenti logici topologie Abilita criteri di accesso diversi toodefine di clienti in base ai tipi di carico di lavoro hello e inoltre controllano i flussi di traffico tra i livelli di hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-197">These logical groupings and topologies enable customers toodefine different access policy based on hello workload types, and also control traffic flows between hello tiers.</span></span>
* <span data-ttu-id="ffe58-198">**Connettività cross-premise**: i clienti possono stabilire la connettività cross-premise tra una rete virtuale e più siti locali o altre reti virtuali in Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-198">**Cross-premises connectivity**: Customers can establish cross-premises connectivity between a virtual network and multiple on-premises sites or other virtual networks in Azure.</span></span> <span data-ttu-id="ffe58-199">tooconstruct una connessione, i clienti possono utilizzare Peering reti virtuali, il gateway VPN di Azure, dispositivi virtuali di rete di terze parti o ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ffe58-199">tooconstruct a connection, customers can use VNet Peering, Azure VPN Gateways, third-party network virtual appliances, or ExpressRoute.</span></span> <span data-ttu-id="ffe58-200">Azure supporta VPN da sito a sito (S2S, site-to-site) mediante protocolli IPsec/IKE standard e la connettività privata di ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ffe58-200">Azure supports site-to-site (S2S) VPNs using standard IPsec/IKE protocols and ExpressRoute private connectivity.</span></span>
* <span data-ttu-id="ffe58-201">**GRUPPO** consente ai clienti regole toocreate (ACL) a livello di hello desiderato di granularità: subnet virtuali, singole macchine virtuali o le interfacce di rete.</span><span class="sxs-lookup"><span data-stu-id="ffe58-201">**NSG** allows customers toocreate rules (ACLs) at hello desired level of granularity: network interfaces, individual VMs, or virtual subnets.</span></span> <span data-ttu-id="ffe58-202">I clienti possono controllare l'accesso per consentire o negare la comunicazione tra i carichi di lavoro hello in una rete virtuale, da sistemi in reti tramite connettività cross-premise, o comunicazione Internet diretta.</span><span class="sxs-lookup"><span data-stu-id="ffe58-202">Customers can control access by permitting or denying communication between hello workloads within a virtual network, from systems on customer’s networks via cross-premises connectivity, or direct Internet communication.</span></span>
* <span data-ttu-id="ffe58-203">**UDR** e **l'inoltro IP** consentono ai clienti di percorsi di comunicazione hello toodefine tra i diversi livelli all'interno di una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-203">**UDR** and **IP Forwarding** allow customers toodefine hello communication paths between different tiers within a virtual network.</span></span> <span data-ttu-id="ffe58-204">I clienti possono distribuire un firewall, IDS/IPS e altre appliance virtuali e instradare il traffico di rete attraverso queste appliance di sicurezza per l'applicazione dei criteri relativi ai limiti di sicurezza, il controllo e l'ispezione.</span><span class="sxs-lookup"><span data-stu-id="ffe58-204">Customers can deploy a firewall, IDS/IPS, and other virtual appliances, and route network traffic through these security appliances for security boundary policy enforcement, auditing, and inspection.</span></span>
* <span data-ttu-id="ffe58-205">**Dispositivi di rete virtuale** in hello Azure Marketplace: dispositivi di sicurezza, ad esempio firewall, servizi di bilanciamento del carico e gli ID o gli indirizzi IP sono disponibili in Azure Marketplace hello e hello raccolta immagini di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-205">**Network virtual appliances** in hello Azure Marketplace: Security appliances such as firewalls, load balancers, and IDS/IPS are available in hello Azure Marketplace and hello VM Image Gallery.</span></span> <span data-ttu-id="ffe58-206">I clienti possono distribuire queste Appliance nelle loro reti virtuali e in particolare, l'ambiente di rete sicura sicurezza limiti (compresi subnet della rete perimetrale hello) toocomplete una a più livelli.</span><span class="sxs-lookup"><span data-stu-id="ffe58-206">Customers can deploy these appliances into their virtual networks, and specifically, at their security boundaries (including hello perimeter network subnets) toocomplete a multi-tiered secure network environment.</span></span>

<span data-ttu-id="ffe58-207">Con queste caratteristiche e funzionalità, un esempio di come è possibile costruire un'architettura di rete perimetrale in Azure è hello seguente diagramma:</span><span class="sxs-lookup"><span data-stu-id="ffe58-207">With these features and capabilities, one example of how a perimeter network architecture could be constructed in Azure is hello following diagram:</span></span>

<span data-ttu-id="ffe58-208">![5]</span><span class="sxs-lookup"><span data-stu-id="ffe58-208">![5]</span></span>

## <a name="perimeter-network-characteristics-and-requirements"></a><span data-ttu-id="ffe58-209">Caratteristiche e requisiti della rete perimetrale</span><span class="sxs-lookup"><span data-stu-id="ffe58-209">Perimeter network characteristics and requirements</span></span>
<span data-ttu-id="ffe58-210">rete perimetrale Hello è hello front-end di rete hello, direttamente l'interazione di comunicazione da hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-210">hello perimeter network is hello front end of hello network, directly interfacing communication from hello Internet.</span></span> <span data-ttu-id="ffe58-211">i pacchetti Hello in arrivo devono attraversare i dispositivi di sicurezza hello, ad esempio firewall hello, ID e gli indirizzi IP, prima di raggiungere i server back-end di hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-211">hello incoming packets should flow through hello security appliances, such as hello firewall, IDS, and IPS, before reaching hello back-end servers.</span></span> <span data-ttu-id="ffe58-212">I pacchetti associati a Internet dai carichi di lavoro hello possono inoltre passare tramite dispositivi di sicurezza hello nella rete perimetrale hello per l'applicazione dei criteri, l'ispezione e controllo scopi, prima di lasciare la rete hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-212">Internet-bound packets from hello workloads can also flow through hello security appliances in hello perimeter network for policy enforcement, inspection, and auditing purposes, before leaving hello network.</span></span> <span data-ttu-id="ffe58-213">Inoltre, rete perimetrale hello può ospitare gateway VPN cross-premise tra reti virtuali dei clienti e le reti locali.</span><span class="sxs-lookup"><span data-stu-id="ffe58-213">Additionally, hello perimeter network can host cross-premises VPN gateways between customer virtual networks and on-premises networks.</span></span>

### <a name="perimeter-network-characteristics"></a><span data-ttu-id="ffe58-214">Caratteristiche della rete perimetrale</span><span class="sxs-lookup"><span data-stu-id="ffe58-214">Perimeter network characteristics</span></span>
<span data-ttu-id="ffe58-215">Nella figura precedente hello di riferimento, alcune delle caratteristiche di hello di una rete perimetrale buona sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="ffe58-215">Referencing hello previous figure, some of hello characteristics of a good perimeter network are as follows:</span></span>

* <span data-ttu-id="ffe58-216">Connessione a Internet:</span><span class="sxs-lookup"><span data-stu-id="ffe58-216">Internet-facing:</span></span>
  * <span data-ttu-id="ffe58-217">subnet della rete perimetrale Hello stesso è rivolto a Internet, direttamente la comunicazione con Internet hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-217">hello perimeter network subnet itself is Internet-facing, directly communicating with hello Internet.</span></span>
  * <span data-ttu-id="ffe58-218">Gli indirizzi IP pubblici, gli indirizzi VIP e/o gli endpoint del servizio passano i dispositivi e rete front-end toohello di traffico Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-218">Public IP addresses, VIPs, and/or service endpoints pass Internet traffic toohello front-end network and devices.</span></span>
  * <span data-ttu-id="ffe58-219">Il traffico da Internet attraversa i dispositivi di sicurezza prima di altre risorse in rete front-end hello hello in ingresso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-219">Inbound traffic from hello Internet passes through security devices before other resources on hello front-end network.</span></span>
  * <span data-ttu-id="ffe58-220">Se è abilitata la sicurezza in uscita, il traffico passa attraverso i dispositivi di sicurezza, come passaggio finale hello, prima di passare toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-220">If outbound security is enabled, traffic passes through security devices, as hello final step, before passing toohello Internet.</span></span>
* <span data-ttu-id="ffe58-221">Rete protetta:</span><span class="sxs-lookup"><span data-stu-id="ffe58-221">Protected network:</span></span>
  * <span data-ttu-id="ffe58-222">Non è un percorso diretto dall'infrastruttura di base toohello hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-222">There is no direct path from hello Internet toohello core infrastructure.</span></span>
  * <span data-ttu-id="ffe58-223">Infrastruttura di base toohello canali deve attraversare tramite dispositivi di sicurezza, ad esempio NSGs, firewall o dispositivi VPN.</span><span class="sxs-lookup"><span data-stu-id="ffe58-223">Channels toohello core infrastructure must traverse through security devices such as NSGs, firewalls, or VPN devices.</span></span>
  * <span data-ttu-id="ffe58-224">Altri dispositivi non devono effettuare il bridging Internet e hello infrastruttura di base.</span><span class="sxs-lookup"><span data-stu-id="ffe58-224">Other devices must not bridge Internet and hello core infrastructure.</span></span>
  * <span data-ttu-id="ffe58-225">Dispositivi di sicurezza sia hello con connessione Internet e hello rete protetta rivolti verso i limiti della rete perimetrale hello (ad esempio, hello due firewall icone illustrate nella figura precedente hello) potrebbe essere un singolo dispositivo virtuale con le regole differenziati o interfacce per ciascun limite.</span><span class="sxs-lookup"><span data-stu-id="ffe58-225">Security devices on both hello Internet-facing and hello protected network facing boundaries of hello perimeter network (for example, hello two firewall icons shown in hello previous figure) may actually be a single virtual appliance with differentiated rules or interfaces for each boundary.</span></span> <span data-ttu-id="ffe58-226">Ad esempio, un dispositivo fisico, logicamente separato, la gestione hello carico per i limiti della rete perimetrale hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-226">For example, one physical device, logically separated, handling hello load for both boundaries of hello perimeter network.</span></span>
* <span data-ttu-id="ffe58-227">Altri vincoli e procedure comuni:</span><span class="sxs-lookup"><span data-stu-id="ffe58-227">Other common practices and constraints:</span></span>
  * <span data-ttu-id="ffe58-228">I carichi di lavoro non devono archiviare informazioni essenziali per l'azienda.</span><span class="sxs-lookup"><span data-stu-id="ffe58-228">Workloads must not store business critical information.</span></span>
  * <span data-ttu-id="ffe58-229">Le distribuzioni e le configurazioni di rete tooperimeter accesso e gli aggiornamenti sono gli amministratori tooonly limitato autorizzato.</span><span class="sxs-lookup"><span data-stu-id="ffe58-229">Access and updates tooperimeter network configurations and deployments are limited tooonly authorized administrators.</span></span>

### <a name="perimeter-network-requirements"></a><span data-ttu-id="ffe58-230">Requisiti della rete perimetrale</span><span class="sxs-lookup"><span data-stu-id="ffe58-230">Perimeter network requirements</span></span>
<span data-ttu-id="ffe58-231">tooenable queste caratteristiche, seguire queste linee guida su tooimplement requisiti di rete virtuale una rete perimetrale ha esito positivo:</span><span class="sxs-lookup"><span data-stu-id="ffe58-231">tooenable these characteristics, follow these guidelines on virtual network requirements tooimplement a successful perimeter network:</span></span>

* <span data-ttu-id="ffe58-232">**Architettura di subnet:** rete virtuale di hello specificare in modo che un'intera subnet dedicata come rete perimetrale hello, separato da altre subnet in hello stessa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-232">**Subnet architecture:** Specify hello virtual network such that an entire subnet is dedicated as hello perimeter network, separated from other subnets in hello same virtual network.</span></span> <span data-ttu-id="ffe58-233">Questa separazione assicura il traffico di hello tra rete perimetrale hello e gli altri flussi di livelli di subnet interna o privata attraverso un firewall o un dispositivo virtuale ID/IP.</span><span class="sxs-lookup"><span data-stu-id="ffe58-233">This separation ensures hello traffic between hello perimeter network and other internal or private subnet tiers flows through a firewall or IDS/IPS virtual appliance.</span></span>  <span data-ttu-id="ffe58-234">Le route definite dall'utente sul limite di hello subnet sono necessari tooforward questo dispositivo virtuale toohello di traffico.</span><span class="sxs-lookup"><span data-stu-id="ffe58-234">User-defined routes on hello boundary subnets are required tooforward this traffic toohello virtual appliance.</span></span>
* <span data-ttu-id="ffe58-235">**GRUPPO:** subnet della rete perimetrale hello stesso deve essere aperta tooallow comunicazione con hello Internet, ma non implica che i clienti devono essere ignorando NSGs.</span><span class="sxs-lookup"><span data-stu-id="ffe58-235">**NSG:** hello perimeter network subnet itself should be open tooallow communication with hello Internet, but that does not mean customers should be bypassing NSGs.</span></span> <span data-ttu-id="ffe58-236">Seguire comuni sicurezza consigliate toominimize hello rete superfici esposte toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-236">Follow common security practices toominimize hello network surfaces exposed toohello Internet.</span></span> <span data-ttu-id="ffe58-237">Blocco di intervalli di indirizzi remoti hello consentito distribuzioni hello tooaccess o protocolli specifici dell'applicazione hello e porte aperte.</span><span class="sxs-lookup"><span data-stu-id="ffe58-237">Lock down hello remote address ranges allowed tooaccess hello deployments or hello specific application protocols and ports that are open.</span></span> <span data-ttu-id="ffe58-238">In alcuni casi, tuttavia, non è possibile usare questa procedura.</span><span class="sxs-lookup"><span data-stu-id="ffe58-238">There may be circumstances, however, in which a complete lock-down is not possible.</span></span> <span data-ttu-id="ffe58-239">Ad esempio, se sono dotate di un sito Web esterno in Azure, rete perimetrale hello deve consentire hello richieste web provenienti da indirizzi IP pubblici, ma solo necessario aprire le porte di applicazione web di hello: TCP sulla porta 80 e/o TCP sulla porta 443.</span><span class="sxs-lookup"><span data-stu-id="ffe58-239">For example, if customers have an external website in Azure, hello perimeter network should allow hello incoming web requests from any public IP addresses, but should only open hello web application ports: TCP on port 80 and/or TCP on port 443.</span></span>
* <span data-ttu-id="ffe58-240">**Tabella di routing:** subnet della rete perimetrale hello stesso deve essere in grado di toocommunicate toohello Internet direttamente, ma non ne consente la comunicazione diretta tooand reti hello back-end o in locale senza passare attraverso un firewall o dispositivo di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ffe58-240">**Routing table:** hello perimeter network subnet itself should be able toocommunicate toohello Internet directly, but should not allow direct communication tooand from hello back end or on-premises networks without going through a firewall or security appliance.</span></span>
* <span data-ttu-id="ffe58-241">**Configurazione dello strumento di protezione:** tooroute e analizzare i pacchetti tra rete perimetrale hello e rest hello delle reti hello protetto, hello dispositivi di sicurezza, ad esempio firewall, ID, e i dispositivi di indirizzi IP possono essere multihomed.</span><span class="sxs-lookup"><span data-stu-id="ffe58-241">**Security appliance configuration:** tooroute and inspect packets between hello perimeter network and hello rest of hello protected networks, hello security appliances such as firewall, IDS, and IPS devices may be multi-homed.</span></span> <span data-ttu-id="ffe58-242">È possibile che i gruppi NIC separati per la rete perimetrale hello e subnet di back-end hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-242">They may have separate NICs for hello perimeter network and hello back-end subnets.</span></span> <span data-ttu-id="ffe58-243">le schede NIC Hello nella rete perimetrale hello comunicare direttamente tooand da hello Internet, con hello NSGs corrispondente e perimetrale hello tabella di routing di rete.</span><span class="sxs-lookup"><span data-stu-id="ffe58-243">hello NICs in hello perimeter network communicate directly tooand from hello Internet, with hello corresponding NSGs and hello perimeter network routing table.</span></span> <span data-ttu-id="ffe58-244">NIC Hello connessione toohello subnet di back-end sono più limitati NSGs e tabelle di routing di subnet di back-end corrispondente hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-244">hello NICs connecting toohello back-end subnets have more restricted NSGs and routing tables of hello corresponding back-end subnets.</span></span>
* <span data-ttu-id="ffe58-245">**Funzionalità del dispositivo protezione:** distribuiti nella rete perimetrale hello in genere dispositivi di sicurezza di hello eseguono hello seguenti funzionalità:</span><span class="sxs-lookup"><span data-stu-id="ffe58-245">**Security appliance functionality:** hello security appliances deployed in hello perimeter network typically perform hello following functionality:</span></span>
  * <span data-ttu-id="ffe58-246">Firewall: Applicare le regole del firewall o criteri di controllo di accesso per le richieste in ingresso hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-246">Firewall: Enforcing firewall rules or access control policies for hello incoming requests.</span></span>
  * <span data-ttu-id="ffe58-247">Rilevamento e la prevenzione delle minacce: il rilevamento e la risoluzione di attacchi di hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-247">Threat detection and prevention: Detecting and mitigating malicious attacks from hello Internet.</span></span>
  * <span data-ttu-id="ffe58-248">Controllo e registrazione: gestione di log dettagliati per il controllo e l'analisi.</span><span class="sxs-lookup"><span data-stu-id="ffe58-248">Auditing and logging: Maintaining detailed logs for auditing and analysis.</span></span>
  * <span data-ttu-id="ffe58-249">Il proxy inverso: reindirizzamento in ingresso hello richiede server back-end corrispondente toohello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-249">Reverse proxy: Redirecting hello incoming requests toohello corresponding back-end servers.</span></span> <span data-ttu-id="ffe58-250">Il reindirizzamento implica mapping e conversione indirizzi di destinazione hello nei dispositivi front-end hello, in genere i firewall, gli indirizzi di server back-end toohello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-250">This redirection involves mapping and translating hello destination addresses on hello front-end devices, typically firewalls, toohello back-end server addresses.</span></span>
  * <span data-ttu-id="ffe58-251">Inoltrare proxy: fornendo NAT e l'esecuzione di controllo per la comunicazione avviata dall'interno di rete virtuale di hello toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-251">Forward proxy: Providing NAT and performing auditing for communication initiated from within hello virtual network toohello Internet.</span></span>
  * <span data-ttu-id="ffe58-252">Router: Inoltro del traffico in ingresso e tra subnet all'interno di rete virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-252">Router: Forwarding incoming and cross-subnet traffic inside hello virtual network.</span></span>
  * <span data-ttu-id="ffe58-253">Dispositivo VPN: funge da hello cross-premise gateway VPN per la connettività cross-premise VPN tra cliente sulle reti locali e reti virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-253">VPN device: Acting as hello cross-premises VPN gateways for cross-premises VPN connectivity between customer on-premises networks and Azure virtual networks.</span></span>
  * <span data-ttu-id="ffe58-254">Server VPN: accettazione dei client VPN connessione tooAzure le reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="ffe58-254">VPN server: Accepting VPN clients connecting tooAzure virtual networks.</span></span>

> [!TIP]
> <span data-ttu-id="ffe58-255">Mantenere hello separato di due gruppi seguenti: persone hello tooaccess hello perimetrale rete sicurezza ingranaggio e hello utenti autorizzati autorizzati come gli amministratori di sviluppo, distribuzione o le operazioni di applicazione.</span><span class="sxs-lookup"><span data-stu-id="ffe58-255">Keep hello following two groups separate: hello individuals authorized tooaccess hello perimeter network security gear and hello individuals authorized as application development, deployment, or operations administrators.</span></span> <span data-ttu-id="ffe58-256">Se si mantengono separati questi gruppi, sarà possibile separare nettamente i compiti e impedire a una singola persona di ignorare i controlli di sicurezza delle applicazioni e della rete.</span><span class="sxs-lookup"><span data-stu-id="ffe58-256">Keeping these groups separate allows for a segregation of duties and prevents a single person from bypassing both applications security and network security controls.</span></span>
>
>

### <a name="questions-toobe-asked-when-building-network-boundaries"></a><span data-ttu-id="ffe58-257">Toobe domande frequenti durante la compilazione dei limiti di rete</span><span class="sxs-lookup"><span data-stu-id="ffe58-257">Questions toobe asked when building network boundaries</span></span>
<span data-ttu-id="ffe58-258">In questa sezione, a meno che non indicato in particolare, il termine hello "reti" si riferisce tooprivate Azure reti virtuali create da un amministratore della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ffe58-258">In this section, unless specifically mentioned, hello term "networks" refers tooprivate Azure virtual networks created by a subscription administrator.</span></span> <span data-ttu-id="ffe58-259">Hello non riferirsi toohello reti fisiche sottostanti in Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-259">hello term doesn't refer toohello underlying physical networks within Azure.</span></span>

<span data-ttu-id="ffe58-260">Inoltre, reti virtuali di Azure sono spesso utilizzati tooextend tradizionali sulle reti locali.</span><span class="sxs-lookup"><span data-stu-id="ffe58-260">Also, Azure virtual networks are often used tooextend traditional on-premises networks.</span></span> <span data-ttu-id="ffe58-261">È possibile tooincorporate site-to-site o ExpressRoute ibrida soluzioni con architetture di rete perimetrale di rete.</span><span class="sxs-lookup"><span data-stu-id="ffe58-261">It is possible tooincorporate either site-to-site or ExpressRoute hybrid networking solutions with perimeter network architectures.</span></span> <span data-ttu-id="ffe58-262">Questo collegamento ibrido è un fattore da tenere in considerazione durante la creazione dei limiti di sicurezza della rete.</span><span class="sxs-lookup"><span data-stu-id="ffe58-262">This hybrid link is an important consideration in building network security boundaries.</span></span>

<span data-ttu-id="ffe58-263">Hello tre domande seguenti sono tooanswer critici quando si crea una rete con una rete perimetrale e più i limiti di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ffe58-263">hello following three questions are critical tooanswer when you're building a network with a perimeter network and multiple security boundaries.</span></span>

#### <a name="1-how-many-boundaries-are-needed"></a><span data-ttu-id="ffe58-264">1) Quanti limiti servono?</span><span class="sxs-lookup"><span data-stu-id="ffe58-264">1) How many boundaries are needed?</span></span>
<span data-ttu-id="ffe58-265">il primo punto di decisione Hello è toodecide i limiti di sicurezza quanti sono necessari in uno scenario specifico:</span><span class="sxs-lookup"><span data-stu-id="ffe58-265">hello first decision point is toodecide how many security boundaries are needed in a given scenario:</span></span>

* <span data-ttu-id="ffe58-266">Un singolo limite: una rete perimetrale front-end hello, tra la rete virtuale di hello e hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-266">A single boundary: One on hello front-end perimeter network, between hello virtual network and hello Internet.</span></span>
* <span data-ttu-id="ffe58-267">Due limiti: una sul lato Internet della rete perimetrale hello hello e un altro tra subnet della rete perimetrale hello e le subnet di back-end hello hello reti virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-267">Two boundaries: One on hello Internet side of hello perimeter network, and another between hello perimeter network subnet and hello back-end subnets in hello Azure virtual networks.</span></span>
* <span data-ttu-id="ffe58-268">Tre limiti: uno sul lato Internet hello della rete perimetrale hello, uno tra una rete perimetrale hello e le subnet di back-end e uno tra le subnet di back-end hello e rete locale hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-268">Three boundaries: One on hello Internet side of hello perimeter network, one between hello perimeter network and back-end subnets, and one between hello back-end subnets and hello on-premises network.</span></span>
* <span data-ttu-id="ffe58-269">Numero di limiti: variabile.</span><span class="sxs-lookup"><span data-stu-id="ffe58-269">N boundaries: A variable number.</span></span> <span data-ttu-id="ffe58-270">A seconda dei requisiti di sicurezza, non sussiste alcuna limitazione del numero dei limiti di sicurezza che possono essere applicati in una determinata rete toohello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-270">Depending on security requirements, there is no limit toohello number of security boundaries that can be applied in a given network.</span></span>

<span data-ttu-id="ffe58-271">Hello numero e tipo di limiti necessarie variano in base rischio per la tolleranza di errore e hello scenario specifico della società in fase di implementazione.</span><span class="sxs-lookup"><span data-stu-id="ffe58-271">hello number and type of boundaries needed vary based on a company’s risk tolerance and hello specific scenario being implemented.</span></span> <span data-ttu-id="ffe58-272">Si tratta spesso di una decisione comune presa da più gruppi di un'organizzazione, spesso in collaborazione con un team responsabile dei rischi e della conformità, un team responsabile della rete e della piattaforma e un team responsabile dello sviluppo di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="ffe58-272">This decision is often made together with multiple groups within an organization, often including a risk and compliance team, a network and platform team, and an application development team.</span></span> <span data-ttu-id="ffe58-273">Orientamento di sicurezza appropriato hello tooensure questa decisione per ogni implementazione devono includere una pronuncia persone con informazioni di sicurezza, i dati di hello coinvolti e le tecnologie di hello in uso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-273">People with knowledge of security, hello data involved, and hello technologies being used should have a say in this decision tooensure hello appropriate security stance for each implementation.</span></span>

> [!TIP]
> <span data-ttu-id="ffe58-274">Utilizzare il numero più piccolo di hello di limiti che soddisfano i requisiti di sicurezza hello per una determinata situazione.</span><span class="sxs-lookup"><span data-stu-id="ffe58-274">Use hello smallest number of boundaries that satisfy hello security requirements for a given situation.</span></span> <span data-ttu-id="ffe58-275">Con i limiti della altre, operazioni e sulla risoluzione dei problemi può risultare più difficile, nonché hello gestione overhead coinvolti con gestione hello più criteri di limite nel tempo.</span><span class="sxs-lookup"><span data-stu-id="ffe58-275">With more boundaries, operations and troubleshooting can be more difficult, as well as hello management overhead involved with managing hello multiple boundary policies over time.</span></span> <span data-ttu-id="ffe58-276">Un numero insufficiente di limiti, tuttavia, comporta un aumento del rischio.</span><span class="sxs-lookup"><span data-stu-id="ffe58-276">However, insufficient boundaries increase risk.</span></span> <span data-ttu-id="ffe58-277">Trovare un equilibrio hello è fondamentale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-277">Finding hello balance is critical.</span></span>
>
>

<span data-ttu-id="ffe58-278">![6]</span><span class="sxs-lookup"><span data-stu-id="ffe58-278">![6]</span></span>

<span data-ttu-id="ffe58-279">Hello figura precedente viene illustrata una panoramica generale di una rete di limite di tre sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ffe58-279">hello preceding figure shows a high-level view of a three security boundary network.</span></span> <span data-ttu-id="ffe58-280">i limiti di Hello sono compresi tra hello rete perimetrale e Internet hello, hello Azure front-end e back-end subnet private e hello Azure subnet back-end e hello locale aziendale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-280">hello boundaries are between hello perimeter network and hello Internet, hello Azure front-end and back-end private subnets, and hello Azure back-end subnet and hello on-premises corporate network.</span></span>

#### <a name="2-where-are-hello-boundaries-located"></a><span data-ttu-id="ffe58-281">2) in cui si trovano i limiti di hello?</span><span class="sxs-lookup"><span data-stu-id="ffe58-281">2) Where are hello boundaries located?</span></span>
<span data-ttu-id="ffe58-282">Una volta che viene deciso al numero di hello di limiti, in cui li è tooimplement hello successivo punto di decisione.</span><span class="sxs-lookup"><span data-stu-id="ffe58-282">Once hello number of boundaries are decided, where tooimplement them is hello next decision point.</span></span> <span data-ttu-id="ffe58-283">In genere, sono disponibili tre opzioni:</span><span class="sxs-lookup"><span data-stu-id="ffe58-283">There are generally three choices:</span></span>

* <span data-ttu-id="ffe58-284">Usare un servizio intermediario basato su Internet (ad esempio, un Web application firewall basato su cloud, non trattato in questo documento)</span><span class="sxs-lookup"><span data-stu-id="ffe58-284">Using an Internet-based intermediary service (for example, a cloud-based Web application firewall, which is not discussed in this document)</span></span>
* <span data-ttu-id="ffe58-285">Usare funzionalità native e/o appliance virtuali di rete in Azure</span><span class="sxs-lookup"><span data-stu-id="ffe58-285">Using native features and/or network virtual appliances in Azure</span></span>
* <span data-ttu-id="ffe58-286">Utilizzo di dispositivi fisici nella rete locale di hello</span><span class="sxs-lookup"><span data-stu-id="ffe58-286">Using physical devices on hello on-premises network</span></span>

<span data-ttu-id="ffe58-287">Nelle reti di Azure esclusivamente, opzioni di hello sono funzionalità native di Azure (ad esempio, Bilanciamento carico di Azure) o ai dispositivi di rete virtuale da hello ampio ecosistema partner di Azure (ad esempio, il punto di controllo firewall).</span><span class="sxs-lookup"><span data-stu-id="ffe58-287">On purely Azure networks, hello options are native Azure features (for example, Azure Load Balancers) or network virtual appliances from hello rich partner ecosystem of Azure (for example, Check Point firewalls).</span></span>

<span data-ttu-id="ffe58-288">Se un limite è necessaria tra Azure e una rete locale, i dispositivi di sicurezza hello possono risiedere in entrambi i lati della connessione hello (o entrambi i lati).</span><span class="sxs-lookup"><span data-stu-id="ffe58-288">If a boundary is needed between Azure and an on-premises network, hello security devices can reside on either side of hello connection (or both sides).</span></span> <span data-ttu-id="ffe58-289">Una decisione di conseguenza deve essere effettuata in un dispositivo di sicurezza tooplace percorso hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-289">Thus a decision must be made on hello location tooplace security gear.</span></span>

<span data-ttu-id="ffe58-290">Nella figura precedente hello hello Internet-a-perimetrale i limiti di hello front-to-back-end sono interamente contenuti in Azure e devono essere una funzionalità native di Azure o ai dispositivi di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-290">In hello previous figure, hello Internet-to-perimeter network and hello front-to-back-end boundaries are entirely contained within Azure, and must be either native Azure features or network virtual appliances.</span></span> <span data-ttu-id="ffe58-291">Dispositivi di sicurezza su hello limite tra Azure (subnet back-end) e la rete aziendale hello potrebbe essere in hello lato Azure o sul lato locale di hello o una combinazione di dispositivi su entrambi i lati.</span><span class="sxs-lookup"><span data-stu-id="ffe58-291">Security devices on hello boundary between Azure (back-end subnet) and hello corporate network could be either on hello Azure side or hello on-premises side, or even a combination of devices on both sides.</span></span> <span data-ttu-id="ffe58-292">Può essere vantaggi significativi e opzione tooeither svantaggi è necessario considerare seriamente.</span><span class="sxs-lookup"><span data-stu-id="ffe58-292">There can be significant advantages and disadvantages tooeither option that must be seriously considered.</span></span>

<span data-ttu-id="ffe58-293">Ad esempio, utilizzando il dispositivo di sicurezza fisica esistente su hello locale sul lato di rete ha il vantaggio di hello che non è necessaria alcuna nuova ingranaggio.</span><span class="sxs-lookup"><span data-stu-id="ffe58-293">For example, using existing physical security gear on hello on-premises network side has hello advantage that no new gear is needed.</span></span> <span data-ttu-id="ffe58-294">È sufficiente la riconfigurazione dei dispositivi esistenti.</span><span class="sxs-lookup"><span data-stu-id="ffe58-294">It just needs reconfiguration.</span></span> <span data-ttu-id="ffe58-295">Hello svantaggio, tuttavia, è che tutto il traffico deve tornare da Azure toohello locale rete toobe rilevato da ingranaggio sicurezza hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-295">hello disadvantage, however, is that all traffic must come back from Azure toohello on-premises network toobe seen by hello security gear.</span></span> <span data-ttu-id="ffe58-296">In questo modo il traffico di Azure in Azure potrebbe causare una latenza significativa e influiscono sull'esperienza utente e le prestazioni di applicazioni, se è stato forzato toohello indietro per l'applicazione di criteri di sicurezza di rete locale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-296">Thus Azure-to-Azure traffic could incur significant latency, and affect application performance and user experience, if it was forced back toohello on-premises network for security policy enforcement.</span></span>

#### <a name="3-how-are-hello-boundaries-implemented"></a><span data-ttu-id="ffe58-297">3) come vengono implementati i limiti di hello?</span><span class="sxs-lookup"><span data-stu-id="ffe58-297">3) How are hello boundaries implemented?</span></span>
<span data-ttu-id="ffe58-298">Ogni limite di sicurezza sarà probabilmente necessario requisiti di funzionalità diverso (ad esempio, gli ID e regole del firewall hello lato Internet della rete perimetrale hello, ma solo gli ACL tra una rete perimetrale hello e subnet back-end).</span><span class="sxs-lookup"><span data-stu-id="ffe58-298">Each security boundary will likely have different capability requirements (for example, IDS and firewall rules on hello Internet side of hello perimeter network, but only ACLs between hello perimeter network and back-end subnet).</span></span> <span data-ttu-id="ffe58-299">Decidere quale dispositivo (o il numero di dispositivi) dipende toouse hello requisiti di scenario e sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ffe58-299">Deciding on which device (or how many devices) toouse depends on hello scenario and security requirements.</span></span> <span data-ttu-id="ffe58-300">Hello nella sezione seguente, gli esempi 1, 2 e 3 illustrano alcune opzioni che potrebbero essere usate.</span><span class="sxs-lookup"><span data-stu-id="ffe58-300">In hello following section, examples 1, 2, and 3 discuss some options that could be used.</span></span> <span data-ttu-id="ffe58-301">Verifica delle funzionalità di rete nativo Azure hello e dispositivi hello disponibili in Azure dall'ecosistema di partner hello Mostra hello innumerevoli opzioni disponibile toosolve praticamente a qualsiasi scenario.</span><span class="sxs-lookup"><span data-stu-id="ffe58-301">Reviewing hello Azure native network features and hello devices available in Azure from hello partner ecosystem shows hello myriad options available toosolve virtually any scenario.</span></span>

<span data-ttu-id="ffe58-302">Un altro punto di decisione di implementazione della chiave è la modalità tooconnect hello locale rete con Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-302">Another key implementation decision point is how tooconnect hello on-premises network with Azure.</span></span> <span data-ttu-id="ffe58-303">È necessario utilizzare hello Azure gateway virtuale o un dispositivo di rete virtuale?</span><span class="sxs-lookup"><span data-stu-id="ffe58-303">Should you use hello Azure virtual gateway or a network virtual appliance?</span></span> <span data-ttu-id="ffe58-304">Queste opzioni sono descritte più dettagliatamente in hello successiva sezione (esempi 4, 5 e 6).</span><span class="sxs-lookup"><span data-stu-id="ffe58-304">These options are discussed in greater detail in hello following section (examples 4, 5, and 6).</span></span>

<span data-ttu-id="ffe58-305">Inoltre, potrebbe essere necessario consultare informazioni sul traffico tra reti virtuali all'interno di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-305">Additionally, traffic between virtual networks within Azure may be needed.</span></span> <span data-ttu-id="ffe58-306">Questi scenari verranno aggiunto in futuro hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-306">These scenarios will be added in hello future.</span></span>

<span data-ttu-id="ffe58-307">Dopo avere stabilito le risposte hello domande precedenti toohello, hello [avvio veloce](#fast-start) sezione consente di identificare quali esempi sono più appropriati per un determinato scenario.</span><span class="sxs-lookup"><span data-stu-id="ffe58-307">Once you know hello answers toohello previous questions, hello [Fast Start](#fast-start) section can help identify which examples are most appropriate for a given scenario.</span></span>

## <a name="examples-building-security-boundaries-with-azure-virtual-networks"></a><span data-ttu-id="ffe58-308">Esempi: Creare limiti di sicurezza con le reti virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="ffe58-308">Examples: Building security boundaries with Azure virtual networks</span></span>
### <a name="example-1-build-a-perimeter-network-toohelp-protect-applications-with-nsgs"></a><span data-ttu-id="ffe58-309">Esempio 1 compilazione un toohelp rete perimetrale proteggere le applicazioni con NSGs</span><span class="sxs-lookup"><span data-stu-id="ffe58-309">Example 1 Build a perimeter network toohelp protect applications with NSGs</span></span>
<span data-ttu-id="ffe58-310">[Eseguire il backup di start tooFast](#fast-start) | [Detailed compilare le istruzioni per questo esempio][Example1]</span><span class="sxs-lookup"><span data-stu-id="ffe58-310">[Back tooFast start](#fast-start) | [Detailed build instructions for this example][Example1]</span></span>

<span data-ttu-id="ffe58-311">[![7]][7]</span><span class="sxs-lookup"><span data-stu-id="ffe58-311">[![7]][7]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="ffe58-312">Descrizione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="ffe58-312">Environment description</span></span>
<span data-ttu-id="ffe58-313">In questo esempio, è associata una sottoscrizione che contiene hello seguenti risorse:</span><span class="sxs-lookup"><span data-stu-id="ffe58-313">In this example, there is a subscription that contains hello following resources:</span></span>

- <span data-ttu-id="ffe58-314">Un unico gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="ffe58-314">A single resource group</span></span>
- <span data-ttu-id="ffe58-315">Una rete virtuale con due subnet: front-end e back-end</span><span class="sxs-lookup"><span data-stu-id="ffe58-315">A virtual network with two subnets: “FrontEnd” and “BackEnd”</span></span>
- <span data-ttu-id="ffe58-316">Un gruppo di sicurezza di rete che viene applicato tooboth subnet</span><span class="sxs-lookup"><span data-stu-id="ffe58-316">A Network Security Group that is applied tooboth subnets</span></span>
- <span data-ttu-id="ffe58-317">Un server Windows che rappresenta un server Web applicazioni ("IIS01")</span><span class="sxs-lookup"><span data-stu-id="ffe58-317">A Windows server that represents an application web server (“IIS01”)</span></span>
- <span data-ttu-id="ffe58-318">Due server Windows che rappresentano server back-end applicazioni ("AppVM01", "AppVM02")</span><span class="sxs-lookup"><span data-stu-id="ffe58-318">Two Windows servers that represent application back-end servers (“AppVM01”, “AppVM02”)</span></span>
- <span data-ttu-id="ffe58-319">Un server Windows che rappresenta un server DNS ("DNS01")</span><span class="sxs-lookup"><span data-stu-id="ffe58-319">A Windows server that represents a DNS server (“DNS01”)</span></span>
- <span data-ttu-id="ffe58-320">Un indirizzo IP pubblico associato hello applicazione web server</span><span class="sxs-lookup"><span data-stu-id="ffe58-320">A public IP associated with hello application web server</span></span>

<span data-ttu-id="ffe58-321">Per gli script e un modello di gestione risorse di Azure, vedere hello [istruzioni di compilazione][Example1].</span><span class="sxs-lookup"><span data-stu-id="ffe58-321">For scripts and an Azure Resource Manager template, see hello [detailed build instructions][Example1].</span></span>

#### <a name="nsg-description"></a><span data-ttu-id="ffe58-322">Descrizione di un gruppo di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="ffe58-322">NSG description</span></span>
<span data-ttu-id="ffe58-323">In questo esempio viene creato un gruppo di sicurezza di rete, in cui vengono poi caricate sei regole.</span><span class="sxs-lookup"><span data-stu-id="ffe58-323">In this example, an NSG group is built and then loaded with six rules.</span></span>

> [!TIP]
> <span data-ttu-id="ffe58-324">In generale, è necessario creare regole "Consenti" specifiche prima, seguita da più generico hello "Nega" le regole.</span><span class="sxs-lookup"><span data-stu-id="ffe58-324">Generally speaking, you should create your specific “Allow” rules first, followed by hello more generic “Deny” rules.</span></span> <span data-ttu-id="ffe58-325">Hello assegnata la priorità determina quali regole vengono valutate per prime.</span><span class="sxs-lookup"><span data-stu-id="ffe58-325">hello given priority dictates which rules are evaluated first.</span></span> <span data-ttu-id="ffe58-326">Una volta traffico trovato tooapply tooa specifica regola, non vengono valutate altre regole.</span><span class="sxs-lookup"><span data-stu-id="ffe58-326">Once traffic is found tooapply tooa specific rule, no further rules are evaluated.</span></span> <span data-ttu-id="ffe58-327">Regole di gruppo possono essere applicate uno hello direzione in ingresso o in uscita (dalla prospettiva di hello della subnet hello).</span><span class="sxs-lookup"><span data-stu-id="ffe58-327">NSG rules can apply in either hello inbound or outbound direction (from hello perspective of hello subnet).</span></span>
>
>

<span data-ttu-id="ffe58-328">In modo dichiarativo, hello segue le regole è compilato per il traffico in ingresso:</span><span class="sxs-lookup"><span data-stu-id="ffe58-328">Declaratively, hello following rules are being built for inbound traffic:</span></span>

1. <span data-ttu-id="ffe58-329">Il traffico DNS interno (porta 53) è consentito.</span><span class="sxs-lookup"><span data-stu-id="ffe58-329">Internal DNS traffic (port 53) is allowed.</span></span>
2. <span data-ttu-id="ffe58-330">È consentito il traffico RDP (porta 3389) da hello Internet tooany macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-330">RDP traffic (port 3389) from hello Internet tooany Virtual Machine is allowed.</span></span>
3. <span data-ttu-id="ffe58-331">È consentito il traffico HTTP (porta 80) dal server di tooweb Internet hello (IIS01).</span><span class="sxs-lookup"><span data-stu-id="ffe58-331">HTTP traffic (port 80) from hello Internet tooweb server (IIS01) is allowed.</span></span>
4. <span data-ttu-id="ffe58-332">Qualsiasi tipo di traffico (tutte le porte) da IIS01 tooAppVM1 è consentita.</span><span class="sxs-lookup"><span data-stu-id="ffe58-332">Any traffic (all ports) from IIS01 tooAppVM1 is allowed.</span></span>
5. <span data-ttu-id="ffe58-333">Qualsiasi tipo di traffico (tutte le porte) da hello Internet toohello intera rete virtuale (entrambi subnet) è stato negato.</span><span class="sxs-lookup"><span data-stu-id="ffe58-333">Any traffic (all ports) from hello Internet toohello entire virtual network (both subnets) is denied.</span></span>
6. <span data-ttu-id="ffe58-334">Qualsiasi tipo di traffico (tutte le porte) dalla subnet di back-end toohello di hello subnet front-end è stato negato.</span><span class="sxs-lookup"><span data-stu-id="ffe58-334">Any traffic (all ports) from hello front-end subnet toohello back-end subnet is denied.</span></span>

<span data-ttu-id="ffe58-335">Con queste subnet associata tooeach regole, se una richiesta HTTP in ingresso dal server web toohello Internet hello entrambi regole 3 (Consenti) e 5 (Nega) verrà applicata.</span><span class="sxs-lookup"><span data-stu-id="ffe58-335">With these rules bound tooeach subnet, if an HTTP request was inbound from hello Internet toohello web server, both rules 3 (allow) and 5 (deny) would apply.</span></span> <span data-ttu-id="ffe58-336">Tuttavia, poiché la regola 3 ha una priorità maggiore, verrà applicata solo tale regola e la regola 5 non verrà presa in considerazione.</span><span class="sxs-lookup"><span data-stu-id="ffe58-336">But because rule 3 has a higher priority, only it would apply, and rule 5 would not come into play.</span></span> <span data-ttu-id="ffe58-337">Richiesta HTTP hello sarebbe è pertanto a server web toohello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-337">Thus hello HTTP request would be allowed toohello web server.</span></span> <span data-ttu-id="ffe58-338">Se il traffico stesso cercava server hello DNS01 tooreach, regola 5 (Nega) sarebbe hello tooapply primo e il traffico di hello non sarebbe consentito toopass toohello server.</span><span class="sxs-lookup"><span data-stu-id="ffe58-338">If that same traffic was trying tooreach hello DNS01 server, rule 5 (deny) would be hello first tooapply, and hello traffic would not be allowed toopass toohello server.</span></span> <span data-ttu-id="ffe58-339">Regola 6 (Nega) blocchi hello subnet front-end dalla conversazione toohello subnet di back-end (ad eccezione di traffico consentito nelle regole 1 e 4).</span><span class="sxs-lookup"><span data-stu-id="ffe58-339">Rule 6 (deny) blocks hello front-end subnet from talking toohello back-end subnet (except for allowed traffic in rules 1 and 4).</span></span> <span data-ttu-id="ffe58-340">Il set di regole protegge rete back-end hello nel caso in cui un utente malintenzionato compromette l'applicazione web hello in front-end hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-340">This rule-set protects hello back-end network in case an attacker compromises hello web application on hello front end.</span></span> <span data-ttu-id="ffe58-341">autore dell'attacco Hello sarebbe non dispongono di accesso toohello back-end "protetto" rete (solo tooresources esposte nel server AppVM01 hello).</span><span class="sxs-lookup"><span data-stu-id="ffe58-341">hello attacker would have limited access toohello back-end “protected” network (only tooresources exposed on hello AppVM01 server).</span></span>

<span data-ttu-id="ffe58-342">È una regola in uscita predefinita che consente il traffico in uscita toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-342">There is a default outbound rule that allows traffic out toohello Internet.</span></span> <span data-ttu-id="ffe58-343">Per questo esempio si consente il traffico in uscita e non si modificano le regole in uscita.</span><span class="sxs-lookup"><span data-stu-id="ffe58-343">For this example, we’re allowing outbound traffic and not modifying any outbound rules.</span></span> <span data-ttu-id="ffe58-344">toolock verso il basso il traffico in entrambe le direzioni, routing definito dall'utente è obbligatorio (vedere l'esempio 3).</span><span class="sxs-lookup"><span data-stu-id="ffe58-344">toolock down traffic in both directions, user-defined routing is required (see example 3).</span></span>

#### <a name="conclusion"></a><span data-ttu-id="ffe58-345">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="ffe58-345">Conclusion</span></span>
<span data-ttu-id="ffe58-346">Questo esempio è un modo relativamente semplice e diretto di isolamento di subnet di back-end hello dal traffico in ingresso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-346">This example is a relatively simple and straightforward way of isolating hello back-end subnet from inbound traffic.</span></span> <span data-ttu-id="ffe58-347">Per ulteriori informazioni, vedere hello [istruzioni di compilazione][Example1].</span><span class="sxs-lookup"><span data-stu-id="ffe58-347">For more information, see hello [detailed build instructions][Example1].</span></span> <span data-ttu-id="ffe58-348">Le istruzioni includono:</span><span class="sxs-lookup"><span data-stu-id="ffe58-348">These instructions include:</span></span>

* <span data-ttu-id="ffe58-349">Come toobuild questo perimetrale della rete con gli script di PowerShell classici.</span><span class="sxs-lookup"><span data-stu-id="ffe58-349">How toobuild this perimeter network with classic PowerShell scripts.</span></span>
* <span data-ttu-id="ffe58-350">Come toobuild questo perimetrale della rete con un modello di gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-350">How toobuild this perimeter network with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="ffe58-351">Descrizioni dettagliate di ogni comando del gruppo di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="ffe58-351">Detailed descriptions of each NSG command.</span></span>
* <span data-ttu-id="ffe58-352">Scenari dettagliati del flusso di traffico che illustrano il modo in cui il traffico viene consentito o negato su ogni livello</span><span class="sxs-lookup"><span data-stu-id="ffe58-352">Detailed traffic flow scenarios, showing how traffic is allowed or denied in each layer.</span></span>


### <a name="example-2-build-a-perimeter-network-toohelp-protect-applications-with-a-firewall-and-nsgs"></a><span data-ttu-id="ffe58-353">Compilazione di esempio 2 un toohelp rete perimetrale proteggere le applicazioni con un firewall e NSGs</span><span class="sxs-lookup"><span data-stu-id="ffe58-353">Example 2 Build a perimeter network toohelp protect applications with a firewall and NSGs</span></span>
<span data-ttu-id="ffe58-354">[Eseguire il backup di start tooFast](#fast-start) | [Detailed compilare le istruzioni per questo esempio][Example2]</span><span class="sxs-lookup"><span data-stu-id="ffe58-354">[Back tooFast start](#fast-start) | [Detailed build instructions for this example][Example2]</span></span>

<span data-ttu-id="ffe58-355">[![8]][8]</span><span class="sxs-lookup"><span data-stu-id="ffe58-355">[![8]][8]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="ffe58-356">Descrizione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="ffe58-356">Environment description</span></span>
<span data-ttu-id="ffe58-357">In questo esempio, è associata una sottoscrizione che contiene hello seguenti risorse:</span><span class="sxs-lookup"><span data-stu-id="ffe58-357">In this example, there is a subscription that contains hello following resources:</span></span>

* <span data-ttu-id="ffe58-358">Un unico gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="ffe58-358">A single resource group</span></span>
* <span data-ttu-id="ffe58-359">Una rete virtuale con due subnet: front-end e back-end</span><span class="sxs-lookup"><span data-stu-id="ffe58-359">A virtual network with two subnets: “FrontEnd” and “BackEnd”</span></span>
* <span data-ttu-id="ffe58-360">Un gruppo di sicurezza di rete che viene applicato tooboth subnet</span><span class="sxs-lookup"><span data-stu-id="ffe58-360">A Network Security Group that is applied tooboth subnets</span></span>
* <span data-ttu-id="ffe58-361">Un accessorio virtuale di rete, in questo caso un firewall, connesso subnet front-end toohello</span><span class="sxs-lookup"><span data-stu-id="ffe58-361">A network virtual appliance, in this case a firewall, connected toohello front-end subnet</span></span>
* <span data-ttu-id="ffe58-362">Un server Windows che rappresenta un server Web applicazioni ("IIS01")</span><span class="sxs-lookup"><span data-stu-id="ffe58-362">A Windows server that represents an application web server (“IIS01”)</span></span>
* <span data-ttu-id="ffe58-363">Due server Windows che rappresentano server back-end applicazioni ("AppVM01", "AppVM02")</span><span class="sxs-lookup"><span data-stu-id="ffe58-363">Two Windows servers that represent application back-end servers (“AppVM01”, “AppVM02”)</span></span>
* <span data-ttu-id="ffe58-364">Un server Windows che rappresenta un server DNS ("DNS01")</span><span class="sxs-lookup"><span data-stu-id="ffe58-364">A Windows server that represents a DNS server (“DNS01”)</span></span>

<span data-ttu-id="ffe58-365">Per gli script e un modello di gestione risorse di Azure, vedere hello [istruzioni di compilazione][Example2].</span><span class="sxs-lookup"><span data-stu-id="ffe58-365">For scripts and an Azure Resource Manager template, see hello [detailed build instructions][Example2].</span></span>

#### <a name="nsg-description"></a><span data-ttu-id="ffe58-366">Descrizione di un gruppo di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="ffe58-366">NSG description</span></span>
<span data-ttu-id="ffe58-367">In questo esempio viene creato un gruppo di sicurezza di rete, in cui vengono poi caricate sei regole.</span><span class="sxs-lookup"><span data-stu-id="ffe58-367">In this example, an NSG group is built and then loaded with six rules.</span></span>

> [!TIP]
> <span data-ttu-id="ffe58-368">In generale, è necessario creare regole "Consenti" specifiche prima, seguita da più generico hello "Nega" le regole.</span><span class="sxs-lookup"><span data-stu-id="ffe58-368">Generally speaking, you should create your specific “Allow” rules first, followed by hello more generic “Deny” rules.</span></span> <span data-ttu-id="ffe58-369">Hello assegnata la priorità determina quali regole vengono valutate per prime.</span><span class="sxs-lookup"><span data-stu-id="ffe58-369">hello given priority dictates which rules are evaluated first.</span></span> <span data-ttu-id="ffe58-370">Una volta traffico trovato tooapply tooa specifica regola, non vengono valutate altre regole.</span><span class="sxs-lookup"><span data-stu-id="ffe58-370">Once traffic is found tooapply tooa specific rule, no further rules are evaluated.</span></span> <span data-ttu-id="ffe58-371">Regole di gruppo possono essere applicate uno hello direzione in ingresso o in uscita (dalla prospettiva di hello della subnet hello).</span><span class="sxs-lookup"><span data-stu-id="ffe58-371">NSG rules can apply in either hello inbound or outbound direction (from hello perspective of hello subnet).</span></span>
>
>

<span data-ttu-id="ffe58-372">In modo dichiarativo, hello segue le regole è compilato per il traffico in ingresso:</span><span class="sxs-lookup"><span data-stu-id="ffe58-372">Declaratively, hello following rules are being built for inbound traffic:</span></span>

1. <span data-ttu-id="ffe58-373">Il traffico DNS interno (porta 53) è consentito.</span><span class="sxs-lookup"><span data-stu-id="ffe58-373">Internal DNS traffic (port 53) is allowed.</span></span>
2. <span data-ttu-id="ffe58-374">È consentito il traffico RDP (porta 3389) da hello Internet tooany macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-374">RDP traffic (port 3389) from hello Internet tooany Virtual Machine is allowed.</span></span>
3. <span data-ttu-id="ffe58-375">Internet (tutte le porte) traffico toohello dispositivi di rete virtuali (firewall) sono consentito.</span><span class="sxs-lookup"><span data-stu-id="ffe58-375">Any Internet traffic (all ports) toohello network virtual appliance (firewall) is allowed.</span></span>
4. <span data-ttu-id="ffe58-376">Qualsiasi tipo di traffico (tutte le porte) da IIS01 tooAppVM1 è consentita.</span><span class="sxs-lookup"><span data-stu-id="ffe58-376">Any traffic (all ports) from IIS01 tooAppVM1 is allowed.</span></span>
5. <span data-ttu-id="ffe58-377">Qualsiasi tipo di traffico (tutte le porte) da hello Internet toohello intera rete virtuale (entrambi subnet) è stato negato.</span><span class="sxs-lookup"><span data-stu-id="ffe58-377">Any traffic (all ports) from hello Internet toohello entire virtual network (both subnets) is denied.</span></span>
6. <span data-ttu-id="ffe58-378">Qualsiasi tipo di traffico (tutte le porte) dalla subnet di back-end toohello di hello subnet front-end è stato negato.</span><span class="sxs-lookup"><span data-stu-id="ffe58-378">Any traffic (all ports) from hello front-end subnet toohello back-end subnet is denied.</span></span>

<span data-ttu-id="ffe58-379">Con queste subnet associata tooeach regole, se una richiesta HTTP in ingresso da toohello Windows firewall, hello entrambi regole 3 (Consenti) e 5 (Nega) verrà applicata.</span><span class="sxs-lookup"><span data-stu-id="ffe58-379">With these rules bound tooeach subnet, if an HTTP request was inbound from hello Internet toohello firewall, both rules 3 (allow) and 5 (deny) would apply.</span></span> <span data-ttu-id="ffe58-380">Tuttavia, poiché la regola 3 ha una priorità maggiore, verrà applicata solo tale regola e la regola 5 non verrà presa in considerazione.</span><span class="sxs-lookup"><span data-stu-id="ffe58-380">But because rule 3 has a higher priority, only it would apply, and rule 5 would not come into play.</span></span> <span data-ttu-id="ffe58-381">In questo modo la richiesta HTTP hello sia possibile usare toohello firewall.</span><span class="sxs-lookup"><span data-stu-id="ffe58-381">Thus hello HTTP request would be allowed toohello firewall.</span></span> <span data-ttu-id="ffe58-382">Se il traffico stesso cercava server hello IIS01 tooreach, anche se è nella subnet front-end hello, regola 5 (Nega) si applicano, e il traffico di hello non sarebbe consentito toopass toohello server.</span><span class="sxs-lookup"><span data-stu-id="ffe58-382">If that same traffic was trying tooreach hello IIS01 server, even though it’s on hello front-end subnet, rule 5 (deny) would apply, and hello traffic would not be allowed toopass toohello server.</span></span> <span data-ttu-id="ffe58-383">Regola 6 (Nega) blocchi hello subnet front-end dalla conversazione toohello subnet di back-end (ad eccezione di traffico consentito nelle regole 1 e 4).</span><span class="sxs-lookup"><span data-stu-id="ffe58-383">Rule 6 (deny) blocks hello front-end subnet from talking toohello back-end subnet (except for allowed traffic in rules 1 and 4).</span></span> <span data-ttu-id="ffe58-384">Il set di regole protegge rete back-end hello nel caso in cui un utente malintenzionato compromette l'applicazione web hello in front-end hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-384">This rule-set protects hello back-end network in case an attacker compromises hello web application on hello front end.</span></span> <span data-ttu-id="ffe58-385">autore dell'attacco Hello sarebbe non dispongono di accesso toohello back-end "protetto" rete (solo tooresources esposte nel server AppVM01 hello).</span><span class="sxs-lookup"><span data-stu-id="ffe58-385">hello attacker would have limited access toohello back-end “protected” network (only tooresources exposed on hello AppVM01 server).</span></span>

<span data-ttu-id="ffe58-386">È una regola in uscita predefinita che consente il traffico in uscita toohello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-386">There is a default outbound rule that allows traffic out toohello Internet.</span></span> <span data-ttu-id="ffe58-387">Per questo esempio si consente il traffico in uscita e non si modificano le regole in uscita.</span><span class="sxs-lookup"><span data-stu-id="ffe58-387">For this example, we’re allowing outbound traffic and not modifying any outbound rules.</span></span> <span data-ttu-id="ffe58-388">toolock verso il basso il traffico in entrambe le direzioni, routing definito dall'utente è obbligatorio (vedere l'esempio 3).</span><span class="sxs-lookup"><span data-stu-id="ffe58-388">toolock down traffic in both directions, user-defined routing is required (see example 3).</span></span>

#### <a name="firewall-rule-description"></a><span data-ttu-id="ffe58-389">Descrizione della regola del firewall</span><span class="sxs-lookup"><span data-stu-id="ffe58-389">Firewall rule description</span></span>
<span data-ttu-id="ffe58-390">Firewall hello, regole di inoltro devono essere creata.</span><span class="sxs-lookup"><span data-stu-id="ffe58-390">On hello firewall, forwarding rules should be created.</span></span> <span data-ttu-id="ffe58-391">Poiché questo esempio solo le route del traffico Internet in entrata toohello firewall e server web toohello quindi, solo uno di inoltro rete Network address translation () non è necessario regola.</span><span class="sxs-lookup"><span data-stu-id="ffe58-391">Since this example only routes Internet traffic in-bound toohello firewall and then toohello web server, only one forwarding network address translation (NAT) rule is needed.</span></span>

<span data-ttu-id="ffe58-392">regola di inoltro Hello accetta qualsiasi indirizzo di origine in ingresso che colpisce firewall hello tentativo tooreach HTTP (porta 80 o 443 per HTTPS).</span><span class="sxs-lookup"><span data-stu-id="ffe58-392">hello forwarding rule accepts any inbound source address that hits hello firewall trying tooreach HTTP (port 80 or 443 for HTTPS).</span></span> <span data-ttu-id="ffe58-393">Dispone di inviati all'esterno dell'interfaccia locale del firewall hello e reindirizzato toohello server web con indirizzo IP del 10.0.1.5 hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-393">It's sent out of hello firewall’s local interface and redirected toohello web server with hello IP Address of 10.0.1.5.</span></span>

#### <a name="conclusion"></a><span data-ttu-id="ffe58-394">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="ffe58-394">Conclusion</span></span>
<span data-ttu-id="ffe58-395">Questo esempio è un modo relativamente semplice di protezione delle applicazioni con un firewall e l'isolamento di subnet di back-end hello dal traffico in ingresso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-395">This example is a relatively straightforward way of protecting your application with a firewall and isolating hello back-end subnet from inbound traffic.</span></span> <span data-ttu-id="ffe58-396">Per ulteriori informazioni, vedere hello [istruzioni di compilazione][Example2].</span><span class="sxs-lookup"><span data-stu-id="ffe58-396">For more information, see hello [detailed build instructions][Example2].</span></span> <span data-ttu-id="ffe58-397">Le istruzioni includono:</span><span class="sxs-lookup"><span data-stu-id="ffe58-397">These instructions include:</span></span>

* <span data-ttu-id="ffe58-398">Come toobuild questo perimetrale della rete con gli script di PowerShell classici.</span><span class="sxs-lookup"><span data-stu-id="ffe58-398">How toobuild this perimeter network with classic PowerShell scripts.</span></span>
* <span data-ttu-id="ffe58-399">Come toobuild in questo esempio con un modello di gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-399">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="ffe58-400">Descrizioni dettagliate di ogni comando del gruppo di sicurezza di rete e di ogni regola del firewall</span><span class="sxs-lookup"><span data-stu-id="ffe58-400">Detailed descriptions of each NSG command and firewall rule.</span></span>
* <span data-ttu-id="ffe58-401">Scenari dettagliati del flusso di traffico che illustrano il modo in cui il traffico viene consentito o negato su ogni livello</span><span class="sxs-lookup"><span data-stu-id="ffe58-401">Detailed traffic flow scenarios, showing how traffic is allowed or denied in each layer.</span></span>

### <a name="example-3-build-a-perimeter-network-toohelp-protect-networks-with-a-firewall-and-udr-and-nsg"></a><span data-ttu-id="ffe58-402">Esempio 3 compilazione un toohelp rete perimetrale proteggere reti e un firewall e UDR NSG</span><span class="sxs-lookup"><span data-stu-id="ffe58-402">Example 3 Build a perimeter network toohelp protect networks with a firewall and UDR and NSG</span></span>
<span data-ttu-id="ffe58-403">[Eseguire il backup di start tooFast](#fast-start) | [Detailed compilare le istruzioni per questo esempio][Example3]</span><span class="sxs-lookup"><span data-stu-id="ffe58-403">[Back tooFast start](#fast-start) | [Detailed build instructions for this example][Example3]</span></span>

<span data-ttu-id="ffe58-404">[![9]][9]</span><span class="sxs-lookup"><span data-stu-id="ffe58-404">[![9]][9]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="ffe58-405">Descrizione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="ffe58-405">Environment description</span></span>
<span data-ttu-id="ffe58-406">In questo esempio, è associata una sottoscrizione che contiene hello seguenti risorse:</span><span class="sxs-lookup"><span data-stu-id="ffe58-406">In this example, there is a subscription that contains hello following resources:</span></span>

* <span data-ttu-id="ffe58-407">Un unico gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="ffe58-407">A single resource group</span></span>
* <span data-ttu-id="ffe58-408">Una rete virtuale con tre subnet: "SecNet", "FrontEnd" e "BackEnd"</span><span class="sxs-lookup"><span data-stu-id="ffe58-408">A virtual network with three subnets: “SecNet”, “FrontEnd”, and “BackEnd”</span></span>
* <span data-ttu-id="ffe58-409">Un accessorio virtuale di rete, in questo caso un firewall, connesso toohello SecNet subnet</span><span class="sxs-lookup"><span data-stu-id="ffe58-409">A network virtual appliance, in this case a firewall, connected toohello SecNet subnet</span></span>
* <span data-ttu-id="ffe58-410">Un server Windows che rappresenta un server Web applicazioni ("IIS01")</span><span class="sxs-lookup"><span data-stu-id="ffe58-410">A Windows server that represents an application web server (“IIS01”)</span></span>
* <span data-ttu-id="ffe58-411">Due server Windows che rappresentano server back-end applicazioni ("AppVM01", "AppVM02")</span><span class="sxs-lookup"><span data-stu-id="ffe58-411">Two Windows servers that represent application back-end servers (“AppVM01”, “AppVM02”)</span></span>
* <span data-ttu-id="ffe58-412">Un server Windows che rappresenta un server DNS ("DNS01")</span><span class="sxs-lookup"><span data-stu-id="ffe58-412">A Windows server that represents a DNS server (“DNS01”)</span></span>

<span data-ttu-id="ffe58-413">Per gli script e un modello di gestione risorse di Azure, vedere hello [istruzioni di compilazione][Example3].</span><span class="sxs-lookup"><span data-stu-id="ffe58-413">For scripts and an Azure Resource Manager template, see hello [detailed build instructions][Example3].</span></span>

#### <a name="udr-description"></a><span data-ttu-id="ffe58-414">Descrizione delle route definite dall'utente (UDR)</span><span class="sxs-lookup"><span data-stu-id="ffe58-414">UDR description</span></span>
<span data-ttu-id="ffe58-415">Per impostazione predefinita, hello seguendo le route di sistema è definito come:</span><span class="sxs-lookup"><span data-stu-id="ffe58-415">By default, hello following system routes are defined as:</span></span>

        Effective routes :
         Address Prefix    Next hop type    Next hop IP address Status   Source     
         --------------    -------------    ------------------- ------   ------     
         {10.0.0.0/16}     VNETLocal                            Active   Default    
         {0.0.0.0/0}       Internet                             Active   Default    
         {10.0.0.0/8}      Null                                 Active   Default    
         {100.64.0.0/10}   Null                                 Active   Default    
         {172.16.0.0/12}   Null                                 Active   Default    
         {192.168.0.0/16}  Null                                 Active   Default

<span data-ttu-id="ffe58-416">Hello VNETLocal è sempre uno o più prefissi di indirizzo definita che costituiscono la rete virtuale di hello per tale rete specifico (ovvero, vengono modificate da rete toovirtual di rete virtuale, a seconda della modalità di definizione di ogni rete virtuale specifica).</span><span class="sxs-lookup"><span data-stu-id="ffe58-416">hello VNETLocal is always one or more defined address prefixes that make up hello virtual network for that specific network (that is, it changes from virtual network toovirtual network, depending on how each specific virtual network is defined).</span></span> <span data-ttu-id="ffe58-417">le route di sistema rimanenti Hello sono statiche e predefinito come indicato nella tabella hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-417">hello remaining system routes are static and default as indicated in hello table.</span></span>

<span data-ttu-id="ffe58-418">In questo esempio vengono creati due tabelle di routing, rispettivamente per la subnet front-end e back-end di hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-418">In this example, two routing tables are created, one each for hello front-end and back-end subnets.</span></span> <span data-ttu-id="ffe58-419">Ogni tabella viene caricato con routing statico appropriato per hello subnet specificato.</span><span class="sxs-lookup"><span data-stu-id="ffe58-419">Each table is loaded with static routes appropriate for hello given subnet.</span></span> <span data-ttu-id="ffe58-420">In questo esempio, ogni tabella dispone di tre route indirizzare tutto il traffico (0.0.0.0/0) attraverso il firewall hello (hop successivo = indirizzo IP dell'accessorio virtuale):</span><span class="sxs-lookup"><span data-stu-id="ffe58-420">In this example, each table has three routes that direct all traffic (0.0.0.0/0) through hello firewall (Next hop = Virtual Appliance IP address):</span></span>

1. <span data-ttu-id="ffe58-421">Traffico della subnet locale con nessun Hop successivo definito tooallow subnet locale il traffico toobypass hello firewall.</span><span class="sxs-lookup"><span data-stu-id="ffe58-421">Local subnet traffic with no Next Hop defined tooallow local subnet traffic toobypass hello firewall.</span></span>
2. <span data-ttu-id="ffe58-422">Traffico della rete virtuale con la definizione di un hop successivo come firewall,</span><span class="sxs-lookup"><span data-stu-id="ffe58-422">Virtual network traffic with a Next Hop defined as firewall.</span></span> <span data-ttu-id="ffe58-423">L'hop successivo esegue l'override regola predefinita hello che consente di direttamente tooroute il traffico di rete virtuale locale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-423">This next hop overrides hello default rule that allows local virtual network traffic tooroute directly.</span></span>
3. <span data-ttu-id="ffe58-424">Il traffico rimanente tutti (0 o 0) con un Hop successivo è definito come hello firewall.</span><span class="sxs-lookup"><span data-stu-id="ffe58-424">All remaining traffic (0/0) with a Next Hop defined as hello firewall.</span></span>

> [!TIP]
> <span data-ttu-id="ffe58-425">Indisponibilità di voce di subnet locale hello in hello UDR interruzioni subnet locale comunicazioni.</span><span class="sxs-lookup"><span data-stu-id="ffe58-425">Not having hello local subnet entry in hello UDR breaks local subnet communications.</span></span>
>
> * <span data-ttu-id="ffe58-426">In questo esempio, è fondamentale che punta tooVNETLocal 10.0.1.0/24!</span><span class="sxs-lookup"><span data-stu-id="ffe58-426">In our example, 10.0.1.0/24 pointing tooVNETLocal is critical!</span></span> <span data-ttu-id="ffe58-427">Senza di esso, lasciando hello Server Web (10.0.1.4) destinati a tooanother locale server, ad esempio, 10.0.1.25 pacchetto avrà esito negativo come verranno inviati toohello NVA.</span><span class="sxs-lookup"><span data-stu-id="ffe58-427">Without it, packet leaving hello Web Server (10.0.1.4) destined tooanother local server (for example) 10.0.1.25 will fail as they will be sent toohello NVA.</span></span> <span data-ttu-id="ffe58-428">Hello NVA invierà ad esso toohello subnet e subnet hello verrà inviarlo toohello NVA in un ciclo infinito.</span><span class="sxs-lookup"><span data-stu-id="ffe58-428">hello NVA will send it toohello subnet, and hello subnet will resend it toohello NVA in an infinite loop.</span></span>
> * <span data-ttu-id="ffe58-429">possibilità di Hello di un loop di routing sono in genere più elevati in dispositivi con più schede di rete che sono connessi tooseparate subnet, che è spesso dei dispositivi locale tradizionale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-429">hello chances of a routing loop are typically higher on appliances with multiple NICs that are connected tooseparate subnets, which is often of traditional, on-premises appliances.</span></span>
>
>

<span data-ttu-id="ffe58-430">Una volta create le tabelle di routing hello, devono essere associati tootheir subnet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-430">Once hello routing tables are created, they must be bound tootheir subnets.</span></span> <span data-ttu-id="ffe58-431">Hello subnet front-end, tabella di routing, una volta creata e associata toohello subnet, sarà simile a questo output:</span><span class="sxs-lookup"><span data-stu-id="ffe58-431">hello front-end subnet routing table, once created and bound toohello subnet, would look like this output:</span></span>

        Effective routes :
         Address Prefix    Next hop type    Next hop IP address Status   Source     
         --------------    -------------    ------------------- ------   ------     
         {10.0.1.0/24}     VNETLocal                            Active
         {10.0.0.0/16}     VirtualAppliance 10.0.0.4            Active    
         {0.0.0.0/0}       VirtualAppliance 10.0.0.4            Active

> [!NOTE]
> <span data-ttu-id="ffe58-432">UDR ora possono essere applicati toohello subnet del gateway ExpressRoute quali hello è connesso il circuito.</span><span class="sxs-lookup"><span data-stu-id="ffe58-432">UDR can now be applied toohello gateway subnet on which hello ExpressRoute circuit is connected.</span></span>
>
> <span data-ttu-id="ffe58-433">Negli esempi 3 e 4 sono illustrati esempi di come tooenable il perimetro della rete con ExpressRoute o di rete da sito a sito.</span><span class="sxs-lookup"><span data-stu-id="ffe58-433">Examples of how tooenable your perimeter network with ExpressRoute or site-to-site networking are shown in examples 3 and 4.</span></span>
>
>

#### <a name="ip-forwarding-description"></a><span data-ttu-id="ffe58-434">Descrizione dell'inoltro IP</span><span class="sxs-lookup"><span data-stu-id="ffe58-434">IP Forwarding description</span></span>
<span data-ttu-id="ffe58-435">L'inoltro IP è un tooUDR funzionalità complementare.</span><span class="sxs-lookup"><span data-stu-id="ffe58-435">IP Forwarding is a companion feature tooUDR.</span></span> <span data-ttu-id="ffe58-436">L'inoltro IP è un'impostazione in un dispositivo virtuale che consente di tooreceive il traffico indirizzato non specificamente toohello dispositivo e quindi inoltra destinazione finale di tooits tale traffico.</span><span class="sxs-lookup"><span data-stu-id="ffe58-436">IP Forwarding is a setting on a virtual appliance that allows it tooreceive traffic not specifically addressed toohello appliance, and then forward that traffic tooits ultimate destination.</span></span>

<span data-ttu-id="ffe58-437">Ad esempio, se AppVM01 il server DNS01 toohello richiesta, UDR indirizza il traffico toohello firewall.</span><span class="sxs-lookup"><span data-stu-id="ffe58-437">For example, if AppVM01 makes a request toohello DNS01 server, UDR would route this traffic toohello firewall.</span></span> <span data-ttu-id="ffe58-438">Con l'inoltro IP abilitato, il traffico di hello per destinazione DNS01 hello (10.0.2.4) è accettato dal dispositivo hello (10.0.0.4) e quindi vengono inoltrato da destinazione finale tooits (10.0.2.4).</span><span class="sxs-lookup"><span data-stu-id="ffe58-438">With IP Forwarding enabled, hello traffic for hello DNS01 destination (10.0.2.4) is accepted by hello appliance (10.0.0.4) and then forwarded tooits ultimate destination (10.0.2.4).</span></span> <span data-ttu-id="ffe58-439">Senza l'inoltro IP abilitate sul firewall hello, il traffico verrebbe non accettato dal dispositivo hello anche se la tabella di route hello dispone di firewall hello come hop successivo hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-439">Without IP Forwarding enabled on hello firewall, traffic would not be accepted by hello appliance even though hello route table has hello firewall as hello next hop.</span></span> <span data-ttu-id="ffe58-440">toouse appliance virtuale, è inoltro insieme UDR dell'indirizzo IP tooenable tooremember critici.</span><span class="sxs-lookup"><span data-stu-id="ffe58-440">toouse a virtual appliance, it’s critical tooremember tooenable IP Forwarding along with UDR.</span></span>

#### <a name="nsg-description"></a><span data-ttu-id="ffe58-441">Descrizione di un gruppo di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="ffe58-441">NSG description</span></span>
<span data-ttu-id="ffe58-442">In questo esempio viene creato un gruppo di sicurezza di rete, in cui viene poi caricata una singola regola.</span><span class="sxs-lookup"><span data-stu-id="ffe58-442">In this example, an NSG group is built and then loaded with a single rule.</span></span> <span data-ttu-id="ffe58-443">Questo gruppo viene quindi associato solo toohello front-end e back-end nelle subnet (non hello SecNet).</span><span class="sxs-lookup"><span data-stu-id="ffe58-443">This group is then bound only toohello front-end and back-end subnets (not hello SecNet).</span></span> <span data-ttu-id="ffe58-444">Viene compilato in modo dichiarativo hello seguente regola:</span><span class="sxs-lookup"><span data-stu-id="ffe58-444">Declaratively hello following rule is being built:</span></span>

* <span data-ttu-id="ffe58-445">Qualsiasi tipo di traffico (tutte le porte) da hello Internet toohello intera rete virtuale (tutte le subnet) è stato negato.</span><span class="sxs-lookup"><span data-stu-id="ffe58-445">Any traffic (all ports) from hello Internet toohello entire virtual network (all subnets) is denied.</span></span>

<span data-ttu-id="ffe58-446">Anche se in questo esempio vengono usati i gruppi di sicurezza di rete: lo scopo principale consiste nel creare un secondo livello di difesa contro errori di configurazione manuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-446">Although NSGs are used in this example, its main purpose is as a secondary layer of defense against manual misconfiguration.</span></span> <span data-ttu-id="ffe58-447">Hello obiettivo è tooblock tutto il traffico in ingresso da hello Internet tooeither hello subnet front-end o back-end.</span><span class="sxs-lookup"><span data-stu-id="ffe58-447">hello goal is tooblock all inbound traffic from hello Internet tooeither hello front-end or back-end subnets.</span></span> <span data-ttu-id="ffe58-448">Il traffico solo flusso firewall hello SecNet subnet toohello (e quindi, se necessario, le subnet front-end o back-end toohello).</span><span class="sxs-lookup"><span data-stu-id="ffe58-448">Traffic should only flow through hello SecNet subnet toohello firewall (and then, if appropriate, on toohello front-end or back-end subnets).</span></span> <span data-ttu-id="ffe58-449">Inoltre, con regole UDR hello sul posto, tutto il traffico che in hello subnet front-end o back-end sarebbe indirizzato out toohello firewall (grazie tooUDR).</span><span class="sxs-lookup"><span data-stu-id="ffe58-449">Plus, with hello UDR rules in place, any traffic that did make it into hello front-end or back-end subnets would be directed out toohello firewall (thanks tooUDR).</span></span> <span data-ttu-id="ffe58-450">firewall Hello visualizzare il traffico come un flusso asimmetrico e riduzione in caso di traffico in uscita hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-450">hello firewall would see this traffic as an asymmetric flow and would drop hello outbound traffic.</span></span> <span data-ttu-id="ffe58-451">In questo modo sono disponibili tre livelli di sicurezza protezione subnet hello:</span><span class="sxs-lookup"><span data-stu-id="ffe58-451">Thus there are three layers of security protecting hello subnets:</span></span>

* <span data-ttu-id="ffe58-452">Nessun indirizzo IP pubblico su qualsiasi scheda di interfaccia di rete front-end o back-end.</span><span class="sxs-lookup"><span data-stu-id="ffe58-452">No Public IP addresses on any FrontEnd or BackEnd NICs.</span></span>
* <span data-ttu-id="ffe58-453">NSGs negando traffico hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-453">NSGs denying traffic from hello Internet.</span></span>
* <span data-ttu-id="ffe58-454">traffico asimmetrica eliminazione firewall Hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-454">hello firewall dropping asymmetric traffic.</span></span>

<span data-ttu-id="ffe58-455">Un punto di interesse riguardanti hello gruppo in questo esempio è che contenga una sola regola, ovvero toodeny Internet traffico toohello intera rete virtuale, inclusi subnet sicurezza hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-455">One interesting point regarding hello NSG in this example is that it contains only one rule, which is toodeny Internet traffic toohello entire virtual network, including hello Security subnet.</span></span> <span data-ttu-id="ffe58-456">Tuttavia, poiché hello che è solo di gruppo associata toohello front-end e subnet di back-end, la regola hello non viene elaborata sul traffico in ingresso toohello subnet di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ffe58-456">However, since hello NSG is only bound toohello front-end and back-end subnets, hello rule isn’t processed on traffic inbound toohello Security subnet.</span></span> <span data-ttu-id="ffe58-457">Di conseguenza, il traffico passa toohello subnet di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="ffe58-457">As a result, traffic flows toohello Security subnet.</span></span>

#### <a name="firewall-rules"></a><span data-ttu-id="ffe58-458">Regole del firewall</span><span class="sxs-lookup"><span data-stu-id="ffe58-458">Firewall rules</span></span>
<span data-ttu-id="ffe58-459">Firewall hello, regole di inoltro devono essere creata.</span><span class="sxs-lookup"><span data-stu-id="ffe58-459">On hello firewall, forwarding rules should be created.</span></span> <span data-ttu-id="ffe58-460">Poiché il firewall hello di blocco o inoltro tutto in ingresso, uscita e il traffico di rete virtuale all'interno della stessa, sono necessarie numerose regole del firewall.</span><span class="sxs-lookup"><span data-stu-id="ffe58-460">Since hello firewall is blocking or forwarding all inbound, outbound, and intra-virtual network traffic, many firewall rules are needed.</span></span> <span data-ttu-id="ffe58-461">Inoltre, tutto il traffico in ingresso raggiunge l'indirizzo IP pubblico del servizio di sicurezza hello (su porte diverse), toobe elaborati dal firewall hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-461">Also, all inbound traffic hits hello Security Service public IP address (on different ports), toobe processed by hello firewall.</span></span> <span data-ttu-id="ffe58-462">È consigliabile creare i flussi logici toodiagram hello prima di configurare le subnet hello e regole del firewall, tooavoid rielaborare in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="ffe58-462">A best practice is toodiagram hello logical flows before setting up hello subnets and firewall rules, tooavoid rework later.</span></span> <span data-ttu-id="ffe58-463">Hello nella figura seguente è una vista logica hello regole del firewall per questo esempio:</span><span class="sxs-lookup"><span data-stu-id="ffe58-463">hello following figure is a logical view of hello firewall rules for this example:</span></span>

<span data-ttu-id="ffe58-464">![10]</span><span class="sxs-lookup"><span data-stu-id="ffe58-464">![10]</span></span>

> [!NOTE]
> <span data-ttu-id="ffe58-465">In base a hello che Appliance virtuale di rete utilizzato, porte di gestione di hello variano.</span><span class="sxs-lookup"><span data-stu-id="ffe58-465">Based on hello Network Virtual Appliance used, hello management ports vary.</span></span> <span data-ttu-id="ffe58-466">In questo esempio si fa riferimento a Barracuda NextGen Firewall, che usa le porte 22, 801 e 807.</span><span class="sxs-lookup"><span data-stu-id="ffe58-466">In this example, a Barracuda NextGen Firewall is referenced, which uses ports 22, 801, and 807.</span></span> <span data-ttu-id="ffe58-467">Consultare hello accessorio fornitore documentazione toofind hello esatta porte utilizzate per la gestione dei dispositivi hello in uso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-467">Consult hello appliance vendor documentation toofind hello exact ports used for management of hello device being used.</span></span>
>
>

#### <a name="firewall-rules-description"></a><span data-ttu-id="ffe58-468">Descrizione delle regole del firewall</span><span class="sxs-lookup"><span data-stu-id="ffe58-468">Firewall rules description</span></span>
<span data-ttu-id="ffe58-469">Nel precedente diagramma logico di hello, subnet sicurezza hello non viene visualizzato perché firewall hello è l'unica risorsa di hello subnet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-469">In hello preceding logical diagram, hello security subnet is not shown because hello firewall is hello only resource on that subnet.</span></span> <span data-ttu-id="ffe58-470">regole del firewall hello e come logicamente consentire o negare i flussi di traffico, non hello indirizzato percorso effettivo, viene visualizzato il diagramma Hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-470">hello diagram is showing hello firewall rules and how they logically allow or deny traffic flows, not hello actual routed path.</span></span> <span data-ttu-id="ffe58-471">Inoltre, due ottetti dell'indirizzo IP locale hello per facilitarne la lettura dell'ultima porte hello selezionate per il traffico RDP hello sono porte nell'intervallo superiore (8014 – 8026) e sono stati selezionati tooloosely allinearlo hello (ad esempio, il server locale 10.0.1.4 è associato l'indirizzo con una porta esterna 8014).</span><span class="sxs-lookup"><span data-stu-id="ffe58-471">Also, hello external ports selected for hello RDP traffic are higher ranged ports (8014 – 8026) and were selected tooloosely align with hello last two octets of hello local IP address for easier readability (for example, local server address 10.0.1.4 is associated with external port 8014).</span></span> <span data-ttu-id="ffe58-472">È tuttavia possibile usare qualsiasi porta superiore non in conflitto.</span><span class="sxs-lookup"><span data-stu-id="ffe58-472">Any higher non-conflicting ports, however, could be used.</span></span>

<span data-ttu-id="ffe58-473">Per questo esempio, sono necessari sette tipi di regole:</span><span class="sxs-lookup"><span data-stu-id="ffe58-473">For this example, we need seven types of rules:</span></span>

* <span data-ttu-id="ffe58-474">Regole esterne (per il traffico in ingresso):</span><span class="sxs-lookup"><span data-stu-id="ffe58-474">External rules (for inbound traffic):</span></span>
  1. <span data-ttu-id="ffe58-475">Regola di gestione del firewall: regole di reindirizzamento di questa App consente il traffico toopass toohello porte di gestione del dispositivo di hello rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-475">Firewall management rule: This App Redirect rule allows traffic toopass toohello management ports of hello network virtual appliance.</span></span>
  2. <span data-ttu-id="ffe58-476">Le regole RDP (per ogni server di Windows): questi quattro regole, una per ogni server, consentono la gestione di hello singoli server tramite RDP.</span><span class="sxs-lookup"><span data-stu-id="ffe58-476">RDP rules (for each Windows server): These four rules (one for each server) allow management of hello individual servers via RDP.</span></span> <span data-ttu-id="ffe58-477">quattro regole RDP Hello potrebbero anche essere compressi in una regola, a seconda delle funzionalità di hello del dispositivo virtuale rete hello in uso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-477">hello four RDP rules could also be collapsed into one rule, depending on hello capabilities of hello network virtual appliance being used.</span></span>
  3. <span data-ttu-id="ffe58-478">Regole del traffico di applicazione: sono presenti due di queste regole, hello prima per il traffico web front-end hello e hello secondo per il traffico di back-end hello (ad esempio server toodata livello web).</span><span class="sxs-lookup"><span data-stu-id="ffe58-478">Application traffic rules: There are two of these rules, hello first for hello front-end web traffic, and hello second for hello back-end traffic (for example, web server toodata tier).</span></span> <span data-ttu-id="ffe58-479">configurazione Hello di queste regole dipende dall'architettura di rete hello (in cui vengono collocati i server) e flussi di traffico (il tipo di traffico hello direzione flussi e le porte utilizzate).</span><span class="sxs-lookup"><span data-stu-id="ffe58-479">hello configuration of these rules depends on hello network architecture (where your servers are placed) and traffic flows (which direction hello traffic flows, and which ports are used).</span></span>
     * <span data-ttu-id="ffe58-480">prima regola Hello consente hello effettivo traffico tooreach hello applicazione server applicazioni.</span><span class="sxs-lookup"><span data-stu-id="ffe58-480">hello first rule allows hello actual application traffic tooreach hello application server.</span></span> <span data-ttu-id="ffe58-481">Sebbene hello altre regole consentono per la gestione e sicurezza, le regole del traffico dell'applicazione sono cosa consentono tooaccess utenti o servizi esterni alle applicazioni di hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-481">While hello other rules allow for security and management, application traffic rules are what allow external users or services tooaccess hello applications.</span></span> <span data-ttu-id="ffe58-482">In questo esempio è presente un singolo server Web sulla porta 80.</span><span class="sxs-lookup"><span data-stu-id="ffe58-482">For this example, there is a single web server on port 80.</span></span> <span data-ttu-id="ffe58-483">Pertanto una singola applicazione regola del firewall reindirizza il traffico in entrata toohello IP esterno, indirizzo IP interno di toohello web server.</span><span class="sxs-lookup"><span data-stu-id="ffe58-483">Thus a single firewall application rule redirects inbound traffic toohello external IP, toohello web servers internal IP address.</span></span> <span data-ttu-id="ffe58-484">verrà convertita sessione traffico Hello reindirizzato tramite NAT toohello interno del server.</span><span class="sxs-lookup"><span data-stu-id="ffe58-484">hello redirected traffic session would be translated via NAT toohello internal server.</span></span>
     * <span data-ttu-id="ffe58-485">seconda regola Hello è hello regola back-end tooallow hello tootalk toohello AppVM01 server del server web (ma non AppVM02) tramite qualsiasi porta.</span><span class="sxs-lookup"><span data-stu-id="ffe58-485">hello second rule is hello back-end rule tooallow hello web server tootalk toohello AppVM01 server (but not AppVM02) via any port.</span></span>
* <span data-ttu-id="ffe58-486">Regole interne (per il traffico tra le reti virtuali)</span><span class="sxs-lookup"><span data-stu-id="ffe58-486">Internal rules (for intra-virtual network traffic)</span></span>
  1. <span data-ttu-id="ffe58-487">Regola in uscita tooInternet: questa regola consente il traffico da qualsiasi rete toopass toohello selezionato reti.</span><span class="sxs-lookup"><span data-stu-id="ffe58-487">Outbound tooInternet rule: This rule allows traffic from any network toopass toohello selected networks.</span></span> <span data-ttu-id="ffe58-488">Questa regola è in genere una regola predefinita già installati nel firewall hello, ma in uno stato disabilitato.</span><span class="sxs-lookup"><span data-stu-id="ffe58-488">This rule is usually a default rule already on hello firewall, but in a disabled state.</span></span> <span data-ttu-id="ffe58-489">È consigliabile abilitarla per questo esempio.</span><span class="sxs-lookup"><span data-stu-id="ffe58-489">This rule should be enabled for this example.</span></span>
  2. <span data-ttu-id="ffe58-490">Regola DNS: questa regola consente solo DNS (porta 53) traffico toopass toohello server DNS.</span><span class="sxs-lookup"><span data-stu-id="ffe58-490">DNS rule: This rule allows only DNS (port 53) traffic toopass toohello DNS server.</span></span> <span data-ttu-id="ffe58-491">Per questo ambiente, la maggior parte del traffico dal back-end di hello front-end toohello è bloccato.</span><span class="sxs-lookup"><span data-stu-id="ffe58-491">For this environment, most traffic from hello front end toohello back end is blocked.</span></span> <span data-ttu-id="ffe58-492">Questa regola consente in modo specifico il traffico DNS da qualsiasi subnet locale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-492">This rule specifically allows DNS from any local subnet.</span></span>
  3. <span data-ttu-id="ffe58-493">Regola toosubnet subnet: la regola è tooallow qualsiasi server nel server di hello subnet back-end tooconnect tooany nella subnet front-end hello (ma non hello inversa).</span><span class="sxs-lookup"><span data-stu-id="ffe58-493">Subnet toosubnet rule: This rule is tooallow any server on hello back-end subnet tooconnect tooany server on hello front-end subnet (but not hello reverse).</span></span>
* <span data-ttu-id="ffe58-494">Regola alternativo (per il traffico che non soddisfa uno qualsiasi dei hello precedente):</span><span class="sxs-lookup"><span data-stu-id="ffe58-494">Fail-safe rule (for traffic that doesn’t meet any of hello previous):</span></span>
  1. <span data-ttu-id="ffe58-495">Tutto il traffico regola di negazione: questa regola di negazione deve essere sempre regola finale di hello (in termini di priorità) e di conseguenza se un flusso di traffico non toomatch una delle regole precedenti hello viene eliminato da questa regola.</span><span class="sxs-lookup"><span data-stu-id="ffe58-495">Deny all traffic rule: This deny rule should always be hello final rule (in terms of priority), and as such if a traffic flow fails toomatch any of hello preceding rules it is dropped by this rule.</span></span> <span data-ttu-id="ffe58-496">La regola è predefinita, in genere sul posto e attiva,</span><span class="sxs-lookup"><span data-stu-id="ffe58-496">This rule is a default rule and usually in-place and active.</span></span> <span data-ttu-id="ffe58-497">Nessuna modifica è in genere necessario toothis regola.</span><span class="sxs-lookup"><span data-stu-id="ffe58-497">No modifications are usually needed toothis rule.</span></span>

> [!TIP]
> <span data-ttu-id="ffe58-498">In hello seconda applicazione traffico regola, toosimplify in questo esempio, è consentita qualsiasi porta.</span><span class="sxs-lookup"><span data-stu-id="ffe58-498">On hello second application traffic rule, toosimplify this example, any port is allowed.</span></span> <span data-ttu-id="ffe58-499">In uno scenario reale, intervalli di porte e indirizzi più specifici hello devono essere utilizzato tooreduce superficie di attacco hello di questa regola.</span><span class="sxs-lookup"><span data-stu-id="ffe58-499">In a real scenario, hello most specific port and address ranges should be used tooreduce hello attack surface of this rule.</span></span>
>
>

<span data-ttu-id="ffe58-500">Una volta create le regole precedenti hello, è importante priorità hello tooreview del traffico di tooensure ogni regola è consentita o negata in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="ffe58-500">Once hello previous rules are created, it’s important tooreview hello priority of each rule tooensure traffic is allowed or denied as desired.</span></span> <span data-ttu-id="ffe58-501">Per questo esempio, le regole di hello sono in ordine di priorità.</span><span class="sxs-lookup"><span data-stu-id="ffe58-501">For this example, hello rules are in priority order.</span></span>

#### <a name="conclusion"></a><span data-ttu-id="ffe58-502">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="ffe58-502">Conclusion</span></span>
<span data-ttu-id="ffe58-503">Questo esempio è più complesso ma completare modalità di protezione e isolamento rete hello di hello esempi precedenti.</span><span class="sxs-lookup"><span data-stu-id="ffe58-503">This example is a more complex but complete way of protecting and isolating hello network than hello previous examples.</span></span> <span data-ttu-id="ffe58-504">(Esempio 2 protegge solo un'applicazione hello ed esempio 1 isola solo subnet).</span><span class="sxs-lookup"><span data-stu-id="ffe58-504">(Example 2 protects just hello application, and Example 1 just isolates subnets).</span></span> <span data-ttu-id="ffe58-505">Questa struttura consente il monitoraggio del traffico in entrambe le direzioni e non solo i server di applicazioni in ingresso hello protegge ma vengono applicati i criteri di sicurezza di rete per tutti i server nella rete.</span><span class="sxs-lookup"><span data-stu-id="ffe58-505">This design allows for monitoring traffic in both directions, and protects not just hello inbound application server but enforces network security policy for all servers on this network.</span></span> <span data-ttu-id="ffe58-506">Inoltre, a seconda utilizzato accessorio hello, il controllo completo del traffico e riconoscimento può essere ottenute.</span><span class="sxs-lookup"><span data-stu-id="ffe58-506">Also, depending on hello appliance used, full traffic auditing and awareness can be achieved.</span></span> <span data-ttu-id="ffe58-507">Per ulteriori informazioni, vedere hello [istruzioni di compilazione][Example3].</span><span class="sxs-lookup"><span data-stu-id="ffe58-507">For more information, see hello [detailed build instructions][Example3].</span></span> <span data-ttu-id="ffe58-508">Le istruzioni includono:</span><span class="sxs-lookup"><span data-stu-id="ffe58-508">These instructions include:</span></span>

* <span data-ttu-id="ffe58-509">Come toobuild perimetrale in questo esempio di rete con gli script di PowerShell classici.</span><span class="sxs-lookup"><span data-stu-id="ffe58-509">How toobuild this example perimeter network with classic PowerShell scripts.</span></span>
* <span data-ttu-id="ffe58-510">Come toobuild in questo esempio con un modello di gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-510">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="ffe58-511">Descrizioni dettagliate di ogni route definita dall'utente, ogni comando del gruppo di sicurezza di rete e ogni regola del firewall</span><span class="sxs-lookup"><span data-stu-id="ffe58-511">Detailed descriptions of each UDR, NSG command, and firewall rule.</span></span>
* <span data-ttu-id="ffe58-512">Scenari dettagliati del flusso di traffico che illustrano il modo in cui il traffico viene consentito o negato su ogni livello</span><span class="sxs-lookup"><span data-stu-id="ffe58-512">Detailed traffic flow scenarios, showing how traffic is allowed or denied in each layer.</span></span>

### <a name="example-4-add-a-hybrid-connection-with-a-site-to-site-virtual-appliance-vpn"></a><span data-ttu-id="ffe58-513">Esempio 4: Aggiungere una connessione ibrida con un'appliance virtuale da sito a sito e con una rete virtuale privata (VPN)</span><span class="sxs-lookup"><span data-stu-id="ffe58-513">Example 4 Add a hybrid connection with a site-to-site, virtual appliance VPN</span></span>
<span data-ttu-id="ffe58-514">[Eseguire il backup di start tooFast](#fast-start) | Istruzioni di compilazione disponibili dettagliate appena</span><span class="sxs-lookup"><span data-stu-id="ffe58-514">[Back tooFast start](#fast-start) | Detailed build instructions available soon</span></span>

<span data-ttu-id="ffe58-515">[![11]][11]</span><span class="sxs-lookup"><span data-stu-id="ffe58-515">[![11]][11]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="ffe58-516">Descrizione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="ffe58-516">Environment description</span></span>
<span data-ttu-id="ffe58-517">Rete ibrida tramite un accessorio virtuale di rete (NVA) può essere aggiunti tooany dei tipi di rete perimetrale hello descritto negli esempi 1, 2 o 3.</span><span class="sxs-lookup"><span data-stu-id="ffe58-517">Hybrid networking using a network virtual appliance (NVA) can be added tooany of hello perimeter network types described in examples 1, 2, or 3.</span></span>

<span data-ttu-id="ffe58-518">Come illustrato nella figura precedente hello, una connessione VPN su Internet (site-to-site) hello è usato tooconnect tooan di rete rete virtuale di Azure tramite un NVA un locale.</span><span class="sxs-lookup"><span data-stu-id="ffe58-518">As shown in hello previous figure, a VPN connection over hello Internet (site-to-site) is used tooconnect an on-premises network tooan Azure virtual network via an NVA.</span></span>

> [!NOTE]
> <span data-ttu-id="ffe58-519">Se si usa ExpressRoute hello Peering pubblico di Azure opzione è abilitata, è necessario creare una route statica.</span><span class="sxs-lookup"><span data-stu-id="ffe58-519">If you use ExpressRoute with hello Azure Public Peering option enabled, a static route should be created.</span></span> <span data-ttu-id="ffe58-520">Questa route statica deve indirizzare toohello l'indirizzo IP VPN della vulnerabilità della rete aziendale Internet e non tramite hello connessione ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ffe58-520">This static route should route toohello NVA VPN IP address out your corporate Internet and not via hello ExpressRoute connection.</span></span> <span data-ttu-id="ffe58-521">Hello NAT necessario hello Azure ExpressRoute Peering pubblico opzione possibile interrompere una sessione VPN hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-521">hello NAT required on hello ExpressRoute Azure Public Peering option can break hello VPN session.</span></span>
>
>

<span data-ttu-id="ffe58-522">Dopo aver hello VPN è presente, hello NVA diventa hub centrale di hello per tutte le reti e le subnet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-522">Once hello VPN is in place, hello NVA becomes hello central hub for all networks and subnets.</span></span> <span data-ttu-id="ffe58-523">le regole di inoltro di firewall Hello determinano il tipo di traffico consentiti flussi, vengono convertite tramite NAT, vengono reindirizzati o vengono eliminati (anche per i flussi di traffico tra Azure e di rete locale hello).</span><span class="sxs-lookup"><span data-stu-id="ffe58-523">hello firewall forwarding rules determine which traffic flows are allowed, are translated via NAT, are redirected, or are dropped (even for traffic flows between hello on-premises network and Azure).</span></span>

<span data-ttu-id="ffe58-524">Flussi di traffico da considerare con attenzione, perché possono essere ottimizzati o ridotto da questo schema progettuale, a seconda delle specifiche di hello caso d'uso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-524">Traffic flows should be considered carefully, as they can be optimized or degraded by this design pattern, depending on hello specific use case.</span></span>

<span data-ttu-id="ffe58-525">Usando l'ambiente hello compilato nell'esempio 3 e quindi aggiungendo una connessione VPN da sito a sito di rete ibrida, produce hello seguente struttura:</span><span class="sxs-lookup"><span data-stu-id="ffe58-525">Using hello environment built in example 3, and then adding a site-to-site VPN hybrid network connection, produces hello following design:</span></span>

<span data-ttu-id="ffe58-526">[![12]][12]</span><span class="sxs-lookup"><span data-stu-id="ffe58-526">[![12]][12]</span></span>

<span data-ttu-id="ffe58-527">router locale Hello o altri dispositivi di rete compatibile con il NVA per VPN, sarebbe client VPN hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-527">hello on-premises router, or any other network device that is compatible with your NVA for VPN, would be hello VPN client.</span></span> <span data-ttu-id="ffe58-528">Il dispositivo fisico sarà responsabile per l'inizializzazione e la gestione connessione VPN hello con il NVA.</span><span class="sxs-lookup"><span data-stu-id="ffe58-528">This physical device would be responsible for initiating and maintaining hello VPN connection with your NVA.</span></span>

<span data-ttu-id="ffe58-529">Logicamente toohello NVA, rete hello è simile a quattro separato "aree di protezione" con le regole di hello sulla hello NVA hello primario direttore il traffico tra queste aree:</span><span class="sxs-lookup"><span data-stu-id="ffe58-529">Logically toohello NVA, hello network looks like four separate “security zones” with hello rules on hello NVA being hello primary director of traffic between these zones:</span></span>

<span data-ttu-id="ffe58-530">![13]</span><span class="sxs-lookup"><span data-stu-id="ffe58-530">![13]</span></span>

#### <a name="conclusion"></a><span data-ttu-id="ffe58-531">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="ffe58-531">Conclusion</span></span>
<span data-ttu-id="ffe58-532">aggiunta di Hello di un tooan connessione site-to-site VPN ibrida rete rete virtuale di Azure è possibile estendere rete locale hello in Azure in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="ffe58-532">hello addition of a site-to-site VPN hybrid network connection tooan Azure virtual network can extend hello on-premises network into Azure in a secure manner.</span></span> <span data-ttu-id="ffe58-533">Utilizzando una connessione VPN, il traffico viene crittografato e instrada tramite hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-533">In using a VPN connection, your traffic is encrypted and routes via hello Internet.</span></span> <span data-ttu-id="ffe58-534">Hello NVA in questo esempio fornisce una posizione centrale di tooenforce e gestire i criteri di sicurezza hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-534">hello NVA in this example provides a central location tooenforce and manage hello security policy.</span></span> <span data-ttu-id="ffe58-535">Per ulteriori informazioni, vedere hello dettagliata compilare istruzioni (misura).</span><span class="sxs-lookup"><span data-stu-id="ffe58-535">For more information, see hello detailed build instructions (forthcoming).</span></span> <span data-ttu-id="ffe58-536">Le istruzioni includono:</span><span class="sxs-lookup"><span data-stu-id="ffe58-536">These instructions include:</span></span>

* <span data-ttu-id="ffe58-537">Come toobuild perimetrale in questo esempio di rete con gli script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ffe58-537">How toobuild this example perimeter network with PowerShell scripts.</span></span>
* <span data-ttu-id="ffe58-538">Come toobuild in questo esempio con un modello di gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-538">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="ffe58-539">Scenari dettagliati di flussi di traffico che illustrano il modo in cui il traffico scorre nella struttura.</span><span class="sxs-lookup"><span data-stu-id="ffe58-539">Detailed traffic flow scenarios, showing how traffic flows through this design.</span></span>

### <a name="example-5-add-a-hybrid-connection-with-a-site-to-site-azure-vpn-gateway"></a><span data-ttu-id="ffe58-540">Esempio 5: Aggiungere una connessione ibrida con un gateway VPN di Azure da sito a sito</span><span class="sxs-lookup"><span data-stu-id="ffe58-540">Example 5 Add a hybrid connection with a site-to-site, Azure VPN gateway</span></span>
<span data-ttu-id="ffe58-541">[Eseguire il backup di start tooFast](#fast-start) | Istruzioni di compilazione disponibili dettagliate appena</span><span class="sxs-lookup"><span data-stu-id="ffe58-541">[Back tooFast start](#fast-start) | Detailed build instructions available soon</span></span>

<span data-ttu-id="ffe58-542">[![14]][14]</span><span class="sxs-lookup"><span data-stu-id="ffe58-542">[![14]][14]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="ffe58-543">Descrizione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="ffe58-543">Environment description</span></span>
<span data-ttu-id="ffe58-544">Rete ibrida tramite un gateway VPN di Azure è possibile aggiungere il tipo di rete perimetrale tooeither descritto negli esempi 1 o 2.</span><span class="sxs-lookup"><span data-stu-id="ffe58-544">Hybrid networking using an Azure VPN gateway can be added tooeither perimeter network type described in examples 1 or 2.</span></span>

<span data-ttu-id="ffe58-545">Come illustrato nella figura precedente hello, una connessione VPN su Internet (site-to-site) hello è tooconnect usato un tooan di rete locale rete virtuale di Azure tramite un gateway VPN di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-545">As shown in hello preceding figure, a VPN connection over hello Internet (site-to-site) is used tooconnect an on-premises network tooan Azure virtual network via an Azure VPN gateway.</span></span>

> [!NOTE]
> <span data-ttu-id="ffe58-546">Se si usa ExpressRoute hello Peering pubblico di Azure opzione è abilitata, è necessario creare una route statica.</span><span class="sxs-lookup"><span data-stu-id="ffe58-546">If you use ExpressRoute with hello Azure Public Peering option enabled, a static route should be created.</span></span> <span data-ttu-id="ffe58-547">Questa route statica deve indirizzare toohello l'indirizzo IP VPN della vulnerabilità della rete Internet aziendale e non tramite hello ExpressRoute WAN.</span><span class="sxs-lookup"><span data-stu-id="ffe58-547">This  static route should route toohello NVA VPN IP address out your corporate Internet and not via hello ExpressRoute WAN.</span></span> <span data-ttu-id="ffe58-548">Hello NAT necessario hello Azure ExpressRoute Peering pubblico opzione possibile interrompere una sessione VPN hello.</span><span class="sxs-lookup"><span data-stu-id="ffe58-548">hello NAT required on hello ExpressRoute Azure Public Peering option can break hello VPN session.</span></span>
>
>

<span data-ttu-id="ffe58-549">Hello nella figura seguente mostra hello due bordi di rete in questo esempio.</span><span class="sxs-lookup"><span data-stu-id="ffe58-549">hello following figure shows hello two network edges in this example.</span></span> <span data-ttu-id="ffe58-550">Sul lato prima hello, hello NVA e NSGs controllare i flussi di traffico per le reti di Azure all'interno e tra Azure e hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-550">On hello first edge, hello NVA and NSGs control traffic flows for intra-Azure networks and between Azure and hello Internet.</span></span> <span data-ttu-id="ffe58-551">bordo secondo Hello è il gateway VPN di Azure hello, ovvero un bordo di rete separata e isolate tra sedi locali e Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-551">hello second edge is hello Azure VPN gateway, which is a separate and isolated network edge between on-premises and Azure.</span></span>

<span data-ttu-id="ffe58-552">Flussi di traffico da considerare con attenzione, perché possono essere ottimizzati o ridotto da questo schema progettuale, a seconda delle specifiche di hello caso d'uso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-552">Traffic flows should be considered carefully, as they can be optimized or degraded by this design pattern, depending on hello specific use case.</span></span>

<span data-ttu-id="ffe58-553">Usando l'ambiente hello compilato nell'esempio 1 e quindi aggiungendo una connessione VPN da sito a sito di rete ibrida, produce hello seguente struttura:</span><span class="sxs-lookup"><span data-stu-id="ffe58-553">Using hello environment built in example 1, and then adding a site-to-site VPN hybrid network connection, produces hello following design:</span></span>

<span data-ttu-id="ffe58-554">[![15]][15]</span><span class="sxs-lookup"><span data-stu-id="ffe58-554">[![15]][15]</span></span>

#### <a name="conclusion"></a><span data-ttu-id="ffe58-555">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="ffe58-555">Conclusion</span></span>
<span data-ttu-id="ffe58-556">aggiunta di Hello di un tooan connessione site-to-site VPN ibrida rete rete virtuale di Azure è possibile estendere rete locale hello in Azure in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="ffe58-556">hello addition of a site-to-site VPN hybrid network connection tooan Azure virtual network can extend hello on-premises network into Azure in a secure manner.</span></span> <span data-ttu-id="ffe58-557">Usa gateway VPN di Azure native hello, il traffico crittografato IPSec e lo instrada tramite hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-557">Using hello native Azure VPN gateway, your traffic is IPSec encrypted and routes via hello Internet.</span></span> <span data-ttu-id="ffe58-558">Inoltre, con gateway VPN di Azure hello, è possibile fornire un'opzione a basso costo (non una licenza aggiuntiva costo come con NVAs di terze parti).</span><span class="sxs-lookup"><span data-stu-id="ffe58-558">Also, using hello Azure VPN gateway can provide a lower-cost option (no additional licensing cost as with third-party NVAs).</span></span> <span data-ttu-id="ffe58-559">Questa soluzione risulta estremamente conveniente nell'esempio 1, in cui non vengono usate appliance virtuali di rete.</span><span class="sxs-lookup"><span data-stu-id="ffe58-559">This option is most economical in example 1, where no NVA is used.</span></span> <span data-ttu-id="ffe58-560">Per ulteriori informazioni, vedere hello dettagliata compilare istruzioni (misura).</span><span class="sxs-lookup"><span data-stu-id="ffe58-560">For more information, see hello detailed build instructions (forthcoming).</span></span> <span data-ttu-id="ffe58-561">Le istruzioni includono:</span><span class="sxs-lookup"><span data-stu-id="ffe58-561">These instructions include:</span></span>

* <span data-ttu-id="ffe58-562">Come toobuild perimetrale in questo esempio di rete con gli script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ffe58-562">How toobuild this example perimeter network with PowerShell scripts.</span></span>
* <span data-ttu-id="ffe58-563">Come toobuild in questo esempio con un modello di gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-563">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="ffe58-564">Scenari dettagliati di flussi di traffico che illustrano il modo in cui il traffico scorre nella struttura.</span><span class="sxs-lookup"><span data-stu-id="ffe58-564">Detailed traffic flow scenarios, showing how traffic flows through this design.</span></span>

### <a name="example-6-add-a-hybrid-connection-with-expressroute"></a><span data-ttu-id="ffe58-565">Esempio 6: Aggiungere una connessione ibrida con ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="ffe58-565">Example 6 Add a hybrid connection with ExpressRoute</span></span>
<span data-ttu-id="ffe58-566">[Eseguire il backup di start tooFast](#fast-start) | Istruzioni di compilazione disponibili dettagliate appena</span><span class="sxs-lookup"><span data-stu-id="ffe58-566">[Back tooFast start](#fast-start) | Detailed build instructions available soon</span></span>

<span data-ttu-id="ffe58-567">[![16]][16]</span><span class="sxs-lookup"><span data-stu-id="ffe58-567">[![16]][16]</span></span>

#### <a name="environment-description"></a><span data-ttu-id="ffe58-568">Descrizione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="ffe58-568">Environment description</span></span>
<span data-ttu-id="ffe58-569">Rete ibrida tramite ExpressRoute connessione peering privata può essere aggiunto il tipo di rete perimetrale tooeither descritto negli esempi 1 o 2.</span><span class="sxs-lookup"><span data-stu-id="ffe58-569">Hybrid networking using an ExpressRoute private peering connection can be added tooeither perimeter network type described in examples 1 or 2.</span></span>

<span data-ttu-id="ffe58-570">Come illustrato nella figura precedente hello, ExpressRoute di peering privato fornisce una connessione diretta tra la rete locale e hello rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-570">As shown in hello preceding figure, ExpressRoute private peering provides a direct connection between your on-premises network and hello Azure virtual network.</span></span> <span data-ttu-id="ffe58-571">Il traffico passa solo hello servizio provider rete e della rete di Microsoft Azure hello, non tocca mai hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-571">Traffic transits only hello service provider network and hello Microsoft Azure network, never touching hello Internet.</span></span>

> [!TIP]
> <span data-ttu-id="ffe58-572">Uso di ExpressRoute mantiene il traffico di rete aziendali off hello Internet.</span><span class="sxs-lookup"><span data-stu-id="ffe58-572">Using ExpressRoute keeps corporate network traffic off hello Internet.</span></span> <span data-ttu-id="ffe58-573">agevolando contratti di servizio dal provider ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="ffe58-573">It also allows for service level agreements from your ExpressRoute provider.</span></span> <span data-ttu-id="ffe58-574">Gateway Azure Hello può passare i Gbps too10 con ExpressRoute, mentre con connessioni VPN da sito a sito, la velocità effettiva massima di Gateway Azure hello è 200 Mbps.</span><span class="sxs-lookup"><span data-stu-id="ffe58-574">hello Azure Gateway can pass up too10 Gbps with ExpressRoute, whereas with site-to-site VPNs, hello Azure Gateway maximum throughput is 200 Mbps.</span></span>
>
>

<span data-ttu-id="ffe58-575">Come illustrato nel seguente diagramma hello, con questo hello opzione ambiente ora dispone di due bordi di rete.</span><span class="sxs-lookup"><span data-stu-id="ffe58-575">As seen in hello following diagram, with this option hello environment now has two network edges.</span></span> <span data-ttu-id="ffe58-576">Hello NVA e gruppo controllo flussi di traffico per le reti di Azure all'interno e tra Azure e hello Internet, mentre il gateway hello è un bordo di rete separata e isolate tra sedi locali e Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-576">hello NVA and NSG control traffic flows for intra-Azure networks and between Azure and hello Internet, while hello gateway is a separate and isolated network edge between on-premises and Azure.</span></span>

<span data-ttu-id="ffe58-577">Flussi di traffico da considerare con attenzione, perché possono essere ottimizzati o ridotto da questo schema progettuale, a seconda delle specifiche di hello caso d'uso.</span><span class="sxs-lookup"><span data-stu-id="ffe58-577">Traffic flows should be considered carefully, as they can be optimized or degraded by this design pattern, depending on hello specific use case.</span></span>

<span data-ttu-id="ffe58-578">Usando l'ambiente hello compilato nell'esempio 1 e quindi aggiungendo una connessione di rete ibrida ExpressRoute, produce hello seguente struttura:</span><span class="sxs-lookup"><span data-stu-id="ffe58-578">Using hello environment built in example 1, and then adding an ExpressRoute hybrid network connection, produces hello following design:</span></span>

<span data-ttu-id="ffe58-579">[![17]][17]</span><span class="sxs-lookup"><span data-stu-id="ffe58-579">[![17]][17]</span></span>

#### <a name="conclusion"></a><span data-ttu-id="ffe58-580">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="ffe58-580">Conclusion</span></span>
<span data-ttu-id="ffe58-581">aggiunta di Hello di una connessione di rete di Peering ExpressRoute privato è possibile estendere rete locale hello in Azure in una latenza protetta, inferiore e superiore esecuzione modo.</span><span class="sxs-lookup"><span data-stu-id="ffe58-581">hello addition of an ExpressRoute Private Peering network connection can extend hello on-premises network into Azure in a secure, lower latency, higher performing manner.</span></span> <span data-ttu-id="ffe58-582">Inoltre, utilizzando hello native Azure Gateway, come nel seguente esempio, opzione fornisce un basso costo (non di licenza aggiuntivo come con NVAs di terze parti).</span><span class="sxs-lookup"><span data-stu-id="ffe58-582">Also, using hello native Azure Gateway, as in this example, provides a lower-cost option (no additional licensing as with third-party NVAs).</span></span> <span data-ttu-id="ffe58-583">Per ulteriori informazioni, vedere hello dettagliata compilare istruzioni (misura).</span><span class="sxs-lookup"><span data-stu-id="ffe58-583">For more information, see hello detailed build instructions (forthcoming).</span></span> <span data-ttu-id="ffe58-584">Le istruzioni includono:</span><span class="sxs-lookup"><span data-stu-id="ffe58-584">These instructions include:</span></span>

* <span data-ttu-id="ffe58-585">Come toobuild perimetrale in questo esempio di rete con gli script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ffe58-585">How toobuild this example perimeter network with PowerShell scripts.</span></span>
* <span data-ttu-id="ffe58-586">Come toobuild in questo esempio con un modello di gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ffe58-586">How toobuild this example with an Azure Resource Manager template.</span></span>
* <span data-ttu-id="ffe58-587">Scenari dettagliati di flussi di traffico che illustrano il modo in cui il traffico scorre nella struttura.</span><span class="sxs-lookup"><span data-stu-id="ffe58-587">Detailed traffic flow scenarios, showing how traffic flows through this design.</span></span>

## <a name="references"></a><span data-ttu-id="ffe58-588">Riferimenti</span><span class="sxs-lookup"><span data-stu-id="ffe58-588">References</span></span>
### <a name="helpful-websites-and-documentation"></a><span data-ttu-id="ffe58-589">Siti Web e documentazione utili</span><span class="sxs-lookup"><span data-stu-id="ffe58-589">Helpful websites and documentation</span></span>
* <span data-ttu-id="ffe58-590">Accedere ad Azure tramite Azure Resource Manager:</span><span class="sxs-lookup"><span data-stu-id="ffe58-590">Access Azure with Azure Resource Manager:</span></span>
* <span data-ttu-id="ffe58-591">Accesso ad Azure con PowerShell: [https://docs.microsoft.com/powershell/azureps-cmdlets-docs/](/powershell/azure/overview)</span><span class="sxs-lookup"><span data-stu-id="ffe58-591">Accessing Azure with PowerShell: [https://docs.microsoft.com/powershell/azureps-cmdlets-docs/](/powershell/azure/overview)</span></span>
* <span data-ttu-id="ffe58-592">Documentazione sulle reti virtuali: [https://docs.microsoft.com/azure/virtual-network/](https://docs.microsoft.com/azure/virtual-network/)</span><span class="sxs-lookup"><span data-stu-id="ffe58-592">Virtual networking documentation: [https://docs.microsoft.com/azure/virtual-network/](https://docs.microsoft.com/azure/virtual-network/)</span></span>
* <span data-ttu-id="ffe58-593">Documentazione sui gruppi di sicurezza di rete: [https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg](virtual-network/virtual-networks-nsg.md)</span><span class="sxs-lookup"><span data-stu-id="ffe58-593">Network security group documentation: [https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg](virtual-network/virtual-networks-nsg.md)</span></span>
* <span data-ttu-id="ffe58-594">Documentazione sul routing definito dall'utente: [https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview](virtual-network/virtual-networks-udr-overview.md)</span><span class="sxs-lookup"><span data-stu-id="ffe58-594">User-defined routing documentation: [https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview](virtual-network/virtual-networks-udr-overview.md)</span></span>
* <span data-ttu-id="ffe58-595">Gateway virtuali di Azure: [https://docs.microsoft.com/azure/vpn-gateway/](https://docs.microsoft.com/azure/vpn-gateway/)</span><span class="sxs-lookup"><span data-stu-id="ffe58-595">Azure virtual gateways: [https://docs.microsoft.com/azure/vpn-gateway/](https://docs.microsoft.com/azure/vpn-gateway/)</span></span>
* <span data-ttu-id="ffe58-596">VPN da sito a sito: [https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell](vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="ffe58-596">Site-to-Site VPNs: [https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell](vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md)</span></span>
* <span data-ttu-id="ffe58-597">Documentazione di ExpressRoute (essere toocheck che le sezioni di hello "Getting Started" e "Procedura"): [https://docs.microsoft.com/azure/expressroute/](https://docs.microsoft.com/azure/expressroute/)</span><span class="sxs-lookup"><span data-stu-id="ffe58-597">ExpressRoute documentation (be sure toocheck out hello “Getting Started” and “How To” sections): [https://docs.microsoft.com/azure/expressroute/](https://docs.microsoft.com/azure/expressroute/)</span></span>

<!--Image References-->
[0]: ./media/best-practices-network-security/flowchart.png "Diagramma di flusso sulle opzioni di sicurezza"
[2]: ./media/best-practices-network-security/azuresecurityfeatures.png "Funzionalità di sicurezza di Azure"
[3]: ./media/best-practices-network-security/dmzcorporate.png "Rete perimetrale in una rete aziendale"
[4]: ./media/best-practices-network-security/azuresecurityarchitecture.png "Architettura di sicurezza di Azure"
[5]: ./media/best-practices-network-security/dmzazure.png "Rete perimetrale in una rete virtuale di Azure"
[6]: ./media/best-practices-network-security/dmzhybrid.png "Rete ibrida con tre limiti di sicurezza"
[7]: ./media/best-practices-network-security/example1design.png "Rete perimetrale in ingresso con gruppo di sicurezza di rete"
[8]: ./media/best-practices-network-security/example2design.png "Rete perimetrale in ingresso con appliance virtuale di rete e gruppo di sicurezza di rete"
[9]: ./media/best-practices-network-security/example3design.png "Rete perimetrale bidirezionale con appliance virtuale di rete, gruppo di sicurezza di rete e routing definito dall'utente"
[10]: ./media/best-practices-network-security/example3firewalllogical.png "vista logica di hello regole del Firewall"
[11]: ./media/best-practices-network-security/example3designoptions.png "Rete perimetrale con appliance virtuale di rete connesso tramite rete ibrida"
[12]: ./media/best-practices-network-security/example4designs2s.png "Rete perimetrale con appliance virtuale di rete connesso tramite VPN da sito a sito"
[13]: ./media/best-practices-network-security/example4networklogical.png "Rete logica dal punto di vista dell'appliance virtuale di rete"
[14]: ./media/best-practices-network-security/example5designoptions.png "Rete perimetrale con gateway di Azure connesso tramite rete ibrida da sito a sito"
[15]: ./media/best-practices-network-security/example5designs2s.png "Rete perimetrale con gateway di Azure che usa la VPN da sito a sito"
[16]: ./media/best-practices-network-security/example6designoptions.png "Rete perimetrale con gateway di Azure connesso tramite rete ibrida ExpressRoute"
[17]: ./media/best-practices-network-security/example6designexpressroute.png "Rete perimetrale con gateway di Azure che usa una connessione ExpressRoute"

<!--Link References-->
[TrustCenter]: https://azure.microsoft.com/support/trust-center/compliance/
[Example1]: ./virtual-network/virtual-networks-dmz-nsg.md
[Example2]: ./virtual-network/virtual-networks-dmz-nsg-fw-asm.md
[Example3]: ./virtual-network/virtual-networks-dmz-nsg-fw-udr-asm.md
[Example4]: ./virtual-network/virtual-networks-hybrid-s2s-nva-asm.md
[Example5]: ./virtual-network/virtual-networks-hybrid-s2s-agw-asm.md
[Example6]: ./virtual-network/virtual-networks-hybrid-expressroute-asm.md
[Example7]: ./virtual-network/virtual-networks-vnet2vnet-direct-asm.md
[Example8]: ./virtual-network/virtual-networks-vnet2vnet-transit-asm.md
