---
title: aaaCommon causa del riciclo dei ruoli del servizio Cloud | Documenti Microsoft
description: "Un ruolo del servizio cloud che viene riciclato improvvisamente può causare tempi di inattività significativi. Ecco alcuni problemi comuni che causano toobe ruoli riciclato, che consentono di ridurre i tempi di inattività."
services: cloud-services
documentationcenter: 
author: simonxjx
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: 533930d1-8035-4402-b16a-cf887b2c4f85
ms.service: cloud-services
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 7/26/2017
ms.author: v-six
ms.openlocfilehash: 8fa152b33d2b22a8a02f834d4bc38519b4272f7b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="common-issues-that-cause-roles-toorecycle"></a><span data-ttu-id="aefa2-104">Problemi comuni che causano toorecycle ruoli</span><span class="sxs-lookup"><span data-stu-id="aefa2-104">Common issues that cause roles toorecycle</span></span>
<span data-ttu-id="aefa2-105">In questo articolo vengono descritte alcune delle cause più comuni di hello di problemi di distribuzione e risoluzione dei problemi di toohelp suggerimenti risolvere questi problemi.</span><span class="sxs-lookup"><span data-stu-id="aefa2-105">This article discusses some of hello common causes of deployment problems and provides troubleshooting tips toohelp you resolve these problems.</span></span> <span data-ttu-id="aefa2-106">Un'indicazione che si verifica un problema con un'applicazione è quando l'istanza del ruolo hello ha esito negativo toostart o dal relativo passaggio tra gli stati inizializzazione, occupato e arresto di hello.</span><span class="sxs-lookup"><span data-stu-id="aefa2-106">An indication that a problem exists with an application is when hello role instance fails toostart, or it cycles between hello initializing, busy, and stopping states.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="missing-runtime-dependencies"></a><span data-ttu-id="aefa2-107">Dipendenze di runtime mancanti</span><span class="sxs-lookup"><span data-stu-id="aefa2-107">Missing runtime dependencies</span></span>
<span data-ttu-id="aefa2-108">Se un ruolo nell'applicazione si basa su qualsiasi assembly che non fa parte di hello libreria gestita di .NET Framework o hello Azure, è necessario includere in modo esplicito tale assembly nel pacchetto di applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="aefa2-108">If a role in your application relies on any assembly that is not part of hello .NET Framework or hello Azure managed library, you must explicitly include that assembly in hello application package.</span></span> <span data-ttu-id="aefa2-109">Tenere presente che in Azure non sono disponibili per impostazione predefinita altri framework di Microsoft.</span><span class="sxs-lookup"><span data-stu-id="aefa2-109">Keep in mind that other Microsoft frameworks are not available on Azure by default.</span></span> <span data-ttu-id="aefa2-110">Se il ruolo si basa su un framework di questo tipo, è necessario aggiungere pacchetto di applicazione toohello tali assembly.</span><span class="sxs-lookup"><span data-stu-id="aefa2-110">If your role relies on such a framework, you must add those assemblies toohello application package.</span></span>

<span data-ttu-id="aefa2-111">Prima di compilare e assemblare l'applicazione, verificare i seguenti aspetti di hello:</span><span class="sxs-lookup"><span data-stu-id="aefa2-111">Before you build and package your application, verify hello following:</span></span>

* <span data-ttu-id="aefa2-112">Se si utilizza Visual studio, verificare che hello **Copia localmente** impostata troppo**True** per ogni riferimento di assembly del progetto che non fa parte di hello Azure SDK oppure hello .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="aefa2-112">If using Visual studio, make sure hello **Copy Local** property is set too**True** for each referenced assembly in your project that is not part of hello Azure SDK or hello .NET Framework.</span></span>
* <span data-ttu-id="aefa2-113">Assicurarsi che i file Web. config hello non fa riferimento ad alcun assembly inutilizzato nell'elemento di compilazione hello.</span><span class="sxs-lookup"><span data-stu-id="aefa2-113">Make sure hello web.config file does not reference any unused assemblies in hello compilation element.</span></span>
* <span data-ttu-id="aefa2-114">Hello **azione di compilazione** di ogni cshtml file è troppo**contenuto**.</span><span class="sxs-lookup"><span data-stu-id="aefa2-114">hello **Build Action** of every .cshtml file is set too**Content**.</span></span> <span data-ttu-id="aefa2-115">In questo modo che i file hello vengano visualizzati correttamente nel pacchetto hello e Abilita tooappear altri file a cui fa riferimento nel pacchetto hello.</span><span class="sxs-lookup"><span data-stu-id="aefa2-115">This ensures that hello files will appear correctly in hello package and enables other referenced files tooappear in hello package.</span></span>

## <a name="assembly-targets-wrong-platform"></a><span data-ttu-id="aefa2-116">Riferimento dell'assembly alla piattaforma errata</span><span class="sxs-lookup"><span data-stu-id="aefa2-116">Assembly targets wrong platform</span></span>
<span data-ttu-id="aefa2-117">Azure è un ambiente a 64 bit,</span><span class="sxs-lookup"><span data-stu-id="aefa2-117">Azure is a 64-bit environment.</span></span> <span data-ttu-id="aefa2-118">pertanto gli assembly .NET compilati per una destinazione a 32 bit non funzioneranno in Azure.</span><span class="sxs-lookup"><span data-stu-id="aefa2-118">Therefore, .NET assemblies compiled for a 32-bit target won't work on Azure.</span></span>

## <a name="role-throws-unhandled-exceptions-while-initializing-or-stopping"></a><span data-ttu-id="aefa2-119">Generazione di eccezioni non gestite da parte del ruolo durante l'inizializzazione o l'arresto</span><span class="sxs-lookup"><span data-stu-id="aefa2-119">Role throws unhandled exceptions while initializing or stopping</span></span>
<span data-ttu-id="aefa2-120">Eventuali eccezioni generate dai metodi hello di hello [RoleEntryPoint] (classe), che include hello [OnStart], [OnStop], e [eseguire]metodi, sono eccezioni non gestite.</span><span class="sxs-lookup"><span data-stu-id="aefa2-120">Any exceptions that are thrown by hello methods of hello [RoleEntryPoint] class, which includes hello [OnStart], [OnStop], and [Run] methods, are unhandled exceptions.</span></span> <span data-ttu-id="aefa2-121">Se viene generata un'eccezione non gestita in uno di questi metodi, è possibile che hello ruolo verrà riciclato.</span><span class="sxs-lookup"><span data-stu-id="aefa2-121">If an unhandled exception occurs in one of these methods, hello role will recycle.</span></span> <span data-ttu-id="aefa2-122">Se il ruolo di hello il riciclo ripetuto potrebbe generare un'eccezione non gestita, ogni volta che viene effettuato il tentativo toostart.</span><span class="sxs-lookup"><span data-stu-id="aefa2-122">If hello role is recycling repeatedly, it may be throwing an unhandled exception each time it tries toostart.</span></span>

## <a name="role-returns-from-run-method"></a><span data-ttu-id="aefa2-123">Restituzioni del ruolo dal metodo Run</span><span class="sxs-lookup"><span data-stu-id="aefa2-123">Role returns from Run method</span></span>
<span data-ttu-id="aefa2-124">Hello [eseguire] metodo è toorun previsto per un periodo illimitato.</span><span class="sxs-lookup"><span data-stu-id="aefa2-124">hello [Run] method is intended toorun indefinitely.</span></span> <span data-ttu-id="aefa2-125">Se il codice esegue l'override di hello [eseguire] (metodo), deve essere sospeso per un periodo illimitato.</span><span class="sxs-lookup"><span data-stu-id="aefa2-125">If your code overrides hello [Run] method, it should sleep indefinitely.</span></span> <span data-ttu-id="aefa2-126">Se hello [eseguire] metodo viene restituito, hello ruolo viene riciclato.</span><span class="sxs-lookup"><span data-stu-id="aefa2-126">If hello [Run] method returns, hello role recycles.</span></span>

## <a name="incorrect-diagnosticsconnectionstring-setting"></a><span data-ttu-id="aefa2-127">Impostazione di DiagnosticsConnectionString errata</span><span class="sxs-lookup"><span data-stu-id="aefa2-127">Incorrect DiagnosticsConnectionString setting</span></span>
<span data-ttu-id="aefa2-128">Se l'applicazione usa diagnostica Azure, file di configurazione del servizio è necessario specificare hello `DiagnosticsConnectionString` impostazione di configurazione.</span><span class="sxs-lookup"><span data-stu-id="aefa2-128">If application uses Azure Diagnostics, your service configuration file must specify hello `DiagnosticsConnectionString` configuration setting.</span></span> <span data-ttu-id="aefa2-129">Questa impostazione è necessario specificare un account di archiviazione tooyour connessione HTTPS in Azure.</span><span class="sxs-lookup"><span data-stu-id="aefa2-129">This setting should specify an HTTPS connection tooyour storage account in Azure.</span></span>

<span data-ttu-id="aefa2-130">tooensure che il `DiagnosticsConnectionString` impostazioni siano corrette prima di distribuire il tooAzure pacchetto di applicazione, verificare hello segue:</span><span class="sxs-lookup"><span data-stu-id="aefa2-130">tooensure that your `DiagnosticsConnectionString` setting is correct before you deploy your application package tooAzure, verify hello following:</span></span>  

* <span data-ttu-id="aefa2-131">Hello `DiagnosticsConnectionString` l'impostazione di account di archiviazione valido tooa punti in Azure.</span><span class="sxs-lookup"><span data-stu-id="aefa2-131">hello `DiagnosticsConnectionString` setting points tooa valid storage account in Azure.</span></span>  
  <span data-ttu-id="aefa2-132">Per impostazione predefinita, questa impostazione punta account di archiviazione emulato toohello, pertanto è necessario modificare questa impostazione in modo esplicito prima di distribuire il pacchetto dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="aefa2-132">By default, this setting points toohello emulated storage account, so you must explicitly change this setting before you deploy your application package.</span></span> <span data-ttu-id="aefa2-133">Se non si modifica questa impostazione, viene generata un'eccezione quando tenta di istanza del ruolo hello toostart monitor di diagnostica hello.</span><span class="sxs-lookup"><span data-stu-id="aefa2-133">If you do not change this setting, an exception is thrown when hello role instance attempts toostart hello diagnostic monitor.</span></span> <span data-ttu-id="aefa2-134">Ciò potrebbe causare hello ruolo istanza toorecycle per un periodo illimitato.</span><span class="sxs-lookup"><span data-stu-id="aefa2-134">This may cause hello role instance toorecycle indefinitely.</span></span>
* <span data-ttu-id="aefa2-135">Hello stringa di connessione è specificata nel seguente hello [formato](../storage/common/storage-configure-connection-string.md).</span><span class="sxs-lookup"><span data-stu-id="aefa2-135">hello connection string is specified in hello following [format](../storage/common/storage-configure-connection-string.md).</span></span> <span data-ttu-id="aefa2-136">(protocollo hello deve essere specificato come HTTPS). Sostituire *MyAccountName* con nome hello dell'account di archiviazione, e *MyAccountKey* con la chiave di accesso:</span><span class="sxs-lookup"><span data-stu-id="aefa2-136">(hello protocol must be specified as HTTPS.) Replace *MyAccountName* with hello name of your storage account, and *MyAccountKey* with your access key:</span></span>    

        DefaultEndpointsProtocol=https;AccountName=MyAccountName;AccountKey=MyAccountKey

  <span data-ttu-id="aefa2-137">Se si sviluppa l'applicazione tramite gli strumenti di Azure per Microsoft Visual Studio, è possibile utilizzare questo valore tooset pagine di proprietà hello.</span><span class="sxs-lookup"><span data-stu-id="aefa2-137">If you are developing your application by using Azure Tools for Microsoft Visual Studio, you can use hello property pages tooset this value.</span></span>

## <a name="exported-certificate-does-not-include-private-key"></a><span data-ttu-id="aefa2-138">Chiave privata non inclusa nel certificato esportato</span><span class="sxs-lookup"><span data-stu-id="aefa2-138">Exported certificate does not include private key</span></span>
<span data-ttu-id="aefa2-139">toorun un ruolo web in SSL, è necessario assicurarsi che il certificato di gestione esportato include la chiave privata di hello.</span><span class="sxs-lookup"><span data-stu-id="aefa2-139">toorun a web role under SSL, you must ensure that your exported management certificate includes hello private key.</span></span> <span data-ttu-id="aefa2-140">Se si utilizza hello *gestione certificati di Windows* certificato hello tooexport, tooselect assicurarsi di essere **Sì** per hello **Esporta chiave privata di hello** opzione.</span><span class="sxs-lookup"><span data-stu-id="aefa2-140">If you use hello *Windows Certificate Manager* tooexport hello certificate, be sure tooselect **Yes** for hello **Export hello private key** option.</span></span> <span data-ttu-id="aefa2-141">Hello certificato deve essere esportato in formato PFX hello, ovvero unico formato di hello attualmente supportato.</span><span class="sxs-lookup"><span data-stu-id="aefa2-141">hello certificate must be exported in hello PFX format, which is hello only format currently supported.</span></span>

## <a name="next-steps"></a><span data-ttu-id="aefa2-142">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="aefa2-142">Next steps</span></span>
<span data-ttu-id="aefa2-143">Altri [articoli sulla risoluzione dei problemi](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) per i servizi cloud.</span><span class="sxs-lookup"><span data-stu-id="aefa2-143">View more [troubleshooting articles](https://azure.microsoft.com/documentation/articles/?tag=top-support-issue&product=cloud-services) for cloud services.</span></span>

<span data-ttu-id="aefa2-144">Per altri scenari di riciclo dei ruoli, vedere la [serie di blog di Kevin Williamson](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span><span class="sxs-lookup"><span data-stu-id="aefa2-144">View more role recycling scenarios at [Kevin Williamson's blog series](http://blogs.msdn.com/b/kwill/archive/2013/08/09/windows-azure-paas-compute-diagnostics-data.aspx).</span></span>

[RoleEntryPoint]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.aspx
[OnStart]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstart.aspx
[OnStop]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.onstop.aspx
[eseguire]: https://msdn.microsoft.com/library/microsoft.windowsazure.serviceruntime.roleentrypoint.run.aspx
