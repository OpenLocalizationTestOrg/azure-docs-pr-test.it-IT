---
title: aaaDNS opzioni di risoluzione nomi per le macchine virtuali Linux in Azure
description: "Scenari di risoluzione dei nomi per macchine virtuali Linux in IaaS di Azure, inclusi i servizi DNS forniti, DNS esterno ibrido e possibilità di usare il proprio server DNS."
services: virtual-machines
documentationcenter: na
author: RicksterCDN
manager: timlt
editor: tysonn
ms.assetid: 787a1e04-cebf-4122-a1b4-1fcf0a2bbf5f
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/19/2016
ms.author: rclaus
ms.openlocfilehash: 7df2320b6f6b42b479bf4070ea60fe5770a78a41
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="dns-name-resolution-options-for-linux-virtual-machines-in-azure"></a><span data-ttu-id="941d7-103">Opzioni di risoluzione dei nomi DNS per macchine virtuali Linux in Azure</span><span class="sxs-lookup"><span data-stu-id="941d7-103">DNS Name Resolution options for Linux virtual machines in Azure</span></span>
<span data-ttu-id="941d7-104">Per impostazione predefinita, Azure fornisce la risoluzione dei nomi DNS per tutte le macchine virtuali contenute in una singola rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="941d7-104">Azure provides DNS name resolution by default for all virtual machines that are in a single virtual network.</span></span> <span data-ttu-id="941d7-105">È possibile implementare la soluzione di risoluzione dei nomi DNS configurando i servizi DNS nelle macchine virtuali ospitate da Azure.</span><span class="sxs-lookup"><span data-stu-id="941d7-105">You can implement your own DNS name resolution solution by configuring your own DNS services on your virtual machines that Azure hosts.</span></span> <span data-ttu-id="941d7-106">Hello negli scenari seguenti consentono di scegliere quello più adatto alla propria situazione hello.</span><span class="sxs-lookup"><span data-stu-id="941d7-106">hello following scenarios should help you choose hello one that works for your situation.</span></span>

* [<span data-ttu-id="941d7-107">Risoluzione dei nomi forniti da Azure</span><span class="sxs-lookup"><span data-stu-id="941d7-107">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution)
* [<span data-ttu-id="941d7-108">Risoluzione dei nomi usando il server DNS</span><span class="sxs-lookup"><span data-stu-id="941d7-108">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server)

<span data-ttu-id="941d7-109">tipo di Hello di risoluzione dei nomi in uso dipende in che modo le macchine virtuali e istanze del ruolo necessario toocommunicate tra loro.</span><span class="sxs-lookup"><span data-stu-id="941d7-109">hello type of name resolution that you use depends on how your virtual machines and role instances need toocommunicate with each other.</span></span>

<span data-ttu-id="941d7-110">Hello nella tabella seguente sono illustrati gli scenari e soluzioni di risoluzione nome corrispondente:</span><span class="sxs-lookup"><span data-stu-id="941d7-110">hello following table illustrates scenarios and corresponding name resolution solutions:</span></span>

| <span data-ttu-id="941d7-111">**Scenario**</span><span class="sxs-lookup"><span data-stu-id="941d7-111">**Scenario**</span></span> | <span data-ttu-id="941d7-112">**Soluzione**</span><span class="sxs-lookup"><span data-stu-id="941d7-112">**Solution**</span></span> | <span data-ttu-id="941d7-113">**Suffisso**</span><span class="sxs-lookup"><span data-stu-id="941d7-113">**Suffix**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="941d7-114">Risoluzione dei nomi tra istanze del ruolo o macchine virtuali in hello stessa rete virtuale</span><span class="sxs-lookup"><span data-stu-id="941d7-114">Name resolution between role instances or virtual machines in hello same virtual network</span></span> |[<span data-ttu-id="941d7-115">Risoluzione dei nomi forniti da Azure</span><span class="sxs-lookup"><span data-stu-id="941d7-115">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution) |<span data-ttu-id="941d7-116">nome host o nome di dominio completo (FQDN)</span><span class="sxs-lookup"><span data-stu-id="941d7-116">hostname or fully-qualified domain name (FQDN)</span></span> |
| <span data-ttu-id="941d7-117">Risoluzione dei nomi tra istanze del ruolo o macchine virtuali presenti in reti virtuali diverse</span><span class="sxs-lookup"><span data-stu-id="941d7-117">Name resolution between role instances or virtual machines in different virtual networks</span></span> |<span data-ttu-id="941d7-118">Server DNS gestiti dal cliente che inoltrano query tra reti virtuali per la risoluzione da parte di Azure (proxy DNS).</span><span class="sxs-lookup"><span data-stu-id="941d7-118">Customer-managed DNS servers that forward queries between virtual networks for resolution by Azure (DNS proxy).</span></span> <span data-ttu-id="941d7-119">Vedere [Risoluzione dei nomi usando il server DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="941d7-119">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="941d7-120">Solo nome di dominio completo</span><span class="sxs-lookup"><span data-stu-id="941d7-120">FQDN only</span></span> |
| <span data-ttu-id="941d7-121">Risoluzione dei nomi servizi e computer locali da istanze del ruolo o macchine virtuali in Azure</span><span class="sxs-lookup"><span data-stu-id="941d7-121">Resolution of on-premises computers and service names from role instances or virtual machines in Azure</span></span> |<span data-ttu-id="941d7-122">Server DNS gestiti dal cliente, ad esempio controller di dominio locale, controller di dominio di sola lettura locale o server DNS secondario sincronizzati tramite trasferimenti di zona.</span><span class="sxs-lookup"><span data-stu-id="941d7-122">Customer-managed DNS servers (for example, on-premises domain controller, local read-only domain controller, or a DNS secondary synced by using zone transfers).</span></span> <span data-ttu-id="941d7-123">Vedere [Risoluzione dei nomi usando il server DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="941d7-123">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="941d7-124">Solo nome di dominio completo</span><span class="sxs-lookup"><span data-stu-id="941d7-124">FQDN only</span></span> |
| <span data-ttu-id="941d7-125">Risoluzione di nomi host di Azure da computer locali</span><span class="sxs-lookup"><span data-stu-id="941d7-125">Resolution of Azure hostnames from on-premises computers</span></span> |<span data-ttu-id="941d7-126">Inoltrare query tooa gestita dal cliente proxy server DNS nella rete virtuale corrispondente hello.</span><span class="sxs-lookup"><span data-stu-id="941d7-126">Forward queries tooa customer-managed DNS proxy server in hello corresponding virtual network.</span></span> <span data-ttu-id="941d7-127">server proxy Hello inoltra tooAzure query per la risoluzione.</span><span class="sxs-lookup"><span data-stu-id="941d7-127">hello proxy server forwards queries tooAzure for resolution.</span></span> <span data-ttu-id="941d7-128">Vedere [Risoluzione dei nomi usando il server DNS](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="941d7-128">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="941d7-129">Solo nome di dominio completo</span><span class="sxs-lookup"><span data-stu-id="941d7-129">FQDN only</span></span> |
| <span data-ttu-id="941d7-130">DNS inversi per indirizzi IP interni</span><span class="sxs-lookup"><span data-stu-id="941d7-130">Reverse DNS for internal IPs</span></span> |[<span data-ttu-id="941d7-131">Risoluzione dei nomi usando il server DNS</span><span class="sxs-lookup"><span data-stu-id="941d7-131">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server) |<span data-ttu-id="941d7-132">N/D</span><span class="sxs-lookup"><span data-stu-id="941d7-132">n/a</span></span> |

## <a name="name-resolution-that-azure-provides"></a><span data-ttu-id="941d7-133">Risoluzione dei nomi forniti da Azure</span><span class="sxs-lookup"><span data-stu-id="941d7-133">Name resolution that Azure provides</span></span>
<span data-ttu-id="941d7-134">Oltre alla risoluzione dei nomi DNS pubblici, Azure fornisce la risoluzione dei nomi interna per le macchine virtuali e istanze del ruolo presenti nella stessa rete virtuale di hello.</span><span class="sxs-lookup"><span data-stu-id="941d7-134">Along with resolution of public DNS names, Azure provides internal name resolution for virtual machines and role instances that are in hello same virtual network.</span></span> <span data-ttu-id="941d7-135">Nelle reti virtuali che sono basate su Azure Resource Manager, il suffisso DNS hello sia coerenza in rete virtuale hello. Hello FQDN non è necessaria.</span><span class="sxs-lookup"><span data-stu-id="941d7-135">In virtual networks that are based on Azure Resource Manager, hello DNS suffix is consistent across hello virtual network; hello FQDN is not needed.</span></span> <span data-ttu-id="941d7-136">Schede di interfaccia di rete tooboth (NIC) e le macchine virtuali, è possono assegnare i nomi DNS.</span><span class="sxs-lookup"><span data-stu-id="941d7-136">DNS names can be assigned tooboth network interface cards (NICs) and virtual machines.</span></span> <span data-ttu-id="941d7-137">Anche se la risoluzione dei nomi hello forniti da Azure non richiede alcuna configurazione, non è adatta hello per tutti gli scenari di distribuzione, come illustrato nella tabella precedente hello.</span><span class="sxs-lookup"><span data-stu-id="941d7-137">Although hello name resolution that Azure provides does not require any configuration, it is not hello appropriate choice for all deployment scenarios, as seen on hello preceding table.</span></span>

### <a name="features-and-considerations"></a><span data-ttu-id="941d7-138">Funzionalità e considerazioni</span><span class="sxs-lookup"><span data-stu-id="941d7-138">Features and considerations</span></span>
<span data-ttu-id="941d7-139">**Funzionalità**</span><span class="sxs-lookup"><span data-stu-id="941d7-139">**Features:**</span></span>

* <span data-ttu-id="941d7-140">Risoluzione dei nomi necessari toouse forniti da Azure è alcuna configurazione.</span><span class="sxs-lookup"><span data-stu-id="941d7-140">No configuration is required toouse name resolution that Azure provides.</span></span>
* <span data-ttu-id="941d7-141">servizio di risoluzione dei nomi Hello forniti da Azure è a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="941d7-141">hello name resolution service that Azure provides is highly available.</span></span> <span data-ttu-id="941d7-142">Non necessari toocreate e gestire i cluster di server DNS.</span><span class="sxs-lookup"><span data-stu-id="941d7-142">You don't need toocreate and manage clusters of your own DNS servers.</span></span>
* <span data-ttu-id="941d7-143">servizio di risoluzione nome Hello forniti da Azure può essere utilizzato insieme ai propri tooresolve server DNS sia in locale e i nomi host di Azure.</span><span class="sxs-lookup"><span data-stu-id="941d7-143">hello name resolution service that Azure provides can be used along with your own DNS servers tooresolve both on-premises and Azure hostnames.</span></span>
* <span data-ttu-id="941d7-144">Risoluzione dei nomi viene fornita tra le macchine virtuali in reti virtuali senza necessità di hello FQDN.</span><span class="sxs-lookup"><span data-stu-id="941d7-144">Name resolution is provided between virtual machines in virtual networks without need for hello FQDN.</span></span>
* <span data-ttu-id="941d7-145">È possibile usare nomi host personalizzati in grado di descrivere in modo più adeguato le distribuzioni, anziché usare nomi generati automaticamente.</span><span class="sxs-lookup"><span data-stu-id="941d7-145">You can use hostnames that best describe your deployments rather than working with auto-generated names.</span></span>

<span data-ttu-id="941d7-146">**Considerazioni:**</span><span class="sxs-lookup"><span data-stu-id="941d7-146">**Considerations:**</span></span>

* <span data-ttu-id="941d7-147">suffisso DNS Hello Azure crea non può essere modificato.</span><span class="sxs-lookup"><span data-stu-id="941d7-147">hello DNS suffix that Azure creates cannot be modified.</span></span>
* <span data-ttu-id="941d7-148">Non è possibile registrare manualmente i propri record.</span><span class="sxs-lookup"><span data-stu-id="941d7-148">You cannot manually register your own records.</span></span>
* <span data-ttu-id="941d7-149">WINS e NetBIOS non sono supportati.</span><span class="sxs-lookup"><span data-stu-id="941d7-149">WINS and NetBIOS are not supported.</span></span>
* <span data-ttu-id="941d7-150">I nomi host devono essere compatibili con DNS.</span><span class="sxs-lookup"><span data-stu-id="941d7-150">Hostnames must be DNS-compatible.</span></span>
    <span data-ttu-id="941d7-151">I nomi devono usare solo 0-9, a-z e "-" e non possono iniziare o terminare con un "-".</span><span class="sxs-lookup"><span data-stu-id="941d7-151">Names must use only 0-9, a-z, and '-', and they cannot start or end with a '-'.</span></span> <span data-ttu-id="941d7-152">Vedere RFC 3696 Sezione 2.</span><span class="sxs-lookup"><span data-stu-id="941d7-152">See RFC 3696 Section 2.</span></span>
* <span data-ttu-id="941d7-153">Il traffico di query DNS è limitato per ogni macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="941d7-153">DNS query traffic is throttled for each virtual machine.</span></span> <span data-ttu-id="941d7-154">La limitazione in genere non comporta alcun impatto sulla maggior parte delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="941d7-154">Throttling shouldn't impact most applications.</span></span>  <span data-ttu-id="941d7-155">Se viene osservata la limitazione delle richieste, assicurarsi che la memorizzazione nella cache sul lato client sia abilitata.</span><span class="sxs-lookup"><span data-stu-id="941d7-155">If request throttling is observed, ensure that client-side caching is enabled.</span></span>  <span data-ttu-id="941d7-156">Per ulteriori informazioni, vedere [ottenere la maggior parte dalla risoluzione dei nomi forniti da Azure hello](#getting-the-most-from-name-resolution-that-azure-provides).</span><span class="sxs-lookup"><span data-stu-id="941d7-156">For more information, see [Getting hello most from name resolution that Azure provides](#getting-the-most-from-name-resolution-that-azure-provides).</span></span>

### <a name="getting-hello-most-from-name-resolution-that-azure-provides"></a><span data-ttu-id="941d7-157">Ottenere la maggior parte dalla risoluzione dei nomi forniti da Azure hello</span><span class="sxs-lookup"><span data-stu-id="941d7-157">Getting hello most from name resolution that Azure provides</span></span>
<span data-ttu-id="941d7-158">**Memorizzazione nella cache sul lato client:**</span><span class="sxs-lookup"><span data-stu-id="941d7-158">**Client-side caching:**</span></span>

<span data-ttu-id="941d7-159">Alcune query DNS non vengono inviati in rete hello.</span><span class="sxs-lookup"><span data-stu-id="941d7-159">Some DNS queries are not sent across hello network.</span></span> <span data-ttu-id="941d7-160">Memorizzazione nella cache sul lato client consente di ridurre la latenza e migliorare le incoerenze di resilienza toonetwork risolvendo ricorrente query DNS da una cache locale.</span><span class="sxs-lookup"><span data-stu-id="941d7-160">Client-side caching helps reduce latency and improve resilience toonetwork inconsistencies by resolving recurring DNS queries from a local cache.</span></span> <span data-ttu-id="941d7-161">I record DNS contengono un Time-To-Live (TTL), che consente di record toostore hello della cache di hello per maggior tempo possibile senza influire sull'aggiornamento di record.</span><span class="sxs-lookup"><span data-stu-id="941d7-161">DNS records contain a Time-To-Live (TTL), which enables hello cache toostore hello record for as long as possible without impacting record freshness.</span></span> <span data-ttu-id="941d7-162">Di conseguenza, la memorizzazione nella cache sul lato client è ideale per la maggior parte delle situazioni.</span><span class="sxs-lookup"><span data-stu-id="941d7-162">As a result, client-side caching is suitable for most situations.</span></span>

<span data-ttu-id="941d7-163">Alcune distribuzioni Linux non includono la memorizzazione nella cache per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="941d7-163">Some Linux distributions do not include caching by default.</span></span> <span data-ttu-id="941d7-164">Si consiglia di aggiungere una macchina virtuale Linux di cache tooeach dopo aver verificato che non vi è una cache locale già.</span><span class="sxs-lookup"><span data-stu-id="941d7-164">We recommend that you add a cache tooeach Linux virtual machine after you check that there isn't a local cache already.</span></span>

<span data-ttu-id="941d7-165">Sono disponibili diversi pacchetti di memorizzazione nella cache DNS, ad esempio dnsmasq.</span><span class="sxs-lookup"><span data-stu-id="941d7-165">Several different DNS caching packages, such as dnsmasq, are available.</span></span> <span data-ttu-id="941d7-166">Di seguito sono hello passaggi tooinstall dnsmasq nelle distribuzioni più comuni di hello:</span><span class="sxs-lookup"><span data-stu-id="941d7-166">Here are hello steps tooinstall dnsmasq on hello most common distributions:</span></span>

<span data-ttu-id="941d7-167">**Ubuntu (usa resolvconf)**</span><span class="sxs-lookup"><span data-stu-id="941d7-167">**Ubuntu (uses resolvconf)**</span></span>
  * <span data-ttu-id="941d7-168">Installare il pacchetto dnsmasq hello ("sudo installazione apt get dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="941d7-168">Install hello dnsmasq package (“sudo apt-get install dnsmasq”).</span></span>

<span data-ttu-id="941d7-169">**SUSE (usa netconf)**:</span><span class="sxs-lookup"><span data-stu-id="941d7-169">**SUSE (uses netconf)**:</span></span>
1. <span data-ttu-id="941d7-170">Installare il pacchetto dnsmasq hello ("sudo zypper installazione dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="941d7-170">Install hello dnsmasq package (“sudo zypper install dnsmasq”).</span></span>
2. <span data-ttu-id="941d7-171">Abilitare il servizio dnsmasq hello ("systemctl enable dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="941d7-171">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="941d7-172">Avviare il servizio di dnsmasq hello ("systemctl inizio dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="941d7-172">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="941d7-173">Modificare "/ e così via/sysconfig/rete/configurazione" e modificare NETCONFIG_DNS_FORWARDER = "" troppo "dnsmasq".</span><span class="sxs-lookup"><span data-stu-id="941d7-173">Edit “/etc/sysconfig/network/config”, and change NETCONFIG_DNS_FORWARDER="" too”dnsmasq”.</span></span>
5. <span data-ttu-id="941d7-174">Aggiornare resolv.conf ("aggiornamento netconfig") tooset hello cache di hello resolver DNS locale.</span><span class="sxs-lookup"><span data-stu-id="941d7-174">Update resolv.conf ("netconfig update") tooset hello cache as hello local DNS resolver.</span></span>

<span data-ttu-id="941d7-175">**CentOS di Rogue Wave Software (in precedenza OpenLogic) (usa NetworkManager)**</span><span class="sxs-lookup"><span data-stu-id="941d7-175">**CentOS by Rogue Wave Software (formerly OpenLogic; uses NetworkManager)**</span></span>
1. <span data-ttu-id="941d7-176">Installare il pacchetto dnsmasq hello ("sudo yum installazione dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="941d7-176">Install hello dnsmasq package (“sudo yum install dnsmasq”).</span></span>
2. <span data-ttu-id="941d7-177">Abilitare il servizio dnsmasq hello ("systemctl enable dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="941d7-177">Enable hello dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="941d7-178">Avviare il servizio di dnsmasq hello ("systemctl inizio dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="941d7-178">Start hello dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="941d7-179">Aggiungere "127.0.0.1; server di nome dominio anteporre" too"/etc/dhclient-eth0.conf".</span><span class="sxs-lookup"><span data-stu-id="941d7-179">Add “prepend domain-name-servers 127.0.0.1;” too“/etc/dhclient-eth0.conf”.</span></span>
5. <span data-ttu-id="941d7-180">Riavviare cache di hello tooset hello rete del servizio ("rete riavviare il servizio") come resolver DNS locali hello</span><span class="sxs-lookup"><span data-stu-id="941d7-180">Restart hello network service (“service network restart”) tooset hello cache as hello local DNS resolver</span></span>

> [!NOTE]
> <span data-ttu-id="941d7-181">: il pacchetto di 'dnsmasq' hello è uno solo di hello molti DNS memorizza nella cache che sono disponibili per Linux.</span><span class="sxs-lookup"><span data-stu-id="941d7-181">: hello 'dnsmasq' package is only one of hello many DNS caches that are available for Linux.</span></span> <span data-ttu-id="941d7-182">Prima di usarla, verificare che sia adatta in base alle esigenze specifiche e assicurarsi che non siano installate altre cache.</span><span class="sxs-lookup"><span data-stu-id="941d7-182">Before you use it, check its suitability for your needs and that no other cache is installed.</span></span>
>
>

<span data-ttu-id="941d7-183">**Ripetizione di tentativi sul lato client**</span><span class="sxs-lookup"><span data-stu-id="941d7-183">**Client-side retries**</span></span>

<span data-ttu-id="941d7-184">DNS è principalmente un protocollo UDP.</span><span class="sxs-lookup"><span data-stu-id="941d7-184">DNS is primarily a UDP protocol.</span></span> <span data-ttu-id="941d7-185">Poiché hello protocollo UDP non garantisce il recapito dei messaggi, hello protocollo DNS stesso gestisce la logica di ripetizione.</span><span class="sxs-lookup"><span data-stu-id="941d7-185">Because hello UDP protocol doesn't guarantee message delivery, hello DNS protocol itself handles retry logic.</span></span> <span data-ttu-id="941d7-186">Ogni client DNS (sistema operativo) può presentare una logica di tentativi diverso a seconda delle preferenze del creatore hello:</span><span class="sxs-lookup"><span data-stu-id="941d7-186">Each DNS client (operating system) can exhibit different retry logic depending on hello creator's preference:</span></span>

* <span data-ttu-id="941d7-187">i sistemi operativi Windows eseguono un nuovo tentativo dopo 1 secondo e ne eseguono un altro dopo 2, 4 e altri 4 secondi.</span><span class="sxs-lookup"><span data-stu-id="941d7-187">Windows operating systems retry after one second and then again after another two, four, and another four seconds.</span></span>
* <span data-ttu-id="941d7-188">Hello tentativi di installazione predefinito Linux dopo cinque secondi.</span><span class="sxs-lookup"><span data-stu-id="941d7-188">hello default Linux setup retries after five seconds.</span></span>  <span data-ttu-id="941d7-189">È necessario modificare questo tooretry cinque volte a intervalli di un secondo.</span><span class="sxs-lookup"><span data-stu-id="941d7-189">You should change this tooretry five times at one-second intervals.</span></span>  

<span data-ttu-id="941d7-190">toocheck hello impostazioni correnti in una macchina virtuale Linux, '/etc/resolv.conf cat,' e cercare nella riga "Opzioni" hello, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="941d7-190">toocheck hello current settings on a Linux virtual machine, 'cat /etc/resolv.conf', and look at hello 'options' line, for example:</span></span>

    options timeout:1 attempts:5

<span data-ttu-id="941d7-191">file resolv.conf Hello viene generato automaticamente e non deve essere modificato.</span><span class="sxs-lookup"><span data-stu-id="941d7-191">hello resolv.conf file is auto-generated and should not be edited.</span></span> <span data-ttu-id="941d7-192">Hello passaggi specifici che aggiungono hello 'opzioni' variano a seconda riga di distribuzione:</span><span class="sxs-lookup"><span data-stu-id="941d7-192">hello specific steps that add hello 'options' line vary by distribution:</span></span>

<span data-ttu-id="941d7-193">**Ubuntu** (usa resolvconf)</span><span class="sxs-lookup"><span data-stu-id="941d7-193">**Ubuntu** (uses resolvconf)</span></span>
1. <span data-ttu-id="941d7-194">Aggiungere hello opzioni riga too'/etc/resolveconf/resolv.conf.d/head'.</span><span class="sxs-lookup"><span data-stu-id="941d7-194">Add hello options line too'/etc/resolveconf/resolv.conf.d/head'.</span></span>
2. <span data-ttu-id="941d7-195">Eseguire tooupdate 'resolvconf -u'.</span><span class="sxs-lookup"><span data-stu-id="941d7-195">Run 'resolvconf -u' tooupdate.</span></span>

<span data-ttu-id="941d7-196">**SUSE** (usa netconf)</span><span class="sxs-lookup"><span data-stu-id="941d7-196">**SUSE** (uses netconf)</span></span>
1. <span data-ttu-id="941d7-197">Aggiungere 'tentativi: 5 timeout:1' toohello NETCONFIG_DNS_RESOLVER_OPTIONS = "" parametro in '/ ecc/sysconfig/rete/configurazione'.</span><span class="sxs-lookup"><span data-stu-id="941d7-197">Add 'timeout:1 attempts:5' toohello NETCONFIG_DNS_RESOLVER_OPTIONS="" parameter in '/etc/sysconfig/network/config'.</span></span>
2. <span data-ttu-id="941d7-198">Eseguire tooupdate 'aggiornamento netconfig'.</span><span class="sxs-lookup"><span data-stu-id="941d7-198">Run 'netconfig update' tooupdate.</span></span>

<span data-ttu-id="941d7-199">**CentOS di Rogue Wave Software (in precedenza OpenLogic)** (usa NetworkManager)</span><span class="sxs-lookup"><span data-stu-id="941d7-199">**CentOS by Rogue Wave Software (formerly OpenLogic)** (uses NetworkManager)</span></span>
1. <span data-ttu-id="941d7-200">Aggiungere too'/etc/NetworkManager/dispatcher.d/11-dhclient 'echo "Opzioni timeout:1. tentativi: 5" ' '.</span><span class="sxs-lookup"><span data-stu-id="941d7-200">Add 'echo "options timeout:1 attempts:5"' too'/etc/NetworkManager/dispatcher.d/11-dhclient'.</span></span>
2. <span data-ttu-id="941d7-201">Eseguire tooupdate 'servizio di rete il riavvio'.</span><span class="sxs-lookup"><span data-stu-id="941d7-201">Run 'service network restart' tooupdate.</span></span>

## <a name="name-resolution-using-your-own-dns-server"></a><span data-ttu-id="941d7-202">Risoluzione dei nomi usando il server DNS</span><span class="sxs-lookup"><span data-stu-id="941d7-202">Name resolution using your own DNS server</span></span>
<span data-ttu-id="941d7-203">I requisiti di risoluzione dei nomi possono andare oltre le funzionalità di hello forniti da Azure.</span><span class="sxs-lookup"><span data-stu-id="941d7-203">Your name resolution needs may go beyond hello features that Azure provides.</span></span> <span data-ttu-id="941d7-204">Ad esempio, potrebbe essere necessaria una risoluzione DNS tra reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="941d7-204">For example, you might require DNS resolution between virtual networks.</span></span> <span data-ttu-id="941d7-205">toocover questo scenario, è possibile usare i propri server DNS.</span><span class="sxs-lookup"><span data-stu-id="941d7-205">toocover this scenario, you can use your own DNS servers.</span></span>  

<span data-ttu-id="941d7-206">Server DNS all'interno di una rete virtuale può essere che toorecursive resolver di nomi host di Azure tooresolve una query DNS di inoltro in hello stessa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="941d7-206">DNS servers within a virtual network can forward DNS queries toorecursive resolvers of Azure tooresolve hostnames that are in hello same virtual network.</span></span> <span data-ttu-id="941d7-207">Ad esempio, un server DNS in esecuzione in Azure può rispondere tooDNS query per il proprio DNS i file di zona e inoltrare tutti gli altri tooAzure di query.</span><span class="sxs-lookup"><span data-stu-id="941d7-207">For example, a DNS server that runs in Azure can respond tooDNS queries for its own DNS zone files and forward all other queries tooAzure.</span></span> <span data-ttu-id="941d7-208">Questa funzionalità consente a macchine virtuali toosee entrambi le voci nel file di zona e i nomi host forniti da Azure (tramite l'utilità di inoltro hello).</span><span class="sxs-lookup"><span data-stu-id="941d7-208">This functionality enables virtual machines toosee both your entries in your zone files and hostnames that Azure provides (via hello forwarder).</span></span> <span data-ttu-id="941d7-209">Resolver ricorsivo toohello di accesso di Azure viene fornito tramite l'indirizzo IP virtuale hello 168.63.129.16.</span><span class="sxs-lookup"><span data-stu-id="941d7-209">Access toohello recursive resolvers of Azure is provided via hello virtual IP 168.63.129.16.</span></span>

<span data-ttu-id="941d7-210">Inoltro di DNS, inoltre, consente la risoluzione DNS tra reti virtuali e consente i nomi di tooresolve macchine host locale forniti da Azure.</span><span class="sxs-lookup"><span data-stu-id="941d7-210">DNS forwarding also enables DNS resolution between virtual networks and enables your on-premises machines tooresolve hostnames that Azure provides.</span></span> <span data-ttu-id="941d7-211">tooresolve nome host della macchina virtuale, macchina virtuale del server DNS hello devono risiedere in hello stessa rete virtuale ed essere tooAzure query di nome host tooforward configurato.</span><span class="sxs-lookup"><span data-stu-id="941d7-211">tooresolve a virtual machine's hostname, hello DNS server virtual machine must reside in hello same virtual network and be configured tooforward hostname queries tooAzure.</span></span> <span data-ttu-id="941d7-212">Poiché il suffisso DNS hello è diverso in ogni rete virtuale, è possibile usare l'inoltro condizionale regole toosend DNS esegue una query toohello correggere la rete virtuale per la risoluzione.</span><span class="sxs-lookup"><span data-stu-id="941d7-212">Because hello DNS suffix is different in each virtual network, you can use conditional forwarding rules toosend DNS queries toohello correct virtual network for resolution.</span></span> <span data-ttu-id="941d7-213">Hello immagine seguente mostra due reti virtuali e una rete locale fase di risoluzione DNS tra reti virtuali tramite questo metodo:</span><span class="sxs-lookup"><span data-stu-id="941d7-213">hello following image shows two virtual networks and an on-premises network doing DNS resolution between virtual networks by using this method:</span></span>

![Risoluzione DNS tra reti virtuali](./media/azure-dns/inter-vnet-dns.png)

<span data-ttu-id="941d7-215">Quando si utilizza la risoluzione dei nomi forniti da Azure, il suffisso DNS interno hello viene fornito macchina virtuale tooeach mediante il protocollo DHCP.</span><span class="sxs-lookup"><span data-stu-id="941d7-215">When you use name resolution that Azure provides, hello internal DNS suffix is provided tooeach virtual machine by using DHCP.</span></span> <span data-ttu-id="941d7-216">Quando si utilizza la propria soluzione di risoluzione del nome, il suffisso non è fornito toovirtual macchine perché suffisso hello interferisce con altre architetture DNS.</span><span class="sxs-lookup"><span data-stu-id="941d7-216">When you use your own name resolution solution, this suffix is not supplied toovirtual machines because hello suffix interferes with other DNS architectures.</span></span> <span data-ttu-id="941d7-217">toomachines toorefer dal nome di dominio completo o tooconfigure suffisso hello nelle macchine virtuali, è possibile utilizzare PowerShell o hello suffisso hello toodetermine di API:</span><span class="sxs-lookup"><span data-stu-id="941d7-217">toorefer toomachines by FQDN or tooconfigure hello suffix on your virtual machines, you can use PowerShell or hello API toodetermine hello suffix:</span></span>

* <span data-ttu-id="941d7-218">Per le reti virtuali gestiti da Gestione risorse di Azure, è disponibile tramite hello suffisso hello [scheda di interfaccia di rete](https://msdn.microsoft.com/library/azure/mt163668.aspx) risorse.</span><span class="sxs-lookup"><span data-stu-id="941d7-218">For virtual networks that are managed by Azure Resource Manager, hello suffix is available via hello [network interface card](https://msdn.microsoft.com/library/azure/mt163668.aspx) resource.</span></span> <span data-ttu-id="941d7-219">È anche possibile eseguire hello `azure network public-ip show <resource group> <pip name>` comando dettagli hello toodisplay dell'indirizzo IP pubblico, che include hello FQDN di hello scheda di rete.</span><span class="sxs-lookup"><span data-stu-id="941d7-219">You can also run hello `azure network public-ip show <resource group> <pip name>` command toodisplay hello details of your public IP, which includes hello FQDN of hello NIC.</span></span>

<span data-ttu-id="941d7-220">Se l'inoltro delle query tooAzure non in base alle esigenze, è necessario tooprovide la soluzione DNS personalizzata.</span><span class="sxs-lookup"><span data-stu-id="941d7-220">If forwarding queries tooAzure doesn't suit your needs, you need tooprovide your own DNS solution.</span></span>  <span data-ttu-id="941d7-221">La soluzione DNS deve:</span><span class="sxs-lookup"><span data-stu-id="941d7-221">Your DNS solution needs to:</span></span>

* <span data-ttu-id="941d7-222">Offrire una soluzione di risoluzione dei nomi host appropriata, ad esempio tramite [DNS dinamico](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span><span class="sxs-lookup"><span data-stu-id="941d7-222">Provide appropriate hostname resolution, for example via [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span></span> <span data-ttu-id="941d7-223">Se si utilizza DDNS, si potrebbe essere necessario lo scavenging dei record DNS sul toodisable.</span><span class="sxs-lookup"><span data-stu-id="941d7-223">If you use DDNS, you might need toodisable DNS record scavenging.</span></span> <span data-ttu-id="941d7-224">Le lease DHCP di Azure sono molto lunghe e lo scavenging può rimuovere i record DNS in modo anomalo.</span><span class="sxs-lookup"><span data-stu-id="941d7-224">DHCP leases of Azure are very long and scavenging may remove DNS records prematurely.</span></span>
* <span data-ttu-id="941d7-225">Fornire la risoluzione di tooallow ricorsiva appropriato risoluzione dei nomi di dominio esterno.</span><span class="sxs-lookup"><span data-stu-id="941d7-225">Provide appropriate recursive resolution tooallow resolution of external domain names.</span></span>
* <span data-ttu-id="941d7-226">Accessibile (TCP e UDP sulla porta 53) dai client hello che serve e hello tooaccess in grado di Internet.</span><span class="sxs-lookup"><span data-stu-id="941d7-226">Be accessible (TCP and UDP on port 53) from hello clients it serves and be able tooaccess hello Internet.</span></span>
* <span data-ttu-id="941d7-227">Essere protetta da accessi da hello Internet toomitigate imbattono dagli agenti esterni.</span><span class="sxs-lookup"><span data-stu-id="941d7-227">Be secured against access from hello Internet toomitigate threats posed by external agents.</span></span>

> [!NOTE]
> <span data-ttu-id="941d7-228">Per prestazioni ottimali, quando si utilizzano macchine virtuali nel server DNS di Azure, disabilitare il protocollo IPv6 e assegnare un [indirizzo IP pubblico a livello di istanza](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach macchina virtuale del server DNS.</span><span class="sxs-lookup"><span data-stu-id="941d7-228">For best performance, when you use virtual machines in Azure DNS servers, disable IPv6 and assign an [Instance-Level Public IP](../../virtual-network/virtual-networks-instance-level-public-ip.md) tooeach DNS server virtual machine.</span></span>  
>
>
