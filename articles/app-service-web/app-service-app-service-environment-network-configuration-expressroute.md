---
title: aaaNetwork i dettagli di configurazione per l'utilizzo di Express Route
description: Dettagli di configurazione di rete per l'esecuzione di App gli ambienti del servizio in una rete virtuale connessa tooan circuito ExpressRoute.
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 34b49178-2595-4d32-9b41-110c96dde6bf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/14/2016
ms.author: stefsch
ms.openlocfilehash: 85bbc45cfed619485957ee2a898aa0a7604173cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="network-configuration-details-for-app-service-environments-with-expressroute"></a><span data-ttu-id="04f4c-103">Dettagli della configurazione di rete per gli ambienti del servizio app con ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="04f4c-103">Network Configuration Details for App Service Environments with ExpressRoute</span></span>
## <a name="overview"></a><span data-ttu-id="04f4c-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="04f4c-104">Overview</span></span>
<span data-ttu-id="04f4c-105">I clienti possono collegare un [Azure ExpressRoute] [ ExpressRoute] infrastruttura di rete virtuale tootheir circuito, e quindi di estendere i tooAzure di rete locale.</span><span class="sxs-lookup"><span data-stu-id="04f4c-105">Customers can connect an [Azure ExpressRoute][ExpressRoute] circuit tootheir virtual network infrastructure, thus extending their on-premises network tooAzure.</span></span>  <span data-ttu-id="04f4c-106">Un ambiente del servizio app può essere creato in una subnet di questa infrastruttura di [rete virtuale][virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="04f4c-106">An App Service Environment can  be created in a subnet of this [virtual network][virtualnetwork] infrastructure.</span></span>  <span data-ttu-id="04f4c-107">App in esecuzione su hello ambiente del servizio App può quindi stabilire connessioni protette tooback fine risorse accessibili solo tramite hello connessione ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="04f4c-107">Apps running on hello App Service Environment can then establish secure connections tooback-end resources accessible only over hello ExpressRoute connection.</span></span>  

<span data-ttu-id="04f4c-108">Un ambiente del servizio app può essere creato in una rete virtuale di Azure Resource Manager ******o** in una rete virtuale del modello di distribuzione classica.</span><span class="sxs-lookup"><span data-stu-id="04f4c-108">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model virtual network.</span></span>  <span data-ttu-id="04f4c-109">Con una modifica recente apportata a giugno 2016, gli ambienti del servizio app possono essere distribuiti nelle reti virtuali che usano intervalli di indirizzi pubblici o spazi di indirizzi RFC1918, ovvero indirizzi privati.</span><span class="sxs-lookup"><span data-stu-id="04f4c-109">With a recent change made in June 2016, ASEs can also now be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="required-network-connectivity"></a><span data-ttu-id="04f4c-110">Requisiti della connettività di rete</span><span class="sxs-lookup"><span data-stu-id="04f4c-110">Required Network Connectivity</span></span>
<span data-ttu-id="04f4c-111">Esistono requisiti di connettività di rete per gli ambienti del servizio App che non può essere soddisfatto inizialmente in tooan una rete virtuale connessa ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="04f4c-111">There are network connectivity requirements for App Service Environments that may not be initially met in a virtual network connected tooan ExpressRoute.</span></span>  <span data-ttu-id="04f4c-112">Gli ambienti del servizio App richiedono tutti hello seguenti nell'ordine toofunction correttamente:</span><span class="sxs-lookup"><span data-stu-id="04f4c-112">App Service Environments require all of hello following in order toofunction properly:</span></span>

* <span data-ttu-id="04f4c-113">In uscita connettività tooAzure archiviazione gli endpoint di rete in tutto il mondo in entrambe le porte 80 e 443.</span><span class="sxs-lookup"><span data-stu-id="04f4c-113">Outbound network connectivity tooAzure Storage endpoints worldwide on both ports 80 and 443.</span></span>  <span data-ttu-id="04f4c-114">Sono inclusi gli endpoint si trova in hello stessa area hello ambiente del servizio App, nonché gli endpoint di archiviazione si trova **altri** aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="04f4c-114">This includes endpoints located in hello same region as hello App Service Environment, as well as storage endpoints located in **other** Azure regions.</span></span>  <span data-ttu-id="04f4c-115">Endpoint di archiviazione Azure risolvere in hello seguenti domini DNS: *t*, *>.BLOB.Core.Windows.NET*, *queue.core.windows.net* e *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="04f4c-115">Azure Storage endpoints resolve under hello following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* and *file.core.windows.net*.</span></span>  
* <span data-ttu-id="04f4c-116">Toohello di connettività di rete in uscita del servizio file di Azure sulla porta 445.</span><span class="sxs-lookup"><span data-stu-id="04f4c-116">Outbound network connectivity toohello Azure Files service on port 445.</span></span>
* <span data-ttu-id="04f4c-117">Gli endpoint tooSql DB di connettività di rete in uscita si trovano in hello stessa area, come hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="04f4c-117">Outbound network connectivity tooSql DB endpoints located in hello same region as hello App Service Environment.</span></span>  <span data-ttu-id="04f4c-118">Risolvere gli endpoint di database di SQL Server in seguito dominio hello: *database.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="04f4c-118">Sql DB endpoints resolve under hello following domain:  *database.windows.net*.</span></span>  <span data-ttu-id="04f4c-119">Ciò comporta l'apertura di accesso tooports 1433, 11000 11999 e 14000 14999.</span><span class="sxs-lookup"><span data-stu-id="04f4c-119">This requires opening access tooports 1433, 11000-11999 and 14000-14999.</span></span>  <span data-ttu-id="04f4c-120">Per altri dettagli, vedere [questo articolo sull'uso delle porte per il database SQL versione 12](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="04f4c-120">For more details see [this article on Sql Database V12 port usage](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="04f4c-121">In uscita connettività toohello gestione di Azure piano gli endpoint di rete (endpoint sia ASM e ARM).</span><span class="sxs-lookup"><span data-stu-id="04f4c-121">Outbound network connectivity toohello Azure management plane endpoints (both ASM and ARM endpoints).</span></span>  <span data-ttu-id="04f4c-122">Ciò include la connettività in uscita tooboth *management.core.windows.net* e *management.azure.com*.</span><span class="sxs-lookup"><span data-stu-id="04f4c-122">This includes outbound connectivity tooboth *management.core.windows.net* and *management.azure.com*.</span></span> 
* <span data-ttu-id="04f4c-123">In uscita connettività di rete troppo*ocsp.msocsp.com*, *mscrl.microsoft.com* e *crl.microsoft.com*.  Si tratta di funzionalità SSL toosupport necessari.</span><span class="sxs-lookup"><span data-stu-id="04f4c-123">Outbound network connectivity too*ocsp.msocsp.com*, *mscrl.microsoft.com* and *crl.microsoft.com*.  This is needed toosupport SSL functionality.</span></span>
* <span data-ttu-id="04f4c-124">configurazione del DNS per la rete virtuale hello Hello deve essere in grado di risolvere tutti gli endpoint hello e domini indicati hello punti precedenti.</span><span class="sxs-lookup"><span data-stu-id="04f4c-124">hello DNS configuration for hello virtual network must be capable of resolving all of hello endpoints and domains mentioned in hello earlier points.</span></span>  <span data-ttu-id="04f4c-125">Se questi endpoint non possono essere risolti, il tentativo di creazione dell’ambiente del servizio App avrà esito negativo, e gli ambienti del servizio App esistenti verranno contrassegnati come non integri.</span><span class="sxs-lookup"><span data-stu-id="04f4c-125">If these endpoints cannot be resolved, App Service Environment creation attempts will fail, and existing App Service Environments will be marked as unhealthy.</span></span>
* <span data-ttu-id="04f4c-126">L'accesso in uscita sulla porta 53 è necessario per la comunicazione con i server DNS.</span><span class="sxs-lookup"><span data-stu-id="04f4c-126">Outbound access on port 53 is required for communication with DNS servers.</span></span>
* <span data-ttu-id="04f4c-127">Se esiste un server DNS personalizzato su hello altra entità finale di un gateway VPN, server DNS hello deve essere raggiungibile dalla subnet hello contenente hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="04f4c-127">If a custom DNS server exists on hello other end of a VPN gateway, hello DNS server must be reachable from hello subnet containing hello App Service Environment.</span></span> 
* <span data-ttu-id="04f4c-128">percorso di rete in uscita Hello non è possibile attraversare proxy aziendale interno, né può essere force tunneled tooon locale.</span><span class="sxs-lookup"><span data-stu-id="04f4c-128">hello outbound network path cannot travel through internal corporate proxies, nor can it be force tunneled tooon-premises.</span></span>  <span data-ttu-id="04f4c-129">In tal modo le modifiche hello indirizzo NAT effettiva del traffico di rete in uscita da hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="04f4c-129">Doing so changes hello effective NAT address of outbound network traffic from hello App Service Environment.</span></span>  <span data-ttu-id="04f4c-130">Modifica dell'indirizzo NAT hello di traffico di rete in uscita dell'ambiente del servizio App causerà connettività toomany errori di endpoint hello elencate in precedenza.</span><span class="sxs-lookup"><span data-stu-id="04f4c-130">Changing hello NAT address of an App Service Environment's outbound network traffic will cause connectivity failures toomany of hello endpoints listed above.</span></span>  <span data-ttu-id="04f4c-131">Ciò comporta dei tentativi non riusciti nella creazione dell’ambiente di servizio app, così come il fatto che ambienti di servizio app che prima erano integri vengano contrassegnati come non integri.</span><span class="sxs-lookup"><span data-stu-id="04f4c-131">This results in failed App Service Environment creation attempts, as well as previously healthy App Service Environments being marked as unhealthy.</span></span>  
* <span data-ttu-id="04f4c-132">Porte di toorequired accesso di rete in ingresso per gli ambienti del servizio App devono essere consentiti come descritto in questo [articolo][requiredports].</span><span class="sxs-lookup"><span data-stu-id="04f4c-132">Inbound network access toorequired ports for App Service Environments must be allowed as described in this [article][requiredports].</span></span>

<span data-ttu-id="04f4c-133">i requisiti DNS Hello possono essere soddisfatto garantendo un'infrastruttura DNS valida viene configurata e gestita per la rete virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="04f4c-133">hello DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for hello virtual network.</span></span>  <span data-ttu-id="04f4c-134">Se per qualsiasi hello motivo la configurazione del DNS viene modificata dopo aver creato un ambiente del servizio App, gli sviluppatori possono forzare toopick un ambiente del servizio App hello configurazione del nuovo DNS.</span><span class="sxs-lookup"><span data-stu-id="04f4c-134">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="04f4c-135">Attivazione di un riavvio di ambiente in sequenza utilizzando hello icona "Riavvia" si trova nella parte superiore di hello del pannello Gestione di ambiente del servizio App hello in hello [portale di Azure] [ NewPortal] causerà hello ambiente toopick la nuova configurazione DNS di hello.</span><span class="sxs-lookup"><span data-stu-id="04f4c-135">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="04f4c-136">Hello i requisiti di accesso di rete in ingresso possono essere soddisfatto mediante la configurazione di un [il gruppo di sicurezza di rete] [ NetworkSecurityGroups] dell'ambiente del servizio App di hello subnet tooallow hello richiesto l'accesso come descritto in questo [articolo][requiredports].</span><span class="sxs-lookup"><span data-stu-id="04f4c-136">hello inbound network access requirements can be met by configuring a [network security group][NetworkSecurityGroups] on hello App Service Environment's subnet tooallow hello required access as described in this [article][requiredports].</span></span>

## <a name="enabling-outbound-network-connectivity-for-an-app-service-environment"></a><span data-ttu-id="04f4c-137">Abilitazione della connettività di rete in uscita per un ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="04f4c-137">Enabling Outbound Network Connectivity for an App Service Environment</span></span>
<span data-ttu-id="04f4c-138">Per impostazione predefinita, un circuito ExpressRoute appena creato annuncia una route predefinita che consente la connettività Internet in uscita.</span><span class="sxs-lookup"><span data-stu-id="04f4c-138">By default, a newly created ExpressRoute circuit advertises a default route that allows outbound Internet connectivity.</span></span>  <span data-ttu-id="04f4c-139">Con questa configurazione di un ambiente del servizio App sarà in grado di tooconnect tooother endpoint di Azure.</span><span class="sxs-lookup"><span data-stu-id="04f4c-139">With this configuration an App Service Environment will be able tooconnect tooother Azure endpoints.</span></span>

<span data-ttu-id="04f4c-140">Tuttavia una configurazione personalizzata comune è toodefine i propri route predefinita (0.0.0.0/0) impone in uscita Internet tooinstead il flusso del traffico locale.</span><span class="sxs-lookup"><span data-stu-id="04f4c-140">However a common customer configuration is toodefine their own default route (0.0.0.0/0) which forces outbound Internet traffic tooinstead flow on-premises.</span></span>  <span data-ttu-id="04f4c-141">Questo flusso di traffico interrompe sempre gli ambienti del servizio App perché il traffico in uscita hello è bloccato in locale o NAT certificati tooan Impossibile riconoscere gli indirizzi che non funzionano con vari endpoint di Azure.</span><span class="sxs-lookup"><span data-stu-id="04f4c-141">This traffic flow invariably breaks App Service Environments because hello outbound traffic is either blocked on-premises, or NAT'd tooan unrecognizable set of addresses that no longer work with various Azure endpoints.</span></span>

<span data-ttu-id="04f4c-142">soluzione hello è toodefine (più) il route definite dall'utente (UDRs) nella subnet hello contenente hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="04f4c-142">hello solution is toodefine one (or more) user defined routes (UDRs) on hello subnet that contains hello App Service Environment.</span></span>  <span data-ttu-id="04f4c-143">Un UDR definisce le route di subnet specifiche che verranno utilizzato il valore anziché route predefinita hello.</span><span class="sxs-lookup"><span data-stu-id="04f4c-143">A UDR defines subnet-specific routes that will be honored instead of hello default route.</span></span>

<span data-ttu-id="04f4c-144">Se possibile, è consigliabile hello toouse seguente configurazione:</span><span class="sxs-lookup"><span data-stu-id="04f4c-144">If possible, it is recommended toouse hello following configuration:</span></span>

* <span data-ttu-id="04f4c-145">configurazione di ExpressRoute Hello annuncia 0.0.0.0/0 e per impostazione predefinita force tunnel tutto il traffico in uscita in locale.</span><span class="sxs-lookup"><span data-stu-id="04f4c-145">hello ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="04f4c-146">Hello UDR applicato toohello subnet contenente hello ambiente del servizio App definisce 0.0.0.0/0 con un tipo di hop successivo di Internet (un esempio di questo oggetto è più basso in questo articolo).</span><span class="sxs-lookup"><span data-stu-id="04f4c-146">hello UDR applied toohello subnet containing hello App Service Environment defines 0.0.0.0/0 with a next hop type of Internet (an example of this is farther down in this article).</span></span>

<span data-ttu-id="04f4c-147">Hello effetto combinato di questi passaggi è che il livello di subnet hello UDR avrà la precedenza su hello garantendo l'accesso a Internet in uscita da hello ambiente del servizio App, tunneling forzato ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="04f4c-147">hello combined effect of these steps is that hello subnet level UDR will take precedence over hello ExpressRoute forced tunneling, thus ensuring outbound Internet access from hello App Service Environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="04f4c-148">Hello route definite in un UDR **deve** essere sufficientemente specifica troppo hanno la precedenza su tutte le route annunciate da hello configurazione ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="04f4c-148">hello routes defined in a UDR **must** be specific enough too take precedence over any routes advertised by hello ExpressRoute configuration.</span></span>  <span data-ttu-id="04f4c-149">esempio Hello seguente utilizza l'intervallo di indirizzi 0.0.0.0/0 ampie hello e di conseguenza possa accidentalmente sottoposto a override dagli annunci della route utilizzando più specifici intervalli di indirizzi.</span><span class="sxs-lookup"><span data-stu-id="04f4c-149">hello example below uses hello broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>
> 
> <span data-ttu-id="04f4c-150">Gli ambienti del servizio App non sono supportati con le configurazioni di ExpressRoute che **cross-annunciare le route da hello peering percorso toohello privata percorso di peering pubblico**.</span><span class="sxs-lookup"><span data-stu-id="04f4c-150">App Service Environments are not supported with ExpressRoute configurations that **cross-advertise routes from hello public peering path toohello private peering path**.</span></span>  <span data-ttu-id="04f4c-151">Le configurazioni di ExpressRoute che dispongono di peering pubblico configurato, riceveranno gli annunci di route da Microsoft per un elevato numero di intervalli di indirizzi IP di Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="04f4c-151">ExpressRoute configurations that have public peering configured, will receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span>  <span data-ttu-id="04f4c-152">Se questi intervalli di indirizzi tra annunciati nel percorso di peering privato hello, risultato finale hello è che tutti i pacchetti di rete in uscita dalla subnet dell'hello ambiente del servizio App infrastruttura di rete locale del cliente tooa il tunneling forzato.</span><span class="sxs-lookup"><span data-stu-id="04f4c-152">If these address ranges are cross-advertised on hello private peering path, hello end result is that all outbound network packets from hello App Service Environment's subnet will be force-tunneled tooa customer's on-premises network infrastructure.</span></span>  <span data-ttu-id="04f4c-153">Questo flusso di rete non è attualmente supportato con ambienti del servizio app.</span><span class="sxs-lookup"><span data-stu-id="04f4c-153">This network flow is currently not supported with App Service Environments.</span></span>  <span data-ttu-id="04f4c-154">Un problema di toothis soluzione è toostop le route tra annunci hello peering percorso toohello privata percorso di peering pubblico.</span><span class="sxs-lookup"><span data-stu-id="04f4c-154">One solution toothis problem is toostop cross-advertising routes from hello public peering path toohello private peering path.</span></span>
> 
> 

<span data-ttu-id="04f4c-155">Le informazioni generali sulle route definite dall'utente sono disponibili in questa [panoramica][UDROverview].</span><span class="sxs-lookup"><span data-stu-id="04f4c-155">Background information on user defined routes is available in this [overview][UDROverview].</span></span>  

<span data-ttu-id="04f4c-156">Dettagli sulla creazione e configurazione delle route definite dall'utente è disponibile in questa [come tooGuide][UDRHowTo].</span><span class="sxs-lookup"><span data-stu-id="04f4c-156">Details on creating and configuring user defined routes is available in this [How tooGuide][UDRHowTo].</span></span>

## <a name="example-udr-configuration-for-an-app-service-environment"></a><span data-ttu-id="04f4c-157">Esempio di configurazione UDR per un ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="04f4c-157">Example UDR Configuration for an App Service Environment</span></span>
<span data-ttu-id="04f4c-158">**Prerequisiti**</span><span class="sxs-lookup"><span data-stu-id="04f4c-158">**Pre-requisites**</span></span>

1. <span data-ttu-id="04f4c-159">Installare Azure Powershell da hello [pagina di download di Azure] [ AzureDownloads] (datato giugno 2015 o versione successiva).</span><span class="sxs-lookup"><span data-stu-id="04f4c-159">Install Azure Powershell from hello [Azure Downloads page][AzureDownloads] (dated June 2015 or later).</span></span>  <span data-ttu-id="04f4c-160">In "Strumenti da riga di comando" è un collegamento "Installa" in "Windows Powershell" che consentirà di installare i cmdlet di Powershell più recenti hello.</span><span class="sxs-lookup"><span data-stu-id="04f4c-160">Under "Command-line tools" there is an "Install" link under "Windows Powershell" that will install hello latest Powershell cmdlets.</span></span>
2. <span data-ttu-id="04f4c-161">È consigliabile creare una subnet univoca da usare esclusivamente in un ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="04f4c-161">It is recommended that a unique subnet is created for exclusive use by an App Service Environment.</span></span>  <span data-ttu-id="04f4c-162">In questo modo hello UDRs applicato toohello subnet verrà aperta solo il traffico in uscita per hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="04f4c-162">This ensures that hello UDRs applied toohello subnet will only open outbound traffic for hello App Service Environment.</span></span>
3. <span data-ttu-id="04f4c-163">**Importante**: non distribuire hello ambiente del servizio App finché **dopo** hello seguendo i passaggi di configurazione viene seguito.</span><span class="sxs-lookup"><span data-stu-id="04f4c-163">**Important**:  do not deploy hello App Service Environment until **after** hello following configuration steps are followed.</span></span>  <span data-ttu-id="04f4c-164">Ciò garantisce che la connettività di rete in uscita sia disponibile prima di tentare di toodeploy un ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="04f4c-164">This ensures that outbound network connectivity is available before attempting toodeploy an App Service Environment.</span></span>

<span data-ttu-id="04f4c-165">**Passaggio 1: Creare una tabella di route denominata**</span><span class="sxs-lookup"><span data-stu-id="04f4c-165">**Step 1:  Create a named route table**</span></span>

<span data-ttu-id="04f4c-166">Hello frammento di codice seguente crea una tabella di route denominata "DirectInternetRouteTable" regione occidentale ci Azure hello:</span><span class="sxs-lookup"><span data-stu-id="04f4c-166">hello following snippet creates a route table called "DirectInternetRouteTable" in hello West US Azure region:</span></span>

    New-AzureRouteTable -Name 'DirectInternetRouteTable' -Location uswest

<span data-ttu-id="04f4c-167">**Passaggio 2: Creare una o più route nella tabella di route hello**</span><span class="sxs-lookup"><span data-stu-id="04f4c-167">**Step 2:  Create one or more routes in hello route table**</span></span>

<span data-ttu-id="04f4c-168">Sarà necessario tooadd uno o più route toohello RouteTable in ordine tooenable in uscita l'accesso a Internet.</span><span class="sxs-lookup"><span data-stu-id="04f4c-168">You will need tooadd one or more routes toohello route table in order tooenable outbound Internet access.</span></span>  

<span data-ttu-id="04f4c-169">Hello consigliabile approccio per la configurazione dell'accesso in uscita toohello che Internet è toodefine una route per 0.0.0.0/0 come mostrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="04f4c-169">hello recommended approach for configuring outbound access toohello Internet is toodefine a route for 0.0.0.0/0 as shown below.</span></span>

    Get-AzureRouteTable -Name 'DirectInternetRouteTable' | Set-AzureRoute -RouteName 'Direct Internet Range 0' -AddressPrefix 0.0.0.0/0 -NextHopType Internet

<span data-ttu-id="04f4c-170">Ricordare che 0.0.0.0/0 è un intervallo di indirizzi generali e di conseguenza verrà sostituito dal più specifici intervalli di indirizzi annunciati da hello ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="04f4c-170">Remember that 0.0.0.0/0 is a broad address range, and as such will be overridden by more specific address ranges advertised by hello ExpressRoute.</span></span>  <span data-ttu-id="04f4c-171">toore-eseguire l'iterazione hello consigliato in precedenza, un UDR con una route 0.0.0.0/0 deve essere utilizzato in combinazione con una configurazione ExressRoute che ne annuncia solo nonché 0.0.0.0/0.</span><span class="sxs-lookup"><span data-stu-id="04f4c-171">toore-iterate hello earlier recommendation, a UDR with a 0.0.0.0/0 route should be used in conjunction with an ExressRoute configuration that only advertises 0.0.0.0/0 as well.</span></span> 

<span data-ttu-id="04f4c-172">In alternativa, è possibile scaricare un elenco completo e aggiornato di intervalli CIDR utilizzato da Azure.</span><span class="sxs-lookup"><span data-stu-id="04f4c-172">As an alternative, you can download a comprehensive and updated list of CIDR ranges in use by Azure.</span></span>  <span data-ttu-id="04f4c-173">Hello file Xml contenente tutti gli intervalli di indirizzi IP Azure hello è disponibile da hello [Microsoft Download Center][DownloadCenterAddressRanges].</span><span class="sxs-lookup"><span data-stu-id="04f4c-173">hello Xml file containing all of hello Azure IP address ranges is available from hello [Microsoft Download Center][DownloadCenterAddressRanges].</span></span>  

<span data-ttu-id="04f4c-174">Si noti tuttavia che questi intervalli cambiano nel tempo, è necessario eseguire aggiornamenti manuali periodica toohello definito dall'utente tookeep route sincronizzati.  Inoltre, poiché non esiste valore predefinito è superiore toofit entro il limite di route hello 100 intervalli di limite di 100 route in un singolo UDR, è necessario troppo "riepiloga" indirizzo IP di Azure hello, tenendo presente che UDR route definite necessario toobe più specifiche rispetto alle route hello annunciate dal ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="04f4c-174">Note though that these ranges change over time, thus necessitating periodic manual updates toohello user defined routes tookeep in sync.  Also, since there is a default upper limit of 100 routes in a single UDR, you will need too"summarize" hello Azure IP address ranges toofit within hello 100 route limit, keeping in mind that UDR defined routes need toobe more specific than hello routes advertised by your ExpressRoute.</span></span>  

<span data-ttu-id="04f4c-175">**Passaggio 3: Associare hello route tabella toohello subnet contenente hello ambiente del servizio App**</span><span class="sxs-lookup"><span data-stu-id="04f4c-175">**Step 3:  Associate hello route table toohello subnet containing hello App Service Environment**</span></span>

<span data-ttu-id="04f4c-176">ultimo passaggio di configurazione Hello è la subnet toohello tooassociate hello route nella tabella in cui verrà distribuito hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="04f4c-176">hello last  configuration step is tooassociate hello route table toohello subnet where hello App Service Environment will be deployed.</span></span>  <span data-ttu-id="04f4c-177">Hello comando che segue associa toohello "DirectInternetRouteTable" hello "ASESubnet" che alla fine conterrà un ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="04f4c-177">hello following command associates hello "DirectInternetRouteTable" toohello "ASESubnet" that will eventually contain an App Service Environment.</span></span>

    Set-AzureSubnetRouteTable -VirtualNetworkName 'YourVirtualNetworkNameHere' -SubnetName 'ASESubnet' -RouteTableName 'DirectInternetRouteTable'


<span data-ttu-id="04f4c-178">**Passaggio 4: Procedura finale**</span><span class="sxs-lookup"><span data-stu-id="04f4c-178">**Step 4:  Final Steps**</span></span>

<span data-ttu-id="04f4c-179">Una volta la tabella di route hello subnet toohello associato, è consigliabile toofirst test e lo conferma hello destinato effetto.</span><span class="sxs-lookup"><span data-stu-id="04f4c-179">Once hello route table is bound toohello subnet, it is recommended toofirst test and confirm hello intended effect.</span></span>  <span data-ttu-id="04f4c-180">Ad esempio, distribuire una macchina virtuale nella subnet hello e verificare che:</span><span class="sxs-lookup"><span data-stu-id="04f4c-180">For example, deploy a virtual machine into hello subnet and confirm that:</span></span>

* <span data-ttu-id="04f4c-181">Il traffico in uscita tooboth Azure e gli endpoint di Azure non indicato in precedenza in questo articolo è **non** flusso verso il basso hello circuito ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="04f4c-181">Outbound traffic tooboth Azure and non-Azure endpoints mentioned earlier in this article is **not** flowing down hello ExpressRoute circuit.</span></span>  <span data-ttu-id="04f4c-182">È molto importante tooverify questo comportamento, in quanto se il traffico in uscita dalla subnet hello è ancora viene forzato il tunneling in locale, la creazione dell'ambiente del servizio App verrà sempre esito negativo.</span><span class="sxs-lookup"><span data-stu-id="04f4c-182">It is very important tooverify this behavior, since if outbound traffic from hello subnet is still being forced tunneled on-premises, App Service Environment creation will always fail.</span></span> 
* <span data-ttu-id="04f4c-183">Le ricerche DNS per gli endpoint hello citato in precedenza sono tutti risolvere correttamente.</span><span class="sxs-lookup"><span data-stu-id="04f4c-183">DNS lookups for hello endpoints mentioned earlier are all resolving properly.</span></span> 

<span data-ttu-id="04f4c-184">Quando vengono confermate hello sopra passaggi, sarà necessario macchina virtuale di hello toodelete perché subnet hello deve toobe "vuoto" in hello ora hello che viene creato l'ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="04f4c-184">Once hello above steps are confirmed, you will need toodelete hello virtual machine because hello subnet needs toobe "empty" at hello time hello App Service Environment is created.</span></span>

<span data-ttu-id="04f4c-185">Procedere quindi con la creazione di un ambiente di servizio app.</span><span class="sxs-lookup"><span data-stu-id="04f4c-185">Then proceed with creating an App Service Environment!</span></span>

## <a name="getting-started"></a><span data-ttu-id="04f4c-186">introduttiva</span><span class="sxs-lookup"><span data-stu-id="04f4c-186">Getting started</span></span>
<span data-ttu-id="04f4c-187">Tutti gli articoli e in che modo-per per gli ambienti del servizio App sono disponibili in hello [file Leggimi per gli ambienti del servizio dell'applicazione](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="04f4c-187">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="04f4c-188">tooget avviato con gli ambienti del servizio App, vedere [tooApp introduzione dell'ambiente del servizio][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="04f4c-188">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="04f4c-189">Per ulteriori informazioni sulla piattaforma Azure App Service hello, vedere [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="04f4c-189">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[ExpressRoute]: http://azure.microsoft.com/services/expressroute/
[requiredports]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[NetworkSecurityGroups]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[UDROverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-overview/
[UDRHowTo]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-how-to/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[AzureDownloads]: http://azure.microsoft.com/en-us/downloads/ 
[DownloadCenterAddressRanges]: http://www.microsoft.com/download/details.aspx?id=41653  
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[NewPortal]:  https://portal.azure.com


<!-- IMAGES -->
