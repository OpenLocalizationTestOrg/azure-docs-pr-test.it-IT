---
title: Automazione di Azure processo dati tooOMS Analitica Log aaaForward | Documenti Microsoft
description: In questo articolo viene illustrato come processo runbook e di stato del processo toosend flussi tooMicrosoft Operations Management Suite Log Analitica toodeliver approfondire le conoscenze e gestione.
services: automation
documentationcenter: 
author: MGoedtel
manager: carmonm
editor: tysonn
ms.assetid: c12724c6-01a9-4b55-80ae-d8b7b99bd436
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/02/2017
ms.author: magoedte
ms.openlocfilehash: e78b6c6677d6502711ce828e2d32b7a91922ae26
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="forward-job-status-and-job-streams-from-automation-toolog-analytics-oms"></a><span data-ttu-id="2fabd-103">Inoltra lo stato del processo e i flussi di lavoro da automazione tooLog Analitica (OMS)</span><span class="sxs-lookup"><span data-stu-id="2fabd-103">Forward job status and job streams from Automation tooLog Analytics (OMS)</span></span>
<span data-ttu-id="2fabd-104">Automazione può inviare runbook processo lo stato e processo flussi tooyour Analitica di Log di Microsoft Operations Management Suite (OMS) dell'area di lavoro.</span><span class="sxs-lookup"><span data-stu-id="2fabd-104">Automation can send runbook job status and job streams tooyour Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="2fabd-105">Processo di log e flussi di lavoro sono visibili nel portale di Azure hello o con PowerShell, per i singoli processi e ciò consentono tooperform semplice indagini.</span><span class="sxs-lookup"><span data-stu-id="2fabd-105">Job logs and job streams are visible in hello Azure portal, or with PowerShell, for individual jobs and this allows you tooperform simple investigations.</span></span> <span data-ttu-id="2fabd-106">Con Log Analytics è ora possibile:</span><span class="sxs-lookup"><span data-stu-id="2fabd-106">Now with Log Analytics you can:</span></span>

* <span data-ttu-id="2fabd-107">Ottenere informazioni dettagliate sui processi di Automazione.</span><span class="sxs-lookup"><span data-stu-id="2fabd-107">Get insight on your Automation jobs</span></span>
* <span data-ttu-id="2fabd-108">Attivare un messaggio e-mail o un avviso in base allo stato del processo del runbook, ad esempio non riuscito o sospeso.</span><span class="sxs-lookup"><span data-stu-id="2fabd-108">Trigger an email or alert based on your runbook job status (for example, failed or suspended)</span></span>
* <span data-ttu-id="2fabd-109">Scrivere query avanzate nei flussi del processo.</span><span class="sxs-lookup"><span data-stu-id="2fabd-109">Write advanced queries across your job streams</span></span>
* <span data-ttu-id="2fabd-110">Correlare i processi tra account di Automazione.</span><span class="sxs-lookup"><span data-stu-id="2fabd-110">Correlate jobs across Automation accounts</span></span>
* <span data-ttu-id="2fabd-111">Visualizzare la cronologia dei processi nel tempo.</span><span class="sxs-lookup"><span data-stu-id="2fabd-111">Visualize your job history over time</span></span>     

## <a name="prerequisites-and-deployment-considerations"></a><span data-ttu-id="2fabd-112">Prerequisiti e considerazioni sulla distribuzione</span><span class="sxs-lookup"><span data-stu-id="2fabd-112">Prerequisites and deployment considerations</span></span>
<span data-ttu-id="2fabd-113">l'invio dell'automazione toostart registra tooLog Analitica, è necessario:</span><span class="sxs-lookup"><span data-stu-id="2fabd-113">toostart sending your Automation logs tooLog Analytics, you need:</span></span>

1. <span data-ttu-id="2fabd-114">Hello novembre 2016 o versione successiva versione di [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span><span class="sxs-lookup"><span data-stu-id="2fabd-114">hello November 2016 or later release of [Azure PowerShell](https://docs.microsoft.com/powershell/azureps-cmdlets-docs/) (v2.3.0).</span></span>
2. <span data-ttu-id="2fabd-115">Un'area di lavoro di Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="2fabd-115">A Log Analytics workspace.</span></span> <span data-ttu-id="2fabd-116">Per altre informazioni, vedere [Introduzione a Log Analytics](../log-analytics/log-analytics-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="2fabd-116">For more information, see [Get started with Log Analytics](../log-analytics/log-analytics-get-started.md).</span></span> 
3. <span data-ttu-id="2fabd-117">Hello ResourceId per l'account di automazione di Azure</span><span class="sxs-lookup"><span data-stu-id="2fabd-117">hello ResourceId for your Azure Automation account</span></span>

<span data-ttu-id="2fabd-118">toofind hello ResourceId per l'account di automazione di Azure e i Log Analitica dell'area di lavoro, eseguire hello PowerShell seguente:</span><span class="sxs-lookup"><span data-stu-id="2fabd-118">toofind hello ResourceId for your Azure Automation account and Log Analytics workspace, run hello following PowerShell:</span></span>

```powershell
# Find hello ResourceId for hello Automation Account
Find-AzureRmResource -ResourceType "Microsoft.Automation/automationAccounts"

# Find hello ResourceId for hello Log Analytics workspace
Find-AzureRmResource -ResourceType "Microsoft.OperationalInsights/workspaces"
```

<span data-ttu-id="2fabd-119">Se si hanno più account di automazione o aree di lavoro, nell'output di hello di hello precedenti comandi, trovare hello *nome* tooconfigure necessari e copiare il valore di hello per *ResourceId*.</span><span class="sxs-lookup"><span data-stu-id="2fabd-119">If you have multiple Automation accounts, or workspaces, in hello output of hello preceding commands, find hello *Name* you need tooconfigure and copy hello value for *ResourceId*.</span></span>

<span data-ttu-id="2fabd-120">Se è necessario hello toofind *nome* dell'account di automazione in hello portale di Azure selezionare l'account di automazione da hello **account di automazione** pannello e selezionare **tutte le impostazioni**.</span><span class="sxs-lookup"><span data-stu-id="2fabd-120">If you need toofind hello *Name* of your Automation account, in hello Azure portal select your Automation account from hello **Automation account** blade and select **All settings**.</span></span>  <span data-ttu-id="2fabd-121">Da hello **tutte le impostazioni** pannello, in **impostazioni Account** selezionare **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="2fabd-121">From hello **All settings** blade, under **Account Settings** select **Properties**.</span></span>  <span data-ttu-id="2fabd-122">In hello **proprietà** pannello, è possibile annotare questi valori.</span><span class="sxs-lookup"><span data-stu-id="2fabd-122">In hello **Properties** blade, you can note these values.</span></span><br> <span data-ttu-id="2fabd-123">![Proprietà dell'account di Automazione](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span><span class="sxs-lookup"><span data-stu-id="2fabd-123">![Automation Account properties](media/automation-manage-send-joblogs-log-analytics/automation-account-properties.png).</span></span>

## <a name="set-up-integration-with-log-analytics"></a><span data-ttu-id="2fabd-124">Configurare l'integrazione con Log Analytics</span><span class="sxs-lookup"><span data-stu-id="2fabd-124">Set up integration with Log Analytics</span></span>
1. <span data-ttu-id="2fabd-125">Nel computer, avviare **Windows PowerShell** da hello **avviare** dello schermo.</span><span class="sxs-lookup"><span data-stu-id="2fabd-125">On your computer, start **Windows PowerShell** from hello **Start** screen.</span></span>  
2. <span data-ttu-id="2fabd-126">Copiare e incollare hello PowerShell seguenti, quindi modificare il valore di hello hello `$workspaceId` e `$automationAccountId`.</span><span class="sxs-lookup"><span data-stu-id="2fabd-126">Copy and paste hello following PowerShell, and edit hello value for hello `$workspaceId` and `$automationAccountId`.</span></span>  <span data-ttu-id="2fabd-127">Per hello `-Environment` parametro, i valori validi sono *cloud* o *AzureUSGovernment* a seconda di ambiente cloud hello ci si trova in.</span><span class="sxs-lookup"><span data-stu-id="2fabd-127">For hello `-Environment` parameter, valid values are *AzureCloud* or *AzureUSGovernment* depending on hello cloud environment you are working in.</span></span>     

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }

# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Set-AzureRmDiagnosticSetting -ResourceId $automationAccountId -WorkspaceId $workspaceId -Enabled $true

```

<span data-ttu-id="2fabd-128">Dopo aver eseguito questo script, i record in Log Analytics verranno visualizzati entro 10 minuti dalla scrittura di nuovi log o flussi di processo.</span><span class="sxs-lookup"><span data-stu-id="2fabd-128">After running this script, you will see records in Log Analytics within 10 minutes of new JobLogs or JobStreams being written.</span></span>

<span data-ttu-id="2fabd-129">log di hello toosee, Esegui hello query della ricerca log Analitica Log seguenti:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="2fabd-129">toosee hello logs, run hello following query in Log Analytics log search: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="verify-configuration"></a><span data-ttu-id="2fabd-130">Verificare la configurazione</span><span class="sxs-lookup"><span data-stu-id="2fabd-130">Verify configuration</span></span>
<span data-ttu-id="2fabd-131">tooconfirm che invia l'account di automazione registri dell'area di lavoro di tooyour Analitica di Log, verificare che la diagnostica siano impostata correttamente sull'account di automazione hello utilizzando hello PowerShell seguente:</span><span class="sxs-lookup"><span data-stu-id="2fabd-131">tooconfirm that your Automation account is sending logs tooyour Log Analytics workspace, check that diagnostics are set correctly on hello Automation account using hello following PowerShell:</span></span>

```powershell
[cmdletBinding()]
    Param
    (
        [Parameter(Mandatory=$True)]
        [ValidateSet("AzureCloud","AzureUSGovernment")]
        [string]$Environment="AzureCloud"
    )

#Check toosee which cloud environment toosign into.
Switch ($Environment)
   {
       "AzureCloud" {Login-AzureRmAccount}
       "AzureUSGovernment" {Login-AzureRmAccount -EnvironmentName AzureUSGovernment} 
   }
# if you have one Log Analytics workspace you can use hello following command tooget hello resource id of hello workspace
$workspaceId = (Get-AzureRmOperationalInsightsWorkspace).ResourceId

$automationAccountId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.AUTOMATION/ACCOUNTS/DEMO" 

Get-AzureRmDiagnosticSetting -ResourceId $automationAccountId
```

<span data-ttu-id="2fabd-132">Nell'output di hello verificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="2fabd-132">In hello output ensure that:</span></span>
+ <span data-ttu-id="2fabd-133">In *registri*, hello valore per *abilitato* è *True*</span><span class="sxs-lookup"><span data-stu-id="2fabd-133">Under *Logs*, hello value for *Enabled* is *True*</span></span>
+ <span data-ttu-id="2fabd-134">valore di Hello *Idareadilavoro* è impostato toohello ResourceId dell'area di lavoro Log Analitica</span><span class="sxs-lookup"><span data-stu-id="2fabd-134">hello value of *WorkspaceId* is set toohello ResourceId of your Log Analytics workspace</span></span>


## <a name="log-analytics-records"></a><span data-ttu-id="2fabd-135">Record di Log Analytics</span><span class="sxs-lookup"><span data-stu-id="2fabd-135">Log Analytics records</span></span>
<span data-ttu-id="2fabd-136">La diagnostica di Automazione di Azure crea due tipi di record in Log Analytics che vengono contrassegnati con il tag **Type=AzureDiagnostics**.</span><span class="sxs-lookup"><span data-stu-id="2fabd-136">Diagnostics from Azure Automation creates two types of records in Log Analytics and are tagged as **Type=AzureDiagnostics**.</span></span>

### <a name="job-logs"></a><span data-ttu-id="2fabd-137">Log del processo</span><span class="sxs-lookup"><span data-stu-id="2fabd-137">Job Logs</span></span>
| <span data-ttu-id="2fabd-138">Proprietà</span><span class="sxs-lookup"><span data-stu-id="2fabd-138">Property</span></span> | <span data-ttu-id="2fabd-139">Descrizione</span><span class="sxs-lookup"><span data-stu-id="2fabd-139">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2fabd-140">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="2fabd-140">TimeGenerated</span></span> |<span data-ttu-id="2fabd-141">Data e ora esecuzione processo del runbook hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-141">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="2fabd-142">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="2fabd-142">RunbookName_s</span></span> |<span data-ttu-id="2fabd-143">nome Hello di hello runbook.</span><span class="sxs-lookup"><span data-stu-id="2fabd-143">hello name of hello runbook.</span></span> |
| <span data-ttu-id="2fabd-144">Caller_s</span><span class="sxs-lookup"><span data-stu-id="2fabd-144">Caller_s</span></span> |<span data-ttu-id="2fabd-145">Che ha iniziato l'operazione di hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-145">Who initiated hello operation.</span></span>  <span data-ttu-id="2fabd-146">I valori possibili sono un indirizzo di posta elettronica o il sistema per i processi pianificati.</span><span class="sxs-lookup"><span data-stu-id="2fabd-146">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="2fabd-147">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="2fabd-147">Tenant_g</span></span> | <span data-ttu-id="2fabd-148">GUID che identifica il tenant di hello per hello chiamante.</span><span class="sxs-lookup"><span data-stu-id="2fabd-148">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="2fabd-149">JobId_g</span><span class="sxs-lookup"><span data-stu-id="2fabd-149">JobId_g</span></span> |<span data-ttu-id="2fabd-150">GUID che rappresenta l'Id di processo del runbook hello hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-150">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="2fabd-151">ResultType</span><span class="sxs-lookup"><span data-stu-id="2fabd-151">ResultType</span></span> |<span data-ttu-id="2fabd-152">stato di Hello del processo del runbook hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-152">hello status of hello runbook job.</span></span>  <span data-ttu-id="2fabd-153">I valori possibili sono:</span><span class="sxs-lookup"><span data-stu-id="2fabd-153">Possible values are:</span></span><br><span data-ttu-id="2fabd-154">- Avviato</span><span class="sxs-lookup"><span data-stu-id="2fabd-154">- Started</span></span><br><span data-ttu-id="2fabd-155">- Interrotto</span><span class="sxs-lookup"><span data-stu-id="2fabd-155">- Stopped</span></span><br><span data-ttu-id="2fabd-156">- Sospeso</span><span class="sxs-lookup"><span data-stu-id="2fabd-156">- Suspended</span></span><br><span data-ttu-id="2fabd-157">- Non riuscito</span><span class="sxs-lookup"><span data-stu-id="2fabd-157">- Failed</span></span><br><span data-ttu-id="2fabd-158">- Completato</span><span class="sxs-lookup"><span data-stu-id="2fabd-158">- Completed</span></span> |
| <span data-ttu-id="2fabd-159">Categoria</span><span class="sxs-lookup"><span data-stu-id="2fabd-159">Category</span></span> | <span data-ttu-id="2fabd-160">Classificazione del tipo di hello dei dati.</span><span class="sxs-lookup"><span data-stu-id="2fabd-160">Classification of hello type of data.</span></span>  <span data-ttu-id="2fabd-161">Per l'automazione, il valore di hello è JobLogs.</span><span class="sxs-lookup"><span data-stu-id="2fabd-161">For Automation, hello value is JobLogs.</span></span> |
| <span data-ttu-id="2fabd-162">OperationName</span><span class="sxs-lookup"><span data-stu-id="2fabd-162">OperationName</span></span> | <span data-ttu-id="2fabd-163">Specifica il tipo di hello di operazione eseguita in Azure.</span><span class="sxs-lookup"><span data-stu-id="2fabd-163">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="2fabd-164">Per l'automazione, il valore di hello è processo.</span><span class="sxs-lookup"><span data-stu-id="2fabd-164">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="2fabd-165">Risorsa</span><span class="sxs-lookup"><span data-stu-id="2fabd-165">Resource</span></span> | <span data-ttu-id="2fabd-166">Nome dell'account di automazione hello</span><span class="sxs-lookup"><span data-stu-id="2fabd-166">Name of hello Automation account</span></span> |
| <span data-ttu-id="2fabd-167">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="2fabd-167">SourceSystem</span></span> | <span data-ttu-id="2fabd-168">Modalità di raccolta dei dati hello Analitica di Log.</span><span class="sxs-lookup"><span data-stu-id="2fabd-168">How Log Analytics collected hello data.</span></span> <span data-ttu-id="2fabd-169">È sempre *Azure* per la diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="2fabd-169">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="2fabd-170">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="2fabd-170">ResultDescription</span></span> |<span data-ttu-id="2fabd-171">Descrive lo stato del risultato processo runbook hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-171">Describes hello runbook job result state.</span></span>  <span data-ttu-id="2fabd-172">I valori possibili sono:</span><span class="sxs-lookup"><span data-stu-id="2fabd-172">Possible values are:</span></span><br><span data-ttu-id="2fabd-173">- Processo avviato</span><span class="sxs-lookup"><span data-stu-id="2fabd-173">- Job is started</span></span><br><span data-ttu-id="2fabd-174">- Processo non riuscito</span><span class="sxs-lookup"><span data-stu-id="2fabd-174">- Job Failed</span></span><br><span data-ttu-id="2fabd-175">- Processo completato</span><span class="sxs-lookup"><span data-stu-id="2fabd-175">- Job Completed</span></span> |
| <span data-ttu-id="2fabd-176">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="2fabd-176">CorrelationId</span></span> |<span data-ttu-id="2fabd-177">GUID che rappresenta l'Id di correlazione di processo del runbook hello hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-177">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="2fabd-178">ResourceId</span><span class="sxs-lookup"><span data-stu-id="2fabd-178">ResourceId</span></span> |<span data-ttu-id="2fabd-179">Specifica l'id di risorsa account di automazione di Azure hello di hello runbook.</span><span class="sxs-lookup"><span data-stu-id="2fabd-179">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="2fabd-180">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="2fabd-180">SubscriptionId</span></span> | <span data-ttu-id="2fabd-181">Hello la sottoscrizione di Azure Id (GUID) per l'account di automazione hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-181">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="2fabd-182">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="2fabd-182">ResourceGroup</span></span> | <span data-ttu-id="2fabd-183">Nome del gruppo di risorse hello per hello account di automazione.</span><span class="sxs-lookup"><span data-stu-id="2fabd-183">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="2fabd-184">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="2fabd-184">ResourceProvider</span></span> | <span data-ttu-id="2fabd-185">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="2fabd-185">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="2fabd-186">ResourceType</span><span class="sxs-lookup"><span data-stu-id="2fabd-186">ResourceType</span></span> | <span data-ttu-id="2fabd-187">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="2fabd-187">AUTOMATIONACCOUNTS</span></span> |


### <a name="job-streams"></a><span data-ttu-id="2fabd-188">Flussi del processo</span><span class="sxs-lookup"><span data-stu-id="2fabd-188">Job Streams</span></span>
| <span data-ttu-id="2fabd-189">Proprietà</span><span class="sxs-lookup"><span data-stu-id="2fabd-189">Property</span></span> | <span data-ttu-id="2fabd-190">Descrizione</span><span class="sxs-lookup"><span data-stu-id="2fabd-190">Description</span></span> |
| --- | --- |
| <span data-ttu-id="2fabd-191">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="2fabd-191">TimeGenerated</span></span> |<span data-ttu-id="2fabd-192">Data e ora esecuzione processo del runbook hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-192">Date and time when hello runbook job executed.</span></span> |
| <span data-ttu-id="2fabd-193">RunbookName_s</span><span class="sxs-lookup"><span data-stu-id="2fabd-193">RunbookName_s</span></span> |<span data-ttu-id="2fabd-194">nome Hello di hello runbook.</span><span class="sxs-lookup"><span data-stu-id="2fabd-194">hello name of hello runbook.</span></span> |
| <span data-ttu-id="2fabd-195">Caller_s</span><span class="sxs-lookup"><span data-stu-id="2fabd-195">Caller_s</span></span> |<span data-ttu-id="2fabd-196">Che ha iniziato l'operazione di hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-196">Who initiated hello operation.</span></span>  <span data-ttu-id="2fabd-197">I valori possibili sono un indirizzo di posta elettronica o il sistema per i processi pianificati.</span><span class="sxs-lookup"><span data-stu-id="2fabd-197">Possible values are either an email address or system for scheduled jobs.</span></span> |
| <span data-ttu-id="2fabd-198">StreamType_s</span><span class="sxs-lookup"><span data-stu-id="2fabd-198">StreamType_s</span></span> |<span data-ttu-id="2fabd-199">tipo di Hello del flusso di processo.</span><span class="sxs-lookup"><span data-stu-id="2fabd-199">hello type of job stream.</span></span> <span data-ttu-id="2fabd-200">I valori possibili sono:</span><span class="sxs-lookup"><span data-stu-id="2fabd-200">Possible values are:</span></span><br><span data-ttu-id="2fabd-201">- Avanzamento</span><span class="sxs-lookup"><span data-stu-id="2fabd-201">-Progress</span></span><br><span data-ttu-id="2fabd-202">- Output</span><span class="sxs-lookup"><span data-stu-id="2fabd-202">- Output</span></span><br><span data-ttu-id="2fabd-203">- Avviso</span><span class="sxs-lookup"><span data-stu-id="2fabd-203">- Warning</span></span><br><span data-ttu-id="2fabd-204">- Errore</span><span class="sxs-lookup"><span data-stu-id="2fabd-204">- Error</span></span><br><span data-ttu-id="2fabd-205">- Debug</span><span class="sxs-lookup"><span data-stu-id="2fabd-205">- Debug</span></span><br><span data-ttu-id="2fabd-206">- Dettagliato</span><span class="sxs-lookup"><span data-stu-id="2fabd-206">- Verbose</span></span> |
| <span data-ttu-id="2fabd-207">Tenant_g</span><span class="sxs-lookup"><span data-stu-id="2fabd-207">Tenant_g</span></span> | <span data-ttu-id="2fabd-208">GUID che identifica il tenant di hello per hello chiamante.</span><span class="sxs-lookup"><span data-stu-id="2fabd-208">GUID that identifies hello tenant for hello Caller.</span></span> |
| <span data-ttu-id="2fabd-209">JobId_g</span><span class="sxs-lookup"><span data-stu-id="2fabd-209">JobId_g</span></span> |<span data-ttu-id="2fabd-210">GUID che rappresenta l'Id di processo del runbook hello hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-210">GUID that is hello Id of hello runbook job.</span></span> |
| <span data-ttu-id="2fabd-211">ResultType</span><span class="sxs-lookup"><span data-stu-id="2fabd-211">ResultType</span></span> |<span data-ttu-id="2fabd-212">stato di Hello del processo del runbook hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-212">hello status of hello runbook job.</span></span>  <span data-ttu-id="2fabd-213">I valori possibili sono:</span><span class="sxs-lookup"><span data-stu-id="2fabd-213">Possible values are:</span></span><br><span data-ttu-id="2fabd-214">- In corso</span><span class="sxs-lookup"><span data-stu-id="2fabd-214">- In Progress</span></span> |
| <span data-ttu-id="2fabd-215">Categoria</span><span class="sxs-lookup"><span data-stu-id="2fabd-215">Category</span></span> | <span data-ttu-id="2fabd-216">Classificazione del tipo di hello dei dati.</span><span class="sxs-lookup"><span data-stu-id="2fabd-216">Classification of hello type of data.</span></span>  <span data-ttu-id="2fabd-217">Per l'automazione, il valore di hello è JobStreams.</span><span class="sxs-lookup"><span data-stu-id="2fabd-217">For Automation, hello value is JobStreams.</span></span> |
| <span data-ttu-id="2fabd-218">OperationName</span><span class="sxs-lookup"><span data-stu-id="2fabd-218">OperationName</span></span> | <span data-ttu-id="2fabd-219">Specifica il tipo di hello di operazione eseguita in Azure.</span><span class="sxs-lookup"><span data-stu-id="2fabd-219">Specifies hello type of operation performed in Azure.</span></span>  <span data-ttu-id="2fabd-220">Per l'automazione, il valore di hello è processo.</span><span class="sxs-lookup"><span data-stu-id="2fabd-220">For Automation, hello value is Job.</span></span> |
| <span data-ttu-id="2fabd-221">Risorsa</span><span class="sxs-lookup"><span data-stu-id="2fabd-221">Resource</span></span> | <span data-ttu-id="2fabd-222">Nome dell'account di automazione hello</span><span class="sxs-lookup"><span data-stu-id="2fabd-222">Name of hello Automation account</span></span> |
| <span data-ttu-id="2fabd-223">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="2fabd-223">SourceSystem</span></span> | <span data-ttu-id="2fabd-224">Modalità di raccolta dei dati hello Analitica di Log.</span><span class="sxs-lookup"><span data-stu-id="2fabd-224">How Log Analytics collected hello data.</span></span> <span data-ttu-id="2fabd-225">È sempre *Azure* per la diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="2fabd-225">Always *Azure* for Azure diagnostics.</span></span> |
| <span data-ttu-id="2fabd-226">ResultDescription</span><span class="sxs-lookup"><span data-stu-id="2fabd-226">ResultDescription</span></span> |<span data-ttu-id="2fabd-227">Include il flusso di output di hello da hello runbook.</span><span class="sxs-lookup"><span data-stu-id="2fabd-227">Includes hello output stream from hello runbook.</span></span> |
| <span data-ttu-id="2fabd-228">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="2fabd-228">CorrelationId</span></span> |<span data-ttu-id="2fabd-229">GUID che rappresenta l'Id di correlazione di processo del runbook hello hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-229">GUID that is hello Correlation Id of hello runbook job.</span></span> |
| <span data-ttu-id="2fabd-230">ResourceId</span><span class="sxs-lookup"><span data-stu-id="2fabd-230">ResourceId</span></span> |<span data-ttu-id="2fabd-231">Specifica l'id di risorsa account di automazione di Azure hello di hello runbook.</span><span class="sxs-lookup"><span data-stu-id="2fabd-231">Specifies hello Azure Automation account resource id of hello runbook.</span></span> |
| <span data-ttu-id="2fabd-232">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="2fabd-232">SubscriptionId</span></span> | <span data-ttu-id="2fabd-233">Hello la sottoscrizione di Azure Id (GUID) per l'account di automazione hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-233">hello Azure subscription Id (GUID) for hello Automation account.</span></span> |
| <span data-ttu-id="2fabd-234">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="2fabd-234">ResourceGroup</span></span> | <span data-ttu-id="2fabd-235">Nome del gruppo di risorse hello per hello account di automazione.</span><span class="sxs-lookup"><span data-stu-id="2fabd-235">Name of hello resource group for hello Automation account.</span></span> |
| <span data-ttu-id="2fabd-236">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="2fabd-236">ResourceProvider</span></span> | <span data-ttu-id="2fabd-237">MICROSOFT.AUTOMATION</span><span class="sxs-lookup"><span data-stu-id="2fabd-237">MICROSOFT.AUTOMATION</span></span> |
| <span data-ttu-id="2fabd-238">ResourceType</span><span class="sxs-lookup"><span data-stu-id="2fabd-238">ResourceType</span></span> | <span data-ttu-id="2fabd-239">AUTOMATIONACCOUNTS</span><span class="sxs-lookup"><span data-stu-id="2fabd-239">AUTOMATIONACCOUNTS</span></span> |

## <a name="viewing-automation-logs-in-log-analytics"></a><span data-ttu-id="2fabd-240">Visualizzazione dei log di Automazione in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="2fabd-240">Viewing Automation Logs in Log Analytics</span></span>
<span data-ttu-id="2fabd-241">Ora che è stato avviato l'invio di tooLog di log del processo automazione Analitica, di seguito viene illustrato cosa si può fare con questi log all'interno di Log Analitica.</span><span class="sxs-lookup"><span data-stu-id="2fabd-241">Now that you have started sending your Automation job logs tooLog Analytics, let’s see what you can do with these logs inside Log Analytics.</span></span>

<span data-ttu-id="2fabd-242">log di hello toosee, Esegui hello seguente query:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span><span class="sxs-lookup"><span data-stu-id="2fabd-242">toosee hello logs, run hello following query: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION"`</span></span>

### <a name="send-an-email-when-a-runbook-job-fails-or-suspends"></a><span data-ttu-id="2fabd-243">Inviare un messaggio di posta elettronica quando un processo del runbook non riesce o viene sospeso</span><span class="sxs-lookup"><span data-stu-id="2fabd-243">Send an email when a runbook job fails or suspends</span></span>
<span data-ttu-id="2fabd-244">Uno dei nostri clienti superiore richiesto è per hello possibilità toosend un messaggio di posta elettronica o un testo quando si verificano problemi con un processo del runbook.</span><span class="sxs-lookup"><span data-stu-id="2fabd-244">One of our top customer asks is for hello ability toosend an email or a text when something goes wrong with a runbook job.</span></span>   

<span data-ttu-id="2fabd-245">la regola toocreate un avviso, è innanzitutto necessario creare una ricerca di log per il runbook hello i record dei processi devono richiamare avviso hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-245">toocreate an alert rule, you start by creating a log search for hello runbook job records that should invoke hello alert.</span></span>  <span data-ttu-id="2fabd-246">Fare clic su hello **avviso** pulsante toocreate e configurare la regola di avviso hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-246">Click hello **Alert** button toocreate and configure hello alert rule.</span></span>

1. <span data-ttu-id="2fabd-247">Dalla pagina di panoramica Analitica Log hello, fare clic su **ricerca nei Log**.</span><span class="sxs-lookup"><span data-stu-id="2fabd-247">From hello Log Analytics Overview page, click **Log Search**.</span></span>
2. <span data-ttu-id="2fabd-248">Creare una query di ricerca di log per l'avviso digitando hello dopo una ricerca nel campo query hello: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)` è anche possibile raggruppare da hello RunbookName utilizzando:`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span><span class="sxs-lookup"><span data-stu-id="2fabd-248">Create a log search query for your alert by typing hello following search into hello query field:  `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended)`  You can also group by hello RunbookName by using: `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs (ResultType=Failed OR ResultType=Suspended) | measure Count() by RunbookName_s`</span></span>   

   <span data-ttu-id="2fabd-249">Se è impostato i log da più di un account o sottoscrizione tooyour area di lavoro automazione, è possibile raggruppare gli avvisi per sottoscrizione e l'account di automazione.</span><span class="sxs-lookup"><span data-stu-id="2fabd-249">If you have set up logs from more than one Automation account or subscription tooyour workspace, you can group your alerts by subscription and Automation account.</span></span>  <span data-ttu-id="2fabd-250">Nome dell'account di automazione può essere derivato dal campo risorse hello ricerca hello JobLogs.</span><span class="sxs-lookup"><span data-stu-id="2fabd-250">Automation account name can be derived from hello Resource field in hello search of JobLogs.</span></span>  
3. <span data-ttu-id="2fabd-251">hello tooopen **Aggiungi regola di avviso** schermata, fare clic su **avviso** nella parte superiore di hello della pagina hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-251">tooopen hello **Add Alert Rule** screen, click **Alert** at hello top of hello page.</span></span> <span data-ttu-id="2fabd-252">Per ulteriori dettagli sull'avviso hello tooconfigure di hello opzioni, vedere [gli avvisi nel registro Analitica](../log-analytics/log-analytics-alerts.md#alert-rules).</span><span class="sxs-lookup"><span data-stu-id="2fabd-252">For further details on hello options tooconfigure hello alert, see [Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md#alert-rules).</span></span>

### <a name="find-all-jobs-that-have-completed-with-errors"></a><span data-ttu-id="2fabd-253">Trovare tutti i processi completati con errori</span><span class="sxs-lookup"><span data-stu-id="2fabd-253">Find all jobs that have completed with errors</span></span>
<span data-ttu-id="2fabd-254">Inoltre tooalerting sugli errori, è possibile trovare quando un processo del runbook dispone di un errore non irreversibile.</span><span class="sxs-lookup"><span data-stu-id="2fabd-254">In addition tooalerting on failures, you can find when a runbook job has a non-terminating error.</span></span> <span data-ttu-id="2fabd-255">In questi casi PowerShell produce un flusso di errore, ma gli errori non irreversibili hello causa toosuspend il processo o non riuscire.</span><span class="sxs-lookup"><span data-stu-id="2fabd-255">In these cases PowerShell produces an error stream, but hello non-terminating errors do not cause your job toosuspend or fail.</span></span>    

1. <span data-ttu-id="2fabd-256">Nell'area di lavoro di Log Analytics fare clic su **Ricerca log**.</span><span class="sxs-lookup"><span data-stu-id="2fabd-256">In your Log Analytics workspace, click **Log Search**.</span></span>
2. <span data-ttu-id="2fabd-257">Nel campo della query hello digitare `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` e quindi fare clic su **ricerca**.</span><span class="sxs-lookup"><span data-stu-id="2fabd-257">In hello query field, type `Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams StreamType_s=Error | measure count() by JobId_g` and then click **Search**.</span></span>

### <a name="view-job-streams-for-a-job"></a><span data-ttu-id="2fabd-258">Visualizzare flussi del processo per un processo</span><span class="sxs-lookup"><span data-stu-id="2fabd-258">View job streams for a job</span></span>
<span data-ttu-id="2fabd-259">Quando si esegue il debug di un processo, è inoltre possibile toolook in flussi di lavoro hello.</span><span class="sxs-lookup"><span data-stu-id="2fabd-259">When you are debugging a job, you may also want toolook into hello job streams.</span></span>  <span data-ttu-id="2fabd-260">Hello query seguente vengono illustrati tutti i flussi di hello per un singolo processo con GUID 2ebd22ea-e05e-4eb9 - 9d 76-d73cbd4356e0:</span><span class="sxs-lookup"><span data-stu-id="2fabd-260">hello following query shows all hello streams for a single job with GUID 2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0:</span></span>   

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobStreams JobId_g="2ebd22ea-e05e-4eb9-9d76-d73cbd4356e0" | sort TimeGenerated | select ResultDescription`

### <a name="view-historical-job-status"></a><span data-ttu-id="2fabd-261">Visualizzare lo stato cronologico del processo</span><span class="sxs-lookup"><span data-stu-id="2fabd-261">View historical job status</span></span>
<span data-ttu-id="2fabd-262">Infine, è opportuno toovisualize la cronologia dei processi nel tempo.</span><span class="sxs-lookup"><span data-stu-id="2fabd-262">Finally, you may want toovisualize your job history over time.</span></span>  <span data-ttu-id="2fabd-263">È possibile utilizzare questo toosearch query per lo stato di hello dei processi nel tempo.</span><span class="sxs-lookup"><span data-stu-id="2fabd-263">You can use this query toosearch for hello status of your jobs over time.</span></span>

`Type=AzureDiagnostics ResourceProvider="MICROSOFT.AUTOMATION" Category=JobLogs NOT(ResultType="started") | measure Count() by ResultType interval 1hour`  
<br> <span data-ttu-id="2fabd-264">![Grafico dello stato cronologico del processo OMS](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span><span class="sxs-lookup"><span data-stu-id="2fabd-264">![OMS Historical Job Status Chart](media/automation-manage-send-joblogs-log-analytics/historical-job-status-chart.png)</span></span><br>

## <a name="summary"></a><span data-ttu-id="2fabd-265">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="2fabd-265">Summary</span></span>
<span data-ttu-id="2fabd-266">Inviando l'automazione processo lo stato e flusso di dati tooLog Analitica, è possibile ottenere una migliore comprensione stato hello dei processi di automazione da:</span><span class="sxs-lookup"><span data-stu-id="2fabd-266">By sending your Automation job status and stream data tooLog Analytics, you can get better insight into hello status of your Automation jobs by:</span></span>
+ <span data-ttu-id="2fabd-267">Impostazione di avvisi toonotify è quando si verifica un problema</span><span class="sxs-lookup"><span data-stu-id="2fabd-267">Setting up alerts toonotify you when there is an issue</span></span>
+ <span data-ttu-id="2fabd-268">I risultati di runbook lo stato del processo di runbook e altri con visualizzazioni personalizzate e toovisualize query di ricerca correlato gli indicatori chiave o metrica.</span><span class="sxs-lookup"><span data-stu-id="2fabd-268">Using custom views and search queries toovisualize your runbook results, runbook job status, and other related key indicators or metrics.</span></span>  

<span data-ttu-id="2fabd-269">Log Analitica fornisce maggiore visibilità operational tooyour processi di automazione e contribuisce di eventi imprevisti di indirizzi più veloci.</span><span class="sxs-lookup"><span data-stu-id="2fabd-269">Log Analytics provides greater operational visibility tooyour Automation jobs and can help address incidents quicker.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="2fabd-270">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="2fabd-270">Next steps</span></span>
* <span data-ttu-id="2fabd-271">toolearn ulteriori informazioni su come query di ricerca diverso tooconstruct e revisione hello automazione del processo di log con Log Analitica, vedere [Accedi ricerche Log Analitica](../log-analytics/log-analytics-log-searches.md)</span><span class="sxs-lookup"><span data-stu-id="2fabd-271">toolearn more about how tooconstruct different search queries and review hello Automation job logs with Log Analytics, see [Log searches in Log Analytics](../log-analytics/log-analytics-log-searches.md)</span></span>
* <span data-ttu-id="2fabd-272">toounderstand toocreate e recuperare messaggi di errore e di output dal runbook, vedere [Runbook i messaggi e di output](automation-runbook-output-and-messages.md)</span><span class="sxs-lookup"><span data-stu-id="2fabd-272">toounderstand how toocreate and retrieve output and error messages from runbooks, see [Runbook output and messages](automation-runbook-output-and-messages.md)</span></span>
* <span data-ttu-id="2fabd-273">ulteriori sull'esecuzione di runbook, come i processi del runbook toomonitor e altri dettagli tecnici, vedere toolearn [tenere traccia di un processo del runbook](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="2fabd-273">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="2fabd-274">toolearn ulteriori informazioni su OMS Log Analitica e origini di raccolta dati, vedere [dati di archiviazione di Azure la raccolta in panoramica Log Analitica](../log-analytics/log-analytics-azure-storage.md)</span><span class="sxs-lookup"><span data-stu-id="2fabd-274">toolearn more about OMS Log Analytics and data collection sources, see [Collecting Azure storage data in Log Analytics overview](../log-analytics/log-analytics-azure-storage.md)</span></span>
