---
title: aaaUsing condiviso (SAS) firme di accesso in archiviazione di Azure | Documenti Microsoft
description: Informazioni condivise toouse accesso firme (SAS) toodelegate accesso tooAzure risorse di archiviazione, inclusi BLOB, code, tabelle e file.
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: 46fd99d7-36b3-4283-81e3-f214b29f1152
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 04/18/2017
ms.author: marsma
ms.openlocfilehash: 5b75a3c25bcfb9f1ceb81f31dc2d42376bd105cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="using-shared-access-signatures-sas"></a><span data-ttu-id="05878-103">Uso delle firme di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-103">Using shared access signatures (SAS)</span></span>

<span data-ttu-id="05878-104">Una firma di accesso condiviso (SAS) fornisce un tooobjects di accesso limitato toogrant modo nell'account di archiviazione tooother client, senza esporre la chiave dell'account.</span><span class="sxs-lookup"><span data-stu-id="05878-104">A shared access signature (SAS) provides you with a way toogrant limited access tooobjects in your storage account tooother clients, without exposing your account key.</span></span> <span data-ttu-id="05878-105">In questo articolo è fornire una panoramica del modello di firma di accesso condiviso hello, le procedure consigliate di firma di accesso condiviso ed esaminare alcuni esempi.</span><span class="sxs-lookup"><span data-stu-id="05878-105">In this article, we provide an overview of hello SAS model, review SAS best practices, and look at some examples.</span></span>

<span data-ttu-id="05878-106">Per ulteriori esempi di codice l'utilizzo di SAS rispetto a quelle fornite in questa sezione, vedere [Introduzione all'archiviazione Blob di Azure in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) e altri esempi disponibili in hello [esempi di codice di Azure](https://azure.microsoft.com/documentation/samples/?service=storage) libreria.</span><span class="sxs-lookup"><span data-stu-id="05878-106">For additional code examples using SAS beyond those presented here, see [Getting Started with Azure Blob Storage in .NET](https://azure.microsoft.com/documentation/samples/storage-blob-dotnet-getting-started/) and other samples available in hello [Azure Code Samples](https://azure.microsoft.com/documentation/samples/?service=storage) library.</span></span> <span data-ttu-id="05878-107">È possibile scaricare le applicazioni di esempio hello ed eseguirli o esaminare il codice hello su GitHub.</span><span class="sxs-lookup"><span data-stu-id="05878-107">You can download hello sample applications and run them, or browse hello code on GitHub.</span></span>

## <a name="what-is-a-shared-access-signature"></a><span data-ttu-id="05878-108">Informazioni sulle firme di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-108">What is a shared access signature?</span></span>
<span data-ttu-id="05878-109">Firma di accesso condiviso fornisce l'accesso delegato tooresources nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="05878-109">A shared access signature provides delegated access tooresources in your storage account.</span></span> <span data-ttu-id="05878-110">Una firma di accesso condiviso, è possibile concedere ai client accedono tooresources nell'account di archiviazione, senza condividere le chiavi dell'account.</span><span class="sxs-lookup"><span data-stu-id="05878-110">With a SAS, you can grant clients access tooresources in your storage account, without sharing your account keys.</span></span> <span data-ttu-id="05878-111">Si tratta di hello punto chiave di utilizzo di firme di accesso condiviso nelle applicazioni, una firma di accesso condiviso è un tooshare in modo sicuro le risorse di archiviazione senza compromettere le chiavi dell'account.</span><span class="sxs-lookup"><span data-stu-id="05878-111">This is hello key point of using shared access signatures in your applications--a SAS is a secure way tooshare your storage resources without compromising your account keys.</span></span>

[!INCLUDE [storage-account-key-note-include](../../../includes/storage-account-key-note-include.md)]

<span data-ttu-id="05878-112">Una firma di accesso condiviso consente un controllo granulare tipo hello di accesso che è concedere tooclients che dispongono di hello SAS, tra cui:</span><span class="sxs-lookup"><span data-stu-id="05878-112">A SAS gives you granular control over hello type of access you grant tooclients who have hello SAS, including:</span></span>

* <span data-ttu-id="05878-113">intervallo di Hello in cui hello è valido, inclusi l'ora di inizio hello e l'ora di scadenza hello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-113">hello interval over which hello SAS is valid, including hello start time and hello expiry time.</span></span>
* <span data-ttu-id="05878-114">autorizzazioni Hello concesse da hello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-114">hello permissions granted by hello SAS.</span></span> <span data-ttu-id="05878-115">Ad esempio, una firma di accesso condiviso per un blob potrebbe concedono autorizzazioni di lettura e blob toothat le autorizzazioni di scrittura, ma non eliminare le autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="05878-115">For example, a SAS for a blob might grant read and write permissions toothat blob, but not delete permissions.</span></span>
* <span data-ttu-id="05878-116">Un indirizzo IP facoltativo o intervallo di indirizzi IP dai quali archiviazione di Azure accetta hello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-116">An optional IP address or range of IP addresses from which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="05878-117">Ad esempio, specificare un intervallo di indirizzi IP appartenenti tooyour organizzazione.</span><span class="sxs-lookup"><span data-stu-id="05878-117">For example, you might specify a range of IP addresses belonging tooyour organization.</span></span>
* <span data-ttu-id="05878-118">protocollo Hello su cui l'archiviazione di Azure accetterà hello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-118">hello protocol over which Azure Storage will accept hello SAS.</span></span> <span data-ttu-id="05878-119">È possibile utilizzare questo tooclients accesso toorestrict di parametro facoltativo tramite HTTPS.</span><span class="sxs-lookup"><span data-stu-id="05878-119">You can use this optional parameter toorestrict access tooclients using HTTPS.</span></span>

## <a name="when-should-you-use-a-shared-access-signature"></a><span data-ttu-id="05878-120">Perché usare una firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-120">When should you use a shared access signature?</span></span>
<span data-ttu-id="05878-121">Quando si desidera tooprovide accesso tooresources nel client di tooany account di archiviazione che non presenta le chiavi di accesso dell'account di archiviazione, è possibile utilizzare una firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="05878-121">You can use a SAS when you want tooprovide access tooresources in your storage account tooany client not possessing your storage account's access keys.</span></span> <span data-ttu-id="05878-122">L'account di archiviazione include sia una chiave di accesso primaria e secondaria, di concedere l'account di accesso amministrativo tooyour e tutte le risorse in esso contenuti.</span><span class="sxs-lookup"><span data-stu-id="05878-122">Your storage account includes both a primary and secondary access key, both of which grant administrative access tooyour account, and all resources within it.</span></span> <span data-ttu-id="05878-123">Esposizione di uno di questi tasti apre il possibilità toohello account d'uso dannoso o non appropriata.</span><span class="sxs-lookup"><span data-stu-id="05878-123">Exposing either of these keys opens your account toohello possibility of malicious or negligent use.</span></span> <span data-ttu-id="05878-124">Le firme di accesso condiviso forniscono un metodo alternativo che consente ai client tooread, scrittura ed eliminare i dati nell'account di archiviazione in base toohello autorizzazioni che sono state concesse in modo esplicito e senza necessità di una chiave dell'account.</span><span class="sxs-lookup"><span data-stu-id="05878-124">Shared access signatures provide a safe alternative that allows clients tooread, write, and delete data in your storage account according toohello permissions you've explicitly granted, and without need for an account key.</span></span>

<span data-ttu-id="05878-125">Uno scenario comune è utile in una firma di accesso condiviso è un servizio in cui gli utenti di leggere e scrivere il proprio account di archiviazione di dati tooyour.</span><span class="sxs-lookup"><span data-stu-id="05878-125">A common scenario where a SAS is useful is a service where users read and write their own data tooyour storage account.</span></span> <span data-ttu-id="05878-126">Uno scenario in cui i dati utente vengono archiviati nell'account di archiviazione è caratterizzato da due modelli di progettazione standard:</span><span class="sxs-lookup"><span data-stu-id="05878-126">In a scenario where a storage account stores user data, there are two typical design patterns:</span></span>

1. <span data-ttu-id="05878-127">I client caricano e scaricano dati tramite un servizio proxy front-end che esegue l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="05878-127">Clients upload and download data via a front-end proxy service, which performs authentication.</span></span> <span data-ttu-id="05878-128">Il servizio proxy front-end offre il vantaggio di hello di convalida delle regole di business, ma per grandi quantità di dati o transazioni con volumi elevati, creazione di un servizio che possono essere ridimensionati toomatch richiesta può essere costoso o difficile.</span><span class="sxs-lookup"><span data-stu-id="05878-128">This front-end proxy service has hello advantage of allowing validation of business rules, but for large amounts of data or high-volume transactions, creating a service that can scale toomatch demand may be expensive or difficult.</span></span>

  ![Diagramma dello scenario: il servizio proxy front-end](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-fe-proxy-service.png)   

1. <span data-ttu-id="05878-130">Un semplice servizio autentica il client di hello in base alle esigenze e quindi genera una firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="05878-130">A lightweight service authenticates hello client as needed and then generates a SAS.</span></span> <span data-ttu-id="05878-131">Una volta client hello riceve hello SAS, risorse dell'account di archiviazione possono accedere direttamente con le autorizzazioni di hello definite dalle hello SAS e per l'intervallo di hello consentito da hello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-131">Once hello client receives hello SAS, they can access storage account resources directly with hello permissions defined by hello SAS and for hello interval allowed by hello SAS.</span></span> <span data-ttu-id="05878-132">Hello SAS riduce hello necessario per il routing di tutti i dati tramite il servizio front-end proxy hello.</span><span class="sxs-lookup"><span data-stu-id="05878-132">hello SAS mitigates hello need for routing all data through hello front-end proxy service.</span></span>

  ![Diagramma dello scenario: servizio provider di firma di accesso condiviso](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-provider-service.png)   

<span data-ttu-id="05878-134">Molti servizi reali possono usare una combinazione di questi due approcci.</span><span class="sxs-lookup"><span data-stu-id="05878-134">Many real-world services may use a hybrid of these two approaches.</span></span> <span data-ttu-id="05878-135">Ad esempio, potrebbe essere elaborati alcuni dati e convalidati tramite proxy front-end hello, mentre altri dati vengano salvati e/o leggere direttamente tramite firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="05878-135">For example, some data might be processed and validated via hello front-end proxy, while other data is saved and/or read directly using SAS.</span></span>

<span data-ttu-id="05878-136">Inoltre, sarà necessario toouse un oggetto di origine SAS tooauthenticate hello in un'operazione di copia in determinati scenari:</span><span class="sxs-lookup"><span data-stu-id="05878-136">Additionally, you will need toouse a SAS tooauthenticate hello source object in a copy operation in certain scenarios:</span></span>

* <span data-ttu-id="05878-137">Quando si copia un blob tooanother blob che risiede in un altro account di archiviazione, è necessario utilizzare un blob di origine hello tooauthenticate SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-137">When you copy a blob tooanother blob that resides in a different storage account, you must use a SAS tooauthenticate hello source blob.</span></span> <span data-ttu-id="05878-138">Facoltativamente, è possibile utilizzare un firma di accesso condiviso tooauthenticate hello blob di destinazione nonché.</span><span class="sxs-lookup"><span data-stu-id="05878-138">You can optionally use a SAS tooauthenticate hello destination blob as well.</span></span>
* <span data-ttu-id="05878-139">Quando si copia un file tooanother file che si trova in un altro account di archiviazione, è necessario utilizzare un file di origine hello tooauthenticate SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-139">When you copy a file tooanother file that resides in a different storage account, you must use a SAS tooauthenticate hello source file.</span></span> <span data-ttu-id="05878-140">Facoltativamente, è possibile utilizzare un firma di accesso condiviso tooauthenticate hello destinazione file.</span><span class="sxs-lookup"><span data-stu-id="05878-140">You can optionally use a SAS tooauthenticate hello destination file as well.</span></span>
* <span data-ttu-id="05878-141">Quando si copia un file di blob tooa o un blob tooa file, è necessario utilizzare un oggetto origine hello tooauthenticate SAS, anche se gli oggetti di origine e destinazione hello risiedono hello stesso account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="05878-141">When you copy a blob tooa file, or a file tooa blob, you must use a SAS tooauthenticate hello source object, even if hello source and destination objects reside within hello same storage account.</span></span>

## <a name="types-of-shared-access-signatures"></a><span data-ttu-id="05878-142">Tipi di firme di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-142">Types of shared access signatures</span></span>
<span data-ttu-id="05878-143">È possibile creare due tipi di firme di accesso condiviso:</span><span class="sxs-lookup"><span data-stu-id="05878-143">You can create two types of shared access signatures:</span></span>

* <span data-ttu-id="05878-144">**Firma di accesso condiviso del servizio.**</span><span class="sxs-lookup"><span data-stu-id="05878-144">**Service SAS.**</span></span> <span data-ttu-id="05878-145">accedono a delegati SAS del servizio Hello risorsa tooa solo uno dei servizi di archiviazione hello: hello servizio Blob, coda, tabella o File.</span><span class="sxs-lookup"><span data-stu-id="05878-145">hello service SAS delegates access tooa resource in just one of hello storage services: hello Blob, Queue, Table, or File service.</span></span> <span data-ttu-id="05878-146">Vedere [la costruzione di una firma di accesso condiviso servizio](https://msdn.microsoft.com/library/dn140255.aspx) e [servizio SAS esempi](https://msdn.microsoft.com/library/dn140256.aspx) per informazioni dettagliate sulla creazione di token di firma di accesso condiviso servizio hello.</span><span class="sxs-lookup"><span data-stu-id="05878-146">See [Constructing a Service SAS](https://msdn.microsoft.com/library/dn140255.aspx) and [Service SAS Examples](https://msdn.microsoft.com/library/dn140256.aspx) for in-depth information about constructing hello service SAS token.</span></span>
* <span data-ttu-id="05878-147">**Firma di accesso condiviso dell'account.**</span><span class="sxs-lookup"><span data-stu-id="05878-147">**Account SAS.**</span></span> <span data-ttu-id="05878-148">delegati di firma di accesso condiviso di Hello account di accesso tooresources in uno o più dei servizi di archiviazione hello.</span><span class="sxs-lookup"><span data-stu-id="05878-148">hello account SAS delegates access tooresources in one or more of hello storage services.</span></span> <span data-ttu-id="05878-149">Operazioni di hello disponibili mediante il servizio di firma di accesso condiviso sono anche disponibili tramite un account di firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="05878-149">All of hello operations available via a service SAS are also available via an account SAS.</span></span> <span data-ttu-id="05878-150">Inoltre, con account hello firma di accesso condiviso, è possibile delegare toooperations di accesso che si applicano tooa determinato servizio, ad esempio **Get/Set proprietà del servizio** e **ottenere statistiche del servizio**. È inoltre possibile delegare accesso tooread, scrittura e le operazioni di eliminazione in contenitori blob, tabelle, code e le condivisioni di file che non sono consentite con un firma di accesso condiviso del servizio.</span><span class="sxs-lookup"><span data-stu-id="05878-150">Additionally, with hello account SAS, you can delegate access toooperations that apply tooa given service, such as **Get/Set Service Properties** and **Get Service Stats**. You can also delegate access tooread, write, and delete operations on blob containers, tables, queues, and file shares that are not permitted with a service SAS.</span></span> <span data-ttu-id="05878-151">Vedere [la costruzione di una firma di accesso condiviso](https://msdn.microsoft.com/library/mt584140.aspx) per informazioni dettagliate sulla creazione di token di firma di accesso condiviso di hello account.</span><span class="sxs-lookup"><span data-stu-id="05878-151">See [Constructing an Account SAS](https://msdn.microsoft.com/library/mt584140.aspx) for in-depth information about constructing hello account SAS token.</span></span>

## <a name="how-a-shared-access-signature-works"></a><span data-ttu-id="05878-152">Funzionamento della firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-152">How a shared access signature works</span></span>
<span data-ttu-id="05878-153">Firma di accesso condiviso è un URI con segno che punta tooone o altre risorse di archiviazione e include un token che contiene un set di parametri di query speciale.</span><span class="sxs-lookup"><span data-stu-id="05878-153">A shared access signature is a signed URI that points tooone or more storage resources and includes a token that contains a special set of query parameters.</span></span> <span data-ttu-id="05878-154">token Hello indica come risorse hello accessibili da client hello.</span><span class="sxs-lookup"><span data-stu-id="05878-154">hello token indicates how hello resources may be accessed by hello client.</span></span> <span data-ttu-id="05878-155">Uno dei parametri di query hello, hello firma, viene costruito dai parametri SAS hello e firmato con una chiave dell'account hello.</span><span class="sxs-lookup"><span data-stu-id="05878-155">One of hello query parameters, hello signature, is constructed from hello SAS parameters and signed with hello account key.</span></span> <span data-ttu-id="05878-156">Questa firma viene utilizzata da hello tooauthenticate di archiviazione di Azure SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-156">This signature is used by Azure Storage tooauthenticate hello SAS.</span></span>

<span data-ttu-id="05878-157">Di seguito è riportato un esempio di un URI SAS, l'URI di risorsa con hello e token SAS hello:</span><span class="sxs-lookup"><span data-stu-id="05878-157">Here's an example of a SAS URI, showing hello resource URI and hello SAS token:</span></span>

![Componenti di un URI di firma di accesso condiviso](./media/storage-dotnet-shared-access-signature-part-1/sas-storage-uri.png)   

<span data-ttu-id="05878-159">token SAS Hello è una stringa di generazione in hello *client* lato (vedere hello [esempi SAS](#sas-examples) sezione per esempi di codice).</span><span class="sxs-lookup"><span data-stu-id="05878-159">hello SAS token is a string you generate on hello *client* side (see hello [SAS examples](#sas-examples) section for code examples).</span></span> <span data-ttu-id="05878-160">Un token di firma di accesso condiviso che è generare alla libreria client di archiviazione hello, ad esempio, non viene rilevato da archiviazione di Azure in alcun modo.</span><span class="sxs-lookup"><span data-stu-id="05878-160">A SAS token you generate with hello storage client library, for example, is not tracked by Azure Storage in any way.</span></span> <span data-ttu-id="05878-161">È possibile creare un numero illimitato di token di firma di accesso condiviso sul lato client hello.</span><span class="sxs-lookup"><span data-stu-id="05878-161">You can create an unlimited number of SAS tokens on hello client side.</span></span>

<span data-ttu-id="05878-162">Quando un client fornisce un tooAzure URI SAS archiviazione come parte di una richiesta, il servizio hello controlla i parametri SAS hello e tooverify firma è valida per l'autenticazione richiesta hello.</span><span class="sxs-lookup"><span data-stu-id="05878-162">When a client provides a SAS URI tooAzure Storage as part of a request, hello service checks hello SAS parameters and signature tooverify that it is valid for authenticating hello request.</span></span> <span data-ttu-id="05878-163">Se il servizio di hello verifica che la firma di hello è valida, quindi hello richiesta viene autenticata.</span><span class="sxs-lookup"><span data-stu-id="05878-163">If hello service verifies that hello signature is valid, then hello request is authenticated.</span></span> <span data-ttu-id="05878-164">In caso contrario, richiesta di hello viene rifiutata con codice di errore 403 (accesso negato).</span><span class="sxs-lookup"><span data-stu-id="05878-164">Otherwise, hello request is declined with error code 403 (Forbidden).</span></span>

## <a name="shared-access-signature-parameters"></a><span data-ttu-id="05878-165">Parametri della firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-165">Shared access signature parameters</span></span>
<span data-ttu-id="05878-166">account Hello SAS token SAS del servizio di includere alcuni parametri comuni e prendere alcuni parametri che sono diversi.</span><span class="sxs-lookup"><span data-stu-id="05878-166">hello account SAS and service SAS tokens include some common parameters, and also take a few parameters that that are different.</span></span>

### <a name="parameters-common-tooaccount-sas-and-service-sas-tokens"></a><span data-ttu-id="05878-167">Parametri comuni tooaccount SAS e i token SAS del servizio</span><span class="sxs-lookup"><span data-stu-id="05878-167">Parameters common tooaccount SAS and service SAS tokens</span></span>
* <span data-ttu-id="05878-168">**Versione dell'API** un parametro facoltativo che specifica hello archiviazione servizio versione toouse tooexecute hello richiesta.</span><span class="sxs-lookup"><span data-stu-id="05878-168">**Api version** An optional parameter that specifies hello storage service version toouse tooexecute hello request.</span></span>
* <span data-ttu-id="05878-169">**Versione del servizio** un parametro obbligatorio che specifica hello archiviazione servizio versione toouse tooauthenticate hello richiesta.</span><span class="sxs-lookup"><span data-stu-id="05878-169">**Service version** A required parameter that specifies hello storage service version toouse tooauthenticate hello request.</span></span>
* <span data-ttu-id="05878-170">**Ora di inizio.**</span><span class="sxs-lookup"><span data-stu-id="05878-170">**Start time.**</span></span> <span data-ttu-id="05878-171">Si tratta hello tempo in cui hello firma di accesso condiviso diventa valida.</span><span class="sxs-lookup"><span data-stu-id="05878-171">This is hello time at which hello SAS becomes valid.</span></span> <span data-ttu-id="05878-172">ora di inizio Hello per una firma di accesso condiviso è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="05878-172">hello start time for a shared access signature is optional.</span></span> <span data-ttu-id="05878-173">Se viene omessa un'ora di inizio, hello SAS ha validità immediata.</span><span class="sxs-lookup"><span data-stu-id="05878-173">If a start time is omitted, hello SAS is effective immediately.</span></span> <span data-ttu-id="05878-174">Hello ora di inizio deve essere espressa in formato UTC (Coordinated Universal Time), con un identificatore di formato UTC speciale ("Z"), ad esempio `1994-11-05T13:15:30Z`.</span><span class="sxs-lookup"><span data-stu-id="05878-174">hello start time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z`.</span></span>
* <span data-ttu-id="05878-175">**Scadenza.**</span><span class="sxs-lookup"><span data-stu-id="05878-175">**Expiry time.**</span></span> <span data-ttu-id="05878-176">Si tratta hello tempo dopo il quale hello firma di accesso condiviso non è più valido.</span><span class="sxs-lookup"><span data-stu-id="05878-176">This is hello time after which hello SAS is no longer valid.</span></span> <span data-ttu-id="05878-177">Secondo le procedure consigliate è preferibile specificare una data di scadenza per una firma di accesso condiviso oppure associarla a criteri di accesso archiviati.</span><span class="sxs-lookup"><span data-stu-id="05878-177">Best practices recommend that you either specify an expiry time for a SAS, or associate it with a stored access policy.</span></span> <span data-ttu-id="05878-178">Hello ora di scadenza deve essere espressi in formato UTC (Coordinated Universal Time), con un identificatore di formato UTC speciale ("Z"), ad esempio `1994-11-05T13:15:30Z` (vedere più sotto).</span><span class="sxs-lookup"><span data-stu-id="05878-178">hello expiry time must be expressed in UTC (Coordinated Universal Time), with a special UTC designator ("Z"), for example `1994-11-05T13:15:30Z` (see more below).</span></span>
* <span data-ttu-id="05878-179">**Autorizzazione.**</span><span class="sxs-lookup"><span data-stu-id="05878-179">**Permissions.**</span></span> <span data-ttu-id="05878-180">autorizzazioni di Hello specificate nella firma di accesso condiviso hello indicano le operazioni client hello può eseguire su una risorsa di archiviazione hello utilizzando hello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-180">hello permissions specified on hello SAS indicate what operations hello client can perform against hello storage resource using hello SAS.</span></span> <span data-ttu-id="05878-181">Le autorizzazioni disponibili per la firma di accesso condiviso dell'account e del servizio sono diverse.</span><span class="sxs-lookup"><span data-stu-id="05878-181">Available permissions differ for an account SAS and a service SAS.</span></span>
* <span data-ttu-id="05878-182">**IP.**</span><span class="sxs-lookup"><span data-stu-id="05878-182">**IP.**</span></span> <span data-ttu-id="05878-183">Parametro facoltativo che specifica un indirizzo IP o un intervallo di indirizzi IP all'esterno di Azure (vedere la sezione hello [lo stato di configurazione della sessione di Routing](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) per Express Route) da cui richieste tooaccept.</span><span class="sxs-lookup"><span data-stu-id="05878-183">An optional parameter that specifies an IP address or a range of IP addresses outside of Azure (see hello section [Routing session configuration state](../../expressroute/expressroute-workflows.md#routing-session-configuration-state) for Express Route) from which tooaccept requests.</span></span>
* <span data-ttu-id="05878-184">**Protocol.**</span><span class="sxs-lookup"><span data-stu-id="05878-184">**Protocol.**</span></span> <span data-ttu-id="05878-185">Parametro facoltativo che specifica il protocollo di hello consentito per una richiesta.</span><span class="sxs-lookup"><span data-stu-id="05878-185">An optional parameter that specifies hello protocol permitted for a request.</span></span> <span data-ttu-id="05878-186">I valori possibili sono HTTP e HTTPS (`https,http`), che è solo il valore di predefinito hello o HTTPS (`https`).</span><span class="sxs-lookup"><span data-stu-id="05878-186">Possible values are both HTTPS and HTTP (`https,http`), which is hello default value, or HTTPS only (`https`).</span></span> <span data-ttu-id="05878-187">Si noti che HTTP only non è un valore consentito.</span><span class="sxs-lookup"><span data-stu-id="05878-187">Note that HTTP only is not a permitted value.</span></span>
* <span data-ttu-id="05878-188">**Signature.**</span><span class="sxs-lookup"><span data-stu-id="05878-188">**Signature.**</span></span> <span data-ttu-id="05878-189">firma Hello viene costruita da hello altri parametri specificati come token parte e quindi crittografate.</span><span class="sxs-lookup"><span data-stu-id="05878-189">hello signature is constructed from hello other parameters specified as part token and then encrypted.</span></span> <span data-ttu-id="05878-190">È utilizzato hello tooauthenticate SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-190">It's used tooauthenticate hello SAS.</span></span>

### <a name="parameters-for-a-service-sas-token"></a><span data-ttu-id="05878-191">Parametri per il token della firma di accesso condiviso del servizio</span><span class="sxs-lookup"><span data-stu-id="05878-191">Parameters for a service SAS token</span></span>
* <span data-ttu-id="05878-192">**Risorsa di archiviazione.**</span><span class="sxs-lookup"><span data-stu-id="05878-192">**Storage resource.**</span></span> <span data-ttu-id="05878-193">Le risorse di archiviazione per cui è possibile delegare l'accesso con una firma di accesso condiviso del servizio sono:</span><span class="sxs-lookup"><span data-stu-id="05878-193">Storage resources for which you can delegate access with a service SAS include:</span></span>
  * <span data-ttu-id="05878-194">Contenitori e BLOB</span><span class="sxs-lookup"><span data-stu-id="05878-194">Containers and blobs</span></span>
  * <span data-ttu-id="05878-195">Condivisioni di file e file</span><span class="sxs-lookup"><span data-stu-id="05878-195">File shares and files</span></span>
  * <span data-ttu-id="05878-196">Queues</span><span class="sxs-lookup"><span data-stu-id="05878-196">Queues</span></span>
  * <span data-ttu-id="05878-197">Le tabelle e gli intervalli di entità della tabella.</span><span class="sxs-lookup"><span data-stu-id="05878-197">Tables and ranges of table entities.</span></span>

### <a name="parameters-for-an-account-sas-token"></a><span data-ttu-id="05878-198">Parametri per il token della firma di accesso condiviso dell'account</span><span class="sxs-lookup"><span data-stu-id="05878-198">Parameters for an account SAS token</span></span>
* <span data-ttu-id="05878-199">**Servizio o servizi.**</span><span class="sxs-lookup"><span data-stu-id="05878-199">**Service or services.**</span></span> <span data-ttu-id="05878-200">Un account sa possibile delegare l'accesso tooone o più dei servizi di archiviazione hello.</span><span class="sxs-lookup"><span data-stu-id="05878-200">An account SAS can delegate access tooone or more of hello storage services.</span></span> <span data-ttu-id="05878-201">Ad esempio, è possibile creare un account di delegati diritti di accesso del servizio Blob e File toohello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-201">For example, you can create an account SAS that delegates access toohello Blob and File service.</span></span> <span data-ttu-id="05878-202">Oppure è possibile creare una firma di accesso condiviso che i delegati accedere tooall quattro servizi (Blob, coda, tabella e File).</span><span class="sxs-lookup"><span data-stu-id="05878-202">Or you can create a SAS that delegates access tooall four services (Blob, Queue, Table, and File).</span></span>
* <span data-ttu-id="05878-203">**Tipi di risorse di archiviazione.**</span><span class="sxs-lookup"><span data-stu-id="05878-203">**Storage resource types.**</span></span> <span data-ttu-id="05878-204">Un account sa applica tooone o altre classi di risorse di archiviazione, piuttosto che una risorsa specifica.</span><span class="sxs-lookup"><span data-stu-id="05878-204">An account SAS applies tooone or more classes of storage resources, rather than a specific resource.</span></span> <span data-ttu-id="05878-205">È possibile creare un account SAS toodelegate accesso:</span><span class="sxs-lookup"><span data-stu-id="05878-205">You can create an account SAS toodelegate access to:</span></span>
  * <span data-ttu-id="05878-206">API a livello di servizio, che vengono chiamate su risorsa di account di archiviazione hello.</span><span class="sxs-lookup"><span data-stu-id="05878-206">Service-level APIs, which are called against hello storage account resource.</span></span> <span data-ttu-id="05878-207">Ad esempio: **Get/Set Service Properties**, **Get Service Stats** e **List Containers/Queues/Tables/Shares**.</span><span class="sxs-lookup"><span data-stu-id="05878-207">Examples include **Get/Set Service Properties**, **Get Service Stats**, and **List Containers/Queues/Tables/Shares**.</span></span>
  * <span data-ttu-id="05878-208">Le API a livello di contenitore, che vengono chiamate con gli oggetti contenitore hello per ogni servizio: blob contenitori, le code, tabelle e le condivisioni file.</span><span class="sxs-lookup"><span data-stu-id="05878-208">Container-level APIs, which are called against hello container objects for each service: blob containers, queues, tables, and file shares.</span></span> <span data-ttu-id="05878-209">Ad esempio: **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share** e **List Blobs/Files and Directories**.</span><span class="sxs-lookup"><span data-stu-id="05878-209">Examples include **Create/Delete Container**, **Create/Delete Queue**, **Create/Delete Table**, **Create/Delete Share**, and **List Blobs/Files and Directories**.</span></span>
  * <span data-ttu-id="05878-210">API a livello di oggetto, che vengono chiamate su BLOB, messaggi di coda, entità tabelle e file.</span><span class="sxs-lookup"><span data-stu-id="05878-210">Object-level APIs, which are called against blobs, queue messages, table entities, and files.</span></span> <span data-ttu-id="05878-211">Ad esempio: **Put Blob**, **Query Entity**, **Get Messages** e **Create File**.</span><span class="sxs-lookup"><span data-stu-id="05878-211">For example, **Put Blob**, **Query Entity**, **Get Messages**, and **Create File**.</span></span>

## <a name="examples-of-sas-uris"></a><span data-ttu-id="05878-212">Esempi di URI di firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-212">Examples of SAS URIs</span></span>

### <a name="service-sas-uri-example"></a><span data-ttu-id="05878-213">Esempio di URI di firma di accesso condiviso del servizio</span><span class="sxs-lookup"><span data-stu-id="05878-213">Service SAS URI example</span></span>

<span data-ttu-id="05878-214">Di seguito è riportato un esempio di un servizio URI SAS che fornisce leggere e scrivere i blob tooa autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="05878-214">Here is an example of a service SAS URI that provides read and write permissions tooa blob.</span></span> <span data-ttu-id="05878-215">tabella Hello viene suddivisa in ogni parte di hello URI toounderstand il contributo di toohello SAS:</span><span class="sxs-lookup"><span data-stu-id="05878-215">hello table breaks down each part of hello URI toounderstand how it contributes toohello SAS:</span></span>

```
https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt?sv=2015-04-05&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D
```

| <span data-ttu-id="05878-216">Nome</span><span class="sxs-lookup"><span data-stu-id="05878-216">Name</span></span> | <span data-ttu-id="05878-217">Parte firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-217">SAS portion</span></span> | <span data-ttu-id="05878-218">Descrizione</span><span class="sxs-lookup"><span data-stu-id="05878-218">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="05878-219">URI del BLOB</span><span class="sxs-lookup"><span data-stu-id="05878-219">Blob URI</span></span> |`https://myaccount.blob.core.windows.net/sascontainer/sasblob.txt` |<span data-ttu-id="05878-220">indirizzo Hello del blob hello.</span><span class="sxs-lookup"><span data-stu-id="05878-220">hello address of hello blob.</span></span> <span data-ttu-id="05878-221">Si noti che è vivamente consigliato l'uso di HTTPS.</span><span class="sxs-lookup"><span data-stu-id="05878-221">Note that using HTTPS is highly recommended.</span></span> |
| <span data-ttu-id="05878-222">Versione dei servizi di archiviazione</span><span class="sxs-lookup"><span data-stu-id="05878-222">Storage services version</span></span> |`sv=2015-04-05` |<span data-ttu-id="05878-223">Per i servizi di archiviazione versione 2012-02-12 e versioni successive, questo parametro indica toouse versione hello.</span><span class="sxs-lookup"><span data-stu-id="05878-223">For storage services version 2012-02-12 and later, this parameter indicates hello version toouse.</span></span> |
| <span data-ttu-id="05878-224">Ora di inizio</span><span class="sxs-lookup"><span data-stu-id="05878-224">Start time</span></span> |`st=2015-04-29T22%3A18%3A26Z` |<span data-ttu-id="05878-225">Specificata nell'ora UTC.</span><span class="sxs-lookup"><span data-stu-id="05878-225">Specified in UTC time.</span></span> <span data-ttu-id="05878-226">Se si desidera hello SAS toobe valido immediatamente, omettere l'ora di inizio hello.</span><span class="sxs-lookup"><span data-stu-id="05878-226">If you want hello SAS toobe valid immediately, omit hello start time.</span></span> |
| <span data-ttu-id="05878-227">Scadenza</span><span class="sxs-lookup"><span data-stu-id="05878-227">Expiry time</span></span> |`se=2015-04-30T02%3A23%3A26Z` |<span data-ttu-id="05878-228">Specificata nell'ora UTC.</span><span class="sxs-lookup"><span data-stu-id="05878-228">Specified in UTC time.</span></span> |
| <span data-ttu-id="05878-229">Risorsa</span><span class="sxs-lookup"><span data-stu-id="05878-229">Resource</span></span> |`sr=b` |<span data-ttu-id="05878-230">risorsa Hello è un blob.</span><span class="sxs-lookup"><span data-stu-id="05878-230">hello resource is a blob.</span></span> |
| <span data-ttu-id="05878-231">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="05878-231">Permissions</span></span> |`sp=rw` |<span data-ttu-id="05878-232">autorizzazioni Hello concesse da hello SAS includono Read (r) e scrittura (w).</span><span class="sxs-lookup"><span data-stu-id="05878-232">hello permissions granted by hello SAS include Read (r) and Write (w).</span></span> |
| <span data-ttu-id="05878-233">Intervallo IP</span><span class="sxs-lookup"><span data-stu-id="05878-233">IP range</span></span> |`sip=168.1.5.60-168.1.5.70` |<span data-ttu-id="05878-234">Hello intervallo di indirizzi IP da cui verrà accettata una richiesta.</span><span class="sxs-lookup"><span data-stu-id="05878-234">hello range of IP addresses from which a request will be accepted.</span></span> |
| <span data-ttu-id="05878-235">Protocol</span><span class="sxs-lookup"><span data-stu-id="05878-235">Protocol</span></span> |`spr=https` |<span data-ttu-id="05878-236">Sono consentite solo richieste tramite HTTPS.</span><span class="sxs-lookup"><span data-stu-id="05878-236">Only requests using HTTPS are permitted.</span></span> |
| <span data-ttu-id="05878-237">Firma</span><span class="sxs-lookup"><span data-stu-id="05878-237">Signature</span></span> |`sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D` |<span data-ttu-id="05878-238">Utilizzare blob toohello di tooauthenticate accesso.</span><span class="sxs-lookup"><span data-stu-id="05878-238">Used tooauthenticate access toohello blob.</span></span> <span data-ttu-id="05878-239">firma di Hello è un HMAC calcolato su una stringa da firmare e una chiave utilizzando l'algoritmo SHA256 hello e quindi codificato con codifica Base64.</span><span class="sxs-lookup"><span data-stu-id="05878-239">hello signature is an HMAC computed over a string-to-sign and key using hello SHA256 algorithm, and then encoded using Base64 encoding.</span></span> |

### <a name="account-sas-uri-example"></a><span data-ttu-id="05878-240">Esempio di URI di firma di accesso condiviso dell'account</span><span class="sxs-lookup"><span data-stu-id="05878-240">Account SAS URI example</span></span>

<span data-ttu-id="05878-241">Di seguito è riportato un esempio di un account di firma di accesso condiviso che utilizza hello stessi parametri comuni sul token hello.</span><span class="sxs-lookup"><span data-stu-id="05878-241">Here is an example of an account SAS that uses hello same common parameters on hello token.</span></span> <span data-ttu-id="05878-242">Poiché questi parametri sono già stati illustrati in precedenza, non sono descritti qui.</span><span class="sxs-lookup"><span data-stu-id="05878-242">Since these parameters are described above, they are not described here.</span></span> <span data-ttu-id="05878-243">Solo i parametri di hello che sono specifici tooaccount che SAS sono descritti nella tabella hello riportato di seguito.</span><span class="sxs-lookup"><span data-stu-id="05878-243">Only hello parameters that are specific tooaccount SAS are described in hello table below.</span></span>

```
https://myaccount.blob.core.windows.net/?restype=service&comp=properties&sv=2015-04-05&ss=bf&srt=s&st=2015-04-29T22%3A18%3A26Z&se=2015-04-30T02%3A23%3A26Z&sr=b&sp=rw&sip=168.1.5.60-168.1.5.70&spr=https&sig=F%6GRVAZ5Cdj2Pw4tgU7IlSTkWgn7bUkkAg8P6HESXwmf%4B
```

| <span data-ttu-id="05878-244">Nome</span><span class="sxs-lookup"><span data-stu-id="05878-244">Name</span></span> | <span data-ttu-id="05878-245">Parte firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-245">SAS portion</span></span> | <span data-ttu-id="05878-246">Descrizione</span><span class="sxs-lookup"><span data-stu-id="05878-246">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="05878-247">URI della risorsa</span><span class="sxs-lookup"><span data-stu-id="05878-247">Resource URI</span></span> |`https://myaccount.blob.core.windows.net/?restype=service&comp=properties` |<span data-ttu-id="05878-248">Hello endpoint del servizio Blob, con i parametri per ottenere le proprietà del servizio (quando viene chiamato con GET) o impostare le proprietà del servizio (quando viene chiamato con SET).</span><span class="sxs-lookup"><span data-stu-id="05878-248">hello Blob service endpoint, with parameters for getting service properties (when called with GET) or setting service properties (when called with SET).</span></span> |
| <span data-ttu-id="05878-249">Services</span><span class="sxs-lookup"><span data-stu-id="05878-249">Services</span></span> |`ss=bf` |<span data-ttu-id="05878-250">si applica Hello SAS toohello Blob e servizi File</span><span class="sxs-lookup"><span data-stu-id="05878-250">hello SAS applies toohello Blob and File services</span></span> |
| <span data-ttu-id="05878-251">Tipi di risorse</span><span class="sxs-lookup"><span data-stu-id="05878-251">Resource types</span></span> |`srt=s` |<span data-ttu-id="05878-252">Hello SAS si applica a livello di tooservice operazioni.</span><span class="sxs-lookup"><span data-stu-id="05878-252">hello SAS applies tooservice-level operations.</span></span> |
| <span data-ttu-id="05878-253">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="05878-253">Permissions</span></span> |`sp=rw` |<span data-ttu-id="05878-254">le autorizzazioni di Hello concedono accesso tooread e le operazioni di scrittura.</span><span class="sxs-lookup"><span data-stu-id="05878-254">hello permissions grant access tooread and write operations.</span></span> |

<span data-ttu-id="05878-255">Dato che le autorizzazioni sono limitate toohello livello di servizio, operazioni accessibili con questa firma di accesso condiviso sono **Get Blob Service Properties** (lettura) e **Set Blob Service Properties** (scrittura).</span><span class="sxs-lookup"><span data-stu-id="05878-255">Given that permissions are restricted toohello service level, accessible operations with this SAS are **Get Blob Service Properties** (read) and **Set Blob Service Properties** (write).</span></span> <span data-ttu-id="05878-256">Tuttavia, con un URI di risorsa diverso, hello stesso token di firma di accesso condiviso potrebbe anche essere utilizzato toodelegate accesso troppo**Get Blob Service Stats** (lettura).</span><span class="sxs-lookup"><span data-stu-id="05878-256">However, with a different resource URI, hello same SAS token could also be used toodelegate access too**Get Blob Service Stats** (read).</span></span>

## <a name="controlling-a-sas-with-a-stored-access-policy"></a><span data-ttu-id="05878-257">Controllo di una firma di accesso condiviso con criteri di accesso archiviati</span><span class="sxs-lookup"><span data-stu-id="05878-257">Controlling a SAS with a stored access policy</span></span>
<span data-ttu-id="05878-258">Una firma di accesso condiviso può assumere una delle due forme seguenti:</span><span class="sxs-lookup"><span data-stu-id="05878-258">A shared access signature can take one of two forms:</span></span>

* <span data-ttu-id="05878-259">**Firma di accesso condiviso ad hoc:** quando si crea una firma di accesso condiviso ad hoc, l'ora di inizio hello, ora di scadenza e le autorizzazioni per hello SAS vengono specificate URI SAS hello (o implicite, in caso di hello in cui ora di inizio è omesso).</span><span class="sxs-lookup"><span data-stu-id="05878-259">**Ad hoc SAS:** When you create an ad hoc SAS, hello start time, expiry time, and permissions for hello SAS are all specified in hello SAS URI (or implied, in hello case where start time is omitted).</span></span> <span data-ttu-id="05878-260">È possibile creare questa firma di accesso condiviso come firma di accesso condiviso dell'account o del servizio.</span><span class="sxs-lookup"><span data-stu-id="05878-260">This type of SAS can be created as an account SAS or a service SAS.</span></span>
* <span data-ttu-id="05878-261">**Firma di accesso condiviso con criteri di accesso archiviati:** criteri di accesso archiviati è definito in un contenitore di risorse, un contenitore blob, tabella, coda o - condivisione file e può essere utilizzato toomanage vincoli per uno o più firme di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="05878-261">**SAS with stored access policy:** A stored access policy is defined on a resource container--a blob container, table, queue, or file share--and can be used toomanage constraints for one or more shared access signatures.</span></span> <span data-ttu-id="05878-262">Quando si associa una firma di accesso condiviso con criteri di accesso archiviati, hello SAS eredita i vincoli di hello - ora di inizio hello, ora di scadenza e le autorizzazioni, definite per i criteri di accesso archiviato hello.</span><span class="sxs-lookup"><span data-stu-id="05878-262">When you associate a SAS with a stored access policy, hello SAS inherits hello constraints--hello start time, expiry time, and permissions--defined for hello stored access policy.</span></span>

> [!NOTE]
> <span data-ttu-id="05878-263">Al momento, una firma di accesso condiviso dell'account deve essere una firma di accesso condiviso ad-hoc.</span><span class="sxs-lookup"><span data-stu-id="05878-263">Currently, an account SAS must be an ad hoc SAS.</span></span> <span data-ttu-id="05878-264">I criteri di accesso archiviati non sono ancora supportati per la firma di accesso condiviso dell'account.</span><span class="sxs-lookup"><span data-stu-id="05878-264">Stored access policies are not yet supported for account SAS.</span></span>

<span data-ttu-id="05878-265">Hello differenza tra hello due forme è importante per uno scenario di chiave: revoche di certificati.</span><span class="sxs-lookup"><span data-stu-id="05878-265">hello difference between hello two forms is important for one key scenario: revocation.</span></span> <span data-ttu-id="05878-266">Poiché un URI SAS è un URL, qualsiasi utente che consente di ottenere hello firma di accesso condiviso può essere utilizzato, indipendentemente dal fatto che ha originariamente creato.</span><span class="sxs-lookup"><span data-stu-id="05878-266">Because a SAS URI is a URL, anyone that obtains hello SAS can use it, regardless of who originally created it.</span></span> <span data-ttu-id="05878-267">Se una firma di accesso condiviso viene pubblicato, può essere utilizzato da chiunque in HelloWorld.</span><span class="sxs-lookup"><span data-stu-id="05878-267">If a SAS is published publicly, it can be used by anyone in hello world.</span></span> <span data-ttu-id="05878-268">Tooanyone una firma di accesso condiviso concede l'accesso tooresources numericamente, fino a quando non si verifica una delle quattro operazioni:</span><span class="sxs-lookup"><span data-stu-id="05878-268">A SAS grants access tooresources tooanyone possessing it until one of four things happens:</span></span>

1. <span data-ttu-id="05878-269">ora di scadenza Hello specificato su hello che SAS viene raggiunto.</span><span class="sxs-lookup"><span data-stu-id="05878-269">hello expiry time specified on hello SAS is reached.</span></span>
2. <span data-ttu-id="05878-270">ora di scadenza Hello specificato nel criterio di accesso archiviato hello hello che viene raggiunto SAS (se viene fatto riferimento a un criterio di accesso archiviato e se si specifica un'ora di scadenza) a cui fa riferimento.</span><span class="sxs-lookup"><span data-stu-id="05878-270">hello expiry time specified on hello stored access policy referenced by hello SAS is reached (if a stored access policy is referenced, and if it specifies an expiry time).</span></span> <span data-ttu-id="05878-271">Ciò può verificarsi perché l'intervallo di hello o perché è stato modificato i criteri di accesso di hello archiviata con un'ora di scadenza in hello precedente, che sono un modo toorevoke hello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-271">This can occur either because hello interval elapses, or because you've modified hello stored access policy with an expiry time in hello past, which is one way toorevoke hello SAS.</span></span>
3. <span data-ttu-id="05878-272">Hello archiviati i criteri di accesso a cui fa riferimento hello che SAS viene eliminato, ovvero hello toorevoke di un altro modo SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-272">hello stored access policy referenced by hello SAS is deleted, which is another way toorevoke hello SAS.</span></span> <span data-ttu-id="05878-273">Si noti che se si ricrea il criterio di accesso archiviato hello con esattamente hello stesso nome, SAS esistente tutti i token vengono nuovamente essere valido in base toohello autorizzazioni associate che Criteri di accesso archiviati (presupponendo che tale ora di scadenza hello nella firma di accesso condiviso non è stato passato hello).</span><span class="sxs-lookup"><span data-stu-id="05878-273">Note that if you recreate hello stored access policy with exactly hello same name, all existing SAS tokens will again be valid according toohello permissions associated with that stored access policy (assuming that hello expiry time on hello SAS has not passed).</span></span> <span data-ttu-id="05878-274">Se si sta prendendo in considerazione hello toorevoke SAS, essere toouse che un altro nome se si ricrea il criterio di accesso hello con un'ora di scadenza in hello future.</span><span class="sxs-lookup"><span data-stu-id="05878-274">If you are intending toorevoke hello SAS, be sure toouse a different name if you recreate hello access policy with an expiry time in hello future.</span></span>
4. <span data-ttu-id="05878-275">chiave dell'account che è stato utilizzato toocreate hello SAS Hello viene rigenerato.</span><span class="sxs-lookup"><span data-stu-id="05878-275">hello account key that was used toocreate hello SAS is regenerated.</span></span> <span data-ttu-id="05878-276">La rigenerazione di una chiave dell'account causerà tutti i componenti dell'applicazione utilizzando tale tooauthenticate toofail chiave fino a quando non verranno aggiornati toouse hello sia altri chiave dell'account appena rigenerata hello o la chiave di account valido.</span><span class="sxs-lookup"><span data-stu-id="05878-276">Regenerating an account key will cause all application components using that key toofail tooauthenticate until they're updated toouse either hello other valid account key or hello newly regenerated account key.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="05878-277">Un URI di firma di accesso condiviso è associato con firma di hello toocreate utilizzati chiave account hello e hello associati criteri di accesso archiviati (se presente).</span><span class="sxs-lookup"><span data-stu-id="05878-277">A shared access signature URI is associated with hello account key used toocreate hello signature, and hello associated stored access policy (if any).</span></span> <span data-ttu-id="05878-278">Se si specifica alcun criterio di accesso archiviati, hello solo modo toorevoke una firma di accesso condiviso è toochange hello account chiave.</span><span class="sxs-lookup"><span data-stu-id="05878-278">If no stored access policy is specified, hello only way toorevoke a shared access signature is toochange hello account key.</span></span>

## <a name="authenticating-from-a-client-application-with-a-sas"></a><span data-ttu-id="05878-279">Autenticazione da un'applicazione client con una firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-279">Authenticating from a client application with a SAS</span></span>
<span data-ttu-id="05878-280">Un client che è in possesso di una firma di accesso condiviso può utilizzare hello SAS tooauthenticate una richiesta per un account di archiviazione per il quale non dispongono di chiavi dell'account di hello.</span><span class="sxs-lookup"><span data-stu-id="05878-280">A client who is in possession of a SAS can use hello SAS tooauthenticate a request against a storage account for which they do not possess hello account keys.</span></span> <span data-ttu-id="05878-281">Una firma di accesso condiviso può essere incluso in una stringa di connessione o utilizzato direttamente dal costruttore appropriato hello o un metodo.</span><span class="sxs-lookup"><span data-stu-id="05878-281">A SAS can be included in a connection string, or used directly from hello appropriate constructor or method.</span></span>

### <a name="using-a-sas-in-a-connection-string"></a><span data-ttu-id="05878-282">Uso di una firma di accesso condiviso in una stringa di connessione</span><span class="sxs-lookup"><span data-stu-id="05878-282">Using a SAS in a connection string</span></span>
[!INCLUDE [storage-use-sas-in-connection-string-include](../../../includes/storage-use-sas-in-connection-string-include.md)]

### <a name="using-a-sas-in-a-constructor-or-method"></a><span data-ttu-id="05878-283">Uso di una firma di accesso condiviso in un costruttore o in un metodo</span><span class="sxs-lookup"><span data-stu-id="05878-283">Using a SAS in a constructor or method</span></span>
<span data-ttu-id="05878-284">Molti costruttori libreria client di archiviazione di Azure e overload offrono un parametro di firma di accesso condiviso, in modo che è possibile autenticare un servizio di toohello richiesta con una firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="05878-284">Several Azure Storage client library constructors and method overloads offer a SAS parameter, so that you can authenticate a request toohello service with a SAS.</span></span>

<span data-ttu-id="05878-285">Ad esempio, un URI SAS Ecco toocreate usato un blob in blocchi tooa riferimento.</span><span class="sxs-lookup"><span data-stu-id="05878-285">For example, here a SAS URI is used toocreate a reference tooa block blob.</span></span> <span data-ttu-id="05878-286">Hello SAS fornisce hello solo le credenziali necessarie per la richiesta di hello.</span><span class="sxs-lookup"><span data-stu-id="05878-286">hello SAS provides hello only credentials needed for hello request.</span></span> <span data-ttu-id="05878-287">riferimento di blob Hello blocco viene quindi usato per un'operazione di scrittura:</span><span class="sxs-lookup"><span data-stu-id="05878-287">hello block blob reference is then used for a write operation:</span></span>

```csharp
string sasUri = "https://storagesample.blob.core.windows.net/sample-container/" +
    "sampleBlob.txt?sv=2015-07-08&sr=b&sig=39Up9JzHkxhUIhFEjEH9594DJxe7w6cIRCg0V6lCGSo%3D" +
    "&se=2016-10-18T21%3A51%3A37Z&sp=rcw";

CloudBlockBlob blob = new CloudBlockBlob(new Uri(sasUri));

// Create operation: Upload a blob with hello specified name toohello container.
// If hello blob does not exist, it will be created. If it does exist, it will be overwritten.
try
{
    MemoryStream msWrite = new MemoryStream(Encoding.UTF8.GetBytes(blobContent));
    msWrite.Position = 0;
    using (msWrite)
    {
        await blob.UploadFromStreamAsync(msWrite);
    }

    Console.WriteLine("Create operation succeeded for SAS {0}", sasUri);
    Console.WriteLine();
}
catch (StorageException e)
{
    if (e.RequestInformation.HttpStatusCode == 403)
    {
        Console.WriteLine("Create operation failed for SAS {0}", sasUri);
        Console.WriteLine("Additional error information: " + e.Message);
        Console.WriteLine();
    }
    else
    {
        Console.WriteLine(e.Message);
        Console.ReadLine();
        throw;
    }
}

```

## <a name="best-practices-when-using-sas"></a><span data-ttu-id="05878-288">Procedure consigliate per l'uso di SAS</span><span class="sxs-lookup"><span data-stu-id="05878-288">Best practices when using SAS</span></span>
<span data-ttu-id="05878-289">Quando si usano firme di accesso condiviso nelle applicazioni, è necessario toobe considerare due potenziali rischi:</span><span class="sxs-lookup"><span data-stu-id="05878-289">When you use shared access signatures in your applications, you need toobe aware of two potential risks:</span></span>

* <span data-ttu-id="05878-290">In caso di diffusione di una firma di accesso condiviso, chiunque la ottiene può usarla e questo potrebbe compromettere l'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="05878-290">If a SAS is leaked, it can be used by anyone who obtains it, which can potentially compromise your storage account.</span></span>
* <span data-ttu-id="05878-291">Se una firma di accesso condiviso fornito tooa client applicazione scade e l'applicazione hello è Impossibile tooretrieve una nuova firma di accesso condiviso dal servizio, la funzionalità dell'applicazione hello può essere ostacolata.</span><span class="sxs-lookup"><span data-stu-id="05878-291">If a SAS provided tooa client application expires and hello application is unable tooretrieve a new SAS from your service, then hello application's functionality may be hindered.</span></span>

<span data-ttu-id="05878-292">salve le indicazioni seguenti per l'utilizzo di firme di accesso condiviso consente di ridurre tali rischi:</span><span class="sxs-lookup"><span data-stu-id="05878-292">hello following recommendations for using shared access signatures can help mitigate these risks:</span></span>

1. <span data-ttu-id="05878-293">**Utilizzare sempre HTTPS** toocreate o la distribuzione di una firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="05878-293">**Always use HTTPS** toocreate or distribute a SAS.</span></span> <span data-ttu-id="05878-294">Se una firma di accesso condiviso viene passato tramite HTTP e intercettato, un attacco di un attacco man-in-the-middle è in grado di tooread hello SAS e utilizzarlo come hello destinato potrebbe essere utente, potrebbe compromettere i dati sensibili o alla possibilità di danneggiamento dei dati da hello utente malintenzionato.</span><span class="sxs-lookup"><span data-stu-id="05878-294">If a SAS is passed over HTTP and intercepted, an attacker performing a man-in-the-middle attack is able tooread hello SAS and then use it just as hello intended user could have, potentially compromising sensitive data or allowing for data corruption by hello malicious user.</span></span>
2. <span data-ttu-id="05878-295">**Laddove possibile fare riferimento a criteri di accesso archiviati.**</span><span class="sxs-lookup"><span data-stu-id="05878-295">**Reference stored access policies where possible.**</span></span> <span data-ttu-id="05878-296">Archiviate consentono di criteri di accesso hello autorizzazioni toorevoke opzione senza chiavi dell'account di archiviazione tooregenerate hello.</span><span class="sxs-lookup"><span data-stu-id="05878-296">Stored access policies give you hello option toorevoke permissions without having tooregenerate hello storage account keys.</span></span> <span data-ttu-id="05878-297">Scadenza set di hello su questi notevolmente in hello (o futuri infinito) e assicurarsi che ha aggiornato regolarmente toomove più lontano in hello future.</span><span class="sxs-lookup"><span data-stu-id="05878-297">Set hello expiration on these very far in hello future (or infinite) and make sure it's regularly updated toomove it farther into hello future.</span></span>
3. <span data-ttu-id="05878-298">**Usare scadenze a breve termine per una firma di accesso condiviso ad hoc.**</span><span class="sxs-lookup"><span data-stu-id="05878-298">**Use near-term expiration times on an ad hoc SAS.**</span></span> <span data-ttu-id="05878-299">In questo modo, anche se una firma di accesso condiviso viene compromessa, è valida solo per un breve periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="05878-299">In this way, even if a SAS is compromised, it's valid only for a short time.</span></span> <span data-ttu-id="05878-300">Questo consiglio è particolarmente importante se non è possibile fare riferimento a criteri di accesso archiviati</span><span class="sxs-lookup"><span data-stu-id="05878-300">This practice is especially important if you cannot reference a stored access policy.</span></span> <span data-ttu-id="05878-301">Date di scadenza breve termine anche limitare hello di dati che possono essere scritti i blob tooa limitando hello ora disponibili tooupload tooit.</span><span class="sxs-lookup"><span data-stu-id="05878-301">Near-term expiration times also limit hello amount of data that can be written tooa blob by limiting hello time available tooupload tooit.</span></span>
4. <span data-ttu-id="05878-302">**Dispone di client rinnova automaticamente hello SAS, se necessario.**</span><span class="sxs-lookup"><span data-stu-id="05878-302">**Have clients automatically renew hello SAS if necessary.**</span></span> <span data-ttu-id="05878-303">I client devono rinnovare hello SAS anche prima della scadenza di hello, nel tempo tooallow ordine per i tentativi se il servizio di hello fornendo hello SAS è disponibile.</span><span class="sxs-lookup"><span data-stu-id="05878-303">Clients should renew hello SAS well before hello expiration, in order tooallow time for retries if hello service providing hello SAS is unavailable.</span></span> <span data-ttu-id="05878-304">Se condiviso deve toobe utilizzato per un numero ridotto di controllo immediato, le operazioni di breve durate che previsto toobe completata entro il periodo di scadenza hello e questo potrebbe essere necessario come hello che firma di accesso condiviso non è previsto toobe rinnovato.</span><span class="sxs-lookup"><span data-stu-id="05878-304">If your SAS is meant toobe used for a small number of immediate, short-lived operations that are expected toobe completed within hello expiration period, then this may be unnecessary as hello SAS is not expected toobe renewed.</span></span> <span data-ttu-id="05878-305">Tuttavia, se si dispone di client che effettua regolarmente le richieste tramite firma di accesso condiviso, quindi il possibilità hello di scadenza entra in gioco.</span><span class="sxs-lookup"><span data-stu-id="05878-305">However, if you have client that is routinely making requests via SAS, then hello possibility of expiration comes into play.</span></span> <span data-ttu-id="05878-306">Hello è importante considerare il toobalance hello necessità per hello SAS toobe breve durata (indicato in precedenza) con tooensure necessità hello che hello client richiede il rinnovo anticipata sufficiente (tooavoid interruzione a causa di rinnovo in scadenza precedente toosuccessful di toohello SAS).</span><span class="sxs-lookup"><span data-stu-id="05878-306">hello key consideration is toobalance hello need for hello SAS toobe short-lived (as previously stated) with hello need tooensure that hello client is requesting renewal early enough (tooavoid disruption due toohello SAS expiring prior toosuccessful renewal).</span></span>
5. <span data-ttu-id="05878-307">**Prestare attenzione all'ora di inizio della firma di accesso condiviso.**</span><span class="sxs-lookup"><span data-stu-id="05878-307">**Be careful with SAS start time.**</span></span> <span data-ttu-id="05878-308">Se si imposta ora di inizio hello per una firma di accesso condiviso troppo**ora**, quindi a causa di inclinazione tooclock (le differenze nell'ora corrente di macchine toodifferent), gli errori possono essere osservati saltuariamente per hello alcuni minuti prima.</span><span class="sxs-lookup"><span data-stu-id="05878-308">If you set hello start time for a SAS too**now**, then due tooclock skew (differences in current time according toodifferent machines), failures may be observed intermittently for hello first few minutes.</span></span> <span data-ttu-id="05878-309">In generale, impostare toobe ora di inizio hello almeno 15 minuti in hello precedente.</span><span class="sxs-lookup"><span data-stu-id="05878-309">In general, set hello start time toobe at least 15 minutes in hello past.</span></span> <span data-ttu-id="05878-310">Oppure evitare di impostarla, in modo che la firma diventi immediatamente valida in tutti i casi.</span><span class="sxs-lookup"><span data-stu-id="05878-310">Or, don't set it at all, which will make it valid immediately in all cases.</span></span> <span data-ttu-id="05878-311">Hello vale in genere anche - tempo tooexpiry tenere presente che è possibile osservare i minuti too15 del clock di inclinazione in entrambe le direzioni in qualsiasi richiesta.</span><span class="sxs-lookup"><span data-stu-id="05878-311">hello same generally applies tooexpiry time as well--remember that you may observe up too15 minutes of clock skew in either direction on any request.</span></span> <span data-ttu-id="05878-312">Per i client che usano un resto versione preliminare too2012-02-12, hello la durata massima per una firma di accesso condiviso che non fa riferimento a un criterio di accesso archiviati è di 1 ora e tutti i criteri che specifica a lungo termine rispetto che avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="05878-312">For clients using a REST version prior too2012-02-12, hello maximum duration for a SAS that does not reference a stored access policy is 1 hour, and any policies specifying longer term than that will fail.</span></span>
6. <span data-ttu-id="05878-313">**Essere specifico con toobe risorse hello accessibili.**</span><span class="sxs-lookup"><span data-stu-id="05878-313">**Be specific with hello resource toobe accessed.**</span></span> <span data-ttu-id="05878-314">Una procedura consigliata è un utente con privilegi minimi necessari di hello tooprovide.</span><span class="sxs-lookup"><span data-stu-id="05878-314">A security best practice is tooprovide a user with hello minimum required privileges.</span></span> <span data-ttu-id="05878-315">Se un utente deve solo accesso in lettura tooa singola entità, quindi concedere loro l'accesso in lettura toothat singola entità ed entità tooall accesso non in lettura/scrittura/eliminazione.</span><span class="sxs-lookup"><span data-stu-id="05878-315">If a user only needs read access tooa single entity, then grant them read access toothat single entity, and not read/write/delete access tooall entities.</span></span> <span data-ttu-id="05878-316">Ciò consente di ridurre i danni hello se una firma di accesso condiviso è compromesso perché hello SAS energetico nella mani hello di un utente malintenzionato.</span><span class="sxs-lookup"><span data-stu-id="05878-316">This also helps lessen hello damage if a SAS is compromised because hello SAS has less power in hello hands of an attacker.</span></span>
7. <span data-ttu-id="05878-317">**Comprendere che all'account verrà fatturato qualsiasi tipo di utilizzo, incluso quello effettuato con la firma di accesso condiviso.**</span><span class="sxs-lookup"><span data-stu-id="05878-317">**Understand that your account will be billed for any usage, including that done with SAS.**</span></span> <span data-ttu-id="05878-318">Se si fornisce l'accesso in scrittura tooa blob, un utente può scegliere tooupload un blob di 200GB.</span><span class="sxs-lookup"><span data-stu-id="05878-318">If you provide write access tooa blob, a user may choose tooupload a 200GB blob.</span></span> <span data-ttu-id="05878-319">Se è stato loro concesso anche l'accesso in lettura, si può scegliere toodownload sarà 10 volte, assunzione di 2 TB in uscita il costo per l'utente.</span><span class="sxs-lookup"><span data-stu-id="05878-319">If you've given them read access as well, they may choose toodownload it 10 times, incurring 2 TB in egress costs for you.</span></span> <span data-ttu-id="05878-320">Nuovamente, fornire autorizzazioni limitate toohelp ridurre possibili azioni di hello di utenti malintenzionati.</span><span class="sxs-lookup"><span data-stu-id="05878-320">Again, provide limited permissions toohelp mitigate hello potential actions of malicious users.</span></span> <span data-ttu-id="05878-321">Utilizzare questa minaccia di breve durata tooreduce SAS, ma tenere conto del clock sfasamento dell'ora di fine hello.</span><span class="sxs-lookup"><span data-stu-id="05878-321">Use short-lived SAS tooreduce this threat (but be mindful of clock skew on hello end time).</span></span>
8. <span data-ttu-id="05878-322">**Convalidare i dati scritti tramite la firma di accesso condiviso.**</span><span class="sxs-lookup"><span data-stu-id="05878-322">**Validate data written using SAS.**</span></span> <span data-ttu-id="05878-323">Quando un'applicazione client scrive un account di archiviazione di dati tooyour, tenere presente che si possono verificare problemi con i dati.</span><span class="sxs-lookup"><span data-stu-id="05878-323">When a client application writes data tooyour storage account, keep in mind that there can be problems with that data.</span></span> <span data-ttu-id="05878-324">Se l'applicazione richiede che i dati essere convalidati o autorizzati prima che venga toouse pronto, è consigliabile eseguire la convalida dopo la scrittura di dati hello e prima che venga utilizzato dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="05878-324">If your application requires that that data be validated or authorized before it is ready toouse, you should perform this validation after hello data is written and before it is used by your application.</span></span> <span data-ttu-id="05878-325">Questa procedura consente di proteggere anche rispetto a dati danneggiati o dannoso scritti tooyour account, un utente che ha acquisito correttamente hello SAS, o da un utente di sfruttare una firma di accesso condiviso persa.</span><span class="sxs-lookup"><span data-stu-id="05878-325">This practice also protects against corrupt or malicious data being written tooyour account, either by a user who properly acquired hello SAS, or by a user exploiting a leaked SAS.</span></span>
9. <span data-ttu-id="05878-326">**Non usare sempre SAS.**</span><span class="sxs-lookup"><span data-stu-id="05878-326">**Don't always use SAS.**</span></span> <span data-ttu-id="05878-327">Talvolta i rischi di hello associati a una specifica operazione su account di archiviazione hello superare vantaggi in termini di firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="05878-327">Sometimes hello risks associated with a particular operation against your storage account outweigh hello benefits of SAS.</span></span> <span data-ttu-id="05878-328">Per tali operazioni, creare un servizio di livello intermedio che scrive l'account di archiviazione tooyour dopo l'esecuzione di business di regola di convalida, l'autenticazione e controllo.</span><span class="sxs-lookup"><span data-stu-id="05878-328">For such operations, create a middle-tier service that writes tooyour storage account after performing business rule validation, authentication, and auditing.</span></span> <span data-ttu-id="05878-329">Inoltre, a volte risulta più semplice accesso toomanage in altri modi.</span><span class="sxs-lookup"><span data-stu-id="05878-329">Also, sometimes it's simpler toomanage access in other ways.</span></span> <span data-ttu-id="05878-330">Ad esempio, se si desidera toomake tutti i BLOB in un contenitore sia leggibile pubblicamente, è possibile apportare hello contenitore pubblico, anziché fornire un client tooevery di firma di accesso condiviso per l'accesso.</span><span class="sxs-lookup"><span data-stu-id="05878-330">For example, if you want toomake all blobs in a container publically readable, you can make hello container Public, rather than providing a SAS tooevery client for access.</span></span>
10. <span data-ttu-id="05878-331">**Usare archiviazione Analitica toomonitor l'applicazione.**</span><span class="sxs-lookup"><span data-stu-id="05878-331">**Use Storage Analytics toomonitor your application.**</span></span> <span data-ttu-id="05878-332">È possibile utilizzare per la registrazione e metrica tooobserve eventuali picchi errori di autenticazione a causa di un'interruzione di tooan la firma di accesso condiviso provider servizio o toohello accidentale rimozione dei criteri di accesso archiviati.</span><span class="sxs-lookup"><span data-stu-id="05878-332">You can use logging and metrics tooobserve any spike in authentication failures due tooan outage in your SAS provider service or toohello inadvertent removal of a stored access policy.</span></span> <span data-ttu-id="05878-333">Vedere hello [Blog del Team di archiviazione Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) per ulteriori informazioni.</span><span class="sxs-lookup"><span data-stu-id="05878-333">See hello [Azure Storage Team Blog](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/08/03/windows-azure-storage-logging-using-logs-to-track-storage-requests.aspx) for additional information.</span></span>

## <a name="sas-examples"></a><span data-ttu-id="05878-334">Esempi di firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-334">SAS examples</span></span>
<span data-ttu-id="05878-335">Di seguito sono riportati alcuni esempi di entrambi i tipi di firma di accesso condiviso, dell'account e del servizio.</span><span class="sxs-lookup"><span data-stu-id="05878-335">Below are some examples of both types of shared access signatures, account SAS and service SAS.</span></span>

<span data-ttu-id="05878-336">toorun questi esempi in c#, è necessario hello tooreference seguenti pacchetti NuGet nel progetto:</span><span class="sxs-lookup"><span data-stu-id="05878-336">toorun these C# examples, you need tooreference hello following NuGet packages in your project:</span></span>

* <span data-ttu-id="05878-337">[Libreria Client di archiviazione Azure per .NET](http://www.nuget.org/packages/WindowsAzure.Storage), versione 6. x o versioni successive (toouse account SA).</span><span class="sxs-lookup"><span data-stu-id="05878-337">[Azure Storage Client Library for .NET](http://www.nuget.org/packages/WindowsAzure.Storage), version 6.x or later (toouse account SAS).</span></span>
* [<span data-ttu-id="05878-338">Gestione configurazione di Azure</span><span class="sxs-lookup"><span data-stu-id="05878-338">Azure Configuration Manager</span></span>](http://www.nuget.org/packages/Microsoft.WindowsAzure.ConfigurationManager)

<span data-ttu-id="05878-339">Per ulteriori esempi che illustrano come toocreate e verificare una firma di accesso condiviso, vedere [Azure esempi di codice per l'archiviazione](https://azure.microsoft.com/documentation/samples/?service=storage).</span><span class="sxs-lookup"><span data-stu-id="05878-339">For additional examples that show how toocreate and test a SAS, see [Azure Code Samples for Storage](https://azure.microsoft.com/documentation/samples/?service=storage).</span></span>

### <a name="example-create-and-use-an-account-sas"></a><span data-ttu-id="05878-340">Esempio: Creare e usare una firma di accesso condiviso dell'account</span><span class="sxs-lookup"><span data-stu-id="05878-340">Example: Create and use an account SAS</span></span>
<span data-ttu-id="05878-341">esempio di codice seguente Hello crea un account di firma di accesso condiviso valido per servizi File e hello Blob e fornisce hello autorizzazioni client lettura, scrittura ed elencare le autorizzazioni tooaccess a livello di servizio API.</span><span class="sxs-lookup"><span data-stu-id="05878-341">hello following code example creates an account SAS that is valid for hello Blob and File services, and gives hello client permissions read, write, and list permissions tooaccess service-level APIs.</span></span> <span data-ttu-id="05878-342">account Hello SAS limita tooHTTPS protocollo hello, in modo hello richiesta deve essere effettuata con HTTPS.</span><span class="sxs-lookup"><span data-stu-id="05878-342">hello account SAS restricts hello protocol tooHTTPS, so hello request must be made with HTTPS.</span></span>

```csharp
static string GetAccountSASToken()
{
    // toocreate hello account SAS, you need toouse your shared key credentials. Modify for your account.
    const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
    CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);

    // Create a new access policy for hello account.
    SharedAccessAccountPolicy policy = new SharedAccessAccountPolicy()
        {
            Permissions = SharedAccessAccountPermissions.Read | SharedAccessAccountPermissions.Write | SharedAccessAccountPermissions.List,
            Services = SharedAccessAccountServices.Blob | SharedAccessAccountServices.File,
            ResourceTypes = SharedAccessAccountResourceTypes.Service,
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Protocols = SharedAccessProtocol.HttpsOnly
        };

    // Return hello SAS token.
    return storageAccount.GetSharedAccessSignature(policy);
}
```

<span data-ttu-id="05878-343">toouse hello account SAS tooaccess a livello di servizio API per il servizio Blob hello, costruire un oggetto client Blob utilizzando hello SAS e hello endpoint di archiviazione Blob dell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="05878-343">toouse hello account SAS tooaccess service-level APIs for hello Blob service, construct a Blob client object using hello SAS and hello Blob storage endpoint for your storage account.</span></span>

```csharp
static void UseAccountSAS(string sasToken)
{
    // Create new storage credentials using hello SAS token.
    StorageCredentials accountSAS = new StorageCredentials(sasToken);
    // Use these credentials and hello account name toocreate a Blob service client.
    CloudStorageAccount accountWithSAS = new CloudStorageAccount(accountSAS, "account-name", endpointSuffix: null, useHttps: true);
    CloudBlobClient blobClientWithSAS = accountWithSAS.CreateCloudBlobClient();

    // Now set hello service properties for hello Blob client created with hello SAS.
    blobClientWithSAS.SetServiceProperties(new ServiceProperties()
    {
        HourMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        MinuteMetrics = new MetricsProperties()
        {
            MetricsLevel = MetricsLevel.ServiceAndApi,
            RetentionDays = 7,
            Version = "1.0"
        },
        Logging = new LoggingProperties()
        {
            LoggingOperations = LoggingOperations.All,
            RetentionDays = 14,
            Version = "1.0"
        }
    });

    // hello permissions granted by hello account SAS also permit you tooretrieve service properties.
    ServiceProperties serviceProperties = blobClientWithSAS.GetServiceProperties();
    Console.WriteLine(serviceProperties.HourMetrics.MetricsLevel);
    Console.WriteLine(serviceProperties.HourMetrics.RetentionDays);
    Console.WriteLine(serviceProperties.HourMetrics.Version);
}
```

### <a name="example-create-a-stored-access-policy"></a><span data-ttu-id="05878-344">Esempio: Creare criteri di accesso archiviati</span><span class="sxs-lookup"><span data-stu-id="05878-344">Example: Create a stored access policy</span></span>
<span data-ttu-id="05878-345">Hello codice seguente crea un criterio di accesso archiviati in un contenitore.</span><span class="sxs-lookup"><span data-stu-id="05878-345">hello following code creates a stored access policy on a container.</span></span> <span data-ttu-id="05878-346">È possibile utilizzare i vincoli toospecify hello accesso dei criteri per un servizio di firma di accesso condiviso nel contenitore hello o nei relativi BLOB.</span><span class="sxs-lookup"><span data-stu-id="05878-346">You can use hello access policy toospecify constraints for a service SAS on hello container or its blobs.</span></span>

```csharp
private static async Task CreateSharedAccessPolicyAsync(CloudBlobContainer container, string policyName)
{
    // Create a new shared access policy and define its constraints.
    // hello access policy provides create, write, read, list, and delete permissions.
    SharedAccessBlobPolicy sharedPolicy = new SharedAccessBlobPolicy()
    {
        // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
        // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
        SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
        Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.List |
            SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create | SharedAccessBlobPermissions.Delete
    };

    // Get hello container's existing permissions.
    BlobContainerPermissions permissions = await container.GetPermissionsAsync();

    // Add hello new policy toohello container's permissions, and set hello container's permissions.
    permissions.SharedAccessPolicies.Add(policyName, sharedPolicy);
    await container.SetPermissionsAsync(permissions);
}
```

### <a name="example-create-a-service-sas-on-a-container"></a><span data-ttu-id="05878-347">Esempio: Creare una firma di accesso condiviso del servizio su un contenitore</span><span class="sxs-lookup"><span data-stu-id="05878-347">Example: Create a service SAS on a container</span></span>
<span data-ttu-id="05878-348">Hello di codice seguente crea una firma di accesso condiviso in un contenitore.</span><span class="sxs-lookup"><span data-stu-id="05878-348">hello following code creates a SAS on a container.</span></span> <span data-ttu-id="05878-349">Se viene specificato il nome di hello di un criterio di accesso archiviato esistente, tale criterio è associato a hello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-349">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="05878-350">Se non viene fornito alcun criterio di accesso archiviati, codice hello crea una firma di accesso condiviso ad hoc nel contenitore hello.</span><span class="sxs-lookup"><span data-stu-id="05878-350">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello container.</span></span>

```csharp
private static string GetContainerSasUri(CloudBlobContainer container, string storedPolicyName = null)
{
    string sasContainerToken;

    // If no stored policy is specified, create a new access policy and define its constraints.
    if (storedPolicyName == null)
    {
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocPolicy = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.List
        };

        // Generate hello shared access signature on hello container, setting hello constraints directly on hello signature.
        sasContainerToken = container.GetSharedAccessSignature(adHocPolicy, null);

        Console.WriteLine("SAS for blob container (ad hoc): {0}", sasContainerToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello container. In this case, all of hello constraints for the
        // shared access signature are specified on hello stored access policy, which is provided by name.
        // It is also possible toospecify some constraints on an ad-hoc SAS and others on hello stored access policy.
        sasContainerToken = container.GetSharedAccessSignature(null, storedPolicyName);

        Console.WriteLine("SAS for blob container (stored access policy): {0}", sasContainerToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return container.Uri + sasContainerToken;
}
```

### <a name="example-create-a-service-sas-on-a-blob"></a><span data-ttu-id="05878-351">Esempio: Creare una firma di accesso condiviso del servizio su un BLOB</span><span class="sxs-lookup"><span data-stu-id="05878-351">Example: Create a service SAS on a blob</span></span>
<span data-ttu-id="05878-352">Hello di codice seguente crea una firma di accesso condiviso in un blob.</span><span class="sxs-lookup"><span data-stu-id="05878-352">hello following code creates a SAS on a blob.</span></span> <span data-ttu-id="05878-353">Se viene specificato il nome di hello di un criterio di accesso archiviato esistente, tale criterio è associato a hello SAS.</span><span class="sxs-lookup"><span data-stu-id="05878-353">If hello name of an existing stored access policy is provided, that policy is associated with hello SAS.</span></span> <span data-ttu-id="05878-354">Se non viene fornito alcun criterio di accesso archiviati, codice hello crea una firma di accesso condiviso ad hoc su blob hello.</span><span class="sxs-lookup"><span data-stu-id="05878-354">If no stored access policy is provided, then hello code creates an ad-hoc SAS on hello blob.</span></span>

```csharp
private static string GetBlobSasUri(CloudBlobContainer container, string blobName, string policyName = null)
{
    string sasBlobToken;

    // Get a reference tooa blob within hello container.
    // Note that hello blob may not exist yet, but a SAS can still be created for it.
    CloudBlockBlob blob = container.GetBlockBlobReference(blobName);

    if (policyName == null)
    {
        // Create a new access policy and define its constraints.
        // Note that hello SharedAccessBlobPolicy class is used both toodefine hello parameters of an ad-hoc SAS, and
        // tooconstruct a shared access policy that is saved toohello container's shared access policies.
        SharedAccessBlobPolicy adHocSAS = new SharedAccessBlobPolicy()
        {
            // When hello start time for hello SAS is omitted, hello start time is assumed toobe hello time when hello storage service receives hello request.
            // Omitting hello start time for a SAS that is effective immediately helps tooavoid clock skew.
            SharedAccessExpiryTime = DateTime.UtcNow.AddHours(24),
            Permissions = SharedAccessBlobPermissions.Read | SharedAccessBlobPermissions.Write | SharedAccessBlobPermissions.Create
        };

        // Generate hello shared access signature on hello blob, setting hello constraints directly on hello signature.
        sasBlobToken = blob.GetSharedAccessSignature(adHocSAS);

        Console.WriteLine("SAS for blob (ad hoc): {0}", sasBlobToken);
        Console.WriteLine();
    }
    else
    {
        // Generate hello shared access signature on hello blob. In this case, all of hello constraints for the
        // shared access signature are specified on hello container's stored access policy.
        sasBlobToken = blob.GetSharedAccessSignature(null, policyName);

        Console.WriteLine("SAS for blob (stored access policy): {0}", sasBlobToken);
        Console.WriteLine();
    }

    // Return hello URI string for hello container, including hello SAS token.
    return blob.Uri + sasBlobToken;
}
```

## <a name="conclusion"></a><span data-ttu-id="05878-355">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="05878-355">Conclusion</span></span>
<span data-ttu-id="05878-356">Firme di accesso condiviso sono utili per fornire autorizzazioni limitate tooclients di account di archiviazione tooyour che non dovrebbero essere chiave dell'account hello.</span><span class="sxs-lookup"><span data-stu-id="05878-356">Shared access signatures are useful for providing limited permissions tooyour storage account tooclients that should not have hello account key.</span></span> <span data-ttu-id="05878-357">Di conseguenza, sono una parte essenziale del modello di sicurezza hello per le applicazioni che utilizzano l'archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="05878-357">As such, they are a vital part of hello security model for any application using Azure Storage.</span></span> <span data-ttu-id="05878-358">Se si seguono consigliate hello elencate di seguito, è possibile utilizzare una maggiore flessibilità tooprovide SAS di accesso tooresources nell'account di archiviazione, senza compromettere la sicurezza dell'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="05878-358">If you follow hello best practices listed here, you can use SAS tooprovide greater flexibility of access tooresources in your storage account, without compromising hello security of your application.</span></span>

## <a name="next-steps"></a><span data-ttu-id="05878-359">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="05878-359">Next Steps</span></span>
* [<span data-ttu-id="05878-360">Gestire BLOB e accesso in lettura anonimo toocontainers</span><span class="sxs-lookup"><span data-stu-id="05878-360">Manage anonymous read access toocontainers and blobs</span></span>](../blobs/storage-manage-access-to-resources.md)
* [<span data-ttu-id="05878-361">Delega dell'accesso con una firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="05878-361">Delegating Access with a Shared Access Signature</span></span>](http://msdn.microsoft.com/library/azure/ee395415.aspx)
* [<span data-ttu-id="05878-362">Introduzione alla firma di accesso condiviso per tabelle e code</span><span class="sxs-lookup"><span data-stu-id="05878-362">Introducing Table and Queue SAS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/06/12/introducing-table-sas-shared-access-signature-queue-sas-and-update-to-blob-sas.aspx)
