<span data-ttu-id="b7a88-101">In questo passaggio si testa il listener del gruppo di disponibilità usando un'applicazione client in esecuzione nella stessa rete.</span><span class="sxs-lookup"><span data-stu-id="b7a88-101">In this step, you test the availability group listener by using a client application that's running on the same network.</span></span>

<span data-ttu-id="b7a88-102">Questi sono i requisiti per la connettività client:</span><span class="sxs-lookup"><span data-stu-id="b7a88-102">Client connectivity has the following requirements:</span></span>

* <span data-ttu-id="b7a88-103">Le connessioni client al listener devono provenire da computer che si trovano in un servizio cloud diverso da quello che ospita le repliche di disponibilità AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="b7a88-103">Client connections to the listener must come from machines that reside in a different cloud service than the one that hosts the Always On availability replicas.</span></span>
* <span data-ttu-id="b7a88-104">Se le repliche AlwaysOn si trovano in subnet diverse, i client devono specificare *MultisubnetFailover=True* nella stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="b7a88-104">If the Always On replicas are in different subnets, clients must specify *MultisubnetFailover=True* in the connection string.</span></span> <span data-ttu-id="b7a88-105">Questa condizione comporta l'esecuzione di tentativi di connessione paralleli alle repliche nelle diverse subnet.</span><span class="sxs-lookup"><span data-stu-id="b7a88-105">This condition results in parallel connection attempts to replicas in the various subnets.</span></span> <span data-ttu-id="b7a88-106">Questo scenario include la distribuzione di un gruppo di disponibilità AlwaysOn tra più aree.</span><span class="sxs-lookup"><span data-stu-id="b7a88-106">This scenario includes a cross-region Always On availability group deployment.</span></span>

<span data-ttu-id="b7a88-107">È ad esempio possibile connettersi al listener da una delle macchine virtuali nella stessa rete virtuale di Azure (ma non quello che ospita una replica).</span><span class="sxs-lookup"><span data-stu-id="b7a88-107">One example is to connect to the listener from one of the VMs in the same Azure virtual network (but not one that hosts a replica).</span></span> <span data-ttu-id="b7a88-108">Un modo semplice per completare questo test consiste nel provare a connettere SQL Server Management Studio al listener del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="b7a88-108">An easy way to complete this test is to try to connect SQL Server Management Studio to the availability group listener.</span></span> <span data-ttu-id="b7a88-109">Un altro metodo semplice consiste nell'eseguire [SQLCMD.exe](https://technet.microsoft.com/library/ms162773.aspx) come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="b7a88-109">Another simple method is to run [SQLCMD.exe](https://technet.microsoft.com/library/ms162773.aspx), as follows:</span></span>

    sqlcmd -S "<ListenerName>,<EndpointPort>" -d "<DatabaseName>" -Q "select @@servername, db_name()" -l 15

> [!NOTE]
> <span data-ttu-id="b7a88-110">Se il valore EndpointPort è *1433*, non è necessario specificarlo nella chiamata.</span><span class="sxs-lookup"><span data-stu-id="b7a88-110">If the EndpointPort value is *1433*, you are not required to specify it in the call.</span></span> <span data-ttu-id="b7a88-111">La chiamata precedente presuppone inoltre che il computer client sia aggiunto allo stesso dominio e che al chiamante siano state concesse autorizzazioni per il database tramite l'autenticazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="b7a88-111">The previous call also assumes that the client machine is joined to the same domain and that the caller has been granted permissions on the database by using Windows authentication.</span></span>
> 
> 

<span data-ttu-id="b7a88-112">Durante il test del listener, eseguire il failover del gruppo di disponibilità per assicurarsi che i client possano connettersi al listener attraverso i failover.</span><span class="sxs-lookup"><span data-stu-id="b7a88-112">When you test the listener, be sure to fail over the availability group to make sure that clients can connect to the listener across failovers.</span></span>

