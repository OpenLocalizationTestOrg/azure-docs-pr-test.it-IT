---
title: Aumentare o ridurre le istanze del cluster di Service Fabric | Documentazione Microsoft
description: "Aumentare o ridurre le istanze di un cluster di Service Fabric per rispondere alle esigenze impostando le regole di ridimensionamento automatico per ogni tipo di nodo o set di scalabilità di macchine virtuali. Aggiungere o rimuovere nodi in un cluster di Service Fabric"
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: 
ms.assetid: aeb76f63-7303-4753-9c64-46146340b83d
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/22/2017
ms.author: chackdan
ms.openlocfilehash: 32d8fca81c20e77db4ed3aae05d017ccc2ce1be3
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="scale-a-service-fabric-cluster-in-or-out-using-auto-scale-rules"></a><span data-ttu-id="2379e-104">Aumentare o ridurre le istanze del cluster di Service Fabric con le regole di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="2379e-104">Scale a Service Fabric cluster in or out using auto-scale rules</span></span>
<span data-ttu-id="2379e-105">I set di scalabilità di macchine virtuali sono una risorsa di calcolo di Azure che è possibile usare per distribuire e gestire una raccolta di macchine virtuali come set.</span><span class="sxs-lookup"><span data-stu-id="2379e-105">Virtual machine scale sets are an Azure compute resource that you can use to deploy and manage a collection of virtual machines as a set.</span></span> <span data-ttu-id="2379e-106">Ogni tipo di nodo definito in un cluster di Service Fabric viene configurato come set di scalabilità di macchine virtuali distinto.</span><span class="sxs-lookup"><span data-stu-id="2379e-106">Every node type that is defined in a Service Fabric cluster is set up as a separate Virtual Machine scale set.</span></span> <span data-ttu-id="2379e-107">Ogni tipo di nodo può quindi essere aumentato o ridotto in modo indipendente, avere diversi set di porte aperte e avere metriche per la capacità diverse.</span><span class="sxs-lookup"><span data-stu-id="2379e-107">Each node type can then be scaled in or out independently, have different sets of ports open, and can have different capacity metrics.</span></span> <span data-ttu-id="2379e-108">Per altre informazioni, vedere il documento sui [tipi di nodo di Service Fabric](service-fabric-cluster-nodetypes.md) .</span><span class="sxs-lookup"><span data-stu-id="2379e-108">Read more about it in the [Service Fabric nodetypes](service-fabric-cluster-nodetypes.md) document.</span></span> <span data-ttu-id="2379e-109">Poiché i tipi di nodi di Service Fabric nel cluster sono costituiti da set di scalabilità di macchine virtuali nel back-end, è necessario configurare regole di ridimensionamento automatico per ogni tipo di nodo o set di scalabilità di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="2379e-109">Since the Service Fabric node types in your cluster are made of Virtual Machine scale sets at the backend, you need to set up auto-scale rules for each node type/Virtual Machine scale set.</span></span>

> [!NOTE]
> <span data-ttu-id="2379e-110">È necessario che nella sottoscrizione sia incluso un numero di core sufficienti per aggiungere le nuove VM che costituiranno il cluster.</span><span class="sxs-lookup"><span data-stu-id="2379e-110">Your subscription must have enough cores to add the new VMs that make up this cluster.</span></span> <span data-ttu-id="2379e-111">Non esiste attualmente una funzionalità di convalida del modello quindi, se viene raggiunto uno dei limiti della quota, verrà visualizzato un errore in fase di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="2379e-111">There is no model validation currently, so you get a deployment time failure, if any of the quota limits are hit.</span></span>
> 
> 

## <a name="choose-the-node-typevirtual-machine-scale-set-to-scale"></a><span data-ttu-id="2379e-112">Scegliere il tipo di nodo o il set di scalabilità di macchine virtuali da ridimensionare</span><span class="sxs-lookup"><span data-stu-id="2379e-112">Choose the node type/Virtual Machine scale set to scale</span></span>
<span data-ttu-id="2379e-113">Attualmente non è possibile specificare le regole di ridimensionamento automatico per i set di scalabilità di macchine virtuali tramite il portale, quindi si userà Azure PowerShell 1.0 o versione successiva per elencare i tipi di nodo e aggiungervi quindi le regole di ridimensionamento automatico.</span><span class="sxs-lookup"><span data-stu-id="2379e-113">Currently, you are not able to specify the auto-scale rules for Virtual Machine scale sets using the portal, so let us use Azure PowerShell (1.0+) to list the node types and then add auto-scale rules to them.</span></span>

<span data-ttu-id="2379e-114">Per ottenere l'elenco dei set di scalabilità di macchine virtuali che costituiscono il cluster, eseguire i cmdlet seguenti:</span><span class="sxs-lookup"><span data-stu-id="2379e-114">To get the list of Virtual Machine scale set that make up your cluster, run the following cmdlets:</span></span>

```powershell
Get-AzureRmResource -ResourceGroupName <RGname> -ResourceType Microsoft.Compute/VirtualMachineScaleSets

Get-AzureRmVmss -ResourceGroupName <RGname> -VMScaleSetName <Virtual Machine scale set name>
```

## <a name="set-auto-scale-rules-for-the-node-typevirtual-machine-scale-set"></a><span data-ttu-id="2379e-115">Impostare le regole di ridimensionamento automatico per il tipo di nodo o il set di scalabilità di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="2379e-115">Set auto-scale rules for the node type/Virtual Machine scale set</span></span>
<span data-ttu-id="2379e-116">Se nel cluster sono disponibili più tipi di nodi, è necessario ripetere questa operazione per ogni tipo di nodo o set di scalabilità di macchine virtuali per cui si vuole aumentare o ridurre le istanze.</span><span class="sxs-lookup"><span data-stu-id="2379e-116">If your cluster has multiple node types, then repeat this for each node types/Virtual Machine scale sets that you want to scale (in or out).</span></span> <span data-ttu-id="2379e-117">Considerare il numero di nodi che essere disponibili prima di configurare il ridimensionamento automatico.</span><span class="sxs-lookup"><span data-stu-id="2379e-117">Take into account the number of nodes that you must have before you set up auto-scaling.</span></span> <span data-ttu-id="2379e-118">Il numero minimo di nodi necessari per il tipo di nodo primario è determinato dal livello di affidabilità scelto.</span><span class="sxs-lookup"><span data-stu-id="2379e-118">The minimum number of nodes that you must have for the primary node type is driven by the reliability level you have chosen.</span></span> <span data-ttu-id="2379e-119">Per altre informazioni, vedere la sezione relativa ai [livelli di affidabilità](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="2379e-119">Read more about [reliability levels](service-fabric-cluster-capacity.md).</span></span>

> [!NOTE]
> <span data-ttu-id="2379e-120">La riduzione delle istanze del tipo di nodo primario, impostando un valore inferiore al numero minimo, renderà il cluster instabile o lo arresterà.</span><span class="sxs-lookup"><span data-stu-id="2379e-120">Scaling down the primary node type to less than the minimum number make the cluster unstable or bring it down.</span></span> <span data-ttu-id="2379e-121">In questo caso, è possibile che si verifichi una perdita di dati per le applicazioni e per i servizi di sistema.</span><span class="sxs-lookup"><span data-stu-id="2379e-121">This could result in data loss for your applications and for the system services.</span></span>
> 
> 

<span data-ttu-id="2379e-122">Attualmente la funzionalità di ridimensionamento automatico non è determinata dai carichi che le applicazioni segnalano a Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="2379e-122">Currently the auto-scale feature is not driven by the loads that your applications may be reporting to Service Fabric.</span></span> <span data-ttu-id="2379e-123">Al momento. il ridimensionamento automatico che si ottiene dipende esclusivamente dai contatori delle prestazioni generati da ognuna delle istanze del set di scalabilità di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="2379e-123">So at this time the auto-scale you get is purely driven by the performance counters that are emitted by each of the Virtual Machine scale set instances.</span></span>  

<span data-ttu-id="2379e-124">Seguire le istruzioni [per configurare il ridimensionamento automatico per ogni set di scalabilità di macchine virtuali](../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md).</span><span class="sxs-lookup"><span data-stu-id="2379e-124">Follow these instructions [to set up auto-scale for each Virtual Machine scale set](../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md).</span></span>

> [!NOTE]
> <span data-ttu-id="2379e-125">In uno scenario di riduzione delle istanze, a meno che il tipo di nodo non abbia un livello di durabilità Gold o Silver, sarà necessario chiamare il cmdlet [Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/azure/mt125993.aspx) con il nome del nodo appropriato.</span><span class="sxs-lookup"><span data-stu-id="2379e-125">In a scale down scenario, unless your node type has a durability level of Gold or Silver you need to call the [Remove-ServiceFabricNodeState cmdlet](https://msdn.microsoft.com/library/azure/mt125993.aspx) with the appropriate node name.</span></span>
> 
> 

## <a name="manually-add-vms-to-a-node-typevirtual-machine-scale-set"></a><span data-ttu-id="2379e-126">Aggiungere manualmente le VM a un tipo di nodo o set di scalabilità di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="2379e-126">Manually add VMs to a node type/Virtual Machine scale set</span></span>
<span data-ttu-id="2379e-127">Seguire l'esempio o le istruzioni nella [raccolta modelli di avvio rapido](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) per modificare il numero di VM in ogni Nodetype.</span><span class="sxs-lookup"><span data-stu-id="2379e-127">Follow the sample/instructions in the [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) to change the number of VMs in each Nodetype.</span></span> 

> [!NOTE]
> <span data-ttu-id="2379e-128">L'aggiunta di VM può richiedere tempo e non è un processo istantaneo.</span><span class="sxs-lookup"><span data-stu-id="2379e-128">Adding of VMs takes time, so do not expect the additions to be instantaneous.</span></span> <span data-ttu-id="2379e-129">È pertanto consigliabile aggiungere capacità in anticipo, così da avere oltre 10 minuti a disposizione prima che la capacità della VM sia disponibile per collocare le repliche o istanze del servizio.</span><span class="sxs-lookup"><span data-stu-id="2379e-129">So plan to add capacity well in time, to allow for over 10 minutes before the VM capacity is available for the replicas/ service instances to get placed.</span></span>
> 
> 

## <a name="manually-remove-vms-from-the-primary-node-typevirtual-machine-scale-set"></a><span data-ttu-id="2379e-130">Rimuovere manualmente le VM dal tipo di nodo primario o set di scalabilità di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="2379e-130">Manually remove VMs from the primary node type/Virtual Machine scale set</span></span>
> [!NOTE]
> <span data-ttu-id="2379e-131">I servizi di sistema Service Fabric vengono eseguiti nel tipo di nodo primario del cluster.</span><span class="sxs-lookup"><span data-stu-id="2379e-131">The service fabric system services run in the Primary node type in your cluster.</span></span> <span data-ttu-id="2379e-132">Non arrestare o ridurre il numero di istanze in questo tipo di nodo a un valore inferiore a quello garantito dal livello di affidabilità.</span><span class="sxs-lookup"><span data-stu-id="2379e-132">So should never shut down or scale down the number of instances in that node types less than what the reliability tier warrants.</span></span> <span data-ttu-id="2379e-133">Fare riferimento ai [dettagli sui livelli di affidabilità](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="2379e-133">Refer to [the details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span> 
> 
> 

<span data-ttu-id="2379e-134">È necessario eseguire i seguenti passaggi su un'istanza di VM alla volta.</span><span class="sxs-lookup"><span data-stu-id="2379e-134">You need to execute the following steps one VM instance at a time.</span></span> <span data-ttu-id="2379e-135">Ciò consente l'arresto normale dei servizi di sistema e dei servizi con stato nella VM che viene rimossa e la creazione di nuove repliche in altri nodi.</span><span class="sxs-lookup"><span data-stu-id="2379e-135">This allows for the system services (and your stateful services) to be shut down gracefully on the VM instance you are removing and new replicas created on other nodes.</span></span>

1. <span data-ttu-id="2379e-136">Eseguire [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) usando 'RemoveNode' per disabilitare il nodo da rimuovere, ovvero l'istanza superiore di quel tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="2379e-136">Run [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) with intent ‘RemoveNode’ to disable the node you’re going to remove (the highest instance in that node type).</span></span>
2. <span data-ttu-id="2379e-137">Eseguire [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) per verificare che il nodo sia stato effettivamente disabilitato.</span><span class="sxs-lookup"><span data-stu-id="2379e-137">Run [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) to make sure that the node has indeed transitioned to disabled.</span></span> <span data-ttu-id="2379e-138">In caso contrario, attendere la disabilitazione del nodo.</span><span class="sxs-lookup"><span data-stu-id="2379e-138">If not, wait until the node is disabled.</span></span> <span data-ttu-id="2379e-139">Non è possibile accelerare questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="2379e-139">You cannot hurry this step.</span></span>
3. <span data-ttu-id="2379e-140">Seguire l'esempio o le istruzioni nella [raccolta modelli di avvio rapido](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) per modificare di un'unità il numero di VM in tale Nodetype.</span><span class="sxs-lookup"><span data-stu-id="2379e-140">Follow the sample/instructions in the [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) to change the number of VMs by one in that Nodetype.</span></span> <span data-ttu-id="2379e-141">L'istanza rimossa è l'istanza di macchina virtuale superiore.</span><span class="sxs-lookup"><span data-stu-id="2379e-141">The instance removed is the highest VM instance.</span></span> 
4. <span data-ttu-id="2379e-142">Ripetere le fasi da 1 a 3 come necessario, ma non ridurre il numero di istanze nel nodo primario a un valore inferiore a quello garantito dal livello di affidabilità.</span><span class="sxs-lookup"><span data-stu-id="2379e-142">Repeat steps 1 through 3 as needed, but never scale down the number of instances in the primary node types less than what the reliability tier warrants.</span></span> <span data-ttu-id="2379e-143">Fare riferimento ai [dettagli sui livelli di affidabilità](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="2379e-143">Refer to [the details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span> 

## <a name="manually-remove-vms-from-the-non-primary-node-typevirtual-machine-scale-set"></a><span data-ttu-id="2379e-144">Rimuovere manualmente le VM dal tipo di nodo non primario o set di scalabilità di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="2379e-144">Manually remove VMs from the non-primary node type/Virtual Machine scale set</span></span>
> [!NOTE]
> <span data-ttu-id="2379e-145">Per un servizio con stato, è necessario un determinato numero di nodi per essere sempre in grado di assicurare la disponibilità e mantenere lo stato del servizio.</span><span class="sxs-lookup"><span data-stu-id="2379e-145">For a stateful service, you need a certain number of nodes to be always up to maintain availability and preserve state of your service.</span></span> <span data-ttu-id="2379e-146">Come minimo, è necessario un numero di nodi uguale al conteggio dei set di repliche di destinazione della partizione o dei servizi.</span><span class="sxs-lookup"><span data-stu-id="2379e-146">At the very minimum, you need the number of nodes equal to the target replica set count of the partition/service.</span></span> 
> 
> 

<span data-ttu-id="2379e-147">È necessario eseguire i seguenti passaggi su un'istanza di VM alla volta.</span><span class="sxs-lookup"><span data-stu-id="2379e-147">You need the execute the following steps one VM instance at a time.</span></span> <span data-ttu-id="2379e-148">Ciò consente l'arresto normale dei servizi di sistema e dei servizi con stato nella VM che viene rimossa e la creazione di nuove repliche altrove.</span><span class="sxs-lookup"><span data-stu-id="2379e-148">This allows for the system services (and your stateful services) to be shut down gracefully on the VM instance you are removing and new replicas created else where.</span></span>

1. <span data-ttu-id="2379e-149">Eseguire [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) usando 'RemoveNode' per disabilitare il nodo da rimuovere, ovvero l'istanza superiore di quel tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="2379e-149">Run [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) with intent ‘RemoveNode’ to disable the node you’re going to remove (the highest instance in that node type).</span></span>
2. <span data-ttu-id="2379e-150">Eseguire [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) per verificare che il nodo sia stato effettivamente disabilitato.</span><span class="sxs-lookup"><span data-stu-id="2379e-150">Run [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) to make sure that the node has indeed transitioned to disabled.</span></span> <span data-ttu-id="2379e-151">In caso contrario, attendere la disabilitazione del nodo.</span><span class="sxs-lookup"><span data-stu-id="2379e-151">If not wait till the node is disabled.</span></span> <span data-ttu-id="2379e-152">Non è possibile accelerare questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="2379e-152">You cannot hurry this step.</span></span>
3. <span data-ttu-id="2379e-153">Seguire l'esempio o le istruzioni nella [raccolta modelli di avvio rapido](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) per modificare di un'unità il numero di VM in tale Nodetype.</span><span class="sxs-lookup"><span data-stu-id="2379e-153">Follow the sample/instructions in the [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) to change the number of VMs by one in that Nodetype.</span></span> <span data-ttu-id="2379e-154">Questa operazione rimuoverà l'istanza superiore di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="2379e-154">This will now remove the highest VM instance.</span></span> 
4. <span data-ttu-id="2379e-155">Ripetere le fasi da 1 a 3 come necessario, ma non ridurre il numero di istanze nel nodo primario a un valore inferiore a quello garantito dal livello di affidabilità.</span><span class="sxs-lookup"><span data-stu-id="2379e-155">Repeat steps 1 through 3 as needed, but never scale down the number of instances in the primary node types less than what the reliability tier warrants.</span></span> <span data-ttu-id="2379e-156">Fare riferimento ai [dettagli sui livelli di affidabilità](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="2379e-156">Refer to [the details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span>

## <a name="behaviors-you-may-observe-in-service-fabric-explorer"></a><span data-ttu-id="2379e-157">Comportamenti che è possibile osservare in Service Fabric Explorer</span><span class="sxs-lookup"><span data-stu-id="2379e-157">Behaviors you may observe in Service Fabric Explorer</span></span>
<span data-ttu-id="2379e-158">Quando si aumentano le istanze di un cluster, Service Fabric Explorer riflette il numero di nodi, ovvero le istanze del set di scalabilità di macchine virtuali, che fanno parte del cluster.</span><span class="sxs-lookup"><span data-stu-id="2379e-158">When you scale up a cluster the Service Fabric Explorer will reflect the number of nodes (Virtual Machine scale set instances) that are part of the cluster.</span></span>  <span data-ttu-id="2379e-159">Quando tuttavia si riducono le istanze di un cluster, il nodo o l'istanza della VM rimossa viene ancora visualizzata con uno stato non integro, a meno di chiamare il cmdlet [Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/mt125993.aspx) con il nome del nodo appropriato.</span><span class="sxs-lookup"><span data-stu-id="2379e-159">However, when you scale a cluster down you will see the removed node/VM instance displayed in an unhealthy state unless you call [Remove-ServiceFabricNodeState cmd](https://msdn.microsoft.com/library/mt125993.aspx) with the appropriate node name.</span></span>   

<span data-ttu-id="2379e-160">Ecco la spiegazione di questo comportamento.</span><span class="sxs-lookup"><span data-stu-id="2379e-160">Here is the explanation for this behavior.</span></span>

<span data-ttu-id="2379e-161">I nodi elencati in Service Fabric Explorer riflettono le informazioni a disposizione dei servizi di sistema di Service Fabric, in particolare FM, circa il numero di nodi presenti nel cluster attualmente o in precedenza.</span><span class="sxs-lookup"><span data-stu-id="2379e-161">The nodes listed in Service Fabric Explorer are a reflection of what the Service Fabric system services (FM specifically) knows about the number of nodes the cluster had/has.</span></span> <span data-ttu-id="2379e-162">Quando si riducono le istanze del set di scalabilità di macchine virtuali, la VM viene eliminata, ma il servizio di sistema FM continua a ritenere che il nodo, precedentemente mappato alla VM eliminata, verrà ripristinato.</span><span class="sxs-lookup"><span data-stu-id="2379e-162">When you scale the Virtual Machine scale set down, the VM was deleted but FM system service still thinks that the node (that was mapped to the VM that was deleted) will come back.</span></span> <span data-ttu-id="2379e-163">Service Fabric Explorer continua quindi a visualizzare tale nodo, anche se lo stato di integrità è sconosciuto o di errore.</span><span class="sxs-lookup"><span data-stu-id="2379e-163">So Service Fabric Explorer continues to display that node (though the health state may be error or unknown).</span></span>

<span data-ttu-id="2379e-164">Per assicurarsi che un nodo venga rimosso quando si rimuove una VM, sono disponibili due opzioni:</span><span class="sxs-lookup"><span data-stu-id="2379e-164">In order to make sure that a node is removed when a VM is removed, you have two options:</span></span>

1) <span data-ttu-id="2379e-165">Scegliere un livello di durabilità Gold o Silver (disponibile a breve) per i tipi di nodo del cluster, che fornisce l'integrazione dell'infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="2379e-165">Choose a durability level of Gold or Silver (available soon) for the node types in your cluster, which gives you the infrastructure integration.</span></span> <span data-ttu-id="2379e-166">In questo caso i nodi saranno rimossi automaticamente dallo stato dei servizi di sistema (FM) quando si riducono le istanze.</span><span class="sxs-lookup"><span data-stu-id="2379e-166">Which will then automatically remove the nodes from our system services (FM) state when you scale down.</span></span>
<span data-ttu-id="2379e-167">Fare riferimento ai [i dettagli sui livelli di durabilità qui](service-fabric-cluster-capacity.md)</span><span class="sxs-lookup"><span data-stu-id="2379e-167">Refer to [the details on durability levels here](service-fabric-cluster-capacity.md)</span></span>

2) <span data-ttu-id="2379e-168">Dopo aver ridotto le istanze della VM, chiamare il [cmdlet Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/mt125993.aspx).</span><span class="sxs-lookup"><span data-stu-id="2379e-168">Once the VM instance has been scaled down, you need to call the [Remove-ServiceFabricNodeState cmdlet](https://msdn.microsoft.com/library/mt125993.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="2379e-169">I cluster di Service Fabric richiedono che un certo numero di nodi sia attivo in ogni momento allo scopo di mantenere la disponibilità e lo stato, ossia per "mantenere il quorum".</span><span class="sxs-lookup"><span data-stu-id="2379e-169">Service Fabric clusters require a certain number of nodes to be up at all the time in order to maintain availability and preserve state - referred to as "maintaining quorum."</span></span> <span data-ttu-id="2379e-170">Di conseguenza, non è in genere sicuro arrestare tutte le macchine virtuali del cluster senza avere prima eseguito un [backup completo dello stato](service-fabric-reliable-services-backup-restore.md).</span><span class="sxs-lookup"><span data-stu-id="2379e-170">So, it is typically unsafe to shut down all the machines in the cluster unless you have first performed a [full backup of your state](service-fabric-reliable-services-backup-restore.md).</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="2379e-171">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="2379e-171">Next steps</span></span>
<span data-ttu-id="2379e-172">Per altre informazioni sulla pianificazione della capacità del cluster, l'aggiornamento di un cluster e il partizionamento dei servizi, vedere gli articoli seguenti:</span><span class="sxs-lookup"><span data-stu-id="2379e-172">Read the following to also learn about planning cluster capacity, upgrading a cluster, and partitioning services:</span></span>

* [<span data-ttu-id="2379e-173">Considerazioni sulla pianificazione della capacità del cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2379e-173">Plan your cluster capacity</span></span>](service-fabric-cluster-capacity.md)
* [<span data-ttu-id="2379e-174">Aggiornare un cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2379e-174">Cluster upgrades</span></span>](service-fabric-cluster-upgrade.md)
* [<span data-ttu-id="2379e-175">Partizionare Reliable Services di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="2379e-175">Partition stateful services for maximum scale</span></span>](service-fabric-concepts-partitioning.md)

<!--Image references-->
[BrowseServiceFabricClusterResource]: ./media/service-fabric-cluster-scale-up-down/BrowseServiceFabricClusterResource.png
[ClusterResources]: ./media/service-fabric-cluster-scale-up-down/ClusterResources.png
