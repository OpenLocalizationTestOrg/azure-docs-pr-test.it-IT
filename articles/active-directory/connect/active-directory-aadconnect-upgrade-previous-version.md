---
title: 'Azure AD Connect: Eseguire l''aggiornamento da una versione precedente | Documentazione Microsoft'
description: "Illustra hello diversi metodi tooupgrade toohello versione più recente di Azure Active Directory Connect, tra cui un aggiornamento sul posto e una migrazione di attività."
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 31f084d8-2b89-478c-9079-76cf92e6618f
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 57bd5b094654e4983cafa303b6f3daecadafb01c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-upgrade-from-a-previous-version-toohello-latest"></a><span data-ttu-id="e7695-103">Azure AD Connect: L'aggiornamento da un precedente toohello versione più recente</span><span class="sxs-lookup"><span data-stu-id="e7695-103">Azure AD Connect: Upgrade from a previous version toohello latest</span></span>
<span data-ttu-id="e7695-104">Questo argomento descrive i diversi metodi hello che è possibile utilizzare tooupgrade la versione più recente di installazione toohello Connect di Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="e7695-104">This topic describes hello different methods that you can use tooupgrade your Azure Active Directory (Azure AD) Connect installation toohello latest release.</span></span> <span data-ttu-id="e7695-105">È consigliabile mantenere manualmente corrente con le versioni di hello di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="e7695-105">We recommend that you keep yourself current with hello releases of Azure AD Connect.</span></span> <span data-ttu-id="e7695-106">È inoltre utilizzare i passaggi di hello hello [ruotare migrazione](#swing-migration) sezione quando si esegue una configurazione sostanziale di modifica.</span><span class="sxs-lookup"><span data-stu-id="e7695-106">You also use hello steps in hello [Swing migration](#swing-migration) section when you make a substantial configuration change.</span></span>

<span data-ttu-id="e7695-107">Se si desidera tooupgrade da DirSync, vedere [l'aggiornamento da strumento di sincronizzazione di Azure Active Directory (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) invece.</span><span class="sxs-lookup"><span data-stu-id="e7695-107">If you want tooupgrade from DirSync, see [Upgrade from Azure AD sync tool (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md) instead.</span></span>

<span data-ttu-id="e7695-108">Sono disponibili alcuni diverse strategie che è possibile utilizzare tooupgrade Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="e7695-108">There are a few different strategies that you can use tooupgrade Azure AD Connect.</span></span>

| <span data-ttu-id="e7695-109">Metodo</span><span class="sxs-lookup"><span data-stu-id="e7695-109">Method</span></span> | <span data-ttu-id="e7695-110">Descrizione</span><span class="sxs-lookup"><span data-stu-id="e7695-110">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="e7695-111">Aggiornamento automatico</span><span class="sxs-lookup"><span data-stu-id="e7695-111">Automatic upgrade</span></span>](active-directory-aadconnect-feature-automatic-upgrade.md) |<span data-ttu-id="e7695-112">Si tratta hello metodo più semplice per i clienti con un'installazione rapida.</span><span class="sxs-lookup"><span data-stu-id="e7695-112">This is hello easiest method for customers with an express installation.</span></span> |
| [<span data-ttu-id="e7695-113">Aggiornamento sul posto</span><span class="sxs-lookup"><span data-stu-id="e7695-113">In-place upgrade</span></span>](#in-place-upgrade) |<span data-ttu-id="e7695-114">Se si dispone di un singolo server, è possibile aggiornare sul posto installazione hello in hello nello stesso server.</span><span class="sxs-lookup"><span data-stu-id="e7695-114">If you have a single server, you can upgrade hello installation in-place on hello same server.</span></span> |
| [<span data-ttu-id="e7695-115">Migrazione swing</span><span class="sxs-lookup"><span data-stu-id="e7695-115">Swing migration</span></span>](#swing-migration) |<span data-ttu-id="e7695-116">Con due server, è possibile preparare uno dei server hello alla nuova versione di hello o alla configurazione e modificare i server attivo hello quando si è pronti.</span><span class="sxs-lookup"><span data-stu-id="e7695-116">With two servers, you can prepare one of hello servers with hello new release or configuration, and change hello active server when you're ready.</span></span> |

<span data-ttu-id="e7695-117">Per informazioni sulle autorizzazioni, vedere hello [delle autorizzazioni necessarie per un aggiornamento](active-directory-aadconnect-accounts-permissions.md#upgrade).</span><span class="sxs-lookup"><span data-stu-id="e7695-117">For permissions information, see hello [permissions required for an upgrade](active-directory-aadconnect-accounts-permissions.md#upgrade).</span></span>

> [!NOTE]
> <span data-ttu-id="e7695-118">Dopo aver attivato la nuova Azure AD Connect server toostart sincronizzazione modifiche tooAzure Active Directory, è necessario non eseguire il rollback toousing DirSync o Azure AD Sync. Downgrade da Azure AD Connect toolegacy client, tra cui DirSync e Azure AD Sync, non è supportato e può causare tooissues, ad esempio la perdita di dati in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="e7695-118">After you've enabled your new Azure AD Connect server toostart synchronizing changes tooAzure AD, you must not roll back toousing DirSync or Azure AD Sync. Downgrading from Azure AD Connect toolegacy clients, including DirSync and Azure AD Sync, isn't supported and can lead tooissues such as data loss in Azure AD.</span></span>

## <a name="in-place-upgrade"></a><span data-ttu-id="e7695-119">Aggiornamento sul posto</span><span class="sxs-lookup"><span data-stu-id="e7695-119">In-place upgrade</span></span>
<span data-ttu-id="e7695-120">Un aggiornamento sul posto è indicato per il passaggio da Azure AD Sync o Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="e7695-120">An in-place upgrade works for moving from Azure AD Sync or Azure AD Connect.</span></span> <span data-ttu-id="e7695-121">Non è possibile usarlo per lo spostamento da DirSync o per una soluzione con Forefront Identity Manager (FIM) e Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="e7695-121">It doesn't work for moving from DirSync or for a solution with Forefront Identity Manager (FIM) + Azure AD Connector.</span></span>

<span data-ttu-id="e7695-122">Questo metodo è preferibile quando sono presenti un singolo server e meno di 100.000 oggetti.</span><span class="sxs-lookup"><span data-stu-id="e7695-122">This method is preferred when you have a single server and less than about 100,000 objects.</span></span> <span data-ttu-id="e7695-123">Se sono state apportate modifiche regole di sincronizzazione di out-of-box toohello, un'importazione completa e una sincronizzazione completa si verificano dopo l'aggiornamento di hello.</span><span class="sxs-lookup"><span data-stu-id="e7695-123">If there are any changes toohello out-of-box sync rules, a full import and full synchronization occur after hello upgrade.</span></span> <span data-ttu-id="e7695-124">Questo metodo garantisce che la nuova configurazione hello oggetti esistenti tooall applicato nel sistema hello.</span><span class="sxs-lookup"><span data-stu-id="e7695-124">This method ensures that hello new configuration is applied tooall existing objects in hello system.</span></span> <span data-ttu-id="e7695-125">L'esecuzione potrebbe richiedere alcune ore, in base al numero di hello di oggetti che rientrano nell'ambito del motore di sincronizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="e7695-125">This run might take a few hours, depending on hello number of objects that are in scope of hello sync engine.</span></span> <span data-ttu-id="e7695-126">pianificazione di sincronizzazione delta normale Hello (che sincronizza ogni 30 minuti per impostazione predefinita) viene sospeso, ma continua la sincronizzazione delle password.</span><span class="sxs-lookup"><span data-stu-id="e7695-126">hello normal delta synchronization scheduler (which synchronizes every 30 minutes by default) is suspended, but password synchronization continues.</span></span> <span data-ttu-id="e7695-127">È possibile eseguire l'aggiornamento sul posto di hello durante un fine settimana.</span><span class="sxs-lookup"><span data-stu-id="e7695-127">You might consider doing hello in-place upgrade during a weekend.</span></span> <span data-ttu-id="e7695-128">Se sono non presenti alcuna configurazione di out-of-box toohello modifiche con versione di hello nuovo Azure AD Connect, quindi un normale importazione/sincronizzazione delta inizia invece.</span><span class="sxs-lookup"><span data-stu-id="e7695-128">If there are no changes toohello out-of-box configuration with hello new Azure AD Connect release, then a normal delta import/sync starts instead.</span></span>  
![Aggiornamento sul posto](./media/active-directory-aadconnect-upgrade-previous-version/inplaceupgrade.png)

<span data-ttu-id="e7695-130">Se sono state apportate le modifiche delle regole di sincronizzazione di out-of-box toohello, queste regole sono impostare nuovamente configurazione predefinita toohello l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="e7695-130">If you've made changes toohello out-of-box synchronization rules, then these rules are set back toohello default configuration on upgrade.</span></span> <span data-ttu-id="e7695-131">toomake assicurarsi che la configurazione viene mantenuta tra gli aggiornamenti, assicurarsi che si apportano modifiche come essi è descritto in [procedure consigliate per la modifica della configurazione predefinita di hello](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="e7695-131">toomake sure that your configuration is kept between upgrades, make sure that you make changes as they're described in [Best practices for changing hello default configuration](active-directory-aadconnectsync-best-practices-changing-default-configuration.md).</span></span>

<span data-ttu-id="e7695-132">Durante l'aggiornamento sul posto, potrebbero esserci modifiche introdotte che richiedono una sincronizzazione specifica le attività (inclusi i passaggi di importazione completa e la sincronizzazione completa) toobe eseguito dopo il completamento dell'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="e7695-132">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed after upgrade completes.</span></span> <span data-ttu-id="e7695-133">toodefer tali attività, fare riferimento toosection [come toodefer completa la sincronizzazione dopo l'aggiornamento](#how-to-defer-full-synchronization-after-upgrade).</span><span class="sxs-lookup"><span data-stu-id="e7695-133">toodefer such activities, refer toosection [How toodefer full synchronization after upgrade](#how-to-defer-full-synchronization-after-upgrade).</span></span>

## <a name="swing-migration"></a><span data-ttu-id="e7695-134">Migrazione swing</span><span class="sxs-lookup"><span data-stu-id="e7695-134">Swing migration</span></span>
<span data-ttu-id="e7695-135">Se si dispone di una distribuzione complessa o molti oggetti, potrebbe essere poco toodo un aggiornamento sul posto nel sistema in tempo reale hello.</span><span class="sxs-lookup"><span data-stu-id="e7695-135">If you have a complex deployment or many objects, it might be impractical toodo an in-place upgrade on hello live system.</span></span> <span data-ttu-id="e7695-136">Per alcuni clienti questa procedura potrebbe richiedere più giorni, durante i quali non verranno elaborate modifiche differenziali.</span><span class="sxs-lookup"><span data-stu-id="e7695-136">For some customers, this process might take multiple days--and during this time, no delta changes are processed.</span></span> <span data-ttu-id="e7695-137">È inoltre possibile utilizzare questo metodo quando si pianifica toomake modifiche sostanziali tooyour configurazione e si desidera tootry loro out queste sta inviate toohello cloud.</span><span class="sxs-lookup"><span data-stu-id="e7695-137">You can also use this method when you plan toomake substantial changes tooyour configuration and you want tootry them out before they're pushed toohello cloud.</span></span>

<span data-ttu-id="e7695-138">metodo per questi scenari consigliato Hello è toouse una migrazione di attività.</span><span class="sxs-lookup"><span data-stu-id="e7695-138">hello recommended method for these scenarios is toouse a swing migration.</span></span> <span data-ttu-id="e7695-139">Sono necessari almeno due server, uno attivo e uno di staging.</span><span class="sxs-lookup"><span data-stu-id="e7695-139">You need (at least) two servers--one active server and one staging server.</span></span> <span data-ttu-id="e7695-140">ASP Hello (visualizzati con linee blue continue nella seguente immagine hello) è responsabile per il carico di produzione attivo hello.</span><span class="sxs-lookup"><span data-stu-id="e7695-140">hello active server (shown with solid blue lines in hello following picture) is responsible for hello active production load.</span></span> <span data-ttu-id="e7695-141">Hello (visualizzata con le linee tratteggiate viola) di server di gestione temporanea è pronti alla nuova versione di hello o alla configurazione.</span><span class="sxs-lookup"><span data-stu-id="e7695-141">hello staging server (shown with dashed purple lines) is prepared with hello new release or configuration.</span></span> <span data-ttu-id="e7695-142">Quando la preparazione è completa, il server viene reso attivo.</span><span class="sxs-lookup"><span data-stu-id="e7695-142">When it's fully ready, this server is made active.</span></span> <span data-ttu-id="e7695-143">Hello active server precedente, che ora ha hello configurazione installato o versione precedente, viene eseguita nel server di gestione temporanea hello e viene aggiornato.</span><span class="sxs-lookup"><span data-stu-id="e7695-143">hello previous active server, which now has hello old version or configuration installed, is made into hello staging server and is upgraded.</span></span>

<span data-ttu-id="e7695-144">due server Hello possono usare versioni diverse.</span><span class="sxs-lookup"><span data-stu-id="e7695-144">hello two servers can use different versions.</span></span> <span data-ttu-id="e7695-145">Ad esempio, ASP hello pianificare toodecommission possono usare Azure AD Sync e server di gestione temporanea nuovo hello è possibile utilizzare Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="e7695-145">For example, hello active server that you plan toodecommission can use Azure AD Sync, and hello new staging server can use Azure AD Connect.</span></span> <span data-ttu-id="e7695-146">Se si utilizzano attività migrazione toodevelop una nuova configurazione, è una buona idea toohave hello le stesse versioni in hello due server.</span><span class="sxs-lookup"><span data-stu-id="e7695-146">If you use swing migration toodevelop a new configuration, it's a good idea toohave hello same versions on hello two servers.</span></span>  
![server di gestione temporanea](./media/active-directory-aadconnect-upgrade-previous-version/stagingserver1.png)

> [!NOTE]
> <span data-ttu-id="e7695-148">Alcuni utenti preferiscono toohave tre o quattro server per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="e7695-148">Some customers prefer toohave three or four servers for this scenario.</span></span> <span data-ttu-id="e7695-149">Quando viene aggiornato hello server di gestione temporanea, non è un server di backup per [il ripristino di emergenza](active-directory-aadconnectsync-operations.md#disaster-recovery).</span><span class="sxs-lookup"><span data-stu-id="e7695-149">When hello staging server is upgraded, you don't have a backup server for [disaster recovery](active-directory-aadconnectsync-operations.md#disaster-recovery).</span></span> <span data-ttu-id="e7695-150">Con tre o quattro server, è possibile preparare un insieme di server primario/in standby con hello nuova versione, che garantisce che sia sempre un server di gestione temporanea che è pronto tootake su.</span><span class="sxs-lookup"><span data-stu-id="e7695-150">With three or four servers, you can prepare one set of primary/standby servers with hello new version, which ensures that there is always a staging server that's ready tootake over.</span></span>

<span data-ttu-id="e7695-151">Questa procedura funziona anche toomove da Azure AD Sync o una soluzione con FIM + Azure Active Directory Connector.</span><span class="sxs-lookup"><span data-stu-id="e7695-151">These steps also work toomove from Azure AD Sync or a solution with FIM + Azure AD Connector.</span></span> <span data-ttu-id="e7695-152">Questi passaggi non funzionano per DirSync, ma è hello stesso secondo metodo di migrazione (detto anche distribuzione in parallelo) con i passaggi per DirSync [sincronizzazione aggiornare Azure Active Directory (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="e7695-152">These steps don't work for DirSync, but hello same swing migration method (also called parallel deployment) with steps for DirSync is in [Upgrade Azure Active Directory sync (DirSync)](active-directory-aadconnect-dirsync-upgrade-get-started.md).</span></span>

### <a name="use-a-swing-migration-tooupgrade"></a><span data-ttu-id="e7695-153">Utilizzare un tooupgrade di migrazione di attività</span><span class="sxs-lookup"><span data-stu-id="e7695-153">Use a swing migration tooupgrade</span></span>
1. <span data-ttu-id="e7695-154">Se si utilizza Azure AD Connect nel server e verificare tooonly piano una modifica della configurazione, assicurarsi che il server attivo e il server di gestione temporanea sono entrambi utilizzando hello stessa versione.</span><span class="sxs-lookup"><span data-stu-id="e7695-154">If you use Azure AD Connect on both servers and plan tooonly make a configuration change, make sure that your active server and staging server are both using hello same version.</span></span> <span data-ttu-id="e7695-155">In questo modo più semplice toocompare differenze in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="e7695-155">That makes it easier toocompare differences later.</span></span> <span data-ttu-id="e7695-156">Se si esegue l'aggiornamento da Azure AD Sync, questi server hanno versioni diverse.</span><span class="sxs-lookup"><span data-stu-id="e7695-156">If you're upgrading from Azure AD Sync, then these servers have different versions.</span></span> <span data-ttu-id="e7695-157">Se si esegue l'aggiornamento da una versione precedente di Azure AD Connect, è toostart una buona idea con server hello due utilizzando hello stessa versione, ma non è obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="e7695-157">If you're upgrading from an older version of Azure AD Connect, it's a good idea toostart with hello two servers that are using hello same version, but it's not required.</span></span>
2. <span data-ttu-id="e7695-158">Se sono state apportate a una configurazione personalizzata e il server di gestione temporanea non sia utilizzato, effettuare le operazioni di hello in [spostare una configurazione personalizzata dal server di gestione temporanea di hello server attivo toohello](#move-custom-configuration-from-active-to-staging-server).</span><span class="sxs-lookup"><span data-stu-id="e7695-158">If you've made a custom configuration and your staging server doesn't have it, follow hello steps under [Move a custom configuration from hello active server toohello staging server](#move-custom-configuration-from-active-to-staging-server).</span></span>
3. <span data-ttu-id="e7695-159">Se si esegue l'aggiornamento da una versione precedente di Azure AD Connect, aggiornare hello versione più recente toohello del server di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="e7695-159">If you're upgrading from an earlier release of Azure AD Connect, upgrade hello staging server toohello latest version.</span></span> <span data-ttu-id="e7695-160">Se si esegue lo spostamento da Azure AD Sync, installare Azure AD Connect nel server di staging.</span><span class="sxs-lookup"><span data-stu-id="e7695-160">If you're moving from Azure AD Sync, then install Azure AD Connect on your staging server.</span></span>
4. <span data-ttu-id="e7695-161">Consentire l'importazione completa di hello sincronizzazione motore di esecuzione e la sincronizzazione completa nel server di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="e7695-161">Let hello sync engine run full import and full synchronization on your staging server.</span></span>
5. <span data-ttu-id="e7695-162">Verificare che la nuova configurazione hello non causa ulteriori modifiche impreviste attenendosi alla procedura hello in "Verifica" in [configurazione hello verifica di un server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="e7695-162">Verify that hello new configuration didn't cause any unexpected changes by using hello steps under "Verify" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span> <span data-ttu-id="e7695-163">Se un elemento non è corretto, come previsto, eseguire l'importazione di hello e sincronizzazione e verificare dati hello fino a quando non risulta valida, seguendo i passaggi di hello.</span><span class="sxs-lookup"><span data-stu-id="e7695-163">If something isn't as expected, correct it, run hello import and sync, and verify hello data until it looks good, by following hello steps.</span></span>
6. <span data-ttu-id="e7695-164">Passare hello server attivo hello toobe di server di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="e7695-164">Switch hello staging server toobe hello active server.</span></span> <span data-ttu-id="e7695-165">Questo è il passaggio finale hello "Server attivo Switch" [configurazione hello verifica di un server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span><span class="sxs-lookup"><span data-stu-id="e7695-165">This is hello final step "Switch active server" in [Verify hello configuration of a server](active-directory-aadconnectsync-operations.md#verify-the-configuration-of-a-server).</span></span>
7. <span data-ttu-id="e7695-166">Se si esegue l'aggiornamento di Azure AD Connect, aggiornare i server di hello che è a questo punto di gestione temporanea nella versione più recente di modalità toohello.</span><span class="sxs-lookup"><span data-stu-id="e7695-166">If you're upgrading Azure AD Connect, upgrade hello server that's now in staging mode toohello latest release.</span></span> <span data-ttu-id="e7695-167">Seguire hello stessi passaggi prima i dati di hello tooget e la configurazione aggiornata.</span><span class="sxs-lookup"><span data-stu-id="e7695-167">Follow hello same steps as before tooget hello data and configuration upgraded.</span></span> <span data-ttu-id="e7695-168">Se si esegue l'aggiornamento da Azure AD Sync, è possibile disattivare e rimuovere le autorizzazioni dal server precedente.</span><span class="sxs-lookup"><span data-stu-id="e7695-168">If you upgraded from Azure AD Sync, you can now turn off and decommission your old server.</span></span>

### <a name="move-a-custom-configuration-from-hello-active-server-toohello-staging-server"></a><span data-ttu-id="e7695-169">Spostare una configurazione personalizzata dal server di gestione temporanea di hello ASP toohello</span><span class="sxs-lookup"><span data-stu-id="e7695-169">Move a custom configuration from hello active server toohello staging server</span></span>
<span data-ttu-id="e7695-170">Se sono state apportate server attivo toohello modifiche di configurazione, è necessario toomake assicurarsi che hello stesso le modifiche vengono applicata toohello server di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="e7695-170">If you've made configuration changes toohello active server, you need toomake sure that hello same changes are applied toohello staging server.</span></span> <span data-ttu-id="e7695-171">spostare toohelp con questo oggetto, è possibile utilizzare hello [analizzatore di configurazione di Azure AD Connect](https://github.com/Microsoft/AADConnectConfigDocumenter).</span><span class="sxs-lookup"><span data-stu-id="e7695-171">toohelp with this move, you can use hello [Azure AD Connect configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter).</span></span>

<span data-ttu-id="e7695-172">È possibile spostare le regole di sincronizzazione personalizzata hello che è stato creato tramite PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7695-172">You can move hello custom sync rules that you've created by using PowerShell.</span></span> <span data-ttu-id="e7695-173">È necessario applicare altri hello modifiche allo stesso modo in entrambi i sistemi ed è possibile eseguire la migrazione di modifiche hello.</span><span class="sxs-lookup"><span data-stu-id="e7695-173">You must apply other changes hello same way on both systems, and you can't migrate hello changes.</span></span> <span data-ttu-id="e7695-174">Hello [analizzatore configurazione](https://github.com/Microsoft/AADConnectConfigDocumenter) consentono di confrontare due hello sistemi toomake siano identici.</span><span class="sxs-lookup"><span data-stu-id="e7695-174">hello [configuration documenter](https://github.com/Microsoft/AADConnectConfigDocumenter) can help you comparing hello two systems toomake sure they are identical.</span></span> <span data-ttu-id="e7695-175">strumento Hello inoltre consente di automatizzare i passaggi di hello riportati in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="e7695-175">hello tool can also help in automating hello steps found in this section.</span></span>

<span data-ttu-id="e7695-176">È necessario tooconfigure hello segue operazioni hello stesso modo in entrambi i server:</span><span class="sxs-lookup"><span data-stu-id="e7695-176">You need tooconfigure hello following things hello same way on both servers:</span></span>

* <span data-ttu-id="e7695-177">Connessione toohello stesso foreste</span><span class="sxs-lookup"><span data-stu-id="e7695-177">Connection toohello same forests</span></span>
* <span data-ttu-id="e7695-178">Domini e filtri unità organizzativa</span><span class="sxs-lookup"><span data-stu-id="e7695-178">Any domain and OU filtering</span></span>
* <span data-ttu-id="e7695-179">Hello stessa funzionalità facoltative, ad esempio la sincronizzazione delle password e il writeback delle password</span><span class="sxs-lookup"><span data-stu-id="e7695-179">hello same optional features, such as password sync and password writeback</span></span>

<span data-ttu-id="e7695-180">**Spostare le regole di sincronizzazione personalizzate**</span><span class="sxs-lookup"><span data-stu-id="e7695-180">**Move custom synchronization rules**</span></span>  
<span data-ttu-id="e7695-181">regole di sincronizzazione toomove, hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="e7695-181">toomove custom synchronization rules, do hello following:</span></span>

1. <span data-ttu-id="e7695-182">Aprire l' **editor delle regole di sincronizzazione** nel server attivo.</span><span class="sxs-lookup"><span data-stu-id="e7695-182">Open **Synchronization Rules Editor** on your active server.</span></span>
2. <span data-ttu-id="e7695-183">Selezionare una regola personalizzata.</span><span class="sxs-lookup"><span data-stu-id="e7695-183">Select a custom rule.</span></span> <span data-ttu-id="e7695-184">Fare clic su **Esporta**.</span><span class="sxs-lookup"><span data-stu-id="e7695-184">Click **Export**.</span></span> <span data-ttu-id="e7695-185">Viene visualizzata una finestra del Blocco note.</span><span class="sxs-lookup"><span data-stu-id="e7695-185">This brings up a Notepad window.</span></span> <span data-ttu-id="e7695-186">Salvare il file temporaneo hello con estensione PS1.</span><span class="sxs-lookup"><span data-stu-id="e7695-186">Save hello temporary file with a PS1 extension.</span></span> <span data-ttu-id="e7695-187">In questo modo diventa uno script PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e7695-187">This makes it a PowerShell script.</span></span> <span data-ttu-id="e7695-188">Copiare toohello di file PS1 hello server di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="e7695-188">Copy hello PS1 file toohello staging server.</span></span>  
   <span data-ttu-id="e7695-189">![Esportazione delle regole di sincronizzazione](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span><span class="sxs-lookup"><span data-stu-id="e7695-189">![Sync rule export](./media/active-directory-aadconnect-upgrade-previous-version/exportrule.png)</span></span>
3. <span data-ttu-id="e7695-190">Hello connettore GUID è diverso nel server di gestione temporanea hello ed è necessario modificarla.</span><span class="sxs-lookup"><span data-stu-id="e7695-190">hello Connector GUID is different on hello staging server, and you must change it.</span></span> <span data-ttu-id="e7695-191">avviare tooget hello GUID, **Editor regole di sincronizzazione**, selezionare una delle regole di out-of-box hello hello che rappresentano stesso sistema connesso e fare clic su **esportare**.</span><span class="sxs-lookup"><span data-stu-id="e7695-191">tooget hello GUID, start **Synchronization Rules Editor**, select one of hello out-of-box rules that represent hello same connected system, and click **Export**.</span></span> <span data-ttu-id="e7695-192">Sostituisci hello GUID dal server di gestione temporanea hello hello GUID nel file PS1.</span><span class="sxs-lookup"><span data-stu-id="e7695-192">Replace hello GUID in your PS1 file with hello GUID from hello staging server.</span></span>
4. <span data-ttu-id="e7695-193">In un prompt dei comandi di PowerShell, eseguire il file di hello PS1.</span><span class="sxs-lookup"><span data-stu-id="e7695-193">In a PowerShell prompt, run hello PS1 file.</span></span> <span data-ttu-id="e7695-194">Questo crea regola di sincronizzazione personalizzata hello hello server di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="e7695-194">This creates hello custom synchronization rule on hello staging server.</span></span>
5. <span data-ttu-id="e7695-195">Ripetere la procedura per tutte le regole personalizzate.</span><span class="sxs-lookup"><span data-stu-id="e7695-195">Repeat this for all your custom rules.</span></span>

## <a name="how-toodefer-full-synchronization-after-upgrade"></a><span data-ttu-id="e7695-196">Come toodefer completa la sincronizzazione dopo l'aggiornamento</span><span class="sxs-lookup"><span data-stu-id="e7695-196">How toodefer full synchronization after upgrade</span></span>
<span data-ttu-id="e7695-197">Durante l'aggiornamento sul posto, potrebbero esserci modifiche introdotte che richiedono toobe (inclusi i passaggi di importazione completa e la sincronizzazione completa) attività di sincronizzazione specifica eseguita.</span><span class="sxs-lookup"><span data-stu-id="e7695-197">During in-place upgrade, there may be changes introduced that require specific synchronization activities (including Full Import step and Full Synchronization step) toobe executed.</span></span> <span data-ttu-id="e7695-198">Ad esempio, le modifiche dello schema connettore richiedono **importazione completa** richiedono modifiche alle regole di sincronizzazione di passaggio e out-of-box **completo sincronizzazione** passaggio toobe eseguita sui connettori interessati.</span><span class="sxs-lookup"><span data-stu-id="e7695-198">For example, connector schema changes require **full import** step and out-of-box synchronization rule changes require **full synchronization** step toobe executed on affected connectors.</span></span> <span data-ttu-id="e7695-199">Durante l'aggiornamento, Azure AD Connect determina le attività di sincronizzazione necessarie e le registra come *sostituzioni*.</span><span class="sxs-lookup"><span data-stu-id="e7695-199">During upgrade, Azure AD Connect determines what synchronization activities are required and records them as *overrides*.</span></span> <span data-ttu-id="e7695-200">In hello successivo ciclo di sincronizzazione, l'utilità di pianificazione sincronizzazione hello preleva le sostituzioni e li esegue.</span><span class="sxs-lookup"><span data-stu-id="e7695-200">In hello following synchronization cycle, hello synchronization scheduler picks up these overrides and executes them.</span></span> <span data-ttu-id="e7695-201">Dopo essere state eseguite, le sostituzioni vengono rimosse.</span><span class="sxs-lookup"><span data-stu-id="e7695-201">Once an override is successfully executed, it is removed.</span></span>

<span data-ttu-id="e7695-202">Potrebbero verificarsi situazioni in cui non si desidera sul posto tootake tali sostituzioni immediatamente dopo l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="e7695-202">There may be situations where you do not want these overrides tootake place immediately after upgrade.</span></span> <span data-ttu-id="e7695-203">Ad esempio, si dispone di numerosi oggetti sincronizzati e si desidera questi toooccur passaggi di sincronizzazione dopo l'orario lavorativo.</span><span class="sxs-lookup"><span data-stu-id="e7695-203">For example, you have numerous synchronized objects and you would like these synchronization steps toooccur after business hours.</span></span> <span data-ttu-id="e7695-204">tooremove queste sostituzioni:</span><span class="sxs-lookup"><span data-stu-id="e7695-204">tooremove these overrides:</span></span>

1. <span data-ttu-id="e7695-205">Durante l'aggiornamento, **deselezionare** hello opzione **avviare il processo di sincronizzazione di hello al termine della configurazione**.</span><span class="sxs-lookup"><span data-stu-id="e7695-205">During upgrade, **uncheck** hello option **Start hello synchronization process when configuration completes**.</span></span> <span data-ttu-id="e7695-206">Ciò disabilita l'utilità di pianificazione sincronizzazione hello e impedisce ciclo di sincronizzazione eseguita automaticamente prima che vengano rimossi hello sostituzioni.</span><span class="sxs-lookup"><span data-stu-id="e7695-206">This disables hello synchronization scheduler and prevents synchronization cycle from taking place automatically before hello overrides are removed.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync01.png)

2. <span data-ttu-id="e7695-208">Al termine dell'aggiornamento, eseguire hello toofind cmdlet out sono state aggiunte le sostituzioni seguenti:`Get-ADSyncSchedulerConnectorOverride | fl`</span><span class="sxs-lookup"><span data-stu-id="e7695-208">After upgrade completes, run hello following cmdlet toofind out what overrides have been added: `Get-ADSyncSchedulerConnectorOverride | fl`</span></span>

   >[!NOTE]
   > <span data-ttu-id="e7695-209">sostituzioni Hello sono specifiche del connettore.</span><span class="sxs-lookup"><span data-stu-id="e7695-209">hello overrides are connector-specific.</span></span> <span data-ttu-id="e7695-210">In hello riportato, i passaggi di importazione completa e la sincronizzazione completa sono state aggiunte hello tooboth connettore di Active Directory in locale e Azure Active Directory Connector.</span><span class="sxs-lookup"><span data-stu-id="e7695-210">In hello following example, Full Import step and Full Synchronization step have been added tooboth hello on-premises AD Connector and Azure AD Connector.</span></span>

   ![DisableFullSyncAfterUpgrade](./media/active-directory-aadconnect-upgrade-previous-version/disablefullsync02.png)

3. <span data-ttu-id="e7695-212">Prendere nota delle sostituzioni esistenti hello che sono stati aggiunti.</span><span class="sxs-lookup"><span data-stu-id="e7695-212">Note down hello existing overrides that have been added.</span></span>
   
4. <span data-ttu-id="e7695-213">esegue l'override hello tooremove per importazione completa e la sincronizzazione completa su un connettore arbitrario, eseguire hello seguente cmdlet:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span><span class="sxs-lookup"><span data-stu-id="e7695-213">tooremove hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet: `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid-of-ConnectorIdentifier> -FullImportRequired $false -FullSyncRequired $false`</span></span>

   <span data-ttu-id="e7695-214">sostituzioni hello tooremove su tutti i connettori, eseguire lo script di PowerShell seguente hello:</span><span class="sxs-lookup"><span data-stu-id="e7695-214">tooremove hello overrides on all connectors, execute hello following PowerShell script:</span></span>

   ```
   foreach ($connectorOverride in Get-ADSyncSchedulerConnectorOverride)
   {
       Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier $connectorOverride.ConnectorIdentifier.Guid -FullSyncRequired $false -FullImportRequired $false
   }
   ```

5. <span data-ttu-id="e7695-215">tooresume hello dell'utilità di pianificazione, eseguire hello seguente cmdlet:`Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="e7695-215">tooresume hello scheduler, run hello following cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

   >[!IMPORTANT]
   > <span data-ttu-id="e7695-216">Tenere presente i passaggi di sincronizzazione hello necessario tooexecute appena.</span><span class="sxs-lookup"><span data-stu-id="e7695-216">Remember tooexecute hello required synchronization steps at your earliest convenience.</span></span> <span data-ttu-id="e7695-217">È possibile manualmente eseguire questi passaggi tramite hello Synchronization Service Manager o aggiungere sostituzioni hello utilizzando il cmdlet Set-ADSyncSchedulerConnectorOverride hello.</span><span class="sxs-lookup"><span data-stu-id="e7695-217">You can either manually execute these steps using hello Synchronization Service Manager or add hello overrides back using hello Set-ADSyncSchedulerConnectorOverride cmdlet.</span></span>

<span data-ttu-id="e7695-218">esegue l'override hello tooadd per importazione completa e la sincronizzazione completa su un connettore arbitrario, eseguire hello seguente cmdlet:`Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span><span class="sxs-lookup"><span data-stu-id="e7695-218">tooadd hello overrides for both full import and full synchronization on an arbitrary connector, run hello following cmdlet:  `Set-ADSyncSchedulerConnectorOverride -ConnectorIdentifier <Guid> -FullImportRequired $true -FullSyncRequired $true`</span></span>

## <a name="next-steps"></a><span data-ttu-id="e7695-219">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="e7695-219">Next steps</span></span>
<span data-ttu-id="e7695-220">Altre informazioni su [Integrazione delle identità locali con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="e7695-220">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
