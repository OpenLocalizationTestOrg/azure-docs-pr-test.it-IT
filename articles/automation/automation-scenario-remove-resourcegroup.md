---
title: Automatizzare la rimozione di gruppi di risorse | Documentazione Microsoft
description: Versione del flusso di lavoro PowerShell di uno scenario di Automazione di Azure che include runbook per rimuovere tutti i gruppi di risorse nella sottoscrizione.
services: automation
documentationcenter: 
author: MGoedtel
manager: jwhit
editor: 
ms.assetid: b848e345-fd5d-4b9d-bc57-3fe41d2ddb5c
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 09/26/2016
ms.author: magoedte
ms.openlocfilehash: 6aa3897d44b146483204d43e026d3d158c3e13b6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="azure-automation-scenario---automate-removal-of-resource-groups"></a><span data-ttu-id="3a142-103">Scenario di Automazione di Azure: automatizzare la rimozione di gruppi di risorse</span><span class="sxs-lookup"><span data-stu-id="3a142-103">Azure Automation scenario - automate removal of resource groups</span></span>
<span data-ttu-id="3a142-104">Molti clienti creano più gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="3a142-104">Many customers create more than one resource group.</span></span> <span data-ttu-id="3a142-105">Alcuni potrebbero essere usati per gestire applicazioni di produzione e altri come ambienti di sviluppo, test e staging.</span><span class="sxs-lookup"><span data-stu-id="3a142-105">Some might be used for managing production applications, and others might be used as development, testing, and staging environments.</span></span> <span data-ttu-id="3a142-106">La rimozione di un gruppo di risorse con un clic è più complessa rispetto all'automazione della distribuzione di queste risorse.</span><span class="sxs-lookup"><span data-stu-id="3a142-106">Automating the deployment of these resources is one thing, but being able to decommission a resource group with a click of the button is another.</span></span> <span data-ttu-id="3a142-107">È possibile semplificare questa comune attività di gestione con Automazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="3a142-107">You can streamline this common management task by using Azure Automation.</span></span> <span data-ttu-id="3a142-108">Ciò è utile se si usa una sottoscrizione di Azure con un limite di spesa tramite un'offerta riservata ai membri, ad esempio di MSDN o del programma Microsoft Partner Network Cloud Essentials.</span><span class="sxs-lookup"><span data-stu-id="3a142-108">This is helpful if you are working with an Azure subscription that has a spending limit through a member offer like MSDN or the Microsoft Partner Network Cloud Essentials program.</span></span>

<span data-ttu-id="3a142-109">Questo scenario si basa su un runbook di PowerShell ed è progettato per rimuovere uno o più gruppi di risorse specificati dalla sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="3a142-109">This scenario is based on a PowerShell runbook and is designed to remove one or more resource groups that you specify from your subscription.</span></span> <span data-ttu-id="3a142-110">L'impostazione predefinita del runbook prevede l'esecuzione preliminare di un test,</span><span class="sxs-lookup"><span data-stu-id="3a142-110">The default setting of the runbook is to test before proceeding.</span></span> <span data-ttu-id="3a142-111">per evitare di eliminare per errore il gruppo di risorse prima di essere pronti a completare la procedura.</span><span class="sxs-lookup"><span data-stu-id="3a142-111">This ensures that you don't accidentally delete the resource group before you're ready to complete this procedure.</span></span>   

## <a name="getting-the-scenario"></a><span data-ttu-id="3a142-112">Come ottenere lo scenario</span><span class="sxs-lookup"><span data-stu-id="3a142-112">Getting the scenario</span></span>
<span data-ttu-id="3a142-113">Questo scenario è costituito da un runbook di PowerShell scaricabile da [PowerShell Gallery](https://www.powershellgallery.com/packages/Remove-ResourceGroup/1.0/DisplayScript).</span><span class="sxs-lookup"><span data-stu-id="3a142-113">This scenario consists of a PowerShell runbook that you can download from the [PowerShell Gallery](https://www.powershellgallery.com/packages/Remove-ResourceGroup/1.0/DisplayScript).</span></span> <span data-ttu-id="3a142-114">Può anche essere importato direttamente dalla [raccolta di runbook](automation-runbook-gallery.md) nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="3a142-114">You can also import it directly from the [Runbook Gallery](automation-runbook-gallery.md) in the Azure portal.</span></span><br><br>

| <span data-ttu-id="3a142-115">Runbook</span><span class="sxs-lookup"><span data-stu-id="3a142-115">Runbook</span></span> | <span data-ttu-id="3a142-116">Descrizione</span><span class="sxs-lookup"><span data-stu-id="3a142-116">Description</span></span> |
| --- | --- |
| <span data-ttu-id="3a142-117">Remove-ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="3a142-117">Remove-ResourceGroup</span></span> |<span data-ttu-id="3a142-118">Rimuove uno o più gruppi di risorse di Azure e le risorse associate dalla sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="3a142-118">Removes one or more Azure resource groups and associated resources from the subscription.</span></span> |

<br>
<span data-ttu-id="3a142-119">Per questo runbook vengono definiti i parametri di input seguenti:</span><span class="sxs-lookup"><span data-stu-id="3a142-119">The following input parameters are defined for this runbook:</span></span>

| <span data-ttu-id="3a142-120">Parametro</span><span class="sxs-lookup"><span data-stu-id="3a142-120">Parameter</span></span> | <span data-ttu-id="3a142-121">Descrizione</span><span class="sxs-lookup"><span data-stu-id="3a142-121">Description</span></span> |
| --- | --- |
| <span data-ttu-id="3a142-122">NameFilter (obbligatorio)</span><span class="sxs-lookup"><span data-stu-id="3a142-122">NameFilter (Required)</span></span> |<span data-ttu-id="3a142-123">Specifica un filtro per i nomi per limitare i gruppi di risorse che si intende eliminare.</span><span class="sxs-lookup"><span data-stu-id="3a142-123">Specifies a name filter to limit the resource groups that you intend on deleting.</span></span> <span data-ttu-id="3a142-124">È possibile passare più valori usando un elenco delimitato da virgole.</span><span class="sxs-lookup"><span data-stu-id="3a142-124">You can pass multiple values using a comma-separated list.</span></span><br><span data-ttu-id="3a142-125">Il filtro non rileva la distinzione tra maiuscole e minuscole e troverà la corrispondenza con tutti i gruppi di risorse contenenti la stringa.</span><span class="sxs-lookup"><span data-stu-id="3a142-125">The filter is not case-sensitive and will match any resource group that contains the string.</span></span> |
| <span data-ttu-id="3a142-126">PreviewMode (facoltativo)</span><span class="sxs-lookup"><span data-stu-id="3a142-126">PreviewMode (Optional)</span></span> |<span data-ttu-id="3a142-127">Esegue il runbook per verificare quali gruppi di risorse verrebbero eliminati, ma non esegue alcuna azione.</span><span class="sxs-lookup"><span data-stu-id="3a142-127">Executes the runbook to see which resource groups would be deleted, but takes no action.</span></span><br><span data-ttu-id="3a142-128">Il valore predefinito è **true** che consente di evitare l'eliminazione accidentale di uno o più gruppi di risorse passati al runbook.</span><span class="sxs-lookup"><span data-stu-id="3a142-128">The default is **true** to help avoid accidental deletion of one or more resource groups passed to the runbook.</span></span> |

## <a name="install-and-configure-this-scenario"></a><span data-ttu-id="3a142-129">Installare e configurare lo scenario</span><span class="sxs-lookup"><span data-stu-id="3a142-129">Install and configure this scenario</span></span>
### <a name="prerequisites"></a><span data-ttu-id="3a142-130">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="3a142-130">Prerequisites</span></span>
<span data-ttu-id="3a142-131">Questo runbook esegue l'autenticazione con l' [account RunAs di Azure](automation-sec-configure-azure-runas-account.md).</span><span class="sxs-lookup"><span data-stu-id="3a142-131">This runbook authenticates using the [Azure Run As account](automation-sec-configure-azure-runas-account.md).</span></span>    

### <a name="install-and-publish-the-runbooks"></a><span data-ttu-id="3a142-132">Installare e pubblicare i runbook</span><span class="sxs-lookup"><span data-stu-id="3a142-132">Install and publish the runbooks</span></span>
<span data-ttu-id="3a142-133">Dopo aver scaricato il runbook, è possibile importarlo usando la procedura descritta tra quelle di [importazione di un runbook](automation-creating-importing-runbook.md#importing-a-runbook-from-a-file-into-azure-automation).</span><span class="sxs-lookup"><span data-stu-id="3a142-133">After you download the runbook, you can import it by using the procedure in [Importing runbook procedures](automation-creating-importing-runbook.md#importing-a-runbook-from-a-file-into-azure-automation).</span></span> <span data-ttu-id="3a142-134">Pubblicare il runbook dopo averlo importato correttamente nell'account di automazione.</span><span class="sxs-lookup"><span data-stu-id="3a142-134">Publish the runbook after it has been successfully imported into your Automation account.</span></span>

## <a name="using-the-runbook"></a><span data-ttu-id="3a142-135">Uso del runbook</span><span class="sxs-lookup"><span data-stu-id="3a142-135">Using the runbook</span></span>
<span data-ttu-id="3a142-136">I passaggi seguenti illustrano l'esecuzione di questo runbook e consentono di acquisire familiarità con il suo funzionamento.</span><span class="sxs-lookup"><span data-stu-id="3a142-136">The following steps will walk you through the execution of this runbook and help you become familiar with how it works.</span></span> <span data-ttu-id="3a142-137">In questo esempio verrà semplicemente testato il runbook. Il gruppo di risorse non verrà effettivamente eliminato.</span><span class="sxs-lookup"><span data-stu-id="3a142-137">You will only be testing the runbook in this example, not actually deleting the resource group.</span></span>  

1. <span data-ttu-id="3a142-138">Dal portale di Azure aprire l'account di automazione e fare clic su **Runbook**.</span><span class="sxs-lookup"><span data-stu-id="3a142-138">From the Azure portal, open your Automation account and click **Runbooks**.</span></span>
2. <span data-ttu-id="3a142-139">Selezionare il runbook **Remove-ResourceGroup** e fare clic su **Avvia**.</span><span class="sxs-lookup"><span data-stu-id="3a142-139">Select the **Remove-ResourceGroup** runbook and click **Start**.</span></span>
3. <span data-ttu-id="3a142-140">Quando si avvia il runbook, viene aperto il pannello **Avvia runbook** ed è possibile configurare i parametri.</span><span class="sxs-lookup"><span data-stu-id="3a142-140">When you start the runbook, the **Start Runbook** blade opens and you can configure the parameters.</span></span> <span data-ttu-id="3a142-141">Immettere i nomi dei gruppi di risorse della sottoscrizione che è possibile usare per il test e la cui eventuale eliminazione accidentale non causerebbe problemi.</span><span class="sxs-lookup"><span data-stu-id="3a142-141">Enter the names of resource groups in your subscription that you can use for testing and will cause no harm if accidentally deleted.</span></span><br> <span data-ttu-id="3a142-142">![Parametri di Remove-ResouceGroup](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-input-parameters.png)</span><span class="sxs-lookup"><span data-stu-id="3a142-142">![Remove-ResouceGroup parameters](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-input-parameters.png)</span></span>

   > [!NOTE]
   > <span data-ttu-id="3a142-143">Verificare che il parametro **Previewmode** sia impostato su **true** per evitare di eliminare i gruppi di risorse selezionati.</span><span class="sxs-lookup"><span data-stu-id="3a142-143">Make sure **Previewmode** is set to **true** to avoid deleting the selected resource groups.</span></span>  <span data-ttu-id="3a142-144">**Si noti** che questo runbook non rimuoverà il gruppo di risorse contenente l'account di automazione che esegue il runbook stesso.</span><span class="sxs-lookup"><span data-stu-id="3a142-144">**Note** that this runbook will not remove the resource group that contains the Automation account that is running this runbook.</span></span>  
   >
   >
4. <span data-ttu-id="3a142-145">Dopo avere configurato i valori di tutti i parametri, fare clic su **OK**. Il runbook verrà inserito in coda per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="3a142-145">After you have configured all the parameter values, click **OK**, and the runbook will be queued for execution.</span></span>  

<span data-ttu-id="3a142-146">Per visualizzare i dettagli del processo del runbook **Remove-ResourceGroup** nel portale di Azure, selezionare **Processi** nel runbook.</span><span class="sxs-lookup"><span data-stu-id="3a142-146">To view the details of the **Remove-ResourceGroup** runbook job in the Azure portal, select **Jobs** in the runbook.</span></span> <span data-ttu-id="3a142-147">Nel riepilogo del processo saranno visualizzati i parametri di input e il flusso di output, oltre alle informazioni generali sul processo e alle eventuali eccezioni che si sono verificate.</span><span class="sxs-lookup"><span data-stu-id="3a142-147">The job summary displays the input parameters and the output stream in addition to general information about the job and any exceptions that occurred.</span></span><br> <span data-ttu-id="3a142-148">![Stato del processo del runbook Remove-ResourceGroup](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-status.png)</span><span class="sxs-lookup"><span data-stu-id="3a142-148">![Remove-ResourceGroup runbook job status](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-status.png).</span></span>

<span data-ttu-id="3a142-149">Il **Riepilogo processi** include i messaggi dai flussi di output, di avviso e di errore.</span><span class="sxs-lookup"><span data-stu-id="3a142-149">The **Job Summary** includes messages from the output, warning, and error streams.</span></span> <span data-ttu-id="3a142-150">Selezionare **Output** per visualizzare i risultati dettagliati dell'esecuzione del runbook.</span><span class="sxs-lookup"><span data-stu-id="3a142-150">Select **Output** to view detailed results from the runbook execution.</span></span><br> <span data-ttu-id="3a142-151">![Risultati di output del runbook Remove-ResourceGroup](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="3a142-151">![Remove-ResourceGroup runbook output results](media/automation-scenario-remove-resourcegroup/remove-resourcegroup-runbook-job-output.png)</span></span>

## <a name="next-steps"></a><span data-ttu-id="3a142-152">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="3a142-152">Next steps</span></span>
* <span data-ttu-id="3a142-153">Per iniziare a creare il runbook, vedere [Creazione o importazione di un runbook in Automazione di Azure](automation-creating-importing-runbook.md).</span><span class="sxs-lookup"><span data-stu-id="3a142-153">To get started creating your own runbook, see [Creating or importing a runbook in Azure Automation](automation-creating-importing-runbook.md).</span></span>
* <span data-ttu-id="3a142-154">Per iniziare a usare i runbook del flusso di lavoro PowerShell, vedere [Il primo runbook del flusso di lavoro PowerShell](automation-first-runbook-textual.md).</span><span class="sxs-lookup"><span data-stu-id="3a142-154">To get started with PowerShell Workflow runbooks, see [My first PowerShell Workflow runbook](automation-first-runbook-textual.md).</span></span>
