---
title: prestazioni del Database SQL aaaAzure indicazioni di ottimizzazione | Documenti Microsoft
description: "In questo articolo consente di determinare quali toochoose del livello di servizio per l'applicazione. Consiglia inoltre di modi tootune il hello tooget applicazione meglio le potenzialità di Database SQL di Azure."
services: sql-database
documentationcenter: na
author: CarlRabeler
manager: jhubbard
editor: 
ms.assetid: dd8d95fa-24b2-4233-b3f1-8e8952a7a22b
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 02/09/2017
ms.author: carlrab
ms.openlocfilehash: 2699f755391e94ab488ac1e6acedd30f8aec4488
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="tuning-performance-in-azure-sql-database"></a><span data-ttu-id="38f8b-104">Ottimizzazione delle prestazioni del database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="38f8b-104">Tuning performance in Azure SQL Database</span></span>

<span data-ttu-id="38f8b-105">Database SQL di Azure fornisce [indicazioni](sql-database-advisor.md) che è possibile utilizzare tooimprove delle prestazioni del database, o lasciare il Database di SQL Azure [si adattano automaticamente applicazione tooyour](sql-database-automatic-tuning.md) e applicare le modifiche che migliorerà le prestazioni del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="38f8b-105">Azure SQL Database provides [recommendations](sql-database-advisor.md) that you can use tooimprove performance of your database, or you can let Azure SQL Database [automatically adapt tooyour application](sql-database-automatic-tuning.md) and apply changes that will improve performance of your workload.</span></span>

<span data-ttu-id="38f8b-106">È, non sono disponibili raccomandazioni applicabile e avere problemi di prestazioni, è possibile utilizzare hello prestazioni tooimprove metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="38f8b-106">In you don't have any applicable recommendations, and you still have performance issues, you might use hello following methods tooimprove performances:</span></span>
1. <span data-ttu-id="38f8b-107">Aumentare [livelli di servizio](sql-database-service-tiers.md) e fornire ulteriori risorse tooyour database.</span><span class="sxs-lookup"><span data-stu-id="38f8b-107">Increase [service tiers](sql-database-service-tiers.md) and provide more resources tooyour database.</span></span>
2. <span data-ttu-id="38f8b-108">Ottimizzare l'applicazione e applicare alcune procedure consigliate che consentono di migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="38f8b-108">Tune your application and apply some best practices that can improve performance.</span></span> 
3. <span data-ttu-id="38f8b-109">Ottimizzare i database di hello modificando gli indici e query toomore utilizzo efficiente di dati.</span><span class="sxs-lookup"><span data-stu-id="38f8b-109">Tune hello database by changing indexes and queries toomore efficiently work with data.</span></span>

<span data-ttu-id="38f8b-110">Questi sono metodi manuali perché è necessario toodecide cosa [livelli di servizio](sql-database-service-tiers.md) scegliere o che sarebbero necessari toorewrite applicazione o del codice del database e di distribuire le modifiche di hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-110">These are manual methods because you need toodecide what [service tiers](sql-database-service-tiers.md) you would choose or you would need toorewrite application or database code and deply hello changes.</span></span>

## <a name="increasing-performance-tier-of-your-database"></a><span data-ttu-id="38f8b-111">Aumento del livello di prestazioni del database</span><span class="sxs-lookup"><span data-stu-id="38f8b-111">Increasing performance tier of your database</span></span>

<span data-ttu-id="38f8b-112">Il servizio Database SQL di Azure offre quattro [livelli di servizio](sql-database-service-tiers.md) tra cui scegliere: Basic, Standard, Premium e Premium RS (le prestazioni sono misurate in unità di trasmissione dati del database o [DTU](sql-database-what-is-a-dtu.md)).</span><span class="sxs-lookup"><span data-stu-id="38f8b-112">Azure SQL Database offers four [service tiers](sql-database-service-tiers.md) that you can choose from: Basic, Standard, Premium, and Premium RS (performance is measured in database throughput units, or [DTUs](sql-database-what-is-a-dtu.md).</span></span> <span data-ttu-id="38f8b-113">Ogni livello di servizio isola rigorosamente risorse hello, che è possibile utilizzare l'oggetto del database SQL e garantisce prestazioni prevedibili per il livello di servizio.</span><span class="sxs-lookup"><span data-stu-id="38f8b-113">Each service tier strictly isolates hello resources that your SQL database can use, and guarantees predictable performance for that service level.</span></span> <span data-ttu-id="38f8b-114">In questo articolo è offrono informazioni aggiuntive che consentono di scegliere il livello di servizio hello per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="38f8b-114">In this article, we offer guidance that can help you choose hello service tier for your application.</span></span> <span data-ttu-id="38f8b-115">Vengono anche illustrati modi che è possibile ottimizzare il hello tooget applicazione meglio le potenzialità di Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-115">We also discuss ways that you can tune your application tooget hello most from Azure SQL Database.</span></span>

> [!NOTE]
> <span data-ttu-id="38f8b-116">Questo articolo è incentrato sulle indicazioni relative alle prestazioni per singoli database nel database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-116">This article focuses on performance guidance for single databases in Azure SQL Database.</span></span> <span data-ttu-id="38f8b-117">Per linee guida sulle prestazioni pool tooelastic correlate, vedere l'articolo [prezzo e considerazioni sulle prestazioni per il pool elastico](sql-database-elastic-pool-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="38f8b-117">For performance guidance related tooelastic pools, see [Price and performance considerations for elastic pools](sql-database-elastic-pool-guidance.md).</span></span> <span data-ttu-id="38f8b-118">Si noti, tuttavia, che è possibile applicare molte delle indicazioni nelle toodatabases articolo in un pool elastico di ottimizzazione hello e ottenere prestazioni simili.</span><span class="sxs-lookup"><span data-stu-id="38f8b-118">Note, though, that you can apply many of hello tuning recommendations in this article toodatabases in an elastic pool, and get similar performance benefits.</span></span>
> 

* <span data-ttu-id="38f8b-119">**Base**: prevedibilità hello base del servizio livello offre buone prestazioni per ogni database, l'ora in ore.</span><span class="sxs-lookup"><span data-stu-id="38f8b-119">**Basic**: hello Basic service tier offers good performance predictability for each database, hour over hour.</span></span> <span data-ttu-id="38f8b-120">In un database Basic una quantità di risorse sufficiente supporta prestazioni ottimali in un database di piccole dimensioni senza richieste simultanee multiple.</span><span class="sxs-lookup"><span data-stu-id="38f8b-120">In a Basic database, sufficient resources support good performance in a small database that doesn't have multiple concurrent requests.</span></span> <span data-ttu-id="38f8b-121">I casi di utilizzo tipici in cui si usa il livello di servizio Basic sono:</span><span class="sxs-lookup"><span data-stu-id="38f8b-121">Typical use cases when you would use Basic service tier are:</span></span>
  * <span data-ttu-id="38f8b-122">**Si sta iniziando a usare il database SQL di Azure**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-122">**You're just getting started with Azure SQL Database**.</span></span> <span data-ttu-id="38f8b-123">Le applicazioni sottoposte spesso a sviluppo non necessitano di livelli di prestazioni elevati.</span><span class="sxs-lookup"><span data-stu-id="38f8b-123">Applications that are in development often don't need high-performance levels.</span></span> <span data-ttu-id="38f8b-124">I database Basic costituiscono un ambiente ideale per lo sviluppo o il test di database a una fascia di prezzo conveniente.</span><span class="sxs-lookup"><span data-stu-id="38f8b-124">Basic databases are an ideal environment for database development or testing, at a low price point.</span></span>
  * <span data-ttu-id="38f8b-125">**È presente un database con un singolo utente**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-125">**You have a database with a single user**.</span></span> <span data-ttu-id="38f8b-126">Le applicazioni in cui un singolo utente è associato a un database non sono in genere caratterizzate da requisiti elevati per concorrenza e prestazioni.</span><span class="sxs-lookup"><span data-stu-id="38f8b-126">Applications that associate a single user with a database typically don’t have high concurrency and performance requirements.</span></span> <span data-ttu-id="38f8b-127">Queste applicazioni sono candidati per il livello di servizio Basic hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-127">These applications are candidates for hello Basic service tier.</span></span>
* <span data-ttu-id="38f8b-128">**Standard**: livello di servizio Standard hello offre prestazioni migliorate prevedibilità e offre buone prestazioni per i database con più richieste simultanee, ad esempio applicazioni web e il gruppo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="38f8b-128">**Standard**: hello Standard service tier offers improved performance predictability and provides good performance for databases that have multiple concurrent requests, like workgroup and web applications.</span></span> <span data-ttu-id="38f8b-129">Quando si sceglie un database con livello di servizio Standard, è possibile ridimensionare le applicazioni di database in base alle prestazioni prevedibili minuto per minuto.</span><span class="sxs-lookup"><span data-stu-id="38f8b-129">When you choose a Standard service tier database, you can size your database application based on predictable performance, minute over minute.</span></span>
  * <span data-ttu-id="38f8b-130">**Il database presenta più richieste simultanee**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-130">**Your database has multiple concurrent requests**.</span></span> <span data-ttu-id="38f8b-131">Le applicazioni che gestiscono più utenti contemporaneamente necessitano in genere di livelli di prestazioni più elevate.</span><span class="sxs-lookup"><span data-stu-id="38f8b-131">Applications that service more than one user at a time usually need higher performance levels.</span></span> <span data-ttu-id="38f8b-132">Ad esempio, gruppo di lavoro o web applicazioni con requisiti di traffico dei / o toomedium bassa che supporta più query contemporaneamente sono buoni candidati per il livello di servizio Standard hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-132">For example, workgroup or web applications that have low toomedium IO traffic requirements supporting multiple concurrent queries are good candidates for hello Standard service tier.</span></span>
* <span data-ttu-id="38f8b-133">**Premium**: livello di servizio Premium hello offre prestazioni prevedibili, secondo, in secondo luogo, per ogni database Premium.</span><span class="sxs-lookup"><span data-stu-id="38f8b-133">**Premium**: hello Premium service tier provides predictable performance, second over second, for each Premium database.</span></span> <span data-ttu-id="38f8b-134">Quando si sceglie il livello di servizio Premium hello, è possibile ridimensionare l'applicazione di database in base al carico di picco hello per quel database.</span><span class="sxs-lookup"><span data-stu-id="38f8b-134">When you choose hello Premium service tier, you can size your database application based on hello peak load for that database.</span></span> <span data-ttu-id="38f8b-135">piano Hello Elimina casi in cui la varianza di prestazioni può causare piccole query tootake più tempo del previsto in operazioni sensibili alla latenza.</span><span class="sxs-lookup"><span data-stu-id="38f8b-135">hello plan removes cases in which performance variance can cause small queries tootake longer than expected in latency-sensitive operations.</span></span> <span data-ttu-id="38f8b-136">Questo modello può semplificare notevolmente i cicli di convalida di sviluppo e prodotto hello per le applicazioni che richiedono toomake dichiarazioni forti sulle esigenze di risorse di picco, varianza di prestazioni o la latenza delle query.</span><span class="sxs-lookup"><span data-stu-id="38f8b-136">This model can greatly simplify hello development and product validation cycles for applications that need toomake strong statements about peak resource needs, performance variance, or query latency.</span></span> <span data-ttu-id="38f8b-137">La maggior parte dei casi d'uso del livello di servizio Premium presenta una o più di queste caratteristiche:</span><span class="sxs-lookup"><span data-stu-id="38f8b-137">Most Premium service tier use cases have one or more of these characteristics:</span></span>
  * <span data-ttu-id="38f8b-138">**Picchi di carico elevati**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-138">**High peak load**.</span></span> <span data-ttu-id="38f8b-139">Un'applicazione che richiede notevole CPU, memoria o input/output (i/o) toocomplete delle operazioni richiede un livello dedicato ad alte prestazioni.</span><span class="sxs-lookup"><span data-stu-id="38f8b-139">An application that requires substantial CPU, memory, or input/output (I/O) toocomplete its operations requires a dedicated, high-performance level.</span></span> <span data-ttu-id="38f8b-140">Più core CPU per un periodo di tempo prolungato, ad esempio, un'operazione di database noti tooconsume è un candidato per il livello di servizio Premium hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-140">For example, a database operation known tooconsume several CPU cores for an extended time is a candidate for hello Premium service tier.</span></span>
  * <span data-ttu-id="38f8b-141">**Molte richieste simultanee**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-141">**Many concurrent requests**.</span></span> <span data-ttu-id="38f8b-142">Alcune applicazioni di database gestiscono molte richieste simultanee, ad esempio durante l'utilizzo di un sito Web con un elevato volume di traffico.</span><span class="sxs-lookup"><span data-stu-id="38f8b-142">Some database applications service many concurrent requests, for example, when serving a website that has a high traffic volume.</span></span> <span data-ttu-id="38f8b-143">Basic e Standard i livelli di servizio limitare il numero di hello di richieste simultanee per ogni database.</span><span class="sxs-lookup"><span data-stu-id="38f8b-143">Basic and Standard service tiers limit hello number of concurrent requests per database.</span></span> <span data-ttu-id="38f8b-144">Le applicazioni che richiedono ulteriori connessioni dovrebbero essere toochoose un prenotazione appropriate dimensioni toohandle hello numero massimo di richieste necessarie.</span><span class="sxs-lookup"><span data-stu-id="38f8b-144">Applications that require more connections would need toochoose an appropriate reservation size toohandle hello maximum number of needed requests.</span></span>
  * <span data-ttu-id="38f8b-145">**Bassa latenza**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-145">**Low latency**.</span></span> <span data-ttu-id="38f8b-146">Alcune applicazioni richiedono una risposta dal database hello tooguarantee in tempi minimi.</span><span class="sxs-lookup"><span data-stu-id="38f8b-146">Some applications need tooguarantee a response from hello database in minimal time.</span></span> <span data-ttu-id="38f8b-147">Se la stored procedure viene chiamata come parte di un'operazione più ampia del cliente, potrebbe essere un requisito toohave restituito dalla chiamata di una in non più di 20 millisecondi, 99 per cento di tempo hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-147">If a specific stored procedure is called as part of a broader customer operation, you might have a requirement toohave a return from that call in no more than 20 milliseconds, 99 percent of hello time.</span></span> <span data-ttu-id="38f8b-148">Questo tipo di prestazioni dell'applicazione dal livello di servizio Premium hello, verificare che tale hello potenza di elaborazione toomake è disponibile.</span><span class="sxs-lookup"><span data-stu-id="38f8b-148">This type of application benefits from hello Premium service tier, toomake sure that hello required computing power is available.</span></span>
* <span data-ttu-id="38f8b-149">**Premium RS**: hello livello RS Premium è progettato per i carichi di lavoro con utilizzo intensivo dei / o che non richiedono hello garanzie di disponibilità più elevate.</span><span class="sxs-lookup"><span data-stu-id="38f8b-149">**Premium RS**: hello Premium RS tier is designed for IO-intensive workloads that do not require hello highest availability guarantees.</span></span> <span data-ttu-id="38f8b-150">Esempi di test ad alte prestazioni dei carichi di lavoro o un carico di lavoro analitico in database hello non sistema hello del record.</span><span class="sxs-lookup"><span data-stu-id="38f8b-150">Examples include testing high-performance workloads, or an analytical workload where hello database is not hello system of record.</span></span>

<span data-ttu-id="38f8b-151">livello di servizio Hello che è necessario per il database SQL dipende dai requisiti di carico di picco di hello per ogni dimensione di risorsa.</span><span class="sxs-lookup"><span data-stu-id="38f8b-151">hello service level that you need for your SQL database depends on hello peak load requirements for each resource dimension.</span></span> <span data-ttu-id="38f8b-152">È possibile che alcune applicazioni usino quantità irrilevanti di una singola risorsa, ma abbiano requisiti significativi per altre.</span><span class="sxs-lookup"><span data-stu-id="38f8b-152">Some applications use a trivial amount of a single resource, but have significant requirements for other resources.</span></span>

### <a name="service-tier-capabilities-and-limits"></a><span data-ttu-id="38f8b-153">Limiti e funzionalità dei livelli di servizio</span><span class="sxs-lookup"><span data-stu-id="38f8b-153">Service tier capabilities and limits</span></span>

<span data-ttu-id="38f8b-154">A ogni livello di servizio, impostare il livello di prestazioni hello, in modo che sia hello flessibilità toopay solo per la capacità di hello che è necessario.</span><span class="sxs-lookup"><span data-stu-id="38f8b-154">At each service tier, you set hello performance level, so you have hello flexibility toopay only for hello capacity you need.</span></span> <span data-ttu-id="38f8b-155">È possibile [regolare la capacità](sql-database-service-tiers.md), in base alle modifiche del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="38f8b-155">You can [adjust capacity](sql-database-service-tiers.md), up or down, as workload changes.</span></span> <span data-ttu-id="38f8b-156">Ad esempio, se il carico di lavoro del database è elevato durante hello back-a-acquisti scuola, è possibile aumentare il livello di prestazioni hello per database hello per un determinato periodo di tempo, luglio a settembre.</span><span class="sxs-lookup"><span data-stu-id="38f8b-156">For example, if your database workload is high during hello back-to-school shopping season, you might increase hello performance level for hello database for a set time, July through September.</span></span> <span data-ttu-id="38f8b-157">È quindi possibile ridurlo al termine del picco stagionale.</span><span class="sxs-lookup"><span data-stu-id="38f8b-157">You can reduce it when your peak season ends.</span></span> <span data-ttu-id="38f8b-158">È possibile ridurre i costi ottimizzando la stagionalità toohello di ambiente cloud dell'azienda.</span><span class="sxs-lookup"><span data-stu-id="38f8b-158">You can minimize what you pay by optimizing your cloud environment toohello seasonality of your business.</span></span> <span data-ttu-id="38f8b-159">Questo modello è adatto anche per i cicli di rilascio di prodotti software.</span><span class="sxs-lookup"><span data-stu-id="38f8b-159">This model also works well for software product release cycles.</span></span> <span data-ttu-id="38f8b-160">Un team di test può allocare la capacità durante l'esecuzione di test e quindi rilasciare tale capacità al termine dei test.</span><span class="sxs-lookup"><span data-stu-id="38f8b-160">A test team might allocate capacity while it does test runs, and then release that capacity when they finish testing.</span></span> <span data-ttu-id="38f8b-161">In un modello basato sulla richiesta di capacità, si paga la capacità necessaria, evitando i costi per risorse dedicate usate raramente.</span><span class="sxs-lookup"><span data-stu-id="38f8b-161">In a capacity request model, you pay for capacity as you need it, and avoid spending on dedicated resources that you might rarely use.</span></span>

### <a name="why-service-tiers"></a><span data-ttu-id="38f8b-162">Vantaggi dei livelli di servizio</span><span class="sxs-lookup"><span data-stu-id="38f8b-162">Why service tiers?</span></span>
<span data-ttu-id="38f8b-163">Anche se ogni carico di lavoro di database può variare, scopo hello dei livelli di servizio è tooprovide prevedibilità di prestazioni a vari livelli di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="38f8b-163">Although each database workload can differ, hello purpose of service tiers is tooprovide performance predictability at various performance levels.</span></span> <span data-ttu-id="38f8b-164">I clienti con requisiti di risorse di database su larga scala possono operare in un ambiente di calcolo più dedicato.</span><span class="sxs-lookup"><span data-stu-id="38f8b-164">Customers with large-scale database resource requirements can work in a more dedicated computing environment.</span></span>

## <a name="tune-your-application"></a><span data-ttu-id="38f8b-165">Ottimizzare l'applicazione</span><span class="sxs-lookup"><span data-stu-id="38f8b-165">Tune your application</span></span>
<span data-ttu-id="38f8b-166">In SQL Server on-premise tradizionale il processo di hello della pianificazione della capacità iniziale spesso è separato dal processo hello di esecuzione di un'applicazione nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="38f8b-166">In traditional on-premises SQL Server, hello process of initial capacity planning often is separated from hello process of running an application in production.</span></span> <span data-ttu-id="38f8b-167">Vengono acquistate prima di tutto le licenze per hardware e prodotti e l'ottimizzazione delle prestazioni viene eseguita in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="38f8b-167">Hardware and product licenses are purchased first, and performance tuning is done afterward.</span></span> <span data-ttu-id="38f8b-168">Quando si utilizza Database SQL di Azure, è un processo di hello buona toointerweave di esecuzione di un'applicazione e l'ottimizzazione.</span><span class="sxs-lookup"><span data-stu-id="38f8b-168">When you use Azure SQL Database, it's a good idea toointerweave hello process of running an application and tuning it.</span></span> <span data-ttu-id="38f8b-169">Con il modello di hello di pagamento per la capacità su richiesta, è possibile ottimizzare le risorse dell'applicazione toouse hello minime necessarie a questo punto, invece di effettuare l'overprovisioning nell'hardware in base a ipotesi di piani di crescita futura per un'applicazione, che spesso non sono corrette.</span><span class="sxs-lookup"><span data-stu-id="38f8b-169">With hello model of paying for capacity on demand, you can tune your application toouse hello minimum resources needed now, instead of overprovisioning on hardware based on guesses of future growth plans for an application, which often are incorrect.</span></span> <span data-ttu-id="38f8b-170">Alcuni clienti potrebbero scegliere di non tootune un'applicazione e scegliere invece toooverprovision risorse hardware.</span><span class="sxs-lookup"><span data-stu-id="38f8b-170">Some customers might choose not tootune an application, and instead choose toooverprovision hardware resources.</span></span> <span data-ttu-id="38f8b-171">Se non si desidera toochange un'applicazione chiave in un periodo di tempo occupato, questo approccio può essere una buona idea.</span><span class="sxs-lookup"><span data-stu-id="38f8b-171">This approach might be a good idea if you don't want toochange a key application during a busy period.</span></span> <span data-ttu-id="38f8b-172">Tuttavia, l'ottimizzazione di un'applicazione consente di ridurre i requisiti di risorse e ridurre i costi mensili quando si usano livelli di servizio hello in Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-172">But, tuning an application can minimize resource requirements and lower monthly bills when you use hello service tiers in Azure SQL Database.</span></span>

### <a name="application-characteristics"></a><span data-ttu-id="38f8b-173">Caratteristiche dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="38f8b-173">Application characteristics</span></span>
<span data-ttu-id="38f8b-174">Anche se i livelli di servizio di Database SQL di Azure sono progettate tooimprove prestazioni stabilità e la prevedibilità per un'applicazione, alcune procedure consigliate consentono di ottimizzare l'applicazione toobetter sfruttare le risorse di hello con un livello di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="38f8b-174">Although Azure SQL Database service tiers are designed tooimprove performance stability and predictability for an application, some best practices can help you tune your application toobetter take advantage of hello resources at a performance level.</span></span> <span data-ttu-id="38f8b-175">Sebbene molte applicazioni dispongono di miglioramenti significativi delle prestazioni semplicemente da cambio tooa maggiore livello di prestazioni o un servizio di livello, alcune applicazioni è necessario ulteriore ottimizzazione toobenefit da un livello superiore del servizio.</span><span class="sxs-lookup"><span data-stu-id="38f8b-175">Although many applications have significant performance gains simply by switching tooa higher performance level or service tier, some applications need additional tuning toobenefit from a higher level of service.</span></span> <span data-ttu-id="38f8b-176">Per ottenere un aumento delle prestazioni, prendere in considerazione operazioni di ottimizzazione aggiuntive per le applicazioni con queste caratteristiche:</span><span class="sxs-lookup"><span data-stu-id="38f8b-176">For increased performance, consider additional application tuning for applications that have these characteristics:</span></span>

* <span data-ttu-id="38f8b-177">**Applicazioni con prestazioni ridotte a causa di un comportamento "eccessivamente comunicativo"**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-177">**Applications that have slow performance because of "chatty" behavior**.</span></span> <span data-ttu-id="38f8b-178">Applicazioni "frammentate" eseguire operazioni di accesso di un numero eccessivo di dati che sono sensibili toonetwork latenza.</span><span class="sxs-lookup"><span data-stu-id="38f8b-178">Chatty applications make excessive data access operations that are sensitive toonetwork latency.</span></span> <span data-ttu-id="38f8b-179">Potrebbe essere necessario toomodify questi tipi di applicazioni tooreduce hello numerosi dati accesso operazioni toohello al database SQL.</span><span class="sxs-lookup"><span data-stu-id="38f8b-179">You might need toomodify these kinds of applications tooreduce hello number of data access operations toohello SQL database.</span></span> <span data-ttu-id="38f8b-180">Ad esempio, è possibile migliorare le prestazioni dell'applicazione utilizzando tecniche come l'invio in batch di query ad hoc o lo spostamento di una query hello toostored procedure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-180">For example, you might improve application performance by using techniques like batching ad-hoc queries or moving hello queries toostored procedures.</span></span> <span data-ttu-id="38f8b-181">Per altre informazioni, vedere [Invio di query in batch](#batch-queries).</span><span class="sxs-lookup"><span data-stu-id="38f8b-181">For more information, see [Batch queries](#batch-queries).</span></span>
* <span data-ttu-id="38f8b-182">**Database con un carico di lavoro elevato che non possono essere supportati da una singola macchina virtuale intera**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-182">**Databases with an intensive workload that can't be supported by an entire single machine**.</span></span> <span data-ttu-id="38f8b-183">Database che superano le risorse di hello del livello di prestazioni Premium più elevato hello potrebbero trarre vantaggio dalla scalabilità orizzontale del carico di lavoro di hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-183">Databases that exceed hello resources of hello highest Premium performance level might benefit from scaling out hello workload.</span></span> <span data-ttu-id="38f8b-184">Per altre informazioni, vedere [Partizionamento orizzontale tra database](#cross-database-sharding) e [Partizionamento funzionale](#functional-partitioning).</span><span class="sxs-lookup"><span data-stu-id="38f8b-184">For more information, see [Cross-database sharding](#cross-database-sharding) and [Functional partitioning](#functional-partitioning).</span></span>
* <span data-ttu-id="38f8b-185">**Applicazioni con query non ottimali**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-185">**Applications that have suboptimal queries**.</span></span> <span data-ttu-id="38f8b-186">Le applicazioni, specialmente quelle nel livello di accesso ai dati hello, che con query non ottimizzate non possono trarre vantaggio da un livello di prestazioni superiore.</span><span class="sxs-lookup"><span data-stu-id="38f8b-186">Applications, especially those in hello data access layer, that have poorly tuned queries might not benefit from a higher performance level.</span></span> <span data-ttu-id="38f8b-187">Tra queste sono incluse query prive della clausola WHERE, con indici mancanti o con statistiche obsolete.</span><span class="sxs-lookup"><span data-stu-id="38f8b-187">This includes queries that lack a WHERE clause, have missing indexes, or have outdated statistics.</span></span> <span data-ttu-id="38f8b-188">Queste applicazioni possono trarre vantaggio dalle tecniche standard di ottimizzazione delle prestazioni delle query.</span><span class="sxs-lookup"><span data-stu-id="38f8b-188">These applications benefit from standard query performance-tuning techniques.</span></span> <span data-ttu-id="38f8b-189">Per altre informazioni, vedere [Indici mancanti](#identifying-and-adding-missing-indexes) e [Hint/Ottimizzazione di query](#query-tuning-and-hinting).</span><span class="sxs-lookup"><span data-stu-id="38f8b-189">For more information, see [Missing indexes](#identifying-and-adding-missing-indexes) and [Query tuning and hinting](#query-tuning-and-hinting).</span></span>
* <span data-ttu-id="38f8b-190">**Applicazioni con struttura di accesso ai dati non ottimale**.</span><span class="sxs-lookup"><span data-stu-id="38f8b-190">**Applications that have suboptimal data access design**.</span></span> <span data-ttu-id="38f8b-191">Le applicazioni con problemi intrinseci di concorrenza per l'accesso ai dati, ad esempio il deadlock, potrebbero non trarre vantaggio da un livello di prestazioni superiore.</span><span class="sxs-lookup"><span data-stu-id="38f8b-191">Applications that have inherent data access concurrency issues, for example deadlocking, might not benefit from a higher performance level.</span></span> <span data-ttu-id="38f8b-192">Provare a ridurre i round trip contro hello Database SQL di Azure per la memorizzazione dei dati sul lato client hello con hello del servizio di Caching di Azure o un'altra tecnologia di memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="38f8b-192">Consider reducing round trips against hello Azure SQL Database by caching data on hello client side with hello Azure Caching service or another caching technology.</span></span> <span data-ttu-id="38f8b-193">Vedere [Memorizzazione nella cache a livello di applicazione](#application-tier-caching).</span><span class="sxs-lookup"><span data-stu-id="38f8b-193">See [Application tier caching](#application-tier-caching).</span></span>

## <a name="tune-your-database"></a><span data-ttu-id="38f8b-194">Ottimizzare il database</span><span class="sxs-lookup"><span data-stu-id="38f8b-194">Tune your database</span></span>
<span data-ttu-id="38f8b-195">In questa sezione verranno esaminate alcune tecniche che è possibile utilizzare tootune Database SQL di Azure toogain hello migliori prestazioni per l'applicazione ed eseguirla a livello di prestazioni più basso hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-195">In this section, we look at some techniques that you can use tootune Azure SQL Database toogain hello best performance for your application and run it at hello lowest possible performance level.</span></span> <span data-ttu-id="38f8b-196">Alcune di queste tecniche corrispondono consigliate di ottimizzazione tradizionali di SQL Server, mentre altre sono specifiche tooAzure Database SQL.</span><span class="sxs-lookup"><span data-stu-id="38f8b-196">Some of these techniques match traditional SQL Server tuning best practices, but others are specific tooAzure SQL Database.</span></span> <span data-ttu-id="38f8b-197">In alcuni casi, è possibile esaminare le risorse di hello utilizzata per un'ottimizzazione di database toofind aree toofurther ed estendere toowork tecniche di SQL Server tradizionale in Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-197">In some cases, you can examine hello consumed resources for a database toofind areas toofurther tune and extend traditional SQL Server techniques toowork in Azure SQL Database.</span></span>

### <a name="identify-performance-issues-using-azure-portal"></a><span data-ttu-id="38f8b-198">Identificare i problemi di prestazioni usando il portale di Azure</span><span class="sxs-lookup"><span data-stu-id="38f8b-198">Identify performance issues using Azure portal</span></span>
<span data-ttu-id="38f8b-199">Hello seguenti strumenti di hello portale di Azure consentono di analizzare e risolvere i problemi di prestazioni con il database SQL:</span><span class="sxs-lookup"><span data-stu-id="38f8b-199">hello following tools in hello Azure portal can help you analyze and fix performance issues with your SQL database:</span></span>

* [<span data-ttu-id="38f8b-200">Query Performance Insight</span><span class="sxs-lookup"><span data-stu-id="38f8b-200">Query Performance Insight</span></span>](sql-database-query-performance.md)
* [<span data-ttu-id="38f8b-201">Advisor per database SQL</span><span class="sxs-lookup"><span data-stu-id="38f8b-201">SQL Database Advisor</span></span>](sql-database-advisor.md)

<span data-ttu-id="38f8b-202">Hello portale di Azure dispone di ulteriori informazioni su entrambi gli strumenti e come toouse li.</span><span class="sxs-lookup"><span data-stu-id="38f8b-202">hello Azure portal has more information about both of these tools and how toouse them.</span></span> <span data-ttu-id="38f8b-203">tooefficiently diagnosticare e correggere i problemi, è consigliabile innanzitutto provare gli strumenti di hello in hello portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-203">tooefficiently diagnose and correct problems, we recommend that you first try hello tools in hello Azure portal.</span></span> <span data-ttu-id="38f8b-204">È consigliabile utilizzare manuale hello ottimizzazione approcci che è illustrato più avanti, per gli indici e ottimizzazione delle query, in casi particolari mancanti.</span><span class="sxs-lookup"><span data-stu-id="38f8b-204">We recommend that you use hello manual tuning approaches that we discuss next, for missing indexes and query tuning, in special cases.</span></span>

<span data-ttu-id="38f8b-205">Altre informazioni sull'identificazione dei problemi in Database SQL di Azure sono disponibili nell'articolo sul [monitoraggio delle prestazioni](sql-database-single-database-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="38f8b-205">Find more information about identifying issues in Azure SQL Database on [performance monitoring](sql-database-single-database-monitor.md) article.</span></span>

### <a name="identifying-and-adding-missing-indexes"></a><span data-ttu-id="38f8b-206">Identificazione e aggiunta di indici mancanti</span><span class="sxs-lookup"><span data-stu-id="38f8b-206">Identifying and adding missing indexes</span></span>
<span data-ttu-id="38f8b-207">Un problema comune nelle prestazioni del database OLTP è correlato toohello progettazione fisica del database.</span><span class="sxs-lookup"><span data-stu-id="38f8b-207">A common problem in OLTP database performance relates toohello physical database design.</span></span> <span data-ttu-id="38f8b-208">Spesso gli schemi di database vengono progettati e forniti senza verificare la scala (nel caricamento o nel volume di dati).</span><span class="sxs-lookup"><span data-stu-id="38f8b-208">Often, database schemas are designed and shipped without testing at scale (either in load or in data volume).</span></span> <span data-ttu-id="38f8b-209">Purtroppo, le prestazioni di hello di un piano di query potrebbero essere accettabili su scala ma peggiorare notevolmente in volumi di dati a livello di produzione.</span><span class="sxs-lookup"><span data-stu-id="38f8b-209">Unfortunately, hello performance of a query plan might be acceptable on a small scale but degrade substantially under production-level data volumes.</span></span> <span data-ttu-id="38f8b-210">l'origine più comune di questo problema Hello è la mancanza di hello di filtri toosatisfy indici adatti o altre restrizioni in una query.</span><span class="sxs-lookup"><span data-stu-id="38f8b-210">hello most common source of this issue is hello lack of appropriate indexes toosatisfy filters or other restrictions in a query.</span></span> <span data-ttu-id="38f8b-211">La mancanza di indici si manifesta spesso con una scansione di tabella quando potrebbe essere sufficiente una ricerca dell'indice.</span><span class="sxs-lookup"><span data-stu-id="38f8b-211">Often, missing indexes manifests as a table scan when an index seek could suffice.</span></span>

<span data-ttu-id="38f8b-212">In questo esempio, il piano di query selezionato hello utilizza una scansione quando invece basterebbe una ricerca:</span><span class="sxs-lookup"><span data-stu-id="38f8b-212">In this example, hello selected query plan uses a scan when a seek would suffice:</span></span>

    DROP TABLE dbo.missingindex;
    CREATE TABLE dbo.missingindex (col1 INT IDENTITY PRIMARY KEY, col2 INT);
    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO dbo.missingindex(col2) VALUES (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION;
    GO
    SELECT m1.col1
    FROM dbo.missingindex m1 INNER JOIN dbo.missingindex m2 ON(m1.col1=m2.col1)
    WHERE m1.col2 = 4;

![Piano di query con indici mancanti](./media/sql-database-performance-guidance/query_plan_missing_indexes.png)

<span data-ttu-id="38f8b-214">Il database SQL di Azure può consentire di trovare e risolvere condizioni comuni di indici mancanti.</span><span class="sxs-lookup"><span data-stu-id="38f8b-214">Azure SQL Database can help you find and fix common missing index conditions.</span></span> <span data-ttu-id="38f8b-215">Esaminare le compilazioni di query in cui un indice potrebbe ridurre in modo significativo toorun costo stimato hello una query DMV incorporate nel Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-215">DMVs that are built into Azure SQL Database look at query compilations in which an index would significantly reduce hello estimated cost toorun a query.</span></span> <span data-ttu-id="38f8b-216">Durante l'esecuzione di query, Database SQL rileva la frequenza con cui viene eseguito ogni piano di query e hello tracce stimato gap tra l'esecuzione del piano di query e di hello hello immaginare uno in cui tale indice esistente.</span><span class="sxs-lookup"><span data-stu-id="38f8b-216">During query execution, SQL Database tracks how often each query plan is executed, and tracks hello estimated gap between hello executing query plan and hello imagined one where that index existed.</span></span> <span data-ttu-id="38f8b-217">È possibile utilizzare queste ipotesi tooquickly DMV quali modifiche tooyour progettazione fisica del database potrà migliorare il costo complessivo del carico di lavoro per un database e il relativo carico di lavoro reale.</span><span class="sxs-lookup"><span data-stu-id="38f8b-217">You can use these DMVs tooquickly guess which changes tooyour physical database design might improve overall workload cost for a database and its real workload.</span></span>

<span data-ttu-id="38f8b-218">È possibile utilizzare questo potenziale tooevaluate query degli indici mancanti:</span><span class="sxs-lookup"><span data-stu-id="38f8b-218">You can use this query tooevaluate potential missing indexes:</span></span>

    SELECT CONVERT (varchar, getdate(), 126) AS runtime,
        mig.index_group_handle, mid.index_handle,
        CONVERT (decimal (28,1), migs.avg_total_user_cost * migs.avg_user_impact *
                (migs.user_seeks + migs.user_scans)) AS improvement_measure,
        'CREATE INDEX missing_index_' + CONVERT (varchar, mig.index_group_handle) + '_' +
                  CONVERT (varchar, mid.index_handle) + ' ON ' + mid.statement + '
                  (' + ISNULL (mid.equality_columns,'')
                  + CASE WHEN mid.equality_columns IS NOT NULL
                              AND mid.inequality_columns IS NOT NULL
                         THEN ',' ELSE '' END + ISNULL (mid.inequality_columns, '')
                  + ')'
                  + ISNULL (' INCLUDE (' + mid.included_columns + ')', '') AS create_index_statement,
        migs.*,
        mid.database_id,
        mid.[object_id]
    FROM sys.dm_db_missing_index_groups AS mig
    INNER JOIN sys.dm_db_missing_index_group_stats AS migs
        ON migs.group_handle = mig.index_group_handle
    INNER JOIN sys.dm_db_missing_index_details AS mid
        ON mig.index_handle = mid.index_handle
    ORDER BY migs.avg_total_user_cost * migs.avg_user_impact * (migs.user_seeks + migs.user_scans) DESC

<span data-ttu-id="38f8b-219">In questo esempio, la query hello ha restituito il suggerimento:</span><span class="sxs-lookup"><span data-stu-id="38f8b-219">In this example, hello query resulted in this suggestion:</span></span>

    CREATE INDEX missing_index_5006_5005 ON [dbo].[missingindex] ([col2])  

<span data-ttu-id="38f8b-220">Dopo la sua creazione, la stessa istruzione SELECT sceglie un piano diverso, che utilizza una ricerca anziché un'analisi e quindi esegue in modo più efficiente piano hello:</span><span class="sxs-lookup"><span data-stu-id="38f8b-220">After it's created, that same SELECT statement picks a different plan, which uses a seek instead of a scan, and then executes hello plan more efficiently:</span></span>

![Piano di query con indici corretti](./media/sql-database-performance-guidance/query_plan_corrected_indexes.png)

<span data-ttu-id="38f8b-222">informazione chiave Hello è la capacità dei / o di una scheda SCSI hello, sistema apposito è più limitato rispetto a quello di un computer dedicato.</span><span class="sxs-lookup"><span data-stu-id="38f8b-222">hello key insight is that hello I/O capacity of a shared, commodity system is more limited than that of a dedicated server machine.</span></span> <span data-ttu-id="38f8b-223">È un vantaggio nella riduzione inutili i/o tootake massimo i vantaggi del sistema hello in hello DTU di ciascun livello di prestazioni dei livelli di servizio di Database SQL di Azure hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-223">There's a premium on minimizing unnecessary I/O tootake maximum advantage of hello system in hello DTU of each performance level of hello Azure SQL Database service tiers.</span></span> <span data-ttu-id="38f8b-224">Scelte di progettazione fisica del database appropriato in modo significativo possono migliorare latenza hello per le singole query, migliorare la velocità effettiva di hello di richieste simultanee gestite per unità di scala e ridurre al minimo la query di hello hello costi toosatisfy obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="38f8b-224">Appropriate physical database design choices can significantly improve hello latency for individual queries, improve hello throughput of concurrent requests handled per scale unit, and minimize hello costs required toosatisfy hello query.</span></span> <span data-ttu-id="38f8b-225">Per ulteriori informazioni su hello mancante DMV dell'indice, vedere [Sys.dm db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span><span class="sxs-lookup"><span data-stu-id="38f8b-225">For more information about hello missing index DMVs, see [sys.dm_db_missing_index_details](https://msdn.microsoft.com/library/ms345434.aspx).</span></span>

### <a name="query-tuning-and-hinting"></a><span data-ttu-id="38f8b-226">Hint/Ottimizzazione di query</span><span class="sxs-lookup"><span data-stu-id="38f8b-226">Query tuning and hinting</span></span>
<span data-ttu-id="38f8b-227">Hello query optimizer nel Database di SQL Azure è simile toohello tradizionali query optimizer di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="38f8b-227">hello query optimizer in Azure SQL Database is similar toohello traditional SQL Server query optimizer.</span></span> <span data-ttu-id="38f8b-228">La maggior parte delle procedure consigliate di hello per ottimizzare le query e hello comprensione ragionamento delle limitazioni del modello per query optimizer di hello anche applicare tooAzure Database SQL.</span><span class="sxs-lookup"><span data-stu-id="38f8b-228">Most of hello best practices for tuning queries and understanding hello reasoning model limitations for hello query optimizer also apply tooAzure SQL Database.</span></span> <span data-ttu-id="38f8b-229">Se è ottimizzare le query in Database SQL di Azure, è possibile ottenere l'ulteriore vantaggio di hello di ridurre le richieste di risorse aggregate.</span><span class="sxs-lookup"><span data-stu-id="38f8b-229">If you tune queries in Azure SQL Database, you might get hello additional benefit of reducing aggregate resource demands.</span></span> <span data-ttu-id="38f8b-230">L'applicazione potrebbe essere in grado di toorun a un costo inferiore rispetto a un equivalente gli perché può essere eseguito in un livello di prestazioni inferiore.</span><span class="sxs-lookup"><span data-stu-id="38f8b-230">Your application might be able toorun at a lower cost than an untuned equivalent because it can run at a lower performance level.</span></span>

<span data-ttu-id="38f8b-231">Un esempio che è comune in SQL Server e che si applica anche tooAzure Database SQL è come hello query optimizer "analizza" parametri.</span><span class="sxs-lookup"><span data-stu-id="38f8b-231">An example that is common in SQL Server and which also applies tooAzure SQL Database is how hello query optimizer "sniffs" parameters.</span></span> <span data-ttu-id="38f8b-232">Durante la compilazione, query optimizer di hello valuta hello corrente valore toodetermine un parametro, se è possibile generare un piano di query ottimale.</span><span class="sxs-lookup"><span data-stu-id="38f8b-232">During compilation, hello query optimizer evaluates hello current value of a parameter toodetermine whether it can generate a more optimal query plan.</span></span> <span data-ttu-id="38f8b-233">Sebbene questa strategia, spesso può causare tooa piano di query notevolmente più veloce rispetto a un piano compilato senza i valori dei parametri noti, attualmente funziona presentare sia in SQL Server e Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-233">Although this strategy often can lead tooa query plan that is significantly faster than a plan compiled without known parameter values, currently it works imperfectly both in SQL Server and in Azure SQL Database.</span></span> <span data-ttu-id="38f8b-234">In alcuni casi il parametro hello è trasmissioni non e talvolta viene rilevato la presenza di parametro hello piano generato hello è ottimale per il set completo di hello di valori di parametro in un carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="38f8b-234">Sometimes hello parameter is not sniffed, and sometimes hello parameter is sniffed but hello generated plan is suboptimal for hello full set of parameter values in a workload.</span></span> <span data-ttu-id="38f8b-235">Microsoft include l'hint per la query (direttive) in modo che è possibile specificare la finalità più deliberatamente ed eseguire l'override di comportamento predefinito hello lo sniffing dei parametri.</span><span class="sxs-lookup"><span data-stu-id="38f8b-235">Microsoft includes query hints (directives) so that you can specify intent more deliberately and override hello default behavior of parameter sniffing.</span></span> <span data-ttu-id="38f8b-236">Spesso, se si utilizzano parametri, è possibile risolvere i casi in cui il comportamento di SQL Server o Database SQL di Azure predefinito hello è perfetto per un carico di lavoro del cliente specifico.</span><span class="sxs-lookup"><span data-stu-id="38f8b-236">Often, if you use hints, you can fix cases in which hello default SQL Server or Azure SQL Database behavior is imperfect for a specific customer workload.</span></span>

<span data-ttu-id="38f8b-237">Hello esempio successivo viene illustrato come hello query processor può generare un piano non ottimale sia per le prestazioni e requisiti di risorse.</span><span class="sxs-lookup"><span data-stu-id="38f8b-237">hello next example demonstrates how hello query processor can generate a plan that is suboptimal both for performance and resource requirements.</span></span> <span data-ttu-id="38f8b-238">L'esempio mostra anche che l'uso di un hint di query può consentire di ridurre il tempo di esecuzione delle query e i requisiti delle risorse per il database SQL:</span><span class="sxs-lookup"><span data-stu-id="38f8b-238">This example also shows that if you use a query hint, you can reduce query run time and resource requirements for your SQL database:</span></span>

    DROP TABLE psptest1;
    CREATE TABLE psptest1(col1 int primary key identity, col2 int, col3 binary(200));

    DECLARE @a int = 0;
    SET NOCOUNT ON;
    BEGIN TRANSACTION
    WHILE @a < 20000
    BEGIN
        INSERT INTO psptest1(col2) values (1);
        INSERT INTO psptest1(col2) values (@a);
        SET @a += 1;
    END
    COMMIT TRANSACTION
    CREATE INDEX i1 on psptest1(col2);
    GO

    CREATE PROCEDURE psp1 (@param1 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1
        WHERE col2 = @param1
        ORDER BY col2;
    END
    GO

    CREATE PROCEDURE psp2 (@param2 int)
    AS
    BEGIN
        INSERT INTO t1 SELECT * FROM psptest1 WHERE col2 = @param2
        ORDER BY col2
        OPTION (OPTIMIZE FOR (@param2 UNKNOWN))
    END
    GO

    CREATE TABLE t1 (col1 int primary key, col2 int, col3 binary(200));
    GO

<span data-ttu-id="38f8b-239">il codice di installazione di Hello crea una tabella che è inclinata di distribuzione dei dati.</span><span class="sxs-lookup"><span data-stu-id="38f8b-239">hello setup code creates a table that has skewed data distribution.</span></span> <span data-ttu-id="38f8b-240">query ottimale di Hello piano differisce basata sul quale parametro sia selezionato.</span><span class="sxs-lookup"><span data-stu-id="38f8b-240">hello optimal query plan differs based on which parameter is selected.</span></span> <span data-ttu-id="38f8b-241">Sfortunatamente, il piano di hello comportamento di memorizzazione nella cache non sempre Ricompila query hello in base al valore di parametro più comune di hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-241">Unfortunately, hello plan caching behavior doesn't always recompile hello query based on hello most common parameter value.</span></span> <span data-ttu-id="38f8b-242">In tal caso, è possibile che un toobe piani non ottimali memorizzati nella cache e usato per molti valori, anche quando un piano diverso potrebbe essere preferibile piano medio.</span><span class="sxs-lookup"><span data-stu-id="38f8b-242">So, it's possible for a suboptimal plan toobe cached and used for many values, even when a different plan might be a better plan choice on average.</span></span> <span data-ttu-id="38f8b-243">Piano di query hello crea quindi due stored procedure che sono identiche, ad eccezione del fatto che uno è un hint per la query speciale.</span><span class="sxs-lookup"><span data-stu-id="38f8b-243">Then hello query plan creates two stored procedures that are identical, except that one has a special query hint.</span></span>

<span data-ttu-id="38f8b-244">**Esempio (parte 1)**</span><span class="sxs-lookup"><span data-stu-id="38f8b-244">**Example, part 1**</span></span>

    -- Prime Procedure Cache with scan plan
    EXEC psp1 @param1=1;
    TRUNCATE TABLE t1;

    -- Iterate multiple times tooshow hello performance difference
    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp1 @param1=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="38f8b-245">**Esempio (parte 2)**</span><span class="sxs-lookup"><span data-stu-id="38f8b-245">**Example, part 2**</span></span>

<span data-ttu-id="38f8b-246">(È consigliabile attendere almeno 10 minuti prima di iniziare la parte 2 di esempio hello, in modo che i risultati di hello in sono distinti hello i dati di telemetria risultante).</span><span class="sxs-lookup"><span data-stu-id="38f8b-246">(We recommend that you wait at least 10 minutes before you begin part 2 of hello example, so that hello results are distinct in hello resulting telemetry data.)</span></span>

    EXEC psp2 @param2=1;
    TRUNCATE TABLE t1;

    DECLARE @i int = 0;
    WHILE @i < 1000
    BEGIN
        EXEC psp2 @param2=2;
        TRUNCATE TABLE t1;
        SET @i += 1;
    END

<span data-ttu-id="38f8b-247">Ogni parte dell'esempio tenta toorun un'istruzione insert con parametri 1.000 volte (toogenerate un toouse carico sufficiente come set di dati di test).</span><span class="sxs-lookup"><span data-stu-id="38f8b-247">Each part of this example attempts toorun a parameterized insert statement 1,000 times (toogenerate a sufficient load toouse as a test data set).</span></span> <span data-ttu-id="38f8b-248">Durante l'esecuzione di stored procedure, hello query processor viene esaminato il valore parametro hello passato toohello procedure durante la prima compilazione ("sniffing dei parametri").</span><span class="sxs-lookup"><span data-stu-id="38f8b-248">When it executes stored procedures, hello query processor examines hello parameter value that is passed toohello procedure during its first compilation (parameter "sniffing").</span></span> <span data-ttu-id="38f8b-249">processore Hello memorizza nella cache piano risultante hello e viene utilizzato per le chiamate successive, anche se il valore di parametro hello è diverso.</span><span class="sxs-lookup"><span data-stu-id="38f8b-249">hello processor caches hello resulting plan and uses it for later invocations, even if hello parameter value is different.</span></span> <span data-ttu-id="38f8b-250">piano ottimale Hello potrebbe non essere usata in tutti i casi.</span><span class="sxs-lookup"><span data-stu-id="38f8b-250">hello optimal plan might not be used in all cases.</span></span> <span data-ttu-id="38f8b-251">Talvolta è necessario tooguide hello optimizer toopick un piano che è preferibile per metà dei casi hello anziché caso specifico di hello dalla query hello quando compilato prima.</span><span class="sxs-lookup"><span data-stu-id="38f8b-251">Sometimes you need tooguide hello optimizer toopick a plan that is better for hello average case rather than hello specific case from when hello query was first compiled.</span></span> <span data-ttu-id="38f8b-252">In questo esempio, il piano iniziale hello genera un piano "analisi" che legge tutte le righe toofind ciascun valore corrispondente parametro hello:</span><span class="sxs-lookup"><span data-stu-id="38f8b-252">In this example, hello initial plan generates a "scan" plan that reads all rows toofind each value that matches hello parameter:</span></span>

![Ottimizzazione delle query mediante un piano di analisi](./media/sql-database-performance-guidance/query_tuning_1.png)

<span data-ttu-id="38f8b-254">Poiché è eseguito procedure hello utilizzando hello valore 1, piano risultante hello ottimale per il valore di hello 1 non è ottimale per tutti gli altri valori di tabella hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-254">Because we executed hello procedure by using hello value 1, hello resulting plan was optimal for hello value 1 but was suboptimal for all other values in hello table.</span></span> <span data-ttu-id="38f8b-255">non è risultato Hello probabile che potrebbe desiderare se fosse toopick ogni piano in modo casuale, poiché il piano di hello vengono eseguite più lentamente e utilizza più risorse.</span><span class="sxs-lookup"><span data-stu-id="38f8b-255">hello result likely isn't what you would want if you were toopick each plan randomly, because hello plan performs more slowly and uses more resources.</span></span>

<span data-ttu-id="38f8b-256">Se si esegue il test di hello con `SET STATISTICS IO` impostare troppo`ON`, il lavoro di scansione logica hello in questo esempio viene eseguito in background hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-256">If you run hello test with `SET STATISTICS IO` set too`ON`, hello logical scan work in this example is done behind hello scenes.</span></span> <span data-ttu-id="38f8b-257">Si noterà che sono 1,148 letture eseguite dal piano hello (che è inefficiente, hello metà dei casi viene tooreturn una sola riga):</span><span class="sxs-lookup"><span data-stu-id="38f8b-257">You can see that there are 1,148 reads done by hello plan (which is inefficient, if hello average case is tooreturn just one row):</span></span>

![Ottimizzazione delle query mediante un'analisi logica](./media/sql-database-performance-guidance/query_tuning_2.png)

<span data-ttu-id="38f8b-259">seconda parte di Hello dell'esempio hello utilizza una query hint tootell hello optimizer toouse un valore specifico durante il processo di compilazione hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-259">hello second part of hello example uses a query hint tootell hello optimizer toouse a specific value during hello compilation process.</span></span> <span data-ttu-id="38f8b-260">In questo caso, viene forzato hello query processor tooignore hello valore passato come parametro hello, e invece tooassume `UNKNOWN`.</span><span class="sxs-lookup"><span data-stu-id="38f8b-260">In this case, it forces hello query processor tooignore hello value that is passed as hello parameter, and instead tooassume `UNKNOWN`.</span></span> <span data-ttu-id="38f8b-261">Si riferisce valore tooa con frequenza media hello nella tabella hello (ignorando lo sfasamento dei segnali).</span><span class="sxs-lookup"><span data-stu-id="38f8b-261">This refers tooa value that has hello average frequency in hello table (ignoring skew).</span></span> <span data-ttu-id="38f8b-262">piano risultante Hello è un piano basato su ricerca è più veloce e Usa meno risorse, in Media, rispetto al piano hello nella parte 1 di questo esempio:</span><span class="sxs-lookup"><span data-stu-id="38f8b-262">hello resulting plan is a seek-based plan that is faster and uses fewer resources, on average, than hello plan in part 1 of this example:</span></span>

![Ottimizzazione delle query mediante un hint di query](./media/sql-database-performance-guidance/query_tuning_3.png)

<span data-ttu-id="38f8b-264">È possibile visualizzare l'effetto di hello in hello **resource_stats** tabella (si verifica un ritardo di hello esecuzione di test hello e quando dati hello popolano la tabella hello).</span><span class="sxs-lookup"><span data-stu-id="38f8b-264">You can see hello effect in hello **sys.resource_stats** table (there is a delay from hello time that you execute hello test and when hello data populates hello table).</span></span> <span data-ttu-id="38f8b-265">Per questo esempio, parte 1 eseguite durante l'intervallo di tempo 22:25:00 hello e parte 2 eseguita alle 22:35:00.</span><span class="sxs-lookup"><span data-stu-id="38f8b-265">For this example, part 1 executed during hello 22:25:00 time window, and part 2 executed at 22:35:00.</span></span> <span data-ttu-id="38f8b-266">Hello intervallo di tempo precedente altre risorse utilizzate in tale intervallo di tempo di hello versione più recente (a causa dei miglioramenti di efficienza di piano).</span><span class="sxs-lookup"><span data-stu-id="38f8b-266">hello earlier time window used more resources in that time window than hello later one (because of plan efficiency improvements).</span></span>

    SELECT TOP 1000 *
    FROM sys.resource_stats
    WHERE database_name = 'resource1'
    ORDER BY start_time DESC

![Risultati di esempio di ottimizzazione delle query](./media/sql-database-performance-guidance/query_tuning_4.png)

> [!NOTE]
> <span data-ttu-id="38f8b-268">Anche se il volume di hello in questo esempio è intenzionalmente piccolo, effetto hello di parametri non ottimali può essere significativo, in particolare nel database di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="38f8b-268">Although hello volume in this example is intentionally small, hello effect of suboptimal parameters can be substantial, especially on larger databases.</span></span> <span data-ttu-id="38f8b-269">differenza Hello, in casi estremi, può essere di secondi per i casi veloci e ore per i casi lenta.</span><span class="sxs-lookup"><span data-stu-id="38f8b-269">hello difference, in extreme cases, can be between seconds for fast cases and hours for slow cases.</span></span>
> 
> 

<span data-ttu-id="38f8b-270">È possibile esaminare **resource_stats** toodetermine se la risorsa hello per un test utilizza più o meno risorse rispetto a un altro test.</span><span class="sxs-lookup"><span data-stu-id="38f8b-270">You can examine **sys.resource_stats** toodetermine whether hello resource for a test uses more or fewer resources than another test.</span></span> <span data-ttu-id="38f8b-271">Quando si confrontano i dati, separare la temporizzazione hello di test in modo che non si trovano in hello stessa finestra di 5 minuti in hello **resource_stats** visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="38f8b-271">When you compare data, separate hello timing of tests so that they are not in hello same 5-minute window in hello **sys.resource_stats** view.</span></span> <span data-ttu-id="38f8b-272">Hello obiettivo dell'esercizio hello è totale hello toominimize delle risorse usate e risorse non di toominimize hello punta.</span><span class="sxs-lookup"><span data-stu-id="38f8b-272">hello goal of hello exercise is toominimize hello total amount of resources used, and not toominimize hello peak resources.</span></span> <span data-ttu-id="38f8b-273">In genere, anche con l'ottimizzazione di una parte di codice per la latenza viene ridotto il consumo di risorse.</span><span class="sxs-lookup"><span data-stu-id="38f8b-273">Generally, optimizing a piece of code for latency also reduces resource consumption.</span></span> <span data-ttu-id="38f8b-274">Assicurarsi che le modifiche di hello apportate tooan applicazione sono necessari e che i hello cambiamenti non incidano negativamente analisi utilizzo software per un utente che potrebbero utilizzare hint per la query in un'applicazione hello hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-274">Make sure that hello changes you make tooan application are necessary, and that hello changes don't negatively affect hello customer experience for someone who might be using query hints in hello application.</span></span>

<span data-ttu-id="38f8b-275">Se un carico di lavoro dispone di un set di ripetizione delle query, spesso effettua senso toocapture e convalidare validità hello delle scelte piano perché l'unità di hello minima dimensione unità toohost obbligatorio hello database resource.</span><span class="sxs-lookup"><span data-stu-id="38f8b-275">If a workload has a set of repeating queries, often it makes sense toocapture and validate hello optimality of your plan choices because it drives hello minimum resource size unit required toohost hello database.</span></span> <span data-ttu-id="38f8b-276">Dopo la convalida, in alcuni casi il riesame piani hello che toohelp è assicurarsi che la validità.</span><span class="sxs-lookup"><span data-stu-id="38f8b-276">After you validate it, occasionally reexamine hello plans toohelp you make sure that they have not degraded.</span></span> <span data-ttu-id="38f8b-277">Per altre informazioni, vedere [Hint per la query (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span><span class="sxs-lookup"><span data-stu-id="38f8b-277">You can learn more about [query hints (Transact-SQL)](https://msdn.microsoft.com/library/ms181714.aspx).</span></span>

### <a name="cross-database-sharding"></a><span data-ttu-id="38f8b-278">Partizionamento orizzontale tra database</span><span class="sxs-lookup"><span data-stu-id="38f8b-278">Cross-database sharding</span></span>
<span data-ttu-id="38f8b-279">Poiché il Database SQL di Azure viene eseguito su hardware apposito, limiti della capacità hello per un singolo database sono inferiori a quelli di un'installazione di SQL Server locale tradizionali.</span><span class="sxs-lookup"><span data-stu-id="38f8b-279">Because Azure SQL Database runs on commodity hardware, hello capacity limits for a single database are lower than for a traditional on-premises SQL Server installation.</span></span> <span data-ttu-id="38f8b-280">Alcuni clienti di utilizzare operazioni di database toospread tecniche di partizionamento orizzontale in più database quando le operazioni di hello non rientrano hello limiti di un singolo database nel Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-280">Some customers use sharding techniques toospread database operations over multiple databases when hello operations don't fit inside hello limits of a single database in Azure SQL Database.</span></span> <span data-ttu-id="38f8b-281">La maggior parte dei clienti che usa le tecniche di partizionamento orizzontale nel database SQL di Azure suddivide i dati di una singola dimensione in più database.</span><span class="sxs-lookup"><span data-stu-id="38f8b-281">Most customers who use sharding techniques in Azure SQL Database split their data on a single dimension across multiple databases.</span></span> <span data-ttu-id="38f8b-282">Per questo approccio, è necessario che le applicazioni OLTP eseguono spesso le transazioni che si applicano tooonly una riga o tooa piccolo gruppo di righe dello schema di hello toounderstand.</span><span class="sxs-lookup"><span data-stu-id="38f8b-282">For this approach, you need toounderstand that OLTP applications often perform transactions that apply tooonly one row or tooa small group of rows in hello schema.</span></span>

> [!NOTE]
> <span data-ttu-id="38f8b-283">Database SQL offre ora un tooassist libreria con il partizionamento orizzontale.</span><span class="sxs-lookup"><span data-stu-id="38f8b-283">SQL Database now provides a library tooassist with sharding.</span></span> <span data-ttu-id="38f8b-284">Per altre informazioni, vedere [Panoramica della libreria client dei database elastici](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="38f8b-284">For more information, see [Elastic Database client library overview](sql-database-elastic-database-client-library.md).</span></span>
> 
> 

<span data-ttu-id="38f8b-285">Ad esempio, se un database include il nome del cliente, ordine e dettagli dell'ordine (ad esempio, hello database Northwind di esempio tradizionale fornito con SQL Server), è possibile suddividere questi dati in più database raggruppando un cliente con hello ordine e dettagli ordine correlati informazioni.</span><span class="sxs-lookup"><span data-stu-id="38f8b-285">For example, if a database has customer name, order, and order details (like hello traditional example Northwind database that ships with SQL Server), you could split this data into multiple databases by grouping a customer with hello related order and order detail information.</span></span> <span data-ttu-id="38f8b-286">È possibile garantire il recupero di che dati del cliente hello rimangono in un singolo database.</span><span class="sxs-lookup"><span data-stu-id="38f8b-286">You can guarantee that hello customer's data stays in a single database.</span></span> <span data-ttu-id="38f8b-287">un'applicazione Hello, diversi clienti verrà suddivisi tra database, estendendo di fatto hello carico tra più database.</span><span class="sxs-lookup"><span data-stu-id="38f8b-287">hello application would split different customers across databases, effectively spreading hello load across multiple databases.</span></span> <span data-ttu-id="38f8b-288">Con il partizionamento orizzontale, i clienti possono non solo evitare hello limite delle dimensioni massime del database, ma il Database di SQL Azure può elaborare anche i carichi di lavoro che sono significativamente maggiori a limiti di hello hello diversi livelli di prestazioni, purché ogni singolo database rientri nel relativo DTU.</span><span class="sxs-lookup"><span data-stu-id="38f8b-288">With sharding, customers not only can avoid hello maximum database size limit, but Azure SQL Database also can process workloads that are significantly larger than hello limits of hello different performance levels, as long as each individual database fits into its DTU.</span></span>

<span data-ttu-id="38f8b-289">Anche se non viene ridotto capacità di risorse aggregate hello per una soluzione di partizionamento orizzontale di database, è estremamente efficiente nel supportare soluzioni di grandi dimensioni che vengono distribuite in più database.</span><span class="sxs-lookup"><span data-stu-id="38f8b-289">Although database sharding doesn't reduce hello aggregate resource capacity for a solution, it's highly effective at supporting very large solutions that are spread over multiple databases.</span></span> <span data-ttu-id="38f8b-290">Ogni database è possibile eseguire in un diverso prestazioni livello toosupport molto grande, "effettivo" database con requisiti di risorse elevato.</span><span class="sxs-lookup"><span data-stu-id="38f8b-290">Each database can run at a different performance level toosupport very large, "effective" databases with high resource requirements.</span></span>

### <a name="functional-partitioning"></a><span data-ttu-id="38f8b-291">Partizionamento funzionale</span><span class="sxs-lookup"><span data-stu-id="38f8b-291">Functional partitioning</span></span>
<span data-ttu-id="38f8b-292">Gli utenti di SQL Server combinano spesso molte funzioni all'interno di un singolo database.</span><span class="sxs-lookup"><span data-stu-id="38f8b-292">SQL Server users often combine many functions in a single database.</span></span> <span data-ttu-id="38f8b-293">Ad esempio, se un'applicazione abbia un inventario toomanage logica per un archivio, che il database potrebbe essere logica associata a inventario, il rilevamento di ordini di acquisto, le stored procedure e viste indicizzate o materializzate che Gestione dei report di fine mese.</span><span class="sxs-lookup"><span data-stu-id="38f8b-293">For example, if an application has logic toomanage inventory for a store, that database might have logic associated with inventory, tracking purchase orders, stored procedures, and indexed or materialized views that manage end-of-month reporting.</span></span> <span data-ttu-id="38f8b-294">Questa tecnica rende più semplice database di hello tooadminister per operazioni quali backup, ma richiede anche si toosize hello hardware toohandle hello carico massimo in tutte le funzioni di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="38f8b-294">This technique makes it easier tooadminister hello database for operations like backup, but it also requires you toosize hello hardware toohandle hello peak load across all functions of an application.</span></span>

<span data-ttu-id="38f8b-295">Se si utilizza un'architettura di scalabilità orizzontale nel Database di SQL Azure, è una buona toosplit varie funzioni di un'applicazione in database diversi.</span><span class="sxs-lookup"><span data-stu-id="38f8b-295">If you use a scale-out architecture in Azure SQL Database, it's a good idea toosplit different functions of an application into different databases.</span></span> <span data-ttu-id="38f8b-296">Se si usa questa tecnica, ogni applicazione viene ridimensionata in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="38f8b-296">By using this technique, each application scales independently.</span></span> <span data-ttu-id="38f8b-297">Quando un'applicazione viene utilizzata con maggiore frequenza (e hello carico aumenta database hello), amministratore di hello può scegliere i livelli di prestazioni indipendente per ogni funzione in un'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-297">As an application becomes busier (and hello load on hello database increases), hello administrator can choose independent performance levels for each function in hello application.</span></span> <span data-ttu-id="38f8b-298">In limite hello, con questa architettura, un'applicazione può essere maggiore di una singola macchina apposita è possibile gestire perché carico hello è suddiviso in più computer.</span><span class="sxs-lookup"><span data-stu-id="38f8b-298">At hello limit, with this architecture, an application can be larger than a single commodity machine can handle because hello load is spread across multiple machines.</span></span>

### <a name="batch-queries"></a><span data-ttu-id="38f8b-299">Invio di query in batch</span><span class="sxs-lookup"><span data-stu-id="38f8b-299">Batch queries</span></span>
<span data-ttu-id="38f8b-300">Per le applicazioni che accedono ai dati con volumi elevati, frequenti, la query ad hoc, una notevole quantità di tempo di risposta viene impiegata per la comunicazione di rete tra il livello di applicazione hello e hello Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-300">For applications that access data by using high-volume, frequent, ad hoc querying, a substantial amount of response time is spent on network communication between hello application tier and hello Azure SQL Database tier.</span></span> <span data-ttu-id="38f8b-301">Anche se entrambi hello applicazione e Database SQL di Azure sono in hello elementi nello stesso data center, la latenza di rete tra due hello hello potrebbe essere aumentato da un numero elevato di operazioni di accesso ai dati.</span><span class="sxs-lookup"><span data-stu-id="38f8b-301">Even when both hello application and Azure SQL Database are in hello same data center, hello network latency between hello two might be magnified by a large number of data access operations.</span></span> <span data-ttu-id="38f8b-302">rete hello tooreduce arrotondamento di viaggi per i dati di hello operazioni di accesso, è possibile utilizzare le query ad hoc di hello opzione tooeither batch hello o toocompile come stored procedure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-302">tooreduce hello network round trips for hello data access operations, consider using hello option tooeither batch hello ad hoc queries, or toocompile them as stored procedures.</span></span> <span data-ttu-id="38f8b-303">Se si batch di query ad hoc hello, è possibile inviare più query come un unico grande batch in tooAzure una singola operazione Database SQL.</span><span class="sxs-lookup"><span data-stu-id="38f8b-303">If you batch hello ad hoc queries, you can send multiple queries as one large batch in a single trip tooAzure SQL Database.</span></span> <span data-ttu-id="38f8b-304">Se si esegue la compilazione di query ad hoc in una stored procedure, è possibile ottenere hello che stesso risultato, come se i batch di essi.</span><span class="sxs-lookup"><span data-stu-id="38f8b-304">If you compile ad hoc queries in a stored procedure, you could achieve hello same result as if you batch them.</span></span> <span data-ttu-id="38f8b-305">L'utilizzo di una stored procedure inoltre offre hello vantaggio di aumentare la probabilità hello della memorizzazione nella cache i piani di query hello in Database SQL di Azure, è possibile utilizzare hello stored procedure di nuovo.</span><span class="sxs-lookup"><span data-stu-id="38f8b-305">Using a stored procedure also gives you hello benefit of increasing hello chances of caching hello query plans in Azure SQL Database so you can use hello stored procedure again.</span></span>

<span data-ttu-id="38f8b-306">Alcune applicazioni comportano un utilizzo elevato di scrittura.</span><span class="sxs-lookup"><span data-stu-id="38f8b-306">Some applications are write-intensive.</span></span> <span data-ttu-id="38f8b-307">In alcuni casi è possibile ridurre carico i/o totale hello in un database considerando come toobatch scrive insieme.</span><span class="sxs-lookup"><span data-stu-id="38f8b-307">Sometimes you can reduce hello total I/O load on a database by considering how toobatch writes together.</span></span> <span data-ttu-id="38f8b-308">Questa operazione è spesso semplice come l'uso di transazioni esplicite anziché di transazioni autocommit in stored procedure e batch ad hoc.</span><span class="sxs-lookup"><span data-stu-id="38f8b-308">Often, this is as simple as using explicit transactions instead of auto-commit transactions in stored procedures and ad hoc batches.</span></span> <span data-ttu-id="38f8b-309">Per una valutazione delle differenti tecniche che si possono usare, vedere [Tecniche di esecuzione in batch per applicazioni del database SQL in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span><span class="sxs-lookup"><span data-stu-id="38f8b-309">For an evaluation of different techniques you can use, see [Batching techniques for SQL Database applications in Azure](https://msdn.microsoft.com/library/windowsazure/dn132615.aspx).</span></span> <span data-ttu-id="38f8b-310">Sperimentare il proprio carico di lavoro toofind hello del modello per l'invio in batch.</span><span class="sxs-lookup"><span data-stu-id="38f8b-310">Experiment with your own workload toofind hello right model for batching.</span></span> <span data-ttu-id="38f8b-311">Essere toounderstand assicurarsi che un modello potrebbe essere leggermente garantisce la coerenza transazionale diverse.</span><span class="sxs-lookup"><span data-stu-id="38f8b-311">Be sure toounderstand that a model might have slightly different transactional consistency guarantees.</span></span> <span data-ttu-id="38f8b-312">Trovare hello giusto carico di lavoro che riduce l'utilizzo delle risorse, è necessario individuare hello corretta combinazione di prestazioni e coerenza compromessi.</span><span class="sxs-lookup"><span data-stu-id="38f8b-312">Finding hello right workload that minimizes resource use requires finding hello right combination of consistency and performance trade-offs.</span></span>

### <a name="application-tier-caching"></a><span data-ttu-id="38f8b-313">Memorizzazione nella cache a livello di applicazione</span><span class="sxs-lookup"><span data-stu-id="38f8b-313">Application-tier caching</span></span>
<span data-ttu-id="38f8b-314">Alcune applicazioni di database contengono carichi di lavoro con intensa attività di lettura.</span><span class="sxs-lookup"><span data-stu-id="38f8b-314">Some database applications have read-heavy workloads.</span></span> <span data-ttu-id="38f8b-315">Livelli di memorizzazione nella cache potrebbe ridurre il carico hello sul database hello e potrebbe potenzialmente ridurre toosupport richiesto livello hello prestazioni un database con Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="38f8b-315">Caching layers might reduce hello load on hello database and might potentially reduce hello performance level required toosupport a database by using Azure SQL Database.</span></span> <span data-ttu-id="38f8b-316">Con [Cache Redis di Azure](https://azure.microsoft.com/services/cache/), se si dispone di un carico di lavoro con intensa attività di lettura, è possibile leggere una sola volta dati hello (o forse una volta per ogni computer a livello di applicazione, a seconda del tipo di configurazione) e quindi archiviare i dati all'esterno del database SQL.</span><span class="sxs-lookup"><span data-stu-id="38f8b-316">With [Azure Redis Cache](https://azure.microsoft.com/services/cache/), if you have a read-heavy workload, you can read hello data once (or perhaps once per application-tier machine, depending on how it is configured), and then store that data outside your SQL database.</span></span> <span data-ttu-id="38f8b-317">Si tratta di un carico modo tooreduce database (CPU e lettura i/o), ma è un effetto sulla coerenza transazionale poiché i dati di hello da leggere dalla cache di hello potrebbero essere sincronizzati con i dati di hello nel database di hello.</span><span class="sxs-lookup"><span data-stu-id="38f8b-317">This is a way tooreduce database load (CPU and read I/O), but there is an effect on transactional consistency because hello data being read from hello cache might be out of sync with hello data in hello database.</span></span> <span data-ttu-id="38f8b-318">Anche se in molte applicazioni è accettabile un livello di incoerenza, ciò non rappresenta una soluzione valida per tutti i carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="38f8b-318">Although in many applications some level of inconsistency is acceptable, that's not true for all workloads.</span></span> <span data-ttu-id="38f8b-319">È necessario conoscere bene tutti i requisiti delle applicazioni prima di implementare una strategia di caching a livello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="38f8b-319">You should fully understand any application requirements before you implement an application-tier caching strategy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="38f8b-320">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="38f8b-320">Next steps</span></span>
* <span data-ttu-id="38f8b-321">Per altre informazioni sui livelli di servizio, vedere [Opzioni e prestazioni disponibili in ogni livello di servizio del database SQL](sql-database-service-tiers.md)</span><span class="sxs-lookup"><span data-stu-id="38f8b-321">For more information about service tiers, see [SQL Database options and performance](sql-database-service-tiers.md)</span></span>
* <span data-ttu-id="38f8b-322">Per altre informazioni sui pool elastici, vedere [Informazioni sui pool elastici di Azure](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="38f8b-322">For more information about elastic pools, see [What is an Azure elastic pool?](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="38f8b-323">Per informazioni sui pool elastico e prestazioni, vedere [quando tooconsider un pool elastico](sql-database-elastic-pool-guidance.md)</span><span class="sxs-lookup"><span data-stu-id="38f8b-323">For information about performance and elastic pools, see [When tooconsider an elastic pool](sql-database-elastic-pool-guidance.md)</span></span>

