---
title: Directory Federation Services in Azure aaaActive | Documenti Microsoft
description: "In questo documento si apprenderà come toodeploy AD ADFS in Azure ad alta disponibilità."
keywords: Distribuire ADFS in azure, distribuire adfs di azure, azure adfs, ADFS di azure, la distribuzione di adfs, distribuzione di ADFS, adfs in azure, distribuire adfs in azure, distribuire ADFS in azure, azure ad FS, introduzione tooAD ADFS, Azure, ADFS in Azure iaas, ADFS, spostare tooazure adfs
services: active-directory
documentationcenter: 
author: anandyadavmsft
manager: femila
editor: 
ms.assetid: 692a188c-badc-44aa-ba86-71c0e8074510
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 07/17/2017
ms.author: anandy; billmath
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 2c39271f7569b9ce395dce2f53f5ba5a4897b132
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="deploying-active-directory-federation-services-in-azure"></a><span data-ttu-id="feed5-104">Distribuzione di Active Directory Federation Services in Azure</span><span class="sxs-lookup"><span data-stu-id="feed5-104">Deploying Active Directory Federation Services in Azure</span></span>
<span data-ttu-id="feed5-105">AD FS offre funzionalità di federazione delle identità e Single Sign-On (SSO) Web protette e semplificate.</span><span class="sxs-lookup"><span data-stu-id="feed5-105">AD FS provides simplified, secured identity federation and Web single sign-on (SSO) capabilities.</span></span> <span data-ttu-id="feed5-106">Federazione con Azure AD o Office 365 consente agli utenti tooauthenticate locale utilizzando le credenziali e accedere a tutte le risorse nel cloud.</span><span class="sxs-lookup"><span data-stu-id="feed5-106">Federation with Azure AD or O365 enables users tooauthenticate using on-premises credentials and access all resources in cloud.</span></span> <span data-ttu-id="feed5-107">Di conseguenza, diventa importante toohave una disponibilità elevata ADFS infrastruttura tooensure accedere tooresources sia in locale e nel cloud hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-107">As a result, it becomes important toohave a highly available AD FS infrastructure tooensure access tooresources both on-premises and in hello cloud.</span></span> <span data-ttu-id="feed5-108">Distribuzione di ADFS in Azure consente di ottenere la disponibilità elevata hello obbligatoria con un impegno minimo.</span><span class="sxs-lookup"><span data-stu-id="feed5-108">Deploying AD FS in Azure can help achieve hello high availability required with minimal efforts.</span></span>
<span data-ttu-id="feed5-109">Distribuire AD FS in Azure offre diverse vantaggi. Di seguito ne sono elencati alcuni.</span><span class="sxs-lookup"><span data-stu-id="feed5-109">There are several advantages of deploying AD FS in Azure, a few of them are listed below:</span></span>

* <span data-ttu-id="feed5-110">**Disponibilità elevata** -con la potenza di hello Azure set di disponibilità, assicurarsi di un'infrastruttura a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="feed5-110">**High Availability** - With hello power of Azure Availability Sets, you ensure a highly available infrastructure.</span></span>
* <span data-ttu-id="feed5-111">**Facile tooScale** – necessarie prestazioni più elevate?</span><span class="sxs-lookup"><span data-stu-id="feed5-111">**Easy tooScale** – Need more performance?</span></span> <span data-ttu-id="feed5-112">Eseguire facilmente la migrazione di macchine potente toomore da pochi clic in Azure</span><span class="sxs-lookup"><span data-stu-id="feed5-112">Easily migrate toomore powerful machines by just a few clicks in Azure</span></span>
* <span data-ttu-id="feed5-113">**Ridondanza geografica tra** : con Azure geografica ridondanza, si può essere certi che l'infrastruttura sia a disponibilità elevata, tutto il mondo hello</span><span class="sxs-lookup"><span data-stu-id="feed5-113">**Cross-Geo Redundancy** – With Azure Geo Redundancy you can be assured that your infrastructure is highly available across hello globe</span></span>
* <span data-ttu-id="feed5-114">**Facile tooManage** – con opzioni di gestione semplificata elevata nel portale di Azure, la gestione dell'infrastruttura è molto semplice e senza problemi</span><span class="sxs-lookup"><span data-stu-id="feed5-114">**Easy tooManage** – With highly simplified management options in Azure portal, managing your infrastructure is very easy and hassle-free</span></span> 

## <a name="design-principles"></a><span data-ttu-id="feed5-115">Principi di progettazione</span><span class="sxs-lookup"><span data-stu-id="feed5-115">Design principles</span></span>
![Progettazione della distribuzione](./media/active-directory-aadconnect-azure-adfs/deployment.png)

<span data-ttu-id="feed5-117">diagramma di Hello sopra riportato mostra hello consigliato toostart topologia di base distribuzione dell'infrastruttura di ADFS in Azure.</span><span class="sxs-lookup"><span data-stu-id="feed5-117">hello diagram above shows hello recommended basic topology toostart deploying your AD FS infrastructure in Azure.</span></span> <span data-ttu-id="feed5-118">principi di Hello dietro hello vari componenti della topologia hello sono elencati di seguito:</span><span class="sxs-lookup"><span data-stu-id="feed5-118">hello principles behind hello various components of hello topology are listed below:</span></span>

* <span data-ttu-id="feed5-119">**Controller di dominio/server AD FS**: se il numero di utenti è inferiore a 1.000, è sufficiente installare il ruolo AD FS nei controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="feed5-119">**DC / ADFS Servers**: If you have fewer than 1,000 users you can simply install AD FS role on your domain controllers.</span></span> <span data-ttu-id="feed5-120">Se non si desidera che qualsiasi impatto sulle prestazioni nei controller di dominio hello o se sono presenti più di 1.000 utenti, quindi distribuire ADFS in server separati.</span><span class="sxs-lookup"><span data-stu-id="feed5-120">If you do not want any performance impact on hello domain controllers or if you have more than 1,000 users, then deploy AD FS on separate servers.</span></span>
* <span data-ttu-id="feed5-121">**Server WAP** : è necessario toodeploy Server Proxy applicazione Web, in modo che gli utenti possono raggiungere hello ADFS quando non sono nella rete aziendale hello anche.</span><span class="sxs-lookup"><span data-stu-id="feed5-121">**WAP Server** – it is necessary toodeploy Web Application Proxy servers, so that users can reach hello AD FS when they are not on hello company network also.</span></span>
* <span data-ttu-id="feed5-122">**Rete Perimetrale**: Server Proxy applicazione Web hello verranno inseriti nella rete Perimetrale hello e non è consentito l'accesso solo TCP/443 tra hello DMZ e subnet interna hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-122">**DMZ**: hello Web Application Proxy servers will be placed in hello DMZ and ONLY TCP/443 access is allowed between hello DMZ and hello internal subnet.</span></span>
* <span data-ttu-id="feed5-123">**Bilanciamento del carico**: tooensure un'elevata disponibilità dei server ADFS e Proxy applicazione Web, si consiglia di utilizzare un servizio di bilanciamento del carico interno per i server ADFS e bilanciamento del carico di Azure per i server Proxy applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="feed5-123">**Load Balancers**: tooensure high availability of AD FS and Web Application Proxy servers, we recommend using an internal load balancer for AD FS servers and Azure Load Balancer for Web Application Proxy servers.</span></span>
* <span data-ttu-id="feed5-124">**Set di disponibilità**: distribuzione di ADFS tooprovide ridondanza tooyour Active Directory, si consiglia di raggruppare due o più macchine virtuali in un Set di disponibilità per carichi di lavoro simili.</span><span class="sxs-lookup"><span data-stu-id="feed5-124">**Availability Sets**: tooprovide redundancy tooyour AD FS deployment, it is recommended that you group two or more virtual machines in an Availability Set for similar workloads.</span></span> <span data-ttu-id="feed5-125">Questa configurazione assicura che durante un evento di manutenzione pianificata o non pianificata sia disponibile almeno una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="feed5-125">This configuration ensures that during either a planned or unplanned maintenance event, at least one virtual machine will be available</span></span>
* <span data-ttu-id="feed5-126">**Gli account di archiviazione**: è consigliabile toohave due account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="feed5-126">**Storage Accounts**: It is recommended toohave two storage accounts.</span></span> <span data-ttu-id="feed5-127">Con un singolo account di archiviazione può causare toocreation di un singolo punto di errore e può causare hello distribuzione toobecome disponibile in uno scenario improbabile in cui account di archiviazione hello diventa inattivo.</span><span class="sxs-lookup"><span data-stu-id="feed5-127">Having a single storage account can lead toocreation of a single point of failure and can cause hello deployment toobecome unavailable in an unlikely scenario where hello storage account goes down.</span></span> <span data-ttu-id="feed5-128">Con due account di archiviazione è possibile associare un account di archiviazione per ogni linea di guasto.</span><span class="sxs-lookup"><span data-stu-id="feed5-128">Two storage accounts will help associate one storage account for each fault line.</span></span>
* <span data-ttu-id="feed5-129">**Separazione delle reti**: i server proxy applicazione Web verranno distribuiti in una rete perimetrale separata.</span><span class="sxs-lookup"><span data-stu-id="feed5-129">**Network segregation**:  Web Application Proxy servers should be deployed in a separate DMZ network.</span></span> <span data-ttu-id="feed5-130">È possibile suddividere una rete virtuale in due subnet e quindi distribuire il server Proxy applicazione Web hello in una subnet isolato.</span><span class="sxs-lookup"><span data-stu-id="feed5-130">You can divide one virtual network into two subnets and then deploy hello Web Application Proxy server(s) in an isolated subnet.</span></span> <span data-ttu-id="feed5-131">È possibile semplicemente configurare hello le impostazioni gruppo di sicurezza di rete per ogni subnet e consentire solo necessaria comunicazione tra due subnet hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-131">You can simply configure hello network security group settings for each subnet and allow only required communication between hello two subnets.</span></span> <span data-ttu-id="feed5-132">Altri dettagli sono riportati di seguito per i singoli scenari di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="feed5-132">More details are given per deployment scenario below</span></span>

## <a name="steps-toodeploy-ad-fs-in-azure"></a><span data-ttu-id="feed5-133">Passaggi toodeploy ADFS in Azure</span><span class="sxs-lookup"><span data-stu-id="feed5-133">Steps toodeploy AD FS in Azure</span></span>
<span data-ttu-id="feed5-134">i passaggi di Hello indicati in questa sezione struttura hello Guida toodeploy hello seguente rappresentate infrastruttura ADFS in Azure.</span><span class="sxs-lookup"><span data-stu-id="feed5-134">hello steps mentioned in this section outline hello guide toodeploy hello below depicted AD FS infrastructure in Azure.</span></span>

### <a name="1-deploying-hello-network"></a><span data-ttu-id="feed5-135">1. Distribuzione di rete hello</span><span class="sxs-lookup"><span data-stu-id="feed5-135">1. Deploying hello network</span></span>
<span data-ttu-id="feed5-136">Come indicato in precedenza, è possibile creare due subnet in una singola rete virtuale oppure creare due reti virtuali completamente diverse.</span><span class="sxs-lookup"><span data-stu-id="feed5-136">As outlined above, you can either create two subnets in a single virtual network or else create two completely different virtual networks (VNet).</span></span> <span data-ttu-id="feed5-137">Questo articolo è incentrato sulla distribuzione di una singola rete virtuale e sulla relativa divisione in due subnet.</span><span class="sxs-lookup"><span data-stu-id="feed5-137">This article will focus on deploying a single virtual network and divide it into two subnets.</span></span> <span data-ttu-id="feed5-138">Questo è un approccio più semplice, come un gateway di rete virtuale tooVNet richiederebbe due reti virtuali separate per le comunicazioni.</span><span class="sxs-lookup"><span data-stu-id="feed5-138">This is currently an easier approach as two separate VNets would require a VNet tooVNet gateway for communications.</span></span>

<span data-ttu-id="feed5-139">**1.1 Creare una rete virtuale**</span><span class="sxs-lookup"><span data-stu-id="feed5-139">**1.1 Create virtual network**</span></span>

![Creare una rete virtuale](./media/active-directory-aadconnect-azure-adfs/deploynetwork1.png)

<span data-ttu-id="feed5-141">In hello portale di Azure, selezionare rete virtuale ed è possibile distribuire la rete virtuale hello e una subnet immediatamente con un solo clic.</span><span class="sxs-lookup"><span data-stu-id="feed5-141">In hello Azure portal, select virtual network and you can deploy hello virtual network and one subnet immediately with just one click.</span></span> <span data-ttu-id="feed5-142">Subnet INT è definita ed è ora pronto per le macchine virtuali toobe aggiunto.</span><span class="sxs-lookup"><span data-stu-id="feed5-142">INT subnet is also defined and is ready now for VMs toobe added.</span></span>
<span data-ttu-id="feed5-143">passaggio successivo Hello è tooadd un'altra subnet toohello la rete, ad esempio hello DMZ subnet.</span><span class="sxs-lookup"><span data-stu-id="feed5-143">hello next step is tooadd another subnet toohello network, i.e. hello DMZ subnet.</span></span> <span data-ttu-id="feed5-144">toocreate hello subnet di rete Perimetrale, è sufficiente</span><span class="sxs-lookup"><span data-stu-id="feed5-144">toocreate hello DMZ subnet, simply</span></span>

* <span data-ttu-id="feed5-145">Selezionare la rete hello appena creato.</span><span class="sxs-lookup"><span data-stu-id="feed5-145">Select hello newly created network</span></span>
* <span data-ttu-id="feed5-146">Nelle proprietà hello selezionare subnet</span><span class="sxs-lookup"><span data-stu-id="feed5-146">In hello properties select subnet</span></span>
* <span data-ttu-id="feed5-147">Nella fare clic su Pannello di subnet hello in hello pulsante Aggiungi</span><span class="sxs-lookup"><span data-stu-id="feed5-147">In hello subnet panel click on hello add button</span></span>
* <span data-ttu-id="feed5-148">Fornire hello subnet nome e indirizzo spazio informazioni toocreate hello subnet</span><span class="sxs-lookup"><span data-stu-id="feed5-148">Provide hello subnet name and address space information toocreate hello subnet</span></span>

![Subnet](./media/active-directory-aadconnect-azure-adfs/deploynetwork2.png)

![Subnet DMZ](./media/active-directory-aadconnect-azure-adfs/deploynetwork3.png)

<span data-ttu-id="feed5-151">**1.2. La creazione di gruppi di sicurezza di rete hello**</span><span class="sxs-lookup"><span data-stu-id="feed5-151">**1.2. Creating hello network security groups**</span></span>

<span data-ttu-id="feed5-152">Un rete gruppo di sicurezza () contiene un elenco di regole di elenco di controllo di accesso (ACL) che consentono o negano il traffico di rete tooyour istanze di macchina virtuale in una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="feed5-152">A Network security group (NSG) contains a list of Access Control List (ACL) rules that allow or deny network traffic tooyour VM instances in a Virtual Network.</span></span> <span data-ttu-id="feed5-153">I gruppi di sicurezza di rete possono essere associati a subnet o singole istanze VM in una subnet.</span><span class="sxs-lookup"><span data-stu-id="feed5-153">NSGs can be associated with either subnets or individual VM instances within that subnet.</span></span> <span data-ttu-id="feed5-154">Quando un gruppo è associata a una subnet, regole ACL hello si applicano le istanze VM hello tooall nella subnet.</span><span class="sxs-lookup"><span data-stu-id="feed5-154">When an NSG is associated with a subnet, hello ACL rules apply tooall hello VM instances in that subnet.</span></span>
<span data-ttu-id="feed5-155">A scopo di hello di questa Guida, si creerà due NSGs: uno per una rete interna e una rete Perimetrale.</span><span class="sxs-lookup"><span data-stu-id="feed5-155">For hello purpose of this guidance, we will create two NSGs: one each for an internal network and a DMZ.</span></span> <span data-ttu-id="feed5-156">denominati rispettivamente NSG_INT e NSG_DMZ.</span><span class="sxs-lookup"><span data-stu-id="feed5-156">They will be labeled NSG_INT and NSG_DMZ respectively.</span></span>

![Creare un gruppo di sicurezza di rete](./media/active-directory-aadconnect-azure-adfs/creatensg1.png)

<span data-ttu-id="feed5-158">Dopo aver hello che gruppo viene creato, saranno presenti regole in uscita in ingresso e 0, 0.</span><span class="sxs-lookup"><span data-stu-id="feed5-158">After hello NSG is created, there will be 0 inbound and 0 outbound rules.</span></span> <span data-ttu-id="feed5-159">Dopo aver installato e funzionante ruoli hello nei rispettivi server di hello, quindi hello regole in entrata e in uscita possono essere reso secondo livello toohello desiderato di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="feed5-159">Once hello roles on hello respective servers are installed and functional, then hello inbound and outbound rules can be made according toohello desired level of security.</span></span>

![Inizializzare il gruppo di sicurezza di rete](./media/active-directory-aadconnect-azure-adfs/nsgint1.png)

<span data-ttu-id="feed5-161">Dopo aver creato hello NSGs, associare subnet NSG_INT INT e NSG_DMZ con subnet rete Perimetrale.</span><span class="sxs-lookup"><span data-stu-id="feed5-161">After hello NSGs are created, associate NSG_INT with subnet INT and NSG_DMZ with subnet DMZ.</span></span> <span data-ttu-id="feed5-162">Di seguito è riportato uno screenshot di esempio:</span><span class="sxs-lookup"><span data-stu-id="feed5-162">An example screenshot is given below:</span></span>

![Configurazione dei gruppi di sicurezza di rete](./media/active-directory-aadconnect-azure-adfs/nsgconfigure1.png)

* <span data-ttu-id="feed5-164">Fare clic su Pannello di hello tooopen subnet per subnet</span><span class="sxs-lookup"><span data-stu-id="feed5-164">Click on Subnets tooopen hello panel for subnets</span></span>
* <span data-ttu-id="feed5-165">Selezionare hello subnet tooassociate con hello NSG</span><span class="sxs-lookup"><span data-stu-id="feed5-165">Select hello subnet tooassociate with hello NSG</span></span> 

<span data-ttu-id="feed5-166">Dopo la configurazione, il pannello hello per le subnet dovrebbe essere simile di sotto:</span><span class="sxs-lookup"><span data-stu-id="feed5-166">After configuration, hello panel for Subnets should look like below:</span></span>

![Subnet dopo la configurazione dei gruppi di sicurezza di rete](./media/active-directory-aadconnect-azure-adfs/nsgconfigure2.png)

<span data-ttu-id="feed5-168">**1.3. Creare una connessione locale tooon**</span><span class="sxs-lookup"><span data-stu-id="feed5-168">**1.3. Create Connection tooon-premises**</span></span>

<span data-ttu-id="feed5-169">È necessario un connessione tooon sedi in ordine toodeploy hello controller di dominio (DC) in azure.</span><span class="sxs-lookup"><span data-stu-id="feed5-169">We will need a connection tooon-premises in order toodeploy hello domain controller (DC) in azure.</span></span> <span data-ttu-id="feed5-170">Azure offre vari tooconnect opzioni di connettività del tooyour infrastruttura on-premise infrastruttura di Azure.</span><span class="sxs-lookup"><span data-stu-id="feed5-170">Azure offers various connectivity options tooconnect your on-premises infrastructure tooyour Azure infrastructure.</span></span>

* <span data-ttu-id="feed5-171">Da punto a sito</span><span class="sxs-lookup"><span data-stu-id="feed5-171">Point-to-site</span></span>
* <span data-ttu-id="feed5-172">Da sito a sito di rete virtuale</span><span class="sxs-lookup"><span data-stu-id="feed5-172">Virtual Network Site-to-site</span></span>
* <span data-ttu-id="feed5-173">ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="feed5-173">ExpressRoute</span></span>

<span data-ttu-id="feed5-174">È consigliabile toouse ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="feed5-174">It is recommended toouse ExpressRoute.</span></span> <span data-ttu-id="feed5-175">ExpressRoute consente di creare connessioni private tra i data center di Azure e l'infrastruttura disponibile localmente o in un ambiente con percorso condiviso.</span><span class="sxs-lookup"><span data-stu-id="feed5-175">ExpressRoute lets you create private connections between Azure datacenters and infrastructure that’s on your premises or in a co-location environment.</span></span> <span data-ttu-id="feed5-176">Le connessioni ExpressRoute non sfruttano hello rete Internet pubblica.</span><span class="sxs-lookup"><span data-stu-id="feed5-176">ExpressRoute connections do not go over hello public Internet.</span></span> <span data-ttu-id="feed5-177">Offrono ulteriori affidabilità, velocità più elevate, minori latenze e una maggiore sicurezza rispetto alle connessioni tramite hello Internet.</span><span class="sxs-lookup"><span data-stu-id="feed5-177">They offer more reliability, faster speeds, lower latencies and higher security than typical connections over hello Internet.</span></span>
<span data-ttu-id="feed5-178">Sebbene sia consigliabile toouse ExpressRoute, è possibile scegliere qualsiasi metodo di connessione più adatto per l'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="feed5-178">While it is recommended toouse ExpressRoute, you may choose any connection method best suited for your organization.</span></span> <span data-ttu-id="feed5-179">informazioni su ExpressRoute e hello toolearn varie opzioni di connettività con ExpressRoute, leggere [Panoramica tecnica su ExpressRoute](https://aka.ms/Azure/ExpressRoute).</span><span class="sxs-lookup"><span data-stu-id="feed5-179">toolearn more about ExpressRoute and hello various connectivity options using ExpressRoute, read [ExpressRoute technical overview](https://aka.ms/Azure/ExpressRoute).</span></span>

### <a name="2-create-storage-accounts"></a><span data-ttu-id="feed5-180">2. Creare gli account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="feed5-180">2. Create storage accounts</span></span>
<span data-ttu-id="feed5-181">La disponibilità elevata di ordine toomaintain ed evitare una dipendenza da un singolo account di archiviazione, è possibile creare due account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="feed5-181">In order toomaintain high availability and avoid dependence on a single storage account, you can create two storage accounts.</span></span> <span data-ttu-id="feed5-182">Dividere macchine hello in ogni set di disponibilità in due gruppi e quindi assegnare ogni gruppo di un account di archiviazione separata.</span><span class="sxs-lookup"><span data-stu-id="feed5-182">Divide hello machines in each availability set into two groups and then assign each group a separate storage account.</span></span>

![Creare gli account di archiviazione](./media/active-directory-aadconnect-azure-adfs/storageaccount1.png)

### <a name="3-create-availability-sets"></a><span data-ttu-id="feed5-184">3. Creare set di disponibilità</span><span class="sxs-lookup"><span data-stu-id="feed5-184">3. Create availability sets</span></span>
<span data-ttu-id="feed5-185">Per ogni ruolo (controller di dominio/AD FS e WAP), creare set di disponibilità che conterrà 2 macchine ogni a hello minimo.</span><span class="sxs-lookup"><span data-stu-id="feed5-185">For each role (DC/AD FS and WAP), create availability sets that will contain 2 machines each at hello minimum.</span></span> <span data-ttu-id="feed5-186">Sarà così possibile ottenere una disponibilità più elevata per ogni ruolo.</span><span class="sxs-lookup"><span data-stu-id="feed5-186">This will help achieve higher availability for each role.</span></span> <span data-ttu-id="feed5-187">Mentre il set di disponibilità di hello creazione, è essenziale toodecide successivo hello:</span><span class="sxs-lookup"><span data-stu-id="feed5-187">While creating hello availability sets, it is essential toodecide on hello following:</span></span>

* <span data-ttu-id="feed5-188">**Domini di errore**: hello di macchine virtuali nella stessa condivisione di dominio di errore hello stessa alimentazione e switch di rete fisica.</span><span class="sxs-lookup"><span data-stu-id="feed5-188">**Fault Domains**: Virtual machines in hello same fault domain share hello same power source and physical network switch.</span></span> <span data-ttu-id="feed5-189">È consigliabile usare almeno 2 domini di errore.</span><span class="sxs-lookup"><span data-stu-id="feed5-189">A minimum of 2 fault domains are recommended.</span></span> <span data-ttu-id="feed5-190">valore predefinito di Hello è 3 e che è possibile lasciarla invariata per hello scopo della distribuzione</span><span class="sxs-lookup"><span data-stu-id="feed5-190">hello default value is 3 and you can leave it as is for hello purpose of this deployment</span></span>
* <span data-ttu-id="feed5-191">**Domini di aggiornamento**: macchine appartenenti toohello nello stesso dominio di aggiornamento vengono riavviate insieme durante un aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="feed5-191">**Update domains**: Machines belonging toohello same update domain are restarted together during an update.</span></span> <span data-ttu-id="feed5-192">Si desidera toohave minimo 2 di domini di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="feed5-192">You want toohave minimum of 2 update domains.</span></span> <span data-ttu-id="feed5-193">valore predefinito di Hello è 5 ed è possibile lasciarla invariata per hello scopo della distribuzione</span><span class="sxs-lookup"><span data-stu-id="feed5-193">hello default value is 5 and you can leave it as is for hello purpose of this deployment</span></span>

![Set di disponibilità](./media/active-directory-aadconnect-azure-adfs/availabilityset1.png)

<span data-ttu-id="feed5-195">Creare set di disponibilità seguenti hello</span><span class="sxs-lookup"><span data-stu-id="feed5-195">Create hello following availability sets</span></span>

| <span data-ttu-id="feed5-196">Set di disponibilità</span><span class="sxs-lookup"><span data-stu-id="feed5-196">Availability Set</span></span> | <span data-ttu-id="feed5-197">Ruolo</span><span class="sxs-lookup"><span data-stu-id="feed5-197">Role</span></span> | <span data-ttu-id="feed5-198">Domini di errore</span><span class="sxs-lookup"><span data-stu-id="feed5-198">Fault domains</span></span> | <span data-ttu-id="feed5-199">Domini di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="feed5-199">Update domains</span></span> |
|:---:|:---:|:---:|:--- |
| <span data-ttu-id="feed5-200">contosodcset</span><span class="sxs-lookup"><span data-stu-id="feed5-200">contosodcset</span></span> |<span data-ttu-id="feed5-201">Controller di dominio/AD FS</span><span class="sxs-lookup"><span data-stu-id="feed5-201">DC/ADFS</span></span> |<span data-ttu-id="feed5-202">3</span><span class="sxs-lookup"><span data-stu-id="feed5-202">3</span></span> |<span data-ttu-id="feed5-203">5</span><span class="sxs-lookup"><span data-stu-id="feed5-203">5</span></span> |
| <span data-ttu-id="feed5-204">contosowapset</span><span class="sxs-lookup"><span data-stu-id="feed5-204">contosowapset</span></span> |<span data-ttu-id="feed5-205">WAP</span><span class="sxs-lookup"><span data-stu-id="feed5-205">WAP</span></span> |<span data-ttu-id="feed5-206">3</span><span class="sxs-lookup"><span data-stu-id="feed5-206">3</span></span> |<span data-ttu-id="feed5-207">5</span><span class="sxs-lookup"><span data-stu-id="feed5-207">5</span></span> |

### <a name="4-deploy-virtual-machines"></a><span data-ttu-id="feed5-208">4. Distribuire le macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="feed5-208">4. Deploy virtual machines</span></span>
<span data-ttu-id="feed5-209">passaggio successivo Hello è toodeploy le macchine virtuali che ospiteranno hello ruoli diversi all'interno dell'infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="feed5-209">hello next step is toodeploy virtual machines that will host hello different roles in your infrastructure.</span></span> <span data-ttu-id="feed5-210">In ogni set di disponibilità è consigliato un minimo di due computer.</span><span class="sxs-lookup"><span data-stu-id="feed5-210">A minimum of two machines are recommended in each availability set.</span></span> <span data-ttu-id="feed5-211">Creare quattro macchine virtuali per la distribuzione di base hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-211">Create four virtual machines for hello basic deployment.</span></span>

| <span data-ttu-id="feed5-212">Machine</span><span class="sxs-lookup"><span data-stu-id="feed5-212">Machine</span></span> | <span data-ttu-id="feed5-213">Ruolo</span><span class="sxs-lookup"><span data-stu-id="feed5-213">Role</span></span> | <span data-ttu-id="feed5-214">Subnet</span><span class="sxs-lookup"><span data-stu-id="feed5-214">Subnet</span></span> | <span data-ttu-id="feed5-215">Set di disponibilità</span><span class="sxs-lookup"><span data-stu-id="feed5-215">Availability set</span></span> | <span data-ttu-id="feed5-216">Account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="feed5-216">Storage account</span></span> | <span data-ttu-id="feed5-217">Indirizzo IP</span><span class="sxs-lookup"><span data-stu-id="feed5-217">IP Address</span></span> |
|:---:|:---:|:---:|:---:|:---:|:---:|
| <span data-ttu-id="feed5-218">contosodc1</span><span class="sxs-lookup"><span data-stu-id="feed5-218">contosodc1</span></span> |<span data-ttu-id="feed5-219">Controller di dominio/AD FS</span><span class="sxs-lookup"><span data-stu-id="feed5-219">DC/ADFS</span></span> |<span data-ttu-id="feed5-220">INT</span><span class="sxs-lookup"><span data-stu-id="feed5-220">INT</span></span> |<span data-ttu-id="feed5-221">contosodcset</span><span class="sxs-lookup"><span data-stu-id="feed5-221">contosodcset</span></span> |<span data-ttu-id="feed5-222">contososac1</span><span class="sxs-lookup"><span data-stu-id="feed5-222">contososac1</span></span> |<span data-ttu-id="feed5-223">Static</span><span class="sxs-lookup"><span data-stu-id="feed5-223">Static</span></span> |
| <span data-ttu-id="feed5-224">contosodc2</span><span class="sxs-lookup"><span data-stu-id="feed5-224">contosodc2</span></span> |<span data-ttu-id="feed5-225">Controller di dominio/AD FS</span><span class="sxs-lookup"><span data-stu-id="feed5-225">DC/ADFS</span></span> |<span data-ttu-id="feed5-226">INT</span><span class="sxs-lookup"><span data-stu-id="feed5-226">INT</span></span> |<span data-ttu-id="feed5-227">contosodcset</span><span class="sxs-lookup"><span data-stu-id="feed5-227">contosodcset</span></span> |<span data-ttu-id="feed5-228">contososac2</span><span class="sxs-lookup"><span data-stu-id="feed5-228">contososac2</span></span> |<span data-ttu-id="feed5-229">Static</span><span class="sxs-lookup"><span data-stu-id="feed5-229">Static</span></span> |
| <span data-ttu-id="feed5-230">contosowap1</span><span class="sxs-lookup"><span data-stu-id="feed5-230">contosowap1</span></span> |<span data-ttu-id="feed5-231">WAP</span><span class="sxs-lookup"><span data-stu-id="feed5-231">WAP</span></span> |<span data-ttu-id="feed5-232">Rete perimetrale</span><span class="sxs-lookup"><span data-stu-id="feed5-232">DMZ</span></span> |<span data-ttu-id="feed5-233">contosowapset</span><span class="sxs-lookup"><span data-stu-id="feed5-233">contosowapset</span></span> |<span data-ttu-id="feed5-234">contososac1</span><span class="sxs-lookup"><span data-stu-id="feed5-234">contososac1</span></span> |<span data-ttu-id="feed5-235">Static</span><span class="sxs-lookup"><span data-stu-id="feed5-235">Static</span></span> |
| <span data-ttu-id="feed5-236">contosowap2</span><span class="sxs-lookup"><span data-stu-id="feed5-236">contosowap2</span></span> |<span data-ttu-id="feed5-237">WAP</span><span class="sxs-lookup"><span data-stu-id="feed5-237">WAP</span></span> |<span data-ttu-id="feed5-238">Rete perimetrale</span><span class="sxs-lookup"><span data-stu-id="feed5-238">DMZ</span></span> |<span data-ttu-id="feed5-239">contosowapset</span><span class="sxs-lookup"><span data-stu-id="feed5-239">contosowapset</span></span> |<span data-ttu-id="feed5-240">contososac2</span><span class="sxs-lookup"><span data-stu-id="feed5-240">contososac2</span></span> |<span data-ttu-id="feed5-241">Static</span><span class="sxs-lookup"><span data-stu-id="feed5-241">Static</span></span> |

<span data-ttu-id="feed5-242">Come è possibile osservare, non sono stati specificati gruppi di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="feed5-242">As you might have noticed, no NSG has been specified.</span></span> <span data-ttu-id="feed5-243">In questo modo azure consente di utilizzare gruppo a livello di subnet hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-243">This is because azure lets you use NSG at hello subnet level.</span></span> <span data-ttu-id="feed5-244">Quindi, è possibile controllare il traffico di rete di computer utilizzando hello che NSG singoli associato non subnet hello oppure oggetto NIC hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-244">Then, you can control machine network traffic by using hello individual NSG associated with either hello subnet or else hello NIC object.</span></span> <span data-ttu-id="feed5-245">Per altre informazioni, vedere [Che cos'è un gruppo di sicurezza di rete](https://aka.ms/Azure/NSG).</span><span class="sxs-lookup"><span data-stu-id="feed5-245">Read more on [What is a Network Security Group (NSG)](https://aka.ms/Azure/NSG).</span></span>
<span data-ttu-id="feed5-246">Indirizzo IP statico è consigliato se si sta gestendo hello DNS.</span><span class="sxs-lookup"><span data-stu-id="feed5-246">Static IP address is recommended if you are managing hello DNS.</span></span> <span data-ttu-id="feed5-247">È possibile usare DNS di Azure e invece hello i record DNS per il dominio, fare riferimento toohello nuove macchine da loro FQDN di Azure.</span><span class="sxs-lookup"><span data-stu-id="feed5-247">You can use Azure DNS and instead in hello DNS records for your domain, refer toohello new machines by their Azure FQDNs.</span></span>
<span data-ttu-id="feed5-248">Il riquadro di macchina virtuale dovrebbe essere simile di sotto, dopo aver completata la distribuzione di hello:</span><span class="sxs-lookup"><span data-stu-id="feed5-248">Your virtual machine pane should look like below after hello deployment is completed:</span></span>

![Macchine virtuali distribuite](./media/active-directory-aadconnect-azure-adfs/virtualmachinesdeployed_noadfs.png)

### <a name="5-configuring-hello-domain-controller--ad-fs-servers"></a><span data-ttu-id="feed5-250">5. Configurazione dei controller di dominio hello / server AD FS</span><span class="sxs-lookup"><span data-stu-id="feed5-250">5. Configuring hello domain controller / AD FS servers</span></span>
 <span data-ttu-id="feed5-251">In ordine tooauthenticate qualsiasi richiesta in ingresso, ADFS sarà necessario controller di dominio toocontact hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-251">In order tooauthenticate any incoming request, AD FS will need toocontact hello domain controller.</span></span> <span data-ttu-id="feed5-252">toosave hello costose di andata e ritorno da controller di dominio di Azure tooon locale per l'autenticazione, è consigliabile toodeploy una replica del controller di dominio hello in Azure.</span><span class="sxs-lookup"><span data-stu-id="feed5-252">toosave hello costly trip from Azure tooon-premises DC for authentication, it is recommended toodeploy a replica of hello domain controller in Azure.</span></span> <span data-ttu-id="feed5-253">In ordine tooattain a disponibilità elevata è consigliabile toocreate un gruppo di disponibilità di almeno 2 controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="feed5-253">In order tooattain high availability, it is recommended toocreate an availability set of at-least 2 domain controllers.</span></span>

| <span data-ttu-id="feed5-254">Controller di dominio</span><span class="sxs-lookup"><span data-stu-id="feed5-254">Domain controller</span></span> | <span data-ttu-id="feed5-255">Ruolo</span><span class="sxs-lookup"><span data-stu-id="feed5-255">Role</span></span> | <span data-ttu-id="feed5-256">Account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="feed5-256">Storage account</span></span> |
|:---:|:---:|:---:|
| <span data-ttu-id="feed5-257">contosodc1</span><span class="sxs-lookup"><span data-stu-id="feed5-257">contosodc1</span></span> |<span data-ttu-id="feed5-258">Replica</span><span class="sxs-lookup"><span data-stu-id="feed5-258">Replica</span></span> |<span data-ttu-id="feed5-259">contososac1</span><span class="sxs-lookup"><span data-stu-id="feed5-259">contososac1</span></span> |
| <span data-ttu-id="feed5-260">contosodc2</span><span class="sxs-lookup"><span data-stu-id="feed5-260">contosodc2</span></span> |<span data-ttu-id="feed5-261">Replica</span><span class="sxs-lookup"><span data-stu-id="feed5-261">Replica</span></span> |<span data-ttu-id="feed5-262">contososac2</span><span class="sxs-lookup"><span data-stu-id="feed5-262">contososac2</span></span> |

* <span data-ttu-id="feed5-263">Promuovere i due server hello come controller di dominio di replica con DNS</span><span class="sxs-lookup"><span data-stu-id="feed5-263">Promote hello two servers as replica domain controllers with DNS</span></span>
* <span data-ttu-id="feed5-264">Configurare i server di hello ADFS installando il ruolo di hello AD FS con server manager di hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-264">Configure hello AD FS servers by installing hello AD FS role using hello server manager.</span></span>

### <a name="6-deploying-internal-load-balancer-ilb"></a><span data-ttu-id="feed5-265">6. Distribuire il servizio di bilanciamento del carico interno</span><span class="sxs-lookup"><span data-stu-id="feed5-265">6. Deploying Internal Load Balancer (ILB)</span></span>
<span data-ttu-id="feed5-266">**6.1. Creare hello bilanciamento del carico interno**</span><span class="sxs-lookup"><span data-stu-id="feed5-266">**6.1. Create hello ILB**</span></span>

<span data-ttu-id="feed5-267">toodeploy un bilanciamento del carico interno, selezionare i bilanciamenti del carico in hello portale di Azure e fare clic su Aggiungi (+).</span><span class="sxs-lookup"><span data-stu-id="feed5-267">toodeploy an ILB, select Load Balancers in hello Azure portal and click on add (+).</span></span>

> [!NOTE]
> <span data-ttu-id="feed5-268">Se non viene visualizzato **bilanciamenti del carico** nel menu, fare clic su **Sfoglia** in hello inferiore sinistro del portale hello e scorrere fino a visualizzare **bilanciamenti del carico**.</span><span class="sxs-lookup"><span data-stu-id="feed5-268">if you do not see **Load Balancers** in your menu, click **Browse** in hello lower left of hello portal and scroll until you see **Load Balancers**.</span></span>  <span data-ttu-id="feed5-269">Quindi fare clic su tooadd stella gialla hello è tooyour menu.</span><span class="sxs-lookup"><span data-stu-id="feed5-269">Then click hello yellow star tooadd it tooyour menu.</span></span> <span data-ttu-id="feed5-270">A questo punto selezionare hello nuova icona tooopen hello pannello toobegin configurazione di bilanciamento carico di bilanciamento del carico hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-270">Now select hello new load balancer icon tooopen hello panel toobegin configuration of hello load balancer.</span></span>
> 
> 

![Visualizzazione di Servizi di bilanciamento del carico](./media/active-directory-aadconnect-azure-adfs/browseloadbalancer.png)

* <span data-ttu-id="feed5-272">**Nome**: assegnare bilanciamento del carico di toohello qualsiasi nome appropriato</span><span class="sxs-lookup"><span data-stu-id="feed5-272">**Name**: Give any suitable name toohello load balancer</span></span>
* <span data-ttu-id="feed5-273">**Schema**: poiché il bilanciamento del carico verrà inserito davanti al server hello AD FS e per le connessioni di rete interna solo, selezionare "Interno"</span><span class="sxs-lookup"><span data-stu-id="feed5-273">**Scheme**: Since this load balancer will be placed in front of hello AD FS servers and is meant for internal network connections ONLY, select “Internal”</span></span>
* <span data-ttu-id="feed5-274">**Rete virtuale**: scegliere hello rete virtuale in cui si intende distribuire ADFS</span><span class="sxs-lookup"><span data-stu-id="feed5-274">**Virtual Network**: Choose hello virtual network where you are deploying your AD FS</span></span>
* <span data-ttu-id="feed5-275">**Subnet**: scegliere una subnet interna di hello qui</span><span class="sxs-lookup"><span data-stu-id="feed5-275">**Subnet**: Choose hello internal subnet here</span></span>
* <span data-ttu-id="feed5-276">**Assegnazione di indirizzi IP**: statici</span><span class="sxs-lookup"><span data-stu-id="feed5-276">**IP Address assignment**: Static</span></span>

![Servizio di bilanciamento del carico interno](./media/active-directory-aadconnect-azure-adfs/ilbdeployment1.png)

<span data-ttu-id="feed5-278">Dopo aver fatto clic creare hello bilanciamento del carico interno viene distribuito, verrà visualizzato nell'elenco di hello di servizi di bilanciamento del carico:</span><span class="sxs-lookup"><span data-stu-id="feed5-278">After you click create and hello ILB is deployed, you should see it in hello list of load balancers:</span></span>

![Servizi di bilanciamento del carico dopo la distribuzione del servizio di bilanciamento del carico interno](./media/active-directory-aadconnect-azure-adfs/ilbdeployment2.png)

<span data-ttu-id="feed5-280">Passaggio successivo è tooconfigure pool back-end hello e un probe di hello back-end.</span><span class="sxs-lookup"><span data-stu-id="feed5-280">Next step is tooconfigure hello backend pool and hello backend probe.</span></span>

<span data-ttu-id="feed5-281">**6.2. Configurare il pool back-end del servizio di bilanciamento del carico interno**</span><span class="sxs-lookup"><span data-stu-id="feed5-281">**6.2. Configure ILB backend pool**</span></span>

<span data-ttu-id="feed5-282">Seleziona hello appena creato ILB nel Pannello di hello bilanciamenti del carico.</span><span class="sxs-lookup"><span data-stu-id="feed5-282">Select hello newly created ILB in hello Load Balancers panel.</span></span> <span data-ttu-id="feed5-283">Verrà aperto il pannello di impostazioni hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-283">It will open hello settings panel.</span></span> 

1. <span data-ttu-id="feed5-284">Selezionare il pool back-end dal pannello impostazioni hello</span><span class="sxs-lookup"><span data-stu-id="feed5-284">Select backend pools from hello settings panel</span></span>
2. <span data-ttu-id="feed5-285">In hello aggiungere riquadro pool back-end, fare clic sulla macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="feed5-285">In hello add backend pool panel, click on add virtual machine</span></span>
3. <span data-ttu-id="feed5-286">Verrà visualizzato un pannello in cui è possibile scegliere un set di disponibilità</span><span class="sxs-lookup"><span data-stu-id="feed5-286">You will be presented with a panel where you can choose availability set</span></span>
4. <span data-ttu-id="feed5-287">Scegliere il set di disponibilità hello AD FS</span><span class="sxs-lookup"><span data-stu-id="feed5-287">Choose hello AD FS availability set</span></span>

![Configurare il pool back-end del servizio di bilanciamento del carico interno](./media/active-directory-aadconnect-azure-adfs/ilbdeployment3.png)

<span data-ttu-id="feed5-289">**6.3. Configurare il probe**</span><span class="sxs-lookup"><span data-stu-id="feed5-289">**6.3. Configuring probe**</span></span>

<span data-ttu-id="feed5-290">Nel pannello impostazioni di bilanciamento del carico interno hello selezionare probe.</span><span class="sxs-lookup"><span data-stu-id="feed5-290">In hello ILB settings panel, select Probes.</span></span>

1. <span data-ttu-id="feed5-291">Fare clic su Aggiungi</span><span class="sxs-lookup"><span data-stu-id="feed5-291">Click on add</span></span>
2. <span data-ttu-id="feed5-292">Specificare i dettagli del probe a.</span><span class="sxs-lookup"><span data-stu-id="feed5-292">Provide details for probe a.</span></span> <span data-ttu-id="feed5-293">**Nome**: nome del probe b.</span><span class="sxs-lookup"><span data-stu-id="feed5-293">**Name**: Probe name b.</span></span> <span data-ttu-id="feed5-294">**Protocollo**: TCP c.</span><span class="sxs-lookup"><span data-stu-id="feed5-294">**Protocol**: TCP c.</span></span> <span data-ttu-id="feed5-295">**Porta**: 443 (HTTPS) d.</span><span class="sxs-lookup"><span data-stu-id="feed5-295">**Port**: 443 (HTTPS) d.</span></span> <span data-ttu-id="feed5-296">**Intervallo**: 5 (valore predefinito): si tratta di intervallo hello in corrispondenza del quale verrà probe macchine hello in pool back-end hello e di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="feed5-296">**Interval**: 5 (default value) – this is hello interval at which ILB will probe hello machines in hello backend pool e.</span></span> <span data-ttu-id="feed5-297">**Limite di soglia non integra**: 2 (predefinito val ue): si tratta di hello soglia degli errori di probe consecutivi dopo cui bilanciamento del carico interno verrà dichiarato una macchina in hello back-end del pool non risponde e interrompere l'invio del traffico tooit.</span><span class="sxs-lookup"><span data-stu-id="feed5-297">**Unhealthy threshold limit**: 2 (default val ue) – this is hello threshold of consecutive probe failures after which ILB will declare a machine in hello backend pool non-responsive and stop sending traffic tooit.</span></span>

![Configurare il probe del servizio di bilanciamento del carico interno](./media/active-directory-aadconnect-azure-adfs/ilbdeployment4.png)

<span data-ttu-id="feed5-299">**6.4. Creare le regole di bilanciamento del carico**</span><span class="sxs-lookup"><span data-stu-id="feed5-299">**6.4. Create load balancing rules**</span></span>

<span data-ttu-id="feed5-300">Ordine tooeffectively saldo hello del traffico, hello bilanciamento del carico interno deve essere configurato con regole di bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="feed5-300">In order tooeffectively balance hello traffic, hello ILB should be configured with load balancing rules.</span></span> <span data-ttu-id="feed5-301">In ordine toocreate una regola di bilanciamento del carico,</span><span class="sxs-lookup"><span data-stu-id="feed5-301">In order toocreate a load balancing rule,</span></span> 

1. <span data-ttu-id="feed5-302">Selezionare una regola dal pannello impostazioni hello di hello ILB di bilanciamento del carico</span><span class="sxs-lookup"><span data-stu-id="feed5-302">Select Load balancing rule from hello settings panel of hello ILB</span></span>
2. <span data-ttu-id="feed5-303">Fare clic su Aggiungi nel hello pannello regole di bilanciamento del carico</span><span class="sxs-lookup"><span data-stu-id="feed5-303">Click on Add in hello Load balancing rule panel</span></span>
3. <span data-ttu-id="feed5-304">In hello Aggiungi pannello regola bilanciamento di carico una.</span><span class="sxs-lookup"><span data-stu-id="feed5-304">In hello Add load balancing rule panel a.</span></span> <span data-ttu-id="feed5-305">**Nome**: specificare un nome per la regola hello b.</span><span class="sxs-lookup"><span data-stu-id="feed5-305">**Name**: Provide a name for hello rule b.</span></span> <span data-ttu-id="feed5-306">**Protocollo**: selezionare TCP c.</span><span class="sxs-lookup"><span data-stu-id="feed5-306">**Protocol**: Select TCP c.</span></span> <span data-ttu-id="feed5-307">**Porta**: 443 d.</span><span class="sxs-lookup"><span data-stu-id="feed5-307">**Port**: 443 d.</span></span> <span data-ttu-id="feed5-308">**Porta back-end**: 443 e.</span><span class="sxs-lookup"><span data-stu-id="feed5-308">**Backend port**: 443 e.</span></span> <span data-ttu-id="feed5-309">**Pool back-end**: selezionare il pool di hello creato per AD FS hello cluster f precedenti.</span><span class="sxs-lookup"><span data-stu-id="feed5-309">**Backend pool**: Select hello pool you created for hello AD FS cluster earlier f.</span></span> <span data-ttu-id="feed5-310">**Probe**: probe hello selezionare creato in precedenza per i server ADFS</span><span class="sxs-lookup"><span data-stu-id="feed5-310">**Probe**: Select hello probe created for AD FS servers earlier</span></span>

![Configurare le regole di bilanciamento del servizio di bilanciamento del carico interno](./media/active-directory-aadconnect-azure-adfs/ilbdeployment5.png)

<span data-ttu-id="feed5-312">**6.5. Aggiornare il DNS con il servizio di bilanciamento del carico interno**</span><span class="sxs-lookup"><span data-stu-id="feed5-312">**6.5. Update DNS with ILB**</span></span>

<span data-ttu-id="feed5-313">Passare i server DNS tooyour e creare un record CNAME per hello bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="feed5-313">Go tooyour DNS server and create a CNAME for hello ILB.</span></span> <span data-ttu-id="feed5-314">Hello CNAME deve essere per servizio federativo hello con indirizzo IP hello verso toohello l'indirizzo IP del bilanciamento del carico interno hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-314">hello CNAME should be for hello federation service with hello IP address pointing toohello IP address of hello ILB.</span></span> <span data-ttu-id="feed5-315">Ad esempio se hello indirizzo DIP di bilanciamento del carico interno è 10.3.0.8 e il servizio federativo hello installato è fs.contoso.com, quindi creare un record CNAME per fs.contoso.com verso too10.3.0.8.</span><span class="sxs-lookup"><span data-stu-id="feed5-315">For example if hello ILB DIP address is 10.3.0.8, and hello federation service installed is fs.contoso.com, then create a CNAME for fs.contoso.com pointing too10.3.0.8.</span></span>
<span data-ttu-id="feed5-316">Ciò garantisce che tutte le comunicazioni relative fs.contoso.com finire in hello bilanciamento del carico interno e sono indirizzati in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="feed5-316">This will ensure that all communication regarding fs.contoso.com end up at hello ILB and are appropriately routed.</span></span>

### <a name="7-configuring-hello-web-application-proxy-server"></a><span data-ttu-id="feed5-317">7. Configurazione dei server Proxy applicazione Web hello</span><span class="sxs-lookup"><span data-stu-id="feed5-317">7. Configuring hello Web Application Proxy server</span></span>
<span data-ttu-id="feed5-318">**7.1. Configurazione dei server di hello Proxy applicazione Web Server tooreach AD FS**</span><span class="sxs-lookup"><span data-stu-id="feed5-318">**7.1. Configuring hello Web Application Proxy servers tooreach AD FS servers**</span></span>

<span data-ttu-id="feed5-319">In ordine tooensure che i server Proxy applicazione Web sono server di hello ADFS in grado di tooreach dietro hello ILB, creare un record in hello %systemroot%\system32\drivers\etc\hosts per hello bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="feed5-319">In order tooensure that Web Application Proxy servers are able tooreach hello AD FS servers behind hello ILB, create a record in hello %systemroot%\system32\drivers\etc\hosts for hello ILB.</span></span> <span data-ttu-id="feed5-320">Si noti che il nome distinto (DN) hello devono essere nome del servizio federativo hello, ad esempio fs.contoso.com. E voce hello dell'indirizzo IP deve essere quello di indirizzo IP del ILB hello (10.3.0.8 come esempio hello).</span><span class="sxs-lookup"><span data-stu-id="feed5-320">Note that hello distinguished name (DN) should be hello federation service name, for example fs.contoso.com. And hello IP entry should be that of hello ILB’s IP address (10.3.0.8 as in hello example).</span></span>

<span data-ttu-id="feed5-321">**7.2. Installare il ruolo di Proxy applicazione Web hello**</span><span class="sxs-lookup"><span data-stu-id="feed5-321">**7.2. Installing hello Web Application Proxy role**</span></span>

<span data-ttu-id="feed5-322">Dopo avere verificato che i server Proxy applicazione Web sono server di hello ADFS in grado di tooreach dietro bilanciamento del carico interno, è possibile installare successivamente il server di Proxy applicazione Web hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-322">After you ensure that Web Application Proxy servers are able tooreach hello AD FS servers behind ILB, you can next install hello Web Application Proxy servers.</span></span> <span data-ttu-id="feed5-323">Server Proxy applicazione Web non essere toohello aggiunti a un dominio.</span><span class="sxs-lookup"><span data-stu-id="feed5-323">Web Application Proxy servers do not be joined toohello domain.</span></span> <span data-ttu-id="feed5-324">Installare ruoli del Proxy applicazione Web hello in due server Proxy applicazione Web di hello selezionando il ruolo di accesso remoto hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-324">Install hello Web Application Proxy roles on hello two Web Application Proxy servers by selecting hello Remote Access role.</span></span> <span data-ttu-id="feed5-325">gestione di server Hello consentirà di installazione di toocomplete hello WAP.</span><span class="sxs-lookup"><span data-stu-id="feed5-325">hello server manager will guide you toocomplete hello WAP installation.</span></span>
<span data-ttu-id="feed5-326">Per ulteriori informazioni su come leggere toodeploy WAP, [installare e configurare i Server Proxy applicazione Web hello](https://technet.microsoft.com/library/dn383662.aspx).</span><span class="sxs-lookup"><span data-stu-id="feed5-326">For more information on how toodeploy WAP, read [Install and Configure hello Web Application Proxy Server](https://technet.microsoft.com/library/dn383662.aspx).</span></span>

### <a name="8--deploying-hello-internet-facing-public-load-balancer"></a><span data-ttu-id="feed5-327">8.  Distribuzione di hello bilanciamento del carico Internet affiancate (pubblico)</span><span class="sxs-lookup"><span data-stu-id="feed5-327">8.  Deploying hello Internet Facing (Public) Load Balancer</span></span>
<span data-ttu-id="feed5-328">**8.1.  Creare il servizio di bilanciamento del carico con connessione Internet (pubblico)**</span><span class="sxs-lookup"><span data-stu-id="feed5-328">**8.1.  Create Internet Facing (Public) Load Balancer**</span></span>

<span data-ttu-id="feed5-329">Nel portale di Azure hello, selezionare servizi di bilanciamento del carico e quindi fare clic su Aggiungi.</span><span class="sxs-lookup"><span data-stu-id="feed5-329">In hello Azure portal, select Load balancers and then click on Add.</span></span> <span data-ttu-id="feed5-330">Nel pannello del servizio di bilanciamento carico di hello crea, immettere le seguenti informazioni hello</span><span class="sxs-lookup"><span data-stu-id="feed5-330">In hello Create load balancer panel, enter hello following information</span></span>

1. <span data-ttu-id="feed5-331">**Nome**: nome del servizio di bilanciamento del carico hello</span><span class="sxs-lookup"><span data-stu-id="feed5-331">**Name**: Name for hello load balancer</span></span>
2. <span data-ttu-id="feed5-332">**Schema**: Pubblico. Questa opzione indica ad Azure che il servizio di bilanciamento del carico dovrà avere un indirizzo pubblico.</span><span class="sxs-lookup"><span data-stu-id="feed5-332">**Scheme**: Public – this option tells Azure that this load balancer will need a public address.</span></span>
3. <span data-ttu-id="feed5-333">**Indirizzo IP**: creare un nuovo indirizzo IP (dinamico)</span><span class="sxs-lookup"><span data-stu-id="feed5-333">**IP Address**: Create a new IP address (dynamic)</span></span>

![Servizio di bilanciamento del carico con connessione Internet](./media/active-directory-aadconnect-azure-adfs/elbdeployment1.png)

<span data-ttu-id="feed5-335">Dopo la distribuzione, bilanciamento del carico hello verrà visualizzato nell'elenco di sistemi di bilanciamento carico di hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-335">After deployment, hello load balancer will appear in hello Load balancers list.</span></span>

![Elenco dei servizi di bilanciamento del carico](./media/active-directory-aadconnect-azure-adfs/elbdeployment2.png)

<span data-ttu-id="feed5-337">**8.2. Assegnare un indirizzo IP pubblico di toohello in etichetta DNS**</span><span class="sxs-lookup"><span data-stu-id="feed5-337">**8.2. Assign a DNS label toohello public IP**</span></span>

<span data-ttu-id="feed5-338">Fare clic sulla voce di servizio di bilanciamento carico di hello appena creato nella hello toobring pannello bilanciamento di carico pannello hello per la configurazione di.</span><span class="sxs-lookup"><span data-stu-id="feed5-338">Click on hello newly created load balancer entry in hello Load balancers panel toobring up hello panel for configuration.</span></span> <span data-ttu-id="feed5-339">Seguire sotto l'etichetta DNS hello tooconfigure passaggi per l'IP pubblico hello:</span><span class="sxs-lookup"><span data-stu-id="feed5-339">Follow below steps tooconfigure hello DNS label for hello public IP:</span></span>

1. <span data-ttu-id="feed5-340">Fare clic sull'indirizzo IP pubblico hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-340">Click on hello public IP address.</span></span> <span data-ttu-id="feed5-341">Verrà aperto il pannello hello per indirizzo IP pubblico hello e le relative impostazioni</span><span class="sxs-lookup"><span data-stu-id="feed5-341">This will open hello panel for hello public IP and its settings</span></span>
2. <span data-ttu-id="feed5-342">Fare clic su Configurazione</span><span class="sxs-lookup"><span data-stu-id="feed5-342">Click on Configuration</span></span>
3. <span data-ttu-id="feed5-343">Specificare un'etichetta DNS,</span><span class="sxs-lookup"><span data-stu-id="feed5-343">Provide a DNS label.</span></span> <span data-ttu-id="feed5-344">Che diventerà etichetta DNS pubblico hello che è possibile accedere da qualsiasi posizione, ad esempio contosofs.westus.cloudapp.azure.com. È possibile aggiungere una voce in hello DNS esterno per il servizio federativo hello (ad esempio fs.contoso.com) che risolve l'etichetta di hello esterna DNS toohello bilanciamento del carico (contosofs.westus.cloudapp.azure.com).</span><span class="sxs-lookup"><span data-stu-id="feed5-344">This will become hello public DNS label that you can access from anywhere, for example contosofs.westus.cloudapp.azure.com. You can add an entry in hello external DNS for hello federation service (like fs.contoso.com) that resolves toohello DNS label of hello external load balancer (contosofs.westus.cloudapp.azure.com).</span></span>

![Configurare il servizio di bilanciamento del carico con connessione Internet](./media/active-directory-aadconnect-azure-adfs/elbdeployment3.png) 

![Configurare il servizio di bilanciamento del carico con connessione Internet (DNS)](./media/active-directory-aadconnect-azure-adfs/elbdeployment4.png)

<span data-ttu-id="feed5-347">**8.3. Configurare il pool back-end per il servizio di bilanciamento del carico con connessione Internet (pubblico)**</span><span class="sxs-lookup"><span data-stu-id="feed5-347">**8.3. Configure backend pool for Internet Facing (Public) Load Balancer**</span></span> 

<span data-ttu-id="feed5-348">Seguire hello stessi passaggi come servizio di bilanciamento del carico interno hello Creazione pool back-end di hello tooconfigure per Internet affiancate (pubblico) bilanciamento del carico come disponibilità hello impostare per i server WAP di hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-348">Follow hello same steps as in creating hello internal load balancer, tooconfigure hello backend pool for Internet Facing (Public) Load Balancer as hello availability set for hello WAP servers.</span></span> <span data-ttu-id="feed5-349">ad esempio contosowapset.</span><span class="sxs-lookup"><span data-stu-id="feed5-349">For example, contosowapset.</span></span>

![Configurare il pool back-end del servizio di bilanciamento del carico con connessione Internet](./media/active-directory-aadconnect-azure-adfs/elbdeployment5.png)

<span data-ttu-id="feed5-351">**8.4. Configurare il probe**</span><span class="sxs-lookup"><span data-stu-id="feed5-351">**8.4. Configure probe**</span></span>

<span data-ttu-id="feed5-352">Seguire hello stessi passaggi come configurazione hello carico interno tooconfigure hello probe di bilanciamento per il pool di back-end hello del server WAP.</span><span class="sxs-lookup"><span data-stu-id="feed5-352">Follow hello same steps as in configuring hello internal load balancer  tooconfigure hello probe for hello backend pool of WAP servers.</span></span>

![Configurare il probe del servizio di bilanciamento del carico con connessione Internet](./media/active-directory-aadconnect-azure-adfs/elbdeployment6.png)

<span data-ttu-id="feed5-354">**8.5. Creare regole di bilanciamento del carico**</span><span class="sxs-lookup"><span data-stu-id="feed5-354">**8.5. Create load balancing rule(s)**</span></span>

<span data-ttu-id="feed5-355">Attenersi alla stessa procedura come esempio di bilanciamento del carico di bilanciamento del carico interno tooconfigure hello regola per TCP 443 hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-355">Follow hello same steps as in ILB tooconfigure hello load balancing rule for TCP 443.</span></span>

![Configurare le regole di bilanciamento del servizio di bilanciamento del carico con connessione Internet](./media/active-directory-aadconnect-azure-adfs/elbdeployment7.png)

### <a name="9-securing-hello-network"></a><span data-ttu-id="feed5-357">9. La protezione di rete hello</span><span class="sxs-lookup"><span data-stu-id="feed5-357">9. Securing hello network</span></span>
<span data-ttu-id="feed5-358">**9.1. Protezione di subnet interna hello**</span><span class="sxs-lookup"><span data-stu-id="feed5-358">**9.1. Securing hello internal subnet**</span></span>

<span data-ttu-id="feed5-359">In generale, è necessario hello seguendo regole tooefficiently secure subnet interna (in ordine di hello come indicato di seguito)</span><span class="sxs-lookup"><span data-stu-id="feed5-359">Overall, you need hello following rules tooefficiently secure your internal subnet (in hello order as listed below)</span></span>

| <span data-ttu-id="feed5-360">Regola</span><span class="sxs-lookup"><span data-stu-id="feed5-360">Rule</span></span> | <span data-ttu-id="feed5-361">Descrizione</span><span class="sxs-lookup"><span data-stu-id="feed5-361">Description</span></span> | <span data-ttu-id="feed5-362">Flusso</span><span class="sxs-lookup"><span data-stu-id="feed5-362">Flow</span></span> |
|:--- |:--- |:---:|
| <span data-ttu-id="feed5-363">AllowHTTPSFromDMZ</span><span class="sxs-lookup"><span data-stu-id="feed5-363">AllowHTTPSFromDMZ</span></span> |<span data-ttu-id="feed5-364">Consentire le comunicazioni HTTPS hello dalla rete Perimetrale</span><span class="sxs-lookup"><span data-stu-id="feed5-364">Allow hello HTTPS communication from DMZ</span></span> |<span data-ttu-id="feed5-365">In ingresso</span><span class="sxs-lookup"><span data-stu-id="feed5-365">Inbound</span></span> |
| <span data-ttu-id="feed5-366">DenyInternetOutbound</span><span class="sxs-lookup"><span data-stu-id="feed5-366">DenyInternetOutbound</span></span> |<span data-ttu-id="feed5-367">Nessun toointernet di accesso</span><span class="sxs-lookup"><span data-stu-id="feed5-367">No access toointernet</span></span> |<span data-ttu-id="feed5-368">In uscita</span><span class="sxs-lookup"><span data-stu-id="feed5-368">Outbound</span></span> |

![Regole di accesso interno (in ingresso)](./media/active-directory-aadconnect-azure-adfs/nsg_int.png)

<span data-ttu-id="feed5-370">[commento]: <> (![regole di accesso interno (in ingresso)](./media/active-directory-aadconnect-azure-adfs/nsgintinbound.png)) [commento]: <> (![regole di accesso interno (in uscita)](./media/active-directory-aadconnect-azure-adfs/nsgintoutbound.png))</span><span class="sxs-lookup"><span data-stu-id="feed5-370">[comment]: <> (![INT access rules (inbound)](./media/active-directory-aadconnect-azure-adfs/nsgintinbound.png)) [comment]: <> (![INT access rules (outbound)](./media/active-directory-aadconnect-azure-adfs/nsgintoutbound.png))</span></span>

<span data-ttu-id="feed5-371">**9.2. Protezione di subnet di rete Perimetrale hello**</span><span class="sxs-lookup"><span data-stu-id="feed5-371">**9.2. Securing hello DMZ subnet**</span></span>

| <span data-ttu-id="feed5-372">Regola</span><span class="sxs-lookup"><span data-stu-id="feed5-372">Rule</span></span> | <span data-ttu-id="feed5-373">Descrizione</span><span class="sxs-lookup"><span data-stu-id="feed5-373">Description</span></span> | <span data-ttu-id="feed5-374">Flusso</span><span class="sxs-lookup"><span data-stu-id="feed5-374">Flow</span></span> |
|:--- |:--- |:---:|
| <span data-ttu-id="feed5-375">AllowHTTPSFromInternet</span><span class="sxs-lookup"><span data-stu-id="feed5-375">AllowHTTPSFromInternet</span></span> |<span data-ttu-id="feed5-376">Consenti HTTPS da internet toohello rete Perimetrale</span><span class="sxs-lookup"><span data-stu-id="feed5-376">Allow HTTPS from internet toohello DMZ</span></span> |<span data-ttu-id="feed5-377">In ingresso</span><span class="sxs-lookup"><span data-stu-id="feed5-377">Inbound</span></span> |
| <span data-ttu-id="feed5-378">DenyInternetOutbound</span><span class="sxs-lookup"><span data-stu-id="feed5-378">DenyInternetOutbound</span></span> |<span data-ttu-id="feed5-379">Un valore diverso da toointernet HTTPS è bloccato</span><span class="sxs-lookup"><span data-stu-id="feed5-379">Anything except HTTPS toointernet is blocked</span></span> |<span data-ttu-id="feed5-380">In uscita</span><span class="sxs-lookup"><span data-stu-id="feed5-380">Outbound</span></span> |

![Regole di accesso esterno (in ingresso)](./media/active-directory-aadconnect-azure-adfs/nsg_dmz.png)

<span data-ttu-id="feed5-382">[commento]: <> (![regole di accesso esterno (in ingresso)](./media/active-directory-aadconnect-azure-adfs/nsgdmzinbound.png)) [commento]: <> (![regole di accesso esterno (in uscita)](./media/active-directory-aadconnect-azure-adfs/nsgdmzoutbound.png))</span><span class="sxs-lookup"><span data-stu-id="feed5-382">[comment]: <> (![EXT access rules (inbound)](./media/active-directory-aadconnect-azure-adfs/nsgdmzinbound.png)) [comment]: <> (![EXT access rules (outbound)](./media/active-directory-aadconnect-azure-adfs/nsgdmzoutbound.png))</span></span>

> [!NOTE]
> <span data-ttu-id="feed5-383">Se è necessaria l'autenticazione del certificato utente client (autenticazione clientTLS con i certificati utente X509), AD FS richiede l'abilitazione della porta TCP 49443 per l'accesso in ingresso.</span><span class="sxs-lookup"><span data-stu-id="feed5-383">If client user certificate authentication (clientTLS authentication using X509 user certificates) is required, then AD FS requires TCP port 49443 be enabled for inbound access.</span></span>
> 
> 

### <a name="10-test-hello-ad-fs-sign-in"></a><span data-ttu-id="feed5-384">10. Hello AD FS sign-in di test</span><span class="sxs-lookup"><span data-stu-id="feed5-384">10. Test hello AD FS sign-in</span></span>
<span data-ttu-id="feed5-385">Hello più semplice è tootest che ADFS è la pagina IdpInitiatedSignon.aspx hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-385">hello easiest way is tootest AD FS is by using hello IdpInitiatedSignon.aspx page.</span></span> <span data-ttu-id="feed5-386">In ordine toobe in grado di toodo che, è necessario tooenable hello IdpInitiatedSignOn sulle proprietà hello AD FS.</span><span class="sxs-lookup"><span data-stu-id="feed5-386">In order toobe able toodo that, it is required tooenable hello IdpInitiatedSignOn on hello AD FS properties.</span></span> <span data-ttu-id="feed5-387">Eseguire operazioni di hello seguenti tooverify il programma di installazione di ADFS</span><span class="sxs-lookup"><span data-stu-id="feed5-387">Follow hello steps below tooverify your AD FS setup</span></span>

1. <span data-ttu-id="feed5-388">Esecuzione hello di sotto di cmdlet nel server di hello AD FS, tramite PowerShell, tooset è tooenabled.</span><span class="sxs-lookup"><span data-stu-id="feed5-388">Run hello below cmdlet on hello AD FS server, using PowerShell, tooset it tooenabled.</span></span>
   <span data-ttu-id="feed5-389">Set-AdfsProperties -EnableIdPInitiatedSignonPage $true</span><span class="sxs-lookup"><span data-stu-id="feed5-389">Set-AdfsProperties -EnableIdPInitiatedSignonPage $true</span></span> 
2. <span data-ttu-id="feed5-390">Da qualsiasi computer esterno accedere a https://adfs.thecloudadvocate.com/adfs/ls/IdpInitiatedSignon.aspx</span><span class="sxs-lookup"><span data-stu-id="feed5-390">From any external machine access https://adfs.thecloudadvocate.com/adfs/ls/IdpInitiatedSignon.aspx</span></span>  
3. <span data-ttu-id="feed5-391">Verrà visualizzata la pagina hello ADFS come il seguente:</span><span class="sxs-lookup"><span data-stu-id="feed5-391">You should see hello AD FS page like below:</span></span>

![Pagina di accesso di test](./media/active-directory-aadconnect-azure-adfs/test1.png)

<span data-ttu-id="feed5-393">Dopo l'accesso, verrà visualizzato un messaggio di completamento dell'operazione come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="feed5-393">On successful sign-in, it will provide you with a success message as shown below:</span></span>

![Completamento test](./media/active-directory-aadconnect-azure-adfs/test2.png)

## <a name="template-for-deploying-ad-fs-in-azure"></a><span data-ttu-id="feed5-395">Modello per la distribuzione di AD FS in Azure</span><span class="sxs-lookup"><span data-stu-id="feed5-395">Template for deploying AD FS in Azure</span></span>
<span data-ttu-id="feed5-396">modello Hello consente di distribuire una configurazione 6 macchina, 2 per i controller di dominio, AD FS e WAP.</span><span class="sxs-lookup"><span data-stu-id="feed5-396">hello template deploys a 6 machine setup, 2 each for Domain Controllers, AD FS and WAP.</span></span>

[<span data-ttu-id="feed5-397">Modello di distribuzione di AD FS in Azure</span><span class="sxs-lookup"><span data-stu-id="feed5-397">AD FS in Azure Deployment Template</span></span>](https://github.com/paulomarquesc/adfs-6vms-regular-template-based)

<span data-ttu-id="feed5-398">Durante la distribuzione di questo modello, è possibile usare una rete virtuale esistente o crearne una nuova.</span><span class="sxs-lookup"><span data-stu-id="feed5-398">You can use an existing virtual network or create a new VNET while deploying this template.</span></span> <span data-ttu-id="feed5-399">Hello vari parametri disponibili per la personalizzazione della distribuzione hello sono elencati di seguito con descrizione hello dell'utilizzo del parametro hello hello processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="feed5-399">hello various parameters available for customizing hello deployment are listed below with hello description of usage of hello parameter in hello deployment process.</span></span> 

| <span data-ttu-id="feed5-400">.</span><span class="sxs-lookup"><span data-stu-id="feed5-400">Parameter</span></span> | <span data-ttu-id="feed5-401">Description</span><span class="sxs-lookup"><span data-stu-id="feed5-401">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="feed5-402">Percorso</span><span class="sxs-lookup"><span data-stu-id="feed5-402">Location</span></span> |<span data-ttu-id="feed5-403">Hello area toodeploy hello risorse in, ad esempio Stati Uniti orientali.</span><span class="sxs-lookup"><span data-stu-id="feed5-403">hello region toodeploy hello resources into, e.g. East US.</span></span> |
| <span data-ttu-id="feed5-404">StorageAccountType</span><span class="sxs-lookup"><span data-stu-id="feed5-404">StorageAccountType</span></span> |<span data-ttu-id="feed5-405">tipo di Hello di hello Account di archiviazione creato</span><span class="sxs-lookup"><span data-stu-id="feed5-405">hello type of hello Storage Account created</span></span> |
| <span data-ttu-id="feed5-406">VirtualNetworkUsage</span><span class="sxs-lookup"><span data-stu-id="feed5-406">VirtualNetworkUsage</span></span> |<span data-ttu-id="feed5-407">Indica se verrà creata una nuova rete virtuale o ne verrà usata una esistente</span><span class="sxs-lookup"><span data-stu-id="feed5-407">Indicates if a new virtual network will be created or use an existing one</span></span> |
| <span data-ttu-id="feed5-408">VirtualNetworkName</span><span class="sxs-lookup"><span data-stu-id="feed5-408">VirtualNetworkName</span></span> |<span data-ttu-id="feed5-409">nome Hello di hello tooCreate di rete virtuale, obbligatorio all'utilizzo della rete virtuale nuova o esistente</span><span class="sxs-lookup"><span data-stu-id="feed5-409">hello name of hello Virtual Network tooCreate, mandatory on both existing or new virtual network usage</span></span> |
| <span data-ttu-id="feed5-410">VirtualNetworkResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="feed5-410">VirtualNetworkResourceGroupName</span></span> |<span data-ttu-id="feed5-411">Specifica il nome di hello hello del gruppo di risorse in cui risiede la rete virtuale esistente di hello.</span><span class="sxs-lookup"><span data-stu-id="feed5-411">Specifies hello name of hello resource group where hello existing virtual network resides.</span></span> <span data-ttu-id="feed5-412">Quando si utilizza una rete virtuale esistente, questa diventa un parametro obbligatorio per consentire la distribuzione di hello trovare hello ID di rete virtuale esistente hello</span><span class="sxs-lookup"><span data-stu-id="feed5-412">When using an existing virtual network, this becomes a mandatory parameter so hello deployment can find hello ID of hello existing virtual network</span></span> |
| <span data-ttu-id="feed5-413">VirtualNetworkAddressRange</span><span class="sxs-lookup"><span data-stu-id="feed5-413">VirtualNetworkAddressRange</span></span> |<span data-ttu-id="feed5-414">intervallo di indirizzi di hello Hello nuova rete virtuale, obbligatorio se la creazione di una nuova rete virtuale</span><span class="sxs-lookup"><span data-stu-id="feed5-414">hello address range of hello new VNET, mandatory if creating a new virtual network</span></span> |
| <span data-ttu-id="feed5-415">InternalSubnetName</span><span class="sxs-lookup"><span data-stu-id="feed5-415">InternalSubnetName</span></span> |<span data-ttu-id="feed5-416">nome Hello di subnet interna hello, obbligatoria in entrambe le opzioni di utilizzo della rete virtuale (nuove o esistente)</span><span class="sxs-lookup"><span data-stu-id="feed5-416">hello name of hello internal subnet, mandatory on both virtual network usage options (new or existing)</span></span> |
| <span data-ttu-id="feed5-417">InternalSubnetAddressRange</span><span class="sxs-lookup"><span data-stu-id="feed5-417">InternalSubnetAddressRange</span></span> |<span data-ttu-id="feed5-418">intervallo di indirizzi Hello di subnet interna hello, che contiene hello i controller di dominio e ad FS server, obbligatorio se la creazione di una nuova rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="feed5-418">hello address range of hello internal subnet, which contains hello Domain Controllers and ADFS servers, mandatory if creating a new virtual network.</span></span> |
| <span data-ttu-id="feed5-419">DMZSubnetAddressRange</span><span class="sxs-lookup"><span data-stu-id="feed5-419">DMZSubnetAddressRange</span></span> |<span data-ttu-id="feed5-420">intervallo di indirizzi Hello della subnet di rete perimetrale hello, che contiene hello Windows application server proxy, obbligatorio se la creazione di una nuova rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="feed5-420">hello address range of hello dmz subnet, which contains hello Windows application proxy servers, mandatory if creating a new virtual network.</span></span> |
| <span data-ttu-id="feed5-421">DMZSubnetName</span><span class="sxs-lookup"><span data-stu-id="feed5-421">DMZSubnetName</span></span> |<span data-ttu-id="feed5-422">nome Hello di subnet interna hello, obbligatoria in entrambe le opzioni di utilizzo della rete virtuale (nuove o esistente).</span><span class="sxs-lookup"><span data-stu-id="feed5-422">hello name of hello internal subnet, mandatory on both virtual network usage options (new or existing).</span></span> |
| <span data-ttu-id="feed5-423">ADDC01NICIPAddress</span><span class="sxs-lookup"><span data-stu-id="feed5-423">ADDC01NICIPAddress</span></span> |<span data-ttu-id="feed5-424">indirizzo IP interno Hello di hello primo Controller di dominio, questo indirizzo IP verrà assegnato in modo statico toohello controller di dominio e deve essere un indirizzo ip valido all'interno di subnet interna hello</span><span class="sxs-lookup"><span data-stu-id="feed5-424">hello internal IP address of hello first Domain Controller, this IP address will be statically assigned toohello DC and must be a valid ip address within hello Internal subnet</span></span> |
| <span data-ttu-id="feed5-425">ADDC02NICIPAddress</span><span class="sxs-lookup"><span data-stu-id="feed5-425">ADDC02NICIPAddress</span></span> |<span data-ttu-id="feed5-426">indirizzo IP interno Hello di hello secondo Controller di dominio, questo indirizzo IP verrà assegnato in modo statico toohello controller di dominio e deve essere un indirizzo ip valido all'interno di subnet interna hello</span><span class="sxs-lookup"><span data-stu-id="feed5-426">hello internal IP address of hello second Domain Controller, this IP address will be statically assigned toohello DC and must be a valid ip address within hello Internal subnet</span></span> |
| <span data-ttu-id="feed5-427">ADFS01NICIPAddress</span><span class="sxs-lookup"><span data-stu-id="feed5-427">ADFS01NICIPAddress</span></span> |<span data-ttu-id="feed5-428">indirizzo IP interno Hello del server ADFS prima hello, questo indirizzo IP verrà assegnato in modo statico server ADFS toohello e deve essere un indirizzo ip valido all'interno di subnet interna hello</span><span class="sxs-lookup"><span data-stu-id="feed5-428">hello internal IP address of hello first ADFS server, this IP address will be statically assigned toohello ADFS server and must be a valid ip address within hello Internal subnet</span></span> |
| <span data-ttu-id="feed5-429">ADFS02NICIPAddress</span><span class="sxs-lookup"><span data-stu-id="feed5-429">ADFS02NICIPAddress</span></span> |<span data-ttu-id="feed5-430">indirizzo IP interno Hello del server ADFS secondo hello, questo indirizzo IP verrà assegnato in modo statico server ADFS toohello e deve essere un indirizzo ip valido all'interno di subnet interna hello</span><span class="sxs-lookup"><span data-stu-id="feed5-430">hello internal IP address of hello second ADFS server, this IP address will be statically assigned toohello ADFS server and must be a valid ip address within hello Internal subnet</span></span> |
| <span data-ttu-id="feed5-431">WAP01NICIPAddress</span><span class="sxs-lookup"><span data-stu-id="feed5-431">WAP01NICIPAddress</span></span> |<span data-ttu-id="feed5-432">indirizzo IP interno Hello del primo server WAP di hello, questo indirizzo IP verrà assegnato in modo statico server WAP toohello e deve essere un indirizzo ip valido all'interno di subnet di rete Perimetrale hello</span><span class="sxs-lookup"><span data-stu-id="feed5-432">hello internal IP address of hello first WAP server, this IP address will be statically assigned toohello WAP server and must be a valid ip address within hello DMZ subnet</span></span> |
| <span data-ttu-id="feed5-433">WAP02NICIPAddress</span><span class="sxs-lookup"><span data-stu-id="feed5-433">WAP02NICIPAddress</span></span> |<span data-ttu-id="feed5-434">indirizzo IP interno Hello del secondo server WAP di hello, questo indirizzo IP verrà assegnato in modo statico server WAP toohello e deve essere un indirizzo ip valido all'interno di subnet di rete Perimetrale hello</span><span class="sxs-lookup"><span data-stu-id="feed5-434">hello internal IP address of hello second WAP server, this IP address will be statically assigned toohello WAP server and must be a valid ip address within hello DMZ subnet</span></span> |
| <span data-ttu-id="feed5-435">ADFSLoadBalancerPrivateIPAddress</span><span class="sxs-lookup"><span data-stu-id="feed5-435">ADFSLoadBalancerPrivateIPAddress</span></span> |<span data-ttu-id="feed5-436">bilanciamento del carico indirizzo IP interno Hello di hello ADFS, questo indirizzo IP verrà assegnato in modo statico toohello servizio di bilanciamento del carico e deve essere un indirizzo ip valido all'interno di subnet interna hello</span><span class="sxs-lookup"><span data-stu-id="feed5-436">hello internal IP address of hello ADFS load balancer, this IP address will be statically assigned toohello load balancer and must be a valid ip address within hello Internal subnet</span></span> |
| <span data-ttu-id="feed5-437">ADDCVMNamePrefix</span><span class="sxs-lookup"><span data-stu-id="feed5-437">ADDCVMNamePrefix</span></span> |<span data-ttu-id="feed5-438">Il prefisso del nome della macchina virtuale per i controller di dominio</span><span class="sxs-lookup"><span data-stu-id="feed5-438">Virtual Machine name prefix for Domain Controllers</span></span> |
| <span data-ttu-id="feed5-439">ADFSVMNamePrefix</span><span class="sxs-lookup"><span data-stu-id="feed5-439">ADFSVMNamePrefix</span></span> |<span data-ttu-id="feed5-440">Il prefisso del nome della macchina virtuale per i server AD FS</span><span class="sxs-lookup"><span data-stu-id="feed5-440">Virtual Machine name prefix for ADFS servers</span></span> |
| <span data-ttu-id="feed5-441">WAPVMNamePrefix</span><span class="sxs-lookup"><span data-stu-id="feed5-441">WAPVMNamePrefix</span></span> |<span data-ttu-id="feed5-442">Il prefisso del nome della macchina virtuale per i server WAP</span><span class="sxs-lookup"><span data-stu-id="feed5-442">Virtual Machine name prefix for WAP servers</span></span> |
| <span data-ttu-id="feed5-443">ADDCVMSize</span><span class="sxs-lookup"><span data-stu-id="feed5-443">ADDCVMSize</span></span> |<span data-ttu-id="feed5-444">dimensioni delle macchine virtuali Hello di hello i controller di dominio</span><span class="sxs-lookup"><span data-stu-id="feed5-444">hello vm size of hello Domain Controllers</span></span> |
| <span data-ttu-id="feed5-445">ADFSVMSize</span><span class="sxs-lookup"><span data-stu-id="feed5-445">ADFSVMSize</span></span> |<span data-ttu-id="feed5-446">dimensioni delle macchine virtuali Hello del server ADFS hello</span><span class="sxs-lookup"><span data-stu-id="feed5-446">hello vm size of hello ADFS servers</span></span> |
| <span data-ttu-id="feed5-447">WAPVMSize</span><span class="sxs-lookup"><span data-stu-id="feed5-447">WAPVMSize</span></span> |<span data-ttu-id="feed5-448">dimensioni delle macchine virtuali Hello del server WAP hello</span><span class="sxs-lookup"><span data-stu-id="feed5-448">hello vm size of hello WAP servers</span></span> |
| <span data-ttu-id="feed5-449">AdminUserName</span><span class="sxs-lookup"><span data-stu-id="feed5-449">AdminUserName</span></span> |<span data-ttu-id="feed5-450">nome Hello di hello amministratore locale di macchine virtuali hello</span><span class="sxs-lookup"><span data-stu-id="feed5-450">hello name of hello local Administrator of hello virtual machines</span></span> |
| <span data-ttu-id="feed5-451">AdminPassword</span><span class="sxs-lookup"><span data-stu-id="feed5-451">AdminPassword</span></span> |<span data-ttu-id="feed5-452">password account amministratore locale hello delle macchine virtuali hello Hello</span><span class="sxs-lookup"><span data-stu-id="feed5-452">hello password for hello local Administrator account of hello virtual machines</span></span> |

## <a name="additional-resources"></a><span data-ttu-id="feed5-453">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="feed5-453">Additional resources</span></span>
* [<span data-ttu-id="feed5-454">Set di disponibilità</span><span class="sxs-lookup"><span data-stu-id="feed5-454">Availability Sets</span></span>](https://aka.ms/Azure/Availability) 
* [<span data-ttu-id="feed5-455">Servizio di bilanciamento del carico di Azure</span><span class="sxs-lookup"><span data-stu-id="feed5-455">Azure Load Balancer</span></span>](https://aka.ms/Azure/ILB)
* [<span data-ttu-id="feed5-456">Servizio di bilanciamento del carico interno</span><span class="sxs-lookup"><span data-stu-id="feed5-456">Internal Load Balancer</span></span>](https://aka.ms/Azure/ILB/Internal)
* [<span data-ttu-id="feed5-457">Servizio di bilanciamento del carico con connessione Internet</span><span class="sxs-lookup"><span data-stu-id="feed5-457">Internet Facing Load Balancer</span></span>](https://aka.ms/Azure/ILB/Internet)
* [<span data-ttu-id="feed5-458">Account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="feed5-458">Storage Accounts</span></span>](https://aka.ms/Azure/Storage)
* [<span data-ttu-id="feed5-459">Reti virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="feed5-459">Azure Virtual Networks</span></span>](https://aka.ms/Azure/VNet)
* [<span data-ttu-id="feed5-460">Collegamenti relativi ad AD FS e proxy applicazione Web</span><span class="sxs-lookup"><span data-stu-id="feed5-460">AD FS and Web Application Proxy Links</span></span>](http://aka.ms/ADFSLinks) 

## <a name="next-steps"></a><span data-ttu-id="feed5-461">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="feed5-461">Next steps</span></span>
* [<span data-ttu-id="feed5-462">Integrazione delle identità locali con Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="feed5-462">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
* [<span data-ttu-id="feed5-463">Configurazione e gestione di AD FS con Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="feed5-463">Configuring and managing your AD FS using Azure AD Connect</span></span>](active-directory-aadconnectfed-whatis.md)
* [<span data-ttu-id="feed5-464">Distribuzione di AD FS a disponibilità elevata tra aree geografiche in Azure con Gestione traffico di Azure</span><span class="sxs-lookup"><span data-stu-id="feed5-464">High availability cross-geographic AD FS deployment in Azure with Azure Traffic Manager</span></span>](../active-directory-adfs-in-azure-with-azure-traffic-manager.md)

