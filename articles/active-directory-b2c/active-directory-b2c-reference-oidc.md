---
title: Accesso Web con OpenID Connect - Azure AD B2C | Microsoft Docs
description: Creazione di applicazioni Web tramite l'implementazione in Azure Active Directory del protocollo di autenticazione OpenID Connect
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: b0c33a47dd0cae79eab32ac578448fae8bf59be5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="bde83-103">Azure Active Directory B2C: accesso Web con OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="bde83-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="bde83-104">OpenID Connect è un protocollo di autenticazione basato su OAuth 2.0 che può essere usato per consentire agli utenti di accedere in modo sicuro alle applicazioni Web.</span><span class="sxs-lookup"><span data-stu-id="bde83-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used to securely sign users in to web applications.</span></span> <span data-ttu-id="bde83-105">Tramite l'implementazione in Azure Active Directory B2C (Azure AD B2C) di OpenID Connect è possibile assegnare esperienze di gestione delle iscrizioni, degli accessi e altre esperienze di gestione delle identità nelle applicazioni Web ad Azure AD.</span><span class="sxs-lookup"><span data-stu-id="bde83-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications to Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="bde83-106">Questa guida illustra come eseguire questa operazione in modo indipendente dal linguaggio.</span><span class="sxs-lookup"><span data-stu-id="bde83-106">This guide shows you how to do so in a language-independent manner.</span></span> <span data-ttu-id="bde83-107">La guida descrive come inviare e ricevere messaggi HTTP senza usare una delle librerie Microsoft open source.</span><span class="sxs-lookup"><span data-stu-id="bde83-107">It describes how to send and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="bde83-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) estende il protocollo di *autorizzazione* OAuth 2.0 per consentirne l'uso come protocollo di *autenticazione*.</span><span class="sxs-lookup"><span data-stu-id="bde83-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends the OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="bde83-109">Ciò consente di eseguire l'accesso Single Sign-On tramite OAuth.</span><span class="sxs-lookup"><span data-stu-id="bde83-109">This allows you to perform single sign-on by using OAuth.</span></span> <span data-ttu-id="bde83-110">Introduce il concetto di *token ID*, che è un token di sicurezza che consente al client di verificare l'identità dell'utente e di ottenere informazioni di base sul profilo dell'utente.</span><span class="sxs-lookup"><span data-stu-id="bde83-110">It introduces the concept of an *ID token*, which is a security token that allows the client to verify the identity of the user and obtain basic profile information about the user.</span></span>

<span data-ttu-id="bde83-111">Dal momento che è un'estensione di OAuth 2.0, consente anche alle app di acquisire in modo sicuro i *token di accesso*.</span><span class="sxs-lookup"><span data-stu-id="bde83-111">Because it extends OAuth 2.0, it also enables apps to securely acquire *access tokens*.</span></span> <span data-ttu-id="bde83-112">I token di accesso possono essere usati per accedere alle risorse protette tramite un [server di autorizzazione](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="bde83-112">You can use access_tokens to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="bde83-113">Si consiglia OpenID Connect per la compilazione di un'applicazione Web ospitata su un server e accessibile da browser.</span><span class="sxs-lookup"><span data-stu-id="bde83-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="bde83-114">Per aggiungere la gestione delle identità alle applicazioni desktop o per dispositivi mobili tramite Azure AD B2C, è consigliabile usare [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) invece di OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="bde83-114">If you want to add identity management to your mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="bde83-115">Azure AD B2C estende il protocollo standard OpenID Connect per non limitarsi esclusivamente a semplici operazioni di autenticazione e autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-115">Azure AD B2C extends the standard OpenID Connect protocol to do more than simple authentication and authorization.</span></span> <span data-ttu-id="bde83-116">Introduce il [parametro criteri](active-directory-b2c-reference-policies.md), che consente di usare OpenID Connect per aggiungere esperienze utente all'app, ad esempio la gestione delle iscrizioni, degli accessi e dei profili.</span><span class="sxs-lookup"><span data-stu-id="bde83-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md), which enables you to use OpenID Connect to add user experiences--such as sign-up, sign-in, and profile management--to your app.</span></span> <span data-ttu-id="bde83-117">Di seguito viene illustrato come usare OpenID Connect e i criteri per implementare ognuna di queste esperienze nelle applicazioni Web.</span><span class="sxs-lookup"><span data-stu-id="bde83-117">Here, we show you how to use OpenID Connect and policies to implement each of these experiences in your web applications.</span></span> <span data-ttu-id="bde83-118">Viene anche illustrato come ottenere i token di accesso per accedere alle API Web.</span><span class="sxs-lookup"><span data-stu-id="bde83-118">We'll also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="bde83-119">Le richieste HTTP di esempio nella sezione seguente usano la directory B2C di esempio, fabrikamb2c.onmicrosoft.com, nonché l'applicazione di esempio, https://aadb2cplayground.azurewebsites.net, e i criteri.</span><span class="sxs-lookup"><span data-stu-id="bde83-119">The example HTTP requests in the next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="bde83-120">Si possono provare le richieste in totale autonomia usando questi valori oppure è possibile sostituirli con valori personalizzati.</span><span class="sxs-lookup"><span data-stu-id="bde83-120">You're free to try out the requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="bde83-121">Altre informazioni su come [ottenere un tenant, un'applicazione e criteri B2C](#use-your-own-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="bde83-121">Learn how to [get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="bde83-122">Invio di richieste di autenticazione</span><span class="sxs-lookup"><span data-stu-id="bde83-122">Send authentication requests</span></span>
<span data-ttu-id="bde83-123">Quando l'app Web deve autenticare l'utente ed eseguire un criterio, può indirizzarlo all'endpoint `/authorize` .</span><span class="sxs-lookup"><span data-stu-id="bde83-123">When your web app needs to authenticate the user and execute a policy, it can direct the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="bde83-124">Questa è la parte interattiva del flusso, dove l'utente esegue operazioni in base ai criteri.</span><span class="sxs-lookup"><span data-stu-id="bde83-124">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span>

<span data-ttu-id="bde83-125">In questa richiesta il client indica le autorizzazioni che deve acquisire dall'utente nel parametro `scope` e i criteri da eseguire nel parametro `p`.</span><span class="sxs-lookup"><span data-stu-id="bde83-125">In this request, the client indicates the permissions that it needs to acquire from the user in the `scope` parameter and the policy to execute in the `p` parameter.</span></span> <span data-ttu-id="bde83-126">Di seguito vengono illustrati tre esempi (con interruzioni di riga per migliorare la leggibilità), ognuno dei quali usa criteri diversi.</span><span class="sxs-lookup"><span data-stu-id="bde83-126">Three examples are provided in the following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="bde83-127">Per apprendere il funzionamento di ogni richiesta, provare a incollare la richiesta in un browser ed eseguirla.</span><span class="sxs-lookup"><span data-stu-id="bde83-127">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="bde83-128">Uso di un criterio di accesso</span><span class="sxs-lookup"><span data-stu-id="bde83-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="bde83-129">Uso di un criterio di iscrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="bde83-130">Uso di un criterio di modifica del profilo</span><span class="sxs-lookup"><span data-stu-id="bde83-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="bde83-131">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-131">Parameter</span></span> | <span data-ttu-id="bde83-132">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="bde83-132">Required?</span></span> | <span data-ttu-id="bde83-133">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bde83-134">client_id</span><span class="sxs-lookup"><span data-stu-id="bde83-134">client_id</span></span> |<span data-ttu-id="bde83-135">Obbligatoria</span><span class="sxs-lookup"><span data-stu-id="bde83-135">Required</span></span> |<span data-ttu-id="bde83-136">ID applicazione assegnato all'app dal [portale di Azure](https://portal.azure.com/) .</span><span class="sxs-lookup"><span data-stu-id="bde83-136">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="bde83-137">response_type</span><span class="sxs-lookup"><span data-stu-id="bde83-137">response_type</span></span> |<span data-ttu-id="bde83-138">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-138">Required</span></span> |<span data-ttu-id="bde83-139">Tipo di risposta, che deve includere un token ID per OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="bde83-139">The response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="bde83-140">Se l'app Web necessita anche di token per chiamare un'API Web, è possibile usare `code+id_token`, come illustrato qui.</span><span class="sxs-lookup"><span data-stu-id="bde83-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="bde83-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="bde83-141">redirect_uri</span></span> |<span data-ttu-id="bde83-142">Consigliato</span><span class="sxs-lookup"><span data-stu-id="bde83-142">Recommended</span></span> |<span data-ttu-id="bde83-143">Parametro `redirect_uri` dell'app, dove le risposte di autenticazione possono essere inviate e ricevute dall'app.</span><span class="sxs-lookup"><span data-stu-id="bde83-143">The `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="bde83-144">Deve corrispondere esattamente a uno dei parametri `redirect_uri` registrati nel portale, ad eccezione del fatto che deve essere codificato come URL.</span><span class="sxs-lookup"><span data-stu-id="bde83-144">It must exactly match one of the `redirect_uri` parameters that you registered in the portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="bde83-145">scope</span><span class="sxs-lookup"><span data-stu-id="bde83-145">scope</span></span> |<span data-ttu-id="bde83-146">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-146">Required</span></span> |<span data-ttu-id="bde83-147">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="bde83-147">A space-separated list of scopes.</span></span> <span data-ttu-id="bde83-148">Un valore per l'ambito singolo indica ad Azure AD entrambe le autorizzazioni richieste.</span><span class="sxs-lookup"><span data-stu-id="bde83-148">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="bde83-149">L'ambito `openid` indica un'autorizzazione per l'accesso dell'utente e per ottenere i dati relativi all'utente sotto forma di token ID. Altre informazioni sono riportate più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="bde83-149">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens (more to come on this later in the article).</span></span> <span data-ttu-id="bde83-150">L’ambito `offline_access` è facoltativo per le applicazioni Web.</span><span class="sxs-lookup"><span data-stu-id="bde83-150">The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="bde83-151">Indica che l'app richiede un *token di aggiornamento* per un accesso di lunga durata alle risorse.</span><span class="sxs-lookup"><span data-stu-id="bde83-151">It indicates that your app will need a *refresh token* for long-lived access to resources.</span></span> |
| <span data-ttu-id="bde83-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="bde83-152">response_mode</span></span> |<span data-ttu-id="bde83-153">Consigliato</span><span class="sxs-lookup"><span data-stu-id="bde83-153">Recommended</span></span> |<span data-ttu-id="bde83-154">Metodo da usare per inviare all'app il codice di autorizzazione risultante.</span><span class="sxs-lookup"><span data-stu-id="bde83-154">The method that should be used to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="bde83-155">Può essere `query`, `form_post` o `fragment`.</span><span class="sxs-lookup"><span data-stu-id="bde83-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="bde83-156">`form_post` è la modalità di risposta consigliata perché offre la sicurezza migliore.</span><span class="sxs-lookup"><span data-stu-id="bde83-156">The `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="bde83-157">state</span><span class="sxs-lookup"><span data-stu-id="bde83-157">state</span></span> |<span data-ttu-id="bde83-158">Consigliato</span><span class="sxs-lookup"><span data-stu-id="bde83-158">Recommended</span></span> |<span data-ttu-id="bde83-159">Valore incluso nella richiesta che viene restituito nella risposta del token.</span><span class="sxs-lookup"><span data-stu-id="bde83-159">A value included in the request that is also returned in the token response.</span></span> <span data-ttu-id="bde83-160">Può trattarsi di una stringa di qualsiasi contenuto.</span><span class="sxs-lookup"><span data-stu-id="bde83-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="bde83-161">Per evitare gli attacchi di richiesta intersito falsa, viene in genere usato un valore univoco generato casualmente.</span><span class="sxs-lookup"><span data-stu-id="bde83-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="bde83-162">Lo stato viene inoltre usato per codificare le informazioni sullo stato dell'utente nell'app prima dell'esecuzione della richiesta di autenticazione, ad esempio la pagina in cui si trovava.</span><span class="sxs-lookup"><span data-stu-id="bde83-162">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page they were on.</span></span> |
| <span data-ttu-id="bde83-163">nonce</span><span class="sxs-lookup"><span data-stu-id="bde83-163">nonce</span></span> |<span data-ttu-id="bde83-164">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-164">Required</span></span> |<span data-ttu-id="bde83-165">Valore incluso nella richiesta, generato dall'app, che verrà incluso nel token ID risultante come attestazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-165">A value included in the request (generated by the app) that will be included in the resulting ID token as a claim.</span></span> <span data-ttu-id="bde83-166">L'app può verificare questo valore per ridurre gli attacchi di riproduzione del token.</span><span class="sxs-lookup"><span data-stu-id="bde83-166">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="bde83-167">Il valore è in genere una stringa casuale univoca che può essere usata per identificare l'origine della richiesta.</span><span class="sxs-lookup"><span data-stu-id="bde83-167">The value is typically a randomized unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="bde83-168">p</span><span class="sxs-lookup"><span data-stu-id="bde83-168">p</span></span> |<span data-ttu-id="bde83-169">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-169">Required</span></span> |<span data-ttu-id="bde83-170">Criteri che verranno eseguiti.</span><span class="sxs-lookup"><span data-stu-id="bde83-170">The policy that will be executed.</span></span> <span data-ttu-id="bde83-171">Si tratta del nome di un criterio creato nel tenant B2C.</span><span class="sxs-lookup"><span data-stu-id="bde83-171">It is the name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="bde83-172">Il valore del nome dei criteri deve iniziare con `b2c\_1\_`.</span><span class="sxs-lookup"><span data-stu-id="bde83-172">The policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="bde83-173">Altre informazioni sui criteri sono disponibili nell'articolo relativo al [framework di criteri estendibile](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="bde83-173">Learn more about policies and the [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="bde83-174">prompt</span><span class="sxs-lookup"><span data-stu-id="bde83-174">prompt</span></span> |<span data-ttu-id="bde83-175">Facoltativo</span><span class="sxs-lookup"><span data-stu-id="bde83-175">Optional</span></span> |<span data-ttu-id="bde83-176">Tipo di interazione utente obbligatoria.</span><span class="sxs-lookup"><span data-stu-id="bde83-176">The type of user interaction that is required.</span></span> <span data-ttu-id="bde83-177">L'unico valore valido in questa fase è `login`, che impone all'utente di immettere le credenziali per la richiesta.</span><span class="sxs-lookup"><span data-stu-id="bde83-177">The only valid value at this time is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="bde83-178">L'accesso Single Sign-On non avrà effetto.</span><span class="sxs-lookup"><span data-stu-id="bde83-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="bde83-179">Viene a questo punto richiesto all'utente di completare il flusso di lavoro dei criteri.</span><span class="sxs-lookup"><span data-stu-id="bde83-179">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="bde83-180">È possibile che venga richiesto all'utente di immettere nome utente e password, di accedere con un'identità di social networking, di iscriversi alla directory o di seguire altre procedure, a seconda di come sono definiti i criteri.</span><span class="sxs-lookup"><span data-stu-id="bde83-180">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps, depending on how the policy is defined.</span></span>

<span data-ttu-id="bde83-181">Dopo che l'utente ha completato i criteri, Azure AD restituisce una risposta all'app nel parametro `redirect_uri` indicato, usando il metodo specificato nel parametro `response_mode`.</span><span class="sxs-lookup"><span data-stu-id="bde83-181">After the user completes the policy, Azure AD returns a response to your app at the indicated `redirect_uri` parameter, by using the method that is specified in the `response_mode` parameter.</span></span> <span data-ttu-id="bde83-182">La risposta è la stessa per ognuno dei casi precedenti, indipendentemente dai criteri eseguiti.</span><span class="sxs-lookup"><span data-stu-id="bde83-182">The response is the same for each of the preceding cases, independent of the policy that is executed.</span></span>

<span data-ttu-id="bde83-183">Una risposta con esito positivo che utilizza `response_mode=fragment` ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="bde83-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="bde83-184">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-184">Parameter</span></span> | <span data-ttu-id="bde83-185">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="bde83-186">id_token</span><span class="sxs-lookup"><span data-stu-id="bde83-186">id_token</span></span> |<span data-ttu-id="bde83-187">Token ID richiesto dall'app.</span><span class="sxs-lookup"><span data-stu-id="bde83-187">The ID token that the app requested.</span></span> <span data-ttu-id="bde83-188">È possibile usare il token ID per verificare l'identità dell'utente e avviare una sessione con l'utente.</span><span class="sxs-lookup"><span data-stu-id="bde83-188">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="bde83-189">Altre informazioni dettagliate sui token ID e sul relativo contenuto sono incluse nelle [informazioni di riferimento sui token di Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="bde83-189">More details on ID tokens and their contents are included in the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="bde83-190">code</span><span class="sxs-lookup"><span data-stu-id="bde83-190">code</span></span> |<span data-ttu-id="bde83-191">Codice di autorizzazione richiesto dall'app, se è stato usato `response_type=code+id_token`.</span><span class="sxs-lookup"><span data-stu-id="bde83-191">The authorization code that the app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="bde83-192">L'app può usare il codice di autorizzazione per richiedere un token di accesso per una risorsa di destinazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-192">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="bde83-193">I codici di autorizzazione hanno una durata molto breve.</span><span class="sxs-lookup"><span data-stu-id="bde83-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="bde83-194">In genere scadono dopo circa 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="bde83-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="bde83-195">state</span><span class="sxs-lookup"><span data-stu-id="bde83-195">state</span></span> |<span data-ttu-id="bde83-196">Se un parametro `state` è incluso nella richiesta, lo stesso valore deve essere visualizzato nella risposta.</span><span class="sxs-lookup"><span data-stu-id="bde83-196">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="bde83-197">L'app deve verificare che i valori `state` nella richiesta e nella risposta siano identici.</span><span class="sxs-lookup"><span data-stu-id="bde83-197">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="bde83-198">È possibile inviare anche le risposte di errore al parametro `redirect_uri`. L'app può così gestirle adeguatamente:</span><span class="sxs-lookup"><span data-stu-id="bde83-198">Error responses can also be sent to the `redirect_uri` parameter so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="bde83-199">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-199">Parameter</span></span> | <span data-ttu-id="bde83-200">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="bde83-201">error</span><span class="sxs-lookup"><span data-stu-id="bde83-201">error</span></span> |<span data-ttu-id="bde83-202">Stringa di codice di errore che può essere usata per classificare i tipi di errori che si verificano e per generare una reazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-202">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="bde83-203">error_description</span><span class="sxs-lookup"><span data-stu-id="bde83-203">error_description</span></span> |<span data-ttu-id="bde83-204">Messaggio di errore specifico che consente a uno sviluppatore di identificare la causa principale di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-204">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="bde83-205">state</span><span class="sxs-lookup"><span data-stu-id="bde83-205">state</span></span> |<span data-ttu-id="bde83-206">Vedere la descrizione completa nella prima tabella di questa sezione.</span><span class="sxs-lookup"><span data-stu-id="bde83-206">See the full description in the first table in this section.</span></span> <span data-ttu-id="bde83-207">Se un parametro `state` è incluso nella richiesta, lo stesso valore deve essere visualizzato nella risposta.</span><span class="sxs-lookup"><span data-stu-id="bde83-207">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="bde83-208">L'app deve verificare che i valori `state` nella richiesta e nella risposta siano identici.</span><span class="sxs-lookup"><span data-stu-id="bde83-208">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="validate-the-id-token"></a><span data-ttu-id="bde83-209">Convalidare il token ID</span><span class="sxs-lookup"><span data-stu-id="bde83-209">Validate the ID token</span></span>
<span data-ttu-id="bde83-210">La ricezione di un token ID non è sufficiente per autenticare l'utente.</span><span class="sxs-lookup"><span data-stu-id="bde83-210">Just receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="bde83-211">È necessario convalidare la firma del token ID e verificare se le attestazioni nel token soddisfano i requisiti dell'app.</span><span class="sxs-lookup"><span data-stu-id="bde83-211">You must validate the ID token's signature and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="bde83-212">Azure AD B2C usa i [token Web JSON](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) e la crittografia a chiave pubblica per firmare i token e verificarne la validità.</span><span class="sxs-lookup"><span data-stu-id="bde83-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="bde83-213">Sono disponibili molte librerie open source per la convalida dei token JWT, a seconda del linguaggio preferito.</span><span class="sxs-lookup"><span data-stu-id="bde83-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="bde83-214">È consigliabile prendere in esame tali opzioni anziché implementare una logica di convalida personalizzata.</span><span class="sxs-lookup"><span data-stu-id="bde83-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="bde83-215">Le presenti informazioni sono utili per comprendere come usare correttamente queste librerie.</span><span class="sxs-lookup"><span data-stu-id="bde83-215">The information here will be useful in figuring out how to properly use those libraries.</span></span>

<span data-ttu-id="bde83-216">Azure AD B2C dispone di un endpoint di metadati OpenID Connect, che consente a un'applicazione di recuperare informazioni su Azure AD B2C in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="bde83-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="bde83-217">Queste informazioni includono endpoint, contenuti del token e chiavi per la firma dei token.</span><span class="sxs-lookup"><span data-stu-id="bde83-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="bde83-218">Il tenant B2C include un documento di metadati JSON per ogni criterio.</span><span class="sxs-lookup"><span data-stu-id="bde83-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="bde83-219">Il documento di metadati dei criteri `b2c_1_sign_in` in `fabrikamb2c.onmicrosoft.com` si trova ad esempio in:</span><span class="sxs-lookup"><span data-stu-id="bde83-219">For example, the metadata document for the `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="bde83-220">Una delle proprietà del documento di configurazione è `jwks_uri`, il cui valore per gli stessi criteri è:</span><span class="sxs-lookup"><span data-stu-id="bde83-220">One of the properties of this configuration document is `jwks_uri`, whose value for the same policy would be:</span></span>

<span data-ttu-id="bde83-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="bde83-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="bde83-222">Per determinare quali criteri sono stati usati per la firma di un token ID (e la posizione dove recuperare i metadati), sono disponibili due opzioni.</span><span class="sxs-lookup"><span data-stu-id="bde83-222">To determine which policy was used in signing an ID token (and from where to fetch the metadata), you have two options.</span></span> <span data-ttu-id="bde83-223">Prima di tutto il nome dei criteri è incluso nell'attestazione `acr` del token ID.</span><span class="sxs-lookup"><span data-stu-id="bde83-223">First, the policy name is included in the `acr` claim in the ID token.</span></span> <span data-ttu-id="bde83-224">Per informazioni su come analizzare le attestazioni da un token ID, vedere le [informazioni di riferimento sul token Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="bde83-224">For information on how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="bde83-225">L'altra opzione consiste nel codificare i criteri nel valore del parametro `state` quando si rilascia la richiesta, per poi decodificarlo e determinare quali criteri sono stati utilizzati.</span><span class="sxs-lookup"><span data-stu-id="bde83-225">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="bde83-226">Entrambi i metodi sono validi.</span><span class="sxs-lookup"><span data-stu-id="bde83-226">Either method is valid.</span></span>

<span data-ttu-id="bde83-227">Dopo avere acquisito il documento di metadati dall'endpoint dei metadati OpenID Connect, è possibile usare le chiavi pubbliche RSA 256 che si trovano in questo endpoint per convalidare la firma del token ID.</span><span class="sxs-lookup"><span data-stu-id="bde83-227">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA 256 public keys (which are located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="bde83-228">In un determinato punto nel tempo è possibile che siano presenti più chiavi elencate in questo endpoint, ognuna identificata da un'attestazione `kid`.</span><span class="sxs-lookup"><span data-stu-id="bde83-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="bde83-229">L'intestazione del token ID contiene anche un'attestazione `kid`, che indica quali di queste chiavi sono state usate per firmare il token ID.</span><span class="sxs-lookup"><span data-stu-id="bde83-229">The header of the ID token also contains a `kid` claim, which indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="bde83-230">Per altre informazioni, vedere le [informazioni di riferimento sul token di Azure AD B2C](active-directory-b2c-reference-tokens.md) (in particolare la sezione relativa alla [convalida dei token](active-directory-b2c-reference-tokens.md#token-validation)).</span><span class="sxs-lookup"><span data-stu-id="bde83-230">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (the section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="bde83-231">Dopo avere convalidato la firma del token ID, è necessario verificare diverse attestazioni.</span><span class="sxs-lookup"><span data-stu-id="bde83-231">After you've validated the signature of the ID token, there are several claims that you need to verify.</span></span> <span data-ttu-id="bde83-232">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="bde83-232">For instance:</span></span>

* <span data-ttu-id="bde83-233">È necessario convalidare l'attestazione `nonce` per impedire attacchi di riproduzione del token.</span><span class="sxs-lookup"><span data-stu-id="bde83-233">You should validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="bde83-234">Il valore deve corrispondere a quello specificato nella richiesta di accesso.</span><span class="sxs-lookup"><span data-stu-id="bde83-234">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="bde83-235">È consigliabile convalidare l'attestazione `aud` per assicurarsi che il token ID sia stato rilasciato per l'app.</span><span class="sxs-lookup"><span data-stu-id="bde83-235">You should validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="bde83-236">Il valore deve essere l'ID applicazione dell'app.</span><span class="sxs-lookup"><span data-stu-id="bde83-236">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="bde83-237">È consigliabile convalidare le attestazioni `iat` e `exp` per assicurarsi che il token ID non sia scaduto.</span><span class="sxs-lookup"><span data-stu-id="bde83-237">You should validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="bde83-238">Esistono numerose altre convalide che è consigliabile eseguire.</span><span class="sxs-lookup"><span data-stu-id="bde83-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="bde83-239">Queste convalide sono descritte in dettaglio nella [Specifica di base di OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).  È inoltre consigliabile convalidare attestazioni aggiuntive in base allo scenario.</span><span class="sxs-lookup"><span data-stu-id="bde83-239">These are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="bde83-240">Alcune convalide comuni includono:</span><span class="sxs-lookup"><span data-stu-id="bde83-240">Some common validations include:</span></span>

* <span data-ttu-id="bde83-241">Verificare che l'utente o l'organizzazione abbiano eseguito l'iscrizione all'app.</span><span class="sxs-lookup"><span data-stu-id="bde83-241">Ensuring that the user/organization has signed up for the app.</span></span>
* <span data-ttu-id="bde83-242">Verificare che l'utente abbia le autorizzazioni o i privilegi adeguati.</span><span class="sxs-lookup"><span data-stu-id="bde83-242">Ensuring that the user has proper authorization/privileges.</span></span>
* <span data-ttu-id="bde83-243">Verificare che sia stato applicato un determinato livello di autenticazione, ad esempio l'autenticazione a più fattori di Azure.</span><span class="sxs-lookup"><span data-stu-id="bde83-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="bde83-244">Per altri dettagli sulle attestazioni in un token ID, vedere le [informazioni di riferimento sul token di Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="bde83-244">For more information on the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="bde83-245">Dopo avere convalidato il token ID, è possibile avviare una sessione con l'utente.</span><span class="sxs-lookup"><span data-stu-id="bde83-245">After you have validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="bde83-246">Usare le attestazioni del token ID per ottenere informazioni sull'utente nell'app.</span><span class="sxs-lookup"><span data-stu-id="bde83-246">You can use the claims in the ID token to obtain information about the user in your app.</span></span> <span data-ttu-id="bde83-247">Gli usi di queste informazioni includono la visualizzazione, i record e l'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="bde83-248">Acquisizione di un token</span><span class="sxs-lookup"><span data-stu-id="bde83-248">Get a token</span></span>
<span data-ttu-id="bde83-249">Se l'app Web deve solo eseguire criteri, è possibile ignorare le prossime sezioni.</span><span class="sxs-lookup"><span data-stu-id="bde83-249">If you need your web app to only execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="bde83-250">Queste sezioni sono applicabili solo alle app Web che devono eseguire chiamate autenticate a un'API Web e che sono inoltre protette da Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="bde83-250">These sections are applicable only to web apps that need to make authenticated calls to a web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="bde83-251">È possibile riscattare il codice di autorizzazione acquisito, tramite `response_type=code+id_token`, per un token nella risorsa desiderata inviando una richiesta `POST` all'endpoint `/token`.</span><span class="sxs-lookup"><span data-stu-id="bde83-251">You can redeem the authorization code that you acquired (by using `response_type=code+id_token`) for a token to the desired resource by sending a `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="bde83-252">L'unica risorsa per la quale al momento è possibile richiedere un token è l'API Web back-end dell'app.</span><span class="sxs-lookup"><span data-stu-id="bde83-252">Currently, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="bde83-253">La convenzione per richiedere un token di questo tipo consiste nell'usare l'ID client dell'app come ambito:</span><span class="sxs-lookup"><span data-stu-id="bde83-253">The convention for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="bde83-254">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-254">Parameter</span></span> | <span data-ttu-id="bde83-255">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="bde83-255">Required?</span></span> | <span data-ttu-id="bde83-256">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bde83-257">p</span><span class="sxs-lookup"><span data-stu-id="bde83-257">p</span></span> |<span data-ttu-id="bde83-258">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-258">Required</span></span> |<span data-ttu-id="bde83-259">Il criterio utilizzato per acquisire il codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-259">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="bde83-260">Non è possibile usare un criterio diverso in questa richiesta.</span><span class="sxs-lookup"><span data-stu-id="bde83-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="bde83-261">Si noti che questo parametro viene aggiunto alla stringa di query, non al corpo di `POST`.</span><span class="sxs-lookup"><span data-stu-id="bde83-261">Note that you add this parameter to the query string, not to the `POST` body.</span></span> |
| <span data-ttu-id="bde83-262">client_id</span><span class="sxs-lookup"><span data-stu-id="bde83-262">client_id</span></span> |<span data-ttu-id="bde83-263">Obbligatoria</span><span class="sxs-lookup"><span data-stu-id="bde83-263">Required</span></span> |<span data-ttu-id="bde83-264">ID applicazione assegnato all'app dal [portale di Azure](https://portal.azure.com/) .</span><span class="sxs-lookup"><span data-stu-id="bde83-264">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="bde83-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="bde83-265">grant_type</span></span> |<span data-ttu-id="bde83-266">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-266">Required</span></span> |<span data-ttu-id="bde83-267">Tipo di concessione, che deve essere `authorization_code` per il flusso del codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-267">The type of grant, which must be `authorization_code` for the authorization code flow.</span></span> |
| <span data-ttu-id="bde83-268">scope</span><span class="sxs-lookup"><span data-stu-id="bde83-268">scope</span></span> |<span data-ttu-id="bde83-269">Consigliato</span><span class="sxs-lookup"><span data-stu-id="bde83-269">Recommended</span></span> |<span data-ttu-id="bde83-270">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="bde83-270">A space-separated list of scopes.</span></span> <span data-ttu-id="bde83-271">Un valore per l'ambito singolo indica ad Azure AD entrambe le autorizzazioni richieste.</span><span class="sxs-lookup"><span data-stu-id="bde83-271">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="bde83-272">L'ambito `openid` indica un'autorizzazione per l'accesso dell'utente e per ottenere i dati relativi all'utente sotto forma di parametri id_token.</span><span class="sxs-lookup"><span data-stu-id="bde83-272">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of id_token parameters.</span></span> <span data-ttu-id="bde83-273">Può essere usato per ottenere i token nell'API Web back-end dell'app, che è rappresentata dallo stesso ID applicazione del client.</span><span class="sxs-lookup"><span data-stu-id="bde83-273">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="bde83-274">L'ambito `offline_access` indica che l'app necessita di un token di aggiornamento per un accesso di lunga durata alle risorse.</span><span class="sxs-lookup"><span data-stu-id="bde83-274">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="bde83-275">code</span><span class="sxs-lookup"><span data-stu-id="bde83-275">code</span></span> |<span data-ttu-id="bde83-276">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-276">Required</span></span> |<span data-ttu-id="bde83-277">Codice di autorizzazione acquisito nella prima sezione del flusso.</span><span class="sxs-lookup"><span data-stu-id="bde83-277">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="bde83-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="bde83-278">redirect_uri</span></span> |<span data-ttu-id="bde83-279">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-279">Required</span></span> |<span data-ttu-id="bde83-280">Parametro `redirect_uri` dell'applicazione dove è stato ricevuto il codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-280">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="bde83-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="bde83-281">client_secret</span></span> |<span data-ttu-id="bde83-282">Obbligatoria</span><span class="sxs-lookup"><span data-stu-id="bde83-282">Required</span></span> |<span data-ttu-id="bde83-283">La chiave privata dell’applicazione generata nel [Portale Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="bde83-283">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="bde83-284">La chiave privata dell'applicazione è un elemento di sicurezza importante.</span><span class="sxs-lookup"><span data-stu-id="bde83-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="bde83-285">È necessario archiviarla in modo sicuro nel server.</span><span class="sxs-lookup"><span data-stu-id="bde83-285">You should store it securely on your server.</span></span> <span data-ttu-id="bde83-286">È necessario anche far ruotare periodicamente la chiave privata client.</span><span class="sxs-lookup"><span data-stu-id="bde83-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="bde83-287">Una risposta di token con esito positivo ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="bde83-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="bde83-288">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-288">Parameter</span></span> | <span data-ttu-id="bde83-289">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="bde83-290">not_before</span><span class="sxs-lookup"><span data-stu-id="bde83-290">not_before</span></span> |<span data-ttu-id="bde83-291">Il momento in cui il token viene considerato valido, nel periodo.</span><span class="sxs-lookup"><span data-stu-id="bde83-291">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="bde83-292">token_type</span><span class="sxs-lookup"><span data-stu-id="bde83-292">token_type</span></span> |<span data-ttu-id="bde83-293">Valore del tipo di token.</span><span class="sxs-lookup"><span data-stu-id="bde83-293">The token type value.</span></span> <span data-ttu-id="bde83-294">L'unico tipo supportato da Azure AD è `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="bde83-294">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="bde83-295">access_token</span><span class="sxs-lookup"><span data-stu-id="bde83-295">access_token</span></span> |<span data-ttu-id="bde83-296">Il token JWT firmato richiesto.</span><span class="sxs-lookup"><span data-stu-id="bde83-296">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="bde83-297">scope</span><span class="sxs-lookup"><span data-stu-id="bde83-297">scope</span></span> |<span data-ttu-id="bde83-298">Ambiti per il quale il token è valido.</span><span class="sxs-lookup"><span data-stu-id="bde83-298">The scopes for which the token is valid.</span></span> <span data-ttu-id="bde83-299">Possono essere usati per memorizzare i token nella cache per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="bde83-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="bde83-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="bde83-300">expires_in</span></span> |<span data-ttu-id="bde83-301">Periodo di validità del token di accesso (in secondi).</span><span class="sxs-lookup"><span data-stu-id="bde83-301">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="bde83-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="bde83-302">refresh_token</span></span> |<span data-ttu-id="bde83-303">Token di aggiornamento di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="bde83-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="bde83-304">L'app può usare questo token per acquisire token aggiuntivi dopo la scadenza del token corrente.</span><span class="sxs-lookup"><span data-stu-id="bde83-304">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="bde83-305">I token di aggiornamento hanno una lunga durata e possono essere usati per mantenere l'accesso alle risorse per lunghi periodi di tempo.</span><span class="sxs-lookup"><span data-stu-id="bde83-305">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="bde83-306">Per altre informazioni dettagliate, vedere le [informazioni di riferimento sul token di B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="bde83-306">For more details, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="bde83-307">Si noti che per ricevere un token di aggiornamento, occorre avere usato l'ambito `offline_access` nelle richieste di autorizzazione e nelle richieste di token.</span><span class="sxs-lookup"><span data-stu-id="bde83-307">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |

<span data-ttu-id="bde83-308">Le risposte di errore si presentano nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="bde83-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="bde83-309">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-309">Parameter</span></span> | <span data-ttu-id="bde83-310">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="bde83-311">error</span><span class="sxs-lookup"><span data-stu-id="bde83-311">error</span></span> |<span data-ttu-id="bde83-312">Stringa di codice di errore che può essere usata per classificare i tipi di errori che si verificano e per generare una reazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-312">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="bde83-313">error_description</span><span class="sxs-lookup"><span data-stu-id="bde83-313">error_description</span></span> |<span data-ttu-id="bde83-314">Messaggio di errore specifico che consente a uno sviluppatore di identificare la causa principale di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-314">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="use-the-token"></a><span data-ttu-id="bde83-315">Uso del token</span><span class="sxs-lookup"><span data-stu-id="bde83-315">Use the token</span></span>
<span data-ttu-id="bde83-316">Dopo avere acquisito un token di accesso, è possibile usarlo nelle richieste alle API Web back-end includendolo nell'intestazione `Authorization`:</span><span class="sxs-lookup"><span data-stu-id="bde83-316">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-the-token"></a><span data-ttu-id="bde83-317">Aggiornamento del token</span><span class="sxs-lookup"><span data-stu-id="bde83-317">Refresh the token</span></span>
<span data-ttu-id="bde83-318">I token ID hanno breve durata.</span><span class="sxs-lookup"><span data-stu-id="bde83-318">ID tokens are short-lived.</span></span> <span data-ttu-id="bde83-319">È necessario aggiornarli dopo la scadenza per continuare ad accedere alle risorse.</span><span class="sxs-lookup"><span data-stu-id="bde83-319">You must refresh them after they expire to continue being able to access resources.</span></span> <span data-ttu-id="bde83-320">A tale scopo, inviare un'altra richiesta `POST` all'endpoint `/token`,</span><span class="sxs-lookup"><span data-stu-id="bde83-320">You can do so by submitting another `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="bde83-321">Specificare questa volta il parametro `refresh_token` al posto del parametro `code`:</span><span class="sxs-lookup"><span data-stu-id="bde83-321">This time, provide the `refresh_token` parameter instead of the `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="bde83-322">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-322">Parameter</span></span> | <span data-ttu-id="bde83-323">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-323">Required</span></span> | <span data-ttu-id="bde83-324">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bde83-325">p</span><span class="sxs-lookup"><span data-stu-id="bde83-325">p</span></span> |<span data-ttu-id="bde83-326">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-326">Required</span></span> |<span data-ttu-id="bde83-327">Criteri usati per acquisire il token di aggiornamento originale.</span><span class="sxs-lookup"><span data-stu-id="bde83-327">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="bde83-328">Non è possibile usare un criterio diverso in questa richiesta.</span><span class="sxs-lookup"><span data-stu-id="bde83-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="bde83-329">Si noti che questo parametro viene aggiunto alla stringa di query, non al corpo di POST.</span><span class="sxs-lookup"><span data-stu-id="bde83-329">Note that you add this parameter to the query string, not to the POST body.</span></span> |
| <span data-ttu-id="bde83-330">client_id</span><span class="sxs-lookup"><span data-stu-id="bde83-330">client_id</span></span> |<span data-ttu-id="bde83-331">Obbligatoria</span><span class="sxs-lookup"><span data-stu-id="bde83-331">Required</span></span> |<span data-ttu-id="bde83-332">ID applicazione assegnato all'app dal [portale di Azure](https://portal.azure.com/) .</span><span class="sxs-lookup"><span data-stu-id="bde83-332">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="bde83-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="bde83-333">grant_type</span></span> |<span data-ttu-id="bde83-334">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-334">Required</span></span> |<span data-ttu-id="bde83-335">Tipo di concessione, che deve essere un token di aggiornamento per questa parte del flusso del codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-335">The type of grant, which must be a refresh token for this leg of the authorization code flow.</span></span> |
| <span data-ttu-id="bde83-336">scope</span><span class="sxs-lookup"><span data-stu-id="bde83-336">scope</span></span> |<span data-ttu-id="bde83-337">Consigliato</span><span class="sxs-lookup"><span data-stu-id="bde83-337">Recommended</span></span> |<span data-ttu-id="bde83-338">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="bde83-338">A space-separated list of scopes.</span></span> <span data-ttu-id="bde83-339">Un valore per l'ambito singolo indica ad Azure AD entrambe le autorizzazioni richieste.</span><span class="sxs-lookup"><span data-stu-id="bde83-339">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="bde83-340">L'ambito `openid` indica un'autorizzazione per l'accesso dell'utente e per ottenere i dati relativi all'utente sotto forma di token ID.</span><span class="sxs-lookup"><span data-stu-id="bde83-340">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="bde83-341">Può essere usato per ottenere i token nell'API Web back-end dell'app, che è rappresentata dallo stesso ID applicazione del client.</span><span class="sxs-lookup"><span data-stu-id="bde83-341">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="bde83-342">L'ambito `offline_access` indica che l'app necessita di un token di aggiornamento per un accesso di lunga durata alle risorse.</span><span class="sxs-lookup"><span data-stu-id="bde83-342">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="bde83-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="bde83-343">redirect_uri</span></span> |<span data-ttu-id="bde83-344">Consigliato</span><span class="sxs-lookup"><span data-stu-id="bde83-344">Recommended</span></span> |<span data-ttu-id="bde83-345">Parametro `redirect_uri` dell'applicazione dove è stato ricevuto il codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-345">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="bde83-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="bde83-346">refresh_token</span></span> |<span data-ttu-id="bde83-347">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-347">Required</span></span> |<span data-ttu-id="bde83-348">Token di aggiornamento originale acquisito nella seconda sezione del flusso.</span><span class="sxs-lookup"><span data-stu-id="bde83-348">The original refresh token that you acquired in the second leg of the flow.</span></span> <span data-ttu-id="bde83-349">Si noti che per ricevere un token di aggiornamento, occorre avere usato l'ambito `offline_access` nelle richieste di autorizzazione e nelle richieste di token.</span><span class="sxs-lookup"><span data-stu-id="bde83-349">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |
| <span data-ttu-id="bde83-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="bde83-350">client_secret</span></span> |<span data-ttu-id="bde83-351">Obbligatoria</span><span class="sxs-lookup"><span data-stu-id="bde83-351">Required</span></span> |<span data-ttu-id="bde83-352">La chiave privata dell’applicazione generata nel [Portale Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="bde83-352">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="bde83-353">La chiave privata dell'applicazione è un elemento di sicurezza importante.</span><span class="sxs-lookup"><span data-stu-id="bde83-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="bde83-354">È necessario archiviarla in modo sicuro nel server.</span><span class="sxs-lookup"><span data-stu-id="bde83-354">You should store it securely on your server.</span></span> <span data-ttu-id="bde83-355">È necessario anche far ruotare periodicamente la chiave privata client.</span><span class="sxs-lookup"><span data-stu-id="bde83-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="bde83-356">Una risposta di token con esito positivo ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="bde83-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="bde83-357">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-357">Parameter</span></span> | <span data-ttu-id="bde83-358">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="bde83-359">not_before</span><span class="sxs-lookup"><span data-stu-id="bde83-359">not_before</span></span> |<span data-ttu-id="bde83-360">Il momento in cui il token viene considerato valido, nel periodo.</span><span class="sxs-lookup"><span data-stu-id="bde83-360">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="bde83-361">token_type</span><span class="sxs-lookup"><span data-stu-id="bde83-361">token_type</span></span> |<span data-ttu-id="bde83-362">Valore del tipo di token.</span><span class="sxs-lookup"><span data-stu-id="bde83-362">The token type value.</span></span> <span data-ttu-id="bde83-363">L'unico tipo supportato da Azure AD è `Bearer`.</span><span class="sxs-lookup"><span data-stu-id="bde83-363">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="bde83-364">access_token</span><span class="sxs-lookup"><span data-stu-id="bde83-364">access_token</span></span> |<span data-ttu-id="bde83-365">Il token JWT firmato richiesto.</span><span class="sxs-lookup"><span data-stu-id="bde83-365">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="bde83-366">scope</span><span class="sxs-lookup"><span data-stu-id="bde83-366">scope</span></span> |<span data-ttu-id="bde83-367">Ambito per il quale il token è valido, che può essere usato per memorizzare i token nella cache per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="bde83-367">The scope that the token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="bde83-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="bde83-368">expires_in</span></span> |<span data-ttu-id="bde83-369">Periodo di validità del token di accesso (in secondi).</span><span class="sxs-lookup"><span data-stu-id="bde83-369">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="bde83-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="bde83-370">refresh_token</span></span> |<span data-ttu-id="bde83-371">Token di aggiornamento di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="bde83-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="bde83-372">L'app può usare questo token per acquisire token aggiuntivi dopo la scadenza del token corrente.</span><span class="sxs-lookup"><span data-stu-id="bde83-372">The app can use this token to acquire additional tokens after the current token expires.</span></span>  <span data-ttu-id="bde83-373">I token di aggiornamento hanno una lunga durata e possono essere usati per mantenere l'accesso alle risorse per lunghi periodi di tempo.</span><span class="sxs-lookup"><span data-stu-id="bde83-373">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="bde83-374">Per informazioni dettagliate, consultare il [riferimento al token B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="bde83-374">For more detail, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="bde83-375">Le risposte di errore si presentano nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="bde83-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="bde83-376">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-376">Parameter</span></span> | <span data-ttu-id="bde83-377">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="bde83-378">error</span><span class="sxs-lookup"><span data-stu-id="bde83-378">error</span></span> |<span data-ttu-id="bde83-379">Stringa di codice di errore che può essere usata per classificare i tipi di errori che si verificano e per generare una reazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-379">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="bde83-380">error_description</span><span class="sxs-lookup"><span data-stu-id="bde83-380">error_description</span></span> |<span data-ttu-id="bde83-381">Messaggio di errore specifico che consente a uno sviluppatore di identificare la causa principale di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-381">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="bde83-382">Inviare una richiesta di disconnessione</span><span class="sxs-lookup"><span data-stu-id="bde83-382">Send a sign-out request</span></span>
<span data-ttu-id="bde83-383">Per la disconnessione di un utente dall'app, non è sufficiente cancellare i cookie dell'app o terminare la sessione dell'utente.</span><span class="sxs-lookup"><span data-stu-id="bde83-383">When you want to sign the user out of the app, it is not enough to clear your app's cookies or otherwise end the session with the user.</span></span> <span data-ttu-id="bde83-384">È anche necessario reindirizzare l'utente ad Azure AD per la disconnessione. In caso contrario, l'utente potrebbe essere in grado di autenticarsi nuovamente all'app senza immettere le credenziali,</span><span class="sxs-lookup"><span data-stu-id="bde83-384">You must also redirect the user to Azure AD to sign out. If you fail to do so, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="bde83-385">in quanto avrà accesso a una sessione Single Sign-On valida con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="bde83-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="bde83-386">È sufficiente reindirizzare l'utente all'endpoint `end_session` elencato nel documento dei metadati di OpenID Connect descritto precedentemente nella sezione "Convalidare il token ID":</span><span class="sxs-lookup"><span data-stu-id="bde83-386">You can simply redirect the user to the `end_session` endpoint that is listed in the OpenID Connect metadata document described earlier in the "Validate the ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="bde83-387">Parametro</span><span class="sxs-lookup"><span data-stu-id="bde83-387">Parameter</span></span> | <span data-ttu-id="bde83-388">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="bde83-388">Required?</span></span> | <span data-ttu-id="bde83-389">Descrizione</span><span class="sxs-lookup"><span data-stu-id="bde83-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bde83-390">p</span><span class="sxs-lookup"><span data-stu-id="bde83-390">p</span></span> |<span data-ttu-id="bde83-391">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="bde83-391">Required</span></span> |<span data-ttu-id="bde83-392">Criteri da usare per disconnettere l'utente dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-392">The policy that you want to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="bde83-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="bde83-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="bde83-394">Consigliato</span><span class="sxs-lookup"><span data-stu-id="bde83-394">Recommended</span></span> |<span data-ttu-id="bde83-395">URL di destinazione al quale l'utente deve essere reindirizzato dopo la disconnessione. Se omesso, l'utente visualizzerà un messaggio generico di Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="bde83-395">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C shows the user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="bde83-396">Sebbene l'indirizzamento dell'utente all'endpoint `end_session` comporti la cancellazione di una parte dello stato Single Sign-On dell'utente con Azure AD B2C, l'utente non verrà disconnesso dalla sessione del provider di identità social.</span><span class="sxs-lookup"><span data-stu-id="bde83-396">Although directing the user to the `end_session` endpoint will clear some of the user's single sign-on state with Azure AD B2C, it will not sign the user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="bde83-397">Se l'utente seleziona lo stesso provider di identità in un accesso successivo, l'autenticazione verrà eseguita nuovamente senza immettere le credenziali.</span><span class="sxs-lookup"><span data-stu-id="bde83-397">If the user selects the same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="bde83-398">Se un utente vuole disconnettersi dall'applicazione B2C, non significa necessariamente che intenda disconnettersi dall'account Facebook.</span><span class="sxs-lookup"><span data-stu-id="bde83-398">If a user wants to sign out of your B2C application, it does not necessarily mean they want to sign out of their Facebook account.</span></span> <span data-ttu-id="bde83-399">Tuttavia, in caso di account locali, la sessione dell'utente viene terminata in modo corretto.</span><span class="sxs-lookup"><span data-stu-id="bde83-399">However, in the case of local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="bde83-400">Uso del proprio tenant B2C</span><span class="sxs-lookup"><span data-stu-id="bde83-400">Use your own B2C tenant</span></span>
<span data-ttu-id="bde83-401">Per provare queste richieste autonomamente, è prima di tutto necessario eseguire questi tre passaggi e quindi sostituire i valori di esempio descritti in precedenza con i valori di proprio interesse:</span><span class="sxs-lookup"><span data-stu-id="bde83-401">If you want to try these requests for yourself, you must first perform these three steps, and then replace the example values described earlier with your own:</span></span>

1. <span data-ttu-id="bde83-402">[Creare un tenant B2C](active-directory-b2c-get-started.md)e usare il nome del tenant nelle richieste.</span><span class="sxs-lookup"><span data-stu-id="bde83-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="bde83-403">[Creare un'applicazione](active-directory-b2c-app-registration.md) per ottenere un ID applicazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-403">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID.</span></span> <span data-ttu-id="bde83-404">Includere un'API Web/app Web nell'app.</span><span class="sxs-lookup"><span data-stu-id="bde83-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="bde83-405">Se lo si desidera, creare un segreto dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bde83-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="bde83-406">[Creare i criteri](active-directory-b2c-reference-policies.md) per ottenere i nomi dei criteri.</span><span class="sxs-lookup"><span data-stu-id="bde83-406">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

