---
title: "aaaBest procedure consigliate per la scalabilità automatica | Documenti Microsoft"
description: "Modelli di scalabilità automatica in Azure per App Web, set di scalabilità di macchine virtuali e Servizi cloud"
author: anirudhcavale
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 9fa2b94b-dfa5-4106-96ff-74fd1fba4657
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/07/2017
ms.author: ancav
ms.openlocfilehash: eb731c15e440af93a2675210583878814d0d8818
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-autoscale"></a><span data-ttu-id="8c0aa-103">Procedure consigliate per la scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="8c0aa-103">Best practices for Autoscale</span></span>
<span data-ttu-id="8c0aa-104">In questo articolo illustra procedure consigliate tooautoscale in Azure.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-104">This article teaches best practices tooautoscale in Azure.</span></span> <span data-ttu-id="8c0aa-105">Azure scalabilità automatica di monitoraggio si applica solo troppo[set di scalabilità di macchine virtuali](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [servizi Cloud](https://azure.microsoft.com/services/cloud-services/), e [servizio App: app Web](https://azure.microsoft.com/services/app-service/web/).</span><span class="sxs-lookup"><span data-stu-id="8c0aa-105">Azure Monitor autoscale applies only too[Virtual Machine Scale Sets](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [Cloud Services](https://azure.microsoft.com/services/cloud-services/), and [App Service - Web Apps](https://azure.microsoft.com/services/app-service/web/).</span></span> <span data-ttu-id="8c0aa-106">Altri servizi Azure usano metodi di ridimensionamento diversi.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-106">Other Azure services use different scaling methods.</span></span>

## <a name="autoscale-concepts"></a><span data-ttu-id="8c0aa-107">Concetti di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="8c0aa-107">Autoscale concepts</span></span>
* <span data-ttu-id="8c0aa-108">Una risorsa può avere *una* sola impostazione di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-108">A resource can have only *one* autoscale setting</span></span>
* <span data-ttu-id="8c0aa-109">Un'impostazione di scalabilità automatica può avere uno o più profili e ogni profilo può avere una o più regole di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-109">An autoscale setting can have one or more profiles and each profile can have one or more autoscale rules.</span></span>
* <span data-ttu-id="8c0aa-110">Un'impostazione di scalabilità automatica ridimensiona le istanze in senso orizzontale, ovvero *out* aumentando le istanze di hello e *in* riducendo il numero di hello di istanze.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-110">An autoscale setting scales instances horizontally, which is *out* by increasing hello instances and *in* by decreasing hello number of instances.</span></span>
  <span data-ttu-id="8c0aa-111">Un'impostazione di scalabilità automatica ha un valore massimo, uno minimo e uno predefinito di istanze.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-111">An autoscale setting has a maximum, minimum, and default value of instances.</span></span>
* <span data-ttu-id="8c0aa-112">Un processo di scalabilità automatica legge sempre hello associata tooscale metrica controllando, se è superato hello soglia configurata per la scalabilità orizzontale o in scala.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-112">An autoscale job always reads hello associated metric tooscale by, checking if it has crossed hello configured threshold for scale-out or scale-in.</span></span> <span data-ttu-id="8c0aa-113">Per un elenco delle metriche in base alle quali può essere applicata la scalabilità automatica, vedere [Metriche comuni per la scalabilità automatica di Monitoraggio di Azure](insights-autoscale-common-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="8c0aa-113">You can view a list of metrics that autoscale can scale by at [Azure Monitor autoscaling common metrics](insights-autoscale-common-metrics.md).</span></span>
* <span data-ttu-id="8c0aa-114">Tutte le soglie vengono calcolate a livello di istanza.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-114">All thresholds are calculated at an instance level.</span></span> <span data-ttu-id="8c0aa-115">Ad esempio, "scala può essere estratto da 1 istanza quando medio della CPU > 80% quando il numero di istanze è 2", significa che la scalabilità orizzontale hello utilizzo medio della CPU tra tutte le istanze è superiore all'80%.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-115">For example, "scale out by 1 instance when average CPU > 80% when instance count is 2", means scale-out when hello average CPU across all instances is greater than 80%.</span></span>
* <span data-ttu-id="8c0aa-116">Le notifiche di errore vengono sempre ricevute tramite posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-116">You always receive failure notifications via email.</span></span> <span data-ttu-id="8c0aa-117">In particolare, hello proprietario, collaboratore e lettori di risorsa di destinazione hello riceveranno posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-117">Specifically, hello owner, contributor, and readers of hello target resource receive email.</span></span> <span data-ttu-id="8c0aa-118">Si riceverà sempre un messaggio di posta elettronica di *ripristino* anche quando la scalabilità automatica viene ripristinata dopo un errore e inizia a funzionare normalmente.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-118">You also always receive a *recovery* email when autoscale recovers from a failure and starts functioning normally.</span></span>
* <span data-ttu-id="8c0aa-119">È possibile acconsentire esplicitamente tooreceive una notifica di azione scala ha esito positivo tramite posta elettronica e ai webhook.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-119">You can opt-in tooreceive a successful scale action notification via email and webhooks.</span></span>

## <a name="autoscale-best-practices"></a><span data-ttu-id="8c0aa-120">Procedure consigliate per la scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="8c0aa-120">Autoscale best practices</span></span>
<span data-ttu-id="8c0aa-121">Utilizzare hello seguono le procedure consigliate durante l'utilizzo di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-121">Use hello following best practices as you use autoscale.</span></span>

### <a name="ensure-hello-maximum-and-minimum-values-are-different-and-have-an-adequate-margin-between-them"></a><span data-ttu-id="8c0aa-122">Verificare i valori minimo e massimo hello sono diversi e dispongono di un margine sufficiente tra di essi</span><span class="sxs-lookup"><span data-stu-id="8c0aa-122">Ensure hello maximum and minimum values are different and have an adequate margin between them</span></span>
<span data-ttu-id="8c0aa-123">Se si dispone di un'impostazione con minimo = 2, massimo = 2 e il numero di istanze correnti di hello è 2, non può verificarsi Nessuna azione di scalabilità.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-123">If you have a setting that has minimum=2, maximum=2 and hello current instance count is 2, no scale action can occur.</span></span> <span data-ttu-id="8c0aa-124">Mantenere un margine sufficiente tra numero totale di istanze minimo e massimo hello, che sono inclusivi.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-124">Keep an adequate margin between hello maximum and minimum instance counts, which are inclusive.</span></span> <span data-ttu-id="8c0aa-125">La scalabilità automatica viene sempre applicata entro questi limiti.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-125">Autoscale always scales between these limits.</span></span>

### <a name="manual-scaling-is-reset-by-autoscale-min-and-max"></a><span data-ttu-id="8c0aa-126">La scalabilità manuale viene reimpostata dai valori minimo e massimo della scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="8c0aa-126">Manual scaling is reset by autoscale min and max</span></span>
<span data-ttu-id="8c0aa-127">Se si manualmente Aggiorna hello istanza tooa valore del conteggio sopra o sotto massimo hello hello automaticamente il motore di scalabilità automatica scala back toohello minimo (se di sotto) o hello massimo (se in precedenza).</span><span class="sxs-lookup"><span data-stu-id="8c0aa-127">If you manually update hello instance count tooa value above or below hello maximum, hello autoscale engine automatically scales back toohello minimum (if below) or hello maximum (if above).</span></span> <span data-ttu-id="8c0aa-128">Ad esempio, impostare l'intervallo hello compreso tra 3 e 6.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-128">For example, you set hello range between 3 and 6.</span></span> <span data-ttu-id="8c0aa-129">Se si dispone di un'istanza in esecuzione, il motore di scalabilità automatica hello scala too3 istanze la successiva esecuzione.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-129">If you have one running instance, hello autoscale engine scales too3 instances on its next run.</span></span> <span data-ttu-id="8c0aa-130">Allo stesso modo, sarebbe scala aggiuntivo 8 istanze di eseguire il backup too6 la successiva esecuzione.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-130">Likewise, it would scale-in 8 instances back too6 on its next run.</span></span>  <span data-ttu-id="8c0aa-131">Ridimensionamento manuale è molto temporaneo a meno che non si reimposta anche le regole di scalabilità automatica hello.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-131">Manual scaling is very temporary unless you reset hello autoscale rules as well.</span></span>

### <a name="always-use-a-scale-out-and-scale-in-rule-combination-that-performs-an-increase-and-decrease"></a><span data-ttu-id="8c0aa-132">Usare sempre una combinazione di regole di aumento e di riduzione del numero di istanze</span><span class="sxs-lookup"><span data-stu-id="8c0aa-132">Always use a scale-out and scale-in rule combination that performs an increase and decrease</span></span>
<span data-ttu-id="8c0aa-133">Se si utilizza solo una parte di una combinazione di hello, scalabilità automatica scala aggiuntivo singolo, o, fino a quando hello massimo o minimo, è stato raggiunto.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-133">If you use only one part of hello combination, autoscale scale-in that single out, or in, until hello maximum, or minimum, is reached.</span></span>

### <a name="do-not-switch-between-hello-azure-portal-and-hello-azure-classic-portal-when-managing-autoscale"></a><span data-ttu-id="8c0aa-134">Non passare hello portale di Azure e hello portale di Azure classico per la gestione di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="8c0aa-134">Do not switch between hello Azure portal and hello Azure classic portal when managing Autoscale</span></span>
<span data-ttu-id="8c0aa-135">Per servizi Cloud e servizi di App (app Web), utilizzare hello del portale di Azure (portal.azure.com) toocreate e gestire le impostazioni di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-135">For Cloud Services and App Services (Web Apps), use hello Azure portal (portal.azure.com) toocreate and manage autoscale settings.</span></span> <span data-ttu-id="8c0aa-136">Per il set di scalabilità di macchine virtuali utilizzare toocreate PowerShell, CLI o l'API REST e gestire le impostazioni di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-136">For Virtual Machine Scale Sets use PowerShell, CLI or REST API toocreate and manage autoscale setting.</span></span> <span data-ttu-id="8c0aa-137">Non passare hello portale di Azure classico (manage.windowsazure.com) hello del portale di Azure (portal.azure.com) quando la gestione delle configurazioni di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-137">Do not switch between hello Azure classic portal (manage.windowsazure.com) and hello Azure portal (portal.azure.com) when managing autoscale configurations.</span></span> <span data-ttu-id="8c0aa-138">portale di Azure classico Hello e il relativo back-end sottostante presenta limitazioni.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-138">hello Azure classic portal and its underlying backend has limitations.</span></span> <span data-ttu-id="8c0aa-139">Spostare la scalabilità automatica toomanage portale Azure toohello utilizzando un'interfaccia utente grafica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-139">Move toohello Azure portal toomanage autoscale using a graphical user interface.</span></span> <span data-ttu-id="8c0aa-140">opzioni di Hello sono toouse hello autoscale PowerShell, CLI o l'API REST (tramite Esplora risorse di Azure).</span><span class="sxs-lookup"><span data-stu-id="8c0aa-140">hello options are toouse hello autoscale PowerShell, CLI or REST API (via Azure Resource Explorer).</span></span>

### <a name="choose-hello-appropriate-statistic-for-your-diagnostics-metric"></a><span data-ttu-id="8c0aa-141">Scegliere statistica appropriato di hello per la metrica di diagnostica</span><span class="sxs-lookup"><span data-stu-id="8c0aa-141">Choose hello appropriate statistic for your diagnostics metric</span></span>
<span data-ttu-id="8c0aa-142">Per la metrica di diagnostica, è possibile scegliere tra *Media*, *minimo*, *massimo* e *totale* come una metrica tooscale da.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-142">For diagnostics metrics, you can choose among *Average*, *Minimum*, *Maximum* and *Total* as a metric tooscale by.</span></span> <span data-ttu-id="8c0aa-143">statistica più comune di Hello è *Media*.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-143">hello most common statistic is *Average*.</span></span>

### <a name="choose-hello-thresholds-carefully-for-all-metric-types"></a><span data-ttu-id="8c0aa-144">Scegliere le soglie di hello attentamente per tutti i tipi di metrica</span><span class="sxs-lookup"><span data-stu-id="8c0aa-144">Choose hello thresholds carefully for all metric types</span></span>
<span data-ttu-id="8c0aa-145">È consigliabile scegliere con attenzione soglie diverse per aumentare e ridurre il numero di istanze a seconda delle situazioni concrete.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-145">We recommend carefully choosing different thresholds for scale-out and scale-in based on practical situations.</span></span>

<span data-ttu-id="8c0aa-146">Abbiamo *non è consigliabile* hello di impostazioni di scalabilità automatica, come negli esempi di hello seguenti con i valori di soglia identiche o molto simili per disconnettersi e condizioni:</span><span class="sxs-lookup"><span data-stu-id="8c0aa-146">We *do not recommend* autoscale settings like hello examples below with hello same or very similar threshold values for out and in conditions:</span></span>

* <span data-ttu-id="8c0aa-147">Aumentare le istanze di 1 quando il conteggio dei thread è <= 600</span><span class="sxs-lookup"><span data-stu-id="8c0aa-147">Increase instances by 1 count when Thread Count <= 600</span></span>
* <span data-ttu-id="8c0aa-148">Ridurre le istanze di 1 quando il conteggio dei thread è >= 600</span><span class="sxs-lookup"><span data-stu-id="8c0aa-148">Decrease instances by 1 count when Thread Count >= 600</span></span>

<span data-ttu-id="8c0aa-149">Esaminiamo un esempio di ciò che può causare il comportamento tooa che potrebbe sembrare poco chiaro.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-149">Let's look at an example of what can lead tooa behavior that may seem confusing.</span></span> <span data-ttu-id="8c0aa-150">Prendere in considerazione hello seguente sequenza.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-150">Consider hello following sequence.</span></span>

1. <span data-ttu-id="8c0aa-151">Si supponga che esistono 2 istanze toobegin con e quindi aumentare too625 del numero medio di hello di thread per ogni istanza.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-151">Assume there are 2 instances toobegin with and then hello average number of threads per instance grows too625.</span></span>
2. <span data-ttu-id="8c0aa-152">Il numero di istanze viene aumentato automaticamente aggiungendo una terza istanza.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-152">Autoscale scales out adding a 3rd instance.</span></span>
3. <span data-ttu-id="8c0aa-153">Successivamente, si supponga che il conteggio thread medio hello tra l'istanza rientra too575.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-153">Next, assume that hello average thread count across instance falls too575.</span></span>
4. <span data-ttu-id="8c0aa-154">Prima di riduzione, scalabilità automatica tenta tooestimate lo stato finale che hello sarà se ridimensionata.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-154">Before scaling down, autoscale tries tooestimate what hello final state will be if it scaled in.</span></span> <span data-ttu-id="8c0aa-155">Ad esempio, 575 x 3 (conteggio corrente delle istanze) = 1.725 / 2 (numero finale di istanze dopo la riduzione delle prestazioni) = 862,5 thread.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-155">For example, 575 x  3 (current instance count) = 1,725 / 2 (final number of instances when scaled down) = 862.5 threads.</span></span> <span data-ttu-id="8c0aa-156">Ciò significa scalabilità automatica sarebbero tooimmediately scalabilità orizzontale nuovamente anche dopo che ridimensionata, hello thread medio conteggio rimane hello stesso o persino rientra solo una piccola quantità.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-156">This means autoscale would have tooimmediately scale-out again even after it scaled in, if hello average thread count remains hello same or even falls only a small amount.</span></span> <span data-ttu-id="8c0aa-157">Tuttavia, se ridimensionato verso l'alto, sarebbe necessario ripetere l'intero processo hello, iniziali tooan di ciclo infinito.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-157">However, if it scaled up again, hello whole process would repeat, leading tooan infinite loop.</span></span>
5. <span data-ttu-id="8c0aa-158">tooavoid questa situazione (indicata come "Ali"), ridimensionamento automatico non scalare verso il basso affatto.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-158">tooavoid this situation (termed "flapping"), autoscale does not scale down at all.</span></span> <span data-ttu-id="8c0aa-159">Invece, vengono ignorati e Rivaluta hello condizione nuovamente il processo di hello successiva ora hello del servizio viene eseguito.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-159">Instead, it skips and reevaluates hello condition again hello next time hello service's job executes.</span></span> <span data-ttu-id="8c0aa-160">Questa operazione potrebbe confondere molte persone scalabilità automatica non saranno toowork numero medio di thread di hello stato 575.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-160">This could confuse many people because autoscale wouldn't appear toowork when hello average thread count was 575.</span></span>

<span data-ttu-id="8c0aa-161">Stima durante una scala è previsto tooavoid "instabile" situazioni in cui le azioni di scalabilità e di scalabilità orizzontale continuamente andare avanti e indietro.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-161">Estimation during a scale-in is intended tooavoid "flapping" situations, where scale-in and scale-out actions continually go back and forth.</span></span> <span data-ttu-id="8c0aa-162">Quando si sceglie di hello stessa soglia di scalabilità orizzontale in, tenere presente questo comportamento.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-162">Keep this behavior in mind when you choose hello same thresholds for scale-out and in.</span></span>

<span data-ttu-id="8c0aa-163">Si consiglia di scegliere un margine sufficiente tra hello scalabilità orizzontale e le soglie.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-163">We recommend choosing an adequate margin between hello scale-out and in thresholds.</span></span> <span data-ttu-id="8c0aa-164">Ad esempio, prendere in considerazione hello seguente combinazione di regola migliore.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-164">As an example, consider hello following better rule combination.</span></span>

* <span data-ttu-id="8c0aa-165">Aumentare le istanze di 1 quando la percentuale di CPU è >= 80</span><span class="sxs-lookup"><span data-stu-id="8c0aa-165">Increase instances by 1 count when CPU%  >= 80</span></span>
* <span data-ttu-id="8c0aa-166">Ridurre le istanze di 1 quando la percentuale di CPU è <= 60</span><span class="sxs-lookup"><span data-stu-id="8c0aa-166">Decrease instances by 1 count when CPU% <= 60</span></span>

<span data-ttu-id="8c0aa-167">In questo caso</span><span class="sxs-lookup"><span data-stu-id="8c0aa-167">In this case</span></span>  

1. <span data-ttu-id="8c0aa-168">Si supponga 2 istanze toostart con.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-168">Assume there are 2 instances toostart with.</span></span>
2. <span data-ttu-id="8c0aa-169">Se too80, Percentuale CPU Media hello tra più istanze di scalabilità automatica consente una scalabilità orizzontale aggiungendo una terza istanza.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-169">If hello average CPU% across instances goes too80, autoscale scales out adding a third instance.</span></span>
3. <span data-ttu-id="8c0aa-170">Si supponga che nel tempo CPU di hello % rientra too60.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-170">Now assume that over time hello CPU% falls too60.</span></span>
4. <span data-ttu-id="8c0aa-171">Regola di scalabilità della scalabilità automatica stima stato finale hello se fosse tooscale-in.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-171">Autoscale's scale-in rule estimates hello final state if it were tooscale-in.</span></span> <span data-ttu-id="8c0aa-172">Ad esempio, 60 x 3 (conteggio corrente delle istanze) = 180 / 2 (numero finale di istanze dopo la riduzione delle prestazioni) = 90.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-172">For example, 60 x 3 (current instance count) = 180 / 2 (final number of instances when scaled down) = 90.</span></span> <span data-ttu-id="8c0aa-173">Pertanto, scalabilità automatica non scala-in perché ha nuovamente immediatamente tooscale-out.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-173">So autoscale does not scale-in because it would have tooscale-out again immediately.</span></span> <span data-ttu-id="8c0aa-174">Al contrario, evita di ridurre le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-174">Instead, it skips scaling down.</span></span>
5. <span data-ttu-id="8c0aa-175">scalabilità automatica di tempo successiva Hello controlla hello della CPU continua toofall too50.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-175">hello next time autoscale checks, hello CPU continues toofall too50.</span></span> <span data-ttu-id="8c0aa-176">Stima nuovamente - istanza 50 x 3 = 150 / 2 istanze = 75, che è inferiore a soglia di scalabilità orizzontale hello pari a 80, pertanto si adatta in istanze di too2 correttamente.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-176">It estimates again -  50 x 3 instance = 150 / 2 instances = 75, which is below hello scale-out threshold of 80, so it scales in successfully too2 instances.</span></span>

### <a name="considerations-for-scaling-threshold-values-for-special-metrics"></a><span data-ttu-id="8c0aa-177">Considerazioni sul ridimensionamento dei valori di soglia per le metriche speciali</span><span class="sxs-lookup"><span data-stu-id="8c0aa-177">Considerations for scaling threshold values for special metrics</span></span>
 <span data-ttu-id="8c0aa-178">Per la metrica speciale, ad esempio metrica lunghezza coda del Bus di servizio o di archiviazione, soglia hello è numero medio di hello di messaggi disponibili per il numero corrente di istanze.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-178">For special metrics such as Storage or Service Bus Queue length metric, hello threshold is hello average number of messages available per current number of instances.</span></span> <span data-ttu-id="8c0aa-179">Scegliere con attenzione hello scegliere hello valore di soglia per questa metrica.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-179">Carefully choose hello choose hello threshold value for this metric.</span></span>

<span data-ttu-id="8c0aa-180">Di seguito viene illustrato con tooensure un esempio è comprendere meglio il comportamento di hello.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-180">Let's illustrate it with an example tooensure you understand hello behavior better.</span></span>

* <span data-ttu-id="8c0aa-181">Aumentare le istanze di 1 quando il conteggio dei messaggi della coda di archiviazione è >= 50</span><span class="sxs-lookup"><span data-stu-id="8c0aa-181">Increase instances by 1 count when Storage Queue message count >= 50</span></span>
* <span data-ttu-id="8c0aa-182">Ridurre le istanze di 1 quando il conteggio dei messaggi della coda di archiviazione è <= 10</span><span class="sxs-lookup"><span data-stu-id="8c0aa-182">Decrease instances by 1 count when Storage Queue message count <= 10</span></span>

<span data-ttu-id="8c0aa-183">Prendere in considerazione hello seguente sequenza:</span><span class="sxs-lookup"><span data-stu-id="8c0aa-183">Consider hello following sequence:</span></span>

1. <span data-ttu-id="8c0aa-184">Esistono 2 istanze di coda di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-184">There are 2 storage queue instances.</span></span>
2. <span data-ttu-id="8c0aa-185">Ancora messaggi e quando si verifica la coda di archiviazione hello, totale hello legge 50.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-185">Messages keep coming and when you review hello storage queue, hello total count reads 50.</span></span> <span data-ttu-id="8c0aa-186">Si potrebbe pensare che la scalabilità automatica debba avviare un'azione di aumento del numero di istanze.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-186">You might assume that autoscale should start a scale-out action.</span></span> <span data-ttu-id="8c0aa-187">Si noti tuttavia che si tratta comunque di 50/2 = 25 messaggi per ogni istanza.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-187">However, note that it is still 50/2 = 25 messages per instance.</span></span> <span data-ttu-id="8c0aa-188">L'aumento del numero di istanze non viene quindi eseguito.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-188">So, scale-out does not occur.</span></span> <span data-ttu-id="8c0aa-189">Per hello prima toohappen di scalabilità orizzontale, il numero totale di messaggi hello nella coda di archiviazione hello deve essere 100.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-189">For hello first scale-out toohappen, hello total message count in hello storage queue should be 100.</span></span>
3. <span data-ttu-id="8c0aa-190">Si supponga ora che numero totale di messaggi hello raggiunge i 100.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-190">Next, assume that hello total message count reaches 100.</span></span>
4. <span data-ttu-id="8c0aa-191">Un'istanza di coda di archiviazione 3 viene aggiunto a causa di tooa azione di scalabilità orizzontale.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-191">A 3rd storage queue instance is added due tooa scale-out action.</span></span>  <span data-ttu-id="8c0aa-192">Hello successiva azione di scalabilità orizzontale non avverrà finché hello totale conteggio dei messaggi nella coda di hello raggiunge 150 perché 150/3 = 50.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-192">hello next scale-out action will not happen until hello total message count in hello queue reaches 150 because 150/3 = 50.</span></span>
5. <span data-ttu-id="8c0aa-193">Numero di hello di messaggi nella coda di hello Ottiene ora più piccolo.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-193">Now hello number of messages in hello queue gets smaller.</span></span> <span data-ttu-id="8c0aa-194">Con 3 istanze, hello prima scala azione si verifica quando hello totale messaggi in tutte le code di sommare too30 perché 30/3 = 10 messaggi per ogni istanza, ovvero una soglia di scala hello.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-194">With 3 instances, hello first scale-in action happens when hello total messages in all queues add up too30 because 30/3 = 10 messages per instance, which is hello scale-in threshold.</span></span>

### <a name="considerations-for-scaling-when-multiple-profiles-are-configured-in-an-autoscale-setting"></a><span data-ttu-id="8c0aa-195">Considerazioni sul ridimensionamento quando vengono configurati più profili in un'impostazione di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="8c0aa-195">Considerations for scaling when multiple profiles are configured in an autoscale setting</span></span>
<span data-ttu-id="8c0aa-196">In un'impostazione di scalabilità automatica è possibile scegliere un profilo predefinito, che viene sempre applicato indipendentemente da qualsiasi pianificazione o orario, oppure è possibile scegliere un profilo ricorrente o un profilo per un periodo fisso con un intervallo di data e ora.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-196">In an autoscale setting, you can choose a default profile, which is always applied without any dependency on schedule or time, or you can choose a recurring profile or a profile for a fixed period with a date and time range.</span></span>

<span data-ttu-id="8c0aa-197">Quando li elabora di servizio di scalabilità automatica, verificare sempre in hello seguente ordine:</span><span class="sxs-lookup"><span data-stu-id="8c0aa-197">When autoscale service processes them, it always checks in hello following order:</span></span>

1. <span data-ttu-id="8c0aa-198">Profilo con data fissa</span><span class="sxs-lookup"><span data-stu-id="8c0aa-198">Fixed Date profile</span></span>
2. <span data-ttu-id="8c0aa-199">Profilo ricorrente</span><span class="sxs-lookup"><span data-stu-id="8c0aa-199">Recurring profile</span></span>
3. <span data-ttu-id="8c0aa-200">Profilo predefinito ("sempre")</span><span class="sxs-lookup"><span data-stu-id="8c0aa-200">Default ("Always") profile</span></span>

<span data-ttu-id="8c0aa-201">Se viene soddisfatta una condizione di profilo, scalabilità automatica non verifica la condizione profilo successiva hello sotto di essa.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-201">If a profile condition is met, autoscale does not check hello next profile condition below it.</span></span> <span data-ttu-id="8c0aa-202">La scalabilità automatica elabora solo un profilo alla volta.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-202">Autoscale only processes one profile at a time.</span></span> <span data-ttu-id="8c0aa-203">Questo significa che se si desidera tooalso includono una condizione di elaborazione da un profilo di livello inferiore, è necessario includere anche le regole nel profilo corrente hello.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-203">This means if you want tooalso include a processing condition from a lower-tier profile, you must include those rules as well in hello current profile.</span></span>

<span data-ttu-id="8c0aa-204">Per spiegarlo, verrà usato un esempio:</span><span class="sxs-lookup"><span data-stu-id="8c0aa-204">Let's review this using an example:</span></span>

<span data-ttu-id="8c0aa-205">immagine di Hello seguente mostra un'impostazione di scalabilità automatica con un profilo predefinito di istanze minime = 2 e massime di istanze = 10.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-205">hello image below shows an autoscale setting with a default profile of minimum instances = 2 and maximum instances = 10.</span></span> <span data-ttu-id="8c0aa-206">In questo esempio, le regole sono configurato tooscale-out quando il numero di messaggi hello nella coda di hello è maggiore di 10 e scala-in quando il numero di messaggi hello nella coda di hello è inferiore a 3.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-206">In this example, rules are configured tooscale-out when hello message count in hello queue is greater than 10 and scale-in when hello message count in hello queue is less than 3.</span></span> <span data-ttu-id="8c0aa-207">Risorsa hello ora possibile applicare la scalabilità tra 2 e 10 istanze.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-207">So now hello resource can scale between 2 and 10 instances.</span></span>

<span data-ttu-id="8c0aa-208">È anche stato impostato un profilo ricorrente per il lunedì.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-208">In addition, there is a recurring profile set for Monday.</span></span> <span data-ttu-id="8c0aa-209">È stato impostato per un numero minimo di istanze = 2 e un numero massimo di istanze = 12.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-209">It is set for minimum instances = 2 and maximum instances = 12.</span></span> <span data-ttu-id="8c0aa-210">Ciò significa che il lunedì hello scalabilità automatica di tempo prima controlla questa condizione, se il numero di istanze di hello è 2, che viene ampliato toohello nuovo minimo di 3.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-210">This means on Monday, hello first time autoscale checks for this condition, if hello instance count is 2, it scales toohello new minimum of 3.</span></span> <span data-ttu-id="8c0aa-211">Finché la scalabilità automatica continua toofind questa condizione profilo corrispondente (lunedì), elabora solo hello CPU regole basate su scale-out/in configurato per questo profilo.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-211">As long as autoscale continues toofind this profile condition matched (Monday), it only processes hello CPU-based scale-out/in rules configured for this profile.</span></span> <span data-ttu-id="8c0aa-212">In questo momento, non controlla per lunghezza coda hello.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-212">At this time, it does not check for hello queue length.</span></span> <span data-ttu-id="8c0aa-213">Tuttavia, se si desidera toobe condizione lunghezza coda di hello selezionata, è necessario includere le regole da profilo predefinito hello anche nel profilo di lunedì.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-213">However, if you also want hello queue length condition toobe checked, you should include those rules from hello default profile as well in your Monday profile.</span></span>

<span data-ttu-id="8c0aa-214">Analogamente, quando scalabilità automatica è attiva profilo predefinito toohello indietro, verifica innanzitutto se vengono soddisfatte le condizioni di hello minimo e massimo.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-214">Similarly, when autoscale switches back toohello default profile, it first checks if hello minimum and maximum conditions are met.</span></span> <span data-ttu-id="8c0aa-215">Se il numero di hello delle istanze in esecuzione hello è 12, ridimensiona nel too10, hello massimo consentito per profilo predefinito hello.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-215">If hello number of instances at hello time is 12, it scales in too10, hello maximum allowed for hello default profile.</span></span>

![Impostazioni di scalabilità automatica](./media/insights-autoscale-best-practices/insights-autoscale-best-practices-2.png)

### <a name="considerations-for-scaling-when-multiple-rules-are-configured-in-a-profile"></a><span data-ttu-id="8c0aa-217">Considerazioni sul ridimensionamento quando vengono configurate più regole in un profilo</span><span class="sxs-lookup"><span data-stu-id="8c0aa-217">Considerations for scaling when multiple rules are configured in a profile</span></span>
<span data-ttu-id="8c0aa-218">Vi sono casi in cui è possibile tooset più regole in un profilo.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-218">There are cases where you may have tooset multiple rules in a profile.</span></span> <span data-ttu-id="8c0aa-219">Quando sono impostate più regole, Hello seguente set di regole di scalabilità automatica è usato dai servizi.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-219">hello following set of autoscale rules are used by services use when multiple rules are set.</span></span>

<span data-ttu-id="8c0aa-220">In caso di *aumento del numero di istanze*, la scalabilità automatica viene eseguita se risulta soddisfatta una regola qualsiasi.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-220">On *scale out*, autoscale runs if any rule is met.</span></span>
<span data-ttu-id="8c0aa-221">In *scala aggiuntivo*, scalabilità automatica richiede tutte le regole toobe soddisfatti.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-221">On *scale-in*, autoscale require all rules toobe met.</span></span>

<span data-ttu-id="8c0aa-222">tooillustrate, si supponga di disporre delle seguenti regole di scalabilità automatica 4 hello:</span><span class="sxs-lookup"><span data-stu-id="8c0aa-222">tooillustrate, assume that you have hello following 4 autoscale rules:</span></span>

* <span data-ttu-id="8c0aa-223">Se la CPU è < 30%, ridurre il numero di istanze di 1</span><span class="sxs-lookup"><span data-stu-id="8c0aa-223">If CPU < 30 %, scale-in by 1</span></span>
* <span data-ttu-id="8c0aa-224">Se la memoria è < 50%, ridurre il numero di istanze di 1</span><span class="sxs-lookup"><span data-stu-id="8c0aa-224">If Memory < 50%, scale-in by 1</span></span>
* <span data-ttu-id="8c0aa-225">Se la CPU è > 75%, aumentare il numero di istanze di 1</span><span class="sxs-lookup"><span data-stu-id="8c0aa-225">If CPU > 75%, scale-out by 1</span></span>
* <span data-ttu-id="8c0aa-226">Se la memoria è > 75%, aumentare il numero di istanze di 1</span><span class="sxs-lookup"><span data-stu-id="8c0aa-226">If Memory > 75%, scale-out by 1</span></span>

<span data-ttu-id="8c0aa-227">Viene quindi eseguito hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="8c0aa-227">Then hello follow occurs:</span></span>

* <span data-ttu-id="8c0aa-228">Se la CPU è pari al 76% e la memoria è pari al 50%, il numero di istanze viene aumentato.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-228">If CPU is 76% and Memory is 50%, we scale-out.</span></span>
* <span data-ttu-id="8c0aa-229">Se la CPU è pari al 50% e la memoria è pari al 76%, il numero di istanze viene aumentato.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-229">If CPU is 50% and Memory is 76% we scale-out.</span></span>

<span data-ttu-id="8c0aa-230">Hello d'altra parte, se la CPU è 25% e della memoria è la scalabilità automatica 51% **non** scala-in.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-230">On hello other hand, if CPU is 25% and memory is 51% autoscale does **not** scale-in.</span></span> <span data-ttu-id="8c0aa-231">Tooscale-in, della CPU deve essere % 29 e memoria 49%.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-231">In order tooscale-in, CPU must be 29% and Memory 49%.</span></span>

### <a name="always-select-a-safe-default-instance-count"></a><span data-ttu-id="8c0aa-232">Selezionare sempre un conteggio di istanze predefinito sicuro</span><span class="sxs-lookup"><span data-stu-id="8c0aa-232">Always select a safe default instance count</span></span>
<span data-ttu-id="8c0aa-233">numero di istanza predefinito Hello è importante scalabilità automatica ridimensiona il conteggio toothat servizio quando la metrica non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-233">hello default instance count is important autoscale scales your service toothat count when metrics are not available.</span></span> <span data-ttu-id="8c0aa-234">Selezionare quindi un conteggio di istanze predefinito sicuro per i carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-234">Therefore, select a default instance count that's safe for your workloads.</span></span>

### <a name="configure-autoscale-notifications"></a><span data-ttu-id="8c0aa-235">Configurare le notifiche relative alla scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="8c0aa-235">Configure autoscale notifications</span></span>
<span data-ttu-id="8c0aa-236">Scalabilità automatica invia una notifica agli amministratori di hello e dai collaboratori della risorsa hello tramite posta elettronica se si verifica una delle seguenti condizioni hello:</span><span class="sxs-lookup"><span data-stu-id="8c0aa-236">Autoscale notifies hello administrators and contributors of hello resource by email if any of hello following conditions occur:</span></span>

* <span data-ttu-id="8c0aa-237">servizio di scalabilità automatica ha esito negativo tootake un'azione.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-237">autoscale service fails tootake an action.</span></span>
* <span data-ttu-id="8c0aa-238">Le metriche non sono disponibili per la scalabilità automatica servizio toomake una decisione di scala.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-238">Metrics are not available for autoscale service toomake a scale decision.</span></span>
* <span data-ttu-id="8c0aa-239">Sono disponibile (ripristino) nuovamente toomake una decisione di scala.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-239">Metrics are available (recovery) again toomake a scale decision.</span></span>
  <span data-ttu-id="8c0aa-240">Inoltre toohello condizioni riportate sopra, è possibile configurare posta elettronica o webhook tooget notifiche ricevere una notifica per le azioni di scalabilità ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-240">In addition toohello conditions above, you can configure email or webhook notifications tooget notified for successful scale actions.</span></span>
  
<span data-ttu-id="8c0aa-241">È inoltre possibile utilizzare uno stato di integrità hello toomonitor avviso Log attività del motore di scalabilità automatica hello.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-241">You can also use an Activity Log alert toomonitor hello health of hello autoscale engine.</span></span> <span data-ttu-id="8c0aa-242">Ecco alcuni esempi troppo[creare tutte le operazioni del motore di scalabilità automatica per la sottoscrizione di un avviso di Log attività toomonitor](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) o troppo[creare un avviso di Log attività toomonitor tutti non riuscito di scala di scalabilità automatica in / operazioni di scala la sottoscrizione](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span><span class="sxs-lookup"><span data-stu-id="8c0aa-242">Here are examples too[create an Activity Log Alert toomonitor all autoscale engine operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) or too[create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span></span>

## <a name="next-steps"></a><span data-ttu-id="8c0aa-243">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8c0aa-243">Next Steps</span></span>
- [<span data-ttu-id="8c0aa-244">Creare un avviso di Log attività toomonitor tutte le operazioni del motore di scalabilità automatica per la sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="8c0aa-244">Create an Activity Log Alert toomonitor all autoscale engine operations on your subscription.</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert)
- [<span data-ttu-id="8c0aa-245">Creare un avviso di Log attività toomonitor tutti non riuscito di scala di scalabilità automatica in / scalabilità operazioni per la sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="8c0aa-245">Create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert)
