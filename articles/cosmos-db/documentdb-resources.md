---
title: Modello di risorsa e concetti relativi ad Azure Cosmos DB | Microsoft Docs
description: Informazioni sul modello gerarchico di database, raccolte, funzioni definite dall'utente, documenti, autorizzazioni per gestire le risorse e altro ancora in Azure Cosmos DB.
keywords: Modello gerarchico, Cosmos DB, Azure, Microsoft Azure
services: cosmos-db
documentationcenter: 
author: AndrewHoh
manager: jhubbard
editor: monicar
ms.assetid: ef9d5c0c-0867-4317-bb1b-98e219799fd5
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: anhoh
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 8051742c7c368d1ed84bcd90ab75b20f62105e2f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="azure-cosmos-db-hierarchical-resource-model-and-core-concepts"></a><span data-ttu-id="a08a2-104">Modello di risorsa gerarchico e concetti di base relativi ad Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="a08a2-104">Azure Cosmos DB hierarchical resource model and core concepts</span></span>
<span data-ttu-id="a08a2-105">Le entità del database gestite da Azure Cosmos DB vengono chiamate **risorse**.</span><span class="sxs-lookup"><span data-stu-id="a08a2-105">The database entities that Azure Cosmos DB manages are referred to as **resources**.</span></span> <span data-ttu-id="a08a2-106">Ogni risorsa viene identificata in modo univoco da un URI logico.</span><span class="sxs-lookup"><span data-stu-id="a08a2-106">Each resource is uniquely identified by a logical URI.</span></span> <span data-ttu-id="a08a2-107">È possibile interagire con le risorse usando verbi HTTP, intestazioni di richiesta/risposta e codici di stato standard.</span><span class="sxs-lookup"><span data-stu-id="a08a2-107">You can interact with the resources using standard HTTP verbs, request/response headers and status codes.</span></span> 

<span data-ttu-id="a08a2-108">Dopo aver letto questo articolo, si riuscirà a rispondere alle domande seguenti:</span><span class="sxs-lookup"><span data-stu-id="a08a2-108">By reading this article, you'll be able to answer the following questions:</span></span>

* <span data-ttu-id="a08a2-109">Qual è il modello di risorsa di Cosmos DB?</span><span class="sxs-lookup"><span data-stu-id="a08a2-109">What is Cosmos DB's resource model?</span></span>
* <span data-ttu-id="a08a2-110">Quali sono le risorse definite dal sistema e quali le risorse definite dall'utente?</span><span class="sxs-lookup"><span data-stu-id="a08a2-110">What are system defined resources as opposed to user defined resources?</span></span>
* <span data-ttu-id="a08a2-111">Come si indirizza una risorsa?</span><span class="sxs-lookup"><span data-stu-id="a08a2-111">How do I address a resource?</span></span>
* <span data-ttu-id="a08a2-112">Come si usano le raccolte?</span><span class="sxs-lookup"><span data-stu-id="a08a2-112">How do I work with collections?</span></span>
* <span data-ttu-id="a08a2-113">Come si usano le stored procedure, i trigger e le funzioni definite dall'utente</span><span class="sxs-lookup"><span data-stu-id="a08a2-113">How do I work with stored procedures, triggers and User Defined Functions (UDFs)?</span></span>

## <a name="hierarchical-resource-model"></a><span data-ttu-id="a08a2-114">Modello di risorse gerarchico</span><span class="sxs-lookup"><span data-stu-id="a08a2-114">Hierarchical resource model</span></span>
<span data-ttu-id="a08a2-115">Come illustrato nel diagramma seguente, il **modello di risorsa** gerarchico di Cosmos DB è costituito da set di risorse associate a un account di database, ognuna indirizzabile tramite un URI logico e stabile.</span><span class="sxs-lookup"><span data-stu-id="a08a2-115">As the following diagram illustrates, the Cosmos DB hierarchical **resource model** consists of sets of resources under a database account, each addressable via a logical and stable URI.</span></span> <span data-ttu-id="a08a2-116">Un set di risorse viene definito **feed** in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="a08a2-116">A set of resources will be referred to as a **feed** in this article.</span></span> 

> [!NOTE]
> <span data-ttu-id="a08a2-117">Azure Cosmos DB offre un protocollo TCP molto efficiente, con un modello di comunicazione di tipo RESTful, disponibile tramite l'[API .NET client DocumentDB](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="a08a2-117">Azure Cosmos DB offers a highly efficient TCP protocol which is also RESTful in its communication model, available through the [DocumentDB .NET client API](documentdb-sdk-dotnet.md).</span></span>
> 
> 

<span data-ttu-id="a08a2-118">![Modello di risorsa gerarchico di Azure Cosmos DB][1]</span><span class="sxs-lookup"><span data-stu-id="a08a2-118">![Azure Cosmos DB hierarchical resource model][1]</span></span>  
<span data-ttu-id="a08a2-119">**Modello di risorse gerarchico**</span><span class="sxs-lookup"><span data-stu-id="a08a2-119">**Hierarchical resource model**</span></span>   

<span data-ttu-id="a08a2-120">Per iniziare a usare le risorse è necessario [creare un account di database](create-documentdb-dotnet.md) usando la sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a08a2-120">To start working with resources, you must [create a database account](create-documentdb-dotnet.md) using your Azure subscription.</span></span> <span data-ttu-id="a08a2-121">Un account di database può essere costituito da un set di **database**, ognuno contenente più **raccolte**. Ogni raccolta include a propria volta **stored procedure, trigger, funzioni definite dall'utente, documenti** e **allegati** correlati.</span><span class="sxs-lookup"><span data-stu-id="a08a2-121">A database account can consist of a set of **databases**, each containing multiple **collections**, each of which in turn contain **stored procedures, triggers, UDFs, documents** and related **attachments**.</span></span> <span data-ttu-id="a08a2-122">Un database include anche gli **utenti** associati, ognuno dei quali possiede un set di **autorizzazioni** per accedere a raccolte, stored procedure, trigger, UDF, documenti o allegati.</span><span class="sxs-lookup"><span data-stu-id="a08a2-122">A database also has associated **users**, each with a set of **permissions** to access collections, stored procedures, triggers, UDFs, documents or attachments.</span></span> <span data-ttu-id="a08a2-123">Mentre i database, gli utenti, le autorizzazioni e le raccolte sono ricorse definite dal sistema con schemi noti, i documenti e gli allegati includono contenuto JSON arbitrario definito dagli utenti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-123">While databases, users, permissions and collections are system-defined resources with well-known schemas, documents and attachments contain arbitrary, user defined JSON content.</span></span>  

| <span data-ttu-id="a08a2-124">Risorsa</span><span class="sxs-lookup"><span data-stu-id="a08a2-124">Resource</span></span> | <span data-ttu-id="a08a2-125">Descrizione</span><span class="sxs-lookup"><span data-stu-id="a08a2-125">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a08a2-126">Account di database</span><span class="sxs-lookup"><span data-stu-id="a08a2-126">Database account</span></span> |<span data-ttu-id="a08a2-127">Un account di database è associato a un set di database e a una quantità fissa di archivio BLOB per gli allegati.</span><span class="sxs-lookup"><span data-stu-id="a08a2-127">A database account is associated with a set of databases and a fixed amount of blob storage for attachments.</span></span> <span data-ttu-id="a08a2-128">È possibile creare uno o più account di database usando la sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a08a2-128">You can create one or more database accounts using your Azure subscription.</span></span> <span data-ttu-id="a08a2-129">Per altre informazioni, visitare la [pagina dei prezzi](https://azure.microsoft.com/pricing/details/cosmos-db/).</span><span class="sxs-lookup"><span data-stu-id="a08a2-129">For more information, visit our [pricing page](https://azure.microsoft.com/pricing/details/cosmos-db/).</span></span> |
| <span data-ttu-id="a08a2-130">Database</span><span class="sxs-lookup"><span data-stu-id="a08a2-130">Database</span></span> |<span data-ttu-id="a08a2-131">Un database è un contenitore logico di archiviazione documenti partizionato nelle raccolte.</span><span class="sxs-lookup"><span data-stu-id="a08a2-131">A database is a logical container of document storage partitioned across collections.</span></span> <span data-ttu-id="a08a2-132">Un database è anche un contenitore degli utenti</span><span class="sxs-lookup"><span data-stu-id="a08a2-132">It is also a users container.</span></span> |
| <span data-ttu-id="a08a2-133">Utente</span><span class="sxs-lookup"><span data-stu-id="a08a2-133">User</span></span> |<span data-ttu-id="a08a2-134">Spazio dei nomi logico per la definizione dell'ambito delle autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="a08a2-134">The logical namespace for scoping permissions.</span></span> |
| <span data-ttu-id="a08a2-135">Autorizzazione</span><span class="sxs-lookup"><span data-stu-id="a08a2-135">Permission</span></span> |<span data-ttu-id="a08a2-136">Token di autorizzazione associato a un utente per l'accesso a una risorsa specifica.</span><span class="sxs-lookup"><span data-stu-id="a08a2-136">An authorization token associated with a user for access to a specific resource.</span></span> |
| <span data-ttu-id="a08a2-137">Raccolta</span><span class="sxs-lookup"><span data-stu-id="a08a2-137">Collection</span></span> |<span data-ttu-id="a08a2-138">Una raccolta è un contenitore di documenti JSON e di logica dell'applicazione JavaScript associata.</span><span class="sxs-lookup"><span data-stu-id="a08a2-138">A collection is a container of JSON documents and the associated JavaScript application logic.</span></span> <span data-ttu-id="a08a2-139">Una raccolta è un'entità fatturabile, in cui il [costo](performance-levels.md) è determinato dal livello di prestazioni associato alla raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-139">A collection is a billable entity, where the [cost](performance-levels.md) is determined by the performance level associated with the collection.</span></span> <span data-ttu-id="a08a2-140">Le raccolte possono estendersi su più partizioni o server e possono essere ridimensionate per gestire volumi praticamente illimitati di archiviazione o di velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="a08a2-140">Collections can span one or more partitions/servers and can scale to handle practically unlimited volumes of storage or throughput.</span></span> |
| <span data-ttu-id="a08a2-141">Stored Procedure</span><span class="sxs-lookup"><span data-stu-id="a08a2-141">Stored Procedure</span></span> |<span data-ttu-id="a08a2-142">Logica dell'applicazione scritta in JavaScript, registrata con una raccolta ed eseguita a livello di transazione all'interno del motore di database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-142">Application logic written in JavaScript which is registered with a collection and transactionally executed within the database engine.</span></span> |
| <span data-ttu-id="a08a2-143">Trigger</span><span class="sxs-lookup"><span data-stu-id="a08a2-143">Trigger</span></span> |<span data-ttu-id="a08a2-144">Logica dell'applicazione scritta in JavaScript ed eseguita prima o dopo un'operazione di inserimento, sostituzione o eliminazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-144">Application logic written in JavaScript executed before or after either an insert, replace or delete operation.</span></span> |
| <span data-ttu-id="a08a2-145">UDF</span><span class="sxs-lookup"><span data-stu-id="a08a2-145">UDF</span></span> |<span data-ttu-id="a08a2-146">Logica dell'applicazione scritta in JavaScript.</span><span class="sxs-lookup"><span data-stu-id="a08a2-146">Application logic written in JavaScript.</span></span> <span data-ttu-id="a08a2-147">Le funzioni definite dall'utente consentono di modellare un operatore query personalizzato e quindi di estendere il linguaggio di query di base dell'API di DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="a08a2-147">UDFs enable you to model a custom query operator and thereby extend the core DocumentDB API query language.</span></span> |
| <span data-ttu-id="a08a2-148">Documento</span><span class="sxs-lookup"><span data-stu-id="a08a2-148">Document</span></span> |<span data-ttu-id="a08a2-149">Contenuto JSON definito dall'utente (arbitrario).</span><span class="sxs-lookup"><span data-stu-id="a08a2-149">User defined (arbitrary) JSON content.</span></span> <span data-ttu-id="a08a2-150">Per impostazione predefinita, non è necessario definire alcuno schema, né fornire indici secondari per tutti i documenti aggiunti a una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-150">By default, no schema needs to be defined nor do secondary indices need to be provided for all the documents added to a collection.</span></span> |
| <span data-ttu-id="a08a2-151">Attachment</span><span class="sxs-lookup"><span data-stu-id="a08a2-151">Attachment</span></span> |<span data-ttu-id="a08a2-152">Un allegato è un documento speciale contenente riferimenti e metadati associati per BLOB/file multimediali esterni.</span><span class="sxs-lookup"><span data-stu-id="a08a2-152">An attachment is a special document containing references and associated metadata for external blob/media.</span></span> <span data-ttu-id="a08a2-153">Lo sviluppatore può scegliere se gestire il BLOB con Cosmos DB o archiviarlo con un provider di servizi BLOB esterno, ad esempio OneDrive, Dropbox e così via.</span><span class="sxs-lookup"><span data-stu-id="a08a2-153">The developer can choose to have the blob managed by Cosmos DB or store it with an external blob service provider such as OneDrive, Dropbox, etc.</span></span> |

## <a name="system-vs-user-defined-resources"></a><span data-ttu-id="a08a2-154">Risorse definite dal sistema e risorse definite dall'utente</span><span class="sxs-lookup"><span data-stu-id="a08a2-154">System vs. user defined resources</span></span>
<span data-ttu-id="a08a2-155">Tutte le risorse quali account di database, database, raccolte, utenti, autorizzazioni, stored procedure, trigger e funzioni UDF hanno uno schema fisso e sono definite risorse di sistema.</span><span class="sxs-lookup"><span data-stu-id="a08a2-155">Resources such as database accounts, databases, collections, users, permissions, stored procedures, triggers, and UDFs - all have a fixed schema and are called system resources.</span></span> <span data-ttu-id="a08a2-156">Per le risorse quali documenti e allegati, invece, non sono previste restrizioni a livello di schema. Si tratta di risorse definite dall'utente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-156">In contrast, resources such as documents and attachments have no restrictions on the schema and are examples of user defined resources.</span></span> <span data-ttu-id="a08a2-157">In Cosmos DB le risorse definite sia dal sistema che dall'utente vengono rappresentate e gestite come risorse JSON conformi allo standard.</span><span class="sxs-lookup"><span data-stu-id="a08a2-157">In Cosmos DB, both system and user defined resources are represented and managed as standard-compliant JSON.</span></span> <span data-ttu-id="a08a2-158">Tutte le risorse, di sistema o definite dall'utente, presentano le proprietà comuni indicate di seguito.</span><span class="sxs-lookup"><span data-stu-id="a08a2-158">All resources, system or user defined, have the following common properties.</span></span>

> [!NOTE]
> <span data-ttu-id="a08a2-159">Si noti che, nell'implementazione JSON, tutte le proprietà generate dal sistema in una risorsa hanno come prefisso un carattere di sottolineatura (_).</span><span class="sxs-lookup"><span data-stu-id="a08a2-159">Note that all system generated properties in a resource are prefixed with an underscore (_) in their JSON representation.</span></span>
> 
> 

<table>
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="a08a2-160"><strong>Proprietà</strong></span><span class="sxs-lookup"><span data-stu-id="a08a2-160"><strong>Property</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-161"><strong>Impostabile dall'utente o generata dal sistema</strong></span><span class="sxs-lookup"><span data-stu-id="a08a2-161"><strong>User settable or system generated?</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-162"><strong>Scopo</strong></span><span class="sxs-lookup"><span data-stu-id="a08a2-162"><strong>Purpose</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="a08a2-163">_rid</span><span class="sxs-lookup"><span data-stu-id="a08a2-163">_rid</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-164">Generata dal sistema</span><span class="sxs-lookup"><span data-stu-id="a08a2-164">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-165">Identificatore gerarchico della risorsa, univoco e generato dal sistema</span><span class="sxs-lookup"><span data-stu-id="a08a2-165">System generated, unique and hierarchical identifier of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="a08a2-166">_etag</span><span class="sxs-lookup"><span data-stu-id="a08a2-166">_etag</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-167">Generata dal sistema</span><span class="sxs-lookup"><span data-stu-id="a08a2-167">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-168">etag della risorsa richiesta per il controllo della concorrenza ottimistica</span><span class="sxs-lookup"><span data-stu-id="a08a2-168">etag of the resource required for optimistic concurrency control</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="a08a2-169">_ts</span><span class="sxs-lookup"><span data-stu-id="a08a2-169">_ts</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-170">Generata dal sistema</span><span class="sxs-lookup"><span data-stu-id="a08a2-170">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-171">Ultimo timestamp aggiornato della risorsa</span><span class="sxs-lookup"><span data-stu-id="a08a2-171">Last updated timestamp of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="a08a2-172">_self</span><span class="sxs-lookup"><span data-stu-id="a08a2-172">_self</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-173">Generata dal sistema</span><span class="sxs-lookup"><span data-stu-id="a08a2-173">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-174">URI univoco indirizzabile della risorsa</span><span class="sxs-lookup"><span data-stu-id="a08a2-174">Unique addressable URI of the resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="a08a2-175">id</span><span class="sxs-lookup"><span data-stu-id="a08a2-175">id</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-176">Generata dal sistema</span><span class="sxs-lookup"><span data-stu-id="a08a2-176">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-177">Nome univoco della risorsa (con lo stesso valore della chiave di partizione) definito dall'utente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-177">User defined unique name of the resource (with the same partition key value).</span></span> <span data-ttu-id="a08a2-178">Se l'utente non specifica un ID, quest'ultimo verrà generato dal sistema.</span><span class="sxs-lookup"><span data-stu-id="a08a2-178">If the user does not specify an id, an id will be system generated</span></span></p></td>
        </tr>
    </tbody>
</table>

### <a name="wire-representation-of-resources"></a><span data-ttu-id="a08a2-179">Rappresentazione delle risorse</span><span class="sxs-lookup"><span data-stu-id="a08a2-179">Wire representation of resources</span></span>
<span data-ttu-id="a08a2-180">Cosmos DB non impone estensioni proprietarie o codifiche speciali allo standard JSON e funziona con i documenti JSON conformi a tale standard.</span><span class="sxs-lookup"><span data-stu-id="a08a2-180">Cosmos DB does not mandate any proprietary extensions to the JSON standard or special encodings; it works with standard compliant JSON documents.</span></span>  

### <a name="addressing-a-resource"></a><span data-ttu-id="a08a2-181">Indirizzamento di una risorsa</span><span class="sxs-lookup"><span data-stu-id="a08a2-181">Addressing a resource</span></span>
<span data-ttu-id="a08a2-182">Tutte le risorse sono indirizzabili mediante URI.</span><span class="sxs-lookup"><span data-stu-id="a08a2-182">All resources are URI addressable.</span></span> <span data-ttu-id="a08a2-183">Il valore della proprietà **_self** di una risorsa rappresenta l'URI relativo della risorsa.</span><span class="sxs-lookup"><span data-stu-id="a08a2-183">The value of the **_self** property of a resource represents the relative URI of the resource.</span></span> <span data-ttu-id="a08a2-184">Il formato dell'URI è dato dai segmenti del percorso /\<feed\>/{_rid}:</span><span class="sxs-lookup"><span data-stu-id="a08a2-184">The format of the URI consists of the /\<feed\>/{_rid} path segments:</span></span>  

| <span data-ttu-id="a08a2-185">Valore di _self</span><span class="sxs-lookup"><span data-stu-id="a08a2-185">Value of the _self</span></span> | <span data-ttu-id="a08a2-186">Descrizione</span><span class="sxs-lookup"><span data-stu-id="a08a2-186">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a08a2-187">/dbs</span><span class="sxs-lookup"><span data-stu-id="a08a2-187">/dbs</span></span> |<span data-ttu-id="a08a2-188">Feed dei database in un account di database</span><span class="sxs-lookup"><span data-stu-id="a08a2-188">Feed of databases under a database account</span></span> |
| <span data-ttu-id="a08a2-189">/dbs/{dbName}</span><span class="sxs-lookup"><span data-stu-id="a08a2-189">/dbs/{dbName}</span></span> |<span data-ttu-id="a08a2-190">Database con id corrispondente al valore {dbName}</span><span class="sxs-lookup"><span data-stu-id="a08a2-190">Database with an id matching the value {dbName}</span></span> |
| <span data-ttu-id="a08a2-191">/dbs/{dbName}/colls/</span><span class="sxs-lookup"><span data-stu-id="a08a2-191">/dbs/{dbName}/colls/</span></span> |<span data-ttu-id="a08a2-192">Feed delle raccolte in un database</span><span class="sxs-lookup"><span data-stu-id="a08a2-192">Feed of collections under a database</span></span> |
| <span data-ttu-id="a08a2-193">/dbs/{dbName}/colls/{collName}</span><span class="sxs-lookup"><span data-stu-id="a08a2-193">/dbs/{dbName}/colls/{collName}</span></span> |<span data-ttu-id="a08a2-194">Raccolta con un id corrispondente al valore {collName}</span><span class="sxs-lookup"><span data-stu-id="a08a2-194">Collection with an id matching the value {collName}</span></span> |
| <span data-ttu-id="a08a2-195">/dbs/{dbName}/colls/{collName}/docs</span><span class="sxs-lookup"><span data-stu-id="a08a2-195">/dbs/{dbName}/colls/{collName}/docs</span></span> |<span data-ttu-id="a08a2-196">Feed dei documenti in una raccolta</span><span class="sxs-lookup"><span data-stu-id="a08a2-196">Feed of documents under a collection</span></span> |
| <span data-ttu-id="a08a2-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span><span class="sxs-lookup"><span data-stu-id="a08a2-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span></span> |<span data-ttu-id="a08a2-198">Documento con id corrispondente al valore {doc}</span><span class="sxs-lookup"><span data-stu-id="a08a2-198">Document with an id matching the value {doc}</span></span> |
| <span data-ttu-id="a08a2-199">/dbs/{dbName}/users/</span><span class="sxs-lookup"><span data-stu-id="a08a2-199">/dbs/{dbName}/users/</span></span> |<span data-ttu-id="a08a2-200">Feed degli utenti in un database</span><span class="sxs-lookup"><span data-stu-id="a08a2-200">Feed of users under a database</span></span> |
| <span data-ttu-id="a08a2-201">/dbs/{dbName}/users/{userId}</span><span class="sxs-lookup"><span data-stu-id="a08a2-201">/dbs/{dbName}/users/{userId}</span></span> |<span data-ttu-id="a08a2-202">Utente con id corrispondente al valore {user}</span><span class="sxs-lookup"><span data-stu-id="a08a2-202">User with an id matching the value {user}</span></span> |
| <span data-ttu-id="a08a2-203">/dbs/{dbName}/users/{userId}/permissions</span><span class="sxs-lookup"><span data-stu-id="a08a2-203">/dbs/{dbName}/users/{userId}/permissions</span></span> |<span data-ttu-id="a08a2-204">Feed delle autorizzazioni in un utente</span><span class="sxs-lookup"><span data-stu-id="a08a2-204">Feed of permissions under a user</span></span> |
| <span data-ttu-id="a08a2-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span><span class="sxs-lookup"><span data-stu-id="a08a2-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span></span> |<span data-ttu-id="a08a2-206">Autorizzazione con id corrispondente al valore {permission}</span><span class="sxs-lookup"><span data-stu-id="a08a2-206">Permission with an id matching the value {permission}</span></span> |

<span data-ttu-id="a08a2-207">Ogni risorsa dispone di un nome utente univoco esposto mediante la proprietà ID.</span><span class="sxs-lookup"><span data-stu-id="a08a2-207">Each resource has a unique user defined name exposed via the id property.</span></span> <span data-ttu-id="a08a2-208">Nota: se l'utente non specifica un ID per i documenti, gli SDK supportati genereranno automaticamente un ID univoco per ogni documento.</span><span class="sxs-lookup"><span data-stu-id="a08a2-208">Note: for documents, if the user does not specify an id, our supported SDKs will automatically generate a unique id for the document.</span></span> <span data-ttu-id="a08a2-209">l'ID è una stringa definita dall'utente contenente fino a 256 caratteri, univoca all'interno del contesto di una risorsa padre specifica.</span><span class="sxs-lookup"><span data-stu-id="a08a2-209">The id is a user defined string, of up to 256 characters that is unique within the context of a specific parent resource.</span></span> 

<span data-ttu-id="a08a2-210">Ogni risorsa ha anche un identificatore gerarchico generato dal sistema (chiamato anche RID), disponibile tramite la proprietà _rid.</span><span class="sxs-lookup"><span data-stu-id="a08a2-210">Each resource also has a system generated hierarchical resource identifier (also referred to as an RID), which is available via the _rid property.</span></span> <span data-ttu-id="a08a2-211">Il RID codifica l'intera gerarchia di una determinata risorsa ed è una rappresentazione interna utile da usare per imporre l'integrità referenziale secondo un metodo distribuito.</span><span class="sxs-lookup"><span data-stu-id="a08a2-211">The RID encodes the entire hierarchy of a given resource and it is a convenient internal representation used to enforce referential integrity in a distributed manner.</span></span> <span data-ttu-id="a08a2-212">Il RID è univoco all'interno di un account di database e viene usato internamente da Cosmos DB per un routing efficiente senza necessità di eseguire ricerche su più partizioni.</span><span class="sxs-lookup"><span data-stu-id="a08a2-212">The RID is unique within a database account and it is internally used by Cosmos DB for efficient routing without requiring cross partition lookups.</span></span> <span data-ttu-id="a08a2-213">I valori delle proprietà _self e _rid sono entrambi rappresentazioni alternate e canoniche di una risorsa.</span><span class="sxs-lookup"><span data-stu-id="a08a2-213">The values of the _self and the  _rid properties are both alternate and canonical representations of a resource.</span></span> 

<span data-ttu-id="a08a2-214">Le API REST supportano l'indirizzamento delle risorse e il routing delle richieste tramite l'id e le proprietà _rid.</span><span class="sxs-lookup"><span data-stu-id="a08a2-214">The REST APIs support addressing of resources and routing of requests by both the id and the _rid properties.</span></span>

## <a name="database-accounts"></a><span data-ttu-id="a08a2-215">Account di database</span><span class="sxs-lookup"><span data-stu-id="a08a2-215">Database accounts</span></span>
<span data-ttu-id="a08a2-216">È possibile effettuare il provisioning di uno o più account di database di Cosmos DB usando la sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a08a2-216">You can provision one or more Cosmos DB database accounts using your Azure subscription.</span></span>

<span data-ttu-id="a08a2-217">È possibile creare e gestire account di database di Cosmos DB tramite il portale di Azure all'indirizzo [http://portal.azure.com/](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="a08a2-217">You can create and manage Cosmos DB database accounts via the Azure Portal at [http://portal.azure.com/](https://portal.azure.com/).</span></span> <span data-ttu-id="a08a2-218">Per la creazione e la gestione di un account di database è necessario l'accesso amministrativo e queste operazioni possono essere eseguite solo con una sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a08a2-218">Creating and managing a database account requires administrative access and can only be performed under your Azure subscription.</span></span> 

### <a name="database-account-properties"></a><span data-ttu-id="a08a2-219">Proprietà degli account di database</span><span class="sxs-lookup"><span data-stu-id="a08a2-219">Database account properties</span></span>
<span data-ttu-id="a08a2-220">Come parte del provisioning e della gestione di un account di database, è possibile configurare e leggere le proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="a08a2-220">As part of provisioning and managing a database account you can configure and read the following properties:</span></span>  

<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="a08a2-221"><strong>Nome proprietà</strong></span><span class="sxs-lookup"><span data-stu-id="a08a2-221"><strong>Property Name</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-222"><strong>Descrizione</strong></span><span class="sxs-lookup"><span data-stu-id="a08a2-222"><strong>Description</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="a08a2-223">Criterio di coerenza</span><span class="sxs-lookup"><span data-stu-id="a08a2-223">Consistency Policy</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-224">Impostare questa proprietà per configurare il livello di coerenza predefinito per tutte le raccolte nell'account di database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-224">Set this property to configure the default consistency level for all the collections under your database account.</span></span> <span data-ttu-id="a08a2-225">È possibile eseguire l'override del livello di coerenza per singole richieste usando l'intestazione di richiesta [x-ms-consistency-level].</span><span class="sxs-lookup"><span data-stu-id="a08a2-225">You can override the consistency level on a per request basis using the [x-ms-consistency-level] request header.</span></span> <p><p><span data-ttu-id="a08a2-226">Si noti che questa proprietà è applicabile solo alle <i>risorse definite dall'utente</i>.</span><span class="sxs-lookup"><span data-stu-id="a08a2-226">Note that this property only applies to the <i>user defined resources</i>.</span></span> <span data-ttu-id="a08a2-227">Tutte le risorse definite dal sistema sono configurate per il supporto di letture/query con coerenza assoluta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-227">All system defined resources are configured to support reads/queries with strong consistency.</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="a08a2-228">Chiavi di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="a08a2-228">Authorization Keys</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="a08a2-229">Si tratta delle chiavi master e readonly primaria e secondaria che consentono accesso amministrativo a tutte le risorse nell'account di database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-229">These are the primary and secondary master and readonly keys that provide administrative access to all of the resources under the database account.</span></span></p></td>
        </tr>
    </tbody>
</table>

<span data-ttu-id="a08a2-230">Si noti che oltre al provisioning, alla configurazione e alla gestione dell'account di database dal portale di Azure, è anche possibile creare e gestire account di database Cosmos DB a livello di codice usando le [API REST di Azure Cosmos DB](/rest/api/documentdb/) e gli [SDK client](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="a08a2-230">Note that in addition to provisioning, configuring and managing your database account from the Azure Portal, you can also programmatically create and manage Cosmos DB database accounts by using the [Azure Cosmos DB REST APIs](/rest/api/documentdb/) as well as [client SDKs](documentdb-sdk-dotnet.md).</span></span>  

## <a name="databases"></a><span data-ttu-id="a08a2-231">Database</span><span class="sxs-lookup"><span data-stu-id="a08a2-231">Databases</span></span>
<span data-ttu-id="a08a2-232">Un database di Cosmos DB è un contenitore logico di uno o più utenti e raccolte, come illustrato nel diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-232">A Cosmos DB database is a logical container of one or more collections and users, as shown in the following diagram.</span></span> <span data-ttu-id="a08a2-233">È possibile creare un numero qualsiasi di database in un account di database Cosmos DB, a condizione di rispettare i limiti di offerta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-233">You can create any number of databases under a Cosmos DB database account subject to offer limits.</span></span>  

<span data-ttu-id="a08a2-234">![Modello gerarchico di account di database e raccolte][2]</span><span class="sxs-lookup"><span data-stu-id="a08a2-234">![Database account and collections hierarchical model][2]</span></span>  
<span data-ttu-id="a08a2-235">**Un database è un contenitore logico di utenti e raccolte**</span><span class="sxs-lookup"><span data-stu-id="a08a2-235">**A Database is a logical container of users and collections**</span></span>

<span data-ttu-id="a08a2-236">Un database può contenere risorse di archiviazione di documenti praticamente illimitate partizionate all'interno delle raccolte.</span><span class="sxs-lookup"><span data-stu-id="a08a2-236">A database can contain virtually unlimited document storage partitioned within collections.</span></span>

### <a name="elastic-scale-of-a-cosmos-db-database"></a><span data-ttu-id="a08a2-237">Scalabilità elastica di un database di Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="a08a2-237">Elastic scale of a Cosmos DB database</span></span>
<span data-ttu-id="a08a2-238">Un database di Cosmos DB è elastico per impostazione predefinita e può includere da pochi GB a diversi petabyte di spazio di archiviazione per i documenti basato su SSD e velocità effettiva con provisioning.</span><span class="sxs-lookup"><span data-stu-id="a08a2-238">A Cosmos DB database is elastic by default – ranging from a few GB to petabytes of SSD backed document storage and provisioned throughput.</span></span> 

<span data-ttu-id="a08a2-239">A differenza di un database RDBMS tradizionale, l'ambito di un database in Cosmos DB non è limitato a un singolo computer.</span><span class="sxs-lookup"><span data-stu-id="a08a2-239">Unlike a database in traditional RDBMS, a database in Cosmos DB is not scoped to a single machine.</span></span> <span data-ttu-id="a08a2-240">Con Cosmos DB, in caso di crescita delle esigenze di scalabilità dell'applicazione, sarà possibile creare più raccolte, più database o entrambi.</span><span class="sxs-lookup"><span data-stu-id="a08a2-240">With Cosmos DB, as your application’s scale needs to grow, you can create more collections, databases, or both.</span></span> <span data-ttu-id="a08a2-241">Molte applicazioni prodotte direttamente da Microsoft usano Cosmos DB su scala consumer, creando database Cosmos DB di dimensioni estremamente elevate, ognuno dei quali include migliaia di raccolte con terabyte di spazio di archiviazione per i documenti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-241">Indeed, various first party applications within Microsoft have been using Cosmos DB at a consumer scale by creating extremely large Cosmos DB databases each containing thousands of collections with terabytes of document storage.</span></span> <span data-ttu-id="a08a2-242">È possibile aumentare o ridurre le dimensioni di un database aggiungendo o rimuovendo raccolte per soddisfare i requisiti di scalabilità dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-242">You can grow or shrink a database by adding or removing collections to meet your application’s scale requirements.</span></span> 

<span data-ttu-id="a08a2-243">Il numero di raccolte che è possibile creare in un database dipende dall'offerta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-243">You can create any number of collections within a database subject to the offer.</span></span> <span data-ttu-id="a08a2-244">Ogni raccolta dispone di risorse di archiviazione basate su SSD e velocità effettiva di cui è stato eseguito il provisioning in base al livello di prestazioni selezionato.</span><span class="sxs-lookup"><span data-stu-id="a08a2-244">Each collection has SSD backed storage and throughput provisioned for you depending on the selected performance tier.</span></span>

<span data-ttu-id="a08a2-245">Un database di Cosmos DB è anche un contenitore di utenti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-245">A Cosmos DB database is also a container of users.</span></span> <span data-ttu-id="a08a2-246">Un utente, a sua volta, è uno spazio dei nomi logico per un set di autorizzazioni che fornisce autorizzazioni specifiche e accesso a raccolte, documenti e allegati.</span><span class="sxs-lookup"><span data-stu-id="a08a2-246">A user, in-turn, is a logical namespace for a set of permissions that provides fine-grained authorization and access to collections, documents and attachments.</span></span>  

<span data-ttu-id="a08a2-247">Come per le altre risorse nel modello di risorsa di Cosmos DB, i database possono essere creati, sostituiti, eliminati, letti o enumerati facilmente usando le [API REST](/rest/api/documentdb/) o uno degli [SDK client](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="a08a2-247">As with other resources in the Cosmos DB resource model, databases can be created, replaced, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="a08a2-248">Cosmos DB assicura una coerenza assoluta per la lettura o l'esecuzione di query sui metadati di una risorsa del database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-248">Cosmos DB guarantees strong consistency for reading or querying the metadata of a database resource.</span></span> <span data-ttu-id="a08a2-249">Se si elimina un database, non sarà automaticamente più possibile accedere alle raccolte o agli utenti inclusi nel database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-249">Deleting a database automatically ensures that you cannot access any of the collections or users contained within it.</span></span>   

## <a name="collections"></a><span data-ttu-id="a08a2-250">Raccolte</span><span class="sxs-lookup"><span data-stu-id="a08a2-250">Collections</span></span>
<span data-ttu-id="a08a2-251">Una raccolta di Cosmos DB è un contenitore per i documenti JSON.</span><span class="sxs-lookup"><span data-stu-id="a08a2-251">A Cosmos DB collection is a container for your JSON documents.</span></span> 

### <a name="elastic-ssd-backed-document-storage"></a><span data-ttu-id="a08a2-252">Archiviazione flessibile di documenti basata su unità SSD</span><span class="sxs-lookup"><span data-stu-id="a08a2-252">Elastic SSD backed document storage</span></span>
<span data-ttu-id="a08a2-253">Una raccolta è intrinsecamente flessibile, poiché le dimensioni della raccolta aumentano o si riducono in seguito all'aggiunta o alla rimozione di documenti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-253">A collection is intrinsically elastic - it automatically grows and shrinks as you add or remove documents.</span></span> <span data-ttu-id="a08a2-254">Le raccolte sono risorse logiche e possono comprendere una o più partizioni fisiche o server.</span><span class="sxs-lookup"><span data-stu-id="a08a2-254">Collections are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="a08a2-255">Il numero di partizioni in una raccolta è determinato da Cosmos DB in base allo spazio di archiviazione e alla velocità effettiva con provisioning della raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-255">The number of partitions within a collection is determined by Cosmos DB based on the storage size and the provisioned throughput of your collection.</span></span> <span data-ttu-id="a08a2-256">Ogni partizione in Cosmos DB ha una quantità fissa di archiviazione supportata da unità SSD associata e viene replicata per la disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="a08a2-256">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="a08a2-257">Le partizioni vengono completamente gestite da Azure Cosmos DB e non è necessario scrivere codice complesso o gestire le partizioni.</span><span class="sxs-lookup"><span data-stu-id="a08a2-257">Partition management is fully managed by Azure Cosmos DB, and you do not have to write complex code or manage your partitions.</span></span> <span data-ttu-id="a08a2-258">Le raccolte di Cosmos DB sono **praticamente illimitate** in termini di spazio di archiviazione e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="a08a2-258">Cosmos DB collections are **practically unlimited** in terms of storage and throughput.</span></span> 

### <a name="automatic-indexing-of-collections"></a><span data-ttu-id="a08a2-259">Indicizzazione automatica delle raccolte</span><span class="sxs-lookup"><span data-stu-id="a08a2-259">Automatic indexing of collections</span></span>
<span data-ttu-id="a08a2-260">Cosmos DB è un sistema di database effettivamente privo di schema.</span><span class="sxs-lookup"><span data-stu-id="a08a2-260">Cosmos DB is a true schema-free database system.</span></span> <span data-ttu-id="a08a2-261">Non si presuppone o richiede alcuno schema per i documenti JSON.</span><span class="sxs-lookup"><span data-stu-id="a08a2-261">It does not assume or require any schema for the JSON documents.</span></span> <span data-ttu-id="a08a2-262">Cosmos DB indicizza automaticamente i documenti aggiunti a una raccolta e li rende disponibili per l'esecuzione di query.</span><span class="sxs-lookup"><span data-stu-id="a08a2-262">As you add documents to a collection, Cosmos DB automatically indexes them and they are available for you to query.</span></span> <span data-ttu-id="a08a2-263">L'indicizzazione automatica di documenti senza la necessità di schemi o di indici secondari è una funzionalità chiave di Cosmos DB ed è resa possibile da tecniche di gestione dell'indice ottimizzate per la scrittura, prive di blocco e strutturate in log.</span><span class="sxs-lookup"><span data-stu-id="a08a2-263">Automatic indexing of documents without requiring schema or secondary indexes is a key capability of Cosmos DB and is enabled by write-optimized, lock-free and log-structured index maintenance techniques.</span></span> <span data-ttu-id="a08a2-264">Cosmos DB supporta un volume sostenuto di scritture estremamente veloci, gestendo al tempo stesso query coerenti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-264">Cosmos DB supports sustained volume of extremely fast writes while still serving consistent queries.</span></span> <span data-ttu-id="a08a2-265">L'archiviazione documenti e l'archiviazione dell'indice sono usate per calcolare le risorse di archiviazione usate da ogni raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-265">Both document and index storage are used to calculate the storage consumed by each collection.</span></span> <span data-ttu-id="a08a2-266">È possibile controllare i compromessi tra archiviazione e prestazioni associati all'indicizzazione tramite la configurazione di un criterio di indicizzazione per una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-266">You can control the storage and performance trade-offs associated with indexing by configuring the indexing policy for a collection.</span></span> 

### <a name="configuring-the-indexing-policy-of-a-collection"></a><span data-ttu-id="a08a2-267">Configurazione dei criteri di indicizzazione di una raccolta</span><span class="sxs-lookup"><span data-stu-id="a08a2-267">Configuring the indexing policy of a collection</span></span>
<span data-ttu-id="a08a2-268">Il criterio di indicizzazione di ogni raccolta rende possibili i compromessi tra prestazioni e archiviazione associati all'indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-268">The indexing policy of each collection allows you to make performance and storage trade-offs associated with indexing.</span></span> <span data-ttu-id="a08a2-269">Le opzioni seguenti sono disponibili come parte della configurazione dell'indicizzazione:</span><span class="sxs-lookup"><span data-stu-id="a08a2-269">The following options are available to you as part of indexing configuration:</span></span>  

* <span data-ttu-id="a08a2-270">Possibilità di scegliere se la raccolta indicizza automaticamente o meno tutti i documenti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-270">Choose whether the collection automatically indexes all of the documents or not.</span></span> <span data-ttu-id="a08a2-271">Per impostazione predefinita, saranno indicizzati automaticamente tutti i documenti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-271">By default, all documents are automatically indexed.</span></span> <span data-ttu-id="a08a2-272">È possibile scegliere di disattivare l'indicizzazione automatica e aggiungere in modo selettivo solo documenti specifici all'indice.</span><span class="sxs-lookup"><span data-stu-id="a08a2-272">You can choose to turn off automatic indexing and selectively add only specific documents to the index.</span></span> <span data-ttu-id="a08a2-273">In alternativa, è possibile scegliere di escludere in modo selettivo solo documenti specifici.</span><span class="sxs-lookup"><span data-stu-id="a08a2-273">Conversely, you can selectively choose to exclude only specific documents.</span></span> <span data-ttu-id="a08a2-274">Per ottenere questo risultato, impostare la proprietà automatica su true o false nella proprietà indexingPolicy di una raccolta e usare l'intestazione di richiesta [x-ms-indexingdirective] durante l'inserimento, la sostituzione o l'eliminazione di un documento.</span><span class="sxs-lookup"><span data-stu-id="a08a2-274">You can achieve this by setting the automatic property to be true or false on the indexingPolicy of a collection and using the [x-ms-indexingdirective] request header while inserting, replacing or deleting a document.</span></span>  
* <span data-ttu-id="a08a2-275">Possibilità di scegliere se includere o escludere percorsi o modelli specifici nei documenti dall'indice.</span><span class="sxs-lookup"><span data-stu-id="a08a2-275">Choose whether to include or exclude specific paths or patterns in your documents from the index.</span></span> <span data-ttu-id="a08a2-276">Per ottenere questo risultato, impostare rispettivamente includedPaths e excludedPaths in indexingPolicy di una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-276">You can achieve this by setting includedPaths and excludedPaths on the indexingPolicy of a collection respectively.</span></span> <span data-ttu-id="a08a2-277">È anche possibile configurare i compromessi relativi ad archiviazione e prestazioni per query di intervallo e hash per modelli di percorso specifici.</span><span class="sxs-lookup"><span data-stu-id="a08a2-277">You can also configure the storage and performance trade-offs for range and hash queries for specific path patterns.</span></span> 
* <span data-ttu-id="a08a2-278">Possibilità di scegliere tra aggiornamenti sincroni (coerenti) e asincroni (differiti) dell'indice.</span><span class="sxs-lookup"><span data-stu-id="a08a2-278">Choose between synchronous (consistent) and asynchronous (lazy) index updates.</span></span> <span data-ttu-id="a08a2-279">Per impostazione predefinita, l'indice è aggiornato in modo sincrono a ogni inserimento, sostituzione o eliminazione di un documento nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-279">By default, the index is updated synchronously on each insert, replace or delete of a document to the collection.</span></span> <span data-ttu-id="a08a2-280">Ciò permette alle query di rispettare lo stesso livello di coerenza delle letture di documenti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-280">This enables the queries to honor the same consistency level as that of the document reads.</span></span> <span data-ttu-id="a08a2-281">Anche se Cosmos DB è ottimizzato per la scrittura e supporta volumi elevati di scritture di documenti, oltre a offrire la manutenzione sincrona dell'indice e la gestione di query coerenti, è possibile configurare determinate raccolte per l'aggiornamento differito dell'indice.</span><span class="sxs-lookup"><span data-stu-id="a08a2-281">While Cosmos DB is write optimized and supports sustained volumes of document writes along with synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="a08a2-282">L'indicizzazione differita migliora ulteriormente le prestazioni di scrittura ed è ideale per scenari di inserimento in blocco per raccolte principalmente a uso intensivo di lettura.</span><span class="sxs-lookup"><span data-stu-id="a08a2-282">Lazy indexing boosts the write performance further and is ideal for bulk ingestion scenarios for primarily read-heavy collections.</span></span>

<span data-ttu-id="a08a2-283">Il criterio di indicizzazione può essere modificato tramite l'esecuzione di un'operazione PUT sulla raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-283">The indexing policy can be changed by executing a PUT on the collection.</span></span> <span data-ttu-id="a08a2-284">Può essere ottenuto tramite l'[SDK client](documentdb-sdk-dotnet.md), il [portale di Azure](https://portal.azure.com) o le [API REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="a08a2-284">This can be achieved either through the [client SDK](documentdb-sdk-dotnet.md), the [Azure Portal](https://portal.azure.com) or the [REST APIs](/rest/api/documentdb/).</span></span>

### <a name="querying-a-collection"></a><span data-ttu-id="a08a2-285">Esecuzione di query su una raccolta</span><span class="sxs-lookup"><span data-stu-id="a08a2-285">Querying a collection</span></span>
<span data-ttu-id="a08a2-286">I documenti in una raccolta possono avere schemi arbitrari ed è possibile eseguire query sui documenti in una raccolta senza fornire anticipatamente alcuno schema o alcun indice secondario.</span><span class="sxs-lookup"><span data-stu-id="a08a2-286">The documents within a collection can have arbitrary schemas and you can query documents within a collection without providing any schema or secondary indices upfront.</span></span> <span data-ttu-id="a08a2-287">È possibile eseguire query sulla raccolta seguendo la procedura descritta in [API di DocumentDB per Azure Cosmos DB: riferimento per la sintassi SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx), che offre avanzati operatori gerarchici, relazionali e spaziali ed estendibilità tramite funzioni definite dall'utente basate su JavaScript.</span><span class="sxs-lookup"><span data-stu-id="a08a2-287">You can query the collection using the [Azure Cosmos DB DocumentDB API: SQL syntax reference](https://msdn.microsoft.com/library/azure/dn782250.aspx), which provides rich hierarchical, relational, and spatial operators and extensibility via JavaScript-based UDFs.</span></span> <span data-ttu-id="a08a2-288">La grammatica JSON permette la modellazione di documenti JSON come alberi con etichette come nodi dell'albero.</span><span class="sxs-lookup"><span data-stu-id="a08a2-288">JSON grammar allows for modeling JSON documents as trees with labels as the tree nodes.</span></span> <span data-ttu-id="a08a2-289">Viene usata dalle tecniche di indicizzazione automatica dell'API di DocumentDB e dal dialetto SQL dell'API di DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="a08a2-289">This is exploited both by DocumentDB API’s automatic indexing techniques as well as DocumentDB API's SQL dialect.</span></span> <span data-ttu-id="a08a2-290">Il linguaggio di query dell'API di DocumentDB è caratterizzato da tre aspetti principali:</span><span class="sxs-lookup"><span data-stu-id="a08a2-290">The DocumetDB API query language consists of three main aspects:</span></span>   

1. <span data-ttu-id="a08a2-291">Un set ridotto di operazioni di query mappate in modo naturale alla struttura ad albero, che include query e proiezioni gerarchiche.</span><span class="sxs-lookup"><span data-stu-id="a08a2-291">A small set of query operations that map naturally to the tree structure including hierarchical queries and projections.</span></span> 
2. <span data-ttu-id="a08a2-292">Un sottoinsieme di operazioni relazionali, incluse la composizione, l'applicazione di filtri, le proiezioni, le aggregazioni e i self join.</span><span class="sxs-lookup"><span data-stu-id="a08a2-292">A subset of relational operations including composition, filter, projections, aggregates and self joins.</span></span> 
3. <span data-ttu-id="a08a2-293">Funzioni definite dall'utente pure basate su JavaScript in grado di funzionare con (1) e (2).</span><span class="sxs-lookup"><span data-stu-id="a08a2-293">Pure JavaScript based UDFs that work with (1) and (2).</span></span>  

<span data-ttu-id="a08a2-294">Il modello di query di Cosmos DB cerca di raggiungere un equilibrio tra funzionalità, efficienza e semplicità.</span><span class="sxs-lookup"><span data-stu-id="a08a2-294">The Cosmos DB query model attempts to strike a balance between functionality, efficiency and simplicity.</span></span> <span data-ttu-id="a08a2-295">Il motore di database di Cosmos DB compila ed esegue in modo nativo le istruzioni di query SQL.</span><span class="sxs-lookup"><span data-stu-id="a08a2-295">The Cosmos DB database engine natively compiles and executes the SQL query statements.</span></span> <span data-ttu-id="a08a2-296">È possibile eseguire query su una raccolta usando le [API REST](/rest/api/documentdb/) o uno degli [SDK client](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="a08a2-296">You can query a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="a08a2-297">In .NET SDK è disponibile un provider LINQ.</span><span class="sxs-lookup"><span data-stu-id="a08a2-297">The .NET SDK comes with a LINQ provider.</span></span>

> [!TIP]
> <span data-ttu-id="a08a2-298">È possibile provare l'API di DocumentDB ed eseguire query SQL con il set di dati in [Query Playground](https://www.documentdb.com/sql/demo).</span><span class="sxs-lookup"><span data-stu-id="a08a2-298">You can try out the DocumentDB API and run SQL queries against our dataset in the [Query Playground](https://www.documentdb.com/sql/demo).</span></span>
> 
> 

## <a name="multi-document-transactions"></a><span data-ttu-id="a08a2-299">Transazioni in più documenti</span><span class="sxs-lookup"><span data-stu-id="a08a2-299">Multi-document transactions</span></span>
<span data-ttu-id="a08a2-300">Le transazioni di database offrono un modello di programmazione sicuro e prevedibile per la gestione delle modifiche simultanee ai dati.</span><span class="sxs-lookup"><span data-stu-id="a08a2-300">Database transactions provide a safe and predictable programming model for dealing with concurrent changes to the data.</span></span> <span data-ttu-id="a08a2-301">In RDBMS la logica di business è tradizionalmente scritta tramite la scrittura di **stored procedure** e/o **trigger** ed è inviata al server database per l'esecuzione transazionale.</span><span class="sxs-lookup"><span data-stu-id="a08a2-301">In RDBMS, the traditional way to write business logic is to write **stored-procedures** and/or **triggers** and ship it to the database server for transactional execution.</span></span> <span data-ttu-id="a08a2-302">In RDBMS il programmatore di applicazioni deve gestire due linguaggi di programmazione diversi:</span><span class="sxs-lookup"><span data-stu-id="a08a2-302">In RDBMS, the application programmer is required to deal with two disparate programming languages:</span></span> 

* <span data-ttu-id="a08a2-303">Linguaggio di programmazione delle applicazioni (non transazionale), ad esempio JavaScript, Python, C#, Java e così via.</span><span class="sxs-lookup"><span data-stu-id="a08a2-303">The (non-transactional) application programming language (e.g. JavaScript, Python, C#, Java, etc.)</span></span>
* <span data-ttu-id="a08a2-304">T-SQL, ovvero il linguaggio di programmazione transazionale eseguito in modo nativo dal database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-304">T-SQL, the transactional programming language which is natively executed by the database</span></span>

<span data-ttu-id="a08a2-305">In virtù dell'integrazione completa di JavaScript e JSON direttamente nel motore di database, Cosmos DB offre un modello di programmazione intuitivo per eseguire la logica dell'applicazione basata su JavaScript direttamente nelle raccolte in termini di stored procedure e trigger.</span><span class="sxs-lookup"><span data-stu-id="a08a2-305">By virtue of its deep commitment to JavaScript and JSON directly within the database engine, Cosmos DB provides an intuitive programming model for executing JavaScript based application logic directly on the collections in terms of stored procedures and triggers.</span></span> <span data-ttu-id="a08a2-306">Questo offre entrambi i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="a08a2-306">This allows for both of the following:</span></span>

* <span data-ttu-id="a08a2-307">Implementazione efficiente del controllo della concorrenza, ripristino e indicizzazione automatica dei grafici di oggetti JSON direttamente nel motore di database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-307">Efficient implementation of concurrency control, recovery, automatic indexing of the JSON object graphs directly in the database engine</span></span>
* <span data-ttu-id="a08a2-308">Espressione naturale di flusso di controllo, definizione dell'ambito delle variabili e assegnazione e integrazione delle primitive di gestione delle eccezioni con transazioni di database direttamente sotto forma di linguaggio di programmazione JavaScript.</span><span class="sxs-lookup"><span data-stu-id="a08a2-308">Naturally expressing control flow, variable scoping, assignment and integration of exception handling primitives with database transactions directly in terms of the JavaScript programming language</span></span>

<span data-ttu-id="a08a2-309">La logica JavaScript registrata a livello di raccolta può quindi rilasciare operazioni sui documenti della raccolta specifica.</span><span class="sxs-lookup"><span data-stu-id="a08a2-309">The JavaScript logic registered at a collection level can then issue database operations on the documents of the given collection.</span></span> <span data-ttu-id="a08a2-310">Cosmos DB esegue implicitamente il wrapping di stored procedure e trigger basati su JavaScript in transazioni di ambiente ACID con isolamento degli snapshot nei documenti in una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-310">Cosmos DB implicitly wraps the JavaScript based stored procedures and triggers within an ambient ACID transactions with snapshot isolation across documents within a collection.</span></span> <span data-ttu-id="a08a2-311">Se JavaScript genera un'eccezione durante l'esecuzione, l'intera transazione sarà interrotta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-311">During the course of its execution, if the JavaScript throws an exception, then the entire transaction is aborted.</span></span> <span data-ttu-id="a08a2-312">Il modello di programmazione risultante è molto semplice ma efficace.</span><span class="sxs-lookup"><span data-stu-id="a08a2-312">The resulting programming model is a very simple yet powerful.</span></span> <span data-ttu-id="a08a2-313">Gli sviluppatori JavaScript ottengono un modello di programmazione "durevole", usando al tempo stesso i costrutti dei propri linguaggi preferiti e i primitivi di librerie.</span><span class="sxs-lookup"><span data-stu-id="a08a2-313">JavaScript developers get a “durable” programming model while still using their familiar language constructs and library primitives.</span></span>   

<span data-ttu-id="a08a2-314">La possibilità di eseguire JavaScript direttamente nel motore di database nello stesso spazio di indirizzi del pool di buffer permette l'esecuzione efficiente e transazionale di operazioni di database nei documenti di una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-314">The ability to execute JavaScript directly within the database engine in the same address space as the buffer pool enables performant and transactional execution of database operations against the documents of a collection.</span></span> <span data-ttu-id="a08a2-315">Poiché il motore di database di Cosmos DB adotta completamente JSON e JavaScript, elimina eventuali mancate corrispondenze di impedenza tra i sistemi di tipi dell'applicazione e del database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-315">Furthermore, Cosmos DB database engine makes a deep commitment to the JSON and JavaScript eliminates any impedance mismatch between the type systems of application and the database.</span></span>   

<span data-ttu-id="a08a2-316">Dopo aver creato una raccolta, è possibile registrare stored procedure, trigger e UDF con la raccolta usando le [API REST](/rest/api/documentdb/) o uno degli [SDK client](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="a08a2-316">After creating a collection, you can register stored procedures, triggers and UDFs with a collection using the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="a08a2-317">Dopo la registrazione, sarà possibile farvi riferimento ed eseguire questi elementi.</span><span class="sxs-lookup"><span data-stu-id="a08a2-317">After registration, you can reference and execute them.</span></span> <span data-ttu-id="a08a2-318">La stored procedure seguente, scritta interamente in JavaScript, accetta due argomenti (titolo del libro e nome dell'autore) e crea un nuovo documento, esegue query per un documento e quindi lo aggiorna. Tutte queste operazioni sono eseguite tramite una transazione ACID implicita.</span><span class="sxs-lookup"><span data-stu-id="a08a2-318">Consider the following stored procedure written entirely in JavaScript, the code below takes two arguments (book name and author name) and creates a new document, queries for a document and then updates it – all within an implicit ACID transaction.</span></span> <span data-ttu-id="a08a2-319">Se in un punto qualsiasi dell'esecuzione viene generata un'eccezione JavaScript, l'intera transazione viene interrotta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-319">At any point during the execution, if a JavaScript exception is thrown, the entire transaction aborts.</span></span>

    function businessLogic(name, author) {
        var context = getContext();
        var collectionManager = context.getCollection();        
        var collectionLink = collectionManager.getSelfLink()

        // create a new document.
        collectionManager.createDocument(collectionLink,
            {id: name, author: author},
            function(err, documentCreated) {
                if(err) throw new Error(err.message);

                // filter documents by author
                var filterQuery = "SELECT * from root r WHERE r.author = 'George R.'";
                collectionManager.queryDocuments(collectionLink,
                    filterQuery,
                    function(err, matchingDocuments) {
                        if(err) throw new Error(err.message);

                        context.getResponse().setBody(matchingDocuments.length);

                        // Replace the author name for all documents that satisfied the query.
                        for (var i = 0; i < matchingDocuments.length; i++) {
                            matchingDocuments[i].author = "George R. R. Martin";
                            // we don’t need to execute a callback because they are in parallel
                            collectionManager.replaceDocument(matchingDocuments[i]._self,
                                matchingDocuments[i]);   
                        }
                    })
            })
    };

<span data-ttu-id="a08a2-320">Il client può "inviare" la logica JavaScript precedente al database per l'esecuzione transazionale tramite POST HTTP.</span><span class="sxs-lookup"><span data-stu-id="a08a2-320">The client can “ship” the above JavaScript logic to the database for transactional execution via HTTP POST.</span></span> <span data-ttu-id="a08a2-321">Per altre informazioni sull'uso di metodi HTTP, vedere [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx) (Interazioni RESTful con risorse di Azure Cosmos DB).</span><span class="sxs-lookup"><span data-stu-id="a08a2-321">For more information about using HTTP methods, see [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span> 

    client.createStoredProcedureAsync(collection._self, {id: "CRUDProc", body: businessLogic})
       .then(function(createdStoredProcedure) {
            return client.executeStoredProcedureAsync(createdStoredProcedure.resource._self,
                "NoSQL Distilled",
                "Martin Fowler");
        })
        .then(function(result) {
            console.log(result);
        },
        function(error) {
            console.log(error);
        });


<span data-ttu-id="a08a2-322">Poiché il database comprende in modo nativo JSON e JavaScript, non si verificano mancate corrispondenze tra sistemi di tipi né sono necessari "mapping OR" o generazione di codice.</span><span class="sxs-lookup"><span data-stu-id="a08a2-322">Notice that because the database natively understands JSON and JavaScript, there is no type system mismatch, no “OR mapping” or code generation magic required.</span></span>   

<span data-ttu-id="a08a2-323">Le stored procedure e i trigger interagiscono con una raccolta e con i documenti in una raccolta tramite un modello a oggetti ben definito, che espone il contesto corrente della raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-323">Stored procedures and triggers interact with a collection and the documents in a collection through a well-defined object model, which exposes the current collection context.</span></span>  

<span data-ttu-id="a08a2-324">Le raccolte nell'API di DocumentDB possono essere create, eliminate, lette o enumerate facilmente usando le [API REST](/rest/api/documentdb/) o uno degli [SDK client](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="a08a2-324">Collections in the DocumentDB API can be created, deleted, read or enumerated easily using either the [REST APIs](/rest/api/documentdb/) or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="a08a2-325">L'API di DocumentDB offre sempre una coerenza assoluta per la lettura o l'esecuzione di query sui metadati di una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-325">The DocumentDB API always provides strong consistency for reading or querying the metadata of a collection.</span></span> <span data-ttu-id="a08a2-326">Se si elimina una raccolta, non sarà automaticamente più possibile accedere a documenti, allegati, stored procedure, trigger e funzioni UDF inclusi nella raccolta stessa.</span><span class="sxs-lookup"><span data-stu-id="a08a2-326">Deleting a collection automatically ensures that you cannot access any of the documents, attachments, stored procedures, triggers, and UDFs contained within it.</span></span>   

## <a name="stored-procedures-triggers-and-user-defined-functions-udf"></a><span data-ttu-id="a08a2-327">Stored procedure, trigger e funzioni definite dall'utente (UDF)</span><span class="sxs-lookup"><span data-stu-id="a08a2-327">Stored procedures, triggers and User Defined Functions (UDF)</span></span>
<span data-ttu-id="a08a2-328">Come illustrato nella sezione precedente, è possibile scrivere logica dell'applicazione per l'esecuzione direttamente in una transazione nel motore del database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-328">As described in the previous section, you can write application logic to run directly within a transaction inside of the database engine.</span></span> <span data-ttu-id="a08a2-329">La logica dell'applicazione può essere scritta interamente in JavaScript e può essere modellata come stored procedure, trigger o funzione definita dall'utente (UDF, User-Defined Function).</span><span class="sxs-lookup"><span data-stu-id="a08a2-329">The application logic can be written entirely in JavaScript and can be modeled as a stored procedure, trigger or a UDF.</span></span> <span data-ttu-id="a08a2-330">Il codice JavaScript in una stored procedure o un trigger può inserire, sostituire, eliminare, leggere o sottoporre a query documenti all'interno di una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-330">The JavaScript code within a stored procedure or a trigger can insert, replace, delete, read or query documents within a collection.</span></span> <span data-ttu-id="a08a2-331">Il codice JavaScript all'interno di una funzione definita dall'utente, invece, non può inserire, sostituire o eliminare documenti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-331">On the other hand, the JavaScript within a UDF cannot insert, replace, or delete documents.</span></span> <span data-ttu-id="a08a2-332">Le funzioni definite dall'utente enumerano i documenti di un set di risultati di query e producono un altro set di risultati.</span><span class="sxs-lookup"><span data-stu-id="a08a2-332">UDFs enumerate the documents of a query's result set and produce another result set.</span></span> <span data-ttu-id="a08a2-333">Per la multi-tenancy, Cosmos DB applica una rigida governance delle risorse basata sulle prenotazioni.</span><span class="sxs-lookup"><span data-stu-id="a08a2-333">For multi-tenancy, Cosmos DB enforces a strict reservation based resource governance.</span></span> <span data-ttu-id="a08a2-334">Ogni stored procedure, trigger o funzione UDF ottiene una quantità fissa di risorse del sistema operativo per l'esecuzione delle operazioni.</span><span class="sxs-lookup"><span data-stu-id="a08a2-334">Each stored procedure, trigger or a UDF gets a fixed quantum of operating system resources to do its work.</span></span> <span data-ttu-id="a08a2-335">Le stored procedure, i trigger o le funzioni UDF, inoltre, non possono collegarsi a librerie JavaScript esterne e saranno disattivati in caso di superamento dei rispettivi budget di risorse allocati.</span><span class="sxs-lookup"><span data-stu-id="a08a2-335">Furthermore, stored procedures, triggers or UDFs cannot link against external JavaScript libraries and are blacklisted if they exceed the resource budgets allocated to them.</span></span> <span data-ttu-id="a08a2-336">È possibile eseguire o annullare la registrazione di stored procedure, trigger o funzioni definite dall'utente con una raccolta usando le API REST.</span><span class="sxs-lookup"><span data-stu-id="a08a2-336">You can register, unregister stored procedures, triggers or UDFs with a collection by using the REST APIs.</span></span>  <span data-ttu-id="a08a2-337">Durante la registrazione, una stored procedure, un trigger o una funzione UDF saranno precompilati e archiviati come codice byte, che sarà eseguito in seguito.</span><span class="sxs-lookup"><span data-stu-id="a08a2-337">Upon registration a stored procedure, trigger, or a UDF is pre-compiled and stored as byte code which gets executed later.</span></span> <span data-ttu-id="a08a2-338">La sezione seguente illustra come usare Cosmos DB JavaScript SDK per la registrazione, l'esecuzione e l'annullamento della registrazione di una stored procedure, un trigger e una funzione definita dall'utente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-338">The following section illustrate how you can use the Cosmos DB JavaScript SDK to register, execute, and unregister a stored procedure, trigger, and a UDF.</span></span> <span data-ttu-id="a08a2-339">JavaScript SDK è un semplice wrapper per le [API REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="a08a2-339">The JavaScript SDK is a simple wrapper over the [REST APIs](/rest/api/documentdb/).</span></span> 

### <a name="registering-a-stored-procedure"></a><span data-ttu-id="a08a2-340">Registrazione di una stored procedure</span><span class="sxs-lookup"><span data-stu-id="a08a2-340">Registering a stored procedure</span></span>
<span data-ttu-id="a08a2-341">La registrazione di una stored procedure consiste nel creare una nuova risorsa stored procedure in una raccolta tramite un metodo HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="a08a2-341">Registration of a stored procedure creates a new stored procedure resource on a collection via HTTP POST.</span></span>  

    var storedProc = {
        id: "validateAndCreate",
        body: function (documentToCreate) {
            documentToCreate.id = documentToCreate.id.toUpperCase();

            var collectionManager = getContext().getCollection();
            collectionManager.createDocument(collectionManager.getSelfLink(),
                documentToCreate,
                function(err, documentCreated) {
                    if(err) throw new Error('Error while creating document: ' + err.message;
                    getContext().getResponse().setBody('success - created ' + 
                            documentCreated.name);
                });
        }
    };

    client.createStoredProcedureAsync(collection._self, storedProc)
        .then(function (createdStoredProcedure) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-stored-procedure"></a><span data-ttu-id="a08a2-342">Esecuzione di una stored procedure</span><span class="sxs-lookup"><span data-stu-id="a08a2-342">Executing a stored procedure</span></span>
<span data-ttu-id="a08a2-343">L'esecuzione di una stored procedure avviene tramite l'esecuzione di un metodo HTTP POST su una risorsa stored procedure esistente passando i parametri alla procedura nel corpo della richiesta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-343">Execution of a stored procedure is done by issuing an HTTP POST against an existing stored procedure resource by passing parameters to the procedure in the request body.</span></span>

    var inputDocument = {id : "document1", author: "G. G. Marquez"};
    client.executeStoredProcedureAsync(createdStoredProcedure.resource._self, inputDocument)
        .then(function(executionResult) {
            assert.equal(executionResult, "success - created DOCUMENT1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-stored-procedure"></a><span data-ttu-id="a08a2-344">Annullamento della registrazione di una stored procedure</span><span class="sxs-lookup"><span data-stu-id="a08a2-344">Unregistering a stored procedure</span></span>
<span data-ttu-id="a08a2-345">L'annullamento della registrazione di una stored procedure avviene tramite la semplice esecuzione di un'operazione HTTP DELETE su una risorsa stored procedure esistente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-345">Unregistering a stored procedure is simply done by issuing an HTTP DELETE against an existing stored procedure resource.</span></span>   

    client.deleteStoredProcedureAsync(createdStoredProcedure.resource._self)
        .then(function (response) {
            return;
        }, function(error) {
            console.log("Error");
        });


### <a name="registering-a-pre-trigger"></a><span data-ttu-id="a08a2-346">Registrazione di un trigger</span><span class="sxs-lookup"><span data-stu-id="a08a2-346">Registering a pre-trigger</span></span>
<span data-ttu-id="a08a2-347">La registrazione di un trigger è eseguita tramite la creazione di una nuova risorsa trigger in una raccolta tramite HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="a08a2-347">Registration of a trigger is done by creating a new trigger resource on a collection via HTTP POST.</span></span> <span data-ttu-id="a08a2-348">È possibile specificare se si tratta di un trigger di tipo pre o post e il tipo di operazione a cui può essere associato, ad esempio creazione, sostituzione, eliminazione o tutte le operazioni.</span><span class="sxs-lookup"><span data-stu-id="a08a2-348">You can specify if the trigger is a pre or a post trigger and the type of operation it can be associated with (e.g. Create, Replace, Delete, or All).</span></span>   

    var preTrigger = {
        id: "upperCaseId",
        body: function() {
                var item = getContext().getRequest().getBody();
                item.id = item.id.toUpperCase();
                getContext().getRequest().setBody(item);
        },
        triggerType: TriggerType.Pre,
        triggerOperation: TriggerOperation.All
    }

    client.createTriggerAsync(collection._self, preTrigger)
        .then(function (createdPreTrigger) {
            console.log("Successfully created trigger");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-pre-trigger"></a><span data-ttu-id="a08a2-349">Esecuzione di un trigger</span><span class="sxs-lookup"><span data-stu-id="a08a2-349">Executing a pre-trigger</span></span>
<span data-ttu-id="a08a2-350">L'esecuzione di un trigger è effettuata specificando il nome di un trigger esistente contemporaneamente all'emissione della richiesta POST/PUT/DELETE di una risorsa documento tramite l'intestazione della richiesta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-350">Execution of a trigger is done by specifying the name of an existing trigger at the time of issuing the POST/PUT/DELETE request of a document resource via the request header.</span></span>  

    client.createDocumentAsync(collection._self, { id: "doc1", key: "Love in the Time of Cholera" }, { preTriggerInclude: "upperCaseId" })
        .then(function(createdDocument) {
            assert.equal(createdDocument.resource.id, "DOC1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-pre-trigger"></a><span data-ttu-id="a08a2-351">Annullamento della registrazione di un trigger</span><span class="sxs-lookup"><span data-stu-id="a08a2-351">Unregistering a pre-trigger</span></span>
<span data-ttu-id="a08a2-352">L'annullamento della registrazione di un trigger avviene tramite la semplice esecuzione di un'operazione HTTP DELETE su una risorsa trigger esistente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-352">Unregistering a trigger is simply done via issuing an HTTP DELETE against an existing trigger resource.</span></span>  

    client.deleteTriggerAsync(createdPreTrigger._self);
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

### <a name="registering-a-udf"></a><span data-ttu-id="a08a2-353">Registrazione di una funzione UDF</span><span class="sxs-lookup"><span data-stu-id="a08a2-353">Registering a UDF</span></span>
<span data-ttu-id="a08a2-354">La registrazione di una funzione UDF è eseguita tramite la creazione di una nuova risorsa UDF in una raccolta tramite HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="a08a2-354">Registration of a UDF is done by creating a new UDF resource on a collection via HTTP POST.</span></span>  

    var udf = { 
        id: "mathSqrt",
        body: function(number) {
                return Math.sqrt(number);
        },
    };
    client.createUserDefinedFunctionAsync(collection._self, udf)
        .then(function (createdUdf) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-udf-as-part-of-the-query"></a><span data-ttu-id="a08a2-355">Esecuzione di una funzione UDF come parte della query</span><span class="sxs-lookup"><span data-stu-id="a08a2-355">Executing a UDF as part of the query</span></span>
<span data-ttu-id="a08a2-356">Una funzione definita dall'utente può essere specificata come parte della query SQL e viene usata per estendere il [linguaggio di query SQL dell'API di DocumentDB](https://msdn.microsoft.com/library/azure/dn782250.aspx) di base.</span><span class="sxs-lookup"><span data-stu-id="a08a2-356">A UDF can be specified as part of the SQL query and is used as a way to extend the core [SQL query language for the DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span></span>

    var filterQuery = "SELECT udf.mathSqrt(r.Age) AS sqrtAge FROM root r WHERE r.FirstName='John'";
    client.queryDocuments(collection._self, filterQuery).toArrayAsync();
        .then(function(queryResponse) {
            var queryResponseDocuments = queryResponse.feed;
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-udf"></a><span data-ttu-id="a08a2-357">Annullamento della registrazione di una funzione UDF</span><span class="sxs-lookup"><span data-stu-id="a08a2-357">Unregistering a UDF</span></span>
<span data-ttu-id="a08a2-358">L'annullamento della registrazione di una funzione definita dall'utente avviene tramite la semplice esecuzione di un'operazione HTTP DELETE su una risorsa di funzione definita dall'utente esistente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-358">Unregistering a UDF is simply done by issuing an HTTP DELETE against an existing UDF resource.</span></span>  

    client.deleteUserDefinedFunctionAsync(createdUdf._self)
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

<span data-ttu-id="a08a2-359">Anche se i frammenti di codice precedenti illustrano la registrazione (POST), l'annullamento della registrazione (PUT), la lettura/creazione di un elenco (GET) e l'esecuzione (POST) tramite [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), è anche possibile usare le [API REST](/rest/api/documentdb/) o altri [SDK del client](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="a08a2-359">Although the snippets above showed the registration (POST), unregistration (PUT), read/list (GET) and execution (POST) via the [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), you can also use the [REST APIs](/rest/api/documentdb/) or other [client SDKs](documentdb-sdk-dotnet.md).</span></span> 

## <a name="documents"></a><span data-ttu-id="a08a2-360">Documenti</span><span class="sxs-lookup"><span data-stu-id="a08a2-360">Documents</span></span>
<span data-ttu-id="a08a2-361">È possibile inserire, sostituire, eliminare, leggere, enumerare ed eseguire query in documenti JSON arbitrari in una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-361">You can insert, replace, delete, read, enumerate and query arbitrary JSON documents in a collection.</span></span> <span data-ttu-id="a08a2-362">Cosmos DB non rende obbligatorio alcuno schema e non richiede indici secondari per il supporto delle query sui documenti di una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-362">Cosmos DB does not mandate any schema and does not require secondary indexes in order to support querying over documents in a collection.</span></span> <span data-ttu-id="a08a2-363">Le dimensioni massime per un documento sono pari a 2 MB.</span><span class="sxs-lookup"><span data-stu-id="a08a2-363">The maximum size for a document is 2 MB.</span></span>   

<span data-ttu-id="a08a2-364">Essendo un vero e proprio servizio di database aperto, Cosmos DB non genera tipi di dati specializzati (ad esempio, data e ora) né codifiche specifiche per i documenti JSON.</span><span class="sxs-lookup"><span data-stu-id="a08a2-364">Being a truly open database service, Cosmos DB does not invent any specialized data types (e.g. date time) or specific encodings for JSON documents.</span></span> <span data-ttu-id="a08a2-365">Tenere presente che Cosmos DB non richiede alcuna convenzione JSON specifica per codificare le relazioni tra i diversi documenti. La sintassi SQL di Cosmos DB offre operatori di query avanzati gerarchici e relazionali per eseguire query e proiezioni sui documenti senza annotazioni speciali o senza dover codificare le relazioni tra i documenti usando proprietà distinte.</span><span class="sxs-lookup"><span data-stu-id="a08a2-365">Note that Cosmos DB does not require any special JSON conventions to codify the relationships among various documents; the SQL syntax of Cosmos DB provides very powerful hierarchical and relational query operators to query and project documents without any special annotations or need to codify relationships among documents using distinguished properties.</span></span>  

<span data-ttu-id="a08a2-366">Analogamente a tutte le altre risorse, i documenti possono essere creati, sostituiti, eliminati, letti, enumerati e sottoposti a query con facilità tramite le API REST o uno degli [SDK dei client](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="a08a2-366">As with all other resources, documents can be created, replaced, deleted, read, enumerated and queried easily using either REST APIs or any of the [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="a08a2-367">Se si elimina un documento, la quota corrispondente a tutti gli allegati annidati sarà resa immediatamente disponibile.</span><span class="sxs-lookup"><span data-stu-id="a08a2-367">Deleting a document instantly frees up the quota corresponding to all of the nested attachments.</span></span> <span data-ttu-id="a08a2-368">Il livello di coerenza di lettura dei documenti segue i criteri di coerenza applicati all'account di database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-368">The read consistency level of documents follows the consistency policy on the database account.</span></span> <span data-ttu-id="a08a2-369">È possibile eseguire l'override di questo criterio per le singole richieste, in base ai requisiti di coerenza dei dati specifici dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-369">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="a08a2-370">Durante l'esecuzione di query nei documenti, la coerenza di lettura si basa sulla modalità di indicizzazione impostata per la raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-370">When querying documents, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="a08a2-371">Ai fini della coerenza, si basa sui criteri di coerenza dell'account.</span><span class="sxs-lookup"><span data-stu-id="a08a2-371">For “consistent”, this follows the account’s consistency policy.</span></span> 

## <a name="attachments-and-media"></a><span data-ttu-id="a08a2-372">Allegati e file multimediali</span><span class="sxs-lookup"><span data-stu-id="a08a2-372">Attachments and media</span></span>
<span data-ttu-id="a08a2-373">Cosmos DB consente di archiviare BLOB/file multimediali binari con Cosmos DB (al massimo 2 GB per account) o nello store multimediale remoto.</span><span class="sxs-lookup"><span data-stu-id="a08a2-373">Cosmos DB allows you to store binary blobs/media either with Cosmos DB (maximum of 2 GB per account) or to your own remote media store.</span></span> <span data-ttu-id="a08a2-374">Permette anche di rappresentare i metadati dei file multimediali sotto forma di un documento speciale definito allegato.</span><span class="sxs-lookup"><span data-stu-id="a08a2-374">It also allows you to represent the metadata of a media in terms of a special document called attachment.</span></span> <span data-ttu-id="a08a2-375">Un allegato in Cosmos DB è un documento speciale (JSON) che fa riferimento a file multimediali/BLOB archiviati altrove.</span><span class="sxs-lookup"><span data-stu-id="a08a2-375">An attachment in Cosmos DB is a special (JSON) document that references the media/blob stored elsewhere.</span></span> <span data-ttu-id="a08a2-376">Un allegato è semplicemente un documento speciale che acquisisce i metadati, come percorso, autore e così via, di un file multimediale archiviato in una risorsa di archiviazione multimediale remota.</span><span class="sxs-lookup"><span data-stu-id="a08a2-376">An attachment is simply a special document that captures the metadata (e.g. location, author etc.) of a media stored in a remote media storage.</span></span> 

<span data-ttu-id="a08a2-377">Si prenda in considerazione un'applicazione di lettura di social media che usa Cosmos DB per archiviare annotazioni a penna e metadati, inclusi commenti, evidenziazioni, segnalibri, valutazioni, commenti di tipo mi piace/non mi piace e così via, associati a un e-book di un utente specifico.</span><span class="sxs-lookup"><span data-stu-id="a08a2-377">Consider a social reading application which uses Cosmos DB to store ink annotations, and metadata including comments, highlights, bookmarks, ratings, likes/dislikes etc. associated for an e-book of a given user.</span></span>   

* <span data-ttu-id="a08a2-378">Il contenuto del libro stesso è archiviato nel supporto di memorizzazione disponibile come parte dell'account di database di Cosmos DB o in uno store multimediale remoto.</span><span class="sxs-lookup"><span data-stu-id="a08a2-378">The content of the book itself is stored in the media storage either available as part of Cosmos DB database account or a remote media store.</span></span> 
* <span data-ttu-id="a08a2-379">Un'applicazione può archiviare i metadati di ogni utente come documento distinto, ad esempio i metadati di Joe per book1 saranno archiviati in un documento a cui si fa riferimento come /colls/joe/docs/book1.</span><span class="sxs-lookup"><span data-stu-id="a08a2-379">An application may store each user’s metadata as a distinct document -- e.g. Joe’s metadata for book1 is stored in a document referenced by /colls/joe/docs/book1.</span></span> 
* <span data-ttu-id="a08a2-380">Gli allegati che fanno riferimento alle pagine di contenuto di un determinato e-book di un utente sono archiviati nel documento corrispondente, ad esempio /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 e così via.</span><span class="sxs-lookup"><span data-stu-id="a08a2-380">Attachments pointing to the content pages of a given book of a user are stored under the corresponding document e.g. /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span></span> 

<span data-ttu-id="a08a2-381">Si noti che gli esempi appena riportati usano ID descrittivi per indicare la gerarchia delle risorse.</span><span class="sxs-lookup"><span data-stu-id="a08a2-381">Note that the examples listed above use friendly ids to convey the resource hierarchy.</span></span> <span data-ttu-id="a08a2-382">L'accesso alle risorse è effettuato tramite le API REST mediante ID di risorsa univoci.</span><span class="sxs-lookup"><span data-stu-id="a08a2-382">Resources are accessed via the REST APIs through unique resource ids.</span></span> 

<span data-ttu-id="a08a2-383">Nel caso dei file multimediali gestiti da Cosmos DB, la proprietà _media dell'allegato farà riferimento al file multimediale tramite l'URI.</span><span class="sxs-lookup"><span data-stu-id="a08a2-383">For the media that is managed by Cosmos DB, the _media property of the attachment will reference the media by its URI.</span></span> <span data-ttu-id="a08a2-384">Cosmos DB assicura la garbage collection del file multimediale dopo il rilascio di tutti i riferimenti in sospeso.</span><span class="sxs-lookup"><span data-stu-id="a08a2-384">Cosmos DB will ensure to garbage collect the media when all of the outstanding references are dropped.</span></span> <span data-ttu-id="a08a2-385">Cosmos DB genera automaticamente gli allegati quando si caricano nuovi file multimediali e popola la proprietà _media per poter fare riferimento ai nuovi file multimediali aggiunti.</span><span class="sxs-lookup"><span data-stu-id="a08a2-385">Cosmos DB automatically generates the attachment when you upload the new media and populates the _media to point to the newly added media.</span></span> <span data-ttu-id="a08a2-386">Se si sceglie di archiviare i file multimediali in un archivio BLOB remoto gestito personalmente, ad esempio OneDrive, Archiviazione di Azure, Dropbox e così via, sarà comunque possibile usare gli allegati per fare riferimento ai file multimediali.</span><span class="sxs-lookup"><span data-stu-id="a08a2-386">If you choose to store the media in a remote blob store managed by you (e.g. OneDrive, Azure Storage, DropBox etc), you can still use attachments to reference the media.</span></span> <span data-ttu-id="a08a2-387">In questo caso sarà necessario creare personalmente l'allegato e popolarne la proprietà _media.</span><span class="sxs-lookup"><span data-stu-id="a08a2-387">In this case, you will create the attachment yourself and populate its _media property.</span></span>   

<span data-ttu-id="a08a2-388">Analogamente a tutte le altre risorse, gli allegati possono essere creati, sostituiti, eliminati, letti o enumerati con facilità tramite le API REST o uno degli SDK dei client.</span><span class="sxs-lookup"><span data-stu-id="a08a2-388">As with all other resources, attachments can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="a08a2-389">Come per i documenti, il livello di coerenza di lettura degli allegati segue i criteri di coerenza applicati all'account di database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-389">As with documents, the read consistency level of attachments follows the consistency policy on the database account.</span></span> <span data-ttu-id="a08a2-390">È possibile eseguire l'override di questo criterio per le singole richieste, in base ai requisiti di coerenza dei dati specifici dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-390">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="a08a2-391">Durante l'esecuzione di query relative agli allegati, la coerenza di lettura si basa sulla modalità di indicizzazione impostata per la raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-391">When querying for attachments, the read consistency follows the indexing mode set on the collection.</span></span> <span data-ttu-id="a08a2-392">Ai fini della coerenza, si basa sui criteri di coerenza dell'account.</span><span class="sxs-lookup"><span data-stu-id="a08a2-392">For “consistent”, this follows the account’s consistency policy.</span></span> 
 

## <a name="users"></a><span data-ttu-id="a08a2-393">Utenti</span><span class="sxs-lookup"><span data-stu-id="a08a2-393">Users</span></span>
<span data-ttu-id="a08a2-394">Un utente di Cosmos DB rappresenta uno spazio dei nomi logico per il raggruppamento di autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="a08a2-394">A Cosmos DB user represents a logical namespace for grouping permissions.</span></span> <span data-ttu-id="a08a2-395">Un utente di Cosmos DB può corrispondere a un utente in un sistema di gestione delle identità o a un ruolo applicazione predefinito.</span><span class="sxs-lookup"><span data-stu-id="a08a2-395">A Cosmos DB user may correspond to a user in an identity management system or a predefined application role.</span></span> <span data-ttu-id="a08a2-396">In Cosmos DB un utente rappresenta semplicemente un'astrazione per raggruppare un set di autorizzazioni in un database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-396">For Cosmos DB, a user simply represents an abstraction to group a set of permissions under a database.</span></span>   

<span data-ttu-id="a08a2-397">Per l'implementazione della multi-tenancy nell'applicazione, è possibile creare utenti in Cosmos DB corrispondenti agli effettivi utenti o ai tenant dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-397">For implementing multi-tenancy in your application, you can create users in Cosmos DB which corresponds to your actual users or the tenants of your application.</span></span> <span data-ttu-id="a08a2-398">È quindi possibile creare autorizzazioni per un utente specifico, corrispondenti al controllo di accesso su diversi documenti, raccolte, allegati e così via.</span><span class="sxs-lookup"><span data-stu-id="a08a2-398">You can then create permissions for a given user that correspond to the access control over various collections, documents, attachments, etc.</span></span>   

<span data-ttu-id="a08a2-399">Poiché la scalabilità delle applicazione deve essere adeguata all'incremento degli utenti, è possibile adottare modi diversi per partizionare i dati.</span><span class="sxs-lookup"><span data-stu-id="a08a2-399">As your applications need to scale with your user growth, you can adopt various ways to shard your data.</span></span> <span data-ttu-id="a08a2-400">È possibile modellare ogni utente in modo che:</span><span class="sxs-lookup"><span data-stu-id="a08a2-400">You can model each of your users as follows:</span></span>   

* <span data-ttu-id="a08a2-401">Ogni utente venga mappato a un database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-401">Each user maps to a database.</span></span>
* <span data-ttu-id="a08a2-402">Ogni utente venga mappato a una raccolta.</span><span class="sxs-lookup"><span data-stu-id="a08a2-402">Each user maps to a collection.</span></span> 
* <span data-ttu-id="a08a2-403">I documenti corrispondenti a più utenti passino a una raccolta dedicata.</span><span class="sxs-lookup"><span data-stu-id="a08a2-403">Documents corresponding to multiple users go to a dedicated collection.</span></span> 
* <span data-ttu-id="a08a2-404">I documenti corrispondenti a più utenti passino a un set di raccolte.</span><span class="sxs-lookup"><span data-stu-id="a08a2-404">Documents corresponding to multiple users go to a set of collections.</span></span>   

<span data-ttu-id="a08a2-405">Indipendentemente dalla strategia scelta per partizionare i dati, è possibile modellare gli utenti effettivi come utenti nel database di Cosmos DB e associare autorizzazioni dettagliate a ogni utente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-405">Regardless of the specific sharding strategy you choose, you can model your actual users as users in Cosmos DB database and associate fine grained permissions to each user.</span></span>  

<span data-ttu-id="a08a2-406">![Raccolte degli utenti][3]</span><span class="sxs-lookup"><span data-stu-id="a08a2-406">![User collections][3]</span></span>  
<span data-ttu-id="a08a2-407">**Strategie di partizionamento orizzontale e modellazione degli utenti**</span><span class="sxs-lookup"><span data-stu-id="a08a2-407">**Sharding strategies and modeling users**</span></span>

<span data-ttu-id="a08a2-408">Analogamente a tutte le altre risorse, gli utenti in Cosmos DB possono essere creati, sostituiti, eliminati, letti o enumerati con facilità usando le API REST o uno degli SDK client.</span><span class="sxs-lookup"><span data-stu-id="a08a2-408">Like all other resources, users in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="a08a2-409">Cosmos DB offre sempre una coerenza assoluta per la lettura o l'esecuzione di query sui metadati di una risorsa utente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-409">Cosmos DB always provides strong consistency for reading or querying the metadata of a user resource.</span></span> <span data-ttu-id="a08a2-410">È utile segnalare che se si elimina un utente, non sarà automaticamente più possibile accedere alle autorizzazioni incluse nell'utente stesso.</span><span class="sxs-lookup"><span data-stu-id="a08a2-410">It is worth pointing out that deleting a user automatically ensures that you cannot access any of the permissions contained within it.</span></span> <span data-ttu-id="a08a2-411">Anche se Cosmos DB recupera in background la quota di autorizzazioni come parte dell'utente eliminato, le autorizzazioni eliminate saranno disponibili immediatamente per un nuovo uso.</span><span class="sxs-lookup"><span data-stu-id="a08a2-411">Even though the Cosmos DB reclaims the quota of the permissions as part of the deleted user in the background, the deleted permissions is available instantly again for you to use.</span></span>  

## <a name="permissions"></a><span data-ttu-id="a08a2-412">autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="a08a2-412">Permissions</span></span>
<span data-ttu-id="a08a2-413">Dal punto di vista del controllo di accesso, le risorse quali account di database, database, utenti e autorizzazioni sono considerate come risorse *amministrative* perché necessitano di autorizzazioni amministrative.</span><span class="sxs-lookup"><span data-stu-id="a08a2-413">From an access control perspective, resources such as database accounts, databases, users and permission are considered *administrative* resources since these require administrative permissions.</span></span> <span data-ttu-id="a08a2-414">L'ambito di risorse quali raccolte, documenti, allegati, stored procedure, trigger e funzioni UDF invece è limitato a un database specifico e queste risorse sono considerate *risorse dell'applicazione*.</span><span class="sxs-lookup"><span data-stu-id="a08a2-414">On the other hand, resources including the collections, documents, attachments, stored procedures, triggers, and UDFs are scoped under a given database and considered *application resources*.</span></span> <span data-ttu-id="a08a2-415">Il modello di autorizzazione, che corrisponde ai due tipi di risorse e ai ruoli che vi accedono, ovvero l'amministratore e l'utente, definisce due tipi di *chiavi di accesso*: *chiave master* e *chiave risorsa*.</span><span class="sxs-lookup"><span data-stu-id="a08a2-415">Corresponding to the two types of resources and the roles that access them (namely the administrator and user), the authorization model defines two types of *access keys*: *master key* and *resource key*.</span></span> <span data-ttu-id="a08a2-416">La chiave master fa parte dell'account di database ed è fornita allo sviluppatore o all'amministratore che esegue il provisioning dell'account di database.</span><span class="sxs-lookup"><span data-stu-id="a08a2-416">The master key is a part of the database account and is provided to the developer (or administrator) who is provisioning the database account.</span></span> <span data-ttu-id="a08a2-417">La chiave master usa semantica di amministratore, ovvero può essere usata per autorizzare l'accesso alle risorse amministrative e dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-417">This master key has administrator semantics, in that it can be used to authorize access to both administrative and application resources.</span></span> <span data-ttu-id="a08a2-418">La chiave di risorsa, invece, è una chiave di accesso granulare che permette l'accesso a una risorsa *specifica* dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-418">In contrast, a resource key is a granular access key that allows access to a *specific* application resource.</span></span> <span data-ttu-id="a08a2-419">Acquisisce quindi la relazione tra l'utente di un database e le autorizzazioni di cui l'utente dispone per una risorsa specifica, ad esempio una raccolta, un documento, un allegato, una stored procedure, un trigger o una funzione UDF.</span><span class="sxs-lookup"><span data-stu-id="a08a2-419">Thus, it captures the relationship between the user of a database and the permissions the user has for a specific resource (e.g. collection, document, attachment, stored procedure, trigger, or UDF).</span></span>   

<span data-ttu-id="a08a2-420">L'unico modo per ottenere una chiave di risorsa consiste nella creazione di una risorsa di autorizzazione per un utente specifico.</span><span class="sxs-lookup"><span data-stu-id="a08a2-420">The only way to obtain a resource key is by creating a permission resource under a given user.</span></span> <span data-ttu-id="a08a2-421">Si noti che per creare o recuperare un'autorizzazione è necessario presentare una chiave master nell'intestazione dell'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-421">Note that In order to create or retrieve a permission, a master key must be presented in the authorization header.</span></span> <span data-ttu-id="a08a2-422">Una risorsa di autorizzazione associa la risorsa, l'accesso e l'utente.</span><span class="sxs-lookup"><span data-stu-id="a08a2-422">A permission resource ties the resource, its access and the user.</span></span> <span data-ttu-id="a08a2-423">Dopo la creazione di una risorsa di autorizzazione, l'utente dovrà solo presentare la chiave di risorsa associata per ottenere l'accesso alla risorsa rilevante.</span><span class="sxs-lookup"><span data-stu-id="a08a2-423">After creating a permission resource, the user only needs to present the associated resource key in order to gain access to the relevant resource.</span></span> <span data-ttu-id="a08a2-424">Una chiave di risorsa può essere quindi considerata come una rappresentazione logica e compatta della risorsa di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-424">Hence, a resource key can be viewed as a logical and compact representation of the permission resource.</span></span>  

<span data-ttu-id="a08a2-425">Come per tutte le altre risorse, le autorizzazioni in Cosmos DB possono essere create, sostituite, eliminate, lette o enumerate facilmente usando le API REST o uno degli SDK client.</span><span class="sxs-lookup"><span data-stu-id="a08a2-425">As with all other resources, permissions in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of the client SDKs.</span></span> <span data-ttu-id="a08a2-426">Cosmos DB offre sempre una coerenza assoluta per la lettura o l'esecuzione di query sui metadati di un'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="a08a2-426">Cosmos DB always provides strong consistency for reading or querying the metadata of a permission.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="a08a2-427">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="a08a2-427">Next steps</span></span>
<span data-ttu-id="a08a2-428">Per altre informazioni sull'utilizzo di risorse tramite comandi HTTP, vedere [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx) (Interazioni di tipo RESTful con risorse di Cosmos DB).</span><span class="sxs-lookup"><span data-stu-id="a08a2-428">Learn more about working with resources by using HTTP commands in [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span>

[1]: media/documentdb-resources/resources1.png
[2]: media/documentdb-resources/resources2.png
[3]: media/documentdb-resources/resources3.png

