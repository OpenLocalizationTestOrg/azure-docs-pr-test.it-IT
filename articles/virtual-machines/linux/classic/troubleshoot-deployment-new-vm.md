---
title: aaaTroubleshoot distribuzione classica VM Linux | Documenti Microsoft
description: Risolvere i problemi della distribuzione classica quando si crea una nuova macchina virtuale Linux in Azure
services: virtual-machines-linux
documentationcenter: 
author: JiangChen79
manager: felixwu
editor: 
tags: top-support-issue
ms.assetid: c8a963fa-6b2a-4c7a-a1f4-7793adb02b19
ms.service: virtual-machines-linux
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: cjiang
ms.openlocfilehash: a642bfd9a543cd6d2104b03fe04193d9352ccae1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-classic-deployment-issues-with-creating-a-new-linux-virtual-machine-in-azure"></a><span data-ttu-id="026f8-103">Risolvere i problemi della distribuzione classica con la creazione di una nuova macchina virtuale Linux in Azure</span><span class="sxs-lookup"><span data-stu-id="026f8-103">Troubleshoot classic deployment issues with creating a new Linux virtual machine in Azure</span></span>
[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-selectors](../../../../includes/virtual-machines-linux-troubleshoot-deployment-new-vm-selectors-include.md)]

[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-opening](../../../../includes/virtual-machines-troubleshoot-deployment-new-vm-opening-include.md)]

> [!IMPORTANT] 
> <span data-ttu-id="026f8-104">Azure offre due diversi modelli di distribuzione per creare e usare le risorse: [Gestione risorse e la distribuzione classica](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="026f8-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="026f8-105">In questo articolo viene illustrato l'utilizzo del modello di distribuzione classica hello.</span><span class="sxs-lookup"><span data-stu-id="026f8-105">This article covers using hello Classic deployment model.</span></span> <span data-ttu-id="026f8-106">Si consiglia di utilizzano il modello di gestione risorse hello più nuove distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="026f8-106">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="026f8-107">Per la versione di hello Gestione risorse di questo articolo, vedere [qui](../troubleshoot-deployment-new-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="026f8-107">For hello Resource Manager version of this article, see [here](../troubleshoot-deployment-new-vm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

[!INCLUDE [support-disclaimer](../../../../includes/support-disclaimer.md)]

## <a name="collect-audit-logs"></a><span data-ttu-id="026f8-108">Raccogliere log di controllo</span><span class="sxs-lookup"><span data-stu-id="026f8-108">Collect audit logs</span></span>
<span data-ttu-id="026f8-109">toostart risoluzione dei problemi, controllo hello collect registra errore hello tooidentify associata hello problema.</span><span class="sxs-lookup"><span data-stu-id="026f8-109">toostart troubleshooting, collect hello audit logs tooidentify hello error associated with hello issue.</span></span>

<span data-ttu-id="026f8-110">Nel portale di Azure hello, fare clic su **Sfoglia** > **macchine virtuali** > *la macchina virtuale Windows*  >   **Impostazioni** > **log di controllo**.</span><span class="sxs-lookup"><span data-stu-id="026f8-110">In hello Azure portal, click **Browse** > **Virtual machines** > *your Windows virtual machine* > **Settings** > **Audit logs**.</span></span>

[!INCLUDE [virtual-machines-troubleshoot-deployment-new-vm-issue1](../../../../includes/virtual-machines-troubleshoot-deployment-new-vm-issue1-include.md)]

[!INCLUDE [virtual-machines-linux-troubleshoot-deployment-new-vm-table](../../../../includes/virtual-machines-linux-troubleshoot-deployment-new-vm-table.md)]

<span data-ttu-id="026f8-111">**Y:** se hello del sistema operativo è generalizzato, Linux e viene caricato e/o acquisito con impostazione hello generalizzato, quindi non essere presenti gli eventuali errori.</span><span class="sxs-lookup"><span data-stu-id="026f8-111">**Y:** If hello OS is Linux generalized, and it is uploaded and/or captured with hello generalized setting, then there won’t be any errors.</span></span> <span data-ttu-id="026f8-112">Analogamente, se hello del sistema operativo Linux specializzato, viene caricato e/o acquisito con hello specializzati impostazione, quindi non essere presenti gli eventuali errori.</span><span class="sxs-lookup"><span data-stu-id="026f8-112">Similarly, if hello OS is Linux specialized, and it is uploaded and/or captured with hello specialized setting, then there won’t be any errors.</span></span>

<span data-ttu-id="026f8-113">**Errori di caricamento:**</span><span class="sxs-lookup"><span data-stu-id="026f8-113">**Upload Errors:**</span></span>

<span data-ttu-id="026f8-114">**N<sup>1</sup>:** se hello del sistema operativo Linux generalizzato e questo viene caricato come specializzato, verrà generato un errore di timeout del provisioning poiché hello VM è bloccato in fase di provisioning hello.</span><span class="sxs-lookup"><span data-stu-id="026f8-114">**N<sup>1</sup>:** If hello OS is Linux generalized, and it is uploaded as specialized, you will get a provisioning timeout error because hello VM is stuck at hello provisioning stage.</span></span>

<span data-ttu-id="026f8-115">**N<sup>2</sup>:** se hello del sistema operativo Linux specializzati e che è stato caricato come generalizzato, si otterrà un errore di provisioning perché hello nuova macchina virtuale è in esecuzione con il nome del computer originale di hello, username e password.</span><span class="sxs-lookup"><span data-stu-id="026f8-115">**N<sup>2</sup>:** If hello OS is Linux specialized, and it is uploaded as generalized, you will get a provisioning failure error because hello new VM is running with hello original computer name, username and password.</span></span>

<span data-ttu-id="026f8-116">**Risoluzione:**</span><span class="sxs-lookup"><span data-stu-id="026f8-116">**Resolution:**</span></span>

<span data-ttu-id="026f8-117">caricare entrambi questi errori, tooresolve hello VHD originale, disponibili in locale, con hello stessa impostazione come che per hello del sistema operativo (generalizzata o specializzata).</span><span class="sxs-lookup"><span data-stu-id="026f8-117">tooresolve both these errors, upload hello original VHD, available on-prem, with hello same setting as that for hello OS (generalized/specialized).</span></span> <span data-ttu-id="026f8-118">tooupload come generalizzato, ricordare toorun-eseguire innanzitutto il deprovisioning.</span><span class="sxs-lookup"><span data-stu-id="026f8-118">tooupload as generalized, remember toorun -deprovision first.</span></span> <span data-ttu-id="026f8-119">Vedere [creare e caricare un disco rigido virtuale che hello contiene il sistema operativo Linux](create-upload-vhd.md) per ulteriori informazioni.</span><span class="sxs-lookup"><span data-stu-id="026f8-119">See [Create and Upload a Virtual Hard Disk that Contains hello Linux Operating System](create-upload-vhd.md) for more information.</span></span>

<span data-ttu-id="026f8-120">**Errori di acquisizione:**</span><span class="sxs-lookup"><span data-stu-id="026f8-120">**Capture Errors:**</span></span>

<span data-ttu-id="026f8-121">**N<sup>3</sup>:** se hello del sistema operativo Linux generalizzato e che viene acquisito come specializzato, verrà generato un errore di timeout del provisioning poiché hello originale VM non è utilizzabile in quanto è contrassegnato come generalizzato.</span><span class="sxs-lookup"><span data-stu-id="026f8-121">**N<sup>3</sup>:** If hello OS is Linux generalized, and it is captured as specialized, you will get a provisioning timeout error because hello original VM is not usable as it is marked as generalized.</span></span>

<span data-ttu-id="026f8-122">**N<sup>4</sup>:** se hello del sistema operativo Linux specializzati e che viene acquisito come generalizzato, si otterrà un errore di provisioning perché hello nuova macchina virtuale è in esecuzione con il nome del computer originale di hello, username e password.</span><span class="sxs-lookup"><span data-stu-id="026f8-122">**N<sup>4</sup>:** If hello OS is Linux specialized, and it is captured as generalized, you will get a provisioning failure error because hello new VM is running with hello original computer name, username and password.</span></span> <span data-ttu-id="026f8-123">Inoltre, hello originale VM non è utilizzabile perché è contrassegnato come specializzate.</span><span class="sxs-lookup"><span data-stu-id="026f8-123">Also, hello original VM is not usable because it is marked as specialized.</span></span>

<span data-ttu-id="026f8-124">**Risoluzione:**</span><span class="sxs-lookup"><span data-stu-id="026f8-124">**Resolution:**</span></span>

<span data-ttu-id="026f8-125">tooresolve entrambi questi errori, eliminare l'immagine corrente hello dal portale hello e [nuovamente acquisita da hello dischi rigidi virtuali correnti](capture-image.md) con hello stessa impostazione di quello per hello del sistema operativo (generalizzata o specializzata).</span><span class="sxs-lookup"><span data-stu-id="026f8-125">tooresolve both these errors, delete hello current image from hello portal, and [recapture it from hello current VHDs](capture-image.md) with hello same setting as that for hello OS (generalized/specialized).</span></span>

## <a name="issue-custom-gallery-marketplace-image-allocation-failure"></a><span data-ttu-id="026f8-126">Problema: Immagine personalizzata/della raccolta/del marketplace - errore di allocazione</span><span class="sxs-lookup"><span data-stu-id="026f8-126">Issue: Custom/ gallery/ marketplace image; allocation failure</span></span>
<span data-ttu-id="026f8-127">Questo errore si verifica nelle situazioni hello nuova VM inviata tooa cluster che non è richiesta hello tooaccommodate di spazio libero disponibile, o non è in grado di supportare dimensioni della macchina virtuale hello richiesta.</span><span class="sxs-lookup"><span data-stu-id="026f8-127">This error arises in situations when hello new VM request is sent tooa cluster that either does not have available free space tooaccommodate hello request, or cannot support hello VM size being requested.</span></span> <span data-ttu-id="026f8-128">Non è possibile toomix diverse serie di macchine virtuali in hello stesso servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="026f8-128">It is not possible toomix different series of VMs in hello same cloud service.</span></span> <span data-ttu-id="026f8-129">Pertanto, se si desidera toocreate una nuova macchina virtuale di dimensioni diverse rispetto a ciò che può supportare il servizio cloud, hello calcolo richiesta avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="026f8-129">So if you want toocreate a new VM of a different size than what your cloud service can support, hello compute request will fail.</span></span>

<span data-ttu-id="026f8-130">In base ai vincoli del servizio cloud hello hello è utilizzare toocreate hello nuova macchina virtuale, potrebbe verificarsi un errore causato da uno dei due situazioni.</span><span class="sxs-lookup"><span data-stu-id="026f8-130">Depending on hello constraints of hello cloud service you use toocreate hello new VM, you might encounter an error caused by one of two situations.</span></span>

<span data-ttu-id="026f8-131">**Causa 1:** servizio cloud hello è cluster specifico tooa bloccato o è il gruppo di affinità collegati tooan e pertanto bloccata tooa cluster specifico in base alla progettazione.</span><span class="sxs-lookup"><span data-stu-id="026f8-131">**Cause 1:** hello cloud service is pinned tooa specific cluster, or it is linked tooan affinity group, and hence pinned tooa specific cluster by design.</span></span> <span data-ttu-id="026f8-132">In modo da richieste di nuove risorse di calcolo in quel gruppo di affinità vengono tentati in hello stesso cluster ospitate risorse esistenti hello.</span><span class="sxs-lookup"><span data-stu-id="026f8-132">So new compute resource requests in that affinity group are tried in hello same cluster where hello existing resources are hosted.</span></span> <span data-ttu-id="026f8-133">Tuttavia, hello dello stesso cluster potrebbe non hello supporto richiesto dimensioni delle macchine Virtuali o dispone di sufficiente spazio disponibile, causando un errore di allocazione.</span><span class="sxs-lookup"><span data-stu-id="026f8-133">However, hello same cluster may either not support hello requested VM size or have insufficient available space, resulting in an allocation error.</span></span> <span data-ttu-id="026f8-134">È true se le nuove risorse hello vengono create tramite un nuovo servizio cloud o un servizio cloud esistente.</span><span class="sxs-lookup"><span data-stu-id="026f8-134">This is true whether hello new resources are created through a new cloud service or through an existing cloud service.</span></span>

<span data-ttu-id="026f8-135">**Risoluzione 1:**</span><span class="sxs-lookup"><span data-stu-id="026f8-135">**Resolution 1:**</span></span>

* <span data-ttu-id="026f8-136">Creare un nuovo servizio cloud e associarlo a un'area o una rete virtuale basata sull'area.</span><span class="sxs-lookup"><span data-stu-id="026f8-136">Create a new cloud service and associate it with either a region or a region-based virtual network.</span></span>
* <span data-ttu-id="026f8-137">Creare una nuova macchina virtuale nel nuovo servizio cloud di hello.</span><span class="sxs-lookup"><span data-stu-id="026f8-137">Create a new VM in hello new cloud service.</span></span>
  <span data-ttu-id="026f8-138">Se si verifica un errore durante il tentativo di toocreate un nuovo servizio cloud, riprovare in un secondo momento o modificare hello area per il servizio cloud hello.</span><span class="sxs-lookup"><span data-stu-id="026f8-138">If you get an error when trying toocreate a new cloud service, either retry at a later time or change hello region for hello cloud service.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="026f8-139">Se si sta tentando di toocreate una nuova macchina virtuale in un servizio cloud esistente ma non è stato e stato toocreate un nuovo servizio cloud per la nuova macchina virtuale, è possibile scegliere tooconsolidate tutte le macchine virtuali in hello stesso servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="026f8-139">If you were trying toocreate a new VM in an existing cloud service but couldn’t, and had toocreate a new cloud service for your new VM, you can choose tooconsolidate all your VMs in hello same cloud service.</span></span> <span data-ttu-id="026f8-140">toodo in tal caso, eliminare le macchine virtuali hello nel servizio cloud esistente hello e li riacquisire dei dischi nel nuovo servizio cloud di hello.</span><span class="sxs-lookup"><span data-stu-id="026f8-140">toodo so, delete hello VMs in hello existing cloud service, and recapture them from their disks in hello new cloud service.</span></span> <span data-ttu-id="026f8-141">Tuttavia, è importante tooremember che nuovo servizio cloud di hello avrà un nuovo nome e l'indirizzo VIP, pertanto sarà necessario tooupdate per tutte le dipendenze di hello che attualmente utilizzano queste informazioni per il servizio cloud esistente hello.</span><span class="sxs-lookup"><span data-stu-id="026f8-141">However, it is important tooremember that hello new cloud service will have a new name and VIP, so you will need tooupdate these for all hello dependencies that currently use this information for hello existing cloud service.</span></span>
> 
> 

<span data-ttu-id="026f8-142">**Causa 2:** servizio cloud hello è associata a una rete virtuale è collegato tooan gruppo di affinità, pertanto è bloccato tooa cluster specifico in base alla progettazione.</span><span class="sxs-lookup"><span data-stu-id="026f8-142">**Cause 2:** hello cloud service is associated with a virtual network that is linked tooan affinity group, so it is pinned tooa specific cluster by design.</span></span> <span data-ttu-id="026f8-143">Tutte le nuove richieste di risorse di calcolo in tale gruppo di affinità vengono pertanto tentate in hello stesso cluster ospitate risorse esistenti hello.</span><span class="sxs-lookup"><span data-stu-id="026f8-143">All new compute resource requests in that affinity group are therefore tried in hello same cluster where hello existing resources are hosted.</span></span> <span data-ttu-id="026f8-144">Tuttavia, hello dello stesso cluster potrebbe non hello supporto richiesto dimensioni delle macchine Virtuali o dispone di sufficiente spazio disponibile, causando un errore di allocazione.</span><span class="sxs-lookup"><span data-stu-id="026f8-144">However, hello same cluster may either not support hello requested VM size or have insufficient available space, resulting in an allocation error.</span></span> <span data-ttu-id="026f8-145">È true se le nuove risorse hello vengono create tramite un nuovo servizio cloud o un servizio cloud esistente.</span><span class="sxs-lookup"><span data-stu-id="026f8-145">This is true whether hello new resources are created through a new cloud service or through an existing cloud service.</span></span>

<span data-ttu-id="026f8-146">**Risoluzione 2:**</span><span class="sxs-lookup"><span data-stu-id="026f8-146">**Resolution 2:**</span></span>

* <span data-ttu-id="026f8-147">Crea una nuova rete virtuale a livello di area</span><span class="sxs-lookup"><span data-stu-id="026f8-147">Create a new regional virtual network.</span></span>
* <span data-ttu-id="026f8-148">Crea nuova macchina virtuale in una nuova rete virtuale hello hello.</span><span class="sxs-lookup"><span data-stu-id="026f8-148">Create hello new VM in hello new virtual network.</span></span>
* <span data-ttu-id="026f8-149">[Connettere la rete virtuale esistente](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/) toohello nuova rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="026f8-149">[Connect your existing virtual network](https://azure.microsoft.com/blog/vnet-to-vnet-connecting-virtual-networks-in-azure-across-different-regions/) toohello new virtual network.</span></span> <span data-ttu-id="026f8-150">Altre informazioni sulle [reti virtuali a livello di area](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/).</span><span class="sxs-lookup"><span data-stu-id="026f8-150">See more about [regional virtual networks](https://azure.microsoft.com/blog/2014/05/14/regional-virtual-networks/).</span></span> <span data-ttu-id="026f8-151">In alternativa, è possibile [eseguire la migrazione della rete virtuale regionale rete virtuale basato su gruppo di affinità tooa](https://azure.microsoft.com/blog/2014/11/26/migrating-existing-services-to-regional-scope/)e quindi creare hello nuova macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="026f8-151">Alternatively, you can [migrate your affinity-group-based virtual network tooa regional virtual network](https://azure.microsoft.com/blog/2014/11/26/migrating-existing-services-to-regional-scope/), and then create hello new VM.</span></span>

## <a name="next-steps"></a><span data-ttu-id="026f8-152">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="026f8-152">Next steps</span></span>
<span data-ttu-id="026f8-153">Se si incontrano problemi quando si avvia una VM Linux arrestata o si ridimensiona una VM Linux esistente in Azure, vedere [Risolvere i problemi della distribuzione classica con il riavvio e il ridimensionamento di una macchina virtuale Linux esistente in Azure](restart-resize-error-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="026f8-153">If you encounter issues when you start a stopped Linux VM or resize an existing Linux VM in Azure, see [Troubleshoot classic deployment issues with restarting or resizing an existing Linux Virtual Machine in Azure](restart-resize-error-troubleshooting.md).</span></span>

