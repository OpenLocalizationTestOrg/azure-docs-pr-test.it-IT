---
title: Gestione traffico di Azure - Domande frequenti | Documentazione Microsoft
description: Questo articolo risponde ad alcune domande frequenti su Gestione traffico
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: 75d5ff9a-f4b9-4b05-af32-700e7bdfea5a
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/15/2017
ms.author: kumud
ms.openlocfilehash: 44762864e0a5adf568fcd4928b48661196f05b9e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="traffic-manager-frequently-asked-questions-faq"></a><span data-ttu-id="69b6e-103">Domande frequenti (FAQ) su Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="69b6e-103">Traffic Manager Frequently Asked Questions (FAQ)</span></span>

## <a name="traffic-manager-basics"></a><span data-ttu-id="69b6e-104">Fondamenti di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="69b6e-104">Traffic Manager basics</span></span>

### <a name="what-ip-address-does-traffic-manager-use"></a><span data-ttu-id="69b6e-105">Quale indirizzo IP viene usato da Gestione traffico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-105">What IP address does Traffic Manager use?</span></span>

<span data-ttu-id="69b6e-106">Come spiegato nella sezione [Modalità di funzionamento di Gestione traffico](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Gestione traffico funziona a livello di DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-106">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="69b6e-107">Invia le risposte DNS per indirizzare i client all'endpoint di servizio appropriato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-107">It sends DNS responses to direct clients to the appropriate service endpoint.</span></span> <span data-ttu-id="69b6e-108">I client si connettono quindi all'endpoint di servizio in modo diretto, senza passare per Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-108">Clients then connect to the service endpoint directly, not through Traffic Manager.</span></span>

<span data-ttu-id="69b6e-109">Gestione traffico non prevede quindi un endpoint o indirizzo IP per la connessione dei client.</span><span class="sxs-lookup"><span data-stu-id="69b6e-109">Therefore, Traffic Manager does not provide an endpoint or IP address for clients to connect to.</span></span> <span data-ttu-id="69b6e-110">Pertanto, se si vuole un indirizzo IP statico, per il servizio, questo deve essere configurato nel servizio, non in Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-110">Therefore, if you want static IP address for your service, that must be configured at the service, not in Traffic Manager.</span></span>

### <a name="does-traffic-manager-support-sticky-sessions"></a><span data-ttu-id="69b6e-111">Gestione traffico supporta sessioni "permanenti"?</span><span class="sxs-lookup"><span data-stu-id="69b6e-111">Does Traffic Manager support 'sticky' sessions?</span></span>

<span data-ttu-id="69b6e-112">Come spiegato nella sezione [Modalità di funzionamento di Gestione traffico](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Gestione traffico funziona a livello di DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-112">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="69b6e-113">Usa le risposte DNS per indirizzare i client all'endpoint di servizio appropriato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-113">It uses DNS responses to direct clients to the appropriate service endpoint.</span></span> <span data-ttu-id="69b6e-114">I client si connettono all'endpoint di servizio in modo diretto, senza passare per Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-114">Clients connect to the service endpoint directly, not through Traffic Manager.</span></span> <span data-ttu-id="69b6e-115">Gestione traffico non visualizza quindi il traffico HTTP tra il client e il server.</span><span class="sxs-lookup"><span data-stu-id="69b6e-115">Therefore, Traffic Manager does not see the HTTP traffic between the client and the server.</span></span>

<span data-ttu-id="69b6e-116">Inoltre l'indirizzo IP di origine della query DNS ricevuta da Gestione traffico appartiene al servizio DNS ricorsivo e non al client.</span><span class="sxs-lookup"><span data-stu-id="69b6e-116">Additionally, the source IP address of the DNS query received by Traffic Manager belongs to the recursive DNS service, not the client.</span></span> <span data-ttu-id="69b6e-117">Il servizio Gestione traffico non può quindi tracciare client singoli e non può implementare sessioni "permanenti".</span><span class="sxs-lookup"><span data-stu-id="69b6e-117">Therefore, Traffic Manager has no way to track individual clients and cannot implement 'sticky' sessions.</span></span> <span data-ttu-id="69b6e-118">Questa limitazione è comune a tutti i sistemi di gestione del traffico basati su DNS e non è specifica di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-118">This limitation is common to all DNS-based traffic management systems and is not specific to Traffic Manager.</span></span>

### <a name="why-am-i-seeing-an-http-error-when-using-traffic-manager"></a><span data-ttu-id="69b6e-119">Quando si usa Gestione traffico, viene visualizzato un errore HTTP. Perché?</span><span class="sxs-lookup"><span data-stu-id="69b6e-119">Why am I seeing an HTTP error when using Traffic Manager?</span></span>

<span data-ttu-id="69b6e-120">Come spiegato nella sezione [Modalità di funzionamento di Gestione traffico](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Gestione traffico funziona a livello di DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-120">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="69b6e-121">Usa le risposte DNS per indirizzare i client all'endpoint di servizio appropriato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-121">It uses DNS responses to direct clients to the appropriate service endpoint.</span></span> <span data-ttu-id="69b6e-122">I client si connettono quindi all'endpoint di servizio in modo diretto, senza passare per Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-122">Clients then connect to the service endpoint directly, not through Traffic Manager.</span></span> <span data-ttu-id="69b6e-123">Gestione traffico non vede il traffico HTTP tra client e server.</span><span class="sxs-lookup"><span data-stu-id="69b6e-123">Traffic Manager does not see HTTP traffic between client and server.</span></span> <span data-ttu-id="69b6e-124">Ogni errore HTTP visualizzato proviene quindi dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-124">Therefore, any HTTP error you see must be coming from your application.</span></span> <span data-ttu-id="69b6e-125">Per la connessione del client all'applicazione, è necessario che siano stati completati tutti i passaggi di risoluzione DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-125">For the client to connect to the application, all DNS resolution steps are complete.</span></span> <span data-ttu-id="69b6e-126">È inclusa qualsiasi interazione di Gestione traffico con il flusso del traffico dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-126">That includes any interaction that Traffic Manager has on the application traffic flow.</span></span>

<span data-ttu-id="69b6e-127">Eventuali verifiche più approfondite dovranno quindi concentrarsi sull'applicazione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-127">Further investigation should therefore focus on the application.</span></span>

<span data-ttu-id="69b6e-128">L'intestazione host HTTP inviata dal browser del client è l'origine dei problemi più comune.</span><span class="sxs-lookup"><span data-stu-id="69b6e-128">The HTTP host header sent from the client's browser is the most common source of problems.</span></span> <span data-ttu-id="69b6e-129">Assicurarsi che l'applicazione sia configurata per accettare l'intestazione host corretta per il nome di dominio in uso.</span><span class="sxs-lookup"><span data-stu-id="69b6e-129">Make sure that the application is configured to accept the correct host header for the domain name you are using.</span></span> <span data-ttu-id="69b6e-130">Per gli endpoint che usano il Servizio app di Azure, vedere [Configurazione di un nome di dominio personalizzato per un'app Web nel servizio app di Azure con Gestione traffico](../app-service-web/web-sites-traffic-manager-custom-domain-name.md).</span><span class="sxs-lookup"><span data-stu-id="69b6e-130">For endpoints using the Azure App Service, see [configuring a custom domain name for a web app in Azure App Service using Traffic Manager](../app-service-web/web-sites-traffic-manager-custom-domain-name.md).</span></span>

### <a name="what-is-the-performance-impact-of-using-traffic-manager"></a><span data-ttu-id="69b6e-131">Qual è l'impatto sulle prestazioni dell'uso di Gestione traffico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-131">What is the performance impact of using Traffic Manager?</span></span>

<span data-ttu-id="69b6e-132">Come spiegato nella sezione [Modalità di funzionamento di Gestione traffico](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Gestione traffico funziona a livello di DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-132">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="69b6e-133">Dal momento che i client si connettono direttamente agli endpoint di servizio, dopo che è stata stabilita la connessione non si verifica alcun impatto sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="69b6e-133">Since clients connect to your service endpoints directly, there is no performance impact incurred when using Traffic Manager once the connection is established.</span></span>

<span data-ttu-id="69b6e-134">Poiché Gestione traffico si integra con le applicazioni a livello di DNS, richiede l'inserimento di una ricerca DNS aggiuntiva nella catena di risoluzione DN.</span><span class="sxs-lookup"><span data-stu-id="69b6e-134">Since Traffic Manager integrates with applications at the DNS level, it does require an additional DNS lookup to be inserted into the DNS resolution chain.</span></span> <span data-ttu-id="69b6e-135">L'impatto di Gestione traffico sul tempo di risoluzione DNS è minimo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-135">The impact of Traffic Manager on DNS resolution time is minimal.</span></span> <span data-ttu-id="69b6e-136">Gestione traffico usa una rete globale di server dei nomi e reti [Anycast](https://en.wikipedia.org/wiki/Anycast) per garantire che le query DNS vengano sempre indirizzate al server dei nomi più vicino disponibile.</span><span class="sxs-lookup"><span data-stu-id="69b6e-136">Traffic Manager uses a global network of name servers, and uses [anycast](https://en.wikipedia.org/wiki/Anycast) networking to ensure DNS queries are always routed to the closest available name server.</span></span> <span data-ttu-id="69b6e-137">Inoltre, la memorizzazione nella cache delle risposte DNS significa che la latenza DNS aggiuntiva associata all'uso di Gestione traffico si applica solo a una frazione di sessioni.</span><span class="sxs-lookup"><span data-stu-id="69b6e-137">In addition, caching of DNS responses means that the additional DNS latency incurred by using Traffic Manager applies only to a fraction of sessions.</span></span>

<span data-ttu-id="69b6e-138">Il metodo Prestazioni instrada il traffico all'endpoint disponibile più vicino.</span><span class="sxs-lookup"><span data-stu-id="69b6e-138">The Performance method routes traffic to the closest available endpoint.</span></span> <span data-ttu-id="69b6e-139">Il risultato della rete è che l'impatto sulle prestazioni complessive associate a questo metodo dovrebbe essere minimo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-139">The net result is that the overall performance impact associated with this method should be minimal.</span></span> <span data-ttu-id="69b6e-140">Un aumento della latenza DNS deve essere compensato da minore latenza di rete all'endpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-140">Any increase in DNS latency should be offset by lower network latency to the endpoint.</span></span>

### <a name="what-application-protocols-can-i-use-with-traffic-manager"></a><span data-ttu-id="69b6e-141">Quali protocolli di applicazione possono essere usati con Gestione traffico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-141">What application protocols can I use with Traffic Manager?</span></span>

<span data-ttu-id="69b6e-142">Come spiegato nella sezione [Modalità di funzionamento di Gestione traffico](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Gestione traffico funziona a livello di DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-142">As explained in [How Traffic Manager Works](../traffic-manager/traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager works at the DNS level.</span></span> <span data-ttu-id="69b6e-143">Dopo il completamento della ricerca DNS, i client si connettono all'endpoint dell'applicazione direttamente, non tramite Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-143">Once the DNS lookup is complete, clients connect to the application endpoint directly, not through Traffic Manager.</span></span> <span data-ttu-id="69b6e-144">La connessione può pertanto usare qualsiasi protocollo dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-144">Therefore, the connection can use any application protocol.</span></span> <span data-ttu-id="69b6e-145">Se come protocollo di monitoraggio si seleziona TCP, i controlli dell'integrità dell'endpoint eseguiti da Gestione traffico non richiedono l'uso dei protocolli dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-145">If you select TCP as the monitoring protocol, Traffic Manager's endpoint health monitoring can be done without using any application protocols.</span></span> <span data-ttu-id="69b6e-146">Se si sceglie di verificare l'integrità usando un protocollo dell'applicazione, l'endpoint deve poter rispondere alle richieste HTTP o HTTPS GET.</span><span class="sxs-lookup"><span data-stu-id="69b6e-146">If you choose to have the health verified using an application protocol, the endpoint needs to be able to respond to either HTTP or HTTPS GET requests.</span></span>

### <a name="can-i-use-traffic-manager-with-a-naked-domain-name"></a><span data-ttu-id="69b6e-147">È possibile usare Gestione traffico con un nome di dominio di tipo "naked" (senza www)?</span><span class="sxs-lookup"><span data-stu-id="69b6e-147">Can I use Traffic Manager with a 'naked' domain name?</span></span>

<span data-ttu-id="69b6e-148">No.</span><span class="sxs-lookup"><span data-stu-id="69b6e-148">No.</span></span> <span data-ttu-id="69b6e-149">Gli standard DNS non consentono la coesistenza tra record CNAME e altri record DNS dello stesso nome.</span><span class="sxs-lookup"><span data-stu-id="69b6e-149">The DNS standards do not permit CNAMEs to co-exist with other DNS records of the same name.</span></span> <span data-ttu-id="69b6e-150">Il vertice o la radice di una zona DNS contiene sempre due record DNS preesistenti: il record SOA e quello del server dei nomi autorevole.</span><span class="sxs-lookup"><span data-stu-id="69b6e-150">The apex (or root) of a DNS zone always contains two pre-existing DNS records; the SOA and the authoritative NS records.</span></span> <span data-ttu-id="69b6e-151">Non è quindi possibile creare un record CNAME al vertice della zona senza violare gli standard DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-151">This means a CNAME record cannot be created at the zone apex without violating the DNS standards.</span></span>

<span data-ttu-id="69b6e-152">Gestione traffico richiede un record CNAME DNS per eseguire il mapping del nome DNS personalizzato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-152">Traffic Manager requires a DNS CNAME record to map the vanity DNS name.</span></span> <span data-ttu-id="69b6e-153">Ad esempio, eseguire il mapping di www.contoso.com al nome DNS del profilo di Gestione traffico contoso.trafficmanager.net.</span><span class="sxs-lookup"><span data-stu-id="69b6e-153">For example, you map www.contoso.com to the Traffic Manager profile DNS name contoso.trafficmanager.net.</span></span> <span data-ttu-id="69b6e-154">Inoltre, il profilo di Gestione traffico restituisce un secondo record DNS CNAME per indicare l'endpoint a cui il client dovrebbe collegarsi.</span><span class="sxs-lookup"><span data-stu-id="69b6e-154">Additionally, the Traffic Manager profile returns a second DNS CNAME to indicate which endpoint the client should connect to.</span></span>

<span data-ttu-id="69b6e-155">Per risolvere questo problema, è consigliabile usare un reindirizzamento HTTP per indirizzare il traffico dal nome di dominio naked a un URL differente, che può quindi usare Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-155">To work around this issue, we recommend using an HTTP redirect to direct traffic from the naked domain name to a different URL, which can then use Traffic Manager.</span></span> <span data-ttu-id="69b6e-156">Ad esempio, il dominio naked "contoso.com" può reindirizzare gli utenti al dominio "www.contoso.com" CNAME, che punta al nome DNS di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-156">For example, the naked domain 'contoso.com' can redirect users to the CNAME 'www.contoso.com' that points to the Traffic Manager DNS name.</span></span>

<span data-ttu-id="69b6e-157">Il supporto completo per i domini naked in Gestione traffico è riportato nel backlog delle funzionalità.</span><span class="sxs-lookup"><span data-stu-id="69b6e-157">Full support for naked domains in Traffic Manager is tracked in our feature backlog.</span></span> <span data-ttu-id="69b6e-158">È possibile registrare il supporto per questa funzionalità [votandolo sul sito dei commenti della community](https://feedback.azure.com/forums/217313-networking/suggestions/5485350-support-apex-naked-domains-more-seamlessly).</span><span class="sxs-lookup"><span data-stu-id="69b6e-158">You can register your support for this feature request by [voting for it on our community feedback site](https://feedback.azure.com/forums/217313-networking/suggestions/5485350-support-apex-naked-domains-more-seamlessly).</span></span>

### <a name="does-traffic-manager-consider-the-client-subnet-address-when-handling-dns-queries"></a><span data-ttu-id="69b6e-159">Gestione traffico tiene conto dell'indirizzo della subnet client quando si gestiscono query DNS?</span><span class="sxs-lookup"><span data-stu-id="69b6e-159">Does Traffic Manager consider the client subnet address when handling DNS queries?</span></span> 
<span data-ttu-id="69b6e-160">No, attualmente Gestione traffico tiene conto solo dell'indirizzo IP di origine della query DNS che riceve, che in genere è l'indirizzo IP del resolver DNS, durante l'esecuzione di ricerche dei metodi di routing Geografico e Prestazioni.</span><span class="sxs-lookup"><span data-stu-id="69b6e-160">No, currently Traffic Manager considers only the source IP address of the DNS query it receives, which usually is the IP address of the DNS resolver, when performing lookups for Geographic and Performance routing methods.</span></span>  
<span data-ttu-id="69b6e-161">In particolare, in [RFC7871 – Client Subnet in DNS Queries](https://tools.ietf.org/html/rfc7871) (RFC7871 – Subnet client nelle query DNS), che indica un [meccanismo di estensione per DNS (EDNS0)](https://tools.ietf.org/html/rfc2671) che può trasferire l'indirizzo della subnet client dai resolver che lo supportano ai server DNS, non è attualmente supportata in Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-161">Specifically, [RFC 7871 – Client Subnet in DNS Queries](https://tools.ietf.org/html/rfc7871) that provides an [Extension Mechanism for DNS (EDNS0)](https://tools.ietf.org/html/rfc2671) which can pass on the client subnet address from resolvers that support it to DNS servers is currently not supported in Traffic Manager.</span></span> <span data-ttu-id="69b6e-162">È possibile registrare il supporto per la richiesta di questa funzionalità sul [sito di commenti e suggerimenti della community](https://feedback.azure.com/forums/217313-networking).</span><span class="sxs-lookup"><span data-stu-id="69b6e-162">You can register your support for this feature request through our [community feedback site](https://feedback.azure.com/forums/217313-networking).</span></span>


### <a name="what-is-dns-ttl-and-how-does-it-impact-my-users"></a><span data-ttu-id="69b6e-163">Cos'è la durata TTL del DNS e che impatto ha sugli utenti?</span><span class="sxs-lookup"><span data-stu-id="69b6e-163">What is DNS TTL and how does it impact my users?</span></span>

<span data-ttu-id="69b6e-164">Quando una query DNS viene ricevuta da Gestione traffico, nella risposta viene impostato un valore chiamato Durata (TTL).</span><span class="sxs-lookup"><span data-stu-id="69b6e-164">When a DNS query lands on Traffic Manager, it sets a value in the response called time-to-live (TTL).</span></span> <span data-ttu-id="69b6e-165">Questo valore, espresso in secondi, indica ai resolver DNS a valle il tempo di memorizzazione della risposta nella cache.</span><span class="sxs-lookup"><span data-stu-id="69b6e-165">This value, whose unit is in seconds, indicates to DNS resolvers downstream on how long to cache this response.</span></span> <span data-ttu-id="69b6e-166">Sebbene ciò non garantisca che i resolver memorizzino il risultato nella cache, la memorizzazione consente loro di rispondere a ogni successiva query usando la cache, invece di inoltrare la query ai server DNS di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-166">While DNS resolvers are not guaranteed to cache this result, caching it enables them to respond to any subsequent queries off the cache instead of going to Traffic Manager DNS servers.</span></span> <span data-ttu-id="69b6e-167">Di seguito è illustrato l'impatto sulle risposte:</span><span class="sxs-lookup"><span data-stu-id="69b6e-167">This impacts the responses as follows:</span></span>
- <span data-ttu-id="69b6e-168">Una durata TTL maggiore riduce il numero di query che raggiunge i server DNS di Gestione traffico; ciò contribuisce a ridurre i costi per il cliente, poiché il numero di query gestite incide sulla fatturazione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-168">a higher TTL reduces the number of queries that land on the Traffic Manager DNS servers, which can reduce the cost for a customer since number of queries served is a billable usage.</span></span>
- <span data-ttu-id="69b6e-169">Una durata TTL maggiore può potenzialmente ridurre il tempo necessario per eseguire una ricerca DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-169">a higher TTL can potentially reduce the time it takes to do a DNS lookup.</span></span>
- <span data-ttu-id="69b6e-170">Una durata TTL maggiore implica anche che i dati possono non riflettere le informazioni di integrità più recenti ottenute da Gestione traffico tramite gli agenti che eseguono il sondaggio.</span><span class="sxs-lookup"><span data-stu-id="69b6e-170">a higher TTL also means that your data does not reflect the latest health information that Traffic Manager has obtained through its probing agents.</span></span>

### <a name="how-high-or-low-can-i-set-the-ttl-for-traffic-manager-responses"></a><span data-ttu-id="69b6e-171">Come impostare una durata TTL maggiore o minore per le risposte di Gestione traffico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-171">How high or low can I set the TTL for Traffic Manager responses?</span></span>

<span data-ttu-id="69b6e-172">A livello di singolo profilo, è possibile impostare una durata TTL del DNS minima di 0 secondi e massima di 2.147.483.647 secondi, ovvero l'intervallo massimo conforme a [RFC-1035](https://www.ietf.org/rfc/rfc1035.txt ).</span><span class="sxs-lookup"><span data-stu-id="69b6e-172">You can set, at a per profile level, the DNS TTL to be as low as 0 seconds and as high as 2,147,483,647 seconds (the maximum range compliant with [RFC-1035](https://www.ietf.org/rfc/rfc1035.txt )).</span></span> <span data-ttu-id="69b6e-173">Una durata TTL pari a 0 indica che i resolver DNS a valle non memorizzano nella cache le risposte alle query; tutte le query vengono ricevute dai server DNS di Gestione traffico per essere risolte.</span><span class="sxs-lookup"><span data-stu-id="69b6e-173">A TTL of 0 means that downstream DNS resolvers do not cache query responses and all queries are expected to reach the Traffic Manager DNS servers for resolution.</span></span>

## <a name="traffic-manager-geographic-traffic-routing-method"></a><span data-ttu-id="69b6e-174">Metodi geografico di routing del traffico di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="69b6e-174">Traffic Manager Geographic traffic routing method</span></span>

### <a name="what-are-some-use-cases-where-geographic-routing-is-useful"></a><span data-ttu-id="69b6e-175">Quali sono alcuni casi di uso in cui il routing geografico è utile?</span><span class="sxs-lookup"><span data-stu-id="69b6e-175">What are some use cases where geographic routing is useful?</span></span> 
<span data-ttu-id="69b6e-176">Il tipo di routing Geografico può essere usato in qualsiasi scenario in cui un cliente di Azure abbia bisogno di distinguere gli utenti in base alle aree geografiche.</span><span class="sxs-lookup"><span data-stu-id="69b6e-176">Geographic routing type can be used in any scenario where an Azure customer needs to distinguish their users based on geographic regions.</span></span> <span data-ttu-id="69b6e-177">Ad esempio, tramite il metodo di routing del traffico Geografico è possibile offrire agli utenti di una determinata area un'esperienza utente diversa rispetto a quelli di altre aree.</span><span class="sxs-lookup"><span data-stu-id="69b6e-177">For example, using the Geographic traffic routing method, you can give users from specific regions a different user experience than those from other regions.</span></span> <span data-ttu-id="69b6e-178">Un altro esempio è la necessità di garantire la conformità con requisiti dei dati locali che richiedono di servire gli utenti di una determinata area solo con gli endpoint di tale area.</span><span class="sxs-lookup"><span data-stu-id="69b6e-178">Another example is complying with local data sovereignty mandates that require that users from a specific region be served only by endpoints in that region.</span></span>

### <a name="what-are-the-regions-that-are-supported-by-traffic-manager-for-geographic-routing"></a><span data-ttu-id="69b6e-179">Quali sono le aree supportate da Gestione traffico per il routing geografico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-179">What are the regions that are supported by Traffic Manager for geographic routing?</span></span> 
<span data-ttu-id="69b6e-180">La gerarchia di paese/area geografica utilizzata da Gestione traffico è reperibile [qui](traffic-manager-geographic-regions.md).</span><span class="sxs-lookup"><span data-stu-id="69b6e-180">The country/region hierarchy that is used by Traffic Manager can be found [here](traffic-manager-geographic-regions.md).</span></span> <span data-ttu-id="69b6e-181">La pagina viene aggiornata con ogni modifica apportata, ma è possibile recuperare le stesse informazioni anche a livello programmatico usando l'[API REST di Gestione traffico di Azure](https://docs.microsoft.com/rest/api/trafficmanager/).</span><span class="sxs-lookup"><span data-stu-id="69b6e-181">While this page is kept up-to-date with any changes, you can also programmatically retrieve the same information by using the [Azure Traffic Manager REST API](https://docs.microsoft.com/rest/api/trafficmanager/).</span></span> 

### <a name="how-does-traffic-manager-determine-where-a-user-is-querying-from"></a><span data-ttu-id="69b6e-182">In che modo Gestione traffico determina da dove un utente sta eseguendo una query?</span><span class="sxs-lookup"><span data-stu-id="69b6e-182">How does traffic manager determine where a user is querying from?</span></span> 
<span data-ttu-id="69b6e-183">Gestione traffico esamina l'indirizzo IP di origine della query (probabilmente un sistema di risoluzione DNS locale che esegue la query per conto dell'utente) e usa un indirizzo IP interno per eseguire il mapping delle aree al fine di determinare la posizione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-183">Traffic Manager looks at the source IP of the query (this most likely is a local DNS resolver doing the querying on behalf of the user) and uses an internal IP to region map to determine the location.</span></span> <span data-ttu-id="69b6e-184">Questa mappa viene aggiornata regolarmente per tenere conto delle modifiche di Internet.</span><span class="sxs-lookup"><span data-stu-id="69b6e-184">This map is updated on an ongoing basis to account for changes in the internet.</span></span> 

### <a name="is-it-guaranteed-that-traffic-manager-can-correctly-determine-the-exact-geographic-location-of-the-user-in-every-case"></a><span data-ttu-id="69b6e-185">È garantito che in ogni caso Gestione traffico determini correttamente l'esatta posizione geografica dell'utente?</span><span class="sxs-lookup"><span data-stu-id="69b6e-185">Is it guaranteed that Traffic Manager can correctly determine the exact geographic location of the user in every case?</span></span>
<span data-ttu-id="69b6e-186">No, Gestione traffico non può garantire che l'area geografica che si deduce dall'indirizzo IP di origine di una query DNS corrisponda sempre alla posizione dell'utente, per i motivi seguenti:</span><span class="sxs-lookup"><span data-stu-id="69b6e-186">No, Traffic Manager cannot guarantee that the geographic region we infer from the source IP address of a DNS query will always correspond to the user’s location due to the following reasons:</span></span> 

- <span data-ttu-id="69b6e-187">In primo luogo, come indicato nella domanda precedente, l'indirizzo IP di origine visualizzato è quello di un resolver DNS che esegue la ricerca per conto dell'utente.</span><span class="sxs-lookup"><span data-stu-id="69b6e-187">First, as described in the previous FAQ, the source IP address we see is that of a DNS resolver doing the lookup on behalf of the user.</span></span> <span data-ttu-id="69b6e-188">La posizione geografica del resolver DNS è un proxy valido per la posizione geografica dell'utente ma può anche essere diversa, a seconda della superficie del servizio resolver DNS e dello specifico servizio resolver DNS che un cliente sceglie di usare.</span><span class="sxs-lookup"><span data-stu-id="69b6e-188">While the geographic location of the DNS resolver is a good proxy for the geographic location of the user, it can also be different depending upon the footprint of the DNS resolver service and the specific DNS resolver service a customer has chosen to use.</span></span> <span data-ttu-id="69b6e-189">Ad esempio, un cliente che si trova in Malaysia può specificare nelle impostazioni del dispositivo l'uso di un servizio resolver DNS il cui server DNS a Singapore potrebbe essere scelto per gestire le risoluzioni di query per l'utente o il dispositivo specifico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-189">As an example, a customer located in Malaysia could specify in their device’s settings use a DNS resolver service whose DNS server in Singapore might get picked to handle the query resolutions for that user/device.</span></span> <span data-ttu-id="69b6e-190">In questo caso, Gestione traffico può visualizzare solo l'indirizzo IP del resolver corrispondente alla località Singapore.</span><span class="sxs-lookup"><span data-stu-id="69b6e-190">In that case, Traffic Manager can only see the resolver’s IP address that corresponds to the Singapore location.</span></span> <span data-ttu-id="69b6e-191">Vedere anche le domande frequenti precedenti, disponibili in questa pagina, relative al supporto dell'indirizzo della subnet client.</span><span class="sxs-lookup"><span data-stu-id="69b6e-191">Also, see the earlier FAQ regarding client subnet address support on this page.</span></span>

- <span data-ttu-id="69b6e-192">In secondo luogo, Gestione traffico usa una mappa interna per tradurre l'indirizzo IP nell'area geografica.</span><span class="sxs-lookup"><span data-stu-id="69b6e-192">Second, Traffic Manager uses an internal map to do the IP address to geographic region translation.</span></span> <span data-ttu-id="69b6e-193">Anche se questa mappa viene convalidata e aggiornata in modo continuativo per aumentarne la precisione e tenere conto della natura in costante evoluzione di Internet, è comunque possibile che le informazioni contenute non rappresentino esattamente la posizione geografica di tutti gli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="69b6e-193">While this map is validated and updated on an ongoing basis to increase its accuracy and account for the evolving nature of the internet, there is still the possibility that our information is not an exact representation of the geographic location of all the IP addresses.</span></span>


###  <a name="does-an-endpoint-need-to-be-physically-located-in-the-same-region-as-the-one-it-is-configured-with-for-geographic-routing"></a><span data-ttu-id="69b6e-194">Un endpoint deve trovarsi fisicamente nella stessa area di quello con cui è configurato per il routing geografico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-194">Does an endpoint need to be physically located in the same region as the one it is configured with for geographic routing?</span></span> 
<span data-ttu-id="69b6e-195">No, il percorso dell'endpoint non impone alcuna restrizione in merito alle aree a cui può essere mappato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-195">No, the location of the endpoint imposes no restrictions on which regions can be mapped to it.</span></span> <span data-ttu-id="69b6e-196">Ad esempio è possibile che tutti gli utenti dell'India siano indirizzati a un endpoint dell'area Stati Uniti centrali di Azure.</span><span class="sxs-lookup"><span data-stu-id="69b6e-196">For example, an endpoint in US-Central Azure region can have all users from India directed to it.</span></span>

### <a name="can-i-assign-geographic-regions-to-endpoints-in-a-profile-that-is-not-configured-to-do-geographic-routing"></a><span data-ttu-id="69b6e-197">È possibile assegnare aree geografiche agli endpoint in un profilo che non è configurato per eseguire il routing geografico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-197">Can I assign geographic regions to endpoints in a profile that is not configured to do geographic routing?</span></span> 

<span data-ttu-id="69b6e-198">Sì, se il metodo di routing di un profilo non è Geografico è possibile usare l'[API REST di Gestione traffico di Azure](https://docs.microsoft.com/rest/api/trafficmanager/) per assegnare aree geografiche agli endpoint del profilo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-198">Yes, if the routing method of a profile is not geographic, you can use the [Azure Traffic Manager REST API](https://docs.microsoft.com/rest/api/trafficmanager/) to assign geographic regions to endpoints in that profile.</span></span> <span data-ttu-id="69b6e-199">Nel caso di profili con un tipo di routing non geografico, questa configurazione viene ignorata.</span><span class="sxs-lookup"><span data-stu-id="69b6e-199">In the case of non-geographic routing type profiles, this configuration is ignored.</span></span> <span data-ttu-id="69b6e-200">Se si cambia un profilo di questo tipo nel tipo a routing geografico in un secondo momento, Gestione traffico userà quei mapping.</span><span class="sxs-lookup"><span data-stu-id="69b6e-200">If you change such a profile to geographic routing type at a later time, Traffic Manager can use those mappings.</span></span>


### <a name="why-am-i-getting-an-error-when-i-try-to-change-the-routing-method-of-an-existing-profile-to-geographic"></a><span data-ttu-id="69b6e-201">Perché si riceve un errore quando si tenta di cambiare il metodo di routing di un profilo esistente in geografico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-201">Why am I getting an error when I try to change the routing method of an existing profile to Geographic?</span></span>

<span data-ttu-id="69b6e-202">Deve esserci almeno un'area mappata per tutti gli endpoint in un profilo con routing geografico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-202">All the endpoints under a profile with geographic routing need to have at least one region mapped to it.</span></span> <span data-ttu-id="69b6e-203">Per convertire un profilo esistente al tipo di routing geografico è innanzitutto necessario associare aree geografiche a tutti gli endpoint tramite l'[API REST di Gestione traffico di Azure](https://docs.microsoft.com/rest/api/trafficmanager/) prima di cambiare il tipo di routing in geografico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-203">To convert an existing profile to geographic routing type, you first need to associate geographic regions to all its endpoints using the [Azure Traffic Manager REST API](https://docs.microsoft.com/rest/api/trafficmanager/) before changing the routing type to geographic.</span></span> <span data-ttu-id="69b6e-204">Se si usa il portale, eliminare innanzitutto gli endpoint, cambiare il metodo di routing del profilo in geografico e quindi aggiungere gli endpoint con i relativi mapping di area geografica.</span><span class="sxs-lookup"><span data-stu-id="69b6e-204">If using portal, first delete the endpoints, change the routing method of the profile to geographic and then add the endpoints along with their geographic region mapping.</span></span> 


###  <a name="why-is-it-strongly-recommended-that-customers-create-nested-profiles-instead-of-endpoints-under-a-profile-with-geographic-routing-enabled"></a><span data-ttu-id="69b6e-205">Perché è decisamente consigliato che i clienti creino profili nidificati anziché endpoint in un profilo con il routing geografico abilitato?</span><span class="sxs-lookup"><span data-stu-id="69b6e-205">Why is it strongly recommended that customers create nested profiles instead of endpoints under a profile with geographic routing enabled?</span></span> 

<span data-ttu-id="69b6e-206">Un'area può essere assegnata a un solo endpoint all'interno di un profilo se usa il tipo di routing geografico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-206">A region can be assigned to only one endpoint within a profile if its using geographic routing type.</span></span> <span data-ttu-id="69b6e-207">Se tale endpoint non è un tipo annidato con un profilo figlio collegato, nel caso l'endpoint perdesse l'integrità, Gestione traffico continuerà a inviare traffico a esso in quanto l'alternativa di non inviare alcun traffico non è migliore.</span><span class="sxs-lookup"><span data-stu-id="69b6e-207">If that endpoint is not a nested type with a child profile attached to it, if that endpoint going unhealthy, Traffic Manager continues to send traffic to it since the alternative of not sending any traffic isn’t any better.</span></span> <span data-ttu-id="69b6e-208">Gestione traffico non esegue il failover su un altro endpoint, anche quando l'area assegnata è "padre" dell'area assegnata all'endpoint danneggiato. Ad esempio, se un endpoint che include l'area Spagna perde la sua integrità, non si eseguirà il failover su un altro endpoint con assegnata l'area Europa.</span><span class="sxs-lookup"><span data-stu-id="69b6e-208">Traffic Manager does not failover to another endpoint, even when the region assigned is a “parent” of the region assigned to the endpoint that went unhealthy (for example, if an endpoint that has region Spain goes unhealthy, we will not failover to another endpoint that has the region Europe assigned to it).</span></span> <span data-ttu-id="69b6e-209">Lo scopo di tutto questo è garantire che Gestione traffico rispetti i confini geografici che un cliente ha stabilito nel proprio profilo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-209">This is done to ensure that Traffic Manager respects the geographic boundaries that a customer has setup in their profile.</span></span> <span data-ttu-id="69b6e-210">Per ottenere il vantaggio del failover su un altro endpoint quando un endpoint perde la sua integrità, è consigliabile assegnare le aree geografiche a profili annidati con più endpoint all'interno invece di singoli endpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-210">To get the benefit of failing over to another endpoint when an endpoint goes unhealthy, it is recommended that geographic regions be assigned to nested profiles with multiple endpoints within it instead of individual endpoints.</span></span> <span data-ttu-id="69b6e-211">In questo modo se un endpoint nel profilo figlio annidato non funziona, il traffico può eseguire il failover su un altro endpoint all'interno dello stesso profilo figlio annidato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-211">In this way, if an endpoint in the nested child profile fails, traffic can failover to another endpoint inside the same nested child profile.</span></span>

### <a name="are-there-any-restrictions-on-the-api-version-that-supports-this-routing-type"></a><span data-ttu-id="69b6e-212">Ci sono restrizioni sulla versione API che supporta questo tipo di routing?</span><span class="sxs-lookup"><span data-stu-id="69b6e-212">Are there any restrictions on the API version that supports this routing type?</span></span>

<span data-ttu-id="69b6e-213">Sì, solo l'API versione 2017-03-01 e versioni successive supportano il routing di tipo geografico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-213">Yes, only API version 2017-03-01 and newer supports the Geographic routing type.</span></span> <span data-ttu-id="69b6e-214">Le versioni precedenti dell'API non possono essere usate per creare profili con routing di tipo Geografico o assegnare aree geografiche agli endpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-214">Any older API versions cannot be used to created profiles of Geographic routing type or assign geographic regions to endpoints.</span></span> <span data-ttu-id="69b6e-215">Se viene usata una versione precedente dell'API per recuperare i profili da una sottoscrizione di Azure, non vengono restituiti profili con routing di tipo Geografico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-215">If an older API version is used to retrieve profiles from an Azure subscription, any profile of Geographic routing type is not returned.</span></span> <span data-ttu-id="69b6e-216">Inoltre, quando si usano versioni precedenti dell'API, tutti i profili restituiti che hanno endpoint con un'area geografica assegnata non mostreranno l'area geografica assegnata.</span><span class="sxs-lookup"><span data-stu-id="69b6e-216">In addition, when using older API versions, any profile returned that has endpoints with a geographic region assignment, does not have its geographic region assignment shown.</span></span>



## <a name="traffic-manager-endpoints"></a><span data-ttu-id="69b6e-217">Endpoint di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="69b6e-217">Traffic Manager endpoints</span></span>

### <a name="can-i-use-traffic-manager-with-endpoints-from-multiple-subscriptions"></a><span data-ttu-id="69b6e-218">È possibile usare Gestione traffico con endpoint di più sottoscrizioni?</span><span class="sxs-lookup"><span data-stu-id="69b6e-218">Can I use Traffic Manager with endpoints from multiple subscriptions?</span></span>

<span data-ttu-id="69b6e-219">L'uso di endpoint di più sottoscrizioni non è possibile con app Web di Azure.</span><span class="sxs-lookup"><span data-stu-id="69b6e-219">Using endpoints from multiple subscriptions is not possible with Azure Web Apps.</span></span> <span data-ttu-id="69b6e-220">Per le app Web di Azure è necessario che ogni nome di dominio personalizzato usato con app Web venga usato solo all'interno di una singola sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-220">Azure Web Apps requires that any custom domain name used with Web Apps is only used within a single subscription.</span></span> <span data-ttu-id="69b6e-221">Non è possibile usare app Web da più sottoscrizioni con lo stesso nome di dominio.</span><span class="sxs-lookup"><span data-stu-id="69b6e-221">It is not possible to use Web Apps from multiple subscriptions with the same domain name.</span></span>

<span data-ttu-id="69b6e-222">Per altri tipi di endpoint, è possibile utilizzare Gestione traffico con gli endpoint da più di una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-222">For other endpoint types, it is possible to use Traffic Manager with endpoints from more than one subscription.</span></span> <span data-ttu-id="69b6e-223">In Resource Manager è possibile aggiungere endpoint di qualsiasi sottoscrizione a Gestione traffico, purché la persona che configura il profilo di Gestione traffico abbia accesso in lettura all'endpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-223">In Resource Manager, endpoints from any subscription can be added to Traffic Manager, as long as the person configuring the Traffic Manager profile has read access to the endpoint.</span></span> <span data-ttu-id="69b6e-224">Queste autorizzazioni possono essere concesse tramite il [controllo di accesso in base al ruolo di Azure Resource Manager](../active-directory/role-based-access-control-configure.md).</span><span class="sxs-lookup"><span data-stu-id="69b6e-224">These permissions can be granted using [Azure Resource Manager role-based access control (RBAC)](../active-directory/role-based-access-control-configure.md).</span></span>


### <a name="can-i-use-traffic-manager-with-cloud-service-staging-slots"></a><span data-ttu-id="69b6e-225">È possibile usare Gestione traffico con slot di "staging" del servizio cloud?</span><span class="sxs-lookup"><span data-stu-id="69b6e-225">Can I use Traffic Manager with Cloud Service 'Staging' slots?</span></span>

<span data-ttu-id="69b6e-226">Sì.</span><span class="sxs-lookup"><span data-stu-id="69b6e-226">Yes.</span></span> <span data-ttu-id="69b6e-227">Gli slot di "staging" del servizio cloud possono essere configurati come endpoint esterni in Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-227">Cloud Service 'staging' slots can be configured in Traffic Manager as External endpoints.</span></span> <span data-ttu-id="69b6e-228">I controlli di integrità vengono fatturati in base alla tariffa degli endpoint di Azure.</span><span class="sxs-lookup"><span data-stu-id="69b6e-228">Health checks are still be charged at the Azure Endpoints rate.</span></span> <span data-ttu-id="69b6e-229">Dato che viene usato il tipo di endpoint esterno, le modifiche al servizio sottostante non vengono rilevate automaticamente.</span><span class="sxs-lookup"><span data-stu-id="69b6e-229">Because the External endpoint type is in use, changes to the underlying service are not picked up automatically.</span></span> <span data-ttu-id="69b6e-230">Se si usano endpoint esterni, Gestione traffico non è in grado di rilevare l'eventuale arresto o eliminazione del servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="69b6e-230">With external endpoints, Traffic Manager cannot detect when the Cloud Service is stopped or deleted.</span></span> <span data-ttu-id="69b6e-231">Di conseguenza, Gestione traffico continua a fatturare i controlli di integrità fino a quando l'endpoint non viene disabilitato o eliminato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-231">Therefore, the Traffic Manager continues billing for health checks until the endpoint is disabled or deleted.</span></span>

### <a name="does-traffic-manager-support-ipv6-endpoints"></a><span data-ttu-id="69b6e-232">Gestione traffico supporta endpoint IPv6?</span><span class="sxs-lookup"><span data-stu-id="69b6e-232">Does Traffic Manager support IPv6 endpoints?</span></span>

<span data-ttu-id="69b6e-233">Attualmente Gestione traffico non fornisce server dei nomi indirizzabili tramite IPv6.</span><span class="sxs-lookup"><span data-stu-id="69b6e-233">Traffic Manager does not currently provide IPv6-addressible name servers.</span></span> <span data-ttu-id="69b6e-234">Può comunque essere usato da client IPv6 che si connettono a endpoint IPv6.</span><span class="sxs-lookup"><span data-stu-id="69b6e-234">However, Traffic Manager can still be used by IPv6 clients connecting to IPv6 endpoints.</span></span> <span data-ttu-id="69b6e-235">Un client non invia richieste DNS direttamente a Gestione traffico,</span><span class="sxs-lookup"><span data-stu-id="69b6e-235">A client does not make DNS requests directly to Traffic Manager.</span></span> <span data-ttu-id="69b6e-236">ma usa un servizio DNS ricorsivo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-236">Instead, the client uses a recursive DNS service.</span></span> <span data-ttu-id="69b6e-237">Un client solo IPv6 invia richieste al servizio DNS ricorsivo tramite IPv6.</span><span class="sxs-lookup"><span data-stu-id="69b6e-237">An IPv6-only client sends requests to the recursive DNS service via IPv6.</span></span> <span data-ttu-id="69b6e-238">Il servizio ricorsivo può quindi contattare i server dei nomi di Gestione traffico tramite IPv4.</span><span class="sxs-lookup"><span data-stu-id="69b6e-238">Then the recursive service should be able to contact the Traffic Manager name servers using IPv4.</span></span>

<span data-ttu-id="69b6e-239">Gestione traffico risponde con il nome DNS dell'endpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-239">Traffic Manager responds with the DNS name of the endpoint.</span></span> <span data-ttu-id="69b6e-240">Per supportare un endpoint IPv6, è necessaria la presenza di un record AAAA DNS che punti il nome DNS dell'endpoint all'indirizzo IPv6.</span><span class="sxs-lookup"><span data-stu-id="69b6e-240">To support an IPv6 endpoint, a DNS AAAA record pointing the endpoint DNS name to the IPv6 address must exist.</span></span> <span data-ttu-id="69b6e-241">I controlli di integrità di Gestione traffico supportano soltanto gli indirizzi IPv4.</span><span class="sxs-lookup"><span data-stu-id="69b6e-241">Traffic Manager health checks only support IPv4 addresses.</span></span> <span data-ttu-id="69b6e-242">Il servizio deve esporre un endpoint IPv4 sullo stesso nome DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-242">The service needs to expose an IPv4 endpoint on the same DNS name.</span></span>

### <a name="can-i-use-traffic-manager-with-more-than-one-web-app-in-the-same-region"></a><span data-ttu-id="69b6e-243">È possibile usare Gestione traffico con più app Web nella stessa area?</span><span class="sxs-lookup"><span data-stu-id="69b6e-243">Can I use Traffic Manager with more than one Web App in the same region?</span></span>

<span data-ttu-id="69b6e-244">In genere, Gestione traffico viene usato per indirizzare il traffico ad applicazioni distribuite in aree diverse.</span><span class="sxs-lookup"><span data-stu-id="69b6e-244">Typically, Traffic Manager is used to direct traffic to applications deployed in different regions.</span></span> <span data-ttu-id="69b6e-245">Tuttavia, può anche essere usato in un'applicazione che abbia più distribuzioni nella stessa area.</span><span class="sxs-lookup"><span data-stu-id="69b6e-245">However, it can also be used where an application has more than one deployment in the same region.</span></span> <span data-ttu-id="69b6e-246">Gli endpoint di Azure di Gestione traffico non permettono l'aggiunta di più endpoint di app Web della stessa area di Azure allo stesso profilo di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-246">The Traffic Manager Azure endpoints do not permit more than one Web App endpoint from the same Azure region to be added to the same Traffic Manager profile.</span></span>

##  <a name="traffic-manager-endpoint-monitoring"></a><span data-ttu-id="69b6e-247">Monitoraggio degli endpoint di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="69b6e-247">Traffic Manager endpoint monitoring</span></span>

### <a name="is-traffic-manager-resilient-to-azure-region-failures"></a><span data-ttu-id="69b6e-248">Gestione traffico è resiliente rispetto agli errori di area di Azure?</span><span class="sxs-lookup"><span data-stu-id="69b6e-248">Is Traffic Manager resilient to Azure region failures?</span></span>

<span data-ttu-id="69b6e-249">Gestione traffico è un componente fondamentale del recapito di applicazioni a disponibilità elevata in Azure.</span><span class="sxs-lookup"><span data-stu-id="69b6e-249">Traffic Manager is a key component of the delivery of highly available applications in Azure.</span></span>
<span data-ttu-id="69b6e-250">Per assicurare una disponibilità elevata, Gestione traffico deve garantire un livello estremamente elevato di disponibilità, nonché la resilienza rispetto agli errori di area.</span><span class="sxs-lookup"><span data-stu-id="69b6e-250">To deliver high availability, Traffic Manager must have an exceptionally high level of availability and be resilient to regional failure.</span></span>

<span data-ttu-id="69b6e-251">Per impostazione predefinita, i componenti di Gestione traffico resistono sono resilienti agli errori di qualsiasi area di Azure a livello globale.</span><span class="sxs-lookup"><span data-stu-id="69b6e-251">By design, Traffic Manager components are resilient to a complete failure of any Azure region.</span></span> <span data-ttu-id="69b6e-252">Questa resilienza si applica a tutti i componenti di Gestione traffico: server dei nomi DNS, API, livello di archiviazione e servizio di monitoraggio degli endpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-252">This resilience applies to all Traffic Manager components: the DNS name servers, the API, the storage layer, and the endpoint monitoring service.</span></span>

<span data-ttu-id="69b6e-253">Nel caso improbabile in cui si verifichi l'interruzione di un'intera area di Azure, Gestione traffico deve continuare a funzionare normalmente.</span><span class="sxs-lookup"><span data-stu-id="69b6e-253">In the unlikely event of an outage of an entire Azure region, Traffic Manager is expected to continue to function normally.</span></span> <span data-ttu-id="69b6e-254">Per le applicazioni distribuite in più aree di Azure Gestione traffico consente di indirizzare il traffico alle istanze disponibili delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="69b6e-254">Applications deployed in multiple Azure regions can rely on Traffic Manager to direct traffic to an available instance of their application.</span></span>

### <a name="how-does-the-choice-of-resource-group-location-affect-traffic-manager"></a><span data-ttu-id="69b6e-255">In che modo la scelta della posizione del gruppo di risorse si ripercuote su Gestione traffico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-255">How does the choice of resource group location affect Traffic Manager?</span></span>

<span data-ttu-id="69b6e-256">Gestione traffico è un singolo servizio globale.</span><span class="sxs-lookup"><span data-stu-id="69b6e-256">Traffic Manager is a single, global service.</span></span> <span data-ttu-id="69b6e-257">Non è a livello di area.</span><span class="sxs-lookup"><span data-stu-id="69b6e-257">It is not regional.</span></span> <span data-ttu-id="69b6e-258">La scelta della posizione del gruppo di risorse non è rilevante per i profili di Gestione traffico distribuiti in quel gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="69b6e-258">The choice of resource group location makes no difference to Traffic Manager profiles deployed in that resource group.</span></span>

<span data-ttu-id="69b6e-259">Azure Resource Manager richiede che tutti i gruppi di risorse specifichino una posizione che determina il percorso predefinito delle risorse distribuite nel gruppo di risorse in questione.</span><span class="sxs-lookup"><span data-stu-id="69b6e-259">Azure Resource Manager requires all resource groups to specify a location, which determines the default location for resources deployed in that resource group.</span></span> <span data-ttu-id="69b6e-260">Quando si crea un profilo di Gestione traffico, viene creato in un gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="69b6e-260">When you create a Traffic Manager profile, it is created in a resource group.</span></span> <span data-ttu-id="69b6e-261">Tutti i profili di Gestione traffico usano **globale** come posizione, ignorando l'impostazione predefinita del gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="69b6e-261">All Traffic Manager profiles use **global** as their location, overriding the resource group default.</span></span>

### <a name="how-do-i-determine-the-current-health-of-each-endpoint"></a><span data-ttu-id="69b6e-262">Come si determina lo stato di integrità corrente di ogni endpoint?</span><span class="sxs-lookup"><span data-stu-id="69b6e-262">How do I determine the current health of each endpoint?</span></span>

<span data-ttu-id="69b6e-263">Lo stato di monitoraggio corrente di ogni endpoint viene visualizzato nel portale di Azure, insieme al profilo complessivo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-263">The current monitoring status of each endpoint, in addition to the overall profile, is displayed in the Azure portal.</span></span> <span data-ttu-id="69b6e-264">Queste informazioni sono anche disponibili con l'[API REST](https://msdn.microsoft.com/library/azure/mt163667.aspx) di Gestione traffico, i [cmdlet PowerShell](https://msdn.microsoft.com/library/mt125941.aspx) e l'[interfaccia della riga di comando multipiattaforma di Azure](../cli-install-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="69b6e-264">This information also is available via the Traffic Monitor [REST API](https://msdn.microsoft.com/library/azure/mt163667.aspx), [PowerShell cmdlets](https://msdn.microsoft.com/library/mt125941.aspx), and [cross-platform Azure CLI](../cli-install-nodejs.md).</span></span>

<span data-ttu-id="69b6e-265">In Azure non vengono visualizzate informazioni cronologiche sull'integrità precedente degli endpoint e non è possibile generare avvisi sulle modifiche dell'integrità degli endpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-265">Azure does not provide historical information about past endpoint health or the ability to raise alerts about changes to endpoint health.</span></span>

### <a name="can-i-monitor-https-endpoints"></a><span data-ttu-id="69b6e-266">È possibile monitorare gli endpoint HTTPS?</span><span class="sxs-lookup"><span data-stu-id="69b6e-266">Can I monitor HTTPS endpoints?</span></span>

<span data-ttu-id="69b6e-267">Sì.</span><span class="sxs-lookup"><span data-stu-id="69b6e-267">Yes.</span></span> <span data-ttu-id="69b6e-268">Gestione traffico supporta il probing su HTTPS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-268">Traffic Manager supports probing over HTTPS.</span></span> <span data-ttu-id="69b6e-269">Definire **HTTPS** come protocollo nella configurazione del monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="69b6e-269">Configure **HTTPS** as the protocol in the monitoring configuration.</span></span>

<span data-ttu-id="69b6e-270">Gestione traffico non prevede alcuna convalida di certificati, tra cui:</span><span class="sxs-lookup"><span data-stu-id="69b6e-270">Traffic manager cannot provide any certificate validation, including:</span></span>

* <span data-ttu-id="69b6e-271">I certificati sul lato server non vengono convalidati</span><span class="sxs-lookup"><span data-stu-id="69b6e-271">Server-side certificates are not validated</span></span>
* <span data-ttu-id="69b6e-272">I certificati SNI sul lato server non sono supportati</span><span class="sxs-lookup"><span data-stu-id="69b6e-272">SNI server-side certificates are not supported</span></span>
* <span data-ttu-id="69b6e-273">I certificati client non sono supportati</span><span class="sxs-lookup"><span data-stu-id="69b6e-273">Client certificates are not supported</span></span>

### <a name="can-i-use-traffic-manager-even-if-my-application-does-not-have-support-for-http-or-https"></a><span data-ttu-id="69b6e-274">È possibile usare Gestione traffico anche se l'applicazione non supporta HTTP o HTTPS?</span><span class="sxs-lookup"><span data-stu-id="69b6e-274">Can I use Traffic Manager even if my application does not have support for HTTP or HTTPS?</span></span>

<span data-ttu-id="69b6e-275">Sì.</span><span class="sxs-lookup"><span data-stu-id="69b6e-275">Yes.</span></span> <span data-ttu-id="69b6e-276">Specificando TCP come protocollo di monitoraggio, Gestione traffico può avviare una connessione TCP e attendere una risposta dall'endpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-276">You can specify TCP as the monitoring protocol and Traffic Manager can initiate a TCP connection and wait for a response from the endpoint.</span></span> <span data-ttu-id="69b6e-277">Se l'endpoint risponde alla richiesta di connessione chiedendo di stabilire la connessione entro il periodo di timeout, l'endpoint viene contrassegnato come integro.</span><span class="sxs-lookup"><span data-stu-id="69b6e-277">If the endpoint replies to the connection request with a response to establish the connection, within the timeout period, then that endpoint is marked as healthy.</span></span>

### <a name="what-specific-responses-are-required-from-the-endpoint-when-using-tcp-monitoring"></a><span data-ttu-id="69b6e-278">Quali sono le risposte specifiche richieste dall'endpoint quando si usa il monitoraggio TCP?</span><span class="sxs-lookup"><span data-stu-id="69b6e-278">What specific responses are required from the endpoint when using TCP monitoring?</span></span>

<span data-ttu-id="69b6e-279">Se si usa il monitoraggio TCP, Gestione traffico avvia un handshake TCP a tre vie, inviando una richiesta SYN all'endpoint sulla porta specificata.</span><span class="sxs-lookup"><span data-stu-id="69b6e-279">When TCP monitoring is used, Traffic Manager starts a three-way TCP handshake by sending a SYN request to endpoint at the specified port.</span></span> <span data-ttu-id="69b6e-280">Quindi attende la risposta dall'endpoint per il periodo di tempo specificato nelle impostazioni di timeout.</span><span class="sxs-lookup"><span data-stu-id="69b6e-280">It then waits for a period of time (as specified in the timeout settings) for a response from the endpoint.</span></span> <span data-ttu-id="69b6e-281">Se l'endpoint risponde alla richiesta SYN con una risposta SYN-ACK entro il periodo di timeout specificato nelle impostazioni di monitoraggio, tale endpoint viene considerato integro.</span><span class="sxs-lookup"><span data-stu-id="69b6e-281">If the endpoint responds to the SYN request with a SYN-ACK response within the timeout period specified in the monitoring settings, then that endpoint is considered healthy.</span></span> <span data-ttu-id="69b6e-282">Se viene ricevuta la risposta SYN-ACK, Gestione traffico reimposta la connessione inviando in risposta un RST.</span><span class="sxs-lookup"><span data-stu-id="69b6e-282">If the SYN-ACK response is received, the Traffic Manager resets the connection by responding back with a RST.</span></span>

### <a name="how-fast-does-traffic-manager-move-my-users-away-from-an-unhealthy-endpoint"></a><span data-ttu-id="69b6e-283">Con quale velocità Gestione traffico sposta gli utenti da un endpoint considerato non integro?</span><span class="sxs-lookup"><span data-stu-id="69b6e-283">How fast does Traffic Manager move my users away from an unhealthy endpoint?</span></span>

<span data-ttu-id="69b6e-284">Per controllare il comportamento del profilo di Gestione traffico in caso di failover sono disponibili le impostazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="69b6e-284">Traffic Manager provides multiple settings that can help you to control the failover behavior of your Traffic Manager profile as follows:</span></span>
- <span data-ttu-id="69b6e-285">È possibile specificare una maggiore frequenza di sondaggio degli endpoint da parte di Gestione traffico impostando l'intervallo di sondaggio su 10 secondi.</span><span class="sxs-lookup"><span data-stu-id="69b6e-285">you can specify that the Traffic Manager probes the endpoints more frequently by setting the Probing Interval at 10 seconds.</span></span> <span data-ttu-id="69b6e-286">Ciò assicura che un eventuale endpoint non integro venga rilevato il prima possibile.</span><span class="sxs-lookup"><span data-stu-id="69b6e-286">This ensures that any endpoint going unhealthy can be detected as soon as possible.</span></span> 
- <span data-ttu-id="69b6e-287">È possibile specificare il tempo di attesa prima della scadenza di una richiesta di controllo di integrità. Il valore di timeout minimo è 5 sec.</span><span class="sxs-lookup"><span data-stu-id="69b6e-287">you can specify how long to wait before a health check request times out (minimum time out value is 5 sec).</span></span>
- <span data-ttu-id="69b6e-288">È possibile specificare il numero di errori che può verificarsi prima che l'endpoint sia contrassegnato come non integro.</span><span class="sxs-lookup"><span data-stu-id="69b6e-288">you can specify how many failures can occur before the endpoint is marked as unhealthy.</span></span> <span data-ttu-id="69b6e-289">Se il valore specificato è pari a 0, l'endpoint viene contrassegnato come non integro al primo controllo di integrità non riuscito.</span><span class="sxs-lookup"><span data-stu-id="69b6e-289">This value can be low as 0, in which case the endpoint is marked unhealthy as soon as it fails the first health check.</span></span> <span data-ttu-id="69b6e-290">Usando questo valore minimo, tuttavia, gli endpoint possono risultare esclusi dalla rotazione in caso di problemi temporanei che si verificano al momento dell'esecuzione del sondaggio.</span><span class="sxs-lookup"><span data-stu-id="69b6e-290">However, using the minimum value of 0 for the tolerated number of failures can lead to endpoints being taken out of rotation due to any transient issues that may occur at the time of probing.</span></span>
- <span data-ttu-id="69b6e-291">È possibile impostare la durata TTL della risposta DNS su un valore pari a 0.</span><span class="sxs-lookup"><span data-stu-id="69b6e-291">you can specify the time-to-live (TTL) for the DNS response to be as low as 0.</span></span> <span data-ttu-id="69b6e-292">In questo modo i resolver DNS non possono memorizzare la risposta nella cache e ogni nuova query ottiene una risposta che include le informazioni sull'integrità più aggiornate disponibili a Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-292">Doing so means that DNS resolvers cannot cache the response and each new query gets a response that incorporates the most up-to-date health information that the Traffic Manager has.</span></span>

<span data-ttu-id="69b6e-293">Con queste impostazioni Gestione traffico può segnalare i failover entro 10 secondi dal rilevamento della mancata integrità dell'endpoint ed eseguire una query DNS in base al profilo corrispondente.</span><span class="sxs-lookup"><span data-stu-id="69b6e-293">By using these settings, Traffic Manager can provide failovers under 10 seconds after an endpoint goes unhealthy and a DNS query is made against the corresponding profile.</span></span>

### <a name="how-can-i-specify-different-monitoring-settings-for-different-endpoints-in-a-profile"></a><span data-ttu-id="69b6e-294">Come specificare diverse impostazioni di monitoraggio per i diversi endpoint in un profilo?</span><span class="sxs-lookup"><span data-stu-id="69b6e-294">How can I specify different monitoring settings for different endpoints in a profile?</span></span>

<span data-ttu-id="69b6e-295">Le impostazioni di monitoraggio di Gestione traffico sono configurate a livello di profilo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-295">Traffic Manager monitoring settings are at a per profile level.</span></span> <span data-ttu-id="69b6e-296">Se è necessario usare un'impostazione di monitoraggio diversa per un unico endpoint, è consigliabile configurare tale endpoint come [profilo annidato](traffic-manager-nested-profiles.md), con impostazioni di monitoraggio diverse da quelle del profilo padre.</span><span class="sxs-lookup"><span data-stu-id="69b6e-296">If you need to use a different monitoring setting for only one endpoint, it can be done by having that endpoint as a [nested profile](traffic-manager-nested-profiles.md) whose monitoring settings are different from the parent profile.</span></span>

### <a name="what-host-header-do-endpoint-health-checks-use"></a><span data-ttu-id="69b6e-297">Quali intestazione host viene usata per i controlli di integrità degli endpoint?</span><span class="sxs-lookup"><span data-stu-id="69b6e-297">What host header do endpoint health checks use?</span></span>

<span data-ttu-id="69b6e-298">Gestione traffico usa le intestazioni host nei controlli di integrità HTTP e HTTPS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-298">Traffic Manager uses host headers in HTTP and HTTPS health checks.</span></span> <span data-ttu-id="69b6e-299">L'intestazione host usata da Gestione traffico è il nome dell'endpoint di destinazione configurato nel profilo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-299">The host header used by Traffic Manager is the name of the endpoint target configured in the profile.</span></span> <span data-ttu-id="69b6e-300">Il valore usato nell'intestazione host non può essere specificato separatamente dalla proprietà target.</span><span class="sxs-lookup"><span data-stu-id="69b6e-300">The value used in the host header cannot be specified separately from the target property.</span></span>

### <a name="what-are-the-ip-addresses-from-which-the-health-checks-originate"></a><span data-ttu-id="69b6e-301">Quali sono gli indirizzi IP da cui si originano i controlli di integrità?</span><span class="sxs-lookup"><span data-stu-id="69b6e-301">What are the IP addresses from which the health checks originate?</span></span>

<span data-ttu-id="69b6e-302">L'elenco seguente contiene gli indirizzi IP da cui possono provenire i controlli di integrità di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-302">The following list contains the IP addresses from which Traffic Manager health checks can originate.</span></span> <span data-ttu-id="69b6e-303">È possibile usare questo elenco per assicurarsi che le connessioni in ingresso da questi indirizzi IP siano consentite agli endpoint per controllarne lo stato di integrità.</span><span class="sxs-lookup"><span data-stu-id="69b6e-303">You may use this list to ensure that incoming connections from these IP addresses are allowed at the endpoints to check its health status.</span></span>

* <span data-ttu-id="69b6e-304">40.68.30.66</span><span class="sxs-lookup"><span data-stu-id="69b6e-304">40.68.30.66</span></span>
* <span data-ttu-id="69b6e-305">40.68.31.178</span><span class="sxs-lookup"><span data-stu-id="69b6e-305">40.68.31.178</span></span>
* <span data-ttu-id="69b6e-306">137.135.80.149</span><span class="sxs-lookup"><span data-stu-id="69b6e-306">137.135.80.149</span></span>
* <span data-ttu-id="69b6e-307">137.135.82.249</span><span class="sxs-lookup"><span data-stu-id="69b6e-307">137.135.82.249</span></span>
* <span data-ttu-id="69b6e-308">23.96.236.252</span><span class="sxs-lookup"><span data-stu-id="69b6e-308">23.96.236.252</span></span>
* <span data-ttu-id="69b6e-309">65.52.217.19</span><span class="sxs-lookup"><span data-stu-id="69b6e-309">65.52.217.19</span></span>
* <span data-ttu-id="69b6e-310">40.87.147.10</span><span class="sxs-lookup"><span data-stu-id="69b6e-310">40.87.147.10</span></span>
* <span data-ttu-id="69b6e-311">40.87.151.34</span><span class="sxs-lookup"><span data-stu-id="69b6e-311">40.87.151.34</span></span>
* <span data-ttu-id="69b6e-312">13.75.124.254</span><span class="sxs-lookup"><span data-stu-id="69b6e-312">13.75.124.254</span></span>
* <span data-ttu-id="69b6e-313">13.75.127.63</span><span class="sxs-lookup"><span data-stu-id="69b6e-313">13.75.127.63</span></span>
* <span data-ttu-id="69b6e-314">52.172.155.168</span><span class="sxs-lookup"><span data-stu-id="69b6e-314">52.172.155.168</span></span>
* <span data-ttu-id="69b6e-315">52.172.158.37</span><span class="sxs-lookup"><span data-stu-id="69b6e-315">52.172.158.37</span></span>
* <span data-ttu-id="69b6e-316">104.215.91.84</span><span class="sxs-lookup"><span data-stu-id="69b6e-316">104.215.91.84</span></span>
* <span data-ttu-id="69b6e-317">13.75.153.124</span><span class="sxs-lookup"><span data-stu-id="69b6e-317">13.75.153.124</span></span>
* <span data-ttu-id="69b6e-318">13.84.222.37</span><span class="sxs-lookup"><span data-stu-id="69b6e-318">13.84.222.37</span></span>
* <span data-ttu-id="69b6e-319">23.101.191.199</span><span class="sxs-lookup"><span data-stu-id="69b6e-319">23.101.191.199</span></span>
* <span data-ttu-id="69b6e-320">23.96.213.12</span><span class="sxs-lookup"><span data-stu-id="69b6e-320">23.96.213.12</span></span>
* <span data-ttu-id="69b6e-321">137.135.46.163</span><span class="sxs-lookup"><span data-stu-id="69b6e-321">137.135.46.163</span></span>
* <span data-ttu-id="69b6e-322">137.135.47.215</span><span class="sxs-lookup"><span data-stu-id="69b6e-322">137.135.47.215</span></span>
* <span data-ttu-id="69b6e-323">191.232.208.52</span><span class="sxs-lookup"><span data-stu-id="69b6e-323">191.232.208.52</span></span>
* <span data-ttu-id="69b6e-324">191.232.214.62</span><span class="sxs-lookup"><span data-stu-id="69b6e-324">191.232.214.62</span></span>
* <span data-ttu-id="69b6e-325">13.75.152.253</span><span class="sxs-lookup"><span data-stu-id="69b6e-325">13.75.152.253</span></span>
* <span data-ttu-id="69b6e-326">104.41.187.209</span><span class="sxs-lookup"><span data-stu-id="69b6e-326">104.41.187.209</span></span>
* <span data-ttu-id="69b6e-327">104.41.190.203</span><span class="sxs-lookup"><span data-stu-id="69b6e-327">104.41.190.203</span></span>

### <a name="how-many-health-checks-to-my-endpoint-can-i-expect-from-traffic-manager"></a><span data-ttu-id="69b6e-328">Qual è il numero di controlli di integrità previsto per un endpoint da parte di Gestione traffico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-328">How many health checks to my endpoint can I expect from Traffic Manager?</span></span>

<span data-ttu-id="69b6e-329">Il numero di controlli di integrità eseguiti da Gestione traffico sull'endpoint dipende dagli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="69b6e-329">The number of Traffic Manager health checks reaching your endpoint depends on the following:</span></span>
- <span data-ttu-id="69b6e-330">Il valore impostato per l'intervallo di monitoraggio; un intervallo inferiore indica un maggior numero di richieste che raggiungono l'endpoint in un determinato periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-330">the value that you have set for the monitoring interval (smaller interval means more requests landing on your endpoint in any given time period).</span></span>
- <span data-ttu-id="69b6e-331">Il numero di posizioni da cui hanno origine i controlli di integrità; gli indirizzi IP da cui possono avere origine tali controlli sono elencati nella domanda precedente.</span><span class="sxs-lookup"><span data-stu-id="69b6e-331">the number of locations from where the health checks originate (the IP addresses from where you can expect these checks is listed in the preceding FAQ).</span></span>

## <a name="traffic-manager-nested-profiles"></a><span data-ttu-id="69b6e-332">Profili annidati di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="69b6e-332">Traffic Manager nested profiles</span></span>

### <a name="how-do-i-configure-nested-profiles"></a><span data-ttu-id="69b6e-333">Come si configurano i profili nidificati?</span><span class="sxs-lookup"><span data-stu-id="69b6e-333">How do I configure nested profiles?</span></span>

<span data-ttu-id="69b6e-334">I profili annidati di Gestione traffico possono essere configurati usando Azure Resource Manager, le API REST di Azure classico, i cmdlet di Azure PowerShell e i comandi multipiattaforma dell'interfaccia della riga di comando di Azure.</span><span class="sxs-lookup"><span data-stu-id="69b6e-334">Nested Traffic Manager profiles can be configured using both the Azure Resource Manager and the classic Azure REST APIs, Azure PowerShell cmdlets and cross-platform Azure CLI commands.</span></span> <span data-ttu-id="69b6e-335">Sono inoltre supportati anche tramite il nuovo portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="69b6e-335">They are also supported via the new Azure portal.</span></span> <span data-ttu-id="69b6e-336">Non sono invece supportati nel portale classico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-336">They are not supported in the classic portal.</span></span>

### <a name="how-many-layers-of-nesting-does-traffic-manger-support"></a><span data-ttu-id="69b6e-337">Quanti livelli di nidificazione supporta Gestione traffico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-337">How many layers of nesting does Traffic Manger support?</span></span>

<span data-ttu-id="69b6e-338">È possibile nidificare i profili fino a 10 livelli.</span><span class="sxs-lookup"><span data-stu-id="69b6e-338">You can nest profiles up to 10 levels deep.</span></span> <span data-ttu-id="69b6e-339">I "loop" non sono consentiti.</span><span class="sxs-lookup"><span data-stu-id="69b6e-339">'Loops' are not permitted.</span></span>

### <a name="can-i-mix-other-endpoint-types-with-nested-child-profiles-in-the-same-traffic-manager-profile"></a><span data-ttu-id="69b6e-340">È possibile combinare altri tipi di endpoint con profili figlio nidificati nello stesso profilo di Gestione traffico?</span><span class="sxs-lookup"><span data-stu-id="69b6e-340">Can I mix other endpoint types with nested child profiles, in the same Traffic Manager profile?</span></span>

<span data-ttu-id="69b6e-341">Sì.</span><span class="sxs-lookup"><span data-stu-id="69b6e-341">Yes.</span></span> <span data-ttu-id="69b6e-342">Non esistono restrizioni sulla modalità di combinazione di tipi diversi di endpoint all'interno di un profilo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-342">There are no restrictions on how you combine endpoints of different types within a profile.</span></span>

### <a name="how-does-the-billing-model-apply-for-nested-profiles"></a><span data-ttu-id="69b6e-343">Come viene applicato il modello di fatturazione per i profili nidificati?</span><span class="sxs-lookup"><span data-stu-id="69b6e-343">How does the billing model apply for Nested profiles?</span></span>

<span data-ttu-id="69b6e-344">L'uso di profili nidificati non ha alcun impatto negativo sui prezzi.</span><span class="sxs-lookup"><span data-stu-id="69b6e-344">There is no negative pricing impact of using nested profiles.</span></span>

<span data-ttu-id="69b6e-345">La fatturazione di Gestione traffico include due componenti: i controlli dell'integrità degli endpoint e milioni di query DNS.</span><span class="sxs-lookup"><span data-stu-id="69b6e-345">Traffic Manager billing has two components: endpoint health checks and millions of DNS queries</span></span>

* <span data-ttu-id="69b6e-346">Controlli dell'integrità degli endpoint: non è previsto alcun addebito per un profilo figlio configurato come endpoint in un profilo padre.</span><span class="sxs-lookup"><span data-stu-id="69b6e-346">Endpoint health checks: There is no charge for a child profile when configured as an endpoint in a parent profile.</span></span> <span data-ttu-id="69b6e-347">Il monitoraggio degli endpoint nel profilo figlio viene fatturato nel modo consueto.</span><span class="sxs-lookup"><span data-stu-id="69b6e-347">Monitoring of the endpoints in the child profile is billed in the usual way.</span></span>
* <span data-ttu-id="69b6e-348">Query DNS: ogni query viene conteggiata una sola volta.</span><span class="sxs-lookup"><span data-stu-id="69b6e-348">DNS queries: Each query is only counted once.</span></span> <span data-ttu-id="69b6e-349">Una query in un profilo padre che restituisce un endpoint da un profilo figlio viene conteggiata solo per il profilo padre.</span><span class="sxs-lookup"><span data-stu-id="69b6e-349">A query against a parent profile that returns an endpoint from a child profile is counted against the parent profile only.</span></span>

<span data-ttu-id="69b6e-350">Per informazioni dettagliate, vedere la pagina [Gestione traffico Prezzi](https://azure.microsoft.com/pricing/details/traffic-manager/).</span><span class="sxs-lookup"><span data-stu-id="69b6e-350">For full details, see the [Traffic Manager pricing page](https://azure.microsoft.com/pricing/details/traffic-manager/).</span></span>

### <a name="is-there-a-performance-impact-for-nested-profiles"></a><span data-ttu-id="69b6e-351">I profili nidificati influiscono sulle prestazioni?</span><span class="sxs-lookup"><span data-stu-id="69b6e-351">Is there a performance impact for nested profiles?</span></span>

<span data-ttu-id="69b6e-352">No.</span><span class="sxs-lookup"><span data-stu-id="69b6e-352">No.</span></span> <span data-ttu-id="69b6e-353">Quando si usano i profili annidati non si verifica alcun impatto sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="69b6e-353">There is no performance impact incurred when using nested profiles.</span></span>

<span data-ttu-id="69b6e-354">I server dei nomi di Gestione traffico attraversano internamente la gerarchia dei profili durante l'elaborazione di ogni query DNS,</span><span class="sxs-lookup"><span data-stu-id="69b6e-354">The Traffic Manager name servers traverse the profile hierarchy internally when processing each DNS query.</span></span> <span data-ttu-id="69b6e-355">in modo che una query DNS inviata a un profilo padre possa ricevere una risposta DNS con un endpoint da un profilo figlio.</span><span class="sxs-lookup"><span data-stu-id="69b6e-355">A DNS query to a parent profile can receive a DNS response with an endpoint from a child profile.</span></span> <span data-ttu-id="69b6e-356">Viene usato un singolo record CNAME, indipendentemente dal fatto che si usi un profilo singolo o profili annidati.</span><span class="sxs-lookup"><span data-stu-id="69b6e-356">A single CNAME record is used whether you are using a single profile or nested profiles.</span></span> <span data-ttu-id="69b6e-357">Non è necessario quindi creare un record CNAME per ogni profilo della gerarchia.</span><span class="sxs-lookup"><span data-stu-id="69b6e-357">There is no need to create a CNAME record for each profile in the hierarchy.</span></span>

### <a name="how-does-traffic-manager-compute-the-health-of-a-nested-endpoint-in-a-parent-profile"></a><span data-ttu-id="69b6e-358">In che modo Gestione traffico calcola l'integrità di un endpoint annidato in un profilo padre?</span><span class="sxs-lookup"><span data-stu-id="69b6e-358">How does Traffic Manager compute the health of a nested endpoint in a parent profile?</span></span>

<span data-ttu-id="69b6e-359">Il profilo padre non esegue i controlli di integrità direttamente sul profilo figlio.</span><span class="sxs-lookup"><span data-stu-id="69b6e-359">The parent profile doesn't perform health checks on the child directly.</span></span> <span data-ttu-id="69b6e-360">L'integrità degli endpoint del profilo figlio viene usata invece per calcolare l'integrità complessiva del profilo figlio.</span><span class="sxs-lookup"><span data-stu-id="69b6e-360">Instead, the health of the child profile's endpoints are used to calculate the overall health of the child profile.</span></span> <span data-ttu-id="69b6e-361">Queste informazioni vengono propagate alla gerarchia del profilo annidato per determinare l'integrità dell'endpoint annidato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-361">This information is propagated up the nested profile hierarchy to determine the health of the nested endpoint.</span></span> <span data-ttu-id="69b6e-362">Il profilo padre usa quindi questa integrità complessiva per determinare se indirizzare il traffico al profilo figlio.</span><span class="sxs-lookup"><span data-stu-id="69b6e-362">The parent profile uses this aggregated health to determine whether the traffic can be directed to the child.</span></span>

<span data-ttu-id="69b6e-363">La tabella seguente descrive il comportamento dei controlli dell'integrità di Gestione traffico per un endpoint annidato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-363">The following table describes the behavior of Traffic Manager health checks for a nested endpoint.</span></span>

| <span data-ttu-id="69b6e-364">Stato di monitoraggio del profilo figlio</span><span class="sxs-lookup"><span data-stu-id="69b6e-364">Child Profile Monitor status</span></span> | <span data-ttu-id="69b6e-365">Stato di monitoraggio dell'endpoint padre</span><span class="sxs-lookup"><span data-stu-id="69b6e-365">Parent Endpoint Monitor status</span></span> | <span data-ttu-id="69b6e-366">Note</span><span class="sxs-lookup"><span data-stu-id="69b6e-366">Notes</span></span> |
| --- | --- | --- |
| <span data-ttu-id="69b6e-367">Disabilitato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-367">Disabled.</span></span> <span data-ttu-id="69b6e-368">Il profilo figlio è stato disabilitato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-368">The child profile has been disabled.</span></span> |<span data-ttu-id="69b6e-369">Arrestato</span><span class="sxs-lookup"><span data-stu-id="69b6e-369">Stopped</span></span> |<span data-ttu-id="69b6e-370">Lo stato dell'endpoint padre è Stopped, non Disabled.</span><span class="sxs-lookup"><span data-stu-id="69b6e-370">The parent endpoint state is Stopped, not Disabled.</span></span> <span data-ttu-id="69b6e-371">Lo stato Disabled è usato esclusivamente per indicare che l'utente ha disabilitato l'endpoint nel profilo padre.</span><span class="sxs-lookup"><span data-stu-id="69b6e-371">The Disabled state is reserved for indicating that you have disabled the endpoint in the parent profile.</span></span> |
| <span data-ttu-id="69b6e-372">Danneggiato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-372">Degraded.</span></span> <span data-ttu-id="69b6e-373">Almeno uno degli endpoint del profilo figlio è nello stato Danneggiato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-373">At least one child profile endpoint is in a Degraded state.</span></span> |<span data-ttu-id="69b6e-374">Online: il numero di endpoint Online nel profilo figlio è pari almeno al valore di MinChildEndpoints.</span><span class="sxs-lookup"><span data-stu-id="69b6e-374">Online: the number of Online endpoints in the child profile is at least the value of MinChildEndpoints.</span></span><BR><span data-ttu-id="69b6e-375">CheckingEndpoint: il numero di endpoint Online e CheckingEndpoint nel profilo figlio è pari almeno al valore di MinChildEndpoints.</span><span class="sxs-lookup"><span data-stu-id="69b6e-375">CheckingEndpoint: the number of Online plus CheckingEndpoint endpoints in the child profile is at least the value of MinChildEndpoints.</span></span><BR><span data-ttu-id="69b6e-376">Danneggiato: negli altri casi.</span><span class="sxs-lookup"><span data-stu-id="69b6e-376">Degraded: otherwise.</span></span> |<span data-ttu-id="69b6e-377">Il traffico viene indirizzato a un endpoint con stato CheckingEndpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-377">Traffic is routed to an endpoint of status CheckingEndpoint.</span></span> <span data-ttu-id="69b6e-378">Se il valore di MinChildEndpoints è troppo elevato, l'endpoint risulta sempre danneggiato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-378">If MinChildEndpoints is set too high, the endpoint is always degraded.</span></span> |
| <span data-ttu-id="69b6e-379">Online.</span><span class="sxs-lookup"><span data-stu-id="69b6e-379">Online.</span></span> <span data-ttu-id="69b6e-380">Almeno uno degli endpoint del profilo figlio è nello stato Online.</span><span class="sxs-lookup"><span data-stu-id="69b6e-380">At least one child profile endpoint is an Online state.</span></span> <span data-ttu-id="69b6e-381">Nessun endpoint è nello stato Danneggiato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-381">No endpoint is in the Degraded state.</span></span> |<span data-ttu-id="69b6e-382">Vedere sopra.</span><span class="sxs-lookup"><span data-stu-id="69b6e-382">See above.</span></span> | |
| <span data-ttu-id="69b6e-383">CheckingEndpoints.</span><span class="sxs-lookup"><span data-stu-id="69b6e-383">CheckingEndpoints.</span></span> <span data-ttu-id="69b6e-384">Almeno uno degli endpoint del profilo figlio è nello stato CheckingEndpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-384">At least one child profile endpoint is 'CheckingEndpoint'.</span></span> <span data-ttu-id="69b6e-385">Nessun endpoint è nello stato Online o Danneggiato.</span><span class="sxs-lookup"><span data-stu-id="69b6e-385">No endpoints are 'Online' or 'Degraded'</span></span> |<span data-ttu-id="69b6e-386">Come sopra.</span><span class="sxs-lookup"><span data-stu-id="69b6e-386">Same as above.</span></span> | |
| <span data-ttu-id="69b6e-387">Inattivo.</span><span class="sxs-lookup"><span data-stu-id="69b6e-387">Inactive.</span></span> <span data-ttu-id="69b6e-388">Tutti gli endpoint del profilo figlio sono nello stato Disabilitato o Arrestato oppure si tratta di un profilo senza endpoint.</span><span class="sxs-lookup"><span data-stu-id="69b6e-388">All child profile endpoints are either Disabled or Stopped, or this profile has no endpoints.</span></span> |<span data-ttu-id="69b6e-389">Arrestato</span><span class="sxs-lookup"><span data-stu-id="69b6e-389">Stopped</span></span> | |

## <a name="next-steps"></a><span data-ttu-id="69b6e-390">Passaggi successivi:</span><span class="sxs-lookup"><span data-stu-id="69b6e-390">Next steps:</span></span>
- <span data-ttu-id="69b6e-391">Altre informazioni sul [monitoraggio degli endpoint e sul failover automatico](../traffic-manager/traffic-manager-monitoring.md)di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-391">Learn more about Traffic Manager [endpoint monitoring and automatic failover](../traffic-manager/traffic-manager-monitoring.md).</span></span>
- <span data-ttu-id="69b6e-392">Altre informazioni sui [metodi di routing](../traffic-manager/traffic-manager-routing-methods.md)di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="69b6e-392">Learn more about Traffic Manager [traffic routing methods](../traffic-manager/traffic-manager-routing-methods.md).</span></span>