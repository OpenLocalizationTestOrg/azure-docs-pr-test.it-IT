---
title: aaaFailover gruppi e replica geografica attiva - Database SQL di Azure | Documenti Microsoft
description: Gruppi con failover automatico con replica geografica attiva consente toosetup 4 repliche del database in uno dei Data Center di Azure hello e failover autoomatically nell'evento hello di interruzione.
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="6666f-103">Panoramica: gruppi di failover e replica geografica attiva</span><span class="sxs-lookup"><span data-stu-id="6666f-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="6666f-104">Replica geografica attiva consente tooconfigure backup toofour database secondari leggibili in hello stesso o in diversi data center posizioni (aree).</span><span class="sxs-lookup"><span data-stu-id="6666f-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="6666f-105">Database secondari sono disponibili per l'esecuzione di query e per il failover nel caso di hello di un data center hello o un'interruzione dell'impossibilità tooconnect toohello database primario.</span><span class="sxs-lookup"><span data-stu-id="6666f-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="6666f-106">Hello failover deve essere avviato manualmente da un'applicazione hello dell'utente hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="6666f-107">Dopo il failover, nuovo database primario di hello dispone di un endpoint di connessione diversa.</span><span class="sxs-lookup"><span data-stu-id="6666f-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="6666f-108">La replica geografica attiva è disponibile per tutti i database in tutti i livelli di servizio in tutte le aree.</span><span class="sxs-lookup"><span data-stu-id="6666f-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="6666f-109">Gruppi con failover automatico di Database SQL Azure (in anteprima) è un tooautomatically funzionalità progettata SQL Database gestire relazione di replica geografica, connettività e il failover su larga scala.</span><span class="sxs-lookup"><span data-stu-id="6666f-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="6666f-110">Con, hello clienti guadagno hello possibilità tooautomatically ripristinare più database correlati nell'area secondaria hello dopo errori internazionali irreversibili o altri eventi imprevisti che comportano la perdita parziale o completa di hello del servizio di Database SQL disponibilità nell'area primaria hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="6666f-111">Inoltre, usano hello database secondari leggibili toooffload sola lettura e i carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="6666f-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="6666f-112">Poiché i gruppi con failover automatico implicano più database devono essere configurati nel server primario hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="6666f-113">Server primario e secondario devono appartenere hello stessa sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="6666f-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="6666f-114">Gruppi con failover automatico supportano la replica di tutti i database in hello gruppo tooonly un server secondario in un'area diversa.</span><span class="sxs-lookup"><span data-stu-id="6666f-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="6666f-115">Consente di replica geografica attiva, senza gruppi con failover automatico, le repliche secondarie too4 in qualsiasi area.</span><span class="sxs-lookup"><span data-stu-id="6666f-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="6666f-116">Se si utilizza la replica geografica attiva e per qualsiasi motivo che il database primario non riesce, o semplicemente i toobe esigenze portato offline, è possibile avviare tooany failover dei database secondari.</span><span class="sxs-lookup"><span data-stu-id="6666f-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="6666f-117">Quando è attivata tooone dei database secondari hello un failover, tutte le altre repliche secondarie sono toohello automaticamente collegato nuovo database primario.</span><span class="sxs-lookup"><span data-stu-id="6666f-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="6666f-118">Se si utilizza con failover automatico consente di raggruppare il recupero del database (in anteprima) toomanage e qualsiasi interruzione che influisce su uno o più database hello nei risultati di gruppo hello nel failover automatico.</span><span class="sxs-lookup"><span data-stu-id="6666f-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="6666f-119">È possibile configurare i criteri di failover automatico hello che meglio soddisfano le esigenze dell'applicazione, oppure è possibile escludere e usare l'attivazione manuale.</span><span class="sxs-lookup"><span data-stu-id="6666f-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="6666f-120">I gruppi di failover automatico (in anteprima) forniscono anche endpoint di listener di sola lettura e di sola scrittura che rimangono invariati durante i failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="6666f-121">Se si utilizza l'attivazione di failover manuale o automatico, failover passa tutti i database secondari in tooprimary gruppo hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="6666f-122">Al termine di failover del database hello, record DNS hello è tooredirect aggiornate automaticamente hello endpoint toohello nuova area.</span><span class="sxs-lookup"><span data-stu-id="6666f-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="6666f-123">È possibile gestire la replica e il failover di un singolo database o di un set di database in un server o in un pool elastico tramite la replica geografica attiva.</span><span class="sxs-lookup"><span data-stu-id="6666f-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="6666f-124">È possibile eseguire tale utilizzando hello [portale di Azure](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), o hello [API REST](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span><span class="sxs-lookup"><span data-stu-id="6666f-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="6666f-125">Dopo il failover, verificare i requisiti di autenticazione hello per server e database sono configurati nel nuovo database primario di hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="6666f-126">Per tutti i dettagli, vedere l'articolo sulla [sicurezza del database SQL di Azure dopo il ripristino di emergenza](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="6666f-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="6666f-127">Si applica sia tooactive con failover automatico e la replica geografica gruppi (in anteprima).</span><span class="sxs-lookup"><span data-stu-id="6666f-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="6666f-128">Hello sfrutta la replica geografica attiva [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) tecnologia di SQL Server tooasynchronously replicare il commit delle transazioni in hello database primario tooa database secondario tramite l'isolamento dello snapshot read committed (Read Committed).</span><span class="sxs-lookup"><span data-stu-id="6666f-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="6666f-129">Gruppi con failover automatico forniscono la semantica di gruppo hello nella parte superiore di replica geografica attiva ma hello viene utilizzato il meccanismo di replica asincrona stessa.</span><span class="sxs-lookup"><span data-stu-id="6666f-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="6666f-130">Anche se a un certo punto, database secondario hello potrà essere leggermente indietro rispetto database primario hello, hello viene garantito che toonever con transazioni parziale.</span><span class="sxs-lookup"><span data-stu-id="6666f-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="6666f-131">La ridondanza tra aree consente applicazioni tooquickly di recupero dalla perdita definitiva di un intero Data Center o parti di un Data Center causata da calamità naturali, errori umani irreversibili o atti dolosi.</span><span class="sxs-lookup"><span data-stu-id="6666f-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="6666f-132">dati RPO specifici Hello sono reperibile in [Panoramica di continuità aziendale](sql-database-business-continuity.md).</span><span class="sxs-lookup"><span data-stu-id="6666f-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="6666f-133">Hello figura riportata di seguito viene illustrato un esempio di replica geografica attiva configurato con un database primario nell'area di hello North Central US e secondari nell'area di hello centro-meridionali.</span><span class="sxs-lookup"><span data-stu-id="6666f-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![relazione di replica geografica](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="6666f-135">Poiché i database secondari hello sono leggibili, possono essere utilizzati toooffload sola lettura carichi di lavoro come processi di reporting.</span><span class="sxs-lookup"><span data-stu-id="6666f-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="6666f-136">Se si utilizza la replica geografica attiva, è possibile toocreate database secondario di hello in hello stessa regione con hello primario, ma non aumenta errori toocatastrophic di resilienza dell'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="6666f-137">Se si usano i gruppi di failover automatico (in anteprima), i database secondari vengono sempre creati in un'area diversa.</span><span class="sxs-lookup"><span data-stu-id="6666f-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="6666f-138">Inoltre toodisaster ripristino replica geografica attiva è utilizzabile nei seguenti scenari hello:</span><span class="sxs-lookup"><span data-stu-id="6666f-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="6666f-139">**Migrazione di database**: È possibile utilizzare la replica geografica attiva toomigrate un database da un server tooanother online con tempo di inattività minimo.</span><span class="sxs-lookup"><span data-stu-id="6666f-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="6666f-140">**Aggiornamenti dell'applicazione**: è possibile creare un database secondario aggiuntivo come copia di failback durante gli aggiornamenti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6666f-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="6666f-141">tooachieve reale continuità aziendale, l'aggiunta di ridondanza del database tra i Data Center è solo una parte della soluzione hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="6666f-142">Ripristino di un'applicazione (servizio) end-to-end dopo un errore irreversibile richiede il ripristino di tutti i componenti che costituiscono il servizio hello e dei servizi dipendenti.</span><span class="sxs-lookup"><span data-stu-id="6666f-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="6666f-143">Esempi di questi componenti includono il software client hello (ad esempio, un browser con JavaScript personalizzato), front-end web, archiviazione e DNS.</span><span class="sxs-lookup"><span data-stu-id="6666f-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="6666f-144">È fondamentale che tutti i componenti siano resiliente toohello stessi errori e diventano disponibili all'interno di hello obiettivo tempo di ripristino (RTO) dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6666f-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="6666f-145">Pertanto, è necessario tooidentify tutti i servizi dipendenti e comprendere hello garanzie e funzionalità che vengono fornite.</span><span class="sxs-lookup"><span data-stu-id="6666f-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="6666f-146">Quindi, è necessario prendere provvedimenti tooensure che il funzionamento del servizio durante hello failover dei servizi di hello da cui dipende.</span><span class="sxs-lookup"><span data-stu-id="6666f-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="6666f-147">Per altre informazioni sulla progettazione di soluzioni per il ripristino di emergenza, vedere [Progettazione di applicazioni per il ripristino di emergenza cloud con la replica geografica attiva in database SQL](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="6666f-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="6666f-148">Funzionalità della replica geografica attiva</span><span class="sxs-lookup"><span data-stu-id="6666f-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="6666f-149">funzionalità di replica geografica attiva Hello fornisce hello funzioni essenziali seguenti:</span><span class="sxs-lookup"><span data-stu-id="6666f-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="6666f-150">**Replica asincrona automatica**: È possibile creare solo un database secondario tramite l'aggiunta di database esistente tooan.</span><span class="sxs-lookup"><span data-stu-id="6666f-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="6666f-151">è possibile creare Hello secondario in qualsiasi server di Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="6666f-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="6666f-152">Una volta creato, database secondario hello viene popolata con dati hello copiati dal database primario hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="6666f-153">Questo processo è noto come seeding.</span><span class="sxs-lookup"><span data-stu-id="6666f-153">This process is known as seeding.</span></span> <span data-ttu-id="6666f-154">Dopo aver creato ed effettuato il seeding del database secondario, gli aggiornamenti in modo asincrono è quello del database primario toohello replicati automaticamente toohello database secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="6666f-155">La replica asincrona significa che le transazioni vengono sottoposte a commit sul database primario hello prima che vengano replicati toohello database secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="6666f-156">**Database secondari leggibili**: un'applicazione può accedere a un database secondario per operazioni di sola lettura utilizzando hello uguali o diverse identità di protezione utilizzato per accedere al database primario hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="6666f-157">Hello database secondari operano in isolamento dello snapshot modalità tooensure della replica degli aggiornamenti di hello di hello primaria (la riesecuzione del registro) non viene ritardato da query eseguite sul hello secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6666f-158">la riesecuzione del Registro di Hello viene ritardato nel database secondario hello se sono presenti aggiornamenti dello schema che vengono ricevuti dal database primario che richiedono un blocco dello schema nel database secondario hello hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="6666f-159">**Più repliche secondarie leggibili**: due o più database secondari aumenta la ridondanza e livello di protezione per i database primari hello e dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6666f-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="6666f-160">In presenza di più database secondari, un'applicazione hello rimane protetta anche se uno dei database secondari hello non riesce.</span><span class="sxs-lookup"><span data-stu-id="6666f-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="6666f-161">Se è presente un solo database secondario e si verifica un errore, viene esposta un'applicazione hello toohigher rischio fino a quando non viene creato un nuovo database secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6666f-162">Se si utilizza la replica geografica attiva toobuild un'applicazione distribuita a livello globale e necessario tooprovide di sola lettura accedere toodata in aree più di 4, è possibile creare secondaria di un database secondario (processo noto come concatenazione).</span><span class="sxs-lookup"><span data-stu-id="6666f-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="6666f-163">In questo modo è possibile ottenere una scalabilità virtualmente illimitata della replica del database.</span><span class="sxs-lookup"><span data-stu-id="6666f-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="6666f-164">Inoltre, concatenazione riduce il sovraccarico di hello di replica dal database primario hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="6666f-165">compromesso di Hello è intervallo di replica maggiore hello nei database secondari di hello più foglia.</span><span class="sxs-lookup"><span data-stu-id="6666f-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="6666f-166">.</span><span class="sxs-lookup"><span data-stu-id="6666f-166">.</span></span> 
   >

* <span data-ttu-id="6666f-167">**Supporto dei database del pool elastico**: la replica geografica attiva può essere configurata per qualsiasi database in qualsiasi pool elastico.</span><span class="sxs-lookup"><span data-stu-id="6666f-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="6666f-168">database secondario Hello può essere in un altro pool elastico.</span><span class="sxs-lookup"><span data-stu-id="6666f-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="6666f-169">Per i database regolari, hello secondario può essere un pool elastico e viceversa, purché i livelli di servizio hello sono hello stesso.</span><span class="sxs-lookup"><span data-stu-id="6666f-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="6666f-170">**Livello di prestazioni configurabile del database secondario hello**: un database secondario può essere creato con livello di prestazioni inferiore a quello di hello primario.</span><span class="sxs-lookup"><span data-stu-id="6666f-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="6666f-171">Database primari e secondari sono necessari toohave hello stesso livello di servizio.</span><span class="sxs-lookup"><span data-stu-id="6666f-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="6666f-172">Questa opzione non è consigliata per le applicazioni con elevata scrittura attività del database perché l'intervallo di replica maggiore hello aumenta il rischio di hello di perdita di dati sostanziali dopo un failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="6666f-173">Inoltre, dopo sulle prestazioni dell'applicazione hello failover fino a quando hello nuovo primario sono prestazioni più elevate tooa aggiornato livello.</span><span class="sxs-lookup"><span data-stu-id="6666f-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="6666f-174">grafico di percentuale dei / o di log nel portale Azure Hello fornisce tooestimate un buon metodo hello a livello di prestazioni minimo di hello secondaria che è necessario toosustain hello replica load.</span><span class="sxs-lookup"><span data-stu-id="6666f-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="6666f-175">Ad esempio, se il database primario è P6 (1000 DTU) e relativa percentuale i/o di log è 50% hello secondario richiede toobe almeno P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="6666f-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="6666f-176">È inoltre possibile recuperare dati dei / o log hello utilizzando [resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) o [Sys.dm db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) viste di database.</span><span class="sxs-lookup"><span data-stu-id="6666f-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="6666f-177">Per ulteriori informazioni sui livelli di prestazioni di hello Database SQL, vedere [opzioni del Database SQL e le prestazioni](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="6666f-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="6666f-178">**Failover controllato dall'utente e il failback**: un database secondario può essere esplicitamente ruolo primario toohello disattivati in qualsiasi momento da un'applicazione hello o un utente di hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="6666f-179">Durante un hello interruzione reale opzione "non pianificato" deve essere utilizzata, che promuove immediatamente primaria hello toobe secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="6666f-180">Quando hello primario consente di recuperare ed è disponibile nuovo sistema hello automaticamente hello segni ripristinare principale come un database secondario e aggiornarlo con nuovo database primario di hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="6666f-181">A causa di toohello natura asincrona di replica, una piccola quantità di dati può essere persa durante i failover non pianificati se un database primario ha esito negativo prima della replica hello più recenti modifiche toohello secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="6666f-182">Quando un database primario con più database secondari viene eseguito il failover, il sistema hello riconfigura automaticamente le relazioni di replica hello e hello collegamenti rimanenti toohello repliche secondarie appena alzate di livello principale senza richiedere alcun intervento dell'utente.</span><span class="sxs-lookup"><span data-stu-id="6666f-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="6666f-183">Dopo l'interruzione del servizio che ha causato il failover hello hello viene ridotta, potrebbe essere area primaria toohello applicazione hello tooreturn auspicabile.</span><span class="sxs-lookup"><span data-stu-id="6666f-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="6666f-184">toodo, che deve essere richiamato il comando di failover di hello con hello opzione "pianificato".</span><span class="sxs-lookup"><span data-stu-id="6666f-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="6666f-185">**Sincronizzazione credenziali e le regole del firewall**: si consiglia di utilizzare [regole del firewall di database](sql-database-firewall-configure.md) per i database di replica geografica in modo da queste regole possono essere replicate con hello database tooensure tutti i database secondari sono Hello stesse regole firewall hello primario.</span><span class="sxs-lookup"><span data-stu-id="6666f-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="6666f-186">Questo approccio Elimina hello necessario per i clienti toomanually configurare e gestire regole firewall nel server che ospitano i database primari e secondari hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="6666f-187">Analogamente, l'utilizzo [utenti del database indipendente](sql-database-manage-logins.md) per i dati di accesso garantisce i database primari e secondari dispongano sempre hello pertanto durante un failover, non c'è nessun interruzioni delle credenziali utente stesso scadenza toomismatches con account di accesso e password.</span><span class="sxs-lookup"><span data-stu-id="6666f-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="6666f-188">Con l'aggiunta di hello di [Azure Active Directory](../active-directory/active-directory-whatis.md), i clienti possono gestire utente accesso tooboth database primario e secondario ed eliminando hello necessario per la gestione delle credenziali nei database completamente.</span><span class="sxs-lookup"><span data-stu-id="6666f-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="6666f-189">Funzionalità dei gruppi di failover automatico</span><span class="sxs-lookup"><span data-stu-id="6666f-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="6666f-190">La funzionalità dei gruppi di failover automatico fornisce un'astrazione potente della replica geografica attiva grazie al supporto della replica a livello di gruppo e al failover automatico.</span><span class="sxs-lookup"><span data-stu-id="6666f-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="6666f-191">Inoltre, rimuove stringa di connessione SQL hello necessità toochange hello dopo il failover, fornendo gli endpoint di listener aggiuntivo hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="6666f-192">**Gruppo di failover**: è possibile creare uno o più gruppi di failover tra due server in aree diverse (server primario e secondario).</span><span class="sxs-lookup"><span data-stu-id="6666f-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="6666f-193">Ogni gruppo può includere uno o più database ripristinate come un'unità nel caso in cui alcuni o tutti i database primari diventano non disponibili a causa di interruzione tooan nell'area primaria hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="6666f-194">**Server primario**: un server che ospita i database primari di hello in un gruppo di failover hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="6666f-195">**Server secondario**: un server che ospita i database secondari di hello in un gruppo di failover hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="6666f-196">server secondario Hello non può essere hello server primario hello stessa area.</span><span class="sxs-lookup"><span data-stu-id="6666f-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="6666f-197">**Aggiungere il gruppo di database toofailover**: È possibile inserire più database all'interno di un server o all'interno di un elastica pool in hello stesso gruppo di failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="6666f-198">Se si aggiunge un gruppo di toohello database autonomo, viene creato automaticamente un database secondario utilizzando hello stesso edizione e livello di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="6666f-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="6666f-199">Se il database primario hello è in un pool elastico, hello secondario viene creato automaticamente nel pool elastico hello con hello stesso nome.</span><span class="sxs-lookup"><span data-stu-id="6666f-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="6666f-200">Se si aggiunge un database che dispone già di un database secondario nel server secondario hello, che la replica geografica viene ereditata dal gruppo hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6666f-201">Quando si aggiunge un database che dispone già di un database secondario in un server che non fa parte del gruppo di failover di hello, viene creato un nuovo database secondario nel server secondario hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="6666f-202">**Lettura e scrittura listener del gruppo di failover**: record CNAME DNS di un formato come  **&lt;failover-group-name&gt;. database.windows.net** che punta toohello URL del server primario corrente.</span><span class="sxs-lookup"><span data-stu-id="6666f-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="6666f-203">Consente di hello in lettura / scrittura di applicazioni SQL tootransparently riconnettersi database primario toohello quando viene modificato hello primario dopo il failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="6666f-204">**Listener di sola lettura del gruppo con failover**: record CNAME DNS di un formato come  **&lt;failover-group-name&gt;. secondary.database.windows.net** che fa riferimento l'URL del server secondario toohello.</span><span class="sxs-lookup"><span data-stu-id="6666f-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="6666f-205">Consente di hello sola lettura applicazioni SQL tootransparently connettersi toohello database secondario utilizzando hello specificate regole di bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="6666f-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="6666f-206">Facoltativamente è possibile specificare se si desidera hello sola lettura toobe traffico reindirizzamento automatico server primario toohello quando il server secondario hello non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="6666f-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="6666f-207">**Criteri di failover automatico**: per impostazione predefinita, il gruppo di failover di hello è configurato con un criterio di failover automatico.</span><span class="sxs-lookup"><span data-stu-id="6666f-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="6666f-208">Hello sistema attiva il failover, non appena viene rilevato un errore di hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="6666f-209">Se si desidera toocontrol hello failover flusso di lavoro da un'applicazione hello, è possibile disattivare il failover automatico.</span><span class="sxs-lookup"><span data-stu-id="6666f-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="6666f-210">**Failover manuale**: È possibile avviare manualmente il failover in qualsiasi momento, indipendentemente dalla configurazione di failover automatico hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="6666f-211">Se i criteri di failover automatico non sono configurato il failover manuale è database toorecover obbligatorio in un gruppo di failover di hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="6666f-212">È possibile avviare il failover forzato o semplice (con sincronizzazione completa dei dati).</span><span class="sxs-lookup"><span data-stu-id="6666f-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="6666f-213">Hello quest'ultimo potrebbe essere area primaria toohello toorelocate utilizzati hello server attivo.</span><span class="sxs-lookup"><span data-stu-id="6666f-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="6666f-214">Quando viene completato il failover record DNS hello vengono aggiornate automaticamente tooensure connettività toohello corretto del server.</span><span class="sxs-lookup"><span data-stu-id="6666f-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="6666f-215">**Periodo di prova con perdita di dati**: perché il database primario e secondario hello vengono sincronizzati mediante la replica asincrona hello failover può comportare la perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="6666f-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="6666f-216">È possibile personalizzare tooreflect criteri di failover automatico hello perdita toodata di tolleranza di errore dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6666f-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="6666f-217">Configurando **GracePeriodWithDataLossHours**, è possibile controllare il tempo di attesa prima dell'avvio del failover hello tooresult probabile perdita di dati di sistema hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="6666f-218">Quando system rileva che il database di hello in un gruppo di hello sono ancora online (ad esempio, interruzione hello solo interessati piano di controllo servizio hello), viene attivata immediatamente hello failover con la sincronizzazione completa dei dati (failover descrittivo) indipendentemente dal valore hello l'impostazione **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="6666f-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="6666f-219">Questo comportamento non assicura che sia presente alcuna perdita di dati durante il recupero di hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="6666f-220">il periodo di tolleranza Hello ha effetto solo quando un failover descrittivo non è possibile.</span><span class="sxs-lookup"><span data-stu-id="6666f-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="6666f-221">Se l'interruzione hello viene ridotta prima della scadenza del periodo di tolleranza hello, hello failover non è attivato.</span><span class="sxs-lookup"><span data-stu-id="6666f-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="6666f-222">**Più gruppi di failover**: È possibile configurare più gruppi di failover per hello stessa coppia di scala di hello toocontrol server di failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="6666f-223">Ogni gruppo esegue il failover in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="6666f-223">Each group fails over independently.</span></span> <span data-ttu-id="6666f-224">Se l'applicazione multi-tenant Usa pool elastico, è possibile utilizzare questo database primario e secondario di toomix funzionalità in ciascun pool.</span><span class="sxs-lookup"><span data-stu-id="6666f-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="6666f-225">In questo modo è possibile diminuire hello impatto di un'interruzione di tooonly metà di tenant hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="6666f-226">Procedure consigliate per la creazione di un servizio a disponibilità elevata</span><span class="sxs-lookup"><span data-stu-id="6666f-226">Best practices of building highly available service</span></span>

<span data-ttu-id="6666f-227">un servizio a disponibilità elevata che utilizza i clienti di SQL Azure database hello toobuild deve seguire queste linee guida:</span><span class="sxs-lookup"><span data-stu-id="6666f-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="6666f-228">**Usare gruppi di failover**: è possibile creare uno o più gruppi di failover tra due server in aree diverse (server primario e secondario).</span><span class="sxs-lookup"><span data-stu-id="6666f-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="6666f-229">Ogni gruppo può includere uno o più database ripristinate come un'unità nel caso in cui alcuni o tutti i database primari diventano non disponibili a causa di interruzione tooan nell'area primaria hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="6666f-230">gruppo di failover Hello crea geo-database secondario con hello obiettivo come hello primario del servizio stesso.</span><span class="sxs-lookup"><span data-stu-id="6666f-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="6666f-231">Se si aggiunge che un replica geografica relazione toohello failover gruppo verificare che hello geo-secondario esistente è configurato con hello stesso come obiettivo del livello di servizio hello primario.</span><span class="sxs-lookup"><span data-stu-id="6666f-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="6666f-232">**Utilizzare il listener di lettura / scrittura per carico di lavoro OLTP**: quando si esegue l'utilizzo di operazioni OLTP  **&lt;failover-group-name&gt;. database.windows.net** come URL del server hello e connessioni hello sarà toohello automaticamente diretto primario.</span><span class="sxs-lookup"><span data-stu-id="6666f-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="6666f-233">Questo URL non verrà modificato dopo il failover hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="6666f-234">Nota hello failover comporta l'aggiornamento di hello record DNS in modo che le connessioni client hello sia reindirizzato toohello nuova primaria solo quando il client di hello cache DNS viene aggiornata.</span><span class="sxs-lookup"><span data-stu-id="6666f-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="6666f-235">**Utilizzare i listener di sola lettura per il carico di lavoro di sola lettura**: se sono isolata logicamente sola lettura del carico di lavoro toocertain tolleranza d'errore obsolescenza dei dati, è possibile utilizzare i database secondari hello in un'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="6666f-236">Per utilizzano le sessioni di sola lettura  **&lt;failover-group-name&gt;. secondary.database.windows.net** come URL del server hello e connessione hello saranno automaticamente diretto toohello secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="6666f-237">È consigliabile anche indicare la finalità di lettura nella stringa di connessione usando **ApplicationIntent=ReadOnly**.</span><span class="sxs-lookup"><span data-stu-id="6666f-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="6666f-238">**Prevedere un calo delle prestazioni**: decisione di failover SQL è indipendente dalla parte rimanente di hello di un'applicazione hello o altri servizi utilizzati.</span><span class="sxs-lookup"><span data-stu-id="6666f-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="6666f-239">un'applicazione Hello potrebbe essere "mixed" con alcuni componenti in un'area e alcuni in un altro.</span><span class="sxs-lookup"><span data-stu-id="6666f-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="6666f-240">riduzione delle hello tooavoid, verificare la distribuzione di applicazioni ridondanti di hello nell'area di ripristino di emergenza hello e attenersi alle linee guida hello in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="6666f-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="6666f-241">Un'applicazione hello nota nell'area di ripristino di emergenza hello è toouse una stringa di connessione diversi.</span><span class="sxs-lookup"><span data-stu-id="6666f-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="6666f-242">**Preparazione per la perdita di dati**: se viene rilevata un'interruzione, SQL attiva automaticamente il failover di lettura / scrittura se è migliore di conoscendo zero toohello perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="6666f-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="6666f-243">In caso contrario, è in attesa per il periodo di hello specificata **GracePeriodWithDataLossHours**.</span><span class="sxs-lookup"><span data-stu-id="6666f-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="6666f-244">Se è stato specificato **GracePeriodWithDataLossHours**, prepararsi a una perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="6666f-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="6666f-245">Durante le interruzioni del servizio, generalmente Azure predilige la disponibilità.</span><span class="sxs-lookup"><span data-stu-id="6666f-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="6666f-246">Se la perdita di dati non sono consentiti, assicurarsi che tooset **GracePeriodWithDataLossHours** numero sufficientemente elevato tooa, ad esempio di 24 ore.</span><span class="sxs-lookup"><span data-stu-id="6666f-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="6666f-247">Aggiornamento o downgrade di un database primario</span><span class="sxs-lookup"><span data-stu-id="6666f-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="6666f-248">È possibile aggiornare o effettuare il downgrade di un livello di prestazioni diverse tooa database primario (all'interno di hello stesso servizio di livello) senza disconnettere i database secondari.</span><span class="sxs-lookup"><span data-stu-id="6666f-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="6666f-249">Durante l'aggiornamento, è consigliabile aggiornare prima i database secondari hello e quindi aggiornare hello primario.</span><span class="sxs-lookup"><span data-stu-id="6666f-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="6666f-250">La riduzione, invertire l'ordine di hello: effettuare il downgrade hello primario prima e quindi effettuare il downgrade hello secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="6666f-251">Quando si aggiorna o effettuare il downgrade a livello di servizio diversi tooa hello viene applicata questa raccomandazione.</span><span class="sxs-lookup"><span data-stu-id="6666f-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="6666f-252">Se il database secondario è stato creato come parte della configurazione del gruppo di hello failover non è consigliato toodowngrade database secondario di hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="6666f-253">Si tratta di tooensure del livello dati dispone di sufficiente capacità tooprocess normale carico di lavoro dopo l'attivazione di failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="6666f-254">Impedire la perdita di hello di dati critici</span><span class="sxs-lookup"><span data-stu-id="6666f-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="6666f-255">A causa di una latenza elevata toohello delle reti WAN, copia continua viene usato un meccanismo di replica asincrona.</span><span class="sxs-lookup"><span data-stu-id="6666f-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="6666f-256">La replica asincrona rende inevitabile una perdita parziale dei dati nel caso si verifichi un problema.</span><span class="sxs-lookup"><span data-stu-id="6666f-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="6666f-257">Tuttavia, alcune applicazione potrebbero non essere soggette alla perdita dei dati.</span><span class="sxs-lookup"><span data-stu-id="6666f-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="6666f-258">tooprotect questi aggiornamenti critici, uno sviluppatore di applicazioni possono chiamare hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) procedure di sistema subito dopo il commit delle transazioni hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="6666f-259">La chiamata **sp_wait_for_database_copy_sync** hello blocchi thread chiamante finché non hello ultimo commit della transazione è stato trasmesso toohello database secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="6666f-260">Tuttavia, non si attende per hello trasmesso transazioni toobe riprodotti e commit in hello secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="6666f-261">**sp_wait_for_database_copy_sync** tooa con ambito collegamento di copia continua specifico.</span><span class="sxs-lookup"><span data-stu-id="6666f-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="6666f-262">Qualsiasi utente con il database primario toohello hello connessione diritti può chiamare questa procedura.</span><span class="sxs-lookup"><span data-stu-id="6666f-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="6666f-263">**sp_wait_for_database_copy_sync** impedirà la perdita di dati dopo il failover, ma non garantirà la sincronizzazione completa per l'accesso in lettura.</span><span class="sxs-lookup"><span data-stu-id="6666f-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="6666f-264">Hello ritardo causato da un **sp_wait_for_database_copy_sync** chiamata di routine può essere significativo e dipende dalla dimensione hello hello del log delle transazioni in fase di hello della chiamata di hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="6666f-265">Gestione a livello di codice dei gruppi di failover e della replica geografica attiva</span><span class="sxs-lookup"><span data-stu-id="6666f-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="6666f-266">Come descritto in precedenza, i gruppi con failover automatico (in anteprima) e attiva la replica geografica può essere gestita a livello di codice con Azure PowerShell e hello API REST.</span><span class="sxs-lookup"><span data-stu-id="6666f-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="6666f-267">Hello le tabelle seguenti vengono descritti i set di hello di comandi disponibili.</span><span class="sxs-lookup"><span data-stu-id="6666f-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="6666f-268">**API di gestione risorse di Azure e la sicurezza basata sui ruoli**: replica geografica attiva include un set di API di gestione risorse di Azure per la gestione, tra cui hello [API REST di Azure SQL Database](https://docs.microsoft.com/rest/api/sql/) e [Azure I cmdlet di PowerShell](https://docs.microsoft.com/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="6666f-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="6666f-269">Queste API richiedono l'uso di hello di gruppi di risorse e supportano la sicurezza basata sui ruoli (RBAC).</span><span class="sxs-lookup"><span data-stu-id="6666f-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="6666f-270">Per ulteriori informazioni su come tooimplement accedere ai ruoli, vedere [gestire il controllo di accesso](../active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="6666f-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="6666f-271">Molte nuove funzionalità della replica geografica attiva sono supportate solo con [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) e in particolare con le [API REST SQL di Azure](https://msdn.microsoft.com/library/azure/mt163571.aspx) e con i [cmdlet di PowerShell per il database SQL di Azure](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span><span class="sxs-lookup"><span data-stu-id="6666f-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="6666f-272">Hello [API REST (classica)](https://msdn.microsoft.com/library/azure/dn505719.aspx) e [cmdlet del Database di SQL Azure (versione classica)](https://msdn.microsoft.com/library/azure/dn546723.aspx) sono supportate per compatibilità con le versioni precedenti, pertanto l'uso di hello API basate su Gestione risorse di Azure sono consigliate.</span><span class="sxs-lookup"><span data-stu-id="6666f-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="6666f-273">Gestire SQL database failover utilizzando Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="6666f-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="6666f-274">Comando</span><span class="sxs-lookup"><span data-stu-id="6666f-274">Command</span></span> | <span data-ttu-id="6666f-275">Descrizione</span><span class="sxs-lookup"><span data-stu-id="6666f-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="6666f-276">ALTER DATABASE (database SQL di Azure)</span><span class="sxs-lookup"><span data-stu-id="6666f-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="6666f-277">Utilizzare Aggiungi secondario ON SERVER argomento toocreate un database secondario per un database esistente e avvia la replica dei dati</span><span class="sxs-lookup"><span data-stu-id="6666f-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="6666f-278">ALTER DATABASE (database SQL di Azure)</span><span class="sxs-lookup"><span data-stu-id="6666f-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="6666f-279">Utilizzare il FAILOVER o FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch failover primario tooinitiate toobe database secondario</span><span class="sxs-lookup"><span data-stu-id="6666f-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="6666f-280">ALTER DATABASE (database SQL di Azure)</span><span class="sxs-lookup"><span data-stu-id="6666f-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="6666f-281">Utilizzare tooterminate rimuovere ON SERVER secondario una replica dei dati tra un Database SQL e il database secondario specificato hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="6666f-282">sys.geo_replication_links (database SQL di Azure)</span><span class="sxs-lookup"><span data-stu-id="6666f-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="6666f-283">Restituisce informazioni su tutti i collegamenti di replica esistente per ogni database nel server logico di Database SQL di Azure hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="6666f-284">sys.dm_geo_replication_link_status (database SQL di Azure)</span><span class="sxs-lookup"><span data-stu-id="6666f-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="6666f-285">Ottiene hello ora dell'ultima replica, l'ultimo intervallo di replica e altre informazioni sul collegamento di replica hello per un determinato database SQL.</span><span class="sxs-lookup"><span data-stu-id="6666f-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="6666f-286">sys.dm_operation_status (database SQL di Azure)</span><span class="sxs-lookup"><span data-stu-id="6666f-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="6666f-287">Mostra lo stato di hello per tutte le operazioni di database, incluso lo stato di hello hello dei collegamenti di replica.</span><span class="sxs-lookup"><span data-stu-id="6666f-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="6666f-288">sp_wait_for_database_copy_sync (database SQL di Azure)</span><span class="sxs-lookup"><span data-stu-id="6666f-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="6666f-289">causa toowait applicazione hello fino a quando tutte le transazioni completate vengono replicate e riconosciute dal database secondario attivo hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="6666f-290">Gestire SQL database failover utilizzando PowerShell</span><span class="sxs-lookup"><span data-stu-id="6666f-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="6666f-291">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="6666f-291">Cmdlet</span></span> | <span data-ttu-id="6666f-292">Descrizione</span><span class="sxs-lookup"><span data-stu-id="6666f-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="6666f-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="6666f-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="6666f-294">Ottiene uno o più database.</span><span class="sxs-lookup"><span data-stu-id="6666f-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="6666f-295">New-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="6666f-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="6666f-296">Crea un database secondario per un database esistente e avvia la replica dei dati.</span><span class="sxs-lookup"><span data-stu-id="6666f-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="6666f-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="6666f-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="6666f-298">Attiva un failover primario tooinitiate toobe di database secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="6666f-299">Remove-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="6666f-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="6666f-300">Termina la replica dei dati tra un Database SQL e il database secondario specificato hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="6666f-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="6666f-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="6666f-302">Ottiene i collegamenti di replica geografica hello tra un Database SQL di Azure e un gruppo di risorse o SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6666f-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="6666f-303">New-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6666f-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="6666f-304">Questo comando crea un gruppo di failover e lo registra nei server primario e secondario</span><span class="sxs-lookup"><span data-stu-id="6666f-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="6666f-305">Remove-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6666f-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="6666f-306">Rimuove il gruppo di failover di hello dal server hello ed Elimina tutti i database secondari inclusi hello gruppo</span><span class="sxs-lookup"><span data-stu-id="6666f-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="6666f-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6666f-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="6666f-308">Configurazione del gruppo recupera hello failover</span><span class="sxs-lookup"><span data-stu-id="6666f-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="6666f-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6666f-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="6666f-310">Modifica configurazione hello hello del gruppo del failover</span><span class="sxs-lookup"><span data-stu-id="6666f-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="6666f-311">Switch-AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="6666f-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="6666f-312">Attiva il failover del server secondario toohello hello failover gruppo</span><span class="sxs-lookup"><span data-stu-id="6666f-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="6666f-313">Per gli script di esempio, vedere [Configurare la replica geografica attiva per un database SQL di Azure singolo usando PowerShell](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configurare la replica geografica attiva per un database SQL di Azure in pool con PowerShell](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md) e [Configure and failover a failover group for a single database (preview) (Configurare un gruppo di failover ed eseguirne il failover per un singolo database (anteprima))] (scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span><span class="sxs-lookup"><span data-stu-id="6666f-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="6666f-314">Failover del database SQL tramite hello API REST di gestione</span><span class="sxs-lookup"><span data-stu-id="6666f-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="6666f-315">API</span><span class="sxs-lookup"><span data-stu-id="6666f-315">API</span></span> | <span data-ttu-id="6666f-316">Descrizione</span><span class="sxs-lookup"><span data-stu-id="6666f-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="6666f-317">Creare o aggiornare database (createMode=Restore)</span><span class="sxs-lookup"><span data-stu-id="6666f-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="6666f-318">Crea, aggiorna o ripristina un database primario o secondario.</span><span class="sxs-lookup"><span data-stu-id="6666f-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="6666f-319">Get Create or Update Database Status</span><span class="sxs-lookup"><span data-stu-id="6666f-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="6666f-320">Restituisce lo stato di hello durante un'operazione di creazione.</span><span class="sxs-lookup"><span data-stu-id="6666f-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="6666f-321">Impostazione del database secondario come primario (failover pianificato)</span><span class="sxs-lookup"><span data-stu-id="6666f-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="6666f-322">Imposta il database di replica è primario eseguendo il failover dal database di replica primaria corrente hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="6666f-323">Set Secondary Database as Primary (Unplanned Failover)</span><span class="sxs-lookup"><span data-stu-id="6666f-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="6666f-324">Imposta il database di replica è primario eseguendo il failover dal database di replica primaria corrente hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="6666f-325">Questa operazione potrebbe comportare la perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="6666f-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="6666f-326">Get Replication Link</span><span class="sxs-lookup"><span data-stu-id="6666f-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="6666f-327">Ottiene tutti i collegamenti di replica specifici per un database SQL specificato in una relazione di replica geografica.</span><span class="sxs-lookup"><span data-stu-id="6666f-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="6666f-328">Recupera le informazioni di hello visibili nella vista del catalogo sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="6666f-329">Replication Links - List By Database</span><span class="sxs-lookup"><span data-stu-id="6666f-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="6666f-330">Ottiene tutti i collegamenti di replica per un database SQL specificato in una relazione di replica geografica.</span><span class="sxs-lookup"><span data-stu-id="6666f-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="6666f-331">Recupera le informazioni di hello visibili nella vista del catalogo sys.geo_replication_links hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="6666f-332">Delete Replication Link</span><span class="sxs-lookup"><span data-stu-id="6666f-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="6666f-333">Elimina un collegamento alla replica del database.</span><span class="sxs-lookup"><span data-stu-id="6666f-333">Deletes a database replication link.</span></span> <span data-ttu-id="6666f-334">Non può essere eseguito durante il failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="6666f-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="6666f-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="6666f-336">Crea o aggiorna un gruppo di failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="6666f-337">Delete Failover Group</span><span class="sxs-lookup"><span data-stu-id="6666f-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="6666f-338">Rimuove il gruppo di failover di hello server hello</span><span class="sxs-lookup"><span data-stu-id="6666f-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="6666f-339">Failover (Planned)</span><span class="sxs-lookup"><span data-stu-id="6666f-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="6666f-340">Viene eseguito il failover dal server di toothis server primario corrente hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="6666f-341">Force Failover Allow Data Loss</span><span class="sxs-lookup"><span data-stu-id="6666f-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="6666f-342">ails failover dal server di toothis server primario corrente hello.</span><span class="sxs-lookup"><span data-stu-id="6666f-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="6666f-343">Questa operazione potrebbe comportare la perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="6666f-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="6666f-344">Get Failover Group</span><span class="sxs-lookup"><span data-stu-id="6666f-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="6666f-345">Crea un gruppo di failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="6666f-346">List Failover Groups By Server</span><span class="sxs-lookup"><span data-stu-id="6666f-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="6666f-347">Elenca i gruppi di failover hello in un server.</span><span class="sxs-lookup"><span data-stu-id="6666f-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="6666f-348">Update Failover Group</span><span class="sxs-lookup"><span data-stu-id="6666f-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="6666f-349">Aggiorna un gruppo di failover.</span><span class="sxs-lookup"><span data-stu-id="6666f-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="6666f-350">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="6666f-350">Next steps</span></span>
* <span data-ttu-id="6666f-351">Per script di esempio, vedere:</span><span class="sxs-lookup"><span data-stu-id="6666f-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="6666f-352">Configurare un database singolo ed eseguirne il failover usando la replica geografica attiva</span><span class="sxs-lookup"><span data-stu-id="6666f-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="6666f-353">Configurare un database in pool ed eseguirne il failover usando la replica geografica attiva</span><span class="sxs-lookup"><span data-stu-id="6666f-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - <span data-ttu-id="6666f-354">[Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md) (Configurare ed eseguire il failover di un gruppo di failover per un singolo database (anteprima))</span><span class="sxs-lookup"><span data-stu-id="6666f-354">[Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)</span></span>
* <span data-ttu-id="6666f-355">Per la panoramica e gli scenari della continuità aziendale, vedere [Continuità aziendale del database SQL di Azure](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="6666f-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="6666f-356">toolearn sui backup di Database di SQL Azure automatizzati, vedere [backup automatici di Database SQL](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="6666f-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="6666f-357">toolearn sull'utilizzo di backup automatico per il ripristino, vedere [ripristinare un database dai backup avviate dal servizio hello](sql-database-recovery-using-backups.md).</span><span class="sxs-lookup"><span data-stu-id="6666f-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="6666f-358">toolearn sui requisiti di autenticazione per un nuovo server primario e il database, vedere [la protezione del Database di SQL dopo il ripristino di emergenza](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="6666f-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

