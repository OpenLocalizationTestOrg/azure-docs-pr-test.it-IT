---
title: aaaMy primo flusso di lavoro PowerShell runbook in automazione di Azure | Documenti Microsoft
description: Esercitazione viene illustrata la creazione di hello, test e la pubblicazione di un runbook di testo semplice con flusso di lavoro PowerShell.
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: PowerShell flusso di lavoro, esempi di flusso di lavoro PowerShell, flusso di lavoro PowerShell
ms.assetid: 0002d7f7-e2b5-46e3-b5eb-4596b84fd526
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;bwren
ms.openlocfilehash: b5a34d363ef4865878f3f68119833367b5280f83
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="my-first-powershell-workflow-runbook"></a><span data-ttu-id="d4540-104">Il primo runbook del flusso di lavoro PowerShell</span><span class="sxs-lookup"><span data-stu-id="d4540-104">My first PowerShell Workflow runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="d4540-105">Grafico</span><span class="sxs-lookup"><span data-stu-id="d4540-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="d4540-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="d4540-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="d4540-107">Flusso di lavoro PowerShell</span><span class="sxs-lookup"><span data-stu-id="d4540-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="d4540-108">In questa esercitazione viene illustrata la creazione hello di un [runbook del flusso di lavoro di PowerShell](automation-runbook-types.md#powershell-workflow-runbooks) in automazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d4540-108">This tutorial walks you through hello creation of a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) in Azure Automation.</span></span> <span data-ttu-id="d4540-109">Si inizia con un runbook semplice test e pubblicazione durante la spiegazione delle modalità tootrack hello lo stato di processo del runbook hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-109">We start with a simple runbook that we test and publish while explaining how tootrack hello status of hello runbook job.</span></span> <span data-ttu-id="d4540-110">È modificare runbook hello tooactually Gestione risorse di Azure, in questo caso, avviare una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="d4540-110">Then we modify hello runbook tooactually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="d4540-111">Infine, si rende hello runbook più affidabile mediante l'aggiunta di parametri del runbook.</span><span class="sxs-lookup"><span data-stu-id="d4540-111">Lastly we make hello runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="d4540-112">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="d4540-112">Prerequisites</span></span>
<span data-ttu-id="d4540-113">toocomplete questa esercitazione, è necessario hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="d4540-113">toocomplete this tutorial, you will need hello following:</span></span>

* <span data-ttu-id="d4540-114">Sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d4540-114">Azure subscription.</span></span> <span data-ttu-id="d4540-115">Se non si ha ancora una sottoscrizione, è possibile [attivare i vantaggi della sottoscrizione MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) oppure <a href="/pricing/free-account/" target="_blank">[iscriversi per ottenere un account gratuito](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="d4540-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="d4540-116">[Account di automazione](automation-sec-configure-azure-runas-account.md) toohold hello runbook ed eseguire l'autenticazione tooAzure risorse.</span><span class="sxs-lookup"><span data-stu-id="d4540-116">[Automation account](automation-sec-configure-azure-runas-account.md) toohold hello runbook and authenticate tooAzure resources.</span></span>  <span data-ttu-id="d4540-117">Questo account deve disporre dell'autorizzazione toostart e arrestare la macchina virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-117">This account must have permission toostart and stop hello virtual machine.</span></span>
* <span data-ttu-id="d4540-118">Macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="d4540-118">An Azure virtual machine.</span></span> <span data-ttu-id="d4540-119">La macchina virtuale viene arrestata e avviata, quindi non deve essere una macchina virtuale di produzione.</span><span class="sxs-lookup"><span data-stu-id="d4540-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="d4540-120">Passaggio 1: Creare nuovo runbook</span><span class="sxs-lookup"><span data-stu-id="d4540-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="d4540-121">Si inizierà creando un runbook semplice che restituisce testo hello *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="d4540-121">We'll start by creating a simple runbook that outputs hello text *Hello World*.</span></span>

1. <span data-ttu-id="d4540-122">Nel portale di Azure hello, aprire l'account di automazione.</span><span class="sxs-lookup"><span data-stu-id="d4540-122">In hello Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="d4540-123">pagina account di automazione Hello offre una rapida panoramica delle risorse hello in questo account.</span><span class="sxs-lookup"><span data-stu-id="d4540-123">hello Automation account page gives you a quick view of hello resources in this account.</span></span> <span data-ttu-id="d4540-124">Dovrebbero essere già disponibili alcuni asset.</span><span class="sxs-lookup"><span data-stu-id="d4540-124">You should already have some assets.</span></span> <span data-ttu-id="d4540-125">La maggior parte di questi sono i moduli di hello che vengono inclusi automaticamente in un nuovo account di automazione.</span><span class="sxs-lookup"><span data-stu-id="d4540-125">Most of those are hello modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="d4540-126">È inoltre necessario avere asset delle credenziali hello menzionato in hello [prerequisiti](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="d4540-126">You should also have hello Credential asset that's mentioned in hello [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="d4540-127">Fare clic su hello **runbook** riquadro tooopen hello elenco di runbook.</span><span class="sxs-lookup"><span data-stu-id="d4540-127">Click on hello **Runbooks** tile tooopen hello list of runbooks.</span></span><br><br> <span data-ttu-id="d4540-128">![Controllo Runbook](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-128">![Runbooks control](media/automation-first-runbook-textual/runbooks-control-tiles.png)</span></span>
3. <span data-ttu-id="d4540-129">Creare un nuovo runbook facendo clic su hello **aggiungere un runbook** pulsante e quindi **creare un nuovo runbook**.</span><span class="sxs-lookup"><span data-stu-id="d4540-129">Create a new runbook by clicking on hello **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="d4540-130">Nome di hello runbook hello *MyFirstRunbook-flusso di lavoro*.</span><span class="sxs-lookup"><span data-stu-id="d4540-130">Give hello runbook hello name *MyFirstRunbook-Workflow*.</span></span>
5. <span data-ttu-id="d4540-131">In questo caso, verrà toocreate un [runbook del flusso di lavoro di PowerShell](automation-runbook-types.md#powershell-workflow-runbooks) pertanto selezionare **flusso di lavoro Powershell** per **tipo Runbook**.</span><span class="sxs-lookup"><span data-stu-id="d4540-131">In this case, we're going toocreate a [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) so select **Powershell Workflow** for **Runbook type**.</span></span><br><br> <span data-ttu-id="d4540-132">![Nuovo runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-132">![New runbook](media/automation-first-runbook-textual/new-runbook-properties.png)</span></span>
6. <span data-ttu-id="d4540-133">Fare clic su **crea** toocreate hello runbook ed editor di testo hello aperto.</span><span class="sxs-lookup"><span data-stu-id="d4540-133">Click **Create** toocreate hello runbook and open hello textual editor.</span></span>

## <a name="step-2---add-code-toohello-runbook"></a><span data-ttu-id="d4540-134">Passaggio 2: aggiungere codice toohello runbook</span><span class="sxs-lookup"><span data-stu-id="d4540-134">Step 2 - Add code toohello runbook</span></span>
<span data-ttu-id="d4540-135">È possibile scrivere codice di tipo direttamente nel runbook hello, o è possibile selezionare i cmdlet, i runbook e le risorse da hello controllo della raccolta e li aggiunto toohello runbook con i parametri correlati.</span><span class="sxs-lookup"><span data-stu-id="d4540-135">You can either type code directly into hello runbook, or you can select cmdlets, runbooks, and assets from hello Library control and have them added toohello runbook with any related parameters.</span></span> <span data-ttu-id="d4540-136">Questa procedura dettagliata, si sarà digitare direttamente nel runbook hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-136">For this walkthrough, we'll type directly into hello runbook.</span></span>

1. <span data-ttu-id="d4540-137">Il runbook è attualmente vuoto con solo hello necessario *flusso di lavoro* (parola chiave), il nome di hello del nostro runbook e le parentesi graffe hello che verranno encase intero flusso di lavoro hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-137">Our runbook is currently empty with only hello required *workflow* keyword, hello name of our runbook, and hello braces that will encase hello entire workflow.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   }
   ```
2. <span data-ttu-id="d4540-138">Digitare *Write-Output "Hello World".*</span><span class="sxs-lookup"><span data-stu-id="d4540-138">Type *Write-Output "Hello World."*</span></span> <span data-ttu-id="d4540-139">tra parentesi graffe hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-139">between hello braces.</span></span>

   ```
   Workflow MyFirstRunbook-Workflow
   {
   Write-Output "Hello World"
   }
   ```
3. <span data-ttu-id="d4540-140">Salvare il runbook hello facendo **salvare**.</span><span class="sxs-lookup"><span data-stu-id="d4540-140">Save hello runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="d4540-141">![Salvataggio del runbook](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-141">![Save runbook](media/automation-first-runbook-textual/automation-runbook-edit-controls-save.png)</span></span>

## <a name="step-3---test-hello-runbook"></a><span data-ttu-id="d4540-142">Passaggio 3: Test hello runbook</span><span class="sxs-lookup"><span data-stu-id="d4540-142">Step 3 - Test hello runbook</span></span>
<span data-ttu-id="d4540-143">Prima Pubblichiamo toomake runbook hello è disponibile nell'ambiente di produzione, è necessario tootest è toomake assicurarsi che funzioni correttamente.</span><span class="sxs-lookup"><span data-stu-id="d4540-143">Before we publish hello runbook toomake it available in production, we want tootest it toomake sure that it works properly.</span></span> <span data-ttu-id="d4540-144">Quando si testa un runbook, è necessario eseguire la versione **Bozza** e visualizzarne l'output in modo interattivo.</span><span class="sxs-lookup"><span data-stu-id="d4540-144">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="d4540-145">Fare clic su **riquadro Test** riquadro Test di tooopen hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-145">Click **Test pane** tooopen hello Test pane.</span></span><br><br> <span data-ttu-id="d4540-146">![Riquadro Test](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-146">![Test pane](media/automation-first-runbook-textual/automation-runbook-edit-controls-test.png)</span></span>
2. <span data-ttu-id="d4540-147">Fare clic su **avviare** test hello toostart.</span><span class="sxs-lookup"><span data-stu-id="d4540-147">Click **Start** toostart hello test.</span></span> <span data-ttu-id="d4540-148">Deve trattarsi di opzione hello solo abilitato.</span><span class="sxs-lookup"><span data-stu-id="d4540-148">This should be hello only enabled option.</span></span>
3. <span data-ttu-id="d4540-149">Viene creato un [processo del runbook](automation-runbook-execution.md) e il relativo stato viene visualizzato.</span><span class="sxs-lookup"><span data-stu-id="d4540-149">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="d4540-150">lo stato del processo Hello verrà avviato come *in coda* che indica che è in attesa per un runbook worker in hello cloud toocome disponibili.</span><span class="sxs-lookup"><span data-stu-id="d4540-150">hello job status will start as *Queued* indicating that it is waiting for a runbook worker in hello cloud toocome available.</span></span> <span data-ttu-id="d4540-151">Verranno quindi spostati troppo*iniziale* quando un thread di lavoro attestazioni processo hello e quindi *esecuzione* quando runbook hello effettivamente avviata l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="d4540-151">It will then move too*Starting* when a worker claims hello job, and then *Running* when hello runbook actually starts running.</span></span>  
4. <span data-ttu-id="d4540-152">Al termine del processo del runbook hello, viene visualizzato l'output.</span><span class="sxs-lookup"><span data-stu-id="d4540-152">When hello runbook job completes, its output is displayed.</span></span> <span data-ttu-id="d4540-153">In questo caso, dovrebbe essere visualizzato *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="d4540-153">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="d4540-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-154">![Hello World](media/automation-first-runbook-textual/test-output-hello-world.png)</span></span>
5. <span data-ttu-id="d4540-155">Chiudere l'area di disegno hello Test riquadro tooreturn toohello.</span><span class="sxs-lookup"><span data-stu-id="d4540-155">Close hello Test pane tooreturn toohello canvas.</span></span>

## <a name="step-4---publish-and-start-hello-runbook"></a><span data-ttu-id="d4540-156">Passaggio 4: pubblicare e avviare runbook hello</span><span class="sxs-lookup"><span data-stu-id="d4540-156">Step 4 - Publish and start hello runbook</span></span>
<span data-ttu-id="d4540-157">runbook Hello che abbiamo appena creato è ancora in modalità bozza.</span><span class="sxs-lookup"><span data-stu-id="d4540-157">hello runbook that we just created is still in Draft mode.</span></span> <span data-ttu-id="d4540-158">È necessario toopublish prima di poterlo eseguire nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="d4540-158">We need toopublish it before we can run it in production.</span></span> <span data-ttu-id="d4540-159">Quando si pubblica un runbook, con la versione bozza hello sovrascrivere versione hello già pubblicata.</span><span class="sxs-lookup"><span data-stu-id="d4540-159">When you publish a runbook, you overwrite hello existing Published version with hello Draft version.</span></span> <span data-ttu-id="d4540-160">In questo caso, non abbiamo una versione pubblicata ancora poiché runbook hello appena creato.</span><span class="sxs-lookup"><span data-stu-id="d4540-160">In our case, we don't have a Published version yet because we just created hello runbook.</span></span>

1. <span data-ttu-id="d4540-161">Fare clic su **pubblica** toopublish hello runbook e quindi **Sì** quando richiesto.</span><span class="sxs-lookup"><span data-stu-id="d4540-161">Click **Publish** toopublish hello runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="d4540-162">![Pubblica](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-162">![Publish](media/automation-first-runbook-textual/automation-runbook-edit-controls-publish.png)</span></span>
2. <span data-ttu-id="d4540-163">Se si scorre tooview sinistro hello runbook hello **runbook** riquadro a questo punto, verrà visualizzato un **stato di creazione** di **pubblicato**.</span><span class="sxs-lookup"><span data-stu-id="d4540-163">If you scroll left tooview hello runbook in hello **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="d4540-164">Riquadro destro tooview hello toohello indietro di scorrimento per **MyFirstRunbook-flusso di lavoro**.</span><span class="sxs-lookup"><span data-stu-id="d4540-164">Scroll back toohello right tooview hello pane for **MyFirstRunbook-Workflow**.</span></span>  
   <span data-ttu-id="d4540-165">Hello opzioni in alto hello consentono toostart hello runbook, pianificarlo toostart in un momento nel futuro hello o creare un [webhook](automation-webhooks.md) in modo da poter essere avviato tramite una chiamata HTTP.</span><span class="sxs-lookup"><span data-stu-id="d4540-165">hello options across hello top allow us toostart hello runbook, schedule it toostart at some time in hello future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="d4540-166">È sufficiente toostart hello runbook, fare clic sul **avviare** e quindi **Sì** quando richiesto.</span><span class="sxs-lookup"><span data-stu-id="d4540-166">We just want toostart hello runbook so click **Start** and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="d4540-167">![Avvia runbook](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-167">![Start runbook](media/automation-first-runbook-textual/automation-runbook-controls-start.png)</span></span>
5. <span data-ttu-id="d4540-168">Il riquadro di un processo viene aperto per il processo di runbook hello che abbiamo appena creato.</span><span class="sxs-lookup"><span data-stu-id="d4540-168">A job pane is opened for hello runbook job that we just created.</span></span> <span data-ttu-id="d4540-169">È possibile chiudere questo riquadro, ma in questo caso si sarà lasciarla aperta in modo è possibile controllare lo stato di avanzamento del processo di hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-169">We can close this pane, but in this case we'll leave it open so we can watch hello job's progress.</span></span>
6. <span data-ttu-id="d4540-170">viene visualizzato lo stato del processo Hello in **riepilogo** e corrispondenze hello gli Stati che abbiamo visto quando è stato testato hello runbook.</span><span class="sxs-lookup"><span data-stu-id="d4540-170">hello job status is shown in **Job Summary** and matches hello statuses that we saw when we tested hello runbook.</span></span><br><br> <span data-ttu-id="d4540-171">![Riepilogo dei processi](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-171">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-jobsummary.png)</span></span>
7. <span data-ttu-id="d4540-172">Una volta hello Mostra lo stato runbook *completato*, fare clic su **Output**.</span><span class="sxs-lookup"><span data-stu-id="d4540-172">Once hello runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="d4540-173">viene aperto il riquadro di Output di Hello e possiamo vedere nostri *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="d4540-173">hello Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="d4540-174">![Riepilogo dei processi](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-174">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-outputtile.png)</span></span>  
8. <span data-ttu-id="d4540-175">Riquadro di Output di hello Chiudi.</span><span class="sxs-lookup"><span data-stu-id="d4540-175">Close hello Output pane.</span></span>
9. <span data-ttu-id="d4540-176">Fare clic su **tutti i log** tooopen hello flussi riquadro processo del runbook hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-176">Click **All Logs** tooopen hello Streams pane for hello runbook job.</span></span> <span data-ttu-id="d4540-177">Solo dovremmo vedere *Hello World* nell'output di hello flusso, tuttavia questa operazione consente di visualizzare i flussi per un processo del runbook, ad esempio dettagliati e di errore se runbook hello scrive toothem.</span><span class="sxs-lookup"><span data-stu-id="d4540-177">We should only see *Hello World* in hello output stream, but this can show other streams for a runbook job such as Verbose and Error if hello runbook writes toothem.</span></span><br><br> <span data-ttu-id="d4540-178">![Riepilogo dei processi](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-178">![Job Summary](media/automation-first-runbook-textual/job-pane-status-blade-alllogstile.png)</span></span>
10. <span data-ttu-id="d4540-179">Chiudere il riquadro di flussi hello e hello processo tooreturn toohello MyFirstRunbook un riquadro.</span><span class="sxs-lookup"><span data-stu-id="d4540-179">Close hello Streams pane and hello Job pane tooreturn toohello MyFirstRunbook pane.</span></span>
11. <span data-ttu-id="d4540-180">Fare clic su **processi** riquadro processi di hello tooopen per questo runbook.</span><span class="sxs-lookup"><span data-stu-id="d4540-180">Click **Jobs** tooopen hello Jobs pane for this runbook.</span></span> <span data-ttu-id="d4540-181">Elenca tutti i processi di hello creati da questo runbook.</span><span class="sxs-lookup"><span data-stu-id="d4540-181">This lists all of hello jobs created by this runbook.</span></span> <span data-ttu-id="d4540-182">Dovremmo vedere solo un processo elencato in quanto è solo esecuzione hello processo una volta.</span><span class="sxs-lookup"><span data-stu-id="d4540-182">We should only see one job listed since we only ran hello job once.</span></span><br><br> <span data-ttu-id="d4540-183">![Processi](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-183">![Jobs](media/automation-first-runbook-textual/runbook-control-job-tile.png)</span></span>
12. <span data-ttu-id="d4540-184">È possibile fare clic su questo hello tooopen processo stesso riquadro processo che abbiamo visto quando è stato avviato il runbook hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-184">You can click on this job tooopen hello same Job pane that we viewed when we started hello runbook.</span></span> <span data-ttu-id="d4540-185">In questo modo si toogo indietro nel tempo e visualizzarne i dettagli di hello di qualsiasi processo che è stato creato per un runbook specifico.</span><span class="sxs-lookup"><span data-stu-id="d4540-185">This allows you toogo back in time and view hello details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-toomanage-azure-resources"></a><span data-ttu-id="d4540-186">Passaggio 5: aggiungere l'autenticazione toomanage risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="d4540-186">Step 5 - Add authentication toomanage Azure resources</span></span>
<span data-ttu-id="d4540-187">Il runbook è stato testato e pubblicato, ma finora non esegue alcuna attività utile.</span><span class="sxs-lookup"><span data-stu-id="d4540-187">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="d4540-188">Vogliamo toohave Gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="d4540-188">We want toohave it manage Azure resources.</span></span> <span data-ttu-id="d4540-189">Non sarà in grado di toodo che anche se a meno che non è necessario autenticare utilizzando credenziali hello cui hello tooin [prerequisiti](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="d4540-189">It won't be able toodo that though unless we have it authenticate using hello credentials that are referred tooin hello [prerequisites](#prerequisites).</span></span> <span data-ttu-id="d4540-190">Facciamo con hello **Aggiungi AzureRMAccount** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="d4540-190">We do that with hello **Add-AzureRMAccount** cmdlet.</span></span>

1. <span data-ttu-id="d4540-191">Editor di testo hello aprire facendo clic su **modifica** nel riquadro di hello MyFirstRunbook-flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="d4540-191">Open hello textual editor by clicking **Edit** on hello MyFirstRunbook-Workflow pane.</span></span><br><br> <span data-ttu-id="d4540-192">![Modificare il runbook](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-192">![Edit runbook](media/automation-first-runbook-textual/automation-runbook-controls-edit.png)</span></span>
2. <span data-ttu-id="d4540-193">Non è necessario hello **Write-Output** più di riga, faccio, quindi eliminarlo.</span><span class="sxs-lookup"><span data-stu-id="d4540-193">We don't need hello **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="d4540-194">Posizionare il cursore di hello in una riga vuota tra parentesi graffe hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-194">Position hello cursor on a blank line between hello braces.</span></span>
4. <span data-ttu-id="d4540-195">Digitare o copiare e incollare hello seguente di codice che consente di gestire l'autenticazione con l'account RunAs automazione hello:</span><span class="sxs-lookup"><span data-stu-id="d4540-195">Type or copy and paste hello following code that will handle hello authentication with your Automation Run As account:</span></span>

   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
5. <span data-ttu-id="d4540-196">Fare clic su **riquadro Test** in modo che sia possibile testare il runbook hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-196">Click **Test pane** so that we can test hello runbook.</span></span>
6. <span data-ttu-id="d4540-197">Fare clic su **avviare** test hello toostart.</span><span class="sxs-lookup"><span data-stu-id="d4540-197">Click **Start** toostart hello test.</span></span> <span data-ttu-id="d4540-198">Una volta che è stata completata, si dovrebbe ricevere toohello simili di output seguente, la visualizzazione di informazioni di base dal proprio account.</span><span class="sxs-lookup"><span data-stu-id="d4540-198">Once it completes, you should receive output similar toohello following, displaying basic information from your account.</span></span> <span data-ttu-id="d4540-199">Questo conferma che credenziali hello sono valido.</span><span class="sxs-lookup"><span data-stu-id="d4540-199">This confirms that hello credential is valid.</span></span><br><br> <span data-ttu-id="d4540-200">![Autentica](media/automation-first-runbook-textual/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-200">![Authenticate](media/automation-first-runbook-textual/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-toostart-a-virtual-machine"></a><span data-ttu-id="d4540-201">Passaggio 6: aggiungere codice toostart una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="d4540-201">Step 6 - Add code toostart a virtual machine</span></span>
<span data-ttu-id="d4540-202">Ora che il runbook esegue l'autenticazione tooour sottoscrizione di Azure, è possibile gestire le risorse.</span><span class="sxs-lookup"><span data-stu-id="d4540-202">Now that our runbook is authenticating tooour Azure subscription, we can manage resources.</span></span> <span data-ttu-id="d4540-203">Aggiungere un toostart comando una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d4540-203">We add a command toostart a virtual machine.</span></span> <span data-ttu-id="d4540-204">È possibile scegliere qualsiasi macchina virtuale nella sottoscrizione di Azure e per il momento sarà hardcoded tale nome nell'hello runbook.</span><span class="sxs-lookup"><span data-stu-id="d4540-204">You can pick any virtual machine in your Azure subscription, and for now we will be hardcoding that name in hello runbook.</span></span>

1. <span data-ttu-id="d4540-205">Dopo aver *Aggiungi AzureRmAccount*, tipo *inizio AzureRmVM-Name 'VMName' - ResourceGroupName 'NameofResourceGroup'* fornendo hello nome e il nome di gruppo di risorse di hello toostart di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d4540-205">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing hello name and Resource Group name of hello virtual machine toostart.</span></span>  

   ```
   workflow MyFirstRunbook-Workflow
   {
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   }
   ```
2. <span data-ttu-id="d4540-206">Salvare il runbook hello e quindi fare clic su **riquadro Test** in modo che è possibile eseguirne il test.</span><span class="sxs-lookup"><span data-stu-id="d4540-206">Save hello runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="d4540-207">Fare clic su **avviare** test hello toostart.</span><span class="sxs-lookup"><span data-stu-id="d4540-207">Click **Start** toostart hello test.</span></span> <span data-ttu-id="d4540-208">Una volta che è stata completata, verificare che la macchina virtuale hello è stata avviata.</span><span class="sxs-lookup"><span data-stu-id="d4540-208">Once it completes, check that hello virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-toohello-runbook"></a><span data-ttu-id="d4540-209">Passaggio 7: aggiungere un runbook toohello parametro di input</span><span class="sxs-lookup"><span data-stu-id="d4540-209">Step 7 - Add an input parameter toohello runbook</span></span>
<span data-ttu-id="d4540-210">Il runbook viene avviato attualmente hello virtuale del computer che è hardcoded hello runbook, ma sarebbe più utile se è possibile specificare macchina virtuale hello quando hello runbook viene avviato.</span><span class="sxs-lookup"><span data-stu-id="d4540-210">Our runbook currently starts hello virtual machine that we hardcoded in hello runbook, but it would be more useful if we could specify hello virtual machine when hello runbook is started.</span></span> <span data-ttu-id="d4540-211">A questo punto sarà necessario aggiungere parametri di input toohello runbook tooprovide tale funzionalità.</span><span class="sxs-lookup"><span data-stu-id="d4540-211">We will now add input parameters toohello runbook tooprovide that functionality.</span></span>

1. <span data-ttu-id="d4540-212">Aggiungere parametri per *VMName* e *ResourceGroupName* toohello runbook e utilizzare queste variabili con hello **inizio AzureRmVM** cmdlet come esempio hello seguente.</span><span class="sxs-lookup"><span data-stu-id="d4540-212">Add parameters for *VMName* and *ResourceGroupName* toohello runbook and use these variables with hello **Start-AzureRmVM** cmdlet as in hello example below.</span></span>

   ```
   workflow MyFirstRunbook-Workflow
   {
    Param(
     [string]$VMName,
     [string]$ResourceGroupName
    )  
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   }
   ```
2. <span data-ttu-id="d4540-213">Salvare il runbook hello e aprire il riquadro di Test hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-213">Save hello runbook and open hello Test pane.</span></span> <span data-ttu-id="d4540-214">Si noti che è possibile ora specificare valori per hello due variabili di input che può essere utilizzate nei test hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-214">Note that you can now provide values for hello two input variables that will be used in hello test.</span></span>
3. <span data-ttu-id="d4540-215">Riquadro Test hello Chiudi.</span><span class="sxs-lookup"><span data-stu-id="d4540-215">Close hello Test pane.</span></span>
4. <span data-ttu-id="d4540-216">Fare clic su **pubblica** la nuova versione hello toopublish di hello runbook.</span><span class="sxs-lookup"><span data-stu-id="d4540-216">Click **Publish** toopublish hello new version of hello runbook.</span></span>
5. <span data-ttu-id="d4540-217">Arrestare la macchina virtuale hello che è stato avviato nel passaggio precedente hello.</span><span class="sxs-lookup"><span data-stu-id="d4540-217">Stop hello virtual machine that you started in hello previous step.</span></span>
6. <span data-ttu-id="d4540-218">Fare clic su **avviare** toostart hello runbook.</span><span class="sxs-lookup"><span data-stu-id="d4540-218">Click **Start** toostart hello runbook.</span></span> <span data-ttu-id="d4540-219">Tipo di hello **VMName** e **ResourceGroupName** per la macchina virtuale hello che sarà toostart.</span><span class="sxs-lookup"><span data-stu-id="d4540-219">Type in hello **VMName** and **ResourceGroupName** for hello virtual machine that you're going toostart.</span></span><br><br> <span data-ttu-id="d4540-220">![Start Runbook](media/automation-first-runbook-textual/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="d4540-220">![Start Runbook](media/automation-first-runbook-textual/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="d4540-221">Al termine del processo di runbook hello, verificare che la macchina virtuale hello è stata avviata.</span><span class="sxs-lookup"><span data-stu-id="d4540-221">When hello runbook completes, check that hello virtual machine was started.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="d4540-222">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="d4540-222">Next steps</span></span>
* <span data-ttu-id="d4540-223">tooget avviato con runbook grafici, vedere [il primo runbook grafico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="d4540-223">tooget started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="d4540-224">tooget avviato con runbook PowerShell, vedere [il runbook prima di PowerShell](automation-first-runbook-textual-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="d4540-224">tooget started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="d4540-225">toolearn ulteriori informazioni sui tipi di runbook, i relativi vantaggi e limitazioni, vedere [tipi di runbook di automazione di Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="d4540-225">toolearn more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="d4540-226">Per altre informazioni sulla funzionalità di supporto degli script PowerShell, vedere il blog relativo al [supporto di script PowerShell nativi in Automazione di Azure](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="d4540-226">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>
