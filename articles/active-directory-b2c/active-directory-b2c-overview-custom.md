---
title: 'Azure Active Directory B2C: attributi personalizzati | Microsoft Docs'
description: Un argomento sui criteri personalizzati di Azure Active Directory B2C
services: active-directory-b2c
documentationcenter: 
author: parakhj
manager: krassk
editor: parakhj
ms.assetid: 1ff398a4-2079-4615-94f1-57de22c0aad6
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/04/2017
ms.author: parakhj
ms.openlocfilehash: 33f62a33ea7a3fadb6e7b045de10df25f5edbe83
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="azure-active-directory-b2c-custom-policies"></a><span data-ttu-id="fffc5-103">Azure Active Directory B2C: criteri personalizzati</span><span class="sxs-lookup"><span data-stu-id="fffc5-103">Azure Active Directory B2C: Custom policies</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

## <a name="what-are-custom-policies"></a><span data-ttu-id="fffc5-104">Definizione di criteri personalizzati</span><span class="sxs-lookup"><span data-stu-id="fffc5-104">What are custom policies?</span></span>

<span data-ttu-id="fffc5-105">I criteri personalizzati sono file di configurazione che definiscono il comportamento del tenant di Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="fffc5-105">Custom policies are configuration files that define the behavior of your Azure AD B2C tenant.</span></span> <span data-ttu-id="fffc5-106">Mentre i **criteri predefiniti** sono predefiniti nel portale di Azure Active Directory B2C per le attività di identità più comuni, i criteri personalizzati possono essere modificati completamente dallo sviluppatore di identità per completare un numero quasi illimitato di attività.</span><span class="sxs-lookup"><span data-stu-id="fffc5-106">Whereas **built-in policies** are predefined in the Azure AD B2C portal for the most common identity tasks, custom policies can be fully edited by an identity developer to complete a near unlimited number of tasks.</span></span> <span data-ttu-id="fffc5-107">Continuare a leggere per determinare se i criteri personalizzati sono corretti per lo scenario di identità personale.</span><span class="sxs-lookup"><span data-stu-id="fffc5-107">Read on to determine if custom policies are right for you and your identity scenario.</span></span>

<span data-ttu-id="fffc5-108">**La modifica dei criteri personalizzati non è adatta a tutti gli utenti.**</span><span class="sxs-lookup"><span data-stu-id="fffc5-108">**Custom policy editing is not for everyone.**</span></span> <span data-ttu-id="fffc5-109">La curva di apprendimento è complessa, il tempo di avvio è più lungo e le modifiche future ai criteri personalizzati richiedono competenze simili per poter essere mantenute.</span><span class="sxs-lookup"><span data-stu-id="fffc5-109">The learning curve is demanding, the startup time is longer, and future changes to custom policies will require similar expertise to maintain.</span></span> <span data-ttu-id="fffc5-110">I criteri predefiniti devono essere considerati attentamente per lo scenario prima di usare i criteri personalizzati.</span><span class="sxs-lookup"><span data-stu-id="fffc5-110">Built-in policies should be carefully considered first for your scenario before using custom policies.</span></span>

## <a name="comparing-built-in-policies-and-custom-policies"></a><span data-ttu-id="fffc5-111">Confronto tra criteri predefiniti e personalizzati</span><span class="sxs-lookup"><span data-stu-id="fffc5-111">Comparing built-in policies and custom policies</span></span>

| | <span data-ttu-id="fffc5-112">Criteri predefiniti</span><span class="sxs-lookup"><span data-stu-id="fffc5-112">Built-in policies</span></span> | <span data-ttu-id="fffc5-113">Criteri personalizzati</span><span class="sxs-lookup"><span data-stu-id="fffc5-113">Custom policies</span></span> |
|-|-------------------|-----------------|
|<span data-ttu-id="fffc5-114">Utenti di destinazione</span><span class="sxs-lookup"><span data-stu-id="fffc5-114">Target users</span></span> | <span data-ttu-id="fffc5-115">Tutti gli sviluppatori di app con o senza competenze di identità</span><span class="sxs-lookup"><span data-stu-id="fffc5-115">All app developers with or without identity expertise</span></span> | <span data-ttu-id="fffc5-116">Professionisti di identità: integratori di sistemi, consulenti e team di identità interni.</span><span class="sxs-lookup"><span data-stu-id="fffc5-116">Identity pros: systems integrators, consultants and in-house identity teams.</span></span> <span data-ttu-id="fffc5-117">Hanno familiarità con i flussi OpenIDConnect e comprendono i provider di identità e l'autenticazione basata sulle attestazioni</span><span class="sxs-lookup"><span data-stu-id="fffc5-117">They are comfortable with OpenIDConnect flows, and understand identity providers and claims-based authentication</span></span> |
|<span data-ttu-id="fffc5-118">Metodo di configurazione</span><span class="sxs-lookup"><span data-stu-id="fffc5-118">Configuration method</span></span> | <span data-ttu-id="fffc5-119">Portale di Azure con un'interfaccia utente intuitiva</span><span class="sxs-lookup"><span data-stu-id="fffc5-119">Azure portal with a user-friendly UI</span></span> | <span data-ttu-id="fffc5-120">Modifica diretta dei file XML e caricamento nel portale di Azure</span><span class="sxs-lookup"><span data-stu-id="fffc5-120">Directly editing XML files and then uploading to the Azure portal</span></span> |
|<span data-ttu-id="fffc5-121">Personalizzazione dell'interfaccia utente</span><span class="sxs-lookup"><span data-stu-id="fffc5-121">UI customization</span></span> | <span data-ttu-id="fffc5-122">Personalizzazione completa dell'interfaccia utente, che include il supporto HTML, CSS e jscript, che richiede il dominio personalizzato</span><span class="sxs-lookup"><span data-stu-id="fffc5-122">Full UI customization, including HTML, CSS, and jscript support(requires custom domain)</span></span><br><br><span data-ttu-id="fffc5-123">Supporto multilingue con stringhe personalizzate</span><span class="sxs-lookup"><span data-stu-id="fffc5-123">Multilanguage support with Custom strings</span></span> | <span data-ttu-id="fffc5-124">Uguale</span><span class="sxs-lookup"><span data-stu-id="fffc5-124">Same</span></span> |
| <span data-ttu-id="fffc5-125">Personalizzazione degli attributi</span><span class="sxs-lookup"><span data-stu-id="fffc5-125">Attribute customization</span></span> | <span data-ttu-id="fffc5-126">Attributi standard e personalizzati</span><span class="sxs-lookup"><span data-stu-id="fffc5-126">Standard and custom attributes</span></span> | <span data-ttu-id="fffc5-127">Uguale</span><span class="sxs-lookup"><span data-stu-id="fffc5-127">Same</span></span> |
|<span data-ttu-id="fffc5-128">Gestione delle sessioni e dei token</span><span class="sxs-lookup"><span data-stu-id="fffc5-128">Token and session management</span></span> | <span data-ttu-id="fffc5-129">Token personalizzato e opzioni di sessione multiple</span><span class="sxs-lookup"><span data-stu-id="fffc5-129">Custom token and multiple session options</span></span> | <span data-ttu-id="fffc5-130">Uguale</span><span class="sxs-lookup"><span data-stu-id="fffc5-130">Same</span></span> |
|<span data-ttu-id="fffc5-131">Provider di identità</span><span class="sxs-lookup"><span data-stu-id="fffc5-131">Identity Providers</span></span>| <span data-ttu-id="fffc5-132">**Oggi**: provider social, predefinito, locale</span><span class="sxs-lookup"><span data-stu-id="fffc5-132">**Today**: predefined local, social provider</span></span><br><br><span data-ttu-id="fffc5-133">**Futuro**: OIDC, SAML, OAuth basati su standard</span><span class="sxs-lookup"><span data-stu-id="fffc5-133">**Future**: Standards-based OIDC, SAML, OAuth</span></span> | <span data-ttu-id="fffc5-134">**Oggi**: OIDC, SAML, OAuth basati su standard</span><span class="sxs-lookup"><span data-stu-id="fffc5-134">**Today**: Standards-based OIDC, OAUTH, SAML</span></span><br><br><span data-ttu-id="fffc5-135">**Futuro**: WsFed</span><span class="sxs-lookup"><span data-stu-id="fffc5-135">**Future**: WsFed</span></span> |
|<span data-ttu-id="fffc5-136">Attività relative all'identità: esempi</span><span class="sxs-lookup"><span data-stu-id="fffc5-136">Identity Tasks (examples)</span></span> | <span data-ttu-id="fffc5-137">Iscrizione o accesso ad account social e locali multipli</span><span class="sxs-lookup"><span data-stu-id="fffc5-137">Signup or SignIn with local and many social accounts</span></span><br><br><span data-ttu-id="fffc5-138">Reimpostazione della password self-service</span><span class="sxs-lookup"><span data-stu-id="fffc5-138">Self-Service Password Reset</span></span><br><br><span data-ttu-id="fffc5-139">Modifica del profilo</span><span class="sxs-lookup"><span data-stu-id="fffc5-139">Profile Edit</span></span><br><br><span data-ttu-id="fffc5-140">Scenari con autenticazione a più fattori</span><span class="sxs-lookup"><span data-stu-id="fffc5-140">Multi-Factor Auth scenarios</span></span><br><br><span data-ttu-id="fffc5-141">Personalizzare token e sessioni</span><span class="sxs-lookup"><span data-stu-id="fffc5-141">Customize Tokens and sessions</span></span><br><br><span data-ttu-id="fffc5-142">Flussi di accesso ai token</span><span class="sxs-lookup"><span data-stu-id="fffc5-142">Access Token flows</span></span> | <span data-ttu-id="fffc5-143">Completare le stesse attività dei criteri predefiniti usando provider di identità personalizzati ambiti personalizzati</span><span class="sxs-lookup"><span data-stu-id="fffc5-143">Complete the same tasks as built-in policies using custom identity providers or use custom scopes</span></span><br><br><span data-ttu-id="fffc5-144">Effettuare il provisioning per l'utente in un altro sistema al momento della registrazione</span><span class="sxs-lookup"><span data-stu-id="fffc5-144">Provision user in another system at the time of registration</span></span><br><br><span data-ttu-id="fffc5-145">Inviare un messaggio di posta elettronica di benvenuto con il proprio provider di servizi di posta elettronica</span><span class="sxs-lookup"><span data-stu-id="fffc5-145">Send a welcome email using your own email service provider</span></span><br><br><span data-ttu-id="fffc5-146">Usare un archivio utente esterno B2C</span><span class="sxs-lookup"><span data-stu-id="fffc5-146">Use a user store outside B2C</span></span><br><br><span data-ttu-id="fffc5-147">Convalidare le informazioni date dall'utente con un sistema attendibile tramite API</span><span class="sxs-lookup"><span data-stu-id="fffc5-147">Validate user provided information with a trusted system via API</span></span> |

## <a name="policy-files"></a><span data-ttu-id="fffc5-148">File dei criteri</span><span class="sxs-lookup"><span data-stu-id="fffc5-148">Policy files</span></span>

<span data-ttu-id="fffc5-149">Un criterio personalizzato è rappresentato come uno o più file in formato XML che fanno riferimento l'uno all'altro in una catena gerarchica.</span><span class="sxs-lookup"><span data-stu-id="fffc5-149">A custom policy is represented as one or several XML-formatted files which refer to each other in a hierarchical chain.</span></span> <span data-ttu-id="fffc5-150">Gli elementi XML definiscono: schema di attestazioni, trasformazioni di attestazioni, definizioni di contenuto, profili tecnico o provider di attestazioni e procedure di orchestrazione Userjourney, tra gli altri elementi.</span><span class="sxs-lookup"><span data-stu-id="fffc5-150">The XML elements define: Claims schema, claims transformations, content definitions, claims providers/technical profiles, and Userjourney orchestration steps, among other elements.</span></span>

<span data-ttu-id="fffc5-151">Si consiglia di usare i tre tipi di file dei criteri:</span><span class="sxs-lookup"><span data-stu-id="fffc5-151">We recommend the use of three types of policy files:</span></span>

- <span data-ttu-id="fffc5-152">**Un file di BASE**, che contiene la maggior parte delle definizioni e per cui Azure offre un esempio completo.</span><span class="sxs-lookup"><span data-stu-id="fffc5-152">**A BASE file**, which contains most of the definitions and for which Azure provides a complete sample.</span></span>  <span data-ttu-id="fffc5-153">Si consiglia di apportare un numero minimo di modifiche a questo file che contribuisce alla risoluzione dei problemi e alla manutenzione a lungo termine dei criteri</span><span class="sxs-lookup"><span data-stu-id="fffc5-153">We recommend you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies</span></span>
- <span data-ttu-id="fffc5-154">**Un file di estensioni** che contiene le modifiche di configurazione univoche per il tenant</span><span class="sxs-lookup"><span data-stu-id="fffc5-154">**an EXTensions file** that holds the unique configuration changes for your tenant</span></span>
- <span data-ttu-id="fffc5-155">**Un file Relying Party (RP)**, l'unico file incentrato sulle attività che viene richiamato direttamente dell'applicazione o dal servizio ed è noto anche come Relying Party.</span><span class="sxs-lookup"><span data-stu-id="fffc5-155">**a Relying Party (RP) file** which is the single task-focused file that is invoked directly by the application or service (aka Relying Party).</span></span>  <span data-ttu-id="fffc5-156">Per altre informazioni leggere l'articolo sulle definizioni di file dei criteri.</span><span class="sxs-lookup"><span data-stu-id="fffc5-156">Read the article on Policy file definitions for more information.</span></span>  <span data-ttu-id="fffc5-157">Ogni attività univoca richiede un proprio Relying Party e, a seconda dei requisiti di personalizzazione, il numero potrebbe essere il "totale delle applicazioni per il numero totale di casi di uso".</span><span class="sxs-lookup"><span data-stu-id="fffc5-157">Each unique task requires its own RP and depending on branding requirements the number might be "total of applications x total number of use cases".</span></span>


<span data-ttu-id="fffc5-158">I criteri predefiniti in Azure AD B2C seguono il modello a 3 file illustrato in precedenza, ma lo sviluppatore vede solo il file Relying Party (RP), mentre il portale apporta modifiche in background al file delle estensioni.</span><span class="sxs-lookup"><span data-stu-id="fffc5-158">Built-in policies in Azure AD B2C follow the 3-file pattern depicted above, but the developer only sees the Relying Party (RP) file, while the portal makes changes in the background to the EXTenstions file.</span></span>

## <a name="core-concepts-you-should-know-when-using-custom-policies"></a><span data-ttu-id="fffc5-159">Concetti di base che è necessario conoscere quando si usano i criteri personalizzati</span><span class="sxs-lookup"><span data-stu-id="fffc5-159">Core concepts you should know when using custom policies</span></span>

### <a name="azure-active-directory-b2c"></a><span data-ttu-id="fffc5-160">Azure Active Directory B2C</span><span class="sxs-lookup"><span data-stu-id="fffc5-160">Azure Active Directory B2C</span></span>

<span data-ttu-id="fffc5-161">Azure è dotato del servizio di identità del cliente e gestione dell'accesso, CIAM.</span><span class="sxs-lookup"><span data-stu-id="fffc5-161">Azure’s customer identity and access management (CIAM) service.</span></span> <span data-ttu-id="fffc5-162">Il servizio include:</span><span class="sxs-lookup"><span data-stu-id="fffc5-162">The service includes:</span></span>

1. <span data-ttu-id="fffc5-163">Una directory utente sotto forma di Azure Active Directory con un scopo specifico accessibili tramite Microsoft Graph e che contenga i dati utente per gli account locali e gli account federati</span><span class="sxs-lookup"><span data-stu-id="fffc5-163">A user directory in the form of a special-purpose Azure Active Directory accessible via Microsoft Graph and which holds user data for both local accounts and federated accounts</span></span> 
2. <span data-ttu-id="fffc5-164">L'accesso al **framework per l'esperienza di identità** che orchestra la relazione di trust tra gli utenti e le entità e passa le attestazioni tra questi per completare un'attività di gestione all'identità o all'accesso</span><span class="sxs-lookup"><span data-stu-id="fffc5-164">Access to the **Identity Experience Framework** which orchestrates trust between users and entities and passes claims between them to complete an identity/access management task</span></span> 
3. <span data-ttu-id="fffc5-165">Un servizio token di sicurezza (STS) che emette gli ID token, aggiorna i token e accede ai token, e alle asserzioni SAML equivalenti, e li convalida in modo da proteggere le risorse.</span><span class="sxs-lookup"><span data-stu-id="fffc5-165">A security token service (STS) issuing id tokens, refresh tokens, and access tokens (and equivalent SAML assertions) and validating them to protect resources.</span></span>

<span data-ttu-id="fffc5-166">Azure Active Directory B2C interagisce i provider di identità, gli utenti, con altri sistemi e le directory dell'utente locale in sequenza per eseguire un'attività di identità, ad esempio l'accesso a un utente, la registrazione di un nuovo utente, la reimpostazione della password.</span><span class="sxs-lookup"><span data-stu-id="fffc5-166">Azure AD B2C interacts with identity providers, users, other systems, and with the local user directory in sequence to achieve an identity task (e.g. login a user, register a new user, reset a password).</span></span> <span data-ttu-id="fffc5-167">La piattaforma sottostante, che stabilisce relazioni di trust tra più parti ed esegue questa procedura viene chiamata Framework di esperienza di identità e un criterio, che ha chiamato un percorso utente o un criterio di attendibilità framework, definisce in modo esplicito gli attori, le azioni, i protocolli e la sequenza di passaggi da completare.</span><span class="sxs-lookup"><span data-stu-id="fffc5-167">The underlying platform which establishes multi-party trust and executes these steps is called the Identity Experience Framework and a policy (also called an user journey or a Trust framework policy) explicitly defines the actors, the actions, the protocols, and the sequence of steps to complete.</span></span>

### <a name="identity-experience-framework"></a><span data-ttu-id="fffc5-168">Framework dell'esperienza di gestione delle identità</span><span class="sxs-lookup"><span data-stu-id="fffc5-168">Identity Experience Framework</span></span>

<span data-ttu-id="fffc5-169">Una piattaforma Azure completamente configurabile, basato sui criteri e su cloud che orchestra le relazioni di trust tra le entità, in modo più ampio i provider di attestazioni, in formati di protocollo standard, ad esempio OpenIDConnect, OAuth, SAML, standard WSFed e alcuni formati non standard, ad esempio, scambi di attestazioni basati su API REST da sistema a sistema.</span><span class="sxs-lookup"><span data-stu-id="fffc5-169">A fully configurable, policy-driven, cloud-based Azure platform that orchestrates trust between entities (broadly Claims Providers) in standard protocol formats such as OpenIDConnect, OAuth, SAML, WSFed, and a few non-standard ones (e.g. REST API-based system-to-system claims exchanges).</span></span> <span data-ttu-id="fffc5-170">I2E crea esperienze intuitive, generiche che supportano HTML, CSS e jscript.</span><span class="sxs-lookup"><span data-stu-id="fffc5-170">The I2E creates user-friendly, whitelabelled experiences that support HTML, CSS, and jscript.</span></span>  <span data-ttu-id="fffc5-171">Oggi, il Framework di esperienza di identità è disponibile solo nel contesto del servizio Azure AD B2C e dà priorità alle attività correlate al CIAM.</span><span class="sxs-lookup"><span data-stu-id="fffc5-171">Today, the Identity Experience Framework is available only in the context of the Azure AD B2C service and prioritized for tasks related to CIAM.</span></span>

### <a name="built-in-policies"></a><span data-ttu-id="fffc5-172">Criteri predefiniti</span><span class="sxs-lookup"><span data-stu-id="fffc5-172">Built-in policies</span></span>

<span data-ttu-id="fffc5-173">I file di configurazione predefiniti che indirizzano il comportamento di Azure AD B2C affinché esegua le attività di identità più usate, ovvero</span><span class="sxs-lookup"><span data-stu-id="fffc5-173">Predefined configuration files that direct the behavior of Azure AD B2C to perform the most commonly used identity tasks (i.e.</span></span> <span data-ttu-id="fffc5-174">registrazione dell'utente, accesso, reimpostazione della password, e interagisca con parti attendibili la cui relazione è predefinita anche in Azure AD B2C, ad esempio nei provider di identità di Facebook, in LinkedIn, in Microsoft Account, negli account di Google.</span><span class="sxs-lookup"><span data-stu-id="fffc5-174">user registration, signin, password reset) and interact with trusted parties whose relationship is also predefined in Azure AD B2C (e.g. Facebook identity provider, LinkedIn, Microsoft Account, Google accounts).</span></span>  <span data-ttu-id="fffc5-175">In futuro, i criteri predefiniti possono anche garantire la personalizzazione dei provider di identità che sono in genere nell'area aziendale, ad esempio Azure Active Directory Premium, Active Directory o ADFS, Salesforce ID Provider e così via.</span><span class="sxs-lookup"><span data-stu-id="fffc5-175">In the future, built-in policies may also provide for customization of identity providers which are typically in the enterprise realm such as Azure Active Directory Premium, Active Directory/ADFS, Salesforce ID Provider etc.</span></span>


### <a name="custom-policies"></a><span data-ttu-id="fffc5-176">Criteri personalizzati</span><span class="sxs-lookup"><span data-stu-id="fffc5-176">Custom policies</span></span>

<span data-ttu-id="fffc5-177">I file di configurazione definiscono il comportamento del Framework di esperienza di identità nel tenant di Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="fffc5-177">Configuration files that define the behavior of Identity Experience Framework in your Azure AD B2C tenant.</span></span> <span data-ttu-id="fffc5-178">Un criterio personalizzato è accessibile come uno o più file XML, vedere le definizioni di file di criteri, che vengono eseguiti dal Framework di esperienza di identità quando viene richiamati da una relying party, ad esempio da un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="fffc5-178">A custom policy is accessible as one or several XML files (see Policy Files definitions) which are executed by the Identity Experience Framework when invoked by a relying party (e.g. an application).</span></span> <span data-ttu-id="fffc5-179">I criteri personalizzati possono essere modificati direttamente da uno sviluppatore di identità per il completamento di un numero quasi illimitato di attività.</span><span class="sxs-lookup"><span data-stu-id="fffc5-179">Custom policies can be directly edited by an identity developer to complete a near unlimited number of tasks.</span></span> <span data-ttu-id="fffc5-180">Gli sviluppatori che configurano i criteri personalizzati devono definire le relazioni attendibili dettagliatamente per includere gli endpoint dei metadati, le definizioni di scambio per le attestazioni esatte, e configurare i segreti, le chiavi e i certificati necessari per ogni provider di identità.</span><span class="sxs-lookup"><span data-stu-id="fffc5-180">Developers configuring custom policies must define the trusted relationships in careful detail to include metadata endpoints, exact claims exchange definitions, and configure secrets, keys and certificates as needed by each identity provider.</span></span>

## <a name="policy-file-definitions-for-identity-experience-framework-trustframeworks"></a><span data-ttu-id="fffc5-181">Definizione di file di criteri per i framework di attendibilità per il Framework di esperienza di identità</span><span class="sxs-lookup"><span data-stu-id="fffc5-181">Policy File Definitions for Identity Experience Framework Trustframeworks</span></span>

### <a name="policy-files"></a><span data-ttu-id="fffc5-182">File dei criteri</span><span class="sxs-lookup"><span data-stu-id="fffc5-182">Policy Files</span></span>

<span data-ttu-id="fffc5-183">Un criterio personalizzato è rappresentato come uno o più file in formato XML che fanno riferimento l'uno all'altro in una catena gerarchica.</span><span class="sxs-lookup"><span data-stu-id="fffc5-183">A custom policy is represented as one or several XML-formatted files which refer to each other in a hierarchical chain.</span></span> <span data-ttu-id="fffc5-184">Gli elementi XML definiscono: schema di attestazioni, trasformazioni di attestazioni, definizioni di contenuto, profili tecnico o provider di attestazioni e procedure di orchestrazione Userjourney, tra gli altri elementi.</span><span class="sxs-lookup"><span data-stu-id="fffc5-184">The XML elements define: Claims schema, claims transformations, content definitions, claims providers/technical profiles, and Userjourney orchestration steps, among other elements.</span></span>  <span data-ttu-id="fffc5-185">Si consiglia di usare i tre tipi di file dei criteri:</span><span class="sxs-lookup"><span data-stu-id="fffc5-185">We recommend the use of three types of policy files:</span></span>

- <span data-ttu-id="fffc5-186">**Un file di BASE**, che contiene la maggior parte delle definizioni e per cui Azure offre un esempio completo.</span><span class="sxs-lookup"><span data-stu-id="fffc5-186">**A BASE file**, which contains most of the definitions and for which Azure provides a complete sample.</span></span>  <span data-ttu-id="fffc5-187">Si consiglia di apportare un numero minimo di modifiche a questo file che contribuisce alla risoluzione dei problemi e alla manutenzione a lungo termine dei criteri</span><span class="sxs-lookup"><span data-stu-id="fffc5-187">We recommend you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies</span></span>
- <span data-ttu-id="fffc5-188">**Un file di estensioni** che contiene le modifiche di configurazione univoche per il tenant</span><span class="sxs-lookup"><span data-stu-id="fffc5-188">**an EXTensions file** that holds the unique configuration changes for your tenant</span></span>
- <span data-ttu-id="fffc5-189">**Un file Relying Party (RP)**, l'unico file incentrato sulle attività che viene richiamato direttamente dell'applicazione o dal servizio ed è noto anche come Relying Party.</span><span class="sxs-lookup"><span data-stu-id="fffc5-189">**a Relying Party (RP) file** which is the single task-focused file that is invoked directly by the application or service (aka Relying Party).</span></span>  <span data-ttu-id="fffc5-190">Per altre informazioni leggere l'articolo sulle definizioni di file dei criteri.</span><span class="sxs-lookup"><span data-stu-id="fffc5-190">Read the article on Policy file definitions for more information.</span></span>  <span data-ttu-id="fffc5-191">Ogni attività univoca richiede un proprio Relying Party e, a seconda dei requisiti di personalizzazione, il numero potrebbe essere il "totale delle applicazioni per il numero totale di casi di uso".</span><span class="sxs-lookup"><span data-stu-id="fffc5-191">Each unique task requires its own RP and depending on branding requirements the number might be "total of applications x total number of use cases".</span></span>

![Tipi di file di criteri](media/active-directory-b2c-overview-custom/active-directory-b2c-overview-custom-policy-files.png)

| <span data-ttu-id="fffc5-193">Tipo di file di criteri</span><span class="sxs-lookup"><span data-stu-id="fffc5-193">Type of policy file</span></span> | <span data-ttu-id="fffc5-194">Nome del file di esempio</span><span class="sxs-lookup"><span data-stu-id="fffc5-194">Examples file name</span></span> | <span data-ttu-id="fffc5-195">Uso consigliato</span><span class="sxs-lookup"><span data-stu-id="fffc5-195">Recommended use</span></span> | <span data-ttu-id="fffc5-196">Eredito da</span><span class="sxs-lookup"><span data-stu-id="fffc5-196">Inherits from</span></span> |
|---------------------|--------------------|-----------------|---------------|
| <span data-ttu-id="fffc5-197">BASE</span><span class="sxs-lookup"><span data-stu-id="fffc5-197">BASE</span></span> |<span data-ttu-id="fffc5-198">TrustFrameworkBase.xml</span><span class="sxs-lookup"><span data-stu-id="fffc5-198">TrustFrameworkBase.xml</span></span><br><br><span data-ttu-id="fffc5-199">Mytenant.onmicrosoft.com-B2C-1A_BASE1.xml</span><span class="sxs-lookup"><span data-stu-id="fffc5-199">Mytenant.onmicrosoft.com-B2C-1A_BASE1.xml</span></span> | <span data-ttu-id="fffc5-200">Include lo schema di attestazioni core, le trasformazioni delle attestazioni, i provider delle attestazioni e i percorsi utente è configurati da Microsoft</span><span class="sxs-lookup"><span data-stu-id="fffc5-200">Includes the core claims schema, claims transformations, claims providers, and user journeys configured by Microsoft</span></span><br><br><span data-ttu-id="fffc5-201">Apportare modifiche minime al file</span><span class="sxs-lookup"><span data-stu-id="fffc5-201">Make minimal changes to this file</span></span> | <span data-ttu-id="fffc5-202">Nessuno</span><span class="sxs-lookup"><span data-stu-id="fffc5-202">None</span></span> |
| <span data-ttu-id="fffc5-203">Estensione (RXT)</span><span class="sxs-lookup"><span data-stu-id="fffc5-203">Extension (EXT)</span></span> | <span data-ttu-id="fffc5-204">TrustFrameworkExtensions.xml</span><span class="sxs-lookup"><span data-stu-id="fffc5-204">TrustFrameworkExtensions.xml</span></span><br><br><span data-ttu-id="fffc5-205">Mytenant.onmicrosoft.com-B2C-1A_EXT.xml</span><span class="sxs-lookup"><span data-stu-id="fffc5-205">Mytenant.onmicrosoft.com-B2C-1A_EXT.xml</span></span> | <span data-ttu-id="fffc5-206">Consolidare le modifiche al file di BASE qui</span><span class="sxs-lookup"><span data-stu-id="fffc5-206">Consolidate your changes to the BASE file here</span></span><br><br><span data-ttu-id="fffc5-207">Provider di attestazioni modificati</span><span class="sxs-lookup"><span data-stu-id="fffc5-207">Modified claims providers</span></span><br><br><span data-ttu-id="fffc5-208">Percorsi utente modificati</span><span class="sxs-lookup"><span data-stu-id="fffc5-208">Modified user journeys</span></span><br><br><span data-ttu-id="fffc5-209">Definizioni dello schema personalizzato</span><span class="sxs-lookup"><span data-stu-id="fffc5-209">Your own custom schema definitions</span></span> | <span data-ttu-id="fffc5-210">File di BASE</span><span class="sxs-lookup"><span data-stu-id="fffc5-210">BASE file</span></span> |
| <span data-ttu-id="fffc5-211">Relying Party (RP)</span><span class="sxs-lookup"><span data-stu-id="fffc5-211">Relying Party (RP)</span></span> | <span data-ttu-id="fffc5-212">B2C_1A_sign_up_sign_in.xml</span><span class="sxs-lookup"><span data-stu-id="fffc5-212">B2C_1A_sign_up_sign_in.xml</span></span>| <span data-ttu-id="fffc5-213">Modificare la forma del token e le impostazioni della sessione qui</span><span class="sxs-lookup"><span data-stu-id="fffc5-213">Change token shape and session settings here</span></span>| <span data-ttu-id="fffc5-214">File Extensions(Ext)</span><span class="sxs-lookup"><span data-stu-id="fffc5-214">Extensions(EXT) file</span></span> |

### <a name="inheritance-model"></a><span data-ttu-id="fffc5-215">Modello di ereditarietà</span><span class="sxs-lookup"><span data-stu-id="fffc5-215">Inheritance model</span></span>

<span data-ttu-id="fffc5-216">Quando un'applicazione chiama il file dei criteri di relying party, il Framework di esperienza di identità in B2C aggiungerà tutti gli elementi dal file di criteri di BASE, quindi da quello delle estensioni e infine dal relying party per assemblare i criteri correnti in vigore.</span><span class="sxs-lookup"><span data-stu-id="fffc5-216">When an application calls the RP Policy file, the Identity Experience Framework in B2C will add all the elements from BASE, then from EXTENSIONS, and lastly from the RP policy file to assemble the current policy in effect.</span></span>  <span data-ttu-id="fffc5-217">Gli elementi dello stesso tipo e nome nel file relying party eseguiranno l'override nel file ESTENSIONI, ed ESTENSIONI esegue l'override nel file di BASE.</span><span class="sxs-lookup"><span data-stu-id="fffc5-217">Elements of the same type and name in the RP file will override those in the EXTENSIONS, and EXTENSIONS overrides BASE.</span></span>

<span data-ttu-id="fffc5-218">I **criteri predefiniti** in Azure AD B2C seguono il modello a 3 file illustrato in precedenza, ma lo sviluppatore vede solo il file Relying Party (RP), mentre il portale apporta modifiche in background al file delle estensioni.</span><span class="sxs-lookup"><span data-stu-id="fffc5-218">**Built-in policies** in Azure AD B2C follow the 3-file pattern depicted above, but the developer only sees the Relying Party (RP) file, while the portal makes changes in the background to the EXTenstions file.</span></span>  <span data-ttu-id="fffc5-219">Tutti i componenti di Azure AD B2C condividono un file di criteri di BASE che è controllaro del team di Azure B2C e viene aggiornato di frequente.</span><span class="sxs-lookup"><span data-stu-id="fffc5-219">All of Azure AD B2C shares a BASE policy file that is under the control of the Azure B2C team and is updated frequently.</span></span>
