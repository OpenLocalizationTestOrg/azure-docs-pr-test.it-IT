---
title: 'Archiviazione Premium di Azure: progettata per prestazioni elevate | Microsoft Docs'
description: Progettare applicazioni a prestazioni elevate con l'Archiviazione Premium di Azure. Archiviazione Premium offre prestazioni elevate e supporto per dischi a bassa latenza per carichi di lavoro con I/O intensivo in esecuzione su Macchine virtuali di Azure.
services: storage
documentationcenter: na
author: aungoo-msft
manager: tadb
editor: tysonn
ms.assetid: e6a409c3-d31a-4704-a93c-0a04fdc95960
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27/2017
ms.author: aungoo
ms.openlocfilehash: 5b5c8b4a0d490aee4b3d33f9222011d7864e4490
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="azure-premium-storage-design-for-high-performance"></a><span data-ttu-id="03c0a-104">Archiviazione Premium di Azure: progettata per prestazioni elevate</span><span class="sxs-lookup"><span data-stu-id="03c0a-104">Azure Premium Storage: Design for High Performance</span></span>
## <a name="overview"></a><span data-ttu-id="03c0a-105">Overview</span><span class="sxs-lookup"><span data-stu-id="03c0a-105">Overview</span></span>
<span data-ttu-id="03c0a-106">Questo articolo fornisce indicazioni per lo sviluppo di applicazioni a prestazioni elevate mediante l'Archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="03c0a-106">This article provides guidelines for building high performance applications using Azure Premium Storage.</span></span> <span data-ttu-id="03c0a-107">È possibile usare le istruzioni disponibili in questo documento insieme alle procedure consigliate per le prestazioni applicabili alle tecnologie usate dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-107">You can use the instructions provided in this document combined with performance best practices applicable to technologies used by your application.</span></span> <span data-ttu-id="03c0a-108">Per illustrare le indicazioni, è stato usato SQL Server in esecuzione nell'Archiviazione Premium come esempio nell'intero documento.</span><span class="sxs-lookup"><span data-stu-id="03c0a-108">To illustrate the guidelines, we have used SQL Server running on Premium Storage as an example throughout this document.</span></span>

<span data-ttu-id="03c0a-109">In questo articolo vengono trattati scenari relativi alle prestazioni per il livello dell'archiviazione, ma sarà necessario ottimizzare il livello dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-109">While we address performance scenarios for the Storage layer in this article, you will need to optimize the application layer.</span></span> <span data-ttu-id="03c0a-110">Ad esempio, se si ospita una farm SharePoint nell'Archiviazione Premium di Azure, è possibile usare gli esempi relativi a SQL Server di questo articolo per ottimizzare il server di database.</span><span class="sxs-lookup"><span data-stu-id="03c0a-110">For example, if you are hosting a SharePoint Farm on Azure Premium Storage, you can use the SQL Server examples from this article to optimize the database server.</span></span> <span data-ttu-id="03c0a-111">È anche possibile ottimizzare il server Web e il server applicazioni della farm SharePoint per ottenere prestazioni migliori.</span><span class="sxs-lookup"><span data-stu-id="03c0a-111">Additionally, optimize the SharePoint Farm's Web server and Application server to get the most performance.</span></span>

<span data-ttu-id="03c0a-112">Questo articolo è utile per rispondere alle domande comuni seguenti sull'ottimizzazione delle prestazioni dell'applicazione nell'Archiviazione Premium di Azure:</span><span class="sxs-lookup"><span data-stu-id="03c0a-112">This article will help answer following common questions about optimizing application performance on Azure Premium Storage,</span></span>

* <span data-ttu-id="03c0a-113">Come si misurano le prestazioni dell'applicazione?</span><span class="sxs-lookup"><span data-stu-id="03c0a-113">How to measure your application performance?</span></span>  
* <span data-ttu-id="03c0a-114">Perché non si ottengono le prestazioni elevate previste?</span><span class="sxs-lookup"><span data-stu-id="03c0a-114">Why are you not seeing expected high performance?</span></span>  
* <span data-ttu-id="03c0a-115">Quali fattori influenzano le prestazioni dell'applicazione nell'Archiviazione Premium?</span><span class="sxs-lookup"><span data-stu-id="03c0a-115">Which factors influence your application performance on Premium Storage?</span></span>  
* <span data-ttu-id="03c0a-116">In che modo questi fattori influenzano le prestazioni dell'applicazione nell'Archiviazione Premium?</span><span class="sxs-lookup"><span data-stu-id="03c0a-116">How do these factors influence performance of your application on Premium Storage?</span></span>  
* <span data-ttu-id="03c0a-117">Come si ottiene l'ottimizzazione per IOPS, larghezza di banda e latenza?</span><span class="sxs-lookup"><span data-stu-id="03c0a-117">How can you optimize for IOPS, Bandwidth and Latency?</span></span>  

<span data-ttu-id="03c0a-118">Queste indicazioni sono specifiche per l'Archiviazione Premium, perché i carichi di lavoro in esecuzione nell'Archiviazione Premium sono influenzati in modo significativo dalle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-118">We have provided these guidelines specifically for Premium Storage because workloads running on Premium Storage are highly performance sensitive.</span></span> <span data-ttu-id="03c0a-119">Sono disponibili esempi nei casi appropriati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-119">We have provided examples where appropriate.</span></span> <span data-ttu-id="03c0a-120">È anche possibile applicare alcune indicazioni alle applicazioni in esecuzione su VM IaaS con dischi di archiviazione Standard.</span><span class="sxs-lookup"><span data-stu-id="03c0a-120">You can also apply some of these guidelines to applications running on IaaS VMs with Standard Storage disks.</span></span>

<span data-ttu-id="03c0a-121">Prima di iniziare, se non si ha alcuna esperienza dell'Archiviazione Premium, leggere gli articoli [Archiviazione Premium: archiviazione ad alte prestazioni per carichi di lavoro delle macchine virtuali di Azure](../storage-premium-storage.md) e [Obiettivi di scalabilità e prestazioni per Archiviazione di Azure](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="03c0a-121">Before you begin, if you are new to Premium Storage, first read the [Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads](../storage-premium-storage.md) and [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) articles.</span></span>

## <a name="application-performance-indicators"></a><span data-ttu-id="03c0a-122">Indicatori di prestazioni dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="03c0a-122">Application Performance Indicators</span></span>
<span data-ttu-id="03c0a-123">È possibile valutare se le prestazioni di un'applicazione sono adeguate o meno usando indicatori di prestazioni, ad esempio la velocità di elaborazione di una richiesta utente da parte di un'applicazione, la quantità di dati elaborata da un'applicazione per ogni richiesta, il numero di richieste elaborate da un'applicazione in un periodo specifico, la durata dell'attesa da parte di un utente per ottenere una risposta dopo l'invio della richiesta.</span><span class="sxs-lookup"><span data-stu-id="03c0a-123">We assess whether an application is performing well or not using performance indicators like, how fast an application is processing a user request, how much data an application is processing per request, how many requests is an application processing in a specific period of time, how long a user has to wait to get a response after submitting their request.</span></span> <span data-ttu-id="03c0a-124">I termini tecnici per definire questi indicatori di prestazioni sono IOPS, velocità effettiva o larghezza di banda e latenza.</span><span class="sxs-lookup"><span data-stu-id="03c0a-124">The technical terms for these performance indicators are, IOPS, Throughput or Bandwidth, and Latency.</span></span>

<span data-ttu-id="03c0a-125">In questa sezione verranno illustrati gli indicatori di prestazioni comuni nel contesto dell'Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-125">In this section, we will discuss the common performance indicators in the context of Premium Storage.</span></span> <span data-ttu-id="03c0a-126">Nella sezione seguente, Recupero dei requisiti dell'applicazione, verrà illustrato come misurare questi indicatori di prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-126">In the following section, Gathering Application Requirements, you will learn how to measure these performance indicators for your application.</span></span> <span data-ttu-id="03c0a-127">In Ottimizzazione delle prestazioni dell'applicazione verranno descritti infine i fattori che influiscono su questi indicatori di prestazioni e verranno fornite indicazioni utili per l'ottimizzazione degli indicatori.</span><span class="sxs-lookup"><span data-stu-id="03c0a-127">Later in Optimizing Application Performance, you will learn about the factors affecting these performance indicators and recommendations to optimize them.</span></span>

## <a name="iops"></a><span data-ttu-id="03c0a-128">IOPS</span><span class="sxs-lookup"><span data-stu-id="03c0a-128">IOPS</span></span>
<span data-ttu-id="03c0a-129">IOPS indica il numero di richieste inviate dall'applicazione ai dischi di archiviazione in un secondo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-129">IOPS is number of requests that your application is sending to the storage disks in one second.</span></span> <span data-ttu-id="03c0a-130">Un'operazione di input/output può essere di lettura o di scrittura, sequenziale o casuale.</span><span class="sxs-lookup"><span data-stu-id="03c0a-130">An input/output operation could be read or write, sequential or random.</span></span> <span data-ttu-id="03c0a-131">Le applicazioni OLTP, ad esempio un sito Web per la rivendita online, devono elaborare immediatamente molte richieste utente concomitanti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-131">OLTP applications like an online retail website need to process many concurrent user requests immediately.</span></span> <span data-ttu-id="03c0a-132">Le richieste utente sono transazioni di database con un numero elevato di inserimenti e aggiornamenti, che devono essere elaborate rapidamente dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-132">The user requests are insert and update intensive database transactions, which the application must process quickly.</span></span> <span data-ttu-id="03c0a-133">Le applicazioni OLTP richiedono quindi valori molto elevati per IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-133">Therefore, OLTP applications require very high IOPS.</span></span> <span data-ttu-id="03c0a-134">Queste applicazioni gestiscono milioni di richieste I/O di piccole dimensioni e casuali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-134">Such applications handle millions of small and random IO requests.</span></span> <span data-ttu-id="03c0a-135">Se si crea un'applicazione di questo tipo, sarà necessario progettare l'infrastruttura dell'applicazione in modo che sia ottimizzata per IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-135">If you have such an application, you must design the application infrastructure to optimize for IOPS.</span></span> <span data-ttu-id="03c0a-136">Nella sezione successiva, *Ottimizzazione delle prestazioni dell'applicazione*, verranno illustrati in modo dettagliato tutti i fattori da valutare per ottenere valori elevati per IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-136">In the later section, *Optimizing Application Performance*, we discuss in detail all the factors that you must consider to get high IOPS.</span></span>

<span data-ttu-id="03c0a-137">Quando si collega un disco di Archiviazione Premium alla VM a scalabilità elevata, Azure effettua automaticamente il provisioning di un numero garantito di IOPS, in base alla specifica del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-137">When you attach a premium storage disk to your high scale VM, Azure provisions for you a guaranteed number of IOPS as per the disk specification.</span></span> <span data-ttu-id="03c0a-138">Ad esempio, un disco P50 effettua il provisioning di 7500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-138">For example, a P50 disk provisions 7500 IOPS.</span></span> <span data-ttu-id="03c0a-139">Ogni dimensione di VM a scalabilità elevata prevede anche un limite di IOPS specifico sostenibile.</span><span class="sxs-lookup"><span data-stu-id="03c0a-139">Each high scale VM size also has a specific IOPS limit that it can sustain.</span></span> <span data-ttu-id="03c0a-140">Ad esempio, una VM GS5 Standard ha un limite di 80.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-140">For example, a Standard GS5 VM has 80,000 IOPS limit.</span></span>

## <a name="throughput"></a><span data-ttu-id="03c0a-141">Velocità effettiva</span><span class="sxs-lookup"><span data-stu-id="03c0a-141">Throughput</span></span>
<span data-ttu-id="03c0a-142">La velocità effettiva o larghezza di banda è la quantità di dati che l'applicazione invia ai dischi di archiviazione in un intervallo specificato.</span><span class="sxs-lookup"><span data-stu-id="03c0a-142">Throughput or Bandwidth is the amount of data that your application is sending to the storage disks in a specified interval.</span></span> <span data-ttu-id="03c0a-143">Se l'applicazione esegue operazioni di input/output con dimensioni elevate per le unità I/O, richiederà una velocità effettiva elevata.</span><span class="sxs-lookup"><span data-stu-id="03c0a-143">If your application is performing input/output operations with large IO unit sizes, it requires high Throughput.</span></span> <span data-ttu-id="03c0a-144">Le applicazioni di tipo data warehouse tendono a emettere operazioni che richiedono quantità elevate di analisi, accedono a grandi porzioni di dati ed eseguono in genere operazione in blocco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-144">Data warehouse applications tend to issue scan intensive operations that access large portions of data at a time and commonly perform bulk operations.</span></span> <span data-ttu-id="03c0a-145">In altri termini, queste applicazioni richiedono una velocità effettiva più elevata.</span><span class="sxs-lookup"><span data-stu-id="03c0a-145">In other words, such applications require higher Throughput.</span></span> <span data-ttu-id="03c0a-146">Se si crea un'applicazione di questo tipo, sarà necessario progettare l'infrastruttura dell'applicazione in modo che sia ottimizzata per la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="03c0a-146">If you have such an application, you must design its infrastructure to optimize for Throughput.</span></span> <span data-ttu-id="03c0a-147">Nella sezione successiva verranno illustrati in modo dettagliato i fattori da ottimizzare per ottenere questo risultato.</span><span class="sxs-lookup"><span data-stu-id="03c0a-147">In the next section, we discuss in detail the factors you must tune to achieve this.</span></span>

<span data-ttu-id="03c0a-148">Quando si collega un disco di Archiviazione Premium a una VM a scalabilità elevata, Azure effettua automaticamente il provisioning della velocità effettiva in base alla specifica del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-148">When you attach a premium storage disk to a high scale VM, Azure provisions Throughput as per that disk specification.</span></span> <span data-ttu-id="03c0a-149">Ad esempio, un disco P50 effettua il provisioning di una velocità effettiva di 250 MB al secondo per il disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-149">For example, a P50 disk provisions 250 MB per second disk Throughput.</span></span> <span data-ttu-id="03c0a-150">Ogni dimensione di VM a scalabilità elevata prevede anche un limite di velocità effettiva specifico sostenibile.</span><span class="sxs-lookup"><span data-stu-id="03c0a-150">Each high scale VM size also has as specific Throughput limit that it can sustain.</span></span> <span data-ttu-id="03c0a-151">Ad esempio, una VM GS5 Standard ha una velocità effettiva massima di 2.000 MB al secondo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-151">For example, Standard GS5 VM has a maximum throughput of 2,000 MB per second.</span></span> 

<span data-ttu-id="03c0a-152">Come illustrato dalla formula seguente, esiste una relazione tra la velocità effettiva e IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-152">There is a relation between Throughput and IOPS as shown in the formula below.</span></span>

![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="03c0a-153">È quindi importante determinare i valori ottimali per la velocità effettiva e IOPS richiesti dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-153">Therefore, it is important to determine the optimal Throughput and IOPS values that your application requires.</span></span> <span data-ttu-id="03c0a-154">I tentativi di ottimizzazione di uno dei valori influiscono anche sull'altro.</span><span class="sxs-lookup"><span data-stu-id="03c0a-154">As you try to optimize one, the other also gets affected.</span></span> <span data-ttu-id="03c0a-155">In una sezione successiva, *Ottimizzazione delle prestazioni dell'applicazione*, verrà illustrata in modo dettagliato l'ottimizzazione di IOPS e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="03c0a-155">In a later section, *Optimizing Application Performance*, we will discuss in more details about optimizing IOPS and Throughput.</span></span>

## <a name="latency"></a><span data-ttu-id="03c0a-156">Latency</span><span class="sxs-lookup"><span data-stu-id="03c0a-156">Latency</span></span>
<span data-ttu-id="03c0a-157">La latenza è il tempo necessario perché un'applicazione riceva una singola richiesta, la invii ai dischi di archiviazione e restituisca la risposta al client.</span><span class="sxs-lookup"><span data-stu-id="03c0a-157">Latency is the time it takes an application to receive a single request, send it to the storage disks and send the response to the client.</span></span> <span data-ttu-id="03c0a-158">Si tratta di una misura essenziale delle prestazioni di un'applicazione, oltre a IOPS e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="03c0a-158">This is a critical measure of an application's performance in addition to IOPS and Throughput.</span></span> <span data-ttu-id="03c0a-159">La latenza di un disco di Archiviazione Premium è il tempo necessario per recuperare le informazioni per una richiesta e restituirle all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-159">The Latency of a premium storage disk is the time it takes to retrieve the information for a request and communicate it back to your application.</span></span> <span data-ttu-id="03c0a-160">L'Archiviazione Premium offre latenze uniformemente basse.</span><span class="sxs-lookup"><span data-stu-id="03c0a-160">Premium Storage provides consistent low latencies.</span></span> <span data-ttu-id="03c0a-161">Se si abilita la memorizzazione nella cache host ReadOnly nei dischi di Archiviazione Premium, sarà possibile ottenere una latenza di lettura molto più bassa.</span><span class="sxs-lookup"><span data-stu-id="03c0a-161">If you enable ReadOnly host caching on premium storage disks, you can get much lower read latency.</span></span> <span data-ttu-id="03c0a-162">La memorizzazione nella cache dei dischi sarà illustrata in modo più dettagliato nella sezione successiva, *Ottimizzazione delle prestazioni dell'applicazione*.</span><span class="sxs-lookup"><span data-stu-id="03c0a-162">We will discuss Disk Caching in more detail in later section on *Optimizing Application Performance*.</span></span>

<span data-ttu-id="03c0a-163">Quando si ottimizza l'applicazione per ottenere valori più elevati per IOPS e velocità effettiva, ciò influirà sulla latenza dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-163">When you are optimizing your application to get higher IOPS and Throughput, it will affect the Latency of your application.</span></span> <span data-ttu-id="03c0a-164">Dopo il perfezionamento delle prestazioni dell'app, è necessario valutare sempre la latenza dell'applicazione per evitare comportamenti imprevisti con latenza elevata.</span><span class="sxs-lookup"><span data-stu-id="03c0a-164">After tuning the application performance, always evaluate the Latency of the application to avoid unexpected high latency behavior.</span></span>

## <a name="gather-application-performance-requirements"></a><span data-ttu-id="03c0a-165">Recuperare i requisiti dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="03c0a-165">Gather Application Performance Requirements</span></span>
<span data-ttu-id="03c0a-166">Il primo passaggio nella progettazione di applicazioni a prestazioni elevate in esecuzione nell'Archiviazione Premium di Azure consiste nel comprendere i requisiti relativi alle prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-166">The first step in designing high performance applications running on Azure Premium Storage is, to understand the performance requirements of your application.</span></span> <span data-ttu-id="03c0a-167">Dopo la raccolta dei requisiti relativi alle prestazioni, sarà possibile ottimizzare l'applicazione per ottenere le prestazioni più elevate possibili.</span><span class="sxs-lookup"><span data-stu-id="03c0a-167">After you gather performance requirements, you can optimize your application to achieve the most optimal performance.</span></span>

<span data-ttu-id="03c0a-168">Nella sezione precedente sono stati illustrati gli indicatori di prestazioni comuni, ovvero IOPS, velocità effettiva e latenza.</span><span class="sxs-lookup"><span data-stu-id="03c0a-168">In the previous section, we explained the common performance indicators, IOPS, Throughput and Latency.</span></span> <span data-ttu-id="03c0a-169">È necessario identificare gli indicatori di prestazioni essenziali per consentire all'applicazione di offrire l'esperienza utente desiderata.</span><span class="sxs-lookup"><span data-stu-id="03c0a-169">You must identify which of these performance indicators are critical to your application to deliver the desired user experience.</span></span> <span data-ttu-id="03c0a-170">Ad esempio, un valore elevato per IOPS è molto importante per le applicazioni OLTP che elaborano milioni di transazioni al secondo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-170">For example, high IOPS matters most to OLTP applications processing millions of transactions in a second.</span></span> <span data-ttu-id="03c0a-171">Una velocità effettiva elevata, invece, è essenziale per applicazioni di tipo data warehouse che elaborano quantità elevate di dati in un secondo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-171">Whereas, high Throughput is critical for Data Warehouse applications processing large amounts of data in a second.</span></span> <span data-ttu-id="03c0a-172">Una latenza estremamente bassa è critica per applicazioni in tempo reale come siti Web per lo streaming di video.</span><span class="sxs-lookup"><span data-stu-id="03c0a-172">Extremely low Latency is crucial for real-time applications like live video streaming websites.</span></span>

<span data-ttu-id="03c0a-173">È quindi necessario misurare i requisiti massimi relativi alle prestazioni per l'intero ciclo di vita dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-173">Next, measure the maximum performance requirements of your application throughout its lifetime.</span></span> <span data-ttu-id="03c0a-174">Per iniziare, usare l'elenco di controllo di esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="03c0a-174">Use the sample checklist below as a start.</span></span> <span data-ttu-id="03c0a-175">Registrare i requisiti massimi relativi alle prestazioni durante i periodi di carico di lavoro normale, di picco e in orari di minore attività.</span><span class="sxs-lookup"><span data-stu-id="03c0a-175">Record the maximum performance requirements during normal, peak and off-hours workload periods.</span></span> <span data-ttu-id="03c0a-176">L'identificazione dei requisiti per tutti i livelli di carico di lavoro consente di determinare i requisiti complessivi relativi alle prestazioni per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-176">By identifying requirements for all workloads levels, you will be able to determine the overall performance requirement of your application.</span></span> <span data-ttu-id="03c0a-177">Ad esempio, il carico di lavoro normale di un sito Web per l'e-commerce sarà costituito dalle transazioni gestite durante la maggior parte dei giorni in un anno.</span><span class="sxs-lookup"><span data-stu-id="03c0a-177">For example, the normal workload of an e-commerce website will be the transactions it serves during most days in a year.</span></span> <span data-ttu-id="03c0a-178">Il carico di lavoro di picco del sito Web sarà costituito dalle transazioni gestite durante le festività o in caso di svendite speciali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-178">The peak workload of the website will be the transactions it serves during holiday season or special sale events.</span></span> <span data-ttu-id="03c0a-179">Il carico di lavoro di picco è in genere relativo a un periodo limitato, ma può richiedere un ridimensionamento dell'applicazione pari a due o più volte i livelli necessari per il funzionamento normale.</span><span class="sxs-lookup"><span data-stu-id="03c0a-179">The peak workload is typically experienced for a limited period, but can require your application to scale two or more times its normal operation.</span></span> <span data-ttu-id="03c0a-180">Occorre trovare i requisiti relativi al 50° percentile, al 90° percentile e al 99° percentile.</span><span class="sxs-lookup"><span data-stu-id="03c0a-180">Find out the 50 percentile, 90 percentile and 99 percentile requirements.</span></span> <span data-ttu-id="03c0a-181">Ciò consente di escludere tramite filtri eventuali outlier nei requisiti relativi alle prestazioni e di concentrarsi sull'ottimizzazione dei valori corretti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-181">This helps filter out any outliers in the performance requirements and you can focus your efforts on optimizing for the right values.</span></span>

<span data-ttu-id="03c0a-182">**Elenco di controllo per i requisiti relativi alle prestazioni dell'applicazione**</span><span class="sxs-lookup"><span data-stu-id="03c0a-182">**Application Performance Requirements Checklist**</span></span>

| <span data-ttu-id="03c0a-183">**Requisiti relativi alle prestazioni**</span><span class="sxs-lookup"><span data-stu-id="03c0a-183">**Performance requirements**</span></span> | <span data-ttu-id="03c0a-184">**50° percentile**</span><span class="sxs-lookup"><span data-stu-id="03c0a-184">**50 Percentile**</span></span> | <span data-ttu-id="03c0a-185">**90° percentile**</span><span class="sxs-lookup"><span data-stu-id="03c0a-185">**90 Percentile**</span></span> | <span data-ttu-id="03c0a-186">**99° percentile**</span><span class="sxs-lookup"><span data-stu-id="03c0a-186">**99  Percentile**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="03c0a-187">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-187">Max.</span></span> <span data-ttu-id="03c0a-188">Transazioni al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-188">Transactions per second</span></span> | | | |
| <span data-ttu-id="03c0a-189">% di operazioni di lettura</span><span class="sxs-lookup"><span data-stu-id="03c0a-189">% Read operations</span></span> | | | |
| <span data-ttu-id="03c0a-190">% di operazioni di scrittura</span><span class="sxs-lookup"><span data-stu-id="03c0a-190">% Write operations</span></span> | | | |
| <span data-ttu-id="03c0a-191">% di operazioni casuali</span><span class="sxs-lookup"><span data-stu-id="03c0a-191">% Random operations</span></span> | | | |
| <span data-ttu-id="03c0a-192">% di operazioni sequenziali</span><span class="sxs-lookup"><span data-stu-id="03c0a-192">% Sequential operations</span></span> | | | |
| <span data-ttu-id="03c0a-193">Dimensioni delle richieste I/O</span><span class="sxs-lookup"><span data-stu-id="03c0a-193">IO request size</span></span> | | | |
| <span data-ttu-id="03c0a-194">Velocità effettiva media</span><span class="sxs-lookup"><span data-stu-id="03c0a-194">Average Throughput</span></span> | | | |
| <span data-ttu-id="03c0a-195">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-195">Max.</span></span> <span data-ttu-id="03c0a-196">Velocità effettiva</span><span class="sxs-lookup"><span data-stu-id="03c0a-196">Throughput</span></span> | | | |
| <span data-ttu-id="03c0a-197">Min</span><span class="sxs-lookup"><span data-stu-id="03c0a-197">Min.</span></span> <span data-ttu-id="03c0a-198">Latency</span><span class="sxs-lookup"><span data-stu-id="03c0a-198">Latency</span></span> | | | |
| <span data-ttu-id="03c0a-199">Latenza media</span><span class="sxs-lookup"><span data-stu-id="03c0a-199">Average Latency</span></span> | | | |
| <span data-ttu-id="03c0a-200">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-200">Max.</span></span> <span data-ttu-id="03c0a-201">CPU</span><span class="sxs-lookup"><span data-stu-id="03c0a-201">CPU</span></span> | | | |
| <span data-ttu-id="03c0a-202">Utilizzo medio CPU</span><span class="sxs-lookup"><span data-stu-id="03c0a-202">Average CPU</span></span> | | | |
| <span data-ttu-id="03c0a-203">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-203">Max.</span></span> <span data-ttu-id="03c0a-204">Memoria</span><span class="sxs-lookup"><span data-stu-id="03c0a-204">Memory</span></span> | | | |
| <span data-ttu-id="03c0a-205">Memoria media</span><span class="sxs-lookup"><span data-stu-id="03c0a-205">Average Memory</span></span> | | | |
| <span data-ttu-id="03c0a-206">Profondità coda</span><span class="sxs-lookup"><span data-stu-id="03c0a-206">Queue Depth</span></span> | | | |

> [!NOTE]
> <span data-ttu-id="03c0a-207">è consigliabile prendere in considerazione il ridimensionamento di questi numeri sulla base della crescita futura prevista per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-207">You should consider scaling these numbers based on expected future growth of your application.</span></span> <span data-ttu-id="03c0a-208">È consigliabile prepararsi con anticipo alla crescita dell'applicazione, perché in seguito potrebbe risultare più difficile modificare l'infrastruttura per migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-208">It is a good idea to plan for growth ahead of time, because it could be harder to change the infrastructure for improving performance later.</span></span>
>
>

<span data-ttu-id="03c0a-209">Se si ha già un'applicazione e si vuole passare all'Archiviazione Premium, creare prima di tutto l'elenco di controllo precedente per l'applicazione esistente.</span><span class="sxs-lookup"><span data-stu-id="03c0a-209">If you have an existing application and want to move to Premium Storage, first build the checklist above for the existing application.</span></span> <span data-ttu-id="03c0a-210">Creare quindi un prototipo dell'applicazione nell'Archiviazione Premium e progettare l'applicazione in base alle indicazioni disponibili nella sezione *Ottimizzazione delle prestazioni dell'applicazione* più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="03c0a-210">Then, build a prototype of your application on Premium Storage and design the application based on guidelines described in *Optimizing Application Performance* in a later section of this document.</span></span> <span data-ttu-id="03c0a-211">La sezione successiva illustra gli strumenti disponibili per raccogliere le misurazioni relative alle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-211">The next section describes the tools you can use to gather the performance measurements.</span></span>

<span data-ttu-id="03c0a-212">Creare un elenco di controllo analogo a quello per l'applicazione esistente per il prototipo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-212">Create a checklist similar to your existing application for the prototype.</span></span> <span data-ttu-id="03c0a-213">Usando gli strumenti di benchmarking è possibile simulare i carichi di lavoro e misurare le prestazioni nel prototipo dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-213">Using Benchmarking tools you can simulate the workloads and measure performance on the prototype application.</span></span> <span data-ttu-id="03c0a-214">Per altre informazioni, vedere la sezione [Benchmarking](#benchmarking) .</span><span class="sxs-lookup"><span data-stu-id="03c0a-214">See the section on [Benchmarking](#benchmarking) to learn more.</span></span> <span data-ttu-id="03c0a-215">Sarà quindi possibile determinare se l'Archiviazione Premium può soddisfare o sorpassare i requisiti relativi alle prestazioni per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-215">By doing so you can determine whether Premium Storage can match or surpass your application performance requirements.</span></span> <span data-ttu-id="03c0a-216">Si potranno quindi implementare le stesse indicazioni per l'applicazione di produzione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-216">Then you can implement the same guidelines for your production application.</span></span>

### <a name="counters-to-measure-application-performance-requirements"></a><span data-ttu-id="03c0a-217">Contatori per misurare i requisiti relativi alle prestazioni per l'applicazione</span><span class="sxs-lookup"><span data-stu-id="03c0a-217">Counters to measure application performance requirements</span></span>
<span data-ttu-id="03c0a-218">Il modo migliore per misurare i requisiti relativi alle prestazioni per l'applicazione consiste nell'usare gli strumenti per il monitoraggio delle prestazioni forniti dal sistema operativo del server.</span><span class="sxs-lookup"><span data-stu-id="03c0a-218">The best way to measure performance requirements of your application, is to use performance-monitoring tools provided by the operating system of the server.</span></span> <span data-ttu-id="03c0a-219">È possibile usare PerfMon per Windows e iostat per Linux.</span><span class="sxs-lookup"><span data-stu-id="03c0a-219">You can use PerfMon for Windows and iostat for Linux.</span></span> <span data-ttu-id="03c0a-220">Questi strumenti acquisiscono i contatori corrispondenti a ogni misura illustrata nella sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="03c0a-220">These tools capture counters corresponding to each measure explained in the above section.</span></span> <span data-ttu-id="03c0a-221">È necessario acquisire i valori di questi contatori quando l'applicazione esegue i carichi di lavoro normali, di picco e di orari di minore attività.</span><span class="sxs-lookup"><span data-stu-id="03c0a-221">You must capture the values of these counters when your application is running its normal, peak and off-hours workloads.</span></span>

<span data-ttu-id="03c0a-222">Sono disponibili contatori di PerfMon per il processore, la memoria e ogni disco logico e fisico del server.</span><span class="sxs-lookup"><span data-stu-id="03c0a-222">The PerfMon counters are available for processor, memory and, each logical disk and physical disk of your server.</span></span> <span data-ttu-id="03c0a-223">Quando si usano dischi di Archiviazione Premium con una VM, i contatori per dischi fisici sono relativi a ogni disco di Archiviazione Premium e i contatori per dischi logici sono relativi a ogni volume creato nei dischi di Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-223">When you use premium storage disks with a VM, the physical disk counters are for each premium storage disk, and logical disk counters are for each volume created on the premium storage disks.</span></span> <span data-ttu-id="03c0a-224">È necessario acquisire i valori per i dischi che ospitano il carico di lavoro dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-224">You must capture the values for the disks that host your application workload.</span></span> <span data-ttu-id="03c0a-225">Se è disponibile il mapping uno a uno tra i dischi logici e i dischi fisici, sarà possibile fare riferimento ai contatori per i dischi fisici. In caso contrario, fare riferimento ai contatori per i dischi logici.</span><span class="sxs-lookup"><span data-stu-id="03c0a-225">If there is a one to one mapping between logical and physical disks, you can refer to physical disk counters; otherwise refer to the logical disk counters.</span></span> <span data-ttu-id="03c0a-226">In Linux il comando iostat genera un report relativo all'utilizzo della CPU e dei dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-226">On Linux, the iostat command generates a CPU and disk utilization report.</span></span> <span data-ttu-id="03c0a-227">Il report di utilizzo dischi fornisce statistiche relative al singolo dispositivo o alla singola partizione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-227">The disk utilization report provides statistics per physical device or partition.</span></span> <span data-ttu-id="03c0a-228">Se è presente un server di database con dati e log in dischi separati, raccogliere questi dati per entrambi i dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-228">If you have a database server with its data and log on separate disks, collect this data for both disks.</span></span> <span data-ttu-id="03c0a-229">La tabella seguente illustra i contatori per dischi, processore e memoria:</span><span class="sxs-lookup"><span data-stu-id="03c0a-229">Below table describes counters for disks, processor and memory:</span></span>

| <span data-ttu-id="03c0a-230">Contatore</span><span class="sxs-lookup"><span data-stu-id="03c0a-230">Counter</span></span> | <span data-ttu-id="03c0a-231">Descrizione</span><span class="sxs-lookup"><span data-stu-id="03c0a-231">Description</span></span> | <span data-ttu-id="03c0a-232">PerfMon</span><span class="sxs-lookup"><span data-stu-id="03c0a-232">PerfMon</span></span> | <span data-ttu-id="03c0a-233">Iostat</span><span class="sxs-lookup"><span data-stu-id="03c0a-233">Iostat</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="03c0a-234">**IOPS o transazioni al secondo**</span><span class="sxs-lookup"><span data-stu-id="03c0a-234">**IOPS or Transactions per second**</span></span> |<span data-ttu-id="03c0a-235">Numero di richieste I/O rilasciate al disco di archiviazione a secondo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-235">Number of I/O requests issued to the storage disk per second.</span></span> |<span data-ttu-id="03c0a-236">Letture disco/sec </span><span class="sxs-lookup"><span data-stu-id="03c0a-236">Disk Reads/sec</span></span> <br> <span data-ttu-id="03c0a-237">Scritture disco/sec</span><span class="sxs-lookup"><span data-stu-id="03c0a-237">Disk Writes/sec</span></span> |<span data-ttu-id="03c0a-238">tps </span><span class="sxs-lookup"><span data-stu-id="03c0a-238">tps</span></span> <br> <span data-ttu-id="03c0a-239">r/s </span><span class="sxs-lookup"><span data-stu-id="03c0a-239">r/s</span></span> <br> <span data-ttu-id="03c0a-240">w/s</span><span class="sxs-lookup"><span data-stu-id="03c0a-240">w/s</span></span> |
| <span data-ttu-id="03c0a-241">**Letture e scritture del disco**</span><span class="sxs-lookup"><span data-stu-id="03c0a-241">**Disk Reads and Writes**</span></span> |<span data-ttu-id="03c0a-242">% di operazioni di lettura e scrittura eseguite sul disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-242">% of Reads and Write operations performed on the disk.</span></span> |<span data-ttu-id="03c0a-243">% Tempo lettura disco </span><span class="sxs-lookup"><span data-stu-id="03c0a-243">% Disk Read Time</span></span> <br> <span data-ttu-id="03c0a-244">% Tempo scrittura disco</span><span class="sxs-lookup"><span data-stu-id="03c0a-244">% Disk Write Time</span></span> |<span data-ttu-id="03c0a-245">r/s </span><span class="sxs-lookup"><span data-stu-id="03c0a-245">r/s</span></span> <br> <span data-ttu-id="03c0a-246">w/s</span><span class="sxs-lookup"><span data-stu-id="03c0a-246">w/s</span></span> |
| <span data-ttu-id="03c0a-247">**Velocità effettiva**</span><span class="sxs-lookup"><span data-stu-id="03c0a-247">**Throughput**</span></span> |<span data-ttu-id="03c0a-248">Quantità di dati letti da o scritti nel disco al secondo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-248">Amount of data read from or written to the disk per second.</span></span> |<span data-ttu-id="03c0a-249">Byte letti da disco/sec </span><span class="sxs-lookup"><span data-stu-id="03c0a-249">Disk Read Bytes/sec</span></span> <br> <span data-ttu-id="03c0a-250">Byte scritti su disco/sec</span><span class="sxs-lookup"><span data-stu-id="03c0a-250">Disk Write Bytes/sec</span></span> |<span data-ttu-id="03c0a-251">kB_read/s</span><span class="sxs-lookup"><span data-stu-id="03c0a-251">kB_read/s</span></span> <br> <span data-ttu-id="03c0a-252">kB_wrtn/s</span><span class="sxs-lookup"><span data-stu-id="03c0a-252">kB_wrtn/s</span></span> |
| <span data-ttu-id="03c0a-253">**Latency**</span><span class="sxs-lookup"><span data-stu-id="03c0a-253">**Latency**</span></span> |<span data-ttu-id="03c0a-254">Tempo totale necessario per completare una richiesta I/O per il disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-254">Total time to complete a disk IO request.</span></span> |<span data-ttu-id="03c0a-255">Media letture disco/sec </span><span class="sxs-lookup"><span data-stu-id="03c0a-255">Average Disk sec/Read</span></span> <br> <span data-ttu-id="03c0a-256">Media scritture disco/sec</span><span class="sxs-lookup"><span data-stu-id="03c0a-256">Average disk sec/Write</span></span> |<span data-ttu-id="03c0a-257">await </span><span class="sxs-lookup"><span data-stu-id="03c0a-257">await</span></span> <br> <span data-ttu-id="03c0a-258">svctm</span><span class="sxs-lookup"><span data-stu-id="03c0a-258">svctm</span></span> |
| <span data-ttu-id="03c0a-259">**Dimensioni I/O**</span><span class="sxs-lookup"><span data-stu-id="03c0a-259">**IO size**</span></span> |<span data-ttu-id="03c0a-260">Dimensioni delle richieste I/O rilasciate ai dischi di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-260">The size of I/O requests issues to the storage disks.</span></span> |<span data-ttu-id="03c0a-261">Media byte letti da disco </span><span class="sxs-lookup"><span data-stu-id="03c0a-261">Average Disk Bytes/Read</span></span> <br> <span data-ttu-id="03c0a-262">Media byte scritti su disco</span><span class="sxs-lookup"><span data-stu-id="03c0a-262">Average Disk Bytes/Write</span></span> |<span data-ttu-id="03c0a-263">avgrq-sz</span><span class="sxs-lookup"><span data-stu-id="03c0a-263">avgrq-sz</span></span> |
| <span data-ttu-id="03c0a-264">**Profondità coda**</span><span class="sxs-lookup"><span data-stu-id="03c0a-264">**Queue Depth**</span></span> |<span data-ttu-id="03c0a-265">Numero di richieste I/O in attesa che devono essere lette da o scritte nel disco di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-265">Number of outstanding I/O requests waiting to be read form or written to the storage disk.</span></span> |<span data-ttu-id="03c0a-266">Lunghezza corrente coda su disco</span><span class="sxs-lookup"><span data-stu-id="03c0a-266">Current Disk Queue Length</span></span> |<span data-ttu-id="03c0a-267">avgqu-sz</span><span class="sxs-lookup"><span data-stu-id="03c0a-267">avgqu-sz</span></span> |
| <span data-ttu-id="03c0a-268">**Max. memoria**</span><span class="sxs-lookup"><span data-stu-id="03c0a-268">**Max. Memory**</span></span> |<span data-ttu-id="03c0a-269">Quantità di memoria necessaria per eseguire correttamente un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-269">Amount of memory required to run application smoothly</span></span> |<span data-ttu-id="03c0a-270">% byte vincolati in uso</span><span class="sxs-lookup"><span data-stu-id="03c0a-270">% Committed Bytes in Use</span></span> |<span data-ttu-id="03c0a-271">Use vmstat</span><span class="sxs-lookup"><span data-stu-id="03c0a-271">Use vmstat</span></span> |
| <span data-ttu-id="03c0a-272">**Max. CPU**</span><span class="sxs-lookup"><span data-stu-id="03c0a-272">**Max. CPU**</span></span> |<span data-ttu-id="03c0a-273">Quantità di CPU necessaria per eseguire correttamente un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-273">Amount CPU required to run application smoothly</span></span> |<span data-ttu-id="03c0a-274">% tempo processore</span><span class="sxs-lookup"><span data-stu-id="03c0a-274">% Processor time</span></span> |<span data-ttu-id="03c0a-275">%util</span><span class="sxs-lookup"><span data-stu-id="03c0a-275">%util</span></span> |

<span data-ttu-id="03c0a-276">Altre informazioni su [iostat](http://linuxcommand.org/man_pages/iostat1.html) e [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span><span class="sxs-lookup"><span data-stu-id="03c0a-276">Learn more about [iostat](http://linuxcommand.org/man_pages/iostat1.html) and [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span></span>

## <a name="optimizing-application-performance"></a><span data-ttu-id="03c0a-277">Ottimizzazione delle prestazioni dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="03c0a-277">Optimizing Application Performance</span></span>
<span data-ttu-id="03c0a-278">I fattori principali che influenzano le prestazioni di un'applicazione in esecuzione nell'Archiviazione Premium sono costituiti dalla natura delle richieste I/O, dalle dimensioni della VM e del disco, dal numero di dischi, dalla memorizzazione nella cache del disco, dal multithreading e dalla profondità della coda.</span><span class="sxs-lookup"><span data-stu-id="03c0a-278">The main factors that influence performance of an application running on Premium Storage are Nature of IO Requests, VM size, Disk size, Number of disks, Disk Caching, Multithreading and Queue Depth.</span></span> <span data-ttu-id="03c0a-279">È possibile controllare alcuni di questi fattori con manopole fornite dal sistema.</span><span class="sxs-lookup"><span data-stu-id="03c0a-279">You can control some of these factors with knobs provided by the system.</span></span> <span data-ttu-id="03c0a-280">È possibile che la maggior parte delle applicazioni non consenta di modificare direttamente le dimensioni di I/O e la profondità della coda.</span><span class="sxs-lookup"><span data-stu-id="03c0a-280">Most applications may not give you an option to alter the IO size and Queue Depth directly.</span></span> <span data-ttu-id="03c0a-281">Ad esempio, se si usa SQL Server, non sarà possibile scegliere le dimensioni di I/O e la profondità della coda.</span><span class="sxs-lookup"><span data-stu-id="03c0a-281">For example, if you are using SQL Server, you cannot choose the IO size and queue depth.</span></span> <span data-ttu-id="03c0a-282">SQL Server sceglie i valori ottimali per le dimensioni di I/O e la profondità della coda per ottenere le prestazioni migliori possibili.</span><span class="sxs-lookup"><span data-stu-id="03c0a-282">SQL Server chooses the optimal IO size and queue depth values to get the most performance.</span></span> <span data-ttu-id="03c0a-283">È importante comprendere gli effetti di entrambi i tipi di fattori sulle prestazioni dell'applicazione, in modo da effettuare il provisioning delle risorse appropriate per soddisfare le esigenze relative alle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-283">It is important to understand the effects of both types of factors on your application performance, so that you can provision appropriate resources to meet performance needs.</span></span>

<span data-ttu-id="03c0a-284">In questa sezione è consigliabile vedere l'elenco di controllo creato relativo ai requisiti dell'applicazione per identificare le esigenze di ottimizzazione per le prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-284">Throughout this section, refer to the application requirements checklist that you created, to identify how much you need to optimize your application performance.</span></span> <span data-ttu-id="03c0a-285">L'elenco di controllo consentirà di determinare i fattori da perfezionare tra quelli illustrati in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-285">Based on that, you will be able to determine which factors from this section you will need to tune.</span></span> <span data-ttu-id="03c0a-286">Per verificare gli effetti di ogni fattore sulle prestazioni dell'applicazione, eseguire gli strumenti di benchmarking sulla configurazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-286">To witness the effects of each factor on your application performance, run benchmarking tools on your application setup.</span></span> <span data-ttu-id="03c0a-287">Per informazioni sui passaggi necessari per eseguire gli strumenti di benchmarking comuni in VM Windows e Linux, vedere la sezione [Benchmarking](#Benchmarking) alla fine dell'articolo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-287">Refer to the [Benchmarking](#Benchmarking) section at the end of this article for steps to run common benchmarking tools on Windows and Linux VMs.</span></span>

### <a name="optimizing-iops-throughput-and-latency-at-a-glance"></a><span data-ttu-id="03c0a-288">Breve panoramica sull'ottimizzazione di IOPS, velocità effettiva e latenza</span><span class="sxs-lookup"><span data-stu-id="03c0a-288">Optimizing IOPS, Throughput and Latency at a glance</span></span>
<span data-ttu-id="03c0a-289">Questa tabella riepiloga tutti i fattori relativi alle prestazioni e i passaggi necessari per ottimizzare IOPS, velocità effettiva e latenza.</span><span class="sxs-lookup"><span data-stu-id="03c0a-289">The table below summarizes all the performance factors and the steps to optimize IOPS, Throughput and Latency.</span></span> <span data-ttu-id="03c0a-290">Le sezioni successive al riepilogo illustreranno ogni fattore in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="03c0a-290">The sections following this summary will describe each factor is much more depth.</span></span>

| &nbsp; | <span data-ttu-id="03c0a-291">**IOPS**</span><span class="sxs-lookup"><span data-stu-id="03c0a-291">**IOPS**</span></span> | <span data-ttu-id="03c0a-292">**Velocità effettiva**</span><span class="sxs-lookup"><span data-stu-id="03c0a-292">**Throughput**</span></span> | <span data-ttu-id="03c0a-293">**Latency**</span><span class="sxs-lookup"><span data-stu-id="03c0a-293">**Latency**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="03c0a-294">**Scenario di esempio**</span><span class="sxs-lookup"><span data-stu-id="03c0a-294">**Example Scenario**</span></span> |<span data-ttu-id="03c0a-295">Applicazione OLTP aziendale che richiede una frequenza molto elevata di transazioni al secondo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-295">Enterprise OLTP application requiring very high transactions per second rate.</span></span> |<span data-ttu-id="03c0a-296">Applicazione aziendale di tipo data warehouse che elabora quantità elevate di dati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-296">Enterprise Data warehousing application processing large amounts of data.</span></span> |<span data-ttu-id="03c0a-297">Applicazioni quasi in tempo reale che necessitano di risposte immediate alle richieste degli utenti, ad esempio i giochi online.</span><span class="sxs-lookup"><span data-stu-id="03c0a-297">Near real-time applications requiring instant responses to user requests, like online gaming.</span></span> |
| <span data-ttu-id="03c0a-298">Fattori relativi alle prestazioni</span><span class="sxs-lookup"><span data-stu-id="03c0a-298">Performance factors</span></span> | &nbsp; | &nbsp; | &nbsp; |
| <span data-ttu-id="03c0a-299">**Dimensioni I/O**</span><span class="sxs-lookup"><span data-stu-id="03c0a-299">**IO size**</span></span> |<span data-ttu-id="03c0a-300">Dimensioni I/O ridotte producono valori superiori per IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-300">Smaller IO size yields higher IOPS.</span></span> |<span data-ttu-id="03c0a-301">Dimensioni I/O maggiori producono una velocità effettiva superiore.</span><span class="sxs-lookup"><span data-stu-id="03c0a-301">Larger IO size to yields higher Throughput.</span></span> | &nbsp;|
| <span data-ttu-id="03c0a-302">**Dimensioni macchina virtuale**</span><span class="sxs-lookup"><span data-stu-id="03c0a-302">**VM size**</span></span> |<span data-ttu-id="03c0a-303">Usare una dimensione di VM che offre IOPS superiori ai requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-303">Use a VM size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="03c0a-304">Per informazioni sulle dimensioni delle VM e i relativi limiti di IOPS, vedere qui.</span><span class="sxs-lookup"><span data-stu-id="03c0a-304">See VM sizes and their IOPS limits here.</span></span> |<span data-ttu-id="03c0a-305">Usare una dimensione di VM con un limite di velocità effettiva superiore ai requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-305">Use a VM size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="03c0a-306">Per informazioni sulle dimensioni delle VM e i relativi limiti di velocità effettiva, vedere qui.</span><span class="sxs-lookup"><span data-stu-id="03c0a-306">See VM sizes and their Throughput limits here.</span></span> |<span data-ttu-id="03c0a-307">Usare una dimensione di VM che offre limiti di ridimensionamento superiori ai requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-307">Use a VM size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="03c0a-308">Per informazioni sulle dimensioni delle VM e i relativi limiti, vedere qui.</span><span class="sxs-lookup"><span data-stu-id="03c0a-308">See VM sizes and their limits here.</span></span> |
| <span data-ttu-id="03c0a-309">**Dimensioni disco**</span><span class="sxs-lookup"><span data-stu-id="03c0a-309">**Disk size**</span></span> |<span data-ttu-id="03c0a-310">Usare una dimensione di disco che offre IOPS superiori ai requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-310">Use a disk size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="03c0a-311">Per informazioni sulle dimensioni dei dischi e i relativi limiti di IOPS, vedere qui.</span><span class="sxs-lookup"><span data-stu-id="03c0a-311">See disk sizes and their IOPS limits here.</span></span> |<span data-ttu-id="03c0a-312">Usare una dimensione di disco con un limite di velocità effettiva superiore ai requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-312">Use a disk size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="03c0a-313">Per informazioni sulle dimensioni dei dischi e i relativi limiti di velocità effettiva, vedere qui.</span><span class="sxs-lookup"><span data-stu-id="03c0a-313">See disk sizes and their Throughput limits here.</span></span> |<span data-ttu-id="03c0a-314">Usare una dimensione di disco che offre limiti di ridimensionamento superiori ai requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-314">Use a disk size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="03c0a-315">Per informazioni sulle dimensioni dei dischi e i relativi limiti, vedere qui.</span><span class="sxs-lookup"><span data-stu-id="03c0a-315">See disk sizes and their limits here.</span></span> |
| <span data-ttu-id="03c0a-316">**Limiti relativi al ridimensionamento di VM e dischi**</span><span class="sxs-lookup"><span data-stu-id="03c0a-316">**VM and Disk Scale Limits**</span></span> |<span data-ttu-id="03c0a-317">Il limite di IOPS della dimensione di VM scelta deve essere superiore al totale di IOPS basato sul disco di Archiviazione Premium collegato alla VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-317">IOPS limit of the VM size chosen should be greater than total IOPS driven by premium storage disks attached to it.</span></span> |<span data-ttu-id="03c0a-318">Il limite di velocità effettiva della dimensione di VM scelta deve essere superiore al totale di velocità effettiva basato sul disco di Archiviazione Premium collegato alla VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-318">Throughput limit of the VM size chosen should be greater than total Throughput driven by premium storage disks attached to it.</span></span> |<span data-ttu-id="03c0a-319">I limiti di ridimensionamento della dimensione di VM scelta devono essere superiori al totale dei limiti di ridimensionamento dei dischi di Archiviazione Premium collegati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-319">Scale limits of the VM size chosen must be greater than total scale limits of attached premium storage disks.</span></span> |
| <span data-ttu-id="03c0a-320">**Memorizzazione nella cache del disco**</span><span class="sxs-lookup"><span data-stu-id="03c0a-320">**Disk Caching**</span></span> |<span data-ttu-id="03c0a-321">Abilitare la cache ReadOnly nei dischi di Archiviazione Premium con operazioni con numero elevato di letture per ottenere un valore di IOPS di lettura più elevato.</span><span class="sxs-lookup"><span data-stu-id="03c0a-321">Enable ReadOnly Cache on premium storage disks with Read heavy operations to get higher Read IOPS.</span></span> | &nbsp; |<span data-ttu-id="03c0a-322">Abilitare la cache ReadOnly nei dischi di Archiviazione Premium con operazioni con numero elevato di letture per ottenere un valore molto basso per le latenze di lettura.</span><span class="sxs-lookup"><span data-stu-id="03c0a-322">Enable ReadOnly Cache on premium storage disks with Ready heavy operations to get very low Read latencies.</span></span> |
| <span data-ttu-id="03c0a-323">**Striping del disco**</span><span class="sxs-lookup"><span data-stu-id="03c0a-323">**Disk Striping**</span></span> |<span data-ttu-id="03c0a-324">Usare più dischi ed eseguirne lo striping per ottenere un limite combinato più elevato per IOPS e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="03c0a-324">Use multiple disks and stripe them together to get a combined higher IOPS and Throughput limit.</span></span> <span data-ttu-id="03c0a-325">Si noti che il limite combinato per ogni VM deve essere superiore ai limiti combinati dei dischi Premium collegati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-325">Note that the combined limit per VM should be higher than the combined limits of attached premium disks.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="03c0a-326">**Dimensioni di striping**</span><span class="sxs-lookup"><span data-stu-id="03c0a-326">**Stripe Size**</span></span> |<span data-ttu-id="03c0a-327">Dimensioni di striping ridotte per modelli di I/O casuali presenti in applicazioni OLTP.</span><span class="sxs-lookup"><span data-stu-id="03c0a-327">Smaller stripe size for random small IO pattern seen in OLTP applications.</span></span> <span data-ttu-id="03c0a-328">Ad esempio, usare dimensioni di striping pari a 64 KB per un'applicazione OLTP di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="03c0a-328">E.g., use stripe size of 64KB for SQL Server OLTP application.</span></span> |<span data-ttu-id="03c0a-329">Dimensioni di striping superiori per modelli di I/O sequenziali di grandi dimensioni presenti in applicazioni di tipo data warehouse.</span><span class="sxs-lookup"><span data-stu-id="03c0a-329">Larger stripe size for sequential large IO pattern seen in Data Warehouse applications.</span></span> <span data-ttu-id="03c0a-330">Ad esempio, usare dimensioni di striping pari a 256 KB per applicazioni SQL Server di tipo data warehouse.</span><span class="sxs-lookup"><span data-stu-id="03c0a-330">E.g., use 256KB stripe size for SQL Server Data warehouse application.</span></span> | &nbsp; |
| <span data-ttu-id="03c0a-331">**Multithreading**</span><span class="sxs-lookup"><span data-stu-id="03c0a-331">**Multithreading**</span></span> |<span data-ttu-id="03c0a-332">Usare il multithreading per effettuare il push di un numero più elevato di richieste nell'Archiviazione Premium, in modo da ottenere valori più elevati per IOPS e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="03c0a-332">Use multithreading to push higher number of requests to Premium Storage that will lead to higher IOPS and Throughput.</span></span> <span data-ttu-id="03c0a-333">Ad esempio, in SQL Server impostare un valore elevato per MAXDOP, in modo da allocare un numero maggiore di CPU a SQL Server.</span><span class="sxs-lookup"><span data-stu-id="03c0a-333">For example, on SQL Server set a high MAXDOP value to allocate more CPUs to SQL Server.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="03c0a-334">**Profondità coda**</span><span class="sxs-lookup"><span data-stu-id="03c0a-334">**Queue Depth**</span></span> |<span data-ttu-id="03c0a-335">Una profondità maggiore per la coda genera valori più elevati per IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-335">Larger Queue Depth yields higher IOPS.</span></span> |<span data-ttu-id="03c0a-336">Una profondità maggiore per la coda genera valori più elevati per la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="03c0a-336">Larger Queue Depth yields higher Throughput.</span></span> |<span data-ttu-id="03c0a-337">Una profondità minore per la coda genera latenze più basse.</span><span class="sxs-lookup"><span data-stu-id="03c0a-337">Smaller Queue Depth yields lower latencies.</span></span> |

## <a name="nature-of-io-requests"></a><span data-ttu-id="03c0a-338">Natura delle richieste I/O</span><span class="sxs-lookup"><span data-stu-id="03c0a-338">Nature of IO Requests</span></span>
<span data-ttu-id="03c0a-339">Una richiesta I/O è un'unità di operazioni di input/output che verrà eseguita dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-339">An IO request is a unit of input/output operation that your application will be performing.</span></span> <span data-ttu-id="03c0a-340">L'identificazione della natura delle richieste I/O, ovvero casuali o sequenziali, di lettura o scrittura, grandi o piccole, consentirà di determinare i requisiti relativi alle prestazioni per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-340">Identifying the nature of IO requests, random or sequential, read or write, small or large, will help you determine the performance requirements of your application.</span></span> <span data-ttu-id="03c0a-341">È molto importante comprendere la natura delle richieste I/O, in modo da pendere le decisioni corrette durante la progettazione dell'infrastruttura dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-341">It is very important to understand the nature of IO requests, to make the right decisions when designing your application infrastructure.</span></span>

<span data-ttu-id="03c0a-342">La dimensione di I/O è uno dei fattori più importanti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-342">IO size is one of the more important factors.</span></span> <span data-ttu-id="03c0a-343">Le dimensioni di I/O sono le dimensioni della richiesta di operazioni di input/output generata dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-343">The IO size is the size of the input/output operation request generated by your application.</span></span> <span data-ttu-id="03c0a-344">Le dimensioni di I/O hanno un impatto significativo sulle prestazioni, in particolare sui valori di IOPS e larghezza di banda che l'applicazione è in grado di ottenere.</span><span class="sxs-lookup"><span data-stu-id="03c0a-344">The IO size has a significant impact on performance especially on the IOPS and Bandwidth that the application is able to achieve.</span></span> <span data-ttu-id="03c0a-345">La formula seguente illustra la relazione tra IOPS, dimensioni di I/O e larghezza di banda/velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="03c0a-345">The following formula shows the relationship between IOPS, IO size and Bandwidth/Throughput.</span></span>  
    ![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="03c0a-346">Alcune applicazioni consentono di modificare le relative dimensioni di I/O, mentre altre applicazioni non lo consentono.</span><span class="sxs-lookup"><span data-stu-id="03c0a-346">Some applications allow you to alter their IO size, while some applications do not.</span></span> <span data-ttu-id="03c0a-347">Ad esempio, SQL Server determina automaticamente le dimensioni di I/O ottimali e non fornisce agli utenti manopole per la modifica.</span><span class="sxs-lookup"><span data-stu-id="03c0a-347">For example, SQL Server determines the optimal IO size itself, and does not provide users with any knobs to change it.</span></span> <span data-ttu-id="03c0a-348">D'altra parte, Oracle fornisce un parametro denominato [DB\_BLOCK\_SIZE](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) che consente di configurare la dimensione delle richieste I/O del database.</span><span class="sxs-lookup"><span data-stu-id="03c0a-348">On the other hand, Oracle provides a parameter called [DB\_BLOCK\_SIZE](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) using which you can configure the I/O request size of the database.</span></span>

<span data-ttu-id="03c0a-349">Se si usa un'applicazione che non consente la modifica delle dimensioni di I/O, usare le indicazioni disponibili in questo articolo per ottimizzare l'indicatore KPI relativo alle prestazioni più rilevante per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-349">If you are using an application, which does not allow you to change the IO size, use the guidelines in this article to optimize the performance KPI that is most relevant to your application.</span></span> <span data-ttu-id="03c0a-350">Ad esempio,</span><span class="sxs-lookup"><span data-stu-id="03c0a-350">For example,</span></span>

* <span data-ttu-id="03c0a-351">Un'applicazione OLTP genera milioni di richieste I/O piccole e casuali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-351">An OLTP application generates millions of small and random IO requests.</span></span> <span data-ttu-id="03c0a-352">Per gestire questo tipo di richieste I/O, è necessario progettare l'infrastruttura dell'applicazione in modo da ottenere valori di IOPS più elevati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-352">To handle these type of IO requests, you must design your application infrastructure to get higher IOPS.</span></span>  
* <span data-ttu-id="03c0a-353">Un'applicazione di tipo data warehouse genera richieste I/O di grandi dimensioni e sequenziali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-353">A data warehousing application generates large and sequential IO requests.</span></span> <span data-ttu-id="03c0a-354">Per gestire questo tipo di richieste I/O, è necessario progettare l'infrastruttura dell'applicazione in modo da ottenere valori di larghezza di banda e velocità effettiva più elevati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-354">To handle these type of IO requests, you must design your application infrastructure to get higher Bandwidth or Throughput.</span></span>

<span data-ttu-id="03c0a-355">Se si usa un'applicazione che consente la modifica delle dimensioni di I/O, usare questa regola generica per le dimensioni di I/O, oltre ad altre indicazioni relative alle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-355">If you are using an application, which allows you to change the IO size, use this rule of thumb for the IO size in addition to other performance guidelines,</span></span>

* <span data-ttu-id="03c0a-356">Dimensioni di I/O minori per ottenere valori di IOPS più elevati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-356">Smaller IO size to get higher IOPS.</span></span> <span data-ttu-id="03c0a-357">Ad esempio, 8 KB per un'applicazione OLTP.</span><span class="sxs-lookup"><span data-stu-id="03c0a-357">For example, 8 KB for an OLTP application.</span></span>  
* <span data-ttu-id="03c0a-358">Dimensioni di I/O maggiori per ottenere valori di larghezza di banda/velocità effettiva più elevati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-358">Larger IO size to get higher Bandwidth/Throughput.</span></span> <span data-ttu-id="03c0a-359">Ad esempio, 1024 KB per un'applicazione di tipo data warehouse.</span><span class="sxs-lookup"><span data-stu-id="03c0a-359">For example, 1024 KB for a data warehouse application.</span></span>

<span data-ttu-id="03c0a-360">Ecco un esempio di come è possibile calcolare i valori di IOPS e larghezza di banda/velocità effettiva per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-360">Here is an example on how you can calculate the IOPS and Throughput/Bandwidth for your application.</span></span> <span data-ttu-id="03c0a-361">Prendere in considerazione un'applicazione che usa un disco P30.</span><span class="sxs-lookup"><span data-stu-id="03c0a-361">Consider an application using a P30 disk.</span></span> <span data-ttu-id="03c0a-362">Il valore massimo di IOPS e larghezza di banda/velocità effettiva che può essere raggiunto da un disco P30 è pari a 5000 IOPS e 200 MB al secondo, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="03c0a-362">The maximum IOPS and Throughput/Bandwidth a P30 disk can achieve is 5000 IOPS and 200 MB per second respectively.</span></span> <span data-ttu-id="03c0a-363">Se l'applicazione richiede il valore di IOPS massimo dal disco P30 e si usano dimensioni di I/O minori, ad esempio 8 KB, il valore di larghezza di banda risultante che si potrà ottenere è pari a 40 MB al secondo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-363">Now, if your application requires the maximum IOPS from the P30 disk and you use a smaller IO size like 8 KB, the resulting Bandwidth you will be able to get is 40 MB per second.</span></span> <span data-ttu-id="03c0a-364">Se l'applicazione richiede il valore massimo di larghezza di banda/velocità effettiva dal disco P30 e si usano dimensioni di I/O maggiori, ad esempio 1024 KB, il valore di IOPS risultante sarà più basso, ad esempio 200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-364">However, if your application requires the maximum Throughput/Bandwidth from P30 disk, and you use a larger IO size like 1024 KB, the resulting IOPS will be less, 200 IOPS.</span></span> <span data-ttu-id="03c0a-365">È quindi necessario perfezionare le dimensioni di I/O in modo che soddisfino i requisiti relativi a IOPS e velocità effettiva/larghezza di banda dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-365">Therefore, tune the IO size such that it meets both your application's IOPS and Throughput/Bandwidth requirement.</span></span> <span data-ttu-id="03c0a-366">La tabella seguente riepiloga le diverse dimensioni di I/O e i valori di IOPS e velocità effettiva corrispondenti per un disco P30.</span><span class="sxs-lookup"><span data-stu-id="03c0a-366">Table below summarizes the different IO sizes and their corresponding IOPS and Throughput for a P30 disk.</span></span>

| <span data-ttu-id="03c0a-367">Requisiti dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="03c0a-367">Application Requirement</span></span> | <span data-ttu-id="03c0a-368">Dimensioni di I/O</span><span class="sxs-lookup"><span data-stu-id="03c0a-368">I/O size</span></span> | <span data-ttu-id="03c0a-369">IOPS</span><span class="sxs-lookup"><span data-stu-id="03c0a-369">IOPS</span></span> | <span data-ttu-id="03c0a-370">Velocità effettiva/Larghezza di banda</span><span class="sxs-lookup"><span data-stu-id="03c0a-370">Throughput/Bandwidth</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="03c0a-371">Operazioni di I/O al secondo max</span><span class="sxs-lookup"><span data-stu-id="03c0a-371">Max IOPS</span></span> |<span data-ttu-id="03c0a-372">8 KB</span><span class="sxs-lookup"><span data-stu-id="03c0a-372">8 KB</span></span> |<span data-ttu-id="03c0a-373">5.000</span><span class="sxs-lookup"><span data-stu-id="03c0a-373">5,000</span></span> |<span data-ttu-id="03c0a-374">40 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-374">40 MB per second</span></span> |
| <span data-ttu-id="03c0a-375">Velocità effettiva massima</span><span class="sxs-lookup"><span data-stu-id="03c0a-375">Max Throughput</span></span> |<span data-ttu-id="03c0a-376">1024 KB</span><span class="sxs-lookup"><span data-stu-id="03c0a-376">1024 KB</span></span> |<span data-ttu-id="03c0a-377">200</span><span class="sxs-lookup"><span data-stu-id="03c0a-377">200</span></span> |<span data-ttu-id="03c0a-378">200 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-378">200 MB per second</span></span> |
| <span data-ttu-id="03c0a-379">Velocità effettiva massima + IOPS elevati</span><span class="sxs-lookup"><span data-stu-id="03c0a-379">Max Throughput + high IOPS</span></span> |<span data-ttu-id="03c0a-380">64 KB</span><span class="sxs-lookup"><span data-stu-id="03c0a-380">64 KB</span></span> |<span data-ttu-id="03c0a-381">3.200</span><span class="sxs-lookup"><span data-stu-id="03c0a-381">3,200</span></span> |<span data-ttu-id="03c0a-382">200 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-382">200 MB per second</span></span> |
| <span data-ttu-id="03c0a-383">IOPS massimi + Velocità effettiva elevata</span><span class="sxs-lookup"><span data-stu-id="03c0a-383">Max IOPS + high Throughput</span></span> |<span data-ttu-id="03c0a-384">32 KB</span><span class="sxs-lookup"><span data-stu-id="03c0a-384">32 KB</span></span> |<span data-ttu-id="03c0a-385">5.000</span><span class="sxs-lookup"><span data-stu-id="03c0a-385">5,000</span></span> |<span data-ttu-id="03c0a-386">160 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-386">160 MB per second</span></span> |

<span data-ttu-id="03c0a-387">Per ottenere valori di IOPS e larghezza di banda più elevati rispetto al valore massimo di un singolo disco di Archiviazione Premium, usare più dischi Premium con striping.</span><span class="sxs-lookup"><span data-stu-id="03c0a-387">To get IOPS and Bandwidth higher than the maximum value of a single premium storage disk, use multiple premium disks striped together.</span></span> <span data-ttu-id="03c0a-388">Ad esempio, effettuare lo striping di due dischi P30 per ottenere un valore di IOPS combinato di 10.000 IOPS o un valore di velocità effettiva combinato di 400 MB al secondo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-388">For example, stripe two P30 disks to get a combined IOPS of 10,000 IOPS or a combined Throughput of 400 MB per second.</span></span> <span data-ttu-id="03c0a-389">Come illustrato nella sezione successiva, è necessario usare una dimensione di VM che supporta i valori combinati di IOPS e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="03c0a-389">As explained in the next section, you must use a VM size that supports the combined disk IOPS and Throughput.</span></span>

> [!NOTE]
> <span data-ttu-id="03c0a-390">poiché se si aumenta il valore di IOPS o di velocità effettiva aumenterà anche l'altro valore, è necessario assicurarsi di non raggiungere i limiti di velocità effettiva o IOPS del disco o della VM in caso di aumento di uno dei valori.</span><span class="sxs-lookup"><span data-stu-id="03c0a-390">As you increase either IOPS or Throughput the other also increases, make sure you do not hit throughput or IOPS limits of the disk or VM when increasing either one.</span></span>
>
>

<span data-ttu-id="03c0a-391">Per verificare gli effetti delle dimensioni di I/O sulle prestazioni dell'applicazione, è possibile eseguire gli strumenti di benchmarking sulle VM e sui dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-391">To witness the effects of IO size on application performance, you can run benchmarking tools on your VM and disks.</span></span> <span data-ttu-id="03c0a-392">Creare più esecuzioni dei test e usare diverse dimensioni di I/O per ogni esecuzione per verificarne l'impatto.</span><span class="sxs-lookup"><span data-stu-id="03c0a-392">Create multiple test runs and use different IO size for each run to see the impact.</span></span> <span data-ttu-id="03c0a-393">Per altri dettagli, vedere la sezione [Benchmarking](#Benchmarking) alla fine di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-393">Refer to the [Benchmarking](#Benchmarking) section at the end of this article for more details.</span></span>

## <a name="high-scale-vm-sizes"></a><span data-ttu-id="03c0a-394">Dimensioni di VM a scalabilità elevata</span><span class="sxs-lookup"><span data-stu-id="03c0a-394">High Scale VM Sizes</span></span>
<span data-ttu-id="03c0a-395">Quando si inizia a progettare un'applicazione, uno dei primi passaggi da eseguire consiste nel scegliere una VM in cui ospitare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-395">When you start designing an application, one of the first things to do is, choose a VM to host your application.</span></span> <span data-ttu-id="03c0a-396">L'Archiviazione Premium include dimensioni di VM a scalabilità elevata in grado di eseguire applicazioni che richiedono capacità di calcolo elevate e prestazioni di I/O elevate per il disco locale.</span><span class="sxs-lookup"><span data-stu-id="03c0a-396">Premium Storage comes with High Scale VM sizes that can run applications requiring higher compute power and a high local disk I/O performance.</span></span> <span data-ttu-id="03c0a-397">Queste VM forniscono processori più veloci, un rapporto più elevato tra memoria e core e un'unità SSD (Solid-State Drive) per il disco locale.</span><span class="sxs-lookup"><span data-stu-id="03c0a-397">These VMs provide faster processors, a higher memory-to-core ratio, and a Solid-State Drive (SSD) for the local disk.</span></span> <span data-ttu-id="03c0a-398">Esempi di VM a scalabilità elevata che supportano l'Archiviazione Premium sono le VM serie DS, DSv2 e GS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-398">Examples of High Scale VMs supporting Premium Storage are the DS, DSv2 and GS series VMs.</span></span>

<span data-ttu-id="03c0a-399">Le VM a scalabilità elevata sono disponibili in dimensioni diverse con un numero diverso di core CPU, memoria, sistema operativo e dimensioni del disco temporaneo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-399">High Scale VMs are available in different sizes with a different number of CPU cores, memory, OS and temporary disk size.</span></span> <span data-ttu-id="03c0a-400">Ogni dimensione di VM prevede anche un numero massimo di dischi dati che possono essere collegati alla VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-400">Each VM size also has maximum number of data disks that you can attach to the VM.</span></span> <span data-ttu-id="03c0a-401">La dimensione di VM scelta influirà quindi sulla quantità di elaborazione, memoria e capacità di archiviazione disponibile per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-401">Therefore, the chosen VM size will affect how much processing, memory, and storage capacity is available for your application.</span></span> <span data-ttu-id="03c0a-402">Influisce anche sui costi di calcolo e archiviazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-402">It also affects the Compute and Storage cost.</span></span> <span data-ttu-id="03c0a-403">Ad esempio, sono riportate di seguito le specifiche per la VM di dimensione massima per le serie DS, DSv2 e GS:</span><span class="sxs-lookup"><span data-stu-id="03c0a-403">For example, below are the specifications of the largest VM size in a DS series, DSv2 series and a GS series:</span></span>

| <span data-ttu-id="03c0a-404">Dimensioni macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="03c0a-404">VM size</span></span> | <span data-ttu-id="03c0a-405">Core CPU</span><span class="sxs-lookup"><span data-stu-id="03c0a-405">CPU cores</span></span> | <span data-ttu-id="03c0a-406">Memoria</span><span class="sxs-lookup"><span data-stu-id="03c0a-406">Memory</span></span> | <span data-ttu-id="03c0a-407">Dimensioni di disco della VM</span><span class="sxs-lookup"><span data-stu-id="03c0a-407">VM disk sizes</span></span> | <span data-ttu-id="03c0a-408">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-408">Max.</span></span> <span data-ttu-id="03c0a-409">dischi dati</span><span class="sxs-lookup"><span data-stu-id="03c0a-409">data disks</span></span> | <span data-ttu-id="03c0a-410">Dimensioni cache</span><span class="sxs-lookup"><span data-stu-id="03c0a-410">Cache size</span></span> | <span data-ttu-id="03c0a-411">IOPS</span><span class="sxs-lookup"><span data-stu-id="03c0a-411">IOPS</span></span> | <span data-ttu-id="03c0a-412">Limiti di I/O della cache della larghezza di banda</span><span class="sxs-lookup"><span data-stu-id="03c0a-412">Bandwidth Cache IO limits</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="03c0a-413">Standard_DS14</span><span class="sxs-lookup"><span data-stu-id="03c0a-413">Standard_DS14</span></span> |<span data-ttu-id="03c0a-414">16</span><span class="sxs-lookup"><span data-stu-id="03c0a-414">16</span></span> |<span data-ttu-id="03c0a-415">112 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-415">112 GB</span></span> |<span data-ttu-id="03c0a-416">Sistema operativo = 1023 GB </span><span class="sxs-lookup"><span data-stu-id="03c0a-416">OS = 1023 GB</span></span> <br> <span data-ttu-id="03c0a-417">SSD locale = 224 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-417">Local SSD = 224 GB</span></span> |<span data-ttu-id="03c0a-418">32</span><span class="sxs-lookup"><span data-stu-id="03c0a-418">32</span></span> |<span data-ttu-id="03c0a-419">576 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-419">576 GB</span></span> |<span data-ttu-id="03c0a-420">50.000 IOPS </span><span class="sxs-lookup"><span data-stu-id="03c0a-420">50,000 IOPS</span></span> <br> <span data-ttu-id="03c0a-421">512 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-421">512 MB per second</span></span> |<span data-ttu-id="03c0a-422">4.000 IOPS e 33 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-422">4,000 IOPS and 33 MB per second</span></span> |
| <span data-ttu-id="03c0a-423">Standard_GS5</span><span class="sxs-lookup"><span data-stu-id="03c0a-423">Standard_GS5</span></span> |<span data-ttu-id="03c0a-424">32</span><span class="sxs-lookup"><span data-stu-id="03c0a-424">32</span></span> |<span data-ttu-id="03c0a-425">448 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-425">448 GB</span></span> |<span data-ttu-id="03c0a-426">Sistema operativo = 1023 GB </span><span class="sxs-lookup"><span data-stu-id="03c0a-426">OS = 1023 GB</span></span> <br> <span data-ttu-id="03c0a-427">SSD locale = 896 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-427">Local SSD = 896 GB</span></span> |<span data-ttu-id="03c0a-428">64</span><span class="sxs-lookup"><span data-stu-id="03c0a-428">64</span></span> |<span data-ttu-id="03c0a-429">4224 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-429">4224 GB</span></span> |<span data-ttu-id="03c0a-430">80.000 IOPS </span><span class="sxs-lookup"><span data-stu-id="03c0a-430">80,000 IOPS</span></span> <br> <span data-ttu-id="03c0a-431">2.000 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-431">2,000 MB per second</span></span> |<span data-ttu-id="03c0a-432">5.000 IOPS e 50 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-432">5,000 IOPS and 50 MB per second</span></span> |

<span data-ttu-id="03c0a-433">Per visualizzare un elenco completo di tutte le dimensioni delle VM di Azure disponibili, vedere [Dimensioni per le macchine virtuali Windows](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) o [Dimensioni per le macchine virtuali Linux](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="03c0a-433">To view a complete list of all available Azure VM sizes, refer to [Windows VM sizes](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Linux VM sizes](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="03c0a-434">Scegliere una dimensione di VM in grado di soddisfare e adeguarsi ai requisiti relativi alle prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-434">Choose a VM size that can meet and scale to your desired application performance requirements.</span></span> <span data-ttu-id="03c0a-435">Quando si scelgono le dimensioni delle VM, è inoltre necessario esaminare le importanti considerazioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-435">In addition to this, take into account following important considerations when choosing VM sizes.</span></span>

<span data-ttu-id="03c0a-436">*Limiti di scalabilità*</span><span class="sxs-lookup"><span data-stu-id="03c0a-436">*Scale Limits*</span></span>  
<span data-ttu-id="03c0a-437">I limiti massimi per IOPS per ogni VM e ogni disco sono diversi e indipendenti gli uni dagli altri.</span><span class="sxs-lookup"><span data-stu-id="03c0a-437">The maximum IOPS limits per VM and per disk are different and independent of each other.</span></span> <span data-ttu-id="03c0a-438">Assicurarsi che l'applicazione gestisca i valori di IOPS entro i limiti della VM e dei dischi Premium collegati alla VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-438">Make sure that the application is driving IOPS within the limits of the VM as well as the premium disks attached to it.</span></span> <span data-ttu-id="03c0a-439">In caso contrario, le prestazioni dell'applicazione verranno limitate.</span><span class="sxs-lookup"><span data-stu-id="03c0a-439">Otherwise, application performance will experience throttling.</span></span>

<span data-ttu-id="03c0a-440">Si supponga, ad esempio, che i requisiti dell'applicazione siano pari a 4.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-440">As an example, suppose an application requirement is a maximum of 4,000 IOPS.</span></span> <span data-ttu-id="03c0a-441">Per ottenere questo risultato, effettuare il provisioning di un disco P30 su una VM DS1.</span><span class="sxs-lookup"><span data-stu-id="03c0a-441">To achieve this, you provision a P30 disk on a DS1 VM.</span></span> <span data-ttu-id="03c0a-442">Il disco P30 può raggiungere fino a 5.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-442">The P30 disk can deliver up to 5,000 IOPS.</span></span> <span data-ttu-id="03c0a-443">La VM DS1 è tuttavia limitata a 3.200 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-443">However, the DS1 VM is limited to 3,200 IOPS.</span></span> <span data-ttu-id="03c0a-444">Le prestazioni dell'applicazione verranno quindi vincolate dal limite della VM di 3.200 IOPS e le prestazioni risulteranno danneggiate.</span><span class="sxs-lookup"><span data-stu-id="03c0a-444">Consequently, the application performance will be constrained by the VM limit at 3,200 IOPS and there will be degraded performance.</span></span> <span data-ttu-id="03c0a-445">Per evitare questa situazione, scegliere dimensioni per VM e disco in grado di soddisfare entrambi i requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-445">To prevent this situation, choose a VM and disk size that will both meet application requirements.</span></span>

<span data-ttu-id="03c0a-446">*Costo operativo*</span><span class="sxs-lookup"><span data-stu-id="03c0a-446">*Cost of Operation*</span></span>  
<span data-ttu-id="03c0a-447">In molti casi è possibile che il costo operativo complessivo con l'Archiviazione Premium sia inferiore al costo dell'uso dell'Archiviazione Standard.</span><span class="sxs-lookup"><span data-stu-id="03c0a-447">In many cases, it is possible that your overall cost of operation using Premium Storage is lower than using Standard Storage.</span></span>

<span data-ttu-id="03c0a-448">Ad esempio, si consideri un'applicazione che richiede 16.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-448">For example, consider an application requiring 16,000 IOPS.</span></span> <span data-ttu-id="03c0a-449">Per ottenere queste prestazioni sarà necessaria una VM IaaS di Azure di tipo Standard\_StandardD14, che può offrire un valore massimo di IOPS pari a 16.000 usando 32 dischi di archiviazione Standard da 1 TB.</span><span class="sxs-lookup"><span data-stu-id="03c0a-449">To achieve this performance, you will need a Standard\_D14 Azure IaaS VM, which can give a maximum IOPS of 16,000 using 32 standard storage 1TB disks.</span></span> <span data-ttu-id="03c0a-450">Ogni disco di archiviazione Standard da 1 TB può raggiungere un valore massimo di 500 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-450">Each 1TB standard storage disk can achieve a maximum of 500 IOPS.</span></span> <span data-ttu-id="03c0a-451">Il costo stimato di questa VM al mese sarà pari a $ 1.570.</span><span class="sxs-lookup"><span data-stu-id="03c0a-451">The estimated cost of this VM per month will be $1,570.</span></span> <span data-ttu-id="03c0a-452">Il costo mensile di 32 dischi di archiviazione Standard sarà pari a $ 1.638.</span><span class="sxs-lookup"><span data-stu-id="03c0a-452">The monthly cost of 32 standard storage disks will be $1,638.</span></span> <span data-ttu-id="03c0a-453">Il costo totale mensile stimato sarà pari a $ 3.208.</span><span class="sxs-lookup"><span data-stu-id="03c0a-453">The estimated total monthly cost will be $3,208.</span></span>

<span data-ttu-id="03c0a-454">Se tuttavia la stessa applicazione è ospitata nell'Archiviazione Premium, sarà necessaria una dimensione di VM minore e saranno necessari meno dischi di Archiviazione Premium. Ciò consente una riduzione del costo complessivo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-454">However, if you hosted the same application on Premium Storage, you will need a smaller VM size and fewer premium storage disks, thus reducing the overall cost.</span></span> <span data-ttu-id="03c0a-455">Una VM Standard\_StandardDS13 può soddisfare il requisito di 16.000 IOPS con quattro dischi P30.</span><span class="sxs-lookup"><span data-stu-id="03c0a-455">A Standard\_DS13 VM can meet the 16,000 IOPS requirement using four P30 disks.</span></span> <span data-ttu-id="03c0a-456">La VM DS13 offre un valore massimo di IOPS pari a 25.600 e ogni disco P30 ha un valore massimo di IOPS pari a 5.000.</span><span class="sxs-lookup"><span data-stu-id="03c0a-456">The DS13 VM has a maximum IOPS of 25,600 and each P30 disk has a maximum IOPS of 5,000.</span></span> <span data-ttu-id="03c0a-457">Questa configurazione consente complessivamente di ottenere 5.000 x 4 = 20.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-457">Overall, this configuration can achieve 5,000 x 4 = 20,000 IOPS.</span></span> <span data-ttu-id="03c0a-458">Il costo stimato di questa VM al mese sarà pari a $ 1.003.</span><span class="sxs-lookup"><span data-stu-id="03c0a-458">The estimated cost of this VM per month will be $1,003.</span></span> <span data-ttu-id="03c0a-459">Il costo mensile di quattro dischi di Archiviazione Premium P30 sarà pari a $ 544,34.</span><span class="sxs-lookup"><span data-stu-id="03c0a-459">The monthly cost of four P30 premium storage disks will be $544.34.</span></span> <span data-ttu-id="03c0a-460">Il costo totale mensile stimato sarà pari a $ 1.544.</span><span class="sxs-lookup"><span data-stu-id="03c0a-460">The estimated total monthly cost will be $1,544.</span></span>

<span data-ttu-id="03c0a-461">La tabella seguente riepiloga la scomposizione costi di questo scenario per l'Archiviazione Premium e Standard.</span><span class="sxs-lookup"><span data-stu-id="03c0a-461">Table below summarizes the cost breakdown of this scenario for Standard and Premium Storage.</span></span>

| &nbsp; | <span data-ttu-id="03c0a-462">**Standard**</span><span class="sxs-lookup"><span data-stu-id="03c0a-462">**Standard**</span></span> | <span data-ttu-id="03c0a-463">**Premium**</span><span class="sxs-lookup"><span data-stu-id="03c0a-463">**Premium**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="03c0a-464">**Costo di VM al mese**</span><span class="sxs-lookup"><span data-stu-id="03c0a-464">**Cost of VM per month**</span></span> |<span data-ttu-id="03c0a-465">$1.570,58 (Standard\_D14)</span><span class="sxs-lookup"><span data-stu-id="03c0a-465">$1,570.58 (Standard\_D14)</span></span> |<span data-ttu-id="03c0a-466">$1.003,66 (Standard\_DS13)</span><span class="sxs-lookup"><span data-stu-id="03c0a-466">$1,003.66 (Standard\_DS13)</span></span> |
| <span data-ttu-id="03c0a-467">**Costo di dischi al mese**</span><span class="sxs-lookup"><span data-stu-id="03c0a-467">**Cost of Disks per month**</span></span> |<span data-ttu-id="03c0a-468">$ 1.638,40 (32 x dischi da 1 TB)</span><span class="sxs-lookup"><span data-stu-id="03c0a-468">$1,638.40 (32 x 1 TB disks)</span></span> |<span data-ttu-id="03c0a-469">$ 544,34 (4 x dischi P30)</span><span class="sxs-lookup"><span data-stu-id="03c0a-469">$544.34 (4 x P30 disks)</span></span> |
| <span data-ttu-id="03c0a-470">**Costo complessivo al mese**</span><span class="sxs-lookup"><span data-stu-id="03c0a-470">**Overall Cost per month**</span></span> |<span data-ttu-id="03c0a-471">$ 3.208,98</span><span class="sxs-lookup"><span data-stu-id="03c0a-471">$3,208.98</span></span> |<span data-ttu-id="03c0a-472">$ 1.544,34</span><span class="sxs-lookup"><span data-stu-id="03c0a-472">$1,544.34</span></span> |

<span data-ttu-id="03c0a-473">*Distribuzioni Linux*</span><span class="sxs-lookup"><span data-stu-id="03c0a-473">*Linux Distros*</span></span>  

<span data-ttu-id="03c0a-474">Archiviazione Premium di Azure offre lo stesso livello di prestazioni per le macchine virtuali che eseguono Windows e Linux.</span><span class="sxs-lookup"><span data-stu-id="03c0a-474">With Azure Premium Storage, you get the same level of Performance for VMs running Windows and Linux.</span></span> <span data-ttu-id="03c0a-475">Sono supportati molti tipi di distribuzioni di Linux. L'elenco completo è disponibile [qui](../../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="03c0a-475">We support many flavors of Linux distros, and you can see the complete list [here](../../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="03c0a-476">È importante notare che diverse distribuzioni sono ottimali per diversi tipi di carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="03c0a-476">It is important to note that different distros are better suited for different types of workloads.</span></span> <span data-ttu-id="03c0a-477">Si otterranno livelli diversi di prestazioni in base alla distribuzione in cui è in esecuzione il carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="03c0a-477">You will see different levels of performance depending on the distro your workload is running on.</span></span> <span data-ttu-id="03c0a-478">Testare le distribuzioni di Linux con l'applicazione e scegliere quella migliore per le esigenze specifiche.</span><span class="sxs-lookup"><span data-stu-id="03c0a-478">Test the Linux distros with your application and choose the one that works best.</span></span>

<span data-ttu-id="03c0a-479">Quando si esegue Linux con l'Archiviazione Premium, verificare se sono disponibili aggiornamenti recenti per i driver necessari, in modo da assicurare prestazioni elevate.</span><span class="sxs-lookup"><span data-stu-id="03c0a-479">When running Linux with Premium Storage, check the latest updates about required drivers to ensure high performance.</span></span>

## <a name="premium-storage-disk-sizes"></a><span data-ttu-id="03c0a-480">Dimensioni dei dischi di Archiviazione Premium</span><span class="sxs-lookup"><span data-stu-id="03c0a-480">Premium Storage Disk Sizes</span></span>
<span data-ttu-id="03c0a-481">L'Archiviazione Premium di Azure offre attualmente sette dimensioni di disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-481">Azure Premium Storage offers seven disk sizes currently.</span></span> <span data-ttu-id="03c0a-482">Ogni dimensione di disco ha un limite di scala diverso per IOPS, larghezza di banda e archiviazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-482">Each disk size has a different scale limit for IOPS, Bandwidth and Storage.</span></span> <span data-ttu-id="03c0a-483">Scegliere la dimensione del disco di Archiviazione Premium appropriata, in base ai requisiti dell'applicazione e le dimensioni delle VM a scalabilità elevata.</span><span class="sxs-lookup"><span data-stu-id="03c0a-483">Choose the right Premium Storage Disk size depending on the application requirements and the high scale VM size.</span></span> <span data-ttu-id="03c0a-484">La tabella seguente illustra le sette dimensioni di disco e le relative capacità.</span><span class="sxs-lookup"><span data-stu-id="03c0a-484">The table below shows the seven disks sizes and their capabilities.</span></span> <span data-ttu-id="03c0a-485">Le dimensioni di disco P4 e P6 sono attualmente supportate solo per Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="03c0a-485">P4 and P6 sizes are currently only supported for Managed Disks.</span></span>

| <span data-ttu-id="03c0a-486">Tipo di disco Premium</span><span class="sxs-lookup"><span data-stu-id="03c0a-486">Premium Disks Type</span></span>  | <span data-ttu-id="03c0a-487">P4</span><span class="sxs-lookup"><span data-stu-id="03c0a-487">P4</span></span>    | <span data-ttu-id="03c0a-488">P6</span><span class="sxs-lookup"><span data-stu-id="03c0a-488">P6</span></span>    | <span data-ttu-id="03c0a-489">P10</span><span class="sxs-lookup"><span data-stu-id="03c0a-489">P10</span></span>   | <span data-ttu-id="03c0a-490">P20</span><span class="sxs-lookup"><span data-stu-id="03c0a-490">P20</span></span>   | <span data-ttu-id="03c0a-491">P30</span><span class="sxs-lookup"><span data-stu-id="03c0a-491">P30</span></span>   | <span data-ttu-id="03c0a-492">P40</span><span class="sxs-lookup"><span data-stu-id="03c0a-492">P40</span></span>   | <span data-ttu-id="03c0a-493">P50</span><span class="sxs-lookup"><span data-stu-id="03c0a-493">P50</span></span>   | 
|---------------------|-------|-------|-------|-------|-------|-------|-------|
| <span data-ttu-id="03c0a-494">Dimensioni disco</span><span class="sxs-lookup"><span data-stu-id="03c0a-494">Disk size</span></span>           | <span data-ttu-id="03c0a-495">32 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-495">32 GB</span></span> | <span data-ttu-id="03c0a-496">64 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-496">64 GB</span></span> | <span data-ttu-id="03c0a-497">128 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-497">128 GB</span></span>| <span data-ttu-id="03c0a-498">512 GB</span><span class="sxs-lookup"><span data-stu-id="03c0a-498">512 GB</span></span>            | <span data-ttu-id="03c0a-499">1024 GB (1 TB)</span><span class="sxs-lookup"><span data-stu-id="03c0a-499">1024 GB (1 TB)</span></span>    | <span data-ttu-id="03c0a-500">2048 GB (2 TB)</span><span class="sxs-lookup"><span data-stu-id="03c0a-500">2048 GB (2 TB)</span></span>    | <span data-ttu-id="03c0a-501">4095 GB (4 TB)</span><span class="sxs-lookup"><span data-stu-id="03c0a-501">4095 GB (4 TB)</span></span>    | 
| <span data-ttu-id="03c0a-502">IOPS per disco</span><span class="sxs-lookup"><span data-stu-id="03c0a-502">IOPS per disk</span></span>       | <span data-ttu-id="03c0a-503">120</span><span class="sxs-lookup"><span data-stu-id="03c0a-503">120</span></span>   | <span data-ttu-id="03c0a-504">240</span><span class="sxs-lookup"><span data-stu-id="03c0a-504">240</span></span>   | <span data-ttu-id="03c0a-505">500</span><span class="sxs-lookup"><span data-stu-id="03c0a-505">500</span></span>   | <span data-ttu-id="03c0a-506">2300</span><span class="sxs-lookup"><span data-stu-id="03c0a-506">2300</span></span>              | <span data-ttu-id="03c0a-507">5000</span><span class="sxs-lookup"><span data-stu-id="03c0a-507">5000</span></span>              | <span data-ttu-id="03c0a-508">7500</span><span class="sxs-lookup"><span data-stu-id="03c0a-508">7500</span></span>              | <span data-ttu-id="03c0a-509">7500</span><span class="sxs-lookup"><span data-stu-id="03c0a-509">7500</span></span>              | 
| <span data-ttu-id="03c0a-510">Velocità effettiva per disco</span><span class="sxs-lookup"><span data-stu-id="03c0a-510">Throughput per disk</span></span> | <span data-ttu-id="03c0a-511">25 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-511">25 MB per second</span></span>  | <span data-ttu-id="03c0a-512">50 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-512">50 MB per second</span></span>  | <span data-ttu-id="03c0a-513">100 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-513">100 MB per second</span></span> | <span data-ttu-id="03c0a-514">150 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-514">150 MB per second</span></span> | <span data-ttu-id="03c0a-515">200 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-515">200 MB per second</span></span> | <span data-ttu-id="03c0a-516">250 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-516">250 MB per second</span></span> | <span data-ttu-id="03c0a-517">250 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="03c0a-517">250 MB per second</span></span> | 


<span data-ttu-id="03c0a-518">Il numero di dischi scelto dipende dalla dimensione scelta per il disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-518">How many disks you choose depends on the disk size chosen.</span></span> <span data-ttu-id="03c0a-519">È possibile usare un singolo disco P50 o più dischi P10 per soddisfare i requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-519">You could use a single P50 disk or multiple P10 disks to meet your application requirement.</span></span> <span data-ttu-id="03c0a-520">Valutare le considerazioni elencate di seguito quando si effettua la scelta.</span><span class="sxs-lookup"><span data-stu-id="03c0a-520">Take into account considerations listed below when making the choice.</span></span>

<span data-ttu-id="03c0a-521">*Limiti di scalabilità (IOPS e velocità effettiva)*</span><span class="sxs-lookup"><span data-stu-id="03c0a-521">*Scale Limits (IOPS and Throughput)*</span></span>  
<span data-ttu-id="03c0a-522">I limiti di IOPS e velocità effettiva di ogni dimensione di disco Premium sono diversi e non dipendono dai limiti di scalabilità delle VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-522">The IOPS and Throughput limits of each Premium disk size is different and independent from the VM scale limits.</span></span> <span data-ttu-id="03c0a-523">Assicurarsi che il valore totale di IOPS e velocità effettiva rientri nei limiti di scalabilità della dimensione scelta per la VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-523">Make sure that the total IOPS and Throughput from the disks are within scale limits of the chosen VM size.</span></span>

<span data-ttu-id="03c0a-524">Ad esempio, si supponga che un requisito di applicazione preveda una velocità effettiva massima di 250 MB/sec e si usi una VM DS4 con un singolo disco P30.</span><span class="sxs-lookup"><span data-stu-id="03c0a-524">For example, if an application requirement is a maximum of 250 MB/sec Throughput and you are using a DS4 VM with a single P30 disk.</span></span> <span data-ttu-id="03c0a-525">La VM DS4 può offrire una velocità effettiva massima di 256 MB/sec.</span><span class="sxs-lookup"><span data-stu-id="03c0a-525">The DS4 VM can give up to 256 MB/sec Throughput.</span></span> <span data-ttu-id="03c0a-526">Un singolo disco P30 ha tuttavia un limite di velocità effettiva pari a 200 MB/sec. L'applicazione sarà quindi limitata a 200 MB/sec a causa di questo limite del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-526">However, a single P30 disk has Throughput limit of 200 MB/sec. Consequently, the application will be constrained at 200 MB/sec due to the disk limit.</span></span> <span data-ttu-id="03c0a-527">Per superare questo limite, effettuare il provisioning di più dischi dati nella VM oppure ridimensionare i dischi a P40 o P50.</span><span class="sxs-lookup"><span data-stu-id="03c0a-527">To overcome this limit, provision more than one data disks to the VM or resize your disks to P40 or P50.</span></span>

> [!NOTE]
> <span data-ttu-id="03c0a-528">le operazioni di lettura fornite dalla cache non sono incluse nei valori di IOPS e velocità effettiva, quindi non sono soggette ai limiti del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-528">Reads served by the cache are not included in the disk IOPS and Throughput, hence not subject to disk limits.</span></span> <span data-ttu-id="03c0a-529">La cache ha un limite di IOPS e velocità effettiva specifico per ogni VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-529">Cache has its separate IOPS and Throughput limit per VM.</span></span>
>
> <span data-ttu-id="03c0a-530">Ad esempio, le operazioni di lettura e scrittura iniziali sono rispettivamente pari a 60 MB/sec e 40 MB/sec.</span><span class="sxs-lookup"><span data-stu-id="03c0a-530">For example, initially your reads and writes are 60MB/sec and 40MB/sec respectively.</span></span> <span data-ttu-id="03c0a-531">Nel corso del tempo, la cache migliora la propria operatività e fornisce un numero sempre maggiore di operazioni di lettura dalla cache.</span><span class="sxs-lookup"><span data-stu-id="03c0a-531">Over time, the cache warms up and serves more and more of the reads from the cache.</span></span> <span data-ttu-id="03c0a-532">Sarà quindi possibile ottenere una velocità effettiva di lettura superiore dal disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-532">Then, you can get higher write Throughput from the disk.</span></span>
>
>

<span data-ttu-id="03c0a-533">*Numero di dischi*</span><span class="sxs-lookup"><span data-stu-id="03c0a-533">*Number of Disks*</span></span>  
<span data-ttu-id="03c0a-534">Determinare il numero di dischi necessari esaminando i requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-534">Determine the number of disks you will need by assessing application requirements.</span></span> <span data-ttu-id="03c0a-535">Ogni dimensione di VM prevede anche un limite per il numero di dischi che possono essere collegati alla VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-535">Each VM size also has a limit on the number of disks that you can attach to the VM.</span></span> <span data-ttu-id="03c0a-536">In genere, questo valore corrisponde al doppio dei core.</span><span class="sxs-lookup"><span data-stu-id="03c0a-536">Typically, this is twice the number of cores.</span></span> <span data-ttu-id="03c0a-537">Assicurarsi che la dimensione di VM scelta sia in grado di supportare il numero di dischi necessari.</span><span class="sxs-lookup"><span data-stu-id="03c0a-537">Ensure that the VM size you choose can support the number of disks needed.</span></span>

<span data-ttu-id="03c0a-538">Occorre ricordare che i dischi di Archiviazione Premium hanno capacità di prestazioni più elevate rispetto ai dischi di Archiviazione Standard.</span><span class="sxs-lookup"><span data-stu-id="03c0a-538">Remember, the Premium Storage disks have higher performance capabilities compared to Standard Storage disks.</span></span> <span data-ttu-id="03c0a-539">Se quindi si esegue la migrazione dell'applicazione da una VM IaaS di Azure usando il passaggio dall'Archiviazione Standard all'Archiviazione Premium, è probabile che sia necessario un numero inferiore di dischi per ottenere le stesse prestazioni o prestazioni più elevate per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-539">Therefore, if you are migrating your application from Azure IaaS VM using Standard Storage to Premium Storage, you will likely need fewer premium disks to achieve the same or higher performance for your application.</span></span>

## <a name="disk-caching"></a><span data-ttu-id="03c0a-540">Memorizzazione nella cache del disco</span><span class="sxs-lookup"><span data-stu-id="03c0a-540">Disk Caching</span></span>
<span data-ttu-id="03c0a-541">Le VM a scalabilità elevata che sfruttano i vantaggi dell'Archiviazione Premium di Azure includono una tecnologia di memorizzazione nella cache multilivello denominata BlobCache.</span><span class="sxs-lookup"><span data-stu-id="03c0a-541">High Scale VMs that leverage Azure Premium Storage have a multi-tier caching technology called BlobCache.</span></span> <span data-ttu-id="03c0a-542">BlobCache usa una combinazione della RAM della macchina virtuale e dell'unità SSD locale per la memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="03c0a-542">BlobCache uses a combination of the Virtual Machine RAM and local SSD for caching.</span></span> <span data-ttu-id="03c0a-543">Questa cache è disponibile per i dischi persistenti di Archiviazione Premium e i dischi locali della VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-543">This cache is available for the Premium Storage persistent disks and the VM local disks.</span></span> <span data-ttu-id="03c0a-544">Per impostazione predefinita, questa impostazione della cache viene configurata su Read/Write per dischi del sistema operativo e ReadOnly per i dischi dati ospitati nell'Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-544">By default, this cache setting is set to Read/Write for OS disks and ReadOnly for data disks hosted on Premium Storage.</span></span> <span data-ttu-id="03c0a-545">Quando la memorizzazione nella cache su disco è abilitata nei dischi di Archiviazione Premium, le VM a scalabilità elevata possono raggiungere livelli estremamente elevati di prestazioni che superano le prestazioni sottostanti del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-545">With disk caching enabled on the Premium Storage disks, the high scale VMs can achieve extremely high levels of performance that exceed the underlying disk performance.</span></span>

> [!WARNING]
> <span data-ttu-id="03c0a-546">La modifica dell'impostazione della cache di un disco di Azure scollega e ricollega il disco di destinazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-546">Changing the cache setting of an Azure disk detaches and re-attaches the target disk.</span></span> <span data-ttu-id="03c0a-547">Se si tratta del disco del sistema operativo, la VM viene riavviata.</span><span class="sxs-lookup"><span data-stu-id="03c0a-547">If it is the operating system disk, the VM is restarted.</span></span> <span data-ttu-id="03c0a-548">Arrestare tutte le applicazioni/i servizi che potrebbero essere interessati da questa interruzione prima di modificare l'impostazione della cache del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-548">Stop all applications/services that might be affected by this disruption before changing the disk cache setting.</span></span>
>
>

<span data-ttu-id="03c0a-549">Per altre informazioni sul funzionamento di BlobCache, vedere il post di blog relativo all' [Archiviazione Premium di Azure](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) .</span><span class="sxs-lookup"><span data-stu-id="03c0a-549">To learn more about how BlobCache works, refer to the Inside [Azure Premium Storage](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) blog post.</span></span>

<span data-ttu-id="03c0a-550">È importante abilitare la cache sul set corretto di dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-550">It is important to enable cache on the right set of disks.</span></span> <span data-ttu-id="03c0a-551">L'abilitazione o meno della memorizzazione nella cache su disco in un disco Premium dipende dal modello di carichi di lavoro che verranno gestiti dal disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-551">Whether you should enable disk caching on a premium disk or not will depend on the workload pattern that disk will be handling.</span></span> <span data-ttu-id="03c0a-552">La tabella seguente illustra le impostazioni predefinite della cache per i dischi sistema operativo e i dischi dati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-552">Table below shows the default cache settings for OS and Data disks.</span></span>

| <span data-ttu-id="03c0a-553">**Tipo di disco**</span><span class="sxs-lookup"><span data-stu-id="03c0a-553">**Disk Type**</span></span> | <span data-ttu-id="03c0a-554">**Impostazione predefinita per la cache**</span><span class="sxs-lookup"><span data-stu-id="03c0a-554">**Default Cache Setting**</span></span> |
| --- | --- |
| <span data-ttu-id="03c0a-555">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="03c0a-555">OS disk</span></span> |<span data-ttu-id="03c0a-556">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="03c0a-556">ReadWrite</span></span> |
| <span data-ttu-id="03c0a-557">Disco dati</span><span class="sxs-lookup"><span data-stu-id="03c0a-557">Data disk</span></span> |<span data-ttu-id="03c0a-558">None</span><span class="sxs-lookup"><span data-stu-id="03c0a-558">None</span></span> |

<span data-ttu-id="03c0a-559">Ecco le impostazioni consigliate per la cache su disco per i dischi dati:</span><span class="sxs-lookup"><span data-stu-id="03c0a-559">Following are the recommended disk cache settings for data disks,</span></span>

| <span data-ttu-id="03c0a-560">**Impostazione per la memorizzazione nella cache su disco**</span><span class="sxs-lookup"><span data-stu-id="03c0a-560">**Disk Caching Setting**</span></span> | <span data-ttu-id="03c0a-561">**Indicazione sull'uso di questa impostazione**</span><span class="sxs-lookup"><span data-stu-id="03c0a-561">**Recommendation on when to use this setting**</span></span> |
| --- | --- |
| <span data-ttu-id="03c0a-562">None</span><span class="sxs-lookup"><span data-stu-id="03c0a-562">None</span></span> |<span data-ttu-id="03c0a-563">Configurare la cache host come None per dischi di sola scrittura e dischi con numero elevato di operazioni di scrittura.</span><span class="sxs-lookup"><span data-stu-id="03c0a-563">Configure host-cache as None for write-only and write-heavy disks.</span></span> |
| <span data-ttu-id="03c0a-564">ReadOnly</span><span class="sxs-lookup"><span data-stu-id="03c0a-564">ReadOnly</span></span> |<span data-ttu-id="03c0a-565">Configurare la cache host come ReadOnly per dischi di sola lettura e di lettura-scrittura.</span><span class="sxs-lookup"><span data-stu-id="03c0a-565">Configure host-cache as ReadOnly for read-only and read-write disks.</span></span> |
| <span data-ttu-id="03c0a-566">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="03c0a-566">ReadWrite</span></span> |<span data-ttu-id="03c0a-567">Configurare la cache host come ReadWrite solo se l'applicazione gestisce correttamente la scrittura di dati memorizzati nella cache in dischi persistenti, quando necessario.</span><span class="sxs-lookup"><span data-stu-id="03c0a-567">Configure host-cache as ReadWrite only if your application properly  handles writing cached data to persistent disks when needed.</span></span> |

<span data-ttu-id="03c0a-568">*ReadOnly*</span><span class="sxs-lookup"><span data-stu-id="03c0a-568">*ReadOnly*</span></span>  
<span data-ttu-id="03c0a-569">Configurando la memorizzazione nella cache ReadOnly nei dischi dati di Archiviazione Premium, è possibile ottenere una latenza di lettura bassa e valori molto elevati di IOPS e velocità effettiva di lettura per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-569">By configuring ReadOnly caching on Premium Storage data disks, you can achieve low Read latency and get very high Read IOPS and Throughput for your application.</span></span> <span data-ttu-id="03c0a-570">Questo è dovuto ai due motivi seguenti:</span><span class="sxs-lookup"><span data-stu-id="03c0a-570">This is due two reasons,</span></span>

1. <span data-ttu-id="03c0a-571">Le letture eseguite dalla cache, che si trova nella memoria della VM e nell'unità SSD locale, sono più veloci rispetto alle letture dal disco dati, che si trova nell'archivio BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="03c0a-571">Reads performed from cache, which is on the VM memory and local SSD, are much faster than reads from the data disk, which is on the Azure blob storage.</span></span>  
2. <span data-ttu-id="03c0a-572">L'Archiviazione Premium non include le operazioni di lettura fornite dalla cache nel calcolo dei valori di IOPS e velocità effettiva del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-572">Premium Storage does not count the Reads served from cache, towards the disk IOPS and Throughput.</span></span> <span data-ttu-id="03c0a-573">L'applicazione è quindi in grado di ottenere valori totali di IOPS e velocità effettiva più elevati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-573">Therefore, your application is able to achieve higher total IOPS and Throughput.</span></span>

<span data-ttu-id="03c0a-574">*ReadWrite*</span><span class="sxs-lookup"><span data-stu-id="03c0a-574">*ReadWrite*</span></span>  
<span data-ttu-id="03c0a-575">Per impostazione predefinita, la memorizzazione nella cache ReadWrite è abilitata nei dischi sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-575">By default, the OS disks have ReadWrite caching enabled.</span></span> <span data-ttu-id="03c0a-576">È stato recentemente aggiunto il supporto per la memorizzazione nella cache ReadWrite anche sui dischi dati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-576">We have recently added support for ReadWrite caching on data disks as well.</span></span> <span data-ttu-id="03c0a-577">Se si usa la memorizzazione nella cache ReadWrite, è necessario scrivere in modo corretto i dati dalla cache ai dischi persistenti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-577">If you are using ReadWrite caching, you must have a proper way to write the data from cache to persistent disks.</span></span> <span data-ttu-id="03c0a-578">Ad esempio, SQL Server gestisce automaticamente la scrittura di dati memorizzati nella cache nei dischi di archiviazione permanente.</span><span class="sxs-lookup"><span data-stu-id="03c0a-578">For example, SQL Server handles writing cached data to the persistent storage disks on its own.</span></span> <span data-ttu-id="03c0a-579">L'uso della cache di tipo ReadWrite con un'applicazione che non gestisce la persistenza dei dati necessari può provocare la perdita dei dati, in caso di arresto anomalo della VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-579">Using ReadWrite cache with an application that does not handle persisting the required data can lead to data loss, if the VM crashes.</span></span>

<span data-ttu-id="03c0a-580">È ad esempio possibile applicare queste indicazioni a SQL Server in esecuzione sull'Archiviazione Premium seguendo questa procedura:</span><span class="sxs-lookup"><span data-stu-id="03c0a-580">As an example, you can apply these guidelines to SQL Server running on Premium Storage by doing the following,</span></span>

1. <span data-ttu-id="03c0a-581">Configurare la cache "ReadOnly" nei dischi di Archiviazione Premium che ospitano i file di dati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-581">Configure "ReadOnly" cache on premium storage disks hosting data files.</span></span>  
   <span data-ttu-id="03c0a-582">a.</span><span class="sxs-lookup"><span data-stu-id="03c0a-582">a.</span></span>  <span data-ttu-id="03c0a-583">Le operazioni rapide di lettura dalla cache riducono il tempo necessario per le query di SQL Server, poiché le pagine di dati vengono recuperate in modo molto più veloce dalla cache rispetto dal recupero diretto dai dischi dati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-583">The fast reads from cache lower the SQL Server query time since data pages are retrieved much faster from the cache compared to directly from the data disks.</span></span>  
   <span data-ttu-id="03c0a-584">b.</span><span class="sxs-lookup"><span data-stu-id="03c0a-584">b.</span></span>  <span data-ttu-id="03c0a-585">Le fornitura delle letture dalla cache consente di rendere disponibile velocità effettiva aggiuntiva dai dischi dati Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-585">Serving reads from cache, means there is additional Throughput available from premium data disks.</span></span> <span data-ttu-id="03c0a-586">SQL Server può usare questa velocità effettiva aggiuntiva per recuperare un numero superiore di pagine di dati e altre operazioni come il backup/ripristino, i carichi in batch e le ricompilazioni degli indici.</span><span class="sxs-lookup"><span data-stu-id="03c0a-586">SQL Server can use this additional Throughput towards retrieving more data pages and other operations like backup/restore, batch loads, and index rebuilds.</span></span>  
2. <span data-ttu-id="03c0a-587">Configurare la cache "None" nei dischi di Archiviazione Premium che ospitano i file di log.</span><span class="sxs-lookup"><span data-stu-id="03c0a-587">Configure "None" cache on premium storage disks hosting the log files.</span></span>  
   <span data-ttu-id="03c0a-588">a.</span><span class="sxs-lookup"><span data-stu-id="03c0a-588">a.</span></span>  <span data-ttu-id="03c0a-589">I file di log hanno principalmente operazioni intensive a livello di lettura.</span><span class="sxs-lookup"><span data-stu-id="03c0a-589">Log files have primarily write-heavy operations.</span></span> <span data-ttu-id="03c0a-590">Non ottengono quindi alcun vantaggio dalla cache ReadOnly.</span><span class="sxs-lookup"><span data-stu-id="03c0a-590">Therefore, they do not benefit from the ReadOnly cache.</span></span>

## <a name="disk-striping"></a><span data-ttu-id="03c0a-591">Striping del disco</span><span class="sxs-lookup"><span data-stu-id="03c0a-591">Disk Striping</span></span>
<span data-ttu-id="03c0a-592">Quando una VM a scalabilità elevata è collegata ad alcuni dischi persistenti di Archiviazione Premium, è possibile effettuare lo striping dei dischi per aggregare le relative capacità di IOPS, larghezza di banda e archiviazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-592">When a high scale VM is attached with several premium storage persistent disks, the disks can be striped together to aggregate their IOPs, bandwidth, and storage capacity.</span></span>

<span data-ttu-id="03c0a-593">In Windows è possibile usare gli spazi di archiviazione per lo striping dei dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-593">On Windows, you can use Storage Spaces to stripe disks together.</span></span> <span data-ttu-id="03c0a-594">È necessario configurare una colonna per ogni disco in un pool.</span><span class="sxs-lookup"><span data-stu-id="03c0a-594">You must configure one column for each disk in a pool.</span></span> <span data-ttu-id="03c0a-595">In caso contrario, le prestazioni complessive di un volume con striping possono essere inferiori al previsto, a causa della distribuzione non uniforme del traffico nei dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-595">Otherwise, the overall performance of striped volume can be lower than expected, due to uneven distribution of traffic across the disks.</span></span>

<span data-ttu-id="03c0a-596">Importante: l'uso dell'interfaccia utente di Gestione server consente di impostare il numero totale di colonne fino a un massimo di 8 per un volume con striping.</span><span class="sxs-lookup"><span data-stu-id="03c0a-596">Important: Using Server Manager UI, you can set the total number of columns up to 8 for a striped volume.</span></span> <span data-ttu-id="03c0a-597">Quando si collegano più di 8 dischi, usare PowerShell per creare il volume.</span><span class="sxs-lookup"><span data-stu-id="03c0a-597">When attaching more than 8 disks, use PowerShell to create the volume.</span></span> <span data-ttu-id="03c0a-598">L'uso di PowerShell consente di impostare un numero di colonne uguale al numero di dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-598">Using PowerShell, you can set the number of columns equal to the number of disks.</span></span> <span data-ttu-id="03c0a-599">Ad esempio, se un singolo set di striping include 16 dischi, specificare 16 colonne nel parametro *NumberOfColumns* del cmdlet *New-VirtualDisk* di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="03c0a-599">For example, if there are 16 disks in a single stripe set; specify 16 columns in the *NumberOfColumns* parameter of the *New-VirtualDisk* PowerShell cmdlet.</span></span>

<span data-ttu-id="03c0a-600">In Linux usare l'utilità MDADM per lo striping dei dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-600">On Linux, use the MDADM utility to stripe disks together.</span></span> <span data-ttu-id="03c0a-601">Per informazioni dettagliate sulla procedura di striping dei dischi su Linux, vedere [Configurare RAID software in Linux](../../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="03c0a-601">For detailed steps on striping disks on Linux refer to [Configure Software RAID on Linux](../../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

<span data-ttu-id="03c0a-602">*Dimensioni di striping*</span><span class="sxs-lookup"><span data-stu-id="03c0a-602">*Stripe Size*</span></span>  
<span data-ttu-id="03c0a-603">Un elemento importante della configurazione dello striping del disco è la dimensione di striping.</span><span class="sxs-lookup"><span data-stu-id="03c0a-603">An important configuration in disk striping is the stripe size.</span></span> <span data-ttu-id="03c0a-604">La dimensione di striping o la dimensione del blocco è il blocco più piccolo di dati che l'applicazione può gestire in un volume con striping.</span><span class="sxs-lookup"><span data-stu-id="03c0a-604">The stripe size or block size is the smallest chunk of data that application can address on a striped volume.</span></span> <span data-ttu-id="03c0a-605">La dimensione di striping configurabile dipende dal tipo di applicazione e dal relativo modello di richieste.</span><span class="sxs-lookup"><span data-stu-id="03c0a-605">The stripe size you configure depends on the type of application and its request pattern.</span></span> <span data-ttu-id="03c0a-606">Se si sceglie la dimensione di striping errata, è possibile che si ottenga un allineamento di I/O non corretto, che porta a prestazioni degradate per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-606">If you choose the wrong stripe size, it could lead to IO misalignment, which leads to degraded performance of your application.</span></span>

<span data-ttu-id="03c0a-607">Ad esempio, se una richiesta I/O generata dall'applicazione è maggiore della dimensione di striping del disco, il sistema di archiviazione la scrive oltre i limiti di unità di striping in più dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-607">For example, if an IO request generated by your application is bigger than the disk stripe size, the storage system writes it across stripe unit boundaries on more than one disk.</span></span> <span data-ttu-id="03c0a-608">Quando è necessario accedere ai dati, occorrerà cercarli in più unità di striping per completare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="03c0a-608">When it is time to access that data, it will have to seek across more than one stripe units to complete the request.</span></span> <span data-ttu-id="03c0a-609">L'effetto cumulativo di questo comportamento può portare a una riduzione significativa delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-609">The cumulative effect of such behavior can lead to substantial performance degradation.</span></span> <span data-ttu-id="03c0a-610">D'altra parte, se la dimensione della richiesta I/O è minore della dimensione di striping ed è di tipo casuale, è possibile che le richieste I/P si concentrino sullo stesso disco, provocando un collo di bottiglia e danneggiando le prestazioni di I/O.</span><span class="sxs-lookup"><span data-stu-id="03c0a-610">On the other hand, if the IO request size is smaller than stripe size, and if it is random in nature, the IO requests may add up on the same disk causing a bottleneck and ultimately degrading the IO performance.</span></span>

<span data-ttu-id="03c0a-611">Scegliere una dimensione di striping appropriata in base a tipo di carico di lavoro eseguito dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-611">Depending on the type of workload your application is running, choose an appropriate stripe size.</span></span> <span data-ttu-id="03c0a-612">Per richieste I/O di piccole dimensioni e casuali, usare una dimensione di striping minore.</span><span class="sxs-lookup"><span data-stu-id="03c0a-612">For random small IO requests, use a smaller stripe size.</span></span> <span data-ttu-id="03c0a-613">Per richieste I/O di grandi dimensioni e sequenziali, usare una dimensione di striping maggiore.</span><span class="sxs-lookup"><span data-stu-id="03c0a-613">Whereas, for large sequential IO requests use a larger stripe size.</span></span> <span data-ttu-id="03c0a-614">Esaminare le indicazioni relative alle dimensioni di striping per l'applicazione da eseguire nell'Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-614">Find out the stripe size recommendations for the application you will be running on Premium Storage.</span></span> <span data-ttu-id="03c0a-615">Per SQL Server configurare dimensioni di striping pari a 64 KB per carichi di lavoro OLTP e 256 KB per carichi di lavoro di tipo data warehouse.</span><span class="sxs-lookup"><span data-stu-id="03c0a-615">For SQL Server, configure stripe size of 64KB for OLTP workloads and 256KB for data warehousing workloads.</span></span> <span data-ttu-id="03c0a-616">Per altre informazioni, vedere [Procedure consigliate per le prestazioni per SQL Server in Macchine virtuali di Azure](../../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) .</span><span class="sxs-lookup"><span data-stu-id="03c0a-616">See [Performance best practices for SQL Server on Azure VMs](../../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) to learn more.</span></span>

> [!NOTE]
> <span data-ttu-id="03c0a-617">è possibile effettuare lo striping di un massimo di 32 dischi di Archiviazione Premium in una VM di serie DS e di 64 dischi di Archiviazione Premium in una VM di serie GS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-617">You can stripe together a maximum of 32 premium storage disks on a DS series VM and 64 premium storage disks on a GS series VM.</span></span>
>
>

## <a name="multi-threading"></a><span data-ttu-id="03c0a-618">Multithreading</span><span class="sxs-lookup"><span data-stu-id="03c0a-618">Multi-threading</span></span>
<span data-ttu-id="03c0a-619">Azure ha progettato la piattaforma di Archiviazione Premium in modo che sia notevolmente parallela.</span><span class="sxs-lookup"><span data-stu-id="03c0a-619">Azure has designed Premium Storage platform to be massively parallel.</span></span> <span data-ttu-id="03c0a-620">Un'applicazione multithreading ottiene prestazioni molto più elevate rispetto a un'applicazione a thread singolo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-620">Therefore, a multi-threaded application achieves much higher performance than a single-threaded application.</span></span> <span data-ttu-id="03c0a-621">Un'applicazione multithreading suddivide le proprie attività in più thread e aumenta l'efficienza dell'esecuzione utilizzando al massimo la VM e le risorse del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-621">A multi-threaded application splits up its tasks across multiple threads and increases efficiency of its execution by utilizing the VM and disk resources to the maximum.</span></span>

<span data-ttu-id="03c0a-622">Ad esempio, se l'applicazione è in esecuzione su una VM a core singolo con due thread, la CPU può passare da un thread all'altro per ottenere l'efficienza.</span><span class="sxs-lookup"><span data-stu-id="03c0a-622">For example, if your application is running on a single core VM using two threads, the CPU can switch between the two threads to achieve efficiency.</span></span> <span data-ttu-id="03c0a-623">Mentre un thread attende il completamento di un'operazione I/O su disco, la CPU può passare all'altro thread.</span><span class="sxs-lookup"><span data-stu-id="03c0a-623">While one thread is waiting on a disk IO to complete, the CPU can switch to the other thread.</span></span> <span data-ttu-id="03c0a-624">In questo modo, due thread possono ottenere molto di più rispetto a un singolo thread.</span><span class="sxs-lookup"><span data-stu-id="03c0a-624">In this way, two threads can accomplish more than a single thread would.</span></span> <span data-ttu-id="03c0a-625">Se la VM ha più di un core, riduce ulteriormente il tempo di esecuzione, perché ogni core può eseguire attività in parallelo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-625">If the VM has more than one core, it further decreases running time since each core can execute tasks in parallel.</span></span>

<span data-ttu-id="03c0a-626">È possibile che non si riesca a cambiare il modo in cui un'applicazione non modificabile implementa la modalità a thread singolo o il multithreading.</span><span class="sxs-lookup"><span data-stu-id="03c0a-626">You may not be able to change the way an off-the-shelf application implements single threading or multi-threading.</span></span> <span data-ttu-id="03c0a-627">Ad esempio, SQL Server è in grado di gestire più CPU e più core.</span><span class="sxs-lookup"><span data-stu-id="03c0a-627">For example, SQL Server is capable of handling multi-CPU and multi-core.</span></span> <span data-ttu-id="03c0a-628">SQL Server decide tuttavia in che condizioni sfruttare i vantaggi di uno o più thread per elaborare una query.</span><span class="sxs-lookup"><span data-stu-id="03c0a-628">However, SQL Server decides under what conditions it will leverage one or more threads to process a query.</span></span> <span data-ttu-id="03c0a-629">Può eseguire query e compilare indici usando il multithreading.</span><span class="sxs-lookup"><span data-stu-id="03c0a-629">It can run queries and build indexes using multi-threading.</span></span> <span data-ttu-id="03c0a-630">Per una query che comporta l'unione di più tabelle e l'ordinamento dei dati prima di restituire risultati all'utente, SQL Server userà probabilmente più thread.</span><span class="sxs-lookup"><span data-stu-id="03c0a-630">For a query that involves joining large tables and sorting data before returning to the user, SQL Server will likely use multiple threads.</span></span> <span data-ttu-id="03c0a-631">Un utente non può tuttavia controllare se SQL Server esegue una query usando un singolo thread o più thread.</span><span class="sxs-lookup"><span data-stu-id="03c0a-631">However, a user cannot control whether SQL Server executes a query using a single thread or multiple threads.</span></span>

<span data-ttu-id="03c0a-632">È possibile modificare alcune impostazioni di configurazione per influenzare l'elaborazione multithreading o parallela di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-632">There are configuration settings that you can alter to influence this multi-threading or parallel processing of an application.</span></span> <span data-ttu-id="03c0a-633">Ad esempio, nel caso di SQL Server è possibile modificare la configurazione Massimo grado parallelismo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-633">For example, in case of SQL Server it is the maximum Degree of Parallelism configuration.</span></span> <span data-ttu-id="03c0a-634">Questa impostazione, denominata MAXDOP, consente di configurare il numero massimo di processori che SQL Server può usare durante l'elaborazione parallela.</span><span class="sxs-lookup"><span data-stu-id="03c0a-634">This setting called MAXDOP, allows you to configure the maximum number of processors SQL Server can use when parallel processing.</span></span> <span data-ttu-id="03c0a-635">È possibile configurare MAXDOP per singole query o per operazioni sull'indice.</span><span class="sxs-lookup"><span data-stu-id="03c0a-635">You can configure MAXDOP for individual queries or index operations.</span></span> <span data-ttu-id="03c0a-636">Questa configurazione risulta utile per bilanciare le risorse del sistema per un'applicazione essenziale per le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-636">This is beneficial when you want to balance resources of your system for a performance critical application.</span></span>

<span data-ttu-id="03c0a-637">Ad esempio, si supponga che l'applicazione che usa SQL Server stia eseguendo contemporaneamente una query di dimensioni elevate e un'operazione sull'indice.</span><span class="sxs-lookup"><span data-stu-id="03c0a-637">For example, say your application using SQL Server is executing a large query and an index operation at the same time.</span></span> <span data-ttu-id="03c0a-638">Si supponga di volere migliorare le prestazioni dell'operazione sull'indice rispetto alla query di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-638">Let us assume that you wanted the index operation to be more performant compared to the large query.</span></span> <span data-ttu-id="03c0a-639">In questo caso è possibile impostare il valore MAXDOP dell'operazione sull'indice in modo che sia superiore al valore MAXDOP per la query.</span><span class="sxs-lookup"><span data-stu-id="03c0a-639">In such a case, you can set MAXDOP value of the index operation to be higher than the MAXDOP value for the query.</span></span> <span data-ttu-id="03c0a-640">In questo modo SQL Server avrà un numero maggiore di processori da sfruttare per l'operazione sull'indice rispetto al numero di processori da dedicare alla query di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-640">This way, SQL Server has more number of processors that it can leverage for the index operation compared to the number of processors it can dedicate to the large query.</span></span> <span data-ttu-id="03c0a-641">Occorre ricordare che non si può controllare il numero di thread usati da SQL Server per ogni operazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-641">Remember, you do not control the number of threads SQL Server will use for each operation.</span></span> <span data-ttu-id="03c0a-642">È possibile controllare il numero massimo di processori dedicati al multithreading.</span><span class="sxs-lookup"><span data-stu-id="03c0a-642">You can control the maximum number of processors being dedicated for multi-threading.</span></span>

<span data-ttu-id="03c0a-643">Altre informazioni sui [Gradi di parallelismo](https://technet.microsoft.com/library/ms188611.aspx) in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="03c0a-643">Learn more about [Degrees of Parallelism](https://technet.microsoft.com/library/ms188611.aspx) in SQL Server.</span></span> <span data-ttu-id="03c0a-644">Individuare le impostazioni che influenzano il multithreading nell'applicazione e le relative configurazioni per ottimizzare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="03c0a-644">Find out such settings that influence multi-threading in your application and their configurations to optimize performance.</span></span>

## <a name="queue-depth"></a><span data-ttu-id="03c0a-645">Profondità coda</span><span class="sxs-lookup"><span data-stu-id="03c0a-645">Queue Depth</span></span>
<span data-ttu-id="03c0a-646">Il valore per la profondità, la lunghezza o la dimensione della coda indica il numero di richieste I/O in sospeso nel sistema.</span><span class="sxs-lookup"><span data-stu-id="03c0a-646">The Queue Depth or Queue Length or Queue Size is the number of pending IO requests in the system.</span></span> <span data-ttu-id="03c0a-647">Il valore della profondità della coda determina il numero di operazioni di I/O che possono essere accodate dall'applicazione e che verranno elaborate dai dischi di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-647">The value of Queue Depth determines how many IO operations your application can line up, which the storage disks will be processing.</span></span> <span data-ttu-id="03c0a-648">Influisce su tutti e tre gli indicatori di prestazioni illustrati in questo articolo, ovvero IOPS, velocità effettiva e latenza.</span><span class="sxs-lookup"><span data-stu-id="03c0a-648">It affects all the three application performance indicators that we discussed in this article viz., IOPS, Throughput and Latency.</span></span>

<span data-ttu-id="03c0a-649">La profondità della coda e il multithreading sono strettamente correlati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-649">Queue Depth and multi-threading are closely related.</span></span> <span data-ttu-id="03c0a-650">Il valore della profondità della coda indica la quantità di multithreading che l'applicazione può ottenere.</span><span class="sxs-lookup"><span data-stu-id="03c0a-650">The Queue Depth value indicates how much multi-threading can be achieved by the application.</span></span> <span data-ttu-id="03c0a-651">Se il valore della profondità della coda è elevato, l'applicazione potrà eseguire più applicazioni contemporaneamente, ovvero potrà ottenere un multithreading maggiore.</span><span class="sxs-lookup"><span data-stu-id="03c0a-651">If the Queue Depth is large, application can execute more operations concurrently, in other words, more multi-threading.</span></span> <span data-ttu-id="03c0a-652">Se il valore della profondità della coda è ridotto, anche se l'applicazione è abilitata al multithreading, il numero di richieste accodate non sarà sufficiente per l'esecuzione simultanea.</span><span class="sxs-lookup"><span data-stu-id="03c0a-652">If the Queue Depth is small, even though application is multi-threaded, it will not have enough requests lined up for concurrent execution.</span></span>

<span data-ttu-id="03c0a-653">In genere, le applicazioni standard non consentono di modificare la profondità della coda, perché un'impostazione non corretta risulterebbe eccessivamente dannosa.</span><span class="sxs-lookup"><span data-stu-id="03c0a-653">Typically, off the shelf applications do not allow you to change the queue depth, because if set incorrectly it will do more harm than good.</span></span> <span data-ttu-id="03c0a-654">Le applicazioni imposteranno automaticamente il valore di profondità della coda corretto per ottenere prestazioni ottimali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-654">Applications will set the right value of queue depth to get the optimal performance.</span></span> <span data-ttu-id="03c0a-655">È tuttavia importante comprendere questo concetto, in modo da risolvere i problemi delle prestazioni nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-655">However, it is important to understand this concept so that you can troubleshoot performance issues with your application.</span></span> <span data-ttu-id="03c0a-656">È anche possibile osservare gli effetti della profondità della coda eseguendo gli strumenti di benchmarking nel sistema.</span><span class="sxs-lookup"><span data-stu-id="03c0a-656">You can also observe the effects of queue depth by running benchmarking tools on your system.</span></span>

<span data-ttu-id="03c0a-657">Alcune applicazioni forniscono le impostazioni necessarie per influenzare la profondità della coda,</span><span class="sxs-lookup"><span data-stu-id="03c0a-657">Some applications provide settings to influence the Queue Depth.</span></span> <span data-ttu-id="03c0a-658">ad esempio, l'impostazione MAXDOP (Massimo grado parallelismo) in SQL Server illustrata nella sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="03c0a-658">For example, the MAXDOP (maximum degree of parallelism) setting in SQL Server explained in previous section.</span></span> <span data-ttu-id="03c0a-659">MAXDOP consente di influenzare la profondità della coda e il multithreading, anche se non modifica direttamente il valore Profondità coda di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="03c0a-659">MAXDOP is a way to influence Queue Depth and multi-threading, although it does not directly change the Queue Depth value of SQL Server.</span></span>

<span data-ttu-id="03c0a-660">*Profondità elevata della coda*</span><span class="sxs-lookup"><span data-stu-id="03c0a-660">*High Queue Depth*</span></span>  
<span data-ttu-id="03c0a-661">Un valore elevato per la profondità della coda consente di allineare più operazioni sul disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-661">A high queue depth lines up more operations on the disk.</span></span> <span data-ttu-id="03c0a-662">Il disco conosce in anticipo la richiesta successiva nella coda.</span><span class="sxs-lookup"><span data-stu-id="03c0a-662">The disk knows the next request in its queue ahead of time.</span></span> <span data-ttu-id="03c0a-663">Di conseguenza, il disco può pianificare in anticipo le operazioni ed elaborarle nella sequenza ottimale.</span><span class="sxs-lookup"><span data-stu-id="03c0a-663">Consequently, the disk can schedule operations ahead of time and process them in an optimal sequence.</span></span> <span data-ttu-id="03c0a-664">Poiché l'applicazione invia più richieste al disco, il disco potrà elaborare un numero maggiore di I/O paralleli.</span><span class="sxs-lookup"><span data-stu-id="03c0a-664">Since the application is sending more requests to the disk, the disk can process more parallel IOs.</span></span> <span data-ttu-id="03c0a-665">L'applicazione sarà infine in grado di ottenere valori più elevati per IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-665">Ultimately, the application will be able to achieve higher IOPS.</span></span> <span data-ttu-id="03c0a-666">Poiché l'applicazione elabora un numero maggiore di richieste, aumenterà anche la velocità effettiva dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-666">Since application is processing more requests, the total Throughput of the application also increases.</span></span>

<span data-ttu-id="03c0a-667">In genere, un'applicazione può ottenere una velocità effettiva massima con 8-16+ I/O in attesa per ogni disco collegato.</span><span class="sxs-lookup"><span data-stu-id="03c0a-667">Typically, an application can achieve maximum Throughput with 8-16+ outstanding IOs per attached disk.</span></span> <span data-ttu-id="03c0a-668">Se il valore della profondità della coda è pari a uno, l'applicazione non effettua il push di un numero sufficiente di I/O nel sistema e ne elaborerà una quantità inferiore in un periodo specifico.</span><span class="sxs-lookup"><span data-stu-id="03c0a-668">If a Queue Depth is one, application is not pushing enough IOs to the system, and it will process less amount of in a given period.</span></span> <span data-ttu-id="03c0a-669">In altri termini, si otterrà una velocità effettiva minore.</span><span class="sxs-lookup"><span data-stu-id="03c0a-669">In other words, less Throughput.</span></span>

<span data-ttu-id="03c0a-670">In SQL Server ,ad esempio, l'impostazione del valore MAXDOP per una query su "4" indica a SQL Server che può usare al massimo quattro core per eseguire la query.</span><span class="sxs-lookup"><span data-stu-id="03c0a-670">For example, in SQL Server, setting the MAXDOP value for a query to "4" informs SQL Server that it can use up to four cores to execute the query.</span></span> <span data-ttu-id="03c0a-671">SQL Server determinerà il valore migliore per la profondità della coda e il numero di core per l'esecuzione della query.</span><span class="sxs-lookup"><span data-stu-id="03c0a-671">SQL Server will determine what is best queue depth value and the number of cores for the query execution.</span></span>

<span data-ttu-id="03c0a-672">*Profondità ottimale della coda*</span><span class="sxs-lookup"><span data-stu-id="03c0a-672">*Optimal Queue Depth*</span></span>  
<span data-ttu-id="03c0a-673">Un valore molto elevato per la coda può avere alcuni svantaggi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-673">Very high queue depth value also has its drawbacks.</span></span> <span data-ttu-id="03c0a-674">Se il valore della profondità della coda è troppo alto, l'applicazione proverà a effettuare un numero molto elevato di IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-674">If queue depth value is too high, the application will try to drive very high IOPS.</span></span> <span data-ttu-id="03c0a-675">A meno che un'applicazione non abbia dischi persistenti con un numero sufficiente di IOPS con provisioning, ciò può influire negativamente sulle latenze dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-675">Unless application has persistent disks with sufficient provisioned IOPS, this can negatively affect application latencies.</span></span> <span data-ttu-id="03c0a-676">La formula seguente illustra la relazione tra IOPS, latenza e profondità della coda.</span><span class="sxs-lookup"><span data-stu-id="03c0a-676">Following formula shows the relationship between IOPS, Latency and Queue Depth.</span></span>  
    ![](media/storage-premium-storage-performance/image6.png)

<span data-ttu-id="03c0a-677">È consigliabile non configurare la profondità della coda su un valore elevato, specificando invece un valore ottimale, in grado di offrire un numero di IOPS sufficiente per l'applicazione, senza influire sulle latenze.</span><span class="sxs-lookup"><span data-stu-id="03c0a-677">You should not configure Queue Depth to any high value, but to an optimal value, which can deliver enough IOPS for the application without affecting latencies.</span></span> <span data-ttu-id="03c0a-678">Ad esempio, se la latenza dell'applicazione deve essere pari a 1 millisecondo, la profondità della coda necessaria per ottenere 5.000 IOPS sarà QD = 5000 x 0,001 = 5.</span><span class="sxs-lookup"><span data-stu-id="03c0a-678">For example, if the application latency needs to be 1 millisecond, the Queue Depth required to achieve 5,000 IOPS is, QD = 5000 x 0.001 = 5.</span></span>

<span data-ttu-id="03c0a-679">*Profondità della coda per un volume con striping*</span><span class="sxs-lookup"><span data-stu-id="03c0a-679">*Queue Depth for Striped Volume*</span></span>  
<span data-ttu-id="03c0a-680">Per un volume con striping è consigliabile mantenere una profondità della coda sufficientemente elevata da consentire a ogni disco di avere individualmente un picco di profondità della coda.</span><span class="sxs-lookup"><span data-stu-id="03c0a-680">For a striped volume, maintain a high enough queue depth such that, every disk has a peak queue depth individually.</span></span> <span data-ttu-id="03c0a-681">Ad esempio, si consideri un'applicazione che effettua il push di una profondità della coda pari a 2 e lo striping include 4 dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-681">For example, consider an application that pushes a queue depth of 2 and there are 4 disks in the stripe.</span></span> <span data-ttu-id="03c0a-682">Le due richieste I/O verranno trasmesse a due dischi e i due dischi rimanenti saranno inattivi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-682">The two IO requests will go to two disks and remaining two disks will be idle.</span></span> <span data-ttu-id="03c0a-683">È quindi consigliabile configurare la profondità della coda in modo che tutti i dischi siano occupati.</span><span class="sxs-lookup"><span data-stu-id="03c0a-683">Therefore, configure the queue depth such that all the disks can be busy.</span></span> <span data-ttu-id="03c0a-684">La formula seguente illustra come determinare la profondità della coda dei volumi con striping.</span><span class="sxs-lookup"><span data-stu-id="03c0a-684">Formula below shows how to determine the queue depth of striped volumes.</span></span>  
    ![](media/storage-premium-storage-performance/image7.png)

## <a name="throttling"></a><span data-ttu-id="03c0a-685">Limitazione</span><span class="sxs-lookup"><span data-stu-id="03c0a-685">Throttling</span></span>
<span data-ttu-id="03c0a-686">L'Archiviazione Premium di Azure effettua il provisioning di un numero specificato di IOPS e di velocità effettiva in base alle dimensioni delle VM e alle dimensioni dei dischi scelte.</span><span class="sxs-lookup"><span data-stu-id="03c0a-686">Azure Premium Storage provisions specified number of IOPS and Throughput depending on the VM sizes and disk sizes you choose.</span></span> <span data-ttu-id="03c0a-687">Ogni volta che l'applicazione prova a superare i limiti di IOPS o velocità effettiva che possono essere gestiti dalla VM o dal disco, l'Archiviazione Premium limiterà l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-687">Anytime your application tries to drive IOPS or Throughput above these limits of what the VM or disk can handle, Premium Storage will throttle it.</span></span> <span data-ttu-id="03c0a-688">Questo problema si manifesta sotto forma di una riduzione delle prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-688">This manifests in the form of degraded performance in your application.</span></span> <span data-ttu-id="03c0a-689">Ciò può comportare una latenza più alta, una velocità effettiva minore o valori di IOPS più bassi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-689">This can mean higher latency, lower Throughput or lower IOPS.</span></span> <span data-ttu-id="03c0a-690">Se l'Archiviazione Premium non applica la limitazione, è possibile che si verifichi un errore irreversibile dell'applicazione a causa del superamento dei limiti delle risorse.</span><span class="sxs-lookup"><span data-stu-id="03c0a-690">If Premium Storage does not throttle, your application could completely fail by exceeding what its resources are capable of achieving.</span></span> <span data-ttu-id="03c0a-691">Per evitare problemi di prestazioni dovuti alla limitazione, è necessario effettuare sempre il provisioning di un numero di risorse sufficiente per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-691">So, to avoid performance issues due to throttling, always provision sufficient resources for your application.</span></span> <span data-ttu-id="03c0a-692">Prendere in considerazione i concetti illustrati nelle sezioni precedenti relative alle dimensioni delle VM e dei dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-692">Take into consideration what we discussed in the VM sizes and Disk sizes sections above.</span></span> <span data-ttu-id="03c0a-693">Il benchmarking è il modo migliore per determinare le risorse necessarie per l'hosting dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-693">Benchmarking is the best way to figure out what resources you will need to host your application.</span></span>

## <a name="benchmarking"></a><span data-ttu-id="03c0a-694">Benchmarking</span><span class="sxs-lookup"><span data-stu-id="03c0a-694">Benchmarking</span></span>
<span data-ttu-id="03c0a-695">Il benchmarking è il processo di simulazione di diversi carichi di lavoro sull'applicazione e di misurazione delle prestazioni dell'applicazione per ogni carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="03c0a-695">Benchmarking is the process of simulating different workloads on your application and measuring the application performance for each workload.</span></span> <span data-ttu-id="03c0a-696">Eseguendo la procedura illustrata in una sezione precedente, sono stati raccolti i requisiti relativi alle prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-696">Using the steps described in an earlier section, you have gathered the application performance requirements.</span></span> <span data-ttu-id="03c0a-697">Eseguendo gli strumenti di benchmarking nelle VM che ospitano l'applicazione sarà possibile determinare i livelli di prestazioni che l'applicazione è in grado di ottenere con l'Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-697">By running benchmarking tools on the VMs hosting the application, you can determine the performance levels that your application can achieve with Premium Storage.</span></span> <span data-ttu-id="03c0a-698">In questa sezione sono disponibili esempi di benchmarking per una VM DS14 Standard con provisioning con dischi di Archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="03c0a-698">In this section, we provide you examples of benchmarking a Standard DS14 VM provisioned with Azure Premium Storage disks.</span></span>

<span data-ttu-id="03c0a-699">Sono stati usati gli strumenti di benchmarking comuni Iometer e FIO, rispettivamente per Windows e Linux.</span><span class="sxs-lookup"><span data-stu-id="03c0a-699">We have used common benchmarking tools Iometer and FIO, for Windows and Linux respectively.</span></span> <span data-ttu-id="03c0a-700">Questi strumenti generano più thread che simulano un carico di lavoro analogo a quello di produzione e misurano le prestazioni del sistema.</span><span class="sxs-lookup"><span data-stu-id="03c0a-700">These tools spawn multiple threads simulating a production like workload, and measure the system performance.</span></span> <span data-ttu-id="03c0a-701">Questi strumenti consentono anche di configurare i parametri quali la dimensione dei blocchi e la profondità della coda, che in genere non possono essere modificati per un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-701">Using the tools you can also configure parameters like block size and queue depth, which you normally cannot change for an application.</span></span> <span data-ttu-id="03c0a-702">Ciò offre maggiore flessibilità per ottenere il livello massimo di prestazioni su una VM a scalabilità elevata con provisioning con dischi Premium per diversi tipi di carichi di lavoro dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-702">This gives you more flexibility to drive the maximum performance on a high scale VM provisioned with premium disks for different types of application workloads.</span></span> <span data-ttu-id="03c0a-703">Per altre informazioni su ogni strumento di benchmarking, vedere [Iometer](http://www.iometer.org/) e [FIO](http://freecode.com/projects/fio).</span><span class="sxs-lookup"><span data-stu-id="03c0a-703">To learn more about each benchmarking tool visit [Iometer](http://www.iometer.org/) and [FIO](http://freecode.com/projects/fio).</span></span>

<span data-ttu-id="03c0a-704">Per eseguire gli esempi seguenti, creare una VM DS14 Standard e collegare 11 dischi di Archiviazione Premium alla VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-704">To follow the examples below, create a Standard DS14 VM and attach 11 Premium Storage disks to the VM.</span></span> <span data-ttu-id="03c0a-705">Degli 11 dischi, configurare 10 dischi con memorizzazione nella cache dell'host impostata su "None" ed effettuarne lo striping in un volume denominato NoCacheWrites.</span><span class="sxs-lookup"><span data-stu-id="03c0a-705">Of the 11 disks, configure 10 disks with host caching as "None" and stripe them into a volume called NoCacheWrites.</span></span> <span data-ttu-id="03c0a-706">Configurare la memorizzazione nella cache dell'host come "ReadOnly" sul disco rimanente e creare un volume denominato CacheReads con questo disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-706">Configure host caching as "ReadOnly" on the remaining disk and create a volume called CacheReads with this disk.</span></span> <span data-ttu-id="03c0a-707">Usando questa configurazione, sarà possibile vedere le prestazioni massime di lettura e scrittura da una VM DS14 Standard.</span><span class="sxs-lookup"><span data-stu-id="03c0a-707">Using this setup, you will be able to see the maximum Read and Write performance from a Standard DS14 VM.</span></span> <span data-ttu-id="03c0a-708">Per informazioni dettagliate sulla creazione di una VM DS14 con dischi Premium, vedere [Creare e usare un account di Archiviazione Premium per un disco dati della macchina virtuale](../storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="03c0a-708">For detailed steps about creating a DS14 VM with premium disks, go to [Create and use a Premium Storage account for a virtual machine data disk](../storage-premium-storage.md).</span></span>

<span data-ttu-id="03c0a-709">*Preparare la cache*</span><span class="sxs-lookup"><span data-stu-id="03c0a-709">*Warming up the Cache*</span></span>  
<span data-ttu-id="03c0a-710">Il disco con memorizzazione nella cache dell'host di tipo ReadOnly sarà in grado di ottenere valori di IOPS più elevati rispetto al limite del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-710">The disk with ReadOnly host caching will be able to give higher IOPS than the disk limit.</span></span> <span data-ttu-id="03c0a-711">Per ottenere queste prestazioni di lettura massime dalla cache dell'host, è prima di tutto necessario preparare la cache del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-711">To get this maximum read performance from the host cache, first you must warm up the cache of this disk.</span></span> <span data-ttu-id="03c0a-712">Ciò assicura che le operazioni di I/O di lettura che lo strumento di benchmarking eseguirà sul volume CacheReads raggiungano effettivamente la cache e non direttamente il disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-712">This ensures that the Read IOs which benchmarking tool will drive on CacheReads volume actually hits the cache and not the disk directly.</span></span> <span data-ttu-id="03c0a-713">I riscontri nella cache producono IOPS aggiuntivi da un singolo disco abilitato per la cache.</span><span class="sxs-lookup"><span data-stu-id="03c0a-713">The cache hits result in additional IOPS from the single cache enabled disk.</span></span>

> <span data-ttu-id="03c0a-714">**Importante:**</span><span class="sxs-lookup"><span data-stu-id="03c0a-714">**Important:**</span></span>  
> <span data-ttu-id="03c0a-715">è necessario preparare la cache prima di eseguire il benchmarking, ogni volta che la VM viene riavviata.</span><span class="sxs-lookup"><span data-stu-id="03c0a-715">You must warm up the cache before running benchmarking, every time VM is rebooted.</span></span>
>
>

#### <a name="iometer"></a><span data-ttu-id="03c0a-716">Iometer</span><span class="sxs-lookup"><span data-stu-id="03c0a-716">Iometer</span></span>
<span data-ttu-id="03c0a-717">[Scaricare lo strumento Iometer](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) nella VM.</span><span class="sxs-lookup"><span data-stu-id="03c0a-717">[Download the Iometer tool](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) on the VM.</span></span>

<span data-ttu-id="03c0a-718">*File di test*</span><span class="sxs-lookup"><span data-stu-id="03c0a-718">*Test file*</span></span>  
<span data-ttu-id="03c0a-719">Iometer usa un file di test archiviato nel volume in cui eseguire i test di benchmarking.</span><span class="sxs-lookup"><span data-stu-id="03c0a-719">Iometer uses a test file that is stored on the volume on which you will run the benchmarking test.</span></span> <span data-ttu-id="03c0a-720">Gestisce le operazioni di lettura e scrittura sul file di test per misurare i valori di IOPS e velocità effettiva del disco.</span><span class="sxs-lookup"><span data-stu-id="03c0a-720">It drives Reads and Writes on this test file to measure the disk IOPS and Throughput.</span></span> <span data-ttu-id="03c0a-721">Iometer crea questo file di test se non ne è stato fornito uno.</span><span class="sxs-lookup"><span data-stu-id="03c0a-721">Iometer creates this test file if you have not provided one.</span></span> <span data-ttu-id="03c0a-722">Creare un file di test di 200 GB denominato iobw.tst nei volumi CacheReads e NoCacheWrites.</span><span class="sxs-lookup"><span data-stu-id="03c0a-722">Create a 200GB test file called iobw.tst on the CacheReads and NoCacheWrites volumes.</span></span>

<span data-ttu-id="03c0a-723">*Specifiche di accesso*</span><span class="sxs-lookup"><span data-stu-id="03c0a-723">*Access Specifications*</span></span>  
<span data-ttu-id="03c0a-724">Le specifiche, la dimensione della richiesta I/O, la percentuale di letture/scritture e la percentuale di operazioni casuali/sequenziali vengono configurate tramite la scheda "Access Specifications" in Iometer.</span><span class="sxs-lookup"><span data-stu-id="03c0a-724">The specifications, request IO size, % read/write, % random/sequential are configured using the "Access Specifications" tab in Iometer.</span></span> <span data-ttu-id="03c0a-725">Creare una specifica di accesso per ogni scenario illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="03c0a-725">Create an access specification for each of the scenarios described below.</span></span> <span data-ttu-id="03c0a-726">Creare le specifiche di accesso, quindi salvarle con un nome appropriato, ad esempio RandomWrites\_8K, RandomReads\_8K.</span><span class="sxs-lookup"><span data-stu-id="03c0a-726">Create the access specifications and "Save" with an appropriate name like – RandomWrites\_8K, RandomReads\_8K.</span></span> <span data-ttu-id="03c0a-727">Selezionare la specifica corrispondente durante l'esecuzione dello scenario di test.</span><span class="sxs-lookup"><span data-stu-id="03c0a-727">Select the corresponding specification when running the test scenario.</span></span>

<span data-ttu-id="03c0a-728">Un esempio di specifiche di accesso per uno scenario con valori massimi di IOPS di scrittura è riportato di seguito, </span><span class="sxs-lookup"><span data-stu-id="03c0a-728">An example of access specifications for maximum Write IOPS scenario is shown below,</span></span>  
    ![](media/storage-premium-storage-performance/image8.png)

<span data-ttu-id="03c0a-729">*Specifiche per il valore massimo di IOPS di test*</span><span class="sxs-lookup"><span data-stu-id="03c0a-729">*Maximum IOPS Test Specifications*</span></span>  
<span data-ttu-id="03c0a-730">Per illustrare il valore massimo di IOPS, usare una dimensione minore della richiesta.</span><span class="sxs-lookup"><span data-stu-id="03c0a-730">To demonstrate maximum IOPs, use smaller request size.</span></span> <span data-ttu-id="03c0a-731">Usare una dimensione di richiesta pari a 8 K e creare specifiche per letture e scritture casuali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-731">Use 8K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="03c0a-732">Specifica di accesso</span><span class="sxs-lookup"><span data-stu-id="03c0a-732">Access Specification</span></span> | <span data-ttu-id="03c0a-733">Dimensione della richiesta</span><span class="sxs-lookup"><span data-stu-id="03c0a-733">Request size</span></span> | <span data-ttu-id="03c0a-734">% di casuali</span><span class="sxs-lookup"><span data-stu-id="03c0a-734">Random %</span></span> | <span data-ttu-id="03c0a-735">% di letture</span><span class="sxs-lookup"><span data-stu-id="03c0a-735">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="03c0a-736">RandomWrites\_8K</span><span class="sxs-lookup"><span data-stu-id="03c0a-736">RandomWrites\_8K</span></span> |<span data-ttu-id="03c0a-737">8 K</span><span class="sxs-lookup"><span data-stu-id="03c0a-737">8K</span></span> |<span data-ttu-id="03c0a-738">100</span><span class="sxs-lookup"><span data-stu-id="03c0a-738">100</span></span> |<span data-ttu-id="03c0a-739">0</span><span class="sxs-lookup"><span data-stu-id="03c0a-739">0</span></span> |
| <span data-ttu-id="03c0a-740">RandomReads\_8K</span><span class="sxs-lookup"><span data-stu-id="03c0a-740">RandomReads\_8K</span></span> |<span data-ttu-id="03c0a-741">8 K</span><span class="sxs-lookup"><span data-stu-id="03c0a-741">8K</span></span> |<span data-ttu-id="03c0a-742">100</span><span class="sxs-lookup"><span data-stu-id="03c0a-742">100</span></span> |<span data-ttu-id="03c0a-743">100</span><span class="sxs-lookup"><span data-stu-id="03c0a-743">100</span></span> |

<span data-ttu-id="03c0a-744">*Specifiche per il valore massimo di velocità effettiva di test*</span><span class="sxs-lookup"><span data-stu-id="03c0a-744">*Maximum Throughput Test Specifications*</span></span>  
<span data-ttu-id="03c0a-745">Per illustrare il valore massimo di velocità effettiva, usare una dimensione maggiore della richiesta.</span><span class="sxs-lookup"><span data-stu-id="03c0a-745">To demonstrate maximum Throughput, use larger request size.</span></span> <span data-ttu-id="03c0a-746">Usare una dimensione di richiesta pari a 64 K e creare specifiche per letture e scritture casuali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-746">Use 64K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="03c0a-747">Specifica di accesso</span><span class="sxs-lookup"><span data-stu-id="03c0a-747">Access Specification</span></span> | <span data-ttu-id="03c0a-748">Dimensione della richiesta</span><span class="sxs-lookup"><span data-stu-id="03c0a-748">Request size</span></span> | <span data-ttu-id="03c0a-749">% di casuali</span><span class="sxs-lookup"><span data-stu-id="03c0a-749">Random %</span></span> | <span data-ttu-id="03c0a-750">% di letture</span><span class="sxs-lookup"><span data-stu-id="03c0a-750">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="03c0a-751">RandomWrites\_64K</span><span class="sxs-lookup"><span data-stu-id="03c0a-751">RandomWrites\_64K</span></span> |<span data-ttu-id="03c0a-752">64 K</span><span class="sxs-lookup"><span data-stu-id="03c0a-752">64K</span></span> |<span data-ttu-id="03c0a-753">100</span><span class="sxs-lookup"><span data-stu-id="03c0a-753">100</span></span> |<span data-ttu-id="03c0a-754">0</span><span class="sxs-lookup"><span data-stu-id="03c0a-754">0</span></span> |
| <span data-ttu-id="03c0a-755">RandomReads\_64K</span><span class="sxs-lookup"><span data-stu-id="03c0a-755">RandomReads\_64K</span></span> |<span data-ttu-id="03c0a-756">64 K</span><span class="sxs-lookup"><span data-stu-id="03c0a-756">64K</span></span> |<span data-ttu-id="03c0a-757">100</span><span class="sxs-lookup"><span data-stu-id="03c0a-757">100</span></span> |<span data-ttu-id="03c0a-758">100</span><span class="sxs-lookup"><span data-stu-id="03c0a-758">100</span></span> |

<span data-ttu-id="03c0a-759">*Esecuzione del test di Iometer*</span><span class="sxs-lookup"><span data-stu-id="03c0a-759">*Running the Iometer Test*</span></span>  
<span data-ttu-id="03c0a-760">Seguire questa procedura per preparare la cache.</span><span class="sxs-lookup"><span data-stu-id="03c0a-760">Perform the steps below to warm up cache</span></span>

1. <span data-ttu-id="03c0a-761">Creare le specifiche di accesso con i valori seguenti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-761">Create two access specifications with values shown below,</span></span>

   | <span data-ttu-id="03c0a-762">Nome</span><span class="sxs-lookup"><span data-stu-id="03c0a-762">Name</span></span> | <span data-ttu-id="03c0a-763">Dimensione della richiesta</span><span class="sxs-lookup"><span data-stu-id="03c0a-763">Request size</span></span> | <span data-ttu-id="03c0a-764">% di casuali</span><span class="sxs-lookup"><span data-stu-id="03c0a-764">Random %</span></span> | <span data-ttu-id="03c0a-765">% di letture</span><span class="sxs-lookup"><span data-stu-id="03c0a-765">Read %</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="03c0a-766">RandomWrites\_1MB</span><span class="sxs-lookup"><span data-stu-id="03c0a-766">RandomWrites\_1MB</span></span> |<span data-ttu-id="03c0a-767">1 MB</span><span class="sxs-lookup"><span data-stu-id="03c0a-767">1MB</span></span> |<span data-ttu-id="03c0a-768">100</span><span class="sxs-lookup"><span data-stu-id="03c0a-768">100</span></span> |<span data-ttu-id="03c0a-769">0</span><span class="sxs-lookup"><span data-stu-id="03c0a-769">0</span></span> |
   | <span data-ttu-id="03c0a-770">RandomReads\_1MB</span><span class="sxs-lookup"><span data-stu-id="03c0a-770">RandomReads\_1MB</span></span> |<span data-ttu-id="03c0a-771">1 MB</span><span class="sxs-lookup"><span data-stu-id="03c0a-771">1MB</span></span> |<span data-ttu-id="03c0a-772">100</span><span class="sxs-lookup"><span data-stu-id="03c0a-772">100</span></span> |<span data-ttu-id="03c0a-773">100</span><span class="sxs-lookup"><span data-stu-id="03c0a-773">100</span></span> |
2. <span data-ttu-id="03c0a-774">Eseguire il test di Iometer per l'inizializzazione del disco della cache con i parametri seguenti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-774">Run the Iometer test for initializing cache disk with following parameters.</span></span> <span data-ttu-id="03c0a-775">Usare tre thread di lavoro per il volume di destinazione e una profondità della coda pari a 128.</span><span class="sxs-lookup"><span data-stu-id="03c0a-775">Use three worker threads for the target volume and a queue depth of 128.</span></span> <span data-ttu-id="03c0a-776">Impostare la durata relativa al tempo di esecuzione del test su 2 ore nella scheda "Test Setup".</span><span class="sxs-lookup"><span data-stu-id="03c0a-776">Set the "Run time" duration of the test to 2hrs on the "Test Setup" tab.</span></span>

   | <span data-ttu-id="03c0a-777">Scenario</span><span class="sxs-lookup"><span data-stu-id="03c0a-777">Scenario</span></span> | <span data-ttu-id="03c0a-778">Volume di destinazione</span><span class="sxs-lookup"><span data-stu-id="03c0a-778">Target Volume</span></span> | <span data-ttu-id="03c0a-779">Nome</span><span class="sxs-lookup"><span data-stu-id="03c0a-779">Name</span></span> | <span data-ttu-id="03c0a-780">Durata</span><span class="sxs-lookup"><span data-stu-id="03c0a-780">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="03c0a-781">Inizializzare il disco della cache</span><span class="sxs-lookup"><span data-stu-id="03c0a-781">Initialize Cache Disk</span></span> |<span data-ttu-id="03c0a-782">CacheReads</span><span class="sxs-lookup"><span data-stu-id="03c0a-782">CacheReads</span></span> |<span data-ttu-id="03c0a-783">RandomWrites\_1MB</span><span class="sxs-lookup"><span data-stu-id="03c0a-783">RandomWrites\_1MB</span></span> |<span data-ttu-id="03c0a-784">2 ore</span><span class="sxs-lookup"><span data-stu-id="03c0a-784">2hrs</span></span> |
3. <span data-ttu-id="03c0a-785">Eseguire il test di Iometer per la preparazione del disco della cache con i parametri seguenti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-785">Run the Iometer test for warming up cache disk with following parameters.</span></span> <span data-ttu-id="03c0a-786">Usare tre thread di lavoro per il volume di destinazione e una profondità della coda pari a 128.</span><span class="sxs-lookup"><span data-stu-id="03c0a-786">Use three worker threads for the target volume and a queue depth of 128.</span></span> <span data-ttu-id="03c0a-787">Impostare la durata relativa al tempo di esecuzione del test su 2 ore nella scheda "Test Setup".</span><span class="sxs-lookup"><span data-stu-id="03c0a-787">Set the "Run time" duration of the test to 2hrs on the "Test Setup" tab.</span></span>

   | <span data-ttu-id="03c0a-788">Scenario</span><span class="sxs-lookup"><span data-stu-id="03c0a-788">Scenario</span></span> | <span data-ttu-id="03c0a-789">Volume di destinazione</span><span class="sxs-lookup"><span data-stu-id="03c0a-789">Target Volume</span></span> | <span data-ttu-id="03c0a-790">Nome</span><span class="sxs-lookup"><span data-stu-id="03c0a-790">Name</span></span> | <span data-ttu-id="03c0a-791">Durata</span><span class="sxs-lookup"><span data-stu-id="03c0a-791">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="03c0a-792">Preparare il disco della cache</span><span class="sxs-lookup"><span data-stu-id="03c0a-792">Warm up Cache Disk</span></span> |<span data-ttu-id="03c0a-793">CacheReads</span><span class="sxs-lookup"><span data-stu-id="03c0a-793">CacheReads</span></span> |<span data-ttu-id="03c0a-794">RandomReads\_1MB</span><span class="sxs-lookup"><span data-stu-id="03c0a-794">RandomReads\_1MB</span></span> |<span data-ttu-id="03c0a-795">2 ore</span><span class="sxs-lookup"><span data-stu-id="03c0a-795">2hrs</span></span> |

<span data-ttu-id="03c0a-796">Dopo la preparazione del disco della cache, procedere con gli scenari di test elencati di seguito.</span><span class="sxs-lookup"><span data-stu-id="03c0a-796">After cache disk is warmed up, proceed with the test scenarios listed below.</span></span> <span data-ttu-id="03c0a-797">Per eseguire il test di Iometer, usare almeno tre thread di lavoro per **ogni** volume di destinazione.</span><span class="sxs-lookup"><span data-stu-id="03c0a-797">To run the Iometer test, use at least three worker threads for **each** target volume.</span></span> <span data-ttu-id="03c0a-798">Per ogni thread di lavoro selezionare il volume di destinazione, impostare la profondità della coda e selezionare una delle specifiche di test salvate, come illustrato nella tabella seguente, per eseguire lo scenario di test corrispondente.</span><span class="sxs-lookup"><span data-stu-id="03c0a-798">For each worker thread, select the target volume, set queue depth and select one of the saved test specifications, as shown in the table below, to run the corresponding test scenario.</span></span> <span data-ttu-id="03c0a-799">La tabella illustra anche i risultati previsti per IOPS e velocità effettiva quando si eseguono questi test.</span><span class="sxs-lookup"><span data-stu-id="03c0a-799">The table also shows expected results for IOPS and Throughput when running these tests.</span></span> <span data-ttu-id="03c0a-800">Per tutti gli scenari vengono usati una dimensione di I/O ridotta pari a 8 KB e un valore elevato per la profondità della coda, pari a 128.</span><span class="sxs-lookup"><span data-stu-id="03c0a-800">For all scenarios, a small IO size of 8KB and a high queue depth of 128 is used.</span></span>

| <span data-ttu-id="03c0a-801">Scenario di test</span><span class="sxs-lookup"><span data-stu-id="03c0a-801">Test Scenario</span></span> | <span data-ttu-id="03c0a-802">Volume di destinazione</span><span class="sxs-lookup"><span data-stu-id="03c0a-802">Target Volume</span></span> | <span data-ttu-id="03c0a-803">Nome</span><span class="sxs-lookup"><span data-stu-id="03c0a-803">Name</span></span> | <span data-ttu-id="03c0a-804">Risultato</span><span class="sxs-lookup"><span data-stu-id="03c0a-804">Result</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="03c0a-805">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-805">Max.</span></span> <span data-ttu-id="03c0a-806">IOPS di lettura</span><span class="sxs-lookup"><span data-stu-id="03c0a-806">Read IOPS</span></span> |<span data-ttu-id="03c0a-807">CacheReads</span><span class="sxs-lookup"><span data-stu-id="03c0a-807">CacheReads</span></span> |<span data-ttu-id="03c0a-808">RandomWrites\_8K</span><span class="sxs-lookup"><span data-stu-id="03c0a-808">RandomWrites\_8K</span></span> |<span data-ttu-id="03c0a-809">50.000 IOPS </span><span class="sxs-lookup"><span data-stu-id="03c0a-809">50,000 IOPS</span></span> |
| <span data-ttu-id="03c0a-810">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-810">Max.</span></span> <span data-ttu-id="03c0a-811">IOPS di scrittura</span><span class="sxs-lookup"><span data-stu-id="03c0a-811">Write IOPS</span></span> |<span data-ttu-id="03c0a-812">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="03c0a-812">NoCacheWrites</span></span> |<span data-ttu-id="03c0a-813">RandomReads\_8K</span><span class="sxs-lookup"><span data-stu-id="03c0a-813">RandomReads\_8K</span></span> |<span data-ttu-id="03c0a-814">64.000 IOPS</span><span class="sxs-lookup"><span data-stu-id="03c0a-814">64,000 IOPS</span></span> |
| <span data-ttu-id="03c0a-815">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-815">Max.</span></span> <span data-ttu-id="03c0a-816">IOPS combinate</span><span class="sxs-lookup"><span data-stu-id="03c0a-816">Combined IOPS</span></span> |<span data-ttu-id="03c0a-817">CacheReads</span><span class="sxs-lookup"><span data-stu-id="03c0a-817">CacheReads</span></span> |<span data-ttu-id="03c0a-818">RandomWrites\_8K</span><span class="sxs-lookup"><span data-stu-id="03c0a-818">RandomWrites\_8K</span></span> |<span data-ttu-id="03c0a-819">100.000 IOPS</span><span class="sxs-lookup"><span data-stu-id="03c0a-819">100,000 IOPS</span></span> |
| <span data-ttu-id="03c0a-820">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="03c0a-820">NoCacheWrites</span></span> |<span data-ttu-id="03c0a-821">RandomReads\_8K</span><span class="sxs-lookup"><span data-stu-id="03c0a-821">RandomReads\_8K</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="03c0a-822">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-822">Max.</span></span> <span data-ttu-id="03c0a-823">letture MB/sec</span><span class="sxs-lookup"><span data-stu-id="03c0a-823">Read MB/sec</span></span> |<span data-ttu-id="03c0a-824">CacheReads</span><span class="sxs-lookup"><span data-stu-id="03c0a-824">CacheReads</span></span> |<span data-ttu-id="03c0a-825">RandomWrites\_64K</span><span class="sxs-lookup"><span data-stu-id="03c0a-825">RandomWrites\_64K</span></span> |<span data-ttu-id="03c0a-826">524 MB/sec</span><span class="sxs-lookup"><span data-stu-id="03c0a-826">524 MB/sec</span></span> |
| <span data-ttu-id="03c0a-827">Max.</span><span class="sxs-lookup"><span data-stu-id="03c0a-827">Max.</span></span> <span data-ttu-id="03c0a-828">scritture MB/sec</span><span class="sxs-lookup"><span data-stu-id="03c0a-828">Write MB/sec</span></span> |<span data-ttu-id="03c0a-829">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="03c0a-829">NoCacheWrites</span></span> |<span data-ttu-id="03c0a-830">RandomReads\_64K</span><span class="sxs-lookup"><span data-stu-id="03c0a-830">RandomReads\_64K</span></span> |<span data-ttu-id="03c0a-831">524 MB/sec</span><span class="sxs-lookup"><span data-stu-id="03c0a-831">524 MB/sec</span></span> |
| <span data-ttu-id="03c0a-832">MB/sec combinati</span><span class="sxs-lookup"><span data-stu-id="03c0a-832">Combined MB/sec</span></span> |<span data-ttu-id="03c0a-833">CacheReads</span><span class="sxs-lookup"><span data-stu-id="03c0a-833">CacheReads</span></span> |<span data-ttu-id="03c0a-834">RandomWrites\_64K</span><span class="sxs-lookup"><span data-stu-id="03c0a-834">RandomWrites\_64K</span></span> |<span data-ttu-id="03c0a-835">1000 MB/sec</span><span class="sxs-lookup"><span data-stu-id="03c0a-835">1000 MB/sec</span></span> |
| <span data-ttu-id="03c0a-836">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="03c0a-836">NoCacheWrites</span></span> |<span data-ttu-id="03c0a-837">RandomReads\_64K</span><span class="sxs-lookup"><span data-stu-id="03c0a-837">RandomReads\_64K</span></span> | &nbsp; | &nbsp; |

<span data-ttu-id="03c0a-838">Le schermate seguenti illustrano i risultati dei test di Iometer per scenari combinati di IOPS e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="03c0a-838">Below are screenshots of the Iometer test results for combined IOPS and Throughput scenarios.</span></span>

<span data-ttu-id="03c0a-839">*Valori massimi per IOPS di letture e scritture combinate*</span><span class="sxs-lookup"><span data-stu-id="03c0a-839">*Combined Reads and Writes Maximum IOPS*</span></span>  
![](media/storage-premium-storage-performance/image9.png)

<span data-ttu-id="03c0a-840">*Velocità effettiva massima di letture e scritture combinate*</span><span class="sxs-lookup"><span data-stu-id="03c0a-840">*Combined Reads and Writes Maximum Throughput*</span></span>  
![](media/storage-premium-storage-performance/image10.png)

### <a name="fio"></a><span data-ttu-id="03c0a-841">FIO</span><span class="sxs-lookup"><span data-stu-id="03c0a-841">FIO</span></span>
<span data-ttu-id="03c0a-842">FIO è uno strumento popolare per il benchmarking dell'archiviazione sulle VM Linux.</span><span class="sxs-lookup"><span data-stu-id="03c0a-842">FIO is a popular tool to benchmark storage on the Linux VMs.</span></span> <span data-ttu-id="03c0a-843">Offre la flessibilità necessaria per selezionare diverse dimensioni di I/O e letture e scritture sequenziali o casuali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-843">It has the flexibility to select different IO sizes, sequential or random reads and writes.</span></span> <span data-ttu-id="03c0a-844">Genera thread di lavoro o processi per l'esecuzione delle operazioni I/O specificate.</span><span class="sxs-lookup"><span data-stu-id="03c0a-844">It spawns worker threads or processes to perform the specified I/O operations.</span></span> <span data-ttu-id="03c0a-845">È possibile specificare il tipo di operazioni I/O che ogni thread di lavoro deve eseguire usando i file processo.</span><span class="sxs-lookup"><span data-stu-id="03c0a-845">You can specify the type of I/O operations each worker thread must perform using job files.</span></span> <span data-ttu-id="03c0a-846">È stato creato un file processo per ogni scenario illustrato negli esempi seguenti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-846">We created one job file per scenario illustrated in the examples below.</span></span> <span data-ttu-id="03c0a-847">È possibile cambiare le specifiche di questi file processo per il benchmarking di diversi carichi di lavoro in esecuzione sull'Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-847">You can change the specifications in these job files to benchmark different workloads running on Premium Storage.</span></span> <span data-ttu-id="03c0a-848">Negli esempi viene usata una VM DS 14 Standard che esegue **Ubuntu**.</span><span class="sxs-lookup"><span data-stu-id="03c0a-848">In the examples, we are using a Standard DS 14 VM running **Ubuntu**.</span></span> <span data-ttu-id="03c0a-849">Usare la stessa configurazione illustrata all'inizio della [sezione Benchmarking](#Benchmarking) e preparare la cache prima di eseguire i test di benchmarking.</span><span class="sxs-lookup"><span data-stu-id="03c0a-849">Use the same setup described in the beginning of the [Benchmarking section](#Benchmarking) and warm up the cache before running the benchmarking tests.</span></span>

<span data-ttu-id="03c0a-850">Prima di iniziare, [scaricare FIO](https://github.com/axboe/fio) e installarlo nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="03c0a-850">Before you begin, [download FIO](https://github.com/axboe/fio) and install it on your virtual machine.</span></span>

<span data-ttu-id="03c0a-851">Eseguire il comando seguente per Ubuntu:</span><span class="sxs-lookup"><span data-stu-id="03c0a-851">Run the following command for Ubuntu,</span></span>

```
apt-get install fio
```

<span data-ttu-id="03c0a-852">Verranno usati quattro thread di lavoro per la gestione delle operazioni di scrittura e quattro thread di lavoro per la gestione delle operazioni di lettura sui dischi.</span><span class="sxs-lookup"><span data-stu-id="03c0a-852">We will use four worker threads for driving Write operations and four worker threads for driving Read operations on the disks.</span></span> <span data-ttu-id="03c0a-853">I ruoli di lavoro di scrittura indirizzeranno il traffico verso il volume "nocache", che include 10 dischi con cache impostata su "None".</span><span class="sxs-lookup"><span data-stu-id="03c0a-853">The Write workers will be driving traffic on the "nocache" volume, which has 10 disks with cache set to "None".</span></span> <span data-ttu-id="03c0a-854">I ruoli di lavoro di lettura indirizzeranno il traffico verso il volume "readcache", che include un disco con cache impostata su "ReadOnly".</span><span class="sxs-lookup"><span data-stu-id="03c0a-854">The Read workers will be driving traffic on the "readcache" volume, which has 1 disk with cache set to "ReadOnly".</span></span>

<span data-ttu-id="03c0a-855">*IOPS massime di scrittura*</span><span class="sxs-lookup"><span data-stu-id="03c0a-855">*Maximum Write IOPS*</span></span>  
<span data-ttu-id="03c0a-856">Creare il file processo con le specifiche seguenti per ottenere il valore massimo per le operazioni IOPS di scrittura.</span><span class="sxs-lookup"><span data-stu-id="03c0a-856">Create the job file with following specifications to get maximum Write IOPS.</span></span> <span data-ttu-id="03c0a-857">Assegnare al file il nome "fiowrite.ini".</span><span class="sxs-lookup"><span data-stu-id="03c0a-857">Name it "fiowrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[writer1]
rw=randwrite
directory=/mnt/nocache
[writer2]
rw=randwrite
directory=/mnt/nocache
[writer3]
rw=randwrite
directory=/mnt/nocache
[writer4]
rw=randwrite
directory=/mnt/nocache
```

<span data-ttu-id="03c0a-858">Notare gli elementi chiave seguenti conformi alle indicazioni di progettazione illustrate nelle sezioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-858">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="03c0a-859">Queste specifiche sono essenziali per ottenere il valore massimo per IOPS:</span><span class="sxs-lookup"><span data-stu-id="03c0a-859">These specifications are essential to drive maximum IOPS,</span></span>  

* <span data-ttu-id="03c0a-860">Profondità della coda elevata pari a 256.</span><span class="sxs-lookup"><span data-stu-id="03c0a-860">A high queue depth of 256.</span></span>  
* <span data-ttu-id="03c0a-861">Dimensione di blocco ridotta pari a 8 KB.</span><span class="sxs-lookup"><span data-stu-id="03c0a-861">A small block size of 8KB.</span></span>  
* <span data-ttu-id="03c0a-862">Più thread che eseguono scritture casuali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-862">Multiple threads performing random writes.</span></span>

<span data-ttu-id="03c0a-863">Eseguire il comando seguente per attivare il test FIO per 30 secondi:</span><span class="sxs-lookup"><span data-stu-id="03c0a-863">Run the following command to kick off the FIO test for 30 seconds,</span></span>  

```
sudo fio --runtime 30 fiowrite.ini
```

<span data-ttu-id="03c0a-864">Durante l'esecuzione del test, sarà possibile visualizzare il numero di operazioni IOPS di scrittura gestite dalla VM e dai dischi Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-864">While the test runs, you will be able to see the number of write IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="03c0a-865">Come illustrato nell'esempio seguente, la VM DS14 fornisce il limite massimo di IOPS di scrittura pari a 50.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="03c0a-865">As shown in the sample below, the DS14 VM is delivering its maximum write IOPS limit of 50,000 IOPS.</span></span>  
    ![](media/storage-premium-storage-performance/image11.png)

<span data-ttu-id="03c0a-866">*IOPS massime di lettura*</span><span class="sxs-lookup"><span data-stu-id="03c0a-866">*Maximum Read IOPS*</span></span>  
<span data-ttu-id="03c0a-867">Creare il file processo con le specifiche seguenti per ottenere il valore massimo per le operazioni IOPS di lettura.</span><span class="sxs-lookup"><span data-stu-id="03c0a-867">Create the job file with following specifications to get maximum Read IOPS.</span></span> <span data-ttu-id="03c0a-868">Assegnare al file il nome "fioread.ini".</span><span class="sxs-lookup"><span data-stu-id="03c0a-868">Name it "fioread.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache
```

<span data-ttu-id="03c0a-869">Notare gli elementi chiave seguenti conformi alle indicazioni di progettazione illustrate nelle sezioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-869">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="03c0a-870">Queste specifiche sono essenziali per ottenere il valore massimo per IOPS:</span><span class="sxs-lookup"><span data-stu-id="03c0a-870">These specifications are essential to drive maximum IOPS,</span></span>

* <span data-ttu-id="03c0a-871">Profondità della coda elevata pari a 256.</span><span class="sxs-lookup"><span data-stu-id="03c0a-871">A high queue depth of 256.</span></span>  
* <span data-ttu-id="03c0a-872">Dimensione di blocco ridotta pari a 8 KB.</span><span class="sxs-lookup"><span data-stu-id="03c0a-872">A small block size of 8KB.</span></span>  
* <span data-ttu-id="03c0a-873">Più thread che eseguono scritture casuali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-873">Multiple threads performing random writes.</span></span>

<span data-ttu-id="03c0a-874">Eseguire il comando seguente per attivare il test FIO per 30 secondi:</span><span class="sxs-lookup"><span data-stu-id="03c0a-874">Run the following command to kick off the FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioread.ini
```

<span data-ttu-id="03c0a-875">Durante l'esecuzione del test, sarà possibile visualizzare il numero di operazioni IOPS di lettura gestite dalla VM e dai dischi Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-875">While the test runs, you will be able to see the number of read IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="03c0a-876">Come illustrato nell'esempio seguente, la VM DS14 fornisce un valore superiore a 64.000 IOPS di lettura.</span><span class="sxs-lookup"><span data-stu-id="03c0a-876">As shown in the sample below, the DS14 VM is delivering more than 64,000 Read IOPS.</span></span> <span data-ttu-id="03c0a-877">Ciò dipende da una combinazione delle prestazioni del disco e della cache.</span><span class="sxs-lookup"><span data-stu-id="03c0a-877">This is a combination of the disk and the cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image12.png)

<span data-ttu-id="03c0a-878">*IOPS massime di lettura e scrittura*</span><span class="sxs-lookup"><span data-stu-id="03c0a-878">*Maximum Read and Write IOPS*</span></span>  
<span data-ttu-id="03c0a-879">Creare il file processo con le specifiche seguenti per ottenere il valore massimo per le operazioni IOPS combinate di lettura e scrittura.</span><span class="sxs-lookup"><span data-stu-id="03c0a-879">Create the job file with following specifications to get maximum combined Read and Write IOPS.</span></span> <span data-ttu-id="03c0a-880">Assegnare al file il nome "fioreadwrite.ini".</span><span class="sxs-lookup"><span data-stu-id="03c0a-880">Name it "fioreadwrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=128
ioengine=libaio
bs=4k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache

[writer1]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer2]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer3]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer4]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
```

<span data-ttu-id="03c0a-881">Notare gli elementi chiave seguenti conformi alle indicazioni di progettazione illustrate nelle sezioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="03c0a-881">Note the follow key things that are in line with the design guidelines discussed in previous sections.</span></span> <span data-ttu-id="03c0a-882">Queste specifiche sono essenziali per ottenere il valore massimo per IOPS:</span><span class="sxs-lookup"><span data-stu-id="03c0a-882">These specifications are essential to drive maximum IOPS,</span></span>

* <span data-ttu-id="03c0a-883">Profondità della coda elevata pari a 128.</span><span class="sxs-lookup"><span data-stu-id="03c0a-883">A high queue depth of 128.</span></span>  
* <span data-ttu-id="03c0a-884">Dimensione di blocco ridotta pari a 4 KB.</span><span class="sxs-lookup"><span data-stu-id="03c0a-884">A small block size of 4KB.</span></span>  
* <span data-ttu-id="03c0a-885">Più thread che eseguono scritture e letture casuali.</span><span class="sxs-lookup"><span data-stu-id="03c0a-885">Multiple threads performing random reads and writes.</span></span>

<span data-ttu-id="03c0a-886">Eseguire il comando seguente per attivare il test FIO per 30 secondi:</span><span class="sxs-lookup"><span data-stu-id="03c0a-886">Run the following command to kick off the FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioreadwrite.ini
```

<span data-ttu-id="03c0a-887">Durante l'esecuzione del test, sarà possibile visualizzare il numero di operazioni IOPS combinate di lettura e scrittura gestite dalla VM e dai dischi Premium.</span><span class="sxs-lookup"><span data-stu-id="03c0a-887">While the test runs, you will be able to see the number of combined read and write IOPS the VM and Premium disks are delivering.</span></span> <span data-ttu-id="03c0a-888">Come illustrato nell'esempio seguente, la VM DS14 fornisce un valore superiore a 100.000 IOPS combinate di lettura e scrittura.</span><span class="sxs-lookup"><span data-stu-id="03c0a-888">As shown in the sample below, the DS14 VM is delivering more than 100,000 combined Read and Write IOPS.</span></span> <span data-ttu-id="03c0a-889">Ciò dipende da una combinazione delle prestazioni del disco e della cache.</span><span class="sxs-lookup"><span data-stu-id="03c0a-889">This is a combination of the disk and the cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image13.png)

<span data-ttu-id="03c0a-890">*Velocità effettiva massima combinata*</span><span class="sxs-lookup"><span data-stu-id="03c0a-890">*Maximum Combined Throughput*</span></span>  
<span data-ttu-id="03c0a-891">Per ottenere la velocità effettiva massima combinata di lettura e scrittura, usare una dimensione di blocco superiore e una profondità della coda elevata con più thread che eseguono letture e scritture.</span><span class="sxs-lookup"><span data-stu-id="03c0a-891">To get the maximum combined Read and Write Throughput, use a larger block size and large queue depth with multiple threads performing reads and writes.</span></span> <span data-ttu-id="03c0a-892">È possibile usare una dimensione di blocco pari a 64 KB e una profondità della coda pari a 128.</span><span class="sxs-lookup"><span data-stu-id="03c0a-892">You can use a block size of 64KB and queue depth of 128.</span></span>

## <a name="next-steps"></a><span data-ttu-id="03c0a-893">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="03c0a-893">Next Steps</span></span>
<span data-ttu-id="03c0a-894">Altre informazioni sull'Archiviazione Premium di Azure:</span><span class="sxs-lookup"><span data-stu-id="03c0a-894">Learn more about Azure Premium Storage:</span></span>

* [<span data-ttu-id="03c0a-895">Archiviazione Premium: archiviazione ad alte prestazioni per carichi di lavoro delle macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="03c0a-895">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](../storage-premium-storage.md)  

<span data-ttu-id="03c0a-896">Per gli utenti di SQL Server sono disponibili articoli sulle procedure consigliate per le prestazioni per SQL Server:</span><span class="sxs-lookup"><span data-stu-id="03c0a-896">For SQL Server users, read articles on Performance Best Practices for SQL Server:</span></span>

* [<span data-ttu-id="03c0a-897">Procedure consigliate per le prestazioni per SQL Server in Macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="03c0a-897">Performance Best Practices for SQL Server in Azure Virtual Machines</span></span>](../../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md)
* [<span data-ttu-id="03c0a-898">L'Archiviazione Premium di Azure offre le prestazioni più elevate per SQL Server in VM di Azure</span><span class="sxs-lookup"><span data-stu-id="03c0a-898">Azure Premium Storage provides highest performance for SQL Server in Azure VM</span></span>](http://blogs.technet.com/b/dataplatforminsider/archive/2015/04/23/azure-premium-storage-provides-highest-performance-for-sql-server-in-azure-vm.aspx)
