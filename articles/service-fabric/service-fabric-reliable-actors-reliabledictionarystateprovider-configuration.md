---
title: Modificare le impostazioni di ReliableDictionaryActorStateProvider nei microservizi di Azure | Documentazione Microsoft
description: Informazioni sulla configurazione di attori con stato di tipo ReliableDictionaryActorStateProvider in Service Fabric di Azure.
services: Service-Fabric
documentationcenter: .net
author: sumukhs
manager: timlt
editor: 
ms.assetid: 79b48ffa-2474-4f1c-a857-3471f9590ded
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 6/29/2017
ms.author: sumukhs
ms.openlocfilehash: 2b5359412ebb4ea42f3e9c22db944aea9a666bb1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="configuring-reliable-actors--reliabledictionaryactorstateprovider"></a><span data-ttu-id="8ce28-103">Configurare ReliableDictionaryActorStateProvider di Reliable Actors</span><span class="sxs-lookup"><span data-stu-id="8ce28-103">Configuring Reliable Actors--ReliableDictionaryActorStateProvider</span></span>
<span data-ttu-id="8ce28-104">È possibile modificare la configurazione predefinita di ReliableDictionaryActorStateProvider cambiando il file settings.xml generato nella radice del pacchetto di Visual Studio all'interno della cartella Config per l'attore specificato.</span><span class="sxs-lookup"><span data-stu-id="8ce28-104">You can modify the default configuration of ReliableDictionaryActorStateProvider by changing the settings.xml file generated in the Visual Studio package root under the Config folder for the specified actor.</span></span>

<span data-ttu-id="8ce28-105">Il runtime di Service Fabric di Azure cerca i nomi di sezione predefiniti nel file settings.xml e utilizza i valori di configurazione durante la creazione dei componenti di runtime sottostanti.</span><span class="sxs-lookup"><span data-stu-id="8ce28-105">The Azure Service Fabric runtime looks for predefined section names in the settings.xml file and consumes the configuration values while creating the underlying runtime components.</span></span>

> [!NOTE]
> <span data-ttu-id="8ce28-106">**Non** eliminare o modificare i nomi di sezione delle configurazioni seguenti nel file settings.xml generato nella soluzione Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="8ce28-106">Do **not** delete or modify the section names of the following configurations in the settings.xml file that is generated in the Visual Studio solution.</span></span>
> 
> 

<span data-ttu-id="8ce28-107">Sono disponibili anche impostazioni globali che influiscono sulla configurazione di ReliableDictionaryActorStateProvider.</span><span class="sxs-lookup"><span data-stu-id="8ce28-107">There are also global settings that affect the configuration of ReliableDictionaryActorStateProvider.</span></span>

## <a name="global-configuration"></a><span data-ttu-id="8ce28-108">Configurazione globale</span><span class="sxs-lookup"><span data-stu-id="8ce28-108">Global Configuration</span></span>
<span data-ttu-id="8ce28-109">La configurazione globale viene specificata nella sezione KtlLogger del manifesto del cluster.</span><span class="sxs-lookup"><span data-stu-id="8ce28-109">The global configuration is specified in the cluster manifest for the cluster under the KtlLogger section.</span></span> <span data-ttu-id="8ce28-110">Consente di configurare il percorso di log condiviso e la dimensione oltre i limiti di memoria globali utilizzati dal logger.</span><span class="sxs-lookup"><span data-stu-id="8ce28-110">It allows configuration of the shared log location and size plus the global memory limits used by the logger.</span></span> <span data-ttu-id="8ce28-111">Si noti che le modifiche apportate al manifesto del cluster influiscono su tutti i servizi che usano ReliableDictionaryActorStateProvider e i servizi affidabili con stato.</span><span class="sxs-lookup"><span data-stu-id="8ce28-111">Note that changes in the cluster manifest affect all services that use ReliableDictionaryActorStateProvider and reliable stateful services.</span></span>

<span data-ttu-id="8ce28-112">Il manifesto del cluster è un unico file XML che contiene le impostazioni e le configurazioni applicabili a tutti i nodi e ai servizi del cluster.</span><span class="sxs-lookup"><span data-stu-id="8ce28-112">The cluster manifest is a single XML file that holds settings and configurations that apply to all nodes and services in the cluster.</span></span> <span data-ttu-id="8ce28-113">Il file tipicamente si chiama ClusterManifest.xml.</span><span class="sxs-lookup"><span data-stu-id="8ce28-113">The file is typically called ClusterManifest.xml.</span></span> <span data-ttu-id="8ce28-114">È possibile visualizzare il manifesto del cluster utilizzando il comando Powershell Get-ServiceFabricClusterManifest.</span><span class="sxs-lookup"><span data-stu-id="8ce28-114">You can see the cluster manifest for your cluster using the Get-ServiceFabricClusterManifest powershell command.</span></span>

### <a name="configuration-names"></a><span data-ttu-id="8ce28-115">Nomi delle configurazioni</span><span class="sxs-lookup"><span data-stu-id="8ce28-115">Configuration names</span></span>
| <span data-ttu-id="8ce28-116">Nome</span><span class="sxs-lookup"><span data-stu-id="8ce28-116">Name</span></span> | <span data-ttu-id="8ce28-117">Unità</span><span class="sxs-lookup"><span data-stu-id="8ce28-117">Unit</span></span> | <span data-ttu-id="8ce28-118">Valore predefinito</span><span class="sxs-lookup"><span data-stu-id="8ce28-118">Default value</span></span> | <span data-ttu-id="8ce28-119">Osservazioni</span><span class="sxs-lookup"><span data-stu-id="8ce28-119">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="8ce28-120">WriteBufferMemoryPoolMinimumInKB</span><span class="sxs-lookup"><span data-stu-id="8ce28-120">WriteBufferMemoryPoolMinimumInKB</span></span> |<span data-ttu-id="8ce28-121">Kilobyte</span><span class="sxs-lookup"><span data-stu-id="8ce28-121">Kilobytes</span></span> |<span data-ttu-id="8ce28-122">8388608</span><span class="sxs-lookup"><span data-stu-id="8ce28-122">8388608</span></span> |<span data-ttu-id="8ce28-123">Numero minimo di KB da allocare in modalità kernel per il pool di memoria del buffer di scrittura del logger.</span><span class="sxs-lookup"><span data-stu-id="8ce28-123">Minimum number of KB to allocate in kernel mode for the logger write buffer memory pool.</span></span> <span data-ttu-id="8ce28-124">Questo pool di memoria viene utilizzato per il caching delle informazioni sullo stato prima della scrittura su disco.</span><span class="sxs-lookup"><span data-stu-id="8ce28-124">This memory pool is used for caching state information before writing to disk.</span></span> |
| <span data-ttu-id="8ce28-125">WriteBufferMemoryPoolMaximumInKB</span><span class="sxs-lookup"><span data-stu-id="8ce28-125">WriteBufferMemoryPoolMaximumInKB</span></span> |<span data-ttu-id="8ce28-126">Kilobyte</span><span class="sxs-lookup"><span data-stu-id="8ce28-126">Kilobytes</span></span> |<span data-ttu-id="8ce28-127">Nessun limite</span><span class="sxs-lookup"><span data-stu-id="8ce28-127">No Limit</span></span> |<span data-ttu-id="8ce28-128">Dimensioni massime raggiungibili dal pool di memoria del buffer di scrittura del logger.</span><span class="sxs-lookup"><span data-stu-id="8ce28-128">Maximum size to which the logger write buffer memory pool can grow.</span></span> |
| <span data-ttu-id="8ce28-129">SharedLogId</span><span class="sxs-lookup"><span data-stu-id="8ce28-129">SharedLogId</span></span> |<span data-ttu-id="8ce28-130">GUID</span><span class="sxs-lookup"><span data-stu-id="8ce28-130">GUID</span></span> |<span data-ttu-id="8ce28-131">""</span><span class="sxs-lookup"><span data-stu-id="8ce28-131">""</span></span> |<span data-ttu-id="8ce28-132">Specifica un GUID univoco per individuare il file di log condiviso predefinito usato da tutti i servizi Reliable Services su tutti i nodi del cluster che non specificano il parametro SharedLogId nella configurazione specifica del servizio.</span><span class="sxs-lookup"><span data-stu-id="8ce28-132">Specifies a unique GUID to use for identifying the default shared log file used by all reliable services on all nodes in the cluster that do not specify the SharedLogId in their service specific configuration.</span></span> <span data-ttu-id="8ce28-133">Se viene specificato lo SharedLogId, deve anche essere specificato lo SharedLogPath.</span><span class="sxs-lookup"><span data-stu-id="8ce28-133">If SharedLogId is specified, then SharedLogPath must also be specified.</span></span> |
| <span data-ttu-id="8ce28-134">SharedLogPath</span><span class="sxs-lookup"><span data-stu-id="8ce28-134">SharedLogPath</span></span> |<span data-ttu-id="8ce28-135">Nome di percorso completo</span><span class="sxs-lookup"><span data-stu-id="8ce28-135">Fully qualified path name</span></span> |<span data-ttu-id="8ce28-136">""</span><span class="sxs-lookup"><span data-stu-id="8ce28-136">""</span></span> |<span data-ttu-id="8ce28-137">Specifica il percorso completo in cui il file di log condiviso viene utilizzato da tutti i servizi Reliable Services su tutti i nodi del cluster che non specificano lo SharedLogPath nella configurazione specifica del servizio.</span><span class="sxs-lookup"><span data-stu-id="8ce28-137">Specifies the fully qualified path where the shared log file used by all reliable services on all nodes in the cluster that do not specify the SharedLogPath in their service specific configuration.</span></span> <span data-ttu-id="8ce28-138">Tuttavia, se è stato specificato SharedLogPath, lo deve essere anche SharedLogId.</span><span class="sxs-lookup"><span data-stu-id="8ce28-138">However, if SharedLogPath is specified, then SharedLogId must also be specified.</span></span> |
| <span data-ttu-id="8ce28-139">SharedLogSizeInMB</span><span class="sxs-lookup"><span data-stu-id="8ce28-139">SharedLogSizeInMB</span></span> |<span data-ttu-id="8ce28-140">Megabyte</span><span class="sxs-lookup"><span data-stu-id="8ce28-140">Megabytes</span></span> |<span data-ttu-id="8ce28-141">8192</span><span class="sxs-lookup"><span data-stu-id="8ce28-141">8192</span></span> |<span data-ttu-id="8ce28-142">Specifica il numero di MB di spazio su disco da allocare in modo statico per il log condiviso.</span><span class="sxs-lookup"><span data-stu-id="8ce28-142">Specifies the number of MB of disk space to statically allocate for the shared log.</span></span> <span data-ttu-id="8ce28-143">Il valore deve essere maggiore di 2048.</span><span class="sxs-lookup"><span data-stu-id="8ce28-143">The value must be 2048 or larger.</span></span> |

### <a name="sample-cluster-manifest-section"></a><span data-ttu-id="8ce28-144">Sezione manifesto del cluster di esempio</span><span class="sxs-lookup"><span data-stu-id="8ce28-144">Sample cluster manifest section</span></span>
```xml
   <Section Name="KtlLogger">
     <Parameter Name="WriteBufferMemoryPoolMinimumInKB" Value="8192" />
     <Parameter Name="WriteBufferMemoryPoolMaximumInKB" Value="8192" />
     <Parameter Name="SharedLogId" Value="{7668BB54-FE9C-48ed-81AC-FF89E60ED2EF}"/>
     <Parameter Name="SharedLogPath" Value="f:\SharedLog.Log"/>
     <Parameter Name="SharedLogSizeInMB" Value="16383"/>
   </Section>
```

### <a name="remarks"></a><span data-ttu-id="8ce28-145">Osservazioni</span><span class="sxs-lookup"><span data-stu-id="8ce28-145">Remarks</span></span>
<span data-ttu-id="8ce28-146">Il logger dispone di un pool di memoria globale allocato dalla memoria non di paging del kernel disponibile per tutti i servizi Reliable Services su un nodo per il caching dei dati sullo stato prima che siano scritti sul log dedicato associato alla replica del servizio Reliable Services.</span><span class="sxs-lookup"><span data-stu-id="8ce28-146">The logger has a global pool of memory allocated from non paged kernel memory that is available to all reliable services on a node for caching state data before being written to the dedicated log associated with the reliable service replica.</span></span> <span data-ttu-id="8ce28-147">La dimensione del pool è controllata dalle impostazioni WriteBufferMemoryPoolMinimumInKB e WriteBufferMemoryPoolMaximumInKB.</span><span class="sxs-lookup"><span data-stu-id="8ce28-147">The pool size is controlled by the WriteBufferMemoryPoolMinimumInKB and WriteBufferMemoryPoolMaximumInKB settings.</span></span> <span data-ttu-id="8ce28-148">WriteBufferMemoryPoolMinimumInKB specifica la dimensione iniziale del pool di memoria e la dimensione minima alla quale è possibile ridurre la memoria.</span><span class="sxs-lookup"><span data-stu-id="8ce28-148">WriteBufferMemoryPoolMinimumInKB specifies both the initial size of this memory pool and the lowest size to which the memory pool may shrink.</span></span> <span data-ttu-id="8ce28-149">WriteBufferMemoryPoolMaximumInKB è la dimensione massima che può raggiungere il pool di memoria.</span><span class="sxs-lookup"><span data-stu-id="8ce28-149">WriteBufferMemoryPoolMaximumInKB is the highest size to which the memory pool may grow.</span></span> <span data-ttu-id="8ce28-150">Ogni replica del servizio Reliable Services aperta può aumentare la dimensione del pool di memoria di una quantità determinata dal sistema, fino a WriteBufferMemoryPoolMaximumInKB.</span><span class="sxs-lookup"><span data-stu-id="8ce28-150">Each reliable service replica that is opened may increase the size of the memory pool by a system determined amount up to WriteBufferMemoryPoolMaximumInKB.</span></span> <span data-ttu-id="8ce28-151">Qualora la domanda per la memoria sia superiore alla disponibilità del pool di memoria, le richieste per la memoria sono ritardate finché la memoria non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="8ce28-151">If there is more demand for memory from the memory pool than is available, requests for memory will be delayed until memory is available.</span></span> <span data-ttu-id="8ce28-152">Pertanto se il pool di memoria del buffer di scrittura è troppo piccolo per una configurazione specifica, le prestazioni potrebbero risentirne.</span><span class="sxs-lookup"><span data-stu-id="8ce28-152">Therefore if the write buffer memory pool is too small for a particular configuration then performance may suffer.</span></span>

<span data-ttu-id="8ce28-153">Le impostazioni SharedLogId e SharedLogPath vengono sempre utilizzate per definire GUID e percorso del log condiviso predefinito per tutti i nodi del cluster.</span><span class="sxs-lookup"><span data-stu-id="8ce28-153">The SharedLogId and SharedLogPath settings are always used together to define the GUID and location for the default shared log for all nodes in the cluster.</span></span> <span data-ttu-id="8ce28-154">Il log condiviso predefinito viene utilizzato per tutti i servizi Reliable Services che non specificano le impostazioni nel file settings.xml per il servizio specifico.</span><span class="sxs-lookup"><span data-stu-id="8ce28-154">The default shared log is used for all reliable services that do not specify the settings in the settings.xml for the specific service.</span></span> <span data-ttu-id="8ce28-155">Per ottenere le migliori prestazioni, i file di log condivisi devono essere memorizzati su dischi riservati esclusivamente al file di log condiviso, in modo da ridurre le situazioni di contesa della testina.</span><span class="sxs-lookup"><span data-stu-id="8ce28-155">For best performance, shared log files should be placed on disks that are used solely for the shared log file to reduce contention.</span></span>

<span data-ttu-id="8ce28-156">SharedLogSizeInMB specifica la quantità di spazio su disco da preallocare per il log condiviso predefinito su tutti i nodi.</span><span class="sxs-lookup"><span data-stu-id="8ce28-156">SharedLogSizeInMB specifies the amount of disk space to preallocate for the default shared log on all nodes.</span></span>  <span data-ttu-id="8ce28-157">Le impostazioni SharedLogId e SharedLogPath non devono essere specificate per specificare SharedLogSizeInMB.</span><span class="sxs-lookup"><span data-stu-id="8ce28-157">SharedLogId and SharedLogPath do not need to be specified in order for SharedLogSizeInMB to be specified.</span></span>

## <a name="replicator-security-configuration"></a><span data-ttu-id="8ce28-158">Configurazione della sicurezza del replicatore</span><span class="sxs-lookup"><span data-stu-id="8ce28-158">Replicator security configuration</span></span>
<span data-ttu-id="8ce28-159">Le configurazioni della sicurezza del replicatore consentono di proteggere il canale di comunicazione usato durante la replica.</span><span class="sxs-lookup"><span data-stu-id="8ce28-159">Replicator security configurations are used to secure the communication channel that is used during replication.</span></span> <span data-ttu-id="8ce28-160">Questo significa che i servizi non possono visualizzare l'uno il traffico di replica dell'altro, garantendo la sicurezza dei dati a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="8ce28-160">This means that services cannot see each other's replication traffic, ensuring the data that is made highly available is also secure.</span></span>
<span data-ttu-id="8ce28-161">Per impostazione predefinita, una sezione di configurazione della sicurezza vuota non abilita la sicurezza della replica.</span><span class="sxs-lookup"><span data-stu-id="8ce28-161">By default, an empty security configuration section prevents replication security.</span></span>

### <a name="section-name"></a><span data-ttu-id="8ce28-162">Nome della sezione</span><span class="sxs-lookup"><span data-stu-id="8ce28-162">Section name</span></span>
<span data-ttu-id="8ce28-163">&lt;ActorName&gt;ServiceReplicatorSecurityConfig</span><span class="sxs-lookup"><span data-stu-id="8ce28-163">&lt;ActorName&gt;ServiceReplicatorSecurityConfig</span></span>

## <a name="replicator-configuration"></a><span data-ttu-id="8ce28-164">Configurazione del replicatore</span><span class="sxs-lookup"><span data-stu-id="8ce28-164">Replicator configuration</span></span>
<span data-ttu-id="8ce28-165">Le configurazioni del replicatore vengono usate per configurare il replicatore responsabile di garantire l'elevata affidabilità dello stato del provider di stato degli attori replicando e rendendo permanente tale stato in locale.</span><span class="sxs-lookup"><span data-stu-id="8ce28-165">Replicator configurations are used to configure the replicator that is responsible for making the Actor State Provider state highly reliable by replicating and persisting the state locally.</span></span>
<span data-ttu-id="8ce28-166">La configurazione predefinita viene generata dal modello di Visual Studio e dovrebbe essere sufficiente.</span><span class="sxs-lookup"><span data-stu-id="8ce28-166">The default configuration is generated by the Visual Studio template and should suffice.</span></span> <span data-ttu-id="8ce28-167">Questa sezione descrive le configurazioni aggiuntive che sono disponibili per ottimizzare il replicatore.</span><span class="sxs-lookup"><span data-stu-id="8ce28-167">This section talks about additional configurations that are available to tune the replicator.</span></span>

### <a name="section-name"></a><span data-ttu-id="8ce28-168">Nome della sezione</span><span class="sxs-lookup"><span data-stu-id="8ce28-168">Section name</span></span>
<span data-ttu-id="8ce28-169">&lt;ActorName&gt;ServiceReplicatorConfig</span><span class="sxs-lookup"><span data-stu-id="8ce28-169">&lt;ActorName&gt;ServiceReplicatorConfig</span></span>

### <a name="configuration-names"></a><span data-ttu-id="8ce28-170">Nomi delle configurazioni</span><span class="sxs-lookup"><span data-stu-id="8ce28-170">Configuration names</span></span>
| <span data-ttu-id="8ce28-171">Nome</span><span class="sxs-lookup"><span data-stu-id="8ce28-171">Name</span></span> | <span data-ttu-id="8ce28-172">Unità</span><span class="sxs-lookup"><span data-stu-id="8ce28-172">Unit</span></span> | <span data-ttu-id="8ce28-173">Valore predefinito</span><span class="sxs-lookup"><span data-stu-id="8ce28-173">Default value</span></span> | <span data-ttu-id="8ce28-174">Osservazioni</span><span class="sxs-lookup"><span data-stu-id="8ce28-174">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="8ce28-175">BatchAcknowledgementInterval</span><span class="sxs-lookup"><span data-stu-id="8ce28-175">BatchAcknowledgementInterval</span></span> |<span data-ttu-id="8ce28-176">Secondi</span><span class="sxs-lookup"><span data-stu-id="8ce28-176">Seconds</span></span> |<span data-ttu-id="8ce28-177">0,015</span><span class="sxs-lookup"><span data-stu-id="8ce28-177">0.015</span></span> |<span data-ttu-id="8ce28-178">Periodo di tempo per cui il replicatore, dopo aver ricevuto un'operazione, attende presso il replicatore secondario prima di inviare un acknowledgement al replicatore principale.</span><span class="sxs-lookup"><span data-stu-id="8ce28-178">Time period for which the replicator at the secondary waits after receiving an operation before sending back an acknowledgement to the primary.</span></span> <span data-ttu-id="8ce28-179">Gli altri acknowledgement relativi alle operazioni elaborate all'interno di questo intervallo vengono inviati come risposta unica.</span><span class="sxs-lookup"><span data-stu-id="8ce28-179">Any other acknowledgements to be sent for operations processed within this interval are sent as one response.</span></span> |
| <span data-ttu-id="8ce28-180">ReplicatorEndpoint</span><span class="sxs-lookup"><span data-stu-id="8ce28-180">ReplicatorEndpoint</span></span> |<span data-ttu-id="8ce28-181">N/D</span><span class="sxs-lookup"><span data-stu-id="8ce28-181">N/A</span></span> |<span data-ttu-id="8ce28-182">Nessun valore predefinito: parametro obbligatorio</span><span class="sxs-lookup"><span data-stu-id="8ce28-182">No default--required parameter</span></span> |<span data-ttu-id="8ce28-183">Indirizzo IP e porta che il replicatore principale/secondario userà per comunicare con altri replicatori nel set di repliche.</span><span class="sxs-lookup"><span data-stu-id="8ce28-183">IP address and port that the primary/secondary replicator will use to communicate with other replicators in the replica set.</span></span> <span data-ttu-id="8ce28-184">Questo dovrebbe fare riferimento a un endpoint di risorsa TCP nel manifesto del servizio.</span><span class="sxs-lookup"><span data-stu-id="8ce28-184">This should reference a TCP resource endpoint in the service manifest.</span></span> <span data-ttu-id="8ce28-185">Per altre informazioni sulla definizione delle risorse dell'endpoint nel manifesto del servizio, vedere [Risorse del manifesto del servizio](service-fabric-service-manifest-resources.md) .</span><span class="sxs-lookup"><span data-stu-id="8ce28-185">Refer to [Service manifest resources](service-fabric-service-manifest-resources.md) to read more about defining endpoint resources in service manifest.</span></span> |
| <span data-ttu-id="8ce28-186">MaxReplicationMessageSize</span><span class="sxs-lookup"><span data-stu-id="8ce28-186">MaxReplicationMessageSize</span></span> |<span data-ttu-id="8ce28-187">Byte</span><span class="sxs-lookup"><span data-stu-id="8ce28-187">Bytes</span></span> |<span data-ttu-id="8ce28-188">50 MB</span><span class="sxs-lookup"><span data-stu-id="8ce28-188">50 MB</span></span> |<span data-ttu-id="8ce28-189">Dimensione massima dei dati di replica che è possibile trasmettere in un singolo messaggio.</span><span class="sxs-lookup"><span data-stu-id="8ce28-189">Maximum size of replication data that can be transmitted in a single message.</span></span> |
| <span data-ttu-id="8ce28-190">MaxPrimaryReplicationQueueSize</span><span class="sxs-lookup"><span data-stu-id="8ce28-190">MaxPrimaryReplicationQueueSize</span></span> |<span data-ttu-id="8ce28-191">Numero di operazioni</span><span class="sxs-lookup"><span data-stu-id="8ce28-191">Number of operations</span></span> |<span data-ttu-id="8ce28-192">8192</span><span class="sxs-lookup"><span data-stu-id="8ce28-192">8192</span></span> |<span data-ttu-id="8ce28-193">Numero massimo di operazioni nella coda principale.</span><span class="sxs-lookup"><span data-stu-id="8ce28-193">Maximum number of operations in the primary queue.</span></span> <span data-ttu-id="8ce28-194">Un'operazione viene liberata quando il replicatore principale riceve un acknowledgement da tutti i replicatori secondari.</span><span class="sxs-lookup"><span data-stu-id="8ce28-194">An operation is freed up after the primary replicator receives an acknowledgement from all the secondary replicators.</span></span> <span data-ttu-id="8ce28-195">Questo valore deve essere maggiore di 64 ed essere una potenza di 2.</span><span class="sxs-lookup"><span data-stu-id="8ce28-195">This value must be greater than 64 and a power of 2.</span></span> |
| <span data-ttu-id="8ce28-196">MaxSecondaryReplicationQueueSize</span><span class="sxs-lookup"><span data-stu-id="8ce28-196">MaxSecondaryReplicationQueueSize</span></span> |<span data-ttu-id="8ce28-197">Numero di operazioni</span><span class="sxs-lookup"><span data-stu-id="8ce28-197">Number of operations</span></span> |<span data-ttu-id="8ce28-198">16384</span><span class="sxs-lookup"><span data-stu-id="8ce28-198">16384</span></span> |<span data-ttu-id="8ce28-199">Numero massimo di operazioni nella coda secondaria.</span><span class="sxs-lookup"><span data-stu-id="8ce28-199">Maximum number of operations in the secondary queue.</span></span> <span data-ttu-id="8ce28-200">Un'operazione viene liberata quando il relativo stato viene reso altamente disponibile tramite persistenza.</span><span class="sxs-lookup"><span data-stu-id="8ce28-200">An operation is freed up after making its state highly available through persistence.</span></span> <span data-ttu-id="8ce28-201">Questo valore deve essere maggiore di 64 ed essere una potenza di 2.</span><span class="sxs-lookup"><span data-stu-id="8ce28-201">This value must be greater than 64 and a power of 2.</span></span> |
| <span data-ttu-id="8ce28-202">CheckpointThresholdInMB</span><span class="sxs-lookup"><span data-stu-id="8ce28-202">CheckpointThresholdInMB</span></span> |<span data-ttu-id="8ce28-203">MB</span><span class="sxs-lookup"><span data-stu-id="8ce28-203">MB</span></span> |<span data-ttu-id="8ce28-204">200</span><span class="sxs-lookup"><span data-stu-id="8ce28-204">200</span></span> |<span data-ttu-id="8ce28-205">Quantità di spazio del file di log dopo il quale viene eseguito un checkpoint dello stato.</span><span class="sxs-lookup"><span data-stu-id="8ce28-205">Amount of log file space after which the state is checkpointed.</span></span> |
| <span data-ttu-id="8ce28-206">MaxRecordSizeInKB</span><span class="sxs-lookup"><span data-stu-id="8ce28-206">MaxRecordSizeInKB</span></span> |<span data-ttu-id="8ce28-207">KB</span><span class="sxs-lookup"><span data-stu-id="8ce28-207">KB</span></span> |<span data-ttu-id="8ce28-208">1024</span><span class="sxs-lookup"><span data-stu-id="8ce28-208">1024</span></span> |<span data-ttu-id="8ce28-209">La dimensione massima dei record che il replicatore può scrivere nel log.</span><span class="sxs-lookup"><span data-stu-id="8ce28-209">Largest record size that the replicator may write in the log.</span></span> <span data-ttu-id="8ce28-210">Questo valore deve essere un multiplo di 4 ed essere maggiore di 16.</span><span class="sxs-lookup"><span data-stu-id="8ce28-210">This value must be a multiple of 4 and greater than 16.</span></span> |
| <span data-ttu-id="8ce28-211">OptimizeLogForLowerDiskUsage</span><span class="sxs-lookup"><span data-stu-id="8ce28-211">OptimizeLogForLowerDiskUsage</span></span> |<span data-ttu-id="8ce28-212">Boolean</span><span class="sxs-lookup"><span data-stu-id="8ce28-212">Boolean</span></span> |<span data-ttu-id="8ce28-213">true</span><span class="sxs-lookup"><span data-stu-id="8ce28-213">true</span></span> |<span data-ttu-id="8ce28-214">Se il valore è true, il log viene configurato in modo che il file di log dedicato della replica venga creato mediante un file NTFS sparse.</span><span class="sxs-lookup"><span data-stu-id="8ce28-214">When true, the log is configured so that the replica's dedicated log file is created by using an NTFS sparse file.</span></span> <span data-ttu-id="8ce28-215">Questo riduce l'utilizzo effettivo di spazio su disco per il file.</span><span class="sxs-lookup"><span data-stu-id="8ce28-215">This lowers the actual disk space usage for the file.</span></span> <span data-ttu-id="8ce28-216">Quando il valore è false, il file viene creato con allocazioni predefinite che assicurano le migliori prestazioni in scrittura.</span><span class="sxs-lookup"><span data-stu-id="8ce28-216">When false, the file is created with fixed allocations, which provide the best write performance.</span></span> |
| <span data-ttu-id="8ce28-217">SharedLogId</span><span class="sxs-lookup"><span data-stu-id="8ce28-217">SharedLogId</span></span> |<span data-ttu-id="8ce28-218">GUID</span><span class="sxs-lookup"><span data-stu-id="8ce28-218">guid</span></span> |<span data-ttu-id="8ce28-219">""</span><span class="sxs-lookup"><span data-stu-id="8ce28-219">""</span></span> |<span data-ttu-id="8ce28-220">Specifica un GUID da usare per l'identificazione del file di log condiviso usato con la replica in oggetto.</span><span class="sxs-lookup"><span data-stu-id="8ce28-220">Specifies a unique guid to use for identifying the shared log file used with this replica.</span></span> <span data-ttu-id="8ce28-221">In genere, i servizi non devono usare questa impostazione.</span><span class="sxs-lookup"><span data-stu-id="8ce28-221">Typically, services should not use this setting.</span></span> <span data-ttu-id="8ce28-222">Tuttavia, se è stato specificato SharedLogId, lo deve essere anche SharedLogPath.</span><span class="sxs-lookup"><span data-stu-id="8ce28-222">However, if SharedLogId is specified, then SharedLogPath must also be specified.</span></span> |
| <span data-ttu-id="8ce28-223">SharedLogPath</span><span class="sxs-lookup"><span data-stu-id="8ce28-223">SharedLogPath</span></span> |<span data-ttu-id="8ce28-224">Nome di percorso completo</span><span class="sxs-lookup"><span data-stu-id="8ce28-224">Fully qualified path name</span></span> |<span data-ttu-id="8ce28-225">""</span><span class="sxs-lookup"><span data-stu-id="8ce28-225">""</span></span> |<span data-ttu-id="8ce28-226">Specifica il percorso completo in cui verrà creato il file di log condiviso per la replica in oggetto.</span><span class="sxs-lookup"><span data-stu-id="8ce28-226">Specifies the fully qualified path where the shared log file for this replica will be created.</span></span> <span data-ttu-id="8ce28-227">In genere, i servizi non devono usare questa impostazione.</span><span class="sxs-lookup"><span data-stu-id="8ce28-227">Typically, services should not use this setting.</span></span> <span data-ttu-id="8ce28-228">Tuttavia, se è stato specificato SharedLogPath, lo deve essere anche SharedLogId.</span><span class="sxs-lookup"><span data-stu-id="8ce28-228">However, if SharedLogPath is specified, then SharedLogId must also be specified.</span></span> |

## <a name="sample-configuration-file"></a><span data-ttu-id="8ce28-229">Esempio file di configurazione</span><span class="sxs-lookup"><span data-stu-id="8ce28-229">Sample configuration file</span></span>
```xml
<?xml version="1.0" encoding="utf-8"?>
<Settings xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/2011/01/fabric">
   <Section Name="MyActorServiceReplicatorConfig">
      <Parameter Name="ReplicatorEndpoint" Value="MyActorServiceReplicatorEndpoint" />
      <Parameter Name="BatchAcknowledgementInterval" Value="0.05"/>
      <Parameter Name="CheckpointThresholdInMB" Value="180" />
   </Section>
   <Section Name="MyActorServiceReplicatorSecurityConfig">
      <Parameter Name="CredentialType" Value="X509" />
      <Parameter Name="FindType" Value="FindByThumbprint" />
      <Parameter Name="FindValue" Value="9d c9 06 b1 69 dc 4f af fd 16 97 ac 78 1e 80 67 90 74 9d 2f" />
      <Parameter Name="StoreLocation" Value="LocalMachine" />
      <Parameter Name="StoreName" Value="My" />
      <Parameter Name="ProtectionLevel" Value="EncryptAndSign" />
      <Parameter Name="AllowedCommonNames" Value="My-Test-SAN1-Alice,My-Test-SAN1-Bob" />
   </Section>
</Settings>
```

## <a name="remarks"></a><span data-ttu-id="8ce28-230">Osservazioni</span><span class="sxs-lookup"><span data-stu-id="8ce28-230">Remarks</span></span>
<span data-ttu-id="8ce28-231">Il parametro BatchAcknowledgementInterval controlla la latenza di replica.</span><span class="sxs-lookup"><span data-stu-id="8ce28-231">The BatchAcknowledgementInterval parameter controls replication latency.</span></span> <span data-ttu-id="8ce28-232">Il valore '0' determina la latenza più bassa possibile a scapito della velocità effettiva, in quanto è necessario inviare ed elaborare una maggiore quantità di messaggi di acknowledgement, ciascuno dei quali contenente un numero minore di acknowledgement.</span><span class="sxs-lookup"><span data-stu-id="8ce28-232">A value of '0' results in the lowest possible latency, at the cost of throughput (as more acknowledgement messages must be sent and processed, each containing fewer acknowledgements).</span></span>
<span data-ttu-id="8ce28-233">Più alto è il valore di BatchAcknowledgementInterval, maggiore sarà la velocità effettiva di replica complessiva, ma con una latenza delle operazioni più elevata.</span><span class="sxs-lookup"><span data-stu-id="8ce28-233">The larger the value for BatchAcknowledgementInterval, the higher the overall replication throughput, at the cost of higher operation latency.</span></span> <span data-ttu-id="8ce28-234">Questo ha un impatto diretto sulla latenza dei commit delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="8ce28-234">This directly translates to the latency of transaction commits.</span></span>

<span data-ttu-id="8ce28-235">Il parametro CheckpointThresholdInMB controlla la quantità di spazio su disco che il replicatore può usare per archiviare le informazioni sullo stato nel file di log dedicato della replica.</span><span class="sxs-lookup"><span data-stu-id="8ce28-235">The CheckpointThresholdInMB parameter controls the amount of disk space that the replicator can use to store state information in the replica's dedicated log file.</span></span> <span data-ttu-id="8ce28-236">Aumentandone il valore rispetto al valore predefinito potrebbe causare tempi di riconfigurazione più rapidi quando una nuova replica viene aggiunta al set.</span><span class="sxs-lookup"><span data-stu-id="8ce28-236">Increasing this to a higher value than the default could result in faster reconfiguration times when a new replica is added to the set.</span></span> <span data-ttu-id="8ce28-237">Questo a causa del trasferimento di stato parziale che viene eseguito in seguito alla disponibilità di una maggiore cronologia di operazioni nel log</span><span class="sxs-lookup"><span data-stu-id="8ce28-237">This is due to the partial state transfer that takes place due to the availability of more history of operations in the log.</span></span> <span data-ttu-id="8ce28-238">e che può aumentare il tempo di ripristino di una replica dopo un arresto anomalo.</span><span class="sxs-lookup"><span data-stu-id="8ce28-238">This can potentially increase the recovery time of a replica after a crash.</span></span>

<span data-ttu-id="8ce28-239">Se si imposta OptimizeForLowerDiskUsage su true, lo spazio del file di log viene sottoposto a over-provisioning per consentire alle repliche attive di archiviare nei propri file di log una maggiore quantità di informazioni sullo stato, lasciando alle repliche inattive una minore quantità di spazio su disco.</span><span class="sxs-lookup"><span data-stu-id="8ce28-239">If you set OptimizeForLowerDiskUsage to true, log file space will be over-provisioned so that active replicas can store more state information in their log files, while inactive replicas will use less disk space.</span></span> <span data-ttu-id="8ce28-240">In questo modo, è possibile ospitare più repliche in un nodo.</span><span class="sxs-lookup"><span data-stu-id="8ce28-240">This makes it possible to host more replicas on a node.</span></span> <span data-ttu-id="8ce28-241">Se si imposta OptimizeForLowerDiskUsage su false, le informazioni sullo stato vengono scritte nei file di log più rapidamente.</span><span class="sxs-lookup"><span data-stu-id="8ce28-241">If you set OptimizeForLowerDiskUsage to false, the state information is written to the log files more quickly.</span></span>

<span data-ttu-id="8ce28-242">L'impostazione MaxRecordSizeInKB definisce la dimensione massima dei record che il replicatore può scrivere nel file di log.</span><span class="sxs-lookup"><span data-stu-id="8ce28-242">The MaxRecordSizeInKB setting defines the maximum size of a record that can be written by the replicator into the log file.</span></span> <span data-ttu-id="8ce28-243">Nella maggior parte dei casi, la dimensione predefinita del record, 1024 KB, è ottimale.</span><span class="sxs-lookup"><span data-stu-id="8ce28-243">In most cases, the default 1024-KB record size is optimal.</span></span> <span data-ttu-id="8ce28-244">Tuttavia, se il servizio richiede che nelle informazioni sullo stato vengano inclusi elementi dati di dimensioni maggiori, è possibile che sia necessario aumentare questo valore.</span><span class="sxs-lookup"><span data-stu-id="8ce28-244">However, if the service is causing larger data items to be part of the state information, then this value might need to be increased.</span></span> <span data-ttu-id="8ce28-245">La riduzione delle dimensioni di MaxRecordSizeInKB a meno di 1024 KB è relativamente vantaggiosa perché i record di dimensioni minori usano soltanto lo spazio necessario.</span><span class="sxs-lookup"><span data-stu-id="8ce28-245">There is little benefit in making MaxRecordSizeInKB smaller than 1024, as smaller records use only the space needed for the smaller record.</span></span> <span data-ttu-id="8ce28-246">È probabile che questo valore debba essere modificato solo in rari casi.</span><span class="sxs-lookup"><span data-stu-id="8ce28-246">We expect that this value would need to be changed only in rare cases.</span></span>

<span data-ttu-id="8ce28-247">Le impostazioni SharedLogId e SharedLogPath vengono sempre usate insieme e consentono a un servizio di usare un log condiviso separato dal log condiviso predefinito per il nodo.</span><span class="sxs-lookup"><span data-stu-id="8ce28-247">The SharedLogId and SharedLogPath settings are always used together to make a service use a separate shared log from the default shared log for the node.</span></span> <span data-ttu-id="8ce28-248">Per ottenere migliori prestazioni, il maggior numero di servizi possibile dovrebbe specificare lo stesso log condiviso.</span><span class="sxs-lookup"><span data-stu-id="8ce28-248">For best efficiency, as many services as possible should specify the same shared log.</span></span> <span data-ttu-id="8ce28-249">I file di log condivisi devono essere memorizzati su dischi riservati esclusivamente a questo tipo di file per ridurre le situazioni di contesa della testina.</span><span class="sxs-lookup"><span data-stu-id="8ce28-249">Shared log files should be placed on disks that are used solely for the shared log file, to reduce head movement contention.</span></span> <span data-ttu-id="8ce28-250">È probabile che questi valori debbano essere modificati solo in rari casi.</span><span class="sxs-lookup"><span data-stu-id="8ce28-250">We expect that these values would need to be changed only in rare cases.</span></span>

