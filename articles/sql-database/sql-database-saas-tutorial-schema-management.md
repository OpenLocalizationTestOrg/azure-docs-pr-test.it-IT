---
title: schema di Database SQL di Azure aaaManage in un'applicazione multi-tenant | Documenti Microsoft
description: "Gestire lo schema per più tenant in un'applicazione multi-tenant che usa il database SQL di Azure"
keywords: esercitazione database SQL
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: billgib; sstein
ms.openlocfilehash: ea946e556808dabd60dd39cb8173d0512d4bddec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="manage-schema-for-multiple-tenants-in-hello-wingtip-saas-application"></a><span data-ttu-id="e84ed-104">Gestione dello schema per più tenant nell'applicazione SaaS Wingtip hello</span><span class="sxs-lookup"><span data-stu-id="e84ed-104">Manage schema for multiple tenants in hello Wingtip SaaS application</span></span>

<span data-ttu-id="e84ed-105">Hello [prima esercitazione Wingtip SaaS](sql-database-saas-tutorial.md) viene illustrato come applicazione hello può eseguire il provisioning di un database tenant e registrarlo nel catalogo di hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-105">hello [first Wingtip SaaS tutorial](sql-database-saas-tutorial.md) shows how hello app can provision a tenant database and register it in hello catalog.</span></span> <span data-ttu-id="e84ed-106">Come qualsiasi altra applicazione, hello app SaaS Wingtip evolveranno nel tempo e in alcuni casi sarà necessario database toohello le modifiche.</span><span class="sxs-lookup"><span data-stu-id="e84ed-106">Like any application, hello Wingtip SaaS app will evolve over time, and at times will require changes toohello database.</span></span> <span data-ttu-id="e84ed-107">Le modifiche possono includere schema nuovo o modificato, i dati di riferimento nuove o modificate e prestazioni dell'applicazione ottimali tooensure attività manutenzione routine del database.</span><span class="sxs-lookup"><span data-stu-id="e84ed-107">Changes may include new or changed schema, new or changed reference data, and routine database maintenance tasks tooensure optimal app performance.</span></span> <span data-ttu-id="e84ed-108">Con un'applicazione SaaS, queste modifiche devono toobe distribuiti in modo coordinato tra un fleet potenzialmente grande di database tenant.</span><span class="sxs-lookup"><span data-stu-id="e84ed-108">With a SaaS application, these changes need toobe deployed in a coordinated manner across a potentially massive fleet of tenant databases.</span></span> <span data-ttu-id="e84ed-109">Per questi toobe modifiche in futuro tenant database, è necessario toobe incorporate nel processo di provisioning hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-109">For these changes toobe in future tenant databases, they need toobe incorporated into hello provisioning process.</span></span>

<span data-ttu-id="e84ed-110">In questa esercitazione vengono illustrati due scenari - distribuzione degli aggiornamenti di dati di riferimento per tutti i tenant, e un indice su hello regolarli tabella contenente i dati di riferimento di hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-110">This tutorial explores two scenarios - deploying reference data updates for all tenants, and retuning an index on hello table containing hello reference data.</span></span> <span data-ttu-id="e84ed-111">Hello [processi elastici](sql-database-elastic-jobs-overview.md) funzionalità viene utilizzato tooexecute queste operazioni in tutti i tenant e hello *finale* database tenant che viene utilizzato come modello per i nuovi database.</span><span class="sxs-lookup"><span data-stu-id="e84ed-111">hello [Elastic jobs](sql-database-elastic-jobs-overview.md) feature is used tooexecute these operations across all tenants, and hello *golden* tenant database that is used as a template for new databases.</span></span>

<span data-ttu-id="e84ed-112">In questa esercitazione si apprenderà come:</span><span class="sxs-lookup"><span data-stu-id="e84ed-112">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="e84ed-113">Creare un account di processo</span><span class="sxs-lookup"><span data-stu-id="e84ed-113">Create a job account</span></span>
> * <span data-ttu-id="e84ed-114">Eseguire query in più tenant</span><span class="sxs-lookup"><span data-stu-id="e84ed-114">Query across multiple tenants</span></span>
> * <span data-ttu-id="e84ed-115">Aggiornare i dati in tutti i database tenant</span><span class="sxs-lookup"><span data-stu-id="e84ed-115">Update data in all tenant databases</span></span>
> * <span data-ttu-id="e84ed-116">Creare un indice su una tabella in tutti i database tenant</span><span class="sxs-lookup"><span data-stu-id="e84ed-116">Create an index on a table in all tenant databases</span></span>


<span data-ttu-id="e84ed-117">toocomplete questa esercitazione, assicurarsi che i hello seguenti prerequisiti siano soddisfatti:</span><span class="sxs-lookup"><span data-stu-id="e84ed-117">toocomplete this tutorial, make sure hello following prerequisites are met:</span></span>

* <span data-ttu-id="e84ed-118">app SaaS Wingtip Hello viene distribuita.</span><span class="sxs-lookup"><span data-stu-id="e84ed-118">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="e84ed-119">toodeploy in meno di cinque minuti, vedere [Distribuisci ed esplorare l'applicazione SaaS Wingtip hello](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="e84ed-119">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="e84ed-120">Azure PowerShell è installato.</span><span class="sxs-lookup"><span data-stu-id="e84ed-120">Azure PowerShell is installed.</span></span> <span data-ttu-id="e84ed-121">Per informazioni dettagliate, vedere [Introduzione ad Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="e84ed-121">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>
* <span data-ttu-id="e84ed-122">è installata la versione più recente Hello di SQL Server Management Studio (SSMS).</span><span class="sxs-lookup"><span data-stu-id="e84ed-122">hello latest version of SQL Server Management Studio (SSMS) is installed.</span></span> [<span data-ttu-id="e84ed-123">Scaricare e installare SSMS</span><span class="sxs-lookup"><span data-stu-id="e84ed-123">Download and Install SSMS</span></span>](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms)

<span data-ttu-id="e84ed-124">*Questa esercitazione Usa le funzionalità di hello servizio Database SQL in un'anteprima limitata (processi di Database elastico). Se si desidera toodo questa esercitazione, specificare l'id sottoscrizione tooSaaSFeedback@microsoft.com con soggetto = elastico anteprima dei processi. Dopo aver ricevuto una conferma che la sottoscrizione è stata abilitata, [scaricare e installare i cmdlet di processi di pre-release più recenti hello](https://github.com/jaredmoo/azure-powershell/releases). Questa versione di anteprima è limitata. Per eventuali domande o richieste di supporto, contattare SaaSFeedback@microsoft.com.*</span><span class="sxs-lookup"><span data-stu-id="e84ed-124">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>


## <a name="introduction-toosaas-schema-management-patterns"></a><span data-ttu-id="e84ed-125">Introduzione tooSaaS modelli di gestione dello Schema</span><span class="sxs-lookup"><span data-stu-id="e84ed-125">Introduction tooSaaS Schema Management patterns</span></span>

<span data-ttu-id="e84ed-126">Hello single-tenant per ogni database SaaS serie vantaggi in diversi modi isolamento dei dati hello risultante, ma in hello contemporaneamente introduce complessità hello di gestione e la gestione di molti database.</span><span class="sxs-lookup"><span data-stu-id="e84ed-126">hello single tenant per database SaaS pattern benefits in many ways from hello data isolation that results, but at hello same time introduces hello additional complexity of maintaining and managing many databases.</span></span> <span data-ttu-id="e84ed-127">[I processi elastici](sql-database-elastic-jobs-overview.md) facilita l'amministrazione e gestione del livello dati SQL di hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-127">[Elastic Jobs](sql-database-elastic-jobs-overview.md) facilitates administration and management of hello SQL data tier.</span></span> <span data-ttu-id="e84ed-128">I processi consentono di toosecurely ed eseguire in modo affidabile, attività (script T-SQL) indipendentemente dall'interazione dell'utente o input, rispetto a un gruppo di database.</span><span class="sxs-lookup"><span data-stu-id="e84ed-128">Jobs enable you toosecurely and reliably, run tasks (T-SQL scripts) independent of user interaction or input, against a group of databases.</span></span> <span data-ttu-id="e84ed-129">Questo metodo può essere utilizzato toodeploy schema e le modifiche ai dati di riferimento comuni tra tutti i tenant in un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="e84ed-129">This method can be used toodeploy schema and common reference data changes across all tenants in an application.</span></span> <span data-ttu-id="e84ed-130">Processi elastici possono anche essere utilizzati toomaintain un *finale* utilizzata la copia del database hello toocreate nuovi tenant, assicurando che ha sempre hello più recenti dello schema e dati di riferimento.</span><span class="sxs-lookup"><span data-stu-id="e84ed-130">Elastic Jobs can also be used toomaintain a *golden* copy of hello database used toocreate new tenants, ensuring it always has hello latest schema and reference data.</span></span>

![schermata](media/sql-database-saas-tutorial-schema-management/schema-management.png)


## <a name="elastic-jobs-limited-preview"></a><span data-ttu-id="e84ed-132">Anteprima limitata del servizio Processi elastici</span><span class="sxs-lookup"><span data-stu-id="e84ed-132">Elastic Jobs limited preview</span></span>

<span data-ttu-id="e84ed-133">È disponibile una nuova versione del servizio Processi elastici che è ora una funzionalità integrata di database SQL di Azure, che non richiede servizi o componenti aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="e84ed-133">There is a new version of Elastic Jobs that is now an integrated feature of Azure SQL Database (that requires no additional services or components).</span></span> <span data-ttu-id="e84ed-134">Questa nuova versione del servizio Processi elastici è attualmente in anteprima limitata.</span><span class="sxs-lookup"><span data-stu-id="e84ed-134">This new version of Elastic Jobs is currently in limited preview.</span></span> <span data-ttu-id="e84ed-135">Questa versione di anteprima limitato attualmente supporta gli account di processo di PowerShell toocreate e toocreate T-SQL e gestire i processi.</span><span class="sxs-lookup"><span data-stu-id="e84ed-135">This limited preview currently supports PowerShell toocreate job accounts, and T-SQL toocreate and manage jobs.</span></span>

> [!NOTE]
> <span data-ttu-id="e84ed-136">*Questa esercitazione Usa le funzionalità di hello servizio Database SQL in un'anteprima limitata (processi di Database elastico). Se si desidera toodo questa esercitazione, specificare l'id sottoscrizione tooSaaSFeedback@microsoft.com con soggetto = elastico anteprima dei processi. Dopo aver ricevuto una conferma che la sottoscrizione è stata abilitata, [scaricare e installare i cmdlet di processi di pre-release più recenti hello](https://github.com/jaredmoo/azure-powershell/releases). Questa versione di anteprima è limitata. Per eventuali domande o richieste di supporto, contattare SaaSFeedback@microsoft.com.*</span><span class="sxs-lookup"><span data-stu-id="e84ed-136">*This tutorial uses features of hello SQL Database service that are in a limited preview (Elastic Database jobs). If you wish toodo this tutorial, provide your subscription id tooSaaSFeedback@microsoft.com with subject=Elastic Jobs Preview. After you receive confirmation that your subscription has been enabled, [download and install hello latest pre-release jobs cmdlets](https://github.com/jaredmoo/azure-powershell/releases). This preview is limited, so contact SaaSFeedback@microsoft.com for related questions or support.*</span></span>

## <a name="get-hello-wingtip-application-scripts"></a><span data-ttu-id="e84ed-137">Ottenere script per l'applicazione hello Wingtip</span><span class="sxs-lookup"><span data-stu-id="e84ed-137">Get hello Wingtip application scripts</span></span>

<span data-ttu-id="e84ed-138">Hello Wingtip SaaS script e codice sorgente dell'applicazione sono disponibili in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) repository github.</span><span class="sxs-lookup"><span data-stu-id="e84ed-138">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="e84ed-139">[I passaggi di script di SaaS Wingtip hello toodownload](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span><span class="sxs-lookup"><span data-stu-id="e84ed-139">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="create-a-job-account-database-and-new-job-account"></a><span data-ttu-id="e84ed-140">Creare un database di account per processi e un nuovo account per processi</span><span class="sxs-lookup"><span data-stu-id="e84ed-140">Create a job account database and new job account</span></span>

<span data-ttu-id="e84ed-141">In questa esercitazione è necessario che utilizzare PowerShell toocreate hello processo account account di database e processo.</span><span class="sxs-lookup"><span data-stu-id="e84ed-141">This tutorial requires you use PowerShell toocreate hello job account database and job account.</span></span> <span data-ttu-id="e84ed-142">Come MSDB e SQL Agent, Usa i processi elastico SQL Azure database definizioni processi toostore, lo stato del processo e la cronologia.</span><span class="sxs-lookup"><span data-stu-id="e84ed-142">Like MSDB and SQL Agent, Elastic Jobs uses an Azure SQL database toostore job definitions, job status, and history.</span></span> <span data-ttu-id="e84ed-143">Una volta creato l'account di processo hello, è possibile creare e monitorare i processi immediatamente.</span><span class="sxs-lookup"><span data-stu-id="e84ed-143">Once hello job account is created, you can create and monitor jobs immediately.</span></span>

1. <span data-ttu-id="e84ed-144">Apri... \\Moduli learning\\la gestione dello Schema\\*Demo SchemaManagement.ps1* in hello **PowerShell ISE**.</span><span class="sxs-lookup"><span data-stu-id="e84ed-144">Open …\\Learning Modules\\Schema Management\\*Demo-SchemaManagement.ps1* in hello **PowerShell ISE**.</span></span>
1. <span data-ttu-id="e84ed-145">Premere **F5** script hello toorun.</span><span class="sxs-lookup"><span data-stu-id="e84ed-145">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="e84ed-146">Hello *Demo SchemaManagement.ps1* script chiamate hello *Distribuisci SchemaManagement.ps1* script toocreate un *S2* database denominato **jobaccount** sul server di catalogo hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-146">hello *Demo-SchemaManagement.ps1* script calls hello *Deploy-SchemaManagement.ps1* script toocreate an *S2* database named **jobaccount** on hello catalog server.</span></span> <span data-ttu-id="e84ed-147">Crea quindi un account di processo hello, passando database jobaccount hello come una chiamata di creazione account di parametro toohello del processo.</span><span class="sxs-lookup"><span data-stu-id="e84ed-147">It then creates hello job account, passing hello jobaccount database as a parameter toohello job account creation call.</span></span>

## <a name="create-a-job-toodeploy-new-reference-data-tooall-tenants"></a><span data-ttu-id="e84ed-148">Creare un processo toodeploy nuovi riferimenti dati tooall tenant</span><span class="sxs-lookup"><span data-stu-id="e84ed-148">Create a job toodeploy new reference data tooall tenants</span></span>

<span data-ttu-id="e84ed-149">Ogni database tenant include un set di tipi di evento che definiscono il tipo di hello di eventi vengono ospitati in un luogo.</span><span class="sxs-lookup"><span data-stu-id="e84ed-149">Each tenant database includes a set of venue types that define hello kind of events that are hosted at a venue.</span></span> <span data-ttu-id="e84ed-150">In questo esercizio, si distribuisce un tipi di eventi aggiuntivi di aggiornamento tooall hello tenant database tooadd due: *moto NASCAR* e *dei Club*.</span><span class="sxs-lookup"><span data-stu-id="e84ed-150">In this exercise, you deploy an update tooall hello tenant databases tooadd two additional venue types: *Motorcycle Racing* and *Swimming Club*.</span></span> <span data-ttu-id="e84ed-151">Questi tipi di eventi corrispondono toohello immagine di sfondo che viene visualizzato nell'app di eventi di hello tenant.</span><span class="sxs-lookup"><span data-stu-id="e84ed-151">These venue types correspond toohello background image you see in hello tenant events app.</span></span>

<span data-ttu-id="e84ed-152">Fare clic su hello luogo tipo menu a discesa e convalidare che sono disponibili le opzioni di tipo solo 10 luogo e in particolare che 'Moto NASCAR' e 'Dei Club' non sono inclusi nell'elenco di hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-152">Click hello Venue Type drop down menu and validate that only 10 venue type options are available, and specifically that ‘Motorcycle Racing’ and ‘Swimming Club’ are not included in hello list.</span></span>

<span data-ttu-id="e84ed-153">Ora è possibile crearne un hello tooupdate processo *VenueTypes* tabella in tutti i database tenant hello e aggiungere nuovi tipi di evento hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-153">Now let’s create a job tooupdate hello *VenueTypes* table in all hello tenant databases and add hello new venue types.</span></span>

<span data-ttu-id="e84ed-154">toocreate un nuovo processo, viene usato un set di processi di stored procedure create nel database di jobaccount hello quando è stato creato l'account di processo hello di sistema.</span><span class="sxs-lookup"><span data-stu-id="e84ed-154">toocreate a new job, we use a set of jobs system stored procedures created in hello jobaccount database when hello job account was created.</span></span>

1. <span data-ttu-id="e84ed-155">Aprire SQL Server Management Studio e connettersi a server di catalogo toohello: catalogo -\<utente\>. database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="e84ed-155">Open SSMS and connect toohello catalog server: catalog-\<user\>.database.windows.net server</span></span>
1. <span data-ttu-id="e84ed-156">Anche la connessione server tenant toohello: tenants1 -\<utente\>. database.windows.net</span><span class="sxs-lookup"><span data-stu-id="e84ed-156">Also connect toohello tenant server: tenants1-\<user\>.database.windows.net</span></span>
1. <span data-ttu-id="e84ed-157">Sfoglia toohello *contosoconcerthall* database hello *tenants1* hello server e query *VenueTypes* tabella tooconfirm che *NASCAR moto*  e *dei Club* **non** nell'elenco risultati hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-157">Browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are not** in hello results list.</span></span>
1. <span data-ttu-id="e84ed-158">File aperti hello... \\Moduli di formazione\\la gestione dello Schema\\DeployReferenceData.sql</span><span class="sxs-lookup"><span data-stu-id="e84ed-158">Open hello file …\\Learning Modules\\Schema Management\\DeployReferenceData.sql</span></span>
1. <span data-ttu-id="e84ed-159">Modifica istruzione hello: impostare @wtpUser = &lt;utente&gt; e sostituire il valore di utente hello utilizzato quando si distribuiscono app Wingtip hello</span><span class="sxs-lookup"><span data-stu-id="e84ed-159">Modify hello statement: SET @wtpUser = &lt;user&gt; and substitute hello User value used when you deployed hello Wingtip app</span></span>
1. <span data-ttu-id="e84ed-160">Verificare di essere connessi toohello jobaccount database e premere **F5** per eseguire script hello</span><span class="sxs-lookup"><span data-stu-id="e84ed-160">Ensure you are connected toohello jobaccount database and press **F5** to run hello script</span></span>

* <span data-ttu-id="e84ed-161">**SP\_aggiungere\_destinazione\_gruppo** crea nome gruppo di destinazione hello DemoServerGroup, ora è necessario tooadd membri di destinazione.</span><span class="sxs-lookup"><span data-stu-id="e84ed-161">**sp\_add\_target\_group** creates hello target group name DemoServerGroup, now we need tooadd target members.</span></span>
* <span data-ttu-id="e84ed-162">**SP\_aggiungere\_destinazione\_gruppo\_membro** aggiunge un *server* tipo di membro, che considera tutti i database in tale server (nota hello tenants1-didestinazione&lt; Utente&gt; server che contiene i database tenant hello) fase del processo di esecuzione deve essere inclusi nel processo di hello, hello secondo consiste nell'aggiunta di un *database* il tipo di membro di destinazione, in particolare hello (il database 'finale' basetenantdb) che si trova nel catalogo -&lt;utente&gt; server e infine un'altra *database* gruppo membro tipo tooinclude hello adhocanalytics database di destinazione che viene utilizzato in un'esercitazione successiva.</span><span class="sxs-lookup"><span data-stu-id="e84ed-162">**sp\_add\_target\_group\_member** adds a *server* target member type, which deems all databases within that server (note this is hello tenants1-&lt;User&gt; server containing hello tenant databases) at time of job execution should be included in hello job, hello second is adding a *database* target member type, specifically hello ‘golden’ database (basetenantdb) that resides on catalog-&lt;User&gt; server, and lastly another *database* target group member type tooinclude hello adhocanalytics database that is used in a later tutorial.</span></span>
* <span data-ttu-id="e84ed-163">**sp\_add\_job** crea un processo denominato "Reference Data Deployment" (Distribuzione dati di riferimento)</span><span class="sxs-lookup"><span data-stu-id="e84ed-163">**sp\_add\_job** creates a job called “Reference Data Deployment”</span></span>
* <span data-ttu-id="e84ed-164">**SP\_aggiungere\_jobstep** crea il passaggio di processo hello contenente T-SQL comando testo tooupdate hello tabella di riferimento, VenueTypes</span><span class="sxs-lookup"><span data-stu-id="e84ed-164">**sp\_add\_jobstep** creates hello job step containing T-SQL command text tooupdate hello reference table, VenueTypes</span></span>
* <span data-ttu-id="e84ed-165">Hello rimanenti nello script hello visualizzazioni esistenza hello di oggetti hello e l'esecuzione del processo di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="e84ed-165">hello remaining views in hello script display hello existence of hello objects and monitor job execution.</span></span> <span data-ttu-id="e84ed-166">Utilizzare queste valore di stato query tooreview hello in hello **ciclo di vita** toodetermine colonna quando il processo di hello è stata completata in tutti i database tenant e altri database hello due contenente la tabella di riferimento hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-166">Use these queries tooreview hello status value in hello **lifecycle** column toodetermine when hello job has successfully finished on all tenant databases and hello two additional databases containing hello reference table.</span></span>

1. <span data-ttu-id="e84ed-167">In SQL Server Management Studio, passare toohello *contosoconcerthall* database hello *tenants1* hello server e query *VenueTypes* tabella tooconfirm che *moto NASCAR* e *dei Club* **sono** ora nell'elenco dei risultati di hello.</span><span class="sxs-lookup"><span data-stu-id="e84ed-167">In SSMS, browse toohello *contosoconcerthall* database on hello *tenants1* server and query hello *VenueTypes* table tooconfirm that *Motorcycle Racing* and *Swimming Club* **are** now in hello results list.</span></span>


## <a name="create-a-job-toomanage-hello-reference-table-index"></a><span data-ttu-id="e84ed-168">Creare un indice nella tabella di riferimento di processo toomanage hello</span><span class="sxs-lookup"><span data-stu-id="e84ed-168">Create a job toomanage hello reference table index</span></span>

<span data-ttu-id="e84ed-169">Esercizio precedente simile toohello questo esercizio crea un indice di hello toorebuild processo sulla chiave primaria nella tabella di riferimento hello, potrebbe eseguire un'operazione di gestione di database tipico un amministratore dopo un carico di dati di grandi dimensioni in una tabella.</span><span class="sxs-lookup"><span data-stu-id="e84ed-169">Similar toohello previous exercise, this exercise creates a job toorebuild hello index on hello reference table primary key, a typical database management operation an administrator might perform after a large data load into a table.</span></span>

<span data-ttu-id="e84ed-170">Crea un processo utilizzando hello stesso processi 'per il sistema' stored procedure.</span><span class="sxs-lookup"><span data-stu-id="e84ed-170">Create a job using hello same jobs 'system' stored procedures.</span></span>

1. <span data-ttu-id="e84ed-171">Aprire SQL Server Management Studio e connettersi toohello catalogo -&lt;utente&gt;. database.windows.net server</span><span class="sxs-lookup"><span data-stu-id="e84ed-171">Open SSMS and connect toohello catalog-&lt;User&gt;.database.windows.net server</span></span>
1. <span data-ttu-id="e84ed-172">File aperti hello... \\Moduli di formazione\\la gestione dello Schema\\OnlineReindex.sql</span><span class="sxs-lookup"><span data-stu-id="e84ed-172">Open hello file …\\Learning Modules\\Schema Management\\OnlineReindex.sql</span></span>
1. <span data-ttu-id="e84ed-173">Fare clic destro, selezionare una connessione e connettersi toohello catalogo -&lt;utente&gt;. database.windows.net server, se non è già connesso.</span><span class="sxs-lookup"><span data-stu-id="e84ed-173">Right click, select Connection, and connect toohello catalog-&lt;User&gt;.database.windows.net server, if not already connected</span></span>
1. <span data-ttu-id="e84ed-174">Verificare che si sono connessi toohello jobaccount database e si preme script hello toorun di F5</span><span class="sxs-lookup"><span data-stu-id="e84ed-174">Ensure you are connected toohello jobaccount database and press F5 toorun hello script</span></span>

* <span data-ttu-id="e84ed-175">sp\_add\_job crea un nuovo processo denominato "Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885"</span><span class="sxs-lookup"><span data-stu-id="e84ed-175">sp\_add\_job creates a new job called “Online Reindex PK\_\_VenueTyp\_\_265E44FD7FD4C885”</span></span>
* <span data-ttu-id="e84ed-176">SP\_aggiungere\_jobstep crea il passaggio di processo hello contenente l'indice di hello tooupdate testo comando T-SQL</span><span class="sxs-lookup"><span data-stu-id="e84ed-176">sp\_add\_jobstep creates hello job step containing T-SQL command text tooupdate hello index</span></span>




## <a name="next-steps"></a><span data-ttu-id="e84ed-177">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="e84ed-177">Next steps</span></span>

<span data-ttu-id="e84ed-178">In questa esercitazione si è appreso come:</span><span class="sxs-lookup"><span data-stu-id="e84ed-178">In this tutorial you learned how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="e84ed-179">Creare un tooquery di account di processo in più tenant</span><span class="sxs-lookup"><span data-stu-id="e84ed-179">Create a job account tooquery across multiple tenants</span></span>
> * <span data-ttu-id="e84ed-180">Aggiornare i dati in tutti i database tenant</span><span class="sxs-lookup"><span data-stu-id="e84ed-180">Update data in all tenant databases</span></span>
> * <span data-ttu-id="e84ed-181">Creare un indice su una tabella in tutti i database tenant</span><span class="sxs-lookup"><span data-stu-id="e84ed-181">Create an index on a table in all tenant databases</span></span>

[<span data-ttu-id="e84ed-182">Esercitazione sull'analisi ad hoc</span><span class="sxs-lookup"><span data-stu-id="e84ed-182">Ad-hoc analytics tutorial</span></span>](sql-database-saas-tutorial-adhoc-analytics.md)


## <a name="additional-resources"></a><span data-ttu-id="e84ed-183">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="e84ed-183">Additional resources</span></span>

* [<span data-ttu-id="e84ed-184">Altre esercitazioni che si basano su una distribuzione di applicazioni SaaS Wingtip hello</span><span class="sxs-lookup"><span data-stu-id="e84ed-184">Additional tutorials that build upon hello Wingtip SaaS application deployment</span></span>](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)
* [<span data-ttu-id="e84ed-185">Gestione dei database cloud con scalabilità orizzontale</span><span class="sxs-lookup"><span data-stu-id="e84ed-185">Managing scaled-out cloud databases</span></span>](sql-database-elastic-jobs-overview.md)
* [<span data-ttu-id="e84ed-186">Creare e gestire database SQL di Azure con scalabilità orizzontale</span><span class="sxs-lookup"><span data-stu-id="e84ed-186">Create and manage scaled-out cloud databases</span></span>](sql-database-elastic-jobs-create-and-manage.md)
