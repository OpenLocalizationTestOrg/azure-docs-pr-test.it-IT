---
ms.assetid: 
title: Eliminazione temporanea di Azure Key Vault | Microsoft Docs
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: c873b153ef9c7d5f55672a5918c9dc4fb7256701
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a><span data-ttu-id="e4093-102">Panoramica di eliminazione temporanea di Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="e4093-102">Azure Key Vault soft-delete overview</span></span>

<span data-ttu-id="e4093-103">La funzionalità di eliminazione temporanea di Key Vault consente il ripristino degli insiemi di credenziali e degli oggetti dell'insieme di credenziali eliminati. Questa funzionalità prende il nome di "eliminazione temporanea".</span><span class="sxs-lookup"><span data-stu-id="e4093-103">Key Vault's soft delete feature allows recovery of the deleted vaults and vault objects, known as soft-delete.</span></span> <span data-ttu-id="e4093-104">In particolare, vengono affrontati gli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="e4093-104">Specifically, we address the following scenarios:</span></span>

- <span data-ttu-id="e4093-105">Supporto per l'eliminazione reversibile di un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="e4093-105">Support for recoverable deletion of a key vault</span></span>
- <span data-ttu-id="e4093-106">Supporto per l'eliminazione reversibile di oggetti di insiemi di credenziali delle chiavi (ad esempio,</span><span class="sxs-lookup"><span data-stu-id="e4093-106">Support for recoverable deletion of key vault objects (ex.</span></span> <span data-ttu-id="e4093-107">chiavi, segreti e certificati)</span><span class="sxs-lookup"><span data-stu-id="e4093-107">keys, secrets, certificates)</span></span>

## <a name="supporting-interfaces"></a><span data-ttu-id="e4093-108">Supporto di interfacce</span><span class="sxs-lookup"><span data-stu-id="e4093-108">Supporting interfaces</span></span>

<span data-ttu-id="e4093-109">La funzionalità di eliminazione temporanea è inizialmente disponibile attraverso le interfacce REST, .NET/C# e PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e4093-109">The soft-delete feature is initially available through the REST, .NET/C# and PowerShell interfaces.</span></span> <span data-ttu-id="e4093-110">Per informazioni dettagliate, vedere [Documentazione sull'insieme di credenziali delle chiavi](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="e4093-110">Refer to the references for these for more details, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="e4093-111">Scenari</span><span class="sxs-lookup"><span data-stu-id="e4093-111">Scenarios</span></span>

<span data-ttu-id="e4093-112">Gli insiemi di credenziali delle chiavi di Azure sono risorse tracciate, gestite da Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="e4093-112">Azure Key Vaults are tracked resources, managed by Azure Resource Manager.</span></span> <span data-ttu-id="e4093-113">Azure Resource Manager specifica anche un comportamento ben definito per l'eliminazione, in base al quale al termine dell'operazione di eliminazione la risorsa non deve essere più accessibile.</span><span class="sxs-lookup"><span data-stu-id="e4093-113">Azure Resource Manager also specifies a well-defined behavior for deletion, which requires that a successful DELETE operation must result in that resource not being accessible anymore.</span></span> <span data-ttu-id="e4093-114">Con la funzionalità di eliminazione temporanea viene consentito invece il ripristino dell'oggetto eliminato, indipendentemente dal fatto che l'eliminazione sia stata intenzionale o accidentale.</span><span class="sxs-lookup"><span data-stu-id="e4093-114">The soft-delete feature addresses the recovery of the deleted object, whether the deletion was accidental or intentional.</span></span>

1. <span data-ttu-id="e4093-115">In uno scenario tipico, un utente può aver accidentalmente eliminato un insieme di credenziali delle chiavi o un oggetto di un insieme di credenziali delle chiavi. Se l'insieme di credenziali delle chiavi o l'oggetto dell'insieme è stato impostato in modo da essere recuperabile entro un periodo predeterminato, l'utente può annullare l'eliminazione e ripristinare i dati.</span><span class="sxs-lookup"><span data-stu-id="e4093-115">In the typical scenario, a user may have inadvertently deleted a key vault or a key vault object; if that key vault or key vault object were to be recoverable for a predetermined period, the user may undo the deletion and recover their data.</span></span>

2. <span data-ttu-id="e4093-116">In uno scenario diverso, un utente non autorizzato può tentare di eliminare un insieme di credenziali delle chiavi o un oggetto di un insieme di credenziali delle chiavi, ad esempio una chiave in un insieme di credenziali, per provocare un'interruzione delle attività.</span><span class="sxs-lookup"><span data-stu-id="e4093-116">In a different scenario, a rogue user may attempt to delete a key vault or a key vault object, such as a key inside a vault, to cause a business disruption.</span></span> <span data-ttu-id="e4093-117">In questo caso, separare l'eliminazione dell'insieme di credenziali delle chiavi o dell'oggetto dell'insieme di credenziali delle chiavi dall'eliminazione effettiva dei dati sottostanti può rappresentare una misura di sicurezza, poiché consente, ad esempio, di limitare le autorizzazioni di eliminazione dei dati solo a un ruolo attendibile.</span><span class="sxs-lookup"><span data-stu-id="e4093-117">Separating the deletion of the key vault or key vault object from the actual deletion of the underlying data can be used as a safety measure by, for instance, restricting permissions on data deletion to a different, trusted role.</span></span> <span data-ttu-id="e4093-118">Con questo approccio, infatti, è necessario un quorum per un'operazione che, altrimenti, determinerebbe una perdita immediata di dati.</span><span class="sxs-lookup"><span data-stu-id="e4093-118">This approach effectively requires quorum for an operation which might otherwise result in an immediate data loss.</span></span>

### <a name="soft-delete-behavior"></a><span data-ttu-id="e4093-119">Comportamento della funzione di eliminazione temporanea</span><span class="sxs-lookup"><span data-stu-id="e4093-119">Soft-delete behavior</span></span>

<span data-ttu-id="e4093-120">Con questa funzionalità, l'operazione di eliminazione eseguita su un insieme di credenziali delle chiavi o su un oggetto di un insieme di credenziali delle chiavi è di fatto un'operazione di eliminazione temporanea, poiché in realtà le risorse vengono mantenute per un periodo di memorizzazione specifico, seppur risultino apparentemente eliminate.</span><span class="sxs-lookup"><span data-stu-id="e4093-120">With this feature, the DELETE operation on a key vault or key vault object is a soft-delete, effectively holding the resources for a given retention period, while giving the appearance that the object is deleted.</span></span> <span data-ttu-id="e4093-121">Il servizio offre anche un meccanismo per il ripristino dell'oggetto eliminato, essenzialmente annullando l'operazione di eliminazione.</span><span class="sxs-lookup"><span data-stu-id="e4093-121">The service further provides a mechanism for recovering the deleted object, essentially undoing the deletion.</span></span> 

<span data-ttu-id="e4093-122">L'eliminazione temporanea è un comportamento facoltativo di Key Vault e in questa versione **non è abilitato per impostazione predefinita**.</span><span class="sxs-lookup"><span data-stu-id="e4093-122">Soft-delete is an optional Key Vault behavior and is **not enabled by default** in this release.</span></span> <span data-ttu-id="e4093-123">Per informazioni dettagliate sull'abilitazione dell'eliminazione temporanea per un insieme di credenziali delle chiavi, vedere le istruzioni corrispondenti negli argomenti di riferimento per l'interfaccia in uso in [Documentazione sull'insieme di credenziali delle chiavi](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="e4093-123">For details on enabling soft-delete for your key vault, see the specific guidance in the reference for the interface of your choice, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

### <a name="key-vault-recovery"></a><span data-ttu-id="e4093-124">Recupero di un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="e4093-124">Key vault recovery</span></span>

<span data-ttu-id="e4093-125">In seguito all'eliminazione di un insieme di credenziali delle chiavi, il servizio crea una risorsa proxy nella sottoscrizione, a cui aggiungerà metadati sufficienti per il ripristino.</span><span class="sxs-lookup"><span data-stu-id="e4093-125">Upon deleting a key vault, the service creates a proxy resource under the subscription, adding sufficient metadata for recovery.</span></span> <span data-ttu-id="e4093-126">La risorsa proxy è un oggetto archiviato disponibile nello stesso percorso dell'insieme di credenziali delle chiavi eliminato.</span><span class="sxs-lookup"><span data-stu-id="e4093-126">The proxy resource is a stored object, available in the same location as the deleted key vault.</span></span> 

### <a name="key-vault-object-recovery"></a><span data-ttu-id="e4093-127">Recupero di un oggetto di un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="e4093-127">Key vault object recovery</span></span>

<span data-ttu-id="e4093-128">In seguito all'eliminazione di un oggetto di un insieme di credenziali delle chiavi, ad esempio una chiave, il servizio imposterà l'oggetto su uno stato eliminato, rendendolo inaccessibile per qualsiasi operazione di recupero.</span><span class="sxs-lookup"><span data-stu-id="e4093-128">Upon deleting a key vault object, such as a key, the service will place the object in a deleted state, thus making it inaccessible to any retrieval operations.</span></span> <span data-ttu-id="e4093-129">In questo stato l'oggetto dell'insieme di credenziali delle chiavi può essere solo elencato, recuperato o eliminato in modo forzato o permanente.</span><span class="sxs-lookup"><span data-stu-id="e4093-129">While in this state, the key vault object can only be listed, recovered, or forcefully/permanently deleted.</span></span> 

<span data-ttu-id="e4093-130">Al tempo stesso, Key Vault pianificherà l'esecuzione dell'eliminazione dei dati sottostanti, corrispondenti all'insieme di credenziali delle chiavi o all'oggetto dell'insieme di credenziali delle chiavi eliminato, dopo un intervallo di memorizzazione predeterminato.</span><span class="sxs-lookup"><span data-stu-id="e4093-130">At the same time, Key Vault will schedule the deletion of the underlying data corresponding to the deleted key vault or key vault object for execution after a predetermined retention interval.</span></span> <span data-ttu-id="e4093-131">Per la durata dell'intervallo di memorizzazione viene conservato anche il record DNS corrispondente all'insieme di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="e4093-131">The DNS record corresponding to the vault is also retained for the duration of the retention interval.</span></span>

### <a name="soft-delete-retention-period"></a><span data-ttu-id="e4093-132">Periodo di memorizzazione dell'eliminazione temporanea</span><span class="sxs-lookup"><span data-stu-id="e4093-132">Soft-delete retention period</span></span>

<span data-ttu-id="e4093-133">Le risorse eliminate in modo temporaneo vengono conservate per un periodo di tempo prestabilito di 90 giorni.</span><span class="sxs-lookup"><span data-stu-id="e4093-133">Soft deleted resources are retained for a set period of time, 90 days.</span></span> <span data-ttu-id="e4093-134">Durante il periodo di memorizzazione dell'eliminazione temporanea tenere presente quanto segue:</span><span class="sxs-lookup"><span data-stu-id="e4093-134">During the soft-delete retention interval, the following apply:</span></span>

- <span data-ttu-id="e4093-135">È possibile elencare tutti gli insiemi di credenziali delle chiavi e gli oggetti di insiemi di credenziali delle chiavi in stato di eliminazione temporanea nella sottoscrizione, nonché accedere alle informazioni di eliminazione e recupero disponibili su di essi.</span><span class="sxs-lookup"><span data-stu-id="e4093-135">You may list all of the key vaults and key vault objects in the soft-delete state for your subscription as well as access deletion and recovery information about them.</span></span>
    - <span data-ttu-id="e4093-136">Gli insiemi di credenziali delle chiavi eliminati possono essere elencati solo da utenti con autorizzazioni speciali.</span><span class="sxs-lookup"><span data-stu-id="e4093-136">Only users with special permissions can list deleted vaults.</span></span> <span data-ttu-id="e4093-137">Per la gestione degli insiemi di credenziali delle chiavi eliminati è consigliabile creare un ruolo personalizzato a cui assegnare queste autorizzazioni speciali.</span><span class="sxs-lookup"><span data-stu-id="e4093-137">We recommend that our users create a custom role with these special permissions for handling deleted vaults.</span></span>
- <span data-ttu-id="e4093-138">Non è possibile creare nello stesso percorso due insiemi di credenziali delle chiavi con lo stesso nome. Analogamente, non è possibile creare un insieme di credenziali delle chiavi in un determinato insieme di credenziali se l'insieme di credenziali delle chiavi contiene un oggetto con lo stesso nome impostato in uno stato eliminato.</span><span class="sxs-lookup"><span data-stu-id="e4093-138">A key vault with the same name cannot be created in the same location; correspondingly, a key vault object cannot be created in a given vault if that key vault contains an object with the same name and which is in a deleted state</span></span> 
- <span data-ttu-id="e4093-139">Solo un utente con privilegi specifici può recuperare un insieme di credenziali delle chiavi o un oggetto di un insieme di credenziali delle chiavi eseguendo un comando di ripristino sulla risorsa proxy corrispondente.</span><span class="sxs-lookup"><span data-stu-id="e4093-139">Only a specifically privileged user may restore a key vault or key vault object by issuing a recover command on the corresponding proxy resource.</span></span>
    - <span data-ttu-id="e4093-140">Può recuperare l'insieme di credenziali delle chiavi l'utente che, membro del ruolo personalizzato, dispone dei privilegi necessari per creare un insieme di credenziali delle chiavi nel gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="e4093-140">The user, member of the custom role, who has the privilege to create a key vault under the resource group can restore the vault.</span></span>
- <span data-ttu-id="e4093-141">Solo un utente con privilegi specifici può eliminare in modo forzato un insieme di credenziali delle chiavi o un oggetto di un insieme di credenziali delle chiavi eseguendo un comando di eliminazione sulla risorsa proxy corrispondente.</span><span class="sxs-lookup"><span data-stu-id="e4093-141">Only a specifically privileged user may forcibly delete a key vault or key vault object by issuing a delete command on the corresponding proxy resource.</span></span>

<span data-ttu-id="e4093-142">Se l'insieme di credenziali delle chiavi o l'oggetto dell'insieme di credenziali delle chiavi non viene recuperato, alla fine dell'intervallo di memorizzazione il servizio esegue un'operazione di ripulitura sull'insieme di credenziali delle chiavi o sull'oggetto dell'insieme eliminato in modo temporaneo, nonché sui relativi contenuti.</span><span class="sxs-lookup"><span data-stu-id="e4093-142">Unless a key vault or key vault object is recovered, at the end of the retention interval the service performs a purge of the soft-deleted key vault or key vault object and its content.</span></span> <span data-ttu-id="e4093-143">È possibile che l'eliminazione della risorsa non venga ripianificata.</span><span class="sxs-lookup"><span data-stu-id="e4093-143">Resource deletion may not be rescheduled.</span></span>

### <a name="permitted-purge"></a><span data-ttu-id="e4093-144">Ripulitura consentita</span><span class="sxs-lookup"><span data-stu-id="e4093-144">Permitted purge</span></span>

<span data-ttu-id="e4093-145">L'eliminazione permanente di un insieme di credenziali delle chiavi non è possibile tramite un'operazione POST sulla risorsa proxy e richiede privilegi speciali.</span><span class="sxs-lookup"><span data-stu-id="e4093-145">Permanently deleting, purging, a key vault is possible via a POST operation on the proxy resource and requires special privileges.</span></span> <span data-ttu-id="e4093-146">In genere, solo il proprietario della sottoscrizione può eliminare in modo permanente un insieme di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="e4093-146">Generally, only the subscription owner will be able to purge a key vault.</span></span> <span data-ttu-id="e4093-147">L'operazione POST attiva l'eliminazione immediata e irreversibile dell'insieme di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="e4093-147">The POST operation triggers the immediate and irrecoverable deletion of that vault.</span></span> 

<span data-ttu-id="e4093-148">Unica eccezione a questa conseguenza è che la sottoscrizione di Azure sia stata contrassegnata come *non cancellabile*.</span><span class="sxs-lookup"><span data-stu-id="e4093-148">An exception to this is the case when the Azure subscription has been marked as *undeletable*.</span></span> <span data-ttu-id="e4093-149">In questo caso solo il servizio può eseguire l'eliminazione effettiva, sotto forma di processo pianificato.</span><span class="sxs-lookup"><span data-stu-id="e4093-149">In this case, only the service may then perform the actual deletion, and does so as a scheduled process.</span></span> 



