---
title: "Pianificazione della capacità del cluster di Service Fabric | Documentazione Microsoft"
description: "Considerazioni sulla pianificazione della capacità del cluster Service Fabric. Nodetypes, livelli di affidabilità e durata"
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: 
ms.assetid: 4c584f4a-cb1f-400c-b61f-1f797f11c982
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 07/24/2017
ms.author: chackdan
ms.openlocfilehash: 36b96360fabdcc64ffd2356540c580594637d48e
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="service-fabric-cluster-capacity-planning-considerations"></a><span data-ttu-id="9b9c3-104">Considerazioni sulla pianificazione della capacità del cluster Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9b9c3-104">Service Fabric cluster capacity planning considerations</span></span>
<span data-ttu-id="9b9c3-105">La pianificazione della capacità è un passaggio importante per qualsiasi distribuzione di produzione.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-105">For any production deployment, capacity planning is an important step.</span></span> <span data-ttu-id="9b9c3-106">Ecco alcuni aspetti da considerare nell'ambito di tale processo.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-106">Here are some of the items that you have to consider as a part of that process.</span></span>

* <span data-ttu-id="9b9c3-107">Numero di tipi di nodo con cui il cluster deve iniziare</span><span class="sxs-lookup"><span data-stu-id="9b9c3-107">The number of node types your cluster needs to start out with</span></span>
* <span data-ttu-id="9b9c3-108">Proprietà di ciascun tipo di nodo (dimensione, primario, per Internet, numero di VM e così via)</span><span class="sxs-lookup"><span data-stu-id="9b9c3-108">The properties of each of node type (size, primary, internet facing, number of VMs, etc.)</span></span>
* <span data-ttu-id="9b9c3-109">Caratteristiche di affidabilità e durabilità del cluster</span><span class="sxs-lookup"><span data-stu-id="9b9c3-109">The reliability and durability characteristics of the cluster</span></span>

<span data-ttu-id="9b9c3-110">Ogni aspetto verrà ora esaminato brevemente.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-110">Let us briefly review each of these items.</span></span>

## <a name="the-number-of-node-types-your-cluster-needs-to-start-out-with"></a><span data-ttu-id="9b9c3-111">Numero di tipi di nodo con cui il cluster deve iniziare</span><span class="sxs-lookup"><span data-stu-id="9b9c3-111">The number of node types your cluster needs to start out with</span></span>
<span data-ttu-id="9b9c3-112">Prima di tutto è necessario stabilire per che cosa verrà usato il cluster che si sta creando e quali tipologie di applicazioni si intende distribuire nel cluster.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-112">First, you need to figure out what the cluster you are creating is going to be used for and what kinds of applications you are planning to deploy into this cluster.</span></span> <span data-ttu-id="9b9c3-113">Se lo scopo del cluster non è chiaro, è molto probabile che non si sia ancora pronti per iniziare il processo di pianificazione della capacità.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-113">If you are not clear on the purpose of the cluster, you are most likely not yet ready to enter the capacity planning process.</span></span>

<span data-ttu-id="9b9c3-114">Stabilire il numero di tipi di nodo con cui il cluster deve iniziare.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-114">Establish the number of node types your cluster needs to start out with.</span></span>  <span data-ttu-id="9b9c3-115">Di ogni tipo di nodo viene eseguito il mapping a un set di scalabilità di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-115">Each node type is mapped to a Virtual Machine Scale Set.</span></span> <span data-ttu-id="9b9c3-116">Ogni tipo di nodo può quindi essere aumentato o ridotto in modo indipendente, avere diversi set di porte aperte e avere metriche per la capacità diverse.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-116">Each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span></span> <span data-ttu-id="9b9c3-117">Quindi la decisione relativa al numero di tipi di nodo si basa essenzialmente sulle considerazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9b9c3-117">So the decision of the number of node types essentially comes down to the following considerations:</span></span>

* <span data-ttu-id="9b9c3-118">L'applicazione ha più servizi, alcuni dei quali devono essere pubblici o per Internet?</span><span class="sxs-lookup"><span data-stu-id="9b9c3-118">Does your application have multiple services, and do any of them need to be public or internet facing?</span></span> <span data-ttu-id="9b9c3-119">Le applicazioni tipiche contengono un servizio gateway front-end che riceve l'input da un client e uno o più servizi back-end che comunicano con i servizi front-end.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-119">Typical applications contain a front-end gateway service that receives input from a client, and one or more back-end services that communicate with the front-end services.</span></span> <span data-ttu-id="9b9c3-120">In questo caso quindi si finirà per avere almeno due tipi di nodi.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-120">So in this case, you end up having at least two node types.</span></span>
* <span data-ttu-id="9b9c3-121">I servizi (che costituiscono l'applicazione) hanno esigenze diverse per l'infrastruttura, ad esempio cicli di CPU più elevati o una quantità maggiore di RAM?</span><span class="sxs-lookup"><span data-stu-id="9b9c3-121">Do your services (that make up your application) have different infrastructure needs such as greater RAM or higher CPU cycles?</span></span> <span data-ttu-id="9b9c3-122">Ad esempio, si supponga che l'applicazione che si vuole distribuire contenga un servizio front-end e un servizio back-end.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-122">For example, let us assume that the application that you want to deploy contains a front-end service and a back-end service.</span></span> <span data-ttu-id="9b9c3-123">Il servizio front-end può essere eseguito in VM più piccole (ad esempio, di dimensioni D2), con porte aperte a Internet,</span><span class="sxs-lookup"><span data-stu-id="9b9c3-123">The front-end service can run on smaller VMs (VM sizes like D2) that have ports open to the internet.</span></span>  <span data-ttu-id="9b9c3-124">Il servizio back-end è invece a elevato utilizzo di calcolo e deve essere eseguito in VM più grandi (ad esempio di dimensione D4, D6, D15) senza connessione a Internet.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-124">The back-end service, however, is computation intensive and needs to run on larger VMs (with VM sizes like D4, D6, D15) that are not internet facing.</span></span>
  
  <span data-ttu-id="9b9c3-125">In questo esempio, anche se è possibile decidere di inserire tutti i servizi in un unico tipo di nodo, è consigliabile inserirli in un cluster con due tipi di nodo,</span><span class="sxs-lookup"><span data-stu-id="9b9c3-125">In this example, although you can decide to put all the services on one node type, we recommended that you place them in a cluster with two node types.</span></span>  <span data-ttu-id="9b9c3-126">perché in questo modo ogni tipo di nodo può avere proprietà distinte, ad esempio la connettività Internet o le dimensioni delle VM.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-126">This allows for each node type to have distinct properties such as internet connectivity or VM size.</span></span> <span data-ttu-id="9b9c3-127">Il numero di VM può essere ridimensionato anche in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-127">The number of VMs can be scaled independently, as well.</span></span>  
* <span data-ttu-id="9b9c3-128">Poiché non è possibile prevedere cosa accadrà in futuro, è importante basarsi sulle condizioni attuali per decidere il numero di tipi di nodo necessari alle applicazioni per iniziare.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-128">Since you cannot predict the future, go with facts you know of and decide on the number of node types that your applications need to start with.</span></span> <span data-ttu-id="9b9c3-129">Sarà sempre possibile aggiungere o rimuovere i tipi di nodi in seguito.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-129">You can always add or remove node types later.</span></span> <span data-ttu-id="9b9c3-130">Un cluster di Service Fabric deve avere almeno un tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-130">A Service Fabric cluster must have at least one node type.</span></span>

## <a name="the-properties-of-each-node-type"></a><span data-ttu-id="9b9c3-131">Proprietà di ogni tipo di nodo</span><span class="sxs-lookup"><span data-stu-id="9b9c3-131">The properties of each node type</span></span>
<span data-ttu-id="9b9c3-132">I **tipi di nodo** possono essere paragonati ai ruoli in Servizi cloud,</span><span class="sxs-lookup"><span data-stu-id="9b9c3-132">The **node type** can be seen as equivalent to roles in Cloud Services.</span></span> <span data-ttu-id="9b9c3-133">poiché definiscono le dimensioni delle VM, il numero di VM e le relative proprietà.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-133">Node types define the VM sizes, the number of VMs, and their properties.</span></span> <span data-ttu-id="9b9c3-134">Ogni tipo di nodo definito in un cluster di Service Fabric viene configurato come set di scalabilità di macchine virtuali distinto.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-134">Every node type that is defined in a Service Fabric cluster is set up as a separate virtual machine scale set.</span></span> <span data-ttu-id="9b9c3-135">Un set di scalabilità di macchine virtuali è una risorsa di calcolo di Azure che è possibile usare per distribuire e gestire una raccolta di macchine virtuali come set.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-135">Virtual machine scale set is an Azure compute resource you can use to deploy and manage a collection of virtual machines as a set.</span></span> <span data-ttu-id="9b9c3-136">Essendo definito come set di scalabilità di macchine virtuali distinto, ogni tipo di nodo può essere aumentato o ridotto in modo indipendente, avere diversi set di porte aperte e avere metriche per la capacità diverse.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-136">Being defined as distinct virtual machine scale set, each node type can then be scaled up or down independently, have different sets of ports open, and can have different capacity metrics.</span></span>

<span data-ttu-id="9b9c3-137">Vedere [questo documento](service-fabric-cluster-nodetypes.md) per altri dettagli sulla relazione dei tipi di nodo con il set di scalabilità di macchine virtuali, su come connettersi a una delle istanze tramite RDP, aprire nuove porte e così via.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-137">Read [this document](service-fabric-cluster-nodetypes.md) for more details on the relationship of Nodetypes to virtual machine scale set, how to RDP into one of the instances, open new ports etc.</span></span>

<span data-ttu-id="9b9c3-138">Il cluster può avere più di un tipo di nodo, ma il tipo di nodo primario, ovvero il primo che si definisce nel portale, deve essere costituito da almeno cinque macchine virtuali per i cluster usati per i carichi di lavoro di produzione (o da almeno tre VM per i cluster di test).</span><span class="sxs-lookup"><span data-stu-id="9b9c3-138">Your cluster can have more than one node type, but the primary node type (the first one that you define on the portal) must have at least five VMs for clusters used for production workloads (or at least three VMs for test clusters).</span></span> <span data-ttu-id="9b9c3-139">Se si sta creando il cluster con un modello di Resource Manager, cercare l'attributo **Primario** nella definizione del tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-139">If you are creating the cluster using a Resource Manager template, then look for **is Primary** attribute under the node type definition.</span></span> <span data-ttu-id="9b9c3-140">Nel tipo di nodo primario vengono inseriti i servizi di sistema di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-140">The primary node type is the node type where Service Fabric system services are placed.</span></span>  

### <a name="primary-node-type"></a><span data-ttu-id="9b9c3-141">Tipo di nodo primario</span><span class="sxs-lookup"><span data-stu-id="9b9c3-141">Primary node type</span></span>
<span data-ttu-id="9b9c3-142">Nel caso di un cluster con più tipi di nodo, è necessario sceglierne uno come primario.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-142">For a cluster with multiple node types, you need to choose one of them to be primary.</span></span> <span data-ttu-id="9b9c3-143">Ecco le caratteristiche di un tipo di nodo primario:</span><span class="sxs-lookup"><span data-stu-id="9b9c3-143">Here are the characteristics of a primary node type:</span></span>

* <span data-ttu-id="9b9c3-144">Le **dimensioni minime delle macchine virtuali** per il tipo di nodo primario sono determinate dal **livello di durabilità** scelto.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-144">The **minimum size of VMs** for the primary node type is determined by the **durability tier** you choose.</span></span> <span data-ttu-id="9b9c3-145">Il valore predefinito per il livello di durabilità è Bronze.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-145">The default for the durability tier is Bronze.</span></span> <span data-ttu-id="9b9c3-146">Per sapere che cos'è il livello di durabilità e su quali valori può essere impostato, scorrere verso il basso.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-146">Scroll down for details on what the durability tier is and the values it can take.</span></span>  
* <span data-ttu-id="9b9c3-147">Il **numero minimo delle macchine virtuali** per il tipo di nodo primario è determinato dal **livello di affidabilità** scelto.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-147">The **minimum number of VMs** for the primary node type is determined by the **reliability tier** you choose.</span></span> <span data-ttu-id="9b9c3-148">Il valore predefinito per il livello di affidabilità è Silver.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-148">The default for the reliability tier is Silver.</span></span> <span data-ttu-id="9b9c3-149">Per sapere che cos'è il livello di affidabilità e su quali valori può essere impostato, scorrere verso il basso.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-149">Scroll down for details on what the reliability tier is and the values it can take.</span></span> 


* <span data-ttu-id="9b9c3-150">I servizi di sistema di Service Fabric (ad esempio, il servizio Cluster Manager o il servizio Image Store) vengono inseriti nel tipo di nodo primario e quindi l'affidabilità e la durabilità del cluster vengono determinate dal valore del livello di affidabilità e dal valore del livello di durabilità selezionato per il tipo di nodo primario.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-150">The Service Fabric system services (for example, the Cluster Manager service or Image Store service) are placed on the primary node type and so the reliability and durability of the cluster is determined by the reliability tier value and durability tier value you select for the primary node type.</span></span>

![<span data-ttu-id="9b9c3-151">Screenshot di un cluster con due tipi di nodo</span><span class="sxs-lookup"><span data-stu-id="9b9c3-151">Screen shot of a cluster that has two Node Types</span></span> ][SystemServices]

### <a name="non-primary-node-type"></a><span data-ttu-id="9b9c3-152">Tipo di nodo non primario</span><span class="sxs-lookup"><span data-stu-id="9b9c3-152">Non-primary node type</span></span>
<span data-ttu-id="9b9c3-153">Per un cluster con più tipi di nodo, è presente un tipo di nodo primario, mentre gli altri saranno non primari.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-153">For a cluster with multiple node types, there is one primary node type and the rest of them are non-primary.</span></span> <span data-ttu-id="9b9c3-154">Ecco le caratteristiche di un tipo di nodo non primario:</span><span class="sxs-lookup"><span data-stu-id="9b9c3-154">Here are the characteristics of a non-primary node type:</span></span>

* <span data-ttu-id="9b9c3-155">Le dimensioni minime delle macchine virtuali per questo tipo di nodo sono determinate dal livello di durabilità scelto.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-155">The minimum size of VMs for this node type is determined by the durability tier you choose.</span></span> <span data-ttu-id="9b9c3-156">Il valore predefinito per il livello di durabilità è Bronze.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-156">The default for the durability tier is Bronze.</span></span> <span data-ttu-id="9b9c3-157">Per sapere che cos'è il livello di durabilità e su quali valori può essere impostato, scorrere verso il basso.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-157">Scroll down for details on what the durability tier is and the values it can take.</span></span>  
* <span data-ttu-id="9b9c3-158">Il numero minimo di VM per questo tipo di nodo può essere uno.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-158">The minimum number of VMs for this node type can be one.</span></span> <span data-ttu-id="9b9c3-159">È tuttavia consigliabile scegliere questo numero in base al numero di repliche dell'applicazione o dei servizi che si vuole eseguire in questo tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-159">However you should choose this number based on the number of replicas of the application/services that you would like to run in this node type.</span></span> <span data-ttu-id="9b9c3-160">Il numero di VM in un tipo di nodo può essere aumentato dopo avere distribuito il cluster.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-160">The number of VMs in a node type can be increased after you have deployed the cluster.</span></span>

## <a name="the-durability-characteristics-of-the-cluster"></a><span data-ttu-id="9b9c3-161">Caratteristiche di durabilità del cluster</span><span class="sxs-lookup"><span data-stu-id="9b9c3-161">The durability characteristics of the cluster</span></span>
<span data-ttu-id="9b9c3-162">Il livello di durabilità viene usato per indicare al sistema i privilegi delle VM rispetto all'infrastruttura di Azure sottostante.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-162">The durability tier is used to indicate to the system the privileges that your VMs have with the underlying Azure infrastructure.</span></span> <span data-ttu-id="9b9c3-163">Nel tipo di nodo primario questo privilegio consente a Service Fabric di sospendere le richieste di infrastruttura a livello di VM (ad esempio il riavvio di una VM, il re-imaging di una VM o la migrazione di una VM) che hanno effetto sui requisiti relativi al quorum per i servizi di sistema e i servizi con stato.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-163">In the primary node type, this privilege allows Service Fabric to pause any VM level infrastructure request (such as a VM reboot, VM reimage, or VM migration) that impact the quorum requirements for the system services and your stateful services.</span></span> <span data-ttu-id="9b9c3-164">Nei tipi di nodo non primari questo privilegio consente a Service Fabric di sospendere le richieste di infrastruttura a livello di macchina virtuale (ad esempio il riavvio di una VM, il re-imaging di una VM, la migrazione di una VM e così via) che hanno effetto sui requisiti relativi al quorum per i servizi con stato in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-164">In the non-primary node types, this privilege allows Service Fabric to pause any VM level infrastructure requests like VM reboot, VM reimage, VM migration etc., that impact the quorum requirements for your stateful services running in it.</span></span>

<span data-ttu-id="9b9c3-165">Questo privilegio viene espresso con i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="9b9c3-165">This privilege is expressed in the following values:</span></span>

* <span data-ttu-id="9b9c3-166">Gold: i processi dell'infrastruttura possono essere sospesi per una durata di due ore per ogni dominio di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-166">Gold - The infrastructure Jobs can be paused for a duration of two hours per UD.</span></span> <span data-ttu-id="9b9c3-167">La durata Gold può essere abilitata solo per gli SKU VM con tutti i nodi come D15_V2, G5 e così via.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-167">Gold durability can be enabled only on full node VM skus like D15_V2, G5 etc.</span></span>
* <span data-ttu-id="9b9c3-168">Silver: i processi dell'infrastruttura possono essere sospesi per una durata di 10 minuti per ogni dominio di aggiornamento. È disponibile per tutte le VM standard a core singolo e superiori.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-168">Silver - The infrastructure Jobs can be paused for a duration of 10 minutes per UD and is available on all standard VMs of single core and above.</span></span>
* <span data-ttu-id="9b9c3-169">Bronze: nessun privilegio.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-169">Bronze - No privileges.</span></span> <span data-ttu-id="9b9c3-170">Questa è la modalità predefinita.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-170">This is the default.</span></span> <span data-ttu-id="9b9c3-171">Usare solo questo livello di durabilità per i tipi di nodi che eseguono _solo_ carichi di lavoro senza stato.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-171">Only use this durability level for Node Types that run _only_ stateless workloads.</span></span> 

> [!WARNING]
> <span data-ttu-id="9b9c3-172">NodeTypes in esecuzione con durabilità Bronze _senza privilegi_.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-172">NodeTypes running with Bronze durability obtain _no privileges_.</span></span> <span data-ttu-id="9b9c3-173">Ciò significa che i processi di infrastruttura che influiscono sui carichi di lavoro senza stato non verranno interrotti o posticipati.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-173">This means that infrastructure jobs that impact your stateless workloads will not be stopped or delayed.</span></span> <span data-ttu-id="9b9c3-174">È possibile che tali processi possano ancora influire sui carichi di lavoro, provocando un tempo di inattività o altri problemi.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-174">It is possible that such jobs can still impact your workloads, causing downtime or other issues.</span></span> <span data-ttu-id="9b9c3-175">Per qualsiasi tipo di carico di lavoro di produzione, è consigliata almeno l'esecuzione con Silver.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-175">For any sort of production workload, running with at least Silver is recommended.</span></span> 
> 

<span data-ttu-id="9b9c3-176">È necessario scegliere il livello di durabilità per ogni tipo di nodo. Si può scegliere un livello di durabilità Gold o Silver per un tipo di nodo e il livello Bronze per un altro nello stesso cluster. **È necessario mantenere un conteggio minimo di 5 nodi per qualsiasi tipo di nodo con durabilità Gold o Silver**.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-176">You get to choose durability level for each of your node-types.You can choose one node-type to have a durability level of Gold or silver and the other have Bronze in the same cluster.**You must maintain a minimum count of 5 nodes for any node-type that has a durability of Gold or silver**.</span></span> 

<span data-ttu-id="9b9c3-177">**Vantaggi dell'uso di livelli di durabilità Silver o Gold**</span><span class="sxs-lookup"><span data-stu-id="9b9c3-177">**Advantages of using Silver or Gold durability levels**</span></span>
 
1. <span data-ttu-id="9b9c3-178">Riducono il numero dei passaggi necessari in un'operazione di riduzione del numero di istanze. La disattivazione del nodo e Remove-ServiceFabricNodeState vengono chiamati automaticamente.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-178">Reduces the number of required steps in a scale-in operation (that is, node deactivation and Remove-ServiceFabricNodeState is called automatically)</span></span>
2. <span data-ttu-id="9b9c3-179">Riducono il rischio di perdita di dati a causa di un'operazione di modifica sul posto dello SKU di VM avviata dal cliente o di operazioni sull'infrastruttura di Azure.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-179">Reduces the risk of data loss due to a customer-initiated in-place VM SKU change operation or Azure infrastructure operations.</span></span>
     
<span data-ttu-id="9b9c3-180">**Svantaggi dell'uso di livelli di durabilità Silver o Gold**</span><span class="sxs-lookup"><span data-stu-id="9b9c3-180">**Disadvantages of using Silver or Gold durability levels**</span></span>
 
1. <span data-ttu-id="9b9c3-181">Le distribuzioni nel set di scalabilità di macchine virtuali e in altre risorse di Azure correlate possono subire ritardi o timeout oppure essere interamente bloccate da problemi nel cluster o a livello di infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-181">Deployments to your Virtual Machine Scale Set and other related Azure resources) can be delayed, can time out, or can be blocked entirely by problems in your cluster or at the infrastructure level.</span></span> 
2. <span data-ttu-id="9b9c3-182">Le disattivazioni automatizzate dei nodi durante le operazioni sull'infrastruttura di Azure aumentano il numero di [eventi del ciclo di vita della replica](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle ), ad esempio di scambi di nodi primari.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-182">Increases the number of [replica lifecycle events](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle ) (for example, primary swaps) due to automated node deactivations during Azure infrastructure operations.</span></span>

### <a name="recommendations-on-when-to-use-silver-or-gold-durability-levels"></a><span data-ttu-id="9b9c3-183">Raccomandazioni su quando usare livelli di durabilità Silver o Gold</span><span class="sxs-lookup"><span data-stu-id="9b9c3-183">Recommendations on when to use Silver or Gold durability levels</span></span>

<span data-ttu-id="9b9c3-184">Usare la durabilità Silver o Gold per tutti i tipi di nodo che ospitano servizi con stato di cui si prevede di ridurre frequentemente il numero di istanze di VM, quando si preferisce ritardare le operazioni di distribuzione in favore di una semplificazione di tali operazioni di riduzione del numero di istanze.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-184">Use Silver or Gold durability for all node types that host stateful services you expect to scale-in (reduce VM instance count) frequently, and you would prefer that deployment operations be delayed in favor of simplifying these scale-in operations.</span></span> <span data-ttu-id="9b9c3-185">Gli scenari di aumento del numero di istanze di VM non influiscono sulla scelta del livello di durabilità. Solo la riduzione del numero di istanze ha un impatto su tale scelta.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-185">The scale-out scenarios (adding VMs instances) do not play into your choice of the durability tier, only scale-in does.</span></span>

### <a name="operational-recommendations-for-the-node-type-that-you-have-set-to-silver-or-gold-durability-level"></a><span data-ttu-id="9b9c3-186">Raccomandazioni operative per il tipo di nodo impostato sul livello di durabilità Silver o Gold</span><span class="sxs-lookup"><span data-stu-id="9b9c3-186">Operational Recommendations for the node type that you have set to silver or gold durability level.</span></span>

1. <span data-ttu-id="9b9c3-187">Mantenere sempre integri il cluster e le applicazioni e verificare che le applicazioni rispondano in modo tempestivo a tutti gli [eventi del ciclo di vita della replica del servizio](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle), ad esempio al blocco della replica in compilazione.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-187">Keep your cluster and applications healthy at all times, and make sure that applications respond to all [Service replica lifecycle events](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (like replica in build is stuck) in a timely fashion.</span></span>
2. <span data-ttu-id="9b9c3-188">Adottare modi più sicuri per eseguire una modifica di uno SKU di VM (aumento/riduzione delle prestazioni): la modifica dello SKU di VM di un set di scalabilità di macchine virtuali è un'operazione intrinsecamente non sicura, pertanto dovrebbe essere evitata, se possibile.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-188">Adopt safer ways to make a VM SKU change (Scale up/down): Changing the VM SKU of a Virtual Machine Scale Set is inherently an unsafe operation and so should be avoided if possible.</span></span> <span data-ttu-id="9b9c3-189">Di seguito è illustrato il processo che è possibile seguire per evitare i problemi comuni.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-189">Here is the process you can follow to avoid common issues.</span></span>
    - <span data-ttu-id="9b9c3-190">**Per i tipi di nodo non primari:** è consigliabile creare un nuovo set di scalabilità di macchine virtuali, modificare il vincolo di posizionamento del servizio per poter includere il nuovo tipo di nodo/set di scalabilità di macchine virtuali e quindi ridurre il numero di istanze del set di scalabilità di macchine virtuali precedente a 0, un nodo alla volta (perché la rimozione dei nodi non influisca sull'affidabilità del cluster).</span><span class="sxs-lookup"><span data-stu-id="9b9c3-190">**For non-primary nodetypes:** It is recommended that you create new Virtual Machine Scale Set, modify the service placement constraint to include the new Virtual Machine Scale Set/node type and then reduce the old Virtual Machine Scale Set instance count to 0, one node at a time (this is to make sure that removal of the nodes do not impact the reliability of the cluster).</span></span>
    - <span data-ttu-id="9b9c3-191">**Per il tipo di nodo primario:** è consigliabile non modificare il relativo SKU di VM.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-191">**For the primary nodetype:** Our recommendation is that you do not change VM SKU of the primary node type.</span></span> <span data-ttu-id="9b9c3-192">Se lo scopo del nuovo SKU è la capacità, è consigliabile aggiungere altre istanze o, se possibile, creare un nuovo cluster.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-192">If the reason for the new SKU is capacity, we recommend adding more instances or if possible, create a new cluster.</span></span> <span data-ttu-id="9b9c3-193">Se non sono disponibili alternative, apportare modifiche alla definizione del modello del set di scalabilità di macchine virtuali in modo che rifletta il nuovo SKU.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-193">If you have no choice, then make modifications to the Virtual Machine Scale Set Model definition to reflect the new SKU.</span></span> <span data-ttu-id="9b9c3-194">Se il cluster include un solo tipo di nodo, verificare che tutte le applicazioni con stato rispondano in modo tempestivo a tutti gli [eventi del ciclo di vita della replica del servizio](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle), ad esempio al blocco della replica in compilazione, e che la durata della ricompilazione della replica del servizio sia inferiore a cinque minuti (per il livello di durabilità Silver).</span><span class="sxs-lookup"><span data-stu-id="9b9c3-194">If your cluster has only one nodetype, then make sure that all your stateful applications respond to all [Service replica lifecycle events](service-fabric-reliable-services-advanced-usage.md#stateful-service-replica-lifecycle) (like replica in build is stuck) in a timely fashion and that your service replica rebuild duration is less than five minutes (for Silver durability level).</span></span> 


> [!WARNING]
> <span data-ttu-id="9b9c3-195">Non è consigliata la modifica delle dimensioni della SKU della macchina virtuale per i set di scalabilità di macchine virtuali in una durabilità che sia almeno Silver.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-195">Changing the VM SKU Size for VM Scale Sets not running at least Silver durability is not recommened.</span></span> <span data-ttu-id="9b9c3-196">La modifica delle dimensioni della SKU della macchina virtuale è un'operazione dell'infrastruttura sul posto distruttiva per i dati.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-196">Changing VM SKU Size is a data-destructive in-place infrastructure operation.</span></span> <span data-ttu-id="9b9c3-197">Senza almeno la capacità di ritardare o monitorare questa modifica, è possibile che l'operazione possa causare una perdita di dati per i servizi con stato o provocare altri problemi operativi non previsti, anche per i carichi di lavoro senza stato.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-197">Without at least some ability to delay or monitor this change, it is possible that the operation can cause dataloss for stateful services or cause other unforseen operational issues, even for stateless workloads.</span></span> 
> 
    
3. <span data-ttu-id="9b9c3-198">Mantenere un numero minimo di cinque nodi per tutti i set di scalabilità di macchine virtuali con ruolo di gestione abilitato.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-198">Maintain a minimum count of five nodes for any Virtual Machine Scale Set that has MR enabled</span></span>
4. <span data-ttu-id="9b9c3-199">Non eliminare istanze di VM casuali. Usare sempre la funzionalità di riduzione delle prestazioni del set di scalabilità di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-199">Do not delete random VM instances, always use Virtual Machine Scale Set scale down feature.</span></span> <span data-ttu-id="9b9c3-200">L'eliminazione di istanze di VM causali può creare squilibri nella distribuzione delle istanze di VM tra domini di aggiornamento e domini di errore.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-200">The deletion of random VM instances has a potential of creating imbalances in the VM instance spread across UD and FD.</span></span> <span data-ttu-id="9b9c3-201">Tale squilibrio potrebbe influire negativamente sulla capacità del sistema di bilanciare correttamente il carico tra istanze dei servizi e repliche dei servizi.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-201">This imbalance could adversely affect the systems ability to properly load balance amongst the service instances/Service replicas.</span></span>
6. <span data-ttu-id="9b9c3-202">Se si usa la scalabilità automatica, impostare le regole in modo che la riduzione del numero di istanze (ossia la rimozione di istanze di VM) venga eseguita un solo nodo alla volta.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-202">If using Autoscale, then set the rules such that scale in (removing of VM instances) are done only one node at a time.</span></span> <span data-ttu-id="9b9c3-203">La riduzione delle prestazioni di più di un'istanza per volta non è sicura.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-203">Scaling down more than one instance at a time is not safe.</span></span>
7. <span data-ttu-id="9b9c3-204">Se si riducono le prestazioni di un tipo di nodo primario, è consigliabile non ridurle mai più di quanto consentito dal livello di affidabilità.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-204">If Scaling down a primary node type, you should never scale it down more than what the reliability tier allows.</span></span>


## <a name="the-reliability-characteristics-of-the-cluster"></a><span data-ttu-id="9b9c3-205">Caratteristiche di affidabilità del cluster</span><span class="sxs-lookup"><span data-stu-id="9b9c3-205">The reliability characteristics of the cluster</span></span>
<span data-ttu-id="9b9c3-206">Il livello di affidabilità viene usato per impostare il numero di repliche dei servizi di sistema che si vuole eseguire in questo cluster nel tipo di nodo primario.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-206">The reliability tier is used to set the number of replicas of the system services that you want to run in this cluster on the primary node type.</span></span> <span data-ttu-id="9b9c3-207">I servizi di sistema nel cluster sono tanto più affidabili quanto più elevato è il numero di repliche.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-207">The more the number of replicas, the more reliable the system services are in your cluster.</span></span>  

<span data-ttu-id="9b9c3-208">Il livello di affidabilità può avere i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="9b9c3-208">The reliability tier can take the following values:</span></span>

* <span data-ttu-id="9b9c3-209">Platinum: esegue i servizi di sistema con un totale di set di repliche di destinazione pari a 9</span><span class="sxs-lookup"><span data-stu-id="9b9c3-209">Platinum - Run the System services with a target replica set count of 9</span></span>
* <span data-ttu-id="9b9c3-210">Gold: esegue i servizi di sistema con un totale di set di repliche di destinazione pari a 7</span><span class="sxs-lookup"><span data-stu-id="9b9c3-210">Gold - Run the System services with a target replica set count of 7</span></span>
* <span data-ttu-id="9b9c3-211">Silver: esegue i servizi di sistema con un totale di set di repliche di destinazione pari a 5</span><span class="sxs-lookup"><span data-stu-id="9b9c3-211">Silver - Run the System services with a target replica set count of 5</span></span> 
* <span data-ttu-id="9b9c3-212">Bronze: esegue i servizi di sistema con un totale di set di repliche di destinazione pari a 3</span><span class="sxs-lookup"><span data-stu-id="9b9c3-212">Bronze - Run the System services with a target replica set count of 3</span></span>

> [!NOTE]
> <span data-ttu-id="9b9c3-213">Il livello di affidabilità scelto determina il numero minimo di nodi che deve avere il tipo di nodo primario.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-213">The reliability tier you choose determines the minimum number of nodes your primary node type must have.</span></span> 
> 
> 


### <a name="recommendations-for-the-reliability-tier"></a><span data-ttu-id="9b9c3-214">Raccomandazioni per il livello di affidabilità.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-214">Recommendations for the reliability tier.</span></span>

 <span data-ttu-id="9b9c3-215">Quando si aumentano o riducono le dimensioni del cluster (la somma delle istanze di VM in tutti i tipi di nodi), è necessario aggiornare l'affidabilità del cluster da un livello a un altro.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-215">When you increase or decrease the size of your cluster (the sum of VM instances in all node types), you must update the reliability of your cluster from one tier to another.</span></span> <span data-ttu-id="9b9c3-216">Così facendo si attivano gli aggiornamenti del cluster necessari per modificare il totale di set di repliche dei servizi di sistema.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-216">Doing this triggers the cluster upgrades needed to change the system services replica set count.</span></span> <span data-ttu-id="9b9c3-217">Attendere che l'aggiornamento in corso venga completato prima di apportare altre modifiche al cluster, come l'aggiunta di nodi.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-217">Wait for the upgrade in progress to complete before making any other changes to the cluster, like adding nodes.</span></span>  <span data-ttu-id="9b9c3-218">È possibile monitorare lo stato di avanzamento dell'aggiornamento in Service Fabric Explorer oppure eseguendo [Get-ServiceFabricClusterUpgrade](/powershell/module/servicefabric/get-servicefabricclusterupgrade?view=azureservicefabricps).</span><span class="sxs-lookup"><span data-stu-id="9b9c3-218">You can monitor the progress of the upgrade on Service Fabric Explorer or by running [Get-ServiceFabricClusterUpgrade](/powershell/module/servicefabric/get-servicefabricclusterupgrade?view=azureservicefabricps)</span></span>

<span data-ttu-id="9b9c3-219">Ecco la raccomandazione per la scelta del livello di affidabilità.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-219">Here is the recommendation on choosing the reliability tier.</span></span>

| <span data-ttu-id="9b9c3-220">**Dimensione del cluster**</span><span class="sxs-lookup"><span data-stu-id="9b9c3-220">**Cluster Size**</span></span> | <span data-ttu-id="9b9c3-221">**Livello di affidabilità**</span><span class="sxs-lookup"><span data-stu-id="9b9c3-221">**Reliability Tier**</span></span> |
| --- | --- |
| <span data-ttu-id="9b9c3-222">1</span><span class="sxs-lookup"><span data-stu-id="9b9c3-222">1</span></span> |<span data-ttu-id="9b9c3-223">Non specificare il parametro Livello di affidabilità perché viene calcolato automaticamente dal sistema</span><span class="sxs-lookup"><span data-stu-id="9b9c3-223">Do not specify the Reliability Tier parameter, the system calculates it</span></span> |
| <span data-ttu-id="9b9c3-224">3</span><span class="sxs-lookup"><span data-stu-id="9b9c3-224">3</span></span> |<span data-ttu-id="9b9c3-225">Bronze</span><span class="sxs-lookup"><span data-stu-id="9b9c3-225">Bronze</span></span> |
| <span data-ttu-id="9b9c3-226">5 o 6</span><span class="sxs-lookup"><span data-stu-id="9b9c3-226">5 or 6</span></span>|<span data-ttu-id="9b9c3-227">Silver</span><span class="sxs-lookup"><span data-stu-id="9b9c3-227">Silver</span></span> |
| <span data-ttu-id="9b9c3-228">7 o 8</span><span class="sxs-lookup"><span data-stu-id="9b9c3-228">7 or 8</span></span> |<span data-ttu-id="9b9c3-229">Gold</span><span class="sxs-lookup"><span data-stu-id="9b9c3-229">Gold</span></span> |
| <span data-ttu-id="9b9c3-230">Da 9 in su</span><span class="sxs-lookup"><span data-stu-id="9b9c3-230">9 and up</span></span> |<span data-ttu-id="9b9c3-231">Platinum</span><span class="sxs-lookup"><span data-stu-id="9b9c3-231">Platinum</span></span> |




## <a name="primary-node-type---capacity-guidance"></a><span data-ttu-id="9b9c3-232">Tipo di nodo primario: guida alla capacità</span><span class="sxs-lookup"><span data-stu-id="9b9c3-232">Primary node type - Capacity Guidance</span></span>

<span data-ttu-id="9b9c3-233">Ecco le indicazioni per pianificare la capacità del tipo di nodo primario</span><span class="sxs-lookup"><span data-stu-id="9b9c3-233">Here is the guidance for planning the primary node type capacity</span></span>

1. <span data-ttu-id="9b9c3-234">**Numero di istanze delle VM per eseguire qualsiasi carico di lavoro di produzione in Azure:** è necessario specificare una dimensione minima del tipo di nodo primario pari a 5.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-234">**Number of VM instances to run any production workload in Azure:** You must specify a minimum Primary Node type size of 5.</span></span> 
2. <span data-ttu-id="9b9c3-235">**Numero di istanze delle VM per eseguire carichi di lavoro di test in Azure:** è possibile specificare una dimensione minima del tipo di nodo primario pari a 1 o 3.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-235">**Number of VM instances to run test workloads in Azure** You can specify a minimum primary node type size of 1 or 3.</span></span> <span data-ttu-id="9b9c3-236">Il cluster a un nodo viene eseguito con una configurazione speciale, pertanto la scalabilità orizzontale di tale cluster non è supportata.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-236">The one node cluster, runs with a special configuration and so, scale out of that cluster is not supported.</span></span> <span data-ttu-id="9b9c3-237">Il cluster a un nodo non ha alcun livello di affidabilità, di conseguenza nel modello di Resource Manager è necessario rimuovere/non specificare tale configurazione (non è sufficiente non impostare il valore di configurazione).</span><span class="sxs-lookup"><span data-stu-id="9b9c3-237">The one node cluster, has no reliability and so in your Resource Manager template, you have to remove/not specify that configuration (not setting the configuration value is not enough).</span></span> <span data-ttu-id="9b9c3-238">Se si configura il cluster a un nodo tramite il portale, la configurazione viene gestita automaticamente.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-238">If you set up the one node cluster set up via portal, then the configuration is automatically taken care of.</span></span> <span data-ttu-id="9b9c3-239">I cluster a uno e tre nodi non sono supportati per l'esecuzione di carichi di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-239">1 and 3 node clusters are not supported for running production workloads.</span></span> 
3. <span data-ttu-id="9b9c3-240">**SKU di VM:** nel tipo di nodo primario vengono eseguiti i servizi di sistema, quindi lo SKU della VM scelto deve tenere in considerazione il carico massimo totale che si prevede di inserire nel cluster.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-240">**VM SKU:** Primary node type is where the system services run, so the VM SKU you choose for it, must take into account the overall peak load you plan to place into the cluster.</span></span> <span data-ttu-id="9b9c3-241">Per comprendere questo concetto, si pensi all'analogia seguente: il tipo di nodo primario è come i polmoni che forniscono ossigeno al cervello e quindi, se il cervello non riceve abbastanza ossigeno, il corpo ne risente.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-241">Here is an analogy to illustrate what I mean here - Think of the primary node type as your "Lungs", it is what provides oxygen to your brain, and so if the brain does not get enough oxygen, your body suffers.</span></span> 

<span data-ttu-id="9b9c3-242">Poiché le esigenze in termini di capacità di un cluster dipendono dal carico di lavoro che si prevede di eseguire nel cluster, non è possibile offrire una guida valida per un carico di lavoro specifico. Di seguito sono tuttavia riportate indicazioni generali per poter iniziare.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-242">Since the capacity needs of a cluster is determined by workload you plan to run in the cluster, we cannot provide you with qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="9b9c3-243">Per i carichi di lavoro di produzione</span><span class="sxs-lookup"><span data-stu-id="9b9c3-243">For production workloads</span></span> 


- <span data-ttu-id="9b9c3-244">Lo SKU per le VM consigliato è Standard D3 o Standard D3_V2 o equivalente con un'unità SSD locale di almeno 14 GB.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-244">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span>
- <span data-ttu-id="9b9c3-245">La versione minima supportata dello SKU per le VM è Standard D1 o Standard D1_V2 o equivalente con un'unità SSD locale di almeno 14 GB.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-245">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span> 
- <span data-ttu-id="9b9c3-246">Gli SKU per VM con core parziali, ad esempio Standard A0, non sono supportati per i carichi di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-246">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="9b9c3-247">Lo SKU Standard A1 non è supportato per i carichi di lavoro di produzione per motivi di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-247">Standard A1 SKU is not supported for production workloads for performance reasons.</span></span>


## <a name="non-primary-node-type---capacity-guidance-for-stateful-workloads"></a><span data-ttu-id="9b9c3-248">Tipo di nodo non primario: guida alla capacità per carichi di lavoro con stato</span><span class="sxs-lookup"><span data-stu-id="9b9c3-248">Non-Primary node type - Capacity Guidance for stateful workloads</span></span>

<span data-ttu-id="9b9c3-249">Queste linee guida sono relative ai carichi di lavoro con stato che usano [Reliable Collections o Reliable Actors](service-fabric-choose-framework.md) di Service Fabric in esecuzione nel tipo di nodo non primario.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-249">This guidance is for stateful Workloads using Service fabric [reliable collections or reliable Actors](service-fabric-choose-framework.md) that you are running in the non-primary node type.</span></span>


<span data-ttu-id="9b9c3-250">**Numero di istanze delle VM:** è consigliabile eseguire i carichi di lavoro di produzione con stato con un numero di repliche di destinazione di almeno 5 istanze.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-250">**Number of VM instances:** For production workloads that are stateful, it is recommended that you run them with a minimum and target replica count of 5.</span></span> <span data-ttu-id="9b9c3-251">Nello stato stabile viene quindi creata una replica (da un set di repliche) in ogni dominio di errore e in ogni dominio di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-251">This means that in steady state you end up with a replica (from a replica set) in each fault domain and upgrade domain.</span></span> <span data-ttu-id="9b9c3-252">L'intero concetto di livello di affidabilità per il tipo di nodo primario è un modo per specificare questa impostazione per i servizi di sistema.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-252">The whole reliability tier concept for the primary node type is a way to specify this setting for system services.</span></span> <span data-ttu-id="9b9c3-253">La stessa considerazione è quindi valida anche per i servizi con stato.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-253">So the same consideration applies to your stateful services as well.</span></span>

<span data-ttu-id="9b9c3-254">Per i carichi di lavoro di produzione, la dimensione minima consigliata per il tipo di nodo non primario è quindi 5, se si eseguono carichi di lavoro con stato.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-254">So for production workloads, the minimum recommended non-Primary Node type size is 5, if you are running stateful workloads in it.</span></span>


<span data-ttu-id="9b9c3-255">**SKU di VM:** in questo tipo di nodo sono in esecuzione i servizi dell'applicazione, quindi lo SKU per le VM scelto deve tenere in considerazione il carico massimo che si prevede di inserire in ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-255">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span></span> <span data-ttu-id="9b9c3-256">Poiché le esigenze in termini di capacità del tipo di nodo dipendono dal carico di lavoro che si prevede di eseguire nel cluster, non è possibile offrire una guida valida per un carico di lavoro specifico. Di seguito sono tuttavia riportate indicazioni generali per poter iniziare.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-256">The capacity needs of the nodetype, is determined by workload you plan to run in the cluster, so we cannot provide you with qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="9b9c3-257">Per i carichi di lavoro di produzione</span><span class="sxs-lookup"><span data-stu-id="9b9c3-257">For production workloads</span></span> 

- <span data-ttu-id="9b9c3-258">Lo SKU per le VM consigliato è Standard D3 o Standard D3_V2 o equivalente con un'unità SSD locale di almeno 14 GB.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-258">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span>
- <span data-ttu-id="9b9c3-259">La versione minima supportata dello SKU per le VM è Standard D1 o Standard D1_V2 o equivalente con un'unità SSD locale di almeno 14 GB.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-259">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent with a minimum of 14 GB of local SSD.</span></span> 
- <span data-ttu-id="9b9c3-260">Gli SKU per VM con core parziali, ad esempio Standard A0, non sono supportati per i carichi di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-260">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="9b9c3-261">Lo SKU Standard A1 in particolare non è supportato per i carichi di lavoro di produzione per motivi di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-261">Standard A1 SKU is specifically not supported for production workloads for performance reasons.</span></span>


## <a name="non-primary-node-type---capacity-guidance-for-stateless-workloads"></a><span data-ttu-id="9b9c3-262">Tipo di nodo non primario: guida alla capacità per carichi di lavoro senza stato</span><span class="sxs-lookup"><span data-stu-id="9b9c3-262">Non-Primary node type - Capacity Guidance for stateless workloads</span></span>

<span data-ttu-id="9b9c3-263">Linee guida per i carichi di lavoro senza stato in esecuzione nel tipo di nodo non primario.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-263">This guidance of stateless Workloads that you are running on the non-primary nodetype.</span></span>

<span data-ttu-id="9b9c3-264">**Numero di istanze delle VM:** per i carichi di lavoro di produzione senza stato, la dimensione minima supportata per il tipo di nodo non primario è pari a 2.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-264">**Number of VM instances:** For production workloads that are stateless, the minimum supported non-Primary Node type size is 2.</span></span> <span data-ttu-id="9b9c3-265">Ciò consente di eseguire due istanze senza stato dell'applicazione e consente al servizio di resistere alla perdita di un'istanza di una VM.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-265">This allows you to run you two stateless instances of your application and allowing your service to survive the loss of a VM instance.</span></span> 

> [!NOTE]
> <span data-ttu-id="9b9c3-266">Se il cluster è in esecuzione in una versione di Service Fabric precedente alla 5.6, a causa di un difetto del runtime (corretto nella versione 5.6), passando a un tipo di nodo non primario inferiore a 5, l'integrità del cluster viene meno, finché non si chiama il [comando Remove-ServiceFabricNodeState](https://docs.microsoft.com/powershell/servicefabric/vlatest/Remove-ServiceFabricNodeState) con il nome di nodo appropriato.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-266">If your cluster is running on a service fabric version less than 5.6, due to a defect in the runtime (this issue is fixed in 5.6), scaling down a non-primary node type to less than 5, results in cluster health turning unhealthy, till you call [Remove-ServiceFabricNodeState cmd](https://docs.microsoft.com/powershell/servicefabric/vlatest/Remove-ServiceFabricNodeState) with the appropriate node name.</span></span> <span data-ttu-id="9b9c3-267">Per altre informazioni, vedere [Aumentare o ridurre il numero di istanze del cluster di Service Fabric](service-fabric-cluster-scale-up-down.md).</span><span class="sxs-lookup"><span data-stu-id="9b9c3-267">Read [perform Service Fabric cluster in or out](service-fabric-cluster-scale-up-down.md) for more details</span></span>
> 
>

<span data-ttu-id="9b9c3-268">**SKU di VM:** in questo tipo di nodo sono in esecuzione i servizi dell'applicazione, quindi lo SKU per le VM scelto deve tenere in considerazione il carico massimo che si prevede di inserire in ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-268">**VM SKU:** This is the node type where your application services are running, so the VM SKU you choose for it, must take into account the peak load you plan to place into each Node.</span></span> <span data-ttu-id="9b9c3-269">Poiché le esigenze in termini di capacità del tipo di nodo dipendono dal carico di lavoro che si prevede di eseguire nel cluster, non è possibile offrire una guida valida per un carico di lavoro specifico. Di seguito sono tuttavia riportate indicazioni generali per poter iniziare.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-269">The capacity needs of the nodetype, is determined by workload you plan to run in the cluster, So we cannot provide you with qualitative guidance for your specific workload, however here is the broad guidance to help you get started</span></span>

<span data-ttu-id="9b9c3-270">Per i carichi di lavoro di produzione</span><span class="sxs-lookup"><span data-stu-id="9b9c3-270">For production workloads</span></span> 


- <span data-ttu-id="9b9c3-271">Lo SKU per le VM consigliato è Standard D3 o Standard D3_V2 o equivalente.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-271">The recommended VM SKU is Standard D3 or Standard D3_V2 or equivalent.</span></span> 
- <span data-ttu-id="9b9c3-272">La versione minima supportata dello SKU per le VM è Standard D1 o Standard D1_V2 o equivalente.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-272">The minimum supported use VM SKU is Standard D1 or Standard D1_V2 or equivalent.</span></span> 
- <span data-ttu-id="9b9c3-273">Gli SKU per VM con core parziali, ad esempio Standard A0, non sono supportati per i carichi di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-273">Partial core VM SKUs like Standard A0 are not supported for production workloads.</span></span>
- <span data-ttu-id="9b9c3-274">Lo SKU Standard A1 non è supportato per i carichi di lavoro di produzione per motivi di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="9b9c3-274">Standard A1 SKU is not supported for production workloads for performance reasons.</span></span>

<!--Every topic should have next steps and links to the next logical set of content to keep the customer engaged-->

## <a name="next-steps"></a><span data-ttu-id="9b9c3-275">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="9b9c3-275">Next steps</span></span>
<span data-ttu-id="9b9c3-276">Dopo avere completato la pianificazione della capacità e configurato un cluster, vedere quanto segue:</span><span class="sxs-lookup"><span data-stu-id="9b9c3-276">Once you finish your capacity planning and set up a cluster, read the following:</span></span>

* [<span data-ttu-id="9b9c3-277">Sicurezza di un cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9b9c3-277">Service Fabric cluster security</span></span>](service-fabric-cluster-security.md)
* [<span data-ttu-id="9b9c3-278">Introduzione al monitoraggio dell'integrità di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9b9c3-278">Service Fabric health model introduction</span></span>](service-fabric-health-introduction.md)
* [<span data-ttu-id="9b9c3-279">Relazione tra i tipi di nodo di Service Fabric e i set di scalabilità di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="9b9c3-279">Relationship of Nodetypes to Virtual machine scale set</span></span>](service-fabric-cluster-nodetypes.md)

<!--Image references-->
[SystemServices]: ./media/service-fabric-cluster-capacity/SystemServices.png
