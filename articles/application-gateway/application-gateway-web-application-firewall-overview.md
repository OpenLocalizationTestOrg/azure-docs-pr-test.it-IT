---
title: Introduzione a Web application firewall (WAF) per il gateway applicazione di Azure | Microsoft Docs
description: Questa pagina offre una panoramica di Web application firewall (WAF) per il gateway applicazione
documentationcenter: na
services: application-gateway
author: amsriva
manager: rossort
editor: amsriva
ms.assetid: 04b362bc-6653-4765-86f6-55ee8ec2a0ff
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: amsriva
ms.openlocfilehash: 50863b60f2843f033bdb07f4564d937cd6f0b7be
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="web-application-firewall-waf"></a><span data-ttu-id="3e362-103">Web application firewall (WAF)</span><span class="sxs-lookup"><span data-stu-id="3e362-103">Web application firewall (WAF)</span></span>

<span data-ttu-id="3e362-104">Web application firewall (WAF) è una funzionalità del gateway applicazione che offre una protezione centralizzata delle applicazioni Web da exploit e vulnerabilità comuni.</span><span class="sxs-lookup"><span data-stu-id="3e362-104">Web application firewall (WAF) is a feature of Application Gateway that provides centralized protection of your web applications from common exploits and vulnerabilities.</span></span> 

<span data-ttu-id="3e362-105">Il Web application firewall si basa sulle regole di [OWASP Core Rule Set](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 o 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="3e362-105">Web application firewall is based on rules from the [OWASP core rule sets](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 or 2.2.9.</span></span> <span data-ttu-id="3e362-106">Le applicazioni Web sono sempre più vittime di attacchi che sfruttano le più comuni vulnerabilità note.</span><span class="sxs-lookup"><span data-stu-id="3e362-106">Web applications are increasingly targets of malicious attacks that exploit common known vulnerabilities.</span></span> <span data-ttu-id="3e362-107">Per citarne alcuni, tra i più comuni troviamo gli attacchi SQL injection e gli attacchi di scripting intersito.</span><span class="sxs-lookup"><span data-stu-id="3e362-107">Common among these exploits are SQL injection attacks, cross site scripting attacks to name a few.</span></span> <span data-ttu-id="3e362-108">Impedire questo tipo di attacchi nel codice dell'applicazione può risultare un'operazione complessa e potrebbe richiedere una manutenzione rigorosa, l'applicazione di patch e il monitoraggio a più livelli della topologia dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e362-108">Preventing such attacks in application code can be challenging and may require rigorous maintenance, patching and monitoring at multiple layers of the application topology.</span></span> <span data-ttu-id="3e362-109">Un Web application firewall centralizzato semplifica notevolmente la gestione della sicurezza e offre agli amministratori delle applicazioni migliori garanzie contro le minacce o le intrusioni.</span><span class="sxs-lookup"><span data-stu-id="3e362-109">A centralized web application firewall helps make security management much simpler and gives better assurance to application administrators against threats or intrusions.</span></span> <span data-ttu-id="3e362-110">Una soluzione WAF è anche in grado di reagire più velocemente a una minaccia alla sicurezza tramite l'applicazione di patch su una vulnerabilità nota in una posizione centrale, anziché proteggere ogni singola applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="3e362-110">A WAF solution can also react to a security threat faster by patching a known vulnerability at a central location versus securing each of individual web applications.</span></span> <span data-ttu-id="3e362-111">È possibile convertire facilmente i gateway applicazione esistenti in un gateway applicazione con Web application firewall.</span><span class="sxs-lookup"><span data-stu-id="3e362-111">Existing application gateways can be converted to a web application firewall enabled application gateway easily.</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/WAF1.png)

<span data-ttu-id="3e362-113">Il gateway applicazione funziona come controller per la distribuzione di applicazioni che offre terminazione SSL, affinità di sessione basate su cookie, distribuzione del carico round robin, routing basato sui contenuti, possibilità di ospitare più siti Web e miglioramenti alla sicurezza.</span><span class="sxs-lookup"><span data-stu-id="3e362-113">Application Gateway operates as an application delivery controller and offers SSL termination, cookie-based session affinity, round-robin load distribution, content-based routing, ability to host multiple websites and security enhancements.</span></span> <span data-ttu-id="3e362-114">I miglioramenti della sicurezza offerti dal gateway applicazione includono la gestione dei criteri di SSL e il supporto di SSL end-to-end.</span><span class="sxs-lookup"><span data-stu-id="3e362-114">Security enhancements offered by Application Gateway include SSL policy management, end to end SSL support.</span></span> <span data-ttu-id="3e362-115">La sicurezza delle applicazioni è ora potenziata dall'integrazione diretta di Web application firewall nell'offerta ADC.</span><span class="sxs-lookup"><span data-stu-id="3e362-115">Application security is now strengthened by WAF (web application firewall) being directly integrated into the ADC offering.</span></span> <span data-ttu-id="3e362-116">In questo modo è facile configurare una posizione centrale per gestire e proteggere le applicazioni Web dalle vulnerabilità Web più comuni.</span><span class="sxs-lookup"><span data-stu-id="3e362-116">This provides an easy to configure central location to manage and protect your web applications against common web vulnerabilities.</span></span>

## <a name="benefits"></a><span data-ttu-id="3e362-117">Vantaggi</span><span class="sxs-lookup"><span data-stu-id="3e362-117">Benefits</span></span>

<span data-ttu-id="3e362-118">Di seguito sono indicati i vantaggi principali del gateway applicazione e del Web application firewall:</span><span class="sxs-lookup"><span data-stu-id="3e362-118">The following are the core benefits that Application Gateway and web application firewall provide:</span></span>

### <a name="protection"></a><span data-ttu-id="3e362-119">Protezione</span><span class="sxs-lookup"><span data-stu-id="3e362-119">Protection</span></span>

* <span data-ttu-id="3e362-120">Protezione dell'applicazione Web dalle vulnerabilità e dagli attacchi del Web, senza alcuna modifica al codice di back-end.</span><span class="sxs-lookup"><span data-stu-id="3e362-120">Protect your web application from web vulnerabilities and attacks without modification to backend code.</span></span>

* <span data-ttu-id="3e362-121">Protezione contemporanea di più applicazioni Web con un gateway applicazione.</span><span class="sxs-lookup"><span data-stu-id="3e362-121">Protect multiple web applications at the same time behind an application gateway.</span></span> <span data-ttu-id="3e362-122">Il gateway applicazione supporta l'hosting di un massimo di 20 siti Web su un singolo gateway. Tutti questi siti possono essere protetti dagli attacchi Web con Web application firewall.</span><span class="sxs-lookup"><span data-stu-id="3e362-122">Application gateway supports hosting up to 20 websites behind a single gateway that could all be protected against web attacks with WAF.</span></span>

### <a name="monitoring"></a><span data-ttu-id="3e362-123">Monitoraggio</span><span class="sxs-lookup"><span data-stu-id="3e362-123">Monitoring</span></span>

* <span data-ttu-id="3e362-124">Monitorare l'applicazione Web contro gli attacchi tramite un log di Web application firewall in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="3e362-124">Monitor your web application against attacks using a real-time WAF log.</span></span> <span data-ttu-id="3e362-125">Questo log è integrato in [Monitoraggio di Azure](../monitoring-and-diagnostics/monitoring-overview.md) per tenere traccia degli avvisi e dei log di Web application firewall e monitorare facilmente le tendenze.</span><span class="sxs-lookup"><span data-stu-id="3e362-125">This log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) to track WAF alerts and logs and easily monitor trends.</span></span>

* <span data-ttu-id="3e362-126">Web application firewall sarà presto integrato con il Centro sicurezza di Azure.</span><span class="sxs-lookup"><span data-stu-id="3e362-126">WAF will be integrated with Azure Security Center soon.</span></span> <span data-ttu-id="3e362-127">Il Centro sicurezza di Azure offre una visualizzazione centralizzata dello stato di sicurezza di tutte le risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="3e362-127">Azure Security Center allows for a central view of the security state of all your Azure resources.</span></span>

### <a name="customization"></a><span data-ttu-id="3e362-128">Personalizzazione</span><span class="sxs-lookup"><span data-stu-id="3e362-128">Customization</span></span>

* <span data-ttu-id="3e362-129">Possibilità di personalizzare le regole di Web application firewall e i gruppi di regole per soddisfare i requisiti dell'applicazione ed eliminare i falsi positivi.</span><span class="sxs-lookup"><span data-stu-id="3e362-129">The ability to customize WAF rules and rule groups to suit your application requirements and eliminate false positives.</span></span>

## <a name="features"></a><span data-ttu-id="3e362-130">Funzionalità</span><span class="sxs-lookup"><span data-stu-id="3e362-130">Features</span></span>

<span data-ttu-id="3e362-131">Web application firewall è preconfigurato con CRS 3.0 per impostazione predefinita, ma è possibile scegliere di usare la versione 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="3e362-131">Web application firewall comes preconfigured with CRS 3.0 by default or you can choose to use 2.2.9.</span></span> <span data-ttu-id="3e362-132">CRS 3.0 offre meno falsi positivi rispetto alla versione 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="3e362-132">CRS 3.0 offers reduced false positives over 2.2.9.</span></span> <span data-ttu-id="3e362-133">È possibile [personalizzare le regole in base alle esigenze](application-gateway-customize-waf-rules-portal.md).</span><span class="sxs-lookup"><span data-stu-id="3e362-133">The ability to [customize rules to suit your needs](application-gateway-customize-waf-rules-portal.md) is provided.</span></span> <span data-ttu-id="3e362-134">Le vulnerabilità Web per le quali Web application firewall offre protezione includono:</span><span class="sxs-lookup"><span data-stu-id="3e362-134">Some of the common web vulnerabilities which web application firewall protects against includes:</span></span>

* <span data-ttu-id="3e362-135">Protezione dagli attacchi SQL injection</span><span class="sxs-lookup"><span data-stu-id="3e362-135">SQL injection protection</span></span>
* <span data-ttu-id="3e362-136">Protezione dagli attacchi di scripting intersito</span><span class="sxs-lookup"><span data-stu-id="3e362-136">Cross site scripting protection</span></span>
* <span data-ttu-id="3e362-137">Protezione dai comuni attacchi Web, ad esempio attacchi di iniezione di comandi, richieste HTTP non valide, attacchi HTTP Response Splitting e Remote File Inclusion</span><span class="sxs-lookup"><span data-stu-id="3e362-137">Common Web Attacks Protection such as command injection, HTTP request smuggling, HTTP response splitting, and remote file inclusion attack</span></span>
* <span data-ttu-id="3e362-138">Protezione dalle violazioni del protocollo HTTP</span><span class="sxs-lookup"><span data-stu-id="3e362-138">Protection against HTTP protocol violations</span></span>
* <span data-ttu-id="3e362-139">Protezione contro eventuali anomalie del protocollo HTTP, ad esempio user agent host mancante e accept header</span><span class="sxs-lookup"><span data-stu-id="3e362-139">Protection against HTTP protocol anomalies such as missing host user-agent and accept headers</span></span>
* <span data-ttu-id="3e362-140">Prevenzione contro robot, crawler e scanner</span><span class="sxs-lookup"><span data-stu-id="3e362-140">Prevention against bots, crawlers, and scanners</span></span>
* <span data-ttu-id="3e362-141">Rilevamento di errori di configurazione comuni dell'applicazione (ad esempio, Apache, IIS e così via)</span><span class="sxs-lookup"><span data-stu-id="3e362-141">Detection of common application misconfigurations (i.e. Apache, IIS, etc.)</span></span>

<span data-ttu-id="3e362-142">Per un elenco dettagliato delle regole e delle relative funzionalità di protezione, vedere i [set di regole principali](#core-rule-sets) seguenti.</span><span class="sxs-lookup"><span data-stu-id="3e362-142">For a more detailed list of rules and their protections see the following [Core rule sets](#core-rule-sets).</span></span>

### <a name="core-rule-sets"></a><span data-ttu-id="3e362-143">Set di regole principali</span><span class="sxs-lookup"><span data-stu-id="3e362-143">Core rule sets</span></span>

<span data-ttu-id="3e362-144">Il gateway applicazione supporta due set di regole, ovvero CRS 3.0 e CRS 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="3e362-144">Application Gateway supports two rule sets, CRS 3.0, and CRS 2.2.9.</span></span> <span data-ttu-id="3e362-145">Questi set di regole principali sono raccolte di regole che proteggono le applicazioni Web da attività dannose.</span><span class="sxs-lookup"><span data-stu-id="3e362-145">These core rules sets are collections of rules that protect your web applications for malicious activity.</span></span>

#### <a name="owasp30"></a><span data-ttu-id="3e362-146">OWASP_3.0</span><span class="sxs-lookup"><span data-stu-id="3e362-146">OWASP_3.0</span></span>

<span data-ttu-id="3e362-147">Il set di regole principali 3.0 fornito offre 13 gruppi di regole come illustrato nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="3e362-147">The 3.0 core rule set provided has 13 rule groups as shown in the following table.</span></span> <span data-ttu-id="3e362-148">Ognuno di questi gruppi di regole contiene più regole che possono essere disabilitate.</span><span class="sxs-lookup"><span data-stu-id="3e362-148">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="3e362-149">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="3e362-149">RuleGroup</span></span>|<span data-ttu-id="3e362-150">Descrizione</span><span class="sxs-lookup"><span data-stu-id="3e362-150">Description</span></span>|
|---|---|
|<span data-ttu-id="3e362-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span><span class="sxs-lookup"><span data-stu-id="3e362-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span></span>|<span data-ttu-id="3e362-152">Contiene le regole per la protezione da spammer noti o attività dannose.</span><span class="sxs-lookup"><span data-stu-id="3e362-152">Contains rules to protect against known spammers or malicious activity.</span></span>|
|<span data-ttu-id="3e362-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span><span class="sxs-lookup"><span data-stu-id="3e362-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span></span>|<span data-ttu-id="3e362-154">Contiene le regole per bloccare i metodi (PUT, PATCH< e così via)</span><span class="sxs-lookup"><span data-stu-id="3e362-154">Contains rules to lock down methods (PUT, PATCH< ..)</span></span>|
|<span data-ttu-id="3e362-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span><span class="sxs-lookup"><span data-stu-id="3e362-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span></span>| <span data-ttu-id="3e362-156">Contiene le regole per la protezione da attacchi di tipo Denial of Service (DoS).</span><span class="sxs-lookup"><span data-stu-id="3e362-156">Contains rules to protect against Denial of Service (DoS) attacks.</span></span>|
|<span data-ttu-id="3e362-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span><span class="sxs-lookup"><span data-stu-id="3e362-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span></span>| <span data-ttu-id="3e362-158">Contiene le regole per la protezione da scanner di ambienti e porte.</span><span class="sxs-lookup"><span data-stu-id="3e362-158">Contains rules to protect against port and environment scanners.</span></span>|
|<span data-ttu-id="3e362-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span><span class="sxs-lookup"><span data-stu-id="3e362-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span></span>|<span data-ttu-id="3e362-160">Contiene le regole per la protezione da problemi di protocollo e codifica.</span><span class="sxs-lookup"><span data-stu-id="3e362-160">Contains rules to protect against protocol and encoding issues.</span></span>|
|<span data-ttu-id="3e362-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span><span class="sxs-lookup"><span data-stu-id="3e362-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span></span>|<span data-ttu-id="3e362-162">Contiene le regole per la protezione da header injection, request smuggling e response splitting</span><span class="sxs-lookup"><span data-stu-id="3e362-162">Contains rules to protect against header injection, request smuggling, and response splitting</span></span>|
|<span data-ttu-id="3e362-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span><span class="sxs-lookup"><span data-stu-id="3e362-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span></span>|<span data-ttu-id="3e362-164">Contiene le regole per la protezione da attacchi in file e percorsi.</span><span class="sxs-lookup"><span data-stu-id="3e362-164">Contains rules to protect against file and path attacks.</span></span>|
|<span data-ttu-id="3e362-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span><span class="sxs-lookup"><span data-stu-id="3e362-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span></span>|<span data-ttu-id="3e362-166">Contiene le regole per la protezione da Remote File Inclusion (RFI)</span><span class="sxs-lookup"><span data-stu-id="3e362-166">Contains rules to protect against Remote File Inclusion (RFI)</span></span>|
|<span data-ttu-id="3e362-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span><span class="sxs-lookup"><span data-stu-id="3e362-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span></span>|<span data-ttu-id="3e362-168">Contiene le regole per la protezione da Remote Code Execution.</span><span class="sxs-lookup"><span data-stu-id="3e362-168">Contains rules to protect again Remote Code Execution.</span></span>|
|<span data-ttu-id="3e362-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span><span class="sxs-lookup"><span data-stu-id="3e362-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span></span>|<span data-ttu-id="3e362-170">Contiene le regole per la protezione da attacchi PHP injection.</span><span class="sxs-lookup"><span data-stu-id="3e362-170">Contains rules to protect against PHP injection attacks.</span></span>|
|<span data-ttu-id="3e362-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span><span class="sxs-lookup"><span data-stu-id="3e362-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span></span>|<span data-ttu-id="3e362-172">Contiene le regole per la protezione da cross site scripting.</span><span class="sxs-lookup"><span data-stu-id="3e362-172">Contains rules for protecting against cross site scripting.</span></span>|
|<span data-ttu-id="3e362-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span><span class="sxs-lookup"><span data-stu-id="3e362-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span></span>|<span data-ttu-id="3e362-174">Contiene le regole per la protezione da attacchi SQL injection.</span><span class="sxs-lookup"><span data-stu-id="3e362-174">Contains rules for protecting against SQL injection attacks.</span></span>|
|<span data-ttu-id="3e362-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span><span class="sxs-lookup"><span data-stu-id="3e362-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span></span>|<span data-ttu-id="3e362-176">Contiene le regole per la protezione da attacchi Session Fixation.</span><span class="sxs-lookup"><span data-stu-id="3e362-176">Contains rules to protect against Session Fixation Attacks.</span></span>|

#### <a name="owasp229"></a><span data-ttu-id="3e362-177">OWASP_2.2.9</span><span class="sxs-lookup"><span data-stu-id="3e362-177">OWASP_2.2.9</span></span>

<span data-ttu-id="3e362-178">Il set di regole principali 2.2.9 fornito offre 10 gruppi di regole come illustrato nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="3e362-178">The 2.2.9 core rule set provided has 10 rule groups as shown in the following table.</span></span> <span data-ttu-id="3e362-179">Ognuno di questi gruppi di regole contiene più regole che possono essere disabilitate.</span><span class="sxs-lookup"><span data-stu-id="3e362-179">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="3e362-180">RuleGroup</span><span class="sxs-lookup"><span data-stu-id="3e362-180">RuleGroup</span></span>|<span data-ttu-id="3e362-181">Descrizione</span><span class="sxs-lookup"><span data-stu-id="3e362-181">Description</span></span>|
|---|---|
|<span data-ttu-id="3e362-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span><span class="sxs-lookup"><span data-stu-id="3e362-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span></span>|<span data-ttu-id="3e362-183">Contiene le regole per la protezione da violazioni del protocollo, ovvero caratteri non validi, GET con un corpo di richiesta e così via.</span><span class="sxs-lookup"><span data-stu-id="3e362-183">Contains rules to protect against protocol violations (invalid characters, GET with a request body, etc.)</span></span>|
|<span data-ttu-id="3e362-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span><span class="sxs-lookup"><span data-stu-id="3e362-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span></span>|<span data-ttu-id="3e362-185">Contiene le regole per la protezione da informazioni di intestazione errate.</span><span class="sxs-lookup"><span data-stu-id="3e362-185">Contains rules to protect against incorrect header information.</span></span>|
|<span data-ttu-id="3e362-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span><span class="sxs-lookup"><span data-stu-id="3e362-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span></span>|<span data-ttu-id="3e362-187">Contiene le regole per la protezione da argomenti o file che superano i limiti.</span><span class="sxs-lookup"><span data-stu-id="3e362-187">Contains rules to protect against arguments or files that exceed limitations.</span></span>|
|<span data-ttu-id="3e362-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span><span class="sxs-lookup"><span data-stu-id="3e362-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span></span>|<span data-ttu-id="3e362-189">Contiene le regole per la protezione da metodi, intestazioni e tipi di file con restrizioni.</span><span class="sxs-lookup"><span data-stu-id="3e362-189">Contains rules to protect against restricted methods, headers, and file types.</span></span> |
|<span data-ttu-id="3e362-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span><span class="sxs-lookup"><span data-stu-id="3e362-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span></span>|<span data-ttu-id="3e362-191">Contiene le regole per la protezione da agenti di ricerca Web e scanner.</span><span class="sxs-lookup"><span data-stu-id="3e362-191">Contains rules to protect against web crawlers and scanners.</span></span>|
|<span data-ttu-id="3e362-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span><span class="sxs-lookup"><span data-stu-id="3e362-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span></span>|<span data-ttu-id="3e362-193">Contiene le regole per la protezione da attacchi generici, ovvero Session Fixation, Remote File Inclusion, PHP injection e così via.</span><span class="sxs-lookup"><span data-stu-id="3e362-193">Contains rules to protect against generic attacks (session fixation, remote file inclusion, PHP injection, etc.)</span></span>|
|<span data-ttu-id="3e362-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span><span class="sxs-lookup"><span data-stu-id="3e362-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span></span>|<span data-ttu-id="3e362-195">Contiene le regole per la protezione da attacchi SQL injection</span><span class="sxs-lookup"><span data-stu-id="3e362-195">Contains rules to protect against SQL injection attacks</span></span>|
|<span data-ttu-id="3e362-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span><span class="sxs-lookup"><span data-stu-id="3e362-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span></span>|<span data-ttu-id="3e362-197">Contiene le regole per la protezione da cross site scripting.</span><span class="sxs-lookup"><span data-stu-id="3e362-197">Contains rules to protect against cross site scripting.</span></span>|
|<span data-ttu-id="3e362-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span><span class="sxs-lookup"><span data-stu-id="3e362-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span></span>|<span data-ttu-id="3e362-199">Contiene una regola per la protezione da attacchi Path Traversal</span><span class="sxs-lookup"><span data-stu-id="3e362-199">Contains a rule to protect against path traversal attacks</span></span>|
|<span data-ttu-id="3e362-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span><span class="sxs-lookup"><span data-stu-id="3e362-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span></span>|<span data-ttu-id="3e362-201">Contiene regole per la protezione da backdoor trojan.</span><span class="sxs-lookup"><span data-stu-id="3e362-201">Contains rules to protect against backdoor Trojans.</span></span>|

### <a name="waf-modes"></a><span data-ttu-id="3e362-202">Modalità del WAF</span><span class="sxs-lookup"><span data-stu-id="3e362-202">WAF Modes</span></span>

<span data-ttu-id="3e362-203">Il WAF del gateway applicazione può essere configurato per l'esecuzione nelle due modalità seguenti:</span><span class="sxs-lookup"><span data-stu-id="3e362-203">Application Gateway WAF can be configured to run in the following two modes:</span></span>

* <span data-ttu-id="3e362-204">**Modalità di rilevamento**: quando configurato per l'esecuzione in modalità di rilevamento, il WAF del gateway applicazione monitora e registra tutti gli avvisi sulle minacce in un file di log.</span><span class="sxs-lookup"><span data-stu-id="3e362-204">**Detection mode** – When configured to run in detection mode, Application Gateway WAF monitors and logs all threat alerts in to a log file.</span></span> <span data-ttu-id="3e362-205">È necessario abilitare la registrazione diagnostica per il gateway applicazione usando la sezione **Diagnostica**.</span><span class="sxs-lookup"><span data-stu-id="3e362-205">Logging diagnostics for Application Gateway should be turned on using the **Diagnostics** section.</span></span> <span data-ttu-id="3e362-206">Verificare anche che il log del WAF sia selezionato e attivato.</span><span class="sxs-lookup"><span data-stu-id="3e362-206">You also need to ensure that the WAF log is selected and turned on.</span></span> <span data-ttu-id="3e362-207">Quando viene eseguito in modalità di rilevamento, Web application firewall non blocca le richieste in ingresso.</span><span class="sxs-lookup"><span data-stu-id="3e362-207">When running in detection mode web application firewall does not block incoming requests.</span></span>
* <span data-ttu-id="3e362-208">**Modalità di prevenzione** : quando configurato per l'esecuzione in modalità di prevenzione, il gateway applicazione blocca attivamente le intrusioni e gli attacchi rilevati tramite le regole.</span><span class="sxs-lookup"><span data-stu-id="3e362-208">**Prevention mode** – When configured to run in prevention mode, Application Gateway actively blocks intrusions and attacks detected by its rules.</span></span> <span data-ttu-id="3e362-209">L'autore dell'attacco riceve un'eccezione di accesso non autorizzato 403 e la connessione viene terminata.</span><span class="sxs-lookup"><span data-stu-id="3e362-209">The attacker receives a 403 unauthorized access exception and the connection is terminated.</span></span> <span data-ttu-id="3e362-210">La modalità di prevenzione continua a registrare gli attacchi nei registri del WAF.</span><span class="sxs-lookup"><span data-stu-id="3e362-210">Prevention mode continues to log such attacks in the WAF logs.</span></span>

### <span data-ttu-id="3e362-211"><a name="application-gateway-waf-reports"></a>Monitoraggio WAF</span><span class="sxs-lookup"><span data-stu-id="3e362-211"><a name="application-gateway-waf-reports"></a>WAF Monitoring</span></span>

<span data-ttu-id="3e362-212">Il monitoraggio dello stato del gateway applicazione è un'attività importante.</span><span class="sxs-lookup"><span data-stu-id="3e362-212">Monitoring the health of your application gateway is important.</span></span> <span data-ttu-id="3e362-213">Il monitoraggio dell'integrità di Web application firewall e delle applicazioni protette è reso possibile dalla registrazione e dall'integrazione con Monitoraggio di Azure, il Centro sicurezza di Azure (presto disponibile) e Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="3e362-213">Monitoring the health of your web application firewall and the applications that it protects are provided through logging and integration with Azure Monitor, Azure Security Center (coming soon), and Log Analytics.</span></span>

![diagnostica](./media/application-gateway-web-application-firewall-overview/diagnostics.png)

#### <a name="azure-monitor"></a><span data-ttu-id="3e362-215">Monitoraggio di Azure</span><span class="sxs-lookup"><span data-stu-id="3e362-215">Azure Monitor</span></span>

<span data-ttu-id="3e362-216">Ogni log del gateway applicazione è integrato con [Monitoraggio di Azure](../monitoring-and-diagnostics/monitoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3e362-216">Each application gateway log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span></span>  <span data-ttu-id="3e362-217">Ciò consente di tenere traccia delle informazioni diagnostiche, inclusi i registri e gli avvisi del Web application firewall.</span><span class="sxs-lookup"><span data-stu-id="3e362-217">This allows you to track diagnostic information including WAF alerts and logs.</span></span>  <span data-ttu-id="3e362-218">Questa funzionalità viene fornita all'interno della risorsa del gateway applicazione nella scheda **Diagnostica** del portale o direttamente tramite il servizio Monitoraggio di Azure.</span><span class="sxs-lookup"><span data-stu-id="3e362-218">This capability is provided within the Application Gateway resource in the portal under the **Diagnostics** tab or through the Azure Monitor service directly.</span></span> <span data-ttu-id="3e362-219">Per altre informazioni sull'abilitazione dei log di diagnostica per il gateway applicazione, vedere la [diagnostica per il gateway applicazione](application-gateway-diagnostics.md)</span><span class="sxs-lookup"><span data-stu-id="3e362-219">To learn more about enabling diagnostic logs for application gateway visit [Application Gateway diagnostics](application-gateway-diagnostics.md)</span></span>

#### <a name="azure-security-center"></a><span data-ttu-id="3e362-220">Centro sicurezza di Azure</span><span class="sxs-lookup"><span data-stu-id="3e362-220">Azure Security Center</span></span>

<span data-ttu-id="3e362-221">Il [Centro sicurezza di Azure](../security-center/security-center-intro.md) consente di prevenire, rilevare e rispondere alle minacce con un livello di visibilità e controllo più elevato della sicurezza delle risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="3e362-221">[Azure Security Center](../security-center/security-center-intro.md) helps you prevent, detect, and respond to threats with increased visibility into and control over the security of your Azure resources.</span></span> <span data-ttu-id="3e362-222">Il gateway applicazione è ora [integrato nel Centro sicurezza di Azure](application-gateway-integration-security-center.md).</span><span class="sxs-lookup"><span data-stu-id="3e362-222">Application gateway now [integrates into Azure Security Center](application-gateway-integration-security-center.md).</span></span> <span data-ttu-id="3e362-223">Il Centro sicurezza di Azure analizza l'ambiente per rilevare eventuali applicazioni Web non protette</span><span class="sxs-lookup"><span data-stu-id="3e362-223">Azure Security Center scans your environment to detect unprotected web applications.</span></span> <span data-ttu-id="3e362-224">ed è ora in grado di consigliare il WAF del gateway applicazione per proteggere le risorse vulnerabili.</span><span class="sxs-lookup"><span data-stu-id="3e362-224">It can now recommend application gateway WAF to protect these vulnerable resources.</span></span> <span data-ttu-id="3e362-225">È possibile creare il WAF del gateway applicazione direttamente dal Centro sicurezza di Azure.</span><span class="sxs-lookup"><span data-stu-id="3e362-225">You can directly create application gateway WAF from the Azure Security Center.</span></span>  <span data-ttu-id="3e362-226">Queste istanze WAF sono integrate nel Centro sicurezza di Azure, a cui inviano avvisi e informazioni sull'integrità per consentire la creazione di report.</span><span class="sxs-lookup"><span data-stu-id="3e362-226">These WAF instances are integrated with Azure Security Center and will send alerts and health information back to Azure Security Center for reporting.</span></span>

![Figura 1](./media/application-gateway-web-application-firewall-overview/figure1.png)

#### <a name="logging"></a><span data-ttu-id="3e362-228">Registrazione</span><span class="sxs-lookup"><span data-stu-id="3e362-228">Logging</span></span>

<span data-ttu-id="3e362-229">Il WAF del gateway applicazione fornisce rapporti dettagliati su ogni minaccia rilevata.</span><span class="sxs-lookup"><span data-stu-id="3e362-229">Application Gateway WAF provides detailed reporting on each threat it detects.</span></span> <span data-ttu-id="3e362-230">La registrazione è integrata con i log di diagnostica di Azure e gli avvisi vengono registrati in formato JSON.</span><span class="sxs-lookup"><span data-stu-id="3e362-230">Logging is integrated with Azure Diagnostics logs and alerts are recorded in a json format.</span></span> <span data-ttu-id="3e362-231">Questi log possono essere integrati con [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="3e362-231">These logs can be integrated with [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/waf2.png)

```json
{
  "resourceId": "/SUBSCRIPTIONS/{subscriptionId}/RESOURCEGROUPS/{resourceGroupId}/PROVIDERS/MICROSOFT.NETWORK/APPLICATIONGATEWAYS/{appGatewayName}",
  "operationName": "ApplicationGatewayFirewall",
  "time": "2017-03-20T15:52:09.1494499Z",
  "category": "ApplicationGatewayFirewallLog",
  "properties": {
    "instanceId": "ApplicationGatewayRole_IN_0",
    "clientIp": "104.210.252.3",
    "clientPort": "4835",
    "requestUri": "/?a=%3Cscript%3Ealert(%22Hello%22);%3C/script%3E",
    "ruleSetType": "OWASP",
    "ruleSetVersion": "3.0",
    "ruleId": "941320",
    "message": "Possible XSS Attack Detected - HTML Tag Handler",
    "action": "Blocked",
    "site": "Global",
    "details": {
      "message": "Warning. Pattern match \"<(a|abbr|acronym|address|applet|area|audioscope|b|base|basefront|bdo|bgsound|big|blackface|blink|blockquote|body|bq|br|button|caption|center|cite|code|col|colgroup|comment|dd|del|dfn|dir|div|dl|dt|em|embed|fieldset|fn|font|form|frame|frameset|h1|head|h ...\" at ARGS:a.",
      "data": "Matched Data: <script> found within ARGS:a: <script>alert(\\x22hello\\x22);</script>",
      "file": "rules/REQUEST-941-APPLICATION-ATTACK-XSS.conf",
      "line": "865"
    }
  }
} 

```

## <a name="application-gateway-waf-sku-pricing"></a><span data-ttu-id="3e362-233">Prezzi dello SKU WAF del gateway applicazione</span><span class="sxs-lookup"><span data-stu-id="3e362-233">Application Gateway WAF SKU pricing</span></span>

<span data-ttu-id="3e362-234">Web application firewall è disponibile in un nuovo SKU del WAF.</span><span class="sxs-lookup"><span data-stu-id="3e362-234">Web application firewall is available under a new a WAF SKU.</span></span> <span data-ttu-id="3e362-235">Questo SKU è disponibile solo nel modello di provisioning di Azure Resource Manager e non nel modello di distribuzione classica.</span><span class="sxs-lookup"><span data-stu-id="3e362-235">This SKU is available only in Azure Resource Manager provisioning model and not under the classic deployment model.</span></span> <span data-ttu-id="3e362-236">Lo SKU del WAF è disponibile solo in istanze del gateway applicazione di medie e grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="3e362-236">Additionally WAF SKU comes only in medium and large application gateway instance sizes.</span></span> <span data-ttu-id="3e362-237">Tutti i limiti relativi al gateway applicazione si applicano anche allo SKU de WAF.</span><span class="sxs-lookup"><span data-stu-id="3e362-237">All the limits for application gateway also apply to the WAF SKU.</span></span> <span data-ttu-id="3e362-238">I prezzi sono basati su una tariffa oraria per istanza del gateway e una tariffa di elaborazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="3e362-238">Pricing is based on per hour gateway instance charge and data processing charge.</span></span> <span data-ttu-id="3e362-239">I prezzi orari del gateway per lo SKU del WAF sono diversi dalle tariffe dello SKU standard e sono indicati nella pagina relativa ai [dettagli sui prezzi del gateway applicazione](https://azure.microsoft.com/pricing/details/application-gateway/).</span><span class="sxs-lookup"><span data-stu-id="3e362-239">Per hour gateway pricing for WAF SKU is different from Standard SKU charges and can be found at [Application Gateway pricing details](https://azure.microsoft.com/pricing/details/application-gateway/).</span></span> <span data-ttu-id="3e362-240">Le tariffe di elaborazione dei dati rimangono invariate.</span><span class="sxs-lookup"><span data-stu-id="3e362-240">Data processing charges remain the same.</span></span> <span data-ttu-id="3e362-241">Non sono presenti tariffe per regola o gruppo di regole.</span><span class="sxs-lookup"><span data-stu-id="3e362-241">There is no per rule or rule group charges.</span></span> <span data-ttu-id="3e362-242">È possibile proteggere più applicazioni Web dietro lo stesso Web application firewall e non vengono applicati costi aggiuntivi per il supporto di più applicazioni.</span><span class="sxs-lookup"><span data-stu-id="3e362-242">You can protect multiple web applications behind the same web application firewall and there are no additional charges for supporting multiple applications.</span></span> 

<span data-ttu-id="3e362-243">La fatturazione per WAF entrerà in vigore il 5/5/2017, fino ad allora verranno applicate le tariffe standard per lo SKU del WAF.</span><span class="sxs-lookup"><span data-stu-id="3e362-243">Billing for WAF starts effectively 5/5/2017, until then the WAF SKU gateways continues to be charged at standard rates.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3e362-244">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="3e362-244">Next steps</span></span>

<span data-ttu-id="3e362-245">Dopo aver appreso altre informazioni sulle funzionalità di WAF, vedere [Come configurare Web application firewall nel gateway applicazione](application-gateway-web-application-firewall-portal.md).</span><span class="sxs-lookup"><span data-stu-id="3e362-245">After learning more about the capabilities of WAF, visit [How to configure web application firewall on Application Gateway](application-gateway-web-application-firewall-portal.md).</span></span>

