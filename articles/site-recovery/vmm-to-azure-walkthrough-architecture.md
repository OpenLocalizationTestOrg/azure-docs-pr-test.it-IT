---
title: Esaminare l'architettura della replica Hyper-V (con System Center VMM) in Azure con Azure Site Recovery | Microsoft Docs
description: Questo articolo offre una panoramica dei componenti e dell'architettura usati durante la replica in Azure di macchine virtuali Hyper-V locali presenti in cloud VMM con il servizio Azure Site Recovery.
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 07/24/2017
ms.author: raynew
ms.openlocfilehash: df4e227d02901153d3cfcfd4dfd4f11de180763a
ms.sourcegitcommit: 422efcbac5b6b68295064bd545132fcc98349d01
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/29/2017
---
# <a name="step-1-review-the-architecture"></a><span data-ttu-id="e1ca5-103">Passaggio 1: Esaminare l'architettura</span><span class="sxs-lookup"><span data-stu-id="e1ca5-103">Step 1: Review the architecture</span></span>


<span data-ttu-id="e1ca5-104">Questo articolo descrive i componenti e i processi usati durante la replica in Azure di macchine virtuali Hyper-V locali presenti in cloud System Center Virtual Machine Manager (VMM) tramite il servizio [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="e1ca5-104">This article describes the components and processes used when replicating on-premises Hyper-V virtual machines in System Center Virtual Machine Manager (VMM) clouds, to Azure using the [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="e1ca5-105">Per inviare commenti è possibile usare la parte inferiore di questo articolo oppure il [forum sui Servizi di ripristino di Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="e1ca5-105">Post any comments at the bottom of this article, or in the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>



## <a name="architectural-components"></a><span data-ttu-id="e1ca5-106">Componenti dell'architettura</span><span class="sxs-lookup"><span data-stu-id="e1ca5-106">Architectural components</span></span>

<span data-ttu-id="e1ca5-107">Sono diversi i componenti interessati dalla replica in Azure di macchine virtuali Hyper-V presenti in cloud VMM.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-107">There are a number of components involved when replicating Hyper-V VMs in VMM clouds to Azure.</span></span>

<span data-ttu-id="e1ca5-108">**Componente**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-108">**Component**</span></span> | <span data-ttu-id="e1ca5-109">**Requisito**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-109">**Requirement**</span></span> | <span data-ttu-id="e1ca5-110">**Dettagli**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-110">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="e1ca5-111">**Azzurro**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-111">**Azure**</span></span> | <span data-ttu-id="e1ca5-112">In Azure sono necessari un account Microsoft Azure, un account di archiviazione di Azure e una rete di Azure.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-112">In Azure you need a Microsoft Azure account, an Azure storage account, and a Azure network.</span></span> | <span data-ttu-id="e1ca5-113">I dati replicati vengono salvati nell'account di archiviazione e,quando si verifica un failover dal sito locale, vengono create VM di Azure con i dati replicati.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-113">Replicated data is stored in the storage account, and Azure VMs are created with the replicated data when failover from your on-premises site occurs.</span></span><br/><br/> <span data-ttu-id="e1ca5-114">Le VM di Azure si connettono alla rete virtuale di Azure quando vengono create.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-114">The Azure VMs connect to the Azure virtual network when they're created.</span></span>
<span data-ttu-id="e1ca5-115">**Server VMM**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-115">**VMM server**</span></span> | <span data-ttu-id="e1ca5-116">Il server VMM ha uno o più cloud contenenti host Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-116">The VMM server has one or more clouds containing Hyper-V hosts.</span></span> | <span data-ttu-id="e1ca5-117">Nel server VMM è necessario installare il provider di Site Recovery per orchestrare la replica con Site Recovery e registrare il server nell'insieme di credenziali di Servizi di ripristino.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-117">On the VMM server you install the Site Recovery Provider to orchestrate replication with Site Recovery, and register the server in the Recovery Services vault.</span></span>
<span data-ttu-id="e1ca5-118">**Host Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-118">**Hyper-V host**</span></span> | <span data-ttu-id="e1ca5-119">Uno o più host/cluster Hyper-V gestiti da VMM.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-119">One or more Hyper-V hosts/clusters managed by VMM.</span></span> |  <span data-ttu-id="e1ca5-120">L'agente di Servizi di ripristino viene installato in ogni host o membro del cluster.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-120">You install the Recovery Services agent on each host or cluster member.</span></span>
<span data-ttu-id="e1ca5-121">**VM Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-121">**Hyper-V VMs**</span></span> | <span data-ttu-id="e1ca5-122">Una o più macchine virtuali in esecuzione in un server host Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-122">One or VMs running on a Hyper-V host server.</span></span> | <span data-ttu-id="e1ca5-123">Non è necessario installare esplicitamente alcun componente nelle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-123">Nothing needs to explicitly installed on VMs.</span></span>
<span data-ttu-id="e1ca5-124">**Rete**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-124">**Networking**</span></span> |<span data-ttu-id="e1ca5-125">Reti VM e logiche configurate nel server VMM.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-125">Logical and VM networks set up on the VMM server.</span></span> <span data-ttu-id="e1ca5-126">È necessario che una rete VM sia collegata a una rete logica associata al cloud.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-126">A VM network should be linked to a logical network that's associated with the cloud.</span></span> | <span data-ttu-id="e1ca5-127">Le reti VM vengono mappate in reti virtuali di Azure, in modo che le macchine virtuali di Azure si trovino in una rete quando vengono create dopo il failover.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-127">VM networks are mapped to Azure virtual networks, so that Azure VMs are located in a network when they're created after failover.</span></span>

<span data-ttu-id="e1ca5-128">Informazioni sui prerequisiti di distribuzione e i requisiti per ognuno di questi componenti sono disponibili nella [matrice di supporto](site-recovery-support-matrix-to-azure.md).</span><span class="sxs-lookup"><span data-stu-id="e1ca5-128">Learn about the deployment prerequisites and requirements for each of these components in the [support matrix](site-recovery-support-matrix-to-azure.md).</span></span>


<span data-ttu-id="e1ca5-129">**Figura 1: Eseguire la replica in Azure di VM in host Hyper-V di cloud VMM**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-129">**Figure 1: Replicate VMs on Hyper-V hosts in VMM clouds to Azure**</span></span>

![Componenti](./media/vmm-to-azure-walkthrough-architecture/arch-onprem-onprem-azure-vmm.png)


## <a name="replication-process"></a><span data-ttu-id="e1ca5-131">Processo di replica</span><span class="sxs-lookup"><span data-stu-id="e1ca5-131">Replication process</span></span>

<span data-ttu-id="e1ca5-132">**Figura 2: Processo di replica e ripristino per la replica Hyper-V in Azure**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-132">**Figure 2: Replication and recovery process for Hyper-V replication to Azure**</span></span>

![flusso di lavoro](./media/vmm-to-azure-walkthrough-architecture/arch-hyperv-azure-workflow.png)

### <a name="enable-protection"></a><span data-ttu-id="e1ca5-134">Abilitare la protezione</span><span class="sxs-lookup"><span data-stu-id="e1ca5-134">Enable protection</span></span>

1. <span data-ttu-id="e1ca5-135">Dopo aver abilitato la protezione per una macchina virtuale Hyper-V, nel portale di Azure o in locale, viene avviato **Abilita protezione**.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-135">After you enable protection for a Hyper-V VM, in the Azure portal or on-premises, the **Enable protection** starts.</span></span>
2. <span data-ttu-id="e1ca5-136">Il processo controlla se il computer è conforme ai prerequisiti, prima di richiamare [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), per impostare la replica con le impostazioni configurate.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-136">The job checks that the machine complies with prerequisites, before invoking the [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), to set up replication with the settings you've configured.</span></span>
3. <span data-ttu-id="e1ca5-137">Il processo avvia la replica iniziale richiamando il metodo [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx), per inizializzare una replica della macchina virtuale completa e inviare i dischi virtuali della VM ad Azure.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-137">The job starts initial replication by invoking the [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) method, to initialize a full VM replication, and send the VM's virtual disks to Azure.</span></span>
4. <span data-ttu-id="e1ca5-138">Il processo può essere monitorato nella scheda **Processi**.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-138">You can monitor the job in the **Jobs** tab.</span></span>
        <span data-ttu-id="e1ca5-139">![Elenco dei processi](media/vmm-to-azure-walkthrough-architecture/image1.png) ![Abilitare protezione in dettaglio](media/vmm-to-azure-walkthrough-architecture/image2.png)</span><span class="sxs-lookup"><span data-stu-id="e1ca5-139">![Jobs list](media/vmm-to-azure-walkthrough-architecture/image1.png) ![Enable protection drill down](media/vmm-to-azure-walkthrough-architecture/image2.png)</span></span>

### <a name="replicate-the-initial-data"></a><span data-ttu-id="e1ca5-140">Replicare i dati iniziali</span><span class="sxs-lookup"><span data-stu-id="e1ca5-140">Replicate the initial data</span></span>

1. <span data-ttu-id="e1ca5-141">Quando viene attivata la replica iniziale, viene acquisito uno [snapshot della VM Hyper-V](https://technet.microsoft.com/library/dd560637.aspx).</span><span class="sxs-lookup"><span data-stu-id="e1ca5-141">A [Hyper-V VM snapshot](https://technet.microsoft.com/library/dd560637.aspx) snapshot is taken when initial replication is triggered.</span></span>
2. <span data-ttu-id="e1ca5-142">I dischi rigidi virtuali vengono replicati uno alla volta fino a quando non vengono copiati tutti in Azure.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-142">Virtual hard disks are replicated one by one until they're all copied to Azure.</span></span> <span data-ttu-id="e1ca5-143">L'operazione potrebbe richiedere alcuni minuti, a seconda delle dimensioni della macchina virtuale e della larghezza di banda di rete.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-143">It could take a while, depending on the VM size, and network bandwidth.</span></span> <span data-ttu-id="e1ca5-144">Per informazioni su come ottimizzare l'utilizzo della rete, vedere [How to manage on-premises to Azure protection network bandwidth usage](https://support.microsoft.com/kb/3056159)(Come gestire l'utilizzo della larghezza di banda di rete per la protezione da ambiente locale ad Azure).</span><span class="sxs-lookup"><span data-stu-id="e1ca5-144">To optimize your network usage, see [How to manage on-premises to Azure protection network bandwidth usage](https://support.microsoft.com/kb/3056159).</span></span>
3. <span data-ttu-id="e1ca5-145">Se vengono apportate modifiche al disco mentre è in corso la replica iniziale, la gestione delle repliche di Hyper-V tiene traccia delle modifiche sotto forma di log di replica di Hyper-V (con estensione hrl).</span><span class="sxs-lookup"><span data-stu-id="e1ca5-145">If disk changes occur while initial replication is in progress, the Hyper-V Replica Replication Tracker tracks those changes as Hyper-V Replication Logs (.hrl).</span></span> <span data-ttu-id="e1ca5-146">Questi file si trovano nella stessa cartella dei dischi.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-146">These files are located in the same folder as the disks.</span></span> <span data-ttu-id="e1ca5-147">A ogni disco è associato un file con estensione hrl, che verrà inviato alla risorsa di archiviazione secondaria.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-147">Each disk has an associated .hrl file that will be sent to secondary storage.</span></span>
4. <span data-ttu-id="e1ca5-148">Si noti che lo snapshot e i file di log usano risorse del disco durante l'esecuzione della replica iniziale.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-148">The snapshot and log files consume disk resources while initial replication is in progress.</span></span>
5. <span data-ttu-id="e1ca5-149">Al termine della replica iniziale, lo snapshot della macchina virtuale viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-149">When the initial replication finishes, the VM snapshot is deleted.</span></span> <span data-ttu-id="e1ca5-150">Nel log le modifiche differenziali al disco vengono sincronizzate e unite al disco padre.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-150">Delta disk changes in the log are synchronized and merged to the parent disk.</span></span>


### <a name="finalize-protection"></a><span data-ttu-id="e1ca5-151">Finalizzare la protezione</span><span class="sxs-lookup"><span data-stu-id="e1ca5-151">Finalize protection</span></span>

1. <span data-ttu-id="e1ca5-152">Al termine della replica iniziale, il processo **Finalizza la protezione nella macchina virtuale** configura la rete e altre impostazioni successive alla replica, in modo che la macchina virtuale sia protetta.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-152">After the initial replication finishes, the **Finalize protection on the virtual machine** job configures network and other post-replication settings, so that the virtual machine is protected.</span></span>
    <span data-ttu-id="e1ca5-153">![Processo Finalizza la protezione](media/vmm-to-azure-walkthrough-architecture/image3.png)</span><span class="sxs-lookup"><span data-stu-id="e1ca5-153">![Finalize protection job](media/vmm-to-azure-walkthrough-architecture/image3.png)</span></span>
2. <span data-ttu-id="e1ca5-154">Se si esegue la replica in Azure, potrebbe essere necessario modificare le impostazioni della macchina virtuale in modo che sia pronta per il failover.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-154">If you're replicating to Azure, you might need to tweak the settings for the virtual machine so that it's ready for failover.</span></span> <span data-ttu-id="e1ca5-155">A questo punto è possibile eseguire un failover di test per controllare che tutto funzioni come previsto.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-155">At this point you can run a test failover to check everything is working as expected.</span></span>

### <a name="replicate-the-delta"></a><span data-ttu-id="e1ca5-156">Replicare il differenziale</span><span class="sxs-lookup"><span data-stu-id="e1ca5-156">Replicate the delta</span></span>

1. <span data-ttu-id="e1ca5-157">Dopo la replica iniziale, viene avviata la sincronizzazione differenziale in base alle impostazioni della replica.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-157">After the initial replication, delta synchronization begins, in accordance with replication settings.</span></span>
2. <span data-ttu-id="e1ca5-158">La gestione delle repliche di Hyper-V tiene traccia delle modifiche in un disco rigido virtuale sotto forma di file con estensione hrl.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-158">The Hyper-V Replica Replication Tracker tracks the changes to a virtual hard disk as .hrl files.</span></span> <span data-ttu-id="e1ca5-159">A ogni disco configurato per la replica è associato un file con estensione hrl.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-159">Each disk that's configured for replication has an associated .hrl file.</span></span> <span data-ttu-id="e1ca5-160">I log vengono inviati all'account di archiviazione del cliente al termine della replica iniziale.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-160">This log is sent to the customer's storage account after initial replication is complete.</span></span> <span data-ttu-id="e1ca5-161">Quando un log è in transito verso Azure, le modifiche nel disco primario vengono registrate in un altro file di log nella stessa directory.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-161">When a log is in transit to Azure, the changes in the primary disk are tracked in another log file, in the same directory.</span></span>
3. <span data-ttu-id="e1ca5-162">Durante la replica iniziale e differenziale, è possibile monitorare la macchina virtuale nella relativa visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-162">During initial and delta replication, you can monitor the VM in the VM view.</span></span> <span data-ttu-id="e1ca5-163">[Altre informazioni](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="e1ca5-163">[Learn more](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span></span>  

### <a name="synchronize-replication"></a><span data-ttu-id="e1ca5-164">Sincronizzare la replica</span><span class="sxs-lookup"><span data-stu-id="e1ca5-164">Synchronize replication</span></span>

1. <span data-ttu-id="e1ca5-165">Se la replica differenziale non riesce e una replica completa risulta costosa a livello di larghezza di banda o di tempo richiesto, la macchina virtuale verrà contrassegnata per la risincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-165">If delta replication fails, and a full replication would be costly in terms of bandwidth or time, then a VM is marked for resynchronization.</span></span> <span data-ttu-id="e1ca5-166">Ad esempio, se i file con estensione hrl raggiungono il 50% delle dimensioni del disco, la macchina virtuale verrà contrassegnata per la risincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-166">For example, if the .hrl files reach 50% of the disk size, then the VM will be marked for resynchronization.</span></span>
2.  <span data-ttu-id="e1ca5-167">La risincronizzazione riduce al minimo la quantità di dati inviati calcolando i checksum delle macchine virtuali di origine e di destinazione e inviando solo i dati relativi al differenziale.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-167">Resynchronization minimizes the amount of data sent by computing checksums of the source and target virtual machines, and sending only the delta data.</span></span> <span data-ttu-id="e1ca5-168">La risincronizzazione usa un algoritmo di suddivisione in blocchi a blocchi fissi che suddivide appunto i file di origine e di destinazione in blocchi fissi.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-168">Resynchronization uses a fixed-block chunking algorithm where source and target files are divided into fixed chunks.</span></span> <span data-ttu-id="e1ca5-169">I checksum per ogni blocco vengono generati e messi a confronto per determinare quali blocchi dell'origine devono essere applicati alla destinazione.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-169">Checksums for each chunk are generated and then compared to determine which blocks from the source need to be applied to the target.</span></span>
3. <span data-ttu-id="e1ca5-170">Al termine della risincronizzazione, dovrebbe riprendere la normale replica differenziale.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-170">After resynchronization finishes, normal delta replication should resume.</span></span> <span data-ttu-id="e1ca5-171">Per impostazione predefinita, la risincronizzazione è pianificata per l'esecuzione automatica negli orari non lavorativi, ma è possibile risincronizzare manualmente una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-171">By default resynchronization is scheduled to run automatically outside office hours, but you can resynchronize a virtual machine manually.</span></span> <span data-ttu-id="e1ca5-172">Ad esempio, se si verifica un'interruzione di rete o un'altra interruzione, è possibile riprendere la risincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-172">For example, you can resume resynchronization if a network outage or another outage occurs.</span></span> <span data-ttu-id="e1ca5-173">A tale scopo, selezionare la macchina virtuale nel portale > **Risincronizza**.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-173">To do this, select the VM in the portal > **Resynchronize**.</span></span>

    ![Risincronizzazione manuale](media/vmm-to-azure-walkthrough-architecture/image4.png)


### <a name="retry-logic"></a><span data-ttu-id="e1ca5-175">Logica di retry</span><span class="sxs-lookup"><span data-stu-id="e1ca5-175">Retry logic</span></span>

<span data-ttu-id="e1ca5-176">Se si verifica un errore di replica, per impostazione predefinita viene effettuato un nuovo tentativo.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-176">If a replication error occurs, there's a built-in retry.</span></span> <span data-ttu-id="e1ca5-177">Tale logica può essere classificata nelle due categorie seguenti:</span><span class="sxs-lookup"><span data-stu-id="e1ca5-177">This logic can be classified into two categories:</span></span>

<span data-ttu-id="e1ca5-178">**Categoria**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-178">**Category**</span></span> | <span data-ttu-id="e1ca5-179">**Dettagli**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-179">**Details**</span></span>
--- | ---
<span data-ttu-id="e1ca5-180">**Errori irreversibili**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-180">**Non-recoverable errors**</span></span> | <span data-ttu-id="e1ca5-181">Non viene eseguito alcun nuovo tentativo.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-181">No retry is attempted.</span></span> <span data-ttu-id="e1ca5-182">Lo stato della macchina virtuale sarà **Critico** e sarà necessario l'intervento di un amministratore.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-182">VM status will be **Critical**, and administrator intervention is required.</span></span> <span data-ttu-id="e1ca5-183">Esempi di questi errori includono: catena VHD interrotta, stato non valido per la macchina virtuale di replica, errori di autenticazione di rete: errori di autorizzazione, errori di macchina virtuale non trovata (per i server Hyper-V autonomi).</span><span class="sxs-lookup"><span data-stu-id="e1ca5-183">Examples of these errors include: broken VHD chain; Invalid state for the replica VM; Network authentication errors: authorization errors; VM not found errors (for standalone Hyper-V servers)</span></span>
<span data-ttu-id="e1ca5-184">**Errori reversibili**</span><span class="sxs-lookup"><span data-stu-id="e1ca5-184">**Recoverable errors**</span></span> | <span data-ttu-id="e1ca5-185">Vengono eseguiti nuovi tentativi durante ogni intervallo di replica usando un backoff esponenziale che permette di aumentare l'intervallo tra i tentativi dall'inizio del primo tentativo di 1, 2, 4, 8 e 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-185">Retries occur every replication interval, using an exponential back-off that increases the retry interval from the start of the first attempt by 1, 2, 4, 8, and 10 minutes.</span></span> <span data-ttu-id="e1ca5-186">Se l'errore persiste, viene eseguito un nuovo tentativo ogni 30 minuti.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-186">If an error persists, retry every 30 minutes.</span></span> <span data-ttu-id="e1ca5-187">Alcuni esempi: errori di rete, errori di spazio su disco insufficiente, condizioni di memoria insufficiente.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-187">Examples include: network errors; low disk  errors; low memory conditions</span></span> |



## <a name="failover-and-failback-process"></a><span data-ttu-id="e1ca5-188">Processo di failover e failback</span><span class="sxs-lookup"><span data-stu-id="e1ca5-188">Failover and failback process</span></span>

1. <span data-ttu-id="e1ca5-189">È possibile eseguire un [failover](site-recovery-failover.md) pianificato o non pianificato dalle VM Hyper-V locali ad Azure.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-189">You can run a planned or unplanned [failover](site-recovery-failover.md) from on-premises Hyper-V VMs to Azure.</span></span> <span data-ttu-id="e1ca5-190">Se si esegue un failover pianificato, le macchine virtuali di origine vengono arrestate per assicurare che non si verifichino perdite di dati.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-190">If you run a planned failover, then source VMs are shut down to ensure no data loss.</span></span>
2. <span data-ttu-id="e1ca5-191">È possibile effettuare il failover di un solo computer o creare [piani di ripristino](site-recovery-create-recovery-plans.md) per orchestrare il failover di più computer.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-191">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md) to orchestrate failover of multiple machines.</span></span>
4. <span data-ttu-id="e1ca5-192">Dopo avere eseguito il failover, le VM di replica create verranno visualizzate in Azure.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-192">After you run the failover, you should be able to see the created replica VMs in Azure.</span></span> <span data-ttu-id="e1ca5-193">È possibile assegnare un indirizzo IP pubblico alla VM, se necessario.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-193">You can assign a public IP address to the VM if required.</span></span>
5. <span data-ttu-id="e1ca5-194">Si esegue quindi il commit del failover per avviare l'accesso al carico di lavoro dalla VM di Azure di replica.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-194">You then commit the failover to start accessing the workload from the replica Azure VM.</span></span>
6. <span data-ttu-id="e1ca5-195">Quando il sito locale primario è di nuovo disponibile, è possibile [effettuare il failback](site-recovery-failback-from-azure-to-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="e1ca5-195">When your primary on-premises site is available again, you can [fail back](site-recovery-failback-from-azure-to-hyper-v.md).</span></span> <span data-ttu-id="e1ca5-196">Si avvia un failover pianificato da Azure al sito primario.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-196">You kick off a planned failover from Azure to the primary site.</span></span> <span data-ttu-id="e1ca5-197">Per un failover pianificato è possibile scegliere di effettuare il failback nella stessa VM o in una posizione alternativa e di sincronizzare le modifiche tra Azure e l'ambiente locale, per evitare perdite di dati.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-197">For a planned failover you can select to failback to the same VM or to an alternate location, and synchronize changes between Azure and on-premises, to ensure no data loss.</span></span> <span data-ttu-id="e1ca5-198">Quando le VMs vengono create in locale, si esegue il commit del failover.</span><span class="sxs-lookup"><span data-stu-id="e1ca5-198">When VMs are created on-premises, you commit the failover.</span></span>




## <a name="next-steps"></a><span data-ttu-id="e1ca5-199">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="e1ca5-199">Next steps</span></span>

<span data-ttu-id="e1ca5-200">Passare a [Step 2: Review the deployment prerequisites](vmm-to-azure-walkthrough-prerequisites.md) (Passaggio 2: Esaminare i prerequisiti della distribuzione)</span><span class="sxs-lookup"><span data-stu-id="e1ca5-200">Go to [Step 2: Review the deployment prerequisites](vmm-to-azure-walkthrough-prerequisites.md)</span></span>
