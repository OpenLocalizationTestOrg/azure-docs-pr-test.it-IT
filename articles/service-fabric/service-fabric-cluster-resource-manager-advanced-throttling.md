---
title: in Gestione risorse del cluster di Service Fabric hello aaaThrottling | Documenti Microsoft
description: Informazioni su limitazioni hello tooconfigure fornite dal servizio di gestione delle risorse Cluster dell'infrastruttura di hello.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 4a44678b-a5aa-4d30-958f-dc4332ebfb63
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: f418536911d3e3814e78a4d9f057dfb867ca7c63
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="throttling-hello-service-fabric-cluster-resource-manager"></a><span data-ttu-id="739ea-103">La limitazione delle richieste di servizio di gestione delle risorse Cluster dell'infrastruttura di hello</span><span class="sxs-lookup"><span data-stu-id="739ea-103">Throttling hello Service Fabric Cluster Resource Manager</span></span>
<span data-ttu-id="739ea-104">Anche se hai configurato la gestione delle risorse Cluster hello correttamente, è possibile ottenere interrotte cluster hello.</span><span class="sxs-lookup"><span data-stu-id="739ea-104">Even if you’ve configured hello Cluster Resource Manager correctly, hello cluster can get disrupted.</span></span> <span data-ttu-id="739ea-105">Ad esempio, potrebbe essere nodo e errore di dominio errori simultanei - che cosa accadrebbe se che si è verificato durante l'aggiornamento? Gestione delle risorse Cluster Hello tenta sempre toofix tutto, risorse del cluster hello tentativo tooreorganize e correzione di cluster hello.</span><span class="sxs-lookup"><span data-stu-id="739ea-105">For example, there could be simultaneous node and fault domain failures - what would happen if that occurred during an upgrade? hello Cluster Resource Manager always tries toofix everything, consuming hello cluster's resources trying tooreorganize and fix hello cluster.</span></span> <span data-ttu-id="739ea-106">Le limitazioni forniscono una barriera in modo che il cluster hello può utilizzare risorse toostabilize - nodi hello passerà nuovamente, le partizioni di rete hello di correzione, vengono distribuiti i bit corretti.</span><span class="sxs-lookup"><span data-stu-id="739ea-106">Throttles help provide a backstop so that hello cluster can use resources toostabilize - hello nodes come back, hello network partitions heal, corrected bits get deployed.</span></span>

<span data-ttu-id="739ea-107">toohelp con questi tipi di situazioni, hello gestione delle risorse Cluster dell'infrastruttura del servizio include numerose limitazioni.</span><span class="sxs-lookup"><span data-stu-id="739ea-107">toohelp with these sorts of situations, hello Service Fabric Cluster Resource Manager includes several throttles.</span></span> <span data-ttu-id="739ea-108">Queste limitazioni intervengono tutte in modo piuttosto pesante.</span><span class="sxs-lookup"><span data-stu-id="739ea-108">These throttles are all fairly large hammers.</span></span> <span data-ttu-id="739ea-109">In genere non devono essere modificate senza una pianificazione e un test accurati.</span><span class="sxs-lookup"><span data-stu-id="739ea-109">Generally they shouldn’t be changed without careful planning and testing.</span></span>

<span data-ttu-id="739ea-110">Se si modificano le limitazioni di gestione risorse del Cluster di hello, è consigliabile ottimizzarla li tooyour carico effettivo.</span><span class="sxs-lookup"><span data-stu-id="739ea-110">If you change hello Cluster Resource Manager's throttles, you should tune them tooyour expected actual load.</span></span> <span data-ttu-id="739ea-111">È possibile determinare che toohave alcune limita sul posto, è necessario anche se questo comporta cluster hello accetta più toostabilize in alcune situazioni.</span><span class="sxs-lookup"><span data-stu-id="739ea-111">You may determine you need toohave some throttles in place, even if it means hello cluster takes longer toostabilize in some situations.</span></span> <span data-ttu-id="739ea-112">Il test è obbligatorio toodetermine hello i valori corretti per le limitazioni.</span><span class="sxs-lookup"><span data-stu-id="739ea-112">Testing is required toodetermine hello correct values for throttles.</span></span> <span data-ttu-id="739ea-113">Le limitazioni necessario toobe tooallow sufficientemente elevato hello cluster toorespond toochanges in un intervallo di tempo ragionevole, e basso sufficiente tooactually impedire eccessivo consumo di risorse.</span><span class="sxs-lookup"><span data-stu-id="739ea-113">Throttles need toobe high enough tooallow hello cluster toorespond toochanges in a reasonable amount of time, and low enough tooactually prevent too much resource consumption.</span></span> 

<span data-ttu-id="739ea-114">La maggior parte del tempo di hello che clienti abbiamo visto utilizzare velocità che è stato in quanto sono già in un ambiente vincolato di risorse.</span><span class="sxs-lookup"><span data-stu-id="739ea-114">Most of hello time we’ve seen customers use throttles it has been because they were already in a resource constrained environment.</span></span> <span data-ttu-id="739ea-115">Alcuni esempi possono essere di larghezza di banda di rete limitata per singoli nodi, o i dischi che non sono in grado di toobuild numero di repliche con stato in parallelo a causa di limitazioni toothroughput.</span><span class="sxs-lookup"><span data-stu-id="739ea-115">Some examples would be limited network bandwidth for individual nodes, or disks that aren't able toobuild many stateful replicas in parallel due toothroughput limitations.</span></span> <span data-ttu-id="739ea-116">Senza limitazioni, le operazioni Impossibile sovraccarico queste risorse, a causa di operazioni toofail o lenta.</span><span class="sxs-lookup"><span data-stu-id="739ea-116">Without throttles, operations could overwhelm these resources, causing operations toofail or be slow.</span></span> <span data-ttu-id="739ea-117">In questi casi i clienti utilizzato le limitazioni e informata che sono stati estendendo quantità hello di tempo impiegata hello cluster tooreach uno stato stabile.</span><span class="sxs-lookup"><span data-stu-id="739ea-117">In these situations customers used throttles and knew they were extending hello amount of time it would take hello cluster tooreach a stable state.</span></span> <span data-ttu-id="739ea-118">I clienti inoltre hanno compreso anche che il livello complessivo di affidabilità era inferiore in presenza di limitazioni.</span><span class="sxs-lookup"><span data-stu-id="739ea-118">Customers also understood they could end up running at lower overall reliability while they were throttled.</span></span>


## <a name="configuring-hello-throttles"></a><span data-ttu-id="739ea-119">Configurare le limitazioni di hello</span><span class="sxs-lookup"><span data-stu-id="739ea-119">Configuring hello throttles</span></span>

<span data-ttu-id="739ea-120">Service Fabric sono disponibili due meccanismi per la limitazione del numero di hello di spostamenti di tipo di replica.</span><span class="sxs-lookup"><span data-stu-id="739ea-120">Service Fabric has two mechanisms for throttling hello number of replica movements.</span></span> <span data-ttu-id="739ea-121">meccanismo predefinito di Hello che esistevano prima di Service Fabric 5.7 rappresenta la limitazione delle richieste come numero assoluto degli spostamenti è consentito.</span><span class="sxs-lookup"><span data-stu-id="739ea-121">hello default mechanism that existed before Service Fabric 5.7 represents throttling as an absolute number of moves allowed.</span></span> <span data-ttu-id="739ea-122">Non funziona per i cluster di tutte le dimensioni.</span><span class="sxs-lookup"><span data-stu-id="739ea-122">This does not work for clusters of all sizes.</span></span> <span data-ttu-id="739ea-123">In particolare, per impostazione predefinita di cluster di grandi dimensioni hello valore può essere troppo piccolo, rallentare notevolmente bilanciamento del carico anche quando è necessario, con un impatto non in cluster più piccoli.</span><span class="sxs-lookup"><span data-stu-id="739ea-123">In particular, for large clusters hello default value can be too small, significantly slowing down balancing even when it is necessary, while having no effect in smaller clusters.</span></span> <span data-ttu-id="739ea-124">Questo meccanismo precedente è stato sostituito dalla limitazione basata sulla percentuale, che offre una maggiore scalabilità con i cluster dinamici in quale numero di hello di servizi e i nodi modificare regolarmente.</span><span class="sxs-lookup"><span data-stu-id="739ea-124">This prior mechanism has been superseded by percentage-based throttling, which scales better with dynamic clusters in which hello number of services and nodes change regularly.</span></span>

<span data-ttu-id="739ea-125">le limitazioni di Hello sono basate su una percentuale del numero di hello di repliche in cluster hello.</span><span class="sxs-lookup"><span data-stu-id="739ea-125">hello throttles are based on a percentage of hello number of replicas in hello clusters.</span></span> <span data-ttu-id="739ea-126">Le limitazioni di base Percetage abilitare esprimere regola hello: "non si spostano più del 10% di repliche in un intervallo di 10 minuti", ad esempio.</span><span class="sxs-lookup"><span data-stu-id="739ea-126">Percetage based throttles enable expressing hello rule: "do not move more than 10% of replicas in a 10 minute interval", for example.</span></span>

<span data-ttu-id="739ea-127">impostazioni di configurazione Hello per la limitazione basata sulla percentuale sono:</span><span class="sxs-lookup"><span data-stu-id="739ea-127">hello configuration settings for percentage-based throttling are:</span></span>

  - <span data-ttu-id="739ea-128">GlobalMovementThrottleThresholdPercentage - numero massimo di spostamenti di tipo consentito nel cluster in qualsiasi momento, espresso come percentuale del numero massimo di repliche cluster hello.</span><span class="sxs-lookup"><span data-stu-id="739ea-128">GlobalMovementThrottleThresholdPercentage - Maximum number of movements allowed in cluster at any time, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="739ea-129">Impostarlo su 0 per non avere limiti.</span><span class="sxs-lookup"><span data-stu-id="739ea-129">0 indicates no limit.</span></span> <span data-ttu-id="739ea-130">valore predefinito di Hello è 0.</span><span class="sxs-lookup"><span data-stu-id="739ea-130">hello default value is 0.</span></span> <span data-ttu-id="739ea-131">Se questa impostazione e GlobalMovementThrottleThreshold vengono specificati, quindi hello limite più attento viene utilizzato.</span><span class="sxs-lookup"><span data-stu-id="739ea-131">If both this setting and GlobalMovementThrottleThreshold are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="739ea-132">GlobalMovementThrottleThresholdPercentageForPlacement - numero massimo di spostamenti di tipo consentito nella fase hello posizione, espressa come percentuale del numero totale di repliche cluster hello.</span><span class="sxs-lookup"><span data-stu-id="739ea-132">GlobalMovementThrottleThresholdPercentageForPlacement - Maximum number of movements allowed during hello placement phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="739ea-133">Impostarlo su 0 per non avere limiti.</span><span class="sxs-lookup"><span data-stu-id="739ea-133">0 indicates no limit.</span></span> <span data-ttu-id="739ea-134">valore predefinito di Hello è 0.</span><span class="sxs-lookup"><span data-stu-id="739ea-134">hello default value is 0.</span></span> <span data-ttu-id="739ea-135">Se questa impostazione e GlobalMovementThrottleThresholdForPlacement vengono specificati, quindi hello limite più attento viene utilizzato.</span><span class="sxs-lookup"><span data-stu-id="739ea-135">If both this setting and GlobalMovementThrottleThresholdForPlacement are specified, then hello more conservative limit is used.</span></span>
  - <span data-ttu-id="739ea-136">GlobalMovementThrottleThresholdPercentageForBalancing - numero massimo di spostamenti di tipo durante la fase, espressa come percentuale del numero totale di repliche cluster hello di bilanciamento del carico hello è consentito.</span><span class="sxs-lookup"><span data-stu-id="739ea-136">GlobalMovementThrottleThresholdPercentageForBalancing - Maximum number of movements allowed during hello balancing phase, expressed as percentage of total number of replicas in hello cluster.</span></span> <span data-ttu-id="739ea-137">Impostarlo su 0 per non avere limiti.</span><span class="sxs-lookup"><span data-stu-id="739ea-137">0 indicates no limit.</span></span> <span data-ttu-id="739ea-138">valore predefinito di Hello è 0.</span><span class="sxs-lookup"><span data-stu-id="739ea-138">hello default value is 0.</span></span> <span data-ttu-id="739ea-139">Se questa impostazione e GlobalMovementThrottleThresholdForBalancing vengono specificati, quindi hello limite più attento viene utilizzato.</span><span class="sxs-lookup"><span data-stu-id="739ea-139">If both this setting and GlobalMovementThrottleThresholdForBalancing are specified, then hello more conservative limit is used.</span></span>

<span data-ttu-id="739ea-140">Quando si specifica la percentuale di accelerazione hello, è necessario specificare % 5 come 0,05.</span><span class="sxs-lookup"><span data-stu-id="739ea-140">When specifying hello throttle percentage, you'd specify 5% as 0.05.</span></span> <span data-ttu-id="739ea-141">intervallo di Hello in cui vengono gestite queste limitazioni è hello GlobalMovementThrottleCountingInterval, che è espresso in secondi.</span><span class="sxs-lookup"><span data-stu-id="739ea-141">hello interval on which these throttles are governed is hello GlobalMovementThrottleCountingInterval, which is specified in seconds.</span></span>


``` xml
<Section Name="PlacementAndLoadBalancing">
     <Parameter Name="GlobalMovementThrottleThresholdPercentage" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForPlacement" Value="0" />
     <Parameter Name="GlobalMovementThrottleThresholdPercentageForBalancing" Value="0" />
     <Parameter Name="GlobalMovementThrottleCountingInterval" Value="600" />
</Section>
```

<span data-ttu-id="739ea-142">mediante ClusterConfig.json per le distribuzioni autonome o Template.json per i cluster ospitati in Azure:</span><span class="sxs-lookup"><span data-stu-id="739ea-142">via ClusterConfig.json for Standalone deployments or Template.json for Azure hosted clusters:</span></span>

```json
"fabricSettings": [
  {
    "name": "PlacementAndLoadBalancing",
    "parameters": [
      {
          "name": "GlobalMovementThrottleThresholdPercentage",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForPlacement",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleThresholdPercentageForBalancing",
          "value": "0.0"
      },
      {
          "name": "GlobalMovementThrottleCountingInterval",
          "value": "600"
      }
    ]
  }
]
```

### <a name="default-count-based-throttles"></a><span data-ttu-id="739ea-143">Limitazioni basate sul conteggio predefinito</span><span class="sxs-lookup"><span data-stu-id="739ea-143">Default count based throttles</span></span>
<span data-ttu-id="739ea-144">Queste informazioni vengono fornite nel caso in cui si disponga di cluster precedenti o si mantengano queste configurazioni in cluster che sono quindi stati aggiornati.</span><span class="sxs-lookup"><span data-stu-id="739ea-144">This information is provided in case you have older clusters or still retain these configurations in clusters that have since been upgraded.</span></span> <span data-ttu-id="739ea-145">In generale, è consigliabile che queste ultime vengono sostituite con hello basate su percentuale le limitazioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="739ea-145">In general, it is recommended that these are replaced with hello percentage-based throttles above.</span></span> <span data-ttu-id="739ea-146">Poiché la limitazione basata sulla percentuale è disabilitata per impostazione predefinita, queste limitazioni rimangono le limitazioni di hello predefinito per un cluster finché non vengono disabilitati e sostituiti con le limitazioni di hello basata sulla percentuale.</span><span class="sxs-lookup"><span data-stu-id="739ea-146">Since percentage-based throttling is disabled by default, these throttles remain hello default throttles for a cluster until they are disabled and replaced with hello percentage-based throttles.</span></span> 

  - <span data-ttu-id="739ea-147">GlobalMovementThrottleThreshold: questa impostazione controlla il numero totale di hello di spostamenti di tipo cluster hello su tempo.</span><span class="sxs-lookup"><span data-stu-id="739ea-147">GlobalMovementThrottleThreshold – this setting controls hello total number of movements in hello cluster over some time.</span></span> <span data-ttu-id="739ea-148">tempo totale di Hello è espresso in secondi come hello GlobalMovementThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="739ea-148">hello amount of time is specified in seconds as hello GlobalMovementThrottleCountingInterval.</span></span> <span data-ttu-id="739ea-149">il valore predefinito Hello per hello GlobalMovementThrottleThreshold è 1000 e il valore predefinito hello per hello GlobalMovementThrottleCountingInterval è 600.</span><span class="sxs-lookup"><span data-stu-id="739ea-149">hello default value for hello GlobalMovementThrottleThreshold is 1000 and hello default value for hello GlobalMovementThrottleCountingInterval is 600.</span></span>
  - <span data-ttu-id="739ea-150">MovementPerPartitionThrottleThreshold: questa impostazione controlla il numero totale di hello di spostamenti di tipo per ogni partizione del servizio su tempo.</span><span class="sxs-lookup"><span data-stu-id="739ea-150">MovementPerPartitionThrottleThreshold – this setting controls hello total number of movements for any service partition over some time.</span></span> <span data-ttu-id="739ea-151">tempo totale di Hello è espresso in secondi come hello MovementPerPartitionThrottleCountingInterval.</span><span class="sxs-lookup"><span data-stu-id="739ea-151">hello amount of time is specified in seconds as hello MovementPerPartitionThrottleCountingInterval.</span></span> <span data-ttu-id="739ea-152">il valore predefinito Hello per hello MovementPerPartitionThrottleThreshold è 50 e il valore predefinito hello per hello MovementPerPartitionThrottleCountingInterval è 600.</span><span class="sxs-lookup"><span data-stu-id="739ea-152">hello default value for hello MovementPerPartitionThrottleThreshold is 50 and hello default value for hello MovementPerPartitionThrottleCountingInterval is 600.</span></span>

<span data-ttu-id="739ea-153">configurazione di Hello per queste limitazioni segue hello stesso schema come la limitazione basata sulla percentuale di hello.</span><span class="sxs-lookup"><span data-stu-id="739ea-153">hello configuration for these throttles follows hello same pattern as hello percentage-based throttling.</span></span>

## <a name="next-steps"></a><span data-ttu-id="739ea-154">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="739ea-154">Next steps</span></span>
- <span data-ttu-id="739ea-155">toofind out sulla modalità di gestione delle risorse Cluster hello gestisce e bilancia il carico nel cluster hello, controllare l'articolo hello [bilanciamento del carico](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="739ea-155">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="739ea-156">Hello gestione delle risorse Cluster dispone di numerose opzioni per la descrizione del cluster di hello.</span><span class="sxs-lookup"><span data-stu-id="739ea-156">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="739ea-157">toofind ulteriori informazioni, consultare questo articolo in [che descrive un cluster di Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="739ea-157">toofind out more about them, check out this article on [describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
