---
title: dischi aaaExclude dalla protezione dati con Azure Site Recovery | Documenti Microsoft
description: "Viene descritto come e perché tooexclude VM dischi dalla replica per gli scenari di VMware tooAzure e tooAzure Hyper-V."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: garavd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 06/05/2017
ms.author: nisoneji
ms.openlocfilehash: f47146bc57aeab3fce90123d0894fa86dde93417
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="exclude-disks-from-replication"></a><span data-ttu-id="e79b6-103">Escludere dischi dalla replica</span><span class="sxs-lookup"><span data-stu-id="e79b6-103">Exclude disks from replication</span></span>
<span data-ttu-id="e79b6-104">In questo articolo viene descritto come tooexclude dischi dalla replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-104">This article describes how tooexclude disks from replication.</span></span> <span data-ttu-id="e79b6-105">Questa esclusione può ottimizzare la larghezza di banda replica hello utilizzato o ottimizzare le risorse sul lato destinazione hello che utilizzano tali dischi.</span><span class="sxs-lookup"><span data-stu-id="e79b6-105">This exclusion can optimize hello consumed replication bandwidth or optimize hello target-side resources that such disks utilize.</span></span> <span data-ttu-id="e79b6-106">funzionalità di Hello è supportato per scenari di VMware tooAzure e tooAzure Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="e79b6-106">hello feature is supported for scenarios of VMware tooAzure and Hyper-V tooAzure.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="e79b6-107">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="e79b6-107">Prerequisites</span></span>

<span data-ttu-id="e79b6-108">Per impostazione predefinita, vengono replicati tutti i dischi presenti in un computer.</span><span class="sxs-lookup"><span data-stu-id="e79b6-108">By default, all disks on a machine are replicated.</span></span> <span data-ttu-id="e79b6-109">tooexclude un disco dalla replica, è necessario installare manualmente hello servizio di mobilità nel computer di hello prima di abilitare la replica se si esegue la replica da tooAzure VMware.</span><span class="sxs-lookup"><span data-stu-id="e79b6-109">tooexclude a disk from replication, you must manually install hello Mobility service on hello machine before you enable replication if you are replicating from VMware tooAzure.</span></span>


## <a name="why-exclude-disks-from-replication"></a><span data-ttu-id="e79b6-110">Perché escludere dischi dalla replica</span><span class="sxs-lookup"><span data-stu-id="e79b6-110">Why exclude disks from replication?</span></span>
<span data-ttu-id="e79b6-111">Spesso è necessario escludere dischi dalla replica per i motivi riportati di seguito:</span><span class="sxs-lookup"><span data-stu-id="e79b6-111">Excluding disks from replication is often necessary because:</span></span>

- <span data-ttu-id="e79b6-112">dati Hello sono variati sul disco hello escluso non siano importanti o non è necessario toobe replicati.</span><span class="sxs-lookup"><span data-stu-id="e79b6-112">hello data that's churned on hello excluded disk is not important or doesn’t need toobe replicated.</span></span>

- <span data-ttu-id="e79b6-113">Si desidera le risorse di archiviazione e rete toosave replicando non questa varianza.</span><span class="sxs-lookup"><span data-stu-id="e79b6-113">You want toosave storage and network resources by not replicating this churn.</span></span>

## <a name="what-are-hello-typical-scenarios"></a><span data-ttu-id="e79b6-114">Quali sono gli scenari tipici di hello?</span><span class="sxs-lookup"><span data-stu-id="e79b6-114">What are hello typical scenarios?</span></span>
<span data-ttu-id="e79b6-115">È possibile identificare alcuni esempi specifici di varianza dei dati particolarmente adatti all'esclusione,</span><span class="sxs-lookup"><span data-stu-id="e79b6-115">You can identify specific examples of data churn that are great candidates for exclusion.</span></span> <span data-ttu-id="e79b6-116">Esempi possono essere scrive file di paging tooa (pagefile.sys) e file di tempdb toohello di Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="e79b6-116">Examples might include writes tooa paging file (pagefile.sys) and writes toohello tempdb file of Microsoft SQL Server.</span></span> <span data-ttu-id="e79b6-117">A seconda del carico di lavoro hello e sottosistema di archiviazione hello, file di paging hello può registrare una quantità significativa di varianza.</span><span class="sxs-lookup"><span data-stu-id="e79b6-117">Depending on hello workload and hello storage subsystem, hello paging file can register a significant amount of churn.</span></span> <span data-ttu-id="e79b6-118">Tuttavia, la replica di dati da hello sito primario tooAzure sarebbe molte risorse.</span><span class="sxs-lookup"><span data-stu-id="e79b6-118">However, replicating this data from hello primary site tooAzure would be resource intensive.</span></span> <span data-ttu-id="e79b6-119">Di conseguenza, è possibile utilizzare hello replica toooptimize passaggi di una macchina virtuale con un solo disco virtuale che dispone sia del sistema operativo hello e file di paging hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="e79b6-119">Thus, you can use hello following steps toooptimize replication of a virtual machine with a single virtual disk that has both hello operating system and hello paging file:</span></span>

1. <span data-ttu-id="e79b6-120">Divisione hello singolo disco virtuale in due dischi virtuali.</span><span class="sxs-lookup"><span data-stu-id="e79b6-120">Split hello single virtual disk into two virtual disks.</span></span> <span data-ttu-id="e79b6-121">Un disco virtuale con sistema operativo hello hello altri è il file di paging hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-121">One virtual disk has hello operating system, and hello other has hello paging file.</span></span>
2. <span data-ttu-id="e79b6-122">Escludere il disco del file di paging hello dalla replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-122">Exclude hello paging file disk from replication.</span></span>

<span data-ttu-id="e79b6-123">Analogamente, è possibile utilizzare i seguenti passaggi toooptimize un disco con entrambi tempdb di Microsoft SQL Server hello file hello e hello file di database di sistema:</span><span class="sxs-lookup"><span data-stu-id="e79b6-123">Similarly, you can use hello following steps toooptimize a disk that has both hello Microsoft SQL Server tempdb fie and hello system database file:</span></span>

1. <span data-ttu-id="e79b6-124">Mantenere il database di sistema hello e di tempdb in dischi diversi due.</span><span class="sxs-lookup"><span data-stu-id="e79b6-124">Keep hello system database and tempdb on two different disks.</span></span>
2. <span data-ttu-id="e79b6-125">Escludere il disco di tempdb hello dalla replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-125">Exclude hello tempdb disk from replication.</span></span>

## <a name="how-tooexclude-disks-from-replication"></a><span data-ttu-id="e79b6-126">Come tooexclude dischi dalla replica?</span><span class="sxs-lookup"><span data-stu-id="e79b6-126">How tooexclude disks from replication?</span></span>

### <a name="vmware-tooazure"></a><span data-ttu-id="e79b6-127">VMware tooAzure</span><span class="sxs-lookup"><span data-stu-id="e79b6-127">VMware tooAzure</span></span>
<span data-ttu-id="e79b6-128">Seguire hello [abilitare la replica](site-recovery-vmware-to-azure.md) tooprotect del flusso di lavoro una macchina virtuale dal portale di Azure Site Recovery hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-128">Follow hello [Enable replication](site-recovery-vmware-to-azure.md) workflow tooprotect a virtual machine from hello Azure Site Recovery portal.</span></span> <span data-ttu-id="e79b6-129">In hello quarto passaggio del flusso di lavoro hello utilizzare hello **tooREPLICATE disco** dischi tooexclude colonna dalla replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-129">In hello fourth step of hello workflow, use hello **DISK tooREPLICATE** column tooexclude disks from replication.</span></span> <span data-ttu-id="e79b6-130">Per impostazione predefinita, tutti i dischi sono selezionati per la replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-130">By default, all disks are selected for replication.</span></span> <span data-ttu-id="e79b6-131">Deselezionare la casella di controllo hello di dischi che si desidera tooexclude dalla replica e quindi completa hello passaggi tooenable.</span><span class="sxs-lookup"><span data-stu-id="e79b6-131">Clear hello check box of disks that you want tooexclude from replication, and then complete hello steps tooenable replication.</span></span>

![Escludere i dischi dalla replica e abilitare la replica per il failback tooAzure VMware](./media/site-recovery-exclude-disk/v2a-enable-replication-exclude-disk1.png)


>[!NOTE]
>
> * <span data-ttu-id="e79b6-133">È possibile escludere solo i dischi che sono già installato servizio di mobilità di hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-133">You can exclude only disks that already have hello Mobility service installed.</span></span> <span data-ttu-id="e79b6-134">È necessario il servizio di mobilità hello installazione toomanually, perché servizio di mobilità hello viene installato solo tramite il meccanismo di push hello dopo aver abilitata la replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-134">You need toomanually install hello Mobility service, because hello Mobility service is only installed by using hello push mechanism after replication is enabled.</span></span>
> * <span data-ttu-id="e79b6-135">Solo i dischi di base possono essere esclusi dalla replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-135">Only basic disks can be excluded from replication.</span></span> <span data-ttu-id="e79b6-136">Non è possibile escludere dischi del sistema operativo o dinamici.</span><span class="sxs-lookup"><span data-stu-id="e79b6-136">You can't exclude operating system or dynamic disks.</span></span>
> * <span data-ttu-id="e79b6-137">Dopo aver abilitato la replica, non è più possibile aggiungere o rimuovere dischi da replicare.</span><span class="sxs-lookup"><span data-stu-id="e79b6-137">After you enable replication, you can't add or remove disks for replication.</span></span> <span data-ttu-id="e79b6-138">Se si desidera tooadd o esclude un disco, è necessario toodisable protezione per il computer di hello e quindi Abilita di nuovo.</span><span class="sxs-lookup"><span data-stu-id="e79b6-138">If you want tooadd or exclude a disk, you need toodisable protection for hello machine and then enable it again.</span></span>
> * <span data-ttu-id="e79b6-139">Se si esclude un disco è sufficiente per toooperate un'applicazione, dopo il failover tooAzure, è necessario disco hello toocreate manualmente in Azure in modo che sia possibile eseguire l'applicazione hello replicato.</span><span class="sxs-lookup"><span data-stu-id="e79b6-139">If you exclude a disk that's needed for an application toooperate, after failover tooAzure, you’ll need toocreate hello disk manually in Azure so that hello replicated application can run.</span></span> <span data-ttu-id="e79b6-140">In alternativa, è possibile integrare automazione di Azure in un disco di ripristino piano toocreate hello durante il failover della macchina hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-140">Alternatively, you can integrate Azure automation into a recovery plan toocreate hello disk during failover of hello machine.</span></span>
> * <span data-ttu-id="e79b6-141">Macchina virtuale Windows: per i dischi creati manualmente in Azure non viene eseguito il failback.</span><span class="sxs-lookup"><span data-stu-id="e79b6-141">Window virtual machine: Disks that you create manually in Azure are not failed back.</span></span> <span data-ttu-id="e79b6-142">Se, ad esempio, si esegue il failover di tre dischi e se ne creano due direttamente in Macchine virtuali di Azure, viene eseguito il failback solo dei tre dischi sottoposti a failover.</span><span class="sxs-lookup"><span data-stu-id="e79b6-142">For example, if you fail over three disks and create two disk directly in Azure Virtual Machines, only three disks that were failed over are failed back.</span></span> <span data-ttu-id="e79b6-143">È possibile includere i dischi che è stato creato manualmente il failback o riprotezione da tooAzure locale.</span><span class="sxs-lookup"><span data-stu-id="e79b6-143">You can't include disks that you created manually in failback or in reprotect from on-premises tooAzure.</span></span>
> * <span data-ttu-id="e79b6-144">Macchina virtuale Linux: per i dischi creati manualmente in Azure non viene eseguito il failback.</span><span class="sxs-lookup"><span data-stu-id="e79b6-144">Linux virtual machine: Disks that you create manually in Azure are failed back.</span></span> <span data-ttu-id="e79b6-145">Se, ad esempio, si esegue il failover di tre dischi e se ne creano due direttamente in Macchine virtuali di Azure, viene eseguito il failback di tutti e cinque i dischi.</span><span class="sxs-lookup"><span data-stu-id="e79b6-145">For example, if you fail over three disks and create two disks directly in Azure Virtual Machines, all five will be failed back.</span></span> <span data-ttu-id="e79b6-146">Non è possibile escludere i dischi creati manualmente dall'operazione di failback.</span><span class="sxs-lookup"><span data-stu-id="e79b6-146">You can't exclude disks that were created manually from failback.</span></span>
>

### <a name="hyper-v-tooazure"></a><span data-ttu-id="e79b6-147">TooAzure Hyper-V</span><span class="sxs-lookup"><span data-stu-id="e79b6-147">Hyper-V tooAzure</span></span>
<span data-ttu-id="e79b6-148">Seguire hello [abilitare la replica](site-recovery-hyper-v-site-to-azure.md) tooprotect del flusso di lavoro una macchina virtuale dal portale di Azure Site Recovery hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-148">Follow hello [Enable replication](site-recovery-hyper-v-site-to-azure.md) workflow tooprotect a virtual machine from hello Azure Site Recovery portal.</span></span> <span data-ttu-id="e79b6-149">In hello quarto passaggio del flusso di lavoro hello utilizzare hello **tooREPLICATE disco** dischi tooexclude colonna dalla replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-149">In hello fourth step of hello workflow, use hello **DISK tooREPLICATE** column tooexclude disks from replication.</span></span> <span data-ttu-id="e79b6-150">Per impostazione predefinita, tutti i dischi sono selezionati per la replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-150">By default, all disks are selected for replication.</span></span> <span data-ttu-id="e79b6-151">Deselezionare la casella di controllo hello di dischi che si desidera tooexclude dalla replica e quindi completa hello passaggi tooenable.</span><span class="sxs-lookup"><span data-stu-id="e79b6-151">Clear hello check box of disks that you want tooexclude from replication, and then complete hello steps tooenable replication.</span></span>

![Escludere i dischi dalla replica e abilitare la replica per il failback tooAzure Hyper-V](./media/site-recovery-vmm-to-azure/enable-replication6-with-exclude-disk.png)

>[!NOTE]
>
> * <span data-ttu-id="e79b6-153">È possibile escludere dalla replica solo dischi di base.</span><span class="sxs-lookup"><span data-stu-id="e79b6-153">You can exclude only basic disks from replication.</span></span> <span data-ttu-id="e79b6-154">Non è possibile escludere dischi del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-154">You can't exclude operating system disks.</span></span> <span data-ttu-id="e79b6-155">e non è consigliabile escludere dischi dinamici.</span><span class="sxs-lookup"><span data-stu-id="e79b6-155">We recommend that you do not exclude dynamic disks.</span></span> <span data-ttu-id="e79b6-156">Azure Site Recovery non è possibile identificare il disco rigido virtuale (VHD) è di base o dinamici nella macchina virtuale guest di hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-156">Azure Site Recovery cannot identify which virtual hard disk (VHD) is basic or dynamic in hello guest virtual machine.</span></span>  <span data-ttu-id="e79b6-157">Se tutti i dischi dei volumi dinamici dipendenti non vengono esclusi, disco dinamico protetto hello diventa un disco guasto in una macchina virtuale di failover e hello dati presenti sul disco non sono accessibili.</span><span class="sxs-lookup"><span data-stu-id="e79b6-157">If all dependent dynamic volume disks are not excluded, hello protected dynamic disk becomes a failed disk on a failover virtual machine, and hello data on that disk is not accessible.</span></span>
> * <span data-ttu-id="e79b6-158">Dopo aver abilitato la replica, non è più possibile aggiungere o rimuovere dischi da replicare.</span><span class="sxs-lookup"><span data-stu-id="e79b6-158">After you enable replication, you can't add or remove disks for replication.</span></span> <span data-ttu-id="e79b6-159">Se si desidera tooadd o esclude un disco, è necessario toodisable protezione per la macchina virtuale hello e quindi Abilita di nuovo.</span><span class="sxs-lookup"><span data-stu-id="e79b6-159">If you want tooadd or exclude a disk, you need toodisable protection for hello virtual machine and then enable it again.</span></span>
> * <span data-ttu-id="e79b6-160">Se si esclude un disco è sufficiente per toooperate un'applicazione, dopo il failover tooAzure è necessario toocreate hello disco manualmente in Azure in modo che sia possibile eseguire l'applicazione hello replicato.</span><span class="sxs-lookup"><span data-stu-id="e79b6-160">If you exclude a disk that's needed for an application toooperate, after failover tooAzure you’ll need toocreate hello disk manually in Azure so that hello replicated application can run.</span></span> <span data-ttu-id="e79b6-161">In alternativa, è possibile integrare automazione di Azure in un disco di ripristino piano toocreate hello durante il failover della macchina hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-161">Alternatively, you can integrate Azure automation into a recovery plan toocreate hello disk during failover of hello machine.</span></span>
> * <span data-ttu-id="e79b6-162">Per i dischi creati manualmente in Azure non viene eseguito il failback.</span><span class="sxs-lookup"><span data-stu-id="e79b6-162">Disks that you create manually in Azure will not be failed back.</span></span> <span data-ttu-id="e79b6-163">Ad esempio, se si esito negativo su tre dischi e creare due dischi direttamente in macchine virtuali di Azure, solo tre dischi che sono stati eseguiti il failover non verranno eseguiti nuovamente da Azure tooHyper-V.</span><span class="sxs-lookup"><span data-stu-id="e79b6-163">For example, if you fail over three disks and create two disks directly in Azure Virtual Machines, only three disks that were failed over will be failed back from Azure tooHyper-V.</span></span> <span data-ttu-id="e79b6-164">È possibile includere i dischi che sono stati creati manualmente la replica inversa da tooAzure Hyper-V o il failback.</span><span class="sxs-lookup"><span data-stu-id="e79b6-164">You can't include disks that were created manually in failback or in reverse replication from Hyper-V tooAzure.</span></span>



## <a name="end-to-end-scenarios-of-exclude-disks"></a><span data-ttu-id="e79b6-165">Scenari end-to-end di esclusione dei dischi</span><span class="sxs-lookup"><span data-stu-id="e79b6-165">End-to-end scenarios of exclude disks</span></span>
<span data-ttu-id="e79b6-166">Si consideri una funzione di due scenari toounderstand hello esclusioni disco:</span><span class="sxs-lookup"><span data-stu-id="e79b6-166">Let's consider two scenarios toounderstand hello exclude disk feature:</span></span>

- <span data-ttu-id="e79b6-167">Disco del tempdb di SQL Server</span><span class="sxs-lookup"><span data-stu-id="e79b6-167">SQL Server tempdb disk</span></span>
- <span data-ttu-id="e79b6-168">Disco del file di paging (pagefile.sys)</span><span class="sxs-lookup"><span data-stu-id="e79b6-168">Paging file (pagefile.sys) disk</span></span>

### <a name="exclude-hello-sql-server-tempdb-disk"></a><span data-ttu-id="e79b6-169">Escludere il disco tempdb di SQL Server hello</span><span class="sxs-lookup"><span data-stu-id="e79b6-169">Exclude hello SQL Server tempdb disk</span></span>
<span data-ttu-id="e79b6-170">Si prenda ad esempio una macchina virtuale di SQL Server con un tempdb che è possibile escludere.</span><span class="sxs-lookup"><span data-stu-id="e79b6-170">Let's consider a SQL Server virtual machine that has a tempdb that can be excluded.</span></span>

<span data-ttu-id="e79b6-171">nome di Hello del disco virtuale hello è SalesDB.</span><span class="sxs-lookup"><span data-stu-id="e79b6-171">hello name of hello virtual disk is SalesDB.</span></span>

<span data-ttu-id="e79b6-172">Di seguito sono riportati i dischi nella macchina virtuale di origine hello:</span><span class="sxs-lookup"><span data-stu-id="e79b6-172">Disks on hello source virtual machine are as follows:</span></span>


<span data-ttu-id="e79b6-173">**Nome del disco**</span><span class="sxs-lookup"><span data-stu-id="e79b6-173">**Disk name**</span></span> | <span data-ttu-id="e79b6-174">**N. disco sistema operativo guest**</span><span class="sxs-lookup"><span data-stu-id="e79b6-174">**Guest operating system disk#**</span></span> | <span data-ttu-id="e79b6-175">**Lettera di unità**</span><span class="sxs-lookup"><span data-stu-id="e79b6-175">**Drive letter**</span></span> | <span data-ttu-id="e79b6-176">**Tipo di dati su disco hello**</span><span class="sxs-lookup"><span data-stu-id="e79b6-176">**Data type on hello disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="e79b6-177">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="e79b6-177">DB-Disk0-OS</span></span> | <span data-ttu-id="e79b6-178">DISK0</span><span class="sxs-lookup"><span data-stu-id="e79b6-178">DISK0</span></span> | <span data-ttu-id="e79b6-179">C:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-179">C:\\</span></span> | <span data-ttu-id="e79b6-180">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-180">Operating system disk</span></span>
<span data-ttu-id="e79b6-181">DB-Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-181">DB-Disk1</span></span>| <span data-ttu-id="e79b6-182">Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-182">Disk1</span></span> | <span data-ttu-id="e79b6-183">D:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-183">D:\\</span></span> | <span data-ttu-id="e79b6-184">Database di sistema SQL e Database1 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-184">SQL system database and User Database1</span></span>
<span data-ttu-id="e79b6-185">DB-Disco2 (disco di hello escluse dalla protezione)</span><span class="sxs-lookup"><span data-stu-id="e79b6-185">DB-Disk2 (Excluded hello disk from protection)</span></span> | <span data-ttu-id="e79b6-186">Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-186">Disk2</span></span> | <span data-ttu-id="e79b6-187">E:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-187">E:\\</span></span> | <span data-ttu-id="e79b6-188">File temporanei</span><span class="sxs-lookup"><span data-stu-id="e79b6-188">Temp files</span></span>
<span data-ttu-id="e79b6-189">DB-Disk3 (disco di hello escluse dalla protezione)</span><span class="sxs-lookup"><span data-stu-id="e79b6-189">DB-Disk3 (Excluded hello disk from protection)</span></span> | <span data-ttu-id="e79b6-190">Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-190">Disk3</span></span> | <span data-ttu-id="e79b6-191">F:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-191">F:\\</span></span> | <span data-ttu-id="e79b6-192">Database tempdb SQL (percorso della cartella (F:\MSSQL\Data\) </br/>< / br/>, annotare il percorso di cartella hello prima del failover.</span><span class="sxs-lookup"><span data-stu-id="e79b6-192">SQL tempdb database (folder path(F:\MSSQL\Data\) </br /> </br />Write down hello folder path before failover.</span></span>
<span data-ttu-id="e79b6-193">DB-Disk4</span><span class="sxs-lookup"><span data-stu-id="e79b6-193">DB-Disk4</span></span> | <span data-ttu-id="e79b6-194">Disk4</span><span class="sxs-lookup"><span data-stu-id="e79b6-194">Disk4</span></span> |<span data-ttu-id="e79b6-195">G:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-195">G:\\</span></span> |<span data-ttu-id="e79b6-196">Database2 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-196">User Database2</span></span>

<span data-ttu-id="e79b6-197">Poiché varianza dei dati su due dischi della macchina virtuale hello è temporanea, mentre si protegge una macchina virtuale di hello SalesDB, escludere Disco2 e Disk3 dalla replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-197">Because data churn on two disks of hello virtual machine is temporary, while you protect hello SalesDB virtual machine, exclude Disk2 and Disk3 from replication.</span></span> <span data-ttu-id="e79b6-198">Azure Site Recovery non eseguirà la replica di questi dischi,</span><span class="sxs-lookup"><span data-stu-id="e79b6-198">Azure Site Recovery will not replicate those disks.</span></span> <span data-ttu-id="e79b6-199">In caso di failover, i dischi non sarà presenti nella macchina virtuale di failover hello in Azure.</span><span class="sxs-lookup"><span data-stu-id="e79b6-199">On failover, those disks will not be present on hello failover virtual machine on Azure.</span></span>

<span data-ttu-id="e79b6-200">Di seguito sono riportati i dischi nella macchina virtuale di Azure dopo il failover hello:</span><span class="sxs-lookup"><span data-stu-id="e79b6-200">Disks on hello Azure virtual machine after failover are as follows:</span></span>

<span data-ttu-id="e79b6-201">**N. disco sistema operativo guest**</span><span class="sxs-lookup"><span data-stu-id="e79b6-201">**Guest operating system disk#**</span></span> | <span data-ttu-id="e79b6-202">**Lettera di unità**</span><span class="sxs-lookup"><span data-stu-id="e79b6-202">**Drive letter**</span></span> | <span data-ttu-id="e79b6-203">**Tipo di dati su disco hello**</span><span class="sxs-lookup"><span data-stu-id="e79b6-203">**Data type on hello disk**</span></span>
--- | --- | ---
<span data-ttu-id="e79b6-204">DISK0</span><span class="sxs-lookup"><span data-stu-id="e79b6-204">DISK0</span></span> | <span data-ttu-id="e79b6-205">C:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-205">C:\\</span></span> | <span data-ttu-id="e79b6-206">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-206">Operating system disk</span></span>
<span data-ttu-id="e79b6-207">Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-207">Disk1</span></span> | <span data-ttu-id="e79b6-208">E:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-208">E:\\</span></span> | <span data-ttu-id="e79b6-209">Archiviazione temporanea </br / >< / br / > Azure aggiunge il disco e assegna la lettera di unità disponibile prima di hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-209">Temporary storage</br /> </br />Azure adds this disk and assigns hello first available drive letter.</span></span>
<span data-ttu-id="e79b6-210">Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-210">Disk2</span></span> | <span data-ttu-id="e79b6-211">D:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-211">D:\\</span></span> | <span data-ttu-id="e79b6-212">Database di sistema SQL e Database1 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-212">SQL system database and User Database1</span></span>
<span data-ttu-id="e79b6-213">Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-213">Disk3</span></span> | <span data-ttu-id="e79b6-214">G:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-214">G:\\</span></span> | <span data-ttu-id="e79b6-215">Database2 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-215">User Database2</span></span>

<span data-ttu-id="e79b6-216">Poiché Disco2 e Disk3 sono stati esclusi dalla macchina virtuale di hello SalesDB, e: è hello prima lettera di unità dall'elenco disponibile hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-216">Because Disk2 and Disk3 were excluded from hello SalesDB virtual machine, E: is hello first drive letter from hello available list.</span></span> <span data-ttu-id="e79b6-217">Azure assegna volume di archiviazione temporanea e: toohello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-217">Azure assigns E: toohello temporary storage volume.</span></span> <span data-ttu-id="e79b6-218">Per tutti i dischi hello replicato, rimangono lettere di unità di hello hello stesso.</span><span class="sxs-lookup"><span data-stu-id="e79b6-218">For all hello replicated disks, hello drive letters remain hello same.</span></span>

<span data-ttu-id="e79b6-219">Disk3, ovvero disco tempdb SQL hello (percorso della cartella tempdb F:\MSSQL\Data\), è stata esclusa dalla replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-219">Disk3, which was hello SQL tempdb disk (tempdb folder path F:\MSSQL\Data\), was excluded from replication.</span></span> <span data-ttu-id="e79b6-220">disco Hello non è disponibile nella macchina virtuale di hello failover.</span><span class="sxs-lookup"><span data-stu-id="e79b6-220">hello disk is not available on hello failover virtual machine.</span></span> <span data-ttu-id="e79b6-221">Di conseguenza, hello servizio SQL è in stato di interruzione e richiede il percorso di F:\MSSQL\Data hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-221">As a result, hello SQL service is in a stopped state, and it needs hello F:\MSSQL\Data path.</span></span>

<span data-ttu-id="e79b6-222">Esistono due modi toocreate questo percorso:</span><span class="sxs-lookup"><span data-stu-id="e79b6-222">There are two ways toocreate this path:</span></span>

- <span data-ttu-id="e79b6-223">Aggiungere un nuovo disco e assegnare il percorso della cartella del tempdb.</span><span class="sxs-lookup"><span data-stu-id="e79b6-223">Add a new disk and assign tempdb folder path.</span></span>
- <span data-ttu-id="e79b6-224">Utilizzare un disco di archiviazione temporanea esistente per il percorso di cartella hello tempdb.</span><span class="sxs-lookup"><span data-stu-id="e79b6-224">Use an existing temporary storage disk for hello tempdb folder path.</span></span>

#### <a name="add-a-new-disk"></a><span data-ttu-id="e79b6-225">Aggiungere un nuovo disco:</span><span class="sxs-lookup"><span data-stu-id="e79b6-225">Add a new disk:</span></span>

1. <span data-ttu-id="e79b6-226">Annotare i percorsi di hello SQL tempdb.mdf e tempdb.ldf prima del failover.</span><span class="sxs-lookup"><span data-stu-id="e79b6-226">Write down hello paths of SQL tempdb.mdf and tempdb.ldf before failover.</span></span>
2. <span data-ttu-id="e79b6-227">Dal portale di Azure hello, aggiungere una nuova macchina virtuale failover di toohello disco con hello uguale o più dimensioni del disco di tempdb hello origine SQL (Disk3).</span><span class="sxs-lookup"><span data-stu-id="e79b6-227">From hello Azure portal, add a new disk toohello failover virtual machine with hello same or more size as that of hello source SQL tempdb disk (Disk3).</span></span>
3. <span data-ttu-id="e79b6-228">Accedi toohello macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="e79b6-228">Sign in toohello Azure virtual machine.</span></span> <span data-ttu-id="e79b6-229">Dalla console di gestione (diskmgmt.msc) disco hello, inizializzare e formato hello appena aggiunti del disco.</span><span class="sxs-lookup"><span data-stu-id="e79b6-229">From hello disk management (diskmgmt.msc) console, initialize and format hello newly added disk.</span></span>
4. <span data-ttu-id="e79b6-230">Hello Assegna stessa lettera utilizzato dal disco di tempdb SQL hello (f) di unità.</span><span class="sxs-lookup"><span data-stu-id="e79b6-230">Assign hello same drive letter that was used by hello SQL tempdb disk (F:).</span></span>
5. <span data-ttu-id="e79b6-231">Creare una cartella di tempdb in hello volume f: (F:\MSSQL\Data).</span><span class="sxs-lookup"><span data-stu-id="e79b6-231">Create a tempdb folder on hello F: volume (F:\MSSQL\Data).</span></span>
6. <span data-ttu-id="e79b6-232">Avviare il servizio SQL hello dalla console di service hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-232">Start hello SQL service from hello service console.</span></span>

#### <a name="use-an-existing-temporary-storage-disk-for-hello-sql-tempdb-folder-path"></a><span data-ttu-id="e79b6-233">Utilizzare un disco di archiviazione temporanea esistente per il percorso di cartella hello SQL tempdb:</span><span class="sxs-lookup"><span data-stu-id="e79b6-233">Use an existing temporary storage disk for hello SQL tempdb folder path:</span></span>

1. <span data-ttu-id="e79b6-234">Aprire un prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="e79b6-234">Open a command prompt.</span></span>
2. <span data-ttu-id="e79b6-235">Eseguire SQL Server in modalità di ripristino dal prompt dei comandi di hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-235">Run SQL Server in recovery mode from hello command prompt.</span></span>

        Net start MSSQLSERVER /f / T3608

3. <span data-ttu-id="e79b6-236">Eseguire hello seguente sqlcmd toochange hello tempdb toohello nuovo percorso.</span><span class="sxs-lookup"><span data-stu-id="e79b6-236">Run hello following sqlcmd toochange hello tempdb path toohello new path.</span></span>

        sqlcmd -A -S SalesDB        **Use your SQL DBname**
        USE master;     
        GO      
        ALTER DATABASE tempdb       
        MODIFY FILE (NAME = tempdev, FILENAME = 'E:\MSSQL\tempdata\tempdb.mdf');
        GO      
        ALTER DATABASE tempdb       
        MODIFY FILE (NAME = templog, FILENAME = 'E:\MSSQL\tempdata\templog.ldf');       
        GO


4. <span data-ttu-id="e79b6-237">Arrestare il servizio di Microsoft SQL Server hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-237">Stop hello Microsoft SQL Server service.</span></span>

        Net stop MSSQLSERVER
5. <span data-ttu-id="e79b6-238">Avviare il servizio di Microsoft SQL Server hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-238">Start hello Microsoft SQL Server service.</span></span>

        Net start MSSQLSERVER

<span data-ttu-id="e79b6-239">Fare riferimento toohello di Azure indicazioni per il disco di archiviazione temporanea:</span><span class="sxs-lookup"><span data-stu-id="e79b6-239">Refer toohello following Azure guideline for temporary storage disk:</span></span>

* [<span data-ttu-id="e79b6-240">Utilizzo di SSD nelle macchine virtuali di Azure toostore TempDB di SQL Server e le estensioni del Pool di Buffer</span><span class="sxs-lookup"><span data-stu-id="e79b6-240">Using SSDs in Azure VMs toostore SQL Server TempDB and Buffer Pool Extensions</span></span>](https://blogs.technet.microsoft.com/dataplatforminsider/2014/09/25/using-ssds-in-azure-vms-to-store-sql-server-tempdb-and-buffer-pool-extensions/)
* <span data-ttu-id="e79b6-241">[Performance best practices for SQL Server in Azure Virtual Machines](https://docs.microsoft.com/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-performance) (Procedure consigliate sulle prestazioni per SQL Server nelle macchine virtuali di Azure)</span><span class="sxs-lookup"><span data-stu-id="e79b6-241">[Performance best practices for SQL Server in Azure Virtual Machines](https://docs.microsoft.com/azure/virtual-machines/windows/sql/virtual-machines-windows-sql-performance)</span></span>

### <a name="failback-from-azure-tooan-on-premises-host"></a><span data-ttu-id="e79b6-242">Failback (da Azure tooan nell'host locale)</span><span class="sxs-lookup"><span data-stu-id="e79b6-242">Failback (from Azure tooan on-premises host)</span></span>
<span data-ttu-id="e79b6-243">Ora è utile comprendere dischi hello che vengono replicati quando si esegue il failover dall'host di VMware o Hyper-V locale tooyour Azure.</span><span class="sxs-lookup"><span data-stu-id="e79b6-243">Now let's understand hello disks that are replicated when you fail over from Azure tooyour on-premises VMware or Hyper-V host.</span></span> <span data-ttu-id="e79b6-244">Per i dischi creati manualmente in Azure non viene eseguita la replica.</span><span class="sxs-lookup"><span data-stu-id="e79b6-244">Disks that you create manually in Azure will not be replicated.</span></span> <span data-ttu-id="e79b6-245">Se, ad esempio, si esegue il failover di tre dischi e se ne creano due direttamente in Macchine virtuali di Azure, viene eseguito il failback solo dei tre dischi sottoposti a failover.</span><span class="sxs-lookup"><span data-stu-id="e79b6-245">For example, if you fail over three disks and create two directly in Azure Virtual Machines, only three disks that were failed over will be failed back.</span></span> <span data-ttu-id="e79b6-246">È possibile includere i dischi che sono stati creati manualmente il failback o riprotezione da tooAzure locale.</span><span class="sxs-lookup"><span data-stu-id="e79b6-246">You can't include disks that were created manually in failback or in reprotect from on-premises tooAzure.</span></span> <span data-ttu-id="e79b6-247">Inoltre non replicare gli host locale tooon disco di archiviazione temporanea hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-247">It also does not replicate hello temporary storage disk tooon-premises hosts.</span></span>

#### <a name="failback-toooriginal-location-recovery"></a><span data-ttu-id="e79b6-248">Ripristino nel percorso toooriginal failback</span><span class="sxs-lookup"><span data-stu-id="e79b6-248">Failback toooriginal location recovery</span></span>

<span data-ttu-id="e79b6-249">Nell'esempio precedente hello, configurazione del disco di macchina virtuale di Azure hello è come segue:</span><span class="sxs-lookup"><span data-stu-id="e79b6-249">In hello previous example, hello Azure virtual machine disk configuration is as follows:</span></span>

<span data-ttu-id="e79b6-250">**N. disco sistema operativo guest**</span><span class="sxs-lookup"><span data-stu-id="e79b6-250">**Guest operating system disk#**</span></span> | <span data-ttu-id="e79b6-251">**Lettera di unità**</span><span class="sxs-lookup"><span data-stu-id="e79b6-251">**Drive letter**</span></span> | <span data-ttu-id="e79b6-252">**Tipo di dati su disco hello**</span><span class="sxs-lookup"><span data-stu-id="e79b6-252">**Data type on hello disk**</span></span>
--- | --- | ---
<span data-ttu-id="e79b6-253">DISK0</span><span class="sxs-lookup"><span data-stu-id="e79b6-253">DISK0</span></span> | <span data-ttu-id="e79b6-254">C:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-254">C:\\</span></span> | <span data-ttu-id="e79b6-255">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-255">Operating system disk</span></span>
<span data-ttu-id="e79b6-256">Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-256">Disk1</span></span> | <span data-ttu-id="e79b6-257">E:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-257">E:\\</span></span> | <span data-ttu-id="e79b6-258">Archiviazione temporanea </br / >< / br / > Azure aggiunge il disco e assegna la lettera di unità disponibile prima di hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-258">Temporary storage</br /> </br />Azure adds this disk and assigns hello first available drive letter.</span></span>
<span data-ttu-id="e79b6-259">Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-259">Disk2</span></span> | <span data-ttu-id="e79b6-260">D:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-260">D:\\</span></span> | <span data-ttu-id="e79b6-261">Database di sistema SQL e Database1 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-261">SQL system database and User Database1</span></span>
<span data-ttu-id="e79b6-262">Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-262">Disk3</span></span> | <span data-ttu-id="e79b6-263">G:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-263">G:\\</span></span> | <span data-ttu-id="e79b6-264">Database2 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-264">User Database2</span></span>


#### <a name="vmware-tooazure"></a><span data-ttu-id="e79b6-265">VMware tooAzure</span><span class="sxs-lookup"><span data-stu-id="e79b6-265">VMware tooAzure</span></span>
<span data-ttu-id="e79b6-266">Al termine il failback toohello nel percorso originale, configurazione del disco hello failback macchina virtuale non dispone di dischi esclusi.</span><span class="sxs-lookup"><span data-stu-id="e79b6-266">When failback is done toohello original location, hello failback virtual machine disk configuration does not have excluded disks.</span></span> <span data-ttu-id="e79b6-267">I dischi che sono stati esclusi dal tooAzure VMware non saranno disponibili nella macchina virtuale di failback hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-267">Disks that were excluded from VMware tooAzure  will not be available on hello failback virtual machine.</span></span>

<span data-ttu-id="e79b6-268">Dopo il failover pianificato da Azure tooon sedi VMware, dischi nella macchina virtuale VMWare di hello (percorso originale) sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="e79b6-268">After planned failover from Azure tooon-premises VMware, disks on hello VMWare virtual machine (original location) are as follows:</span></span>

<span data-ttu-id="e79b6-269">**N. disco sistema operativo guest**</span><span class="sxs-lookup"><span data-stu-id="e79b6-269">**Guest operating system disk#**</span></span> | <span data-ttu-id="e79b6-270">**Lettera di unità**</span><span class="sxs-lookup"><span data-stu-id="e79b6-270">**Drive letter**</span></span> | <span data-ttu-id="e79b6-271">**Tipo di dati su disco hello**</span><span class="sxs-lookup"><span data-stu-id="e79b6-271">**Data type on hello disk**</span></span>
--- | --- | ---
<span data-ttu-id="e79b6-272">DISK0</span><span class="sxs-lookup"><span data-stu-id="e79b6-272">DISK0</span></span> | <span data-ttu-id="e79b6-273">C:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-273">C:\\</span></span> | <span data-ttu-id="e79b6-274">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-274">Operating system disk</span></span>
<span data-ttu-id="e79b6-275">Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-275">Disk1</span></span> | <span data-ttu-id="e79b6-276">D:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-276">D:\\</span></span> | <span data-ttu-id="e79b6-277">Database di sistema SQL e Database1 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-277">SQL system database and User Database1</span></span>
<span data-ttu-id="e79b6-278">Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-278">Disk2</span></span> | <span data-ttu-id="e79b6-279">G:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-279">G:\\</span></span> | <span data-ttu-id="e79b6-280">Database2 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-280">User Database2</span></span>

#### <a name="hyper-v-tooazure"></a><span data-ttu-id="e79b6-281">TooAzure Hyper-V</span><span class="sxs-lookup"><span data-stu-id="e79b6-281">Hyper-V tooAzure</span></span>
<span data-ttu-id="e79b6-282">Quando il failback è toohello nel percorso originale, hello failback macchina virtuale su disco configurazione rimane hello uguale a quello della configurazione originale del disco della macchina virtuale per Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="e79b6-282">When failback is toohello original location, hello failback virtual machine disk configuration remains hello same as that of original virtual machine disk configuration for Hyper-V.</span></span> <span data-ttu-id="e79b6-283">I dischi che sono stati esclusi dal tooAzure sito Hyper-V sono disponibili nella macchina virtuale di failback hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-283">Disks that were excluded from Hyper-V site tooAzure are available on hello failback virtual machine.</span></span>

<span data-ttu-id="e79b6-284">Dopo un failover pianificato da Azure tooon locale Hyper-V, i dischi nella macchina virtuale Hyper-V di hello (percorso originale) sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="e79b6-284">After planned failover from Azure tooon-premises Hyper-V, disks on hello Hyper-V virtual machine (original location) are as follows:</span></span>

<span data-ttu-id="e79b6-285">**Nome del disco**</span><span class="sxs-lookup"><span data-stu-id="e79b6-285">**Disk Name**</span></span> | <span data-ttu-id="e79b6-286">**N. disco sistema operativo guest**</span><span class="sxs-lookup"><span data-stu-id="e79b6-286">**Guest operating system disk#**</span></span> | <span data-ttu-id="e79b6-287">**Lettera di unità**</span><span class="sxs-lookup"><span data-stu-id="e79b6-287">**Drive letter**</span></span> | <span data-ttu-id="e79b6-288">**Tipo di dati su disco hello**</span><span class="sxs-lookup"><span data-stu-id="e79b6-288">**Data type on hello disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="e79b6-289">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="e79b6-289">DB-Disk0-OS</span></span> | <span data-ttu-id="e79b6-290">DISK0</span><span class="sxs-lookup"><span data-stu-id="e79b6-290">DISK0</span></span> |   <span data-ttu-id="e79b6-291">C:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-291">C:\\</span></span> | <span data-ttu-id="e79b6-292">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-292">Operating system disk</span></span>
<span data-ttu-id="e79b6-293">DB-Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-293">DB-Disk1</span></span> | <span data-ttu-id="e79b6-294">Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-294">Disk1</span></span> | <span data-ttu-id="e79b6-295">D:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-295">D:\\</span></span> | <span data-ttu-id="e79b6-296">Database di sistema SQL e Database1 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-296">SQL system database and User Database1</span></span>
<span data-ttu-id="e79b6-297">DB-Disk2 (disco escluso)</span><span class="sxs-lookup"><span data-stu-id="e79b6-297">DB-Disk2 (Excluded disk)</span></span> | <span data-ttu-id="e79b6-298">Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-298">Disk2</span></span> | <span data-ttu-id="e79b6-299">E:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-299">E:\\</span></span> | <span data-ttu-id="e79b6-300">File temporanei</span><span class="sxs-lookup"><span data-stu-id="e79b6-300">Temp files</span></span>
<span data-ttu-id="e79b6-301">DB-Disk3 (disco escluso)</span><span class="sxs-lookup"><span data-stu-id="e79b6-301">DB-Disk3 (Excluded disk)</span></span> | <span data-ttu-id="e79b6-302">Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-302">Disk3</span></span> | <span data-ttu-id="e79b6-303">F:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-303">F:\\</span></span> | <span data-ttu-id="e79b6-304">Database tempdb SQL (percorso della cartella, F:\MSSQL\Data\)</span><span class="sxs-lookup"><span data-stu-id="e79b6-304">SQL tempdb database (folder path(F:\MSSQL\Data\)</span></span>
<span data-ttu-id="e79b6-305">DB-Disk4</span><span class="sxs-lookup"><span data-stu-id="e79b6-305">DB-Disk4</span></span> | <span data-ttu-id="e79b6-306">Disk4</span><span class="sxs-lookup"><span data-stu-id="e79b6-306">Disk4</span></span> | <span data-ttu-id="e79b6-307">G:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-307">G:\\</span></span> | <span data-ttu-id="e79b6-308">Database2 dell'utente</span><span class="sxs-lookup"><span data-stu-id="e79b6-308">User Database2</span></span>


#### <a name="exclude-hello-paging-file-pagefilesys-disk"></a><span data-ttu-id="e79b6-309">Escludere il disco (pagefile.sys) di file di paging hello</span><span class="sxs-lookup"><span data-stu-id="e79b6-309">Exclude hello paging file (pagefile.sys) disk</span></span>

<span data-ttu-id="e79b6-310">Si prenda ad esempio una macchina virtuale con un disco del file di paging che è possibile escludere.</span><span class="sxs-lookup"><span data-stu-id="e79b6-310">Let's consider a virtual machine that has a paging file disk that can be excluded.</span></span>
<span data-ttu-id="e79b6-311">I casi possibili sono due:</span><span class="sxs-lookup"><span data-stu-id="e79b6-311">There are two cases.</span></span>

#### <a name="case-1-hello-paging-file-is-configured-on-hello-d-drive"></a><span data-ttu-id="e79b6-312">Caso 1: file di paging hello è configurato in unità d: hello</span><span class="sxs-lookup"><span data-stu-id="e79b6-312">Case 1: hello paging file is configured on hello D: drive</span></span>
<span data-ttu-id="e79b6-313">Di seguito è riportata la configurazione disco hello:</span><span class="sxs-lookup"><span data-stu-id="e79b6-313">Here's hello disk configuration:</span></span>


<span data-ttu-id="e79b6-314">**Nome del disco**</span><span class="sxs-lookup"><span data-stu-id="e79b6-314">**Disk name**</span></span> | <span data-ttu-id="e79b6-315">**N. disco sistema operativo guest**</span><span class="sxs-lookup"><span data-stu-id="e79b6-315">**Guest operating system disk#**</span></span> | <span data-ttu-id="e79b6-316">**Lettera di unità**</span><span class="sxs-lookup"><span data-stu-id="e79b6-316">**Drive letter**</span></span> | <span data-ttu-id="e79b6-317">**Tipo di dati su disco hello**</span><span class="sxs-lookup"><span data-stu-id="e79b6-317">**Data type on hello disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="e79b6-318">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="e79b6-318">DB-Disk0-OS</span></span> | <span data-ttu-id="e79b6-319">DISK0</span><span class="sxs-lookup"><span data-stu-id="e79b6-319">DISK0</span></span> | <span data-ttu-id="e79b6-320">C:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-320">C:\\</span></span> | <span data-ttu-id="e79b6-321">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-321">Operating system disk</span></span>
<span data-ttu-id="e79b6-322">DB-Disco1 (disco di hello escluse dalla protezione hello)</span><span class="sxs-lookup"><span data-stu-id="e79b6-322">DB-Disk1 (Excluded hello disk from hello protection)</span></span> | <span data-ttu-id="e79b6-323">Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-323">Disk1</span></span> | <span data-ttu-id="e79b6-324">D:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-324">D:\\</span></span> | <span data-ttu-id="e79b6-325">pagefile.sys</span><span class="sxs-lookup"><span data-stu-id="e79b6-325">pagefile.sys</span></span>
<span data-ttu-id="e79b6-326">DB-Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-326">DB-Disk2</span></span> | <span data-ttu-id="e79b6-327">Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-327">Disk2</span></span> | <span data-ttu-id="e79b6-328">E:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-328">E:\\</span></span> | <span data-ttu-id="e79b6-329">Dati utente 1</span><span class="sxs-lookup"><span data-stu-id="e79b6-329">User data 1</span></span>
<span data-ttu-id="e79b6-330">DB-Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-330">DB-Disk3</span></span> | <span data-ttu-id="e79b6-331">Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-331">Disk3</span></span> | <span data-ttu-id="e79b6-332">F:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-332">F:\\</span></span> | <span data-ttu-id="e79b6-333">Dati utente 2</span><span class="sxs-lookup"><span data-stu-id="e79b6-333">User data 2</span></span>

<span data-ttu-id="e79b6-334">Di seguito sono hello impostazioni del file paging nella macchina virtuale di origine hello:</span><span class="sxs-lookup"><span data-stu-id="e79b6-334">Here are hello paging file settings on hello source virtual machine:</span></span>

![Impostazioni del file di paging nella macchina virtuale di origine](./media/site-recovery-exclude-disk/pagefile-on-d-drive-sourceVM.png)


<span data-ttu-id="e79b6-336">Dopo il failover della macchina virtuale hello da VMware tooAzure o tooAzure Hyper-V, dischi su hello macchina virtuale di Azure sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="e79b6-336">After failover of hello virtual machine from VMware tooAzure or Hyper-V tooAzure, disks on hello Azure virtual machine are as follows:</span></span>

<span data-ttu-id="e79b6-337">**Nome del disco**</span><span class="sxs-lookup"><span data-stu-id="e79b6-337">**Disk name**</span></span> | <span data-ttu-id="e79b6-338">**N. disco sistema operativo guest**</span><span class="sxs-lookup"><span data-stu-id="e79b6-338">**Guest operating system disk#**</span></span> | <span data-ttu-id="e79b6-339">**Lettera di unità**</span><span class="sxs-lookup"><span data-stu-id="e79b6-339">**Drive letter**</span></span> | <span data-ttu-id="e79b6-340">**Tipo di dati su disco hello**</span><span class="sxs-lookup"><span data-stu-id="e79b6-340">**Data type on hello disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="e79b6-341">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="e79b6-341">DB-Disk0-OS</span></span> | <span data-ttu-id="e79b6-342">DISK0</span><span class="sxs-lookup"><span data-stu-id="e79b6-342">DISK0</span></span> | <span data-ttu-id="e79b6-343">C:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-343">C:\\</span></span> | <span data-ttu-id="e79b6-344">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-344">Operating system disk</span></span>
<span data-ttu-id="e79b6-345">DB-Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-345">DB-Disk1</span></span> | <span data-ttu-id="e79b6-346">Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-346">Disk1</span></span> | <span data-ttu-id="e79b6-347">D:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-347">D:\\</span></span> | <span data-ttu-id="e79b6-348">Archiviazione temporanea</br /> </br />pagefile.sys</span><span class="sxs-lookup"><span data-stu-id="e79b6-348">Temporary storage</br /> </br />pagefile.sys</span></span>
<span data-ttu-id="e79b6-349">DB-Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-349">DB-Disk2</span></span> | <span data-ttu-id="e79b6-350">Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-350">Disk2</span></span> | <span data-ttu-id="e79b6-351">E:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-351">E:\\</span></span> | <span data-ttu-id="e79b6-352">Dati utente 1</span><span class="sxs-lookup"><span data-stu-id="e79b6-352">User data 1</span></span>
<span data-ttu-id="e79b6-353">DB-Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-353">DB-Disk3</span></span> | <span data-ttu-id="e79b6-354">Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-354">Disk3</span></span> | <span data-ttu-id="e79b6-355">F:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-355">F:\\</span></span> | <span data-ttu-id="e79b6-356">Dati utente 2</span><span class="sxs-lookup"><span data-stu-id="e79b6-356">User data 2</span></span>

<span data-ttu-id="e79b6-357">Poiché è stata esclusa Disco1 (d), d: è hello prima lettera di unità dall'elenco disponibile hello.</span><span class="sxs-lookup"><span data-stu-id="e79b6-357">Because Disk1 (D:) was excluded, D: is hello first drive letter from hello available list.</span></span> <span data-ttu-id="e79b6-358">Azure assegna volume di archiviazione temporanea toohello d:.</span><span class="sxs-lookup"><span data-stu-id="e79b6-358">Azure assigns D: toohello temporary storage volume.</span></span> <span data-ttu-id="e79b6-359">Poiché l'unità d: è disponibile in hello macchina virtuale di Azure, hello file di paging di hello macchina virtuale rimane hello stesso.</span><span class="sxs-lookup"><span data-stu-id="e79b6-359">Because D: is available on hello Azure virtual machine, hello paging file setting of hello virtual machine remains hello same.</span></span>

<span data-ttu-id="e79b6-360">Di seguito sono hello impostazioni del file paging su hello macchina virtuale di Azure:</span><span class="sxs-lookup"><span data-stu-id="e79b6-360">Here are hello paging file settings on hello Azure virtual machine:</span></span>

![Impostazioni del file di paging nella macchina virtuale di Azure](./media/site-recovery-exclude-disk/pagefile-on-Azure-vm-after-failover.png)

#### <a name="case-2-hello-paging-file-is-configured-on-another-drive-other-than-d-drive"></a><span data-ttu-id="e79b6-362">Caso 2: file di paging hello è configurato in un'altra unità (ad eccezione di unità d)</span><span class="sxs-lookup"><span data-stu-id="e79b6-362">Case 2: hello paging file is configured on another drive (other than D: drive)</span></span>

<span data-ttu-id="e79b6-363">Di seguito è la configurazione disco macchina virtuale di origine hello:</span><span class="sxs-lookup"><span data-stu-id="e79b6-363">Here's hello source virtual machine disk configuration:</span></span>

<span data-ttu-id="e79b6-364">**Nome del disco**</span><span class="sxs-lookup"><span data-stu-id="e79b6-364">**Disk name**</span></span> | <span data-ttu-id="e79b6-365">**N. disco sistema operativo guest**</span><span class="sxs-lookup"><span data-stu-id="e79b6-365">**Guest operating system disk#**</span></span> | <span data-ttu-id="e79b6-366">**Lettera di unità**</span><span class="sxs-lookup"><span data-stu-id="e79b6-366">**Drive letter**</span></span> | <span data-ttu-id="e79b6-367">**Tipo di dati su disco hello**</span><span class="sxs-lookup"><span data-stu-id="e79b6-367">**Data type on hello disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="e79b6-368">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="e79b6-368">DB-Disk0-OS</span></span> | <span data-ttu-id="e79b6-369">DISK0</span><span class="sxs-lookup"><span data-stu-id="e79b6-369">DISK0</span></span> | <span data-ttu-id="e79b6-370">C:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-370">C:\\</span></span> | <span data-ttu-id="e79b6-371">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-371">Operating system disk</span></span>
<span data-ttu-id="e79b6-372">DB-Disco1 (disco di hello escluse dalla protezione)</span><span class="sxs-lookup"><span data-stu-id="e79b6-372">DB-Disk1 (Excluded hello disk from protection)</span></span> | <span data-ttu-id="e79b6-373">Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-373">Disk1</span></span> | <span data-ttu-id="e79b6-374">G:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-374">G:\\</span></span> | <span data-ttu-id="e79b6-375">pagefile.sys</span><span class="sxs-lookup"><span data-stu-id="e79b6-375">pagefile.sys</span></span>
<span data-ttu-id="e79b6-376">DB-Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-376">DB-Disk2</span></span> | <span data-ttu-id="e79b6-377">Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-377">Disk2</span></span> | <span data-ttu-id="e79b6-378">E:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-378">E:\\</span></span> | <span data-ttu-id="e79b6-379">Dati utente 1</span><span class="sxs-lookup"><span data-stu-id="e79b6-379">User data 1</span></span>
<span data-ttu-id="e79b6-380">DB-Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-380">DB-Disk3</span></span> | <span data-ttu-id="e79b6-381">Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-381">Disk3</span></span> | <span data-ttu-id="e79b6-382">F:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-382">F:\\</span></span> | <span data-ttu-id="e79b6-383">Dati utente 2</span><span class="sxs-lookup"><span data-stu-id="e79b6-383">User data 2</span></span>

<span data-ttu-id="e79b6-384">Di seguito sono hello impostazioni del file paging nella macchina virtuale di hello locale:</span><span class="sxs-lookup"><span data-stu-id="e79b6-384">Here are hello paging file settings on hello on-premises virtual machine:</span></span>

![File di paging nella macchina virtuale di hello locale](./media/site-recovery-exclude-disk/pagefile-on-g-drive-sourceVM.png)

<span data-ttu-id="e79b6-386">Dopo il failover della macchina virtuale hello da tooAzure VMware/Hyper-V, dischi su hello macchina virtuale di Azure sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="e79b6-386">After failover of hello virtual machine from VMware/Hyper-V tooAzure, disks on hello Azure virtual machine are as follows:</span></span>

<span data-ttu-id="e79b6-387">**Nome del disco**</span><span class="sxs-lookup"><span data-stu-id="e79b6-387">**Disk name**</span></span>| <span data-ttu-id="e79b6-388">**N. disco sistema operativo guest**</span><span class="sxs-lookup"><span data-stu-id="e79b6-388">**Guest operating system disk#**</span></span>| <span data-ttu-id="e79b6-389">**Lettera di unità**</span><span class="sxs-lookup"><span data-stu-id="e79b6-389">**Drive letter**</span></span> | <span data-ttu-id="e79b6-390">**Tipo di dati su disco hello**</span><span class="sxs-lookup"><span data-stu-id="e79b6-390">**Data type on hello disk**</span></span>
--- | --- | --- | ---
<span data-ttu-id="e79b6-391">DB-Disk0-OS</span><span class="sxs-lookup"><span data-stu-id="e79b6-391">DB-Disk0-OS</span></span> | <span data-ttu-id="e79b6-392">DISK0</span><span class="sxs-lookup"><span data-stu-id="e79b6-392">DISK0</span></span>  |<span data-ttu-id="e79b6-393">C:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-393">C:\\</span></span> |<span data-ttu-id="e79b6-394">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="e79b6-394">Operating system disk</span></span>
<span data-ttu-id="e79b6-395">DB-Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-395">DB-Disk1</span></span> | <span data-ttu-id="e79b6-396">Disk1</span><span class="sxs-lookup"><span data-stu-id="e79b6-396">Disk1</span></span> | <span data-ttu-id="e79b6-397">D:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-397">D:\\</span></span> | <span data-ttu-id="e79b6-398">Archiviazione temporanea</br /> </br />pagefile.sys</span><span class="sxs-lookup"><span data-stu-id="e79b6-398">Temporary storage</br /> </br />pagefile.sys</span></span>
<span data-ttu-id="e79b6-399">DB-Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-399">DB-Disk2</span></span> | <span data-ttu-id="e79b6-400">Disk2</span><span class="sxs-lookup"><span data-stu-id="e79b6-400">Disk2</span></span> | <span data-ttu-id="e79b6-401">E:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-401">E:\\</span></span> | <span data-ttu-id="e79b6-402">Dati utente 1</span><span class="sxs-lookup"><span data-stu-id="e79b6-402">User data 1</span></span>
<span data-ttu-id="e79b6-403">DB-Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-403">DB-Disk3</span></span> | <span data-ttu-id="e79b6-404">Disk3</span><span class="sxs-lookup"><span data-stu-id="e79b6-404">Disk3</span></span> | <span data-ttu-id="e79b6-405">F:\\</span><span class="sxs-lookup"><span data-stu-id="e79b6-405">F:\\</span></span> | <span data-ttu-id="e79b6-406">Dati utente 2</span><span class="sxs-lookup"><span data-stu-id="e79b6-406">User data 2</span></span>

<span data-ttu-id="e79b6-407">Poiché l'unità d: hello prima lettera di unità dall'elenco disponibile hello, Azure assegna volume di archiviazione temporanea toohello d:.</span><span class="sxs-lookup"><span data-stu-id="e79b6-407">Because D: is hello first drive letter from available hello list, Azure assigns D: toohello temporary storage volume.</span></span> <span data-ttu-id="e79b6-408">Per tutti i dischi hello replicato, rimane lettera di unità hello hello stesso.</span><span class="sxs-lookup"><span data-stu-id="e79b6-408">For all hello replicated disks, hello drive letter remains hello same.</span></span> <span data-ttu-id="e79b6-409">Poiché hello disco g: non è disponibile, il sistema hello utilizzerà unità c: hello hello file di paging.</span><span class="sxs-lookup"><span data-stu-id="e79b6-409">Because hello G: disk is not available, hello system will use hello C: drive for hello paging file.</span></span>

<span data-ttu-id="e79b6-410">Di seguito sono hello impostazioni del file paging su hello macchina virtuale di Azure:</span><span class="sxs-lookup"><span data-stu-id="e79b6-410">Here are hello paging file settings on hello Azure virtual machine:</span></span>

![Impostazioni del file di paging nella macchina virtuale di Azure](./media/site-recovery-exclude-disk/pagefile-on-Azure-vm-after-failover-2.png)

## <a name="next-steps"></a><span data-ttu-id="e79b6-412">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="e79b6-412">Next steps</span></span>
<span data-ttu-id="e79b6-413">Dopo aver configurato correttamente la distribuzione, vedere [altre informazioni](site-recovery-failover.md) sui diversi tipi di failover.</span><span class="sxs-lookup"><span data-stu-id="e79b6-413">After your deployment is set up and running, [learn more](site-recovery-failover.md) about different types of failover.</span></span>
