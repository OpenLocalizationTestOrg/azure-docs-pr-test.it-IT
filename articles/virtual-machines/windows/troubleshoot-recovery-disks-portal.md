---
title: Usare una macchina virtuale per la risoluzione dei problemi Windows nel portale di Azure | Documentazione Microsoft
description: Informazioni su come risolvere i problemi delle macchine virtuali Windows in Azure connettendo il disco del sistema operativo a una macchina virtuale di ripristino nel portale di Azure
services: virtual-machines-windows
documentationCenter: 
authors: genlin
manager: timlt
editor: 
ms.service: virtual-machines-windows
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: infrastructure
ms.date: 05/26/2017
ms.author: genli
ms.openlocfilehash: 2c1524949931d69d7553d284bb92c550a61c521a
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshoot-a-windows-vm-by-attaching-the-os-disk-to-a-recovery-vm-using-the-azure-portal"></a><span data-ttu-id="09a70-103">Risolvere i problemi relativi a una macchina virtuale Windows collegando il disco del sistema operativo a una macchina virtuale di ripristino nel portale di Azure</span><span class="sxs-lookup"><span data-stu-id="09a70-103">Troubleshoot a Windows VM by attaching the OS disk to a recovery VM using the Azure portal</span></span>
<span data-ttu-id="09a70-104">Se nella macchina virtuale Windows in Azure viene rilevato un errore di avvio o del disco, potrebbe essere necessario eseguire alcuni passaggi per la risoluzione dei problemi sul disco rigido virtuale stesso.</span><span class="sxs-lookup"><span data-stu-id="09a70-104">If your Windows virtual machine (VM) in Azure encounters a boot or disk error, you may need to perform troubleshooting steps on the virtual hard disk itself.</span></span> <span data-ttu-id="09a70-105">Un esempio comune è un aggiornamento di un'applicazione non riuscito che impedisce il corretto avvio della VM.</span><span class="sxs-lookup"><span data-stu-id="09a70-105">A common example would be a failed application update that prevents the VM from being able to boot successfully.</span></span> <span data-ttu-id="09a70-106">Questo articolo illustra come usare il portale di Azure per connettere il disco rigido virtuale a un'altra VM Windows per risolvere eventuali errori e quindi ricreare la VM originale.</span><span class="sxs-lookup"><span data-stu-id="09a70-106">This article details how to use the Azure portal to connect your virtual hard disk to another Windows VM to fix any errors, then re-create your original VM.</span></span>

## <a name="recovery-process-overview"></a><span data-ttu-id="09a70-107">Panoramica del processo di ripristino</span><span class="sxs-lookup"><span data-stu-id="09a70-107">Recovery process overview</span></span>
<span data-ttu-id="09a70-108">I passaggi per la risoluzione dei problemi sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="09a70-108">The troubleshooting process is as follows:</span></span>

1. <span data-ttu-id="09a70-109">Eliminare la macchina virtuale su cui si riscontrano i problemi, mantenendo i dischi rigidi virtuali.</span><span class="sxs-lookup"><span data-stu-id="09a70-109">Delete the VM encountering issues, keeping the virtual hard disks.</span></span>
2. <span data-ttu-id="09a70-110">Collegare e montare il disco rigido virtuale in un'altra VM Windows per risolvere i problemi riscontrati.</span><span class="sxs-lookup"><span data-stu-id="09a70-110">Attach and mount the virtual hard disk to another Windows VM for troubleshooting purposes.</span></span>
3. <span data-ttu-id="09a70-111">Connettersi alla macchina virtuale usata per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="09a70-111">Connect to the troubleshooting VM.</span></span> <span data-ttu-id="09a70-112">Modificare i file o eseguire eventuali strumenti per risolvere i problemi nel disco rigido virtuale originale.</span><span class="sxs-lookup"><span data-stu-id="09a70-112">Edit files or run any tools to fix issues on the original virtual hard disk.</span></span>
4. <span data-ttu-id="09a70-113">Smontare e scollegare il disco rigido virtuale dalla macchina virtuale usata per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="09a70-113">Unmount and detach the virtual hard disk from the troubleshooting VM.</span></span>
5. <span data-ttu-id="09a70-114">Creare una VM usando il disco rigido virtuale originale.</span><span class="sxs-lookup"><span data-stu-id="09a70-114">Create a VM using the original virtual hard disk.</span></span>


## <a name="determine-boot-issues"></a><span data-ttu-id="09a70-115">Individuare i problemi di avvio</span><span class="sxs-lookup"><span data-stu-id="09a70-115">Determine boot issues</span></span>
<span data-ttu-id="09a70-116">Per determinare perché la VM non riesce ad avviarsi correttamente, esaminare lo screenshot della VM relativo alla diagnostica di avvio.</span><span class="sxs-lookup"><span data-stu-id="09a70-116">To determine why your VM is not able to boot correctly, examine the boot diagnostics VM screenshot.</span></span> <span data-ttu-id="09a70-117">Un esempio comune è un aggiornamento di un'applicazione non riuscito oppure l'eliminazione o lo spostamento di un disco rigido virtuale sottostante.</span><span class="sxs-lookup"><span data-stu-id="09a70-117">A common example would be a failed application update, or an underlying virtual hard disk being deleted or moved.</span></span>

<span data-ttu-id="09a70-118">Nel portale, selezionare la macchina virtuale e quindi scorrere verso il basso fino alla sezione **Supporto e risoluzione dei problemi**.</span><span class="sxs-lookup"><span data-stu-id="09a70-118">Select your VM in the portal and then scroll down to the **Support + Troubleshooting** section.</span></span> <span data-ttu-id="09a70-119">Fare clic su **Diagnostica di avvio** per visualizzare lo screenshot.</span><span class="sxs-lookup"><span data-stu-id="09a70-119">Click **Boot diagnostics** to view the screenshot.</span></span> <span data-ttu-id="09a70-120">Esaminare i messaggi di errore o i codici errore specifici per determinare perché si sta verificando un problema con la VM.</span><span class="sxs-lookup"><span data-stu-id="09a70-120">Note any specific error messages or error codes to help determine why the VM is encountering an issue.</span></span> <span data-ttu-id="09a70-121">L'esempio seguente illustra una VM in attesa dell'arresto dei servizi:</span><span class="sxs-lookup"><span data-stu-id="09a70-121">The following example shows a VM waiting on stopping services:</span></span>

![Visualizzazione dei registri della console nella diagnostica di avvio della macchina virtuale](./media/troubleshoot-recovery-disks-portal/screenshot-error.png)

<span data-ttu-id="09a70-123">È anche possibile fare clic **Screenshot** per scaricare una cattura dello screenshot della VM.</span><span class="sxs-lookup"><span data-stu-id="09a70-123">You can also click **Screenshot** to download a capture of the VM screenshot.</span></span>


## <a name="view-existing-virtual-hard-disk-details"></a><span data-ttu-id="09a70-124">Visualizzare i dettagli del disco rigido virtuale esistente</span><span class="sxs-lookup"><span data-stu-id="09a70-124">View existing virtual hard disk details</span></span>
<span data-ttu-id="09a70-125">Prima di collegare il disco rigido virtuale a un'altra macchina virtuale, è necessario identificare il nome del disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="09a70-125">Before you can attach your virtual hard disk to another VM, you need to identify the name of the virtual hard disk (VHD).</span></span> 

<span data-ttu-id="09a70-126">Selezionare il gruppo di risorse dal portale, quindi selezionare il proprio account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="09a70-126">Select your resource group from the portal, then select your storage account.</span></span> <span data-ttu-id="09a70-127">Fare clic su **BLOB**, come nell'esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="09a70-127">Click **Blobs**, as in the following example:</span></span>

![Selezionare il BLOB di archiviazione](./media/troubleshoot-recovery-disks-portal/storage-account-overview.png)

<span data-ttu-id="09a70-129">In genere è presente un contenitore denominato **vhds** che contiene i dischi rigidi virtuali.</span><span class="sxs-lookup"><span data-stu-id="09a70-129">Typically you have a container named **vhds** that stores your virtual hard disks.</span></span> <span data-ttu-id="09a70-130">Selezionare il contenitore per visualizzare un elenco dei dischi rigidi virtuali.</span><span class="sxs-lookup"><span data-stu-id="09a70-130">Select the container to view a list of virtual hard disks.</span></span> <span data-ttu-id="09a70-131">Annotare il nome del disco rigido virtuale desiderato. Il prefisso è in genere il nome della propria macchina virtuale:</span><span class="sxs-lookup"><span data-stu-id="09a70-131">Note the name of your VHD (the prefix is usually the name of your VM):</span></span>

![Identificare il disco rigido virtuale nel contenitore di archiviazione](./media/troubleshoot-recovery-disks-portal/storage-container.png)

<span data-ttu-id="09a70-133">Selezionare il disco rigido virtuale esistente dall'elenco e copiare l'URL, che verrà usato nei passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="09a70-133">Select your existing virtual hard disk from the list and copy the URL for use in the following steps:</span></span>

![Copiare l'URL del disco rigido virtuale esistente](./media/troubleshoot-recovery-disks-portal/copy-vhd-url.png)


## <a name="delete-existing-vm"></a><span data-ttu-id="09a70-135">Eliminare la VM esistente</span><span class="sxs-lookup"><span data-stu-id="09a70-135">Delete existing VM</span></span>
<span data-ttu-id="09a70-136">In Azure, i dischi rigidi virtuali e le macchine virtuali sono due risorse distinte.</span><span class="sxs-lookup"><span data-stu-id="09a70-136">Virtual hard disks and VMs are two distinct resources in Azure.</span></span> <span data-ttu-id="09a70-137">In un disco rigido virtuale sono archiviati il sistema operativo, le applicazioni e le configurazioni.</span><span class="sxs-lookup"><span data-stu-id="09a70-137">A virtual hard disk is where the operating system itself, applications, and configurations are stored.</span></span> <span data-ttu-id="09a70-138">La macchina virtuale è invece costituita da metadati che definiscono le dimensioni o il percorso, e da risorse di riferimento, ad esempio un disco rigido virtuale o una scheda di interfaccia di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="09a70-138">The VM itself is just metadata that defines the size or location, and references resources such as a virtual hard disk or virtual network interface card (NIC).</span></span> <span data-ttu-id="09a70-139">A ogni disco rigido virtuale associato a una macchina virtuale viene assegnato un lease.</span><span class="sxs-lookup"><span data-stu-id="09a70-139">Each virtual hard disk has a lease assigned when attached to a VM.</span></span> <span data-ttu-id="09a70-140">È possibile collegare e scollegare i dischi dati anche quando la macchina virtuale è in esecuzione, mentre non è possibile scollegare il disco del sistema operativo, a meno che la risorsa di macchina non sia stata eliminata.</span><span class="sxs-lookup"><span data-stu-id="09a70-140">Although data disks can be attached and detached even while the VM is running, the OS disk cannot be detached unless the VM resource is deleted.</span></span> <span data-ttu-id="09a70-141">Il lease continua ad associare il disco del sistema operativo e la macchina virtuale anche quando questa viene arrestata e deallocata.</span><span class="sxs-lookup"><span data-stu-id="09a70-141">The lease continues to associate the OS disk with a VM even when that VM is in a stopped and deallocated state.</span></span>

<span data-ttu-id="09a70-142">Il primo passaggio per ripristinare la macchina virtuale consiste nell'eliminare la risorsa della macchina virtuale stessa.</span><span class="sxs-lookup"><span data-stu-id="09a70-142">The first step to recover your VM is to delete the VM resource itself.</span></span> <span data-ttu-id="09a70-143">Anche se si elimina la macchina virtuale, i dischi rigidi virtuali restano nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="09a70-143">Deleting the VM leaves the virtual hard disks in your storage account.</span></span> <span data-ttu-id="09a70-144">Dopo aver eliminato la macchina virtuale, il disco rigido virtuale viene collegato a un'altra macchina virtuale per diagnosticare e risolvere gli errori.</span><span class="sxs-lookup"><span data-stu-id="09a70-144">After the VM is deleted, you attach the virtual hard disk to another VM to troubleshoot and resolve the errors.</span></span>

<span data-ttu-id="09a70-145">Selezionare la macchina virtuale nel portale, quindi fare clic su **Elimina**:</span><span class="sxs-lookup"><span data-stu-id="09a70-145">Select your VM in the portal, then click **Delete**:</span></span>

![Schermata di diagnostica di avvio della macchina virtuale che mostra un errore di avvio](./media/troubleshoot-recovery-disks-portal/stop-delete-vm.png)

<span data-ttu-id="09a70-147">Attendere il completamento dell'eliminazione della macchina virtuale prima di collegare il disco rigido virtuale a un'altra macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09a70-147">Wait until the VM has finished deleting before you attach the virtual hard disk to another VM.</span></span> <span data-ttu-id="09a70-148">Il lease del disco rigido virtuale che lo associa alla macchina virtuale deve essere rilasciato prima di poter collegare il disco a un'altra macchina.</span><span class="sxs-lookup"><span data-stu-id="09a70-148">The lease on the virtual hard disk that associates it with the VM needs to be released before you can attach the virtual hard disk to another VM.</span></span>


## <a name="attach-existing-virtual-hard-disk-to-another-vm"></a><span data-ttu-id="09a70-149">Collegare il disco rigido virtuale esistente a un'altra macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="09a70-149">Attach existing virtual hard disk to another VM</span></span>
<span data-ttu-id="09a70-150">Nei passaggi successivi viene utilizzata un'altra macchina virtuale per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="09a70-150">For the next few steps, you use another VM for troubleshooting purposes.</span></span> <span data-ttu-id="09a70-151">Il disco rigido virtuale esistente viene collegato alla macchina virtuale usata per la risoluzione dei problemi, grazie alla quale è possibile individuare e modificare il contenuto del disco.</span><span class="sxs-lookup"><span data-stu-id="09a70-151">You attach the existing virtual hard disk to this troubleshooting VM to be able to browse and edit the disk's content.</span></span> <span data-ttu-id="09a70-152">Questo processo consente, ad esempio, di correggere eventuali errori di configurazione, di esaminare applicazioni aggiuntive o file del registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="09a70-152">This process allows you to correct any configuration errors or review additional application or system log files, for example.</span></span> <span data-ttu-id="09a70-153">Scegliere o creare un'altra macchina virtuale da usare per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="09a70-153">Choose or create another VM to use for troubleshooting purposes.</span></span>

1. <span data-ttu-id="09a70-154">Nel portale, selezionare il gruppo di risorse e quindi la macchina virtuale da usare per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="09a70-154">Select your resource group from the portal, then select your troubleshooting VM.</span></span> <span data-ttu-id="09a70-155">Selezionare **Dischi** e quindi fare clic su **Collega esistente**:</span><span class="sxs-lookup"><span data-stu-id="09a70-155">Select **Disks** and then click **Attach existing**:</span></span>

    ![Collegare un disco esistente nel portale](./media/troubleshoot-recovery-disks-portal/attach-existing-disk.png)

2. <span data-ttu-id="09a70-157">Per selezionare il disco rigido virtuale esistente, fare clic su **File VHD**:</span><span class="sxs-lookup"><span data-stu-id="09a70-157">To select your existing virtual hard disk, click **VHD File**:</span></span>

    ![Cercare il disco rigido virtuale esistente](./media/troubleshoot-recovery-disks-portal/select-vhd-location.png)

3. <span data-ttu-id="09a70-159">Selezionare l'account e il contenitore di archiviazione, quindi fare clic sul disco rigido virtuale esistente.</span><span class="sxs-lookup"><span data-stu-id="09a70-159">Select your storage account and container, then click your existing VHD.</span></span> <span data-ttu-id="09a70-160">Fare clic sul pulsante **Seleziona** per confermare la scelta:</span><span class="sxs-lookup"><span data-stu-id="09a70-160">Click the **Select** button to confirm your choice:</span></span>

    ![Selezionare il disco rigido virtuale esistente](./media/troubleshoot-recovery-disks-portal/select-vhd.png)

4. <span data-ttu-id="09a70-162">Dopo aver selezionato il disco rigido virtuale, fare clic su **OK** per collegare il disco rigido virtuale esistente:</span><span class="sxs-lookup"><span data-stu-id="09a70-162">With your VHD now selected, click **OK** to attach the existing virtual hard disk:</span></span>

    ![Confermare il collegamento del disco rigido virtuale esistente](./media/troubleshoot-recovery-disks-portal/attach-disk-confirm.png)

5. <span data-ttu-id="09a70-164">Dopo alcuni secondi, il riquadro **Dischi** della macchina virtuale esistente mostra il disco rigido virtuale esistente collegato come disco dati:</span><span class="sxs-lookup"><span data-stu-id="09a70-164">After a few seconds, the **Disks** pane for your VM lists your existing virtual hard disk connected as a data disk:</span></span>

    ![Disco rigido virtuale esistente collegato come disco dati](./media/troubleshoot-recovery-disks-portal/attached-disk.png)


## <a name="mount-the-attached-data-disk"></a><span data-ttu-id="09a70-166">Montare il disco dati collegato</span><span class="sxs-lookup"><span data-stu-id="09a70-166">Mount the attached data disk</span></span>

1. <span data-ttu-id="09a70-167">Aprire una connessione Desktop remoto alla VM.</span><span class="sxs-lookup"><span data-stu-id="09a70-167">Open a Remote Desktop connection to your VM.</span></span> <span data-ttu-id="09a70-168">Selezionare la VM nel portale e fare clic su **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="09a70-168">Select your VM in the portal and click **Connect**.</span></span> <span data-ttu-id="09a70-169">Scaricare e aprire il file di connessione RDP.</span><span class="sxs-lookup"><span data-stu-id="09a70-169">Download and open the RDP connection file.</span></span> <span data-ttu-id="09a70-170">Immettere le credenziali per accedere alla VM, come segue:</span><span class="sxs-lookup"><span data-stu-id="09a70-170">Enter your credentials to log in to your VM as follows:</span></span>

    ![Accedere alla VM usando Desktop remoto](./media/troubleshoot-recovery-disks-portal/open-remote-desktop.png)

2. <span data-ttu-id="09a70-172">Aprire **Server Manager**, quindi selezionare **Servizi file e archiviazione**.</span><span class="sxs-lookup"><span data-stu-id="09a70-172">Open **Server Manager**, then select **File and Storage Services**.</span></span> 

    ![Selezionare Servizi file e archiviazione in Server Manager](./media/troubleshoot-recovery-disks-portal/server-manager-select-storage.png)

3. <span data-ttu-id="09a70-174">Il disco dati viene automaticamente rilevato e collegato.</span><span class="sxs-lookup"><span data-stu-id="09a70-174">The data disk is automatically detected and attached.</span></span> <span data-ttu-id="09a70-175">Per visualizzare un elenco dei dischi connessi, selezionare **Dischi**.</span><span class="sxs-lookup"><span data-stu-id="09a70-175">To see a list of the connected disks, select **Disks**.</span></span> <span data-ttu-id="09a70-176">È possibile selezionare il disco dati per visualizzare informazioni sul volume, inclusa la lettera di unità.</span><span class="sxs-lookup"><span data-stu-id="09a70-176">You can select your data disk to view volume information, including the drive letter.</span></span> <span data-ttu-id="09a70-177">L'esempio seguente illustra il disco dati collegato e l'uso di **F:**</span><span class="sxs-lookup"><span data-stu-id="09a70-177">The following example shows the data disk attached and using **F:**:</span></span>

    ![Disco collegato e informazioni sul volume in Server Manager](./media/troubleshoot-recovery-disks-portal/server-manager-disk-attached.png)


## <a name="fix-issues-on-original-virtual-hard-disk"></a><span data-ttu-id="09a70-179">Risolvere i problemi del disco rigido virtuale originale</span><span class="sxs-lookup"><span data-stu-id="09a70-179">Fix issues on original virtual hard disk</span></span>
<span data-ttu-id="09a70-180">Dopo aver montato il disco rigido virtuale eseguire tutte le operazioni di manutenzione e i passaggi necessari per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="09a70-180">With the existing virtual hard disk mounted, you can now perform any maintenance and troubleshooting steps as needed.</span></span> <span data-ttu-id="09a70-181">Dopo avere risolto i problemi, continuare con la procedura seguente.</span><span class="sxs-lookup"><span data-stu-id="09a70-181">Once you have addressed the issues, continue with the following steps.</span></span>


## <a name="unmount-and-detach-original-virtual-hard-disk"></a><span data-ttu-id="09a70-182">Smontare e scollegare il disco rigido virtuale originale</span><span class="sxs-lookup"><span data-stu-id="09a70-182">Unmount and detach original virtual hard disk</span></span>
<span data-ttu-id="09a70-183">Dopo aver risolto gli errori, scollegare il disco rigido virtuale esistente dalla macchina virtuale usata per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="09a70-183">Once your errors are resolved, detach the existing virtual hard disk from your troubleshooting VM.</span></span> <span data-ttu-id="09a70-184">Non è possibile usare il disco rigido virtuale con altre macchine virtuali finché non viene rilasciato il lease che collega il disco rigido virtuale alla macchina virtuale usata per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="09a70-184">You cannot use your virtual hard disk with any other VM until the lease attaching the virtual hard disk to the troubleshooting VM is released.</span></span>

1. <span data-ttu-id="09a70-185">Dalla sessione RDP stabilita con la VM aprire **Server Manager**, quindi selezionare **Servizi file e archiviazione**:</span><span class="sxs-lookup"><span data-stu-id="09a70-185">From the RDP session to your VM, open **Server Manager**, then select **File and Storage Services**:</span></span>

    ![Selezionare Servizi file e archiviazione in Server Manager](./media/troubleshoot-recovery-disks-portal/server-manager-select-storage.png)

2. <span data-ttu-id="09a70-187">Selezionare **Dischi** e quindi selezionare il disco dati.</span><span class="sxs-lookup"><span data-stu-id="09a70-187">Select **Disks** and then select your data disk.</span></span> <span data-ttu-id="09a70-188">Fare clic con il pulsante destro del mouse sul disco dati e selezionare **Porta offline**:</span><span class="sxs-lookup"><span data-stu-id="09a70-188">Right-click on your data disk and select **Take Offline**:</span></span>

    ![Impostare il disco dati come offline in Server Manager](./media/troubleshoot-recovery-disks-portal/server-manager-set-disk-offline.png)

3. <span data-ttu-id="09a70-190">Scollegare il disco rigido virtuale dalla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09a70-190">Now detach the virtual hard disk from the VM.</span></span> <span data-ttu-id="09a70-191">Selezionare la macchina virtuale nel portale di Azure e fare clic su **Dischi**.</span><span class="sxs-lookup"><span data-stu-id="09a70-191">Select your VM in the Azure portal and click **Disks**.</span></span> <span data-ttu-id="09a70-192">Selezionare il disco rigido virtuale esistente quindi fare clic su **Scollega**:</span><span class="sxs-lookup"><span data-stu-id="09a70-192">Select your existing virtual hard disk and then click **Detach**:</span></span>

    ![Scollegare il disco rigido virtuale esistente](./media/troubleshoot-recovery-disks-portal/detach-disk.png)

    <span data-ttu-id="09a70-194">Attendere che il disco dati sia completamente scollegato dalla macchina virtuale prima di continuare.</span><span class="sxs-lookup"><span data-stu-id="09a70-194">Wait until the VM has successfully detached the data disk before continuing.</span></span>

## <a name="create-vm-from-original-hard-disk"></a><span data-ttu-id="09a70-195">Creare una macchina virtuale dal disco rigido originale</span><span class="sxs-lookup"><span data-stu-id="09a70-195">Create VM from original hard disk</span></span>
<span data-ttu-id="09a70-196">Per creare una macchina virtuale dal disco rigido virtuale originale, usare [questo modello di Azure Resource Manager](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-specialized-vhd-existing-vnet).</span><span class="sxs-lookup"><span data-stu-id="09a70-196">To create a VM from your original virtual hard disk, use [this Azure Resource Manager template](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-specialized-vhd-existing-vnet).</span></span> <span data-ttu-id="09a70-197">Il modello distribuisce una macchina virtuale in una rete virtuale esistente, usando l'URL del disco rigido virtuale del comando precedente.</span><span class="sxs-lookup"><span data-stu-id="09a70-197">The template deploys a VM into an existing virtual network, using the VHD URL from the earlier command.</span></span> <span data-ttu-id="09a70-198">Fare clic sul pulsante **Distribuisci in Azure** come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="09a70-198">Click the **Deploy to Azure** button as follows:</span></span>

![Distribuire una macchina virtuale da una modello di Github](./media/troubleshoot-recovery-disks-portal/deploy-template-from-github.png)

<span data-ttu-id="09a70-200">Il modello viene caricato nel portale di Azure per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="09a70-200">The template is loaded into the Azure portal for deployment.</span></span> <span data-ttu-id="09a70-201">Immettere i nomi della nuova macchina virtuale e delle risorse di Azure esistenti e incollare l'URL del disco rigido virtuale esistente.</span><span class="sxs-lookup"><span data-stu-id="09a70-201">Enter the names for your new VM and existing Azure resources, and paste the URL to your existing virtual hard disk.</span></span> <span data-ttu-id="09a70-202">Per avviare la distribuzione, fare clic su **Acquista**:</span><span class="sxs-lookup"><span data-stu-id="09a70-202">To begin the deployment, click **Purchase**:</span></span>

![Distribuire una macchina virtuale dal modello](./media/troubleshoot-recovery-disks-portal/deploy-from-image.png)


## <a name="re-enable-boot-diagnostics"></a><span data-ttu-id="09a70-204">Riabilitare la diagnostica di avvio</span><span class="sxs-lookup"><span data-stu-id="09a70-204">Re-enable boot diagnostics</span></span>
<span data-ttu-id="09a70-205">Quando si crea la macchina virtuale dal disco rigido virtuale esistente, la diagnostica di avvio potrebbe non essere abilitata automaticamente.</span><span class="sxs-lookup"><span data-stu-id="09a70-205">When you create your VM from the existing virtual hard disk, boot diagnostics may not automatically be enabled.</span></span> <span data-ttu-id="09a70-206">Per controllare lo stato della diagnostica di avvio e attivarla se necessario, selezionare la macchina virtuale nel portale.</span><span class="sxs-lookup"><span data-stu-id="09a70-206">To check the status of boot diagnostics and turn on if needed, select your VM in the portal.</span></span> <span data-ttu-id="09a70-207">In **Monitoraggio**, fare clic su **Impostazioni di diagnostica**.</span><span class="sxs-lookup"><span data-stu-id="09a70-207">Under **Monitoring**, click **Diagnostics settings**.</span></span> <span data-ttu-id="09a70-208">Verificare che lo stato sia **Attivo** e che il segno di spunta accanto a **Diagnostica di avvio** sia selezionato.</span><span class="sxs-lookup"><span data-stu-id="09a70-208">Ensure the status is **On**, and the check mark next to **Boot diagnostics** is selected.</span></span> <span data-ttu-id="09a70-209">Se si apportano modifiche, fare clic su **Salva**:</span><span class="sxs-lookup"><span data-stu-id="09a70-209">If you make any changes, click **Save**:</span></span>

![Aggiornare le impostazioni di diagnostica di avvio](./media/troubleshoot-recovery-disks-portal/reenable-boot-diagnostics.png)

## <a name="next-steps"></a><span data-ttu-id="09a70-211">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="09a70-211">Next steps</span></span>
<span data-ttu-id="09a70-212">Se si sono verificati problemi durante la connessione alla VM, vedere [Risolvere i problemi di connessioni RDP a una macchina virtuale di Azure](troubleshoot-rdp-connection.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="09a70-212">If you are having issues connecting to your VM, see [Troubleshoot RDP connections to an Azure VM](troubleshoot-rdp-connection.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="09a70-213">Per problemi relativi all'accesso alle applicazioni in esecuzione nella VM, vedere [Risolvere i problemi di connettività a un'applicazione in una macchina virtuale Windows](troubleshoot-app-connection.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="09a70-213">For issues with accessing applications running on your VM, see [Troubleshoot application connectivity issues on a Windows VM](troubleshoot-app-connection.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="09a70-214">Per altre informazioni sull'uso di Resource Manager, vedere [Panoramica di Azure Resource Manager](../../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="09a70-214">For more information about using Resource Manager, see [Azure Resource Manager overview](../../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>