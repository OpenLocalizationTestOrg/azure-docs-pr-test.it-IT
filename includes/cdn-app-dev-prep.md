## <a name="prerequisites"></a><span data-ttu-id="2bd33-101">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="2bd33-101">Prerequisites</span></span>
<span data-ttu-id="2bd33-102">Prima di poter scrivere il codice di gestione della rete CDN, è necessario eseguire alcune operazioni preliminari per consentire al codice di interagire con Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="2bd33-102">Before we can write CDN management code, we need to do some preparation to enable our code to interact with the Azure Resource Manager.</span></span>  <span data-ttu-id="2bd33-103">A tale scopo è necessario:</span><span class="sxs-lookup"><span data-stu-id="2bd33-103">To do this, you'll need to:</span></span>

* <span data-ttu-id="2bd33-104">Creare un gruppo di risorse per includere il profilo di rete CDN che verrà creato in questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="2bd33-104">Create a resource group to contain the CDN profile we create in this tutorial</span></span>
* <span data-ttu-id="2bd33-105">Configurare Azure Active Directory per fornire l'autenticazione per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2bd33-105">Configure Azure Active Directory to provide authentication for our application</span></span>
* <span data-ttu-id="2bd33-106">Applicare le autorizzazioni al gruppo di risorse in modo che solo gli utenti autorizzati dal tenant di Azure AD possano interagire con il profilo di rete CDN</span><span class="sxs-lookup"><span data-stu-id="2bd33-106">Apply permissions to the resource group so that only authorized users from our Azure AD tenant can interact with our CDN profile</span></span>

### <a name="creating-the-resource-group"></a><span data-ttu-id="2bd33-107">Creazione del gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="2bd33-107">Creating the resource group</span></span>
1. <span data-ttu-id="2bd33-108">Accedere al [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="2bd33-108">Log into the [Azure Portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="2bd33-109">Fare clic sul pulsante **Nuovo** in alto a sinistra e poi su **Gestione** e **Gruppo di risorse**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-109">Click the **New** button in the upper left, and then **Management**, and **Resource Group**.</span></span>

    ![Creazione di un nuovo gruppo di risorse](./media/cdn-app-dev-prep/cdn-new-rg-1-include.png)
3. <span data-ttu-id="2bd33-111">Assegnare al gruppo di risorse il nome *CdnConsoleTutorial*.</span><span class="sxs-lookup"><span data-stu-id="2bd33-111">Call your resource group *CdnConsoleTutorial*.</span></span>  <span data-ttu-id="2bd33-112">Selezionare la sottoscrizione e scegliere un percorso locale.</span><span class="sxs-lookup"><span data-stu-id="2bd33-112">Select your subscription and choose a location near you.</span></span>  <span data-ttu-id="2bd33-113">Se si desidera, è possibile selezionare la casella di controllo **Aggiungi al dashboard** per aggiungere il gruppo di risorse al dashboard del portale.</span><span class="sxs-lookup"><span data-stu-id="2bd33-113">If you wish, you may click the **Pin to dashboard** checkbox to pin the resource group to the dashboard in the portal.</span></span>  <span data-ttu-id="2bd33-114">In questo modo sarà più semplice trovarlo in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="2bd33-114">This will make it easier to find later.</span></span>  <span data-ttu-id="2bd33-115">Dopo avere eseguito le selezioni, fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-115">After you've made your selections, click **Create**.</span></span>

    ![Assegnazione di un nome al gruppo di risorse](./media/cdn-app-dev-prep/cdn-new-rg-2-include.png)
4. <span data-ttu-id="2bd33-117">Se dopo la creazione il gruppo di risorse non viene aggiunto al dashboard, è possibile trovarlo facendo clic su **Esplora** e quindi su **Gruppi di risorse**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-117">After the resource group is created, if you didn't pin it to your dashboard, you can find it by clicking **Browse**, then **Resource Groups**.</span></span>  <span data-ttu-id="2bd33-118">Fare clic sul gruppo di risorse per aprirlo.</span><span class="sxs-lookup"><span data-stu-id="2bd33-118">Click the resource group to open it.</span></span>  <span data-ttu-id="2bd33-119">Annotare l' **ID sottoscrizione**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-119">Make a note of your **Subscription ID**.</span></span>  <span data-ttu-id="2bd33-120">Sarà necessario più avanti.</span><span class="sxs-lookup"><span data-stu-id="2bd33-120">We'll need it later.</span></span>

    ![Assegnazione di un nome al gruppo di risorse](./media/cdn-app-dev-prep/cdn-subscription-id-include.png)

### <a name="creating-the-azure-ad-application-and-applying-permissions"></a><span data-ttu-id="2bd33-122">Creazione dell'applicazione Azure AD e applicazione delle autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="2bd33-122">Creating the Azure AD application and applying permissions</span></span>
<span data-ttu-id="2bd33-123">Per l'autenticazione delle app con Azure Active Directory sono possibili due approcci: singoli utenti o un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2bd33-123">There are two approaches to app authentication with Azure Active Directory: Individual users or a service principal.</span></span> <span data-ttu-id="2bd33-124">Un'entità servizio è simile a un account di servizio di Windows.</span><span class="sxs-lookup"><span data-stu-id="2bd33-124">A service principal is similar to a service account in Windows.</span></span>  <span data-ttu-id="2bd33-125">Anziché concedere a un determinato utente le autorizzazioni per interagire con i profili di rete CDN, si concedono le autorizzazioni per l'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2bd33-125">Instead of granting a particular user permissions to interact with the CDN profiles, we instead grant the permissions to the service principal.</span></span>  <span data-ttu-id="2bd33-126">Le entità servizio in genere vengono usate per i processi automatizzati e non interattivi.</span><span class="sxs-lookup"><span data-stu-id="2bd33-126">Service principals are generally used for automated, non-interactive processes.</span></span>  <span data-ttu-id="2bd33-127">Sebbene in questa esercitazione si scriva un'applicazione console interattiva, ci si concentrerà sull'approccio dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2bd33-127">Even though this tutorial is writing an interactive console app, we'll focus on the service principal approach.</span></span>

<span data-ttu-id="2bd33-128">La creazione di un'entità servizio è costituita da diversi passaggi, compresa la creazione di un'applicazione Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2bd33-128">Creating a service principal consists of several steps, including creating an Azure Active Directory application.</span></span>  <span data-ttu-id="2bd33-129">A tale scopo si [eseguirà questa esercitazione](../articles/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="2bd33-129">To do this, we're going to [follow this tutorial](../articles/resource-group-create-service-principal-portal.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2bd33-130">Assicurarsi di completare tutti i passaggi dell' [esercitazione collegata](../articles/resource-group-create-service-principal-portal.md).</span><span class="sxs-lookup"><span data-stu-id="2bd33-130">Be sure to follow all the steps in the [linked tutorial](../articles/resource-group-create-service-principal-portal.md).</span></span>  <span data-ttu-id="2bd33-131">È *estremamente importante* eseguirla esattamente come descritto.</span><span class="sxs-lookup"><span data-stu-id="2bd33-131">It is *extremely important* that you complete it exactly as described.</span></span>  <span data-ttu-id="2bd33-132">Assicurarsi di annotare l'**ID tenant**, il **nome di dominio tenant** (in genere un dominio *.onmicrosoft.com*, se non è stato specificato un dominio personalizzato), l'**ID client** e la **chiave di autenticazione client**, che serviranno più avanti.</span><span class="sxs-lookup"><span data-stu-id="2bd33-132">Make sure to note your **tenant ID**, **tenant domain name** (commonly a *.onmicrosoft.com* domain unless you've specified a custom domain), **client ID**, and **client authentication key**, as we will need these later.</span></span>  <span data-ttu-id="2bd33-133">Proteggere con attenzione l'**ID client** e la **chiave di autenticazione client**, in quanto queste credenziali possono essere usate da chiunque per eseguire operazioni come entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2bd33-133">Be very careful to guard your **client ID** and **client authentication key**, as these credentials can be used by anyone to execute operations as the service principal.</span></span>
>
> <span data-ttu-id="2bd33-134">Quando si arriva al passaggio denominato Configurare l'applicazione multi-tenant, selezionare **No**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-134">When you get to the step named Configure multi-tenant application, select **No**.</span></span>
>
> <span data-ttu-id="2bd33-135">Quando si arriva al passaggio [Assign application to role](../articles/azure-resource-manager/resource-group-create-service-principal-portal.md#assign-application-to-role) (Assegnare l'applicazione al ruolo), usare il gruppo di risorse creato in precedenza, *CdnConsoleTutorial*, ma anziché il ruolo di **Lettore**, assegnare il ruolo di **CDN Profile Contributor**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-135">When you get to the step [Assign application to role](../articles/azure-resource-manager/resource-group-create-service-principal-portal.md#assign-application-to-role), use the resource group we created earlier,  *CdnConsoleTutorial*, but instead of the **Reader** role, assign the **CDN Profile Contributor** role.</span></span>  <span data-ttu-id="2bd33-136">Dopo aver assegnato all'applicazione il ruolo di **collaboratore profilo di rete CDN** nel gruppo di risorse, tornare a questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="2bd33-136">After you assign the application the **CDN Profile Contributor** role on your resource group, return to this tutorial.</span></span> 
>
>

<span data-ttu-id="2bd33-137">Dopo aver creato l'entità servizio e assegnato il ruolo **CDN Profile Contributor**il pannello **Utenti** per il gruppo di risorse dovrebbe avere un aspetto simile a questo.</span><span class="sxs-lookup"><span data-stu-id="2bd33-137">Once you've created your service principal and assigned the **CDN Profile Contributor** role, the **Users** blade for your resource group should look similar to this.</span></span>

![Pannello Utenti](./media/cdn-app-dev-prep/cdn-service-principal-include.png)

### <a name="interactive-user-authentication"></a><span data-ttu-id="2bd33-139">Autenticazione utente interattiva</span><span class="sxs-lookup"><span data-stu-id="2bd33-139">Interactive user authentication</span></span>
<span data-ttu-id="2bd33-140">Se, invece di un'entità servizio, si preferisce l'autenticazione interattiva del singolo utente, il processo è molto simile a quello per un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2bd33-140">If, instead of a service principal, you'd rather have interactive individual user authentication, the process is very similar to that for a service principal.</span></span>  <span data-ttu-id="2bd33-141">Infatti, è necessario seguire la stessa procedura, a parte alcune piccole modifiche.</span><span class="sxs-lookup"><span data-stu-id="2bd33-141">In fact, you will need to follow the same procedure, but make a few minor changes.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2bd33-142">Seguire questa procedura solo se si sceglie di utilizzare l'autenticazione interattiva del singolo utente anziché un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2bd33-142">Only follow these next steps if you are choosing to use individual user authentication instead of a service principal.</span></span>
>
>

1. <span data-ttu-id="2bd33-143">Quando si crea l'applicazione, invece di **Applicazione Web** scegliere **Applicazione nativa**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-143">When creating your application, instead of **Web Application**, choose **Native application**.</span></span>

    ![Applicazione nativa](./media/cdn-app-dev-prep/cdn-native-application-include.png)
2. <span data-ttu-id="2bd33-145">Nella pagina successiva verrà richiesto di immettere un **URI di reindirizzamento**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-145">On the next page, you will be prompted for a **redirect URI**.</span></span>  <span data-ttu-id="2bd33-146">L'URI non verrà convalidato, ma è necessario ricordare i valori immessi.</span><span class="sxs-lookup"><span data-stu-id="2bd33-146">The URI won't be validated, but remember what you entered.</span></span>  <span data-ttu-id="2bd33-147">Sarà necessario più avanti.</span><span class="sxs-lookup"><span data-stu-id="2bd33-147">You'll need it later.</span></span>
3. <span data-ttu-id="2bd33-148">Non è necessario creare una **chiave di autenticazione client**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-148">There is no need to create a **client authentication key**.</span></span>
4. <span data-ttu-id="2bd33-149">Invece di assegnare un'entità servizio al ruolo di **collaboratore profilo di rete CDN** , verranno assegnati singoli utenti o gruppi.</span><span class="sxs-lookup"><span data-stu-id="2bd33-149">Instead of assigning a service principal to the **CDN Profile Contributor** role, we're going to assign individual users or groups.</span></span>  <span data-ttu-id="2bd33-150">In questo esempio si può notare che è stato assegnato l'utente *CDN Demo User* al ruolo **CDN Profile Contributor**.</span><span class="sxs-lookup"><span data-stu-id="2bd33-150">In this example, you can see that I've assigned  *CDN Demo User* to the **CDN Profile Contributor** role.</span></span>  

    ![Accesso del singolo utente](./media/cdn-app-dev-prep/cdn-aad-user-include.png)
