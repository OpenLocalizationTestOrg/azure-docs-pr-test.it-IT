---
title: Convalida - modellazione strumento Microsoft Threat - Azure aaaInput | Documenti Microsoft
description: misure di attenuazione esposte in hello strumento di modellazione del rischio di minacce per la
services: security
documentationcenter: na
author: RodSan
manager: RodSan
editor: RodSan
ms.assetid: na
ms.service: security
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: rodsan
ms.openlocfilehash: 823503881f4bae292ef021834d5e64acf2a0f54a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="security-frame-input-validation--mitigations"></a><span data-ttu-id="38e6c-103">Infrastruttura di sicurezza: convalida dell'input - Procedure di mitigazione</span><span class="sxs-lookup"><span data-stu-id="38e6c-103">Security Frame: Input Validation | Mitigations</span></span> 
| <span data-ttu-id="38e6c-104">Prodotto o servizio</span><span class="sxs-lookup"><span data-stu-id="38e6c-104">Product/Service</span></span> | <span data-ttu-id="38e6c-105">Articolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-105">Article</span></span> |
| --------------- | ------- |
| <span data-ttu-id="38e6c-106">**Applicazione Web**</span><span class="sxs-lookup"><span data-stu-id="38e6c-106">**Web Application**</span></span> | <ul><li>[<span data-ttu-id="38e6c-107">Disabilitare gli script XSLT per tutte le trasformazioni con fogli di stile non attendibili</span><span class="sxs-lookup"><span data-stu-id="38e6c-107">Disable XSLT scripting for all transforms using untrusted style sheets</span></span>](#disable-xslt)</li><li>[<span data-ttu-id="38e6c-108">Verificare che ogni pagina che potrebbe includere contenuti controllabili dall'utente rifiuti esplicitamente l'analisi MIME automatica</span><span class="sxs-lookup"><span data-stu-id="38e6c-108">Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>](#out-sniffing)</li><li>[<span data-ttu-id="38e6c-109">Applicare la protezione avanzata o la disabilitazione della risoluzione di entità XML</span><span class="sxs-lookup"><span data-stu-id="38e6c-109">Harden or Disable XML Entity Resolution</span></span>](#xml-resolution)</li><li>[<span data-ttu-id="38e6c-110">Verifica della canonizzazione degli URL nelle applicazioni che utilizzano http.sys</span><span class="sxs-lookup"><span data-stu-id="38e6c-110">Applications utilizing http.sys perform URL canonicalization verification</span></span>](#app-verification)</li><li>[<span data-ttu-id="38e6c-111">Verificare la presenza dei controlli appropriati quando si accettano file dagli utenti</span><span class="sxs-lookup"><span data-stu-id="38e6c-111">Ensure appropriate controls are in place when accepting files from users</span></span>](#controls-users)</li><li>[<span data-ttu-id="38e6c-112">Verificare che nell'applicazione Web vengano usati parametri indipendenti dai tipi per l'accesso ai dati</span><span class="sxs-lookup"><span data-stu-id="38e6c-112">Ensure that type-safe parameters are used in Web Application for data access</span></span>](#typesafe)</li><li>[<span data-ttu-id="38e6c-113">Utilizzare un modello separato l'associazione di classi o filtro elenchi tooprevent MVC assegnazione massa vulnerabilità</span><span class="sxs-lookup"><span data-stu-id="38e6c-113">Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>](#binding-mvc)</li><li>[<span data-ttu-id="38e6c-114">Codificare web non attendibile output precedente toorendering</span><span class="sxs-lookup"><span data-stu-id="38e6c-114">Encode untrusted web output prior toorendering</span></span>](#rendering)</li><li>[<span data-ttu-id="38e6c-115">Eseguire la convalida dell'input e applicare filtri a tutte le proprietà del modello di tipo stringa</span><span class="sxs-lookup"><span data-stu-id="38e6c-115">Perform input validation and filtering on all string type Model properties</span></span>](#typemodel)</li><li>[<span data-ttu-id="38e6c-116">Applicazione della purificazione nei campi modulo che accettano tutti i caratteri, ad esempio un editor di testo RTF</span><span class="sxs-lookup"><span data-stu-id="38e6c-116">Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>](#richtext)</li><li>[<span data-ttu-id="38e6c-117">Non assegnare toosinks elementi DOM che non dispongono di codifica incorporato</span><span class="sxs-lookup"><span data-stu-id="38e6c-117">Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>](#inbuilt-encode)</li><li>[<span data-ttu-id="38e6c-118">Convalidare tutti i reindirizzamenti all'interno di un'applicazione hello sono chiuso o completati in modo sicuro</span><span class="sxs-lookup"><span data-stu-id="38e6c-118">Validate all redirects within hello application are closed or done safely</span></span>](#redirect-safe)</li><li>[<span data-ttu-id="38e6c-119">Implementare la convalida dell'input in un tutti i parametri di tipo stringa accettati dai metodi del controller</span><span class="sxs-lookup"><span data-stu-id="38e6c-119">Implement input validation on all string type parameters accepted by Controller methods</span></span>](#string-method)</li><li>[<span data-ttu-id="38e6c-120">Impostare il timeout del limite superiore per l'elaborazione DoS tooprevent a causa di espressioni regolari toobad delle espressioni regolari</span><span class="sxs-lookup"><span data-stu-id="38e6c-120">Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>](#dos-expression)</li><li>[<span data-ttu-id="38e6c-121">Evitare di usare Html.Raw nelle visualizzazioni Razor</span><span class="sxs-lookup"><span data-stu-id="38e6c-121">Avoid using Html.Raw in Razor views</span></span>](#html-razor)</li></ul> | 
| <span data-ttu-id="38e6c-122">**Database**</span><span class="sxs-lookup"><span data-stu-id="38e6c-122">**Database**</span></span> | <ul><li>[<span data-ttu-id="38e6c-123">Non usare query dinamiche nelle stored procedure</span><span class="sxs-lookup"><span data-stu-id="38e6c-123">Do not use dynamic queries in stored procedures</span></span>](#stored-proc)</li></ul> |
| <span data-ttu-id="38e6c-124">**API Web**</span><span class="sxs-lookup"><span data-stu-id="38e6c-124">**Web API**</span></span> | <ul><li>[<span data-ttu-id="38e6c-125">Verificare l'esecuzione della convalida dei modelli nei metodi di API Web</span><span class="sxs-lookup"><span data-stu-id="38e6c-125">Ensure that model validation is done on Web API methods</span></span>](#validation-api)</li><li>[<span data-ttu-id="38e6c-126">Implementare la convalida dell'input in tutti i parametri di tipo stringa accettati dai metodi di API Web</span><span class="sxs-lookup"><span data-stu-id="38e6c-126">Implement input validation on all string type parameters accepted by Web API methods</span></span>](#string-api)</li><li>[<span data-ttu-id="38e6c-127">Verificare che nell'API Web vengano usati parametri indipendenti dai tipi per l'accesso ai dati</span><span class="sxs-lookup"><span data-stu-id="38e6c-127">Ensure that type-safe parameters are used in Web API for data access</span></span>](#typesafe-api)</li></ul> | 
| <span data-ttu-id="38e6c-128">**Azure Document DB**</span><span class="sxs-lookup"><span data-stu-id="38e6c-128">**Azure Document DB**</span></span> | <ul><li>[<span data-ttu-id="38e6c-129">Usare query SQL con parametri per DocumentDB</span><span class="sxs-lookup"><span data-stu-id="38e6c-129">Use parametrized SQL queries for DocumentDB</span></span>](#sql-docdb)</li></ul> | 
| <span data-ttu-id="38e6c-130">**WCF**</span><span class="sxs-lookup"><span data-stu-id="38e6c-130">**WCF**</span></span> | <ul><li>[<span data-ttu-id="38e6c-131">WCF: convalida dell'input tramite l'associazione allo schema</span><span class="sxs-lookup"><span data-stu-id="38e6c-131">WCF Input validation through Schema binding</span></span>](#schema-binding)</li><li>[<span data-ttu-id="38e6c-132">WCF: convalida dell'input tramite controlli parametro</span><span class="sxs-lookup"><span data-stu-id="38e6c-132">WCF- Input validation through Parameter Inspectors</span></span>](#parameters)</li></ul> |

## <span data-ttu-id="38e6c-133"><a id="disable-xslt"></a>Disabilitare gli script XSLT per tutte le trasformazioni con fogli di stile non attendibili</span><span class="sxs-lookup"><span data-stu-id="38e6c-133"><a id="disable-xslt"></a>Disable XSLT scripting for all transforms using untrusted style sheets</span></span>

| <span data-ttu-id="38e6c-134">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-134">Title</span></span>                   | <span data-ttu-id="38e6c-135">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-135">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-136">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-136">**Component**</span></span>               | <span data-ttu-id="38e6c-137">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-137">Web Application</span></span> | 
| <span data-ttu-id="38e6c-138">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-138">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-139">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-139">Build</span></span> |  
| <span data-ttu-id="38e6c-140">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-140">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-141">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-141">Generic</span></span> |
| <span data-ttu-id="38e6c-142">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-142">**Attributes**</span></span>              | <span data-ttu-id="38e6c-143">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-143">N/A</span></span>  |
| <span data-ttu-id="38e6c-144">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-144">**References**</span></span>              | <span data-ttu-id="38e6c-145">[Sicurezza XSLT ](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [Proprietà XsltSettings.EnableScript](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span><span class="sxs-lookup"><span data-stu-id="38e6c-145">[XSLT Security](https://msdn.microsoft.com/library/ms763800(v=vs.85).aspx), [XsltSettings.EnableScript Property](http://msdn.microsoft.com/library/system.xml.xsl.xsltsettings.enablescript.aspx)</span></span> |
| <span data-ttu-id="38e6c-146">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-146">**Steps**</span></span> | <span data-ttu-id="38e6c-147">XSLT supporta lo scripting all'interno di fogli di stile tramite hello `<msxml:script>` elemento.</span><span class="sxs-lookup"><span data-stu-id="38e6c-147">XSLT supports scripting inside style sheets using hello `<msxml:script>` element.</span></span> <span data-ttu-id="38e6c-148">In questo modo le funzioni personalizzate toobe utilizzato in una trasformazione XSLT.</span><span class="sxs-lookup"><span data-stu-id="38e6c-148">This allows custom functions toobe used in an XSLT transformation.</span></span> <span data-ttu-id="38e6c-149">Hello script viene eseguito nel contesto di hello del processo di hello eseguendo hello trasformazione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-149">hello script is executed under hello context of hello process performing hello transform.</span></span> <span data-ttu-id="38e6c-150">Script XSLT deve essere disabilitato in un'esecuzione tooprevent ambiente non attendibile di codice non attendibile.</span><span class="sxs-lookup"><span data-stu-id="38e6c-150">XSLT script must be disabled when in an untrusted environment tooprevent execution of untrusted code.</span></span> <span data-ttu-id="38e6c-151">*Se si utilizza .NET:* script XSLT sono disattivati per impostazione predefinita; tuttavia, è necessario assicurarsi che non è stato in modo esplicito abilitato tramite hello `XsltSettings.EnableScript` proprietà.</span><span class="sxs-lookup"><span data-stu-id="38e6c-151">*If using .NET:* XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello `XsltSettings.EnableScript` property.</span></span>|

### <a name="example"></a><span data-ttu-id="38e6c-152">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-152">Example</span></span> 

```C#
XsltSettings settings = new XsltSettings();
settings.EnableScript = true; // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="38e6c-153">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-153">Example</span></span>
<span data-ttu-id="38e6c-154">Se si utilizza con MSXML 6.0, script XSLT sono disattivati per impostazione predefinita. Tuttavia, è necessario assicurarsi che non è stato in modo esplicito abilitato tramite proprietà dell'oggetto DOM XML hello AllowXsltScript.</span><span class="sxs-lookup"><span data-stu-id="38e6c-154">If you are using using MSXML 6.0, XSLT scripting is disabled by default; however, you must ensure that it has not been explicitly enabled through hello XML DOM object property AllowXsltScript.</span></span> 

```C#
doc.setProperty("AllowXsltScript", true); // WRONG: THIS SHOULD BE SET toofalse
```

### <a name="example"></a><span data-ttu-id="38e6c-155">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-155">Example</span></span>
<span data-ttu-id="38e6c-156">Se si usa MSXML 5 o versione inferiore, gli script XSLT sono abilitati per impostazione predefinita e devono essere disabilitati in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="38e6c-156">If you are using MSXML 5 or below, XSLT scripting is enabled by default and you must explicitly disable it.</span></span> <span data-ttu-id="38e6c-157">Impostare hello DOM XML oggetto proprietà AllowXsltScript toofalse.</span><span class="sxs-lookup"><span data-stu-id="38e6c-157">Set hello XML DOM object property AllowXsltScript toofalse.</span></span> 

```C#
doc.setProperty("AllowXsltScript", false); // CORRECT. Setting toofalse disables XSLT scripting.
```

## <span data-ttu-id="38e6c-158"><a id="out-sniffing"></a>Verificare che ogni pagina che potrebbe includere contenuti controllabili dall'utente rifiuti esplicitamente l'analisi MIME automatica</span><span class="sxs-lookup"><span data-stu-id="38e6c-158"><a id="out-sniffing"></a>Ensure that each page that could contain user controllable content opts out of automatic MIME sniffing</span></span>

| <span data-ttu-id="38e6c-159">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-159">Title</span></span>                   | <span data-ttu-id="38e6c-160">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-160">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-161">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-161">**Component**</span></span>               | <span data-ttu-id="38e6c-162">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-162">Web Application</span></span> | 
| <span data-ttu-id="38e6c-163">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-163">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-164">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-164">Build</span></span> |  
| <span data-ttu-id="38e6c-165">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-165">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-166">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-166">Generic</span></span> |
| <span data-ttu-id="38e6c-167">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-167">**Attributes**</span></span>              | <span data-ttu-id="38e6c-168">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-168">N/A</span></span>  |
| <span data-ttu-id="38e6c-169">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-169">**References**</span></span>              | <span data-ttu-id="38e6c-170">[IE8 Security Part V: Comprehensive Protection](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx) (Sicurezza di IE8 parte V: protezione completa)</span><span class="sxs-lookup"><span data-stu-id="38e6c-170">[IE8 Security Part V - Comprehensive Protection](http://blogs.msdn.com/ie/archive/2008/07/02/ie8-security-part-v-comprehensive-protection.aspx)</span></span>  |
| <span data-ttu-id="38e6c-171">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-171">**Steps**</span></span> | <p><span data-ttu-id="38e6c-172">Per ogni pagina che può contenere contenuto controllabile utente, è necessario utilizzare l'intestazione HTTP hello `X-Content-Type-Options:nosniff`.</span><span class="sxs-lookup"><span data-stu-id="38e6c-172">For each page that could contain user controllable content, you must use hello HTTP Header `X-Content-Type-Options:nosniff`.</span></span> <span data-ttu-id="38e6c-173">toocomply con questo requisito, è possibile che l'intestazione obbligatoria hello set da una pagina solo per le pagine che possono contenere contenuto controllabile dall'utente oppure è possibile impostare a livello globale per tutte le pagine di un'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-173">toocomply with this requirement, you can either set hello required header page by page for only those pages that might contain user-controllable content, or you can set it globally for all pages in hello application.</span></span></p><p><span data-ttu-id="38e6c-174">Ogni tipo di file recapitato da un server web è associato un [tipo MIME](http://en.wikipedia.org/wiki/Mime_type) (chiamato anche un *contenuto-tipo*) che descrive la natura hello del contenuto di hello (vale a dire, immagine, testo, applicazione e così via)</span><span class="sxs-lookup"><span data-stu-id="38e6c-174">Each type of file delivered from a web server has an associated [MIME type](http://en.wikipedia.org/wiki/Mime_type) (also called a *content-type*) that describes hello nature of hello content (that is, image, text, application, etc.)</span></span></p><p><span data-ttu-id="38e6c-175">intestazione X-contenuto-tipo-Options Hello è un'intestazione HTTP che consente agli sviluppatori toospecify che il loro contenuto non è deve essere rilevato la presenza di MIME.</span><span class="sxs-lookup"><span data-stu-id="38e6c-175">hello X-Content-Type-Options header is an HTTP header that allows developers toospecify that their content should not be MIME-sniffed.</span></span> <span data-ttu-id="38e6c-176">Questa intestazione è progettato toomitigate analisi MIME attacchi.</span><span class="sxs-lookup"><span data-stu-id="38e6c-176">This header is designed toomitigate MIME-Sniffing attacks.</span></span> <span data-ttu-id="38e6c-177">Il supporto per questa intestazione è stato aggiunto in Internet Explorer 8 (IE8).</span><span class="sxs-lookup"><span data-stu-id="38e6c-177">Support for this header was added in Internet Explorer 8 (IE8)</span></span></p><p><span data-ttu-id="38e6c-178">Solo gli utenti di Internet Explorer 8 (IE8) potranno usufruire di X-Content-Type-Options.</span><span class="sxs-lookup"><span data-stu-id="38e6c-178">Only users of Internet Explorer 8 (IE8) will benefit from X-Content-Type-Options.</span></span> <span data-ttu-id="38e6c-179">Le versioni precedenti di Internet Explorer non rispettano attualmente intestazione X-contenuto-tipo-Options hello</span><span class="sxs-lookup"><span data-stu-id="38e6c-179">Previous versions of Internet Explorer do not currently respect hello X-Content-Type-Options header</span></span></p><p><span data-ttu-id="38e6c-180">Internet Explorer 8 (e versioni successive) sono hello solo funzionalità di rifiuto esplicito per analisi MIME tooimplement i browser principali.</span><span class="sxs-lookup"><span data-stu-id="38e6c-180">Internet Explorer 8 (and later) are hello only major browsers tooimplement a MIME-sniffing opt-out feature.</span></span> <span data-ttu-id="38e6c-181">Se e quando altri browser principali (Firefox, Safari, Chrome) implementare funzionalità simili, questa indicazione sarà sintassi tooinclude aggiornato per tali browser nonché</span><span class="sxs-lookup"><span data-stu-id="38e6c-181">If and when other major browsers (Firefox, Safari, Chrome) implement similar features, this recommendation will be updated tooinclude syntax for those browsers as well</span></span></p>|

### <a name="example"></a><span data-ttu-id="38e6c-182">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-182">Example</span></span>
<span data-ttu-id="38e6c-183">intestazione obbligatoria hello di tooenable globalmente per tutte le pagine applicazione hello, è possibile eseguire una delle seguenti hello:</span><span class="sxs-lookup"><span data-stu-id="38e6c-183">tooenable hello required header globally for all pages in hello application, you can do one of hello following:</span></span> 

* <span data-ttu-id="38e6c-184">Aggiungi intestazione hello nel file Web. config hello se un'applicazione hello è ospitata da Internet Information Services (IIS) 7</span><span class="sxs-lookup"><span data-stu-id="38e6c-184">Add hello header in hello web.config file if hello application is hosted by Internet Information Services (IIS) 7</span></span> 

```
<system.webServer> 
  <httpProtocol> 
    <customHeaders> 
      <add name=""X-Content-Type-Options"" value=""nosniff""/>
    </customHeaders>
  </httpProtocol>
</system.webServer> 
```

* <span data-ttu-id="38e6c-185">Aggiungi intestazione hello tramite hello applicazione globale\_BeginRequest</span><span class="sxs-lookup"><span data-stu-id="38e6c-185">Add hello header through hello global Application\_BeginRequest</span></span> 

``` 
void Application_BeginRequest(object sender, EventArgs e)
{
  this.Response.Headers[""X-Content-Type-Options""] = ""nosniff"";
} 
```

* <span data-ttu-id="38e6c-186">Implementare un modulo HTTP personalizzato</span><span class="sxs-lookup"><span data-stu-id="38e6c-186">Implement custom HTTP module</span></span> 

``` 
public class XContentTypeOptionsModule : IHttpModule 
  {
    #region IHttpModule Members 
    public void Dispose() 
    { 

    } 
    public void Init(HttpApplication context)
    { 
      context.PreSendRequestHeaders += newEventHandler(context_PreSendRequestHeaders); 
    } 
    #endregion 
    void context_PreSendRequestHeaders(object sender, EventArgs e) 
      { 
        HttpApplication application = sender as HttpApplication; 
        if (application == null) 
          return; 
        if (application.Response.Headers[""X-Content-Type-Options ""] != null) 
          return; 
        application.Response.Headers.Add(""X-Content-Type-Options "", ""nosniff""); 
      } 
  } 

``` 

* <span data-ttu-id="38e6c-187">È possibile abilitare l'intestazione di richiesta hello solo per le pagine specifiche aggiungendolo tooindividual risposte:</span><span class="sxs-lookup"><span data-stu-id="38e6c-187">You can enable hello required header only for specific pages by adding it tooindividual responses:</span></span> 

```
this.Response.Headers[""X-Content-Type-Options""] = ""nosniff""; 
``` 

## <span data-ttu-id="38e6c-188"><a id="xml-resolution"></a>Applicare la protezione avanzata o la disabilitazione della risoluzione di entità XML</span><span class="sxs-lookup"><span data-stu-id="38e6c-188"><a id="xml-resolution"></a>Harden or Disable XML Entity Resolution</span></span>

| <span data-ttu-id="38e6c-189">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-189">Title</span></span>                   | <span data-ttu-id="38e6c-190">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-190">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-191">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-191">**Component**</span></span>               | <span data-ttu-id="38e6c-192">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-192">Web Application</span></span> | 
| <span data-ttu-id="38e6c-193">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-193">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-194">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-194">Build</span></span> |  
| <span data-ttu-id="38e6c-195">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-195">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-196">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-196">Generic</span></span> |
| <span data-ttu-id="38e6c-197">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-197">**Attributes**</span></span>              | <span data-ttu-id="38e6c-198">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-198">N/A</span></span>  |
| <span data-ttu-id="38e6c-199">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-199">**References**</span></span>              | <span data-ttu-id="38e6c-200">[Espansione di entità XML](http://capec.mitre.org/data/definitions/197.html), [Attacchi Denial of Service e difese in XML](http://msdn.microsoft.com/magazine/ee335713.aspx), [Cenni preliminari sulla sicurezza MSXML](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Procedure consigliate per la protezione del codice MSXML](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [Informazioni di riferimento sul protocollo NSXMLParserDelegate](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Risoluzione di riferimenti esterni](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span><span class="sxs-lookup"><span data-stu-id="38e6c-200">[XML Entity Expansion](http://capec.mitre.org/data/definitions/197.html), [XML Denial of Service Attacks and Defenses](http://msdn.microsoft.com/magazine/ee335713.aspx), [MSXML Security Overview](http://msdn.microsoft.com/library/ms754611(v=VS.85).aspx), [Best Practices for Securing MSXML Code](http://msdn.microsoft.com/library/ms759188(VS.85).aspx), [NSXMLParserDelegate Protocol Reference](http://developer.apple.com/library/ios/#documentation/cocoa/reference/NSXMLParserDelegate_Protocol/Reference/Reference.html), [Resolving External References](https://msdn.microsoft.com/library/5fcwybb2.aspx)</span></span> |
| <span data-ttu-id="38e6c-201">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-201">**Steps**</span></span>| <p><span data-ttu-id="38e6c-202">Anche se non è ampiamente utilizzata, è disponibile una funzionalità del XML che consente di entità macro hello XML parser tooexpand con i valori definiti nel documento hello stesso o da origini esterne.</span><span class="sxs-lookup"><span data-stu-id="38e6c-202">Although it is not widely used, there is a feature of XML that allows hello XML parser tooexpand macro entities with values defined either within hello document itself or from external sources.</span></span> <span data-ttu-id="38e6c-203">Ad esempio, documento hello potrebbe definire un'entità "companyname" con valore hello "Microsoft", in modo che ogni volta hello testo "&companyname;" viene visualizzato nel documento di hello, verrà automaticamente sostituito con il testo hello Microsoft.</span><span class="sxs-lookup"><span data-stu-id="38e6c-203">For example, hello document might define an entity "companyname" with hello value "Microsoft," so that every time hello text "&companyname;" appears in hello document, it is automatically replaced with hello text Microsoft.</span></span> <span data-ttu-id="38e6c-204">In alternativa, il documento hello potrebbe definire un'entità "MSFTStock" che fa riferimento a un web esterno servizio toofetch hello valore corrente di scorte Microsoft.</span><span class="sxs-lookup"><span data-stu-id="38e6c-204">Or, hello document might define an entity "MSFTStock" that references an external web service toofetch hello current value of Microsoft stock.</span></span></p><p><span data-ttu-id="38e6c-205">Quindi qualsiasi momento "&MSFTStock;" viene visualizzato nel documento di hello, verrà automaticamente sostituito con prezzo azionario corrente hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-205">Then any time "&MSFTStock;" appears in hello document, it is automatically replaced with hello current stock price.</span></span> <span data-ttu-id="38e6c-206">Tuttavia, questa funzionalità può essere sfruttato toocreate rifiuto delle condizioni service (DoS).</span><span class="sxs-lookup"><span data-stu-id="38e6c-206">However, this functionality can be abused toocreate denial of service (DoS) conditions.</span></span> <span data-ttu-id="38e6c-207">Un utente malintenzionato è possibile nidificare più entità toocreate un'espansione esponenziale XML di validità che utilizza tutta la memoria disponibile nel sistema hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-207">An attacker can nest multiple entities toocreate an exponential expansion XML bomb that consumes all available memory on hello system.</span></span> </p><p><span data-ttu-id="38e6c-208">In alternativa, Jeff può creare un riferimento esterno che consente di trasmettere back un'infinito quantità di dati o che si blocchi semplicemente thread hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-208">Alternatively, he can create an external reference that streams back an infinite amount of data or that simply hangs hello thread.</span></span> <span data-ttu-id="38e6c-209">Di conseguenza, tutti i team necessario disabilitare la risoluzione dell'entità XML interno e/o esterni completamente se l'applicazione non usarlo oppure manualmente limitare la quantità hello di memoria e tempo applicazione hello può utilizzare per la risoluzione di entità se questa funzionalità è assolutamente necessario.</span><span class="sxs-lookup"><span data-stu-id="38e6c-209">As a result, all teams must disable internal and/or external XML entity resolution entirely if their application does not use it, or manually limit hello amount of memory and time that hello application can consume for entity resolution if this functionality is absolutely necessary.</span></span> <span data-ttu-id="38e6c-210">Se la risoluzione di entità non è richiesta dall'applicazione, disabilitarla.</span><span class="sxs-lookup"><span data-stu-id="38e6c-210">If entity resolution is not required by your application, then disable it.</span></span> </p>|

### <a name="example"></a><span data-ttu-id="38e6c-211">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-211">Example</span></span>
<span data-ttu-id="38e6c-212">Per il codice di .NET Framework, è possibile utilizzare hello approcci seguenti:</span><span class="sxs-lookup"><span data-stu-id="38e6c-212">For .NET Framework code, you can use hello following approaches:</span></span>

```C#
XmlTextReader reader = new XmlTextReader(stream);
reader.ProhibitDtd = true;

XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);

// for .NET 4
XmlReaderSettings settings = new XmlReaderSettings();
settings.DtdProcessing = DtdProcessing.Prohibit;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="38e6c-213">Si noti il valore predefinito di hello di `ProhibitDtd` in `XmlReaderSettings` è true, ma in `XmlTextReader` è false.</span><span class="sxs-lookup"><span data-stu-id="38e6c-213">Note that hello default value of `ProhibitDtd` in `XmlReaderSettings` is true, but in `XmlTextReader` it is false.</span></span> <span data-ttu-id="38e6c-214">Se si utilizza XmlReaderSettings, non è necessario tooset ProhibitDtd tootrue in modo esplicito, ma per i migliori risultati sicurezza è consigliabile effettuare.</span><span class="sxs-lookup"><span data-stu-id="38e6c-214">If you are using XmlReaderSettings, you do not need tooset ProhibitDtd tootrue explicitly, but it is recommended for safety sake that you do.</span></span> <span data-ttu-id="38e6c-215">Si noti che la classe XmlDocument hello consente inoltre la risoluzione dell'entità per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="38e6c-215">Also note that hello XmlDocument class allows entity resolution by default.</span></span> 

### <a name="example"></a><span data-ttu-id="38e6c-216">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-216">Example</span></span>
<span data-ttu-id="38e6c-217">la risoluzione dell'entità toodisable per XmlDocument, utilizzare hello `XmlDocument.Load(XmlReader)` overload di hello metodo Load e impostare hello proprietà appropriate nella risoluzione toodisable dell'argomento XmlReader hello, come illustrato nel seguente codice hello:</span><span class="sxs-lookup"><span data-stu-id="38e6c-217">toodisable entity resolution for XmlDocuments, use hello `XmlDocument.Load(XmlReader)` overload of hello Load method and set hello appropriate properties in hello XmlReader argument toodisable resolution, as illustrated in hello following code:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = true;
XmlReader reader = XmlReader.Create(stream, settings);
XmlDocument doc = new XmlDocument();
doc.Load(reader);
```

### <a name="example"></a><span data-ttu-id="38e6c-218">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-218">Example</span></span>
<span data-ttu-id="38e6c-219">Se la disabilitazione di risoluzione di entità non è possibile per l'applicazione, impostare hello XmlReaderSettings.MaxCharactersFromEntities tooa ragionevole valore della proprietà in base alle esigenze dell'applicazione tooyour.</span><span class="sxs-lookup"><span data-stu-id="38e6c-219">If disabling entity resolution is not possible for your application, set hello XmlReaderSettings.MaxCharactersFromEntities property tooa reasonable value according tooyour application's needs.</span></span> <span data-ttu-id="38e6c-220">Questo sarà limitato impatto hello di potenziali attacchi di espansione esponenziale.</span><span class="sxs-lookup"><span data-stu-id="38e6c-220">This will limit hello impact of potential exponential expansion DoS attacks.</span></span> <span data-ttu-id="38e6c-221">Hello seguente codice viene fornito un esempio di questo approccio:</span><span class="sxs-lookup"><span data-stu-id="38e6c-221">hello following code provides an example of this approach:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
XmlReader reader = XmlReader.Create(stream, settings);
```

### <a name="example"></a><span data-ttu-id="38e6c-222">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-222">Example</span></span>
<span data-ttu-id="38e6c-223">Se è necessario tooresolve inline entità ma non è necessario tooresolve le entità esterne, impostare hello XmlReaderSettings.XmlResolver proprietà toonull.</span><span class="sxs-lookup"><span data-stu-id="38e6c-223">If you need tooresolve inline entities but do not need tooresolve external entities, set hello XmlReaderSettings.XmlResolver property toonull.</span></span> <span data-ttu-id="38e6c-224">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="38e6c-224">For example:</span></span> 

```C#
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
settings.MaxCharactersFromEntities = 1000;
settings.XmlResolver = null;
XmlReader reader = XmlReader.Create(stream, settings);
```
<span data-ttu-id="38e6c-225">Si noti che in MSXML6, ProhibitDTD è impostare tootrue (disattivare l'elaborazione della DTD) per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="38e6c-225">Note that in MSXML6, ProhibitDTD is set tootrue (disabling DTD processing) by default.</span></span> <span data-ttu-id="38e6c-226">Per il codice Apple OSX/iOS, è possibile usare due parser XML: NSXMLParser e libXML2.</span><span class="sxs-lookup"><span data-stu-id="38e6c-226">For Apple OSX/iOS code, there are two XML parsers you can use: NSXMLParser and libXML2.</span></span> 

## <span data-ttu-id="38e6c-227"><a id="app-verification"></a>Verifica della canonizzazione degli URL nelle applicazioni che utilizzano http.sys</span><span class="sxs-lookup"><span data-stu-id="38e6c-227"><a id="app-verification"></a>Applications utilizing http.sys perform URL canonicalization verification</span></span>

| <span data-ttu-id="38e6c-228">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-228">Title</span></span>                   | <span data-ttu-id="38e6c-229">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-229">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-230">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-230">**Component**</span></span>               | <span data-ttu-id="38e6c-231">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-231">Web Application</span></span> | 
| <span data-ttu-id="38e6c-232">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-232">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-233">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-233">Build</span></span> |  
| <span data-ttu-id="38e6c-234">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-234">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-235">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-235">Generic</span></span> |
| <span data-ttu-id="38e6c-236">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-236">**Attributes**</span></span>              | <span data-ttu-id="38e6c-237">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-237">N/A</span></span>  |
| <span data-ttu-id="38e6c-238">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-238">**References**</span></span>              | <span data-ttu-id="38e6c-239">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-239">N/A</span></span>  |
| <span data-ttu-id="38e6c-240">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-240">**Steps**</span></span> | <p><span data-ttu-id="38e6c-241">Tutte le applicazioni che usano http.sys devono seguire le linee guida seguenti:</span><span class="sxs-lookup"><span data-stu-id="38e6c-241">Any application that uses http.sys should follow these guidelines:</span></span></p><ul><li><span data-ttu-id="38e6c-242">Limitare hello URL lunghezza toono 16.384 più caratteri (ASCII o Unicode).</span><span class="sxs-lookup"><span data-stu-id="38e6c-242">Limit hello URL length toono more than 16,384 characters (ASCII or Unicode).</span></span> <span data-ttu-id="38e6c-243">Si tratta di hello assoluto lunghezza massima URL in base all'impostazione di Internet Information Services (IIS) 6 hello predefinito.</span><span class="sxs-lookup"><span data-stu-id="38e6c-243">This is hello absolute maximum URL length based on hello default Internet Information Services (IIS) 6 setting.</span></span> <span data-ttu-id="38e6c-244">Se possibile, i siti Web devono cercare di mantenere una lunghezza inferiore a tale massimo.</span><span class="sxs-lookup"><span data-stu-id="38e6c-244">Websites should strive for a length shorter than this if possible</span></span></li><li><span data-ttu-id="38e6c-245">Utilizzare hello standard i/o file classi di .NET Framework (ad esempio FileStream) come questi si avvale di hello regole canonizzazione in hello .NET FX</span><span class="sxs-lookup"><span data-stu-id="38e6c-245">Use hello standard .NET Framework file I/O classes (such as FileStream) as these will take advantage of hello canonicalization rules in hello .NET FX</span></span></li><li><span data-ttu-id="38e6c-246">Compilare in modo esplicito un elenco di nomi file noti consentiti.</span><span class="sxs-lookup"><span data-stu-id="38e6c-246">Explicitly build an allow-list of known filenames</span></span></li><li><span data-ttu-id="38e6c-247">Rifiutare in modo esplicito i nomi file noti che non verranno gestiti con rifiuti tramite UrlScan, ossia i file con estensione exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol e dat.</span><span class="sxs-lookup"><span data-stu-id="38e6c-247">Explicitly reject known filetypes you will not serve UrlScan rejects: exe, bat, cmd, com, htw, ida, idq, htr, idc, shtm[l], stm, printer, ini, pol, dat files</span></span></li><li><span data-ttu-id="38e6c-248">Consente di rilevare hello le eccezioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="38e6c-248">Catch hello following exceptions:</span></span><ul><li><span data-ttu-id="38e6c-249">System.ArgumentException (per i nomi di dispositivo)</span><span class="sxs-lookup"><span data-stu-id="38e6c-249">System.ArgumentException (for device names)</span></span></li><li><span data-ttu-id="38e6c-250">System.NotSupportedException (per i flussi di dati)</span><span class="sxs-lookup"><span data-stu-id="38e6c-250">System.NotSupportedException (for data streams)</span></span></li><li><span data-ttu-id="38e6c-251">System.IO.FileNotFoundException (per i nomi file preceduti da carattere di escape non validi)</span><span class="sxs-lookup"><span data-stu-id="38e6c-251">System.IO.FileNotFoundException (for invalid escaped filenames)</span></span></li><li><span data-ttu-id="38e6c-252">System.IO.DirectoryNotFoundException (per le directory precedute da carattere di escape non valide)</span><span class="sxs-lookup"><span data-stu-id="38e6c-252">System.IO.DirectoryNotFoundException (for invalid escaped dirs)</span></span></li></ul></li><li><span data-ttu-id="38e6c-253">*Non* richiamano tooWin32 file I/O APIs.</span><span class="sxs-lookup"><span data-stu-id="38e6c-253">*Do not* call out tooWin32 file I/O APIs.</span></span> <span data-ttu-id="38e6c-254">In un URL non valido restituito normalmente un utente di 400 errore toohello e registrare errore reale hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-254">On an invalid URL gracefully return a 400 error toohello user, and log hello real error.</span></span></li></ul>|

## <span data-ttu-id="38e6c-255"><a id="controls-users"></a>Verificare la presenza dei controlli appropriati quando si accettano file dagli utenti</span><span class="sxs-lookup"><span data-stu-id="38e6c-255"><a id="controls-users"></a>Ensure appropriate controls are in place when accepting files from users</span></span>

| <span data-ttu-id="38e6c-256">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-256">Title</span></span>                   | <span data-ttu-id="38e6c-257">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-257">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-258">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-258">**Component**</span></span>               | <span data-ttu-id="38e6c-259">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-259">Web Application</span></span> | 
| <span data-ttu-id="38e6c-260">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-260">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-261">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-261">Build</span></span> |  
| <span data-ttu-id="38e6c-262">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-262">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-263">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-263">Generic</span></span> |
| <span data-ttu-id="38e6c-264">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-264">**Attributes**</span></span>              | <span data-ttu-id="38e6c-265">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-265">N/A</span></span>  |
| <span data-ttu-id="38e6c-266">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-266">**References**</span></span>              | <span data-ttu-id="38e6c-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload) (Caricamento di file senza restrizioni), [File Signature Table](http://www.garykessler.net/library/file_sigs.html) (Tabella delle firme dei file)</span><span class="sxs-lookup"><span data-stu-id="38e6c-267">[Unrestricted File Upload](https://www.owasp.org/index.php/Unrestricted_File_Upload), [File Signature Table](http://www.garykessler.net/library/file_sigs.html)</span></span> |
| <span data-ttu-id="38e6c-268">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-268">**Steps**</span></span> | <p><span data-ttu-id="38e6c-269">I file caricati rappresentano un rischio significativo di tooapplications.</span><span class="sxs-lookup"><span data-stu-id="38e6c-269">Uploaded files represent a significant risk tooapplications.</span></span></p><p><span data-ttu-id="38e6c-270">Hello molti attacchi è innanzitutto tooget attaccato alcuni toobe sistema toohello di codice.</span><span class="sxs-lookup"><span data-stu-id="38e6c-270">hello first step in many attacks is tooget some code toohello system toobe attacked.</span></span> <span data-ttu-id="38e6c-271">Attacco hello deve quindi solo toofind un codice di hello tooget modo eseguito.</span><span class="sxs-lookup"><span data-stu-id="38e6c-271">Then hello attack only needs toofind a way tooget hello code executed.</span></span> <span data-ttu-id="38e6c-272">L'utilizzo di caricare un file consente autore dell'attacco hello eseguire innanzitutto hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-272">Using a file upload helps hello attacker accomplish hello first step.</span></span> <span data-ttu-id="38e6c-273">conseguenze Hello di caricamento del file senza restrizioni possono variare, incluse acquisizione completa del sistema, un overload di file system o un database, sistemi tooback-end di attacchi e semplice alterazione di inoltro.</span><span class="sxs-lookup"><span data-stu-id="38e6c-273">hello consequences of unrestricted file upload can vary, including complete system takeover, an overloaded file system or database, forwarding attacks tooback-end systems, and simple defacement.</span></span></p><p><span data-ttu-id="38e6c-274">Dipende da quale applicazione hello non con file hello caricato e in particolare in cui è archiviato.</span><span class="sxs-lookup"><span data-stu-id="38e6c-274">It depends on what hello application does with hello uploaded file and especially where it is stored.</span></span> <span data-ttu-id="38e6c-275">La convalida sul lato server dei caricamenti di file non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="38e6c-275">Server side validation of file uploads is missing.</span></span> <span data-ttu-id="38e6c-276">Per la funzionalità di caricamento file devono essere implementati i controlli di sicurezza seguenti:</span><span class="sxs-lookup"><span data-stu-id="38e6c-276">Following security controls should be implemented for File Upload functionality:</span></span></p><ul><li><span data-ttu-id="38e6c-277">Controllo dell'estensione di file (deve essere accettato solo un set valido di tipi di file consentiti)</span><span class="sxs-lookup"><span data-stu-id="38e6c-277">File Extension check (only a valid set of allowed file type should be accepted)</span></span></li><li><span data-ttu-id="38e6c-278">Limite di dimensione massima dei file</span><span class="sxs-lookup"><span data-stu-id="38e6c-278">Maximum file size limit</span></span></li><li><span data-ttu-id="38e6c-279">File non deve essere caricato toowebroot; percorso di Hello deve essere una directory sul disco non di sistema</span><span class="sxs-lookup"><span data-stu-id="38e6c-279">File should not be uploaded toowebroot; hello location should be a directory on non-system drive</span></span></li><li><span data-ttu-id="38e6c-280">Convenzione di denominazione da seguire, in modo che hello nome del file caricato presentano alcuni casualità, pertanto come tooprevent sovrascrive i file</span><span class="sxs-lookup"><span data-stu-id="38e6c-280">Naming convention should be followed, such that hello uploaded file name have some randomness, so as tooprevent file overwrites</span></span></li><li><span data-ttu-id="38e6c-281">I file devono essere esaminati per antivirus prima della scrittura su disco toohello</span><span class="sxs-lookup"><span data-stu-id="38e6c-281">Files should be scanned for anti-virus before writing toohello disk</span></span></li><li><span data-ttu-id="38e6c-282">Verificare che per i caratteri dannosi vengano convalidati nome del file hello e altri metadati (ad esempio, un percorso di file)</span><span class="sxs-lookup"><span data-stu-id="38e6c-282">Ensure that hello file name and any other metadata (e.g., file path) are validated for malicious characters</span></span></li><li><span data-ttu-id="38e6c-283">Firma del file di formato deve essere verificata, un utente di caricare un file masqueraded tooprevent (ad esempio, il caricamento di un file exe modificando l'estensione tootxt)</span><span class="sxs-lookup"><span data-stu-id="38e6c-283">File format signature should be checked, tooprevent a user from uploading a masqueraded file (e.g., uploading an exe file by changing extension tootxt)</span></span></li></ul>| 

### <a name="example"></a><span data-ttu-id="38e6c-284">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-284">Example</span></span>
<span data-ttu-id="38e6c-285">Per ultimo punto di hello sulla convalida della firma di formato di file, vedere la classe toohello sotto per informazioni dettagliate:</span><span class="sxs-lookup"><span data-stu-id="38e6c-285">For hello last point regarding file format signature validation, refer toohello class below for details:</span></span> 

```C#
        private static Dictionary<string, List<byte[]>> fileSignature = new Dictionary<string, List<byte[]>>
                    {
                    { ".DOC", new List<byte[]> { new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 } } },
                    { ".DOCX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".PDF", new List<byte[]> { new byte[] { 0x25, 0x50, 0x44, 0x46 } } },
                    { ".ZIP", new List<byte[]> 
                                            {
                                              new byte[] { 0x50, 0x4B, 0x03, 0x04 },
                                              new byte[] { 0x50, 0x4B, 0x4C, 0x49, 0x54, 0x55 },
                                              new byte[] { 0x50, 0x4B, 0x53, 0x70, 0x58 },
                                              new byte[] { 0x50, 0x4B, 0x05, 0x06 },
                                              new byte[] { 0x50, 0x4B, 0x07, 0x08 },
                                              new byte[] { 0x57, 0x69, 0x6E, 0x5A, 0x69, 0x70 }
                                                }
                                            },
                    { ".PNG", new List<byte[]> { new byte[] { 0x89, 0x50, 0x4E, 0x47, 0x0D, 0x0A, 0x1A, 0x0A } } },
                    { ".JPG", new List<byte[]>
                                    {
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE1 },
                                              new byte[] { 0xFF, 0xD8, 0xFF, 0xE8 }
                                    }
                                    },
                    { ".JPEG", new List<byte[]>
                                        { 
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE0 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE2 },
                                            new byte[] { 0xFF, 0xD8, 0xFF, 0xE3 }
                                        }
                                        },
                    { ".XLS", new List<byte[]>
                                            {
                                              new byte[] { 0xD0, 0xCF, 0x11, 0xE0, 0xA1, 0xB1, 0x1A, 0xE1 },
                                              new byte[] { 0x09, 0x08, 0x10, 0x00, 0x00, 0x06, 0x05, 0x00 },
                                              new byte[] { 0xFD, 0xFF, 0xFF, 0xFF }
                                            }
                                            },
                    { ".XLSX", new List<byte[]> { new byte[] { 0x50, 0x4B, 0x03, 0x04 } } },
                    { ".GIF", new List<byte[]> { new byte[] { 0x47, 0x49, 0x46, 0x38 } } }
                };

        public static bool IsValidFileExtension(string fileName, byte[] fileData, byte[] allowedChars)
        {
            if (string.IsNullOrEmpty(fileName) || fileData == null || fileData.Length == 0)
            {
                return false;
            }

            bool flag = false;
            string ext = Path.GetExtension(fileName);
            if (string.IsNullOrEmpty(ext))
            {
                return false;
            }

            ext = ext.ToUpperInvariant();

            if (ext.Equals(".TXT") || ext.Equals(".CSV") || ext.Equals(".PRN"))
            {
                foreach (byte b in fileData)
                {
                    if (b > 0x7F)
                    {
                        if (allowedChars != null)
                        {
                            if (!allowedChars.Contains(b))
                            {
                                return false;
                            }
                        }
                        else
                        {
                            return false;
                        }
                    }
                }

                return true;
            }

            if (!fileSignature.ContainsKey(ext))
            {
                return true;
            }

            List<byte[]> sig = fileSignature[ext];
            foreach (byte[] b in sig)
            {
                var curFileSig = new byte[b.Length];
                Array.Copy(fileData, curFileSig, b.Length);
                if (curFileSig.SequenceEqual(b))
                {
                    flag = true;
                    break;
                }
            }

            return flag;
        }
```

## <span data-ttu-id="38e6c-286"><a id="typesafe"></a>Verificare che nell'applicazione Web vengano usati parametri indipendenti dai tipi per l'accesso ai dati</span><span class="sxs-lookup"><span data-stu-id="38e6c-286"><a id="typesafe"></a>Ensure that type-safe parameters are used in Web Application for data access</span></span>

| <span data-ttu-id="38e6c-287">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-287">Title</span></span>                   | <span data-ttu-id="38e6c-288">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-288">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-289">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-289">**Component**</span></span>               | <span data-ttu-id="38e6c-290">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-290">Web Application</span></span> | 
| <span data-ttu-id="38e6c-291">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-291">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-292">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-292">Build</span></span> |  
| <span data-ttu-id="38e6c-293">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-293">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-294">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-294">Generic</span></span> |
| <span data-ttu-id="38e6c-295">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-295">**Attributes**</span></span>              | <span data-ttu-id="38e6c-296">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-296">N/A</span></span>  |
| <span data-ttu-id="38e6c-297">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-297">**References**</span></span>              | <span data-ttu-id="38e6c-298">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-298">N/A</span></span>  |
| <span data-ttu-id="38e6c-299">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-299">**Steps**</span></span> | <p><span data-ttu-id="38e6c-300">Se si utilizza la raccolta di parametri hello, SQL considera hello input è un valore letterale anziché come codice eseguibile.</span><span class="sxs-lookup"><span data-stu-id="38e6c-300">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="38e6c-301">raccolta di parametri Hello può essere tooenforce utilizzati vincoli di tipo e lunghezza su dati di input.</span><span class="sxs-lookup"><span data-stu-id="38e6c-301">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="38e6c-302">I valori di fuori intervallo hello generano un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-302">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="38e6c-303">Se non vengono utilizzati parametri SQL indipendenti dai tipi, gli utenti malintenzionati potrebbero essere attacchi intrusivi nel codice in grado di tooexecute incorporati nell'input non filtrato hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-303">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="38e6c-304">Utilizzare i parametri indipendenti dai tipi quando costruzione SQL esegue una query tooavoid possibili attacchi SQL injection che possono verificarsi con input non filtrato.</span><span class="sxs-lookup"><span data-stu-id="38e6c-304">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="38e6c-305">È possibile usare parametri indipendenti dai tipi con stored procedure e con istruzioni SQL dinamiche.</span><span class="sxs-lookup"><span data-stu-id="38e6c-305">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="38e6c-306">I parametri vengono considerati come valori letterali dal database hello e non come codice eseguibile.</span><span class="sxs-lookup"><span data-stu-id="38e6c-306">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="38e6c-307">Viene anche eseguito il controllo del tipo e della lunghezza dei parametri.</span><span class="sxs-lookup"><span data-stu-id="38e6c-307">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="38e6c-308">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-308">Example</span></span> 
<span data-ttu-id="38e6c-309">Hello codice seguente viene illustrato come toouse parametri di tipo sicuro con hello SqlParameterCollection quando si chiama una stored procedure.</span><span class="sxs-lookup"><span data-stu-id="38e6c-309">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="38e6c-310">Nel precedente esempio di codice di hello, hello input non può essere più lungo di 11 caratteri.</span><span class="sxs-lookup"><span data-stu-id="38e6c-310">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="38e6c-311">Se i dati di hello non è conforme toohello tipo o la lunghezza definita dal parametro hello, hello classe SqlParameter genera un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-311">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="38e6c-312"><a id="binding-mvc"></a>Utilizzare un modello separato l'associazione di classi o filtro elenchi tooprevent MVC assegnazione massa vulnerabilità</span><span class="sxs-lookup"><span data-stu-id="38e6c-312"><a id="binding-mvc"></a>Use separate model binding classes or binding filter lists tooprevent MVC mass assignment vulnerability</span></span>

| <span data-ttu-id="38e6c-313">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-313">Title</span></span>                   | <span data-ttu-id="38e6c-314">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-314">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-315">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-315">**Component**</span></span>               | <span data-ttu-id="38e6c-316">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-316">Web Application</span></span> | 
| <span data-ttu-id="38e6c-317">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-317">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-318">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-318">Build</span></span> |  
| <span data-ttu-id="38e6c-319">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-319">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-320">MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="38e6c-320">MVC5, MVC6</span></span> |
| <span data-ttu-id="38e6c-321">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-321">**Attributes**</span></span>              | <span data-ttu-id="38e6c-322">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-322">N/A</span></span>  |
| <span data-ttu-id="38e6c-323">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-323">**References**</span></span>              | <span data-ttu-id="38e6c-324">[Gli attributi dei metadati](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [pubblica chiave sicurezza attenuazione delle vulnerabilità e](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [tooMass Guida completa assegnazione in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Introduzione a Entity Framework con MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span><span class="sxs-lookup"><span data-stu-id="38e6c-324">[Metadata Attributes](http://msdn.microsoft.com/library/system.componentmodel.dataannotations.metadatatypeattribute), [Public Key Security Vulnerability And Mitigation](https://github.com/blog/1068-public-key-security-vulnerability-and-mitigation), [Complete Guide tooMass Assignment in ASP.NET MVC](http://odetocode.com/Blogs/scott/archive/2012/03/11/complete-guide-to-mass-assignment-in-asp-net-mvc.aspx), [Getting Started with EF using MVC](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)</span></span> |
| <span data-ttu-id="38e6c-325">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-325">**Steps**</span></span> | <ul><li><span data-ttu-id="38e6c-326">**Quando è consigliabile controllare eventuali vulnerabilità all'overposting?** Le vulnerabilità all'overposting si possono verificare ovunque si associno classi modello dall'input utente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-326">**When should I look for over-posting vulnerabilities? -** Over-posting vulnerabilities can occur any place you bind model classes from user input.</span></span> <span data-ttu-id="38e6c-327">I framework come MVC possono rappresentare i dati utente in classi .NET personalizzate, tra cui Plain Old CLR Object (POCO).</span><span class="sxs-lookup"><span data-stu-id="38e6c-327">Frameworks like MVC can represent user data in custom .NET classes, including Plain Old CLR Objects (POCOs).</span></span> <span data-ttu-id="38e6c-328">MVC popola automaticamente queste classi di modello con i dati di richiesta di hello, fornendo in modo adeguato per la gestione di input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-328">MVC automatically populates these model classes with data from hello request, providing a convenient representation for dealing with user input.</span></span> <span data-ttu-id="38e6c-329">Quando tali classi includono proprietà che non deve essere impostata dall'utente hello, un'applicazione hello può essere vulnerabili attacchi tooover registrazione, che consentono il controllo utente di dati che l'applicazione hello mai usata.</span><span class="sxs-lookup"><span data-stu-id="38e6c-329">When these classes include properties that should not be set by hello user, hello application can be vulnerable tooover-posting attacks, which allow user control of data that hello application never intended.</span></span> <span data-ttu-id="38e6c-330">Come associazione di modelli MVC, tecnologie di accesso ai database, ad esempio BizTalk Mapper relazionale/come Entity Framework supportano spesso anche l'utilizzo di dati del database toorepresent oggetti POCO.</span><span class="sxs-lookup"><span data-stu-id="38e6c-330">Like MVC model binding, database access technologies such as object/relational mappers like Entity Framework often also support using POCO objects toorepresent database data.</span></span> <span data-ttu-id="38e6c-331">Queste classi di modello di dati forniscono hello stesso facilitare la gestione dei dati di database come MVC avviene nella gestione di input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-331">These data model classes provide hello same convenience in dealing with database data as MVC does in dealing with user input.</span></span> <span data-ttu-id="38e6c-332">Poiché il database sia MVC e hello supporta modelli simili, come gli oggetti POCO, sembra hello tooreuse facile stesso classi per entrambi gli scopi.</span><span class="sxs-lookup"><span data-stu-id="38e6c-332">Because both MVC and hello database support similar models, like POCO objects, it seems easy tooreuse hello same classes for both purposes.</span></span> <span data-ttu-id="38e6c-333">Questo ha esito negativo dell'esercitazione toopreserve separazione di problemi e è un'area comune in cui sono di proprietà non intenzionali esposti toomodel associazione, l'abilitazione di attacchi di registrazione in eccesso.</span><span class="sxs-lookup"><span data-stu-id="38e6c-333">This practice fails toopreserve separation of concerns, and it is one common area where unintended properties are exposed toomodel binding, enabling over-posting attacks.</span></span></li><li><span data-ttu-id="38e6c-334">**Perché non è consentito usare my classi del modello di database non filtrato come azioni di MVC toomy parametri? -** Associazione del modello MVC perché assocerà qualsiasi elemento in tale classe.</span><span class="sxs-lookup"><span data-stu-id="38e6c-334">**Why shouldn't I use my unfiltered database model classes as parameters toomy MVC actions? -** Because MVC model binding will bind anything in that class.</span></span> <span data-ttu-id="38e6c-335">Anche se i dati non viene visualizzata nella vista, che un utente malintenzionato può inviare una richiesta HTTP con i dati inclusi hello e MVC verrà grazie associarlo perché l'azione che la classe di database è la forma hello dei dati è necessario accettare input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-335">Even if hello data does not appear in your view, a malicious user can send an HTTP request with this data included, and MVC will gladly bind it because your action says that database class is hello shape of data it should accept for user input.</span></span></li><li><span data-ttu-id="38e6c-336">**Perché devo interessano hello forma utilizzata per l'associazione modello? -** L'associazione di modelli utilizzando ASP.NET MVC con i modelli di ampi espone gli attacchi tooover registrazione un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-336">**Why should I care about hello shape used for model binding? -** Using ASP.NET MVC model binding with overly broad models exposes an application tooover-posting attacks.</span></span> <span data-ttu-id="38e6c-337">Dati dell'applicazione gli utenti malintenzionati toochange oltre quali hello dello sviluppatore, ad esempio si esegue l'override di prezzo hello per un elemento o hello privilegi di sicurezza per un account è stato possibile abilitare la registrazione in eccesso.</span><span class="sxs-lookup"><span data-stu-id="38e6c-337">Over-posting could enable attackers toochange application data beyond what hello developer intended, such as overriding hello price for an item or hello security privileges for an account.</span></span> <span data-ttu-id="38e6c-338">Le applicazioni devono utilizzare specifici per le operazioni di associazione modelli (o elenchi di filtri di proprietà consentiti specifico) tooprovide un contratto esplicito per i quali tooallow di input non attendibile tramite l'associazione di modelli.</span><span class="sxs-lookup"><span data-stu-id="38e6c-338">Applications should use action-specific binding models (or specific allowed property filter lists) tooprovide an explicit contract for what untrusted input tooallow via model binding.</span></span></li><li><span data-ttu-id="38e6c-339">**La presenza di modelli di associazione separati è solo una duplicazione del codice?** No, è una separazione dei compiti.</span><span class="sxs-lookup"><span data-stu-id="38e6c-339">**Is having separate binding models just duplicating code? -** No, it is a matter of separation of concerns.</span></span> <span data-ttu-id="38e6c-340">Se si riutilizzano i modelli di database nei metodi di azione, sono segnalare qualsiasi proprietà (o secondari) in una classe può essere impostata dall'utente hello in una richiesta HTTP.</span><span class="sxs-lookup"><span data-stu-id="38e6c-340">If you reuse database models in action methods, you are saying any property (or sub-property) in that class can be set by hello user in an HTTP request.</span></span> <span data-ttu-id="38e6c-341">Se non si desidera toodo MVC, è necessario un elenco di filtri o tooshow di forma una classe separata MVC quali dati possono provenire da invece l'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-341">If that is not what you want MVC toodo, you need a filter list or a separate class shape tooshow MVC what data can come from user input instead.</span></span></li><li><span data-ttu-id="38e6c-342">**Se dispone di modelli di binding distinto per l'input dell'utente, è necessario tooduplicate tutti gli attributi di annotazione my dati? -** Non necessariamente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-342">**If I have separate binding models for user input, do I have tooduplicate all my data annotation attributes? -** Not necessarily.</span></span> <span data-ttu-id="38e6c-343">È possibile utilizzare MetadataTypeAttribute sui metadati di toohello toolink per la classe modello hello database in una classe di associazione del modello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-343">You can use MetadataTypeAttribute on hello database model class toolink toohello metadata on a model binding class.</span></span> <span data-ttu-id="38e6c-344">Si noti solo che hello tipo a cui fa riferimento hello MetadataTypeAttribute devono essere un subset di hello riferimento al tipo (può avere un numero inferiore di proprietà, ma non più).</span><span class="sxs-lookup"><span data-stu-id="38e6c-344">Just note that hello type referenced by hello MetadataTypeAttribute must be a subset of hello referencing type (it can have fewer properties, but not more).</span></span></li><li><span data-ttu-id="38e6c-345">**Lo spostamento di dati tra i modelli dell'input utente e i modelli del database è un'attività tediosa. È possibile copiare semplicemente tutte le proprietà con la reflection?** Sì.</span><span class="sxs-lookup"><span data-stu-id="38e6c-345">**Moving data back and forth between user input models and database models is tedious. Can I just copy over all properties using reflection? -** Yes.</span></span> <span data-ttu-id="38e6c-346">Hello devono solo le proprietà che vengono visualizzati nei modelli di associazione hello hello quelli che significa toobe sicuri per l'input dell'utente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-346">hello only properties that appear in hello binding models are hello ones you have determined toobe safe for user input.</span></span> <span data-ttu-id="38e6c-347">Non vi è alcun motivo di sicurezza che impedisce l'utilizzo di reflection toocopy su tutte le proprietà che esistono in comune tra questi due modelli.</span><span class="sxs-lookup"><span data-stu-id="38e6c-347">There is no security reason that prevents using reflection toocopy over all properties that exist in common between these two models.</span></span></li><li><span data-ttu-id="38e6c-348">**Come funziona [Bind(Exclude ="â€¦")]? È possibile usare questo attributo anziché modelli di associazione separati?** Questo approccio non è consigliabile.</span><span class="sxs-lookup"><span data-stu-id="38e6c-348">**What about [Bind(Exclude ="â€¦")]. Can I use that instead of having separate binding models? -** This approach is not recommended.</span></span> <span data-ttu-id="38e6c-349">Usando [Bind(Exclude ="â€¦")], qualsiasi nuova proprietà è associabile per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="38e6c-349">Using [Bind(Exclude ="â€¦")] means that any new property is bindable by default.</span></span> <span data-ttu-id="38e6c-350">Quando viene aggiunta una nuova proprietà, elementi di tookeep tooremember un passaggio aggiuntivo è sicuro, anziché con progettazione hello essere protetto per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="38e6c-350">When a new property is added, there is an extra step tooremember tookeep things secure, rather than having hello design be secure by default.</span></span> <span data-ttu-id="38e6c-351">A seconda di sviluppatore hello è rischioso controllo elenco ogni volta che viene aggiunta una proprietà.</span><span class="sxs-lookup"><span data-stu-id="38e6c-351">Depending on hello developer checking this list every time a property is added is risky.</span></span></li><li><span data-ttu-id="38e6c-352">**[Bind(Include ="â€¦")] è utile per le operazioni di modifica?** No.</span><span class="sxs-lookup"><span data-stu-id="38e6c-352">**Is [Bind(Include ="â€¦")] useful for Edit operations? -** No.</span></span> <span data-ttu-id="38e6c-353">[Bind(Include ="â€¦")] è adatto solo per operazioni di tipo INSERT, ossia per l'aggiunta di nuovi dati.</span><span class="sxs-lookup"><span data-stu-id="38e6c-353">[Bind(Include ="â€¦")] is only suitable for INSERT-style operations (adding new data).</span></span> <span data-ttu-id="38e6c-354">Per le operazioni di aggiornamento stile (revisione dei dati esistenti), utilizzare un altro approccio, ad esempio con i modelli di associazione separati o passando un elenco delle proprietà consentite tooUpdateModel TryUpdateModel esplicito.</span><span class="sxs-lookup"><span data-stu-id="38e6c-354">For UPDATE-style operations (revising existing data), use another approach, like having separate binding models or passing an explicit list of allowed properties tooUpdateModel or TryUpdateModel.</span></span> <span data-ttu-id="38e6c-355">Aggiunta di un [associare (Include = "¦ â €")] attributo in un'operazione di modifica significa che MVC crea un'istanza dell'oggetto e imposta solo hello elencate le proprietà, chiudere tutti gli altri valori predefiniti.</span><span class="sxs-lookup"><span data-stu-id="38e6c-355">Adding a [Bind(Include ="â€¦")] attribute on an Edit operation means that MVC will create an object instance and set only hello listed properties, leaving all others at their default values.</span></span> <span data-ttu-id="38e6c-356">Quando viene mantenuti dati hello, che sostituirà completamente entità esistente hello, reimpostare i valori hello relativi alle impostazioni predefinite tootheir proprietà omesso.</span><span class="sxs-lookup"><span data-stu-id="38e6c-356">When hello data is persisted, it will entirely replace hello existing entity, resetting hello values for any omitted properties tootheir defaults.</span></span> <span data-ttu-id="38e6c-357">Ad esempio, se è stato omesso IsAdmin da un [associare (Include = "¦ â €")] attributo in un'operazione di modifica, qualsiasi utente il cui nome è stato modificato tramite questa azione sarebbe tooIsAdmin reset = false (qualsiasi utente modificato comporterebbe la perdita dello stato di amministratore).</span><span class="sxs-lookup"><span data-stu-id="38e6c-357">For example, if IsAdmin was omitted from a [Bind(Include ="â€¦")] attribute on an Edit operation, any user whose name was edited via this action would be reset tooIsAdmin = false (any edited user would lose administrator status).</span></span> <span data-ttu-id="38e6c-358">Se si desidera tooprevent Aggiorna le proprietà di toocertain, utilizzare uno dei hello altri approcci sopra.</span><span class="sxs-lookup"><span data-stu-id="38e6c-358">If you want tooprevent updates toocertain properties, use one of hello other approaches above.</span></span> <span data-ttu-id="38e6c-359">Si noti che alcune versioni degli strumenti MVC generano classi controller con [Bind(Include ="â€¦")] nelle azioni di modifica e prevedono che la rimozione di una proprietà dall'elenco impedisca attacchi di overposting.</span><span class="sxs-lookup"><span data-stu-id="38e6c-359">Note that some versions of MVC tooling generate controller classes with [Bind(Include ="â€¦")] on Edit actions and imply that removing a property from that list will prevent over-posting attacks.</span></span> <span data-ttu-id="38e6c-360">Tuttavia, come descritto in precedenza, questo approccio non funziona come previsto e invece reimposterà i valori predefiniti di hello omesso proprietà tootheir di tutti i dati.</span><span class="sxs-lookup"><span data-stu-id="38e6c-360">However, as described above, that approach does not work as intended and instead will reset any data in hello omitted properties tootheir default values.</span></span></li><li><span data-ttu-id="38e6c-361">**Per le operazioni di creazione, esistono controindicazioni all'uso di [Bind(Include ="â€¦")] anziché di modelli di associazione separati?** Sì.</span><span class="sxs-lookup"><span data-stu-id="38e6c-361">**For Create operations, are there any caveats using [Bind(Include ="â€¦")] rather than separate binding models? -** Yes.</span></span> <span data-ttu-id="38e6c-362">Per prima cosa, questo approccio non funziona per gli scenari di modifica e richiede quindi la gestione di due approcci separati per la mitigazione di tutte le vulnerabilità all'overposting.</span><span class="sxs-lookup"><span data-stu-id="38e6c-362">First this approach does not work for Edit scenarios, requiring maintaining two separate approaches for mitigating all over-posting vulnerabilities.</span></span> <span data-ttu-id="38e6c-363">I modelli di associazione secondo, separato applicano la separazione dei compiti tra forma hello utilizzata per la forma di input e hello utente utilizzata per la persistenza, un elemento [associare (Include = "â €¦")] non include.</span><span class="sxs-lookup"><span data-stu-id="38e6c-363">Second, separate binding models enforce separation of concerns between hello shape used for user input and hello shape used for persistence, something [Bind(Include ="â€¦")] does not do.</span></span> <span data-ttu-id="38e6c-364">In terzo luogo, si noti che [associare (Include = "â €¦")] possono gestire solo le proprietà di primo livello; è possibile consentire solo parti di sottoproprietà (ad esempio "Details.Name") nell'attributo hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-364">Third, note that [Bind(Include ="â€¦")] can only handle top-level properties; you cannot allow only portions of sub-properties (such as "Details.Name") in hello attribute.</span></span> <span data-ttu-id="38e6c-365">Infine ed eventualmente soprattutto, utilizzando [associare (Include = "â €¦")] consente di aggiungere un passaggio aggiuntivo che deve essere memorizzato qualsiasi classe di hello ora viene utilizzata per l'associazione di modelli.</span><span class="sxs-lookup"><span data-stu-id="38e6c-365">Finally, and perhaps most importantly, using [Bind(Include ="â€¦")] adds an extra step that must be remembered any time hello class is used for model binding.</span></span> <span data-ttu-id="38e6c-366">Se un nuovo metodo di azione associa direttamente la classe di dati toohello e dimentica tooinclude un [associare (Include = "¦ â €")] attributo, può essere vulnerabile tooover registrazione attacchi, in modo hello [associare (Include = "¦ â €")] approccio è leggermente meno sicura per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="38e6c-366">If a new action method binds toohello data class directly and forgets tooinclude a [Bind(Include ="â€¦")] attribute, it can be vulnerable tooover-posting attacks, so hello [Bind(Include ="â€¦")] approach is somewhat less secure by default.</span></span> <span data-ttu-id="38e6c-367">Se si utilizza [associare (Include = "â €¦")], prestare attenzione sempre tooremember toospecify, ogni volta che le classi di dati vengono visualizzati come parametri di metodo di azione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-367">If you use [Bind(Include ="â€¦")], take care always tooremember toospecify it every time your data classes appear as action method parameters.</span></span></li><li><span data-ttu-id="38e6c-368">**Per le operazioni di creazione, per quanto riguarda l'inserimento di hello [associare (Include = "â €¦")] attributo sulla classe di modello hello stessa? Non questo approccio evita hello necessità tooremember inserimento hello attributo in ogni metodo di azione? -** Questo approccio funziona in alcuni casi.</span><span class="sxs-lookup"><span data-stu-id="38e6c-368">**For Create operations, what about putting hello [Bind(Include ="â€¦")] attribute on hello model class itself? Does not this approach avoid hello need tooremember putting hello attribute on every action method? -** This approach works in some cases.</span></span> <span data-ttu-id="38e6c-369">Utilizzo [associare (Include = "â €¦")] sul tipo di modello hello stesso (anziché su parametri di azione utilizzando questa classe), evitare di hello tooinclude tooremember necessità di hello [associare (Include = "â €¦")] attributo in ogni metodo di azione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-369">Using [Bind(Include ="â€¦")] on hello model type itself (rather than on action parameters using this class), does avoid hello need tooremember tooinclude hello [Bind(Include ="â€¦")] attribute on every action method.</span></span> <span data-ttu-id="38e6c-370">Utilizzo efficiente di attributo hello direttamente sulla classe hello crea un'area separata della superficie di questa classe per scopi di associazione del modello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-370">Using hello attribute directly on hello class effectively creates a separate surface area of this class for model binding purposes.</span></span> <span data-ttu-id="38e6c-371">Questo approccio, tuttavia, supporta una sola forma di associazione di modelli per classe modello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-371">However, this approach only allows for one model binding shape per model class.</span></span> <span data-ttu-id="38e6c-372">Se un metodo di azione richiesta tooallow associazione del modello di un campo (ad esempio, un amministratore di sola azione che aggiorna i ruoli utente) e altre azioni tooprevent di associazione di modelli di questo campo, questo approccio non funzionerà.</span><span class="sxs-lookup"><span data-stu-id="38e6c-372">If one action method needs tooallow model binding of a field (for example, an administrator-only action that updates user roles) and other actions need tooprevent model binding of this field, this approach will not work.</span></span> <span data-ttu-id="38e6c-373">Ogni classe può avere solo una forma di associazione del modello; Se diverse azioni necessario forme associazione modello diverso, è necessario toorepresent queste forme utilizzando entrambe le classi di modello separato associazione separare o separare [associare (Include = "â €¦")] attributi sui metodi di azione hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-373">Each class can only have one model binding shape; if different actions need different model binding shapes, they need toorepresent these separate shapes using either separate model binding classes or separate [Bind(Include ="â€¦")] attributes on hello action methods.</span></span></li><li><span data-ttu-id="38e6c-374">**Che cosa sono i modelli di associazione? Sono che essi hello stesso elemento sotto forma di visualizzazione di modelli? -** Sono due concetti correlati.</span><span class="sxs-lookup"><span data-stu-id="38e6c-374">**What are binding models? Are they hello same thing as view models? -** These are two related concepts.</span></span> <span data-ttu-id="38e6c-375">termine Hello tooa classe del modello utilizzato in un'azione fa riferimento di modello di associazione è l'elenco di parametri (forma hello passato dal metodo di azione toohello associazione modello MVC).</span><span class="sxs-lookup"><span data-stu-id="38e6c-375">hello term binding model refers tooa model class used in an action is parameter list (hello shape passed from MVC model binding toohello action method).</span></span> <span data-ttu-id="38e6c-376">modello di visualizzazione termine Hello fa riferimento a classe di modello tooa passata da una vista tooa metodo di azione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-376">hello term view model refers tooa model class passed from an action method tooa view.</span></span> <span data-ttu-id="38e6c-377">Utilizzo di un modello di visualizzazione specifica è un approccio comune per passare dati da una vista tooa metodo di azione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-377">Using a view-specific model is a common approach for passing data from an action method tooa view.</span></span> <span data-ttu-id="38e6c-378">Spesso, questa forma è particolarmente adatta per l'associazione di modelli e modello di visualizzazione di hello termine può essere utilizzato toorefer hello stesso modello utilizzato in entrambe le posizioni.</span><span class="sxs-lookup"><span data-stu-id="38e6c-378">Often, this shape is also suitable for model binding, and hello term view model can be used toorefer hello same model used in both places.</span></span> <span data-ttu-id="38e6c-379">toobe preciso, questa procedura comunica in particolare sull'associazione di modelli, porre l'attenzione sulla forma hello passato toohello azione, che è la cosa importante per scopi di assegnazione di massa.</span><span class="sxs-lookup"><span data-stu-id="38e6c-379">toobe precise, this procedure talks specifically about binding models, focusing on hello shape passed toohello action, which is what matters for mass assignment purposes.</span></span></li></ul>| 

## <span data-ttu-id="38e6c-380"><a id="rendering"></a>Codificare web non attendibile output precedente toorendering</span><span class="sxs-lookup"><span data-stu-id="38e6c-380"><a id="rendering"></a>Encode untrusted web output prior toorendering</span></span>

| <span data-ttu-id="38e6c-381">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-381">Title</span></span>                   | <span data-ttu-id="38e6c-382">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-382">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-383">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-383">**Component**</span></span>               | <span data-ttu-id="38e6c-384">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-384">Web Application</span></span> | 
| <span data-ttu-id="38e6c-385">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-385">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-386">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-386">Build</span></span> |  
| <span data-ttu-id="38e6c-387">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-387">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-388">Generico, Web Form, MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="38e6c-388">Generic, Web Forms, MVC5, MVC6</span></span> |
| <span data-ttu-id="38e6c-389">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-389">**Attributes**</span></span>              | <span data-ttu-id="38e6c-390">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-390">N/A</span></span>  |
| <span data-ttu-id="38e6c-391">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-391">**References**</span></span>              | <span data-ttu-id="38e6c-392">[Come tooprevent Cross-site scripting in ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [foglio irregolarità prevenzione di XSS (Cross-Site Scripting)](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span><span class="sxs-lookup"><span data-stu-id="38e6c-392">[How tooprevent Cross-site scripting in ASP.NET](http://msdn.microsoft.com/library/ms998274.aspx), [Cross-site Scripting](http://cwe.mitre.org/data/definitions/79.html), [XSS (Cross Site Scripting) Prevention Cheat Sheet](https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet)</span></span> |
| <span data-ttu-id="38e6c-393">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-393">**Steps**</span></span> | <span data-ttu-id="38e6c-394">Cross-site scripting (comunemente abbreviato XSS) è un vettore di attacco per servizi online o qualsiasi componente o l'applicazione che elabora l'input dal web hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-394">Cross-site scripting (commonly abbreviated as XSS) is an attack vector for online services or any application/component that consumes input from hello web.</span></span> <span data-ttu-id="38e6c-395">Vulnerabilità XSS potrebbe consentire un utente malintenzionato tooexecute script su un altro computer mediante un'applicazione web vulnerabile.</span><span class="sxs-lookup"><span data-stu-id="38e6c-395">XSS vulnerabilities may allow an attacker tooexecute script on another user's machine through a vulnerable web application.</span></span> <span data-ttu-id="38e6c-396">Script dannosi possono essere toosteal utilizzati cookie e in caso contrario manomettere macchina della vittima tramite JavaScript.</span><span class="sxs-lookup"><span data-stu-id="38e6c-396">Malicious scripts can be used toosteal cookies and otherwise tamper with a victim's machine through JavaScript.</span></span> <span data-ttu-id="38e6c-397">È possibile impedire attacchi XSS convalidando l'input utente e verificando che il formato e la codifica siano corretti prima di eseguirne il rendering in una pagina Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-397">XSS is prevented by validating user input, ensuring it is well formed and encoding before it is rendered in a web page.</span></span> <span data-ttu-id="38e6c-398">La convalida dell'input e la codifica dell'output possono essere eseguite con Web Protection Library.</span><span class="sxs-lookup"><span data-stu-id="38e6c-398">Input validation and output encoding can be done by using Web Protection Library.</span></span> <span data-ttu-id="38e6c-399">Per codice gestito (C\#, Visual Basic.NET e così via), utilizzare uno o più appropriato di metodi di codifica da hello libreria Web protezione (Anti-XSS), a seconda del contesto di hello in Ottiene che viene presentato l'input dell'utente hello:</span><span class="sxs-lookup"><span data-stu-id="38e6c-399">For Managed code (C\#, VB.net, etc.), use one or more appropriate encoding methods from hello Web Protection (Anti-XSS) Library, depending on hello context where hello user input gets manifested:</span></span>| 

### <a name="example"></a><span data-ttu-id="38e6c-400">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-400">Example</span></span>

```C#
* Encoder.HtmlEncode 
* Encoder.HtmlAttributeEncode 
* Encoder.JavaScriptEncode 
* Encoder.UrlEncode
* Encoder.VisualBasicScriptEncode 
* Encoder.XmlEncode 
* Encoder.XmlAttributeEncode 
* Encoder.CssEncode 
* Encoder.LdapEncode 
```

## <span data-ttu-id="38e6c-401"><a id="typemodel"></a>Eseguire la convalida dell'input e applicare filtri a tutte le proprietà del modello di tipo stringa</span><span class="sxs-lookup"><span data-stu-id="38e6c-401"><a id="typemodel"></a>Perform input validation and filtering on all string type Model properties</span></span>

| <span data-ttu-id="38e6c-402">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-402">Title</span></span>                   | <span data-ttu-id="38e6c-403">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-403">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-404">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-404">**Component**</span></span>               | <span data-ttu-id="38e6c-405">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-405">Web Application</span></span> | 
| <span data-ttu-id="38e6c-406">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-406">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-407">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-407">Build</span></span> |  
| <span data-ttu-id="38e6c-408">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-408">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-409">Generico, MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="38e6c-409">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="38e6c-410">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-410">**Attributes**</span></span>              | <span data-ttu-id="38e6c-411">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-411">N/A</span></span>  |
| <span data-ttu-id="38e6c-412">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-412">**References**</span></span>              | <span data-ttu-id="38e6c-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation) (Aggiunta della convalida), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx) (Convalida dei dati del modello in un'applicazione MVC), [Principi guida per le applicazioni ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="38e6c-413">[Adding Validation](http://www.asp.net/mvc/overview/getting-started/introduction/adding-validation), [Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="38e6c-414">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-414">**Steps**</span></span> | <p><span data-ttu-id="38e6c-415">Tutti i parametri di input hello devono essere convalidati prima che vengano utilizzate in tooensure applicazione hello che un'applicazione hello è protette contro gli input dell'utente malintenzionato.</span><span class="sxs-lookup"><span data-stu-id="38e6c-415">All hello input parameters must be validated before they are used in hello application tooensure that hello application is safeguarded against malicious user inputs.</span></span> <span data-ttu-id="38e6c-416">Convalidare i valori di input hello utilizzando le convalide di espressione regolare sul lato server con una strategia di convalida whitelist.</span><span class="sxs-lookup"><span data-stu-id="38e6c-416">Validate hello input values using regular expression validations on server side with a whitelist validation strategy.</span></span> <span data-ttu-id="38e6c-417">Input utente unsanitized / parametri passati a metodi toohello possono causare codice vulnerabilità di tipo injection.</span><span class="sxs-lookup"><span data-stu-id="38e6c-417">Unsanitized user inputs / parameters passed toohello methods can cause code injection vulnerabilities.</span></span></p><p><span data-ttu-id="38e6c-418">Per le applicazioni Web, i punti di ingresso possono includere anche campi modulo, stringhe di query, cookie, intestazioni HTTP e parametri del servizio Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-418">For web applications, entry points can also include form fields, QueryStrings, cookies, HTTP headers, and web service parameters.</span></span></p><p><span data-ttu-id="38e6c-419">Hello seguenti controlli di convalida dell'input devono essere eseguiti durante l'associazione di modelli:</span><span class="sxs-lookup"><span data-stu-id="38e6c-419">hello following input validation checks must be performed upon model binding:</span></span></p><ul><li><span data-ttu-id="38e6c-420">le proprietà del modello Hello devono essere annotate con l'annotazione RegularExpression, per accettare i caratteri consentiti e la lunghezza massima consentita</span><span class="sxs-lookup"><span data-stu-id="38e6c-420">hello model properties should be annotated with RegularExpression annotation, for accepting allowed characters and maximum permissible length</span></span></li><li><span data-ttu-id="38e6c-421">i metodi del controller Hello devono eseguire ModelState validità</span><span class="sxs-lookup"><span data-stu-id="38e6c-421">hello controller methods should perform ModelState validity</span></span></li></ul>|

## <span data-ttu-id="38e6c-422"><a id="richtext"></a>Applicazione della purificazione nei campi modulo che accettano tutti i caratteri, ad esempio un editor di testo RTF</span><span class="sxs-lookup"><span data-stu-id="38e6c-422"><a id="richtext"></a>Sanitization should be applied on form fields that accept all characters, e.g, rich text editor</span></span>

| <span data-ttu-id="38e6c-423">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-423">Title</span></span>                   | <span data-ttu-id="38e6c-424">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-424">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-425">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-425">**Component**</span></span>               | <span data-ttu-id="38e6c-426">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-426">Web Application</span></span> | 
| <span data-ttu-id="38e6c-427">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-427">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-428">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-428">Build</span></span> |  
| <span data-ttu-id="38e6c-429">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-429">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-430">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-430">Generic</span></span> |
| <span data-ttu-id="38e6c-431">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-431">**Attributes**</span></span>              | <span data-ttu-id="38e6c-432">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-432">N/A</span></span>  |
| <span data-ttu-id="38e6c-433">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-433">**References**</span></span>              | <span data-ttu-id="38e6c-434">[Encode Unsafe Input](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3) (Codificare l'input non sicuro), [HtmlSanitizer](https://github.com/mganss/HtmlSanitizer)</span><span class="sxs-lookup"><span data-stu-id="38e6c-434">[Encode Unsafe Input](https://msdn.microsoft.com/library/ff647397.aspx#paght000003_step3), [HTML Sanitizer](https://github.com/mganss/HtmlSanitizer)</span></span> |
| <span data-ttu-id="38e6c-435">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-435">**Steps**</span></span> | <p><span data-ttu-id="38e6c-436">Identificare tutti i tag di markup statico che si desidera toouse.</span><span class="sxs-lookup"><span data-stu-id="38e6c-436">Identify all static markup tags that you want toouse.</span></span> <span data-ttu-id="38e6c-437">Una pratica comune è la formattazione di elementi toosafe HTML, ad esempio toorestrict `<b>` (grassetto) e `<i>` (in corsivo).</span><span class="sxs-lookup"><span data-stu-id="38e6c-437">A common practice is toorestrict formatting toosafe HTML elements, such as `<b>` (bold) and `<i>` (italic).</span></span></p><p><span data-ttu-id="38e6c-438">Prima di scrivere dati hello, codificare in formato HTML.</span><span class="sxs-lookup"><span data-stu-id="38e6c-438">Before writing hello data, HTML-encode it.</span></span> <span data-ttu-id="38e6c-439">In questo modo di qualsiasi script dannoso-safe, di conseguenza toobe gestito come testo, non come codice eseguibile.</span><span class="sxs-lookup"><span data-stu-id="38e6c-439">This makes any malicious script safe by causing it toobe handled as text, not as executable code.</span></span></p><ol><li><span data-ttu-id="38e6c-440">Disabilitare la richiesta ASP.NET convalida aggiungendo hello hello ValidateRequest = "false" attributo toohello @ direttiva della pagina</span><span class="sxs-lookup"><span data-stu-id="38e6c-440">Disable ASP.NET request validation by hello adding hello ValidateRequest="false" attribute toohello @ Page directive</span></span></li><li><span data-ttu-id="38e6c-441">Codificare l'input di stringa hello con metodo HtmlEncode hello</span><span class="sxs-lookup"><span data-stu-id="38e6c-441">Encode hello string input with hello HtmlEncode method</span></span></li><li><span data-ttu-id="38e6c-442">Usa chiamata relativo tooselectively metodo Replace rimuovere hello codifica per gli elementi di hello HTML che si desidera toopermit e StringBuilder</span><span class="sxs-lookup"><span data-stu-id="38e6c-442">Use a StringBuilder and call its Replace method tooselectively remove hello encoding on hello HTML elements that you want toopermit</span></span></li></ol><p><span data-ttu-id="38e6c-443">Hello riferimenti pagina aggiuntivo hello disabilita la convalida delle richieste ASP.NET impostando `ValidateRequest="false"`.</span><span class="sxs-lookup"><span data-stu-id="38e6c-443">hello page-in hello references disables ASP.NET request validation by setting `ValidateRequest="false"`.</span></span> <span data-ttu-id="38e6c-444">Si codifica in HTML hello di input e consente in modo selettivo hello `<b>` e `<i>` in alternativa, può anche essere usata una libreria .NET per la purificazione dei processi HTML.</span><span class="sxs-lookup"><span data-stu-id="38e6c-444">It HTML-encodes hello input and selectively allows hello `<b>` and `<i>` Alternatively, a .NET library for HTML sanitization may also be used.</span></span></p><p><span data-ttu-id="38e6c-445">HtmlSanitizer è una libreria .NET per la pulizia dei frammenti HTML e documenti da costrutti che possono causare attacchi tooXSS.</span><span class="sxs-lookup"><span data-stu-id="38e6c-445">HtmlSanitizer is a .NET library for cleaning HTML fragments and documents from constructs that can lead tooXSS attacks.</span></span> <span data-ttu-id="38e6c-446">Usa AngleSharp tooparse, modificare e il rendering di HTML e CSS.</span><span class="sxs-lookup"><span data-stu-id="38e6c-446">It uses AngleSharp tooparse, manipulate, and render HTML and CSS.</span></span> <span data-ttu-id="38e6c-447">HtmlSanitizer può essere installato come un pacchetto NuGet e hello l'input dell'utente può essere passato tramite HTML o CSS purificazione i metodi pertinenti, come applicabile, sul lato server hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-447">HtmlSanitizer can be installed as a NuGet package, and hello user input can be passed through relevant HTML or CSS sanitization methods, as applicable, on hello server side.</span></span> <span data-ttu-id="38e6c-448">Si noti che la purificazione deve essere presa in considerazione come controllo di sicurezza solo come ultima opzione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-448">Please note that Sanitization as a security control should be considered only as a last option.</span></span></p><p><span data-ttu-id="38e6c-449">La convalida dell'input e la codifica dell'output sono considerati controlli di sicurezza più efficienti.</span><span class="sxs-lookup"><span data-stu-id="38e6c-449">Input validation and Output Encoding are considered better security controls.</span></span></p> |

## <span data-ttu-id="38e6c-450"><a id="inbuilt-encode"></a>Non assegnare toosinks elementi DOM che non dispongono di codifica incorporato</span><span class="sxs-lookup"><span data-stu-id="38e6c-450"><a id="inbuilt-encode"></a>Do not assign DOM elements toosinks that do not have inbuilt encoding</span></span>

| <span data-ttu-id="38e6c-451">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-451">Title</span></span>                   | <span data-ttu-id="38e6c-452">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-452">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-453">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-453">**Component**</span></span>               | <span data-ttu-id="38e6c-454">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-454">Web Application</span></span> | 
| <span data-ttu-id="38e6c-455">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-455">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-456">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-456">Build</span></span> |  
| <span data-ttu-id="38e6c-457">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-457">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-458">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-458">Generic</span></span> |
| <span data-ttu-id="38e6c-459">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-459">**Attributes**</span></span>              | <span data-ttu-id="38e6c-460">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-460">N/A</span></span>  |
| <span data-ttu-id="38e6c-461">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-461">**References**</span></span>              | <span data-ttu-id="38e6c-462">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-462">N/A</span></span>  |
| <span data-ttu-id="38e6c-463">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-463">**Steps**</span></span> | <span data-ttu-id="38e6c-464">Molte funzioni JavaScript non eseguono la codifica per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="38e6c-464">Many javascript functions don't do encoding by default.</span></span> <span data-ttu-id="38e6c-465">Quando si assegnano gli elementi tooDOM di input non attendibile tramite tali funzioni, può comportare tra le esecuzioni di script (XSS) del sito.</span><span class="sxs-lookup"><span data-stu-id="38e6c-465">When assigning untrusted input tooDOM elements via such functions, may result in cross site script (XSS) executions.</span></span>| 

### <a name="example"></a><span data-ttu-id="38e6c-466">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-466">Example</span></span>
<span data-ttu-id="38e6c-467">Gli esempi seguenti non sono sicuri:</span><span class="sxs-lookup"><span data-stu-id="38e6c-467">Following are insecure examples:</span></span> 

```
document.getElementByID("div1").innerHtml = value;
$("#userName").html(res.Name);
return $('<div/>').html(value)
$('body').append(resHTML);   
```
<span data-ttu-id="38e6c-468">Non usare `innerHtml`. Usare invece `innerText`.</span><span class="sxs-lookup"><span data-stu-id="38e6c-468">Don't use `innerHtml`; instead use `innerText`.</span></span> <span data-ttu-id="38e6c-469">Analogamente, usare `$("#elm").text()` invece di `$("#elm").html()`.</span><span class="sxs-lookup"><span data-stu-id="38e6c-469">Similarly, instead of `$("#elm").html()`, use `$("#elm").text()`</span></span> 

## <span data-ttu-id="38e6c-470"><a id="redirect-safe"></a>Convalidare tutti i reindirizzamenti all'interno di un'applicazione hello sono chiuso o completati in modo sicuro</span><span class="sxs-lookup"><span data-stu-id="38e6c-470"><a id="redirect-safe"></a>Validate all redirects within hello application are closed or done safely</span></span>

| <span data-ttu-id="38e6c-471">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-471">Title</span></span>                   | <span data-ttu-id="38e6c-472">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-472">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-473">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-473">**Component**</span></span>               | <span data-ttu-id="38e6c-474">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-474">Web Application</span></span> | 
| <span data-ttu-id="38e6c-475">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-475">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-476">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-476">Build</span></span> |  
| <span data-ttu-id="38e6c-477">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-477">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-478">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-478">Generic</span></span> |
| <span data-ttu-id="38e6c-479">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-479">**Attributes**</span></span>              | <span data-ttu-id="38e6c-480">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-480">N/A</span></span>  |
| <span data-ttu-id="38e6c-481">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-481">**References**</span></span>              | [<span data-ttu-id="38e6c-482">Hello Framework di autorizzazione OAuth 2.0 - redirector aperto</span><span class="sxs-lookup"><span data-stu-id="38e6c-482">hello OAuth 2.0 Authorization Framework - Open Redirectors</span></span>](http://tools.ietf.org/html/rfc6749#section-10.15) |
| <span data-ttu-id="38e6c-483">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-483">**Steps**</span></span> | <p><span data-ttu-id="38e6c-484">Progettazione di applicazioni che richiedono percorso fornito dall'utente di reindirizzamento tooa necessario vincolare hello reindirizzamento possibili destinazioni tooa "sicura" elenco predefinito di siti o domini.</span><span class="sxs-lookup"><span data-stu-id="38e6c-484">Application design requiring redirection tooa user-supplied location must constrain hello possible redirection targets tooa predefined "safe" list of sites or domains.</span></span> <span data-ttu-id="38e6c-485">Tutti i reindirizzamenti di un'applicazione hello devono essere chiuso/safe.</span><span class="sxs-lookup"><span data-stu-id="38e6c-485">All redirects in hello application must be closed/safe.</span></span></p><p><span data-ttu-id="38e6c-486">toodo questo:</span><span class="sxs-lookup"><span data-stu-id="38e6c-486">toodo this:</span></span></p><ul><li><span data-ttu-id="38e6c-487">Identificare tutti i reindirizzamenti.</span><span class="sxs-lookup"><span data-stu-id="38e6c-487">Identify all redirects</span></span></li><li><span data-ttu-id="38e6c-488">Implementare una procedura di mitigazione appropriata per ogni reindirizzamento.</span><span class="sxs-lookup"><span data-stu-id="38e6c-488">Implement an appropriate mitigation for each redirect.</span></span> <span data-ttu-id="38e6c-489">Le procedure di mitigazione appropriate includono un elenco elementi consentiti di reindirizzamento o la conferma dell'utente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-489">Appropriate mitigations include redirect whitelist or user confirmation.</span></span> <span data-ttu-id="38e6c-490">Se un servizio o un sito Web con una vulnerabilità causata da reindirizzamenti aperti usa i provider di identità Facebook/OAuth/OpenID, un utente malintenzionato può rubare il token di accesso di un utente e rappresentare tale utente.</span><span class="sxs-lookup"><span data-stu-id="38e6c-490">If a web site or service with an open redirect vulnerability uses Facebook/OAuth/OpenID identity providers, an attacker can steal a user's logon token and impersonate that user.</span></span> <span data-ttu-id="38e6c-491">Si tratta di un rischio inerente quando si utilizza OAuth, è documentata nella RFC 6749 "hello Framework di autorizzazione OAuth 2.0", sezione 10.15 "aprire reindirizza" in modo analogo, le credenziali degli utenti possono essere compromessa da attacchi di phishing spear utilizzano reindirizzamenti aperti</span><span class="sxs-lookup"><span data-stu-id="38e6c-491">This is an inherent risk when using OAuth, which is documented in RFC 6749 "hello OAuth 2.0 Authorization Framework", Section 10.15 "Open Redirects" Similarly, users' credentials can be compromised by spear phishing attacks using open redirects</span></span></li></ul>|

## <span data-ttu-id="38e6c-492"><a id="string-method"></a>Implementare la convalida dell'input in un tutti i parametri di tipo stringa accettati dai metodi del controller</span><span class="sxs-lookup"><span data-stu-id="38e6c-492"><a id="string-method"></a>Implement input validation on all string type parameters accepted by Controller methods</span></span>

| <span data-ttu-id="38e6c-493">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-493">Title</span></span>                   | <span data-ttu-id="38e6c-494">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-494">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-495">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-495">**Component**</span></span>               | <span data-ttu-id="38e6c-496">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-496">Web Application</span></span> | 
| <span data-ttu-id="38e6c-497">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-497">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-498">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-498">Build</span></span> |  
| <span data-ttu-id="38e6c-499">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-499">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-500">Generico, MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="38e6c-500">Generic, MVC5, MVC6</span></span> |
| <span data-ttu-id="38e6c-501">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-501">**Attributes**</span></span>              | <span data-ttu-id="38e6c-502">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-502">N/A</span></span>  |
| <span data-ttu-id="38e6c-503">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-503">**References**</span></span>              | <span data-ttu-id="38e6c-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx) (Convalida dei dati del modello in un'applicazione MVC), [Principi guida per le applicazioni ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="38e6c-504">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="38e6c-505">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-505">**Steps**</span></span> | <span data-ttu-id="38e6c-506">Per i metodi che accettano come argomento solo un tipo di dati primitivo e non modelli, deve essere eseguita la convalida dell'input con un'espressione regolare.</span><span class="sxs-lookup"><span data-stu-id="38e6c-506">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="38e6c-507">In questo caso, è necessario usare Regex.IsMatch con un criterio regex valido.</span><span class="sxs-lookup"><span data-stu-id="38e6c-507">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="38e6c-508">Se non corrisponde a input hello hello di espressione regolare specificata, controllo deve non procedere e deve essere visualizzato un avviso adeguato riguardante un errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="38e6c-508">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>| 

## <span data-ttu-id="38e6c-509"><a id="dos-expression"></a>Impostare il timeout del limite superiore per l'elaborazione DoS tooprevent a causa di espressioni regolari toobad delle espressioni regolari</span><span class="sxs-lookup"><span data-stu-id="38e6c-509"><a id="dos-expression"></a>Set upper limit timeout for regular expression processing tooprevent DoS due toobad regular expressions</span></span>

| <span data-ttu-id="38e6c-510">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-510">Title</span></span>                   | <span data-ttu-id="38e6c-511">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-511">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-512">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-512">**Component**</span></span>               | <span data-ttu-id="38e6c-513">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-513">Web Application</span></span> | 
| <span data-ttu-id="38e6c-514">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-514">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-515">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-515">Build</span></span> |  
| <span data-ttu-id="38e6c-516">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-516">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-517">Generico, Web Form, MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="38e6c-517">Generic, Web Forms, MVC5, MVC6</span></span>  |
| <span data-ttu-id="38e6c-518">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-518">**Attributes**</span></span>              | <span data-ttu-id="38e6c-519">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-519">N/A</span></span>  |
| <span data-ttu-id="38e6c-520">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-520">**References**</span></span>              | [<span data-ttu-id="38e6c-521">Proprietà DefaultRegexMatchTimeout</span><span class="sxs-lookup"><span data-stu-id="38e6c-521">DefaultRegexMatchTimeout Property </span></span>](https://msdn.microsoft.com/library/system.web.configuration.httpruntimesection.defaultregexmatchtimeout.aspx) |
| <span data-ttu-id="38e6c-522">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-522">**Steps**</span></span> | <span data-ttu-id="38e6c-523">tooensure attacchi denial of service contro creato in espressioni regolari, che causano un lotto del backtracking, l'impostazione di timeout predefinito globale hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-523">tooensure denial of service attacks against badly created regular expressions, that cause a lot of backtracking, set hello global default timeout.</span></span> <span data-ttu-id="38e6c-524">Se il tempo di elaborazione hello impiega più tempo hello è definito un limite superiore, genera un'eccezione di Timeout.</span><span class="sxs-lookup"><span data-stu-id="38e6c-524">If hello processing time takes longer than hello defined upper limit, it would throw a Timeout exception.</span></span> <span data-ttu-id="38e6c-525">Se non è configurato, il timeout di hello sarebbe infinito.</span><span class="sxs-lookup"><span data-stu-id="38e6c-525">If nothing is configured, hello timeout would be infinite.</span></span>| 

### <a name="example"></a><span data-ttu-id="38e6c-526">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-526">Example</span></span>
<span data-ttu-id="38e6c-527">Ad esempio, hello seguente configurazione genererà un RegexMatchTimeoutException, se l'elaborazione di hello richiede più di 5 secondi:</span><span class="sxs-lookup"><span data-stu-id="38e6c-527">For example, hello following configuration will throw a RegexMatchTimeoutException, if hello processing takes more than 5 seconds:</span></span> 

```C#
<httpRuntime targetFramework="4.5" defaultRegexMatchTimeout="00:00:05" />
```

## <span data-ttu-id="38e6c-528"><a id="html-razor"></a>Evitare di usare Html.Raw nelle visualizzazioni Razor</span><span class="sxs-lookup"><span data-stu-id="38e6c-528"><a id="html-razor"></a>Avoid using Html.Raw in Razor views</span></span>

| <span data-ttu-id="38e6c-529">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-529">Title</span></span>                   | <span data-ttu-id="38e6c-530">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-530">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-531">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-531">**Component**</span></span>               | <span data-ttu-id="38e6c-532">Applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="38e6c-532">Web Application</span></span> | 
| <span data-ttu-id="38e6c-533">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-533">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-534">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-534">Build</span></span> |  
| <span data-ttu-id="38e6c-535">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-535">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-536">MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="38e6c-536">MVC5, MVC6</span></span> |
| <span data-ttu-id="38e6c-537">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-537">**Attributes**</span></span>              | <span data-ttu-id="38e6c-538">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-538">N/A</span></span>  |
| <span data-ttu-id="38e6c-539">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-539">**References**</span></span>              | <span data-ttu-id="38e6c-540">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-540">N/A</span></span>  |
| <span data-ttu-id="38e6c-541">Passaggio</span><span class="sxs-lookup"><span data-stu-id="38e6c-541">Step</span></span> | <span data-ttu-id="38e6c-542">Le pagine Web ASP.Net (Razor) eseguono la codifica HTML automatica.</span><span class="sxs-lookup"><span data-stu-id="38e6c-542">ASP.Net WebPages (Razor) perform automatic HTML encoding.</span></span> <span data-ttu-id="38e6c-543">A tutte le stringhe stampate da nugget di codice incorporati (blocchi @) viene applicata automaticamente la codifica HTML.</span><span class="sxs-lookup"><span data-stu-id="38e6c-543">All strings printed by embedded code nuggets (@ blocks) are automatically HTML-encoded.</span></span> <span data-ttu-id="38e6c-544">Quando viene richiamato `HtmlHelper.Raw`, tuttavia, questo metodo restituisce markup senza codifica HTML.</span><span class="sxs-lookup"><span data-stu-id="38e6c-544">However, when `HtmlHelper.Raw` Method is invoked, it returns markup that is not HTML encoded.</span></span> <span data-ttu-id="38e6c-545">Se `Html.Raw()` metodo helper viene utilizzato, consente di ignorare hello codifica protezione automatica che fornisce Razor.</span><span class="sxs-lookup"><span data-stu-id="38e6c-545">If `Html.Raw()` helper method is used, it bypasses hello automatic encoding protection that Razor provides.</span></span>|

### <a name="example"></a><span data-ttu-id="38e6c-546">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-546">Example</span></span>
<span data-ttu-id="38e6c-547">L'esempio seguente non è sicuro:</span><span class="sxs-lookup"><span data-stu-id="38e6c-547">Following is an insecure example:</span></span> 

```C#
<div class="form-group">
            @Html.Raw(Model.AccountConfirmText)
        </div>
        <div class="form-group">
            @Html.Raw(Model.PaymentConfirmText)
        </div>
</div>
```
<span data-ttu-id="38e6c-548">Non utilizzare `Html.Raw()` a meno che non è necessario toodisplay markup.</span><span class="sxs-lookup"><span data-stu-id="38e6c-548">Do not use `Html.Raw()` unless you need toodisplay markup.</span></span> <span data-ttu-id="38e6c-549">Questo metodo non esegue implicitamente la codifica dell'output.</span><span class="sxs-lookup"><span data-stu-id="38e6c-549">This method does not perform output encoding implicitly.</span></span> <span data-ttu-id="38e6c-550">Usare altri helper ASP.NET, ad esempio `@Html.DisplayFor()`</span><span class="sxs-lookup"><span data-stu-id="38e6c-550">Use other ASP.NET helpers e.g., `@Html.DisplayFor()`</span></span> 

## <span data-ttu-id="38e6c-551"><a id="stored-proc"></a>Non usare query dinamiche nelle stored procedure</span><span class="sxs-lookup"><span data-stu-id="38e6c-551"><a id="stored-proc"></a>Do not use dynamic queries in stored procedures</span></span>

| <span data-ttu-id="38e6c-552">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-552">Title</span></span>                   | <span data-ttu-id="38e6c-553">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-553">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-554">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-554">**Component**</span></span>               | <span data-ttu-id="38e6c-555">Database</span><span class="sxs-lookup"><span data-stu-id="38e6c-555">Database</span></span> | 
| <span data-ttu-id="38e6c-556">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-556">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-557">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-557">Build</span></span> |  
| <span data-ttu-id="38e6c-558">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-558">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-559">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-559">Generic</span></span> |
| <span data-ttu-id="38e6c-560">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-560">**Attributes**</span></span>              | <span data-ttu-id="38e6c-561">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-561">N/A</span></span>  |
| <span data-ttu-id="38e6c-562">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-562">**References**</span></span>              | <span data-ttu-id="38e6c-563">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-563">N/A</span></span>  |
| <span data-ttu-id="38e6c-564">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-564">**Steps**</span></span> | <p><span data-ttu-id="38e6c-565">Un attacco SQL injection sfrutta le vulnerabilità nei comandi arbitrari di convalida dell'input toorun nel database di hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-565">A SQL injection attack exploits vulnerabilities in input validation toorun arbitrary commands in hello database.</span></span> <span data-ttu-id="38e6c-566">Può verificarsi quando l'applicazione utilizza input tooconstruct dinamica tooaccess istruzioni SQL hello database.</span><span class="sxs-lookup"><span data-stu-id="38e6c-566">It can occur when your application uses input tooconstruct dynamic SQL statements tooaccess hello database.</span></span> <span data-ttu-id="38e6c-567">nonché se il codice usa stored procedure costituite da stringhe passate contenenti input utente non elaborato.</span><span class="sxs-lookup"><span data-stu-id="38e6c-567">It can also occur if your code uses stored procedures that are passed strings that contain raw user input.</span></span> <span data-ttu-id="38e6c-568">Utilizza hello attacco SQL injection, autore dell'attacco hello può eseguire comandi arbitrari nel database di hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-568">Using hello SQL injection attack, hello attacker can execute arbitrary commands in hello database.</span></span> <span data-ttu-id="38e6c-569">Tutte le istruzioni SQL (incluso istruzioni SQL hello nelle stored procedure) devono essere con parametri.</span><span class="sxs-lookup"><span data-stu-id="38e6c-569">All SQL statements (including hello SQL statements in stored procedures) must be parameterized.</span></span> <span data-ttu-id="38e6c-570">Istruzioni SQL con parametri accetterà i caratteri che hanno un significato speciale tooSQL (ad esempio, la virgoletta singola) senza problemi in quanto sono fortemente tipizzati.</span><span class="sxs-lookup"><span data-stu-id="38e6c-570">Parameterized SQL statements will accept characters that have special meaning tooSQL (like single quote) without problems because they are strongly typed.</span></span> |

### <a name="example"></a><span data-ttu-id="38e6c-571">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-571">Example</span></span>
<span data-ttu-id="38e6c-572">L'esempio seguente è una stored procedure dinamica non sicura:</span><span class="sxs-lookup"><span data-stu-id="38e6c-572">Following is an example of insecure dynamic Stored Procedure:</span></span> 

```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteria]
(
  @productName nvarchar(200) = NULL,
  @startPrice float = NULL,
  @endPrice float = NULL
)
AS
 BEGIN
  DECLARE @sql nvarchar(max)
  SELECT @sql = ' SELECT ProductID, ProductName, Description, UnitPrice, ImagePath' +
       ' FROM dbo.Products WHERE 1 = 1 '
       PRINT @sql
  IF @productName IS NOT NULL
     SELECT @sql = @sql + ' AND ProductName LIKE ''%' + @productName + '%'''
  IF @startPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice > ''' + CONVERT(VARCHAR(10),@startPrice) + ''''
  IF @endPrice IS NOT NULL
     SELECT @sql = @sql + ' AND UnitPrice < ''' + CONVERT(VARCHAR(10),@endPrice) + ''''

  PRINT @sql
  EXEC(@sql)
 END
```

### <a name="example"></a><span data-ttu-id="38e6c-573">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-573">Example</span></span>
<span data-ttu-id="38e6c-574">Di seguito è hello stessa stored procedure è stata implementata in modo sicuro:</span><span class="sxs-lookup"><span data-stu-id="38e6c-574">Following is hello same stored procedure implemented securely:</span></span> 
```C#
CREATE PROCEDURE [dbo].[uspGetProductsByCriteriaSecure]
(
             @productName nvarchar(200) = NULL,
             @startPrice float = NULL,
             @endPrice float = NULL
)
AS
       BEGIN
             SELECT ProductID, ProductName, Description, UnitPrice, ImagePath
             FROM dbo.Products where
             (@productName IS NULL or ProductName like '%'+ @productName +'%')
             AND
             (@startPrice IS NULL or UnitPrice > @startPrice)
             AND
             (@endPrice IS NULL or UnitPrice < @endPrice)         
       END
```

## <span data-ttu-id="38e6c-575"><a id="validation-api"></a>Verificare l'esecuzione della convalida dei modelli nei metodi di API Web</span><span class="sxs-lookup"><span data-stu-id="38e6c-575"><a id="validation-api"></a>Ensure that model validation is done on Web API methods</span></span>

| <span data-ttu-id="38e6c-576">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-576">Title</span></span>                   | <span data-ttu-id="38e6c-577">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-577">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-578">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-578">**Component**</span></span>               | <span data-ttu-id="38e6c-579">API Web</span><span class="sxs-lookup"><span data-stu-id="38e6c-579">Web API</span></span> | 
| <span data-ttu-id="38e6c-580">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-580">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-581">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-581">Build</span></span> |  
| <span data-ttu-id="38e6c-582">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-582">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-583">MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="38e6c-583">MVC5, MVC6</span></span> |
| <span data-ttu-id="38e6c-584">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-584">**Attributes**</span></span>              | <span data-ttu-id="38e6c-585">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-585">N/A</span></span>  |
| <span data-ttu-id="38e6c-586">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-586">**References**</span></span>              | <span data-ttu-id="38e6c-587">[Model Validation in ASP.NET Web API ](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api) (Convalida dei modelli in un'API Web ASP.NET)</span><span class="sxs-lookup"><span data-stu-id="38e6c-587">[Model Validation in ASP.NET Web API ](http://www.asp.net/web-api/overview/formats-and-model-binding/model-validation-in-aspnet-web-api)</span></span> |
| <span data-ttu-id="38e6c-588">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-588">**Steps**</span></span> | <span data-ttu-id="38e6c-589">Quando un client invia l'API web tooa di dati, è prima di eseguire qualsiasi elaborazione dati hello toovalidate obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="38e6c-589">When a client sends data tooa web API, it is mandatory toovalidate hello data before doing any processing.</span></span> <span data-ttu-id="38e6c-590">Per ASP.NET Web API che accettano i modelli come input, utilizzare le annotazioni dei dati sulle regole di convalida di modelli tooset sulle proprietà hello del modello di hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-590">For ASP.NET Web APIs which accept models as input, use data annotations on models tooset validation rules on hello properties of hello model.</span></span>|

### <a name="example"></a><span data-ttu-id="38e6c-591">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-591">Example</span></span>
<span data-ttu-id="38e6c-592">Hello seguente codice illustra hello stesso:</span><span class="sxs-lookup"><span data-stu-id="38e6c-592">hello following code demonstrates hello same:</span></span> 

```C#
using System.ComponentModel.DataAnnotations;

namespace MyApi.Models
{
    public class Product
    {
        public int Id { get; set; }
        [Required]
        [RegularExpression(@"^[a-zA-Z0-9]*$", ErrorMessage="Only alphanumeric characters are allowed.")]
        public string Name { get; set; }
        public decimal Price { get; set; }
        [Range(0, 999)]
        public double Weight { get; set; }
    }
}
```

### <a name="example"></a><span data-ttu-id="38e6c-593">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-593">Example</span></span>
<span data-ttu-id="38e6c-594">Nel metodo di azione hello del controller API hello, validità del modello di hello è toobe verificate in modo esplicito come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="38e6c-594">In hello action method of hello API controllers, validity of hello model has toobe explicitly checked as shown below:</span></span> 

```C#
namespace MyApi.Controllers
{
    public class ProductsController : ApiController
    {
        public HttpResponseMessage Post(Product product)
        {
            if (ModelState.IsValid)
            {
                // Do something with hello product (not shown).

                return new HttpResponseMessage(HttpStatusCode.OK);
            }
            else
            {
                return Request.CreateErrorResponse(HttpStatusCode.BadRequest, ModelState);
            }
        }
    }
}
```

## <span data-ttu-id="38e6c-595"><a id="string-api"></a>Implementare la convalida dell'input in tutti i parametri di tipo stringa accettati dai metodi di API Web</span><span class="sxs-lookup"><span data-stu-id="38e6c-595"><a id="string-api"></a>Implement input validation on all string type parameters accepted by Web API methods</span></span>

| <span data-ttu-id="38e6c-596">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-596">Title</span></span>                   | <span data-ttu-id="38e6c-597">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-597">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-598">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-598">**Component**</span></span>               | <span data-ttu-id="38e6c-599">API Web</span><span class="sxs-lookup"><span data-stu-id="38e6c-599">Web API</span></span> | 
| <span data-ttu-id="38e6c-600">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-600">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-601">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-601">Build</span></span> |  
| <span data-ttu-id="38e6c-602">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-602">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-603">Generico, MVC 5, MVC 6</span><span class="sxs-lookup"><span data-stu-id="38e6c-603">Generic, MVC 5, MVC 6</span></span> |
| <span data-ttu-id="38e6c-604">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-604">**Attributes**</span></span>              | <span data-ttu-id="38e6c-605">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-605">N/A</span></span>  |
| <span data-ttu-id="38e6c-606">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-606">**References**</span></span>              | <span data-ttu-id="38e6c-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx) (Convalida dei dati del modello in un'applicazione MVC), [Principi guida per le applicazioni ASP.NET MVC](http://msdn.microsoft.com/magazine/dd942822.aspx)</span><span class="sxs-lookup"><span data-stu-id="38e6c-607">[Validating Model Data in an MVC Application](http://msdn.microsoft.com/library/dd410404(v=vs.90).aspx), [Guiding Principles For Your ASP.NET MVC Applications](http://msdn.microsoft.com/magazine/dd942822.aspx)</span></span> |
| <span data-ttu-id="38e6c-608">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-608">**Steps**</span></span> | <span data-ttu-id="38e6c-609">Per i metodi che accettano come argomento solo un tipo di dati primitivo e non modelli, deve essere eseguita la convalida dell'input con un'espressione regolare.</span><span class="sxs-lookup"><span data-stu-id="38e6c-609">For methods that just accept primitive data type, and not models as argument,input validation using Regular Expression should be done.</span></span> <span data-ttu-id="38e6c-610">In questo caso, è necessario usare Regex.IsMatch con un criterio regex valido.</span><span class="sxs-lookup"><span data-stu-id="38e6c-610">Here Regex.IsMatch should be used with a valid regex pattern.</span></span> <span data-ttu-id="38e6c-611">Se non corrisponde a input hello hello di espressione regolare specificata, controllo deve non procedere e deve essere visualizzato un avviso adeguato riguardante un errore di convalida.</span><span class="sxs-lookup"><span data-stu-id="38e6c-611">If hello input doesn't match hello specified Regular Expression, control should not proceed further, and an adequate warning regarding validation failure should be displayed.</span></span>|

## <span data-ttu-id="38e6c-612"><a id="typesafe-api"></a>Verificare che nell'API Web vengano usati parametri indipendenti dai tipi per l'accesso ai dati</span><span class="sxs-lookup"><span data-stu-id="38e6c-612"><a id="typesafe-api"></a>Ensure that type-safe parameters are used in Web API for data access</span></span>

| <span data-ttu-id="38e6c-613">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-613">Title</span></span>                   | <span data-ttu-id="38e6c-614">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-614">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-615">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-615">**Component**</span></span>               | <span data-ttu-id="38e6c-616">API Web</span><span class="sxs-lookup"><span data-stu-id="38e6c-616">Web API</span></span> | 
| <span data-ttu-id="38e6c-617">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-617">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-618">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-618">Build</span></span> |  
| <span data-ttu-id="38e6c-619">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-619">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-620">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-620">Generic</span></span> |
| <span data-ttu-id="38e6c-621">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-621">**Attributes**</span></span>              | <span data-ttu-id="38e6c-622">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-622">N/A</span></span>  |
| <span data-ttu-id="38e6c-623">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-623">**References**</span></span>              | <span data-ttu-id="38e6c-624">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-624">N/A</span></span>  |
| <span data-ttu-id="38e6c-625">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-625">**Steps**</span></span> | <p><span data-ttu-id="38e6c-626">Se si utilizza la raccolta di parametri hello, SQL considera hello input è un valore letterale anziché come codice eseguibile.</span><span class="sxs-lookup"><span data-stu-id="38e6c-626">If you use hello Parameters collection, SQL treats hello input is as a literal value rather then as executable code.</span></span> <span data-ttu-id="38e6c-627">raccolta di parametri Hello può essere tooenforce utilizzati vincoli di tipo e lunghezza su dati di input.</span><span class="sxs-lookup"><span data-stu-id="38e6c-627">hello Parameters collection can be used tooenforce type and length constraints on input data.</span></span> <span data-ttu-id="38e6c-628">I valori di fuori intervallo hello generano un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-628">Values outside of hello range trigger an exception.</span></span> <span data-ttu-id="38e6c-629">Se non vengono utilizzati parametri SQL indipendenti dai tipi, gli utenti malintenzionati potrebbero essere attacchi intrusivi nel codice in grado di tooexecute incorporati nell'input non filtrato hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-629">If type-safe SQL parameters are not used, attackers might be able tooexecute injection attacks that are embedded in hello unfiltered input.</span></span></p><p><span data-ttu-id="38e6c-630">Utilizzare i parametri indipendenti dai tipi quando costruzione SQL esegue una query tooavoid possibili attacchi SQL injection che possono verificarsi con input non filtrato.</span><span class="sxs-lookup"><span data-stu-id="38e6c-630">Use type safe parameters when constructing SQL queries tooavoid possible SQL injection attacks that can occur with unfiltered input.</span></span> <span data-ttu-id="38e6c-631">È possibile usare parametri indipendenti dai tipi con stored procedure e con istruzioni SQL dinamiche.</span><span class="sxs-lookup"><span data-stu-id="38e6c-631">You can use type safe parameters with stored procedures and with dynamic SQL statements.</span></span> <span data-ttu-id="38e6c-632">I parametri vengono considerati come valori letterali dal database hello e non come codice eseguibile.</span><span class="sxs-lookup"><span data-stu-id="38e6c-632">Parameters are treated as literal values by hello database and not as executable code.</span></span> <span data-ttu-id="38e6c-633">Viene anche eseguito il controllo del tipo e della lunghezza dei parametri.</span><span class="sxs-lookup"><span data-stu-id="38e6c-633">Parameters are also checked for type and length.</span></span></p>|

### <a name="example"></a><span data-ttu-id="38e6c-634">Esempio</span><span class="sxs-lookup"><span data-stu-id="38e6c-634">Example</span></span>
<span data-ttu-id="38e6c-635">Hello codice seguente viene illustrato come toouse parametri di tipo sicuro con hello SqlParameterCollection quando si chiama una stored procedure.</span><span class="sxs-lookup"><span data-stu-id="38e6c-635">hello following code shows how toouse type safe parameters with hello SqlParameterCollection when calling a stored procedure.</span></span> 

```C#
using System.Data;
using System.Data.SqlClient;

using (SqlConnection connection = new SqlConnection(connectionString))
{ 
DataSet userDataset = new DataSet(); 
SqlDataAdapter myCommand = new SqlDataAdapter(LoginStoredProcedure", connection); 
myCommand.SelectCommand.CommandType = CommandType.StoredProcedure; 
myCommand.SelectCommand.Parameters.Add("@au_id", SqlDbType.VarChar, 11); 
myCommand.SelectCommand.Parameters["@au_id"].Value = SSN.Text; 
myCommand.Fill(userDataset);
}  
```
<span data-ttu-id="38e6c-636">Nel precedente esempio di codice di hello, hello input non può essere più lungo di 11 caratteri.</span><span class="sxs-lookup"><span data-stu-id="38e6c-636">In hello preceding code example, hello input value cannot be longer than 11 characters.</span></span> <span data-ttu-id="38e6c-637">Se i dati di hello non è conforme toohello tipo o la lunghezza definita dal parametro hello, hello classe SqlParameter genera un'eccezione.</span><span class="sxs-lookup"><span data-stu-id="38e6c-637">If hello data does not conform toohello type or length defined by hello parameter, hello SqlParameter class throws an exception.</span></span> 

## <span data-ttu-id="38e6c-638"><a id="sql-docdb"></a>Usare query SQL con parametri per Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="38e6c-638"><a id="sql-docdb"></a>Use parametrized SQL queries for Cosmos DB</span></span>

| <span data-ttu-id="38e6c-639">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-639">Title</span></span>                   | <span data-ttu-id="38e6c-640">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-640">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-641">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-641">**Component**</span></span>               | <span data-ttu-id="38e6c-642">Azure DocumentDB</span><span class="sxs-lookup"><span data-stu-id="38e6c-642">Azure Document DB</span></span> | 
| <span data-ttu-id="38e6c-643">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-643">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-644">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-644">Build</span></span> |  
| <span data-ttu-id="38e6c-645">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-645">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-646">Generico</span><span class="sxs-lookup"><span data-stu-id="38e6c-646">Generic</span></span> |
| <span data-ttu-id="38e6c-647">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-647">**Attributes**</span></span>              | <span data-ttu-id="38e6c-648">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-648">N/A</span></span>  |
| <span data-ttu-id="38e6c-649">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-649">**References**</span></span>              | <span data-ttu-id="38e6c-650">[Announcing SQL Parameterization in DocumentDB](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/) (Annuncio della parametrizzazione SQL in DocumentDB)</span><span class="sxs-lookup"><span data-stu-id="38e6c-650">[Announcing SQL Parameterization in DocumentDB](https://azure.microsoft.com/blog/announcing-sql-parameterization-in-documentdb/)</span></span> |
| <span data-ttu-id="38e6c-651">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-651">**Steps**</span></span> | <span data-ttu-id="38e6c-652">Nonostante DocumentDB supporti solo query di sola lettura, se le query vengono costruite con la concatenazione con input utente sono comunque possibili attacchi SQL injection.</span><span class="sxs-lookup"><span data-stu-id="38e6c-652">Although DocumentDB only supports read-only queries, SQL injection is still possible if queries are constructed by concatenating with user input.</span></span> <span data-ttu-id="38e6c-653">Potrebbe essere possibile per un toodata di accesso utente toogain che non devono accedere all'interno di hello stessa raccolta creando una query SQL dannose.</span><span class="sxs-lookup"><span data-stu-id="38e6c-653">It might be possible for a user toogain access toodata they shouldn’t be accessing within hello same collection by crafting malicious SQL queries.</span></span> <span data-ttu-id="38e6c-654">Se le query vengono costruite in base all'input utente, usare query SQL con parametri.</span><span class="sxs-lookup"><span data-stu-id="38e6c-654">Use parameterized SQL queries if queries are constructed based on user input.</span></span> |

## <span data-ttu-id="38e6c-655"><a id="schema-binding"></a>WCF: convalida dell'input tramite l'associazione allo schema</span><span class="sxs-lookup"><span data-stu-id="38e6c-655"><a id="schema-binding"></a>WCF Input validation through Schema binding</span></span>

| <span data-ttu-id="38e6c-656">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-656">Title</span></span>                   | <span data-ttu-id="38e6c-657">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-657">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-658">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-658">**Component**</span></span>               | <span data-ttu-id="38e6c-659">WCF</span><span class="sxs-lookup"><span data-stu-id="38e6c-659">WCF</span></span> | 
| <span data-ttu-id="38e6c-660">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-660">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-661">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-661">Build</span></span> |  
| <span data-ttu-id="38e6c-662">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-662">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-663">Generico, .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="38e6c-663">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="38e6c-664">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-664">**Attributes**</span></span>              | <span data-ttu-id="38e6c-665">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-665">N/A</span></span>  |
| <span data-ttu-id="38e6c-666">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-666">**References**</span></span>              | [<span data-ttu-id="38e6c-667">MSDN</span><span class="sxs-lookup"><span data-stu-id="38e6c-667">MSDN</span></span>](https://msdn.microsoft.com/library/ff647820.aspx) |
| <span data-ttu-id="38e6c-668">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-668">**Steps**</span></span> | <p><span data-ttu-id="38e6c-669">Mancanza di convalida di clienti potenziali attacchi intrusivi nel codice di tipo toodifferent.</span><span class="sxs-lookup"><span data-stu-id="38e6c-669">Lack of validation leads toodifferent type injection attacks.</span></span></p><p><span data-ttu-id="38e6c-670">Convalida del messaggio rappresenta una linea di difesa per la protezione dell'applicazione WCF hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-670">Message validation represents one line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="38e6c-671">Con questo approccio, si convalidano i messaggi mediante operazioni del servizio WCF tooprotect schemi da attacchi esterni da un client dannoso.</span><span class="sxs-lookup"><span data-stu-id="38e6c-671">With this approach, you validate messages using schemas tooprotect WCF service operations from attack by a malicious client.</span></span> <span data-ttu-id="38e6c-672">Convalidare tutti i messaggi ricevuti dal client di hello client tooprotect hello da attacchi esterni da un servizio dannoso.</span><span class="sxs-lookup"><span data-stu-id="38e6c-672">Validate all messages received by hello client tooprotect hello client from attack by a malicious service.</span></span> <span data-ttu-id="38e6c-673">Convalida del messaggio rende un toovalidate possibili messaggi quando operazioni utilizzano contratti di messaggio o contratti dati, che non possono essere eseguiti tramite la convalida dei parametri.</span><span class="sxs-lookup"><span data-stu-id="38e6c-673">Message validation makes it possible toovalidate messages when operations consume message contracts or data contracts, which cannot be done using parameter validation.</span></span> <span data-ttu-id="38e6c-674">Convalida del messaggio consente toocreate la logica di convalida all'interno di schemi, in tal modo fornendo più flessibilità e ridurre i tempi di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="38e6c-674">Message validation allows you toocreate validation logic inside schemas, thereby providing more flexibility and reducing development time.</span></span> <span data-ttu-id="38e6c-675">Gli schemi possono essere riutilizzati tra applicazioni diverse all'interno dell'organizzazione hello, creazione di standard per la rappresentazione di dati.</span><span class="sxs-lookup"><span data-stu-id="38e6c-675">Schemas can be reused across different applications inside hello organization, creating standards for data representation.</span></span> <span data-ttu-id="38e6c-676">Inoltre, convalida dei messaggi consente operazioni tooprotect quando utilizzano tipi di dati più complessi che coinvolgono contratti che rappresenta la logica di business.</span><span class="sxs-lookup"><span data-stu-id="38e6c-676">Additionally, message validation allows you tooprotect operations when they consume more complex data types involving contracts representing business logic.</span></span></p><p><span data-ttu-id="38e6c-677">convalida del messaggio tooperform, è innanzitutto necessario generare uno schema che rappresenta le operazioni di hello dei tipi di dati del servizio e hello utilizzati da tali operazioni.</span><span class="sxs-lookup"><span data-stu-id="38e6c-677">tooperform message validation, you first build a schema that represents hello operations of your service and hello data types consumed by those operations.</span></span> <span data-ttu-id="38e6c-678">È quindi possibile creare una classe .NET che implementa un controllo dei messaggi client personalizzate e dispatcher personalizzato messaggi controllo toovalidate hello messaggi inviati/ricevuti da e verso il servizio di hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-678">You then create a .NET class that implements a custom client message inspector and custom dispatcher message inspector toovalidate hello messages sent/received to/from hello service.</span></span> <span data-ttu-id="38e6c-679">Implementare una convalida del messaggio tooenable comportamento dell'endpoint personalizzato sul client hello e servizio hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-679">Next, you implement a custom endpoint behavior tooenable message validation on both hello client and hello service.</span></span> <span data-ttu-id="38e6c-680">Infine, si implementa un elemento di configurazione personalizzata su una classe hello consente tooexpose hello estesi comportamento dell'endpoint nel file di configurazione hello del client di hello o un servizio di hello"</span><span class="sxs-lookup"><span data-stu-id="38e6c-680">Finally, you implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client"</span></span></p>|

## <span data-ttu-id="38e6c-681"><a id="parameters"></a>WCF: convalida dell'input tramite controlli parametro</span><span class="sxs-lookup"><span data-stu-id="38e6c-681"><a id="parameters"></a>WCF- Input validation through Parameter Inspectors</span></span>

| <span data-ttu-id="38e6c-682">Titolo</span><span class="sxs-lookup"><span data-stu-id="38e6c-682">Title</span></span>                   | <span data-ttu-id="38e6c-683">Dettagli</span><span class="sxs-lookup"><span data-stu-id="38e6c-683">Details</span></span>      |
| ----------------------- | ------------ |
| <span data-ttu-id="38e6c-684">**Componente**</span><span class="sxs-lookup"><span data-stu-id="38e6c-684">**Component**</span></span>               | <span data-ttu-id="38e6c-685">WCF</span><span class="sxs-lookup"><span data-stu-id="38e6c-685">WCF</span></span> | 
| <span data-ttu-id="38e6c-686">**Fase SDL**</span><span class="sxs-lookup"><span data-stu-id="38e6c-686">**SDL Phase**</span></span>               | <span data-ttu-id="38e6c-687">Compilare</span><span class="sxs-lookup"><span data-stu-id="38e6c-687">Build</span></span> |  
| <span data-ttu-id="38e6c-688">**Tecnologie applicabili**</span><span class="sxs-lookup"><span data-stu-id="38e6c-688">**Applicable Technologies**</span></span> | <span data-ttu-id="38e6c-689">Generico, .NET Framework 3</span><span class="sxs-lookup"><span data-stu-id="38e6c-689">Generic, NET Framework 3</span></span> |
| <span data-ttu-id="38e6c-690">**Attributes (Attributi) (Attributi)**</span><span class="sxs-lookup"><span data-stu-id="38e6c-690">**Attributes**</span></span>              | <span data-ttu-id="38e6c-691">N/D</span><span class="sxs-lookup"><span data-stu-id="38e6c-691">N/A</span></span>  |
| <span data-ttu-id="38e6c-692">**Riferimenti**</span><span class="sxs-lookup"><span data-stu-id="38e6c-692">**References**</span></span>              | [<span data-ttu-id="38e6c-693">MSDN</span><span class="sxs-lookup"><span data-stu-id="38e6c-693">MSDN</span></span>](https://msdn.microsoft.com/library/ff647875.aspx) |
| <span data-ttu-id="38e6c-694">**Passaggi**</span><span class="sxs-lookup"><span data-stu-id="38e6c-694">**Steps**</span></span> | <p><span data-ttu-id="38e6c-695">Convalida di input e i dati rappresenta un importante difesa nella protezione hello dell'applicazione WCF.</span><span class="sxs-lookup"><span data-stu-id="38e6c-695">Input and data validation represents one important line of defense in hello protection of your WCF application.</span></span> <span data-ttu-id="38e6c-696">È necessario convalidare tutti i parametri esposti in WCF operazioni tooprotect hello del servizio da attacchi esterni da un client dannoso.</span><span class="sxs-lookup"><span data-stu-id="38e6c-696">You should validate all parameters exposed in WCF service operations tooprotect hello service from attack by a malicious client.</span></span> <span data-ttu-id="38e6c-697">Al contrario, è anche necessario convalidare tutti i valori restituiti ricevuti dal client di hello client tooprotect hello da attacchi esterni da un servizio dannoso</span><span class="sxs-lookup"><span data-stu-id="38e6c-697">Conversely, you should also validate all return values received by hello client tooprotect hello client from attack by a malicious service</span></span></p><p><span data-ttu-id="38e6c-698">WCF fornisce punti di estendibilità diversi che consentono di comportamento di runtime WCF hello toocustomize mediante la creazione di estensioni personalizzate.</span><span class="sxs-lookup"><span data-stu-id="38e6c-698">WCF provides different extensibility points that allow you toocustomize hello WCF runtime behavior by creating custom extensions.</span></span> <span data-ttu-id="38e6c-699">Messaggio di controllo e i controlli del parametro sono due meccanismi di estensibilità utilizzato toogain maggiore controllo sui dati hello passando tra un client e un servizio.</span><span class="sxs-lookup"><span data-stu-id="38e6c-699">Message Inspectors and Parameter Inspectors are two extensibility mechanisms used toogain greater control over hello data passing between a client and a service.</span></span> <span data-ttu-id="38e6c-700">È necessario utilizzare i controlli del parametro per la convalida dell'input e utilizzare i controlli messaggi solo quando è necessario l'intero messaggio hello tooinspect trasferimento da e verso un servizio.</span><span class="sxs-lookup"><span data-stu-id="38e6c-700">You should use parameter inspectors for input validation and use message inspectors only when you need tooinspect hello entire message flowing in and out of a service.</span></span></p><p><span data-ttu-id="38e6c-701">convalida dell'input tooperform, generare una classe .NET che implementa un controllo del parametro personalizzato in parametri toovalidate ordine sulle operazioni nel servizio.</span><span class="sxs-lookup"><span data-stu-id="38e6c-701">tooperform input validation, you will build a .NET class and implement a custom parameter inspector in order toovalidate parameters on operations in your service.</span></span> <span data-ttu-id="38e6c-702">Quindi implementare una convalida tooenable comportamento di endpoint personalizzato nel client hello e servizio hello.</span><span class="sxs-lookup"><span data-stu-id="38e6c-702">You will then implement a custom endpoint behavior tooenable validation on both hello client and hello service.</span></span> <span data-ttu-id="38e6c-703">Infine, un elemento di configurazione personalizzato verrà implementata nella classe hello che consente di tooexpose hello estesi comportamento dell'endpoint nel file di configurazione hello del client di hello o un servizio di hello</span><span class="sxs-lookup"><span data-stu-id="38e6c-703">Finally, you will implement a custom configuration element on hello class that allows you tooexpose hello extended custom endpoint behavior in hello configuration file of hello service or hello client</span></span></p>|
