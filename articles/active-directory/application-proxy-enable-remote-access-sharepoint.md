---
title: aaaEnable tooSharePoint di accesso remoto con Proxy dell'applicazione Azure AD | Documenti Microsoft
description: Sono illustrate hello nozioni fondamentali sul toointegrate un server SharePoint locale con Proxy dell'applicazione AD Azure.
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 6ab413462fcaf387e150449df9c97505c4108bcf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="enable-remote-access-toosharepoint-with-azure-ad-application-proxy"></a><span data-ttu-id="d96e7-103">Abilitare accesso remoto tooSharePoint con Proxy dell'applicazione Azure AD</span><span class="sxs-lookup"><span data-stu-id="d96e7-103">Enable remote access tooSharePoint with Azure AD Application Proxy</span></span>

<span data-ttu-id="d96e7-104">Questo articolo illustra come toointegrate un server SharePoint locale con Proxy dell'applicazione Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="d96e7-104">This article discusses how toointegrate an on-premises SharePoint server with Azure Active Directory (Azure AD) Application Proxy.</span></span>

<span data-ttu-id="d96e7-105">tooenable tooSharePoint di accesso remoto con Proxy dell'applicazione AD Azure, attenersi alle sezioni di hello in questo articolo passo passo.</span><span class="sxs-lookup"><span data-stu-id="d96e7-105">tooenable remote access tooSharePoint with Azure AD Application Proxy, follow hello sections in this article step by step.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="d96e7-106">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="d96e7-106">Prerequisites</span></span>

<span data-ttu-id="d96e7-107">Questo articolo presuppone che SharePoint 2013 o versione successiva sia già installato nell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="d96e7-107">This article assumes that you already have SharePoint 2013 or newer in your environment.</span></span> <span data-ttu-id="d96e7-108">Inoltre, prendere in considerazione hello seguenti prerequisiti:</span><span class="sxs-lookup"><span data-stu-id="d96e7-108">In addition, consider hello following prerequisites:</span></span>

* <span data-ttu-id="d96e7-109">SharePoint include il supporto nativo di Kerberos.</span><span class="sxs-lookup"><span data-stu-id="d96e7-109">SharePoint includes native Kerberos support.</span></span> <span data-ttu-id="d96e7-110">Di conseguenza, gli utenti che accedono ai siti interni in remoto mediante il Proxy di applicazione Azure AD possono presupporre toohave esperienza single sign-on (SSO).</span><span class="sxs-lookup"><span data-stu-id="d96e7-110">Therefore, users who are accessing internal sites remotely through Azure AD Application Proxy can assume toohave a single sign-on (SSO) experience.</span></span>

* <span data-ttu-id="d96e7-111">È necessario toomake alcuni server di SharePoint tooyour di modifiche configurazione.</span><span class="sxs-lookup"><span data-stu-id="d96e7-111">You need toomake a few configuration changes tooyour SharePoint server.</span></span> <span data-ttu-id="d96e7-112">Si consiglia di usare un ambiente di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="d96e7-112">We recommend using a staging environment.</span></span> <span data-ttu-id="d96e7-113">In questo modo, è possibile apportare aggiornamenti tooyour gestione temporanea prima di server e quindi facilitare un ciclo di test prima di passare alla produzione.</span><span class="sxs-lookup"><span data-stu-id="d96e7-113">This way, you can make updates tooyour staging server first, and then facilitate a testing cycle before going into production.</span></span>

* <span data-ttu-id="d96e7-114">Si presuppone che siano già impostati SSL per SharePoint, in quanto è necessario che SSL in hello pubblicati URL.</span><span class="sxs-lookup"><span data-stu-id="d96e7-114">We assume that you have already set up SSL for SharePoint, because we require SSL on hello published URL.</span></span> <span data-ttu-id="d96e7-115">È necessario toohave che SSL abilitato nel sito interno, tooensure collegamenti inviati/mappati correttamente.</span><span class="sxs-lookup"><span data-stu-id="d96e7-115">You need toohave SSL enabled on your internal site, tooensure that links are sent/mapped correctly.</span></span> <span data-ttu-id="d96e7-116">Se SSL non è ancora stato configurato, vedere [Configure SSL for SharePoint 2013](https://blogs.msdn.microsoft.com/fabdulwahab/2013/01/20/configure-ssl-for-sharepoint-2013) (Configurare SSL per SharePoint 2013) per le necessarie istruzioni.</span><span class="sxs-lookup"><span data-stu-id="d96e7-116">If you haven't configured SSL, see [Configure SSL for SharePoint 2013](https://blogs.msdn.microsoft.com/fabdulwahab/2013/01/20/configure-ssl-for-sharepoint-2013) for instructions.</span></span> <span data-ttu-id="d96e7-117">Assicurarsi inoltre che tale hello connettore trust hello certificato del computer che si esegue.</span><span class="sxs-lookup"><span data-stu-id="d96e7-117">Also, make sure that hello connector machine trusts hello certificate that you issue.</span></span> <span data-ttu-id="d96e7-118">(certificato hello non è necessario toobe rilasciato pubblicamente.)</span><span class="sxs-lookup"><span data-stu-id="d96e7-118">(hello certificate does not need toobe publicly issued.)</span></span>

## <a name="step-1-set-up-single-sign-on-toosharepoint"></a><span data-ttu-id="d96e7-119">Passaggio 1: Configurazione di single sign-on tooSharePoint</span><span class="sxs-lookup"><span data-stu-id="d96e7-119">Step 1: Set up single sign-on tooSharePoint</span></span>

<span data-ttu-id="d96e7-120">I clienti vogliono hello SSO migliore esperienza per le applicazioni back-end, server di SharePoint, in questo caso.</span><span class="sxs-lookup"><span data-stu-id="d96e7-120">Our customers want hello best SSO experience for their back-end applications, SharePoint server in this case.</span></span> <span data-ttu-id="d96e7-121">In questo scenario comune di Azure AD, hello viene autenticato in una sola volta, perché verrà non richiesto per l'autenticazione nuovamente.</span><span class="sxs-lookup"><span data-stu-id="d96e7-121">In this common Azure AD scenario, hello user is authenticated only once, because they will not be prompted for authentication again.</span></span>

<span data-ttu-id="d96e7-122">Per le applicazioni locali che richiedono né utilizzano l'autenticazione di Windows, è possibile ottenere SSO utilizzando il protocollo di autenticazione Kerberos hello e una funzionalità denominata la delega vincolata Kerberos (KCD).</span><span class="sxs-lookup"><span data-stu-id="d96e7-122">For on-premises applications that require or use Windows authentication, you can achieve SSO by using hello Kerberos authentication protocol and a feature called Kerberos constrained delegation (KCD).</span></span> <span data-ttu-id="d96e7-123">La delega vincolata Kerberos, quando è configurato, consente a un windows tooobtain connettore Proxy dell'applicazione di hello ticket o un token per un utente, anche se hello utente non ha eseguito l'accesso tooWindows direttamente.</span><span class="sxs-lookup"><span data-stu-id="d96e7-123">KCD, when configured, allows hello Application Proxy connector tooobtain a windows ticket/token for a user, even if hello user hasn’t signed in tooWindows directly.</span></span> <span data-ttu-id="d96e7-124">toolearn ulteriori informazioni sulla delega vincolata Kerberos, vedere [Panoramica della delega vincolata Kerberos](https://technet.microsoft.com/library/jj553400.aspx).</span><span class="sxs-lookup"><span data-stu-id="d96e7-124">toolearn more about KCD, see [Kerberos Constrained Delegation Overview](https://technet.microsoft.com/library/jj553400.aspx).</span></span>

<span data-ttu-id="d96e7-125">tooset di delega vincolata Kerberos per un server SharePoint, utilizzare procedure hello hello sequenziale sezioni che seguono:</span><span class="sxs-lookup"><span data-stu-id="d96e7-125">tooset up KCD for a SharePoint server, use hello procedures in hello following sequential sections:</span></span>

### <a name="ensure-that-sharepoint-is-running-under-a-service-account"></a><span data-ttu-id="d96e7-126">Verificare che SharePoint sia in esecuzione in un account di servizio</span><span class="sxs-lookup"><span data-stu-id="d96e7-126">Ensure that SharePoint is running under a service account</span></span>

<span data-ttu-id="d96e7-127">Verificare che SharePoint sia in esecuzione in un account di servizio definito, non in un sistema locale, un servizio locale o un servizio di rete.</span><span class="sxs-lookup"><span data-stu-id="d96e7-127">First, make sure that SharePoint is running under a defined service account--not local system, local service, or network service.</span></span> <span data-ttu-id="d96e7-128">A tale scopo, in modo che è possibile collegare l'account del servizio (SPN) di nomi dell'entità tooa valido.</span><span class="sxs-lookup"><span data-stu-id="d96e7-128">Do this so that you can attach service principal names (SPNs) tooa valid account.</span></span> <span data-ttu-id="d96e7-129">I nomi SPN sono il modo in cui il protocollo Kerberos hello identifica diversi servizi.</span><span class="sxs-lookup"><span data-stu-id="d96e7-129">SPNs are how hello Kerberos protocol identifies different services.</span></span> <span data-ttu-id="d96e7-130">E si sarà necessario hello account successive tooconfigure hello la delega vincolata Kerberos.</span><span class="sxs-lookup"><span data-stu-id="d96e7-130">And you will need hello account later tooconfigure hello KCD.</span></span>

<span data-ttu-id="d96e7-131">tooensure i siti in esecuzione in un account di servizio definito, eseguire hello alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="d96e7-131">tooensure that your sites are running under a defined service account, perform hello following steps:</span></span>

1. <span data-ttu-id="d96e7-132">Aprire hello **Amministrazione centrale SharePoint 2013** sito.</span><span class="sxs-lookup"><span data-stu-id="d96e7-132">Open hello **SharePoint 2013 Central Administration** site.</span></span>
2. <span data-ttu-id="d96e7-133">Andare troppo**sicurezza** e selezionare **Configura account di servizio**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-133">Go too**Security** and select **Configure service accounts**.</span></span>
3. <span data-ttu-id="d96e7-134">Selezionare **Pool di applicazioni Web - SharePoint - 80**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-134">Select **Web Application Pool - SharePoint - 80**.</span></span> <span data-ttu-id="d96e7-135">opzioni di Hello potrebbero essere leggermente diverse in base al nome del pool di web hello o se hello pool web utilizza SSL per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="d96e7-135">hello options may be slightly different based on hello name of your web pool, or if hello web pool uses SSL by default.</span></span>

  ![Opzioni per la configurazione di un account di servizio](./media/application-proxy-remote-sharepoint/remote-sharepoint-service-web-application.png)

4. <span data-ttu-id="d96e7-137">Se **selezionare un account per questo componente** è **servizio locale** o **servizio di rete**, è necessario un account toocreate.</span><span class="sxs-lookup"><span data-stu-id="d96e7-137">If **Select an account for this component** is **Local Service** or **Network Service**, you need toocreate an account.</span></span> <span data-ttu-id="d96e7-138">In caso contrario, è terminato e spostare toohello nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="d96e7-138">If not, you're finished and can move toohello next section.</span></span>
5. <span data-ttu-id="d96e7-139">Selezionare **Registra nuovo account gestito**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-139">Select **Register new managed account**.</span></span> <span data-ttu-id="d96e7-140">Dopo aver creato l'account, è necessario impostare **Pool di applicazioni Web** prima di poter usare account hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-140">After your account is created, you must set **Web Application Pool** before you can use hello account.</span></span>

> [!NOTE]
<span data-ttu-id="d96e7-141">È necessario toohave a precedentemente creato l'account di Azure AD per il servizio di hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-141">You need toohave a previously created Azure AD account for hello service.</span></span> <span data-ttu-id="d96e7-142">Si consiglia di consentire la modifica automatica della password.</span><span class="sxs-lookup"><span data-stu-id="d96e7-142">We suggest that you allow for an automatic password change.</span></span> <span data-ttu-id="d96e7-143">Per ulteriori informazioni sul set completo di hello di passaggi e risoluzione dei problemi, vedere [configurare modifica automatica della password in SharePoint 2013](https://technet.microsoft.com/library/ff724280.aspx).</span><span class="sxs-lookup"><span data-stu-id="d96e7-143">For more information about hello full set of steps and troubleshooting issues, see [Configure automatic password change in SharePoint 2013](https://technet.microsoft.com/library/ff724280.aspx).</span></span>

### <a name="configure-sharepoint-for-kerberos"></a><span data-ttu-id="d96e7-144">Configurare SharePoint per Kerberos</span><span class="sxs-lookup"><span data-stu-id="d96e7-144">Configure SharePoint for Kerberos</span></span>

<span data-ttu-id="d96e7-145">Si utilizza la delega vincolata Kerberos tooperform single sign-on toohello server SharePoint e questa procedura funziona solo con Kerberos.</span><span class="sxs-lookup"><span data-stu-id="d96e7-145">You use KCD tooperform single sign-on toohello SharePoint server, and this works only with Kerberos.</span></span>

<span data-ttu-id="d96e7-146">tooconfigure del sito di SharePoint per l'autenticazione Kerberos:</span><span class="sxs-lookup"><span data-stu-id="d96e7-146">tooconfigure your SharePoint site for Kerberos authentication:</span></span>

1. <span data-ttu-id="d96e7-147">Aprire hello **Amministrazione centrale SharePoint 2013** sito.</span><span class="sxs-lookup"><span data-stu-id="d96e7-147">Open hello **SharePoint 2013 Central Administration** site.</span></span>
2. <span data-ttu-id="d96e7-148">Andare troppo**Application Management**selezionare **Gestisci applicazioni web**e selezionare il sito di SharePoint.</span><span class="sxs-lookup"><span data-stu-id="d96e7-148">Go too**Application Management**, select **Manage web applications**, and select your SharePoint site.</span></span> <span data-ttu-id="d96e7-149">In questo esempio si tratta di **SharePoint - 80**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-149">In this example, it is **SharePoint - 80**.</span></span>

  ![Selezione di un sito di SharePoint hello](./media/application-proxy-remote-sharepoint/remote-sharepoint-manage-web-applications.png)

3. <span data-ttu-id="d96e7-151">Fare clic su **provider di autenticazione** sulla barra degli strumenti hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-151">Click **Authentication Providers** on hello toolbar.</span></span>
4. <span data-ttu-id="d96e7-152">In hello **provider di autenticazione** fare clic su **area predefinita** impostazioni hello tooview.</span><span class="sxs-lookup"><span data-stu-id="d96e7-152">In hello **Authentication Providers** box, click **Default Zone** tooview hello settings.</span></span>
5. <span data-ttu-id="d96e7-153">In hello **Modifica autenticazione** finestra di dialogo casella, scorrere verso il basso fino a visualizzare **tipi di autenticazione delle attestazioni** e assicurarsi che entrambi **abilitare l'autenticazione di Windows** e  **Autenticazione integrata di Windows** sono selezionati.</span><span class="sxs-lookup"><span data-stu-id="d96e7-153">In hello **Edit Authentication** dialog box, scroll down until you see **Claims Authentication Types** and ensure that both **Enable Windows Authentication** and **Integrated Windows Authentication** are selected.</span></span>
6. <span data-ttu-id="d96e7-154">Nella casella di riepilogo a discesa hello, accertarsi che **negoziazione (Kerberos)** è selezionata.</span><span class="sxs-lookup"><span data-stu-id="d96e7-154">In hello drop-down box, make sure that **Negotiate (Kerberos)** is selected.</span></span>

  ![Finestra di dialogo Modifica autenticazione](./media/application-proxy-remote-sharepoint/remote-sharepoint-service-edit-authentication.png)

7. <span data-ttu-id="d96e7-156">Nella parte inferiore di hello di hello **Modifica autenticazione** la finestra di dialogo, fare clic su **salvare**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-156">At hello bottom of hello **Edit Authentication** dialog box, click **Save**.</span></span>

### <a name="set-a-service-principal-name-for-hello-sharepoint-service-account"></a><span data-ttu-id="d96e7-157">Impostare un nome dell'entità servizio per l'account del servizio SharePoint hello</span><span class="sxs-lookup"><span data-stu-id="d96e7-157">Set a service principal name for hello SharePoint service account</span></span>

<span data-ttu-id="d96e7-158">Prima di configurare la delega vincolata Kerberos hello, è necessario tooidentify servizio SharePoint di hello in esecuzione come account del servizio hello che è stato configurato.</span><span class="sxs-lookup"><span data-stu-id="d96e7-158">Before you configure hello KCD, you need tooidentify hello SharePoint service running as hello service account that you've configured.</span></span> <span data-ttu-id="d96e7-159">A questo scopo è necessario impostare un nome di entità servizio (SPN).</span><span class="sxs-lookup"><span data-stu-id="d96e7-159">You do this by setting an SPN.</span></span> <span data-ttu-id="d96e7-160">Per altre informazioni vedere [Service Principal Names](https://technet.microsoft.com/library/cc961723.aspx) (Nomi di entità servizio).</span><span class="sxs-lookup"><span data-stu-id="d96e7-160">For more information, see [Service Principal Names](https://technet.microsoft.com/library/cc961723.aspx).</span></span>

<span data-ttu-id="d96e7-161">formato del nome SPN Hello è:</span><span class="sxs-lookup"><span data-stu-id="d96e7-161">hello SPN format is:</span></span>

```
<service class>/<host>:<port>
```

<span data-ttu-id="d96e7-162">Nel formato del nome SPN hello:</span><span class="sxs-lookup"><span data-stu-id="d96e7-162">In hello SPN format:</span></span>

* <span data-ttu-id="d96e7-163">_classe del servizio_ è un nome univoco per il servizio di hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-163">_service class_ is a unique name for hello service.</span></span> <span data-ttu-id="d96e7-164">Per SharePoint si usa **HTTP**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-164">For SharePoint, you use **HTTP**.</span></span>

* <span data-ttu-id="d96e7-165">_host_ hello di dominio completo o nome NetBIOS dell'host hello che hello servizio è in esecuzione in.</span><span class="sxs-lookup"><span data-stu-id="d96e7-165">_host_ is hello fully qualified domain or NetBIOS name of hello host that hello service is running on.</span></span> <span data-ttu-id="d96e7-166">Per un sito di SharePoint, questo testo può essere necessario toobe hello URL del sito di hello, a seconda della versione di hello di IIS che si sta utilizzando.</span><span class="sxs-lookup"><span data-stu-id="d96e7-166">For a SharePoint site, this text might need toobe hello URL of hello site, depending on hello version of IIS that you're using.</span></span>

* <span data-ttu-id="d96e7-167">La _porta_ è opzionale.</span><span class="sxs-lookup"><span data-stu-id="d96e7-167">_port_ is optional.</span></span>

<span data-ttu-id="d96e7-168">Se il FQDN del server SharePoint hello hello è:</span><span class="sxs-lookup"><span data-stu-id="d96e7-168">If hello FQDN of hello SharePoint server is:</span></span>

```
sharepoint.demo.o365identity.us
```

<span data-ttu-id="d96e7-169">Quindi hello SPN è:</span><span class="sxs-lookup"><span data-stu-id="d96e7-169">Then hello SPN is:</span></span>

```
HTTP/ sharepoint.demo.o365identity.us demo
```

<span data-ttu-id="d96e7-170">I nomi SPN tooset potrebbe anche essere necessario per specifici siti Web nel server.</span><span class="sxs-lookup"><span data-stu-id="d96e7-170">You might also need tooset SPNs for specific sites on your server.</span></span> <span data-ttu-id="d96e7-171">Per altre informazioni, vedere [Configurare l'autenticazione Kerberos](https://technet.microsoft.com/library/cc263449(v=office.12).aspx).</span><span class="sxs-lookup"><span data-stu-id="d96e7-171">For more information, see [Configure Kerberos authentication](https://technet.microsoft.com/library/cc263449(v=office.12).aspx).</span></span> <span data-ttu-id="d96e7-172">Prestare particolare attenzione toohello sezione "Creare nomi dell'entità servizio per le applicazioni Web tramite l'autenticazione Kerberos".</span><span class="sxs-lookup"><span data-stu-id="d96e7-172">Pay close attention toohello section "Create Service Principal Names for your Web applications using Kerberos authentication."</span></span>

<span data-ttu-id="d96e7-173">Hello il modo più semplice per è tooset i nomi SPN è formati del nome SPN hello toofollow che potrebbero essere già presenti per i siti.</span><span class="sxs-lookup"><span data-stu-id="d96e7-173">hello easiest way for you tooset SPNs is toofollow hello SPN formats that may already be present for your sites.</span></span> <span data-ttu-id="d96e7-174">Copiare tali tooregister SPN nell'account di servizio hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-174">Copy those SPNs tooregister against hello service account.</span></span> <span data-ttu-id="d96e7-175">toodo questo:</span><span class="sxs-lookup"><span data-stu-id="d96e7-175">toodo this:</span></span>

1. <span data-ttu-id="d96e7-176">Visitare il sito di toohello con hello SPN da un altro computer.</span><span class="sxs-lookup"><span data-stu-id="d96e7-176">Browse toohello site with hello SPN from another machine.</span></span>
 <span data-ttu-id="d96e7-177">Quando, hello rilevanti dei ticket Kerberos è memorizzato nel computer di hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-177">When you do, hello relevant set of Kerberos tickets is cached on hello machine.</span></span> <span data-ttu-id="d96e7-178">Questi ticket contengono hello SPN del sito di destinazione hello che è stato selezionato.</span><span class="sxs-lookup"><span data-stu-id="d96e7-178">These tickets contain hello SPN of hello target site that you browsed to.</span></span>

2. <span data-ttu-id="d96e7-179">È possibile effettuare il pull hello SPN per il sito utilizzando uno strumento denominato [Klist](http://web.mit.edu/kerberos/krb5-devel/doc/user/user_commands/klist.html).</span><span class="sxs-lookup"><span data-stu-id="d96e7-179">You can pull hello SPN for that site by using a tool called [Klist](http://web.mit.edu/kerberos/krb5-devel/doc/user/user_commands/klist.html).</span></span> <span data-ttu-id="d96e7-180">In una finestra di comando che è in esecuzione in hello stesso contesto utente hello che eseguono il sito a cui si accede hello nel browser hello, hello il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="d96e7-180">In a command window that's running in hello same context as hello user who accessed hello site in hello browser, run hello following command:</span></span>
```
Klist
```
<span data-ttu-id="d96e7-181">Klist restituisce quindi il set di hello di nomi SPN di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d96e7-181">Klist then returns hello set of target SPNs.</span></span> <span data-ttu-id="d96e7-182">In questo esempio, il valore di hello evidenziato è hello SPN che è necessario:</span><span class="sxs-lookup"><span data-stu-id="d96e7-182">In this example, hello highlighted value is hello SPN that's needed:</span></span>

  ![Risultati Klist di esempio](./media/application-proxy-remote-sharepoint/remote-sharepoint-target-service.png)

4. <span data-ttu-id="d96e7-184">Dopo aver creato hello SPN, è necessario assicurarsi che sia configurata correttamente nell'account di servizio hello impostati per un'applicazione web hello in precedenza toomake.</span><span class="sxs-lookup"><span data-stu-id="d96e7-184">Now that you have hello SPN, you need toomake sure that it's configured correctly on hello service account that you set up for hello web application earlier.</span></span> <span data-ttu-id="d96e7-185">Eseguire hello comando seguente dal prompt dei comandi di hello come un amministratore del dominio hello:</span><span class="sxs-lookup"><span data-stu-id="d96e7-185">Run hello following command from hello command prompt as an administrator of hello domain:</span></span>

 ```
 setspn -S http/sharepoint.demo.o365identity.us demo\sp_svc
 ```

 <span data-ttu-id="d96e7-186">Questo comando imposta hello SPN per il servizio SharePoint hello account in esecuzione come _demo\sp_svc_.</span><span class="sxs-lookup"><span data-stu-id="d96e7-186">This command sets hello SPN for hello SharePoint service account running as _demo\sp_svc_.</span></span>

 <span data-ttu-id="d96e7-187">Sostituire _http/sharepoint.demo.o365identity.us_ con hello SPN per il server e _demo\sp_svc_ con account del servizio hello nell'ambiente in uso.</span><span class="sxs-lookup"><span data-stu-id="d96e7-187">Replace _http/sharepoint.demo.o365identity.us_ with hello SPN for your server and _demo\sp_svc_ with hello service account in your environment.</span></span> <span data-ttu-id="d96e7-188">comando di Setspn Hello Cerca hello SPN prima viene aggiunto.</span><span class="sxs-lookup"><span data-stu-id="d96e7-188">hello Setspn command searches for hello SPN before it adds it.</span></span> <span data-ttu-id="d96e7-189">In questo caso è possibile che venga restituito un errore di **valore SPN duplicato**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-189">In this case, you might see a **Duplicate SPN Value** error.</span></span> <span data-ttu-id="d96e7-190">Se viene visualizzato questo errore, assicurarsi che il valore di hello è associato l'account del servizio hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-190">If you see this error, make sure that hello value is associated with hello service account.</span></span>

<span data-ttu-id="d96e7-191">È possibile verificare tale hello che SPN è stato aggiunto tramite il comando di Setspn hello con l'opzione -l hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-191">You can verify that hello SPN was added by running hello Setspn command with hello -l option.</span></span> <span data-ttu-id="d96e7-192">toolearn informazioni su questo comando, vedere [Setspn](https://technet.microsoft.com/library/cc731241.aspx).</span><span class="sxs-lookup"><span data-stu-id="d96e7-192">toolearn more about this command, see [Setspn](https://technet.microsoft.com/library/cc731241.aspx).</span></span>

### <a name="ensure-that-hello-connector-is-set-as-a-trusted-delegate-toosharepoint"></a><span data-ttu-id="d96e7-193">Verificare che tale connettore hello è impostato come tooSharePoint un delegato attendibile</span><span class="sxs-lookup"><span data-stu-id="d96e7-193">Ensure that hello connector is set as a trusted delegate tooSharePoint</span></span>

<span data-ttu-id="d96e7-194">Configurare la delega vincolata Kerberos hello in modo che servizio Proxy di applicazione AD Azure hello può delegare servizio SharePoint di toohello identità utente.</span><span class="sxs-lookup"><span data-stu-id="d96e7-194">Configure hello KCD so that hello Azure AD Application Proxy service can delegate user identities toohello SharePoint service.</span></span> <span data-ttu-id="d96e7-195">Eseguita abilitando connettore Proxy dell'applicazione hello tooretrieve i ticket Kerberos per gli utenti autenticati in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d96e7-195">You do this by enabling hello Application Proxy connector tooretrieve Kerberos tickets for your users who have been authenticated in Azure AD.</span></span> <span data-ttu-id="d96e7-196">Quindi che il server passa in questo caso l'applicazione di destinazione hello contesto toohello o SharePoint.</span><span class="sxs-lookup"><span data-stu-id="d96e7-196">Then that server passes hello context toohello target application, or SharePoint in this case.</span></span>

<span data-ttu-id="d96e7-197">hello tooconfigure la delega vincolata Kerberos, ripetizione hello alla procedura seguente per ogni computer del connettore:</span><span class="sxs-lookup"><span data-stu-id="d96e7-197">tooconfigure hello KCD, repeat hello following steps for each connector machine:</span></span>

1. <span data-ttu-id="d96e7-198">Accedere come un tooa di amministratore di dominio controller di dominio e quindi aprire **Active Directory Users and Computers**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-198">Log in as a domain administrator tooa DC, and then open **Active Directory Users and Computers**.</span></span>
2. <span data-ttu-id="d96e7-199">Trovare hello che hello connettore del computer.</span><span class="sxs-lookup"><span data-stu-id="d96e7-199">Find hello computer that hello connector is running on.</span></span> <span data-ttu-id="d96e7-200">In questo esempio è hello stesso server SharePoint.</span><span class="sxs-lookup"><span data-stu-id="d96e7-200">In this example, it's hello same SharePoint server.</span></span>
3. <span data-ttu-id="d96e7-201">Fare doppio clic sul computer hello e quindi fare clic su hello **delega** scheda.</span><span class="sxs-lookup"><span data-stu-id="d96e7-201">Double-click hello computer, and then click hello **Delegation** tab.</span></span>
4. <span data-ttu-id="d96e7-202">Verificare che le impostazioni di delega hello siano impostate troppo**computer attendibile per la delega toohello specificato solo servizi**, quindi selezionare **utilizza un qualsiasi protocollo di autenticazione**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-202">Ensure that hello delegation settings are set too**Trust this computer for delegation toohello specified services only**, and then select **Use any authentication protocol**.</span></span>

  ![Impostazioni di delega](./media/application-proxy-remote-sharepoint/remote-sharepoint-delegation-box.png)

5. <span data-ttu-id="d96e7-204">Fare clic su hello **Aggiungi** fare clic su **utenti o computer**e individuare l'account del servizio hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-204">Click hello **Add** button, click **Users or Computers**, and locate hello service account.</span></span>

  ![Aggiunta di hello SPN per l'account del servizio hello](./media/application-proxy-remote-sharepoint/remote-sharepoint-users-computers.png)

6. <span data-ttu-id="d96e7-206">Nell'elenco di nomi SPN hello selezionare hello uno creato in precedenza per l'account del servizio hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-206">In hello list of SPNs, select hello one that you created earlier for hello service account.</span></span>
7. <span data-ttu-id="d96e7-207">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-207">Click **OK**.</span></span> <span data-ttu-id="d96e7-208">Fare clic su **OK** nuovamente le modifiche di hello toosave.</span><span class="sxs-lookup"><span data-stu-id="d96e7-208">Click **OK** again toosave hello changes.</span></span>

## <a name="step-2-enable-remote-access-toosharepoint"></a><span data-ttu-id="d96e7-209">Passaggio 2: Abilitare l'accesso remoto tooSharePoint</span><span class="sxs-lookup"><span data-stu-id="d96e7-209">Step 2: Enable remote access tooSharePoint</span></span>

<span data-ttu-id="d96e7-210">Dopo aver abilitato SharePoint per Kerberos e configurare la delega vincolata Kerberos, si è pronti tooset backup tooSharePoint servizio single sign-on.</span><span class="sxs-lookup"><span data-stu-id="d96e7-210">Now that you’ve enabled SharePoint for Kerberos and configured KCD, you're ready tooset up single sign-on tooSharePoint.</span></span> <span data-ttu-id="d96e7-211">Quindi dal connettore hello, è possibile pubblicare la farm di SharePoint hello per l'accesso remoto mediante il Proxy di applicazione AD Azure.</span><span class="sxs-lookup"><span data-stu-id="d96e7-211">Then from hello connector, you can publish hello SharePoint farm for remote access through Azure AD Application Proxy.</span></span>

<span data-ttu-id="d96e7-212">hello tooperform seguendo la procedura, è necessario toobe un membro del ruolo amministratore globale di hello nell'account Azure Active Directory dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="d96e7-212">tooperform hello following steps, you need toobe a member of hello Global Administrator Role in your organization's Azure Active Directory account.</span></span>

1. <span data-ttu-id="d96e7-213">Accedi toohello [portale di Azure](https://manage.windowsazure.com) e trovare il tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d96e7-213">Sign in toohello [Azure portal](https://manage.windowsazure.com) and find your Azure AD tenant.</span></span>
2. <span data-ttu-id="d96e7-214">Fare clic su **Applicazioni** e quindi su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-214">Click **Applications**, and then click **Add**.</span></span>
3. <span data-ttu-id="d96e7-215">Selezionare **Pubblica un'applicazione che sarà accessibile dall'esterno della rete**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-215">Select **Publish an application that will be accessible from outside your network**.</span></span> <span data-ttu-id="d96e7-216">Se questa opzione non è visualizzata, verificare che sia Azure AD Basic o Premium impostare nel tenant di hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-216">If you don’t see this option, make sure that you have Azure AD Basic or Premium set up in hello tenant.</span></span>
4. <span data-ttu-id="d96e7-217">Completare ciascuna delle opzioni di hello come segue:</span><span class="sxs-lookup"><span data-stu-id="d96e7-217">Complete each of hello options as follows:</span></span>
 * <span data-ttu-id="d96e7-218">**Nome**: qualsiasi valore desiderato, ad esempio **SharePoint**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-218">**Name**: Use any value that you want--for example, **SharePoint**.</span></span>
 * <span data-ttu-id="d96e7-219">**URL interno**: hello URL del sito di SharePoint hello internamente, ad esempio **https://SharePoint/**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-219">**Internal URL**: This is hello URL of hello SharePoint site internally, such as **https://SharePoint/**.</span></span> <span data-ttu-id="d96e7-220">In questo esempio, assicurarsi che toouse **https**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-220">In this example, make sure toouse **https**.</span></span>
 * <span data-ttu-id="d96e7-221">**Metodo di autenticazione preliminare**: selezionare **Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-221">**Preauthentication Method**: Select **Azure Active Directory**.</span></span>

  ![Opzioni per l'aggiunta di un'applicazione](./media/application-proxy-remote-sharepoint/remote-sharepoint-add-application.png)

5. <span data-ttu-id="d96e7-223">Dopo la pubblicazione di app hello, fare clic su hello **configura** scheda.</span><span class="sxs-lookup"><span data-stu-id="d96e7-223">After hello app is published, click hello **Configure** tab.</span></span>
6. <span data-ttu-id="d96e7-224">Scorrere verso il basso opzione toohello **la conversione dell'URL nelle intestazioni**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-224">Scroll down toohello option **Translate URL in Headers**.</span></span> <span data-ttu-id="d96e7-225">valore predefinito di Hello è **Sì**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-225">hello default value is **YES**.</span></span> <span data-ttu-id="d96e7-226">Modificarlo troppo**n**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-226">Change it too**NO**.</span></span>

 <span data-ttu-id="d96e7-227">SharePoint utilizza hello _intestazione Host_ toolook valore sito hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-227">SharePoint uses hello _Host Header_ value toolook up hello site.</span></span> <span data-ttu-id="d96e7-228">e, in base a questo valore, genera i collegamenti.</span><span class="sxs-lookup"><span data-stu-id="d96e7-228">It also generates links based on this value.</span></span> <span data-ttu-id="d96e7-229">Hello risultato finale è che un collegamento che genera l'errore SharePoint sia un URL pubblicato che sia impostato correttamente l'URL esterno di hello toouse toomake.</span><span class="sxs-lookup"><span data-stu-id="d96e7-229">hello net effect is toomake sure that any link that SharePoint generates is a published URL that is correctly set toouse hello external URL.</span></span> <span data-ttu-id="d96e7-230">Impostazione valore hello troppo**Sì** anche Abilita hello un'applicazione connettore tooforward hello richiesta toohello back-end.</span><span class="sxs-lookup"><span data-stu-id="d96e7-230">Setting hello value too**YES** also enables hello connector tooforward hello request toohello back-end application.</span></span> <span data-ttu-id="d96e7-231">Tuttavia, impostando il valore di hello troppo**n** significa che hello connettore non invia il nome host interno hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-231">However, setting hello value too**NO** means that hello connector will not send hello internal host name.</span></span> <span data-ttu-id="d96e7-232">Al contrario, il connettore di hello invia intestazione host hello come hello pubblicato l'applicazione di back-end toohello URL.</span><span class="sxs-lookup"><span data-stu-id="d96e7-232">Instead, hello connector sends hello host header as hello published URL toohello back-end application.</span></span>

 <span data-ttu-id="d96e7-233">Inoltre, tooensure che SharePoint accetta questo URL, è necessario toocomplete una configurazione di più server SharePoint hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-233">Also, tooensure that SharePoint accepts this URL, you need toocomplete one more configuration on hello SharePoint server.</span></span> <span data-ttu-id="d96e7-234">Operazione che dovrà essere eseguita nella sezione successiva hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-234">You'll do that in hello next section.</span></span>

7. <span data-ttu-id="d96e7-235">Modifica **metodo di autenticazione interno** troppo**autenticazione integrata di Windows**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-235">Change **Internal Authentication Method** too**Integrated Windows Authentication**.</span></span> <span data-ttu-id="d96e7-236">Se il tenant di Azure AD Usa un UPN nel cloud hello è diversa da hello UPN locale, tenere presente tooupdate **delega di identità di account di accesso** anche.</span><span class="sxs-lookup"><span data-stu-id="d96e7-236">If your Azure AD tenant uses a UPN in hello cloud that's different from hello UPN on-premises, remember tooupdate **Delegated Login Identity** as well.</span></span>
8. <span data-ttu-id="d96e7-237">Impostare **SPN applicazione interna** toohello valore impostato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="d96e7-237">Set **Internal Application SPN** toohello value that you set earlier.</span></span> <span data-ttu-id="d96e7-238">ad esempio **http/sharepoint.demo.o365identity.us**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-238">For example, use **http/sharepoint.demo.o365identity.us**.</span></span>
9. <span data-ttu-id="d96e7-239">Assegnare tooyour applicazione hello gli utenti di destinazione.</span><span class="sxs-lookup"><span data-stu-id="d96e7-239">Assign hello application tooyour target users.</span></span>

<span data-ttu-id="d96e7-240">L'applicazione dovrebbe essere simile toohello esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="d96e7-240">Your application should look similar toohello following example:</span></span>

  ![Applicazione finita](./media/application-proxy-remote-sharepoint/remote-sharepoint-internal-application-spn.png)

## <a name="step-3-ensure-that-sharepoint-knows-about-hello-external-url"></a><span data-ttu-id="d96e7-242">Passaggio 3: Verificare che SharePoint conosce URL esterno hello</span><span class="sxs-lookup"><span data-stu-id="d96e7-242">Step 3: Ensure that SharePoint knows about hello external URL</span></span>

<span data-ttu-id="d96e7-243">L'ultimo passaggio tooensure SharePoint grado di individuare il sito di hello basato su URL esterno hello, in modo che esegue il rendering di collegamenti in base a tale URL esterno.</span><span class="sxs-lookup"><span data-stu-id="d96e7-243">Your last step tooensure that SharePoint can find hello site based on hello external URL, so that it will render links based on that external URL.</span></span> <span data-ttu-id="d96e7-244">Questo scopo è la configurazione di mapping di accesso alternativo per il sito di SharePoint hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-244">You do this by configuring alternate access mappings for hello SharePoint site.</span></span>

1. <span data-ttu-id="d96e7-245">Aprire hello **Amministrazione centrale SharePoint 2013** sito.</span><span class="sxs-lookup"><span data-stu-id="d96e7-245">Open hello **SharePoint 2013 Central Administration** site.</span></span>
2. <span data-ttu-id="d96e7-246">In **Impostazioni di sistema** selezionare **Configura mapping di accesso alternativo**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-246">Under **System Settings**, select **Configure Alternate Access Mappings**.</span></span>

 <span data-ttu-id="d96e7-247">Verrà visualizzata hello **mapping di accesso alternativo** casella.</span><span class="sxs-lookup"><span data-stu-id="d96e7-247">This opens hello **Alternate Access Mappings** box.</span></span>

  ![Casella Mapping di accesso alternativo](./media/application-proxy-remote-sharepoint/remote-sharepoint-alternate-access1.png)

3. <span data-ttu-id="d96e7-249">Nell'elenco a discesa hello accanto a **insieme di Mapping di accesso alternativo**selezionare **modifica Mapping insieme di accesso alternativo**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-249">In hello drop-down list beside **Alternate Access Mapping Collection**, select **Change Alternate Access Mapping Collection**.</span></span>
4. <span data-ttu-id="d96e7-250">Selezionare il sito, ad esempio **SharePoint - 80**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-250">Select your site--for example, **SharePoint - 80**.</span></span>

  ![Selezione di un sito](./media/application-proxy-remote-sharepoint/remote-sharepoint-alternate-access2.png)

5. <span data-ttu-id="d96e7-252">È possibile scegliere tooadd hello pubblicato URL come URL interno o un URL pubblico.</span><span class="sxs-lookup"><span data-stu-id="d96e7-252">You can choose tooadd hello published URL as either an internal URL or a public URL.</span></span> <span data-ttu-id="d96e7-253">Questo esempio viene utilizzato un URL pubblico come hello extranet.</span><span class="sxs-lookup"><span data-stu-id="d96e7-253">This example uses a public URL as hello extranet.</span></span>
6. <span data-ttu-id="d96e7-254">Fare clic su **Modifica URL pubblici** in hello **Extranet** percorso, quindi immettere il percorso di hello per hello pubblicata l'applicazione, come indicato al passaggio precedente hello.</span><span class="sxs-lookup"><span data-stu-id="d96e7-254">Click **Edit Public URLs** in hello **Extranet** path, and then enter hello path for hello published application, as in hello previous step.</span></span> <span data-ttu-id="d96e7-255">Ad esempio: **https://sharepoint-iddemo.msappproxy.net**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-255">For example, enter **https://sharepoint-iddemo.msappproxy.net**.</span></span>

  ![Immettere un percorso di hello](./media/application-proxy-remote-sharepoint/remote-sharepoint-alternate-access3.png)

7. <span data-ttu-id="d96e7-257">Fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="d96e7-257">Click **Save**.</span></span>

 <span data-ttu-id="d96e7-258">È ora possibile accedere a un sito di SharePoint hello esternamente tramite Proxy di applicazione di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="d96e7-258">You can now access hello SharePoint site externally via Azure AD Application Proxy.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d96e7-259">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="d96e7-259">Next steps</span></span>

- [<span data-ttu-id="d96e7-260">Come tooprovide proteggere l'accesso remoto applicazioni tooon locali</span><span class="sxs-lookup"><span data-stu-id="d96e7-260">How tooprovide secure remote access tooon-premises applications</span></span>](active-directory-application-proxy-get-started.md)
- [<span data-ttu-id="d96e7-261">Comprendere i connettori del proxy applicazione di Azure AD</span><span class="sxs-lookup"><span data-stu-id="d96e7-261">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-understand-connectors.md)
- <span data-ttu-id="d96e7-262">[Publishing SharePoint 2016 and Office Online Server with Azure AD Application Proxy](https://blogs.technet.microsoft.com/dawiese/2016/06/09/publishing-sharepoint-2016-and-office-online-server-with-azure-ad-application-proxy/) (Pubblicazione su SharePoint 2016 e Office Online Server con il proxy di applicazione Azure AD)</span><span class="sxs-lookup"><span data-stu-id="d96e7-262">[Publishing SharePoint 2016 and Office Online Server with Azure AD Application Proxy](https://blogs.technet.microsoft.com/dawiese/2016/06/09/publishing-sharepoint-2016-and-office-online-server-with-azure-ad-application-proxy/)</span></span>
