---
title: Il primo runbook grafico in Automazione di Azure | Documentazione Microsoft
description: Esercitazione che illustra la creazione, i test e la pubblicazione di un semplice runbook grafico .
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: runbook, modello di runbook, automazione runbook, runbook di Azure
ms.assetid: dcb88f19-ed2b-4372-9724-6625cd287c8a
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 05/17/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 9d4b28416376482247127698bec7c99b83308885
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="my-first-graphical-runbook"></a><span data-ttu-id="ddba0-104">Il primo runbook grafico</span><span class="sxs-lookup"><span data-stu-id="ddba0-104">My first graphical runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="ddba0-105">Grafico</span><span class="sxs-lookup"><span data-stu-id="ddba0-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="ddba0-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="ddba0-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="ddba0-107">Flusso di lavoro PowerShell</span><span class="sxs-lookup"><span data-stu-id="ddba0-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="ddba0-108">Questa esercitazione illustra la creazione di un [runbook grafico](automation-runbook-types.md#graphical-runbooks) in Automazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="ddba0-108">This tutorial walks you through the creation of a [graphical runbook](automation-runbook-types.md#graphical-runbooks) in Azure Automation.</span></span>  <span data-ttu-id="ddba0-109">Si inizia con un runbook semplice che esegue test e pubblicazioni, quindi viene illustrato come tenere traccia dello stato del processo del runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-109">We start with a simple runbook that tests and publishes while we explain how to track the status of the runbook job.</span></span>  <span data-ttu-id="ddba0-110">Si modifica quindi il runbook per gestire effettivamente le risorse di Azure, avviando in questo caso una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ddba0-110">Then we modify the runbook to actually manage Azure resources, in this case starting an Azure virtual machine.</span></span>  <span data-ttu-id="ddba0-111">Si completerà quindi l'esercitazione rendendo il runbook più affidabile con l'aggiunta di parametri e collegamenti condizionali.</span><span class="sxs-lookup"><span data-stu-id="ddba0-111">Then we complete the tutorial by making the runbook more robust by adding runbook parameters and conditional links.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ddba0-112">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="ddba0-112">Prerequisites</span></span>
<span data-ttu-id="ddba0-113">Per completare questa esercitazione, sono necessari gli elementi seguenti.</span><span class="sxs-lookup"><span data-stu-id="ddba0-113">To complete this tutorial, you will need the following.</span></span>

* <span data-ttu-id="ddba0-114">Sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="ddba0-114">Azure subscription.</span></span>  <span data-ttu-id="ddba0-115">Se non si ha ancora una sottoscrizione, è possibile [attivare i vantaggi della sottoscrizione MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) oppure <a href="/pricing/free-account/" target="_blank">[iscriversi per ottenere un account gratuito](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="ddba0-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="ddba0-116">[Account di Automazione di Azure](automation-sec-configure-azure-runas-account.md) che conterrà il runbook ed eseguirà l'autenticazione con le risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ddba0-116">[Azure Automation account](automation-sec-configure-azure-runas-account.md) to hold the runbook and authenticate to Azure resources.</span></span>  <span data-ttu-id="ddba0-117">Questo account deve avere l'autorizzazione per avviare e arrestare la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ddba0-117">This account must have permission to start and stop the virtual machine.</span></span>
* <span data-ttu-id="ddba0-118">Macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ddba0-118">An Azure virtual machine.</span></span>  <span data-ttu-id="ddba0-119">Si arresterà e si avvierà la macchina virtuale in modo che non sia di produzione.</span><span class="sxs-lookup"><span data-stu-id="ddba0-119">We will stop and start this machine so it should not be production.</span></span>

## <a name="step-1---create-runbook"></a><span data-ttu-id="ddba0-120">Passaggio 1: Creare un runbook</span><span class="sxs-lookup"><span data-stu-id="ddba0-120">Step 1 - Create runbook</span></span>
<span data-ttu-id="ddba0-121">Si inizia creando un runbook semplice che restituisce il testo *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-121">We start by creating a simple runbook that outputs the text *Hello World*.</span></span>

1. <span data-ttu-id="ddba0-122">Nel portale di Azure aprire l'account di automazione.</span><span class="sxs-lookup"><span data-stu-id="ddba0-122">In the Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="ddba0-123">La pagina dell'account di automazione offre una visualizzazione rapida delle risorse di questo account.</span><span class="sxs-lookup"><span data-stu-id="ddba0-123">The Automation account page gives you a quick view of the resources in this account.</span></span>  <span data-ttu-id="ddba0-124">Dovrebbero essere già disponibili alcuni asset.</span><span class="sxs-lookup"><span data-stu-id="ddba0-124">You should already have some Assets.</span></span>  <span data-ttu-id="ddba0-125">Per la maggior parte sono i moduli inclusi automaticamente in un nuovo account di automazione.</span><span class="sxs-lookup"><span data-stu-id="ddba0-125">Most of those are the modules that are automatically included in a new Automation account.</span></span>  <span data-ttu-id="ddba0-126">Dovrebbe essere disponibile anche l'asset credenziali citato nei [prerequisiti](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="ddba0-126">You should also have the Credential asset that's mentioned in the [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="ddba0-127">Fare clic nel pannello **Runbook** per aprire l'elenco dei runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-127">Click the **Runbooks** tile to open the list of runbooks.</span></span><br> <span data-ttu-id="ddba0-128">![Controllo Runbook](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-128">![Runbooks control](media/automation-first-runbook-graphical/runbooks-resources-tile.png)</span></span>
3. <span data-ttu-id="ddba0-129">Creare un nuovo runbook facendo clic sul pulsante **Aggiungi Runbook** e quindi su **Crea un nuovo runbook**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-129">Create a new runbook by clicking on the **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="ddba0-130">Denominare il runbook *MyFirstRunbook-Graphical*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-130">Give the runbook the name *MyFirstRunbook-Graphical*.</span></span>
5. <span data-ttu-id="ddba0-131">In questo caso verrà creato un [runbook grafico](automation-graphical-authoring-intro.md), quindi selezionare **Grafico** in **Tipo di runbook**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-131">In this case, we're going to create a [graphical runbook](automation-graphical-authoring-intro.md) so select **Graphical** for **Runbook type**.</span></span><br> <span data-ttu-id="ddba0-132">![Nuovo runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-132">![New runbook](media/automation-first-runbook-graphical/create-new-runbook.png)</span></span><br>
6. <span data-ttu-id="ddba0-133">Fare clic su **Crea** per creare il runbook e aprire l'editor grafico.</span><span class="sxs-lookup"><span data-stu-id="ddba0-133">Click **Create** to create the runbook and open the graphical editor.</span></span>

## <a name="step-2---add-activities-to-the-runbook"></a><span data-ttu-id="ddba0-134">Passaggio 2: Aggiungere attività al runbook</span><span class="sxs-lookup"><span data-stu-id="ddba0-134">Step 2 - Add activities to the runbook</span></span>
<span data-ttu-id="ddba0-135">Il controllo Libreria sul lato sinistro dell'editor consente di selezionare le attività da aggiungere al runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-135">The Library control on the left side of the editor allows you to select activities to add to your runbook.</span></span>  <span data-ttu-id="ddba0-136">Si aggiungerà un cmdlet **Write-Output** per l'output del testo dal runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-136">We're going to add a **Write-Output** cmdlet to output text from the runbook.</span></span>

1. <span data-ttu-id="ddba0-137">Nel controllo Libreria fare clic nella casella di testo di ricerca e digitare **Write-Output**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-137">In the Library control, click in the search textbox and type **Write-Output**.</span></span>  <span data-ttu-id="ddba0-138">I risultati della ricerca verranno visualizzati sotto.</span><span class="sxs-lookup"><span data-stu-id="ddba0-138">The search results will be displayed below.</span></span> <br> <span data-ttu-id="ddba0-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-139">![Microsoft.PowerShell.Utility](media/automation-first-runbook-graphical/search-powershell-cmdlet-writeoutput.png)</span></span>
2. <span data-ttu-id="ddba0-140">Scorrere fino alla fine dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="ddba0-140">Scroll down to the bottom of the list.</span></span>  <span data-ttu-id="ddba0-141">È possibile fare clic con il pulsante destro del mouse su **Write-Output** e scegliere **Aggiungi ad area di disegno** o fare clic sui puntini di sospensione accanto al cmdlet e quindi selezionare **Aggiungi ad area di disegno**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-141">You can either right-click **Write-Output** and select **Add to canvas** or click the ellipse next to the cmdlet and then select **Add to canvas**.</span></span>
3. <span data-ttu-id="ddba0-142">Fare clic sull'attività **Write-Output** nell'area di disegno.</span><span class="sxs-lookup"><span data-stu-id="ddba0-142">Click the **Write-Output** activity on the canvas.</span></span>  <span data-ttu-id="ddba0-143">Si aprirà il pannello Controllo configurazione che consente di configurare l'attività.</span><span class="sxs-lookup"><span data-stu-id="ddba0-143">This opens the Configuration control blade, which allows you to configure the activity.</span></span>
4. <span data-ttu-id="ddba0-144">In **Etichetta** è impostato il nome predefinito del cmdlet, ma è possibile modificarlo specificando un nome più descrittivo.</span><span class="sxs-lookup"><span data-stu-id="ddba0-144">The **Label** defaults to the name of the cmdlet, but we can change it to something more friendly.</span></span> <span data-ttu-id="ddba0-145">Cambiarlo in *Scrivere Hello World nell'output*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-145">Change it to *Write Hello World to output*.</span></span>
5. <span data-ttu-id="ddba0-146">Fare clic su **Parametri** per specificare i valori per i parametri del cmdlet.</span><span class="sxs-lookup"><span data-stu-id="ddba0-146">Click **Parameters** to provide values for the cmdlet's parameters.</span></span>  
   <span data-ttu-id="ddba0-147">Alcuni cmdlet hanno più set di parametri ed è necessario selezionarne uno da usare.</span><span class="sxs-lookup"><span data-stu-id="ddba0-147">Some cmdlets have multiple parameter sets, and you need to select which you one to use.</span></span> <span data-ttu-id="ddba0-148">In questo caso, **Write-Output** ha un solo set di parametri, quindi non è necessario selezionarne uno.</span><span class="sxs-lookup"><span data-stu-id="ddba0-148">In this case, **Write-Output** has only one parameter set, so you don't need to select one.</span></span> <br> <span data-ttu-id="ddba0-149">![Proprietà Write-Output](media/automation-first-runbook-graphical/write-output-properties-b.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-149">![Write-Output properties](media/automation-first-runbook-graphical/write-output-properties-b.png)</span></span>
6. <span data-ttu-id="ddba0-150">Selezionare il parametro **InputObject** .</span><span class="sxs-lookup"><span data-stu-id="ddba0-150">Select the **InputObject** parameter.</span></span>  <span data-ttu-id="ddba0-151">Si tratta del parametro in cui si specificherà il testo da inviare al flusso di output.</span><span class="sxs-lookup"><span data-stu-id="ddba0-151">This is the parameter where we specify the text to send to the output stream.</span></span>
7. <span data-ttu-id="ddba0-152">Nell'elenco a discesa **Origine dati** selezionare **Espressione PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-152">In the **Data source** dropdown, select **PowerShell expression**.</span></span>  <span data-ttu-id="ddba0-153">L'elenco a discesa **Origine dati** include diverse origini che è possibile usare per popolare il valore di un parametro.</span><span class="sxs-lookup"><span data-stu-id="ddba0-153">The **Data source** dropdown provides different sources that you use to populate a parameter value.</span></span>  
   <span data-ttu-id="ddba0-154">È possibile usare l'output da tali origini, ad esempio un'altra attività, un asset di automazione o un'espressione di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ddba0-154">You can use output from such sources such as another activity, an Automation asset, or a PowerShell expression.</span></span>  <span data-ttu-id="ddba0-155">In questo caso, si vuole solo generare il testo *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-155">In this case, we just want to output the text *Hello World*.</span></span> <span data-ttu-id="ddba0-156">È possibile usare un'espressione di PowerShell e specificare una stringa.</span><span class="sxs-lookup"><span data-stu-id="ddba0-156">We can use a PowerShell expression and specify a string.</span></span>
8. <span data-ttu-id="ddba0-157">Nella casella **Espressione** digitare *"Hello World"* e quindi fare clic su **OK** due volte per tornare all'area di disegno.</span><span class="sxs-lookup"><span data-stu-id="ddba0-157">In the **Expression** box, type *"Hello World"* and then click **OK** twice to return to the canvas.</span></span><br> <span data-ttu-id="ddba0-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-158">![PowerShell Expression](media/automation-first-runbook-graphical/expression-hello-world.png)</span></span>
9. <span data-ttu-id="ddba0-159">Salvare il runbook facendo clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-159">Save the runbook by clicking **Save**.</span></span><br> <span data-ttu-id="ddba0-160">![Salvataggio del runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-160">![Save runbook](media/automation-first-runbook-graphical/runbook-toolbar-save-revised20165.png)</span></span>

## <a name="step-3---test-the-runbook"></a><span data-ttu-id="ddba0-161">Passaggio 3: Testare il runbook</span><span class="sxs-lookup"><span data-stu-id="ddba0-161">Step 3 - Test the runbook</span></span>
<span data-ttu-id="ddba0-162">Prima di pubblicare il runbook per renderlo disponibile nell'ambiente di produzione, occorre testarlo per verificare che funzioni correttamente.</span><span class="sxs-lookup"><span data-stu-id="ddba0-162">Before we publish the runbook to make it available in production, we want to test it to make sure that it works properly.</span></span>  <span data-ttu-id="ddba0-163">Quando si testa un runbook, è necessario eseguire la versione **Bozza** e visualizzarne l'output in modo interattivo.</span><span class="sxs-lookup"><span data-stu-id="ddba0-163">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="ddba0-164">Fare clic su **Riquadro di test** per aprire il pannello Test.</span><span class="sxs-lookup"><span data-stu-id="ddba0-164">Click **Test pane** to open the Test blade.</span></span><br> <span data-ttu-id="ddba0-165">![Riquadro Test](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-165">![Test pane](media/automation-first-runbook-graphical/runbook-toolbar-test-revised20165.png)</span></span>
2. <span data-ttu-id="ddba0-166">Fare clic su **Avvia** per avviare il test.</span><span class="sxs-lookup"><span data-stu-id="ddba0-166">Click **Start** to start the test.</span></span>  <span data-ttu-id="ddba0-167">Questa deve essere l'unica opzione abilitata.</span><span class="sxs-lookup"><span data-stu-id="ddba0-167">This should be the only enabled option.</span></span>
3. <span data-ttu-id="ddba0-168">Viene creato un [processo del runbook](automation-runbook-execution.md) e il relativo stato viene visualizzato nel riquadro.</span><span class="sxs-lookup"><span data-stu-id="ddba0-168">A [runbook job](automation-runbook-execution.md) is created and its status displayed in the pane.</span></span>  
   <span data-ttu-id="ddba0-169">Lo stato iniziale del processo è *In coda* per indicare che è in attesa della disponibilità di un ruolo di lavoro per runbook nel cloud.</span><span class="sxs-lookup"><span data-stu-id="ddba0-169">The job status starts as *Queued* indicating that it is waiting for a runbook worker in the cloud to become available.</span></span>  <span data-ttu-id="ddba0-170">Lo stato passa quindi ad *Avvio in corso* quando un ruolo di lavoro richiede il processo e quindi a *In esecuzione* quando l'esecuzione del runbook viene effettivamente avviata.</span><span class="sxs-lookup"><span data-stu-id="ddba0-170">It then moves to *Starting* when a worker claims the job, and then *Running* when the runbook actually starts running.</span></span>  
4. <span data-ttu-id="ddba0-171">Al termine del processo del runbook, viene visualizzato l'output.</span><span class="sxs-lookup"><span data-stu-id="ddba0-171">When the runbook job completes, its output is displayed.</span></span> <span data-ttu-id="ddba0-172">In questo caso, dovrebbe essere visualizzato *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-172">In our case, we should see *Hello World*.</span></span><br> <span data-ttu-id="ddba0-173">![Hello World](media/automation-first-runbook-graphical/runbook-test-results.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-173">![Hello World](media/automation-first-runbook-graphical/runbook-test-results.png)</span></span>
5. <span data-ttu-id="ddba0-174">Chiudere il pannello Test per tornare all'area di disegno.</span><span class="sxs-lookup"><span data-stu-id="ddba0-174">Close the Test blade to return to the canvas.</span></span>

## <a name="step-4---publish-and-start-the-runbook"></a><span data-ttu-id="ddba0-175">Passaggio 4: Pubblicare e avviare il runbook</span><span class="sxs-lookup"><span data-stu-id="ddba0-175">Step 4 - Publish and start the runbook</span></span>
<span data-ttu-id="ddba0-176">Il runbook creato è ancora in modalità Bozza.</span><span class="sxs-lookup"><span data-stu-id="ddba0-176">The runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="ddba0-177">È necessario pubblicarlo prima di poterlo eseguire in produzione.</span><span class="sxs-lookup"><span data-stu-id="ddba0-177">We need to publish it before we can run it in production.</span></span>  <span data-ttu-id="ddba0-178">Quando si pubblica un runbook, è possibile sovrascrivere la versione pubblicata esistente con la versione bozza.</span><span class="sxs-lookup"><span data-stu-id="ddba0-178">When you publish a runbook, you overwrite the existing Published version with the Draft version.</span></span>  <span data-ttu-id="ddba0-179">In questo caso, non esiste ancora una versione pubblicata perché il runbook è appena stato creato.</span><span class="sxs-lookup"><span data-stu-id="ddba0-179">In our case, we don't have a Published version yet because we just created the runbook.</span></span>

1. <span data-ttu-id="ddba0-180">Fare clic su **Pubblica** per pubblicare il runbook, quindi su **Sì** quando richiesto.</span><span class="sxs-lookup"><span data-stu-id="ddba0-180">Click **Publish** to publish the runbook and then **Yes** when prompted.</span></span><br> <span data-ttu-id="ddba0-181">![Pubblica](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-181">![Publish](media/automation-first-runbook-graphical/runbook-toolbar-publish-revised20166.png)</span></span>
2. <span data-ttu-id="ddba0-182">Se si scorre verso sinistra per visualizzare il runbook nel pannello **Runbook**, come **Stato di creazione** viene visualizzato **Pubblicato**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-182">If you scroll left to view the runbook in the **Runbooks** blade, it shows an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="ddba0-183">Scorrere verso destra per visualizzare il pannello **MyFirstRunbook**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-183">Scroll back to the right to view the blade for **MyFirstRunbook**.</span></span>  
   <span data-ttu-id="ddba0-184">Le opzioni nella parte superiore consentono di avviare il runbook, pianificarlo per avviarlo in qualsiasi momento in futuro o creare un [webhook](automation-webhooks.md) per poterlo avviare con una chiamata HTTP.</span><span class="sxs-lookup"><span data-stu-id="ddba0-184">The options across the top allow us to start the runbook, schedule it to start at some time in the future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="ddba0-185">Si vuole solo avviare il runbook, quindi fare clic su **Avvia** e poi su **Sì** quando richiesto.</span><span class="sxs-lookup"><span data-stu-id="ddba0-185">We just want to start the runbook so click **Start** and then **Yes** when prompted.</span></span><br> <span data-ttu-id="ddba0-186">![Avvia runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-186">![Start runbook](media/automation-first-runbook-graphical/runbook-controls-start-revised20165.png)</span></span>
5. <span data-ttu-id="ddba0-187">Viene aperto un pannello per il processo del runbook creato.</span><span class="sxs-lookup"><span data-stu-id="ddba0-187">A job blade is opened for the runbook job that we created.</span></span>  <span data-ttu-id="ddba0-188">È possibile chiudere questo pannello, ma in questo caso lo si lascerà aperto per poter controllare lo stato del processo.</span><span class="sxs-lookup"><span data-stu-id="ddba0-188">We can close this blade, but in this case we leave it open so we can watch the job's progress.</span></span>
6. <span data-ttu-id="ddba0-189">Lo stato del processo è visualizzato in **Riepilogo processi** e corrisponde agli stati osservati quando è stato testato il runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-189">The job status is shown in **Job Summary** and matches the statuses that we saw when we tested the runbook.</span></span><br> <span data-ttu-id="ddba0-190">![Riepilogo processi](media/automation-first-runbook-graphical/runbook-job-summary.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-190">![Job Summary](media/automation-first-runbook-graphical/runbook-job-summary.png)</span></span>
7. <span data-ttu-id="ddba0-191">Quando lo stato del runbook risulta *Completato*fare clic su **Output**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-191">Once the runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="ddba0-192">Viene aperto il pannello **Output** dove si può vedere il testo *Hello World* nel riquadro.</span><span class="sxs-lookup"><span data-stu-id="ddba0-192">The **Output** blade is opened, and we can see our *Hello World* in the pane.</span></span><br> <span data-ttu-id="ddba0-193">![Riepilogo dei processi](media/automation-first-runbook-graphical/runbook-job-output.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-193">![Job Summary](media/automation-first-runbook-graphical/runbook-job-output.png)</span></span>  
8. <span data-ttu-id="ddba0-194">Chiudere il pannello Output.</span><span class="sxs-lookup"><span data-stu-id="ddba0-194">Close the Output blade.</span></span>
9. <span data-ttu-id="ddba0-195">Fare clic su **Tutti i log** per aprire il pannello Flussi relativo al processo del runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-195">Click **All Logs** to open the Streams blade for the runbook job.</span></span>  <span data-ttu-id="ddba0-196">Nel flusso di output dovrebbe essere visibile solo *Hello World* , ma potrebbero essere visualizzati altri flussi per un processo del runbook, ad esempio Verbose ed Error se il runbook scrive in questi flussi.</span><span class="sxs-lookup"><span data-stu-id="ddba0-196">We should only see *Hello World* in the output stream, but this can show other streams for a runbook job such as Verbose and Error if the runbook writes to them.</span></span><br> <span data-ttu-id="ddba0-197">![Riepilogo dei processi](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-197">![Job Summary](media/automation-first-runbook-graphical/runbook-job-AllLogs.png)</span></span>
10. <span data-ttu-id="ddba0-198">Chiudere il pannello Tutti i log e il pannello Processo per tornare al pannello MyFirstRunbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-198">Close the All Logs blade and the Job blade to return to the MyFirstRunbook blade.</span></span>
11. <span data-ttu-id="ddba0-199">Fare clic su **Processi** per aprire il pannello Processi per questo runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-199">Click **Jobs** to open the Jobs blade for this runbook.</span></span>  <span data-ttu-id="ddba0-200">Sono elencati tutti i processi creati da questo runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-200">This lists all the jobs created by this runbook.</span></span> <span data-ttu-id="ddba0-201">Dovrebbe essere elencato un solo processo, perché il processo è stato eseguito una sola volta.</span><span class="sxs-lookup"><span data-stu-id="ddba0-201">We should only see one job listed since we only ran the job once.</span></span><br> <span data-ttu-id="ddba0-202">![Processi](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-202">![Jobs](media/automation-first-runbook-graphical/runbook-control-jobs.png)</span></span>
12. <span data-ttu-id="ddba0-203">È possibile fare clic su questo processo per aprire lo stesso pannello visualizzato quando è stato avviato il runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-203">You can click this job to open the same Job pane that we viewed when we started the runbook.</span></span>  <span data-ttu-id="ddba0-204">In questo modo è possibile tornare indietro nel tempo e visualizzare i dettagli di tutti i processi creati per un runbook particolare.</span><span class="sxs-lookup"><span data-stu-id="ddba0-204">This allows you to go back in time and view the details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---create-variable-assets"></a><span data-ttu-id="ddba0-205">Passaggio 5: Creare asset di variabile</span><span class="sxs-lookup"><span data-stu-id="ddba0-205">Step 5 - Create variable assets</span></span>
<span data-ttu-id="ddba0-206">Il runbook è stato testato e pubblicato, ma finora non esegue alcuna attività utile.</span><span class="sxs-lookup"><span data-stu-id="ddba0-206">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="ddba0-207">Si vuole fare in modo che gestisca le risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ddba0-207">We want to have it manage Azure resources.</span></span>  <span data-ttu-id="ddba0-208">Prima di configurare il runbook per l'autenticazione verrà creata una variabile che conterrà l'ID sottoscrizione e alla quale si farà riferimento dopo aver configurato l'attività per l'autenticazione più avanti nel passaggio 6.</span><span class="sxs-lookup"><span data-stu-id="ddba0-208">Before we configure the runbook to authenticate, we  create a variable to hold the subscription ID and reference it after we set up the activity to authenticate in step 6 below.</span></span>  <span data-ttu-id="ddba0-209">L'inserimento di un riferimento al contesto della sottoscrizione consente di usare facilmente più sottoscrizioni contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="ddba0-209">Including a reference to the subscription context allows you to easily work between multiple subscriptions.</span></span>  <span data-ttu-id="ddba0-210">Prima di procedere, copiare l'ID sottoscrizione dall'opzione Sottoscrizioni del riquadro di spostamento.</span><span class="sxs-lookup"><span data-stu-id="ddba0-210">Before proceeding, copy your subscription ID from the Subscriptions option off the Navigation pane.</span></span>  

1. <span data-ttu-id="ddba0-211">Nel pannello Account di automazione fare clic sul riquadro **Asset** per aprire il pannello **Asset**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-211">In the Automation Accounts blade, click the **Assets** tile and the **Assets** blade is opened.</span></span>
2. <span data-ttu-id="ddba0-212">Nel pannello Asset fare clic sul riquadro **Variabili**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-212">In the Assets blade, click the **Variables** tile.</span></span>
3. <span data-ttu-id="ddba0-213">Nel pannello Variabili fare clic su **Aggiungi variabile**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-213">On the Variables blade, click **Add a variable**.</span></span><br><span data-ttu-id="ddba0-214">![Variabile di Automazione](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-214">![Automation Variable](media/automation-first-runbook-graphical/create-new-subscriptionid-variable.png)</span></span>
4. <span data-ttu-id="ddba0-215">Nella casella **Nome** del pannello Nuova variabile immettere **AzureSubscriptionId** e nella casella **Valore** immettere l'ID sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="ddba0-215">In the New variable blade, in the **Name** box, enter **AzureSubscriptionId** and in the **Value** box enter your Subscription ID.</span></span>  <span data-ttu-id="ddba0-216">Lasciare *Stringa* in **Tipo** e il valore predefinito in **Crittografia**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-216">Keep *string* for the **Type** and the default value for **Encryption**.</span></span>  
5. <span data-ttu-id="ddba0-217">Fare clic su **Crea** per creare la variabile.</span><span class="sxs-lookup"><span data-stu-id="ddba0-217">Click **Create** to create the variable.</span></span>  

## <a name="step-6---add-authentication-to-manage-azure-resources"></a><span data-ttu-id="ddba0-218">Passaggio 6: Aggiungere l'autenticazione per gestire le risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="ddba0-218">Step 6 - Add authentication to manage Azure resources</span></span>
<span data-ttu-id="ddba0-219">Dopo avere creato una variabile che contiene l'ID sottoscrizione, è possibile configurare il runbook per l'autenticazione con le credenziali Esegui come a cui si fa riferimento nei [prerequisiti](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="ddba0-219">Now that we have a variable to hold our subscription ID, we can configure our runbook to authenticate with the Run As credentials that are referred to in the [prerequisites](#prerequisites).</span></span>  <span data-ttu-id="ddba0-220">Questa operazione viene eseguita aggiungendo il cmdlet **Asset** e **Add-AzureRMAccount** della connessione RunAs di Azure all'area di disegno.</span><span class="sxs-lookup"><span data-stu-id="ddba0-220">We do that by adding the Azure Run As connection **Asset** and **Add-AzureRMAccount** cmdlet to the canvas.</span></span>  

1. <span data-ttu-id="ddba0-221">Aprire l'editor grafico facendo clic su **Modifica** nel pannello MyFirstRunbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-221">Open the graphical editor by clicking **Edit** on the MyFirstRunbook blade.</span></span><br> <span data-ttu-id="ddba0-222">![Modificare il runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-222">![Edit runbook](media/automation-first-runbook-graphical/runbook-controls-edit-revised20165.png)</span></span>
2. <span data-ttu-id="ddba0-223">**Scrivere Hello World nell'output** non è più necessario, quindi fare clic con il pulsante destro del mouse sul testo e scegliere **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-223">We don't need the **Write Hello World to output** anymore, so right-click it and select **Delete**.</span></span>
3. <span data-ttu-id="ddba0-224">Nel controllo Libreria espandere **Connessioni** e aggiungere **AzureRunAsConnection** all'area di disegno selezionando **Aggiungi ad area di disegno**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-224">In the Library control, expand **Connections** and add **AzureRunAsConnection** to the canvas by selecting **Add to canvas**.</span></span>
4. <span data-ttu-id="ddba0-225">Nell'area di disegno selezionare **AzureRunAsConnection** e nel riquadro del controllo Configurazione digitare **Get Run As Connection** nella casella di testo **Etichetta**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-225">On the canvas, select **AzureRunAsConnection** and in the Configuration control pane, type **Get Run As Connection** in the **Label** textbox.</span></span>  <span data-ttu-id="ddba0-226">Si tratta della connessione</span><span class="sxs-lookup"><span data-stu-id="ddba0-226">This is the connection</span></span>
5. <span data-ttu-id="ddba0-227">Nel controllo Libreria digitare **Add-AzureRmAccount** nella casella di testo di ricerca.</span><span class="sxs-lookup"><span data-stu-id="ddba0-227">In the Library control, type **Add-AzureRmAccount** in the search textbox.</span></span>
6. <span data-ttu-id="ddba0-228">Aggiungere **Aggiungere-AzureRmAccount** all'area di disegno.</span><span class="sxs-lookup"><span data-stu-id="ddba0-228">Add **Add-AzureRmAccount** to the canvas.</span></span><br> <span data-ttu-id="ddba0-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-229">![Add-AzureRMAccount](media/automation-first-runbook-graphical/search-powershell-cmdlet-addazurermaccount.png)</span></span>
7. <span data-ttu-id="ddba0-230">Passare il puntatore su **Get Run As Connection** finché non viene visualizzato un cerchio nella parte inferiore della forma.</span><span class="sxs-lookup"><span data-stu-id="ddba0-230">Hover over **Get Run As Connection** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="ddba0-231">Fare clic sul cerchio e trascinare la freccia su **Add-AzureRmAccount**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-231">Click the circle and drag the arrow to **Add-AzureRmAccount**.</span></span>  <span data-ttu-id="ddba0-232">La freccia creata è un *collegamento*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-232">The arrow that you created is a *link*.</span></span>  <span data-ttu-id="ddba0-233">Il runbook verrà avviato con **Get Run As Connection** (Ottieni connessione RunAs) e quindi eseguirà **Add-AzureRmAccount**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-233">The runbook starts with **Get Run As Connection** and then run **Add-AzureRmAccount**.</span></span><br> <span data-ttu-id="ddba0-234">![Creare un collegamento tra le attività](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-234">![Create link between activities](media/automation-first-runbook-graphical/runbook-link-auth-activities.png)</span></span>
8. <span data-ttu-id="ddba0-235">Nell'area di disegno selezionare **Add-AzureRmAccount** e nel riquadro del controllo Configurazione digitare **Login to Azure** nella casella di testo **Etichetta**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-235">On the canvas, select **Add-AzureRmAccount** and in the Configuration control pane type **Login to Azure** in the **Label** textbox.</span></span>
9. <span data-ttu-id="ddba0-236">Fare clic su **Parametri** per visualizzare il pannello Configurazione parametro attività.</span><span class="sxs-lookup"><span data-stu-id="ddba0-236">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
10. <span data-ttu-id="ddba0-237">**Add-AzureRmAccount** include più set di parametri, quindi è necessario selezionarne uno prima di poterne indicare i valori.</span><span class="sxs-lookup"><span data-stu-id="ddba0-237">**Add-AzureRmAccount** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="ddba0-238">Fare clic su **Set di parametri** e quindi selezionare il set di parametri **ServicePrincipalCertificatewithSubscriptionId**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-238">Click **Parameter Set** and then select the **ServicePrincipalCertificatewithSubscriptionId** parameter set.</span></span>
11. <span data-ttu-id="ddba0-239">Dopo aver selezionato il set di parametri, nel pannello Configurazione parametro attività vengono visualizzati i parametri.</span><span class="sxs-lookup"><span data-stu-id="ddba0-239">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="ddba0-240">Fare clic su **APPLICATIONID**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-240">Click **APPLICATIONID**.</span></span><br> <span data-ttu-id="ddba0-241">![Aggiungere parametri all'account Azure RM](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-241">![Add Azure RM account parameters](media/automation-first-runbook-graphical/add-azurermaccount-params.png)</span></span>
12. <span data-ttu-id="ddba0-242">Nel pannello Valore parametro selezionare **Output attività** per **Origine dati** e quindi selezionare **Get Run As Connection** dall'elenco, nella casella di testo **Percorso campo** digitare **ApplicationId** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-242">In the Parameter Value blade, select **Activity output** for the **Data source** and select **Get Run As Connection** from the list, in the **Field path** textbox type **ApplicationId**, and then click **OK**.</span></span>  <span data-ttu-id="ddba0-243">Viene specificato il nome della proprietà per il percorso del campo perché l'attività restituisce un oggetto con più proprietà.</span><span class="sxs-lookup"><span data-stu-id="ddba0-243">We are specifying the name of the property for the Field path because the activity outputs an object with multiple properties.</span></span>
13. <span data-ttu-id="ddba0-244">Fare clic su **CERTIFICATETHUMBPRINT** e nel pannello Valore parametro selezionare **Output attività** per **Origine dati**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-244">Click **CERTIFICATETHUMBPRINT**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="ddba0-245">Selezionare **Get Run As Connection** dall'elenco, digitare **CertificateThumbprint** nella casella di testo **Percorso campo** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-245">Select **Get Run As Connection** from the list, in the **Field path** textbox type **CertificateThumbprint**, and then click **OK**.</span></span>
14. <span data-ttu-id="ddba0-246">Fare clic su **SERVICEPRINCIPAL** e nel pannello Valore parametro selezionare **ConstantValue** per **Origine dati**, fare clic sull'opzione **True** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-246">Click **SERVICEPRINCIPAL**, and in the Parameter Value blade, select **ConstantValue** for the **Data source**, click the option **True**, and then click **OK**.</span></span>
15. <span data-ttu-id="ddba0-247">Fare clic su **TENANTID** e nel pannello Valore parametro selezionare **Output attività** per **Origine dati**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-247">Click **TENANTID**, and in the Parameter Value blade, select **Activity output** for the **Data source**.</span></span>  <span data-ttu-id="ddba0-248">Selezionare **Get Run As Connection** dall'elenco, digitare **TenantId** nella casella di testo **Percorso campo** e quindi fare clic su **OK** due volte.</span><span class="sxs-lookup"><span data-stu-id="ddba0-248">Select **Get Run As Connection** from the list, in the **Field path** textbox type **TenantId**, and then click **OK** twice.</span></span>  
16. <span data-ttu-id="ddba0-249">Nel controllo Libreria digitare **Set-AzureRmContext** nella casella di testo di ricerca.</span><span class="sxs-lookup"><span data-stu-id="ddba0-249">In the Library control, type **Set-AzureRmContext** in the search textbox.</span></span>
17. <span data-ttu-id="ddba0-250">Aggiungere **Set-AzureRmContext** all'area di disegno.</span><span class="sxs-lookup"><span data-stu-id="ddba0-250">Add **Set-AzureRmContext** to the canvas.</span></span>
18. <span data-ttu-id="ddba0-251">Nell'area di disegno selezionare **Set-AzureRmContext** e nel riquadro del controllo Configurazione digitare **Specify Subscription Id** nella casella di testo **Etichetta**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-251">On the canvas, select **Set-AzureRmContext** and in the Configuration control pane type **Specify Subscription Id** in the **Label** textbox.</span></span>
19. <span data-ttu-id="ddba0-252">Fare clic su **Parametri** per visualizzare il pannello Configurazione parametro attività.</span><span class="sxs-lookup"><span data-stu-id="ddba0-252">Click **Parameters** and the Activity Parameter Configuration blade appears.</span></span>
20. <span data-ttu-id="ddba0-253">**Set-AzureRmContext** include più set di parametri, quindi è necessario selezionarne uno prima di poterne indicare i valori.</span><span class="sxs-lookup"><span data-stu-id="ddba0-253">**Set-AzureRmContext** has multiple parameter sets, so we need to select one before we can provide parameter values.</span></span>  <span data-ttu-id="ddba0-254">Fare clic su **Set di parametri** e quindi selezionare il set di parametri **SubscriptionId**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-254">Click **Parameter Set** and then select the **SubscriptionId** parameter set.</span></span>  
21. <span data-ttu-id="ddba0-255">Dopo aver selezionato il set di parametri, nel pannello Configurazione parametro attività vengono visualizzati i parametri.</span><span class="sxs-lookup"><span data-stu-id="ddba0-255">Once you select the parameter set, the parameters are displayed in the Activity Parameter Configuration blade.</span></span>  <span data-ttu-id="ddba0-256">Fare clic su **SubscriptionID**</span><span class="sxs-lookup"><span data-stu-id="ddba0-256">Click **SubscriptionID**</span></span>
22. <span data-ttu-id="ddba0-257">Nel pannello Valore parametro selezionare **Asset variabile** per **Origine dati**, selezionare **AzureSubscriptionId** dall'elenco e quindi fare clic su **OK** due volte.</span><span class="sxs-lookup"><span data-stu-id="ddba0-257">In the Parameter Value blade, select **Variable Asset** for the **Data source** and select **AzureSubscriptionId** from the list and then click **OK** twice.</span></span>   
23. <span data-ttu-id="ddba0-258">Passare il puntatore su **Login to Azure** finché non viene visualizzato un cerchio nella parte inferiore della forma.</span><span class="sxs-lookup"><span data-stu-id="ddba0-258">Hover over **Login to Azure** until a circle appears on the bottom of the shape.</span></span> <span data-ttu-id="ddba0-259">Fare clic sul cerchio e trascinare la freccia su **Specify Subscription Id**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-259">Click the circle and drag the arrow to **Specify Subscription Id**.</span></span>

<span data-ttu-id="ddba0-260">A questo punto l'aspetto del runbook sarà simile al seguente: </span><span class="sxs-lookup"><span data-stu-id="ddba0-260">Your runbook should look like the following at this point:</span></span> <br>![Configurazione dell'autenticazione runbook](media/automation-first-runbook-graphical/runbook-auth-config.png)

## <a name="step-7---add-activity-to-start-a-virtual-machine"></a><span data-ttu-id="ddba0-262">Passaggio 7: Aggiungere l'attività per avviare una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="ddba0-262">Step 7 - Add activity to start a virtual machine</span></span>
<span data-ttu-id="ddba0-263">Qui viene aggiunta un'attività **Start-AzureRmVM** per avviare una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ddba0-263">Here we add a **Start-AzureRmVM** activity to start a virtual machine.</span></span>  <span data-ttu-id="ddba0-264">È possibile selezionare una macchina virtuale qualsiasi nella sottoscrizione di Azure. Per ora il nome sarà hardcoded nel cmdlet.</span><span class="sxs-lookup"><span data-stu-id="ddba0-264">You can pick any virtual machine in your Azure subscription, and for now you hardcode that name into the cmdlet.</span></span>

1. <span data-ttu-id="ddba0-265">Nel controllo Libreria digitare **Start-AzureRm** nella casella di testo di ricerca.</span><span class="sxs-lookup"><span data-stu-id="ddba0-265">In the Library control, type **Start-AzureRm** in the search textbox.</span></span>
2. <span data-ttu-id="ddba0-266">Aggiungere **Start-AzureRmVM** all'area di disegno e quindi trascinarla sotto **Specify Subscription Id**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-266">Add **Start-AzureRmVM** to the canvas and then click and drag it underneath **Specify Subscription Id**.</span></span>
3. <span data-ttu-id="ddba0-267">Passare il puntatore su **Specify Subscription Id** finché non viene visualizzato un cerchio nella parte inferiore della forma.</span><span class="sxs-lookup"><span data-stu-id="ddba0-267">Hover over **Specify Subscription Id** until a circle appears on the bottom of the shape.</span></span>  <span data-ttu-id="ddba0-268">Fare clic sul cerchio e trascinare la freccia su **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-268">Click the circle and drag the arrow to **Start-AzureRmVM**.</span></span>
4. <span data-ttu-id="ddba0-269">Selezionare **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-269">Select **Start-AzureRmVM**.</span></span>  <span data-ttu-id="ddba0-270">Fare clic su **Parametri** e quindi su **Set di parametri** per visualizzare i set per **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-270">Click **Parameters** and then **Parameter Set** to view the sets for **Start-AzureRmVM**.</span></span>  <span data-ttu-id="ddba0-271">Selezionare il set di parametri **ResourceGroupNameParameterSetName** .</span><span class="sxs-lookup"><span data-stu-id="ddba0-271">Select the **ResourceGroupNameParameterSetName** parameter set.</span></span> <span data-ttu-id="ddba0-272">Si noti che accanto a **ResourceGroupName** e **Name** sono presenti punti esclamativi.</span><span class="sxs-lookup"><span data-stu-id="ddba0-272">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="ddba0-273">Indicano che si tratta di parametri obbligatori.</span><span class="sxs-lookup"><span data-stu-id="ddba0-273">This indicates that they are required parameters.</span></span>  <span data-ttu-id="ddba0-274">Si noti anche che i valori previsti per entrambi sono stringhe.</span><span class="sxs-lookup"><span data-stu-id="ddba0-274">Also note both expect string values.</span></span>
5. <span data-ttu-id="ddba0-275">Selezionare **Name**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-275">Select **Name**.</span></span>  <span data-ttu-id="ddba0-276">Selezionare **Espressione PowerShell** in **Origine dati** e digitare il nome della macchina virtuale, racchiuso tra virgolette doppie, che viene avviata con questo runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-276">Select **PowerShell expression** for the **Data source** and type in the name of the virtual machine surrounded with double quotes that we start with this runbook.</span></span>  <span data-ttu-id="ddba0-277">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-277">Click **OK**.</span></span><br><span data-ttu-id="ddba0-278">![Valore del parametro Name di Start-AzureRmVM](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-278">![Start-AzureRmVM Name Parameter Value](media/automation-first-runbook-graphical/runbook-startvm-nameparameter.png)</span></span>
6. <span data-ttu-id="ddba0-279">Selezionare **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-279">Select **ResourceGroupName**.</span></span> <span data-ttu-id="ddba0-280">Usare **Espressione PowerShell** in **Origine dati** e digitare il nome del gruppo di risorse racchiuso tra virgolette doppie.</span><span class="sxs-lookup"><span data-stu-id="ddba0-280">Use **PowerShell expression** for the **Data source** and type in the name of the resource group surrounded with double quotes.</span></span>  <span data-ttu-id="ddba0-281">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-281">Click **OK**.</span></span><br> <span data-ttu-id="ddba0-282">![Parametri di Start-AzureRmVM](media/automation-first-runbook-graphical/startazurermvm-params.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-282">![Start-AzureRmVM Parameters](media/automation-first-runbook-graphical/startazurermvm-params.png)</span></span>
7. <span data-ttu-id="ddba0-283">Fare clic sul riquadro Test in modo da testare il runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-283">Click Test pane so that we can test the runbook.</span></span>
8. <span data-ttu-id="ddba0-284">Fare clic su **Avvia** per avviare il test.</span><span class="sxs-lookup"><span data-stu-id="ddba0-284">Click **Start** to start the test.</span></span>  <span data-ttu-id="ddba0-285">Dopo aver completato l'attività, controllare che la macchina virtuale sia stata avviata.</span><span class="sxs-lookup"><span data-stu-id="ddba0-285">Once it completes, check that the virtual machine was started.</span></span>

<span data-ttu-id="ddba0-286">A questo punto l'aspetto del runbook sarà simile al seguente: </span><span class="sxs-lookup"><span data-stu-id="ddba0-286">Your runbook should look like the following at this point:</span></span> <br>![Configurazione dell'autenticazione runbook](media/automation-first-runbook-graphical/runbook-startvm.png)

## <a name="step-8---add-additional-input-parameters-to-the-runbook"></a><span data-ttu-id="ddba0-288">Passaggio 8: Aggiungere altri parametri di input al runbook</span><span class="sxs-lookup"><span data-stu-id="ddba0-288">Step 8 - Add additional input parameters to the runbook</span></span>
<span data-ttu-id="ddba0-289">Il runbook avvia attualmente la macchina virtuale nel gruppo di risorse specificato nel cmdlet **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-289">Our runbook currently starts the virtual machine in the resource group that we specified in the **Start-AzureRmVM** cmdlet.</span></span>  <span data-ttu-id="ddba0-290">Il runbook sarebbe più utile se si potesse specificarli entrambi quando viene avviato.</span><span class="sxs-lookup"><span data-stu-id="ddba0-290">Our runbook would be more useful if we could specify both when the runbook is started.</span></span>  <span data-ttu-id="ddba0-291">Per fornire questa funzionalità, si aggiungeranno ora dei parametri di input al runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-291">We now add input parameters to the runbook to provide that functionality.</span></span>

1. <span data-ttu-id="ddba0-292">Aprire l'editor grafico facendo clic su **Modifica** nel pannello **MyFirstRunbook**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-292">Open the graphical editor by clicking **Edit** on the **MyFirstRunbook** pane.</span></span>
2. <span data-ttu-id="ddba0-293">Fare clic su **Input e output** e quindi su **Aggiungi input** per aprire il riquadro Parametro di input runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-293">Click **Input and output** and then **Add input** to open the Runbook Input Parameter pane.</span></span><br> <span data-ttu-id="ddba0-294">![Input e output del runbook](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-294">![Runbook Input and Output](media/automation-first-runbook-graphical/runbook-toolbar-InputandOutput-revised20165.png)</span></span>
3. <span data-ttu-id="ddba0-295">Specificare *VMName* per **Nome**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-295">Specify *VMName* for the **Name**.</span></span>  <span data-ttu-id="ddba0-296">Mantenere *stringa* come **Tipo**, ma cambiare **Obbligatorio** in *Sì*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-296">Keep *string* for the **Type**, but change **Mandatory** to *Yes*.</span></span>  <span data-ttu-id="ddba0-297">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-297">Click **OK**.</span></span>
4. <span data-ttu-id="ddba0-298">Creare un secondo parametro di input obbligatorio denominato *ResourceGroupName* e quindi fare clic su **OK**per chiudere il riquadro **Input e output**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-298">Create a second mandatory input parameter called *ResourceGroupName* and then click **OK** to close the **Input and Output** pane.</span></span><br> <span data-ttu-id="ddba0-299">![Parametri di input del runbook](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-299">![Runbook Input Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-outputs.png)</span></span>
5. <span data-ttu-id="ddba0-300">Selezionare l'attività **Start-AzureRmVM** e quindi fare clic su **Parametri**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-300">Select the **Start-AzureRmVM** activity and then click **Parameters**.</span></span>
6. <span data-ttu-id="ddba0-301">Cambiare **Origine dati** per **Nome** in **Input runbook** e quindi selezionare **VMName**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-301">Change the **Data source** for **Name** to **Runbook input** and then select **VMName**.</span></span><br>
7. <span data-ttu-id="ddba0-302">Cambiare **Origine dati** per **ResourceGroupName** in **Input runbook** e quindi selezionare **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-302">Change the **Data source** for **ResourceGroupName** to **Runbook input** and then select **ResourceGroupName**.</span></span><br> <span data-ttu-id="ddba0-303">![Parametri Start-AzureVM](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-303">![Start-AzureVM Parameters](media/automation-first-runbook-graphical/start-azurermvm-params-runbookinput.png)</span></span>
8. <span data-ttu-id="ddba0-304">Salvare il runbook e aprire il riquadro Test.</span><span class="sxs-lookup"><span data-stu-id="ddba0-304">Save the runbook and open the Test pane.</span></span>  <span data-ttu-id="ddba0-305">Si noti che ora è possibile fornire i valori per le due variabili di input che verranno usate nel test.</span><span class="sxs-lookup"><span data-stu-id="ddba0-305">Note that you can now provide values for the two input variables that you use in the test.</span></span>
9. <span data-ttu-id="ddba0-306">Chiudere il riquadro Test.</span><span class="sxs-lookup"><span data-stu-id="ddba0-306">Close the Test pane.</span></span>
10. <span data-ttu-id="ddba0-307">Fare clic su **Pubblica** per pubblicare la nuova versione del runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-307">Click **Publish** to publish the new version of the runbook.</span></span>
11. <span data-ttu-id="ddba0-308">Arrestare la macchina virtuale avviata nel passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="ddba0-308">Stop the virtual machine that you started in the previous step.</span></span>
12. <span data-ttu-id="ddba0-309">Fare clic su **Avvia** per avviare il runbook.</span><span class="sxs-lookup"><span data-stu-id="ddba0-309">Click **Start** to start the runbook.</span></span>  <span data-ttu-id="ddba0-310">Digitare **VMName** e **ResourceGroupName** per la macchina virtuale da avviare.</span><span class="sxs-lookup"><span data-stu-id="ddba0-310">Type in the **VMName** and **ResourceGroupName** for the virtual machine that you're going to start.</span></span><br> <span data-ttu-id="ddba0-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-311">![Start Runbook](media/automation-first-runbook-graphical/runbook-start-inputparams.png)</span></span>
13. <span data-ttu-id="ddba0-312">Quando il runbook viene completato, controllare che la macchina virtuale sia stata avviata.</span><span class="sxs-lookup"><span data-stu-id="ddba0-312">When the runbook completes, check that the virtual machine was started.</span></span>

## <a name="step-9---create-a-conditional-link"></a><span data-ttu-id="ddba0-313">Passaggio 9: Creare un collegamento condizionale</span><span class="sxs-lookup"><span data-stu-id="ddba0-313">Step 9 - Create a conditional link</span></span>
<span data-ttu-id="ddba0-314">Ora si modificherà il runbook in modo che provi solo ad avviare la macchina virtuale, se non è già avviata.</span><span class="sxs-lookup"><span data-stu-id="ddba0-314">We now modify the runbook so that it only attempts to start the virtual machine if it is not already started.</span></span>  <span data-ttu-id="ddba0-315">Per eseguire questa operazione, aggiungere al runbook un cmdlet **Get-AzureRmVM** che otterrà lo stato della macchina virtuale a livello di istanza.</span><span class="sxs-lookup"><span data-stu-id="ddba0-315">You do this by adding a **Get-AzureRmVM** cmdlet to the runbook that gets the instance level status of the virtual machine.</span></span> <span data-ttu-id="ddba0-316">Verrà quindi aggiunto un modulo Codice del flusso di lavoro PowerShell denominato **Get Status** con un frammento di codice PowerShell per determinare se lo stato della macchina virtuale è in esecuzione o arrestato.</span><span class="sxs-lookup"><span data-stu-id="ddba0-316">Then you add a PowerShell Workflow code module called **Get Status** with a snippet of PowerShell code to determine if the virtual machine state is running or stopped.</span></span>  <span data-ttu-id="ddba0-317">Un collegamento condizionale dal modulo **Get Status** eseguirà **Start-AzureRmVM** solo se lo stato di esecuzione corrente è arrestato.</span><span class="sxs-lookup"><span data-stu-id="ddba0-317">A conditional link from the **Get Status** module only runs **Start-AzureRmVM** if the current running state is stopped.</span></span>  <span data-ttu-id="ddba0-318">Infine si genererà un messaggio per informare se la VM è stata avviata correttamente o meno usando il cmdlet Write-Output di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ddba0-318">Finally, we output a message to inform you if the VM was successfully started or not using the PowerShell Write-Output cmdlet.</span></span>

1. <span data-ttu-id="ddba0-319">Aprire **MyFirstRunbook** nell'editor grafico.</span><span class="sxs-lookup"><span data-stu-id="ddba0-319">Open **MyFirstRunbook** in the graphical editor.</span></span>
2. <span data-ttu-id="ddba0-320">Rimuovere il collegamento tra **Specify Subscription Id** e **Start-AzureRmVM** facendo clic su di esso e quindi premendo *CANC*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-320">Remove the link between **Specify Subscription Id** and **Start-AzureRmVM** by clicking on it and then pressing the *Delete* key.</span></span>
3. <span data-ttu-id="ddba0-321">Nel controllo Libreria digitare **Get-AzureRm** nella casella di testo di ricerca.</span><span class="sxs-lookup"><span data-stu-id="ddba0-321">In the Library control, type **Get-AzureRm** in the search textbox.</span></span>
4. <span data-ttu-id="ddba0-322">Aggiungere **Get-AzureRmVM** all'area di disegno.</span><span class="sxs-lookup"><span data-stu-id="ddba0-322">Add **Get-AzureRmVM** to the canvas.</span></span>
5. <span data-ttu-id="ddba0-323">Selezionare **Get-AzureRmVM** e quindi **Set di parametri** per visualizzare i set per **Get-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-323">Select **Get-AzureRmVM** and then **Parameter Set** to view the sets for **Get-AzureRmVM**.</span></span>  <span data-ttu-id="ddba0-324">Selezionare il set di parametri **GetVirtualMachineInResourceGroupNameParamSet** .</span><span class="sxs-lookup"><span data-stu-id="ddba0-324">Select the **GetVirtualMachineInResourceGroupNameParamSet** parameter set.</span></span>  <span data-ttu-id="ddba0-325">Si noti che accanto a **ResourceGroupName** e **Name** sono presenti punti esclamativi.</span><span class="sxs-lookup"><span data-stu-id="ddba0-325">Note that **ResourceGroupName** and **Name** have exclamation points next them.</span></span>  <span data-ttu-id="ddba0-326">Indicano che si tratta di parametri obbligatori.</span><span class="sxs-lookup"><span data-stu-id="ddba0-326">This indicates that they are required parameters.</span></span>  <span data-ttu-id="ddba0-327">Si noti anche che i valori previsti per entrambi sono stringhe.</span><span class="sxs-lookup"><span data-stu-id="ddba0-327">Also note both expect string values.</span></span>
6. <span data-ttu-id="ddba0-328">In **Origine dati** per **Nome** selezionare **Input runbook** e quindi selezionare **VMName**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-328">Under **Data source** for **Name**, select **Runbook input** and then select **VMName**.</span></span>  <span data-ttu-id="ddba0-329">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-329">Click **OK**.</span></span>
7. <span data-ttu-id="ddba0-330">In **Origine dati** per **ResourceGroupName** selezionare **Input runbook** e quindi selezionare **ResourceGroupName**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-330">Under **Data source** for **ResourceGroupName**, select **Runbook input** and then select **ResourceGroupName**.</span></span>  <span data-ttu-id="ddba0-331">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-331">Click **OK**.</span></span>
8. <span data-ttu-id="ddba0-332">In **Origine dati** per **Stato** selezionare **Valore costante** e quindi fare clic su **True**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-332">Under **Data source** for **Status**, select **Constant value** and then click  **True**.</span></span>  <span data-ttu-id="ddba0-333">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-333">Click **OK**.</span></span>  
9. <span data-ttu-id="ddba0-334">Creare un collegamento da **Specify Subscription Id** a **Get-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-334">Create a link from **Specify Subscription Id** to **Get-AzureRmVM**.</span></span>
10. <span data-ttu-id="ddba0-335">Nel controllo Libreria espandere **Controllo Runbook** e aggiungere **Codice** all'area di disegno.</span><span class="sxs-lookup"><span data-stu-id="ddba0-335">In the library control, expand **Runbook Control** and add **Code** to the canvas.</span></span>  
11. <span data-ttu-id="ddba0-336">Creare un collegamento da **Get-AzureRmVM** a **Codice**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-336">Create a link from **Get-AzureRmVM** to **Code**.</span></span>  
12. <span data-ttu-id="ddba0-337">Fare clic su **Codice** e nel riquadro Configurazione impostare l'etichetta su **Get Status**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-337">Click **Code** and in the Configuration pane, change label to **Get Status**.</span></span>
13. <span data-ttu-id="ddba0-338">Selezionare il parametro **Codice** per visualizzare il pannello **Editor di codice**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-338">Select **Code** parameter, and the **Code Editor** blade appears.</span></span>  
14. <span data-ttu-id="ddba0-339">Nell'editor di codice incollare il frammento di codice seguente:</span><span class="sxs-lookup"><span data-stu-id="ddba0-339">In the code editor, paste the following snippet of code:</span></span>
    
     ```
     $StatusesJson = $ActivityOutput['Get-AzureRmVM'].StatusesText
     $Statuses = ConvertFrom-Json $StatusesJson
     $StatusOut =""
     foreach ($Status in $Statuses){
     if($Status.Code -eq "Powerstate/running"){$StatusOut = "running"}
     elseif ($Status.Code -eq "Powerstate/deallocated") {$StatusOut = "stopped"}
     }
     $StatusOut
     ```
15. <span data-ttu-id="ddba0-340">Creare un collegamento da **Get Status** a **Start-AzureRmVM**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-340">Create a link from **Get Status** to **Start-AzureRmVM**.</span></span><br> <span data-ttu-id="ddba0-341">![Runbook con il modulo Code](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-341">![Runbook with Code Module](media/automation-first-runbook-graphical/runbook-startvm-get-status.png)</span></span>  
16. <span data-ttu-id="ddba0-342">Selezionare il collegamento e nel riquadro Configurazione impostare **Applica condizione** su **Sì**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-342">Select the link and in the Configuration pane, change **Apply condition** to **Yes**.</span></span>   <span data-ttu-id="ddba0-343">Si noti che il collegamento si trasforma in una linea tratteggiata per indicare che l'attività di destinazione verrà eseguita solo se la condizione restituisce true.</span><span class="sxs-lookup"><span data-stu-id="ddba0-343">Note the link turns to a dashed line indicating that the target activity only runs if the condition resolves to true.</span></span>  
17. <span data-ttu-id="ddba0-344">Per **Espressione condizione**digitare *$ActivityOutput['Get Status'] -eq "Stopped"*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-344">For the **Condition expression**, type *$ActivityOutput['Get Status'] -eq "Stopped"*.</span></span>  <span data-ttu-id="ddba0-345">**Start-AzureRmVM** verrà ora eseguito solo se la macchina virtuale è arrestata.</span><span class="sxs-lookup"><span data-stu-id="ddba0-345">**Start-AzureRmVM** now only runs if the virtual machine is stopped.</span></span>
18. <span data-ttu-id="ddba0-346">Nel controllo Libreria, espandere **Cmdlets** e quindi **Microsoft.PowerShell.Utility**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-346">In the Library control, expand **Cmdlets** and then **Microsoft.PowerShell.Utility**.</span></span>
19. <span data-ttu-id="ddba0-347">Aggiungere **Write-Output** all'area di disegno due volte.</span><span class="sxs-lookup"><span data-stu-id="ddba0-347">Add **Write-Output** to the canvas twice.</span></span><br> <span data-ttu-id="ddba0-348">![Runbook con Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span><span class="sxs-lookup"><span data-stu-id="ddba0-348">![Runbook with Write-Output](media/automation-first-runbook-graphical/runbook-startazurermvm-complete.png)</span></span>
20. <span data-ttu-id="ddba0-349">Nel primo controllo **Write-Output** fare clic su **Parametri** e cambiare il valore di **Etichetta** in *Notify VM Started*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-349">On the first **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Started*.</span></span>
21. <span data-ttu-id="ddba0-350">Per **InputObject** cambiare **Origine dati** in **Espressione PowerShell** e digitare l'espressione *"$VMName successfully started."*</span><span class="sxs-lookup"><span data-stu-id="ddba0-350">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName successfully started."*.</span></span>
22. <span data-ttu-id="ddba0-351">Nel secondo controllo **Write-Output** fare clic su **Parametri** e cambiare il valore di **Etichetta** in *Notify VM Start Failed*</span><span class="sxs-lookup"><span data-stu-id="ddba0-351">On the second **Write-Output** control, click **Parameters** and change the **Label** value to *Notify VM Start Failed*</span></span>
23. <span data-ttu-id="ddba0-352">Per **InputObject** cambiare **Origine dati** in **Espressione PowerShell** e digitare l'espressione *"$VMName could not start."*</span><span class="sxs-lookup"><span data-stu-id="ddba0-352">For **InputObject**, change **Data source** to **PowerShell expression** and type in the expression *"$VMName could not start."*.</span></span>
24. <span data-ttu-id="ddba0-353">Creare un collegamento da **Start-AzureRmVM** a **Notify VM Started** e **Notify VM Start Failed**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-353">Create a link from **Start-AzureRmVM** to **Notify VM Started** and **Notify VM Start Failed**.</span></span>
25. <span data-ttu-id="ddba0-354">Selezionare il collegamento a **Notify VM Started** e impostare **Applica condizione** su **True**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-354">Select the link to **Notify VM Started** and change **Apply condition** to **True**.</span></span>
26. <span data-ttu-id="ddba0-355">Per **Espressione condizione**digitare *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-355">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true*.</span></span>  <span data-ttu-id="ddba0-356">Questo controllo Write-Output verrà ora eseguito solo se la macchina virtuale viene avviata correttamente.</span><span class="sxs-lookup"><span data-stu-id="ddba0-356">This Write-Output control now only runs if the virtual machine is successfully started.</span></span>
27. <span data-ttu-id="ddba0-357">Selezionare il collegamento a **Notify VM Start Failed** e impostare **Applica condizione** su **True**.</span><span class="sxs-lookup"><span data-stu-id="ddba0-357">Select the link to **Notify VM Start Failed** and change **Apply condition** to **True**.</span></span>
28. <span data-ttu-id="ddba0-358">Per **Espressione condizione**digitare *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span><span class="sxs-lookup"><span data-stu-id="ddba0-358">For the **Condition expression**, type *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true*.</span></span>  <span data-ttu-id="ddba0-359">Questo controllo Write-Output verrà ora eseguito solo se la macchina virtuale non viene avviata correttamente.</span><span class="sxs-lookup"><span data-stu-id="ddba0-359">This Write-Output control now only runs if the virtual machine is not successfully started.</span></span>
29. <span data-ttu-id="ddba0-360">Salvare il runbook e aprire il riquadro Test.</span><span class="sxs-lookup"><span data-stu-id="ddba0-360">Save the runbook and open the Test pane.</span></span>
30. <span data-ttu-id="ddba0-361">Avviare il runbook con la macchina virtuale arrestata, che dovrebbe essere avviata.</span><span class="sxs-lookup"><span data-stu-id="ddba0-361">Start the runbook with the virtual machine stopped, and it should start.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ddba0-362">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ddba0-362">Next steps</span></span>
* <span data-ttu-id="ddba0-363">Per altre informazioni sulla creazione grafica, vedere [Creazione grafica in Automazione di Azure](automation-graphical-authoring-intro.md)</span><span class="sxs-lookup"><span data-stu-id="ddba0-363">To learn more about Graphical Authoring, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md)</span></span>
* <span data-ttu-id="ddba0-364">Per iniziare a usare i runbook PowerShell, vedere [Il primo runbook PowerShell](automation-first-runbook-textual-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="ddba0-364">To get started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md)</span></span>
* <span data-ttu-id="ddba0-365">Per iniziare a usare i runbook del flusso di lavoro PowerShell, vedere [Il primo runbook del flusso di lavoro PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="ddba0-365">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>

