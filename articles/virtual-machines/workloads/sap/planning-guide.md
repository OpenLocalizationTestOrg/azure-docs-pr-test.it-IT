---
title: Guida alla pianificazione e all'implementazione di Macchine virtuali di Azure per SAP NetWeaver | Microsoft Docs
description: Guida alla pianificazione e all'implementazione di Macchine virtuali di Azure per SAP NetWeaver
services: virtual-machines-linux,virtual-machines-windows
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: d7c59cc1-b2d0-4d90-9126-628f9c7a5538
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 17b2277de7df2ce534896c73bc9a682b9e72196f
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="azure-virtual-machines-planning-and-implementation-for-sap-netweaver"></a><span data-ttu-id="a2ce5-103">Guida alla pianificazione e all'implementazione di macchine virtuali di Azure per SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="a2ce5-103">Azure Virtual Machines planning and implementation for SAP NetWeaver</span></span>
[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
[1409604]:https://launchpad.support.sap.com/#/notes/1409604
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
[1619720]:https://launchpad.support.sap.com/#/notes/1619720
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
[1928533]:https://launchpad.support.sap.com/#/notes/1928533
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
[1984787]:https://launchpad.support.sap.com/#/notes/1984787
[1999351]:https://launchpad.support.sap.com/#/notes/1999351
[2002167]:https://launchpad.support.sap.com/#/notes/2002167
[2015553]:https://launchpad.support.sap.com/#/notes/2015553
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2069760]:https://launchpad.support.sap.com/#/notes/2069760
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
[2178632]:https://launchpad.support.sap.com/#/notes/2178632
[2191498]:https://launchpad.support.sap.com/#/notes/2191498
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
[2243692]:https://launchpad.support.sap.com/#/notes/2243692

[azure-cli]:../../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:dbms-guide.md
[dbms-guide-2.1]:dbms-guide.md#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f
[dbms-guide-2.2]:dbms-guide.md#c8e566f9-21b7-4457-9f7f-126036971a91
[dbms-guide-2.3]:dbms-guide.md#10b041ef-c177-498a-93ed-44b3441ab152
[dbms-guide-2]:dbms-guide.md#65fa79d6-a85f-47ee-890b-22e794f51a64
[dbms-guide-3]:dbms-guide.md#871dfc27-e509-4222-9370-ab1de77021c3
[dbms-guide-5.5.1]:dbms-guide.md#0fef0e79-d3fe-4ae2-85af-73666a6f7268
[dbms-guide-5.5.2]:dbms-guide.md#f9071eff-9d72-4f47-9da4-1852d782087b
[dbms-guide-5.6]:dbms-guide.md#1b353e38-21b3-4310-aeb6-a77e7c8e81c8
[dbms-guide-5.8]:dbms-guide.md#9053f720-6f3b-4483-904d-15dc54141e30
[dbms-guide-5]:dbms-guide.md#3264829e-075e-4d25-966e-a49dad878737
[dbms-guide-8.4.1]:dbms-guide.md#b48cfe3b-48e9-4f5b-a783-1d29155bd573
[dbms-guide-8.4.2]:dbms-guide.md#23c78d3b-ca5a-4e72-8a24-645d141a3f5d
[dbms-guide-8.4.3]:dbms-guide.md#77cd2fbb-307e-4cbf-a65f-745553f72d2c
[dbms-guide-8.4.4]:dbms-guide.md#f77c1436-9ad8-44fb-a331-8671342de818
[dbms-guide-900-sap-cache-server-on-premises]:dbms-guide.md#642f746c-e4d4-489d-bf63-73e80177a0a8

[dbms-guide-figure-100]:media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:deployment-guide.md
[deployment-guide-2.2]:deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94
[deployment-guide-3.1.2]:deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab
[deployment-guide-3.2]:deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281
[deployment-guide-3.3]:deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2
[deployment-guide-3.4]:deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1
[deployment-guide-3]:deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e
[deployment-guide-4.1]:deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7
[deployment-guide-4.2]:deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e
[deployment-guide-4.3]:deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc
[deployment-guide-4.4.2]:deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542
[deployment-guide-4.4]:deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d
[deployment-guide-4.5.1]:deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4
[deployment-guide-4.5.2]:deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f
[deployment-guide-4.5]:deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca
[deployment-guide-5.1]:deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2
[deployment-guide-5.2]:deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1
[deployment-guide-5.3]:deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8

[deployment-guide-configure-monitoring-scenario-1]:deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b
[deployment-guide-configure-proxy]:deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d
[deployment-guide-figure-100]:media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:deployment-guide.md#figure-11
[deployment-guide-figure-1100]:media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:deployment-guide.md#figure-14
[deployment-guide-figure-1400]:media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:deployment-guide.md#figure-5
[deployment-guide-figure-50]:media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:deployment-guide.md#figure-6
[deployment-guide-figure-600]:media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:deployment-guide.md#figure-7
[deployment-guide-figure-700]:media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b

[deploy-template-cli]:../../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:get-started.md
[getting-started-dbms]:get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:planning-guide.md  
[planning-guide-1.2]:planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff
[planning-guide-11]:planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058
[planning-guide-11.4.1]:planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77
[planning-guide-11.5]:planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f
[planning-guide-2.1]:planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803
[planning-guide-2.2]:planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10
[planning-guide-3.1]:planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a
[planning-guide-3.2.1]:planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358
[planning-guide-3.2.2]:planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560
[planning-guide-3.2.3]:planning-guide.md#18810088-f9be-4c97-958a-27996255c665
[planning-guide-3.2]:planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77
[planning-guide-3.3.2]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92
[planning-guide-5.1.1]:planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53
[planning-guide-5.1.2]:planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c
[planning-guide-5.2.1]:planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef
[planning-guide-5.2.2]:planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3
[planning-guide-5.2]:planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7
[planning-guide-5.3.1]:planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79
[planning-guide-5.3.2]:planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a
[planning-guide-5.4.2]:planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1
[planning-guide-5.5.1]:planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646
[planning-guide-5.5.3]:planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d
[planning-guide-7.1]:planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30
[planning-guide-7]:planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14
[planning-guide-9.1]:planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3
[planning-guide-azure-premium-storage]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92

[planning-guide-figure-100]:media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:media/virtual-machines-shared-sap-planning-guide/planning-monitoring-overview-2502.png
[planning-guide-figure-2600]:media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-2901]:media/virtual-machines-shared-sap-planning-guide/2901-azure-ha-sap-ha-md.png
[planning-guide-figure-300]:media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-3201]:media/virtual-machines-shared-sap-planning-guide/3201-sap-ha-with-sql-md.png
[planning-guide-figure-400]:media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f

[powershell-install-configure]:https://docs.microsoft.com/powershell/azure/install-azurerm-ps
[resource-group-authoring-templates]:../../../resource-group-authoring-templates.md
[resource-group-overview]:../../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../../storage/common/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../../storage/common/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../../storage/common/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../../storage/common/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../../storage/common/storage-premium-storage.md
[storage-redundancy]:../../../storage/common/storage-redundancy.md
[storage-scalability-targets]:../../../storage/common/storage-scalability-targets.md
[storage-use-azcopy]:../../../storage/common/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:virtual-machines-linux-compare-deployment-models.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../../linux/cli-deploy-templates.md
[virtual-machines-deploy-rmtemplates-powershell]:../../virtual-machines-windows-ps-manage.md
[virtual-machines-linux-agent-user-guide]:../../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-windows-capture-image-resource-manager]:../../windows/capture-image.md
[virtual-machines-windows-capture-image]:../../virtual-machines-windows-generalize-vhd.md
[virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture]:../../virtual-machines-windows-generalize-vhd.md
[virtual-machines-linux-configure-raid]:../../linux/configure-raid.md
[virtual-machines-linux-configure-lvm]:../../linux/configure-lvm.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../../linux/suse-create-upload-vhd.md
[virtual-machines-linux-create-upload-vhd-oracle]:../../linux/oracle-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../../linux/update-agent.md
[virtual-machines-manage-availability]:../../linux/manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:virtual-machines-windows-create-powershell.md
[virtual-machines-sizes-linux]:../../linux/sizes.md
[virtual-machines-sizes-windows]:../../windows/sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./../../windows/sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./../../windows/sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./../../windows/sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:../../virtual-machines-windows-upload-image.md
[virtual-machines-windows-tutorial]:../../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics-windows]:../../windows/multiple-nics.md
[virtual-networks-multiple-nics-linux]:../../linux/multiple-nics.md
[virtual-networks-nsg]:../../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../../vpn-gateway/vpn-gateway-site-to-site-create.md
[vpn-gateway-vpn-faq]:../../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../../xplat-cli-azure-resource-manager.md
[capture-image-linux-step-2-create-vm-image]:../../linux/capture-image.md#step-2-create-vm-image

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-rm-include.md)]

<span data-ttu-id="a2ce5-117">Microsoft Azure consente alle aziende di acquisire risorse di calcolo e di archiviazione in poco tempo, senza lunghi cicli di approvvigionamento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-117">Microsoft Azure enables companies to acquire compute and storage resources in minimal time without lengthy procurement cycles.</span></span> <span data-ttu-id="a2ce5-118">Macchine virtuali di Azure consente alle aziende di distribuire applicazioni classiche, ad esempio applicazioni basate su SAP NetWeaver, in Azure e di estenderne l'affidabilità e la disponibilità senza risorse aggiuntive disponibili in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-118">Azure Virtual Machines allow companies to deploy classical applications, like SAP NetWeaver based applications into Azure and extend their reliability and availability without having further resources available on-premises.</span></span> <span data-ttu-id="a2ce5-119">I servizi Macchine virtuali di Azure supportano anche la connettività cross-premise, che consente alle aziende di integrare in modo attivo le Macchine virtuali di Azure nei propri domini locali, i propri cloud privati e nel panorama applicativo del sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-119">Azure Virtual Machine Services also supports cross-premises connectivity, which enables companies to actively integrate Azure Virtual Machines into their on-premises domains, their Private Clouds and their SAP System Landscape.</span></span>
<span data-ttu-id="a2ce5-120">Questo white paper illustra i concetti fondamentali relativi alle Macchine virtuali di Microsoft Azure e fornisce considerazioni dettagliate sulla pianificazione e sull'implementazione per installazioni di SAP NetWeaver in Azure. È quindi necessario leggere questo documento prima di avviare le distribuzioni effettive di SAP NetWeaver in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-120">This white paper describes the fundamentals of Microsoft Azure Virtual Machine and provides a walk-through of planning and implementation considerations for SAP NetWeaver installations in Azure and as such should be the document to read before starting actual deployments of SAP NetWeaver on Azure.</span></span>
<span data-ttu-id="a2ce5-121">Questo documento è complementare alla documentazione relativa all'installazione di SAP e alle note su SAP che rappresentano le risorse principali per le installazioni e le distribuzioni del software SAP nelle piattaforme specifiche.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-121">The paper complements the SAP Installation Documentation and SAP Notes, which represent the primary resources for installations and deployments of SAP software on given platforms.</span></span>

## <a name="summary"></a><span data-ttu-id="a2ce5-122">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="a2ce5-122">Summary</span></span>
<span data-ttu-id="a2ce5-123">Cloud computing è un termine ampiamente diffuso che sta assumendo un'importanza sempre più rilevante nel settore IT, dalle piccole imprese fino alle grandi aziende e alle multinazionali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-123">Cloud Computing is a widely used term, which is gaining more and more importance within the IT industry, from small companies up to large and multinational corporations.</span></span>

<span data-ttu-id="a2ce5-124">Microsoft Azure è la piattaforma di servizi cloud di Microsoft che offre un'ampia gamma di nuove possibilità.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-124">Microsoft Azure is the Cloud Services Platform from Microsoft, which offers a wide spectrum of new possibilities.</span></span> <span data-ttu-id="a2ce5-125">I clienti possono infatti effettuare rapidamente il provisioning e il deprovisioning di applicazioni come servizi sul cloud, senza essere soggetti a eventuali limiti tecnici o di budget.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-125">Now customers are able to rapidly provision and de-provision applications as a service in the cloud, so they are not limited to technical or budgeting restrictions.</span></span> <span data-ttu-id="a2ce5-126">Anziché investire tempo e denaro nell'infrastruttura hardware, le aziende possono concentrarsi sull'applicazione, sui processi aziendali e sui vantaggi per clienti e utenti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-126">Instead of investing time and budget into hardware infrastructure, companies can focus on the application, business processes, and its benefits for customers and users.</span></span>

<span data-ttu-id="a2ce5-127">Grazie ai servizi inclusi in Macchine virtuali di Microsoft Azure, Microsoft offre una piattaforma di infrastruttura distribuita come servizio (IaaS) completa.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-127">With Microsoft Azure Virtual Machine Services, Microsoft offers a comprehensive Infrastructure as a Service (IaaS) platform.</span></span> <span data-ttu-id="a2ce5-128">Le applicazioni basate su SAP NetWeaver sono supportate in Macchine virtuali di Azure (IaaS).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-128">SAP NetWeaver based applications are supported on Azure Virtual Machines (IaaS).</span></span> <span data-ttu-id="a2ce5-129">Questo white paper descrive come pianificare e implementare applicazioni basate su SAP NetWeaver nella piattaforma Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-129">This whitepaper describes how to plan and implement SAP NetWeaver based applications within Microsoft Azure as the platform of choice.</span></span>

<span data-ttu-id="a2ce5-130">Il documento stesso è incentrato su due aspetti principali:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-130">The paper itself focuses on two main aspects:</span></span>

* <span data-ttu-id="a2ce5-131">La prima parte illustra due modelli di distribuzione supportati per applicazioni basate su SAP NetWeaver in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-131">The first part describes two supported deployment patterns for SAP NetWeaver based applications on Azure.</span></span> <span data-ttu-id="a2ce5-132">Descrive anche la gestione generale di Azure, con particolare attenzione alle distribuzioni SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-132">It also describes general handling of Azure with SAP deployments in mind.</span></span>
* <span data-ttu-id="a2ce5-133">La seconda parte illustra in modo dettagliato l'implementazione dei due scenari diversi illustrati nella prima parte.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-133">The second part details implementing the two different scenarios described in the first part.</span></span>

<span data-ttu-id="a2ce5-134">Per altre risorse, vedere il capitolo [Risorse][planning-guide-1.2] in questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-134">For additional resources see chapter [Resources][planning-guide-1.2] in this document.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="a2ce5-135">Definizioni</span><span class="sxs-lookup"><span data-stu-id="a2ce5-135">Definitions upfront</span></span>
<span data-ttu-id="a2ce5-136">Nel documento sono usati i termini seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-136">Throughout the document, we use the following terms:</span></span>

* <span data-ttu-id="a2ce5-137">IaaS (Infrastructure as a Service): infrastruttura distribuita come servizio</span><span class="sxs-lookup"><span data-stu-id="a2ce5-137">IaaS: Infrastructure as a Service</span></span>
* <span data-ttu-id="a2ce5-138">PaaS (Platform as a Service): piattaforma distribuita come servizio</span><span class="sxs-lookup"><span data-stu-id="a2ce5-138">PaaS: Platform as a Service</span></span>
* <span data-ttu-id="a2ce5-139">SaaS (Software as a Service): software come un servizio</span><span class="sxs-lookup"><span data-stu-id="a2ce5-139">SaaS: Software as a Service</span></span>
* <span data-ttu-id="a2ce5-140">ARM: Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="a2ce5-140">ARM: Azure Resource Manager</span></span>
* <span data-ttu-id="a2ce5-141">Componente SAP: singola applicazione SAP, ad esempio ECC, BW, Solution Manager o EP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-141">SAP Component: an individual SAP application such as ECC, BW, Solution Manager, or EP.</span></span>  <span data-ttu-id="a2ce5-142">I componenti SAP possono essere basati su tecnologie ABAP o Java tradizionali o su un'applicazione non basata su NetWeaver, ad esempio Business Objects.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-142">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="a2ce5-143">Ambiente SAP: raggruppamento logico di uno o più componenti SAP per una funzione aziendale, ad esempio sviluppo, servizio di controllo della qualità, formazione, ripristino di emergenza o produzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-143">SAP Environment: one or more SAP components logically grouped to perform a business function such as Development, QAS, Training, DR, or Production.</span></span>
* <span data-ttu-id="a2ce5-144">Panorama applicativo SAP: fa riferimento a tutte le risorse SAP in un panorama applicativo IT del cliente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-144">SAP Landscape: This refers to the entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="a2ce5-145">Il panorama applicativo SAP include tutti gli ambienti di produzione e non produzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-145">The SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="a2ce5-146">Sistema SAP: combinazione del livello DBMS e del livello dell’applicazione di un sistema di sviluppo SAP ERP, un sistema di test SAP BW, un sistema di produzione SAP CRM e così via.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-146">SAP System: The combination of DBMS layer and application layer of, for example, an SAP ERP development system, SAP BW test system, SAP CRM production system, etc..</span></span> <span data-ttu-id="a2ce5-147">Nelle distribuzioni di Azure non è supportata la divisione di questi due livelli tra l'istanza locale e Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-147">In Azure deployments, it is not supported to divide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="a2ce5-148">Un sistema SAP deve quindi essere distribuito o in locale o in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-148">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="a2ce5-149">È tuttavia possibile distribuire i diversi sistemi di un panorama applicativo SAP in Azure o in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-149">However, you can deploy the different systems of an SAP landscape into either Azure or on-premises.</span></span> <span data-ttu-id="a2ce5-150">È ad esempio possibile distribuire i sistemi di sviluppo e test SAP CRM in Azure e il sistema di produzione SAP CRM in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-150">For example, you could deploy the SAP CRM development and test systems in Azure but the SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="a2ce5-151">Distribuzione solo cloud: una distribuzione in cui la sottoscrizione di Azure non è connessa tramite una connessione da sito a sito o ExpressRoute all'infrastruttura di rete locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-151">Cloud-Only deployment: A deployment where the Azure subscription is not connected via a site-to-site or ExpressRoute connection to the on-premises network infrastructure.</span></span> <span data-ttu-id="a2ce5-152">Nella documentazione comune su Azure questi tipi di distribuzioni vengono definiti anche distribuzioni "solo cloud".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-152">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="a2ce5-153">L'accesso alle macchine virtuali distribuite con questo metodo viene effettuato tramite Internet e un indirizzo IP pubblico e/o un nome DNS pubblico assegnato alle macchine virtuali in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-153">Virtual Machines deployed with this method are accessed through the internet and a public IP address and/or a public DNS name assigned to the VMs in Azure.</span></span> <span data-ttu-id="a2ce5-154">Per Microsoft Windows l'istanza locale di Active Directory (AD) e DNS non vengono estesi ad Azure in questi tipi di distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-154">For Microsoft Windows the on-premises Active Directory (AD) and DNS is not extended to Azure in these types of deployments.</span></span> <span data-ttu-id="a2ce5-155">Le macchine virtuali non sono quindi parte dell'istanza locale di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-155">Hence the VMs are not part of the on-premises Active Directory.</span></span> <span data-ttu-id="a2ce5-156">Queste considerazioni sono applicabili anche alle implementazioni Linux che usano, ad esempio, OpenLDAP + Kerberos.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-156">Same is true for Linux implementations using, for example, OpenLDAP + Kerberos.</span></span>

> [!NOTE]
> <span data-ttu-id="a2ce5-157">La distribuzione solo cloud in questo documento viene definita come panorama applicativo SAP completo e viene eseguita esclusivamente in Azure senza estensione di Active Directory/OpenLDAP o risoluzione dei nomi da locale a cloud pubblico.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-157">Cloud-Only deployment in this document is defined as complete SAP landscapes are running exclusively in Azure without extension of Active Directory / OpenLDAP  or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="a2ce5-158">Le configurazioni solo cloud non sono supportate per sistemi SAP di produzione o per configurazioni in cui è necessario usare SAP STMS o altre risorse locali tra i sistemi SAP ospitati in Azure e le risorse che risiedono in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-158">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need to be used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
>
>

* <span data-ttu-id="a2ce5-159">Cross-premise: indica uno scenario in cui le VM vengono distribuite in una sottoscrizione di Azure con connettività da sito a sito, multisito o ExpressRoute tra i data center locali e Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-159">Cross-premises: Describes a scenario where VMs are deployed to an Azure subscription that has site-to-site, multi-site, or ExpressRoute connectivity between the on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="a2ce5-160">Nella documentazione comune su Azure, questi tipi di distribuzioni vengono definiti anche scenari cross-premise.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-160">In common Azure documentation, these kinds of deployments are also described as cross-premises scenarios.</span></span> <span data-ttu-id="a2ce5-161">La connessione consente di estendere i domini locali, l'istanza locale di Active Directory/OpenLDAP e il DNS locale in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-161">The reason for the connection is to extend on-premises domains, on-premises Active Directory/OpenLDAP, and on-premises DNS into Azure.</span></span> <span data-ttu-id="a2ce5-162">Il panorama applicativo locale viene esteso alle risorse di Azure della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-162">The on-premises landscape is extended to the Azure assets of the subscription.</span></span> <span data-ttu-id="a2ce5-163">Questa estensione consente alle macchine virtuali di fare parte del dominio locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-163">Having this extension, the VMs can be part of the on-premises domain.</span></span> <span data-ttu-id="a2ce5-164">Gli utenti di dominio del dominio locale possono accedere ai server e possono eseguire servizi in queste VM, ad esempio i servizi DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-164">Domain users of the on-premises domain can access the servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="a2ce5-165">La comunicazione e la risoluzione dei nomi tra VM distribuite in locale e VM distribuite in Azure sono consentite.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-165">Communication and name resolution between VMs deployed on-premises and Azure deployed VMs is possible.</span></span> <span data-ttu-id="a2ce5-166">Questo è lo scenario in cui si prevede che verrà distribuita la maggior parte delle risorse SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-166">This is the scenario we expect most SAP assets to be deployed in.</span></span> <span data-ttu-id="a2ce5-167">Per ulteriori informazioni, vedere [questo][vpn-gateway-cross-premises-options] articolo e [questo][vpn-gateway-site-to-site-create].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-167">For more information, see [this][vpn-gateway-cross-premises-options] article and [this][vpn-gateway-site-to-site-create].</span></span>

> [!NOTE]
> <span data-ttu-id="a2ce5-168">Le distribuzioni cross-premise di sistemi SAP in cui le macchine virtuali di Azure che eseguono sistemi SAP sono membri di un dominio locale sono supportate per i sistemi SAP di produzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-168">Cross-premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="a2ce5-169">Le configurazioni cross-premise sono supportate per la distribuzione parziale o completa di panorami applicativi SAP in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-169">Cross-premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="a2ce5-170">Anche l'esecuzione del panorama applicativo SAP completo in Azure richiede che queste VM siano parte di un dominio locale e di ADS/OpenLDAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-170">Even running the complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS/OpenLDAP.</span></span> <span data-ttu-id="a2ce5-171">In versioni precedenti della documentazione, sono stati illustrati scenari IT ibridi, in cui il termine "ibrido" indica la presenza di una connettività cross-premise tra l'istanza locale e Azure,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-171">In former versions of the documentation, we talked about Hybrid-IT scenarios, where the term ‘Hybrid’ is rooted in the fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="a2ce5-172">oltre al fatto che le macchine virtuali in Azure sono parte dell'istanza locale di Active Directory/OpenLDAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-172">Plus, the fact that the VMs in Azure are part of the on-premises Active Directory / OpenLDAP.</span></span>
>
>

<span data-ttu-id="a2ce5-173">Alcuni documenti Microsoft descrivono scenari cross-premise in modo leggermente diverso, in particolare per configurazioni DBMS a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-173">Some Microsoft documentation describes cross-premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="a2ce5-174">Nel caso dei documenti correlati a SAP, lo scenario è essenzialmente basato sulla presenza di connettività da sito a sito o privata (ExpressRoute) e sul fatto che il panorama applicativo SAP è distribuito tra l'istanza locale e Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-174">In the case of the SAP-related documents, the cross-premises scenario just boils down to having a site-to-site or private (ExpressRoute) connectivity and the fact that the SAP landscape is distributed between on-premises and Azure.</span></span>  

### <span data-ttu-id="a2ce5-175"><a name="e55d1e22-c2c8-460b-9897-64622a34fdff"></a>Risorse</span><span class="sxs-lookup"><span data-stu-id="a2ce5-175"><a name="e55d1e22-c2c8-460b-9897-64622a34fdff"></a>Resources</span></span>
<span data-ttu-id="a2ce5-176">Per informazioni sull'argomento relativo alle distribuzioni SAP in Azure sono disponibili le seguenti guide aggiuntive:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-176">The following additional guides are available for the topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="a2ce5-177">[Guida alla pianificazione e all'implementazione di Macchine virtuali di Azure per SAP NetWeaver (il presente documento)][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-177">[Azure Virtual Machines planning and implementation for SAP NetWeaver (this document)][planning-guide]</span></span>
* <span data-ttu-id="a2ce5-178">[Distribuzione di Macchine virtuali di Azure per SAP NetWeaver][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-178">[Azure Virtual Machines deployment for SAP NetWeaver][deployment-guide]</span></span>
* <span data-ttu-id="a2ce5-179">[Distribuzione DBMS di Macchine virtuali di Azure per SAP NetWeaver][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-179">[Azure Virtual Machines DBMS deployment for SAP NetWeaver][dbms-guide]</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a2ce5-180">Dove possibile, viene usato un collegamento alla Guida all'installazione SAP di riferimento. Per informazioni di riferimento su InstGuide-01, vedere <http://service.sap.com/instguides>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-180">Wherever possible a link to the referring SAP Installation Guide is used (Reference InstGuide-01, see <http://service.sap.com/instguides>).</span></span> <span data-ttu-id="a2ce5-181">Per quanto riguarda i prerequisiti e il processo di installazione, è necessario leggere sempre con attenzione la Guida all'installazione di SAP NetWeaver, perché il presente documento illustra solo attività specifiche per i sistemi SAP NetWeaver installati in Macchine virtuali di Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-181">When it comes to the prerequisites and installation process, the SAP NetWeaver Installation Guides should always be read carefully, as this document only covers specific tasks for SAP NetWeaver systems installed in a Microsoft Azure Virtual Machine.</span></span>
>
>

<span data-ttu-id="a2ce5-182">Le note seguenti su SAP sono correlate all'argomento relativo a SAP in Azure:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-182">The following SAP Notes are related to the topic of SAP on Azure:</span></span>

| <span data-ttu-id="a2ce5-183">Numero della nota</span><span class="sxs-lookup"><span data-stu-id="a2ce5-183">Note number</span></span> | <span data-ttu-id="a2ce5-184">Titolo</span><span class="sxs-lookup"><span data-stu-id="a2ce5-184">Title</span></span> |
| --- | --- |
| <span data-ttu-id="a2ce5-185">[1928533]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-185">[1928533]</span></span> |<span data-ttu-id="a2ce5-186">Applicazioni SAP in Azure: dimensioni e prodotti supportati</span><span class="sxs-lookup"><span data-stu-id="a2ce5-186">SAP Applications on Azure: Supported Products and Sizing</span></span> |
| <span data-ttu-id="a2ce5-187">[2015553]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-187">[2015553]</span></span> |<span data-ttu-id="a2ce5-188">SAP in Microsoft Azure: prerequisiti per il supporto</span><span class="sxs-lookup"><span data-stu-id="a2ce5-188">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="a2ce5-189">[1999351]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-189">[1999351]</span></span> |<span data-ttu-id="a2ce5-190">Risoluzione dei problemi del monitoraggio avanzato di Azure per SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-190">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="a2ce5-191">[2178632]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-191">[2178632]</span></span> |<span data-ttu-id="a2ce5-192">Metriche chiave del monitoraggio per SAP in Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-192">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="a2ce5-193">[1409604]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-193">[1409604]</span></span> |<span data-ttu-id="a2ce5-194">Virtualizzazione in Windows: monitoraggio avanzato</span><span class="sxs-lookup"><span data-stu-id="a2ce5-194">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="a2ce5-195">[2191498]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-195">[2191498]</span></span> |<span data-ttu-id="a2ce5-196">SAP in Linux con Azure: monitoraggio avanzato</span><span class="sxs-lookup"><span data-stu-id="a2ce5-196">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="a2ce5-197">[2243692]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-197">[2243692]</span></span> |<span data-ttu-id="a2ce5-198">Linux in una macchina virtuale di Microsoft Azure (IaaS): problemi delle licenze SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-198">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="a2ce5-199">[1984787]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-199">[1984787]</span></span> |<span data-ttu-id="a2ce5-200">SUSE LINUX Enterprise Server 12: note di installazione</span><span class="sxs-lookup"><span data-stu-id="a2ce5-200">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="a2ce5-201">[2002167]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-201">[2002167]</span></span> |<span data-ttu-id="a2ce5-202">Red Hat Enterprise Linux 7. x: installazione e aggiornamento</span><span class="sxs-lookup"><span data-stu-id="a2ce5-202">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |
| <span data-ttu-id="a2ce5-203">[2069760]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-203">[2069760]</span></span> |<span data-ttu-id="a2ce5-204">Installazione e aggiornamento di Oracle Linux 7.x SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-204">Oracle Linux 7.x SAP Installation and Upgrade</span></span> |
| <span data-ttu-id="a2ce5-205">[1597355]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-205">[1597355]</span></span> |<span data-ttu-id="a2ce5-206">Raccomandazione sullo spazio di scambio per Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-206">Swap-space recommendation for Linux</span></span> |

<span data-ttu-id="a2ce5-207">Leggere anche il [wiki su SCN](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) contenente tutte le note SAP per Linux.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-207">Also read the [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="a2ce5-208">Le limitazioni predefinite generali e le limitazioni massime delle sottoscrizioni di Azure sono disponibili in [questo articolo][azure-subscription-service-limits-subscription].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-208">General default limitations and maximum limitations of Azure subscriptions can be found in [this article][azure-subscription-service-limits-subscription].</span></span>

## <a name="possible-scenarios"></a><span data-ttu-id="a2ce5-209">Scenari possibili</span><span class="sxs-lookup"><span data-stu-id="a2ce5-209">Possible Scenarios</span></span>
<span data-ttu-id="a2ce5-210">SAP è spesso considerata una delle applicazioni più cruciali nelle aziende.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-210">SAP is often seen as one of the most mission-critical applications within enterprises.</span></span> <span data-ttu-id="a2ce5-211">L'architettura e le operazioni di queste applicazioni sono in genere molto complesse ed è quindi molto importante assicurare il rispetto dei requisiti per la disponibilità e le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-211">The architecture and operations of these applications is mostly very complex and ensuring that you meet requirements on availability and performance is important.</span></span>

<span data-ttu-id="a2ce5-212">Le aziende devono quindi valutare con attenzione le applicazioni da eseguire in un ambiente di tipo cloud pubblico, indipendentemente dal provider di servizi cloud scelto.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-212">Thus enterprises have to think carefully about which applications can be run in a public cloud environment, independent of the chosen cloud provider.</span></span>

<span data-ttu-id="a2ce5-213">Ecco un elenco dei possibili tipi di sistema per la distribuzione di applicazioni basate su SAP NetWeaver in ambienti cloud pubblico:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-213">Possible system types for deploying SAP NetWeaver based applications within public cloud environments are listed below:</span></span>

1. <span data-ttu-id="a2ce5-214">Sistemi di produzione di medie dimensioni</span><span class="sxs-lookup"><span data-stu-id="a2ce5-214">Medium-sized production systems</span></span>
2. <span data-ttu-id="a2ce5-215">Sistemi di sviluppo</span><span class="sxs-lookup"><span data-stu-id="a2ce5-215">Development systems</span></span>
3. <span data-ttu-id="a2ce5-216">Sistemi di test</span><span class="sxs-lookup"><span data-stu-id="a2ce5-216">Testing systems</span></span>
4. <span data-ttu-id="a2ce5-217">Sistemi prototipo</span><span class="sxs-lookup"><span data-stu-id="a2ce5-217">Prototype systems</span></span>
5. <span data-ttu-id="a2ce5-218">Sistemi di apprendimento/dimostrativi</span><span class="sxs-lookup"><span data-stu-id="a2ce5-218">Learning / Demonstration systems</span></span>

<span data-ttu-id="a2ce5-219">Per distribuire correttamente i sistemi SAP in IaaS di Azure o IaaS generica, è importate comprendere le differenze significative tra le offerte di outsourcer o provider di servizi di hosting tradizionali e le offerte IaaS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-219">In order to successfully deploy SAP systems into either Azure IaaS or IaaS in general, it is important to understand the significant differences between the offerings of traditional outsourcers or hosters and IaaS offerings.</span></span> <span data-ttu-id="a2ce5-220">Mentre il provider di servizi di hosting o l'outsourcer tradizionale adatterà l'infrastruttura (rete, risorse di archiviazione e tipo di server) al carico di lavoro che un cliente vuole ospitare, il cliente è invece responsabile della scelta del carico di lavoro appropriato per le distribuzioni IaaS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-220">Whereas the traditional hoster or outsourcer adapts infrastructure (network, storage and server type) to the workload a customer wants to host, it is instead the customer’s responsibility to choose the right workload for IaaS deployments.</span></span>

<span data-ttu-id="a2ce5-221">Il cliente deve prima di tutto verificare gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-221">As a first step, customers need to verify the following items:</span></span>

* <span data-ttu-id="a2ce5-222">I tipi di macchine virtuali di Azure supportati da SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-222">The SAP supported VM types of Azure</span></span>
* <span data-ttu-id="a2ce5-223">I prodotti o le versioni in Azure supportati da SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-223">The SAP supported products/releases on Azure</span></span>
* <span data-ttu-id="a2ce5-224">I sistemi operativi e le versioni DBMS per le versioni SAP specifiche in Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-224">The supported OS and DBMS releases for the specific SAP releases in Azure</span></span>
* <span data-ttu-id="a2ce5-225">La velocità effettiva di SAPS fornita da diversi SKU di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-225">SAPS throughput provided by different Azure SKUs</span></span>

<span data-ttu-id="a2ce5-226">Le risposte a queste domande sono disponibili nella nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-226">The answers to these questions can be read in SAP Note [1928533].</span></span>

<span data-ttu-id="a2ce5-227">Come secondo passaggio è necessario confrontare le risorse di Azure e le limitazioni per la larghezza di banda con l'utilizzo effettivo delle risorse dei sistemi locali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-227">As a second step, Azure resource and bandwidth limitations need to be compared to actual resource consumption of on-premises systems.</span></span> <span data-ttu-id="a2ce5-228">I clienti devono quindi acquisire familiarità con le diverse funzionalità dei tipi di Azure supportati con SAP in queste aree:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-228">Therefore, customers need to be familiar with the different capabilities of the Azure types supported with SAP in the area of:</span></span>

* <span data-ttu-id="a2ce5-229">Risorse di CPU e di memoria per diversi tipi di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="a2ce5-229">CPU and memory resources of different VM types and</span></span>
* <span data-ttu-id="a2ce5-230">Larghezza di banda IOPS per diversi tipi di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="a2ce5-230">IOPS bandwidth of different VM types and</span></span>
* <span data-ttu-id="a2ce5-231">Funzionalità di rete dei diversi tipi di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="a2ce5-231">Network capabilities of different VM types.</span></span>

<span data-ttu-id="a2ce5-232">La maggior parte di quei dati si trova [qui (Linux)][virtual-machines-sizes-linux] e [qui (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-232">Most of that data can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="a2ce5-233">Occorre ricordare che i limiti elencati nel collegamento precedente sono i limiti superiori.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-233">Keep in mind that the limits listed in the link above are upper limits.</span></span> <span data-ttu-id="a2ce5-234">Questo non significa che i limiti per qualsiasi risorsa, ad esempio IOPS, possono essere forniti in qualsiasi circostanza.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-234">It does not mean that the limits for any of the resources, for example IOPS can be provided under all circumstances.</span></span> <span data-ttu-id="a2ce5-235">Le eccezioni sono tuttavia costituite dalle risorse di CPU e di memoria di un tipo di VM selezionato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-235">The exceptions though are the CPU and memory resources of a chosen VM type.</span></span> <span data-ttu-id="a2ce5-236">Per i tipi di VM supportati da SAP, le risorse di CPU e memoria vengono riservate e risultano quindi disponibili in qualsiasi momento per l'utilizzo nella VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-236">For the VM types supported by SAP, the CPU and memory resources are reserved and as such available at any point in time for consumption within the VM.</span></span>

<span data-ttu-id="a2ce5-237">La piattaforma Microsoft Azure, analogamente ad altre piattaforme IaaS, è una piattaforma multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-237">The Microsoft Azure platform like other IaaS platforms is a multi-tenant platform.</span></span> <span data-ttu-id="a2ce5-238">Le risorse di archiviazione, di rete e di altro tipo sono quindi condivise tra i tenant.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-238">This means that storage, network, and other resources are shared between tenants.</span></span> <span data-ttu-id="a2ce5-239">Una logica intelligente di limitazioni e quote viene usata per impedire a un tenant di influire drasticamente sulle prestazioni di un altro tenant.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-239">Intelligent throttling and quota logic is used to prevent one tenant from impacting the performance of another tenant (noisy neighbor) in a drastic way.</span></span> <span data-ttu-id="a2ce5-240">Anche se la logica in Azure prova a limitare le varianze rilevate nella larghezza di banda, le piattaforme con un livello elevato di condivisione tendono a presentare varianze per la disponibilità di risorse/larghezza di banda superiori a quelle usuali nelle distribuzioni locali di molti clienti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-240">Though logic in Azure tries to keep variances in bandwidth experienced small, highly shared platforms tend to introduce larger variances in resource/bandwidth availability than many customers are used to in their on-premises deployments.</span></span> <span data-ttu-id="a2ce5-241">È quindi possibile che si rilevino diversi livelli di larghezza di banda rispetto alla rete o alle operazioni di I/O di archiviazione, ovvero volumi e latenza, da un minuto all'altro.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-241">As a result, you might experience different levels of bandwidth regarding networking or storage I/O (the volume as well as latency) from minute to minute.</span></span> <span data-ttu-id="a2ce5-242">Occorre tenere in considerazione la probabilità che un sistema SAP in Azure presenti varianze superiori rispetto a un sistema locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-242">The probability that an SAP system on Azure could experience larger variances than in an on-premises system needs to be taken into account.</span></span>

<span data-ttu-id="a2ce5-243">L'ultimo passaggio consiste nel valutare i requisiti di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-243">A last step is to evaluate availability requirements.</span></span> <span data-ttu-id="a2ce5-244">Può accadere che sia necessario aggiornare l'infrastruttura sottostante di Azure e che sia necessario il riavvio degli host che eseguono le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-244">It can happen, that the underlying Azure infrastructure needs to get updated and requires the hosts running VMs to be rebooted.</span></span> <span data-ttu-id="a2ce5-245">In questi casi vengono arrestate e riavviate anche le macchine virtuali in esecuzione in questi host.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-245">In these cases, VMs running on those hosts would be shut down and restarted as well.</span></span> <span data-ttu-id="a2ce5-246">Questi interventi di manutenzione vengono eseguiti al di fuori dei regolari orari di ufficio per una determinata area, ma la potenziale finestra di poche ore durante cui si verifica un riavvio è relativamente ampia.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-246">The timing of such maintenance is done during non-core business hours for a particular region but the potential window of a few hours during which a restart will occur is relatively wide.</span></span> <span data-ttu-id="a2ce5-247">La piattaforma Azure include varie tecnologie che è possibile configurare per alleviare l'impatto di questi aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-247">There are various technologies within the Azure platform that can be configured to mitigate some or all of the impact of such updates.</span></span> <span data-ttu-id="a2ce5-248">Sono stati progettati miglioramenti futuri specifici per la piattaforma Azure, DBMS e l'applicazione SAP, in modo da ridurre al minimo l'impatto di questi riavvii.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-248">Future enhancements of the Azure platform, DBMS, and SAP application are designed to minimize the impact of such restarts.</span></span>

<span data-ttu-id="a2ce5-249">Per distribuire correttamente un sistema SAP in Azure, è necessario che i sistemi operativi dei sistemi SAP locali, il database e le applicazioni SAP siano visualizzati nella matrice di supporto di Azure per SAP, che siano conformi alle risorse che l'infrastruttura di Azure può fornire e che siano compatibili con i Contratti di servizio relativi alla disponibilità offerti da Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-249">In order to successfully deploy an SAP system onto Azure, the on-premises SAP system(s) Operating System, Database, and SAP applications must appear on the SAP Azure support matrix, fit within the resources the Azure infrastructure can provide and which can work with the Availability SLAs Microsoft Azure offers.</span></span> <span data-ttu-id="a2ce5-250">Quando questi sistemi vengono identificati, è necessario scegliere uno dei due scenari di distribuzione seguenti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-250">As those systems are identified, you need to decide on one of the following two deployment scenarios.</span></span>

### <span data-ttu-id="a2ce5-251"><a name="1625df66-4cc6-4d60-9202-de8a0b77f803"></a>Solo cloud: distribuzioni di macchine virtuali in Azure senza dipendenze dalla rete locale dei clienti</span><span class="sxs-lookup"><span data-stu-id="a2ce5-251"><a name="1625df66-4cc6-4d60-9202-de8a0b77f803"></a>Cloud-Only - Virtual Machine deployments into Azure without dependencies on the on-premises customer network</span></span>
![Singola macchina virtuale con scenario dimostrativo o di formazione SAP distribuito in Azure][planning-guide-figure-100]

<span data-ttu-id="a2ce5-253">Questo è lo scenario tipico per sistemi di formazione o dimostrativi, in cui tutti i componenti software SAP e non SAP vengono installati in una singola VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-253">This scenario is typical for trainings or demo systems, where all the components of SAP and non-SAP software are installed within a single VM.</span></span> <span data-ttu-id="a2ce5-254">I sistemi SAP di produzione non sono supportati in questo scenario di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-254">Production SAP systems are not supported in this deployment scenario.</span></span> <span data-ttu-id="a2ce5-255">Questo scenario rispetta in genere i requisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-255">In general, this scenario meets the following requirements:</span></span>

* <span data-ttu-id="a2ce5-256">Le macchine virtuali stesse sono accessibili tramite la rete pubblica.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-256">The VMs themselves are accessible over the public network.</span></span> <span data-ttu-id="a2ce5-257">La connettività di rete diretta per le applicazioni in esecuzione nelle VM con la rete locale dell'azienda proprietaria dei contenuti dimostrativi o di formazione oppure del cliente non è necessaria.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-257">Direct network connectivity for the applications running within the VMs to the on-premises network of either the company owning the demos or trainings content or the customer is not necessary.</span></span>
* <span data-ttu-id="a2ce5-258">Nel caso di più macchine virtuali che rappresentano lo scenario di formazione o dimostrativo, le comunicazioni di rete e la risoluzione dei nomi devono essere abilitate tra le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-258">In case of multiple VMs representing the trainings or demo scenario, network communications and name resolution needs to work between the VMs.</span></span> <span data-ttu-id="a2ce5-259">Le comunicazioni tra il set di macchine virtuali devono essere tuttavia isolate, in modo che sia possibile distribuire più set di VM affiancati, senza che si verifichino interferenze.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-259">But communications between the set of VMs need to be isolated so that several sets of VMs can be deployed side by side without interference.</span></span>  
* <span data-ttu-id="a2ce5-260">La connettività Internet è necessaria per consentire all'utente finale di accedere in modalità remota alle VM ospitate in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-260">Internet connectivity is required for the end user to remote login into to the VMs hosted in Azure.</span></span> <span data-ttu-id="a2ce5-261">In base al sistema operativo guest, è necessario usare Servizi terminal/Servizi Desktop remoto o VNC/ssh per accedere alla macchina virtuale per completare le attività di formazione o eseguire le demo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-261">Depending on the guest OS, Terminal Services/RDS or VNC/ssh is used to access the VM to either fulfill the training tasks or perform the demos.</span></span> <span data-ttu-id="a2ce5-262">Se è possibile esporre anche le porte SAP 3200, 3300 e 3600, l'istanza dell'applicazione SAP risulterà accessibile da qualsiasi computer desktop connesso a Internet.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-262">If SAP ports such as 3200, 3300 & 3600 can also be exposed the SAP application instance can be accessed from any Internet connected desktop.</span></span>
* <span data-ttu-id="a2ce5-263">I sistemi SAP e le macchine virtuali rappresentano uno scenario autonomo in Azure che richiede solo la connettività Internet pubblica per l'accesso degli utenti finali e non richiede una connessione ad altre VM in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-263">The SAP system(s) (and VM(s)) represent a standalone scenario in Azure, which only requires public internet connectivity for end-user access and does not require a connection to other VMs in Azure.</span></span>
* <span data-ttu-id="a2ce5-264">SAP GUI e un browser vengono installati e vengono eseguiti direttamente nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-264">SAPGUI and a browser are installed and run directly on the VM.</span></span>
* <span data-ttu-id="a2ce5-265">È necessario eseguire un ripristino rapido dello stato originale della VM e una nuova distribuzione di tale stato originale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-265">A fast reset of a VM to the original state and new deployment of that original state again is required.</span></span>
* <span data-ttu-id="a2ce5-266">Nel caso di scenari dimostrativi e di formazione realizzati in più macchine virtuali, è necessario avere un'istanza di Active Directory/OpenLDAP e/o il servizio DNS per ogni set di VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-266">In the case of demo and training scenarios, which are realized in multiple VMs, an Active Directory / OpenLDAP and/or DNS service is required for each set of VMs.</span></span>

![Gruppo di VM che rappresenta un scenario dimostrativo o di formazione in un servizio cloud di Azure][planning-guide-figure-200]

<span data-ttu-id="a2ce5-268">È importante ricordare che le macchine virtuali in ogni set devono essere distribuite in parallelo e che i nomi delle macchine virtuali in ogni set sono uguali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-268">It is important to keep in mind that the VM(s) in each of the sets need to be deployed in parallel, where the VM names in each of the set are the same.</span></span>

### <span data-ttu-id="a2ce5-269"><a name="f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10"></a>Cross-premise: distribuzione di una o più VM SAP in Azure che devono essere completamente integrate con la rete locale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-269"><a name="f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10"></a>Cross-Premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network</span></span>
![VPN con connettività da sito a sito (cross-premise)][planning-guide-figure-300]

<span data-ttu-id="a2ce5-271">Questo scenario è uno scenario cross-premise con molti modelli di distribuzione possibili.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-271">This scenario is a cross-premises scenario with many possible deployment patterns.</span></span> <span data-ttu-id="a2ce5-272">Può essere descritto semplicemente come l'esecuzione di alcune parti del panorama applicativo SAP in locale e di altre parti del panorama applicativo SAP in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-272">It can be described as simply as running some parts of the SAP landscape on-premises and other parts of the SAP landscape on Azure.</span></span> <span data-ttu-id="a2ce5-273">Tutti gli aspetti dell'esecuzione di parte dei componenti SAP in Azure devono essere trasparenti per gli utenti finali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-273">All aspects of the fact that part of the SAP components are running on Azure should be transparent for end users.</span></span> <span data-ttu-id="a2ce5-274">Il sistema STMS (SAP Correction and Transport System), i servizi di comunicazione RFC, stampa e sicurezza, ad esempio l'accesso Single Sign-On, e così via funzioneranno perfettamente per i sistemi SAP in esecuzione in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-274">Hence the SAP Transport Correction System (STMS), RFC Communication, Printing, Security (like SSO), etc. work seamlessly for the SAP systems running on Azure.</span></span> <span data-ttu-id="a2ce5-275">Lo scenario cross-premise tuttavia descrive anche uno scenario in cui il panorama applicativo SAP completo viene eseguito in Azure con l'estensione del dominio e del DNS del cliente in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-275">But the cross-premises scenario also describes a scenario where the complete SAP landscape runs in Azure with the customer’s domain and DNS extended into Azure.</span></span>

> [!NOTE]
> <span data-ttu-id="a2ce5-276">Questo è lo scenario di distribuzione supportato per l'esecuzione di sistemi SAP di produzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-276">This is the deployment scenario, which is supported for running productive SAP systems.</span></span>
>
>

<span data-ttu-id="a2ce5-277">Per altre informazioni sulla connessione della rete locale a Microsoft Azure, vedere [questo articolo][vpn-gateway-create-site-to-site-rm-powershell].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-277">Read [this article][vpn-gateway-create-site-to-site-rm-powershell] for more information on how to connect your on-premises network to Microsoft Azure</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a2ce5-278">Quando si esaminano gli scenari cross-premise tra Azure e le distribuzioni locali dei clienti, si esamina la granularità degli interi sistemi SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-278">When we are talking about cross-premises scenarios between Azure and on-premises customer deployments, we are looking at the granularity of whole SAP systems.</span></span> <span data-ttu-id="a2ce5-279">Ecco gli scenari *non supportati* per gli scenari cross-premise:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-279">Scenarios which are *not supported* for cross-premises scenarios are:</span></span>
>
> * <span data-ttu-id="a2ce5-280">Esecuzione di livelli diversi di applicazioni SAP in diversi metodi di distribuzione,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-280">Running different layers of SAP applications in different deployment methods.</span></span> <span data-ttu-id="a2ce5-281">ad esempio, esecuzione del livello DBMS in locale mentre il livello dell'applicazione SAP nelle VM è distribuito come VM di Azure o viceversa.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-281">For example running the DBMS layer on-premises, but the SAP application layer in VMs deployed as Azure VMs or vice versa.</span></span>
> * <span data-ttu-id="a2ce5-282">Alcuni componenti di un livello SAP in Azure e altri in locale,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-282">Some components of an SAP layer in Azure and some on-premises.</span></span> <span data-ttu-id="a2ce5-283">ad esempio, suddivisione di istanze del livello dell'applicazione SAP tra istanza locale e VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-283">For example splitting Instances of the SAP application layer between on-premises and Azure VMs.</span></span>
> * <span data-ttu-id="a2ce5-284">La distribuzione di macchine virtuali che eseguono istanze SAP di un sistema in più aree di Azure non è supportata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-284">Distribution of VMs running SAP instances of one system over multiple Azure Regions is not supported.</span></span>
>
> <span data-ttu-id="a2ce5-285">Il motivo alla base di queste limitazioni è costituito dal requisito relativo a una rete con latenza molto bassa e prestazioni elevate in un sistema SAP, in particolare tra le istanze dell'applicazione e il livello DBMS di un sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-285">The reason for these restrictions is the requirement for a very low latency high-performance network within one SAP system, especially between the application instances and the DBMS layer of an SAP system.</span></span>
>
>

### <a name="supported-os-and-database-releases"></a><span data-ttu-id="a2ce5-286">Sistemi operativi e versioni di database supportati</span><span class="sxs-lookup"><span data-stu-id="a2ce5-286">Supported OS and Database Releases</span></span>
* <span data-ttu-id="a2ce5-287">Il software server Microsoft supportato per i servizi Macchine virtuali di Azure è elencato in questo articolo: <http://support.microsoft.com/kb/2721672>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-287">Microsoft server software supported for Azure Virtual Machine Services is listed in this article: <http://support.microsoft.com/kb/2721672>.</span></span>
* <span data-ttu-id="a2ce5-288">Le versioni supportate del sistema operativo e le versioni dei sistemi database supportate nei servizi di macchine virtuali di Azure insieme al software SAP sono indicate nella nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-288">Supported operating system releases, database system releases supported on Azure Virtual Machine Services in conjunction with SAP software are documented in SAP Note [1928533].</span></span>
* <span data-ttu-id="a2ce5-289">Le applicazioni e le versioni SAP supportate nei servizi di macchine virtuali di Azure sono indicate nella nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-289">SAP applications and releases supported on Azure Virtual Machine Services are documented in SAP Note [1928533].</span></span>
* <span data-ttu-id="a2ce5-290">Sono supportate solo immagini a 64 bit per l'esecuzione come macchine virtuali guest in Azure per scenari SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-290">Only 64Bit images are supported to run as Guest VMs in Azure for SAP scenarios.</span></span> <span data-ttu-id="a2ce5-291">Sono quindi supportati solo database e applicazioni SAP a 64 bit.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-291">This also means that only 64-bit SAP applications and databases are supported.</span></span>

## <a name="microsoft-azure-virtual-machine-services"></a><span data-ttu-id="a2ce5-292">Servizi Macchine virtuali di Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-292">Microsoft Azure Virtual Machine Services</span></span>
<span data-ttu-id="a2ce5-293">La piattaforma Microsoft Azure è una piattaforma di servizi cloud su scala Internet ospitata e gestita nei data center Microsoft.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-293">The Microsoft Azure platform is an internet-scale cloud services platform hosted and operated in Microsoft data centers.</span></span> <span data-ttu-id="a2ce5-294">La piattaforma include i servizi Macchine virtuali di Microsoft Azure (infrastruttura distribuita come servizio o IaaS) e un set di funzionalità avanzate per la piattaforma distribuita come servizio (PaaS).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-294">The platform includes the Microsoft Azure Virtual Machine Services (Infrastructure as a Service, or IaaS) and a set of rich Platform as a Service (PaaS) capabilities.</span></span>

<span data-ttu-id="a2ce5-295">La piattaforma Azure riduce la necessità di acquisti iniziali di tecnologia e infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-295">The Azure platform reduces the need for up-front technology and infrastructure purchases.</span></span> <span data-ttu-id="a2ce5-296">Semplifica la manutenzione e la gestione delle applicazioni offrendo risorse di calcolo e di archiviazione su richiesta per ospitare, ridimensionare e gestire applicazioni Web e applicazioni connesse.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-296">It simplifies maintaining and operating applications by providing on-demand compute and storage to host, scale, and manage web application and connected applications.</span></span> <span data-ttu-id="a2ce5-297">La gestione dell'infrastruttura viene automatizzata mediante una piattaforma progettata per la disponibilità elevata e il ridimensionamento dinamico per adeguarsi alle esigenze di utilizzo, con la possibilità di scegliere un modello di determinazione prezzi con pagamento in base al consumo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-297">Infrastructure management is automated with a platform that is designed for high availability and dynamic scaling to match usage needs with the option of a pay-as-you-go pricing model.</span></span>

![Posizionamento di Servizi Macchine virtuali di Microsoft Azure][planning-guide-figure-400]

<span data-ttu-id="a2ce5-299">I servizi Macchine virtuali di Azure consentono di distribuire immagini server personalizzate in Azure come istanze IaaS (vedere la figura 4).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-299">With Azure Virtual Machine Services, Microsoft is enabling you to deploy custom server images to Azure as IaaS instances (see Figure 4).</span></span> <span data-ttu-id="a2ce5-300">Le macchine virtuali in Azure sono basate sui dischi rigidi virtuali (VHD, Virtual Hard Drive) Hyper-V e possono eseguire sistemi operativi diversi come sistemi operativi guest.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-300">The Virtual Machines in Azure are based on Hyper-V virtual hard drives (VHD) and are able to run different operating systems as Guest OS.</span></span>

<span data-ttu-id="a2ce5-301">Dal punto di vista operativo, il servizio Macchine virtuali di Azure offre un'esperienza analoga alle macchine virtuali distribuite in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-301">From an operational perspective, the Azure Virtual Machine Service offers similar experiences as virtual machines deployed on premises.</span></span> <span data-ttu-id="a2ce5-302">Il vantaggio significativo offerto tuttavia è costituito dal fatto che non è necessario procurarsi, amministrare e gestire l'infrastruttura.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-302">However, it has the significant advantage that you don’t need to procure, administer, and manage the infrastructure.</span></span> <span data-ttu-id="a2ce5-303">Gli sviluppatori e gli amministratori hanno il controllo completo dell'immagine del sistema operativo in queste macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-303">Developers and Administrators have full control of the operating system image within these virtual machines.</span></span> <span data-ttu-id="a2ce5-304">Gli amministratori possono accedere in modalità remota alle macchine virtuali per eseguire attività di manutenzione e risoluzione dei problemi, oltre ad attività di distribuzione del software.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-304">Administrators can log on remotely in to those virtual machines to perform maintenance and troubleshooting tasks as well as software deployment tasks.</span></span> <span data-ttu-id="a2ce5-305">Per quanto riguarda la distribuzione, le uniche limitazioni previste sono relative alle dimensioni e alle funzionalità delle VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-305">In regard to deployment, the only restrictions are the sizes and capabilities of Azure VMs.</span></span> <span data-ttu-id="a2ce5-306">È possibile che la configurazione non sia dettagliata quanto la configurazione locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-306">These may not be as fine granular in configuration as this could be done on premises.</span></span> <span data-ttu-id="a2ce5-307">È possibile scegliere tipi di VM basati su una combinazione degli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-307">There is a choice of VM types that represent a combination of:</span></span>

* <span data-ttu-id="a2ce5-308">Numero di vCPU</span><span class="sxs-lookup"><span data-stu-id="a2ce5-308">Number of vCPUs,</span></span>
* <span data-ttu-id="a2ce5-309">Memoria</span><span class="sxs-lookup"><span data-stu-id="a2ce5-309">Memory,</span></span>
* <span data-ttu-id="a2ce5-310">Numero di dischi rigidi virtuali che è possibile collegare</span><span class="sxs-lookup"><span data-stu-id="a2ce5-310">Number of VHDs that can be attached,</span></span>
* <span data-ttu-id="a2ce5-311">Larghezza di banda di rete e di archiviazione</span><span class="sxs-lookup"><span data-stu-id="a2ce5-311">Network and Storage bandwidths.</span></span>

<span data-ttu-id="a2ce5-312">Le dimensioni e le limitazioni delle diverse dimensioni offerte per le varie macchine virtuali sono illustrate in una tabella in [questo articolo (Linux)][virtual-machines-sizes-linux] e [in questo articolo (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-312">The size and limitations of various different virtual machines sizes offered can be seen in a table in [this article (Linux)][virtual-machines-sizes-linux] and [this article (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="a2ce5-313">Come si può notare, sono disponibili diverse famiglie o serie di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-313">As you realize, there are different families or series of virtual machines.</span></span> <span data-ttu-id="a2ce5-314">Sono disponibili le famiglie seguenti di VM:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-314">You can distinguish the following families of VMs:</span></span>

* <span data-ttu-id="a2ce5-315">Tipi di VM A0-A7: non tutti questi tipi sono certificati per SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-315">A0-A7 VM types: Not all of those are certified for SAP.</span></span> <span data-ttu-id="a2ce5-316">Si tratta della prima serie di VM in cui è stata introdotta la soluzione IaaS per Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-316">First VM series that Azure IaaS got introduced with.</span></span>
* <span data-ttu-id="a2ce5-317">Tipi di VM A8-A11: istanze HPC (High-Performance Computing).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-317">A8-A11 VM types: High Performance computing instances.</span></span> <span data-ttu-id="a2ce5-318">In esecuzione in host di calcolo diversi, con prestazioni migliori rispetto alle altre VM della serie A.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-318">Running on different better performing compute hosts than other A-series VMs.</span></span>
* <span data-ttu-id="a2ce5-319">Tipi di VM serie D/Dv2: prestazioni migliori rispetto ad A0-A7.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-319">D/Dv2-Series VM types: Better performing than A0-A7.</span></span> <span data-ttu-id="a2ce5-320">Non tutti i tipi di VM sono certificati per SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-320">Not all of the VM types are certified with SAP.</span></span>
* <span data-ttu-id="a2ce5-321">Tipi di VM serie DS/DSv2: simili alla serie D/Dv2, ma possono connettersi all'archiviazione Premium di Azure. Vedere il capitolo [Archiviazione Premium di Azure][planning-guide-3.3.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-321">DS/DSv2-Series VM types: Similar to D/Dv2-series, but are able to connect to Azure Premium Storage (see chapter [Azure Premium Storage][planning-guide-3.3.2] of this document).</span></span> <span data-ttu-id="a2ce5-322">Anche in questo caso, non tutti i tipi di VM sono certificati per SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-322">Again not all VM types are certified with SAP.</span></span>
* <span data-ttu-id="a2ce5-323">Tipi di VM di serie G: tipi di macchine virtuali con memoria elevata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-323">G-Series VM types: High memory VM types.</span></span>
* <span data-ttu-id="a2ce5-324">Tipi di VM serie GS: analoghi alla serie G, ma con la possibilità di usare l'archiviazione Premium di Azure. Vedere il capitolo [Archiviazione Premium di Azure][planning-guide-3.3.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-324">GS-Series VM types: like G-Series but including the option to use Azure Premium Storage (see chapter [Azure Premium Storage][planning-guide-3.3.2] of this document).</span></span> <span data-ttu-id="a2ce5-325">Quando si usano macchine virtuali della serie GS come server di database, è obbligatorio usare l'Archiviazione Premium per i dati del database e i file di log delle transazioni</span><span class="sxs-lookup"><span data-stu-id="a2ce5-325">When using GS-Series VMs as database servers, it's mandatory to use Premium Storage for DB data and transaction log files</span></span>

<span data-ttu-id="a2ce5-326">È possibile che diverse serie di VM presentino le stesse configurazioni di CPU e memoria.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-326">You may find the same CPU and memory configurations in different VM series.</span></span> <span data-ttu-id="a2ce5-327">Quando si verificano le prestazioni della velocità effettiva delle VM delle diverse serie, è tuttavia possibile che si notino differenze significative,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-327">Nevertheless, when you look up the throughput performance of these VMs out of the different series they might differ significantly.</span></span> <span data-ttu-id="a2ce5-328">indipendentemente dal fatto che la configurazione di CPU e memoria sia uguale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-328">Despite having the same CPU and memory configuration.</span></span> <span data-ttu-id="a2ce5-329">Ciò dipende dal fatto che l'hardware del server host sottostante presentava caratteristiche di velocità effettiva diverse al momento dell'introduzione dei diversi tipi di VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-329">Reason is that the underlying host server hardware at the introduction of the different VM types had different throughput characteristics.</span></span>  <span data-ttu-id="a2ce5-330">La differenza rilevata a livello di prestazioni della velocità effettiva si riflette in genere sul prezzo delle diverse VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-330">Usually the difference shown in throughput performance also is reflected in the price of the different VMs.</span></span>

<span data-ttu-id="a2ce5-331">È possibile che non tutte le diverse serie di VM vengano offerte in ogni area di Azure. Per informazioni sulle aree di Azure, vedere il capitolo successivo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-331">Not all different VM series might be offered in each one of the Azure Regions (for Azure Regions see next chapter).</span></span> <span data-ttu-id="a2ce5-332">Occorre anche notare che non tutte le VM o le serie di VM sono certificate per SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-332">Also be aware that not all VMs or VM-Series are certified for SAP.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a2ce5-333">Per l'uso di applicazioni basate su SAP NetWeaver, sono supportati solo le configurazioni e i sottoinsiemi di tipi di VM elencati nella nota SAP [1928533] .</span><span class="sxs-lookup"><span data-stu-id="a2ce5-333">For the use of SAP NetWeaver based applications, only the subset of VM types and configurations listed in SAP Note [1928533] are supported.</span></span>
>
>

### <span data-ttu-id="a2ce5-334"><a name="be80d1b9-a463-4845-bd35-f4cebdb5424a"></a>Aree di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-334"><a name="be80d1b9-a463-4845-bd35-f4cebdb5424a"></a>Azure Regions</span></span>
<span data-ttu-id="a2ce5-335">Microsoft consente di distribuire macchine virtuali in quelle che vengono definite "aree di Azure".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-335">Microsoft allows to deploy Virtual Machines into so called ‘Azure Regions’.</span></span> <span data-ttu-id="a2ce5-336">Un'area di Azure può essere costituita da uno o più data center che si trovano in posizioni molto vicine.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-336">An Azure Region may be one or multiple data centers that are located in close proximity.</span></span> <span data-ttu-id="a2ce5-337">Microsoft ha almeno due aree di Azure per la maggior parte delle aree geopolitiche del mondo,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-337">For most of the geopolitical regions in the world Microsoft has at least two Azure Regions.</span></span> <span data-ttu-id="a2ce5-338">ad esempio, in Europa sono disponibili le aree di Azure "Europa settentrionale" ed "Europa occidentale".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-338">For example, in Europe there is an Azure Region of ‘North Europe’ and one of ‘West Europe’.</span></span> <span data-ttu-id="a2ce5-339">Due aree di Azure entro un'area geopolitica sono separate da una distanza sufficiente da evitare che emergenze tecniche o calamità naturale influiscano su entrambe le aree di Azure nella stessa area geopolitica.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-339">Such two Azure Regions within a geopolitical region are separated by significant enough distance so that natural or technical disasters do not affect both Azure Regions in the same geopolitical region.</span></span> <span data-ttu-id="a2ce5-340">Poiché Microsoft crea costantemente nuove aree di Azure in diverse aree geopolitiche a livello globale, il numero di queste aree è in continua crescita e da dicembre 2015 sono state raggiunte le 20 aree di Azure, con altre aree già annunciate.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-340">Since Microsoft is steadily building out new Azure Regions in different geopolitical regions globally, the number of these regions is steadily growing and as of Dec 2015 reached the number of 20 Azure Regions with additional Regions announced already.</span></span> <span data-ttu-id="a2ce5-341">I clienti possono distribuire sistemi SAP in tutte queste aree, incluse le due aree di Azure in Cina.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-341">You as a customer can deploy SAP systems into all these regions, including the two Azure Regions in China.</span></span> <span data-ttu-id="a2ce5-342">Per informazioni aggiornate sulle aree di Azure, vedere il sito Web <https://azure.microsoft.com/regions/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-342">For current up-to-date information about Azure regions see this website: <https://azure.microsoft.com/regions/></span></span>

### <span data-ttu-id="a2ce5-343"><a name="8d8ad4b8-6093-4b91-ac36-ea56d80dbf77"></a>Concetto di macchina virtuale di Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-343"><a name="8d8ad4b8-6093-4b91-ac36-ea56d80dbf77"></a>The Microsoft Azure Virtual Machine Concept</span></span>
<span data-ttu-id="a2ce5-344">Microsoft Azure offre una soluzione IaaS (Infrastructure as a Service) per ospitare macchine virtuali con funzionalità simili come soluzione di virtualizzazione locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-344">Microsoft Azure offers an Infrastructure as a Service (IaaS) solution to host Virtual Machines with similar functionalities as an on-premises virtualization solution.</span></span> <span data-ttu-id="a2ce5-345">È possibile creare macchine virtuali dal portale di Azure, mediante PowerShell o tramite l'interfaccia della riga di comando, che offre anche funzionalità di distribuzione e gestione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-345">You are able to create Virtual Machines from within the Azure portal, PowerShell or CLI, which also offer deployment and management capabilities.</span></span>

<span data-ttu-id="a2ce5-346">Gestione risorse di Azure consente di effettuare il provisioning delle applicazioni usando un modello dichiarativo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-346">Azure Resource Manager allows you to provision your applications using a declarative template.</span></span> <span data-ttu-id="a2ce5-347">In un unico modello, è possibile distribuire più servizi con le relative dipendenze.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-347">In a single template, you can deploy multiple services along with their dependencies.</span></span> <span data-ttu-id="a2ce5-348">Si usa lo stesso modello per distribuire più volte l'applicazione durante ogni fase del ciclo di vita dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-348">You use the same template to repeatedly deploy your application during every stage of the application life cycle.</span></span>

<span data-ttu-id="a2ce5-349">Altre informazioni sull'uso dei modelli di Resource Manager sono disponibili qui:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-349">More information about using Resource Manager templates can be found here:</span></span>

* <span data-ttu-id="a2ce5-350">[Distribuire e gestire le macchine virtuali usando modelli di Azure Resource Manager e l'interfaccia della riga di comando di Azure][../../linux/create-ssh-secured-vm-from-template.md]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-350">[Deploy and manage virtual machines by using Azure Resource Manager templates and the Azure CLI][../../linux/create-ssh-secured-vm-from-template.md]</span></span>
* <span data-ttu-id="a2ce5-351">[Gestire macchine virtuali con Azure Resource Manager e PowerShell][virtual-machines-deploy-rmtemplates-powershell]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-351">[Manage virtual machines using Azure Resource Manager and PowerShell][virtual-machines-deploy-rmtemplates-powershell]</span></span>
* <span data-ttu-id="a2ce5-352"><https://azure.microsoft.com/documentation/templates/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-352"><https://azure.microsoft.com/documentation/templates/></span></span>

<span data-ttu-id="a2ce5-353">Un'altra funzionalità interessante è costituita dalla possibilità di creare immagini dalle macchine virtuali, in modo da poter preparare alcuni repository da cui sarà possibile distribuire rapidamente istanze di macchine virtuali che soddisfano i requisiti specifici.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-353">Another interesting feature is the ability to create images from Virtual Machines, which allows you to prepare certain repositories from which you are able to quickly deploy Virtual machine instances, which meet your requirements.</span></span>

<span data-ttu-id="a2ce5-354">Altre informazioni sulla creazione di immagini da Macchine virtuali sono disponibili in [questo articolo (Linux)][virtual-machines-linux-capture-image-resource-manager] e in [questo articolo (Windows)][virtual-machines-windows-capture-image-resource-manager].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-354">More information about creating images from Virtual Machines can be found in [this article (Linux)][virtual-machines-linux-capture-image-resource-manager] and [this article (Windows)][virtual-machines-windows-capture-image-resource-manager].</span></span>

#### <span data-ttu-id="a2ce5-355"><a name="df49dc09-141b-4f34-a4a2-990913b30358"></a>Domini di errore</span><span class="sxs-lookup"><span data-stu-id="a2ce5-355"><a name="df49dc09-141b-4f34-a4a2-990913b30358"></a>Fault Domains</span></span>
<span data-ttu-id="a2ce5-356">I domini di errore rappresentano un'unità fisica di errore, strettamente correlata all'infrastruttura fisica contenuta nei data center. Anche se è possibile considerare un pannello fisico o un rack come dominio di errore, non è disponibile alcun mapping diretto uno-a-uno tra i due.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-356">Fault Domains represent a physical unit of failure, very closely related to the physical infrastructure contained in data centers, and while a physical blade or rack can be considered a Fault Domain, there is no direct one-to-one mapping between the two.</span></span>

<span data-ttu-id="a2ce5-357">Quando si distribuiscono più macchine virtuali come parte di un sistema SAP nei servizi Macchine virtuali di Microsoft Azure, è possibile influenzare il controller di infrastruttura di Azure in modo da distribuire l'applicazione in domini di errore diversi, rispettando quindi i requisiti del Contratto di servizio di Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-357">When you deploy multiple Virtual Machines as part of one SAP system in Microsoft Azure Virtual Machine Services, you can influence the Azure Fabric Controller to deploy your application into different Fault Domains, thereby meeting the requirements of the Microsoft Azure SLA.</span></span> <span data-ttu-id="a2ce5-358">L'utente non ha alcun controllo diretto sulla distribuzione di domini di errore in un'unità di scala di Azure, ovvero una raccolta di centinaia di nodi di calcolo o di nodi di archiviazione e di risorse di rete, oppure sull'assegnazione di macchine virtuali a un dominio di errore specifico.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-358">However, the distribution of Fault Domains over an Azure Scale Unit (collection of hundreds of Compute nodes or Storage nodes and networking) or the assignment of VMs to a specific Fault Domain is something over which you do not have direct control.</span></span> <span data-ttu-id="a2ce5-359">Per fare in modo che il controller di infrastruttura di Azure distribuisca un set di macchine virtuali in diversi domini di errore, è necessario assegnare un set di disponibilità di Azure alle VM durante la fase di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-359">In order to direct the Azure fabric controller to deploy a set of VMs over different Fault Domains, you need to assign an Azure Availability Set to the VMs at deployment time.</span></span> <span data-ttu-id="a2ce5-360">Per altre informazioni sui set di disponibilità di Azure, vedere il capitolo [Set di disponibilità di Azure][planning-guide-3.2.3] in questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-360">For more information on Azure Availability Sets, see chapter [Azure Availability Sets][planning-guide-3.2.3] in this document.</span></span>

#### <span data-ttu-id="a2ce5-361"><a name="fc1ac8b2-e54a-487c-8581-d3cc6625e560"></a>Domini di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="a2ce5-361"><a name="fc1ac8b2-e54a-487c-8581-d3cc6625e560"></a>Upgrade Domains</span></span>
<span data-ttu-id="a2ce5-362">I domini di aggiornamento rappresentano un'unità logica utile per determinare il modo in cui viene aggiornata una VM in un sistema SAP, costituito da istanze di SAP in esecuzione in più macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-362">Upgrade Domains represent a logical unit that help to determine how a VM within an SAP system, that consists of SAP instances running in multiple VMs, is updated.</span></span> <span data-ttu-id="a2ce5-363">Quando si verifica un aggiornamento, Microsoft Azure esegue il processo di aggiornamento dei domini di aggiornamento, uno alla volta.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-363">When an upgrade occurs, Microsoft Azure goes through the process of updating these Upgrade Domains one by one.</span></span> <span data-ttu-id="a2ce5-364">Suddividendo le macchine virtuali in diversi domini di aggiornamento durante la fase di distribuzione, è possibile proteggere parzialmente il sistema SAP da potenziali tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-364">By spreading VMs at deployment time over different Upgrade Domains, you can protect your SAP system partly from potential downtime.</span></span> <span data-ttu-id="a2ce5-365">Per imporre ad Azure la distribuzione delle macchine virtuali in un sistema SAP suddivise in diversi domini di aggiornamento, è necessario impostare un attributo specifico in fase di distribuzione di ogni VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-365">In order to force Azure to deploy the VMs of an SAP system spread over different Upgrade Domains, you need to set a specific attribute at deployment time of each VM.</span></span> <span data-ttu-id="a2ce5-366">Analogamente ai domini di errore, un'unità di scala di Azure viene divisa in più domini di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-366">Similar to Fault Domains, an Azure Scale Unit is divided into multiple Upgrade Domains.</span></span> <span data-ttu-id="a2ce5-367">Per fare in modo che il controller di infrastruttura di Azure distribuisca un set di macchine virtuali in diversi domini di aggiornamento, è necessario assegnare un set di disponibilità di Azure alle VM durante la fase di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-367">In order to direct the Azure fabric controller to deploy a set of VMs over different Upgrade Domains, you need to assign an Azure Availability Set to the VMs at deployment time.</span></span> <span data-ttu-id="a2ce5-368">Per altre informazioni sui set di disponibilità di Azure, vedere il capitolo [Set di disponibilità di Azure][planning-guide-3.2.3] più avanti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-368">For more information on Azure Availability Sets, see chapter [Azure Availability Sets][planning-guide-3.2.3] below.</span></span>

#### <span data-ttu-id="a2ce5-369"><a name="18810088-f9be-4c97-958a-27996255c665"></a>Set di disponibilità di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-369"><a name="18810088-f9be-4c97-958a-27996255c665"></a>Azure Availability Sets</span></span>
<span data-ttu-id="a2ce5-370">Le macchine virtuali di Azure in un set di disponibilità di Azure verranno distribuite dal controller di infrastruttura di Azure in diversi domini di errore e di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-370">Azure Virtual Machines within one Azure Availability Set are distributed by the Azure Fabric Controller over different Fault and Upgrade Domains.</span></span> <span data-ttu-id="a2ce5-371">Lo scopo della distribuzione in diversi domini di errore e di aggiornamento consiste nell'evitare che tutte le macchine virtuali di un sistema SAP vengano arrestate in caso di manutenzione dell'infrastruttura o in caso di errore in un dominio di errore.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-371">The purpose of the distribution over different Fault and Upgrade Domains is to prevent all VMs of an SAP system from being shut down in the case of infrastructure maintenance or a failure within one Fault Domain.</span></span> <span data-ttu-id="a2ce5-372">Per impostazione predefinita, le VM non fanno parte di un set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-372">By default, VMs are not part of an Availability Set.</span></span> <span data-ttu-id="a2ce5-373">La partecipazione di una macchina virtuale a un set di disponibilità viene definita in fase di distribuzione oppure successivamente mediante una riconfigurazione e una ridistribuzione di una VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-373">The participation of a VM in an Availability Set is defined at deployment time or later on by a reconfiguration and re-deployment of a VM.</span></span>

<span data-ttu-id="a2ce5-374">Per informazioni sul concetto di set di disponibilità di Azure e sulla correlazione tra i set di disponibilità e i domini di errore e di aggiornamento, vedere [questo articolo][virtual-machines-manage-availability]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-374">To understand the concept of Azure Availability Sets and the way Availability Sets relate to Fault and Upgrade Domains, read [this article][virtual-machines-manage-availability]</span></span>

<span data-ttu-id="a2ce5-375">Per definire i set di disponibilità per Azure Resource Manager tramite un modello JSON, vedere le [specifiche dell'API REST](https://github.com/Azure/azure-rest-api-specs/blob/master/arm-compute/2015-06-15/swagger/compute.json) e cercare le sezioni relative alla disponibilità.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-375">To define availability sets for ARM via a json template see [the rest-api specs](https://github.com/Azure/azure-rest-api-specs/blob/master/arm-compute/2015-06-15/swagger/compute.json) and search for "availability".</span></span>

### <span data-ttu-id="a2ce5-376"><a name="a72afa26-4bf4-4a25-8cf7-855d6032157f"></a>Archiviazione: Archiviazione di Microsoft Azure e dischi dati</span><span class="sxs-lookup"><span data-stu-id="a2ce5-376"><a name="a72afa26-4bf4-4a25-8cf7-855d6032157f"></a>Storage: Microsoft Azure Storage and Data Disks</span></span>
<span data-ttu-id="a2ce5-377">Le macchine virtuali di Microsoft Azure utilizzano diversi tipi di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-377">Microsoft Azure Virtual Machines utilize different storage types.</span></span> <span data-ttu-id="a2ce5-378">Quando si implementa SAP nei servizi Macchine virtuali di Azure, è importante comprendere le differenze tra questi due tipi principali di archiviazione:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-378">When implementing SAP on Azure Virtual Machine Services, it is important to understand the differences between these two main types of storage:</span></span>

* <span data-ttu-id="a2ce5-379">Archiviazione volatile, non permanente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-379">Non-Persistent, volatile storage.</span></span>
* <span data-ttu-id="a2ce5-380">Archiviazione permanente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-380">Persistent storage.</span></span>

<span data-ttu-id="a2ce5-381">L'archiviazione non permanente è collegata direttamente alle macchine virtuali in esecuzione e risiede nei nodi di calcolo, ovvero l'istanza locale (archiviazione temporanea).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-381">The non-persistent storage is directly attached to the running Virtual Machines and resides on the compute nodes themselves – the local instance storage (temporary storage).</span></span> <span data-ttu-id="a2ce5-382">Le dimensioni dipendono da quelle della macchina virtuale scelta all'avvio della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-382">The size depends on the size of the Virtual Machine chosen when the deployment started.</span></span> <span data-ttu-id="a2ce5-383">Questo tipo di archiviazione è volatile e quindi il disco viene inizializzato al riavvio di un'istanza di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-383">This storage type is volatile and therefore the disk is initialized when a Virtual Machine instance is restarted.</span></span> <span data-ttu-id="a2ce5-384">In genere il file di paging per il sistema operativo si trova in questo disco temporaneo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-384">Typically, the pagefile for the operating system is located on this temporary disk.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-386">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-386">Windows</span></span>
>
> <span data-ttu-id="a2ce5-387">Nelle macchine virtuali Windows l'unità temporanea viene montata come unità D:\ in una VM distribuita.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-387">On Windows VMs the temp drive is mounted as drive D:\ in a deployed VM.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-389">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-389">Linux</span></span>
>
> <span data-ttu-id="a2ce5-390">Nelle macchine virtuali Linux viene montata come /mnt/resource o /mnt.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-390">On Linux VMs, it's mounted as /mnt/resource or /mnt.</span></span> <span data-ttu-id="a2ce5-391">Per informazioni dettagliate, vedere:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-391">See more details here:</span></span>
>
> * <span data-ttu-id="a2ce5-392">[Come collegare un disco dati a una macchina virtuale Linux][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-392">[How to Attach a Data Disk to a Linux Virtual Machine][virtual-machines-linux-how-to-attach-disk]</span></span>
> * <span data-ttu-id="a2ce5-393"><https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux#temporary-disk></span><span class="sxs-lookup"><span data-stu-id="a2ce5-393"><https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux#temporary-disk></span></span>
>
>

- - -
<span data-ttu-id="a2ce5-394">L'unità effettiva è volatile perché viene archiviata nel server host stesso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-394">The actual drive is volatile because it is getting stored on the host server itself.</span></span> <span data-ttu-id="a2ce5-395">Se la macchina virtuale viene spostata durante una ridistribuzione, ad esempio a causa di interventi di manutenzione dell'host o di un arresto seguito da un riavvio, il contenuto dell'unità andrà perso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-395">If the VM moved in a redeployment (for example due to maintenance on the host or shutdown and restart) the content of the drive is lost.</span></span> <span data-ttu-id="a2ce5-396">Non è quindi consigliabile archiviare dati importanti in questa unità.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-396">Therefore, it is not an option to store any important data on this drive.</span></span> <span data-ttu-id="a2ce5-397">Il tipo di supporto usato per questo tipo di archiviazione risulta diverso tra le diverse serie di VM e offre caratteristiche molto diverse a livello di prestazioni, che da giugno 2015 sono analoghe alle seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-397">The type of media used for this type of storage differs between different VM series with very different performance characteristics which as of June 2015 look like:</span></span>

* <span data-ttu-id="a2ce5-398">A5-A7: prestazioni estremamente limitate.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-398">A5-A7: Very limited performance.</span></span> <span data-ttu-id="a2ce5-399">Consigliato solo per i file di paging.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-399">Not recommended for anything beyond page file</span></span>
* <span data-ttu-id="a2ce5-400">A8-A11: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva >1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-400">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="a2ce5-401">Serie D: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva >1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-401">D-Series: Very good performance characteristics with some then thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="a2ce5-402">Serie DS: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva >1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-402">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="a2ce5-403">Serie G: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva >1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-403">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="a2ce5-404">Serie GS: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva >1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-404">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>

<span data-ttu-id="a2ce5-405">Le indicazioni precedenti sono applicabili ai tipi di macchine virtuali certificati per SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-405">Statements above are applying to the VM types that are certified with SAP.</span></span> <span data-ttu-id="a2ce5-406">Le serie di VM con valori eccellenti per IOPS e velocità effettiva sono idonee per l'uso da parte di alcune funzionalità DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-406">The VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features.</span></span> <span data-ttu-id="a2ce5-407">Per altre informazioni, vedere la [Guida alla distribuzione di DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-407">For more information, see the [DBMS Deployment Guide][dbms-guide].</span></span>

<span data-ttu-id="a2ce5-408">L'Archiviazione di Microsoft Azure offre archiviazione permanente e i tipici livelli di protezione e ridondanza disponibili nelle soluzioni di archiviazione SAN.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-408">Microsoft Azure Storage provides persisted storage and the typical levels of protection and redundancy seen on SAN storage.</span></span> <span data-ttu-id="a2ce5-409">I dischi basati su Archiviazione di Azure sono dischi rigidi virtuali (VHD) situati nei servizi di Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-409">Disks based on Azure Storage are virtual hard disk (VHDs) located in the Azure Storage Services.</span></span> <span data-ttu-id="a2ce5-410">Il disco del sistema operativo locale (Windows C:\, Linux /dev/sda1) è archiviato in Archiviazione di Azure, dove sono presenti anche volumi e dischi aggiuntivi montati nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-410">The local OS-Disk (Windows C:\, Linux /dev/sda1) is stored on the Azure Storage, and additional Volumes/Disks mounted to the VM get stored there, too.</span></span>

<span data-ttu-id="a2ce5-411">È possibile caricare un disco rigido virtuale esistente dall'ambiente locale o creare dischi rigidi virtuali vuoti da Azure e collegarli alle macchine virtuali distribuite.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-411">It is possible to upload an existing VHD from on-premises or create empty ones from within Azure and attach those to deployed VMs.</span></span>

<span data-ttu-id="a2ce5-412">Dopo la creazione o il caricamento di un disco rigido virtuale in Archiviazione di Azure, è possibile montare e collegare il disco a una macchina virtuale esistente e copiare un disco rigido virtuale esistente (non montato).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-412">After creating or uploading a VHD into Azure Storage, it is possible to mount and attach those to an existing Virtual Machine and to copy existing (unmounted) VHD.</span></span>

<span data-ttu-id="a2ce5-413">Poiché questi dischi rigidi virtuali sono permanenti, i dati e le modifiche apportate al loro interno rimangono al sicuro dopo il riavvio e la ricreazione di un'istanza di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-413">As those VHDs are persisted, data and changes within those are safe when rebooting and recreating a Virtual Machine instance.</span></span> <span data-ttu-id="a2ce5-414">Anche se viene eliminata un'istanza, questi dischi rigidi virtuali rimangono sicuri e possono essere ridistribuiti oppure, in caso di dischi non relativi al sistema operativo, possono essere montati in altre macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-414">Even if an instance is deleted, these VHDs stay safe and can be redeployed or in case of non-OS disks can be mounted to other VMs.</span></span>

<span data-ttu-id="a2ce5-415">Nella rete di Archiviazione di Azure è possibile configurare diversi livelli di ridondanza:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-415">Within the network of Azure Storage different redundancy levels can be configured:</span></span>

* <span data-ttu-id="a2ce5-416">Il livello minimo selezionabile è costituito dalla "ridondanza locale", che equivale a tre repliche dei dati nello stesso data center di un'area di Azure. Vedere il capitolo [Aree di Azure][planning-guide-3.1].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-416">Minimum level that can be selected is ‘local redundancy’, which is equivalent to three-replica of the data within the same data center of an Azure Region (see chapter [Azure Regions][planning-guide-3.1]).</span></span>
* <span data-ttu-id="a2ce5-417">L'archiviazione con ridondanza della zona distribuisce le tre immagini in data center diversi nella stessa area di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-417">Zone redundant storage, which spreads the three images over different data centers within the same Azure Region.</span></span>
* <span data-ttu-id="a2ce5-418">Il livello di ridondanza predefinito è la ridondanza geografica, che replica in modo asincrono il contenuto in altre tre immagini dei dati in un'altra area di Azure ospitata nella stessa area geopolitica.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-418">Default redundancy level is geographic redundancy, which asynchronously replicates the content into another three images of the data into another Azure Region, which is hosted in the same geopolitical region.</span></span>

<span data-ttu-id="a2ce5-419">Per informazioni sulle diverse opzioni di ridondanza, vedere anche la tabella all'inizio di questo articolo: <https://azure.microsoft.com/pricing/details/storage/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-419">Also see the table on top of this article regarding the different redundancy options: <https://azure.microsoft.com/pricing/details/storage/></span></span>

<span data-ttu-id="a2ce5-420">Altre informazioni su Archiviazione di Azure sono disponibili qui:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-420">More information about Azure Storage can be found here:</span></span>

* <span data-ttu-id="a2ce5-421"><https://azure.microsoft.com/documentation/services/storage/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-421"><https://azure.microsoft.com/documentation/services/storage/></span></span>
* <span data-ttu-id="a2ce5-422"><https://azure.microsoft.com/services/site-recovery></span><span class="sxs-lookup"><span data-stu-id="a2ce5-422"><https://azure.microsoft.com/services/site-recovery></span></span>
* <span data-ttu-id="a2ce5-423"><https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs></span><span class="sxs-lookup"><span data-stu-id="a2ce5-423"><https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs></span></span>
* <span data-ttu-id="a2ce5-424"><https://blogs.msdn.com/b/azuresecurity/archive/2015/11/17/azure-disk-encryption-for-linux-and-windows-virtual-machines-public-preview.aspx></span><span class="sxs-lookup"><span data-stu-id="a2ce5-424"><https://blogs.msdn.com/b/azuresecurity/archive/2015/11/17/azure-disk-encryption-for-linux-and-windows-virtual-machines-public-preview.aspx></span></span>

#### <a name="azure-standard-storage"></a><span data-ttu-id="a2ce5-425">Archiviazione Standard di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-425">Azure Standard Storage</span></span>
<span data-ttu-id="a2ce5-426">L'archiviazione Standard di Azure era il tipo di archiviazione disponibile al momento del rilascio della soluzione IaaS di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-426">Azure Standard storage was the type of storage available when Azure IaaS was released.</span></span> <span data-ttu-id="a2ce5-427">Prevedeva l'applicazione di quote di IOPS per ogni disco.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-427">There were IOPS quotas enforced per single disk.</span></span> <span data-ttu-id="a2ce5-428">Il livello di latenza disponibile non era analogo a quello dei dispositivi SAN/NAS distribuiti in genere per sistemi SAP di fascia alta ospitati in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-428">Latency experienced was not in the same class as SAN/NAS devices typically deployed for high-end SAP systems hosted on-premises.</span></span> <span data-ttu-id="a2ce5-429">L'Archiviazione Standard di Azure, tuttavia, si è rivelata sufficiente per molte centinaia di sistemi SAP distribuiti in Azure nel frattempo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-429">Nevertheless, the Azure Standard Storage proved sufficient for many hundreds SAP systems meanwhile deployed in Azure.</span></span>

<span data-ttu-id="a2ce5-430">I dischi archiviati sugli account di archiviazione Standard di Azure vengono applicati in base ai dati effettivi archiviati, al volume delle transazioni di archiviazione, ai trasferimenti di dati in uscita e all'opzione di ridondanza scelta.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-430">Disks that are stored on Azure Standard Storage Accounts are charged based on the actual data that is stored, the volume of storage transactions, outbound data transfers, and redundancy option chosen.</span></span> <span data-ttu-id="a2ce5-431">È possibile creare molti dischi nel livello massimo di dimensioni pari a 1 TB, ma se tali dischi rimangono vuoti non viene applicato alcun addebito.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-431">Many disks can be created at the maximum 1TB in size, but as long as those remain empty there is no charge.</span></span> <span data-ttu-id="a2ce5-432">Se si inseriscono 100 GB in ogni disco rigido virtuale, viene addebitata l'archiviazione di 100 GB, non le dimensioni nominali specificate per la creazione del disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-432">If you then fill one VHD with 100GB each, you are charged for storing 100GB and not for the nominal size the VHD got created with.</span></span>

#### <span data-ttu-id="a2ce5-433"><a name="ff5ad0f9-f7f4-4022-9102-af07aef3bc92"></a>Archiviazione Premium di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-433"><a name="ff5ad0f9-f7f4-4022-9102-af07aef3bc92"></a>Azure Premium Storage</span></span>
<span data-ttu-id="a2ce5-434">Nel mese di aprile 2015 Microsoft ha introdotto l'Archiviazione Premium di Azure,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-434">In April 2015, Microsoft introduced Azure Premium Storage.</span></span> <span data-ttu-id="a2ce5-435">con l'obiettivo di offrire i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-435">Premium Storage got introduced with the goal to provide:</span></span>

* <span data-ttu-id="a2ce5-436">Migliore latenza di I/O.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-436">Better I/O latency.</span></span>
* <span data-ttu-id="a2ce5-437">Migliore velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-437">Better throughput.</span></span>
* <span data-ttu-id="a2ce5-438">Minore variabilità della latenza di I/O.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-438">Less variability in I/O latency.</span></span>

<span data-ttu-id="a2ce5-439">A tale scopo, sono state introdotte diverse modifiche e le due modifiche più importanti sono le seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-439">For that purpose, many changes were introduced of which the two most significant are:</span></span>

* <span data-ttu-id="a2ce5-440">Utilizzo dei dischi SSD nei nodi di Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-440">Usage of SSD disks in the Azure Storage nodes</span></span>
* <span data-ttu-id="a2ce5-441">Nuova cache di lettura basata sul disco SSD locale di un nodo di calcolo di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-441">A new read cache that is backed by the local SSD of an Azure compute node</span></span>

<span data-ttu-id="a2ce5-442">A differenza dell'archiviazione Standard, in cui le funzionalità non cambiano in base alle dimensioni del disco o del disco rigido virtuale, l'archiviazione Premium offre attualmente tre diverse categorie di disco, illustrate alla fine di questo articolo: <https://azure.microsoft.com/pricing/details/storage/unmanaged-disks/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-442">In opposite to Standard storage where capabilities did not change dependent on the size of the disk (or VHD), Premium Storage currently has three different disk categories, which are shown in this article: <https://azure.microsoft.com/pricing/details/storage/unmanaged-disks/></span></span>

<span data-ttu-id="a2ce5-443">Come si può notare, i valori di IOPS/disco e di velocità effettiva/disco dipendono dalla categoria di dimensioni dei dischi</span><span class="sxs-lookup"><span data-stu-id="a2ce5-443">You see that IOPS/disk and disk throughput/disk are dependent on the size category of the disks</span></span>

<span data-ttu-id="a2ce5-444">Nel caso dell'archiviazione Premium i costi non sono basati sui volumi di dati effettivi archiviati in tali dischi, ma sulla categoria di dimensioni di un disco, indipendentemente dalla quantità di dati archiviati nel disco.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-444">Cost basis in the case of Premium Storage is not the actual data volume stored in such disks, but the size category of such a disk, independent of the amount of the data that is stored within the disk.</span></span>

<span data-ttu-id="a2ce5-445">È anche possibile creare dischi nell'Archiviazione Premium privi di mapping diretto alle categorie di dimensioni illustrate,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-445">You also can create disks on Premium Storage that are not directly mapping into the size categories shown.</span></span> <span data-ttu-id="a2ce5-446">ad esempio in caso di copia di dischi dall'Archiviazione Standard nell'Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-446">This may be the case, especially when copying disks from Standard Storage into Premium Storage.</span></span> <span data-ttu-id="a2ce5-447">In questi casi viene eseguito il mapping all'opzione successiva superiore per i dischi di Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-447">In such cases a mapping to the next largest Premium Storage disk option is performed.</span></span>

<span data-ttu-id="a2ce5-448">Solo alcune serie di VM possono usare l'Archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-448">Be aware that only certain VM series can benefit from the Azure Premium Storage.</span></span> <span data-ttu-id="a2ce5-449">Da dicembre 2015 si tratta delle serie DS e GS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-449">As of Dec 2015, these are the DS- and GS-series.</span></span> <span data-ttu-id="a2ce5-450">La serie DS è essenzialmente uguale alla serie D, con l'eccezione che la serie DS è in grado di montare macchine virtuali basate sull'Archiviazione Premium, oltre ai dischi ospitati nell'Archiviazione Standard di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-450">The DS-series is basically the same as D-series with the exception that DS-series has the ability to mount Premium Storage based VMs additionally to disks that are hosted on Azure Standard Storage.</span></span> <span data-ttu-id="a2ce5-451">Le stesse considerazioni sono applicabili alla serie G rispetto alla serie GS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-451">Same thing is valid for G-series compared to GS-series.</span></span>

<span data-ttu-id="a2ce5-452">Se si legge la sezione di [questo articolo (Linux)][virtual-machines-sizes-linux] e di [questo articolo (Windows)][virtual-machines-sizes-windows] relativa alle VM di serie DS, si noterà anche che sono previste limitazioni ai volumi dei dati per i dischi dell'archiviazione Premium a livello di VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-452">If you are checking out the part of the DS-series VMs in [this article (Linux)][virtual-machines-sizes-linux] and [this article (Windows)][virtual-machines-sizes-windows], you realize that there are data volume limitations to Premium Storage disks on the granularity of the VM level.</span></span> <span data-ttu-id="a2ce5-453">Diverse VM di serie DS o GS prevedono anche limitazioni diverse rispetto al numero di dischi che è possibile montare.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-453">Different DS-series or GS-series VMs also have different limitations in regards to the number of data disks that can be mounted.</span></span> <span data-ttu-id="a2ce5-454">Questi limiti sono documentati nell'articolo indicato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-454">These limits are documented in the article mentioned above as well.</span></span> <span data-ttu-id="a2ce5-455">Questo significa essenzialmente che se, ad esempio, si montano 32 x dischi P30 in una singola VM DS14 NON sarà possibile ottenere 32 x la velocità massima effettiva di un disco P30.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-455">But in essence it means that if you, for example, mount 32 x P30 disks to a single DS14 VM you can NOT get 32 x the maximum throughput of a P30 disk.</span></span> <span data-ttu-id="a2ce5-456">La velocità massima effettiva del livello di VM, in base a quanto documentato nell'articolo, limita invece la velocità effettiva dei dati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-456">Instead the maximum throughput on VM level as documented in the article limits data throughput.</span></span>

<span data-ttu-id="a2ce5-457">Altre informazioni sull'archiviazione Premium sono disponibili qui: <http://azure.microsoft.com/blog/2015/04/16/azure-premium-storage-now-generally-available-2></span><span class="sxs-lookup"><span data-stu-id="a2ce5-457">More information on Premium Storage can be found here: <http://azure.microsoft.com/blog/2015/04/16/azure-premium-storage-now-generally-available-2></span></span>

#### <span data-ttu-id="a2ce5-458"><a name="c55b2c6e-3ca1-4476-be16-16c81927550f"></a>Managed Disks</span><span class="sxs-lookup"><span data-stu-id="a2ce5-458"><a name="c55b2c6e-3ca1-4476-be16-16c81927550f"></a>Managed Disks</span></span>
<span data-ttu-id="a2ce5-459">I Managed Disks sono un nuovo tipo di risorsa in Azure Resource Manager, utilizzabile al posto dei dischi rigidi virtuali archiviati negli account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-459">Managed Disks are a new resource type in Azure Resource Manager that can be used instead of VHDs that are stored in Azure Storage Accounts.</span></span> <span data-ttu-id="a2ce5-460">I Managed Disks si allineano automaticamente al set di disponibilità della macchina virtuale alla quale sono collegati, aumentando pertanto la disponibilità della macchina virtuale e i servizi in esecuzione sulla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-460">Managed Disks automatically align with the Availability Set of the virtual machine they are attached to and therefore increase the availability of your virtual machine and the services that are running on the virtual machine.</span></span> <span data-ttu-id="a2ce5-461">Per altre informazioni, leggere l’[articolo introduttivo](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-461">For more information, read the [overview article](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span></span>

<span data-ttu-id="a2ce5-462">Si consiglia di utilizzare i Managed Disks, in quando semplificano la distribuzione e la gestione delle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-462">We recommend to you use Managed disk, because they simplify the deployment and management of your virtual machines.</span></span>
<span data-ttu-id="a2ce5-463">SAP al momento supporta solo i Managed Disks Premium.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-463">SAP currently only supports Premium Managed Disks.</span></span> <span data-ttu-id="a2ce5-464">Per altre informazioni, vedere la nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-464">For more information, read SAP Note [1928533].</span></span>

#### <a name="azure-storage-accounts"></a><span data-ttu-id="a2ce5-465">Account di archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-465">Azure Storage Accounts</span></span>
<span data-ttu-id="a2ce5-466">Quando si distribuiscono servizi o macchine virtuali in Azure, la distribuzione di dischi rigidi virtuali e immagini di VM può essere organizzata in unità definite account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-466">When deploying services or VMs in Azure, deployment of VHDs and VM Images can be organized in units called Azure Storage Accounts.</span></span> <span data-ttu-id="a2ce5-467">Quando si pianifica una distribuzione di Azure, è necessario considerare con attenzione le restrizioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-467">When planning an Azure deployment, you need to carefully consider the restrictions of Azure.</span></span> <span data-ttu-id="a2ce5-468">Da un lato, è disponibile un numero limitato di account di archiviazione per ogni sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-468">On the one side, there is a limited number of Storage Accounts per Azure subscription.</span></span> <span data-ttu-id="a2ce5-469">Anche se ogni account di archiviazione di Azure può includere un numero elevato di file VHD, è previsto un limite fisso sul totale di IOPS per ogni account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-469">Although each Azure Storage Account can hold a large number of VHD files, there is a fixed limit on the total IOPS per Storage Account.</span></span> <span data-ttu-id="a2ce5-470">Quando si distribuiscono centinaia di VM SAP con sistemi DBMS che creano un numero significativo di chiamate di I/O, è consigliabile distribuire macchine virtuali con DBMS a livelli elevati di IOPS tra più account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-470">When deploying hundreds of SAP VMs with DBMS systems creating significant IO calls, it is recommended to distribute high IOPS DBMS VMs between multiple Azure Storage Accounts.</span></span> <span data-ttu-id="a2ce5-471">Occorre prestare attenzione e non superare il limite attuale di account di archiviazione di Azure per sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-471">Care must be taken not to exceed the current limit of Azure Storage Accounts per subscription.</span></span> <span data-ttu-id="a2ce5-472">Poiché l'archiviazione è una parte essenziale della distribuzione di database per un sistema SAP, questo concetto viene discusso in maggior dettaglio nella [Guida alla distribuzione DBMS][dbms-guide] già citata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-472">Because storage is a vital part of the database deployment for an SAP system, this concept is discussed in more detail in the already referenced [DBMS Deployment Guide][dbms-guide].</span></span>

<span data-ttu-id="a2ce5-473">Altre informazioni sugli account di archiviazione di Azure sono disponibili in [questo articolo][storage-scalability-targets].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-473">More information about Azure Storage Accounts can be found in [this article][storage-scalability-targets].</span></span> <span data-ttu-id="a2ce5-474">Leggendo questo articolo si noteranno differenze nelle limitazioni tra gli account di archiviazione Standard di Azure e gli account di archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-474">Reading this article, you realize that there are differences in the limitations between Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="a2ce5-475">Le differenze principali sono relative al volume di dati che è possibile archiviare in tali account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-475">Major differences are the volume of data that can be stored within such a Storage Account.</span></span> <span data-ttu-id="a2ce5-476">Nell'Archiviazione Standard il volume risulta superiore rispetto all'Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-476">In Standard Storage the volume is a magnitude larger than with Premium Storage.</span></span> <span data-ttu-id="a2ce5-477">D'altra parte, l'account di archiviazione Standard presenta notevoli limitazioni di IOPS (vedere la colonna "Frequenza di richiesta totale"), mentre per l'account di archiviazione Premium di Azure non sono previste tali limitazioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-477">On the other side, the Standard Storage Account is severely limited in IOPS (see column ‘Total Request Rate’), whereas the Azure Premium Storage Account has no such limitation.</span></span> <span data-ttu-id="a2ce5-478">I dettagli e i risultati di queste differenze verranno illustrati durante l'analisi delle distribuzioni di sistemi SAP e in particolare dei server DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-478">We will discuss details and results of these differences when discussing the deployments of SAP systems, especially the DBMS servers.</span></span>

<span data-ttu-id="a2ce5-479">In un account di archiviazione è possibile creare diversi contenitori per finalità di organizzazione e classificazione di diversi dischi rigidi virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-479">Within a Storage Account, you have the possibility to create different containers for the purpose of organizing and categorizing different VHDs.</span></span> <span data-ttu-id="a2ce5-480">Questi contenitori vengono in genere usati ad esempio per separare dischi rigidi virtuali di diverse macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-480">These containers are usually used to, for example, separate VHDs of different VMs.</span></span> <span data-ttu-id="a2ce5-481">L'uso di un solo contenitore o di più contenitori in un singolo account di archiviazione di Azure non comporta alcuna implicazione a livello di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-481">There are no performance implications in using just one container or multiple containers underneath a single Azure Storage Account.</span></span>

<span data-ttu-id="a2ce5-482">In Azure viene usata la convenzione di denominazione seguente per il nome di un disco rigido virtuale, che prevede che venga specificato un nome univoco per il disco rigido virtuale in Azure:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-482">Within Azure a VHD name follows the following naming connection that needs to provide a unique name for the VHD within Azure:</span></span>

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

<span data-ttu-id="a2ce5-483">Come indicato, la stringa precedente deve identificare in modo univoco il disco rigido virtuale archiviato in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-483">As mentioned the string above needs to uniquely identify the VHD that is stored on Azure Storage.</span></span>

### <span data-ttu-id="a2ce5-484"><a name="61678387-8868-435d-9f8c-450b2424f5bd"></a>Rete di Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-484"><a name="61678387-8868-435d-9f8c-450b2424f5bd"></a>Microsoft Azure Networking</span></span>
<span data-ttu-id="a2ce5-485">Microsoft Azure offrirà un'infrastruttura di rete che consente il mapping di tutti gli scenari da realizzare con il software SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-485">Microsoft Azure provides a network infrastructure, which allows the mapping of all scenarios, which we want to realize with SAP software.</span></span> <span data-ttu-id="a2ce5-486">Ecco le funzionalità disponibili:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-486">The capabilities are:</span></span>

* <span data-ttu-id="a2ce5-487">Accesso dall'esterno direttamente alle macchine virtuali tramite Servizi terminal di Windows o ssh/VNC</span><span class="sxs-lookup"><span data-stu-id="a2ce5-487">Access from the outside, directly to the VMs via Windows Terminal Services or ssh/VNC</span></span>
* <span data-ttu-id="a2ce5-488">Accesso ai servizi e a porte specifiche usate dalle applicazioni entro le macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="a2ce5-488">Access to services and specific ports used by applications within the VMs</span></span>
* <span data-ttu-id="a2ce5-489">Comunicazioni interne e risoluzione dei nomi tra un gruppo di macchine virtuali distribuite come macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-489">Internal Communication and Name Resolution between a group of VMs deployed as Azure VMs</span></span>
* <span data-ttu-id="a2ce5-490">Connettività cross-premise tra la rete locale di un cliente e la rete di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-490">Cross-premises Connectivity between a customer’s on-premises network and the Azure network</span></span>
* <span data-ttu-id="a2ce5-491">Connettività tra aree o data center di Azure tra i siti di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-491">Cross Azure Region or data center connectivity between Azure sites</span></span>

<span data-ttu-id="a2ce5-492">Altre informazioni sono disponibili qui: <https://azure.microsoft.com/documentation/services/virtual-network/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-492">More information can be found here: <https://azure.microsoft.com/documentation/services/virtual-network/></span></span>

<span data-ttu-id="a2ce5-493">Esistono diverse possibilità per configurare la risoluzione di nomi e IP in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-493">There are many different possibilities to configure name and IP resolution in Azure.</span></span> <span data-ttu-id="a2ce5-494">In questo documento gli scenari solo cloud si basano sull'impostazione predefinita, che prevede di usare DNS di Azure invece di definire un servizio DNS personalizzato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-494">In this document, Cloud-Only scenarios rely on the default of using Azure DNS (in contrast to defining an own DNS service).</span></span> <span data-ttu-id="a2ce5-495">È anche disponibile un nuovo servizio DNS di Azure, che può essere usato invece di configurare un server DNS personalizzato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-495">There is also a new Azure DNS service, which can be used instead of setting up your own DNS server.</span></span> <span data-ttu-id="a2ce5-496">Altre informazioni sono disponibili in [questo articolo][virtual-networks-manage-dns-in-vnet] e in [questa pagina](https://azure.microsoft.com/services/dns/).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-496">More information can be found in [this article][virtual-networks-manage-dns-in-vnet] and on [this page](https://azure.microsoft.com/services/dns/).</span></span>

<span data-ttu-id="a2ce5-497">Per gli scenari cross-premise ci si basa sul fatto che le istanze locali di AD/OpenLDAP/DNS sono state estese tramite VPN o connessione privata ad Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-497">For cross-premises scenarios, we are relying on the fact that the on-premises AD/OpenLDAP/DNS has been extended via VPN or private connection to Azure.</span></span> <span data-ttu-id="a2ce5-498">Per determinati scenari illustrati in questo documento, può essere necessario che in Azure sia installata una replica di AD/OpenLDAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-498">For certain scenarios as documented here, it might be necessary to have an AD/OpenLDAP replica installed in Azure.</span></span>

<span data-ttu-id="a2ce5-499">La rete e la risoluzione dei nomi sono parti fondamentali della distribuzione di database per un sistema SAP, quindi questo concetto viene discusso in maggior dettaglio nella [Guida alla distribuzione DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-499">Because networking and name resolution is a vital part of the database deployment for an SAP system, this concept is discussed in more detail in the [DBMS Deployment Guide][dbms-guide].</span></span>

##### <a name="azure-virtual-networks"></a><span data-ttu-id="a2ce5-500">Reti virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-500">Azure Virtual Networks</span></span>
<span data-ttu-id="a2ce5-501">La creazione di una rete virtuale di Azure consente di definire l'intervallo di indirizzi degli indirizzi IP privati allocati dalla funzionalità DHCP di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-501">By building up an Azure Virtual Network, you can define the address range of the private IP addresses allocated by Azure DHCP functionality.</span></span> <span data-ttu-id="a2ce5-502">Negli scenari cross-premise, l'intervallo di indirizzi IP definito viene comunque allocato usando DHCP di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-502">In cross-premises scenarios, the IP address range defined is still allocated using DHCP by Azure.</span></span> <span data-ttu-id="a2ce5-503">La risoluzione dei nomi di dominio avviene tuttavia eseguita in locale, presupponendo che le VM facciano parte di un dominio locale, e sarà quindi possibile risolvere indirizzi che si trovano al di là di diversi servizi cloud di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-503">However, Domain Name resolution is done on-premises (assuming that the VMs are a part of an on-premises domain) and hence can resolve addresses beyond different Azure Cloud Services.</span></span>

<span data-ttu-id="a2ce5-504">Ogni macchina virtuale di Azure deve essere connessa a una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-504">Every Virtual Machine in Azure needs to be connected to a Virtual Network.</span></span>

<span data-ttu-id="a2ce5-505">Per informazioni dettagliate, vedere [questo articolo][resource-groups-networking] e [questa pagina](https://azure.microsoft.com/documentation/services/virtual-network/).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-505">More details can be found in [this article][resource-groups-networking] and on [this page](https://azure.microsoft.com/documentation/services/virtual-network/).</span></span>

[comment]: <> (MShermannd TODO Couldn't find an article which includes the OpenLDAP topic + ARM; )
[comment]: <> (MSSedusch <https://channel9.msdn.com/Blogs/Open/Load-balancing-highly-available-Linux-services-on-Windows-Azure-OpenLDAP-and-MySQL>)

> [!NOTE]
> <span data-ttu-id="a2ce5-508">Per impostazione predefinita, dopo la distribuzione di una macchina virtuale non è possibile modificare la configurazione della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-508">By default, once a VM is deployed you cannot change the Virtual Network configuration.</span></span> <span data-ttu-id="a2ce5-509">Le impostazioni di TCP/IP devono essere lasciate sul server DHCP di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-509">The TCP/IP settings must be left to the Azure DHCP server.</span></span> <span data-ttu-id="a2ce5-510">Il comportamento predefinito prevede l'assegnazione di IP dinamici.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-510">Default behavior is Dynamic IP assignment.</span></span>
>
>

<span data-ttu-id="a2ce5-511">L'indirizzo MAC della scheda di rete virtuale potrebbe cambiare, ad esempio dopo il ridimensionamento, e il sistema operativo guest Windows o Linux rileverà la nuova scheda di rete e userà automaticamente il DHCP per assegnare gli indirizzi IP e DNS in questo caso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-511">The MAC address of the virtual network card may change, for example after resize and the Windows or Linux guest OS picks up the new network card and automatically uses DHCP to assign the IP and DNS addresses in this case.</span></span>

##### <a name="static-ip-assignment"></a><span data-ttu-id="a2ce5-512">Assegnazione di indirizzi IP statici</span><span class="sxs-lookup"><span data-stu-id="a2ce5-512">Static IP Assignment</span></span>
<span data-ttu-id="a2ce5-513">È possibile assegnare indirizzi IP fissi o riservati a macchine virtuali in una rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-513">It is possible to assign fixed or reserved IP addresses to VMs within an Azure Virtual Network.</span></span> <span data-ttu-id="a2ce5-514">L'esecuzione di VM in una rete virtuale di Azure offre la possibilità di sfruttare i vantaggi di questa funzionalità se necessario o richiesto per alcuni scenari.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-514">Running the VMs in an Azure Virtual Network opens a great possibility to leverage this functionality if needed or required for some scenarios.</span></span> <span data-ttu-id="a2ce5-515">L'assegnazione di indirizzi IP rimane valida nel corso dell'intera esistenza della macchina virtuale, indipendentemente dal fatto che la VM sia in esecuzione o che sia stata arrestata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-515">The IP assignment remains valid throughout the existence of the VM, independent of whether the VM is running or shutdown.</span></span> <span data-ttu-id="a2ce5-516">Sarà quindi necessario tenere in considerazione il numero complessivo di macchine virtuali, in esecuzione e arrestate, durante la definizione dell'intervallo di indirizzi IP per la rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-516">As a result, you need to take the overall number of VMs (running and stopped VMS) into account when defining the range of IP addresses for the Virtual Network.</span></span> <span data-ttu-id="a2ce5-517">L'indirizzo IP rimane assegnato fino all'eliminazione della macchina virtuale e della rispettiva interfaccia di rete o fino al nuovo annullamento dell'assegnazione dell'indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-517">The IP address remains assigned either until the VM and its Network Interface is deleted or until the IP address gets de-assigned again.</span></span> <span data-ttu-id="a2ce5-518">Per altre informazioni, leggere [questo articolo][virtual-networks-static-private-ip-arm-pportal].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-518">For more information, read [this article][virtual-networks-static-private-ip-arm-pportal].</span></span>

##### <a name="multiple-nics-per-vm"></a><span data-ttu-id="a2ce5-519">Più schede di interfaccia di rete per ogni VM</span><span class="sxs-lookup"><span data-stu-id="a2ce5-519">Multiple NICs per VM</span></span>
<span data-ttu-id="a2ce5-520">È possibile definire più schede di interfaccia di rete virtuali (vNIC, Virtual Network Interface Card) per una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-520">You can define multiple virtual network interface cards (vNIC) for an Azure Virtual Machine.</span></span> <span data-ttu-id="a2ce5-521">La possibilità di usare più vNIC consente di iniziare a configurare la separazione del traffico di rete, ad esempio per indirizzare il traffico client tramite una vNIC e il traffico back-end tramite una seconda vNIC.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-521">With the ability to have multiple vNICs you can start to set up network traffic separation where, for example, client traffic is routed through one vNIC and backend traffic is routed through a second vNIC.</span></span> <span data-ttu-id="a2ce5-522">In base al tipo di macchina virtuale, sono previste diverse limitazioni rispetto al numero di vNIC.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-522">Dependent on the type of VM there are different limitations in regards to the number of vNICs.</span></span> <span data-ttu-id="a2ce5-523">Per informazioni dettagliate precise, funzionalità e limitazioni, vedere questi articoli:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-523">Exact details, functionality, and restrictions can be found in these articles:</span></span>

* <span data-ttu-id="a2ce5-524">[Creare una VM Windows con più schede di interfaccia di rete][virtual-networks-multiple-nics-windows]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-524">[Create a Windows VM with multiple NICs][virtual-networks-multiple-nics-windows]</span></span>
* <span data-ttu-id="a2ce5-525">[Creare una VM Linux con più schede di interfaccia di rete][virtual-networks-multiple-nics-linux]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-525">[Create a Linux VM with multiple NICs][virtual-networks-multiple-nics-linux]</span></span>
* <span data-ttu-id="a2ce5-526">[Distribuire macchine virtuali con più NIC tramite un modello][virtual-network-deploy-multinic-arm-template]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-526">[Deploy multi NIC VMs using a template][virtual-network-deploy-multinic-arm-template]</span></span>
* <span data-ttu-id="a2ce5-527">[Distribuire macchine virtuali con più NIC tramite PowerShell][virtual-network-deploy-multinic-arm-ps]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-527">[Deploy multi NIC VMs using PowerShell][virtual-network-deploy-multinic-arm-ps]</span></span>
* <span data-ttu-id="a2ce5-528">[Distribuire macchine virtuali con più NIC tramite l'interfaccia della riga di comando di Azure][virtual-network-deploy-multinic-arm-cli]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-528">[Deploy multi NIC VMs using the Azure CLI][virtual-network-deploy-multinic-arm-cli]</span></span>

#### <a name="site-to-site-connectivity"></a><span data-ttu-id="a2ce5-529">Connettività da sito a sito</span><span class="sxs-lookup"><span data-stu-id="a2ce5-529">Site-to-Site Connectivity</span></span>
<span data-ttu-id="a2ce5-530">La soluzione cross-premise è costituita da macchine virtuali di Azure e locali collegate tramite una connessione VPN trasparente e permanente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-530">Cross-premises is Azure VMs and On-Premises linked with a transparent and permanent VPN connection.</span></span> <span data-ttu-id="a2ce5-531">Questo diventerà probabilmente il modello di distribuzione SAP più comune in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-531">It is expected to become the most common SAP deployment pattern in Azure.</span></span> <span data-ttu-id="a2ce5-532">Si presuppone che le procedure e i processi operativi relativi alle istanze SAP in Azure debbano funzionare in modo trasparente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-532">The assumption is that operational procedures and processes with SAP instances in Azure should work transparently.</span></span> <span data-ttu-id="a2ce5-533">In altri termini, dovrebbe essere possibile ottenere output da questi sistemi e usare il sistema STMS (SAP Correction and Transport System) per trasferire le modifiche da un sistema di distribuzione in Azure a un sistema di test distribuito in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-533">This means you should be able to print out of these systems as well as use the SAP Transport Management System (TMS) to transport changes from a development system in Azure to a test system, which is deployed on-premises.</span></span> <span data-ttu-id="a2ce5-534">Per altre informazioni sulla modalità da sito a sito, vedere [questo articolo][vpn-gateway-create-site-to-site-rm-powershell]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-534">More documentation around site-to-site can be found in [this article][vpn-gateway-create-site-to-site-rm-powershell]</span></span>

##### <a name="vpn-tunnel-device"></a><span data-ttu-id="a2ce5-535">Dispositivo tunnel VPN</span><span class="sxs-lookup"><span data-stu-id="a2ce5-535">VPN Tunnel Device</span></span>
<span data-ttu-id="a2ce5-536">Per creare una connessione da sito a sito da un data center locale a un data center di Azure, è necessario ottenere e configurare un dispositivo VPN oppure usare il servizio routing e accesso remoto (RRAS), introdotto come componente software con Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-536">In order to create a site-to-site connection (on-premises data center to Azure data center), you need to either obtain and configure a VPN device, or use Routing and Remote Access Service (RRAS) which was introduced as a software component with Windows Server 2012.</span></span>

* <span data-ttu-id="a2ce5-537">[Creare una rete virtuale con una connessione VPN da sito a sito mediante PowerShell][vpn-gateway-create-site-to-site-rm-powershell]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-537">[Create a virtual network with a site-to-site VPN connection using PowerShell][vpn-gateway-create-site-to-site-rm-powershell]</span></span>
* <span data-ttu-id="a2ce5-538">[Informazioni sui dispositivi VPN per le connessioni di gateway VPN da sito a sito][vpn-gateway-about-vpn-devices]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-538">[About VPN devices for Site-to-Site VPN Gateway connections][vpn-gateway-about-vpn-devices]</span></span>
* <span data-ttu-id="a2ce5-539">[Domande frequenti sul gateway VPN][vpn-gateway-vpn-faq]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-539">[VPN Gateway FAQ][vpn-gateway-vpn-faq]</span></span>

![Connessione da sito a sito tra rete locale e Azure][planning-guide-figure-600]

<span data-ttu-id="a2ce5-541">La figura precedente mostra due sottoscrizioni di Azure con intervalli secondari di indirizzi IP riservati per l'uso nelle reti virtuali in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-541">The Figure above shows two Azure subscriptions have IP address subranges reserved for usage in Virtual Networks in Azure.</span></span> <span data-ttu-id="a2ce5-542">La connettività dalla rete locale ad Azure viene stabilita tramite VPN.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-542">The connectivity from the on-premises network to Azure is established via VPN.</span></span>

#### <a name="point-to-site-vpn"></a><span data-ttu-id="a2ce5-543">VPN da punto a sito</span><span class="sxs-lookup"><span data-stu-id="a2ce5-543">Point-to-Site VPN</span></span>
<span data-ttu-id="a2ce5-544">La VPN da punto a sito richiede che ogni computer client si connetta ad Azure mediante la propria VPN.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-544">Point-to-site VPN requires every client machine to connect with its own VPN into Azure.</span></span> <span data-ttu-id="a2ce5-545">La connettività da punto a sito non risulta pratica per gli scenari SAP esaminati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-545">For the SAP scenarios we are looking at, point-to-site connectivity is not practical.</span></span> <span data-ttu-id="a2ce5-546">Non vengono quindi forniti altri riferimenti alla connettività VPN da punto a sito.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-546">Therefore, no further references are given to point-to-site VPN connectivity.</span></span>

<span data-ttu-id="a2ce5-547">Ulteriori informazioni sono disponibili qui</span><span class="sxs-lookup"><span data-stu-id="a2ce5-547">More information can be found here</span></span>
* [<span data-ttu-id="a2ce5-548">Configurare una connessione da punto a sito a una rete virtuale usando il portale di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-548">Configure a Point-to-Site connection to a VNet using the Azure portal</span></span>](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal)
* [<span data-ttu-id="a2ce5-549">Configurare una connessione da punto a sito a una rete virtuale usando PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2ce5-549">Configure a Point-to-Site connection to a VNet using PowerShell</span></span>](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-rm-ps)

#### <a name="multi-site-vpn"></a><span data-ttu-id="a2ce5-550">VPN multisito</span><span class="sxs-lookup"><span data-stu-id="a2ce5-550">Multi-Site VPN</span></span>
<span data-ttu-id="a2ce5-551">Azure offre attualmente anche la possibilità di creare connettività VPN multisito per una sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-551">Azure also nowadays offers the possibility to create Multi-Site VPN connectivity for one Azure subscription.</span></span> <span data-ttu-id="a2ce5-552">In precedenza una singola sottoscrizione era limitata a una connessione VPN da sito a sito.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-552">Previously a single subscription was limited to one site-to-site VPN connection.</span></span> <span data-ttu-id="a2ce5-553">Questa limitazione è stata rimossa grazie alle connessioni VPN multisito per una singola sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-553">This limitation went away with Multi-Site VPN connections for a single subscription.</span></span> <span data-ttu-id="a2ce5-554">Questo consente di usare più aree di Azure per una sottoscrizione specifica tramite le configurazioni cross-premise.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-554">This makes it possible to leverage more than one Azure Region for a specific subscription through cross-premises configurations.</span></span>

<span data-ttu-id="a2ce5-555">Per altre informazioni, vedere [questo articolo][vpn-gateway-create-site-to-site-rm-powershell]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-555">For more documentation, please see [this article][vpn-gateway-create-site-to-site-rm-powershell]</span></span>

[comment]: <> (MShermannd TODO found no ARM docu link)

#### <a name="vnet-to-vnet-connection"></a><span data-ttu-id="a2ce5-557">Connessione da rete virtuale a rete virtuale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-557">VNet to VNet Connection</span></span>
<span data-ttu-id="a2ce5-558">Se si usa una VPN multisito, è necessario configurare una rete virtuale di Azure separata in ogni area.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-558">Using Multi-Site VPN, you need to configure a separate Azure Virtual Network in each of the regions.</span></span> <span data-ttu-id="a2ce5-559">Molto spesso è tuttavia necessario che i componenti software delle diverse aree comunichino tra loro.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-559">However very often you have the requirement that the software components in the different regions should communicate with each other.</span></span> <span data-ttu-id="a2ce5-560">Queste comunicazioni non dovrebbero essere idealmente indirizzate da un'area di Azure all'ambiente locale e quindi all'altra area di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-560">Ideally this communication should not be routed from one Azure Region to on-premises and from there to the other Azure Region.</span></span> <span data-ttu-id="a2ce5-561">Per semplificare, Azure offre la possibilità di configurare una connessione da una rete virtuale di Azure in un'area a un'altra rete virtuale di Azure ospitata in un'altra area.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-561">To shortcut, Azure offers the possibility to configure a connection from one Azure Virtual Network in one region to another Azure Virtual Network hosted in another region.</span></span> <span data-ttu-id="a2ce5-562">Questa funzionalità viene definita connessione da rete virtuale a rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-562">This functionality is called VNet-to-VNet connection.</span></span> <span data-ttu-id="a2ce5-563">Altri dettagli su questa funzionalità sono disponibili qui: <https://azure.microsoft.com/documentation/articles/vpn-gateway-vnet-vnet-rm-ps/>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-563">More details on this functionality can be found here: <https://azure.microsoft.com/documentation/articles/vpn-gateway-vnet-vnet-rm-ps/>.</span></span>

#### <a name="private-connection-to-azure--expressroute"></a><span data-ttu-id="a2ce5-564">Connessione privata ad Azure: ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="a2ce5-564">Private Connection to Azure – ExpressRoute</span></span>
<span data-ttu-id="a2ce5-565">Microsoft Azure ExpressRoute consente la creazione di connessioni private tra i data center di Azure e l'infrastruttura locale del cliente o in un ambiente con condivisione percorso dati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-565">Microsoft Azure ExpressRoute allows the creation of private connections between Azure data centers and either the customer's on-premises infrastructure or in a co-location environment.</span></span> <span data-ttu-id="a2ce5-566">ExpressRoute viene offerto da diversi provider di VPN MPLS (con scambio di pacchetto) o da altri provider di servizi di rete.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-566">ExpressRoute is offered by various MPLS (packet switched) VPN providers or other Network Service Providers.</span></span> <span data-ttu-id="a2ce5-567">Le connessioni ExpressRoute non sfruttano la rete Internet pubblica.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-567">ExpressRoute connections do not go over the public Internet.</span></span> <span data-ttu-id="a2ce5-568">Le connessioni ExpressRoute offrono un livello di sicurezza superiore, maggiore affidabilità tramite più circuiti paralleli, velocità più elevate e minori latenze rispetto alle connessioni Internet tradizionali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-568">ExpressRoute connections offer higher security, more reliability through multiple parallel circuits, faster speeds, and lower latencies than typical connections over the Internet.</span></span>

<span data-ttu-id="a2ce5-569">Altri dettagli su Azure ExpressRoute e sulle offerte sono disponibili qui:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-569">Find more details on Azure ExpressRoute and offerings here:</span></span>

* <span data-ttu-id="a2ce5-570"><https://azure.microsoft.com/documentation/services/expressroute/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-570"><https://azure.microsoft.com/documentation/services/expressroute/></span></span>
* <span data-ttu-id="a2ce5-571"><https://azure.microsoft.com/pricing/details/expressroute/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-571"><https://azure.microsoft.com/pricing/details/expressroute/></span></span>
* <span data-ttu-id="a2ce5-572"><https://azure.microsoft.com/documentation/articles/expressroute-faqs/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-572"><https://azure.microsoft.com/documentation/articles/expressroute-faqs/></span></span>

<span data-ttu-id="a2ce5-573">ExpressRoute abilita più sottoscrizioni di Azure tramite un circuito ExpressRoute, come illustrato qui</span><span class="sxs-lookup"><span data-stu-id="a2ce5-573">Express Route enables multiple Azure subscriptions through one ExpressRoute circuit as documented here</span></span>

* <span data-ttu-id="a2ce5-574"><https://azure.microsoft.com/documentation/articles/expressroute-howto-linkvnet-arm/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-574"><https://azure.microsoft.com/documentation/articles/expressroute-howto-linkvnet-arm/></span></span>
* <span data-ttu-id="a2ce5-575"><https://azure.microsoft.com/documentation/articles/expressroute-howto-circuit-arm/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-575"><https://azure.microsoft.com/documentation/articles/expressroute-howto-circuit-arm/></span></span>

#### <a name="forced-tunneling-in-case-of-cross-premises"></a><span data-ttu-id="a2ce5-576">Tunneling forzato in caso di scenari cross-premise</span><span class="sxs-lookup"><span data-stu-id="a2ce5-576">Forced tunneling in case of cross-premises</span></span>
<span data-ttu-id="a2ce5-577">Per le VM aggiunte a domini locali tramite connessioni da sito a sito, da punto a sito o ExpressRoute, è necessario assicurarsi che le impostazioni del proxy Internet vengano distribuite anche per tutti gli utenti in tali macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-577">For VMs joining on-premises domains through site-to-site, point-to-site or ExpressRoute, you need to make sure that the Internet proxy settings are getting deployed for all the users in those VMs as well.</span></span> <span data-ttu-id="a2ce5-578">Per impostazione predefinita, il software in esecuzione in queste VM o gli utenti che usano un browser per accedere a Internet non passano attraverso il proxy aziendale, ma si connettono direttamente a Internet tramite Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-578">By default, software running in those VMs or users using a browser to access the internet would not go through the company proxy, but would connect straight through Azure to the internet.</span></span> <span data-ttu-id="a2ce5-579">L'impostazione del proxy, tuttavia, non costituisce una soluzione perfetta per l'indirizzamento del traffico attraverso il proxy aziendale, poiché il software e i servizi sono responsabili della verifica del proxy.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-579">But even the proxy setting is not a 100% solution to direct the traffic through the company proxy since it is responsibility of software and services to check for the proxy.</span></span> <span data-ttu-id="a2ce5-580">Se il software in esecuzione nella VM non esegue la verifica o se un amministratore modifica le impostazioni, il traffico verso Internet può essere reindirizzato di nuovo direttamente a Internet tramite Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-580">If software running in the VM is not doing that or an administrator manipulates the settings, traffic to the Internet can be detoured again directly through Azure to the Internet.</span></span>

<span data-ttu-id="a2ce5-581">Per evitare questo problema, è possibile configurare il tunneling forzato con connettività da sito a sito tra l'ambiente locale e Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-581">In order to avoid this, you can configure Forced Tunneling with site-to-site connectivity between on-premises and Azure.</span></span> <span data-ttu-id="a2ce5-582">La descrizione dettagliata della funzionalità di tunneling forzato è stata pubblicata qui <https://azure.microsoft.com/documentation/articles/vpn-gateway-forced-tunneling-rm/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-582">The detailed description of the Forced Tunneling feature is published here <https://azure.microsoft.com/documentation/articles/vpn-gateway-forced-tunneling-rm/></span></span>

<span data-ttu-id="a2ce5-583">Il tunneling forzato con ExpressRoute viene abilitato dai clienti mediante l'annuncio di una route predefinita tramite le sessioni di peering BGP ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-583">Forced Tunneling with ExpressRoute is enabled by customers advertising a default route via the ExpressRoute BGP peering sessions.</span></span>

#### <a name="summary-of-azure-networking"></a><span data-ttu-id="a2ce5-584">Riepilogo dei servizi di rete di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-584">Summary of Azure Networking</span></span>
<span data-ttu-id="a2ce5-585">Questo capitolo include molti aspetti importanti relativi ai servizi di rete di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-585">This chapter contained many important points about Azure Networking.</span></span> <span data-ttu-id="a2ce5-586">Ecco un riepilogo degli aspetti principali:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-586">Here is a summary of the main points:</span></span>

* <span data-ttu-id="a2ce5-587">Le reti virtuali di Azure consentono di configurare la rete in base alle proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-587">Azure Virtual Networks allows to set up the network according to your own needs</span></span>
* <span data-ttu-id="a2ce5-588">È possibile usare le reti virtuali di Azure per assegnare intervalli di indirizzi IP a macchine virtuali o assegnare indirizzi IP fissi alle VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-588">Azure Virtual Networks can be leveraged to assign IP address ranges to VMs or assign fixed IP addresses to VMs</span></span>
* <span data-ttu-id="a2ce5-589">Per configurare una connessione da sito a sito o da punto a sito, è necessario creare prima di tutto una rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-589">To set up a Site-To-Site or Point-To-Site connection you need to create an Azure Virtual Network first</span></span>
* <span data-ttu-id="a2ce5-590">Dopo la distribuzione di una macchina virtuale, non è più possibile cambiare la rete virtuale assegnata alla VM</span><span class="sxs-lookup"><span data-stu-id="a2ce5-590">Once a virtual machine has been deployed, it is no longer possible to change the Virtual Network assigned to the VM</span></span>

### <a name="quotas-in-azure-virtual-machine-services"></a><span data-ttu-id="a2ce5-591">Quote nei servizi Macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-591">Quotas in Azure Virtual Machine Services</span></span>
<span data-ttu-id="a2ce5-592">È importante chiarire che l'infrastruttura di archiviazione e di rete è condivisa tra macchine virtuali che eseguono un'ampia varietà di servizi nell'infrastruttura di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-592">We need to be clear about the fact that the storage and network infrastructure is shared between VMs running a variety of services in the Azure infrastructure.</span></span> <span data-ttu-id="a2ce5-593">Analogamente ai data center personalizzati del cliente, l'overprovisioning di alcune risorse dell'infrastruttura viene effettuato solo parzialmente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-593">And just as in the customer’s own data centers, over-provisioning of some of the infrastructure resources does take place to a degree.</span></span> <span data-ttu-id="a2ce5-594">La piattaforma Microsoft Azure usa quote di dischi, CPU, rete e di altro tipo per limitare l'utilizzo di risorse e preservare prestazioni coerenti e deterministiche.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-594">The Microsoft Azure Platform uses disk, CPU, network, and other quotas to limit the resource consumption and to preserve consistent and deterministic performance.</span></span>  <span data-ttu-id="a2ce5-595">I diversi tipi di VM (A5, A6 e così via) prevedono quote diverse per il numero di dischi e per le risorse di CPU, RAM e rete.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-595">The different VM types (A5, A6, etc.) have different quotas for the number of disks, CPU, RAM, and Network.</span></span>

> [!NOTE]
> <span data-ttu-id="a2ce5-596">Le risorse di CPU e di memoria dei tipi di macchine virtuali supportati da SAP vengono preallocate nei nodi host.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-596">CPU and memory resources of the VM types supported by SAP are pre-allocated on the host nodes.</span></span> <span data-ttu-id="a2ce5-597">Dopo la distribuzione della VM, le risorse sull'host sono quindi disponibili in base a quanto definito dal tipo di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-597">This means that once the VM is deployed, the resources on the host are available as defined by the VM type.</span></span>
>
>

<span data-ttu-id="a2ce5-598">Quando esegue la pianificazione per SAP e se ne definiscono le dimensioni in soluzioni di Azure, è necessario tenere in considerazione le quote per ogni dimensione di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-598">When planning and sizing SAP on Azure solutions the quotas for each virtual machine size must be considered.</span></span> <span data-ttu-id="a2ce5-599">Le quote delle VM sono descritte [qui (Linux)][virtual-machines-sizes-linux] e [qui (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-599">The VM quotas are described [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="a2ce5-600">Le quote descritte rappresentano i valori massimi teorici.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-600">The quotas described represent the theoretical maximum values.</span></span>  <span data-ttu-id="a2ce5-601">Il limite di IOPS per ogni disco può essere raggiunto con valori I/O ridotti (8 KB), ma è possibile che non venga raggiunto con valori I/O elevati (1 MB).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-601">The limit of IOPS per disk may be achieved with small IOs (8kb) but possibly may not be achieved with large IOs (1Mb).</span></span>  <span data-ttu-id="a2ce5-602">Il limite di IOPS viene applicato a livello dei singoli dischi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-602">The IOPS limit is enforced on the granularity of single disk.</span></span>

<span data-ttu-id="a2ce5-603">È possibile usare l'albero delle decisioni seguente come strumento approssimativo per decidere se un sistema SAP è adatto ai servizi inclusi in Macchine virtuali di Azure e alle relative funzionalità oppure se un sistema esistente deve essere configurato in modo diverso per essere distribuito in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-603">As a rough decision tree to decide whether an SAP system fits into Azure Virtual Machine Services and its capabilities or whether an existing system needs to be configured differently in order to deploy the system on Azure, the decision tree below can be used:</span></span>

![Albero delle decisioni relativo alla possibilità di distribuire SAP in Azure][planning-guide-figure-700]

<span data-ttu-id="a2ce5-605">**Passaggio 1**: le informazioni più importanti da cui iniziare sono i requisiti SAPS per uno specifico sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-605">**Step 1**: The most important information to start with is the SAPS requirement for a given SAP system.</span></span> <span data-ttu-id="a2ce5-606">I requisiti SAPS devono essere suddivisi tra la parte DBMS e la parte dell'applicazione SAP, anche se il sistema SAP è già distribuito in locale in una configurazione a 2 livelli.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-606">The SAPS requirements need to be separated out into the DBMS part and the SAP application part, even if the SAP system is already deployed on-premises in a 2-tier configuration.</span></span> <span data-ttu-id="a2ce5-607">Per i sistemi esistenti, i valori SAPS correlati all'hardware in uso spesso possono essere determinati o stimati in base agli attuali benchmark SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-607">For existing systems, the SAPS related to the hardware in use often can be determined or estimated based on existing SAP benchmarks.</span></span> <span data-ttu-id="a2ce5-608">I risultati sono disponibili qui: <http://global.sap.com/campaigns/benchmark/index.epx>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-608">The results can be found here: <http://global.sap.com/campaigns/benchmark/index.epx>.</span></span>
<span data-ttu-id="a2ce5-609">Per i sistemi SAP appena distribuiti, è necessario eseguire un esercizio di ridimensionamento per determinare i requisiti SAPS del sistema.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-609">For newly deployed SAP systems, you should have gone through a sizing exercise, which should determine the SAPS requirements of the system.</span></span>
<span data-ttu-id="a2ce5-610">Per informazioni sul ridimensionamento di SAP in Azure, vedere anche questo post di blog e il documento allegato: <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span><span class="sxs-lookup"><span data-stu-id="a2ce5-610">See also this blog and attached document for SAP sizing on Azure: <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="a2ce5-611">**Passaggio 2**: per i sistemi esistenti, è necessario misurare il volume e le operazioni I/O al secondo nel server DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-611">**Step 2**: For existing systems, the I/O volume and I/O operations per second on the DBMS server should be measured.</span></span> <span data-ttu-id="a2ce5-612">Per i sistemi appena pianificati, l'esercizio di ridimensionamento per il nuovo sistema deve fornire anche un'idea approssimativa dei requisiti I/O sul lato DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-612">For newly planned systems, the sizing exercise for the new system also should give rough ideas of the I/O requirements on the DBMS side.</span></span> <span data-ttu-id="a2ce5-613">In caso di dubbi, è opportuno eseguire un modello di verifica.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-613">If unsure, you eventually need to conduct a Proof of Concept.</span></span>

<span data-ttu-id="a2ce5-614">**Passaggio 3**: confrontare i requisiti SAPS per il server DBMS con i valori SAPS forniti dai diversi tipi di VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-614">**Step 3**: Compare the SAPS requirement for the DBMS server with the SAPS the different VM types of Azure can provide.</span></span> <span data-ttu-id="a2ce5-615">Le informazioni sui valori SAPS dei diversi tipi di VM di Azure sono documentate nella nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-615">The information on SAPS of the different Azure VM types is documented in SAP Note [1928533].</span></span> <span data-ttu-id="a2ce5-616">È opportuno concentrarsi prima di tutto sulla macchina virtuale DBMS perché, nella maggior parte delle distribuzioni, il livello di database è il livello di un sistema SAP NetWeaver che viene ridimensionato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-616">The focus should be on the DBMS VM first since the database layer is the layer in an SAP NetWeaver system that does not scale out in the majority of deployments.</span></span> <span data-ttu-id="a2ce5-617">Al contrario, il livello applicazione SAP può essere scalato orizzontalmente. Se nessuno dei tipi di macchine virtuali di Azure supportati da SAP riesce a offrire i valori SAPS richiesti, il carico di lavoro del sistema SAP pianificato non può essere eseguito in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-617">In contrast, the SAP application layer can be scaled out. If none of the SAP supported Azure VM types can deliver the required SAPS, the workload of the planned SAP system can’t be run on Azure.</span></span> <span data-ttu-id="a2ce5-618">È necessario distribuire il sistema locale o modificare il volume del carico di lavoro per il sistema.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-618">You either need to deploy the system on-premises or you need to change the workload volume for the system.</span></span>

<span data-ttu-id="a2ce5-619">**Passaggio 4**: come documentato [qui (Linux)][virtual-machines-sizes-linux] e [qui (Windows)][virtual-machines-sizes-windows], Azure applica una quota di operazioni di I/O al secondo a ogni disco a prescindere dall'uso dell'archiviazione Standard o dell'archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-619">**Step 4**: As documented [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows], Azure enforces an IOPS quota per disk independent whether you use Standard Storage or Premium Storage.</span></span> <span data-ttu-id="a2ce5-620">A seconda del tipo di macchina virtuale, il numero di dischi che può essere montato varia.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-620">Dependent on the VM type, the number of data disks, which can be mounted varies.</span></span> <span data-ttu-id="a2ce5-621">Di conseguenza, è possibile calcolare un numero massimo di operazioni di I/O al secondo che può essere ottenuto con i singoli tipi di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-621">As a result, you can calculate a maximum IOPS number that can be achieved with each of the different VM types.</span></span> <span data-ttu-id="a2ce5-622">A seconda del layout del file di database, è possibile eseguire lo striping dei dischi, in modo da ottenere un solo volume nel sistema operativo guest.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-622">Dependent on the database file layout, you can stripe disks to become one volume in the guest OS.</span></span> <span data-ttu-id="a2ce5-623">Tuttavia, se il volume corrente di operazioni di I/O al secondo di un sistema SAP distribuito supera i limiti calcolati per il tipo di macchina virtuale più esteso di Azure e se non è possibile alcuna compensazione aggiungendo altra memoria, gli effetti sul carico di lavoro del sistema SAP possono essere significativi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-623">However, if the current IOPS volume of a deployed SAP system exceeds the calculated limits of the largest VM type of Azure and if there is no chance to compensate with more memory, the workload of the SAP system can be impacted severely.</span></span> <span data-ttu-id="a2ce5-624">In questi casi, si arriva a un punto in cui non è opportuno distribuire il sistema in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-624">In such cases, you can hit a point where you should not deploy the system on Azure.</span></span>

<span data-ttu-id="a2ce5-625">**Passaggio 5**: soprattutto nei sistemi SAP distribuiti in locale in configurazioni a 2 livelli, è probabile che il sistema debba essere configurato in Azure con una configurazione a 3 livelli.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-625">**Step 5**: Especially in SAP systems, which are deployed on-premises in 2-Tier configurations, the chances are that the system might need to be configured on Azure in a 3-Tier configuration.</span></span> <span data-ttu-id="a2ce5-626">In questo passaggio è necessario controllare se nel livello applicazione SAP è presente un componente che non può essere scalato orizzontalmente e non può essere adattato per le risorse di CPU e memoria offerte dai diversi tipi di macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-626">In this step, you need to check whether there is a component in the SAP application layer, which can’t be scaled out and which would not fit into the CPU and memory resources the different Azure VM types offer.</span></span> <span data-ttu-id="a2ce5-627">Se è effettivamente presente un componente di questo tipo, il sistema SAP e il relativo carico di lavoro non possono essere distribuiti in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-627">If there indeed is such a component, the SAP system and its workload can’t be deployed into Azure.</span></span> <span data-ttu-id="a2ce5-628">Tuttavia, se è possibile scalare orizzontalmente i componenti dell'applicazione SAP in più macchine virtuali di Azure, il sistema può essere distribuito in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-628">But if you can scale out the SAP application components into multiple Azure VMs, the system can be deployed into Azure.</span></span>

<span data-ttu-id="a2ce5-629">**Passaggio 6**: se i componenti dei livelli applicazione SAP e DBMS possono essere eseguiti nelle VM di Azure, è necessario definire la configurazione per:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-629">**Step 6**: If the DBMS and SAP application layer components can be run in Azure VMs, the configuration needs to be defined with regard to:</span></span>

* <span data-ttu-id="a2ce5-630">Numero di macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-630">Number of Azure VMs</span></span>
* <span data-ttu-id="a2ce5-631">Tipi di macchine virtuali per i singoli componenti</span><span class="sxs-lookup"><span data-stu-id="a2ce5-631">VM types for the individual components</span></span>
* <span data-ttu-id="a2ce5-632">Numero di dischi rigidi virtuali nella macchina virtuale DBMS per fornire un numero sufficiente di operazioni di I/O al secondo</span><span class="sxs-lookup"><span data-stu-id="a2ce5-632">Number of VHDs in DBMS VM to provide enough IOPS</span></span>

## <a name="managing-azure-assets"></a><span data-ttu-id="a2ce5-633">Gestione degli asset di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-633">Managing Azure Assets</span></span>
### <a name="azure-portal"></a><span data-ttu-id="a2ce5-634">Portale di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-634">Azure Portal</span></span>
<span data-ttu-id="a2ce5-635">Il portale di Azure è una delle tre interfacce con cui gestire le distribuzioni di macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-635">The Azure portal is one of three interfaces to manage Azure VM deployments.</span></span> <span data-ttu-id="a2ce5-636">Le attività di gestione di base, come la distribuzione di macchine virtuali da immagini, possono essere eseguite dal portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-636">The basic management tasks, like deploying VMs from images, can be done through the Azure portal.</span></span> <span data-ttu-id="a2ce5-637">Un'altra attività che il portale di Azure riesce a gestire in modo ottimale è la creazione di account di archiviazione, reti virtuali e altri componenti di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-637">In addition, the creation of Storage Accounts, Virtual Networks, and other Azure components are also tasks the Azure portal can handle very well.</span></span> <span data-ttu-id="a2ce5-638">Tuttavia, funzionalità quali il caricamento di dischi rigidi virtuali da locale ad Azure o la copia di un disco rigido virtuale in Azure sono attività che richiedono strumenti di terze parti o l'amministrazione con PowerShell o l'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-638">However, functionality like uploading VHDs from on-premises to Azure or copying a VHD within Azure are tasks, which require either third-party tools or administration through PowerShell or CLI.</span></span>

![Portale di Microsoft Azure: panoramica delle macchine virtuali][planning-guide-figure-800]

[comment]: <> (MSSedusch * <https://azure.microsoft.com/documentation/articles/virtual-networks-create-vnet-arm-pportal/>)
[comment]: <> (MSSedusch * <https://azure.microsoft.com/documentation/articles/virtual-machines-windows-tutorial/>)

<span data-ttu-id="a2ce5-642">Le attività di amministrazione e configurazione per l'istanza della macchina virtuale possono essere eseguite dal portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-642">Administration and configuration tasks for the Virtual Machine instance are possible from within the Azure portal.</span></span>

<span data-ttu-id="a2ce5-643">Oltre a riavviare e arrestare una macchina virtuale, è possibile collegare, scollegare e creare dischi dati per l'istanza della macchina virtuale, acquisire l'istanza per la preparazione dell'immagine e configurare le dimensioni dell'istanza della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-643">Besides restarting and shutting down a Virtual Machine you can also attach, detach, and create data disks for the Virtual Machine instance, to capture the instance for image preparation and configure the size of the Virtual Machine instance.</span></span>

<span data-ttu-id="a2ce5-644">Il portale di Azure fornisce funzionalità di base per distribuire e configurare le macchine virtuali e molti altri servizi di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-644">The Azure portal provides basic functionality to deploy and configure VMs and many other Azure services.</span></span> <span data-ttu-id="a2ce5-645">Tuttavia non tutte le funzionalità disponibili sono coperte dal portale di Azure,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-645">However not all available functionality is covered by the Azure portal.</span></span> <span data-ttu-id="a2ce5-646">ad esempio, non è possibile:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-646">In the Azure portal, it’s not possible to perform tasks like:</span></span>

* <span data-ttu-id="a2ce5-647">Caricare i dischi rigidi virtuali in Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-647">Uploading VHDs to Azure</span></span>
* <span data-ttu-id="a2ce5-648">Copiare macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="a2ce5-648">Copying VMs</span></span>

[comment]: <> (MShermannd TODO what about automation service for SAP VMs ? )
[comment]: <> (MSSedusch deployment of multiple VMs os meanwhile possible)
[comment]: <> (MSSedusch Also any type of automation regarding deployment is not possible with the Azure portal. Attività quali la distribuzione con script di più macchine virtuali non possono essere eseguite con il portale di Azure.)

### <a name="management-via-microsoft-azure-powershell-cmdlets"></a><span data-ttu-id="a2ce5-652">Gestione con i cmdlet di Microsoft Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2ce5-652">Management via Microsoft Azure PowerShell cmdlets</span></span>
<span data-ttu-id="a2ce5-653">Windows PowerShell è un framework potente ed estensibile che è stato ampiamente adottato dai clienti che distribuiscono grandi quantità di sistemi in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-653">Windows PowerShell is a powerful and extensible framework that has been widely adopted by customers deploying larger numbers of systems in Azure.</span></span> <span data-ttu-id="a2ce5-654">Dopo l'installazione dei cmdlet di PowerShell in un desktop, un portatile o una stazione di gestione dedicata, i cmdlet di PowerShell possono essere eseguiti in modalità remota.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-654">After the installation of PowerShell cmdlets on a desktop, laptop or dedicated management station, the PowerShell cmdlets can be run remotely.</span></span>

<span data-ttu-id="a2ce5-655">Il processo di abilitazione di un desktop/portatile locale per l'uso dei cmdlet di Azure PowerShell e di configurazione dei cmdlet per l'uso con le sottoscrizioni di Azure è descritto in [questo articolo][powershell-install-configure].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-655">The process to enable a local desktop/laptop for the usage of Azure PowerShell cmdlets and how to configure those for the usage with the Azure subscription(s) is described in [this article][powershell-install-configure].</span></span>

<span data-ttu-id="a2ce5-656">Informazioni più dettagliate su come installare, aggiornare e configurare i cmdlet di Azure PowerShell sono disponibili anche in [questo capitolo della Guida alla distribuzione][deployment-guide-4.1].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-656">More detailed steps on how to install, update, and configure the Azure PowerShell cmdlets can also be found in [this chapter of the Deployment Guide][deployment-guide-4.1].</span></span>

<span data-ttu-id="a2ce5-657">In base all'esperienza dei clienti, finora PowerShell (PS) è risultato senza dubbio lo strumento più potente per distribuire le macchine virtuali e per creare istruzioni personalizzate durante la distribuzione di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-657">Customer experience so far has been that PowerShell (PS) is certainly the more powerful tool to deploy VMs and to create custom steps in the deployment of VMs.</span></span> <span data-ttu-id="a2ce5-658">Tutti i clienti che eseguono istanze SAP in Azure usano i cmdlet di PS per integrare le attività di gestione che eseguono nel portale di Azure oppure usano i cmdlet in modo esclusivo per gestire le distribuzioni in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-658">All of the customers running SAP instances in Azure are using PS cmdlets to supplement management tasks they do in the Azure portal or are even using PS cmdlets exclusively to manage their deployments in Azure.</span></span> <span data-ttu-id="a2ce5-659">I cmdlet specifici di Azure condividono la stessa convenzione di denominazione di oltre 2000 altri cmdlet correlati a Windows, quindi l'uso di questi cmdlet risulta estremamente semplice per gli amministratori di Windows.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-659">Since the Azure-specific cmdlets share the same naming convention as the more than 2000 Windows-related cmdlets, it is an easy task for Windows administrators to leverage those cmdlets.</span></span>

<span data-ttu-id="a2ce5-660">Per esempi, vedere qui: <http://blogs.technet.com/b/keithmayer/archive/2015/07/07/18-steps-for-end-to-end-iaas-provisioning-in-the-cloud-with-azure-resource-manager-arm-powershell-and-desired-state-configuration-dsc.aspx></span><span class="sxs-lookup"><span data-stu-id="a2ce5-660">See example here: <http://blogs.technet.com/b/keithmayer/archive/2015/07/07/18-steps-for-end-to-end-iaas-provisioning-in-the-cloud-with-azure-resource-manager-arm-powershell-and-desired-state-configuration-dsc.aspx></span></span>

[comment]: <> (MShermannd TODO describe new CLI command when tested )
<span data-ttu-id="a2ce5-662">L'estensione di monitoraggio di Azure per SAP (vedere il capitolo [Soluzione di monitoraggio di Azure per SAP][planning-guide-9.1] in questo documento) può essere distribuita solo con PowerShell o l'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-662">Deployment of the Azure Monitoring Extension for SAP (see chapter [Azure Monitoring Solution for SAP][planning-guide-9.1] in this document) is only possible via PowerShell or CLI.</span></span> <span data-ttu-id="a2ce5-663">È quindi necessario installare e configurare PowerShell o l'interfaccia della riga di comando quando si distribuisce o si amministra un sistema SAP NetWeaver in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-663">Therefore it is mandatory to set up and configure PowerShell or CLI when deploying or administering an SAP NetWeaver system in Azure.</span></span>  

<span data-ttu-id="a2ce5-664">Con l'introduzione di nuove funzionalità in Azure, verranno aggiunti nuovi cmdlet di PS che richiedono un aggiornamento dei cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-664">As Azure provides more functionality, new PS cmdlets are going to be added that requires an update of the cmdlets.</span></span> <span data-ttu-id="a2ce5-665">Per questo motivo, è opportuno visitare il sito Download di Azure <https://azure.microsoft.com/downloads/> almeno una volta al mese per scaricare una nuova versione dei cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-665">Therefore it makes sense to check the Azure Download site at least once the month <https://azure.microsoft.com/downloads/> for a new version of the cmdlets.</span></span> <span data-ttu-id="a2ce5-666">La nuova versione viene installata su quella precedente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-666">The new version is installed on top of the older version.</span></span>

<span data-ttu-id="a2ce5-667">Per un elenco generale dei comandi di PowerShell correlati ad Azure, vedere <https://docs.microsoft.com/powershell/azure/overview>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-667">For a general list of Azure-related PowerShell commands check here: <https://docs.microsoft.com/powershell/azure/overview>.</span></span>

### <a name="management-via-microsoft-azure-cli-commands"></a><span data-ttu-id="a2ce5-668">Gestione con i comandi dell'interfaccia della riga di comando di Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-668">Management via Microsoft Azure CLI commands</span></span>
<span data-ttu-id="a2ce5-669">PowerShell potrebbe non essere la soluzione ottimale per i clienti che usano Linux e vogliono gestire le risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-669">For customers who use Linux and want to manage Azure resources Powershell might not be an option.</span></span> <span data-ttu-id="a2ce5-670">Microsoft offre l'interfaccia della riga di comando di Azure come alternativa.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-670">Microsoft offers Azure CLI as an alternative.</span></span>
<span data-ttu-id="a2ce5-671">L'interfaccia della riga di comando di Azure fornisce un insieme di comandi open source e multipiattaforma per utilizzare la piattaforma Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-671">The Azure CLI provides a set of open source, cross-platform commands for working with the Azure Platform.</span></span> <span data-ttu-id="a2ce5-672">Fornisce gran parte delle funzionalità disponibili nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-672">The Azure CLI provides much of the same functionality found in the Azure portal.</span></span>

<span data-ttu-id="a2ce5-673">Per informazioni sull'installazione, la configurazione e l'uso dei comandi dell'interfaccia della riga di comando per eseguire attività di Azure, vedere</span><span class="sxs-lookup"><span data-stu-id="a2ce5-673">For information about installation, configuration and how to use CLI commands to accomplish Azure tasks see</span></span>

* <span data-ttu-id="a2ce5-674">[Installare l'interfaccia della riga di comando di Azure][xplat-cli]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-674">[Install the Azure CLI][xplat-cli]</span></span>
* <span data-ttu-id="a2ce5-675">[Distribuire e gestire le macchine virtuali usando modelli di Azure Resource Manager e l'interfaccia della riga di comando di Azure][../../linux/create-ssh-secured-vm-from-template.md]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-675">[Deploy and manage virtual machines by using Azure Resource Manager templates and the Azure CLI][../../linux/create-ssh-secured-vm-from-template.md]</span></span>
* <span data-ttu-id="a2ce5-676">[Usare l'interfaccia della riga di comando di Azure per Mac, Linux e Windows con Azure Resource Manager][xplat-cli-azure-resource-manager]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-676">[Use the Azure CLI for Mac, Linux, and Windows with Azure Resource Manager][xplat-cli-azure-resource-manager]</span></span>

<span data-ttu-id="a2ce5-677">Vedere anche il capitolo [Interfaccia della riga di comando di Azure per VM Linux][deployment-guide-4.5.2] nella [Guida alla distribuzione][planning-guide] per informazioni su come usare l'interfaccia della riga di comando di Azure per distribuire l'estensione di monitoraggio di Azure per SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-677">Also read chapter [Azure CLI for Linux VMs][deployment-guide-4.5.2] in the [Deployment Guide][planning-guide] on how to use Azure CLI to deploy the Azure Monitoring Extension for SAP.</span></span>

## <a name="different-ways-to-deploy-vms-for-sap-in-azure"></a><span data-ttu-id="a2ce5-678">Diversi modi per distribuire le macchine virtuali per SAP in Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-678">Different ways to deploy VMs for SAP in Azure</span></span>
<span data-ttu-id="a2ce5-679">In questo capitolo, vengono descritte le diverse modalità per distribuire una macchina virtuale in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-679">In this chapter, you learn the different ways to deploy a VM in Azure.</span></span> <span data-ttu-id="a2ce5-680">Gli argomenti trattati includono le varie procedure di preparazione e la gestione dei dischi rigidi virtuali e delle macchine virtuali in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-680">Additional preparation procedures, as well as handling of VHDs and VMs in Azure are covered in this chapter.</span></span>

### <a name="deployment-of-vms-for-sap"></a><span data-ttu-id="a2ce5-681">Distribuzione di VM per SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-681">Deployment of VMs for SAP</span></span>
<span data-ttu-id="a2ce5-682">Microsoft Azure offre diversi modi per distribuire le VM e i dischi associati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-682">Microsoft Azure offers multiple ways to deploy VMs and associated disks.</span></span> <span data-ttu-id="a2ce5-683">È quindi molto importante comprendere le differenze perché le operazioni di preparazione delle VM possono variare in base al metodo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-683">Thus it is very important to understand the differences since preparations of the VMs might differ depending on the method of deployment.</span></span> <span data-ttu-id="a2ce5-684">In generale, verranno analizzati gli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-684">In general, we take a look at the following scenarios:</span></span>

#### <span data-ttu-id="a2ce5-685"><a name="4d175f1b-7353-4137-9d2f-817683c26e53"></a>Spostamento di una VM da locale ad Azure con un disco non generalizzato</span><span class="sxs-lookup"><span data-stu-id="a2ce5-685"><a name="4d175f1b-7353-4137-9d2f-817683c26e53"></a>Moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="a2ce5-686">Si può pianificare di spostare un sistema SAP specifico da locale ad Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-686">You plan to move a specific SAP system from on-premises to Azure.</span></span> <span data-ttu-id="a2ce5-687">A tale scopo è possibile caricare in Azure il disco rigido virtuale contenente il sistema operativo, i file binari SAP e gli eventuali file binari DBMS nonché i dischi rigidi virtuali con i file di dati e di log del sistema DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-687">This can be done by uploading the VHD, which contains the OS, the SAP Binaries, and DBMS binaries plus the VHDs with the data and log files of the DBMS to Azure.</span></span> <span data-ttu-id="a2ce5-688">A differenza dello [scenario 2 seguente][planning-guide-5.1.2], il nome host, il SID di SAP e gli account utente SAP vengono mantenuti nella macchina virtuale di Azure perché sono stati configurati nell'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-688">In contrast to [scenario #2 below][planning-guide-5.1.2], you keep the hostname, SAP SID, and SAP user accounts in the Azure VM as they were configured in the on-premises environment.</span></span> <span data-ttu-id="a2ce5-689">Di conseguenza, non è necessario generalizzare l'immagine.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-689">Therefore, generalizing the image is not necessary.</span></span> <span data-ttu-id="a2ce5-690">Vedere il capitolo [Preparazione per lo spostamento di una VM da locale ad Azure con un disco non generalizzato][planning-guide-5.2.1] di questo documento per le operazioni di preparazione locali e il caricamento di macchine virtuali non generalizzate o di dischi rigidi virtuali in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-690">See chapters [Preparation for moving a VM from on-premises to Azure with a non-generalized disk][planning-guide-5.2.1] of this document for on-premises preparation steps and upload of non-generalized VMs or VHDs to Azure.</span></span> <span data-ttu-id="a2ce5-691">Leggere il capitolo [Scenario 3: Spostamento di una VM da locale usando un disco rigido virtuale di Azure non generalizzato con SAP][deployment-guide-3.4] nella [Guida alla distribuzione][deployment-guide] per conoscere i passaggi dettagliati della distribuzione di un'immagine in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-691">Read chapter [Scenario 3: Moving a VM from on-premises using a non-generalized Azure VHD with SAP][deployment-guide-3.4] in the [Deployment Guide][deployment-guide] for detailed steps of deploying such an image in Azure.</span></span>

#### <span data-ttu-id="a2ce5-692"><a name="e18f7839-c0e2-4385-b1e6-4538453a285c"></a>Distribuzione di una VM con un'immagine specifica del cliente</span><span class="sxs-lookup"><span data-stu-id="a2ce5-692"><a name="e18f7839-c0e2-4385-b1e6-4538453a285c"></a>Deploying a VM with a customer-specific image</span></span>
<span data-ttu-id="a2ce5-693">Le immagini disponibili in Azure Marketplace potrebbero non soddisfare le esigenze a causa di specifici requisiti di patch riguardanti la versione del sistema operativo o DBMS in uso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-693">Due to specific patch requirements of your OS or DBMS version, the provided images in the Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="a2ce5-694">Per questo motivo, potrebbe essere necessario creare una macchina virtuale usando una propria immagine "privata" di macchina virtuale del sistema operativo o DBMS che in seguito potrà essere distribuita diverse volte.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-694">Therefore, you might need to create a VM using your own ‘private’ OS/DBMS VM image, which can be deployed several times afterwards.</span></span> <span data-ttu-id="a2ce5-695">Per preparare un'immagine "privata" per la duplicazione, devono essere considerati i seguenti elementi:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-695">To prepare such a ‘private’ image for duplication, the following items have to be considered:</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-697">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-697">Windows</span></span>
>
> <span data-ttu-id="a2ce5-698">Visualizzare ulteriori dettagli qui: <https://docs.microsoft.com/azure/virtual-machines/windows/upload-generalized-managed> Le impostazioni di Windows (come SID e nome host di Windows) devono essere astratte/generalizzate sulla VM locale tramite comando sysprep.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-698">See more details here: <https://docs.microsoft.com/azure/virtual-machines/windows/upload-generalized-managed> The Windows settings (like Windows SID and hostname) must be abstracted/generalized on the on-premises VM via the sysprep command.</span></span>
>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-700">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-700">Linux</span></span>
>
> <span data-ttu-id="a2ce5-701">Seguire i passaggi descritti in questi articoli per [SUSE][virtual-machines-linux-create-upload-vhd-suse], [Red Hat][virtual-machines-linux-redhat-create-upload-vhd] o [Oracle Linux][virtual-machines-linux-create-upload-vhd-oracle] per preparare un disco rigido virtuale per il caricamento in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-701">Follow the steps described in these articles for [SUSE][virtual-machines-linux-create-upload-vhd-suse], [Red Hat][virtual-machines-linux-redhat-create-upload-vhd], or [Oracle Linux][virtual-machines-linux-create-upload-vhd-oracle], to prepare a VHD to be uploaded to Azure.</span></span>
>
>

- - -
<span data-ttu-id="a2ce5-702">Se sono già stati installati contenuti SAP nella VM locale, in particolare per sistemi a 2 livelli, è possibile adattare le impostazioni di sistema SAP dopo la distribuzione della VM di Azure con la procedura di ridenominazione dell'istanza supportata da SAP Software Provisioning Manager (nota SAP [1619720]).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-702">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt the SAP system settings after the deployment of the Azure VM through the instance rename procedure supported by the SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="a2ce5-703">Vedere i capitoli [Preparazione per la distribuzione di una VM con un'immagine specifica del cliente per SAP][planning-guide-5.2.2] e [Caricamento di un disco rigido virtuale da locale ad Azure][planning-guide-5.3.2] di questo documento per le operazioni di preparazione locali e il caricamento di una macchina virtuale generalizzata in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-703">See chapters [Preparation for deploying a VM with a customer-specific image for SAP][planning-guide-5.2.2] and [Uploading a VHD from on-premises to Azure][planning-guide-5.3.2] of this document for on-premises preparation steps and upload of a generalized VM to Azure.</span></span> <span data-ttu-id="a2ce5-704">Vedere il capitolo [Scenario 2: Distribuzione di una VM con un'immagine personalizzata per SAP][deployment-guide-3.3] nella [Guida alla distribuzione][deployment-guide] per i passaggi dettagliati della distribuzione di un'immagine in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-704">Read chapter [Scenario 2: Deploying a VM with a custom image for SAP][deployment-guide-3.3] in the [Deployment Guide][deployment-guide] for detailed steps of deploying such an image in Azure.</span></span>

#### <a name="deploying-a-vm-out-of-the-azure-marketplace"></a><span data-ttu-id="a2ce5-705">Distribuzione di una VM da Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="a2ce5-705">Deploying a VM out of the Azure Marketplace</span></span>
<span data-ttu-id="a2ce5-706">Per distribuire la macchina virtuale si sceglie di usare un'immagine di VM offerta da Microsoft o terze parti in Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-706">You would like to use a Microsoft or third-party provided VM image from the Azure Marketplace to deploy your VM.</span></span> <span data-ttu-id="a2ce5-707">Dopo aver distribuito la VM in Azure, si installa il software SAP e/o DBMS all'interno della VM usando le stesse linee guida e gli stessi strumenti usati in un ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-707">After you deployed your VM in Azure, you follow the same guidelines and tools to install the SAP software and/or DBMS inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="a2ce5-708">Per una descrizione più dettagliata della distribuzione, vedere il capitolo [Scenario 1: Distribuzione di una VM al di fuori di Azure Marketplace per SAP][deployment-guide-3.2] nella [Guida alla distribuzione][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-708">For more detailed deployment description, please see chapter [Scenario 1: Deploying a VM out of the Azure Marketplace for SAP][deployment-guide-3.2] in the [Deployment Guide][deployment-guide].</span></span>

### <span data-ttu-id="a2ce5-709"><a name="6ffb9f41-a292-40bf-9e70-8204448559e7"></a>Preparazione di VM con SAP per Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-709"><a name="6ffb9f41-a292-40bf-9e70-8204448559e7"></a>Preparing VMs with SAP for Azure</span></span>
<span data-ttu-id="a2ce5-710">Prima di caricare le macchine virtuali in Azure è necessario assicurarsi che le VM e i dischi rigidi virtuali soddisfino determinati requisiti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-710">Before uploading VMs into Azure you need to make sure the VMs and VHDs fulfill certain requirements.</span></span> <span data-ttu-id="a2ce5-711">Esistono piccole differenze a seconda del metodo di distribuzione che viene usato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-711">There are small differences depending on the deployment method that is used.</span></span>

#### <span data-ttu-id="a2ce5-712"><a name="1b287330-944b-495d-9ea7-94b83aff73ef"></a>Preparazione per lo spostamento di una VM da locale ad Azure con un disco non generalizzato</span><span class="sxs-lookup"><span data-stu-id="a2ce5-712"><a name="1b287330-944b-495d-9ea7-94b83aff73ef"></a>Preparation for moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="a2ce5-713">Un metodo di distribuzione comune consiste nello spostare in Azure una macchina virtuale esistente che esegue un sistema SAP in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-713">A common deployment method is to move an existing VM which runs an SAP system from on-premises to Azure.</span></span> <span data-ttu-id="a2ce5-714">Questa macchina virtuale e il sistema SAP nella VM devono essere eseguiti in Azure usando lo stesso nome host e, probabilmente, lo stesso SID di SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-714">That VM and the SAP system in the VM just should run in Azure using the same hostname and very likely the same SAP SID.</span></span> <span data-ttu-id="a2ce5-715">In questo caso il sistema operativo guest della macchina virtuale non deve essere generalizzato per più distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-715">In this case the guest OS of VM should not be generalized for multiple deployments.</span></span> <span data-ttu-id="a2ce5-716">Se la rete locale è stata estesa in Azure (vedere il capitolo [Cross-premise: distribuzione di una o più VM SAP in Azure che devono essere completamente integrate con la rete locale][planning-guide-2.2] in questo documento), all'interno della macchina virtuale si possono usare anche gli stessi account di dominio usati in precedenza in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-716">If the on-premises network got extended into Azure (see chapter [cross-premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network][planning-guide-2.2] in this document), then even the same domain accounts can be used within the VM as those were used before on-premises.</span></span>

<span data-ttu-id="a2ce5-717">I requisiti per la preparazione del disco della VM di Azure sono:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-717">Requirements when preparing your own Azure VM Disk are:</span></span>

* <span data-ttu-id="a2ce5-718">Il disco rigido virtuale che contiene il sistema operativo potrebbe avere inizialmente una dimensione massima di soli 127 GB.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-718">Originally the VHD containing the operating system could have a maximum size of 127GB only.</span></span> <span data-ttu-id="a2ce5-719">Questa limitazione è stata eliminata alla fine del mese di marzo 2015.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-719">This limitation got eliminated at the end of March 2015.</span></span> <span data-ttu-id="a2ce5-720">Ora il disco rigido virtuale che contiene il sistema operativo può raggiungere 1 TB come qualsiasi altro disco rigido virtuale ospitato dell'archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-720">Now the VHD containing the operating system can be up to 1TB in size as any other Azure Storage hosted VHD as well.</span></span>
* <span data-ttu-id="a2ce5-721">Deve essere nel formato disco rigido virtuale fisso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-721">It needs to be in the fixed VHD format.</span></span> <span data-ttu-id="a2ce5-722">Il disco o i dischi rigidi virtuali dinamici in formato VHDx non sono ancora supportati in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-722">Dynamic VHDs or VHDs in VHDx format are not yet supported on Azure.</span></span> <span data-ttu-id="a2ce5-723">I dischi rigidi virtuali dinamici vengono convertiti in dischi rigidi virtuali statici quando si carica il disco rigido virtuale con i cmdlet di PowerShell o l'interfaccia della riga di comando</span><span class="sxs-lookup"><span data-stu-id="a2ce5-723">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="a2ce5-724">Anche i dischi rigidi virtuali montati nella macchina virtuale e che devono essere montati nuovamente nella macchina virtuale di Azure devono essere in formato disco rigido virtuale fisso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-724">VHDs which are mounted to the VM and should be mounted again in Azure to the VM need to be in a fixed VHD format as well.</span></span> <span data-ttu-id="a2ce5-725">Leggere [questo articolo (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) e [questo articolo (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) per i limiti dimensionali dei dischi dati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-725">Please read [this article (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) and [this article (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) for size limits of data disks.</span></span> <span data-ttu-id="a2ce5-726">I dischi rigidi virtuali dinamici vengono convertiti in dischi rigidi virtuali statici quando si carica il disco rigido virtuale con i cmdlet di PowerShell o l'interfaccia della riga di comando</span><span class="sxs-lookup"><span data-stu-id="a2ce5-726">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="a2ce5-727">Aggiungere un altro account locale con privilegi di amministratore che può essere usato dal supporto tecnico Microsoft o assegnato come contesto per i servizi le e applicazioni da eseguire finché non viene distribuita la macchina virtuale e non possono essere usati utenti più adatti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-727">Add another local account with administrator privileges which can be used by Microsoft support or which can be assigned as context for services and applications to run in until the VM is deployed and more appropriate users can be used.</span></span>
* <span data-ttu-id="a2ce5-728">Per i casi d'uso di uno scenario di distribuzione solo cloud (vedere il capitolo [Solo cloud: distribuzioni di macchine virtuali in Azure senza dipendenze dalla rete locale dei clienti][planning-guide-2.1] di questo documento) in combinazione con questo metodo di distribuzione, gli account di dominio potrebbero non funzionare dopo la distribuzione del disco di Azure in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-728">For the case of using a Cloud-Only deployment scenario (see chapter [Cloud-Only - Virtual Machine deployments into Azure without dependencies on the on-premises customer network][planning-guide-2.1] of this document) in combination with this deployment method, domain accounts might not work once the Azure Disk is deployed in Azure.</span></span> <span data-ttu-id="a2ce5-729">Questo vale soprattutto per gli account usati per eseguire servizi come le applicazioni DBMS o SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-729">This is especially true for accounts which are used to run services like the DBMS or SAP applications.</span></span> <span data-ttu-id="a2ce5-730">È quindi necessario sostituire questi account di dominio con account locali della macchina virtuale ed eliminare gli account di dominio locali nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-730">Therefore you need to replace such domain accounts with VM local accounts and delete the on-premises domain accounts in the VM.</span></span> <span data-ttu-id="a2ce5-731">Mantenere gli utenti di dominio locale nell'immagine di macchina virtuale non è un problema quando la macchina virtuale viene distribuita nello scenario cross-premise, come descritto nel capitolo [Cross-premise: distribuzione di una o più VM SAP in Azure che devono essere completamente integrate con la rete locale][planning-guide-2.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-731">Keeping on-premises domain users in the VM image is not an issue when the VM is deployed in the cross-premises scenario as described in chapter [Cross-Premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network][planning-guide-2.2] in this document.</span></span>
* <span data-ttu-id="a2ce5-732">Se sono stati usati account di dominio come account di accesso o utenti DBMS durante l'esecuzione del sistema locale e queste macchine virtuali avrebbero dovuto essere distribuite in scenari solo cloud, gli utenti del dominio devono essere eliminati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-732">If domain accounts were used as DBMS logins or users when running the system on-premises and those VMs are supposed to be deployed in Cloud-Only scenarios, the domain users need to be deleted.</span></span> <span data-ttu-id="a2ce5-733">È necessario assicurarsi che l'amministratore locale e un altro utente locale della macchina virtuale vengano aggiunti come account di accesso/utente in DBMS con il ruolo di amministratori.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-733">You need to make sure that the local administrator plus another VM local user is added as a login/user into the DBMS as administrators.</span></span>
* <span data-ttu-id="a2ce5-734">Aggiungere altri account locali come quelli che potrebbero essere richiesti per lo scenario di distribuzione specifico.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-734">Add other local accounts as those might be needed for the specific deployment scenario.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-736">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-736">Windows</span></span>
>
> <span data-ttu-id="a2ce5-737">In questo scenario non è necessaria la generalizzazione (sysprep) della macchina virtuale per caricare e distribuire la macchina virtuale in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-737">In this scenario no generalization (sysprep) of the VM is required to upload and deploy the VM on Azure.</span></span>
> <span data-ttu-id="a2ce5-738">Accertarsi che non venga utilizzata l’unità D:\.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-738">Make sure that drive D:\ is not used.</span></span>
> <span data-ttu-id="a2ce5-739">Impostare il montaggio automatico dei dischi collegati come descritto nel capitolo [Impostazione del montaggio automatico per dischi collegati][planning-guide-5.5.3] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-739">Set disk automount for attached disks as described in chapter [Setting automount for attached disks][planning-guide-5.5.3] in this document.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-741">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-741">Linux</span></span>
>
> <span data-ttu-id="a2ce5-742">In questo scenario non è necessaria la generalizzazione (waagent -deprovision) della macchina virtuale per caricare e distribuire la macchina virtuale in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-742">In this scenario no generalization (waagent -deprovision) of the VM is required to upload and deploy the VM on Azure.</span></span>
> <span data-ttu-id="a2ce5-743">Assicurarsi che /mnt/resource non sia usato e che TUTTI i dischi siano montati con UUID.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-743">Make sure that /mnt/resource is not used and that ALL disks are mounted via uuid.</span></span> <span data-ttu-id="a2ce5-744">Per il disco del sistema operativo assicurarsi che la voce bootloader rifletta anche il montaggio basato su UUID.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-744">For the OS disk, make sure that the bootloader entry also reflects the uuid-based mount.</span></span>
>
>

- - -
#### <span data-ttu-id="a2ce5-745"><a name="57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3"></a>Preparazione per la distribuzione di una VM con un'immagine specifica del cliente per SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-745"><a name="57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3"></a>Preparation for deploying a VM with a customer-specific image for SAP</span></span>
<span data-ttu-id="a2ce5-746">I file dei dischi rigidi virtuali che contengono un sistema operativo generalizzato vengono archiviati in contenitori negli account di archiviazione di Azure o come immagini di dischi gestiti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-746">VHD files that contain a generalized OS are stored in containers on Azure Storage Accounts or as Managed Disk images.</span></span> <span data-ttu-id="a2ce5-747">È possibile distribuire una nuova macchina virtuale da tale immagine facendo riferimento all’immagine del disco rigido virtuale o del disco gestito come origine nei file del modello di distribuzione, come descritto nel capitolo [Scenario 2: Distribuzione di una VM con un'immagine personalizzata per SAP][deployment-guide-3.3] della [Guida alla distribuzione][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-747">You can deploy a new VM from such an image by referencing the VHD or Managed Disk image as a source in your deployment template files as described in chapter [Scenario 2: Deploying a VM with a custom image for SAP][deployment-guide-3.3] of the [Deployment Guide][deployment-guide].</span></span>

<span data-ttu-id="a2ce5-748">I requisiti per la preparazione dell'immagine di VM di Azure sono:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-748">Requirements when preparing your own Azure VM Image are:</span></span>

* <span data-ttu-id="a2ce5-749">Il disco rigido virtuale che contiene il sistema operativo potrebbe avere inizialmente una dimensione massima di soli 127 GB.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-749">Originally the VHD containing the operating system could have a maximum size of 127GB only.</span></span> <span data-ttu-id="a2ce5-750">Questa limitazione è stata eliminata alla fine del mese di marzo 2015.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-750">This limitation got eliminated at the end of March 2015.</span></span> <span data-ttu-id="a2ce5-751">Ora il disco rigido virtuale che contiene il sistema operativo può raggiungere 1 TB come qualsiasi altro disco rigido virtuale ospitato dell'archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-751">Now the VHD containing the operating system can be up to 1TB in size as any other Azure Storage hosted VHD as well.</span></span>
* <span data-ttu-id="a2ce5-752">Deve essere nel formato disco rigido virtuale fisso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-752">It needs to be in the fixed VHD format.</span></span> <span data-ttu-id="a2ce5-753">Il disco o i dischi rigidi virtuali dinamici in formato VHDx non sono ancora supportati in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-753">Dynamic VHDs or VHDs in VHDx format are not yet supported on Azure.</span></span> <span data-ttu-id="a2ce5-754">I dischi rigidi virtuali dinamici vengono convertiti in dischi rigidi virtuali statici quando si carica il disco rigido virtuale con i cmdlet di PowerShell o l'interfaccia della riga di comando</span><span class="sxs-lookup"><span data-stu-id="a2ce5-754">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="a2ce5-755">Anche i dischi rigidi virtuali montati nella macchina virtuale e che devono essere montati nuovamente nella macchina virtuale di Azure devono essere in formato disco rigido virtuale fisso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-755">VHDs which are mounted to the VM and should be mounted again in Azure to the VM need to be in a fixed VHD format as well.</span></span> <span data-ttu-id="a2ce5-756">Leggere [questo articolo (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) e [questo articolo (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) per i limiti dimensionali dei dischi dati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-756">Please read [this article (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) and [this article (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) for size limits of data disks.</span></span> <span data-ttu-id="a2ce5-757">I dischi rigidi virtuali dinamici vengono convertiti in dischi rigidi virtuali statici quando si carica il disco rigido virtuale con i cmdlet di PowerShell o l'interfaccia della riga di comando</span><span class="sxs-lookup"><span data-stu-id="a2ce5-757">Dynamic VHDs will be converted to static VHDs when you upload the VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="a2ce5-758">Tutti gli utenti di dominio registrati come utenti nella macchina virtuale non esistono in uno scenario solo cloud (vedere il capitolo [Solo cloud: distribuzioni di macchine virtuali in Azure senza dipendenze dalla rete locale dei clienti][planning-guide-2.1] di questo documento), quindi i servizi che usano questi account di dominio potrebbero non funzionare dopo la distribuzione dell'immagine in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-758">Since all the Domain users registered as users in the VM will not exist in a Cloud-Only scenario (see chapter [Cloud-Only - Virtual Machine deployments into Azure without dependencies on the on-premises customer network][planning-guide-2.1] of this document), services using such domain accounts might not work once the Image is deployed in Azure.</span></span> <span data-ttu-id="a2ce5-759">Questo vale soprattutto per gli account usati per eseguire servizi come le applicazioni DBMS o SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-759">This is especially true for accounts which are used to run services like DBMS or SAP applications.</span></span> <span data-ttu-id="a2ce5-760">È quindi necessario sostituire questi account di dominio con account locali della macchina virtuale ed eliminare gli account di dominio locali nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-760">Therefore you need to replace such domain accounts with VM local accounts and delete the on-premises domain accounts in the VM.</span></span> <span data-ttu-id="a2ce5-761">Mantenere gli utenti di dominio locale nell'immagine della macchina virtuale non è un problema quando la macchina virtuale viene distribuita nello scenario cross-premise, come descritto nel capitolo [Cross-premise: distribuzione di una o più VM SAP in Azure che devono essere completamente integrate con la rete locale][planning-guide-2.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-761">Keeping on-premises domain users in the VM image might not be an issue when the VM is deployed in the cross-premises scenario as described in chapter [Cross-Premises - Deployment of single or multiple SAP VMs into Azure with the requirement of being fully integrated into the on-premises network][planning-guide-2.2] in this document.</span></span>
* <span data-ttu-id="a2ce5-762">Aggiungere un altro account locale con privilegi di amministratore che può essere usato dal supporto tecnico Microsoft per l'analisi dei problemi o assegnato come contesto per i servizi le e applicazioni da eseguire finché non viene distribuita la macchina virtuale e non possono essere usati utenti più adatti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-762">Add another local account with administrator privileges which can be used by Microsoft support in problem investigations or which can be assigned as context for services and applications to run in until the VM is deployed and more appropriate users can be used.</span></span>
* <span data-ttu-id="a2ce5-763">Nelle distribuzioni solo cloud e se sono stati usati account di dominio come account di accesso o utenti DBMS durante l'esecuzione del sistema locale, gli utenti del dominio devono essere eliminati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-763">In Cloud-Only deployments and where domain accounts were used as DBMS logins or users when running the system on-premises, the domain users should be deleted.</span></span> <span data-ttu-id="a2ce5-764">È necessario assicurarsi che l'amministratore locale e un altro utente locale della macchina virtuale vengano aggiunti come account di accesso/utente in DBMS con il ruolo di amministratori.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-764">You need to make sure that the local administrator plus another VM local user is added as a login/user of the DBMS as administrators.</span></span>
* <span data-ttu-id="a2ce5-765">Aggiungere altri account locali come quelli che potrebbero essere richiesti per lo scenario di distribuzione specifico.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-765">Add other local accounts as those might be needed for the specific deployment scenario.</span></span>
* <span data-ttu-id="a2ce5-766">Se l'immagine contiene un'installazione di SAP NetWeaver ed è probabile che il nome host venga modificato rispetto al nome originale al momento della distribuzione di Azure, si consiglia di copiare le versioni più recenti del DVD di SAP Software Provisioning Manager nel modello.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-766">If the image contains an installation of SAP NetWeaver and renaming of the host name from the original name at the point of the Azure deployment is likely, it is recommended to copy the latest versions of the SAP Software Provisioning Manager DVD into the template.</span></span> <span data-ttu-id="a2ce5-767">Questo consentirà di usare facilmente la funzionalità di ridenominazione SAP fornita per adattare il nome host modificato e/o per modificare il SID del sistema SAP all'interno dell'immagine di VM distribuita non appena viene avviata una nuova copia.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-767">This will enable you to easily use the SAP provided rename functionality to adapt the changed hostname and/or change the SID of the SAP system within the deployed VM image as soon as a new copy is started.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-769">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-769">Windows</span></span>
>
> <span data-ttu-id="a2ce5-770">Verificare che l'unità D:\ non sia usata. Impostare il montaggio automatico dei dischi collegati come descritto nel capitolo [Impostazione del montaggio automatico per dischi collegati][planning-guide-5.5.3] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-770">Make sure that drive D:\ is not used Set disk automount for attached disks as described in chapter [Setting automount for attached disks][planning-guide-5.5.3] in this document.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-772">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-772">Linux</span></span>
>
> <span data-ttu-id="a2ce5-773">Assicurarsi che /mnt/resource non sia usato e che TUTTI i dischi siano montati con UUID.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-773">Make sure that /mnt/resource is not used and that ALL disks are mounted via uuid.</span></span> <span data-ttu-id="a2ce5-774">Per il disco del sistema operativo assicurarsi che la voce bootloader rifletta anche il montaggio basato su UUID.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-774">For the OS disk, make sure the bootloader entry also reflects the uuid-based mount.</span></span>
>
>

- - -
* <span data-ttu-id="a2ce5-775">L'interfaccia utente grafica (GUI) SAP può essere preinstallata in questo modello per scopi di amministrazione e installazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-775">SAP GUI (for administrative and setup purposes) can be pre-installed in such a template.</span></span>
* <span data-ttu-id="a2ce5-776">È possibile installare altri software necessari per eseguire correttamente le macchine virtuali in scenari cross-premise purché siano compatibili con la ridenominazione della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-776">Other software necessary to run the VMs successfully in cross-premises scenarios can be installed as long as this software can work with the rename of the VM.</span></span>

<span data-ttu-id="a2ce5-777">Se la macchina virtuale è stata preparata in modo sufficiente per essere generica ed eventualmente indipendente da account/utenti non disponibili nello scenario di distribuzione di Azure di destinazione, viene eseguito l'ultimo passaggio di preparazione per la generalizzazione di questa immagine.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-777">If the VM is prepared sufficiently to be generic and eventually independent of accounts/users not available in the targeted Azure deployment scenario, the last preparation step of generalizing such an image is conducted.</span></span>

##### <a name="generalizing-a-vm"></a><span data-ttu-id="a2ce5-778">Generalizzazione di una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-778">Generalizing a VM</span></span>
- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-780">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-780">Windows</span></span>
>
> <span data-ttu-id="a2ce5-781">L'ultimo passaggio consiste nell'accedere a una macchina virtuale con un account amministratore.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-781">The last step is to log in to a VM with an Administrator account.</span></span> <span data-ttu-id="a2ce5-782">Aprire una finestra di comando di Windows come "amministratore".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-782">Open a Windows command window as ‘administrator’.</span></span> <span data-ttu-id="a2ce5-783">Accedere a %windir%\windows\system32\sysprep ed eseguire sysprep.exe.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-783">Go to %windir%\windows\system32\sysprep and execute sysprep.exe.</span></span>
> <span data-ttu-id="a2ce5-784">Viene visualizzata una finestra di piccole dimensioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-784">A small window will appear.</span></span> <span data-ttu-id="a2ce5-785">È importante selezionare l'opzione "Generalizza", deselezionata per impostazione predefinita, e modificare l'opzione di arresto dall'impostazione predefinita "Riavvia" ad "Arresta".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-785">It is important to check the ‘Generalize’ option (the default is un-checked) and change the Shutdown Option from its default of ‘Reboot’ to ‘Shutdown’.</span></span> <span data-ttu-id="a2ce5-786">Questa procedura presuppone che il processo sysprep venga eseguito in locale nel sistema operativo guest di una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-786">This procedure assumes that the sysprep process is executed on-premises in the Guest OS of a VM.</span></span>
> <span data-ttu-id="a2ce5-787">Per eseguire la procedura con una macchina virtuale già in esecuzione in Azure, seguire i passaggi in [questo articolo](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/capture-image-resource).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-787">If you want to perform the procedure with a VM already running in Azure, follow the steps described in [this article](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/capture-image-resource).</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-789">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-789">Linux</span></span>
>
> <span data-ttu-id="a2ce5-790">[Come acquisire una macchina virtuale Linux da usare come modello Resource Manager][capture-image-linux-step-2-create-vm-image]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-790">[How to capture a Linux virtual machine to use as a Resource Manager template][capture-image-linux-step-2-create-vm-image]</span></span>
>
>

- - -
### <a name="transferring-vms-and-vhds-between-on-premises-to-azure"></a><span data-ttu-id="a2ce5-791">Trasferimento di macchine virtuali e dischi rigidi virtuali tra il sistema locale e Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-791">Transferring VMs and VHDs between on-premises to Azure</span></span>
<span data-ttu-id="a2ce5-792">Il caricamento di immagini di VM e dischi in Azure con il portale di Azure non è consentito, quindi è necessario usare i cmdlet di Azure PowerShell o l'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-792">Since uploading VM images and disks to Azure is not possible via the Azure portal, you need to use Azure PowerShell cmdlets or CLI.</span></span> <span data-ttu-id="a2ce5-793">In alternativa, è possibile usare lo strumento "AzCopy".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-793">Another possibility is the use of the tool ‘AzCopy’.</span></span> <span data-ttu-id="a2ce5-794">Lo strumento può copiare i dischi rigidi virtuali tra il sistema locale e Azure, in entrambe le direzioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-794">The tool can copy VHDs between on-premises and Azure (in both directions).</span></span> <span data-ttu-id="a2ce5-795">Può anche copiare i dischi rigidi virtuali tra le diverse aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-795">It also can copy VHDs between Azure Regions.</span></span> <span data-ttu-id="a2ce5-796">Per il download e l'uso di AzCopy, vedere [questa documentazione][storage-use-azcopy].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-796">Please consult [this documentation][storage-use-azcopy] for download and usage of AzCopy.</span></span>

<span data-ttu-id="a2ce5-797">Una terza alternativa prevede l'uso di diversi strumenti per l'interfaccia utente grafica di terze parti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-797">A third alternative would be to use various third-party GUI-oriented tools.</span></span> <span data-ttu-id="a2ce5-798">Tuttavia, assicurarsi che questi strumenti supportino i BLOB di pagine di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-798">However, please make sure that these tools are supporting Azure Page Blobs.</span></span> <span data-ttu-id="a2ce5-799">A questo scopo, è necessario utilizzare l’archivio di BLOB di pagine di Azure (le differenze sono descritte qui: <https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-799">For our purposes we need to use Azure Page Blob store (the differences are described here: <https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>).</span></span> <span data-ttu-id="a2ce5-800">Anche gli strumenti forniti da Azure sono molto efficaci per la compressione delle macchine virtuali e dei dischi rigidi virtuali da caricare.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-800">Also the tools provided by Azure are very efficient in compressing the VMs and VHDs which need to be uploaded.</span></span> <span data-ttu-id="a2ce5-801">Si tratta di un fattore importante perché una compressione efficace riduce il tempo di caricamento, che varia comunque in base al collegamento per il caricamento in Internet dalla struttura locale e all'area di distribuzione di Azure di destinazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-801">This is important because this efficiency in compression reduces the upload time (which varies anyway depending on the upload link to the internet from the on-premises facility and the Azure deployment region targeted).</span></span> <span data-ttu-id="a2ce5-802">È ragionevole supporre che il caricamento di una macchina virtuale o di un disco rigido virtuale da una località europea ai data center di Azure basati negli Stati Uniti richiederà più tempo rispetto al caricamento delle stesse macchine virtuali/dischi rigidi virtuali in data center di Azure europei.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-802">It is a fair assumption that uploading a VM or VHD from European location to the U.S.-based Azure data centers will take longer than uploading the same VMs/VHDs to the European Azure data centers.</span></span>

#### <span data-ttu-id="a2ce5-803"><a name="a43e40e6-1acc-4633-9816-8f095d5a7b6a"></a>Caricamento di un disco rigido virtuale da locale ad Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-803"><a name="a43e40e6-1acc-4633-9816-8f095d5a7b6a"></a>Uploading a VHD from on-premises to Azure</span></span>
<span data-ttu-id="a2ce5-804">Per caricare una macchina virtuale o un disco rigido virtuale esistente dalla rete locale, è necessario che siano soddisfatti i requisiti elencati nel capitolo [Preparazione per lo spostamento di una VM da locale ad Azure con un disco non generalizzato][planning-guide-5.2.1] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-804">To upload an existing VM or VHD from the on-premises network such a VM or VHD needs to meet the requirements as listed in chapter [Preparation for moving a VM from on-premises to Azure with a non-generalized disk][planning-guide-5.2.1] of this document.</span></span>

<span data-ttu-id="a2ce5-805">Questa macchina virtuale non deve essere generalizzata e può essere caricata nello stato e nella forma in cui si trova dopo l'arresto sul lato locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-805">Such a VM does NOT need to be generalized and can be uploaded in the state and shape it has after shutdown on the on-premises side.</span></span> <span data-ttu-id="a2ce5-806">Lo stesso vale per i dischi rigidi virtuali aggiuntivi che non contengono sistemi operativi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-806">The same is true for additional VHDs which don’t contain any operating system.</span></span>

##### <a name="uploading-a-vhd-and-making-it-an-azure-disk"></a><span data-ttu-id="a2ce5-807">Caricamento di un disco rigido virtuale e conversione in un disco di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-807">Uploading a VHD and making it an Azure Disk</span></span>
<span data-ttu-id="a2ce5-808">Lo scopo di questo scenario è caricare un file VHD, con o senza sistema operativo incluso, e montarlo in una macchina virtuale come disco dati o usarlo come disco del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-808">In this case we want to upload a VHD, either with or without an OS in it, and mount it to a VM as a data disk or use it as OS disk.</span></span> <span data-ttu-id="a2ce5-809">Il processo si articola in più passaggi</span><span class="sxs-lookup"><span data-stu-id="a2ce5-809">This is a multi-step process</span></span>

<span data-ttu-id="a2ce5-810">**PowerShell**</span><span class="sxs-lookup"><span data-stu-id="a2ce5-810">**Powershell**</span></span>

* <span data-ttu-id="a2ce5-811">Accedere alla sottoscrizione con *Login-AzureRmAccount*</span><span class="sxs-lookup"><span data-stu-id="a2ce5-811">Log in to your subscription with *Login-AzureRmAccount*</span></span>
* <span data-ttu-id="a2ce5-812">Impostare la sottoscrizione del contesto con *Set-AzureRmContext* e il parametro SubscriptionId o SubscriptionName. Vedere <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span><span class="sxs-lookup"><span data-stu-id="a2ce5-812">Set the subscription of your context with *Set-AzureRmContext* and parameter SubscriptionId or SubscriptionName - see <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span></span>
* <span data-ttu-id="a2ce5-813">Caricare il disco rigido virtuale con *Add-AzureRmVhd* su un account di archiviazione di Azure; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span><span class="sxs-lookup"><span data-stu-id="a2ce5-813">Upload the VHD with *Add-AzureRmVhd* to an Azure Storage Account - see <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span></span>
* <span data-ttu-id="a2ce5-814">(Opzionale) Creare un disco gestito dal disco rigido virtuale con *New-AzureRmDisk*; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermdisk></span><span class="sxs-lookup"><span data-stu-id="a2ce5-814">(Optional) Create a Managed Disk from the VHD with *New-AzureRmDisk*  - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermdisk></span></span>
* <span data-ttu-id="a2ce5-815">Impostare il disco del sistema operativo della nuova configurazione di VM sul disco rigido virtuale o sul disco gestito con *Set-AzureRmVMOSDisk*; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk></span><span class="sxs-lookup"><span data-stu-id="a2ce5-815">Set the OS disk of a new VM config to the VHD or Managed Disk with *Set-AzureRmVMOSDisk* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk></span></span>
* <span data-ttu-id="a2ce5-816">Creare una nuova VM dalla configurazione della VM con *New-AzureRmVM*; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span><span class="sxs-lookup"><span data-stu-id="a2ce5-816">Create a new VM from the VM config with *New-AzureRmVM* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span></span>
* <span data-ttu-id="a2ce5-817">Aggiungere un disco dati a una nuova VM con *Add-AzureRmVMDataDisk*; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvmdatadisk></span><span class="sxs-lookup"><span data-stu-id="a2ce5-817">Add a data disk to a new VM with *Add-AzureRmVMDataDisk* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvmdatadisk></span></span>

<span data-ttu-id="a2ce5-818">**Interfaccia della riga di comando di Azure 2.0**</span><span class="sxs-lookup"><span data-stu-id="a2ce5-818">**Azure CLI 2.0**</span></span>

* <span data-ttu-id="a2ce5-819">Accedere alla sottoscrizione con *az login*</span><span class="sxs-lookup"><span data-stu-id="a2ce5-819">Log in to your subscription with *az login*</span></span>
* <span data-ttu-id="a2ce5-820">Selezionare la propria sottoscrizione con *az account set --subscription `<subscription name or id`>*</span><span class="sxs-lookup"><span data-stu-id="a2ce5-820">Select your subscription with *az account set --subscription `<subscription name or id`>*</span></span>
* <span data-ttu-id="a2ce5-821">Caricare il disco rigido virtuale con *az storage blob upload*. Vedere [Uso dell'interfaccia della riga di comando di Azure con archiviazione di Azure][storage-azure-cli]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-821">Upload the VHD with *az storage blob upload* - see [Using the Azure CLI with Azure Storage][storage-azure-cli]</span></span>
* <span data-ttu-id="a2ce5-822">(Opzionale) Creare un disco gestito dal disco rigido virtuale con *az disk create*; vedere https://docs.microsoft.com/cli/azure/disk#create</span><span class="sxs-lookup"><span data-stu-id="a2ce5-822">(Optional) Create a Managed Disk from the VHD with *az disk create* - see https://docs.microsoft.com/cli/azure/disk#create</span></span>
* <span data-ttu-id="a2ce5-823">Creare una nuova VM specificando il disco rigido virtuale o il disco gestito caricato come disco del sistema operativo con *azure vm create* e il parametro *--attach-os-disk*</span><span class="sxs-lookup"><span data-stu-id="a2ce5-823">Create a new VM specifying the uploaded VHD or Managed Disk as OS disk with *az vm create* and parameter *--attach-os-disk*</span></span>
* <span data-ttu-id="a2ce5-824">Aggiungere un disco dati a una nuova VM con *az vm disk attach* e il parametro *--new*</span><span class="sxs-lookup"><span data-stu-id="a2ce5-824">Add a data disk to a new VM with *az vm disk attach* and parameter *--new*</span></span>

<span data-ttu-id="a2ce5-825">**Modello**</span><span class="sxs-lookup"><span data-stu-id="a2ce5-825">**Template**</span></span>

* <span data-ttu-id="a2ce5-826">Caricare il disco rigido virtuale con Powershell o con l'interfaccia della riga di comando di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-826">Upload the VHD with Powershell or Azure CLI</span></span>
* <span data-ttu-id="a2ce5-827">(Opzionale) Creare un disco gestito dal disco rigido virtuale tramite Powershell, interfaccia della riga di comando di Azure o portale di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-827">(Optional) Create a Managed Disk from the VHD with Powershell, Azure CLI or the Azure portal</span></span>
* <span data-ttu-id="a2ce5-828">Distribuire la VM con un modello JSON facendo riferimento al disco rigido virtuale, come mostrato in [questo modello JSON di esempio](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vm-specialized-vhd/azuredeploy.json) o utilizzando i Managed Disks, come visualizzato [in questo esempio di modello JSON](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-disk-md/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-828">Deploy the VM with a JSON template referencing the VHD as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vm-specialized-vhd/azuredeploy.json) or using Managed Disks as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-disk-md/azuredeploy.json).</span></span>

#### <a name="deployment-of-a-vm-image"></a><span data-ttu-id="a2ce5-829">Distribuzione di un'immagine di VM</span><span class="sxs-lookup"><span data-stu-id="a2ce5-829">Deployment of a VM Image</span></span>
<span data-ttu-id="a2ce5-830">Per caricare una VM o un disco rigido virtuale esistente dalla rete locale per usarlo come immagine di VM di Azure, è necessario che siano soddisfatti i requisiti elencati nel capitolo [Preparazione per la distribuzione di una VM con un'immagine specifica del cliente per SAP][planning-guide-5.2.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-830">To upload an existing VM or VHD from the on-premises network in order to use it as an Azure VM image such a VM or VHD need to meet the requirements listed in chapter [Preparation for deploying a VM with a customer-specific image for SAP][planning-guide-5.2.2] of this document.</span></span>

* <span data-ttu-id="a2ce5-831">Usare *sysprep* in Windows o *waagent-deprovision* in Linux per generalizzare la VM. Vedere [Documentazione tecnica su Sysprep](https://technet.microsoft.com/library/cc766049.aspx) per Windows o [Come acquisire una macchina virtuale Linux da usare come modello di Resource Manager][capture-image-linux-step-2-create-vm-image] per Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-831">Use *sysprep* on Windows or *waagent -deprovision* on Linux to generalize your VM - see [Sysprep Technical Reference](https://technet.microsoft.com/library/cc766049.aspx) for Windows or [How to capture a Linux virtual machine to use as a Resource Manager template][capture-image-linux-step-2-create-vm-image] for Linux</span></span>
* <span data-ttu-id="a2ce5-832">Accedere alla sottoscrizione con *Login-AzureRmAccount*</span><span class="sxs-lookup"><span data-stu-id="a2ce5-832">Log in to your subscription with *Login-AzureRmAccount*</span></span>
* <span data-ttu-id="a2ce5-833">Impostare la sottoscrizione del contesto con *Set-AzureRmContext* e il parametro SubscriptionId o SubscriptionName. Vedere <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span><span class="sxs-lookup"><span data-stu-id="a2ce5-833">Set the subscription of your context with *Set-AzureRmContext* and parameter SubscriptionId or SubscriptionName - see <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span></span>
* <span data-ttu-id="a2ce5-834">Caricare il disco rigido virtuale con *Add-AzureRmVhd* su un account di archiviazione di Azure; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span><span class="sxs-lookup"><span data-stu-id="a2ce5-834">Upload the VHD with *Add-AzureRmVhd* to an Azure Storage Account - see <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span></span>
* <span data-ttu-id="a2ce5-835">(Opzionale) Creare un’immagine del disco gestito dal disco rigido virtuale con *New-AzureRmImage*; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermimage></span><span class="sxs-lookup"><span data-stu-id="a2ce5-835">(Optional) Create a Managed Disk Image from the VHD with *New-AzureRmImage*  - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermimage></span></span>
* <span data-ttu-id="a2ce5-836">Impostare il disco del sistema operativo di una nuova configurazione di VM sul</span><span class="sxs-lookup"><span data-stu-id="a2ce5-836">Set the OS disk of a new VM config to the</span></span>
  * <span data-ttu-id="a2ce5-837">disco rigido virtuale con *Set-AzureRmVMOSDisk -SourceImageUri -CreateOption fromImage*; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk></span><span class="sxs-lookup"><span data-stu-id="a2ce5-837">VHD with *Set-AzureRmVMOSDisk -SourceImageUri -CreateOption fromImage* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk></span></span>
  * <span data-ttu-id="a2ce5-838">Immagine del disco gestito *Set-AzureRmVMSourceImage*; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmsourceimage></span><span class="sxs-lookup"><span data-stu-id="a2ce5-838">Managed Disk Image *Set-AzureRmVMSourceImage* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmsourceimage></span></span>
* <span data-ttu-id="a2ce5-839">Creare una nuova VM dalla configurazione della VM con *New-AzureRmVM*; vedere <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span><span class="sxs-lookup"><span data-stu-id="a2ce5-839">Create a new VM from the VM config with *New-AzureRmVM* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span></span>

<span data-ttu-id="a2ce5-840">**Interfaccia della riga di comando di Azure 2.0**</span><span class="sxs-lookup"><span data-stu-id="a2ce5-840">**Azure CLI 2.0**</span></span>

* <span data-ttu-id="a2ce5-841">Usare *sysprep* in Windows o *waagent-deprovision* in Linux per generalizzare la VM. Vedere [Documentazione tecnica su Sysprep](https://technet.microsoft.com/library/cc766049.aspx) per Windows o [Come acquisire una macchina virtuale Linux da usare come modello di Resource Manager][capture-image-linux-step-2-create-vm-image] per Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-841">Use *sysprep* on Windows or *waagent -deprovision* on Linux to generalize your VM - see [Sysprep Technical Reference](https://technet.microsoft.com/library/cc766049.aspx) for Windows or [How to capture a Linux virtual machine to use as a Resource Manager template][capture-image-linux-step-2-create-vm-image] for Linux</span></span>
* <span data-ttu-id="a2ce5-842">Accedere alla sottoscrizione con *az login*</span><span class="sxs-lookup"><span data-stu-id="a2ce5-842">Log in to your subscription with *az login*</span></span>
* <span data-ttu-id="a2ce5-843">Selezionare la propria sottoscrizione con *az account set --subscription `<subscription name or id`>*</span><span class="sxs-lookup"><span data-stu-id="a2ce5-843">Select your subscription with *az account set --subscription `<subscription name or id`>*</span></span>
* <span data-ttu-id="a2ce5-844">Caricare il disco rigido virtuale con *az storage blob upload*. Vedere [Uso dell'interfaccia della riga di comando di Azure con archiviazione di Azure][storage-azure-cli]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-844">Upload the VHD with *az storage blob upload* - see [Using the Azure CLI with Azure Storage][storage-azure-cli]</span></span>
* <span data-ttu-id="a2ce5-845">(Opzionale) Creare un’immagine del disco gestito dal disco rigido virtuale con *az image create*; vedere https://docs.microsoft.com/cli/azure/image#create</span><span class="sxs-lookup"><span data-stu-id="a2ce5-845">(Optional) Create a Managed Disk Image from the VHD with *az image create* - see https://docs.microsoft.com/cli/azure/image#create</span></span>
* <span data-ttu-id="a2ce5-846">Creare una nuova VM specificando l’immagine del disco rigido virtuale o del disco gestito caricato come disco del sistema operativo con *azure vm create* e il parametro *--image*</span><span class="sxs-lookup"><span data-stu-id="a2ce5-846">Create a new VM specifying the uploaded VHD or Managed Disk Image as OS disk with *az vm create* and parameter *--image*</span></span>

<span data-ttu-id="a2ce5-847">**Modello**</span><span class="sxs-lookup"><span data-stu-id="a2ce5-847">**Template**</span></span>

* <span data-ttu-id="a2ce5-848">Usare *sysprep* in Windows o *waagent-deprovision* in Linux per generalizzare la VM. Vedere [Documentazione tecnica su Sysprep](https://technet.microsoft.com/library/cc766049.aspx) per Windows o [Come acquisire una macchina virtuale Linux da usare come modello di Resource Manager][capture-image-linux-step-2-create-vm-image] per Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-848">Use *sysprep* on Windows or *waagent -deprovision* on Linux to generalize your VM - see [Sysprep Technical Reference](https://technet.microsoft.com/library/cc766049.aspx) for Windows or [How to capture a Linux virtual machine to use as a Resource Manager template][capture-image-linux-step-2-create-vm-image] for Linux</span></span>
* <span data-ttu-id="a2ce5-849">Caricare il disco rigido virtuale con Powershell o con l'interfaccia della riga di comando di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-849">Upload the VHD with Powershell or Azure CLI</span></span>
* <span data-ttu-id="a2ce5-850">(Opzionale) Creare un’immagine del disco gestito dal disco rigido virtuale tramite Powershell, interfaccia della riga di comando di Azure o portale di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-850">(Optional) Create a Managed Disk Image from the VHD with Powershell, Azure CLI or the Azure portal</span></span>
* <span data-ttu-id="a2ce5-851">Distribuire la VM con un modello JSON facendo riferimento all’immagine del disco rigido virtuale, come mostrato in [questo modello JSON di esempio](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-image/azuredeploy.json) o utilizzando l’immagine del disco gestito, come visualizzato [in questo esempio di modello JSON](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-from-user-image/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-851">Deploy the VM with a JSON template referencing the image VHD as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-image/azuredeploy.json) or using the Managed Disk Image as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-from-user-image/azuredeploy.json).</span></span>

#### <a name="downloading-vhds-or-managed-disks-to-on-premises"></a><span data-ttu-id="a2ce5-852">Download dei dischi rigidi virtuali o dei dischi gestiti in locale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-852">Downloading VHDs or Managed Disks to on-premises</span></span>
<span data-ttu-id="a2ce5-853">L'infrastruttura distribuita come servizio (IaaS) di Azure non consente solo di caricare dischi rigidi virtuali e sistemi SAP,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-853">Azure Infrastructure as a Service is not a one-way street of only being able to upload VHDs and SAP systems.</span></span> <span data-ttu-id="a2ce5-854">ma anche di spostare i sistemi SAP da Azure ai sistemi locali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-854">You can move SAP systems from Azure back into the on-premises world as well.</span></span>

<span data-ttu-id="a2ce5-855">Durante il download, i dischi rigidi virtuali o i Managed Disks non possono essere attivi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-855">During the time of the download the VHDs or Managed Disks can’t be active.</span></span> <span data-ttu-id="a2ce5-856">Anche quando si scaricano i dischi montati sulle VM, la VM deve essere arrestata e deallocata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-856">Even when downloading disks which are mounted to VMs, the VM needs to be shut down and deallocated.</span></span> <span data-ttu-id="a2ce5-857">Se si vuole scaricare solo il contenuto del database da usare per impostare un nuovo sistema locale e se si vuole che il sistema in Azure resti operativo durante il download e la configurazione del nuovo sistema, è possibile evitare un lungo tempo di inattività eseguendo un backup compresso del database in un disco e scaricando solo questo disco invece della VM di base del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-857">If you only want to download the database content which then should be used to set up a new system on-premises and if it is acceptable that during the time of the download and the setup of the new system that the system in Azure can still be operational, you could avoid a long downtime by performing a compressed database backup into a disk and just download that disk instead of also downloading the OS base VM.</span></span>

#### <a name="powershell"></a><span data-ttu-id="a2ce5-858">PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2ce5-858">Powershell</span></span>

  * <span data-ttu-id="a2ce5-859">Download di un disco gestito</span><span class="sxs-lookup"><span data-stu-id="a2ce5-859">Downloading a Managed Disk</span></span>  
  <span data-ttu-id="a2ce5-860">Prima di tutto, occorre ottenere l’accesso al BLOB sottostante del disco gestito.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-860">You first need to get access to the underlying blob of the Managed Disk.</span></span> <span data-ttu-id="a2ce5-861">Successivamente, si può copiare il BLOB sottostante su un nuovo account di archiviazione e scaricare il BLOB da questo account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-861">Then you can copy the underlying blob to a new storage account and download the blob from this storage account.</span></span>

  ```powershell
  $access = Grant-AzureRmDiskAccess -ResourceGroupName <resource group> -DiskName <disk name> -Access Read -DurationInSecond 3600
  $key = (Get-AzureRmStorageAccountKey -ResourceGroupName <resource group> -Name <storage account name>)[0].Value
  $destContext = (New-AzureStorageContext -StorageAccountName <storage account name -StorageAccountKey $key)
  Start-AzureStorageBlobCopy -AbsoluteUri $access.AccessSAS -DestContainer <container name> -DestBlob <blob name> -DestContext $destContext
  # Wait for blob copy to finish
  Get-AzureStorageBlobCopyState -Container <container name> -Blob <blob name> -Context $destContext
  Save-AzureRmVhd -SourceUri <blob in new storage account> -LocalFilePath <local file path> -StorageKey $key
  # Wait for download to finish
  Revoke-AzureRmDiskAccess -ResourceGroupName <resource group> -DiskName <disk name>
  ```

  * <span data-ttu-id="a2ce5-862">Download di un disco rigido virtuale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-862">Downloading a VHD</span></span>  
  <span data-ttu-id="a2ce5-863">Dopo aver arrestato il sistema SAP e la macchina virtuale, è possibile usare il cmdlet di PowerShell Save-AzureRmVhd nella destinazione locale per scaricare nuovamente i dischi rigidi virtuali nel sistema locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-863">Once the SAP system is stopped and the VM is shut down, you can use the PowerShell cmdlet Save-AzureRmVhd on the on-premises target to download the VHD disks back to the on-premises world.</span></span> <span data-ttu-id="a2ce5-864">Per farlo, è necessario l'URL del disco rigido virtuale che si trova nella "sezione Archiviazione" del portale di Azure, raggiungibile dall'account di archiviazione e dal contenitore di archiviazione in cui è stato creato il disco rigido virtuale, ed è necessario sapere dove copiare il disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-864">In order to do that, you need the URL of the VHD which you can find in the ‘Storage Section’ of the Azure portal (need to navigate to the Storage Account and the storage container where the VHD was created) and you need to know where the VHD should be copied to.</span></span>

  <span data-ttu-id="a2ce5-865">A questo punto, è possibile usare il comando definendo semplicemente il parametro SourceUri come URL del disco rigido virtuale per il download e LocalFilePath come percorso fisico del disco rigido virtuale, includendo il relativo nome.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-865">Then you can leverage the command by simply defining the parameter SourceUri as the URL of the VHD to download and the LocalFilePath as the physical location of the VHD (including its name).</span></span> <span data-ttu-id="a2ce5-866">Il comando può avere un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-866">The command could look like:</span></span>

  ```powerhell
  Save-AzureRmVhd -ResourceGroupName <resource group name of storage account> -SourceUri http://<storage account name>.blob.core.windows.net/<container name>/sapidedata.vhd -LocalFilePath E:\Azure_downloads\sapidesdata.vhd
  ```

  <span data-ttu-id="a2ce5-867">Per ulteriori dettagli sul cmdlet Save-AzureRmVhd, vedere qui <https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvhd>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-867">For more details of the Save-AzureRmVhd cmdlet, please check here <https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvhd>.</span></span>

#### <a name="cli-20"></a><span data-ttu-id="a2ce5-868">Interfaccia della riga di comando 2.0</span><span class="sxs-lookup"><span data-stu-id="a2ce5-868">CLI 2.0</span></span>
  * <span data-ttu-id="a2ce5-869">Download di un disco gestito</span><span class="sxs-lookup"><span data-stu-id="a2ce5-869">Downloading a Managed Disk</span></span>  
  <span data-ttu-id="a2ce5-870">Prima di tutto, occorre ottenere l’accesso al BLOB sottostante del disco gestito.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-870">You first need to get access to the underlying blob of the Managed Disk.</span></span> <span data-ttu-id="a2ce5-871">Successivamente, si può copiare il BLOB sottostante su un nuovo account di archiviazione e scaricare il BLOB da questo account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-871">Then you can copy the underlying blob to a new storage account and download the blob from this storage account.</span></span>
  ```
  az disk grant-access --ids "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" --duration-in-seconds 3600
  az storage blob download --sas-token "<sas token>" --account-name <account name> --container-name <container name> --name <blob name> --file <local file>
  az disk revoke-access --ids "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>"
  ```

  * <span data-ttu-id="a2ce5-872">Download di un disco rigido virtuale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-872">Downloading a VHD</span></span>   
  <span data-ttu-id="a2ce5-873">Dopo aver arrestato il sistema SAP e la VM, è possibile usare il comando dell'interfaccia della riga di comando di Azure _azure storage blob download_ nella destinazione locale per scaricare nuovamente i dischi rigidi virtuali nel sistema locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-873">Once the SAP system is stopped and the VM is shut down, you can use the Azure CLI command _azure storage blob download_ on the on-premises target to download the VHD disks back to the on-premises world.</span></span> <span data-ttu-id="a2ce5-874">Per farlo, sono necessari il nome e il contenitore del disco rigido virtuale che si trovano nella "sezione Archiviazione" del portale di Azure, raggiungibile dall'account di archiviazione e dal contenitore di archiviazione in cui è stato creato il disco rigido virtuale, ed è necessario sapere dove copiare il disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-874">In order to do that, you need the name and the container of the VHD which you can find in the ‘Storage Section’ of the Azure portal (need to navigate to the Storage Account and the storage container where the VHD was created) and you need to know where the VHD should be copied to.</span></span>

  <span data-ttu-id="a2ce5-875">A questo punto, è possibile usare il comando definendo semplicemente i parametri blob e container del disco rigido virtuale per il download e la destinazione come percorso fisico di destinazione del disco rigido virtuale, includendo il relativo nome.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-875">Then you can leverage the command by simply defining the parameters blob and container of the VHD to download and the destination as the physical target location of the VHD (including its name).</span></span> <span data-ttu-id="a2ce5-876">Il comando può avere un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-876">The command could look like:</span></span>

  ```
  az storage blob download --name <name of the VHD to download> --container-name <container of the VHD to download> --account-name <storage account name of the VHD to download> --account-key <storage account key> --file <destination of the VHD to download>
  ```

### <a name="transferring-vms-and-disks-within-azure"></a><span data-ttu-id="a2ce5-877">Trasferimento di VM e dischi in Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-877">Transferring VMs and disks within Azure</span></span>
#### <a name="copying-sap-systems-within-azure"></a><span data-ttu-id="a2ce5-878">Copia di sistemi SAP in Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-878">Copying SAP systems within Azure</span></span>
<span data-ttu-id="a2ce5-879">È probabile che un sistema SAP o anche un server DBMS dedicato che supporta un livello applicazione SAP sia costituito da diversi dischi che contengono il sistema operativo con i file binari o i file di dati e di log del database SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-879">An SAP system or even a dedicated DBMS server supporting an SAP application layer will likely consist of several disks which contain either the OS with the binaries or the data and log file(s) of the SAP database.</span></span> <span data-ttu-id="a2ce5-880">Le funzionalità di copia e di salvataggio su disco locale dei dischi in Azure non hanno un meccanismo di sincronizzazione in grado di eseguire snapshot di più dischi in modo sincrono.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-880">Neither the Azure functionality of copying disks nor the Azure functionality of saving disks to a local disk has a synchronization mechanism, which would snapshot multiple disks synchronously.</span></span> <span data-ttu-id="a2ce5-881">Quindi, lo stato dei dischi copiati o salvati, anche di quelli montati nella stessa macchina virtuale, risulta diverso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-881">Therefore, the state of the copied or saved disks even if those are mounted against the same VM would be different.</span></span> <span data-ttu-id="a2ce5-882">Ciò significa che, in uno scenario in cui sono presenti dati e file di log diversi contenuti nei vari dischi, il database risulterà incoerente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-882">This means that in the concrete case of having different data and logfile(s) contained in the different disks, the database in the end would be inconsistent.</span></span>

<span data-ttu-id="a2ce5-883">**Conclusione: per copiare o salvare dischi che fanno parte della configurazione di un sistema SAP, è necessario arrestare sia il sistema SAP che la macchina virtuale distribuita. Solo a questo punto si può copiare o scaricare il set di dischi per creare una copia del sistema SAP in Azure o in locale.**</span><span class="sxs-lookup"><span data-stu-id="a2ce5-883">**Conclusion: In order to copy or save disks which are part of an SAP system configuration you need to stop the SAP system and also need to shut down the deployed VM. Only then you can copy or download the set of disks to either create a copy of the SAP system in Azure or on-premises.**</span></span>

<span data-ttu-id="a2ce5-884">I dischi dati possono essere archiviati come file del disco rigido virtuale nell'account di archiviazione di Azure e possono essere collegati direttamente a una macchina virtuale o essere usati come immagine.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-884">Data disks can be stored as VHD files in an Azure Storage Account and can be directly attached to a virtual machine or be used as an image.</span></span> <span data-ttu-id="a2ce5-885">In questo caso, il disco rigido virtuale viene copiato in un'altra posizione prima di essere collegato alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-885">In this case, the VHD is copied to another location before being attached to the virtual machine.</span></span> <span data-ttu-id="a2ce5-886">Il nome completo del file VHD deve essere univoco in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-886">The full name of the VHD file in Azure must be unique within Azure.</span></span> <span data-ttu-id="a2ce5-887">Come già indicato in precedenza, il nome è un tipo di nome in tre parti simile a:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-887">As mentioned earlier already, the name is kind of a three-part name that looks like:</span></span>

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

<span data-ttu-id="a2ce5-888">I dischi dati possono essere anche Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-888">Data disks can also be Managed Disks.</span></span> <span data-ttu-id="a2ce5-889">In questo caso, il disco gestito utilizzato per creare un nuovo disco gestito prima che venga collegato alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-889">In this case, the Managed Disk is used to create a new Managed Disk before being attached to the virtual machine.</span></span> <span data-ttu-id="a2ce5-890">Il nome del disco gestito deve essere univoco all'interno di un gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-890">The name of the Managed Disk must be unique within a resource group.</span></span>

##### <a name="powershell"></a><span data-ttu-id="a2ce5-891">PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2ce5-891">Powershell</span></span>
<span data-ttu-id="a2ce5-892">È possibile usare i cmdlet di Azure PowerShell per copiare un disco rigido virtuale, come mostrato in [questo articolo][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-892">You can use Azure PowerShell cmdlets to copy a VHD as shown in [this article][storage-powershell-guide-full-copy-vhd].</span></span> <span data-ttu-id="a2ce5-893">Per creare un nuovo disco gestito, utilizzare New-AzureRmDiskConfig e New-AzureRmDisk, come illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-893">To create a new Managed Disk, use New-AzureRmDiskConfig and New-AzureRmDisk as shown in the following example.</span></span>

```powershell
$config = New-AzureRmDiskConfig -CreateOption Copy -SourceUri "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" -Location <location>
New-AzureRmDisk -ResourceGroupName <resource group name> -DiskName <disk name> -Disk $config
```

##### <a name="cli-20"></a><span data-ttu-id="a2ce5-894">Interfaccia della riga di comando 2.0</span><span class="sxs-lookup"><span data-stu-id="a2ce5-894">CLI 2.0</span></span>
<span data-ttu-id="a2ce5-895">È possibile usare l'interfaccia della riga di comando di Azure per copiare un disco rigido virtuale, come mostrato in [questo articolo][storage-azure-cli-copy-blobs].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-895">You can use Azure CLI to copy a VHD as shown in [this article][storage-azure-cli-copy-blobs].</span></span> <span data-ttu-id="a2ce5-896">Per creare un nuovo disco gestito, utilizzare *az disk create* come mostrato nell’esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-896">To create a new Managed Disk, use *az disk create* as shown in the following example.</span></span>

```
az disk create --source "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" --name <disk name> --resource-group <resource group name> --location <location>
```

##### <a name="azure-storage-tools"></a><span data-ttu-id="a2ce5-897">Strumenti di archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-897">Azure Storage tools</span></span>
* <span data-ttu-id="a2ce5-898"><http://storageexplorer.com/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-898"><http://storageexplorer.com/></span></span>

<span data-ttu-id="a2ce5-899">Edizioni professionali degli strumenti di esplorazione di archiviazione di Azure sono disponibili qui:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-899">Professional editions of Azure Storage Explorers can be found here:</span></span>

* <span data-ttu-id="a2ce5-900"><http://www.cerebrata.com/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-900"><http://www.cerebrata.com/></span></span>
* <span data-ttu-id="a2ce5-901"><http://clumsyleaf.com/products/cloudxplorer></span><span class="sxs-lookup"><span data-stu-id="a2ce5-901"><http://clumsyleaf.com/products/cloudxplorer></span></span>

<span data-ttu-id="a2ce5-902">La copia di un disco rigido virtuale all'interno di un account di archiviazione è un processo che richiede solo pochi secondi, analogo a quello di un hardware SAN che crea snapshot con copia lenta e copia su scrittura.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-902">The copy of a VHD itself within a storage account is a process which takes only a few seconds (similar to SAN hardware creating snapshots with lazy copy and copy on write).</span></span> <span data-ttu-id="a2ce5-903">Dopo aver creato una copia del file VHD è possibile collegarla a una macchina virtuale o usarla come immagine per collegare le copie del file VHD alle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-903">After you have a copy of the VHD file you can attach it to a virtual machine or use it as an image to attach copies of the VHD to virtual machines.</span></span>

##### <a name="powershell"></a><span data-ttu-id="a2ce5-904">PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2ce5-904">Powershell</span></span>
```powershell
# attach a vhd to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name newdatadisk -VhdUri <path to vhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption attach
$vm | Update-AzureRmVM

# attach a managed disk to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name newdatadisk -ManagedDiskId <managed disk id> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption attach
$vm | Update-AzureRmVM

# attach a copy of the vhd to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name <disk name> -VhdUri <new path of vhd> -SourceImageUri <path to image vhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption fromImage
$vm | Update-AzureRmVM

# attach a copy of the managed disk to a vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$diskConfig = New-AzureRmDiskConfig -Location $vm.Location -CreateOption Copy -SourceUri <source managed disk id>
$disk = New-AzureRmDisk -DiskName <disk name> -Disk $diskConfig -ResourceGroupName <resource group name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Caching <caching option> -Lun <lun, for example 0> -CreateOption attach -ManagedDiskId $disk.Id
$vm | Update-AzureRmVM
```
##### <a name="cli-20"></a><span data-ttu-id="a2ce5-905">Interfaccia della riga di comando 2.0</span><span class="sxs-lookup"><span data-stu-id="a2ce5-905">CLI 2.0</span></span>
```

# attach a vhd to a vm
az vm unmanaged-disk attach --resource-group <resource group name> --vm-name <vm name> --vhd-uri <path to vhd>

# attach a managed disk to a vm
az vm disk attach --resource-group <resource group name> --vm-name <vm name> --disk <managed disk id>

# attach a copy of the vhd to a vm
# this scenario is currently not possible with Azure CLI. A workaround is to manually copy the vhd to the destination.

# attach a copy of a managed disk to a vm
az disk create --name <new disk name> --resource-group <resource group name> --location <location of target virtual machine> --source <source managed disk id>
az vm disk attach --disk <new disk name or managed disk id> --resource-group <resource group name> --vm-name <vm name> --caching <caching option> --lun <lun, for example 0>
```

#### <span data-ttu-id="a2ce5-906"><a name="9789b076-2011-4afa-b2fe-b07a8aba58a1"></a>Copia di dischi tra account di archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-906"><a name="9789b076-2011-4afa-b2fe-b07a8aba58a1"></a>Copying disks between Azure Storage Accounts</span></span>
<span data-ttu-id="a2ce5-907">Questa attività non può essere eseguita nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-907">This task cannot be performed on the Azure portal.</span></span> <span data-ttu-id="a2ce5-908">È possibile usare i cmdlet di Azure PowerShell, l'interfaccia della riga di comando di Azure o un browser di archiviazione terze parti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-908">You can use Azure PowerShell cmdlets, Azure CLI or a third-party storage browser.</span></span> <span data-ttu-id="a2ce5-909">I cmdlet di PowerShell o i comandi dell'interfaccia della riga di comando possono creare e gestire i BLOB, inclusa la possibilità di copiare in modo asincrono i BLOB tra gli account di archiviazione e tra le aree all'interno della sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-909">The PowerShell cmdlets or CLI commands can create and manage blobs, which include the ability to asynchronously copy blobs across Storage Accounts and across regions within the Azure subscription.</span></span>

##### <a name="powershell"></a><span data-ttu-id="a2ce5-910">PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2ce5-910">Powershell</span></span>
<span data-ttu-id="a2ce5-911">È inoltre possibile copiare i dischi rigidi virtuali tra le sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-911">You can also copy VHDs between subscriptions.</span></span> <span data-ttu-id="a2ce5-912">Per altre informazioni, leggere [questo articolo][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-912">For more information read [this article][storage-powershell-guide-full-copy-vhd].</span></span>

<span data-ttu-id="a2ce5-913">Il flusso di base della logica dei cmdlet di PS è simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-913">The basic flow of the PS cmdlet logic looks like this:</span></span>

* <span data-ttu-id="a2ce5-914">Creare un contesto per l'account di archiviazione di **origine** con *New-AzureStorageContext*; vedere <https://msdn.microsoft.com/library/dn806380.aspx></span><span class="sxs-lookup"><span data-stu-id="a2ce5-914">Create a storage account context for the **source** storage account with *New-AzureStorageContext* - see <https://msdn.microsoft.com/library/dn806380.aspx></span></span>
* <span data-ttu-id="a2ce5-915">Creare un contesto per l'account di archiviazione di **destinazione** con *New-AzureStorageContext*; vedere <https://msdn.microsoft.com/library/dn806380.aspx></span><span class="sxs-lookup"><span data-stu-id="a2ce5-915">Create a storage account context for the **target** storage account with *New-AzureStorageContext* - see <https://msdn.microsoft.com/library/dn806380.aspx></span></span>
* <span data-ttu-id="a2ce5-916">Avviare la copia con</span><span class="sxs-lookup"><span data-stu-id="a2ce5-916">Start the copy with</span></span>

```powershell
Start-AzureStorageBlobCopy -SrcBlob <source blob name> -SrcContainer <source container name> -SrcContext <variable containing context of source storage account> -DestBlob <target blob name> -DestContainer <target container name> -DestContext <variable containing context of target storage account>
```

* <span data-ttu-id="a2ce5-917">Controllare lo stato della copia in un ciclo con</span><span class="sxs-lookup"><span data-stu-id="a2ce5-917">Check the status of the copy in a loop with</span></span>

```powershell
Get-AzureStorageBlobCopyState -Blob <target blob name> -Container <target container name> -Context <variable containing context of target storage account>
```

* <span data-ttu-id="a2ce5-918">Collegare il nuovo disco rigido virtuale a una macchina virtuale come descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-918">Attach the new VHD to a virtual machine as described above.</span></span>

<span data-ttu-id="a2ce5-919">Per alcuni esempi, vedere [questo articolo][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-919">For examples see [this article][storage-powershell-guide-full-copy-vhd].</span></span>

##### <a name="cli-20"></a><span data-ttu-id="a2ce5-920">Interfaccia della riga di comando 2.0</span><span class="sxs-lookup"><span data-stu-id="a2ce5-920">CLI 2.0</span></span>
* <span data-ttu-id="a2ce5-921">Avviare la copia con</span><span class="sxs-lookup"><span data-stu-id="a2ce5-921">Start the copy with</span></span>

```
az storage blob copy start --source-blob <source blob name> --source-container <source container name> --source-account-name <source storage account name> --source-account-key <source storage account key> --destination-container <target container name> --destination-blob <target blob name> --account-name <target storage account name> --account-key <target storage account name>
```

* <span data-ttu-id="a2ce5-922">Controllare lo stato della copia in un ciclo con</span><span class="sxs-lookup"><span data-stu-id="a2ce5-922">Check the status if the copy in a loop with</span></span>

```
az storage blob show --name <target blob name> --container <target container name> --account-name <target storage account name> --account-key <target storage account name>
```

* <span data-ttu-id="a2ce5-923">Collegare il nuovo disco rigido virtuale a una macchina virtuale come descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-923">Attach the new VHD to a virtual machine as described above.</span></span>

<span data-ttu-id="a2ce5-924">Per alcuni esempi, vedere [questo articolo][storage-azure-cli-copy-blobs].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-924">For examples see [this article][storage-azure-cli-copy-blobs].</span></span>

### <a name="disk-handling"></a><span data-ttu-id="a2ce5-925">Gestione del disco</span><span class="sxs-lookup"><span data-stu-id="a2ce5-925">Disk Handling</span></span>
#### <span data-ttu-id="a2ce5-926"><a name="4efec401-91e0-40c0-8e64-f2dceadff646"></a>Struttura di macchina virtuale/disco per le distribuzioni SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-926"><a name="4efec401-91e0-40c0-8e64-f2dceadff646"></a>VM/disk structure for SAP deployments</span></span>
<span data-ttu-id="a2ce5-927">In teoria, la gestione della struttura di una macchina virtuale e dei dischi associati dovrebbe essere molto semplice.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-927">Ideally the handling of the structure of a VM and the associated disks should be very simple.</span></span> <span data-ttu-id="a2ce5-928">Nelle installazioni locali, i clienti hanno sviluppato diverse procedure per strutturare un'installazione server.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-928">In on-premises installations, customers developed many ways of structuring a server installation.</span></span>

* <span data-ttu-id="a2ce5-929">Un disco di base che contiene il sistema operativo e tutti i file binari di DBMS e/o SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-929">One base disk which contains the OS and all the binaries of the DBMS and/or SAP.</span></span> <span data-ttu-id="a2ce5-930">A partire da marzo 2015, le dimensioni del disco possono raggiungere 1 TB invece dei 127 GB precedenti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-930">Since March 2015, this disk can be up to 1TB in size instead of earlier restrictions that limited it to 127GB.</span></span>
* <span data-ttu-id="a2ce5-931">Uno o più dischi che contengono il file di log DBMS del database SAP e il file di log dell'area di archiviazione temporanea di DBMS, se supportato dal sistema DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-931">One or multiple disks which contains the DBMS log file of the SAP database and the log file of the DBMS temp storage area (if the DBMS supports this).</span></span> <span data-ttu-id="a2ce5-932">Se i requisiti per le operazioni di I/O al secondo del log del database sono elevati, è necessario eseguire lo striping di più dischi per raggiungere il volume di operazioni di I/O al secondo richiesto.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-932">If the database log IOPS requirements are high, you need to stripe multiple disks in order to reach the IOPS volume required.</span></span>
* <span data-ttu-id="a2ce5-933">Numero di dischi contenenti uno o due file del database SAP e file di dati temporanei di DBMS, se supportati dal sistema DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-933">A number of disks containing one or two database files of the SAP database and the DBMS temp data files as well (if the DBMS supports this).</span></span>

![Configurazione di riferimento di una VM IaaS di Azure per SAP][planning-guide-figure-1300]

[comment]: <> (MShermannd  TODO describe Linux structure  )

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-937">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-937">Windows</span></span>
>
> <span data-ttu-id="a2ce5-938">Molti clienti hanno adottato configurazioni in cui, ad esempio, i file binari SAP e DBMS non sono stati installati nell'unità c:\ in cui è stato installato il sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-938">With many customers we saw configurations where, for example, SAP and DBMS binaries were not installed on the c:\ drive where the OS was installed.</span></span> <span data-ttu-id="a2ce5-939">I motivi alla base di questa configurazione sono diversi, ma, a uno sguardo più attento, questa scelta spesso risale a 10-15 anni fa ed è stata determinata dalle dimensioni ridotte delle unità e dalla necessità di ottenere altro spazio per gli aggiornamenti del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-939">There were various reasons for this, but when we went back to the root, it usually was that the drives were small and OS upgrades needed additional space 10-15 years ago.</span></span> <span data-ttu-id="a2ce5-940">Oggi queste condizioni non si verificano quasi più,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-940">Both conditions do not apply these days too often anymore.</span></span> <span data-ttu-id="a2ce5-941">perché è possibile eseguire il mapping dell'unità c:\ in macchine virtuali o in dischi con volumi di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-941">Today the c:\ drive can be mapped on large volume disks or VMs.</span></span> <span data-ttu-id="a2ce5-942">Per mantenere semplice la struttura delle distribuzioni, è consigliabile seguire il modello di distribuzione seguente per i sistemi SAP NetWeaver in Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-942">In order to keep deployments simple in their structure, it is recommended to follow the following deployment pattern for SAP NetWeaver systems in Azure</span></span>
>
> <span data-ttu-id="a2ce5-943">Il file di paging del sistema operativo Windows deve trovarsi nell'unità D: (disco non persistente)</span><span class="sxs-lookup"><span data-stu-id="a2ce5-943">The Windows operating system pagefile should be on the D: drive (non-persistent disk)</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-945">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-945">Linux</span></span>
>
> <span data-ttu-id="a2ce5-946">Posizionare il file di scambio di Linux in /mnt/mnt/resource in Linux, come descritto in [questo articolo][virtual-machines-linux-agent-user-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-946">Place the Linux swapfile under /mnt /mnt/resource on Linux as described in [this article][virtual-machines-linux-agent-user-guide].</span></span> <span data-ttu-id="a2ce5-947">Il file di scambio può essere configurato nel file di configurazione di /etc/waagent.conf dell'agente Linux.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-947">The swap file can be configured in the configuration file of the Linux Agent /etc/waagent.conf.</span></span> <span data-ttu-id="a2ce5-948">Aggiungere o modificare le impostazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-948">Add or change the following settings:</span></span>
>
>

```
ResourceDisk.EnableSwap=y
ResourceDisk.SwapSizeMB=30720
```

<span data-ttu-id="a2ce5-949">Per attivare le modifiche, è necessario riavviare l'agente Linux con</span><span class="sxs-lookup"><span data-stu-id="a2ce5-949">To activate the changes, you need to restart the Linux Agent with</span></span>

```
sudo service waagent restart
```

<span data-ttu-id="a2ce5-950">Per altre informazioni sulle dimensioni consigliate del file di scambio, leggere la nota SAP [1597355]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-950">Please read SAP Note [1597355] for more details on the recommended swap file size</span></span>

- - -
<span data-ttu-id="a2ce5-951">Il numero di dischi usati per i file di dati DBMS e il tipo di archiviazione di Azure in cui sono ospitati questi dischi devono essere determinati dai requisiti per le operazioni di I/O al secondo e dalla latenza richiesta.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-951">The number of disks used for the DBMS data files and the type of Azure Storage these disks are hosted on should be determined by the IOPS requirements and the latency required.</span></span> <span data-ttu-id="a2ce5-952">Le quote esatte sono descritte in [questo articolo (Linux)][virtual-machines-sizes-linux] e in [questo articolo (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-952">Exact quotas are described in [this article (Linux)][virtual-machines-sizes-linux] and [this article (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="a2ce5-953">L'esperienza nelle distribuzioni SAP degli ultimi 2 anni ha insegnato alcune lezioni che possono essere riepilogate come segue:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-953">Experience of SAP deployments over the last 2 years taught us some lessons which can be summarized as:</span></span>

* <span data-ttu-id="a2ce5-954">Il traffico di operazioni di I/O al secondo per i vari file di dati non è sempre lo stesso perché i sistemi esistenti del cliente potrebbero avere file di dati di dimensioni diverse che rappresentano i relativi database SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-954">IOPS traffic to different data files is not always the same since existing customer systems might have differently sized data files representing their SAP database(s).</span></span> <span data-ttu-id="a2ce5-955">Di conseguenza, è risultato più efficace l'uso di una configurazione RAID in più dischi per posizionare i file di dati definiti dai LUN.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-955">As a result it turned out to be better using a RAID configuration over multiple disks to place the data files LUNs carved out of those.</span></span> <span data-ttu-id="a2ce5-956">In alcune situazioni, in particolare con l'archiviazione standard di Azure, la frequenza di operazioni di I/O al secondo ha raggiunto la quota di un singolo disco nel log delle transazioni DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-956">There were situations, especially with Azure Standard Storage where an IOPS rate hit the quota of a single disk against the DBMS transaction log.</span></span> <span data-ttu-id="a2ce5-957">In questi scenari, è consigliabile usare l'archiviazione Premium o, in alternativa, aggregare più dischi dell'archiviazione standard con un software RAID.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-957">In such scenarios the use of Premium Storage is recommended or alternatively aggregating multiple Standard Storage disks with a software RAID.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-959">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-959">Windows</span></span>
>
> * <span data-ttu-id="a2ce5-960">[Procedure consigliate per le prestazioni di SQL Server in Macchine virtuali di Azure][virtual-machines-sql-server-performance-best-practices]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-960">[Performance best practices for SQL Server in Azure Virtual Machines][virtual-machines-sql-server-performance-best-practices]</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-962">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-962">Linux</span></span>
>
> * <span data-ttu-id="a2ce5-963">[Configurare RAID software in Linux][virtual-machines-linux-configure-raid]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-963">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid]</span></span>
> * <span data-ttu-id="a2ce5-964">[Configurare LVM in una macchina virtuale Linux in Azure][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-964">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
> * [<span data-ttu-id="a2ce5-965">Segreti dell'archiviazione di Azure e ottimizzazioni I/O di Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-965">Azure Storage secrets and Linux I/O optimizations</span></span>](http://blogs.msdn.com/b/igorpag/archive/2014/10/23/azure-storage-secrets-and-linux-i-o-optimizations.aspx)
>
>

- - -
* <span data-ttu-id="a2ce5-966">L'archiviazione Premium mostra prestazioni notevolmente migliori, soprattutto per le scritture del log delle transazioni critiche.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-966">Premium Storage is showing significant better performance, especially for critical transaction log writes.</span></span> <span data-ttu-id="a2ce5-967">Per gli scenari SAP che devono offrire prestazioni paragonabili a quelle di produzione, si consiglia di adottare serie di macchine virtuali in grado di usare l'archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-967">For SAP scenarios that are expected to deliver production like performance, it is highly recommended to use VM-Series that can leverage Azure Premium Storage.</span></span>

<span data-ttu-id="a2ce5-968">Tenere presente che il disco che contiene il sistema operativo, e come consigliato, i file binari di SAP e il database (VM di base), non è più limitato a 127 GB,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-968">Keep in mind that the disk which contains the OS, and as we recommend, the binaries of SAP and the database (base VM) as well, is not anymore limited to 127GB.</span></span> <span data-ttu-id="a2ce5-969">ma può raggiungere 1 TB.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-969">It now can have up to 1TB in size.</span></span> <span data-ttu-id="a2ce5-970">Questo spazio dovrebbe essere sufficiente per contenere tutti i file necessari, inclusi, ad esempio, i log dei processi batch SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-970">This should be enough space to keep all the necessary file including, for example, SAP batch job logs.</span></span>

<span data-ttu-id="a2ce5-971">Per altri suggerimenti e dettagli, in particolare per le macchine virtuali di DBMS, vedere la [Guida alla distribuzione di DBMS][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-971">For more suggestions and more details, specifically for DBMS VMs, please consult the [DBMS Deployment Guide][dbms-guide]</span></span>

#### <a name="disk-handling"></a><span data-ttu-id="a2ce5-972">Gestione del disco</span><span class="sxs-lookup"><span data-stu-id="a2ce5-972">Disk Handling</span></span>
<span data-ttu-id="a2ce5-973">Nella maggior parte degli scenari è necessario creare altri dischi per distribuire il database SAP nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-973">In most scenarios you need to create additional disks in order to deploy the SAP database into the VM.</span></span> <span data-ttu-id="a2ce5-974">Nel capitolo [Struttura di macchina virtuale/dischi per le distribuzioni SAP][planning-guide-5.5.1] di questo documento sono state presentate alcune considerazioni sul numero di dischi .</span><span class="sxs-lookup"><span data-stu-id="a2ce5-974">We talked about the considerations on number of disks in chapter [VM/disk structure for SAP deployments][planning-guide-5.5.1] of this document.</span></span> <span data-ttu-id="a2ce5-975">Il portale di Azure consente di collegare e scollegare i dischi dopo aver distribuito una macchina virtuale di base.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-975">The Azure portal allows to attach and detach disks once a base VM is deployed.</span></span> <span data-ttu-id="a2ce5-976">I dischi possono essere collegati o scollegati sia quando la macchina virtuale è attiva e in esecuzione che quando è arrestata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-976">The disks can be attached/detached when the VM is up and running as well as when it is stopped.</span></span> <span data-ttu-id="a2ce5-977">Quando si collega un disco, il portale di Azure offre di collegare un disco vuoto o un disco esistente che in quello specifico momento non è collegato ad altre macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-977">When attaching a disk, the Azure portal offers to attach an empty disk or an existing disk which at this point in time is not attached to another VM.</span></span>

<span data-ttu-id="a2ce5-978">**Nota**: i dischi possono essere collegati in qualsiasi momento a una sola VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-978">**Note**: Disks can only be attached to one VM at any given time.</span></span>

![Collegare e scollegare dischi con l'archiviazione standard di Azure][planning-guide-figure-1400]

<span data-ttu-id="a2ce5-980">Durante la distribuzione di una nuova macchina virtuale, è possibile decidere se utilizzare i Managed Disks o collocare i dischi su account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-980">During the deployment of a new virtual machine, you can decide whether you want to use Managed Disks or place your disks on Azure Storage Accounts.</span></span> <span data-ttu-id="a2ce5-981">Per utilizzare l’archiviazione Premium, è consigliabile utilizzare i Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-981">If you want to use Premium Storage, we recommend using Managed Disks.</span></span>

<span data-ttu-id="a2ce5-982">Successivamente, è necessario decidere se creare un nuovo disco vuoto o se selezionare un disco esistente caricato in precedenza da collegare subito alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-982">Next, you need to decide whether you want to create a new and empty disk or whether you want to select an existing disk that was uploaded earlier and should be attached to the VM now.</span></span>

<span data-ttu-id="a2ce5-983">**IMPORTANTE**: **NON** usare la memorizzazione nella cache dell'host con l'archiviazione Standard di Azure,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-983">**IMPORTANT**: You **DO NOT** want to use Host Caching with Azure Standard Storage.</span></span> <span data-ttu-id="a2ce5-984">ma mantenere l'impostazione predefinita NESSUNA.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-984">You should leave the Host Cache preference at the default of NONE.</span></span> <span data-ttu-id="a2ce5-985">Con l'archiviazione Premium di Azure si consiglia di abilitare la memorizzazione nella cache di lettura se la caratteristica I/O è generalmente di lettura, come il normale traffico I/O per i file di dati del database.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-985">With Azure Premium Storage you should enable Read Caching if the I/O characteristic is mostly read like typical I/O traffic against database data files.</span></span> <span data-ttu-id="a2ce5-986">Nel caso dei file di log delle transazioni del database, la memorizzazione nella cache non è consigliata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-986">In case of database transaction log file no caching is recommended.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-988">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-988">Windows</span></span>
>
> <span data-ttu-id="a2ce5-989">[Come collegare un disco dati nel portale di Azure][virtual-machines-linux-attach-disk-portal]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-989">[How to attach a data disk in the Azure portal][virtual-machines-linux-attach-disk-portal]</span></span>
>
> <span data-ttu-id="a2ce5-990">Se i dischi sono collegati, è necessario accedere alla macchina virtuale per aprire Gestione disco di Windows.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-990">If disks are attached, you need to log in to the VM to open the Windows Disk Manager.</span></span> <span data-ttu-id="a2ce5-991">Se il montaggio automatico non è abilitato come consigliato nel capitolo [Impostazione del montaggio automatico per dischi collegati][planning-guide-5.5.3], il volume appena collegato deve essere portato online e inizializzato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-991">If automount is not enabled as recommended in chapter [Setting automount for attached disks][planning-guide-5.5.3], the newly attached volume needs to be taken online and initialized.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-993">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-993">Linux</span></span>
>
> <span data-ttu-id="a2ce5-994">Se i dischi sono collegati, è necessario accedere alla macchina virtuale e inizializzare i dischi come descritto in [questo articolo][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-994">If disks are attached, you need to log in to the VM and initialize the disks as described in [this article][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]</span></span>
>
>

- - -
<span data-ttu-id="a2ce5-995">Se il nuovo disco è vuoto, è necessario anche formattarlo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-995">If the new disk is an empty disk, you need to format the disk as well.</span></span> <span data-ttu-id="a2ce5-996">Per la formattazione, in particolare per i file di dati e di log DBMS, si applicano le stesse raccomandazioni fornite per le distribuzioni bare metal di DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-996">For formatting, especially for DBMS data and log files the same recommendations as for bare-metal deployments of the DBMS apply.</span></span>

<span data-ttu-id="a2ce5-997">Come già menzionato nel capitolo [Concetto di macchina virtuale di Microsoft Azure][planning-guide-3.2], un account di archiviazione di Azure non fornisce risorse infinite in termini di volume I/O, operazioni di I/O al secondo e volume di dati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-997">As already mentioned in chapter [The Microsoft Azure Virtual Machine Concept][planning-guide-3.2], an Azure Storage account does not provide infinite resources in terms of I/O volume, IOPS and data volume.</span></span> <span data-ttu-id="a2ce5-998">In genere le macchine virtuali DBMS sono quelle più interessate dal problema.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-998">Usually DBMS VMs are most affected by this.</span></span> <span data-ttu-id="a2ce5-999">Potrebbe essere preferibile usare un account di archiviazione separato per ogni macchina virtuale se si hanno poche macchine virtuali con volumi I/O elevati da distribuire in modo da rimanere entro il limite del volume per l'account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-999">It might be best to use a separate Storage Account for each VM if you have few high I/O volume VMs to deploy in order to stay within the limit of the Azure Storage Account volume.</span></span> <span data-ttu-id="a2ce5-1000">In caso contrario, si deve capire come bilanciare queste macchine virtuali tra i diversi account di archiviazione senza raggiungere il limite per ogni singolo account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1000">Otherwise, you need to see how you can balance these VMs between different Storage accounts without hitting the limit of each single Storage Account.</span></span> <span data-ttu-id="a2ce5-1001">Altri dettagli sono riportati nella [Guida alla distribuzione di DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1001">More details are discussed in the [DBMS Deployment Guide][dbms-guide].</span></span> <span data-ttu-id="a2ce5-1002">Tenere presenti queste limitazioni anche per le macchine virtuali pure del server applicazioni SAP o per altre macchine virtuali che potrebbero richiedere altri dischi rigidi virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1002">You should also keep these limitations in mind for pure SAP application server VMs or other VMs which eventually might require additional VHDs.</span></span> <span data-ttu-id="a2ce5-1003">Queste restrizioni non sono applicabili se si utilizza un disco gestito.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1003">These restrictions do not apply if you use Managed Disk.</span></span> <span data-ttu-id="a2ce5-1004">Per utilizzare l’archiviazione Premium, è consigliabile utilizzare un disco gestito.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1004">If you plan to use Premium Storage, we recommend using Managed Disk.</span></span>

<span data-ttu-id="a2ce5-1005">Un altro argomento rilevante per gli account di archiviazione riguarda la replica geografica dei dischi rigidi virtuali in un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1005">Another topic which is relevant for Storage Accounts is whether the VHDs in a Storage Account are getting Geo-replicated.</span></span> <span data-ttu-id="a2ce5-1006">La replica geografica è abilitata o disabilitata al livello di account di archiviazione e non al livello di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1006">Geo-replication is enabled or disabled on the Storage Account level and not on the VM level.</span></span> <span data-ttu-id="a2ce5-1007">Se la replica geografica è abilitata, i dischi rigidi virtuali all'interno dell'account di archiviazione vengono replicati in un altro data center di Azure della stessa area.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1007">If geo-replication is enabled, the VHDs within the Storage Account would be replicated into another Azure data center within the same region.</span></span> <span data-ttu-id="a2ce5-1008">Prima di prendere una decisione, è necessario considerare la restrizione seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1008">Before deciding on this, you should think about the following restriction:</span></span>

<span data-ttu-id="a2ce5-1009">La replica geografica di Azure funziona in locale in ogni disco rigido virtuale di una macchina virtuale e non replica gli I/O in ordine cronologico tra più dischi rigidi virtuali in una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1009">Azure Geo-replication works locally on each VHD in a VM and does not replicate the IOs in chronological order across multiple VHDs in a VM.</span></span> <span data-ttu-id="a2ce5-1010">Di conseguenza, il disco rigido virtuale che rappresenta la macchina virtuale di base ed eventuali altri dischi rigidi virtuali collegati alla macchina virtuale vengono replicati in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1010">Therefore, the VHD that represents the base VM as well as any additional VHDs attached to the VM are replicated independent of each other.</span></span> <span data-ttu-id="a2ce5-1011">Ciò significa che le modifiche nei vari dischi rigidi virtuali non vengono sincronizzate.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1011">This means there is no synchronization between the changes in the different VHDs.</span></span> <span data-ttu-id="a2ce5-1012">Il fatto che gli I/O vengano replicati indipendentemente dall'ordine di scrittura implica che la replica geografica non è significativa per i server di database che contengono database distribuiti in più dischi rigidi virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1012">The fact that the IOs are replicated independently of the order in which they are written means that geo-replication is not of value for database servers that have their databases distributed over multiple VHDs.</span></span> <span data-ttu-id="a2ce5-1013">Oltre a DBMS, potrebbero esserci altre applicazioni in cui i processi scrivono o manipolano i dati in dischi rigidi virtuali diversi e in cui è importante mantenere l'ordine delle modifiche.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1013">In addition to the DBMS, there also might be other applications where processes write or manipulate data in different VHDs and where it is important to keep the order of changes.</span></span> <span data-ttu-id="a2ce5-1014">Se questo è un requisito, la replica geografica in Azure non dovrebbe essere abilitata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1014">If that is a requirement, geo-replication in Azure should not be enabled.</span></span> <span data-ttu-id="a2ce5-1015">Se si deve o si vuole usare la replica geografica solo in determinati set di macchine virtuali, è possibile suddividere le macchine virtuali e i dischi rigidi virtuali correlati in account di archiviazione diversi con replica geografica abilitata o disabilitata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1015">Dependent on whether you need or want geo-replication for a set of VMs, but not for another set, you can already categorize VMs and their related VHDs into different Storage Accounts that have geo-replication enabled or disabled.</span></span>

#### <span data-ttu-id="a2ce5-1016"><a name="17e0d543-7e8c-4160-a7da-dd7117a1ad9d"></a>Impostazione del montaggio automatico per dischi collegati</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1016"><a name="17e0d543-7e8c-4160-a7da-dd7117a1ad9d"></a>Setting automount for attached disks</span></span>
- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-1018">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1018">Windows</span></span>
>
> <span data-ttu-id="a2ce5-1019">Per le macchine virtuali create da immagini o dischi personali, è necessario verificare ed eventualmente impostare il parametro di montaggio automatico.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1019">For VMs which are created from own Images or Disks, it is necessary to check and possibly set the automount parameter.</span></span> <span data-ttu-id="a2ce5-1020">L'impostazione di questo parametro consente alla macchina virtuale di rimontare automaticamente le unità collegate/montate dopo un riavvio o una ridistribuzione in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1020">Setting this parameter will allow the VM after a restart or redeployment in Azure to mount the attached/mounted drives again automatically.</span></span>
> <span data-ttu-id="a2ce5-1021">Il parametro è impostato per le immagini fornite da Microsoft in Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1021">The parameter is set for the images provided by Microsoft in the Azure Marketplace.</span></span>
>
> <span data-ttu-id="a2ce5-1022">Per impostare il montaggio automatico, vedere la documentazione relativa al file eseguibile della riga di comando diskpart.exe qui:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1022">In order to set the automount, please check the documentation of the command-line executable diskpart.exe here:</span></span>
>
> * [<span data-ttu-id="a2ce5-1023">Opzioni della riga di comando di DiskPart</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1023">DiskPart Command-Line Options</span></span>](https://technet.microsoft.com/library/bb490893.aspx)
> * [<span data-ttu-id="a2ce5-1024">Montaggio automatico</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1024">Automount</span></span>](http://technet.microsoft.com/library/cc753703.aspx)
>
> <span data-ttu-id="a2ce5-1025">La finestra della riga di comando di Windows deve essere aperta come amministratore.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1025">The Windows command-line window should be opened as administrator.</span></span>
>
> <span data-ttu-id="a2ce5-1026">Se i dischi sono collegati, è necessario accedere alla macchina virtuale per aprire Gestione disco di Windows.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1026">If disks are attached, you need to log in to the VM to open the Windows Disk Manager.</span></span> <span data-ttu-id="a2ce5-1027">Se il montaggio automatico non è abilitato come consigliato nel capitolo [Impostazione del montaggio automatico per dischi collegati][planning-guide-5.5.3], il volume appena collegato deve essere portato online e inizializzato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1027">If automount is not enabled as recommended in chapter [Setting automount for attached disks][planning-guide-5.5.3],  the newly attached volume >needs to be taken online and initialized.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-1029">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1029">Linux</span></span>
>
> <span data-ttu-id="a2ce5-1030">È necessario inizializzare un disco vuoto appena collegato, come descritto in [questo articolo][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1030">You need to initialize a newly attached empty disk as described in [this article][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].</span></span>
> <span data-ttu-id="a2ce5-1031">È anche necessario aggiungere nuovi dischi a /etc/fstab.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1031">You also need to add new disks to the /etc/fstab.</span></span>
>
>

- - -
### <a name="final-deployment"></a><span data-ttu-id="a2ce5-1032">Distribuzione finale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1032">Final Deployment</span></span>
<span data-ttu-id="a2ce5-1033">Per la distribuzione finale e la procedura precisa da applicare, in particolare per quanto riguarda la distribuzione di SAP Extended Monitoring, vedere la [Guida alla distribuzione][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1033">For the final deployment and exact steps, especially with regards to the deployment of SAP Extended Monitoring, please refer to the [Deployment Guide][deployment-guide].</span></span>

## <a name="accessing-sap-systems-running-within-azure-vms"></a><span data-ttu-id="a2ce5-1034">Accesso ai sistemi SAP in esecuzione in macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1034">Accessing SAP systems running within Azure VMs</span></span>
<span data-ttu-id="a2ce5-1035">Per gli scenari cloud only, potrebbe essere opportuna la connessione ai sistemi SAP attraverso la rete Internet pubblica con l'interfaccia utente grafica SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1035">For Cloud-Only scenarios, you might want to connect to those SAP systems across the public internet using SAP GUI.</span></span> <span data-ttu-id="a2ce5-1036">In questi casi, è necessario applicare le procedure seguenti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1036">For these cases, the following procedures need to be applied.</span></span>

<span data-ttu-id="a2ce5-1037">Più avanti in questo documento verrà illustrato un altro scenario importante, ovvero la connessione a sistemi SAP nelle distribuzioni cross-premise che contengono una connessione da sito a sito (tunnel VPN) o la connessione Azure ExpressRoute tra i sistemi locali e Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1037">Later in the document we will discuss the other major scenario, connecting to SAP systems in cross-premises deployments which have a site-to-site connection (VPN tunnel) or Azure ExpressRoute connection between the on-premises systems and Azure systems.</span></span>

### <a name="remote-access-to-sap-systems"></a><span data-ttu-id="a2ce5-1038">Accesso remoto ai sistemi SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1038">Remote Access to SAP systems</span></span>
<span data-ttu-id="a2ce5-1039">Con Azure Resource Manager non esistono più endpoint predefiniti come nel modello classico precedente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1039">With Azure Resource Manager there are no default endpoints anymore like in the former classic model.</span></span> <span data-ttu-id="a2ce5-1040">Tutte le porte di una macchina virtuale ARM di Azure sono aperte, purché:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1040">All ports of an Azure ARM VM are open as long as:</span></span>

1. <span data-ttu-id="a2ce5-1041">Non siano definiti gruppi di sicurezza di rete per la subnet o l'interfaccia di rete.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1041">No Network Security Group is defined for the subnet or the network interface.</span></span> <span data-ttu-id="a2ce5-1042">Il traffico di rete verso le macchine virtuali di Azure sia protetto con i cosiddetti "Gruppi di sicurezza di rete".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1042">Network traffic to Azure VMs can be secured via so-called "Network Security Groups".</span></span> <span data-ttu-id="a2ce5-1043">Per altre informazioni, vedere [Che cos'è un gruppo di sicurezza di rete][virtual-networks-nsg]</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1043">For more information see [What is a Network Security Group (NSG)?][virtual-networks-nsg]</span></span>
2. <span data-ttu-id="a2ce5-1044">Non sia definito Azure Load Balancer per l'interfaccia di rete</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1044">No Azure Load Balancer is defined for the network interface</span></span>   

<span data-ttu-id="a2ce5-1045">Vedere la differenza di architettura tra il modello classico e ARM, come descritto in [questo articolo][virtual-machines-azure-resource-manager-architecture].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1045">See the architecture difference between classic model and ARM as described in [this article][virtual-machines-azure-resource-manager-architecture].</span></span>

#### <a name="configuration-of-the-sap-system-and-sap-gui-connectivity-for-cloud-only-scenario"></a><span data-ttu-id="a2ce5-1046">Configurazione della connettività del sistema SAP e dell'interfaccia utente grafica SAP lo per scenario solo cloud</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1046">Configuration of the SAP System and SAP GUI connectivity for Cloud-Only scenario</span></span>
<span data-ttu-id="a2ce5-1047">Per informazioni dettagliate su questo argomento, vedere questo articolo: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/06/24/sap-gui-connection-closed-when-connecting-to-sap-system-in-azure.aspx></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1047">Please see this article which describes details to this topic: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/06/24/sap-gui-connection-closed-when-connecting-to-sap-system-in-azure.aspx></span></span>

#### <a name="changing-firewall-settings-within-vm"></a><span data-ttu-id="a2ce5-1048">Modifica delle impostazioni del firewall all'interno di una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1048">Changing Firewall Settings within VM</span></span>
<span data-ttu-id="a2ce5-1049">Potrebbe essere necessario configurare il firewall nelle macchine virtuali per consentire il traffico in ingresso verso il sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1049">It might be necessary to configure the firewall on your virtual machines to allow inbound traffic to your SAP system.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-1051">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1051">Windows</span></span>
>
> <span data-ttu-id="a2ce5-1052">Per impostazione predefinita, Windows Firewall all'interno di una macchina virtuale distribuita di Azure è attivato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1052">By default, the Windows Firewall within an Azure deployed VM is turned on.</span></span> <span data-ttu-id="a2ce5-1053">A questo punto è necessario consentire l'apertura della porta SAP, in caso contrario l'interfaccia utente grafica SAP non potrà connettersi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1053">You now need to allow the SAP Port to be opened, otherwise the SAP GUI will not be able to connect.</span></span>
> <span data-ttu-id="a2ce5-1054">A tale scopo, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1054">To do this:</span></span>
>
> * <span data-ttu-id="a2ce5-1055">Aprire "Impostazioni avanzate" in Pannello di controllo\Sistema e sicurezza\Windows Firewall.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1055">Open Control Panel\System and Security\Windows Firewall to ‘Advanced Settings’.</span></span>
> * <span data-ttu-id="a2ce5-1056">Fare clic con il pulsante destro del mouse su Regole connessioni in entrata e scegliere "Nuova regola".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1056">Now right-click on Inbound Rules and chose ‘New Rule’.</span></span>
> * <span data-ttu-id="a2ce5-1057">Nella procedura guidata seguente scegliere di creare una nuova regola "Porta".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1057">In the following Wizard chose to create a new ‘Port’ rule.</span></span>
> * <span data-ttu-id="a2ce5-1058">Nel passaggio successivo della procedura guidata lasciare l'impostazione su TCP e digitare il numero della porta da aprire.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1058">In the next step of the wizard, leave the setting at TCP and type in the port number you want to open.</span></span> <span data-ttu-id="a2ce5-1059">L'ID dell'istanza SAP è 00, quindi verrà usato 3200.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1059">Since our SAP instance ID is 00, we took 3200.</span></span> <span data-ttu-id="a2ce5-1060">Se l'istanza ha un numero diverso, è necessario aprire la porta definita in precedenza in base al numero di istanza.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1060">If your instance has a different instance number, the port you defined earlier based on the instance number should be opened.</span></span>
> * <span data-ttu-id="a2ce5-1061">Nella parte successiva della procedura guidata lasciare selezionato "Consenti la connessione".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1061">In the next part of the wizard, you need to leave the item ‘Allow Connection’ checked.</span></span>
> * <span data-ttu-id="a2ce5-1062">Nel passaggio successivo della procedura guidata è necessario definire se la regola si applica al tipo di rete Dominio, Privato o Pubblico.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1062">In the next step of the wizard you need to define whether the rule applies for Domain, Private and Public network.</span></span> <span data-ttu-id="a2ce5-1063">Se necessario, modificarlo in base alle proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1063">Please adjust it if necessary to your needs.</span></span> <span data-ttu-id="a2ce5-1064">Tuttavia, per la connessione con l'interfaccia utente grafica SAP dall'esterno attraverso la rete pubblica è necessario che la regola sia applicata alla rete pubblica.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1064">However, connecting with SAP GUI from the outside through the public network, you need to have the rule applied to the public network.</span></span>
> * <span data-ttu-id="a2ce5-1065">Nell'ultimo passaggio della procedura guidata, denominare la regola e salvare premendo 'Fine'</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1065">In the last step of the wizard, name the rule and save by pressing ‘Finish’</span></span>
>
> <span data-ttu-id="a2ce5-1066">La regola viene applicata immediatamente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1066">The rule becomes effective immediately.</span></span>
>
> ![Definizione delle regole delle porte][planning-guide-figure-1600]
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-1069">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1069">Linux</span></span>
>
> <span data-ttu-id="a2ce5-1070">Le immagini di Linux in Azure Marketplace non abilitano il firewall iptables per impostazione predefinita e la connessione al sistema SAP dovrebbe funzionare.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1070">The Linux images in the Azure Marketplace do not enable the iptables firewall by default and the connection to your SAP system should work.</span></span> <span data-ttu-id="a2ce5-1071">Se è stato abilitato iptables o un altro firewall, vedere la documentazione di iptables o del firewall usato per consentire il traffico TCP in ingresso alla porta 32xx, dove xx è il numero del sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1071">If you enabled iptables or another firewall, please refer to the documentation of iptables or the used firewall to allow inbound tcp traffic to  port 32xx (where xx is the system number of your SAP system).</span></span>
>
>

- - -
#### <a name="security-recommendations"></a><span data-ttu-id="a2ce5-1072">Suggerimenti per la sicurezza</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1072">Security recommendations</span></span>
<span data-ttu-id="a2ce5-1073">L'interfaccia utente grafica SAP non si connette immediatamente alle istanze di SAP (porta 32xx) in esecuzione, ma si connette prima al processo del server dei messaggi SAP (porta 36xx).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1073">The SAP GUI does not connect immediately to any of the SAP instances (port 32xx) which are running, but first connects via the port opened to the SAP message server process (port 36xx).</span></span> <span data-ttu-id="a2ce5-1074">In passato questa porta era usata dal server dei messaggi per la comunicazione interna verso le istanze dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1074">In the past the very same port was used by the message server for the internal communication to the application instances.</span></span> <span data-ttu-id="a2ce5-1075">Per impedire la comunicazione accidentale dei server applicazioni locali con un server dei messaggi in Azure, le porte di comunicazione possono essere modificate.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1075">To prevent on-premises application servers from inadvertently communicating with a message server in Azure the internal communication ports can be changed.</span></span> <span data-ttu-id="a2ce5-1076">È consigliabile modificare la comunicazione interna tra il server dei messaggi SAP e le relative istanze dell'applicazione e un numero di porta diverso in sistemi clonati da sistemi locali, ad esempio un clone di sviluppo per i test di progetto e così via. Questa operazione può essere eseguita con il parametro di profilo predefinito:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1076">It is highly recommended to change the internal communication between the SAP message server and its application instances to a different port number on systems that have been cloned from on-premises systems, such as a clone of development for project testing etc. This can be done with the default profile parameter:</span></span>

> <span data-ttu-id="a2ce5-1077">rdisp/msserv_internal</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1077">rdisp/msserv_internal</span></span>
>
>

<span data-ttu-id="a2ce5-1078">come documentato in [Impostazioni di sicurezza per il server messaggi SAP](https://help.sap.com/saphelp_nwpi71/helpdata/en/47/c56a6938fb2d65e10000000a42189c/content.htm)</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1078">as documented in [Security Settings for the SAP Message Server ](https://help.sap.com/saphelp_nwpi71/helpdata/en/47/c56a6938fb2d65e10000000a42189c/content.htm)</span></span>

## <span data-ttu-id="a2ce5-1079"><a name="96a77628-a05e-475d-9df3-fb82217e8f14"></a>Concetti della distribuzione solo cloud di istanze di SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1079"><a name="96a77628-a05e-475d-9df3-fb82217e8f14"></a>Concepts of Cloud-Only deployment of SAP instances</span></span>
### <span data-ttu-id="a2ce5-1080"><a name="3e9c3690-da67-421a-bc3f-12c520d99a30"></a>Scenario di formazione/dimostrativo di una singola VM con SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1080"><a name="3e9c3690-da67-421a-bc3f-12c520d99a30"></a>Single VM with SAP NetWeaver demo/training scenario</span></span>
![Esecuzione di singoli sistemi dimostrativi SAP delle macchine virtuali con gli stessi nomi di macchina virtuale, isolati nei servizi cloud di Azure][planning-guide-figure-1700]

<span data-ttu-id="a2ce5-1082">In questo scenario (vedere il capitolo [Solo cloud][planning-guide-2.1] di questo documento) viene implementato un tipico scenario di sistema di formazione/dimostrativo, in cui lo scenario completo di formazione/dimostrativo è contenuto all'interno di un'unica macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1082">In this scenario (see chapter [Cloud-Only][planning-guide-2.1] of this document) we are implementing a typical training/demo system scenario where the complete training/demo scenario is contained in a single VM.</span></span> <span data-ttu-id="a2ce5-1083">Si presuppone che la distribuzione venga eseguita con i modelli di immagine di VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1083">We assume that the deployment is done through VM image templates.</span></span> <span data-ttu-id="a2ce5-1084">Si suppone inoltre che più macchine virtuali di formazione/dimostrative debbano essere distribuite con macchine virtuali con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1084">We also assume that multiple of these demo/trainings VMs need to be deployed with the VMs having the same name.</span></span>

<span data-ttu-id="a2ce5-1085">Si presuppone che sia stata creata un'immagine di macchina virtuale come descritto nelle sezioni del capitolo [Preparazione di VM con SAP per Azure][planning-guide-5.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1085">The assumption is that you created a VM Image as described in some sections of chapter [Preparing VMs with SAP for Azure][planning-guide-5.2] in this document.</span></span>

<span data-ttu-id="a2ce5-1086">La sequenza di eventi per implementare lo scenario è simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1086">The sequence of events to implement the scenario looks like this:</span></span>

##### <a name="powershell"></a><span data-ttu-id="a2ce5-1087">PowerShell</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1087">Powershell</span></span>
* <span data-ttu-id="a2ce5-1088">Creare un nuovo gruppo di risorse per ogni scenario di formazione/dimostrativo</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1088">Create a new resource group for every training/demo landscape</span></span>

```powershell
$rgName = "SAPERPDemo1"
New-AzureRmResourceGroup -Name $rgName -Location "North Europe"
```
* <span data-ttu-id="a2ce5-1089">Creare un nuovo account di archiviazione, se non si vogliono utilizzare i Managed Disks</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1089">Create a new storage account if you don't want to use Managed Disks</span></span>

```powershell
$suffix = Get-Random -Minimum 100000 -Maximum 999999
$account = New-AzureRmStorageAccount -ResourceGroupName $rgName -Name "saperpdemo$suffix" -SkuName Standard_LRS -Kind "Storage" -Location "North Europe"
```

* <span data-ttu-id="a2ce5-1090">Creare una nuova rete virtuale per ogni scenario di formazione/dimostrativo consentire l'utilizzo dello stesso nome host e degli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1090">Create a new virtual network for every training/demo landscape to enable the usage of the same hostname and IP addresses.</span></span> <span data-ttu-id="a2ce5-1091">La rete virtuale è protetta da un gruppo di sicurezza di rete che consente solo il traffico verso la porta 3389 per abilitare l'accesso al Desktop remoto e verso la porta 22 per SSH.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1091">The virtual network is protected by a Network Security Group that only allows traffic to port 3389 to enable Remote Desktop access and port 22 for SSH.</span></span>

```powershell
# Create a new Virtual Network
$rdpRule = New-AzureRmNetworkSecurityRuleConfig -Name SAPERPDemoNSGRDP -Protocol * -SourcePortRange * -DestinationPortRange 3389 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 100
$sshRule = New-AzureRmNetworkSecurityRuleConfig -Name SAPERPDemoNSGSSH -Protocol * -SourcePortRange * -DestinationPortRange 22 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 101
$nsg = New-AzureRmNetworkSecurityGroup -Name SAPERPDemoNSG -ResourceGroupName $rgName -Location  "North Europe" -SecurityRules $rdpRule,$sshRule

$subnetConfig = New-AzureRmVirtualNetworkSubnetConfig -Name Subnet1 -AddressPrefix  10.0.1.0/24 -NetworkSecurityGroup $nsg
$vnet = New-AzureRmVirtualNetwork -Name SAPERPDemoVNet -ResourceGroupName $rgName -Location "North Europe"  -AddressPrefix 10.0.1.0/24 -Subnet $subnetConfig
```

* <span data-ttu-id="a2ce5-1092">Creare un nuovo indirizzo IP pubblico da usare per accedere alla macchina virtuale da Internet</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1092">Create a new public IP address that can be used to access the virtual machine from the internet</span></span>

```powershell
# Create a public IP address with a DNS name
$pip = New-AzureRmPublicIpAddress -Name SAPERPDemoPIP -ResourceGroupName $rgName -Location "North Europe" -DomainNameLabel $rgName.ToLower() -AllocationMethod Dynamic
```

* <span data-ttu-id="a2ce5-1093">Creare una nuova interfaccia di rete per la macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1093">Create a new network interface for the virtual machine</span></span>

```powershell
# Create a new Network Interface
$nic = New-AzureRmNetworkInterface -Name SAPERPDemoNIC -ResourceGroupName $rgName -Location "North Europe" -Subnet $vnet.Subnets[0] -PublicIpAddress $pip
```

* <span data-ttu-id="a2ce5-1094">Creare una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1094">Create a virtual machine.</span></span> <span data-ttu-id="a2ce5-1095">In uno scenario solo cloud tutte le macchine virtuali avranno lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1095">For the Cloud-Only scenario every VM will have the same name.</span></span> <span data-ttu-id="a2ce5-1096">Anche il SID di SAP delle istanze di SAP NetWeaver in queste macchine virtuali sarà lo stesso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1096">The SAP SID of the SAP NetWeaver instances in those VMs will be the same as well.</span></span> <span data-ttu-id="a2ce5-1097">Nel gruppo di risorse di Azure il nome della macchina virtuale deve essere univoco, ma in diversi gruppi di risorse di Azure è possibile eseguire macchine virtuali con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1097">Within the Azure Resource Group, the name of the VM needs to be unique, but in different Azure Resource Groups you can run VMs with the same name.</span></span> <span data-ttu-id="a2ce5-1098">L'account predefinito 'Administrator' di Windows o 'root' di Linux non è valido.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1098">The default 'Administrator' account of Windows or 'root' for Linux are not valid.</span></span> <span data-ttu-id="a2ce5-1099">È quindi necessario definire un nuovo nome utente dell'amministratore con una password.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1099">Therefore, a new administrator user name needs to be defined together with a password.</span></span> <span data-ttu-id="a2ce5-1100">Devono essere definite anche le dimensioni della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1100">The size of the VM also needs to be defined.</span></span>

```powershell
#####
# Create a new virtual machine with an official image from the Azure Marketplace
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

# select image
$vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "MicrosoftWindowsServer" -Offer "WindowsServer" -Skus "2012-R2-Datacenter" -Version "latest"
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred -ProvisionVMAgent -EnableAutoUpdate
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "SUSE" -Offer "SLES-SAP" -Skus "12-SP1" -Version "latest"
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "RedHat" -Offer "RHEL" -Skus "7.2" -Version "latest"
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "Oracle" -Offer "Oracle-Linux" -Skus "7.2" -Version "latest"
# $vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$vmconfig = Set-AzureRmVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

```powershell
#####
# Create a new virtual machine with a VHD that contains the private image that you want to use
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$diskName="osfromimage"
$osDiskUri=$account.PrimaryEndpoints.Blob.ToString() + "vhds/" + $diskName  + ".vhd"

$vmconfig = Set-AzureRmVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path to VHD that contains the OS image> -Windows
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred
#$vmconfig = Set-AzureRmVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path to VHD that contains the OS image> -Linux
#$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Set-AzureRmVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

```powershell
#####
# Create a new virtual machine with a Managed Disk Image
#####
$cred=Get-Credential -Message "Type the name and password of the local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -Id <Id of Managed Disk Image>
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred
#$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Set-AzureRmVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

* <span data-ttu-id="a2ce5-1101">Facoltativamente, aggiungere altri dischi e ripristinare il contenuto necessario.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1101">Optionally add additional disks and restore necessary content.</span></span> <span data-ttu-id="a2ce5-1102">Tenere presente che tutti i nomi dei BLOB (URL per i BLOB) devono essere univoci all'interno di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1102">Be aware that all blob names (URLs to the blobs) must be unique within Azure.</span></span>

```powershell
# Optional: Attach additional VHD data disks
$vm = Get-AzureRmVM -ResourceGroupName $rgName -Name SAPERPDemo
$dataDiskUri = $account.PrimaryEndpoints.Blob.ToString() + "vhds/datadisk.vhd"
Add-AzureRmVMDataDisk -VM $vm -Name datadisk -VhdUri $dataDiskUri -DiskSizeInGB 1023 -CreateOption empty | Update-AzureRmVM

# Optional: Attach additional Managed Disks
$vm = Get-AzureRmVM -ResourceGroupName $rgName -Name SAPERPDemo
Add-AzureRmVMDataDisk -VM $vm -Name datadisk -DiskSizeInGB 1023 -CreateOption empty -Lun 0 | Update-AzureRmVM
```

##### <a name="cli"></a><span data-ttu-id="a2ce5-1103">CLI</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1103">CLI</span></span>
<span data-ttu-id="a2ce5-1104">L'esempio di codice seguente può essere usato in Linux.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1104">The following example code can be used on Linux.</span></span> <span data-ttu-id="a2ce5-1105">Per Windows, usare PowerShell come descritto in precedenza oppure adattare l'esempio per usare %rgName% anziché $rgName e impostare la variabile di ambiente con il comando di Windows *set*.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1105">For Windows, please either use PowerShell as described above or adapt the example to use %rgName% instead of $rgName and set the environment variable using the Windows command *set*.</span></span>

* <span data-ttu-id="a2ce5-1106">Creare un nuovo gruppo di risorse per ogni scenario di formazione/dimostrativo</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1106">Create a new resource group for every training/demo landscape</span></span>

```
rgName=SAPERPDemo1
rgNameLower=saperpdemo1
az group create --name $rgName --location "North Europe"
```

* <span data-ttu-id="a2ce5-1107">Creare un nuovo account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1107">Create a new storage account</span></span>

```
az storage account create --resource-group $rgName --location "North Europe" --kind Storage --sku Standard_LRS --name $rgNameLower
```

* <span data-ttu-id="a2ce5-1108">Creare una nuova rete virtuale per ogni scenario di formazione/dimostrativo consentire l'utilizzo dello stesso nome host e degli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1108">Create a new virtual network for every training/demo landscape to enable the usage of the same hostname and IP addresses.</span></span> <span data-ttu-id="a2ce5-1109">La rete virtuale è protetta da un gruppo di sicurezza di rete che consente solo il traffico verso la porta 3389 per abilitare l'accesso al Desktop remoto e verso la porta 22 per SSH.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1109">The virtual network is protected by a Network Security Group that only allows traffic to port 3389 to enable Remote Desktop access and port 22 for SSH.</span></span>

```
az network nsg create --resource-group $rgName --location "North Europe" --name SAPERPDemoNSG
az network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGRDP --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 3389 --access Allow --priority 100 --direction Inbound
az network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGSSH --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 22 --access Allow --priority 101 --direction Inbound

az network vnet create --resource-group $rgName --name SAPERPDemoVNet --location "North Europe" --address-prefixes 10.0.1.0/24
az network vnet subnet create --resource-group $rgName --vnet-name SAPERPDemoVNet --name Subnet1 --address-prefix 10.0.1.0/24 --network-security-group SAPERPDemoNSG
```

* <span data-ttu-id="a2ce5-1110">Creare un nuovo indirizzo IP pubblico da usare per accedere alla macchina virtuale da Internet</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1110">Create a new public IP address that can be used to access the virtual machine from the internet</span></span>

```
az network public-ip create --resource-group $rgName --name SAPERPDemoPIP --location "North Europe" --dns-name $rgNameLower --allocation-method Dynamic
```

* <span data-ttu-id="a2ce5-1111">Creare una nuova interfaccia di rete per la macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1111">Create a new network interface for the virtual machine</span></span>

```
az network nic create --resource-group $rgName --location "North Europe" --name SAPERPDemoNIC --public-ip-address SAPERPDemoPIP --subnet Subnet1 --vnet-name SAPERPDemoVNet
```

* <span data-ttu-id="a2ce5-1112">Creare una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1112">Create a virtual machine.</span></span> <span data-ttu-id="a2ce5-1113">In uno scenario solo cloud tutte le macchine virtuali avranno lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1113">For the Cloud-Only scenario every VM will have the same name.</span></span> <span data-ttu-id="a2ce5-1114">Anche il SID di SAP delle istanze di SAP NetWeaver in queste macchine virtuali sarà lo stesso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1114">The SAP SID of the SAP NetWeaver instances in those VMs will be the same as well.</span></span> <span data-ttu-id="a2ce5-1115">Nel gruppo di risorse di Azure il nome della macchina virtuale deve essere univoco, ma in diversi gruppi di risorse di Azure è possibile eseguire macchine virtuali con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1115">Within the Azure Resource Group, the name of the VM needs to be unique, but in different Azure Resource Groups you can run VMs with the same name.</span></span> <span data-ttu-id="a2ce5-1116">L'account predefinito 'Administrator' di Windows o 'root' di Linux non è valido.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1116">The default 'Administrator' account of Windows or 'root' for Linux are not valid.</span></span> <span data-ttu-id="a2ce5-1117">È quindi necessario definire un nuovo nome utente dell'amministratore con una password.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1117">Therefore, a new administrator user name needs to be defined together with a password.</span></span> <span data-ttu-id="a2ce5-1118">Devono essere definite anche le dimensioni della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1118">The size of the VM also needs to be defined.</span></span>

```
#####
# Create virtual machines using storage accounts
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image SUSE:SLES-SAP:12-SP1:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image RedHat:RHEL:7.2:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image "Oracle:Oracle-Linux:7.2:latest" --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password

#####
# Create virtual machines using Managed Disks
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image SUSE:SLES-SAP:12-SP1:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image RedHat:RHEL:7.2:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image "Oracle:Oracle-Linux:7.2:latest" --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
```

```
#####
# Create a new virtual machine with a VHD that contains the private image that you want to use
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --os-type Windows --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --image <path to image vhd>
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --os-type Linux --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --image <path to image vhd> --authentication-type password

#####
# Create a new virtual machine with a Managed Disk Image
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --image <managed disk image id>
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --image <managed disk image id> --authentication-type password
```

* <span data-ttu-id="a2ce5-1119">Facoltativamente, aggiungere altri dischi e ripristinare il contenuto necessario.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1119">Optionally add additional disks and restore necessary content.</span></span> <span data-ttu-id="a2ce5-1120">Tenere presente che tutti i nomi dei BLOB (URL per i BLOB) devono essere univoci all'interno di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1120">Be aware that all blob names (URLs to the blobs) must be unique within Azure.</span></span>

```
# Optional: Attach additional VHD data disks
az vm unmanaged-disk attach --resource-group $rgName --vm-name SAPERPDemo --size-gb 1023 --vhd-uri https://$rgNameLower.blob.core.windows.net/vhds/data.vhd  --new

# Optional: Attach additional Managed Disks
az vm disk attach --resource-group $rgName --vm-name SAPERPDemo --size-gb 1023 --disk datadisk --new
```

##### <a name="template"></a><span data-ttu-id="a2ce5-1121">Modello</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1121">Template</span></span>
<span data-ttu-id="a2ce5-1122">È possibile usare i modelli di esempio nel repository azure-quickstart-templates di github.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1122">You can use the sample templates on the azure-quickstart-templates repository on github.</span></span>

* [<span data-ttu-id="a2ce5-1123">Macchina virtuale semplice di Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1123">Simple Linux VM</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-linux)
* [<span data-ttu-id="a2ce5-1124">Macchina virtuale semplice di Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1124">Simple Windows VM</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-windows)
* [<span data-ttu-id="a2ce5-1125">Macchina virtuale dall'immagine</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1125">VM from image</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image)

### <a name="implement-a-set-of-vms-which-need-to-communicate-within-azure"></a><span data-ttu-id="a2ce5-1126">Implementare un set di macchine virtuali che devono comunicare all'interno di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1126">Implement a set of VMs which need to communicate within Azure</span></span>
<span data-ttu-id="a2ce5-1127">Questo scenario solo cloud è uno scenario tipico per scopi di formazione e dimostrativi in cui il software che rappresenta lo scenario di formazione/dimostrativo viene distribuito in più macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1127">This Cloud-Only scenario is a typical scenario for training and demo purposes where the software representing the demo/training scenario is spread over multiple VMs.</span></span> <span data-ttu-id="a2ce5-1128">I vari componenti installati nelle diverse macchine virtuali devono comunicare tra loro.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1128">The different components installed in the different VMs need to communicate with each other.</span></span> <span data-ttu-id="a2ce5-1129">Anche in questo scenario non è necessaria alcuna comunicazione di rete locale o scenario cross-premise.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1129">Again, in this scenario no on-premises network communication or cross-premises scenario is needed.</span></span>

<span data-ttu-id="a2ce5-1130">Questo scenario è un'estensione dell'installazione descritta nel capitolo [Scenario di formazione/dimostrativo di una singola VM con SAP NetWeaver][planning-guide-7.1] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1130">This scenario is an extension of the installation described in chapter [Single VM with SAP NetWeaver demo/training scenario][planning-guide-7.1] of this document.</span></span> <span data-ttu-id="a2ce5-1131">In questo caso vengono aggiunte più macchine virtuali a un gruppo di risorse esistente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1131">In this case more virtual machines will be added to an existing resource group.</span></span> <span data-ttu-id="a2ce5-1132">Nell'esempio seguente lo scenario di formazione è costituito da una macchina virtuale ASCS/SCS SAP, da una macchina virtuale che esegue un sistema DBMS e da una macchina virtuale di un'istanza del server applicazioni SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1132">In the following example the training landscape consists of an SAP ASCS/SCS VM, a VM running a DBMS and an SAP Application Server instance VM.</span></span>

<span data-ttu-id="a2ce5-1133">Prima di compilare questo scenario è necessario considerare le impostazioni di base come descritto nello scenario precedente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1133">Before you build this scenario you need to think about basic settings as already exercised in the scenario before.</span></span>

#### <a name="resource-group-and-virtual-machine-naming"></a><span data-ttu-id="a2ce5-1134">Denominazione dei gruppi di risorse e delle macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1134">Resource Group and Virtual Machine naming</span></span>
<span data-ttu-id="a2ce5-1135">Tutti i nomi dei gruppi di risorse devono essere univoci.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1135">All resource group names must be unique.</span></span> <span data-ttu-id="a2ce5-1136">Sviluppare il proprio schema di denominazione delle risorse, ad esempio `<rg-name`>-suffisso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1136">Develop your own naming scheme of your resources, such as `<rg-name`>-suffix.</span></span>

<span data-ttu-id="a2ce5-1137">Il nome delle macchine virtuali deve essere univoco all'interno del gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1137">The virtual machine name has to be unique within the resource group.</span></span>

#### <a name="set-up-network-for-communication-between-the-different-vms"></a><span data-ttu-id="a2ce5-1138">Configurare la rete per la comunicazione tra le diverse macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1138">Set up Network for communication between the different VMs</span></span>
![Set di VM all'interno di una rete virtuale di Azure][planning-guide-figure-1900]

<span data-ttu-id="a2ce5-1140">Per impedire conflitti di denominazione con cloni dello stesso scenario di formazione/dimostrativo, è necessario creare una rete virtuale di Azure per ogni scenario.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1140">To prevent naming collisions with clones of the same training/demo landscapes, you need to create an Azure Virtual Network for every landscape.</span></span> <span data-ttu-id="a2ce5-1141">La risoluzione dei nomi DNS verrà fornita da Azure oppure è possibile configurare il proprio server DNS all'esterno di Azure (l'argomento non verrà ulteriormente trattato in questo documento).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1141">DNS name resolution will be provided by Azure or you can configure your own DNS server outside Azure (not to be further discussed here).</span></span> <span data-ttu-id="a2ce5-1142">In questo scenario non viene configurato alcun DNS personalizzato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1142">In this scenario we do not configure our own DNS.</span></span> <span data-ttu-id="a2ce5-1143">Per tutte le macchine virtuali all'interno di una rete virtuale di Azure viene abilitata la comunicazione usando nomi host.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1143">For all virtual machines inside one Azure Virtual Network, communication via hostnames will be enabled.</span></span>

<span data-ttu-id="a2ce5-1144">I motivi che giustificano la separazione degli scenari di formazione o dimostrativi in base alle reti virtuali e non solo ai gruppi di risorse potrebbero essere i seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1144">The reasons to separate training or demo landscapes by virtual networks and not only resource groups could be:</span></span>

* <span data-ttu-id="a2ce5-1145">Il panorama applicativo SAP, così com'è configurato, richiede un proprio AP/OpenLDAP e un server di dominio deve far parte di ciascuno degli scenari.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1145">The SAP landscape as set up needs its own AD/OpenLDAP and a Domain Server needs to be part of each of the landscapes.</span></span>  
* <span data-ttu-id="a2ce5-1146">Il panorama applicativo SAP, così com'è configurato, include componenti che devono interagire con indirizzi IP fissi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1146">The SAP landscape as set up has components that need to work with fixed IP addresses.</span></span>

<span data-ttu-id="a2ce5-1147">Altri dettagli sulle reti virtuali di Azure e su come definirle sono disponibili in [questo articolo][virtual-networks-create-vnet-arm-pportal].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1147">More details about Azure Virtual Networks and how to define them can be found in [this article][virtual-networks-create-vnet-arm-pportal].</span></span>

## <a name="deploying-sap-vms-with-corporate-network-connectivity-cross-premises"></a><span data-ttu-id="a2ce5-1148">Distribuzione di VM SAP con connettività di rete aziendale (cross-premise)</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1148">Deploying SAP VMs with Corporate Network Connectivity (Cross-Premises)</span></span>
<span data-ttu-id="a2ce5-1149">Si esegue un panorama applicativo SAP e si vuole suddividere la distribuzione tra bare metal per i server DBMS di fascia alta, ambienti virtualizzati locali per i livelli dell'applicazione, sistemi SAP configurati a 2 livelli di dimensioni inferiori e IaaS di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1149">You run an SAP landscape and want to divide the deployment between bare-metal for high-end DBMS servers, on-premises virtualized environments for application layers and smaller 2-Tier configured SAP systems and Azure IaaS.</span></span> <span data-ttu-id="a2ce5-1150">Il presupposto di base è che i sistemi SAP all'interno di un panorama applicativo SAP debbano comunicare tra loro e con molti altri componenti software distribuiti nell'azienda, indipendentemente dalla propria modalità di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1150">The base assumption is that SAP systems within one SAP landscape need to communicate with each other and with many other software components deployed in the company, independent of their deployment form.</span></span> <span data-ttu-id="a2ce5-1151">Inoltre, non devono essere presenti differenze introdotte dalla modalità di distribuzione per l'utente finale che si connette con SAP GUI o altre interfacce.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1151">There also should be no differences introduced by the deployment form for the end user connecting with SAP GUI or other interfaces.</span></span> <span data-ttu-id="a2ce5-1152">Queste condizioni possono essere soddisfatte solo quando i servizi Active Directory/Open LDAP e DNS locali vengono estesi ai sistemi di Azure usando la connettività da sito a sito/multisito o connessioni private come Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1152">These conditions can only be met when we have the on-premises Active Directory/OpenLDAP and DNS services extended to the Azure systems through site-to-site/multi-site connectivity or private connections like Azure ExpressRoute.</span></span>

<span data-ttu-id="a2ce5-1153">Per maggiori informazioni sui dettagli di implementazione di SAP in Azure, si consiglia di leggere il capitolo [Concetti della distribuzione solo cloud di istanze SAP][planning-guide-7] di questo documento che illustra alcuni dei costrutti di base di Azure e in che modo devono essere usati con le applicazioni SAP in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1153">In order to get more background on the implementation details of SAP on Azure, we encourage you to read chapter [Concepts of Cloud-Only deployment of SAP instances][planning-guide-7] of this document which explains some of the basics constructs of Azure and how these should be used with SAP applications in Azure.</span></span>

### <a name="scenario-of-an-sap-landscape"></a><span data-ttu-id="a2ce5-1154">Scenario di un panorama applicativo SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1154">Scenario of an SAP landscape</span></span>
<span data-ttu-id="a2ce5-1155">Lo scenario cross-premise può essere descritto approssimativamente come nei grafici seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1155">The cross-premises scenario can be roughly described like in the graphics below:</span></span>

![Connettività da sito a sito tra asset locali e di Azure][planning-guide-figure-2100]

<span data-ttu-id="a2ce5-1157">Lo scenario illustrato in precedenza descrive una situazione in cui i servizi Active Directory/Open LDAP e DNS locali vengono estesi ad Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1157">The scenario shown above describes a scenario where the on-premises AD/OpenLDAP and DNS are extended to Azure.</span></span> <span data-ttu-id="a2ce5-1158">Sul lato locale un determinato intervallo di indirizzi IP è riservato per ogni sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1158">On the on-premises side, a certain IP address range is reserved per Azure subscription.</span></span> <span data-ttu-id="a2ce5-1159">L'intervallo di indirizzi IP verrà assegnato a una rete virtuale di Azure sul lato Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1159">The IP address range will be assigned to an Azure Virtual Network on the Azure side.</span></span>

#### <a name="security-considerations"></a><span data-ttu-id="a2ce5-1160">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1160">Security considerations</span></span>
<span data-ttu-id="a2ce5-1161">Il requisito minimo è l'uso di protocolli di comunicazione protetta, ad esempio SSL/TLS per l'accesso dal browser o connessioni basate su VPN per l'accesso dal sistema ai servizi di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1161">The minimum requirement is the use of secure communication protocols such as SSL/TLS for browser access or VPN-based connections for system access to the Azure services.</span></span> <span data-ttu-id="a2ce5-1162">Il presupposto è che le aziende gestiscano la connessione VPN tra la propria rete aziendale e Azure in modo molto diverso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1162">The assumption is that companies handle the VPN connection between their corporate network and Azure very differently.</span></span> <span data-ttu-id="a2ce5-1163">Alcune aziende possono semplicemente aprire tutte le porte,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1163">Some companies might blankly open all the ports.</span></span> <span data-ttu-id="a2ce5-1164">altre potrebbero adottare un approccio più selettivo riguardo alle scelta delle porte da aprire e così via.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1164">Some other companies might want to be very precise in which ports they need to open, etc.</span></span>

<span data-ttu-id="a2ce5-1165">Le porte di comunicazione SAP tipiche sono elencate nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1165">In the table below typical SAP communication ports are listed.</span></span> <span data-ttu-id="a2ce5-1166">Sostanzialmente, è sufficiente aprire la porta del gateway SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1166">Basically it is sufficient to open the SAP gateway port.</span></span>

| <span data-ttu-id="a2ce5-1167">Service</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1167">Service</span></span> | <span data-ttu-id="a2ce5-1168">Nome della porta</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1168">Port Name</span></span> | <span data-ttu-id="a2ce5-1169">Esempio `<nn`> = 01</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1169">Example `<nn`> = 01</span></span> | <span data-ttu-id="a2ce5-1170">Intervallo predefinito (min-max)</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1170">Default Range (min-max)</span></span> | <span data-ttu-id="a2ce5-1171">Commento</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1171">Comment</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="a2ce5-1172">Dispatcher</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1172">Dispatcher</span></span> |<span data-ttu-id="a2ce5-1173">sapdp`<nn>` vedere *</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1173">sapdp`<nn>` see *</span></span> |<span data-ttu-id="a2ce5-1174">3201</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1174">3201</span></span> |<span data-ttu-id="a2ce5-1175">3200 – 3299</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1175">3200 – 3299</span></span> |<span data-ttu-id="a2ce5-1176">Dispatcher di SAP, usato dall'interfaccia utente grafica di SAP per Windows e Java</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1176">SAP Dispatcher, used by SAP GUI for Windows and Java</span></span> |
| <span data-ttu-id="a2ce5-1177">Server messaggi</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1177">Message server</span></span> |<span data-ttu-id="a2ce5-1178">sapms`<sid`> vedere **</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1178">sapms`<sid`> see **</span></span> |<span data-ttu-id="a2ce5-1179">3600</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1179">3600</span></span> |<span data-ttu-id="a2ce5-1180">sapms libero`<anySID`></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1180">free sapms`<anySID`></span></span> |<span data-ttu-id="a2ce5-1181">sid = SAP-System-ID</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1181">sid = SAP-System-ID</span></span> |
| <span data-ttu-id="a2ce5-1182">Gateway</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1182">Gateway</span></span> |<span data-ttu-id="a2ce5-1183">sapgw`<nn`> vedere *</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1183">sapgw`<nn`> see *</span></span> |<span data-ttu-id="a2ce5-1184">3301</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1184">3301</span></span> |<span data-ttu-id="a2ce5-1185">libero</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1185">free</span></span> |<span data-ttu-id="a2ce5-1186">Gateway SAP, usato per le comunicazioni CPIC e RFC</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1186">SAP gateway, used for CPIC and RFC communication</span></span> |
| <span data-ttu-id="a2ce5-1187">Router SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1187">SAP router</span></span> |<span data-ttu-id="a2ce5-1188">sapdp99</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1188">sapdp99</span></span> |<span data-ttu-id="a2ce5-1189">3299</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1189">3299</span></span> |<span data-ttu-id="a2ce5-1190">libero</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1190">free</span></span> |<span data-ttu-id="a2ce5-1191">Solo i nomi del servizio CI (istanza centrale) possono essere riassegnati in /etc/services specificando un valore arbitrario dopo l'installazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1191">Only CI (central instance) Service names can be reassigned in /etc/services to an arbitrary value after installation.</span></span> |

<span data-ttu-id="a2ce5-1192">*) nn = numero istanza SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1192">*) nn = SAP Instance Number</span></span>

<span data-ttu-id="a2ce5-1193">**) sid = SAP-System-ID</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1193">**) sid = SAP-System-ID</span></span>

<span data-ttu-id="a2ce5-1194">Informazioni più dettagliate sulle porte necessarie per i diversi prodotti o servizi SAP in base ai prodotti SAP sono disponibili qui: <http://scn.sap.com/docs/DOC-17124>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1194">More detailed information on ports required for different SAP products or services by SAP products can be found here <http://scn.sap.com/docs/DOC-17124>.</span></span>
<span data-ttu-id="a2ce5-1195">Questo documento fornisce informazioni che consentono di aprire nel dispositivo VPN le porte dedicate necessarie per gli scenari e i prodotti SAP specifici.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1195">With this document you should be able to open dedicated ports in the VPN device necessary for specific SAP products and scenarios.</span></span>

<span data-ttu-id="a2ce5-1196">Quando si distribuiscono macchine virtuali in tale scenario è possibile applicare altre misure di sicurezza creando un [gruppo di sicurezza di rete][virtual-networks-nsg] per definire le regole di accesso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1196">Other security measures when deploying VMs in such a scenario could be to create a [Network Security Group][virtual-networks-nsg] to define access rules.</span></span>

### <a name="dealing-with-different-virtual-machine-series"></a><span data-ttu-id="a2ce5-1197">Gestione di serie di macchine virtuali diverse</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1197">Dealing with different Virtual Machine Series</span></span>
<span data-ttu-id="a2ce5-1198">Nel corso degli ultimi 12 mesi Microsoft ha aggiunto molti più tipi di VM che si differenziano per numero di vCPU, memoria o, soprattutto, per l'hardware su cui vengono eseguiti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1198">In the course of last 12 months Microsoft added many more VM types that differ either in number of vCPUs, memory or more important on hardware it is running on.</span></span> <span data-ttu-id="a2ce5-1199">Non tutte queste VM sono supportate con SAP (vedere i tipi di VM supportati nella nota SAP [1928533]).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1199">Not all those VMs are supported with SAP (see supported VM types in SAP Note [1928533]).</span></span> <span data-ttu-id="a2ce5-1200">Alcune di queste VM vengono eseguite su generazioni di hardware host diverse,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1200">Some of those VMs run on different host hardware generations.</span></span> <span data-ttu-id="a2ce5-1201">che vengono distribuite a un livello di granularità pari a quella di un'unità di scala Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1201">These host hardware generations are getting deployed in the granularity of an Azure Scale-Unit.</span></span> <span data-ttu-id="a2ce5-1202">Ciò significa che possono verificarsi casi in cui le diverse dimensioni di VM scelte non possono essere eseguite sulla stessa unità di scala.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1202">Means cases may arise where the different VM sizes you chose can’t be run on the same Scale-Unit.</span></span> <span data-ttu-id="a2ce5-1203">Un set di disponibilità è limitato nella possibilità di estensione delle unità di scala in base ai vari tipi di hardware.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1203">An Availability Set is limited in the ability to span Scale-Units based of different hardware.</span></span>  <span data-ttu-id="a2ce5-1204">Ad esempio, per eseguire il DBMS su macchine virtuali A5-A11 e il livello dell'applicazione SAP su macchine virtuali di serie G, è necessario distribuire un singolo sistema SAP o sistemi SAP diversi all'interno di set di disponibilità diversi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1204">For example if you want to run the DBMS on A5-A11 VMs and the SAP application layer on G-Series VMs, you would be forced to deploy a single SAP system or different SAP systems within different Availability Sets.</span></span>

#### <a name="printing-on-a-local-network-printer-from-sap-instance-in-azure"></a><span data-ttu-id="a2ce5-1205">Stampa su una stampante di rete locale dall'istanza SAP in Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1205">Printing on a local network printer from SAP instance in Azure</span></span>
##### <a name="printing-over-tcpip-in-cross-premises-scenario"></a><span data-ttu-id="a2ce5-1206">Stampa su TCP/IP in uno scenario cross-premise</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1206">Printing over TCP/IP in Cross-Premises scenario</span></span>
<span data-ttu-id="a2ce5-1207">La configurazione delle stampanti di rete locali basate su TCP/IP in una VM di Azure è complessivamente uguale a quella della rete aziendale, presupponendo che sia disponibile un tunnel VPN da sito a sito o una connessione ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1207">Setting up your on-premises TCP/IP based network printers in an Azure VM is overall the same as in your corporate network, assuming you do have a VPN Site-To-Site tunnel or ExpressRoute connection established.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-1209">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1209">Windows</span></span>
>
> <span data-ttu-id="a2ce5-1210">A tale scopo, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1210">To do this:</span></span>
>
> * <span data-ttu-id="a2ce5-1211">Alcune stampanti di rete sono dotate di una configurazione guidata che semplifica la configurazione della stampante in una VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1211">Some network printers come with a configuration wizard which makes it easy to set up your printer in an Azure VM.</span></span> <span data-ttu-id="a2ce5-1212">Se non è stato distribuito alcun software di procedura guidata con la stampante, il modo "manuale" di configurare la stampante prevede la creazione di una nuova porta stampante TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1212">If no wizard software has been distributed with the printer the “manual” way to set up the printer is to create a new TCP/IP printer port.</span></span>
> * <span data-ttu-id="a2ce5-1213">Aprire Pannello di controllo -> Dispositivi e stampanti -> Aggiungi stampante</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1213">Open Control Panel -> Devices and Printers -> Add a printer</span></span>
> * <span data-ttu-id="a2ce5-1214">Scegliere Aggiungi una stampante usando un nome host o un indirizzo TCP/IP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1214">Choose Add a printer using a TCP/IP address or hostname</span></span>
> * <span data-ttu-id="a2ce5-1215">Digitare l'indirizzo IP della stampante</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1215">Type in the IP address of the printer</span></span>
> * <span data-ttu-id="a2ce5-1216">Porta stampante standard 9100</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1216">Printer Port standard 9100</span></span>
> * <span data-ttu-id="a2ce5-1217">Se necessario, installare manualmente il driver della stampante appropriato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1217">If necessary install the appropriate printer driver manually.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-1219">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1219">Linux</span></span>
>
> * <span data-ttu-id="a2ce5-1220">Come per Windows, seguire la procedura standard di installazione di una stampante di rete.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1220">like for Windows just follow the standard procedure to install a network printer</span></span>
> * <span data-ttu-id="a2ce5-1221">Seguire le guide pubbliche di Linux per [SUSE](https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_y2_hw_print.html) o [Red Hat e Oracle Linux](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Printer_Configuration.html) su come aggiungere una stampante.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1221">just follow the public Linux guides for [SUSE](https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_y2_hw_print.html) or [Red Hat and Oracle Linux](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Printer_Configuration.html) on how to add a printer.</span></span>
>
>

- - -
![Stampa di rete][planning-guide-figure-2200]

##### <a name="host-based-printer-over-smb-shared-printer-in-cross-premises-scenario"></a><span data-ttu-id="a2ce5-1223">Stampante basata su host su SMB (stampante condivisa) in uno scenario cross-premise</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1223">Host-based printer over SMB (shared printer) in Cross-Premises scenario</span></span>
<span data-ttu-id="a2ce5-1224">Per impostazione predefinita le stampanti basate su host non sono compatibili con la rete.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1224">Host-based printers are not network-compatible by design.</span></span> <span data-ttu-id="a2ce5-1225">Tuttavia, una stampante basata su host può essere condivisa tra computer in una rete, a condizione che sia connessa a un computer acceso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1225">But a host-based printer can be shared among computers on a network as long as the printer is connected to a powered-on computer.</span></span> <span data-ttu-id="a2ce5-1226">Connettere la rete aziendale da sito a sito o con ExpressRoute e condividere la stampante locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1226">Connect your corporate network either Site-To-Site or ExpressRoute and share your local printer.</span></span> <span data-ttu-id="a2ce5-1227">Il protocollo SMB usa NetBIOS anziché DNS come nome del servizio.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1227">The SMB protocol uses NetBIOS instead of DNS as name service.</span></span> <span data-ttu-id="a2ce5-1228">Il nome host NetBIOS può essere diverso dal nome host DNS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1228">The NetBIOS host name can be different from the DNS host name.</span></span> <span data-ttu-id="a2ce5-1229">Il caso standard prevede che il nome host NetBIOS e il nome host DNS siano identici.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1229">The standard case is that the NetBIOS host name and the DNS host name are identical.</span></span> <span data-ttu-id="a2ce5-1230">L'uso del dominio DNS non ha senso nello spazio dei nomi NetBIOS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1230">The DNS domain does not make sense in the NetBIOS name space.</span></span> <span data-ttu-id="a2ce5-1231">Di conseguenza, il nome host DNS completo costituito dal nome host DNS e dal dominio DNS non deve essere usato nello spazio dei nomi NetBIOS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1231">Accordingly, the fully qualified DNS host name consisting of the DNS host name and DNS domain must not be used in the NetBIOS name space.</span></span>

<span data-ttu-id="a2ce5-1232">La condivisione della stampante è identificata da un nome univoco nella rete:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1232">The printer share is identified by a unique name in the network:</span></span>

* <span data-ttu-id="a2ce5-1233">Nome host dell'host SMB (sempre necessario).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1233">Host name of the SMB host (always needed).</span></span>
* <span data-ttu-id="a2ce5-1234">Nome della condivisione (sempre necessario).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1234">Name of the share (always needed).</span></span>
* <span data-ttu-id="a2ce5-1235">Nome del dominio se la condivisione della stampante non si trova nello stesso dominio del sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1235">Name of the domain if printer share is not in the same domain as SAP system.</span></span>
* <span data-ttu-id="a2ce5-1236">Inoltre, un nome utente e una password potrebbero essere necessari per accedere alla condivisione della stampante.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1236">Additionally, a user name and a password may be required to access the printer share.</span></span>

<span data-ttu-id="a2ce5-1237">Procedura:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1237">How to:</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-1239">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1239">Windows</span></span>
>
> <span data-ttu-id="a2ce5-1240">Condividere la stampante locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1240">Share your local printer.</span></span>
> <span data-ttu-id="a2ce5-1241">Nella macchina virtuale di Azure, aprire Esplora risorse e digitare il nome di condivisione della stampante.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1241">In the Azure VM, open the Windows Explorer and type in the share name of the printer.</span></span>
> <span data-ttu-id="a2ce5-1242">Un'installazione guidata stampante illustrerà in modo dettagliato il processo di installazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1242">A printer installation wizard will guide you through the installation process.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-1244">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1244">Linux</span></span>
>
> <span data-ttu-id="a2ce5-1245">Di seguito sono riportati alcuni esempi di documentazione sulla configurazione delle stampanti di rete in Linux o sull'inclusione di un capitolo relativo alla stampa in Linux.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1245">Here are some examples of documentation about configuring network printers in Linux or including a chapter regarding printing in Linux.</span></span> <span data-ttu-id="a2ce5-1246">La configurazione è uguale a quella di una macchina virtuale Linux di Azure, a condizione che la macchina virtuale faccia parte di una VPN:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1246">It will work the same way in an Azure Linux VM as long as the VM is part of a VPN:</span></span>
>
> * <span data-ttu-id="a2ce5-1247">SLES <https://en.opensuse.org/SDB:Printing_via_SMB_(Samba)_Share_or_Windows_Share></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1247">SLES <https://en.opensuse.org/SDB:Printing_via_SMB_(Samba)_Share_or_Windows_Share></span></span>
> * <span data-ttu-id="a2ce5-1248">RHEL o Oracle Linux <https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sec-Printer_Configuration.html#s1-printing-smb-printer></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1248">RHEL or Oracle Linux <https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sec-Printer_Configuration.html#s1-printing-smb-printer></span></span>
>
>

- - -
##### <a name="usb-printer-printer-forwarding"></a><span data-ttu-id="a2ce5-1249">Stampante USB (inoltro stampante)</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1249">USB Printer (printer forwarding)</span></span>
<span data-ttu-id="a2ce5-1250">In Azure la possibilità di Servizi Desktop remoto di fornire agli utenti l'accesso ai propri dispositivi stampante locale in una sessione remota non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1250">In Azure the ability of the Remote Desktop Services to provide users the access to their local printer devices in a remote session is not available.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-1252">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1252">Windows</span></span>
>
> <span data-ttu-id="a2ce5-1253">Altri dettagli sulla stampa con Windows sono disponibili qui: <http://technet.microsoft.com/library/jj590748.aspx>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1253">More details on printing with Windows can be found here: <http://technet.microsoft.com/library/jj590748.aspx>.</span></span>
>
>

- - -
#### <a name="integration-of-sap-azure-systems-into-correction-and-transport-system-tms-in-cross-premises"></a><span data-ttu-id="a2ce5-1254">Integrazione dei sistemi SAP in Azure in Correction and Transport System (TMS) cross-premise</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1254">Integration of SAP Azure Systems into Correction and Transport System (TMS) in Cross-Premises</span></span>
<span data-ttu-id="a2ce5-1255">SAP Change and Transport System (TMS) deve essere configurato per esportare e importare la richiesta di trasporto tra sistemi nel panorama applicativo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1255">The SAP Change and Transport System (TMS) needs to be configured to export and import transport request across systems in the landscape.</span></span> <span data-ttu-id="a2ce5-1256">Si presuppone che le istanze di sviluppo di un sistema SAP (DEV) si trovino in Azure, mentre il controllo di qualità (QA) e i sistemi di produzione (PRD) siano locali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1256">We assume that the development instances of an SAP system (DEV) are located in Azure whereas the quality assurance (QA) and productive systems (PRD) are on-premises.</span></span> <span data-ttu-id="a2ce5-1257">Inoltre, si presuppone che sia presente una directory di trasporto centrale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1257">Furthermore, we assume that there is a central transport directory.</span></span>

##### <a name="configuring-the-transport-domain"></a><span data-ttu-id="a2ce5-1258">Configurazione del dominio di trasporto</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1258">Configuring the Transport Domain</span></span>
<span data-ttu-id="a2ce5-1259">Configurare il dominio di trasporto sul sistema designato come controller di dominio di trasporto, come descritto in [Configurazione del controller del dominio di trasporto](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1259">Configure your Transport Domain on the system you designated as the Transport Domain Controller as described in [Configuring the Transport Domain Controller](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm).</span></span> <span data-ttu-id="a2ce5-1260">Verrà creato un utente di sistema TMSADM e sarà generata la destinazione RFC necessaria.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1260">A system user TMSADM will be created and the required RFC destination will be generated.</span></span> <span data-ttu-id="a2ce5-1261">È possibile controllare queste connessioni RFC usando la transazione SM59.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1261">You may check these RFC connections using the transaction SM59.</span></span> <span data-ttu-id="a2ce5-1262">La risoluzione dei nomi host deve essere abilitata nel dominio di trasporto.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1262">Hostname resolution must be enabled across your transport domain.</span></span>

<span data-ttu-id="a2ce5-1263">Procedura:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1263">How to:</span></span>

* <span data-ttu-id="a2ce5-1264">In questo scenario il sistema QAS locale sarà il controller di dominio di CTS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1264">In our scenario we decided the on-premises QAS system will be the CTS domain controller.</span></span> <span data-ttu-id="a2ce5-1265">Chiamare la transazione STMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1265">Call transaction STMS.</span></span> <span data-ttu-id="a2ce5-1266">Viene visualizzata la finestra di dialogo TMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1266">The TMS dialog box appears.</span></span> <span data-ttu-id="a2ce5-1267">Viene visualizzata la finestra di dialogo Configure Transport Domain</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1267">A Configure Transport Domain dialog box is displayed.</span></span> <span data-ttu-id="a2ce5-1268">(questa finestra di dialogo viene visualizzata solo se non è stato ancora configurato un dominio di trasporto).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1268">(This dialog box only appears if you have not yet configured a transport domain.)</span></span>
* <span data-ttu-id="a2ce5-1269">Assicurarsi che l'utente TMSADM creato automaticamente sia autorizzato (SM59 -> ABAP Connection -> TMSADM@E61.DOMAIN_E61 -> Details -> Utilities(M) -> Authorization Test).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1269">Make sure that the automatically created user TMSADM is authorized (SM59 -> ABAP Connection -> TMSADM@E61.DOMAIN_E61 -> Details -> Utilities(M) -> Authorization Test).</span></span> <span data-ttu-id="a2ce5-1270">La schermata iniziale della transazione STMS dovrebbe indicare che il sistema SAP ora sta funzionando come controller di dominio di trasporto, come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1270">The initial screen of transaction STMS should show that this SAP System is now functioning as the controller of the transport domain as shown here:</span></span>

![Schermata iniziale della transazione STMS sul controller di dominio][planning-guide-figure-2300]

#### <a name="including-sap-systems-in-the-transport-domain"></a><span data-ttu-id="a2ce5-1272">Inclusione dei sistemi SAP nel dominio di trasporto</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1272">Including SAP Systems in the Transport Domain</span></span>
<span data-ttu-id="a2ce5-1273">La sequenza di inclusione di un sistema SAP in un dominio di trasporto è simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1273">The sequence of including an SAP system in a transport domain looks as follows:</span></span>

* <span data-ttu-id="a2ce5-1274">Nel sistema DEV in Azure passare al sistema di trasporto (Client 000) e chiamare la transazione STMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1274">On the DEV system in Azure, go to the transport system (Client 000) and call transaction STMS.</span></span> <span data-ttu-id="a2ce5-1275">Scegliere Other Configuration dalla finestra di dialogo e continuare con Include System in Domain.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1275">Choose Other Configuration from the dialog box and continue with Include System in Domain.</span></span> <span data-ttu-id="a2ce5-1276">Specificare il controller di dominio come host di destinazione (vedere[Inclusione di sistemi SAP nel dominio di trasporto](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0c17acc11d1899e0000e829fbbd/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm)).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1276">Specify the Domain Controller as target host ([Including SAP Systems in the Transport Domain](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0c17acc11d1899e0000e829fbbd/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm)).</span></span> <span data-ttu-id="a2ce5-1277">Il sistema ora è in attesa di essere incluso nel dominio di trasporto.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1277">The system is now waiting to be included in the transport domain.</span></span>
* <span data-ttu-id="a2ce5-1278">Per motivi di sicurezza, è necessario tornare al controller di dominio per confermare la richiesta.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1278">For security reasons, you then have to go back to the domain controller to confirm your request.</span></span> <span data-ttu-id="a2ce5-1279">Scegliere System Overview e Approve of the waiting system.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1279">Choose System Overview and Approve of the waiting system.</span></span> <span data-ttu-id="a2ce5-1280">Quindi, confermare la richiesta; la configurazione verrà distribuita.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1280">Then confirm the prompt and the configuration will be distributed.</span></span>

<span data-ttu-id="a2ce5-1281">Il sistema SAP ora contiene le informazioni necessarie su tutti gli altri sistemi SAP nel dominio di trasporto.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1281">This SAP system now contains the necessary information about all the other SAP systems in the transport domain.</span></span> <span data-ttu-id="a2ce5-1282">Allo stesso tempo, i dati degli indirizzi del nuovo sistema SAP vengono inviati a tutti gli altri sistemi SAP e il sistema SAP viene immesso nel profilo di trasporto del programma di controllo del trasporto.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1282">At the same time, the address data of the new SAP system is sent to all the other SAP systems, and the SAP system is entered in the transport profile of the transport control program.</span></span> <span data-ttu-id="a2ce5-1283">Verificare il corretto funzionamento di RFC e dell'accesso alla directory di trasporto del dominio.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1283">Check whether RFCs and access to the transport directory of the domain work.</span></span>

<span data-ttu-id="a2ce5-1284">Continuare con la configurazione del sistema di trasporto come di consueto seguendo la descrizione fornita nella documentazione [Sistema di trasporto e modifica](http://help.sap.com/saphelp_nw70ehp3/helpdata/en/48/c4300fca5d581ce10000000a42189c/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1284">Continue with the configuration of your transport system as usual as described in the documentation [Change and Transport System](http://help.sap.com/saphelp_nw70ehp3/helpdata/en/48/c4300fca5d581ce10000000a42189c/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm).</span></span>

<span data-ttu-id="a2ce5-1285">Procedura:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1285">How to:</span></span>

* <span data-ttu-id="a2ce5-1286">Assicurarsi che il sistema STMS locale sia configurato correttamente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1286">Make sure your STMS on premises is configured correctly.</span></span>
* <span data-ttu-id="a2ce5-1287">Assicurarsi che il nome host del controller di dominio di trasporto possa essere risolto dalla macchina virtuale in Azure e viceversa.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1287">Make sure the hostname of the Transport Domain Controller can be resolved by your virtual machine on Azure and vice visa.</span></span>
* <span data-ttu-id="a2ce5-1288">Chiamare la transazione STMS -> Other Configuration -> Include System in Domain.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1288">Call transaction STMS -> Other Configuration -> Include System in Domain.</span></span>
* <span data-ttu-id="a2ce5-1289">Confermare la connessione nel sistema TMS locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1289">Confirm the connection in the on premises TMS system.</span></span>
* <span data-ttu-id="a2ce5-1290">Configurare le route, i gruppi e i livelli di trasporto, come di consueto.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1290">Configure transport routes, groups and layers as usual.</span></span>

<span data-ttu-id="a2ce5-1291">Negli scenari cross-premise connessi da sito a sito, la latenza tra sistema locale e Azure può essere ancora significativa.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1291">In site-to-site connected cross-premises scenarios, the latency between on-premises and Azure still can be substantial.</span></span> <span data-ttu-id="a2ce5-1292">Se si segue la sequenza del trasporto di oggetti nei sistemi di sviluppo e test fino alla produzione o si valuta la possibilità di applicare trasporti o pacchetti di supporto nei vari sistemi, si comprende che, in base alla posizione della directory di trasporto centrale, per alcuni dei sistemi si verificherà una latenza elevata della lettura o scrittura dei dati nella directory di trasporto centrale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1292">If we follow the sequence of transporting objects through development and test systems to production or think about applying transports or support packages to the different systems, you realize that, dependent on the location of the central transport directory, some of the systems will encounter high latency reading or writing data in the central transport directory.</span></span> <span data-ttu-id="a2ce5-1293">Si tratta di una situazione simile a quella delle configurazioni del panorama applicativo SAP, dove diversi sistemi sono distribuiti in diversi data center posizionati a una notevole distanza l'uno dall'altro.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1293">The situation is similar to SAP landscape configurations where the different systems are spread through different data centers with substantial distance between the data centers.</span></span>

<span data-ttu-id="a2ce5-1294">Per ovviare a problemi come la latenza e fare in modo che i sistemi eseguano rapidamente le operazioni di lettura o scrittura verso o dalla directory di trasporto, è possibile configurare due domini di trasporto STMS (uno da usare in locale e l'altro da usare con i sistemi in Azure) e collegarli.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1294">In order to work around such latency and have the systems work fast in reading or writing to or from the transport directory, you can set up two STMS transport domains (one for on-premises and one with the systems in Azure and link the transport domains.</span></span> <span data-ttu-id="a2ce5-1295">Per informazioni sui principi alla base di questo concetto in SAP TMS, vedere questo documento: <http://help.sap.com/saphelp_me60/helpdata/en/c4/6045377b52253de10000009b38f889/content.htm?frameset=/en/57/38dd924eb711d182bf0000e829fbfe/frameset.htm>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1295">Please check this documentation which explains the principles behind this concept in the SAP TMS: <http://help.sap.com/saphelp_me60/helpdata/en/c4/6045377b52253de10000009b38f889/content.htm?frameset=/en/57/38dd924eb711d182bf0000e829fbfe/frameset.htm>.</span></span>

<span data-ttu-id="a2ce5-1296">Procedura:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1296">How to:</span></span>

* <span data-ttu-id="a2ce5-1297">Configurare un dominio di trasporto in ogni posizione (in locale e in Azure) usando la transazione STMS <http://help.sap.com/saphelp_nw70ehp3/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1297">Set up a transport domain on each location (on-premises and Azure) using transaction STMS <http://help.sap.com/saphelp_nw70ehp3/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm></span></span>
* <span data-ttu-id="a2ce5-1298">Collegare i domini con un collegamento di dominio e verificare che siano collegati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1298">Link the domains with a domain link and confirm the link between the two domains.</span></span>
  <span data-ttu-id="a2ce5-1299"><http://help.sap.com/saphelp_nw73ehp1/helpdata/en/a3/139838280c4f18e10000009b38f8cf/content.htm></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1299"><http://help.sap.com/saphelp_nw73ehp1/helpdata/en/a3/139838280c4f18e10000009b38f8cf/content.htm></span></span>
* <span data-ttu-id="a2ce5-1300">Distribuire la configurazione nel sistema collegato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1300">Distribute the configuration to the linked system.</span></span>

#### <a name="rfc-traffic-between-sap-instances-located-in-azure-and-on-premises-cross-premises"></a><span data-ttu-id="a2ce5-1301">Traffico RFC tra le istanze SAP in Azure e locali (cross-premise)</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1301">RFC traffic between SAP instances located in Azure and on-premises (Cross-Premises)</span></span>
<span data-ttu-id="a2ce5-1302">Il traffico RFC tra i sistemi locali e in Azure deve funzionare.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1302">RFC traffic between systems which are on-premises and in Azure needs to work.</span></span> <span data-ttu-id="a2ce5-1303">Per configurare una connessione, chiamare la transazione SM59 in un sistema di origine in cui è necessario definire una connessione RFC verso il sistema di destinazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1303">To set up a connection call transaction SM59 in a source system where you need to define an RFC connection towards the target system.</span></span> <span data-ttu-id="a2ce5-1304">La configurazione è simile a quella standard di una connessione RFC.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1304">The configuration is similar to the standard setup of an RFC Connection.</span></span>

<span data-ttu-id="a2ce5-1305">Si presuppone che nello scenario cross-premise le macchine virtuali che eseguono sistemi SAP che devono comunicare reciprocamente si trovino nello stesso dominio.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1305">We assume that in the cross-premises scenario, the VMs which run SAP systems that need to communicate with each other are in the same domain.</span></span> <span data-ttu-id="a2ce5-1306">Quindi, la configurazione di una connessione RFC tra sistemi SAP non è diversa dalla procedura di configurazione e dagli input degli scenari locali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1306">Therefore the setup of an RFC connection between SAP systems does not differ from the setup steps and inputs in on-premises scenarios.</span></span>

#### <a name="accessing-local-fileshares-from-sap-instances-located-in-azure-or-vice-versa"></a><span data-ttu-id="a2ce5-1307">Accesso a condivisioni file "locali" da istanze SAP che si trovano in Azure e viceversa</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1307">Accessing ‘local’ fileshares from SAP instances located in Azure or vice versa</span></span>
<span data-ttu-id="a2ce5-1308">Le istanze di SAP che si trovano in Azure devono accedere alle condivisioni file disponibili nell'ambiente aziendale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1308">SAP instances located in Azure need to access file shares which are within the corporate premises.</span></span> <span data-ttu-id="a2ce5-1309">Inoltre, le istanze di SAP locali devono accedere alle condivisioni file che si trovano in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1309">In addition, on-premises SAP instances need to access file shares which are located in Azure.</span></span> <span data-ttu-id="a2ce5-1310">Per abilitare le condivisioni file è necessario configurare le autorizzazioni e le opzioni di condivisione nel sistema locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1310">To enable the file shares you must configure the permissions and sharing options on the local system.</span></span> <span data-ttu-id="a2ce5-1311">Assicurarsi di aprire le porte della connessione VPN o ExpressRoute tra Azure e il data center.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1311">Make sure to open the ports on the VPN or ExpressRoute connection between Azure and your datacenter.</span></span>

## <a name="supportability"></a><span data-ttu-id="a2ce5-1312">Supporto</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1312">Supportability</span></span>
### <span data-ttu-id="a2ce5-1313"><a name="6f0a47f3-a289-4090-a053-2521618a28c3"></a>Soluzione di monitoraggio di Azure per SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1313"><a name="6f0a47f3-a289-4090-a053-2521618a28c3"></a>Azure Monitoring Solution for SAP</span></span>
<span data-ttu-id="a2ce5-1314">Per abilitare il monitoraggio dei sistemi SAP mission-critical in Azure, gli strumenti di monitoraggio SAP SAPOSCOL o SAP Host Agent ricevono i dati dall'host di Azure con l'estensione di monitoraggio di Azure per SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1314">In order to enable the monitoring of mission critical SAP systems on Azure the SAP monitoring tools SAPOSCOL or SAP Host Agent get data off the Azure Virtual Machine Service host via an Azure Monitoring Extension for SAP.</span></span> <span data-ttu-id="a2ce5-1315">Considerato che le esigenze di SAP erano molto specifiche per le applicazioni SAP, Microsoft ha deciso di non implementare genericamente la funzionalità richiesta in Azure, ma di lasciare che siano i clienti a occuparsi della distribuzione dei componenti e delle configurazioni di monitoraggio necessarie per le loro macchine virtuali in esecuzione in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1315">Since the demands by SAP were very specific to SAP applications, Microsoft decided not to generically implement the required functionality into Azure, but leave it for customers to deploy the necessary monitoring components and configurations to their Virtual Machines running in Azure.</span></span> <span data-ttu-id="a2ce5-1316">Tuttavia, la gestione della distribuzione e del ciclo di vita dei componenti di monitoraggio verrà, nella maggior parte dei casi, automatizzata da Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1316">However, deployment and lifecycle management of the monitoring components will be mostly automated by Azure.</span></span>

#### <a name="solution-design"></a><span data-ttu-id="a2ce5-1317">Progettazione della soluzione</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1317">Solution design</span></span>
<span data-ttu-id="a2ce5-1318">La soluzione sviluppata per abilitare il monitoraggio di SAP Monitoring si basa sull'architettura del framework dell'agente VM e delle estensioni VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1318">The solution developed to enable SAP Monitoring is based on the architecture of Azure VM Agent and Extension framework.</span></span> <span data-ttu-id="a2ce5-1319">L'idea alla base del framework dell'agente VM e delle estensioni VM di Azure è di consentire l'installazione delle applicazioni software disponibili nella raccolta di estensioni VM di Azure all'interno di una VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1319">The idea of the Azure VM Agent and Extension framework is to allow installation of software application(s) available in the Azure VM Extension gallery within a VM.</span></span> <span data-ttu-id="a2ce5-1320">Il principio alla base di questo concetto è di consentire (in casi come l'estensione di monitoraggio di Azure per SAP), la distribuzione di funzionalità speciali in una VM e la configurazione del software in fase di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1320">The principle idea behind this concept is to allow (in cases like the Azure Monitoring Extension for SAP), the deployment of special functionality into a VM and the configuration of such software at deployment time.</span></span>

<span data-ttu-id="a2ce5-1321">L'agente VM di Azure che consente la gestione di specifiche estensioni VM di Azure all'interno della VM viene inserito nelle VM di Windows per impostazione predefinita durante la creazione di VM nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1321">The 'Azure VM Agent' that enables handling of specific Azure VM Extensions within the VM is injected into Windows VMs by default on VM creation in the Azure portal.</span></span> <span data-ttu-id="a2ce5-1322">Nel caso di SUSE o Red Hat o Oracle Linux, l'agente VM fa già parte dell'immagine di Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1322">In case of SUSE, Red Hat or Oracle Linux, the VM agent is already part of the Azure Marketplace image.</span></span> <span data-ttu-id="a2ce5-1323">Nel caso in cui si voglia caricare una VM Linux da locale in Azure, è necessario installare manualmente l'agente VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1323">In case one would upload a Linux VM from on-premises to Azure the VM agent has to be installed manually.</span></span>

<span data-ttu-id="a2ce5-1324">I blocchi predefiniti di base della soluzione di monitoraggio in Azure per SAP hanno un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1324">The basic building blocks of the Monitoring solution in Azure for SAP looks like this:</span></span>

![Componenti dell'estensione di Microsoft Azure][planning-guide-figure-2400]

<span data-ttu-id="a2ce5-1326">Come illustrato nel diagramma a blocchi precedente, una parte della soluzione di monitoraggio per SAP è ospitata nell'immagine VM di Azure e nella raccolta di estensioni di Azure, che è un archivio replicato globalmente gestito da Azure Operations.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1326">As shown in the block diagram above, one part of the monitoring solution for SAP is hosted in the Azure VM Image and Azure Extension Gallery which is a globally replicated repository that is managed by Azure Operations.</span></span> <span data-ttu-id="a2ce5-1327">È responsabilità del team congiunto SAP/MS impegnato nell'implementazione di SAP collaborare con Azure Operations alla pubblicazione di nuove versioni dell'estensione di monitoraggio di Azure per SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1327">It is the responsibility of the joint SAP/MS team working on the Azure implementation of SAP to work with Azure Operations to publish new versions of the Azure Monitoring Extension for SAP.</span></span>

<span data-ttu-id="a2ce5-1328">Quando si distribuisce una nuova VM Windows, l'agente VM di Azure viene aggiunto automaticamente alla VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1328">When you deploy a new Windows VM, the ‘Azure VM Agent’ is automatically added into the VM.</span></span> <span data-ttu-id="a2ce5-1329">Questo agente ha la funzione di coordinare il caricamento e la configurazione delle estensioni di Azure per il monitoraggio dei sistemi SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1329">The function of this agent is to coordinate the loading and configuration of the Azure Extensions for monitoring of SAP NetWeaver Systems.</span></span> <span data-ttu-id="a2ce5-1330">Per le VM Linux l'agente VM di Azure fa già parte dell'immagine del sistema operativo di Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1330">For Linux VMs the Azure VM Agent is already part of the Azure Marketplace OS image.</span></span>

<span data-ttu-id="a2ce5-1331">È presente, tuttavia, un passaggio che deve ancora essere eseguito dal cliente,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1331">However, there is a step that still needs to be executed by the customer.</span></span> <span data-ttu-id="a2ce5-1332">cioè l'abilitazione e la configurazione della raccolta delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1332">This is the enablement and configuration of the performance collection.</span></span> <span data-ttu-id="a2ce5-1333">Il processo correlato alla configurazione viene automatizzato con uno script di PowerShell o un comando dell'interfaccia della riga di comando.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1333">The process related to the ‘configuration’ is automated by a PowerShell script or CLI command.</span></span> <span data-ttu-id="a2ce5-1334">Lo script di PowerShell può essere scaricato nello Script Center di Microsoft Azure come descritto nella [Guida alla distribuzione][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1334">The PowerShell script can be downloaded in the Microsoft Azure Script Center as described in the [Deployment Guide][deployment-guide].</span></span>

<span data-ttu-id="a2ce5-1335">L'architettura complessiva della soluzione di monitoraggio di Azure per SAP ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1335">The overall Architecture of the Azure monitoring solution for SAP looks like:</span></span>

![Soluzione di monitoraggio di Azure per SAP NetWeaver][planning-guide-figure-2500]

<span data-ttu-id="a2ce5-1337">**Per la procedura dettagliata sull'uso di questi cmdlet di PowerShell o dei comandi dell'interfaccia della riga di comando durante le distribuzioni, seguire le istruzioni fornite nella [Guida alla distribuzione][deployment-guide].**</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1337">**For the exact how-to and for detailed steps of using these PowerShell cmdlets or CLI command during deployments, follow the instructions given in the [Deployment Guide][deployment-guide].**</span></span>

### <a name="integration-of-azure-located-sap-instance-into-saprouter"></a><span data-ttu-id="a2ce5-1338">Integrazione di un'istanza SAP ubicata in Azure in SAProuter</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1338">Integration of Azure located SAP instance into SAProuter</span></span>
<span data-ttu-id="a2ce5-1339">Le istanze SAP in esecuzione in Azure devono essere accessibili anche da SAProuter.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1339">SAP instances running in Azure need to be accessible from SAProuter as well.</span></span>

![Connessione di rete SAP-router][planning-guide-figure-2600]

<span data-ttu-id="a2ce5-1341">SAProuter abilita la comunicazione TCP/IP tra i sistemi partecipanti se non esiste alcuna connessione IP diretta.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1341">A SAProuter enables the TCP/IP communication between participating systems if there is no direct IP connection.</span></span> <span data-ttu-id="a2ce5-1342">Questo offre il vantaggio di non richiedere alcuna connessione end-to-end tra i partner di comunicazione a livello di rete.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1342">This provides the advantage that no end-to-end connection between the communication partners is necessary on network level.</span></span> <span data-ttu-id="a2ce5-1343">SAProuter è in ascolto sulla porta 3299 per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1343">The SAProuter is listening on port 3299 by default.</span></span>
<span data-ttu-id="a2ce5-1344">Per connettere le istanze di SAP con SAProuter è necessario assegnare il nome di stringa e dell'host SAProuter a ogni tentativo di connessione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1344">To connect SAP instances through a SAProuter you need to give the SAProuter string and host name with any attempt to connect.</span></span>

## <a name="sap-netweaver-as-java"></a><span data-ttu-id="a2ce5-1345">SAP NetWeaver AS Java</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1345">SAP NetWeaver AS Java</span></span>
<span data-ttu-id="a2ce5-1346">Fino a questo momento ci si è concentrati su SAP NetWeaver in generale o sullo stack ABAP di SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1346">So far the focus of the document has been SAP NetWeaver in general or the SAP NetWeaver ABAP stack.</span></span> <span data-ttu-id="a2ce5-1347">In questa piccola sezione sono riportate considerazioni specifiche per lo stack SAP Java.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1347">In this small section, specific considerations for the SAP Java stack are listed.</span></span> <span data-ttu-id="a2ce5-1348">Una delle più importanti applicazioni basate esclusivamente su SAP NetWeaver Java è SAP Enterprise Portal.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1348">One of the most important SAP NetWeaver Java exclusively based applications is the SAP Enterprise Portal.</span></span> <span data-ttu-id="a2ce5-1349">Altre applicazioni basate su SAP NetWeaver come SAP PI e SAP Solution Manager usano gli stack SAP NetWeaver ABAP e Java,</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1349">Other SAP NetWeaver based applications like SAP PI and SAP Solution Manager use both the SAP NetWeaver ABAP and Java stacks.</span></span> <span data-ttu-id="a2ce5-1350">quindi è sicuramente necessario considerare alcuni aspetti specifici correlati anche allo stack SAP NetWeaver Java.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1350">Therefore, there certainly is a need to consider specific aspects related to the SAP NetWeaver Java stack as well.</span></span>

### <a name="sap-enterprise-portal"></a><span data-ttu-id="a2ce5-1351">SAP Enterprise Portal</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1351">SAP Enterprise Portal</span></span>
<span data-ttu-id="a2ce5-1352">L'installazione di un portale SAP in una macchina virtuale di Azure non è diversa da un'installazione locale se si distribuiscono scenari cross-premise.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1352">The setup of an SAP Portal in an Azure Virtual Machine does not differ from an on premises installation if you are deploying in cross-premises scenarios.</span></span> <span data-ttu-id="a2ce5-1353">Dato il DNS viene effettuato in locale, le impostazioni delle porte delle singole istanze possono essere eseguite in base alla configurazione locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1353">Since the DNS is done by on-premises, the port settings of the individual instances can be done as configured on-premises.</span></span> <span data-ttu-id="a2ce5-1354">Le raccomandazioni e le restrizioni descritte in precedenza in questo documento si applicano ad applicazioni come SAP Enterprise Portal o allo stack SAP NetWeaver Java in generale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1354">The recommendations and restrictions described in this document so far apply for an application like SAP Enterprise Portal or the SAP NetWeaver Java stack in general.</span></span>

![SAP Portal esposto][planning-guide-figure-2700]

<span data-ttu-id="a2ce5-1356">Uno scenario di distribuzione speciale di alcuni clienti riguarda l'esposizione diretta di SAP Enterprise Portal a Internet mentre l'host della macchina virtuale è connesso alla rete aziendale con tunnel VPN da sito a sito o ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1356">A special deployment scenario by some customers is the direct exposure of the SAP Enterprise Portal to the Internet while the virtual machine host is connected to the company network via site-to-site VPN tunnel or ExpressRoute.</span></span> <span data-ttu-id="a2ce5-1357">Per tale scenario, è necessario assicurarsi che determinate porte siano aperte e non bloccate da un firewall o da un gruppo di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1357">For such a scenario, you have to make sure that specific ports are open and not blocked by firewall or network security group.</span></span> <span data-ttu-id="a2ce5-1358">Lo stesso meccanismo dovrà essere applicato per connettersi a un'istanza di Java SAP locale in uno scenario locale solo cloud.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1358">The same mechanics would need to be applied when you want to connect to an SAP Java instance from on-premises in a Cloud-Only scenario.</span></span>

<span data-ttu-id="a2ce5-1359">L'URI del portale iniziale è http (s):`<Portalserver`>: 5XX00/irj, dove il valore della porta è costituito da un numero superiore a 50.000 (numero di sistema × 100).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1359">The initial portal URI is http(s):`<Portalserver`>:5XX00/irj where the port is formed by 50000 plus (Systemnumber × 100).</span></span> <span data-ttu-id="a2ce5-1360">L'URI del portale predefinito del sistema SAP 00 è `<dns name`>.`<azure region`>.Cloudapp.azure.com:PublicPort/irj.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1360">The default portal URI of SAP system 00 is `<dns name`>.`<azure region`>.Cloudapp.azure.com:PublicPort/irj.</span></span> <span data-ttu-id="a2ce5-1361">Per altri dettagli, vedere <http://help.sap.com/saphelp_nw70ehp1/helpdata/de/a2/f9d7fed2adc340ab462ae159d19509/frameset.htm>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1361">For more details, have a look at <http://help.sap.com/saphelp_nw70ehp1/helpdata/de/a2/f9d7fed2adc340ab462ae159d19509/frameset.htm>.</span></span>

![Configurazione dell'endpoint][planning-guide-figure-2800]

<span data-ttu-id="a2ce5-1363">Se si vuole personalizzare l'URL e/o le porte di SAP Enterprise Portal, consultare la documentazione seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1363">If you want to customize the URL and/or ports of your SAP Enterprise Portal, please check this documentation:</span></span>

* [<span data-ttu-id="a2ce5-1364">Modificare l'URL del portale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1364">Change Portal URL</span></span>](http://wiki.scn.sap.com/wiki/display/EP/Change+Portal+URL)
* [<span data-ttu-id="a2ce5-1365">Modificare i numeri di porta predefiniti e i numeri di porta del portale</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1365">Change Default port numbers, Portal port numbers</span></span>](http://wiki.scn.sap.com/wiki/display/NWTech/Change+Default++port+numbers%2C+Portal+port+numbers)

## <a name="high-availability-ha-and-disaster-recovery-dr-for-sap-netweaver-running-on-azure-virtual-machines"></a><span data-ttu-id="a2ce5-1366">Disponibilità elevata e ripristino di emergenza per SAP NetWeaver in esecuzione in macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1366">High Availability (HA) and Disaster Recovery (DR) for SAP NetWeaver running on Azure Virtual Machines</span></span>
### <a name="definition-of-terminologies"></a><span data-ttu-id="a2ce5-1367">Definizione dei termini</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1367">Definition of terminologies</span></span>
<span data-ttu-id="a2ce5-1368">L'espressione **disponibilità elevata** è in genere correlata a un set di tecnologie che riduce al minimo le interruzioni IT assicurando la continuità aziendale dei servizi IT tramite componenti ridondanti, a tolleranza di errore o protetti con failover all'interno dello **stesso** data center.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1368">The term **high availability (HA)** is generally related to a set of technologies that minimizes IT disruptions by providing business continuity of IT services through redundant, fault-tolerant or failover protected components inside the **same** data center.</span></span> <span data-ttu-id="a2ce5-1369">Nel caso di questo documento, all'interno di un'unica area di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1369">In our case, within one Azure Region.</span></span>

<span data-ttu-id="a2ce5-1370">Anche il **ripristino di emergenza** ha la funzione di ridurre al minimo le interruzioni dei servizi IT e il relativo ripristino, ma tra data center **diversi**, in genere ubicati a centinaia di chilometri di distanza.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1370">**Disaster recovery (DR)** is also targeting minimizing IT services disruption, and their recovery but across **different** data centers, that are usually located hundreds of kilometers away.</span></span> <span data-ttu-id="a2ce5-1371">Nel caso di questo documento, tra aree di Azure diverse all'interno della stessa area geopolitica o come stabilito dal cliente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1371">In our case usually between different Azure Regions within the same geopolitical region or as established by you as a customer.</span></span>

### <a name="overview-of-high-availability"></a><span data-ttu-id="a2ce5-1372">Panoramica della disponibilità elevata</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1372">Overview of High Availability</span></span>
<span data-ttu-id="a2ce5-1373">È possibile suddividere la discussione sulla disponibilità elevata SAP in Azure in due parti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1373">We can separate the discussion about SAP high availability in Azure into two parts:</span></span>

* <span data-ttu-id="a2ce5-1374">**Disponibilità elevata dell'infrastruttura di Azure**, relativa, ad esempio, al calcolo (VM), alla rete, all'archiviazione e così via e i relativi vantaggi associati all'aumento della disponibilità delle applicazioni SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1374">**Azure infrastructure high availability**, for example HA of compute (VMs), network, storage etc. and its benefits for increasing SAP application availability.</span></span>
* <span data-ttu-id="a2ce5-1375">**Disponibilità elevata delle applicazioni SAP**, relativa, ad esempio, ai componenti software SAP:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1375">**SAP application high availability**, for example HA of SAP software components:</span></span>
  * <span data-ttu-id="a2ce5-1376">Server applicazioni SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1376">SAP application servers</span></span>
  * <span data-ttu-id="a2ce5-1377">Istanza di SAP ASCS/SCS</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1377">SAP ASCS/SCS instance</span></span>
  * <span data-ttu-id="a2ce5-1378">Server di database</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1378">DB server</span></span>

<span data-ttu-id="a2ce5-1379">e al modo in cui è possibile combinarli con la disponibilità elevata dell'infrastruttura di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1379">and how it can be combined with Azure infrastructure HA.</span></span>

<span data-ttu-id="a2ce5-1380">La disponibilità elevata di SAP in Azure presenta alcune differenze rispetto alla disponibilità elevata di SAP in un ambiente fisico o virtuale locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1380">SAP High Availability in Azure has some differences compared to SAP High Availability in an on-premises physical or virtual environment.</span></span> <span data-ttu-id="a2ce5-1381">Il documento di SAP seguente descrive le configurazioni a disponibilità elevata standard di SAP in ambienti virtualizzati in Windows: <http://scn.sap.com/docs/DOC-44415>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1381">The following paper from SAP describes standard SAP High Availability configurations in virtualized environments on Windows: <http://scn.sap.com/docs/DOC-44415>.</span></span> <span data-ttu-id="a2ce5-1382">In Linux non è disponibile alcuna configurazione a disponibilità elevata di SAP integrata in SAPinst come quella disponibile per Windows.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1382">There is no sapinst-integrated SAP-HA configuration for Linux like it exists for Windows.</span></span> <span data-ttu-id="a2ce5-1383">Altre informazioni sulla disponibilità elevata di SAP in locale per Linux sono disponibili qui: <http://scn.sap.com/docs/DOC-8541>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1383">Regarding SAP HA on-premises for Linux find more information here: <http://scn.sap.com/docs/DOC-8541>.</span></span>

### <a name="azure-infrastructure-high-availability"></a><span data-ttu-id="a2ce5-1384">Disponibilità elevata dell'infrastruttura di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1384">Azure Infrastructure High Availability</span></span>
<span data-ttu-id="a2ce5-1385">Al momento è previsto un contratto di servizio a singola VM del 99,9%.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1385">There is currently a single-VM SLA of 99.9%.</span></span> <span data-ttu-id="a2ce5-1386">Per avere un'idea di come potrebbe presentarsi la disponibilità di una singola VM, è possibile creare semplicemente il prodotto dei diversi contratti di servizio di Azure disponibili: <https://azure.microsoft.com/support/legal/sla/>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1386">To get an idea how the availability of a single VM might look like you can simply build the product of the different available Azure SLAs: <https://azure.microsoft.com/support/legal/sla/>.</span></span>

<span data-ttu-id="a2ce5-1387">La base per il calcolo è di 30 giorni al mese o 43.200 minuti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1387">The basis for the calculation is 30 days per month, or 43200 minutes.</span></span> <span data-ttu-id="a2ce5-1388">Di conseguenza, un tempo di inattività dello 0,05% corrisponde a 21,6 minuti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1388">Therefore, 0.05% downtime corresponds to 21.6 minutes.</span></span> <span data-ttu-id="a2ce5-1389">Come di consueto, la disponibilità dei diversi servizi dovrà essere moltiplicata nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1389">As usual, the availability of the different services will multiply in the following way:</span></span>

<span data-ttu-id="a2ce5-1390">(Disponibilità servizio n. 1/100) * (Disponibilità servizio n. 2/100) + (Disponibilità servizio n. 3/100) *…</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1390">(Availability Service #1/100) * (Availability Service #2/100) * (Availability Service #3/100) *…</span></span>

<span data-ttu-id="a2ce5-1391">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1391">Like:</span></span>

<span data-ttu-id="a2ce5-1392">(99,95/100) + (99,9/100) + (99,9/100) = 0,9975 o una disponibilità complessiva del 99,75%.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1392">(99.95/100) * (99.9/100) * (99.9/100) = 0.9975 or an overall availability of 99.75%.</span></span>

#### <a name="virtual-machine-vm-high-availability"></a><span data-ttu-id="a2ce5-1393">Disponibilità elevata delle macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1393">Virtual Machine (VM) High Availability</span></span>
<span data-ttu-id="a2ce5-1394">Esistono due tipi di eventi della piattaforma Azure che possono incidere sulla disponibilità delle macchine virtuali: la manutenzione pianificata e la manutenzione non pianificata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1394">There are two types of Azure platform events that can affect the availability of your virtual machines: planned maintenance and unplanned maintenance.</span></span>

* <span data-ttu-id="a2ce5-1395">Gli eventi di manutenzione pianificata sono aggiornamenti periodici effettuati da Microsoft sulla piattaforma Azure sottostante per migliorare l'affidabilità, la sicurezza e le prestazioni complessive dell'infrastruttura della piattaforma su cui sono in esecuzione le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1395">Planned maintenance events are periodic updates made by Microsoft to the underlying Azure platform to improve overall reliability, performance, and security of the platform infrastructure that your virtual machines run on.</span></span>
* <span data-ttu-id="a2ce5-1396">Gli eventi di manutenzione non pianificata hanno luogo quando si verifica un guasto dell'hardware o dell'infrastruttura fisica sottostante la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1396">Unplanned maintenance events occur when the hardware or physical infrastructure underlying your virtual machine has faulted in some way.</span></span> <span data-ttu-id="a2ce5-1397">Può trattarsi, ad esempio, di errori della rete locale, guasti di un disco locale o altri errori a livello di rack.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1397">This may include local network failures, local disk failures, or other rack level failures.</span></span> <span data-ttu-id="a2ce5-1398">Quando viene rilevato un errore di questo tipo, la piattaforma Azure esegue automaticamente la migrazione della macchina virtuale dal server fisico non integro su cui è in esecuzione a un server fisico integro.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1398">When such a failure is detected, the Azure platform will automatically migrate your virtual machine from the unhealthy physical server hosting your virtual machine to a healthy physical server.</span></span> <span data-ttu-id="a2ce5-1399">Anche se rari, questi eventi possono anche richiedere il riavvio della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1399">Such events are rare, but may also cause your virtual machine to reboot.</span></span>

<span data-ttu-id="a2ce5-1400">Per altri dettagli, vedere questo documento: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1400">More details can be found in this documentation: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span></span>

#### <a name="azure-storage-redundancy"></a><span data-ttu-id="a2ce5-1401">Ridondanza di Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1401">Azure Storage Redundancy</span></span>
<span data-ttu-id="a2ce5-1402">I dati dell'account di archiviazione di Microsoft Azure vengono sempre replicati per assicurare durabilità e disponibilità elevata nonché il rispetto del contratto di servizio di Archiviazione di Azure anche in caso di errori hardware temporanei.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1402">The data in your Microsoft Azure Storage Account is always replicated to ensure durability and high availability, meeting the Azure Storage SLA even in the face of transient hardware failures.</span></span>

<span data-ttu-id="a2ce5-1403">Considerato che Archiviazione di Azure mantiene tre immagini dei dati per impostazione predefinita, RAID5 o RAID1 tra più dischi di Azure non sono necessari.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1403">Since Azure Storage is keeping three images of the data by default, RAID5 or RAID1 across multiple Azure disks are not necessary.</span></span>

<span data-ttu-id="a2ce5-1404">Per altri dettagli, vedere questo articolo: <http://azure.microsoft.com/documentation/articles/storage-redundancy/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1404">More details can be found in this article: <http://azure.microsoft.com/documentation/articles/storage-redundancy/></span></span>

#### <a name="utilizing-azure-infrastructure-vm-restart-to-achieve-higher-availability-of-sap-applications"></a><span data-ttu-id="a2ce5-1405">Uso del riavvio delle VM dell'infrastruttura di Azure per ottenere una "disponibilità più elevata" delle applicazioni SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1405">Utilizing Azure Infrastructure VM Restart to Achieve “Higher Availability” of SAP Applications</span></span>
<span data-ttu-id="a2ce5-1406">Se si decide di non usare funzionalità come WSFC (Windows Server Failover Clustering) o Pacemaker su Linux (attualmente supportato solo per SLES 12 e versioni successive), il riavvio delle VM di Azure viene usato per proteggere un sistema SAP da inattività pianificate e non pianificate dell'infrastruttura di server fisici di Azure e della piattaforma Azure complessiva sottostante.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1406">If you decide not to use functionalities like Windows Server Failover Clustering (WSFC) or Pacemaker on Linux (currently only supported for SLES 12 and higher), Azure VM Restart is utilized to protect an SAP System against planned and unplanned downtime of the Azure physical server infrastructure and overall underlying Azure platform.</span></span>

> [!NOTE]
> <span data-ttu-id="a2ce5-1407">È importante ricordare che il riavvio delle VM di Azure protegge principalmente le VM e non le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1407">It is important to mention that Azure VM Restart primarily protects VMs and NOT applications.</span></span> <span data-ttu-id="a2ce5-1408">Il riavvio delle VM non offre una disponibilità elevata per le applicazioni SAP, ma offre un certo livello di disponibilità dell'infrastruttura e quindi, indirettamente, una "disponibilità più elevata" dei sistemi SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1408">VM Restart does not offer high availability for SAP applications, but it does offer a certain level of infrastructure availability and therefore indirectly “higher availability” of SAP systems.</span></span> <span data-ttu-id="a2ce5-1409">Inoltre, non è disponibile alcun contratto di servizio relativo al tempo che sarà necessario per il riavvio di una VM dopo un'interruzione dell'host pianificata o non pianificata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1409">There is also no SLA for the time it will take to restart a VM after a planned or unplanned host outage.</span></span> <span data-ttu-id="a2ce5-1410">Questo metodo di "disponibilità elevata", quindi, non è adatto per i componenti fondamentali di un sistema SAP come (A)SCS o DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1410">Therefore, this method of ‘high availability’ is not suitable for critical components of an SAP system like (A)SCS or DBMS.</span></span>
>
>

<span data-ttu-id="a2ce5-1411">Un altro elemento importante dell'infrastruttura per la disponibilità elevata è l'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1411">Another important infrastructure element for high availability is storage.</span></span> <span data-ttu-id="a2ce5-1412">Ad esempio, il contratto di servizio di archiviazione di Azure prevede una disponibilità del 99,9%.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1412">For example Azure Storage SLA is 99,9 % availability.</span></span> <span data-ttu-id="a2ce5-1413">Se si effettua la distribuzione di tutte le VM con i relativi dischi in un singolo account di archiviazione di Azure, la potenziale indisponibilità di Archiviazione di Azure causerà l'indisponibilità di tutte le VM presenti in tale account di archiviazione di Azure e anche di tutti i componenti SAP in esecuzione all'interno di tali VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1413">If one deploys all VMs with its disks into a single Azure Storage Account, potential Azure Storage unavailability will cause unavailability of all VMs that are placed in that Azure Storage Account, and also all SAP components running inside of those VMs.</span></span>  

<span data-ttu-id="a2ce5-1414">Anziché inserire tutte le VM virtuali in un singolo account di archiviazione di Azure, è possibile anche usare account di archiviazione dedicati per ogni VM e, in questo modo, aumentare la disponibilità complessiva delle VM e delle applicazioni SAP usando più account di archiviazione di Azure indipendenti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1414">Instead of putting all VMs into one single Azure Storage Account, you can also use dedicated storage accounts for each VM, and in this way increase overall VM and SAP application availability by using multiple independent Azure Storage Accounts.</span></span>

<span data-ttu-id="a2ce5-1415">I Managed Disks di Azure sono collocati automaticamente nel dominio di errore della macchina virtuale alla quale sono collegati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1415">Azure Managed Disks are automatically placed in the Fault Domain of the virtual machine they are attached to.</span></span> <span data-ttu-id="a2ce5-1416">Se si collocano due macchine virtuali in un set di disponibilità e si utilizzano i Managed Disks, la piattaforma si occupa anche della distribuzione dei Managed Disks in diversi domini di errore.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1416">If you place two virtual machines in an availability set and use Managed Disks, the platform will take care of distributing the Managed Disks into different Fault Domains as well.</span></span> <span data-ttu-id="a2ce5-1417">Per utilizzare l’archiviazione Premium, è vivamente consigliabile utilizzare anche i Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1417">If you plan to use Premium Storage, we highly recommend using Manage Disks as well.</span></span>

<span data-ttu-id="a2ce5-1418">Un'architettura di esempio di un sistema SAP NetWeaver che usa la disponibilità elevata dell'infrastruttura di Azure e gli account di archiviazione potrebbe avere un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1418">A sample architecture of an SAP NetWeaver system that uses Azure infrastructure HA and storage accounts could look like this:</span></span>

![Utilizzo della disponibilità elevata dell'infrastruttura di Azure per ottenere una disponibilità "più elevata" delle applicazioni SAP][planning-guide-figure-2900]

<span data-ttu-id="a2ce5-1420">Un'architettura di esempio di un sistema SAP NetWeaver che usa la disponibilità elevata dell'infrastruttura di Azure e i Managed Disks potrebbe avere un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1420">A sample architecture of an SAP NetWeaver system that uses Azure infrastructure HA and Managed Disks could look like this:</span></span>

![Utilizzo della disponibilità elevata dell'infrastruttura di Azure per ottenere una disponibilità "più elevata" delle applicazioni SAP][planning-guide-figure-2901]

<span data-ttu-id="a2ce5-1422">Per i componenti SAP critici sono stati ottenuti fino a questo momento i risultati seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1422">For critical SAP components we achieved the following so far:</span></span>

* <span data-ttu-id="a2ce5-1423">Disponibilità elevata di server applicazioni SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1423">High Availability of SAP Application Servers (AS)</span></span>

  <span data-ttu-id="a2ce5-1424">Le istanze dei server applicazioni SAP sono componenti ridondanti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1424">SAP application server instances are redundant components.</span></span> <span data-ttu-id="a2ce5-1425">Ogni istanza dei server applicazioni SAP viene distribuita nella relativa macchina virtuale, che è in esecuzione in un dominio di errore e di aggiornamento di Azure diverso (vedere i capitoli [Domini di errore][planning-guide-3.2.1] e [Domini di aggiornamento][planning-guide-3.2.2]).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1425">Each SAP AS instance is deployed on its own VM, that is running in a different Azure Fault and Upgrade Domain (see chapters [Fault Domains][planning-guide-3.2.1] and [Upgrade Domains][planning-guide-3.2.2]).</span></span> <span data-ttu-id="a2ce5-1426">Ciò è garantito dall'uso dei set di disponibilità di Azure (vedere il capitolo [Set di disponibilità di Azure][planning-guide-3.2.3]).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1426">This is ensured by using Azure Availability Sets (see chapter [Azure Availability Sets][planning-guide-3.2.3]).</span></span> <span data-ttu-id="a2ce5-1427">La potenziale indisponibilità pianificata o non pianificata di un dominio di errore o di aggiornamento di Azure causerà l'indisponibilità di un numero limitato di VM con le relative istanze dei server applicazioni SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1427">Potential planned or unplanned unavailability of an Azure Fault or Upgrade Domain will cause unavailability of a restricted number of VMs with their SAP AS instances.</span></span>

  <span data-ttu-id="a2ce5-1428">Ogni istanza dei server applicazioni SAP è posizionata nel relativo account di archiviazione di Azure; la potenziale indisponibilità di un account di archiviazione di Azure causerà l'indisponibilità di una sola VM con la relativa istanza dei server applicazioni SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1428">Each SAP AS instance is placed in its own Azure Storage account – potential unavailability of one Azure Storage Account will cause unavailability of only one VM with its SAP AS instance.</span></span> <span data-ttu-id="a2ce5-1429">Tenere presente, tuttavia, che esiste un limite al numero di account di archiviazione di Azure che è possibile avere all'interno di una sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1429">However, be aware that there is a limit of Azure Storage Accounts within one Azure subscription.</span></span> <span data-ttu-id="a2ce5-1430">Per garantire l'avvio automatico dell'istanza di (A)SCS dopo il riavvio della macchina virtuale, assicurarsi di impostare il parametro di avvio automatico nel profilo di avvio dell'istanza di (A)SCS descritto nel capitolo [Uso dell'avvio automatico per le istanze di SAP][planning-guide-11.5].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1430">To ensure automatic start of (A)SCS instance after the VM reboot, make sure to set the Autostart parameter in (A)SCS instance start profile described in chapter [Using Autostart for SAP instances][planning-guide-11.5].</span></span>
  <span data-ttu-id="a2ce5-1431">Leggere anche il capitolo [Disponibilità elevata per i server applicazioni SAP][planning-guide-11.4.1] per maggiori informazioni.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1431">Please also read chapter [High Availability for SAP Application Servers][planning-guide-11.4.1] for more details.</span></span>

  <span data-ttu-id="a2ce5-1432">Anche se si utilizzano i Managed Disks, i dischi vengono archiviati anche sull’account di archiviazione di Azure e possono essere non disponibili in caso di disservizio della risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1432">Even if you use Managed Disks, those disks are also stored in an Azure Storage Account and can be unavailable in an event of a storage outage.</span></span>

* <span data-ttu-id="a2ce5-1433">*più elevata* dell'istanza di SAP (A)SCS</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1433">*Higher* Availability of SAP (A)SCS instance</span></span>

  <span data-ttu-id="a2ce5-1434">In questo caso il riavvio delle VM di Azure viene usato per proteggere la VM con l'istanza di SAP (A)SCS installata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1434">Here we utilize Azure VM Restart to protect the VM with installed SAP (A)SCS instance.</span></span> <span data-ttu-id="a2ce5-1435">Nel caso di inattività pianificata o non pianificata dei server di Azure, le VM verranno riavviate in un altro server disponibile.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1435">In the case of planned or unplanned downtime of Azure severs, VMs will be restarted on another available server.</span></span> <span data-ttu-id="a2ce5-1436">Come accennato in precedenza, il riavvio delle VM di Azure protegge principalmente le VM e NON le applicazioni, in questo casto l'istanza di (A)SCS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1436">As mentioned earlier, Azure VM Restart primarily protects VMs and NOT applications, in this case the (A)SCS instance.</span></span> <span data-ttu-id="a2ce5-1437">Con il riavvio delle VM si otterrà indirettamente una "disponibilità più elevata" dell'istanza di SAP (A)SCS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1437">Through the VM Restart we’ll reach indirectly “higher availability” of SAP (A)SCS instance.</span></span> <span data-ttu-id="a2ce5-1438">Per garantire l'avvio automatico dell'istanza di (A)SCS dopo il riavvio della macchina virtuale, assicurarsi di impostare il parametro di avvio automatico nel profilo di avvio dell'istanza di (A)SCS descritto nel capitolo [Uso dell'avvio automatico per le istanze di SAP][planning-guide-11.5].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1438">To insure automatic start of (A)SCS instance after the VM reboot, make sure to set Autostart parameter in (A)SCS instance start profile described in chapter [Using Autostart for SAP instances][planning-guide-11.5].</span></span> <span data-ttu-id="a2ce5-1439">Ciò significa che l'istanza di (A)SCS come singolo punto di errore (SPOF) in esecuzione in una singola VM sarà il fattore determinante per la disponibilità dell'intero panorama applicativo SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1439">This means the (A)SCS instance as a Single Point of Failure (SPOF) running in a single VM will be the determinative factor for the availability of the whole SAP landscape.</span></span>

* <span data-ttu-id="a2ce5-1440">*più elevata* del server DBMS</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1440">*Higher* Availability of DBMS Server</span></span>

  <span data-ttu-id="a2ce5-1441">In questo caso, analogamente al caso d'uso dell'istanza di SAP (A)SCS, il riavvio delle VM di Azure viene usato per proteggere la VM con il software DBMS installato e si ottiene una "disponibilità più elevata" del software DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1441">Here, similar to the SAP (A)SCS instance use case, we utilize Azure VM Restart to protect the VM with installed DBMS software, and we achieve “higher availability” of DBMS software through VM Restart.</span></span>
  <span data-ttu-id="a2ce5-1442">DBMS in esecuzione in una singola VM è anche uno SPOF ed è il fattore determinante per la disponibilità dell'intero panorama applicativo SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1442">DBMS running in a single VM is also a SPOF, and it is the determinative factor for the availability of the whole SAP landscape.</span></span>

### <a name="sap-application-high-availability-on-azure-iaas"></a><span data-ttu-id="a2ce5-1443">Disponibilità elevata delle applicazioni SAP su IaaS di Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1443">SAP Application High Availability on Azure IaaS</span></span>
<span data-ttu-id="a2ce5-1444">Per ottenere una disponibilità elevata dei sistemi SAP completi, è necessario proteggere tutti componenti dei sistemi SAP critici (ad esempio, i server applicazioni SAP ridondanti), e i componenti univoci (ad esempio, i singoli punti di errore), come istanza di SAP (A)SCS e DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1444">To achieve full SAP system high availability, we need to protect all critical SAP system components, for example redundant SAP application servers, and unique components (for example Single Point of Failure) like SAP (A)SCS instance and DBMS.</span></span>

#### <span data-ttu-id="a2ce5-1445"><a name="5d9d36f9-9058-435d-8367-5ad05f00de77"></a>Disponibilità elevata per i server applicazioni SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1445"><a name="5d9d36f9-9058-435d-8367-5ad05f00de77"></a>High Availability for SAP Application Servers</span></span>
<span data-ttu-id="a2ce5-1446">Per le istanze dei server/delle finestre di dialogo delle applicazioni SAP non è necessario considerare una specifica soluzione a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1446">For the SAP application servers/dialog instances it’s not necessary to think about a specific high availability solution.</span></span> <span data-ttu-id="a2ce5-1447">La disponibilità elevata si ottiene semplicemente con la ridondanza che deve quindi essere presente in livelli sufficienti nelle varie macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1447">High availability is simply achieved by redundancy and thereby having enough of them in different virtual machines.</span></span> <span data-ttu-id="a2ce5-1448">Le macchine virtuali devono essere tutte posizionate nel set di disponibilità di Azure per evitare che vengano aggiornate durante il periodo di inattività dovuto alla manutenzione pianificata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1448">They should all be placed in the same Azure Availability Set to avoid that the VMs might be updated at the same time during planned maintenance downtime.</span></span> <span data-ttu-id="a2ce5-1449">La funzionalità di base che poggia su diversi domini di aggiornamento e di errore all'interno di un'unità di scala di Azure è stata già introdotta nel capitolo [Domini di aggiornamento][planning-guide-3.2.2].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1449">The basic functionality which builds on different Upgrade and Fault Domains within an Azure Scale Unit was already introduced in chapter [Upgrade Domains][planning-guide-3.2.2].</span></span> <span data-ttu-id="a2ce5-1450">I set di disponibilità di Azure sono stati presentati nel capitolo [Set di disponibilità di Azure][planning-guide-3.2.3] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1450">Azure Availability Sets were presented in chapter [Azure Availability Sets][planning-guide-3.2.3] of this document.</span></span>

<span data-ttu-id="a2ce5-1451">Non esiste alcun numero infinito di domini di errore e di aggiornamento che può essere usato da un set di disponibilità di Azure all'interno di un'unità di scala di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1451">There is no infinite number of Fault and Upgrade Domains that can be used by an Azure Availability Set within an Azure Scale Unit.</span></span> <span data-ttu-id="a2ce5-1452">Ciò significa che se si inseriscono molte VM in un set di disponibilità, prima o poi una VM finirà nello stesso dominio di aggiornamento o di errore.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1452">This means that putting a number of VMs into one Availability Set, sooner or later more than one VM ends up in the same Fault or Upgrade Domain.</span></span>

<span data-ttu-id="a2ce5-1453">Se si distribuiscono poche istanze dei server applicazioni SAP nelle relative VM dedicate e si suppone che siano presenti cinque domini di aggiornamento, alla fine emerge il quadro seguente.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1453">Deploying a few SAP application server instances in their dedicated VMs and assuming that we got five Upgrade Domains, the following picture emerges at the end.</span></span> <span data-ttu-id="a2ce5-1454">Il numero massimo effettivo di domini di errore e di aggiornamento all'interno di un set di disponibilità potrebbe cambiare in futuro:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1454">The actual max number of fault and update domains within an availability set might change in the future:</span></span>

![Disponibilità elevata dei i server applicazioni SAP in Azure][planning-guide-figure-3000]

<span data-ttu-id="a2ce5-1456">Per altri dettagli, vedere questo documento: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1456">More details can be found in this documentation: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span></span>

#### <a name="high-availability-for-the-sap-ascs-instance-on-windows"></a><span data-ttu-id="a2ce5-1457">Disponibilità elevata per l'istanza di SAP (A)SCS in Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1457">High Availability for the SAP (A)SCS instance on Windows</span></span>
<span data-ttu-id="a2ce5-1458">WSFC (Windows Server Failover Cluster) è una soluzione usata di frequente per proteggere l'istanza di SAP (A)SCS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1458">Windows Server Failover Cluster (WSFC) is a frequently used solution to protect the SAP (A)SCS instance.</span></span> <span data-ttu-id="a2ce5-1459">È anche integrato in SAPinst in forma di un'installazione a "disponibilità elevata".</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1459">It is also integrated into sapinst in form of an "HA installation".</span></span> <span data-ttu-id="a2ce5-1460">Attualmente l'infrastruttura di Azure non può fornire la funzionalità di configurazione del cluster Windows Server Failover Cluster necessario seguendo la stessa procedura usata in locale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1460">At this point in time the Azure infrastructure is not able to provide the functionality to set up the required Windows Server Failover Cluster the same way as it's done on-premises.</span></span>

<span data-ttu-id="a2ce5-1461">Al mese di gennaio 2016 la piattaforma cloud di Azure che esegue il sistema operativo Windows non offre la possibilità di usare un volume condiviso cluster su un disco condiviso tra due VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1461">As of January 2016 the Azure cloud platform running the Windows operating system does not provide the possibility of using a cluster shared volume on a disk shared between two Azure VMs.</span></span>

<span data-ttu-id="a2ce5-1462">Tuttavia, una soluzione valida prevede l'utilizzo di software di terze parti che offre un volume condiviso usando la replica disco sincrona e trasparente che può essere integrata in WSFC.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1462">A valid solution though is the usage of 3rd-party software which provides a shared volume by synchronous and transparent disk replication which can be integrated into WSFC.</span></span> <span data-ttu-id="a2ce5-1463">Questo approccio implica che solo il nodo del cluster attivo possa accedere a una delle copie del disco in un punto nel tempo.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1463">This approach implies that only the active cluster node is able to access one of the disk copies at a point in time.</span></span> <span data-ttu-id="a2ce5-1464">Al mese di gennaio 2016 questa configurazione a disponibilità elevata è supportata per proteggere l'istanza di SAP (A)SCS nel sistema operativo guest Windows su VM di Azure in combinazione con software di terze parti SIOS DataKeeper.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1464">As of January 2016 this HA configuration is supported to protect the SAP (A)SCS instance on Windows guest OS on Azure VMs in combination with 3rd-party software SIOS DataKeeper.</span></span>

<span data-ttu-id="a2ce5-1465">La soluzione SIOS DataKeeper fornisce una risorsa cluster di dischi condivisi ai cluster di failover di Windows con:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1465">The SIOS DataKeeper solution provides a shared disk cluster resource to Windows Failover Clusters by having:</span></span>

* <span data-ttu-id="a2ce5-1466">Un disco rigido virtuale di Azure aggiuntivo collegato a ciascuna delle macchine virtuali in una configurazione cluster di Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1466">An additional Azure VHD attached to each of the virtual machines (VMs) that are in a Windows Cluster configuration</span></span>
* <span data-ttu-id="a2ce5-1467">SIOS DataKeeper Cluster Edition in esecuzione in entrambi i nodi delle VM</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1467">SIOS DataKeeper Cluster Edition running on both VM nodes</span></span>
* <span data-ttu-id="a2ce5-1468">SIOS DataKeeper Cluster Edition configurato per riflettere in modo sincrono il contenuto del volume collegato del disco rigido virtuale aggiuntivo dalle VM di origine al volume collegato del disco rigido virtuale aggiuntivo della VM di destinazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1468">Having SIOS DataKeeper Cluster Edition configured in a way that it synchronously mirrors the content of the additional VHD attached volume from source VMs to additional VHD attached volume of target VM.</span></span>
* <span data-ttu-id="a2ce5-1469">SIOS DataKeeper astrae i volumi locali di origine e di destinazione e li presenta al cluster di failover di Windows come singolo disco condiviso.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1469">SIOS DataKeeper is abstracting the source and target local volumes and presenting them to Windows Failover Cluster as a single shared disk.</span></span>

<span data-ttu-id="a2ce5-1470">È possibile trovare tutte le informazioni dettagliate su come installare Windows Server Failover Cluster con SIOS Datakeeper e SAP nel white paper [Clustering SAP ASCS Instance using Windows Server Failover Cluster on Azure with SIOS DataKeeper][ha-guide-classic] (Clustering di istanze SAP ASCS/SCS usando Windows Server Failover Cluster in Azure con SIOS DataKeeper).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1470">You can find all details on how to install a Windows Failover Cluster with SIOS DataKeeper and SAP in the [Clustering SAP ASCS Instance using Windows Server Failover Cluster on Azure with SIOS DataKeeper][ha-guide-classic] white paper.</span></span>

#### <a name="high-availability-for-the-sap-ascs-instance-on-linux"></a><span data-ttu-id="a2ce5-1471">Disponibilità elevata per l'istanza di SAP (A)SCS in Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1471">High Availability for the SAP (A)SCS instance on Linux</span></span>
<span data-ttu-id="a2ce5-1472">Al mese di dicembre 2015 non è disponibile alcuna soluzione equivalente a WSFC con disco condiviso per le VM Linux in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1472">As of Dec 2015 there is also no equivalent to shared disk WSFC for Linux VMs on Azure.</span></span> <span data-ttu-id="a2ce5-1473">Le soluzioni alternative che usano software di terze parti come SIOS per Windows non sono ancora convalidate per l'esecuzione di SAP su Linux in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1473">Alternative solutions using 3rd-party software like SIOS for Windows are not validated yet for running SAP on Linux on Azure.</span></span>

#### <a name="high-availability-for-the-sap-database-instance"></a><span data-ttu-id="a2ce5-1474">Disponibilità elevata per l'istanza del database SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1474">High Availability for the SAP database instance</span></span>
<span data-ttu-id="a2ce5-1475">La tipica configurazione del DBMS di SAP a disponibilità elevata si basa su due VM DBMS in cui la funzionalità di disponibilità elevata DBMS viene usata per replicare i dati dall'istanza di DBMS attiva alla seconda VM in un'istanza di DBMS passiva.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1475">The typical SAP DBMS HA setup is based on two DBMS VMs where DBMS high-availability functionality is used to replicate data from the active DBMS instance to the second VM into a passive DBMS instance.</span></span>

<span data-ttu-id="a2ce5-1476">La funzionalità di disponibilità elevata e ripristino di emergenza per DBMS in generale nonché per DBMS specifici è descritta nella [Guida alla distribuzione di DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1476">High Availability and Disaster recovery functionality for DBMS in general as well as specific DBMS are described in the [DBMS Deployment Guide][dbms-guide].</span></span>

#### <a name="end-to-end-high-availability-for-the-complete-sap-system"></a><span data-ttu-id="a2ce5-1477">Disponibilità elevata end-to-end per il sistema SAP completo</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1477">End-to-End High Availability for the Complete SAP System</span></span>
<span data-ttu-id="a2ce5-1478">Di seguito sono riportati due esempi di architettura SAP NetWeaver a disponibilità elevata in Azure, uno per Windows e l'altro per Linux.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1478">Here are two examples of a complete SAP NetWeaver HA architecture in Azure - one for Windows and one for Linux.</span></span>

<span data-ttu-id="a2ce5-1479">Solo dischi non gestiti: i concetti illustrati di seguito potrebbero richiedere piccoli compromessi quando si distribuiscono molti sistemi SAP e il numero di VM distribuite supera il limite massimo di account di archiviazione per ogni sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1479">Unmanaged disks only: The concepts as explained below may need to be compromised a bit when you deploy many SAP systems and the number of VMs deployed are exceeding the maximum limit of Storage Accounts per subscription.</span></span> <span data-ttu-id="a2ce5-1480">In tali casi, i dischi rigidi virtuali delle VM devono essere combinati all'interno di un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1480">In such cases, VHDs of VMs need to be combined within one Storage Account.</span></span> <span data-ttu-id="a2ce5-1481">In genere questa operazione viene effettuata combinando i dischi rigidi virtuali delle VM del livello dell'applicazione SAP con sistemi SAP diversi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1481">Usually you would do so by combining VHDs of SAP application layer VMs of different SAP systems.</span></span>  <span data-ttu-id="a2ce5-1482">Sono stati anche combinati diversi dischi rigidi virtuali delle VM DBMS diverse su sistemi SAP diversi in un account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1482">We also combined different VHDs of different DBMS VMs of different SAP systems in one Azure Storage Account.</span></span> <span data-ttu-id="a2ce5-1483">Tenere quindi presenti i limiti di operazioni I/O al secondo degli account di archiviazione di Azure (<https://azure.microsoft.com/documentation/articles/storage-scalability-targets>)</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1483">Thereby keeping the IOPS limits of Azure Storage Accounts in mind (<https://azure.microsoft.com/documentation/articles/storage-scalability-targets>)</span></span>


##### <a name="windowslogowindows-ha-on-windows"></a>![Windows][Logo_Windows] <span data-ttu-id="a2ce5-1485">Disponibilità elevata in Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1485">HA on Windows</span></span>
![Architettura a disponibilità elevata dell'applicazione SAP NetWeaver con SQL Server in IaaS di Azure][planning-guide-figure-3200]

<span data-ttu-id="a2ce5-1487">I costrutti di Azure seguenti vengono usati per il sistema SAP NetWeaver, allo scopo di ridurre al minimo l'impatto esercitato dai problemi dell'infrastruttura e dall'applicazione di patch agli host:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1487">The following Azure constructs are used for the SAP NetWeaver system, to minimize impact by infrastructure issues and host patching:</span></span>

* <span data-ttu-id="a2ce5-1488">Il sistema completo viene distribuito in Azure (obbligatorio; il livello DBMS, l'istanza di (A)SCS e il livello dell'applicazione completa devono essere eseguiti nello stesso percorso).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1488">The complete system is deployed on Azure (required - DBMS layer, (A)SCS instance and complete application layer need to run in the same location).</span></span>
* <span data-ttu-id="a2ce5-1489">Il sistema completo viene eseguito all'interno di una sottoscrizione di Azure (obbligatorio).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1489">The complete system runs within one Azure subscription (required).</span></span>
* <span data-ttu-id="a2ce5-1490">Il sistema completo viene eseguito all'interno di una rete virtuale di Azure (obbligatorio).</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1490">The complete system runs within one Azure Virtual Network (required).</span></span>
* <span data-ttu-id="a2ce5-1491">La separazione delle VM di un unico sistema SAP in tre set di disponibilità è possibile anche quando tutte le VM appartengono alla stessa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1491">The separation of the VMs of one SAP system into three Availability Sets is possible even with all the VMs belonging to the same Virtual Network.</span></span>
* <span data-ttu-id="a2ce5-1492">Tutte le VM che eseguono istanze di DBMS di un sistema SAP sono incluse in un unico set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1492">All VMs running DBMS instances of one SAP system are in one Availability Set.</span></span> <span data-ttu-id="a2ce5-1493">Si suppone che siano presenti più VM che eseguono istanze di DBMS per ciascun sistema perché vengono usate le funzionalità di disponibilità elevata dei DBMS nativi, come SQL Server AlwaysOn oppure Oracle Data Guard.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1493">We assume that there is more than one VM running DBMS instances per system since native DBMS high availability features are used, like SQL Server AlwaysOn or Oracle Data Guard.</span></span>
* <span data-ttu-id="a2ce5-1494">Tutte le VM che eseguono istanze di DBMS usano il proprio account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1494">All VMs running DBMS instances use their own storage account.</span></span> <span data-ttu-id="a2ce5-1495">I file di dati e di log di DBMS vengono replicati da un account di archiviazione a un altro account di archiviazione usando le funzioni a disponibilità elevata di DBMS per la sincronizzazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1495">DBMS data and log files are replicated from one storage account to another storage account using DBMS high availability functions that synchronize the data.</span></span> <span data-ttu-id="a2ce5-1496">L'indisponibilità di un account di archiviazione causa l'indisponibilità di un nodo del cluster di SQL Windows, ma non dell'intero servizio di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1496">Unavailability of one storage account will cause unavailability of one SQL Windows cluster node, but not the whole SQL Server service.</span></span>
* <span data-ttu-id="a2ce5-1497">Tutte le VM che eseguono istanze di (A)SCS di un sistema SAP sono incluse in un unico set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1497">All VMs running (A)SCS instance of one SAP system are in one Availability Set.</span></span> <span data-ttu-id="a2ce5-1498">All'interno di tali VM è configurato Windows Server Failover Cluster (WSFC), per proteggere l'istanza di (A)SCS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1498">A Windows Server Failover Cluster (WSFC) is configured inside of those VMs to protect the (A)SCS instance.</span></span>
* <span data-ttu-id="a2ce5-1499">Tutte le VM che eseguono istanze di (A)SCS usano il proprio account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1499">All VMs running (A)SCS instances use their own storage account.</span></span> <span data-ttu-id="a2ce5-1500">I file delle istanze di (A)SCS e le cartelle globali SAP vengono replicate da un account di archiviazione a un altro account di archiviazione usando la replica SIOS DataKeeper.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1500">(A)SCS instance files and SAP global folder are replicated from one storage account to another storage account using SIOS DataKeeper replication.</span></span> <span data-ttu-id="a2ce5-1501">L'indisponibilità di un account di archiviazione causa l'indisponibilità di un nodo del cluster di Windows (A)SCS, ma non dell'intero servizio di (A)SCS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1501">Unavailability of one storage account will cause unavailability of one (A)SCS Windows cluster node, but not the whole (A)SCS service.</span></span>
* <span data-ttu-id="a2ce5-1502">TUTTE le VM che rappresentano il livello del server applicazioni SAP sono incluse in un terzo set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1502">ALL the VMs representing the SAP application server layer are in a third Availability Set.</span></span>
* <span data-ttu-id="a2ce5-1503">TUTTE le VM che eseguono server applicazioni SAP usano il proprio account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1503">ALL the VMs running SAP application servers use their own storage account.</span></span> <span data-ttu-id="a2ce5-1504">L'indisponibilità di un account di archiviazione causa l'indisponibilità di un server applicazioni SAP, mentre altri server applicazioni SAP continuano a essere eseguiti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1504">Unavailability of one storage account will cause unavailability of one SAP application server, where other SAP AS continue to run.</span></span>

<span data-ttu-id="a2ce5-1505">Nella figura seguente è illustrato lo stesso scenario utilizzando Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1505">The following figure illustrated the same landscape using Managed Disks.</span></span>

![Architettura a disponibilità elevata dell'applicazione SAP NetWeaver con SQL Server in IaaS di Azure][planning-guide-figure-3201]

##### <a name="linuxlogolinux-ha-on-linux"></a>![Linux][Logo_Linux] <span data-ttu-id="a2ce5-1508">Disponibilità elevata in Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1508">HA on Linux</span></span>
<span data-ttu-id="a2ce5-1509">L'architettura per la disponibilità elevata SAP in Linux su Azure è essenzialmente identica a quella di Windows descritta in precedenza.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1509">The architecture for SAP HA on Linux on Azure is basically the same as for Windows as described above.</span></span> <span data-ttu-id="a2ce5-1510">Al mese di gennaio 2016, non è ancora disponibile alcuna soluzione SAP (A)SCS a disponibilità elevata in Linux su Azure</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1510">As of Jan 2016 there is no SAP (A)SCS HA solution supported yet on Linux on Azure</span></span>

<span data-ttu-id="a2ce5-1511">Di conseguenza, al mese di gennaio 2016 un sistema SAP-Linux-Azure non può ottenere la stessa disponibilità di un sistema SAP-Windows-Azure a causa della mancanza di disponibilità elevata per l'istanza di (A)SCS e per il database SAP ASE a istanza singola.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1511">As a consequence as of January 2016 an SAP-Linux-Azure system cannot achieve the same availability as an SAP-Windows-Azure system because of missing HA for the (A)SCS instance and the single-instance SAP ASE database.</span></span>

### <span data-ttu-id="a2ce5-1512"><a name="4e165b58-74ca-474f-a7f4-5e695a93204f"></a>Uso dell'avvio automatico per le istanze di SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1512"><a name="4e165b58-74ca-474f-a7f4-5e695a93204f"></a>Using Autostart for SAP instances</span></span>
<span data-ttu-id="a2ce5-1513">SAP ha reso disponibile la funzionalità che consente di avviare le istanze di SAP immediatamente dopo l'avvio del sistema operativo nella VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1513">SAP offered the functionality to start SAP instances immediately after the start of the OS within the VM.</span></span> <span data-ttu-id="a2ce5-1514">I passaggi esatti sono documentati nell'articolo della Knowledge Base SAP [1909114].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1514">The exact steps were documented in SAP Knowledge Base Article [1909114].</span></span> <span data-ttu-id="a2ce5-1515">Tuttavia, SAP sconsiglia di continuare a usare questa impostazione perché non offre alcun controllo sull'ordine dei riavvii delle istanze, supponendo che siano interessate più di una VM o vengano eseguite più istanze per ogni VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1515">However, SAP is not recommending to use the setting anymore because there is no control in the order of instance restarts, assuming more than one VM got affected or multiple instances ran per VM.</span></span> <span data-ttu-id="a2ce5-1516">Presupponendo uno scenario tipico di Azure di un'istanza del server applicazioni SAP in una VM e il caso di una singola VM che viene alla fine riavviata, l'avvio automatico non è realmente critico e può essere abilitato aggiungendo il parametro seguente:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1516">Assuming a typical Azure scenario of one SAP application server instance in a VM and the case of a single VM eventually getting restarted, the Autostart is not really critical and can be enabled by adding this parameter:</span></span>

    Autostart = 1

<span data-ttu-id="a2ce5-1517">Nel profilo di avvio dell'istanza di SAP ABAP e/o di Java.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1517">Into the start profile of the SAP ABAP and/or Java instance.</span></span>

> [!NOTE]
> <span data-ttu-id="a2ce5-1518">Il parametro di avvio automatico può presentare anche alcuni inconvenienti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1518">The Autostart parameter can have some downfalls as well.</span></span> <span data-ttu-id="a2ce5-1519">Nello specifico, il parametro attiva l'avvio di un'istanza di SAP ABAP o di Java quando viene avviato il servizio di dell'istanza Windows/Linux correlato.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1519">In more detail, the parameter triggers the start of an SAP ABAP or Java instance when the related Windows/Linux service of the instance is started.</span></span> <span data-ttu-id="a2ce5-1520">Questo si verifica sicuramente all'avvio dei sistemi operativi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1520">That certainly is the case when the operating system boots up.</span></span> <span data-ttu-id="a2ce5-1521">Tuttavia, i riavvii dei servizi SAP sono comuni anche per la funzionalità di gestione del ciclo di vita di SAP come SUM o altri aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1521">However, restarts of SAP services are also a common thing for SAP Software Lifecycle Management functionality like SUM or other updates or upgrades.</span></span> <span data-ttu-id="a2ce5-1522">Queste funzionalità non prevedono il riavvio automatico di un'istanza.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1522">These functionalities are not expecting an instance to be restarted automatically at all.</span></span> <span data-ttu-id="a2ce5-1523">Quindi, il parametro di avvio automatico deve essere disabilitato prima di eseguire tali attività.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1523">Therefore, the Autostart parameter should be disabled before running such tasks.</span></span> <span data-ttu-id="a2ce5-1524">Inoltre, il parametro di avvio automatico non deve essere usato per le istanze di SAP in cluster, ad esempio ASCS/SCS/CI.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1524">The Autostart parameter also should not be used for SAP instances that are clustered, like ASCS/SCS/CI.</span></span>
>
>

<span data-ttu-id="a2ce5-1525">Maggiori informazioni sull'avvio automatico per le istanze di SAP sono disponibili qui:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1525">See additional information regarding autostart for SAP instances here:</span></span>

* [<span data-ttu-id="a2ce5-1526">Avviare/arrestare SAP con l'avvio/l'arresto del server Unix</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1526">Start/Stop SAP along with your Unix Server Start/Stop</span></span>](http://scn.sap.com/community/unix/blog/2012/08/07/startstop-sap-along-with-your-unix-server-startstop)
* [<span data-ttu-id="a2ce5-1527">Avviare e arrestare gli agenti di gestione di SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1527">Starting and Stopping SAP NetWeaver Management Agents</span></span>](https://help.sap.com/saphelp_nwpi711/helpdata/en/49/9a15525b20423ee10000000a421938/content.htm)
* [<span data-ttu-id="a2ce5-1528">Come abilitare l'avvio automatico di Hana Database</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1528">How to enable auto Start of HANA Database</span></span>](http://www.freehanatutorials.com/2012/10/how-to-enable-auto-start-of-hana.html)

### <a name="larger-3-tier-sap-systems"></a><span data-ttu-id="a2ce5-1529">Sistemi SAP a 3 livelli di maggiori dimensioni</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1529">Larger 3-Tier SAP systems</span></span>
<span data-ttu-id="a2ce5-1530">Gli aspetti di disponibilità elevata delle configurazioni SAP a 3 livelli sono già stati esaminati nelle sezioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1530">High-Availability aspects of 3-Tier SAP configurations got discussed in earlier sections already.</span></span> <span data-ttu-id="a2ce5-1531">Ora verrà esaminato il caso dei sistemi con requisiti del server DBMS troppo elevati per essere posizionati in Azure, ma con un livello dell'applicazione SAP che potrebbe essere distribuito in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1531">But what about systems where the DBMS server requirements are too large to have it located in Azure, but the SAP application layer could be deployed into Azure?</span></span>

#### <a name="location-of-3-tier-sap-configurations"></a><span data-ttu-id="a2ce5-1532">Posizione delle configurazioni SAP a 3 livelli</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1532">Location of 3-Tier SAP configurations</span></span>
<span data-ttu-id="a2ce5-1533">La suddivisione del livello di applicazione stesso o dell'applicazione e del livello DBMS tra distribuzione locale e distribuzione in Azure non è supportata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1533">It is not supported to split the application tier itself or the application and DBMS tier between on-premises and Azure.</span></span> <span data-ttu-id="a2ce5-1534">Un sistema SAP deve essere completamente distribuito in locale OPPURE in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1534">An SAP system is either completely deployed on-premises OR in Azure.</span></span> <span data-ttu-id="a2ce5-1535">Inoltre, non è possibile eseguire alcuni server applicazioni in locale e altri in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1535">It is also not supported to have some of the application servers run on-premises and some others in Azure.</span></span> <span data-ttu-id="a2ce5-1536">Questa premessa rappresenta il punto iniziale della discussione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1536">That is the starting point of the discussion.</span></span> <span data-ttu-id="a2ce5-1537">Inoltre, non è possibile distribuire componenti DBMS di un sistema SAP e il livello del server applicazioni SAP in due diverse aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1537">We also are not supporting to have the DBMS components of an SAP system and the SAP application server layer deployed in two different Azure Regions.</span></span> <span data-ttu-id="a2ce5-1538">Ad esempio, DBMS negli Stati Uniti occidentali e il livello dell'applicazione negli Stati Uniti centrali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1538">For example DBMS in West US and SAP application layer in Central US.</span></span> <span data-ttu-id="a2ce5-1539">Il motivo per il quale tali configurazioni non sono supportate è la sensibilità di latenza dell'architettura di SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1539">Reason for not supporting such configurations is the latency sensitivity of the SAP NetWeaver architecture.</span></span>

<span data-ttu-id="a2ce5-1540">Tuttavia, nel corso dello scorso anno i partner dei data center hanno sviluppato condivisioni percorso nelle aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1540">However, over the course of last year data center partners developed co-locations to Azure Regions.</span></span> <span data-ttu-id="a2ce5-1541">Queste condivisioni percorso sono spesso molto vicine ai data center fisici di Azure all'interno di un'area di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1541">These co-locations often are in very close proximity to the physical Azure data centers within an Azure Region.</span></span> <span data-ttu-id="a2ce5-1542">La breve distanza e la connessione degli asset nella condivisione percorso con ExpressRoute in Azure può determinare una latenza inferiore a 2 ms.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1542">The short distance and connection of assets in the co-location through ExpressRoute into Azure can result in a latency that is less than 2ms.</span></span> <span data-ttu-id="a2ce5-1543">In tali casi, è possibile individuare il livello DBMS (inclusa la SAN/NAS di archiviazione) in tale condivisione percorso e il livello dell'applicazione SAP in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1543">In such cases, to locate the DBMS layer (including storage SAN/NAS) in such a co-location and the SAP application layer in Azure is possible.</span></span> <span data-ttu-id="a2ce5-1544">Al mese di dicembre 2015 non sono disponibili distribuzioni del genere.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1544">As of Dec 2015, we don’t have any deployments like that.</span></span> <span data-ttu-id="a2ce5-1545">Tuttavia, diversi clienti con distribuzioni di applicazioni non SAP stanno già usando questi approcci.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1545">But different customers with non-SAP application deployments are using such approaches already.</span></span>

### <a name="offline-backup-of-sap-systems"></a><span data-ttu-id="a2ce5-1546">Backup offline di sistemi SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1546">Offline Backup of SAP systems</span></span>
<span data-ttu-id="a2ce5-1547">In base alla configurazione SAP scelta (livello 2 o 3), potrebbe essere necessario eseguire un backup.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1547">Dependent on the SAP configuration chosen (2-Tier or 3-Tier) there could be a need to back up.</span></span> <span data-ttu-id="a2ce5-1548">del contenuto della VM stessa oltre che del database.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1548">The content of the VM itself plus to have a backup of the database.</span></span> <span data-ttu-id="a2ce5-1549">I backup correlati ai DBMS dovrebbero essere eseguiti con metodi di database.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1549">The DBMS-related backups are expected to be done with database methods.</span></span> <span data-ttu-id="a2ce5-1550">Una descrizione dettagliata dei diversi database è disponibile nella [Guida alla distribuzione DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1550">A detailed description for the different databases, can be found in [DBMS Guide][dbms-guide].</span></span> <span data-ttu-id="a2ce5-1551">D'altra parte, i dati SAP possono essere sottoposti a backup in modalità offline (incluso il contenuto del database) come descritto in questa sezione oppure online come descritto nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1551">On the other hand, the SAP data can be backed up in an offline manner (including the database content as well) as described in this section or online as described in the next section.</span></span>

<span data-ttu-id="a2ce5-1552">Il backup offline richiederebbe fondamentalmente un arresto della VM usando il portale di Azure e una copia del disco della VM di base, oltre a tutti i dischi collegati alla VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1552">The offline backup would basically require a shutdown of the VM through the Azure portal and a copy of the base VM disk plus all attached disks to the VM.</span></span> <span data-ttu-id="a2ce5-1553">Questo permetterebbe di mantenere un'immagine temporizzata della VM e del relativo disco.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1553">This would preserve a point in time image of the VM and its associated disk.</span></span> <span data-ttu-id="a2ce5-1554">Si consiglia di copiare i "backup" in un altro account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1554">It is recommended to copy the ‘backups’ into a different Azure Storage Account.</span></span> <span data-ttu-id="a2ce5-1555">Di conseguenza si applica la procedura descritta nel capitolo [Copia di dischi tra account di archiviazione di Azure][planning-guide-5.4.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1555">Hence the procedure described in chapter [Copying disks between Azure Storage Accounts][planning-guide-5.4.2] of this document would apply.</span></span>
<span data-ttu-id="a2ce5-1556">Oltre che dal portale di Azure, è possibile eseguire l'arresto anche usando PowerShell o l'interfaccia della riga di comando, come descritto qui: <https://azure.microsoft.com/documentation/articles/virtual-machines-deploy-rmtemplates-powershell/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1556">Besides the shutdown using the Azure portal one can also do it via Powershell or CLI as described here: <https://azure.microsoft.com/documentation/articles/virtual-machines-deploy-rmtemplates-powershell/></span></span>

<span data-ttu-id="a2ce5-1557">Un ripristino dello stato comporterebbe l'eliminazione della VM di base nonché dei relativi dischi originali e dei dischi montati, la copia dei dischi salvati nell'account di archiviazione originale o nel gruppo di risorse per i dischi gestiti e quindi la ridistribuzione del sistema.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1557">A restore of that state would consist of deleting the base VM as well as the original disks of the base VM and mounted disks, copying back the saved disks to the original Storage Account or resource group for managed disks and then redeploying the system.</span></span>
<span data-ttu-id="a2ce5-1558">Questo articolo illustra un esempio di come generare lo script di questo processo in PowerShell: <http://www.westerndevs.com/azure-snapshots/></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1558">This article shows an example how to script this process in Powershell: <http://www.westerndevs.com/azure-snapshots/></span></span>

<span data-ttu-id="a2ce5-1559">Assicurarsi di installare una nuova licenza SAP poiché il ripristino di un backup di VM come descritto in precedenza crea una nuova chiave hardware.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1559">Please make sure to install a new SAP license since restoring a VM backup as described above creates a new hardware key.</span></span>

### <a name="online-backup-of-an-sap-system"></a><span data-ttu-id="a2ce5-1560">Backup online di un sistema SAP</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1560">Online backup of an SAP system</span></span>
<span data-ttu-id="a2ce5-1561">Il backup del DBMS viene eseguito con metodi specifici del DBMS, come descritto nella [Guida alla distribuzione DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1561">Backup of the DBMS is performed with DBMS-specific methods as described in the [DBMS Guide][dbms-guide].</span></span>

<span data-ttu-id="a2ce5-1562">Altre VM all'interno del sistema SAP possono essere sottoposte a backup usando la funzionalità Backup macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1562">Other VMs within the SAP system can be backed up using Azure Virtual Machine Backup functionality.</span></span> <span data-ttu-id="a2ce5-1563">La funzionalità Backup macchina virtuale di Azure è stata introdotta all'inizio del 2015 ed è diventata un metodo standard per eseguire il backup di una VM completa in Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1563">Azure Virtual Machine Backup got introduced early in 2015 and meanwhile is a standard method to back up a complete VM in Azure.</span></span> <span data-ttu-id="a2ce5-1564">Il backup di Azure archivia i backup in Azure e consente il ripristino di una VM.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1564">Azure Backup stores the backups in Azure and allows a restore of a VM again.</span></span>

> [!NOTE]
> <span data-ttu-id="a2ce5-1565">Al mese di dicembre 2015 il backup delle macchine VM NON mantiene l'ID univoco della VM usato per le licenze SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1565">As of Dec 2015 using VM Backup does NOT keep the unique VM ID which is used for SAP licensing.</span></span> <span data-ttu-id="a2ce5-1566">Ciò significa che il ripristino da un backup di VM richiede l'installazione di una nuova chiave di licenza SAP perché la VM ripristinata è considerata una nuova VM e non una sostituzione di quella precedente che era stata salvata.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1566">This means that a restore from a VM backup requires installation of a new SAP license key as the restored VM is considered to be a new VM and not a replacement of the former one which was saved.</span></span>
>
> ![Windows][Logo_Windows] <span data-ttu-id="a2ce5-1568">Windows</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1568">Windows</span></span>
>
> <span data-ttu-id="a2ce5-1569">In teoria, anche le VM che eseguono database possono essere sottoposte a backup in modo coerente se il sistema DBMS supporta il servizio Copia Shadow del volume di Windows (<https://msdn.microsoft.com/library/windows/desktop/bb968832(v=vs.85).aspx>) come, ad esempio, SQL Server.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1569">Theoretically, VMs that run databases can be backed up in a consistent manner as well if the DBMS system supports the Windows VSS (Volume Shadow Copy Service <https://msdn.microsoft.com/library/windows/desktop/bb968832(v=vs.85).aspx>) as, for example, SQL Server does.</span></span>
> <span data-ttu-id="a2ce5-1570">Tenere presente, tuttavia, che in base ai backup di VM di Azure, i ripristini temporizzati dei database non sono possibili.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1570">However, be aware that based on Azure VM backups point-in-time restores of databases are not possible.</span></span> <span data-ttu-id="a2ce5-1571">Si consiglia, quindi, di eseguire backup di database usando la funzionalità DBMS invece del backup delle VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1571">Therefore, the recommendation is to perform backups of databases with DBMS functionality instead of relying on Azure VM Backup.</span></span>
>
> <span data-ttu-id="a2ce5-1572">Per acquisire familiarità con la funzionalità Backup macchina virtuale di Azure, iniziare da questo articolo: <https://docs.microsoft.com/azure/backup/backup-azure-vms>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1572">To get familiar with Azure Virtual Machine Backup please start here: <https://docs.microsoft.com/azure/backup/backup-azure-vms>.</span></span>
>
> <span data-ttu-id="a2ce5-1573">Altre possibilità prevedono l'uso di una combinazione di Microsoft Data Protection Manager installato in una VM di Azure e del backup di Azure per eseguire il backup e il ripristino di database.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1573">Other possibilities are to use a combination of Microsoft Data Protection Manager installed in an Azure VM and Azure Backup to backup/restore databases.</span></span> <span data-ttu-id="a2ce5-1574">Ulteriori informazioni possono essere reperite qui: <https://docs.microsoft.com/azure/backup/backup-azure-dpm-introduction>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1574">More information can be found here: <https://docs.microsoft.com/azure/backup/backup-azure-dpm-introduction>.</span></span>  
>
> ![Linux][Logo_Linux] <span data-ttu-id="a2ce5-1576">Linux</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1576">Linux</span></span>
>
> <span data-ttu-id="a2ce5-1577">In Linux non esiste alcuna funzionalità equivalente al servizio Copia Shadow del volume di Windows.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1577">There is no equivalent to Windows VSS in Linux.</span></span> <span data-ttu-id="a2ce5-1578">Quindi, è possibile eseguire solo backup coerenti con i file, ma non con l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1578">Therefore only file-consistent backups are possible but not application-consistent backups.</span></span> <span data-ttu-id="a2ce5-1579">Il backup del DBMS di SAP deve essere eseguito usando la funzionalità DBMS.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1579">The SAP DBMS backup should be done using DBMS functionality.</span></span> <span data-ttu-id="a2ce5-1580">Il file system che include i dati correlati a SAP può essere salvato, ad esempio usando tar come descritto qui: <http://help.sap.com/saphelp_nw70ehp2/helpdata/en/d3/c0da3ccbb04d35b186041ba6ac301f/content.htm></span><span class="sxs-lookup"><span data-stu-id="a2ce5-1580">The file system which includes the SAP-related data can be saved, for example, using tar as described here: <http://help.sap.com/saphelp_nw70ehp2/helpdata/en/d3/c0da3ccbb04d35b186041ba6ac301f/content.htm></span></span>
>
>

### <a name="azure-as-dr-site-for-production-sap-landscapes"></a><span data-ttu-id="a2ce5-1581">Azure come sito di ripristino di emergenza per panorami applicativi SAP di produzione</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1581">Azure as DR site for production SAP landscapes</span></span>
<span data-ttu-id="a2ce5-1582">Dalla metà del 2014 le estensioni ai vari componenti di Hyper-V, System Center e Azure consentono l'utilizzo di Azure come sito di ripristino di emergenza per le VM in esecuzione in locale basate su Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1582">Since Mid 2014, extensions to various components around Hyper-V, System Center and Azure enable the usage of Azure as DR site for VMs running on-premises based on Hyper-V.</span></span>

<span data-ttu-id="a2ce5-1583">Per una descrizione dettagliata di come distribuire questa soluzione, vedere il blog seguente: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/11/19/protecting-sap-solutions-with-azure-site-recovery.aspx>.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1583">A blog detailing how to deploy this solution is documented here: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/11/19/protecting-sap-solutions-with-azure-site-recovery.aspx>.</span></span>

## <a name="summary"></a><span data-ttu-id="a2ce5-1584">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1584">Summary</span></span>
<span data-ttu-id="a2ce5-1585">I punti chiave della disponibilità elevata per i sistemi SAP in Azure sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1585">The key points of High Availability for SAP systems in Azure are:</span></span>

* <span data-ttu-id="a2ce5-1586">Attualmente il singolo punto di errore di SAP non può essere protetto esattamente nello stesso modo delle distribuzioni locali.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1586">At this point in time, the SAP single point of failure cannot be secured exactly the same way as it can be done in on-premises deployments.</span></span> <span data-ttu-id="a2ce5-1587">Il motivo risiede nel fatto che i cluster di dischi condivisi non possono ancora essere integrati in Azure senza l'uso di software di terze parti.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1587">The reason is that Shared Disk clusters can’t yet be built in Azure without the use of 3rd party software.</span></span>
* <span data-ttu-id="a2ce5-1588">Per il livello DBMS è necessario usare la funzionalità DBMS che non si basa sulla tecnologia cluster di dischi condivisi.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1588">For the DBMS layer you need to use DBMS functionality that does not rely on shared disk cluster technology.</span></span> <span data-ttu-id="a2ce5-1589">Informazioni dettagliate sono fornite nella [Guida alla distribuzione DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1589">Details are documented in the [DBMS Guide][dbms-guide].</span></span>
* <span data-ttu-id="a2ce5-1590">Per ridurre al minimo l'impatto dei problemi all'interno dei domini di errore nell'infrastruttura di Azure o nella manutenzione di host, è consigliabile usare i set di disponibilità di Azure:</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1590">To minimize the impact of problems within Fault Domains in the Azure infrastructure or host maintenance, you should use Azure Availability Sets:</span></span>
  * <span data-ttu-id="a2ce5-1591">È consigliabile avere un set di disponibilità per il livello di applicazione SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1591">It is recommended to have one Availability Set for the SAP application layer.</span></span>
  * <span data-ttu-id="a2ce5-1592">È consigliabile avere un set di disponibilità separato per il livello DBMS di SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1592">It is recommended to have a separate Availability Set for the SAP DBMS layer.</span></span>
  * <span data-ttu-id="a2ce5-1593">NON è consigliabile applicare lo stesso set di disponibilità per le VM di diversi sistemi SAP.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1593">It is NOT recommended to apply the same Availability set for VMs of different SAP systems.</span></span>
  * <span data-ttu-id="a2ce5-1594">Si consiglia di utilizzare Managed Disks Premium.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1594">It is recommended to use Premium Managed Disks.</span></span>
* <span data-ttu-id="a2ce5-1595">Per le finalità di backup del livello DBMS di SAP, consultare la [Guida alla distribuzione DBMS][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1595">For Backup purposes of the SAP DBMS layer, please check the [DBMS Guide][dbms-guide].</span></span>
* <span data-ttu-id="a2ce5-1596">Il backup delle istanze delle finestra di dialogo SAP ha poco senso perché in genere la ridistribuzione di semplici istanze di dialogo costituisce un processo più veloce.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1596">Backing up SAP Dialog instances makes little sense since it is usually faster to redeploy simple dialog instances.</span></span>
* <span data-ttu-id="a2ce5-1597">Ha senso, invece, il backup della VM che contiene la directory globale del sistema SAP e di tutti i profili delle varie istanze; tale backup deve essere eseguito con Windows Backup oppure, ad esempio, con tar in Linux.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1597">Backing up the VM which contains the global directory of the SAP system and with it all the profiles of the different instances, does make sense and should be performed with Windows Backup or, for example, tar on Linux.</span></span> <span data-ttu-id="a2ce5-1598">Dato che esistono differenze tra Windows Server 2008 (R2) e Windows Server 2012 (R2), e che il backup risulta più semplice usando le release più recenti di Windows Server, è consigliabile eseguire Windows Server 2012 (R2) come sistema operativo guest Windows.</span><span class="sxs-lookup"><span data-stu-id="a2ce5-1598">Since there are differences between Windows Server 2008 (R2) and Windows Server 2012 (R2), which make it easier to back up using the more recent Windows Server releases, we recommend to run Windows Server 2012 (R2) as Windows guest operating system.</span></span>
