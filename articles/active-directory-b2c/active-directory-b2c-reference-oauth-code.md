---
title: Flusso del codice di autorizzazione - Azure AD B2C | Microsoft Docs
description: Informazioni su come toobuild App web utilizzando il protocollo di autenticazione di Azure Active Directory B2C e OpenID Connect.
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: 6bf9d37310bd45b39bda346441413556f9fd4fdc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="5d835-103">Azure Active Directory B2C: flusso del codice di autorizzazione di OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="5d835-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="5d835-104">È possibile utilizzare concessione del codice di autorizzazione OAuth 2.0 hello in App installate in un dispositivo toogain accedere tooprotected alle risorse, ad esempio API web.</span><span class="sxs-lookup"><span data-stu-id="5d835-104">You can use hello OAuth 2.0 authorization code grant in apps installed on a device toogain access tooprotected resources, such as web APIs.</span></span> <span data-ttu-id="5d835-105">Tramite l'implementazione di hello Azure Active Directory B2C (Azure AD B2C) di OAuth 2.0, è possibile aggiungere per l'abbonamento, accesso e le attività di altri gestione delle identità tooyour app di dispositivi mobili e desktop.</span><span class="sxs-lookup"><span data-stu-id="5d835-105">By using hello Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks tooyour mobile and desktop apps.</span></span> <span data-ttu-id="5d835-106">Questo articolo è indipendente dal linguaggio.</span><span class="sxs-lookup"><span data-stu-id="5d835-106">This article is language-independent.</span></span> <span data-ttu-id="5d835-107">Nell'articolo hello, viene descritto come toosend e ricevere messaggi HTTP senza utilizzare le eventuali librerie open source.</span><span class="sxs-lookup"><span data-stu-id="5d835-107">In hello article, we describe how toosend and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link toolibraries -->

<span data-ttu-id="5d835-108">flusso di codice di autorizzazione OAuth 2.0 Hello è descritta in [sezione 4.1 della specifica OAuth 2.0 hello](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="5d835-108">hello OAuth 2.0 authorization code flow is described in [section 4.1 of hello OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="5d835-109">È possibile usarlo per eseguire l'autenticazione e l'autorizzazione nella maggior parte dei tipi di app, tra cui le [App Web](active-directory-b2c-apps.md#web-apps) e le [app installate in modo nativo](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="5d835-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="5d835-110">È possibile utilizzare hello acquisire toosecurely flusso codice di autorizzazione di OAuth 2.0 *i token di accesso* per le app, che può essere utilizzato tooaccess risorse che sono protetti da un [server autorizzazione](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="5d835-110">You can use hello OAuth 2.0 authorization code flow toosecurely acquire *access tokens* for your apps, which can be used tooaccess resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="5d835-111">Questo articolo è incentrato su hello **client pubblica** flusso di codice di autorizzazione OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="5d835-111">This article focuses on hello **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="5d835-112">Un client pubblico è qualsiasi applicazione client che non può essere attendibile toosecurely hello integrità di una password segreta.</span><span class="sxs-lookup"><span data-stu-id="5d835-112">A public client is any client application that cannot be trusted toosecurely maintain hello integrity of a secret password.</span></span> <span data-ttu-id="5d835-113">Ciò include l'App per dispositivi mobili, applicazioni desktop ed essenzialmente qualsiasi applicazione in esecuzione su un dispositivo e deve tooget i token di accesso.</span><span class="sxs-lookup"><span data-stu-id="5d835-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs tooget access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="5d835-114">app web con Azure Active Directory B2C, utilizzare tooadd identity management tooa [OpenID Connect](active-directory-b2c-reference-oidc.md) anziché OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="5d835-114">tooadd identity management tooa web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="5d835-115">Azure Active Directory B2C estende standard hello che flusso OAuth 2.0 toodo più semplice autenticazione e autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="5d835-115">Azure AD B2C extends hello standard OAuth 2.0 flows toodo more than simple authentication and authorization.</span></span> <span data-ttu-id="5d835-116">Introduce hello [parametro criteri](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="5d835-116">It introduces hello [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="5d835-117">Con i criteri predefiniti, è possibile usare OAuth 2.0 tooadd utente esperienze tooyour app, ad esempio effettua l'iscrizione, accesso e la gestione dei profili.</span><span class="sxs-lookup"><span data-stu-id="5d835-117">With built-in policies, you can use OAuth 2.0 tooadd user experiences tooyour app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="5d835-118">In questo articolo verrà illustrato come tooimplement toouse OAuth 2.0 e i criteri, ognuna di queste esperienze nelle applicazioni native.</span><span class="sxs-lookup"><span data-stu-id="5d835-118">In this article, we show you how toouse OAuth 2.0 and policies tooimplement each of these experiences in your native applications.</span></span> <span data-ttu-id="5d835-119">Viene anche illustrata la modalità tooget i token di accesso per l'accesso a web API.</span><span class="sxs-lookup"><span data-stu-id="5d835-119">We also show you how tooget access tokens for accessing web APIs.</span></span>

<span data-ttu-id="5d835-120">Nelle richieste HTTP di esempio di hello in questo articolo, utilizziamo la directory di Azure Active Directory B2C, **fabrikamb2c.onmicrosoft.com**. Si usano anche i criteri e l'applicazione di esempio.</span><span class="sxs-lookup"><span data-stu-id="5d835-120">In hello example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="5d835-121">È possibile provare le richieste di hello utilizzando i valori o sostituirli con valori personalizzati.</span><span class="sxs-lookup"><span data-stu-id="5d835-121">You can try hello requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="5d835-122">Informazioni su come troppo[ottenere la propria directory, applicazione e i criteri di Azure Active Directory B2C](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="5d835-122">Learn how too[get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="5d835-123">1. Ottenere un codice di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="5d835-123">1. Get an authorization code</span></span>
<span data-ttu-id="5d835-124">flusso di codice di autorizzazione Hello inizia con il client di hello indirizzamento hello utente toohello `/authorize` endpoint.</span><span class="sxs-lookup"><span data-stu-id="5d835-124">hello authorization code flow begins with hello client directing hello user toohello `/authorize` endpoint.</span></span> <span data-ttu-id="5d835-125">Questo è parte interattiva di hello del flusso di hello, in cui interviene utente hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-125">This is hello interactive part of hello flow, where hello user takes action.</span></span> <span data-ttu-id="5d835-126">In questa richiesta, il client hello indica in hello `scope` autorizzazioni hello parametro che deve tooacquire utente hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-126">In this request, hello client indicates in hello `scope` parameter hello permissions that it needs tooacquire from hello user.</span></span> <span data-ttu-id="5d835-127">In hello `p` parametro indica tooexecute criteri hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-127">In hello `p` parameter, it indicates hello policy tooexecute.</span></span> <span data-ttu-id="5d835-128">Hello tre esempi seguenti (con interruzioni di riga per migliorare la leggibilità) ogni usano criteri diversi.</span><span class="sxs-lookup"><span data-stu-id="5d835-128">hello following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="5d835-129">Uso di un criterio di accesso</span><span class="sxs-lookup"><span data-stu-id="5d835-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="5d835-130">Uso di un criterio di iscrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="5d835-131">Uso di un criterio di modifica del profilo</span><span class="sxs-lookup"><span data-stu-id="5d835-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="5d835-132">Parametro</span><span class="sxs-lookup"><span data-stu-id="5d835-132">Parameter</span></span> | <span data-ttu-id="5d835-133">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="5d835-133">Required?</span></span> | <span data-ttu-id="5d835-134">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="5d835-135">client_id</span><span class="sxs-lookup"><span data-stu-id="5d835-135">client_id</span></span> |<span data-ttu-id="5d835-136">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-136">Required</span></span> |<span data-ttu-id="5d835-137">ID dell'applicazione Hello assegnato app tooyour in hello [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="5d835-137">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="5d835-138">response_type</span><span class="sxs-lookup"><span data-stu-id="5d835-138">response_type</span></span> |<span data-ttu-id="5d835-139">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-139">Required</span></span> |<span data-ttu-id="5d835-140">tipo di risposta Hello, che deve includere `code` per flusso di codice di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-140">hello response type, which must include `code` for hello authorization code flow.</span></span> |
| <span data-ttu-id="5d835-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="5d835-141">redirect_uri</span></span> |<span data-ttu-id="5d835-142">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-142">Required</span></span> |<span data-ttu-id="5d835-143">Hello URI di reindirizzamento dell'app, in cui le risposte di autenticazione vengono inviate e ricevute dall'app.</span><span class="sxs-lookup"><span data-stu-id="5d835-143">hello redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="5d835-144">Deve corrispondere esattamente a uno di reindirizzamento hello URI a cui è stato registrato nel portale di hello, ad eccezione del fatto che deve essere codificato in URL.</span><span class="sxs-lookup"><span data-stu-id="5d835-144">It must exactly match one of hello redirect URIs that you registered in hello portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="5d835-145">scope</span><span class="sxs-lookup"><span data-stu-id="5d835-145">scope</span></span> |<span data-ttu-id="5d835-146">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-146">Required</span></span> |<span data-ttu-id="5d835-147">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="5d835-147">A space-separated list of scopes.</span></span> <span data-ttu-id="5d835-148">Il valore di un singolo ambito indica tooAzure Active Directory (Azure AD) entrambi delle autorizzazioni di hello che sono stati richiesti.</span><span class="sxs-lookup"><span data-stu-id="5d835-148">A single scope value indicates tooAzure Active Directory (Azure AD) both of hello permissions that are being requested.</span></span> <span data-ttu-id="5d835-149">Utilizzando client hello ID come ambito hello indica che è necessario un token di accesso ai servizi o API web, è possibile utilizzare l'app è rappresentato dal hello stesso ID client.</span><span class="sxs-lookup"><span data-stu-id="5d835-149">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="5d835-150">Hello `offline_access` ambito indica che l'app è necessario un token di aggiornamento per tooresources di accesso di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="5d835-150">hello `offline_access` scope indicates that your app needs a refresh token for long-lived access tooresources.</span></span> <span data-ttu-id="5d835-151">È inoltre possibile utilizzare hello `openid` toorequest ambito un ID di token da Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="5d835-151">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="5d835-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="5d835-152">response_mode</span></span> |<span data-ttu-id="5d835-153">Consigliato</span><span class="sxs-lookup"><span data-stu-id="5d835-153">Recommended</span></span> |<span data-ttu-id="5d835-154">metodo Hello utilizzare toosend hello autorizzazione codice tooyour indietro app risultante.</span><span class="sxs-lookup"><span data-stu-id="5d835-154">hello method that you use toosend hello resulting authorization code back tooyour app.</span></span> <span data-ttu-id="5d835-155">Può essere `query`, `form_post` o `fragment`.</span><span class="sxs-lookup"><span data-stu-id="5d835-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="5d835-156">state</span><span class="sxs-lookup"><span data-stu-id="5d835-156">state</span></span> |<span data-ttu-id="5d835-157">Consigliato</span><span class="sxs-lookup"><span data-stu-id="5d835-157">Recommended</span></span> |<span data-ttu-id="5d835-158">Un valore incluso nella richiesta di hello restituito nella risposta token hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-158">A value included in hello request that is returned in hello token response.</span></span> <span data-ttu-id="5d835-159">Può essere una stringa di qualsiasi contenuto che si desidera toouse.</span><span class="sxs-lookup"><span data-stu-id="5d835-159">It can be a string of any content that you want toouse.</span></span> <span data-ttu-id="5d835-160">In genere, viene utilizzato un valore univoco generato casualmente, attacchi di tooprevent cross-site request forgery.</span><span class="sxs-lookup"><span data-stu-id="5d835-160">Usually, a randomly generated unique value is  used, tooprevent cross-site request forgery attacks.</span></span> <span data-ttu-id="5d835-161">stato di Hello è anche tooencode utilizzati informazioni sullo stato dell'utente hello in app hello prima dell'esecuzione della richiesta di autenticazione hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-161">hello state also is used tooencode information about hello user's state in hello app before hello authentication request occurred.</span></span> <span data-ttu-id="5d835-162">Ad esempio, hello pagina hello utente nel o hello criteri che è stato in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="5d835-162">For example, hello page hello user was on, or hello policy that was being executed.</span></span> |
| <span data-ttu-id="5d835-163">p</span><span class="sxs-lookup"><span data-stu-id="5d835-163">p</span></span> |<span data-ttu-id="5d835-164">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-164">Required</span></span> |<span data-ttu-id="5d835-165">criteri di Hello che viene eseguito.</span><span class="sxs-lookup"><span data-stu-id="5d835-165">hello policy that is executed.</span></span> <span data-ttu-id="5d835-166">Hello nome di un criterio che viene creato nella directory di Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="5d835-166">It's hello name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="5d835-167">valore del nome criterio Hello deve iniziare con **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="5d835-167">hello policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="5d835-168">toolearn informazioni sui criteri, vedere [criteri predefiniti di Azure Active Directory B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="5d835-168">toolearn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="5d835-169">prompt</span><span class="sxs-lookup"><span data-stu-id="5d835-169">prompt</span></span> |<span data-ttu-id="5d835-170">Facoltativo</span><span class="sxs-lookup"><span data-stu-id="5d835-170">Optional</span></span> |<span data-ttu-id="5d835-171">tipo di Hello dell'interazione dell'utente che è obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="5d835-171">hello type of user interaction that is required.</span></span> <span data-ttu-id="5d835-172">Attualmente, hello unico valore valido è `login`, che forza hello tooenter utente le credenziali per tale richiesta.</span><span class="sxs-lookup"><span data-stu-id="5d835-172">Currently, hello only valid value is `login`, which forces hello user tooenter their credentials on that request.</span></span> <span data-ttu-id="5d835-173">L'accesso Single Sign-On non avrà effetto.</span><span class="sxs-lookup"><span data-stu-id="5d835-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="5d835-174">A questo punto, hello verrà chiesto del flusso di lavoro del criterio di toocomplete hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-174">At this point, hello user is asked toocomplete hello policy's workflow.</span></span> <span data-ttu-id="5d835-175">Questa operazione potrebbe comportare hello immissione di nome utente e password, accedere con un'identità di social networking, iscriversi a directory hello o qualsiasi altro numero di passaggi.</span><span class="sxs-lookup"><span data-stu-id="5d835-175">This might involve hello user entering their username and password, signing in with a social identity, signing up for hello directory, or any other number of steps.</span></span> <span data-ttu-id="5d835-176">Le azioni dell'utente dipendono come criterio di hello è definito.</span><span class="sxs-lookup"><span data-stu-id="5d835-176">User actions depend on how hello policy is defined.</span></span>

<span data-ttu-id="5d835-177">Al termine di criteri di hello, utente hello Azure AD restituisce una app tooyour risposta al valore di hello utilizzato per `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="5d835-177">After hello user completes hello policy, Azure AD returns a response tooyour app at hello value you used for `redirect_uri`.</span></span> <span data-ttu-id="5d835-178">Usa metodo hello specificato in hello `response_mode` parametro.</span><span class="sxs-lookup"><span data-stu-id="5d835-178">It uses hello method specified in hello `response_mode` parameter.</span></span> <span data-ttu-id="5d835-179">risposta Hello è esattamente hello stesso per ogni hello azione scenari utente, indipendentemente dal criterio hello che è stato eseguito.</span><span class="sxs-lookup"><span data-stu-id="5d835-179">hello response is exactly hello same for each of hello user action scenarios, independent of hello policy that was executed.</span></span>

<span data-ttu-id="5d835-180">Una risposta con esito positivo che usa `response_mode=query` ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="5d835-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // hello authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // hello value provided in hello request
```

| <span data-ttu-id="5d835-181">Parametro</span><span class="sxs-lookup"><span data-stu-id="5d835-181">Parameter</span></span> | <span data-ttu-id="5d835-182">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5d835-183">code</span><span class="sxs-lookup"><span data-stu-id="5d835-183">code</span></span> |<span data-ttu-id="5d835-184">codice di autorizzazione Hello che hello app richiesto.</span><span class="sxs-lookup"><span data-stu-id="5d835-184">hello authorization code that hello app requested.</span></span> <span data-ttu-id="5d835-185">app Hello è possibile utilizzare toorequest codice di autorizzazione hello un token di accesso per una risorsa di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5d835-185">hello app can use hello authorization code toorequest an access token for a target resource.</span></span> <span data-ttu-id="5d835-186">I codici di autorizzazione hanno una durata molto breve.</span><span class="sxs-lookup"><span data-stu-id="5d835-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="5d835-187">In genere scadono dopo circa 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="5d835-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="5d835-188">state</span><span class="sxs-lookup"><span data-stu-id="5d835-188">state</span></span> |<span data-ttu-id="5d835-189">Vedere la descrizione completa di hello nella tabella hello nella precedente sezione hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-189">See hello full description in hello table in hello preceding section.</span></span> <span data-ttu-id="5d835-190">Se un `state` parametro è incluso nella richiesta di hello, hello stesso valore deve essere visualizzato nella risposta hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-190">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="5d835-191">Hello app deve verificare che hello `state` valori hello richiesta e risposta sono identici.</span><span class="sxs-lookup"><span data-stu-id="5d835-191">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

<span data-ttu-id="5d835-192">Le risposte di errore inoltre possono essere inviate toohello URI di reindirizzamento in modo che hello app in grado di gestirle in modo appropriato:</span><span class="sxs-lookup"><span data-stu-id="5d835-192">Error responses also can be sent toohello redirect URI so that hello app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="5d835-193">.</span><span class="sxs-lookup"><span data-stu-id="5d835-193">Parameter</span></span> | <span data-ttu-id="5d835-194">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5d835-195">error</span><span class="sxs-lookup"><span data-stu-id="5d835-195">error</span></span> |<span data-ttu-id="5d835-196">Una stringa di codice di errore che è possibile utilizzare i tipi di hello tooclassify di errori che si verificano.</span><span class="sxs-lookup"><span data-stu-id="5d835-196">An error code string that you can use tooclassify hello types of errors that occur.</span></span> <span data-ttu-id="5d835-197">È inoltre possibile utilizzare hello stringa tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="5d835-197">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="5d835-198">error_description</span><span class="sxs-lookup"><span data-stu-id="5d835-198">error_description</span></span> |<span data-ttu-id="5d835-199">Un messaggio di errore specifico che può aiutarti a identificare causa radice di hello di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="5d835-199">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |
| <span data-ttu-id="5d835-200">state</span><span class="sxs-lookup"><span data-stu-id="5d835-200">state</span></span> |<span data-ttu-id="5d835-201">Vedere la descrizione completa di hello in hello tabella precedente.</span><span class="sxs-lookup"><span data-stu-id="5d835-201">See hello full description in hello preceding table.</span></span> <span data-ttu-id="5d835-202">Se un `state` parametro è incluso nella richiesta di hello, hello stesso valore deve essere visualizzato nella risposta hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-202">If a `state` parameter is included in hello request, hello same value should appear in hello response.</span></span> <span data-ttu-id="5d835-203">Hello app deve verificare che hello `state` valori hello richiesta e risposta sono identici.</span><span class="sxs-lookup"><span data-stu-id="5d835-203">hello app should verify that hello `state` values in hello request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="5d835-204">2. Acquisizione di un token</span><span class="sxs-lookup"><span data-stu-id="5d835-204">2. Get a token</span></span>
<span data-ttu-id="5d835-205">Ora che è stato acquisito un codice di autorizzazione, è possibile riscattare hello `code` per un token toohello destinati risorsa inviando un toohello richiesta POST `/token` endpoint.</span><span class="sxs-lookup"><span data-stu-id="5d835-205">Now that you've acquired an authorization code, you can redeem hello `code` for a token toohello intended resource by sending a POST request toohello `/token` endpoint.</span></span> <span data-ttu-id="5d835-206">In Azure Active Directory B2C, hello solo risorse che è possibile richiedere un token per sono l'API web di back-end dell'app.</span><span class="sxs-lookup"><span data-stu-id="5d835-206">In Azure AD B2C, hello only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="5d835-207">convenzione di Hello che viene utilizzato per richiedere un token tooyourself è l'ID client dell'app come ambito hello toouse:</span><span class="sxs-lookup"><span data-stu-id="5d835-207">hello convention that's used for requesting a token tooyourself is toouse your app's client ID as hello scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="5d835-208">.</span><span class="sxs-lookup"><span data-stu-id="5d835-208">Parameter</span></span> | <span data-ttu-id="5d835-209">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="5d835-209">Required?</span></span> | <span data-ttu-id="5d835-210">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="5d835-211">p</span><span class="sxs-lookup"><span data-stu-id="5d835-211">p</span></span> |<span data-ttu-id="5d835-212">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-212">Required</span></span> |<span data-ttu-id="5d835-213">criteri che è stato utilizzato tooacquire hello autorizzazione Hello codice.</span><span class="sxs-lookup"><span data-stu-id="5d835-213">hello policy that was used tooacquire hello authorization code.</span></span> <span data-ttu-id="5d835-214">Non è possibile usare un criterio diverso in questa richiesta.</span><span class="sxs-lookup"><span data-stu-id="5d835-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="5d835-215">Si noti che si aggiunge questo toohello parametro *stringa di query*, non nel corpo del POST hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-215">Note that you add this parameter toohello *query string*, not in hello POST body.</span></span> |
| <span data-ttu-id="5d835-216">client_id</span><span class="sxs-lookup"><span data-stu-id="5d835-216">client_id</span></span> |<span data-ttu-id="5d835-217">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-217">Required</span></span> |<span data-ttu-id="5d835-218">ID dell'applicazione Hello assegnato app tooyour in hello [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="5d835-218">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="5d835-219">grant_type</span><span class="sxs-lookup"><span data-stu-id="5d835-219">grant_type</span></span> |<span data-ttu-id="5d835-220">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-220">Required</span></span> |<span data-ttu-id="5d835-221">tipo di Hello di concessione.</span><span class="sxs-lookup"><span data-stu-id="5d835-221">hello type of grant.</span></span> <span data-ttu-id="5d835-222">Per flusso di codice di autorizzazione hello, deve essere il tipo di concessione di hello `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="5d835-222">For hello authorization code flow, hello grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="5d835-223">scope</span><span class="sxs-lookup"><span data-stu-id="5d835-223">scope</span></span> |<span data-ttu-id="5d835-224">Consigliato</span><span class="sxs-lookup"><span data-stu-id="5d835-224">Recommended</span></span> |<span data-ttu-id="5d835-225">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="5d835-225">A space-separated list of scopes.</span></span> <span data-ttu-id="5d835-226">Il valore di un singolo ambito indica tooAzure AD entrambi delle autorizzazioni di hello che sono stati richiesti.</span><span class="sxs-lookup"><span data-stu-id="5d835-226">A single scope value indicates tooAzure AD both of hello permissions that are being requested.</span></span> <span data-ttu-id="5d835-227">Utilizzando client hello ID come ambito hello indica che è necessario un token di accesso ai servizi o API web, è possibile utilizzare l'app è rappresentato dal hello stesso ID client.</span><span class="sxs-lookup"><span data-stu-id="5d835-227">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="5d835-228">Hello `offline_access` ambito indica che l'app è necessario un token di aggiornamento per tooresources di accesso di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="5d835-228">hello `offline_access` scope indicates that your app needs a refresh token for long-lived access tooresources.</span></span>  <span data-ttu-id="5d835-229">È inoltre possibile utilizzare hello `openid` toorequest ambito un ID di token da Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="5d835-229">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="5d835-230">code</span><span class="sxs-lookup"><span data-stu-id="5d835-230">code</span></span> |<span data-ttu-id="5d835-231">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-231">Required</span></span> |<span data-ttu-id="5d835-232">codice di autorizzazione Hello acquisito nel segmento prima di hello del flusso di hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-232">hello authorization code that you acquired in hello first leg of hello flow.</span></span> |
| <span data-ttu-id="5d835-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="5d835-233">redirect_uri</span></span> |<span data-ttu-id="5d835-234">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-234">Required</span></span> |<span data-ttu-id="5d835-235">Hello URI di reindirizzamento dell'applicazione hello in cui viene visualizzato il codice di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-235">hello redirect URI of hello application where you received hello authorization code.</span></span> |

<span data-ttu-id="5d835-236">Una risposta di token con esito positivo ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="5d835-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="5d835-237">Parametro</span><span class="sxs-lookup"><span data-stu-id="5d835-237">Parameter</span></span> | <span data-ttu-id="5d835-238">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5d835-239">not_before</span><span class="sxs-lookup"><span data-stu-id="5d835-239">not_before</span></span> |<span data-ttu-id="5d835-240">ora di Hello al quale hello è considerato valido, in valore epoch token.</span><span class="sxs-lookup"><span data-stu-id="5d835-240">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="5d835-241">token_type</span><span class="sxs-lookup"><span data-stu-id="5d835-241">token_type</span></span> |<span data-ttu-id="5d835-242">valore di tipo di token Hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-242">hello token type value.</span></span> <span data-ttu-id="5d835-243">Hello solo il tipo che supporta Azure AD connessione.</span><span class="sxs-lookup"><span data-stu-id="5d835-243">hello only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="5d835-244">access_token</span><span class="sxs-lookup"><span data-stu-id="5d835-244">access_token</span></span> |<span data-ttu-id="5d835-245">Hello firmato JSON Web Token (JWT) richiesto.</span><span class="sxs-lookup"><span data-stu-id="5d835-245">hello signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="5d835-246">scope</span><span class="sxs-lookup"><span data-stu-id="5d835-246">scope</span></span> |<span data-ttu-id="5d835-247">gli ambiti di Hello hello token è valido per.</span><span class="sxs-lookup"><span data-stu-id="5d835-247">hello scopes that hello token is valid for.</span></span> <span data-ttu-id="5d835-248">È inoltre possibile utilizzare i token toocache ambiti per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="5d835-248">You also can use scopes toocache tokens for later use.</span></span> |
| <span data-ttu-id="5d835-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="5d835-249">expires_in</span></span> |<span data-ttu-id="5d835-250">durata Hello che hello token è valido (in secondi).</span><span class="sxs-lookup"><span data-stu-id="5d835-250">hello length of time that hello token is valid (in seconds).</span></span> |
| <span data-ttu-id="5d835-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="5d835-251">refresh_token</span></span> |<span data-ttu-id="5d835-252">Token di aggiornamento di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="5d835-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="5d835-253">app Hello è possibile usare questo token aggiuntivi tooacquire token alla scadenza del token corrente hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-253">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="5d835-254">I token di aggiornamento sono di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="5d835-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="5d835-255">È possibile utilizzare tali tooretain accesso tooresources per lunghi periodi di tempo.</span><span class="sxs-lookup"><span data-stu-id="5d835-255">You can use them tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="5d835-256">Per ulteriori informazioni, vedere hello [riferimento del token di Azure Active Directory B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="5d835-256">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="5d835-257">Le risposte di errore si presentano nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="5d835-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="5d835-258">Parametro</span><span class="sxs-lookup"><span data-stu-id="5d835-258">Parameter</span></span> | <span data-ttu-id="5d835-259">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5d835-260">error</span><span class="sxs-lookup"><span data-stu-id="5d835-260">error</span></span> |<span data-ttu-id="5d835-261">Una stringa di codice di errore che è possibile utilizzare i tipi di hello tooclassify di errori che si verificano.</span><span class="sxs-lookup"><span data-stu-id="5d835-261">An error code string that you can use tooclassify hello types of errors that occur.</span></span> <span data-ttu-id="5d835-262">È inoltre possibile utilizzare hello stringa tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="5d835-262">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="5d835-263">error_description</span><span class="sxs-lookup"><span data-stu-id="5d835-263">error_description</span></span> |<span data-ttu-id="5d835-264">Un messaggio di errore specifico che può aiutarti a identificare causa radice di hello di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="5d835-264">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |

## <a name="3-use-hello-token"></a><span data-ttu-id="5d835-265">3. Usare il token di hello</span><span class="sxs-lookup"><span data-stu-id="5d835-265">3. Use hello token</span></span>
<span data-ttu-id="5d835-266">Ora che è stato acquisito un token di accesso, è possibile utilizzare token hello in web back-end tramite tooyour richieste API includendola in hello `Authorization` intestazione:</span><span class="sxs-lookup"><span data-stu-id="5d835-266">Now that you've successfully acquired an access token, you can use hello token in requests tooyour back-end web APIs by including it in hello `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-hello-token"></a><span data-ttu-id="5d835-267">4. Hello token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="5d835-267">4. Refresh hello token</span></span>
<span data-ttu-id="5d835-268">I token di accesso e i token ID hanno breve durata.</span><span class="sxs-lookup"><span data-stu-id="5d835-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="5d835-269">Dopo la scadenza, è necessario aggiornarli toocontinue tooaccess risorse.</span><span class="sxs-lookup"><span data-stu-id="5d835-269">After they expire, you must refresh them toocontinue tooaccess resources.</span></span> <span data-ttu-id="5d835-270">toodo, inviare un altro POST richiesta toohello `/token` endpoint.</span><span class="sxs-lookup"><span data-stu-id="5d835-270">toodo this, submit another POST request toohello `/token` endpoint.</span></span> <span data-ttu-id="5d835-271">Questa volta, fornire hello `refresh_token` anziché hello `code`:</span><span class="sxs-lookup"><span data-stu-id="5d835-271">This time, provide hello `refresh_token` instead of hello `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="5d835-272">.</span><span class="sxs-lookup"><span data-stu-id="5d835-272">Parameter</span></span> | <span data-ttu-id="5d835-273">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="5d835-273">Required?</span></span> | <span data-ttu-id="5d835-274">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="5d835-275">p</span><span class="sxs-lookup"><span data-stu-id="5d835-275">p</span></span> |<span data-ttu-id="5d835-276">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-276">Required</span></span> |<span data-ttu-id="5d835-277">Hello criteri token di aggiornamento utilizzato tooacquire hello originale.</span><span class="sxs-lookup"><span data-stu-id="5d835-277">hello policy that was used tooacquire hello original refresh token.</span></span> <span data-ttu-id="5d835-278">Non è possibile usare un criterio diverso in questa richiesta.</span><span class="sxs-lookup"><span data-stu-id="5d835-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="5d835-279">Si noti che si aggiunge questo toohello parametro *stringa di query*, non nel corpo del POST hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-279">Note that you add this parameter toohello *query string*, not in hello POST body.</span></span> |
| <span data-ttu-id="5d835-280">client_id</span><span class="sxs-lookup"><span data-stu-id="5d835-280">client_id</span></span> |<span data-ttu-id="5d835-281">Consigliato</span><span class="sxs-lookup"><span data-stu-id="5d835-281">Recommended</span></span> |<span data-ttu-id="5d835-282">ID dell'applicazione Hello assegnato app tooyour in hello [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="5d835-282">hello application ID assigned tooyour app in hello [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="5d835-283">grant_type</span><span class="sxs-lookup"><span data-stu-id="5d835-283">grant_type</span></span> |<span data-ttu-id="5d835-284">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-284">Required</span></span> |<span data-ttu-id="5d835-285">tipo di Hello di concessione.</span><span class="sxs-lookup"><span data-stu-id="5d835-285">hello type of grant.</span></span> <span data-ttu-id="5d835-286">Per questo segmento del flusso di codice di autorizzazione hello, deve essere il tipo di concessione di hello `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="5d835-286">For this leg of hello authorization code flow, hello grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="5d835-287">scope</span><span class="sxs-lookup"><span data-stu-id="5d835-287">scope</span></span> |<span data-ttu-id="5d835-288">Consigliato</span><span class="sxs-lookup"><span data-stu-id="5d835-288">Recommended</span></span> |<span data-ttu-id="5d835-289">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="5d835-289">A space-separated list of scopes.</span></span> <span data-ttu-id="5d835-290">Il valore di un singolo ambito indica tooAzure AD entrambi delle autorizzazioni di hello che sono stati richiesti.</span><span class="sxs-lookup"><span data-stu-id="5d835-290">A single scope value indicates tooAzure AD both of hello permissions that are being requested.</span></span> <span data-ttu-id="5d835-291">Utilizzando client hello ID come ambito hello indica che è necessario un token di accesso ai servizi o API web, è possibile utilizzare l'app è rappresentato dal hello stesso ID client.</span><span class="sxs-lookup"><span data-stu-id="5d835-291">Using hello client ID as hello scope indicates that your app needs an access token that can be used against your own service or web API, represented by hello same client ID.</span></span>  <span data-ttu-id="5d835-292">Hello `offline_access` ambito indica che l'app sarà necessario un token di aggiornamento per tooresources di accesso di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="5d835-292">hello `offline_access` scope indicates that your app will need a refresh token for long-lived access tooresources.</span></span>  <span data-ttu-id="5d835-293">È inoltre possibile utilizzare hello `openid` toorequest ambito un ID di token da Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="5d835-293">You also can use hello `openid` scope toorequest an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="5d835-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="5d835-294">redirect_uri</span></span> |<span data-ttu-id="5d835-295">Facoltativo</span><span class="sxs-lookup"><span data-stu-id="5d835-295">Optional</span></span> |<span data-ttu-id="5d835-296">Hello URI di reindirizzamento dell'applicazione hello in cui viene visualizzato il codice di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-296">hello redirect URI of hello application where you received hello authorization code.</span></span> |
| <span data-ttu-id="5d835-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="5d835-297">refresh_token</span></span> |<span data-ttu-id="5d835-298">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="5d835-298">Required</span></span> |<span data-ttu-id="5d835-299">Hello originale token di aggiornamento acquisito nel segmento di secondo hello del flusso di hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-299">hello original refresh token that you acquired in hello second leg of hello flow.</span></span> |

<span data-ttu-id="5d835-300">Una risposta di token con esito positivo ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="5d835-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="5d835-301">Parametro</span><span class="sxs-lookup"><span data-stu-id="5d835-301">Parameter</span></span> | <span data-ttu-id="5d835-302">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5d835-303">not_before</span><span class="sxs-lookup"><span data-stu-id="5d835-303">not_before</span></span> |<span data-ttu-id="5d835-304">ora di Hello al quale hello è considerato valido, in valore epoch token.</span><span class="sxs-lookup"><span data-stu-id="5d835-304">hello time at which hello token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="5d835-305">token_type</span><span class="sxs-lookup"><span data-stu-id="5d835-305">token_type</span></span> |<span data-ttu-id="5d835-306">valore di tipo di token Hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-306">hello token type value.</span></span> <span data-ttu-id="5d835-307">Hello solo il tipo che supporta Azure AD connessione.</span><span class="sxs-lookup"><span data-stu-id="5d835-307">hello only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="5d835-308">access_token</span><span class="sxs-lookup"><span data-stu-id="5d835-308">access_token</span></span> |<span data-ttu-id="5d835-309">Hello firma JWT richiesto.</span><span class="sxs-lookup"><span data-stu-id="5d835-309">hello signed JWT that you requested.</span></span> |
| <span data-ttu-id="5d835-310">scope</span><span class="sxs-lookup"><span data-stu-id="5d835-310">scope</span></span> |<span data-ttu-id="5d835-311">gli ambiti di Hello hello token è valido per.</span><span class="sxs-lookup"><span data-stu-id="5d835-311">hello scopes that hello token is valid for.</span></span> <span data-ttu-id="5d835-312">È inoltre possibile utilizzare i token di hello ambiti toocache per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="5d835-312">You also can use hello scopes toocache tokens for later use.</span></span> |
| <span data-ttu-id="5d835-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="5d835-313">expires_in</span></span> |<span data-ttu-id="5d835-314">durata Hello che hello token è valido (in secondi).</span><span class="sxs-lookup"><span data-stu-id="5d835-314">hello length of time that hello token is valid (in seconds).</span></span> |
| <span data-ttu-id="5d835-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="5d835-315">refresh_token</span></span> |<span data-ttu-id="5d835-316">Token di aggiornamento di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="5d835-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="5d835-317">app Hello è possibile usare questo token aggiuntivi tooacquire token alla scadenza del token corrente hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-317">hello app can use this token tooacquire additional tokens after hello current token expires.</span></span> <span data-ttu-id="5d835-318">Aggiornare i token sono di lunga durati e possono essere utilizzati tooretain accesso tooresources per lunghi periodi di tempo.</span><span class="sxs-lookup"><span data-stu-id="5d835-318">Refresh tokens are long-lived, and can be used tooretain access tooresources for extended periods of time.</span></span> <span data-ttu-id="5d835-319">Per ulteriori informazioni, vedere hello [riferimento del token di Azure Active Directory B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="5d835-319">For more information, see hello [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="5d835-320">Le risposte di errore si presentano nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="5d835-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "hello user revoked access toohello app.",
}
```

| <span data-ttu-id="5d835-321">Parametro</span><span class="sxs-lookup"><span data-stu-id="5d835-321">Parameter</span></span> | <span data-ttu-id="5d835-322">Descrizione</span><span class="sxs-lookup"><span data-stu-id="5d835-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5d835-323">error</span><span class="sxs-lookup"><span data-stu-id="5d835-323">error</span></span> |<span data-ttu-id="5d835-324">Una stringa di codice di errore che è possibile utilizzare tooclassify tipi di errori che si verificano.</span><span class="sxs-lookup"><span data-stu-id="5d835-324">An error code string that you can use tooclassify types of errors that occur.</span></span> <span data-ttu-id="5d835-325">È inoltre possibile utilizzare hello stringa tooreact tooerrors.</span><span class="sxs-lookup"><span data-stu-id="5d835-325">You also can use hello string tooreact tooerrors.</span></span> |
| <span data-ttu-id="5d835-326">error_description</span><span class="sxs-lookup"><span data-stu-id="5d835-326">error_description</span></span> |<span data-ttu-id="5d835-327">Un messaggio di errore specifico che può aiutarti a identificare causa radice di hello di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="5d835-327">A specific error message that can help you identify hello root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="5d835-328">Usare la directory di Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="5d835-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="5d835-329">tootry queste richieste manualmente, hello completo seguendo i passaggi necessari.</span><span class="sxs-lookup"><span data-stu-id="5d835-329">tootry these requests yourself, complete hello following steps.</span></span> <span data-ttu-id="5d835-330">Sostituire i valori di esempio hello che è usata in questo articolo con valori personalizzati.</span><span class="sxs-lookup"><span data-stu-id="5d835-330">Replace hello example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="5d835-331">[Creare una directory Azure AD B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="5d835-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="5d835-332">Utilizzare il nome di hello di directory nelle richieste di hello.</span><span class="sxs-lookup"><span data-stu-id="5d835-332">Use hello name of your directory in hello requests.</span></span>
2. <span data-ttu-id="5d835-333">[Creare un'applicazione](active-directory-b2c-app-registration.md) tooobtain un ID applicazione e un URI di reindirizzamento.</span><span class="sxs-lookup"><span data-stu-id="5d835-333">[Create an application](active-directory-b2c-app-registration.md) tooobtain an application ID and a redirect URI.</span></span> <span data-ttu-id="5d835-334">Includere un client nativo nell'app.</span><span class="sxs-lookup"><span data-stu-id="5d835-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="5d835-335">[Creare i criteri](active-directory-b2c-reference-policies.md) tooobtain i nomi dei criteri.</span><span class="sxs-lookup"><span data-stu-id="5d835-335">[Create your policies](active-directory-b2c-reference-policies.md) tooobtain your policy names.</span></span>

