---
title: aaaSpark BI utilizzando gli strumenti di visualizzazione di dati in Azure HDInsight | Documenti Microsoft
description: Usare gli strumenti di visualizzazione di dati per l'analisi con Apache Spark BI nei cluster HDInsight
keywords: apache spark bi, spark bi, visualizzazione dei dati spark, spark business intelligence
services: hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 1448b536-9bc8-46bc-bbc6-d7001623642a
ms.service: hdinsight
ms.custom: hdinsightactive,hdiseo17may2017
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: nitinme
ms.openlocfilehash: ba4bfff737ce80ffca5c24f1c2c82a1447f467fb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="apache-spark-bi-using-data-visualization-tools-with-azure-hdinsight"></a><span data-ttu-id="f6de5-104">Apache Spark BI usando gli strumenti di visualizzazione di dati con Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="f6de5-104">Apache Spark BI using data visualization tools with Azure HDInsight</span></span>

<span data-ttu-id="f6de5-105">Informazioni su come toouse visualizzazione dei dati degli strumenti come Power BI e Tableau tooanalyze un set di dati di esempio non elaborato con Apache Spark BI nei cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="f6de5-105">Learn how toouse data visualization tools such as Power BI and Tableau tooanalyze a raw sample data set using Apache Spark BI on HDInsight clusters.</span></span>

> [!NOTE]
> <span data-ttu-id="f6de5-106">La connettività con gli strumenti di business intelligence descritta in questo articolo non è supportata su Spark 2.1 in Azure HDInsight 3.6 Preview.</span><span class="sxs-lookup"><span data-stu-id="f6de5-106">Connectivity with BI tools described in this article is not supported on Spark 2.1 on Azure HDInsight 3.6 Preview.</span></span> <span data-ttu-id="f6de5-107">Solo le versioni 1.6 e 2.0 di Spark (HDInsight 3.4 e 3.5 rispettivamente) sono supportate.</span><span class="sxs-lookup"><span data-stu-id="f6de5-107">Only Spark versions 1.6 and 2.0 (HDInsight 3.4, 3.5 respectively) are supported.</span></span>
>

<span data-ttu-id="f6de5-108">Questa esercitazione è disponibile anche come notebook di Jupyter in un cluster Spark HDInsight.</span><span class="sxs-lookup"><span data-stu-id="f6de5-108">This tutorial is also available as a Jupyter notebook on an HDInsight Spark cluster.</span></span> <span data-ttu-id="f6de5-109">esperienza notebook Hello consente di eseguire frammenti di codice Python hello dal blocco appunti hello stesso.</span><span class="sxs-lookup"><span data-stu-id="f6de5-109">hello notebook experience lets you run hello Python snippets from hello notebook itself.</span></span> <span data-ttu-id="f6de5-110">esercitazione di hello tooperform all'interno di un blocco note, creare un cluster Spark, avviare un server Jupyter notebook (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), quindi eseguire notebook hello **strumenti BI di uso con Apache Spark in HDInsight.ipynb** in hello **Python**  cartella.</span><span class="sxs-lookup"><span data-stu-id="f6de5-110">tooperform hello tutorial from within a notebook, create a Spark cluster, launch a Jupyter notebook (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), and then run hello notebook **Use BI tools with Apache Spark on HDInsight.ipynb** under hello **Python** folder.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f6de5-111">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="f6de5-111">Prerequisites</span></span>

* <span data-ttu-id="f6de5-112">Un cluster Apache Spark in HDInsight.</span><span class="sxs-lookup"><span data-stu-id="f6de5-112">An Apache Spark cluster on HDInsight.</span></span> <span data-ttu-id="f6de5-113">Per istruzioni, vedere l'articolo relativo alla [creazione di cluster Apache Spark in Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span><span class="sxs-lookup"><span data-stu-id="f6de5-113">For instructions, see [Create Apache Spark clusters in Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span></span>


## <span data-ttu-id="f6de5-114"><a name="hivetable"></a>Preparare i dati per la visualizzazione dei dati di Spark</span><span class="sxs-lookup"><span data-stu-id="f6de5-114"><a name="hivetable"></a>Prepare data for Spark data visualization</span></span>

<span data-ttu-id="f6de5-115">In questa sezione, utilizziamo hello [Jupyter](https://jupyter.org) notebook da un HDInsight Spark cluster toorun i processi che elaborano i dati di esempio non elaborati e salvarlo come tabella.</span><span class="sxs-lookup"><span data-stu-id="f6de5-115">In this section, we use hello [Jupyter](https://jupyter.org) notebook from an HDInsight Spark cluster toorun jobs that process your raw sample data and save it as a table.</span></span> <span data-ttu-id="f6de5-116">dati di esempio Hello sono un file CSV (hvac.csv) disponibile in tutti i cluster per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="f6de5-116">hello sample data is a .csv file (hvac.csv) available on all clusters by default.</span></span> <span data-ttu-id="f6de5-117">Dopo aver salvati i dati come una tabella, nella sezione successiva di hello è utilizzare BI strumenti tooconnect toohello tabella ed eseguire visualizzazioni dei dati.</span><span class="sxs-lookup"><span data-stu-id="f6de5-117">Once your data is saved as a table, in hello next section we use BI tools tooconnect toohello table and perform data visualizations.</span></span>

> [!NOTE]
> <span data-ttu-id="f6de5-118">Se si sta eseguendo hello passaggi in questo articolo dopo il completamento istruzioni hello [eseguire query interattive in un cluster HDInsight Spark](hdinsight-apache-spark-load-data-run-query.md), è possibile ignorare tooStep 8 riportato di seguito.</span><span class="sxs-lookup"><span data-stu-id="f6de5-118">If you are performing hello steps in this article after completing hello instructions in [Run interactive queries on an HDInsight Spark cluster](hdinsight-apache-spark-load-data-run-query.md), you can skip tooStep 8 below.</span></span>
>

1. <span data-ttu-id="f6de5-119">Da hello [portale di Azure](https://portal.azure.com/), dalla schermata iniziale di hello, fare clic sul riquadro hello per il cluster Spark (se è stato aggiunto, schermata iniziale di toohello).</span><span class="sxs-lookup"><span data-stu-id="f6de5-119">From hello [Azure portal](https://portal.azure.com/), from hello startboard, click hello tile for your Spark cluster (if you pinned it toohello startboard).</span></span> <span data-ttu-id="f6de5-120">È inoltre possibile navigare cluster tooyour **Esplora tutto** > **cluster HDInsight**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-120">You can also navigate tooyour cluster under **Browse All** > **HDInsight Clusters**.</span></span>   

2. <span data-ttu-id="f6de5-121">Dal Pannello di cluster Spark hello, fare clic su **Dashboard Cluster**, quindi fare clic su **server Jupyter Notebook**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-121">From hello Spark cluster blade, click **Cluster Dashboard**, and then click **Jupyter Notebook**.</span></span> <span data-ttu-id="f6de5-122">Se richiesto, immettere le credenziali di amministratore hello cluster hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-122">If prompted, enter hello admin credentials for hello cluster.</span></span>

   > [!NOTE]
   > <span data-ttu-id="f6de5-123">È anche possibile raggiungere hello server Jupyter Notebook per il cluster usando hello apertura URL seguente nel browser.</span><span class="sxs-lookup"><span data-stu-id="f6de5-123">You may also reach hello Jupyter Notebook for your cluster by opening hello following URL in your browser.</span></span> <span data-ttu-id="f6de5-124">Sostituire **CLUSTERNAME** con nome hello del cluster:</span><span class="sxs-lookup"><span data-stu-id="f6de5-124">Replace **CLUSTERNAME** with hello name of your cluster:</span></span>
   >
   > `https://CLUSTERNAME.azurehdinsight.net/jupyter`
   >
   >

3. <span data-ttu-id="f6de5-125">Creare un notebook.</span><span class="sxs-lookup"><span data-stu-id="f6de5-125">Create a notebook.</span></span> <span data-ttu-id="f6de5-126">Fare clic su **Nuovo** e quindi su **PySpark**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-126">Click **New**, and then click **PySpark**.</span></span>

    <span data-ttu-id="f6de5-127">![Creare un notebook di Jupyter per Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Creare un notebook di Jupyter per Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-127">![Create a Jupyter notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Create a Jupyter notebook for Apache Spark BI")</span></span>

4. <span data-ttu-id="f6de5-128">Un nuovo blocco appunti viene creato e aperto con il nome di hello Untitled.pynb.</span><span class="sxs-lookup"><span data-stu-id="f6de5-128">A new notebook is created and opened with hello name Untitled.pynb.</span></span> <span data-ttu-id="f6de5-129">Fare clic sul nome di blocco per Appunti hello nella parte superiore di hello e immettere un nome descrittivo.</span><span class="sxs-lookup"><span data-stu-id="f6de5-129">Click hello notebook name at hello top, and enter a friendly name.</span></span>

    <span data-ttu-id="f6de5-130">![Specificare un nome per notebook hello per Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "specificare un nome per notebook hello per Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-130">![Provide a name for hello notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "Provide a name for hello notebook for Apache Spark BI")</span></span>

5. <span data-ttu-id="f6de5-131">Poiché è stato creato un notebook utilizza il kernel PySpark hello, non è necessario toocreate i contesti in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="f6de5-131">Because you created a notebook using hello PySpark kernel, you do not need toocreate any contexts explicitly.</span></span> <span data-ttu-id="f6de5-132">contesti di Spark e Hive Hello vengono automaticamente creati automaticamente quando si esegue prima cella di codice hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-132">hello Spark and Hive contexts are automatically created for you when you run hello first code cell.</span></span> <span data-ttu-id="f6de5-133">È possibile avviare l'importazione di tipi di hello necessari per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="f6de5-133">You can start by importing hello types required for this scenario.</span></span> <span data-ttu-id="f6de5-134">toodo in tal caso, posizionare il cursore hello nella cella hello e premere **MAIUSC + INVIO**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-134">toodo so, place hello cursor in hello cell and press **SHIFT + ENTER**.</span></span>

        from pyspark.sql import *

6. <span data-ttu-id="f6de5-135">Caricare i dati di esempio in una tabella temporanea.</span><span class="sxs-lookup"><span data-stu-id="f6de5-135">Load sample data into a temporary table.</span></span> <span data-ttu-id="f6de5-136">Quando si crea un cluster Spark in HDInsight, file di dati di esempio hello, **hvac.csv**, account di archiviazione toohello copiato associata in **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-136">When you create a Spark cluster in HDInsight, hello sample data file, **hvac.csv**, is copied toohello associated storage account under **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span></span>

    <span data-ttu-id="f6de5-137">In una cella vuota, incollare l'esempio hello frammento e premere **MAIUSC + INVIO**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-137">In an empty cell, paste hello following snippet and press **SHIFT + ENTER**.</span></span> <span data-ttu-id="f6de5-138">Questo frammento di codice registra dati hello in una tabella denominata **impianto**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-138">This snippet registers hello data into a table called **hvac**.</span></span>

        # Create an RDD from sample data
        hvacText = sc.textFile("wasb:///HdiSamples/HdiSamples/SensorSampleData/hvac/HVAC.csv")

        # Create a schema for our data
        Entry = Row('Date', 'Time', 'TargetTemp', 'ActualTemp', 'BuildingID')

        # Parse hello data and create a schema
        hvacParts = hvacText.map(lambda s: s.split(',')).filter(lambda s: s[0] != 'Date')
        hvac = hvacParts.map(lambda p: Entry(str(p[0]), str(p[1]), int(p[2]), int(p[3]), int(p[6])))

        # Infer hello schema and create a table       
        hvacTable = sqlContext.createDataFrame(hvac)
        hvacTable.registerTempTable('hvactemptable')
        dfw = DataFrameWriter(hvacTable)
        dfw.saveAsTable('hvac')

7. <span data-ttu-id="f6de5-139">Verificare che la tabella hello creata correttamente.</span><span class="sxs-lookup"><span data-stu-id="f6de5-139">Verify that hello table was successfully created.</span></span> <span data-ttu-id="f6de5-140">È possibile utilizzare hello `%%sql` particolare query Hive toorun direttamente.</span><span class="sxs-lookup"><span data-stu-id="f6de5-140">You can use hello `%%sql` magic toorun Hive queries directly.</span></span> <span data-ttu-id="f6de5-141">Per ulteriori informazioni su hello `%%sql` magic e altri magics disponibili con kernel PySpark hello, vedere [kernel disponibile sui server Jupyter notebook con i cluster HDInsight Spark](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span><span class="sxs-lookup"><span data-stu-id="f6de5-141">For more information about hello `%%sql` magic, and other magics available with hello PySpark kernel, see [Kernels available on Jupyter notebooks with Spark HDInsight clusters](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span></span>

        %%sql
        SHOW TABLES

    <span data-ttu-id="f6de5-142">Viene visualizzato un output come il seguente:</span><span class="sxs-lookup"><span data-stu-id="f6de5-142">You see an output like shown below:</span></span>

        +---------------+-------------+
        |tableName      |isTemporary  |
        +---------------+-------------+
        |hvactemptable  |true        |
        |hivesampletable|false        |
        |hvac           |false        |
        +---------------+-------------+

    <span data-ttu-id="f6de5-143">Hello solo le tabelle che presentano FALSO in hello **isTemporary** colonna sono tabelle hive archiviate in metastore hello e sono accessibili da strumenti di Business Intelligence hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-143">Only hello tables that have false under hello **isTemporary** column are hive tables that are stored in hello metastore and can be accessed from hello BI tools.</span></span> <span data-ttu-id="f6de5-144">In questa esercitazione, la connessione è toohello **impianto** tabella creata.</span><span class="sxs-lookup"><span data-stu-id="f6de5-144">In this tutorial, we connect toohello **hvac** table we created.</span></span>

8. <span data-ttu-id="f6de5-145">Verificare che la tabella hello contiene dati di hello destinato.</span><span class="sxs-lookup"><span data-stu-id="f6de5-145">Verify that hello table contains hello intended data.</span></span> <span data-ttu-id="f6de5-146">In una cella vuota in blocco per Appunti hello, copiare l'esempio hello frammento e premere **MAIUSC + INVIO**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-146">In an empty cell in hello notebook, copy hello following snippet and press **SHIFT + ENTER**.</span></span>

        %%sql
        SELECT * FROM hvac LIMIT 10

9. <span data-ttu-id="f6de5-147">Arresto delle hello notebook toorelease hello risorse.</span><span class="sxs-lookup"><span data-stu-id="f6de5-147">Shut down hello notebook toorelease hello resources.</span></span> <span data-ttu-id="f6de5-148">toodo in questo caso, da hello **File** menu notebook hello, fare clic su **chiudere e interrompere**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-148">toodo so, from hello **File** menu on hello notebook, click **Close and Halt**.</span></span>

## <span data-ttu-id="f6de5-149"><a name="powerbi"></a>Usare Power BI per la visualizzazione dei dati di Spark</span><span class="sxs-lookup"><span data-stu-id="f6de5-149"><a name="powerbi"></a>Use Power BI for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="f6de5-150">Questa sezione è applicabile solo a Spark 1.6 in HDInsight 3.4 e Spark 2.0 in HDInsight 3.5.</span><span class="sxs-lookup"><span data-stu-id="f6de5-150">This section is applicable only for Spark 1.6 on HDInsight 3.4 and Spark 2.0 on HDInsight 3.5.</span></span>
>
>

<span data-ttu-id="f6de5-151">Dopo aver salvato i dati di hello come una tabella, è possibile utilizzare i dati di Power BI tooconnect toohello e visualizzarla toocreate report, dashboard e così via.</span><span class="sxs-lookup"><span data-stu-id="f6de5-151">Once you have saved hello data as a table, you can use Power BI tooconnect toohello data and visualize it toocreate reports, dashboards, etc.</span></span>

1. <span data-ttu-id="f6de5-152">Assicurarsi di avere accesso tooPower BI.</span><span class="sxs-lookup"><span data-stu-id="f6de5-152">Make sure you have access tooPower BI.</span></span> <span data-ttu-id="f6de5-153">È possibile ottenere una sottoscrizione di anteprima gratuita di Power BI da [http://www.powerbi.com/](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="f6de5-153">You can get a free preview subscription of Power BI from [http://www.powerbi.com/](http://www.powerbi.com/).</span></span>

2. <span data-ttu-id="f6de5-154">Accedi troppo[Power BI](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="f6de5-154">Sign in too[Power BI](http://www.powerbi.com/).</span></span>

3. <span data-ttu-id="f6de5-155">Dal basso hello del riquadro di sinistra hello, fare clic su **recupera dati**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-155">From hello bottom of hello left pane, click **Get Data**.</span></span>

4. <span data-ttu-id="f6de5-156">In hello **recupera dati** pagina **importare o connettersi tooData**, per **database**, fare clic su **ottenere**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-156">On hello **Get Data** page, under **Import or Connect tooData**, for **Databases**, click **Get**.</span></span>

    <span data-ttu-id="f6de5-157">![Ottenere i dati in Power BI per Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Ottenere i dati in Power BI per Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-157">![Get data into Power BI for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Get data into Power BI for Apache Spark BI")</span></span>

5. <span data-ttu-id="f6de5-158">Nella schermata successiva hello, fare clic su **Spark in HDInsight** e quindi fare clic su **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-158">On hello next screen, click **Spark on Azure HDInsight** and then click **Connect**.</span></span> <span data-ttu-id="f6de5-159">Quando richiesto, immettere l'URL del cluster hello (`mysparkcluster.azurehdinsight.net`) e hello credenziali tooconnect toohello cluster.</span><span class="sxs-lookup"><span data-stu-id="f6de5-159">When prompted, enter hello cluster URL (`mysparkcluster.azurehdinsight.net`) and hello credentials tooconnect toohello cluster.</span></span>

    <span data-ttu-id="f6de5-160">![Connessione BI Spark tooApache](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "connettersi tooApache BI Spark")</span><span class="sxs-lookup"><span data-stu-id="f6de5-160">![Connect tooApache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "Connect tooApache Spark BI")</span></span>

    <span data-ttu-id="f6de5-161">Dopo aver stabilita la connessione hello, Power BI viene avviata l'importazione di dati dal cluster di hello Spark in HDInsight.</span><span class="sxs-lookup"><span data-stu-id="f6de5-161">After hello connection is established, Power BI starts importing data from hello Spark cluster on HDInsight.</span></span>

6. <span data-ttu-id="f6de5-162">Power BI Importa i dati hello e aggiunge un **Spark** set di dati in hello **set di dati** intestazione.</span><span class="sxs-lookup"><span data-stu-id="f6de5-162">Power BI imports hello data and adds a **Spark** dataset under hello **Datasets** heading.</span></span> <span data-ttu-id="f6de5-163">Fare clic su set di dati di hello tooopen un nuovi dati hello toovisualize di foglio di lavoro.</span><span class="sxs-lookup"><span data-stu-id="f6de5-163">Click hello data set tooopen a new worksheet toovisualize hello data.</span></span> <span data-ttu-id="f6de5-164">È inoltre possibile salvare il foglio di lavoro hello come un report.</span><span class="sxs-lookup"><span data-stu-id="f6de5-164">You can also save hello worksheet as a report.</span></span> <span data-ttu-id="f6de5-165">un foglio di lavoro, da hello toosave **File** menu, fare clic su **salvare**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-165">toosave a worksheet, from hello **File** menu, click **Save**.</span></span>

    <span data-ttu-id="f6de5-166">![Riquadro di Apache Spark BI nel dashboard di Power BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Riquadro di Apache Spark BI nel dashboard di Power BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-166">![Apache Spark BI tile on Power BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Apache Spark BI tile on Power BI dashboard")</span></span>
7. <span data-ttu-id="f6de5-167">Si noti che hello **campi** elenco sulla destra hello Elenca hello **impianto** tabella creata in precedenza.</span><span class="sxs-lookup"><span data-stu-id="f6de5-167">Notice that hello **Fields** list on hello right lists hello **hvac** table you created earlier.</span></span> <span data-ttu-id="f6de5-168">Espandere hello tabella toosee hello campi hello tabella, come definito in precedenza nel blocco note.</span><span class="sxs-lookup"><span data-stu-id="f6de5-168">Expand hello table toosee hello fields in hello table, as you defined in notebook earlier.</span></span>

      <span data-ttu-id="f6de5-169">![Elencare le tabelle nel dashboard di Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "Elencare le tabelle nel dashboard di Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-169">![List tables on Apache Spark BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "List tables on Apache Spark BI dashboard")</span></span>

8. <span data-ttu-id="f6de5-170">Compilare una varianza di hello tooshow visualizzazione tra temperatura di destinazione e la temperatura effettiva per ogni compilazione.</span><span class="sxs-lookup"><span data-stu-id="f6de5-170">Build a visualization tooshow hello variance between target temperature and actual temperature for each building.</span></span> <span data-ttu-id="f6de5-171">Selezionare i dati di dispositivo toovisualize, **grafico ad Area** (mostrati in una casella rossa).</span><span class="sxs-lookup"><span data-stu-id="f6de5-171">toovisualize yoru data, select **Area Chart** (shown in red box).</span></span> <span data-ttu-id="f6de5-172">asse hello toodefine, trascinamento e rilascio hello **BuildingID** campo **asse**, e **ActualTemp**/**TargetTemp** i campi in **valore**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-172">toodefine hello axis, drag-and-drop hello **BuildingID** field under **Axis**, and **ActualTemp**/**TargetTemp** fields under **Value**.</span></span>

    <span data-ttu-id="f6de5-173">![Creare le visualizzazioni di dati usando Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Creare le visualizzazioni di dati usando Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-173">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Create Spark data visualizations using Apache Spark BI")</span></span>

9. <span data-ttu-id="f6de5-174">Per impostazione predefinita, la visualizzazione hello Mostra somma hello per **ActualTemp** e **TargetTemp**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-174">By default hello visualization shows hello sum for **ActualTemp** and **TargetTemp**.</span></span> <span data-ttu-id="f6de5-175">Per entrambi hello campi da hello elenco a discesa, selezionare **Media** tooget una media di effettivo e la temperatura di destinazione per entrambi gli edifici.</span><span class="sxs-lookup"><span data-stu-id="f6de5-175">For both hello fields, from hello drop-down, select **Average** tooget an average of actual and target temperatures for both buildings.</span></span>

    <span data-ttu-id="f6de5-176">![Creare le visualizzazioni di dati usando Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Creare le visualizzazioni di dati usando Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-176">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Create Spark data visualizations using Apache Spark BI")</span></span>

10. <span data-ttu-id="f6de5-177">La visualizzazione di dati deve essere simile toohello uno nella schermata di hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-177">Your data visualization should be similar toohello one in hello screenshot.</span></span> <span data-ttu-id="f6de5-178">Sposta il cursore sopra hello visualizzazione tooget descrizioni con i dati pertinenti.</span><span class="sxs-lookup"><span data-stu-id="f6de5-178">Move your cursor over hello visualization tooget tool tips with relevant data.</span></span>

    <span data-ttu-id="f6de5-179">![Creare le visualizzazioni di dati usando Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Creare le visualizzazioni di dati usando Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-179">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Create Spark data visualizations using Apache Spark BI")</span></span>

11. <span data-ttu-id="f6de5-180">Fare clic su **salvare** da hello menu principali e specificare un nome di report.</span><span class="sxs-lookup"><span data-stu-id="f6de5-180">Click **Save** from hello top menu and provide a report name.</span></span> <span data-ttu-id="f6de5-181">È anche possibile aggiungere visual hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-181">You can also pin hello visual.</span></span> <span data-ttu-id="f6de5-182">Quando si aggiunge una visualizzazione, viene archiviata nel dashboard è possibile registrare l'ultimo valore di hello a colpo d'occhio.</span><span class="sxs-lookup"><span data-stu-id="f6de5-182">When you pin a visualization, it is stored on your dashboard so you can track hello latest value at a glance.</span></span>

   <span data-ttu-id="f6de5-183">È possibile aggiungere visualizzazioni tante desiderato per hello stesso set di dati, per poi aggiungerli toohello dashboard per uno snapshot dei dati.</span><span class="sxs-lookup"><span data-stu-id="f6de5-183">You can add as many visualizations as you want for hello same dataset and pin them toohello dashboard for a snapshot of your data.</span></span> <span data-ttu-id="f6de5-184">Inoltre, cluster Spark in HDInsight sono connessi tooPower BI con direct connettersi.</span><span class="sxs-lookup"><span data-stu-id="f6de5-184">Also, Spark clusters on HDInsight are connected tooPower BI with direct connect.</span></span> <span data-ttu-id="f6de5-185">In questo modo si garantisce che Power BI ha sempre hello la maggior parte dei dati aggiornati dal cluster non è necessario per set di dati hello tooschedule aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="f6de5-185">This ensures that Power BI always has hello most up-to-date data from your cluster so you do not need tooschedule refreshes for hello dataset.</span></span>

## <span data-ttu-id="f6de5-186"><a name="tableau"></a>Usare Tableau Desktop per la visualizzazione dei dati Spark</span><span class="sxs-lookup"><span data-stu-id="f6de5-186"><a name="tableau"></a>Use Tableau Desktop for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="f6de5-187">Questa sezione è applicabile solo per i cluster Spark 1.5.2 creati in Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="f6de5-187">This section is applicable only for Spark 1.5.2 clusters created in Azure HDInsight.</span></span>
>
>

1. <span data-ttu-id="f6de5-188">Installare [Tableau Desktop](http://www.tableau.com/products/desktop) computer hello in cui si esegue questa esercitazione Apache Spark BI.</span><span class="sxs-lookup"><span data-stu-id="f6de5-188">Install [Tableau Desktop](http://www.tableau.com/products/desktop) on hello computer where you are running this Apache Spark BI tutorial.</span></span>

2. <span data-ttu-id="f6de5-189">Assicurarsi che nel computer sia installato un driver ODBC di Microsoft Spark.</span><span class="sxs-lookup"><span data-stu-id="f6de5-189">Make sure that computer also has Microsoft Spark ODBC driver installed.</span></span> <span data-ttu-id="f6de5-190">È possibile installare il driver hello [qui](http://go.microsoft.com/fwlink/?LinkId=616229).</span><span class="sxs-lookup"><span data-stu-id="f6de5-190">You can install hello driver from [here](http://go.microsoft.com/fwlink/?LinkId=616229).</span></span>

1. <span data-ttu-id="f6de5-191">Avviare Tableau Desktop.</span><span class="sxs-lookup"><span data-stu-id="f6de5-191">Launch Tableau Desktop.</span></span> <span data-ttu-id="f6de5-192">Nel riquadro di sinistra hello, dall'elenco di hello del server tooconnect, fare clic su **Spark SQL**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-192">In hello left pane, from hello list of server tooconnect to, click **Spark SQL**.</span></span> <span data-ttu-id="f6de5-193">Se Spark SQL non è elencata per impostazione predefinita nel riquadro di sinistra hello, sarà possibile trovarlo tramite clic **più server**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-193">If Spark SQL is not listed by default in hello left pane, you can find it by click **More Servers**.</span></span>
2. <span data-ttu-id="f6de5-194">Nella casella di dialogo connessione Spark SQL hello, fornire i valori di hello, come illustrato nella schermata di hello e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-194">In hello Spark SQL connection dialog box, provide hello values as shown in hello screenshot, and then click **OK**.</span></span>

    <span data-ttu-id="f6de5-195">![Connetti tooa cluster per Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "cluster tooa Connetti per Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-195">![Connect tooa cluster for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "Connect tooa cluster for Apache Spark BI")</span></span>

    <span data-ttu-id="f6de5-196">elenchi a discesa autenticazione Hello **servizio di Microsoft Azure HDInsight** come opzione, solo se è installato hello [Driver ODBC di Microsoft Spark](http://go.microsoft.com/fwlink/?LinkId=616229) computer hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-196">hello authentication drop-down lists **Microsoft Azure HDInsight Service** as an option, only if you installed hello [Microsoft Spark ODBC Driver](http://go.microsoft.com/fwlink/?LinkId=616229) on hello computer.</span></span>
3. <span data-ttu-id="f6de5-197">Nella schermata successiva hello da hello **Schema** elenco a discesa, fare clic su hello **trovare** icona e quindi fare clic su **predefinito**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-197">On hello next screen, from hello **Schema** drop-down, click hello **Find** icon, and then click **default**.</span></span>

    <span data-ttu-id="f6de5-198">![Trovare lo schema per Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Trovare lo schema per Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-198">![Find schema for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Find schema for Apache Spark BI")</span></span>
4. <span data-ttu-id="f6de5-199">Per hello **tabella** campo, fare clic su hello **trovare** sull'icona Nuovo toolist tutti hello Hive tabelle disponibili nel cluster hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-199">For hello **Table** field, click hello **Find** icon again toolist all hello Hive tables available in hello cluster.</span></span> <span data-ttu-id="f6de5-200">Dovrebbe essere hello **impianto** tabella creata in precedenza mediante blocco note hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-200">You should see hello **hvac** table you created earlier using hello notebook.</span></span>

    <span data-ttu-id="f6de5-201">![Trovare la tabella per Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Trovare la tabella per Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-201">![Find table for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Find table for Apache Spark BI")</span></span>
5. <span data-ttu-id="f6de5-202">Trascinare e rilasciare hello tabella toohello superiore casella hello destra.</span><span class="sxs-lookup"><span data-stu-id="f6de5-202">Drag and drop hello table toohello top box on hello right.</span></span> <span data-ttu-id="f6de5-203">Tableau Importa dati hello e schema hello viene visualizzato come evidenziato nella finestra hello rosso.</span><span class="sxs-lookup"><span data-stu-id="f6de5-203">Tableau imports hello data and displays hello schema as highlighted by hello red box.</span></span>

    <span data-ttu-id="f6de5-204">![Aggiungere tabelle tooTableau per Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "aggiungere tabelle tooTableau per Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f6de5-204">![Add tables tooTableau for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "Add tables tooTableau for Apache Spark BI")</span></span>
6. <span data-ttu-id="f6de5-205">Fare clic su hello **Sheet1** scheda in basso a sinistra di hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-205">Click hello **Sheet1** tab at hello bottom left.</span></span> <span data-ttu-id="f6de5-206">Rendere una visualizzazione che mostra le temperature effettivi per tutti gli edifici e destinazione medio hello per ogni data.</span><span class="sxs-lookup"><span data-stu-id="f6de5-206">Make a visualization that shows hello average target and actual temperatures for all buildings for each date.</span></span> <span data-ttu-id="f6de5-207">Trascinare **data** e **ID compilazione** troppo**colonne** e **Temp effettivo**/**destinazione Temp**troppo**righe**.</span><span class="sxs-lookup"><span data-stu-id="f6de5-207">Drag **Date** and **Building ID** too**Columns** and **Actual Temp**/**Target Temp** too**Rows**.</span></span> <span data-ttu-id="f6de5-208">In **segni**selezionare **Area** toouse una mappa dell'area di visualizzazione dei dati Spark.</span><span class="sxs-lookup"><span data-stu-id="f6de5-208">Under **Marks**, select **Area** toouse an area map for Spark data visualization.</span></span>

     <span data-ttu-id="f6de5-209">![Aggiungere campi per la visualizzazione dei dati Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Aggiungere campi per la visualizzazione dei dati Spark")</span><span class="sxs-lookup"><span data-stu-id="f6de5-209">![Add fields for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Add fields for Spark data visualization")</span></span>
7. <span data-ttu-id="f6de5-210">Per impostazione predefinita, vengono visualizzati i campi di temperatura di hello come aggregazione.</span><span class="sxs-lookup"><span data-stu-id="f6de5-210">By default, hello temperature fields are shown as aggregate.</span></span> <span data-ttu-id="f6de5-211">Se si desidera invece temperature di hello tooshow, è possibile farlo discesa hello, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="f6de5-211">If you want tooshow hello average temperatures instead, you can do so from hello drop-down, as shown below.</span></span>

    <span data-ttu-id="f6de5-212">![Eseguire la media della temperatura per la visualizzazione dei dati Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Eseguire la media della temperatura per la visualizzazione dei dati Spark")</span><span class="sxs-lookup"><span data-stu-id="f6de5-212">![Take average of temperature for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Take average of temperature for Spark data visualization")</span></span>

8. <span data-ttu-id="f6de5-213">È anche possibile super-imporre una mappa di temperatura hello in altri tooget meglio della differenza tra le temperature effettive e di destinazione.</span><span class="sxs-lookup"><span data-stu-id="f6de5-213">You can also super-impose one temperature map over hello other tooget a better feel of difference between target and actual temperatures.</span></span> <span data-ttu-id="f6de5-214">Spostare l'angolo di toohello mouse hello della mappa area inferiore hello fino a visualizzare hello handle forma evidenziato in un cerchio rosso.</span><span class="sxs-lookup"><span data-stu-id="f6de5-214">Move hello mouse toohello corner of hello lower area map till you see hello handle shape highlighted in a red circle.</span></span> <span data-ttu-id="f6de5-215">Trascinare hello mappa toohello altra mappa hello top e versione hello mouse quando viene visualizzato a forma di hello evidenziato nel rettangolo rosso.</span><span class="sxs-lookup"><span data-stu-id="f6de5-215">Drag hello map toohello other map on hello top and release hello mouse when you see hello shape highlighted in red rectangle.</span></span>

    <span data-ttu-id="f6de5-216">![Unire mappe per la visualizzazione dei dati Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Unire mappe per la visualizzazione dei dati Spark")</span><span class="sxs-lookup"><span data-stu-id="f6de5-216">![Merge maps for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Merge maps for Spark data visualization")</span></span>

     <span data-ttu-id="f6de5-217">Come illustrato nella schermata di hello, occorre modificare la visualizzazione di dati:</span><span class="sxs-lookup"><span data-stu-id="f6de5-217">Your data visualization should change as shown in hello screenshot:</span></span>

    <span data-ttu-id="f6de5-218">![Output di Tableau per la visualizzazione dei dati Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Output di Tableau per la visualizzazione dei dati Spark")</span><span class="sxs-lookup"><span data-stu-id="f6de5-218">![Tableau output for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Tableau output for Spark data visualization")</span></span>
9. <span data-ttu-id="f6de5-219">Fare clic su **salvare** foglio di lavoro toosave hello.</span><span class="sxs-lookup"><span data-stu-id="f6de5-219">Click **Save** toosave hello worksheet.</span></span> <span data-ttu-id="f6de5-220">È possibile creare dashboard e aggiungere uno o più tooit fogli.</span><span class="sxs-lookup"><span data-stu-id="f6de5-220">You can create dashboards and add one or more sheets tooit.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f6de5-221">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="f6de5-221">Next steps</span></span>

<span data-ttu-id="f6de5-222">Finora è stato descritto come creare dati di Spark tooquery di frame toocreate un cluster e quindi accedere ai dati da strumenti di Business Intelligence.</span><span class="sxs-lookup"><span data-stu-id="f6de5-222">So far you learned how toocreate a cluster, create Spark data frames tooquery data, and then access that data from BI tools.</span></span> <span data-ttu-id="f6de5-223">È ora possibile esaminare le istruzioni su come toomanage hello risorse cluster e il debug di processi in esecuzione in un cluster HDInsight Spark.</span><span class="sxs-lookup"><span data-stu-id="f6de5-223">You can now look at instructions on how toomanage hello cluster resources and debug jobs that are running in an HDInsight Spark cluster.</span></span>

* [<span data-ttu-id="f6de5-224">Gestire le risorse di cluster di hello Apache Spark in HDInsight di Azure</span><span class="sxs-lookup"><span data-stu-id="f6de5-224">Manage resources for hello Apache Spark cluster in Azure HDInsight</span></span>](hdinsight-apache-spark-resource-manager.md)
* [<span data-ttu-id="f6de5-225">Tenere traccia ed eseguire il debug di processi in esecuzione nel cluster Apache Spark in Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="f6de5-225">Track and debug jobs running on an Apache Spark cluster in HDInsight</span></span>](hdinsight-apache-spark-job-debugging.md)

