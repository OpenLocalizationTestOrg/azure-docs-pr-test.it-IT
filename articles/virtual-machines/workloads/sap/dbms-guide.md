---
title: Distribuzione di DBMS in macchine virtuali di Azure per SAP NetWeaver | Microsoft Docs
description: Distribuzione di DBMS in macchine virtuali di Azure per SAP NetWeaver
services: virtual-machines-linux,virtual-machines-windows
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: 5654dac7-4204-4387-b312-3d8b2898eb3a
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 1046d32a0b4b6ede027ef1931314a188c64c94bb
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="azure-virtual-machines-dbms-deployment-for-sap-netweaver"></a><span data-ttu-id="d98ef-103">Distribuzione di DBMS in macchine virtuali di Azure per SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="d98ef-103">Azure Virtual Machines DBMS deployment for SAP NetWeaver</span></span>
[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
[1114181]:https://launchpad.support.sap.com/#/notes/1114181
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
[1409604]:https://launchpad.support.sap.com/#/notes/1409604
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
[1619720]:https://launchpad.support.sap.com/#/notes/1619720
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
[1928533]:https://launchpad.support.sap.com/#/notes/1928533
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
[1984787]:https://launchpad.support.sap.com/#/notes/1984787
[1999351]:https://launchpad.support.sap.com/#/notes/1999351
[2002167]:https://launchpad.support.sap.com/#/notes/2002167
[2015553]:https://launchpad.support.sap.com/#/notes/2015553
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2069760]:https://launchpad.support.sap.com/#/notes/2069760
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
[2171857]:https://launchpad.support.sap.com/#/notes/2171857
[2178632]:https://launchpad.support.sap.com/#/notes/2178632
[2191498]:https://launchpad.support.sap.com/#/notes/2191498
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
[2243692]:https://launchpad.support.sap.com/#/notes/2243692

[azure-cli]:../../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:dbms-guide.md 
[dbms-guide-2.1]:dbms-guide.md#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f 
[dbms-guide-2.2]:dbms-guide.md#c8e566f9-21b7-4457-9f7f-126036971a91 
[dbms-guide-2.3]:dbms-guide.md#10b041ef-c177-498a-93ed-44b3441ab152 
[dbms-guide-2]:dbms-guide.md#65fa79d6-a85f-47ee-890b-22e794f51a64 
[dbms-guide-3]:dbms-guide.md#871dfc27-e509-4222-9370-ab1de77021c3 
[dbms-guide-5.5.1]:dbms-guide.md#0fef0e79-d3fe-4ae2-85af-73666a6f7268 
[dbms-guide-5.5.2]:dbms-guide.md#f9071eff-9d72-4f47-9da4-1852d782087b 
[dbms-guide-5.6]:dbms-guide.md#1b353e38-21b3-4310-aeb6-a77e7c8e81c8 
[dbms-guide-5.8]:dbms-guide.md#9053f720-6f3b-4483-904d-15dc54141e30 
[dbms-guide-5]:dbms-guide.md#3264829e-075e-4d25-966e-a49dad878737 
[dbms-guide-8.4.1]:dbms-guide.md#b48cfe3b-48e9-4f5b-a783-1d29155bd573 
[dbms-guide-8.4.2]:dbms-guide.md#23c78d3b-ca5a-4e72-8a24-645d141a3f5d 
[dbms-guide-8.4.3]:dbms-guide.md#77cd2fbb-307e-4cbf-a65f-745553f72d2c 
[dbms-guide-8.4.4]:dbms-guide.md#f77c1436-9ad8-44fb-a331-8671342de818 
[dbms-guide-900-sap-cache-server-on-premises]:dbms-guide.md#642f746c-e4d4-489d-bf63-73e80177a0a8
[dbms-guide-managed-disks]:dbms-guide.md#f42c6cb5-d563-484d-9667-b07ae51bce29

[dbms-guide-figure-100]:media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:deployment-guide.md 
[deployment-guide-2.2]:deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94 
[deployment-guide-3.1.2]:deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab 
[deployment-guide-3.2]:deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281 
[deployment-guide-3.3]:deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2 
[deployment-guide-3.4]:deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1 
[deployment-guide-3]:deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e 
[deployment-guide-4.1]:deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7 
[deployment-guide-4.2]:deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e 
[deployment-guide-4.3]:deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc 
[deployment-guide-4.4.2]:deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542 
[deployment-guide-4.4]:deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d 
[deployment-guide-4.5.1]:deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4 
[deployment-guide-4.5.2]:deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f 
[deployment-guide-4.5]:deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca 
[deployment-guide-5.1]:deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2 
[deployment-guide-5.2]:deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1
[deployment-guide-5.3]:deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8 

[deployment-guide-configure-monitoring-scenario-1]:deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b 
[deployment-guide-configure-proxy]:deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d 
[deployment-guide-figure-100]:media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:deployment-guide.md#figure-11
[deployment-guide-figure-1100]:media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:deployment-guide.md#figure-14
[deployment-guide-figure-1400]:media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:deployment-guide.md#figure-5
[deployment-guide-figure-50]:media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:deployment-guide.md#figure-6
[deployment-guide-figure-600]:media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:deployment-guide.md#figure-7
[deployment-guide-figure-700]:media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b

[deploy-template-cli]:../../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:get-started.md
[getting-started-dbms]:get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:planning-guide.md 
[planning-guide-1.2]:planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff 
[planning-guide-11]:planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058 
[planning-guide-11.4.1]:planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77 
[planning-guide-11.5]:planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f 
[planning-guide-2.1]:planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803 
[planning-guide-2.2]:planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10 
[planning-guide-3.1]:planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a 
[planning-guide-3.2.1]:planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358 
[planning-guide-3.2.2]:planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560 
[planning-guide-3.2.3]:planning-guide.md#18810088-f9be-4c97-958a-27996255c665 
[planning-guide-3.2]:planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77 
[planning-guide-3.3.2]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 
[planning-guide-5.1.1]:planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53 
[planning-guide-5.1.2]:planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c 
[planning-guide-5.2.1]:planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef 
[planning-guide-5.2.2]:planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3 
[planning-guide-5.2]:planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7 
[planning-guide-5.3.1]:planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79 
[planning-guide-5.3.2]:planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a 
[planning-guide-5.4.2]:planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1 
[planning-guide-5.5.1]:planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646 
[planning-guide-5.5.3]:planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d 
[planning-guide-7.1]:planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30 
[planning-guide-7]:planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14 
[planning-guide-9.1]:planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3 
[planning-guide-azure-premium-storage]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92 

[planning-guide-figure-100]:media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:media/virtual-machines-shared-sap-planning-guide/2500-vm-extension-details.png
[planning-guide-figure-2600]:media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-300]:media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-400]:media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd 
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f 

[powershell-install-configure]:https://docs.microsoft.com/powershell/azure/install-azurerm-ps
[resource-group-authoring-templates]:../../../resource-group-authoring-templates.md
[resource-group-overview]:../../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam 
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../../storage/common/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../../storage/common/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../../storage/common/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../../storage/common/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../../storage/common/storage-premium-storage.md
[storage-redundancy]:../../../storage/common/storage-redundancy.md
[storage-scalability-targets]:../../../storage/common/storage-scalability-targets.md
[storage-use-azcopy]:../../../storage/common/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:../../../resource-manager-deployment-model.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../../linux/cli-deploy-templates.md 
[virtual-machines-deploy-rmtemplates-powershell]:../../virtual-machines-windows-ps-manage.md 
[virtual-machines-linux-agent-user-guide]:../../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-linux-configure-raid]:../../linux/configure-raid.md
[virtual-machines-linux-configure-lvm]:../../linux/configure-lvm.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../../linux/suse-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../../linux/update-agent.md
[virtual-machines-manage-availability-linux]:../../linux/manage-availability.md
[virtual-machines-manage-availability-windows]:../../windows/manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:virtual-machines-windows-create-powershell.md
[virtual-machines-sizes-linux]:../../linux/sizes.md
[virtual-machines-sizes-windows]:../../windows/sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./../../windows/sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./../../windows/sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./../../windows/sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:../../virtual-machines-windows-upload-image.md
[virtual-machines-windows-tutorial]:../../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics]:../../../virtual-network/virtual-networks-multiple-nics.md
[virtual-networks-nsg]:../../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../../vpn-gateway/vpn-gateway-site-to-site-create.md
[vpn-gateway-vpn-faq]:../../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../../xplat-cli-azure-resource-manager.md

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-rm-include.md)]

<span data-ttu-id="d98ef-149">Questa guida fa parte della documentazione relativa all'implementazione e alla distribuzione del software SAP in Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-149">This guide is part of the documentation on implementing and deploying the SAP software on Microsoft Azure.</span></span> <span data-ttu-id="d98ef-150">Prima di leggere questa guida, vedere la [guida alla pianificazione e all'implementazione][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="d98ef-150">Before reading this guide, read the [Planning and Implementation Guide][planning-guide].</span></span> <span data-ttu-id="d98ef-151">Questo documento illustra la distribuzione di vari sistemi di gestione di database relazionali (RDBMS) e dei prodotti correlati in combinazione con SAP in macchine virtuali di Microsoft Azure tramite le funzionalità di infrastruttura distribuita come servizio (IaaS) di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-151">This document covers the deployment of various Relational Database Management Systems (RDBMS) and related products in combination with SAP on Microsoft Azure Virtual Machines (VMs) using the Azure Infrastructure as a Service (IaaS) capabilities.</span></span>

<span data-ttu-id="d98ef-152">Questo documento è complementare alla documentazione relativa all'installazione di SAP e alle note SAP, che rappresentano le risorse principali per le installazioni e le distribuzioni del software SAP su piattaforme specifiche.</span><span class="sxs-lookup"><span data-stu-id="d98ef-152">The paper complements the SAP Installation Documentation and SAP Notes, which represent the primary resources for installations and deployments of SAP software on given platforms.</span></span>

## <a name="general-considerations"></a><span data-ttu-id="d98ef-153">Considerazioni generali</span><span class="sxs-lookup"><span data-stu-id="d98ef-153">General considerations</span></span>
<span data-ttu-id="d98ef-154">Questo capitolo introduce alcune considerazioni relative all'esecuzione di sistemi DBMS correlati a SAP in VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-154">In this chapter, considerations of running SAP-related DBMS systems in Azure VMs are introduced.</span></span> <span data-ttu-id="d98ef-155">Nel capitolo sono presenti pochi riferimenti a sistemi DBMS specifici.</span><span class="sxs-lookup"><span data-stu-id="d98ef-155">There are few references to specific DBMS systems in this chapter.</span></span> <span data-ttu-id="d98ef-156">I sistemi DBMS specifici vengono trattati nei capitoli successivi di questo documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-156">Instead the specific DBMS systems are handled within this paper, after this chapter.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="d98ef-157">Definizioni</span><span class="sxs-lookup"><span data-stu-id="d98ef-157">Definitions upfront</span></span>
<span data-ttu-id="d98ef-158">Nel documento vengono usati i termini seguenti.</span><span class="sxs-lookup"><span data-stu-id="d98ef-158">Throughout the document, we use the following terms:</span></span>

* <span data-ttu-id="d98ef-159">IaaS (Infrastructure as a Service): infrastruttura distribuita come servizio.</span><span class="sxs-lookup"><span data-stu-id="d98ef-159">IaaS: Infrastructure as a Service.</span></span>
* <span data-ttu-id="d98ef-160">PaaS (Platform as a Service): piattaforma distribuita come servizio.</span><span class="sxs-lookup"><span data-stu-id="d98ef-160">PaaS: Platform as a Service.</span></span>
* <span data-ttu-id="d98ef-161">SaaS (Software as a Service): software come un servizio.</span><span class="sxs-lookup"><span data-stu-id="d98ef-161">SaaS: Software as a Service.</span></span>
* <span data-ttu-id="d98ef-162">Componente SAP: singola applicazione SAP, ad esempio ECC, BW, Solution Manager o EP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-162">SAP Component: an individual SAP application such as ECC, BW, Solution Manager, or EP.</span></span>  <span data-ttu-id="d98ef-163">I componenti SAP possono essere basati su tecnologie ABAP o Java tradizionali o su un'applicazione non basata su NetWeaver, ad esempio Business Objects.</span><span class="sxs-lookup"><span data-stu-id="d98ef-163">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="d98ef-164">Ambiente SAP: raggruppamento logico di uno o più componenti SAP per una funzione aziendale, ad esempio sviluppo, servizio di controllo della qualità, formazione, ripristino di emergenza o produzione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-164">SAP Environment: one or more SAP components logically grouped to perform a business function such as Development, QAS, Training, DR, or Production.</span></span>
* <span data-ttu-id="d98ef-165">Panorama applicativo SAP: fa riferimento a tutte le risorse SAP in un panorama applicativo IT del cliente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-165">SAP Landscape: This refers to the entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="d98ef-166">Il panorama applicativo SAP include tutti gli ambienti di produzione e non produzione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-166">The SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="d98ef-167">Sistema SAP: combinazione del livello DBMS e del livello applicazione, ad esempio di un sistema di sviluppo SAP ERP, un sistema di test SAP BW, un sistema di produzione SAP CRM e così via. Nelle distribuzioni di Azure non è supportata la divisione di questi due livelli tra ambiente locale e Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-167">SAP System: The combination of DBMS layer and application layer of, for example, an SAP ERP development system, SAP BW test system, SAP CRM production system, etc. In Azure deployments, it is not supported to divide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="d98ef-168">Un sistema SAP deve quindi essere distribuito o in locale o in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-168">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="d98ef-169">È tuttavia possibile distribuire i diversi sistemi di un panorama applicativo SAP in Azure o in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-169">However, you can deploy the different systems of an SAP landscape in Azure or on-premises.</span></span> <span data-ttu-id="d98ef-170">È ad esempio possibile distribuire i sistemi di sviluppo e test SAP CRM in Azure e il sistema di produzione SAP CRM in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-170">For example, you could deploy the SAP CRM development and test systems in Azure but the SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="d98ef-171">Distribuzione solo cloud: una distribuzione in cui la sottoscrizione di Azure non è connessa tramite una connessione da sito a sito o ExpressRoute all'infrastruttura di rete locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-171">Cloud-Only deployment: A deployment where the Azure subscription is not connected via a site-to-site or ExpressRoute connection to the on-premises network infrastructure.</span></span> <span data-ttu-id="d98ef-172">Nella documentazione comune su Azure questi tipi di distribuzioni vengono definiti anche distribuzioni "solo cloud".</span><span class="sxs-lookup"><span data-stu-id="d98ef-172">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="d98ef-173">L'accesso alle macchine virtuali distribuite con questo metodo viene effettuato tramite Internet ed endpoint Internet pubblici assegnati alle VM in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-173">Virtual Machines deployed with this method are accessed through the Internet and public Internet endpoints assigned to the VMs in Azure.</span></span> <span data-ttu-id="d98ef-174">L'istanza locale di Active Directory (AD) e il DNS non vengono estesi ad Azure in questi tipi di distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-174">The on-premises Active Directory (AD) and DNS is not extended to Azure in these types of deployments.</span></span> <span data-ttu-id="d98ef-175">Le macchine virtuali non sono quindi parte dell'istanza locale di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d98ef-175">Hence the VMs are not part of the on-premises Active Directory.</span></span> <span data-ttu-id="d98ef-176">Nota: le distribuzioni solo cloud in questo documento vengono definite come panorami applicativi SAP completi, eseguiti esclusivamente in Azure senza estensione di Active Directory o risoluzione dei nomi da locale al cloud pubblico.</span><span class="sxs-lookup"><span data-stu-id="d98ef-176">Note: Cloud-Only deployments in this document are defined as complete SAP landscapes, which are running exclusively in Azure without extension of Active Directory or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="d98ef-177">Le configurazioni solo cloud non sono supportate per sistemi SAP di produzione o per configurazioni in cui è necessario usare SAP STMS o altre risorse locali tra i sistemi SAP ospitati in Azure e le risorse che risiedono in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-177">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need to be used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
* <span data-ttu-id="d98ef-178">Cross-premise: indica uno scenario in cui le VM sono distribuite in una sottoscrizione di Azure con connettività da sito a sito, multisito o ExpressRoute tra i data center locali e Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-178">Cross-Premises: Describes a scenario where VMs are deployed to an Azure subscription that has site-to-site, multi-site, or ExpressRoute connectivity between the on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="d98ef-179">Nella documentazione comune su Azure questi tipi di distribuzioni vengono definiti anche scenari cross-premise.</span><span class="sxs-lookup"><span data-stu-id="d98ef-179">In common Azure documentation, these kinds of deployments are also described as Cross-Premises scenarios.</span></span> <span data-ttu-id="d98ef-180">La connessione consente di estendere i domini locali, l'istanza locale di Active Directory e il DNS locale in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-180">The reason for the connection is to extend on-premises domains, on-premises Active Directory, and on-premises DNS into Azure.</span></span> <span data-ttu-id="d98ef-181">Il panorama applicativo locale viene esteso alle risorse di Azure della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-181">The on-premises landscape is extended to the Azure assets of the subscription.</span></span> <span data-ttu-id="d98ef-182">Questa estensione consente alle macchine virtuali di fare parte del dominio locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-182">Having this extension, the VMs can be part of the on-premises domain.</span></span> <span data-ttu-id="d98ef-183">Gli utenti di dominio del dominio locale possono accedere ai server e possono eseguire servizi in queste VM, ad esempio i servizi DBMS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-183">Domain users of the on-premises domain can access the servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="d98ef-184">La comunicazione e la risoluzione dei nomi tra VM distribuite in locale e VM distribuite in Azure sono consentite.</span><span class="sxs-lookup"><span data-stu-id="d98ef-184">Communication and name resolution between VMs deployed on-premises and VMs deployed in Azure is possible.</span></span> <span data-ttu-id="d98ef-185">Questo è probabilmente lo scenario più comune per la distribuzione di risorse SAP in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-185">We expect this to be the most common scenario for deploying SAP assets on Azure.</span></span> <span data-ttu-id="d98ef-186">Per altre informazioni, vedere [questo articolo][vpn-gateway-cross-premises-options] e [questo][vpn-gateway-site-to-site-create].</span><span class="sxs-lookup"><span data-stu-id="d98ef-186">For more information, see [this article][vpn-gateway-cross-premises-options] and [this article][vpn-gateway-site-to-site-create].</span></span>

> [!NOTE]
> <span data-ttu-id="d98ef-187">Le distribuzioni cross-premise di sistemi SAP in cui le macchine virtuali di Azure che eseguono sistemi SAP sono membri di un dominio locale sono supportate per i sistemi SAP di produzione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-187">Cross-Premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="d98ef-188">Le configurazioni cross-premise sono supportate per la distribuzione parziale o completa di panorami applicativi SAP in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-188">Cross-Premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="d98ef-189">Anche l'esecuzione del panorama applicativo SAP completo in Azure richiede che queste VM siano parte di un dominio locale e di ADS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-189">Even running the complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS.</span></span> <span data-ttu-id="d98ef-190">In versioni precedenti della documentazione sono stati illustrati scenari IT ibridi, in cui il termine "ibrido" indica la presenza di una connettività cross-premise tra l'ambiente locale e Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-190">In former versions of the documentation, we talked about Hybrid-IT scenarios, where the term ‘Hybrid’ is rooted in the fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="d98ef-191">In questo caso "ibrido" indica anche che le macchine virtuali in Azure fanno parte dell'istanza locale di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="d98ef-191">In this case ‘Hybrid’ also means that the VMs in Azure are part of the on-premises Active Directory.</span></span>
> 
> 

<span data-ttu-id="d98ef-192">Alcuni documenti Microsoft descrivono scenari cross-premise in modo leggermente diverso, in particolare per configurazioni DBMS a disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-192">Some Microsoft documentation describes Cross-Premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="d98ef-193">Nel caso dei documenti relativi a SAP, lo scenario cross-premise è essenzialmente basato sulla presenza di connettività da sito a sito o privata (ExpressRoute) e sulla distribuzione del panorama applicativo SAP tra l'ambiente locale e Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-193">In the case of the SAP-related documents, the Cross-Premises scenario just boils down to having a site-to-site or private (ExpressRoute) connectivity and to the fact that the SAP landscape is distributed between on-premises and Azure.</span></span>

### <a name="resources"></a><span data-ttu-id="d98ef-194">Risorse</span><span class="sxs-lookup"><span data-stu-id="d98ef-194">Resources</span></span>
<span data-ttu-id="d98ef-195">Per informazioni sull'argomento relativo alle distribuzioni SAP in Azure sono disponibili le seguenti guide:</span><span class="sxs-lookup"><span data-stu-id="d98ef-195">The following guides are available for the topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="d98ef-196">[Guida alla pianificazione e all'implementazione di Macchine virtuali di Azure per SAP NetWeaver][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="d98ef-196">[Azure Virtual Machines planning and implementation for SAP NetWeaver][planning-guide]</span></span>
* <span data-ttu-id="d98ef-197">[Distribuzione di Macchine virtuali di Azure per SAP NetWeaver][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="d98ef-197">[Azure Virtual Machines deployment for SAP NetWeaver][deployment-guide]</span></span>
* <span data-ttu-id="d98ef-198">[Distribuzione di DBMS in macchine virtuali di Azure per SAP NetWeaver (questo documento)][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="d98ef-198">[Azure Virtual Machines DBMS deployment for SAP NetWeaver (this document)][dbms-guide]</span></span>

<span data-ttu-id="d98ef-199">Le note seguenti su SAP sono correlate all'argomento relativo a SAP in Azure:</span><span class="sxs-lookup"><span data-stu-id="d98ef-199">The following SAP Notes are related to the topic of SAP on Azure:</span></span>

| <span data-ttu-id="d98ef-200">Numero della nota</span><span class="sxs-lookup"><span data-stu-id="d98ef-200">Note number</span></span> | <span data-ttu-id="d98ef-201">Titolo</span><span class="sxs-lookup"><span data-stu-id="d98ef-201">Title</span></span> |
| --- | --- |
| <span data-ttu-id="d98ef-202">[1928533]</span><span class="sxs-lookup"><span data-stu-id="d98ef-202">[1928533]</span></span> |<span data-ttu-id="d98ef-203">Applicazioni SAP in Azure: prodotti supportati e tipi di macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-203">SAP Applications on Azure: Supported Products and Azure VM types</span></span> |
| <span data-ttu-id="d98ef-204">[2015553]</span><span class="sxs-lookup"><span data-stu-id="d98ef-204">[2015553]</span></span> |<span data-ttu-id="d98ef-205">SAP in Microsoft Azure: prerequisiti per il supporto</span><span class="sxs-lookup"><span data-stu-id="d98ef-205">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="d98ef-206">[1999351]</span><span class="sxs-lookup"><span data-stu-id="d98ef-206">[1999351]</span></span> |<span data-ttu-id="d98ef-207">Risoluzione dei problemi del monitoraggio avanzato di Azure per SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-207">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="d98ef-208">[2178632]</span><span class="sxs-lookup"><span data-stu-id="d98ef-208">[2178632]</span></span> |<span data-ttu-id="d98ef-209">Metriche chiave del monitoraggio per SAP in Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-209">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="d98ef-210">[1409604]</span><span class="sxs-lookup"><span data-stu-id="d98ef-210">[1409604]</span></span> |<span data-ttu-id="d98ef-211">Virtualizzazione in Windows: monitoraggio avanzato</span><span class="sxs-lookup"><span data-stu-id="d98ef-211">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="d98ef-212">[2191498]</span><span class="sxs-lookup"><span data-stu-id="d98ef-212">[2191498]</span></span> |<span data-ttu-id="d98ef-213">SAP in Linux con Azure: monitoraggio avanzato</span><span class="sxs-lookup"><span data-stu-id="d98ef-213">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="d98ef-214">[2039619]</span><span class="sxs-lookup"><span data-stu-id="d98ef-214">[2039619]</span></span> |<span data-ttu-id="d98ef-215">Applicazioni SAP in Microsoft Azure che usano il database Oracle: prodotti supportati e relative versioni</span><span class="sxs-lookup"><span data-stu-id="d98ef-215">SAP Applications on Microsoft Azure using the Oracle Database: Supported Products and Versions</span></span> |
| <span data-ttu-id="d98ef-216">[2233094]</span><span class="sxs-lookup"><span data-stu-id="d98ef-216">[2233094]</span></span> |<span data-ttu-id="d98ef-217">DB6: Informazioni aggiuntive sulle applicazioni SAP in Azure che usano IBM DB2 per Linux, UNIX e Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-217">DB6: SAP Applications on Azure Using IBM DB2 for Linux, UNIX, and Windows - Additional Information</span></span> |
| <span data-ttu-id="d98ef-218">[2243692]</span><span class="sxs-lookup"><span data-stu-id="d98ef-218">[2243692]</span></span> |<span data-ttu-id="d98ef-219">Linux in una macchina virtuale di Microsoft Azure (IaaS): problemi delle licenze SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-219">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="d98ef-220">[1984787]</span><span class="sxs-lookup"><span data-stu-id="d98ef-220">[1984787]</span></span> |<span data-ttu-id="d98ef-221">SUSE LINUX Enterprise Server 12: note di installazione</span><span class="sxs-lookup"><span data-stu-id="d98ef-221">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="d98ef-222">[2002167]</span><span class="sxs-lookup"><span data-stu-id="d98ef-222">[2002167]</span></span> |<span data-ttu-id="d98ef-223">Red Hat Enterprise Linux 7. x: installazione e aggiornamento</span><span class="sxs-lookup"><span data-stu-id="d98ef-223">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |
| <span data-ttu-id="d98ef-224">[2069760]</span><span class="sxs-lookup"><span data-stu-id="d98ef-224">[2069760]</span></span> |<span data-ttu-id="d98ef-225">Installazione e aggiornamento di Oracle Linux 7.x SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-225">Oracle Linux 7.x SAP Installation and Upgrade</span></span> |
| <span data-ttu-id="d98ef-226">[1597355]</span><span class="sxs-lookup"><span data-stu-id="d98ef-226">[1597355]</span></span> |<span data-ttu-id="d98ef-227">Raccomandazione sullo spazio di swapping per Linux</span><span class="sxs-lookup"><span data-stu-id="d98ef-227">Swap-space recommendation for Linux</span></span> |
| <span data-ttu-id="d98ef-228">[2171857]</span><span class="sxs-lookup"><span data-stu-id="d98ef-228">[2171857]</span></span> |<span data-ttu-id="d98ef-229">Oracle Database 12c: supporto per file system in Linux</span><span class="sxs-lookup"><span data-stu-id="d98ef-229">Oracle Database 12c - file system support on Linux</span></span> |
| <span data-ttu-id="d98ef-230">[1114181]</span><span class="sxs-lookup"><span data-stu-id="d98ef-230">[1114181]</span></span> |<span data-ttu-id="d98ef-231">Oracle Database 11g: supporto per file system in Linux</span><span class="sxs-lookup"><span data-stu-id="d98ef-231">Oracle Database 11g - file system support on Linux</span></span> |


<span data-ttu-id="d98ef-232">Vedere anche il [wiki in SCN](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) contenente tutte le note SAP per Linux.</span><span class="sxs-lookup"><span data-stu-id="d98ef-232">Also read the [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="d98ef-233">È necessario conoscere l'architettura Microsoft Azure e il funzionamento delle macchine virtuali di Microsoft Azure e sapere come queste vengono distribuite.</span><span class="sxs-lookup"><span data-stu-id="d98ef-233">You should have a working knowledge about the Microsoft Azure Architecture and how Microsoft Azure Virtual Machines are deployed and operated.</span></span> <span data-ttu-id="d98ef-234">Altre informazioni sono disponibili all'indirizzo <https://azure.microsoft.com/documentation/></span><span class="sxs-lookup"><span data-stu-id="d98ef-234">You can find more information at <https://azure.microsoft.com/documentation/></span></span>

> [!NOTE]
> <span data-ttu-id="d98ef-235">Questo documento **non** illustra le offerte relative alla piattaforma Microsoft Azure come piattaforma distribuita come servizio (PaaS).</span><span class="sxs-lookup"><span data-stu-id="d98ef-235">We are **not** discussing Microsoft Azure Platform as a Service (PaaS) offerings of the Microsoft Azure Platform.</span></span> <span data-ttu-id="d98ef-236">Questo documento descrive l'esecuzione di un sistema di gestione di database (DBMS) in macchine virtuali di Microsoft Azure (IaaS) come se il sistema DBMS fosse eseguito nell'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-236">This paper is about running a database management system (DBMS) in Microsoft Azure Virtual Machines (IaaS) just as you would run the DBMS in your on-premises environment.</span></span> <span data-ttu-id="d98ef-237">Le funzionalità di database di queste due offerte sono molto diverse e non devono essere confuse tra loro.</span><span class="sxs-lookup"><span data-stu-id="d98ef-237">Database capabilities and functionalities between these two offers are very different and should not be mixed up with each other.</span></span> <span data-ttu-id="d98ef-238">Vedere anche: <https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="d98ef-238">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
> 
> 

<span data-ttu-id="d98ef-239">Per quanto riguarda la tecnologia IaaS, in generale l'installazione e la configurazione in Windows, Linux e DBMS sono sostanzialmente uguali a quanto avviene in qualsiasi macchina virtuale o computer bare metal installato in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-239">Since we are discussing IaaS, in general the Windows, Linux, and DBMS installation and configuration are essentially the same as any virtual machine or bare metal machine you would install on-premises.</span></span> <span data-ttu-id="d98ef-240">Alcune decisioni relative all'architettura e all'implementazione della gestione del sistema, tuttavia, presentano differenze in caso di tecnologia IaaS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-240">However, there are some architecture and system management implementation decisions, which are different when utilizing IaaS.</span></span> <span data-ttu-id="d98ef-241">Lo scopo di questo documento è spiegare le differenze specifiche relative all'architettura e alla gestione del sistema che è necessario conoscere quando si usa la tecnologia IaaS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-241">The purpose of this document is to explain the specific architectural and system management differences that you must be prepared for when using IaaS.</span></span>

<span data-ttu-id="d98ef-242">Il documento prende in esame le differenze generali nelle aree seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-242">In general, the overall areas of difference that this paper discusses are:</span></span>

* <span data-ttu-id="d98ef-243">Pianificazione del layout di VM/dischi appropriato dei sistemi SAP per garantire il layout dei file di dati corretto e la possibilità di raggiungere un numero di operazioni di I/O al secondo sufficiente per il carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="d98ef-243">Planning the proper VM/disk layout of SAP systems to ensure you have the proper data file layout and can achieve enough IOPS for your workload.</span></span>
* <span data-ttu-id="d98ef-244">Considerazioni sulla rete per l'uso della tecnologia IaaS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-244">Networking considerations when using IaaS.</span></span>
* <span data-ttu-id="d98ef-245">Uso di funzionalità di database specifiche per ottimizzare il layout dei database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-245">Specific database features to use in order to optimize the database layout.</span></span>
* <span data-ttu-id="d98ef-246">Considerazioni sul backup e il ripristino nella tecnologia IaaS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-246">Backup and restore considerations in IaaS.</span></span>
* <span data-ttu-id="d98ef-247">Utilizzo di diversi tipi di immagini per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-247">Utilizing different types of images for deployment.</span></span>
* <span data-ttu-id="d98ef-248">Disponibilità elevata nella tecnologia IaaS di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-248">High Availability in Azure IaaS.</span></span>

## <span data-ttu-id="d98ef-249"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Struttura di una distribuzione RDBMS</span><span class="sxs-lookup"><span data-stu-id="d98ef-249"><a name="65fa79d6-a85f-47ee-890b-22e794f51a64"></a>Structure of an RDBMS Deployment</span></span>
<span data-ttu-id="d98ef-250">Per seguire questo capitolo, è necessario conoscere il contenuto di [questo][deployment-guide-3] capitolo della [guida alla distribuzione][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="d98ef-250">In order to follow this chapter, it is necessary to understand what was presented in [this][deployment-guide-3] chapter of the [Deployment Guide][deployment-guide].</span></span> <span data-ttu-id="d98ef-251">Prima di leggere questo capitolo è necessario conoscere le diverse serie di macchine virtuali e le relative differenze, nonché le differenze tra Archiviazione Premium e Standard di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-251">Knowledge about the different VM-Series and their differences and differences of Azure Standard and Premium Storage should be understood and known before reading this chapter.</span></span>

<span data-ttu-id="d98ef-252">Fino a marzo 2015, le dimensioni dei dischi contenenti un sistema operativo erano limitate a 127 GB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-252">Until March 2015, disks, which contain an operating system were limited to 127 GB in size.</span></span> <span data-ttu-id="d98ef-253">Questa limitazione è stata rimossa a marzo 2015. Per altre informazioni, vedere <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-253">This limitation got lifted in March 2015 (for more information check <https://azure.microsoft.com/blog/2015/03/25/azure-vm-os-drive-limit-octupled/>).</span></span> <span data-ttu-id="d98ef-254">A partire da tale data, i dischi contenenti il sistema operativo possono avere le stesse dimensioni di qualsiasi altro disco.</span><span class="sxs-lookup"><span data-stu-id="d98ef-254">From there on disks containing the operating system can have the same size as any other disk.</span></span> <span data-ttu-id="d98ef-255">È tuttavia preferibile una struttura di distribuzione in cui il sistema operativo, il sistema DBMS ed eventuali file binari SAP siano separati dai file di database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-255">Nevertheless, we still prefer a structure of deployment where the operating system, DBMS, and eventual SAP binaries are separate from the database files.</span></span> <span data-ttu-id="d98ef-256">Nei sistemi SAP in esecuzione in macchine virtuali di Azure, è previsto che la VM o il disco di base sia installato con il sistema operativo, i file eseguibili del sistema di gestione di database e i file eseguibili SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-256">Therefore, we expect SAP systems running in Azure Virtual Machines have the base VM (or disk) installed with the operating system, database management system executables, and SAP executables.</span></span> <span data-ttu-id="d98ef-257">I file di dati e di log di DBMS vengono archiviati in Archiviazione di Azure (Standard o Premium) in dischi separati e collegati come dischi logici alla VM di Azure dell'immagine del sistema operativo originale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-257">The DBMS data and log files are stored in Azure Storage (Standard or Premium Storage) in separate disks and attached as logical disks to the original Azure operating system image VM.</span></span> 

<span data-ttu-id="d98ef-258">A seconda che si usi Archiviazione Standard o Premium di Azure, ad esempio con VM serie GS o serie DS, in Azure sono previste altre quote, illustrate [qui (per Linux)][virtual-machines-sizes-linux] e [qui (per Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="d98ef-258">Dependent on leveraging Azure Standard or Premium Storage (for example by using the DS-series or GS-series VMs) there are other quotas in Azure, which are documented [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span> <span data-ttu-id="d98ef-259">Nella pianificazione del layout dei dischi è necessario trovare l'equilibrio ottimale tra le quote per gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-259">When planning your disk layout, you need to find the best balance of the quotas for the following items:</span></span>

* <span data-ttu-id="d98ef-260">Numero di file di dati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-260">The number of data files.</span></span>
* <span data-ttu-id="d98ef-261">Numero di dischi contenenti i file.</span><span class="sxs-lookup"><span data-stu-id="d98ef-261">The number of disks that contain the files.</span></span>
* <span data-ttu-id="d98ef-262">Quote di operazioni di I/O al secondo di un singolo disco.</span><span class="sxs-lookup"><span data-stu-id="d98ef-262">The IOPS quotas of a single disk.</span></span>
* <span data-ttu-id="d98ef-263">Velocità effettiva dei dati per disco.</span><span class="sxs-lookup"><span data-stu-id="d98ef-263">The data throughput per disk.</span></span>
* <span data-ttu-id="d98ef-264">Numero di dischi dati aggiuntivi possibili per dimensioni di VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-264">The number of additional data disks possible per VM size.</span></span>
* <span data-ttu-id="d98ef-265">La velocità effettiva di archiviazione complessiva che una macchina virtuale può offrire.</span><span class="sxs-lookup"><span data-stu-id="d98ef-265">The overall storage throughput a VM can provide.</span></span>

<span data-ttu-id="d98ef-266">Azure applica una quota di operazioni di I/O al secondo per disco dati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-266">Azure enforces an IOPS quota per data disk.</span></span> <span data-ttu-id="d98ef-267">I dischi ospitati in Archiviazione Standard di Azure e quelli ospitati in Archiviazione Premium hanno quote diverse.</span><span class="sxs-lookup"><span data-stu-id="d98ef-267">These quotas are different for disks hosted on Azure Standard Storage and Premium Storage.</span></span> <span data-ttu-id="d98ef-268">Anche la latenza di I/O è molto diversa tra i due tipi di archiviazione e Archiviazione Premium offre latenze di I/O nettamente migliori.</span><span class="sxs-lookup"><span data-stu-id="d98ef-268">I/O latencies are also very different between the two storage types with Premium Storage delivering factors better I/O latencies.</span></span> <span data-ttu-id="d98ef-269">A ognuno dei diversi tipi di VM è possibile collegare un numero limitato di dischi dati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-269">Each of the different VM types has a limited number of data disks that you are able to attach.</span></span> <span data-ttu-id="d98ef-270">Un'altra restrizione è data dal fatto che solo determinati tipi di macchine virtuali possono usare Archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-270">Another restriction is that only certain VM types can leverage Azure Premium Storage.</span></span> <span data-ttu-id="d98ef-271">Di conseguenza, la scelta di un determinato tipo di VM potrebbe non basarsi soltanto sui requisiti di CPU e memoria, ma anche sui requisiti in termini di operazioni di I/O al secondo, latenza e velocità effettiva dei dischi che vengono in genere ridimensionati con il numero dei dischi o il tipo di dischi di Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="d98ef-271">This means the decision for a certain VM type might not only be driven by the CPU and memory requirements, but also by the IOPS, latency and disk throughput requirements that usually are scaled with the number of disks or the type of Premium Storage disks.</span></span> <span data-ttu-id="d98ef-272">In particolare con Archiviazione Premium, le dimensioni di un disco possono essere determinate anche dal numero di operazioni di I/O al secondo e dalla velocità effettiva che deve essere raggiunta da ogni disco.</span><span class="sxs-lookup"><span data-stu-id="d98ef-272">Especially with Premium Storage the size of a disk also might be dictated by the number of IOPS and throughput that needs to be achieved by each disk.</span></span>

<span data-ttu-id="d98ef-273">Il fatto che la frequenza complessiva di operazioni di I/O al secondo, il numero di dischi montati e le dimensioni della VM siano collegati può causare differenze tra la configurazione in Azure di un sistema SAP e la relativa distribuzione locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-273">The fact that the overall IOPS rate, the number of disks mounted, and the size of the VM are all tied together, might cause an Azure configuration of an SAP system to be different than its on-premises deployment.</span></span> <span data-ttu-id="d98ef-274">I limiti di IOPS per numero di unità logica (LUN) sono in genere configurabili nelle distribuzioni locali.</span><span class="sxs-lookup"><span data-stu-id="d98ef-274">The IOPS limits per LUN are usually configurable in on-premises deployments.</span></span> <span data-ttu-id="d98ef-275">In Archiviazione di Azure, invece, tali limiti sono fissi oppure dipendono dal tipo di disco, come in Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="d98ef-275">Whereas with Azure Storage those limits are fixed or as in Premium Storage dependent on the disk type.</span></span> <span data-ttu-id="d98ef-276">Nelle distribuzioni locali si possono trovare configurazioni dei clienti con server di database che usano molti volumi diversi per file eseguibili speciali come SAP e DBMS o volumi speciali per spazi di tabelle o database temporanei.</span><span class="sxs-lookup"><span data-stu-id="d98ef-276">So with on-premises deployments we see customer configurations of database servers that are using many different volumes for special executables like SAP and the DBMS or special volumes for temporary databases or table spaces.</span></span> <span data-ttu-id="d98ef-277">Lo spostamento di un sistema locale di questo tipo in Azure può determinare uno spreco della potenziale larghezza di banda per le operazioni di I/O al secondo a causa dello spreco di un disco per file eseguibili o database che eseguono un numero molto basso o nullo di operazioni di I/O al secondo.</span><span class="sxs-lookup"><span data-stu-id="d98ef-277">When such an on-premises system is moved to Azure, it might lead to a waste of potential IOPS bandwidth by wasting a disk for executables or databases, which do not perform any or not a lot of IOPS.</span></span> <span data-ttu-id="d98ef-278">Nelle macchine virtuali di Azure è quindi consigliabile che i file eseguibili SAP e DBMS siano installati nel disco del sistema operativo, se possibile.</span><span class="sxs-lookup"><span data-stu-id="d98ef-278">Therefore, in Azure VMs we recommend that the DBMS and SAP executables be installed on the OS disk if possible.</span></span>

<span data-ttu-id="d98ef-279">La posizione dei file di database e dei file di log e il tipo di Archiviazione di Azure usato devono essere definiti in base ai requisiti di operazioni di I/O al secondo, latenza e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="d98ef-279">The placement of the database files and log files and the type of Azure Storage used, should be defined by IOPS, latency, and throughput requirements.</span></span> <span data-ttu-id="d98ef-280">Per avere un numero di operazioni di I/O al secondo sufficiente per il log delle transazioni, potrebbe essere necessario sfruttare più dischi per il file di log delle transazioni oppure usare un disco di Archiviazione Premium di dimensioni maggiori.</span><span class="sxs-lookup"><span data-stu-id="d98ef-280">In order to have enough IOPS for the transaction log, you might be forced to leverage multiple disks for the transaction log file or use a larger Premium Storage disk.</span></span> <span data-ttu-id="d98ef-281">In tal caso si creerà un RAID software, ad esempio con un pool di archiviazione Windows per Windows o MDADM e LVM (Logical Volume Manager) per Linux, con i dischi che contengono il log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-281">In such a case one would build a software RAID (for example Windows Storage Pool for Windows or MDADM and LVM (Logical Volume Manager) for Linux) with the disks, which contain the transaction log.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="d98ef-283">Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-283">Windows</span></span>
> 
> <span data-ttu-id="d98ef-284">In una VM di Azure, D:\ è un'unità non persistente supportata da alcuni dischi locali nel nodo di calcolo di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-284">Drive D:\ in an Azure VM is a non-persisted drive, which is backed by some local disks on the Azure compute node.</span></span> <span data-ttu-id="d98ef-285">Il fatto che sia non persistente implica che tutte le modifiche apportate al contenuto dell'unità D:\ vengono perse al riavvio della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-285">Because it is non-persisted, this means that any changes made to the content on the D:\ drive is lost when the VM is rebooted.</span></span> <span data-ttu-id="d98ef-286">Per "tutte le modifiche" si intende il salvataggio di file, la creazione di directory, l'installazione di applicazioni e così via.</span><span class="sxs-lookup"><span data-stu-id="d98ef-286">By "any changes", we mean saved files, directories created, applications installed, etc.</span></span>
> 
> ![Linux][Logo_Linux] <span data-ttu-id="d98ef-288">Linux</span><span class="sxs-lookup"><span data-stu-id="d98ef-288">Linux</span></span>
> 
> <span data-ttu-id="d98ef-289">Nelle VM Linux di Azure viene montata automaticamente in /mnt/resource un'unità non persistente supportata da dischi locali nel nodo di calcolo di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-289">Linux Azure VMs automatically mount a drive at /mnt/resource that is a non-persisted drive backed by local disks on the Azure compute node.</span></span> <span data-ttu-id="d98ef-290">Il fatto che sia non persistente implica che tutte le modifiche apportate al contenuto in /mnt/resource vengono perse al riavvio della VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-290">Because it is non-persisted, this means that any changes made to content in /mnt/resource are lost when the VM is rebooted.</span></span> <span data-ttu-id="d98ef-291">Per "tutte le modifiche" si intende il salvataggio di file, la creazione di directory, l'installazione di applicazioni e così via.</span><span class="sxs-lookup"><span data-stu-id="d98ef-291">By any changes, we mean files saved, directories created, applications installed, etc.</span></span>
> 
> 

- - -
<span data-ttu-id="d98ef-292">A seconda della serie della VM di Azure, i dischi locali nel nodo di calcolo presentano prestazioni diverse, che possono essere classificate come segue.</span><span class="sxs-lookup"><span data-stu-id="d98ef-292">Dependent on the Azure VM-series, the local disks on the compute node show different performance, which can be categorized like:</span></span>

* <span data-ttu-id="d98ef-293">A0-A7: prestazioni molto limitate.</span><span class="sxs-lookup"><span data-stu-id="d98ef-293">A0-A7: Very limited performance.</span></span> <span data-ttu-id="d98ef-294">L'unico uso possibile è il file di paging di Windows.</span><span class="sxs-lookup"><span data-stu-id="d98ef-294">Not usable for anything beyond windows page file</span></span>
* <span data-ttu-id="d98ef-295">A8-A11: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva > 1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="d98ef-295">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="d98ef-296">Serie D: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva > 1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="d98ef-296">D-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="d98ef-297">Serie DS: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva > 1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="d98ef-297">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="d98ef-298">Serie G: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva > 1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="d98ef-298">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>
* <span data-ttu-id="d98ef-299">Serie GS: caratteristiche di prestazioni molto valide con circa diecimila IOPS e velocità effettiva > 1 GB/sec.</span><span class="sxs-lookup"><span data-stu-id="d98ef-299">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput</span></span>

<span data-ttu-id="d98ef-300">Le indicazioni precedenti sono applicabili ai tipi di macchine virtuali certificati per SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-300">Statements above are applying to the VM types that are certified with SAP.</span></span> <span data-ttu-id="d98ef-301">Le serie di VM con valori di IOPS e velocità effettiva eccellenti sono adatte all'uso da parte di alcune funzionalità DBMS, come tempdb o lo spazio di tabella temporanea.</span><span class="sxs-lookup"><span data-stu-id="d98ef-301">The VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features, like tempdb or temporary table space.</span></span>

### <span data-ttu-id="d98ef-302"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Caching per VM e dischi dati</span><span class="sxs-lookup"><span data-stu-id="d98ef-302"><a name="c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f"></a>Caching for VMs and data disks</span></span>
<span data-ttu-id="d98ef-303">Quando si creano dischi dati tramite il portale o si montano i dischi caricati nelle VM, è possibile scegliere se memorizzare nella cache il traffico di I/O tra la VM e i dischi in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-303">When we create data disks through the portal or when we mount uploaded disks to VMs, we can choose whether the I/O traffic between the VM and those disks located in Azure storage are cached.</span></span> <span data-ttu-id="d98ef-304">Archiviazione Premium e Archiviazione Standard di Azure usano due tecnologie diverse per questo tipo di cache.</span><span class="sxs-lookup"><span data-stu-id="d98ef-304">Azure Standard and Premium Storage use two different technologies for this type of cache.</span></span> <span data-ttu-id="d98ef-305">In entrambi i casi, il backup della cache stessa viene eseguito nelle stesse unità usate dal disco temporaneo della VM, ossia D:\ in Windows o /mnt/resource in Linux.</span><span class="sxs-lookup"><span data-stu-id="d98ef-305">In both cases, the cache itself would be disk backed on the same drives used by the temporary disk (D:\ on Windows or /mnt/resource on Linux) of the VM.</span></span>

<span data-ttu-id="d98ef-306">Per Archiviazione Standard di Azure le opzioni di memorizzazione nella cache sono:</span><span class="sxs-lookup"><span data-stu-id="d98ef-306">For Azure Standard Storage the possible cache types are:</span></span>

* <span data-ttu-id="d98ef-307">Nessuna memorizzazione nella cache</span><span class="sxs-lookup"><span data-stu-id="d98ef-307">No caching</span></span>
* <span data-ttu-id="d98ef-308">Memorizzazione nella cache di lettura</span><span class="sxs-lookup"><span data-stu-id="d98ef-308">Read caching</span></span>
* <span data-ttu-id="d98ef-309">Memorizzazione nella cache di lettura e scrittura</span><span class="sxs-lookup"><span data-stu-id="d98ef-309">Read and Write caching</span></span>

<span data-ttu-id="d98ef-310">Per ottenere prestazioni coerenti e deterministiche, è consigliabile impostare il caching in Archiviazione Standard di Azure per tutti i dischi contenenti **spazio di tabella, file di log e file di dati correlati a DBMS su "NONE"**.</span><span class="sxs-lookup"><span data-stu-id="d98ef-310">In order to get consistent and deterministic performance, you should set the caching on Azure Standard Storage for all disks containing **DBMS-related data files, log files, and table space to 'NONE'**.</span></span> <span data-ttu-id="d98ef-311">Per la memorizzazione nella cache della macchina virtuale è possibile lasciare il valore predefinito.</span><span class="sxs-lookup"><span data-stu-id="d98ef-311">The caching of the VM can remain with the default.</span></span>

<span data-ttu-id="d98ef-312">Per Archiviazione Premium di Azure le opzioni di memorizzazione nella cache sono:</span><span class="sxs-lookup"><span data-stu-id="d98ef-312">For Azure Premium Storage the following caching options exist:</span></span>

* <span data-ttu-id="d98ef-313">Nessuna memorizzazione nella cache</span><span class="sxs-lookup"><span data-stu-id="d98ef-313">No caching</span></span>
* <span data-ttu-id="d98ef-314">Memorizzazione nella cache di lettura</span><span class="sxs-lookup"><span data-stu-id="d98ef-314">Read caching</span></span>

<span data-ttu-id="d98ef-315">Per Archiviazione Premium di Azure è consigliabile scegliere il **caching di lettura per i file di dati** del database SAP e **nessun caching per i dischi dei file di log**.</span><span class="sxs-lookup"><span data-stu-id="d98ef-315">Recommendation for Azure Premium Storage is to leverage **Read caching for data files** of the SAP database and chose **No caching for the disks of log file(s)**.</span></span>

### <span data-ttu-id="d98ef-316"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>RAID software</span><span class="sxs-lookup"><span data-stu-id="d98ef-316"><a name="c8e566f9-21b7-4457-9f7f-126036971a91"></a>Software RAID</span></span>
<span data-ttu-id="d98ef-317">Come già indicato sopra, è necessario bilanciare il numero di operazioni di I/O al secondo necessario per i file di database nel numero di dischi che è possibile configurare e il numero massimo di operazioni di I/O al secondo offerto da una VM di Azure per disco o tipo di disco di Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="d98ef-317">As already stated above, you need to balance the number of IOPS needed for the database files across the number of disks you can configure and the maximum IOPS an Azure VM provides per disk or Premium Storage disk type.</span></span> <span data-ttu-id="d98ef-318">Il modo più semplice per gestire il carico delle operazioni di I/O al secondo nei dischi è creare un RAID software nei diversi dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-318">Easiest way to deal with the IOPS load over disks is to build a software RAID over the different disks.</span></span> <span data-ttu-id="d98ef-319">Quindi posizionare alcuni file di dati del DBMS SAP nei LUN ricavati dal RAID software.</span><span class="sxs-lookup"><span data-stu-id="d98ef-319">Then place a number of data files of the SAP DBMS on the LUNS carved out of the software RAID.</span></span> <span data-ttu-id="d98ef-320">A seconda dei requisiti, si può prendere in considerazione anche l'utilizzo di Archiviazione Premium, dato che due dei tre diversi dischi di Archiviazione Premium garantiscono una quota di operazioni di I/O al secondo superiore rispetto ai dischi basati su Archiviazione Standard.</span><span class="sxs-lookup"><span data-stu-id="d98ef-320">Dependent on the requirements you might want to consider the usage of Premium Storage as well since two of the three different Premium Storage disks provide higher IOPS quota than disks based on Standard Storage.</span></span> <span data-ttu-id="d98ef-321">Archiviazione Premium di Azure offre anche una latenza di I/O notevolmente migliore.</span><span class="sxs-lookup"><span data-stu-id="d98ef-321">Besides the significant better I/O latency provided by Azure Premium Storage.</span></span> 

<span data-ttu-id="d98ef-322">Questo vale anche per il log delle transazioni dei vari sistemi DBMS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-322">Same applies to the transaction log of the different DBMS systems.</span></span> <span data-ttu-id="d98ef-323">Se sono presenti numerosi sistemi DBMS, la semplice aggiunta di altri file di log delle transazioni non risulta efficace, perché i sistemi DBMS scrivono soltanto in un file alla volta.</span><span class="sxs-lookup"><span data-stu-id="d98ef-323">With many of them just adding more Tlog files does not help since the DBMS systems write into one of the files at a time only.</span></span> <span data-ttu-id="d98ef-324">Se sono necessarie frequenze di operazioni di I/O al secondo superiori rispetto a quella offerta da un singolo disco basato su Archiviazione Standard, è possibile eseguire lo striping tra più dischi di Archiviazione Standard oppure usare un tipo di disco di Archiviazione Premium di dimensioni maggiori che, oltre a frequenze di operazioni di I/O al secondo superiori, offra una latenza notevolmente più bassa per le operazioni di I/O di scrittura nel log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-324">If higher IOPS rates are needed than a single Standard Storage based disk can deliver, you can stripe over multiple Standard Storage disks or you can use a larger Premium Storage disk type that beyond higher IOPS rates also delivers factors lower latency for the write I/Os into the transaction log.</span></span>

<span data-ttu-id="d98ef-325">Ecco alcuni esempi di situazioni riscontrate nelle distribuzioni di Azure per le quali sarebbe preferibile usare un RAID software:</span><span class="sxs-lookup"><span data-stu-id="d98ef-325">Situations experienced in Azure deployments, which would favor using a software RAID are:</span></span>

* <span data-ttu-id="d98ef-326">Log delle transazioni o di rollforward che richiedono un numero di operazioni di I/O al secondo superiore rispetto a quello offerto da Azure per un singolo disco.</span><span class="sxs-lookup"><span data-stu-id="d98ef-326">Transaction Log/Redo Log require more IOPS than Azure provides for a single disk.</span></span> <span data-ttu-id="d98ef-327">Come indicato sopra, questo problema può essere risolto creando un LUN in più dischi con un RAID software.</span><span class="sxs-lookup"><span data-stu-id="d98ef-327">As mentioned above this can be solved by building a LUN over multiple disks using a software RAID.</span></span>
* <span data-ttu-id="d98ef-328">Distribuzione non uniforme del carico di lavoro di I/O nei vari file di dati del database SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-328">Uneven I/O workload distribution over the different data files of the SAP database.</span></span> <span data-ttu-id="d98ef-329">In questi casi uno dei file di dati potrebbe raggiunge la quota piuttosto spesso,</span><span class="sxs-lookup"><span data-stu-id="d98ef-329">In such cases one can experience one data file hitting the quota rather often.</span></span> <span data-ttu-id="d98ef-330">mentre gli altri non si avvicinano affatto alla quota di operazioni di I/O al secondo di un singolo disco.</span><span class="sxs-lookup"><span data-stu-id="d98ef-330">Whereas other data files are not even getting close to the IOPS quota of a single disk.</span></span> <span data-ttu-id="d98ef-331">In questi casi, la soluzione più semplice consiste nel creare un LUN in più dischi con un RAID software.</span><span class="sxs-lookup"><span data-stu-id="d98ef-331">In such cases the easiest solution is to build one LUN over multiple disks using a software RAID.</span></span> 
* <span data-ttu-id="d98ef-332">Non si conosce l'esatto carico di lavoro di I/O per ogni file di dati e si conosce solo approssimativamente il carico di lavoro di IOPS complessivo nel sistema DBMS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-332">You don’t know what the exact I/O workload per data file is and only roughly know what the overall IOPS workload against the DBMS is.</span></span> <span data-ttu-id="d98ef-333">La soluzione più semplice consiste nel compilare un unico LUN usando un RAID software.</span><span class="sxs-lookup"><span data-stu-id="d98ef-333">Easiest to do is to build one LUN with the help of a software RAID.</span></span> <span data-ttu-id="d98ef-334">La somma delle quote di più dischi dietro il LUN dovrebbe quindi fornire la frequenza di operazioni di I/O al secondo nota.</span><span class="sxs-lookup"><span data-stu-id="d98ef-334">The sum of quotas of multiple disks behind this LUN should then fulfill the known IOPS rate.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="d98ef-336">Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-336">Windows</span></span>
> 
> <span data-ttu-id="d98ef-337">Se si esegue Windows Server 2012 o versioni successive, è consigliabile usare Spazi di archiviazione Windows.</span><span class="sxs-lookup"><span data-stu-id="d98ef-337">We recommend using Windows Storage Spaces if you run on Windows Server 2012 or higher.</span></span> <span data-ttu-id="d98ef-338">È più efficiente rispetto alla funzionalità di striping di Windows delle versioni precedenti di Windows.</span><span class="sxs-lookup"><span data-stu-id="d98ef-338">It is more efficient than Windows Striping of earlier Windows versions.</span></span> <span data-ttu-id="d98ef-339">Quando si usa Windows Server 2012 come sistema operativo, potrebbe essere necessario creare gli spazi di archiviazione e i pool di archiviazione Windows con comandi di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d98ef-339">You might need to create the Windows Storage Pools and Storage Spaces by PowerShell commands when using Windows Server 2012 as Operating System.</span></span> <span data-ttu-id="d98ef-340">I comandi di PowerShell sono disponibili qui <https://technet.microsoft.com/library/jj851254.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-340">The PowerShell commands can be found here <https://technet.microsoft.com/library/jj851254.aspx></span></span>
> 
> ![Linux][Logo_Linux] <span data-ttu-id="d98ef-342">Linux</span><span class="sxs-lookup"><span data-stu-id="d98ef-342">Linux</span></span>
> 
> <span data-ttu-id="d98ef-343">Per compilare un RAID software in Linux sono supportati solo MDADM e LVM (Logical Volume Manager).</span><span class="sxs-lookup"><span data-stu-id="d98ef-343">Only MDADM and LVM (Logical Volume Manager) are supported to build a software RAID on Linux.</span></span> <span data-ttu-id="d98ef-344">Per altre informazioni, leggere gli articoli seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-344">For more information, read the following articles:</span></span>
> 
> * <span data-ttu-id="d98ef-345">[Configurare RAID software su Linux][virtual-machines-linux-configure-raid] (per MDADM)</span><span class="sxs-lookup"><span data-stu-id="d98ef-345">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid] (for MDADM)</span></span>
> * <span data-ttu-id="d98ef-346">[Configurare LVM in una macchina virtuale Linux in Azure][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="d98ef-346">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
> 
> 

- - -
<span data-ttu-id="d98ef-347">Considerazioni tipiche relative all'uso di serie di VM compatibili con Archiviazione Premium di Azure:</span><span class="sxs-lookup"><span data-stu-id="d98ef-347">Considerations for leveraging VM-series, which are able to work with Azure Premium Storage usually are:</span></span>

* <span data-ttu-id="d98ef-348">Richieste di latenza di I/O che si avvicinano alle possibilità di dispositivi SAN o NAS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-348">Demands for I/O latencies that are close to what SAN/NAS devices deliver.</span></span>
* <span data-ttu-id="d98ef-349">Richiesta di una latenza di I/O molto superiore alle possibilità di Archiviazione Standard di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-349">Demand for factors better I/O latency than Azure Standard Storage can deliver.</span></span>
* <span data-ttu-id="d98ef-350">Operazioni di I/O al secondo per VM superiori al numero raggiungibile con più dischi di Archiviazione Standard per un determinato tipo di VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-350">Higher IOPS per VM than what could be achieved with multiple Standard Storage disks against a certain VM type.</span></span>

<span data-ttu-id="d98ef-351">Dato che il servizio di archiviazione di Azure sottostante replica ogni disco in almeno tre nodi di archiviazione, è possibile usare un semplice striping RAID 0.</span><span class="sxs-lookup"><span data-stu-id="d98ef-351">Since the underlying Azure Storage replicates each disk to at least three storage nodes, simple RAID 0 striping can be used.</span></span> <span data-ttu-id="d98ef-352">Non è necessario implementare RAID 5 o RAID 1.</span><span class="sxs-lookup"><span data-stu-id="d98ef-352">There is no need to implement RAID5 or RAID1.</span></span>

### <span data-ttu-id="d98ef-353"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Archiviazione di Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-353"><a name="10b041ef-c177-498a-93ed-44b3441ab152"></a>Microsoft Azure Storage</span></span>
<span data-ttu-id="d98ef-354">Archiviazione di Microsoft Azure archivia la VM di base, con il sistema operativo, e i dischi o i BLOB in almeno tre nodi di archiviazione separati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-354">Microsoft Azure Storage stores the base VM (with OS) and disks or BLOBs to at least three separate storage nodes.</span></span> <span data-ttu-id="d98ef-355">Quando si crea un account di archiviazione o un disco gestito, è possibile scegliere il livello di protezione come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="d98ef-355">When creating a storage account or managed disk, there is a choice of protection as shown here:</span></span>

![Replica geografica abilitata per l'account di archiviazione di Azure][dbms-guide-figure-100]

<span data-ttu-id="d98ef-357">La replica locale di Archiviazione di Azure, con ridondanza locale, offre livelli di protezione contro la perdita di dati a causa di errori dell'infrastruttura che pochi clienti potrebbero permettersi di distribuire.</span><span class="sxs-lookup"><span data-stu-id="d98ef-357">Azure Storage Local Replication (Locally Redundant) provides levels of protection against data loss due to infrastructure failure that few customers could afford to deploy.</span></span> <span data-ttu-id="d98ef-358">Come illustrato sopra, sono disponibili quattro opzioni diverse più una quinta che rappresenta una variante di una delle prime tre.</span><span class="sxs-lookup"><span data-stu-id="d98ef-358">As shown above there are four different options with a fifth being a variation of one of the first three.</span></span> <span data-ttu-id="d98ef-359">Esaminando tali opzioni più da vicino è possibile distinguere:</span><span class="sxs-lookup"><span data-stu-id="d98ef-359">Looking closer at them we can distinguish:</span></span>

* <span data-ttu-id="d98ef-360">**Archiviazione con ridondanza locale Premium**: l'archiviazione Premium di Azure offre prestazioni elevate e supporto di dischi a bassa latenza per le macchine virtuali che eseguono carichi di lavoro con I/O intensivo.</span><span class="sxs-lookup"><span data-stu-id="d98ef-360">**Premium Locally Redundant Storage (LRS)**: Azure Premium Storage delivers high-performance, low-latency disk support for virtual machines running I/O-intensive workloads.</span></span> <span data-ttu-id="d98ef-361">Sono disponibili tre repliche dei dati nello stesso data center di Azure di un'area di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-361">There are three replicas of the data within the same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="d98ef-362">Le copie si trovano in domini di aggiornamento e di errore diversi. Per informazioni su questi concetti, vedere [questo][planning-guide-3.2] capitolo della [guida alla pianificazione][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="d98ef-362">The copies are in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in the [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="d98ef-363">In caso di una replica dei dati fuori servizio a causa di un errore del nodo archiviazione o di un errore del disco, viene generata automaticamente una nuova replica.</span><span class="sxs-lookup"><span data-stu-id="d98ef-363">In case of a replica of the data going out of service due to a storage node failure or disk failure, a new replica is generated automatically.</span></span>
* <span data-ttu-id="d98ef-364">**Archiviazione con ridondanza locale**: in questo caso sono disponibili tre repliche dei dati nello stesso data center di Azure di un'area di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-364">**Locally Redundant Storage (LRS)**: In this case, there are three replicas of the data within the same Azure datacenter of an Azure region.</span></span> <span data-ttu-id="d98ef-365">Le copie si trovano in domini di aggiornamento e di errore diversi. Per informazioni su questi concetti, vedere [questo][planning-guide-3.2] capitolo della [guida alla pianificazione][planning-guide].</span><span class="sxs-lookup"><span data-stu-id="d98ef-365">The copies are in different Fault and Upgrade Domains (for concepts see [this][planning-guide-3.2] chapter in the [Planning Guide][planning-guide]).</span></span> <span data-ttu-id="d98ef-366">In caso di una replica dei dati fuori servizio a causa di un errore del nodo archiviazione o di un errore del disco, viene generata automaticamente una nuova replica.</span><span class="sxs-lookup"><span data-stu-id="d98ef-366">In case of a replica of the data going out of service due to a storage node failure or disk failure, a new replica is generated automatically.</span></span> 
* <span data-ttu-id="d98ef-367">**Archiviazione con ridondanza geografica**: in questo caso, una replica asincrona genera tre repliche dei dati aggiuntive in un'altra area di Azure, nella maggior parte dei casi nella stessa area geografica (ad esempio, Europa settentrionale ed Europa occidentale).</span><span class="sxs-lookup"><span data-stu-id="d98ef-367">**Geo Redundant Storage (GRS)**: In this case, there is an asynchronous replication that feeds an additional three replicas of the data in another Azure Region, which is in most of the cases in the same geographical region (like North Europe and West Europe).</span></span> <span data-ttu-id="d98ef-368">Si ottengono così tre repliche aggiuntive, per un totale di sei repliche.</span><span class="sxs-lookup"><span data-stu-id="d98ef-368">This results in three additional replicas, so that there are six replicas in sum.</span></span> <span data-ttu-id="d98ef-369">Una variante di questa opzione prevede un'aggiunta in cui i dati nell'area di Azure con replica geografica possono essere usati per la lettura. In tal caso si parla di archiviazione con ridondanza geografica e accesso in lettura.</span><span class="sxs-lookup"><span data-stu-id="d98ef-369">A variation of this is an addition where the data in the geo replicated Azure region can be used for read purposes (Read-Access Geo-Redundant).</span></span>
* <span data-ttu-id="d98ef-370">**Archiviazione con ridondanza della zona**: in questo caso, le tre repliche dei dati vengono mantenute nella stessa area di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-370">**Zone Redundant Storage (ZRS)**: In this case, the three replicas of the data remain in the same Azure Region.</span></span> <span data-ttu-id="d98ef-371">Come spiegato in [questo][planning-guide-3.1] capitolo della [Planning Guide][planning-guide] (Guida alla pianificazione), un'area di Azure può essere costituita da un numero di data center in stretta vicinanza.</span><span class="sxs-lookup"><span data-stu-id="d98ef-371">As explained in [this][planning-guide-3.1] chapter of the [Planning Guide][planning-guide] an Azure region can be a number of datacenters in close proximity.</span></span> <span data-ttu-id="d98ef-372">Nel caso dell'archiviazione con ridondanza locale le repliche vengono distribuite nei vari data center che costituiscono un'area di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-372">In the case of LRS the replicas would be distributed over the different datacenters that make one Azure region.</span></span>

<span data-ttu-id="d98ef-373">Ulteriori informazioni sono disponibili [qui][storage-redundancy].</span><span class="sxs-lookup"><span data-stu-id="d98ef-373">More information can be found [here][storage-redundancy].</span></span>

> [!NOTE]
> <span data-ttu-id="d98ef-374">Per le distribuzioni DBMS, non è consigliabile usare l'archiviazione con ridondanza geografica.</span><span class="sxs-lookup"><span data-stu-id="d98ef-374">For DBMS deployments, the usage of Geo Redundant Storage is not recommended</span></span>
> 
> <span data-ttu-id="d98ef-375">La replica geografica di Archiviazione di Azure è asincrona.</span><span class="sxs-lookup"><span data-stu-id="d98ef-375">Azure Storage Geo-Replication is asynchronous.</span></span> <span data-ttu-id="d98ef-376">La replica dei singoli dischi montati in una singola VM non è sincronizzata nel passaggio di blocco.</span><span class="sxs-lookup"><span data-stu-id="d98ef-376">Replication of individual disks mounted to a single VM are not synchronized in lock step.</span></span> <span data-ttu-id="d98ef-377">Non è quindi appropriata per la replica di file DBMS distribuiti in diversi dischi o in un RAID software basato su più dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-377">Therefore, it is not suitable to replicate DBMS files that are distributed over different disks or deployed against a software RAID based on multiple disks.</span></span> <span data-ttu-id="d98ef-378">Il software DBMS richiede che l'archiviazione su disco persistente sia sincronizzata con precisione nei vari LUN e dischi/spindle sottostanti.</span><span class="sxs-lookup"><span data-stu-id="d98ef-378">DBMS software requires that the persistent disk storage is precisely synchronized across different LUNs and underlying disks/spindles.</span></span> <span data-ttu-id="d98ef-379">Il software DBMS usa vari meccanismi per ordinare in sequenza le attività di scrittura di I/O. In caso di variazioni anche di pochi millisecondi, un sistema DBMS segnala che l'archivio su disco di destinazione della replica è danneggiato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-379">DBMS software uses various mechanisms to sequence IO write activities and a DBMS reports that the disk storage targeted by the replication is corrupted if these vary even by a few milliseconds.</span></span> <span data-ttu-id="d98ef-380">Di conseguenza, se è assolutamente necessario implementare una configurazione database con un database esteso su più dischi con replica geografica, tale replica deve essere eseguita con strumenti e funzionalità di database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-380">Hence if one really wants a database configuration with a database stretched across multiple disks geo-replicated, such a replication needs to be performed with database means and functionality.</span></span> <span data-ttu-id="d98ef-381">Per eseguire questo processo non è possibile fare affidamento sulla replica geografica di Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-381">One should not rely on Azure Storage Geo-Replication to perform this job.</span></span> 
> 
> <span data-ttu-id="d98ef-382">Il problema risulta più semplice da spiegare con un sistema di esempio.</span><span class="sxs-lookup"><span data-stu-id="d98ef-382">The problem is simplest to explain with an example system.</span></span> <span data-ttu-id="d98ef-383">Si supponga di avere un sistema SAP caricato in Azure con otto dischi contenenti file di dati del sistema DBMS e un disco contenente il file di log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-383">Let’s assume you have an SAP system uploaded into Azure, which has eight disks containing data files of the DBMS plus one disk containing the transaction log file.</span></span> <span data-ttu-id="d98ef-384">In ognuno di questi nove dischi, i dati vengono scritti con un metodo coerente in base al sistema DBMS, sia che vengano scritti nei file di dati o nel file di log delle transazioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-384">Each one of these nine disks have data written to them in a consistent method according to the DBMS, whether the data is being written to the data or transaction log files.</span></span>
> 
> <span data-ttu-id="d98ef-385">Per eseguire correttamente la replica geografica dei dati e mantenere un'immagine coerente del database, la replica geografica del contenuto di tutti i nove dischi dovrà essere eseguita nell'ordine esatto in cui sono state eseguite le operazioni di I/O nei nove diversi dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-385">In order to properly geo-replicate the data and maintain a consistent database image, the content of all nine disks would have to be geo-replicated in the exact order the I/O operations were executed against the nine different disks.</span></span> <span data-ttu-id="d98ef-386">La replica geografica di Archiviazione di Azure, tuttavia, non consente di dichiarare dipendenze tra i dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-386">However, Azure Storage geo-replication does not allow to declare dependencies between disks.</span></span> <span data-ttu-id="d98ef-387">Di conseguenza, la replica geografica di Archiviazione di Microsoft Azure ignora la correlazione tra i contenuti dei nove diversi dischi e il fatto che le modifiche ai dati sono coerenti solo quando la replica viene eseguita nell'ordine in cui sono state eseguite le operazioni di I/O in tutti i nove dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-387">This means Microsoft Azure Storage geo-replication doesn’t know about the fact that the contents in these nine different disks are related to each other and that the data changes are consistent only when replicating in the order the I/O operations happened across all the nine disks.</span></span>
> 
> <span data-ttu-id="d98ef-388">Oltre alla possibilità concreta che le immagini con replica geografica nello scenario non forniscano un'immagine coerente del database, l'archiviazione con ridondanza geografica comporta anche una riduzione delle prestazioni che può influire notevolmente sulle prestazioni generali.</span><span class="sxs-lookup"><span data-stu-id="d98ef-388">Besides chances being high that the geo-replicated images in the scenario do not provide a consistent database image, there also is a performance penalty that shows up with geo redundant storage that can severely impact performance.</span></span> <span data-ttu-id="d98ef-389">In sintesi, non usare questo tipo di ridondanza di archiviazione per carichi di lavoro di tipo DBMS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-389">In summary, do not use this type of storage redundancy for DBMS type workloads.</span></span>
> 
> 

#### <a name="mapping-vhds-into-azure-virtual-machine-service-storage-accounts"></a><span data-ttu-id="d98ef-390">Mapping di dischi rigidi virtuali in account di archiviazione del servizio Macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-390">Mapping VHDs into Azure Virtual Machine Service Storage Accounts</span></span>
<span data-ttu-id="d98ef-391">Questo capitolo si applica solo agli account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-391">This chapter only applies to Azure Storage Accounts.</span></span> <span data-ttu-id="d98ef-392">Se si intende usare Managed Disks, le limitazioni indicate in questo capitolo non si applicano.</span><span class="sxs-lookup"><span data-stu-id="d98ef-392">If you plan to use Managed Disks, the limitations mentioned in this chapter do not apply.</span></span> <span data-ttu-id="d98ef-393">Per altre informazioni su Managed Disks, vedere il capitolo [Managed Disks][dbms-guide-managed-disks] di questa guida.</span><span class="sxs-lookup"><span data-stu-id="d98ef-393">For more information about Managed Disks, read chapter [Managed Disks][dbms-guide-managed-disks] of this guide.</span></span>

<span data-ttu-id="d98ef-394">Un account di archiviazione di Azure non è soltanto un costrutto amministrativo, ma è anche soggetto a limitazioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-394">An Azure Storage Account is not only an administrative construct, but also a subject of limitations.</span></span> <span data-ttu-id="d98ef-395">Le limitazioni variano a seconda che si parli di account di archiviazione Standard o Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-395">Whereas the limitations vary on whether we talk about an Azure Standard Storage Account or an Azure Premium Storage Account.</span></span> <span data-ttu-id="d98ef-396">Le funzionalità e le limitazioni sono elencate nel dettaglio [qui][storage-scalability-targets]</span><span class="sxs-lookup"><span data-stu-id="d98ef-396">The exact capabilities and limitations are listed [here][storage-scalability-targets]</span></span>

<span data-ttu-id="d98ef-397">Per l'archiviazione Standard di Azure è quindi importante tenere presente che è previsto un limite di IOPS per account di archiviazione. Vedere in proposito la riga contenente la frequenza di richiesta totale in [questo articolo][storage-scalability-targets].</span><span class="sxs-lookup"><span data-stu-id="d98ef-397">So for Azure Standard Storage it is important to note there is a limit on the IOPS per storage account (Row containing ‘Total Request Rate’ in [the article][storage-scalability-targets]).</span></span> <span data-ttu-id="d98ef-398">Esiste poi un limite iniziale di 100 account di archiviazione per ogni sottoscrizione di Azure (a partire da luglio 2015).</span><span class="sxs-lookup"><span data-stu-id="d98ef-398">In addition, there is an initial limit of 100 Storage Accounts per Azure subscription (as of July 2015).</span></span> <span data-ttu-id="d98ef-399">È quindi consigliabile bilanciare il numero di IOPS delle macchine virtuali tra più account di archiviazione quando si usa Archiviazione Standard di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-399">Therefore, it is recommended to balance IOPS of VMs between multiple storage accounts when using Azure Standard Storage.</span></span> <span data-ttu-id="d98ef-400">Teoricamente, una singola macchina virtuale dovrebbe usare un solo account di archiviazione, se possibile.</span><span class="sxs-lookup"><span data-stu-id="d98ef-400">Whereas a single VM ideally uses one storage account if possible.</span></span> <span data-ttu-id="d98ef-401">Se si parla quindi di distribuzioni DBMS in cui ogni disco rigido virtuale ospitato in Archiviazione Standard di Azure potrebbe raggiungere il relativo limite di quota, è necessario distribuire solo 30-40 dischi rigidi virtuali per ogni account di archiviazione di Azure che usa Archiviazione Standard di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-401">So if we talk about DBMS deployments where each VHD that is hosted on Azure Standard Storage could reach its quota limit, you should only deploy 30-40 VHDs per Azure Storage Account that uses Azure Standard Storage.</span></span> <span data-ttu-id="d98ef-402">D'altra parte, usare Archiviazione Premium di Azure per archiviare volumi di database di grandi dimensioni potrebbe essere possibile in termini di IOPS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-402">On the other hand, if you leverage Azure Premium Storage and want to store large database volumes, you might be fine in terms of IOPS.</span></span> <span data-ttu-id="d98ef-403">Un account di archiviazione Premium di Azure, però, è molto più restrittivo in termini di volume di dati rispetto a un account di archiviazione Standard di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-403">But an Azure Premium Storage Account is way more restrictive in data volume than an Azure Standard Storage Account.</span></span> <span data-ttu-id="d98ef-404">Di conseguenza, è possibile distribuire solo un numero limitato di dischi rigidi virtuali all'interno di un account di archiviazione Premium di Azure prima di raggiungere il limite di volume di dati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-404">As a result, you can only deploy a limited number of VHDs within an Azure Premium Storage Account before hitting the data volume limit.</span></span> <span data-ttu-id="d98ef-405">Un account di archiviazione di Azure può essere paragonato a una "SAN virtuale" con funzionalità limitate in termini di operazioni di I/O al secondo e/o di capacità.</span><span class="sxs-lookup"><span data-stu-id="d98ef-405">At the end, think of an Azure Storage Account as a “Virtual SAN” that has limited capabilities in IOPS and/or capacity.</span></span> <span data-ttu-id="d98ef-406">In quest'ottica, come nelle distribuzioni locali, occorre poi definire il layout dei dischi rigidi virtuali dei diversi sistemi SAP nei vari "dispositivi SAN immaginari" o account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-406">As a result, the task remains, as in on-premises deployments, to define the layout of the VHDs of the different SAP systems over the different ‘imaginary SAN devices’ or Azure Storage Accounts.</span></span>

<span data-ttu-id="d98ef-407">Per Archiviazione Standard di Azure, non è consigliabile presentare a una singola VM risorse di archiviazione di diversi account di archiviazione, se possibile.</span><span class="sxs-lookup"><span data-stu-id="d98ef-407">For Azure Standard Storage, it is not recommended to present storage from different storage accounts to a single VM if possible.</span></span>

<span data-ttu-id="d98ef-408">Quando si usano VM di Azure serie DS o GS, è possibile montare dischi rigidi virtuali da account di archiviazione Standard e Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-408">When using the DS or GS-series of Azure VMs, it is possible to mount VHDs out of Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="d98ef-409">Risorse di archiviazione così eterogenee possono essere usate, ad esempio, per la scrittura di backup in dischi rigidi virtuali supportati da Archiviazione Standard e l'inserimento di file di log e di dati DBMS in Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="d98ef-409">Use cases like writing backups into Standard Storage backed VHDs and having DBMS data and log files on Premium Storage come to mind where such heterogeneous storage could be leveraged.</span></span> 

<span data-ttu-id="d98ef-410">In base ai test e alle distribuzioni del cliente, è possibile effettuare il provisioning di circa 30-40 dischi rigidi virtuali contenenti file di dati di database e file di log in un singolo account di archiviazione Standard di Azure e ottenere prestazioni accettabili.</span><span class="sxs-lookup"><span data-stu-id="d98ef-410">Based on customer deployments and testing around 30 to 40 VHDs containing database data files and log files can be provisioned on a single Azure Standard Storage Account with acceptable performance.</span></span> <span data-ttu-id="d98ef-411">Come accennato in precedenza, è più probabile che l'account di archiviazione Premium di Azure presenti limitazioni in termini di capacità anziché di IOPS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-411">As mentioned earlier, the limitation of an Azure Premium Storage Account is likely to be the data capacity it can hold and not IOPS.</span></span>

<span data-ttu-id="d98ef-412">Come per i dispositivi SAN locali, la condivisione deve essere monitorata allo scopo di rilevare i colli di bottiglia in un account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-412">As with SAN devices on-premises, sharing requires some monitoring in order to eventually detect bottlenecks on an Azure Storage Account.</span></span> <span data-ttu-id="d98ef-413">L'estensione di monitoraggio di Azure per SAP e il portale di Azure sono strumenti che consentono di rilevare account di archiviazione di Azure occupati che potrebbero fornire prestazioni di I/O non ottimali.</span><span class="sxs-lookup"><span data-stu-id="d98ef-413">The Azure Monitoring Extension for SAP and the Azure portal are tools that can be used to detect busy Azure Storage Accounts that may be delivering suboptimal IO performance.</span></span>  <span data-ttu-id="d98ef-414">Se viene rilevata questa situazione, è consigliabile spostare le VM occupate in un altro account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-414">If this situation is detected, it is recommended to move busy VMs to another Azure Storage Account.</span></span> <span data-ttu-id="d98ef-415">Per informazioni dettagliate su come attivare le funzionalità di monitoraggio dell'host SAP, vedere la [guida alla distribuzione][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="d98ef-415">Refer to the [Deployment Guide][deployment-guide] for details on how to activate the SAP host monitoring capabilities.</span></span>

<span data-ttu-id="d98ef-416">Un altro articolo che riepiloga le procedure consigliate per Archiviazione Standard di Azure e gli account di Archiviazione Standard di Azure è disponibile qui <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-416">Another article summarizing best practices around Azure Standard Storage and Azure Standard Storage Accounts can be found here <https://blogs.msdn.com/b/mast/archive/2014/10/14/configuring-azure-virtual-machines-for-optimal-storage-performance.aspx></span></span>

#### <span data-ttu-id="d98ef-417"><a name="f42c6cb5-d563-484d-9667-b07ae51bce29"></a>Managed Disks</span><span class="sxs-lookup"><span data-stu-id="d98ef-417"><a name="f42c6cb5-d563-484d-9667-b07ae51bce29"></a>Managed Disks</span></span>
<span data-ttu-id="d98ef-418">I Managed Disks sono un nuovo tipo di risorsa in Azure Resource Manager, utilizzabile al posto dei dischi rigidi virtuali archiviati negli account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-418">Managed Disks are a new resource type in Azure Resource Manager that can be used instead of VHDs that are stored in Azure Storage Accounts.</span></span> <span data-ttu-id="d98ef-419">I dischi di Managed Disks si allineano automaticamente al set di disponibilità della macchina virtuale a cui sono collegati, aumentando così la disponibilità della macchina virtuale e dei servizi in esecuzione su di essa.</span><span class="sxs-lookup"><span data-stu-id="d98ef-419">Managed Disks automatically align with the Availability Set of the virtual machine they are attached to and therefore increase the availability of your virtual machine and the services that are running on the virtual machine.</span></span> <span data-ttu-id="d98ef-420">Per altre informazioni, vedere l'[articolo di panoramica](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span><span class="sxs-lookup"><span data-stu-id="d98ef-420">To learn more, read the [overview article](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span></span>

<span data-ttu-id="d98ef-421">SAP attualmente supporta solo Managed Disks Premium.</span><span class="sxs-lookup"><span data-stu-id="d98ef-421">SAP currently only supports Premium Managed Disks.</span></span> <span data-ttu-id="d98ef-422">Per altri dettagli, vedere la nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="d98ef-422">Read SAP Note [1928533] for more details.</span></span>

#### <a name="moving-deployed-dbms-vms-from-azure-standard-storage-to-azure-premium-storage"></a><span data-ttu-id="d98ef-423">Spostamento di macchine virtuali DBMS distribuite da Archiviazione Standard in Archiviazione Premium di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-423">Moving deployed DBMS VMs from Azure Standard Storage to Azure Premium Storage</span></span>
<span data-ttu-id="d98ef-424">Quando un cliente vuole spostare una macchina virtuale distribuita da Archiviazione Standard in Archiviazione Premium di Azure, gli scenari si fanno interessanti.</span><span class="sxs-lookup"><span data-stu-id="d98ef-424">We encounter quite some scenarios where you as customer want to move a deployed VM from Azure Standard Storage into Azure Premium Storage.</span></span> <span data-ttu-id="d98ef-425">Se i dischi sono archiviati negli account di archiviazione di Azure, non è possibile eseguire questa operazione senza spostare fisicamente i dati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-425">If your disks are stored in Azure Storage Accounts, this is not possible without physically moving the data.</span></span> <span data-ttu-id="d98ef-426">A tale scopo, è possibile procedere in diversi modi:</span><span class="sxs-lookup"><span data-stu-id="d98ef-426">There are several ways to achieve the goal:</span></span>

* <span data-ttu-id="d98ef-427">È possibile copiare semplicemente tutti i dischi rigidi virtuali, il VHD di base, nonché i VHD di dati in un nuovo account di archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-427">You could simply copy all VHDs, base VHD as well as data VHDs into a new Azure Premium Storage Account.</span></span> <span data-ttu-id="d98ef-428">Spesso la scelta del numero di dischi rigidi virtuali in Archiviazione Standard di Azure non è basata sulla necessità effettiva del volume dati,</span><span class="sxs-lookup"><span data-stu-id="d98ef-428">Often you chose the number of VHDs in Azure Standard Storage not because of the fact that you needed the data volume.</span></span> <span data-ttu-id="d98ef-429">ma piuttosto sulle esigenze in termini di IOPS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-429">But you needed that many VHDs because of the IOPS.</span></span> <span data-ttu-id="d98ef-430">Passando ad Archiviazione Premium di Azure, è possibile usare un numero molto inferiore di dischi rigidi virtuali per ottenere la stessa velocità effettiva delle operazioni di I/O al secondo.</span><span class="sxs-lookup"><span data-stu-id="d98ef-430">Now that you move to Azure Premium Storage you could go with way fewer VHDs to achieve the same IOPS throughput.</span></span> <span data-ttu-id="d98ef-431">Dato che in Archiviazione di Azure Standard si paga la quantità di dati usati e non le dimensioni del disco nominale, il numero di dischi rigidi virtuali non è determinante in termini di costi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-431">Given the fact that in Azure Standard Storage you pay for the used data and not the nominal disk size, the number of VHDs did not really matter in terms of costs.</span></span> <span data-ttu-id="d98ef-432">In Archiviazione Premium di Azure, invece, si pagano le dimensioni del disco nominale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-432">However, with Azure Premium Storage, you would pay for the nominal disk size.</span></span> <span data-ttu-id="d98ef-433">Per questo motivo, la maggior parte dei clienti prova a limitare il numero di dischi rigidi virtuali di Azure in Archiviazione Premium al numero necessario per raggiungere la velocità effettiva delle operazioni di I/O al secondo richiesta.</span><span class="sxs-lookup"><span data-stu-id="d98ef-433">Therefore, most of the customers try to keep the number of Azure VHDs in Premium Storage at the number needed to achieve the IOPS throughput necessary.</span></span> <span data-ttu-id="d98ef-434">La maggior parte dei clienti sceglie quindi una semplice copia 1:1.</span><span class="sxs-lookup"><span data-stu-id="d98ef-434">So, most customers decide against the way of a simple 1:1 copy.</span></span>
* <span data-ttu-id="d98ef-435">Se non è già stato fatto, è possibile montare un singolo disco rigido virtuale che può contenere un backup del database SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-435">If not yet mounted, you mount a single VHD that can contain a database backup of your SAP database.</span></span> <span data-ttu-id="d98ef-436">Dopo il backup, smontare tutti i dischi rigidi virtuali incluso quello contenente il backup e copiare quest'ultimo, insieme al VHD di base, in un account di archiviazione Premium di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-436">After the backup, you unmount all VHDs including the VHD containing the backup and copy the base VHD and the VHD with the backup into an Azure Premium Storage account.</span></span> <span data-ttu-id="d98ef-437">È quindi necessario distribuire la macchina virtuale basata sul VHD di base e montare il disco rigido virtuale con il backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-437">You would then deploy the VM based on the base VHD and mount the VHD with the backup.</span></span> <span data-ttu-id="d98ef-438">A questo punto è possibile creare dischi di Archiviazione Premium vuoti aggiuntivi per la macchina virtuale, che vengono usati per il ripristino del database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-438">Now you create additional empty Premium Storage Disks for the VM that are used to restore the database into.</span></span> <span data-ttu-id="d98ef-439">Questo presuppone che il sistema DBMS consenta di modificare i percorsi dei file di dati e di log come parte del processo di ripristino.</span><span class="sxs-lookup"><span data-stu-id="d98ef-439">This assumes that the DBMS allows you to change paths to the data and log files as part of the restore process.</span></span>
* <span data-ttu-id="d98ef-440">Un'altra possibilità è una variante del processo precedente. È sufficiente copiare il disco rigido virtuale di backup in Archiviazione Premium di Azure e collegarlo a una macchina virtuale appena distribuita e installata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-440">Another possibility is a variation of the former process, where you just copy the backup VHD into Azure Premium Storage and attach it against a VM that you newly deployed and installed.</span></span>
* <span data-ttu-id="d98ef-441">La quarta possibilità si applica al caso in cui è necessario modificare il numero di file di dati del database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-441">The fourth possibility you would choose when you are in need to change the number of data files of your database.</span></span> <span data-ttu-id="d98ef-442">In tal caso si esegue una copia di sistema omogeneo SAP usando operazioni di importazione ed esportazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-442">In such a case, you would perform an SAP homogenous system copy using export/import.</span></span> <span data-ttu-id="d98ef-443">Inserire i file di esportazione in un disco rigido virtuale copiato in un account di archiviazione Premium di Azure e collegare il VHD a una macchina virtuale che consente di eseguire i processi di importazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-443">Put those export files into a VHD that is copied into an Azure Premium Storage Account and attach it to a VM that you use to run the import processes.</span></span> <span data-ttu-id="d98ef-444">Questa possibilità viene usata dai clienti principalmente per ridurre il numero di file di dati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-444">Customers use this possibility mainly when they want to decrease the number of data files.</span></span>

<span data-ttu-id="d98ef-445">Se si usa Managed Disks, è possibile eseguire la migrazione ad Archiviazione Premium come segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-445">If you use Managed Disks, you can migrate to Premium Storage by:</span></span>

1. <span data-ttu-id="d98ef-446">Deallocare la macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="d98ef-446">Deallocate the virtual machine</span></span>
2. <span data-ttu-id="d98ef-447">Se necessario, aggiornare la macchina virtuale a dimensioni che supportino Archiviazione Premium (ad esempio, DS o GS)</span><span class="sxs-lookup"><span data-stu-id="d98ef-447">If necessary, resize the virtual machine to a size that supports Premium Storage (for example DS or GS)</span></span>
3. <span data-ttu-id="d98ef-448">Modificare il tipo di account Managed Disks in Premium (SSD)</span><span class="sxs-lookup"><span data-stu-id="d98ef-448">Change the Managed Disk account type to Premium (SSD)</span></span>
4. <span data-ttu-id="d98ef-449">Avviare la macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="d98ef-449">Start your virtual machine</span></span>

### <a name="deployment-of-vms-for-sap-in-azure"></a><span data-ttu-id="d98ef-450">Distribuzione di macchine virtuali per SAP in Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-450">Deployment of VMs for SAP in Azure</span></span>
<span data-ttu-id="d98ef-451">Microsoft Azure offre diversi modi per distribuire le VM e i dischi associati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-451">Microsoft Azure offers multiple ways to deploy VMs and associated disks.</span></span> <span data-ttu-id="d98ef-452">È quindi importante comprendere le differenze, perché le operazioni di preparazione delle VM possono variare in base al metodo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-452">Thereby it is important to understand the differences since preparations of the VMs might differ dependent on the way of deployment.</span></span> <span data-ttu-id="d98ef-453">In generale vengono esaminati gli scenari descritti nei capitoli seguenti.</span><span class="sxs-lookup"><span data-stu-id="d98ef-453">In general, we look into the scenarios described in the following chapters.</span></span>

#### <a name="deploying-a-vm-from-the-azure-marketplace"></a><span data-ttu-id="d98ef-454">Distribuzione di una macchina virtuale da Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="d98ef-454">Deploying a VM from the Azure Marketplace</span></span>
<span data-ttu-id="d98ef-455">Per distribuire la VM si sceglie di usare un'immagine disponibile in Azure Marketplace, fornita da Microsoft o da terze parti.</span><span class="sxs-lookup"><span data-stu-id="d98ef-455">You like to take a Microsoft or third party provided image from the Azure Marketplace to deploy your VM.</span></span> <span data-ttu-id="d98ef-456">Dopo aver distribuito la VM in Azure, si installa il software SAP all'interno della VM con le stesse linee guida e gli stessi strumenti usati in un ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-456">After you deployed your VM in Azure, you follow the same guidelines and tools to install the SAP software inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="d98ef-457">Per l'installazione del software SAP all'interno della VM di Azure, SAP e Microsoft consigliano di caricare e archiviare il supporto di installazione SAP in dischi o di creare una VM di Azure che funga da "file server" contenente tutti i supporti di installazione SAP necessari.</span><span class="sxs-lookup"><span data-stu-id="d98ef-457">For installing the SAP software inside the Azure VM, SAP and Microsoft recommend uploading and store the SAP installation media in disks or to create an Azure VM working as a 'File server', which contains all the necessary SAP installation media.</span></span>

#### <a name="deploying-a-vm-with-a-customer-specific-generalized-image"></a><span data-ttu-id="d98ef-458">Distribuzione di una VM con un'immagine generalizzata specifica del cliente</span><span class="sxs-lookup"><span data-stu-id="d98ef-458">Deploying a VM with a customer-specific generalized image</span></span>
<span data-ttu-id="d98ef-459">Le immagini disponibili in Azure Marketplace potrebbero non soddisfare le esigenze a causa di specifici requisiti di patch riguardanti la versione del sistema operativo o DBMS in uso.</span><span class="sxs-lookup"><span data-stu-id="d98ef-459">Due to specific patch requirements regarding your OS or DBMS version, the provided images in the Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="d98ef-460">Per questo motivo, potrebbe essere necessario creare una VM usando una propria immagine "privata" di VM del sistema operativo o DBMS che in seguito potrà essere distribuita diverse volte.</span><span class="sxs-lookup"><span data-stu-id="d98ef-460">Therefore, you might need to create a VM using your own 'private' OS/DBMS VM image, which can be deployed several times afterwards.</span></span> <span data-ttu-id="d98ef-461">Per preparare tale immagine "privata" per la duplicazione, è necessario generalizzare il sistema operativo nella VM locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-461">To prepare such a 'private' image for duplication, the OS must be generalized on the on-premises VM.</span></span> <span data-ttu-id="d98ef-462">Per informazioni dettagliate su come generalizzare una VM, vedere la [guida alla distribuzione][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="d98ef-462">Refer to the [Deployment Guide][deployment-guide] for details on how to generalize a VM.</span></span>

<span data-ttu-id="d98ef-463">Se sono già stati installati contenuti SAP nella VM locale, in particolare per sistemi a 2 livelli, è possibile adattare le impostazioni di sistema SAP dopo la distribuzione della VM di Azure con la procedura di ridenominazione dell'istanza supportata da SAP Software Provisioning Manager (nota SAP [1619720]).</span><span class="sxs-lookup"><span data-stu-id="d98ef-463">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt the SAP system settings after the deployment of the Azure VM through the instance rename procedure supported by the SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="d98ef-464">In caso contrario, è possibile installare il software SAP in un secondo momento dopo la distribuzione della macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-464">Otherwise you can install the SAP software later after the deployment of the Azure VM.</span></span>

<span data-ttu-id="d98ef-465">Per quanto riguarda il contenuto di database usato dall'applicazione SAP, è possibile generare nuovo contenuto tramite un'installazione SAP oppure importarlo in Azure usando un disco rigido virtuale con un backup del database DBMS o sfruttando le funzionalità del sistema DBMS per eseguire il backup direttamente in Archiviazione di Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-465">As of the database content used by the SAP application, you can either generate the content freshly by an SAP installation or you can import your content into Azure by using a VHD with a DBMS database backup or by leveraging capabilities of the DBMS to directly backup into Microsoft Azure Storage.</span></span> <span data-ttu-id="d98ef-466">In tal caso, è anche possibile preparare i dischi rigidi virtuali con i file di log e i dati DBMS in locale e quindi importarli come dischi in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-466">In this case, you could also prepare VHDs with the DBMS data and log files on-premises and then import those as Disks into Azure.</span></span> <span data-ttu-id="d98ef-467">Il trasferimento di dati DBMS caricati da locale ad Azure, tuttavia, funzionerà solo su dischi rigidi virtuali preparati in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-467">But the transfer of DBMS data, which is getting loaded from on-premises to Azure would work over VHD disks that need to be prepared on-premises.</span></span>

#### <a name="moving-a-vm-from-on-premises-to-azure-with-a-non-generalized-disk"></a><span data-ttu-id="d98ef-468">Spostamento di una macchina virtuale da locale in Azure con un disco non generalizzato</span><span class="sxs-lookup"><span data-stu-id="d98ef-468">Moving a VM from on-premises to Azure with a non-generalized disk</span></span>
<span data-ttu-id="d98ef-469">Per spostare un sistema SAP specifico da locale in Azure,</span><span class="sxs-lookup"><span data-stu-id="d98ef-469">You plan to move a specific SAP system from on-premises to Azure (lift and shift).</span></span> <span data-ttu-id="d98ef-470">è possibile caricare in Azure il disco contenente il sistema operativo, i file binari SAP e gli eventuali file binari DBMS, nonché i dischi con i file di dati e di log del sistema DBMS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-470">This can be done by uploading the disk, which contains the OS, the SAP binaries, and eventual DBMS binaries plus the disks with the data and log files of the DBMS to Azure.</span></span> <span data-ttu-id="d98ef-471">A differenza dello scenario 2 illustrato sopra, il nome host, il SID SAP e gli account utente SAP vengono mantenuti nella VM di Azure così come sono stati configurati nell'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-471">In opposite to scenario #2 above, you keep the hostname, SAP SID, and SAP user accounts in the Azure VM as they were configured in the on-premises environment.</span></span> <span data-ttu-id="d98ef-472">Di conseguenza, non è necessario generalizzare l'immagine.</span><span class="sxs-lookup"><span data-stu-id="d98ef-472">Therefore, generalizing the image is not necessary.</span></span> <span data-ttu-id="d98ef-473">Questo caso si applica prevalentemente a scenari cross-premise in cui il panorama applicativo SAP viene eseguito in parte in locale e in parte in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-473">This case mostly applies for Cross-Premises scenarios where a part of the SAP landscape is run on-premises and parts on Azure.</span></span>

## <span data-ttu-id="d98ef-474"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>Disponibilità elevata e ripristino di emergenza con VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-474"><a name="871dfc27-e509-4222-9370-ab1de77021c3"></a>High Availability and Disaster Recovery with Azure VMs</span></span>
<span data-ttu-id="d98ef-475">Di seguito sono illustrate le funzionalità di disponibilità elevata e ripristino di emergenza offerte da Azure, valide per diversi componenti usati per le distribuzioni SAP e DBMS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-475">Azure offers the following High Availability (HA) and Disaster Recovery (DR) functionalities, which apply to different components we would use for SAP and DBMS deployments</span></span>

### <a name="vms-deployed-on-azure-nodes"></a><span data-ttu-id="d98ef-476">Macchine virtuali distribuite in nodi di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-476">VMs deployed on Azure Nodes</span></span>
<span data-ttu-id="d98ef-477">La piattaforma Azure non offre funzionalità quali Live Migration per le macchine virtuali distribuite.</span><span class="sxs-lookup"><span data-stu-id="d98ef-477">The Azure Platform does not offer features such as Live Migration for deployed VMs.</span></span> <span data-ttu-id="d98ef-478">Ciò significa che se sono necessari interventi di manutenzione in un cluster di server in cui è distribuita una macchina virtuale, questa deve essere arrestata e riavviata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-478">This means if there is maintenance necessary on a server cluster on which a VM is deployed, the VM needs to get stopped and restarted.</span></span> <span data-ttu-id="d98ef-479">In Azure la manutenzione viene eseguita usando i domini di aggiornamento all'interno dei cluster di server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-479">Maintenance in Azure is performed using so called Upgrade Domains within clusters of servers.</span></span> <span data-ttu-id="d98ef-480">È possibile eseguire la manutenzione di un solo dominio di aggiornamento alla volta.</span><span class="sxs-lookup"><span data-stu-id="d98ef-480">Only one Upgrade Domain at a time is being maintained.</span></span> <span data-ttu-id="d98ef-481">Durante tale intervento, mentre la VM viene arrestata, sottoposta a manutenzione e riavviata si verifica un'interruzione del servizio.</span><span class="sxs-lookup"><span data-stu-id="d98ef-481">During such a restart, there is an interruption of service while the VM is shut down, maintenance is performed and VM restarted.</span></span> <span data-ttu-id="d98ef-482">La maggior parte dei fornitori di sistemi DBMS, tuttavia, offre funzionalità di disponibilità elevata e ripristino di emergenza che consentono di riavviare rapidamente i servizi DBMS in un altro nodo, se il nodo primario non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="d98ef-482">Most DBMS vendors however provide High Availability and Disaster Recovery functionality that quickly restarts the DBMS services on another node if the primary node is unavailable.</span></span> <span data-ttu-id="d98ef-483">La piattaforma Azure offre funzionalità per la distribuzione di VM, Archiviazione e altri servizi di Azure nei domini di aggiornamento per limitare l'impatto degli errori di infrastruttura o della manutenzione pianificata a un sottoinsieme ridotto di VM o servizi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-483">The Azure Platform offers functionality to distribute VMs, Storage, and other Azure services across Upgrade Domains to ensure that planned maintenance or infrastructure failures would only impact a small subset of VMs or services.</span></span>  <span data-ttu-id="d98ef-484">Con un'attenta pianificazione, è possibile ottenere livelli di disponibilità simili alle infrastrutture locali.</span><span class="sxs-lookup"><span data-stu-id="d98ef-484">With careful planning, it is possible to achieve availability levels comparable to on-premises infrastructures.</span></span>

<span data-ttu-id="d98ef-485">I set di disponibilità di Microsoft Azure sono un raggruppamento logico di VM o servizi che garantisce che le VM e gli altri servizi vengano distribuiti in diversi domini di aggiornamento e di errore all'interno di un cluster in modo che in un determinato momento si verifichi l'arresto di un solo nodo. Per altri dettagli, vedere [questo articolo (per Linux)][virtual-machines-manage-availability-linux] o [questo (per Windows)][virtual-machines-manage-availability-windows].</span><span class="sxs-lookup"><span data-stu-id="d98ef-485">Microsoft Azure Availability Sets are a logical grouping of VMs or Services that ensures VMs and other services are distributed to different Fault and Upgrade Domains within a cluster such that there would only be one node shutdown at any one point in time (read [this (Linux)][virtual-machines-manage-availability-linux] or [this (Windows)][virtual-machines-manage-availability-windows] article for more details).</span></span>

<span data-ttu-id="d98ef-486">Questa funzione deve essere configurata appositamente durante il rollout delle macchine virtuali, come illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="d98ef-486">It needs to be configured by purpose when rolling out VMs as seen here:</span></span>

![Definizione di un set di disponibilità per le configurazioni a disponibilità DBMS][dbms-guide-figure-200]

<span data-ttu-id="d98ef-488">Allo scopo di creare configurazioni a disponibilità elevata di distribuzioni DBMS, indipendentemente dalla singola funzionalità DBMS con disponibilità elevata usata, per le macchine virtuali DBMS è necessario quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-488">If we want to create highly available configurations of DBMS deployments (independent of the individual DBMS HA functionality used), the DBMS VMs would need to:</span></span>

* <span data-ttu-id="d98ef-489">Aggiungere le VM alla stessa rete virtuale di Azure (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span><span class="sxs-lookup"><span data-stu-id="d98ef-489">Add the VMs to the same Azure Virtual Network (<https://azure.microsoft.com/documentation/services/virtual-network/>)</span></span>
* <span data-ttu-id="d98ef-490">Le macchine virtuali della configurazione a disponibilità elevata devono trovarsi anch'esse nella stessa subnet.</span><span class="sxs-lookup"><span data-stu-id="d98ef-490">The VMs of the HA configuration should also be in the same subnet.</span></span> <span data-ttu-id="d98ef-491">La risoluzione dei nomi tra le diverse subnet non è possibile nelle distribuzioni solo cloud. Funziona solo la risoluzione IP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-491">Name resolution between the different subnets is not possible in Cloud-Only deployments, only IP resolution works.</span></span> <span data-ttu-id="d98ef-492">Se si usa la connettività da sito a sito o ExpressRoute per le distribuzioni cross-premise, è già presente una rete con almeno una subnet.</span><span class="sxs-lookup"><span data-stu-id="d98ef-492">Using site-to-site or ExpressRoute connectivity for Cross-Premises deployments, a network with at least one subnet is already established.</span></span> <span data-ttu-id="d98ef-493">La risoluzione dei nomi viene eseguita in base all'infrastruttura di rete e ai criteri di Active Directory locali.</span><span class="sxs-lookup"><span data-stu-id="d98ef-493">Name resolution is done according to the on-premises AD policies and network infrastructure.</span></span> 

[comment]: <> (MSSedusch TODO Test if still true in ARM)

#### <a name="ip-addresses"></a><span data-ttu-id="d98ef-495">Indirizzi IP</span><span class="sxs-lookup"><span data-stu-id="d98ef-495">IP Addresses</span></span>
<span data-ttu-id="d98ef-496">È consigliabile impostare le macchine virtuali per le configurazioni a disponibilità elevata in modo resiliente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-496">It is highly recommended to setup the VMs for HA configurations in a resilient way.</span></span> <span data-ttu-id="d98ef-497">In Azure non è possibile fare affidamento sugli indirizzi IP per indirizzare i partner a disponibilità elevata all'interno della configurazione a disponibilità elevata, a meno che non vengano usati indirizzi IP statici.</span><span class="sxs-lookup"><span data-stu-id="d98ef-497">Relying on IP addresses to address the HA partner(s) within the HA configuration is not reliable in Azure unless static IP addresses are used.</span></span> <span data-ttu-id="d98ef-498">Azure prevede due tipi di "arresto".</span><span class="sxs-lookup"><span data-stu-id="d98ef-498">There are two "Shutdown" concepts in Azure:</span></span>

* <span data-ttu-id="d98ef-499">Arresto tramite il portale di Azure o il cmdlet Stop-AzureRmVM di Azure PowerShell: la macchina virtuale viene arrestata e deallocata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-499">Shut down through Azure portal or Azure PowerShell cmdlet Stop-AzureRmVM: In this case, the Virtual Machine gets shutdown and de-allocated.</span></span> <span data-ttu-id="d98ef-500">La VM non viene più addebitata all'account Azure e gli unici costi sostenuti sono quelli relativi alle risorse di archiviazione usate.</span><span class="sxs-lookup"><span data-stu-id="d98ef-500">Your Azure account is no longer charged for this VM so the only charges that incur are for the storage used.</span></span> <span data-ttu-id="d98ef-501">Tuttavia, se l'indirizzo IP privato dell'interfaccia di rete non è statico viene rilasciato e non è detto che, dopo il riavvio della macchina virtuale, all'interfaccia di rete venga assegnato nuovamente l'indirizzo IP precedente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-501">However, if the private IP address of the network interface was not static, the IP address is released and it is not guaranteed that the network interface gets the old IP address assigned again after a restart of the VM.</span></span> <span data-ttu-id="d98ef-502">L'arresto tramite il portale di Azure o la chiamata a Stop-AzureRmVM determina automaticamente la deallocazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-502">Performing the shut down through the Azure portal or by calling Stop-AzureRmVM automatically causes de-allocation.</span></span> <span data-ttu-id="d98ef-503">Per evitare la deallocazione della macchina virtuale, usare Stop-AzureRmVM -StayProvisioned.</span><span class="sxs-lookup"><span data-stu-id="d98ef-503">If you do not want to deallocate the machine use Stop-AzureRmVM -StayProvisioned</span></span> 
* <span data-ttu-id="d98ef-504">Arresto a livello di sistema operativo: la macchina virtuale viene arrestata ma NON viene deallocata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-504">If you shut down the VM from an OS level, the VM gets shut down and NOT de-allocated.</span></span> <span data-ttu-id="d98ef-505">In tal caso, la VM viene comunque addebitata all'account Azure anche se è stata arrestata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-505">However, in this case, your Azure account is still charged for the VM, despite the fact that it is shutdown.</span></span> <span data-ttu-id="d98ef-506">L'assegnazione dell'indirizzo IP a una VM arrestata in questo caso rimane invariata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-506">In such a case, the assignment of the IP address to a stopped VM remains intact.</span></span> <span data-ttu-id="d98ef-507">L'arresto della VM dall'interno non forza automaticamente la deallocazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-507">Shutting down the VM from within does not automatically force de-allocation.</span></span>

<span data-ttu-id="d98ef-508">Anche per gli scenari cross-premise, per impostazione predefinita l'arresto e la deallocazione annullano l'assegnazione degli indirizzi IP alla VM, anche se i criteri locali nelle impostazioni DHCP non lo prevedono.</span><span class="sxs-lookup"><span data-stu-id="d98ef-508">Even for Cross-Premises scenarios, by default a shutdown and de-allocation means de-assignment of the IP addresses from the VM, even if on-premises policies in DHCP settings are different.</span></span> 

* <span data-ttu-id="d98ef-509">Fa eccezione l'assegnazione di un indirizzo IP statico a un'interfaccia di rete, descritta [qui][virtual-networks-reserved-private-ip].</span><span class="sxs-lookup"><span data-stu-id="d98ef-509">The exception is if one assigns a static IP address to a network interface as described [here][virtual-networks-reserved-private-ip].</span></span>
* <span data-ttu-id="d98ef-510">In questo caso l'indirizzo IP rimane fisso, purché l'interfaccia di rete non venga eliminata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-510">In such a case the IP address remains fixed as long as the network interface is not deleted.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d98ef-511">Per garantire la semplicità e la gestibilità dell'intera distribuzione, è consigliabile configurare in Azure le macchine virtuali che partecipano a una configurazione DBMS a disponibilità elevata o di ripristino di emergenza, facendo in modo che la risoluzione dei nomi tra le diverse macchine virtuali coinvolte funzioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-511">In order to keep the whole deployment simple and manageable, the clear recommendation is to setup the VMs partnering in a DBMS HA or DR configuration within Azure in a way that there is a functioning name resolution between the different VMs involved.</span></span>
> 
> 

## <a name="deployment-of-host-monitoring"></a><span data-ttu-id="d98ef-512">Distribuzione del monitoraggio host</span><span class="sxs-lookup"><span data-stu-id="d98ef-512">Deployment of Host Monitoring</span></span>
<span data-ttu-id="d98ef-513">Per un uso produttivo delle applicazioni SAP in macchine virtuali di Azure, SAP deve poter recuperare i dati relativi al monitoraggio host dagli host fisici che eseguono le macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-513">For productive usage of SAP Applications in Azure Virtual Machines, SAP requires the ability to get host monitoring data from the physical hosts running the Azure Virtual Machines.</span></span> <span data-ttu-id="d98ef-514">È necessario un livello di patch dell'agente host SAP specifico che abilita questa funzionalità in SAPOSCOL e nell'agente host SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-514">A specific SAP Host Agent patch level is required that enables this capability in SAPOSCOL and SAP Host Agent.</span></span> <span data-ttu-id="d98ef-515">L'esatto livello di patch è documentato nella nota SAP [1409604].</span><span class="sxs-lookup"><span data-stu-id="d98ef-515">The exact patch level is documented in SAP Note [1409604].</span></span>

<span data-ttu-id="d98ef-516">Per informazioni dettagliate sulla distribuzione di componenti che forniscono dati host a SAPOSCOL e all'agente host SAP e sulla gestione del ciclo di vita di tali componenti, vedere la [guida alla distribuzione][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="d98ef-516">For the details regarding deployment of components that deliver host data to SAPOSCOL and SAP Host Agent and the lifecycle management of those components, refer to the [Deployment Guide][deployment-guide]</span></span>

## <span data-ttu-id="d98ef-517"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Specifiche di Microsoft SQL Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-517"><a name="3264829e-075e-4d25-966e-a49dad878737"></a>Specifics to Microsoft SQL Server</span></span>
### <a name="sql-server-iaas"></a><span data-ttu-id="d98ef-518">SQL Server in IaaS</span><span class="sxs-lookup"><span data-stu-id="d98ef-518">SQL Server IaaS</span></span>
<span data-ttu-id="d98ef-519">A partire da Microsoft Azure, è possibile eseguire facilmente la migrazione in macchine virtuali di Azure delle applicazioni SQL Server esistenti basate sulla piattaforma Windows Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-519">Starting with Microsoft Azure, you can easily migrate your existing SQL Server applications built on Windows Server platform to Azure Virtual Machines.</span></span> <span data-ttu-id="d98ef-520">SQL Server in una macchina virtuale consente di ridurre il costo totale di proprietà associato a distribuzione, gestione e manutenzione delle applicazioni aziendali eseguendo facilmente la migrazione di queste applicazioni a Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-520">SQL Server in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management, and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="d98ef-521">Con SQL Server in una macchina virtuale di Azure, gli amministratori e gli sviluppatori possono continuare a usare gli stessi strumenti di sviluppo e amministrazione disponibili in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-521">With SQL Server in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="d98ef-522">Questo documento non illustra il database SQL di Microsoft Azure, una piattaforma distribuita come servizio offerta nell'ambito della piattaforma Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-522">We are not discussing Microsoft Azure SQL Database, which is a Platform as a Service offer of the Microsoft Azure Platform.</span></span> <span data-ttu-id="d98ef-523">Il documento illustra l'esecuzione del prodotto SQL Server, noto per le distribuzioni locali in macchine virtuali di Azure, tramite la funzionalità di infrastruttura distribuita come servizio di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-523">The discussion in this paper is about running the SQL Server product as it is known for on-premises deployments in Azure Virtual Machines, leveraging the Infrastructure as a Service capability of Azure.</span></span> <span data-ttu-id="d98ef-524">Le funzionalità di database di queste due offerte sono diverse e non devono essere confuse tra loro.</span><span class="sxs-lookup"><span data-stu-id="d98ef-524">Database capabilities and functionalities between these two offers are different and should not be mixed up with each other.</span></span> <span data-ttu-id="d98ef-525">Vedere anche: <https://azure.microsoft.com/services/sql-database/></span><span class="sxs-lookup"><span data-stu-id="d98ef-525">See also: <https://azure.microsoft.com/services/sql-database/></span></span>
> 
> 

<span data-ttu-id="d98ef-526">È consigliabile esaminare [questa][virtual-machines-sql-server-infrastructure-services] documentazione prima di proseguire.</span><span class="sxs-lookup"><span data-stu-id="d98ef-526">It is strongly recommended to review [this][virtual-machines-sql-server-infrastructure-services] documentation before continuing.</span></span>

<span data-ttu-id="d98ef-527">Nelle sezioni seguenti vengono aggregate e citate parti della documentazione disponibile visitando il collegamento indicato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-527">In the following sections pieces of parts of the documentation under the link above are aggregated and mentioned.</span></span> <span data-ttu-id="d98ef-528">Vengono anche riportate le specifiche relative a SAP e alcuni concetti vengono descritti in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-528">Specifics around SAP are mentioned as well and some concepts are described in more detail.</span></span> <span data-ttu-id="d98ef-529">Tuttavia, è consigliabile esaminare la documentazione indicata prima di leggere la documentazione specifica di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-529">However, it is highly recommended to work through the documentation above first before reading the SQL Server specific documentation.</span></span>

<span data-ttu-id="d98ef-530">Di seguito sono indicate alcune informazioni specifiche su SQL Server in IaaS che è necessario conoscere per poter continuare:</span><span class="sxs-lookup"><span data-stu-id="d98ef-530">There is some SQL Server in IaaS specific information you should know before continuing:</span></span>

* <span data-ttu-id="d98ef-531">**Contratto di servizio per Macchine virtuali**: il contratto di servizio per le macchine virtuali in esecuzione in Azure è disponibile all'indirizzo <https://azure.microsoft.com/support/legal/sla/></span><span class="sxs-lookup"><span data-stu-id="d98ef-531">**Virtual Machine SLA**: There is an SLA for Virtual Machines running in Azure, which can be found here: <https://azure.microsoft.com/support/legal/sla/></span></span>  
* <span data-ttu-id="d98ef-532">**Supporto della versione SQL**: per i clienti SAP, le macchine virtuali di Microsoft Azure supportano SQL Server 2008 R2 e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="d98ef-532">**SQL Version Support**: For SAP customers, we support SQL Server 2008 R2 and higher on Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="d98ef-533">Le versioni precedenti non sono supportate.</span><span class="sxs-lookup"><span data-stu-id="d98ef-533">Earlier editions are not supported.</span></span> <span data-ttu-id="d98ef-534">Per altre informazioni, vedere questa [informativa sul supporto](https://support.microsoft.com/kb/956893) di carattere generale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-534">Review this general [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="d98ef-535">Si noti che in genere SQL Server 2008 è supportato anche da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d98ef-535">Note that in general SQL Server 2008 is supported by Microsoft as well.</span></span> <span data-ttu-id="d98ef-536">A causa delle importanti funzionalità per SAP introdotte con SQL Server 2008 R2, tuttavia, quest'ultima è la versione minima per SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-536">However due to significant functionality for SAP, which was introduced with SQL Server 2008 R2, SQL Server 2008 R2 is the minimum release for SAP.</span></span> <span data-ttu-id="d98ef-537">Tenere presente che SQL Server 2012 e SQL Server 2014 sono stati estesi con una maggiore integrazione nello scenario IaaS, ad esempio con il backup diretto in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-537">Keep in mind that SQL Server 2012 and 2014 got extended with deeper integration into the IaaS scenario (like backing up directly against Azure Storage).</span></span> <span data-ttu-id="d98ef-538">Di conseguenza, questo documento è limitato a SQL Server 2012 e SQL Server 2014 con il relativo livello di patch più recente per Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-538">Therefore, we restrict this paper to SQL Server 2012 and 2014 with its latest patch level for Azure.</span></span>
* <span data-ttu-id="d98ef-539">**Supporto di funzionalità SQL**: le macchine virtuali di Microsoft Azure supportano la maggior parte delle funzionalità di SQL Server, con alcune eccezioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-539">**SQL Feature Support**: Most SQL Server features are supported on Microsoft Azure Virtual Machines with some exceptions.</span></span> <span data-ttu-id="d98ef-540">**Il clustering di failover di SQL Server tramite dischi condivisi non è supportato**.</span><span class="sxs-lookup"><span data-stu-id="d98ef-540">**SQL Server Failover Clustering using Shared Disks is not supported**.</span></span>  <span data-ttu-id="d98ef-541">Le tecnologie distribuite quali il mirroring del database, i gruppi di disponibilità AlwaysOn, la replica, il log shipping e Service Broker sono supportate in un'unica area di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-541">Distributed technologies like Database Mirroring, AlwaysOn Availability Groups, Replication, Log Shipping and Service Broker are supported within a single Azure Region.</span></span> <span data-ttu-id="d98ef-542">SQL Server AlwaysOn inoltre è supportato tra diverse aree di Azure come indicato qui:  <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-542">SQL Server AlwaysOn also is supported between different Azure Regions as documented here:  <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.</span></span>  <span data-ttu-id="d98ef-543">Per altre informazioni, vedere l' [informativa sul supporto](https://support.microsoft.com/kb/956893) .</span><span class="sxs-lookup"><span data-stu-id="d98ef-543">Review the [Support Statement](https://support.microsoft.com/kb/956893) for more details.</span></span> <span data-ttu-id="d98ef-544">Per un esempio relativo alla distribuzione di una configurazione AlwaysOn, vedere [questo][virtual-machines-workload-template-sql-alwayson] articolo.</span><span class="sxs-lookup"><span data-stu-id="d98ef-544">An example on how to deploy an AlwaysOn configuration is shown in [this][virtual-machines-workload-template-sql-alwayson] article.</span></span> <span data-ttu-id="d98ef-545">Vedere anche le procedure consigliate illustrate [qui][virtual-machines-sql-server-infrastructure-services]</span><span class="sxs-lookup"><span data-stu-id="d98ef-545">Also, check out the Best Practices documented [here][virtual-machines-sql-server-infrastructure-services]</span></span> 
* <span data-ttu-id="d98ef-546">**Prestazioni di SQL**: anche se le prestazioni delle macchine virtuali ospitate in Microsoft Azure saranno sicuramente molto elevate rispetto ad altre offerte per la virtualizzazione del cloud pubblico, i risultati ottenuti possono variare.</span><span class="sxs-lookup"><span data-stu-id="d98ef-546">**SQL Performance**: We are confident that Microsoft Azure hosted Virtual Machines perform very well in comparison to other public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="d98ef-547">Per informazioni, consultare [questo articolo][virtual-machines-sql-server-performance-best-practices].</span><span class="sxs-lookup"><span data-stu-id="d98ef-547">Check out [this][virtual-machines-sql-server-performance-best-practices] article.</span></span>
* <span data-ttu-id="d98ef-548">**Uso di immagini disponibili in Azure Marketplace**: il modo più rapido per distribuire una nuova VM di Microsoft Azure consiste nell'usare un'immagine disponibile in Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="d98ef-548">**Using Images from Azure Marketplace**: The fastest way to deploy a new Microsoft Azure VM is to use an image from the Azure Marketplace.</span></span> <span data-ttu-id="d98ef-549">In Azure Marketplace sono presenti immagini contenenti SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-549">There are images in the Azure Marketplace, which contain SQL Server.</span></span> <span data-ttu-id="d98ef-550">Non è però possibile usare subito per le applicazioni SAP NetWeaver le immagini in cui SQL Server è già installato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-550">The images where SQL Server already is installed can’t be immediately used for SAP NetWeaver applications.</span></span> <span data-ttu-id="d98ef-551">In tali immagini sono infatti installate le regole di confronto predefinite di SQL Server e non quelle richieste dai sistemi SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="d98ef-551">The reason is the default SQL Server collation is installed within those images and not the collation required by SAP NetWeaver systems.</span></span> <span data-ttu-id="d98ef-552">Per usare queste immagini, vedere la procedura documentata nel capitolo [Uso di un'immagine di SQL Server da Microsoft Azure Marketplace][dbms-guide-5.6].</span><span class="sxs-lookup"><span data-stu-id="d98ef-552">In order to use such images, check the steps documented in chapter [Using a SQL Server image out of the Microsoft Azure Marketplace][dbms-guide-5.6].</span></span> 
* <span data-ttu-id="d98ef-553">Per altre informazioni, consultare i [dettagli sui prezzi](https://azure.microsoft.com/pricing/) .</span><span class="sxs-lookup"><span data-stu-id="d98ef-553">Check out [Pricing Details](https://azure.microsoft.com/pricing/) for more information.</span></span> <span data-ttu-id="d98ef-554">Un'altra risorsa importante è rappresentata dai documenti [Guida alle licenze di SQL Server 2012](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) e [Guida alle licenze di SQL Server 2014](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf).</span><span class="sxs-lookup"><span data-stu-id="d98ef-554">The [SQL Server 2012 Licensing Guide](https://download.microsoft.com/download/7/3/C/73CAD4E0-D0B5-4BE5-AB49-D5B886A5AE00/SQL_Server_2012_Licensing_Reference_Guide.pdf) and [SQL Server 2014 Licensing Guide](https://download.microsoft.com/download/B/4/E/B4E604D9-9D38-4BBA-A927-56E4C872E41C/SQL_Server_2014_Licensing_Guide.pdf) are also an important resource.</span></span>

### <a name="sql-server-configuration-guidelines-for-sap-related-sql-server-installations-in-azure-vms"></a><span data-ttu-id="d98ef-555">Linee guida per la configurazione di SQL Server per le installazioni di SQL Server correlate a SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-555">SQL Server configuration guidelines for SAP-related SQL Server installations in Azure VMs</span></span>
#### <a name="recommendations-on-vmvhd-structure-for-sap-related-sql-server-deployments"></a><span data-ttu-id="d98ef-556">Raccomandazioni sulla struttura di VM/dischi rigidi virtuali per distribuzioni di SQL Server correlate a SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-556">Recommendations on VM/VHD structure for SAP-related SQL Server deployments</span></span>
<span data-ttu-id="d98ef-557">In base alla descrizione generale, gli eseguibili di SQL Server devono essere salvati o installati nell'unità di sistema del disco del sistema operativo della VM (unità C:\).</span><span class="sxs-lookup"><span data-stu-id="d98ef-557">In accordance with the general description, SQL Server executables should be located or installed into the system drive of the VM’s OS disk (drive C:\).</span></span>  <span data-ttu-id="d98ef-558">In genere, la maggior parte dei database di sistema di SQL Server non viene pienamente sfruttata dal carico di lavoro di SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="d98ef-558">Typically, most of the SQL Server system databases are not utilized at a high level by SAP NetWeaver workload.</span></span> <span data-ttu-id="d98ef-559">Di conseguenza è possibile lasciare sull'unità C:\ anche i database di sistema di SQL Server (master, msdb e model).</span><span class="sxs-lookup"><span data-stu-id="d98ef-559">Hence the system databases of SQL Server (master, msdb, and model) can remain on the C:\ drive as well.</span></span> <span data-ttu-id="d98ef-560">Può fare eccezione il database tempdb, che nel caso di alcuni carichi di lavoro SAP ERP e di tutti i carichi di lavoro BW può richiedere un volume dati o un volume di operazioni di I/O superiore, perché di dimensioni troppo grandi per la VM originale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-560">An exception could be tempdb, which in the case of some SAP ERP and all BW workloads, might require either higher data volume or I/O operations volume, which can’t fit into the original VM.</span></span> <span data-ttu-id="d98ef-561">Per tali sistemi, è consigliabile eseguire la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="d98ef-561">For such systems, the following steps should be performed:</span></span>

* <span data-ttu-id="d98ef-562">Spostare i file di dati primari di tempdb nella stessa unità logica dei file di dati primari del database SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-562">Move the primary tempdb data file(s) to the same logical drive as the primary data file(s) of the SAP database.</span></span>
* <span data-ttu-id="d98ef-563">Aggiungere eventuali altri file di dati di tempdb a una delle altre unità logiche contenenti un file di dati del database utente SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-563">Add any additional tempdb data files to each of the other logical drives containing a data file of the SAP user database.</span></span>
* <span data-ttu-id="d98ef-564">Aggiungere il file di log di tempdb all'unità logica che contiene il file di log del database utente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-564">Add the tempdb logfile to the logical drive, which contains the user database’s log file.</span></span>
* <span data-ttu-id="d98ef-565">**Esclusivamente per i tipi di VM che usano unità SSD locali** nel nodo di calcolo, i file di log e di dati di tempdb potrebbero essere disponibili nell'unità D:\.</span><span class="sxs-lookup"><span data-stu-id="d98ef-565">**Exclusively for VM types that use local SSDs** on the compute node tempdb data and log files might be placed on the D:\ drive.</span></span> <span data-ttu-id="d98ef-566">Può tuttavia essere consigliabile usare più file di dati di tempdb.</span><span class="sxs-lookup"><span data-stu-id="d98ef-566">Nevertheless, it might be recommended to use multiple tempdb data files.</span></span> <span data-ttu-id="d98ef-567">Tenere presente che i volumi delle unità D:\ sono diversi in base al tipo di VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-567">Be aware D:\ drive volumes are different based on the VM type.</span></span>

<span data-ttu-id="d98ef-568">Con queste configurazioni il database tempdb può consumare più spazio di quello che l'unità di sistema è in grado di offrire.</span><span class="sxs-lookup"><span data-stu-id="d98ef-568">These configurations enable tempdb to consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="d98ef-569">Per determinare le dimensioni corrette del database tempdb, è possibile controllare le dimensioni di tempdb in sistemi esistenti eseguiti in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-569">In order to determine the proper tempdb size, one can check the tempdb sizes on existing systems, which run on-premises.</span></span> <span data-ttu-id="d98ef-570">Con una tale configurazione, inoltre, sarà possibile eseguire su tempdb un numero di operazioni di I/O al secondo che l'unità di sistema non può garantire.</span><span class="sxs-lookup"><span data-stu-id="d98ef-570">In addition, such a configuration would enable IOPS numbers against tempdb, which cannot be provided with the system drive.</span></span> <span data-ttu-id="d98ef-571">I sistemi in esecuzione in locale possono essere usati anche per il monitoraggio del carico di lavoro di I/O su tempdb, in modo da derivare il numero di operazioni di I/O al secondo previsto per il database tempdb.</span><span class="sxs-lookup"><span data-stu-id="d98ef-571">Again, systems that are running on-premises can be used to monitor I/O workload against tempdb so that you can derive the IOPS numbers you expect to see on your tempdb.</span></span>

<span data-ttu-id="d98ef-572">Una configurazione di VM che esegue SQL Server con un database SAP e in cui i dati e il file di log di tempdb si trovano nell'unità D:\ è simile a quella illustrata nella figura seguente:</span><span class="sxs-lookup"><span data-stu-id="d98ef-572">A VM configuration, which runs SQL Server with an SAP database and where tempdb data and tempdb logfile are placed on the D:\ drive would look like:</span></span>

![Configurazione di riferimento di una VM IaaS di Azure per SAP][dbms-guide-figure-300]

<span data-ttu-id="d98ef-574">Tenere presente che le dimensioni dell'unità D:\ variano in base al tipo di VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-574">Be aware that the D:\ drive has different sizes dependent on the VM type.</span></span> <span data-ttu-id="d98ef-575">A seconda del requisito previsto per le dimensioni del database tempdb, potrebbe essere necessario associare i file di log e di dati di tempdb con i file di log e di dati del database SAP nei casi in cui le dimensioni dell'unità D:\ non siano sufficienti.</span><span class="sxs-lookup"><span data-stu-id="d98ef-575">Dependent on the size requirement of tempdb you might be forced to pair tempdb data and log files with the SAP database data and log files in cases where D:\ drive is too small.</span></span>

#### <a name="formatting-the-disks"></a><span data-ttu-id="d98ef-576">Formattazione dei dischi</span><span class="sxs-lookup"><span data-stu-id="d98ef-576">Formatting the disks</span></span>
<span data-ttu-id="d98ef-577">Per i dischi contenenti i file di dati e di log di SQL Server è necessario un blocco NTFS di dimensioni pari a 64 KB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-577">For SQL Server the NTFS block size for disks containing SQL Server data and log files should be 64K.</span></span> <span data-ttu-id="d98ef-578">Non è necessario formattare l'unità D:\\</span><span class="sxs-lookup"><span data-stu-id="d98ef-578">There is no need to format the D:\ drive.</span></span> <span data-ttu-id="d98ef-579">perché viene fornita preformattata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-579">This drive comes pre-formatted.</span></span>

<span data-ttu-id="d98ef-580">Per evitare che in seguito al ripristino o la creazione di database i file di dati non vengano inizializzati e il loro contenuto venga azzerato, è necessario assicurarsi che per il contesto utente in cui viene eseguito il servizio SQL Server siano disponibili determinate autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-580">In order to make sure that the restore or creation of databases is not initializing the data files by zeroing the content of the files, one should make sure that the user context the SQL Server service is running in has a certain permission.</span></span> <span data-ttu-id="d98ef-581">Queste autorizzazioni sono in genere disponibili per gli utenti del gruppo Administrators di Windows.</span><span class="sxs-lookup"><span data-stu-id="d98ef-581">Usually users in the Windows Administrator group have these permissions.</span></span> <span data-ttu-id="d98ef-582">Se il servizio SQL Server viene eseguito nel contesto utente di un utente non appartenente al gruppo Administrators di Windows, è necessario assegnare a tale utente il diritto 'Esecuzione attività di manutenzione volume'.</span><span class="sxs-lookup"><span data-stu-id="d98ef-582">If the SQL Server service is run in the user context of non-Windows Administrator user, you need to assign that user the User Right ‘Perform volume maintenance tasks’.</span></span>  <span data-ttu-id="d98ef-583">Per informazioni dettagliate, vedere l'articolo <https://support.microsoft.com/kb/2574695> di Microsoft Knowledge Base</span><span class="sxs-lookup"><span data-stu-id="d98ef-583">See the details in this Microsoft Knowledge Base Article: <https://support.microsoft.com/kb/2574695></span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="d98ef-584">Impatto della compressione del database</span><span class="sxs-lookup"><span data-stu-id="d98ef-584">Impact of database compression</span></span>
<span data-ttu-id="d98ef-585">Nelle configurazioni in cui la larghezza di banda di I/O può diventare un fattore limitante, ogni misura che riduce le operazioni di I/O al secondo consente di estendere il carico di lavoro eseguibile in uno scenario IaaS come Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-585">In configurations where I/O bandwidth can become a limiting factor, every measure, which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="d98ef-586">Se quindi non è stato ancora fatto, sia SAP che Microsoft consigliano di applicare la compressione di pagina di SQL Server prima di caricare un database SAP esistente in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-586">Therefore, if not yet done, applying SQL Server PAGE compression is strongly recommended by both SAP and Microsoft before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="d98ef-587">Sono tre i motivi per cui è consigliabile eseguire la compressione del database prima del caricamento in Azure:</span><span class="sxs-lookup"><span data-stu-id="d98ef-587">The recommendation to perform Database Compression before uploading to Azure is given out of two reasons:</span></span>

* <span data-ttu-id="d98ef-588">La quantità di dati da caricare è minore.</span><span class="sxs-lookup"><span data-stu-id="d98ef-588">The amount of data to be uploaded is lower.</span></span>
* <span data-ttu-id="d98ef-589">La durata dell'esecuzione della compressione è inferiore, presupponendo che si possa usare hardware più avanzato con più CPU o una maggiore larghezza di banda di I/O oppure meno latenza di I/O in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-589">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises.</span></span>
* <span data-ttu-id="d98ef-590">L'uso di database di dimensioni inferiori può contribuire a ridurre i costi per l'allocazione dei dischi</span><span class="sxs-lookup"><span data-stu-id="d98ef-590">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="d98ef-591">Il funzionamento della compressione del database nelle macchine virtuali di Azure è analogo a quello in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-591">Database compression works as well in an Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="d98ef-592">Per altri dettagli su come comprimere un database SQL Server per SAP esistente, vedere <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-592">For more details on how to compress an existing SAP SQL Server database, check here: <https://blogs.msdn.com/b/saponsqlserver/archive/2010/10/08/compressing-an-sap-database-using-report-msscompress.aspx></span></span>

### <a name="sql-server-2014--storing-database-files-directly-on-azure-blob-storage"></a><span data-ttu-id="d98ef-593">SQL Server 2014: archiviazione dei file di database direttamente nell'archivio BLOB di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-593">SQL Server 2014 – Storing Database Files directly on Azure Blob Storage</span></span>
<span data-ttu-id="d98ef-594">A partire da SQL Server 2014 è possibile archiviare file di database direttamente nell'archivio BLOB di Azure senza salvarli in un disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-594">SQL Server 2014 opens the possibility to store database files directly on Azure Blob Store without the ‘wrapper’ of a VHD around them.</span></span> <span data-ttu-id="d98ef-595">Soprattutto quando si usa Archiviazione Standard di Azure o tipi di VM di dimensioni ridotte, questa funzionalità può essere applicata in determinati scenari per ovviare ai limiti per le operazioni di I/O al secondo imposti dal numero limitato di dischi che è possibile montare in alcuni tipi di VM di dimensioni ridotte.</span><span class="sxs-lookup"><span data-stu-id="d98ef-595">Especially with using Standard Azure Storage or smaller VM types this enables scenarios where you can overcome the limits of IOPS that would be enforced by a limited number of disks that can be mounted to some smaller VM types.</span></span> <span data-ttu-id="d98ef-596">Si tratta però di una funzionalità valida per i database utente e non per i database di sistema di SQL Server,</span><span class="sxs-lookup"><span data-stu-id="d98ef-596">This works for user databases however not for system databases of SQL Server.</span></span> <span data-ttu-id="d98ef-597">che funziona anche per i file di log e di dati di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-597">It also works for data and log files of SQL Server.</span></span> <span data-ttu-id="d98ef-598">Se si preferisce distribuire un database di SQL Server per SAP in questo modo invece di salvarlo in dischi rigidi virtuali, tenere presente quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-598">If you’d like to deploy an SAP SQL Server database this way instead of ‘wrapping’ it into VHDs, keep the following in mind:</span></span>

* <span data-ttu-id="d98ef-599">L'account di archiviazione usato deve trovarsi nella stessa area di Azure di quello usato per distribuire la VM in cui è in esecuzione SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-599">The Storage Account used needs to be in the same Azure Region as the one that is used to deploy the VM SQL Server is running in.</span></span>
* <span data-ttu-id="d98ef-600">Le considerazioni elencate in precedenza in merito alla distribuzione di dischi rigidi virtuali in diversi account di archiviazione di Azure sono valide anche per questo metodo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-600">Considerations listed earlier regarding the distribution of VHDs over different Azure Storage Accounts apply for this method of deployments as well.</span></span> <span data-ttu-id="d98ef-601">Questo significa che il numero di operazioni di I/O viene tenuto in considerazione ai fini dei limiti dell'account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-601">Means the I/O operations count against the limits of the Azure Storage Account.</span></span>

[comment]: <> (MSSedusch TODO But this will use network bandwidth and not storage bandwidth, doesn't it?)

<span data-ttu-id="d98ef-603">Per informazioni dettagliate su questo tipo di distribuzione, vedere <https://docs.microsoft.com/sql/relational-databases/databases/sql-server-data-files-in-microsoft-azure></span><span class="sxs-lookup"><span data-stu-id="d98ef-603">Details about this type of deployment are listed here: <https://docs.microsoft.com/sql/relational-databases/databases/sql-server-data-files-in-microsoft-azure></span></span>

<span data-ttu-id="d98ef-604">Per archiviare i file di dati di SQL Server direttamente in Archiviazione Premium di Azure, è necessario aver installato una versione di patch minima di SQL Server 2014, come documentato all'indirizzo <https://support.microsoft.com/kb/3063054>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-604">In order to store SQL Server data files directly on Azure Premium Storage, you need to have a minimum SQL Server 2014 patch release, which is documented here: <https://support.microsoft.com/kb/3063054>.</span></span> <span data-ttu-id="d98ef-605">Non è invece possibile archiviare file di dati di SQL Server nell'archiviazione Standard di Azure con la versione rilasciata di SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="d98ef-605">Storing SQL Server data files on Azure Standard Storage does work with the released version of SQL Server 2014.</span></span> <span data-ttu-id="d98ef-606">Le stesse patch contengono tuttavia un'altra serie di correzioni per garantire una maggiore affidabilità quando si usa direttamente l'archivio BLOB di Azure per file di dati e backup di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-606">However, the very same patches contain another series of fixes, which make the direct usage of Azure Blob Storage for SQL Server data files and backups more reliable.</span></span> <span data-ttu-id="d98ef-607">È quindi consigliabile usare queste patch in qualsiasi caso.</span><span class="sxs-lookup"><span data-stu-id="d98ef-607">Therefore we recommend using these patches in general.</span></span>

### <a name="sql-server-2014-buffer-pool-extension"></a><span data-ttu-id="d98ef-608">Estensione del pool di buffer di SQL Server 2014</span><span class="sxs-lookup"><span data-stu-id="d98ef-608">SQL Server 2014 Buffer Pool Extension</span></span>
<span data-ttu-id="d98ef-609">In SQL Server 2014 è stata introdotta una nuova funzionalità denominata estensione del pool di buffer.</span><span class="sxs-lookup"><span data-stu-id="d98ef-609">SQL Server 2014 introduced a new feature, which is called Buffer Pool Extension.</span></span> <span data-ttu-id="d98ef-610">Questa funzionalità consente di estendere il pool di buffer di SQL Server mantenuto in memoria con una cache di secondo livello supportata da unità SSD di un server o una VM,</span><span class="sxs-lookup"><span data-stu-id="d98ef-610">This functionality extends the buffer pool of SQL Server, which is kept in memory with a second level cache that is backed by local SSDs of a server or VM.</span></span> <span data-ttu-id="d98ef-611">permettendo in tal modo di mantenere in memoria un working set di dati di dimensioni maggiori.</span><span class="sxs-lookup"><span data-stu-id="d98ef-611">This enables to keep a larger working set of data ‘in memory’.</span></span> <span data-ttu-id="d98ef-612">Rispetto all'accesso ad Archiviazione Standard di Azure, l'accesso nell'estensione del pool di buffer archiviato nelle unità SSD locali di una VM di Azure è notevolmente più veloce.</span><span class="sxs-lookup"><span data-stu-id="d98ef-612">Compared to accessing Azure Standard Storage the access into the extension of the buffer pool, which is stored on local SSDs of an Azure VM is many factors faster.</span></span>  <span data-ttu-id="d98ef-613">Se quindi si usa l'unità D:\ locale dei tipi di VM che supportano un numero elevato di operazioni di I/O al secondo e una velocità effettiva elevata, è possibile implementare una soluzione molto conveniente per ridurre il carico delle operazioni di I/O al secondo in Archiviazione di Azure e migliorare notevolmente i tempi di risposta delle query.</span><span class="sxs-lookup"><span data-stu-id="d98ef-613">Therefore, leveraging the local D:\ drive of the VM types that have excellent IOPS and throughput could be a very reasonable way to reduce the IOPS load against Azure Storage and improve response times of queries dramatically.</span></span> <span data-ttu-id="d98ef-614">Questo vale soprattutto quando non si usa Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="d98ef-614">This applies especially when not using Premium Storage.</span></span> <span data-ttu-id="d98ef-615">Se invece si usa Archiviazione Premium e la cache di lettura di Archiviazione Premium nel nodo di calcolo, come consigliato per i file di dati, non sono previste differenze significative.</span><span class="sxs-lookup"><span data-stu-id="d98ef-615">In case of Premium Storage and the usage of the Premium Azure Read Cache on the compute node, as recommended for data files, no significant differences are expected.</span></span> <span data-ttu-id="d98ef-616">Il motivo è che entrambe le cache (estensione del pool di buffer di SQL Server e la cache di lettura di Archiviazione Premium) usano i dischi locali dei nodi di calcolo.</span><span class="sxs-lookup"><span data-stu-id="d98ef-616">Reason is that both caches (SQL Server Buffer Pool Extension and Premium Storage Read Cache) are using the local disks of the compute nodes.</span></span>
<span data-ttu-id="d98ef-617">Per altri dettagli su questa funzionalità, vedere la documentazione all'indirizzo<https://docs.microsoft.com/sql/database-engine/configure-windows/buffer-pool-extension></span><span class="sxs-lookup"><span data-stu-id="d98ef-617">For more details about this functionality, check this documentation: <https://docs.microsoft.com/sql/database-engine/configure-windows/buffer-pool-extension></span></span> 

### <a name="backuprecovery-considerations-for-sql-server"></a><span data-ttu-id="d98ef-618">Considerazioni sul backup/ripristino per SQL Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-618">Backup/Recovery considerations for SQL Server</span></span>
<span data-ttu-id="d98ef-619">Quando si distribuisce SQL Server in Azure, è necessario rivedere la metodologia di backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-619">When deploying SQL Server into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="d98ef-620">Anche se il sistema non è usato in produzione, è necessario eseguire periodicamente il backup del database SAP ospitato da SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-620">Even if the system is not a productive system, the SAP database hosted by SQL Server must be backed up periodically.</span></span> <span data-ttu-id="d98ef-621">Dal momento che in Archiviazione di Azure vengono mantenute tre immagini, ora un backup è meno importante rispetto alla compensazione di un arresto anomalo della risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-621">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="d98ef-622">È opportuno predisporre un piano di backup e ripristino appropriato principalmente perché consente di risolvere gli errori logici/manuali fornendo funzionalità di ripristino temporizzato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-622">The priority reason for maintaining a proper backup and recovery plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="d98ef-623">L'obiettivo è quindi quello di usare i backup per ripristinare un determinato stato precedente del database o di usare i backup in Azure per effettuare il seeding di un altro sistema copiando il database esistente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-623">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="d98ef-624">È possibile, ad esempio, passare da una configurazione SAP di livello 2 a una configurazione di sistema di livello 3 dello stesso sistema ripristinando un backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-624">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="d98ef-625">È possibile eseguire il backup di SQL Server in Archiviazione di Azure in tre modi diversi:</span><span class="sxs-lookup"><span data-stu-id="d98ef-625">There are three different ways to backup SQL Server to Azure Storage:</span></span>

1. <span data-ttu-id="d98ef-626">SQL Server 2012 CU4 e versioni successive supportano il backup in modalità nativa di database a un URL,</span><span class="sxs-lookup"><span data-stu-id="d98ef-626">SQL Server 2012 CU4 and higher can natively backup databases to a URL.</span></span> <span data-ttu-id="d98ef-627">come spiegato in dettaglio nel post di blog [Nuova funzionalità di SQL Server 2014 - Parte 5 - Miglioramenti apportati a backup/ripristino](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx).</span><span class="sxs-lookup"><span data-stu-id="d98ef-627">This is detailed in the blog [New functionality in SQL Server 2014 – Part 5 – Backup/Restore Enhancements](https://blogs.msdn.com/b/saponsqlserver/archive/2014/02/15/new-functionality-in-sql-server-2014-part-5-backup-restore-enhancements.aspx).</span></span> <span data-ttu-id="d98ef-628">Vedere il capitolo [SQL Server 2012 SP1 CU4 and later][dbms-guide-5.5.1] (SQL Server 2012 SP1 CU4 e versioni successive).</span><span class="sxs-lookup"><span data-stu-id="d98ef-628">See chapter [SQL Server 2012 SP1 CU4 and later][dbms-guide-5.5.1].</span></span>
2. <span data-ttu-id="d98ef-629">Nelle versioni di SQL Server precedenti a SQL 2012 CU4 è possibile usare una funzionalità di reindirizzamento per eseguire il backup in un disco rigido virtuale e di fatto spostare il flusso di scrittura verso una posizione di archiviazione di Azure configurata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-629">SQL Server releases prior to SQL 2012 CU4 can use a redirection functionality to backup to a VHD and basically move the write stream towards an Azure Storage location that has been configured.</span></span> <span data-ttu-id="d98ef-630">Vedere il capitolo [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2] (SQL Server 2012 SP1 CU3 e versioni precedenti).</span><span class="sxs-lookup"><span data-stu-id="d98ef-630">See chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2].</span></span>
3. <span data-ttu-id="d98ef-631">L'ultimo metodo prevede l'esecuzione di un comando convenzionale di backup su disco di SQL Server in un dispositivo disco.</span><span class="sxs-lookup"><span data-stu-id="d98ef-631">The final method is to perform a conventional SQL Server backup to disk command onto a disk device.</span></span> <span data-ttu-id="d98ef-632">Si tratta di una procedura identica al modello di distribuzione locale che non viene illustrata in dettaglio in questo documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-632">This is identical to the on-premises deployment pattern and is not discussed in detail in this document.</span></span>

#### <span data-ttu-id="d98ef-633"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="d98ef-633"><a name="0fef0e79-d3fe-4ae2-85af-73666a6f7268"></a>SQL Server 2012 SP1 CU4 and later</span></span>
<span data-ttu-id="d98ef-634">Questa funzionalità consente di eseguire il backup direttamente nell'archivio BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-634">This functionality allows you to directly backup to Azure BLOB storage.</span></span> <span data-ttu-id="d98ef-635">Senza questo metodo, è necessario eseguire il backup in altri dischi utilizzando così la capacità disponibile in termini di dischi e operazioni di I/O al secondo.</span><span class="sxs-lookup"><span data-stu-id="d98ef-635">Without this method, you must backup to other disks, which would consume disk and IOPS capacity.</span></span> <span data-ttu-id="d98ef-636">Il principio è illustrato nella figura seguente:</span><span class="sxs-lookup"><span data-stu-id="d98ef-636">The idea is basically this:</span></span>

 ![Uso del backup di SQL Server 2012 nel BLOB di archiviazione di Microsoft Azure][dbms-guide-figure-400]

<span data-ttu-id="d98ef-638">Il vantaggio in questo caso è che non è necessario usare dischi per archiviarvi i backup di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-638">The advantage in this case is that one doesn’t need to spend disks to store SQL Server backups on.</span></span> <span data-ttu-id="d98ef-639">Il numero di dischi allocati è quindi inferiore ed è possibile usare l'intera larghezza di banda delle operazioni di I/O al secondo dei dischi per i file di dati e di log.</span><span class="sxs-lookup"><span data-stu-id="d98ef-639">So you have fewer disks allocated and the whole bandwidth of disk IOPS can be used for data and log files.</span></span> <span data-ttu-id="d98ef-640">Si noti che le dimensioni massime di un backup è limitata a 1 TB, come documentato nella sezione "Limitazioni" dell'articolo disponibile all'indirizzo <https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url#limitations>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-640">Note that the maximum size of a backup is limited to a maximum of 1 TB as documented in the section ‘Limitations’ in this article: <https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url#limitations>.</span></span> <span data-ttu-id="d98ef-641">Se, nonostante l'uso della compressione del backup di SQL Server, la dimensione del backup supera 1 TB, è necessario usare la funzionalità descritta nel capitolo [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2] (SQL Server 2012 SP1 CU3 e versioni precedenti) di questo documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-641">If the backup size, despite using SQL Server Backup compression would exceed 1 TB in size, the functionality described in chapter [SQL Server 2012 SP1 CU3 and earlier releases][dbms-guide-5.5.2] in this document needs to be used.</span></span>

<span data-ttu-id="d98ef-642">Nella [documentazione correlata](https://docs.microsoft.com/sql/relational-databases/backup-restore/restoring-from-backups-stored-in-microsoft-azure) che descrive il ripristino di database da backup nell'archivio BLOB di Azure si consiglia di non eseguire il ripristino direttamente dall'archivio se le dimensioni del backup superano 25 GB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-642">[Related documentation](https://docs.microsoft.com/sql/relational-databases/backup-restore/restoring-from-backups-stored-in-microsoft-azure) describing the restore of databases from backups against Azure Blob Store recommend not to restore directly from Azure BLOB store if the backup is >25GB.</span></span> <span data-ttu-id="d98ef-643">L'indicazione riportata in questo articolo si basa semplicemente su considerazioni relative alle prestazioni e non su limitazioni funzionali.</span><span class="sxs-lookup"><span data-stu-id="d98ef-643">The recommendation in this article is simply based on performance considerations and not due to functional restrictions.</span></span> <span data-ttu-id="d98ef-644">Le condizioni applicabili possono quindi variare caso per caso.</span><span class="sxs-lookup"><span data-stu-id="d98ef-644">Therefore, different conditions may apply on a case by case basis.</span></span>

<span data-ttu-id="d98ef-645">La documentazione relativa alla configurazione e all'uso di questo tipo di backup è disponibile in [questa](https://docs.microsoft.com/sql/relational-databases/tutorial-use-azure-blob-storage-service-with-sql-server-2016) esercitazione</span><span class="sxs-lookup"><span data-stu-id="d98ef-645">Documentation on how this type of backup is set up and leveraged can be found in [this](https://docs.microsoft.com/sql/relational-databases/tutorial-use-azure-blob-storage-service-with-sql-server-2016) tutorial</span></span>

<span data-ttu-id="d98ef-646">Per un esempio della sequenza di passaggi, vedere [qui](https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url).</span><span class="sxs-lookup"><span data-stu-id="d98ef-646">An example of the sequence of steps can be read [here](https://docs.microsoft.com/sql/relational-databases/backup-restore/sql-server-backup-to-url).</span></span>

<span data-ttu-id="d98ef-647">Quando si automatizzano i backup, è di fondamentale importanza garantire che ai BLOB di ogni backup venga assegnato un nome diverso.</span><span class="sxs-lookup"><span data-stu-id="d98ef-647">Automating backups, it is of highest importance to make sure that the BLOBs for each backup are named differently.</span></span> <span data-ttu-id="d98ef-648">In caso contrario, verranno sovrascritti interrompendo la catena di ripristino.</span><span class="sxs-lookup"><span data-stu-id="d98ef-648">Otherwise they are overwritten and the restore chain is broken.</span></span>

<span data-ttu-id="d98ef-649">Per evitare confusione tra i tre diversi tipi di backup, è consigliabile creare contenitori diversi nell'account di archiviazione usato per i backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-649">In order not to mix up things between the three different types of backups, it is advisable to create different containers underneath the storage account used for backups.</span></span> <span data-ttu-id="d98ef-650">I contenitori possono essere organizzati solo in base alla VM oppure alla VM e al tipo di backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-650">The containers could be by VM only or by VM and Backup type.</span></span> <span data-ttu-id="d98ef-651">Lo schema è simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="d98ef-651">The schema could look like:</span></span>

 ![Uso del backup di SQL Server 2012 nel BLOB di archiviazione di Microsoft Azure: contenitori diversi in un account di archiviazione separato][dbms-guide-figure-500]

<span data-ttu-id="d98ef-653">Nell'esempio precedente i backup non vengono eseguiti nello stesso account di archiviazione in cui sono distribuite le VM,</span><span class="sxs-lookup"><span data-stu-id="d98ef-653">In the example above, the backups would not be performed into the same storage account where the VMs are deployed.</span></span> <span data-ttu-id="d98ef-654">ma in un nuovo account di archiviazione specifico per i backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-654">There would be a new storage account specifically for the backups.</span></span> <span data-ttu-id="d98ef-655">Negli account di archiviazione sono presenti contenitori diversi creati con una matrice del tipo di backup e del nome della VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-655">Within the storage accounts, there would be different containers created with a matrix of the type of backup and the VM name.</span></span> <span data-ttu-id="d98ef-656">Tale segmentazione facilita l'amministrazione dei backup delle diverse VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-656">Such segmentation makes it easier to administrate the backups of the different VMs.</span></span>

<span data-ttu-id="d98ef-657">I BLOB in cui vengono scritti direttamente i backup non vengono aggiunti al conteggio dei dischi dati di una VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-657">The BLOBs one directly writes the backups to, are not adding to the count of the data disks of a VM.</span></span> <span data-ttu-id="d98ef-658">In questo modo è possibile sfruttare il numero massimo di dischi montati dello SKU di VM specifico per i dati e il file di log delle transazioni ed eseguire comunque il backup in un contenitore di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-658">Hence one could maximize the maximum of data disks mounted of the specific VM SKU for the data and transaction log file and still execute a backup against a storage container.</span></span> 

#### <span data-ttu-id="d98ef-659"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 e versioni precedenti</span><span class="sxs-lookup"><span data-stu-id="d98ef-659"><a name="f9071eff-9d72-4f47-9da4-1852d782087b"></a>SQL Server 2012 SP1 CU3 and earlier releases</span></span>
<span data-ttu-id="d98ef-660">Per eseguire un backup direttamente in Archiviazione di Azure, è prima di tutto necessario scaricare il file MSI collegato a [questo](https://www.microsoft.com/download/details.aspx?id=40740) articolo della Knowledge Base.</span><span class="sxs-lookup"><span data-stu-id="d98ef-660">The first step you must perform in order to achieve a backup directly against Azure Storage would be to download the msi, which is linked to [this](https://www.microsoft.com/download/details.aspx?id=40740) KBA article.</span></span>

<span data-ttu-id="d98ef-661">Scaricare il file di installazione per x64 e la documentazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-661">Download the x64 installation file and the documentation.</span></span> <span data-ttu-id="d98ef-662">Il file installa un programma denominato "Strumento di backup di Microsoft SQL Server in Microsoft Azure".</span><span class="sxs-lookup"><span data-stu-id="d98ef-662">The file installs a program called: ‘Microsoft SQL Server Backup to Microsoft Azure Tool’.</span></span> <span data-ttu-id="d98ef-663">Leggere attentamente la documentazione del prodotto.</span><span class="sxs-lookup"><span data-stu-id="d98ef-663">Read the documentation of the product thoroughly.</span></span>  <span data-ttu-id="d98ef-664">Lo strumento funziona nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="d98ef-664">The tool basically works in the following way:</span></span>

* <span data-ttu-id="d98ef-665">Sul lato SQL Server viene definito un percorso sul disco per il backup di SQL Server (in questo caso non usare l'unità D:\).</span><span class="sxs-lookup"><span data-stu-id="d98ef-665">From the SQL Server side, a disk location for the SQL Server backup is defined (don’t use the D:\ drive for this).</span></span>
* <span data-ttu-id="d98ef-666">Lo strumento consente di definire le regole utilizzabili per indirizzare i diversi tipi di backup a contenitori di archiviazione di Azure diversi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-666">The tool allows you to define rules, which can be used to direct different types of backups to different Azure Storage containers.</span></span>
* <span data-ttu-id="d98ef-667">Dopo aver definito le regole, lo strumento reindirizza il flusso di scrittura del backup destinato a uno dei dischi/dischi rigidi virtuali alla posizione di archiviazione di Azure definita in precedenza.</span><span class="sxs-lookup"><span data-stu-id="d98ef-667">Once the rules are in place, the tool redirects the write stream of the backup to one of the VHDs/disks to the Azure Storage location, which was defined earlier.</span></span>
* <span data-ttu-id="d98ef-668">Lo strumento lascia quindi un piccolo file stub di pochi KB sul disco rigido virtuale/disco definito per il backup di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-668">The tool leaves a small stub file of a few KB size on the VHD/Disk, which was defined for the SQL Server backup.</span></span> <span data-ttu-id="d98ef-669">**Tale file deve essere lasciato nella posizione di archiviazione perché è necessario per eseguire il ripristino da Archiviazione di Azure.**</span><span class="sxs-lookup"><span data-stu-id="d98ef-669">**This file should be left on the storage location since it is required to restore again from Azure Storage.**</span></span>
  * <span data-ttu-id="d98ef-670">Se il file stub è andato perso, ad esempio perché si è smarrito il supporto di archiviazione in cui era contenuto, e si è scelto di eseguire il backup in un account di archiviazione di Microsoft Azure, è possibile ripristinare il file stub tramite Archiviazione di Microsoft Azure scaricandolo dal contenitore di archiviazione in cui è stato inserito.</span><span class="sxs-lookup"><span data-stu-id="d98ef-670">If you have lost the stub file (for example through loss of the storage media that contained the stub file) and you have chosen the option of backing up to a Microsoft Azure Storage account, you may recover the stub file through Microsoft Azure Storage by downloading it from the storage container in which it was placed.</span></span> <span data-ttu-id="d98ef-671">È quindi necessario inserire il file stub in una cartella del computer locale in cui è configurato lo strumento per rilevare e caricare nello stesso contenitore con la stessa password di crittografia se con la regola originale è stata usata la crittografia.</span><span class="sxs-lookup"><span data-stu-id="d98ef-671">You should then place the stub file into a folder on the local machine where the Tool is configured to detect and upload to the same container with the same encryption password if encryption was used with the original rule.</span></span> 

<span data-ttu-id="d98ef-672">Questo significa che lo schema descritto in precedenza per le versioni più recenti di SQL Server può essere applicato anche a versioni di SQL Server che non consentono l'indirizzamento diretto a una posizione di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-672">This means the schema as described above for more recent releases of SQL Server can be put in place as well for SQL Server releases, which are not allowing direct address an Azure Storage location.</span></span>

<span data-ttu-id="d98ef-673">È consigliabile non usare questo metodo con versioni più recenti di SQL Server che supportano il backup in modalità nativa in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-673">This method should not be used with more recent SQL Server releases, which support backing up natively against Azure Storage.</span></span> <span data-ttu-id="d98ef-674">Fanno eccezione i casi in cui le limitazioni del backup nativo in Azure bloccano l'esecuzione di tale tipo di backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-674">Exceptions are where limitations of the native backup into Azure are blocking native backup execution into Azure.</span></span>

#### <a name="other-possibilities-to-backup-sql-server-databases"></a><span data-ttu-id="d98ef-675">Altri modi per eseguire il backup di database di SQL Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-675">Other possibilities to backup SQL Server databases</span></span>
<span data-ttu-id="d98ef-676">Per eseguire il backup di database è anche possibile collegare dischi dati aggiuntivi a una VM usata per l'archiviazione dei backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-676">Other possibilities to backup databases is to attach additional data disks to a VM that you use to store backups on.</span></span> <span data-ttu-id="d98ef-677">In tal caso è necessario verificare che i dischi non risultino pieni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-677">In such a case, you would need to make sure that the disks are not running full.</span></span> <span data-ttu-id="d98ef-678">In caso contrario, sarà necessario smontare il disco e "archiviarlo" sostituendolo con uno nuovo vuoto.</span><span class="sxs-lookup"><span data-stu-id="d98ef-678">If that is the case, you would need to unmount the disks and so to speak ‘archive’ it and replace it with a new empty disk.</span></span> <span data-ttu-id="d98ef-679">Se si sceglie questo metodo, è opportuno mantenere questi dischi rigidi virtuali in account di archiviazione di Azure distinti rispetto a quelli che contengono i file di database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-679">If you go down that path, you want to keep these VHDs in separate Azure Storage Accounts from the ones that the VHDs with the database files.</span></span>

<span data-ttu-id="d98ef-680">È anche possibile usare una VM di grandi dimensioni con più dischi collegati, ad esempio una VM D14 con 32 dischi rigidi virtuali.</span><span class="sxs-lookup"><span data-stu-id="d98ef-680">A second possibility is to use a large VM that can have many disks attached, for example a D14 with 32VHDs.</span></span> <span data-ttu-id="d98ef-681">Usare Spazi di archiviazione per creare un ambiente flessibile in cui creare condivisioni utilizzabili come destinazioni di backup per i diversi server DBMS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-681">Use Storage Spaces to build a flexible environment where you could build shares that are used then as backup targets for the different DBMS servers.</span></span>

<span data-ttu-id="d98ef-682">Per la documentazione su alcune procedure consigliate, vedere anche [qui](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) .</span><span class="sxs-lookup"><span data-stu-id="d98ef-682">Some best practices got documented [here](https://blogs.msdn.com/b/sqlcat/archive/2015/02/26/large-sql-server-database-backup-on-an-azure-vm-and-archiving.aspx) as well.</span></span> 

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="d98ef-683">Considerazioni sulle prestazioni per backup/ripristini</span><span class="sxs-lookup"><span data-stu-id="d98ef-683">Performance considerations for backups/restores</span></span>
<span data-ttu-id="d98ef-684">Come nelle distribuzioni bare metal, le prestazioni dei backup/ripristini dipendono dalla quantità di volumi leggibili in parallelo e dalla velocità effettiva di tali volumi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-684">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="d98ef-685">Inoltre, l'utilizzo di CPU associato alla compressione del backup può avere un ruolo significativo per VM con un massimo di soli otto thread CPU.</span><span class="sxs-lookup"><span data-stu-id="d98ef-685">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="d98ef-686">Si può quindi presumere quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-686">Therefore, one can assume:</span></span>

* <span data-ttu-id="d98ef-687">Minore è il numero dei dischi usati per archiviare i file di dati, più bassa è la velocità effettiva generale nella lettura.</span><span class="sxs-lookup"><span data-stu-id="d98ef-687">The fewer the number of disks used to store the data files, the smaller the overall throughput in reading.</span></span>
* <span data-ttu-id="d98ef-688">Minore è il numero di thread CPU nella VM, più forte è l'impatto della compressione del backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-688">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression.</span></span>
* <span data-ttu-id="d98ef-689">Minore è il numero di destinazioni (BLOB, dischi rigidi virtuali o dischi) in cui scrivere il backup, più bassa è la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="d98ef-689">The fewer targets (BLOBs, VHDs, or disks) to write the backup to, the lesser the throughput.</span></span>
* <span data-ttu-id="d98ef-690">Minori sono le dimensioni della VM, minore è la quota di velocità effettiva di archiviazione in lettura e scrittura da Archiviazione di Azure Storage.</span><span class="sxs-lookup"><span data-stu-id="d98ef-690">The smaller the VM size, the smaller the storage throughput quota writing and reading from Azure Storage.</span></span> <span data-ttu-id="d98ef-691">Questo avviene indipendentemente dal fatto che i backup vengano archiviati direttamente in BLOB di Azure o vengano archiviati in dischi rigidi virtuali a loro volta archiviati in BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-691">Independent of whether the backups are directly stored on Azure Blob or whether they are stored in VHDs that again are stored in Azure Blobs.</span></span>

<span data-ttu-id="d98ef-692">Quando si usa un BLOB di archiviazione di Microsoft Azure come destinazione di backup nelle versioni più recenti, è consentito designare una sola destinazione di tipo URL per ogni backup specifico.</span><span class="sxs-lookup"><span data-stu-id="d98ef-692">When using a Microsoft Azure Storage BLOB as the backup target in more recent releases, you are restricted to designating only one URL target for each specific backup.</span></span>

<span data-ttu-id="d98ef-693">Quando invece si usa 'Strumento di backup di Microsoft SQL Server in Microsoft Azure' in versioni precedenti, è possibile definire più di una destinazione di tipo file.</span><span class="sxs-lookup"><span data-stu-id="d98ef-693">But when using the ‘Microsoft SQL Server Backup to Microsoft Azure Tool’ in older releases, you can define more than one file target.</span></span> <span data-ttu-id="d98ef-694">Con più di una destinazione è possibile ridimensionare il backup e aumentarne la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="d98ef-694">With more than one target, the backup can scale and the throughput of the backup is higher.</span></span> <span data-ttu-id="d98ef-695">In questo modo vengono anche creati più file nell'account di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-695">This would result then in multiple files as well in the Azure Storage account.</span></span> <span data-ttu-id="d98ef-696">Nel corso dei test, usando più destinazioni di tipo file è possibile raggiungere la velocità effettiva ottenibile con le estensioni di backup implementate a partire da SQL Server 2012 SP1 CU4.</span><span class="sxs-lookup"><span data-stu-id="d98ef-696">In our testing, using multiple file destinations one can definitely achieve the throughput, which one could achieve with the backup extensions implemented in from SQL Server 2012 SP1 CU4 on.</span></span> <span data-ttu-id="d98ef-697">È anche possibile ovviare al limite di 1 TB previsto dal backup nativo in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-697">You also are not blocked by the 1TB limit as in the native backup into Azure.</span></span>

<span data-ttu-id="d98ef-698">Tenere comunque presente che la velocità effettiva dipende anche dalla località dell'account di archiviazione di Azure usato per il backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-698">However, keep in mind, the throughput also is dependent on the location of the Azure Storage Account you use for the backup.</span></span> <span data-ttu-id="d98ef-699">Un'idea potrebbe essere quella di impostare per l'account di archiviazione una regione diversa da quella in cui vengono eseguite le VM,</span><span class="sxs-lookup"><span data-stu-id="d98ef-699">An idea might be to locate the storage account in a different region than the VMs are running in.</span></span> <span data-ttu-id="d98ef-700">ad esempio eseguire la configurazione delle VM in Europa occidentale ma impostare l'account di archiviazione usato per il backup in Europa settentrionale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-700">For example you would run the VM configuration in West-Europe, but put the Storage Account that you use to back up against in North-Europe.</span></span> <span data-ttu-id="d98ef-701">Tale impostazione influisce certamente sulla velocità effettiva del backup, che potrebbe non raggiungere i 150 MB/sec raggiungibili invece nei casi in cui l'archivio di destinazione e le VM vengono eseguiti in un data center nella stessa area.</span><span class="sxs-lookup"><span data-stu-id="d98ef-701">That certainly has an impact on the backup throughput and is not likely to generate a throughput of 150MB/sec as it seems to be possible in cases where the target storage and the VMs are running in the same regional datacenter.</span></span>

#### <a name="managing-backup-blobs"></a><span data-ttu-id="d98ef-702">Gestione dei BLOB di backup</span><span class="sxs-lookup"><span data-stu-id="d98ef-702">Managing Backup BLOBs</span></span>
<span data-ttu-id="d98ef-703">I backup devono essere gestiti direttamente dall'utente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-703">There is a requirement to manage the backups on your own.</span></span> <span data-ttu-id="d98ef-704">Dato che è prevista la creazione di numerosi BLOB in seguito all'esecuzione di frequenti backup dei log delle transazioni, l'amministrazione di tali BLOB può facilmente sovraccaricare il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-704">Since the expectation is that many blobs are created by executing frequent transaction log backups, administration of those blobs easily can overburden the Azure portal.</span></span> <span data-ttu-id="d98ef-705">È quindi consigliabile sfruttare Azure Storage Explorer.</span><span class="sxs-lookup"><span data-stu-id="d98ef-705">Therefore, it is recommendable to leverage an Azure storage explorer.</span></span> <span data-ttu-id="d98ef-706">Sono disponibili diversi ottimi strumenti per facilitare la gestione di un account di archiviazione di Azure:</span><span class="sxs-lookup"><span data-stu-id="d98ef-706">There are several good ones available, which can help to manage an Azure storage account</span></span>

* <span data-ttu-id="d98ef-707">Microsoft Visual Studio con Azure SDK installato (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="d98ef-707">Microsoft Visual Studio with Azure SDK installed (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="d98ef-708">Esplora archivi di Microsoft Azure (<https://azure.microsoft.com/downloads/>)</span><span class="sxs-lookup"><span data-stu-id="d98ef-708">Microsoft Azure Storage Explorer (<https://azure.microsoft.com/downloads/>)</span></span>
* <span data-ttu-id="d98ef-709">Strumenti di terze parti</span><span class="sxs-lookup"><span data-stu-id="d98ef-709">Third party tools</span></span>

<span data-ttu-id="d98ef-710">Per una descrizione più completa del backup e di SAP in Azure, vedere la [guida al backup di SAP](sap-hana-backup-guide.md) per altre informazioni.</span><span class="sxs-lookup"><span data-stu-id="d98ef-710">For a more complete discussion of Backup and SAP on Azure, refer to [the SAP Backup Guide](sap-hana-backup-guide.md) for more information.</span></span>

### <span data-ttu-id="d98ef-711"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Uso di un'immagine di SQL Server da Microsoft Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="d98ef-711"><a name="1b353e38-21b3-4310-aeb6-a77e7c8e81c8"></a>Using a SQL Server image out of the Microsoft Azure Marketplace</span></span>
<span data-ttu-id="d98ef-712">In Microsoft Azure Marketplace sono disponibili VM che contengono già versioni di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-712">Microsoft offers VMs in the Azure Marketplace, which already contain versions of SQL Server.</span></span> <span data-ttu-id="d98ef-713">I clienti SAP che necessitano delle licenze per SQL Server e Windows possono approfittare di questa opportunità per ottenere le licenze necessarie scegliendo le VM con SQL Server già installato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-713">For SAP customers who require licenses for SQL Server and Windows, this might be an opportunity to basically cover the need for licenses by spinning up VMs with SQL Server already installed.</span></span> <span data-ttu-id="d98ef-714">Per usare tali immagini per SAP, è necessario considerare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-714">In order to use such images for SAP, the following considerations need to be made:</span></span>

* <span data-ttu-id="d98ef-715">I costi delle versioni di SQL Server non di valutazione sono decisamente più elevati rispetto a una semplice VM solo Windows distribuita da Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="d98ef-715">The SQL Server non-Evaluation versions acquire higher costs than just a ‘Windows-only’ VM deployed from Azure Marketplace.</span></span> <span data-ttu-id="d98ef-716">Per confrontare i prezzi, vedere gli articoli seguenti: <https://azure.microsoft.com/pricing/details/virtual-machines/windows/> e <https://azure.microsoft.com/pricing/details/virtual-machines/sql-server-enterprise/>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-716">See these articles to compare prices: <https://azure.microsoft.com/pricing/details/virtual-machines/windows/> and <https://azure.microsoft.com/pricing/details/virtual-machines/sql-server-enterprise/>.</span></span> 
* <span data-ttu-id="d98ef-717">È possibile usare solo versioni di SQL Server supportate da SAP, come SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="d98ef-717">You only can use SQL Server releases, which are supported by SAP, like SQL Server 2012.</span></span>
* <span data-ttu-id="d98ef-718">Le regole di confronto dell'istanza di SQL Server installata nelle VM offerte in Azure Marketplace non sono quelle che devono essere eseguite nell'istanza di SQL Server per SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="d98ef-718">The collation of the SQL Server instance, which is installed in the VMs offered in the Azure Marketplace is not the collation SAP NetWeaver requires the SQL Server instance to run.</span></span> <span data-ttu-id="d98ef-719">È comunque possibile modificare le regole di confronto attenendosi alle istruzioni della sezione seguente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-719">You can change the collation though with the directions in the following section.</span></span>

#### <a name="changing-the-sql-server-collation-of-a-microsoft-windowssql-server-vm"></a><span data-ttu-id="d98ef-720">Modifica delle regole di confronto SQL Server di una VM Microsoft Windows/SQL Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-720">Changing the SQL Server Collation of a Microsoft Windows/SQL Server VM</span></span>
<span data-ttu-id="d98ef-721">Dato che le immagini di SQL Server in Azure Marketplace non sono configurate per l'uso delle regole di confronto richieste dalle applicazioni SAP NetWeaver, è necessario modificarle subito dopo la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-721">Since the SQL Server images in the Azure Marketplace are not set up to use the collation, which is required by SAP NetWeaver applications, it needs to be changed immediately after the deployment.</span></span> <span data-ttu-id="d98ef-722">In SQL Server 2012 è possibile eseguire la procedura seguente non appena la VM è stata distribuita e un amministratore è in grado di accedervi:</span><span class="sxs-lookup"><span data-stu-id="d98ef-722">For SQL Server 2012, this can be done with the following steps as soon as the VM has been deployed and an administrator is able to log into the deployed VM:</span></span>

* <span data-ttu-id="d98ef-723">Aprire una finestra di comando di Windows come amministratore.</span><span class="sxs-lookup"><span data-stu-id="d98ef-723">Open a Windows Command Window ‘as administrator’.</span></span>
* <span data-ttu-id="d98ef-724">Passare alla directory C:\Programmi\SQL Server\110\Setup Bootstrap\SQLServer2012.</span><span class="sxs-lookup"><span data-stu-id="d98ef-724">Change the directory to C:\Program Files\Microsoft SQL Server\110\Setup Bootstrap\SQLServer2012.</span></span>
* <span data-ttu-id="d98ef-725">Eseguire il comando: Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span><span class="sxs-lookup"><span data-stu-id="d98ef-725">Execute the command: Setup.exe /QUIET /ACTION=REBUILDDATABASE /INSTANCENAME=MSSQLSERVER /SQLSYSADMINACCOUNTS=`<local_admin_account_name`> /SQLCOLLATION=SQL_Latin1_General_Cp850_BIN2</span></span>   
  * <span data-ttu-id="d98ef-726">`<local_admin_account_name`> è l'account definito come account amministratore quando si distribuisce la VM per la prima volta tramite la raccolta.</span><span class="sxs-lookup"><span data-stu-id="d98ef-726">`<local_admin_account_name`> is the account, which was defined as the administrator account when deploying the VM for the first time through the gallery.</span></span>

<span data-ttu-id="d98ef-727">Il processo dovrebbe richiedere solo alcuni minuti.</span><span class="sxs-lookup"><span data-stu-id="d98ef-727">The process should only take a few minutes.</span></span> <span data-ttu-id="d98ef-728">Per verificare la correttezza del risultato finale del passaggio, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="d98ef-728">In order to make sure whether the step ended up with the correct result, perform the following steps:</span></span>

* <span data-ttu-id="d98ef-729">Aprire SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="d98ef-729">Open SQL Server Management Studio.</span></span>
* <span data-ttu-id="d98ef-730">Aprire una finestra di query.</span><span class="sxs-lookup"><span data-stu-id="d98ef-730">Open a Query Window.</span></span>
* <span data-ttu-id="d98ef-731">Eseguire il comando sp_helpsort nel database master di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-731">Execute the command sp_helpsort in the SQL Server master database.</span></span>

<span data-ttu-id="d98ef-732">Il risultato dovrebbe essere simile a quello della figura seguente:</span><span class="sxs-lookup"><span data-stu-id="d98ef-732">The desired result should look like:</span></span>

    Latin1-General, binary code point comparison sort for Unicode Data, SQL Server Sort Order 40 on Code Page 850 for non-Unicode Data

<span data-ttu-id="d98ef-733">Se il risultato non corrisponde a quello nella figura, ARRESTARE la distribuzione di SAP e scoprire perché il comando di configurazione non ha funzionato nel modo previsto.</span><span class="sxs-lookup"><span data-stu-id="d98ef-733">If this is not the result, STOP deploying SAP and investigate why the setup command did not work as expected.</span></span> <span data-ttu-id="d98ef-734">La distribuzione di applicazioni SAP NetWeaver in un'istanza di SQL Server con tabelle codici di SQL Server diverse da quella indicata in precedenza **NON** è supportata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-734">Deployment of SAP NetWeaver applications onto SQL Server instance with different SQL Server codepages than the one mentioned above is **NOT** supported.</span></span>

### <a name="sql-server-high-availability-for-sap-in-azure"></a><span data-ttu-id="d98ef-735">Disponibilità elevata di SQL Server per SAP in Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-735">SQL Server High-Availability for SAP in Azure</span></span>
<span data-ttu-id="d98ef-736">Come accennato in precedenza in questo documento, non è possibile creare l'archivio condiviso necessario per l'utilizzo della funzionalità di disponibilità elevata offerta nelle versioni meno recenti di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-736">As mentioned earlier in this paper, there is no possibility to create shared storage, which is necessary for the usage of the oldest SQL Server high availability functionality.</span></span> <span data-ttu-id="d98ef-737">Questa funzionalità prevede l'installazione di due o più istanze di SQL Server in un cluster di failover di Windows Server (WSFC) usando un disco condiviso per i database utente e alla fine tempdb.</span><span class="sxs-lookup"><span data-stu-id="d98ef-737">This functionality would install two or more SQL Server instances in a Windows Server Failover Cluster (WSFC) using a shared disk for the user databases (and eventually tempdb).</span></span> <span data-ttu-id="d98ef-738">Questo è il metodo di disponibilità elevata standard usato da più tempo, nonché supportato da SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-738">This is the long time standard high availability method, which also is supported by SAP.</span></span> <span data-ttu-id="d98ef-739">Azure però non supporta l'archiviazione condivisa, di conseguenza non è possibile realizzare configurazioni a disponibilità elevata di SQL Server con cluster di tipo disco condiviso.</span><span class="sxs-lookup"><span data-stu-id="d98ef-739">Because Azure doesn’t support shared storage, SQL Server high availability configurations with a shared disk cluster configuration cannot be realized.</span></span> <span data-ttu-id="d98ef-740">Esistono tuttavia molti altri metodi di disponibilità elevata, descritti nelle sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="d98ef-740">However, many other high availability methods are still possible and are described in the following sections.</span></span>

#### <a name="sql-server-log-shipping"></a><span data-ttu-id="d98ef-741">Log shipping SQL Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-741">SQL Server Log Shipping</span></span>
<span data-ttu-id="d98ef-742">Uno dei metodi di disponibilità elevata utilizzabili è il log shipping SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-742">One of the methods of high availability (HA) is SQL Server Log Shipping.</span></span> <span data-ttu-id="d98ef-743">Se le VM incluse nella configurazione a disponibilità elevata hanno una risoluzione dei nomi funzionante, non sussistono problemi e la configurazione in Azure non sarà diversa da quelle eseguite in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-743">If the VMs participating in the HA configuration have working name resolution, there is no problem and the setup in Azure does not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="d98ef-744">Non è consigliabile affidarsi solo alla risoluzione IP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-744">It is not recommended to rely on IP resolution only.</span></span> <span data-ttu-id="d98ef-745">Per informazioni sulla configurazione del log shipping e sui principi su cui si basa, vedere la documentazione seguente:</span><span class="sxs-lookup"><span data-stu-id="d98ef-745">With regards to setting up Log Shipping and the principles around Log Shipping, check this documentation:</span></span>

<span data-ttu-id="d98ef-746"><https://docs.microsoft.com/sql/database-engine/log-shipping/about-log-shipping-sql-server></span><span class="sxs-lookup"><span data-stu-id="d98ef-746"><https://docs.microsoft.com/sql/database-engine/log-shipping/about-log-shipping-sql-server></span></span>

<span data-ttu-id="d98ef-747">Per ottenere effettivamente una disponibilità elevata, è necessario distribuire le VM incluse in una configurazione di log shipping in modo che appartengano allo stesso set di disponibilità di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-747">In order to really achieve any high availability, one needs to deploy the VMs, which are within such a Log Shipping configuration to be within the same Azure Availability Set.</span></span>

#### <a name="database-mirroring"></a><span data-ttu-id="d98ef-748">Mirroring del database</span><span class="sxs-lookup"><span data-stu-id="d98ef-748">Database Mirroring</span></span>
<span data-ttu-id="d98ef-749">Il mirroring del database supportato da SAP (vedere la nota SAP [965908]) si basa sulla definizione di un partner di failover nella stringa di connessione SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-749">Database Mirroring as supported by SAP (see SAP Note [965908]) relies on defining a failover partner in the SAP connection string.</span></span> <span data-ttu-id="d98ef-750">In caso di cross-premise, si presuppone che le due VM appartengano allo stesso dominio e che il contesto utente in cui vengono eseguite le due istanze di SQL Server sia un utente di dominio e abbia privilegi sufficienti nelle due istanze di SQL Server interessate.</span><span class="sxs-lookup"><span data-stu-id="d98ef-750">For the Cross-Premises cases, we assume that the two VMs are in the same domain and that the user context the two SQL Server instances are running under a domain user as well and have sufficient privileges in the two SQL Server instances involved.</span></span> <span data-ttu-id="d98ef-751">La configurazione del mirroring del database in Azure non è quindi diversa da una configurazione tipica locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-751">Therefore, the setup of Database Mirroring in Azure does not differ between a typical on-premises setup/configuration.</span></span>

<span data-ttu-id="d98ef-752">A partire dalle distribuzioni solo cloud, il metodo più semplice prevede la configurazione di un altro dominio in Azure allo scopo di avere in un unico dominio le VM DBMS e idealmente le VM SAP dedicate.</span><span class="sxs-lookup"><span data-stu-id="d98ef-752">As of Cloud-Only deployments, the easiest method is to have another domain setup in Azure to have those DBMS VMs (and ideally dedicated SAP VMs) within one domain.</span></span>

<span data-ttu-id="d98ef-753">Se non è possibile predisporre un unico dominio, è anche possibile usare certificati per gli endpoint di mirroring del database, come descritto in questo articolo: <https://docs.microsoft.com/sql/database-engine/database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql></span><span class="sxs-lookup"><span data-stu-id="d98ef-753">If a domain is not possible, one can also use certificates for the database mirroring endpoints as described here: <https://docs.microsoft.com/sql/database-engine/database-mirroring/use-certificates-for-a-database-mirroring-endpoint-transact-sql></span></span>

<span data-ttu-id="d98ef-754">Per un'esercitazione relativa alla configurazione del mirroring del database in Azure, vedere <https://docs.microsoft.com/sql/database-engine/database-mirroring/database-mirroring-sql-server></span><span class="sxs-lookup"><span data-stu-id="d98ef-754">A tutorial to set up Database Mirroring in Azure can be found here: <https://docs.microsoft.com/sql/database-engine/database-mirroring/database-mirroring-sql-server></span></span> 

#### <a name="sql-server-always-on"></a><span data-ttu-id="d98ef-755">SQL Server AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="d98ef-755">SQL Server Always On</span></span>
<span data-ttu-id="d98ef-756">Dato che è supportato per SAP in locale (vedere la nota SAP [1772688]), AlwaysOn può essere usato anche in combinazione con SAP in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-756">As Always On is supported for SAP on-premises (see SAP Note [1772688]), it is supported to be used in combination with SAP in Azure.</span></span> <span data-ttu-id="d98ef-757">Il fatto che non sia possibile creare dischi condivisi in Azure non implica che non sia possibile creare una configurazione WSFC (Windows Server Failover Cluster) AlwaysOn tra VM diverse.</span><span class="sxs-lookup"><span data-stu-id="d98ef-757">The fact that you are not able to create shared disks in Azure doesn’t mean that one can’t create an Always On Windows Server Failover Cluster (WSFC) configuration between different VMs.</span></span> <span data-ttu-id="d98ef-758">In realtà indica che non è possibile usare un disco condiviso come quorum nella configurazione cluster.</span><span class="sxs-lookup"><span data-stu-id="d98ef-758">It only means that you do not have the possibility to use a shared disk as a quorum in the cluster configuration.</span></span> <span data-ttu-id="d98ef-759">Di conseguenza, è possibile creare una configurazione WSFC AlwaysOn in Azure evitando semplicemente di selezionare il tipo di quorum che utilizza il disco condiviso.</span><span class="sxs-lookup"><span data-stu-id="d98ef-759">Hence you can build an Always On WSFC configuration in Azure and simply not select the quorum type that utilizes shared disk.</span></span> <span data-ttu-id="d98ef-760">L'ambiente Azure in cui vengono distribuite le VM deve risolvere queste ultime in base al nome e le VM devono appartenere allo stesso dominio.</span><span class="sxs-lookup"><span data-stu-id="d98ef-760">The Azure environment those VMs are deployed in should resolve the VMs by name and the VMs should be in the same domain.</span></span> <span data-ttu-id="d98ef-761">Queste indicazioni sono valide solo per distribuzioni solo Azure e cross-premise.</span><span class="sxs-lookup"><span data-stu-id="d98ef-761">This is true for Azure only and Cross-Premises deployments.</span></span> <span data-ttu-id="d98ef-762">La distribuzione del listener del gruppo di disponibilità di SQL Server, da non confondere con il set di disponibilità di Azure presenta alcune particolarità da considerare, dal momento che al momento Azure non consente di creare semplicemente un oggetto AD/DNS, mentre questa operazione è consentita in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-762">There are some special considerations around deploying the SQL Server Availability Group Listener (not to be confused with the Azure Availability Set) since Azure at this point in time does not allow to simply create an AD/DNS object as it is possible on-premises.</span></span> <span data-ttu-id="d98ef-763">È quindi necessario eseguire alcuni passaggi di installazione diversi per ovviare al comportamento specifico di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-763">Therefore, some different installation steps are necessary to overcome the specific behavior of Azure.</span></span>

<span data-ttu-id="d98ef-764">Di seguito sono elencate alcune considerazioni relative all'uso di un listener del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="d98ef-764">Some considerations using an Availability Group Listener are:</span></span>

* <span data-ttu-id="d98ef-765">L'uso di un listener del gruppo di disponibilità è possibile solo se il sistema operativo guest della VM è Windows Server 2012 o versioni successive.</span><span class="sxs-lookup"><span data-stu-id="d98ef-765">Using an Availability Group Listener is only possible with Windows Server 2012 or higher as guest OS of the VM.</span></span> <span data-ttu-id="d98ef-766">Per Windows Server 2012 è necessario assicurarsi che sia applicata la patch seguente: <https://support.microsoft.com/kb/2854082></span><span class="sxs-lookup"><span data-stu-id="d98ef-766">For Windows Server 2012 you need to make sure that this patch is applied: <https://support.microsoft.com/kb/2854082></span></span> 
* <span data-ttu-id="d98ef-767">Per Windows Server 2008 R2, questa patch non esiste ed è necessario usare AlwaysOn così come il mirroring del database, specificando un partner di failover nella stringa di connessione tramite il parametro dbs/mss/server del file SAP default.pfl. Vedere la nota SAP [965908].</span><span class="sxs-lookup"><span data-stu-id="d98ef-767">For Windows Server 2008 R2 this patch does not exist and Always On would need to be used in the same manner as Database Mirroring by specifying a failover partner in the connections string (done through the SAP default.pfl parameter dbs/mss/server – see SAP Note [965908]).</span></span>
* <span data-ttu-id="d98ef-768">Quando si usa un listener del gruppo di disponibilità, le VM di database devono essere connesse a un Load Balancer dedicato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-768">When using an Availability Group Listener, the Database VMs need to be connected to a dedicated Load Balancer.</span></span> <span data-ttu-id="d98ef-769">Per la risoluzione dei nomi nelle distribuzioni solo cloud è necessario che tutte le VM di un sistema SAP (server applicazioni, server DBMS e server (A)SCS) si trovino nella stessa rete virtuale oppure che la manutenzione del file etc\host venga effettuata da un livello applicazione SAP per ottenere i nomi risolti delle VM di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-769">Name resolution in Cloud-Only deployments would either require all VMs of an SAP system (application servers, DBMS server, and (A)SCS server) are in the same virtual network or would require from an SAP application layer the maintenance of the etc\host file in order to get the VM names of the SQL Server VMs resolved.</span></span> <span data-ttu-id="d98ef-770">Per evitare che Azure assegni nuovi indirizzi IP nei casi in cui entrambe le VM vengono arrestate incidentalmente, è consigliabile assegnare indirizzi IP statici alle interfacce di rete di tali VM nella configurazione AlwaysOn. Per informazioni sulla definizione di un indirizzo IP statico, vedere [questo][virtual-networks-reserved-private-ip] articolo.</span><span class="sxs-lookup"><span data-stu-id="d98ef-770">In order to avoid that Azure is assigning new IP addresses in cases where both VMs incidentally are shutdown, one should assign static IP addresses to the network interfaces of those VMs in the Always On configuration (defining a static IP address is described in [this][virtual-networks-reserved-private-ip] article)</span></span>

[comment]: <> (Blog precedente)
[comment]: <> (<https://blogs.msdn.com/b/alwaysonpro/archive/2014/08/29/recommendations-and-best-practices-when-deploying-sql-server-alwayson-availability-groups-in-windows-azure-iaas.aspx>, <https://blogs.technet.com/b/rmilne/archive/2015/07/27/how-to-set-static-ip-on-azure-vm.aspx>) 
* <span data-ttu-id="d98ef-773">La procedura di creazione della configurazione cluster WSFC prevede speciali passaggi quando è necessario assegnare al cluster un indirizzo IP particolare, dal momento che Azure con la funzionalità corrente assegna al nome del cluster lo stesso indirizzo IP del nodo in cui viene creato il cluster.</span><span class="sxs-lookup"><span data-stu-id="d98ef-773">There are special steps required when building the WSFC cluster configuration where the cluster needs a special IP address assigned, because Azure with its current functionality would assign the cluster name the same IP address as the node the cluster is created on.</span></span> <span data-ttu-id="d98ef-774">È quindi necessario eseguire un passaggio manuale per assegnare al cluster un indirizzo IP diverso.</span><span class="sxs-lookup"><span data-stu-id="d98ef-774">This means a manual step must be performed to assign a different IP address to the cluster.</span></span>
* <span data-ttu-id="d98ef-775">Il listener del gruppo di disponibilità verrà creato in Azure con gli endpoint TCP/IP assegnati alle VM che eseguono le repliche primaria e secondaria del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="d98ef-775">The Availability Group Listener is going to be created in Azure with TCP/IP endpoints, which are assigned to the VMs running the primary and secondary replicas of the Availability group.</span></span>
* <span data-ttu-id="d98ef-776">Potrebbe essere necessario proteggere questi endpoint con ACL.</span><span class="sxs-lookup"><span data-stu-id="d98ef-776">There might be a need to secure these endpoints with ACLs.</span></span>

[comment]: <> (TODO old blog)
[comment]: <> (The detailed steps and necessities of installing an AlwaysOn configuration on Azure are best experienced when walking through the tutorial available [here][virtual-machines-windows-classic-ps-sql-alwayson-availability-groups])
[comment]: <> (Preconfigured AlwaysOn setup via the Azure gallery <https://blogs.technet.com/b/dataplatforminsider/archive/2014/08/25/sql-server-alwayson-offering-in-microsoft-azure-portal-gallery.aspx>)
[comment]: <> (Creating an Availability Group Listener is best described in [this][virtual-machines-windows-classic-ps-sql-int-listener] tutorial)
[comment]: <> (Securing network endpoints with ACLs are explained best here:)
[comment]: <> (*    <https://michaelwasham.com/windows-azure-powershell-reference-guide/network-access-control-list-capability-in-windows-azure-powershell/>)
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/08/31/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-1-of-2.aspx> )
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/01/weekend-scripter-creating-acls-for-windows-azure-endpoints-part-2-of-2.aspx>)  
[comment]: <> (*    <https://blogs.technet.com/b/heyscriptingguy/archive/2013/09/18/creating-acls-for-windows-azure-endpoints.aspx>) 

<span data-ttu-id="d98ef-786">È possibile distribuire un gruppo di disponibilità AlwaysOn di SQL Server anche in diverse aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-786">It is possible to deploy a SQL Server Always On Availability Group over different Azure Regions as well.</span></span> <span data-ttu-id="d98ef-787">Questa funzionalità sfrutta la connettività da rete virtuale a rete virtuale di Azure ([altri dettagli][virtual-networks-configure-vnet-to-vnet-connection]).</span><span class="sxs-lookup"><span data-stu-id="d98ef-787">This functionality leverages the Azure VNet-to-Vnet connectivity ([more details][virtual-networks-configure-vnet-to-vnet-connection]).</span></span>

[comment]: <> (TODO old blog)
[comment]: <> (The setup of SQL Server AlwaysOn Availability Groups in such a scenario is described here: <https://blogs.technet.com/b/dataplatforminsider/archive/2014/06/19/sql-server-alwayson-availability-groups-supported-between-microsoft-azure-regions.aspx>.) 

#### <a name="summary-on-sql-server-high-availability-in-azure"></a><span data-ttu-id="d98ef-790">Riepilogo sulla disponibilità elevata di SQL Server in Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-790">Summary on SQL Server High Availability in Azure</span></span>
<span data-ttu-id="d98ef-791">In considerazione del fatto che Archiviazione di Azure garantisce la protezione del contenuto, diventa meno importante creare un'immagine hot standby.</span><span class="sxs-lookup"><span data-stu-id="d98ef-791">Given the fact that Azure Storage is protecting the content, there is one less reason to insist on a hot-standby image.</span></span> <span data-ttu-id="d98ef-792">Lo scenario di disponibilità elevata deve quindi prevede la protezione nei casi seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-792">This means your High Availability scenario needs to only protect against the following cases:</span></span>

* <span data-ttu-id="d98ef-793">Indisponibilità completa della VM per interventi di manutenzione sul cluster di server in Azure o per altri motivi</span><span class="sxs-lookup"><span data-stu-id="d98ef-793">Unavailability of the VM as a whole due to maintenance on the server cluster in Azure or other reasons</span></span>
* <span data-ttu-id="d98ef-794">Problemi software nell'istanza di SQL Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-794">Software issues in the SQL Server instance</span></span>
* <span data-ttu-id="d98ef-795">Protezione da errori manuali nel caso in cui i dati vengono eliminati ed è necessario il ripristino temporizzato</span><span class="sxs-lookup"><span data-stu-id="d98ef-795">Protecting from manual error where data gets deleted and point-in-time recovery is needed</span></span>

<span data-ttu-id="d98ef-796">Se si esaminano le tecnologie corrispondenti, si può affermare che i primi due casi possono essere coperti dal mirroring del database o da AlwaysOn, mentre il terzo solo dal log shipping.</span><span class="sxs-lookup"><span data-stu-id="d98ef-796">Looking at matching technologies one can argue that the first two cases can be covered by Database Mirroring or Always On, whereas the third case only can be covered by Log-Shipping.</span></span>

<span data-ttu-id="d98ef-797">È necessario bilanciare i vantaggi di AlwaysOn con la procedura di configurazione di questa tecnologia, che risulta più complessa se confrontata con quella del mirroring del database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-797">You need to balance the more complex setup of Always On, compared to Database Mirroring, with the advantages of Always On.</span></span> <span data-ttu-id="d98ef-798">I vantaggi includono:</span><span class="sxs-lookup"><span data-stu-id="d98ef-798">Those advantages can be listed like:</span></span>

* <span data-ttu-id="d98ef-799">Repliche secondarie leggibili.</span><span class="sxs-lookup"><span data-stu-id="d98ef-799">Readable secondary replicas.</span></span>
* <span data-ttu-id="d98ef-800">Backup da repliche secondarie.</span><span class="sxs-lookup"><span data-stu-id="d98ef-800">Backups from secondary replicas.</span></span>
* <span data-ttu-id="d98ef-801">Migliore scalabilità.</span><span class="sxs-lookup"><span data-stu-id="d98ef-801">Better scalability.</span></span>
* <span data-ttu-id="d98ef-802">Possibilità di creare più repliche secondarie.</span><span class="sxs-lookup"><span data-stu-id="d98ef-802">More than one secondary replicas.</span></span>

### <span data-ttu-id="d98ef-803"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>Riepilogo generale su SQL Server per SAP in Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-803"><a name="9053f720-6f3b-4483-904d-15dc54141e30"></a>General SQL Server for SAP on Azure Summary</span></span>
<span data-ttu-id="d98ef-804">Questa guida contiene numerosi consigli che è preferibile leggere più volte prima di pianificare la distribuzione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-804">There are many recommendations in this guide and we recommend you read it more than once before planning your Azure deployment.</span></span> <span data-ttu-id="d98ef-805">In linea generale, assicurarsi di seguire i dieci consigli generali specifici per la distribuzione di DBMS in Azure:</span><span class="sxs-lookup"><span data-stu-id="d98ef-805">In general, though, be sure to follow the top ten general DBMS on Azure specific points:</span></span>

[comment]: <> (2.3 higher throughput than what? Than one VHD?)
1. <span data-ttu-id="d98ef-807">Usare la versione più recente di DBMS, come SQL Server 2014, che offre maggiori vantaggi in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-807">Use the latest DBMS release, like SQL Server 2014, that has the most advantages in Azure.</span></span> <span data-ttu-id="d98ef-808">Per SQL Server, si tratta di SQL Server 2012 SP1 CU4, che include la funzionalità di backup in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-808">For SQL Server, this is SQL Server 2012 SP1 CU4, which would include the feature of backing up against Azure Storage.</span></span> <span data-ttu-id="d98ef-809">Con SAP, tuttavia, è consigliabile almeno SQL Server 2014 SP1 CU1 o SQL Server 2012 SP2 con l'aggiornamento cumulativo più recente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-809">However, in conjunction with SAP we would recommend at least SQL Server 2014 SP1 CU1 or SQL Server 2012 SP2 and the latest CU.</span></span>
2. <span data-ttu-id="d98ef-810">Pianificare attentamente l'infrastruttura di sistema SAP in Azure per bilanciare il layout dei file di dati e le restrizioni di Azure:</span><span class="sxs-lookup"><span data-stu-id="d98ef-810">Carefully plan your SAP system landscape in Azure to balance the data file layout and Azure restrictions:</span></span>
   * <span data-ttu-id="d98ef-811">Non usare troppi dischi, ma un numero sufficiente a garantire il numero necessario di operazioni di I/O al secondo.</span><span class="sxs-lookup"><span data-stu-id="d98ef-811">Don’t have too many disks, but have enough to ensure you can reach your required IOPS.</span></span>
   * <span data-ttu-id="d98ef-812">Se non si usa Managed Disks, tenere presente che il numero di operazioni di I/O al secondo consentito varia a seconda dell'account di archiviazione di Azure e che gli account di archiviazione sono limitati nelle singole sottoscrizioni di Azure ([altri dettagli][azure-subscription-service-limits]).</span><span class="sxs-lookup"><span data-stu-id="d98ef-812">If you don't use Managed Disks, remember that IOPS are also limited per Azure Storage Account and that Storage Accounts are limited within each Azure subscription ([more details][azure-subscription-service-limits]).</span></span> 
   * <span data-ttu-id="d98ef-813">Se è necessaria una velocità effettiva maggiore, eseguire lo striping solo tra dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-813">Only stripe across disks if you need to achieve a higher throughput.</span></span>
3. <span data-ttu-id="d98ef-814">Non installare mai software né inserire file che richiedono la persistenza nell'unità D:\ perché non è permanente e qualsiasi elemento in tale unità andrà perso al riavvio di Windows.</span><span class="sxs-lookup"><span data-stu-id="d98ef-814">Never install software or put any files that require persistence on the D:\ drive as it is non-permanent and anything on this drive is lost at a Windows reboot.</span></span>
4. <span data-ttu-id="d98ef-815">Non usare il caching dei dischi per Archiviazione Standard di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-815">Don’t use disk caching for Azure Standard Storage.</span></span>
5. <span data-ttu-id="d98ef-816">Non usare account di archiviazione con replica geografica di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-816">Don’t use Azure geo-replicated Storage Accounts.</span></span>  <span data-ttu-id="d98ef-817">Usare l'opzione Con ridondanza locale per i carichi di lavoro DBMS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-817">Use Locally Redundant for DBMS workloads.</span></span>
6. <span data-ttu-id="d98ef-818">Usare la soluzione di disponibilità elevata/ripristino di emergenza del fornitore del sistema DBMS per replicare i dati del database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-818">Use your DBMS vendor’s HA/DR solution to replicate database data.</span></span>
7. <span data-ttu-id="d98ef-819">Usare sempre la risoluzione dei nomi e non fare affidamento sugli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-819">Always use Name Resolution, don’t rely on IP addresses.</span></span>
8. <span data-ttu-id="d98ef-820">Usare la massima compressione possibile del database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-820">Use the highest database compression possible.</span></span> <span data-ttu-id="d98ef-821">Per SQL Server si tratta della compressione di pagina.</span><span class="sxs-lookup"><span data-stu-id="d98ef-821">For SQL Server this is page compression.</span></span>
9. <span data-ttu-id="d98ef-822">Prestare attenzione quando si usano immagini di SQL da Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="d98ef-822">Be careful using SQL Server images from the Azure Marketplace.</span></span> <span data-ttu-id="d98ef-823">Se si usa quella di SQL Server, è necessario modificare le regole di confronto dell'istanza prima di installarvi un qualsiasi sistema SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="d98ef-823">If you use the SQL Server one, you must change the instance collation before installing any SAP NetWeaver system on it.</span></span>
10. <span data-ttu-id="d98ef-824">Installare e configurare la funzionalità di monitoraggio dell'host SAP per Azure come illustrato nella [Deployment Guide][deployment-guide] (Guida alla distribuzione).</span><span class="sxs-lookup"><span data-stu-id="d98ef-824">Install and configure the SAP Host Monitoring for Azure as described in [Deployment Guide][deployment-guide].</span></span>

## <a name="specifics-to-sap-ase-on-windows"></a><span data-ttu-id="d98ef-825">Specifiche per SAP ASE in Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-825">Specifics to SAP ASE on Windows</span></span>
<span data-ttu-id="d98ef-826">A partire da Microsoft Azure, è possibile eseguire facilmente la migrazione delle applicazioni SAP ASE in macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-826">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications to Azure Virtual Machines.</span></span> <span data-ttu-id="d98ef-827">SAP ASE in una macchina virtuale consente di ridurre il costo totale di proprietà associato a distribuzione, gestione e manutenzione delle applicazioni aziendali eseguendo facilmente la migrazione di queste applicazioni a Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-827">SAP ASE in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management, and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="d98ef-828">Con SAP ASE in una macchina virtuale di Azure, gli amministratori e gli sviluppatori possono continuare a usare gli stessi strumenti di sviluppo e amministrazione disponibili in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-828">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="d98ef-829">Il contratto di servizio per le macchine virtuali di Azure è disponibile all'indirizzo <https://azure.microsoft.com/support/legal/sla/virtual-machines></span><span class="sxs-lookup"><span data-stu-id="d98ef-829">There is an SLA for the Azure Virtual Machines, which can be found here: <https://azure.microsoft.com/support/legal/sla/virtual-machines></span></span>

<span data-ttu-id="d98ef-830">Anche se le prestazioni delle macchine virtuali ospitate in Microsoft Azure saranno sicuramente molto elevate rispetto ad altre offerte per la virtualizzazione del cloud pubblico, i risultati ottenuti possono variare.</span><span class="sxs-lookup"><span data-stu-id="d98ef-830">We are confident that Microsoft Azure hosted Virtual Machines performs very well in comparison to other public cloud virtualization offerings, but individual results may vary.</span></span> <span data-ttu-id="d98ef-831">I numeri SAPS relativi al ridimensionamento di SAP per i diversi SKU di VM con certificazione SAP sono riportati nella nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="d98ef-831">SAP sizing SAPS numbers of the different SAP certified VM SKUs is provided in a separate SAP Note [1928533].</span></span>

<span data-ttu-id="d98ef-832">Le istruzioni e i suggerimenti relativi all'utilizzo di Archiviazione di Azure, alla distribuzione di VM SAP o al monitoraggio di SAP si applicano alle distribuzioni di SAP ASE insieme alle applicazioni SAP, come indicato nei primi quattro capitoli di questo documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-832">Statements and recommendations in regard to the usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply to deployments of SAP ASE in conjunction with SAP applications as stated throughout the first four chapters of this document.</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="d98ef-833">Supporto della versione di SAP ASE</span><span class="sxs-lookup"><span data-stu-id="d98ef-833">SAP ASE Version Support</span></span>
<span data-ttu-id="d98ef-834">SAP supporta attualmente SAP ASE versione 16.0 per l'uso con i prodotti SAP Business Suite.</span><span class="sxs-lookup"><span data-stu-id="d98ef-834">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="d98ef-835">Tutti gli aggiornamenti per il server SAP ASE o per i driver ODBC e JDBC da usare con i prodotti SAP Business Suite vengono forniti esclusivamente in SAP Service Marketplace su: <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-835">All updates for SAP ASE server, or JDBC and ODBC drivers to be used with SAP Business Suite products are provided solely through the SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="d98ef-836">Come per le installazioni locali, non scaricare gli aggiornamenti per il server SAP ASE o per i driver ODBC e JDBC direttamente dai siti Web Sybase.</span><span class="sxs-lookup"><span data-stu-id="d98ef-836">As for installations on-premises, do not download updates for the SAP ASE server, or for the JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="d98ef-837">Per informazioni dettagliate sulle patch supportate per l'uso con i prodotti SAP Business Suite in locale e nelle macchine virtuali di Azure, vedere le note SAP seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-837">For detailed information on patches, which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see the following SAP Notes:</span></span>

* <span data-ttu-id="d98ef-838">[1590719]</span><span class="sxs-lookup"><span data-stu-id="d98ef-838">[1590719]</span></span>
* <span data-ttu-id="d98ef-839">[1973241]</span><span class="sxs-lookup"><span data-stu-id="d98ef-839">[1973241]</span></span>

<span data-ttu-id="d98ef-840">Le informazioni generali sull'esecuzione di SAP Business Suite in SAP ASE sono disponibili in [SCN](https://www.sap.com/community/topic/ase.html)</span><span class="sxs-lookup"><span data-stu-id="d98ef-840">General information on running SAP Business Suite on SAP ASE can be found in the [SCN](https://www.sap.com/community/topic/ase.html)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="d98ef-841">Linee guida per la configurazione di SAP ASE per le installazioni di SAP ASE correlate a SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-841">SAP ASE Configuration Guidelines for SAP-related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-the-sap-ase-deployment"></a><span data-ttu-id="d98ef-842">Struttura della distribuzione SAP ASE</span><span class="sxs-lookup"><span data-stu-id="d98ef-842">Structure of the SAP ASE Deployment</span></span>
<span data-ttu-id="d98ef-843">In base alla descrizione generale, gli eseguibili di SAP ASE devono essere salvati o installati nell'unità di sistema del disco del sistema operativo della VM (unità c:\).</span><span class="sxs-lookup"><span data-stu-id="d98ef-843">In accordance with the general description, SAP ASE executables should be located or installed into the system drive of the VM’s OS disk (drive c:\).</span></span> <span data-ttu-id="d98ef-844">In genere, la maggior parte dei database di sistema e di strumenti di SAP ASE non viene pienamente sfruttata dal carico di lavoro di SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="d98ef-844">Typically, most of the SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="d98ef-845">Di conseguenza è possibile lasciare nell'unità C:\ anche i database di sistema e di strumenti (master, model, saptools, sybmgmtdb, sybsystemdb).</span><span class="sxs-lookup"><span data-stu-id="d98ef-845">Hence the system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on the C:\ drive as well.</span></span> 

<span data-ttu-id="d98ef-846">Può fare eccezione il database temporaneo contenente tutte le tabelle di lavoro e le tabelle temporanee create da SAP ASE, che nel caso di alcuni carichi di lavoro SAP ERP e di tutti i carichi di lavoro BW può richiedere un volume dati o un volume di operazioni di I/O superiore, perché di dimensioni troppo grandi per il disco del sistema operativo della VM originale (unità c:\).</span><span class="sxs-lookup"><span data-stu-id="d98ef-846">An exception could be the temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations volume, which can’t fit into the original VM’s OS disk (drive c:\).</span></span>

<span data-ttu-id="d98ef-847">A seconda della versione di SAPInst/SWPM usata per installare il sistema, il database può contenere:</span><span class="sxs-lookup"><span data-stu-id="d98ef-847">Depending on the version of SAPInst/SWPM used to install the system, the database might contain:</span></span>

* <span data-ttu-id="d98ef-848">Un solo tempdb SAP ASE creato durante l'installazione di SAP ASE</span><span class="sxs-lookup"><span data-stu-id="d98ef-848">A single SAP ASE tempdb, which is created when installing SAP ASE</span></span>
* <span data-ttu-id="d98ef-849">Un tempdb SAP ASE creato in seguito all'installazione di SAP ASE e un saptempdb aggiuntivo creato dalla routine di installazione SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-849">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by the SAP installation routine</span></span>
* <span data-ttu-id="d98ef-850">Un tempdb SAP ASE creato con l'installazione di SAP ASE e un tempdb aggiuntivo creato manualmente (ad esempio, seguendo la nota SAP [1752266]) per soddisfare i requisiti specifici di ERP/BW per tempdb</span><span class="sxs-lookup"><span data-stu-id="d98ef-850">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (for example following SAP Note [1752266]) to meet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="d98ef-851">Nel caso di carichi di lavoro ERP specifici o di tutti i carichi di lavoro BW è consigliabile, dal punto di vista delle prestazioni, mantenere i dispositivi tempdb del tempdb aggiuntivo creato (con SWPM o manualmente) in un'unità diversa da C:\.</span><span class="sxs-lookup"><span data-stu-id="d98ef-851">In case of specific ERP or all BW workloads, it makes sense, in regard to performance, to keep the tempdb devices of the additionally created tempdb (by SWPM or manually) on a drive other than C:\.</span></span> <span data-ttu-id="d98ef-852">Se non esistono tempdb aggiuntivi, è consigliabile crearne uno (nota SAP [1752266]).</span><span class="sxs-lookup"><span data-stu-id="d98ef-852">If no additional tempdb exists, it is recommended to create one (SAP Note [1752266]).</span></span>

<span data-ttu-id="d98ef-853">Per tali sistemi, eseguire questa procedura per il tempdb aggiuntivo creato:</span><span class="sxs-lookup"><span data-stu-id="d98ef-853">For such systems the following steps should be performed for the additionally created tempdb:</span></span>

* <span data-ttu-id="d98ef-854">Spostare il primo dispositivo tempdb nel primo dispositivo del database SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-854">Move the first tempdb device to the first device of the SAP database</span></span>
* <span data-ttu-id="d98ef-855">Aggiungere dispositivi tempdb a ogni disco rigido virtuale contenente un dispositivo del database SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-855">Add tempdb devices to each of the VHDs containing a device of the SAP database</span></span>

<span data-ttu-id="d98ef-856">Questa configurazione consente a tempdb di utilizzare più spazio di quello fornito dall'unità di sistema.</span><span class="sxs-lookup"><span data-stu-id="d98ef-856">This configuration enables tempdb to either consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="d98ef-857">Come riferimento è possibile controllare le dimensioni del dispositivo tempdb nei sistemi esistenti eseguiti in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-857">As a reference one can check the tempdb device sizes on existing systems, which run on-premises.</span></span> <span data-ttu-id="d98ef-858">In alternativa, con una tale configurazione potrà essere eseguito su tempdb un numero di operazioni di I/O al secondo che l'unità di sistema non può garantire.</span><span class="sxs-lookup"><span data-stu-id="d98ef-858">Or such a configuration would enable IOPS numbers against tempdb, which cannot be provided with the system drive.</span></span> <span data-ttu-id="d98ef-859">I sistemi in esecuzione in locale possono anche essere usati per monitorare il carico di lavoro di I/O in tempdb.</span><span class="sxs-lookup"><span data-stu-id="d98ef-859">Again systems that are running on-premises can be used to monitor I/O workload against tempdb.</span></span>

<span data-ttu-id="d98ef-860">Non spostare mai dispositivi SAP ASE nell'unità D:\ della VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-860">Never put any SAP ASE devices onto the D:\ drive of the VM.</span></span> <span data-ttu-id="d98ef-861">Questo vale anche per il tempdb, anche se gli oggetti in esso presenti sono solo temporanei.</span><span class="sxs-lookup"><span data-stu-id="d98ef-861">This also applies to the tempdb, even if the objects kept in the tempdb are only temporary.</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="d98ef-862">Impatto della compressione del database</span><span class="sxs-lookup"><span data-stu-id="d98ef-862">Impact of Database Compression</span></span>
<span data-ttu-id="d98ef-863">Nelle configurazioni in cui la larghezza di banda di I/O può diventare un fattore limitante, ogni misura che riduce le operazioni di I/O al secondo consente di estendere il carico di lavoro eseguibile in uno scenario IaaS come Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-863">In configurations where I/O bandwidth can become a limiting factor, every measure, which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="d98ef-864">È quindi consigliabile verificare che venga usata la compressione SAP ASE prima di caricare un database SAP esistente in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-864">Therefore, it is strongly recommended to make sure that SAP ASE compression is used before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="d98ef-865">Sono diversi i motivi per cui è consigliabile eseguire la compressione del database prima del caricamento in Azure se non è già stata implementata:</span><span class="sxs-lookup"><span data-stu-id="d98ef-865">The recommendation to perform compression before uploading to Azure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="d98ef-866">La quantità di dati da caricare in Azure è minore</span><span class="sxs-lookup"><span data-stu-id="d98ef-866">The amount of data to be uploaded to Azure is lower</span></span>
* <span data-ttu-id="d98ef-867">La durata dell'esecuzione della compressione è inferiore, presupponendo che si possa usare hardware più avanzato con più CPU o una maggiore larghezza di banda di I/O oppure meno latenza di I/O in locale</span><span class="sxs-lookup"><span data-stu-id="d98ef-867">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="d98ef-868">L'uso di database di dimensioni inferiori può contribuire a ridurre i costi per l'allocazione dei dischi</span><span class="sxs-lookup"><span data-stu-id="d98ef-868">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="d98ef-869">Il funzionamento della compressione dati e LOB in una VM ospitata in macchine virtuali di Azure è uguale a quello in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-869">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="d98ef-870">Per altri dettagli su come controllare se la compressione è già in uso in un database SAP ASE esistente, vedere la nota SAP [1750510].</span><span class="sxs-lookup"><span data-stu-id="d98ef-870">For more details on how to check if compression is already in use in an existing SAP ASE database, check SAP Note [1750510].</span></span>

#### <a name="using-dbacockpit-to-monitor-database-instances"></a><span data-ttu-id="d98ef-871">Uso di DBACockpit per monitorare le istanze di database</span><span class="sxs-lookup"><span data-stu-id="d98ef-871">Using DBACockpit to monitor Database Instances</span></span>
<span data-ttu-id="d98ef-872">Per i sistemi SAP che usano SAP ASE come piattaforma di database, DBACockpit è accessibile come finestra del browser incorporata nella transazione DBACockpit o come Webdynpro.</span><span class="sxs-lookup"><span data-stu-id="d98ef-872">For SAP systems, which are using SAP ASE as database platform, the DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="d98ef-873">La funzionalità completa per monitorare e gestire il database è tuttavia disponibile solo nell'implementazione Webdynpro di DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="d98ef-873">However the full functionality for monitoring and administering the database is available in the Webdynpro implementation of the DBACockpit only.</span></span>

<span data-ttu-id="d98ef-874">Come per i sistemi locali, sono necessari diversi passaggi per abilitare tutte le funzionalità di SAP NetWeaver usate dall'implementazione Webdynpro di DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="d98ef-874">As with on-premises systems several steps are required to enable all SAP NetWeaver functionality used by the Webdynpro implementation of the DBACockpit.</span></span> <span data-ttu-id="d98ef-875">Per abilitare l'utilizzo di Webdynpro e generare le istanze necessarie, vedere la nota SAP [1245200].</span><span class="sxs-lookup"><span data-stu-id="d98ef-875">Follow SAP Note [1245200] to enable the usage of webdynpros and generate the required ones.</span></span> <span data-ttu-id="d98ef-876">Quando si seguono le istruzioni delle note precedenti, si configura anche Internet Communication Manager (ICM) insieme alle porte da usare per le connessioni HTTP e HTTPS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-876">When following the instructions in the above notes, you also configure the Internet Communication Manager (icm) along with the ports to be used for http and https connections.</span></span> <span data-ttu-id="d98ef-877">L'impostazione predefinita per HTTP è simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="d98ef-877">The default setting for http looks like this:</span></span>

> <span data-ttu-id="d98ef-878">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="d98ef-878">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> <span data-ttu-id="d98ef-879">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="d98ef-879">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> 

<span data-ttu-id="d98ef-880">I collegamenti generati nella transazione DBACockpit saranno simili ai seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-880">and the links generated in transaction DBACockpit will look similar to this:</span></span>

> <span data-ttu-id="d98ef-881">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="d98ef-881">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="d98ef-882">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="d98ef-882">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="d98ef-883">A seconda del fatto che la macchina virtuale di Azure che ospita il sistema SAP sia connessa o meno tramite una connessione da sito a sito, multisito o ExpressRoute (distribuzione cross-premise), è necessario verificare che ICM usi un nome host completo che può essere risolto nel computer da cui si sta cercando di aprire DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="d98ef-883">Depending on if and how the Azure Virtual Machine hosting the SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need to make sure that ICM is using a fully qualified hostname that can be resolved on the machine where you are trying to open the DBACockpit from.</span></span> <span data-ttu-id="d98ef-884">Per informazioni su come ICM determina il nome host completo in base ai parametri del profilo e su come impostare il parametro icm/host_name_full in modo esplicito, se necessario, vedere la nota SAP [773830].</span><span class="sxs-lookup"><span data-stu-id="d98ef-884">See SAP Note [773830] to understand how ICM determines the fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="d98ef-885">Se la VM è stata distribuita in uno scenario solo cloud senza connettività cross-premise tra l'ambiente locale e Azure, è necessario definire un indirizzo IP pubblico e un'etichetta di dominio.</span><span class="sxs-lookup"><span data-stu-id="d98ef-885">If you deployed the VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need to define a public IP address and a domainlabel.</span></span> <span data-ttu-id="d98ef-886">Il formato del nome DNS pubblico della VM si presenta come segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-886">The format of the public DNS name of the VM looks like this:</span></span>

> <span data-ttu-id="d98ef-887">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="d98ef-887">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
> 
> 

<span data-ttu-id="d98ef-888">Altri dettagli relativi al nome DNS sono disponibili [qui][virtual-machines-azurerm-versus-azuresm].</span><span class="sxs-lookup"><span data-stu-id="d98ef-888">More details related to the DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="d98ef-889">Impostando il parametro del profilo SAP icm/host_name_full sul nome DNS della VM di Azure, il collegamento sarà simile a:</span><span class="sxs-lookup"><span data-stu-id="d98ef-889">Setting the SAP profile parameter icm/host_name_full to the DNS name of the Azure VM the link might look similar to:</span></span>

> <span data-ttu-id="d98ef-890">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="d98ef-890">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="d98ef-891">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="d98ef-891">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="d98ef-892">In questo caso è necessario assicurarsi di:</span><span class="sxs-lookup"><span data-stu-id="d98ef-892">In this case you need to make sure to:</span></span>

* <span data-ttu-id="d98ef-893">Aggiungere regole in ingresso al gruppo di sicurezza di rete nel portale di Azure per le porte TCP/IP usate per comunicare con ICM</span><span class="sxs-lookup"><span data-stu-id="d98ef-893">Add Inbound rules to the Network Security Group in the Azure portal for the TCP/IP ports used to communicate with ICM</span></span>
* <span data-ttu-id="d98ef-894">Aggiungere regole in ingresso alla configurazione di Windows Firewall per le porte TCP/IP usate per comunicare con ICM</span><span class="sxs-lookup"><span data-stu-id="d98ef-894">Add Inbound rules to the Windows Firewall configuration for the TCP/IP ports used to communicate with the ICM</span></span>

<span data-ttu-id="d98ef-895">Per importare automaticamente tutte le correzioni disponibili, è consigliabile applicare periodicamente la nota SAP della raccolta di correzioni applicabile alla propria versione di SAP:</span><span class="sxs-lookup"><span data-stu-id="d98ef-895">For an automated imported of all corrections available, it is recommended to periodically apply the correction collection SAP Note applicable to your SAP version:</span></span>

* <span data-ttu-id="d98ef-896">[1558958]</span><span class="sxs-lookup"><span data-stu-id="d98ef-896">[1558958]</span></span>
* <span data-ttu-id="d98ef-897">[1619967]</span><span class="sxs-lookup"><span data-stu-id="d98ef-897">[1619967]</span></span>
* <span data-ttu-id="d98ef-898">[1882376]</span><span class="sxs-lookup"><span data-stu-id="d98ef-898">[1882376]</span></span>

<span data-ttu-id="d98ef-899">Per altre informazioni su DBA Cockpit per SAP ASE, vedere le note SAP seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-899">Further information about DBA Cockpit for SAP ASE can be found in the following SAP Notes:</span></span>

* <span data-ttu-id="d98ef-900">[1605680]</span><span class="sxs-lookup"><span data-stu-id="d98ef-900">[1605680]</span></span>
* <span data-ttu-id="d98ef-901">[1757924]</span><span class="sxs-lookup"><span data-stu-id="d98ef-901">[1757924]</span></span>
* <span data-ttu-id="d98ef-902">[1757928]</span><span class="sxs-lookup"><span data-stu-id="d98ef-902">[1757928]</span></span>
* <span data-ttu-id="d98ef-903">[1758182]</span><span class="sxs-lookup"><span data-stu-id="d98ef-903">[1758182]</span></span>
* <span data-ttu-id="d98ef-904">[1758496]</span><span class="sxs-lookup"><span data-stu-id="d98ef-904">[1758496]</span></span>    
* <span data-ttu-id="d98ef-905">[1814258]</span><span class="sxs-lookup"><span data-stu-id="d98ef-905">[1814258]</span></span>
* <span data-ttu-id="d98ef-906">[1922555]</span><span class="sxs-lookup"><span data-stu-id="d98ef-906">[1922555]</span></span>
* <span data-ttu-id="d98ef-907">[1956005]</span><span class="sxs-lookup"><span data-stu-id="d98ef-907">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="d98ef-908">Considerazioni sul backup/ripristino per SAP ASE</span><span class="sxs-lookup"><span data-stu-id="d98ef-908">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="d98ef-909">Quando si distribuisce SAP ASE in Azure, è necessario rivedere la metodologia di backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-909">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="d98ef-910">Anche se il sistema non è usato in produzione, è necessario eseguire periodicamente il backup del database SAP ospitato da SAP ASE.</span><span class="sxs-lookup"><span data-stu-id="d98ef-910">Even if the system is not a productive system, the SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="d98ef-911">Dal momento che in Archiviazione di Azure vengono mantenute tre immagini, ora un backup è meno importante rispetto alla compensazione di un arresto anomalo della risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-911">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="d98ef-912">È opportuno predisporre un piano di backup e ripristino appropriato principalmente perché consente di risolvere gli errori logici/manuali fornendo funzionalità di ripristino temporizzato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-912">The primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="d98ef-913">L'obiettivo è quindi quello di usare i backup per ripristinare un determinato stato precedente del database o di usare i backup in Azure per effettuare il seeding di un altro sistema copiando il database esistente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-913">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="d98ef-914">È possibile, ad esempio, passare da una configurazione SAP di livello 2 a una configurazione di sistema di livello 3 dello stesso sistema ripristinando un backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-914">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="d98ef-915">Il backup e il ripristino di un database in Azure funzionano esattamente come in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-915">Backing up and restoring a database in Azure works the same way as it does on-premises.</span></span> <span data-ttu-id="d98ef-916">Vedere le note SAP seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-916">See SAP Notes:</span></span>

* <span data-ttu-id="d98ef-917">[1588316]</span><span class="sxs-lookup"><span data-stu-id="d98ef-917">[1588316]</span></span>
* <span data-ttu-id="d98ef-918">[1585981]</span><span class="sxs-lookup"><span data-stu-id="d98ef-918">[1585981]</span></span>

<span data-ttu-id="d98ef-919">per i dettagli sulla creazione di configurazioni di dump e sulla pianificazione dei backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-919">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="d98ef-920">A seconda della strategia e delle esigenze, è possibile configurare i dump di database e di log su disco in uno dei dischi esistenti oppure aggiungere un altro disco per il backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-920">Depending on your strategy and needs you can configure database and log dumps to disk onto one of the existing disks or add an additional disk for the backup.</span></span> <span data-ttu-id="d98ef-921">Per limitare il rischio di perdita dei dati in caso di errore, è consigliabile usare un disco in cui non sono presenti dispositivi del database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-921">To reduce the danger of data loss in case of an error, it is recommended to use a disk where no database device is located.</span></span>

<span data-ttu-id="d98ef-922">Oltre alla compressione dati e LOB, SAP ASE offre anche la compressione del backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-922">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="d98ef-923">Per occupare meno spazio con i dump di database e di log, è consigliabile usare la compressione del backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-923">To occupy less space with the database and log dumps it is recommended to use backup compression.</span></span> <span data-ttu-id="d98ef-924">Per altre informazioni, vedere la nota SAP [1588316].</span><span class="sxs-lookup"><span data-stu-id="d98ef-924">For more information, see SAP Note [1588316].</span></span> <span data-ttu-id="d98ef-925">La compressione del backup è fondamentale anche per ridurre la quantità di dati da trasferire se si prevede di scaricare backup o dischi rigidi virtuali contenenti dump di backup dalla macchina virtuale di Azure in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-925">Compressing the backup is also crucial to reduce the amount of data to be transferred if you plan to download backups or VHDs containing backup dumps from the Azure Virtual Machine to on-premises.</span></span>

<span data-ttu-id="d98ef-926">Non usare l'unità D:\ come destinazione dei dump di database o di log.</span><span class="sxs-lookup"><span data-stu-id="d98ef-926">Do not use drive D:\ as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="d98ef-927">Considerazioni sulle prestazioni per backup/ripristini</span><span class="sxs-lookup"><span data-stu-id="d98ef-927">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="d98ef-928">Come nelle distribuzioni bare metal, le prestazioni dei backup/ripristini dipendono dalla quantità di volumi leggibili in parallelo e dalla velocità effettiva di tali volumi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-928">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="d98ef-929">Inoltre, l'utilizzo di CPU associato alla compressione del backup può avere un ruolo significativo per VM con un massimo di soli otto thread CPU.</span><span class="sxs-lookup"><span data-stu-id="d98ef-929">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="d98ef-930">Si può quindi presumere quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-930">Therefore, one can assume:</span></span>

* <span data-ttu-id="d98ef-931">Minore è il numero dei dischi usati per l'archiviazione dei dispositivi del database, più bassa è la velocità effettiva generale nella lettura</span><span class="sxs-lookup"><span data-stu-id="d98ef-931">The fewer the number of disks used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="d98ef-932">Minore è il numero di thread CPU nella VM, più forte è l'impatto della compressione del backup</span><span class="sxs-lookup"><span data-stu-id="d98ef-932">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="d98ef-933">Minore è il numero di destinazioni (directory di striping o dischi) in cui scrivere il backup, più bassa è la velocità effettiva</span><span class="sxs-lookup"><span data-stu-id="d98ef-933">The fewer targets (Stripe Directories, disks) to write the backup to, the lesser the throughput</span></span>

<span data-ttu-id="d98ef-934">Per aumentare il numero di destinazioni in cui scrivere, sono disponibili due opzioni che possono essere usate/combinate a seconda delle proprie esigenze:</span><span class="sxs-lookup"><span data-stu-id="d98ef-934">To increase the number of targets to write to there are two options, which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="d98ef-935">Striping del volume di destinazione di backup su più dischi montati per migliorare la velocità effettiva delle operazioni di I/O al secondo in tale volume con striping</span><span class="sxs-lookup"><span data-stu-id="d98ef-935">Striping the backup target volume over multiple mounted disks in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="d98ef-936">Creazione di una configurazione dump a livello di SAP ASE che usa più directory di destinazione per la scrittura del dump</span><span class="sxs-lookup"><span data-stu-id="d98ef-936">Creating a dump configuration on SAP ASE level, which uses more than one target directory to write the dump to</span></span>

<span data-ttu-id="d98ef-937">Lo striping di un volume su più dischi montati è stato illustrato prima in questa guida.</span><span class="sxs-lookup"><span data-stu-id="d98ef-937">Striping a volume over multiple mounted disks has been discussed earlier in this guide.</span></span> <span data-ttu-id="d98ef-938">Per altre informazioni sull'uso di più directory nella configurazione dump SAP ASE, vedere la documentazione sulla stored procedure sp_config_dump che viene usata per creare la configurazione dump in [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="d98ef-938">For more information on using multiple directories in the SAP ASE dump configuration, refer to the documentation on Stored Procedure sp_config_dump, which is used to create the dump configuration on the [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="d98ef-939">Ripristino di emergenza con VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-939">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="d98ef-940">Replica dei dati con SAP Sybase Replication Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-940">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="d98ef-941">Con SAP Sybase Replication Server (SRS), SAP ASE offre una nuova soluzione di standby per trasferire in modo asincrono le transazioni di database in una posizione distante.</span><span class="sxs-lookup"><span data-stu-id="d98ef-941">With the SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution to transfer database transactions to a distant location asynchronously.</span></span> 

<span data-ttu-id="d98ef-942">L'installazione e il funzionamento di SRS sono altrettanto efficaci sia in una VM ospitata nei servizi Macchine virtuali di Azure che in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-942">The installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="d98ef-943">ASE HADR tramite SAP Replication Server è previsto per una versione futura.</span><span class="sxs-lookup"><span data-stu-id="d98ef-943">ASE HADR via SAP Replication Server is planned with a future release.</span></span> <span data-ttu-id="d98ef-944">Verrà testato e rilasciato per le piattaforme Microsoft Azure non appena sarà disponibile.</span><span class="sxs-lookup"><span data-stu-id="d98ef-944">It will be tested with and released for Microsoft Azure platforms as soon as it is available.</span></span>

## <a name="specifics-to-sap-ase-on-linux"></a><span data-ttu-id="d98ef-945">Specifiche per SAP ASE in Linux</span><span class="sxs-lookup"><span data-stu-id="d98ef-945">Specifics to SAP ASE on Linux</span></span>
<span data-ttu-id="d98ef-946">A partire da Microsoft Azure, è possibile eseguire facilmente la migrazione delle applicazioni SAP ASE in macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-946">Starting with Microsoft Azure, you can easily migrate your existing SAP ASE applications to Azure Virtual Machines.</span></span> <span data-ttu-id="d98ef-947">SAP ASE in una macchina virtuale consente di ridurre il costo totale di proprietà associato a distribuzione, gestione e manutenzione delle applicazioni aziendali eseguendo facilmente la migrazione di queste applicazioni a Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-947">SAP ASE in a Virtual Machine enables you to reduce the total cost of ownership of deployment, management, and maintenance of enterprise breadth applications by easily migrating these applications to Microsoft Azure.</span></span> <span data-ttu-id="d98ef-948">Con SAP ASE in una macchina virtuale di Azure, gli amministratori e gli sviluppatori possono continuare a usare gli stessi strumenti di sviluppo e amministrazione disponibili in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-948">With SAP ASE in an Azure Virtual Machine, administrators and developers can still use the same development and administration tools that are available on-premises.</span></span>

<span data-ttu-id="d98ef-949">Per distribuire le VM di Azure, è importante conoscere i contratti di servizio ufficiali disponibili all'indirizzo <https://azure.microsoft.com/support/legal/sla></span><span class="sxs-lookup"><span data-stu-id="d98ef-949">For deploying Azure VMs it's important to know the official SLAs, which can be found here: <https://azure.microsoft.com/support/legal/sla></span></span>

<span data-ttu-id="d98ef-950">Le informazioni sul ridimensionamento di SAP e un elenco degli SKU di VM con certificazione SAP sono disponibili nella nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="d98ef-950">SAP sizing information and a list of SAP certified VM SKUs is provided in SAP Note [1928533].</span></span> <span data-ttu-id="d98ef-951">Altri documenti di ridimensionamento SAP per le macchine virtuali di Azure sono disponibili qui <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> e qui <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-951">Additional SAP sizing documents for Azure Virtual machines can be found here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/06/19/how-to-size-sap-systems-running-on-azure-vms.aspx> and here <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="d98ef-952">Le istruzioni e i suggerimenti relativi all'utilizzo di Archiviazione di Azure, alla distribuzione di VM SAP o al monitoraggio di SAP si applicano alle distribuzioni di SAP ASE insieme alle applicazioni SAP, come indicato nei primi quattro capitoli di questo documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-952">Statements and recommendations in regard to the usage of Azure Storage, Deployment of SAP VMs or SAP Monitoring apply to deployments of SAP ASE in conjunction with SAP applications as stated throughout the first four chapters of this document.</span></span>

<span data-ttu-id="d98ef-953">Le due note SAP seguenti includono informazioni generali su ASE in Linux e su ASE nel cloud:</span><span class="sxs-lookup"><span data-stu-id="d98ef-953">The following two SAP Notes include general information about ASE on Linux and ASE in the Cloud:</span></span>

* <span data-ttu-id="d98ef-954">[2134316]</span><span class="sxs-lookup"><span data-stu-id="d98ef-954">[2134316]</span></span>
* <span data-ttu-id="d98ef-955">[1941500]</span><span class="sxs-lookup"><span data-stu-id="d98ef-955">[1941500]</span></span>

### <a name="sap-ase-version-support"></a><span data-ttu-id="d98ef-956">Supporto della versione di SAP ASE</span><span class="sxs-lookup"><span data-stu-id="d98ef-956">SAP ASE Version Support</span></span>
<span data-ttu-id="d98ef-957">SAP supporta attualmente SAP ASE versione 16.0 per l'uso con i prodotti SAP Business Suite.</span><span class="sxs-lookup"><span data-stu-id="d98ef-957">SAP currently supports SAP ASE version 16.0 for use with SAP Business Suite products.</span></span> <span data-ttu-id="d98ef-958">Tutti gli aggiornamenti per il server SAP ASE o per i driver ODBC e JDBC da usare con i prodotti SAP Business Suite vengono forniti esclusivamente in SAP Service Marketplace su: <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-958">All updates for SAP ASE server, or JDBC and ODBC drivers to be used with SAP Business Suite products are provided solely through the SAP Service Marketplace at: <https://support.sap.com/swdc>.</span></span>

<span data-ttu-id="d98ef-959">Come per le installazioni locali, non scaricare gli aggiornamenti per il server SAP ASE o per i driver ODBC e JDBC direttamente dai siti Web Sybase.</span><span class="sxs-lookup"><span data-stu-id="d98ef-959">As for installations on-premises, do not download updates for the SAP ASE server, or for the JDBC and ODBC drivers directly from Sybase websites.</span></span> <span data-ttu-id="d98ef-960">Per informazioni dettagliate sulle patch supportate per l'uso con i prodotti SAP Business Suite in locale e nelle macchine virtuali di Azure, vedere le note SAP seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-960">For detailed information on patches, which are supported for use with SAP Business Suite products on-premises and in Azure Virtual Machines see the following SAP Notes:</span></span>

* <span data-ttu-id="d98ef-961">[1590719]</span><span class="sxs-lookup"><span data-stu-id="d98ef-961">[1590719]</span></span>
* <span data-ttu-id="d98ef-962">[1973241]</span><span class="sxs-lookup"><span data-stu-id="d98ef-962">[1973241]</span></span>

<span data-ttu-id="d98ef-963">Le informazioni generali sull'esecuzione di SAP Business Suite in SAP ASE sono disponibili in [SCN](https://www.sap.com/community/topic/ase.html)</span><span class="sxs-lookup"><span data-stu-id="d98ef-963">General information on running SAP Business Suite on SAP ASE can be found in the [SCN](https://www.sap.com/community/topic/ase.html)</span></span>

### <a name="sap-ase-configuration-guidelines-for-sap-related-sap-ase-installations-in-azure-vms"></a><span data-ttu-id="d98ef-964">Linee guida per la configurazione di SAP ASE per le installazioni di SAP ASE correlate a SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-964">SAP ASE Configuration Guidelines for SAP-related SAP ASE Installations in Azure VMs</span></span>
#### <a name="structure-of-the-sap-ase-deployment"></a><span data-ttu-id="d98ef-965">Struttura della distribuzione SAP ASE</span><span class="sxs-lookup"><span data-stu-id="d98ef-965">Structure of the SAP ASE Deployment</span></span>
<span data-ttu-id="d98ef-966">In base alla descrizione generale, gli eseguibili di SAP ASE devono essere salvati o installati nel file system radice della VM (/sybase ).</span><span class="sxs-lookup"><span data-stu-id="d98ef-966">In accordance with the general description, SAP ASE executables should be located or installed into the root file system of the VM ( /sybase ).</span></span> <span data-ttu-id="d98ef-967">In genere, la maggior parte dei database di sistema e di strumenti di SAP ASE non viene pienamente sfruttata dal carico di lavoro di SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="d98ef-967">Typically, most of the SAP ASE system and tools databases are not really leveraged hard by SAP NetWeaver workload.</span></span> <span data-ttu-id="d98ef-968">I database di sistema e di strumenti (master, modello, saptools, sybmgmtdb, sybsystemdb) possono quindi rimanere anche nel file system radice.</span><span class="sxs-lookup"><span data-stu-id="d98ef-968">Hence the system and tools databases (master, model, saptools, sybmgmtdb, sybsystemdb) can remain on the root file system as well.</span></span> 

<span data-ttu-id="d98ef-969">Può fare eccezione il database temporaneo contenente tutte le tabelle di lavoro e le tabelle temporanee create da SAP ASE, che nel caso di alcuni carichi di lavoro SAP ERP e di tutti i carichi di lavoro BW può richiedere un volume dati o un volume di operazioni di I/O superiore, perché di dimensioni troppo grandi per il disco del sistema operativo della VM originale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-969">An exception could be the temporary database containing all work tables and temporary tables created by SAP ASE, which in case of some SAP ERP and all BW workloads might require either higher data volume or I/O operations, volume which can’t fit into the original VM’s OS disk.</span></span>

<span data-ttu-id="d98ef-970">A seconda della versione di SAPInst/SWPM usata per installare il sistema, il database può contenere:</span><span class="sxs-lookup"><span data-stu-id="d98ef-970">Depending on the version of SAPInst/SWPM used to install the system, the database might contain:</span></span>

* <span data-ttu-id="d98ef-971">Un solo tempdb SAP ASE creato durante l'installazione di SAP ASE</span><span class="sxs-lookup"><span data-stu-id="d98ef-971">A single SAP ASE tempdb, which is created when installing SAP ASE</span></span>
* <span data-ttu-id="d98ef-972">Un tempdb SAP ASE creato in seguito all'installazione di SAP ASE e un saptempdb aggiuntivo creato dalla routine di installazione SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-972">An SAP ASE tempdb created by installing SAP ASE and an additional saptempdb created by the SAP installation routine</span></span>
* <span data-ttu-id="d98ef-973">Un tempdb SAP ASE creato con l'installazione di SAP ASE e un tempdb aggiuntivo creato manualmente (ad esempio, seguendo la nota SAP [1752266]) per soddisfare i requisiti specifici di ERP/BW per tempdb</span><span class="sxs-lookup"><span data-stu-id="d98ef-973">An SAP ASE tempdb created by installing SAP ASE and an additional tempdb that has been created manually (for example following SAP Note [1752266]) to meet ERP/BW specific tempdb requirements</span></span>

<span data-ttu-id="d98ef-974">Nel caso di carichi di lavoro ERP specifici o di tutti i carichi di lavoro BW è consigliabile, dal punto di vista delle prestazioni, mantenere i dispositivi tempdb del tempdb aggiuntivo creato (con SWPM o manualmente) in un file system separato, che può essere rappresentato da un unico disco dati di Azure o da un RAID Linux che si estende su più dischi dati di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-974">In case of specific ERP or all BW workloads, it makes sense, in regard to performance, to keep the tempdb devices of the additionally created tempdb (by SWPM or manually) on a separate file system, which can be represented by a single Azure data disk or a Linux RAID spanning multiple Azure data disks.</span></span> <span data-ttu-id="d98ef-975">Se non esistono tempdb aggiuntivi, è consigliabile crearne uno (nota SAP [1752266]).</span><span class="sxs-lookup"><span data-stu-id="d98ef-975">If no additional tempdb exists, it is recommended to create one (SAP Note [1752266]).</span></span>

<span data-ttu-id="d98ef-976">Per tali sistemi, eseguire questa procedura per il tempdb aggiuntivo creato:</span><span class="sxs-lookup"><span data-stu-id="d98ef-976">For such systems the following steps should be performed for the additionally created tempdb:</span></span>

* <span data-ttu-id="d98ef-977">Spostare la prima directory tempdb nel primo file system del database SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-977">Move the first tempdb directory to the first file system of the SAP database</span></span>
* <span data-ttu-id="d98ef-978">Aggiungere le directory tempdb a ogni disco contenente un file system del database SAP</span><span class="sxs-lookup"><span data-stu-id="d98ef-978">Add tempdb directories to each of the disks containing a filesystem of the SAP database</span></span>

<span data-ttu-id="d98ef-979">Questa configurazione consente a tempdb di utilizzare più spazio di quello fornito dall'unità di sistema.</span><span class="sxs-lookup"><span data-stu-id="d98ef-979">This configuration enables tempdb to either consume more space than the system drive is able to provide.</span></span> <span data-ttu-id="d98ef-980">Come riferimento è possibile controllare le dimensioni della directory tempdb nei sistemi esistenti eseguiti in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-980">As a reference one can check the tempdb directory sizes on existing systems, which run on-premises.</span></span> <span data-ttu-id="d98ef-981">In alternativa, con una tale configurazione potrà essere eseguito su tempdb un numero di operazioni di I/O al secondo che l'unità di sistema non può garantire.</span><span class="sxs-lookup"><span data-stu-id="d98ef-981">Or such a configuration would enable IOPS numbers against tempdb, which cannot be provided with the system drive.</span></span> <span data-ttu-id="d98ef-982">I sistemi in esecuzione in locale possono anche essere usati per monitorare il carico di lavoro di I/O in tempdb.</span><span class="sxs-lookup"><span data-stu-id="d98ef-982">Again systems that are running on-premises can be used to monitor I/O workload against tempdb.</span></span>

<span data-ttu-id="d98ef-983">Non inserire mai le directory SAP ASE in /mnt o /mnt/resource nella VM.</span><span class="sxs-lookup"><span data-stu-id="d98ef-983">Never put any SAP ASE directories onto /mnt or /mnt/resource of the VM.</span></span> <span data-ttu-id="d98ef-984">Questo si applica anche a tempdb, anche se gli oggetti conservati in tempdb sono solo temporanei perché /mnt o /mnt/resource è uno spazio temporaneo predefinito della VM di Azure non persistente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-984">This also applies to the tempdb, even if the objects kept in the tempdb are only temporary because /mnt or /mnt/resource is a default Azure VM temp space, which is not persistent.</span></span> <span data-ttu-id="d98ef-985">Per altri dettagli sullo spazio temporaneo della macchina virtuale di Azure, vedere [questo articolo][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="d98ef-985">More details about the Azure VM temp space can be found in [this article][virtual-machines-linux-how-to-attach-disk]</span></span>

#### <a name="impact-of-database-compression"></a><span data-ttu-id="d98ef-986">Impatto della compressione del database</span><span class="sxs-lookup"><span data-stu-id="d98ef-986">Impact of Database Compression</span></span>
<span data-ttu-id="d98ef-987">Nelle configurazioni in cui la larghezza di banda di I/O può diventare un fattore limitante, ogni misura che riduce le operazioni di I/O al secondo consente di estendere il carico di lavoro eseguibile in uno scenario IaaS come Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-987">In configurations where I/O bandwidth can become a limiting factor, every measure, which reduces IOPS might help to stretch the workload one can run in an IaaS scenario like Azure.</span></span> <span data-ttu-id="d98ef-988">È quindi consigliabile verificare che venga usata la compressione SAP ASE prima di caricare un database SAP esistente in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-988">Therefore, it is strongly recommended to make sure that SAP ASE compression is used before uploading an existing SAP database to Azure.</span></span>

<span data-ttu-id="d98ef-989">Sono diversi i motivi per cui è consigliabile eseguire la compressione del database prima del caricamento in Azure se non è già stata implementata:</span><span class="sxs-lookup"><span data-stu-id="d98ef-989">The recommendation to perform compression before uploading to Azure if it is not already implemented is given out of several reasons:</span></span>

* <span data-ttu-id="d98ef-990">La quantità di dati da caricare in Azure è minore</span><span class="sxs-lookup"><span data-stu-id="d98ef-990">The amount of data to be uploaded to Azure is lower</span></span>
* <span data-ttu-id="d98ef-991">La durata dell'esecuzione della compressione è inferiore, presupponendo che si possa usare hardware più avanzato con più CPU o una maggiore larghezza di banda di I/O oppure meno latenza di I/O in locale</span><span class="sxs-lookup"><span data-stu-id="d98ef-991">The duration of the compression execution is shorter assuming that one can use stronger hardware with more CPUs or higher I/O bandwidth or less I/O latency on-premises</span></span>
* <span data-ttu-id="d98ef-992">L'uso di database di dimensioni inferiori può contribuire a ridurre i costi per l'allocazione dei dischi</span><span class="sxs-lookup"><span data-stu-id="d98ef-992">Smaller database sizes might lead to less costs for disk allocation</span></span>

<span data-ttu-id="d98ef-993">Il funzionamento della compressione dati e LOB in una VM ospitata in macchine virtuali di Azure è uguale a quello in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-993">Data- and LOB-Compression work in a VM hosted in Azure Virtual Machines as it does on-premises.</span></span> <span data-ttu-id="d98ef-994">Per altri dettagli su come controllare se la compressione è già in uso in un database SAP ASE esistente, vedere la nota SAP [1750510].</span><span class="sxs-lookup"><span data-stu-id="d98ef-994">For more details on how to check if compression is already in use in an existing SAP ASE database, check SAP Note [1750510].</span></span> <span data-ttu-id="d98ef-995">Per altre informazioni sulla compressione del database, vedere la nota SAP [2121797].</span><span class="sxs-lookup"><span data-stu-id="d98ef-995">For additional information regarding database compression, see SAP Note [2121797].</span></span>

#### <a name="using-dbacockpit-to-monitor-database-instances"></a><span data-ttu-id="d98ef-996">Uso di DBACockpit per monitorare le istanze di database</span><span class="sxs-lookup"><span data-stu-id="d98ef-996">Using DBACockpit to monitor Database Instances</span></span>
<span data-ttu-id="d98ef-997">Per i sistemi SAP che usano SAP ASE come piattaforma di database, DBACockpit è accessibile come finestra del browser incorporata nella transazione DBACockpit o come Webdynpro.</span><span class="sxs-lookup"><span data-stu-id="d98ef-997">For SAP systems, which are using SAP ASE as database platform, the DBACockpit is accessible as embedded browser windows in transaction DBACockpit or as Webdynpro.</span></span> <span data-ttu-id="d98ef-998">La funzionalità completa per monitorare e gestire il database è tuttavia disponibile solo nell'implementazione Webdynpro di DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="d98ef-998">However the full functionality for monitoring and administering the database is available in the Webdynpro implementation of the DBACockpit only.</span></span>

<span data-ttu-id="d98ef-999">Come per i sistemi locali, sono necessari diversi passaggi per abilitare tutte le funzionalità di SAP NetWeaver usate dall'implementazione Webdynpro di DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="d98ef-999">As with on-premises systems several steps are required to enable all SAP NetWeaver functionality used by the Webdynpro implementation of the DBACockpit.</span></span> <span data-ttu-id="d98ef-1000">Per abilitare l'utilizzo di Webdynpro e generare le istanze necessarie, vedere la nota SAP [1245200].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1000">Follow SAP Note [1245200] to enable the usage of webdynpros and generate the required ones.</span></span> <span data-ttu-id="d98ef-1001">Quando si seguono le istruzioni delle note precedenti, si configura anche Internet Communication Manager (ICM) insieme alle porte da usare per le connessioni HTTP e HTTPS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1001">When following the instructions in the above notes, you also configure the Internet Communication Manager (icm) along with the ports to be used for http and https connections.</span></span> <span data-ttu-id="d98ef-1002">L'impostazione predefinita per HTTP è simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1002">The default setting for http looks like this:</span></span>

> <span data-ttu-id="d98ef-1003">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="d98ef-1003">icm/server_port_0 = PROT=HTTP,PORT=8000,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> <span data-ttu-id="d98ef-1004">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span><span class="sxs-lookup"><span data-stu-id="d98ef-1004">icm/server_port_1 = PROT=HTTPS,PORT=443$$,PROCTIMEOUT=600,TIMEOUT=600</span></span>
> 
> 

<span data-ttu-id="d98ef-1005">I collegamenti generati nella transazione DBACockpit saranno simili ai seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1005">and the links generated in transaction DBACockpit will look similar to this:</span></span>

> <span data-ttu-id="d98ef-1006">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="d98ef-1006">https://`<fullyqualifiedhostname`>:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="d98ef-1007">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="d98ef-1007">http://`<fullyqualifiedhostname`>:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="d98ef-1008">A seconda del fatto che la macchina virtuale di Azure che ospita il sistema SAP sia connessa o meno tramite una connessione da sito a sito, multisito o ExpressRoute (distribuzione cross-premise), è necessario verificare che ICM usi un nome host completo che può essere risolto nel computer da cui si sta cercando di aprire DBACockpit.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1008">Depending on if and how the Azure Virtual Machine hosting the SAP system is connected via site-to-site, multi-site or ExpressRoute (Cross-Premises deployment) you need to make sure that ICM is using a fully qualified hostname that can be resolved on the machine where you are trying to open the DBACockpit from.</span></span> <span data-ttu-id="d98ef-1009">Per informazioni su come ICM determina il nome host completo in base ai parametri del profilo e su come impostare il parametro icm/host_name_full in modo esplicito, se necessario, vedere la nota SAP [773830].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1009">See SAP Note [773830] to understand how ICM determines the fully qualified host name depending on profile parameters and set parameter icm/host_name_full explicitly if required.</span></span>

<span data-ttu-id="d98ef-1010">Se la VM è stata distribuita in uno scenario solo cloud senza connettività cross-premise tra l'ambiente locale e Azure, è necessario definire un indirizzo IP pubblico e un'etichetta di dominio.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1010">If you deployed the VM in a Cloud-Only scenario without cross-premises connectivity between on-premises and Azure, you need to define a public IP address and a domainlabel.</span></span> <span data-ttu-id="d98ef-1011">Il formato del nome DNS pubblico della VM si presenta come segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1011">The format of the public DNS name of the VM looks like this:</span></span>

> <span data-ttu-id="d98ef-1012">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span><span class="sxs-lookup"><span data-stu-id="d98ef-1012">`<custom domainlabel`>.`<azure region`>.cloudapp.azure.com</span></span>
> 
> 

<span data-ttu-id="d98ef-1013">Altri dettagli relativi al nome DNS sono disponibili [qui][virtual-machines-azurerm-versus-azuresm].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1013">More details related to the DNS name can be found [here][virtual-machines-azurerm-versus-azuresm].</span></span>

<span data-ttu-id="d98ef-1014">Impostando il parametro del profilo SAP icm/host_name_full sul nome DNS della VM di Azure, il collegamento sarà simile a:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1014">Setting the SAP profile parameter icm/host_name_full to the DNS name of the Azure VM the link might look similar to:</span></span>

> <span data-ttu-id="d98ef-1015">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="d98ef-1015">https://mydomainlabel.westeurope.cloudapp.net:44300/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> <span data-ttu-id="d98ef-1016">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span><span class="sxs-lookup"><span data-stu-id="d98ef-1016">http://mydomainlabel.westeurope.cloudapp.net:8000/sap/bc/webdynpro/sap/dba_cockpit</span></span>
> 
> 

<span data-ttu-id="d98ef-1017">In questo caso è necessario assicurarsi di:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1017">In this case you need to make sure to:</span></span>

* <span data-ttu-id="d98ef-1018">Aggiungere regole in ingresso al gruppo di sicurezza di rete nel portale di Azure per le porte TCP/IP usate per comunicare con ICM</span><span class="sxs-lookup"><span data-stu-id="d98ef-1018">Add Inbound rules to the Network Security Group in the Azure portal for the TCP/IP ports used to communicate with ICM</span></span>
* <span data-ttu-id="d98ef-1019">Aggiungere regole in ingresso alla configurazione di Windows Firewall per le porte TCP/IP usate per comunicare con ICM</span><span class="sxs-lookup"><span data-stu-id="d98ef-1019">Add Inbound rules to the Windows Firewall configuration for the TCP/IP ports used to communicate with the ICM</span></span>

<span data-ttu-id="d98ef-1020">Per importare automaticamente tutte le correzioni disponibili, è consigliabile applicare periodicamente la nota SAP della raccolta di correzioni applicabile alla propria versione di SAP:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1020">For an automated imported of all corrections available, it is recommended to periodically apply the correction collection SAP Note applicable to your SAP version:</span></span>

* <span data-ttu-id="d98ef-1021">[1558958]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1021">[1558958]</span></span>
* <span data-ttu-id="d98ef-1022">[1619967]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1022">[1619967]</span></span>
* <span data-ttu-id="d98ef-1023">[1882376]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1023">[1882376]</span></span>

<span data-ttu-id="d98ef-1024">Per altre informazioni su DBA Cockpit per SAP ASE, vedere le note SAP seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1024">Further information about DBA Cockpit for SAP ASE can be found in the following SAP Notes:</span></span>

* <span data-ttu-id="d98ef-1025">[1605680]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1025">[1605680]</span></span>
* <span data-ttu-id="d98ef-1026">[1757924]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1026">[1757924]</span></span>
* <span data-ttu-id="d98ef-1027">[1757928]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1027">[1757928]</span></span>
* <span data-ttu-id="d98ef-1028">[1758182]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1028">[1758182]</span></span>
* <span data-ttu-id="d98ef-1029">[1758496]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1029">[1758496]</span></span>    
* <span data-ttu-id="d98ef-1030">[1814258]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1030">[1814258]</span></span>
* <span data-ttu-id="d98ef-1031">[1922555]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1031">[1922555]</span></span>
* <span data-ttu-id="d98ef-1032">[1956005]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1032">[1956005]</span></span>

#### <a name="backuprecovery-considerations-for-sap-ase"></a><span data-ttu-id="d98ef-1033">Considerazioni sul backup/ripristino per SAP ASE</span><span class="sxs-lookup"><span data-stu-id="d98ef-1033">Backup/Recovery Considerations for SAP ASE</span></span>
<span data-ttu-id="d98ef-1034">Quando si distribuisce SAP ASE in Azure, è necessario rivedere la metodologia di backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1034">When deploying SAP ASE into Azure your backup methodology must be reviewed.</span></span> <span data-ttu-id="d98ef-1035">Anche se il sistema non è usato in produzione, è necessario eseguire periodicamente il backup del database SAP ospitato da SAP ASE.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1035">Even if the system is not a productive system, the SAP database hosted by SAP ASE must be backed up periodically.</span></span> <span data-ttu-id="d98ef-1036">Dal momento che in Archiviazione di Azure vengono mantenute tre immagini, ora un backup è meno importante rispetto alla compensazione di un arresto anomalo della risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1036">Since Azure Storage keeps three images, a backup is now less important in respect to compensating a storage crash.</span></span> <span data-ttu-id="d98ef-1037">È opportuno predisporre un piano di backup e ripristino appropriato principalmente perché consente di risolvere gli errori logici/manuali fornendo funzionalità di ripristino temporizzato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1037">The primary reason for maintaining a proper backup and restore plan is more that you can compensate for logical/manual errors by providing point in time recovery capabilities.</span></span> <span data-ttu-id="d98ef-1038">L'obiettivo è quindi quello di usare i backup per ripristinare un determinato stato precedente del database o di usare i backup in Azure per effettuare il seeding di un altro sistema copiando il database esistente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1038">So the goal is to either use backups to restore the database back to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="d98ef-1039">È possibile, ad esempio, passare da una configurazione SAP di livello 2 a una configurazione di sistema di livello 3 dello stesso sistema ripristinando un backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1039">For example, you could transfer from a 2-Tier SAP configuration to a 3-Tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="d98ef-1040">Il backup e il ripristino di un database in Azure funzionano esattamente come in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1040">Backing up and restoring a database in Azure works the same way as it does on-premises.</span></span> <span data-ttu-id="d98ef-1041">Vedere le note SAP seguenti:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1041">See SAP Notes:</span></span>

* <span data-ttu-id="d98ef-1042">[1588316]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1042">[1588316]</span></span>
* <span data-ttu-id="d98ef-1043">[1585981]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1043">[1585981]</span></span>

<span data-ttu-id="d98ef-1044">per i dettagli sulla creazione di configurazioni di dump e sulla pianificazione dei backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1044">for details on creating dump configurations and scheduling backups.</span></span> <span data-ttu-id="d98ef-1045">A seconda della strategia e delle esigenze, è possibile configurare i dump di database e di log su disco in uno dei dischi esistenti oppure aggiungere un altro disco per il backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1045">Depending on your strategy and needs you can configure database and log dumps to disk onto one of the existing disks or add an additional disk for the backup.</span></span> <span data-ttu-id="d98ef-1046">Per limitare il rischio di perdita dei dati in caso di errore, è consigliabile usare un disco senza directory/file per il database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1046">To reduce the danger of data loss in case of an error it is recommended to use a disk where no database directory/file is located.</span></span>

<span data-ttu-id="d98ef-1047">Oltre alla compressione dati e LOB, SAP ASE offre anche la compressione del backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1047">Besides data- and LOB compression SAP ASE also offers backup compression.</span></span> <span data-ttu-id="d98ef-1048">Per occupare meno spazio con i dump di database e di log, è consigliabile usare la compressione del backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1048">To occupy less space with the database and log dumps it is recommended to use backup compression.</span></span> <span data-ttu-id="d98ef-1049">Per altre informazioni, vedere la nota SAP [1588316].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1049">For more information, see SAP Note [1588316].</span></span> <span data-ttu-id="d98ef-1050">La compressione del backup è fondamentale anche per ridurre la quantità di dati da trasferire se si prevede di scaricare backup o dischi rigidi virtuali contenenti dump di backup dalla macchina virtuale di Azure in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1050">Compressing the backup is also crucial to reduce the amount of data to be transferred if you plan to download backups or VHDs containing backup dumps from the Azure Virtual Machine to on-premises.</span></span>

<span data-ttu-id="d98ef-1051">Non usare lo spazio temporaneo della VM di Azure /mnt o /mnt/resource come destinazione dei dump di database o di log.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1051">Do not use the Azure VM temp space /mnt or /mnt/resource as database or log dump destination.</span></span>

#### <a name="performance-considerations-for-backupsrestores"></a><span data-ttu-id="d98ef-1052">Considerazioni sulle prestazioni per backup/ripristini</span><span class="sxs-lookup"><span data-stu-id="d98ef-1052">Performance Considerations for Backups/Restores</span></span>
<span data-ttu-id="d98ef-1053">Come nelle distribuzioni bare metal, le prestazioni dei backup/ripristini dipendono dalla quantità di volumi leggibili in parallelo e dalla velocità effettiva di tali volumi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1053">As in bare-metal deployments, backup/restore performance is dependent on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="d98ef-1054">Inoltre, l'utilizzo di CPU associato alla compressione del backup può avere un ruolo significativo per VM con un massimo di soli otto thread CPU.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1054">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="d98ef-1055">Si può quindi presumere quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1055">Therefore, one can assume:</span></span>

* <span data-ttu-id="d98ef-1056">Minore è il numero dei dischi usati per l'archiviazione dei dispositivi del database, più bassa è la velocità effettiva generale nella lettura</span><span class="sxs-lookup"><span data-stu-id="d98ef-1056">The fewer the number of disks used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="d98ef-1057">Minore è il numero di thread CPU nella VM, più forte è l'impatto della compressione del backup</span><span class="sxs-lookup"><span data-stu-id="d98ef-1057">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="d98ef-1058">Minore è il numero di destinazioni (RAID software Linux o dischi) in cui scrivere il backup, più bassa è la velocità effettiva</span><span class="sxs-lookup"><span data-stu-id="d98ef-1058">The fewer targets (Linux software RAID, disks) to write the backup to, the lesser the throughput</span></span>

<span data-ttu-id="d98ef-1059">Per aumentare il numero di destinazioni in cui scrivere, sono disponibili due opzioni che possono essere usate/combinate a seconda delle proprie esigenze:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1059">To increase the number of targets to write to there are two options, which can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="d98ef-1060">Striping del volume di destinazione di backup su più dischi montati per migliorare la velocità effettiva delle operazioni di I/O al secondo in tale volume con striping</span><span class="sxs-lookup"><span data-stu-id="d98ef-1060">Striping the backup target volume over multiple mounted disks in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="d98ef-1061">Creazione di una configurazione dump a livello di SAP ASE che usa più directory di destinazione per la scrittura del dump</span><span class="sxs-lookup"><span data-stu-id="d98ef-1061">Creating a dump configuration on SAP ASE level, which uses more than one target directory to write the dump to</span></span>

<span data-ttu-id="d98ef-1062">Lo striping di un volume su più dischi montati è stato illustrato prima in questa guida.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1062">Striping a volume over multiple mounted disks has been discussed earlier in this guide.</span></span> <span data-ttu-id="d98ef-1063">Per altre informazioni sull'uso di più directory nella configurazione dump SAP ASE, vedere la documentazione sulla stored procedure sp_config_dump che viene usata per creare la configurazione dump in [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1063">For more information on using multiple directories in the SAP ASE dump configuration, refer to the documentation on Stored Procedure sp_config_dump, which is used to create the dump configuration on the [Sybase Infocenter](http://infocenter.sybase.com/help/index.jsp).</span></span>

### <a name="disaster-recovery-with-azure-vms"></a><span data-ttu-id="d98ef-1064">Ripristino di emergenza con VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-1064">Disaster Recovery with Azure VMs</span></span>
#### <a name="data-replication-with-sap-sybase-replication-server"></a><span data-ttu-id="d98ef-1065">Replica dei dati con SAP Sybase Replication Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-1065">Data Replication with SAP Sybase Replication Server</span></span>
<span data-ttu-id="d98ef-1066">Con SAP Sybase Replication Server (SRS), SAP ASE offre una nuova soluzione di standby per trasferire in modo asincrono le transazioni di database in una posizione distante.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1066">With the SAP Sybase Replication Server (SRS) SAP ASE provides a warm standby solution to transfer database transactions to a distant location asynchronously.</span></span> 

<span data-ttu-id="d98ef-1067">L'installazione e il funzionamento di SRS sono altrettanto efficaci sia in una VM ospitata nei servizi Macchine virtuali di Azure che in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1067">The installation and operation of SRS works as well functionally in a VM hosted in Azure Virtual Machine Services as it does on-premises.</span></span>

<span data-ttu-id="d98ef-1068">ASE HADR tramite SAP Replication Server NON è attualmente supportato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1068">ASE HADR via SAP Replication Server is NOT supported at this point in time.</span></span> <span data-ttu-id="d98ef-1069">È possibile che venga testato e rilasciato per le piattaforme Microsoft Azure in futuro.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1069">It might be tested with and released for Microsoft Azure platforms in the future.</span></span>

## <a name="specifics-to-oracle-database-on-windows"></a><span data-ttu-id="d98ef-1070">Specifiche per Oracle Database in Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-1070">Specifics to Oracle Database on Windows</span></span>
<span data-ttu-id="d98ef-1071">Oracle supporta l'esecuzione di software Oracle in Microsoft Windows Hyper-V e Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1071">Oracle software is supported by Oracle to run on Microsoft Windows Hyper-V and Azure.</span></span> <span data-ttu-id="d98ef-1072">Per informazioni dettagliate sul supporto generale di Windows Hyper-V e Azure, vedere <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span><span class="sxs-lookup"><span data-stu-id="d98ef-1072">For details on the general support of Windows Hyper-V and Azure, check: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span></span> 

<span data-ttu-id="d98ef-1073">In base al supporto generale, è supportato anche lo scenario specifico delle applicazioni SAP che sfruttano i database Oracle.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1073">Following the general support, the specific scenario of SAP applications leveraging Oracle Databases is supported as well.</span></span> <span data-ttu-id="d98ef-1074">I dettagli sono disponibili in questa parte del documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1074">Details are named in this part of the document.</span></span>

### <a name="oracle-version-support"></a><span data-ttu-id="d98ef-1075">Supporto della versione di Oracle</span><span class="sxs-lookup"><span data-stu-id="d98ef-1075">Oracle Version Support</span></span>
<span data-ttu-id="d98ef-1076">Le versioni di Oracle e le corrispondenti versioni del sistema operativo supportate per l'esecuzione di SAP in Oracle nelle macchine virtuali di Azure sono riportate nella nota SAP [2039619].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1076">Oracle versions and corresponding OS versions, which are supported for running SAP on Oracle on Azure Virtual Machines can be found in SAP Note [2039619].</span></span>

<span data-ttu-id="d98ef-1077">Informazioni generali sull'esecuzione di SAP Business Suite in Oracle sono disponibili in 1DX: <https://www.sap.com/community/topic/oracle.html></span><span class="sxs-lookup"><span data-stu-id="d98ef-1077">General information about running SAP Business Suite on Oracle can be found in 1DX: <https://www.sap.com/community/topic/oracle.html></span></span>

### <a name="oracle-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="d98ef-1078">Linee guida per la configurazione di Oracle per le installazioni di SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-1078">Oracle Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="d98ef-1079">Configurazione dell'archiviazione</span><span class="sxs-lookup"><span data-stu-id="d98ef-1079">Storage configuration</span></span>
<span data-ttu-id="d98ef-1080">È supportata una sola istanza di Oracle che usa dischi formattati NTFS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1080">Only single instance Oracle using NTFS formatted disks is supported.</span></span> <span data-ttu-id="d98ef-1081">Tutti i file di database devono essere archiviati nel file system NTFS basato su dischi rigidi virtuali o Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1081">All database files must be stored on the NTFS file system based on VHDs or Managed Disks.</span></span> <span data-ttu-id="d98ef-1082">I dischi vengono montati nella VM di Azure e sono basati sull'archivio BLOB di pagine di Azure (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) o su Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1082">These disks are mounted to the Azure VM and are based on Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="d98ef-1083">Le unità di rete o le condivisioni remote, ad esempio i servizi file di Azure:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1083">Any kind of network drives or remote shares like Azure file services:</span></span>

* <span data-ttu-id="d98ef-1084"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-1084"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span> 
* <span data-ttu-id="d98ef-1085"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-1085"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="d98ef-1086">**NON** sono supportate per i file di database Oracle.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1086">are **NOT** supported for Oracle database files!</span></span>

<span data-ttu-id="d98ef-1087">Se vengono usati dischi basati sull'archivio BLOB di pagine di Azure o su Managed Disks, le istruzioni riportate nei capitoli [Caching per VM e dischi dati][dbms-guide-2.1] e [Archiviazione di Microsoft Azure][dbms-guide-2.3] di questo documento si applicano anche alle distribuzioni con Oracle Database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1087">Using disks based on Azure Page BLOB Storage or Managed Disks, the statements made in this document in chapter [Caching for VMs and data disks][dbms-guide-2.1] and [Microsoft Azure Storage][dbms-guide-2.3] apply to deployments with the Oracle Database as well.</span></span>

<span data-ttu-id="d98ef-1088">Come spiegato in precedenza nella parte generale del documento, esistono quote relative alla velocità effettiva delle operazioni di I/O al secondo per i dischi di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1088">As explained earlier in the general part of the document, quotas on IOPS throughput for Azure disks exist.</span></span> <span data-ttu-id="d98ef-1089">Le quote esatte dipendono dal tipo di VM usato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1089">The exact quotas are depending on the VM type used.</span></span> <span data-ttu-id="d98ef-1090">Un elenco dei tipi di VM con le rispettive quote è disponibile [qui (per Linux)][virtual-machines-sizes-linux] e [qui (per Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1090">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="d98ef-1091">Per identificare i tipi di VM di Azure supportati, vedere la nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1091">To identify the supported Azure VM types, refer to SAP note [1928533].</span></span>

<span data-ttu-id="d98ef-1092">Se la quota corrente di operazioni di I/O al secondo per ogni disco soddisfa i requisiti, è possibile archiviare tutti i file di DB in un singolo disco montato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1092">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the DB files on one single mounted disk.</span></span> 

<span data-ttu-id="d98ef-1093">Se sono necessarie più operazioni di I/O al secondo, è consigliabile usare i pool di archiviazione Windows (disponibili solo in Windows Server 2012 e versioni successive) o la funzionalità di striping di Windows per Windows 2008 R2 per creare un solo dispositivo logico di grandi dimensioni su più dischi montati (vedere anche il capitolo [RAID software][dbms-guide-2.2] di questo documento).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1093">If more IOPS are required, it is strongly recommended to use Window Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 to create one large logical device over multiple mounted disks (see also chapter [Software RAID][dbms-guide-2.2] of this document).</span></span> <span data-ttu-id="d98ef-1094">Questo approccio riduce il sovraccarico di amministrazione per la gestione dello spazio su disco ed evita la fatica di distribuire manualmente i file in più dischi montati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1094">This approach simplifies the administration overhead to manage the disk space and avoids the effort to manually distribute files across multiple mounted disks.</span></span>

#### <a name="backup--restore"></a><span data-ttu-id="d98ef-1095">Backup/Ripristino</span><span class="sxs-lookup"><span data-stu-id="d98ef-1095">Backup / Restore</span></span>
<span data-ttu-id="d98ef-1096">Per la funzionalità di backup/ripristino, SAP BR*Tools per Oracle è supportato esattamente come nei sistemi operativi Windows Server standard e in Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1096">For backup / restore functionality, the SAP BR*Tools for Oracle are supported in the same way as on standard Windows Server Operating Systems and Hyper-V.</span></span> <span data-ttu-id="d98ef-1097">Per i backup su disco e per il ripristino da disco, è supportato anche Oracle Recovery Manager (RMAN).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1097">Oracle Recovery Manager (RMAN) is also supported for backups to disk and restore from disk.</span></span>

#### <a name="high-availability"></a><span data-ttu-id="d98ef-1098">Disponibilità elevata</span><span class="sxs-lookup"><span data-stu-id="d98ef-1098">High Availability</span></span>
<span data-ttu-id="d98ef-1099">Oracle Data Guard è supportato per motivi di disponibilità elevata e ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1099">Oracle Data Guard is supported for high availability and disaster recovery purposes.</span></span> <span data-ttu-id="d98ef-1100">I dettagli sono disponibili in [questa][virtual-machines-windows-classic-configure-oracle-data-guard] documentazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1100">Details can be found in [this][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span></span>

#### <a name="other"></a><span data-ttu-id="d98ef-1101">Altri</span><span class="sxs-lookup"><span data-stu-id="d98ef-1101">Other</span></span>
<span data-ttu-id="d98ef-1102">Tutti gli altri argomenti generali, ad esempio i set di disponibilità di Azure o il monitoraggio SAP, si applicano come descritto nei primi tre capitoli di questo documento anche per le distribuzioni di VM con Oracle Database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1102">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with the Oracle Database as well.</span></span>

## <a name="specifics-to-oracle-database-on-oracle-linux"></a><span data-ttu-id="d98ef-1103">Specifiche per Oracle Database in Oracle Linux</span><span class="sxs-lookup"><span data-stu-id="d98ef-1103">Specifics to Oracle Database on Oracle Linux</span></span>
<span data-ttu-id="d98ef-1104">Oracle supporta l'esecuzione di software Oracle in Microsoft Windows Hyper-V e Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1104">Oracle software is supported by Oracle to run on Microsoft Windows Hyper-V and Azure.</span></span> <span data-ttu-id="d98ef-1105">Per informazioni dettagliate sul supporto generale di Windows Hyper-V e Azure, vedere <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span><span class="sxs-lookup"><span data-stu-id="d98ef-1105">For details on the general support of Windows Hyper-V and Azure, check: <https://blogs.oracle.com/cloud/entry/oracle_and_microsoft_join_forces></span></span> 

<span data-ttu-id="d98ef-1106">In base al supporto generale, è supportato anche lo scenario specifico delle applicazioni SAP che sfruttano i database Oracle.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1106">Following the general support, the specific scenario of SAP applications leveraging Oracle Databases is supported as well.</span></span> <span data-ttu-id="d98ef-1107">I dettagli sono disponibili in questa parte del documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1107">Details are named in this part of the document.</span></span>

### <a name="oracle-version-support"></a><span data-ttu-id="d98ef-1108">Supporto della versione di Oracle</span><span class="sxs-lookup"><span data-stu-id="d98ef-1108">Oracle Version Support</span></span>
<span data-ttu-id="d98ef-1109">Le versioni di Oracle e le corrispondenti versioni del sistema operativo supportate per l'esecuzione di SAP in Oracle nelle macchine virtuali di Azure sono riportate nella nota SAP [2039619].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1109">Oracle versions and corresponding OS versions, which are supported for running SAP on Oracle on Azure Virtual Machines can be found in SAP Note [2039619].</span></span>

<span data-ttu-id="d98ef-1110">Informazioni generali sull'esecuzione di SAP Business Suite in Oracle sono disponibili in 1DX: <https://www.sap.com/community/topic/oracle.html></span><span class="sxs-lookup"><span data-stu-id="d98ef-1110">General information about running SAP Business Suite on Oracle can be found in 1DX: <https://www.sap.com/community/topic/oracle.html></span></span>

### <a name="oracle-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="d98ef-1111">Linee guida per la configurazione di Oracle per le installazioni di SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-1111">Oracle Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="d98ef-1112">Configurazione dell'archiviazione</span><span class="sxs-lookup"><span data-stu-id="d98ef-1112">Storage configuration</span></span>
<span data-ttu-id="d98ef-1113">È supportata una sola istanza di Oracle che usa dischi con formattazione ext3, ext4 e xfs.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1113">Only single instance Oracle using ext3, ext4, and xfs formatted disks is supported.</span></span> <span data-ttu-id="d98ef-1114">Tutti i file di database devono essere archiviati in questi file system basati su dischi rigidi virtuali o Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1114">All database files must be stored on these file systems based on VHDs or Managed Disks.</span></span> <span data-ttu-id="d98ef-1115">I dischi vengono montati nella VM di Azure e sono basati sull'archivio BLOB di pagine di Azure (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) o su Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1115">These disks are mounted to the Azure VM and are based on Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="d98ef-1116">Le unità di rete o le condivisioni remote, ad esempio i servizi file di Azure:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1116">Any kind of network drives or remote shares like Azure file services:</span></span>

* <span data-ttu-id="d98ef-1117"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-1117"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span> 
* <span data-ttu-id="d98ef-1118"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-1118"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="d98ef-1119">**NON** sono supportate per i file di database Oracle.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1119">are **NOT** supported for Oracle database files!</span></span>

<span data-ttu-id="d98ef-1120">Se vengono usati dischi basati sull'archivio BLOB di pagine di Azure o su Managed Disks, le istruzioni riportate nei capitoli [Caching per VM e dischi dati][dbms-guide-2.1] e [Archiviazione di Microsoft Azure][dbms-guide-2.3] di questo documento si applicano anche alle distribuzioni con Oracle Database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1120">Using disks based on Azure Page BLOB Storage or Managed Disks, the statements made in this document in chapter [Caching for VMs and data disks][dbms-guide-2.1] and [Microsoft Azure Storage][dbms-guide-2.3] apply to deployments with the Oracle Database as well.</span></span>

<span data-ttu-id="d98ef-1121">Come spiegato in precedenza nella parte generale del documento, esistono quote relative alla velocità effettiva delle operazioni di I/O al secondo per i dischi di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1121">As explained earlier in the general part of the document, quotas on IOPS throughput for Azure disks exist.</span></span> <span data-ttu-id="d98ef-1122">Le quote esatte dipendono dal tipo di VM usato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1122">The exact quotas are depending on the VM type used.</span></span> <span data-ttu-id="d98ef-1123">Un elenco dei tipi di VM con le rispettive quote è disponibile [qui (per Linux)][virtual-machines-sizes-linux] e [qui (per Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1123">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="d98ef-1124">Per identificare i tipi di VM di Azure supportati, vedere la nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1124">To identify the supported Azure VM types, refer to SAP note [1928533]</span></span>

<span data-ttu-id="d98ef-1125">Se la quota corrente di operazioni di I/O al secondo per ogni disco soddisfa i requisiti, è possibile archiviare tutti i file di DB in un singolo disco montato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1125">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the DB files on one single mounted disk.</span></span> 

<span data-ttu-id="d98ef-1126">Se sono necessarie più operazioni di I/O al secondo, è consigliabile usare LVM (Logical Volume Manager) o MDADM per creare un solo volume logico di grandi dimensioni su più dischi montati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1126">If more IOPS are required, it is strongly recommended to use LVM (Logical Volume Manager) or MDADM to create one large logical volume over multiple mounted disks.</span></span> <span data-ttu-id="d98ef-1127">Vedere anche il capitolo [Software RAID][dbms-guide-2.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1127">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="d98ef-1128">Questo approccio riduce il sovraccarico di amministrazione per la gestione dello spazio su disco ed evita la fatica di distribuire manualmente i file in più dischi montati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1128">This approach simplifies the administration overhead to manage the disk space and avoids the effort to manually distribute files across multiple mounted disks.</span></span>

#### <a name="backup--restore"></a><span data-ttu-id="d98ef-1129">Backup/Ripristino</span><span class="sxs-lookup"><span data-stu-id="d98ef-1129">Backup / Restore</span></span>
<span data-ttu-id="d98ef-1130">Per la funzionalità di backup/ripristino, SAP BR*Tools per Oracle è supportato esattamente come in bare metal e Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1130">For backup / restore functionality, the SAP BR*Tools for Oracle are supported in the same way as on bare metal and Hyper-V.</span></span> <span data-ttu-id="d98ef-1131">Per i backup su disco e per il ripristino da disco, è supportato anche Oracle Recovery Manager (RMAN).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1131">Oracle Recovery Manager (RMAN) is also supported for backups to disk and restore from disk.</span></span>

#### <a name="high-availability"></a><span data-ttu-id="d98ef-1132">Disponibilità elevata</span><span class="sxs-lookup"><span data-stu-id="d98ef-1132">High Availability</span></span>
<span data-ttu-id="d98ef-1133">Oracle Data Guard è supportato per motivi di disponibilità elevata e ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1133">Oracle Data Guard is supported for high availability and disaster recovery purposes.</span></span> <span data-ttu-id="d98ef-1134">I dettagli sono disponibili in [questa][virtual-machines-windows-classic-configure-oracle-data-guard] documentazione.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1134">Details can be found in [this][virtual-machines-windows-classic-configure-oracle-data-guard] documentation.</span></span>

#### <a name="other"></a><span data-ttu-id="d98ef-1135">Altri</span><span class="sxs-lookup"><span data-stu-id="d98ef-1135">Other</span></span>
<span data-ttu-id="d98ef-1136">Tutti gli altri argomenti generali, ad esempio i set di disponibilità di Azure o il monitoraggio SAP, si applicano come descritto nei primi tre capitoli di questo documento anche per le distribuzioni di VM con Oracle Database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1136">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with the Oracle Database as well.</span></span>

## <a name="specifics-for-the-sap-maxdb-database-on-windows"></a><span data-ttu-id="d98ef-1137">Specifiche per il database SAP MaxDB in Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-1137">Specifics for the SAP MaxDB Database on Windows</span></span>
### <a name="sap-maxdb-version-support"></a><span data-ttu-id="d98ef-1138">Supporto della versione di SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="d98ef-1138">SAP MaxDB Version Support</span></span>
<span data-ttu-id="d98ef-1139">SAP supporta attualmente SAP MaxDB versione 7.9 per l'uso con prodotti basati su SAP NetWeaver in Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1139">SAP currently supports SAP MaxDB version 7.9 for use with SAP NetWeaver-based products in Azure.</span></span> <span data-ttu-id="d98ef-1140">Tutti gli aggiornamenti per il server SAP MaxDB o per i driver ODBC e JDBC da usare con i prodotti basati su SAP NetWeaver vengono forniti esclusivamente in SAP Service Marketplace su <https://support.sap.com/swdc>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1140">All updates for SAP MaxDB server, or JDBC and ODBC drivers to be used with SAP NetWeaver-based products are provided solely through the SAP Service Marketplace at <https://support.sap.com/swdc>.</span></span>
<span data-ttu-id="d98ef-1141">Per informazioni generali sull'esecuzione di SAP NetWeaver in SAP MaxDB, vedere <https://www.sap.com/community/topic/maxdb.html>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1141">General information on running SAP NetWeaver on SAP MaxDB can be found at <https://www.sap.com/community/topic/maxdb.html>.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-maxdb-dbms"></a><span data-ttu-id="d98ef-1142">Versioni di Microsoft Windows e tipi di VM di Azure supportati per SAP MaxDB DBMS</span><span class="sxs-lookup"><span data-stu-id="d98ef-1142">Supported Microsoft Windows Versions and Azure VM types for SAP MaxDB DBMS</span></span>
<span data-ttu-id="d98ef-1143">Per trovare la versione supportata di Microsoft Windows per SAP MaxDB DBMS in Azure, vedere:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1143">To find the supported Microsoft Windows version for SAP MaxDB DBMS on Azure, see:</span></span>

* <span data-ttu-id="d98ef-1144">[Product Availability Matrix (PAM) SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1144">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="d98ef-1145">Nota SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1145">SAP Note [1928533]</span></span>

<span data-ttu-id="d98ef-1146">È consigliabile usare le versione più recente del sistema operativo Microsoft Windows, ovvero Microsoft Windows 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1146">It is highly recommended to use the newest version of the operating system Microsoft Windows, which is Microsoft Windows 2012 R2.</span></span>

### <a name="available-sap-maxdb-documentation"></a><span data-ttu-id="d98ef-1147">Documentazione disponibile su SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="d98ef-1147">Available SAP MaxDB Documentation</span></span>
<span data-ttu-id="d98ef-1148">È possibile trovare l'elenco aggiornato della documentazione su SAP MaxDB nella nota SAP [767598]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1148">You can find the updated list of SAP MaxDB documentation in the following SAP Note [767598]</span></span>

### <a name="sap-maxdb-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="d98ef-1149">Linee guida per la configurazione di SAP MaxDB per le installazioni di SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-1149">SAP MaxDB Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <span data-ttu-id="d98ef-1150"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Configurazione dell'archiviazione</span><span class="sxs-lookup"><span data-stu-id="d98ef-1150"><a name="b48cfe3b-48e9-4f5b-a783-1d29155bd573"></a>Storage configuration</span></span>
<span data-ttu-id="d98ef-1151">Le procedure consigliate di Archiviazione di Azure per SAP MaxDB seguono le raccomandazioni generali riportate nel capitolo [Struttura di una distribuzione RDBMS][dbms-guide-2].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1151">Azure storage best practices for SAP MaxDB follow the general recommendations mentioned in chapter [Structure of an RDBMS Deployment][dbms-guide-2].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d98ef-1152">Come altri database, anche SAP MaxDB include file di dati e di log.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1152">Like other databases, SAP MaxDB also has data and log files.</span></span> <span data-ttu-id="d98ef-1153">Nella terminologia di SAP MaxDB, tuttavia, il termine corretto è "volume" (non "file").</span><span class="sxs-lookup"><span data-stu-id="d98ef-1153">However, in SAP MaxDB terminology the correct term is “volume” (not “file”).</span></span> <span data-ttu-id="d98ef-1154">Esistono, ad esempio, volumi di dati e volumi di log di SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1154">For example, there are SAP MaxDB data volumes and log volumes.</span></span> <span data-ttu-id="d98ef-1155">Non confonderli con i volumi dei dischi del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1155">Do not confuse these with OS disk volumes.</span></span> 
> 
> 

<span data-ttu-id="d98ef-1156">In breve, è necessario:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1156">In short you have to:</span></span>

* <span data-ttu-id="d98ef-1157">Se si usano account di archiviazione di Azure, impostare l'account contenente i volumi (ovvero i file) di dati e di log di SAP MaxDB su **Archiviazione con ridondanza locale**, come specificato nel capitolo [Archiviazione di Microsoft Azure][dbms-guide-2.3].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1157">If you use Azure Storage accounts, set the Azure storage account that holds the SAP MaxDB data and log volumes (i.e. files) to **Local Redundant Storage (LRS)** as specified in chapter [Microsoft Azure Storage][dbms-guide-2.3].</span></span>
* <span data-ttu-id="d98ef-1158">Separare il percorso di I/O per i volumi (ovvero i file) di dati di SAP MaxDB dal percorso di I/O per i volumi (ovvero i file) di log.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1158">Separate the IO path for SAP MaxDB data volumes (i.e. files) from the IO path for log volumes (i.e. files).</span></span> <span data-ttu-id="d98ef-1159">I volumi (ovvero i file) di dati di SAP MaxDB dovranno quindi essere installati in un'unità logica e i volumi (ovvero i file) di log di SAP MaxDB dovranno essere installati in un'altra unità logica.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1159">This means that SAP MaxDB data volumes (i.e. files) have to be installed on one logical drive and SAP MaxDB log volumes (i.e. files) have to be installed on another logical drive.</span></span>
* <span data-ttu-id="d98ef-1160">Impostare il tipo di caching appropriato per ogni disco, a seconda che venga usato per volumi (ovvero file) di dati o di log di SAP MaxDB e che si usi Archiviazione Standard di Azure o Archiviazione Premium di Azure, come descritto nel capitolo [Caching per VM e dischi dati][dbms-guide-2.1].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1160">Set the proper caching type for each disk, depending on whether you use it for SAP MaxDB data or log volumes (i.e. files), and whether you use Azure Standard or Azure Premium Storage, as described in chapter [Caching for VMs and data disks][dbms-guide-2.1].</span></span>
* <span data-ttu-id="d98ef-1161">Se la quota corrente di operazioni di I/O al secondo per ogni disco soddisfa i requisiti, è possibile archiviare tutti i volumi di dati in un singolo disco montato, nonché archiviare tutti i volumi di log di database in un altro singolo disco montato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1161">As long as the current IOPS quota per disk satisfies the requirements, it is possible to store all the data volumes on a single mounted disk, and also store all database log volumes on another single mounted disk.</span></span>
* <span data-ttu-id="d98ef-1162">Se sono necessari un maggior numero di operazioni di I/O al secondo e/o più spazio, è consigliabile usare i pool di archiviazione Microsoft Windows (disponibili solo in Microsoft Windows Server 2012 e versioni successive) o la funzionalità di striping di Microsoft Windows per Microsoft Windows 2008 R2 per creare un solo dispositivo logico di grandi dimensioni su più dischi montati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1162">If more IOPS and/or space are required, it is strongly recommended to use Microsoft Window Storage Pools (only available in Microsoft Windows Server 2012 and higher) or Microsoft Windows striping for Microsoft Windows 2008 R2 to create one large logical device over multiple mounted disks.</span></span> <span data-ttu-id="d98ef-1163">Vedere anche il capitolo [Software RAID][dbms-guide-2.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1163">See also chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> <span data-ttu-id="d98ef-1164">Questo approccio riduce il sovraccarico di amministrazione per la gestione dello spazio su disco ed evita la fatica di distribuire manualmente i file in più dischi montati.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1164">This approach simplifies the administration overhead to manage the disk space and avoids the effort of manually distributing files across multiple mounted disks.</span></span>
* <span data-ttu-id="d98ef-1165">Per requisiti di operazioni di I/O al secondo più elevati, è possibile usare l'Archiviazione Premium di Azure, disponibile nelle VM serie DS e serie GS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1165">For the highest IOPS requirements, you can use Azure Premium Storage, which is available on DS-series and GS-series VMs.</span></span>

![Configurazione di riferimento di una VM IaaS di Azure per SAP MaxDB DBMS][dbms-guide-figure-600]

#### <span data-ttu-id="d98ef-1167"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Backup e ripristino</span><span class="sxs-lookup"><span data-stu-id="d98ef-1167"><a name="23c78d3b-ca5a-4e72-8a24-645d141a3f5d"></a>Backup and Restore</span></span>
<span data-ttu-id="d98ef-1168">Quando si distribuisce SAP MaxDB in Azure, è necessario rivedere la metodologia di backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1168">When deploying SAP MaxDB into Azure, you must review your backup methodology.</span></span> <span data-ttu-id="d98ef-1169">Anche se il sistema non è produttivo, è necessario eseguire periodicamente il backup del database SAP ospitato da SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1169">Even if the system is not a productive system, the SAP database hosted by SAP MaxDB must be backed up periodically.</span></span> <span data-ttu-id="d98ef-1170">Poiché Archiviazione di Azure conserva tre immagini, il backup è ora meno importante dal punto di vista della protezione del sistema da errori di archiviazione e da errori operativi o amministrativi più gravi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1170">Since Azure Storage keeps three images, a backup is now less important in terms of protecting your system against storage failure and more important operational or administrative failures.</span></span> <span data-ttu-id="d98ef-1171">Il motivo principale per avere un piano di backup e ripristino appropriato è quindi la possibilità di risolvere gli errori logici o manuali fornendo funzionalità di ripristino temporizzato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1171">The primary reason for maintaining a proper backup and restore plan is so that you can compensate for logical or manual errors by providing point-in-time recovery capabilities.</span></span> <span data-ttu-id="d98ef-1172">L'obiettivo è quindi quello di usare i backup per ripristinare un determinato stato precedente del database o di usare i backup in Azure per effettuare il seeding di un altro sistema copiando il database esistente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1172">So the goal is to either use backups to restore the database to a certain point in time or to use the backups in Azure to seed another system by copying the existing database.</span></span> <span data-ttu-id="d98ef-1173">È possibile, ad esempio, passare da una configurazione SAP di livello 2 a una configurazione di sistema di livello 3 dello stesso sistema ripristinando un backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1173">For example, you could transfer from a 2-tier SAP configuration to a 3-tier system setup of the same system by restoring a backup.</span></span>

<span data-ttu-id="d98ef-1174">Il backup e il ripristino di un database in Azure funzionano esattamente come nei sistemi locali, quindi è possibile usare gli strumenti di backup/ripristino di SAP MaxDB standard, descritti in uno dei documenti su SAP MaxDB elencati nella nota SAP [767598].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1174">Backing up and restoring a database in Azure works the same way as it does for on-premises systems, so you can use standard SAP MaxDB backup/restore tools, which are described in one of the SAP MaxDB documentation documents listed in SAP Note [767598].</span></span> 

#### <span data-ttu-id="d98ef-1175"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Considerazioni sulle prestazioni per il backup e il ripristino</span><span class="sxs-lookup"><span data-stu-id="d98ef-1175"><a name="77cd2fbb-307e-4cbf-a65f-745553f72d2c"></a>Performance Considerations for Backup and Restore</span></span>
<span data-ttu-id="d98ef-1176">Come nelle distribuzioni bare metal, le prestazioni di backup e ripristino dipendono dalla quantità di volumi leggibili in parallelo e dalla velocità effettiva di tali volumi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1176">As in bare-metal deployments, backup and restore performance is dependent on how many volumes can be read in parallel and the throughput of those volumes.</span></span> <span data-ttu-id="d98ef-1177">Inoltre, l'utilizzo di CPU associato alla compressione del backup può avere un ruolo significativo per VM con un massimo di otto thread CPU.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1177">In addition, the CPU consumption used by backup compression can play a significant role on VMs with up to eight CPU threads.</span></span> <span data-ttu-id="d98ef-1178">Si può quindi presumere quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1178">Therefore, one can assume:</span></span>

* <span data-ttu-id="d98ef-1179">Minore è il numero dei dischi usati per l'archiviazione dei dispositivi del database, più bassa è la velocità effettiva di lettura generale</span><span class="sxs-lookup"><span data-stu-id="d98ef-1179">The fewer the number of disks used to store the database devices, the lower the overall read throughput</span></span>
* <span data-ttu-id="d98ef-1180">Minore è il numero di thread CPU nella VM, più forte è l'impatto della compressione del backup</span><span class="sxs-lookup"><span data-stu-id="d98ef-1180">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="d98ef-1181">Minore è il numero di destinazioni (directory di striping o dischi) in cui scrivere il backup, più bassa è la velocità effettiva</span><span class="sxs-lookup"><span data-stu-id="d98ef-1181">The fewer targets (Stripe Directories, disks) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="d98ef-1182">Per aumentare il numero di destinazioni in cui scrivere, sono disponibili due opzioni che è possibile usare, anche in combinazione, a seconda delle proprie esigenze:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1182">To increase the number of targets to write to, there are two options that you can use, possibly in combination, depending on your needs:</span></span>

* <span data-ttu-id="d98ef-1183">Volumi separati dedicati al backup</span><span class="sxs-lookup"><span data-stu-id="d98ef-1183">Dedicating separate volumes for backup</span></span>
* <span data-ttu-id="d98ef-1184">Striping del volume di destinazione di backup su più dischi montati per migliorare la velocità effettiva delle operazioni di I/O al secondo in tale volume disco con striping</span><span class="sxs-lookup"><span data-stu-id="d98ef-1184">Striping the backup target volume over multiple mounted disks in order to improve the IOPS throughput on that striped disk volume</span></span>
* <span data-ttu-id="d98ef-1185">Dispositivi dischi logici separati dedicati per:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1185">Having separate dedicated logical disk devices for:</span></span>
  * <span data-ttu-id="d98ef-1186">Volumi (ovvero file) di backup di SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="d98ef-1186">SAP MaxDB backup volumes (i.e. files)</span></span>
  * <span data-ttu-id="d98ef-1187">Volumi (ovvero file) di dati di SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="d98ef-1187">SAP MaxDB data volumes (i.e. files)</span></span>
  * <span data-ttu-id="d98ef-1188">Volumi (ovvero file) di log di SAP MaxDB</span><span class="sxs-lookup"><span data-stu-id="d98ef-1188">SAP MaxDB log volumes (i.e. files)</span></span>

<span data-ttu-id="d98ef-1189">Lo striping di un volume su più dischi montati è stato illustrato prima nel capitolo [RAID software][dbms-guide-2.2] di questo documento.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1189">Striping a volume over multiple mounted disks has been discussed earlier in chapter [Software RAID][dbms-guide-2.2] of this document.</span></span> 

#### <span data-ttu-id="d98ef-1190"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Altro</span><span class="sxs-lookup"><span data-stu-id="d98ef-1190"><a name="f77c1436-9ad8-44fb-a331-8671342de818"></a>Other</span></span>
<span data-ttu-id="d98ef-1191">Tutti gli altri argomenti generali, ad esempio i set di disponibilità di Azure o il monitoraggio SAP, si applicano come descritto nei primi tre capitoli di questo documento anche per le distribuzioni di VM con il database SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1191">All other general topics such as Azure Availability Sets or SAP monitoring also apply as described in the first three chapters of this document for deployments of VMs with the SAP MaxDB database.</span></span>
<span data-ttu-id="d98ef-1192">Altre impostazioni specifiche di SAP MaxDB sono trasparenti per le VM di Azure e vengono descritte in documenti diversi elencati nella nota SAP [767598] e in queste note SAP:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1192">Other SAP MaxDB-specific settings are transparent to Azure VMs and are described in different documents listed in SAP Note [767598] and in these SAP notes:</span></span>

* <span data-ttu-id="d98ef-1193">[826037]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1193">[826037]</span></span> 
* <span data-ttu-id="d98ef-1194">[1139904]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1194">[1139904]</span></span>
* <span data-ttu-id="d98ef-1195">[1173395]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1195">[1173395]</span></span>

## <a name="specifics-for-sap-livecache-on-windows"></a><span data-ttu-id="d98ef-1196">Specifiche per SAP liveCache in Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-1196">Specifics for SAP liveCache on Windows</span></span>
### <a name="sap-livecache-version-support"></a><span data-ttu-id="d98ef-1197">Supporto della versione di SAP liveCache</span><span class="sxs-lookup"><span data-stu-id="d98ef-1197">SAP liveCache Version Support</span></span>
<span data-ttu-id="d98ef-1198">La versione minima di SAP liveCache supportata nelle macchine virtuali di Azure è **SAP LC/LCAPPS 10.0 SP 25**, incluse **liveCache 7.9.08.31** e **LCA-Build 25**, rilasciate per **EhP 2 for SAP SCM 7.0** e versioni successive.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1198">Minimal version of SAP liveCache supported in Azure Virtual Machines is **SAP LC/LCAPPS 10.0 SP 25** including **liveCache 7.9.08.31** and **LCA-Build 25**, released for **EhP 2 for SAP SCM 7.0** and higher.</span></span>

### <a name="supported-microsoft-windows-versions-and-azure-vm-types-for-sap-livecache-dbms"></a><span data-ttu-id="d98ef-1199">Versioni di Microsoft Windows e tipi di VM di Azure supportati per SAP liveCache DBMS</span><span class="sxs-lookup"><span data-stu-id="d98ef-1199">Supported Microsoft Windows Versions and Azure VM types for SAP liveCache DBMS</span></span>
<span data-ttu-id="d98ef-1200">Per trovare la versione supportata di Microsoft Windows per SAP liveCache in Azure, vedere:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1200">To find the supported Microsoft Windows version for SAP liveCache on Azure, see:</span></span>

* <span data-ttu-id="d98ef-1201">[Product Availability Matrix (PAM) SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1201">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="d98ef-1202">Nota SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1202">SAP Note [1928533]</span></span>

<span data-ttu-id="d98ef-1203">È consigliabile usare le versione più recente del sistema operativo Microsoft Windows Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1203">It is highly recommended to use the newest version of the operating system Microsoft Windows Server.</span></span> 

### <a name="sap-livecache-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="d98ef-1204">Linee guida per la configurazione di SAP liveCache per le installazioni di SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-1204">SAP liveCache Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="recommended-azure-vm-types"></a><span data-ttu-id="d98ef-1205">Tipi di VM di Azure consigliati</span><span class="sxs-lookup"><span data-stu-id="d98ef-1205">Recommended Azure VM Types</span></span>
<span data-ttu-id="d98ef-1206">Poiché SAP liveCache è un'applicazione che esegue calcoli molto complessi, la quantità e la velocità di RAM e CPU influiscono considerevolmente sulle prestazioni di SAP liveCache.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1206">As SAP liveCache is an application that performs huge calculations, the amount and speed of RAM and CPU has a major influence on SAP liveCache performance.</span></span> 

<span data-ttu-id="d98ef-1207">Per i tipi di VM di Azure supportati da SAP (nota SAP [1928533]), tutte le risorse della CPU virtuale allocate alla VM sono supportate da risorse della CPU fisica dedicate dell'hypervisor.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1207">For the Azure VM types supported by SAP (SAP Note [1928533]), all virtual CPU resources allocated to the VM are backed by dedicated physical CPU resources of the hypervisor.</span></span> <span data-ttu-id="d98ef-1208">Non si verifica nessun provisioning eccessivo (e quindi nessuna competizione per le risorse della CPU).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1208">No overprovisioning (and therefore no competition for CPU resources) takes place.</span></span>

<span data-ttu-id="d98ef-1209">Analogamente, per tutti i tipi di istanza di VM di Azure supportati da SAP, la memoria della VM viene interamente mappata alla memoria fisica. Non viene usato, ad esempio, l'overprovisioning (overcommit).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1209">Similarly, for all Azure VM instance types supported by SAP, the VM memory is 100% mapped to the physical memory – overprovisioning (over-commitment), for example, is not used.</span></span>

<span data-ttu-id="d98ef-1210">Da questo punto di vista, è consigliabile usare il nuovo tipo di VM serie D o serie DS (in combinazione con Archiviazione Premium di Azure), perché i processori sono del 60% più veloci rispetto a quelli della serie A.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1210">From this perspective, it is highly recommended to use the new D- series or DS-series (in combination with Azure Premium Storage) Azure VM type, as they have 60% faster processors than the A-series.</span></span> <span data-ttu-id="d98ef-1211">Per carichi di RAM e CPU più elevati, è possibile usare VM serie G e serie GS (in combinazione con l'Archiviazione Premium di Azure) con la famiglia di processori E5 v3 di Intel® Xeon® più recente, con il doppio della memoria e archiviazione con unità SSD quattro volte superiore rispetto alla serie D/DS.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1211">For the highest RAM and CPU load, you can use G-series and GS-series (in combination with Azure Premium Storage) VMs with the latest Intel® Xeon® processor E5 v3 family, which have twice the memory and four times the solid state drive storage (SSDs) of the D/DS-series.</span></span>

#### <a name="storage-configuration"></a><span data-ttu-id="d98ef-1212">Configurazione dell'archiviazione</span><span class="sxs-lookup"><span data-stu-id="d98ef-1212">Storage Configuration</span></span>
<span data-ttu-id="d98ef-1213">Poiché SAP liveCache si basa sulla tecnologia SAP MaxDB, tutte le procedure consigliate per Archiviazione di Azure indicati per SAP MaxDB nel capitolo [Storage configuration][dbms-guide-8.4.1] (Configurazione di archiviazione) sono valide anche per SAP liveCache.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1213">As SAP liveCache is based on SAP MaxDB technology, all the Azure storage best practice recommendations mentioned for SAP MaxDB in chapter [Storage configuration][dbms-guide-8.4.1] are also valid for SAP liveCache.</span></span> 

#### <a name="dedicated-azure-vm-for-livecache"></a><span data-ttu-id="d98ef-1214">VM di Azure dedicata per liveCache</span><span class="sxs-lookup"><span data-stu-id="d98ef-1214">Dedicated Azure VM for liveCache</span></span>
<span data-ttu-id="d98ef-1215">Poiché SAP liveCache usa in modo intensivo la potenza di elaborazione, per l'utilizzo produttivo è consigliabile la distribuzione in una macchina virtuale di Azure dedicata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1215">As SAP liveCache intensively uses computational power, for productive usage it is highly recommended to deploy on a dedicated Azure Virtual Machine.</span></span> 

![VM di Azure dedicata per liveCache per un caso d'uso produttivo][dbms-guide-figure-700]

#### <a name="backup-and-restore"></a><span data-ttu-id="d98ef-1217">Backup e ripristino</span><span class="sxs-lookup"><span data-stu-id="d98ef-1217">Backup and Restore</span></span>
<span data-ttu-id="d98ef-1218">Il backup e il ripristino, incluse le considerazioni sulle prestazioni, sono già stati illustrati nei capitoli pertinenti a SAP MaxDB, [Backup and Restore][dbms-guide-8.4.2] (Backup e ripristino) e [Performance Considerations for Backup and Restore][dbms-guide-8.4.3] (Considerazioni sulle prestazioni per backup e ripristino).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1218">Backup and restore, including performance considerations, are already described in the relevant SAP MaxDB chapters [Backup and Restore][dbms-guide-8.4.2] and [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span> 

#### <a name="other"></a><span data-ttu-id="d98ef-1219">Altri</span><span class="sxs-lookup"><span data-stu-id="d98ef-1219">Other</span></span>
<span data-ttu-id="d98ef-1220">Tutti gli altri argomenti generali sono già illustrati in [questo][dbms-guide-8.4.4] capitolo su SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1220">All other general topics are already described in the relevant SAP MaxDB [this][dbms-guide-8.4.4] chapter.</span></span> 

## <a name="specifics-for-the-sap-content-server-on-windows"></a><span data-ttu-id="d98ef-1221">Specifiche per SAP Content Server in Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-1221">Specifics for the SAP Content Server on Windows</span></span>
<span data-ttu-id="d98ef-1222">SAP Content Server è un componente separato basato su server per archiviare contenuto, ad esempio documenti elettronici in formati diversi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1222">The SAP Content Server is a separate, server-based component to store content such as electronic documents in different formats.</span></span> <span data-ttu-id="d98ef-1223">SAP Content Server è supportato dallo sviluppo della tecnologia e deve essere usato tra applicazioni per qualsiasi applicazione SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1223">The SAP Content Server is provided by development of technology and is to be used cross-application for any SAP applications.</span></span> <span data-ttu-id="d98ef-1224">Viene installato in un sistema distinto.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1224">It is installed on a separate system.</span></span> <span data-ttu-id="d98ef-1225">Il contenuto in genere è costituito da documentazione e materiale di formazione di Knowledge Warehouse o da disegni tecnici provenienti da mySAP PLM Document Management System.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1225">Typical content is training material and documentation from Knowledge Warehouse or technical drawings originating from the mySAP PLM Document Management System.</span></span> 

### <a name="sap-content-server-version-support"></a><span data-ttu-id="d98ef-1226">Supporto della versione di SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-1226">SAP Content Server Version Support</span></span>
<span data-ttu-id="d98ef-1227">SAP attualmente supporta:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1227">SAP currently supports:</span></span>

* <span data-ttu-id="d98ef-1228">**SAP Content Server** con la versione **6.50 (e successive)**</span><span class="sxs-lookup"><span data-stu-id="d98ef-1228">**SAP Content Server** with version **6.50 (and higher)**</span></span>
* <span data-ttu-id="d98ef-1229">**SAP MaxDB versione 7.9**</span><span class="sxs-lookup"><span data-stu-id="d98ef-1229">**SAP MaxDB version 7.9**</span></span>
* <span data-ttu-id="d98ef-1230">**Microsoft IIS (Internet Information Server) versione 8.0 (e successive)**</span><span class="sxs-lookup"><span data-stu-id="d98ef-1230">**Microsoft IIS (Internet Information Server) version 8.0 (and higher)**</span></span>

<span data-ttu-id="d98ef-1231">È consigliabile usare la versione più recente di SAP Content Server, che al momento della stesura di questo documento è la **6.50 SP4**, e la versione più recente di **Microsoft IIS 8.5**.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1231">It is highly recommended to use the newest version of SAP Content Server, which at the time of writing this document is **6.50 SP4**, and the newest version of **Microsoft IIS 8.5**.</span></span> 

<span data-ttu-id="d98ef-1232">Controllare le versioni supportate più recenti di SAP Content Server e Microsoft IIS in [Product Availability Matrix (PAM) SAP][sap-pam].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1232">Check the latest supported versions of SAP Content Server and Microsoft IIS in the [SAP Product Availability Matrix (PAM)][sap-pam].</span></span>

### <a name="supported-microsoft-windows-and-azure-vm-types-for-sap-content-server"></a><span data-ttu-id="d98ef-1233">Tipi di VM di Azure e di Microsoft Windows supportati per SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-1233">Supported Microsoft Windows and Azure VM types for SAP Content Server</span></span>
<span data-ttu-id="d98ef-1234">Per trovare le versioni di Windows supportate per SAP Content Server in Azure, vedere:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1234">To find out supported Windows version for SAP Content Server on Azure, see:</span></span>

* <span data-ttu-id="d98ef-1235">[Product Availability Matrix (PAM) SAP][sap-pam]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1235">[SAP Product Availability Matrix (PAM)][sap-pam]</span></span>
* <span data-ttu-id="d98ef-1236">Nota SAP [1928533]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1236">SAP Note [1928533]</span></span>

<span data-ttu-id="d98ef-1237">È consigliabile usare le versione più recente di Microsoft Windows Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1237">It is highly recommended to use the newest version of Microsoft Windows Server.</span></span>

### <a name="sap-content-server-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="d98ef-1238">Linee guida per la configurazione di SAP Content Server per le installazioni di SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-1238">SAP Content Server Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="d98ef-1239">Configurazione dell'archiviazione</span><span class="sxs-lookup"><span data-stu-id="d98ef-1239">Storage Configuration</span></span>
<span data-ttu-id="d98ef-1240">Se si configura SAP Content Server per archiviare i file nel database SAP MaxDB, tutte le procedure consigliate per Archiviazione di Azure indicati per SAP MaxDB nel capitolo [Storage Configuration][dbms-guide-8.4.1] (Configurazione dell'archiviazione) sono validi anche per lo scenario di SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1240">If you configure SAP Content Server to store files in the SAP MaxDB database, all Azure storage best practices recommendation mentioned for SAP MaxDB in chapter [Storage Configuration][dbms-guide-8.4.1] are also valid for the SAP Content Server scenario.</span></span> 

<span data-ttu-id="d98ef-1241">Se si configura SAP Content Server per archiviare i file nel file system, è consigliabile usare un'unità logica dedicata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1241">If you configure SAP Content Server to store files in the file system, it is recommended to use a dedicated logical drive.</span></span> <span data-ttu-id="d98ef-1242">L'uso di Spazi di archiviazione Windows consente anche di aumentare le dimensioni del disco logico e la velocità effettiva delle operazioni di I/O al secondo, come descritto nel capitolo [RAID software][dbms-guide-2.2].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1242">Using Windows Storage Spaces enables you to also increase logical disk size and IOPS throughput, as described in chapter [Software RAID][dbms-guide-2.2].</span></span> 

#### <a name="sap-content-server-location"></a><span data-ttu-id="d98ef-1243">Posizione di SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-1243">SAP Content Server Location</span></span>
<span data-ttu-id="d98ef-1244">SAP Content Server deve essere distribuito nella stessa area di Azure e nella stessa rete virtuale di Azure in cui è stato distribuito il sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1244">SAP Content Server has to be deployed in the same Azure region and Azure VNET where the SAP system is deployed.</span></span> <span data-ttu-id="d98ef-1245">È possibile scegliere se distribuire i componenti di SAP Content Server in una VM di Azure dedicata o nella stessa VM in cui è in esecuzione il sistema SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1245">You are free to decide whether you want to deploy SAP Content Server components on a dedicated Azure VM or on the same VM where the SAP system is running.</span></span> 

![VM di Azure dedicata per SAP Content Server][dbms-guide-figure-800]

#### <a name="sap-cache-server-location"></a><span data-ttu-id="d98ef-1247">Posizione di SAP Cache Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-1247">SAP Cache Server Location</span></span>
<span data-ttu-id="d98ef-1248">SAP Cache Server è un componente aggiuntivo basato su server che fornisce accesso in locale ai documenti (memorizzati nella cache).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1248">The SAP Cache Server is an additional server-based component to provide access to (cached) documents locally.</span></span> <span data-ttu-id="d98ef-1249">SAP Cache Server memorizza nella cache i documenti di un'istanza di SAP Content Server</span><span class="sxs-lookup"><span data-stu-id="d98ef-1249">The SAP Cache Server caches the documents of an SAP Content Server.</span></span> <span data-ttu-id="d98ef-1250">per poter ottimizzare il traffico di rete se i documenti devono essere recuperati più di una volta da posizioni diverse.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1250">This is to optimize network traffic if documents have to be retrieved more than once from different locations.</span></span> <span data-ttu-id="d98ef-1251">La regola generale prevede che SAP Cache Server deve essere fisicamente vicino al client che accede a SAP Cache Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1251">The general rule is that the SAP Cache Server has to be physically close to the client that accesses the SAP Cache Server.</span></span> 

<span data-ttu-id="d98ef-1252">Sono disponibili due opzioni:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1252">Here you have two options:</span></span>

1. <span data-ttu-id="d98ef-1253">**Il client è un sistema SAP back-end** Se un sistema SAP back-end viene configurato per accedere a SAP Content Server, tale sistema SAP è un client.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1253">**Client is a backend SAP system** If a backend SAP system is configured to access SAP Content Server, that SAP system is a client.</span></span> <span data-ttu-id="d98ef-1254">Poiché sia il sistema SAP che SAP Content Server vengono distribuiti nella stessa area di Azure, ovvero nello stesso data center di Azure, sono fisicamente vicini.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1254">As both SAP system and SAP Content Server are deployed in the same Azure region – in the same Azure datacenter – they are physically close to each other.</span></span> <span data-ttu-id="d98ef-1255">Non è quindi necessaria un'istanza di SAP Cache Server dedicata.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1255">Therefore, there is no need to have a dedicated SAP Cache Server.</span></span> <span data-ttu-id="d98ef-1256">I client dell'interfaccia utente SAP (GUI SAP o Web browser) accedono direttamente al sistema SAP e il sistema SAP recupera i documenti da SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1256">SAP UI clients (SAP GUI or web browser) access the SAP system directly, and the SAP system retrieves documents from the SAP Content Server.</span></span>
2. <span data-ttu-id="d98ef-1257">**Il client è un Web browser locale** SAP Content Server può essere configurato per essere accessibile direttamente dal Web browser.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1257">**Client is an on-premises web browser** The SAP Content Server can be configured to be accessed directly by the web browser.</span></span> <span data-ttu-id="d98ef-1258">In questo caso, un Web browser in esecuzione in locale è un client di SAP Content Server.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1258">In this case, a web browser running on–premises is a client of the SAP Content Server.</span></span> <span data-ttu-id="d98ef-1259">Il data center locale e il data center di Azure vengono posti in posizioni fisiche diverse, idealmente vicini l'uno all'altro.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1259">On-premises datacenter and Azure datacenter are placed in different physical locations (ideally close to each other).</span></span> <span data-ttu-id="d98ef-1260">Il data center locale viene connesso ad Azure con una VPN da sito a sito di Azure o con ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1260">Your on-premises datacenter is connected to Azure via Azure Site-to-Site VPN or ExpressRoute.</span></span> <span data-ttu-id="d98ef-1261">Anche se entrambe le opzioni offrono una connessione di rete VPN sicura, la connessione di rete da sito a sito non offre un contratto di servizio per la latenza e la larghezza di banda di rete tra il data center locale e il data center di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1261">Although both options offer secure VPN network connection to Azure, site-to-site network connection does not offer a network bandwidth and latency SLA between the on-premises datacenter and the Azure datacenter.</span></span> <span data-ttu-id="d98ef-1262">Per velocizzare l'accesso ai documenti, è possibile eseguire una di queste operazioni:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1262">To speed up access to documents, you can do one of the following:</span></span>
   1. <span data-ttu-id="d98ef-1263">Installare SAP Cache Server localmente, vicino al Web browser locale, come illustrato in [questa][dbms-guide-900-sap-cache-server-on-premises] figura</span><span class="sxs-lookup"><span data-stu-id="d98ef-1263">Install SAP Cache Server on-premises, close to the on-premises web browser (option on [this][dbms-guide-900-sap-cache-server-on-premises] Figure)</span></span>
   2. <span data-ttu-id="d98ef-1264">Configurare Azure ExpressRoute, che offre una connessione di rete dedicata a velocità elevata e a bassa latenza tra il data center locale e il data center di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1264">Configure Azure ExpressRoute, which offers a high-speed and low-latency dedicated network connection between on-premises datacenter and Azure datacenter.</span></span>

<span data-ttu-id="d98ef-1265">![Possibilità di installare SAP Cache Server in locale][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span><span class="sxs-lookup"><span data-stu-id="d98ef-1265">![Option to install SAP Cache Server on-premises][dbms-guide-figure-900]
<a name="642f746c-e4d4-489d-bf63-73e80177a0a8"></a></span></span>

#### <a name="backup--restore"></a><span data-ttu-id="d98ef-1266">Backup/Ripristino</span><span class="sxs-lookup"><span data-stu-id="d98ef-1266">Backup / Restore</span></span>
<span data-ttu-id="d98ef-1267">Se si configura SAP Content Server per archiviare i file nel database SAP MaxDB, la procedura di backup/ripristino e le considerazioni sulle prestazioni sono già state illustrate nei capitoli [Backup and Restore][dbms-guide-8.4.2] (Backpup e ripristino) e nel capitolo [Performance Considerations for Backup and Restore][dbms-guide-8.4.3] (Considerazioni sulle prestazioni per backup e ripristino) di SAP MaxDB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1267">If you configure the SAP Content Server to store files in the SAP MaxDB database, the backup/restore procedure and performance considerations are already described in SAP MaxDB chapter [Backup and Restore][dbms-guide-8.4.2] and chapter [Performance Considerations for Backup and Restore][dbms-guide-8.4.3].</span></span> 

<span data-ttu-id="d98ef-1268">Se si configura SAP Content Server per archiviare i file nel file system, una possibilità consiste nell'eseguire il backup/ripristino manuale dell'intera struttura di file in cui si trovano i documenti.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1268">If you configure the SAP Content Server to store files in the file system, one option is to execute manual backup/restore of the whole file structure where the documents are located.</span></span> <span data-ttu-id="d98ef-1269">Come per il backup/ripristino di SAP MaxDB, è consigliabile avere un volume del disco dedicato per il backup.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1269">Similar to SAP MaxDB backup/restore, it is recommended to have a dedicated disk volume for backup purpose.</span></span> 

#### <a name="other"></a><span data-ttu-id="d98ef-1270">Altri</span><span class="sxs-lookup"><span data-stu-id="d98ef-1270">Other</span></span>
<span data-ttu-id="d98ef-1271">Le altre impostazioni specifiche di SAP Content Server sono trasparenti per le VM di Azure e sono descritte in diversi documenti e note SAP:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1271">Other SAP Content Server specific settings are transparent to Azure VMs and are described in various documents and SAP Notes:</span></span>

* <span data-ttu-id="d98ef-1272"><https://service.sap.com/contentserver></span><span class="sxs-lookup"><span data-stu-id="d98ef-1272"><https://service.sap.com/contentserver></span></span> 
* <span data-ttu-id="d98ef-1273">Nota SAP [1619726]</span><span class="sxs-lookup"><span data-stu-id="d98ef-1273">SAP Note [1619726]</span></span>  

## <a name="specifics-to-ibm-db2-for-luw-on-windows"></a><span data-ttu-id="d98ef-1274">Specifiche per IBM DB2 per LUW in Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-1274">Specifics to IBM DB2 for LUW on Windows</span></span>
<span data-ttu-id="d98ef-1275">Con Microsoft Azure, è possibile eseguire facilmente la migrazione dell'applicazione SAP esistente in esecuzione in IBM DB2 per Linux, UNIX e Windows (LUW) alle macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1275">With Microsoft Azure, you can easily migrate your existing SAP application running on IBM DB2 for Linux, UNIX, and Windows (LUW) to Azure virtual machines.</span></span> <span data-ttu-id="d98ef-1276">Con SAP in IBM DB2 per LUW, gli amministratori e gli sviluppatori possono continuare a usare gli stessi strumenti di sviluppo e amministrazione disponibili in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1276">With SAP on IBM DB2 for LUW, administrators and developers can still use the same development and administration tools, which are available on-premises.</span></span>
<span data-ttu-id="d98ef-1277">Informazioni generali sull'esecuzione di SAP Business Suite in IBM DB2 per LUW sono disponibili in SAP Community Network (SCN) all'indirizzo <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1277">General information about running SAP Business Suite on IBM DB2 for LUW can be found in the SAP Community Network (SCN) at <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span></span>

<span data-ttu-id="d98ef-1278">Per altre informazioni e aggiornamenti su SAP in DB2 per LUW in Azure, vedere la nota SAP [2233094].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1278">For additional information and updates about SAP on DB2 for LUW on Azure, see SAP Note [2233094].</span></span> 

### <a name="ibm-db2-for-linux-unix-and-windows-version-support"></a><span data-ttu-id="d98ef-1279">Supporto della versione di IBM DB2 per Linux, UNIX e Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-1279">IBM DB2 for Linux, UNIX, and Windows Version Support</span></span>
<span data-ttu-id="d98ef-1280">SAP in IBM DB2 per LUW nei servizi Macchine virtuali di Microsoft Azure è supportato a partire da DB2 versione 10.5.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1280">SAP on IBM DB2 for LUW on Microsoft Azure Virtual Machine Services is supported as of DB2 version 10.5.</span></span>

<span data-ttu-id="d98ef-1281">Per informazioni sui prodotti SAP e sui tipi di VM di Azure supportati, vedere la nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1281">For information about supported SAP products and Azure VM types, refer to SAP Note [1928533].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="d98ef-1282">Linee guida per la configurazione di IBM DB2 per Linux, UNIX e Windows per le installazioni di SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-1282">IBM DB2 for Linux, UNIX, and Windows Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="d98ef-1283">Configurazione dell'archiviazione</span><span class="sxs-lookup"><span data-stu-id="d98ef-1283">Storage Configuration</span></span>
<span data-ttu-id="d98ef-1284">Tutti i file di database devono essere archiviati nel file system NTFS basato su dischi collegati direttamente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1284">All database files must be stored on the NTFS file system based on directly attached disks.</span></span> <span data-ttu-id="d98ef-1285">I dischi vengono montati nella VM di Azure e sono basati sull'archivio BLOB di pagine di Azure (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) o su Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1285">These disks are mounted to the Azure VM and are based in Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="d98ef-1286">Le unità di rete o le condivisioni remote di qualsiasi tipologia, ad esempio i servizi file di Azure seguenti, **NON** sono supportati per i file di database:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1286">Any kind of network drives or remote shares like the following Azure file services are **NOT** supported for database files:</span></span> 

* <span data-ttu-id="d98ef-1287"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-1287"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="d98ef-1288"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-1288"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="d98ef-1289">Se si usano dischi rigidi basati sull'archivio BLOB di pagine di Azure o su Managed Disks, le istruzioni riportate nel capitolo [Struttura di una distribuzione RDBMS][dbms-guide-2] di questo documento si applicano anche alle distribuzioni con il database IBM DB2 per LUW.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1289">If you are using disks based on Azure Page BLOB Storage or Managed Disks, the statements made in this document in chapter [Structure of an RDBMS Deployment][dbms-guide-2] also apply to deployments with the IBM DB2 for LUW Database.</span></span> 

<span data-ttu-id="d98ef-1290">Come spiegato in precedenza nella parte generale del documento, esistono quote relative alla velocità effettiva delle operazioni di I/O al secondo per i dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1290">As explained earlier in the general part of the document, quotas on IOPS throughput for disks exist.</span></span> <span data-ttu-id="d98ef-1291">Le quote esatte dipendono dal tipo di VM usato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1291">The exact quotas depend on the VM type used.</span></span> <span data-ttu-id="d98ef-1292">Un elenco dei tipi di VM con le rispettive quote è disponibile [qui (per Linux)][virtual-machines-sizes-linux] e [qui (per Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1292">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="d98ef-1293">Se la quota corrente di operazioni di I/O al secondo per ogni disco è sufficiente, è possibile archiviare tutti i file di database in un singolo disco montato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1293">As long as the current IOPS quota per disk is sufficient, it is possible to store all the database files on one single mounted disk.</span></span> 

<span data-ttu-id="d98ef-1294">Per le considerazioni sulle prestazioni, vedere anche il capitolo relativo alle considerazioni sulle prestazioni e la sicurezza dei dati per le directory di database nelle guide di installazione di SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1294">For performance considerations also refer to chapter “Data Safety and Performance Considerations for Database Directories” in SAP installation guides.</span></span>

<span data-ttu-id="d98ef-1295">In alternativa, è possibile usare i pool di archiviazione Windows (disponibili solo in Windows Server 2012 e versioni successive) o la funzionalità di striping Windows per Windows 2008 R2, come descritto nel capitolo [RAID software][dbms-guide-2.2] di questo documento, per creare un solo dispositivo logico di grandi dimensioni su più dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1295">Alternatively, you can use Windows Storage Pools (only available in Windows Server 2012 and higher) or Windows striping for Windows 2008 R2 as described in chapter [Software RAID][dbms-guide-2.2] of this document to create one large logical device over multiple disks.</span></span>
<span data-ttu-id="d98ef-1296">Per i dischi contenenti i percorsi di archiviazione DB2 per le directory sapdata e saptmp, è necessario specificare una dimensione del settore del disco pari a 512 KB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1296">For the disks containing the DB2 storage paths for your sapdata and saptmp directories, you must specify a physical disk sector size of 512 KB.</span></span> <span data-ttu-id="d98ef-1297">Quando si usano i pool di archiviazione di Windows, è necessario creare manualmente i pool di archiviazione con l'interfaccia della riga di comando usando il parametro "-LogicalSectorSizeDefault".</span><span class="sxs-lookup"><span data-stu-id="d98ef-1297">When using Windows Storage Pools, you must create the storage pools  manually via command line interface using the parameter „-LogicalSectorSizeDefault“.</span></span> <span data-ttu-id="d98ef-1298">Per altre informazioni, vedere <https://technet.microsoft.com/itpro/powershell/windows/storage/new-storagepool>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1298">For more information, see <https://technet.microsoft.com/itpro/powershell/windows/storage/new-storagepool>.</span></span>

#### <a name="backuprestore"></a><span data-ttu-id="d98ef-1299">Backup/Ripristino</span><span class="sxs-lookup"><span data-stu-id="d98ef-1299">Backup/Restore</span></span>
<span data-ttu-id="d98ef-1300">La funzionalità di backup/ripristino per IBM DB2 per LUW è supportata esattamente come nei sistemi operativi Windows Server standard e in Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1300">The backup/restore functionality for IBM DB2 for LUW is supported in the same way as on standard Windows Server Operating Systems and Hyper-V.</span></span>

<span data-ttu-id="d98ef-1301">È necessario verificare di avere adottato una valida strategia di backup di database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1301">You must make sure that you have a valid database backup strategy in place.</span></span> 

<span data-ttu-id="d98ef-1302">Come nelle distribuzioni bare metal, le prestazioni di backup/ripristino dipendono dalla quantità di volumi leggibili in parallelo e dalla velocità effettiva di tali volumi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1302">As in bare-metal deployments, backup/restore performance depends on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="d98ef-1303">Inoltre, l'utilizzo di CPU associato alla compressione del backup può avere un ruolo significativo per VM con un massimo di soli otto thread CPU.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1303">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="d98ef-1304">Si può quindi presumere quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1304">Therefore, one can assume:</span></span>

* <span data-ttu-id="d98ef-1305">Minore è il numero dei dischi usati per l'archiviazione dei dispositivi del database, più bassa è la velocità effettiva generale nella lettura</span><span class="sxs-lookup"><span data-stu-id="d98ef-1305">The fewer the number of disks used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="d98ef-1306">Minore è il numero di thread CPU nella VM, più forte è l'impatto della compressione del backup</span><span class="sxs-lookup"><span data-stu-id="d98ef-1306">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="d98ef-1307">Minore è il numero di destinazioni (directory di striping o dischi) in cui scrivere il backup, più bassa è la velocità effettiva</span><span class="sxs-lookup"><span data-stu-id="d98ef-1307">The fewer targets (Stripe Directories, disks) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="d98ef-1308">Per aumentare il numero di destinazioni in cui scrivere, è possibile usare/combinare due opzioni a seconda delle proprie esigenze:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1308">To increase the number of targets to write to, two options can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="d98ef-1309">Striping del volume di destinazione di backup su più dischi per migliorare la velocità effettiva delle operazioni di I/O al secondo in tale volume con striping</span><span class="sxs-lookup"><span data-stu-id="d98ef-1309">Striping the backup target volume over multiple disks in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="d98ef-1310">Uso di più di una directory di destinazione in cui scrivere il backup</span><span class="sxs-lookup"><span data-stu-id="d98ef-1310">Using more than one target directory to write the backup to</span></span>

#### <a name="high-availability-and-disaster-recovery"></a><span data-ttu-id="d98ef-1311">Disponibilità elevata e ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="d98ef-1311">High Availability and Disaster Recovery</span></span>
<span data-ttu-id="d98ef-1312">Il server di cluster Microsoft non è supportato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1312">Microsoft Cluster Server (MSCS) is not supported.</span></span>

<span data-ttu-id="d98ef-1313">Il ripristino di emergenza a disponibilità DB2 è supportato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1313">DB2 high availability disaster recovery (HADR) is supported.</span></span> <span data-ttu-id="d98ef-1314">Se le macchine virtuali della configurazione a disponibilità elevata hanno una risoluzione dei nomi funzionante, la configurazione in Azure non sarà diversa da quelle eseguite in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1314">If the virtual machines of the HA configuration have working name resolution, the setup in Azure does not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="d98ef-1315">Non è consigliabile affidarsi solo alla risoluzione IP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1315">It is not recommended to rely on IP resolution only.</span></span>

<span data-ttu-id="d98ef-1316">Non usare la replica geografica per gli account di archiviazione in cui vengono archiviati i dischi di database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1316">Do not use Geo-Replication for the storage accounts that store the database disks.</span></span> <span data-ttu-id="d98ef-1317">Per altre informazioni, vedere i capitoli [Archiviazione di Microsoft Azure][dbms-guide-2.3] e [Disponibilità elevata e ripristino di emergenza con VM di Azure][dbms-guide-3].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1317">For more information, refer to chapter [Microsoft Azure Storage][dbms-guide-2.3] and chapter [High Availability and Disaster Recovery with Azure VMs][dbms-guide-3].</span></span>

#### <a name="other"></a><span data-ttu-id="d98ef-1318">Altri</span><span class="sxs-lookup"><span data-stu-id="d98ef-1318">Other</span></span>
<span data-ttu-id="d98ef-1319">Tutti gli altri argomenti generali, ad esempio i set di disponibilità di Azure o il monitoraggio SAP, si applicano come descritto nei primi tre capitoli di questo documento anche per le distribuzioni di VM con IBM DB2 per LUW.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1319">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with IBM DB2 for LUW as well.</span></span> 

<span data-ttu-id="d98ef-1320">Vedere anche [Riepilogo generale su SQL Server per SAP in Azure][dbms-guide-5.8].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1320">Also refer to chapter [General SQL Server for SAP on Azure Summary][dbms-guide-5.8].</span></span>

## <a name="specifics-to-ibm-db2-for-luw-on-linux"></a><span data-ttu-id="d98ef-1321">Specifiche per IBM DB2 per LUW in Linux</span><span class="sxs-lookup"><span data-stu-id="d98ef-1321">Specifics to IBM DB2 for LUW on Linux</span></span>
<span data-ttu-id="d98ef-1322">Con Microsoft Azure, è possibile eseguire facilmente la migrazione dell'applicazione SAP esistente in esecuzione in IBM DB2 per Linux, UNIX e Windows (LUW) alle macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1322">With Microsoft Azure, you can easily migrate your existing SAP application running on IBM DB2 for Linux, UNIX, and Windows (LUW) to Azure virtual machines.</span></span> <span data-ttu-id="d98ef-1323">Con SAP in IBM DB2 per LUW, gli amministratori e gli sviluppatori possono continuare a usare gli stessi strumenti di sviluppo e amministrazione disponibili in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1323">With SAP on IBM DB2 for LUW, administrators and developers can still use the same development and administration tools, which are available on-premises.</span></span> <span data-ttu-id="d98ef-1324">Informazioni generali sull'esecuzione di SAP Business Suite in IBM DB2 per LUW sono disponibili in SAP Community Network (SCN) all'indirizzo <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1324">General information about running SAP Business Suite on IBM DB2 for LUW can be found in the SAP Community Network (SCN) at <https://www.sap.com/community/topic/db2-for-linux-unix-and-windows.html>.</span></span>

<span data-ttu-id="d98ef-1325">Per altre informazioni e aggiornamenti su SAP in DB2 per LUW in Azure, vedere la nota SAP [2233094].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1325">For additional information and updates about SAP on DB2 for LUW on Azure, see SAP Note [2233094].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-version-support"></a><span data-ttu-id="d98ef-1326">Supporto della versione di IBM DB2 per Linux, UNIX e Windows</span><span class="sxs-lookup"><span data-stu-id="d98ef-1326">IBM DB2 for Linux, UNIX, and Windows Version Support</span></span>
<span data-ttu-id="d98ef-1327">SAP in IBM DB2 per LUW nei servizi Macchine virtuali di Microsoft Azure è supportato a partire da DB2 versione 10.5.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1327">SAP on IBM DB2 for LUW on Microsoft Azure Virtual Machine Services is supported as of DB2 version 10.5.</span></span>

<span data-ttu-id="d98ef-1328">Per informazioni sui prodotti SAP e sui tipi di VM di Azure supportati, vedere la nota SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1328">For information about supported SAP products and Azure VM types, refer to SAP Note [1928533].</span></span>

### <a name="ibm-db2-for-linux-unix-and-windows-configuration-guidelines-for-sap-installations-in-azure-vms"></a><span data-ttu-id="d98ef-1329">Linee guida per la configurazione di IBM DB2 per Linux, UNIX e Windows per le installazioni di SAP nelle VM di Azure</span><span class="sxs-lookup"><span data-stu-id="d98ef-1329">IBM DB2 for Linux, UNIX, and Windows Configuration Guidelines for SAP Installations in Azure VMs</span></span>
#### <a name="storage-configuration"></a><span data-ttu-id="d98ef-1330">Configurazione dell'archiviazione</span><span class="sxs-lookup"><span data-stu-id="d98ef-1330">Storage Configuration</span></span>
<span data-ttu-id="d98ef-1331">Tutti i file di database devono essere archiviati in un file system basato su dischi collegati direttamente.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1331">All database files must be stored on a file system based on directly attached disks.</span></span> <span data-ttu-id="d98ef-1332">I dischi vengono montati nella VM di Azure e sono basati sull'archivio BLOB di pagine di Azure (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) o su Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span><span class="sxs-lookup"><span data-stu-id="d98ef-1332">These disks are mounted to the Azure VM and are based in Azure Page BLOB Storage (<https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>) or Managed Disks (<https://docs.microsoft.com/azure/storage/storage-managed-disks-overview>).</span></span> <span data-ttu-id="d98ef-1333">Le unità di rete o le condivisioni remote di qualsiasi tipologia, ad esempio i servizi file di Azure seguenti, **NON** sono supportati per i file di database:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1333">Any kind of network drives or remote shares like the following Azure file services are **NOT** supported for database files:</span></span>

* <span data-ttu-id="d98ef-1334"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-1334"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/12/introducing-microsoft-azure-file-service.aspx></span></span>
* <span data-ttu-id="d98ef-1335"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span><span class="sxs-lookup"><span data-stu-id="d98ef-1335"><https://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/27/persisting-connections-to-microsoft-azure-files.aspx></span></span>

<span data-ttu-id="d98ef-1336">Se si usano dischi rigidi basati sull'archivio BLOB di pagine di Azure, le istruzioni riportate nel capitolo [Struttura di una distribuzione RDBMS][dbms-guide-2] di questo documento si applicano anche alle distribuzioni con il database IBM DB2 per LUW.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1336">If you are using disks based on Azure Page BLOB Storage, the statements made in this document in chapter [Structure of an RDBMS Deployment][dbms-guide-2] also apply to deployments with the IBM DB2 for LUW Database.</span></span>

<span data-ttu-id="d98ef-1337">Come spiegato in precedenza nella parte generale del documento, esistono quote relative alla velocità effettiva delle operazioni di I/O al secondo per i dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1337">As explained earlier in the general part of the document, quotas on IOPS throughput for disks exist.</span></span> <span data-ttu-id="d98ef-1338">Le quote esatte dipendono dal tipo di VM usato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1338">The exact quotas depend on the VM type used.</span></span> <span data-ttu-id="d98ef-1339">Un elenco dei tipi di VM con le rispettive quote è disponibile [qui (per Linux)][virtual-machines-sizes-linux] e [qui (per Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1339">A list of VM types with their quotas can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="d98ef-1340">Se la quota corrente di operazioni di I/O al secondo per ogni disco è sufficiente, è possibile archiviare tutti i file di database in un singolo disco.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1340">As long as the current IOPS quota per disk is sufficient, it is possible to store all the database files on one single disk.</span></span>

<span data-ttu-id="d98ef-1341">Per le considerazioni sulle prestazioni, vedere anche il capitolo relativo alle considerazioni sulle prestazioni e la sicurezza dei dati per le directory di database nelle guide di installazione di SAP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1341">For performance considerations also refer to chapter “Data Safety and Performance Considerations for Database Directories” in SAP installation guides.</span></span>

<span data-ttu-id="d98ef-1342">In alternativa, è possibile usare LVM (Logical Volume Manager) o MDADM come descritto nel capitolo [RAID software][dbms-guide-2.2] di questo documento per creare un solo dispositivo logico di grandi dimensioni su più dischi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1342">Alternatively, you can use LVM (Logical Volume Manager) or MDADM as described in chapter [Software RAID][dbms-guide-2.2] of this document to create one large logical device over multiple disks.</span></span>
<span data-ttu-id="d98ef-1343">Per i dischi contenenti i percorsi di archiviazione DB2 per le directory sapdata e saptmp, è necessario specificare una dimensione del settore del disco pari a 512 KB.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1343">For the disks containing the DB2 storage paths for your sapdata and saptmp directories, you must specify a physical disk sector size of 512 KB.</span></span>

#### <a name="backuprestore"></a><span data-ttu-id="d98ef-1344">Backup/Ripristino</span><span class="sxs-lookup"><span data-stu-id="d98ef-1344">Backup/Restore</span></span>
<span data-ttu-id="d98ef-1345">La funzionalità di backup/ripristino per IBM DB2 per LUW è supportata esattamente come nell'installazione Linux locale standard.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1345">The backup/restore functionality for IBM DB2 for LUW is supported in the same way as on standard Linux installation on-premises.</span></span>

<span data-ttu-id="d98ef-1346">È necessario verificare di avere adottato una valida strategia di backup di database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1346">You must make sure that you have a valid database backup strategy in place.</span></span>

<span data-ttu-id="d98ef-1347">Come nelle distribuzioni bare metal, le prestazioni di backup/ripristino dipendono dalla quantità di volumi leggibili in parallelo e dalla velocità effettiva di tali volumi.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1347">As in bare-metal deployments, backup/restore performance depends on how many volumes can be read in parallel and what the throughput of those volumes might be.</span></span> <span data-ttu-id="d98ef-1348">Inoltre, l'utilizzo di CPU associato alla compressione del backup può avere un ruolo significativo per VM con un massimo di soli otto thread CPU.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1348">In addition, the CPU consumption used by backup compression may play a significant role on VMs with just up to eight CPU threads.</span></span> <span data-ttu-id="d98ef-1349">Si può quindi presumere quanto segue:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1349">Therefore, one can assume:</span></span>

* <span data-ttu-id="d98ef-1350">Minore è il numero dei dischi usati per l'archiviazione dei dispositivi del database, più bassa è la velocità effettiva generale nella lettura</span><span class="sxs-lookup"><span data-stu-id="d98ef-1350">The fewer the number of disks used to store the database devices, the smaller the overall throughput in reading</span></span>
* <span data-ttu-id="d98ef-1351">Minore è il numero di thread CPU nella VM, più forte è l'impatto della compressione del backup</span><span class="sxs-lookup"><span data-stu-id="d98ef-1351">The smaller the number of CPU threads in the VM, the more severe the impact of backup compression</span></span>
* <span data-ttu-id="d98ef-1352">Minore è il numero di destinazioni (directory di striping o dischi) in cui scrivere il backup, più bassa è la velocità effettiva</span><span class="sxs-lookup"><span data-stu-id="d98ef-1352">The fewer targets (Stripe Directories, disks) to write the backup to, the lower the throughput</span></span>

<span data-ttu-id="d98ef-1353">Per aumentare il numero di destinazioni in cui scrivere, è possibile usare/combinare due opzioni a seconda delle proprie esigenze:</span><span class="sxs-lookup"><span data-stu-id="d98ef-1353">To increase the number of targets to write to, two options can be used/combined depending on your needs:</span></span>

* <span data-ttu-id="d98ef-1354">Striping del volume di destinazione di backup su più dischi per migliorare la velocità effettiva delle operazioni di I/O al secondo in tale volume con striping</span><span class="sxs-lookup"><span data-stu-id="d98ef-1354">Striping the backup target volume over multiple disks in order to improve the IOPS throughput on that striped volume</span></span>
* <span data-ttu-id="d98ef-1355">Uso di più di una directory di destinazione in cui scrivere il backup</span><span class="sxs-lookup"><span data-stu-id="d98ef-1355">Using more than one target directory to write the backup to</span></span>

#### <a name="high-availability-and-disaster-recovery"></a><span data-ttu-id="d98ef-1356">Disponibilità elevata e ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="d98ef-1356">High Availability and Disaster Recovery</span></span>
<span data-ttu-id="d98ef-1357">Il ripristino di emergenza a disponibilità DB2 è supportato.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1357">DB2 high availability disaster recovery (HADR) is supported.</span></span> <span data-ttu-id="d98ef-1358">Se le macchine virtuali della configurazione a disponibilità elevata hanno una risoluzione dei nomi funzionante, la configurazione in Azure non sarà diversa da quelle eseguite in locale.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1358">If the virtual machines of the HA configuration have working name resolution, the setup in Azure does not differ from any setup that is done on-premises.</span></span> <span data-ttu-id="d98ef-1359">Non è consigliabile affidarsi solo alla risoluzione IP.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1359">It is not recommended to rely on IP resolution only.</span></span>

<span data-ttu-id="d98ef-1360">Non usare la replica geografica per gli account di archiviazione in cui vengono archiviati i dischi di database.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1360">Do not use Geo-Replication for the storage accounts that store the database disks.</span></span> <span data-ttu-id="d98ef-1361">Per altre informazioni, vedere i capitoli [Archiviazione di Microsoft Azure][dbms-guide-2.3] e [Disponibilità elevata e ripristino di emergenza con VM di Azure][dbms-guide-3].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1361">For more information, refer to chapter [Microsoft Azure Storage][dbms-guide-2.3] and chapter [High Availability and Disaster Recovery with Azure VMs][dbms-guide-3].</span></span>

#### <a name="other"></a><span data-ttu-id="d98ef-1362">Altri</span><span class="sxs-lookup"><span data-stu-id="d98ef-1362">Other</span></span>
<span data-ttu-id="d98ef-1363">Tutti gli altri argomenti generali, ad esempio i set di disponibilità di Azure o il monitoraggio SAP, si applicano come descritto nei primi tre capitoli di questo documento anche per le distribuzioni di VM con IBM DB2 per LUW.</span><span class="sxs-lookup"><span data-stu-id="d98ef-1363">All other general topics like Azure Availability Sets or SAP monitoring apply as described in the first three chapters of this document for deployments of VMs with IBM DB2 for LUW as well.</span></span>

<span data-ttu-id="d98ef-1364">Vedere anche [Riepilogo generale su SQL Server per SAP in Azure][dbms-guide-5.8].</span><span class="sxs-lookup"><span data-stu-id="d98ef-1364">Also refer to chapter [General SQL Server for SAP on Azure Summary][dbms-guide-5.8].</span></span>

