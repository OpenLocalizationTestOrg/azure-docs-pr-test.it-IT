---
title: Distribuire ed esplorare un'applicazione SaaS Wingtip multi-tenant che usa il database SQL di Azure | Microsoft Docs
description: Distribuire ed esplorare l'applicazione SaaS Wingtip multi-tenant, che illustra i modelli di SaaS utilizzando il database SQL di Azure.
keywords: esercitazione database SQL
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: b09bfa8a5bc22a092e963f351e99c16d0e9a57ba
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="deploy-and-explore-a-multi-tenant-application-that-uses-azure-sql-database---wingtip-saas"></a><span data-ttu-id="6a918-104">Distribuire ed esplorare un'applicazione multi-tenant che utilizza il database SQL di Azure - SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="6a918-104">Deploy and explore a multi-tenant application that uses Azure SQL Database - Wingtip SaaS</span></span>

<span data-ttu-id="6a918-105">Questa esercitazione illustra come distribuire ed esplorare l'applicazione SaaS Wingtip.</span><span class="sxs-lookup"><span data-stu-id="6a918-105">In this tutorial, you deploy and explore the Wingtip SaaS application.</span></span> <span data-ttu-id="6a918-106">L'applicazione usa un database per ogni tenant, il modello di applicazione SaaS, per soddisfare le richieste di più tenant.</span><span class="sxs-lookup"><span data-stu-id="6a918-106">The application uses a database-per-tenant, SaaS application pattern, to service multiple tenants.</span></span> <span data-ttu-id="6a918-107">L'applicazione è progettata per dimostrare le funzionalità del database SQL di Azure che semplificano l'abilitazione degli scenari SaaS.</span><span class="sxs-lookup"><span data-stu-id="6a918-107">The application is designed to showcase features of Azure SQL Database that simplify enabling SaaS scenarios.</span></span>

<span data-ttu-id="6a918-108">Cinque minuti dopo aver fatto clic sul pulsante *Deploy to Azure* (Distribuisci in Azure) riportato di seguito, si avrà a disposizione un'applicazione SaaS multi-tenant, che usa database SQL, in esecuzione nel cloud.</span><span class="sxs-lookup"><span data-stu-id="6a918-108">Five minutes after clicking the *Deploy to Azure* button below, you have a multi-tenant SaaS application, using SQL Database, up and running in the cloud.</span></span> <span data-ttu-id="6a918-109">L'applicazione viene distribuita con tre tenant di esempio, ognuno con un database proprio, tutti distribuiti in un pool elastico SQL.</span><span class="sxs-lookup"><span data-stu-id="6a918-109">The application is deployed with three sample tenants, each with its own database, all deployed into a SQL elastic pool.</span></span> <span data-ttu-id="6a918-110">L'app viene distribuita nella sottoscrizione di Azure e consente l'accesso completo per esaminare e utilizzare i singoli componenti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="6a918-110">The app is deployed to your Azure subscription, giving you full access to explore and work with the individual application components.</span></span> <span data-ttu-id="6a918-111">Il codice sorgente e gli script di gestione dell'applicazione sono disponibili nel repository GitHub WingtipSaaS.</span><span class="sxs-lookup"><span data-stu-id="6a918-111">The application source code and management scripts are available in the WingtipSaaS GitHub repo.</span></span>


<span data-ttu-id="6a918-112">In questa esercitazione si apprenderà:</span><span class="sxs-lookup"><span data-stu-id="6a918-112">In this tutorial you learn:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="6a918-113">Come distribuire l'applicazione SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="6a918-113">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="6a918-114">Dove ottenere il codice sorgente e gli script di gestione dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="6a918-114">Where to get the application source code, and management scripts</span></span>
> * <span data-ttu-id="6a918-115">Informazioni sui server, i pool e i database che costituiscono l'app</span><span class="sxs-lookup"><span data-stu-id="6a918-115">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="6a918-116">Come vengono mappati i tenant e i relativi dati con il *catalogo*</span><span class="sxs-lookup"><span data-stu-id="6a918-116">How tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="6a918-117">Come effettuare il provisioning di un nuovo tenant</span><span class="sxs-lookup"><span data-stu-id="6a918-117">How to provision a new tenant</span></span>
> * <span data-ttu-id="6a918-118">Come monitorare l'attività del tenant nell'app</span><span class="sxs-lookup"><span data-stu-id="6a918-118">How to monitor tenant activity in the app</span></span>

<span data-ttu-id="6a918-119">Per esplorare i vari modelli di progettazione e gestione SaaS, è disponibile una [serie di esercitazioni correlate](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) basate su questa distribuzione iniziale.</span><span class="sxs-lookup"><span data-stu-id="6a918-119">To explore various SaaS design and management patterns, a [series of related tutorials](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials) is available that build upon this initial deployment.</span></span> <span data-ttu-id="6a918-120">Esaminando le varie esercitazioni, approfondire gli script forniti e analizzare le modalità di implementazione dei diversi modelli SaaS.</span><span class="sxs-lookup"><span data-stu-id="6a918-120">While going through the tutorials, dive into the provided scripts, and examine how the different SaaS patterns are implemented.</span></span> <span data-ttu-id="6a918-121">Analizzare in dettaglio i vari passaggi degli script in ogni esercitazione per comprendere in modo più approfondito come implementare le molte funzionalità di database SQL che semplificano lo sviluppo di applicazioni SaaS.</span><span class="sxs-lookup"><span data-stu-id="6a918-121">Step through the scripts in each tutorial to gain a deeper understanding how to implement the many SQL Database features that simplify developing SaaS applications.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="6a918-122">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="6a918-122">Prerequisites</span></span>

<span data-ttu-id="6a918-123">Per completare questa esercitazione, verificare che siano soddisfatti i prerequisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="6a918-123">To complete this tutorial, make sure the following prerequisites are completed:</span></span>

* <span data-ttu-id="6a918-124">Azure PowerShell è installato.</span><span class="sxs-lookup"><span data-stu-id="6a918-124">Azure PowerShell is installed.</span></span> <span data-ttu-id="6a918-125">Per informazioni dettagliate, vedere [Introduzione ad Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span><span class="sxs-lookup"><span data-stu-id="6a918-125">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="deploy-the-wingtip-saas-application"></a><span data-ttu-id="6a918-126">Distribuire l'applicazione SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="6a918-126">Deploy the Wingtip SaaS application</span></span>

<span data-ttu-id="6a918-127">Distribuire l'app SaaS Wingtip:</span><span class="sxs-lookup"><span data-stu-id="6a918-127">Deploy the Wingtip SaaS app:</span></span>

1. <span data-ttu-id="6a918-128">Fare clic sul pulsante **Distribuisci in Azure** per aprire il portale di Azure con il modello di distribuzione SaaS Wingtip.</span><span class="sxs-lookup"><span data-stu-id="6a918-128">Clicking the **Deploy to Azure** button opens the Azure portal to the Wingtip SaaS deployment template.</span></span> <span data-ttu-id="6a918-129">Il modello richiede due valori di parametro, un nome per un nuovo gruppo di risorse e un nome utente che distingue questa distribuzione da altre distribuzioni dell'app SaaS Wingtip.</span><span class="sxs-lookup"><span data-stu-id="6a918-129">The template requires two parameter values; a name for a new resource group, and a user name that distinguishes this deployment from other deployments of the Wingtip SaaS app.</span></span> <span data-ttu-id="6a918-130">Il passaggio seguente fornisce dettagli per l'impostazione di questi valori.</span><span class="sxs-lookup"><span data-stu-id="6a918-130">The next step provides details for setting these values.</span></span>

   <span data-ttu-id="6a918-131">Assicurarsi di annotare i valori esatti utilizzati che sarà necessario immettere in un file di configurazione in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="6a918-131">Make sure to note the exact values that you use, because you will need to enter them into a configuration file later.</span></span>

   <a href="http://aka.ms/deploywtpapp" target="_blank"><img src="http://azuredeploy.net/deploybutton.png"/></a>

1. <span data-ttu-id="6a918-132">Immettere i valori dei parametri necessari per la distribuzione:</span><span class="sxs-lookup"><span data-stu-id="6a918-132">Enter required parameter values for the deployment:</span></span>

    > [!IMPORTANT]
    > <span data-ttu-id="6a918-133">Alcune impostazioni di autenticazione e per i firewall server sono intenzionalmente non protette a scopo dimostrativo.</span><span class="sxs-lookup"><span data-stu-id="6a918-133">Some authentication, and server firewalls are intentionally unsecured for demonstration purposes.</span></span> <span data-ttu-id="6a918-134">**Creare un nuovo gruppo di risorse** e non utilizzare gruppi di risorse, server o pool esistenti.</span><span class="sxs-lookup"><span data-stu-id="6a918-134">**Create a new resource group**, and do not use existing resource groups, servers, or pools.</span></span> <span data-ttu-id="6a918-135">Non utilizzare l'applicazione o le risorse che crea per la produzione.</span><span class="sxs-lookup"><span data-stu-id="6a918-135">Do not use this application, or any resources it creates, for production.</span></span> <span data-ttu-id="6a918-136">Eliminare questo gruppo di risorse quando non è più necessario usare l'applicazione, per interrompere la fatturazione correlata.</span><span class="sxs-lookup"><span data-stu-id="6a918-136">Delete this resource group when you are finished with the application to stop related billing.</span></span>

    * <span data-ttu-id="6a918-137">**Gruppo di risorse**: selezionare **Crea nuovo** e specificare il **nome** del nuovo gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="6a918-137">**Resource group** - Select **Create new** and provide a **Name** for the resource group.</span></span> <span data-ttu-id="6a918-138">Selezionare un **percorso** nell'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="6a918-138">Select a **Location** from the drop-down list.</span></span>
    * <span data-ttu-id="6a918-139">**Utente**: alcune risorse richiedono nomi univoci a livello globale.</span><span class="sxs-lookup"><span data-stu-id="6a918-139">**User** - Some resources require names that are globally unique.</span></span> <span data-ttu-id="6a918-140">Per garantire l'univocità, ogni volta che si distribuisce l'applicazione fornire un valore per distinguere le risorse create da quelle create da altre distribuzioni dell'applicazione Wingtip.</span><span class="sxs-lookup"><span data-stu-id="6a918-140">To ensure uniqueness, each time you deploy the application provide a value to differentiate resources you create, from resources created by any other deployment of the Wingtip application.</span></span> <span data-ttu-id="6a918-141">È consigliabile usare un nome **Utente** breve, come le iniziali più un numero (ad esempio, *bg1*), quindi usare tale nome nel nome del gruppo di risorse (ad esempio, *wingtip-bg1*).</span><span class="sxs-lookup"><span data-stu-id="6a918-141">It’s recommended to use a short **User** name, such as your initials plus a number (for example, *bg1*), and then use that in the resource group name (for example, *wingtip-bg1*).</span></span> <span data-ttu-id="6a918-142">Il parametro **Utente** può contenere solo lettere, numeri e trattini (senza spazi).</span><span class="sxs-lookup"><span data-stu-id="6a918-142">The **User** parameter can only contain letters, numbers, and hyphens (no spaces).</span></span> <span data-ttu-id="6a918-143">Il primo e ultimo carattere devono essere una lettera o un numero (si consiglia di usare solo lettere minuscole).</span><span class="sxs-lookup"><span data-stu-id="6a918-143">The first and last character must be a letter or a number (all lowercase is recommended).</span></span>


1. <span data-ttu-id="6a918-144">**Distribuire l'applicazione**.</span><span class="sxs-lookup"><span data-stu-id="6a918-144">**Deploy the application**.</span></span>

    * <span data-ttu-id="6a918-145">Fare clic per accettare i termini e le condizioni.</span><span class="sxs-lookup"><span data-stu-id="6a918-145">Click to agree to the terms and conditions.</span></span>
    * <span data-ttu-id="6a918-146">Fare clic su **Acquista**.</span><span class="sxs-lookup"><span data-stu-id="6a918-146">Click **Purchase**.</span></span>

1. <span data-ttu-id="6a918-147">Monitorare lo stato di distribuzione facendo clic su **Notifiche** (l'icona a forma di campanella a destra della casella di ricerca).</span><span class="sxs-lookup"><span data-stu-id="6a918-147">Monitor deployment status by clicking **Notifications** (the bell icon right of the search box).</span></span> <span data-ttu-id="6a918-148">La distribuzione dell'app SaaS Wingtip richiede circa cinque minuti.</span><span class="sxs-lookup"><span data-stu-id="6a918-148">Deploying the Wingtip SaaS app takes approximately five minutes.</span></span>

   ![distribuzione completata](media/sql-database-saas-tutorial/succeeded.png)

## <a name="download-and-unblock-the-wingtip-saas-scripts"></a><span data-ttu-id="6a918-150">Scaricare e sbloccare gli script dell'app SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="6a918-150">Download and unblock the Wingtip SaaS scripts</span></span>

<span data-ttu-id="6a918-151">Durante la distribuzione dell'applicazione, scaricare il codice sorgente e gli script di gestione.</span><span class="sxs-lookup"><span data-stu-id="6a918-151">While the application is deploying, download the source code and management scripts.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6a918-152">I contenuti eseguibili (script, DLL) possono essere bloccati da Windows quando si scaricano e si estraggono i file ZIP da un'origine esterna.</span><span class="sxs-lookup"><span data-stu-id="6a918-152">Executable contents (scripts, dlls) may be blocked by Windows when zip files are downloaded from an external source and extracted.</span></span> <span data-ttu-id="6a918-153">Quando si estraggono gli script da un file ZIP, seguire questa procedura per sbloccare il file ZIP prima di estrarlo.</span><span class="sxs-lookup"><span data-stu-id="6a918-153">When extracting the scripts from a zip file, follow the steps below to unblock the .zip file before extracting.</span></span> <span data-ttu-id="6a918-154">In questo modo sarà possibile eseguire gli script.</span><span class="sxs-lookup"><span data-stu-id="6a918-154">This ensures the scripts are allowed to run.</span></span>

1. <span data-ttu-id="6a918-155">Passare al [repository GitHub SaaS Wingtip](https://github.com/Microsoft/WingtipSaaS).</span><span class="sxs-lookup"><span data-stu-id="6a918-155">Browse to [the Wingtip SaaS github repo](https://github.com/Microsoft/WingtipSaaS).</span></span>
1. <span data-ttu-id="6a918-156">Fare clic su **Clona o scarica**.</span><span class="sxs-lookup"><span data-stu-id="6a918-156">Click **Clone or download**.</span></span>
1. <span data-ttu-id="6a918-157">Fare clic su **Scarica ZIP** e salvare il file.</span><span class="sxs-lookup"><span data-stu-id="6a918-157">Click **Download ZIP** and save the file.</span></span>
1. <span data-ttu-id="6a918-158">Fare clic con il pulsante destro del mouse su **WingtipSaaS-master.zip** e selezionare **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="6a918-158">Right-click the **WingtipSaaS-master.zip** file, and select **Properties**.</span></span>
1. <span data-ttu-id="6a918-159">Nella scheda **Generale** selezionare **Annulla blocco** e fare clic su **Applica**.</span><span class="sxs-lookup"><span data-stu-id="6a918-159">On the **General** tab, select **Unblock**, and click **Apply**.</span></span>
1. <span data-ttu-id="6a918-160">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="6a918-160">Click **OK**.</span></span>
1. <span data-ttu-id="6a918-161">Estrarre i file.</span><span class="sxs-lookup"><span data-stu-id="6a918-161">Extract the files.</span></span>

<span data-ttu-id="6a918-162">Gli script si trovano nella cartella *..\\WingtipSaaS-master\\Learning Modules*.</span><span class="sxs-lookup"><span data-stu-id="6a918-162">Scripts are located in the *..\\WingtipSaaS-master\\Learning Modules* folder.</span></span>

## <a name="update-the-configuration-file-for-this-deployment"></a><span data-ttu-id="6a918-163">Aggiornare il file di configurazione per la distribuzione</span><span class="sxs-lookup"><span data-stu-id="6a918-163">Update the configuration file for this deployment</span></span>

<span data-ttu-id="6a918-164">Prima di eseguire qualsiasi script, impostare i valori *gruppo di risorse* e *utente* in **UserConfig.psm1**.</span><span class="sxs-lookup"><span data-stu-id="6a918-164">Before running any scripts, set the *resource group* and *user* values in **UserConfig.psm1**.</span></span> <span data-ttu-id="6a918-165">Impostare queste variabili sui valori impostati durante la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="6a918-165">Set these variables to the values you set during deployment.</span></span>

1. <span data-ttu-id="6a918-166">Aprire ...\\Learning Modules\\*UserConfig.psm1* in *PowerShell ISE*</span><span class="sxs-lookup"><span data-stu-id="6a918-166">Open ...\\Learning Modules\\*UserConfig.psm1* in the *PowerShell ISE*</span></span>
1. <span data-ttu-id="6a918-167">Aggiornare *ResourceGroupName* e *Name* con i valori specifici della distribuzione in uso (solo alle righe 10 e 11).</span><span class="sxs-lookup"><span data-stu-id="6a918-167">Update *ResourceGroupName* and *Name* with the specific values for your deployment (on lines 10 and 11 only).</span></span>
1. <span data-ttu-id="6a918-168">Salvare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="6a918-168">Save the changes!</span></span>

<span data-ttu-id="6a918-169">Impostando qui questi valori specifici della distribuzione, non sarà necessario aggiornarli in ogni script.</span><span class="sxs-lookup"><span data-stu-id="6a918-169">Setting this here simply keeps you from having to update these deployment-specific values in every script.</span></span>

## <a name="run-the-application"></a><span data-ttu-id="6a918-170">Eseguire l'applicazione</span><span class="sxs-lookup"><span data-stu-id="6a918-170">Run the application</span></span>

<span data-ttu-id="6a918-171">L'app presenta sedi di eventi, come sale concerto, jazz club e club sportivi.</span><span class="sxs-lookup"><span data-stu-id="6a918-171">The app showcases venues, such as concert halls, jazz clubs, sports clubs, that host events.</span></span> <span data-ttu-id="6a918-172">Queste sedi vengono registrate come clienti (o tenant) della piattaforma Wingtip, per presentare elenchi di eventi e vendere i biglietti con facilità.</span><span class="sxs-lookup"><span data-stu-id="6a918-172">Venues register as customers (or tenants) of the Wingtip platform, for an easy way to list events and sell tickets.</span></span> <span data-ttu-id="6a918-173">Ogni sede di eventi ottiene un'app Web personalizzata per gestire ed elencare gli eventi e vendere i biglietti, in modo indipendente e isolato dagli altri tenant.</span><span class="sxs-lookup"><span data-stu-id="6a918-173">Each venue gets a personalized web app to manage and list their events and sell tickets, independent and isolated from other tenants.</span></span> <span data-ttu-id="6a918-174">Dietro le quinte, ogni tenant ottiene un database SQL distribuito in un pool elastico SQL.</span><span class="sxs-lookup"><span data-stu-id="6a918-174">Under the covers, each tenant gets a SQL database deployed into a SQL elastic pool.</span></span>

<span data-ttu-id="6a918-175">Un **Events Hub** (Hub eventi) centrale presenta un elenco degli URL dei tenant specifici della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="6a918-175">A central **Events Hub** provides a list of tenant URLs specific to your deployment.</span></span>

1. <span data-ttu-id="6a918-176">Aprire l'_hub eventi_ nel Web browser: http://events.wtp.&lt;UTENTE&gt;.trafficmanager.net (sostituire con il nome utente della distribuzione):</span><span class="sxs-lookup"><span data-stu-id="6a918-176">Open the _Events Hub_ in your web browser: http://events.wtp.&lt;USER&gt;.trafficmanager.net (replace with your deployment's user name):</span></span>

    ![Hub eventi](media/sql-database-saas-tutorial/events-hub.png)

1. <span data-ttu-id="6a918-178">Fare clic su **Fabrikam Jazz Club** in *Events Hub* (Hub eventi).</span><span class="sxs-lookup"><span data-stu-id="6a918-178">Click **Fabrikam Jazz Club** in the *Events Hub*.</span></span>

   ![Eventi](./media/sql-database-saas-tutorial/fabrikam.png)


<span data-ttu-id="6a918-180">Per controllare la distribuzione delle richieste in ingresso, l'app usa [*Gestione traffico di Microsoft Azure*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span><span class="sxs-lookup"><span data-stu-id="6a918-180">To control the distribution of incoming requests, the app uses [*Azure Traffic Manager*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview).</span></span> <span data-ttu-id="6a918-181">Le pagine degli eventi, specifiche del tenant, richiedono che gli URL includano i nomi del tenant.</span><span class="sxs-lookup"><span data-stu-id="6a918-181">The events pages, which are tenant-specific, require that tenant names are included in the URLs.</span></span> <span data-ttu-id="6a918-182">Tutti gli URL dei tenant includono il valore *Utente* specifico nel formato: http://events.wtp.&lt;UTENTE&gt;.trafficmanager.net/*fabrikamjazzclub*.</span><span class="sxs-lookup"><span data-stu-id="6a918-182">All the tenant URLs include your specific *User* value and follow this format: http://events.wtp.&lt;USER&gt;.trafficmanager.net/*fabrikamjazzclub*.</span></span> <span data-ttu-id="6a918-183">L'app degli eventi analizza il nome del tenant dall'URL e lo usa per creare una chiave per accedere a un catalogo usando il [*gestore delle mappe partizioni*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span><span class="sxs-lookup"><span data-stu-id="6a918-183">The events app parses the tenant name from the URL and uses it to create a key to access a catalog using [*shard map management*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-scale-shard-map-management).</span></span> <span data-ttu-id="6a918-184">Il catalogo esegue il mapping della chiave alla posizione del database del tenant.</span><span class="sxs-lookup"><span data-stu-id="6a918-184">The catalog maps the key to the tenant's database location.</span></span> <span data-ttu-id="6a918-185">L'**hub eventi** usa i metadati estesi nel catalogo per recuperare il nome del tenant associato a ogni database che fornisce l'elenco di URL.</span><span class="sxs-lookup"><span data-stu-id="6a918-185">The **Events Hub** uses extended metadata in the catalog to retrieve the tenant’s name associated with each database to provide the list of URLs.</span></span>

<span data-ttu-id="6a918-186">In ambiente di produzione si crea in genere un record DNS CNAME per [*puntare un dominio Internet aziendale*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) al profilo di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="6a918-186">In a production environment, you would typically create a CNAME DNS record to [*point a company internet domain*](https://docs.microsoft.com/azure/traffic-manager/traffic-manager-point-internet-domain) to the traffic manager profile.</span></span>

## <a name="start-generating-load-on-the-tenant-databases"></a><span data-ttu-id="6a918-187">Iniziare a generare carico sui database tenant</span><span class="sxs-lookup"><span data-stu-id="6a918-187">Start generating load on the tenant databases</span></span>

<span data-ttu-id="6a918-188">Dopo la distribuzione, è possibile utilizzare l'app.</span><span class="sxs-lookup"><span data-stu-id="6a918-188">Now that the app is deployed, let’s put it to work!</span></span> <span data-ttu-id="6a918-189">Lo script di PowerShell *Demo-LoadGenerator* avvia un carico di lavoro eseguito su tutti i database tenant.</span><span class="sxs-lookup"><span data-stu-id="6a918-189">The *Demo-LoadGenerator* PowerShell script starts a workload running against all tenant databases.</span></span> <span data-ttu-id="6a918-190">Il carico del mondo reale in molte app SaaS è generalmente sporadico e imprevedibile.</span><span class="sxs-lookup"><span data-stu-id="6a918-190">The real-world load on many SaaS apps is typically sporadic and unpredictable.</span></span> <span data-ttu-id="6a918-191">Per simulare questo tipo di carico, il generatore produce un carico distribuito su tutti i tenant, con picchi casuali che si presentano in ogni tenant a intervalli casuali.</span><span class="sxs-lookup"><span data-stu-id="6a918-191">To simulate this type of load, the generator produces a load distributed across all tenants, with randomized bursts on each tenant occurring at randomized intervals.</span></span> <span data-ttu-id="6a918-192">Per questo motivo l'affiorare del modello di carico può richiedere diversi minuti, è pertanto consigliabile lasciare agire il generatore per almeno tre o quattro minuti prima di monitorare il carico.</span><span class="sxs-lookup"><span data-stu-id="6a918-192">Because of this it takes several minutes for the load pattern to emerge, so it’s best to let the generator run for at least three or four minutes before monitoring the load.</span></span>

1. <span data-ttu-id="6a918-193">In *PowerShell ISE* aprire lo script \\Learning Modules\\Utilities\\*Demo-LoadGenerator.ps1*.</span><span class="sxs-lookup"><span data-stu-id="6a918-193">In the *PowerShell ISE*, open the ...\\Learning Modules\\Utilities\\*Demo-LoadGenerator.ps1* script.</span></span>
1. <span data-ttu-id="6a918-194">Premere **F5** per eseguire lo script e avviare il generatore di carico (lasciare i valori dei parametri predefiniti per il momento).</span><span class="sxs-lookup"><span data-stu-id="6a918-194">Press **F5** to run the script and start the load generator (leave the default parameter values for now).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6a918-195">Per eseguire altri script, aprire una nuova finestra di PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="6a918-195">To run other scripts, open a new PowerShell ISE window.</span></span> <span data-ttu-id="6a918-196">Il generatore di carico esegue una serie di processi nella sessione di PowerShell locale.</span><span class="sxs-lookup"><span data-stu-id="6a918-196">The load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="6a918-197">Lo script *Demo-LoadGenerator.ps1* avvia lo script del generatore del carico effettivo che viene eseguito come attività di primo piano oltre a una serie di processi di generazione del carico in background.</span><span class="sxs-lookup"><span data-stu-id="6a918-197">The *Demo-LoadGenerator.ps1* script kicks off the actual load generator script, which runs as a foreground task plus a series of background load-generation jobs.</span></span> <span data-ttu-id="6a918-198">Un processo del generatore di carico viene richiamato per ogni database registrato nel catalogo.</span><span class="sxs-lookup"><span data-stu-id="6a918-198">A load-generator job is invoked for each database registered in the catalog.</span></span> <span data-ttu-id="6a918-199">I processi sono in esecuzione nella sessione di PowerShell locale, pertanto la chiusura della sessione di PowerShell arresta tutti i processi.</span><span class="sxs-lookup"><span data-stu-id="6a918-199">The jobs are running in your local PowerShell session, so closing the PowerShell session stops all jobs.</span></span> <span data-ttu-id="6a918-200">Se si sospende il computer, la generazione del carico viene messa in pausa e riprende quando si riattiva il computer.</span><span class="sxs-lookup"><span data-stu-id="6a918-200">If you suspend your machine, load generation is paused and will resume when you wake up your machine.</span></span>

<span data-ttu-id="6a918-201">Quando il generatore di carico richiama i processi di generazione del carico per ogni tenant, l'attività di primo piano rimane nello stato di richiamo del processo in cui processi aggiuntivi in background sono avviati per eventuali nuovi tenant di cui viene eseguito il provisioning successivamente.</span><span class="sxs-lookup"><span data-stu-id="6a918-201">Once the load generator invokes load-generation jobs for each tenant, the foreground task remains in a job-invoking state, where it starts additional background jobs for any new tenants that are subsequently provisioned.</span></span> <span data-ttu-id="6a918-202">È possibile utilizzare *CTRL-C* o premere il pulsante *Interrompi* per arrestare l'attività in primo piano, ma i processi in background esistenti continueranno a generare il carico in ogni database.</span><span class="sxs-lookup"><span data-stu-id="6a918-202">You can use *Ctrl-C* or press the *Stop* button to stop the foreground task, but existing background jobs will continue generating load on each database.</span></span> <span data-ttu-id="6a918-203">Se si desidera monitorare e controllare i processi in background, utilizzare *Get-Job*, *Receive-Job* e *Stop-Job*.</span><span class="sxs-lookup"><span data-stu-id="6a918-203">If you need to monitor and control the background jobs, use *Get-Job*, *Receive-Job* and *Stop-Job*.</span></span> <span data-ttu-id="6a918-204">Durante l'esecuzione dell'attività in primo piano, non è possibile utilizzare la stessa sessione di PowerShell per eseguire altri script.</span><span class="sxs-lookup"><span data-stu-id="6a918-204">While the foreground task is running you cannot use the same PowerShell session to execute other scripts.</span></span> <span data-ttu-id="6a918-205">Per eseguire altri script, aprire una nuova finestra di PowerShell ISE.</span><span class="sxs-lookup"><span data-stu-id="6a918-205">To run other scripts, open a new PowerShell ISE window.</span></span>

<span data-ttu-id="6a918-206">Se si desidera riavviare la sessione del generatore di carico, ad esempio con parametri diversi, è possibile arrestare l'attività in primo piano e quindi eseguire nuovamente lo script *Demo LoadGenerator.ps1*.</span><span class="sxs-lookup"><span data-stu-id="6a918-206">If you want to restart the load generator session, for example with different parameters, you can stop the foreground task and then re-run the *Demo-LoadGenerator.ps1* script.</span></span> <span data-ttu-id="6a918-207">La ripetizione dell'esecuzione di *Demo LoadGenerator.ps1* prima arresta i processi attualmente in esecuzione e quindi riavvia il generatore che avvia un nuovo set di processi utilizzando i parametri correnti.</span><span class="sxs-lookup"><span data-stu-id="6a918-207">Re-running *Demo-LoadGenerator.ps1* first stops any currently running jobs, and then restarts the generator, which kicks off a new set of jobs using the current parameters.</span></span>

<span data-ttu-id="6a918-208">Per il momento, lasciare il generatore di carico in esecuzione nello stato di richiamo del processo.</span><span class="sxs-lookup"><span data-stu-id="6a918-208">For now, leave the load generator running in the job-invoking state.</span></span>


## <a name="provision-a-new-tenant"></a><span data-ttu-id="6a918-209">Effettuare il provisioning di un nuovo tenant</span><span class="sxs-lookup"><span data-stu-id="6a918-209">Provision a new tenant</span></span>

<span data-ttu-id="6a918-210">La distribuzione iniziale crea tre tenant di esempio, ma è possibile crearne un altro per valutarne l'impatto sull'applicazione distribuita.</span><span class="sxs-lookup"><span data-stu-id="6a918-210">The initial deployment creates three sample tenants, but let’s create another tenant to see how this impacts the deployed application.</span></span> <span data-ttu-id="6a918-211">Il flusso di lavoro dei tenant di provisioning SaaS Wingtip è descritto dettagliatamente nell'[esercitazione sul provisioning e la catalogazione](sql-database-saas-tutorial-provision-and-catalog.md).</span><span class="sxs-lookup"><span data-stu-id="6a918-211">The Wingtip SaaS provisioning-tenants workflow is detailed in the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md).</span></span> <span data-ttu-id="6a918-212">Questo passaggio descrive come creare rapidamente un nuovo tenant.</span><span class="sxs-lookup"><span data-stu-id="6a918-212">In this step, you quickly create a new tenant.</span></span>

1. <span data-ttu-id="6a918-213">Aprire ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in *PowerShell ISE*.</span><span class="sxs-lookup"><span data-stu-id="6a918-213">Open ...\\Learning Modules\Provision and Catalog\\*Demo-ProvisionAndCatalog.ps1* in the *PowerShell ISE*.</span></span>
1. <span data-ttu-id="6a918-214">Premere **F5** per eseguire lo script (per il momento lasciare i valori predefiniti).</span><span class="sxs-lookup"><span data-stu-id="6a918-214">Press **F5** to run the script (leave the default values for now).</span></span>

   > [!NOTE]
   > <span data-ttu-id="6a918-215">Molti script SaaS Wingtip utilizzano *$PSScriptRoot* per consentire l'esplorazione delle cartelle per chiamare le funzioni in altri script.</span><span class="sxs-lookup"><span data-stu-id="6a918-215">Many Wingtip SaaS scripts use *$PSScriptRoot* to allow navigating folders to call functions in other scripts.</span></span> <span data-ttu-id="6a918-216">Questa variabile viene valutata solo quando viene eseguito lo script premendo **F5**.</span><span class="sxs-lookup"><span data-stu-id="6a918-216">This variable is only evaluated when the script is executed by pressing **F5**.</span></span>  <span data-ttu-id="6a918-217">L'evidenziazione e l'esecuzione di una selezione (**F8**) può causare errori, quindi premere **F5** per l'esecuzione di script.</span><span class="sxs-lookup"><span data-stu-id="6a918-217">Highlighting and running a selection (**F8**) can result in errors, so press **F5** when running scripts.</span></span>

<span data-ttu-id="6a918-218">Il nuovo database tenant viene creato in un pool elastico SQL, inizializzato e registrato nel catalogo.</span><span class="sxs-lookup"><span data-stu-id="6a918-218">The new tenant database is created in a SQL elastic pool, initialized and registered in the catalog.</span></span> <span data-ttu-id="6a918-219">Dopo il corretto completamento del provisioning, il sito *Eventi* per la vendita dei biglietti del nuovo tenant viene visualizzato nel browser:</span><span class="sxs-lookup"><span data-stu-id="6a918-219">After successful provisioning, the new tenant's ticket-selling *Events* site appears in your browser:</span></span>

![Nuovo tenant](./media/sql-database-saas-tutorial/red-maple-racing.png)

<span data-ttu-id="6a918-221">Aggiornare l'*hub eventi* e verificare che il nuovo tenant sia incluso nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="6a918-221">Refresh the *Events Hub* and the new tenant now appears in the list.</span></span>


## <a name="explore-the-servers-pools-and-tenant-databases"></a><span data-ttu-id="6a918-222">Esplorare i server, i pool e i database tenant</span><span class="sxs-lookup"><span data-stu-id="6a918-222">Explore the servers, pools, and tenant databases</span></span>

<span data-ttu-id="6a918-223">Dopo aver avviato l'esecuzione di un carico sulla raccolta di tenant, è tempo di esaminare alcune delle risorse distribuite:</span><span class="sxs-lookup"><span data-stu-id="6a918-223">Now that you've started running a load against the collection of tenants, let’s look at some of the resources that were deployed:</span></span>

1. <span data-ttu-id="6a918-224">Nel [portale di Azure](http://portal.azure.com) passare all'elenco dei server SQL e aprire il server **catalog-&lt;UTENTE&gt;**.</span><span class="sxs-lookup"><span data-stu-id="6a918-224">In the [Azure portal](http://portal.azure.com), browse to your list of SQL servers and open the **catalog-&lt;USER&gt;** server.</span></span> <span data-ttu-id="6a918-225">Il server di catalogo contiene due database:</span><span class="sxs-lookup"><span data-stu-id="6a918-225">The catalog server contains two databases.</span></span> <span data-ttu-id="6a918-226">**tenantcatalog** e **basetenantdb**, ovvero un database *di riferimento* o di esempio vuoto copiato per creare i nuovi tenant.</span><span class="sxs-lookup"><span data-stu-id="6a918-226">The **tenantcatalog**, and the **basetenantdb** (an empty *golden* or template database that is copied to create new tenants).</span></span>

   ![database](./media/sql-database-saas-tutorial/databases.png)

1. <span data-ttu-id="6a918-228">Tornare all'elenco dei server SQL e aprire il server **tenants1-&lt;UTENTE&gt;** che include i database tenant.</span><span class="sxs-lookup"><span data-stu-id="6a918-228">Go back to your list of SQL servers and open the **tenants1-&lt;USER&gt;** server that holds the tenant databases.</span></span> <span data-ttu-id="6a918-229">Ogni database tenant è un database _standard elastico_ in un pool standard da 50 eDTU.</span><span class="sxs-lookup"><span data-stu-id="6a918-229">Each tenant database is an _Elastic Standard_ database in a 50 eDTU standard pool.</span></span> <span data-ttu-id="6a918-230">Si noti anche che è presente un database per _Red Maple Racing_, ovvero il database tenant di cui è stato eseguito il provisioning in precedenza.</span><span class="sxs-lookup"><span data-stu-id="6a918-230">Also notice there is a _Red Maple Racing_ database, the tenant database you provisioned previously.</span></span>

   ![server](./media/sql-database-saas-tutorial/server.png)

## <a name="monitor-the-pool"></a><span data-ttu-id="6a918-232">Monitorare il pool</span><span class="sxs-lookup"><span data-stu-id="6a918-232">Monitor the pool</span></span>

<span data-ttu-id="6a918-233">Se il generatore di carico è rimasto in esecuzione per diversi minuti, dovrebbero essere disponibili abbastanza dati per iniziare a esaminare alcune delle funzionalità di monitoraggio incorporate nei pool e nei database.</span><span class="sxs-lookup"><span data-stu-id="6a918-233">If the load generator has been running for several minutes, enough data should be available to start looking at some of the monitoring capabilities built into pools and databases.</span></span>

1. <span data-ttu-id="6a918-234">Individuare il server **tenants1-&lt;UTENTE&gt;** e fare clic su **Pool1** per visualizzare l'utilizzo delle risorse per il pool (il generatore di carico è stato eseguito per un'ora nei grafici seguenti):</span><span class="sxs-lookup"><span data-stu-id="6a918-234">Browse to the server **tenants1-&lt;USER&gt;**, and click **Pool1** to view resource utilization for the pool (the load generator ran for an hour in the following charts):</span></span>

   ![monitorare il pool](./media/sql-database-saas-tutorial/monitor-pool.png)

<span data-ttu-id="6a918-236">Quello che dimostrano chiaramente questi due grafici è quanto i pool elastici e database SQL siano adatti ai carichi di lavoro di applicazioni SaaS.</span><span class="sxs-lookup"><span data-stu-id="6a918-236">What these two charts nicely illustrate, is how well suited elastic pools and SQL Database are for SaaS application workloads.</span></span> <span data-ttu-id="6a918-237">Quattro database, ognuno dei quali con picchi di utilizzo fino a 40 eDTU, possono essere supportati senza problemi in pool da 50 eDTU.</span><span class="sxs-lookup"><span data-stu-id="6a918-237">Four databases that are each bursting to as much as 40 eDTUs are easily being supported in a 50 eDTU pool.</span></span> <span data-ttu-id="6a918-238">Se ne è stato eseguito il provisioning come database autonomi, ciascuno deve essere un S2 (50 DTU) per supportare i picchi.</span><span class="sxs-lookup"><span data-stu-id="6a918-238">If they were provisioned as standalone databases, they would each need to be an S2 (50 DTU) to support the bursts.</span></span> <span data-ttu-id="6a918-239">Il costo di quattro database S2 autonomi è circa il triplo del prezzo del pool, senza contare che il pool ha ancora spazio per molti altri database.</span><span class="sxs-lookup"><span data-stu-id="6a918-239">The cost of 4 standalone S2 databases would be nearly 3 times the price of the pool, and the pool still has plenty of headroom for many more databases.</span></span> <span data-ttu-id="6a918-240">Nelle situazioni reali, i clienti di database SQL eseguono attualmente fino a 500 database in pool da 200 eDTU.</span><span class="sxs-lookup"><span data-stu-id="6a918-240">In real-world situations, SQL Database customers are currently running up to 500 databases in 200 eDTU pools.</span></span> <span data-ttu-id="6a918-241">Per altre informazioni, vedere l'[esercitazione sul monitoraggio delle prestazioni](sql-database-saas-tutorial-performance-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="6a918-241">For more information, see the [performance monitoring tutorial](sql-database-saas-tutorial-performance-monitoring.md).</span></span>


## <a name="next-steps"></a><span data-ttu-id="6a918-242">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="6a918-242">Next steps</span></span>

<span data-ttu-id="6a918-243">In questa esercitazione si è appreso:</span><span class="sxs-lookup"><span data-stu-id="6a918-243">In this tutorial you learned:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="6a918-244">Come distribuire l'applicazione SaaS Wingtip</span><span class="sxs-lookup"><span data-stu-id="6a918-244">How to deploy the Wingtip SaaS application</span></span>
> * <span data-ttu-id="6a918-245">Informazioni sui server, i pool e i database che costituiscono l'app</span><span class="sxs-lookup"><span data-stu-id="6a918-245">About the servers, pools, and databases that make up the app</span></span>
> * <span data-ttu-id="6a918-246">Come vengono mappati i tenant e i relativi dati con il *catalogo*</span><span class="sxs-lookup"><span data-stu-id="6a918-246">Tenants are mapped to their data with the *catalog*</span></span>
> * <span data-ttu-id="6a918-247">Come effettuare il provisioning di nuovi tenant</span><span class="sxs-lookup"><span data-stu-id="6a918-247">How to provision new tenants</span></span>
> * <span data-ttu-id="6a918-248">Come visualizzare l'utilizzo del pool per monitorare l'attività dei tenant</span><span class="sxs-lookup"><span data-stu-id="6a918-248">How to view pool utilization to monitor tenant activity</span></span>
> * <span data-ttu-id="6a918-249">Come eliminare le risorse di esempio per interrompere la fatturazione correlata</span><span class="sxs-lookup"><span data-stu-id="6a918-249">How to delete sample resources to stop related billing</span></span>

<span data-ttu-id="6a918-250">È ora possibile continuare provando l'[esercitazione su provisioning e catalogazione](sql-database-saas-tutorial-provision-and-catalog.md)</span><span class="sxs-lookup"><span data-stu-id="6a918-250">Now try the [Provision and catalog tutorial](sql-database-saas-tutorial-provision-and-catalog.md)</span></span>



## <a name="additional-resources"></a><span data-ttu-id="6a918-251">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="6a918-251">Additional resources</span></span>

* <span data-ttu-id="6a918-252">Altre [esercitazioni basate sull'applicazione SaaS Wingtip](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="6a918-252">Additional [tutorials that build on the Wingtip SaaS application](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* <span data-ttu-id="6a918-253">Per informazioni sui pool elastici, vedere [*Informazioni sul pool elastico di Azure SQL*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span><span class="sxs-lookup"><span data-stu-id="6a918-253">To learn about elastic pools, see [*What is an Azure SQL elastic pool*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-pool)</span></span>
* <span data-ttu-id="6a918-254">Per informazioni sui processi elastici, vedere [*Gestione dei database cloud con scalabilità orizzontale*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span><span class="sxs-lookup"><span data-stu-id="6a918-254">To learn about elastic jobs, see [*Managing scaled-out cloud databases*](https://docs.microsoft.com/azure/sql-database/sql-database-elastic-jobs-overview)</span></span>
* <span data-ttu-id="6a918-255">Per informazioni sulle applicazioni SaaS multi-tenant, vedere [*Modelli di progettazione per le applicazioni SaaS multi-tenant*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span><span class="sxs-lookup"><span data-stu-id="6a918-255">To learn about multi-tenant SaaS applications, see [*Design patterns for multi-tenant SaaS applications*](https://docs.microsoft.com/azure/sql-database/sql-database-design-patterns-multi-tenancy-saas-applications)</span></span>
