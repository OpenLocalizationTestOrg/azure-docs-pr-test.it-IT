---
title: insieme di credenziali chiave di aaaAccess dietro un firewall | Documenti Microsoft
description: Informazioni su come tooaccess Azure chiave dell'insieme di credenziali da un'applicazione di un firewall
services: key-vault
documentationcenter: 
author: amitbapat
manager: mbaldwin
tags: azure-resource-manager
ms.assetid: 50d21774-2ee1-4212-8995-570c9de603c5
ms.service: key-vault
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 01/07/2017
ms.author: ambapat
ms.openlocfilehash: ab4bb0c27a41fef878a20dace6cab203df04e579
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="access-azure-key-vault-behind-a-firewall"></a><span data-ttu-id="b386b-103">Accedere a Insieme di credenziali delle chiavi di Azure protetto da firewall</span><span class="sxs-lookup"><span data-stu-id="b386b-103">Access Azure Key Vault behind a firewall</span></span>
### <a name="q-my-key-vault-client-application-needs-toobe-behind-a-firewall-what-ports-hosts-or-ip-addresses-should-i-open-tooenable-access-tooa-key-vault"></a><span data-ttu-id="b386b-104">D: nel applicazione client insieme di credenziali delle chiavi deve toobe dietro un firewall.</span><span class="sxs-lookup"><span data-stu-id="b386b-104">Q: My key vault client application needs toobe behind a firewall.</span></span> <span data-ttu-id="b386b-105">Quali porte, gli host o degli indirizzi IP è necessario aprire tooenable accesso tooa chiave dell'insieme di credenziali?</span><span class="sxs-lookup"><span data-stu-id="b386b-105">What ports, hosts, or IP addresses should I open tooenable access tooa key vault?</span></span>
<span data-ttu-id="b386b-106">tooaccess un insieme di credenziali chiave, l'applicazione client insieme di credenziali delle chiavi ha tooaccess più endpoint per varie funzionalità:</span><span class="sxs-lookup"><span data-stu-id="b386b-106">tooaccess a key vault, your key vault client application has tooaccess multiple endpoints for various functionalities:</span></span>

* <span data-ttu-id="b386b-107">Autenticazione tramite Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="b386b-107">Authentication via Azure Active Directory (Azure AD).</span></span>
* <span data-ttu-id="b386b-108">Gestione di Insieme di credenziali delle chiavi di Azure,</span><span class="sxs-lookup"><span data-stu-id="b386b-108">Management of Azure Key Vault.</span></span> <span data-ttu-id="b386b-109">inclusa la creazione, la lettura, l'aggiornamento, l'eliminazione e l'impostazione dei criteri di accesso tramite Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="b386b-109">This includes creating, reading, updating, deleting, and setting access policies through Azure Resource Manager.</span></span>
* <span data-ttu-id="b386b-110">L'accesso e la gestione degli oggetti (chiavi e segreti) archiviati nell'insieme di credenziali chiave stessa, passando hello endpoint specifico insieme di credenziali chiave (ad esempio, [https://yourvaultname.vault.azure.net](https://yourvaultname.vault.azure.net)).</span><span class="sxs-lookup"><span data-stu-id="b386b-110">Accessing and managing objects (keys and secrets) stored in Key Vault itself, going through hello Key Vault-specific endpoint (for example, [https://yourvaultname.vault.azure.net](https://yourvaultname.vault.azure.net)).</span></span>  

<span data-ttu-id="b386b-111">Esistono alcune varianti a seconda della configurazione e dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="b386b-111">Depending on your configuration and environment, there are some variations.</span></span>   

## <a name="ports"></a><span data-ttu-id="b386b-112">Porte</span><span class="sxs-lookup"><span data-stu-id="b386b-112">Ports</span></span>
<span data-ttu-id="b386b-113">Passa tutti traffico tooa chiave dell'insieme di credenziali per tutte le tre funzioni (accesso piano autenticazione, la gestione e dati) su HTTPS: la porta 443.</span><span class="sxs-lookup"><span data-stu-id="b386b-113">All traffic tooa key vault for all three functions (authentication, management, and data plane access) goes over HTTPS: port 443.</span></span> <span data-ttu-id="b386b-114">Verrà tuttavia generato occasionalmente traffico HTTP (porta 80) per CRL.</span><span class="sxs-lookup"><span data-stu-id="b386b-114">However, there will occasionally be HTTP (port 80) traffic for CRL.</span></span> <span data-ttu-id="b386b-115">I client che supportano OCSP non devono raggiungere CRL, ma possono in alcuni casi raggiungere [http://cdp1.public-trust.com/CRL/Omniroot2025.crl](http://cdp1.public-trust.com/CRL/Omniroot2025.crl).</span><span class="sxs-lookup"><span data-stu-id="b386b-115">Clients that support OCSP shouldn't reach CRL, but may occasionally reach [http://cdp1.public-trust.com/CRL/Omniroot2025.crl](http://cdp1.public-trust.com/CRL/Omniroot2025.crl).</span></span>  

## <a name="authentication"></a><span data-ttu-id="b386b-116">Autenticazione</span><span class="sxs-lookup"><span data-stu-id="b386b-116">Authentication</span></span>
<span data-ttu-id="b386b-117">Le applicazioni client di chiave dell'insieme di credenziali necessario tooaccess gli endpoint di Azure Active Directory per l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="b386b-117">Key vault client applications will need tooaccess Azure Active Directory endpoints for authentication.</span></span> <span data-ttu-id="b386b-118">endpoint Hello utilizzato dipende hello configurazione tenant di Azure AD, il tipo di hello di entità (entità utente o dell'entità servizio) e hello tipo di account, ad esempio, un account Microsoft o un lavoro o scuola account.</span><span class="sxs-lookup"><span data-stu-id="b386b-118">hello endpoint used depends on hello Azure AD tenant configuration, hello type of principal (user principal or service principal), and hello type of account--for example, a Microsoft account or a work or school account.</span></span>  

| <span data-ttu-id="b386b-119">Tipo di entità</span><span class="sxs-lookup"><span data-stu-id="b386b-119">Principal type</span></span> | <span data-ttu-id="b386b-120">Endpoint:porta</span><span class="sxs-lookup"><span data-stu-id="b386b-120">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="b386b-121">Utente che usa un account Microsoft</span><span class="sxs-lookup"><span data-stu-id="b386b-121">User using Microsoft account</span></span><br> <span data-ttu-id="b386b-122">(ad esempio, user@hotmail.com)</span><span class="sxs-lookup"><span data-stu-id="b386b-122">(for example, user@hotmail.com)</span></span> |<span data-ttu-id="b386b-123">**Globale:**</span><span class="sxs-lookup"><span data-stu-id="b386b-123">**Global:**</span></span><br> <span data-ttu-id="b386b-124">login.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="b386b-124">login.microsoftonline.com:443</span></span><br><br> <span data-ttu-id="b386b-125">**Azure per la Cina:**</span><span class="sxs-lookup"><span data-stu-id="b386b-125">**Azure China:**</span></span><br> <span data-ttu-id="b386b-126">login.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="b386b-126">login.chinacloudapi.cn:443</span></span><br><br><span data-ttu-id="b386b-127">**Azure per enti pubblici statunitensi:**</span><span class="sxs-lookup"><span data-stu-id="b386b-127">**Azure US Government:**</span></span><br> <span data-ttu-id="b386b-128">login-us.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="b386b-128">login-us.microsoftonline.com:443</span></span><br><br><span data-ttu-id="b386b-129">**Azure per la Germania:**</span><span class="sxs-lookup"><span data-stu-id="b386b-129">**Azure Germany:**</span></span><br> <span data-ttu-id="b386b-130">login.microsoftonline.de:443</span><span class="sxs-lookup"><span data-stu-id="b386b-130">login.microsoftonline.de:443</span></span><br><br> <span data-ttu-id="b386b-131">e</span><span class="sxs-lookup"><span data-stu-id="b386b-131">and</span></span> <br><span data-ttu-id="b386b-132">login.live.com:443</span><span class="sxs-lookup"><span data-stu-id="b386b-132">login.live.com:443</span></span> |
| <span data-ttu-id="b386b-133">Utente o entità servizio utilizzando un account aziendale o dell'istituto di istruzione con Azure Active Directory (ad esempio, user@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="b386b-133">User or service principal using a work or school account with Azure AD (for example, user@contoso.com)</span></span> |<span data-ttu-id="b386b-134">**Globale:**</span><span class="sxs-lookup"><span data-stu-id="b386b-134">**Global:**</span></span><br> <span data-ttu-id="b386b-135">login.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="b386b-135">login.microsoftonline.com:443</span></span><br><br> <span data-ttu-id="b386b-136">**Azure per la Cina:**</span><span class="sxs-lookup"><span data-stu-id="b386b-136">**Azure China:**</span></span><br> <span data-ttu-id="b386b-137">login.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="b386b-137">login.chinacloudapi.cn:443</span></span><br><br><span data-ttu-id="b386b-138">**Azure per enti pubblici statunitensi:**</span><span class="sxs-lookup"><span data-stu-id="b386b-138">**Azure US Government:**</span></span><br> <span data-ttu-id="b386b-139">login-us.microsoftonline.com:443</span><span class="sxs-lookup"><span data-stu-id="b386b-139">login-us.microsoftonline.com:443</span></span><br><br><span data-ttu-id="b386b-140">**Azure per la Germania:**</span><span class="sxs-lookup"><span data-stu-id="b386b-140">**Azure Germany:**</span></span><br> <span data-ttu-id="b386b-141">login.microsoftonline.de:443</span><span class="sxs-lookup"><span data-stu-id="b386b-141">login.microsoftonline.de:443</span></span> |
| <span data-ttu-id="b386b-142">Utente o entità servizio utilizzando un lavoro o account dell'istituto di istruzione, oltre a Active Directory Federation Services (ADFS) o altri endpoint federato (ad esempio, user@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="b386b-142">User or service principal using a work or school account, plus Active Directory Federation Services (AD FS) or other federated endpoint (for example, user@contoso.com)</span></span> |<span data-ttu-id="b386b-143">Tutti gli endpoint per un account aziendale o dell'istituto di istruzione oltre ad AD FS o altri endpoint federati</span><span class="sxs-lookup"><span data-stu-id="b386b-143">All endpoints for a work or school account, plus AD FS or other federated endpoints</span></span> |

<span data-ttu-id="b386b-144">Esistono altri possibili scenari complessi.</span><span class="sxs-lookup"><span data-stu-id="b386b-144">There are other possible complex scenarios.</span></span> <span data-ttu-id="b386b-145">Fare riferimento troppo[flusso l'autenticazione di Azure Active Directory](/documentation/articles/active-directory-authentication-scenarios/), [integrazione di applicazioni con Azure Active Directory](/documentation/articles/active-directory-integrating-applications/), e [protocolli di autenticazione di Active Directory](https://msdn.microsoft.com/library/azure/dn151124.aspx) Per ulteriori informazioni.</span><span class="sxs-lookup"><span data-stu-id="b386b-145">Refer too[Azure Active Directory Authentication Flow](/documentation/articles/active-directory-authentication-scenarios/), [Integrating Applications with Azure Active Directory](/documentation/articles/active-directory-integrating-applications/), and [Active Directory Authentication Protocols](https://msdn.microsoft.com/library/azure/dn151124.aspx) for additional information.</span></span>  

## <a name="key-vault-management"></a><span data-ttu-id="b386b-146">Gestione dell'insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="b386b-146">Key Vault management</span></span>
<span data-ttu-id="b386b-147">Per la gestione di insieme di credenziali chiave (CRUD e l'impostazione di criteri di accesso), un'applicazione client insieme di credenziali chiave hello deve tooaccess un endpoint di gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="b386b-147">For Key Vault management (CRUD and setting access policy), hello key vault client application needs tooaccess an Azure Resource Manager endpoint.</span></span>  

| <span data-ttu-id="b386b-148">Tipo di operazione</span><span class="sxs-lookup"><span data-stu-id="b386b-148">Type of operation</span></span> | <span data-ttu-id="b386b-149">Endpoint:porta</span><span class="sxs-lookup"><span data-stu-id="b386b-149">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="b386b-150">Operazioni del piano di controllo dell'insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="b386b-150">Key Vault control plane operations</span></span><br> <span data-ttu-id="b386b-151">tramite Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="b386b-151">via Azure Resource Manager</span></span> |<span data-ttu-id="b386b-152">**Globale:**</span><span class="sxs-lookup"><span data-stu-id="b386b-152">**Global:**</span></span><br> <span data-ttu-id="b386b-153">management.azure.com:443</span><span class="sxs-lookup"><span data-stu-id="b386b-153">management.azure.com:443</span></span><br><br> <span data-ttu-id="b386b-154">**Azure per la Cina:**</span><span class="sxs-lookup"><span data-stu-id="b386b-154">**Azure China:**</span></span><br> <span data-ttu-id="b386b-155">management.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="b386b-155">management.chinacloudapi.cn:443</span></span><br><br> <span data-ttu-id="b386b-156">**Azure per enti pubblici statunitensi:**</span><span class="sxs-lookup"><span data-stu-id="b386b-156">**Azure US Government:**</span></span><br> <span data-ttu-id="b386b-157">management.usgovcloudapi.net:443</span><span class="sxs-lookup"><span data-stu-id="b386b-157">management.usgovcloudapi.net:443</span></span><br><br> <span data-ttu-id="b386b-158">**Azure per la Germania:**</span><span class="sxs-lookup"><span data-stu-id="b386b-158">**Azure Germany:**</span></span><br> <span data-ttu-id="b386b-159">management.microsoftazure.de:443</span><span class="sxs-lookup"><span data-stu-id="b386b-159">management.microsoftazure.de:443</span></span> |
| <span data-ttu-id="b386b-160">API Graph di Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="b386b-160">Azure Active Directory Graph API</span></span> |<span data-ttu-id="b386b-161">**Globale:**</span><span class="sxs-lookup"><span data-stu-id="b386b-161">**Global:**</span></span><br> <span data-ttu-id="b386b-162">graph.windows.net:443</span><span class="sxs-lookup"><span data-stu-id="b386b-162">graph.windows.net:443</span></span><br><br> <span data-ttu-id="b386b-163">**Azure per la Cina:**</span><span class="sxs-lookup"><span data-stu-id="b386b-163">**Azure China:**</span></span><br> <span data-ttu-id="b386b-164">graph.chinacloudapi.cn:443</span><span class="sxs-lookup"><span data-stu-id="b386b-164">graph.chinacloudapi.cn:443</span></span><br><br> <span data-ttu-id="b386b-165">**Azure per enti pubblici statunitensi:**</span><span class="sxs-lookup"><span data-stu-id="b386b-165">**Azure US Government:**</span></span><br> <span data-ttu-id="b386b-166">graph.windows.net:443</span><span class="sxs-lookup"><span data-stu-id="b386b-166">graph.windows.net:443</span></span><br><br> <span data-ttu-id="b386b-167">**Azure per la Germania:**</span><span class="sxs-lookup"><span data-stu-id="b386b-167">**Azure Germany:**</span></span><br> <span data-ttu-id="b386b-168">graph.cloudapi.de:443</span><span class="sxs-lookup"><span data-stu-id="b386b-168">graph.cloudapi.de:443</span></span> |

## <a name="key-vault-operations"></a><span data-ttu-id="b386b-169">Operazioni dell'insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="b386b-169">Key Vault operations</span></span>
<span data-ttu-id="b386b-170">Per la gestione di oggetti (chiavi e segreti) insieme di credenziali chiave e le operazioni di crittografia, il client di insieme di credenziali chiave hello deve endpoint insieme di credenziali chiave di tooaccess hello.</span><span class="sxs-lookup"><span data-stu-id="b386b-170">For all key vault object (keys and secrets) management and cryptographic operations, hello key vault client needs tooaccess hello key vault endpoint.</span></span> <span data-ttu-id="b386b-171">suffisso DNS di endpoint Hello varia a seconda della posizione di hello di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="b386b-171">hello endpoint DNS suffix varies depending on hello location of your key vault.</span></span> <span data-ttu-id="b386b-172">endpoint dell'insieme di credenziali chiave Hello è in formato hello *nome insieme di credenziali*. *suffisso dns di specifico area*, come descritto in hello nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="b386b-172">hello key vault endpoint is of hello format *vault-name*.*region-specific-dns-suffix*, as described in hello following table.</span></span>  

| <span data-ttu-id="b386b-173">Tipo di operazione</span><span class="sxs-lookup"><span data-stu-id="b386b-173">Type of operation</span></span> | <span data-ttu-id="b386b-174">Endpoint:porta</span><span class="sxs-lookup"><span data-stu-id="b386b-174">Endpoint:port</span></span> |
| --- | --- |
| <span data-ttu-id="b386b-175">Operazioni come crittografia sulle chiavi; creazione, lettura, aggiornamento ed eliminazione di chiavi e segreti; impostazione o definizione di tag e altri attributi per gli oggetti dell'insieme di credenziali delle chiavi (chiavi o segreti)</span><span class="sxs-lookup"><span data-stu-id="b386b-175">Operations including cryptographic operations on keys; creating, reading, updating, and deleting keys and secrets; setting or getting tags and other attributes on key vault objects (keys or secrets)</span></span> |<span data-ttu-id="b386b-176">**Globale:**</span><span class="sxs-lookup"><span data-stu-id="b386b-176">**Global:**</span></span><br> <span data-ttu-id="b386b-177">&lt;nome-insiemecredenziali&gt;.vault.azure.net:443</span><span class="sxs-lookup"><span data-stu-id="b386b-177">&lt;vault-name&gt;.vault.azure.net:443</span></span><br><br> <span data-ttu-id="b386b-178">**Azure per la Cina:**</span><span class="sxs-lookup"><span data-stu-id="b386b-178">**Azure China:**</span></span><br> <span data-ttu-id="b386b-179">&lt;nome-insiemecredenziali&gt;.vault.azure.cn:443</span><span class="sxs-lookup"><span data-stu-id="b386b-179">&lt;vault-name&gt;.vault.azure.cn:443</span></span><br><br> <span data-ttu-id="b386b-180">**Azure per enti pubblici statunitensi:**</span><span class="sxs-lookup"><span data-stu-id="b386b-180">**Azure US Government:**</span></span><br> <span data-ttu-id="b386b-181">&lt;nome-insiemecredenziali&gt;.vault.usgovcloudapi.net:443</span><span class="sxs-lookup"><span data-stu-id="b386b-181">&lt;vault-name&gt;.vault.usgovcloudapi.net:443</span></span><br><br> <span data-ttu-id="b386b-182">**Azure per la Germania:**</span><span class="sxs-lookup"><span data-stu-id="b386b-182">**Azure Germany:**</span></span><br> <span data-ttu-id="b386b-183">&lt;nome-insiemecredenziali&gt;.vault.microsoftazure.de:443</span><span class="sxs-lookup"><span data-stu-id="b386b-183">&lt;vault-name&gt;.vault.microsoftazure.de:443</span></span> |

## <a name="ip-address-ranges"></a><span data-ttu-id="b386b-184">Intervalli di indirizzi IP</span><span class="sxs-lookup"><span data-stu-id="b386b-184">IP address ranges</span></span>
<span data-ttu-id="b386b-185">servizio insieme di credenziali chiave Hello Usa altre risorse di Azure come infrastruttura PaaS.</span><span class="sxs-lookup"><span data-stu-id="b386b-185">hello Key Vault service uses other Azure resources like PaaS infrastructure.</span></span> <span data-ttu-id="b386b-186">È pertanto possibile tooprovide un specifico intervallo di indirizzi IP che insieme di credenziali chiave gli endpoint del servizio avrà in qualsiasi momento particolare.</span><span class="sxs-lookup"><span data-stu-id="b386b-186">So it's not possible tooprovide a specific range of IP addresses that Key Vault service endpoints will have at any particular time.</span></span> <span data-ttu-id="b386b-187">Se il firewall supporta solo gli intervalli di indirizzi IP, fare riferimento toohello [intervalli IP Data Center di Microsoft Azure](https://www.microsoft.com/download/details.aspx?id=41653) documento.</span><span class="sxs-lookup"><span data-stu-id="b386b-187">If your firewall supports only IP address ranges, refer toohello [Microsoft Azure Datacenter IP Ranges](https://www.microsoft.com/download/details.aspx?id=41653) document.</span></span> <span data-ttu-id="b386b-188">Per l'autenticazione e identità (Azure Active Directory), l'applicazione deve essere in grado di tooconnect toohello endpoint descritti in [gli indirizzi di autenticazione e identità](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span><span class="sxs-lookup"><span data-stu-id="b386b-188">For authentication and identity (Azure Active Directory), your application must be able tooconnect toohello endpoints described in [Authentication and identity addresses](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b386b-189">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="b386b-189">Next steps</span></span>
<span data-ttu-id="b386b-190">In caso di domande sull'insieme di credenziali chiave, visitare hello [forum di insieme di credenziali chiave di Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureKeyVault).</span><span class="sxs-lookup"><span data-stu-id="b386b-190">If you have questions about Key Vault, visit hello [Azure Key Vault Forums](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureKeyVault).</span></span>

