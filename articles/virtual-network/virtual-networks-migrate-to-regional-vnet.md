---
title: "una rete virtuale di Azure (classica) da un'area del gruppo di affinità tooa aaaMigrate | Documenti Microsoft"
description: "Informazioni su come toomigrate una rete virtuale (classica) da un'affinità gruppo tooa area."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: 
tags: azure-service-management
ms.assetid: 84febcb9-bb8b-4e79-ab91-865ad9de41cb
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/15/2016
ms.author: jdial
ms.openlocfilehash: e3a5c0f21e748912e29e2e8d03f4295720e63637
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-a-virtual-network-classic-from-an-affinity-group-tooa-region"></a><span data-ttu-id="9fa5f-103">Eseguire la migrazione di una rete virtuale (classico) da un'area del gruppo di affinità tooa</span><span class="sxs-lookup"><span data-stu-id="9fa5f-103">Migrate a virtual network (classic) from an affinity group tooa region</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9fa5f-104">Azure offre due diversi modelli di distribuzione per creare e usare le risorse: [Gestione risorse e la distribuzione classica](../resource-manager-deployment-model.md?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="9fa5f-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and classic](../resource-manager-deployment-model.md?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> <span data-ttu-id="9fa5f-105">In questo articolo viene illustrato l'utilizzo del modello di distribuzione classica hello.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-105">This article covers using hello classic deployment model.</span></span> <span data-ttu-id="9fa5f-106">Si consiglia di utilizzano modello di distribuzione di gestione risorse di hello più nuove distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-106">Microsoft recommends that most new deployments use hello Resource Manager deployment model.</span></span>

<span data-ttu-id="9fa5f-107">Gruppi di affinità assicurarsi che le risorse create all'interno di hello stesso gruppo di affinità fisicamente ospitate dai server che sono vicini, abilitazione toocommunicate queste risorse più veloce.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-107">Affinity groups ensure that resources created within hello same affinity group are physically hosted by servers that are close together, enabling these resources toocommunicate quicker.</span></span> <span data-ttu-id="9fa5f-108">In hello precedente, i gruppi di affinità rappresentavano un requisito per la creazione di reti virtuali (classico).</span><span class="sxs-lookup"><span data-stu-id="9fa5f-108">In hello past, affinity groups were a requirement for creating virtual networks (classic).</span></span> <span data-ttu-id="9fa5f-109">In quel momento, servizio di gestione di rete hello gestito reti virtuali (classico) poteva funzionare solo all'interno di un set di server fisici o unità di scala.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-109">At that time, hello network manager service that managed virtual networks (classic) could only work within a set of physical servers or scale unit.</span></span> <span data-ttu-id="9fa5f-110">Miglioramenti architettonici hanno aumentato ambito hello dell'area tooa gestione di rete.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-110">Architectural improvements have increased hello scope of network management tooa region.</span></span>

<span data-ttu-id="9fa5f-111">A seguito di questi miglioramenti, i gruppi di affinità non sono più consigliati o necessari per le reti virtuali (classiche).</span><span class="sxs-lookup"><span data-stu-id="9fa5f-111">As a result of these architectural improvements, affinity groups are no longer recommended, or required for virtual networks (classic).</span></span> <span data-ttu-id="9fa5f-112">utilizzo di Hello di gruppi di affinità per le reti virtuali (classico) viene sostituito dalle aree.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-112">hello use of affinity groups for virtual networks (classic) is replaced by regions.</span></span> <span data-ttu-id="9fa5f-113">Le reti virtuali (classiche) associate alle aree prendono il nome di reti virtuali a livello di area.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-113">Virtual networks (classic) that are associated with regions are called regional virtual networks.</span></span>

<span data-ttu-id="9fa5f-114">L'uso dei gruppi di affinità non è consigliabile in generale.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-114">We recommend that you don't use affinity groups in general.</span></span> <span data-ttu-id="9fa5f-115">A parte i requisiti di rete virtuale hello, gruppi di affinità sono anche importanti toouse tooensure risorse, ad esempio di calcolo (classico) e di archiviazione (classico), sono stati inseriti uno vicino a altro.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-115">Aside from hello virtual network requirement, affinity groups were also important toouse tooensure resources, such as compute (classic) and storage (classic), were placed near each other.</span></span> <span data-ttu-id="9fa5f-116">Tuttavia, con l'architettura di rete di Azure corrente hello, questi requisiti di posizionamento non sono più necessari.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-116">However, with hello current Azure network architecture, these placement requirements are no longer necessary.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9fa5f-117">Sebbene sia ancora tecnicamente possibile toocreate una rete virtuale associata a un gruppo di affinità, non è pertanto interessanti toodo motivo.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-117">Although it is still technically possible toocreate a virtual network that is associated with an affinity group, there is no compelling reason toodo so.</span></span> <span data-ttu-id="9fa5f-118">Molte funzionalità delle reti virtuali, come i gruppi di sicurezza di rete, sono disponibili solo se si usa una rete virtuale a livello di area e non per le reti virtuali associate a gruppi di affinità.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-118">Many virtual network features, such as network security groups, are only available when using a regional virtual network, and are not available for virtual networks that are associated with affinity groups.</span></span>
> 
> 

## <a name="edit-hello-network-configuration-file"></a><span data-ttu-id="9fa5f-119">Modificare i file di configurazione di rete hello</span><span class="sxs-lookup"><span data-stu-id="9fa5f-119">Edit hello network configuration file</span></span>

1. <span data-ttu-id="9fa5f-120">Esportare i file di configurazione di rete hello.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-120">Export hello network configuration file.</span></span> <span data-ttu-id="9fa5f-121">toolearn come tooexport una configurazione di rete del file tramite PowerShell o hello Azure interfaccia della riga di comando (CLI) 1.0, vedere [configurare una rete virtuale usando un file di configurazione di rete](virtual-networks-using-network-configuration-file.md#export).</span><span class="sxs-lookup"><span data-stu-id="9fa5f-121">toolearn how tooexport a network configuration file using PowerShell or hello Azure command-line interface (CLI) 1.0, see [Configure a virtual network using a network configuration file](virtual-networks-using-network-configuration-file.md#export).</span></span>
2. <span data-ttu-id="9fa5f-122">Modificare i file di configurazione di rete hello, sostituendo **AffinityGroup** con **percorso**.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-122">Edit hello network configuration file, replacing **AffinityGroup** with **Location**.</span></span> <span data-ttu-id="9fa5f-123">Specificare un'[area](https://azure.microsoft.com/regions) di Azure per **Location**.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-123">You specify an Azure [region](https://azure.microsoft.com/regions) for **Location**.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="9fa5f-124">Hello **percorso** hello area specificata per il gruppo di affinità hello associata con la rete virtuale (classico).</span><span class="sxs-lookup"><span data-stu-id="9fa5f-124">hello **Location** is hello region that you specified for hello affinity group that is associated with your virtual network (classic).</span></span> <span data-ttu-id="9fa5f-125">Ad esempio, se la rete virtuale (classico) è associata a un gruppo di affinità che si trova negli Stati Uniti occidentali, quando esegue la migrazione, il **percorso** deve puntare tooWest Stati Uniti.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-125">For example, if your virtual network (classic) is associated with an affinity group that is located in West US, when you migrate, your **Location** must point tooWest US.</span></span> 
   > 
   > 
   
    <span data-ttu-id="9fa5f-126">Modificare hello dopo le righe nel file di configurazione di rete, la sostituzione di valori hello con valori personalizzati:</span><span class="sxs-lookup"><span data-stu-id="9fa5f-126">Edit hello following lines in your network configuration file, replacing hello values with your own:</span></span> 
   
    <span data-ttu-id="9fa5f-127">**Valore precedente:** \<VirtualNetworkSitename="VNetUSWest" AffinityGroup="VNetDemoAG"\></span><span class="sxs-lookup"><span data-stu-id="9fa5f-127">**Old value:** \<VirtualNetworkSitename="VNetUSWest" AffinityGroup="VNetDemoAG"\></span></span> 
   
    <span data-ttu-id="9fa5f-128">**Nuovo valore:**\<VirtualNetworkSitename="VNetUSWest" Location="West US"\></span><span class="sxs-lookup"><span data-stu-id="9fa5f-128">**New value:** \<VirtualNetworkSitename="VNetUSWest" Location="West US"\></span></span>
3. <span data-ttu-id="9fa5f-129">Salvare le modifiche e [importare](virtual-networks-using-network-configuration-file.md#import) hello tooAzure di configurazione di rete.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-129">Save your changes and [import](virtual-networks-using-network-configuration-file.md#import) hello network configuration tooAzure.</span></span>

> [!NOTE]
> <span data-ttu-id="9fa5f-130">Questa migrazione non provoca alcun tempo di inattività tooyour servizi.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-130">This migration does NOT cause any downtime tooyour services.</span></span>
> 
> 

## <a name="what-toodo-if-you-have-a-vm-classic-in-an-affinity-group"></a><span data-ttu-id="9fa5f-131">Quali toodo se si dispone di una macchina virtuale (classico) in un gruppo di affinità</span><span class="sxs-lookup"><span data-stu-id="9fa5f-131">What toodo if you have a VM (classic) in an affinity group</span></span>
<span data-ttu-id="9fa5f-132">Le macchine virtuali (classiche) che sono attualmente in un gruppo di affinità non è necessario toobe rimosso dal gruppo di affinità hello.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-132">VMs (classic) that are currently in an affinity group do not need toobe removed from hello affinity group.</span></span> <span data-ttu-id="9fa5f-133">Una volta distribuita, una macchina virtuale è distribuita tooa singola unità di scala.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-133">Once a VM is deployed, it is deployed tooa single scale unit.</span></span> <span data-ttu-id="9fa5f-134">Gruppi di affinità possono limitare il set di hello di dimensioni di macchine Virtuali disponibili per una nuova distribuzione di macchina virtuale, ma qualsiasi macchina virtuale esistente distribuita è già limitato set toohello della macchina virtuale di dimensioni disponibili in unità di scala hello in cui hello macchina virtuale viene distribuita.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-134">Affinity groups can restrict hello set of available VM sizes for a new VM deployment, but any existing VM that is deployed is already restricted toohello set of VM sizes available in hello scale unit in which hello VM is deployed.</span></span> <span data-ttu-id="9fa5f-135">Poiché hello che macchina virtuale è già distribuita tooa unità di scala, la rimozione di una macchina virtuale da un gruppo di affinità non ha alcun effetto su hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="9fa5f-135">Because hello VM is already deployed tooa scale unit, removing a VM from an affinity group has no effect on hello VM.</span></span>
