---
title: Autenticazione e autorizzazione per app per le API nel servizio app di Azure | Documentazione Microsoft
description: Informazioni sui servizi di autenticazione e autorizzazione forniti dal servizio app di Azure per app per le API.
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: d620b53a-5a6f-41c9-84c7-f7ef5ff02ae7
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: alkarche
ms.openlocfilehash: f9fd533dfbd54517232f9dae5000ed4779baebd4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="authentication-and-authorization-for-api-apps-in-azure-app-service"></a><span data-ttu-id="22576-103">Autenticazione e autorizzazione per app per le API nel servizio app di Azure</span><span class="sxs-lookup"><span data-stu-id="22576-103">Authentication and authorization for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="22576-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="22576-104">Overview</span></span>
> [!NOTE]
> <span data-ttu-id="22576-105">Questo argomento verrà trasferito in un unico argomento [Autenticazione/autorizzazione del servizio app](../app-service/app-service-authentication-overview.md) , che illustra l'autenticazione e l'autorizzazione per app Web, app per dispositivi mobili e app per le API.</span><span class="sxs-lookup"><span data-stu-id="22576-105">This topic will be migrated to a consolidated [App Service Authentication / Authorization](../app-service/app-service-authentication-overview.md) topic, which covers Web, Mobile, and API Apps.</span></span>
> 
> 

<span data-ttu-id="22576-106">Il servizio app di Azure offre servizi di autenticazione e autorizzazione predefiniti che implementano [OAuth 2.0](#oauth) e [OpenID Connect](#oauth).</span><span class="sxs-lookup"><span data-stu-id="22576-106">Azure App Service offers built-in authentication and authorization services that implement [OAuth 2.0](#oauth) and [OpenID Connect](#oauth).</span></span> <span data-ttu-id="22576-107">Questo articolo descrive i servizi e le opzioni disponibili per le app per le API nel servizio app di Azure.</span><span class="sxs-lookup"><span data-stu-id="22576-107">This article describes the services and options that are available for API Apps in Azure App Service.</span></span>

<span data-ttu-id="22576-108">Il diagramma seguente illustra alcune caratteristiche chiave dell'autenticazione del servizio app:</span><span class="sxs-lookup"><span data-stu-id="22576-108">The following diagram illustrates some key characteristics of App Service authentication:</span></span>

* <span data-ttu-id="22576-109">Pre-elabora le richieste API in ingresso, quindi usa qualsiasi linguaggio o framework supportato dal servizio app.</span><span class="sxs-lookup"><span data-stu-id="22576-109">It preprocesses incoming API requests, which means it works with any language or framework supported by App Service.</span></span>
* <span data-ttu-id="22576-110">Offre diverse opzioni per la quantità di autenticazione da eseguire nel proprio codice.</span><span class="sxs-lookup"><span data-stu-id="22576-110">It gives you several options for how much authentication work you want to do in your own code.</span></span>
* <span data-ttu-id="22576-111">Funziona per l'autenticazione sia dell'utente finale che dell'account del servizio.</span><span class="sxs-lookup"><span data-stu-id="22576-111">It works for both end user and service account authentication.</span></span> 
* <span data-ttu-id="22576-112">Supporta cinque provider di identità: Azure Active Directory, Facebook, Google, Twitter e account Microsoft.</span><span class="sxs-lookup"><span data-stu-id="22576-112">It supports five identity providers: Azure Active Directory, Facebook, Google, Twitter, and Microsoft Account.</span></span>
* <span data-ttu-id="22576-113">Presenta lo stesso funzionamento per le app per le API, le app Web e le app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="22576-113">It works the same for API Apps, Web Apps, and Mobile Apps.</span></span>

![](./media/app-service-api-authentication/api-apps-overview.png)

## <a name="language-agnostic"></a><span data-ttu-id="22576-114">Indipendente dal linguaggio</span><span class="sxs-lookup"><span data-stu-id="22576-114">Language agnostic</span></span>
<span data-ttu-id="22576-115">L'elaborazione dell'autenticazione del servizio app viene eseguita prima che le richieste raggiungano l'app per le API, ciò significa che le funzionalità di autenticazione sono compatibili con app per le API scritte in qualsiasi linguaggio o framework.</span><span class="sxs-lookup"><span data-stu-id="22576-115">App Service authentication processing happens before requests reach your API app, which means that the authentication features work for API apps written in any language or framework.</span></span>  <span data-ttu-id="22576-116">L'API può essere basata su ASP.NET, Java, Node.js o qualsiasi framework che supporta il servizio app.</span><span class="sxs-lookup"><span data-stu-id="22576-116">Your API can be based on ASP.NET, Java, Node.js, or any framework that App Service supports.</span></span>

<span data-ttu-id="22576-117">Il servizio app passa il token Web JSON (JWT) nell'intestazione dell'autorizzazione di una richiesta HTTP e il codice scritto in qualsiasi linguaggio o framework può ottenere le informazioni necessarie dal token.</span><span class="sxs-lookup"><span data-stu-id="22576-117">App Service passes on the JSON web token (JWT) in the Authorization header of an HTTP request, and code written in any language or framework can get the information it needs from the token.</span></span> <span data-ttu-id="22576-118">Il servizio app permette anche di accedere più facilmente alle attestazioni più usate impostando alcune intestazioni speciali, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="22576-118">In addition, App Service gives you easier access to the most commonly used claims by setting some special headers, such as the following:</span></span>

* <span data-ttu-id="22576-119">X-MS-CLIENT-PRINCIPAL-NAME</span><span class="sxs-lookup"><span data-stu-id="22576-119">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="22576-120">X-MS-CLIENT-PRINCIPAL-ID</span><span class="sxs-lookup"><span data-stu-id="22576-120">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="22576-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="22576-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="22576-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="22576-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="22576-123">In un'API .NET è possibile usare l'attributo `Authorize` e per l'autorizzazione con granularità fine è possibile scrivere facilmente codice basato su attestazioni, perché le informazioni sulle attestazioni sono popolate automaticamente nelle classi .NET.</span><span class="sxs-lookup"><span data-stu-id="22576-123">In a .NET API, you can use the `Authorize` attribute, and for fine-grained authorization you can easily write code based on claims because claims information is populated for you in .NET classes.</span></span>

## <a name="multiple-protection-options"></a><span data-ttu-id="22576-124">Opzioni di protezione multiple</span><span class="sxs-lookup"><span data-stu-id="22576-124">Multiple protection options</span></span>
<span data-ttu-id="22576-125">Il servizio app può impedire alle richieste HTTP anonime di raggiungere l'app per le API, può passare tutte le richieste e convalidare i token per le richieste che li includono oppure può accettare tutte le richieste senza eseguire alcuna azione su di esse:</span><span class="sxs-lookup"><span data-stu-id="22576-125">App Service can prevent anonymous HTTP requests from reaching your API app, it can pass on all requests and validate tokens for requests that include them, or it can let through all requests without taking any action on them:</span></span>

1. <span data-ttu-id="22576-126">Consentire solo alle richieste autenticate di raggiungere l'app per le API.</span><span class="sxs-lookup"><span data-stu-id="22576-126">Allow only authenticated requests to reach your API app.</span></span>
   
    <span data-ttu-id="22576-127">Se una richiesta anonima viene ricevuta da un browser, il servizio app la reindirizzerà alla pagina di accesso per il provider di autenticazione scelto, ad esempio Azure Active Directory, Google, Twitter e così via.</span><span class="sxs-lookup"><span data-stu-id="22576-127">If an anonymous request is received from a browser, App Service will redirect to a logon page for the authentication provider (Azure AD, Google, Twitter, etc.) that you choose.</span></span> 
   
    <span data-ttu-id="22576-128">Con questa opzione non è necessario scrivere codice di autenticazione nell'app e il codice di autorizzazione risulta semplificato perché le attestazioni più importanti sono fornite nelle intestazioni HTTP.</span><span class="sxs-lookup"><span data-stu-id="22576-128">With this option, you don't need to write any authentication code at all in your app, and authorization code is simplified because the most important claims are provided in the HTTP headers.</span></span>
2. <span data-ttu-id="22576-129">Consentire a tutte le richieste di raggiungere l'app per le API, ma convalidare le richieste autenticate e passare le informazioni di autenticazione nelle intestazioni HTTP.</span><span class="sxs-lookup"><span data-stu-id="22576-129">Allow all requests to reach your API app, but validate authenticated requests and pass along authentication information in the HTTP headers.</span></span>
   
    <span data-ttu-id="22576-130">Questa opzione offre maggiore flessibilità nella gestione delle richieste anonime, ma è necessario scrivere codice se si vuole impedire agli utenti anonimi di usare l'API.</span><span class="sxs-lookup"><span data-stu-id="22576-130">This option gives you more flexibility in handling anonymous requests, but you have to write code if you want to prevent anonymous users from using your API.</span></span> <span data-ttu-id="22576-131">Poiché le attestazioni più diffuse vengono passate nelle intestazioni delle richieste HTTP, il codice di autorizzazione è relativamente semplice.</span><span class="sxs-lookup"><span data-stu-id="22576-131">Since the most popular claims are passed in the headers of HTTP requests, authorization code is relatively simple.</span></span>
3. <span data-ttu-id="22576-132">Consentire a tutte le richieste di raggiungere l'API e non eseguire alcuna operazione sulle informazioni di autenticazione nelle richieste.</span><span class="sxs-lookup"><span data-stu-id="22576-132">Allow all requests to reach your API, take no action on authentication information in the requests.</span></span>
   
    <span data-ttu-id="22576-133">Questa opzione lascia le attività di autenticazione e autorizzazione interamente al codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="22576-133">This option leaves the tasks of authentication and authorization entirely up to your application code.</span></span>

<span data-ttu-id="22576-134">Le opzioni sono selezionabili nel pannello [Autenticazione/Autorizzazione](https://portal.azure.com/)del **portale di Azure** .</span><span class="sxs-lookup"><span data-stu-id="22576-134">In the [Azure portal](https://portal.azure.com/), you select the option you want on the **Authentication / Authorization** blade.</span></span>

![](./media/app-service-api-authentication/authblade.png)

<span data-ttu-id="22576-135">Per le opzioni 1 e 2, attivare l'**autenticazione del servizio app** e scegliere **Accedi** o **Consenti richiesta (nessuna azione)** nell'elenco a discesa **Azione da eseguire quando la richiesta non è autenticata**.</span><span class="sxs-lookup"><span data-stu-id="22576-135">For options 1 and 2, turn on **App Service Authentication**, and in the **Action to take when request is not authenticated** drop-down list choose **Log in** or **Allow request (no action)**.</span></span>  <span data-ttu-id="22576-136">Se si seleziona **Accedi**, è necessario scegliere un provider di autenticazione e configurarlo.</span><span class="sxs-lookup"><span data-stu-id="22576-136">If you choose **Log in**, you have to choose an authentication provider and configure that provider.</span></span>

![](./media/app-service-api-authentication/actiontotake.png)

<span data-ttu-id="22576-137">Per informazioni dettagliate sulla configurazione dell'autenticazione, vedere [Come configurare un'applicazione del servizio app per usare l'account di accesso di Azure Active Directory](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="22576-137">For detailed information about how to configure authentication, see [How to configure your App Service application to use Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="22576-138">L'articolo si applica alle app per le API, nonché alle app per dispositivi mobili e vengono forniti collegamenti ad altri articoli relativi ad altri provider di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="22576-138">The article applies to API apps as well as mobile apps, and it links to other articles for the other authentication providers.</span></span>

## <span data-ttu-id="22576-139"><a id="internal"></a> Autenticazione dell'account del servizio</span><span class="sxs-lookup"><span data-stu-id="22576-139"><a id="internal"></a> Service account authentication</span></span>
<span data-ttu-id="22576-140">L'autenticazione del servizio app funziona per gli scenari interni, ad esempio per la chiamata da un'app per le API a un'altra.</span><span class="sxs-lookup"><span data-stu-id="22576-140">App Service authentication works for internal scenarios such as for calling from one API app to another API app.</span></span> <span data-ttu-id="22576-141">In questo scenario si ottiene un token usando le credenziali per un account del servizio invece delle credenziali dell'utente finale.</span><span class="sxs-lookup"><span data-stu-id="22576-141">In this scenario you get a token by using credentials for a service account instead of end user credentials.</span></span> <span data-ttu-id="22576-142">Un account del servizio è noto anche come *entità servizio* in Azure Active Directory e l'autenticazione che usa un account di questo tipo è nota anche come scenario da servizio a servizio.</span><span class="sxs-lookup"><span data-stu-id="22576-142">A service account is also known as a *service principal* in Azure Active Directory, and authentication using such an account is also known as a service-to-service scenario.</span></span> 

<span data-ttu-id="22576-143">Per gli scenari da servizio a servizio, proteggere l'app per le API chiamata usando Azure Active Directory e fornire un token AAD di autorizzazione dell'entità servizio durante la chiamata all'app per le API.</span><span class="sxs-lookup"><span data-stu-id="22576-143">For service-to-service scenarios, protect the called API app by using Azure Active Directory, and provide an AAD service principal authorization token when you call the API app.</span></span> <span data-ttu-id="22576-144">Per ottenere un token, è possibile fornire l'ID client e il segreto client dell'applicazione AAD.</span><span class="sxs-lookup"><span data-stu-id="22576-144">You get a token by providing the client ID and client secret from the AAD application.</span></span> <span data-ttu-id="22576-145">Non è necessario alcun codice speciale di Azure, come quello usato per la gestione del token zumo dei servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="22576-145">No special Azure-only code is required, such as used to be true for handling the Mobile Services Zumo token.</span></span> <span data-ttu-id="22576-146">Un esempio di questo scenario che usa le app per le API ASP.NET è illustrato nell'esercitazione [Autenticazione dell'entità servizio per app per le API](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="22576-146">An example of this scenario using ASP.NET API apps is covered by the tutorial [Service principal authentication for API Apps](app-service-api-dotnet-service-principal-auth.md).</span></span>

<span data-ttu-id="22576-147">Per gestire uno scenario da servizio a servizio senza l'autenticazione del servizio app, è possibile usare i certificati client o l'autenticazione di base.</span><span class="sxs-lookup"><span data-stu-id="22576-147">If you want to handle a service-to-service scenario without using App Service authentication, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="22576-148">Per informazioni sui certificati client in Azure, vedere [Come configurare l'autenticazione reciproca TLS per un'app Web](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="22576-148">For information about client certificates in Azure, see [How To Configure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="22576-149">Per informazioni sull'autenticazione di base in ASP.NET, vedere il blog sui [filtri di autenticazione nell'API Web 2 ASP.NET](http://www.asp.net/web-api/overview/security/authentication-filters).</span><span class="sxs-lookup"><span data-stu-id="22576-149">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="22576-150">L'autenticazione dell'account da un'app per la logica del servizio app per un'app per le API è un caso speciale ed è illustrata nell'articolo [Uso dell'API personalizzata ospitata nel servizio app con App per la logica](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="22576-150">Service account authentication from an App Service logic app to an API app is a special case that is explained in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <a name="mobile-client-authentication"></a><span data-ttu-id="22576-151">Autenticazione dei client per dispositivi mobili</span><span class="sxs-lookup"><span data-stu-id="22576-151">Mobile client authentication</span></span>
<span data-ttu-id="22576-152">Per informazioni su come gestire l'autenticazione dai client per dispositivi mobili, vedere la [documentazione sull'autenticazione per le app per dispositivi mobili](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span><span class="sxs-lookup"><span data-stu-id="22576-152">For information about how to handle authentication from mobile clients, see the [documentation on authentication for mobile apps](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span></span> <span data-ttu-id="22576-153">L'autenticazione del servizio app funziona allo stesso modo per le app per dispositivi mobili e per le app per le API.</span><span class="sxs-lookup"><span data-stu-id="22576-153">App Service authentication works the same way for mobile apps and API apps.</span></span>

## <a name="more-information"></a><span data-ttu-id="22576-154">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="22576-154">More information</span></span>
<span data-ttu-id="22576-155">Per altre informazioni su autenticazione e autorizzazione nel servizio app di Azure, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="22576-155">For more information about authentication and authorization in Azure App Service, see the following resources:</span></span>

* [<span data-ttu-id="22576-156">Espansione dell'autenticazione/autorizzazione del servizio App</span><span class="sxs-lookup"><span data-stu-id="22576-156">Expanding App Service authentication / authorization</span></span>](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/)
* <span data-ttu-id="22576-157">[Come configurare un'applicazione del servizio app per usare l'account di accesso di Azure Active Directory](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md). Include collegamenti per altri provider di autenticazione nella parte superiore della pagina.</span><span class="sxs-lookup"><span data-stu-id="22576-157">[How to configure your App Service application to use Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (Includes links for other authentication providers at the top of the page.)</span></span> 

<span data-ttu-id="22576-158">Per altre informazioni su OAuth 2.0, OpenID Connect e i token Web JSON (JWT), vedere le risorse seguenti.</span><span class="sxs-lookup"><span data-stu-id="22576-158">For more information about OAuth 2.0, OpenID Connect, and JSON Web Tokens (JWT), see the following resources.</span></span>

* [<span data-ttu-id="22576-159">Introduzione a OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="22576-159">Getting started with OAuth 2.0</span></span>](http://shop.oreilly.com/product/0636920021810.do "Getting Started with OAuth 2.0") 
* [<span data-ttu-id="22576-160">Introduzione a OAuth2, OpenID Connect e JSON Web Tokens (JWT) - corso PluralSight</span><span class="sxs-lookup"><span data-stu-id="22576-160">Introduction to OAuth2, OpenID Connect and JSON Web Tokens (JWT) - Pluralsight Course</span></span>](http://www.pluralsight.com/courses/oauth2-json-web-tokens-openid-connect-introduction) 
* [<span data-ttu-id="22576-161">Creazione e protezione di un'API RESTful per più client in ASP.NET - corso PluralSight</span><span class="sxs-lookup"><span data-stu-id="22576-161">Building and Securing a RESTful API for Multiple Clients in ASP.NET - Pluralsight course</span></span>](http://www.pluralsight.com/courses/building-securing-restful-api-aspdotnet)

<span data-ttu-id="22576-162">Per altre informazioni su Azure Active Directory, vedere le risorse seguenti.</span><span class="sxs-lookup"><span data-stu-id="22576-162">For more information about Azure Active Directory, see the following resources.</span></span>

* [<span data-ttu-id="22576-163">Scenari per Azure AD</span><span class="sxs-lookup"><span data-stu-id="22576-163">Azure AD scenarios</span></span>](http://aka.ms/aadscenarios)
* [<span data-ttu-id="22576-164">Guida per sviluppatori Azure AD</span><span class="sxs-lookup"><span data-stu-id="22576-164">Azure AD developers' guide</span></span>](http://aka.ms/aaddev)
* [<span data-ttu-id="22576-165">Esempi di Azure AD</span><span class="sxs-lookup"><span data-stu-id="22576-165">Azure AD samples</span></span>](http://aka.ms/aadsamples)

## <a name="next-steps"></a><span data-ttu-id="22576-166">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="22576-166">Next steps</span></span>
<span data-ttu-id="22576-167">Questo articolo ha illustrato le funzionalità di autenticazione e autorizzazione del servizio app che è possibile usare per le app per le API.</span><span class="sxs-lookup"><span data-stu-id="22576-167">This article has explained authentication and authorization features of App Service that you can use for API apps.</span></span> <span data-ttu-id="22576-168">La prossima esercitazione della serie introduttiva illustra come implementare l’ [autenticazione utente per le app per le API nel servizio app di Azure](app-service-api-dotnet-user-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="22576-168">The next tutorial in the getting started series shows how to implement [user authentication in App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span></span>

