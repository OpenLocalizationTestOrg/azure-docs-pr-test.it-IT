---
title: aaaMy primo PowerShell runbook in automazione di Azure | Documenti Microsoft
description: Esercitazione viene illustrata la creazione di hello, test e la pubblicazione di un runbook semplice di PowerShell.
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: Azure PowerShell, esercitazione sugli script di PowerShell, automazione di PowerShell
ms.assetid: a43b395a-e740-41a3-ae62-40eac9d0ec00
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;sngun
ms.openlocfilehash: abff94abe666cd8423c35b970b4162ba9247bcf8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="my-first-powershell-runbook"></a><span data-ttu-id="e3113-104">Il primo runbook PowerShell</span><span class="sxs-lookup"><span data-stu-id="e3113-104">My first PowerShell runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="e3113-105">Grafico</span><span class="sxs-lookup"><span data-stu-id="e3113-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="e3113-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="e3113-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="e3113-107">Flusso di lavoro PowerShell</span><span class="sxs-lookup"><span data-stu-id="e3113-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="e3113-108">In questa esercitazione viene illustrata la creazione hello di un [runbook PowerShell](automation-runbook-types.md#powershell-runbooks) in automazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="e3113-108">This tutorial walks you through hello creation of a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) in Azure Automation.</span></span> <span data-ttu-id="e3113-109">Si inizia con un runbook semplice test e pubblicare mentre spiegheremo come tootrack hello lo stato di processo del runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-109">We start with a simple runbook that we test and publish while we explain how tootrack hello status of hello runbook job.</span></span> <span data-ttu-id="e3113-110">È modificare runbook hello tooactually Gestione risorse di Azure, in questo caso, avviare una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="e3113-110">Then we modify hello runbook tooactually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="e3113-111">Infine, si rende hello runbook più affidabile mediante l'aggiunta di parametri del runbook.</span><span class="sxs-lookup"><span data-stu-id="e3113-111">Lastly, we make hello runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="e3113-112">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="e3113-112">Prerequisites</span></span>
<span data-ttu-id="e3113-113">toocomplete questa esercitazione, è necessario hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="e3113-113">toocomplete this tutorial, you need hello following:</span></span>

* <span data-ttu-id="e3113-114">Sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="e3113-114">Azure subscription.</span></span> <span data-ttu-id="e3113-115">Se non si ha ancora una sottoscrizione, è possibile [attivare i vantaggi della sottoscrizione MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) oppure <a href="/pricing/free-account/" target="_blank">[iscriversi per ottenere un account gratuito](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="e3113-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="e3113-116">[Account di automazione](automation-sec-configure-azure-runas-account.md) toohold hello runbook ed eseguire l'autenticazione tooAzure risorse.</span><span class="sxs-lookup"><span data-stu-id="e3113-116">[Automation account](automation-sec-configure-azure-runas-account.md) toohold hello runbook and authenticate tooAzure resources.</span></span>  <span data-ttu-id="e3113-117">Questo account deve disporre dell'autorizzazione toostart e arrestare la macchina virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-117">This account must have permission toostart and stop hello virtual machine.</span></span>
* <span data-ttu-id="e3113-118">Macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="e3113-118">An Azure virtual machine.</span></span> <span data-ttu-id="e3113-119">La macchina virtuale viene arrestata e avviata, quindi non deve essere una macchina virtuale di produzione.</span><span class="sxs-lookup"><span data-stu-id="e3113-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="e3113-120">Passaggio 1: Creare nuovo runbook</span><span class="sxs-lookup"><span data-stu-id="e3113-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="e3113-121">Si inizierà creando un runbook semplice che restituisce testo hello *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="e3113-121">We'll start by creating a simple runbook that outputs hello text *Hello World*.</span></span>

1. <span data-ttu-id="e3113-122">Nel portale di Azure hello, aprire l'account di automazione.</span><span class="sxs-lookup"><span data-stu-id="e3113-122">In hello Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="e3113-123">pagina account di automazione Hello offre una rapida panoramica delle risorse hello in questo account.</span><span class="sxs-lookup"><span data-stu-id="e3113-123">hello Automation account page gives you a quick view of hello resources in this account.</span></span> <span data-ttu-id="e3113-124">Dovrebbero essere già disponibili alcuni asset.</span><span class="sxs-lookup"><span data-stu-id="e3113-124">You should already have some assets.</span></span> <span data-ttu-id="e3113-125">La maggior parte di questi sono i moduli di hello che vengono inclusi automaticamente in un nuovo account di automazione.</span><span class="sxs-lookup"><span data-stu-id="e3113-125">Most of those are hello modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="e3113-126">È inoltre necessario avere asset delle credenziali hello menzionato in hello [prerequisiti](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="e3113-126">You should also have hello Credential asset that's mentioned in hello [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="e3113-127">Fare clic su hello **runbook** riquadro tooopen hello elenco di runbook.</span><span class="sxs-lookup"><span data-stu-id="e3113-127">Click hello **Runbooks** tile tooopen hello list of runbooks.</span></span><br><br> <span data-ttu-id="e3113-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span></span>  
3. <span data-ttu-id="e3113-129">Creare un nuovo runbook, fare clic su hello **aggiungere un runbook** pulsante e quindi **creare un nuovo runbook**.</span><span class="sxs-lookup"><span data-stu-id="e3113-129">Create a new runbook by clicking hello **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="e3113-130">Nome di hello runbook hello *MyFirstRunbook PowerShell*.</span><span class="sxs-lookup"><span data-stu-id="e3113-130">Give hello runbook hello name *MyFirstRunbook-PowerShell*.</span></span>
5. <span data-ttu-id="e3113-131">In questo caso, verrà toocreate un [runbook PowerShell](automation-runbook-types.md#powershell-runbooks) pertanto selezionare **Powershell** per **tipo Runbook**.</span><span class="sxs-lookup"><span data-stu-id="e3113-131">In this case, we're going toocreate a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) so select **Powershell** for **Runbook type**.</span></span><br><br> <span data-ttu-id="e3113-132">![Tipo di runbook](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-132">![Runbook Type](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span></span>  
6. <span data-ttu-id="e3113-133">Fare clic su **crea** toocreate hello runbook ed editor di testo hello aperto.</span><span class="sxs-lookup"><span data-stu-id="e3113-133">Click **Create** toocreate hello runbook and open hello textual editor.</span></span>

## <a name="step-2---add-code-toohello-runbook"></a><span data-ttu-id="e3113-134">Passaggio 2: aggiungere codice toohello runbook</span><span class="sxs-lookup"><span data-stu-id="e3113-134">Step 2 - Add code toohello runbook</span></span>
<span data-ttu-id="e3113-135">È possibile scrivere codice di tipo direttamente nel runbook hello, o è possibile selezionare i cmdlet, i runbook e le risorse da hello controllo della raccolta e li aggiunto toohello runbook con i parametri correlati.</span><span class="sxs-lookup"><span data-stu-id="e3113-135">You can either type code directly into hello runbook, or you can select cmdlets, runbooks, and assets from hello Library control and have them added toohello runbook with any related parameters.</span></span> <span data-ttu-id="e3113-136">Questa procedura dettagliata, si digita direttamente nel runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-136">For this walkthrough, we type directly in hello runbook.</span></span>

1. <span data-ttu-id="e3113-137">Il runbook è attualmente vuoto, digitare *Write-Output "Hello World"*.</span><span class="sxs-lookup"><span data-stu-id="e3113-137">Our runbook is currently empty, type *Write-Output "Hello World."*.</span></span><br><br> <span data-ttu-id="e3113-138">![Hello World](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-138">![Hello World](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span></span>  
2. <span data-ttu-id="e3113-139">Salvare il runbook hello facendo **salvare**.</span><span class="sxs-lookup"><span data-stu-id="e3113-139">Save hello runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="e3113-140">![Pulsante Salva](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-140">![Save Button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span></span>  

## <a name="step-3---test-hello-runbook"></a><span data-ttu-id="e3113-141">Passaggio 3: Test hello runbook</span><span class="sxs-lookup"><span data-stu-id="e3113-141">Step 3 - Test hello runbook</span></span>
<span data-ttu-id="e3113-142">Prima Pubblichiamo toomake runbook hello è disponibile nell'ambiente di produzione, è necessario tootest è toomake assicurarsi che funzioni correttamente.</span><span class="sxs-lookup"><span data-stu-id="e3113-142">Before we publish hello runbook toomake it available in production, we want tootest it toomake sure that it works properly.</span></span> <span data-ttu-id="e3113-143">Quando si testa un runbook, è necessario eseguire la versione **Bozza** e visualizzarne l'output in modo interattivo.</span><span class="sxs-lookup"><span data-stu-id="e3113-143">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="e3113-144">Fare clic su **riquadro Test** riquadro Test di tooopen hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-144">Click **Test pane** tooopen hello Test pane.</span></span><br><br> <span data-ttu-id="e3113-145">![Test Pane](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-145">![Test Pane](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span></span>  
2. <span data-ttu-id="e3113-146">Fare clic su **avviare** test hello toostart.</span><span class="sxs-lookup"><span data-stu-id="e3113-146">Click **Start** toostart hello test.</span></span> <span data-ttu-id="e3113-147">Deve trattarsi di opzione hello solo abilitato.</span><span class="sxs-lookup"><span data-stu-id="e3113-147">This should be hello only enabled option.</span></span>
3. <span data-ttu-id="e3113-148">Viene creato un [processo del runbook](automation-runbook-execution.md) e il relativo stato viene visualizzato.</span><span class="sxs-lookup"><span data-stu-id="e3113-148">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="e3113-149">lo stato del processo Hello viene avviato come *in coda* che indica che è in attesa per un runbook worker in hello cloud toocome disponibili.</span><span class="sxs-lookup"><span data-stu-id="e3113-149">hello job status starts as *Queued* indicating that it is waiting for a runbook worker in hello cloud toocome available.</span></span> <span data-ttu-id="e3113-150">Verranno quindi spostati troppo*iniziale* quando un thread di lavoro attestazioni processo hello e quindi *esecuzione* quando runbook hello effettivamente avviata l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="e3113-150">It will then move too*Starting* when a worker claims hello job, and then *Running* when hello runbook actually starts running.</span></span>  
4. <span data-ttu-id="e3113-151">Al termine del processo del runbook hello, viene visualizzato l'output.</span><span class="sxs-lookup"><span data-stu-id="e3113-151">When hello runbook job completes, its output is displayed.</span></span> <span data-ttu-id="e3113-152">In questo caso, dovrebbe essere visualizzato *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="e3113-152">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="e3113-153">![Output del Riquadro test](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-153">![Test Pane Output](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span></span>  
5. <span data-ttu-id="e3113-154">Chiudere l'area di disegno hello Test riquadro tooreturn toohello.</span><span class="sxs-lookup"><span data-stu-id="e3113-154">Close hello Test pane tooreturn toohello canvas.</span></span>

## <a name="step-4---publish-and-start-hello-runbook"></a><span data-ttu-id="e3113-155">Passaggio 4: pubblicare e avviare runbook hello</span><span class="sxs-lookup"><span data-stu-id="e3113-155">Step 4 - Publish and start hello runbook</span></span>
<span data-ttu-id="e3113-156">runbook Hello creata è ancora in modalità bozza.</span><span class="sxs-lookup"><span data-stu-id="e3113-156">hello runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="e3113-157">È necessario toopublish prima di poterlo eseguire nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="e3113-157">We need toopublish it before we can run it in production.</span></span>  <span data-ttu-id="e3113-158">Quando si pubblica un runbook, con la versione bozza hello sovrascrivere versione hello già pubblicata.</span><span class="sxs-lookup"><span data-stu-id="e3113-158">When you publish a runbook, you overwrite hello existing Published version with hello Draft version.</span></span>  <span data-ttu-id="e3113-159">In questo caso, non abbiamo una versione pubblicata ancora poiché runbook hello appena creato.</span><span class="sxs-lookup"><span data-stu-id="e3113-159">In our case, we don't have a Published version yet because we just created hello runbook.</span></span>

1. <span data-ttu-id="e3113-160">Fare clic su **pubblica** toopublish hello runbook e quindi **Sì** quando richiesto.</span><span class="sxs-lookup"><span data-stu-id="e3113-160">Click **Publish** toopublish hello runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="e3113-161">![Pulsante Publish](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-161">![Publish button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span></span>  
2. <span data-ttu-id="e3113-162">Se si scorre tooview sinistro hello runbook hello **runbook** riquadro a questo punto, verrà visualizzato un **stato di creazione** di **pubblicato**.</span><span class="sxs-lookup"><span data-stu-id="e3113-162">If you scroll left tooview hello runbook in hello **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="e3113-163">Riquadro destro tooview hello toohello indietro di scorrimento per **MyFirstRunbook PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="e3113-163">Scroll back toohello right tooview hello pane for **MyFirstRunbook-PowerShell**.</span></span>  
   <span data-ttu-id="e3113-164">Hello opzioni in alto hello consentono toostart hello runbook, visualizzare hello runbook, pianificarlo toostart in un momento nel futuro hello o creare un [webhook](automation-webhooks.md) in modo da poter essere avviato tramite una chiamata HTTP.</span><span class="sxs-lookup"><span data-stu-id="e3113-164">hello options across hello top allow us toostart hello runbook, view hello runbook, schedule it toostart at some time in hello future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="e3113-165">Si desidera toostart hello runbook, quindi fare clic su **avviare** e quindi fare clic su **Ok** quando si apre Pannello avvia Runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-165">We want toostart hello runbook, so click **Start** and then click **Ok** when hello Start Runbook blade opens.</span></span><br><br> <span data-ttu-id="e3113-166">![Pulsante Avvia](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-166">![Start button](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span></span><br>    
5. <span data-ttu-id="e3113-167">Il riquadro di un processo viene aperto per il processo di runbook hello creati.</span><span class="sxs-lookup"><span data-stu-id="e3113-167">A job pane is opened for hello runbook job that we created.</span></span> <span data-ttu-id="e3113-168">È possibile chiudere questo riquadro, ma in questo caso viene lasciato aperto in modo è possibile controllare lo stato di avanzamento del processo di hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-168">We can close this pane, but in this case we leave it open so we can watch hello job's progress.</span></span>
6. <span data-ttu-id="e3113-169">viene visualizzato lo stato del processo Hello in **riepilogo** e corrispondenze hello gli Stati che abbiamo visto quando è stato testato hello runbook.</span><span class="sxs-lookup"><span data-stu-id="e3113-169">hello job status is shown in **Job Summary** and matches hello statuses that we saw when we tested hello runbook.</span></span><br><br> <span data-ttu-id="e3113-170">![Riepilogo dei processi](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-170">![Job Summary](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span></span><br>  
7. <span data-ttu-id="e3113-171">Una volta hello Mostra lo stato runbook *completato*, fare clic su **Output**.</span><span class="sxs-lookup"><span data-stu-id="e3113-171">Once hello runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="e3113-172">viene aperto il riquadro di Output di Hello e possiamo vedere nostri *Hello World*.</span><span class="sxs-lookup"><span data-stu-id="e3113-172">hello Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="e3113-173">![Output processo](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-173">![Job Output](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span></span><br> 
8. <span data-ttu-id="e3113-174">Riquadro di Output di hello Chiudi.</span><span class="sxs-lookup"><span data-stu-id="e3113-174">Close hello Output pane.</span></span>
9. <span data-ttu-id="e3113-175">Fare clic su **tutti i log** tooopen hello flussi riquadro processo del runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-175">Click **All Logs** tooopen hello Streams pane for hello runbook job.</span></span> <span data-ttu-id="e3113-176">Solo dovremmo vedere *Hello World* nell'output di hello flusso, tuttavia questa operazione consente di visualizzare i flussi per un processo del runbook, ad esempio dettagliati e di errore se runbook hello scrive toothem.</span><span class="sxs-lookup"><span data-stu-id="e3113-176">We should only see *Hello World* in hello output stream, but this can show other streams for a runbook job such as Verbose and Error if hello runbook writes toothem.</span></span><br><br> <span data-ttu-id="e3113-177">![Tutti i log](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-177">![All Logs](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span></span><br>   
10. <span data-ttu-id="e3113-178">Chiudere il riquadro di flussi hello e hello processo tooreturn toohello MyFirstRunbook PowerShell un riquadro.</span><span class="sxs-lookup"><span data-stu-id="e3113-178">Close hello Streams pane and hello Job pane tooreturn toohello MyFirstRunbook-PowerShell pane.</span></span>
11. <span data-ttu-id="e3113-179">Fare clic su **processi** riquadro processi di hello tooopen per questo runbook.</span><span class="sxs-lookup"><span data-stu-id="e3113-179">Click **Jobs** tooopen hello Jobs pane for this runbook.</span></span> <span data-ttu-id="e3113-180">Elenca tutti i processi di hello creati da questo runbook.</span><span class="sxs-lookup"><span data-stu-id="e3113-180">This lists all of hello jobs created by this runbook.</span></span> <span data-ttu-id="e3113-181">Dovremmo vedere solo un processo elencato in quanto è solo esecuzione hello processo una volta.</span><span class="sxs-lookup"><span data-stu-id="e3113-181">We should only see one job listed since we only ran hello job once.</span></span><br><br> <span data-ttu-id="e3113-182">![Elenco processi](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-182">![Job List](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span></span>  
12. <span data-ttu-id="e3113-183">È possibile fare clic su questo processo tooopen hello stesso riquadro processo che abbiamo visto quando è stato avviato il runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-183">You can click this job tooopen hello same Job pane that we viewed when we started hello runbook.</span></span> <span data-ttu-id="e3113-184">In questo modo si toogo indietro nel tempo e visualizzarne i dettagli di hello di qualsiasi processo che è stato creato per un runbook specifico.</span><span class="sxs-lookup"><span data-stu-id="e3113-184">This allows you toogo back in time and view hello details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-toomanage-azure-resources"></a><span data-ttu-id="e3113-185">Passaggio 5: aggiungere l'autenticazione toomanage risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="e3113-185">Step 5 - Add authentication toomanage Azure resources</span></span>
<span data-ttu-id="e3113-186">Il runbook è stato testato e pubblicato, ma finora non esegue alcuna attività utile.</span><span class="sxs-lookup"><span data-stu-id="e3113-186">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="e3113-187">Vogliamo toohave Gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="e3113-187">We want toohave it manage Azure resources.</span></span> <span data-ttu-id="e3113-188">Non sarà in grado di toodo che anche se a meno che non è necessario autenticare utilizzando credenziali hello cui hello tooin [prerequisiti](#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="e3113-188">It won't be able toodo that though unless we have it authenticate using hello credentials that are referred tooin hello [prerequisites](#prerequisites).</span></span> <span data-ttu-id="e3113-189">Facciamo con hello **Aggiungi AzureRmAccount** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="e3113-189">We do that with hello **Add-AzureRmAccount** cmdlet.</span></span>

1. <span data-ttu-id="e3113-190">Editor di testo hello aprire facendo clic su **modifica** nel riquadro di hello MyFirstRunbook PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e3113-190">Open hello textual editor by clicking **Edit** on hello MyFirstRunbook-PowerShell pane.</span></span><br><br> <span data-ttu-id="e3113-191">![Modifica runbook](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-191">![Edit Runbook](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span></span><br>   
2. <span data-ttu-id="e3113-192">Non è necessario hello **Write-Output** più di riga, faccio, quindi eliminarlo.</span><span class="sxs-lookup"><span data-stu-id="e3113-192">We don't need hello **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="e3113-193">Digitare o copiare e incollare hello seguente di codice che gestisce l'autenticazione con l'account RunAs automazione hello:</span><span class="sxs-lookup"><span data-stu-id="e3113-193">Type or copy and paste hello following code that handles hello authentication with your Automation Run As account:</span></span>
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
   <br>
4. <span data-ttu-id="e3113-194">Fare clic su **riquadro Test** in modo che sia possibile testare il runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-194">Click **Test pane** so that we can test hello runbook.</span></span>
5. <span data-ttu-id="e3113-195">Fare clic su **avviare** test hello toostart.</span><span class="sxs-lookup"><span data-stu-id="e3113-195">Click **Start** toostart hello test.</span></span> <span data-ttu-id="e3113-196">Una volta che è stata completata, si dovrebbe ricevere toohello simili di output seguente, la visualizzazione di informazioni di base dal proprio account.</span><span class="sxs-lookup"><span data-stu-id="e3113-196">Once it completes, you should receive output similar toohello following, displaying basic information from your account.</span></span> <span data-ttu-id="e3113-197">Questo conferma che credenziali hello sono valido.</span><span class="sxs-lookup"><span data-stu-id="e3113-197">This confirms that hello credential is valid.</span></span><br><br> <span data-ttu-id="e3113-198">![Autentica](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-198">![Authenticate](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-toostart-a-virtual-machine"></a><span data-ttu-id="e3113-199">Passaggio 6: aggiungere codice toostart una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="e3113-199">Step 6 - Add code toostart a virtual machine</span></span>
<span data-ttu-id="e3113-200">Ora che il runbook esegue l'autenticazione tooour sottoscrizione di Azure, è possibile gestire le risorse.</span><span class="sxs-lookup"><span data-stu-id="e3113-200">Now that our runbook is authenticating tooour Azure subscription, we can manage resources.</span></span> <span data-ttu-id="e3113-201">Aggiungere un toostart comando una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="e3113-201">We add a command toostart a virtual machine.</span></span> <span data-ttu-id="e3113-202">È possibile scegliere qualsiasi macchina virtuale nella sottoscrizione di Azure e per il momento verranno impostare come hardcoded tale nome nei runbook hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-202">You can pick any virtual machine in your Azure subscription, and for now we will hardcode that name in hello runbook.</span></span>

1. <span data-ttu-id="e3113-203">Dopo aver *Aggiungi AzureRmAccount*, tipo *inizio AzureRmVM-Name 'VMName' - ResourceGroupName 'NameofResourceGroup'* fornendo hello nome e il nome di gruppo di risorse di hello toostart di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="e3113-203">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing hello name and Resource Group name of hello virtual machine toostart.</span></span>  
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   ```
   <br>
2. <span data-ttu-id="e3113-204">Salvare il runbook hello e quindi fare clic su **riquadro Test** in modo che è possibile eseguirne il test.</span><span class="sxs-lookup"><span data-stu-id="e3113-204">Save hello runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="e3113-205">Fare clic su **avviare** test hello toostart.</span><span class="sxs-lookup"><span data-stu-id="e3113-205">Click **Start** toostart hello test.</span></span> <span data-ttu-id="e3113-206">Una volta che è stata completata, verificare che la macchina virtuale hello è stata avviata.</span><span class="sxs-lookup"><span data-stu-id="e3113-206">Once it completes, check that hello virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-toohello-runbook"></a><span data-ttu-id="e3113-207">Passaggio 7: aggiungere un runbook toohello parametro di input</span><span class="sxs-lookup"><span data-stu-id="e3113-207">Step 7 - Add an input parameter toohello runbook</span></span>
<span data-ttu-id="e3113-208">Il runbook viene avviato attualmente hello virtuale del computer che è hardcoded hello runbook, ma sarebbe più utile se si specifica macchina virtuale hello quando hello runbook viene avviato.</span><span class="sxs-lookup"><span data-stu-id="e3113-208">Our runbook currently starts hello virtual machine that we hardcoded in hello runbook, but it would be more useful if we specify hello virtual machine when hello runbook is started.</span></span> <span data-ttu-id="e3113-209">A questo punto sarà necessario aggiungere parametri di input toohello runbook tooprovide tale funzionalità.</span><span class="sxs-lookup"><span data-stu-id="e3113-209">We will now add input parameters toohello runbook tooprovide that functionality.</span></span>

1. <span data-ttu-id="e3113-210">Aggiungere parametri per *VMName* e *ResourceGroupName* toohello runbook e utilizzare queste variabili con hello **inizio AzureRmVM** cmdlet come esempio hello seguente.</span><span class="sxs-lookup"><span data-stu-id="e3113-210">Add parameters for *VMName* and *ResourceGroupName* toohello runbook and use these variables with hello **Start-AzureRmVM** cmdlet as in hello example below.</span></span>  
   
   ```
   Param(
    [string]$VMName,
    [string]$ResourceGroupName
   )
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   ```
   <br>
2. <span data-ttu-id="e3113-211">Salvare il runbook hello e aprire il riquadro di Test hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-211">Save hello runbook and open hello Test pane.</span></span> <span data-ttu-id="e3113-212">È ora possibile fornire valori per hello due variabili di input utilizzati nel test hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-212">You can now provide values for hello two input variables that are used in hello test.</span></span>
3. <span data-ttu-id="e3113-213">Riquadro Test hello Chiudi.</span><span class="sxs-lookup"><span data-stu-id="e3113-213">Close hello Test pane.</span></span>
4. <span data-ttu-id="e3113-214">Fare clic su **pubblica** la nuova versione hello toopublish di hello runbook.</span><span class="sxs-lookup"><span data-stu-id="e3113-214">Click **Publish** toopublish hello new version of hello runbook.</span></span>
5. <span data-ttu-id="e3113-215">Arrestare la macchina virtuale hello che è stato avviato nel passaggio precedente hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-215">Stop hello virtual machine that you started in hello previous step.</span></span>
6. <span data-ttu-id="e3113-216">Fare clic su **avviare** toostart hello runbook.</span><span class="sxs-lookup"><span data-stu-id="e3113-216">Click **Start** toostart hello runbook.</span></span> <span data-ttu-id="e3113-217">Tipo di hello **VMName** e **ResourceGroupName** per la macchina virtuale hello che sarà toostart.</span><span class="sxs-lookup"><span data-stu-id="e3113-217">Type in hello **VMName** and **ResourceGroupName** for hello virtual machine that you're going toostart.</span></span><br><br> <span data-ttu-id="e3113-218">![Passare i parametri](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="e3113-218">![Pass Parameter](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="e3113-219">Al termine del processo di runbook hello, verificare che la macchina virtuale hello è stata avviata.</span><span class="sxs-lookup"><span data-stu-id="e3113-219">When hello runbook completes, check that hello virtual machine was started.</span></span>

## <a name="differences-from-powershell-workflow"></a><span data-ttu-id="e3113-220">Differenze rispetto al flusso di lavoro PowerShell</span><span class="sxs-lookup"><span data-stu-id="e3113-220">Differences from PowerShell Workflow</span></span>
<span data-ttu-id="e3113-221">I runbook di PowerShell sono hello stesso ciclo di vita, funzionalità e la gestione come runbook del flusso di lavoro di PowerShell, ma esistono alcune differenze e limitazioni:</span><span class="sxs-lookup"><span data-stu-id="e3113-221">PowerShell runbooks have hello same lifecycle, capabilities, and management as PowerShell Workflow runbooks but there are some differences and limitations:</span></span>

1. <span data-ttu-id="e3113-222">Esecuzione dei runbook di PowerShell tooPowerShell confrontati veloce runbook del flusso di lavoro come non dispongono di passaggio di compilazione.</span><span class="sxs-lookup"><span data-stu-id="e3113-222">PowerShell runbooks run fast compared tooPowerShell Workflow runbooks as they don’t have compilation step.</span></span>
2. <span data-ttu-id="e3113-223">Runbook del flusso di lavoro di PowerShell supporta i checkpoint, utilizzare i checkpoint, i runbook del flusso di lavoro di PowerShell possono riprendere da qualsiasi punto nel runbook hello mentre runbook PowerShell è possibile riprendere solo dall'inizio hello.</span><span class="sxs-lookup"><span data-stu-id="e3113-223">PowerShell Workflow runbooks support checkpoints, using checkpoints, PowerShell Workflow runbooks can resume from any point in hello runbook whereas PowerShell runbooks can only resume from hello beginning.</span></span>
3. <span data-ttu-id="e3113-224">I runbook Flusso di lavoro PowerShell supportano l'esecuzione seriale e parallela, mentre i runbook PowerShell possono eseguire i comandi solo in modo seriale.</span><span class="sxs-lookup"><span data-stu-id="e3113-224">PowerShell Workflow runbooks support parallel and serial execution whereas PowerShell runbooks can only execute commands serially.</span></span>
4. <span data-ttu-id="e3113-225">In un runbook Flusso di lavoro PowerShell un'attività, un comando o un blocco di script può avere un proprio spazio di esecuzione, mentre in un runbook PowerShell tutti gli elementi in uno script vengono eseguiti in un singolo spazio di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="e3113-225">In a PowerShell Workflow runbook, an activity, a command, or a script block can have its own runspace whereas in a PowerShell runbook, everything in a script runs in a single runspace.</span></span> <span data-ttu-id="e3113-226">Esistono anche [differenze di sintassi](https://technet.microsoft.com/magazine/dn151046.aspx) tra un runbook PowerShell nativo e un runbook Flusso di lavoro PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e3113-226">There are also some [syntactic differences](https://technet.microsoft.com/magazine/dn151046.aspx) between a native PowerShell runbook and a PowerShell Workflow runbook.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e3113-227">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="e3113-227">Next steps</span></span>
* <span data-ttu-id="e3113-228">tooget avviato con runbook grafici, vedere [il primo runbook grafico](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="e3113-228">tooget started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="e3113-229">tooget avviato con runbook del flusso di lavoro di PowerShell, vedere [il primo runbook del flusso di lavoro di PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="e3113-229">tooget started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>
* <span data-ttu-id="e3113-230">tooknow ulteriori informazioni sui tipi di runbook, i relativi vantaggi e limitazioni, vedere [tipi di runbook di automazione di Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="e3113-230">tooknow more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="e3113-231">Per altre informazioni sulla funzionalità di supporto degli script PowerShell, vedere il blog relativo al [supporto di script PowerShell nativi in Automazione di Azure](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="e3113-231">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>

