### <a name="open-tcp-ports-in-the-windows-firewall-for-the-default-instance-of-the-database-engine"></a><span data-ttu-id="58c09-101">Aprire le porte TCP in Windows Firewall per l'istanza predefinita del motore di database</span><span class="sxs-lookup"><span data-stu-id="58c09-101">Open TCP ports in the Windows firewall for the default instance of the Database Engine</span></span>
1. <span data-ttu-id="58c09-102">Connettersi alla macchina virtuale tramite Desktop remoto.</span><span class="sxs-lookup"><span data-stu-id="58c09-102">Connect to the virtual machine with Remote Desktop.</span></span> <span data-ttu-id="58c09-103">Per istruzioni dettagliate sulla connessione alla macchina virtuale, vedere [Aprire la macchina virtuale tramite Desktop remoto](../articles/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-server-provision.md#open-the-vm-with-remote-desktop).</span><span class="sxs-lookup"><span data-stu-id="58c09-103">For detailed instructions on connecting to the VM, see [Open a SQL VM with Remote Desktop](../articles/virtual-machines/windows/sql/virtual-machines-windows-portal-sql-server-provision.md#open-the-vm-with-remote-desktop).</span></span>
2. <span data-ttu-id="58c09-104">Una volta effettuato l'accesso, nella schermata Start digitare **WF.msc**e premere INVIO.</span><span class="sxs-lookup"><span data-stu-id="58c09-104">Once logged in, at the Start screen, type **WF.msc**, and then hit ENTER.</span></span>
   
    ![Avviare Windows Firewall](./media/virtual-machines-sql-server-connection-steps/12Open-WF.png)
3. <span data-ttu-id="58c09-106">In **Windows Firewall con protezione avanzata**, nel riquadro sinistro fare clic con il pulsante destro del mouse su **Regole in ingresso** e quindi fare clic su **Nuova regola** nel riquadro Azioni.</span><span class="sxs-lookup"><span data-stu-id="58c09-106">In the **Windows Firewall with Advanced Security**, in the left pane, right-click **Inbound Rules**, and then click **New Rule** in the action pane.</span></span>
   
    ![Nuova regola](./media/virtual-machines-sql-server-connection-steps/13New-FW-Rule.png)
4. <span data-ttu-id="58c09-108">Nella finestra di dialogo **Creazione guidata nuova regola connessioni in entrata** nella sezione **Tipo di regola** selezionare **Porta** e quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="58c09-108">In the **New Inbound Rule Wizard** dialog box, under **Rule Type**, select **Port**, and then click **Next**.</span></span>
5. <span data-ttu-id="58c09-109">Nella finestra di dialogo **Protocollo e porte** usare il valore predefinito per **TCP**.</span><span class="sxs-lookup"><span data-stu-id="58c09-109">In the **Protocol and Ports** dialog, use the default **TCP**.</span></span> <span data-ttu-id="58c09-110">Selezionare la casella **Porte locali specifiche** e quindi digitare il numero di porta dell'istanza del motore di database (**1433** per l'istanza predefinita o il numero di porta specificato per la porta privata nel passaggio di creazione dell'endpoint).</span><span class="sxs-lookup"><span data-stu-id="58c09-110">In the **Specific local ports** box, then type the port number of the instance of the Database Engine (**1433** for the default instance or your choice for the private port in the endpoint step).</span></span>
   
    ![Porta TCP 1433](./media/virtual-machines-sql-server-connection-steps/14Port-1433.png)
6. <span data-ttu-id="58c09-112">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="58c09-112">Click **Next**.</span></span>
7. <span data-ttu-id="58c09-113">Nella finestra di dialogo **Azione** selezionare **Consenti la connessione** e quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="58c09-113">In the **Action** dialog box, select **Allow the connection**, and then click **Next**.</span></span>
   
    <span data-ttu-id="58c09-114">**Nota sulla sicurezza**: per un maggiore livello di sicurezza è possibile selezionare **Consenti solo connessioni protette**.</span><span class="sxs-lookup"><span data-stu-id="58c09-114">**Security Note:** Selecting **Allow the connection if it is secure** can provide additional security.</span></span> <span data-ttu-id="58c09-115">Selezionare questa opzione per configurare altre opzioni di sicurezza per l'ambiente in uso.</span><span class="sxs-lookup"><span data-stu-id="58c09-115">Select this option if you want to configure additional security options in your environment.</span></span>
   
    ![Consentire le connessioni](./media/virtual-machines-sql-server-connection-steps/15Allow-Connection.png)
8. <span data-ttu-id="58c09-117">Nella finestra di dialogo **Profilo** selezionare **Pubblico**, **Privato** e **Dominio**.</span><span class="sxs-lookup"><span data-stu-id="58c09-117">In the **Profile** dialog box, select **Public**, **Private**, and **Domain**.</span></span> <span data-ttu-id="58c09-118">Quindi fare clic su **Next**.</span><span class="sxs-lookup"><span data-stu-id="58c09-118">Then click **Next**.</span></span>
   
    <span data-ttu-id="58c09-119">**Nota sulla sicurezza:** la selezione di un profilo **Pubblico** consente l'accesso tramite Internet.</span><span class="sxs-lookup"><span data-stu-id="58c09-119">**Security Note:**  Selecting **Public** allows access over the internet.</span></span> <span data-ttu-id="58c09-120">Se possibile, scegliere un profilo più restrittivo.</span><span class="sxs-lookup"><span data-stu-id="58c09-120">Whenever possible, select a more restrictive profile.</span></span>
   
    ![Profilo Pubblico](./media/virtual-machines-sql-server-connection-steps/16Public-Private-Domain-Profile.png)
9. <span data-ttu-id="58c09-122">Nella finestra di dialogo **Nome** digitare un nome e una descrizione per la regola e quindi fare clic su **Fine**.</span><span class="sxs-lookup"><span data-stu-id="58c09-122">In the **Name** dialog box, type a name and description for this rule, and then click **Finish**.</span></span>
   
    ![Nome regola](./media/virtual-machines-sql-server-connection-steps/17Rule-Name.png)

<span data-ttu-id="58c09-124">Aprire altre porte per altri componenti in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="58c09-124">Open additional ports for other components as needed.</span></span> <span data-ttu-id="58c09-125">Per ulteriori informazioni, vedere [Configurare Windows Firewall per consentire l'accesso a SQL Server](http://msdn.microsoft.com/library/cc646023.aspx).</span><span class="sxs-lookup"><span data-stu-id="58c09-125">For more information, see [Configuring the Windows Firewall to Allow SQL Server Access](http://msdn.microsoft.com/library/cc646023.aspx).</span></span>

### <a name="configure-sql-server-to-listen-on-the-tcp-protocol"></a><span data-ttu-id="58c09-126">Configurare SQL Server per l'ascolto sul protocollo TCP</span><span class="sxs-lookup"><span data-stu-id="58c09-126">Configure SQL Server to listen on the TCP protocol</span></span>

[!INCLUDE [Enable TCP](virtual-machines-sql-server-connection-tcp-protocol.md)]

### <a name="configure-sql-server-for-mixed-mode-authentication"></a><span data-ttu-id="58c09-127">Configurare SQL Server per l'autenticazione in modalità mista</span><span class="sxs-lookup"><span data-stu-id="58c09-127">Configure SQL Server for mixed mode authentication</span></span>
<span data-ttu-id="58c09-128">Il motore di database di SQL Server non può utilizzare l'Autenticazione di Windows senza ambiente di dominio.</span><span class="sxs-lookup"><span data-stu-id="58c09-128">The SQL Server Database Engine cannot use Windows Authentication without domain environment.</span></span> <span data-ttu-id="58c09-129">Per connettersi al motore di database da un altro computer, configurare SQL Server per l'autenticazione in modalità mista.</span><span class="sxs-lookup"><span data-stu-id="58c09-129">To connect to the Database Engine from another computer, configure SQL Server for mixed mode authentication.</span></span> <span data-ttu-id="58c09-130">L'autenticazione in modalità mista consente sia l'autenticazione di SQL Server sia l'autenticazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="58c09-130">Mixed mode authentication allows both SQL Server Authentication and Windows Authentication.</span></span>

> [!NOTE]
> <span data-ttu-id="58c09-131">Se è stata configurata una Rete virtuale di Azure con un ambiente di dominio configurato, potrebbe non essere necessario configurare l'autenticazione in modalità mista.</span><span class="sxs-lookup"><span data-stu-id="58c09-131">Configuring mixed mode authentication might not be necessary if you have configured an Azure Virtual Network with a configured domain environment.</span></span>
> 
> 

1. <span data-ttu-id="58c09-132">Mentre si è connessi alla macchina virtuale, nella pagina iniziale digitare **SQL Server Management Studio** e fare clic sull'icona selezionata.</span><span class="sxs-lookup"><span data-stu-id="58c09-132">While connected to the virtual machine, on the Start page, type **SQL Server Management Studio** and click the selected icon.</span></span>
   
    <span data-ttu-id="58c09-133">Alla prima apertura di Management Studio è necessario creare gli utenti dell'ambiente Management Studio.</span><span class="sxs-lookup"><span data-stu-id="58c09-133">The first time you open Management Studio it must create the users Management Studio environment.</span></span> <span data-ttu-id="58c09-134">L'operazione potrebbe richiedere alcuni istanti.</span><span class="sxs-lookup"><span data-stu-id="58c09-134">This may take a few moments.</span></span>
2. <span data-ttu-id="58c09-135">Verrà visualizzata la finestra di dialogo **Connetti al server** di Management Studio.</span><span class="sxs-lookup"><span data-stu-id="58c09-135">Management Studio presents the **Connect to Server** dialog box.</span></span> <span data-ttu-id="58c09-136">Nella casella **Nome server** digitare il nome della macchina virtuale per la connessione al motore di database con Esplora oggetti; al posto del nome della macchina virtuale, per **Nome server** è anche possibile usare **(locale)** o un singolo punto.</span><span class="sxs-lookup"><span data-stu-id="58c09-136">In the **Server name** box, type the name of the virtual machine to connect to the Database Engine  with the Object Explorer (Instead of the virtual machine name you can also use **(local)** or a single period as the **Server name**).</span></span> <span data-ttu-id="58c09-137">Selezionare **Autenticazione di Windows** e lasciare ***nome_macchina_virtuale*\amministratore_locale** nella casella **Nome utente**.</span><span class="sxs-lookup"><span data-stu-id="58c09-137">Select **Windows Authentication**, and leave ***your_VM_name*\your_local_administrator** in the **User name** box.</span></span> <span data-ttu-id="58c09-138">Fare clic su **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="58c09-138">Click **Connect**.</span></span>
   
    ![Connetti al server](./media/virtual-machines-sql-server-connection-steps/19Connect-to-Server.png)
3. <span data-ttu-id="58c09-140">In Esplora oggetti di SQL Server Management Studio fare clic con il pulsante destro del mouse sul nome dell'istanza di SQL Server (nome della macchina virtuale) e quindi scegliere **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="58c09-140">In SQL Server Management Studio Object Explorer, right-click the name of the instance of SQL Server (the virtual machine name), and then click **Properties**.</span></span>
   
    ![Proprietà del server](./media/virtual-machines-sql-server-connection-steps/20Server-Properties.png)
4. <span data-ttu-id="58c09-142">Nella pagina **Sicurezza**, in **Autenticazione server** selezionare **Autenticazione di SQL Server e di Windows** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="58c09-142">On the **Security** page, under **Server authentication**, select **SQL Server and Windows Authentication mode**, and then click **OK**.</span></span>
   
    ![Selezione della modalità di autenticazione](./media/virtual-machines-sql-server-connection-steps/21Mixed-Mode.png)
5. <span data-ttu-id="58c09-144">Nella finestra di dialogo di SQL Server Management Studio fare clic su **OK** per confermare il requisito del riavvio di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="58c09-144">In the SQL Server Management Studio dialog box, click **OK** to acknowledge the requirement to restart SQL Server.</span></span>
6. <span data-ttu-id="58c09-145">In Esplora oggetti fare clic con il pulsante destro del mouse sul server e quindi scegliere **Riavvia**.</span><span class="sxs-lookup"><span data-stu-id="58c09-145">In Object Explorer, right-click your server, and then click **Restart**.</span></span> <span data-ttu-id="58c09-146">(Se SQL Server Agent è in esecuzione, anch'esso dovrà essere riavviato).</span><span class="sxs-lookup"><span data-stu-id="58c09-146">(If SQL Server Agent is running, it must also be restarted.)</span></span>
   
    ![Riavvia](./media/virtual-machines-sql-server-connection-steps/22Restart2.png)
7. <span data-ttu-id="58c09-148">Nella finestra di dialogo di SQL Server Management Studio fare clic su **Sì** per accettare il riavvio di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="58c09-148">In the SQL Server Management Studio dialog box, click **Yes** to agree that you want to restart SQL Server.</span></span>

### <a name="create-sql-server-authentication-logins"></a><span data-ttu-id="58c09-149">Creare gli account di accesso di SQL Server</span><span class="sxs-lookup"><span data-stu-id="58c09-149">Create SQL Server authentication logins</span></span>
<span data-ttu-id="58c09-150">Per connettersi al motore di database da un altro computer, configurare almeno un account di accesso con autenticazione di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="58c09-150">To connect to the Database Engine from another computer, you must create at least one SQL Server authentication login.</span></span>

1. <span data-ttu-id="58c09-151">In Esplora oggetti di SQL Server Management Studio espandere la cartella dell'istanza del server in cui si desidera creare il nuovo account di accesso.</span><span class="sxs-lookup"><span data-stu-id="58c09-151">In SQL Server Management Studio Object Explorer, expand the folder of the server instance in which you want to create the new login.</span></span>
2. <span data-ttu-id="58c09-152">Fare clic con il pulsante destro del mouse sulla cartella **Sicurezza**, scegliere **Nuovo** e quindi **Account di accesso**.</span><span class="sxs-lookup"><span data-stu-id="58c09-152">Right-click the **Security** folder, point to **New**, and select **Login...**.</span></span>
   
    ![Nuovo account di accesso](./media/virtual-machines-sql-server-connection-steps/23New-Login.png)
3. <span data-ttu-id="58c09-154">Nella finestra di dialogo **Account di accesso - Nuovo**, nella pagina **Generale** immettere il nome del nuovo utente nella casella **Nome account di accesso**.</span><span class="sxs-lookup"><span data-stu-id="58c09-154">In the **Login - New** dialog box, on the **General** page, enter the name of the new user in the **Login name** box.</span></span>
4. <span data-ttu-id="58c09-155">Selezionare **Autenticazione di SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="58c09-155">Select **SQL Server authentication**.</span></span>
5. <span data-ttu-id="58c09-156">Nella casella **Password** digitare una password per il nuovo utente.</span><span class="sxs-lookup"><span data-stu-id="58c09-156">In the **Password** box, enter a password for the new user.</span></span> <span data-ttu-id="58c09-157">Digitare di nuovo la password nella casella **Conferma password** .</span><span class="sxs-lookup"><span data-stu-id="58c09-157">Enter that password again into the **Confirm Password** box.</span></span>
6. <span data-ttu-id="58c09-158">Selezionare le opzioni di applicazione della password richieste, ovvero **Applica criteri password**, **Imponi scadenza password** e **Richiedi modifica della password all'accesso successivo**.</span><span class="sxs-lookup"><span data-stu-id="58c09-158">Select the password enforcement options required (**Enforce password policy**, **Enforce password expiration**, and **User must change password at next login**).</span></span> <span data-ttu-id="58c09-159">Se si usa questo account di accesso per se stessi, non è necessario richiedere una modifica della password all'accesso successivo.</span><span class="sxs-lookup"><span data-stu-id="58c09-159">If you are using this login for yourself, you do not need to require a password change at the next login.</span></span>
7. <span data-ttu-id="58c09-160">Nell'elenco **Database predefinito** selezionare un database predefinito per il nome di accesso.</span><span class="sxs-lookup"><span data-stu-id="58c09-160">From the **Default database** list, select a default database for the login.</span></span> <span data-ttu-id="58c09-161">**master** è il valore predefinito per questa opzione.</span><span class="sxs-lookup"><span data-stu-id="58c09-161">**master** is the default for this option.</span></span> <span data-ttu-id="58c09-162">Se il database utente non è ancora stato creato, lasciare questa opzione impostata su **master**.</span><span class="sxs-lookup"><span data-stu-id="58c09-162">If you have not yet created a user database, leave this set to **master**.</span></span>
   
    ![Proprietà account di accesso](./media/virtual-machines-sql-server-connection-steps/24Test-Login.png)
8. <span data-ttu-id="58c09-164">Se si tratta del primo account di accesso che si crea, è possibile assegnarlo all'amministratore di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="58c09-164">If this is the first login you are creating, you may want to designate this login as a SQL Server administrator.</span></span> <span data-ttu-id="58c09-165">A questo scopo, nella pagina **Ruoli server** selezionare **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="58c09-165">If so, on the **Server Roles** page, check **sysadmin**.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="58c09-166">i membri del ruolo predefinito del server dispongono del controllo completo sul motore di database.</span><span class="sxs-lookup"><span data-stu-id="58c09-166">Members of the sysadmin fixed server role have complete control of the Database Engine.</span></span> <span data-ttu-id="58c09-167">È consigliabile limitare attentamente le appartenenze a questo ruolo.</span><span class="sxs-lookup"><span data-stu-id="58c09-167">You should carefully restrict membership in this role.</span></span>
   > 
   > 
   
   ![sysadmin](./media/virtual-machines-sql-server-connection-steps/25sysadmin.png)
9. <span data-ttu-id="58c09-169">Fare clic su OK.</span><span class="sxs-lookup"><span data-stu-id="58c09-169">Click OK.</span></span>

<span data-ttu-id="58c09-170">Per ulteriori informazioni sugli account di accesso di SQL Server, vedere [Creazione di un account di accesso](http://msdn.microsoft.com/library/aa337562.aspx).</span><span class="sxs-lookup"><span data-stu-id="58c09-170">For more information about SQL Server logins, see [Create a Login](http://msdn.microsoft.com/library/aa337562.aspx).</span></span>

