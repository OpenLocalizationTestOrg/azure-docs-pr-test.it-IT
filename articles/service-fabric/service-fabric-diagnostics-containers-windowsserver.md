---
title: aaaAzure il monitoraggio dei contenitori dell'infrastruttura di servizi e diagnostica | Documenti Microsoft
description: Informazioni su come toomonitor e diagnosticare contenitori orchestrati in Microsoft Azure Service Fabric con soluzioni di contenitori di OMS.
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: cd79111cf78b9d76a60d489bb9953587aa06186d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="8afab-103">Monitoraggio dei contenitori Windows Server con OMS</span><span class="sxs-lookup"><span data-stu-id="8afab-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="8afab-104">Soluzione Contenitori di OMS</span><span class="sxs-lookup"><span data-stu-id="8afab-104">OMS Containers Solution</span></span>

<span data-ttu-id="8afab-105">il team di Operations Management Suite (OMS) Hello ha pubblicato una soluzione di contenitori per la diagnostica e monitoraggio per i contenitori.</span><span class="sxs-lookup"><span data-stu-id="8afab-105">hello Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="8afab-106">Con la propria soluzione di infrastruttura del servizio, questa soluzione è le distribuzioni di contenitori un ottimo strumento toomonitor orchestrati nell'infrastruttura del servizio.</span><span class="sxs-lookup"><span data-stu-id="8afab-106">Alongside their Service Fabric solution, this solution is a great tool toomonitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="8afab-107">Ecco un esempio semplice di quale dashboard hello nella soluzione hello il seguente aspetto:</span><span class="sxs-lookup"><span data-stu-id="8afab-107">Here's a simple example of what hello dashboard in hello solution looks like:</span></span>

![Dashboard OMS di base](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="8afab-109">Raccoglie inoltre diversi tipi di registri che è possibile eseguire query nello strumento di OMS Log Analitica hello, e può essere utilizzato toovisualize qualsiasi metriche o gli eventi generati.</span><span class="sxs-lookup"><span data-stu-id="8afab-109">It also collects different kinds of logs that can be queried in hello OMS Log Analytics tool, and can be used toovisualize any metrics or events being generated.</span></span> <span data-ttu-id="8afab-110">tipi di log Hello raccolti sono:</span><span class="sxs-lookup"><span data-stu-id="8afab-110">hello log types that are collected are:</span></span>

1. <span data-ttu-id="8afab-111">ContainerInventory: informazioni su posizione, nome e immagini dei contenitori</span><span class="sxs-lookup"><span data-stu-id="8afab-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="8afab-112">ContainerImageInventory: informazioni sulle immagini distribuite, inclusi ID o dimensioni</span><span class="sxs-lookup"><span data-stu-id="8afab-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="8afab-113">ContainerLog: log degli errori specifici, log Docker (stdout e così via) e altre voci</span><span class="sxs-lookup"><span data-stu-id="8afab-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="8afab-114">ContainerServiceLog: comandi del daemon Docker che sono stati eseguiti</span><span class="sxs-lookup"><span data-stu-id="8afab-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="8afab-115">Delle prestazioni: contatori incluso contenitore della cpu, memoria, il traffico di rete, i/o del disco e metriche personalizzate da hello ospitano macchine</span><span class="sxs-lookup"><span data-stu-id="8afab-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from hello host machines</span></span>

<span data-ttu-id="8afab-116">Questo articolo descrive tooset necessari passaggi di hello formare il contenitore di monitoraggio per il cluster.</span><span class="sxs-lookup"><span data-stu-id="8afab-116">This article covers hello steps required tooset up container monitoring for your cluster.</span></span> <span data-ttu-id="8afab-117">ulteriori informazioni sulla soluzione di contenitori di OMS, toolearn estrarre loro [documentazione](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="8afab-117">toolearn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="8afab-118">1. Configurare un cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="8afab-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="8afab-119">Creare un cluster utilizzando il modello di gestione risorse di Azure hello trovato [qui](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="8afab-119">Create a cluster using hello Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="8afab-120">Verificare che tooadd un nome di area di lavoro OMS univoco.</span><span class="sxs-lookup"><span data-stu-id="8afab-120">Make sure tooadd a unique OMS workspace name.</span></span> <span data-ttu-id="8afab-121">Questo modello viene anche impostato toodeploying compilazione di un cluster in anteprima hello di Service Fabric (v255.255), il che significa che non può essere utilizzato nell'ambiente di produzione e non può essere aggiornato tooa diversa versione di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="8afab-121">This template also defaults toodeploying a cluster in hello preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded tooa different Service Fabric version.</span></span> <span data-ttu-id="8afab-122">Se si decide di questo modello per toouse a lungo termine o di produzione usare, modificare una versione di hello tooa numero di versione stabile.</span><span class="sxs-lookup"><span data-stu-id="8afab-122">If you decide toouse this template for long-term or production use, change hello version tooa stable version number.</span></span>

<span data-ttu-id="8afab-123">Una volta configurato il cluster hello, confermare che si installa certificato appropriato hello e assicurarsi che sia in grado di tooconnect toohello cluster.</span><span class="sxs-lookup"><span data-stu-id="8afab-123">Once hello cluster is set up, confirm that you have installed hello appropriate certificate, and make sure you are able tooconnect toohello cluster.</span></span>

<span data-ttu-id="8afab-124">Verificare che il gruppo di risorse sia configurato correttamente dall'intestazione toohello [portale di Azure](https://portal.azure.com/) e individuazione di distribuzione hello.</span><span class="sxs-lookup"><span data-stu-id="8afab-124">Confirm that your Resource Group is set up correctly by heading toohello [Azure portal](https://portal.azure.com/) and finding hello deployment.</span></span> <span data-ttu-id="8afab-125">gruppo di risorse Hello dovrebbe contenere tutte le risorse di Service Fabric hello e hanno anche una soluzione Analitica di Log, nonché una soluzione di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="8afab-125">hello resource group should contain all hello Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="8afab-126">Per la modifica di un cluster di Service Fabric esistente:</span><span class="sxs-lookup"><span data-stu-id="8afab-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="8afab-127">Verificare che sia abilitata la diagnostica (in caso contrario, abilitarla tramite [l'aggiornamento di set di scalabilità della macchina virtuale hello](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="8afab-127">Confirm that Diagnostics is enabled (if not, enable it via [updating hello virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="8afab-128">Aggiungere un'area di lavoro OMS tramite la creazione di una soluzione di "Servizio Fabric Analitica" tramite hello Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="8afab-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via hello Azure Marketplace</span></span>
* <span data-ttu-id="8afab-129">Modifica di origini dati hello di hello Service Fabric soluzione toopick dei dati dalle tabelle di archiviazione di Azure appropriate hello (impostate da WAD) in hello gruppo di risorse che hello cluster si trova in</span><span class="sxs-lookup"><span data-stu-id="8afab-129">Edit hello data sources of hello Service Fabric solution toopick up data from hello appropriate Azure Storage tables (set up by WAD) in hello Resource Group that hello cluster is in</span></span>
* <span data-ttu-id="8afab-130">Aggiungi agente hello come un [set di scalabilità della macchina virtuale toohello estensione](/powershell/module/azurerm.compute/add-azurermvmssextension) tramite PowerShell o l'aggiornamento di set di scalabilità della macchina virtuale hello (stesso collegamento sopra, modello di gestione risorse di hello toomodify)</span><span class="sxs-lookup"><span data-stu-id="8afab-130">Add hello agent as an [extension toohello virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating hello virtual machine scale set (same link as above, toomodify hello Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="8afab-131">2. Distribuire un contenitore</span><span class="sxs-lookup"><span data-stu-id="8afab-131">2. Deploy a container</span></span>

<span data-ttu-id="8afab-132">Una volta cluster hello è pronto e aver verificato che sia possibile accedervi, è possibile distribuire tooit un contenitore.</span><span class="sxs-lookup"><span data-stu-id="8afab-132">Once hello cluster is ready and you have confirmed that you can access it, deploy a container tooit.</span></span> <span data-ttu-id="8afab-133">Se si sceglie di versione di anteprima hello toouse come set dal modello hello, è possibile esplorare anche docker di nuovo di Service Fabric compongono la funzionalità.</span><span class="sxs-lookup"><span data-stu-id="8afab-133">If you chose toouse hello preview version as set by hello template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="8afab-134">Tenere presente che hello prima volta che un'immagine contenitore è distribuito tooa cluster, vengono visualizzate più immagini di hello toodownload minuti a seconda delle dimensioni.</span><span class="sxs-lookup"><span data-stu-id="8afab-134">Bear in mind that hello first time a container image is deployed tooa cluster, it takes several minutes toodownload hello image depending on its size.</span></span>

## <a name="3-add-hello-containers-solution"></a><span data-ttu-id="8afab-135">3. Aggiungere hello contenitori soluzione</span><span class="sxs-lookup"><span data-stu-id="8afab-135">3. Add hello Containers solution</span></span>

<span data-ttu-id="8afab-136">In hello portale di Azure, creare una risorsa contenitori (in hello monitoraggio + gestione categoria) tramite Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="8afab-136">In hello Azure portal, create a Containers resource (under hello Monitoring + Management category) through Azure Marketplace.</span></span> 

![Aggiunta della soluzione Contenitori](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="8afab-138">Nel passaggio della creazione di hello, richiede un'area di lavoro OMS.</span><span class="sxs-lookup"><span data-stu-id="8afab-138">In hello creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="8afab-139">Selezionare hello ne è stata creata con la distribuzione di hello precedente.</span><span class="sxs-lookup"><span data-stu-id="8afab-139">Select hello one that was created with hello deployment above.</span></span> <span data-ttu-id="8afab-140">Questo passaggio viene aggiunta una soluzione di contenitori all'interno dell'area di lavoro OMS e viene rilevato automaticamente dall'agente OMS hello distribuite dal modello hello.</span><span class="sxs-lookup"><span data-stu-id="8afab-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by hello OMS agent deployed by hello template.</span></span> <span data-ttu-id="8afab-141">agente di Hello inizierà a raccogliere dati sui processi di contenitori hello cluster hello e circa 10-15 minuti, si dovrebbe essere chiaro backup con i dati come immagine di hello del dashboard hello sopra soluzione di hello.</span><span class="sxs-lookup"><span data-stu-id="8afab-141">hello agent will start gathering data on hello containers processes in hello cluster, and in about 10-15 minutes, you should see hello solution light up with data as in hello image of hello dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="8afab-142">4. Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8afab-142">4. Next steps</span></span>

<span data-ttu-id="8afab-143">OMS offre vari strumenti in hello dell'area di lavoro toomake se più utili per l'utente.</span><span class="sxs-lookup"><span data-stu-id="8afab-143">OMS offers various tools in hello workspace toomake if more useful for you.</span></span> <span data-ttu-id="8afab-144">Esplorare hello opzioni toocustomize hello soluzione tooyour esigenze seguenti:</span><span class="sxs-lookup"><span data-stu-id="8afab-144">Explore hello following options toocustomize hello solution tooyour needs:</span></span>
- <span data-ttu-id="8afab-145">Ottenere conoscenza con hello [ricerca e l'esecuzione di query log](../log-analytics/log-analytics-log-searches.md) funzionalità fornite come parte del Log Analitica</span><span class="sxs-lookup"><span data-stu-id="8afab-145">Get familiarized with hello [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="8afab-146">Configurare hello OMS agent toopick backup specifici contatori delle prestazioni (passare toohello area Home > Impostazioni > dati > i contatori delle prestazioni di Windows)</span><span class="sxs-lookup"><span data-stu-id="8afab-146">Configure hello OMS agent toopick up specific performance counters (go toohello workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="8afab-147">Configurare OMS tooset [automatizzata avvisi](../log-analytics/log-analytics-alerts.md) tooaid regole di rilevamento e di diagnostica</span><span class="sxs-lookup"><span data-stu-id="8afab-147">Configure OMS tooset up [automated alerting](../log-analytics/log-analytics-alerts.md) rules tooaid in detecting and diagnostics</span></span>
