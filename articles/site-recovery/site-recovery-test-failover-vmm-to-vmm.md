---
title: failover aaaTest (tooVMM VMM) in Azure Site Recovery | Documenti Microsoft
description: Azure Site Recovery coordina la replica di hello, failover e il ripristino delle macchine virtuali e server fisici. Informazioni su failover tooAzure o un Data Center secondario.
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 44813a48-c680-4581-a92e-cecc57cc3b1e
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 06/05/2017
ms.author: pratshar
ms.openlocfilehash: 6b4f65ab692cbb0665102c4f51ea0694151cd3ae
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="test-failover-vmm-toovmm-in-site-recovery"></a><span data-ttu-id="a280e-104">Il test di failover (tooVMM VMM) in Site Recovery</span><span class="sxs-lookup"><span data-stu-id="a280e-104">Test failover (VMM tooVMM) in Site Recovery</span></span>


<span data-ttu-id="a280e-105">Questo articolo contiene informazioni e istruzioni per eseguire un failover di test o un'esercitazione per il ripristino di emergenza di macchine virtuali (VM) e server fisici protetti con Azure Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="a280e-105">This article provides information and instructions for doing a test failover or a disaster recovery (DR) drill of virtual machines (VMs) and physical servers that are protected with Azure Site Recovery.</span></span> <span data-ttu-id="a280e-106">Utilizzare un sito di System Center Virtual Machine Manager VMM gestito in locale come sito di ripristino hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-106">You'll use a System Center Virtual Machine Manager (VMM)-managed on-premises site as hello recovery site.</span></span>

<span data-ttu-id="a280e-107">Si esegue un toovalidate di failover di test la strategia di replica o esegue un ripristino di emergenza senza alcuna perdita di dati o il tempo di inattività.</span><span class="sxs-lookup"><span data-stu-id="a280e-107">You run a test failover toovalidate your replication strategy or perform a DR drill without any data loss or downtime.</span></span> <span data-ttu-id="a280e-108">Un failover di test non hanno alcun impatto sulla replica in corso di hello o nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="a280e-108">A test failover doesn't have any impact on hello ongoing replication or on your production environment.</span></span> <span data-ttu-id="a280e-109">È possibile eseguirlo in una macchina virtuale o in un [piano di ripristino](site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="a280e-109">You can run it on either a virtual machine or a [recovery plan](site-recovery-create-recovery-plans.md).</span></span> <span data-ttu-id="a280e-110">Quando si è attivato un failover di test, è necessario rete hello toospecify che si connetterà hello macchine virtuali di test.</span><span class="sxs-lookup"><span data-stu-id="a280e-110">When you're triggering a test failover, you need toospecify hello network that hello test virtual machines will connect to.</span></span> <span data-ttu-id="a280e-111">È possibile analizzare lo stato di avanzamento hello hello del test del failover sul hello **processi** pagina.</span><span class="sxs-lookup"><span data-stu-id="a280e-111">You can track hello progress of hello test failover on hello **Jobs** page.</span></span>  

<span data-ttu-id="a280e-112">Se si dispone di commenti o domande, pubblicare un post nella parte inferiore di hello di questo articolo o di hello [forum sui servizi di ripristino di Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="a280e-112">If you have any comments or questions, post them at hello bottom of this article or on hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>


## <a name="prepare-hello-infrastructure-for-test-failover"></a><span data-ttu-id="a280e-113">Preparare l'infrastruttura di hello per il failover di test</span><span class="sxs-lookup"><span data-stu-id="a280e-113">Prepare hello infrastructure for test failover</span></span>
<span data-ttu-id="a280e-114">Se si desidera toorun un failover di test tramite una rete esistente, preparare Active Directory, DHCP e DNS in tale rete.</span><span class="sxs-lookup"><span data-stu-id="a280e-114">If you want toorun a test failover by using an existing network, prepare Active Directory, DHCP, and DNS in that network.</span></span>

<span data-ttu-id="a280e-115">Se si desidera toorun un failover di test usando le reti VM di hello opzione toocreate automaticamente, è possibile aggiungere un passaggio manuale prima di Group-1 nel piano di ripristino hello che si userà toouse per il failover di test hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-115">If you want toorun a test failover by using hello option toocreate VM networks automatically, add a manual step before Group-1 in hello recovery plan that you’re going toouse for hello test failover.</span></span> <span data-ttu-id="a280e-116">Aggiungere quindi hello toohello di risorse di infrastruttura creata automaticamente una rete prima di eseguire il failover di test hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-116">Then, add hello infrastructure resources toohello automatically created network before you run hello test failover.</span></span>

### <a name="things-toonote"></a><span data-ttu-id="a280e-117">Operazioni toonote</span><span class="sxs-lookup"><span data-stu-id="a280e-117">Things toonote</span></span>
<span data-ttu-id="a280e-118">Quando si esegue la replica di tooa sito secondario, il tipo di hello di rete che utilizza hello macchina non deve necessariamente tipo hello toomatch di rete logica utilizzata per il failover di test, ma alcune combinazioni potrebbero non funzionare.</span><span class="sxs-lookup"><span data-stu-id="a280e-118">When you're replicating tooa secondary site, hello type of network that hello replica machine uses doesn’t need toomatch hello type of logical network used for test failover, but some combinations might not work.</span></span> <span data-ttu-id="a280e-119">Se la replica hello utilizza DHCP e l'isolamento basato su VLAN, la rete VM hello per replica hello non è necessario un pool di indirizzi IP statici.</span><span class="sxs-lookup"><span data-stu-id="a280e-119">If hello replica uses DHCP and VLAN-based isolation, hello VM network for hello replica doesn't need a static IP address pool.</span></span> <span data-ttu-id="a280e-120">Quindi utilizza la virtualizzazione di rete di Windows per il failover di test hello non funziona perché nessun pool di indirizzi è disponibile.</span><span class="sxs-lookup"><span data-stu-id="a280e-120">So using Windows Network Virtualization for hello test failover won't work because no address pools are available.</span></span> 

<span data-ttu-id="a280e-121">Inoltre, il failover di test hello non funziona se rete replica hello non utilizza nessun isolamento e la rete di test hello utilizza la virtualizzazione di rete di Windows.</span><span class="sxs-lookup"><span data-stu-id="a280e-121">In addition, hello test failover won't work if hello replica network uses no isolation and hello test network uses Windows Network Virtualization.</span></span> <span data-ttu-id="a280e-122">Questo avviene perché rete Nessun isolamento hello privo di hello subnet obbligatorio toocreate una rete di virtualizzazione rete Windows.</span><span class="sxs-lookup"><span data-stu-id="a280e-122">This is because hello no-isolation network doesn't have hello subnets required toocreate a Windows Network Virtualization network.</span></span>

<span data-ttu-id="a280e-123">Come macchine virtuali di replica sono le reti VM toomapped connesse dopo il failover dipende dalla configurazione di rete VM hello nella console VMM hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-123">How replica virtual machines are connected toomapped VM networks after failover depends on how hello VM network is configured in hello VMM console.</span></span>

#### <a name="vm-network-configured-with-no-isolation-or-vlan-isolation"></a><span data-ttu-id="a280e-124">Rete VM configurata senza isolamento o isolamento VLAN</span><span class="sxs-lookup"><span data-stu-id="a280e-124">VM network configured with no isolation or VLAN isolation</span></span>
<span data-ttu-id="a280e-125">Se per la rete VM hello è definito DHCP, macchina virtuale di replica hello è connesso toohello ID VLAN tramite le impostazioni di hello specificati per il sito di rete hello nella rete logica associata hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-125">If DHCP is defined for hello VM network, hello replica virtual machine is connected toohello VLAN ID through hello settings that are specified for hello network site in hello associated logical network.</span></span> <span data-ttu-id="a280e-126">macchina virtuale Hello riceve il proprio indirizzo IP dal server DHCP disponibile hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-126">hello virtual machine receives its IP address from hello available DHCP server.</span></span> 

<span data-ttu-id="a280e-127">Non è necessario toodefine un pool di indirizzi IP statici per la rete VM di destinazione hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-127">You don't need toodefine a static IP address pool for hello target VM network.</span></span> <span data-ttu-id="a280e-128">Se un pool di indirizzi IP statici viene utilizzato per la rete VM hello, macchina virtuale di replica hello è connesso toohello ID VLAN tramite le impostazioni di hello specificati per il sito di rete hello nella rete logica associata hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-128">If a static IP address pool is used for hello VM network, hello replica virtual machine is connected toohello VLAN ID through hello settings that are specified for hello network site in hello associated logical network.</span></span>

<span data-ttu-id="a280e-129">macchina virtuale Hello riceve l'indirizzo IP da pool di hello è definito per la rete VM hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-129">hello virtual machine receives its IP address from hello pool that's defined for hello VM network.</span></span> <span data-ttu-id="a280e-130">Se nella rete VM di destinazione hello non è definito un pool di indirizzi IP statici, l'allocazione di indirizzi IP avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="a280e-130">If a static IP address pool isn't defined on hello target VM network, IP address allocation will fail.</span></span> <span data-ttu-id="a280e-131">Creare il pool di indirizzi IP hello in entrambi hello origine e destinazione VMM i server che verrà utilizzato per la protezione e ripristino.</span><span class="sxs-lookup"><span data-stu-id="a280e-131">Create hello IP address pool on both hello source and target VMM servers that you will use for protection and recovery.</span></span>

#### <a name="vm-network-with-windows-network-virtualization"></a><span data-ttu-id="a280e-132">Rete VM con virtualizzazione rete Windows</span><span class="sxs-lookup"><span data-stu-id="a280e-132">VM network with Windows Network Virtualization</span></span>
<span data-ttu-id="a280e-133">Se una rete VM è configurata con virtualizzazione rete Windows, è necessario definire un pool statico per la rete VM di destinazione hello, indipendentemente dalla rete VM di origine hello toouse configurato DHCP o un pool di indirizzi IP statici.</span><span class="sxs-lookup"><span data-stu-id="a280e-133">If a VM network is configured with Windows Network Virtualization, you should define a static pool for hello target VM network, regardless of whether hello source VM network is configured toouse DHCP or a static IP address pool.</span></span> 

<span data-ttu-id="a280e-134">Se si definisce DHCP, server VMM di destinazione hello funge da server DHCP e fornisce un indirizzo IP da pool di hello è definito per la rete VM di destinazione hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-134">If you define DHCP, hello target VMM server acts as a DHCP server and provides an IP address from hello pool that's defined for hello target VM network.</span></span> <span data-ttu-id="a280e-135">Se per il server di origine hello è definita utilizzo di un pool di indirizzi IP statici, il server VMM di destinazione hello alloca un indirizzo IP dal pool hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-135">If use of a static IP address pool is defined for hello source server, hello target VMM server allocates an IP address from hello pool.</span></span> <span data-ttu-id="a280e-136">In entrambi i casi, l'allocazione di indirizzi IP non riuscirà se non è definito un pool di indirizzi IP statici.</span><span class="sxs-lookup"><span data-stu-id="a280e-136">In both cases, IP address allocation will fail if a static IP address pool is not defined.</span></span>


### <a name="prepare-dhcp"></a><span data-ttu-id="a280e-137">Preparare DHCP</span><span class="sxs-lookup"><span data-stu-id="a280e-137">Prepare DHCP</span></span>
<span data-ttu-id="a280e-138">Macchine virtuali hello coinvolte nel failover di test utilizzano DHCP, creare un server DHCP di test all'interno di rete isolata di hello scopo hello di failover di test.</span><span class="sxs-lookup"><span data-stu-id="a280e-138">If hello virtual machines involved in test failover use DHCP, create a test DHCP server within hello isolated network for hello purpose of test failover.</span></span>

### <a name="prepare-active-directory"></a><span data-ttu-id="a280e-139">Preparare Active Directory</span><span class="sxs-lookup"><span data-stu-id="a280e-139">Prepare Active Directory</span></span>
<span data-ttu-id="a280e-140">toorun un failover di test per test dell'applicazione, è necessario una copia dell'ambiente Active Directory di produzione hello nell'ambiente di test.</span><span class="sxs-lookup"><span data-stu-id="a280e-140">toorun a test failover for application testing, you need a copy of hello production Active Directory environment in your test environment.</span></span> <span data-ttu-id="a280e-141">Per ulteriori informazioni, esaminare hello [considerazioni sul failover per Active Directory di test](site-recovery-active-directory.md#test-failover-considerations).</span><span class="sxs-lookup"><span data-stu-id="a280e-141">For more information, review hello [test failover considerations for Active Directory](site-recovery-active-directory.md#test-failover-considerations).</span></span>

### <a name="prepare-dns"></a><span data-ttu-id="a280e-142">Preparare DNS</span><span class="sxs-lookup"><span data-stu-id="a280e-142">Prepare DNS</span></span>
<span data-ttu-id="a280e-143">Preparare un server DNS per il failover di test hello come segue:</span><span class="sxs-lookup"><span data-stu-id="a280e-143">Prepare a DNS server for hello test failover as follows:</span></span>

* <span data-ttu-id="a280e-144">**DHCP**: se le macchine virtuali utilizzano DHCP, aggiornare l'indirizzo IP hello del test di hello DNS sul server DHCP di prova hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-144">**DHCP**: If virtual machines use DHCP, hello IP address of hello test DNS should be updated on hello test DHCP server.</span></span> <span data-ttu-id="a280e-145">Se si utilizza un tipo di rete di virtualizzazione rete Windows, server VMM hello funge da server DHCP hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-145">If you’re using a network type of Windows Network Virtualization, hello VMM server acts as hello DHCP server.</span></span> <span data-ttu-id="a280e-146">Pertanto, l'indirizzo IP hello del DNS deve essere aggiornato in rete di failover di test hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-146">Therefore, hello IP address of DNS should be updated in hello test failover network.</span></span> <span data-ttu-id="a280e-147">In questo caso, le macchine virtuali hello registrarsi toohello relativo server DNS.</span><span class="sxs-lookup"><span data-stu-id="a280e-147">In this case, hello virtual machines register themselves toohello relevant DNS server.</span></span>
* <span data-ttu-id="a280e-148">**Indirizzo statico**: se le macchine virtuali utilizzano un indirizzo IP statico, hello l'indirizzo IP del test di hello server DNS deve essere aggiornato in rete di failover di test.</span><span class="sxs-lookup"><span data-stu-id="a280e-148">**Static address**: If virtual machines use a static IP address, hello IP address of hello test DNS server should be updated in test failover network.</span></span> <span data-ttu-id="a280e-149">Potrebbe essere necessario tooupdate DNS con indirizzo IP hello hello macchine virtuali di test.</span><span class="sxs-lookup"><span data-stu-id="a280e-149">You might need tooupdate DNS with hello IP address of hello test virtual machines.</span></span> <span data-ttu-id="a280e-150">È possibile utilizzare lo script di esempio seguente a questo scopo hello:</span><span class="sxs-lookup"><span data-stu-id="a280e-150">You can use hello following sample script for this purpose:</span></span>

        Param(
        [string]$Zone,
        [string]$name,
        [string]$IP
        )
        $Record = Get-DnsServerResourceRecord -ZoneName $zone -Name $name
        $newrecord = $record.clone()
        $newrecord.RecordData[0].IPv4Address  =  $IP
        Set-DnsServerResourceRecord -zonename $zone -OldInputObject $record -NewInputObject $Newrecord



## <a name="run-a-test-failover"></a><span data-ttu-id="a280e-151">Eseguire un failover di test</span><span class="sxs-lookup"><span data-stu-id="a280e-151">Run a test failover</span></span>
<span data-ttu-id="a280e-152">Questa procedura viene descritto come toorun un failover di test per il ripristino di un piano.</span><span class="sxs-lookup"><span data-stu-id="a280e-152">This procedure describes how toorun a test failover for a recovery plan.</span></span> <span data-ttu-id="a280e-153">In alternativa, è possibile eseguire failover hello per una singola macchina virtuale in hello **macchine virtuali** scheda.</span><span class="sxs-lookup"><span data-stu-id="a280e-153">Alternatively, you can run hello failover for a single virtual machine on hello **Virtual Machines** tab.</span></span>

![Pannello Failover di test](./media/site-recovery-test-failover-vmm-to-vmm/TestFailover.png)

1. <span data-ttu-id="a280e-155">Selezionare **Piani di ripristino** > *nome_pianodiripristino*.</span><span class="sxs-lookup"><span data-stu-id="a280e-155">Select **Recovery Plans** > *recoveryplan_name*.</span></span> <span data-ttu-id="a280e-156">Fare clic su **Failover** > **Test Failover**.</span><span class="sxs-lookup"><span data-stu-id="a280e-156">Click **Failover** > **Test Failover**.</span></span>
1. <span data-ttu-id="a280e-157">In hello **Test Failover** pannello, specificare come macchine virtuali devono essere connessi toonetworks dopo il failover di test hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-157">On hello **Test Failover** blade, specify how virtual machines should be connected toonetworks after hello test failover.</span></span> <span data-ttu-id="a280e-158">Per ulteriori informazioni, vedere hello [Opzioni rete](#network-options-in-site-recovery).</span><span class="sxs-lookup"><span data-stu-id="a280e-158">For more information, see hello [network options](#network-options-in-site-recovery).</span></span>
1. <span data-ttu-id="a280e-159">Avanzamento di failover su hello **processi** scheda.</span><span class="sxs-lookup"><span data-stu-id="a280e-159">Track failover progress on hello **Jobs** tab.</span></span>
1. <span data-ttu-id="a280e-160">Al termine del failover, verificare che le macchine virtuali hello avviata correttamente.</span><span class="sxs-lookup"><span data-stu-id="a280e-160">After failover is complete, verify that hello virtual machines start successfully.</span></span>
1. <span data-ttu-id="a280e-161">Al termine, fare clic su **il failover di test di pulizia** nel piano di ripristino hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-161">When you're done, click **Cleanup test failover** on hello recovery plan.</span></span> <span data-ttu-id="a280e-162">In **note**, registrare e salvare eventuali commenti associati hello test failover.</span><span class="sxs-lookup"><span data-stu-id="a280e-162">In **Notes**, record and save any observations associated with hello test failover.</span></span> <span data-ttu-id="a280e-163">Questo passaggio Elimina hello le macchine virtuali e reti che sono state create durante il failover di test.</span><span class="sxs-lookup"><span data-stu-id="a280e-163">This step deletes hello virtual machines and networks that were created during test failover.</span></span>


## <a name="network-options-in-site-recovery"></a><span data-ttu-id="a280e-164">Opzioni di rete in Site Recovery</span><span class="sxs-lookup"><span data-stu-id="a280e-164">Network options in Site Recovery</span></span>

<span data-ttu-id="a280e-165">Quando si esegue un failover di test, verrà chiesto tooselect le impostazioni di rete per macchine virtuali di replica di test.</span><span class="sxs-lookup"><span data-stu-id="a280e-165">When you run a test failover, you're asked tooselect network settings for test replica machines.</span></span> <span data-ttu-id="a280e-166">Sono disponibili varie opzioni.</span><span class="sxs-lookup"><span data-stu-id="a280e-166">You have multiple options.</span></span>  

| <span data-ttu-id="a280e-167">**Opzione di failover di test**</span><span class="sxs-lookup"><span data-stu-id="a280e-167">**Test failover option**</span></span> | <span data-ttu-id="a280e-168">**Descrizione**</span><span class="sxs-lookup"><span data-stu-id="a280e-168">**Description**</span></span> | <span data-ttu-id="a280e-169">**Controllo del failover**</span><span class="sxs-lookup"><span data-stu-id="a280e-169">**Failover check**</span></span> | <span data-ttu-id="a280e-170">**Dettagli**</span><span class="sxs-lookup"><span data-stu-id="a280e-170">**Details**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="a280e-171">**Eseguire il failover tooa VMM del sito secondario, senza rete**</span><span class="sxs-lookup"><span data-stu-id="a280e-171">**Fail over tooa secondary VMM site--without network**</span></span> |<span data-ttu-id="a280e-172">Non selezionare una rete VM.</span><span class="sxs-lookup"><span data-stu-id="a280e-172">Don't select a VM network.</span></span> |<span data-ttu-id="a280e-173">Il failover controlla che le macchine di test vengono create.</span><span class="sxs-lookup"><span data-stu-id="a280e-173">Failover checks that test machines are created.</span></span><br/><br/><span data-ttu-id="a280e-174">macchina virtuale di test Hello viene creata nell'host di hello in cui è presente hello macchina virtuale di replica.</span><span class="sxs-lookup"><span data-stu-id="a280e-174">hello test virtual machine is created on hello host where hello replica virtual machine exists.</span></span> <span data-ttu-id="a280e-175">Non viene aggiunta cloud toohello hello macchina virtuale di replica in cui si trova.</span><span class="sxs-lookup"><span data-stu-id="a280e-175">It isn’t added toohello cloud where hello replica virtual machine is located.</span></span> |<p><span data-ttu-id="a280e-176">computer failover Hello non è connesso tooany rete.</span><span class="sxs-lookup"><span data-stu-id="a280e-176">hello failed-over machine isn’t connected tooany network.</span></span><br/><br/><span data-ttu-id="a280e-177">è possibile rete VM tooa connesso macchina Hello dopo che è stato creato.</span><span class="sxs-lookup"><span data-stu-id="a280e-177">hello machine can be connected tooa VM network after it has been created.</span></span> |
| <span data-ttu-id="a280e-178">**Eseguire il failover tooa VMM del sito secondario, con la rete**</span><span class="sxs-lookup"><span data-stu-id="a280e-178">**Fail over tooa secondary VMM site--with network**</span></span> |<span data-ttu-id="a280e-179">Selezionare una rete VM esistente.</span><span class="sxs-lookup"><span data-stu-id="a280e-179">Select an existing VM network.</span></span> |<span data-ttu-id="a280e-180">Il failover controlla che le macchine virtuali vengano create.</span><span class="sxs-lookup"><span data-stu-id="a280e-180">Failover checks that virtual machines are created.</span></span> |<span data-ttu-id="a280e-181">macchina virtuale di test Hello viene creata nell'host di hello in cui è presente hello macchina virtuale di replica.</span><span class="sxs-lookup"><span data-stu-id="a280e-181">hello test virtual machine is created on hello host where hello replica virtual machine exists.</span></span> <span data-ttu-id="a280e-182">Non viene aggiunta cloud toohello hello macchina virtuale di replica in cui si trova.</span><span class="sxs-lookup"><span data-stu-id="a280e-182">It isn’t added toohello cloud where hello replica virtual machine is located.</span></span><br/><br/><span data-ttu-id="a280e-183">Creare una rete VM isolata dalla rete di produzione.</span><span class="sxs-lookup"><span data-stu-id="a280e-183">Create a VM network that's isolated from your production network.</span></span><br/><br/><span data-ttu-id="a280e-184">Se si vuole usare una rete basata su VLAN, è consigliabile creare a questo scopo in VMM una rete logica separata non usata in produzione.</span><span class="sxs-lookup"><span data-stu-id="a280e-184">If you're using a VLAN-based network, we recommend that you create a separate logical network (not used in production) in VMM for this purpose.</span></span> <span data-ttu-id="a280e-185">Questa rete logica è reti VM toocreate utilizzato per i test failover.</span><span class="sxs-lookup"><span data-stu-id="a280e-185">This logical network is used toocreate VM networks for test failovers.</span></span><br/><br/><span data-ttu-id="a280e-186">rete logica Hello deve essere associata almeno una delle schede di rete hello di tutti i server Hyper-V hello che ospitano macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a280e-186">hello logical network should be associated with at least one of hello network adapters of all hello Hyper-V servers that are hosting virtual machines.</span></span><br/><br/><span data-ttu-id="a280e-187">Per le reti logiche VLAN, hello siti della rete aggiunti toohello di rete logica devono essere isolati.</span><span class="sxs-lookup"><span data-stu-id="a280e-187">For VLAN logical networks, hello network sites that you add toohello logical network should be isolated.</span></span><br/><br/><span data-ttu-id="a280e-188">Se si usa una rete logica basata su Virtualizzazione rete Windows, Azure Site Recovery crea automaticamente reti VM isolate.</span><span class="sxs-lookup"><span data-stu-id="a280e-188">If you’re using a Windows Network Virtualization–based logical network, Azure Site Recovery automatically creates isolated VM networks.</span></span> |
| <span data-ttu-id="a280e-189">**Esito negativo nel corso del sito VMM secondario tooa - creare una rete**</span><span class="sxs-lookup"><span data-stu-id="a280e-189">**Fail over tooa secondary VMM site--create a network**</span></span> |<span data-ttu-id="a280e-190">Viene creata automaticamente in base hello all'impostazione specificata in una rete di test temporanea **rete logica** e i relativi siti di rete correlati.</span><span class="sxs-lookup"><span data-stu-id="a280e-190">A temporary test network is created automatically based on hello setting that you specify in **Logical Network** and its related network sites.</span></span> |<span data-ttu-id="a280e-191">Il failover controlla che le macchine virtuali vengano create.</span><span class="sxs-lookup"><span data-stu-id="a280e-191">Failover checks that virtual machines are created.</span></span> |<span data-ttu-id="a280e-192">Utilizzare questa opzione se il piano di ripristino hello utilizza più di una rete VM.</span><span class="sxs-lookup"><span data-stu-id="a280e-192">Use this option if hello recovery plan uses more than one VM network.</span></span> <span data-ttu-id="a280e-193">Se si utilizzano le reti di virtualizzazione rete Windows, questa opzione potrà creare automaticamente reti VM con hello stesse impostazioni (subnet e pool di indirizzi IP) in rete hello della macchina virtuale di replica hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-193">If you're using Windows Network Virtualization networks, this option can automatically create VM networks with hello same settings (subnets and IP address pools) in hello network of hello replica virtual machine.</span></span> <span data-ttu-id="a280e-194">Tali reti VM vengono pulite automaticamente dopo il failover di test hello è stato completato.</span><span class="sxs-lookup"><span data-stu-id="a280e-194">These VM networks are cleaned up automatically after hello test failover is complete.</span></span></p><p><span data-ttu-id="a280e-195">macchina virtuale di test Hello viene creata nell'host di hello in cui è presente hello macchina virtuale di replica.</span><span class="sxs-lookup"><span data-stu-id="a280e-195">hello test virtual machine is created on hello host where hello replica virtual machine exists.</span></span> <span data-ttu-id="a280e-196">Non viene aggiunta cloud toohello hello macchina virtuale di replica in cui si trova.</span><span class="sxs-lookup"><span data-stu-id="a280e-196">It isn’t added toohello cloud where hello replica virtual machine is located.</span></span> |

> [!TIP]
> <span data-ttu-id="a280e-197">indirizzo IP assegnato macchina virtuale tooa durante il test failover Hello è hello riceverebbe stesso indirizzo IP che hello macchina virtuale per un failover pianificato o non pianificato (presumendo che che l'indirizzo IP hello è disponibile in rete di failover di test hello).</span><span class="sxs-lookup"><span data-stu-id="a280e-197">hello IP address given tooa virtual machine during test failover is hello same IP address that hello virtual machine would receive for a planned or unplanned failover (presuming that hello IP address is available in hello test failover network).</span></span> <span data-ttu-id="a280e-198">Se hello stesso indirizzo IP non è disponibile in rete di failover di test hello, macchina virtuale hello riceve un altro indirizzo IP disponibile in rete di failover di test hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-198">If hello same IP address isn't available in hello test failover network, hello virtual machine receives another IP address that's available in hello test failover network.</span></span>
>
>


## <a name="test-failover-tooa-production-network-on-a-recovery-site"></a><span data-ttu-id="a280e-199">Rete di produzione tooa di failover di test in un sito di ripristino</span><span class="sxs-lookup"><span data-stu-id="a280e-199">Test failover tooa production network on a recovery site</span></span>
<span data-ttu-id="a280e-200">Per un failover di test è consigliabile scegliere una rete diversa dalla rete del sito di ripristino di produzione specificata in [Mapping di rete](https://docs.microsoft.com/azure/site-recovery/site-recovery-network-mapping).</span><span class="sxs-lookup"><span data-stu-id="a280e-200">We recommend that when you're doing a test failover, you choose a network that is different from your production recovery site network that you provided in [network mapping](https://docs.microsoft.com/azure/site-recovery/site-recovery-network-mapping).</span></span> <span data-ttu-id="a280e-201">Ma se si vuole toovalidate connettività di rete end-to-end in una macchina virtuale con failover, tieni presente hello seguenti punti:</span><span class="sxs-lookup"><span data-stu-id="a280e-201">But if you really want toovalidate end-to-end network connectivity in a failed-over virtual machine, note hello following points:</span></span>

* <span data-ttu-id="a280e-202">Assicurarsi che la macchina virtuale primaria hello viene arrestata quando si sta eseguendo il failover di test hello.</span><span class="sxs-lookup"><span data-stu-id="a280e-202">Make sure that hello primary virtual machine is shut down when you're doing hello test failover.</span></span> <span data-ttu-id="a280e-203">In caso contrario, due macchine virtuali con hello stessa identità verrà eseguita nella stessa rete in hello hello stesso tempo.</span><span class="sxs-lookup"><span data-stu-id="a280e-203">If you don't, two virtual machines with hello same identity will be running in hello same network at hello same time.</span></span> <span data-ttu-id="a280e-204">Questa situazione può provocare conseguenze tooundesired.</span><span class="sxs-lookup"><span data-stu-id="a280e-204">That situation can lead tooundesired consequences.</span></span>
* <span data-ttu-id="a280e-205">Le modifiche apportate a toohello test failover delle macchine virtuali vengono perse quando si pulizia hello test failover delle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="a280e-205">Any changes that you make toohello test failover virtual machines are lost when you clean up hello test failover virtual machines.</span></span> <span data-ttu-id="a280e-206">Queste modifiche non sono macchina virtuale primaria replicati toohello indietro.</span><span class="sxs-lookup"><span data-stu-id="a280e-206">These changes are not replicated back toohello primary virtual machine.</span></span>
* <span data-ttu-id="a280e-207">In questo modo di esecuzione di test viene toodowntime per l'applicazione di produzione.</span><span class="sxs-lookup"><span data-stu-id="a280e-207">This way of doing testing leads toodowntime for your production application.</span></span> <span data-ttu-id="a280e-208">Chiedere agli utenti di un'applicazione hello non toouse applicazione hello quando eseguire il drill-hello ripristino di emergenza è in corso.</span><span class="sxs-lookup"><span data-stu-id="a280e-208">Ask users of hello application not toouse hello application when hello DR drill is in progress.</span></span>  


## <a name="next-steps"></a><span data-ttu-id="a280e-209">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="a280e-209">Next steps</span></span>
<span data-ttu-id="a280e-210">Dopo l'esito positivo di un failover di test è possibile provare a eseguire un [failover](site-recovery-failover.md).</span><span class="sxs-lookup"><span data-stu-id="a280e-210">After you have successfully run a test failover, you can try a [failover](site-recovery-failover.md).</span></span>
