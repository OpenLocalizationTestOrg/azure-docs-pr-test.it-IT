---
title: Panoramica del monitoraggio per il Gateway applicazione Azure aaaHealth | Documenti Microsoft
description: "Informazioni su hello monitoraggio funzionalità di Gateway applicazione Azure"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="87031-103">Panoramica del monitoraggio dell'integrità del gateway applicazione</span><span class="sxs-lookup"><span data-stu-id="87031-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="87031-104">Gateway applicazione Azure per impostazione predefinita Controlla integrità hello di tutte le risorse nel relativo pool back-end e rimuove automaticamente qualsiasi risorsa considerato non integro dal pool hello.</span><span class="sxs-lookup"><span data-stu-id="87031-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="87031-105">Gateway applicazione continua a istanze di tipo non integro hello toomonitor e li aggiunge eseguire il pool back-end integro toohello quando diventano disponibili e rispondono toohealth probe.</span><span class="sxs-lookup"><span data-stu-id="87031-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="87031-106">Gateway applicazione invia hello probe di integrità con hello è definita nelle impostazioni HTTP back-end di hello stessa porta.</span><span class="sxs-lookup"><span data-stu-id="87031-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="87031-107">Questa configurazione assicura che probe hello è test hello stessa porta che i clienti utilizzassero back-end toohello tooconnect.</span><span class="sxs-lookup"><span data-stu-id="87031-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![Esempio di probe del gateway applicazione][1]

<span data-ttu-id="87031-109">In aggiunta toousing predefinito probe monitoraggio dell'integrità, è anche possibile personalizzare toosuit probe di integrità hello i requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="87031-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="87031-110">In questo articolo vengono illustrati i probe di integrità predefiniti e personalizzati.</span><span class="sxs-lookup"><span data-stu-id="87031-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="87031-111">Se nella subnet del Gateway applicazione è presente un gruppo, gli intervalli di porte 65503 65534 devono essere aperta sulla subnet di Gateway applicazione hello per il traffico in ingresso.</span><span class="sxs-lookup"><span data-stu-id="87031-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="87031-112">Queste porte sono obbligatorie per hello back-end integrità API toowork.</span><span class="sxs-lookup"><span data-stu-id="87031-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="87031-113">Probe di integrità predefinito</span><span class="sxs-lookup"><span data-stu-id="87031-113">Default health probe</span></span>

<span data-ttu-id="87031-114">Un gateway applicazione configura automaticamente un probe di integrità predefinito quando non si configura nessuna configurazione di probe personalizzato.</span><span class="sxs-lookup"><span data-stu-id="87031-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="87031-115">Hello monitoraggio comportamento consente di rendere che gli indirizzi IP toohello richiesta HTTP configurati per il pool back-end hello.</span><span class="sxs-lookup"><span data-stu-id="87031-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="87031-116">Per le ricerche predefinito se le impostazioni http back-end di hello sono configurate per HTTPS, probe hello usa HTTPS come integrità tootest e di back-end hello.</span><span class="sxs-lookup"><span data-stu-id="87031-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="87031-117">Ad esempio: configurare l'applicazione gateway toouse server back-end A, B e C tooreceive HTTP il traffico di rete sulla porta 80.</span><span class="sxs-lookup"><span data-stu-id="87031-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="87031-118">il monitoraggio dello stato predefinito di Hello verifica tre server hello ogni 30 secondi per una risposta HTTP integro.</span><span class="sxs-lookup"><span data-stu-id="87031-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="87031-119">Una risposta HTTP integra ha un [codice di stato](https://msdn.microsoft.com/library/aa287675.aspx) compreso tra 200 e 399.</span><span class="sxs-lookup"><span data-stu-id="87031-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="87031-120">Se il controllo di probe predefinito hello non riesce per server A, gateway applicazione hello rimuoverlo dal pool back-end e il traffico di rete viene interrotto il flusso di toothis server.</span><span class="sxs-lookup"><span data-stu-id="87031-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="87031-121">probe predefinito Hello continuerà toocheck per server un ogni 30 secondi.</span><span class="sxs-lookup"><span data-stu-id="87031-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="87031-122">Quando il server A risponde correttamente tooone richiesta da un probe di integrità predefinito, viene aggiunto nuovamente come pool back-end toohello integra e avvia il traffico propagazione server toohello nuovamente.</span><span class="sxs-lookup"><span data-stu-id="87031-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="87031-123">Impostazioni del probe di integrità predefinito</span><span class="sxs-lookup"><span data-stu-id="87031-123">Default health probe settings</span></span>

| <span data-ttu-id="87031-124">Proprietà probe</span><span class="sxs-lookup"><span data-stu-id="87031-124">Probe property</span></span> | <span data-ttu-id="87031-125">Valore</span><span class="sxs-lookup"><span data-stu-id="87031-125">Value</span></span> | <span data-ttu-id="87031-126">Descrizione</span><span class="sxs-lookup"><span data-stu-id="87031-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="87031-127">URL probe</span><span class="sxs-lookup"><span data-stu-id="87031-127">Probe URL</span></span> |<span data-ttu-id="87031-128">http://127.0.0.1:\<porta\>/</span><span class="sxs-lookup"><span data-stu-id="87031-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="87031-129">Percorso URL</span><span class="sxs-lookup"><span data-stu-id="87031-129">URL path</span></span> |
| <span data-ttu-id="87031-130">Interval</span><span class="sxs-lookup"><span data-stu-id="87031-130">Interval</span></span> |<span data-ttu-id="87031-131">30</span><span class="sxs-lookup"><span data-stu-id="87031-131">30</span></span> |<span data-ttu-id="87031-132">Intervallo di probe in secondi</span><span class="sxs-lookup"><span data-stu-id="87031-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="87031-133">Timeout</span><span class="sxs-lookup"><span data-stu-id="87031-133">Time-out</span></span> |<span data-ttu-id="87031-134">30</span><span class="sxs-lookup"><span data-stu-id="87031-134">30</span></span> |<span data-ttu-id="87031-135">Timeout di probe in secondi</span><span class="sxs-lookup"><span data-stu-id="87031-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="87031-136">Soglia non integra</span><span class="sxs-lookup"><span data-stu-id="87031-136">Unhealthy threshold</span></span> |<span data-ttu-id="87031-137">3</span><span class="sxs-lookup"><span data-stu-id="87031-137">3</span></span> |<span data-ttu-id="87031-138">Numero di tentativi di probe.</span><span class="sxs-lookup"><span data-stu-id="87031-138">Probe retry count.</span></span> <span data-ttu-id="87031-139">server di back-end Hello è contrassegnato come inattivo dopo il conteggio degli errori di probe consecutivi hello raggiunge la soglia non integra hello.</span><span class="sxs-lookup"><span data-stu-id="87031-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="87031-140">Hello porta è hello stessa porta come impostazioni HTTP back-end di hello.</span><span class="sxs-lookup"><span data-stu-id="87031-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="87031-141">probe predefinito Hello esamina solo http://127.0.0.1:\<porta\> toodetermine lo stato di integrità.</span><span class="sxs-lookup"><span data-stu-id="87031-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="87031-142">Se è necessario tooconfigure hello integrità toogo tooa personalizzato URL del probe o modificare altre impostazioni, è necessario utilizzare un probe personalizzato come descritto in hello alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="87031-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="87031-143">Probe di integrità personalizzato</span><span class="sxs-lookup"><span data-stu-id="87031-143">Custom health probe</span></span>

<span data-ttu-id="87031-144">Probe personalizzati consentono un controllo più granulare sul monitoraggio dello stato di hello toohave.</span><span class="sxs-lookup"><span data-stu-id="87031-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="87031-145">Quando si utilizzano probe personalizzati, è possibile configurare l'intervallo di probe hello tootest URL e il percorso di hello e quanti tooaccept risposte non riuscito prima di contrassegnare l'istanza del pool back-end di hello come non integro.</span><span class="sxs-lookup"><span data-stu-id="87031-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="87031-146">Impostazioni del probe di integrità personalizzato</span><span class="sxs-lookup"><span data-stu-id="87031-146">Custom health probe settings</span></span>

<span data-ttu-id="87031-147">Hello nella tabella seguente vengono fornite le definizioni per le proprietà di hello un probe di stato personalizzati.</span><span class="sxs-lookup"><span data-stu-id="87031-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="87031-148">Proprietà probe</span><span class="sxs-lookup"><span data-stu-id="87031-148">Probe property</span></span> | <span data-ttu-id="87031-149">Descrizione</span><span class="sxs-lookup"><span data-stu-id="87031-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="87031-150">Nome</span><span class="sxs-lookup"><span data-stu-id="87031-150">Name</span></span> |<span data-ttu-id="87031-151">Nome del probe hello.</span><span class="sxs-lookup"><span data-stu-id="87031-151">Name of hello probe.</span></span> <span data-ttu-id="87031-152">Questo nome è di tipo probe toohello toorefer utilizzati nelle impostazioni HTTP back-end.</span><span class="sxs-lookup"><span data-stu-id="87031-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="87031-153">Protocol</span><span class="sxs-lookup"><span data-stu-id="87031-153">Protocol</span></span> |<span data-ttu-id="87031-154">Protocollo utilizzato probe hello toosend.</span><span class="sxs-lookup"><span data-stu-id="87031-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="87031-155">probe Hello hello protocollo definito nelle impostazioni HTTP back-end di hello</span><span class="sxs-lookup"><span data-stu-id="87031-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="87031-156">Host</span><span class="sxs-lookup"><span data-stu-id="87031-156">Host</span></span> |<span data-ttu-id="87031-157">Probe di hello toosend nome host.</span><span class="sxs-lookup"><span data-stu-id="87031-157">Host name toosend hello probe.</span></span> <span data-ttu-id="87031-158">Applicabile solo quando vengono configurati più siti nel gateway applicazione. In caso contrario, usare "127.0.0.1".</span><span class="sxs-lookup"><span data-stu-id="87031-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="87031-159">Questo valore è diverso dal nome host della VM.</span><span class="sxs-lookup"><span data-stu-id="87031-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="87031-160">Path</span><span class="sxs-lookup"><span data-stu-id="87031-160">Path</span></span> |<span data-ttu-id="87031-161">Percorso relativo del probe hello.</span><span class="sxs-lookup"><span data-stu-id="87031-161">Relative path of hello probe.</span></span> <span data-ttu-id="87031-162">path valido Hello inizia con '/'.</span><span class="sxs-lookup"><span data-stu-id="87031-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="87031-163">Interval</span><span class="sxs-lookup"><span data-stu-id="87031-163">Interval</span></span> |<span data-ttu-id="87031-164">Intervallo di probe in secondi.</span><span class="sxs-lookup"><span data-stu-id="87031-164">Probe interval in seconds.</span></span> <span data-ttu-id="87031-165">Questo valore è l'intervallo di tempo hello tra due probe consecutivi.</span><span class="sxs-lookup"><span data-stu-id="87031-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="87031-166">Timeout</span><span class="sxs-lookup"><span data-stu-id="87031-166">Time-out</span></span> |<span data-ttu-id="87031-167">Timeout del probe in secondi.</span><span class="sxs-lookup"><span data-stu-id="87031-167">Probe time-out in seconds.</span></span> <span data-ttu-id="87031-168">Se una risposta valida non viene ricevuta entro questo periodo di timeout, probe hello è contrassegnato come non riuscito.</span><span class="sxs-lookup"><span data-stu-id="87031-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="87031-169">Soglia non integra</span><span class="sxs-lookup"><span data-stu-id="87031-169">Unhealthy threshold</span></span> |<span data-ttu-id="87031-170">Numero di tentativi di probe.</span><span class="sxs-lookup"><span data-stu-id="87031-170">Probe retry count.</span></span> <span data-ttu-id="87031-171">server di back-end Hello è contrassegnato come inattivo dopo il conteggio degli errori di probe consecutivi hello raggiunge la soglia non integra hello.</span><span class="sxs-lookup"><span data-stu-id="87031-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="87031-172">Se il Gateway applicazione è configurato per un singolo sito, da hello predefinito Host nome deve essere specificato come '127.0.0.1', se non diversamente configurato in probe personalizzato.</span><span class="sxs-lookup"><span data-stu-id="87031-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="87031-173">Per il riferimento viene inviato un probe personalizzato\<protocollo\>://\<host\>:\<porta\>\<percorso\>.</span><span class="sxs-lookup"><span data-stu-id="87031-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="87031-174">Hello porta utilizzata sarà hello stessa porta, come definito nelle impostazioni HTTP back-end di hello.</span><span class="sxs-lookup"><span data-stu-id="87031-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="87031-175">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="87031-175">Next steps</span></span>
<span data-ttu-id="87031-176">Dopo aver imparare il monitoraggio dello stato di Gateway applicazione, è possibile configurare un [probe di integrità personalizzato](application-gateway-create-probe-portal.md) nel portale di Azure hello o un [probe di integrità personalizzato](application-gateway-create-probe-ps.md) tramite PowerShell e hello Azure Resource Manager modello di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="87031-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
