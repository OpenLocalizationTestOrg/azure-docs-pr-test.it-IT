---
title: le connessioni in uscita aaaUnderstanding in Azure | Documenti Microsoft
description: Questo articolo spiega come Azure consente toocommunicate di macchine virtuali con i servizi Internet pubblica.
services: load-balancer
documentationcenter: na
author: kumudd
manager: timlt
editor: 
ms.assetid: 5f666f2a-3a63-405a-abcd-b2e34d40e001
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 5/31/2017
ms.author: kumud
ms.openlocfilehash: ffe59971b934a16c9f6f78e3b15869a0072320d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="understanding-outbound-connections-in-azure"></a><span data-ttu-id="ac1d1-103">Informazioni sulle connessioni in uscita in Azure</span><span class="sxs-lookup"><span data-stu-id="ac1d1-103">Understanding outbound connections in Azure</span></span>

<span data-ttu-id="ac1d1-104">Una macchina virtuale (VM) in Azure può comunicare con endpoint all'esterno di Azure nello spazio di indirizzi IP pubblici.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-104">A Virtual Machine (VM) in Azure can communicate with endpoints outside of Azure in public IP address space.</span></span> <span data-ttu-id="ac1d1-105">Quando una macchina virtuale viene avviata una destinazione del flusso in uscita di tooa nello spazio di indirizzi IP pubblico, Azure esegue il mapping privata tooa pubblica indirizzo IP della macchina virtuale di hello e consente di hello tooreach il traffico di ritorno macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-105">When a VM initiates an outbound flow tooa destination in public IP address space, Azure maps hello VM's private IP address tooa public IP address and allows return traffic tooreach hello VM.</span></span>

<span data-ttu-id="ac1d1-106">Azure offre tre modi diversi di connettività in uscita tooachieve.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-106">Azure provides three different methods tooachieve outbound connectivity.</span></span> <span data-ttu-id="ac1d1-107">Ogni metodo ha funzionalità e vincoli specifici.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-107">Each method has its own capabilities and constraints.</span></span> <span data-ttu-id="ac1d1-108">Leggere attentamente ogni metodo toochoose quello che soddisfa le proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-108">Review each method carefully toochoose which one meets your needs.</span></span>

| <span data-ttu-id="ac1d1-109">Scenario</span><span class="sxs-lookup"><span data-stu-id="ac1d1-109">Scenario</span></span> | <span data-ttu-id="ac1d1-110">Metodo</span><span class="sxs-lookup"><span data-stu-id="ac1d1-110">Method</span></span> | <span data-ttu-id="ac1d1-111">Nota</span><span class="sxs-lookup"><span data-stu-id="ac1d1-111">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ac1d1-112">Macchina virtuale autonoma (nessun bilanciamento del carico, nessun indirizzo IP pubblico a livello di istanza)</span><span class="sxs-lookup"><span data-stu-id="ac1d1-112">Standalone VM (no load balancer, no Instance Level Public IP address)</span></span> |<span data-ttu-id="ac1d1-113">SNAT predefinito</span><span class="sxs-lookup"><span data-stu-id="ac1d1-113">Default SNAT</span></span> |<span data-ttu-id="ac1d1-114">Azure associa un indirizzo IP pubblico per SNAT</span><span class="sxs-lookup"><span data-stu-id="ac1d1-114">Azure associates a public IP address for SNAT</span></span> |
| <span data-ttu-id="ac1d1-115">Macchina virtuale con carico bilanciato (nessun indirizzo IP pubblico a livello di istanza nella VM)</span><span class="sxs-lookup"><span data-stu-id="ac1d1-115">Load-balanced VM (no Instance Level Public IP address on VM)</span></span> |<span data-ttu-id="ac1d1-116">Utilizzo di bilanciamento del carico hello SNAT</span><span class="sxs-lookup"><span data-stu-id="ac1d1-116">SNAT using hello load balancer</span></span> |<span data-ttu-id="ac1d1-117">Azure Usa un indirizzo IP pubblico del servizio di bilanciamento del carico hello per SNAT</span><span class="sxs-lookup"><span data-stu-id="ac1d1-117">Azure uses a public IP address of hello Load Balancer for SNAT</span></span> |
| <span data-ttu-id="ac1d1-118">Macchina virtuale con indirizzo IP pubblico a livello di istanza (con o senza bilanciamento del carico)</span><span class="sxs-lookup"><span data-stu-id="ac1d1-118">VM with Instance Level Public IP address (with or without load balancer)</span></span> |<span data-ttu-id="ac1d1-119">SNAT non usato</span><span class="sxs-lookup"><span data-stu-id="ac1d1-119">SNAT is not used</span></span> |<span data-ttu-id="ac1d1-120">Azure Usa hello IP pubblico assegnato toohello VM</span><span class="sxs-lookup"><span data-stu-id="ac1d1-120">Azure uses hello public IP assigned toohello VM</span></span> |

<span data-ttu-id="ac1d1-121">Se non si desidera toocommunicate una macchina virtuale con gli endpoint all'esterno di Azure nello spazio di indirizzi IP pubblico, è possibile utilizzare accesso tooblock di sicurezza gruppi (rete).</span><span class="sxs-lookup"><span data-stu-id="ac1d1-121">If you do not want a VM toocommunicate with endpoints outside of Azure in public IP address space, you can use Network Security Groups (NSG) tooblock access.</span></span> <span data-ttu-id="ac1d1-122">Per informazioni più dettagliate sull'uso dei gruppi di sicurezza di rete, vedere [Prevenzione della connettività pubblica](#preventing-public-connectivity).</span><span class="sxs-lookup"><span data-stu-id="ac1d1-122">Using NSGs is discussed in more detail in [Preventing Public Connectivity](#preventing-public-connectivity).</span></span>

## <a name="standalone-vm-with-no-instance-level-public-ip-address"></a><span data-ttu-id="ac1d1-123">Macchina virtuale autonoma senza indirizzo IP pubblico a livello di istanza</span><span class="sxs-lookup"><span data-stu-id="ac1d1-123">Standalone VM with no Instance Level Public IP address</span></span>

<span data-ttu-id="ac1d1-124">In questo scenario, hello VM non fa parte di un pool di bilanciamento del carico di Azure e non dispone di un indirizzo di istanza livello pubblica IP (ILPIP) assegnato tooit.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-124">In this scenario, hello VM is not part of an Azure Load Balancer pool and does not have an Instance Level Public IP (ILPIP) address assigned tooit.</span></span> <span data-ttu-id="ac1d1-125">Quando hello macchina virtuale viene creato un flusso in uscita, Azure traduce l'indirizzo IP di origine privata hello dell'indirizzo IP di hello flusso in uscita tooa origine pubblico.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-125">When hello VM creates an outbound flow, Azure translates hello private source IP address of hello outbound flow tooa public source IP address.</span></span> <span data-ttu-id="ac1d1-126">indirizzo IP pubblico Hello utilizzato per il flusso in uscita non è configurabile e non si tiene conto per limite di risorse IP pubbliche della sottoscrizione hello.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-126">hello public IP address used for this outbound flow is not configurable and does not count against hello subscription's public IP resource limit.</span></span> <span data-ttu-id="ac1d1-127">Azure Usa tooperform origine rete indirizzo traduzione (SNAT) questa funzione.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-127">Azure uses Source Network Address Translation (SNAT) tooperform this function.</span></span> <span data-ttu-id="ac1d1-128">Porte effimere dell'indirizzo IP pubblico hello sono flussi di singoli toodistinguish utilizzati originati dal hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-128">Ephemeral ports of hello public IP address are used toodistinguish individual flows originated by hello VM.</span></span> <span data-ttu-id="ac1d1-129">SNAT assegna dinamicamente le porte temporanee dopo che sono stati creati i flussi.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-129">SNAT dynamically allocates ephemeral ports when flows are created.</span></span> <span data-ttu-id="ac1d1-130">In questo contesto, porte effimere di hello utilizzate per SNAT sono le porte SNAT tooas cui viene fatto riferimento.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-130">In this context, hello ephemeral ports used for SNAT are referred tooas SNAT ports.</span></span>

<span data-ttu-id="ac1d1-131">Le porte SNAT sono una risorsa limitata che può esaurirsi.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-131">SNAT ports are a finite resource that can be exhausted.</span></span> <span data-ttu-id="ac1d1-132">È importante toounderstand la modalità di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-132">It is important toounderstand how they are consumed.</span></span> <span data-ttu-id="ac1d1-133">Una porta SNAT viene consumata da ciascun flusso tooa singolo indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-133">One SNAT port is consumed per flow tooa single destination IP address.</span></span> <span data-ttu-id="ac1d1-134">Per più flussi toohello stesso indirizzo IP, ogni flusso utilizza una singola porta SNAT.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-134">For multiple flows toohello same destination IP address, each flow consumes a single SNAT port.</span></span> <span data-ttu-id="ac1d1-135">Ciò garantisce che i flussi di hello siano univoco quando ha avuto origine hello stesso toohello di indirizzo IP pubblico stesso indirizzo IP di destinazione.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-135">This ensures that hello flows are unique when originated from hello same public IP address toohello same destination IP address.</span></span> <span data-ttu-id="ac1d1-136">Più flussi, ogni indirizzo IP di destinazione diverse tooa utilizzano una singola porta SNAT per ogni destinazione.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-136">Multiple flows, each tooa different destination IP address consume a single SNAT port per destination.</span></span> <span data-ttu-id="ac1d1-137">indirizzo IP di destinazione Hello rende hello flussi univoco.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-137">hello destination IP address makes hello flows unique.</span></span>

<span data-ttu-id="ac1d1-138">È possibile utilizzare [Log Analitica di bilanciamento del carico](load-balancer-monitor-log.md) e [toomonitor i registri eventi di avviso per i messaggi di esaurimento delle porte SNAT](load-balancer-monitor-log.md#alert-event-log).</span><span class="sxs-lookup"><span data-stu-id="ac1d1-138">You can use [Log Analytics for Load Balancer](load-balancer-monitor-log.md) and [Alert event logs toomonitor for SNAT port exhaustion messages](load-balancer-monitor-log.md#alert-event-log).</span></span> <span data-ttu-id="ac1d1-139">Quando si esauriscono le risorse di porte SNAT, i flussi in uscita vengono completati dopo che le porte SNAT sono state rilasciate da flussi esistenti.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-139">When SNAT port resources are exhausted, outbound flows fail until SNAT ports are released by existing flows.</span></span> <span data-ttu-id="ac1d1-140">Il timeout di inattività di Load Balancer è di 4 minuti per il recupero di porte SNAT.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-140">Load Balancer uses a 4-minute idle timeout for reclaiming SNAT ports.</span></span>

## <a name="load-balanced-vm-with-no-instance-level-public-ip-address"></a><span data-ttu-id="ac1d1-141">Macchina virtuale con carico bilanciato senza indirizzo IP pubblico a livello di istanza</span><span class="sxs-lookup"><span data-stu-id="ac1d1-141">Load-balanced VM with no Instance Level Public IP address</span></span>

<span data-ttu-id="ac1d1-142">In questo scenario, hello macchina virtuale fa parte di un pool di bilanciamento del carico di Azure.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-142">In this scenario, hello VM is part of an Azure Load Balancer pool.</span></span>  <span data-ttu-id="ac1d1-143">Hello macchina virtuale non dispone di un indirizzo IP pubblico assegnato tooit.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-143">hello VM does not have a public IP address assigned tooit.</span></span> <span data-ttu-id="ac1d1-144">Hello risorsa di bilanciamento del carico deve essere configurato con un regola toolink hello pubblico IP front-end con pool back-end hello.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-144">hello Load Balancer resource must be configured with a rule toolink hello public IP frontend with hello backend pool.</span></span>  <span data-ttu-id="ac1d1-145">Se non si completa questa configurazione, il comportamento di hello è come descritto nella sezione hello sopra per [Standalone VM con nessun IP pubblico a livello di istanza](load-balancer-outbound-connections.md#standalone-vm-with-no-instance-level-public-ip-address).</span><span class="sxs-lookup"><span data-stu-id="ac1d1-145">If you do not complete this configuration, hello behavior is as described in hello section above for [Standalone VM with no Instance Level Public IP](load-balancer-outbound-connections.md#standalone-vm-with-no-instance-level-public-ip-address).</span></span>

<span data-ttu-id="ac1d1-146">Quando hello macchina virtuale con bilanciamento del carico viene creato un flusso in uscita, Azure traduce l'indirizzo IP di origine privata hello di hello flusso in uscita toohello indirizzo IP pubblico del hello pubblico front-end bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-146">When hello load-balanced VM creates an outbound flow, Azure translates hello private source IP address of hello outbound flow toohello public IP address of hello public Load Balancer frontend.</span></span> <span data-ttu-id="ac1d1-147">Azure Usa tooperform origine rete indirizzo traduzione (SNAT) questa funzione.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-147">Azure uses Source Network Address Translation (SNAT) tooperform this function.</span></span> <span data-ttu-id="ac1d1-148">Porte effimere dell'indirizzo IP pubblico del bilanciamento carico di hello sono flussi di singoli toodistinguish utilizzati originati dal hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-148">Ephemeral ports of hello Load Balancer's public IP address are used toodistinguish individual flows originated by hello VM.</span></span> <span data-ttu-id="ac1d1-149">SNAT assegna dinamicamente le porte temporanee dopo che sono stati creati i flussi in uscita.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-149">SNAT dynamically allocates ephemeral ports when outbound flows are created.</span></span> <span data-ttu-id="ac1d1-150">In questo contesto, porte effimere di hello utilizzate per SNAT sono le porte SNAT tooas cui viene fatto riferimento.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-150">In this context, hello ephemeral ports used for SNAT are referred tooas SNAT ports.</span></span>

<span data-ttu-id="ac1d1-151">Le porte SNAT sono una risorsa limitata che può esaurirsi.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-151">SNAT ports are a finite resource that can be exhausted.</span></span> <span data-ttu-id="ac1d1-152">È importante toounderstand la modalità di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-152">It is important toounderstand how they are consumed.</span></span> <span data-ttu-id="ac1d1-153">Una porta SNAT viene consumata da ciascun flusso tooa singolo indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-153">One SNAT port is consumed per flow tooa single destination IP address.</span></span> <span data-ttu-id="ac1d1-154">Per più flussi toohello stesso indirizzo IP, ogni flusso utilizza una singola porta SNAT.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-154">For multiple flows toohello same destination IP address, each flow consumes a single SNAT port.</span></span> <span data-ttu-id="ac1d1-155">Ciò garantisce che i flussi di hello siano univoco quando ha avuto origine hello stesso toohello di indirizzo IP pubblico stesso indirizzo IP di destinazione.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-155">This ensures that hello flows are unique when originated from hello same public IP address toohello same destination IP address.</span></span> <span data-ttu-id="ac1d1-156">Più flussi, ogni indirizzo IP di destinazione diverse tooa utilizzano una singola porta SNAT per ogni destinazione.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-156">Multiple flows, each tooa different destination IP address consume a single SNAT port per destination.</span></span> <span data-ttu-id="ac1d1-157">indirizzo IP di destinazione Hello rende hello flussi univoco.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-157">hello destination IP address makes hello flows unique.</span></span>

<span data-ttu-id="ac1d1-158">È possibile utilizzare [Log Analitica di bilanciamento del carico](load-balancer-monitor-log.md) e [toomonitor i registri eventi di avviso per i messaggi di esaurimento delle porte SNAT](load-balancer-monitor-log.md#alert-event-log).</span><span class="sxs-lookup"><span data-stu-id="ac1d1-158">You can use [Log Analytics for Load Balancer](load-balancer-monitor-log.md) and [Alert event logs toomonitor for SNAT port exhaustion messages](load-balancer-monitor-log.md#alert-event-log).</span></span> <span data-ttu-id="ac1d1-159">Quando si esauriscono le risorse di porte SNAT, i flussi in uscita vengono completati dopo che le porte SNAT sono state rilasciate da flussi esistenti.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-159">When SNAT port resources are exhausted, outbound flows fail until SNAT ports are released by existing flows.</span></span> <span data-ttu-id="ac1d1-160">Il timeout di inattività di Load Balancer è di 4 minuti per il recupero di porte SNAT.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-160">Load Balancer uses a 4-minute idle timeout for reclaiming SNAT ports.</span></span>

## <a name="vm-with-an-instance-level-public-ip-address-with-or-without-load-balancer"></a><span data-ttu-id="ac1d1-161">Macchina virtuale con indirizzo IP pubblico a livello di istanza (con o senza bilanciamento del carico)</span><span class="sxs-lookup"><span data-stu-id="ac1d1-161">VM with an Instance Level Public IP address (with or without Load Balancer)</span></span>

<span data-ttu-id="ac1d1-162">In questo scenario, hello VM dispone di un'istanza livello pubblica IP (ILPIP) assegnato tooit.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-162">In this scenario, hello VM has an Instance Level Public IP (ILPIP) assigned tooit.</span></span> <span data-ttu-id="ac1d1-163">Non è importante se hello macchina virtuale con carico bilanciato o non.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-163">It does not matter whether hello VM is load balanced or not.</span></span> <span data-ttu-id="ac1d1-164">Quando si usa un IP pubblico a livello di istanza, non si applica SNAT.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-164">When an ILPIP is used, Source Network Address Translation (SNAT) is not used.</span></span> <span data-ttu-id="ac1d1-165">Hello VM utilizza hello ILPIP per tutti i flussi in uscita.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-165">hello VM uses hello ILPIP for all outbound flows.</span></span> <span data-ttu-id="ac1d1-166">Se l'applicazione avvia numerosi flussi in uscita e si verifica un esaurimento SNAT, è consigliabile assegnare un tooavoid ILPIP vincoli SNAT.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-166">If your application initiates many outbound flows and you experience SNAT exhaustion, you should consider assigning an ILPIP tooavoid SNAT constraints.</span></span>

## <a name="discovering-hello-public-ip-used-by-a-given-vm"></a><span data-ttu-id="ac1d1-167">Individuazione hello utilizzato da una macchina virtuale specificata indirizzo IP pubblico</span><span class="sxs-lookup"><span data-stu-id="ac1d1-167">Discovering hello public IP used by a given VM</span></span>

<span data-ttu-id="ac1d1-168">Esistono diversi modi toodetermine hello pubblica indirizzo IP di origine di una connessione in uscita.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-168">There are many ways toodetermine hello public source IP address of an outbound connection.</span></span> <span data-ttu-id="ac1d1-169">OpenDNS fornisce un servizio che consente di visualizzare hello indirizzo IP pubblico della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-169">OpenDNS provides a service that can show you hello public IP address of your VM.</span></span> <span data-ttu-id="ac1d1-170">Uso del comando nslookup hello, è possibile inviare una query DNS per il resolver OpenDNS toohello di hello nomi myip.opendns.com.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-170">Using hello nslookup command, you can send a DNS query for hello name myip.opendns.com toohello OpenDNS resolver.</span></span> <span data-ttu-id="ac1d1-171">servizio Hello restituisce hello origine IP che è stata query hello toosend utilizzato.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-171">hello service returns hello source IP address that was used toosend hello query.</span></span> <span data-ttu-id="ac1d1-172">Quando si esegue hello seguendo query dalla macchina virtuale, la risposta hello è hello che IP pubblico utilizzato per la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-172">When you execute hello following query from your VM, hello response is hello public IP used for that VM.</span></span>

    nslookup myip.opendns.com resolver1.opendns.com

## <a name="preventing-public-connectivity"></a><span data-ttu-id="ac1d1-173">Prevenzione della connettività pubblica</span><span class="sxs-lookup"><span data-stu-id="ac1d1-173">Preventing Public Connectivity</span></span>

<span data-ttu-id="ac1d1-174">In alcuni casi non è auspicabile per una macchina virtuale toobe consentito toocreate un flusso in uscita oppure potrebbero esserci toomanage un requisito che le destinazioni raggiungibili con flussi in uscita.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-174">Sometimes it is undesirable for a VM toobe allowed toocreate an outbound flow or there may be a requirement toomanage which destinations can be reached with outbound flows.</span></span> <span data-ttu-id="ac1d1-175">In questo caso, utilizzare [gruppi di sicurezza (rete)](../virtual-network/virtual-networks-nsg.md) toomanage hello destinazioni che hello VM può raggiungere.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-175">In this case, you use [Network Security Groups (NSG)](../virtual-network/virtual-networks-nsg.md) toomanage hello destinations that hello VM can reach.</span></span> <span data-ttu-id="ac1d1-176">Quando si applica un gruppo tooa con bilanciamento del carico macchina virtuale, è necessario toopay attenzione toohello [predefinito tag](../virtual-network/virtual-networks-nsg.md#default-tags) e [regole predefinite](../virtual-network/virtual-networks-nsg.md#default-rules).</span><span class="sxs-lookup"><span data-stu-id="ac1d1-176">When you apply an NSG tooa load-balanced VM, you need toopay attention toohello [default tags](../virtual-network/virtual-networks-nsg.md#default-tags) and [default rules](../virtual-network/virtual-networks-nsg.md#default-rules).</span></span>

<span data-ttu-id="ac1d1-177">È necessario assicurarsi che hello VM può ricevere le richieste di probe di integrità dal bilanciamento del carico di Azure.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-177">You must ensure that hello VM can receive health probe requests from Azure Load Balancer.</span></span> <span data-ttu-id="ac1d1-178">Se un gruppo blocchi probe le richieste di integrità da hello tag predefinito AZURE_LOADBALANCER, i probe di integrità macchina virtuale non riesce e hello macchina virtuale è contrassegnato come inattivo.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-178">If an NSG blocks health probe requests from hello AZURE_LOADBALANCER default tag, your VM health probe fails and hello VM is marked down.</span></span> <span data-ttu-id="ac1d1-179">Servizio di bilanciamento del carico interrompe l'invio di nuovi flussi toothat macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-179">Load Balancer stops sending new flows toothat VM.</span></span>

## <a name="limitations"></a><span data-ttu-id="ac1d1-180">Limitazioni</span><span class="sxs-lookup"><span data-stu-id="ac1d1-180">Limitations</span></span>

<span data-ttu-id="ac1d1-181">Se [a un servizio di bilanciamento del carico sono associati più indirizzi IP (pubblici)](load-balancer-multivip-overview.md), uno qualsiasi di questi IP indirizzi pubblici è idoneo per i flussi in uscita.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-181">If [multiple (public) IP addresses are associated with a load balancer](load-balancer-multivip-overview.md), any of these public IP addresses are a candidate for outbound flows.</span></span>

<span data-ttu-id="ac1d1-182">Azure Usa un numero di hello toodetermine algoritmo di SNAT porte disponibili in base alle dimensioni di hello del pool di hello.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-182">Azure uses an algorithm toodetermine hello number of SNAT ports available based on hello size of hello pool.</span></span>  <span data-ttu-id="ac1d1-183">Al momento questo parametro non è configurabile.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-183">This is not configurable at this time.</span></span>

<span data-ttu-id="ac1d1-184">È importante toorememember che hello numero di porte SNAT disponibili non convertiti direttamente toonumber di connessioni.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-184">It is important toorememember that hello number of SNAT ports available does not translate directly toonumber of connections.</span></span> <span data-ttu-id="ac1d1-185">Vedi sopra per informazioni dettagliate su quando e come vengono allocate porte SNAT e come toomanage esauribile risorsa.</span><span class="sxs-lookup"><span data-stu-id="ac1d1-185">Please see above for specifics on when and how SNAT ports are allocated and how toomanage this exhaustible resource.</span></span>
