---
title: aaaProgramming Guida per gli hub di eventi di Azure | Documenti Microsoft
description: Scrivere codice per gli hub di eventi di Azure utilizzando hello Azure .NET SDK.
services: event-hubs
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 64cbfd3d-4a0e-4455-a90a-7f3d4f080323
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: tbd
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: 43bebd126c2311af9e3daeb52324132b66cf0884
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="event-hubs-programming-guide"></a><span data-ttu-id="f020a-103">Guida alla programmazione di Hub eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-103">Event Hubs programming guide</span></span>

<span data-ttu-id="f020a-104">In questo articolo vengono illustrati alcuni scenari comuni nella scrittura del codice tramite hub di eventi di Azure e hello Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="f020a-104">This article discusses some common scenarios in writing code using Azure Event Hubs and hello Azure .NET SDK.</span></span> <span data-ttu-id="f020a-105">Si presuppone una conoscenza preliminare di Hub eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-105">It assumes a preliminary understanding of Event Hubs.</span></span> <span data-ttu-id="f020a-106">Per una panoramica concettuale di hub eventi, vedere hello [Panoramica di hub eventi](event-hubs-what-is-event-hubs.md).</span><span class="sxs-lookup"><span data-stu-id="f020a-106">For a conceptual overview of Event Hubs, see hello [Event Hubs overview](event-hubs-what-is-event-hubs.md).</span></span>

## <a name="event-publishers"></a><span data-ttu-id="f020a-107">Publisher di eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-107">Event publishers</span></span>

<span data-ttu-id="f020a-108">Si invia l'hub di eventi eventi tooan usando HTTP POST o tramite una connessione AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="f020a-108">You send events tooan event hub either using HTTP POST or via an AMQP 1.0 connection.</span></span> <span data-ttu-id="f020a-109">scelta di quali toouse Hello e quando dipende hello scenario specifico.</span><span class="sxs-lookup"><span data-stu-id="f020a-109">hello choice of which toouse and when depends on hello specific scenario being addressed.</span></span> <span data-ttu-id="f020a-110">Le connessioni AMQP 1.0 sono misurate come connessioni negoziate nel bus di servizio e sono più appropriate in scenari in cui sono frequenti volumi di messaggi più elevati e con requisiti di latenza inferiori, perché offrono un canale di messaggistica persistente.</span><span class="sxs-lookup"><span data-stu-id="f020a-110">AMQP 1.0 connections are metered as brokered connections in Service Bus and are more appropriate in scenarios with frequent higher message volumes and lower latency requirements, as they provide a persistent messaging channel.</span></span>

<span data-ttu-id="f020a-111">Per creare e gestire hub eventi utilizzando hello [NamespaceManager][] classe.</span><span class="sxs-lookup"><span data-stu-id="f020a-111">You create and manage Event Hubs using hello [NamespaceManager][] class.</span></span> <span data-ttu-id="f020a-112">Quando si utilizza .NET hello gestito API, hello primario costrutti per la pubblicazione di dati tooEvent gli hub sono hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) e [EventData][] classi.</span><span class="sxs-lookup"><span data-stu-id="f020a-112">When using hello .NET managed APIs, hello primary constructs for publishing data tooEvent Hubs are hello [EventHubClient](/dotnet/api/microsoft.servicebus.messaging.eventhubclient) and [EventData][] classes.</span></span> <span data-ttu-id="f020a-113">[EventHubClient][] fornisce canale di comunicazione AMQP hello in cui gli eventi vengono inviati toohello hub di eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-113">[EventHubClient][] provides hello AMQP communication channel over which events are sent toohello event hub.</span></span> <span data-ttu-id="f020a-114">Hello [EventData][] classe rappresenta un evento ed è l'hub di eventi utilizzati toopublish messaggi tooan.</span><span class="sxs-lookup"><span data-stu-id="f020a-114">hello [EventData][] class represents an event, and is used toopublish messages tooan event hub.</span></span> <span data-ttu-id="f020a-115">Questa classe include informazioni di intestazione sull'evento hello corpo hello e alcuni metadati.</span><span class="sxs-lookup"><span data-stu-id="f020a-115">This class includes hello body, some metadata, and header information about hello event.</span></span> <span data-ttu-id="f020a-116">Altre proprietà vengono aggiunte toohello [EventData][] oggetto durante il passaggio attraverso un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-116">Other properties are added toohello [EventData][] object as it passes through an event hub.</span></span>

## <a name="get-started"></a><span data-ttu-id="f020a-117">Attività iniziali</span><span class="sxs-lookup"><span data-stu-id="f020a-117">Get started</span></span>

<span data-ttu-id="f020a-118">classi di .NET Hello che supportano hub eventi sono incluse nei hello assembly Microsoft.ServiceBus.dll.</span><span class="sxs-lookup"><span data-stu-id="f020a-118">hello .NET classes that support Event Hubs are provided in hello Microsoft.ServiceBus.dll assembly.</span></span> <span data-ttu-id="f020a-119">Hello più semplice hello tooreference modo API del Bus di servizio e tooconfigure l'applicazione con tutte le dipendenze di Service Bus hello è hello toodownload [pacchetto NuGet di Service Bus](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span><span class="sxs-lookup"><span data-stu-id="f020a-119">hello easiest way tooreference hello Service Bus API and tooconfigure your application with all of hello Service Bus dependencies is toodownload hello [Service Bus NuGet package](https://www.nuget.org/packages/WindowsAzure.ServiceBus).</span></span> <span data-ttu-id="f020a-120">In alternativa, è possibile utilizzare hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="f020a-120">Alternatively, you can use hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) in Visual Studio.</span></span> <span data-ttu-id="f020a-121">toodo in tal caso, eseguire comando in hello seguente hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) finestra:</span><span class="sxs-lookup"><span data-stu-id="f020a-121">toodo so, issue hello following command in hello [Package Manager Console](http://docs.nuget.org/docs/start-here/using-the-package-manager-console) window:</span></span>

```
Install-Package WindowsAzure.ServiceBus
```

## <a name="create-an-event-hub"></a><span data-ttu-id="f020a-122">Creare un hub eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-122">Create an event hub</span></span>
<span data-ttu-id="f020a-123">È possibile utilizzare hello [NamespaceManager][] classe toocreate hub di eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-123">You can use hello [NamespaceManager][] class toocreate Event Hubs.</span></span> <span data-ttu-id="f020a-124">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="f020a-124">For example:</span></span>

```csharp
var manager = new Microsoft.ServiceBus.NamespaceManager("mynamespace.servicebus.windows.net");
var description = manager.CreateEventHub("MyEventHub");
```

<span data-ttu-id="f020a-125">Nella maggior parte dei casi, è consigliabile utilizzare hello [CreateEventHubIfNotExists][] tooavoid metodi generare eccezioni se si riavvia il servizio di hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-125">In most cases, it is recommended that you use hello [CreateEventHubIfNotExists][] methods tooavoid generating exceptions if hello service restarts.</span></span> <span data-ttu-id="f020a-126">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="f020a-126">For example:</span></span>

```csharp
var description = manager.CreateEventHubIfNotExists("MyEventHub");
```

<span data-ttu-id="f020a-127">Tutte le operazioni di creazione di hub eventi, inclusi [CreateEventHubIfNotExists][], richiedono **Gestisci** autorizzazioni nello spazio dei nomi hello in questione.</span><span class="sxs-lookup"><span data-stu-id="f020a-127">All Event Hubs creation operations, including [CreateEventHubIfNotExists][], require **Manage** permissions on hello namespace in question.</span></span> <span data-ttu-id="f020a-128">Se si desidera che le autorizzazioni hello toolimit delle applicazioni publisher o consumer, è possibile evitare queste creare chiamate dell'operazione nel codice di produzione quando si usano credenziali con autorizzazioni limitate.</span><span class="sxs-lookup"><span data-stu-id="f020a-128">If you want toolimit hello permissions of your publisher or consumer applications, you can avoid these create operation calls in production code when you use credentials with limited permissions.</span></span>

<span data-ttu-id="f020a-129">Hello [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) classe contiene informazioni dettagliate su un hub eventi, inclusi le regole di autorizzazione hello, intervallo di conservazione dei messaggi hello, ID di partizione, lo stato e percorso.</span><span class="sxs-lookup"><span data-stu-id="f020a-129">hello [EventHubDescription](/dotnet/api/microsoft.servicebus.messaging.eventhubdescription) class contains details about an event hub, including hello authorization rules, hello message retention interval, partition IDs, status, and path.</span></span> <span data-ttu-id="f020a-130">È possibile utilizzare questi metadati hello tooupdate di classe in un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-130">You can use this class tooupdate hello metadata on an event hub.</span></span>

## <a name="create-an-event-hubs-client"></a><span data-ttu-id="f020a-131">Creare un client di Hub eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-131">Create an Event Hubs client</span></span>
<span data-ttu-id="f020a-132">Hello classe primaria per l'interazione con hub eventi è [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span><span class="sxs-lookup"><span data-stu-id="f020a-132">hello primary class for interacting with Event Hubs is [Microsoft.ServiceBus.Messaging.EventHubClient][EventHubClient].</span></span> <span data-ttu-id="f020a-133">Questa classe fornisce funzionalità di mittente e destinatario.</span><span class="sxs-lookup"><span data-stu-id="f020a-133">This class provides both sender and receiver capabilities.</span></span> <span data-ttu-id="f020a-134">È possibile creare un'istanza di questa classe utilizzando hello [crea](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) (metodo), come illustrato nell'esempio seguente hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-134">You can instantiate this class using hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient.create) method, as shown in hello following example.</span></span>

```csharp
var client = EventHubClient.Create(description.Path);
```

<span data-ttu-id="f020a-135">Questo metodo utilizza informazioni di connessione del Bus di servizio hello nel file app. config hello nella hello `appSettings` sezione.</span><span class="sxs-lookup"><span data-stu-id="f020a-135">This method uses hello Service Bus connection information in hello App.config file, in hello `appSettings` section.</span></span> <span data-ttu-id="f020a-136">Per un esempio di hello `appSettings` XML informazioni di connessione del Bus di servizio toostore hello, vedere la documentazione di hello per hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) metodo.</span><span class="sxs-lookup"><span data-stu-id="f020a-136">For an example of hello `appSettings` XML used toostore hello Service Bus connection information, see hello documentation for hello [Microsoft.ServiceBus.Messaging.EventHubClient.Create(System.String)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method.</span></span>

<span data-ttu-id="f020a-137">Un'altra opzione consiste client hello toocreate da una stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="f020a-137">Another option is toocreate hello client from a connection string.</span></span> <span data-ttu-id="f020a-138">Questa opzione funziona bene quando si usano i ruoli di lavoro di Azure, poiché è possibile archiviare la stringa hello nelle proprietà di configurazione hello di thread di lavoro hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-138">This option works well when using Azure worker roles, because you can store hello string in hello configuration properties for hello worker.</span></span> <span data-ttu-id="f020a-139">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="f020a-139">For example:</span></span>

```csharp
EventHubClient.CreateFromConnectionString("your_connection_string");
```

<span data-ttu-id="f020a-140">stringa di connessione Hello sarà in hello stesso formato così come appare nel file app. config hello metodi precedenti hello:</span><span class="sxs-lookup"><span data-stu-id="f020a-140">hello connection string will be in hello same format as it appears in hello App.config file for hello previous methods:</span></span>

```
Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[key]
```

<span data-ttu-id="f020a-141">Infine, è anche possibile toocreate un [EventHubClient][] dell'oggetto da un [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) istanza, come illustrato nell'esempio seguente hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-141">Finally, it is also possible toocreate an [EventHubClient][] object from a [MessagingFactory](/dotnet/api/microsoft.servicebus.messaging.messagingfactory) instance, as shown in hello following example.</span></span>

```csharp
var factory = MessagingFactory.CreateFromConnectionString("your_connection_string");
var client = factory.CreateEventHubClient("MyEventHub");
```

<span data-ttu-id="f020a-142">È importante toonote che ulteriori [EventHubClient][] gli oggetti creati da un'istanza di factory di messaggistica riutilizzerà hello stessa connessione TCP sottostante.</span><span class="sxs-lookup"><span data-stu-id="f020a-142">It is important toonote that additional [EventHubClient][] objects created from a messaging factory instance will reuse hello same underlying TCP connection.</span></span> <span data-ttu-id="f020a-143">Di conseguenza, questi oggetti prevedono un limite sul lato client per la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="f020a-143">Therefore, these objects have a client-side limit on throughput.</span></span> <span data-ttu-id="f020a-144">Hello [crea](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) metodo riutilizza una singola factory di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="f020a-144">hello [Create](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Create_System_String_) method reuses a single messaging factory.</span></span> <span data-ttu-id="f020a-145">Se è necessario molto elevata velocità effettiva di un singolo mittente, è possibile creare più factory di messaggistica e un oggetto [EventHubClient][] factory di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="f020a-145">If you need very high throughput from a single sender, then you can create multiple message factories and one [EventHubClient][] object from each messaging factory.</span></span>

## <a name="send-events-tooan-event-hub"></a><span data-ttu-id="f020a-146">Hub di eventi tooan gli eventi di trasmissione</span><span class="sxs-lookup"><span data-stu-id="f020a-146">Send events tooan event hub</span></span>
<span data-ttu-id="f020a-147">Hub di eventi eventi tooan si invia tramite la creazione di un [EventData][] istanza e inviarlo tramite hello [inviare](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) metodo.</span><span class="sxs-lookup"><span data-stu-id="f020a-147">You send events tooan event hub by creating an [EventData][] instance and sending it via hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) method.</span></span> <span data-ttu-id="f020a-148">Questo metodo accetta un singolo [EventData][] parametro dell'istanza e lo invia in modo sincrono tooan hub di eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-148">This method takes a single [EventData][] instance parameter and synchronously sends it tooan event hub.</span></span>

## <a name="event-serialization"></a><span data-ttu-id="f020a-149">Serializzazione degli eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-149">Event serialization</span></span>
<span data-ttu-id="f020a-150">Hello [EventData][] classe ha [quattro costruttori di overload](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) che accettano una serie di parametri, ad esempio un oggetto e serializzatore, una matrice di byte o un flusso.</span><span class="sxs-lookup"><span data-stu-id="f020a-150">hello [EventData][] class has [four overloaded constructors](/dotnet/api/microsoft.servicebus.messaging.eventdata#constructors_) that take a variety of parameters, such as an object and serializer, a byte array, or a stream.</span></span> <span data-ttu-id="f020a-151">È inoltre possibile tooinstantiate hello [EventData][] e impostare flusso del corpo hello in seguito.</span><span class="sxs-lookup"><span data-stu-id="f020a-151">It is also possible tooinstantiate hello [EventData][] class and set hello body stream afterwards.</span></span> <span data-ttu-id="f020a-152">Quando si usa JSON con [EventData][], è possibile utilizzare **Encoding.UTF8.GetBytes()** tooretrieve hello matrice di byte una stringa con codifica JSON.</span><span class="sxs-lookup"><span data-stu-id="f020a-152">When using JSON with [EventData][], you can use **Encoding.UTF8.GetBytes()** tooretrieve hello byte array for a JSON-encoded string.</span></span>

## <a name="partition-key"></a><span data-ttu-id="f020a-153">Chiave di partizione</span><span class="sxs-lookup"><span data-stu-id="f020a-153">Partition key</span></span>
<span data-ttu-id="f020a-154">Hello [EventData][] classe dispone di un [PartitionKey][] proprietà che consente di hello mittente toospecify un valore che è stato eseguito l'hashing tooproduce un'assegnazione della partizione.</span><span class="sxs-lookup"><span data-stu-id="f020a-154">hello [EventData][] class has a [PartitionKey][] property that enables hello sender toospecify a value that is hashed tooproduce a partition assignment.</span></span> <span data-ttu-id="f020a-155">L'utilizzo di una chiave di partizione assicura che hello tutti gli eventi con hello stessa chiave vengono inviati toohello stessa partizione nell'hub eventi hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-155">Using a partition key ensures that all hello events with hello same key are sent toohello same partition in hello event hub.</span></span> <span data-ttu-id="f020a-156">Le chiavi di partizione comuni includono ID sessione utente e ID mittente univoci.</span><span class="sxs-lookup"><span data-stu-id="f020a-156">Common partition keys include user session IDs and unique sender IDs.</span></span> <span data-ttu-id="f020a-157">Hello [PartitionKey][] proprietà è facoltativa e può essere fornito quando si utilizza hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) o [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) metodi.</span><span class="sxs-lookup"><span data-stu-id="f020a-157">hello [PartitionKey][] property is optional and can be provided when using hello [Microsoft.ServiceBus.Messaging.EventHubClient.Send(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) or [Microsoft.ServiceBus.Messaging.EventHubClient.SendAsync(Microsoft.ServiceBus.Messaging.EventData)](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendAsync_Microsoft_ServiceBus_Messaging_EventData_) methods.</span></span> <span data-ttu-id="f020a-158">Se non si specifica un valore per [PartitionKey][], inviati gli eventi sono toopartitions distribuita tramite un modello round robin.</span><span class="sxs-lookup"><span data-stu-id="f020a-158">If you do not provide a value for [PartitionKey][], sent events are distributed toopartitions using a round-robin model.</span></span>

### <a name="availability-considerations"></a><span data-ttu-id="f020a-159">Considerazioni sulla disponibilità</span><span class="sxs-lookup"><span data-stu-id="f020a-159">Availability considerations</span></span>

<span data-ttu-id="f020a-160">L'utilizzo di una chiave di partizione è facoltativo e valutare con attenzione se toouse uno.</span><span class="sxs-lookup"><span data-stu-id="f020a-160">Using a partition key is optional, and you should consider carefully whether or not toouse one.</span></span> <span data-ttu-id="f020a-161">La chiave di partizione è un'ottima scelta se l'ordine degli eventi è importante.</span><span class="sxs-lookup"><span data-stu-id="f020a-161">In many cases, using a partition key is a good choice if event ordering is important.</span></span> <span data-ttu-id="f020a-162">Quando si usa una chiave di partizione, queste partizioni richiedono la disponibilità in un singolo nodo. Nel tempo possono verificarsi interruzioni, ad esempio al riavvio dei nodi di calcolo e all'applicazione di patch.</span><span class="sxs-lookup"><span data-stu-id="f020a-162">When you use a partition key, these partitions require availability on a single node, and outages can occur over time; for example, when compute nodes reboot and patch.</span></span> <span data-ttu-id="f020a-163">Di conseguenza, se si imposta un ID di partizione e tale partizione diventa non disponibile per qualche motivo, un tentativo tooaccess di dati hello in quella partizione avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="f020a-163">As such, if you set a partition ID and that partition becomes unavailable for some reason, an attempt tooaccess hello data in that partition will fail.</span></span> <span data-ttu-id="f020a-164">Se la disponibilità elevata è la più importante, non specificare una chiave di partizione. In questo caso gli eventi verranno inviati toopartitions utilizzando hello round-robin modello descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="f020a-164">If high availability is most important, do not specify a partition key; in that case events will be sent toopartitions using hello round-robin model described previously.</span></span> <span data-ttu-id="f020a-165">In questo scenario, si stanno apportando una scelta esplicita tra disponibilità (Nessun ID di partizione) e la coerenza (ID di partizione tooa degli eventi di blocco).</span><span class="sxs-lookup"><span data-stu-id="f020a-165">In this scenario, you are making an explicit choice between availability (no partition ID) and consistency (pinning events tooa partition ID).</span></span>

<span data-ttu-id="f020a-166">Va anche considerata la gestione dei ritardi nell'elaborazione degli eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-166">Another consideration is handling delays in processing events.</span></span> <span data-ttu-id="f020a-167">In alcuni casi potrebbe essere migliore toodrop dati e ripetere più tootry e sincronizzato con l'elaborazione, che può causare ritardi un'ulteriore elaborazione a valle.</span><span class="sxs-lookup"><span data-stu-id="f020a-167">In some cases it might be better toodrop data and retry than tootry and keep up with processing, which can potentially cause further downstream processing delays.</span></span> <span data-ttu-id="f020a-168">Ad esempio, con le quotazioni di borsa è toowait migliori per i dati aggiornati completati, ma in una chat in tempo reale o scenario VOIP invece si desidera utilizzare dati hello rapidamente, anche se non è completo.</span><span class="sxs-lookup"><span data-stu-id="f020a-168">For example, with a stock ticker it's better toowait for complete up-to-date data, but in a live chat or VOIP scenario you'd rather have hello data quickly, even if it isn't complete.</span></span>

<span data-ttu-id="f020a-169">Specificato queste considerazioni sulla disponibilità, in questi scenari è possibile scegliere una delle seguenti strategie di gestione degli errori di hello:</span><span class="sxs-lookup"><span data-stu-id="f020a-169">Given these availability considerations, in these scenarios you might choose one of hello following error handling strategies:</span></span>

- <span data-ttu-id="f020a-170">Arresto (arresto della lettura da Hub eventi fino alla risoluzione del problema)</span><span class="sxs-lookup"><span data-stu-id="f020a-170">Stop (stop reading from Event Hubs until things are fixed)</span></span>
- <span data-ttu-id="f020a-171">Eliminazione (i messaggi non sono importanti, eliminarli)</span><span class="sxs-lookup"><span data-stu-id="f020a-171">Drop (messages aren’t important, drop them)</span></span>
- <span data-ttu-id="f020a-172">Ripetere (Buongiorno tentativi messaggi come base)</span><span class="sxs-lookup"><span data-stu-id="f020a-172">Retry (retry hello messages as you see fit)</span></span>
- <span data-ttu-id="f020a-173">[Recapitabili](../service-bus-messaging/service-bus-dead-letter-queues.md) (usare una coda o un altro evento hub toodead lettera solo messaggi hello elaborazione)</span><span class="sxs-lookup"><span data-stu-id="f020a-173">[Dead letter](../service-bus-messaging/service-bus-dead-letter-queues.md) (use a queue or another event hub toodead letter only hello messages you couldn’t process)</span></span>

<span data-ttu-id="f020a-174">Per ulteriori informazioni e una discussione su hello compromesso tra disponibilità e la coerenza, vedere [disponibilità e la coerenza in hub eventi](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="f020a-174">For more information and a discussion about hello trade-offs between availability and consistency, see [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md).</span></span> 

## <a name="batch-event-send-operations"></a><span data-ttu-id="f020a-175">Operazioni di invio di eventi in batch</span><span class="sxs-lookup"><span data-stu-id="f020a-175">Batch event send operations</span></span>
<span data-ttu-id="f020a-176">L'invio di eventi in batch può aumentare la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="f020a-176">Sending events in batches can dramatically increase throughput.</span></span> <span data-ttu-id="f020a-177">Hello [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) metodo accetta un **IEnumerable** parametro di tipo [EventData][] e invia hello dell'intero batch come hub di eventi toohello un'operazione atomica.</span><span class="sxs-lookup"><span data-stu-id="f020a-177">hello [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) method takes an **IEnumerable** parameter of type [EventData][] and sends hello entire batch as an atomic operation toohello event hub.</span></span>

```csharp
public void SendBatch(IEnumerable<EventData> eventDataList);
```

<span data-ttu-id="f020a-178">Si noti che un singolo batch non deve superare il limite di 256 KB hello di un evento.</span><span class="sxs-lookup"><span data-stu-id="f020a-178">Note that a single batch must not exceed hello 256 KB limit of an event.</span></span> <span data-ttu-id="f020a-179">Inoltre, ogni messaggio in batch hello utilizza hello stessa identità del server di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="f020a-179">Additionally, each message in hello batch uses hello same publisher identity.</span></span> <span data-ttu-id="f020a-180">È responsabilità di hello di hello mittente tooensure che hello batch non superi le dimensioni eventi massime hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-180">It is hello responsibility of hello sender tooensure that hello batch does not exceed hello maximum event size.</span></span> <span data-ttu-id="f020a-181">In questo caso, viene generato un errore di **invio** del client.</span><span class="sxs-lookup"><span data-stu-id="f020a-181">If it does, a client **Send** error is generated.</span></span>

## <a name="send-asynchronously-and-send-at-scale"></a><span data-ttu-id="f020a-182">Inviare in modo asincrono e inviare a livello di scalabilità</span><span class="sxs-lookup"><span data-stu-id="f020a-182">Send asynchronously and send at scale</span></span>
<span data-ttu-id="f020a-183">È anche possibile inviare in modo asincrono l'hub di eventi tooan di eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-183">You can also send events tooan event hub asynchronously.</span></span> <span data-ttu-id="f020a-184">Invio in modo asincrono, è possibile aumentare il tasso di hello in corrispondenza del quale un client è in grado di toosend eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-184">Sending asynchronously can increase hello rate at which a client is able toosend events.</span></span> <span data-ttu-id="f020a-185">Entrambi hello [inviare](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) e [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) metodi sono disponibili nelle versioni asincrone, che restituiscono un [attività](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) oggetto.</span><span class="sxs-lookup"><span data-stu-id="f020a-185">Both hello [Send](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_Send_Microsoft_ServiceBus_Messaging_EventData_) and [SendBatch](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__) methods are available in asynchronous versions that return a [Task](https://msdn.microsoft.com/library/system.threading.tasks.task.aspx) object.</span></span> <span data-ttu-id="f020a-186">Sebbene questa tecnica può aumentare la velocità effettiva, inoltre causare hello client toocontinue toosend eventi anche durante la è limitata da hello servizio hub eventi e può comportare errori hello client o perdita di messaggi in caso contrario implementata correttamente.</span><span class="sxs-lookup"><span data-stu-id="f020a-186">While this technique can increase throughput, it can also cause hello client toocontinue toosend events even while it is being throttled by hello Event Hubs service and can result in hello client experiencing failures or lost messages if not properly implemented.</span></span> <span data-ttu-id="f020a-187">Inoltre, è possibile utilizzare hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) proprietà opzioni di ripetizione di hello client toocontrol client.</span><span class="sxs-lookup"><span data-stu-id="f020a-187">In addition, you can use hello [RetryPolicy](/dotnet/api/microsoft.servicebus.messaging.cliententity#Microsoft_ServiceBus_Messaging_ClientEntity_RetryPolicy) property on hello client toocontrol client retry options.</span></span>

## <a name="create-a-partition-sender"></a><span data-ttu-id="f020a-188">Creare un mittente di partizione</span><span class="sxs-lookup"><span data-stu-id="f020a-188">Create a partition sender</span></span>
<span data-ttu-id="f020a-189">Sebbene sia più comune toosend eventi tooan hub eventi senza una chiave di partizione, in alcuni casi potrebbe essere toosend eventi direttamente tooa la partizione specificata.</span><span class="sxs-lookup"><span data-stu-id="f020a-189">Although it is most common toosend events tooan event hub without a partition key, in some cases you might want toosend events directly tooa given partition.</span></span> <span data-ttu-id="f020a-190">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="f020a-190">For example:</span></span>

```csharp
var partitionedSender = client.CreatePartitionedSender(description.PartitionIds[0]);
```

<span data-ttu-id="f020a-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) restituisce un [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) che è possibile utilizzare toopublish partizione dell'hub eventi specifico tooa eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-191">[CreatePartitionedSender](/dotnet/api/microsoft.servicebus.messaging.eventhubclient#Microsoft_ServiceBus_Messaging_EventHubClient_CreatePartitionedSender_System_String_) returns an [EventHubSender](/dotnet/api/microsoft.servicebus.messaging.eventhubsender) object that you can use toopublish events tooa specific event hub partition.</span></span>

## <a name="event-consumers"></a><span data-ttu-id="f020a-192">Consumer di eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-192">Event consumers</span></span>
<span data-ttu-id="f020a-193">Hub eventi dispone di due modelli principali per l'utilizzo di eventi: ricevitori diretti e astrazioni di livello superiore, ad esempio [EventProcessorHost][].</span><span class="sxs-lookup"><span data-stu-id="f020a-193">Event Hubs has two primary models for event consumption: direct receivers and higher-level abstractions, such as [EventProcessorHost][].</span></span> <span data-ttu-id="f020a-194">Ricevitori diretti sono responsabili per i propri coordinamento di accesso toopartitions all'interno di un gruppo di consumer.</span><span class="sxs-lookup"><span data-stu-id="f020a-194">Direct receivers are responsible for their own coordination of access toopartitions within a consumer group.</span></span>

### <a name="direct-consumer"></a><span data-ttu-id="f020a-195">Consumer diretto</span><span class="sxs-lookup"><span data-stu-id="f020a-195">Direct consumer</span></span>
<span data-ttu-id="f020a-196">Hello tooread di modo più diretto da una partizione all'interno di un gruppo di consumer è hello toouse [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) classe.</span><span class="sxs-lookup"><span data-stu-id="f020a-196">hello most direct way tooread from a partition within a consumer group is toouse hello [EventHubReceiver](/dotnet/apie/microsoft.servicebus.messaging.eventhubreceiver) class.</span></span> <span data-ttu-id="f020a-197">toocreate un'istanza di questa classe, è necessario utilizzare un'istanza di hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) classe.</span><span class="sxs-lookup"><span data-stu-id="f020a-197">toocreate an instance of this class, you must use an instance of hello [EventHubConsumerGroup](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup) class.</span></span> <span data-ttu-id="f020a-198">Nell'esempio seguente di hello, è necessario specificare ID di partizione hello durante la creazione di ricevitore hello per il gruppo di consumer hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-198">In hello following example, hello partition ID must be specified when creating hello receiver for hello consumer group.</span></span>

```csharp
EventHubConsumerGroup group = client.GetDefaultConsumerGroup();
var receiver = group.CreateReceiver(client.GetRuntimeInformation().PartitionIds[0]);
```

<span data-ttu-id="f020a-199">Hello [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) dispone di diversi overload che facilitano il controllo sul reader hello creato.</span><span class="sxs-lookup"><span data-stu-id="f020a-199">hello [CreateReceiver](/dotnet/api/microsoft.servicebus.messaging.eventhubconsumergroup#methods_summary) method has several overloads that facilitate control over hello reader being created.</span></span> <span data-ttu-id="f020a-200">Questi metodi includono la specifica di un offset sotto forma di stringa o timestamp e hello possibilità toospecify se tooinclude questo offset specificato in hello restituito stream o iniziare dopo di esso.</span><span class="sxs-lookup"><span data-stu-id="f020a-200">These methods include specifying an offset as either a string or timestamp, and hello ability toospecify whether tooinclude this specified offset in hello returned stream, or start after it.</span></span> <span data-ttu-id="f020a-201">Dopo aver creato il ricevitore hello, è possibile avviare la ricezione di eventi in hello restituito l'oggetto.</span><span class="sxs-lookup"><span data-stu-id="f020a-201">After you create hello receiver, you can start receiving events on hello returned object.</span></span> <span data-ttu-id="f020a-202">Hello [ricezione](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) metodo dispone di quattro overload che hello controllo parametri dell'operazione, ad esempio le dimensioni di batch di ricezione e tempo di attesa.</span><span class="sxs-lookup"><span data-stu-id="f020a-202">hello [Receive](/dotnet/api/microsoft.servicebus.messaging.eventhubreceiver#methods_summary) method has four overloads that control hello receive operation parameters, such as batch size and wait time.</span></span> <span data-ttu-id="f020a-203">È possibile utilizzare versioni asincrone di hello della velocità effettiva di hello tooincrease metodi di un consumer.</span><span class="sxs-lookup"><span data-stu-id="f020a-203">You can use hello asynchronous versions of these methods tooincrease hello throughput of a consumer.</span></span> <span data-ttu-id="f020a-204">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="f020a-204">For example:</span></span>

```csharp
bool receive = true;
string myOffset;
while(receive)
{
    var message = receiver.Receive();
    myOffset = message.Offset;
    string body = Encoding.UTF8.GetString(message.GetBytes());
    Console.WriteLine(String.Format("Received message offset: {0} \nbody: {1}", myOffset, body));
}
```

<span data-ttu-id="f020a-205">Con una partizione specifica tooa riguardo, vengono ricevuti messaggi hello in ordine di hello in cui sono stati inviati toohello hub di eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-205">With respect tooa specific partition, hello messages are received in hello order in which they were sent toohello event hub.</span></span> <span data-ttu-id="f020a-206">offset di Hello è un token di stringa di utilizzati tooidentify un messaggio in una partizione.</span><span class="sxs-lookup"><span data-stu-id="f020a-206">hello offset is a string token used tooidentify a message in a partition.</span></span>

<span data-ttu-id="f020a-207">Si noti che una singola partizione all'interno di un gruppo di consumer non può avere più di cinque lettori concorrenti connessi in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="f020a-207">Note that a single partition within a consumer group cannot have more than 5 concurrent readers connected at any time.</span></span> <span data-ttu-id="f020a-208">Come i lettori connettono o si disconnettono, le relative sessioni potrebbero rimanere attive per alcuni minuti prima che il servizio hello riconosca che si sono disconnessi.</span><span class="sxs-lookup"><span data-stu-id="f020a-208">As readers connect or become disconnected, their sessions might stay active for several minutes before hello service recognizes that they have disconnected.</span></span> <span data-ttu-id="f020a-209">Durante questo periodo, la riconnessione tooa partizione potrebbe non riuscire.</span><span class="sxs-lookup"><span data-stu-id="f020a-209">During this time, reconnecting tooa partition may fail.</span></span> <span data-ttu-id="f020a-210">Per un esempio completo di scrittura di un ricevitore diretto per hub eventi, vedere hello [ricevitori diretti di hub eventi](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) esempio.</span><span class="sxs-lookup"><span data-stu-id="f020a-210">For a complete example of writing a direct receiver for Event Hubs, see hello [Event Hubs Direct Receivers](https://code.msdn.microsoft.com/Event-Hub-Direct-Receivers-13fa95c6) sample.</span></span>

### <a name="event-processor-host"></a><span data-ttu-id="f020a-211">Host processore di eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-211">Event processor host</span></span>
<span data-ttu-id="f020a-212">Hello [EventProcessorHost][] classe elabora i dati dall'hub eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-212">hello [EventProcessorHost][] class processes data from Event Hubs.</span></span> <span data-ttu-id="f020a-213">È consigliabile utilizzare questa implementazione durante la generazione reader di eventi sulla piattaforma .NET hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-213">You should use this implementation when building event readers on hello .NET platform.</span></span> <span data-ttu-id="f020a-214">[EventProcessorHost][] fornisce un ambiente di runtime thread-safe, multiprocesso e sicuro per le implementazioni del processore di eventi che fornisce inoltre la gestione di lease di Checkpoint e la partizione.</span><span class="sxs-lookup"><span data-stu-id="f020a-214">[EventProcessorHost][] provides a thread-safe, multi-process, safe runtime environment for event processor implementations that also provides checkpointing and partition lease management.</span></span>

<span data-ttu-id="f020a-215">hello toouse [EventProcessorHost][] (classe), è possibile implementare [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span><span class="sxs-lookup"><span data-stu-id="f020a-215">toouse hello [EventProcessorHost][] class, you can implement [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor).</span></span> <span data-ttu-id="f020a-216">Questa interfaccia contiene tre metodi:</span><span class="sxs-lookup"><span data-stu-id="f020a-216">This interface contains three methods:</span></span>

* [<span data-ttu-id="f020a-217">OpenAsync</span><span class="sxs-lookup"><span data-stu-id="f020a-217">OpenAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_OpenAsync_Microsoft_ServiceBus_Messaging_PartitionContext_)
* [<span data-ttu-id="f020a-218">CloseAsync</span><span class="sxs-lookup"><span data-stu-id="f020a-218">CloseAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_CloseAsync_Microsoft_ServiceBus_Messaging_PartitionContext_Microsoft_ServiceBus_Messaging_CloseReason_)
* [<span data-ttu-id="f020a-219">ProcessEventsAsync</span><span class="sxs-lookup"><span data-stu-id="f020a-219">ProcessEventsAsync</span></span>](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor#Microsoft_ServiceBus_Messaging_IEventProcessor_ProcessEventsAsync_Microsoft_ServiceBus_Messaging_PartitionContext_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_EventData__)

<span data-ttu-id="f020a-220">creare un'istanza di elaborazione, l'evento toostart [EventProcessorHost][], fornendo i parametri appropriati hello per l'hub eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-220">toostart event processing, instantiate [EventProcessorHost][], providing hello appropriate parameters for your event hub.</span></span> <span data-ttu-id="f020a-221">Chiamare quindi [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister il [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementazione con runtime hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-221">Then, call [RegisterEventProcessorAsync](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost#Microsoft_ServiceBus_Messaging_EventProcessorHost_RegisterEventProcessorAsync__1) tooregister your [IEventProcessor](/dotnet/api/microsoft.servicebus.messaging.ieventprocessor) implementation with hello runtime.</span></span> <span data-ttu-id="f020a-222">A questo punto, l'host di hello tenterà tooacquire un lease per ogni partizione nell'hub di eventi hello usando un algoritmo "greedy".</span><span class="sxs-lookup"><span data-stu-id="f020a-222">At this point, hello host will attempt tooacquire a lease on every partition in hello event hub using a "greedy" algorithm.</span></span> <span data-ttu-id="f020a-223">Tali lease dureranno per un determinato intervallo di tempo e quindi devono essere rinnovati.</span><span class="sxs-lookup"><span data-stu-id="f020a-223">These leases will last for a given timeframe and must then be renewed.</span></span> <span data-ttu-id="f020a-224">Appena nuovi nodi, istanze di lavoro in questo caso, portare in linea, questi effettuano le prenotazioni di lease e nel tempo carico hello sposta tra i nodi come ognuno tenta tooacquire più lease.</span><span class="sxs-lookup"><span data-stu-id="f020a-224">As new nodes, worker instances in this case, come online, they place lease reservations and over time hello load shifts between nodes as each attempts tooacquire more leases.</span></span>

![Host processore di eventi](./media/event-hubs-programming-guide/IC759863.png)

<span data-ttu-id="f020a-226">Con il passare del tempo, viene stabilito un equilibrio.</span><span class="sxs-lookup"><span data-stu-id="f020a-226">Over time, an equilibrium is established.</span></span> <span data-ttu-id="f020a-227">Questa funzionalità dinamica consente la scalabilità automatica basata sulla CPU toobe applicato tooconsumers per la scalabilità verticale e scalabilità verticale.</span><span class="sxs-lookup"><span data-stu-id="f020a-227">This dynamic capability enables CPU-based autoscaling toobe applied tooconsumers for both scale-up and scale-down.</span></span> <span data-ttu-id="f020a-228">Poiché gli hub di eventi non hanno una conoscenza diretta del numero di messaggi, utilizzo medio della CPU è spesso hello migliore meccanismo toomeasure back-end o consumer scala.</span><span class="sxs-lookup"><span data-stu-id="f020a-228">Because Event Hubs do not have a direct concept of message counts, average CPU utilization is often hello best mechanism toomeasure back end or consumer scale.</span></span> <span data-ttu-id="f020a-229">Se i Publisher iniziano toopublish in grado di elaborare ulteriori eventi di consumer, aumento della CPU hello sui consumer può essere utilizzato toocause scalabilità automatica sul numero di istanze di lavoro.</span><span class="sxs-lookup"><span data-stu-id="f020a-229">If publishers begin toopublish more events than consumers can process, hello CPU increase on consumers can be used toocause an auto-scale on worker instance count.</span></span>

<span data-ttu-id="f020a-230">Hello [EventProcessorHost][] implementa anche un meccanismo di checkpoint basato su archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="f020a-230">hello [EventProcessorHost][] class also implements an Azure storage-based checkpointing mechanism.</span></span> <span data-ttu-id="f020a-231">È stata hello di archivi questo meccanismo offset nei singoli per ogni partizione, in modo che ogni consumer possa determinare quali ultimo checkpoint hello consumer precedente hello.</span><span class="sxs-lookup"><span data-stu-id="f020a-231">This mechanism stores hello offset on a per partition basis, so that each consumer can determine what hello last checkpoint from hello previous consumer was.</span></span> <span data-ttu-id="f020a-232">Come per le partizioni passano tra i nodi tramite lease, si tratta di meccanismo di sincronizzazione hello che facilita lo spostamento del carico.</span><span class="sxs-lookup"><span data-stu-id="f020a-232">As partitions transition between nodes via leases, this is hello synchronization mechanism that facilitates load shifting.</span></span>

## <a name="publisher-revocation"></a><span data-ttu-id="f020a-233">Revoca di publisher</span><span class="sxs-lookup"><span data-stu-id="f020a-233">Publisher revocation</span></span>
<span data-ttu-id="f020a-234">Inoltre toohello funzionalità avanzate per la fase di esecuzione di [EventProcessorHost][], hub eventi consente la revoca di publisher in ordine tooblock Publisher specifici di hub di eventi tooan evento di invio.</span><span class="sxs-lookup"><span data-stu-id="f020a-234">In addition toohello advanced run-time features of [EventProcessorHost][], Event Hubs enables publisher revocation in order tooblock specific publishers from sending event tooan event hub.</span></span> <span data-ttu-id="f020a-235">Queste funzionalità sono particolarmente utili se un token del server di pubblicazione è stata compromessa, o un aggiornamento software sta provocando toobehave non corretta.</span><span class="sxs-lookup"><span data-stu-id="f020a-235">These features are particularly useful if a publisher token has been compromised, or a software update is causing them toobehave inappropriately.</span></span> <span data-ttu-id="f020a-236">In questi casi, l'identità del server di pubblicazione di hello, che fa parte del token di firma di accesso condiviso, può essere bloccato dalla pubblicazione di eventi.</span><span class="sxs-lookup"><span data-stu-id="f020a-236">In these situations, hello publisher's identity, which is part of their SAS token, can be blocked from publishing events.</span></span>

<span data-ttu-id="f020a-237">Per ulteriori informazioni sulla revoca di publisher e come toosend tooEvent hub come server di pubblicazione, vedere hello [evento hub grande scala pubblicazione sicura](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) esempio.</span><span class="sxs-lookup"><span data-stu-id="f020a-237">For more information about publisher revocation and how toosend tooEvent Hubs as a publisher, see hello [Event Hubs Large Scale Secure Publishing](https://code.msdn.microsoft.com/Service-Bus-Event-Hub-99ce67ab) sample.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f020a-238">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="f020a-238">Next steps</span></span>
<span data-ttu-id="f020a-239">toolearn più sugli scenari di hub eventi, visitare i collegamenti:</span><span class="sxs-lookup"><span data-stu-id="f020a-239">toolearn more about Event Hubs scenarios, visit these links:</span></span>

* [<span data-ttu-id="f020a-240">Panoramica dell'API di Hub eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-240">Event Hubs API overview</span></span>](event-hubs-api-overview.md)
* [<span data-ttu-id="f020a-241">Che cos'è Hub eventi?</span><span class="sxs-lookup"><span data-stu-id="f020a-241">What is Event Hubs</span></span>](event-hubs-what-is-event-hubs.md)
* [<span data-ttu-id="f020a-242">Disponibilità e coerenza nell'Hub eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-242">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="f020a-243">Riferimento all'API dell'host processore di eventi</span><span class="sxs-lookup"><span data-stu-id="f020a-243">Event processor host API reference</span></span>](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost)

[NamespaceManager]: /dotnet/api/microsoft.servicebus.namespacemanager
[EventHubClient]: /dotnet/api/microsoft.servicebus.messaging.eventhubclient
[EventData]: /dotnet/api/microsoft.servicebus.messaging.eventdata
[CreateEventHubIfNotExists]: /dotnet/api/microsoft.servicebus.namespacemanager.createeventhubifnotexists
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.eventdata#Microsoft_ServiceBus_Messaging_EventData_PartitionKey
[EventProcessorHost]: /dotnet/api/microsoft.servicebus.messaging.eventprocessorhost
