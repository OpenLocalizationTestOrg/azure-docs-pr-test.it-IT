---
title: "aaaConfigure sempre nel gruppo di disponibilità in macchine virtuali di Azure (versione classica) | Documenti Microsoft"
description: "Creare un gruppo di disponibilità AlwaysOn con le macchine virtuali di Azure. Questa esercitazione viene utilizzato principalmente interfaccia utente di hello e strumenti anziché di scripting."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 8d48a3d2-79f8-4ab0-9327-2f30ee0b2ff1
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 03/17/2017
ms.author: mikeray
ms.openlocfilehash: f428ad994a55378c281c959f4696fdcaf50632b1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="configure-always-on-availability-group-in-azure-virtual-machines-classic"></a><span data-ttu-id="b94fb-104">Configurare un gruppo di disponibilità AlwaysOn in macchine virtuali di Azure (distribuzione classica)</span><span class="sxs-lookup"><span data-stu-id="b94fb-104">Configure Always On availability group in Azure Virtual Machines (classic)</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="b94fb-105">Classica: interfaccia utente</span><span class="sxs-lookup"><span data-stu-id="b94fb-105">Classic: UI</span></span>](../classic/portal-sql-alwayson-availability-groups.md)
> * <span data-ttu-id="b94fb-106">[Classica: PowerShell](../classic/ps-sql-alwayson-availability-groups.md)
</span><span class="sxs-lookup"><span data-stu-id="b94fb-106">[Classic: PowerShell](../classic/ps-sql-alwayson-availability-groups.md)
</span></span><br/>

<span data-ttu-id="b94fb-107">Prima di iniziare, considerare che ora è possibile completare questa attività nel modello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="b94fb-107">Before you begin, consider that you can now complete this task in Azure Resource Manager model.</span></span> <span data-ttu-id="b94fb-108">Per le nuove distribuzioni è consigliabile usare il modello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="b94fb-108">We recommend Azure Resource Manager model for new deployments.</span></span> <span data-ttu-id="b94fb-109">Vedere [gruppi di disponibilità Always On di SQL Server in macchine virtuali di Azure](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b94fb-109">See [SQL Server Always On availability groups on Azure virtual machines](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="b94fb-110">Si consiglia di utilizzano il modello di gestione risorse hello più nuove distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="b94fb-110">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="b94fb-111">Azure offre due toocreate di modelli di distribuzione diversi e utilizzare le risorse: [Resource Manager e classica](../../../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="b94fb-111">Azure has two different deployment models toocreate and work with resources: [Resource Manager and classic](../../../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="b94fb-112">Questo articolo spiega come toouse hello modello di distribuzione classica.</span><span class="sxs-lookup"><span data-stu-id="b94fb-112">This article explains how toouse hello classic deployment model.</span></span> 

<span data-ttu-id="b94fb-113">vedere questa attività con il modello di gestione risorse di Azure hello toocomplete [SQL Server Always On gruppi di disponibilità in macchine virtuali di Azure](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b94fb-113">toocomplete this task with hello Azure Resource Manager model, see [SQL Server Always On availability groups on Azure virtual machines](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span></span>

<span data-ttu-id="b94fb-114">In questa esercitazione end-to-end viene illustrato come i gruppi disponibilità tooimplement utilizzando SQL Server Always On nelle macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="b94fb-114">This end-to-end tutorial shows you how tooimplement availability groups by using SQL Server Always On running on Azure Virtual Machines.</span></span>

<span data-ttu-id="b94fb-115">Al fine di hello dell'esercitazione hello, la soluzione SQL Server Always On in Azure sarà composta dagli hello seguenti elementi:</span><span class="sxs-lookup"><span data-stu-id="b94fb-115">At hello end of hello tutorial, your SQL Server Always On solution in Azure will consist of hello following elements:</span></span>

* <span data-ttu-id="b94fb-116">Una rete virtuale contenente più subnet, tra cui una subnet front-end e una back-end</span><span class="sxs-lookup"><span data-stu-id="b94fb-116">A virtual network that contains multiple subnets and includes a frontend and a backend subnet</span></span>
* <span data-ttu-id="b94fb-117">Un controller di dominio con un dominio di Active Directory (Azure AD)</span><span class="sxs-lookup"><span data-stu-id="b94fb-117">A domain controller with an Active Directory (Azure AD) domain</span></span>
* <span data-ttu-id="b94fb-118">Due macchine virtuali che eseguono SQL Server e sono subnet back-end toohello distribuito e dominio toohello unita in join Azure AD</span><span class="sxs-lookup"><span data-stu-id="b94fb-118">Two virtual machines that run SQL Server and are deployed toohello backend subnet and joined toohello Azure AD domain</span></span>
* <span data-ttu-id="b94fb-119">Un cluster di failover di tre nodi con modello di quorum maggioranza dei nodi hello</span><span class="sxs-lookup"><span data-stu-id="b94fb-119">A three-node failover cluster with hello Node Majority quorum model</span></span>
* <span data-ttu-id="b94fb-120">Un gruppo di disponibilità che ha due repliche di commit sincrono di un database di disponibilità</span><span class="sxs-lookup"><span data-stu-id="b94fb-120">An availability group that has two synchronous-commit replicas of an availability database</span></span>

<span data-ttu-id="b94fb-121">Hello nella figura seguente è una rappresentazione grafica della soluzione hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-121">hello following illustration is a graphical representation of hello solution.</span></span>

![Architettura di lab di test per gruppi di disponibilità in Azure](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC791912.png)

<span data-ttu-id="b94fb-123">Si tratta di una possibile configurazione.</span><span class="sxs-lookup"><span data-stu-id="b94fb-123">Note that this is one possible configuration.</span></span> <span data-ttu-id="b94fb-124">Ad esempio, è possibile ridurre il numero di hello di macchine virtuali per un gruppo di disponibilità con due repliche.</span><span class="sxs-lookup"><span data-stu-id="b94fb-124">For example, you can minimize hello number of virtual machines for a two-replica availability group.</span></span> <span data-ttu-id="b94fb-125">Questa configurazione vengono salvate in ore di calcolo in Azure utilizzando controller di dominio hello come hello quorum condivisione file di controllo in un cluster a due nodi.</span><span class="sxs-lookup"><span data-stu-id="b94fb-125">This configuration saves on compute hours in Azure by using hello domain controller as hello quorum file share witness in a two-node cluster.</span></span> <span data-ttu-id="b94fb-126">Questo metodo riduce il numero di macchine virtuali di hello uno dalla configurazione hello illustrato.</span><span class="sxs-lookup"><span data-stu-id="b94fb-126">This method reduces hello virtual machine count by one from hello illustrated configuration.</span></span>

<span data-ttu-id="b94fb-127">Questa esercitazione si presuppone l'esempio hello:</span><span class="sxs-lookup"><span data-stu-id="b94fb-127">This tutorial assumes hello following:</span></span>

* <span data-ttu-id="b94fb-128">Si dispone già di un account Azure.</span><span class="sxs-lookup"><span data-stu-id="b94fb-128">You already have an Azure account.</span></span>
* <span data-ttu-id="b94fb-129">Si conosce già la modalità toouse hello GUI in hello macchina virtuale raccolta tooprovision una classica macchina virtuale che esegue SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b94fb-129">You already know how toouse hello GUI in hello virtual machine gallery tooprovision a classic virtual machine that runs SQL Server.</span></span>
* <span data-ttu-id="b94fb-130">Si dispone già una conoscenza approfondita dei gruppi di disponibilità AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="b94fb-130">You already have a solid understanding of Always On availability groups.</span></span> <span data-ttu-id="b94fb-131">Per altre informazioni, vedere [Gruppi di disponibilità AlwaysOn (SQL Server)](https://msdn.microsoft.com/library/hh510230.aspx).</span><span class="sxs-lookup"><span data-stu-id="b94fb-131">For more information, see [Always On Availability Groups (SQL Server)](https://msdn.microsoft.com/library/hh510230.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="b94fb-132">Se si è interessati all'uso di gruppi di disponibilità AlwaysOn con SharePoint, vedere anche [Configurare gruppi di disponibilità AlwaysOn di SQL Server 2012 per SharePoint 2013](https://technet.microsoft.com/library/jj715261.aspx).</span><span class="sxs-lookup"><span data-stu-id="b94fb-132">If you are interested in using Always On availability groups with SharePoint, also see [Configure SQL Server 2012 Always On Availability Groups for SharePoint 2013](https://technet.microsoft.com/library/jj715261.aspx).</span></span>
> 
> 

## <a name="create-hello-virtual-network-and-domain-controller-server"></a><span data-ttu-id="b94fb-133">Creare la rete virtuale di hello e server del controller di dominio</span><span class="sxs-lookup"><span data-stu-id="b94fb-133">Create hello virtual network and domain controller server</span></span>
<span data-ttu-id="b94fb-134">Si inizia con un nuovo account di prova di Azure.</span><span class="sxs-lookup"><span data-stu-id="b94fb-134">You begin with a new Azure trial account.</span></span> <span data-ttu-id="b94fb-135">Dopo aver configurato l'account, è necessario nella schermata iniziale di hello di hello portale di Azure classico.</span><span class="sxs-lookup"><span data-stu-id="b94fb-135">After you set up your account, you should be on hello home screen of hello Azure classic portal.</span></span>

1. <span data-ttu-id="b94fb-136">Fare clic su hello **New** hello nell'angolo sinistro della parte inferiore di hello della pagina hello, come illustrato nella seguente schermata hello in.</span><span class="sxs-lookup"><span data-stu-id="b94fb-136">Click hello **New** button at hello left corner of hello bottom of hello page, as shown in hello following screenshot.</span></span>
   
    ![Fare clic su nuovo nel portale di hello](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665511.gif)
2. <span data-ttu-id="b94fb-138">Fare clic su **servizi di rete** > **rete virtuale** > **creazione personalizzata**, come illustrato nella seguente schermata hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-138">Click **Network Services** > **Virtual Network** > **Custom Create**, as shown in hello following screenshot.</span></span>
   
    ![Crea rete virtuale](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665512.gif)
3. <span data-ttu-id="b94fb-140">In hello **crea rete virtuale** finestra di dialogo casella, creare una nuova rete virtuale avanzando pagine hello e utilizzando le impostazioni di hello in hello nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="b94fb-140">In hello **CREATE A VIRTUAL NETWORK** dialog box, create a new virtual network by stepping through hello pages and using hello settings in hello following table.</span></span> 
   
   | <span data-ttu-id="b94fb-141">Page</span><span class="sxs-lookup"><span data-stu-id="b94fb-141">Page</span></span> | <span data-ttu-id="b94fb-142">Impostazioni</span><span class="sxs-lookup"><span data-stu-id="b94fb-142">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="b94fb-143">Dettagli della rete virtuale</span><span class="sxs-lookup"><span data-stu-id="b94fb-143">Virtual Network Details</span></span> |<span data-ttu-id="b94fb-144">**NOME = ContosoNET**</span><span class="sxs-lookup"><span data-stu-id="b94fb-144">**NAME = ContosoNET**</span></span><br/><span data-ttu-id="b94fb-145">**AREA = Stati Uniti occidentali**</span><span class="sxs-lookup"><span data-stu-id="b94fb-145">**REGION = West US**</span></span> |
   | <span data-ttu-id="b94fb-146">Server DNS e connettività VPN</span><span class="sxs-lookup"><span data-stu-id="b94fb-146">DNS Servers and VPN Connectivity</span></span> |<span data-ttu-id="b94fb-147">Nessuno</span><span class="sxs-lookup"><span data-stu-id="b94fb-147">None</span></span> |
   | <span data-ttu-id="b94fb-148">Spazi di indirizzi della rete virtuale</span><span class="sxs-lookup"><span data-stu-id="b94fb-148">Virtual Network Address Spaces</span></span> |<span data-ttu-id="b94fb-149">Impostazioni sono illustrate nella seguente schermata hello:</span><span class="sxs-lookup"><span data-stu-id="b94fb-149">Settings are shown in hello following screenshot:</span></span> ![Crea rete virtuale](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784620.png) |
4. <span data-ttu-id="b94fb-151">Creare una macchina virtuale hello che verrà utilizzato come controller di dominio hello (DC).</span><span class="sxs-lookup"><span data-stu-id="b94fb-151">Create hello virtual machine that you will use as hello domain controller (DC).</span></span> <span data-ttu-id="b94fb-152">Fare clic su **New** > **calcolo** > **macchina virtuale** > **dalla raccolta**, come illustrato Hello seguente schermata.</span><span class="sxs-lookup"><span data-stu-id="b94fb-152">Click **New** > **Compute** > **Virtual Machine** > **From Gallery**, as shown in hello following screenshot.</span></span>
   
    ![Creare una macchina virtuale](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784621.png)
5. <span data-ttu-id="b94fb-154">In hello **crea macchina virtuale** finestra di dialogo casella, configurare una nuova macchina virtuale avanzando pagine hello e utilizzando le impostazioni di hello in hello nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="b94fb-154">In hello **CREATE A VIRTUAL MACHINE** dialog box, configure a new virtual machine by stepping through hello pages and using hello settings in hello following table.</span></span> 
   
   | <span data-ttu-id="b94fb-155">Page</span><span class="sxs-lookup"><span data-stu-id="b94fb-155">Page</span></span> | <span data-ttu-id="b94fb-156">Impostazioni</span><span class="sxs-lookup"><span data-stu-id="b94fb-156">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="b94fb-157">Sistema operativo della macchina virtuale selezionare hello</span><span class="sxs-lookup"><span data-stu-id="b94fb-157">Select hello virtual machine operating system</span></span> |<span data-ttu-id="b94fb-158">Windows Server 2012 R2 Datacenter</span><span class="sxs-lookup"><span data-stu-id="b94fb-158">Windows Server 2012 R2 Datacenter</span></span> |
   | <span data-ttu-id="b94fb-159">Configurazione macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="b94fb-159">Virtual machine configuration</span></span> |<span data-ttu-id="b94fb-160">**DATA DI RILASCIO VERSIONE** = (più recente)</span><span class="sxs-lookup"><span data-stu-id="b94fb-160">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="b94fb-161">**NOME MACCHINA VIRTUALE** = ContosoDC</span><span class="sxs-lookup"><span data-stu-id="b94fb-161">**VIRTUAL MACHINE NAME** = ContosoDC</span></span><br/><span data-ttu-id="b94fb-162">**PIANO** = STANDARD</span><span class="sxs-lookup"><span data-stu-id="b94fb-162">**TIER** = STANDARD</span></span><br/><span data-ttu-id="b94fb-163">**DIMENSIONI** = A2 (2 core)</span><span class="sxs-lookup"><span data-stu-id="b94fb-163">**SIZE** = A2 (2 cores)</span></span><br/><span data-ttu-id="b94fb-164">**NUOVO NOME UTENTE** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="b94fb-164">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="b94fb-165">**NUOVA PASSWORD** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-165">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="b94fb-166">**CONFERMA** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-166">**CONFIRM** = Contoso!000</span></span> |
   | <span data-ttu-id="b94fb-167">Configurazione macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="b94fb-167">Virtual machine configuration</span></span> |<span data-ttu-id="b94fb-168">**SERVIZIO CLOUD** = creare un nuovo servizio cloud</span><span class="sxs-lookup"><span data-stu-id="b94fb-168">**CLOUD SERVICE** = Create a new cloud service</span></span><br/><span data-ttu-id="b94fb-169">**NOME DNS DEL SERVIZIO CLOUD** = nome univoco del servizio cloud</span><span class="sxs-lookup"><span data-stu-id="b94fb-169">**CLOUD SERVICE DNS NAME** = A unique cloud service name</span></span><br/><span data-ttu-id="b94fb-170">**NOME DNS** = nome univoco (ad esempio: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="b94fb-170">**DNS NAME** = A unique name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="b94fb-171">**AREA/GRUPPO DI AFFINITÀ/RETE VIRTUALE** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="b94fb-171">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="b94fb-172">**SUNET RETE VIRTUALE** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="b94fb-172">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="b94fb-173">**ACCOUNT DI ARCHIVIAZIONE**: usare un account di archiviazione generato automaticamente</span><span class="sxs-lookup"><span data-stu-id="b94fb-173">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="b94fb-174">**SET DI DISPONIBILITÀ** = (Nessuno)</span><span class="sxs-lookup"><span data-stu-id="b94fb-174">**AVAILABILITY SET** = (None)</span></span> |
   | <span data-ttu-id="b94fb-175">Opzioni macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="b94fb-175">Virtual machine options</span></span> |<span data-ttu-id="b94fb-176">Valori predefiniti</span><span class="sxs-lookup"><span data-stu-id="b94fb-176">Use defaults</span></span> |

<span data-ttu-id="b94fb-177">Dopo aver configurato hello nuova macchina virtuale, attendere l'esecuzione del relativo provisioning toobe hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="b94fb-177">After you configure hello new virtual machine, wait for hello virtual machine toobe provsioned.</span></span> <span data-ttu-id="b94fb-178">Questo processo richiede alcune toofinish ora.</span><span class="sxs-lookup"><span data-stu-id="b94fb-178">This process takes some time toofinish.</span></span> <span data-ttu-id="b94fb-179">Se si fa clic hello **macchina virtuale** scheda hello Azure classico portale, è possibile visualizzare gli stati da ciclista ContosoDC da **avvio in corso (Provisioning)** troppo**arrestato**, **Avvio**, **in esecuzione (Provisioning)**e infine **esecuzione**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-179">If you click hello **Virtual Machine** tab in hello Azure classic portal, you can see ContosoDC cycling states from **Starting (Provisioning)** too**Stopped**, **Starting**, **Running (Provisioning)**, and finally **Running**.</span></span>

<span data-ttu-id="b94fb-180">provisioning del server del controller di dominio Hello ora correttamente.</span><span class="sxs-lookup"><span data-stu-id="b94fb-180">hello DC server is now successfully provisioned.</span></span> <span data-ttu-id="b94fb-181">Successivamente, si configurerà il dominio di Active Directory hello in questo server di controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="b94fb-181">Next, you will configure hello Active Directory domain on this DC server.</span></span>

## <a name="configure-hello-domain-controller"></a><span data-ttu-id="b94fb-182">Configurare il controller di dominio hello</span><span class="sxs-lookup"><span data-stu-id="b94fb-182">Configure hello domain controller</span></span>
<span data-ttu-id="b94fb-183">In operazioni di hello, configurare macchina virtuale ContosoDC hello come controller di dominio per corp.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="b94fb-183">In hello following steps, you configure hello ContosoDC machine as a domain controller for corp.contoso.com.</span></span>

1. <span data-ttu-id="b94fb-184">Nel portale di hello selezionare hello **ContosoDC** macchina.</span><span class="sxs-lookup"><span data-stu-id="b94fb-184">In hello portal, select hello **ContosoDC** machine.</span></span> <span data-ttu-id="b94fb-185">In hello **Dashboard** scheda, fare clic su **Connetti** tooopen file desktop remoto (RDP) per l'accesso desktop remoto.</span><span class="sxs-lookup"><span data-stu-id="b94fb-185">On hello **Dashboard** tab, click **Connect** tooopen a remote desktop (RDP) file for remote desktop access.</span></span>
   
    ![Connettersi tooVritual macchina](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784622.png)
2. <span data-ttu-id="b94fb-187">Accedere con l'account amministratore (**\AzureAdmin**) e la password (**Contoso!000**) configurati.</span><span class="sxs-lookup"><span data-stu-id="b94fb-187">Sign in with your configured administrator account (**\AzureAdmin**) and password (**Contoso!000**).</span></span>
3. <span data-ttu-id="b94fb-188">Per impostazione predefinita, hello **Server Manager** dashboard deve essere visualizzato.</span><span class="sxs-lookup"><span data-stu-id="b94fb-188">By default, hello **Server Manager** dashboard should be displayed.</span></span>
4. <span data-ttu-id="b94fb-189">Fare clic su hello **Aggiungi ruoli e funzionalità** collegamento nel dashboard di hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-189">Click hello **Add roles and features** link on hello dashboard.</span></span>
   
    ![Aggiunta ruoli Esplora server](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784623.png)
5. <span data-ttu-id="b94fb-191">Fare clic su **Avanti** fino a ottenere toohello **i ruoli del Server** sezione.</span><span class="sxs-lookup"><span data-stu-id="b94fb-191">Click **Next** until you get toohello **Server Roles** section.</span></span>
6. <span data-ttu-id="b94fb-192">Seleziona hello **servizi di dominio Active Directory** e **Server DNS** ruoli.</span><span class="sxs-lookup"><span data-stu-id="b94fb-192">Select hello **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="b94fb-193">Quando richiesto, aggiungere altre funzionalità richieste da questi ruoli.</span><span class="sxs-lookup"><span data-stu-id="b94fb-193">When prompted, add more features that these roles require.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="b94fb-194">Verrà visualizzato un avviso di convalida che indica che non esiste alcun indirizzo IP statico.</span><span class="sxs-lookup"><span data-stu-id="b94fb-194">You will get a validation warning that there is no static IP address.</span></span> <span data-ttu-id="b94fb-195">Se si sta testando configurazione hello, fare clic su **continua**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-195">If you are testing hello configuration, click **Continue**.</span></span> <span data-ttu-id="b94fb-196">Per gli scenari di produzione [utilizzare PowerShell tooset hello indirizzo IP statico del computer controller di dominio hello](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span><span class="sxs-lookup"><span data-stu-id="b94fb-196">For production scenarios [use PowerShell tooset hello static IP address of hello domain controller machine](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
   > 
   > 
   
    ![Finestra di dialogo Aggiungi ruoli](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784624.png)
7. <span data-ttu-id="b94fb-198">Fare clic su **Avanti** fino a raggiungere hello **conferma** sezione.</span><span class="sxs-lookup"><span data-stu-id="b94fb-198">Click **Next** until you reach hello **Confirmation** section.</span></span> <span data-ttu-id="b94fb-199">Seleziona hello **riavvio del server di destinazione hello automaticamente se necessario** casella di controllo.</span><span class="sxs-lookup"><span data-stu-id="b94fb-199">Select hello **Restart hello destination server automatically if required** check box.</span></span>
8. <span data-ttu-id="b94fb-200">Fare clic su **Installa**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-200">Click **Install**.</span></span>
9. <span data-ttu-id="b94fb-201">Dopo l'installazione delle funzionalità di hello, tornare toohello **Server Manager** dashboard.</span><span class="sxs-lookup"><span data-stu-id="b94fb-201">After hello features are installed, return toohello **Server Manager** dashboard.</span></span>
10. <span data-ttu-id="b94fb-202">Seleziona hello nuovo **AD DS** opzione hello riquadro a sinistra.</span><span class="sxs-lookup"><span data-stu-id="b94fb-202">Select hello new **AD DS** option on hello left pane.</span></span>
11. <span data-ttu-id="b94fb-203">Fare clic su hello **più** collegamento sulla barra di avviso gialla hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-203">Click hello **More** link on hello yellow warning bar.</span></span>
    
     ![Finestra di dialogo Servizi di dominio di Active Directory nella macchina virtuale del server DNS](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784625.png)
12. <span data-ttu-id="b94fb-205">In hello **azione** colonna di hello **tutti i Server-dettagli attività** la finestra di dialogo, fare clic su **alzare di livello questo controller di dominio server tooa**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-205">In hello **Action** column of hello **All Server Task Details** dialog box, click **Promote this server tooa domain controller**.</span></span>
13. <span data-ttu-id="b94fb-206">In hello **guidata configurazione di servizi di dominio di Active Directory**, utilizzare hello seguenti valori:</span><span class="sxs-lookup"><span data-stu-id="b94fb-206">In hello **Active Directory Domain Services Configuration Wizard**, use hello following values:</span></span>
    
    | <span data-ttu-id="b94fb-207">Page</span><span class="sxs-lookup"><span data-stu-id="b94fb-207">Page</span></span> | <span data-ttu-id="b94fb-208">Impostazione</span><span class="sxs-lookup"><span data-stu-id="b94fb-208">Setting</span></span> |
    | --- | --- |
    | <span data-ttu-id="b94fb-209">Configurazione distribuzione</span><span class="sxs-lookup"><span data-stu-id="b94fb-209">Deployment Configuration</span></span> |<span data-ttu-id="b94fb-210">**Aggiungi una nuova foresta** = selezionata</span><span class="sxs-lookup"><span data-stu-id="b94fb-210">**Add a new forest** = Selected</span></span><br/><span data-ttu-id="b94fb-211">**Nome di dominio radice** = corp.contoso.com</span><span class="sxs-lookup"><span data-stu-id="b94fb-211">**Root domain name** = corp.contoso.com</span></span> |
    | <span data-ttu-id="b94fb-212">Opzioni controller di dominio</span><span class="sxs-lookup"><span data-stu-id="b94fb-212">Domain Controller Options</span></span> |<span data-ttu-id="b94fb-213">**Password** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-213">**Password** = Contoso!000</span></span><br/><span data-ttu-id="b94fb-214">**Conferma password** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-214">**Confirm Password** = Contoso!000</span></span> |
14. <span data-ttu-id="b94fb-215">Fare clic su **Avanti** toogo tramite hello altre pagine della procedura guidata hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-215">Click **Next** toogo through hello other pages in hello wizard.</span></span> <span data-ttu-id="b94fb-216">In hello **controllo dei prerequisiti** pagina, verificare che venga visualizzato hello seguente messaggio: **tutti i controlli dei prerequisiti sono riusciti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-216">On hello **Prerequisites Check** page, verify that you see hello following message: **All prerequisite checks passed successfully**.</span></span> <span data-ttu-id="b94fb-217">Si noti che è consigliabile esaminare tutti i messaggi di avviso applicabile, ma è possibile toocontinue con installazione hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-217">Note that you should review all applicable warning messages, but it is possible toocontinue with hello installation.</span></span>
15. <span data-ttu-id="b94fb-218">Fare clic su **Installa**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-218">Click **Install**.</span></span> <span data-ttu-id="b94fb-219">Hello **ContosoDC** macchina virtuale verrà riavviato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="b94fb-219">hello **ContosoDC** virtual machine will automatically reboot.</span></span>

## <a name="configure-domain-accounts"></a><span data-ttu-id="b94fb-220">Configurare gli account di dominio</span><span class="sxs-lookup"><span data-stu-id="b94fb-220">Configure domain accounts</span></span>
<span data-ttu-id="b94fb-221">passaggi successivi Hello configurare gli account di Active Directory hello per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="b94fb-221">hello next steps configure hello Active Directory accounts for later use.</span></span>

1. <span data-ttu-id="b94fb-222">Eseguire nuovamente l'accesso toohello **ContosoDC** macchina.</span><span class="sxs-lookup"><span data-stu-id="b94fb-222">Sign back in toohello **ContosoDC** machine.</span></span>
2. <span data-ttu-id="b94fb-223">In **Server Manager** fare clic su **Strumenti** > **Centro di amministrazione di Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-223">In **Server Manager**, click **Tools** > **Active Directory Administrative Center**.</span></span>
   
    ![Centro di amministrazione di Active Directory](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784626.png)
3. <span data-ttu-id="b94fb-225">In hello **il centro di amministrazione di Active Directory**selezionare **corp (locale)** nel riquadro di sinistra hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-225">In hello **Active Directory Administrative Center**, select **corp (local)** in hello left pane.</span></span>
4. <span data-ttu-id="b94fb-226">In hello destra **attività** riquadro, fare clic su **New** > **utente**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-226">On hello right **Tasks** pane, click **New** > **User**.</span></span> <span data-ttu-id="b94fb-227">Utilizzare hello seguenti impostazioni:</span><span class="sxs-lookup"><span data-stu-id="b94fb-227">Use hello following settings:</span></span>
   
   | <span data-ttu-id="b94fb-228">Impostazione</span><span class="sxs-lookup"><span data-stu-id="b94fb-228">Setting</span></span> | <span data-ttu-id="b94fb-229">Valore</span><span class="sxs-lookup"><span data-stu-id="b94fb-229">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="b94fb-230">**Nome**</span><span class="sxs-lookup"><span data-stu-id="b94fb-230">**First Name**</span></span> |<span data-ttu-id="b94fb-231">Installa</span><span class="sxs-lookup"><span data-stu-id="b94fb-231">Install</span></span> |
   | <span data-ttu-id="b94fb-232">**Utente SamAccountName**</span><span class="sxs-lookup"><span data-stu-id="b94fb-232">**User SamAccountName**</span></span> |<span data-ttu-id="b94fb-233">Installa</span><span class="sxs-lookup"><span data-stu-id="b94fb-233">Install</span></span> |
   | <span data-ttu-id="b94fb-234">**Password**</span><span class="sxs-lookup"><span data-stu-id="b94fb-234">**Password**</span></span> |<span data-ttu-id="b94fb-235">Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-235">Contoso!000</span></span> |
   | <span data-ttu-id="b94fb-236">**Conferma password**</span><span class="sxs-lookup"><span data-stu-id="b94fb-236">**Confirm password**</span></span> |<span data-ttu-id="b94fb-237">Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-237">Contoso!000</span></span> |
   | <span data-ttu-id="b94fb-238">**Altre opzioni password**</span><span class="sxs-lookup"><span data-stu-id="b94fb-238">**Other password options**</span></span> |<span data-ttu-id="b94fb-239">Selezionato</span><span class="sxs-lookup"><span data-stu-id="b94fb-239">Selected</span></span> |
   | <span data-ttu-id="b94fb-240">**Nessuna scadenza password**</span><span class="sxs-lookup"><span data-stu-id="b94fb-240">**Password never expires**</span></span> |<span data-ttu-id="b94fb-241">Selezionato</span><span class="sxs-lookup"><span data-stu-id="b94fb-241">Checked</span></span> |
5. <span data-ttu-id="b94fb-242">Fare clic su **OK** toocreate hello **installare** utente.</span><span class="sxs-lookup"><span data-stu-id="b94fb-242">Click **OK** toocreate hello **Install** user.</span></span> <span data-ttu-id="b94fb-243">Questo account sarà utilizzato tooconfigure hello failover cluster e hello gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="b94fb-243">This account will be used tooconfigure hello failover cluster and hello availability group.</span></span>
6. <span data-ttu-id="b94fb-244">Creare due utenti aggiuntivi, **CORP\SQLSvc1** e **CORP\SQLSvc2**, con hello stessi passaggi.</span><span class="sxs-lookup"><span data-stu-id="b94fb-244">Create two additional users, **CORP\SQLSvc1** and **CORP\SQLSvc2**, with hello same steps.</span></span> <span data-ttu-id="b94fb-245">Questi account verranno usati per le istanze di SQL Server hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-245">These accounts will be used for hello SQL Server instances.</span></span> <span data-ttu-id="b94fb-246">Successivamente, è necessario toogive **CORP\Install** hello delle autorizzazioni necessarie tooconfigure Windows del clustering di failover.</span><span class="sxs-lookup"><span data-stu-id="b94fb-246">Next, you need toogive **CORP\Install** hello necessary permissions tooconfigure Windows failover clustering.</span></span>
7. <span data-ttu-id="b94fb-247">In hello **il centro di amministrazione di Active Directory**, fare clic su **corp (locale)** nel riquadro di sinistra hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-247">In hello **Active Directory Administrative Center**, click **corp (local)** in hello left pane.</span></span> <span data-ttu-id="b94fb-248">In hello **attività** riquadro, fare clic su **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-248">In hello **Tasks** pane, click **Properties**.</span></span>
   
    ![Proprietà utente CORP](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784627.png)
8. <span data-ttu-id="b94fb-250">Selezionare **estensioni**, quindi fare clic su hello **avanzate** pulsante hello **sicurezza** scheda.</span><span class="sxs-lookup"><span data-stu-id="b94fb-250">Select **Extensions**, and then click hello **Advanced** button on hello **Security** tab.</span></span>
9. <span data-ttu-id="b94fb-251">In hello **impostazioni di sicurezza avanzate per corp** la finestra di dialogo, fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-251">In hello **Advanced Security Settings for corp** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="b94fb-252">Fare clic su **Seleziona un'entità**, cercare **CORP\Install** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-252">Click **Select a principal**, search for **CORP\Install**, and then click **OK**.</span></span>
11. <span data-ttu-id="b94fb-253">Seleziona hello **Leggi tutte le proprietà** e **crea oggetti Computer** autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="b94fb-253">Select hello **Read all properties** and **Create Computer objects** permissions.</span></span>
    
     ![Autorizzazioni utente Corp](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784628.png)
12. <span data-ttu-id="b94fb-255">Fare clic su **OK** e quindi di nuovo clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-255">Click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="b94fb-256">Finestra proprietà di corp hello Chiudi.</span><span class="sxs-lookup"><span data-stu-id="b94fb-256">Close hello corp properties window.</span></span>

<span data-ttu-id="b94fb-257">Ora che è configurato Active Directory e gli oggetti utente hello, si crea tre macchine virtuali di SQL Server e aggiungerle toothis dominio.</span><span class="sxs-lookup"><span data-stu-id="b94fb-257">Now that you configured Active Directory and hello user objects, you will create three SQL Server virtual machines and join them toothis domain.</span></span>

## <a name="create-hello-sql-server-virtual-machines"></a><span data-ttu-id="b94fb-258">Creare hello macchine virtuali di SQL Server</span><span class="sxs-lookup"><span data-stu-id="b94fb-258">Create hello SQL Server virtual machines</span></span>
<span data-ttu-id="b94fb-259">Creare tre macchine virtuali,</span><span class="sxs-lookup"><span data-stu-id="b94fb-259">Create three virtual machines.</span></span> <span data-ttu-id="b94fb-260">una per un nodo del cluster e due per SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b94fb-260">One is for a cluster node and two are for SQL Server.</span></span> <span data-ttu-id="b94fb-261">toocreate delle macchine virtuali di hello, Vai indietro toohello portale di Azure classico, fare clic su **New** > **calcolo** > **macchina virtuale**  >  **Dalla raccolta**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-261">toocreate each of hello virtual machines, go back toohello Azure classic portal, click **New** > **Compute** > **Virtual Machine** > **From Gallery**.</span></span> <span data-ttu-id="b94fb-262">Quindi, è possibile utilizzare modelli di hello nella seguente tabella toohelp si creano macchine virtuali hello hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-262">Then, use hello templates in hello following table toohelp you create hello virtual machines.</span></span>

| <span data-ttu-id="b94fb-263">Page</span><span class="sxs-lookup"><span data-stu-id="b94fb-263">Page</span></span> | <span data-ttu-id="b94fb-264">VM1</span><span class="sxs-lookup"><span data-stu-id="b94fb-264">VM1</span></span> | <span data-ttu-id="b94fb-265">VM2</span><span class="sxs-lookup"><span data-stu-id="b94fb-265">VM2</span></span> | <span data-ttu-id="b94fb-266">VM3</span><span class="sxs-lookup"><span data-stu-id="b94fb-266">VM3</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="b94fb-267">Sistema operativo della macchina virtuale selezionare hello</span><span class="sxs-lookup"><span data-stu-id="b94fb-267">Select hello virtual machine operating system</span></span> |<span data-ttu-id="b94fb-268">**Windows Server 2012 R2 Datacenter**</span><span class="sxs-lookup"><span data-stu-id="b94fb-268">**Windows Server 2012 R2 Datacenter**</span></span> |<span data-ttu-id="b94fb-269">**SQL Server 2014 RTM Enterprise**</span><span class="sxs-lookup"><span data-stu-id="b94fb-269">**SQL Server 2014 RTM Enterprise**</span></span> |<span data-ttu-id="b94fb-270">**SQL Server 2014 RTM Enterprise**</span><span class="sxs-lookup"><span data-stu-id="b94fb-270">**SQL Server 2014 RTM Enterprise**</span></span> |
| <span data-ttu-id="b94fb-271">Configurazione macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="b94fb-271">Virtual machine configuration</span></span> |<span data-ttu-id="b94fb-272">**DATA DI RILASCIO VERSIONE** = (più recente)</span><span class="sxs-lookup"><span data-stu-id="b94fb-272">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="b94fb-273">**NOME MACCHINA VIRTUALE** = ContosoWSFCNode</span><span class="sxs-lookup"><span data-stu-id="b94fb-273">**VIRTUAL MACHINE NAME** = ContosoWSFCNode</span></span><br/><span data-ttu-id="b94fb-274">**PIANO** = STANDARD</span><span class="sxs-lookup"><span data-stu-id="b94fb-274">**TIER** = STANDARD</span></span><br/><span data-ttu-id="b94fb-275">**DIMENSIONI** = A2 (2 core)</span><span class="sxs-lookup"><span data-stu-id="b94fb-275">**SIZE** = A2 (2 cores)</span></span><br/><span data-ttu-id="b94fb-276">**NUOVO NOME UTENTE** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="b94fb-276">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="b94fb-277">**NUOVA PASSWORD** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-277">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="b94fb-278">**CONFERMA** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-278">**CONFIRM** = Contoso!000</span></span> |<span data-ttu-id="b94fb-279">**DATA DI RILASCIO VERSIONE** = (più recente)</span><span class="sxs-lookup"><span data-stu-id="b94fb-279">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="b94fb-280">**NOME MACCHINA VIRTUALE** = ContosoSQL1</span><span class="sxs-lookup"><span data-stu-id="b94fb-280">**VIRTUAL MACHINE NAME** = ContosoSQL1</span></span><br/><span data-ttu-id="b94fb-281">**PIANO** = STANDARD</span><span class="sxs-lookup"><span data-stu-id="b94fb-281">**TIER** = STANDARD</span></span><br/><span data-ttu-id="b94fb-282">**DIMENSIONI** = A3 (4 core)</span><span class="sxs-lookup"><span data-stu-id="b94fb-282">**SIZE** = A3 (4 cores)</span></span><br/><span data-ttu-id="b94fb-283">**NUOVO NOME UTENTE** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="b94fb-283">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="b94fb-284">**NUOVA PASSWORD** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-284">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="b94fb-285">**CONFERMA** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-285">**CONFIRM** = Contoso!000</span></span> |<span data-ttu-id="b94fb-286">**DATA DI RILASCIO VERSIONE** = (più recente)</span><span class="sxs-lookup"><span data-stu-id="b94fb-286">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="b94fb-287">**NOME MACCHINA VIRTUALE** = ContosoSQL2</span><span class="sxs-lookup"><span data-stu-id="b94fb-287">**VIRTUAL MACHINE NAME** = ContosoSQL2</span></span><br/><span data-ttu-id="b94fb-288">**PIANO** = STANDARD</span><span class="sxs-lookup"><span data-stu-id="b94fb-288">**TIER** = STANDARD</span></span><br/><span data-ttu-id="b94fb-289">**DIMENSIONI** = A3 (4 core)</span><span class="sxs-lookup"><span data-stu-id="b94fb-289">**SIZE** = A3 (4 cores)</span></span><br/><span data-ttu-id="b94fb-290">**NUOVO NOME UTENTE** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="b94fb-290">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="b94fb-291">**NUOVA PASSWORD** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-291">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="b94fb-292">**CONFERMA** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="b94fb-292">**CONFIRM** = Contoso!000</span></span> |
| <span data-ttu-id="b94fb-293">Configurazione macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="b94fb-293">Virtual machine configuration</span></span> |<span data-ttu-id="b94fb-294">**SERVIZIO CLOUD** = nome DNS univoco del servizio cloud creato in precedenza (ad esempio: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="b94fb-294">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="b94fb-295">**AREA/GRUPPO DI AFFINITÀ/RETE VIRTUALE** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="b94fb-295">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="b94fb-296">**SUNET RETE VIRTUALE** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="b94fb-296">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="b94fb-297">**ACCOUNT DI ARCHIVIAZIONE**: usare un account di archiviazione generato automaticamente</span><span class="sxs-lookup"><span data-stu-id="b94fb-297">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="b94fb-298">**SETDI DISPONIBILITÀ** = creare un set di disponibilità</span><span class="sxs-lookup"><span data-stu-id="b94fb-298">**AVAILABILITY SET** = Create an availability set</span></span><br/><span data-ttu-id="b94fb-299">**NOME SET DI DISPONIBILITÀ** = SQLHADR</span><span class="sxs-lookup"><span data-stu-id="b94fb-299">**AVAILABILITY SET NAME** = SQLHADR</span></span> |<span data-ttu-id="b94fb-300">**SERVIZIO CLOUD** = nome DNS univoco del servizio cloud creato in precedenza (ad esempio: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="b94fb-300">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="b94fb-301">**AREA/GRUPPO DI AFFINITÀ/RETE VIRTUALE** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="b94fb-301">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="b94fb-302">**SUNET RETE VIRTUALE** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="b94fb-302">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="b94fb-303">**ACCOUNT DI ARCHIVIAZIONE**: usare un account di archiviazione generato automaticamente</span><span class="sxs-lookup"><span data-stu-id="b94fb-303">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="b94fb-304">**SET di disponibilità** = SQLHADR (è possibile configurare anche hello set di disponibilità dopo hello macchina è stata creata.</span><span class="sxs-lookup"><span data-stu-id="b94fb-304">**AVAILABILITY SET** = SQLHADR (You can also configure hello availability set after hello machine has been created.</span></span> <span data-ttu-id="b94fb-305">Tutti e tre i computer devono essere assegnati toohello set di disponibilità SQLHADR.)</span><span class="sxs-lookup"><span data-stu-id="b94fb-305">All three machines should be assigned toohello SQLHADR availability set.)</span></span> |<span data-ttu-id="b94fb-306">**SERVIZIO CLOUD** = nome DNS univoco del servizio cloud creato in precedenza (ad esempio: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="b94fb-306">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="b94fb-307">**AREA/GRUPPO DI AFFINITÀ/RETE VIRTUALE** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="b94fb-307">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="b94fb-308">**SUNET RETE VIRTUALE** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="b94fb-308">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="b94fb-309">**ACCOUNT DI ARCHIVIAZIONE**: usare un account di archiviazione generato automaticamente</span><span class="sxs-lookup"><span data-stu-id="b94fb-309">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="b94fb-310">**SET di disponibilità** = SQLHADR (è possibile configurare anche hello set di disponibilità dopo hello macchina è stata creata.</span><span class="sxs-lookup"><span data-stu-id="b94fb-310">**AVAILABILITY SET** = SQLHADR (You can also configure hello availability set after hello machine has been created.</span></span> <span data-ttu-id="b94fb-311">Tutti e tre i computer devono essere assegnati toohello set di disponibilità SQLHADR.)</span><span class="sxs-lookup"><span data-stu-id="b94fb-311">All three machines should be assigned toohello SQLHADR availability set.)</span></span> |
| <span data-ttu-id="b94fb-312">Opzioni macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="b94fb-312">Virtual machine options</span></span> |<span data-ttu-id="b94fb-313">Valori predefiniti</span><span class="sxs-lookup"><span data-stu-id="b94fb-313">Use defaults</span></span> |<span data-ttu-id="b94fb-314">Valori predefiniti</span><span class="sxs-lookup"><span data-stu-id="b94fb-314">Use defaults</span></span> |<span data-ttu-id="b94fb-315">Valori predefiniti</span><span class="sxs-lookup"><span data-stu-id="b94fb-315">Use defaults</span></span> |

<br/>

> [!NOTE]
> <span data-ttu-id="b94fb-316">la configurazione precedente Hello suggerisce macchine virtuali di livello STANDARD, poiché il computer di livello BASIC non supportano endpoint con bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="b94fb-316">hello previous configuration suggests STANDARD tier virtual machines, because BASIC tier machines do not support load-balanced endpoints.</span></span> <span data-ttu-id="b94fb-317">È necessario endpoint con carico bilanciato toocreate successive un listener del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="b94fb-317">You need load-balanced endpoints later toocreate an availability group listener.</span></span> <span data-ttu-id="b94fb-318">Inoltre, le dimensioni delle macchine hello che qui suggerite sono concepite per il testing di gruppi di disponibilità in macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="b94fb-318">Also, hello machine sizes that are suggested here are meant for testing availability groups in Azure Virtual Machines.</span></span> <span data-ttu-id="b94fb-319">Per prestazioni ottimali di hello sui carichi di lavoro di produzione, visualizzare le raccomandazioni hello per le dimensioni della macchina SQL Server e la configurazione in [prestazioni ottimali per SQL Server in macchine virtuali di Azure](../sql/virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="b94fb-319">For hello best performance on production workloads, see hello recommendations for SQL Server machine sizes and configuration in [Performance best practices for SQL Server in Azure Virtual Machines](../sql/virtual-machines-windows-sql-performance.md).</span></span>
> 
> 

<span data-ttu-id="b94fb-320">Al termine hello e tre le macchine virtuali sono provisioning, è necessario toojoin li toohello **corp.contoso.com** dominio e concedere le macchine toohello CORP\Install diritti amministrativi.</span><span class="sxs-lookup"><span data-stu-id="b94fb-320">After hello three virtual machines are fully provisioned, you need toojoin them toohello **corp.contoso.com** domain and grant CORP\Install administrative rights toohello machines.</span></span> <span data-ttu-id="b94fb-321">toodo hello, questo uso seguendo i passaggi per ognuna delle macchine virtuali hello tre.</span><span class="sxs-lookup"><span data-stu-id="b94fb-321">toodo this, use hello following steps for each of hello three virtual machines.</span></span>

1. <span data-ttu-id="b94fb-322">Modificare in primo luogo, l'indirizzo del server DNS preferito hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-322">First, change hello preferred DNS server address.</span></span> <span data-ttu-id="b94fb-323">Scaricare una directory locale di ogni macchina virtuale RDP file tooyour selezionando macchina virtuale hello hello elenco e facendo clic su hello **Connetti** pulsante.</span><span class="sxs-lookup"><span data-stu-id="b94fb-323">Download each virtual machine's RDP file tooyour local directory by selecting hello virtual machine in hello list and clicking hello **Connect** button.</span></span> <span data-ttu-id="b94fb-324">tooselect una macchina virtuale, fare clic in un punto qualsiasi ma hello prima cella hello riga, come illustrato nella seguente schermata hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-324">tooselect a virtual machine, click anywhere but hello first cell in hello row, as shown in hello following screenshot.</span></span>
   
    ![Scaricare il file RDP hello](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC664953.jpg)
2. <span data-ttu-id="b94fb-326">Aprire hello RDP file scaricato e accedere utilizzando l'account amministratore configurato macchina virtuale toohello (**BUILTIN\AzureAdmin**) e la password (**Contoso! 000**).</span><span class="sxs-lookup"><span data-stu-id="b94fb-326">Open hello RDP file that you downloaded, and sign in toohello virtual machine by using your configured administrator account (**BUILTIN\AzureAdmin**) and password (**Contoso!000**).</span></span>
3. <span data-ttu-id="b94fb-327">Dopo l'accesso, dovrebbe essere hello **Server Manager** dashboard.</span><span class="sxs-lookup"><span data-stu-id="b94fb-327">After you sign in, you should see hello **Server Manager** dashboard.</span></span> <span data-ttu-id="b94fb-328">Fare clic su **Server locale** nel riquadro di sinistra hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-328">Click **Local Server** in hello left pane.</span></span>
4. <span data-ttu-id="b94fb-329">Fare clic su hello **indirizzo IPv4 assegnato da DHCP, compatibile IPv6** collegamento.</span><span class="sxs-lookup"><span data-stu-id="b94fb-329">Click hello **IPv4 address assigned by DHCP, IPv6 enabled** link.</span></span>
5. <span data-ttu-id="b94fb-330">In hello **connessioni di rete** finestra di dialogo fare clic sull'icona di rete hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-330">In hello **Network Connections** dialog box, click hello network icon.</span></span>
   
    ![Server DNS di macchina virtuale preferito hello modifica](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784629.png)
6. <span data-ttu-id="b94fb-332">Nella barra dei comandi di hello, fare clic su **modificare le impostazioni di hello di questa connessione**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-332">On hello command bar, click **Change hello settings of this connection**.</span></span> <span data-ttu-id="b94fb-333">(A seconda delle dimensioni di hello della finestra, potrebbe essere tooclick hello doppia freccia a destra toosee questo comando).</span><span class="sxs-lookup"><span data-stu-id="b94fb-333">(Depending on hello size of your window, you might have tooclick hello double right arrow toosee this command).</span></span>
7. <span data-ttu-id="b94fb-334">Selezionare **Protocollo Internet versione 4 (TCP/IPv4)** e quindi fare clic su **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-334">Select **Internet Protocol Version 4 (TCP/IPv4)**, and then click **Properties**.</span></span>
8. <span data-ttu-id="b94fb-335">Selezionare **hello utilizzare seguenti indirizzi server DNS** e quindi specificare **10.10.2.4** in **server DNS preferito**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-335">Select **Use hello following DNS server addresses** and then specify **10.10.2.4** in **Preferred DNS server**.</span></span>
9. <span data-ttu-id="b94fb-336">Hello **10.10.2.4** indirizzo è hello che è assegnato tooa di macchina virtuale nella subnet 10.10.2.0/24 hello in una rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="b94fb-336">hello **10.10.2.4** address is hello address that's assigned tooa virtual machine in hello 10.10.2.0/24 subnet in an Azure virtual network.</span></span> <span data-ttu-id="b94fb-337">e la macchina virtuale è **ContosoDC**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-337">That virtual machine is **ContosoDC**.</span></span> <span data-ttu-id="b94fb-338">tooverify **ContosoDC**dell'indirizzo IP, utilizzare **nslookup contosodc** nella finestra del prompt dei comandi hello, come illustrato nella seguente schermata hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-338">tooverify **ContosoDC**'s IP address, use **nslookup contosodc** in hello command prompt window, as shown in hello following screenshot.</span></span>
   
    ![Utilizzare l'indirizzo IP toofind NSLOOKUP per controller di dominio](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC664954.jpg)
10. <span data-ttu-id="b94fb-340">Fare clic su **OK** > **Chiudi** modifiche hello toocommit.</span><span class="sxs-lookup"><span data-stu-id="b94fb-340">Click **OK** > **Close** toocommit hello changes.</span></span> <span data-ttu-id="b94fb-341">È ora possibile aggiungere macchina virtuale hello troppo**corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-341">You can now join hello virtual machine too**corp.contoso.com**.</span></span>
11. <span data-ttu-id="b94fb-342">In hello **Server locale** finestra, fare clic su hello **WORKGROUP** collegamento.</span><span class="sxs-lookup"><span data-stu-id="b94fb-342">Back in hello **Local Server** window, click hello **WORKGROUP** link.</span></span>
12. <span data-ttu-id="b94fb-343">In hello **nome Computer** fare clic su **modifica**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-343">In hello **Computer Name** section, click **Change**.</span></span>
13. <span data-ttu-id="b94fb-344">Seleziona hello **dominio** nella casella di controllo **corp.contoso.com** in hello casella di testo e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-344">Select hello **Domain** check box, type **corp.contoso.com** in hello text box, and then click **OK**.</span></span>
14. <span data-ttu-id="b94fb-345">In hello **la sicurezza di Windows** finestra di dialogo specificare le credenziali di hello per account di amministratore di dominio predefinito hello (**CORP\AzureAdmin**) e la password di hello (**Contoso! 000**).</span><span class="sxs-lookup"><span data-stu-id="b94fb-345">In hello **Windows Security** dialog box, specify hello credentials for hello default domain administrator account (**CORP\AzureAdmin**) and hello password (**Contoso!000**).</span></span>
15. <span data-ttu-id="b94fb-346">Quando viene visualizzato il messaggio "dominio corp.contoso.com toohello iniziale" hello, fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-346">When you see hello "Welcome toohello corp.contoso.com domain" message, click **OK**.</span></span>
16. <span data-ttu-id="b94fb-347">Fare clic su **Chiudi** > **Riavvia ora** nella finestra di dialogo hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-347">Click **Close** > **Restart Now** in hello dialog box.</span></span>

### <a name="add-hello-corpinstall-user-as-an-administrator-on-each-virtual-machine"></a><span data-ttu-id="b94fb-348">Aggiungi utente Corp\Install hello come amministratore in ogni macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="b94fb-348">Add hello Corp\Install user as an administrator on each virtual machine</span></span>
1. <span data-ttu-id="b94fb-349">Attendere il riavvio della macchina virtuale hello e quindi aprire hello RDP file nuovamente toosign nella macchina virtuale toohello tramite hello **BUILTIN\AzureAdmin** account.</span><span class="sxs-lookup"><span data-stu-id="b94fb-349">Wait until hello virtual machine restarts, and then open hello RDP file again toosign in toohello virtual machine by using hello **BUILTIN\AzureAdmin** account.</span></span>
2. <span data-ttu-id="b94fb-350">In **Server Manager** fare clic su **Strumenti** > **Gestione computer**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-350">In **Server Manager** click **Tools** > **Computer Management**.</span></span>
   
    ![Gestione computer](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784630.png)
3. <span data-ttu-id="b94fb-352">In hello **Gestione Computer** finestra di dialogo espandere **utenti e gruppi locali**, quindi fare clic su **gruppi**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-352">In hello **Computer Management** dialog box, expand **Local Users and Groups**, and then click **Groups**.</span></span>
4. <span data-ttu-id="b94fb-353">Fare doppio clic su hello **amministratori** gruppo.</span><span class="sxs-lookup"><span data-stu-id="b94fb-353">Double-click hello **Administrators** group.</span></span>
5. <span data-ttu-id="b94fb-354">In hello **proprietà amministratori** finestra di dialogo fare clic su hello **Aggiungi** pulsante.</span><span class="sxs-lookup"><span data-stu-id="b94fb-354">In hello **Administrators Properties** dialog box, click hello **Add** button.</span></span>
6. <span data-ttu-id="b94fb-355">Immettere nome utente hello **CORP\Install**, quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-355">Enter hello user **CORP\Install**, and then click **OK**.</span></span> <span data-ttu-id="b94fb-356">Quando vengono richieste le credenziali, utilizzare hello **AzureAdmin** account con hello **Contoso! 000** password.</span><span class="sxs-lookup"><span data-stu-id="b94fb-356">When prompted for credentials, use hello **AzureAdmin** account with hello **Contoso!000** password.</span></span>
7. <span data-ttu-id="b94fb-357">Fare clic su **OK** tooclose hello **proprietà amministratore** la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="b94fb-357">Click **OK** tooclose hello **Administrator Properties** dialog box.</span></span>

### <a name="add-hello-failover-clustering-feature-tooeach-virtual-machine"></a><span data-ttu-id="b94fb-358">Aggiungere il Clustering di Failover hello macchina virtuale tooeach con funzionalità</span><span class="sxs-lookup"><span data-stu-id="b94fb-358">Add hello Failover Clustering feature tooeach virtual machine</span></span>
1. <span data-ttu-id="b94fb-359">In hello **Server Manager** dashboard, fare clic su **Aggiungi ruoli e funzionalità**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-359">In hello **Server Manager** dashboard, click **Add roles and features**.</span></span>
2. <span data-ttu-id="b94fb-360">In hello **Aggiunta guidata ruoli e funzionalità**, fare clic su **Avanti** fino a ottenere toohello **funzionalità** pagina.</span><span class="sxs-lookup"><span data-stu-id="b94fb-360">In hello **Add Roles and Features Wizard**, click **Next** until you get toohello **Features** page.</span></span>
3. <span data-ttu-id="b94fb-361">Selezionare **Clustering di failover**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-361">Select **Failover Clustering**.</span></span> <span data-ttu-id="b94fb-362">Quando richiesto, aggiungere altre funzionalità dipendenti.</span><span class="sxs-lookup"><span data-stu-id="b94fb-362">When prompted, add other dependent features.</span></span>
   
    ![Aggiungere funzionalità di Clustering di Failover toovirtual macchina](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784631.png)
4. <span data-ttu-id="b94fb-364">Fare clic su **Avanti**, quindi fare clic su **installare** su hello **conferma** pagina.</span><span class="sxs-lookup"><span data-stu-id="b94fb-364">Click **Next**, and then click **Install** on hello **Confirmation** page.</span></span>
5. <span data-ttu-id="b94fb-365">Quando hello **Clustering di Failover** completato l'installazione di funzionalità, fare clic su **Chiudi**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-365">When hello **Failover Clustering** feature installation is finished, click **Close**.</span></span>
6. <span data-ttu-id="b94fb-366">Disconnettersi da macchina virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-366">Sign out of hello virtual machine.</span></span>
7. <span data-ttu-id="b94fb-367">Ripetere i passaggi in questa sezione per tutti e tre i server hello: **ContosoWSFCNode**, **ContosoSQL1**, e **ContosoSQL2**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-367">Repeat hello steps in this section for all three servers: **ContosoWSFCNode**, **ContosoSQL1**, and **ContosoSQL2**.</span></span>

<span data-ttu-id="b94fb-368">Hello ora provisioning delle macchine virtuali di SQL Server e in esecuzione, ma ciascuno con le opzioni predefinite di hello per SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b94fb-368">hello SQL Server virtual machines are now provisioned and running, but each has hello default options for SQL Server.</span></span>

## <a name="create-hello-failover-cluster"></a><span data-ttu-id="b94fb-369">Creare il cluster di failover di hello</span><span class="sxs-lookup"><span data-stu-id="b94fb-369">Create hello failover cluster</span></span>
<span data-ttu-id="b94fb-370">In questa sezione, creare i cluster di failover hello che ospiterà il gruppo di disponibilità hello che verrà creato in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="b94fb-370">In this section, you create hello failover cluster that will host hello availability group that you will create later.</span></span> <span data-ttu-id="b94fb-371">A questo punto, si sono state eseguite hello tooeach delle macchine virtuali hello tre che verrà utilizzato in cluster di failover hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="b94fb-371">By now, you should have done hello following tooeach of hello three virtual machines that you will use in hello failover cluster:</span></span>

* <span data-ttu-id="b94fb-372">Hello completo di macchina virtuale in Azure</span><span class="sxs-lookup"><span data-stu-id="b94fb-372">Fully provisioned hello virtual machine in Azure</span></span>
* <span data-ttu-id="b94fb-373">È stato aggiunto hello macchina virtuale toohello dominio</span><span class="sxs-lookup"><span data-stu-id="b94fb-373">Joined hello virtual machine toohello domain</span></span>
* <span data-ttu-id="b94fb-374">Aggiunto **CORP\Install** toohello gruppo di amministratori locali</span><span class="sxs-lookup"><span data-stu-id="b94fb-374">Added **CORP\Install** toohello local Administrators group</span></span>
* <span data-ttu-id="b94fb-375">Funzionalità di clustering di failover aggiunto hello</span><span class="sxs-lookup"><span data-stu-id="b94fb-375">Added hello failover clustering feature</span></span>

<span data-ttu-id="b94fb-376">Tutte queste operazioni sono prerequisiti in ogni macchina virtuale prima poter creare un join toohello cluster di failover.</span><span class="sxs-lookup"><span data-stu-id="b94fb-376">All these are prerequisites on each virtual machine before you can join it toohello failover cluster.</span></span>

<span data-ttu-id="b94fb-377">Inoltre, si noti che hello rete virtuale di Azure non si comportano in hello stesso come una rete locale.</span><span class="sxs-lookup"><span data-stu-id="b94fb-377">Also, note that hello Azure virtual network does not behave in hello same way as an on-premises network.</span></span> <span data-ttu-id="b94fb-378">È necessario cluster hello toocreate in hello seguente ordine:</span><span class="sxs-lookup"><span data-stu-id="b94fb-378">You need toocreate hello cluster in hello following order:</span></span>

1. <span data-ttu-id="b94fb-379">Creare un cluster a nodo singolo in uno dei nodi (**ContosoSQL1**).</span><span class="sxs-lookup"><span data-stu-id="b94fb-379">Create a single-node cluster on one node (**ContosoSQL1**).</span></span>
2. <span data-ttu-id="b94fb-380">Modificare tooan indirizzo IP del cluster di hello indirizzo IP inutilizzato (**10.10.2.101**).</span><span class="sxs-lookup"><span data-stu-id="b94fb-380">Modify hello cluster IP address tooan unused IP address (**10.10.2.101**).</span></span>
3. <span data-ttu-id="b94fb-381">Portare online nome del cluster hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-381">Bring hello cluster name online.</span></span>
4. <span data-ttu-id="b94fb-382">Aggiungere altri nodi hello (**ContosoSQL2** e **ContosoWSFCNode**).</span><span class="sxs-lookup"><span data-stu-id="b94fb-382">Add hello other nodes (**ContosoSQL2** and **ContosoWSFCNode**).</span></span>

<span data-ttu-id="b94fb-383">Utilizzare i seguenti passaggi toocomplete hello attività che consentono di configurare completamente il cluster hello hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-383">Use hello following steps toocomplete hello tasks that fully configure hello cluster.</span></span>

1. <span data-ttu-id="b94fb-384">Il file RDP hello Open per **ContosoSQL1**e accedere utilizzando account di dominio hello **CORP\Install**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-384">Open hello RDP file for **ContosoSQL1**, and sign in by using hello domain account **CORP\Install**.</span></span>
2. <span data-ttu-id="b94fb-385">In hello **Server Manager** dashboard, fare clic su **strumenti** > **gestione Cluster di Failover**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-385">In hello **Server Manager** dashboard, click **Tools** > **Failover Cluster Manager**.</span></span>
3. <span data-ttu-id="b94fb-386">Nel riquadro di sinistra hello, fare doppio clic su **gestione Cluster di Failover**, quindi fare clic su **creare un Cluster**, come illustrato nella seguente schermata hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-386">In hello left pane, right-click **Failover Cluster Manager**, and then click **Create a Cluster**, as shown in hello following screenshot.</span></span>
   
    ![Creare cluster](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784632.png)
4. <span data-ttu-id="b94fb-388">In hello Creazione guidata Cluster, creare un cluster a un nodo avanzando pagine hello e utilizzando le impostazioni di hello in hello nella tabella seguente:</span><span class="sxs-lookup"><span data-stu-id="b94fb-388">In hello Create Cluster Wizard, create a one-node cluster by stepping through hello pages and using hello settings in hello following table:</span></span>
   
   | <span data-ttu-id="b94fb-389">Page</span><span class="sxs-lookup"><span data-stu-id="b94fb-389">Page</span></span> | <span data-ttu-id="b94fb-390">Impostazioni</span><span class="sxs-lookup"><span data-stu-id="b94fb-390">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="b94fb-391">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="b94fb-391">Before You Begin</span></span> |<span data-ttu-id="b94fb-392">Valori predefiniti</span><span class="sxs-lookup"><span data-stu-id="b94fb-392">Use defaults</span></span> |
   | <span data-ttu-id="b94fb-393">Selezione dei server</span><span class="sxs-lookup"><span data-stu-id="b94fb-393">Select Servers</span></span> |<span data-ttu-id="b94fb-394">Digitare **ContosoSQL1** in **Immettere il nome del server** e fare clic su **Aggiungi**</span><span class="sxs-lookup"><span data-stu-id="b94fb-394">Type **ContosoSQL1** in **Enter server name** and click **Add**</span></span> |
   | <span data-ttu-id="b94fb-395">Avviso di convalida</span><span class="sxs-lookup"><span data-stu-id="b94fb-395">Validation Warning</span></span> |<span data-ttu-id="b94fb-396">Selezionare **Nr I non è necessario supporto da Microsoft per questo cluster e pertanto non si desidera che la convalida di hello toorun test. Quando fa clic su Avanti, continuare con la creazione di cluster hello**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-396">Select **No. I do not require support from Microsoft for this cluster, and therefore do not want toorun hello validation tests. When I click Next, continue creating hello cluster**.</span></span> |
   | <span data-ttu-id="b94fb-397">Punto di accesso per hello amministrazione Cluster</span><span class="sxs-lookup"><span data-stu-id="b94fb-397">Access Point for Administering hello Cluster</span></span> |<span data-ttu-id="b94fb-398">Digitare **Cluster1** in **Nome cluster**</span><span class="sxs-lookup"><span data-stu-id="b94fb-398">Type **Cluster1** in **Cluster Name**</span></span> |
   | <span data-ttu-id="b94fb-399">Conferma</span><span class="sxs-lookup"><span data-stu-id="b94fb-399">Confirmation</span></span> |<span data-ttu-id="b94fb-400">Usare le impostazioni predefinite a meno a meno che non si usino spazi di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="b94fb-400">Use defaults unless you are using Storage Spaces.</span></span> <span data-ttu-id="b94fb-401">Vedere l'avviso hello segue questa tabella.</span><span class="sxs-lookup"><span data-stu-id="b94fb-401">See hello warning following this table.</span></span> |
   
   > [!WARNING]
   > <span data-ttu-id="b94fb-402">Se si utilizza [spazi di archiviazione](https://technet.microsoft.com/library/hh831739), che raggruppa più dischi nel pool di archiviazione, è necessario deselezionare hello **aggiungere tutte le risorse di archiviazione idonee toohello cluster** casella di controllo hello **conferma** pagina.</span><span class="sxs-lookup"><span data-stu-id="b94fb-402">If you are using [Storage Spaces](https://technet.microsoft.com/library/hh831739), which groups multiple disks into storage pools, you must clear hello **Add all eligible storage toohello cluster** check box on hello **Confirmation** page.</span></span> <span data-ttu-id="b94fb-403">Se non si deseleziona questa opzione, i dischi virtuali hello verranno disconnesso durante il processo di clustering hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-403">If you do not clear this option, hello virtual disks will be detached during hello clustering process.</span></span> <span data-ttu-id="b94fb-404">Di conseguenza, verranno inoltre non visualizzati in Gestione disco o Esplora fino a quando gli spazi di archiviazione hello vengono rimossi dal cluster hello e ricollegati tramite PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b94fb-404">As a result, they will also not appear in Disk Manager or Explorer until hello storage spaces are removed from hello cluster and reattached by using PowerShell.</span></span>
   > 
   > 
5. <span data-ttu-id="b94fb-405">Nel riquadro sinistro hello espandere **gestione Cluster di Failover**, quindi fare clic su **Cluster1.corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-405">In hello left pane, expand **Failover Cluster Manager**, and then click **Cluster1.corp.contoso.com**.</span></span>
6. <span data-ttu-id="b94fb-406">Nel riquadro centrale di hello, scorrere verso il basso toohello **risorse principali del Cluster** sezione ed espandere hello **nome: Clutser1** dettagli.</span><span class="sxs-lookup"><span data-stu-id="b94fb-406">In hello center pane, scroll down toohello **Cluster Core Resources** section, and expand hello **Name: Clutser1** details.</span></span> <span data-ttu-id="b94fb-407">Dovrebbe essere entrambi hello **nome** hello e **indirizzo IP** risorse hello **Failed** stato.</span><span class="sxs-lookup"><span data-stu-id="b94fb-407">You should see both hello **Name** and hello **IP Address** resources in hello **Failed** state.</span></span> <span data-ttu-id="b94fb-408">Hello risorsa indirizzo IP non può essere portata online perché il cluster hello è assegnato hello nello stesso indirizzo IP computer hello stesso, ovvero un indirizzo duplicato.</span><span class="sxs-lookup"><span data-stu-id="b94fb-408">hello IP address resource cannot be brought online because hello cluster is assigned hello same IP address as hello machine itself, which is a duplicate address.</span></span>
7. <span data-ttu-id="b94fb-409">Hello pulsante destro del mouse non è stato possibile **indirizzo IP** risorsa e quindi fare clic su **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-409">Right-click hello failed **IP Address** resource, and then click **Properties**.</span></span>
   
    ![Proprietà del cluster](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784633.png)
8. <span data-ttu-id="b94fb-411">Selezionare **indirizzo IP statico**, specificare **10.10.2.101** in hello **indirizzo** casella di testo e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-411">Select **Static IP Address**, specify **10.10.2.101** in hello **Address** text box, and then click **OK**.</span></span>
9. <span data-ttu-id="b94fb-412">In hello **risorse principali del Cluster** sezione destro del mouse su **nome: Cluster1**, quindi fare clic su **in linea**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-412">In hello **Cluster Core Resources** section, right-click **Name: Cluster1**, and then click **Bring Online**.</span></span> <span data-ttu-id="b94fb-413">Attendere finché entrambe le risorse non siano online.</span><span class="sxs-lookup"><span data-stu-id="b94fb-413">Wait until both resources are online.</span></span> <span data-ttu-id="b94fb-414">Quando risorsa del nome cluster hello torna online, il server di controller di dominio hello viene aggiornato con un nuovo account computer di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b94fb-414">When hello cluster name resource comes online, hello DC server is updated with a new Active Directory computer account.</span></span> <span data-ttu-id="b94fb-415">Verrà utilizzato l'account di Active Directory toorun hello del gruppo di disponibilità del servizio cluster in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="b94fb-415">This Active Directory account will be used toorun hello availability group clustered service later.</span></span>
10. <span data-ttu-id="b94fb-416">Aggiungere hello cluster toohello nodi rimanenti.</span><span class="sxs-lookup"><span data-stu-id="b94fb-416">Add hello remaining nodes toohello cluster.</span></span> <span data-ttu-id="b94fb-417">Nella struttura di browser hello, fare doppio clic su **Cluster1.corp.contoso.com**, quindi fare clic su **aggiunta del nodo**, come illustrato nella seguente schermata hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-417">In hello browser tree, right-click **Cluster1.corp.contoso.com**, and then click **Add Node**, as shown in hello following screenshot.</span></span>
    
     ![Aggiungi nodo toohello cluster](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784634.png)
11. <span data-ttu-id="b94fb-419">In hello **Aggiunta guidata nodi**, fare clic su **Avanti** su hello **selezione dei server** pagina, aggiungere **ContosoSQL2** e **ContosoWSFCNode**  toohello elenco digitando il nome server hello in **immettere il nome del server** e quindi fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-419">In hello **Add Node Wizard**, click **Next** on hello **Select Servers** page, add **ContosoSQL2** and **ContosoWSFCNode** toohello list by typing hello server name in **Enter server name** and then clicking **Add**.</span></span> <span data-ttu-id="b94fb-420">Al termine dell'operazione, scegliere **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-420">When you are done, click **Next**.</span></span>
12. <span data-ttu-id="b94fb-421">In hello **avviso di convalida** pagina, fare clic su **n**, anche se in uno scenario di produzione, è necessario eseguire il test di convalida hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-421">On hello **Validation Warning** page, click **No**, although in a production scenario, you should perform hello validation tests.</span></span> <span data-ttu-id="b94fb-422">Quindi fare clic su **Next**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-422">Then, click **Next**.</span></span>
13. <span data-ttu-id="b94fb-423">In hello **conferma** pagina, fare clic su **Avanti** nodi hello tooadd.</span><span class="sxs-lookup"><span data-stu-id="b94fb-423">On hello **Confirmation** page, click **Next** tooadd hello nodes.</span></span>
    
    > [!WARNING]
    > <span data-ttu-id="b94fb-424">Se si utilizza [spazi di archiviazione](https://technet.microsoft.com/library/hh831739), che raggruppa più dischi nel pool di archiviazione, è necessario deselezionare hello **aggiungere tutte le risorse di archiviazione idonee toohello cluster** casella di controllo.</span><span class="sxs-lookup"><span data-stu-id="b94fb-424">If you are using [Storage Spaces](https://technet.microsoft.com/library/hh831739), which groups multiple disks into storage pools, you must clear hello **Add all eligible storage toohello cluster** check box.</span></span> <span data-ttu-id="b94fb-425">Se non si deseleziona questa opzione, i dischi virtuali hello verranno disconnesso durante il processo di clustering hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-425">If you do not clear this option, hello virtual disks will be detached during hello clustering process.</span></span> <span data-ttu-id="b94fb-426">Di conseguenza, essi non appariranno anche in Gestione disco o Esplora fino a quando non vengono rimossi gli spazi di archiviazione di hello dal cluster e ricollegati tramite PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b94fb-426">As a result, they will also not appear in Disk Manager or Explorer until hello storage spaces are removed from cluster and reattached using PowerShell.</span></span>
    > 
    > 
14. <span data-ttu-id="b94fb-427">Una volta aggiungono i nodi di hello toohello cluster, fare clic su **fine**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-427">After hello nodes are added toohello cluster, click **Finish**.</span></span> <span data-ttu-id="b94fb-428">Gestione Cluster di failover devono ora mostrare che il cluster dispone di tre nodi ed elencarli in hello **nodi** contenitore.</span><span class="sxs-lookup"><span data-stu-id="b94fb-428">Failover Cluster Manager should now show that your cluster has three nodes and list them in hello **Nodes** container.</span></span>
15. <span data-ttu-id="b94fb-429">Disconnettersi dalla sessione desktop remoto hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-429">Sign out of hello remote desktop session.</span></span>

## <a name="prepare-hello-sql-server-instances-for-availability-groups"></a><span data-ttu-id="b94fb-430">Preparare le istanze di SQL Server hello per i gruppi di disponibilità</span><span class="sxs-lookup"><span data-stu-id="b94fb-430">Prepare hello SQL Server instances for availability groups</span></span>
<span data-ttu-id="b94fb-431">In questa sezione verranno effettuate hello seguente sia **ContosoSQL1** e **contosoSQL2**:</span><span class="sxs-lookup"><span data-stu-id="b94fb-431">In this section, you will do hello following on both **ContosoSQL1** and **contosoSQL2**:</span></span>

* <span data-ttu-id="b94fb-432">Aggiungere un account di accesso per **NT AUTHORITY\System** impostando toohello istanza di SQL Server predefinita delle autorizzazioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="b94fb-432">Add a login for **NT AUTHORITY\System** with necessary permissions set toohello default SQL Server instance.</span></span>
* <span data-ttu-id="b94fb-433">Aggiungere **CORP\Install** come un'istanza di SQL Server sysadmin ruolo toohello predefinito.</span><span class="sxs-lookup"><span data-stu-id="b94fb-433">Add **CORP\Install** as a sysadmin role toohello default SQL Server instance.</span></span>
* <span data-ttu-id="b94fb-434">Aprire il firewall hello per l'accesso remoto di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b94fb-434">Open hello firewall for remote access of SQL Server.</span></span>
* <span data-ttu-id="b94fb-435">Abilitare hello Always On funzionalità di gruppi di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="b94fb-435">Enable hello Always On availability groups feature.</span></span>
* <span data-ttu-id="b94fb-436">Modificare anche l'account del servizio SQL Server hello**CORP\SQLSvc1** e **CORP\SQLSvc2**, rispettivamente.</span><span class="sxs-lookup"><span data-stu-id="b94fb-436">Change hello SQL Server service account too**CORP\SQLSvc1** and **CORP\SQLSvc2**, respectively.</span></span>

<span data-ttu-id="b94fb-437">Queste azioni possono essere eseguite in qualsiasi ordine.</span><span class="sxs-lookup"><span data-stu-id="b94fb-437">These actions can be performed in any order.</span></span> <span data-ttu-id="b94fb-438">Tuttavia, hello passaggi verrà illustrati in ordine.</span><span class="sxs-lookup"><span data-stu-id="b94fb-438">Nevertheless, hello following steps will walk through them in order.</span></span> <span data-ttu-id="b94fb-439">Ripetere i passaggi di hello per entrambi **ContosoSQL1** e **ContosoSQL2**:</span><span class="sxs-lookup"><span data-stu-id="b94fb-439">Follow hello steps for both **ContosoSQL1** and **ContosoSQL2**:</span></span>

1. <span data-ttu-id="b94fb-440">Se non è stato firmato dalla sessione desktop remoto di hello per la macchina virtuale hello, farlo ora.</span><span class="sxs-lookup"><span data-stu-id="b94fb-440">If you have not signed out of hello remote desktop session for hello virtual machine, do so now.</span></span>
2. <span data-ttu-id="b94fb-441">I file aperto hello RDP per **ContosoSQL1** e **ContosoSQL2**ed eseguire l'accesso come **BUILTIN\AzureAdmin**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-441">Open hello RDP files for **ContosoSQL1** and **ContosoSQL2**, and sign in as **BUILTIN\AzureAdmin**.</span></span>
3. <span data-ttu-id="b94fb-442">Aggiungere **NT AUTHORITY\System** toohello gli account di accesso SQL Server con le autorizzazioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="b94fb-442">Add **NT AUTHORITY\System** toohello SQL Server logins with necessary permissions.</span></span> <span data-ttu-id="b94fb-443">Aprire **SQL Server Management Studio**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-443">Open **SQL Server Management Studio**.</span></span>
4. <span data-ttu-id="b94fb-444">Fare clic su **Connetti** istanza di SQL Server tooconnect toohello predefinita.</span><span class="sxs-lookup"><span data-stu-id="b94fb-444">Click **Connect** tooconnect toohello default SQL Server instance.</span></span>
5. <span data-ttu-id="b94fb-445">In **Esplora oggetti**, espandere **Sicurezza**, quindi espandere **Account di accesso**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-445">In **Object Explorer**, expand **Security**, and then expand **Logins**.</span></span>
6. <span data-ttu-id="b94fb-446">Pulsante destro del mouse hello **NT AUTHORITY\System** account di accesso e quindi fare clic su **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-446">Right-click hello **NT AUTHORITY\System** login, and then click **Properties**.</span></span>
7. <span data-ttu-id="b94fb-447">In hello **entità a protezione diretta** pagina server locale hello, selezionare **Grant** per hello queste autorizzazioni e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-447">On hello **Securables** page, for hello local server, select **Grant** for hello following permissions, and then click **OK**.</span></span>
   
   * <span data-ttu-id="b94fb-448">Alterare eventuali gruppi di disponibilità</span><span class="sxs-lookup"><span data-stu-id="b94fb-448">Alter any availability group</span></span>
   * <span data-ttu-id="b94fb-449">Connettersi a SQL</span><span class="sxs-lookup"><span data-stu-id="b94fb-449">Connect SQL</span></span>
   * <span data-ttu-id="b94fb-450">Visualizzare lo stato del server</span><span class="sxs-lookup"><span data-stu-id="b94fb-450">View server state</span></span>
8. <span data-ttu-id="b94fb-451">Aggiungere **CORP\Install** come un **sysadmin** istanza di SQL Server predefinita toohello ruolo.</span><span class="sxs-lookup"><span data-stu-id="b94fb-451">Add **CORP\Install** as a **sysadmin** role toohello default SQL Server instance.</span></span> <span data-ttu-id="b94fb-452">In **Esplora oggetti** fare clic con il pulsante destro del mouse su **Account di accesso** e quindi scegliere **Nuovo account di accesso**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-452">In **Object Explorer**, right-click **Logins**, and then click **New Login**.</span></span>
9. <span data-ttu-id="b94fb-453">Digitare **CORP\Install** in **Nome account di accesso**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-453">Type **CORP\Install** in **Login name**.</span></span>
10. <span data-ttu-id="b94fb-454">In hello **i ruoli del Server** selezionare **sysadmin**, quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-454">On hello **Server Roles** page, select **sysadmin**, and then click **OK**.</span></span> <span data-ttu-id="b94fb-455">Dopo aver creato l'account di accesso hello, è possibile visualizzarlo espandendo **gli account di accesso** in **Esplora oggetti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-455">After you create hello login, you can see it by expanding **Logins** in **Object Explorer**.</span></span>
11. <span data-ttu-id="b94fb-456">una regola del firewall per SQL Server, su hello toocreate **avviare** schermata aprirlo **Windows Firewall con sicurezza avanzata**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-456">toocreate a firewall rule for SQL Server, on hello **Start** screen, open **Windows Firewall with Advanced Security**.</span></span>
12. <span data-ttu-id="b94fb-457">Nel riquadro sinistro hello selezionare **regole connessioni in entrata**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-457">In hello left pane, select **Inbound Rules**.</span></span> <span data-ttu-id="b94fb-458">Nel riquadro di destra hello, fare clic su **nuova regola**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-458">In hello right pane, click **New Rule**.</span></span>
13. <span data-ttu-id="b94fb-459">In hello **tipo di regola** pagina, fare clic su **programma** > **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-459">On hello **Rule Type** page, click **Program** > **Next**.</span></span>
14. <span data-ttu-id="b94fb-460">In hello **programma** selezionare **percorso programma**, tipo **%ProgramFiles%\Microsoft SQL Server\MSSQL12. MSSQLSERVER\MSSQL\Binn\sqlservr.exe** in hello casella di testo e quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-460">On hello **Program** page, select **This program path**, type **%ProgramFiles%\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Binn\sqlservr.exe** in hello text box, and then click **Next**.</span></span> <span data-ttu-id="b94fb-461">Se si stanno seguendo le istruzioni ma con SQL Server 2012, la directory di SQL Server hello è **MSSQL11. MSSQLSERVER**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-461">If you are following these directions but using SQL Server 2012, hello SQL Server directory is **MSSQL11.MSSQLSERVER**.</span></span>
15. <span data-ttu-id="b94fb-462">In hello **azione** pagina, mantenere **Consenti connessione hello** selezionata e quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-462">On hello **Action** page, keep **Allow hello connection** selected, and then click **Next**.</span></span>
16. <span data-ttu-id="b94fb-463">In hello **profilo** pagina, accettare le impostazioni predefinite di hello e quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-463">On hello **Profile** page, accept hello default settings, and then click **Next**.</span></span>
17. <span data-ttu-id="b94fb-464">In hello **nome** , specificare un nome di regola, ad esempio **SQL Server (regola di programma)**, in hello **nome** testo e quindi fare clic su **fine**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-464">On hello **Name** page, specify a rule name, such as **SQL Server (Program Rule)**, in hello **Name** text box, then click **Finish**.</span></span>
18. <span data-ttu-id="b94fb-465">hello tooenable **gruppi di disponibilità AlwaysOn** hello funzionalità **avviare** schermata aprirlo **Gestione configurazione SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-465">tooenable hello **Always On Availability Groups** feature, on hello **Start** screen, open **SQL Server Configuration Manager**.</span></span>
19. <span data-ttu-id="b94fb-466">Nella struttura di browser hello, fare clic su **servizi di SQL Server**, hello rapida **SQL Server (MSSQLSERVER)** del servizio e quindi fare clic su **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-466">In hello browser tree, click **SQL Server Services**, right-click hello **SQL Server (MSSQLSERVER)** service, and then click **Properties**.</span></span>
20. <span data-ttu-id="b94fb-467">Fare clic su hello **disponibilità elevata Always On** , selezionare **abilitare gruppi di disponibilità AlwaysOn**, come illustrato nell'hello seguenti schermata e quindi fare clic su **applica**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-467">Click hello **Always On High Availability** tab, select **Enable Always On Availability Groups**, as shown in hello following screenshot, and then click **Apply**.</span></span> <span data-ttu-id="b94fb-468">Fare clic su **OK** in hello la finestra di dialogo, quindi si chiude hello **proprietà** ancora la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="b94fb-468">Click **OK** in hello dialog box, and do not close hello **Properties** dialog box yet.</span></span> <span data-ttu-id="b94fb-469">Dopo aver modificato l'account del servizio hello verrà riavviato il servizio di SQL Server hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-469">You will restart hello SQL Server service after you change hello service account.</span></span>
    
     ![Abilita gruppi di disponibilità AlwaysOn](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665520.gif)
21. <span data-ttu-id="b94fb-471">hello toochange account del servizio SQL Server, fare clic su hello **accesso** digitare **CORP\SQLSvc1** (per **ContosoSQL1**) o **CORP\SQLSvc2** ( per **ContosoSQL2**) in **nome Account**, inserire e confermare la password hello e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-471">toochange hello SQL Server service account, click hello **Log On** tab, type **CORP\SQLSvc1** (for **ContosoSQL1**) or **CORP\SQLSvc2** (for **ContosoSQL2**) in **Account Name**, fill in and confirm hello password, and then click **OK**.</span></span>
22. <span data-ttu-id="b94fb-472">Nella finestra di dialogo di hello visualizzata, fare clic su **Sì** toorestart hello servizio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b94fb-472">In hello dialog box that opens, click **Yes** toorestart hello SQL Server service.</span></span> <span data-ttu-id="b94fb-473">Dopo il riavvio del servizio SQL Server hello, modifiche apportate in hello **proprietà** la finestra di dialogo vengono applicate.</span><span class="sxs-lookup"><span data-stu-id="b94fb-473">After hello SQL Server service restarts, changes that you made in hello **Properties** dialog box are effective.</span></span>
23. <span data-ttu-id="b94fb-474">Disconnettersi da macchine virtuali hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-474">Sign out of hello virtual machines.</span></span>

## <a name="create-hello-availability-group"></a><span data-ttu-id="b94fb-475">Creare il gruppo di disponibilità hello</span><span class="sxs-lookup"><span data-stu-id="b94fb-475">Create hello availability group</span></span>
<span data-ttu-id="b94fb-476">Si è ora pronto tooconfigure un gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="b94fb-476">You are now ready tooconfigure an availability group.</span></span> <span data-ttu-id="b94fb-477">Di seguito è riportata una descrizione delle azioni da eseguire:</span><span class="sxs-lookup"><span data-stu-id="b94fb-477">Below is an outline of what you will do:</span></span>

* <span data-ttu-id="b94fb-478">Creare un nuovo database (**MyDB1**) in **ContosoSQL1**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-478">Create a new database (**MyDB1**) on **ContosoSQL1**.</span></span>
* <span data-ttu-id="b94fb-479">Eseguire un backup completo e un backup del log delle transazioni del database hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-479">Take both a full backup and a transaction log backup of hello database.</span></span>
* <span data-ttu-id="b94fb-480">Ripristinare hello completo e backup del log troppo**ContosoSQL2** con hello **NORECOVERY** opzione.</span><span class="sxs-lookup"><span data-stu-id="b94fb-480">Restore hello full and log backups too**ContosoSQL2** with hello **NORECOVERY** option.</span></span>
* <span data-ttu-id="b94fb-481">Creare il gruppo di disponibilità hello (**AG1**) con commit sincrono, il failover automatico e repliche secondarie leggibili.</span><span class="sxs-lookup"><span data-stu-id="b94fb-481">Create hello availability group (**AG1**) with synchronous commit, automatic failover, and readable secondary replicas.</span></span>

### <a name="create-hello-mydb1-database-on-contososql1"></a><span data-ttu-id="b94fb-482">Creare database MyDB1 hello in ContosoSQL1</span><span class="sxs-lookup"><span data-stu-id="b94fb-482">Create hello MyDB1 database on ContosoSQL1</span></span>
1. <span data-ttu-id="b94fb-483">Se non già effettuata da sessioni di desktop remoto hello per **ContosoSQL1** e **ContosoSQL2**, procedere ora.</span><span class="sxs-lookup"><span data-stu-id="b94fb-483">If you have not already signed out of hello remote desktop sessions for **ContosoSQL1** and **ContosoSQL2**, do so now.</span></span>
2. <span data-ttu-id="b94fb-484">Il file RDP hello Open per **ContosoSQL1**ed eseguire l'accesso come **CORP\Install**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-484">Open hello RDP file for **ContosoSQL1**, and sign in as **CORP\Install**.</span></span>
3. <span data-ttu-id="b94fb-485">In **Esplora file** creare in **C:\\** una directory denominata **backup**</span><span class="sxs-lookup"><span data-stu-id="b94fb-485">In **File Explorer**, under **C:\\**, create a directory named **backup**.</span></span> <span data-ttu-id="b94fb-486">Si verrà utilizzata questa tooback directory e ripristinare il database.</span><span class="sxs-lookup"><span data-stu-id="b94fb-486">You will use this directory tooback up and restore your database.</span></span>
4. <span data-ttu-id="b94fb-487">Fare doppio clic su nuova directory hello, scegliere troppo**condividere con**, quindi fare clic su **utenti specifici**, come illustrato nella seguente schermata hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-487">Right-click hello new directory, point too**Share with**, and then click **Specific people**, as shown in hello following screenshot.</span></span>
   
    ![Creare una cartella di backup](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665521.gif)
5. <span data-ttu-id="b94fb-489">Aggiungere **CORP\SQLSvc1**e quindi assegnargli hello **lettura/scrittura** autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="b94fb-489">Add **CORP\SQLSvc1**, and then give it hello **Read/Write** permission.</span></span> <span data-ttu-id="b94fb-490">Aggiungere **CORP\SQLSvc2**e quindi assegnargli hello **lettura** autorizzazione, come illustrato nell'hello seguenti schermata e quindi fare clic su **condivisione**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-490">Add **CORP\SQLSvc2**, and then give it hello **Read** permission, as shown in hello following screenshot, and then click **Share**.</span></span> <span data-ttu-id="b94fb-491">Dopo aver completato il processo di condivisione file hello, fare clic su **eseguita**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-491">After hello file-sharing process is finished, click **Done**.</span></span>
   
    ![Concedere le autorizzazioni per la cartella di backup](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665522.gif)
6. <span data-ttu-id="b94fb-493">database hello toocreate, da hello **avviare** menu aprirlo **SQL Server Management Studio**e quindi fare clic su **Connetti** istanza di SQL Server tooconnect toohello predefinita.</span><span class="sxs-lookup"><span data-stu-id="b94fb-493">toocreate hello database, from hello **Start** menu, open **SQL Server Management Studio**, and then click **Connect** tooconnect toohello default SQL Server instance.</span></span>
7. <span data-ttu-id="b94fb-494">In **Esplora oggetti** fare clic con il pulsante destro del mouse su **Database** e quindi fare clic su **Nuovo database**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-494">In **Object Explorer**, right-click **Databases**, and then click **New Database**.</span></span>
8. <span data-ttu-id="b94fb-495">In **Nome database** digitare **MyDB1** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-495">In **Database name**, type **MyDB1**, and then click **OK**.</span></span>

### <a name="make-a-full-backup-of-mydb1-and-restore-it-on-contososql2"></a><span data-ttu-id="b94fb-496">Eseguire un backup completo di MyDB1 e ripristinarlo in ContosoSQL2</span><span class="sxs-lookup"><span data-stu-id="b94fb-496">Make a full backup of MyDB1 and restore it on ContosoSQL2</span></span>
1. <span data-ttu-id="b94fb-497">in un backup completo di hello database toomake **Esplora oggetti**, espandere **database**, fare doppio clic su **MyDB1**, punto troppo**attività**, e quindi fare clic su **backup**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-497">toomake a full backup of hello database, in **Object Explorer**, expand **Databases**, right-click **MyDB1**, point too**Tasks**, and then click **Back Up**.</span></span>
2. <span data-ttu-id="b94fb-498">In hello **origine** sezione, mantenere **tipo Backup** impostare troppo**completo**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-498">In hello **Source** section, keep **Backup type** set too**Full**.</span></span> <span data-ttu-id="b94fb-499">In hello **destinazione** fare clic su **rimuovere** tooremove hello percorso predefinito file di backup hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-499">In hello **Destination** section, click **Remove** tooremove hello default file path for hello backup file.</span></span>
3. <span data-ttu-id="b94fb-500">In hello **destinazione** fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-500">In hello **Destination** section, click **Add**.</span></span>
4. <span data-ttu-id="b94fb-501">In hello **nome File** nella casella di testo  **\\ContosoSQL1\backup\MyDB1.bak**, fare clic su **OK**, quindi fare clic su **OK** nuovamente tooback backup database hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-501">In hello **File name** text box, type **\\ContosoSQL1\backup\MyDB1.bak**, click **OK**, and then click **OK** again tooback up hello database.</span></span> <span data-ttu-id="b94fb-502">Al termine dell'operazione di backup hello, fare clic su **OK** nuovamente tooclose hello finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="b94fb-502">When hello backup operation finishes, click **OK** again tooclose hello dialog box.</span></span>
5. <span data-ttu-id="b94fb-503">backup del database di hello, del log toomake una transazione **Esplora oggetti**, espandere **database**, fare doppio clic su **MyDB1**, punto troppo**attività**, quindi fare clic su **backup**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-503">toomake a transaction log backup of hello database, in **Object Explorer**, expand **Databases**, right-click **MyDB1**, point too**Tasks**, and then click **Back Up**.</span></span>
6. <span data-ttu-id="b94fb-504">In **Tipo backup** selezionare **Log delle transazioni**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-504">In **Backup type**, select **Transaction Log**.</span></span> <span data-ttu-id="b94fb-505">Mantenere hello **destinazione** file percorso set toohello uno specificato in precedenza e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-505">Keep hello **Destination** file path set toohello one you specified earlier, and then click **OK**.</span></span> <span data-ttu-id="b94fb-506">Al termine dell'operazione di backup hello, fare clic su **OK** nuovamente.</span><span class="sxs-lookup"><span data-stu-id="b94fb-506">After hello backup operation finishes, click **OK** again.</span></span>
7. <span data-ttu-id="b94fb-507">hello toorestore completo e transazione i backup del log **ContosoSQL2**aprire file hello RDP per **ContosoSQL2**ed eseguire l'accesso come **CORP\Install**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-507">toorestore hello full and transaction log backups on **ContosoSQL2**, open hello RDP file for **ContosoSQL2**, and sign in as **CORP\Install**.</span></span> <span data-ttu-id="b94fb-508">Lasciare hello sessione desktop remoto per **ContosoSQL1** aprire.</span><span class="sxs-lookup"><span data-stu-id="b94fb-508">Leave hello remote desktop session for **ContosoSQL1** open.</span></span>
8. <span data-ttu-id="b94fb-509">Da hello **avviare** menu aprirlo **SQL Server Management Studio**, quindi fare clic su **Connetti** istanza di SQL Server predefinita toohello tooconnect.</span><span class="sxs-lookup"><span data-stu-id="b94fb-509">From hello **Start** menu, open **SQL Server Management Studio**, and then click **Connect** tooconnect toohello default SQL Server instance.</span></span>
9. <span data-ttu-id="b94fb-510">In **Esplora oggetti** fare clic con il pulsante destro del mouse su **Database** e quindi scegliere **Ripristina database**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-510">In **Object Explorer**, right-click **Databases**, and then click **Restore Database**.</span></span>
10. <span data-ttu-id="b94fb-511">In hello **origine** selezionare **dispositivo**e fare clic sui puntini di sospensione hello **...**</span><span class="sxs-lookup"><span data-stu-id="b94fb-511">In hello **Source** section, select **Device**, and click hello ellipsis **…**</span></span> <span data-ttu-id="b94fb-512">.</span><span class="sxs-lookup"><span data-stu-id="b94fb-512">button.</span></span>
11. <span data-ttu-id="b94fb-513">In **Seleziona dispositivi di backup**, fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-513">In **Select backup devices**, click **Add**.</span></span>
12. <span data-ttu-id="b94fb-514">In **Percorso file di backup** digitare **\\ContosoSQL1\backup**, fare clic su **Aggiorna**, selezionare **MyDB1.bak**, fare clic su **OK** e quindi fare clic di nuovo su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-514">In **Backup file location**, type **\\ContosoSQL1\backup**, click **Refresh**, select **MyDB1.bak**, click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="b94fb-515">Dovrebbe essere hello backup completi e backup del log hello hello **toorestore set di Backup** riquadro.</span><span class="sxs-lookup"><span data-stu-id="b94fb-515">You should now see hello full backup and hello log backup in hello **Backup sets toorestore** pane.</span></span>
13. <span data-ttu-id="b94fb-516">Passare toohello **opzioni** selezionare **RESTORE WITH NORECOVERY** in **Stato ripristino**e quindi fare clic su **OK** database hello toorestore.</span><span class="sxs-lookup"><span data-stu-id="b94fb-516">Go toohello **Options** page, select **RESTORE WITH NORECOVERY** in **Recovery state**, and then click **OK** toorestore hello database.</span></span> <span data-ttu-id="b94fb-517">Dopo aver hello al termine dell'operazione di ripristino, fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-517">After hello restore operation finishes, click **OK**.</span></span>

### <a name="create-hello-availability-group"></a><span data-ttu-id="b94fb-518">Creare il gruppo di disponibilità hello</span><span class="sxs-lookup"><span data-stu-id="b94fb-518">Create hello availability group</span></span>
1. <span data-ttu-id="b94fb-519">Passare nuovamente toohello sessione desktop remoto per **ContosoSQL1**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-519">Go back toohello remote desktop session for **ContosoSQL1**.</span></span> <span data-ttu-id="b94fb-520">In **Esplora oggetti** in SQL Server Management Studio, fare doppio clic su **disponibilità elevata Always On**, quindi fare clic su **Creazione guidata nuovo gruppo di disponibilità**, come illustrato nell'hello cattura di schermata seguente.</span><span class="sxs-lookup"><span data-stu-id="b94fb-520">In **Object Explorer** in SQL Server Management Studio, right-click **Always On High Availability**, and then click **New Availability Group Wizard**, as shown in hello following screenshot.</span></span>
   
    ![Avviare la Creazione guidata del nuovo gruppo di disponibilità](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665523.gif)
2. <span data-ttu-id="b94fb-522">In hello **Introduzione** pagina, fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-522">On hello **Introduction** page, click **Next**.</span></span> <span data-ttu-id="b94fb-523">In hello **Specifica nome del gruppo di disponibilità** , digitare **AG1** in **nome gruppo di disponibilità**, quindi fare clic su **Avanti** nuovamente.</span><span class="sxs-lookup"><span data-stu-id="b94fb-523">On hello **Specify Availability Group Name** page, type **AG1** in **Availability group name**, then click **Next** again.</span></span>
   
    ![Creazione guidata del nuovo gruppo di disponibilità: specifica del nome del gruppo di disponibilità](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665524.gif)
3. <span data-ttu-id="b94fb-525">In hello **Seleziona database** selezionare **MyDB1**, quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-525">On hello **Select Databases** page, select **MyDB1**, and then click **Next**.</span></span> <span data-ttu-id="b94fb-526">database Hello soddisfi i prerequisiti di hello per un gruppo di disponibilità perché non si è effettuato almeno un backup completo sulla replica primaria prevista hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-526">hello database meets hello prerequisites for an availability group because you have taken at least one full backup on hello intended primary replica.</span></span>
   
    ![Creazione guidata del nuovo gruppo di disponibilità: selezione dei database](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665525.gif)
4. <span data-ttu-id="b94fb-528">in hello **specifica repliche** pagina, fare clic su **Aggiungi Replica**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-528">on hello **Specify Replicas** page, click **Add Replica**.</span></span>
   
    ![Creazione guidata del nuovo gruppo di disponibilità: specifica delle repliche](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665526.gif)
5. <span data-ttu-id="b94fb-530">In hello **connettersi tooServer** della finestra di dialogo tipo **ContosoSQL2** in **nome del Server**, quindi fare clic su **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-530">In hello **Connect tooServer** dialog box, type **ContosoSQL2** in **Server name**, and then click **Connect**.</span></span>
   
    ![Creazione guidata nuovo gruppo di disponibilità, Connetti tooserver](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665527.gif)
6. <span data-ttu-id="b94fb-532">In hello **specifica repliche** pagina, dovrebbe essere **ContosoSQL2** elencati in **repliche disponibili**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-532">Back on hello **Specify Replicas** page, you should now see **ContosoSQL2** listed in **Available Replicas**.</span></span> <span data-ttu-id="b94fb-533">Configurare le repliche di hello, come illustrato nella seguente schermata hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-533">Configure hello replicas as shown in hello following screenshot.</span></span> <span data-ttu-id="b94fb-534">Al termine dell'operazione, scegliere **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-534">When you are finished, click **Next**.</span></span>
   
    ![Creazione guidata del nuovo gruppo di disponibilità: specifica delle repliche (completata)](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665528.gif)
7. <span data-ttu-id="b94fb-536">In hello **seleziona sincronizzazione dati iniziale** selezionare **solo Join**, quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-536">On hello **Select Initial Data Synchronization** page, select **Join only**, and then click **Next**.</span></span> <span data-ttu-id="b94fb-537">È già stata eseguita la sincronizzazione dei dati manualmente quando reso backup completo e delle transazioni di hello in **ContosoSQL1** e sono stati ripristinati in **ContosoSQL2**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-537">You already performed data synchronization manually when you made hello full and transaction backups on **ContosoSQL1** and restored them on **ContosoSQL2**.</span></span> <span data-ttu-id="b94fb-538">È possibile scegliere di non tooperform hello operazioni di backup e ripristino del database e selezionare invece **completo** toolet hello Creazione guidata nuovo gruppo di disponibilità di eseguire la sincronizzazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="b94fb-538">You can choose not tooperform hello backup and restore operations on your database and instead select **Full** toolet hello New Availability Group Wizard perform data synchronization for you.</span></span> <span data-ttu-id="b94fb-539">Questa opzione, tuttavia, non è consigliata per i database di dimensioni molto grandi presenti in alcune organizzazioni.</span><span class="sxs-lookup"><span data-stu-id="b94fb-539">However, we do not recommend this option for very large databases that are found in some enterprises.</span></span>
   
    ![Creazione guidata del nuovo gruppo di disponibilità: selezione della sincronizzazione dei dati iniziale](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665529.gif)
8. <span data-ttu-id="b94fb-541">In hello **convalida** pagina, fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-541">On hello **Validation** page, click **Next**.</span></span> <span data-ttu-id="b94fb-542">Questa pagina dovrebbe essere simile toohello seguente schermata.</span><span class="sxs-lookup"><span data-stu-id="b94fb-542">This page should look similar toohello following screenshot.</span></span> <span data-ttu-id="b94fb-543">Si verifica un avviso per la configurazione del listener hello poiché non è stato configurato un listener del gruppo di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="b94fb-543">There is a warning for hello listener configuration because you have not configured an availability group listener.</span></span> <span data-ttu-id="b94fb-544">È possibile ignorare questo avviso, poiché l'esercitazione non configura alcun listener.</span><span class="sxs-lookup"><span data-stu-id="b94fb-544">You can ignore this warning, because this tutorial does not configure a listener.</span></span> <span data-ttu-id="b94fb-545">listener di hello tooconfigure dopo aver completato questa esercitazione, vedere [configurare un listener di bilanciamento del carico interno per gruppi di disponibilità AlwaysOn in Azure](../classic/ps-sql-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="b94fb-545">tooconfigure hello listener after you complete this tutorial, see [Configure an ILB listener for Always On Availability Groups in Azure](../classic/ps-sql-int-listener.md).</span></span>
   
    ![Creazione guidata del nuovo gruppo di disponibilità: convalida](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665530.gif)
9. <span data-ttu-id="b94fb-547">In hello **riepilogo** pagina, fare clic su **fine**e quindi attendere hello guidata consente di configurare il nuovo gruppo di disponibilità hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-547">On hello **Summary** page, click **Finish**, and then wait while hello wizard configures hello new availability group.</span></span> <span data-ttu-id="b94fb-548">In hello **lo stato di avanzamento** pagina, è possibile fare clic su **ulteriori dettagli** tooview hello dettagliate lo stato di avanzamento.</span><span class="sxs-lookup"><span data-stu-id="b94fb-548">On hello **Progress** page, you can click **More details** tooview hello detailed progress.</span></span> <span data-ttu-id="b94fb-549">Al termine della procedura guidata hello, controllare hello **risultati** tooverify pagina tale gruppo di disponibilità hello viene creata correttamente, come illustrato nella seguente schermata hello e quindi fare clic su **Chiudi** tooexit hello procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="b94fb-549">After hello wizard finishes, inspect hello **Results** page tooverify that hello availability group is successfully created, as shown in hello following screenshot, and then click **Close** tooexit hello wizard.</span></span>
   
    ![Creazione guidata del nuovo gruppo di disponibilità: risultati](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665531.gif)
10. <span data-ttu-id="b94fb-551">In **Esplora oggetti** espandere **Disponibilità elevata AlwaysOn** e quindi espandere **Gruppi di disponibilità**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-551">In **Object Explorer**, expand **Always On High Availability**, and then expand **Availability Groups**.</span></span> <span data-ttu-id="b94fb-552">Dovrebbe essere hello nuovo gruppo di disponibilità in questo contenitore.</span><span class="sxs-lookup"><span data-stu-id="b94fb-552">You should now see hello new availability group in this container.</span></span> <span data-ttu-id="b94fb-553">Fare clic con il pulsante destro del mouse su **AG1 (Primary)** (AG1 (Primario)) e selezionare **Show Dashboard** (Mostra dashboard).</span><span class="sxs-lookup"><span data-stu-id="b94fb-553">Right-click **AG1 (Primary)**, and then click **Show Dashboard**.</span></span>
    
     ![Visualizzare il dashboard del gruppo di disponibilità](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665532.gif)
11. <span data-ttu-id="b94fb-555">Il **Dashboard Always On** deve esaminare simile toohello uno in hello seguente schermata.</span><span class="sxs-lookup"><span data-stu-id="b94fb-555">Your **Always On Dashboard** should look similar toohello one in hello following screenshot.</span></span> <span data-ttu-id="b94fb-556">È possibile visualizzare le repliche di hello, la modalità di failover di ogni replica e lo stato di sincronizzazione hello hello.</span><span class="sxs-lookup"><span data-stu-id="b94fb-556">You can see hello replicas, hello failover mode of each replica, and hello synchronization state.</span></span>
    
     ![Dashboard del gruppo di disponibilità](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665533.gif)
12. <span data-ttu-id="b94fb-558">Restituire troppo**Server Manager**, fare clic su **strumenti**e quindi aprire **gestione Cluster di Failover**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-558">Return too**Server Manager**, click **Tools**, and then open **Failover Cluster Manager**.</span></span>
13. <span data-ttu-id="b94fb-559">Espandere **Cluster1.corp.contoso.com**, quindi espandere **Servizi e applicazioni**.</span><span class="sxs-lookup"><span data-stu-id="b94fb-559">Expand **Cluster1.corp.contoso.com**, and then expand **Services and applications**.</span></span> <span data-ttu-id="b94fb-560">Selezionare **ruoli** e prendere nota di tale hello **AG1** ruolo del gruppo di disponibilità è stato creato.</span><span class="sxs-lookup"><span data-stu-id="b94fb-560">Select **Roles** and note that hello **AG1** availability group role has been created.</span></span> <span data-ttu-id="b94fb-561">Si noti che AG1 non dispone di un indirizzo IP per il database a cui i client possono connettersi toohello gruppo di disponibilità, perché non è stato configurato un listener.</span><span class="sxs-lookup"><span data-stu-id="b94fb-561">Note that AG1 does not have an IP address by which database clients can connect toohello availability group, because you did not configure a listener.</span></span> <span data-ttu-id="b94fb-562">È possibile connettersi direttamente toohello nodo primario per le operazioni di lettura / scrittura e il nodo secondario di hello per le query di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="b94fb-562">You can connect directly toohello primary node for read-write operations and hello secondary node for read-only queries.</span></span>
    
     ![Gruppo di disponibilità in Gestione cluster di failover](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665534.gif)

> [!WARNING]
> <span data-ttu-id="b94fb-564">Non tentare toofail sul gruppo di disponibilità hello da hello gestione Cluster di Failover.</span><span class="sxs-lookup"><span data-stu-id="b94fb-564">Do not try toofail over hello availability group from hello Failover Cluster Manager.</span></span> <span data-ttu-id="b94fb-565">Tutte le operazioni di failover devono essere eseguite in **Dashboard AlwaysOn** in SQL Server Management Studio.</span><span class="sxs-lookup"><span data-stu-id="b94fb-565">All failover operations should be performed from within **Always On Dashboard** in SQL Server Management Studio.</span></span> <span data-ttu-id="b94fb-566">Per ulteriori informazioni, vedere [le restrizioni sull'utilizzo hello gestione Cluster di Failover con gruppi di disponibilità](https://msdn.microsoft.com/library/ff929171.aspx).</span><span class="sxs-lookup"><span data-stu-id="b94fb-566">For more information, see [Restrictions on Using hello Failover Cluster Manager with Availability Groups](https://msdn.microsoft.com/library/ff929171.aspx).</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="b94fb-567">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="b94fb-567">Next steps</span></span>
<span data-ttu-id="b94fb-568">SQL Server AlwaysOn è stato correttamente implementato mediante la creazione di un gruppo di disponibilità in Azure.</span><span class="sxs-lookup"><span data-stu-id="b94fb-568">You have now successfully implemented SQL Server Always On by creating an availability group in Azure.</span></span> <span data-ttu-id="b94fb-569">tooconfigure un listener per questo gruppo di disponibilità, vedere [configurare un listener del bilanciamento del carico interno per gruppi di disponibilità AlwaysOn in Azure](../classic/ps-sql-int-listener.md).</span><span class="sxs-lookup"><span data-stu-id="b94fb-569">tooconfigure a listener for this availability group, see [Configure an ILB listener for Always On availability groups in Azure](../classic/ps-sql-int-listener.md).</span></span>

<span data-ttu-id="b94fb-570">Per altre informazioni sull'uso di SQL Server in Azure, vedere [SQL Server in Macchine virtuali di Azure](../sql/virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b94fb-570">For other information about using SQL Server in Azure, see [SQL Server on Azure Virtual Machines](../sql/virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

