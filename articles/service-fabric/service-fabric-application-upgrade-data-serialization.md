---
title: 'Aggiornamento di un''applicazione: serializzazione dei dati | Microsoft Docs'
description: "Procedure consigliate per la serializzazione dei dati e descrizione della sua influenza sugli aggiornamenti dell’applicazione in sequenza."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 1b65dfd3813423550631490640a81953864f58e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a><span data-ttu-id="17d41-103">Come la serializzazione dei dati influenzi l’aggiornamento di un’applicazione</span><span class="sxs-lookup"><span data-stu-id="17d41-103">How data serialization affects an application upgrade</span></span>
<span data-ttu-id="17d41-104">In un [aggiornamento in sequenza](service-fabric-application-upgrade.md), hello aggiornamento è stato applicato tooa sottoinsieme di nodi, un dominio di aggiornamento alla volta.</span><span class="sxs-lookup"><span data-stu-id="17d41-104">In a [rolling application upgrade](service-fabric-application-upgrade.md), hello upgrade is applied tooa subset of nodes, one upgrade domain at a time.</span></span> <span data-ttu-id="17d41-105">Durante questo processo, alcuni domini di aggiornamento sono nella versione più recente di hello dell'applicazione e alcuni domini di aggiornamento sono in una versione precedente dell'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="17d41-105">During this process, some upgrade domains are on hello newer version of your application, and some upgrade domains are on hello older version of your application.</span></span> <span data-ttu-id="17d41-106">Durante l'implementazione di hello, hello nuova versione dell'applicazione deve essere in grado di tooread hello precedente dei dati e hello precedente versione dell'applicazione deve essere in grado di tooread hello nuova dei dati.</span><span class="sxs-lookup"><span data-stu-id="17d41-106">During hello rollout, hello new version of your application must be able tooread hello old version of your data, and hello old version of your application must be able tooread hello new version of your data.</span></span> <span data-ttu-id="17d41-107">Se formato dati hello non avanti e indietro aggiornamento hello compatibile, potrebbero non viene eseguito o, ancora peggio, dati potrebbe essere perso o danneggiato.</span><span class="sxs-lookup"><span data-stu-id="17d41-107">If hello data format is not forward and backward compatible, hello upgrade may fail, or worse, data may be lost or corrupted.</span></span> <span data-ttu-id="17d41-108">Questo articolo illustra come è costituito il formato dei dati e riporta le procedure consigliate per garantire che i dati siano compatibili con le versioni successive e precedenti.</span><span class="sxs-lookup"><span data-stu-id="17d41-108">This article discusses what constitutes your data format and offers best practices for ensuring that your data is forward and backward compatible.</span></span>

## <a name="what-makes-up-your-data-format"></a><span data-ttu-id="17d41-109">Come è costituito il formato dei dati</span><span class="sxs-lookup"><span data-stu-id="17d41-109">What makes up your data format?</span></span>
<span data-ttu-id="17d41-110">In Azure Service Fabric, dati hello sono persistente e replicati provengono dalle classi c#.</span><span class="sxs-lookup"><span data-stu-id="17d41-110">In Azure Service Fabric, hello data that is persisted and replicated comes from your C# classes.</span></span> <span data-ttu-id="17d41-111">Per le applicazioni che utilizzano [raccolte affidabile](service-fabric-reliable-services-reliable-collections.md), che i dati sono oggetti hello in dizionari affidabile hello e code.</span><span class="sxs-lookup"><span data-stu-id="17d41-111">For applications that use [Reliable Collections](service-fabric-reliable-services-reliable-collections.md), that data is hello objects in hello reliable dictionaries and queues.</span></span> <span data-ttu-id="17d41-112">Per le applicazioni che utilizzano [Reliable Actors](service-fabric-reliable-actors-introduction.md), vale a dire hello il backup dello stato per attore hello.</span><span class="sxs-lookup"><span data-stu-id="17d41-112">For applications that use [Reliable Actors](service-fabric-reliable-actors-introduction.md), that is hello backing state for hello actor.</span></span> <span data-ttu-id="17d41-113">Queste classi c# devono essere serializzabili toobe persistente e replicato.</span><span class="sxs-lookup"><span data-stu-id="17d41-113">These C# classes must be serializable toobe persisted and replicated.</span></span> <span data-ttu-id="17d41-114">Pertanto, il formato di dati hello è definito da hello campi e proprietà che vengono serializzate, nonché come vengono serializzate.</span><span class="sxs-lookup"><span data-stu-id="17d41-114">Therefore, hello data format is defined by hello fields and properties that are serialized, as well as how they are serialized.</span></span> <span data-ttu-id="17d41-115">Ad esempio, in un `IReliableDictionary<int, MyClass>` dati hello viene serializzata `int` e serializzata `MyClass`.</span><span class="sxs-lookup"><span data-stu-id="17d41-115">For example, in an `IReliableDictionary<int, MyClass>` hello data is a serialized `int` and a serialized `MyClass`.</span></span>

### <a name="code-changes-that-result-in-a-data-format-change"></a><span data-ttu-id="17d41-116">Il codice modifica quel risultato trasformandolo in una modifica del formato dei dati</span><span class="sxs-lookup"><span data-stu-id="17d41-116">Code changes that result in a data format change</span></span>
<span data-ttu-id="17d41-117">Poiché il formato di dati hello è determinato dalle classi in c#, classi toohello modifiche possono provocare una modifica di formato di dati.</span><span class="sxs-lookup"><span data-stu-id="17d41-117">Since hello data format is determined by C# classes, changes toohello classes may cause a data format change.</span></span> <span data-ttu-id="17d41-118">Prestare attenzione tooensure in grado di gestire un aggiornamento in sequenza modifica il formato hello.</span><span class="sxs-lookup"><span data-stu-id="17d41-118">Care must be taken tooensure that a rolling upgrade can handle hello data format change.</span></span> <span data-ttu-id="17d41-119">Esempi di operazioni che possono comportare modifiche del formato dei dati:</span><span class="sxs-lookup"><span data-stu-id="17d41-119">Examples that may cause data format changes:</span></span>

* <span data-ttu-id="17d41-120">Aggiunta o rimozione di campi o proprietà</span><span class="sxs-lookup"><span data-stu-id="17d41-120">Adding or removing fields or properties</span></span>
* <span data-ttu-id="17d41-121">Ridenominazione di campi o proprietà</span><span class="sxs-lookup"><span data-stu-id="17d41-121">Renaming fields or properties</span></span>
* <span data-ttu-id="17d41-122">Modifica dei tipi di campi o proprietà hello</span><span class="sxs-lookup"><span data-stu-id="17d41-122">Changing hello types of fields or properties</span></span>
* <span data-ttu-id="17d41-123">Modifica il nome di classe hello o dello spazio dei nomi</span><span class="sxs-lookup"><span data-stu-id="17d41-123">Changing hello class name or namespace</span></span>

### <a name="data-contract-as-hello-default-serializer"></a><span data-ttu-id="17d41-124">Contratto dati come serializzatore predefinito hello</span><span class="sxs-lookup"><span data-stu-id="17d41-124">Data Contract as hello default serializer</span></span>
<span data-ttu-id="17d41-125">serializzatore Hello è in genere responsabile della lettura dei dati hello e la deserializzazione nella versione corrente di hello, anche se i dati di hello in una precedente o *più recente* versione.</span><span class="sxs-lookup"><span data-stu-id="17d41-125">hello serializer is generally responsible for reading hello data and deserializing it into hello current version, even if hello data is in an older or *newer* version.</span></span> <span data-ttu-id="17d41-126">serializzatore predefinito Hello è hello [serializzatore dei contratti dati](https://msdn.microsoft.com/library/ms733127.aspx), che dispone di regole di controllo delle versioni ben definito.</span><span class="sxs-lookup"><span data-stu-id="17d41-126">hello default serializer is hello [Data Contract serializer](https://msdn.microsoft.com/library/ms733127.aspx), which has well-defined versioning rules.</span></span> <span data-ttu-id="17d41-127">Le raccolte consentono hello serializzatore toobe sottoposto a override, ma Reliable Actors attualmente non è affidabile.</span><span class="sxs-lookup"><span data-stu-id="17d41-127">Reliable Collections allow hello serializer toobe overridden, but Reliable Actors currently do not.</span></span> <span data-ttu-id="17d41-128">serializzatore dei dati Hello svolge un ruolo importante per consentire gli aggiornamenti in sequenza.</span><span class="sxs-lookup"><span data-stu-id="17d41-128">hello data serializer plays an important role in enabling rolling upgrades.</span></span> <span data-ttu-id="17d41-129">serializzatore dei contratti dati Hello è il serializzatore hello che è consigliabile per le applicazioni di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="17d41-129">hello Data Contract serializer is hello serializer that we recommend for Service Fabric applications.</span></span>

## <a name="how-hello-data-format-affects-a-rolling-upgrade"></a><span data-ttu-id="17d41-130">Impatto di un aggiornamento in sequenza formato dati hello</span><span class="sxs-lookup"><span data-stu-id="17d41-130">How hello data format affects a rolling upgrade</span></span>
<span data-ttu-id="17d41-131">Durante un aggiornamento in sequenza, esistono due scenari principali in cui può verificarsi una serializzatore hello o *più recente* versione dei dati:</span><span class="sxs-lookup"><span data-stu-id="17d41-131">During a rolling upgrade, there are two main scenarios where hello serializer may encounter an older or *newer* version of your data:</span></span>

1. <span data-ttu-id="17d41-132">Dopo che un nodo è aggiornato e inizia a eseguire il backup, serializzatore nuovo hello caricherà i dati di hello che è stato persistente toodisk dalla versione precedente di hello.</span><span class="sxs-lookup"><span data-stu-id="17d41-132">After a node is upgraded and starts back up, hello new serializer will load hello data that was persisted toodisk by hello old version.</span></span>
2. <span data-ttu-id="17d41-133">Durante l'aggiornamento in sequenza di hello, cluster hello conterrà una combinazione di versioni nuove e precedenti di hello del codice.</span><span class="sxs-lookup"><span data-stu-id="17d41-133">During hello rolling upgrade, hello cluster will contain a mix of hello old and new versions of your code.</span></span> <span data-ttu-id="17d41-134">Poiché le repliche possono essere inserite in diversi domini di aggiornamento e le repliche inviano dati tooeach altri, hello nuovi e/o precedente versione dei dati può essere rilevati dalla versione nuovi e/o precedente di hello del serializzatore.</span><span class="sxs-lookup"><span data-stu-id="17d41-134">Since replicas may be placed in different upgrade domains, and replicas send data tooeach other, hello new and/or old version of your data may be encountered by hello new and/or old version of your serializer.</span></span>

> [!NOTE]
> <span data-ttu-id="17d41-135">Hello "nuova versione" e "precedente" riferimento qui toohello versione del codice che è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="17d41-135">hello "new version" and "old version" here refer toohello version of your code that is running.</span></span> <span data-ttu-id="17d41-136">Hello "nuovo serializzatore" fa riferimento codice serializzatore toohello è in esecuzione nella nuova versione di hello dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="17d41-136">hello "new serializer" refers toohello serializer code that is executing in hello new version of your application.</span></span> <span data-ttu-id="17d41-137">Hello "nuovi dati" si riferisce classe c# toohello serializzato dalla nuova versione di hello dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="17d41-137">hello "new data" refers toohello serialized C# class from hello new version of your application.</span></span>
> 
> 

<span data-ttu-id="17d41-138">Hello due versioni del codice e il formato di dati deve essere avanti e indietro compatibile.</span><span class="sxs-lookup"><span data-stu-id="17d41-138">hello two versions of code and data format must be both forward and backward compatible.</span></span> <span data-ttu-id="17d41-139">Se non sono compatibili, hello aggiornamento in sequenza potrebbe non riuscire o dati potrebbero andare persi.</span><span class="sxs-lookup"><span data-stu-id="17d41-139">If they are not compatible, hello rolling upgrade may fail or data may be lost.</span></span> <span data-ttu-id="17d41-140">Hello aggiornamento in sequenza potrebbe non riuscire perché codice hello o serializzatore può generare eccezioni o un errore quando rileva hello altra versione.</span><span class="sxs-lookup"><span data-stu-id="17d41-140">hello rolling upgrade may fail because hello code or serializer may throw exceptions or a fault when it encounters hello other version.</span></span> <span data-ttu-id="17d41-141">Dati potrebbero essere persi se, ad esempio, è stata aggiunta una nuova proprietà ma serializzatore precedente hello vengono eliminati durante la deserializzazione.</span><span class="sxs-lookup"><span data-stu-id="17d41-141">Data may be lost if, for example, a new property was added but hello old serializer discards it during deserialization.</span></span>

<span data-ttu-id="17d41-142">Contratto dati è hello consigliata le soluzioni per assicurare che i dati siano compatibili.</span><span class="sxs-lookup"><span data-stu-id="17d41-142">Data Contract is hello recommended solution for ensuring that your data is compatible.</span></span> <span data-ttu-id="17d41-143">Include regole ben definite di controllo delle versioni per l'aggiunta, la rimozione e la modifica di campi.</span><span class="sxs-lookup"><span data-stu-id="17d41-143">It has well-defined versioning rules for adding, removing, and changing fields.</span></span> <span data-ttu-id="17d41-144">Include inoltre il supporto per occupa campi sconosciuti, associazione nel processo di serializzazione e deserializzazione hello e gestiscono l'ereditarietà della classe.</span><span class="sxs-lookup"><span data-stu-id="17d41-144">It also has support for dealing with unknown fields, hooking into hello serialization and deserialization process, and dealing with class inheritance.</span></span> <span data-ttu-id="17d41-145">Per altre informazioni, vedere [Utilizzo di contratti dati](https://msdn.microsoft.com/library/ms733127.aspx).</span><span class="sxs-lookup"><span data-stu-id="17d41-145">For more information, see [Using Data Contract](https://msdn.microsoft.com/library/ms733127.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="17d41-146">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="17d41-146">Next steps</span></span>
<span data-ttu-id="17d41-147">[Esercitazione sull'aggiornamento di un'applicazione di Service Fabric tramite Visual Studio](service-fabric-application-upgrade-tutorial.md) descrive la procedura di aggiornamento di un'applicazione con Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="17d41-147">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="17d41-148">[Aggiornamento di un'applicazione di Service Fabric mediante PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) descrive la procedura di aggiornamento di un'applicazione tramite PowerShell.</span><span class="sxs-lookup"><span data-stu-id="17d41-148">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="17d41-149">Controllare l’aggiornamento dell'applicazione tramite [Parametri di aggiornamento](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="17d41-149">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="17d41-150">Informazioni su come toouse funzionalità avanzate durante l'aggiornamento dell'applicazione riferendosi troppo[argomenti avanzati](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="17d41-150">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="17d41-151">Risolvere i problemi comuni negli aggiornamenti dell'applicazione riferendosi passaggi toohello [risoluzione dei problemi gli aggiornamenti dell'applicazione ](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="17d41-151">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades ](service-fabric-application-upgrade-troubleshooting.md).</span></span>

