---
title: 'i metodi di routing del traffico aaaAzure Traffic Manager: | Documenti Microsoft'
description: In questo articolo consente di capire i metodi di routing del traffico diversi hello usati da Gestione traffico
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: b3eeca63ab5f2b9cd4a3a6b6a8fd3e40059e32b5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="c623a-103">Metodi di routing di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="c623a-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="c623a-104">Azure Traffic Manager toodetermine metodi di routing del traffico supporta quattro modalità tooroute rete toohello di traffico diversi endpoint del servizio.</span><span class="sxs-lookup"><span data-stu-id="c623a-104">Azure Traffic Manager supports four traffic-routing methods toodetermine how tooroute network traffic toohello various service endpoints.</span></span> <span data-ttu-id="c623a-105">Gestione traffico applica hello routing del traffico metodo tooeach query DNS che riceve.</span><span class="sxs-lookup"><span data-stu-id="c623a-105">Traffic Manager applies hello traffic-routing method tooeach DNS query it receives.</span></span> <span data-ttu-id="c623a-106">il metodo di routing del traffico Hello determina quale endpoint restituite nella risposta DNS hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-106">hello traffic-routing method determines which endpoint returned in hello DNS response.</span></span>

<span data-ttu-id="c623a-107">In Gestione traffico sono disponibili quattro metodi di routing del traffico:</span><span class="sxs-lookup"><span data-stu-id="c623a-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="c623a-108">**[Priorità](#priority):** selezionare **priorità** quando si desidera toouse un endpoint del servizio principale per tutto il traffico e fornire backup nel caso in cui hello primario o gli endpoint di backup hello non sono disponibili.</span><span class="sxs-lookup"><span data-stu-id="c623a-108">**[Priority](#priority):** Select **Priority** when you want toouse a primary service endpoint for all traffic, and provide backups in case hello primary or hello backup endpoints are unavailable.</span></span>
* <span data-ttu-id="c623a-109">**[Weighted](#weighted):** selezionare **Weighted** quando si desidera toodistribute traffico in un set di endpoint, ovvero in modo uniforme o tooweights secondo, che può essere definito.</span><span class="sxs-lookup"><span data-stu-id="c623a-109">**[Weighted](#weighted):** Select **Weighted** when you want toodistribute traffic across a set of endpoints, either evenly or according tooweights, which you define.</span></span>
* <span data-ttu-id="c623a-110">**[Prestazioni](#performance):** selezionare **prestazioni** quando sono disponibili endpoint in aree geografiche diverse e si desideri che gli utenti finali toouse hello endpoint "più vicino" in termini di latenza di rete più bassa hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users toouse hello "closest" endpoint in terms of hello lowest network latency.</span></span>
* <span data-ttu-id="c623a-111">**[Geografico](#geographic):** selezionare **geografica** in modo che gli utenti sono endpoint toospecific diretto (Azure, esterna o Nested) in base alla quale posizione geografica le query DNS deriva da.</span><span class="sxs-lookup"><span data-stu-id="c623a-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed toospecific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="c623a-112">Questo consente scenari di tooenable clienti Traffic Manager in cui è importante conoscere l'area geografica dell'utente e il routing in base che.</span><span class="sxs-lookup"><span data-stu-id="c623a-112">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="c623a-113">Ne sono esempi la presenza di determinati requisiti sui dati, la localizzazione del contenuto e dell'esperienza dell'utente e la misurazione del traffico da aree diverse.</span><span class="sxs-lookup"><span data-stu-id="c623a-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="c623a-114">Tutti i profili di Gestione traffico includono il monitoraggio continuo dell'integrità degli endpoint e il failover automatico degli endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="c623a-115">Per altre informazioni, vedere [Informazioni sul monitoraggio di Gestione traffico](traffic-manager-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="c623a-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="c623a-116">Un singolo profilo di Gestione traffico può usare un solo metodo di routing del traffico.</span><span class="sxs-lookup"><span data-stu-id="c623a-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="c623a-117">È possibile selezionare in qualsiasi momento un metodo di routing del traffico diverso per il profilo.</span><span class="sxs-lookup"><span data-stu-id="c623a-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="c623a-118">Le modifiche vengono applicate entro un minuto e non si verificano periodi di inattività.</span><span class="sxs-lookup"><span data-stu-id="c623a-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="c623a-119">I metodi di routing del traffico possono essere combinati usando profili nidificati di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="c623a-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="c623a-120">La nidificazione consente più sofisticate e flessibile configurazioni di routing del traffico che soddisfano le esigenze di hello delle applicazioni più grandi e complesse.</span><span class="sxs-lookup"><span data-stu-id="c623a-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet hello needs of larger, complex applications.</span></span> <span data-ttu-id="c623a-121">Per altre informazioni, vedere [nested Traffic Manager profiles](traffic-manager-nested-profiles.md)(Profili nidificati di Gestione traffico).</span><span class="sxs-lookup"><span data-stu-id="c623a-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="c623a-122"><a name = "priority"></a>Metodo di routing del traffico Priorità</span><span class="sxs-lookup"><span data-stu-id="c623a-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="c623a-123">Un'organizzazione desidera spesso tooprovide affidabilità dei servizi di distribuendo uno o più servizi di backup nel caso in cui il servizio primario diventa inattivo.</span><span class="sxs-lookup"><span data-stu-id="c623a-123">Often an organization wants tooprovide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="c623a-124">metodo di routing del traffico "Priority" Hello consente Azure i clienti tooeasily implementare questo pattern di failover.</span><span class="sxs-lookup"><span data-stu-id="c623a-124">hello 'Priority' traffic-routing method allows Azure customers tooeasily implement this failover pattern.</span></span>

![Metodo di routing del traffico "Priorità" di Gestione traffico di Azure][1]

<span data-ttu-id="c623a-126">profilo di gestione traffico Hello contiene un elenco con priorità degli endpoint del servizio.</span><span class="sxs-lookup"><span data-stu-id="c623a-126">hello Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="c623a-127">Per impostazione predefinita, verrà inviata endpoint (più alta priorità) di tutto il traffico toohello primario.</span><span class="sxs-lookup"><span data-stu-id="c623a-127">By default, Traffic Manager sends all traffic toohello primary (highest-priority) endpoint.</span></span> <span data-ttu-id="c623a-128">Se l'endpoint primario hello non è disponibile, le route di Traffic Manager hello endpoint secondo toohello di traffico.</span><span class="sxs-lookup"><span data-stu-id="c623a-128">If hello primary endpoint is not available, Traffic Manager routes hello traffic toohello second endpoint.</span></span> <span data-ttu-id="c623a-129">Se entrambi gli endpoint primario e secondario hello non sono disponibili, hello del traffico toohello terzo, e così via.</span><span class="sxs-lookup"><span data-stu-id="c623a-129">If both hello primary and secondary endpoints are not available, hello traffic goes toohello third, and so on.</span></span> <span data-ttu-id="c623a-130">Disponibilità di endpoint hello è in base allo stato di hello configurato (abilitato o disabilitato) e hello monitoraggio degli endpoint in corso.</span><span class="sxs-lookup"><span data-stu-id="c623a-130">Availability of hello endpoint is based on hello configured status (enabled or disabled) and hello ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="c623a-131">Configurazione degli endpoint</span><span class="sxs-lookup"><span data-stu-id="c623a-131">Configuring endpoints</span></span>

<span data-ttu-id="c623a-132">Con Gestione risorse di Azure, configurare priorità di endpoint hello in modo esplicito utilizzando la proprietà 'priority' hello per ogni endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-132">With Azure Resource Manager, you configure hello endpoint priority explicitly using hello 'priority' property for each endpoint.</span></span> <span data-ttu-id="c623a-133">Questa proprietà accetta un valore compreso tra 1 e 1000,</span><span class="sxs-lookup"><span data-stu-id="c623a-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="c623a-134">dove i valori più bassi rappresentano una priorità più elevata.</span><span class="sxs-lookup"><span data-stu-id="c623a-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="c623a-135">Gli endpoint non possono avere lo stesso valore di priorità.</span><span class="sxs-lookup"><span data-stu-id="c623a-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="c623a-136">L'impostazione di proprietà hello è facoltativa.</span><span class="sxs-lookup"><span data-stu-id="c623a-136">Setting hello property is optional.</span></span> <span data-ttu-id="c623a-137">Se omessa, viene utilizzata una priorità predefinita in base a ordine degli endpoint hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-137">When omitted, a default priority based on hello endpoint order is used.</span></span>

##<span data-ttu-id="c623a-138"><a name = "weighted"></a>Metodo di routing del traffico Ponderato</span><span class="sxs-lookup"><span data-stu-id="c623a-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="c623a-139">metodo di routing del traffico 'Weighted' Hello consente il traffico toodistribute in modo uniforme o toouse un peso predefinito.</span><span class="sxs-lookup"><span data-stu-id="c623a-139">hello 'Weighted' traffic-routing method allows you toodistribute traffic evenly or toouse a pre-defined weighting.</span></span>

![Metodo di routing del traffico "Ponderato" di Gestione traffico di Azure][2]

<span data-ttu-id="c623a-141">Nell'hello ponderata routing del traffico (metodo), assegnare a un endpoint tooeach peso nella configurazione del profilo di Traffic Manager hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-141">In hello Weighted traffic-routing method, you assign a weight tooeach endpoint in hello Traffic Manager profile configuration.</span></span> <span data-ttu-id="c623a-142">peso Hello è un numero intero compreso tra 1 too1000.</span><span class="sxs-lookup"><span data-stu-id="c623a-142">hello weight is an integer from 1 too1000.</span></span> <span data-ttu-id="c623a-143">Questo parametro è facoltativo e,</span><span class="sxs-lookup"><span data-stu-id="c623a-143">This parameter is optional.</span></span> <span data-ttu-id="c623a-144">se omesso, viene usato il valore di peso predefinito "1".</span><span class="sxs-lookup"><span data-stu-id="c623a-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="c623a-145">Per ogni query DNS ricevuta, viene scelto un endpoint disponibile in modo casuale,</span><span class="sxs-lookup"><span data-stu-id="c623a-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="c623a-146">probabilità di Hello della scelta di un endpoint si basa su un peso hello endpoint disponibili tooall.</span><span class="sxs-lookup"><span data-stu-id="c623a-146">hello probability of choosing an endpoint is based on hello weights assigned tooall available endpoints.</span></span> <span data-ttu-id="c623a-147">Utilizzando hello stesso peso tra tutti i risultati in una distribuzione del traffico anche gli endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-147">Using hello same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="c623a-148">L'utilizzo di pesi superiori o inferiori in endpoint specifici provoca toobe tali endpoint ha restituito più o meno frequente nelle risposte DNS hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-148">Using higher or lower weights on specific endpoints causes those endpoints toobe returned more or less frequently in hello DNS responses.</span></span>

<span data-ttu-id="c623a-149">metodo Hello ponderato consente alcuni scenari utili:</span><span class="sxs-lookup"><span data-stu-id="c623a-149">hello weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="c623a-150">Aggiornamento graduale dell'applicazione: allocare una percentuale di nuovi endpoint di traffico tooroute tooa e aumentare gradualmente il traffico hello più tempo too100%.</span><span class="sxs-lookup"><span data-stu-id="c623a-150">Gradual application upgrade: Allocate a percentage of traffic tooroute tooa new endpoint, and gradually increase hello traffic over time too100%.</span></span>
* <span data-ttu-id="c623a-151">Applicazione migrazione tooAzure: creare un profilo con endpoint di Azure ed esterni.</span><span class="sxs-lookup"><span data-stu-id="c623a-151">Application migration tooAzure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="c623a-152">Modificare il peso di hello hello endpoint tooprefer hello nuovi endpoint di.</span><span class="sxs-lookup"><span data-stu-id="c623a-152">Adjust hello weight of hello endpoints tooprefer hello new endpoints.</span></span>
* <span data-ttu-id="c623a-153">Espansione del cloud per capacità aggiuntiva: espandere rapidamente una distribuzione locale nel cloud hello posizionandola dietro a un profilo di Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="c623a-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into hello cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="c623a-154">Quando è necessaria capacità aggiuntiva nel cloud hello, è possibile aggiungere o abilitare più endpoint e specificare la quantità di traffico passa tooeach endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-154">When you need extra capacity in hello cloud, you can add or enable more endpoints and specify what portion of traffic goes tooeach endpoint.</span></span>

<span data-ttu-id="c623a-155">Hello portale di gestione risorse di Azure supporta la configurazione di hello del routing del traffico ponderato.</span><span class="sxs-lookup"><span data-stu-id="c623a-155">hello Resource Manager Azure portal supports hello configuration of weighted traffic routing.</span></span>  <span data-ttu-id="c623a-156">È possibile configurare i pesi hello versioni di gestione risorse di Azure PowerShell e CLI hello API REST.</span><span class="sxs-lookup"><span data-stu-id="c623a-156">You can configure weights using hello Resource Manager versions of Azure PowerShell, CLI, and hello REST APIs.</span></span>

<span data-ttu-id="c623a-157">È importante toounderstand che le risposte DNS vengono memorizzate nella cache dai client e per i server DNS ricorsivo di hello che hello client utilizzano nomi DNS tooresolve.</span><span class="sxs-lookup"><span data-stu-id="c623a-157">It is important toounderstand that DNS responses are cached by clients and by hello recursive DNS servers that hello clients use tooresolve DNS names.</span></span> <span data-ttu-id="c623a-158">Questa memorizzazione ha un impatto sulle distribuzioni del traffico ponderate.</span><span class="sxs-lookup"><span data-stu-id="c623a-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="c623a-159">Quando il numero di hello del client e server DNS ricorsivo è elevato, la distribuzione del traffico funziona come previsto.</span><span class="sxs-lookup"><span data-stu-id="c623a-159">When hello number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="c623a-160">Tuttavia, se il numero di hello del client o server DNS ricorsivo è ridotto, la memorizzazione nella cache può distorcere significativamente la distribuzione del traffico hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-160">However, when hello number of clients or recursive DNS servers is small, caching can significantly skew hello traffic distribution.</span></span>

<span data-ttu-id="c623a-161">I casi d'uso comuni in cui può verificarsi questa situazione includono:</span><span class="sxs-lookup"><span data-stu-id="c623a-161">Common use cases include:</span></span>

* <span data-ttu-id="c623a-162">Ambienti di sviluppo e test</span><span class="sxs-lookup"><span data-stu-id="c623a-162">Development and testing environments</span></span>
* <span data-ttu-id="c623a-163">Comunicazioni tra applicazioni</span><span class="sxs-lookup"><span data-stu-id="c623a-163">Application-to-application communications</span></span>
* <span data-ttu-id="c623a-164">Applicazioni destinate a una base utenti ristretta che condivide un'infrastruttura DNS ricorsiva comune, ad esempio i dipendenti di un'organizzazione che si connettono tramite proxy.</span><span class="sxs-lookup"><span data-stu-id="c623a-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="c623a-165">Questi effetti di memorizzazione nella cache DNS sono comuni tooall il traffico basato su DNS routing sistemi, non solo Traffic Manager di Azure.</span><span class="sxs-lookup"><span data-stu-id="c623a-165">These DNS caching effects are common tooall DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="c623a-166">In alcuni casi, in modo esplicito la cancellazione della cache DNS hello possono fornire una soluzione alternativa.</span><span class="sxs-lookup"><span data-stu-id="c623a-166">In some cases, explicitly clearing hello DNS cache may provide a workaround.</span></span> <span data-ttu-id="c623a-167">In altri casi, può essere più appropriato un metodo di routing del traffico alternativo.</span><span class="sxs-lookup"><span data-stu-id="c623a-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="c623a-168"><a name = "performance"></a>Metodo di routing del traffico Prestazioni</span><span class="sxs-lookup"><span data-stu-id="c623a-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="c623a-169">Distribuzione di endpoint in due o più percorsi tra globo hello può migliorare la velocità di risposta hello di molte applicazioni dal routing del traffico toohello percorso tooyou "più vicino".</span><span class="sxs-lookup"><span data-stu-id="c623a-169">Deploying endpoints in two or more locations across hello globe can improve hello responsiveness of many applications by routing traffic toohello location that is 'closest' tooyou.</span></span> <span data-ttu-id="c623a-170">il metodo di routing del traffico "Prestazioni" Hello fornisce questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="c623a-170">hello 'Performance' traffic-routing method provides this capability.</span></span>

![Metodo di routing del traffico "Prestazioni" di Gestione traffico di Azure][3]

<span data-ttu-id="c623a-172">endpoint di Hello 'vicino' non è necessariamente più vicino in termini di distanza geografica.</span><span class="sxs-lookup"><span data-stu-id="c623a-172">hello 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="c623a-173">Al contrario, il metodo di routing del traffico "Prestazioni" hello determina endpoint più vicino hello misurazione della latenza di rete.</span><span class="sxs-lookup"><span data-stu-id="c623a-173">Instead, hello 'Performance' traffic-routing method determines hello closest endpoint by measuring network latency.</span></span> <span data-ttu-id="c623a-174">Gestione traffico mantiene un tabella di latenza Internet tootrack hello tempo di round trip tra intervalli di indirizzi IP e ogni Data Center di Azure.</span><span class="sxs-lookup"><span data-stu-id="c623a-174">Traffic Manager maintains an Internet Latency Table tootrack hello round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="c623a-175">Traffic Manager cerca dall'indirizzo IP della richiesta DNS in ingresso hello nella tabella di latenza Internet hello hello origine.</span><span class="sxs-lookup"><span data-stu-id="c623a-175">Traffic Manager looks up hello source IP address of hello incoming DNS request in hello Internet Latency Table.</span></span> <span data-ttu-id="c623a-176">Gestione traffico sceglie un endpoint disponibile nel Data Center di Azure che presenta una latenza più bassa di hello per tale intervallo di indirizzi IP, quindi restituisce tale endpoint nella risposta DNS hello hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-176">Traffic Manager chooses an available endpoint in hello Azure datacenter that has hello lowest latency for that IP address range, then returns that endpoint in hello DNS response.</span></span>

<span data-ttu-id="c623a-177">Come spiegato in [Modalità di funzionamento di Gestione traffico](traffic-manager-overview.md#how-traffic-manager-works), le query DNS non vengono ricevute direttamente dai client,</span><span class="sxs-lookup"><span data-stu-id="c623a-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="c623a-178">Invece, le query DNS provengono da che hello client non siano toouse configurato il servizio DNS ricorsivo hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-178">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="c623a-179">Pertanto, hello IP indirizzo utilizzato toodetermine hello 'vicino' endpoint non è l'indirizzo IP del client hello, ma è hello di indirizzo IP del servizio DNS di hello ricorsiva.</span><span class="sxs-lookup"><span data-stu-id="c623a-179">Therefore, hello IP address used toodetermine hello 'closest' endpoint is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="c623a-180">In pratica, questo indirizzo IP è un proxy valido per il client di hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-180">In practice, this IP address is a good proxy for hello client.</span></span>


<span data-ttu-id="c623a-181">Gestione traffico regolarmente gli aggiornamenti hello tooaccount Internet tabella della latenza delle modifiche in hello Internet globali e nuove aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="c623a-181">Traffic Manager regularly updates hello Internet Latency Table tooaccount for changes in hello global Internet and new Azure regions.</span></span> <span data-ttu-id="c623a-182">Tuttavia, le prestazioni dell'applicazione variano in base alle variazioni in tempo reale del carico tra hello Internet.</span><span class="sxs-lookup"><span data-stu-id="c623a-182">However, application performance varies based on real-time variations in load across hello Internet.</span></span> <span data-ttu-id="c623a-183">Il routing del traffico "Prestazioni" non prende in considerazione il monitoraggio del carico su un determinato endpoint di servizio.</span><span class="sxs-lookup"><span data-stu-id="c623a-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="c623a-184">Se un endpoint non è più disponibile, non viene incluso nelle risposte alle query DNS.</span><span class="sxs-lookup"><span data-stu-id="c623a-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="c623a-185">Toonote punti:</span><span class="sxs-lookup"><span data-stu-id="c623a-185">Points toonote:</span></span>

* <span data-ttu-id="c623a-186">Se il profilo contiene più endpoint in hello stessa regione di Azure, quindi Traffic Manager distribuisce il traffico in modo uniforme tra gli endpoint disponibili hello in tale area.</span><span class="sxs-lookup"><span data-stu-id="c623a-186">If your profile contains multiple endpoints in hello same Azure region, then Traffic Manager distributes traffic evenly across hello available endpoints in that region.</span></span> <span data-ttu-id="c623a-187">Se si preferisce una distribuzione del traffico diversa all'interno di un'area, usare i [profili annidati di Gestione traffico](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="c623a-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="c623a-188">Se tutte abilitate endpoint più vicino hello regione di Azure sono ridotte, gestione traffico consente di spostare gli endpoint toohello traffico nell'area di Azure più vicino successivo hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-188">If all enabled endpoints in hello closest Azure region are degraded, Traffic Manager moves traffic toohello endpoints in hello next closest Azure region.</span></span> <span data-ttu-id="c623a-189">Se si desidera toodefine una sequenza di failover preferito, utilizzare [profili di gestione traffico nidificati](traffic-manager-nested-profiles.md).</span><span class="sxs-lookup"><span data-stu-id="c623a-189">If you want toodefine a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="c623a-190">Quando si utilizza il metodo di routing del traffico delle prestazioni di hello con endpoint esterni o endpoint nidificato, è necessario posizione hello toospecify di tali endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-190">When using hello Performance traffic routing method with external endpoints or nested endpoints, you need toospecify hello location of those endpoints.</span></span> <span data-ttu-id="c623a-191">Scegliere la distribuzione tooyour di hello regione di Azure più vicina.</span><span class="sxs-lookup"><span data-stu-id="c623a-191">Choose hello Azure region closest tooyour deployment.</span></span> <span data-ttu-id="c623a-192">I percorsi sono valori hello è supportati dalla tabella di latenza Internet hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-192">Those locations are hello values supported by hello Internet Latency Table.</span></span>
* <span data-ttu-id="c623a-193">l'algoritmo Hello che sceglie endpoint hello è deterministica.</span><span class="sxs-lookup"><span data-stu-id="c623a-193">hello algorithm that chooses hello endpoint is deterministic.</span></span> <span data-ttu-id="c623a-194">Ripetere le query DNS da hello stesso client vengono indirizzate toohello stesso endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-194">Repeated DNS queries from hello same client are directed toohello same endpoint.</span></span> <span data-ttu-id="c623a-195">Quando viaggiano, i client solitamente usano server DNS ricorsivi diversi,</span><span class="sxs-lookup"><span data-stu-id="c623a-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="c623a-196">client di Hello può essere indirizzato tooa diversi endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-196">hello client may be routed tooa different endpoint.</span></span> <span data-ttu-id="c623a-197">Routing può essere influenzato anche dal aggiornamenti toohello tabella di latenza Internet.</span><span class="sxs-lookup"><span data-stu-id="c623a-197">Routing can also be affected by updates toohello Internet Latency Table.</span></span> <span data-ttu-id="c623a-198">Pertanto, hello prestazioni metodo di routing del traffico non garantisce che un client è sempre indirizzate toohello stesso endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-198">Therefore, hello Performance traffic-routing method does not guarantee that a client is always routed toohello same endpoint.</span></span>
* <span data-ttu-id="c623a-199">Quando viene modificato hello tabella di latenza Internet, è possibile notare che alcuni client diretto tooa diversi endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-199">When hello Internet Latency Table changes, you may notice that some clients are directed tooa different endpoint.</span></span> <span data-ttu-id="c623a-200">Ciò riflette un routing più accurato in base ai dati di latenza correnti.</span><span class="sxs-lookup"><span data-stu-id="c623a-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="c623a-201">Questi aggiornamenti sono l'accuratezza di hello toomaintain essenziale delle prestazioni-routing del traffico come hello che Internet in continua evoluzione.</span><span class="sxs-lookup"><span data-stu-id="c623a-201">These updates are essential toomaintain hello accuracy of Performance traffic-routing as hello Internet continually evolves.</span></span>

## <span data-ttu-id="c623a-202"><a name = "geographic"></a>Metodo di routing del traffico Geografico</span><span class="sxs-lookup"><span data-stu-id="c623a-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="c623a-203">Profili di gestione traffico possono essere configurato toouse hello geografico metodo di routing in modo che gli utenti vengono indirizzati gli endpoint toospecific (Azure, esterna o Nested) in base quale posizione geografica le query DNS deriva da.</span><span class="sxs-lookup"><span data-stu-id="c623a-203">Traffic Manager profiles can be configured toouse hello Geographic routing method so that users are directed toospecific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="c623a-204">Questo consente scenari di tooenable clienti Traffic Manager in cui è importante conoscere l'area geografica dell'utente e il routing in base che.</span><span class="sxs-lookup"><span data-stu-id="c623a-204">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="c623a-205">Ne sono esempi la presenza di determinati requisiti sui dati, la localizzazione del contenuto e dell'esperienza dell'utente e la misurazione del traffico da aree diverse.</span><span class="sxs-lookup"><span data-stu-id="c623a-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="c623a-206">Quando un profilo è configurato per il routing geografico, ogni endpoint associato che è necessario un set di aree geografiche assegnate tooit toohave profilo.</span><span class="sxs-lookup"><span data-stu-id="c623a-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs toohave a set of geographic regions assigned tooit.</span></span> <span data-ttu-id="c623a-207">Un'area geografica può avere i seguenti livelli di granularità</span><span class="sxs-lookup"><span data-stu-id="c623a-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="c623a-208">Mondo: qualsiasi area</span><span class="sxs-lookup"><span data-stu-id="c623a-208">World– any region</span></span>
- <span data-ttu-id="c623a-209">Raggruppamento di aree: ad esempio Africa, Medio Oriente, Australia/Pacifico e così via.</span><span class="sxs-lookup"><span data-stu-id="c623a-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="c623a-210">Paese/area geografica: ad esempio Irlanda, Perù, Regione amministrativa speciale di Hong Kong e così via.</span><span class="sxs-lookup"><span data-stu-id="c623a-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="c623a-211">Stato/provincia: ad esempio USA-California, Australia-Queensland, Canada-Alberta e così via (nota: questo livello di granularità è supportato solo per gli stati e province di Australia, Canada, Regno Unito e Stati Uniti).</span><span class="sxs-lookup"><span data-stu-id="c623a-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="c623a-212">Quando un'area o un set di regioni viene assegnato tooan endpoint, tutte le richieste da tali aree Ottiene indirizzato endpoint toothat solo.</span><span class="sxs-lookup"><span data-stu-id="c623a-212">When a region or a set of regions is assigned tooan endpoint, any requests from those regions gets routed only toothat endpoint.</span></span> <span data-ttu-id="c623a-213">Gestione traffico Usa indirizzo IP di origine hello di hello DNS query toodetermine hello area da cui un utente esegue una query da: si tratta in genere l'indirizzo IP hello del resolver DNS locali hello esecuzione query hello per conto di utente hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-213">Traffic Manager uses hello source IP address of hello DNS query toodetermine hello region from which a user is querying from – usually this is hello IP address of hello local DNS resolver doing hello query on behalf of hello user.</span></span>  

![Metodo geografico di routing del traffico di Gestione traffico di Azure](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="c623a-215">Gestione traffico legge l'indirizzo IP di origine hello di query DNS hello e decide quale area geografica è stato originato da.</span><span class="sxs-lookup"><span data-stu-id="c623a-215">Traffic Manager reads hello source IP address of hello DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="c623a-216">Cerca quindi toosee se è presente un endpoint che include questo tooit eseguito il mapping di area geografica.</span><span class="sxs-lookup"><span data-stu-id="c623a-216">It then looks toosee if there is an endpoint that has this geographic region mapped tooit.</span></span> <span data-ttu-id="c623a-217">Questa ricerca viene avviata a livello di granularità più bassa hello (stato/provincia in cui è supportato, altrimenti a livello di hello paese/area geografica) e passa tutti modo hello al livello più alto toohello, ovvero di **World**.</span><span class="sxs-lookup"><span data-stu-id="c623a-217">This lookup starts at hello lowest granularity level (State/Province where it is supported, else at hello Country/Region level) and goes all hello way up toohello highest level, which is **World**.</span></span> <span data-ttu-id="c623a-218">Hello trovata prima corrispondenza utilizzando questo attraversamento è designato come tooreturn endpoint hello in risposta alla query hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-218">hello first match found using this traversal is designated as hello endpoint tooreturn in hello query response.</span></span> <span data-ttu-id="c623a-219">In caso di corrispondenza con un endpoint di tipo nidificato, viene restituito un endpoint all'interno di tale profilo figlio, in base al suo metodo di routing.</span><span class="sxs-lookup"><span data-stu-id="c623a-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="c623a-220">Hello punti seguenti è applicabili toothis comportamento:</span><span class="sxs-lookup"><span data-stu-id="c623a-220">hello following points are applicable toothis behavior:</span></span>

- <span data-ttu-id="c623a-221">Quando il tipo di routing hello è geografico Routing, un'area geografica può essere mappata endpoint tooone solo in un profilo di Traffic Manager.</span><span class="sxs-lookup"><span data-stu-id="c623a-221">A geographic region can be mapped only tooone endpoint in a Traffic Manager profile when hello routing type is Geographic Routing.</span></span> <span data-ttu-id="c623a-222">Ciò garantisce che il routing degli utenti sia deterministico e i clienti possano abilitare scenari che richiedono limiti geografici non ambigui.</span><span class="sxs-lookup"><span data-stu-id="c623a-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="c623a-223">Se area dell'utente viene mapping geografiche in due endpoint diversi, gestione traffico seleziona endpoint hello con granularità più bassa hello e non considera il routing delle richieste da tale toohello area altri endpoint.</span><span class="sxs-lookup"><span data-stu-id="c623a-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects hello endpoint with hello lowest granularity and does not consider routing requests from that region toohello other endpoint.</span></span> <span data-ttu-id="c623a-224">Ad esempio, si consideri un profilo con il tipo di routing geografico e con due endpoint: Endpoint1 ed Endpoint2.</span><span class="sxs-lookup"><span data-stu-id="c623a-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="c623a-225">Endpoint1 è configurato il traffico tooreceive dall'Irlanda ed Endpoint2 tooreceive traffico da Europe.</span><span class="sxs-lookup"><span data-stu-id="c623a-225">Endpoint1 is configured tooreceive traffic from Ireland and Endpoint2 is configured tooreceive traffic from Europe.</span></span> <span data-ttu-id="c623a-226">Se una richiesta proviene da Irlanda, è sempre tooEndpoint1 indirizzato.</span><span class="sxs-lookup"><span data-stu-id="c623a-226">If a request originates from Ireland, it is always routed tooEndpoint1.</span></span>
- <span data-ttu-id="c623a-227">Poiché un'area può essere mappate endpoint tooone solo, gestione traffico restituisce indipendentemente dal fatto endpoint hello sia integro.</span><span class="sxs-lookup"><span data-stu-id="c623a-227">Since a region can be mapped only tooone endpoint, Traffic Manager returns it regardless of whether hello endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="c623a-228">È consigliabile che i clienti che utilizzano il metodo di routing geografiche di hello associarlo con gli endpoint di tipo annidate hello con profili figlio contenenti almeno due endpoint all'interno di ognuno.</span><span class="sxs-lookup"><span data-stu-id="c623a-228">It is strongly recommended that customers using hello geographic routing method associate it with hello Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="c623a-229">Se viene trovata una corrispondenza di endpoint e che l'endpoint è hello **arrestato** stato, gestione traffico restituisce una risposta NODATA.</span><span class="sxs-lookup"><span data-stu-id="c623a-229">If an endpoint match is found and that endpoint is in hello **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="c623a-230">In questo caso, non le altre ricerche è più in alto nella gerarchia di area geografica hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-230">In this case, no further lookups is made higher up in hello geographic region hierarchy.</span></span> <span data-ttu-id="c623a-231">Questo comportamento è applicabile anche per i tipi annidati endpoint profilo figlio di hello è hello **arrestato** o **disabilitato** stato.</span><span class="sxs-lookup"><span data-stu-id="c623a-231">This behavior is also applicable for nested endpoint types when hello child profile is in hello **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="c623a-232">Se un endpoint viene visualizzato un **disabilitato** stato, non sarà incluso nell'area di hello processo di corrispondenza.</span><span class="sxs-lookup"><span data-stu-id="c623a-232">If an endpoint displays a **Disabled** status, it won’t be included in hello region matching process.</span></span> <span data-ttu-id="c623a-233">Questo comportamento è applicabile anche per i tipi annidati endpoint endpoint hello è hello **disabilitato** stato.</span><span class="sxs-lookup"><span data-stu-id="c623a-233">This behavior is also applicable for nested endpoint types when hello endpoint is in hello **Disabled** state.</span></span>
- <span data-ttu-id="c623a-234">Se una query proviene da un'area geografica che non ha alcun mapping in quel profilo, Gestione traffico restituisce una risposta NODATA.</span><span class="sxs-lookup"><span data-stu-id="c623a-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="c623a-235">Pertanto, si consiglia ai clienti di utilizzare routing geografico con un endpoint, in teoria di tipo annidate con almeno due endpoint nel profilo figlio hello, con l'area di hello **World** tooit assegnato.</span><span class="sxs-lookup"><span data-stu-id="c623a-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within hello child profile, with hello region **World** assigned tooit.</span></span> <span data-ttu-id="c623a-236">Questo processo assicura anche che tutti gli indirizzi IP che non eseguono il mapping tooa area vengono gestiti.</span><span class="sxs-lookup"><span data-stu-id="c623a-236">This also ensures that any IP addresses that do not map tooa region are handled.</span></span>

<span data-ttu-id="c623a-237">Come spiegato in [Modalità di funzionamento di Gestione traffico](traffic-manager-how-traffic-manager-works.md), le query DNS non vengono ricevute direttamente dai client,</span><span class="sxs-lookup"><span data-stu-id="c623a-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="c623a-238">Invece, le query DNS provengono da che hello client non siano toouse configurato il servizio DNS ricorsivo hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-238">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="c623a-239">Pertanto, non è hello IP indirizzo utilizzato toodetermine hello area hello indirizzo IP del client, ma è hello di indirizzo IP del servizio DNS di hello ricorsiva.</span><span class="sxs-lookup"><span data-stu-id="c623a-239">Therefore, hello IP address used toodetermine hello region is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="c623a-240">In pratica, questo indirizzo IP è un proxy valido per il client di hello.</span><span class="sxs-lookup"><span data-stu-id="c623a-240">In practice, this IP address is a good proxy for hello client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="c623a-241">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="c623a-241">Next steps</span></span>

<span data-ttu-id="c623a-242">Informazioni su come applicazioni a disponibilità elevata toodevelop utilizzando [monitoraggio degli endpoint di gestione traffico](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="c623a-242">Learn how toodevelop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="c623a-243">Informazioni su come troppo[creare un profilo di Traffic Manager](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="c623a-243">Learn how too[create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png



