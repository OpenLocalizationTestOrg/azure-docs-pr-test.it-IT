---
title: Introduzione all'integrazione dei log di Azure | Documentazione Microsoft
description: Informazioni su come installare il servizio di integrazione dei log di Azure e integrare i log dall'archiviazione di Azure, i log di controllo di Azure e gli avvisi del Centro sicurezza di Azure.
services: security
documentationcenter: na
author: Barclayn
manager: MBaldwin
editor: TomShinder
ms.assetid: 53f67a7c-7e17-4c19-ac5c-a43fabff70e1
ms.service: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ums.workload: na
ms.date: 07/26/2017
ms.author: TomSh
ms.custom: azlog
ms.openlocfilehash: 9d39ecd513386b75b4b640721f80991caaf9ade8
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="azure-log-integration-with-azure-diagnostics-logging-and-windows-event-forwarding"></a><span data-ttu-id="d5ead-103">Integrazione dei log di Azure con la registrazione di Diagnostica di Azure e l'inoltro di eventi di Windows</span><span class="sxs-lookup"><span data-stu-id="d5ead-103">Azure log integration with Azure Diagnostics Logging and Windows Event Forwarding</span></span>
<span data-ttu-id="d5ead-104">Integrazione log di Azure (AzLog) consente di integrare log non elaborati delle risorse di Azure nei sistemi di gestione di informazioni ed eventi di sicurezza locali.</span><span class="sxs-lookup"><span data-stu-id="d5ead-104">Azure Log Integration (AzLog) enables you to integrate raw logs from your Azure resources into your on-premises Security Information and Event Management (SIEM) systems.</span></span> <span data-ttu-id="d5ead-105">Questa integrazione consente di avere un dashboard di sicurezza unificato per tutti gli asset, locali o su cloud, consentendo di aggregare, correlare, analizzare e inviare avvisi per gli eventi di sicurezza associati alle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="d5ead-105">This integration makes it possible to have a unified security dashboard for all your assets, on-premises or in the cloud, so that you can aggregate, correlate, analyze, and alert for security events associated with your applications.</span></span>
>[!NOTE]
<span data-ttu-id="d5ead-106">Per altre informazioni su Integrazione dei log di Azure, vedere la [panoramica di Integrazione log di Azure](https://docs.microsoft.com/azure/security/security-azure-log-integration-overview).</span><span class="sxs-lookup"><span data-stu-id="d5ead-106">For more information on Azure Log Integration, you can review the [Azure Log Integration overview](https://docs.microsoft.com/azure/security/security-azure-log-integration-overview).</span></span>

<span data-ttu-id="d5ead-107">Questo articolo presenta un'introduzione a Integrazione log di Azure concentrandosi sull'installazione del servizio Azlog e l'integrazione del servizio con Diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-107">This article will help you get started with Azure Log Integration by focusing on the installation of the Azlog service and integrating the service with Azure Diagnostics.</span></span> <span data-ttu-id="d5ead-108">Il servizio Integrazione log di Azure sarà quindi in grado di raccogliere informazioni del registro eventi di Windows dal canale degli eventi di sicurezza di Windows da macchine virtuali distribuite in Azure IaaS.</span><span class="sxs-lookup"><span data-stu-id="d5ead-108">The Azure Log Integration service will then be able to collect Windows Event Log information from the Windows Security Event Channel from virtual machines deployed in Azure IaaS.</span></span> <span data-ttu-id="d5ead-109">Questo è molto simile all'inoltro degli eventi che si può usare in locale.</span><span class="sxs-lookup"><span data-stu-id="d5ead-109">This is very similar to “Event Forwarding” that you may have used on-premises.</span></span>

>[!NOTE]
><span data-ttu-id="d5ead-110">La possibilità di portare l'output dell'integrazione dei log di Azure nel SIEM viene fornita dal SIEM stesso.</span><span class="sxs-lookup"><span data-stu-id="d5ead-110">The ability to bring the output of Azure log integration in to the SIEM is provided by the SIEM itself.</span></span> <span data-ttu-id="d5ead-111">Per altre informazioni vedere l'articolo [Azure Log Integration SIEM configuration steps](https://blogs.msdn.microsoft.com/azuresecurity/2016/08/23/azure-log-siem-configuration-steps/) (Passaggi per la configurazione di SIEM con Integrazione log di Azure).</span><span class="sxs-lookup"><span data-stu-id="d5ead-111">Please see the article [Integrating Azure Log Integration with your On-premises SIEM](https://blogs.msdn.microsoft.com/azuresecurity/2016/08/23/azure-log-siem-configuration-steps/) for more information.</span></span>

<span data-ttu-id="d5ead-112">Deve essere chiaro che il servizio Integrazione log di Azure viene eseguito in un computer fisico o virtuale dotato del sistema operativo Windows Server 2008 R2 o versioni successive (le versioni preferite sono Windows Server 2012 R2 o Windows Server 2016).</span><span class="sxs-lookup"><span data-stu-id="d5ead-112">To be very clear - the Azure Log Integration service runs on a physical or virtual computer that is using the Windows Server 2008 R2 or above operating system (Windows Server 2012 R2 or Windows Server 2016 are preferred).</span></span>

<span data-ttu-id="d5ead-113">Il computer fisico può essere eseguito in locale (o in un sito host).</span><span class="sxs-lookup"><span data-stu-id="d5ead-113">The physical computer can run on-premises (or on a hoster site).</span></span> <span data-ttu-id="d5ead-114">Se si sceglie di eseguire il servizio Integrazione log di Azure in una macchina virtuale, tale macchina virtuale può essere in locale o in un cloud pubblico, come Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-114">If you choose to run the Azure Log Integration service on a virtual machine, that virtual machine can be located on-premises or in a public cloud, such as Microsoft Azure.</span></span>

<span data-ttu-id="d5ead-115">La macchina fisica o virtuale che esegue il servizio Integrazione log di Azure richiede la connettività di rete per il cloud pubblico di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-115">The physical or virtual machine running the Azure Log Integration service requires network connectivity to the Azure public cloud.</span></span> <span data-ttu-id="d5ead-116">I passaggi riportai in questo articolo forniscono i dettagli della configurazione.</span><span class="sxs-lookup"><span data-stu-id="d5ead-116">Steps in this article provide details on the configuration.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="d5ead-117">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="d5ead-117">Prerequisites</span></span>
<span data-ttu-id="d5ead-118">Come minimo l'installazione di AzLog richiede i seguenti elementi:</span><span class="sxs-lookup"><span data-stu-id="d5ead-118">At a minimum, the installation of AzLog requires the following items:</span></span>
* <span data-ttu-id="d5ead-119">Una **sottoscrizione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-119">An **Azure subscription**.</span></span> <span data-ttu-id="d5ead-120">Se non si ha una sottoscrizione, è possibile iscriversi per ottenere un [account gratuito](https://azure.microsoft.com/free/).</span><span class="sxs-lookup"><span data-stu-id="d5ead-120">If you do not have one, you can sign up for a [free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="d5ead-121">Un **account di archiviazione** che può essere usato per la registrazione diagnostica di Windows Azure (è possibile usare un account di archiviazione preconfigurato o crearne uno nuovo: più avanti in questo articolo è descritto come configurare l'account di archiviazione)</span><span class="sxs-lookup"><span data-stu-id="d5ead-121">A **storage account** that can be used for Windows Azure diagnostic logging (you can use a pre-configured storage account, or create a new one – will we demonstrate how to configure the storage account later in this article)</span></span>
  >[!NOTE]
  <span data-ttu-id="d5ead-122">A seconda dello scenario, potrebbe non essere necessario un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d5ead-122">Depending on your scenario a storage account may not be required.</span></span> <span data-ttu-id="d5ead-123">Per lo scenario di diagnostica di Azure illustrato in questo articolo è necessario.</span><span class="sxs-lookup"><span data-stu-id="d5ead-123">For the Azure diagnostics scenario covered in this article one is needed.</span></span>
* <span data-ttu-id="d5ead-124">**Due sistemi**: un computer in cui verrà eseguito il servizio Integrazione log di Azure e un computer che verrà monitorato e le sue informazioni di registrazione saranno inviate al computer del servizio Azlog.</span><span class="sxs-lookup"><span data-stu-id="d5ead-124">**Two systems**: a machine that will run the Azure Log Integration service, and a machine that will be monitored and have its logging information sent to the Azlog service machine.</span></span>
   * <span data-ttu-id="d5ead-125">Un computer che si desidera monitorare: si tratta di una VM eseguita come [macchina virtuale di Azure](../virtual-machines/virtual-machines-windows-overview.md)</span><span class="sxs-lookup"><span data-stu-id="d5ead-125">A machine you want to monitor – this is a VM running as an [Azure Virtual Machine](../virtual-machines/virtual-machines-windows-overview.md)</span></span>
   * <span data-ttu-id="d5ead-126">Un computer in cui verrà eseguito il servizio di integrazione dei log di Azure; questo computer raccoglierà tutte le informazioni dei log che verranno successivamente importate nel SIEM.</span><span class="sxs-lookup"><span data-stu-id="d5ead-126">A machine that will run the Azure log integration service; this machine will collect all the log information that will later be imported into your SIEM.</span></span>
    * <span data-ttu-id="d5ead-127">Questo sistema può essere locale o in Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-127">This system can be on-premises or in Microsoft Azure.</span></span>  
    * <span data-ttu-id="d5ead-128">Deve eseguire un versione x64 di Windows Server 2008 R2 SP1 o versione successiva e avere installato .NET 4.5.1.</span><span class="sxs-lookup"><span data-stu-id="d5ead-128">It needs to be running an x64 version of Windows server 2008 R2 SP1 or higher and have .NET 4.5.1 installed.</span></span> <span data-ttu-id="d5ead-129">È possibile determinare la versione di .NET installata seguendo l'articolo intitolato [Procedura: determinare le versioni di .NET Framework installate](https://msdn.microsoft.com/library/hh925568)</span><span class="sxs-lookup"><span data-stu-id="d5ead-129">You can determine the .NET version installed by following the article titled [How to: Determine Which .NET Framework Versions Are Installed](https://msdn.microsoft.com/library/hh925568)</span></span>  
    <span data-ttu-id="d5ead-130">Deve disporre di connettività all'account di archiviazione di Azure utilizzato per la registrazione diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-130">It must have connectivity to the Azure storage account used for Azure diagnostic logging.</span></span> <span data-ttu-id="d5ead-131">Microsoft fornirà le istruzioni su come verificare la connettività più avanti in questo articolo</span><span class="sxs-lookup"><span data-stu-id="d5ead-131">We will provide instructions later in this article on how you can confirm this connectivity</span></span>

<span data-ttu-id="d5ead-132">Per una rapida dimostrazione del processo di creazione di una macchina virtuale tramite il portale di Azure, vedere il video seguente.</span><span class="sxs-lookup"><span data-stu-id="d5ead-132">For a quick demonstration of the process of a creating a virtual machine using the Azure portal take a look at the video below.</span></span>

> [!VIDEO https://channel9.msdn.com/Blogs/Azure-Security-Videos/Azure-Log-Integration-Videos-Create-a-Virtual-Machine/player]



## <a name="deployment-considerations"></a><span data-ttu-id="d5ead-133">Considerazioni sulla distribuzione</span><span class="sxs-lookup"><span data-stu-id="d5ead-133">Deployment considerations</span></span>
<span data-ttu-id="d5ead-134">Durante il test di Integrazione log di Azure è possibile usare qualsiasi sistema che soddisfi i requisiti minimi del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="d5ead-134">While you are testing Azure Log Integration, you can use any system that meets the minimum operating system requirements.</span></span> <span data-ttu-id="d5ead-135">Tuttavia, per un ambiente di produzione, il carico potrebbe richiedere una pianificazione per aumentare o scalare orizzontalmente.</span><span class="sxs-lookup"><span data-stu-id="d5ead-135">However, for a production environment the load may require you to plan for scaling up or out.</span></span>

<span data-ttu-id="d5ead-136">Se il volume di eventi è elevato, è possibile eseguire più istanze del servizio Integrazione log di Azure (un'istanza per ogni macchina virtuale o fisica).</span><span class="sxs-lookup"><span data-stu-id="d5ead-136">You can run multiple instances of the Azure Log Integration service (one instance per physical or virtual machine) if event volume is high.</span></span> <span data-ttu-id="d5ead-137">Inoltre è possibile eseguire il bilanciamento del carico degli account di archiviazione di Diagnostica di Azure per Windows (WAD) e il numero di sottoscrizioni da fornire alle istanze deve essere basato sulla capacità.</span><span class="sxs-lookup"><span data-stu-id="d5ead-137">In addition, you can load balance Azure Diagnostics storage accounts for Windows (WAD) and the number of subscriptions to provide to the instances should be based on your capacity.</span></span>
>[!NOTE]
<span data-ttu-id="d5ead-138">In questo momento non abbiamo consigli specifici su quando scalare orizzontalmente le istanze dei computer con l'integrazione dei log di Azure (ovvero i computer che eseguono il servizio di integrazione dei log di Azure) o per le sottoscrizioni o gli account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d5ead-138">At this time we do not have specific recommendations for when to scale out instances of Azure log integration machines (i.e., machines that are running the Azure log integration service), or for storage accounts or subscriptions.</span></span> <span data-ttu-id="d5ead-139">Le decisioni di scalabilità si devono basare sulle osservazioni delle prestazioni in ognuna di queste aree.</span><span class="sxs-lookup"><span data-stu-id="d5ead-139">Scaling decisions should be based on your performance observations in each of these areas.</span></span>

<span data-ttu-id="d5ead-140">È inoltre possibile aumentare il servizio Integrazione log di Azure per migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="d5ead-140">You also have the option to scale up the Azure Log Integration service to help improve performance.</span></span> <span data-ttu-id="d5ead-141">Le seguenti metriche di prestazioni consentono di dimensionare i computer scelti per l'esecuzione del servizio di integrazione dei log di Azure:</span><span class="sxs-lookup"><span data-stu-id="d5ead-141">The following performance metrics can help you in sizing the machines that you choose to run the Azure log integration service:</span></span>
* <span data-ttu-id="d5ead-142">Su un computer con 8 processori (memoria centrale), una singola istanza dell'integratore Azlog può elaborare circa 24 milioni di eventi al giorno (all'incirca 1 milione all'ora).</span><span class="sxs-lookup"><span data-stu-id="d5ead-142">On an 8-processor (core) machine, a single instance of Azlog Integrator can process about 24 million events per day (~1M/hour).</span></span>

* <span data-ttu-id="d5ead-143">Su un computer con 4 processori (memoria centrale), una singola istanza dell'integratore Azlog può elaborare circa 1,5 milioni di eventi al giorno (all'incirca 62,5 K all'ora).</span><span class="sxs-lookup"><span data-stu-id="d5ead-143">On a 4-processor (core) machine, a single instance of Azlog Integrator can process about 1.5 million events per day (~62.5K/hour).</span></span>

## <a name="install-azure-log-integration"></a><span data-ttu-id="d5ead-144">Installare l'integrazione dei log di Azure</span><span class="sxs-lookup"><span data-stu-id="d5ead-144">Install Azure log integration</span></span>
<span data-ttu-id="d5ead-145">Per installare Integrazione log di Azure è necessario scaricare il file di installazione [Integrazione dei log di Azure](https://www.microsoft.com/download/details.aspx?id=53324).</span><span class="sxs-lookup"><span data-stu-id="d5ead-145">To install Azure Log Integration, you need to download the [Azure log integration](https://www.microsoft.com/download/details.aspx?id=53324) installation file.</span></span> <span data-ttu-id="d5ead-146">Eseguire la routine di installazione e decidere se si desidera fornire informazioni di telemetria a Microsoft.</span><span class="sxs-lookup"><span data-stu-id="d5ead-146">Run through the setup routine and decide if you want to provide telemetry information to Microsoft.</span></span>  

![Schermata di installazione con la casella della telemetria selezionata](./media/security-azure-log-integration-get-started/telemetry.png)

*
> [!NOTE]
> <span data-ttu-id="d5ead-148">Si consiglia di consentire a Microsoft di raccogliere i dati di telemetria.</span><span class="sxs-lookup"><span data-stu-id="d5ead-148">We recommend that you allow Microsoft to collect telemetry data.</span></span> <span data-ttu-id="d5ead-149">Per disabilitare la raccolta dei dati di telemetria è possibile deselezionare questa opzione.</span><span class="sxs-lookup"><span data-stu-id="d5ead-149">You can turn off collection of telemetry data by unchecking this option.</span></span>
>


<span data-ttu-id="d5ead-150">Il servizio Integrazione log di Azure raccoglie i dati di telemetria dal computer in cui è installato.</span><span class="sxs-lookup"><span data-stu-id="d5ead-150">The Azure Log Integration service collects telemetry data from the machine on which it is installed.</span></span>  

<span data-ttu-id="d5ead-151">I dati di telemetria raccolti sono:</span><span class="sxs-lookup"><span data-stu-id="d5ead-151">Telemetry data collected is:</span></span>

* <span data-ttu-id="d5ead-152">Eccezioni che si verificano durante l'esecuzione dell'integrazione dei log di Azure</span><span class="sxs-lookup"><span data-stu-id="d5ead-152">Exceptions that occur during execution of Azure log integration</span></span>
* <span data-ttu-id="d5ead-153">Metriche relative al numero di query e di eventi elaborati</span><span class="sxs-lookup"><span data-stu-id="d5ead-153">Metrics about the number of queries and events processed</span></span>
* <span data-ttu-id="d5ead-154">Statistiche sulle opzioni della riga di comando Azlog.exe che vengono usate</span><span class="sxs-lookup"><span data-stu-id="d5ead-154">Statistics about which Azlog.exe command-line options are being used</span></span>

<span data-ttu-id="d5ead-155">Il processo di installazione è illustrato nel video seguente.</span><span class="sxs-lookup"><span data-stu-id="d5ead-155">The installation process is covered in the video below.</span></span>
> [!VIDEO https://channel9.msdn.com/Blogs/Azure-Security-Videos/Azure-Log-Integration-Videos-Install-Azure-Log-Integration/player]



## <a name="post-installation-and-validation-steps"></a><span data-ttu-id="d5ead-156">Passaggi successivi all'installazione e di convalida</span><span class="sxs-lookup"><span data-stu-id="d5ead-156">Post installation and validation steps</span></span>
<span data-ttu-id="d5ead-157">Dopo aver completato la routine di installazione di base si può procedere con i passaggi successivi all'installazione e di convalida:</span><span class="sxs-lookup"><span data-stu-id="d5ead-157">After completing the basic setup routine, you're ready step to perform post installation and validation steps:</span></span>
1. <span data-ttu-id="d5ead-158">Aprire una finestra di PowerShell con privilegi elevati e passare a **C:\Programmi\Integrazione log di Microsoft Azure**</span><span class="sxs-lookup"><span data-stu-id="d5ead-158">Open an elevated PowerShell window and navigate to **c:\Program Files\Microsoft Azure Log Integration**</span></span>
2. <span data-ttu-id="d5ead-159">Il primo passaggio consiste nell'ottenere i cmdlet AzLog importati.</span><span class="sxs-lookup"><span data-stu-id="d5ead-159">The first step you need to take is to get the AzLog Cmdlets imported.</span></span> <span data-ttu-id="d5ead-160">È possibile farlo eseguendo lo script**LoadAzlogModule.ps1** (notare i caratteri ". \" nel comando seguente).</span><span class="sxs-lookup"><span data-stu-id="d5ead-160">You can do that by running the script **LoadAzlogModule.ps1** (notice the “.\” in the following command).</span></span> <span data-ttu-id="d5ead-161">Digitare **.\LoadAzlogModule.ps1** e premere **INVIO**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-161">Type **.\LoadAzlogModule.ps1** and press **ENTER**.</span></span>  
<span data-ttu-id="d5ead-162">Verrà visualizzata una schermata simile alla figura seguente.</span><span class="sxs-lookup"><span data-stu-id="d5ead-162">You should see something like what appears in the figure below.</span></span> </br></br><span data-ttu-id="d5ead-163">
![Schermata di installazione con la casella della telemetria selezionata](./media/security-azure-log-integration-get-started/loaded-modules.png)</span><span class="sxs-lookup"><span data-stu-id="d5ead-163">
![Installation Screen with telemetry box checked](./media/security-azure-log-integration-get-started/loaded-modules.png)</span></span> </br></br>
3. <span data-ttu-id="d5ead-164">A questo punto è necessario configurare AzLog per l'uso di un ambiente di Azure specifico.</span><span class="sxs-lookup"><span data-stu-id="d5ead-164">Now you need to configure AzLog to use a specific Azure environment.</span></span> <span data-ttu-id="d5ead-165">"Ambiente di Azure" è il "tipo" di data center del cloud di Azure che si desidera usare.</span><span class="sxs-lookup"><span data-stu-id="d5ead-165">An “Azure environment” is the “type” of Azure cloud data center you want to work with.</span></span> <span data-ttu-id="d5ead-166">Sebbene esistano diversi ambienti di Azure in questa fase, le opzioni attualmente pertinenti sono **AzureCloud** o **AzureUSGovernment**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-166">While there are several Azure environments at this time, the currently relevant options are either **AzureCloud** or **AzureUSGovernment**.</span></span>   <span data-ttu-id="d5ead-167">Nell'ambiente di PowerShell con privilegi elevati assicurarsi di essere in **C:\Programmi\Integrazione log di Microsoft Azure\**</span><span class="sxs-lookup"><span data-stu-id="d5ead-167">In your elevated PowerShell environment, make sure that you are in **c:\program files\Microsoft Azure Log Integration\**</span></span> </br></br>
    <span data-ttu-id="d5ead-168">A questo punto, eseguire il comando:</span><span class="sxs-lookup"><span data-stu-id="d5ead-168">Once there, run the command:</span></span> </br>
    <span data-ttu-id="d5ead-169">``Set-AzlogAzureEnvironment -Name AzureCloud`` (per l'area commerciale di Azure)</span><span class="sxs-lookup"><span data-stu-id="d5ead-169">``Set-AzlogAzureEnvironment -Name AzureCloud`` (for Azure commercial)</span></span>

      >[!NOTE]
      <span data-ttu-id="d5ead-170">Quando il comando ha esito positivo, non si riceveranno commenti.</span><span class="sxs-lookup"><span data-stu-id="d5ead-170">When the command succeeds, you will not receive any feedback.</span></span>  <span data-ttu-id="d5ead-171">Se si desidera usare il cloud del governo USA di Microsoft Azure occorre utilizzare **AzureUSGovernment** (per la variabile -Name) per il cloud del governo USA.</span><span class="sxs-lookup"><span data-stu-id="d5ead-171">If you want to use the US Government Azure cloud, you would use **AzureUSGovernment** (for the -Name variable) for the USA government cloud.</span></span> <span data-ttu-id="d5ead-172">Al momento gli altri cloud di Azure non sono supportati.</span><span class="sxs-lookup"><span data-stu-id="d5ead-172">Other Azure clouds are not supported at this time.</span></span>  
4. <span data-ttu-id="d5ead-173">Per poter monitorare un sistema è necessario il nome dell'account di archiviazione in uso per Diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-173">Before you can monitor a system you will need the name of the storage account in use for Azure Diagnostics.</span></span>  <span data-ttu-id="d5ead-174">Nel portale di Azure passare a **Macchine virtuali** e cercare la macchina virtuale che verrà monitorata.</span><span class="sxs-lookup"><span data-stu-id="d5ead-174">In the Azure portal navigate to **Virtual machines** and look for the virtual machine that you will monitor.</span></span> <span data-ttu-id="d5ead-175">Nella sezione **Proprietà** scegliere **Impostazioni di diagnostica**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-175">In the **Properties** section, choose **Diagnostic Settings**.</span></span>  <span data-ttu-id="d5ead-176">Fare clic su **Agente** e prendere nota del nome dell'account di archiviazione specificato.</span><span class="sxs-lookup"><span data-stu-id="d5ead-176">Click on **Agent** and make note of the storage account name specified.</span></span> <span data-ttu-id="d5ead-177">Il nome dell'account sarà necessario per un passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="d5ead-177">You will need this account name for a later step.</span></span>
<span data-ttu-id="d5ead-178">![Impostazioni di Diagnostica di Azure](./media/security-azure-log-integration-get-started/storage-account-large.png)</span><span class="sxs-lookup"><span data-stu-id="d5ead-178">![Azure Diagnostic settings](./media/security-azure-log-integration-get-started/storage-account-large.png)</span></span> </br></br>

      ![Impostazioni di Diagnostica di Azure](./media/security-azure-log-integration-get-started/azure-monitoring-not-enabled-large.png)
      >[!NOTE]
      <span data-ttu-id="d5ead-180">Se il monitoraggio non è stato abilitato durante la creazione della macchina virtuale sarà possibile abilitarlo come illustrato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="d5ead-180">If Monitoring was not enabled during virtual machine creation you will be given the option to enable it as shown above.</span></span>
5. <span data-ttu-id="d5ead-181">Ora si tornerà al computer con l'integrazione dei log di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-181">Now we’ll switch our attention back to the Azure log integration machine.</span></span> <span data-ttu-id="d5ead-182">È necessario verificare di disporre della connettività all'account di archiviazione dal sistema in cui è stato installato Integrazione log di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-182">We need to verify that you have connectivity to the Storage Account from the system where you installed Azure Log Integration.</span></span> <span data-ttu-id="d5ead-183">Il computer fisico o la macchina virtuale che esegue il servizio Integrazione log di Azure deve accedere all'account di archiviazione per recuperare le informazioni registrate da Diagnostica di Azure configurate in ciascuno dei sistemi monitorati.</span><span class="sxs-lookup"><span data-stu-id="d5ead-183">The physical computer or virtual machine running the Azure Log Integration service needs access to the storage account to retrieve information logged by Azure Diagnostics as configured on each of the monitored systems.</span></span>  
  1. <span data-ttu-id="d5ead-184">È possibile scaricare Azure Storage Explorer [qui](http://storageexplorer.com/).</span><span class="sxs-lookup"><span data-stu-id="d5ead-184">You can download Azure Storage Explorer [here](http://storageexplorer.com/).</span></span>
  2. <span data-ttu-id="d5ead-185">Eseguire la routine di installazione</span><span class="sxs-lookup"><span data-stu-id="d5ead-185">Run through the setup routine</span></span>
  3. <span data-ttu-id="d5ead-186">Una volta completata l'installazione fare clic su **Avanti** e lasciare selezionata la casella di controllo **Avviare Esplora archivi di Microsoft Azure**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-186">Once the installation completes click **Next** and leave the check box **Launch Microsoft Azure Storage Explorer** checked.</span></span>  
  4. <span data-ttu-id="d5ead-187">Accedere ad Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-187">Log in to Azure.</span></span>
  5. <span data-ttu-id="d5ead-188">Verificare che sia possibile vedere l'account di archiviazione configurato per la Diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-188">Verify that you can see the storage account that you configured for Azure Diagnostics.</span></span>  
![Account di archiviazione](./media/security-azure-log-integration-get-started/storage-account.jpg) </br></br>
   6. <span data-ttu-id="d5ead-190">Si noti che ci sono alcune opzioni sotto gli account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d5ead-190">Notice that there are a few options under storage accounts.</span></span> <span data-ttu-id="d5ead-191">Una di esse è **Tabelle**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-191">One of them is **Tables**.</span></span> <span data-ttu-id="d5ead-192">Sotto **Tabelle** dovrebbe essere presente una tabella denominata **WADWindowsEventLogsTable**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-192">Under **Tables** you should see one called **WADWindowsEventLogsTable**.</span></span> </br></br><span data-ttu-id="d5ead-193">
   ![Account di archiviazione](./media/security-azure-log-integration-get-started/storage-explorer.png)</span><span class="sxs-lookup"><span data-stu-id="d5ead-193">
![Storage accounts](./media/security-azure-log-integration-get-started/storage-explorer.png)</span></span> </br>

## <a name="integrate-azure-diagnostic-logging"></a><span data-ttu-id="d5ead-194">Integrare la registrazione di Diagnostica di Azure</span><span class="sxs-lookup"><span data-stu-id="d5ead-194">Integrate Azure Diagnostic logging</span></span>
<span data-ttu-id="d5ead-195">In questo passaggio si configurerà il computer che esegue il servizio Integrazione log di Azure per la connessione all'account di archiviazione che contiene i file di log.</span><span class="sxs-lookup"><span data-stu-id="d5ead-195">In this step, you will configure the machine running the Azure Log Integration service to connect to the storage account that contains the log files.</span></span>
<span data-ttu-id="d5ead-196">Per poter completare questo passaggio sarà necessario disporre di alcune cose.</span><span class="sxs-lookup"><span data-stu-id="d5ead-196">To complete this step we will need a few things up front.</span></span>  
* <span data-ttu-id="d5ead-197">**FriendlyNameForSource:** è un nome descrittivo che è possibile applicare all'account di archiviazione configurato per l'archiviazione delle informazioni di Diagnostica di Azure da parte della macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="d5ead-197">**FriendlyNameForSource:** This is a friendly name that you can apply to the storage account that you've configured the virtual machine to store information from Azure Diagnostics</span></span>
* <span data-ttu-id="d5ead-198">**StorageAccountName:** questo è il nome dell'account di archiviazione specificato durante la configurazione di Diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-198">**StorageAccountName:** This is the name of the storage account that you specified when you configured Azure diagnotics.</span></span>  
* <span data-ttu-id="d5ead-199">**Chiave di archiviazione:** si tratta della chiave di archiviazione per l'account di archiviazione in cui le informazioni di Diagnostica di Azure vengono archiviate per questa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d5ead-199">**StorageKey:** This is the storage key for the storage account where the Azure Diagnostics information is stored for this virtual machine.</span></span>  

<span data-ttu-id="d5ead-200">Eseguire i passaggi seguenti per ottenere la chiave di archiviazione:</span><span class="sxs-lookup"><span data-stu-id="d5ead-200">Perform the following steps to obtain the storage key:</span></span>
 1. <span data-ttu-id="d5ead-201">Accedere al [portale di Azure](http://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="d5ead-201">Browse to the [Azure portal](http://portal.azure.com).</span></span>
 2. <span data-ttu-id="d5ead-202">Nel riquadro di spostamento della console di Azure scorrere verso il basso e fare clic su **Altri servizi**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-202">In the navigation pane of the Azure console, scroll to the bottom and click **More services.**</span></span>

 ![Altri servizi](./media/security-azure-log-integration-get-started/more-services.png)
 3. <span data-ttu-id="d5ead-204">Immettere **Archiviazione** nella casella di testo **Filtro**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-204">Enter **Storage** in the **Filter** text box.</span></span> <span data-ttu-id="d5ead-205">Fare clic su **Account di archiviazione** (il valore sarà visualizzato dopo avere immesso **Archiviazione**)</span><span class="sxs-lookup"><span data-stu-id="d5ead-205">Click **Storage accounts** (this will appear after you enter **Storage**)</span></span>

   ![casella Filtro](./media/security-azure-log-integration-get-started/filter.png)
 4. <span data-ttu-id="d5ead-207">Verrà visualizzato un elenco di account di archiviazione: fare doppio clic sull'account assegnato all'archiviazione dei log.</span><span class="sxs-lookup"><span data-stu-id="d5ead-207">A list of storage accounts will appear, double click on the account that you assigned to Log storage.</span></span>

   ![elenco degli account di archiviazione](./media/security-azure-log-integration-get-started/storage-accounts.png)
 5. <span data-ttu-id="d5ead-209">Fare clic su **Chiavi di accesso** nella sezione **Impostazioni**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-209">Click on **Access keys** in the **Settings** section.</span></span>

  ![chiavi di accesso](./media/security-azure-log-integration-get-started/storage-account-access-keys.png)
 6. <span data-ttu-id="d5ead-211">Copiare **key1** e inserirla in una posizione sicura a cui sia possibile accedere per il passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="d5ead-211">Copy **key1** and put it in a secure location that you can access for the next step.</span></span>

   ![due chiavi di accesso](./media/security-azure-log-integration-get-started/storage-account-access-keys.png)
 7. <span data-ttu-id="d5ead-213">Nel server in cui è stato installato Integrazione log di Azure, aprire un prompt dei comandi con privilegi elevati (si noti che in questo caso verrà usata una finestra del prompt dei comandi con privilegi elevati e non una console di PowerShell con privilegi elevati).</span><span class="sxs-lookup"><span data-stu-id="d5ead-213">On the server that you installed Azure Log Integration, open an elevated Command Prompt (note that we’re using an elevated Command Prompt window here, not an elevated PowerShell console).</span></span>
 8. <span data-ttu-id="d5ead-214">Passare alla directory **C:\Programmi\Integrazione log di Microsoft Azure**</span><span class="sxs-lookup"><span data-stu-id="d5ead-214">Navigate to **c:\Program Files\Microsoft Azure Log Integration**</span></span>
 9. <span data-ttu-id="d5ead-215">Eseguire ``Azlog source add <FriendlyNameForTheSource> WAD <StorageAccountName> <StorageKey> ``</span><span class="sxs-lookup"><span data-stu-id="d5ead-215">Run ``Azlog source add <FriendlyNameForTheSource> WAD <StorageAccountName> <StorageKey> ``</span></span> </br> <span data-ttu-id="d5ead-216">Ad esempio ``Azlog source add Azlogtest WAD Azlog9414 fxxxFxxxxxxxxywoEJK2xxxxxxxxxixxxJ+xVJx6m/X5SQDYc4Wpjpli9S9Mm+vXS2RVYtp1mes0t9H5cuqXEw==`` se si vuole che l'ID sottoscrizione venga visualizzato nell'XML dell'evento, aggiungere l'ID sottoscrizione al nome descrittivo: ``Azlog source add <FriendlyNameForTheSource>.<SubscriptionID> WAD <StorageAccountName> <StorageKey>`` o ad esempio ``Azlog source add Azlogtest.YourSubscriptionID WAD Azlog9414 fxxxFxxxxxxxxywoEJK2xxxxxxxxxixxxJ+xVJx6m/X5SQDYc4Wpjpli9S9Mm+vXS2RVYtp1mes0t9H5cuqXEw==``</span><span class="sxs-lookup"><span data-stu-id="d5ead-216">For example ``Azlog source add Azlogtest WAD Azlog9414 fxxxFxxxxxxxxywoEJK2xxxxxxxxxixxxJ+xVJx6m/X5SQDYc4Wpjpli9S9Mm+vXS2RVYtp1mes0t9H5cuqXEw==`` If you would like the subscription ID to show up in the event XML, append the subscription ID to the friendly name: ``Azlog source add <FriendlyNameForTheSource>.<SubscriptionID> WAD <StorageAccountName> <StorageKey>`` or for example, ``Azlog source add Azlogtest.YourSubscriptionID WAD Azlog9414 fxxxFxxxxxxxxywoEJK2xxxxxxxxxixxxJ+xVJx6m/X5SQDYc4Wpjpli9S9Mm+vXS2RVYtp1mes0t9H5cuqXEw==``</span></span>

>[!NOTE]  
<span data-ttu-id="d5ead-217">Attendere 60 minuti quindi visualizzare gli eventi che vengono estratti dall'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d5ead-217">Wait up to 60 minutes, then view the events that are pulled from the storage account.</span></span> <span data-ttu-id="d5ead-218">Per visualizzarli, aprire **Visualizzatore eventi > Registri di Windows > Eventi inoltrati** nell'integratore Azlog.</span><span class="sxs-lookup"><span data-stu-id="d5ead-218">To view, open **Event Viewer > Windows Logs > Forwarded Events** on the Azlog Integrator.</span></span>

<span data-ttu-id="d5ead-219">Di seguito è disponibile un video che illustra i passaggi descritti in precedenza.</span><span class="sxs-lookup"><span data-stu-id="d5ead-219">Here you can see a video going over the steps covered above.</span></span>
> [!VIDEO https://channel9.msdn.com/Blogs/Azure-Security-Videos/Azure-Log-Integration-Videos-Enable-Diagnostics-and-Storage/player]


## <a name="what-if-data-is-not-showing-up-in-the-forwarded-events-folder"></a><span data-ttu-id="d5ead-220">Se i dati non vengono visualizzati nella cartella Eventi inoltrati?</span><span class="sxs-lookup"><span data-stu-id="d5ead-220">What if data is not showing up in the Forwarded Events folder?</span></span>
<span data-ttu-id="d5ead-221">Se, dopo un'ora, i dati non vengono visualizzati nella cartella **Eventi inoltrati** , procedere come segue:</span><span class="sxs-lookup"><span data-stu-id="d5ead-221">If after an hour data is not showing up in the **Forwarded Events** folder, then:</span></span>

1. <span data-ttu-id="d5ead-222">Controllare il computer che esegue il servizio Integrazione log di Azure e verificare che possa accedere ad Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-222">Check the machine running the Azure Log Integration service and confirm that it can access Azure.</span></span> <span data-ttu-id="d5ead-223">Per verificare la connettività, provare ad aprire il [portale di Azure](http://portal.azure.com) dal browser.</span><span class="sxs-lookup"><span data-stu-id="d5ead-223">To test connectivity, try to open the [Azure portal](http://portal.azure.com) from the browser.</span></span>
2. <span data-ttu-id="d5ead-224">Verificare che l'account utente **Azlog** abbia l'autorizzazione di scrittura per la cartella **users\Azlog**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-224">Make sure the user account **Azlog** has write permission on the folder **users\Azlog**.</span></span>
  <ol type="a">
   <li><span data-ttu-id="d5ead-225">Aprire **Esplora risorse** </span><span class="sxs-lookup"><span data-stu-id="d5ead-225">Open **Windows Explorer** </span></span></li>
  <li> <span data-ttu-id="d5ead-226">Passare a **C:\users** </span><span class="sxs-lookup"><span data-stu-id="d5ead-226">Navigate to **c:\users** </span></span></li>
  <li> <span data-ttu-id="d5ead-227">Fare clic con il pulsante destro del mouse su **C:\users\Azlog** </span><span class="sxs-lookup"><span data-stu-id="d5ead-227">Right click on **c:\users\Azlog** </span></span></li>
  <li> <span data-ttu-id="d5ead-228">Fare clic su **Protezione**  </span><span class="sxs-lookup"><span data-stu-id="d5ead-228">Click on **Security**  </span></span></li>
  <li> <span data-ttu-id="d5ead-229">Fare clic su **Servizio NT\Azlog** e controllare le autorizzazioni per l'account.</span><span class="sxs-lookup"><span data-stu-id="d5ead-229">Click on **NT Service\Azlog** and check the permissions for the account.</span></span> <span data-ttu-id="d5ead-230">Se l'account non è presente in questa scheda o se le autorizzazioni appropriate non sono attualmente visualizzate è possibile assegnare diritti all'account in questa scheda.</span><span class="sxs-lookup"><span data-stu-id="d5ead-230">If the account is missing from this tab or if the appropriate permissions are not currently showing you can grant the account rights in this tab.</span></span></li>
  </ol><span data-ttu-id="d5ead-231">
3. Verificare che l'account di archiviazione aggiunto nel comando **Azlog source add** sia elencato quando si esegue il comando **Azlog source list**.</span><span class="sxs-lookup"><span data-stu-id="d5ead-231">
3. Make sure the storage account added in the command **Azlog source add** is listed when you run the command **Azlog source list**.</span></span>
<span data-ttu-id="d5ead-232">4.</span><span class="sxs-lookup"><span data-stu-id="d5ead-232">4.</span></span> <span data-ttu-id="d5ead-233">Passare a **Visualizzatore eventi > Registri di Windows > Applicazione** per vedere se sono presenti errori segnalati dall'integrazione del log di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-233">Go to **Event Viewer > Windows Logs > Application** to see if there are any errors reported from the Azure log integration.</span></span>


<span data-ttu-id="d5ead-234">Se si verificano problemi durante l'installazione e la configurazione, aprire una [richiesta di supporto](../azure-supportability/how-to-create-azure-support-request.md) e selezionare **Integrazione log** come servizio per cui si richiede il supporto.</span><span class="sxs-lookup"><span data-stu-id="d5ead-234">If you run into any issues during the installation and configuration, please open a [support request](../azure-supportability/how-to-create-azure-support-request.md), select **Log Integration** as the service for which you are requesting support.</span></span>

<span data-ttu-id="d5ead-235">Un'altra possibilità per ottenere assistenza è il [forum MSDN su Integrazione log di Azure](https://social.msdn.microsoft.com/Forums/home?forum=AzureLogIntegration).</span><span class="sxs-lookup"><span data-stu-id="d5ead-235">Another support option is the [Azure Log Integration MSDN Forum](https://social.msdn.microsoft.com/Forums/home?forum=AzureLogIntegration).</span></span> <span data-ttu-id="d5ead-236">Qui i membri della community possono aiutarsi reciprocamente con domande, risposte, suggerimenti e trucchi su come ottenere il massimo da Integrazione log di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-236">Here the community can support each other with questions, answers, tips, and tricks on how to get the most out of Azure Log Integration.</span></span> <span data-ttu-id="d5ead-237">Inoltre, il team di Integrazione log di Azure monitora questo forum e offrirà il suo contributo quando possibile.</span><span class="sxs-lookup"><span data-stu-id="d5ead-237">In addition, the Azure Log Integration team monitors this forum and will help whenever we can.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d5ead-238">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="d5ead-238">Next steps</span></span>
<span data-ttu-id="d5ead-239">Per altre informazioni su Integrazione log di Azure, vedere i documenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="d5ead-239">To learn more about Azure Log Integration, see the following documents:</span></span>

* <span data-ttu-id="d5ead-240">[Microsoft Azure Log Integration](https://www.microsoft.com/download/details.aspx?id=53324) (Integrazione log di Microsoft Azure) - Area download per informazioni dettagliate, requisiti di sistema e istruzioni di installazione per l'integrazione dei log di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-240">[Microsoft Azure Log Integration for Azure logs](https://www.microsoft.com/download/details.aspx?id=53324) – Download Center for details, system requirements, and install instructions on Azure log integration.</span></span>
* <span data-ttu-id="d5ead-241">[Introduzione all'integrazione dei log di Azure](security-azure-log-integration-overview.md) – Questo documento presenta l'integrazione dei log di Azure, le funzionalità chiave e il funzionamento.</span><span class="sxs-lookup"><span data-stu-id="d5ead-241">[Introduction to Azure log integration](security-azure-log-integration-overview.md) – This document introduces you to Azure log integration, its key capabilities, and how it works.</span></span>
* <span data-ttu-id="d5ead-242">[Passaggi per la configurazione dei partner](https://blogs.msdn.microsoft.com/azuresecurity/2016/08/23/azure-log-siem-configuration-steps/) – Questo post di blog mostra come configurare l'integrazione dei log di Azure per lavorare con le soluzioni partner Splunk, HP ArcSight e IBM QRadar.</span><span class="sxs-lookup"><span data-stu-id="d5ead-242">[Partner configuration steps](https://blogs.msdn.microsoft.com/azuresecurity/2016/08/23/azure-log-siem-configuration-steps/) – This blog post shows you how to configure Azure log integration to work with partner solutions Splunk, HP ArcSight, and IBM QRadar.</span></span> <span data-ttu-id="d5ead-243">Si tratta delle attuali linea guida sulla configurazione di componenti SIEM.</span><span class="sxs-lookup"><span data-stu-id="d5ead-243">This is our current guidance on how to configure the SIEM components.</span></span> <span data-ttu-id="d5ead-244">Per altri dettagli, contattare prima di tutto il fornitore SIEM.</span><span class="sxs-lookup"><span data-stu-id="d5ead-244">Please check with your SIEM vendor first for additional details.</span></span>
* <span data-ttu-id="d5ead-245">[Domande frequenti sull'integrazione dei log di Azure](security-azure-log-integration-faq.md) - Queste domande frequenti riguardano l'integrazione dei log di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-245">[Azure log Integration frequently asked questions (FAQ)](security-azure-log-integration-faq.md) - This FAQ answers questions about Azure log integration.</span></span>
* <span data-ttu-id="d5ead-246">[Integrazione degli avvisi del Centro sicurezza con l'integrazione dei log di Azure](../security-center/security-center-integrating-alerts-with-log-integration.md) - Questo documento mostra come sincronizzare gli avvisi del Centro sicurezza di Azure, insieme agli eventi di sicurezza delle macchine virtuali raccolti da Diagnostica di Azure e dai log attività di Azure, con la propria soluzione SIEM o di analisi dei log.</span><span class="sxs-lookup"><span data-stu-id="d5ead-246">[Integrating Security Center alerts with Azure log Integration](../security-center/security-center-integrating-alerts-with-log-integration.md) – This document shows you how to sync Security Center alerts, along with virtual machine security events collected by Azure Diagnostics and Azure Activity Logs, with your log analytics or SIEM solution.</span></span>
* <span data-ttu-id="d5ead-247">[Nuove funzionalità per Diagnostica di Azure e i log di controllo di Azure](https://azure.microsoft.com/blog/new-features-for-azure-diagnostics-and-azure-audit-logs/) - Questo post di blog presenta i log di controllo di Azure e altre funzionalità che consentono di ottenere informazioni dettagliate sulle operazioni delle risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="d5ead-247">[New features for Azure diagnostics and Azure Audit Logs](https://azure.microsoft.com/blog/new-features-for-azure-diagnostics-and-azure-audit-logs/) – This blog post introduces you to Azure Audit Logs and other features that help you gain insights into the operations of your Azure resources.</span></span>
