---
title: Rallentamento delle prestazioni dell'app Web nel servizio app | Documentazione Microsoft
description: Questo articolo fornisce informazioni utili per la risoluzione dei rallentamenti delle prestazioni delle app Web nel Servizio app di Azure.
services: app-service\web
documentationcenter: 
author: cephalin
manager: erikre
editor: 
tags: top-support-issue
keywords: prestazioni dell'applicazione Web, app lenta, rallentamento app
ms.assetid: b8783c10-3a4a-4dd6-af8c-856baafbdde5
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2016
ms.author: cephalin
ms.openlocfilehash: 1cfe7ec37ad8b24a8bd9ab2bf67e95675a57b675
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="troubleshoot-slow-web-app-performance-issues-in-azure-app-service"></a><span data-ttu-id="b8bdb-104">Risoluzione dei problemi di rallentamento delle prestazioni delle app Web nel Servizio app di Azure</span><span class="sxs-lookup"><span data-stu-id="b8bdb-104">Troubleshoot slow web app performance issues in Azure App Service</span></span>
<span data-ttu-id="b8bdb-105">Questo articolo fornisce informazioni utili per la risoluzione dei rallentamenti delle prestazioni delle app Web nel [Servizio app di Azure](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-105">This article helps you troubleshoot slow web app performance issues in [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span>

<span data-ttu-id="b8bdb-106">Se in qualsiasi punto dell'articolo sono necessarie altre informazioni, è possibile contattare gli esperti di Azure nei [forum MSDN e overflow dello stack relativi ad Azure](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-106">If you need more help at any point in this article, you can contact the Azure experts on [the MSDN Azure and the Stack Overflow forums](https://azure.microsoft.com/support/forums/).</span></span> <span data-ttu-id="b8bdb-107">In alternativa, è anche possibile archiviare un evento imprevisto di supporto tecnico di Azure.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-107">Alternatively, you can also file an Azure support incident.</span></span> <span data-ttu-id="b8bdb-108">Passare al [sito di supporto per Azure](https://azure.microsoft.com/support/options/) e fare clic su **Ottenere supporto**.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-108">Go to the [Azure Support site](https://azure.microsoft.com/support/options/) and click on **Get Support**.</span></span>

## <a name="symptom"></a><span data-ttu-id="b8bdb-109">Sintomo</span><span class="sxs-lookup"><span data-stu-id="b8bdb-109">Symptom</span></span>
<span data-ttu-id="b8bdb-110">Quando si esplora l'app Web, le pagine vengono caricate lentamente e a volte si verifica il timeout.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-110">When you browse the web app, the pages load slowly and sometimes timeout.</span></span>

## <a name="cause"></a><span data-ttu-id="b8bdb-111">Causa</span><span class="sxs-lookup"><span data-stu-id="b8bdb-111">Cause</span></span>
<span data-ttu-id="b8bdb-112">Spesso la causa dell'errore deriva da problemi a livello dell'applicazione, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="b8bdb-112">This problem is often caused by application level issues, such as:</span></span>

* <span data-ttu-id="b8bdb-113">le richieste di rete impiegano troppo tempo</span><span class="sxs-lookup"><span data-stu-id="b8bdb-113">network requests taking a long time</span></span>
* <span data-ttu-id="b8bdb-114">il codice dell'applicazione o le query di database non sono efficienti</span><span class="sxs-lookup"><span data-stu-id="b8bdb-114">application code or database queries being inefficient</span></span>
* <span data-ttu-id="b8bdb-115">utilizzo elevato di memoria/CPU da parte dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="b8bdb-115">application using high memory/CPU</span></span>
* <span data-ttu-id="b8bdb-116">arresto anomalo dell'applicazione a causa di un'eccezione</span><span class="sxs-lookup"><span data-stu-id="b8bdb-116">application crashing due to an exception</span></span>

## <a name="troubleshooting-steps"></a><span data-ttu-id="b8bdb-117">Passaggi per la risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="b8bdb-117">Troubleshooting steps</span></span>
<span data-ttu-id="b8bdb-118">La risoluzione dei problemi prevede tre attività distinte, in ordine sequenziale:</span><span class="sxs-lookup"><span data-stu-id="b8bdb-118">Troubleshooting can be divided into three distinct tasks, in sequential order:</span></span>

1. [<span data-ttu-id="b8bdb-119">Osservare e monitorare il comportamento dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="b8bdb-119">Observe and monitor application behavior</span></span>](#observe)
2. [<span data-ttu-id="b8bdb-120">Raccogliere i dati</span><span class="sxs-lookup"><span data-stu-id="b8bdb-120">Collect data</span></span>](#collect)
3. [<span data-ttu-id="b8bdb-121">Attenuare il problema</span><span class="sxs-lookup"><span data-stu-id="b8bdb-121">Mitigate the issue</span></span>](#mitigate)

<span data-ttu-id="b8bdb-122">[app Web del servizio app](/services/app-service/web/) vengono presentate diverse opzioni per ogni passaggio.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-122">[App Service Web Apps](/services/app-service/web/) gives you various options at each step.</span></span>

<a name="observe" />

### <a name="1-observe-and-monitor-application-behavior"></a><span data-ttu-id="b8bdb-123">1. Osservare e monitorare il comportamento dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="b8bdb-123">1. Observe and monitor application behavior</span></span>
#### <a name="track-service-health"></a><span data-ttu-id="b8bdb-124">Tenere traccia dell'integrità del servizio</span><span class="sxs-lookup"><span data-stu-id="b8bdb-124">Track Service health</span></span>
<span data-ttu-id="b8bdb-125">Microsoft Azure pubblica un annuncio ogni volta che si verifica un'interruzione del servizio o una riduzione delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-125">Microsoft Azure publicizes each time there is a service interruption or performance degradation.</span></span> <span data-ttu-id="b8bdb-126">È possibile verificare l'integrità del servizio nel [portale di Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-126">You can track the health of the service on the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="b8bdb-127">Per altre informazioni, vedere [Tenere traccia dell’integrità del servizio](../monitoring-and-diagnostics/insights-service-health.md).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-127">For more information, see [Track service health](../monitoring-and-diagnostics/insights-service-health.md).</span></span>

#### <a name="monitor-your-web-app"></a><span data-ttu-id="b8bdb-128">Monitorare l'app Web</span><span class="sxs-lookup"><span data-stu-id="b8bdb-128">Monitor your web app</span></span>
<span data-ttu-id="b8bdb-129">Questa opzione consente di trovare eventuali problemi nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-129">This option enables you to find out if your application is having any issues.</span></span> <span data-ttu-id="b8bdb-130">Nel pannello dell'app Web fare clic sul riquadro **Richieste ed errori** .</span><span class="sxs-lookup"><span data-stu-id="b8bdb-130">In your web app’s blade, click the **Requests and errors** tile.</span></span> <span data-ttu-id="b8bdb-131">Il pannello **Metrica** mostra tutte le metriche che si possono aggiungere.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-131">The **Metric** blade shows you all the metrics you can add.</span></span>

<span data-ttu-id="b8bdb-132">Le metriche più comunemente monitorate per le app Web sono</span><span class="sxs-lookup"><span data-stu-id="b8bdb-132">Some of the metrics that you might want to monitor for your web app are</span></span>

* <span data-ttu-id="b8bdb-133">Working set della memoria medio</span><span class="sxs-lookup"><span data-stu-id="b8bdb-133">Average memory working set</span></span>
* <span data-ttu-id="b8bdb-134">Tempo di risposta medio</span><span class="sxs-lookup"><span data-stu-id="b8bdb-134">Average response time</span></span>
* <span data-ttu-id="b8bdb-135">Tempo CPU</span><span class="sxs-lookup"><span data-stu-id="b8bdb-135">CPU time</span></span>
* <span data-ttu-id="b8bdb-136">Working set della memoria</span><span class="sxs-lookup"><span data-stu-id="b8bdb-136">Memory working set</span></span>
* <span data-ttu-id="b8bdb-137">Requests</span><span class="sxs-lookup"><span data-stu-id="b8bdb-137">Requests</span></span>

![monitoraggio delle prestazioni dell'app Web](./media/app-service-web-troubleshoot-performance-degradation/1-monitor-metrics.png)

<span data-ttu-id="b8bdb-139">Per altre informazioni, vedere:</span><span class="sxs-lookup"><span data-stu-id="b8bdb-139">For more information, see:</span></span>

* [<span data-ttu-id="b8bdb-140">Eseguire il monitoraggio delle app Web nel servizio app di Azure</span><span class="sxs-lookup"><span data-stu-id="b8bdb-140">Monitor Web Apps in Azure App Service</span></span>](web-sites-monitor.md)
* [<span data-ttu-id="b8bdb-141">Ricevere notifiche di avviso</span><span class="sxs-lookup"><span data-stu-id="b8bdb-141">Receive alert notifications</span></span>](../monitoring-and-diagnostics/insights-receive-alert-notifications.md)

#### <a name="monitor-web-endpoint-status"></a><span data-ttu-id="b8bdb-142">Monitorare lo stato degli endpoint</span><span class="sxs-lookup"><span data-stu-id="b8bdb-142">Monitor web endpoint status</span></span>
<span data-ttu-id="b8bdb-143">Se si esegue l'app Web nel piano tariffario **Standard**, App Web consente di monitorare due endpoint da tre aree geografiche.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-143">If you are running your web app in the **Standard** pricing tier, Web Apps lets you monitor two endpoints from three geographic locations.</span></span>

<span data-ttu-id="b8bdb-144">Il monitoraggio degli endpoint configura i test Web da posizioni distribuite a livello geografico che testano il tempo di risposta e di attività degli URL Web.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-144">Endpoint monitoring configures web tests from geo-distributed locations that test response time and uptime of web URLs.</span></span> <span data-ttu-id="b8bdb-145">Il test esegue un'operazione HTTP GET sull'URL Web per determinare il tempo di risposta e di attività da ogni posizione.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-145">The test performs an HTTP GET operation on the web URL to determine the response time and uptime from each location.</span></span> <span data-ttu-id="b8bdb-146">Ogni posizione configurata esegue un testo ogni cinque minuti.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-146">Each configured location runs a test every five minutes.</span></span>

<span data-ttu-id="b8bdb-147">Il tempo di attività viene monitorato mediante codici di risposta HTTP e il tempo di risposta è misurato in millisecondi.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-147">Uptime is monitored using HTTP response codes, and response time is measured in milliseconds.</span></span> <span data-ttu-id="b8bdb-148">Un test di monitoraggio ha esito negativo se il codice della risposta HTTP è maggiore di o uguale a 400 o se la risposta richiede più di 30 secondi.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-148">A monitoring test fails if the HTTP response code is greater than or equal to 400 or if the response takes more than 30 seconds.</span></span> <span data-ttu-id="b8bdb-149">Un endpoint è considerato disponibile se il test di monitoraggio ha esito positivo da tutte le posizioni specificate.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-149">An endpoint is considered available if its monitoring tests succeed from all the specified locations.</span></span>

<span data-ttu-id="b8bdb-150">Per configurarlo, vedere [Eseguire il monitoraggio delle app nel servizio app di Azure](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-150">To set it up, see [Monitor apps in Azure App Service](web-sites-monitor.md).</span></span>

<span data-ttu-id="b8bdb-151">Per altre informazioni sul monitoraggio degli endpoint, vedere anche il video che illustra come [mantenere attivi i siti Web di Azure e monitorare gli endpoint con Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) .</span><span class="sxs-lookup"><span data-stu-id="b8bdb-151">Also, see [Keeping Azure Web Sites up plus Endpoint Monitoring - with Stefan Schackow](https://channel9.msdn.com/Shows/Azure-Friday/Keeping-Azure-Web-Sites-up-plus-Endpoint-Monitoring-with-Stefan-Schackow) for a video on endpoint monitoring.</span></span>

#### <a name="application-performance-monitoring-using-extensions"></a><span data-ttu-id="b8bdb-152">Monitoraggio delle prestazioni dell'applicazione usando le estensioni</span><span class="sxs-lookup"><span data-stu-id="b8bdb-152">Application performance monitoring using Extensions</span></span>
<span data-ttu-id="b8bdb-153">È anche possibile monitorare le prestazioni dell'applicazione usando le *estensioni del sito*.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-153">You can also monitor your application performance by using *site extensions*.</span></span>

<span data-ttu-id="b8bdb-154">Ogni app Web del servizio app fornisce un endpoint di gestione estensibile che consente di usare un set avanzato di strumenti distribuiti come estensioni del sito.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-154">Each App Service web app provides an extensible management end point that allows you to use a powerful set of tools deployed as site extensions.</span></span> <span data-ttu-id="b8bdb-155">Le estensioni includono:</span><span class="sxs-lookup"><span data-stu-id="b8bdb-155">Extensions include:</span></span> 

- <span data-ttu-id="b8bdb-156">Editor di codice sorgente come [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-156">Source code editors like [Visual Studio Team Services](https://www.visualstudio.com/products/what-is-visual-studio-online-vs.aspx).</span></span> 
- <span data-ttu-id="b8bdb-157">Strumenti di gestione per risorse connesse come un database MySQL connesso a un'app Web.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-157">Management tools for connected resources such as a MySQL database connected to a web app.</span></span>

<span data-ttu-id="b8bdb-158">[Azure Application Insights](/services/application-insights/) e [New Relic](/marketplace/partners/newrelic/newrelic/) sono due delle estensioni disponibili di monitoraggio delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-158">[Azure Application Insights](/services/application-insights/) and [New Relic](/marketplace/partners/newrelic/newrelic/) are two of the performance monitoring site extensions that are available.</span></span> <span data-ttu-id="b8bdb-159">Per utilizzare New Relic, è necessario installare un agente in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-159">To use New Relic, you install an agent at runtime.</span></span> <span data-ttu-id="b8bdb-160">Per usare Azure Application Insights, è necessario ricompilare il codice con un SDK ed è anche possibile installare un'estensione che consente l'accesso a dati aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-160">To use Azure Application Insights, you rebuild your code with an SDK, and you can also install an extension that provides access to additional data.</span></span> <span data-ttu-id="b8bdb-161">SDK consente di scrivere il codice per monitorare l'utilizzo e prestazioni dell'applicazione in modo più dettagliato.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-161">The SDK lets you write code to monitor the usage and performance of your app in more detail.</span></span>

<span data-ttu-id="b8bdb-162">Per usare Application Insights, vedere [Monitorare le prestazioni di applicazioni Web](../application-insights/app-insights-web-monitor-performance.md).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-162">To use Application Insights, see [Monitor performance in web applications](../application-insights/app-insights-web-monitor-performance.md).</span></span>

<span data-ttu-id="b8bdb-163">Per usare New Relic, vedere [Gestione delle prestazioni delle applicazioni con New Relic in Siti Web di Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-163">To use New Relic, see [New Relic Application Performance Management on Azure](../store-new-relic-cloud-services-dotnet-application-performance-management.md).</span></span>

<a name="collect" />

### <a name="2-collect-data"></a><span data-ttu-id="b8bdb-164">2. Raccogliere i dati</span><span class="sxs-lookup"><span data-stu-id="b8bdb-164">2. Collect data</span></span>
<span data-ttu-id="b8bdb-165">L'ambiente App Web offre funzionalità diagnostiche per la registrazione di informazioni sia dal server Web sia dall'applicazione Web,</span><span class="sxs-lookup"><span data-stu-id="b8bdb-165">The Web Apps environment provides diagnostic functionality for logging information from both the web server and the web application.</span></span> <span data-ttu-id="b8bdb-166">separate in diagnostica del server Web e diagnostica delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-166">The information is separated into web server diagnostics and application diagnostics.</span></span>

#### <a name="enable-web-server-diagnostics"></a><span data-ttu-id="b8bdb-167">Abilitare la diagnostica del server Web</span><span class="sxs-lookup"><span data-stu-id="b8bdb-167">Enable web server diagnostics</span></span>
<span data-ttu-id="b8bdb-168">È possibile abilitare o disabilitare i seguenti tipi di log:</span><span class="sxs-lookup"><span data-stu-id="b8bdb-168">You can enable or disable the following kinds of logs:</span></span>

* <span data-ttu-id="b8bdb-169">**Registrazione degli errori dettagliata**: consente di registrare informazioni dettagliate sugli errori relativi ai codici di stato HTTP che indicano un'operazione non riuscita (codice di stato 400 o superiore),</span><span class="sxs-lookup"><span data-stu-id="b8bdb-169">**Detailed Error Logging** - Detailed error information for HTTP status codes that indicate a failure (status code 400 or greater).</span></span> <span data-ttu-id="b8bdb-170">incluse eventualmente le informazioni che aiutano a determinare il motivo per cui il server ha restituito il codice di errore.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-170">This may contain information that can help determine why the server returned the error code.</span></span>
* <span data-ttu-id="b8bdb-171">**Traccia delle richieste non riuscita** : consente di registrare informazioni dettagliate sulle richieste non riuscite, inclusa una traccia dei componenti IIS utilizzati per elaborare la richieste e il tempo impiegato in ciascun componente.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-171">**Failed Request Tracing** - Detailed information on failed requests, including a trace of the IIS components used to process the request and the time taken in each component.</span></span> <span data-ttu-id="b8bdb-172">Ciò può essere utile se si sta provando a migliorare le prestazioni delle app Web o a isolare la causa di un errore HTTP specifico.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-172">This can be useful if you are attempting to improve web app performance or isolate what is causing a specific HTTP error.</span></span>
* <span data-ttu-id="b8bdb-173">**Registrazione del server Web** : consente di registrare informazioni sulle transazioni HTTP tramite il formato di file di log esteso W3C.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-173">**Web Server Logging** - Information about HTTP transactions using the W3C extended log file format.</span></span> <span data-ttu-id="b8bdb-174">Ciò è utile nel determinare le metriche generali dell'app Web, ad esempio il numero delle richieste gestite oppure quante di esse provengono da uno specifico indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-174">This is useful when determining overall web app metrics, such as the number of requests handled or how many requests are from a specific IP address.</span></span>

#### <a name="enable-application-diagnostics"></a><span data-ttu-id="b8bdb-175">Abilitare la diagnostica delle applicazioni</span><span class="sxs-lookup"><span data-stu-id="b8bdb-175">Enable application diagnostics</span></span>
<span data-ttu-id="b8bdb-176">Esistono diverse opzioni per raccogliere dati sulle prestazioni dell'applicazione da App Web, profilare l'applicazione in tempo reale da Visual Studio oppure modificare il codice dell'applicazione per registrare altre informazioni e tracce.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-176">There are several options to collect application performance data from Web Apps, profile your application live from Visual Studio, or modify your application code to log more information and traces.</span></span> <span data-ttu-id="b8bdb-177">È possibile scegliere le opzioni in base al livello di accesso consentito all'applicazione e ai dati osservati tramite gli strumenti di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-177">You can choose the options based on how much access you have to the application and what you observed from the monitoring tools.</span></span>

##### <a name="use-application-insights-profiler"></a><span data-ttu-id="b8bdb-178">Usare Application Insights Profiler</span><span class="sxs-lookup"><span data-stu-id="b8bdb-178">Use Application Insights Profiler</span></span>
<span data-ttu-id="b8bdb-179">È possibile abilitare Application Insights Profiler per avviare l'acquisizione di tracce dettagliate delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-179">You can enable the Application Insights Profiler to start capturing detailed performance traces.</span></span> <span data-ttu-id="b8bdb-180">È possibile accedere alle tracce acquisite fino a cinque giorni prima, quando occorre analizzare i problemi che si sono verificati in passato.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-180">You can access traces captured up to five days ago when you need to investigate problems happened in the past.</span></span> <span data-ttu-id="b8bdb-181">È possibile scegliere questa opzione, a condizione che sia disponibile l'accesso alla risorsa Application Insights dell'app Web nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-181">You can choose this option as long as you have access to the web app's Application Insights resource on Azure portal.</span></span>

<span data-ttu-id="b8bdb-182">Application Insights Profiler offre statistiche sui tempi di risposta per ogni chiamata Web e tracce che indicano la riga del codice che ha causato risposte lente.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-182">Application Insights Profiler provides statistics on response time for each web call and traces that indicates which line of code caused the slow responses.</span></span> <span data-ttu-id="b8bdb-183">In alcuni casi l'app del servizio app è lenta perché una parte del codice non scritta in modo efficiente.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-183">Sometimes the App Service app is slow because certain code is not written in a performant way.</span></span> <span data-ttu-id="b8bdb-184">È possibile ad esempio che siano presenti un codice sequenziale che può essere eseguito in parallelo e conflitti di blocco di database non previsti.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-184">Examples include sequential code that can be run in parallel and undesired database lock contentions.</span></span> <span data-ttu-id="b8bdb-185">La rimozione di questi colli di bottiglia nel codice migliora le prestazioni dell'app. Questi colli di bottiglia tuttavia risultano difficili da rilevare se non vengono configurati tracce e log elaborati.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-185">Removing these bottlenecks in the code increases the app's performance, but they are hard to detect without setting up elaborate traces and logs.</span></span> <span data-ttu-id="b8bdb-186">Le tracce raccolte da Application Insights Profiler sono utili per identificare le righe di codice che rallentano l'applicazione e consentono di risolvere questa problematica per le app del servizio app.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-186">The traces collected by Application Insights Profiler helps identifying the lines of code that slows down the application and overcome this challenge for App Service apps.</span></span>

 <span data-ttu-id="b8bdb-187">Per altre informazioni, vedere [Profilatura delle app Web di Azure attive con Application Insights](../application-insights/app-insights-profiler.md).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-187">For more information, see [Profiling live Azure web apps with Application Insights](../application-insights/app-insights-profiler.md).</span></span>

##### <a name="use-remote-profiling"></a><span data-ttu-id="b8bdb-188">Usare la profilatura remota</span><span class="sxs-lookup"><span data-stu-id="b8bdb-188">Use Remote Profiling</span></span>
<span data-ttu-id="b8bdb-189">Nel servizio app di Azure è possibile profilare in modalità remota app Web, app per le API e processi Web.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-189">In Azure App Service, Web Apps, API Apps, and WebJobs can be remotely profiled.</span></span> <span data-ttu-id="b8bdb-190">Scegliere questa opzione se si ha accesso alla risorsa app Web e si sa come riprodurre il problema o se si conosce l'intervallo di tempo esatto in cui si verifica il problema di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-190">Choose this option if you have access to the web app resource and you know how to reproduce the issue, or if you know the exact time interval the performance issue happens.</span></span>

<span data-ttu-id="b8bdb-191">La profilatura remota è utile se l'utilizzo della CPU da parte del processo è elevato e l'esecuzione del processo è più lenta del previsto o se la latenza delle richieste HTTP è superiore al normale. In questi casi è possibile profilare il processo in modalità remota e ottenere campioni di stack di chiamate della CPU per analizzare l'attività del processo e i percorsi critici del codice.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-191">Remote Profiling is useful if the CPU usage of the process is high and your process is running slower than expected, or the latency of HTTP requests are higher than normal, you can remotely profile your process and get the CPU sampling call stacks to analyze the process activity and code hot paths.</span></span>

<span data-ttu-id="b8bdb-192">Per altre informazioni, vedere [Remote Profiling support in Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service) (Supporto della profilatura remota in Servizio app di Azure).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-192">For more information, see [Remote Profiling support in Azure App Service](https://azure.microsoft.com/blog/remote-profiling-support-in-azure-app-service).</span></span>

##### <a name="set-up-diagnostic-traces-manually"></a><span data-ttu-id="b8bdb-193">Configurare manualmente le tracce di diagnostica</span><span class="sxs-lookup"><span data-stu-id="b8bdb-193">Set up diagnostic traces manually</span></span>
<span data-ttu-id="b8bdb-194">Se si ha accesso al codice sorgente dell'applicazione Web, la diagnostica delle applicazioni consente di acquisire le informazioni prodotte da un'applicazione Web.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-194">If you have access to the web application source code, Application diagnostics enables you to capture information produced by a web application.</span></span> <span data-ttu-id="b8bdb-195">Le applicazioni ASP.NET possono usare la classe `System.Diagnostics.Trace` per registrare le informazioni nel log di diagnostica applicazioni.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-195">ASP.NET applications can use the `System.Diagnostics.Trace` class to log information to the application diagnostics log.</span></span> <span data-ttu-id="b8bdb-196">È tuttavia necessario modificare il codice o ridistribuire l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-196">However, you need to change the code and redeploy your application.</span></span> <span data-ttu-id="b8bdb-197">Questo metodo è consigliato se l'app è in esecuzione in un ambiente di testing.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-197">This method is recommended if your app is running on a testing environment.</span></span>

<span data-ttu-id="b8bdb-198">Per istruzioni dettagliate su come configurare l'applicazione per la registrazione, vedere [Abilitare la registrazione diagnostica per le app Web nel servizio app di Azure](web-sites-enable-diagnostic-log.md).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-198">For detailed instructions on how to configure your application for logging, see [Enable diagnostics logging for web apps in Azure App Service](web-sites-enable-diagnostic-log.md).</span></span>

#### <a name="use-the-azure-app-service-support-portal"></a><span data-ttu-id="b8bdb-199">Usare il portale di supporto del Servizio app di Azure</span><span class="sxs-lookup"><span data-stu-id="b8bdb-199">Use the Azure App Service support portal</span></span>
<span data-ttu-id="b8bdb-200">Il servizio app Web consente di risolvere i problemi relativi all'app Web grazie ai dati disponibili nei log HTTP, nei log eventi, nei dump dei processi e così via.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-200">Web Apps provides you with the ability to troubleshoot issues related to your web app by looking at HTTP logs, event logs, process dumps, and more.</span></span> <span data-ttu-id="b8bdb-201">È possibile accedere a tutte queste informazioni tramite il portale di supporto disponibile all'indirizzo **http://&lt;nome app>.scm.azurewebsites.net/Support**</span><span class="sxs-lookup"><span data-stu-id="b8bdb-201">You can access all this information using our Support portal at **http://&lt;your app name>.scm.azurewebsites.net/Support**</span></span>

<span data-ttu-id="b8bdb-202">Il portale di supporto del servizio app di Azure contiene tre schede separate per supportare i tre passaggi di uno scenario di risoluzione dei problemi comune:</span><span class="sxs-lookup"><span data-stu-id="b8bdb-202">The Azure App Service support portal provides you with three separate tabs to support the three steps of a common troubleshooting scenario:</span></span>

1. <span data-ttu-id="b8bdb-203">Osservare il comportamento corrente</span><span class="sxs-lookup"><span data-stu-id="b8bdb-203">Observe current behavior</span></span>
2. <span data-ttu-id="b8bdb-204">Eseguire l'analisi tramite la raccolta di informazioni di diagnostica e l'esecuzione di analizzatori predefiniti</span><span class="sxs-lookup"><span data-stu-id="b8bdb-204">Analyze by collecting diagnostics information and running the built-in analyzers</span></span>
3. <span data-ttu-id="b8bdb-205">Attenuare il problema</span><span class="sxs-lookup"><span data-stu-id="b8bdb-205">Mitigate</span></span>

<span data-ttu-id="b8bdb-206">Nel momento in cui si riscontra il problema, fare clic su **Analizza** > **Diagnostica** > **Esegui diagnosi adesso** per creare una sessione di diagnostica in cui vengono raccolti log HTTP, log del visualizzatore eventi, dump della memoria, log degli errori PHP e report sui processi PHP.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-206">If the issue is happening right now, click **Analyze** > **Diagnostics** > **Diagnose Now** to create a diagnostic session for you, which collects HTTP logs, event viewer logs, memory dumps, PHP error logs, and PHP process report.</span></span>

<span data-ttu-id="b8bdb-207">Una volta raccolti i dati, il portale di supporto esegue un'analisi dei dati e genera un report HTML.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-207">Once the data is collected, the support portal runs an analysis on the data and provides you with an HTML report.</span></span>

<span data-ttu-id="b8bdb-208">Per impostazione predefinita, i dati verranno archiviati nella cartella D:\home\data\DaaS, da cui sarà possibile scaricarli.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-208">In case you want to download the data, by default, it would be stored in the D:\home\data\DaaS folder.</span></span>

<span data-ttu-id="b8bdb-209">Per altre informazioni sul portale di supporto di Servizio app di Azure, vedere [New Updates to Support Site Extension for Azure Websites](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites) (Nuovi aggiornamenti all'estensione del sito di supporto per Siti Web di Azure).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-209">For more information on the Azure App Service support portal, see [New Updates to Support Site Extension for Azure Websites](https://azure.microsoft.com/blog/new-updates-to-support-site-extension-for-azure-websites).</span></span>

#### <a name="use-the-kudu-debug-console"></a><span data-ttu-id="b8bdb-210">Usare la console di debug Kudu</span><span class="sxs-lookup"><span data-stu-id="b8bdb-210">Use the Kudu Debug Console</span></span>
<span data-ttu-id="b8bdb-211">Il servizio App Web include una console di debug che è possibile usare per il debug, l'esplorazione e il caricamento di file, nonché endpoint JSON per ottenere informazioni sull'ambiente in uso.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-211">Web Apps comes with a debug console that you can use for debugging, exploring, uploading files, as well as JSON endpoints for getting information about your environment.</span></span> <span data-ttu-id="b8bdb-212">Questa console è chiamata *console Kudu* o *dashboard SCM* dell'app Web.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-212">This console is called the *Kudu Console* or the *SCM Dashboard* for your web app.</span></span>

<span data-ttu-id="b8bdb-213">È possibile accedere a questo dashboard selezionando il collegamento **https://&lt;nome app>.scm.azurewebsites.net/**.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-213">You can access this dashboard by going to the link **https://&lt;Your app name>.scm.azurewebsites.net/**.</span></span>

<span data-ttu-id="b8bdb-214">Elementi forniti dalla console Kudu:</span><span class="sxs-lookup"><span data-stu-id="b8bdb-214">Some of the things that Kudu provides are:</span></span>

* <span data-ttu-id="b8bdb-215">impostazioni di ambiente per l'applicazione</span><span class="sxs-lookup"><span data-stu-id="b8bdb-215">environment settings for your application</span></span>
* <span data-ttu-id="b8bdb-216">log in streaming</span><span class="sxs-lookup"><span data-stu-id="b8bdb-216">log stream</span></span>
* <span data-ttu-id="b8bdb-217">dump di diagnostica</span><span class="sxs-lookup"><span data-stu-id="b8bdb-217">diagnostic dump</span></span>
* <span data-ttu-id="b8bdb-218">console di debug in cui è possibile eseguire cmdlet di PowerShell e comandi DOS di base.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-218">debug console in which you can run Powershell cmdlets and basic DOS commands.</span></span>

<span data-ttu-id="b8bdb-219">Inoltre, nel caso in cui l'applicazione generi eccezioni first-chance, è possibile usare Kudu e l'utilità della riga di comando Procdump dello strumento SysInternals per creare dump della memoria.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-219">Another useful feature of Kudu is that, in case your application is throwing first-chance exceptions, you can use Kudu and the SysInternals tool Procdump to create memory dumps.</span></span> <span data-ttu-id="b8bdb-220">I dump della memoria sono snapshot del processo e semplificano la risoluzione di problemi più complessi riscontrati nell'app Web.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-220">These memory dumps are snapshots of the process and can often help you troubleshoot more complicated issues with your web app.</span></span>

<span data-ttu-id="b8bdb-221">Per altre informazioni sulle funzionalità disponibili in Kudu, vedere il post di blog relativo agli [strumenti di Azure Websites Team Services che è opportuno conoscere](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-221">For more information on features available in Kudu, see [Azure Websites Team Services tools you should know about](https://azure.microsoft.com/blog/windows-azure-websites-online-tools-you-should-know-about/).</span></span>

<a name="mitigate" />

### <a name="3-mitigate-the-issue"></a><span data-ttu-id="b8bdb-222">3. Attenuare il problema</span><span class="sxs-lookup"><span data-stu-id="b8bdb-222">3. Mitigate the issue</span></span>
#### <a name="scale-the-web-app"></a><span data-ttu-id="b8bdb-223">Ridimensionare l'app Web</span><span class="sxs-lookup"><span data-stu-id="b8bdb-223">Scale the web app</span></span>
<span data-ttu-id="b8bdb-224">Nel servizio app di Azure, per ottimizzare le prestazioni e la velocità effettiva è possibile modificare la scalabilità in cui è in esecuzione l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-224">In Azure App Service, for increased performance and throughput,  you can adjust the scale at which you are running your application.</span></span> <span data-ttu-id="b8bdb-225">Ridimensionare un'app Web di Azure implica due azioni correlate: passare a un piano tariffario superiore e configurare determinate impostazioni una volta adottato il nuovo piano.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-225">Scaling up a web app involves two related actions: changing your App Service plan to a higher pricing tier, and configuring certain settings after you have switched to the higher pricing tier.</span></span>

<span data-ttu-id="b8bdb-226">Per altre informazioni sul ridimensionamento, vedere [Ridimensionare un'app Web nel servizio app di Azure](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-226">For more information on scaling, see [Scale a web app in Azure App Service](web-sites-scale.md).</span></span>

<span data-ttu-id="b8bdb-227">È anche possibile scegliere di eseguire l'applicazione in più di un'istanza.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-227">Additionally, you can choose to run your application on more than one instance.</span></span> <span data-ttu-id="b8bdb-228">La scalabilità orizzontale non consente solo di ottenere una maggiore capacità di elaborazione, ma anche di usufruire di un certo livello di tolleranza di errore.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-228">Scaling out not only provides you with more processing capability, but also gives you some amount of fault tolerance.</span></span> <span data-ttu-id="b8bdb-229">Se il processo si arresta in un'istanza, le altre istanze continuano a gestire le richieste.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-229">If the process goes down on one instance, the other instances continue to serve requests.</span></span>

<span data-ttu-id="b8bdb-230">È possibile impostare il ridimensionamento manuale o automatico.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-230">You can set the scaling to be Manual or Automatic.</span></span>

#### <a name="use-autoheal"></a><span data-ttu-id="b8bdb-231">Usare la funzionalità AutoHeal</span><span class="sxs-lookup"><span data-stu-id="b8bdb-231">Use AutoHeal</span></span>
<span data-ttu-id="b8bdb-232">La funzionalità AutoHeal consente di riciclare il processo di lavoro per l'app in base alle impostazioni specificate, ad esempio modifiche di configurazione, richieste, limiti basati sulla memoria o il tempo necessario per l'esecuzione di una richiesta.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-232">AutoHeal recycles the worker process for your app based on settings you choose (like configuration changes, requests, memory-based limits, or the time needed to execute a request).</span></span> <span data-ttu-id="b8bdb-233">Nella maggior parte dei casi, riciclare il processo costituisce il modo più veloce per risolvere un problema.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-233">Most of the time, recycle the process is the fastest way to recover from a problem.</span></span> <span data-ttu-id="b8bdb-234">Anche se è possibile riavviare l'app Web direttamente dall'interno del portale di Azure, la funzionalità AutoHeal esegue questa operazione automaticamente.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-234">Though you can always restart the web app from directly within the Azure portal, AutoHeal does it automatically for you.</span></span> <span data-ttu-id="b8bdb-235">È sufficiente aggiungere alcuni trigger nel file web.config radice per l'app Web.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-235">All you need to do is add some triggers in the root web.config for your web app.</span></span> <span data-ttu-id="b8bdb-236">Queste impostazioni funzionano allo stesso modo anche per le app non .NET.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-236">These settings would work in the same way even if your application is not a .Net app.</span></span>

<span data-ttu-id="b8bdb-237">Per altre informazioni, vedere il post di blog relativo alla [correzione automatica di Siti Web di Azure](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-237">For more information, see [Auto-Healing Azure Web Sites](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites/).</span></span>

#### <a name="restart-the-web-app"></a><span data-ttu-id="b8bdb-238">Riavviare l'app Web</span><span class="sxs-lookup"><span data-stu-id="b8bdb-238">Restart the web app</span></span>
<span data-ttu-id="b8bdb-239">Il riavvio è spesso il modo più semplice per risolvere problemi occasionali.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-239">Restarting is often the simplest way to recover from one-time issues.</span></span> <span data-ttu-id="b8bdb-240">Nel pannello dell'app Web del [portale di Azure](https://portal.azure.com/) sono disponibili le opzioni per arrestare o riavviare l'app.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-240">On the [Azure portal](https://portal.azure.com/), on your web app’s blade, you have the options to stop or restart your app.</span></span>

 ![riavviare l'app Web per risolvere i problemi di prestazioni](./media/app-service-web-troubleshoot-performance-degradation/2-restart.png)

<span data-ttu-id="b8bdb-242">È anche possibile gestire l'app Web usando Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b8bdb-242">You can also manage your web app using Azure Powershell.</span></span> <span data-ttu-id="b8bdb-243">Per altre informazioni, vedere [Uso di Azure PowerShell con Gestione risorse di Azure](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="b8bdb-243">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>
