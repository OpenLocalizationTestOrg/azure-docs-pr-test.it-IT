---
title: 'Azure Active Directory Domain Services: abilitare la delega vincolata Kerberos | Documentazione Microsoft'
description: Abilitare la delega vincolata Kerberos in domini gestiti di Azure Active Directory Domain Services
services: active-directory-ds
documentationcenter: 
author: mahesh-unnikrishnan
manager: stevenpo
editor: curtand
ms.assetid: 938a5fbc-2dd1-4759-bcce-628a6e19ab9d
ms.service: active-directory-ds
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/06/2017
ms.author: maheshu
ms.openlocfilehash: d32547c8018dd1f99c992e95a01d2711d460a261
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="configure-kerberos-constrained-delegation-kcd-on-a-managed-domain"></a><span data-ttu-id="1e2a2-103">Configurare la delega vincolata Kerberos (KCD) in un dominio gestito</span><span class="sxs-lookup"><span data-stu-id="1e2a2-103">Configure kerberos constrained delegation (KCD) on a managed domain</span></span>
<span data-ttu-id="1e2a2-104">Molte applicazioni necessitano risorse di tooaccess nel contesto di hello dell'utente hello.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-104">Many applications need tooaccess resources in hello context of hello user.</span></span> <span data-ttu-id="1e2a2-105">Active Directory supporta un meccanismo denominato delega Kerberos che consente questo caso d'uso.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-105">Active Directory supports a mechanism called Kerberos delegation, which enables this use-case.</span></span> <span data-ttu-id="1e2a2-106">Inoltre, è possibile limitare la delega in modo che solo le risorse specifiche accessibili nel contesto di hello dell'utente hello.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-106">Further, you can restrict delegation so that only specific resources can be accessed in hello context of hello user.</span></span> <span data-ttu-id="1e2a2-107">I domini gestiti di Azure AD Domain Services sono diversi dai domini di Active Directory tradizionali perché sono bloccati in modo più sicuro.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-107">Azure AD Domain Services managed domains are different from traditional Active Directory domains since they are more securely locked down.</span></span>

<span data-ttu-id="1e2a2-108">Questo articolo illustra come tooconfigure kerberos vincolata delega in un dominio gestito di servizi di dominio Active Directory di Azure.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-108">This article shows you how tooconfigure kerberos constrained delegation on an Azure AD Domain Services managed domain.</span></span>

## <a name="kerberos-constrained-delegation-kcd"></a><span data-ttu-id="1e2a2-109">Delega vincolata Kerberos (KCD)</span><span class="sxs-lookup"><span data-stu-id="1e2a2-109">Kerberos constrained delegation (KCD)</span></span>
<span data-ttu-id="1e2a2-110">La delega Kerberos consente un tooimpersonate account le risorse di un altro sicurezza tooaccess principale (ad esempio un utente).</span><span class="sxs-lookup"><span data-stu-id="1e2a2-110">Kerberos delegation enables an account tooimpersonate another security principal (such as a user) tooaccess resources.</span></span> <span data-ttu-id="1e2a2-111">Si consideri un'applicazione web che accede a un'API web back-end nel contesto di hello di un utente.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-111">Consider a web application that accesses a back-end web API in hello context of a user.</span></span> <span data-ttu-id="1e2a2-112">In questo esempio hello applicazione web (in esecuzione nel contesto di hello di un account del servizio o un account del computer o computer) rappresenta hello utente quando si accede a risorse hello (back-end web API).</span><span class="sxs-lookup"><span data-stu-id="1e2a2-112">In this example, hello web application (running in hello context of a service account or a computer/machine account) impersonates hello user when accessing hello resource (back-end web API).</span></span> <span data-ttu-id="1e2a2-113">Poiché non limita hello hello risorse rappresentazione account accessibile nel contesto di hello di hello utente, la delega Kerberos non è protetta.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-113">Kerberos delegation is insecure since it does not restrict hello resources hello impersonating account can access in hello context of hello user.</span></span>

<span data-ttu-id="1e2a2-114">La delega vincolata Kerberos (KCD) limita hello/risorse dei servizi toowhich hello specificato server possono operare per conto di hello di un utente.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-114">Kerberos constrained delegation (KCD) restricts hello services/resources toowhich hello specified server can act on hello behalf of a user.</span></span> <span data-ttu-id="1e2a2-115">La delega vincolata Kerberos tradizionali richiede tooconfigure privilegi di amministratore dominio un account di dominio per un servizio e limita singolo dominio tooa account hello.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-115">Traditional KCD requires domain administrator privileges tooconfigure a domain account for a service and it restricts hello account tooa single domain.</span></span>

<span data-ttu-id="1e2a2-116">Alla delega vincolata Kerberos tradizionale sono anche associati alcuni problemi.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-116">Traditional KCD also has a few issues associated with it.</span></span> <span data-ttu-id="1e2a2-117">Nei sistemi operativi precedenti in amministratore di dominio hello configurato il servizio di hello, amministratore del servizio hello non dispone di alcun tooknow un modo utile per i servizi front-end delegato servizi risorsa toohello che loro proprietà.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-117">In earlier operating systems where hello domain administrator configured hello service, hello service administrator had no useful way tooknow which front-end services delegated toohello resource services they owned.</span></span> <span data-ttu-id="1e2a2-118">E qualsiasi servizio front-end che può delegare tooa servizio relativo alle risorse rappresenta un potenziale punto di attacco.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-118">And any front-end service that could delegate tooa resource service represented a potential attack point.</span></span> <span data-ttu-id="1e2a2-119">È stato compromesso un server che ospita un servizio front-end, se è stato configurato toodelegate tooresource services, servizi di risorse hello inoltre potrebbe essere compromessa.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-119">If a server that hosted a front-end service was compromised, and it was configured toodelegate tooresource services, hello resource services could also be compromised.</span></span>

> [!NOTE]
> <span data-ttu-id="1e2a2-120">In un dominio gestito di Azure AD Domain Services non si hanno privilegi di amministratore di dominio.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-120">On an Azure AD Domain Services managed domain, you do not have domain administrator privileges.</span></span> <span data-ttu-id="1e2a2-121">Di conseguenza, **non è possibile configurare la delega vincolata Kerberos tradizionale in un dominio gestito**.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-121">Therefore, **traditional KCD cannot be configured on a managed domain**.</span></span> <span data-ttu-id="1e2a2-122">Usare la delega vincolata Kerberos basata su risorse, come illustrato in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-122">Use resource-based KCD as described in this article.</span></span> <span data-ttu-id="1e2a2-123">Questo meccanismo è anche più sicuro.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-123">This mechanism is also more secure.</span></span>
>
>

## <a name="resource-based-kerberos-constrained-delegation"></a><span data-ttu-id="1e2a2-124">Delega vincolata Kerberos basata sulle risorse</span><span class="sxs-lookup"><span data-stu-id="1e2a2-124">Resource-based kerberos constrained delegation</span></span>
<span data-ttu-id="1e2a2-125">In Windows Server 2012 R2 e Windows Server 2012, la delega vincolata tooconfigure possibilità hello per servizio hello è stata trasferita dall'amministratore del servizio toohello hello dominio amministratore.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-125">In Windows Server 2012 R2 and Windows Server 2012, hello ability tooconfigure constrained delegation for hello service has been transferred from hello domain administrator toohello service administrator.</span></span> <span data-ttu-id="1e2a2-126">In questo modo, amministratore del servizio back-end hello può consentire o negare i servizi front-end.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-126">In this way, hello back-end service administrator can allow or deny front-end services.</span></span> <span data-ttu-id="1e2a2-127">Questo modello è noto come **delega vincolata Kerberos basata sulle risorse**.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-127">This model is known as **resource-based kerberos constrained delegation**.</span></span>

<span data-ttu-id="1e2a2-128">È possibile configurare la delega vincolata Kerberos basata sulle risorse usando PowerShell.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-128">Resource-based KCD is configured using PowerShell.</span></span> <span data-ttu-id="1e2a2-129">Utilizzare Set-ADComputer hello o i cmdlet Set-ADUser, a seconda che hello rappresenta l'account sia un account computer o un account di servizio o account utente.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-129">You use hello Set-ADComputer or Set-ADUser cmdlets, depending on whether hello impersonating account is a computer account or a user account/service account.</span></span>

### <a name="configure-resource-based-kcd-for-a-computer-account-on-a-managed-domain"></a><span data-ttu-id="1e2a2-130">Configurare la delega vincolata Kerberos basata sulle risorse per un account del computer in un dominio gestito</span><span class="sxs-lookup"><span data-stu-id="1e2a2-130">Configure resource-based KCD for a computer account on a managed domain</span></span>
<span data-ttu-id="1e2a2-131">Si supponga di avere un'app web in esecuzione nel computer di hello ' contoso100-webapp.contoso100.com'.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-131">Assume you have a web app running on hello computer 'contoso100-webapp.contoso100.com'.</span></span> <span data-ttu-id="1e2a2-132">È necessario risorse hello tooaccess (un'API web in esecuzione in ' contoso100-api.contoso100.com') nel contesto di hello utenti del dominio.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-132">It needs tooaccess hello resource (a web API running on 'contoso100-api.contoso100.com') in hello context of domain users.</span></span> <span data-ttu-id="1e2a2-133">Di seguito viene illustrato come impostare la delega vincolata Kerberos basata su risorse per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-133">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADComputer -Identity contoso100-webapp.contoso100.com
Set-ADComputer contoso100-api.contoso100.com -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

### <a name="configure-resource-based-kcd-for-a-user-account-on-a-managed-domain"></a><span data-ttu-id="1e2a2-134">Configurare la delega vincolata Kerberos basata sulle risorse per un account utente in un dominio gestito</span><span class="sxs-lookup"><span data-stu-id="1e2a2-134">Configure resource-based KCD for a user account on a managed domain</span></span>
<span data-ttu-id="1e2a2-135">Si supponga che un'App web in esecuzione come account del servizio 'appsvc' e deve risorse hello tooaccess (un'API web in esecuzione come account del servizio - 'backendsvc') nel contesto di hello utenti del dominio.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-135">Assume you have a web app running as a service account 'appsvc' and it needs tooaccess hello resource (a web API running as a service account - 'backendsvc') in hello context of domain users.</span></span> <span data-ttu-id="1e2a2-136">Di seguito viene illustrato come impostare la delega vincolata Kerberos basata su risorse per questo scenario.</span><span class="sxs-lookup"><span data-stu-id="1e2a2-136">Here's how you would set up resource-based KCD for this scenario.</span></span>

```
$ImpersonatingAccount = Get-ADUser -Identity appsvc
Set-ADUser backendsvc -PrincipalsAllowedToDelegateToAccount $ImpersonatingAccount
```

## <a name="related-content"></a><span data-ttu-id="1e2a2-137">Contenuti correlati</span><span class="sxs-lookup"><span data-stu-id="1e2a2-137">Related Content</span></span>
* [<span data-ttu-id="1e2a2-138">Guida introduttiva di Azure AD Domain Services</span><span class="sxs-lookup"><span data-stu-id="1e2a2-138">Azure AD Domain Services - Getting Started guide</span></span>](active-directory-ds-getting-started.md)
* [<span data-ttu-id="1e2a2-139">Panoramica della delega vincolata Kerberos</span><span class="sxs-lookup"><span data-stu-id="1e2a2-139">Kerberos Constrained Delegation Overview</span></span>](https://technet.microsoft.com/library/jj553400.aspx)
