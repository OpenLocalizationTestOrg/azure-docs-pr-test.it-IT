



<span data-ttu-id="e4bc5-101">A seconda dell'ambiente e delle scelte effettuate, lo script può creare tutta l'infrastruttura del cluster, inclusi la rete virtuale di Azure, gli account di archiviazione, i servizi cloud, il controller di dominio, i database SQL locali o remoti, il nodo head e altri nodi del cluster.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-101">Depending on your environment and choices, the script can create all the cluster infrastructure, including the Azure virtual network, storage accounts, cloud services, domain controller, remote or local SQL databases, head node, and additional cluster nodes.</span></span> <span data-ttu-id="e4bc5-102">In alternativa, lo script può usare l'infrastruttura di Azure esistente e creare solo i nodi del cluster HPC.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-102">Alternatively, the script can use pre-existing Azure infrastructure and create only the HPC cluster nodes.</span></span>

<span data-ttu-id="e4bc5-103">Per informazioni generali sulla pianificazione di un cluster HPC Pack, vedere la [valutazione e pianificazione del prodotto](https://technet.microsoft.com/library/jj899596.aspx) e l'[introduzione](https://technet.microsoft.com/library/jj899590.aspx) nella libreria TechNet per HPC Pack 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-103">For background information about planning an HPC Pack cluster, see the [Product Evaluation and Planning](https://technet.microsoft.com/library/jj899596.aspx) and [Getting Started](https://technet.microsoft.com/library/jj899590.aspx) content in the HPC Pack 2012 R2 TechNet Library.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="e4bc5-104">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="e4bc5-104">Prerequisites</span></span>
* <span data-ttu-id="e4bc5-105">**Sottoscrizione di Azure**: è possibile usare una sottoscrizione nel servizio Azure globale o Azure Cina.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-105">**Azure subscription**: You can use a subscription in either the Azure Global or Azure China service.</span></span> <span data-ttu-id="e4bc5-106">I limiti della sottoscrizione riguardano il numero e il tipo di nodi del cluster che è possibile distribuire.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-106">Your subscription limits affect the number and type of cluster nodes you can deploy.</span></span> <span data-ttu-id="e4bc5-107">Per informazioni, vedere [Limiti, quote e vincoli delle sottoscrizioni e dei servizi di Microsoft Azure](../articles/azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="e4bc5-107">For information, see [Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md).</span></span>
* <span data-ttu-id="e4bc5-108">**Computer client Windows in cui è stato installato e configurato Azure PowerShell 0.8.10 o versioni successive**. Vedere [Introduzione ad Azure PowerShell](/powershell/azureps-cmdlets-docs) per le istruzioni di installazione e le operazioni per la connessione alla sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-108">**Windows client computer with Azure PowerShell 0.8.10 or later installed and configured**: See [Get started with Azure PowerShell](/powershell/azureps-cmdlets-docs) for installation instructions and steps to connect to your Azure subscription.</span></span>
* <span data-ttu-id="e4bc5-109">**Script di distribuzione di HPC Pack IaaS**: scaricare e decomprimere la versione più recente dello script dall'[Area download Microsoft](https://www.microsoft.com/download/details.aspx?id=44949).</span><span class="sxs-lookup"><span data-stu-id="e4bc5-109">**HPC Pack IaaS deployment script**: Download and unpack the latest version of the script from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span></span> <span data-ttu-id="e4bc5-110">Controllare la versione dello script eseguendolo `New-HPCIaaSCluster.ps1 –Version`.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-110">Check the version of the script by running `New-HPCIaaSCluster.ps1 –Version`.</span></span> <span data-ttu-id="e4bc5-111">Questo articolo si basa sulla versione 4.5.2 dello script.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-111">This article is based on version 4.5.2 of the script.</span></span>
* <span data-ttu-id="e4bc5-112">**File di configurazione script**: creare un file XML usato dallo script per configurare il cluster HPC.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-112">**Script configuration file**: Create an XML file that the script uses to configure the HPC cluster.</span></span> <span data-ttu-id="e4bc5-113">Per informazioni ed esempi, vedere le sezioni più avanti in questo articolo e il file Manual.rtf che accompagna lo script di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-113">For information and examples, see sections later in this article and the file Manual.rtf that accompanies the deployment script.</span></span>

## <a name="syntax"></a><span data-ttu-id="e4bc5-114">Sintassi</span><span class="sxs-lookup"><span data-stu-id="e4bc5-114">Syntax</span></span>
```PowerShell
New-HPCIaaSCluster.ps1 [-ConfigFile] <String> [-AdminUserName]<String> [[-AdminPassword] <String>] [[-HPCImageName] <String>] [[-LogFile] <String>] [-Force] [-NoCleanOnFailure] [-PSSessionSkipCACheck] [<CommonParameters>]
```
> [!NOTE]
> <span data-ttu-id="e4bc5-115">Eseguire lo script come amministratore.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-115">Run the script as an administrator.</span></span>
> 
> 

### <a name="parameters"></a><span data-ttu-id="e4bc5-116">parameters</span><span class="sxs-lookup"><span data-stu-id="e4bc5-116">Parameters</span></span>
* <span data-ttu-id="e4bc5-117">**ConfigFile**: specifica il percorso del file di configurazione che descrive il cluster HPC.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-117">**ConfigFile**: Specifies the file path of the configuration file to describe the HPC cluster.</span></span> <span data-ttu-id="e4bc5-118">Altre informazioni sul file di configurazione sono disponibili in questo argomento o nel file Manual.rtf, incluso nella cartella che contiene lo script.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-118">See more about the configuration file in this topic, or in the file Manual.rtf in the folder containing the script.</span></span>
* <span data-ttu-id="e4bc5-119">**AdminUserName**: specifica il nome utente.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-119">**AdminUserName**: Specifies the user name.</span></span> <span data-ttu-id="e4bc5-120">Se la foresta di domini viene creata dallo script, si tratta del nome utente amministratore locale per tutte le macchine virtuali, nonché del nome dell'amministratore di dominio.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-120">If the domain forest is created by the script, this becomes the local administrator user name for all VMs and the domain administrator name.</span></span> <span data-ttu-id="e4bc5-121">Se la foresta di domini esiste già, specifica l'utente di dominio come nome utente amministratore locale per installare HPC Pack.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-121">If the domain forest already exists, this specifies the domain user as the local administrator user name to install HPC Pack.</span></span>
* <span data-ttu-id="e4bc5-122">**AdminPassword**: specifica la password dell'amministratore.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-122">**AdminPassword**: Specifies the administrator’s password.</span></span> <span data-ttu-id="e4bc5-123">Se non è specificata nella riga di comando, lo script richiederà di immettere la password.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-123">If not specified in the command line, the script prompts you to input the password.</span></span>
* <span data-ttu-id="e4bc5-124">**HPCImageName** (facoltativo): specifica il nome immagine di macchina virtuale HPC Pack usato per distribuire il cluster HPC.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-124">**HPCImageName** (optional): Specifies the HPC Pack VM image name used to deploy the HPC cluster.</span></span> <span data-ttu-id="e4bc5-125">Deve essere un'immagine HPC Pack fornita da Microsoft da Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-125">It must be a Microsoft-provided HPC Pack image from the Azure Marketplace.</span></span> <span data-ttu-id="e4bc5-126">Se non è specificata (scelta generalmente consigliata), lo script sceglie l'ultima [immagine HPC Pack 2012 R2](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/) pubblicata.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-126">If not specified (recommended usually), the script chooses the latest published [HPC Pack 2012 R2 image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span></span> <span data-ttu-id="e4bc5-127">L'immagine corrente è basata su Windows Server 2012 R2 Datacenter con HPC Pack 2012 R2 Update 3 installato.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-127">The latest image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 installed.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="e4bc5-128">Se non si specifica un'immagine HPC Pack valida, la distribuzione avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-128">Deployment fails if you don't specify a valid HPC Pack image.</span></span>
  > 
  > 
* <span data-ttu-id="e4bc5-129">**LogFile** (facoltativo): specifica il percorso del file di log della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-129">**LogFile** (optional): Specifies the deployment log file path.</span></span> <span data-ttu-id="e4bc5-130">Se non è specificato, lo script creerà un file di log nella directory temporanea del computer che esegue lo script.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-130">If not specified, the script creates a log file in the temp directory of the computer running the script.</span></span>
* <span data-ttu-id="e4bc5-131">**Force** (facoltativo): elimina tutte le richieste di conferma.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-131">**Force** (optional): Suppresses all the confirmation prompts.</span></span>
* <span data-ttu-id="e4bc5-132">**NoCleanOnFailure** (facoltativo): specifica che le macchine virtuali di Azure non distribuite correttamente non verranno rimosse.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-132">**NoCleanOnFailure** (optional): Specifies that the Azure VMs that are not successfully deployed are not removed.</span></span> <span data-ttu-id="e4bc5-133">Rimuovere manualmente queste macchine virtuali prima di eseguire nuovamente lo script per continuare la distribuzione. In caso contrario, la distribuzione potrebbe non riuscire.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-133">Remove these VMs manually before rerunning the script to continue the deployment, or the deployment may fail.</span></span>
* <span data-ttu-id="e4bc5-134">**PSSessionSkipCACheck** (facoltativo): per ogni servizio cloud con VM distribuite da questo script, viene automaticamente generato da Azure un certificato autofirmato che viene usato da tutte le VM nel servizio cloud come certificato di Gestione remota Windows (WinRM) predefinito.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-134">**PSSessionSkipCACheck** (optional): For every cloud service with VMs deployed by this script, a self-signed certificate is automatically generated by Azure, and all the VMs in the cloud service use this certificate as the default Windows Remote Management (WinRM) certificate.</span></span> <span data-ttu-id="e4bc5-135">Per distribuire funzionalità HPC in queste macchine virtuali di Azure, per impostazione predefinita lo script installa temporaneamente questi certificati nell'archivio computer locale\\Autorità di certificazione radice disponibile nell'elenco locale del computer client, in modo da eliminare l'errore di sicurezza relativo all'autorità di certificazione non attendibile durante l'esecuzione dello script.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-135">To deploy HPC features in these Azure VMs, the script by default temporarily installs these certificates in the Local Computer\\Trusted Root Certification Authorities store of the client computer to suppress the “not trusted CA” security error during script execution.</span></span> <span data-ttu-id="e4bc5-136">I certificati vengono rimossi al termine dello script.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-136">The certificates are removed when the script finishes.</span></span> <span data-ttu-id="e4bc5-137">Se questo parametro è specificato, i certificati non vengono installati nel computer client e l'avviso di sicurezza viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-137">If this parameter is specified, the certificates are not installed in the client computer, and the security warning is suppressed.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="e4bc5-138">Questo parametro non è consigliato per distribuzioni di produzione.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-138">This parameter is not recommended for production deployments.</span></span>
  > 
  > 

### <a name="example"></a><span data-ttu-id="e4bc5-139">Esempio</span><span class="sxs-lookup"><span data-stu-id="e4bc5-139">Example</span></span>
<span data-ttu-id="e4bc5-140">L'esempio seguente crea un cluster HPC Pack usando il file di configurazione *MyConfigFile.xml* e specifica le credenziali amministrative per l'installazione del cluster.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-140">The following example creates an HPC Pack cluster using the configuration file *MyConfigFile.xml*, and specifies administrator credentials for installing the cluster.</span></span>

```PowerShell
.\New-HPCIaaSCluster.ps1 –ConfigFile MyConfigFile.xml -AdminUserName <username> –AdminPassword <password>
```

### <a name="additional-considerations"></a><span data-ttu-id="e4bc5-141">Considerazione aggiuntive</span><span class="sxs-lookup"><span data-stu-id="e4bc5-141">Additional considerations</span></span>
* <span data-ttu-id="e4bc5-142">Lo script può facoltativamente consentire l'invio di processi tramite il portale Web di HPC Pack o l'API REST HPC Pack.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-142">The script can optionally enable job submission through the HPC Pack web portal or the HPC Pack REST API.</span></span>
* <span data-ttu-id="e4bc5-143">Se si vuole installare altro software o configurare altre impostazioni, lo script può facoltativamente eseguire script di preconfigurazione e post-configurazione personalizzati nel nodo head.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-143">The script can optionally run custom pre- and post-configuration scripts on the head node if you want to install additional software or configure other settings.</span></span>

## <a name="configuration-file"></a><span data-ttu-id="e4bc5-144">File di configurazione</span><span class="sxs-lookup"><span data-stu-id="e4bc5-144">Configuration file</span></span>
<span data-ttu-id="e4bc5-145">Il file di configurazione per lo script di distribuzione è un file XML.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-145">The configuration file for the deployment script is an XML file.</span></span> <span data-ttu-id="e4bc5-146">Il file di schema HPCIaaSClusterConfig.xsd si trova nella cartella dello script di distribuzione IaaS di HPC Pack.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-146">The schema file HPCIaaSClusterConfig.xsd is in the HPC Pack IaaS deployment script folder.</span></span> <span data-ttu-id="e4bc5-147">**IaaSClusterConfig** è l'elemento radice del file di configurazione, che contiene gli elementi figlio descritti in dettaglio nel file Manual.rtf nella cartella dello script di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="e4bc5-147">**IaaSClusterConfig** is the root element of the configuration file, which contains the child elements described in detail in the file Manual.rtf in the deployment script folder.</span></span>

