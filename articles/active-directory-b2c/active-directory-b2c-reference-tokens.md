---
title: 'Azure Active Directory B2C: Riferimento token | Documentazione Microsoft'
description: tipi di Hello del token emesso in Azure Active Directory B2C
services: active-directory-b2c
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 6df79878-65cb-4dfc-98bb-2b328055bc2e
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 3/17/2017
ms.author: dastrock
ms.openlocfilehash: 776bc88cc0308875ac6e576f19ac9edf50319d08
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-b2c-token-reference"></a><span data-ttu-id="cf540-103">Azure AD B2C: informazioni di riferimento sui token</span><span class="sxs-lookup"><span data-stu-id="cf540-103">Azure AD B2C: Token reference</span></span>
<span data-ttu-id="cf540-104">Azure Active Directory B2C (Azure AD B2C) rilascia tipi diversi di token di sicurezza durante l'elaborazione di ogni [flusso di autenticazione](active-directory-b2c-apps.md).</span><span class="sxs-lookup"><span data-stu-id="cf540-104">Azure Active Directory B2C (Azure AD B2C) emits several types of security tokens as it processes each [authentication flow](active-directory-b2c-apps.md).</span></span> <span data-ttu-id="cf540-105">Questo documento descrive il formato di hello, caratteristiche di sicurezza e contenuto di ogni tipo di token.</span><span class="sxs-lookup"><span data-stu-id="cf540-105">This document describes hello format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="cf540-106">Tipi di token</span><span class="sxs-lookup"><span data-stu-id="cf540-106">Types of tokens</span></span>
<span data-ttu-id="cf540-107">Azure Active Directory B2C supporta hello [protocollo di autorizzazione OAuth 2.0](active-directory-b2c-reference-protocols.md), che si avvale di entrambi i token di accesso e token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="cf540-107">Azure AD B2C supports hello [OAuth 2.0 authorization protocol](active-directory-b2c-reference-protocols.md), which makes use of both access tokens and refresh tokens.</span></span> <span data-ttu-id="cf540-108">Supporta inoltre l'autenticazione e accesso tramite [OpenID Connect](active-directory-b2c-reference-protocols.md), cui è stato introdotto un terzo tipo di token: token ID hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-b2c-reference-protocols.md), which introduces a third type of token: hello ID token.</span></span> <span data-ttu-id="cf540-109">Ognuno di questi token viene rappresentato come token di connessione.</span><span class="sxs-lookup"><span data-stu-id="cf540-109">Each of these tokens is represented as a bearer token.</span></span>

<span data-ttu-id="cf540-110">Un token di connessione è una risorsa protetta un token di sicurezza leggero che concede hello tooa accesso "bearer".</span><span class="sxs-lookup"><span data-stu-id="cf540-110">A bearer token is a lightweight security token that grants hello "bearer" access tooa protected resource.</span></span> <span data-ttu-id="cf540-111">connessione Hello è qualsiasi entità che possono presentare token hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-111">hello bearer is any party that can present hello token.</span></span> <span data-ttu-id="cf540-112">Per poter ricevere un token di connessione, Azure AD deve prima autenticare una parte.</span><span class="sxs-lookup"><span data-stu-id="cf540-112">Azure AD must first authenticate a party before it can receive a bearer token.</span></span> <span data-ttu-id="cf540-113">Tuttavia, se il token hello toosecure durante la trasmissione e di archiviazione non vengono eseguite operazioni hello necessario può essere intercettato e usato da parti non autorizzate.</span><span class="sxs-lookup"><span data-stu-id="cf540-113">But if hello required steps are not taken toosecure hello token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="cf540-114">Alcuni token di sicurezza hanno un meccanismo predefinito che ne impedisce l'uso da parti non autorizzate, ma i token di connessione non presentano questo meccanismo.</span><span class="sxs-lookup"><span data-stu-id="cf540-114">Some security tokens have a built-in mechanism for preventing unauthorized parties from using them, but bearer tokens do not have this mechanism.</span></span> <span data-ttu-id="cf540-115">Devono essere trasportati usando un canale protetto, ad esempio il protocollo Transport Layer Security (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="cf540-115">They must be transported in a secure channel, such as transport layer security (HTTPS).</span></span>

<span data-ttu-id="cf540-116">Se un token viene trasmesso all'esterno di un canale sicuro, un malintenzionato può usare un token di hello tooacquire attacco man-in-the-middle e usarlo risorsa tooa protetto di accesso toogain non autorizzato.</span><span class="sxs-lookup"><span data-stu-id="cf540-116">If a bearer token is transmitted outside a secure channel, a malicious party can use a man-in-the-middle attack tooacquire hello token and use it toogain unauthorized access tooa protected resource.</span></span> <span data-ttu-id="cf540-117">Hello stessi principi di sicurezza si applicano quando i token di connessione vengono archiviati o memorizzate nella cache per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="cf540-117">hello same security principles apply when bearer tokens are stored or cached for later use.</span></span> <span data-ttu-id="cf540-118">Assicurarsi sempre che l'app trasmetta e archivi i token di connessione in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="cf540-118">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span>

<span data-ttu-id="cf540-119">Per altre considerazioni sulla sicurezza dei token di connessione, vedere la [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="cf540-119">For additional security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="cf540-120">Molti dei token di hello Azure Active Directory B2C rilasciati da vengono implementati come token web JSON (Jwt).</span><span class="sxs-lookup"><span data-stu-id="cf540-120">Many of hello tokens that Azure AD B2C issues are implemented as JSON web tokens (JWTs).</span></span> <span data-ttu-id="cf540-121">Un token JWT è un modo compatto e indipendente dall'URL di trasferimento delle informazioni tra due parti.</span><span class="sxs-lookup"><span data-stu-id="cf540-121">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span> <span data-ttu-id="cf540-122">I token JWT contengono informazioni note come attestazioni.</span><span class="sxs-lookup"><span data-stu-id="cf540-122">JWTs contain information known as claims.</span></span> <span data-ttu-id="cf540-123">Si tratta di asserzioni di informazioni sulla connessione hello e l'oggetto di hello del token hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-123">These are assertions of information about hello bearer and hello subject of hello token.</span></span> <span data-ttu-id="cf540-124">le attestazioni di Hello in Jwt sono oggetti JSON che sono codificati e serializzati per la trasmissione.</span><span class="sxs-lookup"><span data-stu-id="cf540-124">hello claims in JWTs are JSON objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="cf540-125">Poiché è firmato ma non crittografato hello Jwt emesso da Azure Active Directory B2C, è possibile controllare facilmente il contenuto di hello di toodebug un JWT è.</span><span class="sxs-lookup"><span data-stu-id="cf540-125">Because hello JWTs issued by Azure AD B2C are signed but not encrypted, you can easily inspect hello contents of a JWT toodebug it.</span></span> <span data-ttu-id="cf540-126">Sono disponibili diversi strumenti adatti a questo scopo, ad esempio [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="cf540-126">Several tools are available that can do this, including [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="cf540-127">Per ulteriori informazioni su Jwt, vedere troppo[specifiche JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="cf540-127">For more information about JWTs, refer too[JWT specifications](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="cf540-128">Token ID</span><span class="sxs-lookup"><span data-stu-id="cf540-128">ID tokens</span></span>
<span data-ttu-id="cf540-129">Un token ID è un tipo di token di sicurezza che l'applicazione riceve da Azure AD B2C hello `authorize` e `token` gli endpoint.</span><span class="sxs-lookup"><span data-stu-id="cf540-129">An ID token is a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="cf540-130">Token ID vengono rappresentati come [Jwt](#types-of-tokens), e che contengano le attestazioni che è possibile utilizzare gli utenti tooidentify nell'app.</span><span class="sxs-lookup"><span data-stu-id="cf540-130">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify users in your app.</span></span> <span data-ttu-id="cf540-131">Quando i token di ID vengono acquisiti da hello `authorize` endpoint, sono spesso toosign usati nelle applicazioni tooweb gli utenti.</span><span class="sxs-lookup"><span data-stu-id="cf540-131">When ID tokens are acquired from hello `authorize` endpoint, they are often used toosign in users tooweb applications.</span></span> <span data-ttu-id="cf540-132">Quando i token di ID vengono acquisiti da hello `token` endpoint, e possono essere inviati nelle richieste HTTP durante la comunicazione tra due componenti di hello stessa applicazione o servizio.</span><span class="sxs-lookup"><span data-stu-id="cf540-132">When ID tokens are acquired from hello `token` endpoint, they can be sent in HTTP requests during communication between two components of hello same application or service.</span></span> <span data-ttu-id="cf540-133">È possibile utilizzare le attestazioni hello in un ID token nel modo desiderato.</span><span class="sxs-lookup"><span data-stu-id="cf540-133">You can use hello claims in an ID token as you see fit.</span></span> <span data-ttu-id="cf540-134">Sono comunemente usate toodisplay account informazioni o toomake accesso decisioni relative al controllo in un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="cf540-134">They are commonly used toodisplay account information or toomake access control decisions in an app.</span></span>  

<span data-ttu-id="cf540-135">Attualmente i token ID sono firmati, ma non crittografati.</span><span class="sxs-lookup"><span data-stu-id="cf540-135">ID tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="cf540-136">Quando l'app o l'API riceve un ID token, è necessario [convalidare la firma hello](#token-validation) tooprove che hello token è autentica.</span><span class="sxs-lookup"><span data-stu-id="cf540-136">When your app or API receives an ID token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="cf540-137">L'app o l'API inoltre necessario convalidare alcuni attestazioni in tooprove di hello token è valido.</span><span class="sxs-lookup"><span data-stu-id="cf540-137">Your app or API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="cf540-138">A seconda dei requisiti di scenario hello, attestazioni hello convalidate da un'app possono variare, ma l'app deve eseguire alcune [convalide attestazione comuni](#token-validation) in ogni scenario.</span><span class="sxs-lookup"><span data-stu-id="cf540-138">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="cf540-139">Token ID di esempio</span><span class="sxs-lookup"><span data-stu-id="cf540-139">Sample ID token</span></span>
```
// Line breaks for display purposes only

eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6IklkVG9rZW5TaWduaW5nS2V5Q29udGFpbmVyIn0.
eyJleHAiOjE0NDIzNjAwMzQsIm5iZiI6MTQ0MjM1NjQzNCwidmVyIjoiMS4wIiwiaXNzIjoiaHR0cHM6Ly9s
b2dpbi5taWNyb3NvZnRvbmxpbmUuY29tLzc3NTUyN2ZmLTlhMzctNDMwNy04YjNkLWNjMzExZjU4ZDkyNS92
Mi4wLyIsImFjciI6ImIyY18xX3NpZ25faW5fc3RvY2siLCJzdWIiOiJOb3Qgc3VwcG9ydGVkIGN1cnJlbnRs
eS4gVXNlIG9pZCBjbGFpbS4iLCJhdWQiOiI5MGMwZmU2My1iY2YyLTQ0ZDUtOGZiNy1iOGJiYzBiMjlkYzYi
LCJpYXQiOjE0NDIzNTY0MzQsImF1dGhfdGltZSI6MTQ0MjM1NjQzNCwiaWRwIjoiZmFjZWJvb2suY29tIn0.
h-uiKcrT882pSKUtWCpj-_3b3vPs3bOWsESAhPMrL-iIIacKc6_uZrWxaWvIYkLra5czBcGKWrYwrAC8ZvQe
DJWZ50WXQrZYODEW1OUwzaD_I1f1HE0c2uvaWdGXBpDEVdsD3ExKaFlKGjFR2V7F-fPThkVDdKmkUDQX3bVc
yyj2V2nlCQ9jd7aGnokTPfLfpOjuIrTsAdPcGpe5hfSEuwYDmqOJjGs9Jp1f-eSNEiCDQOaTBSvr479L5ptP
XWeQZyX2SypN05Rjr05bjZh3j70ZUimiocfJzjibeoDCaQTz907yAg91WYuFOrQxb-5BaUoR7K-O7vxr2M-_
CQhoFA

```

### <a name="access-tokens"></a><span data-ttu-id="cf540-140">Token di accesso</span><span class="sxs-lookup"><span data-stu-id="cf540-140">Access tokens</span></span>
<span data-ttu-id="cf540-141">Un token di accesso è anche un tipo di token di sicurezza che l'applicazione riceve da Azure AD B2C hello `authorize` e `token` gli endpoint.</span><span class="sxs-lookup"><span data-stu-id="cf540-141">An access token is also a form of security token that your app receives from hello Azure AD B2C `authorize` and `token` endpoints.</span></span> <span data-ttu-id="cf540-142">I token di accesso sono rappresentati anche come [Jwt](#types-of-tokens), e che contengano le attestazioni che è possibile utilizzare hello tooidentify concessa autorizzazioni tooyour API.</span><span class="sxs-lookup"><span data-stu-id="cf540-142">Access tokens are also represented as [JWTs](#types-of-tokens), and they contain claims that you can use tooidentify hello granted permissions tooyour APIs.</span></span> <span data-ttu-id="cf540-143">Attualmente i token di accesso sono firmati, ma non crittografati.</span><span class="sxs-lookup"><span data-stu-id="cf540-143">Access tokens are signed, but they are not currently encrypted.</span></span> <span data-ttu-id="cf540-144">I token di accesso devono essere server di accesso utilizzato tooprovide tooAPIs e risorse.</span><span class="sxs-lookup"><span data-stu-id="cf540-144">Access tokens should be used tooprovide access tooAPIs and resource servers.</span></span> <span data-ttu-id="cf540-145">Per ulteriori informazioni su troppo[utilizzare i token di accesso](active-directory-b2c-access-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="cf540-145">Learn more about how too[use access tokens](active-directory-b2c-access-tokens.md).</span></span> 

<span data-ttu-id="cf540-146">Quando l'API riceve un token di accesso, è necessario [convalidare la firma hello](#token-validation) tooprove che hello token è autentica.</span><span class="sxs-lookup"><span data-stu-id="cf540-146">When your API receives an access token, it must [validate hello signature](#token-validation) tooprove that hello token is authentic.</span></span> <span data-ttu-id="cf540-147">L'API è inoltre necessario convalidare alcuni attestazioni in tooprove di hello token è valido.</span><span class="sxs-lookup"><span data-stu-id="cf540-147">Your API must also validate a few claims in hello token tooprove that it is valid.</span></span> <span data-ttu-id="cf540-148">A seconda dei requisiti di scenario hello, attestazioni hello convalidate da un'app possono variare, ma l'app deve eseguire alcune [convalide attestazione comuni](#token-validation) in ogni scenario.</span><span class="sxs-lookup"><span data-stu-id="cf540-148">Depending on hello scenario requirements, hello claims validated by an app can vary, but your app must perform some [common claim validations](#token-validation) in every scenario.</span></span>

### <a name="claims-in-id-and-access-tokens"></a><span data-ttu-id="cf540-149">Attestazioni nei token di accesso e ID</span><span class="sxs-lookup"><span data-stu-id="cf540-149">Claims in ID and access tokens</span></span>
<span data-ttu-id="cf540-150">Quando si usa Azure Active Directory B2C, si dispone di un controllo accurato sul contenuto hello dei token.</span><span class="sxs-lookup"><span data-stu-id="cf540-150">When you use Azure AD B2C, you have fine-grained control over hello content of your tokens.</span></span> <span data-ttu-id="cf540-151">È possibile configurare [criteri](active-directory-b2c-reference-policies.md) toosend determinati set di dati utente nelle attestazioni che richiede l'app per le relative operazioni.</span><span class="sxs-lookup"><span data-stu-id="cf540-151">You can configure [policies](active-directory-b2c-reference-policies.md) toosend certain sets of user data in claims that your app requires for its operations.</span></span> <span data-ttu-id="cf540-152">Queste attestazioni possono includere proprietà standard, ad esempio utente hello `displayName` e `emailAddress`.</span><span class="sxs-lookup"><span data-stu-id="cf540-152">These claims can include standard properties such as hello user's `displayName` and `emailAddress`.</span></span> <span data-ttu-id="cf540-153">Possono includere anche [attributi utente personalizzati](active-directory-b2c-reference-custom-attr.md) che è possibile definire nella directory B2C.</span><span class="sxs-lookup"><span data-stu-id="cf540-153">They can also include [custom user attributes](active-directory-b2c-reference-custom-attr.md) that you can define in your B2C directory.</span></span> <span data-ttu-id="cf540-154">Ogni token ID e di accesso ricevuto contiene un determinato set di attestazioni relative alla sicurezza.</span><span class="sxs-lookup"><span data-stu-id="cf540-154">Every ID and access token that you receive contains a certain set of security-related claims.</span></span> <span data-ttu-id="cf540-155">Le applicazioni possono utilizzare queste attestazioni toosecurely autenticare gli utenti e richieste.</span><span class="sxs-lookup"><span data-stu-id="cf540-155">Your applications can use these claims toosecurely authenticate users and requests.</span></span>

<span data-ttu-id="cf540-156">Si noti che hello attestazioni nei token ID non vengono restituite in un ordine particolare.</span><span class="sxs-lookup"><span data-stu-id="cf540-156">Note that hello claims in ID tokens are not returned in any particular order.</span></span> <span data-ttu-id="cf540-157">Si noti anche che possono essere introdotte nuove attestazioni nei token ID in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="cf540-157">In addition, new claims can be introduced in ID tokens at any time.</span></span> <span data-ttu-id="cf540-158">L'introduzione delle nuove attestazioni non deve interrompere il funzionamento dell'app.</span><span class="sxs-lookup"><span data-stu-id="cf540-158">Your app should not break as new claims are introduced.</span></span> <span data-ttu-id="cf540-159">Di seguito sono hello attestazioni che si prevede tooexist ID e token di accesso rilasciato da Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="cf540-159">Here are hello claims that you expect tooexist in ID and access tokens issued by Azure AD B2C.</span></span> <span data-ttu-id="cf540-160">Eventuali attestazioni aggiuntive sono determinate dai criteri.</span><span class="sxs-lookup"><span data-stu-id="cf540-160">Any additional claims are determined by policies.</span></span> <span data-ttu-id="cf540-161">Per procedure consigliate, provare a controllo hello attestazioni nel token di ID di esempio hello incollandoli in [calebb.net](http://calebb.net).</span><span class="sxs-lookup"><span data-stu-id="cf540-161">For practice, try inspecting hello claims in hello sample ID token by pasting it into [calebb.net](http://calebb.net).</span></span> <span data-ttu-id="cf540-162">Ulteriori informazioni, vedere hello [OpenID Connect specifica](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="cf540-162">Further details can be found in hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

| <span data-ttu-id="cf540-163">Nome</span><span class="sxs-lookup"><span data-stu-id="cf540-163">Name</span></span> | <span data-ttu-id="cf540-164">Attestazione</span><span class="sxs-lookup"><span data-stu-id="cf540-164">Claim</span></span> | <span data-ttu-id="cf540-165">Valore di esempio</span><span class="sxs-lookup"><span data-stu-id="cf540-165">Example value</span></span> | <span data-ttu-id="cf540-166">Descrizione</span><span class="sxs-lookup"><span data-stu-id="cf540-166">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="cf540-167">Audience</span><span class="sxs-lookup"><span data-stu-id="cf540-167">Audience</span></span> |`aud` |`90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6` |<span data-ttu-id="cf540-168">Un'attestazione destinatari identifica destinatario previsto hello del token hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-168">An audience claim identifies hello intended recipient of hello token.</span></span> <span data-ttu-id="cf540-169">Per Azure Active Directory B2C, destinatari hello sono ID applicazione dell'app come app tooyour assegnato nel portale di registrazione applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-169">For Azure AD B2C, hello audience is your app's application ID, as assigned tooyour app in hello app registration portal.</span></span> <span data-ttu-id="cf540-170">L'app deve convalidare questo valore e rifiutare il token di hello se non corrispondono.</span><span class="sxs-lookup"><span data-stu-id="cf540-170">Your app should validate this value and reject hello token if it does not match.</span></span> |
| <span data-ttu-id="cf540-171">Issuer</span><span class="sxs-lookup"><span data-stu-id="cf540-171">Issuer</span></span> |`iss` |`https://login.microsoftonline.com/775527ff-9a37-4307-8b3d-cc311f58d925/v2.0/` |<span data-ttu-id="cf540-172">Questa attestazione identifica hello servizio token di sicurezza (STS) che crea e restituisce il token hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-172">This claim identifies hello security token service (STS) that constructs and returns hello token.</span></span> <span data-ttu-id="cf540-173">Vengono inoltre identificati directory di Azure AD hello in cui hello è stato autenticato l'utente.</span><span class="sxs-lookup"><span data-stu-id="cf540-173">It also identifies hello Azure AD directory in which hello user was authenticated.</span></span> <span data-ttu-id="cf540-174">L'app deve convalidare l'attestazione autorità di certificazione hello tooensure che hello token provenienza hello Azure v 2.0 endpoint di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cf540-174">Your app should validate hello issuer claim tooensure that hello token came from hello Azure Active Directory v2.0 endpoint.</span></span> |
| <span data-ttu-id="cf540-175">Ora di emissione</span><span class="sxs-lookup"><span data-stu-id="cf540-175">Issued at</span></span> |`iat` |`1438535543` |<span data-ttu-id="cf540-176">Questa attestazione è hello ora in cui hello token è stato inviato, rappresentato in valore epoch.</span><span class="sxs-lookup"><span data-stu-id="cf540-176">This claim is hello time at which hello token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="cf540-177">Scadenza</span><span class="sxs-lookup"><span data-stu-id="cf540-177">Expiration time</span></span> |`exp` |`1438539443` |<span data-ttu-id="cf540-178">Hello attestazione ora di scadenza è hello tempo in cui hello token diventa non valido, rappresentato in valore epoch.</span><span class="sxs-lookup"><span data-stu-id="cf540-178">hello expiration time claim is hello time at which hello token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="cf540-179">L'app deve usare la validità di hello tooverify attestazione della durata del token hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-179">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="cf540-180">Non prima</span><span class="sxs-lookup"><span data-stu-id="cf540-180">Not before</span></span> |`nbf` |`1438535543` |<span data-ttu-id="cf540-181">Questa attestazione è ora di hello in cui hello token diventa valido, rappresentato in valore epoch.</span><span class="sxs-lookup"><span data-stu-id="cf540-181">This claim is hello time at which hello token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="cf540-182">Questo è in genere hello stesso come hello ora hello token è stato rilasciato.</span><span class="sxs-lookup"><span data-stu-id="cf540-182">This is usually hello same as hello time hello token was issued.</span></span> <span data-ttu-id="cf540-183">L'app deve usare la validità di hello tooverify attestazione della durata del token hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-183">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="cf540-184">Versione</span><span class="sxs-lookup"><span data-stu-id="cf540-184">Version</span></span> |`ver` |`1.0` |<span data-ttu-id="cf540-185">Si tratta di versione di hello del token ID hello, come definito da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cf540-185">This is hello version of hello ID token, as defined by Azure AD.</span></span> |
| <span data-ttu-id="cf540-186">Hash del codice</span><span class="sxs-lookup"><span data-stu-id="cf540-186">Code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="cf540-187">Un hash di codice è incluso in un ID token solo quando viene rilasciato il token di hello insieme a un codice di autorizzazione OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="cf540-187">A code hash is included in an ID token only when hello token is issued together with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="cf540-188">Un hash di codice può essere utilizzato toovalidate hello autenticità di un codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="cf540-188">A code hash can be used toovalidate hello authenticity of an authorization code.</span></span> <span data-ttu-id="cf540-189">Per ulteriori informazioni su come tooperform questa convalida, vedere hello [OpenID Connect specifica](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="cf540-189">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>  |
| <span data-ttu-id="cf540-190">Hash del token di accesso</span><span class="sxs-lookup"><span data-stu-id="cf540-190">Access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="cf540-191">Un hash di token di accesso è incluso in un ID token solo quando viene rilasciato il token di hello insieme a un token di accesso OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="cf540-191">An access token hash is included in an ID token only when hello token is issued together with an OAuth 2.0 access token.</span></span> <span data-ttu-id="cf540-192">Un hash di token di accesso può essere utilizzato toovalidate hello autenticità di un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="cf540-192">An access token hash can be used toovalidate hello authenticity of an access token.</span></span> <span data-ttu-id="cf540-193">Per ulteriori informazioni su come tooperform questa convalida, vedere hello [specifica OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html)</span><span class="sxs-lookup"><span data-stu-id="cf540-193">For more details on how tooperform this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html)</span></span>  |
| <span data-ttu-id="cf540-194">Nonce</span><span class="sxs-lookup"><span data-stu-id="cf540-194">Nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="cf540-195">Un nonce è che usare una strategia di attacchi di riproduzione token toomitigate.</span><span class="sxs-lookup"><span data-stu-id="cf540-195">A nonce is a strategy used toomitigate token replay attacks.</span></span> <span data-ttu-id="cf540-196">L'app può specificare un parametro nonce in una richiesta di autorizzazione con hello `nonce` parametro di query.</span><span class="sxs-lookup"><span data-stu-id="cf540-196">Your app can specify a nonce in an authorization request by using hello `nonce` query parameter.</span></span> <span data-ttu-id="cf540-197">il valore di Hello fornito nella richiesta di hello verrà creato senza modificarli in hello `nonce` di un solo ID token di attestazione.</span><span class="sxs-lookup"><span data-stu-id="cf540-197">hello value you provide in hello request will be emitted unmodified in hello `nonce` claim of an ID token only.</span></span> <span data-ttu-id="cf540-198">In questo modo il valore di hello app tooverify con valore hello che è specificato in una richiesta di hello, che associa la sessione dell'applicazione hello con un token ID specificato.</span><span class="sxs-lookup"><span data-stu-id="cf540-198">This allows your app tooverify hello value against hello value it specified on hello request, which associates hello app's session with a given ID token.</span></span> <span data-ttu-id="cf540-199">L'app deve eseguire la convalida durante il processo di convalida del token ID hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-199">Your app should perform this validation during hello ID token validation process.</span></span> |
| <span data-ttu-id="cf540-200">Oggetto</span><span class="sxs-lookup"><span data-stu-id="cf540-200">Subject</span></span> |`sub` |`884408e1-2918-4cz0-b12d-3aa027d7563b` |<span data-ttu-id="cf540-201">Si tratta di entità hello sui quali hello token rilascia informazioni, ad esempio utente hello di un'app.</span><span class="sxs-lookup"><span data-stu-id="cf540-201">This is hello principal about which hello token asserts information, such as hello user of an app.</span></span> <span data-ttu-id="cf540-202">Questo valore non è modificabile e non può essere riassegnato o riutilizzato.</span><span class="sxs-lookup"><span data-stu-id="cf540-202">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="cf540-203">Controlli di autorizzazione tooperform utilizzato in modo sicuro, può essere ad esempio quando il token hello viene utilizzato tooaccess una risorsa.</span><span class="sxs-lookup"><span data-stu-id="cf540-203">It can be used tooperform authorization checks safely, such as when hello token is used tooaccess a resource.</span></span> <span data-ttu-id="cf540-204">Per impostazione predefinita, hello soggetto attestazione viene popolata con ID di oggetto hello di utente hello nella directory di hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-204">By default, hello subject claim is populated with hello object ID of hello user in hello directory.</span></span> <span data-ttu-id="cf540-205">vedere, più toolearn [Azure Active Directory B2C: Token di sessione e configurazione di single sign-on](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="cf540-205">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="cf540-206">Riferimento alla classe contesto di autenticazione</span><span class="sxs-lookup"><span data-stu-id="cf540-206">Authentication context class reference</span></span> |`acr` |<span data-ttu-id="cf540-207">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="cf540-207">Not applicable</span></span> |<span data-ttu-id="cf540-208">Non in uso, tranne che in caso di hello dei criteri precedenti.</span><span class="sxs-lookup"><span data-stu-id="cf540-208">Not used currently, except in hello case of older policies.</span></span> <span data-ttu-id="cf540-209">vedere, più toolearn [Azure Active Directory B2C: Token di sessione e configurazione di single sign-on](active-directory-b2c-token-session-sso.md).</span><span class="sxs-lookup"><span data-stu-id="cf540-209">toolearn more, see [Azure Active Directory B2C: Token, session, and single sign-on configuration](active-directory-b2c-token-session-sso.md).</span></span> |
| <span data-ttu-id="cf540-210">Criteri del framework di attendibilità</span><span class="sxs-lookup"><span data-stu-id="cf540-210">Trust framework policy</span></span> |`tfp` |`b2c_1_sign_in` |<span data-ttu-id="cf540-211">Questo è il nome di hello di criteri hello tooacquire utilizzati token di ID hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-211">This is hello name of hello policy that was used tooacquire hello ID token.</span></span> |
| <span data-ttu-id="cf540-212">Ora di autenticazione</span><span class="sxs-lookup"><span data-stu-id="cf540-212">Authentication time</span></span> |`auth_time` |`1438535543` |<span data-ttu-id="cf540-213">Questa attestazione è hello ora in cui un ultimo immesso le credenziali utente, in forma di valore epoch.</span><span class="sxs-lookup"><span data-stu-id="cf540-213">This claim is hello time at which a user last entered credentials, represented in epoch time.</span></span> |

### <a name="refresh-tokens"></a><span data-ttu-id="cf540-214">Token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="cf540-214">Refresh tokens</span></span>
<span data-ttu-id="cf540-215">Aggiornare i token sono token di sicurezza per l'app può utilizzare tooacquire nuovi token di ID e i token in un flusso OAuth 2.0 di accesso.</span><span class="sxs-lookup"><span data-stu-id="cf540-215">Refresh tokens are security tokens that your app can use tooacquire new ID tokens and access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="cf540-216">Forniscono l'app con tooresources accesso a lungo termine per conto degli utenti senza interazione con gli utenti.</span><span class="sxs-lookup"><span data-stu-id="cf540-216">They provide your app with long-term access tooresources on behalf of users without requiring interaction with those users.</span></span>

<span data-ttu-id="cf540-217">tooreceive un token di aggiornamento in una risposta di token, l'applicazione deve richiedere hello `offline_acesss` ambito.</span><span class="sxs-lookup"><span data-stu-id="cf540-217">tooreceive a refresh token in a token response, your app must request hello `offline_acesss` scope.</span></span> <span data-ttu-id="cf540-218">altre informazioni sulle hello toolearn `offline_access` ambito, fare riferimento toohello [riferimento al protocollo Azure Active Directory B2C](active-directory-b2c-reference-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="cf540-218">toolearn more about hello `offline_access` scope, refer toohello [Azure AD B2C protocol reference](active-directory-b2c-reference-protocols.md).</span></span>

<span data-ttu-id="cf540-219">Token di aggiornamento sono e sarà sempre, app tooyour completamente opaco.</span><span class="sxs-lookup"><span data-stu-id="cf540-219">Refresh tokens are, and will always be, completely opaque tooyour app.</span></span> <span data-ttu-id="cf540-220">Vengono rilasciati da Azure AD e possono essere controllati e interpretati solo da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cf540-220">They are issued by Azure AD and can be inspected and interpreted only by Azure AD.</span></span> <span data-ttu-id="cf540-221">Sono di lunga durate, ma l'app non deve essere scritto previsione hello che durata un token di aggiornamento per un periodo di tempo specifico.</span><span class="sxs-lookup"><span data-stu-id="cf540-221">They are long-lived, but your app should not be written with hello expectation that a refresh token will last for a specific period of time.</span></span> <span data-ttu-id="cf540-222">I token di aggiornamento possono essere annullati in qualsiasi momento per vari motivi.</span><span class="sxs-lookup"><span data-stu-id="cf540-222">Refresh tokens can be invalidated at any moment for a variety of reasons.</span></span> <span data-ttu-id="cf540-223">Hello solo per i tooknow app se è valido un token di aggiornamento è tooattempt tooredeem, rendendo tooAzure una richiesta di token Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cf540-223">hello only way for your app tooknow if a refresh token is valid is tooattempt tooredeem it by making a token request tooAzure AD.</span></span>

<span data-ttu-id="cf540-224">Quando si Riscatta un token di aggiornamento di un nuovo token (e se l'app è stata concessa hello `offline_access` ambito), si riceverà un nuovo token di aggiornamento in risposta token hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-224">When you redeem a refresh token for a new token (and if your app has been granted hello `offline_access` scope), you will receive a new refresh token in hello token response.</span></span> <span data-ttu-id="cf540-225">È consigliabile salvare il token di aggiornamento hello appena rilasciato.</span><span class="sxs-lookup"><span data-stu-id="cf540-225">You should save hello newly issued refresh token.</span></span> <span data-ttu-id="cf540-226">È necessario sostituire i token di aggiornamento hello che è utilizzato in precedenza nella richiesta di hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-226">It should replace hello refresh token you previously used in hello request.</span></span> <span data-ttu-id="cf540-227">In questo modo, il token di aggiornamento rimarrà valido il più a lungo possibile.</span><span class="sxs-lookup"><span data-stu-id="cf540-227">This helps guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="token-validation"></a><span data-ttu-id="cf540-228">Convalida dei token</span><span class="sxs-lookup"><span data-stu-id="cf540-228">Token validation</span></span>
<span data-ttu-id="cf540-229">toovalidate un token, l'applicazione deve controllare firma hello e attestazioni del token hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-229">toovalidate a token, your app should check both hello signature and claims of hello token.</span></span>

<span data-ttu-id="cf540-230">Sono disponibili molte librerie open source per la convalida dei token JWT, a seconda del linguaggio preferito.</span><span class="sxs-lookup"><span data-stu-id="cf540-230">Many open source libraries are available for validating JWTs, depending on your preferred language.</span></span> <span data-ttu-id="cf540-231">È consigliabile prendere in esame tali opzioni anziché implementare una logica di convalida personalizzata.</span><span class="sxs-lookup"><span data-stu-id="cf540-231">We recommend that you explore those options rather than implement your own validation logic.</span></span> <span data-ttu-id="cf540-232">informazioni di Hello in questa guida consentono di scoprire come tooproperly utilizzare tali raccolte.</span><span class="sxs-lookup"><span data-stu-id="cf540-232">hello information in this guide can help you learn how tooproperly use those libraries.</span></span>

### <a name="validate-hello-signature"></a><span data-ttu-id="cf540-233">Convalidare la firma hello</span><span class="sxs-lookup"><span data-stu-id="cf540-233">Validate hello signature</span></span>
<span data-ttu-id="cf540-234">Un token JWT contiene tre segmenti, separati da hello `.` carattere.</span><span class="sxs-lookup"><span data-stu-id="cf540-234">A JWT contains three segments, separated by hello `.` character.</span></span> <span data-ttu-id="cf540-235">il primo segmento Hello è hello *intestazione*, hello in secondo luogo è hello *corpo*, il terzo, hello è hello *firma*.</span><span class="sxs-lookup"><span data-stu-id="cf540-235">hello first segment is hello *header*, hello second is hello *body*, and hello third is hello *signature*.</span></span> <span data-ttu-id="cf540-236">segmento di firma Hello può essere utilizzato toovalidate hello autenticità del token hello in modo che possono essere considerati attendibili dall'app.</span><span class="sxs-lookup"><span data-stu-id="cf540-236">hello signature segment can be used toovalidate hello authenticity of hello token so that it can be trusted by your app.</span></span>

<span data-ttu-id="cf540-237">I token Azure AD B2C vengono firmati usando algoritmi di crittografia asimmetrica standard del settore, come RSA 256.</span><span class="sxs-lookup"><span data-stu-id="cf540-237">Azure AD B2C tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="cf540-238">intestazione Hello del token hello contiene informazioni sulla chiave di hello e metodo di crittografia utilizzato token hello toosign:</span><span class="sxs-lookup"><span data-stu-id="cf540-238">hello header of hello token contains information about hello key and encryption method used toosign hello token:</span></span>

```
{
        "typ": "JWT",
        "alg": "RS256",
        "kid": "GvnPApfWMdLRi8PDmisFn7bprKg"
}
```

<span data-ttu-id="cf540-239">Hello `alg` attestazione indica l'algoritmo hello non utilizzati toosign hello token.</span><span class="sxs-lookup"><span data-stu-id="cf540-239">hello `alg` claim indicates hello algorithm that was used toosign hello token.</span></span> <span data-ttu-id="cf540-240">Hello `kid` attestazione indica hello particolare chiave pubblica che è stata token hello toosign utilizzato.</span><span class="sxs-lookup"><span data-stu-id="cf540-240">hello `kid` claim indicates hello particular public key that was used toosign hello token.</span></span>

<span data-ttu-id="cf540-241">In qualsiasi momento Azure AD può firmare un token usando un determinato set di coppie di chiavi pubblica/privata.</span><span class="sxs-lookup"><span data-stu-id="cf540-241">At any given time, Azure AD can sign a token by using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="cf540-242">Azure AD ruota periodicamente, i set di possibili hello di chiavi in modo che l'app deve essere scritto toohandle tali chiave viene modificata automaticamente.</span><span class="sxs-lookup"><span data-stu-id="cf540-242">Azure AD rotates hello possible set of keys periodically, so your app should be written toohandle those key changes automatically.</span></span> <span data-ttu-id="cf540-243">Toocheck una frequenza ragionevole per gli aggiornamenti toohello le chiavi pubbliche usate da Azure Active Directory è di 24 ore.</span><span class="sxs-lookup"><span data-stu-id="cf540-243">A reasonable frequency toocheck for updates toohello public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="cf540-244">Azure AD B2C include un endpoint dei metadati di OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="cf540-244">Azure AD B2C has an OpenID Connect metadata endpoint.</span></span> <span data-ttu-id="cf540-245">Questo consente alle App toofetch informazioni su Azure Active Directory B2C in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="cf540-245">This allows apps toofetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="cf540-246">Queste informazioni includono endpoint, contenuti del token e chiavi per la firma dei token.</span><span class="sxs-lookup"><span data-stu-id="cf540-246">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="cf540-247">La directory B2C contiene un documento metadati JSON per ogni criterio.</span><span class="sxs-lookup"><span data-stu-id="cf540-247">Your B2C directory contains a JSON metadata document for each policy.</span></span> <span data-ttu-id="cf540-248">Ad esempio, hello documento di metadati per hello `b2c_1_sign_in` criteri in `fabrikamb2c.onmicrosoft.com` si trova in:</span><span class="sxs-lookup"><span data-stu-id="cf540-248">For example, hello metadata document for hello `b2c_1_sign_in` policy in  `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in
```

<span data-ttu-id="cf540-249">`fabrikamb2c.onmicrosoft.com`è una directory B2C hello utilizzato tooauthenticate hello, e `b2c_1_sign_in` è token hello tooacquire utilizzati i criteri di hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-249">`fabrikamb2c.onmicrosoft.com` is hello B2C directory used tooauthenticate hello user, and `b2c_1_sign_in` is hello policy used tooacquire hello token.</span></span> <span data-ttu-id="cf540-250">toodetermine quali criteri è stato utilizzato toosign un token (e in cui toogo toofetch hello metadati), sono disponibili due opzioni.</span><span class="sxs-lookup"><span data-stu-id="cf540-250">toodetermine which policy was used toosign a token (and where toogo toofetch hello metadata), you have two options.</span></span> <span data-ttu-id="cf540-251">In primo luogo, il nome di criterio hello è incluso in hello `acr` attestazione nel token hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-251">First, hello policy name is included in hello `acr` claim in hello token.</span></span> <span data-ttu-id="cf540-252">È possibile analizzare le attestazioni dal corpo hello di hello JWT dal corpo hello decodifica Base64 e la deserializzazione di hello che causa di stringa JSON.</span><span class="sxs-lookup"><span data-stu-id="cf540-252">You can parse claims out of hello body of hello JWT by base-64 decoding hello body and deserializing hello JSON string that results.</span></span> <span data-ttu-id="cf540-253">Hello `acr` attestazione corrisponderà al nome hello di criteri hello token hello tooissue utilizzato.</span><span class="sxs-lookup"><span data-stu-id="cf540-253">hello `acr` claim will be hello name of hello policy that was used tooissue hello token.</span></span>  <span data-ttu-id="cf540-254">L'altra opzione è criteri hello tooencode valore hello hello `state` parametro quando si invia la richiesta hello e decodificarlo in toodetermine quali criteri è stato utilizzato.</span><span class="sxs-lookup"><span data-stu-id="cf540-254">Your other option is tooencode hello policy in hello value of hello `state` parameter when you issue hello request, and then decode it toodetermine which policy was used.</span></span> <span data-ttu-id="cf540-255">Entrambi i metodi sono validi.</span><span class="sxs-lookup"><span data-stu-id="cf540-255">Either method is valid.</span></span>

<span data-ttu-id="cf540-256">documento di metadati Hello è un oggetto JSON che contiene numerose utile di informazioni.</span><span class="sxs-lookup"><span data-stu-id="cf540-256">hello metadata document is a JSON object that contains several useful pieces of information.</span></span> <span data-ttu-id="cf540-257">Questi includono il percorso di hello del hello gli endpoint necessari tooperform autenticazione OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="cf540-257">These include hello location of hello endpoints required tooperform OpenID Connect authentication.</span></span> <span data-ttu-id="cf540-258">È inoltre incluso `jwks_uri`, che offre una posizione di hello di hello set di chiavi pubbliche che sono utilizzati toosign token.</span><span class="sxs-lookup"><span data-stu-id="cf540-258">They also include `jwks_uri`, which gives hello location of hello set of public keys that are used toosign tokens.</span></span> <span data-ttu-id="cf540-259">Tale percorso viene fornito di seguito, ma è percorso migliore di hello toofetch dinamicamente utilizzando il documento di metadati hello e l'analisi di `jwks_uri`:</span><span class="sxs-lookup"><span data-stu-id="cf540-259">That location is provided here, but it is best toofetch hello location dynamically by using hello metadata document and parsing out `jwks_uri`:</span></span>

```
https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in
```

<span data-ttu-id="cf540-260">documento JSON Hello si trova in corrispondenza dell'URL contiene tutte le informazioni di chiave pubblica hello in uso in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="cf540-260">hello JSON document located at this URL contains all hello public key information in use at a particular moment.</span></span> <span data-ttu-id="cf540-261">L'app è possibile utilizzare hello `kid` di attestazione in hello JWT intestazione tooselect hello chiave pubblica nel documento JSON hello che viene utilizzato toosign il token.</span><span class="sxs-lookup"><span data-stu-id="cf540-261">Your app can use hello `kid` claim in hello JWT header tooselect hello public key in hello JSON document that is used toosign a particular token.</span></span> <span data-ttu-id="cf540-262">Quindi possibile eseguire la convalida della firma con chiave pubblica corretta hello e l'algoritmo indicato hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-262">It can then perform signature validation by using hello correct public key and hello indicated algorithm.</span></span>

<span data-ttu-id="cf540-263">Una descrizione di come la convalida della firma tooperform è di fuori ambito hello di questo documento.</span><span class="sxs-lookup"><span data-stu-id="cf540-263">A description of how tooperform signature validation is outside hello scope of this document.</span></span> <span data-ttu-id="cf540-264">Molte librerie open source sono toohelp disponibile con questa opzione se è necessario.</span><span class="sxs-lookup"><span data-stu-id="cf540-264">Many open source libraries are available toohelp you with this if you need it.</span></span>

### <a name="validate-hello-claims"></a><span data-ttu-id="cf540-265">Convalidare le attestazioni hello</span><span class="sxs-lookup"><span data-stu-id="cf540-265">Validate hello claims</span></span>
<span data-ttu-id="cf540-266">Quando l'app o l'API riceve un token di ID, deve anche eseguire diversi controlli di base hello attestazioni nel token ID hello.</span><span class="sxs-lookup"><span data-stu-id="cf540-266">When your app or API receives an ID token, it should also perform several checks against hello claims in hello ID token.</span></span> <span data-ttu-id="cf540-267">Sono incluse, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="cf540-267">These include, but are not limited to:</span></span>

* <span data-ttu-id="cf540-268">Hello **destinatari** attestazione: in questo modo si verifica tale token ID hello è stato previsto toobe tooyour app specificato.</span><span class="sxs-lookup"><span data-stu-id="cf540-268">hello **audience** claim: This verifies that hello ID token was intended toobe given tooyour app.</span></span>
* <span data-ttu-id="cf540-269">Hello **non prima** e **scadenza** attestazioni: questi verificare tale token ID hello è scaduto.</span><span class="sxs-lookup"><span data-stu-id="cf540-269">hello **not before** and **expiration time** claims: These verify that hello ID token has not expired.</span></span>
* <span data-ttu-id="cf540-270">Hello **dell'autorità di certificazione** attestazione: in questo modo si verifica tale token hello è stato rilasciato app tooyour da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="cf540-270">hello **issuer** claim: This verifies that hello token was issued tooyour app by Azure AD.</span></span>
* <span data-ttu-id="cf540-271">Hello **nonce**: si tratta di una strategia per l'attenuazione di attacchi di riproduzione token.</span><span class="sxs-lookup"><span data-stu-id="cf540-271">hello **nonce**: This is a strategy for token replay attack mitigation.</span></span>

<span data-ttu-id="cf540-272">Per un elenco completo delle convalide deve eseguire l'app, vedere toohello [OpenID Connect specifica](https://openid.net).</span><span class="sxs-lookup"><span data-stu-id="cf540-272">For a full list of validations your app should perform, refer toohello [OpenID Connect specification](https://openid.net).</span></span> <span data-ttu-id="cf540-273">I dettagli dei valori previsti hello per le attestazioni sono inclusi in hello precedente [token sezione](#types-of-tokens).</span><span class="sxs-lookup"><span data-stu-id="cf540-273">Details of hello expected values for these claims are included in hello preceding [token section](#types-of-tokens).</span></span>  

## <a name="token-lifetimes"></a><span data-ttu-id="cf540-274">Durata dei token</span><span class="sxs-lookup"><span data-stu-id="cf540-274">Token lifetimes</span></span>
<span data-ttu-id="cf540-275">Hello durata dei token di seguito è fornite toofurther la conoscenza.</span><span class="sxs-lookup"><span data-stu-id="cf540-275">hello following token lifetimes are provided toofurther your knowledge.</span></span> <span data-ttu-id="cf540-276">Queste informazioni possono risultare utili durante lo sviluppo e il debug delle app.</span><span class="sxs-lookup"><span data-stu-id="cf540-276">They can help you when you develop and debug apps.</span></span> <span data-ttu-id="cf540-277">Si noti che le app non devono essere scritto tooexpect uno di questi costante tooremain durate.</span><span class="sxs-lookup"><span data-stu-id="cf540-277">Note that your apps should not be written tooexpect any of these lifetimes tooremain constant.</span></span> <span data-ttu-id="cf540-278">La durata dei token può variare.</span><span class="sxs-lookup"><span data-stu-id="cf540-278">They can and will change.</span></span> <span data-ttu-id="cf540-279">Altre informazioni su hello [personalizzazione di durata dei token](active-directory-b2c-token-session-sso.md) in Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="cf540-279">Read more about hello [customization of token lifetimes](active-directory-b2c-token-session-sso.md) in Azure AD B2C.</span></span>

| <span data-ttu-id="cf540-280">token</span><span class="sxs-lookup"><span data-stu-id="cf540-280">Token</span></span> | <span data-ttu-id="cf540-281">Durata</span><span class="sxs-lookup"><span data-stu-id="cf540-281">Lifetime</span></span> | <span data-ttu-id="cf540-282">Descrizione</span><span class="sxs-lookup"><span data-stu-id="cf540-282">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="cf540-283">Token ID</span><span class="sxs-lookup"><span data-stu-id="cf540-283">ID tokens</span></span> |<span data-ttu-id="cf540-284">Un'ora</span><span class="sxs-lookup"><span data-stu-id="cf540-284">One hour</span></span> |<span data-ttu-id="cf540-285">I token ID sono in genere validi per un'ora.</span><span class="sxs-lookup"><span data-stu-id="cf540-285">ID tokens are typically valid for an hour.</span></span> <span data-ttu-id="cf540-286">L'app web è possibile utilizzare questo toomaintain durata proprie sessioni con gli utenti (scelta consigliati).</span><span class="sxs-lookup"><span data-stu-id="cf540-286">Your web app can use this lifetime toomaintain its own sessions with users (recommended).</span></span> <span data-ttu-id="cf540-287">È anche possibile scegliere una durata di sessione diversa.</span><span class="sxs-lookup"><span data-stu-id="cf540-287">You can also choose a different session lifetime.</span></span> <span data-ttu-id="cf540-288">Se l'app deve tooget un nuovo token di ID, è soltanto necessario toomake un nuovo tooAzure richiesta di accesso Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cf540-288">If your app needs tooget a new ID token, it simply needs toomake a new sign-in request tooAzure AD.</span></span> <span data-ttu-id="cf540-289">Se un utente dispone di una sessione del browser valido con Azure AD, che l'utente potrebbe non essere le credenziali necessarie tooenter nuovamente.</span><span class="sxs-lookup"><span data-stu-id="cf540-289">If a user has a valid browser session with Azure AD, that user might not be required tooenter credentials again.</span></span> |
| <span data-ttu-id="cf540-290">Token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="cf540-290">Refresh tokens</span></span> |<span data-ttu-id="cf540-291">Impostare i giorni too14</span><span class="sxs-lookup"><span data-stu-id="cf540-291">Up too14 days</span></span> |<span data-ttu-id="cf540-292">Un singolo token di aggiornamento è valido per un periodo massimo di 14 giorni.</span><span class="sxs-lookup"><span data-stu-id="cf540-292">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="cf540-293">Tuttavia, un token di aggiornamento potrebbe non essere più valido in qualsiasi momento per diversi motivi.</span><span class="sxs-lookup"><span data-stu-id="cf540-293">However, a refresh token can become invalid at any time for a number of reasons.</span></span> <span data-ttu-id="cf540-294">L'app deve continuare tootry toouse un token di aggiornamento, fino a quando non si verifica un errore di richiesta di hello o fino a quando l'app sostituisce il token di aggiornamento hello con uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="cf540-294">Your app should continue tootry toouse a refresh token until hello request fails, or until your app replaces hello refresh token with a new one.</span></span> <span data-ttu-id="cf540-295">Un token di aggiornamento può diventare anche in caso di 90 giorni trascorsi dall'utente hello ultima credenziali immesse.</span><span class="sxs-lookup"><span data-stu-id="cf540-295">A refresh token can also become invalid if 90 days have passed since hello user last entered credentials.</span></span> |
| <span data-ttu-id="cf540-296">Codici di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="cf540-296">Authorization codes</span></span> |<span data-ttu-id="cf540-297">Cinque minuti</span><span class="sxs-lookup"><span data-stu-id="cf540-297">Five minutes</span></span> |<span data-ttu-id="cf540-298">I codici di autorizzazione hanno intenzionalmente una breve durata.</span><span class="sxs-lookup"><span data-stu-id="cf540-298">Authorization codes are intentionally short-lived.</span></span> <span data-ttu-id="cf540-299">Alla ricezione devono essere riscattati immediatamente con token di accesso, token ID o token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="cf540-299">They should be redeemed immediately for access tokens, ID tokens, or refresh tokens when they are received.</span></span> |

