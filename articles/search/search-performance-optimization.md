---
title: Considerazioni sulle prestazioni e sull'ottimizzazione di Ricerca di Azure | Microsoft Docs
description: "Ottimizzare le prestazioni di Ricerca di Azure e configurare una scalabilità ottimale"
services: search
documentationcenter: 
author: LiamCavanagh
manager: pablocas
editor: 
ms.assetid: 4d3cd864-29d2-4921-be0d-a3f1a819de46
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 05/01/2017
ms.author: liamca
ms.openlocfilehash: f4e371fc16bc57e6963f1ec51c0ea864fa568f0c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="azure-search-performance-and-optimization-considerations"></a><span data-ttu-id="703ce-103">Considerazioni sulle prestazioni e sull'ottimizzazione di Ricerca di Azure</span><span class="sxs-lookup"><span data-stu-id="703ce-103">Azure Search performance and optimization considerations</span></span>
<span data-ttu-id="703ce-104">Un'esperienza eccellente è la chiave del successo per molti dispositivi mobili e applicazioni Web.</span><span class="sxs-lookup"><span data-stu-id="703ce-104">A great search experience is a key to success for many mobile and web applications.</span></span> <span data-ttu-id="703ce-105">Dal mercato immobiliare, passando per il mercato dell'usato dei veicoli fino ai negozi online, la ricerca veloce e i risultati rilevanti influiscono sull'esperienza dell'utente.</span><span class="sxs-lookup"><span data-stu-id="703ce-105">From real estate, to used car marketplaces to online catalogs, fast search and relevant results will affect the customer experience.</span></span> <span data-ttu-id="703ce-106">Questo documento aiuta l'utente a scoprire le procedure consigliate su come ottenere il massimo da Ricerca di Azure, in particolare per scenari avanzati con requisiti di scalabilità avanzati, con supporto multilingue o classificazione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="703ce-106">This document is intended to help you discover best practices for how to get the most out of Azure Search, especially for advanced scenarios with sophisticated requirements for scalability, multi-language support, or custom ranking.</span></span>  <span data-ttu-id="703ce-107">Questo documento illustra anche i meccanismi interni e descrive gli approcci efficienti per le applicazioni reali dei clienti.</span><span class="sxs-lookup"><span data-stu-id="703ce-107">In addition, this document outlines internals and covers approaches that work effectively in real-world customer apps.</span></span>

## <a name="performance-and-scale-tuning-for-search-services"></a><span data-ttu-id="703ce-108">Prestazioni e pianificazione della scalabilità per i servizi di Ricerca</span><span class="sxs-lookup"><span data-stu-id="703ce-108">Performance and scale tuning for Search services</span></span>
<span data-ttu-id="703ce-109">Tutti conosciamo e usiamo motori di ricerca come Bing e Google e le relative prestazioni offerte.</span><span class="sxs-lookup"><span data-stu-id="703ce-109">We are all used to search engines such as Bing and Google and the high performance they offer.</span></span>  <span data-ttu-id="703ce-110">Di conseguenza, quando i clienti usano applicazioni mobili o Web abilitate per la ricerca, si aspettano prestazioni simili.</span><span class="sxs-lookup"><span data-stu-id="703ce-110">As a result, when customers use your search-enabled web or mobile application, they will expect similar performance characteristics.</span></span>  <span data-ttu-id="703ce-111">Per l'ottimizzazione delle prestazioni di ricerca, l'approccio migliore consiste nel concentrarsi sulla latenza, ovvero sul tempo necessario per completare la query e restituire i risultati.</span><span class="sxs-lookup"><span data-stu-id="703ce-111">When optimizing for search performance, one of the best approaches is to focus on latency, which is the time a query takes to complete and return results.</span></span>  <span data-ttu-id="703ce-112">Durante l'ottimizzazione della latenza della ricerca, è importante:</span><span class="sxs-lookup"><span data-stu-id="703ce-112">When optimizing for search latency it is important to:</span></span>

1. <span data-ttu-id="703ce-113">Selezione una latenza di destinazione (o la quantità massima di tempo) che una ricerca tipica richiede per il completamento.</span><span class="sxs-lookup"><span data-stu-id="703ce-113">Pick a target latency (or maximum amount of time) that a typical search request should take to complete.</span></span>
2. <span data-ttu-id="703ce-114">Creare e testare un carico di lavoro reale nel servizio di ricerca con un set di dati reale per misurare i tassi di latenza.</span><span class="sxs-lookup"><span data-stu-id="703ce-114">Create and test a real workload against your search service with a realistic dataset to measure these latency rates.</span></span>
3. <span data-ttu-id="703ce-115">Iniziare con un numero ridotto di query al secondo (QPS) e continuare ad aumentare il numero di query testate fino a quando la latenza delle query diventa inferiore alla latenza di destinazione definita.</span><span class="sxs-lookup"><span data-stu-id="703ce-115">Start with a low number of queries per second (QPS) and continue to increase the number executed in the test until the query latency drops below the defined target latency.</span></span>  <span data-ttu-id="703ce-116">Si tratta di un benchmark importante per la pianificazione della scalabilità man mano che aumenta l'uso dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="703ce-116">This is an important benchmark to help you plan for scale as your application grows in usage.</span></span>
4. <span data-ttu-id="703ce-117">Se possibile, riusare le connessioni HTTP.</span><span class="sxs-lookup"><span data-stu-id="703ce-117">Wherever possible, reuse HTTP connections.</span></span>  <span data-ttu-id="703ce-118">Se si usa .NET SDK di Ricerca di Azure, è necessario riusare un'istanza o un'istanza [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient). Se si usa l'API REST, è necessario riusare un singolo HttpClient.</span><span class="sxs-lookup"><span data-stu-id="703ce-118">If you are using the Azure Search .NET SDK, this means you should reuse an instance or [SearchIndexClient](https://docs.microsoft.com/dotnet/api/microsoft.azure.search.searchindexclient) instance, and if you are using the REST API, you should reuse a single HttpClient.</span></span>

<span data-ttu-id="703ce-119">Durante la creazione di questi carichi di lavoro di test, è opportuno considerare alcune caratteristiche di Ricerca di Azure:</span><span class="sxs-lookup"><span data-stu-id="703ce-119">While creating these test workloads, there are some characteristics of Azure Search to keep in mind:</span></span>

1. <span data-ttu-id="703ce-120">È possibile eseguire un numero di query di ricerca per volta finché le risorse disponibili nel servizio di Ricerca di Azure non sono sovraccariche.</span><span class="sxs-lookup"><span data-stu-id="703ce-120">It is possible to push so many search queries at one time, that the resources available in your Azure Search service will be overwhelmed.</span></span>  <span data-ttu-id="703ce-121">In questo caso, vengono visualizzati i codici di risposta HTTP 503.</span><span class="sxs-lookup"><span data-stu-id="703ce-121">When this happens, you will see HTTP 503 response codes.</span></span>  <span data-ttu-id="703ce-122">Per questo motivo, è preferibile iniziare con vari intervalli di richieste di ricerca per vedere le differenze nei tassi di latenza all'aggiunta di nuove richieste di ricerca.</span><span class="sxs-lookup"><span data-stu-id="703ce-122">For this reason, it is best to start with various ranges of search requests to see the differences in latency rates as you add more search requests.</span></span>
2. <span data-ttu-id="703ce-123">Il caricamento del contenuto in Ricerca di Azure influisce sulle prestazioni complessive e sulla latenza del servizio Ricerca di Azure.</span><span class="sxs-lookup"><span data-stu-id="703ce-123">Uploading of content to Azure Search will impact the overall performance and latency of the Azure Search service.</span></span>  <span data-ttu-id="703ce-124">Se si prevede di inviare i dati mentre gli utenti eseguono ricerche, è importante prendere in considerazione questo carico di lavoro durante i test.</span><span class="sxs-lookup"><span data-stu-id="703ce-124">If you expect to send data while users are performing searches, it is important to take this workload into account in your tests.</span></span>
3. <span data-ttu-id="703ce-125">Non tutte le query di ricerca verranno eseguite con lo stesso livello di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="703ce-125">Not every search query will perform at the same performance levels.</span></span>  <span data-ttu-id="703ce-126">Ad esempio, la visualizzazione di un documento o un consiglio sulla ricerca viene generalmente eseguito più velocemente rispetto a una query con un numero significativo di facet e filtri.</span><span class="sxs-lookup"><span data-stu-id="703ce-126">For example, a document lookup or search suggestion will typically perform faster than a query with a significant number of facets and filters.</span></span>  <span data-ttu-id="703ce-127">Durante la compilazione del test, è consigliabile scegliere le varie query che si desidera vedere nel proprio account.</span><span class="sxs-lookup"><span data-stu-id="703ce-127">It is best to take the various queries you expect to see into account when building your tests.</span></span>  
4. <span data-ttu-id="703ce-128">È importante variare le richieste di ricerca perché, se si eseguono continuamente le stesse richieste, verrà avviato il caching dei dati per migliorare le prestazioni rispetto alla qualità offerta da un set di query più eterogeneo.</span><span class="sxs-lookup"><span data-stu-id="703ce-128">Variation of search requests is important because if you continually execute the same search requests, caching of data will start to make performance look better than it might with a more disparate query set.</span></span>

> [!NOTE]
> <span data-ttu-id="703ce-129">[Il test di carico di Visual Studio](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) è un metodo molto valido per eseguire i test di benchmark in quanto consente di eseguire le richieste HTTP nello stesso modo richiesto per l'esecuzione di query con Ricerca di Azure e consente la parallelizzazione delle richieste.</span><span class="sxs-lookup"><span data-stu-id="703ce-129">[Visual Studio Load Testing](https://www.visualstudio.com/docs/test/performance-testing/run-performance-tests-app-before-release) is a really good way to perform your benchmark tests as it allows you to execute HTTP requests as you would need for executing queries against Azure Search and enables parallelization of requests.</span></span>
> 
> 

## <a name="scaling-azure-search-for-high-query-rates-and-throttled-requests"></a><span data-ttu-id="703ce-130">Ridimensionamento di Ricerca di Azure per tassi elevati di query e richieste limitate</span><span class="sxs-lookup"><span data-stu-id="703ce-130">Scaling Azure Search for high query rates and throttled requests</span></span>
<span data-ttu-id="703ce-131">Quando si ricevono troppe richieste limitate o si superano i tassi di latenza di destinazione da un carico maggiore di query, è possibile considerare di ridurre il tasso di latenza in uno dei due modi seguenti:</span><span class="sxs-lookup"><span data-stu-id="703ce-131">When you are receiving too many throttled requests or exceed your target latency rates from an increased query load, you can look to decrease latency rates in one of two ways:</span></span>

1. <span data-ttu-id="703ce-132">**Aumentare le repliche:** una replica è una copia dei dati che consente a Ricerca di Azure di bilanciare il carico con le numerose copie.</span><span class="sxs-lookup"><span data-stu-id="703ce-132">**Increase Replicas:**  A replica is like a copy of your data allowing Azure Search to load balance requests against the multiple copies.</span></span>  <span data-ttu-id="703ce-133">Il bilanciamento del carico e la replica dei dati tra le repliche vengono gestiti da Ricerca di Azure ed è possibile modificare in qualsiasi momento il numero delle repliche allocate per il servizio.</span><span class="sxs-lookup"><span data-stu-id="703ce-133">All load balancing and replication of data across replicas is managed by Azure Search and you can alter the number of replicas allocated for your service at any time.</span></span>  <span data-ttu-id="703ce-134">È possibile allocare fino a 12 repliche in un servizio di ricerca Standard e 3 repliche in un servizio di ricerca Basic.</span><span class="sxs-lookup"><span data-stu-id="703ce-134">You can allocate up to 12 replicas in a Standard search service and 3 replicas in a Basic search service.</span></span> <span data-ttu-id="703ce-135">Le repliche possono essere modificate dal [portale di Azure](search-create-service-portal.md) o da [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="703ce-135">Replicas can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="703ce-136">**Aumentare il livello di Ricerca:** sono disponibili [diversi livelli](https://azure.microsoft.com/pricing/details/search/) per Ricerca di Azure, ognuno dei quali offre diversi livelli di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="703ce-136">**Increase Search Tier:**  Azure Search comes in a [number of tiers](https://azure.microsoft.com/pricing/details/search/) and each of these tiers offers different levels of performance.</span></span>  <span data-ttu-id="703ce-137">In alcuni casi, è possibile che l'utente disponga di un numero talmente elevato di query che il livello a cui appartiene non fornisce tassi di latenza sufficientemente bassi, anche quando si raggiunge il limite massimo delle repliche.</span><span class="sxs-lookup"><span data-stu-id="703ce-137">In some cases, you may have so many queries that the tier you are on cannot provide sufficiently low latency rates, even when replicas are maxed out.</span></span>  <span data-ttu-id="703ce-138">In questo caso, è consigliabile considerare di usare uno dei livelli di Ricerca di Azure più elevati, ad esempio il livello S3, adatto a scenari con un numero elevato di documenti e carichi di lavoro delle query estremamente elevati.</span><span class="sxs-lookup"><span data-stu-id="703ce-138">In this case, you may want to consider leveraging one of the higher search tiers such as the Azure Search S3 tier that is well suited for scenarios with large numbers of documents and extremely high query workloads.</span></span>

## <a name="scaling-azure-search-for-slow-individual-queries"></a><span data-ttu-id="703ce-139">Ridimensionamento di Ricerca di Azure per le singole query lente</span><span class="sxs-lookup"><span data-stu-id="703ce-139">Scaling Azure Search for slow individual queries</span></span>
<span data-ttu-id="703ce-140">Un altro motivo per cui il tasso di latenza può essere lento è una singola query che impiega troppo tempo.</span><span class="sxs-lookup"><span data-stu-id="703ce-140">Another reason why latency rates can be slow is from a single query taking too long to complete.</span></span>  <span data-ttu-id="703ce-141">In questo caso, l'aggiunta di repliche non migliorerà il tasso di latenza.</span><span class="sxs-lookup"><span data-stu-id="703ce-141">In this case, adding replicas will not improve latency rates.</span></span>  <span data-ttu-id="703ce-142">In questo caso sono disponibili due opzioni:</span><span class="sxs-lookup"><span data-stu-id="703ce-142">For this case there are two options available:</span></span>

1. <span data-ttu-id="703ce-143">**Aumentare le partizioni**: una partizione è un meccanismo per la suddivisione dei dati tra le risorse aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="703ce-143">**Increase Partitions** A partition is a mechanism for splitting your data across extra resources.</span></span>  <span data-ttu-id="703ce-144">Per questo motivo, quando si aggiunge una seconda partizione, si ottengono dati divisi in due parti.</span><span class="sxs-lookup"><span data-stu-id="703ce-144">For this reason, when you add a second partition, your data gets split into two.</span></span>  <span data-ttu-id="703ce-145">Una terza partizione suddivide l'indice in tre parti e così via.  Questo fattore, in alcuni casi, si traduce in un aumento di velocità delle query lente grazie alla parallelizzazione del calcolo.</span><span class="sxs-lookup"><span data-stu-id="703ce-145">A third partition splits your index into three, etc.  This also has the effect that in some cases, slow queries will perform faster due to the parallelization of computation.</span></span>  <span data-ttu-id="703ce-146">Sono disponibili alcuni esempi dell'efficienza della parallelizzazione con query che dispongono di query a selettività ridotta.</span><span class="sxs-lookup"><span data-stu-id="703ce-146">There are a few examples of where we have seen this parallelization work extremely well with queries that have low selectivity queries.</span></span>  <span data-ttu-id="703ce-147">Si tratta di query che corrispondono a molti documenti o ai casi in cui i facet devono fornire calcoli su un grande numero di documenti.</span><span class="sxs-lookup"><span data-stu-id="703ce-147">This consists of queries that match many documents or when faceting needs to provide counts over large numbers of documents.</span></span>  <span data-ttu-id="703ce-148">Poiché sono necessari molti calcoli per valutare la rilevanza dei documenti o per calcolare il numero dei documenti, l'aggiunta di altre partizioni consente di fornire calcoli aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="703ce-148">Since there is a lot of computation needed to score the relevancy of the documents or to count the numbers of documents, adding extra partitions can help to provide additional computation.</span></span>  
   
   <span data-ttu-id="703ce-149">Il servizio di ricerca Standard offe fino a un massimo di 12 partizioni, mentre il servizio Basic offre 1 partizione.</span><span class="sxs-lookup"><span data-stu-id="703ce-149">There can be a maximum of 12 partitions in Standard search service and 1 partition in the basic search service.</span></span>  <span data-ttu-id="703ce-150">Le partizioni possono essere modificate dal [portale di Azure](search-create-service-portal.md) o da [PowerShell](search-manage-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="703ce-150">Partitions can be adjusted either from the [Azure portal](search-create-service-portal.md) or [PowerShell](search-manage-powershell.md).</span></span>
2. <span data-ttu-id="703ce-151">**Limitare i campi a cardinalità elevata:** un campo a cardinalità elevata è costituito da un facet o da un campo filtrabile che dispone di un numero significativo di valori univoci e, di conseguenza, richiede molte risorse per calcolare i risultati.</span><span class="sxs-lookup"><span data-stu-id="703ce-151">**Limit High Cardinality Fields:** A high cardinality field consists of a facetable or filterable field that has a significant number of unique values, and as a result, takes a lot of resources to compute results over.</span></span>   <span data-ttu-id="703ce-152">Ad esempio, l'impostazione di un campo ID prodotto o la descrizione come facet/filtrabile comporterebbe un'elevata cardinalità perché la maggior parte dei valori dei documenti è univoca.</span><span class="sxs-lookup"><span data-stu-id="703ce-152">For example, setting a Product ID or Description field as facetable/filterable would make for high cardinality because most of the values from document to document are unique.</span></span> <span data-ttu-id="703ce-153">Se possibile, limitare il numero di campi a cardinalità elevata.</span><span class="sxs-lookup"><span data-stu-id="703ce-153">Wherever possible, limit the number of high cardinality fields.</span></span>
3. <span data-ttu-id="703ce-154">**Aumentare il livello di Ricerca:** il passaggio a un livello superiore di Ricerca di Azure può essere un altro modo per migliorare le prestazioni delle query lente.</span><span class="sxs-lookup"><span data-stu-id="703ce-154">**Increase Search Tier:**  Moving up to a higher Azure Search tier can be another way to improve performance of slow queries.</span></span>  <span data-ttu-id="703ce-155">Ogni livello superiore fornisce CPU più veloce e memoria più ampia, elementi che possono avere un impatto positivo sulle prestazioni delle query.</span><span class="sxs-lookup"><span data-stu-id="703ce-155">Each higher tier also provides faster CPU’s and more memory which can have a positive impact on query performance.</span></span>

## <a name="scaling-for-availability"></a><span data-ttu-id="703ce-156">Ridimensionamento per la disponibilità</span><span class="sxs-lookup"><span data-stu-id="703ce-156">Scaling for availability</span></span>
<span data-ttu-id="703ce-157">Le repliche non solo consentono di ridurre la latenza delle query ma possono anche favorire una disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="703ce-157">Replicas not only help reduce query latency but can also allow for high availability.</span></span>  <span data-ttu-id="703ce-158">Con una singola replica, è necessario prevedere un tempo di inattività periodico dovuto al riavvio del server dopo gli aggiornamenti software o per altri interventi di manutenzione.</span><span class="sxs-lookup"><span data-stu-id="703ce-158">With a single replica, you should expect periodic downtime due to server reboots after software updates or for other maintenance events that will occur.</span></span>  <span data-ttu-id="703ce-159">Di conseguenza, è importante considerare se l'applicazione richiede disponibilità elevata di ricerche, ovvero query, e operazioni di scrittura, ovvero eventi indicizzazione.</span><span class="sxs-lookup"><span data-stu-id="703ce-159">As a result, it is important to consider if your application requires high availability of searches (queries) as well as writes (indexing events).</span></span>  <span data-ttu-id="703ce-160">Ricerca di Azure offre opzioni di Contratto di servizio in tutte le offerte a pagamento, con le caratteristiche seguenti:</span><span class="sxs-lookup"><span data-stu-id="703ce-160">Azure Search offers SLA options on all the paid search offerings with the following attributes:</span></span>

* <span data-ttu-id="703ce-161">2 repliche per la disponibilità elevata dei carichi di lavoro di sola lettura (query)</span><span class="sxs-lookup"><span data-stu-id="703ce-161">2 replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="703ce-162">3 o più repliche per la disponibilità elevata dei carichi di lavoro di lettura/scrittura (query e indicizzazione)</span><span class="sxs-lookup"><span data-stu-id="703ce-162">3 or more replicas for high availability of read-write workloads (queries and indexing)</span></span>

<span data-ttu-id="703ce-163">Per ulteriori informazioni, visitare il [Contratto di Servizio per Ricerca di Azure](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="703ce-163">For more details on this, please visit the [Azure Search Service Level Agreement](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>

<span data-ttu-id="703ce-164">Poiché le repliche sono copie dei dati, la presenza di più repliche consente a Ricerca di Azure di riavviare le macchine e di eseguire la manutenzione su una replica per volta, consentendo allo stesso tempo l'esecuzione delle query sulle altre repliche.</span><span class="sxs-lookup"><span data-stu-id="703ce-164">Since replicas are copies of your data, having multiple replicas allows Azure Search to do machine reboots and maintenance against one replica at a time while allowing queries to continue to be executed against the other replicas.</span></span>  <span data-ttu-id="703ce-165">Per questo motivo, è necessario anche considerare in che modo il tempo di inattività può influire sulle query che devono ora essere eseguite su una copia dei dati in meno.</span><span class="sxs-lookup"><span data-stu-id="703ce-165">For that reason, you will also need to consider how this downtime may impact the queries that now have to be executed against one less copy of the data.</span></span>

## <a name="scaling-geo-distributed-workloads-and-provide-geo-redundancy"></a><span data-ttu-id="703ce-166">Ridimensionamento dei carichi di lavoro distribuiti geograficamente e ridondanza geografica</span><span class="sxs-lookup"><span data-stu-id="703ce-166">Scaling geo-distributed workloads and provide geo-redundancy</span></span>
<span data-ttu-id="703ce-167">Per i carichi di lavoro distribuiti geograficamente, si noterà che gli utenti lontani dal data center in cui è ospitato il servizio Ricerca di Azure registrano tassi di latenza superiori.</span><span class="sxs-lookup"><span data-stu-id="703ce-167">For geo-distributed workloads, you will find that users located far from the data center where your Azure Search service is hosted will have higher latency rates.</span></span>  <span data-ttu-id="703ce-168">Per questo motivo, è spesso importante disporre di più servizi di ricerca nelle aree vicine a tali utenti.</span><span class="sxs-lookup"><span data-stu-id="703ce-168">For this reason, it is often important to have multiple search services in regions that are in closer proximity to these users.</span></span>  <span data-ttu-id="703ce-169">Ricerca di Azure attualmente non fornisce un metodo automatizzato per la replica geografica degli indici di Ricerca di Azure tra le aree, ma esistono alcune tecniche che semplificano l'implementazione e la gestione del processo.</span><span class="sxs-lookup"><span data-stu-id="703ce-169">Azure Search does not currently provide an automated method of geo-replicating Azure Search indexes across regions, but there are some techniques that can be used that can make this process simple to implement and manage.</span></span> <span data-ttu-id="703ce-170">Queste tecniche vengono illustrate nelle prossime sezioni.</span><span class="sxs-lookup"><span data-stu-id="703ce-170">These are outlined in the next few sections.</span></span>

<span data-ttu-id="703ce-171">L'obiettivo di un set di servizi di ricerca distribuito geograficamente consiste nel disporre di due o più indici disponibili in due o più aree in cui un utente verrà reindirizzato al servizio di Ricerca di Azure che offre il tasso di latenza più basso, come illustrato in questo esempio:</span><span class="sxs-lookup"><span data-stu-id="703ce-171">The goal of a geo-distributed set of search services is to have two or more indexes available in two or more regions where a user will be routed to the Azure Search service that provides the lowest latency as seen in this example:</span></span>

   ![Incrocio dei servizi per area][1]

### <a name="keeping-data-in-sync-across-multiple-azure-search-services"></a><span data-ttu-id="703ce-173">Mantenere sincronizzati i dati tra più servizi di Ricerca di Azure</span><span class="sxs-lookup"><span data-stu-id="703ce-173">Keeping data in sync across multiple Azure Search services</span></span>
<span data-ttu-id="703ce-174">Sono disponibili due opzioni per mantenere sincronizzati i servizi di ricerca distribuiti: l'uso dell'[indicizzatore di Ricerca di Azure](search-indexer-overview.md) o l'API Push, conosciuta anche come [API REST di Ricerca di Azure](https://docs.microsoft.com/rest/api/searchservice/).</span><span class="sxs-lookup"><span data-stu-id="703ce-174">There are two options for keeping your distributed search services in sync which consist of either using the [Azure Search Indexer](search-indexer-overview.md) or the Push API (also referred to as the [Azure Search REST API](https://docs.microsoft.com/rest/api/searchservice/)).</span></span>  

### <a name="azure-search-indexers"></a><span data-ttu-id="703ce-175">Indicizzatori di Ricerca di Azure</span><span class="sxs-lookup"><span data-stu-id="703ce-175">Azure Search Indexers</span></span>
<span data-ttu-id="703ce-176">Se si usa l'indicizzatore di Ricerca di Azure, si importano le modifiche ai dati da un archivio dati centrale, ad esempio database SQL di Azure o Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="703ce-176">If you are using the Azure Search Indexer, you are already importing data changes from a central datastore such as Azure SQL DB or Azure Cosmos DB.</span></span> <span data-ttu-id="703ce-177">Quando si crea un nuovo servizio di Ricerca, è sufficiente creare un nuovo indicizzatore di Ricerca di Azure per il servizio creato, che punta allo stesso archivio dati.</span><span class="sxs-lookup"><span data-stu-id="703ce-177">When you create a new search Service, you simply also create a new Azure Search Indexer for that service that points to this same datastore.</span></span> <span data-ttu-id="703ce-178">In questo modo, ogni volta che le nuove modifiche entrano nell'archivio dati, vengono indicizzate dai diversi indicizzatori.</span><span class="sxs-lookup"><span data-stu-id="703ce-178">That way, whenever new changes come into the data store, they will then be indexed by the various Indexers.</span></span>  

<span data-ttu-id="703ce-179">Di seguito è riportato un esempio dell'aspetto dell'architettura.</span><span class="sxs-lookup"><span data-stu-id="703ce-179">Here is an example of what that architecture would look like.</span></span>

   ![Singola origine dati con indicizzatore distribuito e combinazioni di servizio][2]

### <a name="push-api"></a><span data-ttu-id="703ce-181">API Push</span><span class="sxs-lookup"><span data-stu-id="703ce-181">Push API</span></span>
<span data-ttu-id="703ce-182">Se si usa l'API Push di Ricerca di Azure per [aggiornare il contenuto dell'indice di Ricerca di Azure](https://docs.microsoft.com/rest/api/searchservice/update-index), è possibile mantenere sincronizzati i vari servizi di ricerca trasferendo le modifiche apportate a tutti i servizi di ricerca ogni volta che è necessario un aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="703ce-182">If you are using the Azure Search Push API to [update content in your Azure Search index](https://docs.microsoft.com/rest/api/searchservice/update-index), you can keep your various search services in sync by pushing changes to all search services whenever an update is required.</span></span>  <span data-ttu-id="703ce-183">Quando si esegue questa operazione è importante verificare di gestire i casi in cui si verifica un errore nell'aggiornamento del servizio di ricerca e i casi in cui uno o più aggiornamenti hanno esito positivo.</span><span class="sxs-lookup"><span data-stu-id="703ce-183">When doing this it is important to make sure to handle cases where an update to one search service fails and one or more updates succeed.</span></span>

## <a name="leveraging-azure-traffic-manager"></a><span data-ttu-id="703ce-184">Uso di Gestione traffico di Azure</span><span class="sxs-lookup"><span data-stu-id="703ce-184">Leveraging Azure Traffic Manager</span></span>
<span data-ttu-id="703ce-185">[Gestione traffico di Azure](../traffic-manager/traffic-manager-overview.md) consente di indirizzare le richieste su più siti Web geograficamente localizzati e supportati da più servizi di Ricerca di Azure.</span><span class="sxs-lookup"><span data-stu-id="703ce-185">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md) allows you to route requests to multiple geo-located websites that are then backed by multiple Azure Search Services.</span></span>  <span data-ttu-id="703ce-186">Uno dei vantaggi di Gestione traffico è la capacità di esplorare Ricerca di Azure per garantire che sia disponibile e di indirizzare gli utenti a servizi di ricerca alternativi in caso di tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="703ce-186">One advantage of the Traffic Manager is that it can probe Azure Search to ensure that it is available and route users to alternate search services in the event of downtime.</span></span>  <span data-ttu-id="703ce-187">In aggiunta, se si esegue il routing delle richieste di ricerca tramite siti Web di Azure, Gestione traffico di Azure consente di bilanciare i casi in cui il sito Web è attivo ma Ricerca di Azure non lo è.</span><span class="sxs-lookup"><span data-stu-id="703ce-187">In addition, if you are routing search requests through Azure Web Sites, Azure Traffic Manager allows you to load balance cases where the Website is up but not Azure Search.</span></span>  <span data-ttu-id="703ce-188">Di seguito è riportato un esempio di un'architettura che usa Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="703ce-188">Here is an example of what the architecture that leverages Traffic Manager.</span></span>

   ![Incrocio dei servizi per area con Gestione traffico centrale][3]

## <a name="monitoring-performance"></a><span data-ttu-id="703ce-190">Monitoraggio delle prestazioni</span><span class="sxs-lookup"><span data-stu-id="703ce-190">Monitoring performance</span></span>
<span data-ttu-id="703ce-191">Ricerca di Azure offre la possibilità di analizzare e monitorare le prestazioni del servizio tramite [Analisi del traffico di ricerca (STA)](search-traffic-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="703ce-191">Azure Search offers the ability to analyze and monitor the performance of your service through [Search Traffic Analytics (STA)](search-traffic-analytics.md).</span></span> <span data-ttu-id="703ce-192">Tramite il servizio STA è possibile registrare le singole operazioni di ricerca e le metriche di aggregazione su un account di archiviazione di Azure che può essere elaborato per l'analisi o visualizzato in Power BI.</span><span class="sxs-lookup"><span data-stu-id="703ce-192">Through STA, you can optionally log the individual search operations as well as aggregated metrics to an Azure Storage account that can then be processed for analysis or visualized in Power BI.</span></span>  <span data-ttu-id="703ce-193">Con le metriche STA, è possibile esaminare le statistiche sulle prestazioni, ad esempio il numero medio delle query o i tempi di risposta alle query.</span><span class="sxs-lookup"><span data-stu-id="703ce-193">Using STA metrics, you can review performance statistics such as average number of queries or query response times.</span></span>  <span data-ttu-id="703ce-194">In aggiunta, la registrazione delle operazioni consente di esaminare i dettagli di operazioni di ricerca specifiche.</span><span class="sxs-lookup"><span data-stu-id="703ce-194">In addition, the operation logging allows you to drill into details of specific search operations.</span></span>

<span data-ttu-id="703ce-195">STA è uno strumento utile per comprendere i tassi di latenza da tale punto di vista di Ricerca di Azure.</span><span class="sxs-lookup"><span data-stu-id="703ce-195">STA is a valuable tool to understand latency rates from that Azure Search perspective.</span></span>  <span data-ttu-id="703ce-196">Poiché le metriche sulle prestazioni delle query registrate sono basate sul tempo necessario per l'elaborazione della query in Ricerca di Azure, ovvero dal momento della richiesta al momento del completamento, è possibile usare questa opzione per determinare se i problemi di latenza provengono dal servizio di Ricerca di Azure o dall'esterno del servizio, ad esempio dalla latenza di rete.</span><span class="sxs-lookup"><span data-stu-id="703ce-196">Since the query performance metrics logged are based on the time a query takes to be fully processed in Azure Search (from the time it is requested to when it is sent out), you are able to use this to determine if latency issues are from the Azure Search service side or outside of the service, such as from network latency.</span></span>  

## <a name="next-steps"></a><span data-ttu-id="703ce-197">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="703ce-197">Next steps</span></span>
<span data-ttu-id="703ce-198">Per altre informazioni sui piani tariffari e sui limiti dei servizi, vedere [Limiti dei servizi in Ricerca di Azure](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="703ce-198">To learn more about the pricing tiers and services limits for each one, see [Service limits in Azure Search](search-limits-quotas-capacity.md).</span></span>

<span data-ttu-id="703ce-199">Per altre informazioni sulle combinazioni di partizione e replica, vedere [Pianificazione della capacità](search-capacity-planning.md) .</span><span class="sxs-lookup"><span data-stu-id="703ce-199">Visit [Capacity planning](search-capacity-planning.md) to learn more about partition and replica combinations.</span></span>

<span data-ttu-id="703ce-200">Per maggiori dettagli sulle prestazioni e per vedere alcune dimostrazioni su come implementare le ottimizzazioni descritte in questo articolo, guardare il video seguente:</span><span class="sxs-lookup"><span data-stu-id="703ce-200">For more drilldown on performance and to see some demonstrations of how to implement the optimizations discussed in this article, watch the following video:</span></span>

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<!--Image references-->
[1]: ./media/search-performance-optimization/geo-redundancy.png
[2]: ./media/search-performance-optimization/scale-indexers.png
[3]: ./media/search-performance-optimization/geo-search-traffic-mgr.png
