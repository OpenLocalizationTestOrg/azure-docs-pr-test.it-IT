---
title: le applicazioni web in tempo reale aaaProfiling in Azure con Application Insights | Documenti Microsoft
description: Identificare percorso critico di hello nel codice server web con un profiler footprint ridotto.
services: application-insights
documentationcenter: 
author: CFreemanwa
manager: carmonm
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 05/04/2017
ms.author: bwren
ms.openlocfilehash: 3c7f21076f19335e0f006327932e13623ec9526b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="profiling-live-azure-web-apps-with-application-insights"></a><span data-ttu-id="06344-103">Profilatura delle app Web di Azure attive con Application Insights</span><span class="sxs-lookup"><span data-stu-id="06344-103">Profiling live Azure web apps with Application Insights</span></span>

<span data-ttu-id="06344-104">*Questa funzionalità di Application Insights è GA per i servizi app e in anteprima per il calcolo.*</span><span class="sxs-lookup"><span data-stu-id="06344-104">*This feature of Application Insights is GA for App Services and in preview for Compute.*</span></span>

<span data-ttu-id="06344-105">Scoprire come tempo speso per ogni metodo nell'applicazione web in tempo reale tramite lo strumento di profilatura hello [Azure Application Insights](app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="06344-105">Find out how much time is spent in each method in your live web application by using hello profiling tool of [Azure Application Insights](app-insights-overview.md).</span></span> <span data-ttu-id="06344-106">Consente di visualizzare dettagliati profili di richieste in tempo reale che sono state soddisfatte dall'app ed evidenzia hello 'percorso critico' che utilizza ora la maggior parte delle hello.</span><span class="sxs-lookup"><span data-stu-id="06344-106">It shows you detailed profiles of live requests that were served by your app, and highlights hello 'hot path' that is using hello most time.</span></span> <span data-ttu-id="06344-107">Seleziona automaticamente esempi con tempi di risposta diversi.</span><span class="sxs-lookup"><span data-stu-id="06344-107">It automatically selects examples that have different response times.</span></span> <span data-ttu-id="06344-108">profiler Hello utilizza overhead di toominimize varie tecniche.</span><span class="sxs-lookup"><span data-stu-id="06344-108">hello profiler uses various techniques toominimize overhead.</span></span>

<span data-ttu-id="06344-109">Hello profiler attualmente può essere usato per ASP.NET web App in esecuzione su servizi di App di Azure, in almeno hello a livello di prezzo Basic.</span><span class="sxs-lookup"><span data-stu-id="06344-109">hello profiler currently works for ASP.NET web apps running on Azure App Services, in at least hello Basic pricing tier.</span></span> 

<a id="installation"></a>
## <a name="enable-hello-profiler"></a><span data-ttu-id="06344-110">Attivare il profiler hello</span><span class="sxs-lookup"><span data-stu-id="06344-110">Enable hello profiler</span></span>

<span data-ttu-id="06344-111">[Installare Application Insights](app-insights-asp-net.md) nel codice.</span><span class="sxs-lookup"><span data-stu-id="06344-111">[Install Application Insights](app-insights-asp-net.md) in your code.</span></span> <span data-ttu-id="06344-112">Se è già installato, verificare di che aver la versione più recente di hello.</span><span class="sxs-lookup"><span data-stu-id="06344-112">If it's already installed, make sure you have hello latest version.</span></span> <span data-ttu-id="06344-113">(toodo, mouse sul progetto in Esplora soluzioni e scegliere Gestione pacchetti NuGet.</span><span class="sxs-lookup"><span data-stu-id="06344-113">(toodo this, right-click your project in Solution Explorer, and choose Manage NuGet packages.</span></span> <span data-ttu-id="06344-114">Selezionare gli aggiornamenti e aggiornare tutti i pacchetti. Distribuire nuovamente l'app.</span><span class="sxs-lookup"><span data-stu-id="06344-114">Select Updates and update all packages.) Re-deploy your app.</span></span>

<span data-ttu-id="06344-115">*Uso di ASP.NET Core [Fare clic qui](#aspnetcore)*.</span><span class="sxs-lookup"><span data-stu-id="06344-115">*Using ASP.NET Core? [Check here](#aspnetcore).*</span></span>

<span data-ttu-id="06344-116">In [https://portal.azure.com](https://portal.azure.com), aprire la risorsa di Application Insights hello per le app web.</span><span class="sxs-lookup"><span data-stu-id="06344-116">In [https://portal.azure.com](https://portal.azure.com), open hello Application Insights resource for your web app.</span></span> <span data-ttu-id="06344-117">Aprire **Prestazioni** e fare clic su **Abilita Application Insights Profiler...**.</span><span class="sxs-lookup"><span data-stu-id="06344-117">Open **Performance** and click **Enable Application Insights Profiler...**.</span></span>

![Fare clic sull'intestazione di profiler enable hello][enable-profiler-banner]

<span data-ttu-id="06344-119">In alternativa, è sempre possibile fare clic **configura** stato tooview, abilitare o disabilitare hello Profiler.</span><span class="sxs-lookup"><span data-stu-id="06344-119">Alternatively, you can always click **Configure** tooview status, enable, or disable hello Profiler.</span></span>

![Nel pannello prestazioni hello, fare clic su Configura][performance-blade]

<span data-ttu-id="06344-121">Le app Web configurate con Application Insights sono elencate nel pannello Configura.</span><span class="sxs-lookup"><span data-stu-id="06344-121">Web apps that are configured with Application Insights are listed on Configure blade.</span></span> <span data-ttu-id="06344-122">Seguire le istruzioni tooinstall hello Profiler agente se necessario.</span><span class="sxs-lookup"><span data-stu-id="06344-122">Follow instructions tooinstall hello Profiler agent if needed.</span></span> <span data-ttu-id="06344-123">Se nessuna app Web è stata ancora configurata con Application Insights, fare clic su *Add Linked Apps* (Aggiungere app collegate).</span><span class="sxs-lookup"><span data-stu-id="06344-123">If no web app is configured with Application Insights yet, click *Add Linked Apps*.</span></span>

<span data-ttu-id="06344-124">Hello utilizzare *abilitare Profiler* o *disabilitare Profiler* pulsanti hello Configura pannello toocontrol hello Profiler in tutte le app web collegati.</span><span class="sxs-lookup"><span data-stu-id="06344-124">Use hello *Enable Profiler* or *Disable Profiler* buttons in hello Configure blade toocontrol hello Profiler on all your linked web apps.</span></span>



![Pannello Configura][linked app services]

<span data-ttu-id="06344-126">profiler hello toostop o il riavvio per una singola istanza di servizio App, risulterà **nella risorsa di servizio App hello**nella **processi Web**.</span><span class="sxs-lookup"><span data-stu-id="06344-126">toostop or restart hello profiler for an individual App Service instance, you'll find it **in hello App Service resource**, in **Web Jobs**.</span></span> <span data-ttu-id="06344-127">toodelete che cerca in **estensioni**.</span><span class="sxs-lookup"><span data-stu-id="06344-127">toodelete it, look under **Extensions**.</span></span>

![Disabilitare il profiler per un processo Web][disable-profiler-webjob]

<span data-ttu-id="06344-129">Si consiglia di disporre di hello Profiler abilitato in tutti i toodiscover App web un miglioramento delle prestazioni problemi appena possibile.</span><span class="sxs-lookup"><span data-stu-id="06344-129">We recommend that you have hello Profiler enabled on all your web apps toodiscover any performance issues as soon as possible.</span></span>

<span data-ttu-id="06344-130">Se si utilizza l'applicazione web di WebDeploy toodeploy modifiche tooyour, assicurarsi che si esclude hello **App_Data** cartella venga eliminato durante la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="06344-130">If you use WebDeploy toodeploy changes tooyour web application, ensure that you exclude hello **App_Data** folder from being deleted during deployment.</span></span> <span data-ttu-id="06344-131">In caso contrario, hello file dell'estensione di profiler verrà eliminato alla successiva distribuzione tooAzure applicazione web di hello.</span><span class="sxs-lookup"><span data-stu-id="06344-131">Otherwise, hello profiler extension's files will be deleted when you next deploy hello web application tooAzure.</span></span>

### <a name="using-profiler-with-azure-vms-and-compute-resources-preview"></a><span data-ttu-id="06344-132">Uso del profiler con le macchine virtuali di Azure e le risorse di calcolo (anteprima)</span><span class="sxs-lookup"><span data-stu-id="06344-132">Using profiler with Azure VMs and Compute resources (preview)</span></span>

<span data-ttu-id="06344-133">Quando si [abilita Application Insights per i servizi app di Azure in fase di esecuzione](app-insights-azure-web-apps.md#run-time-instrumentation-with-application-insights), il profiler è automaticamente disponibile.</span><span class="sxs-lookup"><span data-stu-id="06344-133">When you [enable Application Insights for Azure app services at run time](app-insights-azure-web-apps.md#run-time-instrumentation-with-application-insights), Profiler is automatically available.</span></span> <span data-ttu-id="06344-134">(Se già abilitato Application Insights per la risorsa hello, potrebbe essere necessario tooupdate toohello lates versione tramite hello **configura** procedura guidata.)</span><span class="sxs-lookup"><span data-stu-id="06344-134">(If you already enabled Application Insights for hello resource, you might need tooupdate toohello lates version through hello **Configure** wizard.)</span></span>

<span data-ttu-id="06344-135">È presente un [versione di anteprima di hello Profiler per le risorse di calcolo di Azure](https://go.microsoft.com/fwlink/?linkid=848155).</span><span class="sxs-lookup"><span data-stu-id="06344-135">There is a [preview version of hello Profiler for Azure Compute resources](https://go.microsoft.com/fwlink/?linkid=848155).</span></span>


## <a name="limits"></a><span data-ttu-id="06344-136">Limiti</span><span class="sxs-lookup"><span data-stu-id="06344-136">Limits</span></span>

<span data-ttu-id="06344-137">conservazione dei dati di Hello predefinito è 5 giorni.</span><span class="sxs-lookup"><span data-stu-id="06344-137">hello default data retention is 5 days.</span></span> <span data-ttu-id="06344-138">Massimo 10 GB inseriti al giorno.</span><span class="sxs-lookup"><span data-stu-id="06344-138">Maximum 10 GB ingested per day.</span></span>

<span data-ttu-id="06344-139">Non è previsto alcun addebito per il servizio profiler hello.</span><span class="sxs-lookup"><span data-stu-id="06344-139">There is no charge for hello profiler service.</span></span> <span data-ttu-id="06344-140">L'app web deve essere ospitato in hello almeno del livello Basic di servizi di App.</span><span class="sxs-lookup"><span data-stu-id="06344-140">Your web app must be hosted in at least hello Basic tier of App Services.</span></span>

## <a name="viewing-profiler-data"></a><span data-ttu-id="06344-141">Visualizzazione dei dati del profiler</span><span class="sxs-lookup"><span data-stu-id="06344-141">Viewing profiler data</span></span>

<span data-ttu-id="06344-142">Aprire il pannello di prestazioni hello e scorrere verso il basso l'elenco di operazioni toohello.</span><span class="sxs-lookup"><span data-stu-id="06344-142">Open hello Performance blade and scroll down toohello operation list.</span></span>




![Colonna di esempi del pannello delle prestazioni di Application Insights][performance-blade-examples]

<span data-ttu-id="06344-144">Hello colonne nella tabella hello sono:</span><span class="sxs-lookup"><span data-stu-id="06344-144">hello columns in hello table are:</span></span>

* <span data-ttu-id="06344-145">**Conteggio** -numero di tali richieste nell'intervallo di tempo hello del pannello hello hello.</span><span class="sxs-lookup"><span data-stu-id="06344-145">**Count** - hello number of these requests in hello time range of hello blade.</span></span>
* <span data-ttu-id="06344-146">**Mediana** -hello tipico tempo app toorespond tooa richiesta.</span><span class="sxs-lookup"><span data-stu-id="06344-146">**Median** - hello typical time your app takes toorespond tooa request.</span></span> <span data-ttu-id="06344-147">La metà di tutte le risposte è più veloce rispetto a questo valore.</span><span class="sxs-lookup"><span data-stu-id="06344-147">Half of all responses were faster than this.</span></span>
* <span data-ttu-id="06344-148">**95° percentile**: il 95% delle risposte ha una velocità superiore rispetto a questo valore.</span><span class="sxs-lookup"><span data-stu-id="06344-148">**95th percentile** 95% of responses were faster than this.</span></span> <span data-ttu-id="06344-149">Se questa figura è molto diversa dal valore mediano di hello, potrebbe esserci un problema intermittente con l'app.</span><span class="sxs-lookup"><span data-stu-id="06344-149">If this figure is very different from hello median, there might be an intermittent problem with your app.</span></span> <span data-ttu-id="06344-150">In alternativa la causa potrebbe essere una funzione di progettazione, ad esempio la memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="06344-150">(Or it might be explained by a design feature such as caching.)</span></span>
* <span data-ttu-id="06344-151">**Esempi di** -un'icona indica che il profiler hello ha acquisito le analisi dello stack per questa operazione.</span><span class="sxs-lookup"><span data-stu-id="06344-151">**Examples** - an icon indicates that hello profiler has captured stack traces for this operation.</span></span>

<span data-ttu-id="06344-152">Fare clic su Esplora di hello esempi icona tooopen hello traccia.</span><span class="sxs-lookup"><span data-stu-id="06344-152">Click hello Examples icon tooopen hello trace explorer.</span></span> <span data-ttu-id="06344-153">Hello explorer mostra alcuni esempi in cui hello profiler ha acquisito, classificati per tempo di risposta.</span><span class="sxs-lookup"><span data-stu-id="06344-153">hello explorer shows several samples that hello profiler has captured, classified by response time.</span></span>

<span data-ttu-id="06344-154">Selezionare un tooshow esempio dettagli a livello di codice di tempo impiegato per richiesta hello in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="06344-154">Select a sample tooshow a code-level breakdown of time spent executing hello request.</span></span>

![Explorer di analisi Application Insights][trace-explorer]

<span data-ttu-id="06344-156">**Mostra percorso ricorrente** apre hello principale nodo foglia o chiudere almeno un valore.</span><span class="sxs-lookup"><span data-stu-id="06344-156">**Show hot path** opens hello biggest leaf node, or at least something close.</span></span> <span data-ttu-id="06344-157">Nella maggior parte dei casi questo nodo sarà collo di bottiglia delle prestazioni tooa adiacenti.</span><span class="sxs-lookup"><span data-stu-id="06344-157">In most cases this node will be adjacent tooa performance bottleneck.</span></span>



* <span data-ttu-id="06344-158">**Etichetta**: nome hello di funzione hello o un evento.</span><span class="sxs-lookup"><span data-stu-id="06344-158">**Label**: hello name of hello function or event.</span></span> <span data-ttu-id="06344-159">struttura ad albero Hello Mostra una combinazione di codice e gli eventi che si è verificato (ad esempio gli eventi SQL e http).</span><span class="sxs-lookup"><span data-stu-id="06344-159">hello tree shows a mix of code and events that occurred (such as SQL and http events).</span></span> <span data-ttu-id="06344-160">evento superiore Hello rappresenta hello complessivo durata della richiesta.</span><span class="sxs-lookup"><span data-stu-id="06344-160">hello top event represents hello overall request duration.</span></span>
* <span data-ttu-id="06344-161">**Trascorso**: intervallo di tempo hello tra inizio hello dell'operazione hello e di fine di hello.</span><span class="sxs-lookup"><span data-stu-id="06344-161">**Elapsed**: hello time interval between hello start of hello operation and hello end.</span></span>
* <span data-ttu-id="06344-162">**Quando**: indica quando hello funzione/evento è stato in esecuzione nelle funzioni tooother relazione.</span><span class="sxs-lookup"><span data-stu-id="06344-162">**When**: Shows when hello function/event was running in relation tooother functions.</span></span>

## <a name="how-tooread-performance-data"></a><span data-ttu-id="06344-163">Come i dati sulle prestazioni tooread</span><span class="sxs-lookup"><span data-stu-id="06344-163">How tooread performance data</span></span>

<span data-ttu-id="06344-164">Il profiler di servizi di Microsoft utilizza una combinazione di campionamento (metodo) e la strumentazione tooanalyze hello delle prestazioni dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="06344-164">Microsoft service profiler uses a combination of sampling method and instrumentation tooanalyze hello performance of your application.</span></span>
<span data-ttu-id="06344-165">Quando insieme dettagliato è in corso, esempi di profiler service hello puntatore all'istruzione di ogni CPU della macchina hello in ogni millisecondo.</span><span class="sxs-lookup"><span data-stu-id="06344-165">When detailed collection is in progress, service profiler samples hello instruction pointer of each of hello machine's CPU in every millisecond.</span></span>
<span data-ttu-id="06344-166">Ogni esempio acquisisce stack di chiamate completo hello del thread di hello attualmente in esecuzione, fornendo informazioni dettagliate e utili sulle operazioni che thread stava eseguendo entrambi alti e bassi livelli di astrazione.</span><span class="sxs-lookup"><span data-stu-id="06344-166">Each sample captures hello complete call stack of hello thread currently executing, giving detailed and useful information about what that thread was doing at both high and low levels of abstraction.</span></span> <span data-ttu-id="06344-167">Profiler servizio raccoglie anche altri eventi, ad esempio gli eventi di commutazione di contesto, gli eventi TPL e correlazione attività tootrack gli eventi di pool di thread e della causalità.</span><span class="sxs-lookup"><span data-stu-id="06344-167">Service profiler also collects other events such as context switching events, TPL events, and thread-pool events tootrack activity correlation and causality.</span></span>

<span data-ttu-id="06344-168">stack di chiamate Hello mostrato nella visualizzazione della cronologia di hello è risultato hello di hello di sopra di campionamento e strumentazione.</span><span class="sxs-lookup"><span data-stu-id="06344-168">hello call stack shown in hello timeline view is hello result of hello above sampling and instrumentation.</span></span> <span data-ttu-id="06344-169">Poiché ogni esempio acquisisce stack di chiamate completo hello del thread di hello, include codice da .NET framework di hello, nonché altri framework in cui che si fa riferimento.</span><span class="sxs-lookup"><span data-stu-id="06344-169">Because each sample captures hello complete call stack of hello thread, it includes code from hello .NET framework, as well as other frameworks you reference.</span></span>

### <span data-ttu-id="06344-170"><a id="jitnewobj"></a>Allocazione oggetti (`clr!JIT\_New or clr!JIT\_Newarr1`)</span><span class="sxs-lookup"><span data-stu-id="06344-170"><a id="jitnewobj"></a>Object Allocation (`clr!JIT\_New or clr!JIT\_Newarr1`)</span></span>
<span data-ttu-id="06344-171">`clr!JIT\_New and clr!JIT\_Newarr1` sono le funzioni di supporto all'interno di .NET Framework che consentono di allocare memoria dall'heap gestito.</span><span class="sxs-lookup"><span data-stu-id="06344-171">`clr!JIT\_New and clr!JIT\_Newarr1` are helper functions inside .NET framework that allocates memory from managed heap.</span></span> <span data-ttu-id="06344-172">`clr!JIT\_New` viene richiamato quando si alloca un oggetto.</span><span class="sxs-lookup"><span data-stu-id="06344-172">`clr!JIT\_New` is invoked when an object is allocated.</span></span> <span data-ttu-id="06344-173">`clr!JIT\_Newarr1` viene richiamato quando si alloca una matrice di oggetti.</span><span class="sxs-lookup"><span data-stu-id="06344-173">`clr!JIT\_Newarr1` is invoked when an object array is allocated.</span></span> <span data-ttu-id="06344-174">Queste due funzioni sono in genere molto veloci e richiedono un intervallo temporale relativamente ridotto.</span><span class="sxs-lookup"><span data-stu-id="06344-174">These two functions are typically very fast and should take relatively small amount of time.</span></span> <span data-ttu-id="06344-175">Se viene visualizzato `clr!JIT\_New` o `clr!JIT\_Newarr1` richiedere una notevole quantità di tempo nell'indicatore cronologico, è un'indicazione codice hello potrebbe essere l'allocazione di molti oggetti che utilizzano una quantità notevole di memoria.</span><span class="sxs-lookup"><span data-stu-id="06344-175">If you see `clr!JIT\_New` or `clr!JIT\_Newarr1` take a substantial amount of time in your timeline, it's an indication that hello code may be allocating many objects and consuming significant amount of memory.</span></span>

### <span data-ttu-id="06344-176"><a id="theprestub"></a>Caricamento di codice (`clr!ThePreStub`)</span><span class="sxs-lookup"><span data-stu-id="06344-176"><a id="theprestub"></a>Loading Code (`clr!ThePreStub`)</span></span>
<span data-ttu-id="06344-177">`clr!ThePreStub`è una funzione di supporto all'interno di .NET framework che prepara tooexecute codice hello hello prima volta.</span><span class="sxs-lookup"><span data-stu-id="06344-177">`clr!ThePreStub` is a helper function inside .NET framework that prepares hello code tooexecute for hello first time.</span></span> <span data-ttu-id="06344-178">Include ad esempio la compilazione JIT (Just In Time).</span><span class="sxs-lookup"><span data-stu-id="06344-178">This typically includes, but not limited to, JIT (Just In Time) compilation.</span></span> <span data-ttu-id="06344-179">Per ogni metodo c# `clr!ThePreStub` deve essere richiamato più di una volta nel corso della durata hello di un processo.</span><span class="sxs-lookup"><span data-stu-id="06344-179">For each C# method, `clr!ThePreStub` should be invoked at most once during hello lifetime of a process.</span></span>

<span data-ttu-id="06344-180">Se viene visualizzato `clr!ThePreStub` richiede una quantità significativa di tempo per una richiesta, indica che la richiesta è hello primo che viene eseguita tale metodo e l'ora di hello per tooload di runtime .NET framework che metodo è significativo.</span><span class="sxs-lookup"><span data-stu-id="06344-180">If you see `clr!ThePreStub` takes significant amount of time for a request, it indicates that request is hello first one that executes that method, and hello time for .NET framework runtime tooload that method is significant.</span></span> <span data-ttu-id="06344-181">È possibile considerare un processo di riscaldamento che esegue la parte di codice hello prima che agli utenti diritti di accesso o l'esecuzione di NGen nell'assembly.</span><span class="sxs-lookup"><span data-stu-id="06344-181">You can consider a warm-up process that executes that portion of hello code before your users access it, or consider running NGen on your assemblies.</span></span>

### <span data-ttu-id="06344-182"><a id="lockcontention"></a>Conflitto di blocchi (`clr!JITutil\_MonContention` o `clr!JITutil\_MonEnterWorker`)</span><span class="sxs-lookup"><span data-stu-id="06344-182"><a id="lockcontention"></a>Lock Contention (`clr!JITutil\_MonContention` or `clr!JITutil\_MonEnterWorker`)</span></span>
<span data-ttu-id="06344-183">`clr!JITutil\_MonContention`o `clr!JITutil\_MonEnterWorker` indicano thread corrente hello è in attesa di un blocco di toobe rilasciato.</span><span class="sxs-lookup"><span data-stu-id="06344-183">`clr!JITutil\_MonContention` or `clr!JITutil\_MonEnterWorker` indicate hello current thread is waiting for a lock toobe released.</span></span> <span data-ttu-id="06344-184">In genere viene visualizzato durante l'esecuzione di un'istruzione di blocco C#, richiamando il metodo Monitor.Enter o richiamando un metodo con l'attributo MethodImplOptions.Synchronized.</span><span class="sxs-lookup"><span data-stu-id="06344-184">This typically shows up when executing a C# lock statement, invoking Monitor.Enter method, or invoking a method with MethodImplOptions.Synchronized attribute.</span></span> <span data-ttu-id="06344-185">Contesa dei blocchi avviene in genere quando un thread acquisisce un blocco, e thread B prova hello tooacquire stesso blocco prima che lo rilascia il thread.</span><span class="sxs-lookup"><span data-stu-id="06344-185">Lock contention typically happens when thread A acquires a lock, and thread B tries tooacquire hello same lock before thread A releases it.</span></span>

### <span data-ttu-id="06344-186"><a id="ngencold"></a>Caricamento di codice (`[COLD]`)</span><span class="sxs-lookup"><span data-stu-id="06344-186"><a id="ngencold"></a>Loading code (`[COLD]`)</span></span>
<span data-ttu-id="06344-187">Se il nome del metodo hello contiene `[COLD]`, ad esempio `mscorlib.ni![COLD]System.Reflection.CustomAttribute.IsDefined`, significa che il runtime di .NET framework hello è in esecuzione il codice che non è ottimizzato per <a href="https://msdn.microsoft.com/library/e7k32f4k.aspx">ottimizzazione PGO</a> per hello prima volta.</span><span class="sxs-lookup"><span data-stu-id="06344-187">If hello method name contains `[COLD]`, such as `mscorlib.ni![COLD]System.Reflection.CustomAttribute.IsDefined`, it means that hello .NET framework runtime is executing code that is not optimized by <a href="https://msdn.microsoft.com/library/e7k32f4k.aspx">profile-guided optimization</a> for hello first time.</span></span> <span data-ttu-id="06344-188">Per ogni metodo, dovrebbe essere inclusa più di una volta nel corso della durata hello del processo di hello.</span><span class="sxs-lookup"><span data-stu-id="06344-188">For each method, it should show up at most once during hello lifetime of hello process.</span></span>

<span data-ttu-id="06344-189">Se durante il caricamento di codice richiede una quantità significativa di tempo per una richiesta, indica che la richiesta è hello prima uno tooexecute hello non ottimizzata parte del metodo hello.</span><span class="sxs-lookup"><span data-stu-id="06344-189">If loading code takes significant amount of time for a request, it indicates that request is hello first one tooexecute hello unoptimized portion of hello method.</span></span> <span data-ttu-id="06344-190">È possibile considerare un processo che esegue la parte di codice hello prima che agli utenti diritti di accesso di riscaldamento.</span><span class="sxs-lookup"><span data-stu-id="06344-190">You can consider a warm up process that executes that portion of hello code before your users access it.</span></span>

### <span data-ttu-id="06344-191"><a id="httpclientsend"></a>Inviare una richiesta HTTP</span><span class="sxs-lookup"><span data-stu-id="06344-191"><a id="httpclientsend"></a>Send HTTP Request</span></span>
<span data-ttu-id="06344-192">I metodi come `HttpClient.Send` indicano codice hello è in attesa di un toocomplete di richiesta HTTP.</span><span class="sxs-lookup"><span data-stu-id="06344-192">Methods such as `HttpClient.Send` indicate hello code is waiting for a HTTP request toocomplete.</span></span>

### <span data-ttu-id="06344-193"><a id="sqlcommand"></a>Operazione di database</span><span class="sxs-lookup"><span data-stu-id="06344-193"><a id="sqlcommand"></a>Database Operation</span></span>
<span data-ttu-id="06344-194">Metodo, ad esempio SqlCommand.Execute indica codice hello è in attesa di un toocomplete di operazione di database.</span><span class="sxs-lookup"><span data-stu-id="06344-194">Method such as SqlCommand.Execute indicates hello code is waiting for a database operation toocomplete.</span></span>

### <span data-ttu-id="06344-195"><a id="await"></a>In attesa (`AWAIT\_TIME`)</span><span class="sxs-lookup"><span data-stu-id="06344-195"><a id="await"></a>Waiting (`AWAIT\_TIME`)</span></span>
<span data-ttu-id="06344-196">`AWAIT\_TIME`indica il codice hello è in attesa di un'altra attività toocomplete.</span><span class="sxs-lookup"><span data-stu-id="06344-196">`AWAIT\_TIME` indicates hello code is waiting for another task toocomplete.</span></span> <span data-ttu-id="06344-197">Questo accade solitamente con l'istruzione C# 'await'.</span><span class="sxs-lookup"><span data-stu-id="06344-197">This typically happens with C# 'await' statement.</span></span> <span data-ttu-id="06344-198">Quando esegue codice hello c# 'await', rimuove hello thread e restituisce i pool di thread di controllo toohello e nessun thread bloccato in attesa per toofinish 'await' hello.</span><span class="sxs-lookup"><span data-stu-id="06344-198">When hello code does a C# 'await', hello thread unwinds and returns control toohello thread-pool, and there is no thread that is blocked waiting for hello 'await' toofinish.</span></span> <span data-ttu-id="06344-199">Tuttavia, in modo logico hello thread che ha hello await "bloccato" in attesa toocomplete operazione hello.</span><span class="sxs-lookup"><span data-stu-id="06344-199">However, logically hello thread that did hello await is 'blocked' waiting for hello operation toocomplete.</span></span> <span data-ttu-id="06344-200">Il `AWAIT\_TIME` indica il tempo di hello bloccato in attesa di hello toocomplete di attività.</span><span class="sxs-lookup"><span data-stu-id="06344-200">The `AWAIT\_TIME` indicates hello blocked time waiting for hello task toocomplete.</span></span>

### <span data-ttu-id="06344-201"><a id="block"></a>Tempo blocco</span><span class="sxs-lookup"><span data-stu-id="06344-201"><a id="block"></a>Blocked Time</span></span>
<span data-ttu-id="06344-202">`BLOCKED_TIME`indica il codice hello è in attesa di un altro toobe di risorse disponibili, ad esempio in attesa di un oggetto di sincronizzazione, in attesa di un thread toobe disponibile, o in attesa di una richiesta toofinish.</span><span class="sxs-lookup"><span data-stu-id="06344-202">`BLOCKED_TIME` indicates hello code is waiting for another resource toobe available, such as waiting for a synchronization object, waiting for a thread toobe available, or waiting for a request toofinish.</span></span>

### <span data-ttu-id="06344-203"><a id="cpu"></a>Tempo CPU</span><span class="sxs-lookup"><span data-stu-id="06344-203"><a id="cpu"></a>CPU Time</span></span>
<span data-ttu-id="06344-204">Hello della CPU è occupato, l'esecuzione di istruzioni hello.</span><span class="sxs-lookup"><span data-stu-id="06344-204">hello CPU is busy executing hello instructions.</span></span>

### <span data-ttu-id="06344-205"><a id="disk"></a>Tempo disco</span><span class="sxs-lookup"><span data-stu-id="06344-205"><a id="disk"></a>Disk Time</span></span>
<span data-ttu-id="06344-206">un'applicazione Hello sta eseguendo operazioni su disco.</span><span class="sxs-lookup"><span data-stu-id="06344-206">hello application is performing disk operations.</span></span>

### <span data-ttu-id="06344-207"><a id="network"></a>Tempo rete</span><span class="sxs-lookup"><span data-stu-id="06344-207"><a id="network"></a>Network Time</span></span>
<span data-ttu-id="06344-208">un'applicazione Hello esegue operazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="06344-208">hello application is performing network operations.</span></span>

### <span data-ttu-id="06344-209"><a id="when"></a>Colonna Quando</span><span class="sxs-lookup"><span data-stu-id="06344-209"><a id="when"></a>When column</span></span>
<span data-ttu-id="06344-210">Si tratta di una visualizzazione della modalità campioni INCLUSIVI di hello raccolti per un nodo variano nel tempo.</span><span class="sxs-lookup"><span data-stu-id="06344-210">This is a visualization of how hello INCLUSIVE samples collected for a node vary over time.</span></span> <span data-ttu-id="06344-211">intervallo totale di Hello della richiesta di hello è suddiviso in 32 intervalli di tempo e campioni inclusivi di hello per tale nodo vengono accumulate in tali 32 bucket.</span><span class="sxs-lookup"><span data-stu-id="06344-211">hello total range of hello request is divided into 32 time buckets and hello inclusive samples for that node are accumulated into those 32 buckets.</span></span> <span data-ttu-id="06344-212">Ogni bucket è rappresentato come una barra, la cui altezza rappresenta un valore in scala.</span><span class="sxs-lookup"><span data-stu-id="06344-212">Each bucket is then represented as a bar whose height represents a scaled value.</span></span> <span data-ttu-id="06344-213">Per i nodi contrassegnati `CPU_TIME` o `BLOCKED_TIME`, o in cui è presente una relazione ovvia di utilizzo di una risorsa (cpu, disco, thread), hello barra rappresenta l'utilizzo di uno di tali risorse per periodo hello di bucket.</span><span class="sxs-lookup"><span data-stu-id="06344-213">For nodes marked `CPU_TIME` or `BLOCKED_TIME`, or where there is an obvious relationship of consuming a resource (cpu, disk, thread), hello bar represents consuming one of those resources for hello period of time of that bucket.</span></span> <span data-ttu-id="06344-214">Per queste metriche è possibile ottenere più del 100% utilizzando più risorse.</span><span class="sxs-lookup"><span data-stu-id="06344-214">For these metrics you can get greater than 100% by consuming multiple resources.</span></span> <span data-ttu-id="06344-215">Ad esempio, se in media si usano due CPU in un intervallo si ottiene il 200%.</span><span class="sxs-lookup"><span data-stu-id="06344-215">For example, if on average you use two CPUs over an interval then you get 200%.</span></span>


## <span data-ttu-id="06344-216"><a id="troubleshooting"></a>Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="06344-216"><a id="troubleshooting"></a>Troubleshooting</span></span>

### <a name="how-can-i-know-whether-application-insights-profiler-is-running"></a><span data-ttu-id="06344-217">Come è possibile verificare se il profiler di Application Insights è in esecuzione?</span><span class="sxs-lookup"><span data-stu-id="06344-217">How can I know whether Application Insights profiler is running?</span></span>

<span data-ttu-id="06344-218">profiler Hello viene eseguito come processo web continuo nell'App Web.</span><span class="sxs-lookup"><span data-stu-id="06344-218">hello profiler runs as a continuous web job in Web App.</span></span> <span data-ttu-id="06344-219">È possibile aprire risorse di App Web hello in https://portal.azure.com e controllare lo stato di "ApplicationInsightsProfiler" nel pannello processi Web hello.</span><span class="sxs-lookup"><span data-stu-id="06344-219">You can open hello Web App resource in https://portal.azure.com and check "ApplicationInsightsProfiler" status in hello WebJobs blade.</span></span> <span data-ttu-id="06344-220">Se non è in esecuzione, aprire **registri** toofind altre.</span><span class="sxs-lookup"><span data-stu-id="06344-220">If it isn't running, open **Logs** toofind out more.</span></span>

### <a name="why-cant-i-find-any-stack-examples-even-though-hello-profiler-is-running"></a><span data-ttu-id="06344-221">Non è possibile visualizzare eventuali esempi stack anche se è in esecuzione profiler hello?</span><span class="sxs-lookup"><span data-stu-id="06344-221">Why can't I find any stack examples even though hello profiler is running?</span></span>

<span data-ttu-id="06344-222">Ecco alcuni aspetti da controllare:</span><span class="sxs-lookup"><span data-stu-id="06344-222">Here are a few things you can check.</span></span>

1. <span data-ttu-id="06344-223">Assicurarsi che il piano di servizio app sia di livello Basic e superiore.</span><span class="sxs-lookup"><span data-stu-id="06344-223">Make sure your Web App Service Plan is Basic tier and above.</span></span>
2. <span data-ttu-id="06344-224">Assicurarsi che l'app Web disponga di Application Insights SDK 2.2 Beta e superiore abilitato.</span><span class="sxs-lookup"><span data-stu-id="06344-224">Make sure your Web App has Application Insights SDK 2.2 Beta and above enabled.</span></span>
3. <span data-ttu-id="06344-225">Verificare che l'App Web è l'impostazione APPINSIGHTS_INSTRUMENTATIONKEY hello con hello stessa chiave di strumentazione usata da Application Insights SDK.</span><span class="sxs-lookup"><span data-stu-id="06344-225">Make sure your Web App has hello APPINSIGHTS_INSTRUMENTATIONKEY setting with hello same instrumentation key used by Application Insights SDK.</span></span>
4. <span data-ttu-id="06344-226">Assicurarsi che l'App Web sia in esecuzione su .Net Framework 4.6.</span><span class="sxs-lookup"><span data-stu-id="06344-226">Make sure your Web App is running on .Net Framework 4.6.</span></span>
5. <span data-ttu-id="06344-227">In caso di un'applicazione ASP.NET di base, anche verificare [hello dipendenze obbligatorie](#aspnetcore).</span><span class="sxs-lookup"><span data-stu-id="06344-227">If it's an ASP.NET Core application, please also check [hello required dependencies](#aspnetcore).</span></span>

<span data-ttu-id="06344-228">Una volta avviato il profiler di hello, sussiste un periodo di riscaldamento breve quando hello profiler raccoglie attivamente le tracce di prestazioni diverse.</span><span class="sxs-lookup"><span data-stu-id="06344-228">After hello profiler is started, there is a short warm-up period when hello profiler actively collects several performance traces.</span></span> <span data-ttu-id="06344-229">Successivamente, hello profiler raccoglie le tracce sulle prestazioni per due minuti in ogni ora.</span><span class="sxs-lookup"><span data-stu-id="06344-229">After that, hello profiler collects performance traces for two minutes in every hour.</span></span>  

### <a name="i-was-using-azure-service-profiler-what-happened-tooit"></a><span data-ttu-id="06344-230">Stavo usando il profiler del servizio Azure.</span><span class="sxs-lookup"><span data-stu-id="06344-230">I was using Azure Service Profiler.</span></span> <span data-ttu-id="06344-231">Quali tooit verificato anomalo?</span><span class="sxs-lookup"><span data-stu-id="06344-231">What happened tooit?</span></span>  

<span data-ttu-id="06344-232">Quando si abilita il profiler di Application Insights, l'agente del profiler del servizio Azure viene disabilitato.</span><span class="sxs-lookup"><span data-stu-id="06344-232">When you enable Application Insights Profiler, Azure Service Profiler agent is disabled.</span></span>

### <span data-ttu-id="06344-233"><a id="double-counting"></a>Doppio conteggio dei thread in parallelo</span><span class="sxs-lookup"><span data-stu-id="06344-233"><a id="double-counting"></a>Double counting in parallel threads</span></span>

<span data-ttu-id="06344-234">In alcuni hello casi metrica tempo totale in Visualizzatore stack hello è maggiore durata effettiva di hello della richiesta di hello.</span><span class="sxs-lookup"><span data-stu-id="06344-234">In some cases hello total time metric in hello stack viewer is more than hello actual duration of hello request.</span></span>

<span data-ttu-id="06344-235">Questa situazione può verificarsi quando sono presenti due o più thread associati a una richiesta, che operano in parallelo.</span><span class="sxs-lookup"><span data-stu-id="06344-235">This can happen when there are two or more threads associated with a request, operating in parallel.</span></span> <span data-ttu-id="06344-236">Hello tempo totale di thread è quindi maggiore di tempo trascorso hello.</span><span class="sxs-lookup"><span data-stu-id="06344-236">hello total thread time is then more than hello elapsed time.</span></span> <span data-ttu-id="06344-237">In molti casi, potrebbe essere in attesa di un thread di hello altri toocomplete.</span><span class="sxs-lookup"><span data-stu-id="06344-237">In many cases one thread may be waiting on hello other toocomplete.</span></span> <span data-ttu-id="06344-238">Hello questo visualizzatore prova toodetect e omettere l'attesa di hello non interessanti, ma errs sul lato di hello mostrare troppa anziché l'omissione di ciò che potrebbe essere informazioni critiche.</span><span class="sxs-lookup"><span data-stu-id="06344-238">hello viewer tries toodetect this and omit hello uninteresting wait, but errs on hello side of showing too much rather than omitting what may be critical information.</span></span>  

<span data-ttu-id="06344-239">Quando si visualizza thread paralleli le tracce, è necessario toodetermine thread in attesa in modo è possibile determinare hello percorso critico per la richiesta di hello.</span><span class="sxs-lookup"><span data-stu-id="06344-239">When you see parallel threads in your traces, you need toodetermine which threads are waiting so you can determine hello critical path for hello request.</span></span> <span data-ttu-id="06344-240">Nella maggior parte dei casi, i thread hello rapidamente va in uno stato di attesa semplicemente in attesa di hello altri thread.</span><span class="sxs-lookup"><span data-stu-id="06344-240">In most cases, hello thread that quickly goes into a wait state is simply waiting on hello other threads.</span></span> <span data-ttu-id="06344-241">Concentrare hello altri e ignorare il tempo di hello in thread in attesa di hello.</span><span class="sxs-lookup"><span data-stu-id="06344-241">Concentrate on hello others and ignore hello time in hello waiting threads.</span></span>

### <span data-ttu-id="06344-242"><a id="issue-loading-trace-in-viewer"></a>Senza dati di profilatura</span><span class="sxs-lookup"><span data-stu-id="06344-242"><a id="issue-loading-trace-in-viewer"></a>No profiling data</span></span>

1. <span data-ttu-id="06344-243">Se i dati di hello si sta tentando tooview è antecedente a un paio di settimane, è possibile limitare il filtro temporale e riprovare.</span><span class="sxs-lookup"><span data-stu-id="06344-243">If hello data you are trying tooview is older than a couple of weeks, try limiting your time filter and try again.</span></span>

2. <span data-ttu-id="06344-244">Verifica che un firewall o proxy non siano bloccate toohttps://gateway.azureserviceprofiler.net accesso.</span><span class="sxs-lookup"><span data-stu-id="06344-244">Check that proxies or a firewall have not blocked access toohttps://gateway.azureserviceprofiler.net.</span></span>

3. <span data-ttu-id="06344-245">Verificare che hello Application Insights è la chiave di strumentazione in uso nell'app stessa hello come risorsa di Application Insights è stato abilitato il profiling con hello.</span><span class="sxs-lookup"><span data-stu-id="06344-245">Check that hello Application Insights instrumentation key you are using in your app is hello same as hello Application Insights resource you've enabled profiling with.</span></span> <span data-ttu-id="06344-246">chiave di Hello è in genere in Applicationinsights, ma può essere rilevate anche in App. config o Web. config.</span><span class="sxs-lookup"><span data-stu-id="06344-246">hello key is usually in ApplicationInsights.config but can also be found in web.config or app.config.</span></span>

### <a name="error-report-in-hello-profiling-viewer"></a><span data-ttu-id="06344-247">Segnalazione di errori nel Visualizzatore profiling hello</span><span class="sxs-lookup"><span data-stu-id="06344-247">Error report in hello profiling viewer</span></span>

<span data-ttu-id="06344-248">Un ticket di supporto dal portale hello del file.</span><span class="sxs-lookup"><span data-stu-id="06344-248">File a support ticket from hello portal.</span></span> <span data-ttu-id="06344-249">Includere l'ID di correlazione hello dal messaggio di errore hello.</span><span class="sxs-lookup"><span data-stu-id="06344-249">Please include hello correlation ID from hello error message.</span></span>

## <a name="manual-installation"></a><span data-ttu-id="06344-250">Installazione manuale</span><span class="sxs-lookup"><span data-stu-id="06344-250">Manual installation</span></span>

<span data-ttu-id="06344-251">Quando si configura il profiler di hello, hello apportati gli aggiornamenti seguenti sono le impostazioni dell'App Web toohello.</span><span class="sxs-lookup"><span data-stu-id="06344-251">When you configure hello profiler, hello following updates are made toohello Web App's settings.</span></span> <span data-ttu-id="06344-252">È possibile eseguire queste operazioni manualmente se l'ambiente lo richiede, ad esempio se l'applicazione viene eseguita nell'ambiente del servizio app di Azure:</span><span class="sxs-lookup"><span data-stu-id="06344-252">You can do them yourself manually if your environment requires, for example, if your application runs in Azure App Service Environment (ASE):</span></span>

1. <span data-ttu-id="06344-253">Nel Pannello di controllo di hello web app, aprire le impostazioni.</span><span class="sxs-lookup"><span data-stu-id="06344-253">In hello web app control blade, open Settings.</span></span>
2. <span data-ttu-id="06344-254">Impostare ".Net Framework versione" toov4.6.</span><span class="sxs-lookup"><span data-stu-id="06344-254">Set ".Net Framework version" toov4.6.</span></span>
3. <span data-ttu-id="06344-255">Impostare tooOn "Always On".</span><span class="sxs-lookup"><span data-stu-id="06344-255">Set "Always On" tooOn.</span></span>
4. <span data-ttu-id="06344-256">Aggiungere l'impostazione dell'app "__APPINSIGHTS_INSTRUMENTATIONKEY__" e set hello valore toohello stessa chiave di strumentazione usata da hello SDK.</span><span class="sxs-lookup"><span data-stu-id="06344-256">Add app setting "__APPINSIGHTS_INSTRUMENTATIONKEY__" and set hello value toohello same instrumentation key used by hello SDK.</span></span>
5. <span data-ttu-id="06344-257">Aprire Strumenti avanzati.</span><span class="sxs-lookup"><span data-stu-id="06344-257">Open Advanced Tools.</span></span>
6. <span data-ttu-id="06344-258">Fare clic su "Go" sito Web di tooopen hello Kudu.</span><span class="sxs-lookup"><span data-stu-id="06344-258">Click "Go" tooopen hello Kudu website.</span></span>
7. <span data-ttu-id="06344-259">Nel sito Web Kudu hello, selezionare "Le estensioni del sito".</span><span class="sxs-lookup"><span data-stu-id="06344-259">In hello Kudu website, select "Site extensions".</span></span>
8. <span data-ttu-id="06344-260">Installare "__Application Insights__" dalla raccolta.</span><span class="sxs-lookup"><span data-stu-id="06344-260">Install "__Application Insights__" from Gallery.</span></span>
9. <span data-ttu-id="06344-261">Riavviare l'app web hello.</span><span class="sxs-lookup"><span data-stu-id="06344-261">Restart hello web app.</span></span>

## <span data-ttu-id="06344-262"><a id="aspnetcore"></a>Supporto di ASP.NET Core</span><span class="sxs-lookup"><span data-stu-id="06344-262"><a id="aspnetcore"></a>ASP.NET Core Support</span></span>

<span data-ttu-id="06344-263">Applicazione ASP.NET di base deve tooinstall 2.1.0-beta6 pacchetto Microsoft.ApplicationInsights.AspNetCore Nuget o toowork superiore con hello Profiler.</span><span class="sxs-lookup"><span data-stu-id="06344-263">ASP.NET Core application needs tooinstall Microsoft.ApplicationInsights.AspNetCore Nuget package 2.1.0-beta6 or higher toowork with hello Profiler.</span></span> <span data-ttu-id="06344-264">È non supportano più le versioni precedenti di hello dopo 27/6/2017.</span><span class="sxs-lookup"><span data-stu-id="06344-264">We no longer support hello lower versions after 6/27/2017.</span></span>

## <a name="next-steps"></a><span data-ttu-id="06344-265">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="06344-265">Next steps</span></span>

* [<span data-ttu-id="06344-266">Uso di Application Insights in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="06344-266">Working with Application Insights in Visual Studio</span></span>](https://docs.microsoft.com/azure/application-insights/app-insights-visual-studio)

[performance-blade]: ./media/app-insights-profiler/performance-blade.png
[performance-blade-examples]: ./media/app-insights-profiler/performance-blade-examples.png
[trace-explorer]: ./media/app-insights-profiler/trace-explorer.png
[trace-explorer-toolbar]: ./media/app-insights-profiler/trace-explorer-toolbar.png
[trace-explorer-hint-tip]: ./media/app-insights-profiler/trace-explorer-hint-tip.png
[trace-explorer-hot-path]: ./media/app-insights-profiler/trace-explorer-hot-path.png
[enable-profiler-banner]: ./media/app-insights-profiler/enable-profiler-banner.png
[disable-profiler-webjob]: ./media/app-insights-profiler/disable-profiler-webjob.png
[linked app services]: ./media/app-insights-profiler/linked-app-services.png
