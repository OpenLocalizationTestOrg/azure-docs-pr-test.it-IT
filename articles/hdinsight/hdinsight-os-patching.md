---
title: Configurare una pianificazione dell'applicazione di patch al sistema operativo per i cluster di HDInsight basati su Linux - Azure | Microsoft Docs
description: Informazioni su come configurare una pianificazione dell'applicazione di patch al sistema operativo per i cluster di HDInsight basati su Linux.
services: hdinsight
documentationcenter: 
author: bprakash
manager: asadk
editor: bprakash
ms.assetid: 
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 03/21/2017
ms.author: bhanupr
ms.openlocfilehash: af3c5a19ae8e2e606e4b0506f9f6dddb41192e40
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="os-patching-for-hdinsight"></a><span data-ttu-id="77ec5-103">Applicazione di patch del sistema operativo per HDInsight</span><span class="sxs-lookup"><span data-stu-id="77ec5-103">OS patching for HDInsight</span></span> 
<span data-ttu-id="77ec5-104">Come servizio gestito di Hadoop, HDInsight si occupa dell'applicazione di patch al sistema operativo delle macchine virtuali sottostanti usate dal cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="77ec5-104">As a managed Hadoop service, HDInsight takes care of patching the OS of the underlying VMs used by HDInsight clusters.</span></span> <span data-ttu-id="77ec5-105">A partire dal 1° agosto 2016, sono stati modificati i criteri di applicazione delle patch del sistema operativo guest per i cluster HDInsight basati su Linux (versione 3.4 o successiva).</span><span class="sxs-lookup"><span data-stu-id="77ec5-105">As of August 1, 2016, we have changed the guest OS patching policy for Linux-based HDInsight clusters (version 3.4 or greater).</span></span> <span data-ttu-id="77ec5-106">L'obiettivo del nuovo criterio è di ridurre in modo consistente il numero di riavvii causati dall'applicazione delle patch.</span><span class="sxs-lookup"><span data-stu-id="77ec5-106">The goal of the new policy is to significantly reduce the number of reboots due to patching.</span></span> <span data-ttu-id="77ec5-107">Il nuovo criterio continuerà ad applicare le patch alle macchine virtuali sui cluster Linux ogni lunedì o giovedì a partire dalle ore 00:00 UTC con un flusso di intervalli sui nodi in ogni cluster.</span><span class="sxs-lookup"><span data-stu-id="77ec5-107">The new policy will continue to patch virtual machines (VMs) on Linux clusters every Monday or Thursday starting at 12AM UTC in a staggered fashion across nodes in any given cluster.</span></span> <span data-ttu-id="77ec5-108">Tuttavia, le macchine virtuali verranno riavviate solo una volta ogni 30 giorni a causa dell'applicazione delle patch al sistema operativo guest.</span><span class="sxs-lookup"><span data-stu-id="77ec5-108">However, any given VM will only reboot at most once every 30 days due to guest OS patching.</span></span> <span data-ttu-id="77ec5-109">In aggiunta, il primo riavvio di un cluster appena creato non verrà eseguito prima di 30 giorni dalla data di creazione del cluster.</span><span class="sxs-lookup"><span data-stu-id="77ec5-109">In addition, the first reboot for a newly created cluster will not happen sooner than 30 days from the cluster creation date.</span></span> <span data-ttu-id="77ec5-110">I patch verranno applicati al riavvio delle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="77ec5-110">Patches will be effective once the VMs are rebooted.</span></span>

## <a name="how-to-configure-the-os-patching-schedule-for-linux-based-hdinsight-clusters"></a><span data-ttu-id="77ec5-111">Procedura per configurare una pianificazione dell'applicazione di patch al sistema operativo per i cluster HDInsight basati su Linux</span><span class="sxs-lookup"><span data-stu-id="77ec5-111">How to configure the OS patching schedule for Linux-based HDInsight clusters</span></span>
<span data-ttu-id="77ec5-112">Le macchine virtuali in un cluster HDInsight devono essere riavviate di tanto in tanto in modo che sia possibile installare le patch di sicurezza importanti.</span><span class="sxs-lookup"><span data-stu-id="77ec5-112">The virtual machines in an HDInsight cluster need to be rebooted occasionally so that important security patches can be installed.</span></span> <span data-ttu-id="77ec5-113">A partire dal 1° agosto 2016, i nuovi cluster HDInsight basati su Linux (versione 3.4 o successive) verranno riavviati in base alla pianificazione seguente:</span><span class="sxs-lookup"><span data-stu-id="77ec5-113">As of August 1, 2016, new Linux-based HDInsight clusters (version 3.4 or greater,) are rebooted using the following schedule:</span></span>

1. <span data-ttu-id="77ec5-114">Una macchina virtuale nel cluster può solo riavviare il computer per le patch al massimo una volta in un periodo di 30 giorni.</span><span class="sxs-lookup"><span data-stu-id="77ec5-114">A virtual machine in the cluster can only reboot for patches at most, once within a 30-day period.</span></span>
2. <span data-ttu-id="77ec5-115">Il riavvio avviene a partire da mezzanotte (UTC).</span><span class="sxs-lookup"><span data-stu-id="77ec5-115">The reboot occurs starting at 12AM UTC.</span></span>
3. <span data-ttu-id="77ec5-116">Il processo di riavvio è scaglionato tra le macchine virtuali del cluster, pertanto il cluster è ancora disponibile durante il processo di riavvio.</span><span class="sxs-lookup"><span data-stu-id="77ec5-116">The reboot process is staggered across virtual machines in the cluster, so the cluster is still available during the reboot process.</span></span>
4. <span data-ttu-id="77ec5-117">Il primo riavvio di un cluster appena creato non verrà eseguito prima di 30 giorni dalla data di creazione del cluster.</span><span class="sxs-lookup"><span data-stu-id="77ec5-117">The first reboot for a newly created cluster will not happen sooner than 30 days after the cluster creation date.</span></span>

<span data-ttu-id="77ec5-118">Tramite l'azione di script descritta in questo articolo, è possibile modificare la pianificazione dell'applicazione delle patch al sistema operativo come segue:</span><span class="sxs-lookup"><span data-stu-id="77ec5-118">Using the script action described in this article, you can modify the OS patching schedule as follows:</span></span>
1. <span data-ttu-id="77ec5-119">Abilitare o disabilitare il riavvio automatico</span><span class="sxs-lookup"><span data-stu-id="77ec5-119">Enable or disable automatic reboots</span></span>
2. <span data-ttu-id="77ec5-120">Impostare la frequenza di riavvio (giorni tra i riavvii)</span><span class="sxs-lookup"><span data-stu-id="77ec5-120">Set the frequency of reboots (days between reboots)</span></span>
3. <span data-ttu-id="77ec5-121">Impostare il giorno della settimana in cui eseguire un riavvio</span><span class="sxs-lookup"><span data-stu-id="77ec5-121">Set the day of the week when a reboot occurs</span></span>

> [!NOTE]
> <span data-ttu-id="77ec5-122">Questa azione di script funziona solo con i cluster HDInsight basati su Linux creati dopo il 1° agosto 2016.</span><span class="sxs-lookup"><span data-stu-id="77ec5-122">This script action will only work with Linux-based HDInsight clusters created after August 1st, 2016.</span></span> <span data-ttu-id="77ec5-123">I patch verranno applicati solo al riavvio delle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="77ec5-123">Patches will be effective only when VMs are rebooted.</span></span> 
>

## <a name="how-to-use-the-script"></a><span data-ttu-id="77ec5-124">Come usare lo script</span><span class="sxs-lookup"><span data-stu-id="77ec5-124">How to use the script</span></span> 

<span data-ttu-id="77ec5-125">L'uso di questo script richiede le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="77ec5-125">When using this script requires the following information:</span></span>
1. <span data-ttu-id="77ec5-126">Il percorso dello script: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.</span><span class="sxs-lookup"><span data-stu-id="77ec5-126">The script location: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.</span></span>
    <span data-ttu-id="77ec5-127">HDInsight usa l'URI per trovare ed eseguire lo script in tutte le macchine virtuali del cluster.</span><span class="sxs-lookup"><span data-stu-id="77ec5-127">HDInsight uses this URI to find and run the script on all the virtual machines in the cluster.</span></span>
  
2. <span data-ttu-id="77ec5-128">I tipi di nodo di cluster che vengono applicati allo script: nodo head, nodo del ruolo di lavoro, zookeeper.</span><span class="sxs-lookup"><span data-stu-id="77ec5-128">The cluster node types that the script is applied to: headnode, workernode, zookeeper.</span></span> <span data-ttu-id="77ec5-129">Questo script deve essere applicato a tutti i tipi di nodo del cluster.</span><span class="sxs-lookup"><span data-stu-id="77ec5-129">This script must be applied to all node types in the cluster.</span></span> <span data-ttu-id="77ec5-130">Se non viene applicato a un tipo di nodo, le macchine virtuali per quel tipo di nodo continueranno a usare la pianificazione per l'applicazione di patch precedente.</span><span class="sxs-lookup"><span data-stu-id="77ec5-130">If it is not applied to a node type, then the virtual machines for that node type will continue to use the previous patching schedule.</span></span>


3.  <span data-ttu-id="77ec5-131">Parametro: Questo script accetta tre parametri numerici:</span><span class="sxs-lookup"><span data-stu-id="77ec5-131">Parameter: This script accepts three numeric parameters:</span></span>

    | <span data-ttu-id="77ec5-132">Parametro</span><span class="sxs-lookup"><span data-stu-id="77ec5-132">Parameter</span></span> | <span data-ttu-id="77ec5-133">Definizione</span><span class="sxs-lookup"><span data-stu-id="77ec5-133">Definition</span></span> |
    | --- | --- |
    | <span data-ttu-id="77ec5-134">Abilitare/disabilitare il riavvio automatico</span><span class="sxs-lookup"><span data-stu-id="77ec5-134">Enable/disable automatic reboots</span></span> |<span data-ttu-id="77ec5-135">0 o 1.</span><span class="sxs-lookup"><span data-stu-id="77ec5-135">0 or 1.</span></span> <span data-ttu-id="77ec5-136">Il valore 0 disabilita il riavvio automatico, mentre 1 consente il riavvio automatico.</span><span class="sxs-lookup"><span data-stu-id="77ec5-136">A value of 0 disables automatic reboots while 1 enables automatic reboots.</span></span> |
    | <span data-ttu-id="77ec5-137">Frequenza</span><span class="sxs-lookup"><span data-stu-id="77ec5-137">Frequency</span></span> |<span data-ttu-id="77ec5-138">da 7 a 90 (incluso).</span><span class="sxs-lookup"><span data-stu-id="77ec5-138">7 to 90 (inclusive).</span></span> <span data-ttu-id="77ec5-139">Il numero di giorni di attesa prima di riavviare le macchine virtuali per le patch che richiedono un riavvio.</span><span class="sxs-lookup"><span data-stu-id="77ec5-139">The number of days to wait before rebooting the virtual machines for patches that require a reboot.</span></span> |
    | <span data-ttu-id="77ec5-140">Giorno della settimana</span><span class="sxs-lookup"><span data-stu-id="77ec5-140">Day of week</span></span> |<span data-ttu-id="77ec5-141">da 1 a 7 (incluso).</span><span class="sxs-lookup"><span data-stu-id="77ec5-141">1 to 7 (inclusive).</span></span> <span data-ttu-id="77ec5-142">Il valore 1 indica che il riavvio deve essere eseguito il lunedì e 7 indica la domenica. Ad esempio usando i parametri di 1 60 2 si produce un riavvio automatico ogni 60 giorni (al massimo) il martedì.</span><span class="sxs-lookup"><span data-stu-id="77ec5-142">A value of 1 indicates the reboot should occur on a Monday, and 7 indicates a Sunday.For example, using parameters of 1 60 2 results in automatic reboots every 60 days (at most) on Tuesday.</span></span> |
    | <span data-ttu-id="77ec5-143">Persistenza</span><span class="sxs-lookup"><span data-stu-id="77ec5-143">Persistence</span></span> |<span data-ttu-id="77ec5-144">Quando si applica un'azione di script a un cluster esistente, è possibile contrassegnare lo script come persistente.</span><span class="sxs-lookup"><span data-stu-id="77ec5-144">When applying a script action to an existing cluster, you can mark the script as persisted.</span></span> <span data-ttu-id="77ec5-145">Gli script persistenti vengono applicati quando vengono aggiunti nuovi nodi del ruolo di lavoro al cluster tramite operazioni di ridimensionamento.</span><span class="sxs-lookup"><span data-stu-id="77ec5-145">Persisted scripts are applied when new workernodes are added to the cluster through scaling operations.</span></span> |

> [!NOTE]
> <span data-ttu-id="77ec5-146">Quando si applica a un cluster esistente, è necessario contrassegnare questo script come persistente.</span><span class="sxs-lookup"><span data-stu-id="77ec5-146">You must mark this script as persisted when applying to an existing cluster.</span></span> <span data-ttu-id="77ec5-147">In caso contrario i nuovi nodi creati tramite le operazioni di ridimensionamento useranno il la pianificazione dell'applicazione di patch predefinita.</span><span class="sxs-lookup"><span data-stu-id="77ec5-147">Otherwise, any new nodes created through scaling      operations will use the default patching schedule.</span></span>
<span data-ttu-id="77ec5-148">Se si applica lo script come parte del processo di creazione del cluster, viene mantenuto automaticamente.</span><span class="sxs-lookup"><span data-stu-id="77ec5-148">If you apply the script as part of the cluster creation process, it is persisted automatically.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="77ec5-149">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="77ec5-149">Next steps</span></span>

<span data-ttu-id="77ec5-150">Per la procedura dettagliata sull'uso dell'azione di script, vedere le sezioni seguenti di [Personalizzare cluster HDInsight basati su Linux tramite Azione script](hdinsight-hadoop-customize-cluster-linux.md):</span><span class="sxs-lookup"><span data-stu-id="77ec5-150">For specific steps on using the script action, see the following sections in the [Customize Linuz-based HDInsight clusters using script action](hdinsight-hadoop-customize-cluster-linux.md):</span></span>

* [<span data-ttu-id="77ec5-151">Usare un'azione script durante la creazione di un cluster</span><span class="sxs-lookup"><span data-stu-id="77ec5-151">Use a script action during cluster creation</span></span>](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [<span data-ttu-id="77ec5-152">Applicare un'azione script a un cluster in esecuzione</span><span class="sxs-lookup"><span data-stu-id="77ec5-152">Apply a script action to a running cluster</span></span>](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
