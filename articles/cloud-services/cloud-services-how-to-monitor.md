---
title: Come monitorare un servizio cloud | Documentazione Microsoft
description: Informazioni su come monitorare i servizi cloud usando il portale di Azure classico.
services: cloud-services
documentationcenter: 
author: thraka
manager: timlt
editor: 
ms.assetid: 5c48d2fb-b8ea-420f-80df-7aebe2b66b1b
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/07/2015
ms.author: adegeo
ms.openlocfilehash: c369b22cf068a473343b006eb1b06fdd350d31db
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="how-to-monitor-cloud-services"></a><span data-ttu-id="44c68-103">Come monitorare i servizi cloud</span><span class="sxs-lookup"><span data-stu-id="44c68-103">How to Monitor Cloud Services</span></span>
[!INCLUDE [disclaimer](../../includes/disclaimer.md)]

<span data-ttu-id="44c68-104">È possibile monitorare le metriche delle prestazioni `key` per i servizi cloud nel portale di Azure classico.</span><span class="sxs-lookup"><span data-stu-id="44c68-104">You can monitor `key` performance metrics for your cloud services in the Azure classic portal.</span></span> <span data-ttu-id="44c68-105">È possibile impostare il livello di monitoraggio da minimo a dettagliato per ogni ruolo del servizio e personalizzare le schermate di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="44c68-105">You can set the level of monitoring to minimal and verbose for each service role, and can customize the monitoring displays.</span></span> <span data-ttu-id="44c68-106">I dati di monitoraggio dettagliati vengono memorizzati in un account di archiviazione, a cui è possibile accedere fuori dal portale.</span><span class="sxs-lookup"><span data-stu-id="44c68-106">Verbose monitoring data is stored in a storage account, which you can access outside the portal.</span></span> 

<span data-ttu-id="44c68-107">Le schermate di monitoraggio nel portale di Azure classico sono altamente configurabili.</span><span class="sxs-lookup"><span data-stu-id="44c68-107">Monitoring displays in the Azure classic portal are highly configurable.</span></span> <span data-ttu-id="44c68-108">È possibile scegliere le metriche che si vuole monitorare dall'elenco delle metriche nella pagina **Monitoraggio** e le metriche da riportare nei relativi grafici nella pagina **Monitoraggio** e nel dashboard.</span><span class="sxs-lookup"><span data-stu-id="44c68-108">You can choose the metrics you want to monitor in the metrics list on the **Monitor** page, and you can choose which metrics to plot in metrics charts on the **Monitor** page and the dashboard.</span></span> 

## <a name="concepts"></a><span data-ttu-id="44c68-109">Concetti</span><span class="sxs-lookup"><span data-stu-id="44c68-109">Concepts</span></span>
<span data-ttu-id="44c68-110">Per impostazione predefinita, per un nuovo servizio cloud è previsto un monitoraggio minimo, con contatori delle prestazioni raccolte dal sistema operativo per le istanze del ruolo (macchine virtuali).</span><span class="sxs-lookup"><span data-stu-id="44c68-110">By default, minimal monitoring is provided for a new cloud service using performance counters gathered from the host operating system for the roles instances (virtual machines).</span></span> <span data-ttu-id="44c68-111">Le metriche minime si limitano a percentuale CPU, dati in entrata, dati in uscita, velocità effettiva di lettura dal disco e velocità effettiva di scrittura sul disco.</span><span class="sxs-lookup"><span data-stu-id="44c68-111">The minimal metrics are limited to CPU Percentage, Data In, Data Out, Disk Read Throughput, and Disk Write Throughput.</span></span> <span data-ttu-id="44c68-112">Con la configurazione del monitoraggio dettagliato, è possibile ricevere altre metriche in base ai dati delle prestazioni all'interno delle macchine virtuali (istanze del ruolo).</span><span class="sxs-lookup"><span data-stu-id="44c68-112">By configuring verbose monitoring, you can receive additional metrics based on performance data within the virtual machines (role instances).</span></span> <span data-ttu-id="44c68-113">Le metriche dettagliate consentono un'analisi più accurata dei problemi che si verificano durante l'elaborazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="44c68-113">The verbose metrics enable closer analysis of issues that occur during application operations.</span></span>

<span data-ttu-id="44c68-114">Per impostazione predefinita, i dati del contatore di prestazioni dalle istanze del ruolo sono campionati e trasferiti dall'istanza del ruolo a intervalli di 3 minuti.</span><span class="sxs-lookup"><span data-stu-id="44c68-114">By default performance counter data from role instances is sampled and transferred from the role instance at 3-minute intervals.</span></span> <span data-ttu-id="44c68-115">Quando viene abilitato il monitoraggio dettagliato, i dati non elaborati del contatore di prestazioni sono aggregati per ogni istanza del ruolo e per ogni ruolo tra istanze del ruolo a intervalli di 5 minuti, 1 ora e 12 ore.</span><span class="sxs-lookup"><span data-stu-id="44c68-115">When you enable verbose monitoring, the raw performance counter data is aggregated for each role instance and across role instances for each role at intervals of 5 minutes, 1 hour, and 12 hours.</span></span> <span data-ttu-id="44c68-116">I dati aggregati vengono eliminati dopo 10 giorni.</span><span class="sxs-lookup"><span data-stu-id="44c68-116">The aggregated data is purged after 10 days.</span></span>

<span data-ttu-id="44c68-117">Dopo aver abilitato il monitoraggio dettagliato, i dati aggregati di monitoraggio sono archiviati in tabelle nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="44c68-117">After you enable verbose monitoring, the aggregated monitoring data is stored in tables in your storage account.</span></span> <span data-ttu-id="44c68-118">Per abilitare il monitoraggio dettagliato per un ruolo, è necessario configurare una stringa di connessione diagnostica collegata all'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="44c68-118">To enable verbose monitoring for a role, you must configure a diagnostics connection string that links to the storage account.</span></span> <span data-ttu-id="44c68-119">È possibile usare account di archiviazione diversi per i diversi ruoli.</span><span class="sxs-lookup"><span data-stu-id="44c68-119">You can use different storage accounts for different roles.</span></span>

<span data-ttu-id="44c68-120">L'abilitazione del monitoraggio dettagliato comporta un aumento dei costi legati all'archiviazione e al trasferimento dei dati e alle transazioni di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="44c68-120">Enabling verbose monitoring increases your storage costs related to data storage, data transfer, and storage transactions.</span></span> <span data-ttu-id="44c68-121">Il monitoraggio minimo non richiede un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="44c68-121">Minimal monitoring does not require a storage account.</span></span> <span data-ttu-id="44c68-122">I dati per le metriche esposti al livello minimo di monitoraggio non sono archiviati nell'account di archiviazione, anche se si imposta il livello di monitoraggio dettagliato.</span><span class="sxs-lookup"><span data-stu-id="44c68-122">The data for the metrics that are exposed at the minimal monitoring level are not stored in your storage account, even if you set the monitoring level to verbose.</span></span>

## <a name="how-to-configure-monitoring-for-cloud-services"></a><span data-ttu-id="44c68-123">Procedura: Configurare il monitoraggio per i servizi cloud</span><span class="sxs-lookup"><span data-stu-id="44c68-123">How to: Configure monitoring for cloud services</span></span>
<span data-ttu-id="44c68-124">Attenersi alle procedure seguenti per configurare il monitoraggio dettagliato o minimo nel portale di Azure classico.</span><span class="sxs-lookup"><span data-stu-id="44c68-124">Use the following procedures to configure verbose or minimal monitoring in the Azure classic portal.</span></span> 

### <a name="before-you-begin"></a><span data-ttu-id="44c68-125">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="44c68-125">Before you begin</span></span>
* <span data-ttu-id="44c68-126">Creare un account di archiviazione *classico* per archiviare i dati di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="44c68-126">Create a *classic* storage account to store the monitoring data.</span></span> <span data-ttu-id="44c68-127">È possibile usare account di archiviazione diversi per i diversi ruoli.</span><span class="sxs-lookup"><span data-stu-id="44c68-127">You can use different storage accounts for different roles.</span></span> <span data-ttu-id="44c68-128">Per altre informazioni, vedere [Come creare un account di archiviazione](../storage/common/storage-create-storage-account.md#create-a-storage-account).</span><span class="sxs-lookup"><span data-stu-id="44c68-128">For more information, see [How to create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account).</span></span>
* <span data-ttu-id="44c68-129">Abilitare Diagnostica Azure per i ruoli del servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="44c68-129">Enable Azure Diagnostics for your cloud service roles.</span></span> <span data-ttu-id="44c68-130">Vedere [Configurazione della diagnostica per i servizi cloud](cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="44c68-130">See [Configuring Diagnostics for Cloud Services](cloud-services-dotnet-diagnostics.md).</span></span>

<span data-ttu-id="44c68-131">Assicurarsi che la stringa di connessione della diagnostica sia presente nella configurazione del ruolo.</span><span class="sxs-lookup"><span data-stu-id="44c68-131">Ensure that the diagnostics connection string is present in the Role configuration.</span></span> <span data-ttu-id="44c68-132">È possibile attivare il monitoraggio dettagliato fino ad abilitare la diagnostica di Azure e includere una stringa di connessione della diagnostica nella configurazione del ruolo.</span><span class="sxs-lookup"><span data-stu-id="44c68-132">You cannot turn on verbose monitoring until you enable Azure Diagnostics and include a diagnostics connection string in the Role configuration.</span></span>   

> [!NOTE]
> <span data-ttu-id="44c68-133">I progetti destinati a Azure SDK 2.5 non includono automaticamente la stringa di connessione della diagnostica nel modello di progetto.</span><span class="sxs-lookup"><span data-stu-id="44c68-133">Projects targeting Azure SDK 2.5 did not automatically include the diagnostics connection string in the project template.</span></span> <span data-ttu-id="44c68-134">Per questi progetti, è necessario aggiungere manualmente la stringa di connessione della diagnostica alla configurazione del ruolo.</span><span class="sxs-lookup"><span data-stu-id="44c68-134">For these projects, you need to manually add the diagnostics connection string to the Role configuration.</span></span>
> 
> 

<span data-ttu-id="44c68-135">**Per aggiungere manualmente la stringa di connessione della diagnostica alla configurazione del ruolo**</span><span class="sxs-lookup"><span data-stu-id="44c68-135">**To manually add diagnostics connection string to Role configuration**</span></span>

1. <span data-ttu-id="44c68-136">Aprire il progetto servizio cloud in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="44c68-136">Open the Cloud Service project in Visual Studio</span></span>
2. <span data-ttu-id="44c68-137">Fare doppio clic su **Ruolo** per aprire la progettazione Ruolo e selezionare la scheda **Impostazioni**.</span><span class="sxs-lookup"><span data-stu-id="44c68-137">Double-click on the **Role** to open the Role designer and select the **Settings** tab</span></span>
3. <span data-ttu-id="44c68-138">Cercare un’impostazione denominata **Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString**.</span><span class="sxs-lookup"><span data-stu-id="44c68-138">Look for a setting named **Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString**.</span></span> 
4. <span data-ttu-id="44c68-139">Se questa impostazione non è presente, fare clic sul pulsante **Aggiungi impostazione** per aggiungere l'impostazione alla configurazione e modificare il tipo per la nuova impostazione su **ConnectionString**.</span><span class="sxs-lookup"><span data-stu-id="44c68-139">If this setting is not present, click on the **Add Setting** button to add it to the configuration and change the type for the new setting to **ConnectionString**</span></span>
5. <span data-ttu-id="44c68-140">Impostare il valore per la stringa di connessione facendo clic sul pulsante **...** .</span><span class="sxs-lookup"><span data-stu-id="44c68-140">Set the value for connection string the by clicking on the **...** button.</span></span> <span data-ttu-id="44c68-141">Si apre una finestra di dialogo che consente di selezionare un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="44c68-141">This will open up a dialog allowing you to select a storage account.</span></span>
   
    ![Impostazioni di Visual Studio](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioDiagnosticsConnectionString.png)

### <a name="to-change-the-monitoring-level-to-verbose-or-minimal"></a><span data-ttu-id="44c68-143">Per cambiare il livello di monitoraggio a dettagliato o minimo</span><span class="sxs-lookup"><span data-stu-id="44c68-143">To change the monitoring level to verbose or minimal</span></span>
1. <span data-ttu-id="44c68-144">Nel [portale di Azure classico](https://manage.windowsazure.com/)aprire la pagina di **Configurazione** per la distribuzione del servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="44c68-144">In the [Azure classic portal](https://manage.windowsazure.com/), open the **Configure** page for the cloud service deployment.</span></span>
2. <span data-ttu-id="44c68-145">In **Livello** fare clic su **Dettagliato** o **Minimo**.</span><span class="sxs-lookup"><span data-stu-id="44c68-145">In **Level**, click **Verbose** or **Minimal**.</span></span> 
3. <span data-ttu-id="44c68-146">Fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="44c68-146">Click **Save**.</span></span>

<span data-ttu-id="44c68-147">Dopo avere abilitato il monitoraggio dettagliato, è consigliabile visualizzare i primi dati di monitoraggio nel portale di Azure classico entro un'ora.</span><span class="sxs-lookup"><span data-stu-id="44c68-147">After you turn on verbose monitoring, you should start seeing the monitoring data in the Azure classic portal within the hour.</span></span>

<span data-ttu-id="44c68-148">I dati non elaborati del contatore di prestazioni e i dati aggregati di monitoraggio sono archiviati nell'account di archiviazione in tabelle contraddistinte dall'ID di distribuzione per i ruoli.</span><span class="sxs-lookup"><span data-stu-id="44c68-148">The raw performance counter data and aggregated monitoring data are stored in the storage account in tables qualified by the deployment ID for the roles.</span></span> 

## <a name="how-to-receive-alerts-for-cloud-service-metrics"></a><span data-ttu-id="44c68-149">Procedura: Ricevere avvisi per le metriche dei servizi cloud</span><span class="sxs-lookup"><span data-stu-id="44c68-149">How to: Receive alerts for cloud service metrics</span></span>
<span data-ttu-id="44c68-150">È possibile ricevere avvisi basati sulle metriche di monitoraggio del servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="44c68-150">You can receive alerts based on your cloud service monitoring metrics.</span></span> <span data-ttu-id="44c68-151">Nella pagina **Servizi di gestione** del portale di Azure classico è possibile creare una regola per attivare un avviso quando la metrica scelta raggiunge il valore specificato.</span><span class="sxs-lookup"><span data-stu-id="44c68-151">On the **Management Services** page of the Azure classic portal, you can create a rule to trigger an alert when the metric you choose reaches a value that you specify.</span></span> <span data-ttu-id="44c68-152">È inoltre possibile impostare l'invio di un messaggio di posta elettronica all'attivazione dell'avviso.</span><span class="sxs-lookup"><span data-stu-id="44c68-152">You can also choose to have email sent when the alert is triggered.</span></span> <span data-ttu-id="44c68-153">Per altre informazioni, vedere [Procedura: Ricevere notifiche di avviso e gestire le relative regole in Azure](http://go.microsoft.com/fwlink/?LinkId=309356).</span><span class="sxs-lookup"><span data-stu-id="44c68-153">For more information, see [How to: Receive Alert Notifications and Manage Alert Rules in Azure](http://go.microsoft.com/fwlink/?LinkId=309356).</span></span>

## <a name="how-to-add-metrics-to-the-metrics-table"></a><span data-ttu-id="44c68-154">Procedura: Aggiungere metriche alla relativa tabella</span><span class="sxs-lookup"><span data-stu-id="44c68-154">How to: Add metrics to the metrics table</span></span>
1. <span data-ttu-id="44c68-155">Nel [portale di Azure classico](http://manage.windowsazure.com/)aprire la pagina **Monitoraggio** per il servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="44c68-155">In the [Azure classic portal](http://manage.windowsazure.com/), open the **Monitor** page for the cloud service.</span></span>
   
    <span data-ttu-id="44c68-156">Per impostazione predefinita, la tabella delle metriche riporta un subset delle metriche disponibili.</span><span class="sxs-lookup"><span data-stu-id="44c68-156">By default, the metrics table displays a subset of the available metrics.</span></span> <span data-ttu-id="44c68-157">Nell'illustrazione sono visualizzate le metriche dettagliate predefinite per un servizio cloud, limitate al contatore di prestazioni Memoria/MB disponibili, con dati aggregati a livello di ruolo.</span><span class="sxs-lookup"><span data-stu-id="44c68-157">The illustration shows the default verbose metrics for a cloud service, which is limited to the Memory\Available MBytes performance counter, with data aggregated at the role level.</span></span> <span data-ttu-id="44c68-158">Utilizzare **Aggiungi Metriche** per selezionare altre metriche aggregate e a livello di ruolo da monitorare nel portale di Azure classico.</span><span class="sxs-lookup"><span data-stu-id="44c68-158">Use **Add Metrics** to select additional aggregate and role-level metrics to monitor in the Azure classic portal.</span></span>
   
    ![Visualizzazione dettagliata](./media/cloud-services-how-to-monitor/CloudServices_DefaultVerboseDisplay.png)
2. <span data-ttu-id="44c68-160">Per aggiungere metriche alla relativa tabella:</span><span class="sxs-lookup"><span data-stu-id="44c68-160">To add metrics to the metrics table:</span></span>
   
   1. <span data-ttu-id="44c68-161">Fare clic su **Aggiungi metriche** per aprire **Scegli metriche**, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="44c68-161">Click **Add Metrics** to open **Choose Metrics**, shown below.</span></span>
      
       <span data-ttu-id="44c68-162">Viene espansa la prima metrica disponibile per visualizzare le opzioni disponibili.</span><span class="sxs-lookup"><span data-stu-id="44c68-162">The first available metric is expanded to show options that are available.</span></span> <span data-ttu-id="44c68-163">Per ogni metrica, la prima opzione consente di visualizzare dati aggregati di monitoraggio per tutti i ruoli.</span><span class="sxs-lookup"><span data-stu-id="44c68-163">For each metric, the top option displays aggregated monitoring data for all roles.</span></span> <span data-ttu-id="44c68-164">È inoltre possibile scegliere i singoli ruoli di cui visualizzare i dati.</span><span class="sxs-lookup"><span data-stu-id="44c68-164">In addition, you can choose individual roles to display data for.</span></span>
      
       ![Aggiungi Metriche](./media/cloud-services-how-to-monitor/CloudServices_AddMetrics.png)
   2. <span data-ttu-id="44c68-166">Per selezionare la metrica da visualizzare</span><span class="sxs-lookup"><span data-stu-id="44c68-166">To select metrics to display</span></span>
      
      * <span data-ttu-id="44c68-167">Fare clic sulla freccia giù accanto alla metrica per espandere le opzioni di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="44c68-167">Click the down arrow by the metric to expand the monitoring options.</span></span>
      * <span data-ttu-id="44c68-168">Selezionare le caselle di controllo relative alle opzioni di monitoraggio da visualizzare.</span><span class="sxs-lookup"><span data-stu-id="44c68-168">Select the check box for each monitoring option you want to display.</span></span>
        
        <span data-ttu-id="44c68-169">Nella tabella delle metriche è possibile visualizzare fino a 50 metriche.</span><span class="sxs-lookup"><span data-stu-id="44c68-169">You can display up to 50 metrics in the metrics table.</span></span>
        
        > [!TIP]
        > <span data-ttu-id="44c68-170">Nel monitoraggio dettagliato l'elenco delle metriche può contenere decine di metriche.</span><span class="sxs-lookup"><span data-stu-id="44c68-170">In verbose monitoring, the metrics list can contain dozens of metrics.</span></span> <span data-ttu-id="44c68-171">Per visualizzare una barra di scorrimento, passare il puntatore del mouse sul lato destro della finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="44c68-171">To display a scrollbar, hover over the right side of the dialog box.</span></span> <span data-ttu-id="44c68-172">Per filtrare l'elenco, fare clic sull'icona di ricerca e immettere il testo nella casella di ricerca, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="44c68-172">To filter the list, click the search icon, and enter text in the search box, as shown below.</span></span>
        > 
        > 
        
        ![Ricerca Aggiungi metriche](./media/cloud-services-how-to-monitor/CloudServices_AddMetrics_Search.png)
3. <span data-ttu-id="44c68-174">Dopo aver completato la selezione delle metriche, fare clic su OK (segno di spunta).</span><span class="sxs-lookup"><span data-stu-id="44c68-174">After you finish selecting metrics, click OK (checkmark).</span></span>
   
    <span data-ttu-id="44c68-175">Le metriche selezionate vengono aggiunte alla tabella, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="44c68-175">The selected metrics are added to the metrics table, as shown below.</span></span>
   
    ![monitor metriche](./media/cloud-services-how-to-monitor/CloudServices_Monitor_UpdatedMetrics.png)
4. <span data-ttu-id="44c68-177">Per eliminare una metrica dalla tabella, fare clic sulla metrica per selezionarla e quindi fare clic su **Delete Metric**.</span><span class="sxs-lookup"><span data-stu-id="44c68-177">To delete a metric from the metrics table, click the metric to select it, and then click **Delete Metric**.</span></span> <span data-ttu-id="44c68-178">(Selezionando una metrica viene visualizzata solo l'opzione **Delete Metric** .)</span><span class="sxs-lookup"><span data-stu-id="44c68-178">(You only see **Delete Metric** when you have a metric selected.)</span></span>

### <a name="to-add-custom-metrics-to-the-metrics-table"></a><span data-ttu-id="44c68-179">Per aggiungere metriche personalizzate alla relativa tabella</span><span class="sxs-lookup"><span data-stu-id="44c68-179">To add custom metrics to the metrics table</span></span>
<span data-ttu-id="44c68-180">Il livello di monitoraggio **Dettagliato** fornisce un elenco delle metriche predefinite che è possibile monitorare nel portale.</span><span class="sxs-lookup"><span data-stu-id="44c68-180">The **Verbose** monitoring level provides a list of default metrics that you can monitor on the portal.</span></span> <span data-ttu-id="44c68-181">Oltre a queste metriche, è possibile monitorare le metriche personalizzate o i contatori delle prestazioni definiti dall'applicazione tramite il portale.</span><span class="sxs-lookup"><span data-stu-id="44c68-181">In addition to these you can monitor any custom metrics or performance counters defined by your application through the portal.</span></span>

<span data-ttu-id="44c68-182">Nei passaggi seguenti si presuppone che sia stato attivato il livello di monitoraggio **Dettagliato** e che sia stata configurata l'applicazione per raccogliere e trasferire i contatori delle prestazioni personalizzati.</span><span class="sxs-lookup"><span data-stu-id="44c68-182">The following steps assume that you have turned on **Verbose** monitoring level and have configured your application to collect and transfer custom performance counters.</span></span> 

<span data-ttu-id="44c68-183">Per visualizzare i contatori delle prestazioni personalizzati nel portale è necessario aggiornare la configurazione in wad-control-container:</span><span class="sxs-lookup"><span data-stu-id="44c68-183">To display the custom performance counters in the portal you need to update the configuration in wad-control-container:</span></span>

1. <span data-ttu-id="44c68-184">Aprire il BLOB wad-control-container nell'account di archiviazione della diagnostica.</span><span class="sxs-lookup"><span data-stu-id="44c68-184">Open the wad-control-container blob in your diagnostics storage account.</span></span> <span data-ttu-id="44c68-185">A tale scopo, è possibile usare Visual Studio o un altro Esplora archivi.</span><span class="sxs-lookup"><span data-stu-id="44c68-185">You can use Visual Studio or any other storage explorer to do this.</span></span>
   
    ![Esplora server di Visual Studio.](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioBlobExplorer.png)
2. <span data-ttu-id="44c68-187">Passare al percorso del BLOB usando il modello **DeploymentId/RoleName/RoleInstance** per trovare la configurazione per l'istanza del ruolo.</span><span class="sxs-lookup"><span data-stu-id="44c68-187">Navigate the blob path using the pattern **DeploymentId/RoleName/RoleInstance** to find the configuration for your role instance.</span></span> 
   
    ![Esplora archivi di Visual Studio.](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioStorage.png)
3. <span data-ttu-id="44c68-189">Scaricare il file di configurazione per l'istanza del ruolo e aggiornarlo in modo da includere eventuali contatori delle prestazioni personalizzati.</span><span class="sxs-lookup"><span data-stu-id="44c68-189">Download the configuration file for your role instance and update it to include any custom performance counters.</span></span> <span data-ttu-id="44c68-190">Ad esempio, per monitorare *Byte scritti su disco/sec* per l'*unità C*, aggiungere il codice seguente nel nodo **PerformanceCounters\Subscriptions**.</span><span class="sxs-lookup"><span data-stu-id="44c68-190">For example to monitor *Disk Write Bytes/sec* for the *C drive* add the following under **PerformanceCounters\Subscriptions** node</span></span>
   
    ```xml
    <PerformanceCounterConfiguration>
    <CounterSpecifier>\LogicalDisk(C:)\Disk Write Bytes/sec</CounterSpecifier>
    <SampleRateInSeconds>180</SampleRateInSeconds>
    </PerformanceCounterConfiguration>
    ```
4. <span data-ttu-id="44c68-191">Salvare le modifiche e caricare il file di configurazione nuovamente nello stesso percorso sovrascrivendo il file esistente nel BLOB.</span><span class="sxs-lookup"><span data-stu-id="44c68-191">Save the changes and upload the configuration file back to the same location overwriting the existing file in the blob.</span></span>
5. <span data-ttu-id="44c68-192">Passare alla modalità dettagliata nella configurazione del portale di Azure classico.</span><span class="sxs-lookup"><span data-stu-id="44c68-192">Toggle to Verbose mode in the Azure classic portal configuration.</span></span> <span data-ttu-id="44c68-193">Se si è già in modalità dettagliata è necessario attivare la modalità minima e tornare alla modalità dettagliata.</span><span class="sxs-lookup"><span data-stu-id="44c68-193">If you were in Verbose mode already you will have to toggle to minimal and back to verbose.</span></span>
6. <span data-ttu-id="44c68-194">Il contatore delle prestazioni personalizzato sarà ora disponibile nella finestra di dialogo **Aggiungi metriche** .</span><span class="sxs-lookup"><span data-stu-id="44c68-194">The custom performance counter will now be available in the **Add Metrics** dialog box.</span></span> 

## <a name="how-to-customize-the-metrics-chart"></a><span data-ttu-id="44c68-195">Procedura: Personalizzare il grafico delle metriche</span><span class="sxs-lookup"><span data-stu-id="44c68-195">How to: Customize the metrics chart</span></span>
1. <span data-ttu-id="44c68-196">Nella tabella delle metriche selezionare fino a 6 metriche da tracciare nel relativo grafico.</span><span class="sxs-lookup"><span data-stu-id="44c68-196">In the metrics table, select up to 6 metrics to plot on the metrics chart.</span></span> <span data-ttu-id="44c68-197">Per selezionare una metrica, fare clic sulla casella di controllo a sinistra.</span><span class="sxs-lookup"><span data-stu-id="44c68-197">To select a metric, click the check box on its left side.</span></span> <span data-ttu-id="44c68-198">Per rimuovere una metrica dal grafico, deselezionare la casella di controllo nella tabella delle metriche.</span><span class="sxs-lookup"><span data-stu-id="44c68-198">To remove a metric from the metrics chart, clear its check box in the metrics table.</span></span>
   
    <span data-ttu-id="44c68-199">Le metriche selezionate nella tabella vengono aggiunte al grafico.</span><span class="sxs-lookup"><span data-stu-id="44c68-199">As you select metrics in the metrics table, the metrics are added to the metrics chart.</span></span> <span data-ttu-id="44c68-200">Su uno schermo stretto, un elenco a discesa **n more** riporta le intestazioni delle metriche che non si adattano allo schermo.</span><span class="sxs-lookup"><span data-stu-id="44c68-200">On a narrow display, an **n more** drop-down list contains metric headers that won't fit the display.</span></span>
2. <span data-ttu-id="44c68-201">Per passare dalla visualizzazione di valori relativi (solo il valore finale per ogni metrica) e valori assoluti (asse Y visualizzato), selezionare Relative o Absolute nella parte superiore del grafico.</span><span class="sxs-lookup"><span data-stu-id="44c68-201">To switch between displaying relative values (final value only for each metric) and absolute values (Y axis displayed), select Relative or Absolute at the top of the chart.</span></span>
   
    ![Relative o Absolute](./media/cloud-services-how-to-monitor/CloudServices_Monitor_RelativeAbsolute.png)
3. <span data-ttu-id="44c68-203">Per modificare l'intervallo di tempo visualizzato sul grafico delle metriche, selezionare 1 ora, 24 ore o 7 giorni nella parte superiore del grafico.</span><span class="sxs-lookup"><span data-stu-id="44c68-203">To change the time range the metrics chart displays, select 1 hour, 24 hours, or 7 days at the top of the chart.</span></span>
   
    ![Visualizzazione del periodo monitorato](./media/cloud-services-how-to-monitor/CloudServices_Monitor_DisplayPeriod.png)
   
    <span data-ttu-id="44c68-205">Nel grafico delle metriche del dashboard le metriche vengono tracciate in modo diverso.</span><span class="sxs-lookup"><span data-stu-id="44c68-205">On the dashboard metrics chart, the method for plotting metrics is different.</span></span> <span data-ttu-id="44c68-206">È disponibile un set di metriche standard che vengono aggiunte o rimosse selezionandone l'intestazione.</span><span class="sxs-lookup"><span data-stu-id="44c68-206">A standard set of metrics is available, and metrics are added or removed by selecting the metric header.</span></span>

### <a name="to-customize-the-metrics-chart-on-the-dashboard"></a><span data-ttu-id="44c68-207">Per personalizzare il grafico delle metriche sul dashboard</span><span class="sxs-lookup"><span data-stu-id="44c68-207">To customize the metrics chart on the dashboard</span></span>
1. <span data-ttu-id="44c68-208">Aprire il dashboard per il servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="44c68-208">Open the dashboard for the cloud service.</span></span>
2. <span data-ttu-id="44c68-209">Aggiungere o rimuovere le metriche dal grafico:</span><span class="sxs-lookup"><span data-stu-id="44c68-209">Add or remove metrics from the chart:</span></span>
   
   * <span data-ttu-id="44c68-210">Per riportare una nuova metrica, selezionare la casella di controllo corrispondente nelle intestazioni del grafico.</span><span class="sxs-lookup"><span data-stu-id="44c68-210">To plot a new metric, select the check box for the metric in the chart headers.</span></span> <span data-ttu-id="44c68-211">Su uno schermo stretto fare clic sulla freccia verso il basso accanto a ***n*??metrics** per tracciare sul grafico una metrica non visualizzata nell'area delle intestazioni del grafico.</span><span class="sxs-lookup"><span data-stu-id="44c68-211">On a narrow display, click the down arrow by ***n*??metrics** to plot a metric the chart header area can't display.</span></span>
   * <span data-ttu-id="44c68-212">Per eliminare una metrica tracciata sul grafico, deselezionare la casella di controllo accanto all'intestazione.</span><span class="sxs-lookup"><span data-stu-id="44c68-212">To delete a metric that is plotted on the chart, clear the check box by its header.</span></span>
   
3. <span data-ttu-id="44c68-213">Passare dalla visualizzazione **relativa** a quella **assoluta**.</span><span class="sxs-lookup"><span data-stu-id="44c68-213">Switch between **Relative** and **Absolute** displays.</span></span>
4. <span data-ttu-id="44c68-214">Scegliere se visualizzare dati relativi a 1 ora, 24 ore o 7 giorni.</span><span class="sxs-lookup"><span data-stu-id="44c68-214">Choose 1 hour, 24 hours, or 7 days of data to display.</span></span>

## <a name="how-to-access-verbose-monitoring-data-outside-the-azure-classic-portal"></a><span data-ttu-id="44c68-215">Procedura: accedere ai dati di monitoraggio dettagliati all'esterno del portale di Azure classico</span><span class="sxs-lookup"><span data-stu-id="44c68-215">How to: Access verbose monitoring data outside the Azure classic portal</span></span>
<span data-ttu-id="44c68-216">I dati di monitoraggio dettagliati sono archiviati in tabelle negli account di archiviazione specificati per ogni ruolo.</span><span class="sxs-lookup"><span data-stu-id="44c68-216">Verbose monitoring data is stored in tables in the storage accounts that you specify for each role.</span></span> <span data-ttu-id="44c68-217">Per ogni distribuzione del servizio cloud, vengono create sei tabelle per il ruolo.</span><span class="sxs-lookup"><span data-stu-id="44c68-217">For each cloud service deployment, six tables are created for the role.</span></span> <span data-ttu-id="44c68-218">Vengono create due tabelle per ogni intervallo di tempo (5 minuti, 1 ora e 12 ore).</span><span class="sxs-lookup"><span data-stu-id="44c68-218">Two tables are created for each (5 minutes, 1 hour, and 12 hours).</span></span> <span data-ttu-id="44c68-219">Una di queste tabelle archivia aggregazioni a livello di ruolo, mentre l'altra archivia le aggregazioni per le istanze del ruolo.</span><span class="sxs-lookup"><span data-stu-id="44c68-219">One of these tables stores role-level aggregations; the other table stores aggregations for role instances.</span></span> 

<span data-ttu-id="44c68-220">I nomi delle tabelle presentano il formato seguente:</span><span class="sxs-lookup"><span data-stu-id="44c68-220">The table names have the following format:</span></span>

```
WAD*deploymentID*PT*aggregation_interval*[R|RI]Table
```

<span data-ttu-id="44c68-221">dove:</span><span class="sxs-lookup"><span data-stu-id="44c68-221">where:</span></span>

* <span data-ttu-id="44c68-222">*deploymentID* è il GUID assegnato alla distribuzione del servizio cloud</span><span class="sxs-lookup"><span data-stu-id="44c68-222">*deploymentID* is the GUID assigned to the cloud service deployment</span></span>
* <span data-ttu-id="44c68-223">*aggregation_interval* = 5M, 1H o 12H</span><span class="sxs-lookup"><span data-stu-id="44c68-223">*aggregation_interval* = 5M, 1H, or 12H</span></span>
* <span data-ttu-id="44c68-224">aggregazioni a livello di ruolo = R</span><span class="sxs-lookup"><span data-stu-id="44c68-224">role-level aggregations = R</span></span>
* <span data-ttu-id="44c68-225">aggregazioni per le istanze del ruolo = RI</span><span class="sxs-lookup"><span data-stu-id="44c68-225">aggregations for role instances = RI</span></span>

<span data-ttu-id="44c68-226">Ad esempio, nelle seguenti tabelle sarebbero archiviati dati di monitoraggio dettagliato aggregati a intervalli di 1 ora:</span><span class="sxs-lookup"><span data-stu-id="44c68-226">For example, the following tables would store verbose monitoring data aggregated at 1-hour intervals:</span></span>

```
WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRTable (hourly aggregations for the role)

WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRITable (hourly aggregations for role instances)
```
