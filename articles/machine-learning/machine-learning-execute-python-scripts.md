---
title: Eseguire gli script di apprendimento automatico di Python | Documentazione Microsoft
description: "Descrive i principi di progettazione di base per gli script Python in Azure Machine Learning nonché gli scenari di utilizzo di base, le funzionalità e le limitazioni."
keywords: apprendimento automatico di python, pandas, pandas di python, script di python, eseguire gli script di python
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: ee9eb764-0d3e-4104-a797-19fc29345d39
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: bradsev
ms.openlocfilehash: e8d6377bc939e6711a96e521b5f574fc8d060929
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="execute-python-machine-learning-scripts-in-azure-machine-learning-studio"></a><span data-ttu-id="ca45c-104">Eseguire gli script di apprendimento automatico di Python in Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="ca45c-104">Execute Python machine learning scripts in Azure Machine Learning Studio</span></span>

<span data-ttu-id="ca45c-105">Questo argomento descrive i principi di progettazione alla base dell'attuale supporto per gli script Python in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-105">This topic describes the design principles underlying the current support for Python scripts in Azure Machine Learning.</span></span> <span data-ttu-id="ca45c-106">Vengono illustrate anche le funzionalità principali disponibili, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="ca45c-106">The main capabilities provided are also outlined, including:</span></span>

- <span data-ttu-id="ca45c-107">Esecuzione di scenari di utilizzo di base</span><span class="sxs-lookup"><span data-stu-id="ca45c-107">execute basic usage scenarios</span></span>
- <span data-ttu-id="ca45c-108">Assegnazione di punteggi a un esperimento in un servizio Web</span><span class="sxs-lookup"><span data-stu-id="ca45c-108">score an experiment in a web service</span></span>
- <span data-ttu-id="ca45c-109">Supporto per l'importazione di codice esistente</span><span class="sxs-lookup"><span data-stu-id="ca45c-109">support for importing existing code</span></span>
- <span data-ttu-id="ca45c-110">Esportazione delle visualizzazioni</span><span class="sxs-lookup"><span data-stu-id="ca45c-110">export visualizations</span></span>
- <span data-ttu-id="ca45c-111">Selezione delle funzionalità con supervisione</span><span class="sxs-lookup"><span data-stu-id="ca45c-111">perform supervised feature selection</span></span>
- <span data-ttu-id="ca45c-112">Informazioni su alcune limitazioni</span><span class="sxs-lookup"><span data-stu-id="ca45c-112">understand some limitations</span></span>

<span data-ttu-id="ca45c-113">[Python](https://www.python.org/) è uno strumento indispensabile nella dotazione di strumenti di molti data scientist.</span><span class="sxs-lookup"><span data-stu-id="ca45c-113">[Python](https://www.python.org/) is an indispensable tool in the tool chest of many data scientists.</span></span> <span data-ttu-id="ca45c-114">Le sue caratteristiche sono:</span><span class="sxs-lookup"><span data-stu-id="ca45c-114">It has:</span></span>

* <span data-ttu-id="ca45c-115">una sintassi elegante e concisa;</span><span class="sxs-lookup"><span data-stu-id="ca45c-115">an elegant and concise syntax,</span></span> 
* <span data-ttu-id="ca45c-116">il supporto multipiattaforma;</span><span class="sxs-lookup"><span data-stu-id="ca45c-116">cross-platform support,</span></span> 
* <span data-ttu-id="ca45c-117">un'ampia raccolta di librerie complete;</span><span class="sxs-lookup"><span data-stu-id="ca45c-117">a vast collection of powerful libraries, and</span></span> 
* <span data-ttu-id="ca45c-118">strumenti di sviluppo avanzati.</span><span class="sxs-lookup"><span data-stu-id="ca45c-118">mature development tools.</span></span> 

<span data-ttu-id="ca45c-119">Python viene usato in tutte le fasi di un flusso di lavoro usato in genere nella modellazione di Machine Learning:</span><span class="sxs-lookup"><span data-stu-id="ca45c-119">Python is being used in all phases of a workflow typically used in machine learning modeling:</span></span>

- <span data-ttu-id="ca45c-120">Inserimento ed elaborazione dei dati</span><span class="sxs-lookup"><span data-stu-id="ca45c-120">data ingest and processing</span></span> 
- <span data-ttu-id="ca45c-121">Costruzione delle funzionalità</span><span class="sxs-lookup"><span data-stu-id="ca45c-121">feature construction</span></span>
- <span data-ttu-id="ca45c-122">Training dei modelli</span><span class="sxs-lookup"><span data-stu-id="ca45c-122">model training</span></span> 
- <span data-ttu-id="ca45c-123">Convalida dei modelli</span><span class="sxs-lookup"><span data-stu-id="ca45c-123">model validation</span></span>
- <span data-ttu-id="ca45c-124">Distribuzione dei modelli</span><span class="sxs-lookup"><span data-stu-id="ca45c-124">deployment of the models</span></span>

<span data-ttu-id="ca45c-125">Azure Machine Learning Studio supporta l'incorporamento di script Python in varie parti di un esperimento di apprendimento automatico, nonché la relativa pubblicazione diretta come servizi Web in Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="ca45c-125">Azure Machine Learning Studio supports embedding Python scripts into various parts of a machine learning experiment and also seamlessly publishing them as web services on Microsoft Azure.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]


## <a name="design-principles-of-python-scripts-in-machine-learning"></a><span data-ttu-id="ca45c-126">Principi di progettazione degli script Python in Machine Learning</span><span class="sxs-lookup"><span data-stu-id="ca45c-126">Design principles of Python scripts in Machine Learning</span></span>

<span data-ttu-id="ca45c-127">L'interfaccia primaria di Python in Azure Machine Learning Studio è il modulo [Execute Python Script][execute-python-script] (Esegui script Python) illustrato nella figura 1.</span><span class="sxs-lookup"><span data-stu-id="ca45c-127">The primary interface to Python in Azure Machine Learning Studio is via the [Execute Python Script][execute-python-script] module shown in Figure 1.</span></span>

![Immagine1](./media/machine-learning-execute-python-scripts/execute-machine-learning-python-scripts-module.png)

![Immagine2](./media/machine-learning-execute-python-scripts/embedded-machine-learning-python-script.png)

<span data-ttu-id="ca45c-130">Figura 1.</span><span class="sxs-lookup"><span data-stu-id="ca45c-130">Figure 1.</span></span> <span data-ttu-id="ca45c-131">Modulo **Execute Python Script** .</span><span class="sxs-lookup"><span data-stu-id="ca45c-131">The **Execute Python Script** module.</span></span>

<span data-ttu-id="ca45c-132">Il modulo [Execute Python Script][execute-python-script] in Azure ML Studio accetta un massimo di tre input e produce un massimo di due output, come illustrato nella sezione seguente, come l'analogo modulo R, ovvero [Esegui script R][execute-r-script].</span><span class="sxs-lookup"><span data-stu-id="ca45c-132">The [Execute Python Script][execute-python-script] module in Azure ML Studio accepts up to three inputs and produces up to two outputs (discussed in the following section), like its R analogue, the [Execute R Script][execute-r-script] module.</span></span> <span data-ttu-id="ca45c-133">Il codice Python da eseguire viene immesso nella casella dei parametri come una funzione del punto di ingresso appositamente denominata, detta `azureml_main`.</span><span class="sxs-lookup"><span data-stu-id="ca45c-133">The Python code to be executed is entered into the parameter box as a specially named entry-point function called `azureml_main`.</span></span> <span data-ttu-id="ca45c-134">Di seguito sono descritti i principi di progettazione principali usati per implementare questo modulo:</span><span class="sxs-lookup"><span data-stu-id="ca45c-134">Here are the key design principles used to implement this module:</span></span>

1. <span data-ttu-id="ca45c-135">*Deve essere idiomatico per gli utenti di Python.*</span><span class="sxs-lookup"><span data-stu-id="ca45c-135">*Must be idiomatic for Python users.*</span></span> <span data-ttu-id="ca45c-136">La maggior parte degli utenti di Python struttura il codice come funzioni nei moduli.</span><span class="sxs-lookup"><span data-stu-id="ca45c-136">Most Python users factor their code as functions inside modules.</span></span> <span data-ttu-id="ca45c-137">L'inserimento di un numero elevato di istruzioni eseguibili in un modo di primo livello è quindi relativamente raro.</span><span class="sxs-lookup"><span data-stu-id="ca45c-137">So putting a lot of executable statements in a top-level module is relatively rare.</span></span> <span data-ttu-id="ca45c-138">Di conseguenza, anche la casella di script accetta una funzione Python appositamente denominata invece di una semplice sequenza di istruzioni.</span><span class="sxs-lookup"><span data-stu-id="ca45c-138">As a result, the script box also takes a specially named Python function as opposed to just a sequence of statements.</span></span> <span data-ttu-id="ca45c-139">Gli oggetti esposti nella funzione sono tipi di librerie Python standard, ad esempio frame di dati [Pandas](http://pandas.pydata.org/) e matrici [NumPy](http://www.numpy.org/).</span><span class="sxs-lookup"><span data-stu-id="ca45c-139">The objects exposed in the function are standard Python library types such as [Pandas](http://pandas.pydata.org/) data frames and [NumPy](http://www.numpy.org/) arrays.</span></span>
2. <span data-ttu-id="ca45c-140">*Deve avere un alto livello di fedeltà tra le esecuzioni locali e nel cloud.*</span><span class="sxs-lookup"><span data-stu-id="ca45c-140">*Must have high-fidelity between local and cloud executions.*</span></span> <span data-ttu-id="ca45c-141">Il back-end usato per eseguire il codice Python si basa su [Anaconda](https://store.continuum.io/cshop/anaconda/), una distribuzione Python scientifica multipiattaforma ampiamente diffusa.</span><span class="sxs-lookup"><span data-stu-id="ca45c-141">The backend used to execute the Python code is based on [Anaconda](https://store.continuum.io/cshop/anaconda/), a widely used cross-platform scientific Python distribution.</span></span> <span data-ttu-id="ca45c-142">Include circa 200 dei più comuni pacchetti Python.</span><span class="sxs-lookup"><span data-stu-id="ca45c-142">It comes with close to 200 of the most common Python packages.</span></span> <span data-ttu-id="ca45c-143">Di conseguenza, i professionisti possono eseguire il debug e qualificare il codice nel proprio ambiente Anaconda locale compatibile con Machine Learning di Azure.</span><span class="sxs-lookup"><span data-stu-id="ca45c-143">Therefore, data scientists can debug and qualify their code on their local Azure Machine Learning-compatible Anaconda environment.</span></span> <span data-ttu-id="ca45c-144">Possono quindi usare un ambiente di sviluppo esistente, ad esempio notebook [IPython](http://ipython.org/) o [Python Tools for Visual Studio](http://aka.ms/ptvs), per eseguire il codice come parte di un esperimento di Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-144">Then use an existing development environment, such as [IPython](http://ipython.org/) notebook or [Python Tools for Visual Studio](http://aka.ms/ptvs), to run it as part of an Azure ML experiment.</span></span> <span data-ttu-id="ca45c-145">Il punto di ingresso `azureml_main` è una funzione Python convenzionale che è possibile modificare senza il codice specifico di Azure Machine Learning o l'SDK installato.</span><span class="sxs-lookup"><span data-stu-id="ca45c-145">The `azureml_main` entry point is a vanilla Python function and so ****can be authored without Azure ML-specific code or the SDK installed.</span></span>
3. <span data-ttu-id="ca45c-146">*Deve essere facilmente componibile con altri moduli di Azure Machine Learning.*</span><span class="sxs-lookup"><span data-stu-id="ca45c-146">*Must be seamlessly composable with other Azure Machine Learning modules.*</span></span> <span data-ttu-id="ca45c-147">Il modulo [Execute Python Script][execute-python-script] (Esegui script Python) accetta come input e output i set di dati standard di Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-147">The [Execute Python Script][execute-python-script] module accepts, as inputs and outputs, standard Azure Machine Learning datasets.</span></span> <span data-ttu-id="ca45c-148">Il framework sottostante collega in modo trasparente ed efficiente i runtime di Azure Machine Learning e Python.</span><span class="sxs-lookup"><span data-stu-id="ca45c-148">The underlying framework transparently and efficiently bridges the Azure ML and Python runtimes.</span></span> <span data-ttu-id="ca45c-149">È quindi possibile usare Python in combinazione ai flussi di lavoro di Azure Machine Learning esistenti, inclusi quelli che effettuano chiamate in R e SQLite.</span><span class="sxs-lookup"><span data-stu-id="ca45c-149">So Python can be used in conjunction with existing Azure ML workflows, including those that call into R and SQLite.</span></span> <span data-ttu-id="ca45c-150">Un data scientist può quindi creare flussi di lavoro che consentono di eseguire le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="ca45c-150">A  result, data scientist could compose workflows that:</span></span>
   * <span data-ttu-id="ca45c-151">Uso di Python e Pandas per la pre-elaborazione e la pulizia dei dati.</span><span class="sxs-lookup"><span data-stu-id="ca45c-151">use Python and Pandas for data pre-processing and cleaning</span></span>
   * <span data-ttu-id="ca45c-152">Feed dei dati a una trasformazione SQL, unendo più set di dati per creare funzioni.</span><span class="sxs-lookup"><span data-stu-id="ca45c-152">feed the data to a SQL transformation, joining multiple datasets to form features</span></span>
   * <span data-ttu-id="ca45c-153">Training di modelli tramite algoritmi in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-153">train models using the algorithms in Azure Machine Learning</span></span> 
   * <span data-ttu-id="ca45c-154">Valutazione e post-elaborazione dei risultati tramite R.</span><span class="sxs-lookup"><span data-stu-id="ca45c-154">evaluate and post-process the results using R.</span></span>


## <a name="basic-usage-scenarios-in-ml-for-python-scripts"></a><span data-ttu-id="ca45c-155">Scenari di utilizzo di base in Machine Learning per gli script Python</span><span class="sxs-lookup"><span data-stu-id="ca45c-155">Basic usage scenarios in ML for Python scripts</span></span>

<span data-ttu-id="ca45c-156">In questa sezione si osserveranno alcuni usi di base del modulo [Execute Python Script][execute-python-script] (Esegui script Python).</span><span class="sxs-lookup"><span data-stu-id="ca45c-156">In this section, we survey some of the basic uses of the [Execute Python Script][execute-python-script] module.</span></span> <span data-ttu-id="ca45c-157">Qualsiasi input nel modulo Python viene esposto come frame di dati Pandas.</span><span class="sxs-lookup"><span data-stu-id="ca45c-157">Inputs to the Python module are exposed as Pandas data frames.</span></span> <span data-ttu-id="ca45c-158">La funzione deve restituire un pacchetto con un singolo frame di dati Pandas all'interno di una [sequenza](https://docs.python.org/2/c-api/sequence.html) Python, ad esempio, una tupla, un elenco o una matrice NumPy.</span><span class="sxs-lookup"><span data-stu-id="ca45c-158">The function must return a single Pandas data frame packaged inside of a Python [sequence](https://docs.python.org/2/c-api/sequence.html) such as a tuple, list, or NumPy array.</span></span> <span data-ttu-id="ca45c-159">Il primo elemento di questa sequenza viene quindi restituito nella prima porta di output del modulo.</span><span class="sxs-lookup"><span data-stu-id="ca45c-159">The first element of this sequence is then returned in the first output port of the module.</span></span> <span data-ttu-id="ca45c-160">Questo schema è illustrato nella figura 2.</span><span class="sxs-lookup"><span data-stu-id="ca45c-160">This scheme is shown in Figure 2.</span></span>

![Immagine3](./media/machine-learning-execute-python-scripts/map-of-python-script-inputs-outputs.png)

<span data-ttu-id="ca45c-162">Figura 2.</span><span class="sxs-lookup"><span data-stu-id="ca45c-162">Figure 2.</span></span> <span data-ttu-id="ca45c-163">Mapping di porte di input ai parametri e valore restituito alla porta di output.</span><span class="sxs-lookup"><span data-stu-id="ca45c-163">Mapping of input ports to parameters and return value to output port.</span></span>

<span data-ttu-id="ca45c-164">Una semantica più dettagliata della modalità di mapping delle porte di input ai parametri della funzione `azureml_main` è descritta nella tabella 1:</span><span class="sxs-lookup"><span data-stu-id="ca45c-164">More detailed semantics of how the input ports get mapped to parameters of the `azureml_main` function are shown in Table 1:</span></span>

![Immagine1T](./media/machine-learning-execute-python-scripts/python-script-inputs-mapped-to-parameters.png)

<span data-ttu-id="ca45c-166">Tabella 1.</span><span class="sxs-lookup"><span data-stu-id="ca45c-166">Table 1.</span></span> <span data-ttu-id="ca45c-167">Mapping delle porte di input ai parametri della funzione.</span><span class="sxs-lookup"><span data-stu-id="ca45c-167">Mapping of input ports to function parameters.</span></span>

<span data-ttu-id="ca45c-168">Il mapping delle porte di input ai parametri della funzione è di tipo posizionale:</span><span class="sxs-lookup"><span data-stu-id="ca45c-168">The mapping between input ports and function parameters is positional:</span></span>

- <span data-ttu-id="ca45c-169">La prima porta di input connessa è mappata al primo parametro della funzione.</span><span class="sxs-lookup"><span data-stu-id="ca45c-169">The first connected input port is mapped to the first parameter of the function.</span></span> 
- <span data-ttu-id="ca45c-170">Il secondo input, se connesso, è mappato al secondo parametro della funzione.</span><span class="sxs-lookup"><span data-stu-id="ca45c-170">The second input (if connected) is mapped to the second parameter of the function.</span></span>

<span data-ttu-id="ca45c-171">Per altre informazioni su Python Pandas e su come è possibile usarlo per modificare i dati in modo efficace ed efficiente, vedere *Python for Data Analysis* (Python per l'analisi dei dati - O'Reilly, 2012) di W. McKinney.</span><span class="sxs-lookup"><span data-stu-id="ca45c-171">See *Python for Data Analysis* (O'Reilly, 2012) by W. McKinney for more information on Python Pandas and on how it can be used to manipulate data effectively and efficiently.</span></span> 


## <a name="translation-of-input-and-output-types"></a><span data-ttu-id="ca45c-172">Conversione dei tipi di input e di output</span><span class="sxs-lookup"><span data-stu-id="ca45c-172">Translation of input and output types</span></span> 
<span data-ttu-id="ca45c-173">I set di dati di input in Azure Machine Learning vengono convertiti in frame di dati in Pandas.</span><span class="sxs-lookup"><span data-stu-id="ca45c-173">Input datasets in Azure ML are converted to data frames in Pandas.</span></span> <span data-ttu-id="ca45c-174">I frame di dati di output vengono riconvertiti in set di dati di Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-174">Output data frames are converted back to Azure ML datasets.</span></span> <span data-ttu-id="ca45c-175">Vengono eseguite le conversioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="ca45c-175">The following conversions are performed:</span></span>

1. <span data-ttu-id="ca45c-176">Le colonne stringa e numeriche vengono convertite come sono e i valori mancanti in un set di dati vengono convertiti in valori "ND" in Pandas.</span><span class="sxs-lookup"><span data-stu-id="ca45c-176">String and numeric columns are converted as-is and missing values in a dataset are converted to ‘NA’ values in Pandas.</span></span> <span data-ttu-id="ca45c-177">La stessa conversione viene eseguita in senso inverso, ovvero i valori ND in Pandas vengono convertiti in valori mancanti in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-177">The same conversion happens on the way back (NA values in Pandas are converted to missing values in Azure ML).</span></span>
2. <span data-ttu-id="ca45c-178">I vettori indice di Pandas non sono supportati in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-178">Index vectors in Pandas are not supported in Azure ML.</span></span> <span data-ttu-id="ca45c-179">Tutti i frame di dati di input della funzione Python hanno sempre un indice numerico a 64 bit compreso tra 0 e il numero di righe meno 1.</span><span class="sxs-lookup"><span data-stu-id="ca45c-179">All input data frames in the Python function always have a 64-bit numerical index from 0 to the number of rows minus 1.</span></span> 
3. <span data-ttu-id="ca45c-180">I set di dati di Azure Machine Learning non possono avere nomi di colonna duplicati e diversi da stringhe.</span><span class="sxs-lookup"><span data-stu-id="ca45c-180">Azure ML datasets cannot have duplicate column names and column names that are not strings.</span></span> <span data-ttu-id="ca45c-181">Se un frame di dati di output contiene colonne non numeriche, il framework chiama `str` sui nomi di colonna.</span><span class="sxs-lookup"><span data-stu-id="ca45c-181">If an output data frame contains non-numeric columns, the framework calls `str` on the column names.</span></span> <span data-ttu-id="ca45c-182">In modo analogo, tutti i nomi di colonna duplicati vengono modificati automaticamente per assicurare che siano univoci.</span><span class="sxs-lookup"><span data-stu-id="ca45c-182">Likewise, any duplicate column names are automatically mangled to insure the names are unique.</span></span> <span data-ttu-id="ca45c-183">Al primo duplicato viene aggiunto il suffisso (2), al secondo duplicato il suffisso (3) e così via.</span><span class="sxs-lookup"><span data-stu-id="ca45c-183">The suffix (2) is added to the first duplicate, (3) to the second duplicate, and so on.</span></span>


## <a name="operationalizing-python-scripts"></a><span data-ttu-id="ca45c-184">Rendere operativi gli script Python</span><span class="sxs-lookup"><span data-stu-id="ca45c-184">Operationalizing Python scripts</span></span>

<span data-ttu-id="ca45c-185">Tutti i moduli [Execute Python Script][execute-python-script] (Esegui script Python) usati in un esperimento di assegnazione dei punteggi vengono chiamati al momento della pubblicazione come servizio Web.</span><span class="sxs-lookup"><span data-stu-id="ca45c-185">Any [Execute Python Script][execute-python-script] modules used in a scoring experiment are called when published as a web service.</span></span> <span data-ttu-id="ca45c-186">Ad esempio, la figura 3 mostra un esperimento di assegnazione dei punteggi contenente il codice per valutare una singola espressione Python.</span><span class="sxs-lookup"><span data-stu-id="ca45c-186">For example, Figure 3 shows a scoring experiment that contains the code to evaluate a single Python expression.</span></span> 

![Immagine4](./media/machine-learning-execute-python-scripts/figure3a.png)

![Immagine5](./media/machine-learning-execute-python-scripts/python-script-with-python-pandas.png)

<span data-ttu-id="ca45c-189">Figura 3.</span><span class="sxs-lookup"><span data-stu-id="ca45c-189">Figure 3.</span></span> <span data-ttu-id="ca45c-190">Servizio Web per la valutazione di un'espressione Python.</span><span class="sxs-lookup"><span data-stu-id="ca45c-190">Web service for evaluating a Python expression.</span></span>

<span data-ttu-id="ca45c-191">Un servizio Web creato da questo esperimento:</span><span class="sxs-lookup"><span data-stu-id="ca45c-191">A web service created from this experiment:</span></span>

- <span data-ttu-id="ca45c-192">Accetta come input un'espressione Python, come stringa.</span><span class="sxs-lookup"><span data-stu-id="ca45c-192">takes as input a Python expression (as a string)</span></span>
- <span data-ttu-id="ca45c-193">La invia all'interprete Python.</span><span class="sxs-lookup"><span data-stu-id="ca45c-193">sends it to the Python interpreter</span></span> 
- <span data-ttu-id="ca45c-194">Restituisce una tabella contenente l'espressione e il risultato valutato.</span><span class="sxs-lookup"><span data-stu-id="ca45c-194">returns a table containing both the expression and the evaluated result.</span></span>


## <a name="importing-existing-python-script-modules"></a><span data-ttu-id="ca45c-195">Importazione di moduli di script Python esistenti</span><span class="sxs-lookup"><span data-stu-id="ca45c-195">Importing existing Python script modules</span></span>

<span data-ttu-id="ca45c-196">Un caso di utilizzo comune per molti data scientist consiste nell'incorporare gli script Python esistenti negli esperimenti di Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-196">A common use-case for many data scientists is to incorporate existing Python scripts into Azure ML experiments.</span></span> <span data-ttu-id="ca45c-197">Invece di richiedere che tutto il codice sia concatenato e incollato in una singola casella di script, il modulo [Execute Python Script][execute-python-script] (Esegui script Python) accetta un file ZIP che include moduli Python in corrispondenza della terza porta di input.</span><span class="sxs-lookup"><span data-stu-id="ca45c-197">Instead of requiring that all code be concatenated and pasted into a single script box, the [Execute Python Script][execute-python-script] module accepts a zip file that contains Python modules at the third input port.</span></span> <span data-ttu-id="ca45c-198">Il file viene decompresso in fase di esecuzione dal framework di esecuzione e il contenuto viene aggiunto al percorso della libreria dell'interprete Python.</span><span class="sxs-lookup"><span data-stu-id="ca45c-198">The file is unzipped by the execution framework at runtime and the contents are added to the library path of the Python interpreter.</span></span> <span data-ttu-id="ca45c-199">La funzione del punto di ingresso `azureml_main` può quindi importare questi moduli direttamente.</span><span class="sxs-lookup"><span data-stu-id="ca45c-199">The `azureml_main` entry point function can then import these modules directly.</span></span>

<span data-ttu-id="ca45c-200">Considerare, ad esempio, il file Hello.py che contiene una semplice funzione "Hello, World".</span><span class="sxs-lookup"><span data-stu-id="ca45c-200">As an example, consider the file Hello.py containing a simple “Hello, World” function.</span></span>

![Immagine6](./media/machine-learning-execute-python-scripts/figure4.png)

<span data-ttu-id="ca45c-202">Figura 4.</span><span class="sxs-lookup"><span data-stu-id="ca45c-202">Figure 4.</span></span> <span data-ttu-id="ca45c-203">Funzione definita dall'utente nel file Hello.py.</span><span class="sxs-lookup"><span data-stu-id="ca45c-203">User-defined function in Hello.py file.</span></span>

<span data-ttu-id="ca45c-204">Viene quindi creato un file Hello.zip contenente Hello.py:</span><span class="sxs-lookup"><span data-stu-id="ca45c-204">Next, we create a file Hello.zip that contains Hello.py:</span></span>

![Immagine7](./media/machine-learning-execute-python-scripts/figure5.png)

<span data-ttu-id="ca45c-206">Figura 5.</span><span class="sxs-lookup"><span data-stu-id="ca45c-206">Figure 5.</span></span> <span data-ttu-id="ca45c-207">File ZIP contenente codice Python definito dall'utente.</span><span class="sxs-lookup"><span data-stu-id="ca45c-207">Zip file containing user-defined Python code.</span></span>

<span data-ttu-id="ca45c-208">Caricare il file ZIP come set di dati in Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="ca45c-208">Upload the zip file as a dataset into Azure Machine Learning Studio.</span></span> <span data-ttu-id="ca45c-209">Creare quindi ed eseguire un esperimento che usa il codice Python nel file Hello.zip associandolo alla terza porta di input del modulo **Execute Python Script** (Esegui script Python), come mostrato in questa figura.</span><span class="sxs-lookup"><span data-stu-id="ca45c-209">Then create and run an experiment that uses the Python code in the Hello.zip file by attaching it to the third input port of the **Execute Python Script** module, as shown in this figure.</span></span>

![Immagine8](./media/machine-learning-execute-python-scripts/figure6a.png)

![Immagine9](./media/machine-learning-execute-python-scripts/figure6b.png)

<span data-ttu-id="ca45c-212">Figura 6.</span><span class="sxs-lookup"><span data-stu-id="ca45c-212">Figure 6.</span></span> <span data-ttu-id="ca45c-213">Esperimento di esempio con codice Python definito dall'utente caricato come file ZIP.</span><span class="sxs-lookup"><span data-stu-id="ca45c-213">Sample experiment with user-defined Python code uploaded as a zip file.</span></span>

<span data-ttu-id="ca45c-214">L'output del modulo indica che il file ZIP è stato estratto dal pacchetto e che la funzione `print_hello` è stata eseguita.</span><span class="sxs-lookup"><span data-stu-id="ca45c-214">The module output shows that the zip file has been unpackaged and that the function `print_hello` has been run.</span></span>
<span data-ttu-id="ca45c-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span><span class="sxs-lookup"><span data-stu-id="ca45c-215"> 
![image10](./media/machine-learning-execute-python-scripts/figure7.png)</span></span>

<span data-ttu-id="ca45c-216">Figura 7.</span><span class="sxs-lookup"><span data-stu-id="ca45c-216">Figure 7.</span></span> <span data-ttu-id="ca45c-217">Funzione definita dall'utente in uso all'interno del modulo [Execute Python Script][execute-python-script] (Esegui script Python).</span><span class="sxs-lookup"><span data-stu-id="ca45c-217">User-defined function in use inside the [Execute Python Script][execute-python-script] module.</span></span>


## <a name="working-with-visualizations"></a><span data-ttu-id="ca45c-218">Utilizzo di visualizzazioni</span><span class="sxs-lookup"><span data-stu-id="ca45c-218">Working with visualizations</span></span>

<span data-ttu-id="ca45c-219">I tracciati creati con MatplotLib che possono essere visualizzati nel browser possono essere restituiti da [Execute Python Script][execute-python-script] (Esegui script Python).</span><span class="sxs-lookup"><span data-stu-id="ca45c-219">Plots created using MatplotLib that can be visualized on the browser can be returned by the [Execute Python Script][execute-python-script].</span></span> <span data-ttu-id="ca45c-220">I tracciati non vengono tuttavia reindirizzati automaticamente in immagini così come sono quando si usa R. Di conseguenza, se devono essere restituiti ad Azure Machine Learning, l'utente dovrà salvare espressamente i tracciati in file PNG.</span><span class="sxs-lookup"><span data-stu-id="ca45c-220">But the plots are not automatically redirected to images as they are when using R. So the user must explicitly save any plots to PNG files if they are to be returned back to Azure Machine Learning.</span></span> 

<span data-ttu-id="ca45c-221">Per generare immagini da MatplotLib, è necessario completare la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="ca45c-221">To generate images from MatplotLib, you must complete the following procedure:</span></span>

* <span data-ttu-id="ca45c-222">Cambiare il back-end impostandolo su "AGG" dal renderer predefinito basato su Qt.</span><span class="sxs-lookup"><span data-stu-id="ca45c-222">switch the backend to “AGG” from the default Qt-based renderer</span></span> 
* <span data-ttu-id="ca45c-223">Creare un nuovo oggetto figura.</span><span class="sxs-lookup"><span data-stu-id="ca45c-223">create a new figure object</span></span> 
* <span data-ttu-id="ca45c-224">Ottenere l'asse e generare tutti i tracciati al suo interno.</span><span class="sxs-lookup"><span data-stu-id="ca45c-224">get the axis and generate all plots into it</span></span> 
* <span data-ttu-id="ca45c-225">Salvare la figura in un file PNG.</span><span class="sxs-lookup"><span data-stu-id="ca45c-225">save the figure to a PNG file</span></span> 

<span data-ttu-id="ca45c-226">Questo processo, illustrato nella Figura 8 seguente, crea una matrice di grafici a dispersione tramite la funzione scatter_matrix in Pandas.</span><span class="sxs-lookup"><span data-stu-id="ca45c-226">This process is illustrated in the following Figure 8 that creates a scatter plot matrix using the scatter_matrix function in Pandas.</span></span>

![Immagine1v](./media/machine-learning-execute-python-scripts/figure-v1-8.png)

<span data-ttu-id="ca45c-228">Figura 8.</span><span class="sxs-lookup"><span data-stu-id="ca45c-228">Figure 8.</span></span> <span data-ttu-id="ca45c-229">Codice per il salvataggio di figure di MatplotLib in immagini.</span><span class="sxs-lookup"><span data-stu-id="ca45c-229">Code to save MatplotLib figures to images.</span></span>

<span data-ttu-id="ca45c-230">La figura 9 mostra un esperimento che usa lo script precedentemente illustrato per restituire tracciati tramite una seconda porta di output.</span><span class="sxs-lookup"><span data-stu-id="ca45c-230">Figure 9 shows an experiment that uses the script shown previously to return plots via the second output port.</span></span>

![Immagine2v](./media/machine-learning-execute-python-scripts/figure-v2-9a.png) 

![Immagine2v](./media/machine-learning-execute-python-scripts/figure-v2-9b.png) 

<span data-ttu-id="ca45c-233">Figura 9.</span><span class="sxs-lookup"><span data-stu-id="ca45c-233">Figure 9.</span></span> <span data-ttu-id="ca45c-234">Visualizzazione di tracciati generati da codice Python.</span><span class="sxs-lookup"><span data-stu-id="ca45c-234">Visualizing plots generated from Python code.</span></span>

<span data-ttu-id="ca45c-235">È possibile restituire più figure salvandole in immagini diverse. Il runtime di Azure Machine Learning recupera tutte le immagini e le concatena per la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="ca45c-235">It is possible to return multiple figures by saving them into different images, the Azure Machine Learning runtime picks up all images and concatenates them for visualization.</span></span>


## <a name="advanced-examples"></a><span data-ttu-id="ca45c-236">Esempi avanzati</span><span class="sxs-lookup"><span data-stu-id="ca45c-236">Advanced examples</span></span>

<span data-ttu-id="ca45c-237">L'ambiente Anaconda installato in Azure Machine Learning contiene pacchetti comuni come NumPy, SciPy e Scikits-Learn.</span><span class="sxs-lookup"><span data-stu-id="ca45c-237">The Anaconda environment installed in Azure Machine Learning contains common packages such as NumPy, SciPy, and Scikits-Learn.</span></span> <span data-ttu-id="ca45c-238">Questi pacchetti possono essere usati in modo efficace per diverse attività di elaborazione dei dati in una pipeline di Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-238">These packages can be effectively used for various data processing tasks in a machine learning pipeline.</span></span> <span data-ttu-id="ca45c-239">L'esperimento e lo script seguenti illustrano, ad esempio, come usare gli strumenti di apprendimento d'insieme di Scikits-Learn per calcolare i punteggi di rilevanza della funzione per un set di dati.</span><span class="sxs-lookup"><span data-stu-id="ca45c-239">As an example, the following experiment and script illustrate the use of ensemble learners in Scikits-Learn to compute feature importance scores for a dataset.</span></span> <span data-ttu-id="ca45c-240">I punteggi possono essere usati per eseguire una selezione della funzione supervisionata prima di inserirla in un altro modello di Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-240">The scores can be used to perform supervised feature selection before being fed into another ML model.</span></span>

<span data-ttu-id="ca45c-241">Di seguito è illustrata la funzione Python usata per calcolare i punteggi di rilevanza e ordinare le funzioni in base ai punteggi:</span><span class="sxs-lookup"><span data-stu-id="ca45c-241">Here is the Python function used to compute the importance scores and order the features based on the scores:</span></span>

![Immagine11](./media/machine-learning-execute-python-scripts/figure8.png)

<span data-ttu-id="ca45c-243">Figura 10.</span><span class="sxs-lookup"><span data-stu-id="ca45c-243">Figure 10.</span></span> <span data-ttu-id="ca45c-244">Funzione per classificare le funzioni in base ai punteggi.</span><span class="sxs-lookup"><span data-stu-id="ca45c-244">Function to rank features by scores.</span></span>
<span data-ttu-id="ca45c-245">  L'esperimento seguente calcola quindi e restituisce i punteggi di rilevanza delle funzioni nel set di dati "Pima Indian Diabetes" in Azure Machine Learning:</span><span class="sxs-lookup"><span data-stu-id="ca45c-245">  The following experiment then computes and returns the importance scores of features in the “Pima Indian Diabetes” dataset in Azure Machine Learning:</span></span>

<span data-ttu-id="ca45c-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span><span class="sxs-lookup"><span data-stu-id="ca45c-246">![image12](./media/machine-learning-execute-python-scripts/figure9a.png)
![image13](./media/machine-learning-execute-python-scripts/figure9b.png)</span></span>    

<span data-ttu-id="ca45c-247">Figura 11.</span><span class="sxs-lookup"><span data-stu-id="ca45c-247">Figure 11.</span></span> <span data-ttu-id="ca45c-248">Esperimento per classificare le funzioni nel set di dati Pima Indian Diabetes.</span><span class="sxs-lookup"><span data-stu-id="ca45c-248">Experiment to rank features in the Pima Indian Diabetes dataset.</span></span>

## <a name="limitations"></a><span data-ttu-id="ca45c-249">Limitazioni</span><span class="sxs-lookup"><span data-stu-id="ca45c-249">Limitations</span></span>
<span data-ttu-id="ca45c-250">Attualmente [Execute Python Script][execute-python-script] (Esegui script Python) presenta le limitazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="ca45c-250">The [Execute Python Script][execute-python-script] currently has the following limitations:</span></span>

1. <span data-ttu-id="ca45c-251">*Esecuzione in modalità sandbox.*</span><span class="sxs-lookup"><span data-stu-id="ca45c-251">*Sandboxed execution.*</span></span> <span data-ttu-id="ca45c-252">Il runtime Python è attualmente in modalità sandbox e di conseguenza non consente l'accesso alla rete o al file system locale in modo permanente.</span><span class="sxs-lookup"><span data-stu-id="ca45c-252">The Python runtime is currently sandboxed and, as a result, does not allow access to the network or to the local file system in a persistent manner.</span></span> <span data-ttu-id="ca45c-253">Tutti i file salvati localmente sono isolati ed eliminati al termine del modulo.</span><span class="sxs-lookup"><span data-stu-id="ca45c-253">All files saved locally are isolated and deleted once the module finishes.</span></span> <span data-ttu-id="ca45c-254">Il codice Python non è in grado di accedere alla maggior parte delle directory nel computer in cui è in esecuzione, ad eccezione della directory corrente e delle relative sottodirectory.</span><span class="sxs-lookup"><span data-stu-id="ca45c-254">The Python code cannot access most directories on the machine it runs on, the exception being the current directory and its subdirectories.</span></span>
2. <span data-ttu-id="ca45c-255">*Mancanza di supporto avanzato per sviluppo e debug.*</span><span class="sxs-lookup"><span data-stu-id="ca45c-255">*Lack of sophisticated development and debugging support.*</span></span> <span data-ttu-id="ca45c-256">Il modulo Python non supporta attualmente le funzionalità dell'IDE, ad esempio IntelliSense e debug.</span><span class="sxs-lookup"><span data-stu-id="ca45c-256">The Python module currently does not support IDE features such as intellisense and debugging.</span></span> <span data-ttu-id="ca45c-257">In caso di errore del modulo durante il runtime, è disponibile l'analisi completa dello stack Python.</span><span class="sxs-lookup"><span data-stu-id="ca45c-257">Also, if the module fails at runtime, the full Python stack trace is available.</span></span> <span data-ttu-id="ca45c-258">È tuttavia necessario visualizzarla nel log di output per il modulo.</span><span class="sxs-lookup"><span data-stu-id="ca45c-258">But it must be viewed in the output log for the module.</span></span> <span data-ttu-id="ca45c-259">Al momento si consiglia di sviluppare ed eseguire il debug degli script Python in un ambiente come IPython e quindi importare il codice nel modulo.</span><span class="sxs-lookup"><span data-stu-id="ca45c-259">We currently recommend that you develop and debug Python scripts in an environment such as IPython and then import the code into the module.</span></span>
3. <span data-ttu-id="ca45c-260">*Output di un singolo frame di dati.*</span><span class="sxs-lookup"><span data-stu-id="ca45c-260">*Single data frame output.*</span></span> <span data-ttu-id="ca45c-261">Al punto di ingresso Python è consentito restituire un singolo frame di dati come output.</span><span class="sxs-lookup"><span data-stu-id="ca45c-261">The Python entry point is only permitted to return a single data frame as output.</span></span> <span data-ttu-id="ca45c-262">Non è attualmente possibile restituire oggetti Python arbitrari, ad esempio modelli con training, direttamente al runtime di Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-262">It is not currently possible to return arbitrary Python objects such as trained models directly back to the Azure Machine Learning runtime.</span></span> <span data-ttu-id="ca45c-263">Come per [Execute R Script][execute-r-script] (Esegui script R), che presenta le stesse limitazioni, in molti casi è possibile inserire oggetti in una matrice di byte e quindi restituirla all'interno di un frame di dati.</span><span class="sxs-lookup"><span data-stu-id="ca45c-263">Like [Execute R Script][execute-r-script], which has the same limitation, it is possible in many cases to pickle objects into a byte array and then return that inside of a data frame.</span></span>
4. <span data-ttu-id="ca45c-264">*Impossibilità di personalizzare un'installazione di Python*.</span><span class="sxs-lookup"><span data-stu-id="ca45c-264">*Inability to customize Python installation*.</span></span> <span data-ttu-id="ca45c-265">Attualmente, è possibile aggiungere moduli Python personalizzati solo tramite il meccanismo con file ZIP descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="ca45c-265">Currently, the only way to add custom Python modules is via the zip file mechanism described earlier.</span></span> <span data-ttu-id="ca45c-266">Anche se ciò è fattibile per i moduli piccoli, risulta complesso per quelli grandi, specialmente quelli con DLL native o un numero elevato di moduli.</span><span class="sxs-lookup"><span data-stu-id="ca45c-266">While this is feasible for small modules, it is cumbersome for large modules (especially those with native DLLs) or a large number of modules.</span></span> 

## <a name="conclusions"></a><span data-ttu-id="ca45c-267">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="ca45c-267">Conclusions</span></span>
<span data-ttu-id="ca45c-268">Il modulo [Execute Python Script][execute-python-script] (Esegui script Python) consente ai data scientist di incorporare codice Python esistente nei flussi di lavoro di apprendimento automatico ospitati nel cloud in Azure Machine Learning e di renderli facilmente operativi come parte di un servizio Web.</span><span class="sxs-lookup"><span data-stu-id="ca45c-268">The [Execute Python Script][execute-python-script] module allows a data scientist to incorporate existing Python code into cloud-hosted machine learning workflows in Azure Machine Learning and to seamlessly operationalize them as part of a web service.</span></span> <span data-ttu-id="ca45c-269">Il modulo di script Python interagisce naturalmente con altri moduli in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ca45c-269">The Python script module interoperates naturally with other modules in Azure Machine Learning.</span></span> <span data-ttu-id="ca45c-270">Il modulo può essere usato per diverse attività, dall'esplorazione dei dati alla pre-elaborazione e all'estrazione delle funzionalità, fino alla valutazione e alla post-elaborazione dei risultati.</span><span class="sxs-lookup"><span data-stu-id="ca45c-270">The module can be used for a range of tasks from data exploration to pre-processing and feature extraction, and then to evaluation and post-processing of the results.</span></span> <span data-ttu-id="ca45c-271">Il runtime di back-end usato per l'esecuzione è basato su Anaconda, una distribuzione di Python testata e ampiamente usata.</span><span class="sxs-lookup"><span data-stu-id="ca45c-271">The backend runtime used for execution is based on Anaconda, a well-tested and widely used Python distribution.</span></span> <span data-ttu-id="ca45c-272">Questo back-end semplifica l'onboarding degli asset di codice esistenti sul cloud.</span><span class="sxs-lookup"><span data-stu-id="ca45c-272">This backend makes it simple for you to on-board existing code assets into the cloud.</span></span>

<span data-ttu-id="ca45c-273">È prevista l'introduzione di altre funzionalità nel modulo [Execute Python Script][execute-python-script] (Esegui script Python), ad esempio la possibilità di eseguire il training di modelli e renderli operativi in Python, e il miglioramento del supporto per lo sviluppo e il debug del codice in Azure Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="ca45c-273">We expect to provide additional functionality to the [Execute Python Script][execute-python-script] module such as the ability to train and operationalize models in Python and to add better support for the development and debugging code in Azure Machine Learning Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ca45c-274">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ca45c-274">Next steps</span></span>
<span data-ttu-id="ca45c-275">Per ulteriori informazioni, vedere il [Centro per sviluppatori di Python](https://azure.microsoft.com/develop/python/).</span><span class="sxs-lookup"><span data-stu-id="ca45c-275">For more information, see the [Python Developer Center](https://azure.microsoft.com/develop/python/).</span></span>

<!-- Module References -->
[execute-python-script]: https://msdn.microsoft.com/library/azure/cdb56f95-7f4c-404d-bde7-5bb972e6f232/
[execute-r-script]: https://msdn.microsoft.com/library/azure/30806023-392b-42e0-94d6-6b775a6e0fd5/
