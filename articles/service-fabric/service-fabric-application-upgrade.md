---
title: aggiornamento dell'applicazione Fabric aaaService | Documenti Microsoft
description: "Questo articolo fornisce un'introduzione tooupgrading un'applicazione di Service Fabric, tra cui scegliere le modalità di aggiornamento e di eseguire controlli di integrità."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 803c9c63-373a-4d6a-8ef2-ea97e16e88dd
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 6f649ef4a5c0afab682522bcba7d2d66a4268ead
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade"></a><span data-ttu-id="047d5-103">Aggiornamento di un'applicazione di infrastruttura di servizi</span><span class="sxs-lookup"><span data-stu-id="047d5-103">Service Fabric application upgrade</span></span>
<span data-ttu-id="047d5-104">Un'applicazione di Azure Service Fabric è una raccolta di servizi.</span><span class="sxs-lookup"><span data-stu-id="047d5-104">An Azure Service Fabric application is a collection of services.</span></span> <span data-ttu-id="047d5-105">Durante un aggiornamento, Service Fabric Confronta hello nuovo [manifesto dell'applicazione](service-fabric-application-model.md#describe-an-application) con la versione precedente di hello e determina quali servizi in un'applicazione hello richiedono gli aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="047d5-105">During an upgrade, Service Fabric compares hello new [application manifest](service-fabric-application-model.md#describe-an-application) with hello previous version and determines which services in hello application require updates.</span></span> <span data-ttu-id="047d5-106">Versione di hello numeri nel servizio hello manifesti con numeri di versione di hello nella versione precedente di hello viene confrontata Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="047d5-106">Service Fabric compares hello version numbers in hello service manifests with hello version numbers in hello previous version.</span></span> <span data-ttu-id="047d5-107">Se un servizio non è cambiato, non viene aggiornato.</span><span class="sxs-lookup"><span data-stu-id="047d5-107">If a service has not changed, that service is not upgraded.</span></span>

## <a name="rolling-upgrades-overview"></a><span data-ttu-id="047d5-108">Panoramica degli aggiornamenti in sequenza</span><span class="sxs-lookup"><span data-stu-id="047d5-108">Rolling upgrades overview</span></span>
<span data-ttu-id="047d5-109">In un aggiornamento dell'applicazione in sequenza, l'aggiornamento di hello viene eseguita in fasi.</span><span class="sxs-lookup"><span data-stu-id="047d5-109">In a rolling application upgrade, hello upgrade is performed in stages.</span></span> <span data-ttu-id="047d5-110">In ogni fase, l'aggiornamento di hello è applicato tooa subset di nodi nel cluster di hello, denominato di un dominio di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="047d5-110">At each stage, hello upgrade is applied tooa subset of nodes in hello cluster, called an update domain.</span></span> <span data-ttu-id="047d5-111">Di conseguenza, un'applicazione hello rimane disponibile per tutta l'aggiornamento di hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-111">As a result, hello application remains available throughout hello upgrade.</span></span> <span data-ttu-id="047d5-112">Durante l'aggiornamento di hello, cluster hello può contenere una combinazione di versioni nuove e precedenti hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-112">During hello upgrade, hello cluster may contain a mix of hello old and new versions.</span></span>

<span data-ttu-id="047d5-113">Per questo motivo, le versioni di hello due devono essere avanti e indietro compatibile.</span><span class="sxs-lookup"><span data-stu-id="047d5-113">For that reason, hello two versions must be forward and backward compatible.</span></span> <span data-ttu-id="047d5-114">Se non sono compatibili, l'amministratore dell'applicazione hello è responsabile della gestione temporanea di una disponibilità toomaintain aggiornamento multifase.</span><span class="sxs-lookup"><span data-stu-id="047d5-114">If they are not compatible, hello application administrator is responsible for staging a multiple-phase upgrade toomaintain availability.</span></span> <span data-ttu-id="047d5-115">In un aggiornamento di più fasi, innanzitutto hello aggiornamento tooan versione intermedia dell'applicazione hello compatibile con la versione precedente di hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-115">In a multiple-phase upgrade, hello first step is upgrading tooan intermediate version of hello application that is compatible with hello previous version.</span></span> <span data-ttu-id="047d5-116">secondo passaggio Hello è tooupgrade hello versione finale che interrompe la compatibilità con la versione di hello pre-aggiornamento, ma è compatibile con la versione intermedia hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-116">hello second step is tooupgrade hello final version that breaks compatibility with hello pre-update version, but is compatible with hello intermediate version.</span></span>

<span data-ttu-id="047d5-117">Domini di aggiornamento vengono specificati nel manifesto del cluster hello quando si configura il cluster hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-117">Update domains are specified in hello cluster manifest when you configure hello cluster.</span></span> <span data-ttu-id="047d5-118">I domini di aggiornamento non ricevono gli aggiornamenti in un ordine particolare.</span><span class="sxs-lookup"><span data-stu-id="047d5-118">Update domains do not receive updates in a particular order.</span></span> <span data-ttu-id="047d5-119">Un dominio di aggiornamento è un'unità logica di distribuzione per un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="047d5-119">An update domain is a logical unit of deployment for an application.</span></span> <span data-ttu-id="047d5-120">Domini di aggiornamento consentono hello servizi tooremain la disponibilità elevata durante un aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="047d5-120">Update domains allow hello services tooremain at high availability during an upgrade.</span></span>

<span data-ttu-id="047d5-121">Gli aggiornamenti in sequenza non sono possibili se l'aggiornamento di hello è applicato tooall i nodi cluster hello, che è il caso di hello quando un'applicazione hello ha solo un dominio di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="047d5-121">Non-rolling upgrades are possible if hello upgrade is applied tooall nodes in hello cluster, which is hello case when hello application has only one update domain.</span></span> <span data-ttu-id="047d5-122">Questo approccio è sconsigliato, perché il servizio hello diventa inattiva e non è disponibile al momento di hello dell'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="047d5-122">This approach is not recommended, since hello service goes down and isn't available at hello time of upgrade.</span></span> <span data-ttu-id="047d5-123">Azure, inoltre, non offre alcuna garanzia per i casi in cui un cluster è configurato con un solo dominio di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="047d5-123">Additionally, Azure doesn't provide any guarantees when a cluster is set up with only one update domain.</span></span>

## <a name="health-checks-during-upgrades"></a><span data-ttu-id="047d5-124">Controlli di integrità durante gli aggiornamenti</span><span class="sxs-lookup"><span data-stu-id="047d5-124">Health checks during upgrades</span></span>
<span data-ttu-id="047d5-125">Per un aggiornamento, criteri di integrità impostare toobe oppure possono essere utilizzati i valori predefiniti.</span><span class="sxs-lookup"><span data-stu-id="047d5-125">For an upgrade, health policies have toobe set (or default values may be used).</span></span> <span data-ttu-id="047d5-126">Un aggiornamento è denominato esito positivo quando tutti i domini di aggiornamento vengono aggiornati all'interno di hello di timeout specificato, e quando aggiornare tutti i domini sono considerati integro.</span><span class="sxs-lookup"><span data-stu-id="047d5-126">An upgrade is termed successful when all update domains are upgraded within hello specified time-outs, and when all update domains are deemed healthy.</span></span>  <span data-ttu-id="047d5-127">Un dominio di aggiornamento integro, significa che tale dominio di aggiornamento hello superato tutti i controlli di integrità di hello specificati nei criteri di integrità hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-127">A healthy update domain means that hello update domain passed all hello health checks specified in hello health policy.</span></span> <span data-ttu-id="047d5-128">Un criterio di integrità, ad esempio, può richiedere che tutti i servizi all'interno di un'istanza dell'applicazione siano *integri*, secondo quanto definito per l'integrità da Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="047d5-128">For example, a health policy may mandate that all services within an application instance must be *healthy*, as health is defined by Service Fabric.</span></span>

<span data-ttu-id="047d5-129">I criteri e i controlli di integrità durante l'aggiornamento da parte dell’infrastruttura di servizi sono indipendenti dai servizi e dalle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="047d5-129">Health policies and checks during upgrade by Service Fabric are service and application agnostic.</span></span> <span data-ttu-id="047d5-130">In altre parole, non vengono eseguiti test specifici per i servizi.</span><span class="sxs-lookup"><span data-stu-id="047d5-130">That is, no service-specific tests are done.</span></span>  <span data-ttu-id="047d5-131">Ad esempio, il servizio potrebbe essere un requisito della velocità effettiva, ma non dispone della velocità effettiva di hello informazioni toocheck Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="047d5-131">For example, your service might have a throughput requirement, but Service Fabric does not have hello information toocheck throughput.</span></span> <span data-ttu-id="047d5-132">Fare riferimento toohello [articoli integrità](service-fabric-health-introduction.md) per i controlli di hello che vengono eseguiti.</span><span class="sxs-lookup"><span data-stu-id="047d5-132">Refer toohello [health articles](service-fabric-health-introduction.md) for hello checks that are performed.</span></span> <span data-ttu-id="047d5-133">controlli di Hello che si verificano durante un test di aggiornamento sono per se il pacchetto di applicazione hello è stato copiato correttamente, se l'istanza di hello è stata avviata e così via.</span><span class="sxs-lookup"><span data-stu-id="047d5-133">hello checks that happen during an upgrade include tests for whether hello application package was copied correctly, whether hello instance was started, and so on.</span></span>

<span data-ttu-id="047d5-134">integrità applicazione Hello è un'aggregazione di entità figlio hello di un'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-134">hello application health is an aggregation of hello child entities of hello application.</span></span> <span data-ttu-id="047d5-135">In breve, Service Fabric valuta l'integrità di hello applicazione hello tramite integrità hello segnalato a un'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-135">In short, Service Fabric evaluates hello health of hello application through hello health that is reported on hello application.</span></span> <span data-ttu-id="047d5-136">Valuta inoltre integrità hello di tutti i servizi di hello per un'applicazione hello in questo modo.</span><span class="sxs-lookup"><span data-stu-id="047d5-136">It also evaluates hello health of all hello services for hello application this way.</span></span> <span data-ttu-id="047d5-137">Service Fabric ulteriormente valuta l'integrità di hello di servizi dell'applicazione hello aggregando integrità hello dei relativi elementi figlio, ad esempio di replica del servizio hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-137">Service Fabric further evaluates hello health of hello application services by aggregating hello health of their children, such as hello service replica.</span></span> <span data-ttu-id="047d5-138">Una volta che i criteri di integrità dell'applicazione hello viene soddisfatto, l'aggiornamento di hello può continuare.</span><span class="sxs-lookup"><span data-stu-id="047d5-138">Once hello application health policy is satisfied, hello upgrade can proceed.</span></span> <span data-ttu-id="047d5-139">Se i criteri di integrità hello viene violato, l'aggiornamento dell'applicazione hello ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="047d5-139">If hello health policy is violated, hello application upgrade fails.</span></span>

## <a name="upgrade-modes"></a><span data-ttu-id="047d5-140">Modalità di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="047d5-140">Upgrade modes</span></span>
<span data-ttu-id="047d5-141">Hello modalità consigliata per l'aggiornamento dell'applicazione è hello monitorato, che rappresenta la modalità hello comunemente utilizzato.</span><span class="sxs-lookup"><span data-stu-id="047d5-141">hello mode that we recommend for application upgrade is hello monitored mode, which is hello commonly used mode.</span></span> <span data-ttu-id="047d5-142">Modalità monitorata esegue un aggiornamento hello nel dominio di un aggiornamento, e se i controlli di integrità di tutti i passata (per ogni criterio di hello specificato), sposta nel dominio di aggiornamento successivo toohello automaticamente.</span><span class="sxs-lookup"><span data-stu-id="047d5-142">Monitored mode performs hello upgrade on one update domain, and if all health checks pass (per hello policy specified), moves on toohello next update domain automatically.</span></span>  <span data-ttu-id="047d5-143">Se i controlli di integrità non riescono e/o vengono raggiunti i timeout, l'aggiornamento di hello di rollback per il dominio di aggiornamento hello o modalità hello è toounmonitored modificate manuale.</span><span class="sxs-lookup"><span data-stu-id="047d5-143">If health checks fail and/or time-outs are reached, hello upgrade is either rolled back for hello update domain, or hello mode is changed toounmonitored manual.</span></span> <span data-ttu-id="047d5-144">È possibile configurare i toochoose aggiornamento hello una di queste due modalità per gli aggiornamenti non riusciti.</span><span class="sxs-lookup"><span data-stu-id="047d5-144">You can configure hello upgrade toochoose one of those two modes for failed upgrades.</span></span> 

<span data-ttu-id="047d5-145">Non monitorato in modalità manuale è necessario un intervento manuale dopo ogni aggiornamento in un dominio di aggiornamento, tookick disattivare l'aggiornamento di hello in hello dominio di aggiornamento successivo.</span><span class="sxs-lookup"><span data-stu-id="047d5-145">Unmonitored manual mode needs manual intervention after every upgrade on an update domain, tookick off hello upgrade on hello next update domain.</span></span> <span data-ttu-id="047d5-146">Non viene eseguito alcun controllo di integrità su Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="047d5-146">No Service Fabric health checks are performed.</span></span> <span data-ttu-id="047d5-147">messaggio per l'amministratore esegue controlli di integrità o lo stato di hello prima di avviare l'aggiornamento di hello in hello dominio di aggiornamento successivo.</span><span class="sxs-lookup"><span data-stu-id="047d5-147">hello administrator performs hello health or status checks before starting hello upgrade in hello next update domain.</span></span>

## <a name="upgrade-default-services"></a><span data-ttu-id="047d5-148">Aggiornare i servizi predefiniti</span><span class="sxs-lookup"><span data-stu-id="047d5-148">Upgrade default services</span></span>
<span data-ttu-id="047d5-149">Servizi predefiniti all'interno dell'applicazione di Service Fabric possono essere aggiornati durante il processo di aggiornamento di un'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-149">Default services within Service Fabric application can be upgraded during hello upgrade process of an application.</span></span> <span data-ttu-id="047d5-150">Servizi predefiniti definiti in hello [manifesto dell'applicazione](service-fabric-application-model.md#describe-an-application).</span><span class="sxs-lookup"><span data-stu-id="047d5-150">Default services are defined in hello [application manifest](service-fabric-application-model.md#describe-an-application).</span></span> <span data-ttu-id="047d5-151">Hello regole standard di aggiornamento dei servizi predefiniti sono:</span><span class="sxs-lookup"><span data-stu-id="047d5-151">hello standard rules of upgrading default services are:</span></span>

1. <span data-ttu-id="047d5-152">Servizi in hello nuovo predefiniti [manifesto dell'applicazione](service-fabric-application-model.md#describe-an-application) che non sono presenti nel cluster hello vengono creati.</span><span class="sxs-lookup"><span data-stu-id="047d5-152">Default services in hello new [application manifest](service-fabric-application-model.md#describe-an-application) that do not exist in hello cluster are created.</span></span>
> [!TIP]
> <span data-ttu-id="047d5-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) esigenze toobe impostare hello tooenable tootrue alle regole.</span><span class="sxs-lookup"><span data-stu-id="047d5-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) needs toobe set tootrue tooenable hello following rules.</span></span> <span data-ttu-id="047d5-154">Questa funzionalità è supportata dalla versione 5.5.</span><span class="sxs-lookup"><span data-stu-id="047d5-154">This feature is supported from v5.5.</span></span>

2. <span data-ttu-id="047d5-155">I servizi predefiniti che esistono sia nel [manifesto dell'applicazione](service-fabric-application-model.md#describe-an-application) precedente sia nella nuova versione vengono aggiornati.</span><span class="sxs-lookup"><span data-stu-id="047d5-155">Default services existing in both previous [application manifest](service-fabric-application-model.md#describe-an-application) and new version are updated.</span></span> <span data-ttu-id="047d5-156">Le descrizioni del servizio nella nuova versione di hello sovrascriverebbe quelli già presente nel cluster hello.</span><span class="sxs-lookup"><span data-stu-id="047d5-156">Service descriptions in hello new version would overwrite those already in hello cluster.</span></span> <span data-ttu-id="047d5-157">L'aggiornamento di un'applicazione subisce automaticamente il rollback in caso di errore dell'aggiornamento del servizio predefinito.</span><span class="sxs-lookup"><span data-stu-id="047d5-157">Application upgrade would rollback automatically upon updating default service failure.</span></span>
3. <span data-ttu-id="047d5-158">Servizi in hello precedente predefiniti [manifesto dell'applicazione](service-fabric-application-model.md#describe-an-application) ma non nella nuova versione di hello vengono eliminati.</span><span class="sxs-lookup"><span data-stu-id="047d5-158">Default services in hello previous [application manifest](service-fabric-application-model.md#describe-an-application) but not in hello new version are deleted.</span></span> <span data-ttu-id="047d5-159">**Si noti che questa eliminazione dei servizi predefiniti non è reversibile.**</span><span class="sxs-lookup"><span data-stu-id="047d5-159">**Note that this deleting default services can not be reverted.**</span></span>

<span data-ttu-id="047d5-160">In caso di un'applicazione l'aggiornamento viene eseguito il rollback, servizi predefiniti sono stato ripristinato toohello prima di avviata l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="047d5-160">In case of an application upgrade is rolled back, default services are reverted toohello status before upgrade started.</span></span> <span data-ttu-id="047d5-161">I servizi eliminati non possono in alcun caso essere creati.</span><span class="sxs-lookup"><span data-stu-id="047d5-161">But deleted services can never be created.</span></span>

## <a name="application-upgrade-flowchart"></a><span data-ttu-id="047d5-162">Diagramma di flusso di aggiornamento di un'applicazione</span><span class="sxs-lookup"><span data-stu-id="047d5-162">Application upgrade flowchart</span></span>
<span data-ttu-id="047d5-163">diagramma di flusso Hello dopo il paragrafo consentono di comprendere hello processo di aggiornamento di un'applicazione di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="047d5-163">hello flowchart following this paragraph can help you understand hello upgrade process of a Service Fabric application.</span></span> <span data-ttu-id="047d5-164">In particolare, viene descritto il flusso di hello hello come valori di timeout, tra cui *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, e *UpgradeHealthCheckInterval*, consentono di controllare quando l'aggiornamento di hello nel dominio di un aggiornamento viene considerato un esito positivo o un errore.</span><span class="sxs-lookup"><span data-stu-id="047d5-164">In particular, hello flow describes how hello time-outs, including *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, and *UpgradeHealthCheckInterval*, help control when hello upgrade in one update domain is considered a success or a failure.</span></span>

![processo di aggiornamento Hello per un'applicazione di Service Fabric][image]

## <a name="next-steps"></a><span data-ttu-id="047d5-166">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="047d5-166">Next steps</span></span>
<span data-ttu-id="047d5-167">[Esercitazione sull'aggiornamento di un'applicazione di Service Fabric tramite Visual Studio](service-fabric-application-upgrade-tutorial.md) descrive la procedura di aggiornamento di un'applicazione con Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="047d5-167">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="047d5-168">[Aggiornamento di un'applicazione di Service Fabric mediante PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) descrive la procedura di aggiornamento di un'applicazione tramite PowerShell.</span><span class="sxs-lookup"><span data-stu-id="047d5-168">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="047d5-169">Controllare l’aggiornamento dell'applicazione tramite [Parametri di aggiornamento](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="047d5-169">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="047d5-170">Apportare aggiornamenti applicazione compatibile da learning come toouse [la serializzazione dei dati](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="047d5-170">Make your application upgrades compatible by learning how toouse [Data Serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="047d5-171">Informazioni su come toouse funzionalità avanzate durante l'aggiornamento dell'applicazione riferendosi troppo[argomenti avanzati](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="047d5-171">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="047d5-172">Risolvere i problemi comuni negli aggiornamenti dell'applicazione riferendosi passaggi toohello [risoluzione dei problemi gli aggiornamenti dell'applicazione](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="047d5-172">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image]: media/service-fabric-application-upgrade/service-fabric-application-upgrade-flowchart.png
