---
ms.assetid: 
title: l'eliminazione temporanea insieme di credenziali chiave aaaAzure | Documenti Microsoft
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: 1b402c58db6f25ae4ae5e2720786fa81eb0e839a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a><span data-ttu-id="e9a16-102">Panoramica di eliminazione temporanea di Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="e9a16-102">Azure Key Vault soft-delete overview</span></span>

<span data-ttu-id="e9a16-103">Funzionalità di eliminazione temporanea dell'insieme di credenziali di chiave consente il recupero di archivi hello eliminato e gli oggetti di insieme di credenziali, noti come temporaneamente eliminato.</span><span class="sxs-lookup"><span data-stu-id="e9a16-103">Key Vault's soft delete feature allows recovery of hello deleted vaults and vault objects, known as soft-delete.</span></span> <span data-ttu-id="e9a16-104">In particolare, è l'indirizzo hello seguenti scenari:</span><span class="sxs-lookup"><span data-stu-id="e9a16-104">Specifically, we address hello following scenarios:</span></span>

- <span data-ttu-id="e9a16-105">Supporto per l'eliminazione reversibile di un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="e9a16-105">Support for recoverable deletion of a key vault</span></span>
- <span data-ttu-id="e9a16-106">Supporto per l'eliminazione reversibile di oggetti di insiemi di credenziali delle chiavi (ad esempio,</span><span class="sxs-lookup"><span data-stu-id="e9a16-106">Support for recoverable deletion of key vault objects (ex.</span></span> <span data-ttu-id="e9a16-107">chiavi, segreti e certificati)</span><span class="sxs-lookup"><span data-stu-id="e9a16-107">keys, secrets, certificates)</span></span>

## <a name="supporting-interfaces"></a><span data-ttu-id="e9a16-108">Interfacce di supporto</span><span class="sxs-lookup"><span data-stu-id="e9a16-108">Supporting interfaces</span></span>

<span data-ttu-id="e9a16-109">Hello funzionalità soft delete è inizialmente disponibile tramite hello REST, .NET / c# e PowerShell di interfacce.</span><span class="sxs-lookup"><span data-stu-id="e9a16-109">hello soft-delete feature is initially available through hello REST, .NET/C# and PowerShell interfaces.</span></span> <span data-ttu-id="e9a16-110">Per questi per ulteriori informazioni, vedere Riferimenti toohello [riferimento insieme di credenziali chiave](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="e9a16-110">Refer toohello references for these for more details, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

## <a name="scenarios"></a><span data-ttu-id="e9a16-111">Scenari</span><span class="sxs-lookup"><span data-stu-id="e9a16-111">Scenarios</span></span>

<span data-ttu-id="e9a16-112">Gli insiemi di credenziali delle chiavi di Azure sono risorse tracciate, gestite da Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="e9a16-112">Azure Key Vaults are tracked resources, managed by Azure Resource Manager.</span></span> <span data-ttu-id="e9a16-113">Azure Resource Manager specifica anche un comportamento ben definito per l'eliminazione, in base al quale al termine dell'operazione di eliminazione la risorsa non deve essere più accessibile.</span><span class="sxs-lookup"><span data-stu-id="e9a16-113">Azure Resource Manager also specifies a well-defined behavior for deletion, which requires that a successful DELETE operation must result in that resource not being accessible anymore.</span></span> <span data-ttu-id="e9a16-114">gli indirizzi di funzionalità di soft-eliminazione Hello hello ripristino dell'oggetto eliminato hello, se è stata l'eliminazione di hello accidentali o intenzionali.</span><span class="sxs-lookup"><span data-stu-id="e9a16-114">hello soft-delete feature addresses hello recovery of hello deleted object, whether hello deletion was accidental or intentional.</span></span>

1. <span data-ttu-id="e9a16-115">In uno scenario tipico di hello, un utente potrebbe avere inavvertitamente eliminato un insieme di credenziali chiave o un oggetto chiave dell'insieme di credenziali. Se tale chiave o un insieme di credenziali chiave dell'insieme di credenziali oggetto sono state toobe ripristinabili per un periodo predeterminato, utente hello può annullare l'eliminazione di hello e ripristinare i dati.</span><span class="sxs-lookup"><span data-stu-id="e9a16-115">In hello typical scenario, a user may have inadvertently deleted a key vault or a key vault object; if that key vault or key vault object were toobe recoverable for a predetermined period, hello user may undo hello deletion and recover their data.</span></span>

2. <span data-ttu-id="e9a16-116">In uno scenario diverso, un utente non autorizzato potrebbe tentare toodelete un insieme di credenziali chiave o un oggetto di insieme di credenziali chiave, ad esempio una chiave all'interno di un insieme di credenziali, toocause un'interruzione di business.</span><span class="sxs-lookup"><span data-stu-id="e9a16-116">In a different scenario, a rogue user may attempt toodelete a key vault or a key vault object, such as a key inside a vault, toocause a business disruption.</span></span> <span data-ttu-id="e9a16-117">Separazione eliminazione hello dell'insieme di credenziali chiave hello o insieme di credenziali delle chiavi dell'oggetto dall'eliminazione effettiva di hello di hello sottostante dei dati può essere utilizzata come misura di sicurezza, ad esempio, limitando le autorizzazioni per tooa l'eliminazione di dati diverso, attendibili ruolo.</span><span class="sxs-lookup"><span data-stu-id="e9a16-117">Separating hello deletion of hello key vault or key vault object from hello actual deletion of hello underlying data can be used as a safety measure by, for instance, restricting permissions on data deletion tooa different, trusted role.</span></span> <span data-ttu-id="e9a16-118">Con questo approccio, infatti, è necessario un quorum per un'operazione che, altrimenti, determinerebbe una perdita immediata di dati.</span><span class="sxs-lookup"><span data-stu-id="e9a16-118">This approach effectively requires quorum for an operation which might otherwise result in an immediate data loss.</span></span>

### <a name="soft-delete-behavior"></a><span data-ttu-id="e9a16-119">Comportamento della funzione di eliminazione temporanea</span><span class="sxs-lookup"><span data-stu-id="e9a16-119">Soft-delete behavior</span></span>

<span data-ttu-id="e9a16-120">Con questa funzionalità, operazione DELETE su un insieme di credenziali chiave di hello o oggetto insieme di credenziali delle chiavi è una soft-eliminazione, in modo efficace tenendo risorse hello per un periodo di memorizzazione specificato, fornendo aspetto hello oggetto hello viene eliminato.</span><span class="sxs-lookup"><span data-stu-id="e9a16-120">With this feature, hello DELETE operation on a key vault or key vault object is a soft-delete, effectively holding hello resources for a given retention period, while giving hello appearance that hello object is deleted.</span></span> <span data-ttu-id="e9a16-121">servizio Hello ulteriormente fornisce un meccanismo per il ripristino oggetto hello eliminato, essenzialmente annullamento eliminazione hello.</span><span class="sxs-lookup"><span data-stu-id="e9a16-121">hello service further provides a mechanism for recovering hello deleted object, essentially undoing hello deletion.</span></span> 

<span data-ttu-id="e9a16-122">L'eliminazione temporanea è un comportamento facoltativo di Key Vault e in questa versione **non è abilitato per impostazione predefinita**.</span><span class="sxs-lookup"><span data-stu-id="e9a16-122">Soft-delete is an optional Key Vault behavior and is **not enabled by default** in this release.</span></span> <span data-ttu-id="e9a16-123">Per ulteriori informazioni sull'abilitazione di soft-eliminazione per l'insieme di credenziali chiave, vedere una Guida specifica nella Guida di riferimento per l'interfaccia hello di propria scelta, hello hello [riferimento insieme di credenziali chiave](https://docs.microsoft.com/azure/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="e9a16-123">For details on enabling soft-delete for your key vault, see hello specific guidance in hello reference for hello interface of your choice, [Key Vault Reference](https://docs.microsoft.com/azure/key-vault/).</span></span>

### <a name="key-vault-recovery"></a><span data-ttu-id="e9a16-124">Recupero di un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="e9a16-124">Key vault recovery</span></span>

<span data-ttu-id="e9a16-125">In seguito all'eliminazione di un insieme di credenziali chiave, il servizio di hello crea una risorsa di proxy in sottoscrizione hello, aggiunta di metadati sufficienti per il ripristino.</span><span class="sxs-lookup"><span data-stu-id="e9a16-125">Upon deleting a key vault, hello service creates a proxy resource under hello subscription, adding sufficient metadata for recovery.</span></span> <span data-ttu-id="e9a16-126">risorse di Hello proxy sono un oggetto archiviato, disponibile in hello stessa posizione dell'insieme di credenziali chiave hello eliminato.</span><span class="sxs-lookup"><span data-stu-id="e9a16-126">hello proxy resource is a stored object, available in hello same location as hello deleted key vault.</span></span> 

### <a name="key-vault-object-recovery"></a><span data-ttu-id="e9a16-127">Recupero di un oggetto di un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="e9a16-127">Key vault object recovery</span></span>

<span data-ttu-id="e9a16-128">In seguito all'eliminazione di un oggetto chiave dell'insieme di credenziali, ad esempio una chiave, servizio hello inseriranno oggetto hello in uno stato eliminato, rendendo così le operazioni di recupero tooany inaccessibile.</span><span class="sxs-lookup"><span data-stu-id="e9a16-128">Upon deleting a key vault object, such as a key, hello service will place hello object in a deleted state, thus making it inaccessible tooany retrieval operations.</span></span> <span data-ttu-id="e9a16-129">In questo stato, oggetto insieme di credenziali chiave hello può solo essere elencato, ripristinato o eliminato in modo forzato/in modo permanente.</span><span class="sxs-lookup"><span data-stu-id="e9a16-129">While in this state, hello key vault object can only be listed, recovered, or forcefully/permanently deleted.</span></span> 

<span data-ttu-id="e9a16-130">In hello stesso insieme di credenziali delle chiavi, tempo pianificherà l'eliminazione di hello di hello sottostante toohello corrispondente di dati eliminato insieme di credenziali chiave o un oggetto chiave dell'insieme di credenziali per l'esecuzione dopo un intervallo di conservazione predeterminato.</span><span class="sxs-lookup"><span data-stu-id="e9a16-130">At hello same time, Key Vault will schedule hello deletion of hello underlying data corresponding toohello deleted key vault or key vault object for execution after a predetermined retention interval.</span></span> <span data-ttu-id="e9a16-131">Hello DNS record toohello insieme di credenziali corrispondente viene mantenuto anche per la durata di hello dell'intervallo di conservazione hello.</span><span class="sxs-lookup"><span data-stu-id="e9a16-131">hello DNS record corresponding toohello vault is also retained for hello duration of hello retention interval.</span></span>

### <a name="soft-delete-retention-period"></a><span data-ttu-id="e9a16-132">Periodo di memorizzazione dell'eliminazione temporanea</span><span class="sxs-lookup"><span data-stu-id="e9a16-132">Soft-delete retention period</span></span>

<span data-ttu-id="e9a16-133">Le risorse eliminate in modo temporaneo vengono conservate per un periodo di tempo prestabilito di 90 giorni.</span><span class="sxs-lookup"><span data-stu-id="e9a16-133">Soft deleted resources are retained for a set period of time, 90 days.</span></span> <span data-ttu-id="e9a16-134">Durante l'intervallo di conservazione di soft-eliminazione hello, si applicano i seguenti hello:</span><span class="sxs-lookup"><span data-stu-id="e9a16-134">During hello soft-delete retention interval, hello following apply:</span></span>

- <span data-ttu-id="e9a16-135">È possibile elencare tutti gli insiemi di credenziali chiave hello e gli oggetti chiave dell'insieme di credenziali in stato di soft-eliminazione hello per le sottoscrizioni, nonché informazioni di ripristino e l'eliminazione di accesso su di essi.</span><span class="sxs-lookup"><span data-stu-id="e9a16-135">You may list all of hello key vaults and key vault objects in hello soft-delete state for your subscription as well as access deletion and recovery information about them.</span></span>
    - <span data-ttu-id="e9a16-136">Gli insiemi di credenziali delle chiavi eliminati possono essere elencati solo da utenti con autorizzazioni speciali.</span><span class="sxs-lookup"><span data-stu-id="e9a16-136">Only users with special permissions can list deleted vaults.</span></span> <span data-ttu-id="e9a16-137">Per la gestione degli insiemi di credenziali delle chiavi eliminati è consigliabile creare un ruolo personalizzato a cui assegnare queste autorizzazioni speciali.</span><span class="sxs-lookup"><span data-stu-id="e9a16-137">We recommend that our users create a custom role with these special permissions for handling deleted vaults.</span></span>
- <span data-ttu-id="e9a16-138">Un insieme di credenziali chiave con nome stesso può essere creata in hello hello stessa posizione; di conseguenza, un insieme di credenziali chiave Impossibile creare l'oggetto in un determinato insieme di credenziali se tale insieme di credenziali chiave contiene un oggetto con hello stesso nome e che è in uno stato eliminato</span><span class="sxs-lookup"><span data-stu-id="e9a16-138">A key vault with hello same name cannot be created in hello same location; correspondingly, a key vault object cannot be created in a given vault if that key vault contains an object with hello same name and which is in a deleted state</span></span> 
- <span data-ttu-id="e9a16-139">Solo un utente con privilegi in particolare è possibile ripristinare una chiave dell'insieme di credenziali o un oggetto di insieme di credenziali chiave eseguendo il comando Ripristina sulla risorsa proxy corrispondente hello.</span><span class="sxs-lookup"><span data-stu-id="e9a16-139">Only a specifically privileged user may restore a key vault or key vault object by issuing a recover command on hello corresponding proxy resource.</span></span>
    - <span data-ttu-id="e9a16-140">utente Hello, membro del ruolo personalizzata hello, che dispone dei privilegi di hello toocreate un insieme di credenziali chiave nel gruppo di risorse hello possibile ripristinare l'insieme di credenziali hello.</span><span class="sxs-lookup"><span data-stu-id="e9a16-140">hello user, member of hello custom role, who has hello privilege toocreate a key vault under hello resource group can restore hello vault.</span></span>
- <span data-ttu-id="e9a16-141">Solo un utente con privilegi in modo specifico forzatamente può eliminare un insieme di credenziali chiave o un oggetto di insieme di credenziali chiave eseguendo il comando delete sulla risorsa proxy corrispondente hello.</span><span class="sxs-lookup"><span data-stu-id="e9a16-141">Only a specifically privileged user may forcibly delete a key vault or key vault object by issuing a delete command on hello corresponding proxy resource.</span></span>

<span data-ttu-id="e9a16-142">A meno che non viene recuperato un insieme di credenziali delle chiavi o chiave dell'insieme di credenziali, hello end del servizio di hello memorizzazione intervallo hello esegue una pulizia dell'insieme di credenziali chiave hello eliminato o oggetto insieme di credenziali chiave e il relativo contenuto.</span><span class="sxs-lookup"><span data-stu-id="e9a16-142">Unless a key vault or key vault object is recovered, at hello end of hello retention interval hello service performs a purge of hello soft-deleted key vault or key vault object and its content.</span></span> <span data-ttu-id="e9a16-143">È possibile che l'eliminazione della risorsa non venga ripianificata.</span><span class="sxs-lookup"><span data-stu-id="e9a16-143">Resource deletion may not be rescheduled.</span></span>

### <a name="permitted-purge"></a><span data-ttu-id="e9a16-144">Ripulitura consentita</span><span class="sxs-lookup"><span data-stu-id="e9a16-144">Permitted purge</span></span>

<span data-ttu-id="e9a16-145">In modo permanente l'eliminazione, l'eliminazione, un insieme di credenziali chiave è possibile tramite un'operazione POST sulla risorsa proxy hello e richiede privilegi speciali.</span><span class="sxs-lookup"><span data-stu-id="e9a16-145">Permanently deleting, purging, a key vault is possible via a POST operation on hello proxy resource and requires special privileges.</span></span> <span data-ttu-id="e9a16-146">In genere, solo il proprietario di sottoscrizione hello sarà in grado di toopurge un insieme di credenziali chiave.</span><span class="sxs-lookup"><span data-stu-id="e9a16-146">Generally, only hello subscription owner will be able toopurge a key vault.</span></span> <span data-ttu-id="e9a16-147">i trigger di operazione POST Hello hello immediato e irreversibile l'eliminazione dell'insieme di credenziali.</span><span class="sxs-lookup"><span data-stu-id="e9a16-147">hello POST operation triggers hello immediate and irrecoverable deletion of that vault.</span></span> 

<span data-ttu-id="e9a16-148">Toothis un'eccezione è il caso hello hello sottoscrizione di Azure è stato contrassegnato come *cancellabile*.</span><span class="sxs-lookup"><span data-stu-id="e9a16-148">An exception toothis is hello case when hello Azure subscription has been marked as *undeletable*.</span></span> <span data-ttu-id="e9a16-149">In questo caso, solo il servizio hello può quindi eseguire l'eliminazione effettiva hello e a tale scopo come un processo pianificato.</span><span class="sxs-lookup"><span data-stu-id="e9a16-149">In this case, only hello service may then perform hello actual deletion, and does so as a scheduled process.</span></span> 



