---
title: Panoramica di query elastica di Database SQL aaaAzure | Documenti Microsoft
description: "Panoramica della funzionalità di query elastico hello"
services: sql-database
documentationcenter: 
manager: jhubbard
author: MladjoA
ms.assetid: a8bf0e2c-bc74-44d0-9b1e-bcc9a6aa2e33
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/27/2016
ms.author: mlandzic
ms.openlocfilehash: db17f551882cfcae0da67fdda12708baeb6db81c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-elastic-query-overview-preview"></a><span data-ttu-id="6b7e5-103">Panoramica delle query elastiche del database SQL di Azure (anteprima)</span><span class="sxs-lookup"><span data-stu-id="6b7e5-103">Azure SQL Database elastic query overview (preview)</span></span>
<span data-ttu-id="6b7e5-104">funzionalità di query elastico Hello (in anteprima) permette di toorun una query Transact-SQL che si estende su più database nel Database di SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-104">hello elastic query feature (in preview) enables you toorun a Transact-SQL query that spans multiple databases in Azure SQL Database.</span></span> <span data-ttu-id="6b7e5-105">Consente tabelle remote di tooperform query tra database tooaccess e tooquery di strumenti (Excel, Power BI, Tableau, e così via) di Microsoft e di terze parti tooconnect tra i livelli di dati con più database.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-105">It allows you tooperform cross-database queries tooaccess remote tables, and tooconnect Microsoft and third party tools (Excel, PowerBI, Tableau, etc.) tooquery across data tiers with multiple databases.</span></span> <span data-ttu-id="6b7e5-106">Usare questa funzionalità, è possibile scalare orizzontalmente i livelli dati toolarge query nel Database SQL e visualizzare i risultati di hello in report di business intelligence (BI).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-106">Using this feature, you can scale out queries toolarge data tiers in SQL Database and visualize hello results in business intelligence (BI) reports.</span></span>


## <a name="why-use-elastic-queries"></a><span data-ttu-id="6b7e5-107">Vantaggi dell'uso di query elastiche</span><span class="sxs-lookup"><span data-stu-id="6b7e5-107">Why use elastic queries?</span></span>

<span data-ttu-id="6b7e5-108">**Database SQL di Azure**</span><span class="sxs-lookup"><span data-stu-id="6b7e5-108">**Azure SQL Database**</span></span>

<span data-ttu-id="6b7e5-109">Eseguire query su database SQL di Azure completamente in T-SQL.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-109">Query across Azure SQL databases completely in T-SQL.</span></span> <span data-ttu-id="6b7e5-110">Ciò consente l'esecuzione di query di sola lettura sui database remoti</span><span class="sxs-lookup"><span data-stu-id="6b7e5-110">This allows for read-only querying of remote databases.</span></span> <span data-ttu-id="6b7e5-111">Ciò fornisce un'opzione per locale corrente applicazioni toomigrate clienti di SQL Server utilizzando nomi di tre e quattro parti o il server collegato tooSQL DB.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-111">This provides an option for current on-premises SQL Server customers toomigrate applications using three- and four-part names or linked server tooSQL DB.</span></span>

<span data-ttu-id="6b7e5-112">**Disponibile nel livello Standard**</span><span class="sxs-lookup"><span data-stu-id="6b7e5-112">**Available on standard tier**</span></span>

<span data-ttu-id="6b7e5-113">Query elastico è supportata nel livello di prestazioni Standard hello nel livello di prestazioni Premium toohello aggiunta.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-113">Elastic query is supported on hello Standard performance tier in addition toohello Premium performance tier.</span></span> <span data-ttu-id="6b7e5-114">Vedere la sezione hello anteprima limitazioni indicate di seguito sui limiti delle prestazioni per i livelli di prestazioni inferiore.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-114">See hello section on Preview Limitations below on performance limitations for lower performance tiers.</span></span>

<span data-ttu-id="6b7e5-115">**Push tooremote database**</span><span class="sxs-lookup"><span data-stu-id="6b7e5-115">**Push tooremote databases**</span></span>

<span data-ttu-id="6b7e5-116">Query elastica può ora eseguire il push database remoti toohello parametri SQL per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-116">Elastic queries can now push SQL parameters toohello remote databases for execution.</span></span>

<span data-ttu-id="6b7e5-117">**Esecuzione di stored procedure**</span><span class="sxs-lookup"><span data-stu-id="6b7e5-117">**Stored procedure execution**</span></span>

<span data-ttu-id="6b7e5-118">Eseguire chiamate di stored procedure remote o funzioni remote mediante [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-118">Execute remote stored procedure calls or remote functions using [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714).</span></span>

<span data-ttu-id="6b7e5-119">**Flessibilità**</span><span class="sxs-lookup"><span data-stu-id="6b7e5-119">**Flexibility**</span></span>

<span data-ttu-id="6b7e5-120">Le tabelle esterne con query elastico ora possono fare riferimento a tabelle tooremote con un nome di tabella o un altro schema.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-120">External tables with elastic query can now refer tooremote tables with a different schema or table name.</span></span>

## <a name="elastic-query-scenarios"></a><span data-ttu-id="6b7e5-121">Scenari di query elastiche</span><span class="sxs-lookup"><span data-stu-id="6b7e5-121">Elastic query scenarios</span></span>

<span data-ttu-id="6b7e5-122">obiettivo di Hello è toofacilitate scenari in cui più database contribuiscono righe in un singolo risultato complessivo di una query.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-122">hello goal is toofacilitate querying scenarios where multiple databases contribute rows into a single overall result.</span></span> <span data-ttu-id="6b7e5-123">query Hello possono essere composte sia da hello utente o applicazione direttamente o indirettamente tramite gli strumenti che sono connessi toohello database.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-123">hello query can either be composed by hello user or application directly, or indirectly through tools that are connected toohello database.</span></span> <span data-ttu-id="6b7e5-124">Ciò è particolarmente utile quando si creano report, si usano strumenti commerciali di Business Intelligence o di integrazione dei dati o si usa qualsiasi applicazione che non può essere modificata.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-124">This is especially useful when creating reports, using commercial BI or data integration tools—or any application that cannot be changed.</span></span> <span data-ttu-id="6b7e5-125">Con una query elastica, è possibile eseguire query su più database tramite consueta esperienza di connettività SQL Server hello in strumenti, ad esempio Excel, Power BI, Tableau o Cognos.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-125">With an elastic query, you can query across several databases using hello familiar SQL Server connectivity experience in tools such as Excel, PowerBI, Tableau, or Cognos.</span></span>
<span data-ttu-id="6b7e5-126">Una query elastica consente un facile accesso tooan tutto l'insieme di database tramite le query eseguite da SQL Server Management Studio o Visual Studio e facilita l'esecuzione di query tra database da Entity Framework o in altri ambienti di ORM.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-126">An elastic query allows easy access tooan entire collection of databases through queries issued by SQL Server Management Studio or Visual Studio, and facilitates cross-database querying from Entity Framework or other ORM environments.</span></span> <span data-ttu-id="6b7e5-127">La figura 1 illustra uno scenario in cui un oggetto esistente del cloud di applicazione (che utilizza hello [libreria client di database elastico](sql-database-elastic-database-client-library.md)) compilazioni su dati di scalabilità orizzontale del livello e viene utilizzata una query flessibile per i report tra database.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-127">Figure 1 shows a scenario where an existing cloud application (which uses hello [elastic database client library](sql-database-elastic-database-client-library.md)) builds on a scaled-out data tier, and an elastic query is used for cross-database reporting.</span></span>

<span data-ttu-id="6b7e5-128">**Figura 1** Query elastica usata su un livello di dati con scalabilità orizzontale</span><span class="sxs-lookup"><span data-stu-id="6b7e5-128">**Figure 1** Elastic query used on scaled-out data tier</span></span>

![Query elastica usata su un livello di dati con scalabilità orizzontale][1]

<span data-ttu-id="6b7e5-130">Scenari di clienti per query elastico sono caratterizzati da hello seguenti topologie:</span><span class="sxs-lookup"><span data-stu-id="6b7e5-130">Customer scenarios for elastic query are characterized by hello following topologies:</span></span>

* <span data-ttu-id="6b7e5-131">**Partizionamento verticale - query tra database** (topologia 1): hello i dati sono partizionati in senso verticale tra un numero di database in un livello di dati.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-131">**Vertical partitioning - Cross-database queries** (Topology 1): hello data is partitioned vertically between a number of databases in a data tier.</span></span> <span data-ttu-id="6b7e5-132">In genere, diversi set di tabelle si trovano in diversi database.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-132">Typically, different sets of tables reside on different databases.</span></span> <span data-ttu-id="6b7e5-133">Ciò significa che lo schema hello è diverso in database diversi.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-133">That means that hello schema is different on different databases.</span></span> <span data-ttu-id="6b7e5-134">Ad esempio, tutte le tabelle per l'inventario si trovano in un database, mentre le tabelle correlate alla contabilità si trovano in un altro database.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-134">For instance, all tables for inventory are on one database while all accounting-related tables are on a second database.</span></span> <span data-ttu-id="6b7e5-135">Casi d'uso comuni con questa topologia richiedono uno tooquery tra o toocompile relazioni tra tabelle in più database.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-135">Common use cases with this topology require one tooquery across or toocompile reports across tables in several databases.</span></span>
* <span data-ttu-id="6b7e5-136">**Partizionamento orizzontale - partizionamento orizzontale** (topologia 2): dati vengono partizionati orizzontalmente toodistribute righe attraverso una scalabilità dati livello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-136">**Horizontal Partitioning - Sharding** (Topology 2): Data is partitioned horizontally toodistribute rows across a scaled out data tier.</span></span> <span data-ttu-id="6b7e5-137">Con questo approccio, schema hello è identico in tutti i database partecipanti.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-137">With this approach, hello schema is identical on all participating databases.</span></span> <span data-ttu-id="6b7e5-138">Questo approccio viene definito anche "partizionamento orizzontale".</span><span class="sxs-lookup"><span data-stu-id="6b7e5-138">This approach is also called “sharding”.</span></span> <span data-ttu-id="6b7e5-139">Partizionamento orizzontale può essere eseguita e gestite tramite le librerie strumenti di database elastico hello (1) o (2) partizionamento orizzontale automatico.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-139">Sharding can be performed and managed using (1) hello elastic database tools libraries or (2) self-sharding.</span></span> <span data-ttu-id="6b7e5-140">Una query elastica è report tooquery o di compilazione utilizzati tra molte partizioni.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-140">An elastic query is used tooquery or compile reports across many shards.</span></span>

> [!NOTE]
> <span data-ttu-id="6b7e5-141">Query elastico è ideale per scenari di report occasionali in cui la maggior parte dell'elaborazione hello può essere eseguita nel livello dati hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-141">Elastic query works best for occasional reporting scenarios where most of hello processing can be performed on hello data tier.</span></span> <span data-ttu-id="6b7e5-142">Per carichi di lavoro di creazione di report elevati o per scenari di data warehousing con query più complesse è possibile usare anche [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-142">For heavy reporting workloads or data warehousing scenarios with more complex queries, also consider using [Azure SQL Data Warehouse](https://azure.microsoft.com/services/sql-data-warehouse/).</span></span>
>  

## <a name="vertical-partitioning---cross-database-queries"></a><span data-ttu-id="6b7e5-143">Partizionamento verticale - Query tra database</span><span class="sxs-lookup"><span data-stu-id="6b7e5-143">Vertical partitioning - cross-database queries</span></span>

<span data-ttu-id="6b7e5-144">toobegin nel codice, vedere [Guida introduttiva a query tra database (partizionamento verticale)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-144">toobegin coding, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>

<span data-ttu-id="6b7e5-145">Una query elastica può essere utilizzato toomake dati si trova in un database SQL tooother disponibili database SQL.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-145">An elastic query can be used toomake data located in a SQL database available tooother SQL databases.</span></span> <span data-ttu-id="6b7e5-146">In questo modo le query da un database toorefer tootables in qualsiasi altro database SQL remoto.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-146">This allows queries from one database toorefer tootables in any other remote SQL database.</span></span> <span data-ttu-id="6b7e5-147">primo passaggio Hello è toodefine un'origine dati esterna per ogni database remoto.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-147">hello first step is toodefine an external data source for each remote database.</span></span> <span data-ttu-id="6b7e5-148">origine dati esterna Hello è definita nel database locale di hello da cui si desidera toogain accesso tootables sul database remoto hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-148">hello external data source is defined in hello local database from which you want toogain access tootables located on hello remote database.</span></span> <span data-ttu-id="6b7e5-149">Non sono necessarie modifiche nel database remoto hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-149">No changes are necessary on hello remote database.</span></span> <span data-ttu-id="6b7e5-150">Per verticali partizionamento scenari tipici in database diversi contengono schemi diversi, elastica query possono essere tooimplement utilizzati casi d'uso comuni, ad esempio tooreference accedere ai dati e l'esecuzione di query tra database.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-150">For typical vertical partitioning scenarios where different databases have different schemas, elastic queries can be used tooimplement common use cases such as access tooreference data and cross-database querying.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6b7e5-151">L'utente deve disporre dell'autorizzazione ALTER ANY EXTERNAL DATA SOURCE.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-151">You must possess ALTER ANY EXTERNAL DATA SOURCE permission.</span></span> <span data-ttu-id="6b7e5-152">Questa autorizzazione è inclusa con l'autorizzazione ALTER DATABASE hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-152">This permission is included with hello ALTER DATABASE permission.</span></span> <span data-ttu-id="6b7e5-153">Le autorizzazioni ALTER ANY EXTERNAL DATA SOURCE sono necessari toorefer toohello origine dati sottostante.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-153">ALTER ANY EXTERNAL DATA SOURCE permissions are needed toorefer toohello underlying data source.</span></span>
>

<span data-ttu-id="6b7e5-154">**Dati di riferimento**: topologia hello viene utilizzata per la gestione dei dati di riferimento.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-154">**Reference data**: hello topology is used for reference data management.</span></span> <span data-ttu-id="6b7e5-155">Nella seguente figura hello due tabelle (T1 e T2) con dati di riferimento vengono mantenute in un database dedicato.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-155">In hello figure below, two tables (T1 and T2) with reference data are kept on a dedicated database.</span></span> <span data-ttu-id="6b7e5-156">Utilizzando una query elastica, è ora possibile accedere tabelle T1 e T2 in modalità remota da altri database, come illustrato nella figura hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-156">Using an elastic query, you can now access tables T1 and T2 remotely from other databases, as shown in hello figure.</span></span> <span data-ttu-id="6b7e5-157">Usare la topologia 1 se le tabelle di riferimento hanno dimensioni ridotte o se le query nella tabella di riferimento hanno predicati selettivi.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-157">Use topology 1 if reference tables are small or remote queries into reference table have selective predicates.</span></span>

<span data-ttu-id="6b7e5-158">**Figura 2** verticale partizionamento - utilizzando dati di riferimento tooquery query elastico</span><span class="sxs-lookup"><span data-stu-id="6b7e5-158">**Figure 2** Vertical partitioning - Using elastic query tooquery reference data</span></span>

![Verticale partizionamento - utilizzando dati di riferimento tooquery query elastico][3]

<span data-ttu-id="6b7e5-160">**Query tra database**: le query elastiche consentono casi di utilizzo che richiedono l'esecuzione di query in diversi database SQL.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-160">**Cross-database querying**: Elastic queries enable use cases that require querying across several SQL databases.</span></span> <span data-ttu-id="6b7e5-161">La Figura 3 mostra quattro database diversi, ovvero CRM, Inventario, Risorse umane e Prodotti.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-161">Figure 3 shows four different databases: CRM, Inventory, HR and Products.</span></span> <span data-ttu-id="6b7e5-162">Le query eseguite in uno dei database hello anche necessitano accedere tooone o tutti hello altri database.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-162">Queries performed in one of hello databases also need access tooone or all hello other databases.</span></span> <span data-ttu-id="6b7e5-163">Utilizzando una query elastica, è possibile configurare il database in questo caso eseguendo alcuni semplici istruzioni DDL in ognuno dei quattro database hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-163">Using an elastic query, you can configure your database for this case by running a few simple DDL statements on each of hello four databases.</span></span> <span data-ttu-id="6b7e5-164">Dopo questa configurazione occasionale, è sufficiente che fa riferimento a tabella locale tooa dalla query T-SQL o dagli strumenti BI tabella remota tooa di accesso.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-164">After this one-time configuration, access tooa remote table is as simple as referring tooa local table from your T-SQL queries or from your BI tools.</span></span> <span data-ttu-id="6b7e5-165">Questo approccio è consigliato se le query remote hello non restituiscono risultati di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-165">This approach is recommended if hello remote queries do not return large results.</span></span>

<span data-ttu-id="6b7e5-166">**Figura 3** verticale partizionamento - utilizzo tooquery elastico query tra database diversi</span><span class="sxs-lookup"><span data-stu-id="6b7e5-166">**Figure 3** Vertical partitioning - Using elastic query tooquery across various databases</span></span>

![Verticale partizionamento - utilizzo tooquery elastico query tra database diversi][4]

<span data-ttu-id="6b7e5-168">Hello seguenti passaggi consentono di configurare le query di database elastici per scenari di partizionamento verticale che richiedono tabella tooa accesso si trova nel database SQL remoti con hello stesso schema:</span><span class="sxs-lookup"><span data-stu-id="6b7e5-168">hello following steps configure elastic database queries for vertical partitioning scenarios that require access tooa table located on remote SQL databases with hello same schema:</span></span>

* <span data-ttu-id="6b7e5-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="6b7e5-169">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="6b7e5-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="6b7e5-170">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="6b7e5-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span><span class="sxs-lookup"><span data-stu-id="6b7e5-171">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **RDBMS**</span></span>
* <span data-ttu-id="6b7e5-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="6b7e5-172">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="6b7e5-173">Dopo l'esecuzione di istruzioni DDL hello, è possibile accedere tabella remota hello "mytable" come se fosse una tabella locale.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-173">After running hello DDL statements, you can access hello remote table “mytable” as though it were a local table.</span></span> <span data-ttu-id="6b7e5-174">Database SQL di Azure apre automaticamente un database remoto toohello di connessione, elabora la richiesta nel database remoto hello e restituisce risultati hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-174">Azure SQL Database automatically opens a connection toohello remote database, processes your request on hello remote database, and returns hello results.</span></span>

## <a name="horizontal-partitioning---sharding"></a><span data-ttu-id="6b7e5-175">Partizionamento orizzontale - Partizionamento orizzontale</span><span class="sxs-lookup"><span data-stu-id="6b7e5-175">Horizontal partitioning - sharding</span></span>
<span data-ttu-id="6b7e5-176">L'utilizzo di query elastico tooperform le attività di reporting su un partizionato, ad esempio, in senso orizzontale partizionata, livello dati richiede un [mappa partizioni di database elastico](sql-database-elastic-scale-shard-map-management.md) database hello toorepresent del livello dati hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-176">Using elastic query tooperform reporting tasks over a sharded, i.e., horizontally partitioned, data tier requires an [elastic database shard map](sql-database-elastic-scale-shard-map-management.md) toorepresent hello databases of hello data tier .</span></span> <span data-ttu-id="6b7e5-177">In genere, in questo scenario viene utilizzata solo una mappa di singola partizione e un database dedicato con funzionalità di query elastico (nodo head) funge da punto di ingresso hello per le query di report.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-177">Typically, only a single shard map is used in this scenario and a dedicated database with elastic query capabilities (head node) serves as hello entry point for reporting queries.</span></span> <span data-ttu-id="6b7e5-178">Solo tale database dedicato deve mappa partizioni toohello di accesso.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-178">Only this dedicated database needs access toohello shard map.</span></span> <span data-ttu-id="6b7e5-179">Figura 4 illustra questa topologia e la relativa configurazione con mappa di database e partizioni query elastico hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-179">Figure 4 illustrates this topology and its configuration with hello elastic query database and shard map.</span></span> <span data-ttu-id="6b7e5-180">i database nel livello dati hello Hello possono essere di qualsiasi Database SQL di Azure versione o edizione.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-180">hello databases in hello data tier can be of any Azure SQL Database version or edition.</span></span> <span data-ttu-id="6b7e5-181">Per ulteriori informazioni sulla libreria client di database elastico hello e la creazione di mappe partizioni, vedere [gestione mappa partizioni](sql-database-elastic-scale-shard-map-management.md).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-181">For more information about hello elastic database client library and creating shard maps, see [Shard map management](sql-database-elastic-scale-shard-map-management.md).</span></span>

<span data-ttu-id="6b7e5-182">**Figura 4** Partizionamento orizzontale - Uso delle query elastiche per la creazione di report relativi ai livelli dati con partizionamento orizzontale</span><span class="sxs-lookup"><span data-stu-id="6b7e5-182">**Figure 4** Horizontal partitioning - Using elastic query for reporting over sharded data tiers</span></span>

![Partizionamento orizzontale - Uso delle query elastiche per la creazione di report relativi ai livelli dati con partizionamento orizzontale][5]

> [!NOTE]
> <span data-ttu-id="6b7e5-184">Database Query elastico (nodo head) può essere un database separato o può essere hello stesso database che mappa partizioni hello di host.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-184">Elastic Query Database (head node) can be separate database, or it can be hello same database that hosts hello shard map.</span></span> <span data-ttu-id="6b7e5-185">Indipendentemente dalla modalità di configurazione, assicurarsi che tale livello di servizio e le prestazioni del database è l'importo previsto hello toohandle sufficientemente elevato di richieste di accesso/query.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-185">Whatever configuration you choose, make sure that service and performance tier of that database is high enough toohandle hello expected  amount of login/query requests.</span></span>

<span data-ttu-id="6b7e5-186">Hello passaggi seguenti configurare query di database elastico per orizzontale partizionamento gli scenari che richiedono accesso tooa set della tabella che si trovano su (in genere in) database SQL remoti diversi:</span><span class="sxs-lookup"><span data-stu-id="6b7e5-186">hello following steps configure elastic database queries for horizontal partitioning scenarios that require access tooa set of table that are located on (typically) several remote SQL databases:</span></span>

* <span data-ttu-id="6b7e5-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span><span class="sxs-lookup"><span data-stu-id="6b7e5-187">[CREATE MASTER KEY](https://msdn.microsoft.com/library/ms174382.aspx) mymasterkey</span></span>
* <span data-ttu-id="6b7e5-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span><span class="sxs-lookup"><span data-stu-id="6b7e5-188">[CREATE DATABASE SCOPED CREDENTIAL](https://msdn.microsoft.com/library/mt270260.aspx) mycredential</span></span>
* <span data-ttu-id="6b7e5-189">Creare un [mappa partizioni](sql-database-elastic-scale-shard-map-management.md) che rappresenta il livello dati utilizzando una libreria client di database elastico hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-189">Create a [shard map](sql-database-elastic-scale-shard-map-management.md) representing your data tier using hello elastic database client library.</span></span>   
* <span data-ttu-id="6b7e5-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource di tipo **SHARD_MAP_MANAGER**</span><span class="sxs-lookup"><span data-stu-id="6b7e5-190">[CREATE/DROP EXTERNAL DATA SOURCE](https://msdn.microsoft.com/library/dn935022.aspx) mydatasource of type **SHARD_MAP_MANAGER**</span></span>
* <span data-ttu-id="6b7e5-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span><span class="sxs-lookup"><span data-stu-id="6b7e5-191">[CREATE/DROP EXTERNAL TABLE](https://msdn.microsoft.com/library/dn935021.aspx) mytable</span></span>

<span data-ttu-id="6b7e5-192">Dopo aver eseguito questi passaggi, è possibile accedere tabella partizionata orizzontalmente hello "mytable" come se fosse una tabella locale.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-192">Once you have performed these steps, you can access hello horizontally partitioned table “mytable” as though it were a local table.</span></span> <span data-ttu-id="6b7e5-193">Database SQL di Azure automaticamente apre più connessioni parallelo toohello database remoti in cui sono archiviate fisicamente tabelle hello elabora le richieste di hello su database remoti hello e restituisce risultati hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-193">Azure SQL Database automatically opens multiple parallel connections toohello remote databases where hello tables are physically stored, processes hello requests on hello remote databases, and returns hello results.</span></span>
<span data-ttu-id="6b7e5-194">Ulteriori informazioni sui passaggi di hello necessario per uno scenario di partizionamento orizzontale hello è reperibile [elastica query per il partizionamento orizzontale](sql-database-elastic-query-horizontal-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-194">More information on hello steps required for hello horizontal partitioning scenario can be found in [elastic query for horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md).</span></span>

<span data-ttu-id="6b7e5-195">toobegin nel codice, vedere [introduzione elastica query per il partizionamento orizzontale (partizionamento orizzontale)](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-195">toobegin coding, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>

## <a name="t-sql-querying"></a><span data-ttu-id="6b7e5-196">Query T-SQL</span><span class="sxs-lookup"><span data-stu-id="6b7e5-196">T-SQL querying</span></span>
<span data-ttu-id="6b7e5-197">Dopo aver definito le origini dati esterne e le tabelle esterne, è possibile utilizzare regolare connessione stringhe tooconnect toohello i database SQL Server in cui è definito le tabelle esterne.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-197">Once you have defined your external data sources and your external tables, you can use regular SQL Server connection strings tooconnect toohello databases where you defined your external tables.</span></span> <span data-ttu-id="6b7e5-198">È possibile eseguire le istruzioni T-SQL su tabelle esterne su tale connessione con limitazioni hello descritte di seguito.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-198">You can then run T-SQL statements over your external tables on that connection with hello limitations outlined below.</span></span> <span data-ttu-id="6b7e5-199">È possibile trovare ulteriori informazioni ed esempi di query T-SQL negli argomenti di documentazione hello per [il partizionamento orizzontale](sql-database-elastic-query-horizontal-partitioning.md) e [partizionamento verticale](sql-database-elastic-query-vertical-partitioning.md).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-199">You can find more information and examples of T-SQL queries in hello documentation topics for [horizontal partitioning](sql-database-elastic-query-horizontal-partitioning.md) and [vertical partitioning](sql-database-elastic-query-vertical-partitioning.md).</span></span>

## <a name="connectivity-for-tools"></a><span data-ttu-id="6b7e5-200">Connettività per gli strumenti</span><span class="sxs-lookup"><span data-stu-id="6b7e5-200">Connectivity for tools</span></span>
<span data-ttu-id="6b7e5-201">Le applicazioni e BI o dati toodatabases strumenti di integrazione con le tabelle esterne, è possibile utilizzare regolare tooconnect di stringhe di connessione SQL Server.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-201">You can use regular SQL Server connection strings tooconnect your applications and BI or data integration tools toodatabases that have external tables.</span></span> <span data-ttu-id="6b7e5-202">Assicurarsi che SQL Server sia supportato come origine dati per lo strumento.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-202">Make sure that SQL Server is supported as a data source for your tool.</span></span> <span data-ttu-id="6b7e5-203">Una volta connessi, fare riferimento toohello query elastico del database e hello tabelle esterne nel database esattamente come si farebbe con qualsiasi altro database di SQL Server che si connette toowith lo strumento.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-203">Once connected, refer toohello elastic query database and hello external tables in that database just like you would do with any other SQL Server database that you connect toowith your tool.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="6b7e5-204">L'autenticazione tramite Azure Active Directory con query elastiche non è attualmente supportata.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-204">Authentication using Azure Active Directory with elastic queries is not currently supported.</span></span>
> 
> 

## <a name="cost"></a><span data-ttu-id="6b7e5-205">Costi</span><span class="sxs-lookup"><span data-stu-id="6b7e5-205">Cost</span></span>
<span data-ttu-id="6b7e5-206">Query elastico è inclusa nel costo hello dei database di Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-206">Elastic query is included into hello cost of Azure SQL Database databases.</span></span> <span data-ttu-id="6b7e5-207">Si noti che sono supportate le topologie in cui sono i database remoti in un data center diverso rispetto a hello endpoint elastico query, ma i dati in uscita dai database remoti vengono addebitate regular [tariffe Azure](https://azure.microsoft.com/pricing/details/data-transfers/).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-207">Note that topologies where your remote databases are in a different data center than hello elastic query endpoint are supported, but data egress from remote databases are charged regular [Azure rates](https://azure.microsoft.com/pricing/details/data-transfers/).</span></span>

## <a name="preview-limitations"></a><span data-ttu-id="6b7e5-208">Limiti di anteprima</span><span class="sxs-lookup"><span data-stu-id="6b7e5-208">Preview limitations</span></span>
* <span data-ttu-id="6b7e5-209">Esecuzione della prima query elastica può richiedere fino a tooa alcuni minuti a livello di prestazioni Standard hello.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-209">Running your first elastic query can take up tooa few minutes on hello Standard performance tier.</span></span> <span data-ttu-id="6b7e5-210">Questa volta è una funzionalità di query elastico hello tooload necessarie; prestazioni di caricamento migliorano con i livelli di prestazioni superiore.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-210">This time is necessary tooload hello elastic query functionality; loading performance improves with higher performance tiers.</span></span>
* <span data-ttu-id="6b7e5-211">La creazione di script di origini dati esterne o tabelle esterne da SSMS o SSDT non è ancora supportata.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-211">Scripting of external data sources or external tables from SSMS or SSDT is not yet supported.</span></span>
* <span data-ttu-id="6b7e5-212">L'importazione/esportazione per il database SQL non supporta ancora origini dati esterne e tabelle esterne.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-212">Import/Export for SQL DB does not yet support external data sources and external tables.</span></span> <span data-ttu-id="6b7e5-213">Se è necessario toouse importazione/esportazione, eliminare questi oggetti prima di esportare e quindi ricrearli dopo l'importazione.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-213">If you need toouse Import/Export, drop these objects before exporting and then re-create them after importing.</span></span>
* <span data-ttu-id="6b7e5-214">Query elastico supporta attualmente solo le tabelle tooexternal accesso in sola lettura.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-214">Elastic query currently only supports read-only access tooexternal tables.</span></span> <span data-ttu-id="6b7e5-215">Tuttavia, è possibile utilizzare le funzionalità complete di T-SQL nel database di hello in cui la tabella esterna hello è definita.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-215">You can, however, use full T-SQL functionality on hello database where hello external table is defined.</span></span> <span data-ttu-id="6b7e5-216">Questo può essere utile mantenere, ad esempio, risultati temporanei utilizzando, ad esempio, selezionare < column_list > in < local_table >, o toodefine stored procedure nel database di hello elastico query che fanno riferimento a tabelle tooexternal.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-216">This can be useful to, e.g., persist temporary results using, e.g., SELECT <column_list> INTO <local_table>, or toodefine stored procedures on hello elastic query database which refer tooexternal tables.</span></span>
* <span data-ttu-id="6b7e5-217">Ad eccezione di nvarchar(max), i tipi LOB non sono supportati nelle definizioni di tabelle esterne.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-217">Except for nvarchar(max), LOB types are not supported in external table definitions.</span></span> <span data-ttu-id="6b7e5-218">In alternativa, è possibile creare una vista nel database remoto hello che esegue il cast di tipo LOB hello in nvarchar (max), definire la tabella esterna sulla visualizzazione di hello anziché una tabella di base hello e quindi eseguirne il cast al tipo LOB originale hello nelle query.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-218">As a workaround, you can create a view on hello remote database that casts hello LOB type into nvarchar(max), define your external table over hello view instead of hello base table and then cast it back into hello original LOB type in your queries.</span></span>
* <span data-ttu-id="6b7e5-219">Le statistiche di colonna sulle tabelle esterne non sono attualmente supportate.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-219">Column statistics over external tables are currently not supported.</span></span> <span data-ttu-id="6b7e5-220">Statistiche delle tabelle sono supportati, ma è necessario toobe creato manualmente.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-220">Tables statistics are supported, but need toobe created manually.</span></span>

## <a name="feedback"></a><span data-ttu-id="6b7e5-221">Commenti e suggerimenti</span><span class="sxs-lookup"><span data-stu-id="6b7e5-221">Feedback</span></span>
<span data-ttu-id="6b7e5-222">. Condividere commenti e suggerimenti sull'esperienza con le query elastiche con noi Disqus riportato di seguito, i forum MSDN hello, o su Stackoverflow.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-222">Please share feedback on your experience with elastic queries with us on Disqus below, hello MSDN forums, or on Stackoverflow.</span></span> <span data-ttu-id="6b7e5-223">Siamo interessati tutti i tipi di commenti e suggerimenti sul servizio hello (difetti, bordi approssimativo, il gap di funzionalità).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-223">We are interested in all kinds of feedback about hello service (defects, rough edges, feature gaps).</span></span>

## <a name="next-steps"></a><span data-ttu-id="6b7e5-224">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="6b7e5-224">Next steps</span></span>

* <span data-ttu-id="6b7e5-225">Per un'esercitazione sul partizionamento verticale, vedere [Introduzione alle query tra database (partizionamento verticale)](sql-database-elastic-query-getting-started-vertical.md).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-225">For a vertical partitioning tutorial, see [Getting started with cross-database query (vertical partitioning)](sql-database-elastic-query-getting-started-vertical.md).</span></span>
* <span data-ttu-id="6b7e5-226">Per le query di esempio e sintassi per i dati con partizionamento verticale, vedere [Eseguire query su dati con partizionamento verticale](sql-database-elastic-query-vertical-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="6b7e5-226">For syntax and sample queries for vertically partitioned data, see [Querying vertically partitioned data)](sql-database-elastic-query-vertical-partitioning.md)</span></span>
* <span data-ttu-id="6b7e5-227">Per un'esercitazione sul partizionamento orizzontale, vedere la [guida introduttiva alle query elastiche per il partizionamento orizzontale](sql-database-elastic-query-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="6b7e5-227">For a horizontal partitioning (sharding) tutorial, see [Getting started with elastic query for horizontal partitioning (sharding)](sql-database-elastic-query-getting-started.md).</span></span>
* <span data-ttu-id="6b7e5-228">Per le query di esempio e sintassi per i dati con partizionamento orizzontale, vedere [Eseguire query su dati con partizionamento orizzontale](sql-database-elastic-query-horizontal-partitioning.md)</span><span class="sxs-lookup"><span data-stu-id="6b7e5-228">For syntax and sample queries for horizontally partitioned data, see [Querying horizontally partitioned data)](sql-database-elastic-query-horizontal-partitioning.md)</span></span>
* <span data-ttu-id="6b7e5-229">Vedere [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) per una stored procedure che esegue un'istruzione Transact-SQL su un singolo database SQL di Azure remoto o un set di database che fungono da partizioni in uno schema di partizionamento orizzontale.</span><span class="sxs-lookup"><span data-stu-id="6b7e5-229">See [sp\_execute \_remote](https://msdn.microsoft.com/library/mt703714) for a stored procedure that executes a Transact-SQL statement on a single remote Azure SQL Database or set of databases serving as shards in a horizontal partitioning scheme.</span></span>

<!--Image references-->
[1]: ./media/sql-database-elastic-query-overview/overview.png
[2]: ./media/sql-database-elastic-query-overview/topology1.png
[3]: ./media/sql-database-elastic-query-overview/vertpartrrefdata.png
[4]: ./media/sql-database-elastic-query-overview/verticalpartitioning.png
[5]: ./media/sql-database-elastic-query-overview/horizontalpartitioning.png

<!--anchors-->
