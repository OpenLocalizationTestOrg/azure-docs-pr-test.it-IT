---
title: aaaAuthentication e l'autorizzazione per App per le API in Azure App Service | Documenti Microsoft
description: Informazioni sui servizi di autenticazione e autorizzazione di hello forniti dal servizio App di Azure per App per le API.
services: app-service\api
documentationcenter: .net
author: alexkarcher-msft
manager: erikre
editor: 
ms.assetid: d620b53a-5a6f-41c9-84c7-f7ef5ff02ae7
ms.service: app-service-api
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/23/2016
ms.author: alkarche
ms.openlocfilehash: 6d26754b8b606ec232a74768787922ea80577c95
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-for-api-apps-in-azure-app-service"></a><span data-ttu-id="9c98d-103">Autenticazione e autorizzazione per app per le API nel servizio app di Azure</span><span class="sxs-lookup"><span data-stu-id="9c98d-103">Authentication and authorization for API Apps in Azure App Service</span></span>
## <a name="overview"></a><span data-ttu-id="9c98d-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="9c98d-104">Overview</span></span>
> [!NOTE]
> <span data-ttu-id="9c98d-105">In questo argomento sarà migrato tooa consolidato [l'autenticazione del servizio App / autorizzazione](../app-service/app-service-authentication-overview.md) argomento riguardante Web, dispositivi mobili e App per le API.</span><span class="sxs-lookup"><span data-stu-id="9c98d-105">This topic will be migrated tooa consolidated [App Service Authentication / Authorization](../app-service/app-service-authentication-overview.md) topic, which covers Web, Mobile, and API Apps.</span></span>
> 
> 

<span data-ttu-id="9c98d-106">Il servizio app di Azure offre servizi di autenticazione e autorizzazione predefiniti che implementano [OAuth 2.0](#oauth) e [OpenID Connect](#oauth).</span><span class="sxs-lookup"><span data-stu-id="9c98d-106">Azure App Service offers built-in authentication and authorization services that implement [OAuth 2.0](#oauth) and [OpenID Connect](#oauth).</span></span> <span data-ttu-id="9c98d-107">In questo articolo vengono illustrati i servizi di hello e le opzioni disponibili per App per le API in Azure App Service.</span><span class="sxs-lookup"><span data-stu-id="9c98d-107">This article describes hello services and options that are available for API Apps in Azure App Service.</span></span>

<span data-ttu-id="9c98d-108">Hello seguente diagramma vengono illustrate alcune caratteristiche chiave di autenticazione del servizio App:</span><span class="sxs-lookup"><span data-stu-id="9c98d-108">hello following diagram illustrates some key characteristics of App Service authentication:</span></span>

* <span data-ttu-id="9c98d-109">Pre-elabora le richieste API in ingresso, quindi usa qualsiasi linguaggio o framework supportato dal servizio app.</span><span class="sxs-lookup"><span data-stu-id="9c98d-109">It preprocesses incoming API requests, which means it works with any language or framework supported by App Service.</span></span>
* <span data-ttu-id="9c98d-110">Offre diverse opzioni per l'autenticazione di quanto lavoro è necessario toodo nel codice.</span><span class="sxs-lookup"><span data-stu-id="9c98d-110">It gives you several options for how much authentication work you want toodo in your own code.</span></span>
* <span data-ttu-id="9c98d-111">Funziona per l'autenticazione sia dell'utente finale che dell'account del servizio.</span><span class="sxs-lookup"><span data-stu-id="9c98d-111">It works for both end user and service account authentication.</span></span> 
* <span data-ttu-id="9c98d-112">Supporta cinque provider di identità: Azure Active Directory, Facebook, Google, Twitter e account Microsoft.</span><span class="sxs-lookup"><span data-stu-id="9c98d-112">It supports five identity providers: Azure Active Directory, Facebook, Google, Twitter, and Microsoft Account.</span></span>
* <span data-ttu-id="9c98d-113">Il funzionamento stesso hello per le App per le API, applicazioni Web e App per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="9c98d-113">It works hello same for API Apps, Web Apps, and Mobile Apps.</span></span>

![](./media/app-service-api-authentication/api-apps-overview.png)

## <a name="language-agnostic"></a><span data-ttu-id="9c98d-114">Indipendente dal linguaggio</span><span class="sxs-lookup"><span data-stu-id="9c98d-114">Language agnostic</span></span>
<span data-ttu-id="9c98d-115">Elaborazione dell'autenticazione di servizio App si verifica prima che le richieste raggiungano l'app per le API, il che significa che le funzionalità di autenticazione hello funzionano per App scritte in qualsiasi lingua o un framework per le API.</span><span class="sxs-lookup"><span data-stu-id="9c98d-115">App Service authentication processing happens before requests reach your API app, which means that hello authentication features work for API apps written in any language or framework.</span></span>  <span data-ttu-id="9c98d-116">L'API può essere basata su ASP.NET, Java, Node.js o qualsiasi framework che supporta il servizio app.</span><span class="sxs-lookup"><span data-stu-id="9c98d-116">Your API can be based on ASP.NET, Java, Node.js, or any framework that App Service supports.</span></span>

<span data-ttu-id="9c98d-117">Servizio App passa in hello token JSON web token (JWT) nell'intestazione di autorizzazione hello di una richiesta HTTP e il codice scritto in qualsiasi lingua o framework possa ottenere hello informazioni che necessarie da hello token.</span><span class="sxs-lookup"><span data-stu-id="9c98d-117">App Service passes on hello JSON web token (JWT) in hello Authorization header of an HTTP request, and code written in any language or framework can get hello information it needs from hello token.</span></span> <span data-ttu-id="9c98d-118">Inoltre, servizio App consente di accedere più facilmente toohello più diffuse attestazioni impostando alcune intestazioni speciali, come illustrato di seguito hello:</span><span class="sxs-lookup"><span data-stu-id="9c98d-118">In addition, App Service gives you easier access toohello most commonly used claims by setting some special headers, such as hello following:</span></span>

* <span data-ttu-id="9c98d-119">X-MS-CLIENT-PRINCIPAL-NAME</span><span class="sxs-lookup"><span data-stu-id="9c98d-119">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="9c98d-120">X-MS-CLIENT-PRINCIPAL-ID</span><span class="sxs-lookup"><span data-stu-id="9c98d-120">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="9c98d-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="9c98d-121">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="9c98d-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="9c98d-122">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="9c98d-123">In un'API .NET, è possibile utilizzare hello `Authorize` attributo e per un'autorizzazione, è possibile scrivere facilmente codice in base alle attestazioni in quanto le informazioni sulle attestazioni vengono popolate automaticamente nelle classi di .NET.</span><span class="sxs-lookup"><span data-stu-id="9c98d-123">In a .NET API, you can use hello `Authorize` attribute, and for fine-grained authorization you can easily write code based on claims because claims information is populated for you in .NET classes.</span></span>

## <a name="multiple-protection-options"></a><span data-ttu-id="9c98d-124">Opzioni di protezione multiple</span><span class="sxs-lookup"><span data-stu-id="9c98d-124">Multiple protection options</span></span>
<span data-ttu-id="9c98d-125">Il servizio app può impedire alle richieste HTTP anonime di raggiungere l'app per le API, può passare tutte le richieste e convalidare i token per le richieste che li includono oppure può accettare tutte le richieste senza eseguire alcuna azione su di esse:</span><span class="sxs-lookup"><span data-stu-id="9c98d-125">App Service can prevent anonymous HTTP requests from reaching your API app, it can pass on all requests and validate tokens for requests that include them, or it can let through all requests without taking any action on them:</span></span>

1. <span data-ttu-id="9c98d-126">Consentire solo le richieste autenticate tooreach app per le API.</span><span class="sxs-lookup"><span data-stu-id="9c98d-126">Allow only authenticated requests tooreach your API app.</span></span>
   
    <span data-ttu-id="9c98d-127">Se una richiesta anonima viene ricevuta da un browser, il servizio App verrà reindirizzata automaticamente tooa pagina di accesso per il provider di autenticazione hello (Azure AD, Google, Twitter, e così via) che si sceglie.</span><span class="sxs-lookup"><span data-stu-id="9c98d-127">If an anonymous request is received from a browser, App Service will redirect tooa logon page for hello authentication provider (Azure AD, Google, Twitter, etc.) that you choose.</span></span> 
   
    <span data-ttu-id="9c98d-128">Con questa opzione, non è necessario toowrite qualsiasi codice di autenticazione affatto nell'app, e codice di autorizzazione viene semplificato poiché attestazioni più importanti hello fornite nelle intestazioni HTTP hello.</span><span class="sxs-lookup"><span data-stu-id="9c98d-128">With this option, you don't need toowrite any authentication code at all in your app, and authorization code is simplified because hello most important claims are provided in hello HTTP headers.</span></span>
2. <span data-ttu-id="9c98d-129">Consenti tutte le richieste tooreach app per le API, ma convalidare le richieste autenticate e passare le informazioni di autenticazione nelle intestazioni HTTP hello.</span><span class="sxs-lookup"><span data-stu-id="9c98d-129">Allow all requests tooreach your API app, but validate authenticated requests and pass along authentication information in hello HTTP headers.</span></span>
   
    <span data-ttu-id="9c98d-130">Questa opzione offre una maggiore flessibilità nella gestione delle richieste anonime, ma è necessario codice toowrite se si desidera che gli utenti anonimi tooprevent dall'utilizzo dell'API.</span><span class="sxs-lookup"><span data-stu-id="9c98d-130">This option gives you more flexibility in handling anonymous requests, but you have toowrite code if you want tooprevent anonymous users from using your API.</span></span> <span data-ttu-id="9c98d-131">Poiché le attestazioni più diffusi hello vengono passate nelle intestazioni hello di richieste HTTP, codice di autorizzazione è relativamente semplice.</span><span class="sxs-lookup"><span data-stu-id="9c98d-131">Since hello most popular claims are passed in hello headers of HTTP requests, authorization code is relatively simple.</span></span>
3. <span data-ttu-id="9c98d-132">Consenti tutte le richieste tooreach dell'API, eseguita alcuna operazione sulle informazioni di autenticazione nelle richieste hello.</span><span class="sxs-lookup"><span data-stu-id="9c98d-132">Allow all requests tooreach your API, take no action on authentication information in hello requests.</span></span>
   
    <span data-ttu-id="9c98d-133">Questa opzione lascia le attività di autenticazione e autorizzazione completamente il codice di applicazione tooyour hello.</span><span class="sxs-lookup"><span data-stu-id="9c98d-133">This option leaves hello tasks of authentication and authorization entirely up tooyour application code.</span></span>

<span data-ttu-id="9c98d-134">In hello [portale di Azure](https://portal.azure.com/), si seleziona l'opzione hello desiderato hello **autenticazione / autorizzazione** blade.</span><span class="sxs-lookup"><span data-stu-id="9c98d-134">In hello [Azure portal](https://portal.azure.com/), you select hello option you want on hello **Authentication / Authorization** blade.</span></span>

![](./media/app-service-api-authentication/authblade.png)

<span data-ttu-id="9c98d-135">Per le opzioni 1 e 2, attivare **l'autenticazione del servizio App**e in hello **tootake azione quando la richiesta non è autenticata** elenco a discesa scegliere **Accedi** o **Consenti richiesta (alcuna azione)**.</span><span class="sxs-lookup"><span data-stu-id="9c98d-135">For options 1 and 2, turn on **App Service Authentication**, and in hello **Action tootake when request is not authenticated** drop-down list choose **Log in** or **Allow request (no action)**.</span></span>  <span data-ttu-id="9c98d-136">Se si sceglie **Accedi**, si dispone di un provider di autenticazione toochoose e configurare tale provider.</span><span class="sxs-lookup"><span data-stu-id="9c98d-136">If you choose **Log in**, you have toochoose an authentication provider and configure that provider.</span></span>

![](./media/app-service-api-authentication/actiontotake.png)

<span data-ttu-id="9c98d-137">Per informazioni dettagliate su come l'autenticazione tooconfigure, vedere [come tooconfigure l'accesso di Azure Active Directory di servizio App applicazione toouse](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="9c98d-137">For detailed information about how tooconfigure authentication, see [How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md).</span></span> <span data-ttu-id="9c98d-138">articolo Hello applica tooAPI App come App per dispositivi mobili e fornisca un collegamento articoli tooother per hello altri provider di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="9c98d-138">hello article applies tooAPI apps as well as mobile apps, and it links tooother articles for hello other authentication providers.</span></span>

## <span data-ttu-id="9c98d-139"><a id="internal"></a> Autenticazione dell'account del servizio</span><span class="sxs-lookup"><span data-stu-id="9c98d-139"><a id="internal"></a> Service account authentication</span></span>
<span data-ttu-id="9c98d-140">L'autenticazione del servizio App funziona per scenari interni, ad esempio per la chiamata da un'API app tooanother API app.</span><span class="sxs-lookup"><span data-stu-id="9c98d-140">App Service authentication works for internal scenarios such as for calling from one API app tooanother API app.</span></span> <span data-ttu-id="9c98d-141">In questo scenario si ottiene un token usando le credenziali per un account del servizio invece delle credenziali dell'utente finale.</span><span class="sxs-lookup"><span data-stu-id="9c98d-141">In this scenario you get a token by using credentials for a service account instead of end user credentials.</span></span> <span data-ttu-id="9c98d-142">Un account del servizio è noto anche come *entità servizio* in Azure Active Directory e l'autenticazione che usa un account di questo tipo è nota anche come scenario da servizio a servizio.</span><span class="sxs-lookup"><span data-stu-id="9c98d-142">A service account is also known as a *service principal* in Azure Active Directory, and authentication using such an account is also known as a service-to-service scenario.</span></span> 

<span data-ttu-id="9c98d-143">Per gli scenari servizio-a-service, proteggere hello chiamata API app con Azure Active Directory e fornire un token di autorizzazione dell'entità servizio AAD quando si chiama app hello API.</span><span class="sxs-lookup"><span data-stu-id="9c98d-143">For service-to-service scenarios, protect hello called API app by using Azure Active Directory, and provide an AAD service principal authorization token when you call hello API app.</span></span> <span data-ttu-id="9c98d-144">Ottenere un token fornendo hello client ID e client secret da hello applicazione AAD.</span><span class="sxs-lookup"><span data-stu-id="9c98d-144">You get a token by providing hello client ID and client secret from hello AAD application.</span></span> <span data-ttu-id="9c98d-145">Nessun codice speciale solo Azure è richiesto, ad esempio true toobe utilizzato per la gestione dei token di hello Zumo di servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="9c98d-145">No special Azure-only code is required, such as used toobe true for handling hello Mobile Services Zumo token.</span></span> <span data-ttu-id="9c98d-146">Un esempio di questo scenario usando l'App per le API di ASP.NET è coperto da esercitazione hello [l'autenticazione dell'entità servizio per App per le API](app-service-api-dotnet-service-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="9c98d-146">An example of this scenario using ASP.NET API apps is covered by hello tutorial [Service principal authentication for API Apps](app-service-api-dotnet-service-principal-auth.md).</span></span>

<span data-ttu-id="9c98d-147">Se si desidera toohandle uno scenario di servizio-servizio senza utilizzare l'autenticazione del servizio App, è possibile utilizzare l'autenticazione di base o i certificati client.</span><span class="sxs-lookup"><span data-stu-id="9c98d-147">If you want toohandle a service-to-service scenario without using App Service authentication, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="9c98d-148">Per informazioni sui certificati client in Azure, vedere [come l'autenticazione reciproca TLS per le app Web tooConfigure](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="9c98d-148">For information about client certificates in Azure, see [How tooConfigure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="9c98d-149">Per informazioni sull'autenticazione di base in ASP.NET, vedere il blog sui [filtri di autenticazione nell'API Web 2 ASP.NET](http://www.asp.net/web-api/overview/security/authentication-filters).</span><span class="sxs-lookup"><span data-stu-id="9c98d-149">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="9c98d-150">L'autenticazione account di servizio da un'applicazione di servizio App logica app tooan API è un caso speciale e viene illustrato in [utilizzando l'API personalizzata ospitato nel servizio App con la logica app](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="9c98d-150">Service account authentication from an App Service logic app tooan API app is a special case that is explained in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <a name="mobile-client-authentication"></a><span data-ttu-id="9c98d-151">Autenticazione dei client per dispositivi mobili</span><span class="sxs-lookup"><span data-stu-id="9c98d-151">Mobile client authentication</span></span>
<span data-ttu-id="9c98d-152">Per informazioni sull'autenticazione toohandle da client mobili, vedere hello [documentazione sull'autenticazione dell'App per dispositivi mobili](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span><span class="sxs-lookup"><span data-stu-id="9c98d-152">For information about how toohandle authentication from mobile clients, see hello [documentation on authentication for mobile apps](../app-service-mobile/app-service-mobile-ios-get-started-users.md).</span></span> <span data-ttu-id="9c98d-153">L'autenticazione del servizio App funziona hello allo stesso modo per App per dispositivi mobili e App per le API.</span><span class="sxs-lookup"><span data-stu-id="9c98d-153">App Service authentication works hello same way for mobile apps and API apps.</span></span>

## <a name="more-information"></a><span data-ttu-id="9c98d-154">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="9c98d-154">More information</span></span>
<span data-ttu-id="9c98d-155">Per ulteriori informazioni sull'autenticazione e autorizzazione in Azure App Service, vedere hello seguenti risorse:</span><span class="sxs-lookup"><span data-stu-id="9c98d-155">For more information about authentication and authorization in Azure App Service, see hello following resources:</span></span>

* [<span data-ttu-id="9c98d-156">Espansione dell'autenticazione/autorizzazione del servizio App</span><span class="sxs-lookup"><span data-stu-id="9c98d-156">Expanding App Service authentication / authorization</span></span>](https://azure.microsoft.com/blog/announcing-app-service-authentication-authorization/)
* <span data-ttu-id="9c98d-157">[Come tooconfigure l'accesso di Azure Active Directory di servizio App applicazione toouse](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (include i collegamenti per altri provider di autenticazione nella parte superiore di hello della pagina hello).</span><span class="sxs-lookup"><span data-stu-id="9c98d-157">[How tooconfigure your App Service application toouse Azure Active Directory login](../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md) (Includes links for other authentication providers at hello top of hello page.)</span></span> 

<span data-ttu-id="9c98d-158">Per ulteriori informazioni su OAuth 2.0, OpenID Connect e JSON Web token (JWT), vedere hello seguenti risorse.</span><span class="sxs-lookup"><span data-stu-id="9c98d-158">For more information about OAuth 2.0, OpenID Connect, and JSON Web Tokens (JWT), see hello following resources.</span></span>

* [<span data-ttu-id="9c98d-159">Introduzione a OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="9c98d-159">Getting started with OAuth 2.0</span></span>](http://shop.oreilly.com/product/0636920021810.do "Getting Started with OAuth 2.0") 
* [<span data-ttu-id="9c98d-160">Introduzione tooOAuth2, OpenID Connect e JSON Web token (JWT) - corsi Pluralsight</span><span class="sxs-lookup"><span data-stu-id="9c98d-160">Introduction tooOAuth2, OpenID Connect and JSON Web Tokens (JWT) - Pluralsight Course</span></span>](http://www.pluralsight.com/courses/oauth2-json-web-tokens-openid-connect-introduction) 
* [<span data-ttu-id="9c98d-161">Creazione e protezione di un'API RESTful per più client in ASP.NET - corso PluralSight</span><span class="sxs-lookup"><span data-stu-id="9c98d-161">Building and Securing a RESTful API for Multiple Clients in ASP.NET - Pluralsight course</span></span>](http://www.pluralsight.com/courses/building-securing-restful-api-aspdotnet)

<span data-ttu-id="9c98d-162">Per ulteriori informazioni su Azure Active Directory, vedere hello seguenti risorse.</span><span class="sxs-lookup"><span data-stu-id="9c98d-162">For more information about Azure Active Directory, see hello following resources.</span></span>

* [<span data-ttu-id="9c98d-163">Scenari per Azure AD</span><span class="sxs-lookup"><span data-stu-id="9c98d-163">Azure AD scenarios</span></span>](http://aka.ms/aadscenarios)
* [<span data-ttu-id="9c98d-164">Guida per sviluppatori Azure AD</span><span class="sxs-lookup"><span data-stu-id="9c98d-164">Azure AD developers' guide</span></span>](http://aka.ms/aaddev)
* [<span data-ttu-id="9c98d-165">Esempi di Azure AD</span><span class="sxs-lookup"><span data-stu-id="9c98d-165">Azure AD samples</span></span>](http://aka.ms/aadsamples)

## <a name="next-steps"></a><span data-ttu-id="9c98d-166">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="9c98d-166">Next steps</span></span>
<span data-ttu-id="9c98d-167">Questo articolo ha illustrato le funzionalità di autenticazione e autorizzazione del servizio app che è possibile usare per le app per le API.</span><span class="sxs-lookup"><span data-stu-id="9c98d-167">This article has explained authentication and authorization features of App Service that you can use for API apps.</span></span> <span data-ttu-id="9c98d-168">esercitazione successiva di Hello nel recupero hello avviato serie Mostra come tooimplement [autenticazione utente in App per le API del servizio App](app-service-api-dotnet-user-principal-auth.md).</span><span class="sxs-lookup"><span data-stu-id="9c98d-168">hello next tutorial in hello getting started series shows how tooimplement [user authentication in App Service API Apps](app-service-api-dotnet-user-principal-auth.md).</span></span>

