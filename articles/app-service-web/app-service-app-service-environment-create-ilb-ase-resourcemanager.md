---
title: Come creare un ambiente del servizio app con servizio di bilanciamento del carico interno usando modelli di Azure Resource Manager | Documentazione Microsoft
description: Informazioni su come creare un ambiente del servizio app con servizio di bilanciamento del carico interno usando modelli di Azure Resource Manager.
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 091decb6-b0de-42a1-9f2f-c18d9b2e67df
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: stefsch
ms.openlocfilehash: 147ab76d38c8bbbf34d35ed6c2a194d97fe711ab
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="how-to-create-an-ilb-ase-using-azure-resource-manager-templates"></a><span data-ttu-id="d6743-103">Come creare un ambiente del servizio app con servizio di bilanciamento del carico interno usando modelli di Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d6743-103">How To Create an ILB ASE Using Azure Resource Manager Templates</span></span>

> [!NOTE] 
> <span data-ttu-id="d6743-104">Questo articolo fa riferimento all'ambiente del servizio app (versione 1),</span><span class="sxs-lookup"><span data-stu-id="d6743-104">This article is about the App Service Environment v1.</span></span> <span data-ttu-id="d6743-105">una nuova versione dell'ambiente del servizio app che, oltre ad essere più facile da usare, può essere eseguita in un'infrastruttura più potente.</span><span class="sxs-lookup"><span data-stu-id="d6743-105">There is a newer version of the App Service Environment that is easier to use and runs on more powerful infrastructure.</span></span> <span data-ttu-id="d6743-106">Per altre informazioni su questa nuova versione, vedere [Introduzione all'ambiente del servizio app](../app-service/app-service-environment/intro.md).</span><span class="sxs-lookup"><span data-stu-id="d6743-106">To learn more about the new version start with the [Introduction to the App  Service Environment](../app-service/app-service-environment/intro.md).</span></span>
>

## <a name="overview"></a><span data-ttu-id="d6743-107">Panoramica</span><span class="sxs-lookup"><span data-stu-id="d6743-107">Overview</span></span>
<span data-ttu-id="d6743-108">È possibile creare ambienti del servizio app con un indirizzo interno di rete virtuale anziché un indirizzo VIP pubblico.</span><span class="sxs-lookup"><span data-stu-id="d6743-108">App Service Environments can be created with a virtual network internal address instead of a public VIP.</span></span>  <span data-ttu-id="d6743-109">L'indirizzo interno viene messo a disposizione da un componente di Azure denominato servizio di bilanciamento del carico interno (ILB).</span><span class="sxs-lookup"><span data-stu-id="d6743-109">This internal address is provided by an Azure component called the internal load balancer (ILB).</span></span>  <span data-ttu-id="d6743-110">È possibile creare un ambiente del servizio app con servizio di bilanciamento del carico interno usando il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="d6743-110">An ILB ASE can be created using the Azure portal.</span></span>  <span data-ttu-id="d6743-111">L'ambiente può anche essere creato con l'automazione, usando i modelli di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d6743-111">It can also be created using automation by way of Azure Resource Manager templates.</span></span>  <span data-ttu-id="d6743-112">Questo articolo illustra i passaggi e la sintassi necessari per creare un ambiente del servizio app con servizio di bilanciamento del carico interno con i modelli di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d6743-112">This article walks through the steps and syntax needed to create an ILB ASE with Azure Resource Manager templates.</span></span>

<span data-ttu-id="d6743-113">L'automazione della creazione di un ambiente del servizio app con servizio di bilanciamento del carico interno prevede tre passaggi:</span><span class="sxs-lookup"><span data-stu-id="d6743-113">There are three steps involved in automating creation of an ILB ASE:</span></span>

1. <span data-ttu-id="d6743-114">Viene prima creato l'ambiente del servizio app di base in una rete virtuale usando un indirizzo di servizio di bilanciamento del carico interno anziché un indirizzo VIP pubblico.</span><span class="sxs-lookup"><span data-stu-id="d6743-114">First the base ASE is created in a virtual network using an internal load balancer address instead of a public VIP.</span></span>  <span data-ttu-id="d6743-115">Nell'ambito di questo passaggio viene assegnato un nome di dominio radice all'ambiente del servizio app con servizio di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="d6743-115">As part of this step, a root domain name is assigned to the ILB ASE.</span></span>
2. <span data-ttu-id="d6743-116">Dopo aver creato l'ambiente del servizio app con servizio di bilanciamento del carico interno, viene caricato un certificato SSL.</span><span class="sxs-lookup"><span data-stu-id="d6743-116">Once the ILB ASE is created, an SSL certificate is uploaded.</span></span>  
3. <span data-ttu-id="d6743-117">Il certificato SSL caricato viene assegnato in modo esplicito all'ambiente del servizio app con servizio di bilanciamento del carico interno come certificato "predefinito".</span><span class="sxs-lookup"><span data-stu-id="d6743-117">The uploaded SSL certificate is explicitly assigned to the ILB ASE as its "default" SSL certificate.</span></span>  <span data-ttu-id="d6743-118">Questo certificato SSL verrà usato per il traffico SSL verso le app nell'ambiente del servizio app con servizio di bilanciamento del carico interno quando si usa il dominio radice comune assegnato all'ambiente del servizio app, ad esempio https://someapp.mycustomrootcomain.com.</span><span class="sxs-lookup"><span data-stu-id="d6743-118">This SSL certificate will be used for SSL traffic to apps on the ILB ASE when the apps are addressed using the common root domain assigned to the ASE (e.g. https://someapp.mycustomrootcomain.com)</span></span>

## <a name="creating-the-base-ilb-ase"></a><span data-ttu-id="d6743-119">Creazione dell'ambiente del servizio app con servizio di bilanciamento del carico interno</span><span class="sxs-lookup"><span data-stu-id="d6743-119">Creating the Base ILB ASE</span></span>
<span data-ttu-id="d6743-120">Un modello di Azure Resource Manager di esempio e il file dei parametri associati sono disponibili in GitHub [qui][quickstartilbasecreate].</span><span class="sxs-lookup"><span data-stu-id="d6743-120">An example Azure Resource Manager template, and its associated parameters file, are available on GitHub [here][quickstartilbasecreate].</span></span>

<span data-ttu-id="d6743-121">La maggior parte dei parametri del file *azuredeploy.parameters.json* è comune alla creazione sia dell'ambiente del servizio app con servizio di bilanciamento del carico interno che dell'ambiente del servizio app associato a un indirizzo VIP pubblico.</span><span class="sxs-lookup"><span data-stu-id="d6743-121">Most of the parameters in the *azuredeploy.parameters.json* file are common to creating both ILB ASEs, as well as ASEs bound to a public VIP.</span></span>  <span data-ttu-id="d6743-122">L'elenco seguente indica parametri importanti o specifici per la creazione di un ambiente del servizio app con servizio di bilanciamento del carico interno:</span><span class="sxs-lookup"><span data-stu-id="d6743-122">The list below calls out parameters of special note, or that are unique, when creating an ILB ASE:</span></span>

* <span data-ttu-id="d6743-123">*interalLoadBalancingMode*: impostare nella maggior parte dei casi su 3, a indicare che sia il traffico HTTP/HTTPS sulle porte 80/443 che le porte dei canali di controllo/dati ascoltati dal servizio FTP nell'ambiente del servizio app saranno associati a un indirizzo interno della rete virtuale allocato dal servizio di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="d6743-123">*interalLoadBalancingMode*:  In most cases set this to 3, which means both HTTP/HTTPS traffic on ports 80/443, and the control/data channel ports listened to by the FTP service on the ASE, will be bound to an ILB allocated virtual network internal address.</span></span>  <span data-ttu-id="d6743-124">Se questa proprietà viene invece impostata su 2, solo le porte correlate al servizio FTP, ovvero i canali di controllo e i canali dei dati, saranno associate a un indirizzo del servizio di bilanciamento del carico interno, mentre il traffico HTTP/HTTPS rimarrà associato all'indirizzo VIP pubblico.</span><span class="sxs-lookup"><span data-stu-id="d6743-124">If this property is instead set to 2, then only the FTP service related ports (both control and data channels) will be bound to an ILB address, while the HTTP/HTTPS traffic will remain on the public VIP.</span></span>
* <span data-ttu-id="d6743-125">*dnsSuffix*: questo parametro indica il dominio radice predefinito che verrà assegnato all'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="d6743-125">*dnsSuffix*:  This parameter defines the default root domain that will be assigned to the ASE.</span></span>  <span data-ttu-id="d6743-126">Nella variante pubblica del servizio app di Azure, il dominio radice predefinito per tutte le app Web è *azurewebsites.net*.</span><span class="sxs-lookup"><span data-stu-id="d6743-126">In the public variation of Azure App Service, the default root domain for all web apps is *azurewebsites.net*.</span></span>  <span data-ttu-id="d6743-127">Poiché tuttavia un ambiente del servizio app con servizio di bilanciamento del carico interno è interno alla rete virtuale di un cliente, non ha senso usare il dominio radice predefinito del servizio pubblico.</span><span class="sxs-lookup"><span data-stu-id="d6743-127">However since an ILB ASE is internal to a customer's virtual network, it doesn't make sense to use the public service's default root domain.</span></span>  <span data-ttu-id="d6743-128">Un ambiente del servizio app con servizio di bilanciamento del carico interno deve invece avere un dominio radice predefinito appropriato per la rete virtuale interna dell'azienda.</span><span class="sxs-lookup"><span data-stu-id="d6743-128">Instead, an ILB ASE should have a default root domain that makes sense for use within a company's internal virtual network.</span></span>  <span data-ttu-id="d6743-129">Un'ipotetica azienda Contoso Corporation potrebbe ad esempio usare un dominio radice predefinito *internal-contoso.com* per le app che devono essere risolvibili e accessibili solo nella rete virtuale di Contoso.</span><span class="sxs-lookup"><span data-stu-id="d6743-129">For example, a hypothetical Contoso Corporation might use a default root domain of *internal-contoso.com* for apps that are intended to only be resolvable and accessible within Contoso's virtual network.</span></span> 
* <span data-ttu-id="d6743-130">*ipSslAddressCount*: questo parametro viene automaticamente impostato sul valore predefinito di 0 nel file *azuredeploy.json* perché gli ambienti del servizio app con servizio di bilanciamento del carico interno hanno un solo indirizzo del servizio di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="d6743-130">*ipSslAddressCount*:  This parameter is automatically defaulted to a value of 0 in the *azuredeploy.json* file because ILB ASEs only have a single ILB address.</span></span>  <span data-ttu-id="d6743-131">Non sono disponibili indirizzi IP SSL espliciti per un ambiente del servizio app con servizio di bilanciamento del carico interno, quindi il pool di indirizzi IP SSL per un ambiente del servizio app con servizio di bilanciamento del carico interno deve essere impostato su zero, in caso contrario si verificherà un errore di provisioning.</span><span class="sxs-lookup"><span data-stu-id="d6743-131">There are no explicit IP-SSL addresses for an ILB ASE, and hence the IP-SSL address pool for an ILB ASE must be set to zero, otherwise a provisioning error will occur.</span></span> 

<span data-ttu-id="d6743-132">Dopo che il file *azuredeploy.parameters.json* è stato compilato per un ambiente del servizio app con servizio di bilanciamento del carico interno, l'ambiente potrà essere quindi creato con il seguente frammento di codice Powershell.</span><span class="sxs-lookup"><span data-stu-id="d6743-132">Once the *azuredeploy.parameters.json* file has been filled in for an ILB ASE, the ILB ASE can then be created using the following Powershell code snippet.</span></span>  <span data-ttu-id="d6743-133">Modificare i parametri PATH dei file per fare in modo che corrispondano al percorso dei file dei modelli di Azure Resource Manager nel computer.</span><span class="sxs-lookup"><span data-stu-id="d6743-133">Change the file PATHs to match where the Azure Resource Manager template files are located on your machine.</span></span>  <span data-ttu-id="d6743-134">Indicare anche i valori per il nome della distribuzione di Azure Resource Manager e il nome del gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="d6743-134">Also remember to supply your own values for the Azure Resource Manager deployment name, and resource group name.</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="d6743-135">Dopo aver inviato il modello di Azure Resource Manager, la creazione dell'ambiente del servizio app con servizio di bilanciamento del carico interno richiederà alcune ore.</span><span class="sxs-lookup"><span data-stu-id="d6743-135">After the Azure Resource Manager template is submitted it will take a few hours for the ILB ASE to be created.</span></span>  <span data-ttu-id="d6743-136">Al termine della creazione, l'ambiente del servizio app con servizio di bilanciamento del carico interno verrà visualizzato nel portale nell'elenco di ambienti del servizio app per la sottoscrizione che ha attivato la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="d6743-136">Once the creation completes, the ILB ASE will show up in the portal UX in the list of App Service Environments for the subscription that triggered the deployment.</span></span>

## <a name="uploading-and-configuring-the-default-ssl-certificate"></a><span data-ttu-id="d6743-137">Caricamento e configurazione del certificato SSL "predefinito"</span><span class="sxs-lookup"><span data-stu-id="d6743-137">Uploading and Configuring the "Default" SSL Certificate</span></span>
<span data-ttu-id="d6743-138">Dopo aver creato l'ambiente del servizio app con servizio di bilanciamento del carico interno è necessario associare un certificato SSL all'ambiente del servizio app come certificato SSL "predefinito", per stabilire le connessioni SSL alle app.</span><span class="sxs-lookup"><span data-stu-id="d6743-138">Once the ILB ASE is created, an SSL certificate should be associated with the ASE as the "default" SSL certificate use for establishing SSL connections to apps.</span></span>  <span data-ttu-id="d6743-139">Proseguendo con l'esempio dell'ipotetica Contoso Corporation, se il suffisso DNS predefinito dell'ambiente del servizio app è *internal-contoso.com*, una connessione a *https://some-random-app.internal-contoso.com* richiede un certificato SSL valido per **.internal-contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="d6743-139">Continuing with the hypothetical Contoso Corporation example, if the ASE's default DNS suffix is *internal-contoso.com*, then a connection to *https://some-random-app.internal-contoso.com* requires an SSL certificate that is valid for **.internal-contoso.com*.</span></span> 

<span data-ttu-id="d6743-140">Esistono diversi modi per ottenere un certificato SSL valido, tra cui CA interne, l'acquisto di un certificato da un'autorità di certificazione esterna e l'uso di un certificato autofirmato.</span><span class="sxs-lookup"><span data-stu-id="d6743-140">There are a variety of ways to obtain a valid SSL certificate including internal CAs, purchasing a certificate from an external issuer, and using a self-signed certificate.</span></span>  <span data-ttu-id="d6743-141">Indipendentemente dall'origine del certificato SSL è necessario configurare correttamente gli attributi del certificato seguenti:</span><span class="sxs-lookup"><span data-stu-id="d6743-141">Regardless of the source of the SSL certificate, the following certificate attributes need to be configured properly:</span></span>

* <span data-ttu-id="d6743-142">*Subject*: questo attributo deve essere impostato su **.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="d6743-142">*Subject*:  This attribute must be set to **.your-root-domain-here.com*</span></span>
* <span data-ttu-id="d6743-143">*Nome alternativo soggetto*: questo attributo deve includere sia **.your-root-domain-here.com* che **.scm.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="d6743-143">*Subject Alternative Name*:  This attribute must include both **.your-root-domain-here.com*, and **.scm.your-root-domain-here.com*.</span></span>  <span data-ttu-id="d6743-144">La seconda voce è necessaria perché le connessioni SSL al sito SCM/Kudu associato a ogni app verranno eseguite con un indirizzo nel formato *your-app-name.scm.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="d6743-144">The reason for the second entry is that SSL connections to the SCM/Kudu site associated with each app will be made using an address of the form *your-app-name.scm.your-root-domain-here.com*.</span></span>

<span data-ttu-id="d6743-145">Dopo aver ottenuto un certificato SSL valido sono necessari altri due passaggi preliminari.</span><span class="sxs-lookup"><span data-stu-id="d6743-145">With a valid SSL certificate in hand, two additional preparatory steps are needed.</span></span>  <span data-ttu-id="d6743-146">Il certificato SSL deve essere convertito/salvato come file con estensione pfx.</span><span class="sxs-lookup"><span data-stu-id="d6743-146">The SSL certificate needs to be converted/saved as a .pfx file.</span></span>  <span data-ttu-id="d6743-147">Il file con estensione pfx deve includere tutti i certificati intermedi e radice ed essere protetto con una password.</span><span class="sxs-lookup"><span data-stu-id="d6743-147">Remember that the .pfx file needs to include all intermediate and root certificates, and also needs to be secured with a password.</span></span>

<span data-ttu-id="d6743-148">Il file con estensione pfx dovrà quindi essere convertito in una stringa con codifica Base64 perché il certificato SSL verrà caricato usando un modello di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d6743-148">Then the resultant .pfx file needs to be converted into a base64 string because the SSL certificate will be uploaded using an Azure Resource Manager template.</span></span>  <span data-ttu-id="d6743-149">Poiché i modelli di Azure Resource Manager sono file di testo, il file con estensione pfx deve essere convertito in una stringa con codifica Base64 per essere incluso come parametro del modello.</span><span class="sxs-lookup"><span data-stu-id="d6743-149">Since Azure Resource Manager templates are text files, the .pfx file needs to be converted into a base64 string so it can be included as a parameter of the template.</span></span>

<span data-ttu-id="d6743-150">Il frammento di codice Powershell riportato di seguito illustra un esempio di generazione di un certificato autofirmato, esportazione del certificato come file con estensione pfx, conversione del file con estensione pfx in una stringa con codifica Base64 e quindi salvataggio della stringa con codifica Base64 in un file separato.</span><span class="sxs-lookup"><span data-stu-id="d6743-150">The Powershell code snippet below shows an example of generating a self-signed certificate, exporting the certificate as a .pfx file, converting the .pfx file into a base64 encoded string, and then saving the base64 encoded string to a separate file.</span></span>  <span data-ttu-id="d6743-151">Il codice Powershell per la codifica Base64 è stato adattato dal [blog di script di Powershell][examplebase64encoding].</span><span class="sxs-lookup"><span data-stu-id="d6743-151">The Powershell code for base64 encoding was adapted from the [Powershell Scripts Blog][examplebase64encoding].</span></span>

    $certificate = New-SelfSignedCertificate -certstorelocation cert:\localmachine\my -dnsname "*.internal-contoso.com","*.scm.internal-contoso.com"

    $certThumbprint = "cert:\localMachine\my\" + $certificate.Thumbprint
    $password = ConvertTo-SecureString -String "CHANGETHISPASSWORD" -Force -AsPlainText

    $fileName = "exportedcert.pfx"
    Export-PfxCertificate -cert $certThumbprint -FilePath $fileName -Password $password     

    $fileContentBytes = get-content -encoding byte $fileName
    $fileContentEncoded = [System.Convert]::ToBase64String($fileContentBytes)
    $fileContentEncoded | set-content ($fileName + ".b64")

<span data-ttu-id="d6743-152">Dopo aver generato il certificato SSL e averlo convertito in una stringa con codifica Base64, è possibile usare il modello di esempio di Azure Resource Manager disponibile in GitHub per la [configurazione del certificato SSL predefinito][configuringDefaultSSLCertificate].</span><span class="sxs-lookup"><span data-stu-id="d6743-152">Once the SSL certificate has been successfully generated and converted to a base64 encoded string, the example Azure Resource Manager template on GitHub for [configuring the default SSL certificate][configuringDefaultSSLCertificate] can be used.</span></span>

<span data-ttu-id="d6743-153">I parametri del file *azuredeploy.parameters.json* sono elencati di seguito:</span><span class="sxs-lookup"><span data-stu-id="d6743-153">The parameters in the *azuredeploy.parameters.json* file are listed below:</span></span>

* <span data-ttu-id="d6743-154">*appServiceEnvironmentName*: nome dell'ambiente del servizio app con servizio di bilanciamento del carico interno in fase di configurazione.</span><span class="sxs-lookup"><span data-stu-id="d6743-154">*appServiceEnvironmentName*:  The name of the ILB ASE being configured.</span></span>
* <span data-ttu-id="d6743-155">*existingAseLocation*: stringa di testo contenente l'area di Azure in cui è stato distribuito l'ambiente del servizio app con servizio di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="d6743-155">*existingAseLocation*:  Text string containing the Azure region where the ILB ASE was deployed.</span></span>  <span data-ttu-id="d6743-156">Ad esempio "Stati Uniti centro-meridionali".</span><span class="sxs-lookup"><span data-stu-id="d6743-156">For example:  "South Central US".</span></span>
* <span data-ttu-id="d6743-157">*pfxBlobString*: rappresentazione del file con estensione pfx sotto forma di stringa con codifica Base64.</span><span class="sxs-lookup"><span data-stu-id="d6743-157">*pfxBlobString*:  The based64 encoded string representation of the .pfx file.</span></span>  <span data-ttu-id="d6743-158">Usando il frammento di codice indicato in precedenza, la stringa contenuta in "exportedcert.pfx.b64" dovrà essere copiata e incollata come valore dell'attributo *pfxBlobString* .</span><span class="sxs-lookup"><span data-stu-id="d6743-158">Using the code snippet shown earlier, you would copy the string contained in "exportedcert.pfx.b64" and paste it in as the value of the *pfxBlobString* attribute.</span></span>
* <span data-ttu-id="d6743-159">*password*: password usata per la protezione del file con estensione pfx.</span><span class="sxs-lookup"><span data-stu-id="d6743-159">*password*:  The password used to secure the .pfx file.</span></span>
* <span data-ttu-id="d6743-160">*certificateThumbprint*: identificazione personale del certificato.</span><span class="sxs-lookup"><span data-stu-id="d6743-160">*certificateThumbprint*:  The certificate's thumbprint.</span></span>  <span data-ttu-id="d6743-161">Se si recupera questo valore da Powershell, ad esempio *$certificate.Thumbprint* nel frammento di codice precedente, è possibile usare il valore così com'è.</span><span class="sxs-lookup"><span data-stu-id="d6743-161">If you retrieve this value from Powershell (e.g. *$certificate.Thumbprint* from the earlier code snippet), you can use the value as-is.</span></span>  <span data-ttu-id="d6743-162">Se tuttavia si copia il valore dalla finestra di dialogo del certificato di Windows, rimuovere gli spazi estranei.</span><span class="sxs-lookup"><span data-stu-id="d6743-162">However if you copy the value from the Windows certificate dialog, remember to strip out the extraneous spaces.</span></span>  <span data-ttu-id="d6743-163">Il valore di *certificateThumbprint* sarà simile a AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span><span class="sxs-lookup"><span data-stu-id="d6743-163">The *certificateThumbprint* should look something like:  AF3143EB61D43F6727842115BB7F17BBCECAECAE</span></span>
* <span data-ttu-id="d6743-164">*certificateName*: identificatore di stringa descrittivo scelto dall'utente per identificare il certificato.</span><span class="sxs-lookup"><span data-stu-id="d6743-164">*certificateName*:  A friendly string identifier of your own choosing used to identity the certificate.</span></span>  <span data-ttu-id="d6743-165">Il nome viene usato nell'ambito dell'identificatore univoco di Azure Resource Manager per l'entità *Microsoft.Web/certificates* che rappresenta il certificato SSL.</span><span class="sxs-lookup"><span data-stu-id="d6743-165">The name is used as part of the unique Azure Resource Manager identifier for the *Microsoft.Web/certificates* entity representing the SSL certificate.</span></span>  <span data-ttu-id="d6743-166">Il nome **deve** terminare con il suffisso seguente: \_yourASENameHere_InternalLoadBalancingASE.</span><span class="sxs-lookup"><span data-stu-id="d6743-166">The name **must** end with the following suffix:  \_yourASENameHere_InternalLoadBalancingASE.</span></span>  <span data-ttu-id="d6743-167">Questo suffisso viene usato dal portale per indicare che il certificato è usato per la protezione di un ambiente del servizio app abilitato al bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="d6743-167">This suffix is used by the portal as an indicator that the certificate is used for securing an ILB-enabled ASE.</span></span>

<span data-ttu-id="d6743-168">Un esempio abbreviato di *azuredeploy.parameters.json* è illustrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="d6743-168">An abbreviated example of *azuredeploy.parameters.json* is shown below:</span></span>

    {
         "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json",
         "contentVersion": "1.0.0.0",
         "parameters": {
              "appServiceEnvironmentName": {
                   "value": "yourASENameHere"
              },
              "existingAseLocation": {
                   "value": "East US 2"
              },
              "pfxBlobString": {
                   "value": "MIIKcAIBAz...snip...snip...pkCAgfQ"
              },
              "password": {
                   "value": "PASSWORDGOESHERE"
              },
              "certificateThumbprint": {
                   "value": "AF3143EB61D43F6727842115BB7F17BBCECAECAE"
              },
              "certificateName": {
                   "value": "DefaultCertificateFor_yourASENameHere_InternalLoadBalancingASE"
              }
         }
    }

<span data-ttu-id="d6743-169">Dopo che il file *azuredeploy.parameters.json* è stato compilato, il certificato SSL predefinito può essere configurato con il frammento di codice Powershell seguente.</span><span class="sxs-lookup"><span data-stu-id="d6743-169">Once the *azuredeploy.parameters.json* file has been filled in, the default SSL certificate can be configured using the following Powershell code snippet.</span></span>  <span data-ttu-id="d6743-170">Modificare i parametri PATH dei file per fare in modo che corrispondano al percorso dei file dei modelli di Azure Resource Manager nel computer.</span><span class="sxs-lookup"><span data-stu-id="d6743-170">Change the file PATHs to match where the Azure Resource Manager template files are located on your machine.</span></span>  <span data-ttu-id="d6743-171">Indicare anche i valori per il nome della distribuzione di Azure Resource Manager e il nome del gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="d6743-171">Also remember to supply your own values for the Azure Resource Manager deployment name, and resource group name.</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="d6743-172">Dopo l'invio del modello di Azure Resource Manager, l'applicazione della modifica richiederà all'incirca 40 minuti per ogni front-end dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="d6743-172">After the Azure Resource Manager template is submitted it will take roughly forty minutes minutes per ASE front-end to apply the change.</span></span>  <span data-ttu-id="d6743-173">Per un ambiente del servizio app di dimensioni predefinite che usa due front-end, ad esempio, l'operazione richiederà all'incirca un'ora e venti minuti.</span><span class="sxs-lookup"><span data-stu-id="d6743-173">For example, with a default sized ASE using two front-ends, the template will take around one hour and twenty minutes to complete.</span></span>  <span data-ttu-id="d6743-174">Durante l'esecuzione del modello, l'ambiente del servizio app non potrà essere ridimensionato.</span><span class="sxs-lookup"><span data-stu-id="d6743-174">While the template is running the ASE will not be able to scaled.</span></span>  

<span data-ttu-id="d6743-175">Al termine dell'esecuzione del modello sarà possibile accedere alle app nell'ambiente del servizio app con servizio di bilanciamento del carico interno tramite HTTPS e le connessioni saranno protette con il certificato SSL predefinito.</span><span class="sxs-lookup"><span data-stu-id="d6743-175">Once the template completes, apps on the ILB ASE can be accessed over HTTPS and the connections will be secured using the default SSL certificate.</span></span>  <span data-ttu-id="d6743-176">Il certificato SSL predefinito verrà usato quando le app nell'ambiente del servizio app con servizio di bilanciamento del carico interno vengono indirizzate usando una combinazione di nome applicazione e nome host predefinito.</span><span class="sxs-lookup"><span data-stu-id="d6743-176">The default SSL certificate will be used when apps on the ILB ASE are addressed using a combination of the application name plus the default hostname.</span></span>  <span data-ttu-id="d6743-177">*https://mycustomapp.internal-contoso.com*, ad esempio, userà il certificato SSL predefinito per **.internal-contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="d6743-177">For example *https://mycustomapp.internal-contoso.com* would use the default SSL certificate for **.internal-contoso.com*.</span></span>

<span data-ttu-id="d6743-178">Proprio come le app in esecuzione nel servizio multi-tenant pubblico, gli sviluppatori possono tuttavia anche configurare nomi host personalizzati e associazioni univoche a certificati SNI SSL per le singole app.</span><span class="sxs-lookup"><span data-stu-id="d6743-178">However, just like apps running on the public multi-tenant service, developers can also configure custom host names for individual apps, and then configure unique SNI SSL certificate bindings for individual apps.</span></span>  

## <a name="getting-started"></a><span data-ttu-id="d6743-179">Introduzione</span><span class="sxs-lookup"><span data-stu-id="d6743-179">Getting started</span></span>
<span data-ttu-id="d6743-180">Per iniziare a usare gli ambienti del servizio app, vedere [Introduzione all'ambiente del servizio app](app-service-app-service-environment-intro.md)</span><span class="sxs-lookup"><span data-stu-id="d6743-180">To get started with App Service Environments, see [Introduction to App Service Environment](app-service-app-service-environment-intro.md)</span></span>

<span data-ttu-id="d6743-181">Tutti gli articoli e le procedure sugli ambienti del servizio app sono disponibili nel [file LEGGIMI per gli ambienti di servizio dell'applicazione](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="d6743-181">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[quickstartilbasecreate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-create/
[examplebase64encoding]: http://powershellscripts.blogspot.com/2007/02/base64-encode-file.html 
[configuringDefaultSSLCertificate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl/ 

