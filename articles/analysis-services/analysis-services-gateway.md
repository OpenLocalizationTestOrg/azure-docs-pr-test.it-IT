---
title: gateway dati locale aaaOn | Documenti Microsoft
description: "Un gateway locale è necessario se il server Analysis Services in Azure si connetta a origini dati locali tooon."
services: analysis-services
documentationcenter: 
author: minewiskan
manager: erikre
editor: 
tags: 
ms.assetid: cd596155-b608-4a34-935e-e45c95d884a9
ms.service: analysis-services
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: na
ms.date: 08/21/2017
ms.author: owend
ms.openlocfilehash: fc7b9c69e6f81b41deb7a5d6d963225593845d84
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="connecting-tooon-premises-data-sources-with-azure-on-premises-data-gateway"></a><span data-ttu-id="52612-103">La connessione a origini dati locali tooon con Gateway dati locale in Azure</span><span class="sxs-lookup"><span data-stu-id="52612-103">Connecting tooon-premises data sources with Azure On-premises Data Gateway</span></span>
<span data-ttu-id="52612-104">gateway dati locale di Hello funge da bridge per consentire il trasferimento protetto dei dati tra origini dati locali e i server di Analysis Services di Azure nel cloud hello.</span><span class="sxs-lookup"><span data-stu-id="52612-104">hello on-premises data gateway acts as a bridge, providing secure data transfer between on-premises data sources and your Azure Analysis Services servers in hello cloud.</span></span> <span data-ttu-id="52612-105">In aggiunta tooworking con più server di Azure Analysis Services in hello stessa area, una versione più recente di hello del gateway hello funziona anche con Microsoft Flow, Power BI, le app di Power e App Azure per la logica.</span><span class="sxs-lookup"><span data-stu-id="52612-105">In addition tooworking with multiple Azure Analysis Services servers in hello same region, hello latest version of hello gateway also works with Azure Logic Apps, Power BI, Power Apps, and Microsoft Flow.</span></span> <span data-ttu-id="52612-106">È possibile associare più servizi in hello stessa area con un singolo gateway.</span><span class="sxs-lookup"><span data-stu-id="52612-106">You can associate multiple services in hello same region with a single gateway.</span></span> 

 <span data-ttu-id="52612-107">Azure Analysis Services richiede una risorsa per il gateway in hello stessa area.</span><span class="sxs-lookup"><span data-stu-id="52612-107">Azure Analysis Services requires a gateway resource in hello same region.</span></span> <span data-ttu-id="52612-108">Ad esempio, se sono presenti server di Analysis Services di Azure nell'area Stati Uniti orientali 2 hello, è necessario una risorsa gateway nell'area Stati Uniti orientali 2 hello.</span><span class="sxs-lookup"><span data-stu-id="52612-108">For example, if you have Azure Analysis Services servers in hello East US 2 region, you need a gateway resource in hello East US 2 region.</span></span> <span data-ttu-id="52612-109">Più server negli Stati Uniti orientali 2 possono utilizzare hello stesso gateway.</span><span class="sxs-lookup"><span data-stu-id="52612-109">Multiple servers in East US 2 can use hello same gateway.</span></span>

<span data-ttu-id="52612-110">Ottenere il programma di installazione con hello gateway hello prima volta è un processo composto da quattro parti:</span><span class="sxs-lookup"><span data-stu-id="52612-110">Getting setup with hello gateway hello first time is a four-part process:</span></span>

- <span data-ttu-id="52612-111">**Scaricare ed eseguire il programma di installazione**: questo passaggio consente di installare un servizio gateway su un computer all'interno dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="52612-111">**Download and run setup** - This step installs a gateway service on a computer in your organization.</span></span>

- <span data-ttu-id="52612-112">**Registrare il gateway** : In questo passaggio, si specifica un nome e la chiave per il gateway, ripristino e selezionare un'area, registrare il gateway con hello servizio Cloud Gateway.</span><span class="sxs-lookup"><span data-stu-id="52612-112">**Register your gateway** - In this step, you specify a name and recovery key for your gateway, and select a region, registering your gateway with hello Gateway Cloud Service.</span></span>

- <span data-ttu-id="52612-113">**Creare una risorsa per il gateway in Azure**: in questo passaggio, si crea una risorsa per il gateway nella sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="52612-113">**Create a gateway resource in Azure** - In this step, you create a gateway resource in your Azure subscription.</span></span>

- <span data-ttu-id="52612-114">**Connettere il server gateway tooyour** -dopo aver creato una risorsa gateway nella sottoscrizione, è possibile avviare la connessione tooit del server.</span><span class="sxs-lookup"><span data-stu-id="52612-114">**Connect your servers tooyour gateway resource** - Once you have a gateway resource in your subscription, you can begin connecting your servers tooit.</span></span>

<span data-ttu-id="52612-115">Dopo aver creato una risorsa per il gateway configurata per la sottoscrizione, è possibile connettersi a più server e tooit altri servizi.</span><span class="sxs-lookup"><span data-stu-id="52612-115">Once you have a gateway resource configured for your subscription, you can connect multiple servers, and other services tooit.</span></span> <span data-ttu-id="52612-116">Solo necessario tooinstall un diverso gateway e creare risorse aggiuntive gateway se si dispone di server o altri servizi in un'area diversa.</span><span class="sxs-lookup"><span data-stu-id="52612-116">You only need tooinstall a different gateway and create additional gateway resources if you have servers or other services in a different region.</span></span>

<span data-ttu-id="52612-117">tooget adesso, vedere [installare e configurare il gateway dati locale](analysis-services-gateway-install.md).</span><span class="sxs-lookup"><span data-stu-id="52612-117">tooget started right away, see [Install and configure on-premises data gateway](analysis-services-gateway-install.md).</span></span>

## <span data-ttu-id="52612-118"><a name="how-it-works"> </a>Funzionamento</span><span class="sxs-lookup"><span data-stu-id="52612-118"><a name="how-it-works"> </a>How it works</span></span>
<span data-ttu-id="52612-119">gateway Hello installare in un computer dell'organizzazione viene eseguito come un servizio Windows, **gateway dati locale**.</span><span class="sxs-lookup"><span data-stu-id="52612-119">hello gateway you install on a computer in your organization runs as a Windows service, **On-premises data gateway**.</span></span> <span data-ttu-id="52612-120">Questo servizio locale è registrato con il servizio Cloud Gateway tramite Azure Service Bus hello.</span><span class="sxs-lookup"><span data-stu-id="52612-120">This local service is registered with hello Gateway Cloud Service through Azure Service Bus.</span></span> <span data-ttu-id="52612-121">È quindi possibile creare una servizio Cloud della risorsa per il gateway per la sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="52612-121">You then create a gateway resource Gateway Cloud Service for your Azure subscription.</span></span> <span data-ttu-id="52612-122">I servizi di Azure Analysis Server vengono quindi connessi tooyour risorsa per il gateway.</span><span class="sxs-lookup"><span data-stu-id="52612-122">Your Azure Analysis Services servers are then connected tooyour gateway resource.</span></span> <span data-ttu-id="52612-123">Quando i modelli in tooyour di tooconnect necessario il server locale origini dati per le query o elaborazione, una query e i dati del flusso attraversa hello gateway risorsa, Azure Service Bus, hello il servizio gateway dati locale e le origini dati.</span><span class="sxs-lookup"><span data-stu-id="52612-123">When models on your server need tooconnect tooyour on-premises data sources for queries or processing, a query and data flow traverses hello gateway resource, Azure Service Bus, hello local on-premises data gateway service, and your data sources.</span></span> 

![Funzionamento](./media/analysis-services-gateway/aas-gateway-how-it-works.png)

<span data-ttu-id="52612-125">Query e flusso di dati:</span><span class="sxs-lookup"><span data-stu-id="52612-125">Queries and data flow:</span></span>

1. <span data-ttu-id="52612-126">Una query viene creata dal servizio cloud di hello con credenziali crittografato hello per l'origine dati locale di hello.</span><span class="sxs-lookup"><span data-stu-id="52612-126">A query is created by hello cloud service with hello encrypted credentials for hello on-premises data source.</span></span> <span data-ttu-id="52612-127">È quindi inviato coda tooa per tooprocess gateway hello.</span><span class="sxs-lookup"><span data-stu-id="52612-127">It's then sent tooa queue for hello gateway tooprocess.</span></span>
2. <span data-ttu-id="52612-128">il servizio cloud gateway Hello analizza query hello e inserisce hello richiesta toohello [Azure Service Bus](https://azure.microsoft.com/documentation/services/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="52612-128">hello gateway cloud service analyzes hello query and pushes hello request toohello [Azure Service Bus](https://azure.microsoft.com/documentation/services/service-bus/).</span></span>
3. <span data-ttu-id="52612-129">gateway dati locale di Hello esegue il polling hello Azure Service Bus per le richieste in sospeso.</span><span class="sxs-lookup"><span data-stu-id="52612-129">hello on-premises data gateway polls hello Azure Service Bus for pending requests.</span></span>
4. <span data-ttu-id="52612-130">gateway Hello Ottiene hello query, decrittografa le credenziali di hello e si connette a origini dati toohello con tali credenziali.</span><span class="sxs-lookup"><span data-stu-id="52612-130">hello gateway gets hello query, decrypts hello credentials, and connects toohello data sources with those credentials.</span></span>
5. <span data-ttu-id="52612-131">gateway Hello invia hello query toohello origine per l'esecuzione.</span><span class="sxs-lookup"><span data-stu-id="52612-131">hello gateway sends hello query toohello data source for execution.</span></span>
6. <span data-ttu-id="52612-132">Hello risultati vengono inviati dall'origine dati hello, gateway toohello nascosto e quindi al servizio cloud hello e il server.</span><span class="sxs-lookup"><span data-stu-id="52612-132">hello results are sent from hello data source, back toohello gateway, and then onto hello cloud service and your server.</span></span>

## <span data-ttu-id="52612-133"><a name="windows-service-account"></a>Account del servizio Windows</span><span class="sxs-lookup"><span data-stu-id="52612-133"><a name="windows-service-account"> </a>Windows Service account</span></span>
<span data-ttu-id="52612-134">gateway dati locale Hello è configurato toouse *NT SERVICE\PBIEgwService* per le credenziali di accesso servizio Windows hello.</span><span class="sxs-lookup"><span data-stu-id="52612-134">hello on-premises data gateway is configured toouse *NT SERVICE\PBIEgwService* for hello Windows service logon credential.</span></span> <span data-ttu-id="52612-135">Per impostazione predefinita, ha hello diritto di accesso come servizio; nel contesto di hello del computer hello che si sta installando il gateway di hello in.</span><span class="sxs-lookup"><span data-stu-id="52612-135">By default, it has hello right of Logon as a service; in hello context of hello machine that you are installing hello gateway on.</span></span> <span data-ttu-id="52612-136">Questa credenziale non è hello stesso account utilizzato tooconnect tooon locale origini o l'account di Azure.</span><span class="sxs-lookup"><span data-stu-id="52612-136">This credential is not hello same account used tooconnect tooon-premises data sources or your Azure account.</span></span>  

<span data-ttu-id="52612-137">Se si verificano problemi con il server proxy scadenza tooauthentication, potrebbe essere necessario toochange utente di dominio tooa account del servizio di Windows hello o gestiti account del servizio.</span><span class="sxs-lookup"><span data-stu-id="52612-137">If you encounter issues with your proxy server due tooauthentication, you may want toochange hello Windows service account tooa domain user or managed service account.</span></span>

## <span data-ttu-id="52612-138"><a name="ports"> </a>Porte</span><span class="sxs-lookup"><span data-stu-id="52612-138"><a name="ports"> </a>Ports</span></span>
<span data-ttu-id="52612-139">gateway Hello crea un tooAzure di connessione in uscita Bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="52612-139">hello gateway creates an outbound connection tooAzure Service Bus.</span></span> <span data-ttu-id="52612-140">Comunica sulle porte in uscita seguenti: TCP 443 (impostazione predefinita), 5671, 5672 e da 9350 a 9354.</span><span class="sxs-lookup"><span data-stu-id="52612-140">It communicates on outbound ports: TCP 443 (default), 5671, 5672, 9350 through 9354.</span></span>  <span data-ttu-id="52612-141">gateway Hello non richiede porte in ingresso.</span><span class="sxs-lookup"><span data-stu-id="52612-141">hello gateway does not require inbound ports.</span></span>

<span data-ttu-id="52612-142">È consigliabile indirizzi IP whitelist hello per l'area dati nel firewall.</span><span class="sxs-lookup"><span data-stu-id="52612-142">We recommend you whitelist hello IP addresses for your data region in your firewall.</span></span> <span data-ttu-id="52612-143">È possibile scaricare hello [dell'elenco indirizzi IP di Data Center di Microsoft Azure](https://www.microsoft.com/download/details.aspx?id=41653).</span><span class="sxs-lookup"><span data-stu-id="52612-143">You can download hello [Microsoft Azure Datacenter IP list](https://www.microsoft.com/download/details.aspx?id=41653).</span></span> <span data-ttu-id="52612-144">L'elenco viene aggiornato ogni settimana.</span><span class="sxs-lookup"><span data-stu-id="52612-144">This list is updated weekly.</span></span>

> [!NOTE]
> <span data-ttu-id="52612-145">gli indirizzi IP di Hello nell'elenco di IP dei Data Center Azure hello sono in notazione CIDR.</span><span class="sxs-lookup"><span data-stu-id="52612-145">hello IP Addresses listed in hello Azure Datacenter IP list are in CIDR notation.</span></span> <span data-ttu-id="52612-146">Ad esempio, 10.0.0.0/24 non significa da 10.0.0.0 a 10.0.0.24.</span><span class="sxs-lookup"><span data-stu-id="52612-146">For example, 10.0.0.0/24 does not mean 10.0.0.0 through 10.0.0.24.</span></span> <span data-ttu-id="52612-147">Altre informazioni su hello [la notazione CIDR](http://whatismyipaddress.com/cidr).</span><span class="sxs-lookup"><span data-stu-id="52612-147">Learn more about hello [CIDR notation](http://whatismyipaddress.com/cidr).</span></span>
>
>

<span data-ttu-id="52612-148">di seguito Hello sono nomi di dominio completo hello usati dal gateway hello.</span><span class="sxs-lookup"><span data-stu-id="52612-148">hello following are hello fully qualified domain names used by hello gateway.</span></span>

| <span data-ttu-id="52612-149">Nomi di dominio</span><span class="sxs-lookup"><span data-stu-id="52612-149">Domain names</span></span> | <span data-ttu-id="52612-150">Porte in uscita</span><span class="sxs-lookup"><span data-stu-id="52612-150">Outbound ports</span></span> | <span data-ttu-id="52612-151">Descrizione</span><span class="sxs-lookup"><span data-stu-id="52612-151">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="52612-152">*.powerbi.com</span><span class="sxs-lookup"><span data-stu-id="52612-152">*.powerbi.com</span></span> |<span data-ttu-id="52612-153">80</span><span class="sxs-lookup"><span data-stu-id="52612-153">80</span></span> |<span data-ttu-id="52612-154">Programma di installazione hello toodownload usato HTTP.</span><span class="sxs-lookup"><span data-stu-id="52612-154">HTTP used toodownload hello installer.</span></span> |
| <span data-ttu-id="52612-155">*.powerbi.com</span><span class="sxs-lookup"><span data-stu-id="52612-155">*.powerbi.com</span></span> |<span data-ttu-id="52612-156">443</span><span class="sxs-lookup"><span data-stu-id="52612-156">443</span></span> |<span data-ttu-id="52612-157">HTTPS</span><span class="sxs-lookup"><span data-stu-id="52612-157">HTTPS</span></span> |
| <span data-ttu-id="52612-158">*. analysis.windows.net</span><span class="sxs-lookup"><span data-stu-id="52612-158">*.analysis.windows.net</span></span> |<span data-ttu-id="52612-159">443</span><span class="sxs-lookup"><span data-stu-id="52612-159">443</span></span> |<span data-ttu-id="52612-160">HTTPS</span><span class="sxs-lookup"><span data-stu-id="52612-160">HTTPS</span></span> |
| <span data-ttu-id="52612-161">*.login.windows.net</span><span class="sxs-lookup"><span data-stu-id="52612-161">*.login.windows.net</span></span> |<span data-ttu-id="52612-162">443</span><span class="sxs-lookup"><span data-stu-id="52612-162">443</span></span> |<span data-ttu-id="52612-163">HTTPS</span><span class="sxs-lookup"><span data-stu-id="52612-163">HTTPS</span></span> |
| <span data-ttu-id="52612-164">*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="52612-164">*.servicebus.windows.net</span></span> |<span data-ttu-id="52612-165">5671-5672</span><span class="sxs-lookup"><span data-stu-id="52612-165">5671-5672</span></span> |<span data-ttu-id="52612-166">Advanced Message Queuing Protocol (AMQP)</span><span class="sxs-lookup"><span data-stu-id="52612-166">Advanced Message Queuing Protocol (AMQP)</span></span> |
| <span data-ttu-id="52612-167">*.servicebus.windows.net</span><span class="sxs-lookup"><span data-stu-id="52612-167">*.servicebus.windows.net</span></span> |<span data-ttu-id="52612-168">443, 9350-9354</span><span class="sxs-lookup"><span data-stu-id="52612-168">443, 9350-9354</span></span> |<span data-ttu-id="52612-169">Listener in Inoltro del Bus di servizio su TCP (richiede 443 per l'acquisizione del token di Controllo di accesso)</span><span class="sxs-lookup"><span data-stu-id="52612-169">Listeners on Service Bus Relay over TCP (requires 443 for Access Control token acquisition)</span></span> |
| <span data-ttu-id="52612-170">*.frontend.clouddatahub.net</span><span class="sxs-lookup"><span data-stu-id="52612-170">*.frontend.clouddatahub.net</span></span> |<span data-ttu-id="52612-171">443</span><span class="sxs-lookup"><span data-stu-id="52612-171">443</span></span> |<span data-ttu-id="52612-172">HTTPS</span><span class="sxs-lookup"><span data-stu-id="52612-172">HTTPS</span></span> |
| <span data-ttu-id="52612-173">*.core.windows.net</span><span class="sxs-lookup"><span data-stu-id="52612-173">*.core.windows.net</span></span> |<span data-ttu-id="52612-174">443</span><span class="sxs-lookup"><span data-stu-id="52612-174">443</span></span> |<span data-ttu-id="52612-175">HTTPS</span><span class="sxs-lookup"><span data-stu-id="52612-175">HTTPS</span></span> |
| <span data-ttu-id="52612-176">login.microsoftonline.com</span><span class="sxs-lookup"><span data-stu-id="52612-176">login.microsoftonline.com</span></span> |<span data-ttu-id="52612-177">443</span><span class="sxs-lookup"><span data-stu-id="52612-177">443</span></span> |<span data-ttu-id="52612-178">HTTPS</span><span class="sxs-lookup"><span data-stu-id="52612-178">HTTPS</span></span> |
| <span data-ttu-id="52612-179">*.msftncsi.com</span><span class="sxs-lookup"><span data-stu-id="52612-179">*.msftncsi.com</span></span> |<span data-ttu-id="52612-180">443</span><span class="sxs-lookup"><span data-stu-id="52612-180">443</span></span> |<span data-ttu-id="52612-181">Utilizzare la connettività internet tootest se hello gateway non è raggiungibile dal servizio Power BI hello.</span><span class="sxs-lookup"><span data-stu-id="52612-181">Used tootest internet connectivity if hello gateway is unreachable by hello Power BI service.</span></span> |
| <span data-ttu-id="52612-182">*.microsoftonline-p.com</span><span class="sxs-lookup"><span data-stu-id="52612-182">*.microsoftonline-p.com</span></span> |<span data-ttu-id="52612-183">443</span><span class="sxs-lookup"><span data-stu-id="52612-183">443</span></span> |<span data-ttu-id="52612-184">Usato per l'autenticazione, a seconda della configurazione.</span><span class="sxs-lookup"><span data-stu-id="52612-184">Used for authentication depending on configuration.</span></span> |

### <span data-ttu-id="52612-185"><a name="force-https"></a>Forzare la comunicazione HTTPS con il bus di servizio di Azure</span><span class="sxs-lookup"><span data-stu-id="52612-185"><a name="force-https"></a>Forcing HTTPS communication with Azure Service Bus</span></span>
<span data-ttu-id="52612-186">È possibile forzare hello gateway toocommunicate con il Bus di servizio di Azure tramite HTTPS anziché diretta TCP; Tuttavia, in tal modo possono rallentare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="52612-186">You can force hello gateway toocommunicate with Azure Service Bus by using HTTPS instead of direct TCP; however, doing so can greatly reduce performance.</span></span> <span data-ttu-id="52612-187">È possibile modificare hello *Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config* file modificando il valore di hello da `AutoDetect` troppo`Https`.</span><span class="sxs-lookup"><span data-stu-id="52612-187">You can modify hello *Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config* file by changing hello value from `AutoDetect` too`Https`.</span></span> <span data-ttu-id="52612-188">Questo file si trova solitamente in *C:\Programmi\On-premises data gateway*.</span><span class="sxs-lookup"><span data-stu-id="52612-188">This file is typically located at *C:\Program Files\On-premises data gateway*.</span></span>

```
<setting name="ServiceBusSystemConnectivityModeString" serializeAs="String">
    <value>Https</value>
</setting>
```

## <span data-ttu-id="52612-189"><a name="faq"></a>Domande frequenti</span><span class="sxs-lookup"><span data-stu-id="52612-189"><a name="faq"></a>Frequently asked questions</span></span>

### <a name="general"></a><span data-ttu-id="52612-190">Generale</span><span class="sxs-lookup"><span data-stu-id="52612-190">General</span></span>

<span data-ttu-id="52612-191">**Domande e**: è necessario un gateway per le origini dati nel cloud hello, ad esempio Database di SQL Azure?</span><span class="sxs-lookup"><span data-stu-id="52612-191">**Q**: Do I need a gateway for data sources in hello cloud, such as Azure SQL Database?</span></span> <br/><span data-ttu-id="52612-192">
**R**: No.</span><span class="sxs-lookup"><span data-stu-id="52612-192">
**A**: No.</span></span> <span data-ttu-id="52612-193">Un gateway si connette a origini dati locali tooon solo.</span><span class="sxs-lookup"><span data-stu-id="52612-193">A gateway connects tooon-premises data sources only.</span></span>

<span data-ttu-id="52612-194">**Domande e**: gateway hello dispone toobe installato hello stesso computer come origine dati hello?</span><span class="sxs-lookup"><span data-stu-id="52612-194">**Q**: Does hello gateway have toobe installed on hello same machine as hello data source?</span></span> <br/><span data-ttu-id="52612-195">
**R**: No.</span><span class="sxs-lookup"><span data-stu-id="52612-195">
**A**: No.</span></span> <span data-ttu-id="52612-196">gateway Hello stabilisce la connessione origine dati toohello utilizzando le informazioni di connessione hello fornito.</span><span class="sxs-lookup"><span data-stu-id="52612-196">hello gateway connects toohello data source using hello connection information that was provided.</span></span> <span data-ttu-id="52612-197">Prendere in considerazione gateway hello come un'applicazione client in questo senso.</span><span class="sxs-lookup"><span data-stu-id="52612-197">Consider hello gateway as a client application in this sense.</span></span> <span data-ttu-id="52612-198">Hello gateway deve semplicemente hello funzionalità tooconnect toohello nome del server che è stato specificato, in genere su hello stessa rete.</span><span class="sxs-lookup"><span data-stu-id="52612-198">hello gateway just needs hello capability tooconnect toohello server name that was provided, typically on hello same network.</span></span>

<a name="why-azure-work-school-account"></a>

<span data-ttu-id="52612-199">**Domande e**: perché è necessario un lavoro toouse o dell'istituto di istruzione toosign account in?</span><span class="sxs-lookup"><span data-stu-id="52612-199">**Q**: Why do I need toouse a work or school account toosign in?</span></span> <br/><span data-ttu-id="52612-200">
**Oggetto**: È possibile utilizzare un lavoro di Azure o scuola account quando si installa gateway dati locale di hello.</span><span class="sxs-lookup"><span data-stu-id="52612-200">
**A**: You can only use an Azure work or school account when you install hello on-premises data gateway.</span></span> <span data-ttu-id="52612-201">L'account di accesso viene archiviato in un tenant gestito da Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="52612-201">Your sign-in account is stored in a tenant that's managed by Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="52612-202">Nome dell'entità utente dell'account di Azure AD (UPN) corrisponde in genere, indirizzo di posta elettronica hello.</span><span class="sxs-lookup"><span data-stu-id="52612-202">Usually, your Azure AD account's user principal name (UPN) matches hello email address.</span></span>

<span data-ttu-id="52612-203">**D**: Dove sono archiviate le credenziali?</span><span class="sxs-lookup"><span data-stu-id="52612-203">**Q**: Where are my credentials stored?</span></span> <br/><span data-ttu-id="52612-204">
**Oggetto**: credenziali hello immesse per un'origine dati vengono crittografate e archiviate nel servizio Cloud Gateway hello.</span><span class="sxs-lookup"><span data-stu-id="52612-204">
**A**: hello credentials that you enter for a data source are encrypted and stored in hello Gateway Cloud Service.</span></span> <span data-ttu-id="52612-205">le credenziali di Hello vengono decrittografate nel gateway dati locale di hello.</span><span class="sxs-lookup"><span data-stu-id="52612-205">hello credentials are decrypted at hello on-premises data gateway.</span></span>

<span data-ttu-id="52612-206">**D**: Sono previsti requisiti per la larghezza di banda della rete?</span><span class="sxs-lookup"><span data-stu-id="52612-206">**Q**: Are there any requirements for network bandwidth?</span></span> <br/><span data-ttu-id="52612-207">
**R**: È consigliabile che la connessione di rete abbia una buona velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="52612-207">
**A**: It's recommend your network connection has good throughput.</span></span> <span data-ttu-id="52612-208">Ogni ambiente è diverso e quantità hello di invio di dati influisce sui risultati di hello.</span><span class="sxs-lookup"><span data-stu-id="52612-208">Every environment is different, and hello amount of data being sent affects hello results.</span></span> <span data-ttu-id="52612-209">Uso di ExpressRoute può contribuire a tooguarantee un livello di velocità effettiva tra sedi locali e hello Data Center di Azure.</span><span class="sxs-lookup"><span data-stu-id="52612-209">Using ExpressRoute could help tooguarantee a level of throughput between on-premises and hello Azure datacenters.</span></span>
<span data-ttu-id="52612-210">È possibile utilizzare hello dello strumento di terze parti Azure Speed Test app toohelp misuratore la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="52612-210">You can use hello third-party tool Azure Speed Test app toohelp gauge your throughput.</span></span>

<span data-ttu-id="52612-211">**Domande e**: che cos'è la latenza di hello per le query tooa dati di origine in esecuzione dal gateway hello?</span><span class="sxs-lookup"><span data-stu-id="52612-211">**Q**: What is hello latency for running queries tooa data source from hello gateway?</span></span> <span data-ttu-id="52612-212">Che cos'è l'architettura migliore hello?</span><span class="sxs-lookup"><span data-stu-id="52612-212">What is hello best architecture?</span></span> <br/><span data-ttu-id="52612-213">
**Oggetto**: tooreduce latenza di rete, installare hello gateway come origine dati toohello Chiudi possibili.</span><span class="sxs-lookup"><span data-stu-id="52612-213">
**A**: tooreduce network latency, install hello gateway as close toohello data source as possible.</span></span> <span data-ttu-id="52612-214">Se è possibile installare il gateway di hello sull'origine dati effettivi hello, la prossimità riduce la latenza di hello introdotta.</span><span class="sxs-lookup"><span data-stu-id="52612-214">If you can install hello gateway on hello actual data source, this proximity minimizes hello latency introduced.</span></span> <span data-ttu-id="52612-215">Prendere in considerazione i Data Center hello troppo.</span><span class="sxs-lookup"><span data-stu-id="52612-215">Consider hello datacenters too.</span></span> <span data-ttu-id="52612-216">Ad esempio, se il servizio utilizza hello Data Center di Stati Uniti occidentali e SQL Server è ospitato in una macchina virtuale di Azure, la macchina virtuale di Azure deve essere in Stati Uniti occidentali hello troppo.</span><span class="sxs-lookup"><span data-stu-id="52612-216">For example, if your service uses hello West US datacenter, and you have SQL Server hosted in an Azure VM, your Azure VM should be in hello West US too.</span></span> <span data-ttu-id="52612-217">Questo prossimità riduce la latenza ed evitare addebiti in uscita sulla macchina virtuale di Azure hello.</span><span class="sxs-lookup"><span data-stu-id="52612-217">This proximity minimizes latency and avoids egress charges on hello Azure VM.</span></span>

<span data-ttu-id="52612-218">**Domande e**: come vengono inviati risultati toohello indietro cloud?</span><span class="sxs-lookup"><span data-stu-id="52612-218">**Q**: How are results sent back toohello cloud?</span></span> <br/><span data-ttu-id="52612-219">
**Oggetto**: risultati vengono inviati tramite hello Azure Service Bus.</span><span class="sxs-lookup"><span data-stu-id="52612-219">
**A**: Results are sent through hello Azure Service Bus.</span></span>

<span data-ttu-id="52612-220">**Domande e**: sono presenti eventuali gateway toohello le connessioni in ingresso dal cloud hello?</span><span class="sxs-lookup"><span data-stu-id="52612-220">**Q**: Are there any inbound connections toohello gateway from hello cloud?</span></span> <br/><span data-ttu-id="52612-221">
**R**: No.</span><span class="sxs-lookup"><span data-stu-id="52612-221">
**A**: No.</span></span> <span data-ttu-id="52612-222">gateway di Hello Usa le connessioni in uscita tooAzure Bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="52612-222">hello gateway uses outbound connections tooAzure Service Bus.</span></span>

<span data-ttu-id="52612-223">**D**: Cosa accade se si bloccano le connessioni in uscita?</span><span class="sxs-lookup"><span data-stu-id="52612-223">**Q**: What if I block outbound connections?</span></span> <span data-ttu-id="52612-224">Cosa devo tooopen?</span><span class="sxs-lookup"><span data-stu-id="52612-224">What do I need tooopen?</span></span> <br/><span data-ttu-id="52612-225">
**Oggetto**: Vedere porte hello e gli host che hello Usa gateway.</span><span class="sxs-lookup"><span data-stu-id="52612-225">
**A**: See hello ports and hosts that hello gateway uses.</span></span>

<span data-ttu-id="52612-226">**Domande e**: ciò che viene chiamato il servizio Windows effettivo di hello?</span><span class="sxs-lookup"><span data-stu-id="52612-226">**Q**: What is hello actual Windows service called?</span></span><br/><span data-ttu-id="52612-227">
**Oggetto**: In servizi, gateway hello viene chiamato il servizio gateway dati locale.</span><span class="sxs-lookup"><span data-stu-id="52612-227">
**A**: In Services, hello gateway is called On-premises data gateway service.</span></span>

<span data-ttu-id="52612-228">**Domande e**: possibile hello servizio gateway di Windows eseguito con un account Azure Active Directory?</span><span class="sxs-lookup"><span data-stu-id="52612-228">**Q**: Can hello gateway Windows service run with an Azure Active Directory account?</span></span> <br/><span data-ttu-id="52612-229">
**R**: No.</span><span class="sxs-lookup"><span data-stu-id="52612-229">
**A**: No.</span></span> <span data-ttu-id="52612-230">servizio Windows Hello deve avere un account Windows valido.</span><span class="sxs-lookup"><span data-stu-id="52612-230">hello Windows service must have a valid Windows account.</span></span> <span data-ttu-id="52612-231">Per impostazione predefinita, il servizio di hello viene eseguito con hello SID del servizio, NT SERVICE\PBIEgwService.</span><span class="sxs-lookup"><span data-stu-id="52612-231">By default, hello service runs with hello Service SID, NT SERVICE\PBIEgwService.</span></span>

### <span data-ttu-id="52612-232"><a name="high-availability"></a>Disponibilità elevata e ripristino di emergenza</span><span class="sxs-lookup"><span data-stu-id="52612-232"><a name="high-availability"></a>High availability and disaster recovery</span></span>

<span data-ttu-id="52612-233">**D**: Quali opzioni sono disponibili per il ripristino di emergenza?</span><span class="sxs-lookup"><span data-stu-id="52612-233">**Q**: What options are available for disaster recovery?</span></span> <br/><span data-ttu-id="52612-234">
**Oggetto**: È possibile utilizzare toorestore chiave di ripristino hello o spostare un gateway.</span><span class="sxs-lookup"><span data-stu-id="52612-234">
**A**: You can use hello recovery key toorestore or move a gateway.</span></span> <span data-ttu-id="52612-235">Quando si installa il gateway di hello, specificare la chiave di ripristino hello.</span><span class="sxs-lookup"><span data-stu-id="52612-235">When you install hello gateway, specify hello recovery key.</span></span>

<span data-ttu-id="52612-236">**Domande e**: che cos'è il vantaggio di hello della chiave di ripristino hello?</span><span class="sxs-lookup"><span data-stu-id="52612-236">**Q**: What is hello benefit of hello recovery key?</span></span> <br/><span data-ttu-id="52612-237">
**Oggetto**: chiave di ripristino hello fornisce un modo toomigrate o ripristinare le impostazioni del gateway dopo un'emergenza.</span><span class="sxs-lookup"><span data-stu-id="52612-237">
**A**: hello recovery key provides a way toomigrate or recover your gateway settings after a disaster.</span></span>

## <span data-ttu-id="52612-238"><a name="troubleshooting"> </a>Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="52612-238"><a name="troubleshooting"> </a>Troubleshooting</span></span>

<span data-ttu-id="52612-239">**Domande e**: come è possibile vedere quali sono le query vengono inviate toohello origine di dati locale?</span><span class="sxs-lookup"><span data-stu-id="52612-239">**Q**: How can I see what queries are being sent toohello on-premises data source?</span></span> <br/><span data-ttu-id="52612-240">
**Oggetto**: È possibile abilitare la traccia di query, che include le query hello che vengono inviate.</span><span class="sxs-lookup"><span data-stu-id="52612-240">
**A**: You can enable query tracing, which includes hello queries that are sent.</span></span> <span data-ttu-id="52612-241">Tenere presente che query toochange risalendo toohello valore originale al termine della risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="52612-241">Remember toochange query tracing back toohello original value when done troubleshooting.</span></span> <span data-ttu-id="52612-242">Se il tracciamento delle query non viene disabilitato, si creeranno dei log più grandi.</span><span class="sxs-lookup"><span data-stu-id="52612-242">Leaving query tracing turned on creates larger logs.</span></span>

<span data-ttu-id="52612-243">È anche possibile usare gli strumenti per il tracciamento delle query di cui è dotata l'origine dati.</span><span class="sxs-lookup"><span data-stu-id="52612-243">You can also look at tools that your data source has for tracing queries.</span></span> <span data-ttu-id="52612-244">Ad esempio, è possibile usare Eventi estesi o SQL Profiler per SQL Server e Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="52612-244">For example, you can use Extended Events or SQL Profiler for SQL Server and Analysis Services.</span></span>

<span data-ttu-id="52612-245">**Domande e**: dove sono i registri di gateway hello?</span><span class="sxs-lookup"><span data-stu-id="52612-245">**Q**: Where are hello gateway logs?</span></span> <br/><span data-ttu-id="52612-246">
**R**: Vedere la sezione Registri più avanti in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="52612-246">
**A**: See Logs later in this topic.</span></span>

### <span data-ttu-id="52612-247"><a name="update"></a>Aggiornare la versione più recente di toohello</span><span class="sxs-lookup"><span data-stu-id="52612-247"><a name="update"></a>Update toohello latest version</span></span>

<span data-ttu-id="52612-248">Molti problemi possono verificarsi quando la versione di gateway hello diventa obsoleta.</span><span class="sxs-lookup"><span data-stu-id="52612-248">Many issues can surface when hello gateway version becomes outdated.</span></span> <span data-ttu-id="52612-249">Come buona pratica, assicurarsi di utilizzare la versione più recente di hello.</span><span class="sxs-lookup"><span data-stu-id="52612-249">As good general practice, make sure that you use hello latest version.</span></span> <span data-ttu-id="52612-250">Se è stato aggiornato gateway hello per un mese o più, si potrebbe si consiglia di installare una versione più recente di hello del gateway hello e verificare se è possibile riprodurre il problema di hello.</span><span class="sxs-lookup"><span data-stu-id="52612-250">If you haven't updated hello gateway for a month or longer, you might consider installing hello latest version of hello gateway, and see if you can reproduce hello issue.</span></span>

### <a name="error-failed-tooadd-user-toogroup--2147463168-pbiegwservice-performance-log-users"></a><span data-ttu-id="52612-251">Errore: Impossibile tooadd utente toogroup.</span><span class="sxs-lookup"><span data-stu-id="52612-251">Error: Failed tooadd user toogroup.</span></span> <span data-ttu-id="52612-252">(Utenti log delle prestazioni -2147463168 PBIEgwService)</span><span class="sxs-lookup"><span data-stu-id="52612-252">(-2147463168 PBIEgwService Performance Log Users)</span></span>

<span data-ttu-id="52612-253">È possibile che venga visualizzato questo errore se si tenta di gateway di hello tooinstall in un controller di dominio che non è supportato.</span><span class="sxs-lookup"><span data-stu-id="52612-253">You might get this error if you try tooinstall hello gateway on a domain controller, which isn't supported.</span></span> <span data-ttu-id="52612-254">Assicurarsi di distribuire gateway hello in un computer che non è un controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="52612-254">Make sure that you deploy hello gateway on a machine that isn't a domain controller.</span></span>

## <span data-ttu-id="52612-255"><a name="logs"></a>Log</span><span class="sxs-lookup"><span data-stu-id="52612-255"><a name="logs"></a>Logs</span></span>

<span data-ttu-id="52612-256">I file di log sono di fondamentale importanza per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="52612-256">Log files are an important resource when troubleshooting.</span></span>

#### <a name="enterprise-gateway-service-logs"></a><span data-ttu-id="52612-257">Log del servizio gateway Enterprise</span><span class="sxs-lookup"><span data-stu-id="52612-257">Enterprise gateway service logs</span></span>

`C:\Users\PBIEgwService\AppData\Local\Microsoft\On-premises data gateway\<yyyyymmdd>.<Number>.log`

#### <a name="configuration-logs"></a><span data-ttu-id="52612-258">Log di configurazione</span><span class="sxs-lookup"><span data-stu-id="52612-258">Configuration logs</span></span>

`C:\Users\<username>\AppData\Local\Microsoft\On-premises data gateway\GatewayConfigurator.log`




#### <a name="event-logs"></a><span data-ttu-id="52612-259">Log eventi</span><span class="sxs-lookup"><span data-stu-id="52612-259">Event logs</span></span>

<span data-ttu-id="52612-260">È possibile trovare il Gateway di gestione di dati e PowerBIGateway registri in hello **registri applicazioni e servizi**.</span><span class="sxs-lookup"><span data-stu-id="52612-260">You can find hello Data Management Gateway and PowerBIGateway logs under **Application and Services Logs**.</span></span>


## <span data-ttu-id="52612-261"><a name="telemetry"></a>Telemetria</span><span class="sxs-lookup"><span data-stu-id="52612-261"><a name="telemetry"></a>Telemetry</span></span>
<span data-ttu-id="52612-262">La telemetria può essere usata per il monitoraggio e la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="52612-262">Telemetry can be used for monitoring and troubleshooting.</span></span> <span data-ttu-id="52612-263">Per impostazione predefinita</span><span class="sxs-lookup"><span data-stu-id="52612-263">By default</span></span>

<span data-ttu-id="52612-264">**tooturn telemetria**</span><span class="sxs-lookup"><span data-stu-id="52612-264">**tooturn on telemetry**</span></span>

1.  <span data-ttu-id="52612-265">Controllare hello On-premises data gateway nella directory sul hello computer.</span><span class="sxs-lookup"><span data-stu-id="52612-265">Check hello On-premises data gateway client directory on hello computer.</span></span> <span data-ttu-id="52612-266">In genere è **%unitàsistema%\Programmi\Gateway dati locale**.</span><span class="sxs-lookup"><span data-stu-id="52612-266">Typically, it is **%systemdrive%\Program Files\On-premises data gateway**.</span></span> <span data-ttu-id="52612-267">Oppure, è possibile aprire una console dei servizi e verificare hello percorso tooexecutable: una proprietà del servizio gateway dati locale di hello.</span><span class="sxs-lookup"><span data-stu-id="52612-267">Or, you can open a Services console and check hello Path tooexecutable: A property of hello On-premises data gateway service.</span></span>
2.  <span data-ttu-id="52612-268">Nel file di Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config hello dalla directory del client.</span><span class="sxs-lookup"><span data-stu-id="52612-268">In hello Microsoft.PowerBI.DataMovement.Pipeline.GatewayCore.dll.config file from client directory.</span></span> <span data-ttu-id="52612-269">Modificare hello SendTelemetry impostazione tootrue.</span><span class="sxs-lookup"><span data-stu-id="52612-269">Change hello SendTelemetry setting tootrue.</span></span>
        
    ```
        <setting name="SendTelemetry" serializeAs="String">
                    <value>true</value>
        </setting>
    ```

3.  <span data-ttu-id="52612-270">Salvare le modifiche e riavviare il servizio di Windows hello: il servizio gateway dati locale.</span><span class="sxs-lookup"><span data-stu-id="52612-270">Save your changes and restart hello Windows service: On-premises data gateway service.</span></span>




## <a name="next-steps"></a><span data-ttu-id="52612-271">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="52612-271">Next steps</span></span>
* [<span data-ttu-id="52612-272">Gestire Analysis Services</span><span class="sxs-lookup"><span data-stu-id="52612-272">Manage Analysis Services</span></span>](analysis-services-manage.md)
* [<span data-ttu-id="52612-273">Ottenere dati da Azure Analysis Services</span><span class="sxs-lookup"><span data-stu-id="52612-273">Get data from Azure Analysis Services</span></span>](analysis-services-connect.md)
