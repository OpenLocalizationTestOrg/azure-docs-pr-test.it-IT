---
title: Concetti relativi alla progettazione per Azure AD Connect | Documentazione Microsoft
description: Questo argomento illustra alcune aree di progettazione dell'implementazione.
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1e5d5c6a716ca653fb14fc059e8155124b433732
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="6a08b-103">Azure AD Connect: Concetti relativi alla progettazione</span><span class="sxs-lookup"><span data-stu-id="6a08b-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="6a08b-104">scopo di Hello di questo argomento è toodescribe aree che devono essere considerate durante la progettazione e implementazione hello di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6a08b-104">hello purpose of this topic is toodescribe areas that must be thought through during hello implementation design of Azure AD Connect.</span></span> <span data-ttu-id="6a08b-105">Si tratta di un'analisi approfondita di determinate aree e questi concetti vengono illustrati brevemente anche in altri argomenti.</span><span class="sxs-lookup"><span data-stu-id="6a08b-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="6a08b-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="6a08b-106">sourceAnchor</span></span>
<span data-ttu-id="6a08b-107">attributo sourceAnchor Hello è definito come *un attributo non è modificabile nel corso della durata hello di un oggetto*.</span><span class="sxs-lookup"><span data-stu-id="6a08b-107">hello sourceAnchor attribute is defined as *an attribute immutable during hello lifetime of an object*.</span></span> <span data-ttu-id="6a08b-108">Identifica in modo univoco un oggetto come hello stesso oggetto locale e in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6a08b-108">It uniquely identifies an object as being hello same object on-premises and in Azure AD.</span></span> <span data-ttu-id="6a08b-109">attributo di Hello viene anche chiamato **immutableId** e i nomi di hello due vengono usati intercambiabili.</span><span class="sxs-lookup"><span data-stu-id="6a08b-109">hello attribute is also called **immutableId** and hello two names are used interchangeable.</span></span>

<span data-ttu-id="6a08b-110">parola Hello non modificabile, ovvero "non può essere modificato", è importante toothis argomento.</span><span class="sxs-lookup"><span data-stu-id="6a08b-110">hello word immutable, that is "cannot be changed", is important toothis topic.</span></span> <span data-ttu-id="6a08b-111">Poiché il valore dell'attributo non può essere modificato dopo che è stata impostata, è importante toopick una progettazione che supporta lo scenario.</span><span class="sxs-lookup"><span data-stu-id="6a08b-111">Since this attribute’s value cannot be changed after it has been set, it is important toopick a design that supports your scenario.</span></span>

<span data-ttu-id="6a08b-112">attributo di Hello viene usato per hello seguenti scenari:</span><span class="sxs-lookup"><span data-stu-id="6a08b-112">hello attribute is used for hello following scenarios:</span></span>

* <span data-ttu-id="6a08b-113">Quando viene compilato un nuovo motore di sincronizzazione o quando il motore viene ricompilato dopo uno scenario di ripristino di emergenza, questo attributo collega gli oggetti esistenti in Azure AD con gli oggetti locali.</span><span class="sxs-lookup"><span data-stu-id="6a08b-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="6a08b-114">Se si sposta da un modello di identità sincronizzato tooa identità solo cloud, quindi questo attributo consente agli oggetti troppo "associazione fissa" oggetti esistenti in Azure AD con oggetti locali.</span><span class="sxs-lookup"><span data-stu-id="6a08b-114">If you move from a cloud-only identity tooa synchronized identity model, then this attribute allows objects too"hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="6a08b-115">Se si utilizza la federazione, questo attributo insieme hello **userPrincipalName** viene utilizzata in hello attestazione toouniquely identificare un utente.</span><span class="sxs-lookup"><span data-stu-id="6a08b-115">If you use federation, then this attribute together with hello **userPrincipalName** is used in hello claim toouniquely identify a user.</span></span>

<span data-ttu-id="6a08b-116">In questo argomento solo parla sourceAnchor in relazione toousers.</span><span class="sxs-lookup"><span data-stu-id="6a08b-116">This topic only talks about sourceAnchor as it relates toousers.</span></span> <span data-ttu-id="6a08b-117">Hello stesse regole si applicano i tipi di oggetto tooall, ma è solo per gli utenti che il problema è in genere un problema.</span><span class="sxs-lookup"><span data-stu-id="6a08b-117">hello same rules apply tooall object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="6a08b-118">Selezione di un attributo sourceAnchor valido</span><span class="sxs-lookup"><span data-stu-id="6a08b-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="6a08b-119">valore dell'attributo Hello deve seguire hello seguenti regole:</span><span class="sxs-lookup"><span data-stu-id="6a08b-119">hello attribute value must follow hello following rules:</span></span>

* <span data-ttu-id="6a08b-120">La lunghezza del testo deve essere inferiore a 60 caratteri</span><span class="sxs-lookup"><span data-stu-id="6a08b-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="6a08b-121">I caratteri diversi da a-z, A-Z o 0-9 vengono codificati e conteggiati come 3 caratteri</span><span class="sxs-lookup"><span data-stu-id="6a08b-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="6a08b-122">Non deve contenere un carattere speciale: &#92; !</span><span class="sxs-lookup"><span data-stu-id="6a08b-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="6a08b-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="6a08b-123"># $ % & * + / = ?</span></span> <span data-ttu-id="6a08b-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="6a08b-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="6a08b-125">Deve essere globalmente univoco</span><span class="sxs-lookup"><span data-stu-id="6a08b-125">Must be globally unique</span></span>
* <span data-ttu-id="6a08b-126">Deve essere una stringa, un valore intero o un numero binario</span><span class="sxs-lookup"><span data-stu-id="6a08b-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="6a08b-127">Non deve essere basato sul nome dell'utente, queste modifiche</span><span class="sxs-lookup"><span data-stu-id="6a08b-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="6a08b-128">Non devono fare distinzione tra maiuscole e minuscole e devono evitare valori che possono variare in base alle maiuscole/minuscole</span><span class="sxs-lookup"><span data-stu-id="6a08b-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="6a08b-129">Deve essere assegnato quando viene creato l'oggetto hello</span><span class="sxs-lookup"><span data-stu-id="6a08b-129">Should be assigned when hello object is created</span></span>

<span data-ttu-id="6a08b-130">Se hello seleziona sourceAnchor non è di tipo stringa, quindi vengono visualizzati i caratteri speciali non tooensure di valore attributo hello Base64Encode di connettersi AD Azure.</span><span class="sxs-lookup"><span data-stu-id="6a08b-130">If hello selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode hello attribute value tooensure no special characters appear.</span></span> <span data-ttu-id="6a08b-131">Se si utilizza un altro server federativo di ADFS, verificare che il server può anche attributo hello Base64Encode.</span><span class="sxs-lookup"><span data-stu-id="6a08b-131">If you use another federation server than ADFS, make sure your server can also Base64Encode hello attribute.</span></span>

<span data-ttu-id="6a08b-132">attributo sourceAnchor Hello è tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="6a08b-132">hello sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="6a08b-133">Il valore "JohnDoe" non è hello uguale a "johndoe".</span><span class="sxs-lookup"><span data-stu-id="6a08b-133">A value of “JohnDoe” is not hello same as “johndoe”.</span></span> <span data-ttu-id="6a08b-134">Non è tuttavia consigliabile creare due oggetti che si differenziano solo per la distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="6a08b-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="6a08b-135">Se si dispone di una singola foresta locale, quindi attributo hello è consigliabile utilizzare è **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="6a08b-135">If you have a single forest on-premises, then hello attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="6a08b-136">È anche attributo hello utilizzato quando si Usa impostazioni rapide in Azure AD Connect e hello anche l'attributo utilizzato da DirSync.</span><span class="sxs-lookup"><span data-stu-id="6a08b-136">This is also hello attribute used when you use express settings in Azure AD Connect and also hello attribute used by DirSync.</span></span>

<span data-ttu-id="6a08b-137">Se si dispone di più foreste e non trasferire gli utenti tra insiemi di strutture e domini, quindi **objectGUID** è un attributo valido di toouse anche in questo caso.</span><span class="sxs-lookup"><span data-stu-id="6a08b-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute toouse even in this case.</span></span>

<span data-ttu-id="6a08b-138">Se gli utenti si spostano tra foreste e domini, è necessario trovare un attributo che non modifica o può essere spostato con utenti hello durante lo spostamento di hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with hello users during hello move.</span></span> <span data-ttu-id="6a08b-139">Un approccio consigliato è un attributo sintetico toointroduce.</span><span class="sxs-lookup"><span data-stu-id="6a08b-139">A recommended approach is toointroduce a synthetic attribute.</span></span> <span data-ttu-id="6a08b-140">È possibile usare un attributo che include un elemento analogo a un GUID.</span><span class="sxs-lookup"><span data-stu-id="6a08b-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="6a08b-141">Durante la creazione dell'oggetto, un nuovo GUID la creazione e sulla utente hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-141">During object creation, a new GUID is created and stamped on hello user.</span></span> <span data-ttu-id="6a08b-142">Una regola di sincronizzazione personalizzate è possibile crearle in hello sincronizzazione motore server toocreate questo valore in base a hello **objectGUID** e aggiornamento hello selezionato attributo.</span><span class="sxs-lookup"><span data-stu-id="6a08b-142">A custom sync rule can be created in hello sync engine server toocreate this value based on hello **objectGUID** and update hello selected attribute in ADDS.</span></span> <span data-ttu-id="6a08b-143">Quando si sposta oggetto hello, rendere il contenuto di hello tooalso che copia di questo valore.</span><span class="sxs-lookup"><span data-stu-id="6a08b-143">When you move hello object, make sure tooalso copy hello content of this value.</span></span>

<span data-ttu-id="6a08b-144">Un'altra soluzione consiste toopick un attributo esistente, si è certi di non modificare.</span><span class="sxs-lookup"><span data-stu-id="6a08b-144">Another solution is toopick an existing attribute you know does not change.</span></span> <span data-ttu-id="6a08b-145">Uno degli attributi più comunemente usati è **employeeID**.</span><span class="sxs-lookup"><span data-stu-id="6a08b-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="6a08b-146">Se si considera un attributo che contiene lettere, assicurarsi che vi sia che alcun caso hello possibilità (lettere maiuscole e minuscole) è non possibile modificare il valore dell'attributo hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-146">If you consider an attribute that contains letters, make sure there is no chance hello case (upper case vs. lower case) can change for hello attribute's value.</span></span> <span data-ttu-id="6a08b-147">Attributi non validi che non devono essere usati includere questi attributi con nome hello dell'utente di hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-147">Bad attributes that should not be used include those attributes with hello name of hello user.</span></span> <span data-ttu-id="6a08b-148">In un matrimonio o divorzio, nome hello è previsto toochange, che non è consentita per questo attributo.</span><span class="sxs-lookup"><span data-stu-id="6a08b-148">In a marriage or divorce, hello name is expected toochange, which is not allowed for this attribute.</span></span> <span data-ttu-id="6a08b-149">Questo è anche un motivo per cui gli attributi, ad esempio **userPrincipalName**, **posta**, e **targetAddress** non sono possibili anche tooselect nell'installazione di hello Azure AD Connect procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="6a08b-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible tooselect in hello Azure AD Connect installation wizard.</span></span> <span data-ttu-id="6a08b-150">Tali attributi contengono anche hello "@" carattere non consentito in hello sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6a08b-150">Those attributes also contain hello "@" character, which is not allowed in hello sourceAnchor.</span></span>

### <a name="changing-hello-sourceanchor-attribute"></a><span data-ttu-id="6a08b-151">Modifica attributo sourceAnchor hello</span><span class="sxs-lookup"><span data-stu-id="6a08b-151">Changing hello sourceAnchor attribute</span></span>
<span data-ttu-id="6a08b-152">Impossibile modificare il valore dell'attributo sourceAnchor Hello dopo hello oggetto è stato creato in Azure Active Directory e identità hello è sincronizzato.</span><span class="sxs-lookup"><span data-stu-id="6a08b-152">hello sourceAnchor attribute value cannot be changed after hello object has been created in Azure AD and hello identity is synchronized.</span></span>

<span data-ttu-id="6a08b-153">Per questo motivo, hello le restrizioni seguenti si applica tooAzure AD Connect:</span><span class="sxs-lookup"><span data-stu-id="6a08b-153">For this reason, hello following restrictions apply tooAzure AD Connect:</span></span>

* <span data-ttu-id="6a08b-154">attributo sourceAnchor Hello può essere impostata solo durante l'installazione iniziale.</span><span class="sxs-lookup"><span data-stu-id="6a08b-154">hello sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="6a08b-155">Se si esegue nuovamente Installazione guidata di hello, questa opzione è di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="6a08b-155">If you rerun hello installation wizard, this option is read-only.</span></span> <span data-ttu-id="6a08b-156">Se è necessario toochange questa impostazione, è necessario disinstallare e reinstallare.</span><span class="sxs-lookup"><span data-stu-id="6a08b-156">If you need toochange this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="6a08b-157">Se si installa un altro server di Azure AD Connect, sarà necessario selezionare hello stesso attributo sourceAnchor utilizzato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="6a08b-157">If you install another Azure AD Connect server, then you must select hello same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="6a08b-158">Se in precedenza mediante DirSync e di spostare tooAzure AD connettersi, è necessario utilizzare **objectGUID** poiché questo è l'attributo hello usato da DirSync.</span><span class="sxs-lookup"><span data-stu-id="6a08b-158">If you have earlier been using DirSync and move tooAzure AD Connect, then you must use **objectGUID** since that is hello attribute used by DirSync.</span></span>
* <span data-ttu-id="6a08b-159">Se il valore di hello per sourceAnchor è stato modificato dopo l'oggetto hello esportata tooAzure Active Directory, quindi Azure AD Connect, genera un errore di sincronizzazione e non consente ulteriori modifiche su tale oggetto prima di risolvere il problema di hello e sourceAnchor hello viene modificato in hello directory di origine.</span><span class="sxs-lookup"><span data-stu-id="6a08b-159">If hello value for sourceAnchor is changed after hello object has been exported tooAzure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before hello issue has been fixed and hello sourceAnchor is changed back in hello source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="6a08b-160">Uso di msDS-ConsistencyGuid come sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="6a08b-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="6a08b-161">Per impostazione predefinita, Azure AD Connect (versione 1.1.486.0 e precedenti) Usa objectGUID come attributo sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as hello sourceAnchor attribute.</span></span> <span data-ttu-id="6a08b-162">ObjectGUID è generato dal sistema.</span><span class="sxs-lookup"><span data-stu-id="6a08b-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="6a08b-163">Non è possibile specificare il relativo valore durante la creazione di oggetti di AD locale.</span><span class="sxs-lookup"><span data-stu-id="6a08b-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="6a08b-164">Come illustrato nella sezione [sourceAnchor](#sourceanchor), esistono scenari in cui è necessario valore di sourceAnchor toospecify hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need toospecify hello sourceAnchor value.</span></span> <span data-ttu-id="6a08b-165">Se gli scenari di hello tooyou applicabile, è necessario utilizzare un attributo di Active Directory (ad esempio, msDS-ConsistencyGuid) può essere configurato come attributo sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-165">If hello scenarios are applicable tooyou, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as hello sourceAnchor attribute.</span></span>

<span data-ttu-id="6a08b-166">Azure AD Connect (versione 1.1.524.0 e dopo) ora facilita l'uso di hello di msDS-ConsistencyGuid come attributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6a08b-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates hello use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="6a08b-167">Quando si utilizza questa funzionalità, Azure AD Connect consente di configurare automaticamente le regole di sincronizzazione hello per:</span><span class="sxs-lookup"><span data-stu-id="6a08b-167">When using this feature, Azure AD Connect automatically configures hello synchronization rules to:</span></span>

1. <span data-ttu-id="6a08b-168">Utilizzare msDS-ConsistencyGuid come attributo sourceAnchor hello per gli oggetti utente.</span><span class="sxs-lookup"><span data-stu-id="6a08b-168">Use msDS-ConsistencyGuid as hello sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="6a08b-169">ObjectGUID è usato per altri tipi di oggetto.</span><span class="sxs-lookup"><span data-stu-id="6a08b-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="6a08b-170">Per un dato locale utente AD oggetto il cui attributo msDS-ConsistencyGuid non è popolato, Azure AD Connect scrive l'attributo msDS-ConsistencyGuid toohello indietro di objectGUID valore in Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="6a08b-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="6a08b-171">Dopo aver compilato l'attributo msDS-ConsistencyGuid hello, Azure AD Connect quindi Esporta hello oggetto tooAzure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6a08b-171">After hello msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports hello object tooAzure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="6a08b-172">Una volta una locale oggetto Active Directory viene importato in Azure AD Connect (che viene importato nel hello spazio connettore di Active Directory e proiettati in hello Metaverse), non è non possibile modificare il valore di sourceAnchor più.</span><span class="sxs-lookup"><span data-stu-id="6a08b-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into hello AD Connector Space and projected into hello Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="6a08b-173">valore di sourceAnchor hello toospecify per un dato locale AD oggetto, configurare l'attributo msDS-ConsistencyGuid prima viene importato in Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6a08b-173">toospecify hello sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="6a08b-174">È necessaria l'autorizzazione</span><span class="sxs-lookup"><span data-stu-id="6a08b-174">Permission required</span></span>
<span data-ttu-id="6a08b-175">Per toowork questa funzionalità, è necessario concedere a hello AD DS account utilizzato toosynchronize con Active Directory locale attributo msDS-ConsistencyGuid toohello di autorizzazione scrittura in Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="6a08b-175">For this feature toowork, hello AD DS account used toosynchronize with on-premises Active Directory must be granted write permission toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature---new-installation"></a><span data-ttu-id="6a08b-176">Come tooenable hello funzionalità ConsistencyGuid - nuova installazione</span><span class="sxs-lookup"><span data-stu-id="6a08b-176">How tooenable hello ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="6a08b-177">È possibile abilitare l'utilizzo di hello di ConsistencyGuid come sourceAnchor durante l'installazione di nuovo.</span><span class="sxs-lookup"><span data-stu-id="6a08b-177">You can enable hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="6a08b-178">Questa sezione descrive dettagliatamente sia l'installazione rapida che quella personalizzata.</span><span class="sxs-lookup"><span data-stu-id="6a08b-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="6a08b-179">Solo versioni più recenti di Azure AD Connect (1.1.524.0 e dopo) supporta hello come ConsistencyGuid sourceAnchor durante l'installazione di nuovo.</span><span class="sxs-lookup"><span data-stu-id="6a08b-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature"></a><span data-ttu-id="6a08b-180">Come tooenable hello ConsistencyGuid funzionalità</span><span class="sxs-lookup"><span data-stu-id="6a08b-180">How tooenable hello ConsistencyGuid feature</span></span>
<span data-ttu-id="6a08b-181">Attualmente, la funzione hello può essere abilitata solo durante l'installazione di Azure AD Connect di nuovo solo.</span><span class="sxs-lookup"><span data-stu-id="6a08b-181">Currently, hello feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="6a08b-182">Installazione rapida</span><span class="sxs-lookup"><span data-stu-id="6a08b-182">Express Installation</span></span>
<span data-ttu-id="6a08b-183">Quando si installa Azure AD Connect con la modalità di Express, procedura guidata di Azure AD Connect hello determina automaticamente toouse attributo hello Active Directory più appropriato come attributo sourceAnchor hello utilizzando hello seguente logica:</span><span class="sxs-lookup"><span data-stu-id="6a08b-183">When installing Azure AD Connect with Express mode, hello Azure AD Connect wizard automatically determines hello most appropriate AD attribute toouse as hello sourceAnchor attribute using hello following logic:</span></span>

* <span data-ttu-id="6a08b-184">In primo luogo, hello Azure AD Connect guidata query attributo hello AD tooretrieve tenant Azure AD come hello attributo sourceAnchor nell'installazione di hello precedente Azure AD Connect (se presente).</span><span class="sxs-lookup"><span data-stu-id="6a08b-184">First, hello Azure AD Connect wizard queries your Azure AD tenant tooretrieve hello AD attribute used as hello sourceAnchor attribute in hello previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="6a08b-185">Se queste informazioni sono disponibili, Azure AD Connect utilizza l'attributo hello stesso Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6a08b-185">If this information is available, Azure AD Connect uses hello same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="6a08b-186">Solo versioni più recenti di Azure AD Connect (1.1.524.0 e dopo) archivia le informazioni nel tenant di Azure AD sull'attributo sourceAnchor hello utilizzato durante l'installazione.</span><span class="sxs-lookup"><span data-stu-id="6a08b-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about hello sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="6a08b-187">Le versioni precedenti di Azure AD Connect non lo consentono.</span><span class="sxs-lookup"><span data-stu-id="6a08b-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="6a08b-188">Se le informazioni sull'attributo sourceAnchor hello utilizzato non sono disponibile, la procedura guidata hello Controlla stato di hello dell'attributo msDS-ConsistencyGuid hello in Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="6a08b-188">If information about hello sourceAnchor attribute used isn't available, hello wizard checks hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="6a08b-189">Se l'attributo hello non è configurato su qualsiasi oggetto nella directory di hello, guidata hello utilizza hello msDS-ConsistencyGuid come attributo sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-189">If hello attribute isn't configured on any object in hello directory, hello wizard uses hello msDS-ConsistencyGuid as hello sourceAnchor attribute.</span></span> <span data-ttu-id="6a08b-190">Se l'attributo hello è configurato per uno o più oggetti di directory di hello, la procedura guidata hello conclude attributo hello è utilizzato da altre applicazioni e non è adatto come attributo sourceAnchor...</span><span class="sxs-lookup"><span data-stu-id="6a08b-190">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="6a08b-191">In questo caso, la procedura guidata hello fallback toousing objectGUID come attributo sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-191">In which case, hello wizard falls back toousing objectGUID as hello sourceAnchor attribute.</span></span>

* <span data-ttu-id="6a08b-192">Una volta che viene stabilito l'attributo sourceAnchor hello, la procedura guidata hello archivia le informazioni di hello nel tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6a08b-192">Once hello sourceAnchor attribute is decided, hello wizard stores hello information in your Azure AD tenant.</span></span> <span data-ttu-id="6a08b-193">Hello informazioni verranno utilizzate da un'installazione di future di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6a08b-193">hello information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="6a08b-194">Al termine dell'installazione rapida, la procedura guidata hello informa l'utente è stato selezionato l'attributo come attributo di ancoraggio di origine hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-194">Once Express installation completes, hello wizard informs you which attribute has been picked as hello Source Anchor attribute.</span></span>

![La procedura guidata segnala l'attributo di AD selezionato come sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="6a08b-196">Installazione personalizzata</span><span class="sxs-lookup"><span data-stu-id="6a08b-196">Custom installation</span></span>
<span data-ttu-id="6a08b-197">Quando si installa Azure AD Connect con modalità personalizzata, la procedura guidata di Azure AD Connect hello fornisce due opzioni quando si configura l'attributo sourceAnchor:</span><span class="sxs-lookup"><span data-stu-id="6a08b-197">When installing Azure AD Connect with Custom mode, hello Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Installazione personalizzata - Configurazione di sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="6a08b-199">Impostazione</span><span class="sxs-lookup"><span data-stu-id="6a08b-199">Setting</span></span> | <span data-ttu-id="6a08b-200">Descrizione</span><span class="sxs-lookup"><span data-stu-id="6a08b-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="6a08b-201">Consentire ad Azure di gestire l'ancoraggio di origine hello per me</span><span class="sxs-lookup"><span data-stu-id="6a08b-201">Let Azure manage hello source anchor for me</span></span> | <span data-ttu-id="6a08b-202">Selezionare questa opzione se si desidera attributo hello toopick di Azure AD per l'utente.</span><span class="sxs-lookup"><span data-stu-id="6a08b-202">Select this option if you want Azure AD toopick hello attribute for you.</span></span> <span data-ttu-id="6a08b-203">Se si seleziona questa opzione, Azure AD Connect guidata applica hello stesso [la logica di selezione attributo sourceAnchor utilizzata durante l'installazione di Express](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="6a08b-203">If you select this option, Azure AD Connect wizard applies hello same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="6a08b-204">Installazione tooExpress simile, la procedura guidata hello informa l'attributo è stato selezionato come hello attributo di ancoraggio di origine al termine dell'installazione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="6a08b-204">Similar tooExpress installation, hello wizard informs you which attribute has been picked as hello Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="6a08b-205">Attributo specifico</span><span class="sxs-lookup"><span data-stu-id="6a08b-205">A specific attribute</span></span> | <span data-ttu-id="6a08b-206">Selezionare questa opzione se si desidera toospecify un attributo di Active Directory esistente come attributo sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-206">Select this option if you wish toospecify an existing AD attribute as hello sourceAnchor attribute.</span></span> |

### <a name="how-tooenable-hello-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="6a08b-207">Come tooenable hello funzionalità ConsistencyGuid - distribuzione esistente</span><span class="sxs-lookup"><span data-stu-id="6a08b-207">How tooenable hello ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="6a08b-208">Se si dispone di una distribuzione di Azure AD Connect esistente che utilizza objectGUID come attributo di ancoraggio di origine hello, è possibile tornare toousing ConsistencyGuid invece.</span><span class="sxs-lookup"><span data-stu-id="6a08b-208">If you have an existing Azure AD Connect deployment which is using objectGUID as hello Source Anchor attribute, you can switch it toousing ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="6a08b-209">Solo versioni più recenti di Azure AD Connect (1.1.552.0 e dopo) supporta il passaggio da tooConsistencyGuid ObjectGuid come attributo di ancoraggio di origine hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid tooConsistencyGuid as hello Source Anchor attribute.</span></span>

<span data-ttu-id="6a08b-210">tooswitch da tooConsistencyGuid objectGUID come attributo di ancoraggio di origine hello:</span><span class="sxs-lookup"><span data-stu-id="6a08b-210">tooswitch from objectGUID tooConsistencyGuid as hello Source Anchor attribute:</span></span>

1. <span data-ttu-id="6a08b-211">Avviare la procedura guidata Connect hello Azure AD e fare clic su **configura** schermata di toogo toohello attività.</span><span class="sxs-lookup"><span data-stu-id="6a08b-211">Start hello Azure AD Connect wizard and click **Configure** toogo toohello Tasks screen.</span></span>

2. <span data-ttu-id="6a08b-212">Seleziona hello **configurare ancoraggio di origine** attività opzione e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="6a08b-212">Select hello **Configure Source Anchor** task option and click **Next**.</span></span>

   ![Abilitare ConsistencyGuid per una distribuzione esistente: passaggio 2](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="6a08b-214">Immettere le credenziali di amministratore di Azure AD e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="6a08b-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="6a08b-215">Procedura guidata di Azure AD Connect consente di analizzare lo stato di hello dell'attributo msDS-ConsistencyGuid hello in Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="6a08b-215">Azure AD Connect wizard analyzes hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="6a08b-216">Se l'attributo hello non è configurato su qualsiasi oggetto nella directory, Azure AD Connect conclude che altre applicazioni non sono attualmente in uso attributo hello ed sono sicuro toouse hello come attributo di ancoraggio di origine hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-216">If hello attribute isn't configured on any object in hello directory, Azure AD Connect concludes that no other application is currently using hello attribute and is safe toouse it as hello Source Anchor attribute.</span></span> <span data-ttu-id="6a08b-217">Fare clic su **Avanti** toocontinue.</span><span class="sxs-lookup"><span data-stu-id="6a08b-217">Click **Next** toocontinue.</span></span>

   ![Abilitare ConsistencyGuid per una distribuzione esistente: passaggio 4](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="6a08b-219">In hello **tooConfigure pronto** schermata, fare clic su **configura** modifica della configurazione toomake hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-219">In hello **Ready tooConfigure** screen, click **Configure** toomake hello configuration change.</span></span>

   ![Abilitare ConsistencyGuid per una distribuzione esistente: passaggio 5](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="6a08b-221">Una volta completata la configurazione di hello, la procedura guidata hello indica che msDS-ConsistencyGuid ora viene utilizzata come attributo di ancoraggio di origine hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-221">Once hello configuration completes, hello wizard indicates that msDS-ConsistencyGuid is now being used as hello Source Anchor attribute.</span></span>

   ![Abilitare ConsistencyGuid per una distribuzione esistente: passaggio 6](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="6a08b-223">Durante l'analisi di hello (passaggio 4), se l'attributo hello è configurato per uno o più oggetti di directory di hello, la procedura guidata hello conclude attributo hello è utilizzato da un'altra applicazione e restituisce un errore, come illustrato nel seguente diagramma hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-223">During hello analysis (step 4), if hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by another application and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="6a08b-224">Se si è certi che tale attributo hello non sia utilizzato da applicazioni esistenti, è necessario toocontact il supporto per informazioni su come toosuppress hello errore.</span><span class="sxs-lookup"><span data-stu-id="6a08b-224">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Abilitare ConsistencyGuid per una distribuzione esistente: errore](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="6a08b-226">Impatto su AD FS o configurazione della federazione di terze parti</span><span class="sxs-lookup"><span data-stu-id="6a08b-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="6a08b-227">Se si usa Azure AD Connect toomanage distribuzione di ADFS in locale, Azure AD Connect hello Aggiorna automaticamente l'attributo hello attestazione rules toouse hello stesso Active Directory come sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6a08b-227">If you are using Azure AD Connect toomanage on-premises AD FS deployment, hello Azure AD Connect automatically updates hello claim rules toouse hello same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="6a08b-228">In questo modo tale attestazione ImmutableID hello generato da ADFS è coerente con hello sourceAnchor valori esportati tooAzure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6a08b-228">This ensures that hello ImmutableID claim generated by ADFS is consistent with hello sourceAnchor values exported tooAzure AD.</span></span>

<span data-ttu-id="6a08b-229">Se si sta gestendo ADFS all'esterno di Azure AD Connect o si utilizzano server federativi di terze parti per l'autenticazione, è necessario aggiornare manualmente le regole attestazioni hello per ImmutableID toobe attestazione coerente con i valori di attributo sourceAnchor hello esportata tooAzure Active Directory come descritto nella sezione articolo [modifica AD FS regole attestazione](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="6a08b-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update hello claim rules for ImmutableID claim toobe consistent with hello sourceAnchor values exported tooAzure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="6a08b-230">la procedura guidata Hello restituisce hello seguente avviso al termine dell'installazione:</span><span class="sxs-lookup"><span data-stu-id="6a08b-230">hello wizard returns hello following warning after installation completes:</span></span>

![Configurazione della federazione di terze parti](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-tooexisting-deployment"></a><span data-ttu-id="6a08b-232">Aggiungendo la distribuzione tooexisting le directory nuova</span><span class="sxs-lookup"><span data-stu-id="6a08b-232">Adding new directories tooexisting deployment</span></span>
<span data-ttu-id="6a08b-233">Si supponga di che aver distribuito Azure AD Connect con abilitata la funzionalità ConsistencyGuid hello e si desidera tooadd un'altra distribuzione toohello di directory.</span><span class="sxs-lookup"><span data-stu-id="6a08b-233">Suppose you have deployed Azure AD Connect with hello ConsistencyGuid feature enabled, and now you would like tooadd another directory toohello deployment.</span></span> <span data-ttu-id="6a08b-234">Quando si tenta di directory hello tooadd, procedura guidata di Azure AD Connect Controlla stato hello dell'attributo mSDS-ConsistencyGuid hello nella directory hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-234">When you try tooadd hello directory, Azure AD Connect wizard checks hello state of hello mSDS-ConsistencyGuid attribute in hello directory.</span></span> <span data-ttu-id="6a08b-235">Se l'attributo hello è configurato per uno o più oggetti di directory di hello, la procedura guidata hello conclude attributo hello è utilizzato da altre applicazioni e restituisce un errore, come illustrato nel seguente diagramma hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-235">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="6a08b-236">Se si è certi che tale attributo hello non sia utilizzato da applicazioni esistenti, è necessario toocontact il supporto per informazioni su come toosuppress hello errore.</span><span class="sxs-lookup"><span data-stu-id="6a08b-236">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Aggiungendo la distribuzione tooexisting le directory nuova](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="6a08b-238">Accesso ad Azure AD</span><span class="sxs-lookup"><span data-stu-id="6a08b-238">Azure AD sign-in</span></span>
<span data-ttu-id="6a08b-239">Durante l'integrazione della directory locale con Azure AD, è importante toounderstand come le impostazioni di sincronizzazione hello possono influire sul utente modo hello autentica.</span><span class="sxs-lookup"><span data-stu-id="6a08b-239">While integrating your on-premises directory with Azure AD, it is important toounderstand how hello synchronization settings can affect hello way user authenticates.</span></span> <span data-ttu-id="6a08b-240">Azure AD Usa utente di hello tooauthenticate userPrincipalName (UPN).</span><span class="sxs-lookup"><span data-stu-id="6a08b-240">Azure AD uses userPrincipalName (UPN) tooauthenticate hello user.</span></span> <span data-ttu-id="6a08b-241">Tuttavia, quando si sincronizzano gli utenti, è necessario scegliere hello attributo toobe utilizzata per il valore di userPrincipalName con attenzione.</span><span class="sxs-lookup"><span data-stu-id="6a08b-241">However, when you synchronize your users, you must choose hello attribute toobe used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-hello-attribute-for-userprincipalname"></a><span data-ttu-id="6a08b-242">Attributo hello per userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="6a08b-242">Choosing hello attribute for userPrincipalName</span></span>
<span data-ttu-id="6a08b-243">Quando si seleziona attributo hello per fornire valore hello toobe UPN usato in uno di Azure deve verificare</span><span class="sxs-lookup"><span data-stu-id="6a08b-243">When you are selecting hello attribute for providing hello value of UPN toobe used in Azure one should ensure</span></span>

* <span data-ttu-id="6a08b-244">i valori di attributo Hello conforme toohello UPN sintassi (RFC 822) deve essere formato hellousername@domain</span><span class="sxs-lookup"><span data-stu-id="6a08b-244">hello attribute values conform toohello UPN syntax (RFC 822), that is it should be of hello format username@domain</span></span>
* <span data-ttu-id="6a08b-245">suffisso Hello in hello valori corrispondenze tooone di hello i domini personalizzati verificati in Azure AD</span><span class="sxs-lookup"><span data-stu-id="6a08b-245">hello suffix in hello values matches tooone of hello verified custom domains in Azure AD</span></span>

<span data-ttu-id="6a08b-246">In Impostazioni rapide, hello presuppone scelta per l'attributo hello è userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="6a08b-246">In express settings, hello assumed choice for hello attribute is userPrincipalName.</span></span> <span data-ttu-id="6a08b-247">Se l'attributo userPrincipalName hello non contiene il valore di hello del toosign gli utenti in tooAzure, sarà quindi è necessario scegliere **installazione personalizzata**.</span><span class="sxs-lookup"><span data-stu-id="6a08b-247">If hello userPrincipalName attribute does not contain hello value you want your users toosign in tooAzure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="6a08b-248">Stato del dominio personalizzato e UPN</span><span class="sxs-lookup"><span data-stu-id="6a08b-248">Custom domain state and UPN</span></span>
<span data-ttu-id="6a08b-249">È importante tooensure che vi sia un dominio verificato per un suffisso UPN hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-249">It is important tooensure that there is a verified domain for hello UPN suffix.</span></span>

<span data-ttu-id="6a08b-250">John è un utente di contoso.com. Si desidera John toouse hello locale UPN john@contoso.com toosign in tooAzure dopo aver siano stati sincronizzati utenti tooyour Azure Active directory contoso.onmicrosoft.com. toodo, pertanto, è necessario tooadd e verificare contoso.com come un dominio personalizzato in Azure AD prima di iniziare esegue la sincronizzazione degli utenti hello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-250">John is a user in contoso.com. You want John toouse hello on-premises UPN john@contoso.com toosign in tooAzure after you have synced users tooyour Azure AD directory contoso.onmicrosoft.com. toodo so, you need tooadd and verify contoso.com as a custom domain in Azure AD before you can start syncing hello users.</span></span> <span data-ttu-id="6a08b-251">Se il suffisso UPN hello John, ad esempio contoso.com, non corrisponde a un dominio verificato in Azure AD, Azure Active Directory sostituisce suffisso UPN hello con contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="6a08b-251">If hello UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces hello UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="6a08b-252">Domini locali non instradabili e UPN per Azure AD</span><span class="sxs-lookup"><span data-stu-id="6a08b-252">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="6a08b-253">Alcune organizzazioni usano domini non instradabili, ad esempio contoso.local, o domini semplici con etichetta singola come contoso.</span><span class="sxs-lookup"><span data-stu-id="6a08b-253">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="6a08b-254">Non è in grado di tooverify un dominio non è instradabile in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6a08b-254">You are not able tooverify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="6a08b-255">Azure AD Connect è possibile sincronizzare tooonly un dominio verificato in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6a08b-255">Azure AD Connect can sync tooonly a verified domain in Azure AD.</span></span> <span data-ttu-id="6a08b-256">Quando si crea una directory di Azure AD, viene creato un dominio instradabile che diventa dominio predefinito per Azure AD, ad esempio contoso.onmicrosoft.com. Pertanto, diventa necessario tooverify qualsiasi altro dominio instradabile in tale scenario nel caso in cui si desidera dominio onmicrosoft.com predefinito di toosync toohello.</span><span class="sxs-lookup"><span data-stu-id="6a08b-256">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com. Therefore, it becomes necessary tooverify any other routable domain in such a scenario in case you don't want toosync toohello default onmicrosoft.com domain.</span></span>

<span data-ttu-id="6a08b-257">Lettura [aggiungere tooAzure di nome Active Directory del dominio personalizzato](../active-directory-add-domain.md) per ulteriori informazioni sull'aggiunta e verifica i domini.</span><span class="sxs-lookup"><span data-stu-id="6a08b-257">Read [Add your custom domain name tooAzure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="6a08b-258">Azure AD Connect rileva se l'esecuzione avviene in un ambiente di dominio non instradabile e avvisa che è opportuno non proseguire con le impostazioni rapide.</span><span class="sxs-lookup"><span data-stu-id="6a08b-258">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="6a08b-259">Se si sta operando in un dominio non è instradabile, quindi è probabile che l'UPN degli utenti hello hello è troppo suffissi non instradabile.</span><span class="sxs-lookup"><span data-stu-id="6a08b-259">If you are operating in a non-routable domain, then it is likely that hello UPN of hello users have non-routable suffixes too.</span></span> <span data-ttu-id="6a08b-260">Ad esempio, se si eseguono in contoso. Local, Azure AD Connect suggerito è toouse impostazioni personalizzate, invece di usare impostazioni rapide.</span><span class="sxs-lookup"><span data-stu-id="6a08b-260">For example, if you are running under contoso.local, Azure AD Connect suggests you toouse custom settings rather than using express settings.</span></span> <span data-ttu-id="6a08b-261">Con le impostazioni personalizzate, si è l'attributo hello in grado di toospecify che deve essere utilizzato come toosign UPN in tooAzure dopo che gli utenti di hello sono sincronizzati tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="6a08b-261">Using custom settings, you are able toospecify hello attribute that should be used as UPN toosign in tooAzure after hello users are synced tooAzure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6a08b-262">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="6a08b-262">Next steps</span></span>
<span data-ttu-id="6a08b-263">Altre informazioni su [Integrazione delle identità locali con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="6a08b-263">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
