---
title: backup di lenta aaaTroubleshoot di file e cartelle in Backup di Azure | Documenti Microsoft
description: Fornisce la risoluzione dei problemi toohelp indicazioni per la diagnosi causa hello dei problemi di prestazioni di Backup di Azure
services: backup
documentationcenter: 
author: genlin
manager: cshepard
editor: 
ms.assetid: e379180a-db13-4e0c-90e4-28e5dd6f5b14
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: genli
ms.openlocfilehash: 21d79bbd03c2706bc43fcc7c14020cffd6b919c7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-slow-backup-of-files-and-folders-in-azure-backup"></a><span data-ttu-id="d0f1a-103">Risolvere i problemi di rallentamento delle prestazioni di backup di file e cartelle in Backup di Azure</span><span class="sxs-lookup"><span data-stu-id="d0f1a-103">Troubleshoot slow backup of files and folders in Azure Backup</span></span>
<span data-ttu-id="d0f1a-104">In questo articolo vengono fornite indicazioni sulla risoluzione dei problemi toohelp si diagnosticare hello causa del rallentamento delle prestazioni di backup di file e cartelle, quando si utilizza il Backup di Azure.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-104">This article provides troubleshooting guidance toohelp you diagnose hello cause of slow backup performance for files and folders when you're using Azure Backup.</span></span> <span data-ttu-id="d0f1a-105">Quando si usa hello Azure Backup agent tooback dei file, processo di backup hello potrebbe richiedere più tempo del previsto.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-105">When you use hello Azure Backup agent tooback up files, hello backup process might take longer than expected.</span></span> <span data-ttu-id="d0f1a-106">Questo ritardo può essere causato da uno o più dei seguenti hello:</span><span class="sxs-lookup"><span data-stu-id="d0f1a-106">This delay might be caused by one or more of hello following:</span></span>

* [<span data-ttu-id="d0f1a-107">Sono presenti eventuali colli di bottiglia nel computer di hello che viene eseguito il backup.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-107">There are performance bottlenecks on hello computer that’s being backed up.</span></span>](#cause1)
* [<span data-ttu-id="d0f1a-108">Un altro processo o del software antivirus interferisce con hello il processo di Backup di Azure.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-108">Another process or antivirus software is interfering with hello Azure Backup process.</span></span>](#cause2)
* [<span data-ttu-id="d0f1a-109">l'agente di Backup Hello è in esecuzione in una macchina virtuale di Azure (VM).</span><span class="sxs-lookup"><span data-stu-id="d0f1a-109">hello Backup agent is running on an Azure virtual machine (VM).</span></span>](#cause3)  
* [<span data-ttu-id="d0f1a-110">Viene eseguito il backup di un numero elevato di file (milioni).</span><span class="sxs-lookup"><span data-stu-id="d0f1a-110">You're backing up a large number (millions) of files.</span></span>](#cause4)

<span data-ttu-id="d0f1a-111">Prima di iniziare la risoluzione dei problemi, si consiglia di scaricare e installare hello [più recenti dell'agente Azure Backup](http://aka.ms/azurebackup_agent).</span><span class="sxs-lookup"><span data-stu-id="d0f1a-111">Before you start troubleshooting issues, we recommend that you download and install hello [latest Azure Backup agent](http://aka.ms/azurebackup_agent).</span></span> <span data-ttu-id="d0f1a-112">È apportare aggiornamenti frequenti toohello Backup agente toofix vari problemi, aggiungere le funzionalità e migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-112">We make frequent updates toohello Backup agent toofix various issues, add features, and improve performance.</span></span>

<span data-ttu-id="d0f1a-113">È inoltre consigliabile esaminare hello [domande frequenti su servizio di Backup di Azure](backup-azure-backup-faq.md) toomake che non si verificano uno hello comuni di problemi di configurazione.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-113">We also strongly recommend that you review hello [Azure Backup service FAQ](backup-azure-backup-faq.md) toomake sure you're not experiencing any of hello common configuration issues.</span></span>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

<a id="cause1"></a>

## <a name="cause-performance-bottlenecks-on-hello-computer"></a><span data-ttu-id="d0f1a-114">Causa: Colli di bottiglia delle prestazioni nel computer di hello</span><span class="sxs-lookup"><span data-stu-id="d0f1a-114">Cause: Performance bottlenecks on hello computer</span></span>
<span data-ttu-id="d0f1a-115">Colli di bottiglia sui computer hello che viene eseguito il backup possono causare ritardi.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-115">Bottlenecks on hello computer that's being backed up can cause delays.</span></span> <span data-ttu-id="d0f1a-116">Ad esempio, hello toodisk tooread o di scrittura di capacità del computer, o dati toosend larghezza di banda disponibile in rete hello, può causare colli di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-116">For example, hello computer's ability tooread or write toodisk, or available bandwidth toosend data over hello network, can cause bottlenecks.</span></span>

<span data-ttu-id="d0f1a-117">Windows fornisce uno strumento incorporato che viene chiamato [Performance Monitor](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) toodetect (Perfmon) i colli di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-117">Windows provides a built-in tool that's called [Performance Monitor](https://technet.microsoft.com/magazine/2008.08.pulse.aspx) (Perfmon) toodetect these bottlenecks.</span></span>

<span data-ttu-id="d0f1a-118">Ecco alcuni contatori delle prestazioni e intervalli che possono essere utili per diagnosticare i colli di bottiglia e ottenere backup ottimali.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-118">Here are some performance counters and ranges that can be helpful in diagnosing bottlenecks for optimal backups.</span></span>

| <span data-ttu-id="d0f1a-119">Contatore</span><span class="sxs-lookup"><span data-stu-id="d0f1a-119">Counter</span></span> | <span data-ttu-id="d0f1a-120">Stato</span><span class="sxs-lookup"><span data-stu-id="d0f1a-120">Status</span></span> |
| --- | --- |
| <span data-ttu-id="d0f1a-121">Disco logico (disco fisico) - % inattività</span><span class="sxs-lookup"><span data-stu-id="d0f1a-121">Logical Disk(Physical Disk)--%idle</span></span> |<span data-ttu-id="d0f1a-122">• too50 inattivo 100% % inattivo = integro</span><span class="sxs-lookup"><span data-stu-id="d0f1a-122">• 100% idle too50% idle = Healthy</span></span></br><span data-ttu-id="d0f1a-123">• too20 inattivo 49% % inattivo = avviso o un monitoraggio</span><span class="sxs-lookup"><span data-stu-id="d0f1a-123">• 49% idle too20% idle = Warning or Monitor</span></span></br><span data-ttu-id="d0f1a-124">• too0 inattivo % 19% inattivo = critico o specifiche</span><span class="sxs-lookup"><span data-stu-id="d0f1a-124">• 19% idle too0% idle = Critical or Out of Spec</span></span> |
| <span data-ttu-id="d0f1a-125">Disco logico (disco fisico) - % Media letture o scritture disco/sec</span><span class="sxs-lookup"><span data-stu-id="d0f1a-125">Logical Disk(Physical Disk)--%Avg. Disk Sec Read or Write</span></span> |<span data-ttu-id="d0f1a-126">• 0,001 ms too0.015 ms = integro</span><span class="sxs-lookup"><span data-stu-id="d0f1a-126">• 0.001 ms too0.015 ms  = Healthy</span></span></br><span data-ttu-id="d0f1a-127">• 0.015 ms too0.025 ms = avviso o un monitoraggio</span><span class="sxs-lookup"><span data-stu-id="d0f1a-127">• 0.015 ms too0.025 ms = Warning or Monitor</span></span></br><span data-ttu-id="d0f1a-128">• Da ms 0,026 e oltre = critico o fuori specifica</span><span class="sxs-lookup"><span data-stu-id="d0f1a-128">• 0.026 ms or longer = Critical or Out of Spec</span></span> |
| <span data-ttu-id="d0f1a-129">Disco logico (disco fisico) - Lunghezza corrente coda del disco (per tutte le istanze)</span><span class="sxs-lookup"><span data-stu-id="d0f1a-129">Logical Disk(Physical Disk)--Current Disk Queue Length (for all instances)</span></span> |<span data-ttu-id="d0f1a-130">80 richieste per più di 6 minuti</span><span class="sxs-lookup"><span data-stu-id="d0f1a-130">80 requests for more than 6 minutes</span></span> |
| <span data-ttu-id="d0f1a-131">Memoria - Byte del pool non di paging</span><span class="sxs-lookup"><span data-stu-id="d0f1a-131">Memory--Pool Non Paged Bytes</span></span> |<span data-ttu-id="d0f1a-132">• Meno del 60% del pool utilizzato = integro</span><span class="sxs-lookup"><span data-stu-id="d0f1a-132">• Less than 60% of pool consumed = Healthy</span></span><br><span data-ttu-id="d0f1a-133">• il 61% too80% del pool utilizzate = avviso o un monitoraggio</span><span class="sxs-lookup"><span data-stu-id="d0f1a-133">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="d0f1a-134">• Più dell'80% del pool utilizzato = critico o fuori specifica</span><span class="sxs-lookup"><span data-stu-id="d0f1a-134">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="d0f1a-135">Memoria - Byte del pool di paging</span><span class="sxs-lookup"><span data-stu-id="d0f1a-135">Memory--Pool Paged Bytes</span></span> |<span data-ttu-id="d0f1a-136">• Meno del 60% del pool utilizzato = integro</span><span class="sxs-lookup"><span data-stu-id="d0f1a-136">• Less than 60% of pool consumed = Healthy</span></span></br><span data-ttu-id="d0f1a-137">• il 61% too80% del pool utilizzate = avviso o un monitoraggio</span><span class="sxs-lookup"><span data-stu-id="d0f1a-137">• 61% too80% of pool consumed = Warning or Monitor</span></span></br><span data-ttu-id="d0f1a-138">• Più dell'80% del pool utilizzato = critico o fuori specifica</span><span class="sxs-lookup"><span data-stu-id="d0f1a-138">• Greater than 80% pool consumed = Critical or Out of Spec</span></span> |
| <span data-ttu-id="d0f1a-139">Memoria - MByte disponibili</span><span class="sxs-lookup"><span data-stu-id="d0f1a-139">Memory--Available Megabytes</span></span> |<span data-ttu-id="d0f1a-140">• 50% o più di memoria libera disponibile = integro</span><span class="sxs-lookup"><span data-stu-id="d0f1a-140">• 50% of free memory available or more = Healthy</span></span></br><span data-ttu-id="d0f1a-141">• 25% di memoria libera disponibile = monitoraggio</span><span class="sxs-lookup"><span data-stu-id="d0f1a-141">• 25% of free memory available = Monitor</span></span></br><span data-ttu-id="d0f1a-142">• 10% di memoria libera disponibile = avviso</span><span class="sxs-lookup"><span data-stu-id="d0f1a-142">• 10% of free memory available = Warning</span></span></br><span data-ttu-id="d0f1a-143">• Meno di 100 MB o 5% della memoria disponibile = critico o fuori specifica</span><span class="sxs-lookup"><span data-stu-id="d0f1a-143">• Less than 100 MB or 5% of free memory available = Critical or Out of Spec</span></span> |
| <span data-ttu-id="d0f1a-144">Processore - \%Tempo processore (tutte le istanze)</span><span class="sxs-lookup"><span data-stu-id="d0f1a-144">Processor--\%Processor Time (all instances)</span></span> |<span data-ttu-id="d0f1a-145">• Meno del 60% utilizzato = integro</span><span class="sxs-lookup"><span data-stu-id="d0f1a-145">• Less than 60% consumed = Healthy</span></span></br><span data-ttu-id="d0f1a-146">• il 61% too90% utilizzati = monitoraggio o attenzione</span><span class="sxs-lookup"><span data-stu-id="d0f1a-146">• 61% too90% consumed = Monitor or Caution</span></span></br><span data-ttu-id="d0f1a-147">• too100 91% % utilizzati = avviso critico</span><span class="sxs-lookup"><span data-stu-id="d0f1a-147">• 91% too100% consumed = Critical</span></span> |

> [!NOTE]
> <span data-ttu-id="d0f1a-148">Se si determina che l'infrastruttura di hello è provocato da hello, è consigliabile che la deframmentazione dischi hello regolarmente per ottenere prestazioni migliori.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-148">If you determine that hello infrastructure is hello culprit, we recommend that you defragment hello disks regularly for better performance.</span></span>
>
>

<a id="cause2"></a>

## <a name="cause-another-process-or-antivirus-software-interfering-with-azure-backup"></a><span data-ttu-id="d0f1a-149">Causa: Un altro processo o un software antivirus interferisce con Backup di Azure</span><span class="sxs-lookup"><span data-stu-id="d0f1a-149">Cause: Another process or antivirus software interfering with Azure Backup</span></span>
<span data-ttu-id="d0f1a-150">Abbiamo visto più istanze in cui altri processi nel sistema di Windows hello sono influenzate negativamente sulle prestazioni di hello processo dell'agente di Backup di Azure.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-150">We've seen several instances where other processes in hello Windows system have negatively affected performance of hello Azure Backup agent process.</span></span> <span data-ttu-id="d0f1a-151">Ad esempio, se utilizzare l'agente di Backup di Azure hello e un altro programma tooback dei dati o se è in esecuzione un software antivirus e un blocco su file toobe ha eseguito il backup, hello più blocchi sui file potrebbero causare conflitti.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-151">For example, if you use both hello Azure Backup agent and another program tooback up data, or if antivirus software is running and has a lock on files toobe backed up, hello multiple locks on files might cause contention.</span></span> <span data-ttu-id="d0f1a-152">In questo caso, potrebbe non riuscire backup hello o processo hello potrebbe richiedere più tempo del previsto.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-152">In this situation, hello backup might fail, or hello job might take longer than expected.</span></span>

<span data-ttu-id="d0f1a-153">Hello indicazione migliore in questo scenario è tooturn off hello toosee altro programma di backup se viene modificato l'ora del backup hello di hello Azure Backup agent.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-153">hello best recommendation in this scenario is tooturn off hello other backup program toosee whether hello backup time for hello Azure Backup agent changes.</span></span> <span data-ttu-id="d0f1a-154">In genere, assicurandosi che non eseguono più processi di backup contemporaneamente hello è sufficiente tooprevent di influire su altro.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-154">Usually, making sure that multiple backup jobs are not running at hello same time is sufficient tooprevent them from affecting each other.</span></span>

<span data-ttu-id="d0f1a-155">Per i programmi antivirus, è consigliabile escludere i seguenti hello percorsi di file e:</span><span class="sxs-lookup"><span data-stu-id="d0f1a-155">For antivirus programs, we recommend that you exclude hello following files and locations:</span></span>

* <span data-ttu-id="d0f1a-156">C:\Programmi\Agente di Servizi di ripristino di Microsoft Azure\bin\cbengine.exe come processo</span><span class="sxs-lookup"><span data-stu-id="d0f1a-156">C:\Program Files\Microsoft Azure Recovery Services Agent\bin\cbengine.exe as a process</span></span>
* <span data-ttu-id="d0f1a-157">Cartelle in C:\Programmi\Agente di Servizi di ripristino di Microsoft Azure\\</span><span class="sxs-lookup"><span data-stu-id="d0f1a-157">C:\Program Files\Microsoft Azure Recovery Services Agent\ folders</span></span>
* <span data-ttu-id="d0f1a-158">Percorso dei file temporanei (se non si utilizza la posizione standard hello)</span><span class="sxs-lookup"><span data-stu-id="d0f1a-158">Scratch location (if you're not using hello standard location)</span></span>

<a id="cause3"></a>

## <a name="cause-backup-agent-running-on-an-azure-virtual-machine"></a><span data-ttu-id="d0f1a-159">Causa: L'agente di Backup è in esecuzione in una macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="d0f1a-159">Cause: Backup agent running on an Azure virtual machine</span></span>
<span data-ttu-id="d0f1a-160">Se si esegue l'agente di Backup hello in una macchina virtuale, è possibile che le prestazioni risulterà più lenta rispetto a quando viene eseguito in un computer fisico.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-160">If you're running hello Backup agent on a VM, performance will be slower than when you run it on a physical machine.</span></span> <span data-ttu-id="d0f1a-161">È previsto a causa di limitazioni tooIOPS.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-161">This is expected due tooIOPS limitations.</span></span>  <span data-ttu-id="d0f1a-162">Tuttavia, è possibile ottimizzare le prestazioni di hello passando le unità dati hello sottoposti a backup tooAzure archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-162">However, you can optimize hello performance by switching hello data drives that are being backed up tooAzure Premium Storage.</span></span> <span data-ttu-id="d0f1a-163">Si sta lavorando correggere il problema e correzione hello sarà disponibile nelle versioni future.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-163">We're working on fixing this issue, and hello fix will be available in a future release.</span></span>

<a id="cause4"></a>

## <a name="cause-backing-up-a-large-number-millions-of-files"></a><span data-ttu-id="d0f1a-164">Causa: Viene eseguito il backup di un numero elevato di file (milioni)</span><span class="sxs-lookup"><span data-stu-id="d0f1a-164">Cause: Backing up a large number (millions) of files</span></span>
<span data-ttu-id="d0f1a-165">Lo spostamento di un grande volume di dati richiederà più tempo rispetto allo spostamento di un volume di dati inferiore.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-165">Moving a large volume of data will take longer than moving a smaller volume of data.</span></span> <span data-ttu-id="d0f1a-166">In alcuni casi, l'ora del backup è correlato toonot hello solo dimensioni di dati hello, ma anche il numero di hello di file o cartelle.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-166">In some cases, backup time is related toonot only hello size of hello data, but also hello number of files or folders.</span></span> <span data-ttu-id="d0f1a-167">Ciò vale soprattutto quando milioni di file di piccole dimensioni (pochi byte tooa alcuni kilobyte) viene eseguito il.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-167">This is especially true when millions of small files (a few bytes tooa few kilobytes) are being backed up.</span></span>

<span data-ttu-id="d0f1a-168">Questo comportamento è dovuto al fatto che mentre si esegue il backup dei dati hello e spostandola tooAzure, Azure contemporaneamente la catalogazione dei file.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-168">This behavior occurs because while you're backing up hello data and moving it tooAzure, Azure is simultaneously cataloging your files.</span></span> <span data-ttu-id="d0f1a-169">In alcuni casi rari, l'operazione di catalogo hello potrebbe richiedere più tempo del previsto.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-169">In some rare scenarios, hello catalog operation might take longer than expected.</span></span>

<span data-ttu-id="d0f1a-170">Hello seguendo gli indicatori consentono di comprendere collo di bottiglia hello e di conseguenza lavorare sui passaggi successivi hello:</span><span class="sxs-lookup"><span data-stu-id="d0f1a-170">hello following indicators can help you understand hello bottleneck and accordingly work on hello next steps:</span></span>

* <span data-ttu-id="d0f1a-171">**Interfaccia utente viene visualizzato lo stato di avanzamento per il trasferimento di dati hello**.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-171">**UI is showing progress for hello data transfer**.</span></span> <span data-ttu-id="d0f1a-172">dati Hello ancora trasferiti.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-172">hello data is still being transferred.</span></span> <span data-ttu-id="d0f1a-173">larghezza di banda Hello o dimensioni hello dei dati possono causare ritardi.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-173">hello network bandwidth or hello size of data might be causing delays.</span></span>
* <span data-ttu-id="d0f1a-174">**Interfaccia utente non viene visualizzato lo stato di avanzamento per il trasferimento di dati hello**.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-174">**UI is not showing progress for hello data transfer**.</span></span> <span data-ttu-id="d0f1a-175">Hello Open log si trova in C:\Microsoft Azure Recovery Services Agent\Temp e quindi verificare la hello FileProvider::EndData voce nel log di hello.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-175">Open hello logs located at C:\Microsoft Azure Recovery Services Agent\Temp, and then check for hello FileProvider::EndData entry in hello logs.</span></span> <span data-ttu-id="d0f1a-176">Questa voce indica che il trasferimento dei dati hello completato e avviene l'operazione di catalogo hello.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-176">This entry signifies that hello data transfer finished and hello catalog operation is happening.</span></span> <span data-ttu-id="d0f1a-177">Non annullare i processi di backup hello.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-177">Don't cancel hello backup jobs.</span></span> <span data-ttu-id="d0f1a-178">Al contrario, attendere un po' più hello catalogo operazione toofinish.</span><span class="sxs-lookup"><span data-stu-id="d0f1a-178">Instead, wait a little longer for hello catalog operation toofinish.</span></span> <span data-ttu-id="d0f1a-179">Se hello problema persiste, contattare [supporto tecnico di Azure](https://portal.azure.com/#create/Microsoft.Support).</span><span class="sxs-lookup"><span data-stu-id="d0f1a-179">If hello problem persists, contact [Azure support](https://portal.azure.com/#create/Microsoft.Support).</span></span>
