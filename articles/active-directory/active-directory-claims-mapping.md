---
title: Mapping delle attestazioni in Azure Active Directory (anteprima pubblica)| Microsoft Docs
description: Questa pagina descrive il mapping delle attestazioni di Azure Active Directory.
services: active-directory
author: billmath
manager: femila
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/14/2017
ms.author: billmath
ms.openlocfilehash: 78dbbe085fca26ad529c6262ba852f3c06ace404
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="claims-mapping-in-azure-active-directory-public-preview"></a><span data-ttu-id="91524-103">Mapping delle attestazioni in Azure Active Directory (anteprima pubblica)</span><span class="sxs-lookup"><span data-stu-id="91524-103">Claims mapping in Azure Active Directory (public preview)</span></span>

>[!NOTE]
><span data-ttu-id="91524-104">Questa funzionalità sostituisce e prevale sulla funzionalità di [personalizzazione delle attestazioni](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization) offerta attualmente tramite il portale.</span><span class="sxs-lookup"><span data-stu-id="91524-104">This feature replaces and supersedes the [claims customization](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization) offered through the portal today.</span></span> <span data-ttu-id="91524-105">Se si personalizzano le attestazioni tramite il portale in aggiunta alla modalità Graph/PowerShell descritta in dettaglio in questo documento nella stessa applicazione, i token emessi per l'applicazione ignoreranno la configurazione nel portale.</span><span class="sxs-lookup"><span data-stu-id="91524-105">If you customize claims using the portal in addition to the Graph/PowerShell method detailed in this document on the same application, tokens issued for that application will ignore the configuration in the portal.</span></span>
<span data-ttu-id="91524-106">Le configurazioni eseguite nei modi descritti in dettaglio in questo documento non si rifletteranno nel portale.</span><span class="sxs-lookup"><span data-stu-id="91524-106">Configurations made through the methods detailed in this document will not be reflected in the portal.</span></span>

<span data-ttu-id="91524-107">Questa funzionalità viene usata dagli amministratori tenant per personalizzare le attestazioni generate nei token per un'applicazione specifica nel tenant.</span><span class="sxs-lookup"><span data-stu-id="91524-107">This feature is used by tenant admins to customize the claims emitted in tokens for a specific application in their tenant.</span></span> <span data-ttu-id="91524-108">È possibile usare i criteri di mapping delle attestazioni per:</span><span class="sxs-lookup"><span data-stu-id="91524-108">You can use claims mapping policies to:</span></span>

- <span data-ttu-id="91524-109">Selezionare le attestazioni che vengono incluse nei token.</span><span class="sxs-lookup"><span data-stu-id="91524-109">Select which claims are included in tokens.</span></span>
- <span data-ttu-id="91524-110">Creare tipi di attestazione non esistenti.</span><span class="sxs-lookup"><span data-stu-id="91524-110">Create claim types that do not already exist.</span></span>
- <span data-ttu-id="91524-111">Scegliere o modificare l'origine dei dati generati in attestazioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="91524-111">Choose or change the source of data emitted in specific claims.</span></span>

>[!NOTE]
><span data-ttu-id="91524-112">Questa funzionalità è attualmente disponibile in anteprima pubblica.</span><span class="sxs-lookup"><span data-stu-id="91524-112">This capability currently is in public preview.</span></span> <span data-ttu-id="91524-113">Potrebbe essere necessario ripristinare o rimuovere eventuali modifiche.</span><span class="sxs-lookup"><span data-stu-id="91524-113">Be prepared to revert or remove any changes.</span></span> <span data-ttu-id="91524-114">La funzionalità è disponibile in tutte le sottoscrizioni di Azure Active Directory (Azure AD) durante l'anteprima pubblica.</span><span class="sxs-lookup"><span data-stu-id="91524-114">The feature is available in any Azure Active Directory (Azure AD) subscription during public preview.</span></span> <span data-ttu-id="91524-115">Quando la funzionalità sarà disponibile a livello generale, alcuni aspetti potrebbero tuttavia richiedere una sottoscrizione Azure Active Directory Premium.</span><span class="sxs-lookup"><span data-stu-id="91524-115">However, when the feature becomes generally available, some aspects of the feature might require an Azure Active Directory premium subscription.</span></span>

## <a name="claims-mapping-policy-type"></a><span data-ttu-id="91524-116">Tipo di criteri di mapping di attestazioni</span><span class="sxs-lookup"><span data-stu-id="91524-116">Claims mapping policy type</span></span>
<span data-ttu-id="91524-117">In Azure AD un oggetto **Criteri** rappresenta un set di regole imposto su singole applicazioni o su tutte le applicazioni in un'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="91524-117">In Azure AD, a **Policy** object represents a set of rules enforced on individual applications, or on all applications in an organization.</span></span> <span data-ttu-id="91524-118">Ogni tipo di criteri ha una struttura univoca con un set di proprietà che vengono in seguito applicate agli oggetti a cui sono assegnate.</span><span class="sxs-lookup"><span data-stu-id="91524-118">Each type of policy has a unique structure, with a set of properties that are then applied to objects to which they are assigned.</span></span>

<span data-ttu-id="91524-119">I criteri di mapping delle attestazioni sono un tipo di oggetto **Criteri** che modifica le attestazioni generate nei token emessi per applicazioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="91524-119">A claims mapping policy is a type of **Policy** object that modifies the claims emitted in tokens issued for specific applications.</span></span>

## <a name="claim-sets"></a><span data-ttu-id="91524-120">Set di attestazioni</span><span class="sxs-lookup"><span data-stu-id="91524-120">Claim sets</span></span>
<span data-ttu-id="91524-121">Alcuni set di attestazioni definiscono come e quando vengono utilizzate nei token.</span><span class="sxs-lookup"><span data-stu-id="91524-121">There are certain sets of claims that define how and when they are used in tokens.</span></span>

### <a name="core-claim-set"></a><span data-ttu-id="91524-122">Set di attestazioni core</span><span class="sxs-lookup"><span data-stu-id="91524-122">Core claim set</span></span>
<span data-ttu-id="91524-123">Le attestazioni nel set di attestazioni core sono presenti in ogni token, indipendentemente dai criteri.</span><span class="sxs-lookup"><span data-stu-id="91524-123">Claims in the core claim set are present in every token, regardless of policy.</span></span> <span data-ttu-id="91524-124">Queste attestazioni sono anche considerate limitate e non possono essere modificate.</span><span class="sxs-lookup"><span data-stu-id="91524-124">These claims are also considered restricted, and cannot be modified.</span></span>

### <a name="basic-claim-set"></a><span data-ttu-id="91524-125">Set di attestazioni di base</span><span class="sxs-lookup"><span data-stu-id="91524-125">Basic claim set</span></span>
<span data-ttu-id="91524-126">Il set di attestazioni di base include le attestazioni generate per impostazione predefinita per i token (oltre al set di attestazioni core).</span><span class="sxs-lookup"><span data-stu-id="91524-126">The basic claim set includes the claims that are emitted by default for tokens (in addition to the core claim set).</span></span> <span data-ttu-id="91524-127">Queste attestazioni possono essere omesse o modificate usando i criteri di mapping delle attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-127">These claims can be omitted or modified by using the claims mapping policies.</span></span>

### <a name="restricted-claim-set"></a><span data-ttu-id="91524-128">Set di attestazioni con restrizioni</span><span class="sxs-lookup"><span data-stu-id="91524-128">Restricted claim set</span></span>
<span data-ttu-id="91524-129">Le attestazioni con restrizioni non possono essere modificate usando i criteri.</span><span class="sxs-lookup"><span data-stu-id="91524-129">Restricted claims cannot be modified by using policy.</span></span> <span data-ttu-id="91524-130">L'origine dati non può essere modificata e non viene applicata alcuna trasformazione durante la generazione di queste attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-130">The data source cannot be changed, and no transformation is applied when generating these claims.</span></span>

#### <a name="table-1-json-web-token-jwt-restricted-claim-set"></a><span data-ttu-id="91524-131">Tabella 1: Set di attestazioni limitate al token JSON Web (JWT)</span><span class="sxs-lookup"><span data-stu-id="91524-131">Table 1: JSON Web Token (JWT) restricted claim set</span></span>
|<span data-ttu-id="91524-132">Tipo di attestazione (nome)</span><span class="sxs-lookup"><span data-stu-id="91524-132">Claim type (name)</span></span>|
| ----- |
|<span data-ttu-id="91524-133">_claim_names</span><span class="sxs-lookup"><span data-stu-id="91524-133">_claim_names</span></span>|
|<span data-ttu-id="91524-134">_claim_sources</span><span class="sxs-lookup"><span data-stu-id="91524-134">_claim_sources</span></span>|
|<span data-ttu-id="91524-135">access_token</span><span class="sxs-lookup"><span data-stu-id="91524-135">access_token</span></span>|
|<span data-ttu-id="91524-136">account_type</span><span class="sxs-lookup"><span data-stu-id="91524-136">account_type</span></span>|
|<span data-ttu-id="91524-137">acr</span><span class="sxs-lookup"><span data-stu-id="91524-137">acr</span></span>|
|<span data-ttu-id="91524-138">actor</span><span class="sxs-lookup"><span data-stu-id="91524-138">actor</span></span>|
|<span data-ttu-id="91524-139">actortoken</span><span class="sxs-lookup"><span data-stu-id="91524-139">actortoken</span></span>|
|<span data-ttu-id="91524-140">aio</span><span class="sxs-lookup"><span data-stu-id="91524-140">aio</span></span>|
|<span data-ttu-id="91524-141">altsecid</span><span class="sxs-lookup"><span data-stu-id="91524-141">altsecid</span></span>|
|<span data-ttu-id="91524-142">amr</span><span class="sxs-lookup"><span data-stu-id="91524-142">amr</span></span>|
|<span data-ttu-id="91524-143">app_chain</span><span class="sxs-lookup"><span data-stu-id="91524-143">app_chain</span></span>|
|<span data-ttu-id="91524-144">app_displayname</span><span class="sxs-lookup"><span data-stu-id="91524-144">app_displayname</span></span>|
|<span data-ttu-id="91524-145">app_res</span><span class="sxs-lookup"><span data-stu-id="91524-145">app_res</span></span>|
|<span data-ttu-id="91524-146">appctx</span><span class="sxs-lookup"><span data-stu-id="91524-146">appctx</span></span>|
|<span data-ttu-id="91524-147">appctxsender</span><span class="sxs-lookup"><span data-stu-id="91524-147">appctxsender</span></span>|
|<span data-ttu-id="91524-148">appid</span><span class="sxs-lookup"><span data-stu-id="91524-148">appid</span></span>|
|<span data-ttu-id="91524-149">appidacr</span><span class="sxs-lookup"><span data-stu-id="91524-149">appidacr</span></span>|
|<span data-ttu-id="91524-150">assertion</span><span class="sxs-lookup"><span data-stu-id="91524-150">assertion</span></span>|
|<span data-ttu-id="91524-151">at_hash</span><span class="sxs-lookup"><span data-stu-id="91524-151">at_hash</span></span>|
|<span data-ttu-id="91524-152">aud</span><span class="sxs-lookup"><span data-stu-id="91524-152">aud</span></span>|
|<span data-ttu-id="91524-153">auth_data</span><span class="sxs-lookup"><span data-stu-id="91524-153">auth_data</span></span>|
|<span data-ttu-id="91524-154">auth_time</span><span class="sxs-lookup"><span data-stu-id="91524-154">auth_time</span></span>|
|<span data-ttu-id="91524-155">authorization_code</span><span class="sxs-lookup"><span data-stu-id="91524-155">authorization_code</span></span>|
|<span data-ttu-id="91524-156">azp</span><span class="sxs-lookup"><span data-stu-id="91524-156">azp</span></span>|
|<span data-ttu-id="91524-157">azpacr</span><span class="sxs-lookup"><span data-stu-id="91524-157">azpacr</span></span>|
|<span data-ttu-id="91524-158">c_hash</span><span class="sxs-lookup"><span data-stu-id="91524-158">c_hash</span></span>|
|<span data-ttu-id="91524-159">ca_enf</span><span class="sxs-lookup"><span data-stu-id="91524-159">ca_enf</span></span>|
|<span data-ttu-id="91524-160">cc</span><span class="sxs-lookup"><span data-stu-id="91524-160">cc</span></span>|
|<span data-ttu-id="91524-161">cert_token_use</span><span class="sxs-lookup"><span data-stu-id="91524-161">cert_token_use</span></span>|
|<span data-ttu-id="91524-162">client_id</span><span class="sxs-lookup"><span data-stu-id="91524-162">client_id</span></span>|
|<span data-ttu-id="91524-163">cloud_graph_host_name</span><span class="sxs-lookup"><span data-stu-id="91524-163">cloud_graph_host_name</span></span>|
|<span data-ttu-id="91524-164">cloud_instance_name</span><span class="sxs-lookup"><span data-stu-id="91524-164">cloud_instance_name</span></span>|
|<span data-ttu-id="91524-165">cnf</span><span class="sxs-lookup"><span data-stu-id="91524-165">cnf</span></span>|
|<span data-ttu-id="91524-166">code</span><span class="sxs-lookup"><span data-stu-id="91524-166">code</span></span>|
|<span data-ttu-id="91524-167">controls</span><span class="sxs-lookup"><span data-stu-id="91524-167">controls</span></span>|
|<span data-ttu-id="91524-168">credential_keys</span><span class="sxs-lookup"><span data-stu-id="91524-168">credential_keys</span></span>|
|<span data-ttu-id="91524-169">csr</span><span class="sxs-lookup"><span data-stu-id="91524-169">csr</span></span>|
|<span data-ttu-id="91524-170">csr_type</span><span class="sxs-lookup"><span data-stu-id="91524-170">csr_type</span></span>|
|<span data-ttu-id="91524-171">deviceid</span><span class="sxs-lookup"><span data-stu-id="91524-171">deviceid</span></span>|
|<span data-ttu-id="91524-172">dns_names</span><span class="sxs-lookup"><span data-stu-id="91524-172">dns_names</span></span>|
|<span data-ttu-id="91524-173">domain_dns_name</span><span class="sxs-lookup"><span data-stu-id="91524-173">domain_dns_name</span></span>|
|<span data-ttu-id="91524-174">domain_netbios_name</span><span class="sxs-lookup"><span data-stu-id="91524-174">domain_netbios_name</span></span>|
|<span data-ttu-id="91524-175">e_exp</span><span class="sxs-lookup"><span data-stu-id="91524-175">e_exp</span></span>|
|<span data-ttu-id="91524-176">email</span><span class="sxs-lookup"><span data-stu-id="91524-176">email</span></span>|
|<span data-ttu-id="91524-177">endpoint</span><span class="sxs-lookup"><span data-stu-id="91524-177">endpoint</span></span>|
|<span data-ttu-id="91524-178">enfpolids</span><span class="sxs-lookup"><span data-stu-id="91524-178">enfpolids</span></span>|
|<span data-ttu-id="91524-179">exp</span><span class="sxs-lookup"><span data-stu-id="91524-179">exp</span></span>|
|<span data-ttu-id="91524-180">expires_on</span><span class="sxs-lookup"><span data-stu-id="91524-180">expires_on</span></span>|
|<span data-ttu-id="91524-181">grant_type</span><span class="sxs-lookup"><span data-stu-id="91524-181">grant_type</span></span>|
|<span data-ttu-id="91524-182">graph</span><span class="sxs-lookup"><span data-stu-id="91524-182">graph</span></span>|
|<span data-ttu-id="91524-183">group_sids</span><span class="sxs-lookup"><span data-stu-id="91524-183">group_sids</span></span>|
|<span data-ttu-id="91524-184">groups</span><span class="sxs-lookup"><span data-stu-id="91524-184">groups</span></span>|
|<span data-ttu-id="91524-185">hasgroups</span><span class="sxs-lookup"><span data-stu-id="91524-185">hasgroups</span></span>|
|<span data-ttu-id="91524-186">hash_alg</span><span class="sxs-lookup"><span data-stu-id="91524-186">hash_alg</span></span>|
|<span data-ttu-id="91524-187">home_oid</span><span class="sxs-lookup"><span data-stu-id="91524-187">home_oid</span></span>|
|<span data-ttu-id="91524-188">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationinstant</span><span class="sxs-lookup"><span data-stu-id="91524-188">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationinstant</span></span>|
|<span data-ttu-id="91524-189">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod</span><span class="sxs-lookup"><span data-stu-id="91524-189">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod</span></span>|
|<span data-ttu-id="91524-190">http://schemas.microsoft.com/ws/2008/06/identity/claims/expiration</span><span class="sxs-lookup"><span data-stu-id="91524-190">http://schemas.microsoft.com/ws/2008/06/identity/claims/expiration</span></span>|
|<span data-ttu-id="91524-191">http://schemas.microsoft.com/ws/2008/06/identity/claims/expired</span><span class="sxs-lookup"><span data-stu-id="91524-191">http://schemas.microsoft.com/ws/2008/06/identity/claims/expired</span></span>|
|<span data-ttu-id="91524-192">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span><span class="sxs-lookup"><span data-stu-id="91524-192">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span></span>|
|<span data-ttu-id="91524-193">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name</span><span class="sxs-lookup"><span data-stu-id="91524-193">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name</span></span>|
|<span data-ttu-id="91524-194">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span><span class="sxs-lookup"><span data-stu-id="91524-194">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span></span>|
|<span data-ttu-id="91524-195">iat</span><span class="sxs-lookup"><span data-stu-id="91524-195">iat</span></span>|
|<span data-ttu-id="91524-196">identityprovider</span><span class="sxs-lookup"><span data-stu-id="91524-196">identityprovider</span></span>|
|<span data-ttu-id="91524-197">idp</span><span class="sxs-lookup"><span data-stu-id="91524-197">idp</span></span>|
|<span data-ttu-id="91524-198">in_corp</span><span class="sxs-lookup"><span data-stu-id="91524-198">in_corp</span></span>|
|<span data-ttu-id="91524-199">instance</span><span class="sxs-lookup"><span data-stu-id="91524-199">instance</span></span>|
|<span data-ttu-id="91524-200">ipaddr</span><span class="sxs-lookup"><span data-stu-id="91524-200">ipaddr</span></span>|
|<span data-ttu-id="91524-201">isbrowserhostedapp</span><span class="sxs-lookup"><span data-stu-id="91524-201">isbrowserhostedapp</span></span>|
|<span data-ttu-id="91524-202">iss</span><span class="sxs-lookup"><span data-stu-id="91524-202">iss</span></span>|
|<span data-ttu-id="91524-203">jwk</span><span class="sxs-lookup"><span data-stu-id="91524-203">jwk</span></span>|
|<span data-ttu-id="91524-204">key_id</span><span class="sxs-lookup"><span data-stu-id="91524-204">key_id</span></span>|
|<span data-ttu-id="91524-205">key_type</span><span class="sxs-lookup"><span data-stu-id="91524-205">key_type</span></span>|
|<span data-ttu-id="91524-206">mam_compliance_url</span><span class="sxs-lookup"><span data-stu-id="91524-206">mam_compliance_url</span></span>|
|<span data-ttu-id="91524-207">mam_enrollment_url</span><span class="sxs-lookup"><span data-stu-id="91524-207">mam_enrollment_url</span></span>|
|<span data-ttu-id="91524-208">mam_terms_of_use_url</span><span class="sxs-lookup"><span data-stu-id="91524-208">mam_terms_of_use_url</span></span>|
|<span data-ttu-id="91524-209">mdm_compliance_url</span><span class="sxs-lookup"><span data-stu-id="91524-209">mdm_compliance_url</span></span>|
|<span data-ttu-id="91524-210">mdm_enrollment_url</span><span class="sxs-lookup"><span data-stu-id="91524-210">mdm_enrollment_url</span></span>|
|<span data-ttu-id="91524-211">mdm_terms_of_use_url</span><span class="sxs-lookup"><span data-stu-id="91524-211">mdm_terms_of_use_url</span></span>|
|<span data-ttu-id="91524-212">nameid</span><span class="sxs-lookup"><span data-stu-id="91524-212">nameid</span></span>|
|<span data-ttu-id="91524-213">nbf</span><span class="sxs-lookup"><span data-stu-id="91524-213">nbf</span></span>|
|<span data-ttu-id="91524-214">netbios_name</span><span class="sxs-lookup"><span data-stu-id="91524-214">netbios_name</span></span>|
|<span data-ttu-id="91524-215">nonce</span><span class="sxs-lookup"><span data-stu-id="91524-215">nonce</span></span>|
|<span data-ttu-id="91524-216">oid</span><span class="sxs-lookup"><span data-stu-id="91524-216">oid</span></span>|
|<span data-ttu-id="91524-217">on_prem_id</span><span class="sxs-lookup"><span data-stu-id="91524-217">on_prem_id</span></span>|
|<span data-ttu-id="91524-218">onprem_sam_account_name</span><span class="sxs-lookup"><span data-stu-id="91524-218">onprem_sam_account_name</span></span>|
|<span data-ttu-id="91524-219">onprem_sid</span><span class="sxs-lookup"><span data-stu-id="91524-219">onprem_sid</span></span>|
|<span data-ttu-id="91524-220">openid2_id</span><span class="sxs-lookup"><span data-stu-id="91524-220">openid2_id</span></span>|
|<span data-ttu-id="91524-221">password</span><span class="sxs-lookup"><span data-stu-id="91524-221">password</span></span>|
|<span data-ttu-id="91524-222">platf</span><span class="sxs-lookup"><span data-stu-id="91524-222">platf</span></span>|
|<span data-ttu-id="91524-223">polids</span><span class="sxs-lookup"><span data-stu-id="91524-223">polids</span></span>|
|<span data-ttu-id="91524-224">pop_jwk</span><span class="sxs-lookup"><span data-stu-id="91524-224">pop_jwk</span></span>|
|<span data-ttu-id="91524-225">preferred_username</span><span class="sxs-lookup"><span data-stu-id="91524-225">preferred_username</span></span>|
|<span data-ttu-id="91524-226">previous_refresh_token</span><span class="sxs-lookup"><span data-stu-id="91524-226">previous_refresh_token</span></span>|
|<span data-ttu-id="91524-227">primary_sid</span><span class="sxs-lookup"><span data-stu-id="91524-227">primary_sid</span></span>|
|<span data-ttu-id="91524-228">puid</span><span class="sxs-lookup"><span data-stu-id="91524-228">puid</span></span>|
|<span data-ttu-id="91524-229">pwd_exp</span><span class="sxs-lookup"><span data-stu-id="91524-229">pwd_exp</span></span>|
|<span data-ttu-id="91524-230">pwd_url</span><span class="sxs-lookup"><span data-stu-id="91524-230">pwd_url</span></span>|
|<span data-ttu-id="91524-231">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="91524-231">redirect_uri</span></span>|
|<span data-ttu-id="91524-232">refresh_token</span><span class="sxs-lookup"><span data-stu-id="91524-232">refresh_token</span></span>|
|<span data-ttu-id="91524-233">refreshtoken</span><span class="sxs-lookup"><span data-stu-id="91524-233">refreshtoken</span></span>|
|<span data-ttu-id="91524-234">request_nonce</span><span class="sxs-lookup"><span data-stu-id="91524-234">request_nonce</span></span>|
|<span data-ttu-id="91524-235">resource</span><span class="sxs-lookup"><span data-stu-id="91524-235">resource</span></span>|
|<span data-ttu-id="91524-236">role</span><span class="sxs-lookup"><span data-stu-id="91524-236">role</span></span>|
|<span data-ttu-id="91524-237">roles</span><span class="sxs-lookup"><span data-stu-id="91524-237">roles</span></span>|
|<span data-ttu-id="91524-238">scope</span><span class="sxs-lookup"><span data-stu-id="91524-238">scope</span></span>|
|<span data-ttu-id="91524-239">scp</span><span class="sxs-lookup"><span data-stu-id="91524-239">scp</span></span>|
|<span data-ttu-id="91524-240">sid</span><span class="sxs-lookup"><span data-stu-id="91524-240">sid</span></span>|
|<span data-ttu-id="91524-241">signature</span><span class="sxs-lookup"><span data-stu-id="91524-241">signature</span></span>|
|<span data-ttu-id="91524-242">signin_state</span><span class="sxs-lookup"><span data-stu-id="91524-242">signin_state</span></span>|
|<span data-ttu-id="91524-243">src1</span><span class="sxs-lookup"><span data-stu-id="91524-243">src1</span></span>|
|<span data-ttu-id="91524-244">src2</span><span class="sxs-lookup"><span data-stu-id="91524-244">src2</span></span>|
|<span data-ttu-id="91524-245">sub</span><span class="sxs-lookup"><span data-stu-id="91524-245">sub</span></span>|
|<span data-ttu-id="91524-246">tbid</span><span class="sxs-lookup"><span data-stu-id="91524-246">tbid</span></span>|
|<span data-ttu-id="91524-247">tenant_display_name</span><span class="sxs-lookup"><span data-stu-id="91524-247">tenant_display_name</span></span>|
|<span data-ttu-id="91524-248">tenant_region_scope</span><span class="sxs-lookup"><span data-stu-id="91524-248">tenant_region_scope</span></span>|
|<span data-ttu-id="91524-249">thumbnail_photo</span><span class="sxs-lookup"><span data-stu-id="91524-249">thumbnail_photo</span></span>|
|<span data-ttu-id="91524-250">tid</span><span class="sxs-lookup"><span data-stu-id="91524-250">tid</span></span>|
|<span data-ttu-id="91524-251">tokenAutologonEnabled</span><span class="sxs-lookup"><span data-stu-id="91524-251">tokenAutologonEnabled</span></span>|
|<span data-ttu-id="91524-252">trustedfordelegation</span><span class="sxs-lookup"><span data-stu-id="91524-252">trustedfordelegation</span></span>|
|<span data-ttu-id="91524-253">unique_name</span><span class="sxs-lookup"><span data-stu-id="91524-253">unique_name</span></span>|
|<span data-ttu-id="91524-254">upn</span><span class="sxs-lookup"><span data-stu-id="91524-254">upn</span></span>|
|<span data-ttu-id="91524-255">user_setting_sync_url</span><span class="sxs-lookup"><span data-stu-id="91524-255">user_setting_sync_url</span></span>|
|<span data-ttu-id="91524-256">username</span><span class="sxs-lookup"><span data-stu-id="91524-256">username</span></span>|
|<span data-ttu-id="91524-257">uti</span><span class="sxs-lookup"><span data-stu-id="91524-257">uti</span></span>|
|<span data-ttu-id="91524-258">ver</span><span class="sxs-lookup"><span data-stu-id="91524-258">ver</span></span>|
|<span data-ttu-id="91524-259">verified_primary_email</span><span class="sxs-lookup"><span data-stu-id="91524-259">verified_primary_email</span></span>|
|<span data-ttu-id="91524-260">verified_secondary_email</span><span class="sxs-lookup"><span data-stu-id="91524-260">verified_secondary_email</span></span>|
|<span data-ttu-id="91524-261">wids</span><span class="sxs-lookup"><span data-stu-id="91524-261">wids</span></span>|
|<span data-ttu-id="91524-262">win_ver</span><span class="sxs-lookup"><span data-stu-id="91524-262">win_ver</span></span>|

#### <a name="table-2-security-assertion-markup-language-saml-restricted-claim-set"></a><span data-ttu-id="91524-263">Tabella 2: Set di attestazioni limitate Security Assertion Markup Language (SAML)</span><span class="sxs-lookup"><span data-stu-id="91524-263">Table 2: Security Assertion Markup Language (SAML) restricted claim set</span></span>
|<span data-ttu-id="91524-264">Tipo di attestazione (URI)</span><span class="sxs-lookup"><span data-stu-id="91524-264">Claim type (URI)</span></span>|
| ----- |
|<span data-ttu-id="91524-265">http://schemas.microsoft.com/ws/2008/06/identity/claims/expiration</span><span class="sxs-lookup"><span data-stu-id="91524-265">http://schemas.microsoft.com/ws/2008/06/identity/claims/expiration</span></span>|
|<span data-ttu-id="91524-266">http://schemas.microsoft.com/ws/2008/06/identity/claims/expired</span><span class="sxs-lookup"><span data-stu-id="91524-266">http://schemas.microsoft.com/ws/2008/06/identity/claims/expired</span></span>|
|<span data-ttu-id="91524-267">http://schemas.microsoft.com/identity/claims/accesstoken</span><span class="sxs-lookup"><span data-stu-id="91524-267">http://schemas.microsoft.com/identity/claims/accesstoken</span></span>|
|<span data-ttu-id="91524-268">http://schemas.microsoft.com/identity/claims/openid2_id</span><span class="sxs-lookup"><span data-stu-id="91524-268">http://schemas.microsoft.com/identity/claims/openid2_id</span></span>|
|<span data-ttu-id="91524-269">http://schemas.microsoft.com/identity/claims/identityprovider</span><span class="sxs-lookup"><span data-stu-id="91524-269">http://schemas.microsoft.com/identity/claims/identityprovider</span></span>|
|<span data-ttu-id="91524-270">http://schemas.microsoft.com/identity/claims/objectidentifier</span><span class="sxs-lookup"><span data-stu-id="91524-270">http://schemas.microsoft.com/identity/claims/objectidentifier</span></span>|
|<span data-ttu-id="91524-271">http://schemas.microsoft.com/identity/claims/puid</span><span class="sxs-lookup"><span data-stu-id="91524-271">http://schemas.microsoft.com/identity/claims/puid</span></span>|
|<span data-ttu-id="91524-272">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier[MR1]</span><span class="sxs-lookup"><span data-stu-id="91524-272">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier[MR1]</span></span> |
|<span data-ttu-id="91524-273">http://schemas.microsoft.com/identity/claims/tenantid</span><span class="sxs-lookup"><span data-stu-id="91524-273">http://schemas.microsoft.com/identity/claims/tenantid</span></span>|
|<span data-ttu-id="91524-274">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationinstant</span><span class="sxs-lookup"><span data-stu-id="91524-274">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationinstant</span></span>|
|<span data-ttu-id="91524-275">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod</span><span class="sxs-lookup"><span data-stu-id="91524-275">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod</span></span>|
|<span data-ttu-id="91524-276">http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider</span><span class="sxs-lookup"><span data-stu-id="91524-276">http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider</span></span>|
|<span data-ttu-id="91524-277">http://schemas.microsoft.com/ws/2008/06/identity/claims/groups</span><span class="sxs-lookup"><span data-stu-id="91524-277">http://schemas.microsoft.com/ws/2008/06/identity/claims/groups</span></span>|
|<span data-ttu-id="91524-278">http://schemas.microsoft.com/claims/groups.link</span><span class="sxs-lookup"><span data-stu-id="91524-278">http://schemas.microsoft.com/claims/groups.link</span></span>|
|<span data-ttu-id="91524-279">http://schemas.microsoft.com/ws/2008/06/identity/claims/role</span><span class="sxs-lookup"><span data-stu-id="91524-279">http://schemas.microsoft.com/ws/2008/06/identity/claims/role</span></span>|
|<span data-ttu-id="91524-280">http://schemas.microsoft.com/ws/2008/06/identity/claims/wids</span><span class="sxs-lookup"><span data-stu-id="91524-280">http://schemas.microsoft.com/ws/2008/06/identity/claims/wids</span></span>|
|<span data-ttu-id="91524-281">http://schemas.microsoft.com/2014/09/devicecontext/claims/iscompliant</span><span class="sxs-lookup"><span data-stu-id="91524-281">http://schemas.microsoft.com/2014/09/devicecontext/claims/iscompliant</span></span>|
|<span data-ttu-id="91524-282">http://schemas.microsoft.com/2014/02/devicecontext/claims/isknown</span><span class="sxs-lookup"><span data-stu-id="91524-282">http://schemas.microsoft.com/2014/02/devicecontext/claims/isknown</span></span>|
|<span data-ttu-id="91524-283">http://schemas.microsoft.com/2012/01/devicecontext/claims/ismanaged</span><span class="sxs-lookup"><span data-stu-id="91524-283">http://schemas.microsoft.com/2012/01/devicecontext/claims/ismanaged</span></span>|
|<span data-ttu-id="91524-284">http://schemas.microsoft.com/2014/03/psso</span><span class="sxs-lookup"><span data-stu-id="91524-284">http://schemas.microsoft.com/2014/03/psso</span></span>|
|<span data-ttu-id="91524-285">http://schemas.microsoft.com/claims/authnmethodsreferences</span><span class="sxs-lookup"><span data-stu-id="91524-285">http://schemas.microsoft.com/claims/authnmethodsreferences</span></span>|
|<span data-ttu-id="91524-286">http://schemas.xmlsoap.org/ws/2009/09/identity/claims/actor</span><span class="sxs-lookup"><span data-stu-id="91524-286">http://schemas.xmlsoap.org/ws/2009/09/identity/claims/actor</span></span>|
|<span data-ttu-id="91524-287">http://schemas.microsoft.com/ws/2008/06/identity/claims/samlissuername</span><span class="sxs-lookup"><span data-stu-id="91524-287">http://schemas.microsoft.com/ws/2008/06/identity/claims/samlissuername</span></span>|
|<span data-ttu-id="91524-288">http://schemas.microsoft.com/ws/2008/06/identity/claims/confirmationkey</span><span class="sxs-lookup"><span data-stu-id="91524-288">http://schemas.microsoft.com/ws/2008/06/identity/claims/confirmationkey</span></span>|
|<span data-ttu-id="91524-289">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname</span><span class="sxs-lookup"><span data-stu-id="91524-289">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname</span></span>|
|<span data-ttu-id="91524-290">http://schemas.microsoft.com/ws/2008/06/identity/claims/primarygroupsid</span><span class="sxs-lookup"><span data-stu-id="91524-290">http://schemas.microsoft.com/ws/2008/06/identity/claims/primarygroupsid</span></span>|
|<span data-ttu-id="91524-291">http://schemas.microsoft.com/ws/2008/06/identity/claims/primarysid</span><span class="sxs-lookup"><span data-stu-id="91524-291">http://schemas.microsoft.com/ws/2008/06/identity/claims/primarysid</span></span>|
|<span data-ttu-id="91524-292">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authorizationdecision</span><span class="sxs-lookup"><span data-stu-id="91524-292">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authorizationdecision</span></span>|
|<span data-ttu-id="91524-293">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authentication</span><span class="sxs-lookup"><span data-stu-id="91524-293">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authentication</span></span>|
|<span data-ttu-id="91524-294">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/sid</span><span class="sxs-lookup"><span data-stu-id="91524-294">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/sid</span></span>|
|<span data-ttu-id="91524-295">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarygroupsid</span><span class="sxs-lookup"><span data-stu-id="91524-295">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarygroupsid</span></span>|
|<span data-ttu-id="91524-296">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarysid</span><span class="sxs-lookup"><span data-stu-id="91524-296">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarysid</span></span>|
|<span data-ttu-id="91524-297">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/denyonlysid</span><span class="sxs-lookup"><span data-stu-id="91524-297">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/denyonlysid</span></span>|
|<span data-ttu-id="91524-298">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlywindowsdevicegroup</span><span class="sxs-lookup"><span data-stu-id="91524-298">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlywindowsdevicegroup</span></span>|
|<span data-ttu-id="91524-299">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdeviceclaim</span><span class="sxs-lookup"><span data-stu-id="91524-299">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdeviceclaim</span></span>|
|<span data-ttu-id="91524-300">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdevicegroup</span><span class="sxs-lookup"><span data-stu-id="91524-300">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdevicegroup</span></span>|
|<span data-ttu-id="91524-301">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsfqbnversion</span><span class="sxs-lookup"><span data-stu-id="91524-301">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsfqbnversion</span></span>|
|<span data-ttu-id="91524-302">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowssubauthority</span><span class="sxs-lookup"><span data-stu-id="91524-302">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowssubauthority</span></span>|
|<span data-ttu-id="91524-303">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsuserclaim</span><span class="sxs-lookup"><span data-stu-id="91524-303">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsuserclaim</span></span>|
|<span data-ttu-id="91524-304">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/x500distinguishedname</span><span class="sxs-lookup"><span data-stu-id="91524-304">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/x500distinguishedname</span></span>|
|<span data-ttu-id="91524-305">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn</span><span class="sxs-lookup"><span data-stu-id="91524-305">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn</span></span>|
|<span data-ttu-id="91524-306">http://schemas.microsoft.com/ws/2008/06/identity/claims/groupsid</span><span class="sxs-lookup"><span data-stu-id="91524-306">http://schemas.microsoft.com/ws/2008/06/identity/claims/groupsid</span></span>|
|<span data-ttu-id="91524-307">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/spn</span><span class="sxs-lookup"><span data-stu-id="91524-307">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/spn</span></span>|
|<span data-ttu-id="91524-308">http://schemas.microsoft.com/ws/2008/06/identity/claims/ispersistent</span><span class="sxs-lookup"><span data-stu-id="91524-308">http://schemas.microsoft.com/ws/2008/06/identity/claims/ispersistent</span></span>|
|<span data-ttu-id="91524-309">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/privatepersonalidentifier</span><span class="sxs-lookup"><span data-stu-id="91524-309">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/privatepersonalidentifier</span></span>|
|<span data-ttu-id="91524-310">http://schemas.microsoft.com/identity/claims/scope</span><span class="sxs-lookup"><span data-stu-id="91524-310">http://schemas.microsoft.com/identity/claims/scope</span></span>|

## <a name="claims-mapping-policy-properties"></a><span data-ttu-id="91524-311">Proprietà di criteri di mapping di attestazioni</span><span class="sxs-lookup"><span data-stu-id="91524-311">Claims mapping policy properties</span></span>
<span data-ttu-id="91524-312">Usare le proprietà dei criteri di mapping delle attestazioni per controllare quali attestazioni vengono generate e da quali origini provengono i dati.</span><span class="sxs-lookup"><span data-stu-id="91524-312">Use the properties of a claims mapping policy to control which claims are emitted, and where the data is sourced from.</span></span> <span data-ttu-id="91524-313">Se non sono impostati criteri, il sistema emette token contenenti il set di attestazioni core, il set di attestazioni di base ed eventuali attestazioni facoltative che l'applicazione ha scelto di ricevere.</span><span class="sxs-lookup"><span data-stu-id="91524-313">If no policy is set, the system issues tokens containing the core claim set, the basic claim set, and any optional claims that the application has chosen to receive.</span></span>

### <a name="include-basic-claim-set"></a><span data-ttu-id="91524-314">Includere set di attestazioni di base</span><span class="sxs-lookup"><span data-stu-id="91524-314">Include basic claim set</span></span>

<span data-ttu-id="91524-315">**Stringa:** IncludeBasicClaimSet</span><span class="sxs-lookup"><span data-stu-id="91524-315">**String:** IncludeBasicClaimSet</span></span>

<span data-ttu-id="91524-316">**Tipo di dati:** booleano (True o False)</span><span class="sxs-lookup"><span data-stu-id="91524-316">**Data type:** Boolean (True or False)</span></span>

<span data-ttu-id="91524-317">**Riepilogo:** questa proprietà specifica se il set di attestazioni di base sia incluso nei token interessati da questo criterio.</span><span class="sxs-lookup"><span data-stu-id="91524-317">**Summary:** This property determines whether the basic claim set is included in tokens affected by this policy.</span></span> 

- <span data-ttu-id="91524-318">Se impostata su True, tutte le attestazioni nel set di attestazioni di base verranno generate nei token interessati dal criterio.</span><span class="sxs-lookup"><span data-stu-id="91524-318">If set to True, all claims in the basic claim set are emitted in tokens affected by the policy.</span></span> 
- <span data-ttu-id="91524-319">Se impostata su False, le attestazioni nel set di attestazioni di base non vengono generate nei token, a meno che non vengano aggiunte singolarmente nella proprietà dello schema delle attestazioni degli stessi criteri.</span><span class="sxs-lookup"><span data-stu-id="91524-319">If set to False, claims in the basic claim set are not in the tokens, unless they are individually added in the claims schema property of the same policy.</span></span>

>[!NOTE] 
><span data-ttu-id="91524-320">Le attestazioni del set di attestazioni core sono presenti in ogni token, indipendentemente dall'impostazione di questa proprietà.</span><span class="sxs-lookup"><span data-stu-id="91524-320">Claims in the core claim set are present in every token, regardless of what this property is set to.</span></span> 

### <a name="claims-schema"></a><span data-ttu-id="91524-321">Schema di attestazioni</span><span class="sxs-lookup"><span data-stu-id="91524-321">Claims schema</span></span>

<span data-ttu-id="91524-322">**Stringa:** ClaimsSchema</span><span class="sxs-lookup"><span data-stu-id="91524-322">**String:** ClaimsSchema</span></span>

<span data-ttu-id="91524-323">**Tipo di dati:** BLOB JSON con una o più voci dello schema di attestazioni</span><span class="sxs-lookup"><span data-stu-id="91524-323">**Data type:** JSON blob with one or more claim schema entries</span></span>

<span data-ttu-id="91524-324">**Riepilogo:** questa proprietà definisce quali attestazioni sono presenti nei token interessati dai criteri, oltre al set di attestazioni di base e al set di attestazioni core.</span><span class="sxs-lookup"><span data-stu-id="91524-324">**Summary:** This property defines which claims are present in the tokens affected by the policy, in addition to the basic claim set and the core claim set.</span></span>
<span data-ttu-id="91524-325">Per ogni voce di schema di attestazioni definita in questa proprietà sono necessarie alcune informazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-325">For each claim schema entry defined in this property, certain information is required.</span></span> <span data-ttu-id="91524-326">È necessario specificare la provenienza dei dati (**Value** o **Coppia Source/ID**) e con quale attestazione vengono emessi i dati (**Tipo di attestazione**).</span><span class="sxs-lookup"><span data-stu-id="91524-326">You must specify where the data is coming from (**Value** or **Source/ID pair**), and which claim the data is emitted as (**Claim Type**).</span></span>

### <a name="claim-schema-entry-elements"></a><span data-ttu-id="91524-327">Elementi di voci dello schema di attestazioni</span><span class="sxs-lookup"><span data-stu-id="91524-327">Claim schema entry elements</span></span>

<span data-ttu-id="91524-328">**Value:** l'elemento Value definisce un valore statico come dati da generare nell'attestazione.</span><span class="sxs-lookup"><span data-stu-id="91524-328">**Value:** The Value element defines a static value as the data to be emitted in the claim.</span></span>

<span data-ttu-id="91524-329">**Coppia Source/ID:** gli elementi Source e ID definiscono l'origine da cui verranno ricavati i dati nell'attestazione.</span><span class="sxs-lookup"><span data-stu-id="91524-329">**Source/ID pair:** The Source and ID elements define where the data in the claim is sourced from.</span></span> 

<span data-ttu-id="91524-330">L'elemento Source deve essere impostato su uno dei valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="91524-330">The Source element must be set to one of the following:</span></span> 


- <span data-ttu-id="91524-331">"user": i dati nell'attestazione sono una proprietà dell'oggetto User.</span><span class="sxs-lookup"><span data-stu-id="91524-331">"user": The data in the claim is a property on the User object.</span></span> 
- <span data-ttu-id="91524-332">"application": i dati nell'attestazione sono una proprietà dell'entità servizio application (client).</span><span class="sxs-lookup"><span data-stu-id="91524-332">"application": The data in the claim is a property on the application (client) service principal.</span></span> 
- <span data-ttu-id="91524-333">"resource": i dati nell'attestazione sono una proprietà dell'entità servizio resource.</span><span class="sxs-lookup"><span data-stu-id="91524-333">"resource": The data in the claim is a property on the resource service principal.</span></span>
- <span data-ttu-id="91524-334">"audience": i dati nell'attestazione sono una proprietà dell'entità servizio che corrisponde al destinatario del token (entità servizio resource o client).</span><span class="sxs-lookup"><span data-stu-id="91524-334">"audience": The data in the claim is a property on the service principal that is the audience of the token (either the client or resource service principal).</span></span>
- <span data-ttu-id="91524-335">"company": i dati nell'attestazione sono una proprietà dell'oggetto company del tenant delle risorse.</span><span class="sxs-lookup"><span data-stu-id="91524-335">“company”: The data in the claim is a property on the resource tenant’s Company object.</span></span>
- <span data-ttu-id="91524-336">"transformation": i dati nell'attestazione derivano dalla trasformazione delle attestazioni. Vedere la sezione "Trasformazione delle attestazioni" più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="91524-336">"transformation": The data in the claim is from claims transformation (see the "Claims transformation" section later in this article).</span></span> 

<span data-ttu-id="91524-337">Se l'origine è transformation, anche l'elemento **TransformationID** deve essere incluso in questa definizione di attestazione.</span><span class="sxs-lookup"><span data-stu-id="91524-337">If the source is transformation, the **TransformationID** element must be included in this claim definition as well.</span></span>

<span data-ttu-id="91524-338">L'elemento ID identifica la proprietà dell'origine che indica il valore per l'attestazione.</span><span class="sxs-lookup"><span data-stu-id="91524-338">The ID element identifies which property on the source provides the value for the claim.</span></span> <span data-ttu-id="91524-339">La tabella seguente elenca i valori di ID validi per ogni valore di Source.</span><span class="sxs-lookup"><span data-stu-id="91524-339">The following table lists the values of ID valid for each value of Source.</span></span>

#### <a name="table-3-valid-id-values-per-source"></a><span data-ttu-id="91524-340">Tabella 3: Valori di ID validi per ogni Source</span><span class="sxs-lookup"><span data-stu-id="91524-340">Table 3: Valid ID values per source</span></span>
|<span data-ttu-id="91524-341">Sorgente</span><span class="sxs-lookup"><span data-stu-id="91524-341">Source</span></span>|<span data-ttu-id="91524-342">ID</span><span class="sxs-lookup"><span data-stu-id="91524-342">ID</span></span>|<span data-ttu-id="91524-343">Descrizione</span><span class="sxs-lookup"><span data-stu-id="91524-343">Description</span></span>|
|-----|-----|-----|
|<span data-ttu-id="91524-344">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-344">User</span></span>|<span data-ttu-id="91524-345">surname</span><span class="sxs-lookup"><span data-stu-id="91524-345">surname</span></span>|<span data-ttu-id="91524-346">Cognome</span><span class="sxs-lookup"><span data-stu-id="91524-346">Family Name</span></span>|
|<span data-ttu-id="91524-347">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-347">User</span></span>|<span data-ttu-id="91524-348">givenname</span><span class="sxs-lookup"><span data-stu-id="91524-348">givenname</span></span>|<span data-ttu-id="91524-349">Nome</span><span class="sxs-lookup"><span data-stu-id="91524-349">Given Name</span></span>|
|<span data-ttu-id="91524-350">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-350">User</span></span>|<span data-ttu-id="91524-351">displayname</span><span class="sxs-lookup"><span data-stu-id="91524-351">displayname</span></span>|<span data-ttu-id="91524-352">Nome visualizzato</span><span class="sxs-lookup"><span data-stu-id="91524-352">Display Name</span></span>|
|<span data-ttu-id="91524-353">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-353">User</span></span>|<span data-ttu-id="91524-354">objectId</span><span class="sxs-lookup"><span data-stu-id="91524-354">objectid</span></span>|<span data-ttu-id="91524-355">ObjectID</span><span class="sxs-lookup"><span data-stu-id="91524-355">ObjectID</span></span>|
|<span data-ttu-id="91524-356">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-356">User</span></span>|<span data-ttu-id="91524-357">mail</span><span class="sxs-lookup"><span data-stu-id="91524-357">mail</span></span>|<span data-ttu-id="91524-358">Indirizzo di posta elettronica</span><span class="sxs-lookup"><span data-stu-id="91524-358">Email Address</span></span>|
|<span data-ttu-id="91524-359">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-359">User</span></span>|<span data-ttu-id="91524-360">userprincipalname</span><span class="sxs-lookup"><span data-stu-id="91524-360">userprincipalname</span></span>|<span data-ttu-id="91524-361">Nome dell'entità utente</span><span class="sxs-lookup"><span data-stu-id="91524-361">User Principal Name</span></span>|
|<span data-ttu-id="91524-362">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-362">User</span></span>|<span data-ttu-id="91524-363">department</span><span class="sxs-lookup"><span data-stu-id="91524-363">department</span></span>|<span data-ttu-id="91524-364">department</span><span class="sxs-lookup"><span data-stu-id="91524-364">Department</span></span>|
|<span data-ttu-id="91524-365">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-365">User</span></span>|<span data-ttu-id="91524-366">onpremisessamaccountname</span><span class="sxs-lookup"><span data-stu-id="91524-366">onpremisessamaccountname</span></span>|<span data-ttu-id="91524-367">Nome account SAM locale</span><span class="sxs-lookup"><span data-stu-id="91524-367">On Premises Sam Account Name</span></span>|
|<span data-ttu-id="91524-368">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-368">User</span></span>|<span data-ttu-id="91524-369">netbiosname</span><span class="sxs-lookup"><span data-stu-id="91524-369">netbiosname</span></span>|<span data-ttu-id="91524-370">Nome NetBios</span><span class="sxs-lookup"><span data-stu-id="91524-370">NetBios Name</span></span>|
|<span data-ttu-id="91524-371">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-371">User</span></span>|<span data-ttu-id="91524-372">dnsdomainname</span><span class="sxs-lookup"><span data-stu-id="91524-372">dnsdomainname</span></span>|<span data-ttu-id="91524-373">Nome di dominio DNS</span><span class="sxs-lookup"><span data-stu-id="91524-373">Dns Domain Name</span></span>|
|<span data-ttu-id="91524-374">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-374">User</span></span>|<span data-ttu-id="91524-375">onpremisesecurityidentifier</span><span class="sxs-lookup"><span data-stu-id="91524-375">onpremisesecurityidentifier</span></span>|<span data-ttu-id="91524-376">ID di sicurezza locale</span><span class="sxs-lookup"><span data-stu-id="91524-376">on-premises Security Identifier</span></span>|
|<span data-ttu-id="91524-377">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-377">User</span></span>|<span data-ttu-id="91524-378">companyname</span><span class="sxs-lookup"><span data-stu-id="91524-378">companyname</span></span>|<span data-ttu-id="91524-379">Nome organizzazione</span><span class="sxs-lookup"><span data-stu-id="91524-379">Organization Name</span></span>|
|<span data-ttu-id="91524-380">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-380">User</span></span>|<span data-ttu-id="91524-381">streetaddress</span><span class="sxs-lookup"><span data-stu-id="91524-381">streetaddress</span></span>|<span data-ttu-id="91524-382">Indirizzo</span><span class="sxs-lookup"><span data-stu-id="91524-382">Street Address</span></span>|
|<span data-ttu-id="91524-383">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-383">User</span></span>|<span data-ttu-id="91524-384">postalcode</span><span class="sxs-lookup"><span data-stu-id="91524-384">postalcode</span></span>|<span data-ttu-id="91524-385">CAP</span><span class="sxs-lookup"><span data-stu-id="91524-385">Postal Code</span></span>|
|<span data-ttu-id="91524-386">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-386">User</span></span>|<span data-ttu-id="91524-387">preferredlanguange</span><span class="sxs-lookup"><span data-stu-id="91524-387">preferredlanguange</span></span>|<span data-ttu-id="91524-388">Lingua preferita</span><span class="sxs-lookup"><span data-stu-id="91524-388">Preferred Language</span></span>|
|<span data-ttu-id="91524-389">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-389">User</span></span>|<span data-ttu-id="91524-390">onpremisesuserprincipalname</span><span class="sxs-lookup"><span data-stu-id="91524-390">onpremisesuserprincipalname</span></span>|<span data-ttu-id="91524-391">UPN locale</span><span class="sxs-lookup"><span data-stu-id="91524-391">on-premises UPN</span></span>|
|<span data-ttu-id="91524-392">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-392">User</span></span>|<span data-ttu-id="91524-393">mailNickname</span><span class="sxs-lookup"><span data-stu-id="91524-393">mailnickname</span></span>|<span data-ttu-id="91524-394">Nome di posta elettronica alternativo</span><span class="sxs-lookup"><span data-stu-id="91524-394">Mail Nickname</span></span>|
|<span data-ttu-id="91524-395">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-395">User</span></span>|<span data-ttu-id="91524-396">extensionattribute1</span><span class="sxs-lookup"><span data-stu-id="91524-396">extensionattribute1</span></span>|<span data-ttu-id="91524-397">Attributo di estensione 1</span><span class="sxs-lookup"><span data-stu-id="91524-397">Extension Attribute 1</span></span>|
|<span data-ttu-id="91524-398">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-398">User</span></span>|<span data-ttu-id="91524-399">extensionattribute2</span><span class="sxs-lookup"><span data-stu-id="91524-399">extensionattribute2</span></span>|<span data-ttu-id="91524-400">Attributo di estensione 2</span><span class="sxs-lookup"><span data-stu-id="91524-400">Extension Attribute 2</span></span>|
|<span data-ttu-id="91524-401">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-401">User</span></span>|<span data-ttu-id="91524-402">extensionattribute3</span><span class="sxs-lookup"><span data-stu-id="91524-402">extensionattribute3</span></span>|<span data-ttu-id="91524-403">Attributo di estensione 3</span><span class="sxs-lookup"><span data-stu-id="91524-403">Extension Attribute 3</span></span>|
|<span data-ttu-id="91524-404">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-404">User</span></span>|<span data-ttu-id="91524-405">extensionattribute4</span><span class="sxs-lookup"><span data-stu-id="91524-405">extensionattribute4</span></span>|<span data-ttu-id="91524-406">Attributo di estensione 4</span><span class="sxs-lookup"><span data-stu-id="91524-406">Extension Attribute 4</span></span>|
|<span data-ttu-id="91524-407">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-407">User</span></span>|<span data-ttu-id="91524-408">extensionattribute5</span><span class="sxs-lookup"><span data-stu-id="91524-408">extensionattribute5</span></span>|<span data-ttu-id="91524-409">Attributo di estensione 5</span><span class="sxs-lookup"><span data-stu-id="91524-409">Extension Attribute 5</span></span>|
|<span data-ttu-id="91524-410">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-410">User</span></span>|<span data-ttu-id="91524-411">extensionattribute6</span><span class="sxs-lookup"><span data-stu-id="91524-411">extensionattribute6</span></span>|<span data-ttu-id="91524-412">Attributo di estensione 6</span><span class="sxs-lookup"><span data-stu-id="91524-412">Extension Attribute 6</span></span>|
|<span data-ttu-id="91524-413">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-413">User</span></span>|<span data-ttu-id="91524-414">extensionattribute7</span><span class="sxs-lookup"><span data-stu-id="91524-414">extensionattribute7</span></span>|<span data-ttu-id="91524-415">Attributo di estensione 7</span><span class="sxs-lookup"><span data-stu-id="91524-415">Extension Attribute 7</span></span>|
|<span data-ttu-id="91524-416">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-416">User</span></span>|<span data-ttu-id="91524-417">extensionattribute8</span><span class="sxs-lookup"><span data-stu-id="91524-417">extensionattribute8</span></span>|<span data-ttu-id="91524-418">Attributo di estensione 8</span><span class="sxs-lookup"><span data-stu-id="91524-418">Extension Attribute 8</span></span>|
|<span data-ttu-id="91524-419">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-419">User</span></span>|<span data-ttu-id="91524-420">extensionattribute9</span><span class="sxs-lookup"><span data-stu-id="91524-420">extensionattribute9</span></span>|<span data-ttu-id="91524-421">Attributo di estensione 9</span><span class="sxs-lookup"><span data-stu-id="91524-421">Extension Attribute 9</span></span>|
|<span data-ttu-id="91524-422">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-422">User</span></span>|<span data-ttu-id="91524-423">extensionattribute10</span><span class="sxs-lookup"><span data-stu-id="91524-423">extensionattribute10</span></span>|<span data-ttu-id="91524-424">Attributo di estensione 10</span><span class="sxs-lookup"><span data-stu-id="91524-424">Extension Attribute 10</span></span>|
|<span data-ttu-id="91524-425">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-425">User</span></span>|<span data-ttu-id="91524-426">extensionattribute11</span><span class="sxs-lookup"><span data-stu-id="91524-426">extensionattribute11</span></span>|<span data-ttu-id="91524-427">Attributo di estensione 11</span><span class="sxs-lookup"><span data-stu-id="91524-427">Extension Attribute 11</span></span>|
|<span data-ttu-id="91524-428">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-428">User</span></span>|<span data-ttu-id="91524-429">extensionattribute12</span><span class="sxs-lookup"><span data-stu-id="91524-429">extensionattribute12</span></span>|<span data-ttu-id="91524-430">Attributo di estensione 12</span><span class="sxs-lookup"><span data-stu-id="91524-430">Extension Attribute 12</span></span>|
|<span data-ttu-id="91524-431">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-431">User</span></span>|<span data-ttu-id="91524-432">extensionattribute13</span><span class="sxs-lookup"><span data-stu-id="91524-432">extensionattribute13</span></span>|<span data-ttu-id="91524-433">Attributo di estensione 13</span><span class="sxs-lookup"><span data-stu-id="91524-433">Extension Attribute 13</span></span>|
|<span data-ttu-id="91524-434">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-434">User</span></span>|<span data-ttu-id="91524-435">extensionattribute14</span><span class="sxs-lookup"><span data-stu-id="91524-435">extensionattribute14</span></span>|<span data-ttu-id="91524-436">Attributo di estensione 14</span><span class="sxs-lookup"><span data-stu-id="91524-436">Extension Attribute 14</span></span>|
|<span data-ttu-id="91524-437">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-437">User</span></span>|<span data-ttu-id="91524-438">extensionattribute15</span><span class="sxs-lookup"><span data-stu-id="91524-438">extensionattribute15</span></span>|<span data-ttu-id="91524-439">Attributo di estensione 15</span><span class="sxs-lookup"><span data-stu-id="91524-439">Extension Attribute 15</span></span>|
|<span data-ttu-id="91524-440">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-440">User</span></span>|<span data-ttu-id="91524-441">othermail</span><span class="sxs-lookup"><span data-stu-id="91524-441">othermail</span></span>|<span data-ttu-id="91524-442">Posta elettronica alternativa</span><span class="sxs-lookup"><span data-stu-id="91524-442">Other Mail</span></span>|
|<span data-ttu-id="91524-443">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-443">User</span></span>|<span data-ttu-id="91524-444">country</span><span class="sxs-lookup"><span data-stu-id="91524-444">country</span></span>|<span data-ttu-id="91524-445">Paese</span><span class="sxs-lookup"><span data-stu-id="91524-445">Country</span></span>|
|<span data-ttu-id="91524-446">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-446">User</span></span>|<span data-ttu-id="91524-447">city</span><span class="sxs-lookup"><span data-stu-id="91524-447">city</span></span>|<span data-ttu-id="91524-448">city</span><span class="sxs-lookup"><span data-stu-id="91524-448">City</span></span>|
|<span data-ttu-id="91524-449">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-449">User</span></span>|<span data-ttu-id="91524-450">state</span><span class="sxs-lookup"><span data-stu-id="91524-450">state</span></span>|<span data-ttu-id="91524-451">Stato</span><span class="sxs-lookup"><span data-stu-id="91524-451">State</span></span>|
|<span data-ttu-id="91524-452">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-452">User</span></span>|<span data-ttu-id="91524-453">jobtitle</span><span class="sxs-lookup"><span data-stu-id="91524-453">jobtitle</span></span>|<span data-ttu-id="91524-454">Posizione</span><span class="sxs-lookup"><span data-stu-id="91524-454">Job Title</span></span>|
|<span data-ttu-id="91524-455">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-455">User</span></span>|<span data-ttu-id="91524-456">employeeid</span><span class="sxs-lookup"><span data-stu-id="91524-456">employeeid</span></span>|<span data-ttu-id="91524-457">ID dipendente</span><span class="sxs-lookup"><span data-stu-id="91524-457">Employee ID</span></span>|
|<span data-ttu-id="91524-458">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-458">User</span></span>|<span data-ttu-id="91524-459">facsimiletelephonenumber</span><span class="sxs-lookup"><span data-stu-id="91524-459">facsimiletelephonenumber</span></span>|<span data-ttu-id="91524-460">Numero di telefono fax</span><span class="sxs-lookup"><span data-stu-id="91524-460">Facsimile Telephone Number</span></span>|
|<span data-ttu-id="91524-461">application, resource, audience</span><span class="sxs-lookup"><span data-stu-id="91524-461">application, resource, audience</span></span>|<span data-ttu-id="91524-462">displayname</span><span class="sxs-lookup"><span data-stu-id="91524-462">displayname</span></span>|<span data-ttu-id="91524-463">Nome visualizzato</span><span class="sxs-lookup"><span data-stu-id="91524-463">Display Name</span></span>|
|<span data-ttu-id="91524-464">application, resource, audience</span><span class="sxs-lookup"><span data-stu-id="91524-464">application, resource, audience</span></span>|<span data-ttu-id="91524-465">objected</span><span class="sxs-lookup"><span data-stu-id="91524-465">objected</span></span>|<span data-ttu-id="91524-466">ObjectID</span><span class="sxs-lookup"><span data-stu-id="91524-466">ObjectID</span></span>|
|<span data-ttu-id="91524-467">application, resource, audience</span><span class="sxs-lookup"><span data-stu-id="91524-467">application, resource, audience</span></span>|<span data-ttu-id="91524-468">tags</span><span class="sxs-lookup"><span data-stu-id="91524-468">tags</span></span>|<span data-ttu-id="91524-469">Tag di entità servizio</span><span class="sxs-lookup"><span data-stu-id="91524-469">Service Principal Tag</span></span>|
|<span data-ttu-id="91524-470">Azienda</span><span class="sxs-lookup"><span data-stu-id="91524-470">Company</span></span>|<span data-ttu-id="91524-471">tenantcountry</span><span class="sxs-lookup"><span data-stu-id="91524-471">tenantcountry</span></span>|<span data-ttu-id="91524-472">Paese del tenant</span><span class="sxs-lookup"><span data-stu-id="91524-472">Tenant’s country</span></span>|

<span data-ttu-id="91524-473">**TransformationID:** l'elemento TransformationID è obbligatorio solo se l'elemento Source è impostato su "transformation".</span><span class="sxs-lookup"><span data-stu-id="91524-473">**TransformationID:** The TransformationID element must be provided only if the Source element is set to “transformation”.</span></span>

- <span data-ttu-id="91524-474">Questo elemento deve corrispondere all'elemento ID della voce di trasformazione nella proprietà **ClaimsTransformation** che definisce la modalità di generazione dei dati per questa attestazione.</span><span class="sxs-lookup"><span data-stu-id="91524-474">This element must match the ID element of the transformation entry in the **ClaimsTransformation** property that defines how the data for this claim is generated.</span></span>

<span data-ttu-id="91524-475">**Tipo di attestazione:** gli elementi **JwtClaimType** e **SamlClaimType** definiscono l'attestazione a cui questa voce dello schema di attestazioni fa riferimento.</span><span class="sxs-lookup"><span data-stu-id="91524-475">**Claim Type:** The **JwtClaimType** and **SamlClaimType** elements define which claim this claim schema entry refers to.</span></span>

- <span data-ttu-id="91524-476">JwtClaimType deve contenere il nome dell'attestazione da generare nel token JWT.</span><span class="sxs-lookup"><span data-stu-id="91524-476">The JwtClaimType must contain the name of the claim to be emitted in JWTs.</span></span>
- <span data-ttu-id="91524-477">SamlClaimType deve contenere l'URI dell'attestazione da generare nei token SAML.</span><span class="sxs-lookup"><span data-stu-id="91524-477">The SamlClaimType must contain the URI of the claim to be emitted in SAML tokens.</span></span>

>[!NOTE]
><span data-ttu-id="91524-478">Non è possibile utilizzare i nomi e gli URI delle attestazioni nel set di attestazioni con restrizioni per gli elementi dei tipi di attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-478">Names and URIs of claims in the restricted claim set cannot be used for the claim type elements.</span></span> <span data-ttu-id="91524-479">Per altre informazioni, vedere la sezione "Eccezioni e restrizioni" più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="91524-479">For more information, see the "Exceptions and restrictions" section later in this article.</span></span>

### <a name="claims-transformation"></a><span data-ttu-id="91524-480">Trasformazione delle attestazioni</span><span class="sxs-lookup"><span data-stu-id="91524-480">Claims transformation</span></span>

<span data-ttu-id="91524-481">**Stringa:** ClaimsTransformation</span><span class="sxs-lookup"><span data-stu-id="91524-481">**String:** ClaimsTransformation</span></span>

<span data-ttu-id="91524-482">**Tipo di dati:** BLOB JSON con una o più voci di trasformazione</span><span class="sxs-lookup"><span data-stu-id="91524-482">**Data type:** JSON blob, with one or more transformation entries</span></span> 

<span data-ttu-id="91524-483">**Riepilogo:** questa proprietà consente di applicare trasformazioni comuni ai dati di origine per generare i dati di output per le attestazioni specificate nello schema di attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-483">**Summary:** Use this property to apply common transformations to source data, to generate the output data for claims specified in the Claims Schema.</span></span>

<span data-ttu-id="91524-484">**ID:** l'elemento ID viene usato per fare riferimento a questa voce di trasformazione nella voce TransformationID dello schema di attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-484">**ID:** Use the ID element to reference this transformation entry in the TransformationID Claims Schema entry.</span></span> <span data-ttu-id="91524-485">Questo valore deve essere univoco per ogni voce di trasformazione all'interno di questo criterio.</span><span class="sxs-lookup"><span data-stu-id="91524-485">This value must be unique for each transformation entry within this policy.</span></span>

<span data-ttu-id="91524-486">**TransformationMethod:** l'elemento TransformationMethod identifica l'operazione che viene eseguita per generare i dati per l'attestazione.</span><span class="sxs-lookup"><span data-stu-id="91524-486">**TransformationMethod:** The TransformationMethod element identifies which operation is performed to generate the data for the claim.</span></span>

<span data-ttu-id="91524-487">In base al metodo scelto è previsto un set di input e output.</span><span class="sxs-lookup"><span data-stu-id="91524-487">Based on the method chosen, a set of inputs and outputs is expected.</span></span> <span data-ttu-id="91524-488">Questi vengono definiti usando gli elementi **InputClaims**, **InputParameters** e **OutputClaims**.</span><span class="sxs-lookup"><span data-stu-id="91524-488">These are defined by using the **InputClaims**, **InputParameters** and **OutputClaims** elements.</span></span>

#### <a name="table-4-transformation-methods-and-expected-inputs-and-outputs"></a><span data-ttu-id="91524-489">Tabella 4: Metodi di trasformazione e input/output previsti</span><span class="sxs-lookup"><span data-stu-id="91524-489">Table 4: Transformation methods and expected inputs and outputs</span></span>
|<span data-ttu-id="91524-490">TransformationMethod</span><span class="sxs-lookup"><span data-stu-id="91524-490">TransformationMethod</span></span>|<span data-ttu-id="91524-491">Input previsto</span><span class="sxs-lookup"><span data-stu-id="91524-491">Expected input</span></span>|<span data-ttu-id="91524-492">Output previsto</span><span class="sxs-lookup"><span data-stu-id="91524-492">Expected output</span></span>|<span data-ttu-id="91524-493">Descrizione</span><span class="sxs-lookup"><span data-stu-id="91524-493">Description</span></span>|
|-----|-----|-----|-----|
|<span data-ttu-id="91524-494">Join</span><span class="sxs-lookup"><span data-stu-id="91524-494">Join</span></span>|<span data-ttu-id="91524-495">string1, string2, separator</span><span class="sxs-lookup"><span data-stu-id="91524-495">string1, string2, separator</span></span>|<span data-ttu-id="91524-496">outputClaim</span><span class="sxs-lookup"><span data-stu-id="91524-496">outputClaim</span></span>|<span data-ttu-id="91524-497">Esegue il join di stringhe di input dividendole con un separatore.</span><span class="sxs-lookup"><span data-stu-id="91524-497">Joins input strings by using a separator in between.</span></span> <span data-ttu-id="91524-498">Ad esempio: stringa1: "foo@bar.com", stringa2: "sandbox", separatore: "." comporta in outputClaim: "foo@bar.com.sandbox"</span><span class="sxs-lookup"><span data-stu-id="91524-498">For example: string1:"foo@bar.com" , string2:"sandbox" , separator:"." results in outputClaim:"foo@bar.com.sandbox"</span></span>|
|<span data-ttu-id="91524-499">ExtractMailPrefix</span><span class="sxs-lookup"><span data-stu-id="91524-499">ExtractMailPrefix</span></span>|<span data-ttu-id="91524-500">mail</span><span class="sxs-lookup"><span data-stu-id="91524-500">mail</span></span>|<span data-ttu-id="91524-501">outputClaim</span><span class="sxs-lookup"><span data-stu-id="91524-501">outputClaim</span></span>|<span data-ttu-id="91524-502">Estrae la parte locale di un indirizzo di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="91524-502">Extracts the local part of an email address.</span></span> <span data-ttu-id="91524-503">Ad esempio: mail:"foo@bar.com" comporta in outputClaim:"foo".</span><span class="sxs-lookup"><span data-stu-id="91524-503">For example: mail:"foo@bar.com" results in outputClaim:"foo".</span></span> <span data-ttu-id="91524-504">Se non è presente un segno @, la stringa di input originale viene restituita così come è.</span><span class="sxs-lookup"><span data-stu-id="91524-504">If no @ sign is present, then the orignal input string is returned as is.</span></span>|

<span data-ttu-id="91524-505">**InputClaims:** un elemento InputClaims può essere usato per passare i dati da una voce dello schema di attestazioni a una trasformazione.</span><span class="sxs-lookup"><span data-stu-id="91524-505">**InputClaims:** Use an InputClaims element to pass the data from a claim schema entry to a transformation.</span></span> <span data-ttu-id="91524-506">Include due attributi: **ClaimTypeReferenceId** e **TransformationClaimType**.</span><span class="sxs-lookup"><span data-stu-id="91524-506">It has two attributes: **ClaimTypeReferenceId** and **TransformationClaimType**.</span></span>

- <span data-ttu-id="91524-507">**ClaimTypeReferenceId** viene unito in join con l'elemento ID della voce dello schema di attestazioni per trovare l'attestazione di input appropriata.</span><span class="sxs-lookup"><span data-stu-id="91524-507">**ClaimTypeReferenceId** is joined with ID element of the claim schema entry to find the appropriate input claim.</span></span> 
- <span data-ttu-id="91524-508">**TransformationClaimType** viene usato per assegnare un nome univoco a questo input.</span><span class="sxs-lookup"><span data-stu-id="91524-508">**TransformationClaimType** is used to give a unique name to this input.</span></span> <span data-ttu-id="91524-509">Questo nome deve corrispondere a uno degli input previsti per il metodo di trasformazione.</span><span class="sxs-lookup"><span data-stu-id="91524-509">This name must match one of the expected inputs for the transformation method.</span></span>

<span data-ttu-id="91524-510">**InputParameters:** un elemento InputParameters viene usato per passare un valore costante a una trasformazione.</span><span class="sxs-lookup"><span data-stu-id="91524-510">**InputParameters:** Use an InputParameters element to pass a constant value to a transformation.</span></span> <span data-ttu-id="91524-511">Include due attributi: **Value** e **ID**.</span><span class="sxs-lookup"><span data-stu-id="91524-511">It has two attributes: **Value** and **ID**.</span></span>

- <span data-ttu-id="91524-512">**Value** è il valore costante effettivo da passare.</span><span class="sxs-lookup"><span data-stu-id="91524-512">**Value** is the actual constant value to be passed.</span></span>
- <span data-ttu-id="91524-513">**ID** viene usato per assegnare un nome univoco a questo input.</span><span class="sxs-lookup"><span data-stu-id="91524-513">**ID** is used to give a unique name to this input.</span></span> <span data-ttu-id="91524-514">Questo nome deve corrispondere a uno degli input previsti per il metodo di trasformazione.</span><span class="sxs-lookup"><span data-stu-id="91524-514">This name must match one of the expected inputs for the transformation method.</span></span>

<span data-ttu-id="91524-515">**OutputClaims:** un elemento OutputClaims viene usato per contenere i dati generati da una trasformazione e associarli a una voce dello schema di attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-515">**OutputClaims:** Use an OutputClaims element to hold the data generated by a transformation, and tie it to a claim schema entry.</span></span> <span data-ttu-id="91524-516">Include due attributi: **ClaimTypeReferenceId** e **TransformationClaimType**.</span><span class="sxs-lookup"><span data-stu-id="91524-516">It has two attributes: **ClaimTypeReferenceId** and **TransformationClaimType**.</span></span>

- <span data-ttu-id="91524-517">**ClaimTypeReferenceId** viene unito in join all'elemento ID della voce dello schema di attestazioni per individuare l'attestazione di output appropriata.</span><span class="sxs-lookup"><span data-stu-id="91524-517">**ClaimTypeReferenceId** is joined with the ID of the claim schema entry to find the appropriate output claim.</span></span>
- <span data-ttu-id="91524-518">**TransformationClaimType** viene usato per assegnare un nome univoco a questo output.</span><span class="sxs-lookup"><span data-stu-id="91524-518">**TransformationClaimType** is used to give a unique name to this output.</span></span> <span data-ttu-id="91524-519">Questo nome deve corrispondere a uno degli output previsti per il metodo di trasformazione.</span><span class="sxs-lookup"><span data-stu-id="91524-519">This name must match one of the expected outputs for the transformation method.</span></span>

### <a name="exceptions-and-restrictions"></a><span data-ttu-id="91524-520">Eccezioni e restrizioni</span><span class="sxs-lookup"><span data-stu-id="91524-520">Exceptions and restrictions</span></span>

<span data-ttu-id="91524-521">**NameID e UPN di SAML:** gli attributi da cui hanno origine i valori NameID e UPN, e le trasformazioni di attestazioni consentite, presentano limitazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-521">**SAML NameID and UPN:** The attributes from which you source the NameID and UPN values, and the claims transformations that are permitted, are limited.</span></span>

#### <a name="table-5-attributes-allowed-as-a-data-source-for-saml-nameid"></a><span data-ttu-id="91524-522">Tabella 5: Attributi consentiti come origine dati per NameID di SAML</span><span class="sxs-lookup"><span data-stu-id="91524-522">Table 5: Attributes allowed as a data source for SAML NameID</span></span>
|<span data-ttu-id="91524-523">Sorgente</span><span class="sxs-lookup"><span data-stu-id="91524-523">Source</span></span>|<span data-ttu-id="91524-524">ID</span><span class="sxs-lookup"><span data-stu-id="91524-524">ID</span></span>|<span data-ttu-id="91524-525">Descrizione</span><span class="sxs-lookup"><span data-stu-id="91524-525">Description</span></span>|
|-----|-----|-----|
|<span data-ttu-id="91524-526">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-526">User</span></span>|<span data-ttu-id="91524-527">mail</span><span class="sxs-lookup"><span data-stu-id="91524-527">mail</span></span>|<span data-ttu-id="91524-528">Indirizzo di posta elettronica</span><span class="sxs-lookup"><span data-stu-id="91524-528">Email Address</span></span>|
|<span data-ttu-id="91524-529">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-529">User</span></span>|<span data-ttu-id="91524-530">userprincipalname</span><span class="sxs-lookup"><span data-stu-id="91524-530">userprincipalname</span></span>|<span data-ttu-id="91524-531">Nome dell'entità utente</span><span class="sxs-lookup"><span data-stu-id="91524-531">User Principal Name</span></span>|
|<span data-ttu-id="91524-532">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-532">User</span></span>|<span data-ttu-id="91524-533">onpremisessamaccountname</span><span class="sxs-lookup"><span data-stu-id="91524-533">onpremisessamaccountname</span></span>|<span data-ttu-id="91524-534">Nome account SAM locale</span><span class="sxs-lookup"><span data-stu-id="91524-534">On Premises Sam Account Name</span></span>|
|<span data-ttu-id="91524-535">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-535">User</span></span>|<span data-ttu-id="91524-536">employeeid</span><span class="sxs-lookup"><span data-stu-id="91524-536">employeeid</span></span>|<span data-ttu-id="91524-537">ID dipendente</span><span class="sxs-lookup"><span data-stu-id="91524-537">Employee ID</span></span>|
|<span data-ttu-id="91524-538">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-538">User</span></span>|<span data-ttu-id="91524-539">extensionattribute1</span><span class="sxs-lookup"><span data-stu-id="91524-539">extensionattribute1</span></span>|<span data-ttu-id="91524-540">Attributo di estensione 1</span><span class="sxs-lookup"><span data-stu-id="91524-540">Extension Attribute 1</span></span>|
|<span data-ttu-id="91524-541">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-541">User</span></span>|<span data-ttu-id="91524-542">extensionattribute2</span><span class="sxs-lookup"><span data-stu-id="91524-542">extensionattribute2</span></span>|<span data-ttu-id="91524-543">Attributo di estensione 2</span><span class="sxs-lookup"><span data-stu-id="91524-543">Extension Attribute 2</span></span>|
|<span data-ttu-id="91524-544">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-544">User</span></span>|<span data-ttu-id="91524-545">extensionattribute3</span><span class="sxs-lookup"><span data-stu-id="91524-545">extensionattribute3</span></span>|<span data-ttu-id="91524-546">Attributo di estensione 3</span><span class="sxs-lookup"><span data-stu-id="91524-546">Extension Attribute 3</span></span>|
|<span data-ttu-id="91524-547">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-547">User</span></span>|<span data-ttu-id="91524-548">extensionattribute4</span><span class="sxs-lookup"><span data-stu-id="91524-548">extensionattribute4</span></span>|<span data-ttu-id="91524-549">Attributo di estensione 4</span><span class="sxs-lookup"><span data-stu-id="91524-549">Extension Attribute 4</span></span>|
|<span data-ttu-id="91524-550">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-550">User</span></span>|<span data-ttu-id="91524-551">extensionattribute5</span><span class="sxs-lookup"><span data-stu-id="91524-551">extensionattribute5</span></span>|<span data-ttu-id="91524-552">Attributo di estensione 5</span><span class="sxs-lookup"><span data-stu-id="91524-552">Extension Attribute 5</span></span>|
|<span data-ttu-id="91524-553">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-553">User</span></span>|<span data-ttu-id="91524-554">extensionattribute6</span><span class="sxs-lookup"><span data-stu-id="91524-554">extensionattribute6</span></span>|<span data-ttu-id="91524-555">Attributo di estensione 6</span><span class="sxs-lookup"><span data-stu-id="91524-555">Extension Attribute 6</span></span>|
|<span data-ttu-id="91524-556">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-556">User</span></span>|<span data-ttu-id="91524-557">extensionattribute7</span><span class="sxs-lookup"><span data-stu-id="91524-557">extensionattribute7</span></span>|<span data-ttu-id="91524-558">Attributo di estensione 7</span><span class="sxs-lookup"><span data-stu-id="91524-558">Extension Attribute 7</span></span>|
|<span data-ttu-id="91524-559">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-559">User</span></span>|<span data-ttu-id="91524-560">extensionattribute8</span><span class="sxs-lookup"><span data-stu-id="91524-560">extensionattribute8</span></span>|<span data-ttu-id="91524-561">Attributo di estensione 8</span><span class="sxs-lookup"><span data-stu-id="91524-561">Extension Attribute 8</span></span>|
|<span data-ttu-id="91524-562">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-562">User</span></span>|<span data-ttu-id="91524-563">extensionattribute9</span><span class="sxs-lookup"><span data-stu-id="91524-563">extensionattribute9</span></span>|<span data-ttu-id="91524-564">Attributo di estensione 9</span><span class="sxs-lookup"><span data-stu-id="91524-564">Extension Attribute 9</span></span>|
|<span data-ttu-id="91524-565">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-565">User</span></span>|<span data-ttu-id="91524-566">extensionattribute10</span><span class="sxs-lookup"><span data-stu-id="91524-566">extensionattribute10</span></span>|<span data-ttu-id="91524-567">Attributo di estensione 10</span><span class="sxs-lookup"><span data-stu-id="91524-567">Extension Attribute 10</span></span>|
|<span data-ttu-id="91524-568">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-568">User</span></span>|<span data-ttu-id="91524-569">extensionattribute11</span><span class="sxs-lookup"><span data-stu-id="91524-569">extensionattribute11</span></span>|<span data-ttu-id="91524-570">Attributo di estensione 11</span><span class="sxs-lookup"><span data-stu-id="91524-570">Extension Attribute 11</span></span>|
|<span data-ttu-id="91524-571">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-571">User</span></span>|<span data-ttu-id="91524-572">extensionattribute12</span><span class="sxs-lookup"><span data-stu-id="91524-572">extensionattribute12</span></span>|<span data-ttu-id="91524-573">Attributo di estensione 12</span><span class="sxs-lookup"><span data-stu-id="91524-573">Extension Attribute 12</span></span>|
|<span data-ttu-id="91524-574">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-574">User</span></span>|<span data-ttu-id="91524-575">extensionattribute13</span><span class="sxs-lookup"><span data-stu-id="91524-575">extensionattribute13</span></span>|<span data-ttu-id="91524-576">Attributo di estensione 13</span><span class="sxs-lookup"><span data-stu-id="91524-576">Extension Attribute 13</span></span>|
|<span data-ttu-id="91524-577">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-577">User</span></span>|<span data-ttu-id="91524-578">extensionattribute14</span><span class="sxs-lookup"><span data-stu-id="91524-578">extensionattribute14</span></span>|<span data-ttu-id="91524-579">Attributo di estensione 14</span><span class="sxs-lookup"><span data-stu-id="91524-579">Extension Attribute 14</span></span>|
|<span data-ttu-id="91524-580">Utente</span><span class="sxs-lookup"><span data-stu-id="91524-580">User</span></span>|<span data-ttu-id="91524-581">extensionattribute15</span><span class="sxs-lookup"><span data-stu-id="91524-581">extensionattribute15</span></span>|<span data-ttu-id="91524-582">Attributo di estensione 15</span><span class="sxs-lookup"><span data-stu-id="91524-582">Extension Attribute 15</span></span>|

#### <a name="table-6-transformation-methods-allowed-for-saml-nameid"></a><span data-ttu-id="91524-583">Tabella 6: Metodi di trasformazione consentiti per NameID di SAML</span><span class="sxs-lookup"><span data-stu-id="91524-583">Table 6: Transformation methods allowed for SAML NameID</span></span>
|<span data-ttu-id="91524-584">TransformationMethod</span><span class="sxs-lookup"><span data-stu-id="91524-584">TransformationMethod</span></span>|<span data-ttu-id="91524-585">Restrizioni</span><span class="sxs-lookup"><span data-stu-id="91524-585">Restrictions</span></span>|
| ----- | ----- |
|<span data-ttu-id="91524-586">ExtractMailPrefix</span><span class="sxs-lookup"><span data-stu-id="91524-586">ExtractMailPrefix</span></span>|<span data-ttu-id="91524-587">Nessuna</span><span class="sxs-lookup"><span data-stu-id="91524-587">None</span></span>|
|<span data-ttu-id="91524-588">Join</span><span class="sxs-lookup"><span data-stu-id="91524-588">Join</span></span>|<span data-ttu-id="91524-589">Il suffisso da aggiungere deve essere un dominio verificato del tenant delle risorse.</span><span class="sxs-lookup"><span data-stu-id="91524-589">The suffix being joined must be a verified domain of the resource tenant.</span></span>|

### <a name="custom-signing-key"></a><span data-ttu-id="91524-590">Chiave di firma personalizzata</span><span class="sxs-lookup"><span data-stu-id="91524-590">Custom signing key</span></span>
<span data-ttu-id="91524-591">È necessario assegnare una chiave di firma personalizzata all'oggetto entità servizio per poter applicare criteri di mapping di attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-591">A custom signing key must be assigned to the service principal object for a claims mapping policy to take effect.</span></span> <span data-ttu-id="91524-592">Tutti i token emessi interessati dai criteri di accesso vengono firmati con questa chiave.</span><span class="sxs-lookup"><span data-stu-id="91524-592">All tokens issued that have been impacted by the policy are signed with this key.</span></span> <span data-ttu-id="91524-593">Le applicazioni devono essere configurate per accettare i token firmati con questa chiave.</span><span class="sxs-lookup"><span data-stu-id="91524-593">Applications must be configured to accept tokens signed with this key.</span></span> <span data-ttu-id="91524-594">In questo modo si conferma che i token sono stati modificati dall'autore del criterio di mapping delle attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-594">This ensures acknowledgment that tokens have been modified by the creator of the claims mapping policy.</span></span> <span data-ttu-id="91524-595">Le applicazioni vengono protette dai criteri di mapping delle attestazioni creati da attori dannosi.</span><span class="sxs-lookup"><span data-stu-id="91524-595">This protects applications from claims mapping policies created by malicious actors.</span></span>

### <a name="cross-tenant-scenarios"></a><span data-ttu-id="91524-596">Scenari tra tenant</span><span class="sxs-lookup"><span data-stu-id="91524-596">Cross-tenant scenarios</span></span>
<span data-ttu-id="91524-597">I criteri di mapping delle attestazioni non si applicano agli utenti guest.</span><span class="sxs-lookup"><span data-stu-id="91524-597">Claims mapping policies do not apply to guest users.</span></span> <span data-ttu-id="91524-598">Se un utente guest tenta di accedere a un'applicazione con criteri di mapping delle attestazioni assegnati all'entità servizio, viene emesso il token predefinito (i criteri non hanno effetto).</span><span class="sxs-lookup"><span data-stu-id="91524-598">If a guest user attempts to access an application with a claims mapping policy assigned to its service principal, the default token is issued (the policy has no effect).</span></span>

## <a name="claims-mapping-policy-assignment"></a><span data-ttu-id="91524-599">Assegnazione di criteri di mapping delle attestazioni</span><span class="sxs-lookup"><span data-stu-id="91524-599">Claims mapping policy assignment</span></span>
<span data-ttu-id="91524-600">I criteri di mapping delle attestazioni possono essere assegnati solo a oggetti entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-600">Claims mapping policies can only be assigned to service principal objects.</span></span>

### <a name="example-claims-mapping-policies"></a><span data-ttu-id="91524-601">Criteri di mapping delle attestazioni di esempio</span><span class="sxs-lookup"><span data-stu-id="91524-601">Example claims mapping policies</span></span>

<span data-ttu-id="91524-602">In molti scenari di Azure AD è possibile personalizzare le attestazioni generate nei token per specifiche entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-602">In Azure AD, many scenarios are possible when you can customize claims emitted in tokens for specific service principals.</span></span> <span data-ttu-id="91524-603">In questa sezione vengono illustrati alcuni scenari comuni che permettono di comprendere come usare il tipo di criteri di mapping delle attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-603">In this section, we walk through a few common scenarios that can help you grasp how to use the claims mapping policy type.</span></span>

#### <a name="prerequisites"></a><span data-ttu-id="91524-604">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="91524-604">Prerequisites</span></span>
<span data-ttu-id="91524-605">Gli esempi seguenti mostrano come creare, aggiornare, collegare ed eliminare criteri per le entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-605">In the following examples, you create, update, link, and delete policies for service principals.</span></span> <span data-ttu-id="91524-606">Se non si ha familiarità con Azure AD, è consigliabile capire come ottenere un tenant di Azure AD prima di procedere con questi esempi.</span><span class="sxs-lookup"><span data-stu-id="91524-606">If you are new to Azure AD, we recommend that you learn about how to get an Azure AD tenant before you proceed with these examples.</span></span> 

<span data-ttu-id="91524-607">Per iniziare, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="91524-607">To get started, do the following steps:</span></span>


1. <span data-ttu-id="91524-608">Scaricare l'ultima [versione di anteprima pubblica del modulo Azure AD PowerShell](https://www.powershellgallery.com/packages/AzureADPreview/2.0.0.127).</span><span class="sxs-lookup"><span data-stu-id="91524-608">Download the latest [Azure AD PowerShell Module public preview release](https://www.powershellgallery.com/packages/AzureADPreview/2.0.0.127).</span></span>
2.  <span data-ttu-id="91524-609">Eseguire il comando Connect per accedere all'account amministratore di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="91524-609">Run the Connect command to sign in to your Azure AD admin account.</span></span> <span data-ttu-id="91524-610">Eseguire questo comando ogni volta che si avvia una nuova sessione.</span><span class="sxs-lookup"><span data-stu-id="91524-610">Run this command each time you start a new session.</span></span>
    
     ``` powershell
    Connect-AzureAD -Confirm
    
    ```
3.  <span data-ttu-id="91524-611">Per visualizzare tutti i criteri creati nell'organizzazione, eseguire questo comando.</span><span class="sxs-lookup"><span data-stu-id="91524-611">To see all policies that have been created in your organization, run the following command.</span></span> <span data-ttu-id="91524-612">È consigliabile eseguire questo comando dopo la maggior parte delle operazioni negli scenari seguenti per verificare che i criteri siano stati creati come previsto.</span><span class="sxs-lookup"><span data-stu-id="91524-612">We recommend that you run this command after most operations in the following scenarios, to check that your policies are being created as expected.</span></span>
   
    ``` powershell
        Get-AzureADPolicy
    
    ```
#### <a name="example-create-and-assign-a-policy-to-omit-the-basic-claims-from-tokens-issued-to-a-service-principal"></a><span data-ttu-id="91524-613">Esempio: creare e assegnare un criterio per omettere le attestazioni di base dai token emessi per un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-613">Example: Create and assign a policy to omit the basic claims from tokens issued to a service principal.</span></span>
<span data-ttu-id="91524-614">In questo esempio si creano criteri che rimuovono il set di attestazioni di base dai token emessi per le entità servizio collegate.</span><span class="sxs-lookup"><span data-stu-id="91524-614">In this example, you create a policy that removes the basic claim set from tokens issued to linked service principals.</span></span>


1. <span data-ttu-id="91524-615">Creare i criteri di mapping delle attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-615">Create a claims mapping policy.</span></span> <span data-ttu-id="91524-616">Questi criteri, che vengono collegati a specifiche entità servizio, rimuovono il set di attestazioni di base dai token.</span><span class="sxs-lookup"><span data-stu-id="91524-616">This policy, linked to specific service principals, removes the basic claim set from tokens.</span></span>
    1. <span data-ttu-id="91524-617">Per creare i criteri, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="91524-617">To create the policy, run this command:</span></span> 
    
     ``` powershell
    New-AzureADPolicy -Definition @('{"ClaimsMappingPolicy":{"Version":1,"IncludeBasicClaimSet":"false"}}') -DisplayName "OmitBasicClaims” -Type "ClaimsMappingPolicy"
    ```
    2. <span data-ttu-id="91524-618">Per visualizzare il nuovo criterio e ottenere il relativo ObjectId, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="91524-618">To see your new policy, and to get the policy ObjectId, run the following command:</span></span>
    
     ``` powershell
    Get-AzureADPolicy
    ```
2.  <span data-ttu-id="91524-619">Assegnare i criteri all'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-619">Assign the policy to your service principal.</span></span> <span data-ttu-id="91524-620">È necessario ottenere anche l'ObjectId dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-620">You also need to get the ObjectId of your service principal.</span></span> 
    1.  <span data-ttu-id="91524-621">Per visualizzare tutte le entità servizio dell'organizzazione, è possibile eseguire query in Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="91524-621">To see all your organization's service principals, you can query Microsoft Graph.</span></span> <span data-ttu-id="91524-622">In alternativa, eseguire l'accesso all'account Azure AD dallo strumento Graph Explorer di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="91524-622">Or, in Azure AD Graph Explorer, sign in to your Azure AD account.</span></span>
    2.  <span data-ttu-id="91524-623">Dopo aver ottenuto l'ObjectId dell'entità servizio, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="91524-623">When you have the ObjectId of your service principal, run the following command:</span></span>  
     
     ``` powershell
    Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
    ```
#### <a name="example-create-and-assign-a-policy-to-include-the-employeeid-and-tenantcountry-as-claims-in-tokens-issued-to-a-service-principal"></a><span data-ttu-id="91524-624">Esempio: creare e assegnare un criterio per includere EmployeeID e TenantCountry come attestazioni nei token emessi per un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-624">Example: Create and assign a policy to include the EmployeeID and TenantCountry as claims in tokens issued to a service principal.</span></span>
<span data-ttu-id="91524-625">In questo esempio si creano criteri che aggiungono EmployeeID e TenantCountry ai token emessi per le entità servizio collegate.</span><span class="sxs-lookup"><span data-stu-id="91524-625">In this example, you create a policy that adds the EmployeeID and TenantCountry to tokens issued to linked service principals.</span></span> <span data-ttu-id="91524-626">EmployeeID viene emesso come tipo di attestazione nome sia nei token SAML sia nei token JWT.</span><span class="sxs-lookup"><span data-stu-id="91524-626">The EmployeeID is emitted as the name claim type in both SAML tokens and JWTs.</span></span> <span data-ttu-id="91524-627">TenantCountry viene emesso come tipo di attestazione paese sia nei token SAML sia nei token JWT.</span><span class="sxs-lookup"><span data-stu-id="91524-627">The TenantCountry is emitted as the country claim type in both SAML tokens and JWTs.</span></span> <span data-ttu-id="91524-628">In questo esempio si continua a includere il set di attestazioni di base nei token.</span><span class="sxs-lookup"><span data-stu-id="91524-628">In this example, we continue to include the basic claims set in the tokens.</span></span>

1. <span data-ttu-id="91524-629">Creare i criteri di mapping delle attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-629">Create a claims mapping policy.</span></span> <span data-ttu-id="91524-630">Questi criteri, che vengono collegati a specifiche entità servizio, aggiungono le attestazioni EmployeeID e TenantCountry ai token.</span><span class="sxs-lookup"><span data-stu-id="91524-630">This policy, linked to specific service principals, adds the EmployeeID and TenantCountry claims to tokens.</span></span>
    1. <span data-ttu-id="91524-631">Per creare i criteri, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="91524-631">To create the policy, run this command:</span></span>  
     
     ``` powershell
    New-AzureADPolicy -Definition @('{"ClaimsMappingPolicy":{"Version":1,"IncludeBasicClaimSet":"true", "ClaimsSchema": [{"Source":"user","ID":"employeeid","SamlClaimType":"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name","JwtClaimType":"name"},{"Source":"company","ID":" tenantcountry ","SamlClaimType":" http://schemas.xmlsoap.org/ws/2005/05/identity/claims/country ","JwtClaimType":"country"}]}}') -DisplayName "ExtraClaimsExample” -Type "ClaimsMappingPolicy"
    ```
    
    2. <span data-ttu-id="91524-632">Per visualizzare il nuovo criterio e ottenere il relativo ObjectId, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="91524-632">To see your new policy, and to get the policy ObjectId, run the following command:</span></span>
     
     ``` powershell  
    Get-AzureADPolicy
    ```
2.  <span data-ttu-id="91524-633">Assegnare i criteri all'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-633">Assign the policy to your service principal.</span></span> <span data-ttu-id="91524-634">È necessario ottenere anche l'ObjectId dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-634">You also need to get the ObjectId of your service principal.</span></span> 
    1.  <span data-ttu-id="91524-635">Per visualizzare tutte le entità servizio dell'organizzazione, è possibile eseguire query in Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="91524-635">To see all your organization's service principals, you can query Microsoft Graph.</span></span> <span data-ttu-id="91524-636">In alternativa, eseguire l'accesso all'account Azure AD dallo strumento Graph Explorer di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="91524-636">Or, in Azure AD Graph Explorer, sign in to your Azure AD account.</span></span>
    2.  <span data-ttu-id="91524-637">Dopo aver ottenuto l'ObjectId dell'entità servizio, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="91524-637">When you have the ObjectId of your service principal, run the following command:</span></span>  
     
     ``` powershell
    Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
    ```
#### <a name="example-create-and-assign-a-policy-that-uses-a-claims-transformation-in-tokens-issued-to-a-service-principal"></a><span data-ttu-id="91524-638">Esempio: creare e assegnare i criteri mediante una trasformazione di attestazioni in token emessi per un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-638">Example: Create and assign a policy that uses a claims transformation in tokens issued to a service principal.</span></span>
<span data-ttu-id="91524-639">In questo esempio si creano i criteri che generano un'attestazione personalizzata "JoinedData" nei token JWT emessi per le entità servizio collegate.</span><span class="sxs-lookup"><span data-stu-id="91524-639">In this example, you create a policy that emits a custom claim “JoinedData” to JWTs issued to linked service principals.</span></span> <span data-ttu-id="91524-640">Questa attestazione contiene un valore creato aggiungendo i dati archiviati nell'attributo extensionattribute1 all'oggetto utente con ".sandbox".</span><span class="sxs-lookup"><span data-stu-id="91524-640">This claim contains a value created by joining the data stored in the extensionattribute1 attribute on the user object with “.sandbox”.</span></span> <span data-ttu-id="91524-641">In questo esempio si esclude il set di attestazioni di base nei token.</span><span class="sxs-lookup"><span data-stu-id="91524-641">In this example, we exclude the basic claims set in the tokens.</span></span>


1. <span data-ttu-id="91524-642">Creare i criteri di mapping delle attestazioni.</span><span class="sxs-lookup"><span data-stu-id="91524-642">Create a claims mapping policy.</span></span> <span data-ttu-id="91524-643">Questi criteri, che vengono collegati a specifiche entità servizio, aggiungono le attestazioni EmployeeID e TenantCountry ai token.</span><span class="sxs-lookup"><span data-stu-id="91524-643">This policy, linked to specific service principals, adds the EmployeeID and TenantCountry claims to tokens.</span></span>
    1. <span data-ttu-id="91524-644">Per creare i criteri, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="91524-644">To create the policy, run this command:</span></span> 
     
     ``` powershell
    New-AzureADPolicy -Definition @('{"ClaimsMappingPolicy":{"Version":1,"IncludeBasicClaimSet":"true", "ClaimsSchema":[{"Source":"user","ID":"extensionattribute1"},{"Source":"transformation","ID":"DataJoin","TransformationId":"JoinTheData","JwtClaimType":"JoinedData"}],"ClaimsTransformation":[{"ID":"JoinTheData","TransformationMethod":"Join","InputClaims":[{"ClaimTypeReferenceId":"extensionattribute1","TransformationClaimType":"string1"}], "InputParameters": [{"Id":"string2","Value":"sandbox"},{"Id":"separator","Value":"."}],"OutputClaims":[{"ClaimTypeReferenceId":"DataJoin","TransformationClaimType":"outputClaim"}]}]}}') -DisplayName "TransformClaimsExample” -Type "ClaimsMappingPolicy"
    ```
    
    2. <span data-ttu-id="91524-645">Per visualizzare il nuovo criterio e ottenere il relativo ObjectId, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="91524-645">To see your new policy, and to get the policy ObjectId, run the following command:</span></span> 
     
     ``` powershell
    Get-AzureADPolicy
    ```
2.  <span data-ttu-id="91524-646">Assegnare i criteri all'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-646">Assign the policy to your service principal.</span></span> <span data-ttu-id="91524-647">È necessario ottenere anche l'ObjectId dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="91524-647">You also need to get the ObjectId of your service principal.</span></span> 
    1.  <span data-ttu-id="91524-648">Per visualizzare tutte le entità servizio dell'organizzazione, è possibile eseguire query in Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="91524-648">To see all your organization's service principals, you can query Microsoft Graph.</span></span> <span data-ttu-id="91524-649">In alternativa, eseguire l'accesso all'account Azure AD dallo strumento Graph Explorer di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="91524-649">Or, in Azure AD Graph Explorer, sign in to your Azure AD account.</span></span>
    2.  <span data-ttu-id="91524-650">Dopo aver ottenuto l'ObjectId dell'entità servizio, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="91524-650">When you have the ObjectId of your service principal, run the following command:</span></span> 
     
     ``` powershell
    Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
    ```
