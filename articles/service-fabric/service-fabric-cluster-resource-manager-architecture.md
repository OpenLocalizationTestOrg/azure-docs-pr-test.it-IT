---
title: Architettura di Resource Manager | Microsoft Docs
description: An architectural overview of Service Fabric Cluster Resource Manager.
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 6c4421f9-834b-450c-939f-1cb4ff456b9b
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 565c20637fa93ed92bb6c52e585a4b70bdeb6f8c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="cluster-resource-manager-architecture-overview"></a><span data-ttu-id="82e96-103">Panoramica dell'architettura di Cluster Resource Manager</span><span class="sxs-lookup"><span data-stu-id="82e96-103">Cluster resource manager architecture overview</span></span>
<span data-ttu-id="82e96-104">Il Cluster Resource Manager di Service Fabric è un servizio centrale in esecuzione nel cluster.</span><span class="sxs-lookup"><span data-stu-id="82e96-104">The Service Fabric Cluster Resource Manager is a central service that runs in the cluster.</span></span> <span data-ttu-id="82e96-105">Gestisce lo stato desiderato dei servizi del cluster, in particolare in relazione all'uso delle risorse e alle regole di selezione.</span><span class="sxs-lookup"><span data-stu-id="82e96-105">It manages the desired state of the services in the cluster, particularly with respect to resource consumption and any placement rules.</span></span> 

<span data-ttu-id="82e96-106">Per gestire le risorse del cluster, Cluster Resource Manager di Service Fabric deve disporre di varie informazioni:</span><span class="sxs-lookup"><span data-stu-id="82e96-106">To manage the resources in your cluster, the Service Fabric Cluster Resource Manager must have several pieces of information:</span></span>

- <span data-ttu-id="82e96-107">I servizi esistenti attualmente</span><span class="sxs-lookup"><span data-stu-id="82e96-107">Which services currently exist</span></span>
- <span data-ttu-id="82e96-108">Ogni uso della risorsa della corrente del servizio (o per impostazione predefinito)</span><span class="sxs-lookup"><span data-stu-id="82e96-108">Each service's current (or default) resource consumption</span></span> 
- <span data-ttu-id="82e96-109">La capacità residua del cluster</span><span class="sxs-lookup"><span data-stu-id="82e96-109">The remaining cluster capacity</span></span> 
- <span data-ttu-id="82e96-110">La capacità dei nodi del cluster</span><span class="sxs-lookup"><span data-stu-id="82e96-110">The capacity of the nodes in the cluster</span></span> 
- <span data-ttu-id="82e96-111">La quantità di risorse usate in ogni nodo</span><span class="sxs-lookup"><span data-stu-id="82e96-111">The amount of resources consumed on each node</span></span>

<span data-ttu-id="82e96-112">L'uso di risorse di un determinato servizio può cambiare nel tempo; i servizi sono in genere interessati da più di un tipo di risorse.</span><span class="sxs-lookup"><span data-stu-id="82e96-112">The resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span></span> <span data-ttu-id="82e96-113">Potrebbero essere misurate risorse reali e fisiche tra diversi servizi.</span><span class="sxs-lookup"><span data-stu-id="82e96-113">Across different services, there may be both real physical and physical resources being measured.</span></span> <span data-ttu-id="82e96-114">I servizi possono tracciare metriche fisiche come il consumo di memoria e del disco.</span><span class="sxs-lookup"><span data-stu-id="82e96-114">Services may track physical metrics like memory and disk consumption.</span></span> <span data-ttu-id="82e96-115">Più comunemente, i servizi potrebbero occuparsi anche di metriche logiche, ad esempio "WorkQueueDepth" o "TotalRequests".</span><span class="sxs-lookup"><span data-stu-id="82e96-115">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span></span> <span data-ttu-id="82e96-116">Nello stesso cluster, è possibile usare le metriche logiche e fisiche.</span><span class="sxs-lookup"><span data-stu-id="82e96-116">Both logical and physical metrics can be used in the same cluster.</span></span> <span data-ttu-id="82e96-117">Le metriche possono essere condivise tra molti servizi o essere specifiche per un determinato servizio.</span><span class="sxs-lookup"><span data-stu-id="82e96-117">Metrics can be shared across many services or be specific to a particular service.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="82e96-118">Altre considerazioni</span><span class="sxs-lookup"><span data-stu-id="82e96-118">Other considerations</span></span>
<span data-ttu-id="82e96-119">I proprietari e gli operatori del cluster possono essere diversi dagli autori del servizio e dell'applicazione, anche solo ufficialmente.</span><span class="sxs-lookup"><span data-stu-id="82e96-119">The owners and operators of the cluster can be different from the service and application authors, or at a minimum are the same people wearing different hats.</span></span> <span data-ttu-id="82e96-120">Quando si sviluppa l'applicazione si conoscono alcuni aspetti riguardanti cosa è necessario.</span><span class="sxs-lookup"><span data-stu-id="82e96-120">When you develop your application you know a few things about what it requires.</span></span> <span data-ttu-id="82e96-121">Si dispone di una stima delle risorse che verranno usate e come devono essere distribuiti servizi diversi.</span><span class="sxs-lookup"><span data-stu-id="82e96-121">You have an estimate of the resources it will consume and how different services should be deployed.</span></span> <span data-ttu-id="82e96-122">Ad esempio, il livello del web deve essere eseguito nei nodi esposti a Internet, mentre per i servizi di database non è necessario.</span><span class="sxs-lookup"><span data-stu-id="82e96-122">For example, the web tier needs to run on nodes exposed to the Internet, while the database services should not.</span></span> <span data-ttu-id="82e96-123">Come esempio aggiuntivo, i servizi web sono probabilmente limitati dalla CPU e dalla rete, mentre la cura di servizi del livello dei dati si occupa maggiormente del consumo della memoria e del disco.</span><span class="sxs-lookup"><span data-stu-id="82e96-123">As another example, the web services are probably constrained by CPU and network, while the data tier services care more about memory and disk consumption.</span></span> <span data-ttu-id="82e96-124">Tuttavia, la persona che gestisce un evento imprevisto in un sito per quel servizio in produzione, o che gestisce un aggiornamento del servizio, ha un lavoro diverso da fare e richiede strumenti diversi.</span><span class="sxs-lookup"><span data-stu-id="82e96-124">However, the person handling a live-site incident for that service in production, or who is managing an upgrade to the service has a different job to do, and requires different tools.</span></span> 

<span data-ttu-id="82e96-125">I cluster e i servizi sono dinamici:</span><span class="sxs-lookup"><span data-stu-id="82e96-125">Both the cluster and services are dynamic:</span></span>

- <span data-ttu-id="82e96-126">Il numero di nodi nel cluster può aumentare e diminuire</span><span class="sxs-lookup"><span data-stu-id="82e96-126">The number of nodes in the cluster can grow and shrink</span></span>
- <span data-ttu-id="82e96-127">Nodi di diversi tipi e dimensioni possono essere aggiunti o rimossi</span><span class="sxs-lookup"><span data-stu-id="82e96-127">Nodes of different sizes and types can come and go</span></span>
- <span data-ttu-id="82e96-128">I servizi possono essere creati e rimossi e le allocazioni delle risorse desiderate e le regole di selezione possono essere modificate</span><span class="sxs-lookup"><span data-stu-id="82e96-128">Services can be created, removed, and change their desired resource allocations and placement rules</span></span>
- <span data-ttu-id="82e96-129">Gli aggiornamenti o altre operazioni di gestione possono passare tramite il cluster nell'applicazione sui livelli dell'infrastruttura</span><span class="sxs-lookup"><span data-stu-id="82e96-129">Upgrades or other management operations can roll through the cluster at the application on infrastructure levels</span></span>
- <span data-ttu-id="82e96-130">Gli errori possono verificarsi in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="82e96-130">Failures can happen at any time.</span></span>

## <a name="cluster-resource-manager-components-and-data-flow"></a><span data-ttu-id="82e96-131">Componenti di Cluster Resource Manager e flusso dei dati</span><span class="sxs-lookup"><span data-stu-id="82e96-131">Cluster resource manager components and data flow</span></span>
<span data-ttu-id="82e96-132">Cluster Resource Manager deve monitorare i requisiti di ogni servizio e il consumo di risorse di ogni oggetto di servizio che li compone.</span><span class="sxs-lookup"><span data-stu-id="82e96-132">The Cluster Resource Manager has to track the requirements of each service and the consumption of resources by each service object within those services.</span></span> <span data-ttu-id="82e96-133">Cluster Resource Manager dispone di due componenti concettuali: agenti in esecuzione su ciascun nodo e un servizio a tolleranza d'errore.</span><span class="sxs-lookup"><span data-stu-id="82e96-133">The Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span></span> <span data-ttu-id="82e96-134">Gli agenti in ogni nodo monitorano i report di carico dai servizi, li aggregano e li presentano in modo periodico.</span><span class="sxs-lookup"><span data-stu-id="82e96-134">The agents on each node track load reports from services, aggregate them, and periodically report them.</span></span> <span data-ttu-id="82e96-135">Il servizio Cluster Resource Manager aggrega tutte le informazioni dagli agenti locali e agisce in base alla propria configurazione corrente.</span><span class="sxs-lookup"><span data-stu-id="82e96-135">The Cluster Resource Manager service aggregates all the information from the local agents and reacts based on its current configuration.</span></span>

<span data-ttu-id="82e96-136">Si veda il diagramma seguente:</span><span class="sxs-lookup"><span data-stu-id="82e96-136">Let’s look at the following diagram:</span></span>

<span data-ttu-id="82e96-137"><center>
![Architettura di Resource Balancer][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="82e96-137"><center>
![Resource Balancer Architecture][Image1]
</center></span></span>

<span data-ttu-id="82e96-138">Durante il runtime possono essere apportate numerose modifiche.</span><span class="sxs-lookup"><span data-stu-id="82e96-138">During runtime, there are many changes that could happen.</span></span> <span data-ttu-id="82e96-139">Ad esempio, si supponga che la quantità di risorse consumate da determinati servizi venga modificata, che alcuni servizi abbiano esito negativo e che alcuni nodi si aggiungano o lascino il cluster.</span><span class="sxs-lookup"><span data-stu-id="82e96-139">For example, let’s say the amount of resources some services consume changes, some services fail, and some nodes join and leave the cluster.</span></span> <span data-ttu-id="82e96-140">Tutte le modifiche in un nodo vengono aggregate e inviate periodicamente al servizio Cluster Resource Manager (1,2) in cui vengono nuovamente aggregate, analizzate e archiviate.</span><span class="sxs-lookup"><span data-stu-id="82e96-140">All the changes on a node are aggregated and periodically sent to the Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span></span> <span data-ttu-id="82e96-141">Il servizio esamina tutte le modifiche a intervalli di pochi secondi e determina eventuali azioni necessarie (3).</span><span class="sxs-lookup"><span data-stu-id="82e96-141">Every few seconds that service looks at the changes and determines if any actions are necessary (3).</span></span> <span data-ttu-id="82e96-142">Ad esempio potrebbe notare che sono stati aggiunti dei nodi vuoti al cluster.</span><span class="sxs-lookup"><span data-stu-id="82e96-142">For example, it could notice that some empty nodes have been added to the cluster.</span></span> <span data-ttu-id="82e96-143">Di conseguenza, decide di spostare alcuni servizi in tali nodi.</span><span class="sxs-lookup"><span data-stu-id="82e96-143">As a result, it decides to move some services to those nodes.</span></span> <span data-ttu-id="82e96-144">Cluster Resource Manager potrebbe anche notare che un determinato nodo è sovraccarico o che alcuni servizi presentano anomalie (o sono stati eliminati), liberando risorse altrove.</span><span class="sxs-lookup"><span data-stu-id="82e96-144">The Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed or been deleted, freeing up resources elsewhere.</span></span>

<span data-ttu-id="82e96-145">Verrà ora descritto il diagramma seguente.</span><span class="sxs-lookup"><span data-stu-id="82e96-145">Let’s look at the following diagram and see what happens next.</span></span> <span data-ttu-id="82e96-146">Si supponga che Cluster Resource Manager stabilisca che sono necessarie modifiche.</span><span class="sxs-lookup"><span data-stu-id="82e96-146">Let’s say that the Cluster Resource Manager determines that changes are necessary.</span></span> <span data-ttu-id="82e96-147">Interagisce con altri servizi di sistema (in particolare Gestione failover) per apportare le modifiche necessarie.</span><span class="sxs-lookup"><span data-stu-id="82e96-147">It coordinates with other system services (in particular the Failover Manager) to make the necessary changes.</span></span> <span data-ttu-id="82e96-148">I comandi necessari vengono quindi inviati ai nodi appropriati (4).</span><span class="sxs-lookup"><span data-stu-id="82e96-148">Then the necessary commands are sent to the appropriate nodes (4).</span></span> <span data-ttu-id="82e96-149">Ad esempio, si supponga che Resource Manager abbia notato che il nodo 5 è sovraccarico e che abbia pertanto deciso di spostare il servizio B da Node5 a Node4.</span><span class="sxs-lookup"><span data-stu-id="82e96-149">For example, let's say the Resource Manager noticed that Node5 was overloaded, and so decided to move service B from Node5 to Node4.</span></span> <span data-ttu-id="82e96-150">Alla fine della riconfigurazione (5), il cluster avrà l'aspetto seguente:</span><span class="sxs-lookup"><span data-stu-id="82e96-150">At the end of the reconfiguration (5), the cluster looks like this:</span></span>

<span data-ttu-id="82e96-151"><center>
![Architettura di Resource Balancer][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="82e96-151"><center>
![Resource Balancer Architecture][Image2]
</center></span></span>

## <a name="next-steps"></a><span data-ttu-id="82e96-152">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="82e96-152">Next steps</span></span>
- <span data-ttu-id="82e96-153">Cluster Resource Manager dispone di varie opzioni per descrivere il cluster.</span><span class="sxs-lookup"><span data-stu-id="82e96-153">The Cluster Resource Manager has many options for describing the cluster.</span></span> <span data-ttu-id="82e96-154">Per altre informazioni a riguardo vedere l'articolo [Descrivere un cluster di Service Fabric](./service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="82e96-154">To find out more about them, check out this article on [describing a Service Fabric cluster](./service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
- <span data-ttu-id="82e96-155">I compiti primari di Cluster Resource Manager sono il ribilanciamento del cluster e l'applicazione delle regole di selezione.</span><span class="sxs-lookup"><span data-stu-id="82e96-155">The Cluster Resource Manager's primary duties are rebalancing the cluster and enforcing placement rules.</span></span> <span data-ttu-id="82e96-156">Per altre informazioni sulla configurazione di questi comportamenti, vedere [bilanciamento del cluster di Service Fabric](./service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="82e96-156">For more information on configuring these behaviors, see [balancing your Service Fabric cluster](./service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-1.png
[Image2]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-2.png
