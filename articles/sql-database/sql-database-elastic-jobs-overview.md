---
title: "Gestione dei database cloud con scalabilità orizzontale | Documentazione Microsoft"
description: Viene illustrato il servizio processo di database elastico
metakeywords: azure sql database elastic databases
services: sql-database
documentationcenter: 
manager: jhubbard
author: ddove
ms.assetid: 6fa47cf2-1162-4534-a206-6e2d95b78580
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/24/2016
ms.author: ddove
ms.openlocfilehash: 8e84562115a866c0df5e0dee6c7f66c036a74737
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="managing-scaled-out-cloud-databases"></a><span data-ttu-id="5a408-103">Gestione dei database cloud con scalabilità orizzontale</span><span class="sxs-lookup"><span data-stu-id="5a408-103">Managing scaled-out cloud databases</span></span>
<span data-ttu-id="5a408-104">Per la gestione dei database cloud con scalabilità orizzontale, la funzionalità **Processi di database elastico** (in anteprima) consente di eseguire uno script Transact-SQL (T-SQL) in modo affidabile, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="5a408-104">To manage scaled-out sharded databases, the **Elastic Database jobs** feature (preview) enables you to reliably execute a Transact-SQL (T-SQL) script across a group of databases, including:</span></span>

* <span data-ttu-id="5a408-105">una raccolta personalizzata di database (illustrata di seguito)</span><span class="sxs-lookup"><span data-stu-id="5a408-105">a custom-defined collection of databases (explained below)</span></span>
* <span data-ttu-id="5a408-106">tutti i database in un [pool elastico](sql-database-elastic-pool.md)</span><span class="sxs-lookup"><span data-stu-id="5a408-106">all databases in an [elastic pool](sql-database-elastic-pool.md)</span></span>
* <span data-ttu-id="5a408-107">un set di partizioni, creato con la [libreria client dei database elastici](sql-database-elastic-database-client-library.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-107">a shard set (created using [Elastic Database client library](sql-database-elastic-database-client-library.md)).</span></span> 

## <a name="documentation"></a><span data-ttu-id="5a408-108">Documentazione</span><span class="sxs-lookup"><span data-stu-id="5a408-108">Documentation</span></span>
* <span data-ttu-id="5a408-109">[Installare i componenti di Processi di database elastico](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-109">[Install the Elastic Database job components](sql-database-elastic-jobs-service-installation.md).</span></span> 
* <span data-ttu-id="5a408-110">[Introduzione a Processi di database elastico](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-110">[Get started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>
* <span data-ttu-id="5a408-111">[Creare e gestire processi tramite PowerShell](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-111">[Create and manage jobs using PowerShell](sql-database-elastic-jobs-powershell.md).</span></span>
* [<span data-ttu-id="5a408-112">Creare e gestire database SQL di Azure con scalabilità orizzontale</span><span class="sxs-lookup"><span data-stu-id="5a408-112">Create and manage scaled out Azure SQL Databases</span></span>](sql-database-elastic-jobs-getting-started.md)

<span data-ttu-id="5a408-113">**Processi database elastici** è attualmente un servizio cloud di Azure ospitato dal cliente che consente l'esecuzione di attività amministrative ad hoc e pianificate, dette **processi**.</span><span class="sxs-lookup"><span data-stu-id="5a408-113">**Elastic Database jobs** is currently a customer-hosted Azure Cloud Service that enables the execution of ad-hoc and scheduled administrative tasks, which are called **jobs**.</span></span> <span data-ttu-id="5a408-114">Con i processi è possibile gestire facilmente e in modo affidabile gruppi estesi di database SQL di Azure tramite l'esecuzione di script Transact-SQL per eseguire operazioni amministrative.</span><span class="sxs-lookup"><span data-stu-id="5a408-114">With jobs, you can easily and reliably manage large groups of Azure SQL Databases by running Transact-SQL scripts to perform administrative operations.</span></span> 

![Servizio processo di database elastico][1]

## <a name="why-use-jobs"></a><span data-ttu-id="5a408-116">Vantaggi offerti dai processi</span><span class="sxs-lookup"><span data-stu-id="5a408-116">Why use jobs?</span></span>
<span data-ttu-id="5a408-117">**Manage**</span><span class="sxs-lookup"><span data-stu-id="5a408-117">**Manage**</span></span>

<span data-ttu-id="5a408-118">Eseguire facilmente le modifiche dello schema, la gestione delle credenziali, gli aggiornamenti dei dati di riferimento, la raccolta dei dati sulle prestazioni o la raccolta dei dati di telemetria del tenant (cliente).</span><span class="sxs-lookup"><span data-stu-id="5a408-118">Easily do schema changes, credentials management, reference data updates, performance data collection or tenant (customer) telemetry collection.</span></span>

<span data-ttu-id="5a408-119">**Report**</span><span class="sxs-lookup"><span data-stu-id="5a408-119">**Reports**</span></span>

<span data-ttu-id="5a408-120">Aggregare i dati di una raccolta di database SQL di Azure in una singola tabella di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5a408-120">Aggregate data from a collection of Azure SQL Databases into a single destination table.</span></span>

<span data-ttu-id="5a408-121">**Ridurre il sovraccarico**</span><span class="sxs-lookup"><span data-stu-id="5a408-121">**Reduce overhead**</span></span>

<span data-ttu-id="5a408-122">In genere, è necessario connettersi a ciascun database in modo indipendente per eseguire istruzioni T-SQL o effettuare altre attività amministrative.</span><span class="sxs-lookup"><span data-stu-id="5a408-122">Normally, you must connect to each database independently in order to run Transact-SQL statements or perform other administrative tasks.</span></span> <span data-ttu-id="5a408-123">Un processo gestisce le attività di accesso a ogni database nel gruppo di destinazione.</span><span class="sxs-lookup"><span data-stu-id="5a408-123">A job handles the task of logging in to each database in the target group.</span></span> <span data-ttu-id="5a408-124">È anche necessario definire, gestire e mantenere gli script T-SQL da eseguire su un gruppo di database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="5a408-124">You also define, maintain and persist Transact-SQL scripts to be executed across a group of Azure SQL Databases.</span></span>

<span data-ttu-id="5a408-125">**Accounting**</span><span class="sxs-lookup"><span data-stu-id="5a408-125">**Accounting**</span></span>

<span data-ttu-id="5a408-126">I processi eseguono lo script e registrano lo stato di esecuzione per ogni database.</span><span class="sxs-lookup"><span data-stu-id="5a408-126">Jobs run the script and log the status of execution for each database.</span></span> <span data-ttu-id="5a408-127">È anche disponibile la ripetizione automatica in caso di errori.</span><span class="sxs-lookup"><span data-stu-id="5a408-127">You also get automatic retry when failures occur.</span></span>

<span data-ttu-id="5a408-128">**Flessibilità**</span><span class="sxs-lookup"><span data-stu-id="5a408-128">**Flexibility**</span></span>

<span data-ttu-id="5a408-129">Definire gruppi personalizzati di database SQL di Azure e pianificazioni per l'esecuzione di un processo.</span><span class="sxs-lookup"><span data-stu-id="5a408-129">Define custom groups of Azure SQL Databases, and define schedules for running a job.</span></span>

> [!NOTE]
> <span data-ttu-id="5a408-130">Nel portale di Azure è disponibile solo un set ridotto di funzioni limitate ai pool elastici di SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="5a408-130">In the Azure portal, only a reduced set of functions limited to SQL Azure elastic pools is available.</span></span> <span data-ttu-id="5a408-131">Utilizzare le API di PowerShell per accedere alla serie completa delle funzionalità correnti.</span><span class="sxs-lookup"><span data-stu-id="5a408-131">Use the PowerShell APIs to access the full set of current functionality.</span></span>
> 
> 

## <a name="applications"></a><span data-ttu-id="5a408-132">Applicazioni</span><span class="sxs-lookup"><span data-stu-id="5a408-132">Applications</span></span>
* <span data-ttu-id="5a408-133">Eseguire attività amministrative, quali la distribuzione di un nuovo schema.</span><span class="sxs-lookup"><span data-stu-id="5a408-133">Perform administrative tasks, such as deploying a new schema.</span></span>
* <span data-ttu-id="5a408-134">Aggiornare i dati di riferimento, ad esempio informazioni di prodotto comuni tra tutti i database.</span><span class="sxs-lookup"><span data-stu-id="5a408-134">Update reference data-product information common across all databases.</span></span> <span data-ttu-id="5a408-135">Pianificare aggiornamenti automatici ogni giorno della settimana, dopo l'orario di lavoro.</span><span class="sxs-lookup"><span data-stu-id="5a408-135">Or schedules automatic updates every weekday, after hours.</span></span>
* <span data-ttu-id="5a408-136">Ricompilazione degli indici per migliorare le prestazioni delle query.</span><span class="sxs-lookup"><span data-stu-id="5a408-136">Rebuild indexes to improve query performance.</span></span> <span data-ttu-id="5a408-137">La ricompilazione può essere configurata per essere eseguita in una raccolta di database su base periodica, ad esempio durante le fasce orarie non di punta.</span><span class="sxs-lookup"><span data-stu-id="5a408-137">The rebuilding can be configured to execute across a collection of databases on a recurring basis, such as during off-peak hours.</span></span>
* <span data-ttu-id="5a408-138">Raccogliere i risultati di query da un set di database in una tabella centrale su base costante.</span><span class="sxs-lookup"><span data-stu-id="5a408-138">Collect query results from a set of databases into a central table on an on-going basis.</span></span> <span data-ttu-id="5a408-139">Le query di prestazione possono essere eseguite continuamente e configurate per l'esecuzione di attività aggiuntive di trigger.</span><span class="sxs-lookup"><span data-stu-id="5a408-139">Performance queries can be continually executed and configured to trigger additional tasks to be executed.</span></span>
* <span data-ttu-id="5a408-140">Eseguire query di elaborazione dei dati più lunghe per una vasta serie di database, ad esempio la raccolta della telemetria del cliente.</span><span class="sxs-lookup"><span data-stu-id="5a408-140">Execute longer running data processing queries across a large set of databases, for example the collection of customer telemetry.</span></span> <span data-ttu-id="5a408-141">I risultati vengono raccolti in una tabella di destinazione singola per ulteriori analisi.</span><span class="sxs-lookup"><span data-stu-id="5a408-141">Results are collected into a single destination table for further analysis.</span></span>

## <a name="elastic-database-jobs-end-to-end"></a><span data-ttu-id="5a408-142">Processi di database elastici: end-to-end</span><span class="sxs-lookup"><span data-stu-id="5a408-142">Elastic Database jobs: end-to-end</span></span>
1. <span data-ttu-id="5a408-143">Installare i componenti dei **processi di database elastici** .</span><span class="sxs-lookup"><span data-stu-id="5a408-143">Install the **Elastic Database jobs** components.</span></span> <span data-ttu-id="5a408-144">Per altre informazioni, vedere [Installazione dei processi di database elastici](sql-database-elastic-jobs-service-installation.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-144">For more information, see [Installing Elastic Database jobs](sql-database-elastic-jobs-service-installation.md).</span></span> <span data-ttu-id="5a408-145">Se l'installazione non riesce, vedere [come disinstallare](sql-database-elastic-jobs-uninstall.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-145">If the installation fails, see [how to uninstall](sql-database-elastic-jobs-uninstall.md).</span></span>
2. <span data-ttu-id="5a408-146">Utilizzare le API di PowerShell per accedere a ulteriori funzionalità, ad esempio la creazione di raccolte di database personalizzati, l’aggiunta di pianificazioni e/o la raccolta di set di risultati.</span><span class="sxs-lookup"><span data-stu-id="5a408-146">Use the PowerShell APIs to access more functionality, for example creating custom-defined database collections, adding schedules and/or gathering results sets.</span></span> <span data-ttu-id="5a408-147">Usare il portale per un'installazione semplice e la creazione o il monitoraggio dei processi limitati all'esecuzione in un **pool elastico**.</span><span class="sxs-lookup"><span data-stu-id="5a408-147">Use the portal for simple installation and creation/monitoring of jobs limited to execution against a **elastic pool**.</span></span> 
3. <span data-ttu-id="5a408-148">Creare credenziali crittografate per l'esecuzione del processo e [aggiungere l'utente (o il ruolo) a ogni database nel gruppo](sql-database-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-148">Create encrypted credentials for job execution and [add the user (or role) to each database in the group](sql-database-security-overview.md).</span></span>
4. <span data-ttu-id="5a408-149">Creare uno script T-SQL idempotente che può essere eseguito su ogni database nel gruppo.</span><span class="sxs-lookup"><span data-stu-id="5a408-149">Create an idempotent T-SQL script that can be run against every database in the group.</span></span> 
5. <span data-ttu-id="5a408-150">Seguire questi passaggi per creare processi tramite il portale di Azure: [Creazione e gestione di processi di database elastici](sql-database-elastic-jobs-create-and-manage.md)</span><span class="sxs-lookup"><span data-stu-id="5a408-150">Follow these steps to create jobs using the Azure portal: [Creating and managing Elastic Database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> 
6. <span data-ttu-id="5a408-151">In alternativa, usare script di PowerShell: [Creare e gestire processi di database elastici del database SQL tramite PowerShell (anteprima)](sql-database-elastic-jobs-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-151">Or use PowerShell scripts: [Create and manage a SQL Database elastic database jobs using PowerShell (preview)](sql-database-elastic-jobs-powershell.md).</span></span>

## <a name="idempotent-scripts"></a><span data-ttu-id="5a408-152">Script idempotenti</span><span class="sxs-lookup"><span data-stu-id="5a408-152">Idempotent scripts</span></span>
<span data-ttu-id="5a408-153">Gli script devono essere [idempotenti](https://en.wikipedia.org/wiki/Idempotence).</span><span class="sxs-lookup"><span data-stu-id="5a408-153">The scripts must be [idempotent](https://en.wikipedia.org/wiki/Idempotence).</span></span> <span data-ttu-id="5a408-154">In altre parole, "idempotente" significa che se lo script riesce e viene eseguito di nuovo, si ottiene lo stesso risultato.</span><span class="sxs-lookup"><span data-stu-id="5a408-154">In simple terms, "idempotent" means that if the script succeeds, and it is run again, the same result occurs.</span></span> <span data-ttu-id="5a408-155">Uno script potrebbe non riuscire a causa di problemi di rete temporanei.</span><span class="sxs-lookup"><span data-stu-id="5a408-155">A script may fail due to transient network issues.</span></span> <span data-ttu-id="5a408-156">In tal caso, il processo ritenterà automaticamente l'esecuzione dello script per un numero di volte predefinito prima di desistere.</span><span class="sxs-lookup"><span data-stu-id="5a408-156">In that case, the job will automatically retry running the script a preset number of times before desisting.</span></span> <span data-ttu-id="5a408-157">Uno script idempotente ha lo stesso risultato anche se è stato eseguito correttamente due volte.</span><span class="sxs-lookup"><span data-stu-id="5a408-157">An idempotent script has the same result even if has been successfully run twice.</span></span> 

<span data-ttu-id="5a408-158">Una semplice strategia consiste nel verificare l'esistenza di un oggetto prima di crearlo.</span><span class="sxs-lookup"><span data-stu-id="5a408-158">A simple tactic is to test for the existence of an object before creating it.</span></span>  

    IF NOT EXIST (some_object)
    -- Create the object 
    -- If it exists, drop the object before recreating it.

<span data-ttu-id="5a408-159">Analogamente, uno script deve poter essere eseguito correttamente verificando in modo logico e risolvendo qualsiasi condizione trovata.</span><span class="sxs-lookup"><span data-stu-id="5a408-159">Similarly, a script must be able to execute successfully by logically testing for and countering any conditions it finds.</span></span>

## <a name="failures-and-logs"></a><span data-ttu-id="5a408-160">Errori e log</span><span class="sxs-lookup"><span data-stu-id="5a408-160">Failures and logs</span></span>
<span data-ttu-id="5a408-161">Se uno script non riesce dopo diversi tentativi, il processo registra l'errore e continua.</span><span class="sxs-lookup"><span data-stu-id="5a408-161">If a script fails after multiple attempts, the job logs the error and continues.</span></span> <span data-ttu-id="5a408-162">Dopo il termine di un processo, ovvero un'esecuzione in tutti i database nel gruppo, è possibile controllare l'elenco dei tentativi non riusciti.</span><span class="sxs-lookup"><span data-stu-id="5a408-162">After a job ends (meaning a run against all databases in the group), you can check its list of failed attempts.</span></span> <span data-ttu-id="5a408-163">I log forniscono informazioni dettagliate per il debug degli script difettosi.</span><span class="sxs-lookup"><span data-stu-id="5a408-163">The logs provide details to debug faulty scripts.</span></span> 

## <a name="group-types-and-creation"></a><span data-ttu-id="5a408-164">Tipi di gruppo e creazione</span><span class="sxs-lookup"><span data-stu-id="5a408-164">Group types and creation</span></span>
<span data-ttu-id="5a408-165">Esistono due tipi di gruppi:</span><span class="sxs-lookup"><span data-stu-id="5a408-165">There are two kinds of groups:</span></span> 

1. <span data-ttu-id="5a408-166">Set di partizioni</span><span class="sxs-lookup"><span data-stu-id="5a408-166">Shard sets</span></span>
2. <span data-ttu-id="5a408-167">Gruppi personalizzati</span><span class="sxs-lookup"><span data-stu-id="5a408-167">Custom groups</span></span>

<span data-ttu-id="5a408-168">I gruppi di set di partizioni vengono creati usando gli [strumenti di database elastici](sql-database-elastic-scale-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-168">Shard set groups are created using the [Elastic Database tools](sql-database-elastic-scale-introduction.md).</span></span> <span data-ttu-id="5a408-169">Quando si crea un gruppo di set di partizioni, i database vengono aggiunti o rimossi automaticamente dal gruppo.</span><span class="sxs-lookup"><span data-stu-id="5a408-169">When you create a shard set group, databases are added or removed from the group automatically.</span></span> <span data-ttu-id="5a408-170">Ad esempio, una nuova partizione viene creata automaticamente nel gruppo quando viene aggiunta alla mappa partizioni.</span><span class="sxs-lookup"><span data-stu-id="5a408-170">For example, a new shard will be automatically in the group when you add it to the shard map.</span></span> <span data-ttu-id="5a408-171">Quindi è possibile eseguire un processo sul gruppo.</span><span class="sxs-lookup"><span data-stu-id="5a408-171">A job can then be run against the group.</span></span>

<span data-ttu-id="5a408-172">I gruppi personalizzati, d'altra parte, sono definiti rigidamente.</span><span class="sxs-lookup"><span data-stu-id="5a408-172">Custom groups, on the other hand, are rigidly defined.</span></span> <span data-ttu-id="5a408-173">È necessario aggiungere o rimuovere i database in modo esplicito dai gruppi personalizzati.</span><span class="sxs-lookup"><span data-stu-id="5a408-173">You must explicitly add or remove databases from custom groups.</span></span> <span data-ttu-id="5a408-174">Se viene eliminato un database nel gruppo, il processo tenterà di eseguire lo script sul database, generando infine un errore.</span><span class="sxs-lookup"><span data-stu-id="5a408-174">If a database in the group is dropped, the job will attempt to run the script against the database resulting in an eventual failure.</span></span> <span data-ttu-id="5a408-175">I gruppi creati tramite il portale di Azure attualmente sono gruppi personalizzati.</span><span class="sxs-lookup"><span data-stu-id="5a408-175">Groups created using the Azure portal currently are custom groups.</span></span> 

## <a name="components-and-pricing"></a><span data-ttu-id="5a408-176">Componenti e prezzi</span><span class="sxs-lookup"><span data-stu-id="5a408-176">Components and pricing</span></span>
<span data-ttu-id="5a408-177">I seguenti componenti interagiscono per creare un servizio Cloud di Azure che consente l'esecuzione ad hoc dei processi di amministrazione.</span><span class="sxs-lookup"><span data-stu-id="5a408-177">The following components work together to create an Azure Cloud service that enables ad-hoc execution of administrative jobs.</span></span> <span data-ttu-id="5a408-178">I componenti vengono installati e configurati automaticamente durante la configurazione, nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="5a408-178">The components are installed and configured automatically during setup, in your subscription.</span></span> <span data-ttu-id="5a408-179">È possibile identificare i servizi poiché hanno tutti lo stesso nome generato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="5a408-179">You can identify the services as they all have the same auto-generated name.</span></span> <span data-ttu-id="5a408-180">Il nome è univoco ed è costituito dal prefisso "edj" seguito da 21 caratteri generati casualmente.</span><span class="sxs-lookup"><span data-stu-id="5a408-180">The name is unique, and consists of the prefix "edj" followed by 21 randomly generated characters.</span></span>

* <span data-ttu-id="5a408-181">**Servizio cloud di Azure**: i processi di database elastica (anteprima) vengono recapitati come servizio cloud di Azure ospitato dal cliente per l'esecuzione delle attività richieste.</span><span class="sxs-lookup"><span data-stu-id="5a408-181">**Azure Cloud Service**: elastic database jobs (preview) is delivered as a customer-hosted Azure Cloud service to perform execution of the requested tasks.</span></span> <span data-ttu-id="5a408-182">Dal portale, il servizio viene distribuito e ospitato nella sottoscrizione Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="5a408-182">From the portal, the service is deployed and hosted in your Microsoft Azure subscription.</span></span> <span data-ttu-id="5a408-183">Il servizio predefinito distribuito viene eseguito con un numero minimo di due ruoli di lavoro per la disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="5a408-183">The default deployed service runs with the minimum of two worker roles for high availability.</span></span> <span data-ttu-id="5a408-184">La dimensione predefinita di ogni ruolo di lavoro (ElasticDatabaseJobWorker) viene eseguita in un'istanza A0.</span><span class="sxs-lookup"><span data-stu-id="5a408-184">The default size of each worker role (ElasticDatabaseJobWorker) runs on an A0 instance.</span></span> <span data-ttu-id="5a408-185">Per informazioni sui prezzi, vedere [Servizi cloud Prezzi](https://azure.microsoft.com/pricing/details/cloud-services/).</span><span class="sxs-lookup"><span data-stu-id="5a408-185">For pricing, see [Cloud services pricing](https://azure.microsoft.com/pricing/details/cloud-services/).</span></span> 
* <span data-ttu-id="5a408-186">**Database SQL di Azure**: il servizio usa un database SQL di Azure noto come **database di controllo** per archiviare tutti i metadati del processo.</span><span class="sxs-lookup"><span data-stu-id="5a408-186">**Azure SQL Database**: The service uses an Azure SQL Database known as the **control database** to store all of the job metadata.</span></span> <span data-ttu-id="5a408-187">Il livello di servizio predefinito è S0.</span><span class="sxs-lookup"><span data-stu-id="5a408-187">The default service tier is a S0.</span></span> <span data-ttu-id="5a408-188">Per informazioni sui prezzi, vedere [Database SQL Prezzi](https://azure.microsoft.com/pricing/details/sql-database/).</span><span class="sxs-lookup"><span data-stu-id="5a408-188">For pricing, see [SQL Database Pricing](https://azure.microsoft.com/pricing/details/sql-database/).</span></span>
* <span data-ttu-id="5a408-189">**Bus di servizio di Azure**: è destinato alla coordinazione del lavoro all'interno del servizio cloud di Azure.</span><span class="sxs-lookup"><span data-stu-id="5a408-189">**Azure Service Bus**: An Azure Service Bus is for coordination of the work within the Azure Cloud Service.</span></span> <span data-ttu-id="5a408-190">Vedere [Bus di servizio Prezzi](https://azure.microsoft.com/pricing/details/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="5a408-190">See [Service Bus Pricing](https://azure.microsoft.com/pricing/details/service-bus/).</span></span>
* <span data-ttu-id="5a408-191">**Archiviazione di Azure**: viene usato un account di Archiviazione di Azure per archiviare la registrazione dell'output di diagnostica, nel caso in cui un problema richieda un ulteriore debugging. Vedere [Abilitazione di Diagnostica in servizi cloud e macchine virtuali di Azure](../cloud-services/cloud-services-dotnet-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-191">**Azure Storage**: An Azure Storage account is used to store diagnostic output logging in the event that an issue requires further debugging (see [Enabling Diagnostics in Azure Cloud Services and Virtual Machines](../cloud-services/cloud-services-dotnet-diagnostics.md)).</span></span> <span data-ttu-id="5a408-192">Per informazioni sui prezzi, vedere [Prezzi di Archiviazione di Azure](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="5a408-192">For pricing, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>

## <a name="how-elastic-database-jobs-work"></a><span data-ttu-id="5a408-193">Funzionano dei processi di database elastico</span><span class="sxs-lookup"><span data-stu-id="5a408-193">How Elastic Database jobs work</span></span>
1. <span data-ttu-id="5a408-194">Un database SQL di Azure viene designato come **database di controllo** per l'archiviazione di tutti i dati di stato e i metadati.</span><span class="sxs-lookup"><span data-stu-id="5a408-194">An Azure SQL Database is designated a **control database** which stores all meta-data and state data.</span></span>
2. <span data-ttu-id="5a408-195">Il **servizio processi** accede al database di controllo per avviare e tenere traccia dei processi da eseguire.</span><span class="sxs-lookup"><span data-stu-id="5a408-195">The control database is accessed by the **job service** to launch and track jobs to execute.</span></span>
3. <span data-ttu-id="5a408-196">Due diversi ruoli comunicano con il database di controllo:</span><span class="sxs-lookup"><span data-stu-id="5a408-196">Two different roles communicate with the control database:</span></span> 
   * <span data-ttu-id="5a408-197">Controller: Determina quali processi richiedono attività per eseguire il processo richiesto e ritenta di eseguire i processi non riusciti tramite la creazione di nuove attività di processo.</span><span class="sxs-lookup"><span data-stu-id="5a408-197">Controller: Determines which jobs require tasks to perform the requested job, and retries failed jobs by creating new job tasks.</span></span>
   * <span data-ttu-id="5a408-198">Esecuzione dell'attività di processo: Esegue le attività di processo.</span><span class="sxs-lookup"><span data-stu-id="5a408-198">Job Task Execution: Carries out the job tasks.</span></span>

### <a name="job-task-types"></a><span data-ttu-id="5a408-199">Tipi di attività di processo</span><span class="sxs-lookup"><span data-stu-id="5a408-199">Job task types</span></span>
<span data-ttu-id="5a408-200">Sono disponibili più tipi di attività di processo che eseguono l'esecuzione di processi:</span><span class="sxs-lookup"><span data-stu-id="5a408-200">There are multiple types of job tasks that carry out execution of jobs:</span></span>

* <span data-ttu-id="5a408-201">ShardMapRefresh: Esegue una query del mapping della partizione per determinare tutti i database utilizzati come partizioni</span><span class="sxs-lookup"><span data-stu-id="5a408-201">ShardMapRefresh: Queries the shard map to determine all the databases used as shards</span></span>
* <span data-ttu-id="5a408-202">ScriptSplit: Divide lo script tra le istruzioni ‘GO’ in batch</span><span class="sxs-lookup"><span data-stu-id="5a408-202">ScriptSplit: Splits the script across ‘GO’ statements into batches</span></span>
* <span data-ttu-id="5a408-203">ExpandJob: Crea processi figlio per ogni database da un processo destinato a un gruppo di database</span><span class="sxs-lookup"><span data-stu-id="5a408-203">ExpandJob: Creates child jobs for each database from a job that targets a group of databases</span></span>
* <span data-ttu-id="5a408-204">ScriptExecution: Esegue uno script su un particolare database utilizzando le credenziali definite</span><span class="sxs-lookup"><span data-stu-id="5a408-204">ScriptExecution: Executes a script against a particular database using defined credentials</span></span>
* <span data-ttu-id="5a408-205">Dacpac: Applica un DACPAC a un determinato database utilizzando determinate credenziali</span><span class="sxs-lookup"><span data-stu-id="5a408-205">Dacpac: Applies a DACPAC to a particular database using particular credentials</span></span>

## <a name="end-to-end-job-execution-work-flow"></a><span data-ttu-id="5a408-206">Flusso di lavoro completo di esecuzione del processo</span><span class="sxs-lookup"><span data-stu-id="5a408-206">End-to-end job execution work-flow</span></span>
1. <span data-ttu-id="5a408-207">Un processo viene inserito nel **database di controllo** tramite il portale o l'API di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="5a408-207">Using either the Portal or the PowerShell API, a job is inserted into the  **control database**.</span></span> <span data-ttu-id="5a408-208">Il processo richiede l'esecuzione di uno script Transact-SQL su un gruppo di database che utilizza credenziali specifiche.</span><span class="sxs-lookup"><span data-stu-id="5a408-208">The job requests execution of a Transact-SQL script against a group of databases using specific credentials.</span></span>
2. <span data-ttu-id="5a408-209">Il controller identifica il nuovo processo.</span><span class="sxs-lookup"><span data-stu-id="5a408-209">The controller identifies the new job.</span></span> <span data-ttu-id="5a408-210">Le attività di processo vengono create ed eseguite per suddividere lo script e per aggiornare i database del gruppo.</span><span class="sxs-lookup"><span data-stu-id="5a408-210">Job tasks are created and executed to split the script and to refresh the group’s databases.</span></span> <span data-ttu-id="5a408-211">Infine, un nuovo processo viene creato ed eseguito per espandere il processo e creare nuovi processi figlio in cui ogni processo figlio è specificato per eseguire lo script Transact-SQL su un singolo database nel gruppo.</span><span class="sxs-lookup"><span data-stu-id="5a408-211">Lastly, a new job is created and executed to expand the job and create new child jobs where each child job is specified to execute the Transact-SQL script against an individual database in the group.</span></span>
3. <span data-ttu-id="5a408-212">Il controller identifica i processi figlio creati.</span><span class="sxs-lookup"><span data-stu-id="5a408-212">The controller identifies the created child jobs.</span></span> <span data-ttu-id="5a408-213">Per ogni processo, il controller crea e avvia un'attività di processo per eseguire lo script su un database.</span><span class="sxs-lookup"><span data-stu-id="5a408-213">For each job, the controller creates and triggers a job task to execute the script against a database.</span></span> 
4. <span data-ttu-id="5a408-214">Dopo aver completato tutte le attività di processo, il controller aggiorna i processi nello stato ‘completato’.</span><span class="sxs-lookup"><span data-stu-id="5a408-214">After all job tasks have completed, the controller updates the jobs to a completed state.</span></span> 
   <span data-ttu-id="5a408-215">In qualsiasi momento durante l'esecuzione del processo, l'API di PowerShell può essere utilizzata per visualizzare lo stato corrente dell'esecuzione del processo.</span><span class="sxs-lookup"><span data-stu-id="5a408-215">At any point during job execution, the PowerShell API can be used to view the current state of job execution.</span></span> <span data-ttu-id="5a408-216">Tutte le volte restituite dalle API PowerShell sono rappresentate in formato UTC.</span><span class="sxs-lookup"><span data-stu-id="5a408-216">All times returned by the PowerShell APIs are represented in UTC.</span></span> <span data-ttu-id="5a408-217">Se si desidera, è possibile avviare una richiesta di annullamento per interrompere un processo.</span><span class="sxs-lookup"><span data-stu-id="5a408-217">If desired, a cancellation request can be initiated to stop a job.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="5a408-218">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="5a408-218">Next steps</span></span>
<span data-ttu-id="5a408-219">[Installare i componenti](sql-database-elastic-jobs-service-installation.md), quindi [creare e aggiungere un log a ciascun database nel gruppo di database](sql-database-manage-logins.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-219">[Install the components](sql-database-elastic-jobs-service-installation.md), then [create and add a log in to each database in the group of databases](sql-database-manage-logins.md).</span></span> <span data-ttu-id="5a408-220">Per comprendere la creazione e la gestione del processo, vedere [Creazione e gestione di processi elastici di database](sql-database-elastic-jobs-create-and-manage.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-220">To further understand job creation and management, see [creating and managing elastic database jobs](sql-database-elastic-jobs-create-and-manage.md).</span></span> <span data-ttu-id="5a408-221">Vedere anche [Introduzione a Processi di database elastico](sql-database-elastic-jobs-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="5a408-221">See also [Getting started with Elastic Database jobs](sql-database-elastic-jobs-getting-started.md).</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

<!--Image references-->
[1]: ./media/sql-database-elastic-jobs-overview/elastic-jobs.png
<!--anchors-->


