---
title: aaaUpgrade PhoneFactor tooAzure Server MFA | Documenti Microsoft
description: Introduzione a Azure MFA Server quando esegue l'aggiornamento dall'agente phonefactor precedente hello.
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
editor: yossib
ms.assetid: 42838ff7-bdf2-4d06-bacc-b3839a00cd76
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/06/2017
ms.author: kgremban
ms.openlocfilehash: 15b7b8517929c30f66e6a39cd44c69d12d25c6d7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-hello-phonefactor-agent-tooazure-multi-factor-authentication-server"></a><span data-ttu-id="6d711-103">Aggiornamento hello agente PhoneFactor tooAzure Server multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="6d711-103">Upgrade hello PhoneFactor Agent tooAzure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="6d711-104">tooupgrade hello agente PhoneFactor versione 5. x o precedenti tooAzure Server multi-Factor Authentication, disinstallare l'agente PhoneFactor hello e associato prima di componenti.</span><span class="sxs-lookup"><span data-stu-id="6d711-104">tooupgrade hello PhoneFactor Agent v5.x or older tooAzure Multi-Factor Authentication Server, uninstall hello PhoneFactor Agent and affiliated components first.</span></span> <span data-ttu-id="6d711-105">Quindi hello Server multi-Factor Authentication e possono essere installati i componenti associati.</span><span class="sxs-lookup"><span data-stu-id="6d711-105">Then hello Multi-Factor Authentication Server and its affiliated components can be installed.</span></span>

## <a name="uninstall-hello-phonefactor-agent"></a><span data-ttu-id="6d711-106">Disinstallare l'agente PhoneFactor hello</span><span class="sxs-lookup"><span data-stu-id="6d711-106">Uninstall hello PhoneFactor Agent</span></span>

1. <span data-ttu-id="6d711-107">Per eseguire il backup del file di dati di hello PhoneFactor.</span><span class="sxs-lookup"><span data-stu-id="6d711-107">First, back up hello PhoneFactor data file.</span></span> <span data-ttu-id="6d711-108">il percorso di installazione di Hello predefinito è c:\Programmi\Microsoft Files\PhoneFactor\Data\Phonefactor.pfdata.</span><span class="sxs-lookup"><span data-stu-id="6d711-108">hello default installation location is C:\Program Files\PhoneFactor\Data\Phonefactor.pfdata.</span></span>

2. <span data-ttu-id="6d711-109">Se è installato hello portale per gli utenti:</span><span class="sxs-lookup"><span data-stu-id="6d711-109">If hello User Portal is installed:</span></span>
  1. <span data-ttu-id="6d711-110">Passare la cartella di installazione toohello ed eseguire il backup dei file Web. config hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-110">Navigate toohello install folder and back up hello web.config file.</span></span> <span data-ttu-id="6d711-111">il percorso di installazione di Hello predefinito è c:\inetpub\wwwroot\phonefactor.</span><span class="sxs-lookup"><span data-stu-id="6d711-111">hello default installation location is C:\inetpub\wwwroot\PhoneFactor.</span></span>

  2. <span data-ttu-id="6d711-112">Se sono stati aggiunti portale toohello temi personalizzati, eseguire il backup della cartella personalizzata directory c:\inetpub\wwwroot\phonefactor\app_themes. hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-112">If you have added custom themes toohello portal, back up your custom folder below hello C:\inetpub\wwwroot\PhoneFactor\App_Themes directory.</span></span>

  3. <span data-ttu-id="6d711-113">Disinstallare hello portale per gli utenti tramite hello agente PhoneFactor (disponibile solo se è installato in hello nello stesso server hello agente PhoneFactor) o tramite programmi di Windows e funzionalità.</span><span class="sxs-lookup"><span data-stu-id="6d711-113">Uninstall hello User Portal either through hello PhoneFactor Agent (only available if installed on hello same server as hello PhoneFactor Agent) or through Windows Programs and Features.</span></span>

3. <span data-ttu-id="6d711-114">Se è installato il servizio Web App Mobile hello:</span><span class="sxs-lookup"><span data-stu-id="6d711-114">If hello Mobile App Web Service is installed:</span></span>

  1. <span data-ttu-id="6d711-115">Passare la cartella di installazione toohello ed eseguire il backup dei file Web. config hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-115">Go toohello install folder and back up hello web.config file.</span></span> <span data-ttu-id="6d711-116">il percorso di installazione di Hello predefinito è c:\inetpub\wwwroot\phonefactorphoneappwebservice.</span><span class="sxs-lookup"><span data-stu-id="6d711-116">hello default installation location is C:\inetpub\wwwroot\PhoneFactorPhoneAppWebService.</span></span>

  2. <span data-ttu-id="6d711-117">Disinstallare hello servizio Web App per dispositivi mobili tramite programmi di Windows e funzionalità.</span><span class="sxs-lookup"><span data-stu-id="6d711-117">Uninstall hello Mobile App Web Service through Windows Programs and Features.</span></span>

4. <span data-ttu-id="6d711-118">Se hello Web Service SDK è installato, disinstallarlo tramite hello agente PhoneFactor o programmi di Windows e funzionalità.</span><span class="sxs-lookup"><span data-stu-id="6d711-118">If hello Web Service SDK is installed, uninstall it either through hello PhoneFactor Agent or through Windows Programs and Features.</span></span>

5. <span data-ttu-id="6d711-119">Disinstallare hello agente PhoneFactor tramite programmi di Windows e funzionalità.</span><span class="sxs-lookup"><span data-stu-id="6d711-119">Uninstall hello PhoneFactor Agent through Windows Programs and Features.</span></span>

## <a name="install-hello-multi-factor-authentication-server"></a><span data-ttu-id="6d711-120">Installare hello Server multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="6d711-120">Install hello Multi-Factor Authentication Server</span></span>

<span data-ttu-id="6d711-121">Hello percorso di installazione viene prelevato dal Registro di sistema di hello dall'installazione dell'agente PhoneFactor precedente hello, pertanto è necessario installare hello stesso percorso (ad esempio, c:\Programmi\Microsoft Files\PhoneFactor).</span><span class="sxs-lookup"><span data-stu-id="6d711-121">hello installation path is picked up from hello registry from hello previous PhoneFactor Agent installation, so it should install in hello same location (for example, C:\Program Files\PhoneFactor).</span></span> <span data-ttu-id="6d711-122">Le nuove installazioni hanno un percorso di installazione predefinito diverso, ad esempio C:\Programmi\Multi-Factor Authentication Server.</span><span class="sxs-lookup"><span data-stu-id="6d711-122">New installations have a different default install path (for example, C:\Program Files\Multi-Factor Authentication Server).</span></span> <span data-ttu-id="6d711-123">Hello file di dati lasciati dall'agente PhoneFactor devono essere aggiornati durante l'installazione, in modo le impostazioni e gli utenti dovrebbero essere ancora che presente dopo l'installazione di hello nuova Server multi-Factor Authentication hello precedente.</span><span class="sxs-lookup"><span data-stu-id="6d711-123">hello data file left by hello previous PhoneFactor Agent should be upgraded during installation, so your users and settings should still be there after installing hello new Multi-Factor Authentication Server.</span></span>

1. <span data-ttu-id="6d711-124">Se richiesto, attivare hello Server multi-Factor Authentication e assicurarsi che venga assegnato il gruppo di replica corretto toohello.</span><span class="sxs-lookup"><span data-stu-id="6d711-124">If prompted, activate hello Multi-Factor Authentication Server and ensure it is assigned toohello correct replication group.</span></span>

2. <span data-ttu-id="6d711-125">Se Web Service SDK è stato installato in precedenza, hello installa hello nuovi SDK di servizi Web tramite l'interfaccia utente del Server multi-Factor Authentication hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-125">If hello Web Service SDK was previously installed, install hello new Web Service SDK through hello Multi-Factor Authentication Server User Interface.</span></span>

  <span data-ttu-id="6d711-126">impostazione predefinita il nome di directory virtuale è adesso Hello **MultiFactorAuthWebServiceSdk** anziché **PhoneFactorWebServiceSdk**.</span><span class="sxs-lookup"><span data-stu-id="6d711-126">hello default virtual directory name is now **MultiFactorAuthWebServiceSdk** instead of **PhoneFactorWebServiceSdk**.</span></span> <span data-ttu-id="6d711-127">Se si desidera toouse hello precedente nome, è necessario modificare il nome di hello della directory virtuale hello durante l'installazione.</span><span class="sxs-lookup"><span data-stu-id="6d711-127">If you want toouse hello previous name, you must change hello name of hello virtual directory during installation.</span></span> <span data-ttu-id="6d711-128">In caso contrario, se si consente a hello installazione toouse hello nuovo nome predefinito, è necessario toochange hello URL in tutte le applicazioni che hello riferimento SDK servizi Web (ad esempio hello portale per gli utenti e servizio Web App Mobile) toopoint nella posizione corretta hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-128">Otherwise, if you allow hello install toouse hello new default name, you have toochange hello URL in any applications that reference hello Web Service SDK (like hello User Portal and Mobile App Web Service) toopoint at hello correct location.</span></span>

3. <span data-ttu-id="6d711-129">Se installa portale per gli utenti precedentemente installato nel Server agente PhoneFactor, hello hello hello portale utenti di multi-Factor Authentication nuovo tramite l'interfaccia utente del Server multi-Factor Authentication hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-129">If hello User Portal was previously installed on hello PhoneFactor Agent Server, install hello new Multi-Factor Authentication User Portal through hello Multi-Factor Authentication Server User Interface.</span></span>

  <span data-ttu-id="6d711-130">impostazione predefinita il nome di directory virtuale è adesso Hello **MultiFactorAuth** anziché **PhoneFactor**.</span><span class="sxs-lookup"><span data-stu-id="6d711-130">hello default virtual directory name is now **MultiFactorAuth** instead of **PhoneFactor**.</span></span> <span data-ttu-id="6d711-131">Se si desidera toouse hello precedente nome, è necessario modificare il nome di hello della directory virtuale hello durante l'installazione.</span><span class="sxs-lookup"><span data-stu-id="6d711-131">If you want toouse hello previous name, you must change hello name of hello virtual directory during installation.</span></span> <span data-ttu-id="6d711-132">In caso contrario, se si consente hello installazione toouse hello nuovo nome predefinito, è necessario fare clic sull'icona portale per gli utenti hello hello Server multi-Factor Authentication e aggiornare hello URL portale utenti nella scheda Impostazioni hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-132">Otherwise, if you allow hello install toouse hello new default name, you should click hello User Portal icon in hello Multi-Factor Authentication Server and update hello User Portal URL on hello Settings tab.</span></span>

4. <span data-ttu-id="6d711-133">Se in precedenza hello portale per gli utenti e/o al servizio Web App Mobile è stato installato in un server diverso da hello agente PhoneFactor:</span><span class="sxs-lookup"><span data-stu-id="6d711-133">If hello User Portal and/or Mobile App Web Service was previously installed on a different server from hello PhoneFactor Agent:</span></span>

  1. <span data-ttu-id="6d711-134">Passare il percorso di installazione toohello (ad esempio, c:\Programmi\Microsoft Files\PhoneFactor) e copiare toohello programmi di installazione di uno o più altri server.</span><span class="sxs-lookup"><span data-stu-id="6d711-134">Go toohello install location (for example, C:\Program Files\PhoneFactor) and copy one or more installers toohello other server.</span></span> <span data-ttu-id="6d711-135">Sono disponibili i programmi di installazione a 32 e 64 bit per hello portale per gli utenti e servizio Web App Mobile.</span><span class="sxs-lookup"><span data-stu-id="6d711-135">There are 32-bit and 64-bit installers for both hello User Portal and Mobile App Web Service.</span></span> <span data-ttu-id="6d711-136">Si chiamano MultiFactorAuthenticationUserPortalSetupXX.msi e MultiFactorAuthenticationMobileAppWebServiceSetupXX.msi.</span><span class="sxs-lookup"><span data-stu-id="6d711-136">They are called MultiFactorAuthenticationUserPortalSetupXX.msi and MultiFactorAuthenticationMobileAppWebServiceSetupXX.msi.</span></span>

  2. <span data-ttu-id="6d711-137">tooinstall hello portale per gli utenti nel server web hello, aprire un prompt dei comandi come amministratore ed eseguire MultiFactorAuthenticationUserPortalSetupXX.msi.</span><span class="sxs-lookup"><span data-stu-id="6d711-137">tooinstall hello User Portal on hello web server, open a command prompt as an administrator and run MultiFactorAuthenticationUserPortalSetupXX.msi.</span></span>

    <span data-ttu-id="6d711-138">impostazione predefinita il nome di directory virtuale è adesso Hello **MultiFactorAuth** anziché **PhoneFactor**.</span><span class="sxs-lookup"><span data-stu-id="6d711-138">hello default virtual directory name is now **MultiFactorAuth** instead of **PhoneFactor**.</span></span> <span data-ttu-id="6d711-139">Se si desidera toouse hello precedente nome, è necessario modificare il nome di hello della directory virtuale hello durante l'installazione.</span><span class="sxs-lookup"><span data-stu-id="6d711-139">If you want toouse hello previous name, you must change hello name of hello virtual directory during installation.</span></span> <span data-ttu-id="6d711-140">In caso contrario, se si consente hello installazione toouse hello nuovo nome predefinito, è necessario fare clic sull'icona portale per gli utenti hello hello Server multi-Factor Authentication e aggiornare hello URL portale utenti nella scheda Impostazioni hello. Gli utenti esistenti devono toobe informato di hello nuovo URL.</span><span class="sxs-lookup"><span data-stu-id="6d711-140">Otherwise, if you allow hello install toouse hello new default name, you should click hello User Portal icon in hello Multi-Factor Authentication Server and update hello User Portal URL on hello Settings tab. Existing users need toobe informed of hello new URL.</span></span>

  3. <span data-ttu-id="6d711-141">Andare toohello percorso di installazione portale per gli utenti (ad esempio C:\inetpub\wwwroot\MultiFactorAuth) e modificare file Web. config hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-141">Go toohello User Portal install location (for example, C:\inetpub\wwwroot\MultiFactorAuth) and edit hello web.config file.</span></span> <span data-ttu-id="6d711-142">Copiare i valori hello hello sezioni appSettings e applicationSettings del file Web. config originale che è stato eseguito il backup prima dell'aggiornamento hello in nuovo file Web. config di hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-142">Copy hello values in hello appSettings and applicationSettings sections from your original web.config file that was backed up before hello upgrade into hello new web.config file.</span></span> <span data-ttu-id="6d711-143">Se il nuovo nome di directory virtuale predefinito di hello è stato mantenuto durante l'installazione di hello Web Service SDK, modificare l'URL di hello nella posizione corretta di hello applicationSettings sezione toopoint toohello.</span><span class="sxs-lookup"><span data-stu-id="6d711-143">If hello new default virtual directory name was kept when installing hello Web Service SDK, change hello URL in hello applicationSettings section toopoint toohello correct location.</span></span> <span data-ttu-id="6d711-144">Se altre impostazioni predefinite sono state modificate nel file Web. config precedente hello, si applicano le stesse modifiche toohello file Web. config.</span><span class="sxs-lookup"><span data-stu-id="6d711-144">If any other defaults were changed in hello previous web.config file, apply those same changes toohello new web.config file.</span></span>

  4. <span data-ttu-id="6d711-145">tooinstall hello, servizio Web App Mobile nel server web hello, aprire un prompt dei comandi come amministratore ed eseguire MultiFactorAuthenticationMobileAppWebServiceSetupXX.msi hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-145">tooinstall hello Mobile App Web Service on hello web server, open a command prompt as an administrator and run hello MultiFactorAuthenticationMobileAppWebServiceSetupXX.msi.</span></span>

    <span data-ttu-id="6d711-146">impostazione predefinita il nome di directory virtuale è adesso Hello **MultiFactorAuthMobileAppWebService** anziché **PhoneFactorPhoneAppWebService**.</span><span class="sxs-lookup"><span data-stu-id="6d711-146">hello default virtual directory name is now **MultiFactorAuthMobileAppWebService** instead of **PhoneFactorPhoneAppWebService**.</span></span> <span data-ttu-id="6d711-147">Se si desidera toouse hello precedente nome, è necessario modificare il nome di hello della directory virtuale hello durante l'installazione.</span><span class="sxs-lookup"><span data-stu-id="6d711-147">If you want toouse hello previous name, you must change hello name of hello virtual directory during installation.</span></span> <span data-ttu-id="6d711-148">È possibile toochoose un toomake nome più breve è più facile per gli utenti finali tootype nei dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="6d711-148">You may want toochoose a shorter name toomake it easy for end users tootype in on their mobile devices.</span></span> <span data-ttu-id="6d711-149">In caso contrario, se si consente hello installazione toouse hello nuovo nome predefinito, è necessario fare clic sull'icona App Mobile hello hello Server multi-Factor Authentication e aggiornare hello URL del servizio Web App Mobile.</span><span class="sxs-lookup"><span data-stu-id="6d711-149">Otherwise, if you allow hello install toouse hello new default name, you should click hello Mobile App icon in hello Multi-Factor Authentication Server and update hello Mobile App Web Service URL.</span></span>

  5. <span data-ttu-id="6d711-150">Passare a percorso di installazione di servizio Web App Mobile toohello (ad esempio C:\inetpub\wwwroot\MultiFactorAuthMobileAppWebService) e modificare file Web. config hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-150">Go toohello Mobile App Web Service install location (for example, C:\inetpub\wwwroot\MultiFactorAuthMobileAppWebService) and edit hello web.config file.</span></span> <span data-ttu-id="6d711-151">Copiare i valori hello hello sezioni appSettings e applicationSettings del file Web. config originale che è stato eseguito il backup prima dell'aggiornamento hello in nuovo file Web. config di hello.</span><span class="sxs-lookup"><span data-stu-id="6d711-151">Copy hello values in hello appSettings and applicationSettings sections from your original web.config file that was backed up before hello upgrade into hello new web.config file.</span></span> <span data-ttu-id="6d711-152">Se il nuovo nome di directory virtuale predefinito di hello è stato mantenuto durante l'installazione di hello Web Service SDK, modificare l'URL di hello nella posizione corretta di hello applicationSettings sezione toopoint toohello.</span><span class="sxs-lookup"><span data-stu-id="6d711-152">If hello new default virtual directory name was kept when installing hello Web Service SDK, change hello URL in hello applicationSettings section toopoint toohello correct location.</span></span> <span data-ttu-id="6d711-153">Se altre impostazioni predefinite sono state modificate nel file Web. config precedente hello, si applicano le stesse modifiche toohello file Web. config.</span><span class="sxs-lookup"><span data-stu-id="6d711-153">If any other defaults were changed in hello previous web.config file, apply those same changes toohello new web.config file.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6d711-154">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="6d711-154">Next steps</span></span>

- <span data-ttu-id="6d711-155">[Installare portale per gli utenti hello](multi-factor-authentication-get-started-portal.md) per hello del Server Azure multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="6d711-155">[Install hello users portal](multi-factor-authentication-get-started-portal.md) for hello Azure Multi-Factor Authentication Server.</span></span>

- <span data-ttu-id="6d711-156">[Configurare l'autenticazione di Windows](multi-factor-authentication-get-started-server-windows.md) per le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="6d711-156">[Configure Windows Authentication](multi-factor-authentication-get-started-server-windows.md) for your applications.</span></span> 
