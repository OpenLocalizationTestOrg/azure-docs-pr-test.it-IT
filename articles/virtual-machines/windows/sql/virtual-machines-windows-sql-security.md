---
title: Considerazioni per SQL Server in Azure aaaSecurity | Documenti Microsoft
description: Questo argomento include linee guida generali per proteggere SQL Server in esecuzione in una macchina virtuale di Azure.
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: d710c296-e490-43e7-8ca9-8932586b71da
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/02/2017
ms.author: jroth
ms.openlocfilehash: 14c3d828fa87446da67beea6d28886de254afe15
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="32a6d-103">Considerazioni relative alla sicurezza per SQL Server in Macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="32a6d-103">Security Considerations for SQL Server in Azure Virtual Machines</span></span>

<span data-ttu-id="32a6d-104">In questo argomento include linee guida di sicurezza generali che consentono di stabilire l'accesso sicuro tooSQL istanze del Server in una macchina virtuale di Azure (VM).</span><span class="sxs-lookup"><span data-stu-id="32a6d-104">This topic includes overall security guidelines that help establish secure access tooSQL Server instances in an Azure virtual machine (VM).</span></span>

<span data-ttu-id="32a6d-105">Azure è conforme a diverse normative del settore e standard che consentono di toobuild una soluzione compatibile con SQL Server in esecuzione in una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="32a6d-105">Azure complies with several industry regulations and standards that can enable you toobuild a compliant solution with SQL Server running in a virtual machine.</span></span> <span data-ttu-id="32a6d-106">Per informazioni sulla conformità alle normative con Azure, vedere il [Centro protezione di Azure](https://azure.microsoft.com/support/trust-center/).</span><span class="sxs-lookup"><span data-stu-id="32a6d-106">For information about regulatory compliance with Azure, see [Azure Trust Center](https://azure.microsoft.com/support/trust-center/).</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="control-access-toohello-sql-vm"></a><span data-ttu-id="32a6d-107">Controllo accesso toohello SQL VM</span><span class="sxs-lookup"><span data-stu-id="32a6d-107">Control access toohello SQL VM</span></span>

<span data-ttu-id="32a6d-108">Quando si crea la macchina virtuale SQL Server, prendere in considerazione come toocarefully controllare chi ha accesso toohello computer e tooSQL Server.</span><span class="sxs-lookup"><span data-stu-id="32a6d-108">When you create your SQL Server virtual machine, consider how toocarefully control who has access toohello machine and tooSQL Server.</span></span> <span data-ttu-id="32a6d-109">In generale, è necessario eseguire il seguente hello:</span><span class="sxs-lookup"><span data-stu-id="32a6d-109">In general, you should do hello following:</span></span>

- <span data-ttu-id="32a6d-110">Limitare l'accesso tooSQL Server tooonly hello applicazioni e i client che ne hanno necessità.</span><span class="sxs-lookup"><span data-stu-id="32a6d-110">Restrict access tooSQL Server tooonly hello applications and clients that need it.</span></span>
- <span data-ttu-id="32a6d-111">Seguire le procedure consigliate per la gestione di account utente e password.</span><span class="sxs-lookup"><span data-stu-id="32a6d-111">Follow best practices for managing user accounts and passwords.</span></span>

<span data-ttu-id="32a6d-112">Hello le sezioni seguenti fornisce suggerimenti su pensare per questi punti.</span><span class="sxs-lookup"><span data-stu-id="32a6d-112">hello following sections provide suggestions on thinking through these points.</span></span>

## <a name="secure-connections"></a><span data-ttu-id="32a6d-113">Connessioni sicure</span><span class="sxs-lookup"><span data-stu-id="32a6d-113">Secure connections</span></span>

<span data-ttu-id="32a6d-114">Quando si crea una macchina virtuale di SQL Server con un'immagine della raccolta, hello **connettività di SQL Server** offre hello scelta dell'opzione **locale (all'interno di macchina virtuale)**, **privata (all'interno di rete virtuale)** , o **pubblico (Internet)**.</span><span class="sxs-lookup"><span data-stu-id="32a6d-114">When you create a SQL Server virtual machine with a gallery image, hello **SQL Server Connectivity** option gives you hello choice of **Local (inside VM)**, **Private (within Virtual Network)**, or **Public (Internet)**.</span></span>

![Connettività di SQL Server](./media/virtual-machines-windows-sql-security/sql-vm-connectivity-option.png)

<span data-ttu-id="32a6d-116">Per una sicurezza ottimale hello, scegliere l'opzione più restrittiva di hello per lo scenario.</span><span class="sxs-lookup"><span data-stu-id="32a6d-116">For hello best security, choose hello most restrictive option for your scenario.</span></span> <span data-ttu-id="32a6d-117">Ad esempio, se si esegue un'applicazione che accede a SQL Server su hello stessa macchina virtuale, quindi **locale** è l'opzione più sicura hello.</span><span class="sxs-lookup"><span data-stu-id="32a6d-117">For example, if you are running an application that accesses SQL Server on hello same VM, then **Local** is hello most secure choice.</span></span> <span data-ttu-id="32a6d-118">Se si esegue un'applicazione Azure che richiede accesso toohello SQL Server, quindi **privata** consente di proteggere la comunicazione tooSQL Server solo all'interno di hello specificato [rete virtuale di Azure](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="32a6d-118">If you are running an Azure application that requires access toohello SQL Server, then **Private** secures communication tooSQL Server only within hello specified [Azure Virtual Network](../../../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="32a6d-119">Se è necessario **pubblica** (internest) accesso toohello macchina virtuale di SQL Server, quindi assicurarsi di toofollow che altre procedure consigliate in questo argomento tooreduce la superficie di attacco.</span><span class="sxs-lookup"><span data-stu-id="32a6d-119">If you require **Public** (internest) access toohello SQL Server VM, then make sure toofollow other best practices in this topic tooreduce your attack surface area.</span></span>

<span data-ttu-id="32a6d-120">Hello le opzioni selezionate nel portale di hello utilizzano regole di sicurezza in ingresso su macchine virtuali hello [Network Security Group](../../../virtual-network/virtual-networks-nsg.md) tooallow (gruppo) o negare macchina virtuale tooyour il traffico di rete.</span><span class="sxs-lookup"><span data-stu-id="32a6d-120">hello selected options in hello portal use inbound security rules on hello VMs [Network Security Group](../../../virtual-network/virtual-networks-nsg.md) (NSG) tooallow or deny network traffic tooyour virtual machine.</span></span> <span data-ttu-id="32a6d-121">È possibile modificare o creare nuove regole in entrata di gruppo porta di SQL Server tooallow traffico toohello (valore predefinito 1433).</span><span class="sxs-lookup"><span data-stu-id="32a6d-121">You can modify or create new inbound NSG rules tooallow traffic toohello SQL Server port (default 1433).</span></span> <span data-ttu-id="32a6d-122">È anche possibile specificare indirizzi IP specifici che sono consentiti toocommunicate tramite questa porta.</span><span class="sxs-lookup"><span data-stu-id="32a6d-122">You can also specify specific IP addresses that are allowed toocommunicate over this port.</span></span>

![Regole dei gruppi di sicurezza di rete](./media/virtual-machines-windows-sql-security/sql-vm-network-security-group-rules.png)

<span data-ttu-id="32a6d-124">Inoltre tooNSG regole toorestrict il traffico di rete, è inoltre possibile utilizzare hello Windows Firewall nella macchina virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="32a6d-124">In addition tooNSG rules toorestrict network traffic, you can also use hello Windows Firewall on hello virtual machine.</span></span>

<span data-ttu-id="32a6d-125">Se si utilizza l'endpoint con il modello di distribuzione classica hello, rimuovere tutti gli endpoint nella macchina virtuale hello se non si utilizza.</span><span class="sxs-lookup"><span data-stu-id="32a6d-125">If you are using endpoints with hello classic deployment model, remove any endpoints on hello virtual machine if you do not use them.</span></span> <span data-ttu-id="32a6d-126">Per istruzioni sull'uso di ACL con gli endpoint, vedere [Gestisci hello ACL su un endpoint](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span><span class="sxs-lookup"><span data-stu-id="32a6d-126">For instructions on using ACLs with endpoints, see [Manage hello ACL on an endpoint](../classic/setup-endpoints.md#manage-the-acl-on-an-endpoint).</span></span> <span data-ttu-id="32a6d-127">Questo non è necessario per le macchine virtuali che utilizzano hello Gestione risorse.</span><span class="sxs-lookup"><span data-stu-id="32a6d-127">This is not necessary for VMs that use hello Resource Manager.</span></span>

<span data-ttu-id="32a6d-128">Infine, è possibile abilitare connessioni crittografate per istanza hello hello il motore di Database di SQL Server nella macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="32a6d-128">Finally, consider enabling encrypted connections for hello instance of hello SQL Server Database Engine in your Azure virtual machine.</span></span> <span data-ttu-id="32a6d-129">Configurare l'istanza di SQL server con un certificato firmato.</span><span class="sxs-lookup"><span data-stu-id="32a6d-129">Configure SQL server instance with a signed certificate.</span></span> <span data-ttu-id="32a6d-130">Per ulteriori informazioni, vedere [toohello abilitare connessioni crittografate motore di Database](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) e [sintassi della stringa di connessione](https://msdn.microsoft.com/library/ms254500.aspx).</span><span class="sxs-lookup"><span data-stu-id="32a6d-130">For more information, see [Enable Encrypted Connections toohello Database Engine](https://docs.microsoft.com/sql/database-engine/configure-windows/enable-encrypted-connections-to-the-database-engine) and [Connection String Syntax](https://msdn.microsoft.com/library/ms254500.aspx).</span></span>

## <a name="use-a-non-default-port"></a><span data-ttu-id="32a6d-131">Usare una porta diversa da quella predefinita</span><span class="sxs-lookup"><span data-stu-id="32a6d-131">Use a non-default port</span></span>

<span data-ttu-id="32a6d-132">Per impostazione predefinita, SQL Server è in ascolto sulla porta 1433 che tutti conoscono.</span><span class="sxs-lookup"><span data-stu-id="32a6d-132">By default, SQL Server listens on a well-known port, 1433.</span></span> <span data-ttu-id="32a6d-133">Per una maggiore sicurezza, configurare SQL Server toolisten su una porta non predefinito, ad esempio 1401.</span><span class="sxs-lookup"><span data-stu-id="32a6d-133">For increased security, configure SQL Server toolisten on a non-default port, such as 1401.</span></span> <span data-ttu-id="32a6d-134">Se si esegue il provisioning di un'immagine della raccolta di SQL Server in hello portale di Azure, è possibile specificare la porta in hello **impostazioni di SQL Server** blade.</span><span class="sxs-lookup"><span data-stu-id="32a6d-134">If you provision a SQL Server gallery image in hello Azure portal, you can specify this port in hello **SQL Server settings** blade.</span></span>

<span data-ttu-id="32a6d-135">tooconfigure questo dopo il provisioning, sono disponibili due opzioni:</span><span class="sxs-lookup"><span data-stu-id="32a6d-135">tooconfigure this after provisioning, you have two options:</span></span>

- <span data-ttu-id="32a6d-136">Per le macchine virtuali di gestione risorse, è possibile selezionare **configurazione di SQL Server** dal pannello della panoramica hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="32a6d-136">For Resource Manager VMs, you can select **SQL Server configuration** from hello VM overview blade.</span></span> <span data-ttu-id="32a6d-137">Ciò fornisce un'opzione porta hello toochange.</span><span class="sxs-lookup"><span data-stu-id="32a6d-137">This provides an option toochange hello port.</span></span>

  ![Modificare la porta TCP nel portale](./media/virtual-machines-windows-sql-security/sql-vm-change-tcp-port.png)

- <span data-ttu-id="32a6d-139">Per le macchine virtuali classiche o per macchine virtuali di SQL Server che non è stato eseguito il provisioning con il portale di hello, è possibile configurare manualmente la porta hello connettendosi in remoto toohello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="32a6d-139">For Classic VMs or for SQL Server VMs that were not provisioned with hello portal, you can manually configure hello port by connecting remotely toohello VM.</span></span> <span data-ttu-id="32a6d-140">Per i passaggi di configurazione hello, vedere [configurare un Server tooListen su una porta TCP specifica](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span><span class="sxs-lookup"><span data-stu-id="32a6d-140">For hello configuration steps, see [Configure a Server tooListen on a Specific TCP Port](https://docs.microsoft.com/sql/database-engine/configure-windows/configure-a-server-to-listen-on-a-specific-tcp-port).</span></span> <span data-ttu-id="32a6d-141">Se si utilizza questa tecnica manuale, è necessario anche tooadd un Windows Firewall regola tooallow il traffico in ingresso sulla porta TCP.</span><span class="sxs-lookup"><span data-stu-id="32a6d-141">If you use this manual technique, you also need tooadd a Windows Firewall rule tooallow incoming traffic on that TCP port.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="32a6d-142">Specifica di una porta non predefinito è una buona idea se le connessioni internet toopublic aprire la porta di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="32a6d-142">Specifying a non-default port is a good idea if your SQL Server port is open toopublic internet connections.</span></span>

<span data-ttu-id="32a6d-143">Quando SQL Server è in ascolto su una porta non predefinito, è necessario specificare la porta hello quando ci si connette.</span><span class="sxs-lookup"><span data-stu-id="32a6d-143">When SQL Server is listening on a non-default port, you must specify hello port when you connect.</span></span> <span data-ttu-id="32a6d-144">Ad esempio, si consideri uno scenario in cui l'indirizzo IP del server hello è 13.55.255.255 e SQL Server è in ascolto sulla porta 1401.</span><span class="sxs-lookup"><span data-stu-id="32a6d-144">For example, consider a scenario where hello server IP address is 13.55.255.255 and SQL Server is listening on port 1401.</span></span> <span data-ttu-id="32a6d-145">tooconnect tooSQL Server, è possibile specificare `13.55.255.255,1401` nella stringa di connessione hello.</span><span class="sxs-lookup"><span data-stu-id="32a6d-145">tooconnect tooSQL Server, you would specify `13.55.255.255,1401` in hello connection string.</span></span>

## <a name="manage-accounts"></a><span data-ttu-id="32a6d-146">Gestisci account</span><span class="sxs-lookup"><span data-stu-id="32a6d-146">Manage accounts</span></span>

<span data-ttu-id="32a6d-147">Per evitare che utenti malintenzionati tooeasily ipotesi account nomi o password.</span><span class="sxs-lookup"><span data-stu-id="32a6d-147">You don't want attackers tooeasily guess account names or passwords.</span></span> <span data-ttu-id="32a6d-148">Utilizzare hello toohelp i suggerimenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="32a6d-148">Use hello following tips toohelp:</span></span>

- <span data-ttu-id="32a6d-149">Creare un account amministratore locale univoco non denominato **Amministratore**.</span><span class="sxs-lookup"><span data-stu-id="32a6d-149">Create a unique local administrator account that is not named **Administrator**.</span></span>

- <span data-ttu-id="32a6d-150">Usare password complesse per tutti gli account.</span><span class="sxs-lookup"><span data-stu-id="32a6d-150">Use complex strong passwords for all your accounts.</span></span> <span data-ttu-id="32a6d-151">Per ulteriori informazioni su come toocreate una password complessa, vedere [creare una password complessa](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) articolo.</span><span class="sxs-lookup"><span data-stu-id="32a6d-151">For more information about how toocreate a strong password, see [Create a strong password](https://support.microsoft.com/instantanswers/9bd5223b-efbe-aa95-b15a-2fb37bef637d/create-a-strong-password) article.</span></span>

- <span data-ttu-id="32a6d-152">Per impostazione predefinita, in Azure viene selezionata l'autenticazione di Windows durante l'installazione della macchina virtuale SQL Server.</span><span class="sxs-lookup"><span data-stu-id="32a6d-152">By default, Azure selects Windows Authentication during SQL Server Virtual Machine setup.</span></span> <span data-ttu-id="32a6d-153">Pertanto, hello **SA** account di accesso è disabilitato e viene assegnata una password dal programma di installazione.</span><span class="sxs-lookup"><span data-stu-id="32a6d-153">Therefore, hello **SA** login is disabled and a password is assigned by setup.</span></span> <span data-ttu-id="32a6d-154">È consigliabile che hello **SA** account di accesso non deve essere utilizzata oppure abilitato.</span><span class="sxs-lookup"><span data-stu-id="32a6d-154">We recommend that hello **SA** login should not be used or enabled.</span></span> <span data-ttu-id="32a6d-155">Se è necessario avere un account di accesso SQL, utilizzare una delle seguenti strategie hello:</span><span class="sxs-lookup"><span data-stu-id="32a6d-155">If you must have a SQL login, use one of hello following strategies:</span></span>

  - <span data-ttu-id="32a6d-156">Creare un account SQL con un nome univoco che abbia appartenenza **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="32a6d-156">Create a SQL account with a unique name that has **sysadmin** membership.</span></span> <span data-ttu-id="32a6d-157">È possibile farlo dal portale hello abilitando **l'autenticazione di SQL** durante il provisioning.</span><span class="sxs-lookup"><span data-stu-id="32a6d-157">You can do this from hello portal by enabling **SQL Authentication** during provisioning.</span></span>

    > [!TIP] 
    > <span data-ttu-id="32a6d-158">Se non si abilita l'autenticazione di SQL Server durante il provisioning, è necessario modificare manualmente la modalità di autenticazione hello troppo**SQL Server e l'autenticazione di Windows**.</span><span class="sxs-lookup"><span data-stu-id="32a6d-158">If you do not enable SQL Authentication during provisioning, you must manually change hello authentication mode too**SQL Server and Windows Authentication Mode**.</span></span> <span data-ttu-id="32a6d-159">Per altre informazioni, vedere [Modifica della modalità di autenticazione del server](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span><span class="sxs-lookup"><span data-stu-id="32a6d-159">For more information, see [Change Server Authentication Mode](https://docs.microsoft.com/sql/database-engine/configure-windows/change-server-authentication-mode).</span></span>

  - <span data-ttu-id="32a6d-160">Se è necessario utilizzare hello **SA** account di accesso, abilitare hello login dopo il provisioning e assegnare una nuova password complessa.</span><span class="sxs-lookup"><span data-stu-id="32a6d-160">If you must use hello **SA** login, enable hello login after provisioning and assign a new strong password.</span></span>

## <a name="follow-on-premises-best-practices"></a><span data-ttu-id="32a6d-161">Seguire le procedure consigliate locali</span><span class="sxs-lookup"><span data-stu-id="32a6d-161">Follow on-premises best practices</span></span>

<span data-ttu-id="32a6d-162">Inoltre toohello consigliate descritte in questo argomento, è consigliabile rivedere e implementare procedure di sicurezza locali tradizionali hello dove applicabile.</span><span class="sxs-lookup"><span data-stu-id="32a6d-162">In addition toohello practices described in this topic, we recommend that you review and implement hello traditional on-premises security practices where applicable.</span></span> <span data-ttu-id="32a6d-163">Per altre informazioni, vedere [Considerazioni sulla sicurezza per un'installazione di SQL Server](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation).</span><span class="sxs-lookup"><span data-stu-id="32a6d-163">For more information, see [Security Considerations for a SQL Server Installation](https://docs.microsoft.com/sql/sql-server/install/security-considerations-for-a-sql-server-installation)</span></span>

## <a name="next-steps"></a><span data-ttu-id="32a6d-164">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="32a6d-164">Next Steps</span></span>

<span data-ttu-id="32a6d-165">Se si è interessati anche alle procedure consigliate relative alle prestazioni, vedere [Procedure consigliate per le prestazioni per SQL Server in Macchine virtuali di Azure](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="32a6d-165">If you are also interested in best practices around performance, see [Performance Best Practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="32a6d-166">Per altri argomenti correlati toorunning SQL Server in macchine virtuali di Azure, vedere [SQL Server in macchine virtuali di Azure Panoramica](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="32a6d-166">For other topics related toorunning SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

