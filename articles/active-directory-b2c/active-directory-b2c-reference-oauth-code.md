---
title: Flusso del codice di autorizzazione - Azure AD B2C | Microsoft Docs
description: Informazioni su come compilare app Web tramite Azure AD B2C e il protocollo di autenticazione OpenID Connect.
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: c371aaab-813a-4317-97df-b62e2f53d865
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: dfc4f2e84704307ccbea6141c0dbc8d089733b22
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-oauth-20-authorization-code-flow"></a><span data-ttu-id="288d9-103">Azure Active Directory B2C: flusso del codice di autorizzazione di OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="288d9-103">Azure Active Directory B2C: OAuth 2.0 authorization code flow</span></span>
<span data-ttu-id="288d9-104">È possibile usare la concessione del codice di autorizzazione OAuth 2.0 nelle app che vengono installate su un dispositivo per ottenere l'accesso a risorse protette, ad esempio le API Web.</span><span class="sxs-lookup"><span data-stu-id="288d9-104">You can use the OAuth 2.0 authorization code grant in apps installed on a device to gain access to protected resources, such as web APIs.</span></span> <span data-ttu-id="288d9-105">Con l'implementazione di Azure Active Directory B2C (Azure AD B2C) di OAuth 2.0 è possibile aggiungere attività di gestione dell'iscrizione, dell'accesso e altre attività di gestione delle identità alle app per desktop e per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="288d9-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OAuth 2.0, you can add sign-up, sign-in, and other identity management tasks to your mobile and desktop apps.</span></span> <span data-ttu-id="288d9-106">Questo articolo è indipendente dal linguaggio.</span><span class="sxs-lookup"><span data-stu-id="288d9-106">This article is language-independent.</span></span> <span data-ttu-id="288d9-107">Descrive come inviare e ricevere messaggi HTTP senza usare alcuna libreria open source.</span><span class="sxs-lookup"><span data-stu-id="288d9-107">In the article, we describe how to send and receive HTTP messages without using any open-source libraries.</span></span>

<!-- TODO: Need link to libraries -->

<span data-ttu-id="288d9-108">Il flusso del codice di autorizzazione di OAuth 2.0 è descritto nella [sezione 4.1 della specifica di OAuth 2.0](http://tools.ietf.org/html/rfc6749).</span><span class="sxs-lookup"><span data-stu-id="288d9-108">The OAuth 2.0 authorization code flow is described in [section 4.1 of the OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="288d9-109">È possibile usarlo per eseguire l'autenticazione e l'autorizzazione nella maggior parte dei tipi di app, tra cui le [App Web](active-directory-b2c-apps.md#web-apps) e le [app installate in modo nativo](active-directory-b2c-apps.md#mobile-and-native-apps).</span><span class="sxs-lookup"><span data-stu-id="288d9-109">You can use it for authentication and authorization in most app types, including [web apps](active-directory-b2c-apps.md#web-apps) and [natively installed apps](active-directory-b2c-apps.md#mobile-and-native-apps).</span></span> <span data-ttu-id="288d9-110">È possibile usare il flusso del codice di autorizzazione di OAuth 2.0 per acquisire in modo sicuro *token di accesso* per le app, i quali possono essere usati per accedere a risorse protette da un [server di autorizzazione](active-directory-b2c-reference-protocols.md#the-basics).</span><span class="sxs-lookup"><span data-stu-id="288d9-110">You can use the OAuth 2.0 authorization code flow to securely acquire *access tokens* for your apps, which can be used to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span>

<span data-ttu-id="288d9-111">Questo articolo illustra il flusso del codice di autorizzazione di OAuth 2.0 dei **client pubblici**.</span><span class="sxs-lookup"><span data-stu-id="288d9-111">This article focuses on the **public clients** OAuth 2.0 authorization code flow.</span></span> <span data-ttu-id="288d9-112">Un client pubblico è qualsiasi applicazione client che non può essere considerata attendibile in modo sicuro per mantenere l'integrità di una password segreta.</span><span class="sxs-lookup"><span data-stu-id="288d9-112">A public client is any client application that cannot be trusted to securely maintain the integrity of a secret password.</span></span> <span data-ttu-id="288d9-113">Questo include app per dispositivi mobili, app per desktop e pressoché qualsiasi applicazione che viene eseguita su un dispositivo e deve ottenere token di accesso.</span><span class="sxs-lookup"><span data-stu-id="288d9-113">This includes mobile apps, desktop apps, and essentially any application that runs on a device and needs to get access tokens.</span></span> 

> [!NOTE]
> <span data-ttu-id="288d9-114">Per aggiungere la gestione delle identità a un'App Web usando Azure AD B2C, usare [OpenID Connect](active-directory-b2c-reference-oidc.md) al posto di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="288d9-114">To add identity management to a web app by using Azure AD B2C, use [OpenID Connect](active-directory-b2c-reference-oidc.md) instead of OAuth 2.0.</span></span>

<span data-ttu-id="288d9-115">Azure AD B2C estende i flussi standard OAuth 2.0 per non limitarsi esclusivamente a semplici operazioni di autorizzazione e autenticazione.</span><span class="sxs-lookup"><span data-stu-id="288d9-115">Azure AD B2C extends the standard OAuth 2.0 flows to do more than simple authentication and authorization.</span></span> <span data-ttu-id="288d9-116">Introduce il [parametro di criteri](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="288d9-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md).</span></span> <span data-ttu-id="288d9-117">Con i criteri integrati è possibile usare OAuth 2.0 per aggiungere esperienze utente all'app, ad esempio la gestione dell'iscrizione, dell'accesso e del profilo.</span><span class="sxs-lookup"><span data-stu-id="288d9-117">With built-in policies, you can use OAuth 2.0 to add user experiences to your app, such as sign-up, sign-in, and profile management.</span></span> <span data-ttu-id="288d9-118">Questo articolo illustra come usare OAuth 2.0 e i criteri per implementare ognuna di queste esperienze nelle applicazioni native.</span><span class="sxs-lookup"><span data-stu-id="288d9-118">In this article, we show you how to use OAuth 2.0 and policies to implement each of these experiences in your native applications.</span></span> <span data-ttu-id="288d9-119">Illustra anche come ottenere i token di accesso per accedere alle API Web.</span><span class="sxs-lookup"><span data-stu-id="288d9-119">We also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="288d9-120">Nelle richieste HTTP di esempio in questo articolo si usa la directory di Azure AD B2C di esempio, **fabrikamb2c.onmicrosoft.com**. Si usano anche i criteri e l'applicazione di esempio.</span><span class="sxs-lookup"><span data-stu-id="288d9-120">In the example HTTP requests in this article, we use our sample Azure AD B2C directory, **fabrikamb2c.onmicrosoft.com**. We also use our sample application and policies.</span></span> <span data-ttu-id="288d9-121">È possibile provare le richieste in autonomia usando questi valori o sostituendoli con valori personalizzati.</span><span class="sxs-lookup"><span data-stu-id="288d9-121">You can try the requests yourself by using these values, or you can replace them with your own values.</span></span>
<span data-ttu-id="288d9-122">Altre informazioni su come [ottenere la directory, l'applicazione e i criteri di Azure AD B2C personalizzati](#use-your-own-azure-ad-b2c-directory).</span><span class="sxs-lookup"><span data-stu-id="288d9-122">Learn how to [get your own Azure AD B2C directory, application, and policies](#use-your-own-azure-ad-b2c-directory).</span></span>

## <a name="1-get-an-authorization-code"></a><span data-ttu-id="288d9-123">1. Ottenere un codice di autorizzazione</span><span class="sxs-lookup"><span data-stu-id="288d9-123">1. Get an authorization code</span></span>
<span data-ttu-id="288d9-124">Il flusso del codice di autorizzazione ha inizio con il client che indirizza l'utente all'endpoint `/authorize` .</span><span class="sxs-lookup"><span data-stu-id="288d9-124">The authorization code flow begins with the client directing the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="288d9-125">Questa è la parte interattiva del flusso, dove l'utente esegue operazioni.</span><span class="sxs-lookup"><span data-stu-id="288d9-125">This is the interactive part of the flow, where the user takes action.</span></span> <span data-ttu-id="288d9-126">In questa richiesta il client indica nel parametro `scope` le autorizzazioni che deve acquisire dall'utente.</span><span class="sxs-lookup"><span data-stu-id="288d9-126">In this request, the client indicates in the `scope` parameter the permissions that it needs to acquire from the user.</span></span> <span data-ttu-id="288d9-127">Nel parametro `p` indica i criteri da eseguire.</span><span class="sxs-lookup"><span data-stu-id="288d9-127">In the `p` parameter, it indicates the policy to execute.</span></span> <span data-ttu-id="288d9-128">Di seguito vengono presentati tre esempi (con interruzioni di riga per migliorare la leggibilità), ognuno dei quali usa criteri diversi.</span><span class="sxs-lookup"><span data-stu-id="288d9-128">The following three examples (with line breaks for readability) each use a different policy.</span></span>

### <a name="use-a-sign-in-policy"></a><span data-ttu-id="288d9-129">Uso di un criterio di accesso</span><span class="sxs-lookup"><span data-stu-id="288d9-129">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_in
```

### <a name="use-a-sign-up-policy"></a><span data-ttu-id="288d9-130">Uso di un criterio di iscrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-130">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_sign_up
```

### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="288d9-131">Uso di un criterio di modifica del profilo</span><span class="sxs-lookup"><span data-stu-id="288d9-131">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code
&redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
&response_mode=query
&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&p=b2c_1_edit_profile
```

| <span data-ttu-id="288d9-132">Parametro</span><span class="sxs-lookup"><span data-stu-id="288d9-132">Parameter</span></span> | <span data-ttu-id="288d9-133">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="288d9-133">Required?</span></span> | <span data-ttu-id="288d9-134">Descrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-134">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="288d9-135">client_id</span><span class="sxs-lookup"><span data-stu-id="288d9-135">client_id</span></span> |<span data-ttu-id="288d9-136">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-136">Required</span></span> |<span data-ttu-id="288d9-137">ID applicazione assegnato all'app nel [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="288d9-137">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="288d9-138">response_type</span><span class="sxs-lookup"><span data-stu-id="288d9-138">response_type</span></span> |<span data-ttu-id="288d9-139">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-139">Required</span></span> |<span data-ttu-id="288d9-140">Tipo di risposta, che deve includere `code` per il flusso del codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="288d9-140">The response type, which must include `code` for the authorization code flow.</span></span> |
| <span data-ttu-id="288d9-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="288d9-141">redirect_uri</span></span> |<span data-ttu-id="288d9-142">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-142">Required</span></span> |<span data-ttu-id="288d9-143">URI di reindirizzamento dell'app dove le risposte di autenticazione possono essere inviate e ricevute dall'app.</span><span class="sxs-lookup"><span data-stu-id="288d9-143">The redirect URI of your app, where authentication responses are sent and received by your app.</span></span> <span data-ttu-id="288d9-144">Deve corrispondere esattamente a uno degli URI di reindirizzamento registrati nel portale, ad eccezione del fatto che deve essere codificato come URL.</span><span class="sxs-lookup"><span data-stu-id="288d9-144">It must exactly match one of the redirect URIs that you registered in the portal, except that it must be URL-encoded.</span></span> |
| <span data-ttu-id="288d9-145">scope</span><span class="sxs-lookup"><span data-stu-id="288d9-145">scope</span></span> |<span data-ttu-id="288d9-146">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-146">Required</span></span> |<span data-ttu-id="288d9-147">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="288d9-147">A space-separated list of scopes.</span></span> <span data-ttu-id="288d9-148">Un singolo valore di ambito indica ad Azure Active Directory (Azure AD) entrambe le autorizzazioni richieste.</span><span class="sxs-lookup"><span data-stu-id="288d9-148">A single scope value indicates to Azure Active Directory (Azure AD) both of the permissions that are being requested.</span></span> <span data-ttu-id="288d9-149">L'uso dell'ID client come ambito indica che l'app necessita di un token di accesso, che può essere usato per il servizio o l'API Web, rappresentato dallo stesso ID client.</span><span class="sxs-lookup"><span data-stu-id="288d9-149">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="288d9-150">L'ambito `offline_access` indica che l'app necessita di un token di aggiornamento per avere un accesso di lunga durata alle risorse.</span><span class="sxs-lookup"><span data-stu-id="288d9-150">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span> <span data-ttu-id="288d9-151">È anche possibile usare l'ambito `openid` per richiedere un token ID ad Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="288d9-151">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="288d9-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="288d9-152">response_mode</span></span> |<span data-ttu-id="288d9-153">Consigliato</span><span class="sxs-lookup"><span data-stu-id="288d9-153">Recommended</span></span> |<span data-ttu-id="288d9-154">Metodo da usare per inviare all'app il codice di autorizzazione risultante.</span><span class="sxs-lookup"><span data-stu-id="288d9-154">The method that you use to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="288d9-155">Può essere `query`, `form_post` o `fragment`.</span><span class="sxs-lookup"><span data-stu-id="288d9-155">It can be `query`, `form_post`, or `fragment`.</span></span> |
| <span data-ttu-id="288d9-156">state</span><span class="sxs-lookup"><span data-stu-id="288d9-156">state</span></span> |<span data-ttu-id="288d9-157">Consigliato</span><span class="sxs-lookup"><span data-stu-id="288d9-157">Recommended</span></span> |<span data-ttu-id="288d9-158">Valore incluso nella richiesta che viene restituito nella risposta del token.</span><span class="sxs-lookup"><span data-stu-id="288d9-158">A value included in the request that is returned in the token response.</span></span> <span data-ttu-id="288d9-159">Può trattarsi di una stringa di qualsiasi contenuto si voglia usare.</span><span class="sxs-lookup"><span data-stu-id="288d9-159">It can be a string of any content that you want to use.</span></span> <span data-ttu-id="288d9-160">Per evitare attacchi di richiesta intersito falsa, viene in genere usato un valore univoco generato casualmente.</span><span class="sxs-lookup"><span data-stu-id="288d9-160">Usually, a randomly generated unique value is  used, to prevent cross-site request forgery attacks.</span></span> <span data-ttu-id="288d9-161">Anche lo stato viene usato per codificare le informazioni sullo stato dell'utente nell'app prima del verificarsi della richiesta di autenticazione,</span><span class="sxs-lookup"><span data-stu-id="288d9-161">The state also is used to encode information about the user's state in the app before the authentication request occurred.</span></span> <span data-ttu-id="288d9-162">ad esempio la pagina in cui si trova l'utente o i criteri che vengono eseguiti.</span><span class="sxs-lookup"><span data-stu-id="288d9-162">For example, the page the user was on, or the policy that was being executed.</span></span> |
| <span data-ttu-id="288d9-163">p</span><span class="sxs-lookup"><span data-stu-id="288d9-163">p</span></span> |<span data-ttu-id="288d9-164">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-164">Required</span></span> |<span data-ttu-id="288d9-165">Criteri che vengono eseguiti.</span><span class="sxs-lookup"><span data-stu-id="288d9-165">The policy that is executed.</span></span> <span data-ttu-id="288d9-166">Si tratta del nome di criteri creati nella directory di Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="288d9-166">It's the name of a policy that is created in your Azure AD B2C directory.</span></span> <span data-ttu-id="288d9-167">Il valore del nome dei criteri deve iniziare con **b2c\_1\_**.</span><span class="sxs-lookup"><span data-stu-id="288d9-167">The policy name value should begin with **b2c\_1\_**.</span></span> <span data-ttu-id="288d9-168">Per altre informazioni sui criteri, vedere l'articolo relativo ai [criteri predefiniti di Azure AD B2C](active-directory-b2c-reference-policies.md).</span><span class="sxs-lookup"><span data-stu-id="288d9-168">To learn more about policies, see [Azure AD B2C built-in policies](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="288d9-169">prompt</span><span class="sxs-lookup"><span data-stu-id="288d9-169">prompt</span></span> |<span data-ttu-id="288d9-170">Facoltativo</span><span class="sxs-lookup"><span data-stu-id="288d9-170">Optional</span></span> |<span data-ttu-id="288d9-171">Tipo di interazione utente obbligatoria.</span><span class="sxs-lookup"><span data-stu-id="288d9-171">The type of user interaction that is required.</span></span> <span data-ttu-id="288d9-172">L'unico valore valido in questa fase è `login`, che impone all'utente di immettere le credenziali per la richiesta.</span><span class="sxs-lookup"><span data-stu-id="288d9-172">Currently, the only valid value is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="288d9-173">L'accesso Single Sign-On non avrà effetto.</span><span class="sxs-lookup"><span data-stu-id="288d9-173">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="288d9-174">Viene a questo punto richiesto all'utente di completare il flusso di lavoro dei criteri.</span><span class="sxs-lookup"><span data-stu-id="288d9-174">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="288d9-175">È possibile che venga richiesto all'utente di immettere nome utente e password, di accedere con un'identità di social networking, di iscriversi alla directory o di effettuare qualsiasi altro passaggio.</span><span class="sxs-lookup"><span data-stu-id="288d9-175">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps.</span></span> <span data-ttu-id="288d9-176">Le azioni dell'utente dipendono dal modo in cui sono definiti i criteri.</span><span class="sxs-lookup"><span data-stu-id="288d9-176">User actions depend on how the policy is defined.</span></span>

<span data-ttu-id="288d9-177">Dopo che l'utente ha completato i criteri, Azure AD restituisce una risposta per l'app in corrispondenza del valore usato per `redirect_uri`.</span><span class="sxs-lookup"><span data-stu-id="288d9-177">After the user completes the policy, Azure AD returns a response to your app at the value you used for `redirect_uri`.</span></span> <span data-ttu-id="288d9-178">Viene usato il metodo specificato nel parametro `response_mode`.</span><span class="sxs-lookup"><span data-stu-id="288d9-178">It uses the method specified in the `response_mode` parameter.</span></span> <span data-ttu-id="288d9-179">La risposta è esattamente la stessa per ogni scenario di azione dell'utente, indipendentemente dai criteri eseguiti.</span><span class="sxs-lookup"><span data-stu-id="288d9-179">The response is exactly the same for each of the user action scenarios, independent of the policy that was executed.</span></span>

<span data-ttu-id="288d9-180">Una risposta con esito positivo che usa `response_mode=query` ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="288d9-180">A successful response that uses `response_mode=query` looks like this:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...        // the authorization_code, truncated
&state=arbitrary_data_you_can_receive_in_the_response                // the value provided in the request
```

| <span data-ttu-id="288d9-181">Parametro</span><span class="sxs-lookup"><span data-stu-id="288d9-181">Parameter</span></span> | <span data-ttu-id="288d9-182">Descrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-182">Description</span></span> |
| --- | --- |
| <span data-ttu-id="288d9-183">code</span><span class="sxs-lookup"><span data-stu-id="288d9-183">code</span></span> |<span data-ttu-id="288d9-184">Codice di autorizzazione richiesto dall'app.</span><span class="sxs-lookup"><span data-stu-id="288d9-184">The authorization code that the app requested.</span></span> <span data-ttu-id="288d9-185">L'app può usare il codice di autorizzazione per richiedere un token di accesso per una risorsa di destinazione.</span><span class="sxs-lookup"><span data-stu-id="288d9-185">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="288d9-186">I codici di autorizzazione hanno una durata molto breve.</span><span class="sxs-lookup"><span data-stu-id="288d9-186">Authorization codes are very short-lived.</span></span> <span data-ttu-id="288d9-187">In genere scadono dopo circa 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="288d9-187">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="288d9-188">state</span><span class="sxs-lookup"><span data-stu-id="288d9-188">state</span></span> |<span data-ttu-id="288d9-189">Vedere la descrizione completa nella tabella della sezione precedente.</span><span class="sxs-lookup"><span data-stu-id="288d9-189">See the full description in the table in the preceding section.</span></span> <span data-ttu-id="288d9-190">Se un parametro `state` è incluso nella richiesta, lo stesso valore deve essere visualizzato nella risposta.</span><span class="sxs-lookup"><span data-stu-id="288d9-190">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="288d9-191">L'app deve verificare che i valori `state` nella richiesta e nella risposta siano identici.</span><span class="sxs-lookup"><span data-stu-id="288d9-191">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="288d9-192">Anche le risposte di errore possono essere inviate all'URI di reindirizzamento in modo che l'app possa gestirle adeguatamente:</span><span class="sxs-lookup"><span data-stu-id="288d9-192">Error responses also can be sent to the redirect URI so that the app can handle them appropriately:</span></span>

```
GET urn:ietf:wg:oauth:2.0:oob?
error=access_denied
&error_description=The+user+has+cancelled+entering+self-asserted+information
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="288d9-193">Parametro</span><span class="sxs-lookup"><span data-stu-id="288d9-193">Parameter</span></span> | <span data-ttu-id="288d9-194">Descrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-194">Description</span></span> |
| --- | --- |
| <span data-ttu-id="288d9-195">error</span><span class="sxs-lookup"><span data-stu-id="288d9-195">error</span></span> |<span data-ttu-id="288d9-196">Stringa di codice di errore che è possibile usare per classificare i tipi di errori che si verificano.</span><span class="sxs-lookup"><span data-stu-id="288d9-196">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="288d9-197">È possibile usare la stringa anche per rispondere agli errori.</span><span class="sxs-lookup"><span data-stu-id="288d9-197">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="288d9-198">error_description</span><span class="sxs-lookup"><span data-stu-id="288d9-198">error_description</span></span> |<span data-ttu-id="288d9-199">Messaggio di errore specifico che consente di identificare la causa principale di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="288d9-199">A specific error message that can help you identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="288d9-200">state</span><span class="sxs-lookup"><span data-stu-id="288d9-200">state</span></span> |<span data-ttu-id="288d9-201">Vedere la descrizione completa nella tabella precedente.</span><span class="sxs-lookup"><span data-stu-id="288d9-201">See the full description in the preceding table.</span></span> <span data-ttu-id="288d9-202">Se un parametro `state` è incluso nella richiesta, lo stesso valore deve essere visualizzato nella risposta.</span><span class="sxs-lookup"><span data-stu-id="288d9-202">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="288d9-203">L'app deve verificare che i valori `state` nella richiesta e nella risposta siano identici.</span><span class="sxs-lookup"><span data-stu-id="288d9-203">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="2-get-a-token"></a><span data-ttu-id="288d9-204">2. Acquisizione di un token</span><span class="sxs-lookup"><span data-stu-id="288d9-204">2. Get a token</span></span>
<span data-ttu-id="288d9-205">Ora che è stato acquisito il codice di autorizzazione, è possibile riscattare `code` per un token per la risorsa desiderata inviando una richiesta POST all'endpoint `/token`.</span><span class="sxs-lookup"><span data-stu-id="288d9-205">Now that you've acquired an authorization code, you can redeem the `code` for a token to the intended resource by sending a POST request to the `/token` endpoint.</span></span> <span data-ttu-id="288d9-206">In Azure AD B2C, l'unica risorsa per la quale è possibile richiedere un token è l'API Web back-end dell'app stessa.</span><span class="sxs-lookup"><span data-stu-id="288d9-206">In Azure AD B2C, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="288d9-207">La convenzione usata per richiedere un token di questo tipo consiste nell'usare l'ID client dell'app come ambito:</span><span class="sxs-lookup"><span data-stu-id="288d9-207">The convention that's used for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob

```

| <span data-ttu-id="288d9-208">Parametro</span><span class="sxs-lookup"><span data-stu-id="288d9-208">Parameter</span></span> | <span data-ttu-id="288d9-209">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="288d9-209">Required?</span></span> | <span data-ttu-id="288d9-210">Descrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-210">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="288d9-211">p</span><span class="sxs-lookup"><span data-stu-id="288d9-211">p</span></span> |<span data-ttu-id="288d9-212">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-212">Required</span></span> |<span data-ttu-id="288d9-213">Il criterio utilizzato per acquisire il codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="288d9-213">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="288d9-214">Non è possibile usare un criterio diverso in questa richiesta.</span><span class="sxs-lookup"><span data-stu-id="288d9-214">You cannot use a different policy in this request.</span></span> <span data-ttu-id="288d9-215">Si noti che questo parametro viene aggiunto alla *stringa di query*, non al corpo della richiesta POST.</span><span class="sxs-lookup"><span data-stu-id="288d9-215">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="288d9-216">client_id</span><span class="sxs-lookup"><span data-stu-id="288d9-216">client_id</span></span> |<span data-ttu-id="288d9-217">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-217">Required</span></span> |<span data-ttu-id="288d9-218">ID applicazione assegnato all'app nel [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="288d9-218">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="288d9-219">grant_type</span><span class="sxs-lookup"><span data-stu-id="288d9-219">grant_type</span></span> |<span data-ttu-id="288d9-220">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-220">Required</span></span> |<span data-ttu-id="288d9-221">Tipo di concessione.</span><span class="sxs-lookup"><span data-stu-id="288d9-221">The type of grant.</span></span> <span data-ttu-id="288d9-222">Per il flusso del codice di autorizzazione il tipo di concessione deve essere `authorization_code`.</span><span class="sxs-lookup"><span data-stu-id="288d9-222">For the authorization code flow, the grant type must be `authorization_code`.</span></span> |
| <span data-ttu-id="288d9-223">scope</span><span class="sxs-lookup"><span data-stu-id="288d9-223">scope</span></span> |<span data-ttu-id="288d9-224">Consigliato</span><span class="sxs-lookup"><span data-stu-id="288d9-224">Recommended</span></span> |<span data-ttu-id="288d9-225">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="288d9-225">A space-separated list of scopes.</span></span> <span data-ttu-id="288d9-226">Un valore per l'ambito indica ad Azure AD entrambe le autorizzazioni richieste.</span><span class="sxs-lookup"><span data-stu-id="288d9-226">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="288d9-227">L'uso dell'ID client come ambito indica che l'app necessita di un token di accesso, che può essere usato per il servizio o l'API Web, rappresentato dallo stesso ID client.</span><span class="sxs-lookup"><span data-stu-id="288d9-227">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="288d9-228">L'ambito `offline_access` indica che l'app necessita di un token di aggiornamento per avere un accesso di lunga durata alle risorse.</span><span class="sxs-lookup"><span data-stu-id="288d9-228">The `offline_access` scope indicates that your app needs a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="288d9-229">È anche possibile usare l'ambito `openid` per richiedere un token ID ad Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="288d9-229">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="288d9-230">code</span><span class="sxs-lookup"><span data-stu-id="288d9-230">code</span></span> |<span data-ttu-id="288d9-231">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-231">Required</span></span> |<span data-ttu-id="288d9-232">Codice di autorizzazione acquisito nella prima sezione del flusso.</span><span class="sxs-lookup"><span data-stu-id="288d9-232">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="288d9-233">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="288d9-233">redirect_uri</span></span> |<span data-ttu-id="288d9-234">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-234">Required</span></span> |<span data-ttu-id="288d9-235">L'URI di reindirizzamento dell'applicazione dove è stato ricevuto il codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="288d9-235">The redirect URI of the application where you received the authorization code.</span></span> |

<span data-ttu-id="288d9-236">Una risposta di token con esito positivo ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="288d9-236">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="288d9-237">Parametro</span><span class="sxs-lookup"><span data-stu-id="288d9-237">Parameter</span></span> | <span data-ttu-id="288d9-238">Descrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-238">Description</span></span> |
| --- | --- |
| <span data-ttu-id="288d9-239">not_before</span><span class="sxs-lookup"><span data-stu-id="288d9-239">not_before</span></span> |<span data-ttu-id="288d9-240">Il momento in cui il token viene considerato valido, nel periodo.</span><span class="sxs-lookup"><span data-stu-id="288d9-240">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="288d9-241">token_type</span><span class="sxs-lookup"><span data-stu-id="288d9-241">token_type</span></span> |<span data-ttu-id="288d9-242">Valore del tipo di token.</span><span class="sxs-lookup"><span data-stu-id="288d9-242">The token type value.</span></span> <span data-ttu-id="288d9-243">L'unico tipo supportato da Azure AD è Bearer.</span><span class="sxs-lookup"><span data-stu-id="288d9-243">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="288d9-244">access_token</span><span class="sxs-lookup"><span data-stu-id="288d9-244">access_token</span></span> |<span data-ttu-id="288d9-245">Token JSON Web (JWT) firmato richiesto.</span><span class="sxs-lookup"><span data-stu-id="288d9-245">The signed JSON Web Token (JWT) that you requested.</span></span> |
| <span data-ttu-id="288d9-246">scope</span><span class="sxs-lookup"><span data-stu-id="288d9-246">scope</span></span> |<span data-ttu-id="288d9-247">Ambiti per i quali il token è valido.</span><span class="sxs-lookup"><span data-stu-id="288d9-247">The scopes that the token is valid for.</span></span> <span data-ttu-id="288d9-248">È possibile usare gli ambiti anche per memorizzare i token nella cache per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="288d9-248">You also can use scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="288d9-249">expires_in</span><span class="sxs-lookup"><span data-stu-id="288d9-249">expires_in</span></span> |<span data-ttu-id="288d9-250">Periodo di validità del token (in secondi).</span><span class="sxs-lookup"><span data-stu-id="288d9-250">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="288d9-251">refresh_token</span><span class="sxs-lookup"><span data-stu-id="288d9-251">refresh_token</span></span> |<span data-ttu-id="288d9-252">Token di aggiornamento di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="288d9-252">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="288d9-253">L'app può usare questo token per acquisire token aggiuntivi dopo la scadenza del token corrente.</span><span class="sxs-lookup"><span data-stu-id="288d9-253">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="288d9-254">I token di aggiornamento sono di lunga durata.</span><span class="sxs-lookup"><span data-stu-id="288d9-254">Refresh tokens are long-lived.</span></span> <span data-ttu-id="288d9-255">È possibile usarli per mantenere l'accesso alle risorse per periodi prolungati di tempo.</span><span class="sxs-lookup"><span data-stu-id="288d9-255">You can use them to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="288d9-256">Per altre informazioni, vedere le [informazioni di riferimento sul token di Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="288d9-256">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="288d9-257">Le risposte di errore si presentano nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="288d9-257">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="288d9-258">Parametro</span><span class="sxs-lookup"><span data-stu-id="288d9-258">Parameter</span></span> | <span data-ttu-id="288d9-259">Descrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-259">Description</span></span> |
| --- | --- |
| <span data-ttu-id="288d9-260">error</span><span class="sxs-lookup"><span data-stu-id="288d9-260">error</span></span> |<span data-ttu-id="288d9-261">Stringa di codice di errore che è possibile usare per classificare i tipi di errori che si verificano.</span><span class="sxs-lookup"><span data-stu-id="288d9-261">An error code string that you can use to classify the types of errors that occur.</span></span> <span data-ttu-id="288d9-262">È possibile usare la stringa anche per rispondere agli errori.</span><span class="sxs-lookup"><span data-stu-id="288d9-262">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="288d9-263">error_description</span><span class="sxs-lookup"><span data-stu-id="288d9-263">error_description</span></span> |<span data-ttu-id="288d9-264">Messaggio di errore specifico che consente di identificare la causa principale di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="288d9-264">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="3-use-the-token"></a><span data-ttu-id="288d9-265">3. Uso del token</span><span class="sxs-lookup"><span data-stu-id="288d9-265">3. Use the token</span></span>
<span data-ttu-id="288d9-266">Dopo avere acquisito un token di accesso, è possibile usarlo nelle richieste alle API Web back-end includendolo nell'intestazione `Authorization`:</span><span class="sxs-lookup"><span data-stu-id="288d9-266">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="4-refresh-the-token"></a><span data-ttu-id="288d9-267">4. Aggiornamento del token</span><span class="sxs-lookup"><span data-stu-id="288d9-267">4. Refresh the token</span></span>
<span data-ttu-id="288d9-268">I token di accesso e i token ID hanno breve durata.</span><span class="sxs-lookup"><span data-stu-id="288d9-268">Access tokens and ID tokens are short-lived.</span></span> <span data-ttu-id="288d9-269">È necessario aggiornarli dopo la scadenza per continuare ad accedere alle risorse.</span><span class="sxs-lookup"><span data-stu-id="288d9-269">After they expire, you must refresh them to continue to access resources.</span></span> <span data-ttu-id="288d9-270">Inviare a tale scopo un'altra richiesta POST per l'endpoint `/token`.</span><span class="sxs-lookup"><span data-stu-id="288d9-270">To do this, submit another POST request to the `/token` endpoint.</span></span> <span data-ttu-id="288d9-271">questa volta specificando `refresh_token` invece di `code`:</span><span class="sxs-lookup"><span data-stu-id="288d9-271">This time, provide the `refresh_token` instead of the `code`:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob
```

| <span data-ttu-id="288d9-272">Parametro</span><span class="sxs-lookup"><span data-stu-id="288d9-272">Parameter</span></span> | <span data-ttu-id="288d9-273">Obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="288d9-273">Required?</span></span> | <span data-ttu-id="288d9-274">Descrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-274">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="288d9-275">p</span><span class="sxs-lookup"><span data-stu-id="288d9-275">p</span></span> |<span data-ttu-id="288d9-276">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-276">Required</span></span> |<span data-ttu-id="288d9-277">Criteri usati per acquisire il token di aggiornamento originale.</span><span class="sxs-lookup"><span data-stu-id="288d9-277">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="288d9-278">Non è possibile usare un criterio diverso in questa richiesta.</span><span class="sxs-lookup"><span data-stu-id="288d9-278">You cannot use a different policy in this request.</span></span> <span data-ttu-id="288d9-279">Si noti che questo parametro viene aggiunto alla *stringa di query*, non al corpo della richiesta POST.</span><span class="sxs-lookup"><span data-stu-id="288d9-279">Note that you add this parameter to the *query string*, not in the POST body.</span></span> |
| <span data-ttu-id="288d9-280">client_id</span><span class="sxs-lookup"><span data-stu-id="288d9-280">client_id</span></span> |<span data-ttu-id="288d9-281">Consigliato</span><span class="sxs-lookup"><span data-stu-id="288d9-281">Recommended</span></span> |<span data-ttu-id="288d9-282">ID applicazione assegnato all'app nel [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="288d9-282">The application ID assigned to your app in the [Azure portal](https://portal.azure.com).</span></span> |
| <span data-ttu-id="288d9-283">grant_type</span><span class="sxs-lookup"><span data-stu-id="288d9-283">grant_type</span></span> |<span data-ttu-id="288d9-284">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-284">Required</span></span> |<span data-ttu-id="288d9-285">Tipo di concessione.</span><span class="sxs-lookup"><span data-stu-id="288d9-285">The type of grant.</span></span> <span data-ttu-id="288d9-286">Per questa parte del flusso del codice di autorizzazione il tipo di concessione deve essere `refresh_token`.</span><span class="sxs-lookup"><span data-stu-id="288d9-286">For this leg of the authorization code flow, the grant type must be `refresh_token`.</span></span> |
| <span data-ttu-id="288d9-287">scope</span><span class="sxs-lookup"><span data-stu-id="288d9-287">scope</span></span> |<span data-ttu-id="288d9-288">Consigliato</span><span class="sxs-lookup"><span data-stu-id="288d9-288">Recommended</span></span> |<span data-ttu-id="288d9-289">Elenco di ambiti separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="288d9-289">A space-separated list of scopes.</span></span> <span data-ttu-id="288d9-290">Un valore per l'ambito indica ad Azure AD entrambe le autorizzazioni richieste.</span><span class="sxs-lookup"><span data-stu-id="288d9-290">A single scope value indicates to Azure AD both of the permissions that are being requested.</span></span> <span data-ttu-id="288d9-291">L'uso dell'ID client come ambito indica che l'app necessita di un token di accesso, che può essere usato per il servizio o l'API Web, rappresentato dallo stesso ID client.</span><span class="sxs-lookup"><span data-stu-id="288d9-291">Using the client ID as the scope indicates that your app needs an access token that can be used against your own service or web API, represented by the same client ID.</span></span>  <span data-ttu-id="288d9-292">L'ambito `offline_access` indica che l'app necessita di un token di aggiornamento per un accesso di lunga durata alle risorse.</span><span class="sxs-lookup"><span data-stu-id="288d9-292">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span>  <span data-ttu-id="288d9-293">È anche possibile usare l'ambito `openid` per richiedere un token ID ad Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="288d9-293">You also can use the `openid` scope to request an ID token from Azure AD B2C.</span></span> |
| <span data-ttu-id="288d9-294">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="288d9-294">redirect_uri</span></span> |<span data-ttu-id="288d9-295">Facoltativo</span><span class="sxs-lookup"><span data-stu-id="288d9-295">Optional</span></span> |<span data-ttu-id="288d9-296">L'URI di reindirizzamento dell'applicazione dove è stato ricevuto il codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="288d9-296">The redirect URI of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="288d9-297">refresh_token</span><span class="sxs-lookup"><span data-stu-id="288d9-297">refresh_token</span></span> |<span data-ttu-id="288d9-298">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="288d9-298">Required</span></span> |<span data-ttu-id="288d9-299">Token di aggiornamento originale acquisito nella seconda sezione del flusso.</span><span class="sxs-lookup"><span data-stu-id="288d9-299">The original refresh token that you acquired in the second leg of the flow.</span></span> |

<span data-ttu-id="288d9-300">Una risposta di token con esito positivo ha un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="288d9-300">A successful token response looks like this:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="288d9-301">Parametro</span><span class="sxs-lookup"><span data-stu-id="288d9-301">Parameter</span></span> | <span data-ttu-id="288d9-302">Descrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-302">Description</span></span> |
| --- | --- |
| <span data-ttu-id="288d9-303">not_before</span><span class="sxs-lookup"><span data-stu-id="288d9-303">not_before</span></span> |<span data-ttu-id="288d9-304">Il momento in cui il token viene considerato valido, nel periodo.</span><span class="sxs-lookup"><span data-stu-id="288d9-304">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="288d9-305">token_type</span><span class="sxs-lookup"><span data-stu-id="288d9-305">token_type</span></span> |<span data-ttu-id="288d9-306">Valore del tipo di token.</span><span class="sxs-lookup"><span data-stu-id="288d9-306">The token type value.</span></span> <span data-ttu-id="288d9-307">L'unico tipo supportato da Azure AD è Bearer.</span><span class="sxs-lookup"><span data-stu-id="288d9-307">The only type that Azure AD supports is Bearer.</span></span> |
| <span data-ttu-id="288d9-308">access_token</span><span class="sxs-lookup"><span data-stu-id="288d9-308">access_token</span></span> |<span data-ttu-id="288d9-309">Token JWT firmato richiesto.</span><span class="sxs-lookup"><span data-stu-id="288d9-309">The signed JWT that you requested.</span></span> |
| <span data-ttu-id="288d9-310">scope</span><span class="sxs-lookup"><span data-stu-id="288d9-310">scope</span></span> |<span data-ttu-id="288d9-311">Ambiti per i quali il token è valido.</span><span class="sxs-lookup"><span data-stu-id="288d9-311">The scopes that the token is valid for.</span></span> <span data-ttu-id="288d9-312">È possibile usare gli ambiti anche per memorizzare i token nella cache per un uso successivo.</span><span class="sxs-lookup"><span data-stu-id="288d9-312">You also can use the scopes to cache tokens for later use.</span></span> |
| <span data-ttu-id="288d9-313">expires_in</span><span class="sxs-lookup"><span data-stu-id="288d9-313">expires_in</span></span> |<span data-ttu-id="288d9-314">Periodo di validità del token (in secondi).</span><span class="sxs-lookup"><span data-stu-id="288d9-314">The length of time that the token is valid (in seconds).</span></span> |
| <span data-ttu-id="288d9-315">refresh_token</span><span class="sxs-lookup"><span data-stu-id="288d9-315">refresh_token</span></span> |<span data-ttu-id="288d9-316">Token di aggiornamento di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="288d9-316">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="288d9-317">L'app può usare questo token per acquisire token aggiuntivi dopo la scadenza del token corrente.</span><span class="sxs-lookup"><span data-stu-id="288d9-317">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="288d9-318">I token di aggiornamento hanno durata elevata e possono essere usati per mantenere l'accesso alle risorse per lunghi periodi di tempo.</span><span class="sxs-lookup"><span data-stu-id="288d9-318">Refresh tokens are long-lived, and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="288d9-319">Per altre informazioni, vedere le [informazioni di riferimento sul token di Azure AD B2C](active-directory-b2c-reference-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="288d9-319">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="288d9-320">Le risposte di errore si presentano nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="288d9-320">Error responses look like this:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="288d9-321">Parametro</span><span class="sxs-lookup"><span data-stu-id="288d9-321">Parameter</span></span> | <span data-ttu-id="288d9-322">Descrizione</span><span class="sxs-lookup"><span data-stu-id="288d9-322">Description</span></span> |
| --- | --- |
| <span data-ttu-id="288d9-323">error</span><span class="sxs-lookup"><span data-stu-id="288d9-323">error</span></span> |<span data-ttu-id="288d9-324">Stringa di codice di errore che è possibile usare per classificare i tipi di errori che si verificano.</span><span class="sxs-lookup"><span data-stu-id="288d9-324">An error code string that you can use to classify types of errors that occur.</span></span> <span data-ttu-id="288d9-325">È possibile usare la stringa anche per rispondere agli errori.</span><span class="sxs-lookup"><span data-stu-id="288d9-325">You also can use the string to react to errors.</span></span> |
| <span data-ttu-id="288d9-326">error_description</span><span class="sxs-lookup"><span data-stu-id="288d9-326">error_description</span></span> |<span data-ttu-id="288d9-327">Messaggio di errore specifico che consente di identificare la causa principale di un errore di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="288d9-327">A specific error message that can help you identify the root cause of an authentication error.</span></span> |

## <a name="use-your-own-azure-ad-b2c-directory"></a><span data-ttu-id="288d9-328">Usare la directory di Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="288d9-328">Use your own Azure AD B2C directory</span></span>
<span data-ttu-id="288d9-329">Per provare queste richieste, completare i passaggi seguenti.</span><span class="sxs-lookup"><span data-stu-id="288d9-329">To try these requests yourself, complete the following steps.</span></span> <span data-ttu-id="288d9-330">Sostituire i valori dell'esempio usato in questo articolo con valori personalizzati.</span><span class="sxs-lookup"><span data-stu-id="288d9-330">Replace the example values we used in this article with your own values.</span></span>

1. <span data-ttu-id="288d9-331">[Creare una directory Azure AD B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="288d9-331">[Create an Azure AD B2C directory](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="288d9-332">Usare il nome della directory nelle richieste.</span><span class="sxs-lookup"><span data-stu-id="288d9-332">Use the name of your directory in the requests.</span></span>
2. <span data-ttu-id="288d9-333">[Creare un'applicazione](active-directory-b2c-app-registration.md) per ottenere un ID applicazione e un URI di reindirizzamento.</span><span class="sxs-lookup"><span data-stu-id="288d9-333">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID and a redirect URI.</span></span> <span data-ttu-id="288d9-334">Includere un client nativo nell'app.</span><span class="sxs-lookup"><span data-stu-id="288d9-334">Include a native client in your app.</span></span>
3. <span data-ttu-id="288d9-335">[Creare i criteri](active-directory-b2c-reference-policies.md) per ottenere i nomi dei criteri.</span><span class="sxs-lookup"><span data-stu-id="288d9-335">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

