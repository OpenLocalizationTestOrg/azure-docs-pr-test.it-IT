---
title: aaaCreate partizionata argomenti e code del Bus di servizio di Azure | Documenti Microsoft
description: "Descrive la modalità di connessione toopartition code del Bus di servizio e gli argomenti utilizzando più messaggi."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a0c7d5a2-4876-42cb-8344-a1fc988746e7
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/07/2017
ms.author: sethm;hillaryc
ms.openlocfilehash: 6d42556a0714d6a012dc319f662521c8b0bb958b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="partitioned-queues-and-topics"></a><span data-ttu-id="37816-103">Code e argomenti partizionati</span><span class="sxs-lookup"><span data-stu-id="37816-103">Partitioned queues and topics</span></span>
<span data-ttu-id="37816-104">Azure Service Bus sfrutta più messaggi di Service Broker tooprocess messaggi e più messaggistica Archivia messaggi toostore.</span><span class="sxs-lookup"><span data-stu-id="37816-104">Azure Service Bus employs multiple message brokers tooprocess messages and multiple messaging stores toostore messages.</span></span> <span data-ttu-id="37816-105">Una coda o un argomento convenzionale è gestito da un singolo broker messaggi e archiviato in un archivio di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="37816-105">A conventional queue or topic is handled by a single message broker and stored in one messaging store.</span></span> <span data-ttu-id="37816-106">Bus di servizio *partizioni* abilitare le code e argomenti, o *entità di messaggistica*, toobe partizionati in più gestori di messaggi e archivi di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="37816-106">Service Bus *partitions* enable queues and topics, or *messaging entities*, toobe partitioned across multiple message brokers and messaging stores.</span></span> <span data-ttu-id="37816-107">Ciò significa che hello velocità effettiva complessiva di un'entità partizionata non è più limitata dalle prestazioni hello di un singolo broker messaggi o archivio di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="37816-107">This means that hello overall throughput of a partitioned entity is no longer limited by hello performance of a single message broker or messaging store.</span></span> <span data-ttu-id="37816-108">Inoltre, un'interruzione temporanea dell'alimentazione di un archivio di messaggistica non determina la mancanza di disponibilità di una coda o di un argomento partizionato.</span><span class="sxs-lookup"><span data-stu-id="37816-108">In addition, a temporary outage of a messaging store does not render a partitioned queue or topic unavailable.</span></span> <span data-ttu-id="37816-109">Le code e gli argomenti partizionati possono contenere tutte le funzionalità avanzate del bus di servizio, ad esempio il supporto delle transazioni e delle sessioni.</span><span class="sxs-lookup"><span data-stu-id="37816-109">Partitioned queues and topics can contain all advanced Service Bus features, such as support for transactions and sessions.</span></span>

<span data-ttu-id="37816-110">Per informazioni sui meccanismi interni di Service Bus, vedere hello [architettura del Bus di servizio] [ Service Bus architecture] articolo.</span><span class="sxs-lookup"><span data-stu-id="37816-110">For information about Service Bus internals, see hello [Service Bus architecture][Service Bus architecture] article.</span></span>

<span data-ttu-id="37816-111">Il partizionamento è abilitato per impostazione predefinita al momento della creazione dell'entità in tutte le code e tutti gli argomenti della messaggistica sia Standard che Premium.</span><span class="sxs-lookup"><span data-stu-id="37816-111">Partitioning is enabled by default at entity creation on all queues and topics in both Standard and Premium messaging.</span></span> <span data-ttu-id="37816-112">È possibile creare entità di livello messaggistica Standard senza il partizionamento, ma le code e gli argomenti in uno spazio dei nomi Premium vengono sempre partizionati. Questa opzione non può essere disabilitata.</span><span class="sxs-lookup"><span data-stu-id="37816-112">You can create Standard messaging tier entities without partitioning, but queues and topics in a Premium namespace are always partitioned; this option cannot be disabled.</span></span> 

<span data-ttu-id="37816-113">Non è possibile toochange hello partizionamento opzione in una coda esistente o un argomento nei livelli Standard o Premium, è possibile impostare solo opzione hello quando si crea entità hello.</span><span class="sxs-lookup"><span data-stu-id="37816-113">It is not possible toochange hello partitioning option on an existing queue or topic in either Standard or Premium tiers, you can only set hello option when you create hello entity.</span></span>

## <a name="how-it-works"></a><span data-ttu-id="37816-114">Funzionamento</span><span class="sxs-lookup"><span data-stu-id="37816-114">How it works</span></span>

<span data-ttu-id="37816-115">Ogni coda o argomento partizionato è costituito da più frammenti.</span><span class="sxs-lookup"><span data-stu-id="37816-115">Each partitioned queue or topic consists of multiple fragments.</span></span> <span data-ttu-id="37816-116">Ogni frammento viene memorizzato in un archivio di messaggistica differente e gestito da un broker messaggi diverso.</span><span class="sxs-lookup"><span data-stu-id="37816-116">Each fragment is stored in a different messaging store and handled by a different message broker.</span></span> <span data-ttu-id="37816-117">Quando viene inviato un messaggio tooa coda o argomento partizionato, Bus di servizio assegna tooone messaggio hello di frammenti di hello.</span><span class="sxs-lookup"><span data-stu-id="37816-117">When a message is sent tooa partitioned queue or topic, Service Bus assigns hello message tooone of hello fragments.</span></span> <span data-ttu-id="37816-118">selezione di Hello viene eseguita in modo casuale dal Bus di servizio o tramite una chiave di partizione che hello mittente è possibile specificare.</span><span class="sxs-lookup"><span data-stu-id="37816-118">hello selection is done randomly by Service Bus or by using a partition key that hello sender can specify.</span></span>

<span data-ttu-id="37816-119">Quando un client richiede che un messaggio da una coda partizionata tooreceive o da un argomento partizionato tooa di sottoscrizione, Bus di servizio esegue una query di tutti i frammenti dei messaggi, quindi restituisce hello primo messaggio viene ottenuto da una qualsiasi delle hello ricevitore toohello archivi di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="37816-119">When a client wants tooreceive a message from a partitioned queue, or from a subscription tooa partitioned topic, Service Bus queries all fragments for messages, then returns hello first message that is obtained from any of hello messaging stores toohello receiver.</span></span> <span data-ttu-id="37816-120">Bus di servizio cache di hello altri messaggi e restituisce quando riceve altre richieste di ricezione.</span><span class="sxs-lookup"><span data-stu-id="37816-120">Service Bus caches hello other messages and returns them when it receives additional receive requests.</span></span> <span data-ttu-id="37816-121">Un client destinatario non è a conoscenza di partizionamento hello. Hello comportamento destinata al client di una coda o argomento partizionato (ad esempio, lettura, completamento, rinvio, non recapitabilità, prelettura) è identico toohello comportamento di un'entità normale.</span><span class="sxs-lookup"><span data-stu-id="37816-121">A receiving client is not aware of hello partitioning; hello client-facing behavior of a partitioned queue or topic (for example, read, complete, defer, deadletter, prefetching) is identical toohello behavior of a regular entity.</span></span>

<span data-ttu-id="37816-122">I messaggi a una coda o a un argomento partizionato non presentano costi aggiuntivi, né in invio né in ricezione.</span><span class="sxs-lookup"><span data-stu-id="37816-122">There is no additional cost when sending a message to, or receiving a message from, a partitioned queue or topic.</span></span>

## <a name="enable-partitioning"></a><span data-ttu-id="37816-123">Abilitare il partizionamento</span><span class="sxs-lookup"><span data-stu-id="37816-123">Enable partitioning</span></span>

<span data-ttu-id="37816-124">toouse partizionare code e argomenti con il Bus di servizio di Azure, utilizzare hello Azure SDK 2.2 o versione successiva oppure specificare `api-version=2013-10` nelle richieste HTTP.</span><span class="sxs-lookup"><span data-stu-id="37816-124">toouse partitioned queues and topics with Azure Service Bus, use hello Azure SDK version 2.2 or later, or specify `api-version=2013-10` in your HTTP requests.</span></span>

### <a name="standard"></a><span data-ttu-id="37816-125">Standard</span><span class="sxs-lookup"><span data-stu-id="37816-125">Standard</span></span>

<span data-ttu-id="37816-126">Nel livello di messaggistica hello Standard, è possibile creare le code del Bus di servizio e gli argomenti in dimensioni di 1, 2, 3, 4 o 5 GB (valore predefinito di hello è 1 GB).</span><span class="sxs-lookup"><span data-stu-id="37816-126">In hello Standard messaging tier, you can create Service Bus queues and topics in 1, 2, 3, 4, or 5 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="37816-127">Con il partizionamento abilitato, Bus di servizio crea 16 copie (16 partizioni) dell'entità hello per ogni GB specificato.</span><span class="sxs-lookup"><span data-stu-id="37816-127">With partitioning enabled, Service Bus creates 16 copies (16 partitions) of hello entity for each GB you specify.</span></span> <span data-ttu-id="37816-128">Di conseguenza, se si crea una coda è di 5 GB di dimensioni, con 16 partizioni le dimensioni massime della coda di hello diventa (5 \* 16) = 80 GB.</span><span class="sxs-lookup"><span data-stu-id="37816-128">As such, if you create a queue that's 5 GB in size, with 16 partitions hello maximum queue size becomes (5 \* 16) = 80 GB.</span></span> <span data-ttu-id="37816-129">È possibile visualizzare dimensioni massime di hello della coda o argomento partizionato esaminando relativa voce nel hello [portale di Azure][Azure portal], in hello **Panoramica** pannello per l'entità.</span><span class="sxs-lookup"><span data-stu-id="37816-129">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

### <a name="premium"></a><span data-ttu-id="37816-130">Premium</span><span class="sxs-lookup"><span data-stu-id="37816-130">Premium</span></span>

<span data-ttu-id="37816-131">In uno spazio dei nomi livello Premium, è possibile creare le code del Bus di servizio e gli argomenti in dimensioni di 1, 2, 3, 4, 5, 10, 20, 40 o 80 GB (valore predefinito di hello è 1 GB).</span><span class="sxs-lookup"><span data-stu-id="37816-131">In a Premium tier namespace, you can create Service Bus queues and topics in 1, 2, 3, 4, 5, 10, 20, 40, or 80 GB sizes (hello default is 1 GB).</span></span> <span data-ttu-id="37816-132">Con il partizionamento abilitato per impostazione predefinita, il bus di servizio crea due partizioni per ogni entità.</span><span class="sxs-lookup"><span data-stu-id="37816-132">With partitioning enabled by default, Service Bus creates two partitions per entity.</span></span> <span data-ttu-id="37816-133">È possibile visualizzare dimensioni massime di hello della coda o argomento partizionato esaminando relativa voce nel hello [portale di Azure][Azure portal], in hello **Panoramica** pannello per l'entità.</span><span class="sxs-lookup"><span data-stu-id="37816-133">You can see hello maximum size of your partitioned queue or topic by looking at its entry on hello [Azure portal][Azure portal], in hello **Overview** blade for that entity.</span></span>

<span data-ttu-id="37816-134">Per ulteriori informazioni sul partizionamento nel livello di messaggistica di hello Premium, vedere [livelli di messaggistica Standard e Premium Bus di servizio](service-bus-premium-messaging.md).</span><span class="sxs-lookup"><span data-stu-id="37816-134">For more information about partitioning in hello Premium messaging tier, see [Service Bus Premium and Standard messaging tiers](service-bus-premium-messaging.md).</span></span> 

### <a name="create-a-partitioned-entity"></a><span data-ttu-id="37816-135">Creare una tabella partizionata</span><span class="sxs-lookup"><span data-stu-id="37816-135">Create a partitioned entity</span></span>

<span data-ttu-id="37816-136">Esistono diversi modi toocreate una coda partizionata o argomento.</span><span class="sxs-lookup"><span data-stu-id="37816-136">There are several ways toocreate a partitioned queue or topic.</span></span> <span data-ttu-id="37816-137">Quando si crea la coda hello o un argomento dall'applicazione, è possibile abilitare il partizionamento per hello coda o argomento da rispettivamente hello di impostazione [QueueDescription.EnablePartitioning] [ QueueDescription.EnablePartitioning] o [TopicDescription.EnablePartitioning] [ TopicDescription.EnablePartitioning] proprietà troppo**true**.</span><span class="sxs-lookup"><span data-stu-id="37816-137">When you create hello queue or topic from your application, you can enable partitioning for hello queue or topic by respectively setting hello [QueueDescription.EnablePartitioning][QueueDescription.EnablePartitioning] or [TopicDescription.EnablePartitioning][TopicDescription.EnablePartitioning] property too**true**.</span></span> <span data-ttu-id="37816-138">Queste proprietà devono essere impostate su hello tempo hello coda o argomento viene creato.</span><span class="sxs-lookup"><span data-stu-id="37816-138">These properties must be set at hello time hello queue or topic is created.</span></span> <span data-ttu-id="37816-139">Come indicato in precedenza, è Impossibile toochange queste proprietà in una coda esistente o un argomento.</span><span class="sxs-lookup"><span data-stu-id="37816-139">As stated previously, it is not possible toochange these properties on an existing queue or topic.</span></span> <span data-ttu-id="37816-140">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="37816-140">For example:</span></span>

```csharp
// Create partitioned topic
NamespaceManager ns = NamespaceManager.CreateFromConnectionString(myConnectionString);
TopicDescription td = new TopicDescription(TopicName);
td.EnablePartitioning = true;
ns.CreateTopic(td);
```

<span data-ttu-id="37816-141">In alternativa, è possibile creare una coda o argomento partizionato in hello [portale di Azure] [ Azure portal] o in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="37816-141">Alternatively, you can create a partitioned queue or topic in hello [Azure portal][Azure portal] or in Visual Studio.</span></span> <span data-ttu-id="37816-142">Quando si crea una coda o argomento nel portale di hello, hello **abilitare il partizionamento** opzione hello coda o argomento **crea** pannello è selezionato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="37816-142">When you create a queue or topic in hello portal, hello **Enable partitioning** option in hello queue or topic **Create** blade is checked by default.</span></span> <span data-ttu-id="37816-143">È solo possibile disabilitare questa opzione in un'entità di livello Standard. in hello partizionamento livello Premium è sempre abilitato.</span><span class="sxs-lookup"><span data-stu-id="37816-143">You can only disable this option in a Standard tier entity; in hello Premium tier partitioning is always enabled.</span></span> <span data-ttu-id="37816-144">In Visual Studio, fare clic su hello **Abilita partizionamento** casella di controllo in hello **nuova coda** o **nuovo argomento** la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="37816-144">In Visual Studio, click hello **Enable Partitioning** checkbox in hello **New Queue** or **New Topic** dialog box.</span></span>

## <a name="use-of-partition-keys"></a><span data-ttu-id="37816-145">Uso delle chiavi di partizione</span><span class="sxs-lookup"><span data-stu-id="37816-145">Use of partition keys</span></span>
<span data-ttu-id="37816-146">Quando un messaggio è accodato in una coda o argomento partizionato, Service Bus verifica hello presenza di una chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="37816-146">When a message is enqueued into a partitioned queue or topic, Service Bus checks for hello presence of a partition key.</span></span> <span data-ttu-id="37816-147">Se ne trova uno, viene selezionato il frammento di hello in base a tale chiave.</span><span class="sxs-lookup"><span data-stu-id="37816-147">If it finds one, it selects hello fragment based on that key.</span></span> <span data-ttu-id="37816-148">Se non trova una chiave di partizione, seleziona il frammento di hello in base a un algoritmo interno.</span><span class="sxs-lookup"><span data-stu-id="37816-148">If it does not find a partition key, it selects hello fragment based on an internal algorithm.</span></span>

### <a name="using-a-partition-key"></a><span data-ttu-id="37816-149">Uso di una chiave di partizione</span><span class="sxs-lookup"><span data-stu-id="37816-149">Using a partition key</span></span>
<span data-ttu-id="37816-150">Alcuni scenari, ad esempio le sessioni o le transazioni richiedono toobe messaggi archiviati in un frammento specifico.</span><span class="sxs-lookup"><span data-stu-id="37816-150">Some scenarios, such as sessions or transactions, require messages toobe stored in a specific fragment.</span></span> <span data-ttu-id="37816-151">Tutti questi scenari richiedono l'uso di hello di una chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="37816-151">All these scenarios require hello use of a partition key.</span></span> <span data-ttu-id="37816-152">Tutti i messaggi hello tale uso stessa chiave di partizione vengono assegnati toohello stesso frammento.</span><span class="sxs-lookup"><span data-stu-id="37816-152">All messages that use hello same partition key are assigned toohello same fragment.</span></span> <span data-ttu-id="37816-153">Se il frammento di hello è temporaneamente non disponibile, Bus di servizio restituisce un errore.</span><span class="sxs-lookup"><span data-stu-id="37816-153">If hello fragment is temporarily unavailable, Service Bus returns an error.</span></span>

<span data-ttu-id="37816-154">A seconda dello scenario di hello, diverse proprietà dei messaggi vengono utilizzate come chiave di partizione:</span><span class="sxs-lookup"><span data-stu-id="37816-154">Depending on hello scenario, different message properties are used as a partition key:</span></span>

<span data-ttu-id="37816-155">**SessionId**: se dispone di un messaggio hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] imposta proprietà, quindi il Bus di servizio utilizza questa proprietà come chiave di partizione hello.</span><span class="sxs-lookup"><span data-stu-id="37816-155">**SessionId**: If a message has hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses this property as hello partition key.</span></span> <span data-ttu-id="37816-156">In questo modo, tutti i messaggi che appartengono toohello stessa sessione vengono gestiti da hello stesso broker messaggi.</span><span class="sxs-lookup"><span data-stu-id="37816-156">This way, all messages that belong toohello same session are handled by hello same message broker.</span></span> <span data-ttu-id="37816-157">In questo modo, messaggio di Service Bus tooguarantee ordinamento e la coerenza di hello degli stati sessione.</span><span class="sxs-lookup"><span data-stu-id="37816-157">This enables Service Bus tooguarantee message ordering as well as hello consistency of session states.</span></span>

<span data-ttu-id="37816-158">**PartitionKey**: se dispone di un messaggio hello [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] proprietà ma non hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] imposta proprietà, quindi Service Bus Usa hello [PartitionKey] [ PartitionKey] proprietà come chiave di partizione hello.</span><span class="sxs-lookup"><span data-stu-id="37816-158">**PartitionKey**: If a message has hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property but not hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set, then Service Bus uses hello [PartitionKey][PartitionKey] property as hello partition key.</span></span> <span data-ttu-id="37816-159">Se il messaggio hello ha entrambi hello [SessionId] [ SessionId] hello e [PartitionKey] [ PartitionKey] set di proprietà, entrambe le proprietà devono essere identiche.</span><span class="sxs-lookup"><span data-stu-id="37816-159">If hello message has both hello [SessionId][SessionId] and hello [PartitionKey][PartitionKey] properties set, both properties must be identical.</span></span> <span data-ttu-id="37816-160">Se hello [PartitionKey] [ PartitionKey] proprietà è impostata tooa valore diverso hello [SessionId] [ SessionId] , Bus di servizio restituisce un oggetto non valido un'operazione.</span><span class="sxs-lookup"><span data-stu-id="37816-160">If hello [PartitionKey][PartitionKey] property is set tooa different value than hello [SessionId][SessionId] property, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="37816-161">Hello [PartitionKey] [ PartitionKey] proprietà deve essere utilizzata se un mittente invia messaggi transazionali grado di riconoscere non di sessione.</span><span class="sxs-lookup"><span data-stu-id="37816-161">hello [PartitionKey][PartitionKey] property should be used if a sender sends non-session aware transactional messages.</span></span> <span data-ttu-id="37816-162">Hello chiave di partizione assicura che tutti i messaggi inviati all'interno di una transazione vengono gestiti da hello stesso broker di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="37816-162">hello partition key ensures that all messages that are sent within a transaction are handled by hello same messaging broker.</span></span>

<span data-ttu-id="37816-163">**MessageId**: se la coda hello o un argomento ha hello [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] impostata troppo**true** e hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] o [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] proprietà non sono impostate, quindi hello [BrokeredMessage.MessageId] [ BrokeredMessage.MessageId] proprietà viene utilizzata come chiave di partizione hello.</span><span class="sxs-lookup"><span data-stu-id="37816-163">**MessageId**: If hello queue or topic has hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property set too**true** and hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] or [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] properties are not set, then hello [BrokeredMessage.MessageId][BrokeredMessage.MessageId] property serves as hello partition key.</span></span> <span data-ttu-id="37816-164">Si noti che le librerie di Microsoft .NET e AMQP hello assegnare automaticamente un ID messaggio se non dispone di un'applicazione hello invio. In questo caso, tutte le copie di hello stesso messaggio vengono gestiti da hello stesso broker messaggi.</span><span class="sxs-lookup"><span data-stu-id="37816-164">(Note that hello Microsoft .NET and AMQP libraries automatically assign a message ID if hello sending application does not.) In this case, all copies of hello same message are handled by hello same message broker.</span></span> <span data-ttu-id="37816-165">Questo consente toodetect Bus di servizio, eliminare i messaggi duplicati.</span><span class="sxs-lookup"><span data-stu-id="37816-165">This enables Service Bus toodetect and eliminate duplicate messages.</span></span> <span data-ttu-id="37816-166">Se hello [QueueDescription.RequiresDuplicateDetection] [ QueueDescription.RequiresDuplicateDetection] non è impostata troppo**true**, Bus di servizio non considera hello [MessageId] [ MessageId] proprietà come chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="37816-166">If hello [QueueDescription.RequiresDuplicateDetection][QueueDescription.RequiresDuplicateDetection] property is not set too**true**, Service Bus does not consider hello [MessageId][MessageId] property as a partition key.</span></span>

### <a name="not-using-a-partition-key"></a><span data-ttu-id="37816-167">Senza l'uso di una chiave di partizione</span><span class="sxs-lookup"><span data-stu-id="37816-167">Not using a partition key</span></span>
<span data-ttu-id="37816-168">In assenza di hello di una chiave di partizione, Bus di servizio consente di distribuire i messaggi in un frammenti di hello schema round-robin tooall di hello coda o argomento partizionato.</span><span class="sxs-lookup"><span data-stu-id="37816-168">In hello absence of a partition key, Service Bus distributes messages in a round-robin fashion tooall hello fragments of hello partitioned queue or topic.</span></span> <span data-ttu-id="37816-169">Se il frammento di hello scelto non è disponibile, Bus di servizio assegna differenti frammenti tooa messaggio hello.</span><span class="sxs-lookup"><span data-stu-id="37816-169">If hello chosen fragment is not available, Service Bus assigns hello message tooa different fragment.</span></span> <span data-ttu-id="37816-170">In questo modo, hello trasmissione operazione ha esito positivo nonostante la temporanea indisponibilità hello di un archivio di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="37816-170">This way, hello send operation succeeds despite hello temporary unavailability of a messaging store.</span></span> <span data-ttu-id="37816-171">Tuttavia, si otterranno non hello garantito l'ordinamento che fornisce una chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="37816-171">However, you will not achieve hello guaranteed ordering that a partition key provides.</span></span>

<span data-ttu-id="37816-172">Per una discussione più dettagliata di compromesso hello tra disponibilità (nessuna chiave di partizione) e la coerenza (tramite una chiave di partizione), vedere [questo articolo](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="37816-172">For a more in-depth discussion of hello tradeoff between availability (no partition key) and consistency (using a partition key), see [this article](../event-hubs/event-hubs-availability-and-consistency.md).</span></span> <span data-ttu-id="37816-173">Queste informazioni si applicano ugualmente toopartitioned entità del Bus di servizio e le partizioni degli hub di eventi.</span><span class="sxs-lookup"><span data-stu-id="37816-173">This information applies equally toopartitioned Service Bus entities and Event Hubs partitions.</span></span>

<span data-ttu-id="37816-174">toogive Service Bus sufficiente messaggio hello tooenqueue di tempo in un frammento differente, hello [MessagingFactorySettings.OperationTimeout] [ MessagingFactorySettings.OperationTimeout] valore specificato dal client hello che invia il messaggio hello deve essere maggiore di 15 secondi.</span><span class="sxs-lookup"><span data-stu-id="37816-174">toogive Service Bus enough time tooenqueue hello message into a different fragment, hello [MessagingFactorySettings.OperationTimeout][MessagingFactorySettings.OperationTimeout] value specified by hello client that sends hello message must be greater than 15 seconds.</span></span> <span data-ttu-id="37816-175">È consigliabile impostare hello [OperationTimeout] [ OperationTimeout] valore predefinito della proprietà toohello di 60 secondi.</span><span class="sxs-lookup"><span data-stu-id="37816-175">It is recommended that you set hello [OperationTimeout][OperationTimeout] property toohello default value of 60 seconds.</span></span>

<span data-ttu-id="37816-176">Si noti che una chiave di partizione "associa" un frammento di messaggio tooa specifico.</span><span class="sxs-lookup"><span data-stu-id="37816-176">Note that a partition key "pins" a message tooa specific fragment.</span></span> <span data-ttu-id="37816-177">Se l'archivio di messaggistica hello contenente questo frammento non è disponibile, Bus di servizio restituisce un errore.</span><span class="sxs-lookup"><span data-stu-id="37816-177">If hello messaging store that holds this fragment is unavailable, Service Bus returns an error.</span></span> <span data-ttu-id="37816-178">In assenza di hello di una chiave di partizione, Bus di servizio è possibile scegliere un frammento differente e hello operazione ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="37816-178">In hello absence of a partition key, Service Bus can choose a different fragment and hello operation succeeds.</span></span> <span data-ttu-id="37816-179">È quindi consigliabile non specificare una chiave di partizione, a meno che non sia necessario.</span><span class="sxs-lookup"><span data-stu-id="37816-179">Therefore, it is recommended that you do not supply a partition key unless it is required.</span></span>

## <a name="advanced-topics-use-transactions-with-partitioned-entities"></a><span data-ttu-id="37816-180">Argomenti avanzati: usare le transazioni con entità partizionate</span><span class="sxs-lookup"><span data-stu-id="37816-180">Advanced topics: use transactions with partitioned entities</span></span>
<span data-ttu-id="37816-181">I messaggi inviati come parte di una transazione devono specificare una chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="37816-181">Messages that are sent as part of a transaction must specify a partition key.</span></span> <span data-ttu-id="37816-182">Può trattarsi di una delle seguenti proprietà hello: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], o [ BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span><span class="sxs-lookup"><span data-stu-id="37816-182">This can be one of hello following properties: [BrokeredMessage.SessionId][BrokeredMessage.SessionId], [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey], or [BrokeredMessage.MessageId][BrokeredMessage.MessageId].</span></span> <span data-ttu-id="37816-183">Tutti i messaggi vengono inviati come parte della stessa transazione debba specificare hello hello stessa chiave di partizione.</span><span class="sxs-lookup"><span data-stu-id="37816-183">All messages that are sent as part of hello same transaction must specify hello same partition key.</span></span> <span data-ttu-id="37816-184">Se si tenta di toosend un messaggio senza una chiave di partizione in una transazione, Bus di servizio restituisce un'eccezione di operazione non valida.</span><span class="sxs-lookup"><span data-stu-id="37816-184">If you attempt toosend a message without a partition key within a transaction, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="37816-185">Se si tenta di toosend più messaggi all'interno di hello stessa transazione che presentano le chiavi di partizione, Bus di servizio restituisce un'eccezione di operazione non valida.</span><span class="sxs-lookup"><span data-stu-id="37816-185">If you attempt toosend multiple messages within hello same transaction that have different partition keys, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="37816-186">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="37816-186">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.PartitionKey = "myPartitionKey";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

<span data-ttu-id="37816-187">Se sono impostate le proprietà di hello che fungono da una chiave di partizione, pin di Service Bus hello frammenti di messaggi tooa specifico.</span><span class="sxs-lookup"><span data-stu-id="37816-187">If any of hello properties that serve as a partition key are set, Service Bus pins hello message tooa specific fragment.</span></span> <span data-ttu-id="37816-188">Questo comportamento si verifica indipendentemente dall'uso di una transazione.</span><span class="sxs-lookup"><span data-stu-id="37816-188">This behavior occurs whether or not a transaction is used.</span></span> <span data-ttu-id="37816-189">È consigliabile non specificare una chiave di partizione, a meno che non sia necessario.</span><span class="sxs-lookup"><span data-stu-id="37816-189">It is recommended that you do not specify a partition key if it is not necessary.</span></span>

## <a name="using-sessions-with-partitioned-entities"></a><span data-ttu-id="37816-190">Uso delle sessioni con entità partizionate</span><span class="sxs-lookup"><span data-stu-id="37816-190">Using sessions with partitioned entities</span></span>
<span data-ttu-id="37816-191">toosend un argomento di un messaggio transazionale tooa con supporto della sessione o una coda, il messaggio hello deve avere hello [BrokeredMessage.SessionId] [ BrokeredMessage.SessionId] set di proprietà.</span><span class="sxs-lookup"><span data-stu-id="37816-191">toosend a transactional message tooa session-aware topic or queue, hello message must have hello [BrokeredMessage.SessionId][BrokeredMessage.SessionId] property set.</span></span> <span data-ttu-id="37816-192">Se hello [BrokeredMessage.PartitionKey] [ BrokeredMessage.PartitionKey] proprietà viene anche specificato deve essere identico toohello [SessionId] [ SessionId] proprietà.</span><span class="sxs-lookup"><span data-stu-id="37816-192">If hello [BrokeredMessage.PartitionKey][BrokeredMessage.PartitionKey] property is specified as well, it must be identical toohello [SessionId][SessionId] property.</span></span> <span data-ttu-id="37816-193">In caso contrario, il bus di servizio restituisce un'eccezione di operazione non valida.</span><span class="sxs-lookup"><span data-stu-id="37816-193">If they differ, Service Bus returns an invalid operation exception.</span></span>

<span data-ttu-id="37816-194">A differenza delle code di regolare (non partizionata) o argomenti, non è possibile toouse toosend una singola transazione più sessioni toodifferent di messaggi.</span><span class="sxs-lookup"><span data-stu-id="37816-194">Unlike regular (non-partitioned) queues or topics, it is not possible toouse a single transaction toosend multiple messages toodifferent sessions.</span></span> <span data-ttu-id="37816-195">Se è stato effettuato un tentativo, il bus di servizio restituirà un'eccezione di operazione non valida,</span><span class="sxs-lookup"><span data-stu-id="37816-195">If attempted, Service Bus returns an invalid operation exception.</span></span> <span data-ttu-id="37816-196">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="37816-196">For example:</span></span>

```csharp
CommittableTransaction committableTransaction = new CommittableTransaction();
using (TransactionScope ts = new TransactionScope(committableTransaction))
{
    BrokeredMessage msg = new BrokeredMessage("This is a message");
    msg.SessionId = "mySession";
    messageSender.Send(msg); 
    ts.Complete();
}
committableTransaction.Commit();
```

## <a name="automatic-message-forwarding-with-partitioned-entities"></a><span data-ttu-id="37816-197">Inoltro automatico dei messaggi con entità partizionate</span><span class="sxs-lookup"><span data-stu-id="37816-197">Automatic message forwarding with partitioned entities</span></span>
<span data-ttu-id="37816-198">Il bus di servizio supporta l'inoltro automatico dei messaggi da, a o tra entità partizionate.</span><span class="sxs-lookup"><span data-stu-id="37816-198">Service Bus supports automatic message forwarding from, to, or between partitioned entities.</span></span> <span data-ttu-id="37816-199">tooenable inoltro automatico dei messaggi, impostare hello [QueueDescription.ForwardTo] [ QueueDescription.ForwardTo] proprietà hello origine coda o sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="37816-199">tooenable automatic message forwarding, set hello [QueueDescription.ForwardTo][QueueDescription.ForwardTo] property on hello source queue or subscription.</span></span> <span data-ttu-id="37816-200">Se il messaggio hello viene specificata una chiave di partizione ([SessionId][SessionId], [PartitionKey][PartitionKey], o [MessageId] [ MessageId]), la chiave di partizione viene utilizzata per entità di destinazione hello.</span><span class="sxs-lookup"><span data-stu-id="37816-200">If hello message specifies a partition key ([SessionId][SessionId], [PartitionKey][PartitionKey], or [MessageId][MessageId]), that partition key is used for hello destination entity.</span></span>

## <a name="considerations-and-guidelines"></a><span data-ttu-id="37816-201">Considerazioni e indicazioni</span><span class="sxs-lookup"><span data-stu-id="37816-201">Considerations and guidelines</span></span>
* <span data-ttu-id="37816-202">**Funzionalità alti livelli di coerenza**: se un'entità vengono utilizzate caratteristiche quali sessioni, il rilevamento dei duplicati o il controllo esplicito di chiave di partizionamento, quindi le operazioni di messaggistica hello sono sempre toospecific indirizzato frammenti.</span><span class="sxs-lookup"><span data-stu-id="37816-202">**High consistency features**: If an entity uses features such as sessions, duplicate detection, or explicit control of partitioning key, then hello messaging operations are always routed toospecific fragments.</span></span> <span data-ttu-id="37816-203">Se uno qualsiasi dei frammenti di hello riscontrare traffico elevato o archivio sottostante hello è integro, tali operazioni esito negativo e viene ridotto di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="37816-203">If any of hello fragments experience high traffic or hello underlying store is unhealthy, those operations fail and availability is reduced.</span></span> <span data-ttu-id="37816-204">In generale, la coerenza di hello è ancora molto più elevata rispetto alle entità non partizionate; solo un subset di traffico di problemi, come il traffico hello tooall anziché.</span><span class="sxs-lookup"><span data-stu-id="37816-204">Overall, hello consistency is still much higher than non-partitioned entities; only a subset of traffic is experiencing issues, as opposed tooall hello traffic.</span></span> <span data-ttu-id="37816-205">Per altre informazioni, vedere la [discussione relativa a disponibilità e coerenza](../event-hubs/event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="37816-205">For more information, see this [discussion of availability and consistency](../event-hubs/event-hubs-availability-and-consistency.md).</span></span>
* <span data-ttu-id="37816-206">**Gestione**: operazioni, ad esempio Create, Update e Delete devono essere eseguite su tutti i frammenti di hello di entità hello.</span><span class="sxs-lookup"><span data-stu-id="37816-206">**Management**: Operations such as Create, Update and Delete must be performed on all hello fragments of hello entity.</span></span> <span data-ttu-id="37816-207">Se un frammento non è integro, potrebbero verificarsi errori per queste operazioni.</span><span class="sxs-lookup"><span data-stu-id="37816-207">If any fragment is unhealthy it could result in failures for these operations.</span></span> <span data-ttu-id="37816-208">Per l'operazione Get hello, informazioni come numero messaggi devono essere aggregate da tutti i frammenti.</span><span class="sxs-lookup"><span data-stu-id="37816-208">For hello Get operation, information such as message counts must be aggregated from all fragments.</span></span> <span data-ttu-id="37816-209">Se qualsiasi frammento non è integro, lo stato di disponibilità di hello entità risulta limitato.</span><span class="sxs-lookup"><span data-stu-id="37816-209">If any fragment is unhealthy, hello entity availability status is reported as limited.</span></span>
* <span data-ttu-id="37816-210">**Memoria insufficiente. gli scenari con messaggi**: tali scenari, soprattutto quando si utilizza il protocollo HTTP hello, potrebbe essere tooperform più operazioni di ricezione in ordine tooobtain tutti i messaggi hello.</span><span class="sxs-lookup"><span data-stu-id="37816-210">**Low volume message scenarios**: For such scenarios, especially when using hello HTTP protocol, you may have tooperform multiple receive operations in order tooobtain all hello messages.</span></span> <span data-ttu-id="37816-211">Per le richieste di ricezione, hello front-end esegue un'operazione di ricezione su tutti i frammenti di hello e memorizza nella cache tutte le risposte hello ricevute.</span><span class="sxs-lookup"><span data-stu-id="37816-211">For receive requests, hello front end performs a receive on all hello fragments and caches all hello responses received.</span></span> <span data-ttu-id="37816-212">Una richiesta di ricezione successive nella stessa connessione sarebbe vantaggioso la memorizzazione nella cache e ricevere le latenze di hello saranno inferiore.</span><span class="sxs-lookup"><span data-stu-id="37816-212">A subsequent receive request on hello same connection would benefit from this caching and receive latencies will be lower.</span></span> <span data-ttu-id="37816-213">Se tuttavia sono presenti più connessioni o si usa HTTP, ciò crea una nuova connessione per ogni richiesta.</span><span class="sxs-lookup"><span data-stu-id="37816-213">However, if you have multiple connections or use HTTP, that establishes a new connection for each request.</span></span> <span data-ttu-id="37816-214">Di conseguenza, non c'è garanzia che viene reindirizzato hello stesso nodo.</span><span class="sxs-lookup"><span data-stu-id="37816-214">As such, there is no guarantee that it would land on hello same node.</span></span> <span data-ttu-id="37816-215">Se tutti i messaggi esistenti sono bloccati e memorizzati nella cache in un altro front-end, hello visualizzato operazione restituisce **null**.</span><span class="sxs-lookup"><span data-stu-id="37816-215">If all existing messages are locked and cached in another front end, hello receive operation returns **null**.</span></span> <span data-ttu-id="37816-216">I messaggi raggiungeranno infine la scadenza e verranno ricevuti di nuovo.</span><span class="sxs-lookup"><span data-stu-id="37816-216">Messages eventually expire and you can receive them again.</span></span> <span data-ttu-id="37816-217">È consigliabile usare la connessione keep-alive HTTP.</span><span class="sxs-lookup"><span data-stu-id="37816-217">HTTP keep-alive is recommended.</span></span>
* <span data-ttu-id="37816-218">**Sfoglia/Peek messaggi**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) non restituiscono sempre il numero di hello di messaggi specificati nel hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) proprietà.</span><span class="sxs-lookup"><span data-stu-id="37816-218">**Browse/Peek messages**: [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) does not always return hello number of messages specified in hello [MessageCount](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_MessageCount) property.</span></span> <span data-ttu-id="37816-219">a causa di due motivi comuni.</span><span class="sxs-lookup"><span data-stu-id="37816-219">There are two common reasons for this.</span></span> <span data-ttu-id="37816-220">Uno dei motivi è che hello aggregate dimensioni della raccolta hello di messaggi raggiungono hello massimo di 256KB.</span><span class="sxs-lookup"><span data-stu-id="37816-220">One reason is that hello aggregated size of hello collection of messages exceeds hello maximum size of 256KB.</span></span> <span data-ttu-id="37816-221">Un altro motivo è che, se l'argomento o coda hello è hello [proprietà proprietà EnablePartitioning](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) impostare troppo**true**, una partizione potrebbe non essere sufficiente messaggi hello toocomplete richiesto numero di messaggi.</span><span class="sxs-lookup"><span data-stu-id="37816-221">Another reason is that if hello queue or topic has hello [EnablePartitioning property](/dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning) set too**true**, a partition may not have enough messages toocomplete hello requested number of messages.</span></span> <span data-ttu-id="37816-222">In generale, se un'applicazione richiede un numero specifico di messaggi tooreceive, questo deve chiamare [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) ripetutamente finché non raggiunge il numero di messaggi o se è presente alcun toopeek messaggi più.</span><span class="sxs-lookup"><span data-stu-id="37816-222">In general, if an application wants tooreceive a specific number of messages, it should call [PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) repeatedly until it gets that number of messages, or there are no more messages toopeek.</span></span> <span data-ttu-id="37816-223">Per altre informazioni, inclusi esempi di codice, vedere [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) o [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span><span class="sxs-lookup"><span data-stu-id="37816-223">For more information, including code samples, see [QueueClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_PeekBatch_System_Int32_) or [SubscriptionClient.PeekBatch](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient#Microsoft_ServiceBus_Messaging_SubscriptionClient_PeekBatch_System_Int32_).</span></span>

## <a name="latest-added-features"></a><span data-ttu-id="37816-224">Funzionalità aggiunte di recente</span><span class="sxs-lookup"><span data-stu-id="37816-224">Latest added features</span></span>
* <span data-ttu-id="37816-225">L'aggiunta o la rimozione di una regola è ora supportata con le entità partizionate.</span><span class="sxs-lookup"><span data-stu-id="37816-225">Add or remove rule is now supported with partitioned entities.</span></span> <span data-ttu-id="37816-226">A differenza delle entità non partizionate, queste operazioni non sono supportate nelle transazioni.</span><span class="sxs-lookup"><span data-stu-id="37816-226">Different from non-partitioned entities, these operations are not supported under transactions.</span></span> 
* <span data-ttu-id="37816-227">AMQP è ora supportato per l'invio e ricezione di messaggi tooand da un'entità partizionata.</span><span class="sxs-lookup"><span data-stu-id="37816-227">AMQP is now supported for sending and receiving messages tooand from a partitioned entity.</span></span>
* <span data-ttu-id="37816-228">AMQP è ora supportata per hello seguenti operazioni: [inviare Batch](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [Batch di ricezione](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [ricezione dal numero di sequenza](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [Visualizza](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [ Rinnovare il blocco](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [pianificare messaggio](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [pianificato messaggio di annullamento](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Aggiungi regola](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [rimuovere regola](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Rinnovo della sessione di blocco](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [lo stato della sessione Set](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [lo stato della sessione Get](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), e [enumerare sessioni](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span><span class="sxs-lookup"><span data-stu-id="37816-228">AMQP is now supported for hello following operations: [Batch Send](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_SendBatch_System_Collections_Generic_IEnumerable_Microsoft_ServiceBus_Messaging_BrokeredMessage__), [Batch Receive](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ReceiveBatch_System_Int32_), [Receive by Sequence Number](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Receive_System_Int64_), [Peek](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_Peek), [Renew Lock](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_RenewMessageLock_System_Guid_), [Schedule Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_ScheduleMessageAsync_Microsoft_ServiceBus_Messaging_BrokeredMessage_System_DateTimeOffset_), [Cancel Scheduled Message](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_CancelScheduledMessageAsync_System_Int64_), [Add Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Remove Rule](/dotnet/api/microsoft.servicebus.messaging.ruledescription), [Session Renew Lock](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_RenewLock), [Set Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_SetState_System_IO_Stream_), [Get Session State](/dotnet/api/microsoft.servicebus.messaging.messagesession#Microsoft_ServiceBus_Messaging_MessageSession_GetState), and [Enumerate Sessions](/dotnet/api/microsoft.servicebus.messaging.queueclient#Microsoft_ServiceBus_Messaging_QueueClient_GetMessageSessionsAsync).</span></span>

## <a name="partitioned-entities-limitations"></a><span data-ttu-id="37816-229">Limiti delle entità partizionate</span><span class="sxs-lookup"><span data-stu-id="37816-229">Partitioned entities limitations</span></span>
<span data-ttu-id="37816-230">Attualmente il Bus di servizio impone limitazioni seguenti su code e argomenti partizionati hello:</span><span class="sxs-lookup"><span data-stu-id="37816-230">Currently Service Bus imposes hello following limitations on partitioned queues and topics:</span></span>

* <span data-ttu-id="37816-231">Partizionata code e argomenti non supportano l'invio di messaggi che appartengono toodifferent sessioni in una singola transazione.</span><span class="sxs-lookup"><span data-stu-id="37816-231">Partitioned queues and topics do not support sending messages that belong toodifferent sessions in a single transaction.</span></span>
* <span data-ttu-id="37816-232">Bus di servizio consente attualmente too100 partizionata code o argomenti per ogni spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="37816-232">Service Bus currently allows up too100 partitioned queues or topics per namespace.</span></span> <span data-ttu-id="37816-233">Ogni coda o argomento partizionato viene conteggiato quota hello di 10.000 entità per spazio dei nomi (si applica tooPremium livello).</span><span class="sxs-lookup"><span data-stu-id="37816-233">Each partitioned queue or topic counts towards hello quota of 10,000 entities per namespace (does not apply tooPremium tier).</span></span>

## <a name="next-steps"></a><span data-ttu-id="37816-234">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="37816-234">Next steps</span></span>
<span data-ttu-id="37816-235">Vedere la discussione hello di [AMQP 1.0 di supporto per il Bus di servizio partizionati code e argomenti] [ AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn ulteriori informazioni sul partizionamento delle entità di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="37816-235">See hello discussion of [AMQP 1.0 support for Service Bus partitioned queues and topics][AMQP 1.0 support for Service Bus partitioned queues and topics] toolearn more about partitioning messaging entities.</span></span> 

[Service Bus architecture]: service-bus-architecture.md
[Azure portal]: https://portal.azure.com
[QueueDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_EnablePartitioning
[TopicDescription.EnablePartitioning]: /dotnet/api/microsoft.servicebus.messaging.topicdescription#Microsoft_ServiceBus_Messaging_TopicDescription_EnablePartitioning
[BrokeredMessage.SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[BrokeredMessage.PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[SessionId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_SessionId
[PartitionKey]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_PartitionKey
[QueueDescription.RequiresDuplicateDetection]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_RequiresDuplicateDetection
[BrokeredMessage.MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessageId]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_MessageId
[MessagingFactorySettings.OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[QueueDescription.ForwardTo]: /dotnet/api/microsoft.servicebus.messaging.queuedescription#Microsoft_ServiceBus_Messaging_QueueDescription_ForwardTo
[AMQP 1.0 support for Service Bus partitioned queues and topics]: service-bus-partitioned-queues-and-topics-amqp-overview.md
