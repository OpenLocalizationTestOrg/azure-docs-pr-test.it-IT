---
title: 'Backup di Azure: ripristinare file e cartelle da un backup di VM di Azure | Microsoft Docs'
description: Ripristinare i file da un punto di ripristino della macchina virtuale di Azure
services: backup
documentationcenter: dev-center-name
author: pvrk
manager: shivamg
keywords: ripristino a livello di elemento; ripristino di file da un backup di VM di Azure; ripristinare file da VM di Azure
ms.assetid: f1c067a2-4826-4da4-b97a-c5fd6c189a77
ms.service: backup
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/20/2017
ms.author: pullabhk;markgal
ms.openlocfilehash: ae7c345c11a7db25413d60ad822f16f84ca37362
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="recover-files-from-azure-virtual-machine-backup"></a><span data-ttu-id="36d81-104">Ripristinare i file da un backup della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="36d81-104">Recover files from Azure virtual machine backup</span></span>

<span data-ttu-id="36d81-105">Backup di Azure consente di ripristinare [i dischi e le VM di Azure](./backup-azure-arm-restore-vms.md) dai backup delle VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="36d81-105">Azure backup provides the capability to restore [Azure VMs and disks](./backup-azure-arm-restore-vms.md) from Azure VM backups.</span></span> <span data-ttu-id="36d81-106">Questo articolo illustra come è possibile ripristinare elementi, come file e cartelle, da un backup di VM di Azure.</span><span class="sxs-lookup"><span data-stu-id="36d81-106">Now this article explains how you can recover items such as files and folders from an Azure VM backup.</span></span>

> [!Note]
> <span data-ttu-id="36d81-107">Questa funzionalità è disponibile per le VM di Azure distribuite usando il modello di Resource Manager e protette in un insieme di credenziali di Servizi di ripristino.</span><span class="sxs-lookup"><span data-stu-id="36d81-107">This feature is available for Azure VMs deployed using the Resource Manager model and protected to a Recovery services vault.</span></span>
> <span data-ttu-id="36d81-108">Il ripristino di file da un backup della VM crittografato non è supportato.</span><span class="sxs-lookup"><span data-stu-id="36d81-108">File recovery from an encrypted VM backup is not supported.</span></span>
>

## <a name="mount-the-volume-and-copy-files"></a><span data-ttu-id="36d81-109">Montare il volume e copiare i file</span><span class="sxs-lookup"><span data-stu-id="36d81-109">Mount the volume and copy files</span></span>

1. <span data-ttu-id="36d81-110">Accedere al [portale di Azure](http://portal.Azure.com).</span><span class="sxs-lookup"><span data-stu-id="36d81-110">Sign into the [Azure portal](http://portal.Azure.com).</span></span> <span data-ttu-id="36d81-111">Cercare l'insieme di credenziali di Servizi di ripristino pertinente e la voce di backup necessaria.</span><span class="sxs-lookup"><span data-stu-id="36d81-111">Find the relevant Recovery services vault and the required backup item.</span></span>

2. <span data-ttu-id="36d81-112">Nel pannello Elemento di backup fare clic su **Ripristino file**</span><span class="sxs-lookup"><span data-stu-id="36d81-112">On the Backup Item blade, click **File Recovery**</span></span>

    ![Aprire la voce di backup dell'insieme di credenziali di Servizi di ripristino](./media/backup-azure-restore-files-from-vm/open-vault-item.png)

    <span data-ttu-id="36d81-114">Verrà aperto il pannello **Ripristino file**.</span><span class="sxs-lookup"><span data-stu-id="36d81-114">The **File Recovery** blade opens.</span></span>

    ![Pannello Ripristino file](./media/backup-azure-restore-files-from-vm/file-recovery-blade.png)

3. <span data-ttu-id="36d81-116">Nel menu a discesa **Selezionare il punto di ripristino**, selezionare il punto di ripristino contenente i file desiderati.</span><span class="sxs-lookup"><span data-stu-id="36d81-116">From the **Select recovery point** drop-down menu, select the recovery point that contains the files you want.</span></span> <span data-ttu-id="36d81-117">Per impostazione predefinita, il punto di ripristino più recente è già selezionato.</span><span class="sxs-lookup"><span data-stu-id="36d81-117">By default, the latest recovery point is already selected.</span></span>

4. <span data-ttu-id="36d81-118">Fare clic su **Download Executable** (Scarica eseguibile) (per la VM di Windows Azure) o su **Scarica script** (per la VM di Azure per Linux) per scaricare il software che verrà usato per copiare i file dal punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="36d81-118">Click **Download Executable** (for Windows Azure VM) or **Download Script** (for Linux Azure VM) to download the software that you'll use to copy files from the recovery point.</span></span>

  <span data-ttu-id="36d81-119">Il file eseguibile/script crea una connessione tra il computer locale e il punto di ripristino specificato.</span><span class="sxs-lookup"><span data-stu-id="36d81-119">The executable/script creates a connection between the local computer and the specified recovery point.</span></span>

5. <span data-ttu-id="36d81-120">Per eseguire lo script o il file eseguibile scaricato è necessaria una password.</span><span class="sxs-lookup"><span data-stu-id="36d81-120">You need a password to run the downloaded script/executable.</span></span> <span data-ttu-id="36d81-121">È possibile copiare la password dal portale usando il pulsante Copia vicino alla password generata</span><span class="sxs-lookup"><span data-stu-id="36d81-121">You can copy the password from the portal using the copy button beside the generated password</span></span>

    ![Password generata](./media/backup-azure-restore-files-from-vm/generated-pswd.png)

6. <span data-ttu-id="36d81-123">Eseguire il file eseguibile/script nel computer in cui si vogliono ripristinare i file.</span><span class="sxs-lookup"><span data-stu-id="36d81-123">On the computer where you want to recover the files, run the executable/script.</span></span> <span data-ttu-id="36d81-124">È necessario eseguire il file eseguibile/script con le credenziali di amministratore.</span><span class="sxs-lookup"><span data-stu-id="36d81-124">You must run it with Administrator credentials.</span></span> <span data-ttu-id="36d81-125">Se si esegue lo script in un computer con accesso limitato, verificare che sia disponibile l'accesso a:</span><span class="sxs-lookup"><span data-stu-id="36d81-125">If you run the script on a computer with restricted access, ensure there is access to:</span></span>

    - <span data-ttu-id="36d81-126">download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="36d81-126">download.microsoft.com</span></span>
    - <span data-ttu-id="36d81-127">Endpoint di Azure usati per i backup di VM di Azure</span><span class="sxs-lookup"><span data-stu-id="36d81-127">Azure endpoints used for Azure VM backups</span></span>
    - <span data-ttu-id="36d81-128">porta in uscita 3260</span><span class="sxs-lookup"><span data-stu-id="36d81-128">outbound port 3260</span></span>

   <span data-ttu-id="36d81-129">Per Linux, lo script richiede i componenti "open-iscsi" e "lshw" per la connessione al punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="36d81-129">For Linux, the script requires 'open-iscsi' and 'lshw' components to connect to the recovery point.</span></span> <span data-ttu-id="36d81-130">Se tali componenti non esistono nel computer in cui lo script è in esecuzione, verrà richiesta l'autorizzazione per installare i componenti rilevanti, che saranno installati dopo avere ottenuto il consenso.</span><span class="sxs-lookup"><span data-stu-id="36d81-130">If those do not exist on the machine where it is run, it asks for permission to install the relevant components and installs them upon consent.</span></span>
   
   <span data-ttu-id="36d81-131">Immettere la password copiata dal portale quando richiesto.</span><span class="sxs-lookup"><span data-stu-id="36d81-131">Enter the password copied from the portal when prompted.</span></span> <span data-ttu-id="36d81-132">Dopo avere immesso la password valida, gli script si connettono al punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="36d81-132">Once the valid password is entered the scripts connects to the recovery point.</span></span>
      
    ![Pannello Ripristino file](./media/backup-azure-restore-files-from-vm/executable-output.png)
    
   
   <span data-ttu-id="36d81-134">È possibile eseguire lo script in qualsiasi computer con lo stesso sistema operativo (o compatibile) della macchina virtuale sottoposta a backup.</span><span class="sxs-lookup"><span data-stu-id="36d81-134">You can run the script on any machine that has the same (or compatible) operating system as the backed-up VM.</span></span> <span data-ttu-id="36d81-135">Vedere la [tabella di sistemi operativi compatibili](backup-azure-restore-files-from-vm.md#compatible-os) per informazioni in proposito.</span><span class="sxs-lookup"><span data-stu-id="36d81-135">See the [Compatible OS table](backup-azure-restore-files-from-vm.md#compatible-os) for compatible operating systems.</span></span> <span data-ttu-id="36d81-136">Se la macchina virtuale di Azure protetta usa Spazi di archiviazione Windows (per le VM di Windows Azure) o LVM/matrici RAID (per le VM di Linux), non è possibile eseguire il file eseguibile/script nella stessa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="36d81-136">If the protected Azure virtual machine uses Windows Storage Spaces (for Windows Azure VMs) or LVM/RAID Arrays(for Linux VMs), then you can't run the executable/script on the same virtual machine.</span></span> <span data-ttu-id="36d81-137">Eseguirlo invece in qualsiasi altro computer con un sistema operativo compatibile.</span><span class="sxs-lookup"><span data-stu-id="36d81-137">Instead, run it on any other machine with a compatible operating system.</span></span>

### <a name="compatible-os"></a><span data-ttu-id="36d81-138">Sistema operativo compatibile</span><span class="sxs-lookup"><span data-stu-id="36d81-138">Compatible OS</span></span>

#### <a name="for-windows"></a><span data-ttu-id="36d81-139">Per Windows</span><span class="sxs-lookup"><span data-stu-id="36d81-139">For Windows</span></span>

<span data-ttu-id="36d81-140">La tabella seguente illustra la compatibilità tra i sistemi operativi del server e del computer.</span><span class="sxs-lookup"><span data-stu-id="36d81-140">The following table shows the compatibility between server and computer operating systems.</span></span> <span data-ttu-id="36d81-141">Quando si esegue il ripristino dei file, non è possibile ripristinare i file tra sistemi operativi non compatibili.</span><span class="sxs-lookup"><span data-stu-id="36d81-141">When recovering files, you can't restore files between incompatible operating systems.</span></span>

|<span data-ttu-id="36d81-142">Sistema operativo del server</span><span class="sxs-lookup"><span data-stu-id="36d81-142">Server OS</span></span> | <span data-ttu-id="36d81-143">Sistema operativo compatibile del client</span><span class="sxs-lookup"><span data-stu-id="36d81-143">Compatible client OS</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="36d81-144">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="36d81-144">Windows Server 2012 R2</span></span> | <span data-ttu-id="36d81-145">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="36d81-145">Windows 8.1</span></span> |
| <span data-ttu-id="36d81-146">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="36d81-146">Windows Server 2012</span></span>    | <span data-ttu-id="36d81-147">Windows 8</span><span class="sxs-lookup"><span data-stu-id="36d81-147">Windows 8</span></span>  |
| <span data-ttu-id="36d81-148">Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="36d81-148">Windows Server 2008 R2</span></span> | <span data-ttu-id="36d81-149">Windows 7</span><span class="sxs-lookup"><span data-stu-id="36d81-149">Windows 7</span></span>   |

#### <a name="for-linux"></a><span data-ttu-id="36d81-150">Per Linux</span><span class="sxs-lookup"><span data-stu-id="36d81-150">For Linux</span></span>

<span data-ttu-id="36d81-151">In Linux il requisito fondamentale è che il sistema operativo del computer in cui viene eseguito lo script supporti il file system dei file presenti nella VM Linux sottoposta a backup.</span><span class="sxs-lookup"><span data-stu-id="36d81-151">In Linux, the fundamental requirement is that the OS of the machine where the script is run should support the filesystem of the files present in the backed-up Linux VM.</span></span> <span data-ttu-id="36d81-152">Quando si seleziona un computer per eseguire lo script, verificare che disponga delle versioni e del sistema operativo compatibile indicati nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="36d81-152">While selecting a machine to run the script, please ensure it has the compatible OS and the versions as mentioned in the table below.</span></span>

|<span data-ttu-id="36d81-153">Sistema operativo Linux</span><span class="sxs-lookup"><span data-stu-id="36d81-153">Linux OS</span></span> | <span data-ttu-id="36d81-154">Versioni</span><span class="sxs-lookup"><span data-stu-id="36d81-154">Versions</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="36d81-155">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="36d81-155">Ubuntu</span></span> | <span data-ttu-id="36d81-156">12.04 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="36d81-156">12.04 and above</span></span> |
| <span data-ttu-id="36d81-157">CentOS</span><span class="sxs-lookup"><span data-stu-id="36d81-157">CentOS</span></span> | <span data-ttu-id="36d81-158">6.5 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="36d81-158">6.5 and above</span></span>  |
| <span data-ttu-id="36d81-159">RHEL</span><span class="sxs-lookup"><span data-stu-id="36d81-159">RHEL</span></span> | <span data-ttu-id="36d81-160">6.7 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="36d81-160">6.7 and above</span></span> |
| <span data-ttu-id="36d81-161">Debian</span><span class="sxs-lookup"><span data-stu-id="36d81-161">Debian</span></span> | <span data-ttu-id="36d81-162">7 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="36d81-162">7 and above</span></span> |
| <span data-ttu-id="36d81-163">Oracle Linux</span><span class="sxs-lookup"><span data-stu-id="36d81-163">Oracle Linux</span></span> | <span data-ttu-id="36d81-164">6.4 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="36d81-164">6.4 and above</span></span> |

<span data-ttu-id="36d81-165">Lo script richiede inoltre i componenti python e bash per l'esecuzione e la connessione protetta al punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="36d81-165">The script also requires python and bash components to execute and connect securely to the recovery point.</span></span>

|<span data-ttu-id="36d81-166">Componente</span><span class="sxs-lookup"><span data-stu-id="36d81-166">Component</span></span> | <span data-ttu-id="36d81-167">Versione</span><span class="sxs-lookup"><span data-stu-id="36d81-167">Version</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="36d81-168">bash</span><span class="sxs-lookup"><span data-stu-id="36d81-168">bash</span></span> | <span data-ttu-id="36d81-169">4 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="36d81-169">4 and above</span></span> |
| <span data-ttu-id="36d81-170">python</span><span class="sxs-lookup"><span data-stu-id="36d81-170">python</span></span> | <span data-ttu-id="36d81-171">2.6.6 e versioni successive</span><span class="sxs-lookup"><span data-stu-id="36d81-171">2.6.6 and above</span></span>  |


### <a name="identifying-volumes"></a><span data-ttu-id="36d81-172">Identificazione dei volumi</span><span class="sxs-lookup"><span data-stu-id="36d81-172">Identifying Volumes</span></span>

#### <a name="for-windows"></a><span data-ttu-id="36d81-173">Per Windows</span><span class="sxs-lookup"><span data-stu-id="36d81-173">For Windows</span></span>

<span data-ttu-id="36d81-174">Quando si esegue il file eseguibile, il sistema operativo monta i nuovi volumi e assegna le lettere di unità.</span><span class="sxs-lookup"><span data-stu-id="36d81-174">When you run the exectuable, the operating system mounts the new volumes and assigns drive letters.</span></span> <span data-ttu-id="36d81-175">È possibile usare Esplora risorse o Esplora file per individuare queste unità.</span><span class="sxs-lookup"><span data-stu-id="36d81-175">You can use Windows Explorer or File Explorer to browse those drives.</span></span> <span data-ttu-id="36d81-176">Le lettere di unità assegnate ai volumi potrebbero non essere le stesse lettere della macchina virtuale originale; il nome del volume viene tuttavia mantenuto.</span><span class="sxs-lookup"><span data-stu-id="36d81-176">The drive letters assigned to the volumes may not be the same letters as the original virtual machine, however, the volume name is preserved.</span></span> <span data-ttu-id="36d81-177">Ad esempio, se il volume nella macchina virtuale originale era "Disco dati (e:\)", questo volume può essere associato come "Disco dati ('Lettera di unità disponibile':\)" nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="36d81-177">For example, if the volume on the original virtual machine was “Data Disk (E:\)”, that volume can be attached as “Data Disk ('Any drive letter available':\) on the local computer.</span></span> <span data-ttu-id="36d81-178">Esplorare tutti i volumi indicati nell'output dello script fino a individuare il file o la cartella.</span><span class="sxs-lookup"><span data-stu-id="36d81-178">Browse through all volumes mentioned in the script output until you find your files/folder.</span></span>  
       
   ![Pannello Ripristino file](./media/backup-azure-restore-files-from-vm/volumes-attached.png)
           
#### <a name="for-linux"></a><span data-ttu-id="36d81-180">Per Linux</span><span class="sxs-lookup"><span data-stu-id="36d81-180">For Linux</span></span>

<span data-ttu-id="36d81-181">In Linux i volumi del punto di ripristino sono montati nella cartella in cui viene eseguito lo script.</span><span class="sxs-lookup"><span data-stu-id="36d81-181">In Linux, the volumes of the recovery point are mounted to the folder where the script is run.</span></span> <span data-ttu-id="36d81-182">I dischi collegati, i volumi e i percorsi di montaggio corrispondenti vengono visualizzati di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="36d81-182">The attached disks, volumes and the corresponding mount paths are shown accordingly.</span></span> <span data-ttu-id="36d81-183">Questi percorsi di montaggio sono visibili agli utenti con accesso a livello radice.</span><span class="sxs-lookup"><span data-stu-id="36d81-183">These mount paths are visible to users having root level access.</span></span> <span data-ttu-id="36d81-184">Esplorare i volumi indicati nell'output dello script.</span><span class="sxs-lookup"><span data-stu-id="36d81-184">Browse through the volumes mentioned in the script output.</span></span>

  ![Pannello Ripristino file per Linux](./media/backup-azure-restore-files-from-vm/linux-mount-paths.png)
  

## <a name="closing-the-connection"></a><span data-ttu-id="36d81-186">Chiusura della connessione</span><span class="sxs-lookup"><span data-stu-id="36d81-186">Closing the connection</span></span>

<span data-ttu-id="36d81-187">Dopo avere identificato i file e averli copiati in un percorso di archiviazione locale, rimuovere o smontare le unità aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="36d81-187">After identifying the files and copying them to a local storage location, remove (or unmount) the additional drives.</span></span> <span data-ttu-id="36d81-188">Smontare le unità, nel pannello **Ripristino file** del portale di Azure fare clic su **Unmount Disks** (Smonta dischi).</span><span class="sxs-lookup"><span data-stu-id="36d81-188">To unmount the drives, on the **File Recovery** blade in the Azure portal, click **Unmount Disks**.</span></span>

![Smontare i dischi](./media/backup-azure-restore-files-from-vm/unmount-disks3.png)

<span data-ttu-id="36d81-190">Dopo che i dischi sono stati smontati, viene visualizzato un messaggio indicante che l'operazione è stata eseguita correttamente.</span><span class="sxs-lookup"><span data-stu-id="36d81-190">Once the disks have been unmounted, you receive a message letting you know it was successful.</span></span> <span data-ttu-id="36d81-191">L'aggiornamento della connessione in modo che sia possibile rimuovere i dischi potrebbe richiedere alcuni minuti.</span><span class="sxs-lookup"><span data-stu-id="36d81-191">It may take a few minutes for the connection to refresh so that you can remove the disks.</span></span>

<span data-ttu-id="36d81-192">In Linux, dopo che la connessione al punto di ripristino viene interrotta, il sistema operativo non rimuove automaticamente i percorsi di montaggio corrispondenti,</span><span class="sxs-lookup"><span data-stu-id="36d81-192">In Linux, after the connection to the recovery point is severed, the OS doesn't remove the corresponding mount paths automatically.</span></span> <span data-ttu-id="36d81-193">che rimangono come volumi "orfani" e sono visibili, ma generano un errore quando si accede o si scrive sui file.</span><span class="sxs-lookup"><span data-stu-id="36d81-193">These exist as "orphan" volumes and they are visible but throw an error when you access/write the files.</span></span> <span data-ttu-id="36d81-194">Questi percorsi possono essere rimossi manualmente.</span><span class="sxs-lookup"><span data-stu-id="36d81-194">They can be manually removed.</span></span> <span data-ttu-id="36d81-195">Quando viene eseguito, lo script identifica tutti i volumi di questo tipo esistenti da eventuali punti di ripristino precedenti e li elimina dopo avere ottenuto il consenso.</span><span class="sxs-lookup"><span data-stu-id="36d81-195">The script, when run, identifies any such volumes existing from any previous recovery points and cleans them up upon consent.</span></span>

## <a name="special-configurations"></a><span data-ttu-id="36d81-196">Configurazioni speciali</span><span class="sxs-lookup"><span data-stu-id="36d81-196">Special configurations</span></span>

### <a name="dynamic-disks"></a><span data-ttu-id="36d81-197">Dischi dinamici</span><span class="sxs-lookup"><span data-stu-id="36d81-197">Dynamic Disks</span></span>

<span data-ttu-id="36d81-198">Se la macchina virtuale di Azure di cui è stato eseguito il backup dispone di volumi che si estendono su più dischi (volumi con spanning e striping) e/o a tolleranza di errore (volumi con mirroring e RAID-5) su dischi dinamici, non è possibile eseguire lo script eseguibile nella stessa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="36d81-198">If the Azure VM that was backed up has volumes that span multiple disks (spanned and striped volumes) and/or fault-tolerant volumes (mirrored and RAID-5 volumes) on dynamic disks, then you can't run the executable script on the same VM.</span></span> <span data-ttu-id="36d81-199">Eseguire invece lo script eseguibile in qualsiasi altro computer con un sistema operativo compatibile.</span><span class="sxs-lookup"><span data-stu-id="36d81-199">Instead, run the executable script on any other machine with a compatible operating system.</span></span>

### <a name="windows-storage-spaces"></a><span data-ttu-id="36d81-200">Spazi di archiviazione di Windows</span><span class="sxs-lookup"><span data-stu-id="36d81-200">Windows Storage Spaces</span></span>

<span data-ttu-id="36d81-201">Spazi di archiviazione Windows è una tecnologia di archiviazione Windows che consente di virtualizzare le risorse di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="36d81-201">Windows Storage Spaces is a technology in Windows storage that enables you to virtualize storage.</span></span> <span data-ttu-id="36d81-202">Con Spazi di archiviazione Windows è possibile raggruppare dischi standard del settore in pool di archiviazione e creare dischi virtuali, detti spazi di archiviazione, dallo spazio disponibile nei pool di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="36d81-202">With Windows Storage Spaces you can group industry-standard disks into storage pools, and then create virtual disks, called storage spaces, from the available space in those storage pools.</span></span>

<span data-ttu-id="36d81-203">Se la VM di Azure sottoposta a backup usa Spazi di archiviazione Windows, non è possibile eseguire lo script eseguibile nella stessa VM.</span><span class="sxs-lookup"><span data-stu-id="36d81-203">If the Azure VM that was backed up uses Windows Storage Spaces, then you can't run the executable script on the same VM.</span></span> <span data-ttu-id="36d81-204">Eseguire invece lo script eseguibile in qualsiasi altro computer con un sistema operativo compatibile.</span><span class="sxs-lookup"><span data-stu-id="36d81-204">Instead, run the executable script on any other machine with a compatible operating system.</span></span>

### <a name="lvmraid-arrays"></a><span data-ttu-id="36d81-205">LVM/matrici RAID</span><span class="sxs-lookup"><span data-stu-id="36d81-205">LVM/RAID Arrays</span></span>

<span data-ttu-id="36d81-206">In Linux vengono usati la gestione dei volumi logici (LVM) e/o le matrici RAID software per gestire i volumi logici su più dischi.</span><span class="sxs-lookup"><span data-stu-id="36d81-206">In Linux, Logical volume manager (LVM) and/or software RAID Arrays are used to manage logical volumes over multiple disks.</span></span> <span data-ttu-id="36d81-207">Se la VM Linux sottoposta a backup usa la gestione dei volumi logici (LVM) e/o matrici RAID, non è possibile eseguire lo script nella stessa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="36d81-207">If the backed up Linux VM uses LVM and/or RAID Arrays, you can't run the script on the same VM.</span></span> <span data-ttu-id="36d81-208">Eseguire invece lo script in qualsiasi altro computer con sistema operativo compatibile e che supporti il file system della macchina virtuale sottoposta a backup.</span><span class="sxs-lookup"><span data-stu-id="36d81-208">Instead run the script on any other machine with compatible OS and which supports filesystem of the backed up VM.</span></span>

<span data-ttu-id="36d81-209">L'output dello script visualizza i dischi LVM e/o delle matrici RAID e i volumi con il tipo di partizione come mostrato di seguito:</span><span class="sxs-lookup"><span data-stu-id="36d81-209">The script output displays the LVM and/or RAID Arrays disks and the volumes with the partition type as shown below</span></span>

   ![Pannello dell'output LVM per Linux](./media/backup-azure-restore-files-from-vm/linux-LVMOutput.png)
   
<span data-ttu-id="36d81-211">I comandi seguenti devono essere eseguiti dall'utente per portare queste partizioni online.</span><span class="sxs-lookup"><span data-stu-id="36d81-211">The following commands need to be run by the user to bring these partitions online.</span></span> 

<span data-ttu-id="36d81-212">**Per le partizioni LVM**</span><span class="sxs-lookup"><span data-stu-id="36d81-212">**For LVM Partitions**</span></span>

```
$ pvs <volume name as shown above in the script output> 
```
<span data-ttu-id="36d81-213">Elenca i nomi del gruppo di volumi in un volume fisico.</span><span class="sxs-lookup"><span data-stu-id="36d81-213">This lists the volume group names under a physical volume.</span></span>

```
$ lvdisplay <volume-group-name from the pvs command’s results> 
```
<span data-ttu-id="36d81-214">Elenca tutti i volumi logici, i nomi e i relativi percorsi in un gruppo di volumi.</span><span class="sxs-lookup"><span data-stu-id="36d81-214">This lists all logical volumes, names and their paths in a volume group.</span></span>

```
$ mount <LV path> </mountpath>
```
<span data-ttu-id="36d81-215">Per montare i volumi logici nel percorso scelto.</span><span class="sxs-lookup"><span data-stu-id="36d81-215">To mount the logical volumes to the path of your choice.</span></span>


<span data-ttu-id="36d81-216">**Per le matrici RAID**</span><span class="sxs-lookup"><span data-stu-id="36d81-216">**For RAID Arrays**</span></span>

```
$ mdadm –detail –scan
```
<span data-ttu-id="36d81-217">Consente di visualizzare informazioni dettagliate su tutti i dischi RAID.</span><span class="sxs-lookup"><span data-stu-id="36d81-217">This displays details about all raid disks.</span></span> <span data-ttu-id="36d81-218">Il disco RAID rilevante verrà visualizzato come `/dev/mdm/<RAID array name in the backed up VM>`</span><span class="sxs-lookup"><span data-stu-id="36d81-218">The relevant RAID disk will be displayed as `/dev/mdm/<RAID array name in the backed up VM>`</span></span>

<span data-ttu-id="36d81-219">Usare il comando mount se il disco RAID dispone di volumi fisici.</span><span class="sxs-lookup"><span data-stu-id="36d81-219">Use the mount command if the RAID disk has physical volumes.</span></span>
```
$ mount [RAID Disk Path] [/mounthpath]
```

<span data-ttu-id="36d81-220">Se questo disco RAID ha un'altra LVM configurata, seguire la stessa procedura descritta in precedenza per le partizioni LVM con il nome del volume corrispondente al nome del disco RAID.</span><span class="sxs-lookup"><span data-stu-id="36d81-220">If this RAID disk has another LVM configured in it then follow the same procedure as outlined above for LVM partitions with the volume name being the RAID Disk name</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="36d81-221">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="36d81-221">Troubleshooting</span></span>

<span data-ttu-id="36d81-222">Se si verificano problemi durante il ripristino di file dalle macchine virtuali, controllare la tabella seguente per informazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="36d81-222">If you have problems while recovering files from the virtual machines, check the following table for additional information.</span></span>

| <span data-ttu-id="36d81-223">Messaggio di errore/scenario</span><span class="sxs-lookup"><span data-stu-id="36d81-223">Error Message / Scenario</span></span> | <span data-ttu-id="36d81-224">Possibile causa</span><span class="sxs-lookup"><span data-stu-id="36d81-224">Probable Cause</span></span> | <span data-ttu-id="36d81-225">Azione consigliata</span><span class="sxs-lookup"><span data-stu-id="36d81-225">Recommended action</span></span> |
| ------------------------ | -------------- | ------------------ |
| <span data-ttu-id="36d81-226">Output del file exe: *Eccezione di connessione alla destinazione.*</span><span class="sxs-lookup"><span data-stu-id="36d81-226">Exe output: *Exception connecting to the target*</span></span> |<span data-ttu-id="36d81-227">Lo script non è in grado di accedere al punto di ripristino</span><span class="sxs-lookup"><span data-stu-id="36d81-227">Script is not able to access the recovery point</span></span> | <span data-ttu-id="36d81-228">Controllare se la macchina virtuale soddisfa i requisiti di accesso indicati in precedenza</span><span class="sxs-lookup"><span data-stu-id="36d81-228">Check whether the machine fulfills the access requirements mentioned above</span></span>|  
|   <span data-ttu-id="36d81-229">Output del file exe: *Accesso alla destinazione già eseguito mediante una sessione iSCSI.*</span><span class="sxs-lookup"><span data-stu-id="36d81-229">Exe output: *The target has already been logged in via an ISCSI session.*</span></span> | <span data-ttu-id="36d81-230">Lo script è stato già eseguito nella stessa macchina virtuale e le unità sono state associate</span><span class="sxs-lookup"><span data-stu-id="36d81-230">The script was already executed on the same machine and the drives have been attached</span></span> | <span data-ttu-id="36d81-231">I volumi del punto di ripristino sono già stati associati.</span><span class="sxs-lookup"><span data-stu-id="36d81-231">The volumes of the recovery point have already been attached.</span></span> <span data-ttu-id="36d81-232">È possibile che NON siano installati con le stesse lettere di unità della VM originale.</span><span class="sxs-lookup"><span data-stu-id="36d81-232">They may NOT be mounted with the same drive letters of the original VM.</span></span> <span data-ttu-id="36d81-233">Esplorare tutti i volumi disponibili in Esplora file per il file</span><span class="sxs-lookup"><span data-stu-id="36d81-233">Browse through all the available volumes in the file explorer for your file</span></span> |
| <span data-ttu-id="36d81-234">Output di file exe: *Questo script non è valido perché è necessario smontare i dischi tramite il portale/è stato superato il limite di 12 ore. Scaricare un nuovo script dal portale.*</span><span class="sxs-lookup"><span data-stu-id="36d81-234">Exe output: *This script is invalid because the disks have been dismounted via portal/exceeded the 12-hr limit. Please download a new script from the portal.*</span></span> |  <span data-ttu-id="36d81-235">I dischi sono stati smontati dal portale o è stato superato il limite di 12 ore</span><span class="sxs-lookup"><span data-stu-id="36d81-235">The disks have been dismounted from the portal or the 12-hr limit exceeded</span></span> |    <span data-ttu-id="36d81-236">Non è possibile eseguire questo specifico file con estensione exe perché non è più valido.</span><span class="sxs-lookup"><span data-stu-id="36d81-236">This particular exe is now invalid and can’t be run.</span></span> <span data-ttu-id="36d81-237">Se si vuole accedere ai file di questo punto di ripristino, visitare il portale per ottenere un nuovo file con estensione exe</span><span class="sxs-lookup"><span data-stu-id="36d81-237">If you want to access the files of that recovery point-in-time, visit the portal for a new exe</span></span>|
| <span data-ttu-id="36d81-238">Nella macchina virtuale in cui viene eseguito il file con estensione exe: i nuovi volumi non vengono smontati dopo avere selezionato il pulsante di disinstallazione</span><span class="sxs-lookup"><span data-stu-id="36d81-238">On the machine where the exe is run: The new volumes are not dismounted after the dismount button is clicked</span></span> |    <span data-ttu-id="36d81-239">L'iniziatore ISCSI nella macchina virtuale non sta rispondendo/aggiornando la connessione alla destinazione ed eseguendo la manutenzione della cache</span><span class="sxs-lookup"><span data-stu-id="36d81-239">The ISCSI initiator on the machine is not responding/refreshing its connection to the target and maintaining the cache</span></span> |    <span data-ttu-id="36d81-240">Attendere alcuni minuti dopo la pressione del pulsante per smontare.</span><span class="sxs-lookup"><span data-stu-id="36d81-240">Wait for some mins after the dismount button is pressed.</span></span> <span data-ttu-id="36d81-241">Se i nuovi volumi non sono ancora stati smontati, sfogliare tutti i volumi.</span><span class="sxs-lookup"><span data-stu-id="36d81-241">If the new volumes are still not dismounted, please browse through all the volumes.</span></span> <span data-ttu-id="36d81-242">In questo modo l'iniziatore deve aggiornare la connessione e il volume viene smontato con un messaggio di errore indicante che il disco non è disponibile</span><span class="sxs-lookup"><span data-stu-id="36d81-242">This forces the initiator to refresh the connection and the volume is dismounted with an error message that the disk is not available</span></span>|
| <span data-ttu-id="36d81-243">Output del file exe: lo script viene eseguito correttamente ma l'output indicante nuovi volumi associati non viene visualizzato nell'output dello script</span><span class="sxs-lookup"><span data-stu-id="36d81-243">Exe output: Script is run successfully but “New volumes attached” is not displayed on the script output</span></span> | <span data-ttu-id="36d81-244">Si tratta di un errore temporaneo</span><span class="sxs-lookup"><span data-stu-id="36d81-244">This is a transient error</span></span>   | <span data-ttu-id="36d81-245">I volumi sono stata già associati.</span><span class="sxs-lookup"><span data-stu-id="36d81-245">The volumes would have been already attached.</span></span> <span data-ttu-id="36d81-246">Aprire Explorer per visualizzare lo stato.</span><span class="sxs-lookup"><span data-stu-id="36d81-246">Open Explorer to browse.</span></span> <span data-ttu-id="36d81-247">Se si sta usando la stessa macchina virtuale per eseguire gli script ogni volta, è consigliabile riavviare la macchina; l'elenco verrà visualizzato nelle successive esecuzioni del file eseguibile.</span><span class="sxs-lookup"><span data-stu-id="36d81-247">If you are using the same machine for running scripts every time, consider restarting the machine and the list should be displayed in the subsequent exe runs.</span></span> |
| <span data-ttu-id="36d81-248">Specifico per Linux: non è possibile visualizzare i volumi desiderati</span><span class="sxs-lookup"><span data-stu-id="36d81-248">Linux specific: Not able to view the desired volumes</span></span> | <span data-ttu-id="36d81-249">Il sistema operativo del computer in cui viene eseguito lo script potrebbe non riconoscere il file system sottostante della macchina virtuale sottoposta a backup</span><span class="sxs-lookup"><span data-stu-id="36d81-249">The OS of the machine where the script is run may not recognize the underlying filesystem of the backed up VM</span></span> | <span data-ttu-id="36d81-250">Controllare se il punto di ripristino è coerente con l'arresto anomalo del sistema o è coerente a livello di file.</span><span class="sxs-lookup"><span data-stu-id="36d81-250">Check whether the recovery point is crash consistent or file-consistent.</span></span> <span data-ttu-id="36d81-251">Se è coerente a livello di file, eseguire lo script in un altro computer il cui sistema operativo riconosca il file system della macchina virtuale sottoposta a backup.</span><span class="sxs-lookup"><span data-stu-id="36d81-251">If file consistent, run the script on another machine whose OS recognizes the backed up VM's filesystem</span></span> |
| <span data-ttu-id="36d81-252">Specifico per Windows: non è possibile visualizzare i volumi desiderati</span><span class="sxs-lookup"><span data-stu-id="36d81-252">Windows specific: Not able to view the desired volumes</span></span> | <span data-ttu-id="36d81-253">I dischi possono essere stati collegati, ma i volumi non sono stati configurati</span><span class="sxs-lookup"><span data-stu-id="36d81-253">The disks may have been attached but the volumes were not configured</span></span> | <span data-ttu-id="36d81-254">Dalla schermata Gestione disco, identificare i dischi aggiuntivi correlati al punto di recupero.</span><span class="sxs-lookup"><span data-stu-id="36d81-254">From the disk management screen, identify the additional disks related to the recovery point.</span></span> <span data-ttu-id="36d81-255">Se uno di questi dischi è in stato offline, provare a renderlo online facendo clic con il pulsante destro del mouse sul disco e fare clic su "Online"</span><span class="sxs-lookup"><span data-stu-id="36d81-255">If any of these disks are in offline state try making them online by right-clicking on the disk and click 'Online'</span></span>|
