---
title: Creare un ambiente del servizio app di Azure usando un modello di Resource Manager
description: Illustra come creare un ambiente del servizio app di Azure esterno o con bilanciamento del carico interno usando un modello di Resource Manager
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 6eb7d43d-e820-4a47-818c-80ff7d3b6f8e
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: ccompy
ms.openlocfilehash: e6b21086488352c1da914b4656ad1d216fd6de85
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="create-an-ase-by-using-an-azure-resource-manager-template"></a><span data-ttu-id="4c440-103">Creare un ambiente del servizio app usando un modello di Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="4c440-103">Create an ASE by using an Azure Resource Manager template</span></span>

## <a name="overview"></a><span data-ttu-id="4c440-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="4c440-104">Overview</span></span>
<span data-ttu-id="4c440-105">È possibile creare gli ambienti del servizio app di Azure con un endpoint accessibile da Internet o un endpoint di un indirizzo interno di una rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="4c440-105">Azure App Service environments (ASEs) can be created with an internet-accessible endpoint or an endpoint on an internal address in an Azure virtual network (VNet).</span></span> <span data-ttu-id="4c440-106">Quando viene creato con un endpoint interno, tale endpoint dispone di un componente Azure denominato servizio di bilanciamento del carico interno (ILB).</span><span class="sxs-lookup"><span data-stu-id="4c440-106">When created with an internal endpoint, that endpoint is provided by an Azure component called an internal load balancer (ILB).</span></span> <span data-ttu-id="4c440-107">L'ambiente del servizio app in un indirizzo IP interno è chiamato ambiente del servizio app con bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="4c440-107">The ASE on an internal IP address is called an ILB ASE.</span></span> <span data-ttu-id="4c440-108">L'ambiente del servizio app con un endpoint pubblico è chiamato ambiente del servizio app esterno.</span><span class="sxs-lookup"><span data-stu-id="4c440-108">The ASE with a public endpoint is called an External ASE.</span></span> 

<span data-ttu-id="4c440-109">È possibile creare un ambiente del servizio app usando il portale di Azure o un modello di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="4c440-109">An ASE can be created by using the Azure portal or an Azure Resource Manager template.</span></span> <span data-ttu-id="4c440-110">Questo articolo illustra i passaggi e la sintassi necessari per creare un ambiente del servizio app esterno o con bilanciamento del carico interno con i modelli di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="4c440-110">This article walks through the steps and syntax you need to create an External ASE or ILB ASE with Resource Manager templates.</span></span> <span data-ttu-id="4c440-111">Per informazioni su come creare un ambiente del servizio app nel portale di Azure, vedere [Creare un ambiente del servizio app esterno][MakeExternalASE] o [Creare un ambiente del servizio app con bilanciamento del carico interno][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="4c440-111">To learn how to create an ASE in the Azure portal, see [Make an External ASE][MakeExternalASE] or [Make an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="4c440-112">Quando si crea un ambiente del servizio app nel portale di Azure, è possibile creare contemporaneamente la rete virtuale o scegliere una rete virtuale preesistente in cui eseguire la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4c440-112">When you create an ASE in the Azure portal, you can create your VNet at the same time or choose a preexisting VNet to deploy into.</span></span> <span data-ttu-id="4c440-113">Quando si crea un modello, è necessario iniziare con:</span><span class="sxs-lookup"><span data-stu-id="4c440-113">When you create an ASE from a template, you must start with:</span></span> 

* <span data-ttu-id="4c440-114">Una rete virtuale di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="4c440-114">A Resource Manager VNet.</span></span>
* <span data-ttu-id="4c440-115">una subnet in tale rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="4c440-115">A subnet in that VNet.</span></span> <span data-ttu-id="4c440-116">È consigliabile una subnet per l'ambiente del servizio app con dimensioni di `/25` e 128 indirizzi per supportare la crescita futura.</span><span class="sxs-lookup"><span data-stu-id="4c440-116">We recommend an ASE subnet size of `/25` with 128 addresses to accomodate future growth.</span></span> <span data-ttu-id="4c440-117">Dopo che l'ambiente del servizio app è stato creato, non è possibile modificarne le dimensioni.</span><span class="sxs-lookup"><span data-stu-id="4c440-117">After the ASE is created, you can't change the size.</span></span>
* <span data-ttu-id="4c440-118">L'ID risorsa dalla rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="4c440-118">The resource ID from your VNet.</span></span> <span data-ttu-id="4c440-119">È possibile ottenere questa informazione dal portale di Azure nelle proprietà della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="4c440-119">You can get this information from the Azure portal under your virtual network properties.</span></span>
* <span data-ttu-id="4c440-120">La sottoscrizione in cui si vuole eseguire la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4c440-120">The subscription you want to deploy into.</span></span>
* <span data-ttu-id="4c440-121">La località in cui si vuole eseguire la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4c440-121">The location you want to deploy into.</span></span>

<span data-ttu-id="4c440-122">Per automatizzare la creazione dell'ambiente del servizio app:</span><span class="sxs-lookup"><span data-stu-id="4c440-122">To automate your ASE creation:</span></span>

1. <span data-ttu-id="4c440-123">Creare l'ambiente del servizio app da un modello.</span><span class="sxs-lookup"><span data-stu-id="4c440-123">Create the ASE from a template.</span></span> <span data-ttu-id="4c440-124">Se si crea un ambiente del servizio app esterno, questo è l'ultimo passaggio.</span><span class="sxs-lookup"><span data-stu-id="4c440-124">If you create an External ASE, you're finished after this step.</span></span> <span data-ttu-id="4c440-125">Se si crea un ambiente del servizio app con bilanciamento del carico interno, è necessario eseguire ancora alcune operazioni.</span><span class="sxs-lookup"><span data-stu-id="4c440-125">If you create an ILB ASE, there are a few more things to do.</span></span>

2. <span data-ttu-id="4c440-126">Dopo avere creato l'ambiente del servizio app con bilanciamento del carico interno, viene caricato un certificato SSL corrispondente al dominio dell'ambiente del servizio app con bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="4c440-126">After your ILB ASE is created, an SSL certificate that matches your ILB ASE domain is uploaded.</span></span>

3. <span data-ttu-id="4c440-127">Il certificato SSL caricato viene assegnato all'ambiente del servizio app ILB come certificato "predefinito".</span><span class="sxs-lookup"><span data-stu-id="4c440-127">The uploaded SSL certificate is assigned to the ILB ASE as its "default" SSL certificate.</span></span>  <span data-ttu-id="4c440-128">Questo certificato viene usato per il traffico SSL verso le app nell'ambiente del servizio app con servizio di bilanciamento del carico interno quando usano il dominio radice comune assegnato all'ambiente del servizio app, ad esempio https://someapp.mycustomrootcomain.com.</span><span class="sxs-lookup"><span data-stu-id="4c440-128">This certificate is used for SSL traffic to apps on the ILB ASE when they use the common root domain that's assigned to the ASE (for example, https://someapp.mycustomrootcomain.com).</span></span>


## <a name="create-the-ase"></a><span data-ttu-id="4c440-129">Creare l'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="4c440-129">Create the ASE</span></span>
<span data-ttu-id="4c440-130">Un modello di Resource Manager che crea un ambiente del servizio app e il file dei parametri associati sono disponibili [in un esempio][quickstartasev2create] in GitHub.</span><span class="sxs-lookup"><span data-stu-id="4c440-130">A Resource Manager template that creates an ASE and its associated parameters file is available [in an example][quickstartasev2create] on GitHub.</span></span>

<span data-ttu-id="4c440-131">Per creare un ambiente del servizio app con bilanciamento del carico interno, usare questi [esempi][quickstartilbasecreate] di modello di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="4c440-131">If you want to make an ILB ASE, use these Resource Manager template [examples][quickstartilbasecreate].</span></span> <span data-ttu-id="4c440-132">I modelli soddisfano questo caso d'uso.</span><span class="sxs-lookup"><span data-stu-id="4c440-132">They cater to that use case.</span></span> <span data-ttu-id="4c440-133">La maggior parte dei parametri del file *azuredeploy.parameters.json* è comune alla creazione degli ambienti del servizio app con bilanciamento del carico interno e degli ambienti del servizio app esterni.</span><span class="sxs-lookup"><span data-stu-id="4c440-133">Most of the parameters in the *azuredeploy.parameters.json* file are common to the creation of ILB ASEs and External ASEs.</span></span> <span data-ttu-id="4c440-134">L'elenco seguente indica parametri importanti o specifici per la creazione di un ambiente del servizio app con bilanciamento del carico interno:</span><span class="sxs-lookup"><span data-stu-id="4c440-134">The following list calls out parameters of special note, or that are unique, when you create an ILB ASE:</span></span>

* <span data-ttu-id="4c440-135">*interalLoadBalancingMode*: impostare nella maggior parte dei casi su 3, a indicare che sia il traffico HTTP/HTTPS sulle porte 80/443 che le porte dei canali di controllo/dati ascoltati dal servizio FTP nell'ambiente del servizio app saranno associati a un indirizzo interno della rete virtuale allocato dal servizio di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="4c440-135">*interalLoadBalancingMode*: In most cases, set this to 3, which means both HTTP/HTTPS traffic on ports 80/443, and the control/data channel ports listened to by the FTP service on the ASE, will be bound to an ILB-allocated virtual network internal address.</span></span> <span data-ttu-id="4c440-136">Se questa proprietà viene impostata su 2, solo le porte correlate al servizio FTP (canali di controllo e dati) vengono associate a un indirizzo del servizio di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="4c440-136">If this property is set to 2, only the FTP service-related ports (both control and data channels) are bound to an ILB address.</span></span> <span data-ttu-id="4c440-137">Il traffico HTTP/HTTPS resta nell'indirizzo VIP pubblico.</span><span class="sxs-lookup"><span data-stu-id="4c440-137">The HTTP/HTTPS traffic remains on the public VIP.</span></span>
* <span data-ttu-id="4c440-138">*dnsSuffix*: questo parametro indica il dominio radice predefinito che viene assegnato all'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="4c440-138">*dnsSuffix*: This parameter defines the default root domain that's assigned to the ASE.</span></span> <span data-ttu-id="4c440-139">Nella variante pubblica del servizio app di Azure, il dominio radice predefinito per tutte le app Web è *azurewebsites.net*.</span><span class="sxs-lookup"><span data-stu-id="4c440-139">In the public variation of Azure App Service, the default root domain for all web apps is *azurewebsites.net*.</span></span> <span data-ttu-id="4c440-140">Poiché un ambiente del servizio app con servizio di bilanciamento del carico interno è interno alla rete virtuale di un cliente, non ha senso usare il dominio radice predefinito del servizio pubblico.</span><span class="sxs-lookup"><span data-stu-id="4c440-140">Because an ILB ASE is internal to a customer's virtual network, it doesn't make sense to use the public service's default root domain.</span></span> <span data-ttu-id="4c440-141">Un ambiente del servizio app con servizio di bilanciamento del carico interno deve invece avere un dominio radice predefinito appropriato per la rete virtuale interna dell'azienda.</span><span class="sxs-lookup"><span data-stu-id="4c440-141">Instead, an ILB ASE should have a default root domain that makes sense for use within a company's internal virtual network.</span></span> <span data-ttu-id="4c440-142">Un'azienda Contoso Corporation potrebbe ad esempio usare un dominio radice predefinito *internal-contoso.com* per le app che devono essere risolvibili e accessibili solo nella rete virtuale di Contoso.</span><span class="sxs-lookup"><span data-stu-id="4c440-142">For example, Contoso Corporation might use a default root domain of *internal-contoso.com* for apps that are intended to be resolvable and accessible only within Contoso's virtual network.</span></span> 
* <span data-ttu-id="4c440-143">*ipSslAddressCount*: questo parametro viene automaticamente impostato sul valore predefinito 0 nel file *azuredeploy.json* perché gli ambienti del servizio app con servizio di bilanciamento del carico interno hanno un solo indirizzo del servizio di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="4c440-143">*ipSslAddressCount*: This parameter automatically defaults to a value of 0 in the *azuredeploy.json* file because ILB ASEs only have a single ILB address.</span></span> <span data-ttu-id="4c440-144">Non esistono indirizzi IP SSL per un ambiente del servizio app con bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="4c440-144">There are no explicit IP-SSL addresses for an ILB ASE.</span></span> <span data-ttu-id="4c440-145">Il pool di indirizzi IP SSL per un ambiente del servizio app con bilanciamento del carico interno deve quindi essere impostato su zero.</span><span class="sxs-lookup"><span data-stu-id="4c440-145">Hence, the IP-SSL address pool for an ILB ASE must be set to zero.</span></span> <span data-ttu-id="4c440-146">In caso contrario, si verifica un errore di provisioning.</span><span class="sxs-lookup"><span data-stu-id="4c440-146">Otherwise, a provisioning error occurs.</span></span> 

<span data-ttu-id="4c440-147">Dopo la compilazione di *azuredeploy.parameters.json*, creare l'ambiente del servizio app usando il frammento di codice di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4c440-147">After the *azuredeploy.parameters.json* file is filled in, create the ASE by using the PowerShell code snippet.</span></span> <span data-ttu-id="4c440-148">Modificare i percorsi dei file per fare in modo che corrispondano alle posizioni dei file dei modelli di Resource Manager nel computer.</span><span class="sxs-lookup"><span data-stu-id="4c440-148">Change the file paths to match the Resource Manager template-file locations on your machine.</span></span> <span data-ttu-id="4c440-149">Indicare i valori per il nome della distribuzione di Resource Manager e il nome del gruppo di risorse:</span><span class="sxs-lookup"><span data-stu-id="4c440-149">Remember to supply your own values for the Resource Manager deployment name and the resource group name:</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="4c440-150">La creazione dell'ambiente del servizio app richiede circa un'ora.</span><span class="sxs-lookup"><span data-stu-id="4c440-150">It takes about an hour for the ASE to be created.</span></span> <span data-ttu-id="4c440-151">L'ambiente del servizio app viene quindi visualizzato nel portale nell'elenco di ambienti del servizio app per la sottoscrizione che ha attivato la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="4c440-151">Then the ASE shows up in the portal in the list of ASEs for the subscription that triggered the deployment.</span></span>

## <a name="upload-and-configure-the-default-ssl-certificate"></a><span data-ttu-id="4c440-152">Caricare e configurare il certificato SSL "predefinito"</span><span class="sxs-lookup"><span data-stu-id="4c440-152">Upload and configure the "default" SSL certificate</span></span>
<span data-ttu-id="4c440-153">È necessario associare un certificato SSL all'ambiente del servizio app come certificato SSL "predefinito" usato per stabilire le connessioni SSL alle app.</span><span class="sxs-lookup"><span data-stu-id="4c440-153">An SSL certificate must be associated with the ASE as the "default" SSL certificate that's used to establish SSL connections to apps.</span></span> <span data-ttu-id="4c440-154">Se il suffisso DNS predefinito dell'ambiente del servizio app è *internal-contoso.com*, una connessione a https://some-random-app.internal-contoso.com richiede un certificato SSL valido per **.internal-contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="4c440-154">If the ASE's default DNS suffix is *internal-contoso.com*, a connection to https://some-random-app.internal-contoso.com requires an SSL certificate that's valid for **.internal-contoso.com*.</span></span> 

<span data-ttu-id="4c440-155">Ottenere un certificato SSL valido usando le autorità di certificazione interne, acquistando un certificato da un'autorità di certificazione esterna o usando un certificato autofirmato.</span><span class="sxs-lookup"><span data-stu-id="4c440-155">Obtain a valid SSL certificate by using internal certificate authorities, purchasing a certificate from an external issuer, or using a self-signed certificate.</span></span> <span data-ttu-id="4c440-156">Indipendentemente dall'origine del certificato SSL è necessario configurare correttamente gli attributi del certificato seguenti:</span><span class="sxs-lookup"><span data-stu-id="4c440-156">Regardless of the source of the SSL certificate, the following certificate attributes must be configured properly:</span></span>

* <span data-ttu-id="4c440-157">**Soggetto**: questo attributo deve essere impostato su **.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="4c440-157">**Subject**: This attribute must be set to **.your-root-domain-here.com*.</span></span>
* <span data-ttu-id="4c440-158">**Nome alternativo soggetto**: questo attributo deve includere sia **.your-root-domain-here.com* che **.scm.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="4c440-158">**Subject Alternative Name**: This attribute must include both **.your-root-domain-here.com* and **.scm.your-root-domain-here.com*.</span></span> <span data-ttu-id="4c440-159">Le connessioni SSL al sito SCM/Kudu associato a ogni app usano un indirizzo nel formato *your-app-name.scm.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="4c440-159">SSL connections to the SCM/Kudu site associated with each app use an address of the form *your-app-name.scm.your-root-domain-here.com*.</span></span>

<span data-ttu-id="4c440-160">Dopo aver ottenuto un certificato SSL valido sono necessari altri due passaggi preliminari.</span><span class="sxs-lookup"><span data-stu-id="4c440-160">With a valid SSL certificate in hand, two additional preparatory steps are needed.</span></span> <span data-ttu-id="4c440-161">Convertire/Salvare il certificato SSL come file con estensione pfx.</span><span class="sxs-lookup"><span data-stu-id="4c440-161">Convert/save the SSL certificate as a .pfx file.</span></span> <span data-ttu-id="4c440-162">Tenere presente che il file con estensione pfx deve includere tutti i certificati intermedi e quelli radice.</span><span class="sxs-lookup"><span data-stu-id="4c440-162">Remember that the .pfx file must include all intermediate and root certificates.</span></span> <span data-ttu-id="4c440-163">Proteggerlo con una password.</span><span class="sxs-lookup"><span data-stu-id="4c440-163">Secure it with a password.</span></span>

<span data-ttu-id="4c440-164">Il file con estensione pfx deve essere convertito in una stringa Base 64 perché il certificato SSL viene caricato usando un modello di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="4c440-164">The .pfx file needs to be converted into a base64 string because the SSL certificate is uploaded by using a Resource Manager template.</span></span> <span data-ttu-id="4c440-165">Poiché i modelli di Resource Manager sono file di testo, il file PFX deve essere convertito in una stringa Base 64.</span><span class="sxs-lookup"><span data-stu-id="4c440-165">Because Resource Manager templates are text files, the .pfx file must be converted into a base64 string.</span></span> <span data-ttu-id="4c440-166">In questo modo può essere incluso come parametro del modello.</span><span class="sxs-lookup"><span data-stu-id="4c440-166">This way it can be included as a parameter of the template.</span></span>

<span data-ttu-id="4c440-167">Usare il frammento di codice di PowerShell seguente per:</span><span class="sxs-lookup"><span data-stu-id="4c440-167">Use the following PowerShell code snippet to:</span></span>

* <span data-ttu-id="4c440-168">Generare un certificato autofirmato.</span><span class="sxs-lookup"><span data-stu-id="4c440-168">Generate a self-signed certificate.</span></span>
* <span data-ttu-id="4c440-169">Esportare il certificato come file PFX.</span><span class="sxs-lookup"><span data-stu-id="4c440-169">Export the certificate as a .pfx file.</span></span>
* <span data-ttu-id="4c440-170">Convertire il file PXF in una stringa con codifica Base 64.</span><span class="sxs-lookup"><span data-stu-id="4c440-170">Convert the .pfx file into a base64-encoded string.</span></span>
* <span data-ttu-id="4c440-171">Salvare la stringa con codifica Base 64 in un file separato.</span><span class="sxs-lookup"><span data-stu-id="4c440-171">Save the base64-encoded string to a separate file.</span></span> 

<span data-ttu-id="4c440-172">Questo codice PowerShell per la codifica Base 64 è stato adattato dal [blog di script di PowerShell][examplebase64encoding]:</span><span class="sxs-lookup"><span data-stu-id="4c440-172">This PowerShell code for base64 encoding was adapted from the [PowerShell scripts blog][examplebase64encoding]:</span></span>

        $certificate = New-SelfSignedCertificate -certstorelocation cert:\localmachine\my -dnsname "*.internal-contoso.com","*.scm.internal-contoso.com"

        $certThumbprint = "cert:\localMachine\my\" + $certificate.Thumbprint
        $password = ConvertTo-SecureString -String "CHANGETHISPASSWORD" -Force -AsPlainText

        $fileName = "exportedcert.pfx"
        Export-PfxCertificate -cert $certThumbprint -FilePath $fileName -Password $password     

        $fileContentBytes = get-content -encoding byte $fileName
        $fileContentEncoded = [System.Convert]::ToBase64String($fileContentBytes)
        $fileContentEncoded | set-content ($fileName + ".b64")

<span data-ttu-id="4c440-173">Dopo avere generato il certificato SSL e averlo convertito in una stringa con codifica Base 64, usare il modello di esempio di Resource Manager disponibile in GitHub, [Configure the default SSL certificate][quickstartconfiguressl] (Configurare il certificato SSL predefinito).</span><span class="sxs-lookup"><span data-stu-id="4c440-173">After the SSL certificate is successfully generated and converted to a base64-encoded string, use the example Resource Manager template [Configure the default SSL certificate][quickstartconfiguressl] on GitHub.</span></span> 

<span data-ttu-id="4c440-174">I parametri del file *azuredeploy.parameters.json* sono elencati qui:</span><span class="sxs-lookup"><span data-stu-id="4c440-174">The parameters in the *azuredeploy.parameters.json* file are listed here:</span></span>

* <span data-ttu-id="4c440-175">*appServiceEnvironmentName*: nome dell'ambiente del servizio app con servizio di bilanciamento del carico interno in fase di configurazione.</span><span class="sxs-lookup"><span data-stu-id="4c440-175">*appServiceEnvironmentName*: The name of the ILB ASE being configured.</span></span>
* <span data-ttu-id="4c440-176">*existingAseLocation*: stringa di testo contenente l'area di Azure in cui è stato distribuito l'ambiente del servizio app con servizio di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="4c440-176">*existingAseLocation*: Text string containing the Azure region where the ILB ASE was deployed.</span></span>  <span data-ttu-id="4c440-177">Ad esempio "Stati Uniti centro-meridionali".</span><span class="sxs-lookup"><span data-stu-id="4c440-177">For example: "South Central US".</span></span>
* <span data-ttu-id="4c440-178">*pfxBlobString*: rappresentazione del file con estensione pfx sotto forma di stringa con codifica Base 64.</span><span class="sxs-lookup"><span data-stu-id="4c440-178">*pfxBlobString*: The based64-encoded string representation of the .pfx file.</span></span> <span data-ttu-id="4c440-179">Usare il frammento di codice visualizzato prima e copiare la stringa contenuta in "exportedcert.pfx.b64".</span><span class="sxs-lookup"><span data-stu-id="4c440-179">Use the code snippet shown earlier and copy the string contained in "exportedcert.pfx.b64".</span></span> <span data-ttu-id="4c440-180">Incollarla come valore dell'attributo *pfxBlobString*.</span><span class="sxs-lookup"><span data-stu-id="4c440-180">Paste it in as the value of the *pfxBlobString* attribute.</span></span>
* <span data-ttu-id="4c440-181">*password*: password usata per la protezione del file con estensione pfx.</span><span class="sxs-lookup"><span data-stu-id="4c440-181">*password*: The password used to secure the .pfx file.</span></span>
* <span data-ttu-id="4c440-182">*certificateThumbprint*: identificazione personale del certificato.</span><span class="sxs-lookup"><span data-stu-id="4c440-182">*certificateThumbprint*: The certificate's thumbprint.</span></span> <span data-ttu-id="4c440-183">Se si recupera questo valore da PowerShell, ad esempio *$certificate.Thumbprint* nel frammento di codice precedente, è possibile usare il valore così com'è.</span><span class="sxs-lookup"><span data-stu-id="4c440-183">If you retrieve this value from PowerShell (for example, *$certificate.Thumbprint* from the earlier code snippet), you can use the value as is.</span></span> <span data-ttu-id="4c440-184">Se si copia il valore dalla finestra di dialogo del certificato di Windows, rimuovere gli spazi estranei.</span><span class="sxs-lookup"><span data-stu-id="4c440-184">If you copy the value from the Windows certificate dialog box, remember to strip out the extraneous spaces.</span></span> <span data-ttu-id="4c440-185">Il valore di *certificateThumbprint* sarà simile a AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span><span class="sxs-lookup"><span data-stu-id="4c440-185">The *certificateThumbprint* should look something like  AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span></span>
* <span data-ttu-id="4c440-186">*certificateName*: identificatore di stringa descrittivo scelto dall'utente per identificare il certificato.</span><span class="sxs-lookup"><span data-stu-id="4c440-186">*certificateName*: A friendly string identifier of your own choosing used to identity the certificate.</span></span> <span data-ttu-id="4c440-187">Il nome viene usato nell'ambito dell'identificatore univoco di Resource Manager per l'entità *Microsoft.Web/certificates* che rappresenta il certificato SSL.</span><span class="sxs-lookup"><span data-stu-id="4c440-187">The name is used as part of the unique Resource Manager identifier for the *Microsoft.Web/certificates* entity that represents the SSL certificate.</span></span> <span data-ttu-id="4c440-188">Il nome *deve* terminare con il suffisso seguente: \_yourASENameHere_InternalLoadBalancingASE.</span><span class="sxs-lookup"><span data-stu-id="4c440-188">The name *must* end with the following suffix: \_yourASENameHere_InternalLoadBalancingASE.</span></span> <span data-ttu-id="4c440-189">Il portale di Azure usa questo suffisso per indicare che il certificato è usato per la protezione di un ambiente del servizio app abilitato al bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="4c440-189">The Azure portal uses this suffix as an indicator that the certificate is used to secure an ILB-enabled ASE.</span></span>

<span data-ttu-id="4c440-190">Un esempio abbreviato di *azuredeploy.parameters.json* è illustrato qui:</span><span class="sxs-lookup"><span data-stu-id="4c440-190">An abbreviated example of *azuredeploy.parameters.json* is shown here:</span></span>

    {
         "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json",
         "contentVersion": "1.0.0.0",
         "parameters": {
              "appServiceEnvironmentName": {
                   "value": "yourASENameHere"
              },
              "existingAseLocation": {
                   "value": "East US 2"
              },
              "pfxBlobString": {
                   "value": "MIIKcAIBAz...snip...snip...pkCAgfQ"
              },
              "password": {
                   "value": "PASSWORDGOESHERE"
              },
              "certificateThumbprint": {
                   "value": "AF3143EB61D43F6727842115BB7F17BBCECAECAE"
              },
              "certificateName": {
                   "value": "DefaultCertificateFor_yourASENameHere_InternalLoadBalancingASE"
              }
         }
    }

<span data-ttu-id="4c440-191">Dopo la compilazione di *azuredeploy.parameters.json*, configurare il certificato SSL predefinito usando il frammento di codice di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4c440-191">After the *azuredeploy.parameters.json* file is filled in, configure the default SSL certificate by using the PowerShell code snippet.</span></span> <span data-ttu-id="4c440-192">Modificare i percorsi dei file per fare in modo che corrispondano al percorso dei file dei modelli di Resource Manager nel computer.</span><span class="sxs-lookup"><span data-stu-id="4c440-192">Change the file paths to match where the Resource Manager template files are located on your machine.</span></span> <span data-ttu-id="4c440-193">Indicare i valori per il nome della distribuzione di Resource Manager e il nome del gruppo di risorse:</span><span class="sxs-lookup"><span data-stu-id="4c440-193">Remember to supply your own values for the Resource Manager deployment name and the resource group name:</span></span>

     $templatePath="PATH\azuredeploy.json"
     $parameterPath="PATH\azuredeploy.parameters.json"

     New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="4c440-194">L'applicazione della modifica richiede circa 40 minuti per ogni front-end dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="4c440-194">It takes roughly 40 minutes per ASE front end to apply the change.</span></span> <span data-ttu-id="4c440-195">Per un ambiente del servizio app di dimensioni predefinite che usa due front-end, ad esempio, l'operazione richiede all'incirca un'ora e 20 minuti.</span><span class="sxs-lookup"><span data-stu-id="4c440-195">For example, for a default-sized ASE that uses two front ends, the template takes around one hour and 20 minutes to complete.</span></span> <span data-ttu-id="4c440-196">Durante l'esecuzione del modello, l'ambiente del servizio app non può essere ridimensionato.</span><span class="sxs-lookup"><span data-stu-id="4c440-196">While the template is running, the ASE can't scale.</span></span>  

<span data-ttu-id="4c440-197">Quando il modello è completato, le app nell'ambiente del servizio app con bilanciamento del carico interno sono accessibili tramite HTTPS.</span><span class="sxs-lookup"><span data-stu-id="4c440-197">After the template finishes, apps on the ILB ASE can be accessed over HTTPS.</span></span> <span data-ttu-id="4c440-198">Le connessioni vengono protette usando il certificato SSL predefinito.</span><span class="sxs-lookup"><span data-stu-id="4c440-198">The connections are secured by using the default SSL certificate.</span></span> <span data-ttu-id="4c440-199">Il certificato SSL predefinito viene usato quando le app nell'ambiente del servizio app con servizio di bilanciamento del carico interno vengono indirizzate usando una combinazione di nome applicazione e nome host predefinito.</span><span class="sxs-lookup"><span data-stu-id="4c440-199">The default SSL certificate is used when apps on the ILB ASE are addressed by using a combination of the application name plus the default host name.</span></span> <span data-ttu-id="4c440-200">https://mycustomapp.internal-contoso.com, ad esempio, usa il certificato SSL predefinito per **.internal-contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="4c440-200">For example, https://mycustomapp.internal-contoso.com uses the default SSL certificate for **.internal-contoso.com*.</span></span>

<span data-ttu-id="4c440-201">Tuttavia, come per le app eseguite nel servizio multi-tenant pubblico, gli sviluppatori possono configurare nomi host personalizzati per le singole app.</span><span class="sxs-lookup"><span data-stu-id="4c440-201">However, just like apps that run on the public multitenant service, developers can configure custom host names for individual apps.</span></span> <span data-ttu-id="4c440-202">Possono anche configurare associazioni di certificati SSL basati su SNI univoche per le singole app.</span><span class="sxs-lookup"><span data-stu-id="4c440-202">They also can configure unique SNI SSL certificate bindings for individual apps.</span></span>

## <a name="app-service-environment-v1"></a><span data-ttu-id="4c440-203">Ambiente del servizio app 1</span><span class="sxs-lookup"><span data-stu-id="4c440-203">App Service Environment v1</span></span> ##
<span data-ttu-id="4c440-204">Esistono due versioni dell'ambiente del servizio app: ASEv1 e ASEv2.</span><span class="sxs-lookup"><span data-stu-id="4c440-204">App Service Environment has two versions: ASEv1 and ASEv2.</span></span> <span data-ttu-id="4c440-205">Le informazioni sopra riportate si basano sulla versione ASEv2.</span><span class="sxs-lookup"><span data-stu-id="4c440-205">The preceding information was based on ASEv2.</span></span> <span data-ttu-id="4c440-206">Questa sezione illustra le differenze tra ASEv1 e ASEv2.</span><span class="sxs-lookup"><span data-stu-id="4c440-206">This section shows you the differences between ASEv1 and ASEv2.</span></span>

<span data-ttu-id="4c440-207">In ASEv1 si gestiscono manualmente tutte le risorse,</span><span class="sxs-lookup"><span data-stu-id="4c440-207">In ASEv1, you manage all of the resources manually.</span></span> <span data-ttu-id="4c440-208">inclusi front-end, ruoli di lavoro e indirizzi IP usati per la connessione SSL basata su IP.</span><span class="sxs-lookup"><span data-stu-id="4c440-208">That includes the front ends, workers, and IP addresses used for IP-based SSL.</span></span> <span data-ttu-id="4c440-209">Per poter aumentare il numero di istanze di un piano di servizio app, è necessario aumentare il numero di istanze del pool di lavoro in cui si vuole ospitare il piano.</span><span class="sxs-lookup"><span data-stu-id="4c440-209">Before you can scale out your App Service plan, you must scale out the worker pool that you want to host it.</span></span>

<span data-ttu-id="4c440-210">ASEv1 usa un modello tariffario diverso rispetto a ASEv2.</span><span class="sxs-lookup"><span data-stu-id="4c440-210">ASEv1 uses a different pricing model from ASEv2.</span></span> <span data-ttu-id="4c440-211">Nella versione ASEv1, in particolare, si paga per tutti i core allocati,</span><span class="sxs-lookup"><span data-stu-id="4c440-211">In ASEv1, you pay for each core allocated.</span></span> <span data-ttu-id="4c440-212">inclusi i core usati per i front-end o i ruoli di lavoro in cui non sono ospitati carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="4c440-212">That includes cores that are used for front ends or workers that aren't hosting any workloads.</span></span> <span data-ttu-id="4c440-213">In ASEv1 la dimensione massima predefinita di un ambiente del servizio app è di 55 host complessivi,</span><span class="sxs-lookup"><span data-stu-id="4c440-213">In ASEv1, the default maximum-scale size of an ASE is 55 total hosts.</span></span> <span data-ttu-id="4c440-214">inclusi ruoli di lavoro e front-end.</span><span class="sxs-lookup"><span data-stu-id="4c440-214">That includes workers and front ends.</span></span> <span data-ttu-id="4c440-215">Un vantaggio di ASEv1 è quello di poter essere distribuito in una rete virtuale classica e in una rete virtuale di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="4c440-215">One advantage to ASEv1 is that it can be deployed in a classic virtual network and a Resource Manager virtual network.</span></span> <span data-ttu-id="4c440-216">Per altre informazioni sull'ambiente del servizio app 1, vedere [Introduzione all'ambiente del servizio app 1][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="4c440-216">To learn more about ASEv1, see [App Service Environment v1 introduction][ASEv1Intro].</span></span>

<span data-ttu-id="4c440-217">Per creare un ambiente del servizio app 1 usando un modello di Resource Manager, vedere [Creare un ambiente del servizio app con bilanciamento del carico interno 1 con un modello di Resource Manager][ILBASEv1Template].</span><span class="sxs-lookup"><span data-stu-id="4c440-217">To create an ASEv1 by using a Resource Manager template, see [Create an ILB ASE v1 with a Resource Manager template][ILBASEv1Template].</span></span>


<!--Links-->
[quickstartilbasecreate]: http://azure.microsoft.com/documentation/templates/201-web-app-asev2-ilb-create
[quickstartasev2create]: http://azure.microsoft.com/documentation/templates/201-web-app-asev2-create
[quickstartconfiguressl]: http://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl
[quickstartwebapponasev2create]: http://azure.microsoft.com/documentation/templates/201-web-app-asp-app-on-asev2-create
[examplebase64encoding]: http://powershellscripts.blogspot.com/2007/02/base64-encode-file.html 
[configuringDefaultSSLCertificate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl/
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ILBASEv1Template]: ../../app-service-web/app-service-app-service-environment-create-ilb-ase-resourcemanager.md
