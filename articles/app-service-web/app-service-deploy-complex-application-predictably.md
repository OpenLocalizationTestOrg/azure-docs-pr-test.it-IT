---
title: Effettuare il provisioning di microservizi e distribuirli in modo prevedibile in Azure
description: "Informazioni su come effettuare il provisioning di un'applicazione costituita da microservizi e come distribuirla nel servizio app di Azure come un'unità singola e in modo prevedibile usando modelli di gruppo di risorse JSON e script di PowerShell."
services: app-service
documentationcenter: 
author: cephalin
manager: erikre
editor: jimbe
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/06/2016
ms.author: cephalin
ms.openlocfilehash: 844f42e61ba443a4b74a52f622113e87a7781913
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="provision-and-deploy-microservices-predictably-in-azure"></a><span data-ttu-id="bb2c3-103">Effettuare il provisioning di microservizi e distribuirli in modo prevedibile in Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-103">Provision and deploy microservices predictably in Azure</span></span>
<span data-ttu-id="bb2c3-104">Questa esercitazione illustra come effettuare il provisioning di un'applicazione costituita da [microservizi](https://en.wikipedia.org/wiki/Microservices) e come distribuirla nel [servizio app di Azure](/services/app-service/) come un'unità singola e in modo prevedibile usando modelli di gruppo di risorse JSON e script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-104">This tutorial shows how to provision and deploy an application composed of [microservices](https://en.wikipedia.org/wiki/Microservices) in [Azure App Service](/services/app-service/) as a single unit and in a predictable manner using JSON resource group templates and PowerShell scripting.</span></span> 

<span data-ttu-id="bb2c3-105">Quando si effettua il provisioning e si distribuiscono applicazioni su vasta scala costituite la microservizi altamente disaccoppiati, ripetibilità e prevedibilità sono fondamentali.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-105">When provisioning and deploying high-scale applications that are composed of highly decoupled microservices, repeatability and predictability are crucial to success.</span></span> <span data-ttu-id="bb2c3-106">[servizio app di Azure](/services/app-service/) è possibile creare microservizi che includono app Web, per dispositivi mobili, per le API e per la logica.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-106">[Azure App Service](/services/app-service/) enables you to create microservices that include web apps, mobile apps, API apps, and logic apps.</span></span> <span data-ttu-id="bb2c3-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) consente di gestire tutti i microservizi come unità, insieme alle dipendenze delle risorse, ad esempio le impostazioni di controllo del codice sorgente e del database.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) enables you to manage all the microservices as a unit, together with resource dependencies such as database and source control settings.</span></span> <span data-ttu-id="bb2c3-108">A questo punto è possibile distribuire l'applicazione usando modelli JSON e semplici script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-108">Now, you can also deploy such an application using JSON templates and simple PowerShell scripting.</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="what-you-will-do"></a><span data-ttu-id="bb2c3-109">Contenuto dell'esercitazione</span><span class="sxs-lookup"><span data-stu-id="bb2c3-109">What you will do</span></span>
<span data-ttu-id="bb2c3-110">In questa esercitazione si distribuirà un'applicazione che include:</span><span class="sxs-lookup"><span data-stu-id="bb2c3-110">In the tutorial, you will deploy an application that includes:</span></span>

* <span data-ttu-id="bb2c3-111">Due app Web (ovvero due microservizi)</span><span class="sxs-lookup"><span data-stu-id="bb2c3-111">Two web apps (i.e. two microservices)</span></span>
* <span data-ttu-id="bb2c3-112">Un database SQL di back-end</span><span class="sxs-lookup"><span data-stu-id="bb2c3-112">A backend SQL Database</span></span>
* <span data-ttu-id="bb2c3-113">Impostazioni dell'app, stringhe di connessione e controllo del codice sorgente</span><span class="sxs-lookup"><span data-stu-id="bb2c3-113">App settings, connection strings, and source control</span></span>
* <span data-ttu-id="bb2c3-114">Application Insights, avvisi, impostazioni di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="bb2c3-114">Application insights, alerts, autoscaling settings</span></span>

## <a name="tools-you-will-use"></a><span data-ttu-id="bb2c3-115">Strumenti da usare</span><span class="sxs-lookup"><span data-stu-id="bb2c3-115">Tools you will use</span></span>
<span data-ttu-id="bb2c3-116">In questa esercitazione si useranno gli strumenti seguenti.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-116">In this tutorial, you will use the following tools.</span></span> <span data-ttu-id="bb2c3-117">Non essendo una discussione completa sugli strumenti, verrà considerato solo lo scenario end-to-end, fornendo una breve introduzione per ogni strumento e dove è possibile trovare altre informazioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-117">Since it’s not comprehensive discussion on tools, I’m going to stick to the end-to-end scenario and just give you a brief intro to each, and where you can find more information on it.</span></span> 

### <a name="azure-resource-manager-templates-json"></a><span data-ttu-id="bb2c3-118">Modelli di Gestione risorse di Azure (JSON)</span><span class="sxs-lookup"><span data-stu-id="bb2c3-118">Azure Resource Manager templates (JSON)</span></span>
<span data-ttu-id="bb2c3-119">Ogni volta che si crea, ad esempio, un'app Web nel servizio app di Azure, Gestione risorse di Azure usa un modello JSON per creare l'intero gruppo di risorse con le risorse del componente.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-119">Every time you create a web app in Azure App Service, for example, Azure Resource Manager uses a JSON template to create the entire resource group with the component resources.</span></span> <span data-ttu-id="bb2c3-120">Un modello complesso disponibile in [Azure Marketplace](/marketplace), come l'app [WordPress scalabile](/marketplace/partners/wordpress/scalablewordpress/), può includere il database MySQL, account di archiviazione, il piano di servizio app, la stessa app Web, regole di avviso, impostazioni dell'app, impostazioni di scalabilità automatica e altro. Tutti questi modelli sono disponibili tramite PowerShell.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-120">A complex template from the [Azure Marketplace](/marketplace) like the [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) app can include the MySQL database, storage accounts, the App Service plan, the web app itself, alert rules, app settings, autoscale settings, and more, and all these templates are available to you through PowerShell.</span></span> <span data-ttu-id="bb2c3-121">Per informazioni su come scaricare e usare questi modelli, vedere [Uso di Azure PowerShell con Azure Resource Manager](../powershell-azure-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="bb2c3-121">For information on how to download and use these templates, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

<span data-ttu-id="bb2c3-122">Per altre informazioni sui modelli di Gestione risorse di Azure, vedere [Creazione di modelli di Gestione risorse di Azure](../azure-resource-manager/resource-group-authoring-templates.md)</span><span class="sxs-lookup"><span data-stu-id="bb2c3-122">For more information on the Azure Resource Manager templates, see [Authoring Azure Resource Manager Templates](../azure-resource-manager/resource-group-authoring-templates.md)</span></span>

### <a name="azure-sdk-26-for-visual-studio"></a><span data-ttu-id="bb2c3-123">Azure SDK 2.6 per Visual Studio</span><span class="sxs-lookup"><span data-stu-id="bb2c3-123">Azure SDK 2.6 for Visual Studio</span></span>
<span data-ttu-id="bb2c3-124">L'SDK più recente include miglioramenti a livello di supporto per i modelli di Gestione risorse di Azure nell'editor JSON.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-124">The newest SDK contains improvements to the Resource Manager template support in the JSON editor.</span></span> <span data-ttu-id="bb2c3-125">È possibile usarlo per creare rapidamente da zero un modello di gruppo di risorse o aprire un modello JSON esistente (ad esempio, un modello della raccolta scaricato) per modificarlo, popolare il file di parametri e distribuire il gruppo di risorse direttamente da una soluzione del gruppo di risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-125">You can use this to quickly create a resource group template from scratch or open an existing JSON template (such as a downloaded gallery template) for modification, populate the parameters file, and even deploy the resource group directly from an Azure Resource Group solution.</span></span>

<span data-ttu-id="bb2c3-126">Per altre informazioni, vedere [Azure SDK 2.6 per Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span><span class="sxs-lookup"><span data-stu-id="bb2c3-126">For more information, see [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span></span>

### <a name="azure-powershell-080-or-later"></a><span data-ttu-id="bb2c3-127">Azure PowerShell 0.8.0 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="bb2c3-127">Azure PowerShell 0.8.0 or later</span></span>
<span data-ttu-id="bb2c3-128">A partire dalla versione 0.8.0, l'installazione di Azure PowerShell include il modulo Gestione risorse di Azure, oltre al modulo Azure.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-128">Beginning in version 0.8.0, the Azure PowerShell installation includes the Azure Resource Manager module in addition to the Azure module.</span></span> <span data-ttu-id="bb2c3-129">Il nuovo modulo permette di creare script per la distribuzione di gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-129">This new module enables you to script the deployment of resource groups.</span></span>

<span data-ttu-id="bb2c3-130">Per altre informazioni, vedere [Uso di Azure PowerShell con Gestione risorse di Azure](../powershell-azure-resource-manager.md)</span><span class="sxs-lookup"><span data-stu-id="bb2c3-130">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md)</span></span>

### <a name="azure-resource-explorer"></a><span data-ttu-id="bb2c3-131">Esplora risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-131">Azure Resource Explorer</span></span>
<span data-ttu-id="bb2c3-132">Questo [strumento in anteprima](https://resources.azure.com) consente di esplorare le definizioni JSON di tutti i gruppi di risorse nella sottoscrizione e delle singole risorse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-132">This [preview tool](https://resources.azure.com) enables you to explore the JSON definitions of all the resource groups in your subscription and the individual resources.</span></span> <span data-ttu-id="bb2c3-133">Con lo strumento è possibile modificare le definizioni JSON di una risorsa, eliminare l'intera gerarchia di risorse e crearne di nuove.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-133">In the tool, you can edit the JSON definitions of a resource, delete an entire hierarchy of resources, and create new resources.</span></span>  <span data-ttu-id="bb2c3-134">Le informazioni immediatamente disponibili nello strumento sono molto utili per la modifica del modello, perché mostrano quali proprietà è necessario impostare per un tipo di risorsa particolare, i valori corretti e così via. È anche possibile creare un gruppo di risorse personalizzato nel [Portale di Azure](https://portal.azure.com/) e ispezionarne quindi le definizioni JSON nello strumento di esplorazione per creare un modello del gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-134">The information readily available in this tool is very helpful for template authoring because it shows you what properties you need to set for a particular type of resource, the correct values, etc. You can even create your resource group in the [Azure Portal](https://portal.azure.com/), then inspect its JSON definitions in the explorer tool to help you templatize the resource group.</span></span>

### <a name="deploy-to-azure-button"></a><span data-ttu-id="bb2c3-135">Pulsante Deploy to Azure per la distribuzione in Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-135">Deploy to Azure button</span></span>
<span data-ttu-id="bb2c3-136">Se si usa GitHub per il controllo del codice sorgente, è possibile inserire nel file README.MD un [pulsante Deploy to Azure](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) , che abilita un'interfaccia utente di distribuzione in Azure pronta all'uso.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-136">If you use GitHub for source control, you can put a [Deploy to Azure button](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) into your README.MD, which enables a turn-key deployment UI to Azure.</span></span> <span data-ttu-id="bb2c3-137">Mentre si può procedere in questo modo per qualsiasi app Web semplice, è possibile estendere questa opzione per abilitare la distribuzione di un intero gruppo di risorse inserendo un file azuredeploy.json nella radice del repository.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-137">While you can do this for any simple web app, you can extend this to enable deploying an entire resource group by putting an azuredeploy.json file in the repository root.</span></span> <span data-ttu-id="bb2c3-138">Questo file JSON, che contiene il modello di gruppo di risorse, verrà usato dal pulsante Deploy to Azure per creare il gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-138">This JSON file, which contains the resource group template, will be used by the Deploy to Azure button to create the resource group.</span></span> <span data-ttu-id="bb2c3-139">Per un esempio vedere [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) , l'app di esempio che verrà usata in questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-139">For an example, see the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) sample, which you will use in this tutorial.</span></span>

## <a name="get-the-sample-resource-group-template"></a><span data-ttu-id="bb2c3-140">Ottenere il modello del gruppo di risorse di esempio</span><span class="sxs-lookup"><span data-stu-id="bb2c3-140">Get the sample resource group template</span></span>
<span data-ttu-id="bb2c3-141">Ecco come scaricarlo.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-141">So now let’s get right to it.</span></span>

1. <span data-ttu-id="bb2c3-142">Passare all'esempio di servizio app [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) .</span><span class="sxs-lookup"><span data-stu-id="bb2c3-142">Navigate to the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) App Service sample.</span></span>
2. <span data-ttu-id="bb2c3-143">Nel file readme.md fare clic su **Deploy to Azure**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-143">In readme.md, click **Deploy to Azure**.</span></span>
3. <span data-ttu-id="bb2c3-144">Verrà aperto il sito [deploy-to-azure](https://deploy.azure.com) e verrà chiesto di immettere i parametri di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-144">You’re taken to the [deploy-to-azure](https://deploy.azure.com) site and asked to input deployment parameters.</span></span> <span data-ttu-id="bb2c3-145">Come si noterà, la maggior parte dei campi è già popolata con il nome del repository e alcune stringhe casuali.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-145">Notice that most of the fields are populated with the repository name and some random strings for you.</span></span> <span data-ttu-id="bb2c3-146">È possibile modificare tutti i campi, se lo si desidera, ma le uniche informazioni che è necessario immettere sono l'accesso amministrativo e la password di SQL Server, quindi fare clic su **Next**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-146">You can change all the fields if you want, but the only things you have to enter are the SQL Server administrative login and the password, then click **Next**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)
4. <span data-ttu-id="bb2c3-147">Fare quindi clic su **Deploy** per avviare il processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-147">Next, click **Deploy** to start the deployment process.</span></span> <span data-ttu-id="bb2c3-148">Dopo il completamento del processo, fare clic sul collegamento http://todoapp*XXXX*.azurewebsites.net per accedere all'applicazione distribuita.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-148">Once the process runs to completion, click the http://todoapp*XXXX*.azurewebsites.net link to browse the deployed application.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)
   
   <span data-ttu-id="bb2c3-149">La visualizzazione dell'interfaccia utente sarà un po' lenta alla prima esplorazione, perché le app sono in fase di avvio, ma l'applicazione è di sicuro completamente funzionante.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-149">The UI would be a little slow when you first browse to it because the apps are just starting up, but convince yourself that it’s a fully-functional application.</span></span>
5. <span data-ttu-id="bb2c3-150">Tornando alla pagina di distribuzione, fare clic sul collegamento **Gestisci** per visualizzare la nuova applicazione nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-150">Back in the Deploy page, click the **Manage** link to see the new application in the Azure Portal.</span></span>
6. <span data-ttu-id="bb2c3-151">Nell'elenco a discesa **Informazioni di base** fare clic sul collegamento del gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-151">In the **Essentials** dropdown, click the resource group link.</span></span> <span data-ttu-id="bb2c3-152">Notare anche che l'app Web è già connessa al repository GitHub in **Progetto esterno**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-152">Note also that the web app is already connected to the GitHub repository under **External Project**.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
7. <span data-ttu-id="bb2c3-153">Nel pannello del gruppo di risorse si noterà che il gruppo include già due app Web e un database SQL.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-153">In the resource group blade, note that there are already two web apps and one SQL Database in the resource group.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)

<span data-ttu-id="bb2c3-154">Tutto ciò che si è appena visto in pochi minuti è un'applicazione di microservizi completamente distribuita, con tutti i componenti, le dipendenze, le impostazioni, il database e la pubblicazione continua configurati da un'orchestrazione automatizzata in Gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-154">Everything that you just saw in a few short minutes is a fully deployed two-microservice application, with all the components, dependencies, settings, database, and continuous publishing, set up by an automated orchestration in Azure Resource Manager.</span></span> <span data-ttu-id="bb2c3-155">Tutte le operazioni sono state eseguite da due elementi:</span><span class="sxs-lookup"><span data-stu-id="bb2c3-155">All this was done by two things:</span></span>

* <span data-ttu-id="bb2c3-156">Il pulsante Deploy to Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-156">The Deploy to Azure button</span></span>
* <span data-ttu-id="bb2c3-157">Il file azuredeploy.json nella radice del repository</span><span class="sxs-lookup"><span data-stu-id="bb2c3-157">azuredeploy.json in the repo root</span></span>

<span data-ttu-id="bb2c3-158">È possibile distribuire la stessa applicazione decine, centinaia o migliaia di volte e avere ogni volta esattamente la stessa configurazione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-158">You can deploy this same application tens, hundreds, or thousands of times and have the exact same configuration every time.</span></span> <span data-ttu-id="bb2c3-159">La ripetibilità e la prevedibilità di questo approccio consentono di distribuire applicazioni su vasta scala in modo semplice e affidabile.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-159">The repeatability and the predictability of this approach enables you to deploy high-scale applications with ease and confidence.</span></span>

## <a name="examine-or-edit-azuredeployjson"></a><span data-ttu-id="bb2c3-160">Esaminare (o modificare) AZUREDEPLOY.JSON</span><span class="sxs-lookup"><span data-stu-id="bb2c3-160">Examine (or edit) AZUREDEPLOY.JSON</span></span>
<span data-ttu-id="bb2c3-161">A questo punto si esaminerà come è stato configurato il repository GitHub.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-161">Now let’s look at how the GitHub repository was set up.</span></span> <span data-ttu-id="bb2c3-162">Si userà l'editor JSON incluso in Azure .NET SDK, quindi se [Azure .NET SDK 2.6](/downloads/)non è già installato, installarlo ora.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-162">You will be using the JSON editor in the Azure .NET SDK, so if you haven’t already installed [Azure .NET SDK 2.6](/downloads/), do it now.</span></span>

1. <span data-ttu-id="bb2c3-163">Clonare il repository [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) con lo strumento git preferito.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-163">Clone the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repository using your favorite git tool.</span></span> <span data-ttu-id="bb2c3-164">Nella schermata seguente questa operazione viene eseguita con Team Explorer in Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-164">In the screenshot below, I’m doing this in the Team Explorer in Visual Studio 2013.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)
2. <span data-ttu-id="bb2c3-165">Dalla radice del repository aprire azuredeploy.json in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-165">From the repository root, open azuredeploy.json in Visual Studio.</span></span> <span data-ttu-id="bb2c3-166">Se il riquadro Struttura JSON non è visibile, è necessario installare Azure .NET SDK.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-166">If you don’t see the JSON Outline pane, you need to install Azure .NET SDK.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

<span data-ttu-id="bb2c3-167">Non verranno descritti tutti i dettagli del formato JSON, ma nella sezione [Altre risorse](#resources) sono disponibili collegamenti per l'apprendimento del linguaggio del modello di gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-167">I’m not going to describe every detail of the JSON format, but the [More Resources](#resources) section has links for learning the resource group template language.</span></span> <span data-ttu-id="bb2c3-168">In questa esercitazione verranno illustrate solo le interessanti funzionalità che possono semplificare le attività iniziali per creare un modello personalizzato per la distribuzione di app.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-168">Here, I’m just going to show you the interesting features that can help you get started in making your own custom template for app deployment.</span></span>

### <a name="parameters"></a><span data-ttu-id="bb2c3-169">Parametri</span><span class="sxs-lookup"><span data-stu-id="bb2c3-169">Parameters</span></span>
<span data-ttu-id="bb2c3-170">Nella sezione dei parametri è possibile osservare che la maggior parte di essi corrisponde all'input richiesto tramite il pulsante **Deploy to Azure** .</span><span class="sxs-lookup"><span data-stu-id="bb2c3-170">Take a look at the parameters section to see that most of these parameters are what the **Deploy to Azure** button prompts you to input.</span></span> <span data-ttu-id="bb2c3-171">Il sito aperto tramite il pulsante **Deploy to Azure** popola l'interfaccia utente di input usando i parametri definiti nel file azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-171">The site behind the **Deploy to Azure** button populates the input UI using the parameters defined in azuredeploy.json.</span></span> <span data-ttu-id="bb2c3-172">Questi parametri sono usati in tutte le definizioni di risorse, ad esempio nomi delle risorse, valori delle proprietà e così via.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-172">These parameters are used throughout the resource definitions, such as resource names, property values, etc.</span></span>

### <a name="resources"></a><span data-ttu-id="bb2c3-173">Risorse</span><span class="sxs-lookup"><span data-stu-id="bb2c3-173">Resources</span></span>
<span data-ttu-id="bb2c3-174">Come si può vedere, nel nodo delle risorse sono definite 4 risorse di primo livello, quali un'istanza di SQL Server, un piano di servizio app e due app Web.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-174">In the resources node, you can see that 4 top-level resources are defined, including a SQL Server instance, an App Service plan, and two web apps.</span></span> 

#### <a name="app-service-plan"></a><span data-ttu-id="bb2c3-175">Piano di servizio app</span><span class="sxs-lookup"><span data-stu-id="bb2c3-175">App Service plan</span></span>
<span data-ttu-id="bb2c3-176">Si inizierà con una semplice risorsa a livello di radice in JSON.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-176">Let’s start with a simple root-level resource in the JSON.</span></span> <span data-ttu-id="bb2c3-177">In Struttura JSON fare clic sul piano di servizio app denominato **[hostingPlanName]** per evidenziare il codice JSON corrispondente.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-177">In the JSON Outline, click the App Service plan named **[hostingPlanName]** to highlight the corresponding JSON code.</span></span> 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

<span data-ttu-id="bb2c3-178">Si noti che l'elemento `type` specifica la stringa per un piano di servizio app (che molto tempo fa era definito server farm), altri elementi e proprietà sono compilati con i parametri definiti nel file JSON e questa risorsa non include risorse annidate.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-178">Note that the `type` element specifies the string for an App Service plan (it was called a server farm a long, long time ago), and other elements and properties are filled in using the parameters defined in the JSON file, and this resource doesn’t have any nested resources.</span></span>

> [!NOTE]
> <span data-ttu-id="bb2c3-179">Notare anche che il valore `apiVersion` indica ad Azure quale versione dell'API REST usare con la definizione delle risorse JSON e può influire sulla formattazione della risorsa all'interno di `{}`.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-179">Note also that the value of `apiVersion` tells Azure which version of the REST API to use the JSON resource definition with, and it can affect how the resource should be formatted inside the `{}`.</span></span> 
> 
> 

#### <a name="sql-server"></a><span data-ttu-id="bb2c3-180">SQL Server</span><span class="sxs-lookup"><span data-stu-id="bb2c3-180">SQL Server</span></span>
<span data-ttu-id="bb2c3-181">Fare quindi clic sulla risorsa di SQL Server denominata **SQLServer** in Struttura JSON.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-181">Next, click on the SQL Server resource named **SQLServer** in the JSON Outline.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)

<span data-ttu-id="bb2c3-182">Nel codice JSON evidenziato notare quando indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="bb2c3-182">Note the following about the highlighted JSON code:</span></span>

* <span data-ttu-id="bb2c3-183">Per usare i parametri, assicurarsi che le risorse create siano denominate e configurate in modo coerente tra di esse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-183">The use of parameters ensures that the created resources are named and configured in a way that makes them consistent with one another.</span></span>
* <span data-ttu-id="bb2c3-184">La risorsa SQLServer ha due risorse annidate, ognuna con un valore diverso per `type`.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-184">The SQLServer resource has two nested resources, each has a different value for `type`.</span></span>
* <span data-ttu-id="bb2c3-185">Le risorse annidate in `“resources”: […]`, dove sono definite le regole di database e del firewall, includono un elemento `dependsOn` che specifica l'ID risorsa della risorsa SQLServer a livello di radice.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-185">The nested resources inside `“resources”: […]`, where the database and the firewall rules are defined, have a `dependsOn` element that specifies the resource ID of the root-level SQLServer resource.</span></span> <span data-ttu-id="bb2c3-186">Questo elemento indica a Gestione risorse di Azure che "prima di creare questa risorsa, deve esistere già l'altra risorsa e se l'altra risorsa è definita nel modello, dev'essere creata prima quella".</span><span class="sxs-lookup"><span data-stu-id="bb2c3-186">This tells Azure Resource Manager, “before you create this resource, that other resource must already exist; and if that other resource is defined in the template, then create that one first”.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="bb2c3-187">Per altre informazioni sull'uso della funzione `resourceId()`, vedere [Funzioni del modello di Azure Resource Manager](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span><span class="sxs-lookup"><span data-stu-id="bb2c3-187">For detailed information on how to use the `resourceId()` function, see [Azure Resource Manager Template Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span></span>
  > 
  > 
* <span data-ttu-id="bb2c3-188">L'elemento `dependsOn` indica a Gestione risorse di Azure quali risorse possono essere create in parallelo e quali devono essere create in sequenza.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-188">The effect of the `dependsOn` element is that Azure Resource Manager can know which resources can be created in parallel and which resources must be created sequentially.</span></span> 

#### <a name="web-app"></a><span data-ttu-id="bb2c3-189">App Web</span><span class="sxs-lookup"><span data-stu-id="bb2c3-189">Web app</span></span>
<span data-ttu-id="bb2c3-190">Si passerà ora alle app Web effettive, che sono più complesse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-190">Now, let’s move on to the actual web apps themselves, which are more complicated.</span></span> <span data-ttu-id="bb2c3-191">Fare clic sull'app Web [variables('apiSiteName')] in Struttura JSON per evidenziare il relativo codice JSON.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-191">Click the [variables(‘apiSiteName’)] web app in the JSON Outline to highlight its JSON code.</span></span> <span data-ttu-id="bb2c3-192">Come si noterà, diventa tutto molto più interessante.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-192">You’ll notice that things are getting much more interesting.</span></span> <span data-ttu-id="bb2c3-193">A questo scopo, le funzionalità verranno descritte una per una:</span><span class="sxs-lookup"><span data-stu-id="bb2c3-193">For this purpose, I’ll talk about the features one by one:</span></span>

##### <a name="root-resource"></a><span data-ttu-id="bb2c3-194">Risorsa radice</span><span class="sxs-lookup"><span data-stu-id="bb2c3-194">Root resource</span></span>
<span data-ttu-id="bb2c3-195">L'app Web dipende da due diverse risorse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-195">The web app depends on two different resources.</span></span> <span data-ttu-id="bb2c3-196">Ciò significa che Gestione risorse di Azure creerà l'app Web solo dopo la creazione del piano di servizio app e dell'istanza di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-196">This means that Azure Resource Manager will create the web app only after both the App Service plan and the SQL Server instance are created.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a><span data-ttu-id="bb2c3-197">Impostazioni app</span><span class="sxs-lookup"><span data-stu-id="bb2c3-197">App settings</span></span>
<span data-ttu-id="bb2c3-198">Le impostazioni dell'app vengono definite anche come risorsa annidata.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-198">The app settings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

<span data-ttu-id="bb2c3-199">Nell'elemento `properties` per `config/appsettings` sono disponibili due impostazioni app nel formato `“<name>” : “<value>”`.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-199">In the `properties` element for `config/appsettings`, you have two app settings in the format `“<name>” : “<value>”`.</span></span>

* <span data-ttu-id="bb2c3-200">`PROJECT` è un' [impostazione KUDU](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) che indica alla distribuzione di Azure quale progetto usare in una soluzione di Visual Studio con più progetti.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-200">`PROJECT` is a [KUDU setting](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) that tells Azure deployment which project to use in a multi-project Visual Studio solution.</span></span> <span data-ttu-id="bb2c3-201">Più avanti verrà illustrato come configurare il controllo del codice sorgente, ma poiché il codice di ToDoApp è una soluzione di Visual Studio con più progetti, questa impostazione è necessaria.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-201">I will show you later how source control is configured, but since the ToDoApp code is in a multi-project Visual Studio solution, we need this setting.</span></span>
* <span data-ttu-id="bb2c3-202">`clientUrl` è semplicemente un'impostazione app usata dal codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-202">`clientUrl` is simply an app setting that the application code uses.</span></span>

##### <a name="connection-strings"></a><span data-ttu-id="bb2c3-203">Stringhe di connessione</span><span class="sxs-lookup"><span data-stu-id="bb2c3-203">Connection strings</span></span>
<span data-ttu-id="bb2c3-204">Le stringhe di connessione vengono definite anche come risorsa annidata.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-204">The connection strings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

<span data-ttu-id="bb2c3-205">Nell'elemento `properties` per `config/connectionstrings` ogni stringa di connessione è definita anche come coppia nome/valore con il formato specifico `“<name>” : {“value”: “…”, “type”: “…”}`.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-205">In the `properties` element for `config/connectionstrings`, each connection string is also defined as a name:value pair, with the specific format of `“<name>” : {“value”: “…”, “type”: “…”}`.</span></span> <span data-ttu-id="bb2c3-206">Per l'elemento `type` i valori possibili sono `MySql`, `SQLServer`, `SQLAzure` e `Custom`.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-206">For the `type` element, possible values are `MySql`, `SQLServer`, `SQLAzure`, and `Custom`.</span></span>

> [!TIP]
> <span data-ttu-id="bb2c3-207">Per un elenco definitivo di tipi di stringhe di connessione, eseguire il comando seguente in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span><span class="sxs-lookup"><span data-stu-id="bb2c3-207">For a definitive list of the connection string types, run the following command in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span></span>
> 
> 

##### <a name="source-control"></a><span data-ttu-id="bb2c3-208">Controllo del codice sorgente</span><span class="sxs-lookup"><span data-stu-id="bb2c3-208">Source control</span></span>
<span data-ttu-id="bb2c3-209">Le impostazioni di controllo del codice sorgente vengono definite anche come risorsa annidata.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-209">The source control settings are also defined as a nested resource.</span></span> <span data-ttu-id="bb2c3-210">Gestione risorse di Azure usa questa risorsa per configurare la pubblicazione continua (vedere più avanti l'avvertenza per `IsManualIntegration` ) e anche per l'avvio automatico della distribuzione del codice applicazione durante l'elaborazione del file JSON.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-210">Azure Resource Manager uses this resource to configure continuous publishing (see caveat on `IsManualIntegration` later) and also to kick off the deployment of application code automatically during the processing of the JSON file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

<span data-ttu-id="bb2c3-211">`RepoUrl` e `branch` devono essere abbastanza intuitive e puntare al repository Git e al nome del ramo dal quale viene eseguita la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-211">`RepoUrl` and `branch` should be pretty intuitive and should point to the Git repository and the name of the branch to publish from.</span></span> <span data-ttu-id="bb2c3-212">Anche in questo caso, sono definite dai parametri di input.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-212">Again, these are defined by input parameters.</span></span> 

<span data-ttu-id="bb2c3-213">Si noti che nell'elemento `dependsOn`, oltre alla risorsa app Web stessa, `sourcecontrols/web` dipende anche da `config/appsettings` e `config/connectionstrings`.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-213">Note in the `dependsOn` element that, in addition to the web app resource itself, `sourcecontrols/web` also depends on `config/appsettings` and `config/connectionstrings`.</span></span> <span data-ttu-id="bb2c3-214">Il motivo è che dopo la configurazione di `sourcecontrols/web` , il processo di distribuzione di Azure tenta automaticamente di distribuire, compilare e avviare il codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-214">This is because once `sourcecontrols/web` is configured, the Azure deployment process will automatically attempt to deploy, build, and start the application code.</span></span> <span data-ttu-id="bb2c3-215">L'inserimento di questa dipendenza consente di assicurare l'accesso dell'applicazione alle impostazioni delle app e alle impostazioni di connessione necessarie prima di eseguire il codice dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-215">Therefore, inserting this dependency helps you make sure that the application has access to the required app settings and connection strings before the application code is run.</span></span> 

> [!NOTE]
> <span data-ttu-id="bb2c3-216">Notare anche che `IsManualIntegration` è impostata su `true`.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-216">Note also that `IsManualIntegration` is set to `true`.</span></span> <span data-ttu-id="bb2c3-217">Questa proprietà è necessaria nell'esercitazione, perché non si è effettivamente il proprietario del repository GitHub e quindi non è possibile concedere ad Azure l'autorizzazione per configurare la pubblicazione continua da [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp), ovvero</span><span class="sxs-lookup"><span data-stu-id="bb2c3-217">This property is necessary in this tutorial because you do not actually own the GitHub repository, and thus cannot actually grant permission to Azure to configure continuous publishing from [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (i.e.</span></span> <span data-ttu-id="bb2c3-218">eseguire il push degli aggiornamenti automatici del repository ad Azure.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-218">push automatic repository updates to Azure).</span></span> <span data-ttu-id="bb2c3-219">È possibile usare il valore predefinito `false` per il repository specificato solo se le credenziali GitHub del proprietario sono già state configurate nel [portale di Azure](https://portal.azure.com/) .</span><span class="sxs-lookup"><span data-stu-id="bb2c3-219">You can use the default value `false` for the specified repository only if you have configured the owner’s GitHub credentials in the [Azure portal](https://portal.azure.com/) before.</span></span> <span data-ttu-id="bb2c3-220">In altre parole, se in precedenza è stato impostato il controllo del codice sorgente in GitHub o BitBucket per qualsiasi app nel [Portale di Azure](https://portal.azure.com/) usando le proprie credenziali utente, Azure memorizzerà le credenziali e le userà ogni volta che in seguito si distribuirà un'app da GitHub o BitBucket.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-220">In other words, if you have set up source control to GitHub or BitBucket for any app in the [Azure Portal](https://portal.azure.com/) previously, using your user credentials, then Azure will remember the credentials and use them whenever you deploy any app from GitHub or BitBucket in the future.</span></span> <span data-ttu-id="bb2c3-221">Tuttavia, se questa operazione non è ancora stata eseguita, la distribuzione del modello JSON non riuscirà quando Gestione risorse di Azure tenta di configurare le impostazioni di controllo del codice sorgente dell'app Web, perché non può connettersi a GitHub o BitBucket con le credenziali del proprietario del repository.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-221">However, if you haven’t done this already, deployment of the JSON template will fail when Azure Resource Manager tries to configure the web app’s source control settings because it cannot log into GitHub or BitBucket with the repository owner’s credentials.</span></span>
> 
> 

## <a name="compare-the-json-template-with-deployed-resource-group"></a><span data-ttu-id="bb2c3-222">Confrontare il modello JSON con il gruppo di risorse distribuite</span><span class="sxs-lookup"><span data-stu-id="bb2c3-222">Compare the JSON template with deployed resource group</span></span>
<span data-ttu-id="bb2c3-223">Qui è possibile scorrere tutti i pannelli dell'app Web nel [portale di Azure](https://portal.azure.com/), ma esiste un altro strumento altrettanto, se non più, utile.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-223">Here, you can go through all the web app’s blades in the [Azure Portal](https://portal.azure.com/), but there’s another tool that’s just as useful, if not more.</span></span> <span data-ttu-id="bb2c3-224">Passare allo strumento di anteprima di [Esplora risorse di Azure](https://resources.azure.com) che fornisce una rappresentazione JSON di tutti i gruppi di risorse nelle proprie sottoscrizioni, così come esistono effettivamente nel back-end di Azure.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-224">Go to the [Azure Resource Explorer](https://resources.azure.com) preview tool, which gives you a JSON representation of all the resource groups in your subscriptions, as they actually exist in the Azure backend.</span></span> <span data-ttu-id="bb2c3-225">È anche possibile vedere in che modo la gerarchia JSON del gruppo di risorse in Azure corrisponde alla gerarchia nel file modello usato per crearla.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-225">You can also see how the resource group’s JSON hierarchy in Azure corresponds with the hierarchy in the template file that’s used to create it.</span></span>

<span data-ttu-id="bb2c3-226">Ad esempio, se si passa allo strumento [Esplora risorse di Azure](https://resources.azure.com) e si espandono i nodi nello strumento, si vedranno il gruppo di risorse e le risorse a livello di radice raccolte nei rispettivi tipi di risorse.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-226">For example, when I go to the [Azure Resource Explorer](https://resources.azure.com) tool and expand the nodes in the explorer, I can see the resource group and the root-level resources that are collected under their respective resource types.</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

<span data-ttu-id="bb2c3-227">Se si esegue il drill-down fino a un'app Web, dovrebbero essere visibili i dettagli di configurazione dell'app Web analoghi alla schermata seguente:</span><span class="sxs-lookup"><span data-stu-id="bb2c3-227">If you drill down to a web app, you should be able to see web app configuration details similar to the below screenshot:</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

<span data-ttu-id="bb2c3-228">Anche in questo caso, le risorse annidate avranno una gerarchia molto simile a quelle nel file modello JSON e saranno visualizzate impostazioni app, stringhe di connessione e così via, adeguatamente riflesse nel riquadro JSON.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-228">Again, the nested resources should have a hierarchy very similar to those in your JSON template file, and you should see the app settings, connection strings, etc., properly reflected in the JSON pane.</span></span> <span data-ttu-id="bb2c3-229">L'assenza di impostazioni a questo punto può indicare un problema con il file JSON e può contribuire a risolvere i problemi del file modello JSON.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-229">The absence of settings here may indicate an issue with your JSON file and can help you troubleshoot your JSON template file.</span></span>

## <a name="deploy-the-resource-group-template-yourself"></a><span data-ttu-id="bb2c3-230">Distribuire manualmente il modello di gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="bb2c3-230">Deploy the resource group template yourself</span></span>
<span data-ttu-id="bb2c3-231">Il pulsante **Deploy to Azure** è molto utile, ma consente di distribuire il modello di gruppo di risorse in azuredeploy.json solo se è già stato effettuato il push di azuredeploy.json a GitHub.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-231">The **Deploy to Azure** button is great, but it allows you to deploy the resource group template in azuredeploy.json only if you have already pushed azuredeploy.json to GitHub.</span></span> <span data-ttu-id="bb2c3-232">Azure .NET SDK fornisce anche gli strumenti per la distribuzione di qualsiasi file modello JSON direttamente dal computer locale.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-232">The Azure .NET SDK also provides the tools for you to deploy any JSON template file directly from your local machine.</span></span> <span data-ttu-id="bb2c3-233">A questo scopo, eseguire la procedura seguente.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-233">To do this, follow the steps below:</span></span>

1. <span data-ttu-id="bb2c3-234">In Visual Studio fare clic su **File** > **Nuovo** > **Progetto**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-234">In Visual Studio, click **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="bb2c3-235">Fare clic su **Visual C#** > **Cloud** > **Gruppo di risorse di Azure**, quindi su **OK**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-235">Click **Visual C#** > **Cloud** > **Azure Resource Group**, then click **OK**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)
3. <span data-ttu-id="bb2c3-236">In **Seleziona modello di Azure** selezionare **Modello vuoto** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-236">In **Select Azure Template**, select **Blank Template** and click **OK**.</span></span>
4. <span data-ttu-id="bb2c3-237">Trascinare azuredeploy.json nella cartella **Modello** del nuovo progetto.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-237">Drag azuredeploy.json into the **Template** folder of your new project.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)
5. <span data-ttu-id="bb2c3-238">Da Esplora soluzioni aprire il file azuredeploy.json copiato.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-238">From Solution Explorer, open the copied azuredeploy.json.</span></span>
6. <span data-ttu-id="bb2c3-239">Ai fini di questa dimostrazione, si aggiungeranno al file JSON alcune risorse standard di Application Insights, facendo clic su **Aggiungi risorsa**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-239">Just for the sake of the demonstration, let’s add some standard Application Insight resources to our JSON file, by clicking **Add Resource**.</span></span> <span data-ttu-id="bb2c3-240">Se si è interessati solo alla distribuzione del file JSON, ignorare i passaggi relativi alla distribuzione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-240">If you’re just interested in deploying the JSON file, skip to the deploy steps.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)
7. <span data-ttu-id="bb2c3-241">Selezionare **Application Insights per app Web**, assicurarsi che siano selezionati un piano di servizio app esistente e un'app Web e quindi fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-241">Select **Application Insights for Web Apps**, then make sure an existing App Service plan and web app is selected, and then click **Add**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)
   
   <span data-ttu-id="bb2c3-242">A questo punto saranno visualizzate diverse nuove risorse che, a seconda della risorsa e delle operazioni che esegue, presentano dipendenze dal piano di servizio app o dall'app Web.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-242">You’ll now be able to see several new resources that, depending on the resource and what it does, have dependencies on either the App Service plan or the web app.</span></span> <span data-ttu-id="bb2c3-243">Queste risorse non sono abilitate dalla relativa definizione esistente, perciò si procederà alla modifica.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-243">These resources are not enabled by their existing definition and you’re going to change that.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
8. <span data-ttu-id="bb2c3-244">In Struttura JSON fare clic su **appInsights AutoScale** per evidenziare il relativo codice JSON.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-244">In the JSON Outline, click **appInsights AutoScale** to highlight its JSON code.</span></span> <span data-ttu-id="bb2c3-245">Questa è l'impostazione della scalabilità per il piano di servizio app.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-245">This is the scaling setting for your App Service plan.</span></span>
9. <span data-ttu-id="bb2c3-246">Nel codice JSON evidenziato individuare le proprietà `location` e `enabled` e impostarle come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-246">In the highlighted JSON code, locate the `location` and `enabled` properties and set them as shown below.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)
10. <span data-ttu-id="bb2c3-247">In Struttura JSON fare clic su **CPUHigh appInsights** per evidenziare il relativo codice JSON.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-247">In the JSON Outline, click **CPUHigh appInsights** to highlight its JSON code.</span></span> <span data-ttu-id="bb2c3-248">Si tratta di un avviso.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-248">This is an alert.</span></span>
11. <span data-ttu-id="bb2c3-249">Individuare le proprietà `location` e `isEnabled` e impostarle come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-249">Locate the `location` and `isEnabled` properties and set them as shown below.</span></span> <span data-ttu-id="bb2c3-250">Eseguire la stessa operazione per gli altri tre avvisi (lampadine viola).</span><span class="sxs-lookup"><span data-stu-id="bb2c3-250">Do the same for the other three alerts (purple bulbs).</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)
12. <span data-ttu-id="bb2c3-251">A questo punto si è pronti per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-251">You’re now ready to deploy.</span></span> <span data-ttu-id="bb2c3-252">Fare quindi clic con il pulsante destro del mouse sul progetto e scegliere **Deploy** > **Nuova distribuzione**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-252">Right-click the project and select **Deploy** > **New Deployment**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)
13. <span data-ttu-id="bb2c3-253">Accedere al proprio account Azure, se non si è già connessi.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-253">Log into your Azure account if you haven’t already done so.</span></span>
14. <span data-ttu-id="bb2c3-254">Selezionare un gruppo di risorse esistente nella sottoscrizione o creare un nuovo gruppo, selezionare **azuredeploy.json**, quindi fare clic su **Modifica parametri**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-254">Select an existing resource group in your subscription or create a new one, select **azuredeploy.json**, and then click **Edit Parameters**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)
    
    <span data-ttu-id="bb2c3-255">A questo punto si sarà in grado di modificare tutti i parametri definiti nel file modello in una tabella.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-255">You’ll now be able to edit all the parameters defined in the template file in a nice table.</span></span> <span data-ttu-id="bb2c3-256">I parametri che definiscono i valori predefiniti avranno già i relativi valori predefiniti e i parametri che definiscono un elenco di valori consentiti saranno visualizzati come elenchi a discesa.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-256">Parameters that define defaults will already have their default values, and parameters that define a list of allowed values will be shown as dropdowns.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)
15. <span data-ttu-id="bb2c3-257">Compilare tutti i parametri vuoti e usare l' [indirizzo del repository GitHub per ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-257">Fill in all the empty parameters, and use the [GitHub repo address for ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span></span> <span data-ttu-id="bb2c3-258">Fare quindi clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-258">Then, click **Save**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)
    
    > [!NOTE]
    > <span data-ttu-id="bb2c3-259">La scalabilità automatica è una funzionalità offerta nel livello **Standard** o superiore e gli avvisi a livello di piano sono funzionalità offerte nel livello **Basic** o superiore. Sarà necessario impostare il parametro **sku** su **Standard** o **Premium** per visualizzare tutte le nuove risorse di Application Insights evidenziate.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-259">Autoscaling is a feature offered in **Standard** tier or higher, and plan-level alerts are features offered in **Basic** tier or higher, you’ll need to set the **sku** parameter to **Standard** or **Premium** in order to see all your new App Insights resources light up.</span></span>
    > 
    > 
16. <span data-ttu-id="bb2c3-260">Fare clic su **Distribuisci**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-260">Click **Deploy**.</span></span> <span data-ttu-id="bb2c3-261">Se è stata selezionata l'opzione **Salva password**, la password verrà salvata nel file di parametri **come testo normale**.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-261">If you selected **Save passwords**, the password will be saved in the parameter file **in plain text**.</span></span> <span data-ttu-id="bb2c3-262">In caso contrario, verrà richiesto di immettere la password del database durante il processo di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-262">Otherwise, you’ll be asked to input the database password during the deployment process.</span></span>

<span data-ttu-id="bb2c3-263">La procedura è terminata.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-263">That’s it!</span></span> <span data-ttu-id="bb2c3-264">A questo punto basta passare al [portale di Azure](https://portal.azure.com/) e allo strumento [Esplora risorse di Azure](https://resources.azure.com) per visualizzare i nuovi avvisi e le impostazioni di scalabilità automatica aggiunte all'applicazione JSON distribuita.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-264">Now you just need to go to the [Azure Portal](https://portal.azure.com/) and the [Azure Resource Explorer](https://resources.azure.com) tool to see the new alerts and autoscale settings added to your JSON deployed application.</span></span>

<span data-ttu-id="bb2c3-265">I passaggi in questa sezione hanno eseguito principalmente le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="bb2c3-265">Your steps in this section mainly accomplished the following:</span></span>

1. <span data-ttu-id="bb2c3-266">Preparazione del file modello</span><span class="sxs-lookup"><span data-stu-id="bb2c3-266">Prepared the template file</span></span>
2. <span data-ttu-id="bb2c3-267">Creazione di un file di parametri da usare con il file modello</span><span class="sxs-lookup"><span data-stu-id="bb2c3-267">Created a parameter file to go with the template file</span></span>
3. <span data-ttu-id="bb2c3-268">Distribuzione del file modello con il file di parametri</span><span class="sxs-lookup"><span data-stu-id="bb2c3-268">Deployed the template file with the parameter file</span></span>

<span data-ttu-id="bb2c3-269">L'ultimo passaggio viene eseguito facilmente da un cmdlet di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-269">The last step is easily done by a PowerShell cmdlet.</span></span> <span data-ttu-id="bb2c3-270">Per vedere le operazioni eseguite da Visual Studio durante la distribuzione dell'applicazione, aprire Scripts\Deploy-AzureResourceGroup.ps1.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-270">To see what Visual Studio did when it deployed your application, open Scripts\Deploy-AzureResourceGroup.ps1.</span></span> <span data-ttu-id="bb2c3-271">In questo file è presente una quantità elevata di codice, ma verrà evidenziato solo tutto il codice pertinente e necessario per la distribuzione del file modello con il file di parametri.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-271">There’s a lot of code there, but I’m just going to highlight all the pertinent code you need to deploy the template file with the parameter file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

<span data-ttu-id="bb2c3-272">L'ultimo cmdlet, `New-AzureResourceGroup`, è quello che esegue effettivamente l'azione.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-272">The last cmdlet, `New-AzureResourceGroup`, is the one that actually performs the action.</span></span> <span data-ttu-id="bb2c3-273">Tutto questo serve a dimostrare che con strumenti appropriati, distribuire l'applicazione cloud in modo prevedibile è relativamente semplice.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-273">All this should demonstrate to you that, with the help of tooling, it is relatively straightforward to deploy your cloud application predictably.</span></span> <span data-ttu-id="bb2c3-274">Ogni volta che si esegue il cmdlet sullo stesso modello con lo stesso file di parametri si otterrà lo stesso risultato.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-274">Every time you run the cmdlet on the same template with the same parameter file, you’re going to get the same result.</span></span>

## <a name="summary"></a><span data-ttu-id="bb2c3-275">Riepilogo</span><span class="sxs-lookup"><span data-stu-id="bb2c3-275">Summary</span></span>
<span data-ttu-id="bb2c3-276">In DevOps la ripetibilità e la prevedibilità sono fondamentali per la riuscita della distribuzione di un'applicazione su vasta scala costituita da microservizi.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-276">In DevOps, repeatability and predictability are keys to any successful deployment of a high-scale application composed of microservices.</span></span> <span data-ttu-id="bb2c3-277">In questa esercitazione è stata distribuita in Azure un'applicazione con due microservizi come singolo gruppo di risorse usando il modello di Gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-277">In this tutorial, you have deployed a two-microservice application to Azure as a single resource group using the Azure Resource Manager template.</span></span> <span data-ttu-id="bb2c3-278">È auspicabile che si siano acquisite le conoscenze necessarie per iniziare a convertire l'applicazione in Azure in un modello, in modo da poterne effettuare il provisioning e distribuirla in modo prevedibile.</span><span class="sxs-lookup"><span data-stu-id="bb2c3-278">Hopefully, it has given you the knowledge you need in order to start converting your application in Azure into a template and can provision and deploy it predictably.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="bb2c3-279">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="bb2c3-279">Next Steps</span></span>
<span data-ttu-id="bb2c3-280">Scoprire come [applicare facilmente le metodologie Agile e la pubblicazione continua dell'applicazione di microservizi](app-service-agile-software-development.md) e le tecniche di distribuzione avanzata come [distribuzione di versioni di anteprima](app-service-web-test-in-production-controlled-test-flight.md).</span><span class="sxs-lookup"><span data-stu-id="bb2c3-280">Find out how to [apply agile methodologies and continuously publish your microservices application with ease](app-service-agile-software-development.md) and advanced deployment techniques like [flighting deployment](app-service-web-test-in-production-controlled-test-flight.md) easily.</span></span>

<a name="resources"></a>

## <a name="more-resources"></a><span data-ttu-id="bb2c3-281">Altre risorse</span><span class="sxs-lookup"><span data-stu-id="bb2c3-281">More resources</span></span>
* [<span data-ttu-id="bb2c3-282">Linguaggio del modello di Gestione risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-282">Azure Resource Manager Template Language</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="bb2c3-283">Creazione di modelli di Gestione risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-283">Authoring Azure Resource Manager Templates</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="bb2c3-284">Funzioni del modello di Gestione risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-284">Azure Resource Manager Template Functions</span></span>](../azure-resource-manager/resource-group-template-functions.md)
* [<span data-ttu-id="bb2c3-285">Distribuire un'applicazione con un modello di Gestione risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-285">Deploy an application with Azure Resource Manager template</span></span>](../azure-resource-manager/resource-group-template-deploy.md)
* [<span data-ttu-id="bb2c3-286">Uso di Azure PowerShell con Gestione risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-286">Using Azure PowerShell with Azure Resource Manager</span></span>](../azure-resource-manager/powershell-azure-resource-manager.md)
* [<span data-ttu-id="bb2c3-287">Risoluzione dei problemi relativi alle distribuzioni di gruppi di risorse in Azure</span><span class="sxs-lookup"><span data-stu-id="bb2c3-287">Troubleshooting Resource Group Deployments in Azure</span></span>](../azure-resource-manager/resource-manager-common-deployment-errors.md)

