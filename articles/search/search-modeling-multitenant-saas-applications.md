---
title: Modellazione multi-tenancy in Ricerca di Azure | Documentazione Microsoft
description: Informazioni sui modelli di progettazione comuni per le applicazioni SaaS multi-tenant quando si usa Ricerca di Azure.
services: search
manager: jhubbard
author: ashmaka
documentationcenter: 
ms.assetid: 72e9696a-553b-47dc-9e05-a82db0ebf094
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 10/26/2016
ms.author: ashmaka
ms.openlocfilehash: fd1b0c7cc8210d27fdc500bf4e5641bedfe93cff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="design-patterns-for-multitenant-saas-applications-and-azure-search"></a><span data-ttu-id="0115e-103">Modelli di progettazione per le applicazioni SaaS multi-tenant e Ricerca di Azure</span><span class="sxs-lookup"><span data-stu-id="0115e-103">Design patterns for multitenant SaaS applications and Azure Search</span></span>
<span data-ttu-id="0115e-104">Un'applicazione multi-tenant è un'applicazione che fornisce gli stessi servizi e funzionalità a un numero qualsiasi di tenant che non possono vedere o condividere i dati di nessun altro tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-104">A multitenant application is one that provides the same services and capabilities to any number of tenants who cannot see or share the data of any other tenant.</span></span> <span data-ttu-id="0115e-105">Questo documento illustra le strategie di isolamento dei tenant per le applicazioni multi-tenant compilate con Ricerca di Azure.</span><span class="sxs-lookup"><span data-stu-id="0115e-105">This document discusses tenant isolation strategies for multitenant applications built with Azure Search.</span></span>

## <a name="azure-search-concepts"></a><span data-ttu-id="0115e-106">Concetti di Ricerca di Azure</span><span class="sxs-lookup"><span data-stu-id="0115e-106">Azure Search concepts</span></span>
<span data-ttu-id="0115e-107">Come soluzione di ricerca come servizio, Ricerca di Azure consente agli sviluppatori di aggiungere esperienze di ricerca avanzate alle applicazioni, senza dover gestire un'infrastruttura o diventare esperti di ricerca.</span><span class="sxs-lookup"><span data-stu-id="0115e-107">As a search-as-a-service solution, Azure Search allows developers to add rich search experiences to applications without managing any infrastructure or becoming an expert in search.</span></span> <span data-ttu-id="0115e-108">I dati vengano caricati nel servizio e quindi archiviati nel cloud.</span><span class="sxs-lookup"><span data-stu-id="0115e-108">Data is uploaded to the service and then stored in the cloud.</span></span> <span data-ttu-id="0115e-109">Tramite semplici richieste all'API di Ricerca di Azure, i dati possono essere modificati e ricercati.</span><span class="sxs-lookup"><span data-stu-id="0115e-109">Using simple requests to the Azure Search API, the data can then be modified and searched.</span></span> <span data-ttu-id="0115e-110">Una panoramica del servizio è riportata in [questo articolo](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="0115e-110">An overview of the service can be found in [this article](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="0115e-111">Prima di esaminare i modelli di progettazione, è importante comprendere alcuni concetti di Ricerca di Azure.</span><span class="sxs-lookup"><span data-stu-id="0115e-111">Before discussing design patterns, it is important to understand some concepts in Azure Search.</span></span>

### <a name="search-services-indexes-fields-and-documents"></a><span data-ttu-id="0115e-112">Servizi di ricerca, indici, campi e documenti</span><span class="sxs-lookup"><span data-stu-id="0115e-112">Search services, indexes, fields, and documents</span></span>
<span data-ttu-id="0115e-113">Quando si usa Ricerca di Azure, si sottoscrive un *servizio di ricerca*.</span><span class="sxs-lookup"><span data-stu-id="0115e-113">When using Azure Search, one subscribes to a *search service*.</span></span> <span data-ttu-id="0115e-114">Quando i dati vengono caricati in Ricerca di Azure, vengono archiviati in un *indice* all'interno del servizio di ricerca.</span><span class="sxs-lookup"><span data-stu-id="0115e-114">As data is uploaded to Azure Search, it is stored in an *index* within the search service.</span></span> <span data-ttu-id="0115e-115">In un solo servizio possono essere presenti molti indici.</span><span class="sxs-lookup"><span data-stu-id="0115e-115">There can be a number of indexes within a single service.</span></span> <span data-ttu-id="0115e-116">Facendo riferimento ai familiari concetti relativi ai database, il servizio di ricerca può essere paragonato a un database, mentre gli indici all'interno di un servizio possono essere paragonati alle tabelle di un database.</span><span class="sxs-lookup"><span data-stu-id="0115e-116">To use the familiar concepts of databases, the search service can be likened to a database while the indexes within a service can be likened to tables within a database.</span></span>

<span data-ttu-id="0115e-117">Ogni indice all'interno di un servizio di ricerca ha un proprio schema, definito da un certo numero di *campi*personalizzabili.</span><span class="sxs-lookup"><span data-stu-id="0115e-117">Each index within a search service has its own schema, which is defined by a number of customizable *fields*.</span></span> <span data-ttu-id="0115e-118">I dati vengono aggiunti a un indice di Ricerca di Azure sotto forma di singoli *documenti*.</span><span class="sxs-lookup"><span data-stu-id="0115e-118">Data is added to an Azure Search index in the form of individual *documents*.</span></span> <span data-ttu-id="0115e-119">Ogni documento deve essere caricato in un indice specifico e deve adattarsi allo schema di tale indice.</span><span class="sxs-lookup"><span data-stu-id="0115e-119">Each document must be uploaded to a particular index and must fit that index's schema.</span></span> <span data-ttu-id="0115e-120">Quando si eseguono ricerche di dati tramite Ricerca di Azure, vengono eseguite query di ricerca full-text su un particolare indice.</span><span class="sxs-lookup"><span data-stu-id="0115e-120">When searching data using Azure Search, the full-text search queries are issued against a particular index.</span></span>  <span data-ttu-id="0115e-121">Facendo riferimento ai database, i campi possono essere paragonati alle colonne e i documenti alle righe di una tabella del database.</span><span class="sxs-lookup"><span data-stu-id="0115e-121">To compare these concepts to those of a database, fields can be likened to columns in a table and documents can be likened to rows.</span></span>

### <a name="scalability"></a><span data-ttu-id="0115e-122">Scalabilità</span><span class="sxs-lookup"><span data-stu-id="0115e-122">Scalability</span></span>
<span data-ttu-id="0115e-123">Qualsiasi servizio di Ricerca di Azure nel [piano tariffario](https://azure.microsoft.com/pricing/details/search/) Standard può essere ridimensionato in due sensi: archiviazione e disponibilità.</span><span class="sxs-lookup"><span data-stu-id="0115e-123">Any Azure Search service in the Standard [pricing tier](https://azure.microsoft.com/pricing/details/search/) can scale in two dimensions: storage and availability.</span></span>

* <span data-ttu-id="0115e-124">*partizioni* per aumentare lo spazio di archiviazione di un servizio di ricerca.</span><span class="sxs-lookup"><span data-stu-id="0115e-124">*Partitions* can be added to increase the storage of a search service.</span></span>
* <span data-ttu-id="0115e-125">*repliche* a un servizio per aumentare la velocità effettiva delle richieste che un servizio di ricerca può gestire.</span><span class="sxs-lookup"><span data-stu-id="0115e-125">*Replicas* can be added to a service to increase the throughput of requests that a search service can handle.</span></span>

<span data-ttu-id="0115e-126">Aggiungendo e rimuovendo partizioni e repliche si consentirà alla capacità del servizio di ricerca di crescere in base alla quantità di dati e al traffico richiesti dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="0115e-126">Adding and removing partitions and replicas at will allow the capacity of the search service to grow with the amount of data and traffic the application demands.</span></span> <span data-ttu-id="0115e-127">Affinché un servizio di ricerca rispetti un [contratto di servizio](https://azure.microsoft.com/support/legal/sla/search/v1_0/)di lettura, sono necessarie due repliche.</span><span class="sxs-lookup"><span data-stu-id="0115e-127">In order for a search service to achieve a read [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires two replicas.</span></span> <span data-ttu-id="0115e-128">Affinché un servizio rispetti un [contratto di servizio](https://azure.microsoft.com/support/legal/sla/search/v1_0/)di lettura-scrittura, sono necessarie tre repliche.</span><span class="sxs-lookup"><span data-stu-id="0115e-128">In order for a service to achieve a read-write [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires three replicas.</span></span>

### <a name="service-and-index-limits-in-azure-search"></a><span data-ttu-id="0115e-129">Limiti dei servizi e degli indici in Ricerca di Azure</span><span class="sxs-lookup"><span data-stu-id="0115e-129">Service and index limits in Azure Search</span></span>
<span data-ttu-id="0115e-130">Esistono vari [piani tariffari](https://azure.microsoft.com/pricing/details/search/) per Ricerca di Azure, ciascuno dei quali presenta [quote e limiti](search-limits-quotas-capacity.md) differenti.</span><span class="sxs-lookup"><span data-stu-id="0115e-130">There are a few different [pricing tiers](https://azure.microsoft.com/pricing/details/search/) in Azure Search, each of the tiers has different [limits and quotas](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="0115e-131">Alcuni di questi limiti sono a livello di servizio, altri sono a livello di indice e altri ancora a livello di partizione.</span><span class="sxs-lookup"><span data-stu-id="0115e-131">Some of these limits are at the service-level, some are at the index-level, and some are at the partition-level.</span></span>

|  | <span data-ttu-id="0115e-132">Basic</span><span class="sxs-lookup"><span data-stu-id="0115e-132">Basic</span></span> | <span data-ttu-id="0115e-133">Standard1</span><span class="sxs-lookup"><span data-stu-id="0115e-133">Standard1</span></span> | <span data-ttu-id="0115e-134">Standard2</span><span class="sxs-lookup"><span data-stu-id="0115e-134">Standard2</span></span> | <span data-ttu-id="0115e-135">Standard3</span><span class="sxs-lookup"><span data-stu-id="0115e-135">Standard3</span></span> | <span data-ttu-id="0115e-136">Standard3 HD</span><span class="sxs-lookup"><span data-stu-id="0115e-136">Standard3 HD</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="0115e-137">Massimo numero di repliche per servizio</span><span class="sxs-lookup"><span data-stu-id="0115e-137">Maximum Replicas per Service</span></span> |<span data-ttu-id="0115e-138">3</span><span class="sxs-lookup"><span data-stu-id="0115e-138">3</span></span> |<span data-ttu-id="0115e-139">12</span><span class="sxs-lookup"><span data-stu-id="0115e-139">12</span></span> |<span data-ttu-id="0115e-140">12</span><span class="sxs-lookup"><span data-stu-id="0115e-140">12</span></span> |<span data-ttu-id="0115e-141">12</span><span class="sxs-lookup"><span data-stu-id="0115e-141">12</span></span> |<span data-ttu-id="0115e-142">12</span><span class="sxs-lookup"><span data-stu-id="0115e-142">12</span></span> |
| <span data-ttu-id="0115e-143">Massimo numero di partizioni per servizio</span><span class="sxs-lookup"><span data-stu-id="0115e-143">Maximum Partitions per Service</span></span> |<span data-ttu-id="0115e-144">1</span><span class="sxs-lookup"><span data-stu-id="0115e-144">1</span></span> |<span data-ttu-id="0115e-145">12</span><span class="sxs-lookup"><span data-stu-id="0115e-145">12</span></span> |<span data-ttu-id="0115e-146">12</span><span class="sxs-lookup"><span data-stu-id="0115e-146">12</span></span> |<span data-ttu-id="0115e-147">12</span><span class="sxs-lookup"><span data-stu-id="0115e-147">12</span></span> |<span data-ttu-id="0115e-148">1</span><span class="sxs-lookup"><span data-stu-id="0115e-148">1</span></span> |
| <span data-ttu-id="0115e-149">Massimo numero di unità di ricerca (repliche * partizioni) per servizio</span><span class="sxs-lookup"><span data-stu-id="0115e-149">Maximum Search Units (Replicas*Partitions) per Service</span></span> |<span data-ttu-id="0115e-150">3</span><span class="sxs-lookup"><span data-stu-id="0115e-150">3</span></span> |<span data-ttu-id="0115e-151">36</span><span class="sxs-lookup"><span data-stu-id="0115e-151">36</span></span> |<span data-ttu-id="0115e-152">36</span><span class="sxs-lookup"><span data-stu-id="0115e-152">36</span></span> |<span data-ttu-id="0115e-153">36</span><span class="sxs-lookup"><span data-stu-id="0115e-153">36</span></span> |<span data-ttu-id="0115e-154">36 (max 3 partizioni)</span><span class="sxs-lookup"><span data-stu-id="0115e-154">36 (max 3 partitions)</span></span> |
| <span data-ttu-id="0115e-155">Massimo numero di documenti per servizio</span><span class="sxs-lookup"><span data-stu-id="0115e-155">Maximum Documents per Service</span></span> |<span data-ttu-id="0115e-156">1 milione</span><span class="sxs-lookup"><span data-stu-id="0115e-156">1 million</span></span> |<span data-ttu-id="0115e-157">180 milioni</span><span class="sxs-lookup"><span data-stu-id="0115e-157">180 million</span></span> |<span data-ttu-id="0115e-158">720 milioni</span><span class="sxs-lookup"><span data-stu-id="0115e-158">720 million</span></span> |<span data-ttu-id="0115e-159">1,4 miliardi</span><span class="sxs-lookup"><span data-stu-id="0115e-159">1.4 billion</span></span> |<span data-ttu-id="0115e-160">600 milioni</span><span class="sxs-lookup"><span data-stu-id="0115e-160">600 million</span></span> |
| <span data-ttu-id="0115e-161">Massimo spazio di archiviazione per servizio</span><span class="sxs-lookup"><span data-stu-id="0115e-161">Maximum Storage per Service</span></span> |<span data-ttu-id="0115e-162">2 GB</span><span class="sxs-lookup"><span data-stu-id="0115e-162">2 GB</span></span> |<span data-ttu-id="0115e-163">300 GB</span><span class="sxs-lookup"><span data-stu-id="0115e-163">300 GB</span></span> |<span data-ttu-id="0115e-164">1,2 TB</span><span class="sxs-lookup"><span data-stu-id="0115e-164">1.2 TB</span></span> |<span data-ttu-id="0115e-165">2,4 TB</span><span class="sxs-lookup"><span data-stu-id="0115e-165">2.4 TB</span></span> |<span data-ttu-id="0115e-166">600 GB</span><span class="sxs-lookup"><span data-stu-id="0115e-166">600 GB</span></span> |
| <span data-ttu-id="0115e-167">Massimo numero di documenti per partizione</span><span class="sxs-lookup"><span data-stu-id="0115e-167">Maximum Documents per Partition</span></span> |<span data-ttu-id="0115e-168">1 milione</span><span class="sxs-lookup"><span data-stu-id="0115e-168">1 million</span></span> |<span data-ttu-id="0115e-169">15 milioni</span><span class="sxs-lookup"><span data-stu-id="0115e-169">15 million</span></span> |<span data-ttu-id="0115e-170">60 milioni</span><span class="sxs-lookup"><span data-stu-id="0115e-170">60 million</span></span> |<span data-ttu-id="0115e-171">120 milioni</span><span class="sxs-lookup"><span data-stu-id="0115e-171">120 million</span></span> |<span data-ttu-id="0115e-172">200 milioni</span><span class="sxs-lookup"><span data-stu-id="0115e-172">200 million</span></span> |
| <span data-ttu-id="0115e-173">Massimo spazio di archiviazione per partizione</span><span class="sxs-lookup"><span data-stu-id="0115e-173">Maximum Storage per Partition</span></span> |<span data-ttu-id="0115e-174">2 GB</span><span class="sxs-lookup"><span data-stu-id="0115e-174">2 GB</span></span> |<span data-ttu-id="0115e-175">25 GB</span><span class="sxs-lookup"><span data-stu-id="0115e-175">25 GB</span></span> |<span data-ttu-id="0115e-176">100 GB</span><span class="sxs-lookup"><span data-stu-id="0115e-176">100 GB</span></span> |<span data-ttu-id="0115e-177">200 GB</span><span class="sxs-lookup"><span data-stu-id="0115e-177">200 GB</span></span> |<span data-ttu-id="0115e-178">200 GB</span><span class="sxs-lookup"><span data-stu-id="0115e-178">200 GB</span></span> |
| <span data-ttu-id="0115e-179">Massimo numero di indici per servizio</span><span class="sxs-lookup"><span data-stu-id="0115e-179">Maximum Indexes per Service</span></span> |<span data-ttu-id="0115e-180">5</span><span class="sxs-lookup"><span data-stu-id="0115e-180">5</span></span> |<span data-ttu-id="0115e-181">50</span><span class="sxs-lookup"><span data-stu-id="0115e-181">50</span></span> |<span data-ttu-id="0115e-182">200</span><span class="sxs-lookup"><span data-stu-id="0115e-182">200</span></span> |<span data-ttu-id="0115e-183">200</span><span class="sxs-lookup"><span data-stu-id="0115e-183">200</span></span> |<span data-ttu-id="0115e-184">3000 (max 1000 indici/partizione)</span><span class="sxs-lookup"><span data-stu-id="0115e-184">3000 (max 1000 indexes/partition)</span></span> |

#### <a name="s3-high-density"></a><span data-ttu-id="0115e-185">S3 ad alta densità</span><span class="sxs-lookup"><span data-stu-id="0115e-185">S3 High Density'</span></span>
<span data-ttu-id="0115e-186">Nel piano tariffario S3 di Ricerca di Azure è disponibile un'opzione per la modalità a densità elevata (HD) progettata specificamente per gli scenari multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-186">In Azure Search’s S3 pricing tier, there is an option for the High Density (HD) mode designed specifically for multitenant scenarios.</span></span> <span data-ttu-id="0115e-187">In molti casi è necessario supportare un numero elevato di tenant più piccoli in un singolo servizio, per ottenere vantaggi come semplicità e convenienza.</span><span class="sxs-lookup"><span data-stu-id="0115e-187">In many cases, it is necessary to support a large number of smaller tenants under a single service to achieve the benefits of simplicity and cost efficiency.</span></span>

<span data-ttu-id="0115e-188">S3 HD consente di comprimere numerosi indici di piccole dimensioni, che vengono quindi gestiti da un singolo servizio di ricerca, sacrificando la possibilità di aumentare il numero di indici che usano le partizioni in cambio dell'hosting di un maggior numero di indici in un singolo servizio.</span><span class="sxs-lookup"><span data-stu-id="0115e-188">S3 HD allows for the many small indexes to be packed under the management of a single search service by trading the ability to scale out indexes using partitions for the ability to host more indexes in a single service.</span></span>

<span data-ttu-id="0115e-189">In pratica, un servizio S3 potrebbe avere fino a 200 indici che insieme potrebbero ospitare fino a 1,4 miliardi di documenti.</span><span class="sxs-lookup"><span data-stu-id="0115e-189">Concretely, an S3 service could have between 1 and 200 indexes that together could host up to 1.4 billion documents.</span></span> <span data-ttu-id="0115e-190">D'altro canto S3 HD consentirebbe ai singoli indici di arrivare solo fino a un milione di documenti, tuttavia può gestire fino a 1000 indici per partizione (fino a 3000 per ogni servizio) con un numero totale di documenti pari a 200 milioni per partizione (fino a 600 milioni per ogni servizio).</span><span class="sxs-lookup"><span data-stu-id="0115e-190">An S3 HD on the other hand would allow individual indexes to only go up to 1 million documents, but it can handle up to 1000 indexes per partition (up to 3000 per service) with a total document count of 200 million per partition (up to 600 million per service).</span></span>

## <a name="considerations-for-multitenant-applications"></a><span data-ttu-id="0115e-191">Considerazioni per le applicazioni multi-tenant</span><span class="sxs-lookup"><span data-stu-id="0115e-191">Considerations for multitenant applications</span></span>
<span data-ttu-id="0115e-192">Le applicazioni multi-tenant devono distribuire in modo efficace le risorse tra i tenant mantenendo al tempo stesso un certo livello di privacy tra i vari tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-192">Multitenant applications must effectively distribute resources among the tenants while preserving some level of privacy between the various tenants.</span></span> <span data-ttu-id="0115e-193">Quando si progetta l'architettura di un'applicazione di questo tipo, ci sono alcuni aspetti da considerare:</span><span class="sxs-lookup"><span data-stu-id="0115e-193">There are a few considerations when designing the architecture for such an application:</span></span>

* <span data-ttu-id="0115e-194">*Isolamento del tenant:* gli sviluppatori di applicazioni devono adottare misure appropriate per assicurarsi che nessun tenant non autorizzato o indesiderato acceda ai dati di altri tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-194">*Tenant isolation:* Application developers need to take appropriate measures to ensure that no tenants have unauthorized or unwanted access to the data of other tenants.</span></span> <span data-ttu-id="0115e-195">Oltre alla questione della privacy dei dati, le strategie di isolamento tenant richiedono una gestione efficace delle risorse condivise e la protezione da vicini fastidiosi.</span><span class="sxs-lookup"><span data-stu-id="0115e-195">Beyond the perspective of data privacy, tenant isolation strategies require effective management of shared resources and protection from noisy neighbors.</span></span>
* <span data-ttu-id="0115e-196">*Costi delle risorse del cloud:* come con qualsiasi altra applicazione, le soluzioni software devono rimanere competitive quando sono componenti di un'applicazione multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-196">*Cloud resource cost:* As with any other application, software solutions must remain cost competitive as a component of a multitenant application.</span></span>
* <span data-ttu-id="0115e-197">*Semplicità delle operazioni:* quando si sviluppa un'architettura multi-tenant, l'impatto sulle operazioni e la complessità dell'applicazione è un fattore importante.</span><span class="sxs-lookup"><span data-stu-id="0115e-197">*Ease of Operations:* When developing a multitenant architecture, the impact on the application's operations and complexity is an important consideration.</span></span> <span data-ttu-id="0115e-198">Ricerca di Azure ha un [contratto di servizio del 99,9%](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="0115e-198">Azure Search has a [99.9% SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>
* <span data-ttu-id="0115e-199">*Presenza globale:* le applicazioni multi-tenant potrebbero dover gestire in modo efficace tenant distribuiti in tutto il mondo.</span><span class="sxs-lookup"><span data-stu-id="0115e-199">*Global footprint:* Multitenant applications may need to effectively serve tenants which are distributed across the globe.</span></span>
* <span data-ttu-id="0115e-200">*Scalabilità:* gli sviluppatori di applicazioni devono mantenere le applicazioni a un livello di complessità sufficientemente ridotto e allo stesso tempo progettarle in maniera che siano scalabili in base al numero di tenant e alla dimensione dei dati e del carico di lavoro dei tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-200">*Scalability:* Application developers need to consider how they reconcile between maintaining a sufficiently low level of application complexity and designing the application to scale with number of tenants and the size of tenants' data and workload.</span></span>

<span data-ttu-id="0115e-201">Ricerca di Azure offre alcuni confini che consentono di isolare i dati e il carico di lavoro dei tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-201">Azure Search offers a few boundaries that can be used to isolate tenants’ data and workload.</span></span>

## <a name="modeling-multitenancy-with-azure-search"></a><span data-ttu-id="0115e-202">Modellazione del multi-tenancy con Ricerca di Azure</span><span class="sxs-lookup"><span data-stu-id="0115e-202">Modeling multitenancy with Azure Search</span></span>
<span data-ttu-id="0115e-203">Nel caso di uno scenario multi-tenant, lo sviluppatore dell'applicazione usa uno o più servizi di ricerca e divide i tenant tra i servizi, gli indici o entrambi.</span><span class="sxs-lookup"><span data-stu-id="0115e-203">In the case of a multitenant scenario, the application developer consumes one or more search services and divide their tenants among services, indexes, or both.</span></span> <span data-ttu-id="0115e-204">Ricerca di Azure dispone di alcuni modelli comuni per la modellazione di uno scenario multi-tenant:</span><span class="sxs-lookup"><span data-stu-id="0115e-204">Azure Search has a few common patterns when modeling a multitenant scenario:</span></span>

1. <span data-ttu-id="0115e-205">*Indice per tenant:* ogni tenant dispone di un proprio indice all'interno di un servizio di ricerca che è condiviso con altri tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-205">*Index per tenant:* Each tenant has its own index within a search service that is shared with other tenants.</span></span>
2. <span data-ttu-id="0115e-206">*Servizio per tenant:* ogni tenant dispone di un proprio servizio Ricerca di Azure dedicato, il che offre un livello più elevato di separazione dei dati e del carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="0115e-206">*Service per tenant:* Each tenant has its own dedicated Azure Search service, offering highest level of data and workload separation.</span></span>
3. <span data-ttu-id="0115e-207">*Combinazione di entrambi:* ai tenant più grandi e attivi vengono assegnati servizi dedicati mentre ai tenant più piccoli vengono assegnati singoli indici all'interno di servizi condivisi.</span><span class="sxs-lookup"><span data-stu-id="0115e-207">*Mix of both:* Larger, more-active tenants are assigned dedicated services while smaller tenants are assigned individual indexes within shared services.</span></span>

## <a name="1-index-per-tenant"></a><span data-ttu-id="0115e-208">1. Indice per tenant</span><span class="sxs-lookup"><span data-stu-id="0115e-208">1. Index per tenant</span></span>
![Un'immagine del modello "indice per tenant"](./media/search-modeling-multitenant-saas-applications/azure-search-index-per-tenant.png)

<span data-ttu-id="0115e-210">In un modello "indice per tenant", più tenant occupano un singolo servizio di Ricerca di Azure in cui ogni tenant dispone di un proprio indice.</span><span class="sxs-lookup"><span data-stu-id="0115e-210">In an index-per-tenant model, multiple tenants occupy a single Azure Search service where each tenant has their own index.</span></span>

<span data-ttu-id="0115e-211">I tenant ottengono l'isolamento dei dati perché tutte le richieste di ricerca e le operazioni sui documenti sono emesse a livello di indice in Ricerca di Azure.</span><span class="sxs-lookup"><span data-stu-id="0115e-211">Tenants achieve data isolation because all search requests and document operations are issued at an index level in Azure Search.</span></span> <span data-ttu-id="0115e-212">Nel livello dell'applicazione c'è la necessità di indirizzare il traffico dei diversi tenant agli indici corretti gestendo al tempo stesso le risorse a livello di servizio tra tutti i tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-212">In the application layer, there is the need awareness to direct the various tenants’ traffic to the proper indexes while also managing resources at the service level across all tenants.</span></span>

<span data-ttu-id="0115e-213">Una caratteristica importante del modello "indice per tenant" è la possibilità per lo sviluppatore di applicazioni di eseguire l'oversubscription della capacità di un servizio di ricerca tra i tenant dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="0115e-213">A key attribute of the index-per-tenant model is the ability for the application developer to oversubscribe the capacity of a search service among the application’s tenants.</span></span> <span data-ttu-id="0115e-214">Se la distribuzione del carico di lavoro fra i tenant non è uniforme, è possibile distribuire una combinazione ottimale di tenant tra gli indici di un servizio di ricerca in modo da sistemare un certo numero di tenant molto attivi e che richiedono molte risorse, servendo al tempo stesso una lunga coda di tenant meno attivi.</span><span class="sxs-lookup"><span data-stu-id="0115e-214">If the tenants have an uneven distribution of workload, the optimal combination of tenants can be distributed across a search service’s indexes to accommodate a number of highly active, resource-intensive tenants while simultaneously serving a long tail of less active tenants.</span></span> <span data-ttu-id="0115e-215">Lo svantaggio del modello è la sua incapacità di gestire le situazioni in cui tutti i tenant sono simultaneamente molto attivi.</span><span class="sxs-lookup"><span data-stu-id="0115e-215">The trade-off is the inability of the model to handle situations where each tenant is concurrently highly active.</span></span>

<span data-ttu-id="0115e-216">Il modello "indice per tenant" costituisce la base per un modello di costo variabile, in cui un intero servizio di Ricerca di Azure viene prima acquistato e poi completato con i tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-216">The index-per-tenant model provides the basis for a variable cost model, where an entire Azure Search service is bought up-front and then subsequently filled with tenants.</span></span> <span data-ttu-id="0115e-217">In questo modo la capacità inutilizzata può essere destinata ad account di prova e gratuiti.</span><span class="sxs-lookup"><span data-stu-id="0115e-217">This allows for unused capacity to be designated for trials and free accounts.</span></span>

<span data-ttu-id="0115e-218">Per le applicazioni con una presenza globale, il modello "indice per tenant" potrebbe non essere il più efficiente.</span><span class="sxs-lookup"><span data-stu-id="0115e-218">For applications with a global footprint, the index-per-tenant model may not be the most efficient.</span></span> <span data-ttu-id="0115e-219">Se i tenant di un'applicazione vengono distribuiti in tutto il mondo, potrebbe essere necessario un servizio diverso per ogni area, il che potrebbe duplicare i costi per ognuno di essi.</span><span class="sxs-lookup"><span data-stu-id="0115e-219">If an application's tenants are distributed across the globe, a separate service may be necessary for each region which may duplicate costs across each of them.</span></span>

<span data-ttu-id="0115e-220">Ricerca di Azure consente il ridimensionamento verso l'alto dei singoli indici e anche l'incremento del numero totale di indici.</span><span class="sxs-lookup"><span data-stu-id="0115e-220">Azure Search allows for the scale of both the individual indexes and the total number of indexes to grow.</span></span> <span data-ttu-id="0115e-221">Se viene scelto un piano tariffario appropriato, possono essere aggiunte partizioni e repliche all'intero servizio di ricerca quando un singolo indice all'interno del servizio diventa troppo grande in termini di archiviazione o traffico.</span><span class="sxs-lookup"><span data-stu-id="0115e-221">If an appropriate pricing tier is chosen, partitions and replicas can be added to the entire search service when an individual index within the service grows too large in terms of storage or traffic.</span></span>

<span data-ttu-id="0115e-222">Se il numero totale di indici diventa troppo grande per un singolo servizio, è necessario eseguire il provisioning di un altro servizio per accogliere i nuovi tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-222">If the total number of indexes grows too large for a single service, another service has to be provisioned to accommodate the new tenants.</span></span> <span data-ttu-id="0115e-223">Se è necessario spostare determinati indici tra i servizi di ricerca quando vengono aggiunti nuovi servizi, i dati dell'indice devono essere copiati manualmente da un indice all'altro in quanto Ricerca di Azure non consente di spostare un indice.</span><span class="sxs-lookup"><span data-stu-id="0115e-223">If indexes have to be moved between search services as new services are added, the data from the index has to be manually copied from one index to the other as Azure Search does not allow for an index to be moved.</span></span>

## <a name="2-service-per-tenant"></a><span data-ttu-id="0115e-224">2. Servizio per tenant</span><span class="sxs-lookup"><span data-stu-id="0115e-224">2. Service per tenant</span></span>
![Un'immagine del modello "servizio per tenant"](./media/search-modeling-multitenant-saas-applications/azure-search-service-per-tenant.png)

<span data-ttu-id="0115e-226">In un'architettura "servizio per tenant" ogni tenant dispone di un proprio servizio di ricerca.</span><span class="sxs-lookup"><span data-stu-id="0115e-226">In a service-per-tenant architecture, each tenant has its own search service.</span></span>

<span data-ttu-id="0115e-227">In questo modello l'applicazione ottiene il massimo livello di isolamento per i suoi tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-227">In this model, the application achieves the maximum level of isolation for its tenants.</span></span> <span data-ttu-id="0115e-228">Ogni servizio ha risorse di archiviazione e velocità effettiva dedicate per la gestione delle richiesta di ricerca nonché chiavi API diverse.</span><span class="sxs-lookup"><span data-stu-id="0115e-228">Each service has dedicated storage and throughput for handling search request as well as separate API keys.</span></span>

<span data-ttu-id="0115e-229">Per le applicazioni in cui ogni tenant ha grandi dimensioni o il carico di lavoro è poco variabile da un tenant all'altro, il modello "servizio per tenant" è una scelta efficace in quanto le risorse non sono condivise tra i carichi di lavoro dei diversi tenant.</span><span class="sxs-lookup"><span data-stu-id="0115e-229">For applications where each tenant has a large footprint or the workload has little variability from tenant to tenant, the service-per-tenant model is an effective choice as resources are not shared across various tenants’ workloads.</span></span>

<span data-ttu-id="0115e-230">Un modello "servizio per tenant" offre inoltre il vantaggio della stimabilità dei costi fissi.</span><span class="sxs-lookup"><span data-stu-id="0115e-230">A service per tenant model also offers the benefit of a predictable, fixed cost model.</span></span> <span data-ttu-id="0115e-231">Non è necessario alcun investimento iniziale in un intero servizio di ricerca fino a quando non c'è un tenant che lo occupa, tuttavia il costo per tenant è superiore rispetto al modello "indice per tenant".</span><span class="sxs-lookup"><span data-stu-id="0115e-231">There is no up-front investment in an entire search service until there is a tenant to fill it, however the cost-per-tenant is higher than an index-per-tenant model.</span></span>

<span data-ttu-id="0115e-232">Il modello "servizio per tenant" è una scelta efficiente per le applicazioni con una presenza globale.</span><span class="sxs-lookup"><span data-stu-id="0115e-232">The service-per-tenant model is an efficient choice for applications with a global footprint.</span></span> <span data-ttu-id="0115e-233">Con i tenant distribuiti geograficamente è facile avere il servizio di ciascun tenant nell'area appropriata.</span><span class="sxs-lookup"><span data-stu-id="0115e-233">With geographically-distributed tenants, it is easy to have each tenant's service in the appropriate region.</span></span>

<span data-ttu-id="0115e-234">Problematiche di scalabilità di questo modello si verificano quando i singoli tenant diventano troppo grandi per il servizio.</span><span class="sxs-lookup"><span data-stu-id="0115e-234">The challenges in scaling this pattern arise when individual tenants outgrow their service.</span></span> <span data-ttu-id="0115e-235">Ricerca di Azure attualmente non supporta l'aggiornamento del piano tariffario di un servizio di ricerca, pertanto tutti i dati dovranno essere copiati manualmente in un nuovo servizio.</span><span class="sxs-lookup"><span data-stu-id="0115e-235">Azure Search does not currently support upgrading the pricing tier of a search service, so all data would have to be manually copied to a new service.</span></span>

## <a name="3-mixing-both-models"></a><span data-ttu-id="0115e-236">3. Valutazione di entrambi i modelli</span><span class="sxs-lookup"><span data-stu-id="0115e-236">3. Mixing both models</span></span>
<span data-ttu-id="0115e-237">Un'altra possibilità per la modellazione multi-tenancy consiste nell'unione delle due strategie "indice per tenant" e "servizio per tenant".</span><span class="sxs-lookup"><span data-stu-id="0115e-237">Another pattern for modeling multitenancy is mixing both index-per-tenant and service-per-tenant strategies.</span></span>

<span data-ttu-id="0115e-238">Combinando i due modelli, i tenant più grandi di un'applicazione possono occupare servizi dedicati mentre la lunga coda di tenant più piccoli e meno attivi può occupare gli indici in un servizio condiviso.</span><span class="sxs-lookup"><span data-stu-id="0115e-238">By mixing the two patterns, an application's largest tenants can occupy dedicated services while the long tail of less active, smaller tenants can occupy indexes in a shared service.</span></span> <span data-ttu-id="0115e-239">Questo modello garantisce ai tenant più grandi di ottenere prestazioni elevate e coerenti dal servizio, contribuendo al tempo stesso a proteggere i tenant più piccoli da eventuali vicini fastidiosi.</span><span class="sxs-lookup"><span data-stu-id="0115e-239">This model ensures that the largest tenants have consistently high performance from the service while helping to protect the smaller tenants from any noisy neighbors.</span></span>

<span data-ttu-id="0115e-240">L'implementazione di questa strategia si basa tuttavia sulla previsione di quali tenant richiederanno un servizio dedicato e non un indice in un servizio condiviso.</span><span class="sxs-lookup"><span data-stu-id="0115e-240">However, implementing this strategy relies foresight in predicting which tenants will require a dedicated service versus an index in a shared service.</span></span> <span data-ttu-id="0115e-241">La complessità dell'applicazione aumenta con la necessità di gestire entrambi questi modelli multi-tenancy.</span><span class="sxs-lookup"><span data-stu-id="0115e-241">Application complexity increases with the need to manage both of these multitenancy models.</span></span>

## <a name="achieving-even-finer-granularity"></a><span data-ttu-id="0115e-242">Raggiungimento di una granularità ancora maggiore</span><span class="sxs-lookup"><span data-stu-id="0115e-242">Achieving even finer granularity</span></span>
<span data-ttu-id="0115e-243">I modelli di progettazione descritti sopra per la modellazione di scenari multi-tenant in Ricerca di Azure si basano sul presupposto di un ambito uniforme in cui ogni tenant è un'istanza completa di un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="0115e-243">The above design patterns to model multitenant scenarios in Azure Search assume a uniform scope where each tenant is a whole instance of an application.</span></span> <span data-ttu-id="0115e-244">Le applicazioni tuttavia possono gestire a volte numerosi ambiti più piccoli.</span><span class="sxs-lookup"><span data-stu-id="0115e-244">However, applications can sometimes handle many smaller scopes.</span></span>

<span data-ttu-id="0115e-245">Se i modelli "servizio per tenant" e "indice per tenant" non hanno un ambito sufficientemente piccolo, è possibile modellare un indice per ottenere un livello di granularità ancora più preciso.</span><span class="sxs-lookup"><span data-stu-id="0115e-245">If service-per-tenant and index-per-tenant models are not sufficiently small scopes, it is possible to model an index to achieve an even finer degree of granularity.</span></span>

<span data-ttu-id="0115e-246">Per ottenere che un singolo indice si comporti in modo diverso per endpoint del client diversi, è possibile aggiungere un campo a un indice che stabilisce un determinato valore per ogni possibile client.</span><span class="sxs-lookup"><span data-stu-id="0115e-246">To have a single index behave differently for different client endpoints, a field can be added to an index which designates a certain value for each possible client.</span></span> <span data-ttu-id="0115e-247">Ogni volta che un client chiama Ricerca di Azure per eseguire una query o modificare un indice, il codice dall'applicazione client specifica il valore appropriato per quel campo mediante la funzionalità di [filtro](https://msdn.microsoft.com/library/azure/dn798921.aspx) di Ricerca di Azure in fase di query.</span><span class="sxs-lookup"><span data-stu-id="0115e-247">Each time a client calls Azure Search to query or modify an index, the code from the client application specifies the appropriate value for that field using Azure Search's [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) capability at query time.</span></span>

<span data-ttu-id="0115e-248">Questo metodo può essere usato per ottenere funzionalità di account utente diversi, livelli di autorizzazione diversi e persino applicazioni completamente diverse.</span><span class="sxs-lookup"><span data-stu-id="0115e-248">This method can be used to achieve functionality of separate user accounts, separate permission levels, and even completely separate applications.</span></span>

> [!NOTE]
> <span data-ttu-id="0115e-249">L'uso dell'approccio descritto sopra per configurare un singolo indice per più tenant influisce sulla pertinenza dei risultati della ricerca.</span><span class="sxs-lookup"><span data-stu-id="0115e-249">Using the approach described above to configure a single index to serve multiple tenants affects the relevance of search results.</span></span> <span data-ttu-id="0115e-250">I punteggi di pertinenza della ricerca vengono calcolati a livello di indice, non a livello di tenant, quindi tutti i dati dei tenant vengono incorporati nelle statistiche dei punteggi di pertinenza, ad esempio la frequenza del termine.</span><span class="sxs-lookup"><span data-stu-id="0115e-250">Search relevance scores are computed at an index-level scope, not a tenant-level scope, so all tenants' data is incorporated in the relevance scores' underlying statistics such as term frequency.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="0115e-251">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="0115e-251">Next steps</span></span>
<span data-ttu-id="0115e-252">Ricerca di Azure è una scelta interessante per molte applicazioni: [altre informazioni sulle affidabili funzionalità del servizio sono disponibili qui](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="0115e-252">Azure Search is a compelling choice for many applications, [read more about the service's robust capabilities](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="0115e-253">Quando si valutano i vari modelli di progettazione per le applicazioni multi-tenant, è opportuno considerare i [vari piani tariffari](https://azure.microsoft.com/pricing/details/search/) e i rispettivi [limiti del servizio](search-limits-quotas-capacity.md) per adattare al meglio Ricerca di Azure ad architettura o carichi di lavoro applicativi di tutte le dimensioni.</span><span class="sxs-lookup"><span data-stu-id="0115e-253">When evaluating the various design patterns for multitenant applications, consider the [various pricing tiers](https://azure.microsoft.com/pricing/details/search/) and the respective [service limits](search-limits-quotas-capacity.md) to best tailor Azure Search to fit application workloads and architectures of all sizes.</span></span>

<span data-ttu-id="0115e-254">Le domande su Ricerca di Azure e sugli scenari multi-tenant possono essere indirizzate ad azuresearch_contact@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="0115e-254">Any questions about Azure Search and multitenant scenarios can be directed to azuresearch_contact@microsoft.com.</span></span>

