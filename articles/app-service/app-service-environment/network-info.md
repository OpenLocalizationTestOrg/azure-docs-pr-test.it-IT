---
title: Considerazioni su aaaNetworking con un ambiente del servizio App di Azure
description: Viene illustrato il traffico di rete hello ASE e come tooset NSGs e UDRs con il tipo di base
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 955a4d84-94ca-418d-aa79-b57a5eb8cb85
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2017
ms.author: ccompy
ms.openlocfilehash: d4d3000f4d4d75814b1e6d47079d967334eb1a3b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="networking-considerations-for-an-app-service-environment"></a><span data-ttu-id="393e4-103">Considerazioni sulla rete per un ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-103">Networking considerations for an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="393e4-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="393e4-104">Overview</span></span> ##

 <span data-ttu-id="393e4-105">L'[ambiente del servizio app di Azure][Intro] è una distribuzione di Servizio app di Azure in una subnet nella rete virtuale di Azure (VNet).</span><span class="sxs-lookup"><span data-stu-id="393e4-105">Azure [App Service Environment][Intro] is a deployment of Azure App Service into a subnet in your Azure virtual network (VNet).</span></span> <span data-ttu-id="393e4-106">È possibile distribuire un ambiente del servizio app in due modi:</span><span class="sxs-lookup"><span data-stu-id="393e4-106">There are two deployment types for an App Service environment (ASE):</span></span>

- <span data-ttu-id="393e4-107">**ASE esterno**: espone hello App ASE ospitate su un indirizzo IP accessibile tramite internet.</span><span class="sxs-lookup"><span data-stu-id="393e4-107">**External ASE**: Exposes hello ASE-hosted apps on an internet-accessible IP address.</span></span> <span data-ttu-id="393e4-108">Per altre informazioni, vedere [Create an External ASE][MakeExternalASE] (Creare un ambiente del servizio app esterno).</span><span class="sxs-lookup"><span data-stu-id="393e4-108">For more information, see [Create an External ASE][MakeExternalASE].</span></span>
- <span data-ttu-id="393e4-109">**Bilanciamento del carico interno ASE**: espone hello App ASE ospitate su un indirizzo IP all'interno della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="393e4-109">**ILB ASE**: Exposes hello ASE-hosted apps on an IP address inside your VNet.</span></span> <span data-ttu-id="393e4-110">endpoint interno Hello è un bilanciamento del carico interno (ILB), motivo per cui è definita ASE un bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="393e4-110">hello internal endpoint is an internal load balancer (ILB), which is why it's called an ILB ASE.</span></span> <span data-ttu-id="393e4-111">Per altre informazioni, vedere [Create and use an ILB ASE][MakeILBASE] (Creare e usare un ambiente del servizio app ILB).</span><span class="sxs-lookup"><span data-stu-id="393e4-111">For more information, see [Create and use an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="393e4-112">Esistono ora due versioni dell'ambiente del servizio app: ASEv1 e ASEv2.</span><span class="sxs-lookup"><span data-stu-id="393e4-112">There are now two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="393e4-113">Per informazioni su ASEv1, vedere [tooApp introduzione dell'ambiente del servizio v1][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="393e4-113">For information on ASEv1, see [Introduction tooApp Service Environment v1][ASEv1Intro].</span></span> <span data-ttu-id="393e4-114">Un ambiente ASEv1 può essere distribuito in una rete virtuale classica o di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="393e4-114">ASEv1 can be deployed in a classic or Resource Manager VNet.</span></span> <span data-ttu-id="393e4-115">Un ambiente ASEv2 può essere distribuito solo in una rete virtuale di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="393e4-115">ASEv2 can only be deployed into a Resource Manager VNet.</span></span>

<span data-ttu-id="393e4-116">Tutte le chiamate da un ASE che toohello internet lasciare hello rete virtuale tramite un indirizzo VIP assegnato per hello ASE.</span><span class="sxs-lookup"><span data-stu-id="393e4-116">All calls from an ASE that go toohello internet leave hello VNet through a VIP assigned for hello ASE.</span></span> <span data-ttu-id="393e4-117">Hello IP pubblico di questo indirizzo VIP è quindi hello IP di origine per tutte le chiamate da hello ASE che toohello internet.</span><span class="sxs-lookup"><span data-stu-id="393e4-117">hello public IP of this VIP is then hello source IP for all calls from hello ASE that go toohello internet.</span></span> <span data-ttu-id="393e4-118">Se le app hello nel ASE tooresources chiamate in una rete virtuale o su una connessione VPN, hello IP di origine è uno dei hello gli indirizzi IP nella subnet hello utilizzato per la base.</span><span class="sxs-lookup"><span data-stu-id="393e4-118">If hello apps in your ASE make calls tooresources in your VNet or across a VPN, hello source IP is one of hello IPs in hello subnet used by your ASE.</span></span> <span data-ttu-id="393e4-119">Poiché hello ASE è all'interno di hello rete virtuale, consente inoltre di accedere alle risorse all'interno di hello rete virtuale senza configurazione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="393e4-119">Because hello ASE is within hello VNet, it can also access resources within hello VNet without any additional configuration.</span></span> <span data-ttu-id="393e4-120">Se hello rete virtuale è connessa tooyour dalla rete locale, nel ASE inoltre hanno accesso tooresources non esiste.</span><span class="sxs-lookup"><span data-stu-id="393e4-120">If hello VNet is connected tooyour on-premises network, apps in your ASE also have access tooresources there.</span></span> <span data-ttu-id="393e4-121">Non è necessario tooconfigure hello ASE o app qualsiasi ulteriormente.</span><span class="sxs-lookup"><span data-stu-id="393e4-121">You don't need tooconfigure hello ASE or your app any further.</span></span>

![Ambiente del servizio app esterno][1] 

<span data-ttu-id="393e4-123">Se si dispone di un ASE esterno, VIP pubblico hello è inoltre endpoint hello che le app ASE risolvere toofor:</span><span class="sxs-lookup"><span data-stu-id="393e4-123">If you have an External ASE, hello public VIP is also hello endpoint that your ASE apps resolve toofor:</span></span>

* <span data-ttu-id="393e4-124">HTTP/S.</span><span class="sxs-lookup"><span data-stu-id="393e4-124">HTTP/S.</span></span> 
* <span data-ttu-id="393e4-125">FTP/S.</span><span class="sxs-lookup"><span data-stu-id="393e4-125">FTP/S.</span></span> 
* <span data-ttu-id="393e4-126">Distribuzione Web.</span><span class="sxs-lookup"><span data-stu-id="393e4-126">Web deployment.</span></span>
* <span data-ttu-id="393e4-127">Debug remoto.</span><span class="sxs-lookup"><span data-stu-id="393e4-127">Remote debugging.</span></span>

![Ambiente del servizio app con bilanciamento del carico interno][2]

<span data-ttu-id="393e4-129">Se si dispone di una base di bilanciamento del carico interno, l'indirizzo IP hello del bilanciamento del carico interno hello è endpoint hello per HTTP/S, FTP/S, distribuzione web e il debug remoto.</span><span class="sxs-lookup"><span data-stu-id="393e4-129">If you have an ILB ASE, hello IP address of hello ILB is hello endpoint for HTTP/S, FTP/S, web deployment, and remote debugging.</span></span>

<span data-ttu-id="393e4-130">porte di accesso app normale Hello sono:</span><span class="sxs-lookup"><span data-stu-id="393e4-130">hello normal app access ports are:</span></span>

| <span data-ttu-id="393e4-131">Uso</span><span class="sxs-lookup"><span data-stu-id="393e4-131">Use</span></span> | <span data-ttu-id="393e4-132">Da</span><span class="sxs-lookup"><span data-stu-id="393e4-132">From</span></span> | <span data-ttu-id="393e4-133">Anche</span><span class="sxs-lookup"><span data-stu-id="393e4-133">too</span></span>|
|----------|---------|-------------|
|  <span data-ttu-id="393e4-134">HTTP/HTTPS</span><span class="sxs-lookup"><span data-stu-id="393e4-134">HTTP/HTTPS</span></span>  | <span data-ttu-id="393e4-135">Configurabile dall'utente</span><span class="sxs-lookup"><span data-stu-id="393e4-135">User configurable</span></span> |  <span data-ttu-id="393e4-136">80, 443</span><span class="sxs-lookup"><span data-stu-id="393e4-136">80, 443</span></span> |
|  <span data-ttu-id="393e4-137">FTP/FTPS</span><span class="sxs-lookup"><span data-stu-id="393e4-137">FTP/FTPS</span></span>    | <span data-ttu-id="393e4-138">Configurabile dall'utente</span><span class="sxs-lookup"><span data-stu-id="393e4-138">User configurable</span></span> |  <span data-ttu-id="393e4-139">21, 990, 10001-10020</span><span class="sxs-lookup"><span data-stu-id="393e4-139">21, 990, 10001-10020</span></span> |
|  <span data-ttu-id="393e4-140">Debug remoto in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="393e4-140">Visual Studio remote debugging</span></span>  |  <span data-ttu-id="393e4-141">Configurabile dall'utente</span><span class="sxs-lookup"><span data-stu-id="393e4-141">User configurable</span></span> |  <span data-ttu-id="393e4-142">4016, 4018, 4020, 4022</span><span class="sxs-lookup"><span data-stu-id="393e4-142">4016, 4018, 4020, 4022</span></span> |

<span data-ttu-id="393e4-143">Ciò vale se si usa un ambiente del servizio app esterno o con bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="393e4-143">This is true if you're on an External ASE or on an ILB ASE.</span></span> <span data-ttu-id="393e4-144">Se si è su un ASE esterno, si raggiunge tali porte VIP pubblico hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-144">If you're on an External ASE, you hit those ports on hello public VIP.</span></span> <span data-ttu-id="393e4-145">Se si è su una base di bilanciamento del carico interno, si raggiunge tali porte in hello bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="393e4-145">If you're on an ILB ASE, you hit those ports on hello ILB.</span></span> <span data-ttu-id="393e4-146">Se si blocca la porta 443, è possibile che un effetto su alcune funzionalità esposte nel portale di hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-146">If you lock down port 443, there can be an effect on some features exposed in hello portal.</span></span> <span data-ttu-id="393e4-147">Per altre informazioni, vedere [Dipendenze per il portale](#portaldep).</span><span class="sxs-lookup"><span data-stu-id="393e4-147">For more information, see [Portal dependencies](#portaldep).</span></span>

## <a name="ase-dependencies"></a><span data-ttu-id="393e4-148">Dipendenze dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-148">ASE dependencies</span></span> ##

<span data-ttu-id="393e4-149">Una dipendenza per l'accesso in ingresso dell'ambiente del servizio app è:</span><span class="sxs-lookup"><span data-stu-id="393e4-149">An ASE inbound access dependency is:</span></span>

| <span data-ttu-id="393e4-150">Uso</span><span class="sxs-lookup"><span data-stu-id="393e4-150">Use</span></span> | <span data-ttu-id="393e4-151">Da</span><span class="sxs-lookup"><span data-stu-id="393e4-151">From</span></span> | <span data-ttu-id="393e4-152">Anche</span><span class="sxs-lookup"><span data-stu-id="393e4-152">too</span></span>|
|-----|------|----|
| <span data-ttu-id="393e4-153">gestione</span><span class="sxs-lookup"><span data-stu-id="393e4-153">Management</span></span> | <span data-ttu-id="393e4-154">Indirizzi di gestione del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-154">App Service management addresses</span></span> | <span data-ttu-id="393e4-155">Subnet dell'ambiente del servizio app: 454, 455</span><span class="sxs-lookup"><span data-stu-id="393e4-155">ASE subnet: 454, 455</span></span> |
|  <span data-ttu-id="393e4-156">Comunicazione interna dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-156">ASE internal communication</span></span> | <span data-ttu-id="393e4-157">Subnet dell'ambiente del servizio app: tutte le porte</span><span class="sxs-lookup"><span data-stu-id="393e4-157">ASE subnet: All ports</span></span> | <span data-ttu-id="393e4-158">Subnet dell'ambiente del servizio app: tutte le porte</span><span class="sxs-lookup"><span data-stu-id="393e4-158">ASE subnet: All ports</span></span>
|  <span data-ttu-id="393e4-159">Consenti bilanciamento del carico di Azure in ingresso</span><span class="sxs-lookup"><span data-stu-id="393e4-159">Allow Azure load balancer inbound</span></span> | <span data-ttu-id="393e4-160">Servizio di bilanciamento del carico di Azure</span><span class="sxs-lookup"><span data-stu-id="393e4-160">Azure load balancer</span></span> | <span data-ttu-id="393e4-161">Subnet dell'ambiente del servizio app: tutte le porte</span><span class="sxs-lookup"><span data-stu-id="393e4-161">ASE subnet: All ports</span></span>
|  <span data-ttu-id="393e4-162">Indirizzi IP assegnati alle app</span><span class="sxs-lookup"><span data-stu-id="393e4-162">App assigned IP addresses</span></span> | <span data-ttu-id="393e4-163">Indirizzi assegnati alle app</span><span class="sxs-lookup"><span data-stu-id="393e4-163">App assigned addresses</span></span> | <span data-ttu-id="393e4-164">Subnet dell'ambiente del servizio app: tutte le porte</span><span class="sxs-lookup"><span data-stu-id="393e4-164">ASE subnet: All ports</span></span>

<span data-ttu-id="393e4-165">Hello il traffico in entrata fornisce comandi e il controllo di hello ASE nel monitoraggio toosystem aggiunta.</span><span class="sxs-lookup"><span data-stu-id="393e4-165">hello inbound traffic provides command and control of hello ASE in addition toosystem monitoring.</span></span> <span data-ttu-id="393e4-166">sono elencati gli IP di origine Hello per il traffico in hello [gestione ASE indirizzi] [ ASEManagement] documento.</span><span class="sxs-lookup"><span data-stu-id="393e4-166">hello source IPs for this traffic are listed in hello [ASE Management addresses][ASEManagement] document.</span></span> <span data-ttu-id="393e4-167">configurazione di sicurezza di rete Hello deve tooallow accesso da tutti gli indirizzi IP sulle porte 454 e 455.</span><span class="sxs-lookup"><span data-stu-id="393e4-167">hello network security configuration needs tooallow access from all IPs on ports 454 and 455.</span></span>

<span data-ttu-id="393e4-168">All'interno di subnet hello ASE esistono molte porte utilizzate per la comunicazione di un componente interno e può essere modificata.</span><span class="sxs-lookup"><span data-stu-id="393e4-168">Within hello ASE subnet there are many ports used for internal component communication and they can change.</span></span>  <span data-ttu-id="393e4-169">Ciò richiede tutte le porte hello in hello ASE subnet toobe accessibile dalla subnet ASE hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-169">This requires all of hello ports in hello ASE subnet toobe accessible from hello ASE subnet.</span></span> 

<span data-ttu-id="393e4-170">Per le comunicazioni tra Bilanciamento carico di Azure hello e porte minime hello subnet ASE hello hello toobe che è necessario aprire sono 454, 455 e 16001.</span><span class="sxs-lookup"><span data-stu-id="393e4-170">For hello communication between hello Azure load balancer and hello ASE subnet hello minimum ports that need toobe open are 454, 455 and 16001.</span></span> <span data-ttu-id="393e4-171">porta 16001 Hello viene utilizzato per mantenere traffico alive tra bilanciamento del carico hello e ASE hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-171">hello 16001 port is used for keep alive traffic between hello load balancer and hello ASE.</span></span> <span data-ttu-id="393e4-172">Se si utilizza un ASE di bilanciamento del carico interno è possibile bloccare il traffico verso il basso toojust hello 454, 455, 16001 porte.</span><span class="sxs-lookup"><span data-stu-id="393e4-172">If you are using an ILB ASE then you can lock traffic down toojust hello 454, 455, 16001 ports.</span></span>  <span data-ttu-id="393e4-173">Se si utilizza un ASE esterno è necessario tootake in porte di accesso account hello app normale.</span><span class="sxs-lookup"><span data-stu-id="393e4-173">If you are using an External ASE then you need tootake into account hello normal app access ports.</span></span>  <span data-ttu-id="393e4-174">Se si usano indirizzi app assegnata, è necessario tooopen è tooall porte.</span><span class="sxs-lookup"><span data-stu-id="393e4-174">If you are using app assigned addresses you need tooopen it tooall ports.</span></span>  <span data-ttu-id="393e4-175">Quando l'app specifica tooa viene assegnato un indirizzo, bilanciamento del carico hello utilizzerà le porte che non sono noti in anticipo toosend HTTP e HTTPS traffico toohello ASE.</span><span class="sxs-lookup"><span data-stu-id="393e4-175">When an address is assigned tooa specific app, then hello load balancer will use ports that are not known of in advance toosend HTTP and HTTPS traffic toohello ASE.</span></span>

<span data-ttu-id="393e4-176">Se si usano indirizzi IP assegnati app occorre traffico tooallow da hello che subnet di ASE tooyour App toohello assegnare gli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="393e4-176">If you are using app assigned IP addresses you need tooallow traffic from hello IPs assigned tooyour apps toohello ASE subnet.</span></span>

<span data-ttu-id="393e4-177">Per l'accesso in uscita, un ambiente del servizio app dipende da più sistemi esterni.</span><span class="sxs-lookup"><span data-stu-id="393e4-177">For outbound access, an ASE depends on multiple external systems.</span></span> <span data-ttu-id="393e4-178">Tali dipendenze di sistema sono definiti con nomi DNS e non eseguire il mapping di set di indirizzi IP fissato tooa.</span><span class="sxs-lookup"><span data-stu-id="393e4-178">Those system dependencies are defined with DNS names and don't map tooa fixed set of IP addresses.</span></span> <span data-ttu-id="393e4-179">Di conseguenza, hello ASE richiede l'accesso in uscita dall'hello ASE tooall di subnet IP esterno in una vasta gamma di porte.</span><span class="sxs-lookup"><span data-stu-id="393e4-179">Thus, hello ASE requires outbound access from hello ASE subnet tooall external IPs across a variety of ports.</span></span> <span data-ttu-id="393e4-180">Un ASE ha hello seguendo le dipendenze in uscita:</span><span class="sxs-lookup"><span data-stu-id="393e4-180">An ASE has hello following outbound dependencies:</span></span>

| <span data-ttu-id="393e4-181">Uso</span><span class="sxs-lookup"><span data-stu-id="393e4-181">Use</span></span> | <span data-ttu-id="393e4-182">Da</span><span class="sxs-lookup"><span data-stu-id="393e4-182">From</span></span> | <span data-ttu-id="393e4-183">Anche</span><span class="sxs-lookup"><span data-stu-id="393e4-183">too</span></span>|
|-----|------|----|
| <span data-ttu-id="393e4-184">Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="393e4-184">Azure Storage</span></span> | <span data-ttu-id="393e4-185">Subnet dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-185">ASE subnet</span></span> | <span data-ttu-id="393e4-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 necessaria solo per ASEv1.)</span><span class="sxs-lookup"><span data-stu-id="393e4-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 is only needed for ASEv1.)</span></span> |
| <span data-ttu-id="393e4-187">Database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="393e4-187">Azure SQL Database</span></span> | <span data-ttu-id="393e4-188">Subnet dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-188">ASE subnet</span></span> | <span data-ttu-id="393e4-189">database.windows.net: 1433, 11000-11999, 14000-14999 (per altre informazioni, vedere [Porte successive alla 1433 per ADO.NET 4.5](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md))</span><span class="sxs-lookup"><span data-stu-id="393e4-189">database.windows.net: 1433, 11000-11999, 14000-14999 (For more information, see [SQL Database V12 port usage](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span></span>|
| <span data-ttu-id="393e4-190">Gestione di Azure</span><span class="sxs-lookup"><span data-stu-id="393e4-190">Azure management</span></span> | <span data-ttu-id="393e4-191">Subnet dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-191">ASE subnet</span></span> | <span data-ttu-id="393e4-192">management.core.windows.net, management.azure.com: 443</span><span class="sxs-lookup"><span data-stu-id="393e4-192">management.core.windows.net, management.azure.com: 443</span></span> 
| <span data-ttu-id="393e4-193">Verifica dei certificati SSL</span><span class="sxs-lookup"><span data-stu-id="393e4-193">SSL certificate verification</span></span> |  <span data-ttu-id="393e4-194">Subnet dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-194">ASE subnet</span></span>            |  <span data-ttu-id="393e4-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span><span class="sxs-lookup"><span data-stu-id="393e4-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span></span>
| <span data-ttu-id="393e4-196">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="393e4-196">Azure Active Directory</span></span>        | <span data-ttu-id="393e4-197">Subnet dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-197">ASE subnet</span></span>            |  <span data-ttu-id="393e4-198">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="393e4-198">Internet: 443</span></span>
| <span data-ttu-id="393e4-199">Gestione del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-199">App Service management</span></span>        | <span data-ttu-id="393e4-200">Subnet dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-200">ASE subnet</span></span>            |  <span data-ttu-id="393e4-201">Internet: 443</span><span class="sxs-lookup"><span data-stu-id="393e4-201">Internet: 443</span></span>
| <span data-ttu-id="393e4-202">DNS di Azure</span><span class="sxs-lookup"><span data-stu-id="393e4-202">Azure DNS</span></span>                     | <span data-ttu-id="393e4-203">Subnet dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-203">ASE subnet</span></span>            |  <span data-ttu-id="393e4-204">Internet: 53</span><span class="sxs-lookup"><span data-stu-id="393e4-204">Internet: 53</span></span>
| <span data-ttu-id="393e4-205">Comunicazione interna dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-205">ASE internal communication</span></span>    | <span data-ttu-id="393e4-206">Subnet dell'ambiente del servizio app: tutte le porte</span><span class="sxs-lookup"><span data-stu-id="393e4-206">ASE subnet: All ports</span></span> |  <span data-ttu-id="393e4-207">Subnet dell'ambiente del servizio app: tutte le porte</span><span class="sxs-lookup"><span data-stu-id="393e4-207">ASE subnet: All ports</span></span>

<span data-ttu-id="393e4-208">Se hello ASE perde l'accesso dipendenze toothese, non funziona.</span><span class="sxs-lookup"><span data-stu-id="393e4-208">If hello ASE loses access toothese dependencies, it stops working.</span></span> <span data-ttu-id="393e4-209">Quando ciò si verifica tempo sufficiente, hello ASE viene sospesa.</span><span class="sxs-lookup"><span data-stu-id="393e4-209">When that happens long enough, hello ASE is suspended.</span></span>

### <a name="customer-dns"></a><span data-ttu-id="393e4-210">DNS del cliente</span><span class="sxs-lookup"><span data-stu-id="393e4-210">Customer DNS</span></span> ###

<span data-ttu-id="393e4-211">Se hello rete virtuale è configurata con un server DNS definito dall'utente, i carichi di lavoro tenant hello utilizzarlo.</span><span class="sxs-lookup"><span data-stu-id="393e4-211">If hello VNet is configured with a customer-defined DNS server, hello tenant workloads use it.</span></span> <span data-ttu-id="393e4-212">Hello ASE deve comunque toocommunicate con DNS di Azure per scopi di gestione.</span><span class="sxs-lookup"><span data-stu-id="393e4-212">hello ASE still needs toocommunicate with Azure DNS for management purposes.</span></span> 

<span data-ttu-id="393e4-213">Se hello rete virtuale è configurata con un cliente DNS sul server DNS hello deve essere raggiungibile dalla subnet hello contenente hello ASE hello altro lato di una rete VPN.</span><span class="sxs-lookup"><span data-stu-id="393e4-213">If hello VNet is configured with a customer DNS on hello other side of a VPN, hello DNS server must be reachable from hello subnet that contains hello ASE.</span></span>

<a name="portaldep"></a>

## <a name="portal-dependencies"></a><span data-ttu-id="393e4-214">Dipendenze per il portale</span><span class="sxs-lookup"><span data-stu-id="393e4-214">Portal dependencies</span></span> ##

<span data-ttu-id="393e4-215">Dipendenze funzionali toohello ASE di addizione, esistono alcuni esperienza del portale correlato toohello elementi aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="393e4-215">In addition toohello ASE functional dependencies, there are a few extra items related toohello portal experience.</span></span> <span data-ttu-id="393e4-216">Alcune delle funzionalità di hello di hello portale di Azure dipendono site_ too_SCM accesso diretto.</span><span class="sxs-lookup"><span data-stu-id="393e4-216">Some of hello capabilities in hello Azure portal depend on direct access too_SCM site_.</span></span> <span data-ttu-id="393e4-217">Per ogni app nel Servizio app di Azure esistono due URL.</span><span class="sxs-lookup"><span data-stu-id="393e4-217">For every app in Azure App Service, there are two URLs.</span></span> <span data-ttu-id="393e4-218">primo URL Hello è tooaccess l'app.</span><span class="sxs-lookup"><span data-stu-id="393e4-218">hello first URL is tooaccess your app.</span></span> <span data-ttu-id="393e4-219">secondo URL Hello è tooaccess hello SCM sito, denominato anche hello _console Kudu_.</span><span class="sxs-lookup"><span data-stu-id="393e4-219">hello second URL is tooaccess hello SCM site, which is also called hello _Kudu console_.</span></span> <span data-ttu-id="393e4-220">Le funzionalità che utilizzano il sito di Gestione controllo servizi hello includono:</span><span class="sxs-lookup"><span data-stu-id="393e4-220">Features that use hello SCM site include:</span></span>

-   <span data-ttu-id="393e4-221">Processi Web</span><span class="sxs-lookup"><span data-stu-id="393e4-221">Web jobs</span></span>
-   <span data-ttu-id="393e4-222">Funzioni</span><span class="sxs-lookup"><span data-stu-id="393e4-222">Functions</span></span>
-   <span data-ttu-id="393e4-223">Streaming dei log</span><span class="sxs-lookup"><span data-stu-id="393e4-223">Log streaming</span></span>
-   <span data-ttu-id="393e4-224">Kudu</span><span class="sxs-lookup"><span data-stu-id="393e4-224">Kudu</span></span>
-   <span data-ttu-id="393e4-225">Estensioni</span><span class="sxs-lookup"><span data-stu-id="393e4-225">Extensions</span></span>
-   <span data-ttu-id="393e4-226">Esplora processi</span><span class="sxs-lookup"><span data-stu-id="393e4-226">Process Explorer</span></span>
-   <span data-ttu-id="393e4-227">Console</span><span class="sxs-lookup"><span data-stu-id="393e4-227">Console</span></span>

<span data-ttu-id="393e4-228">Quando si utilizza un ASE ILB, sito SCM hello non è accessibile dall'esterno hello rete virtuale di internet.</span><span class="sxs-lookup"><span data-stu-id="393e4-228">When you use an ILB ASE, hello SCM site isn't internet accessible from outside hello VNet.</span></span> <span data-ttu-id="393e4-229">Quando l'app è ospitato in una base di bilanciamento del carico interno, alcune funzionalità non funzionerà dal portale hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-229">When your app is hosted on an ILB ASE, some capabilities will not work from hello portal.</span></span>  

<span data-ttu-id="393e4-230">Molte di tali funzionalità che dipendono dal sito SCM hello sono disponibili anche direttamente nella console Kudu hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-230">Many of those capabilities that depend upon hello SCM site are also available directly in hello Kudu console.</span></span> <span data-ttu-id="393e4-231">È possibile connettersi tooit direttamente anziché tramite il portale di hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-231">You can connect tooit directly rather than by using hello portal.</span></span> <span data-ttu-id="393e4-232">Se l'app è ospitato in una base di bilanciamento del carico interno, utilizzare la pubblicazione toosign credenziali in.</span><span class="sxs-lookup"><span data-stu-id="393e4-232">If your app is hosted in an ILB ASE, use your publishing credentials toosign in.</span></span> <span data-ttu-id="393e4-233">sito Hello URL tooaccess hello SCM di un'applicazione ospitata in una base di bilanciamento del carico interno è hello seguente formato:</span><span class="sxs-lookup"><span data-stu-id="393e4-233">hello URL tooaccess hello SCM site of an app hosted in an ILB ASE has hello following format:</span></span> 

```
<appname>.scm.<domain name hello ILB ASE was created with> 
```

<span data-ttu-id="393e4-234">Se la base di bilanciamento del carico interno è il nome di dominio di hello *contoso.net* e il nome dell'app è *testapp*, app hello viene raggiunto in *testapp.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="393e4-234">If your ILB ASE is hello domain name *contoso.net* and your app name is *testapp*, hello app is reached at *testapp.contoso.net*.</span></span> <span data-ttu-id="393e4-235">sito SCM Hello nella relativa viene raggiunto in *testapp.scm.contoso.net*.</span><span class="sxs-lookup"><span data-stu-id="393e4-235">hello SCM site that goes with it is reached at *testapp.scm.contoso.net*.</span></span>

### <a name="functions-and-web-jobs"></a><span data-ttu-id="393e4-236">Funzioni e processi Web</span><span class="sxs-lookup"><span data-stu-id="393e4-236">Functions and Web jobs</span></span> ###

<span data-ttu-id="393e4-237">Funzioni sia Web i processi dipendono hello SCM sito ma sono supportati per l'utilizzo nel portale di hello, anche se le app ASE un bilanciamento del carico interno, purché il browser può raggiungere sito SCM hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-237">Both Functions and Web jobs depend on hello SCM site but are supported for use in hello portal, even if your apps are in an ILB ASE, so long as your browser can reach hello SCM site.</span></span>  <span data-ttu-id="393e4-238">Se si utilizza un certificato autofirmato con ASE il bilanciamento del carico interno, è necessario tooenable il tootrust browser che del certificato.</span><span class="sxs-lookup"><span data-stu-id="393e4-238">If you are using a self-signed certificate with your ILB ASE, you will need tooenable your browser tootrust that certificate.</span></span>  <span data-ttu-id="393e4-239">Per Internet Explorer e bordo che indica che il certificato di hello dispone toobe in condizioni di attendibilità computer hello di archivio.</span><span class="sxs-lookup"><span data-stu-id="393e4-239">For IE and Edge that means hello certificate has toobe in hello computer trust store.</span></span>  <span data-ttu-id="393e4-240">Se si utilizza Chrome, che significa che certificato hello nel browser hello è accettato in precedenza selezionando presumibilmente sito scm hello direttamente.</span><span class="sxs-lookup"><span data-stu-id="393e4-240">If you are using Chrome then that means you accepted hello certificate in hello browser earlier by presumably hitting hello scm site directly.</span></span>  <span data-ttu-id="393e4-241">la soluzione migliore Hello è toouse un certificato commerciale nella catena di browser hello di trust.</span><span class="sxs-lookup"><span data-stu-id="393e4-241">hello best solution is toouse a commercial certificate that is in hello browser chain of trust.</span></span>  

## <a name="ase-ip-addresses"></a><span data-ttu-id="393e4-242">Indirizzi IP dell'ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="393e4-242">ASE IP addresses</span></span> ##

<span data-ttu-id="393e4-243">Un ASE ha qualche toobe di indirizzi IP comunicata.</span><span class="sxs-lookup"><span data-stu-id="393e4-243">An ASE has a few IP addresses toobe aware of.</span></span> <span data-ttu-id="393e4-244">Sono:</span><span class="sxs-lookup"><span data-stu-id="393e4-244">They are:</span></span>

- <span data-ttu-id="393e4-245">**Indirizzo IP in ingresso pubblico**: usato per il traffico di app in un ambiente del servizio app esterno e per il traffico di gestione sia per un ambiente del servizio app esterno che con bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="393e4-245">**Public inbound IP address**: Used for app traffic in an External ASE, and management traffic in both an External ASE and an ILB ASE.</span></span>
- <span data-ttu-id="393e4-246">**Indirizzo IP pubblico in uscita**: utilizzato come hello "da" IP per le connessioni in uscita da hello ASE tale hello lasciare rete virtuale, che non vengono instradati verso il basso di una connessione VPN.</span><span class="sxs-lookup"><span data-stu-id="393e4-246">**Outbound public IP**: Used as hello "from" IP for outbound connections from hello ASE that leave hello VNet, which aren't routed down a VPN.</span></span>
- <span data-ttu-id="393e4-247">**Indirizzo IP con bilanciamento del carico interno**: se si usa un ambiente del servizio app con bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="393e4-247">**ILB IP address**: If you use an ILB ASE.</span></span>
- <span data-ttu-id="393e4-248">**Indirizzi SSL basati su IP assegnati alle app**: possibili solo con un ambiente del servizio app esterno e quando è configurato SSL basato su IP.</span><span class="sxs-lookup"><span data-stu-id="393e4-248">**App-assigned IP-based SSL addresses**: Only possible with an External ASE and when IP-based SSL is configured.</span></span>

<span data-ttu-id="393e4-249">Tutti questi indirizzi IP sono facilmente visibili in un ASEv2 nel portale di Azure hello dall'interfaccia utente di ASE hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-249">All these IP addresses are easily visible in an ASEv2 in hello Azure portal from hello ASE UI.</span></span> <span data-ttu-id="393e4-250">Se si dispone di una base di bilanciamento del carico interno, viene elencato IP hello per hello bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="393e4-250">If you have an ILB ASE, hello IP for hello ILB is listed.</span></span>

![Indirizzi IP][3]

### <a name="app-assigned-ip-addresses"></a><span data-ttu-id="393e4-252">Indirizzi IP assegnati alle app</span><span class="sxs-lookup"><span data-stu-id="393e4-252">App-assigned IP addresses</span></span> ###

<span data-ttu-id="393e4-253">Con un ASE esterno, è possibile assegnare gli indirizzi IP tooindividual app.</span><span class="sxs-lookup"><span data-stu-id="393e4-253">With an External ASE, you can assign IP addresses tooindividual apps.</span></span> <span data-ttu-id="393e4-254">Ciò non è possibile con un ambiente del servizio app con bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="393e4-254">You can't do that with an ILB ASE.</span></span> <span data-ttu-id="393e4-255">Per ulteriori informazioni su come tooconfigure toohave l'app proprio indirizzo IP, vedere [associare un esistente SSL certificato tooAzure web App personalizzate](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="393e4-255">For more information on how tooconfigure your app toohave its own IP address, see [Bind an existing custom SSL certificate tooAzure web apps](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span></span>

<span data-ttu-id="393e4-256">Quando un'applicazione ha il proprio indirizzo SSL basato su IP, hello ASE riserva due porte toomap toothat l'indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="393e4-256">When an app has its own IP-based SSL address, hello ASE reserves two ports toomap toothat IP address.</span></span> <span data-ttu-id="393e4-257">Una porta è per il traffico HTTP, e hello altri porta per HTTPS.</span><span class="sxs-lookup"><span data-stu-id="393e4-257">One port is for HTTP traffic, and hello other port is for HTTPS.</span></span> <span data-ttu-id="393e4-258">Tali porte sono elencate nell'interfaccia utente di base nella sezione di indirizzi IP hello hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-258">Those ports are listed in hello ASE UI in hello IP addresses section.</span></span> <span data-ttu-id="393e4-259">Il traffico deve essere in grado di tooreach tali porte da VIP hello o App hello sono inaccessibili.</span><span class="sxs-lookup"><span data-stu-id="393e4-259">Traffic must be able tooreach those ports from hello VIP or hello apps are inaccessible.</span></span> <span data-ttu-id="393e4-260">Questo requisito è importante tooremember quando si configura rete sicurezza gruppi.</span><span class="sxs-lookup"><span data-stu-id="393e4-260">This requirement is important tooremember when you configure Network Security Groups (NSGs).</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="393e4-261">Gruppi di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="393e4-261">Network Security Groups</span></span> ##

<span data-ttu-id="393e4-262">[Gruppi di sicurezza di rete] [ NSGs] forniscono l'accesso alla rete di hello possibilità toocontrol all'interno di una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="393e4-262">[Network Security Groups][NSGs] provide hello ability toocontrol network access within a VNet.</span></span> <span data-ttu-id="393e4-263">Quando si usa il portale di hello, è implicita regola Nega a toodeny priorità più bassa hello tutti gli elementi.</span><span class="sxs-lookup"><span data-stu-id="393e4-263">When you use hello portal, there's an implicit deny rule at hello lowest priority toodeny everything.</span></span> <span data-ttu-id="393e4-264">Quello che è necessario creare sono le regole di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="393e4-264">What you build are your allow rules.</span></span>

<span data-ttu-id="393e4-265">In un tipo di base, non è necessario accesso toohello macchine virtuali utilizzate toohost hello ASE stesso.</span><span class="sxs-lookup"><span data-stu-id="393e4-265">In an ASE, you don't have access toohello VMs used toohost hello ASE itself.</span></span> <span data-ttu-id="393e4-266">Tali macchine virtuali si trovano in una sottoscrizione gestita da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="393e4-266">They're in a Microsoft-managed subscription.</span></span> <span data-ttu-id="393e4-267">Se si desidera toorestrict accesso toohello App hello ASE, impostare NSGs nella subnet ASE hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-267">If you want toorestrict access toohello apps on hello ASE, set NSGs on hello ASE subnet.</span></span> <span data-ttu-id="393e4-268">In questo modo, prestare particolare attenzione dipendenze ASE toohello.</span><span class="sxs-lookup"><span data-stu-id="393e4-268">In doing so, pay careful attention toohello ASE dependencies.</span></span> <span data-ttu-id="393e4-269">Se si bloccano tutte le dipendenze, hello ASE smette di funzionare.</span><span class="sxs-lookup"><span data-stu-id="393e4-269">If you block any dependencies, hello ASE stops working.</span></span>

<span data-ttu-id="393e4-270">NSGs può essere configurato tramite hello portale di Azure o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="393e4-270">NSGs can be configured through hello Azure portal or via PowerShell.</span></span> <span data-ttu-id="393e4-271">informazioni di Hello riportate di seguito viene illustrato hello portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="393e4-271">hello information here shows hello Azure portal.</span></span> <span data-ttu-id="393e4-272">Per creare e gestire NSGs nel portale di hello come una risorsa di primo livello sotto **rete**.</span><span class="sxs-lookup"><span data-stu-id="393e4-272">You create and manage NSGs in hello portal as a top-level resource under **Networking**.</span></span>

<span data-ttu-id="393e4-273">Quando i requisiti in ingresso e in uscita hello vengono presi in considerazione, hello NSGs dovrebbe essere simile NSGs toohello illustrato in questo esempio.</span><span class="sxs-lookup"><span data-stu-id="393e4-273">When hello inbound and outbound requirements are taken into account, hello NSGs should look similar toohello NSGs shown in this example.</span></span> <span data-ttu-id="393e4-274">intervallo di indirizzi di rete virtuale Hello è _192.168.250.0/16_, senza che sia hello subnet ASE hello in _192.168.251.128/25_.</span><span class="sxs-lookup"><span data-stu-id="393e4-274">hello VNet address range is _192.168.250.0/16_, and hello subnet that hello ASE is in is _192.168.251.128/25_.</span></span>

<span data-ttu-id="393e4-275">nella parte superiore di hello dell'elenco di hello in questo esempio vengono illustrati i requisiti in ingresso primi due Hello per toofunction ASE hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-275">hello first two inbound requirements for hello ASE toofunction are shown at hello top of hello list in this example.</span></span> <span data-ttu-id="393e4-276">Essi abilitare la gestione di ASE e consentire hello ASE toocommunicate con se stesso.</span><span class="sxs-lookup"><span data-stu-id="393e4-276">They enable ASE management and allow hello ASE toocommunicate with itself.</span></span> <span data-ttu-id="393e4-277">Hello altre voci sono tutti i tenant configurabile e può essere regolato rete accesso toohello ASE hosting delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="393e4-277">hello other entries are all tenant configurable and can govern network access toohello ASE-hosted applications.</span></span> 

![Regole di sicurezza in ingresso][4]

<span data-ttu-id="393e4-279">Una regola predefinita consente hello gli indirizzi IP nella subnet di ASE toohello tootalk rete virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-279">A default rule enables hello IPs in hello VNet tootalk toohello ASE subnet.</span></span> <span data-ttu-id="393e4-280">Un'altra regola predefinita consente di bilanciamento del carico di hello, noto anche come VIP pubblico hello, toocommunicate con hello ASE.</span><span class="sxs-lookup"><span data-stu-id="393e4-280">Another default rule enables hello load balancer, also known as hello public VIP, toocommunicate with hello ASE.</span></span> <span data-ttu-id="393e4-281">Selezionare le regole predefinite di hello toosee, **regole predefinite** toohello Avanti **Aggiungi** icona.</span><span class="sxs-lookup"><span data-stu-id="393e4-281">toosee hello default rules, select **Default rules** next toohello **Add** icon.</span></span> <span data-ttu-id="393e4-282">Se si inserisce un'istruzione deny tutte le altre regole dopo hello NSG regole illustrato, impedire il traffico tra l'indirizzo VIP hello e ASE hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-282">If you put a deny everything else rule after hello NSG rules shown, you prevent traffic between hello VIP and hello ASE.</span></span> <span data-ttu-id="393e4-283">tooprevent traffico proveniente da aggiungere all'interno di rete virtuale, hello tooallow la propria regola in ingresso.</span><span class="sxs-lookup"><span data-stu-id="393e4-283">tooprevent traffic coming from inside hello VNet, add your own rule tooallow inbound.</span></span> <span data-ttu-id="393e4-284">Utilizzare un tooAzureLoadBalancer uguale origine con una destinazione di **qualsiasi** e un intervallo di porte di  **\*** .</span><span class="sxs-lookup"><span data-stu-id="393e4-284">Use a source equal tooAzureLoadBalancer with a destination of **Any** and a port range of **\***.</span></span> <span data-ttu-id="393e4-285">Poiché regola gruppo hello è applicato toohello ASE subnet, è necessario toobe specifiche nella destinazione hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-285">Because hello NSG rule is applied toohello ASE subnet, you don't need toobe specific in hello destination.</span></span>

<span data-ttu-id="393e4-286">Se è stato assegnato una app tooyour di indirizzo IP, accertarsi di mantenere hello porte aperte.</span><span class="sxs-lookup"><span data-stu-id="393e4-286">If you assigned an IP address tooyour app, make sure you keep hello ports open.</span></span> <span data-ttu-id="393e4-287">Selezionare le porte, hello toosee **ambiente del servizio App** > **gli indirizzi IP**.</span><span class="sxs-lookup"><span data-stu-id="393e4-287">toosee hello ports, select **App Service Environment** > **IP addresses**.</span></span>  

<span data-ttu-id="393e4-288">Tutti gli elementi di hello mostrati in hello segue le regole in uscita sono necessarie, tranne l'ultimo elemento hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-288">All hello items shown in hello following outbound rules are needed, except for hello last item.</span></span> <span data-ttu-id="393e4-289">Che consentono accesso toohello ASE dipendenze della rete che sono stata rilevate più indietro in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="393e4-289">They enable network access toohello ASE dependencies that were noted earlier in this article.</span></span> <span data-ttu-id="393e4-290">Se si bloccano una o più di queste voci, l'ambiente del servizio app smette di funzionare.</span><span class="sxs-lookup"><span data-stu-id="393e4-290">If you block any of them, your ASE stops working.</span></span> <span data-ttu-id="393e4-291">Hello ultimo elemento hello elenco consente la toocommunicate ASE con altre risorse in una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="393e4-291">hello last item in hello list enables your ASE toocommunicate with other resources in your VNet.</span></span>

![Regole di sicurezza in uscita][5]

<span data-ttu-id="393e4-293">Dopo aver definito i NSGs, assegnare loro toohello subnet che si trova il ASE su.</span><span class="sxs-lookup"><span data-stu-id="393e4-293">After your NSGs are defined, assign them toohello subnet that your ASE is on.</span></span> <span data-ttu-id="393e4-294">Se non si ricorda hello rete virtuale di base o una subnet, è possibile visualizzarlo dal portale di gestione ASE hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-294">If you don’t remember hello ASE VNet or subnet, you can see it from hello ASE management portal.</span></span> <span data-ttu-id="393e4-295">tooassign hello subnet tooyour NSG passare toohello subnet dell'interfaccia utente e selezionare hello gruppo.</span><span class="sxs-lookup"><span data-stu-id="393e4-295">tooassign hello NSG tooyour subnet, go toohello subnet UI and select hello NSG.</span></span>

## <a name="routes"></a><span data-ttu-id="393e4-296">Route</span><span class="sxs-lookup"><span data-stu-id="393e4-296">Routes</span></span> ##

<span data-ttu-id="393e4-297">Le route diventano problematiche più di frequente quando si configura la rete virtuale con Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="393e4-297">Routes become problematic most commonly when you configure your VNet with Azure ExpressRoute.</span></span> <span data-ttu-id="393e4-298">Esistono tre tipi di route in una rete virtuale:</span><span class="sxs-lookup"><span data-stu-id="393e4-298">There are three types of routes in a VNet:</span></span>

-   <span data-ttu-id="393e4-299">Route di sistema</span><span class="sxs-lookup"><span data-stu-id="393e4-299">System routes</span></span>
-   <span data-ttu-id="393e4-300">Route BGP</span><span class="sxs-lookup"><span data-stu-id="393e4-300">BGP routes</span></span>
-   <span data-ttu-id="393e4-301">Route definite dall'utente</span><span class="sxs-lookup"><span data-stu-id="393e4-301">User-defined routes (UDRs)</span></span>

<span data-ttu-id="393e4-302">Le route BGP sono prioritarie rispetto alle route di sistema.</span><span class="sxs-lookup"><span data-stu-id="393e4-302">BGP routes override system routes.</span></span> <span data-ttu-id="393e4-303">Le route definite dall'utente sono prioritarie rispetto alle route BGP.</span><span class="sxs-lookup"><span data-stu-id="393e4-303">UDRs override BGP routes.</span></span> <span data-ttu-id="393e4-304">Per altre informazioni sulle route nelle reti virtuali di Azure, vedere [Panoramica delle route definite dall'utente][UDRs].</span><span class="sxs-lookup"><span data-stu-id="393e4-304">For more information about routes in Azure virtual networks, see [User-defined routes overview][UDRs].</span></span>

<span data-ttu-id="393e4-305">database SQL di Azure Hello ASE hello viene utilizzato il sistema di hello toomanage è presente un firewall.</span><span class="sxs-lookup"><span data-stu-id="393e4-305">hello Azure SQL database that hello ASE uses toomanage hello system has a firewall.</span></span> <span data-ttu-id="393e4-306">Comunicazione toooriginate da hello VIP pubblico ASE richiede.</span><span class="sxs-lookup"><span data-stu-id="393e4-306">It requires communication toooriginate from hello ASE public VIP.</span></span> <span data-ttu-id="393e4-307">Database SQL toohello connessioni da hello ASE verrà negato se vengono inviati verso il basso hello connessione ExpressRoute e un altro indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="393e4-307">Connections toohello SQL database from hello ASE will be denied if they are sent down hello ExpressRoute connection and out another IP address.</span></span>

<span data-ttu-id="393e4-308">Se l'invio delle richieste di gestione di risposte tooincoming verso il basso hello ExpressRoute, indirizzo di risposta hello è diverso da quello di destinazione originale hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-308">If replies tooincoming management requests are sent down hello ExpressRoute, hello reply address is different than hello original destination.</span></span> <span data-ttu-id="393e4-309">Questa mancata corrispondenza interrompe la comunicazione TCP hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-309">This mismatch breaks hello TCP communication.</span></span>

<span data-ttu-id="393e4-310">Per i toowork ASE mentre la rete virtuale è configurata con ExpressRoute, toodo cosa più semplice hello è:</span><span class="sxs-lookup"><span data-stu-id="393e4-310">For your ASE toowork while your VNet is configured with an ExpressRoute, hello easiest thing toodo is:</span></span>

-   <span data-ttu-id="393e4-311">Configurare ExpressRoute tooadvertise _0.0.0.0/0_.</span><span class="sxs-lookup"><span data-stu-id="393e4-311">Configure ExpressRoute tooadvertise _0.0.0.0/0_.</span></span> <span data-ttu-id="393e4-312">Per impostazione predefinita, tutto il traffico locale in uscita viene forzato.</span><span class="sxs-lookup"><span data-stu-id="393e4-312">By default, it force tunnels all outbound traffic on-premises.</span></span>
-   <span data-ttu-id="393e4-313">Creare una route definita dall'utente.</span><span class="sxs-lookup"><span data-stu-id="393e4-313">Create a UDR.</span></span> <span data-ttu-id="393e4-314">Applicarlo subnet toohello contenente hello ASE con un prefisso dell'indirizzo _0.0.0.0/0_ e tipo di hop di un successivo _Internet_.</span><span class="sxs-lookup"><span data-stu-id="393e4-314">Apply it toohello subnet that contains hello ASE with an address prefix of _0.0.0.0/0_ and a next hop type of _Internet_.</span></span>

<span data-ttu-id="393e4-315">Se si apportano queste due modifiche, il traffico destinato a internet proveniente dalla subnet ASE hello non è forzato ExpressRoute hello e hello ASE works.</span><span class="sxs-lookup"><span data-stu-id="393e4-315">If you make these two changes, internet-destined traffic that originates from hello ASE subnet isn't forced down hello ExpressRoute and hello ASE works.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="393e4-316">route Hello definite in un UDR devono essere sufficientemente specifica tootake precedenza su qualsiasi route annunciate dalla configurazione di ExpressRoute hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-316">hello routes defined in a UDR must be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="393e4-317">Hello esempio precedente Usa intervallo di indirizzi hello ampie 0.0.0.0/0.</span><span class="sxs-lookup"><span data-stu-id="393e4-317">hello preceding example uses hello broad 0.0.0.0/0 address range.</span></span> <span data-ttu-id="393e4-318">Può essere accidentalmente sostituito dagli annunci di route che usano intervalli di indirizzi più specifici.</span><span class="sxs-lookup"><span data-stu-id="393e4-318">It can potentially be accidentally overridden by route advertisements that use more specific address ranges.</span></span>
>
> <span data-ttu-id="393e4-319">ASEs non sono supportate con ExpressRoute configurazioni cross-annunciano le route da hello peering pubblico toohello peering privato percorso.</span><span class="sxs-lookup"><span data-stu-id="393e4-319">ASEs aren't supported with ExpressRoute configurations that cross-advertise routes from hello public-peering path toohello private-peering path.</span></span> <span data-ttu-id="393e4-320">Le configurazioni di ExpressRoute con peering pubblico configurato riceveranno gli annunci di route da Microsoft.</span><span class="sxs-lookup"><span data-stu-id="393e4-320">ExpressRoute configurations with public peering configured receive route advertisements from Microsoft.</span></span> <span data-ttu-id="393e4-321">gli annunci Hello contengono un elevato numero di intervalli di indirizzi IP di Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="393e4-321">hello advertisements contain a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="393e4-322">Se gli intervalli di indirizzi hello tra annunciati nel percorso di peering privato hello, tutti i pacchetti di rete in uscita dalla subnet hello del ASE sono infrastruttura di rete locale del cliente tooa tunneling forzato.</span><span class="sxs-lookup"><span data-stu-id="393e4-322">If hello address ranges are cross-advertised on hello private-peering path, all outbound network packets from hello ASE's subnet are force tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="393e4-323">Questo flusso di rete non è attualmente supportato con ambienti del servizio app.</span><span class="sxs-lookup"><span data-stu-id="393e4-323">This network flow is currently not supported with ASEs.</span></span> <span data-ttu-id="393e4-324">Un problema di toothis soluzione è toostop le route tra annunci hello peering pubblico toohello peering privato percorso.</span><span class="sxs-lookup"><span data-stu-id="393e4-324">One solution toothis problem is toostop cross-advertising routes from hello public-peering path toohello private-peering path.</span></span>

<span data-ttu-id="393e4-325">toocreate un UDR, seguire questi passaggi:</span><span class="sxs-lookup"><span data-stu-id="393e4-325">toocreate a UDR, follow these steps:</span></span>

1. <span data-ttu-id="393e4-326">Passare toohello portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="393e4-326">Go toohello Azure portal.</span></span> <span data-ttu-id="393e4-327">Selezionare **Rete** > **Tabelle route**.</span><span class="sxs-lookup"><span data-stu-id="393e4-327">Select **Networking** > **Route Tables**.</span></span>

2. <span data-ttu-id="393e4-328">Creare una nuova tabella di route in hello stessa regione della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="393e4-328">Create a new route table in hello same region as your VNet.</span></span>

3. <span data-ttu-id="393e4-329">Dall'interfaccia utente per le tabelle route selezionare **Route** > **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="393e4-329">From within your route table UI, select **Routes** > **Add**.</span></span>

4. <span data-ttu-id="393e4-330">Set hello **tipo dell'hop successivo** troppo**Internet** hello e **prefisso dell'indirizzo** troppo**0.0.0.0/0**.</span><span class="sxs-lookup"><span data-stu-id="393e4-330">Set hello **Next hop type** too**Internet** and hello **Address prefix** too**0.0.0.0/0**.</span></span> <span data-ttu-id="393e4-331">Selezionare **Salva**.</span><span class="sxs-lookup"><span data-stu-id="393e4-331">Select **Save**.</span></span>

    <span data-ttu-id="393e4-332">Quindi possibile vedere simile alla seguente hello:</span><span class="sxs-lookup"><span data-stu-id="393e4-332">You then see something like hello following:</span></span>

    ![Route funzionali][6]

5. <span data-ttu-id="393e4-334">Dopo aver creato una nuova tabella di routing hello, andare subnet toohello che contiene il tipo di base.</span><span class="sxs-lookup"><span data-stu-id="393e4-334">After you create hello new route table, go toohello subnet that contains your ASE.</span></span> <span data-ttu-id="393e4-335">Selezionare la tabella di routing hello elenco nel portale di hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-335">Select your route table from hello list in hello portal.</span></span> <span data-ttu-id="393e4-336">Dopo aver salvato la modifica hello, dovrebbe quindi NSGs hello e le route indicate con la subnet.</span><span class="sxs-lookup"><span data-stu-id="393e4-336">After you save hello change, you should then see hello NSGs and routes noted with your subnet.</span></span>

    ![Gruppi di sicurezza di rete e route][7]

### <a name="deploy-into-existing-azure-virtual-networks-that-are-integrated-with-expressroute"></a><span data-ttu-id="393e4-338">Distribuzione nelle reti virtuali di Azure esistenti integrate con ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="393e4-338">Deploy into existing Azure virtual networks that are integrated with ExpressRoute</span></span> ###

<span data-ttu-id="393e4-339">toodeploy il ASE in una rete virtuale che si integra con ExpressRoute, preconfigurare subnet hello in cui si desidera ASE hello distribuito.</span><span class="sxs-lookup"><span data-stu-id="393e4-339">toodeploy your ASE into a VNet that's integrated with ExpressRoute, preconfigure hello subnet where you want hello ASE deployed.</span></span> <span data-ttu-id="393e4-340">Utilizzare quindi un toodeploy modello di gestione risorse è.</span><span class="sxs-lookup"><span data-stu-id="393e4-340">Then use a Resource Manager template toodeploy it.</span></span> <span data-ttu-id="393e4-341">toocreate un ASE in una rete virtuale è già configurato ExpressRoute:</span><span class="sxs-lookup"><span data-stu-id="393e4-341">toocreate an ASE in a VNet that already has ExpressRoute configured:</span></span>

- <span data-ttu-id="393e4-342">Creare un hello toohost subnet ASE.</span><span class="sxs-lookup"><span data-stu-id="393e4-342">Create a subnet toohost hello ASE.</span></span>

    > [!NOTE]
    > <span data-ttu-id="393e4-343">Nessun altro elemento può essere nella subnet hello ma ASE hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-343">Nothing else can be in hello subnet but hello ASE.</span></span> <span data-ttu-id="393e4-344">Essere toochoose che uno spazio di indirizzi che consente la crescita futura.</span><span class="sxs-lookup"><span data-stu-id="393e4-344">Be sure toochoose an address space that allows for future growth.</span></span> <span data-ttu-id="393e4-345">Non è possibile modificare questa impostazione in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="393e4-345">You can't change this setting later.</span></span> <span data-ttu-id="393e4-346">È consigliabile una dimensione pari a `/25` con 128 indirizzi.</span><span class="sxs-lookup"><span data-stu-id="393e4-346">We recommend a size of `/25` with 128 addresses.</span></span>

- <span data-ttu-id="393e4-347">Creare UDRs (ad esempio, le tabelle di route) come descritto in precedenza e impostarlo su subnet hello.</span><span class="sxs-lookup"><span data-stu-id="393e4-347">Create UDRs (for example, route tables) as described earlier, and set that on hello subnet.</span></span>
- <span data-ttu-id="393e4-348">Creare hello ASE utilizzando un modello di gestione delle risorse, come descritto in [creare un ASE utilizzando un modello di gestione risorse][MakeASEfromTemplate].</span><span class="sxs-lookup"><span data-stu-id="393e4-348">Create hello ASE by using a Resource Manager template as described in [Create an ASE by using a Resource Manager template][MakeASEfromTemplate].</span></span>

<!--Image references-->
[1]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow.png
[2]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow2.png
[3]: ./media/network_considerations_with_an_app_service_environment/networkase-ipaddresses.png
[4]: ./media/network_considerations_with_an_app_service_environment/networkase-inboundnsg.png
[5]: ./media/network_considerations_with_an_app_service_environment/networkase-outboundnsg.png
[6]: ./media/network_considerations_with_an_app_service_environment/networkase-udr.png
[7]: ./media/network_considerations_with_an_app_service_environment/networkase-subnet.png

<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ASEManagement]: ./management-addresses.md
