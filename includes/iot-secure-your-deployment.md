# <a name="secure-your-iot-deployment"></a><span data-ttu-id="3f0f6-101">Proteggere la distribuzione di IoT</span><span class="sxs-lookup"><span data-stu-id="3f0f6-101">Secure your IoT deployment</span></span>
<span data-ttu-id="3f0f6-102">Livello di dettaglio successivo hello fornite per la protezione dell'infrastruttura di hello basato su Azure IoT Internet delle cose (IoT).</span><span class="sxs-lookup"><span data-stu-id="3f0f6-102">This article provides hello next level of detail for securing hello Azure IoT-based Internet of Things (IoT) infrastructure.</span></span> <span data-ttu-id="3f0f6-103">I dettagli per la configurazione e distribuzione di ogni componente di livello tooimplementation vengono collegati.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-103">It links tooimplementation level details for configuring and deploying each component.</span></span> <span data-ttu-id="3f0f6-104">Offre anche una serie di confronti e scelte tra i vari metodi concorrenti.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-104">It also provides comparisons and choices between various competing methods.</span></span>

<span data-ttu-id="3f0f6-105">Proteggere la distribuzione di Azure IoT hello può essere suddivisi in tre aree di sicurezza seguente hello:</span><span class="sxs-lookup"><span data-stu-id="3f0f6-105">Securing hello Azure IoT deployment can be divided into hello following three security areas:</span></span>

* <span data-ttu-id="3f0f6-106">**Sicurezza del dispositivo**: protezione mentre è distribuita in hello wild di dispositivo IoT hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-106">**Device Security**: Securing hello IoT device while it is deployed in hello wild.</span></span>
* <span data-ttu-id="3f0f6-107">**Sicurezza della connessione**: assicurandosi di tutti i dati trasmessi tra l'IoT Hub e il dispositivo IoT hello è riservato e da eventuali alterazioni.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-107">**Connection Security**: Ensuring all data transmitted between hello IoT device and IoT Hub is confidential and tamper-proof.</span></span>
* <span data-ttu-id="3f0f6-108">**Protezione del cloud**: fornendo una modalità toosecure dati mentre vengono spostati e viene archiviato nel cloud hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-108">**Cloud Security**: Providing a means toosecure data while it moves through, and is stored in hello cloud.</span></span>

![Tre aree di sicurezza][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a><span data-ttu-id="3f0f6-110">Proteggere il provisioning dei dispositivi e l'autenticazione</span><span class="sxs-lookup"><span data-stu-id="3f0f6-110">Secure device provisioning and authentication</span></span>
<span data-ttu-id="3f0f6-111">Hello Azure IoT Suite consente di proteggere i dispositivi IoT da hello due metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="3f0f6-111">hello Azure IoT Suite secures IoT devices by hello following two methods:</span></span>

* <span data-ttu-id="3f0f6-112">Fornendo una chiave di identità univoco (token di sicurezza) per ogni dispositivo, che può essere usato dall'hello dispositivo toocommunicate con hello IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-112">By providing a unique identity key (security tokens) for each device, which can be used by hello device toocommunicate with hello IoT Hub.</span></span>
* <span data-ttu-id="3f0f6-113">Tramite un dispositivo [certificato x. 509] [ lnk-x509] e la chiave privata come un toohello di mezzo tooauthenticate hello dispositivo IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-113">By using an on-device [X.509 certificate][lnk-x509] and private key as a means tooauthenticate hello device toohello IoT Hub.</span></span> <span data-ttu-id="3f0f6-114">Questo metodo di autenticazione assicura che hello chiave privata nel dispositivo hello non è noto all'esterno di dispositivo hello in qualsiasi momento, fornendo un livello di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-114">This authentication method ensures that hello private key on hello device is not known outside hello device at any time, providing a higher level of security.</span></span>

<span data-ttu-id="3f0f6-115">metodo token di sicurezza Hello fornisce l'autenticazione per ogni chiamata effettuata da hello dispositivo tooIoT Hub associando la chiamata di hello tooeach chiave simmetrica.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-115">hello security token method provides authentication for each call made by hello device tooIoT Hub by associating hello symmetric key tooeach call.</span></span> <span data-ttu-id="3f0f6-116">L'autenticazione basata su certificati x. 509 consente l'autenticazione di un dispositivo IoT a livello fisico di hello come parte di stabilire la connessione TLS hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-116">X.509-based authentication allows authentication of an IoT device at hello physical layer as part of hello TLS connection establishment.</span></span> <span data-ttu-id="3f0f6-117">il metodo basato su token di sicurezza Hello è utilizzabile senza l'autenticazione di x. 509 hello, che è un modello meno sicura.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-117">hello security-token-based method can be used without hello X.509 authentication which is a less secure pattern.</span></span> <span data-ttu-id="3f0f6-118">Hello scelta tra metodi hello due principalmente dipende da come proteggere hello l'autenticazione del dispositivo deve toobe e la disponibilità di archiviazione protetta nel dispositivo hello (toostore hello chiave privata in modo sicuro).</span><span class="sxs-lookup"><span data-stu-id="3f0f6-118">hello choice between hello two methods is primarily dictated by how secure hello device authentication needs toobe, and availability of secure storage on hello device (toostore hello private key securely).</span></span>

## <a name="iot-hub-security-tokens"></a><span data-ttu-id="3f0f6-119">Token di sicurezza dell'hub IoT</span><span class="sxs-lookup"><span data-stu-id="3f0f6-119">IoT Hub security tokens</span></span>
<span data-ttu-id="3f0f6-120">IoT Hub Usa sicurezza token tooauthenticate dispositivi e servizi tooavoid l'invio delle chiavi nella rete hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-120">IoT Hub uses security tokens tooauthenticate devices and services tooavoid sending keys on hello network.</span></span> <span data-ttu-id="3f0f6-121">Inoltre, i token di sicurezza hanno una validità limitata in termini di tempo e portata.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-121">Additionally, security tokens are limited in time validity and scope.</span></span> <span data-ttu-id="3f0f6-122">Gli Azure IoT SDK generano automaticamente i token senza richiedere una configurazione speciale.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-122">Azure IoT SDKs automatically generate tokens without requiring any special configuration.</span></span> <span data-ttu-id="3f0f6-123">Alcuni scenari, tuttavia, richiedono toogenerate utente hello e utilizzano direttamente i token di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-123">Some scenarios, however, require hello user toogenerate and use security tokens directly.</span></span> <span data-ttu-id="3f0f6-124">Sono inclusi l'uso diretto hello superfici hello MQTT, AMQP o HTTP, o implementazione hello del modello di servizio token di hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-124">These include hello direct use of hello MQTT, AMQP, or HTTP surfaces, or hello implementation of hello token service pattern.</span></span>

<span data-ttu-id="3f0f6-125">Ulteriori informazioni sulla struttura di hello del token di sicurezza hello e sul relativo utilizzo, vedere hello seguenti articoli:</span><span class="sxs-lookup"><span data-stu-id="3f0f6-125">More details on hello structure of hello security token and its usage can be found in hello following articles:</span></span>

* <span data-ttu-id="3f0f6-126">[Struttura dei token di sicurezza][lnk-security-tokens]</span><span class="sxs-lookup"><span data-stu-id="3f0f6-126">[Security token structure][lnk-security-tokens]</span></span>
* <span data-ttu-id="3f0f6-127">[Uso dei token SAS come dispositivo][lnk-sas-tokens]</span><span class="sxs-lookup"><span data-stu-id="3f0f6-127">[Using SAS tokens as a device][lnk-sas-tokens]</span></span>

<span data-ttu-id="3f0f6-128">Ogni IoT Hub è un [Registro di sistema di identità] [ lnk-identity-registry] che può essere utilizzato toocreate per ogni dispositivo risorse nel servizio di hello, ad esempio una coda contenente messaggi da cloud a dispositivo in transito e tooallow accesso toohello endpoint che utilizzano il dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-128">Each IoT Hub has an [identity registry][lnk-identity-registry] that can be used toocreate per-device resources in hello service, such as a queue that contains in-flight cloud-to-device messages, and tooallow access toohello device-facing endpoints.</span></span> <span data-ttu-id="3f0f6-129">Hello del Registro di sistema di IoT Hub identità fornisce l'archiviazione sicura di identità di dispositivi e le chiavi di sicurezza per una soluzione.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-129">hello IoT Hub identity registry provides secure storage of device identities and security keys for a solution.</span></span> <span data-ttu-id="3f0f6-130">È possono aggiungere singoli o gruppi di identità dispositivo tooan consente di elenco o un elenco di blocco, abilitare il controllo completo sul dispositivo l'accesso.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-130">Individual or groups of device identities can be added tooan allow list, or a block list, enabling complete control over device access.</span></span> <span data-ttu-id="3f0f6-131">Hello articoli seguenti offrono ulteriori informazioni sulla struttura di hello del Registro di identità hello e operazioni supportate.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-131">hello following articles provide more details on hello structure of hello identity registry and supported operations.</span></span>

<span data-ttu-id="3f0f6-132">[L'hub IoT supporta protocolli quali MQTT, AMQP e HTTP][lnk-protocols].</span><span class="sxs-lookup"><span data-stu-id="3f0f6-132">[IoT Hub supports protocols such as MQTT, AMQP, and HTTP][lnk-protocols].</span></span> <span data-ttu-id="3f0f6-133">Ognuno di questi protocolli utilizzare token di sicurezza da hello IoT dispositivo tooIoT Hub in modo diverso:</span><span class="sxs-lookup"><span data-stu-id="3f0f6-133">Each of these protocols use security tokens from hello IoT device tooIoT Hub differently:</span></span>

* <span data-ttu-id="3f0f6-134">AMQP: Sicurezza di semplice e basata sulle attestazioni AMQP SASL ({policyName}@sas.root. { iothubName} nel caso di hello di token a livello di hub IoT; {deviceId} in caso di token con ambito dispositivo).</span><span class="sxs-lookup"><span data-stu-id="3f0f6-134">AMQP: SASL PLAIN and AMQP Claims-based security ({policyName}@sas.root.{iothubName} in hello case of IoT hub-level tokens; {deviceId} in case of device-scoped tokens).</span></span>
* <span data-ttu-id="3f0f6-135">MQTT: La connessione utilizza pacchetto {deviceId} come hello {ClientId}, {IoThubhostname} / {deviceId} in hello **Username** token di campo e una firma di accesso condiviso in hello **Password** campo.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-135">MQTT: CONNECT packet uses {deviceId} as hello {ClientId}, {IoThubhostname}/{deviceId} in hello **Username** field and a SAS token in hello **Password** field.</span></span>
* <span data-ttu-id="3f0f6-136">HTTP: Token valido è nell'intestazione di richiesta di autorizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-136">HTTP: Valid token is in hello authorization request header.</span></span>

<span data-ttu-id="3f0f6-137">Registro di sistema di IoT Hub identità può essere tooconfigure utilizzate le credenziali di sicurezza per ogni dispositivo e il controllo degli accessi.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-137">IoT Hub identity registry can be used tooconfigure per-device security credentials and access control.</span></span> <span data-ttu-id="3f0f6-138">Se tuttavia una soluzione IoT presenta già un investimento significativo in un [registro personalizzato di identità dei dispositivi e/o in uno schema di autenticazione][lnk-custom-auth], è possibile integrarla nell'infrastruttura esistente con l'hub IoT creando un servizio token.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-138">However, if an IoT solution already has a significant investment in a [custom device identity registry and/or authentication scheme][lnk-custom-auth], it can be integrated into an existing infrastructure with IoT Hub by creating a token service.</span></span>

### <a name="x509-certificate-based-device-authentication"></a><span data-ttu-id="3f0f6-139">Autenticazione del dispositivo basata sul certificato x.509</span><span class="sxs-lookup"><span data-stu-id="3f0f6-139">X.509 certificate-based device authentication</span></span>
<span data-ttu-id="3f0f6-140">utilizzo di Hello un [basato su dispositivi certificato x. 509] [ lnk-use-x509] e la coppia di chiavi pubblica e privata associata consente l'autenticazione aggiuntiva a livello fisico hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-140">hello use of a [device-based X.509 certificate][lnk-use-x509] and its associated private and public key pair allows additional authentication at hello physical layer.</span></span> <span data-ttu-id="3f0f6-141">la chiave privata di Hello viene archiviata in modo sicuro nel dispositivo hello e non è individuabile esterno hello dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-141">hello private key is stored securely in hello device and is not discoverable outside hello device.</span></span> <span data-ttu-id="3f0f6-142">certificato x. 509 Hello contiene informazioni sul dispositivo hello, ad esempio, un ID dispositivo e altri dettagli dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-142">hello X.509 certificate contains information about hello device, such as device ID, and other organizational details.</span></span> <span data-ttu-id="3f0f6-143">La firma del certificato hello viene generata utilizzando la chiave privata di hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-143">A signature of hello certificate is generated by using hello private key.</span></span>

<span data-ttu-id="3f0f6-144">Flusso di provisioning di dispositivi di alto livello:</span><span class="sxs-lookup"><span data-stu-id="3f0f6-144">High-level device provisioning flow:</span></span>

* <span data-ttu-id="3f0f6-145">Associare un identificatore tooa dispositivo fisico: identità del dispositivo e/o dispositivo toohello associato di certificato x. 509 durante la periferica di produzione o la messa in funzione.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-145">Associate an identifier tooa physical device – device identity and/or X.509 certificate associated toohello device during device manufacturing or commissioning.</span></span>
* <span data-ttu-id="3f0f6-146">Creare una voce di identità corrispondente nell'IoT Hub: identità del dispositivo e le informazioni di dispositivo associati nel Registro di identità IoT Hub hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-146">Create a corresponding identity entry in IoT Hub – device identity and associated device information in hello IoT Hub identity registry.</span></span>
* <span data-ttu-id="3f0f6-147">Archiviare in modo sicuro l'identificazione personale del certificato x.509 nel registro di identità dell'hub IoT.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-147">Securely store X.509 certificate thumbprint in IoT Hub identity registry.</span></span>

### <a name="root-certificate-on-device"></a><span data-ttu-id="3f0f6-148">Certificato principale nel dispositivo</span><span class="sxs-lookup"><span data-stu-id="3f0f6-148">Root certificate on device</span></span>
<span data-ttu-id="3f0f6-149">Il tentativo di stabilire una connessione sicura TLS con l'IoT Hub, dispositivi IoT hello autentica IoT Hub utilizzando un certificato radice che fa parte del dispositivo hello SDK.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-149">While establishing a secure TLS connection with IoT Hub, hello IoT device authenticates IoT Hub using a root certificate which is part of hello device SDK.</span></span> <span data-ttu-id="3f0f6-150">Per client hello C SDK certificato hello si trova nella cartella hello "\\c\\certificati" nella radice hello repository hello.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-150">For hello C client SDK hello certificate is located under hello folder "\\c\\certs" under hello root of hello repo.</span></span> <span data-ttu-id="3f0f6-151">Anche se questi certificati sono di lunga durata, possono comunque scadere o essere revocati.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-151">Though these root certificates are long-lived, they still may expire or be revoked.</span></span> <span data-ttu-id="3f0f6-152">Se non esiste alcun modo di aggiornamento del certificato hello sul dispositivo hello, hello dispositivo potrebbe non essere in grado di toosubsequently connettersi toohello IoT Hub (o qualsiasi altro servizio cloud).</span><span class="sxs-lookup"><span data-stu-id="3f0f6-152">If there is no way of updating hello certificate on hello device, hello device may not be able toosubsequently connect toohello IoT Hub (or any other cloud service).</span></span> <span data-ttu-id="3f0f6-153">Con un certificato radice di mezzo tooupdate hello dopo aver distribuito dispositivo IoT hello in modo efficace sarà possibile limitare questo rischio.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-153">Having a means tooupdate hello root certificate once hello IoT device is deployed will effectively mitigate this risk.</span></span>

## <a name="securing-hello-connection"></a><span data-ttu-id="3f0f6-154">Protezione hello connessione</span><span class="sxs-lookup"><span data-stu-id="3f0f6-154">Securing hello connection</span></span>
<span data-ttu-id="3f0f6-155">Connessione Internet tra dispositivo IoT hello e IoT Hub è protetto tramite hello Transport Layer Security (TLS) standard.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-155">Internet connection between hello IoT device and IoT Hub is secured using hello Transport Layer Security (TLS) standard.</span></span> <span data-ttu-id="3f0f6-156">IoT di Azure supporta gli standard[TLS 1.2][lnk-tls12], TLS 1.1 e TLS 1.0, in questo ordine.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-156">Azure IoT supports [TLS 1.2][lnk-tls12], TLS 1.1 and TLS 1.0, in this order.</span></span> <span data-ttu-id="3f0f6-157">Il supporto per lo standard TLS 1.0 viene fornito soltanto per la compatibilità con le versioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-157">Support for TLS 1.0 is provided for backward compatibility only.</span></span> <span data-ttu-id="3f0f6-158">È consigliabile toouse TLS 1.2 in quanto fornisce hello maggiore protezione.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-158">It is recommended toouse TLS 1.2 since it provides hello most security.</span></span>

<span data-ttu-id="3f0f6-159">Azure IoT Suite supporta hello seguenti pacchetti di crittografia, in questo ordine.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-159">Azure IoT Suite supports hello following Cipher Suites, in this order.</span></span>

| <span data-ttu-id="3f0f6-160">Pacchetto di crittografia</span><span class="sxs-lookup"><span data-stu-id="3f0f6-160">Cipher Suite</span></span> | <span data-ttu-id="3f0f6-161">Length</span><span class="sxs-lookup"><span data-stu-id="3f0f6-161">Length</span></span> |
| --- | --- |
| <span data-ttu-id="3f0f6-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (uguale a</span><span class="sxs-lookup"><span data-stu-id="3f0f6-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="3f0f6-163">RSA a 7680 bit) FS</span><span class="sxs-lookup"><span data-stu-id="3f0f6-163">7680 bits RSA) FS</span></span> |<span data-ttu-id="3f0f6-164">256</span><span class="sxs-lookup"><span data-stu-id="3f0f6-164">256</span></span> |
| <span data-ttu-id="3f0f6-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (uguale a</span><span class="sxs-lookup"><span data-stu-id="3f0f6-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="3f0f6-166">RSA a 3072 bit) FS</span><span class="sxs-lookup"><span data-stu-id="3f0f6-166">3072 bits RSA) FS</span></span> |<span data-ttu-id="3f0f6-167">128</span><span class="sxs-lookup"><span data-stu-id="3f0f6-167">128</span></span> |
| <span data-ttu-id="3f0f6-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (uguale a</span><span class="sxs-lookup"><span data-stu-id="3f0f6-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="3f0f6-169">RSA a 7680 bit) FS</span><span class="sxs-lookup"><span data-stu-id="3f0f6-169">7680 bits RSA) FS</span></span> |<span data-ttu-id="3f0f6-170">256</span><span class="sxs-lookup"><span data-stu-id="3f0f6-170">256</span></span> |
| <span data-ttu-id="3f0f6-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (uguale a</span><span class="sxs-lookup"><span data-stu-id="3f0f6-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="3f0f6-172">RSA a 3072 bit) FS</span><span class="sxs-lookup"><span data-stu-id="3f0f6-172">3072 bits RSA) FS</span></span> |<span data-ttu-id="3f0f6-173">128</span><span class="sxs-lookup"><span data-stu-id="3f0f6-173">128</span></span> |
| <span data-ttu-id="3f0f6-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span><span class="sxs-lookup"><span data-stu-id="3f0f6-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span></span> |<span data-ttu-id="3f0f6-175">256</span><span class="sxs-lookup"><span data-stu-id="3f0f6-175">256</span></span> |
| <span data-ttu-id="3f0f6-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span><span class="sxs-lookup"><span data-stu-id="3f0f6-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span></span> |<span data-ttu-id="3f0f6-177">128</span><span class="sxs-lookup"><span data-stu-id="3f0f6-177">128</span></span> |
| <span data-ttu-id="3f0f6-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span><span class="sxs-lookup"><span data-stu-id="3f0f6-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span></span> |<span data-ttu-id="3f0f6-179">256</span><span class="sxs-lookup"><span data-stu-id="3f0f6-179">256</span></span> |
| <span data-ttu-id="3f0f6-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span><span class="sxs-lookup"><span data-stu-id="3f0f6-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span></span> |<span data-ttu-id="3f0f6-181">128</span><span class="sxs-lookup"><span data-stu-id="3f0f6-181">128</span></span> |
| <span data-ttu-id="3f0f6-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span><span class="sxs-lookup"><span data-stu-id="3f0f6-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span></span> |<span data-ttu-id="3f0f6-183">256</span><span class="sxs-lookup"><span data-stu-id="3f0f6-183">256</span></span> |
| <span data-ttu-id="3f0f6-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span><span class="sxs-lookup"><span data-stu-id="3f0f6-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span></span> |<span data-ttu-id="3f0f6-185">128</span><span class="sxs-lookup"><span data-stu-id="3f0f6-185">128</span></span> |
| <span data-ttu-id="3f0f6-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span><span class="sxs-lookup"><span data-stu-id="3f0f6-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span></span> |<span data-ttu-id="3f0f6-187">112</span><span class="sxs-lookup"><span data-stu-id="3f0f6-187">112</span></span> |

## <a name="securing-hello-cloud"></a><span data-ttu-id="3f0f6-188">La protezione cloud hello</span><span class="sxs-lookup"><span data-stu-id="3f0f6-188">Securing hello cloud</span></span>
<span data-ttu-id="3f0f6-189">L'hub IoT di Azure consente la definizione dei [criteri di controllo di accesso][lnk-protocols] per ogni chiave di sicurezza,</span><span class="sxs-lookup"><span data-stu-id="3f0f6-189">Azure IoT Hub allows definition of [access control policies][lnk-protocols] for each security key.</span></span> <span data-ttu-id="3f0f6-190">Usa hello seguente set di autorizzazioni toogrant accesso tooeach degli endpoint dell'IoT Hub.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-190">It uses hello following set of permissions toogrant access tooeach of IoT Hub's endpoints.</span></span> <span data-ttu-id="3f0f6-191">Le autorizzazioni limitano hello accesso tooan che hub IoT in base alle funzionalità.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-191">Permissions limit hello access tooan IoT Hub based on functionality.</span></span>

* <span data-ttu-id="3f0f6-192">**RegistryRead**.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-192">**RegistryRead**.</span></span> <span data-ttu-id="3f0f6-193">Concede l'accesso in lettura toohello identità Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-193">Grants read access toohello identity registry.</span></span> <span data-ttu-id="3f0f6-194">Per altre informazioni, vedere [Registro di identità][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="3f0f6-194">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="3f0f6-195">**RegistryReadWrite**.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-195">**RegistryReadWrite**.</span></span> <span data-ttu-id="3f0f6-196">Concede l'accesso in lettura e scrittura toohello identità Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-196">Grants read and write access toohello identity registry.</span></span> <span data-ttu-id="3f0f6-197">Per altre informazioni, vedere [Registro di identità][lnk-identity-registry].</span><span class="sxs-lookup"><span data-stu-id="3f0f6-197">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="3f0f6-198">**ServiceConnect**.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-198">**ServiceConnect**.</span></span> <span data-ttu-id="3f0f6-199">Concede l'accesso toocloud orientati ai servizi comunicazione e gli endpoint di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-199">Grants access toocloud service-facing communication and monitoring endpoints.</span></span> <span data-ttu-id="3f0f6-200">Ad esempio, concede autorizzazioni tooback-end cloud services tooreceive da dispositivo a cloud messaggi, invio di messaggi da cloud a dispositivo e recuperare hello corrispondente conferma di recapito.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-200">For example, it grants permission tooback-end cloud services tooreceive device-to-cloud messages, send cloud-to-device messages, and retrieve hello corresponding delivery acknowledgments.</span></span>
* <span data-ttu-id="3f0f6-201">**DeviceConnect**.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-201">**DeviceConnect**.</span></span> <span data-ttu-id="3f0f6-202">Concede l'accesso gli endpoint orientati toodevice.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-202">Grants access toodevice-facing endpoints.</span></span> <span data-ttu-id="3f0f6-203">Ad esempio, concede l'autorizzazione di messaggi da dispositivo a cloud toosend e ricevere messaggi da cloud a dispositivo.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-203">For example, it grants permission toosend device-to-cloud messages and receive cloud-to-device messages.</span></span> <span data-ttu-id="3f0f6-204">Questa autorizzazione viene usata dai dispositivi.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-204">This permission is used by devices.</span></span>

<span data-ttu-id="3f0f6-205">Esistono due modi tooobtain **DeviceConnect** autorizzazioni con l'IoT Hub con [i token di sicurezza][lnk-sas-tokens]: usando una chiave di identità del dispositivo o una chiave di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-205">There are two ways tooobtain **DeviceConnect** permissions with IoT Hub with [security tokens][lnk-sas-tokens]: using a device identity key, or a shared access key.</span></span> <span data-ttu-id="3f0f6-206">Inoltre, è importante toonote tutte le funzionalità accessibili dai dispositivi esposto dalla progettazione sugli endpoint con prefisso `/devices/{deviceId}`.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-206">Moreover, it is important toonote that all functionality accessible from devices is exposed by design on endpoints with prefix `/devices/{deviceId}`.</span></span>

<span data-ttu-id="3f0f6-207">[Componenti del servizio possono solo generare token di sicurezza] [ lnk-service-tokens] utilizza la concessione delle autorizzazioni appropriate di hello i criteri di accesso condivisa.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-207">[Service components can only generate security tokens][lnk-service-tokens] using shared access policies granting hello appropriate permissions.</span></span>

<span data-ttu-id="3f0f6-208">IoT Hub Azure e altri servizi che possono far parte della soluzione hello consentono la gestione di utenti che usano hello Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-208">Azure IoT Hub and other services which may be part of hello solution allow management of users using hello Azure Active Directory.</span></span>

<span data-ttu-id="3f0f6-209">I dati inseriti dall'Hub IoT di Azure possono essere usati da una serie di servizi, ad esempio Analisi di flusso di Azure, Archiviazione BLOB e così via.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-209">Data ingested by Azure IoT Hub can be consumed by a variety of services such as Azure Stream Analytics and Azure blob storage.</span></span> <span data-ttu-id="3f0f6-210">Questi servizi consentono l'accesso di gestione.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-210">These services allow management access.</span></span> <span data-ttu-id="3f0f6-211">Ulteriori informazioni su questi servizi e sulle opzioni disponibili riportate di seguito:</span><span class="sxs-lookup"><span data-stu-id="3f0f6-211">Read more about these services and available options below:</span></span>

* <span data-ttu-id="3f0f6-212">[Azure DocumentDB][lnk-docdb]: un servizio di database scalabile e completamente indicizzato per dati semistrutturati che gestisce i metadati per i dispositivi hello viene effettuato il provisioning, ad esempio gli attributi, la configurazione e le proprietà di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-212">[Azure DocumentDB][lnk-docdb]: A scalable, fully-indexed database service for semi-structured data that manages metadata for hello devices you provision, such as attributes, configuration, and security properties.</span></span> <span data-ttu-id="3f0f6-213">DocumentDB offre l'elaborazione ad alte prestazioni e velocità, indicizzazione dei dati senza schema e una ricca interfaccia di query SQL.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-213">DocumentDB offers high-performance and high-throughput processing, schema-agnostic indexing of data, and a rich SQL query interface.</span></span>
* <span data-ttu-id="3f0f6-214">[Azure Analitica flusso][lnk-asa]: flusso in tempo reale di elaborazione nel cloud hello che consente di toorapidly sviluppare e distribuire informazioni in tempo reale di basso costo analitica soluzione toouncover dai dispositivi, sensori, infrastruttura e le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-214">[Azure Stream Analytics][lnk-asa]: Real-time stream processing in hello cloud that enables you toorapidly develop and deploy a low-cost analytics solution toouncover real-time insights from devices, sensors, infrastructure, and applications.</span></span> <span data-ttu-id="3f0f6-215">dati Hello da questo servizio completamente gestito possono essere ridimensionati volume tooany comunque una velocità effettiva elevata, bassa latenza e resilienza.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-215">hello data from this fully-managed service can scale tooany volume while still achieving high throughput, low latency, and resiliency.</span></span>
* <span data-ttu-id="3f0f6-216">[Servizi App Azure][lnk-appservices]: web potente toobuild piattaforma cloud e App per dispositivi mobili che si connettono toodata in qualsiasi punto; nel cloud hello o in locale.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-216">[Azure App Services][lnk-appservices]: A cloud platform toobuild powerful web and mobile apps that connect toodata anywhere; in hello cloud or on-premises.</span></span> <span data-ttu-id="3f0f6-217">Creare app per dispositivi mobili coinvolgenti per iOS, Android e Windows.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-217">Build engaging mobile apps for iOS, Android, and Windows.</span></span> <span data-ttu-id="3f0f6-218">Integrazione con il Software come servizio (SaaS) ed enterprise nelle applicazioni con connettività di casella toodozens di servizi basati su cloud e applicazioni aziendali.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-218">Integrate with your Software as a Service (SaaS) and enterprise applications with out-of-the-box connectivity toodozens of cloud-based services and enterprise applications.</span></span> <span data-ttu-id="3f0f6-219">Codice nell'IDE e linguaggio preferito toobuild web App (.NET, Node.js, PHP, Python o Java) e le API più veloce che mai.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-219">Code in your favorite language and IDE (.NET, Node.js, PHP, Python, or Java) toobuild web apps and APIs faster than ever.</span></span>
* <span data-ttu-id="3f0f6-220">[Logica app][lnk-logicapps]: hello logica App funzionalità di servizio App di Azure consente di integrare i sistemi di line-of-business esistenti IoT soluzione tooyour e automatizzare i processi del flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-220">[Logic Apps][lnk-logicapps]: hello Logic Apps feature of Azure App Service helps integrate your IoT solution tooyour existing line-of-business systems and automate workflow processes.</span></span> <span data-ttu-id="3f0f6-221">Logica App consente agli sviluppatori toodesign i flussi di lavoro che iniziano da un trigger e quindi eseguire una serie di passaggi, regole e le azioni che utilizzano i connettori potente toointegrate con i processi di business.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-221">Logic Apps enables developers toodesign workflows that start from a trigger and then execute a series of steps—rules and actions that use powerful connectors toointegrate with your business processes.</span></span> <span data-ttu-id="3f0f6-222">La logica App offre vasto ecosistema tooa connettività della casella di SaaS, basati su cloud e applicazioni locali.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-222">Logic Apps offers out-of-the-box connectivity tooa vast ecosystem of SaaS, cloud-based, and on-premises applications.</span></span>
* <span data-ttu-id="3f0f6-223">[Archiviazione blob di Azure][lnk-blob]: archiviazione cloud affidabile ed economico per i dati di hello che i dispositivi inviano toohello cloud.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-223">[Azure blob storage][lnk-blob]: Reliable, economical cloud storage for hello data that your devices send toohello cloud.</span></span>

## <a name="conclusion"></a><span data-ttu-id="3f0f6-224">Conclusioni</span><span class="sxs-lookup"><span data-stu-id="3f0f6-224">Conclusion</span></span>
<span data-ttu-id="3f0f6-225">Questo articolo fornisce una panoramica a livello di implementazione per progettare e distribuire un'infrastruttura mediante Azure IoT.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-225">This article provides overview of implementation level details for designing and deploying an IoT infrastructure using Azure IoT.</span></span> <span data-ttu-id="3f0f6-226">Configurazione di ogni componente toobe sicura è chiave nella protezione hello intera infrastruttura di IoT.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-226">Configuring each component toobe secure is key in securing hello overall IoT infrastructure.</span></span> <span data-ttu-id="3f0f6-227">scelte di progettazione Hello disponibili in Azure IoT offrono un certo livello di flessibilità e scelta; Tuttavia, ogni opzione può comportare implicazioni di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-227">hello design choices available in Azure IoT provide some level of flexibility and choice; however, each choice may have security implications.</span></span> <span data-ttu-id="3f0f6-228">Si consiglia di vagliare entrambe le opzioni secondo il criterio di una valutazione dei costi e del rischio.</span><span class="sxs-lookup"><span data-stu-id="3f0f6-228">It is recommended that each of these choices be evaluated through a risk/cost assessment.</span></span>

[img-overview]: media/iot-secure-your-deployment/overview.png

[lnk-security-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../articles/iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../articles/iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-use-x509]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/
