---
title: Bus di servizio con .NET e AMQP 1.0 | Microsoft Docs
description: Uso del bus di servizio di Azure da .NET con AMQP
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 332bcb13-e287-4715-99ee-3d7d97396487
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 04/19/2017
ms.author: sethm
ms.openlocfilehash: e089a7d772b51194d8300beb99797bf40a8611b1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="using-service-bus-from-net-with-amqp-10"></a><span data-ttu-id="bbc41-103">Uso del bus di servizio da .NET con AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="bbc41-103">Using Service Bus from .NET with AMQP 1.0</span></span>

## <a name="downloading-the-service-bus-sdk"></a><span data-ttu-id="bbc41-104">Download di Service Bus SDK</span><span class="sxs-lookup"><span data-stu-id="bbc41-104">Downloading the Service Bus SDK</span></span>

<span data-ttu-id="bbc41-105">Il supporto per AMQP 1.0 è disponibile in Service Bus SDK versione 2.1 o successiva.</span><span class="sxs-lookup"><span data-stu-id="bbc41-105">AMQP 1.0 support is available in the Service Bus SDK version 2.1 or later.</span></span> <span data-ttu-id="bbc41-106">Scaricare la versione più recente del bus di servizio da [NuGet][NuGet] per essere certi di disporre della versione corretta.</span><span class="sxs-lookup"><span data-stu-id="bbc41-106">You can ensure you have the latest version by downloading the Service Bus bits from [NuGet][NuGet].</span></span>

## <a name="configuring-net-applications-to-use-amqp-10"></a><span data-ttu-id="bbc41-107">Configurazione delle applicazioni .NET per l'uso di AMQP 1.0</span><span class="sxs-lookup"><span data-stu-id="bbc41-107">Configuring .NET applications to use AMQP 1.0</span></span>

<span data-ttu-id="bbc41-108">Per impostazione predefinita, la libreria client .NET del bus di servizio comunica con il bus di servizio tramite un protocollo dedicato basato su SOAP.</span><span class="sxs-lookup"><span data-stu-id="bbc41-108">By default, the Service Bus .NET client library communicates with the Service Bus service using a dedicated SOAP-based protocol.</span></span> <span data-ttu-id="bbc41-109">Per usare AMQP 1.0 anziché il protocollo predefinito, è necessaria una configurazione esplicita nella stringa di connessione del bus di servizio, come illustrato nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="bbc41-109">To use AMQP 1.0 instead of the default protocol requires explicit configuration on the Service Bus connection string, as described in the next section.</span></span> <span data-ttu-id="bbc41-110">A parte questa modifica, il codice dell'applicazione rimane invariato quando si usa AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="bbc41-110">Other than this change, application code remains unchanged when using AMQP 1.0.</span></span>

<span data-ttu-id="bbc41-111">Nella versione corrente alcune funzionalità API non sono supportate se si usa AMQP.</span><span class="sxs-lookup"><span data-stu-id="bbc41-111">In the current release, there are a few API features that are not supported when using AMQP.</span></span> <span data-ttu-id="bbc41-112">Queste funzionalità non supportate sono elencate più avanti nella sezione [Funzionalità non supportate, restrizioni e differenze di comportamento](#unsupported-features-restrictions-and-behavioral-differences).</span><span class="sxs-lookup"><span data-stu-id="bbc41-112">These unsupported features are listed later in the section [Unsupported features, restrictions, and behavioral differences](#unsupported-features-restrictions-and-behavioral-differences).</span></span> <span data-ttu-id="bbc41-113">Anche alcune impostazioni di configurazione avanzate assumono un significato differente quando si utilizza AMQP.</span><span class="sxs-lookup"><span data-stu-id="bbc41-113">Some of the advanced configuration settings also have a different meaning when using AMQP.</span></span>

### <a name="configuration-using-appconfig"></a><span data-ttu-id="bbc41-114">Configurazione mediante App.config</span><span class="sxs-lookup"><span data-stu-id="bbc41-114">Configuration using App.config</span></span>

<span data-ttu-id="bbc41-115">È consigliabile usare il file di configurazione App.config per l'archiviazione delle impostazioni delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="bbc41-115">It is good practice for applications to use the App.config configuration file to store settings.</span></span> <span data-ttu-id="bbc41-116">Per le applicazioni del bus di servizio, è possibile usare App.config per archiviare la stringa di connessione del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="bbc41-116">For Service Bus applications, you can use App.config to store the Service Bus connection string.</span></span> <span data-ttu-id="bbc41-117">Ecco un file App.config di esempio:</span><span class="sxs-lookup"><span data-stu-id="bbc41-117">An example App.config file is as follows:</span></span>

```xml
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <appSettings>
        <add key="Microsoft.ServiceBus.ConnectionString"
             value="Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp" />
    </appSettings>
</configuration>
```

<span data-ttu-id="bbc41-118">Il valore dell'impostazione `Microsoft.ServiceBus.ConnectionString` corrisponde alla stringa di connessione del bus di servizio, usata per configurare la connessione con il bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="bbc41-118">The value of the `Microsoft.ServiceBus.ConnectionString` setting is the Service Bus connection string that is used to configure the connection to Service Bus.</span></span> <span data-ttu-id="bbc41-119">Il formato è il seguente:</span><span class="sxs-lookup"><span data-stu-id="bbc41-119">The format is as follows:</span></span>

`Endpoint=sb://[namespace].servicebus.windows.net/;SharedAccessKeyName=RootManageSharedAccessKey;SharedAccessKey=[SAS key];TransportType=Amqp`

<span data-ttu-id="bbc41-120">Dove `[namespace]` e `SharedAccessKey` si ottengono dal [portale di Azure][Azure portal] quando si crea uno spazio dei nomi del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="bbc41-120">Where `[namespace]` and `SharedAccessKey` are obtained from the [Azure portal][Azure portal] when you create a Service Bus namespace.</span></span> <span data-ttu-id="bbc41-121">Per altre informazioni, vedere [Creare uno spazio dei nomi del bus di servizio usando il portale di Azure][Create a Service Bus namespace using the Azure portal].</span><span class="sxs-lookup"><span data-stu-id="bbc41-121">For more information, see [Create a Service Bus namespace using the Azure portal][Create a Service Bus namespace using the Azure portal].</span></span>

<span data-ttu-id="bbc41-122">Quando si usa AMQP, aggiungere `;TransportType=Amqp` alla fine della stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="bbc41-122">When using AMQP, append the connection string with `;TransportType=Amqp`.</span></span> <span data-ttu-id="bbc41-123">Questa notazione indica alla libreria client di effettuare la connessione al bus di servizio tramite AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="bbc41-123">This notation instructs the client library to make its connection to Service Bus using AMQP 1.0.</span></span>

## <a name="message-serialization"></a><span data-ttu-id="bbc41-124">Serializzazione dei messaggi</span><span class="sxs-lookup"><span data-stu-id="bbc41-124">Message serialization</span></span>

<span data-ttu-id="bbc41-125">Quando si usa il protocollo predefinito, il comportamento di serializzazione predefinito della libreria client .NET consiste nell'usare il tipo [DataContractSerializer][DataContractSerializer] per serializzare un'istanza di [BrokeredMessage][BrokeredMessage] per il trasporto tra la libreria client e il servizio del bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="bbc41-125">When using the default protocol, the default serialization behavior of the .NET client library is to use the [DataContractSerializer][DataContractSerializer] type to serialize a [BrokeredMessage][BrokeredMessage] instance for transport between the client library and the Service Bus service.</span></span> <span data-ttu-id="bbc41-126">Quando si usa la modalità di trasporto AMQP, la libreria client usa il sistema di tipi AMQP per la serializzazione del [messaggio negoziato][BrokeredMessage] in un messaggio AMQP.</span><span class="sxs-lookup"><span data-stu-id="bbc41-126">When using the AMQP transport mode, the client library uses the AMQP type system for serialization of the [brokered message][BrokeredMessage] into an AMQP message.</span></span> <span data-ttu-id="bbc41-127">Questa serializzazione consente la ricezione e l'interpretazione dei messaggi da parte di un'applicazione ricevente che è potenzialmente in esecuzione in una piattaforma diversa, ad esempio un'applicazione Java che usa l'API JMS per accedere al bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="bbc41-127">This serialization enables the message to be received and interpreted by a receiving application that is potentially running on a different platform, for example, a Java application that uses the JMS API to access Service Bus.</span></span>

<span data-ttu-id="bbc41-128">Quando si crea un'istanza di [BrokeredMessage][BrokeredMessage], è possibile specificare al costruttore un oggetto .NET come parametro da usare come corpo del messaggio.</span><span class="sxs-lookup"><span data-stu-id="bbc41-128">When you construct a [BrokeredMessage][BrokeredMessage] instance, you can provide a .NET object as a parameter to the constructor to serve as the body of the message.</span></span> <span data-ttu-id="bbc41-129">Per gli oggetti che possono essere mappati a tipi primitivi AMQP, il corpo viene serializzato in tipi di dati AMQP.</span><span class="sxs-lookup"><span data-stu-id="bbc41-129">For objects that can be mapped to AMQP primitive types, the body is serialized into AMQP data types.</span></span> <span data-ttu-id="bbc41-130">Se non è possibile eseguire direttamente il mapping dell'oggetto a un tipo primitivo AMQP, ovvero un tipo personalizzato definito dall'applicazione, l'oggetto viene serializzato tramite [DataContractSerializer][DataContractSerializer] e i byte serializzati vengono inviati in un messaggio di dati AMQP.</span><span class="sxs-lookup"><span data-stu-id="bbc41-130">If the object cannot be directly mapped into an AMQP primitive type; that is, a custom type defined by the application, then the object is serialized using the [DataContractSerializer][DataContractSerializer], and the serialized bytes are sent in an AMQP data message.</span></span>

<span data-ttu-id="bbc41-131">Per semplificare l'interoperabilità con client non .NET, usare solo tipi .NET che possono essere serializzati direttamente in tipi AMQP per il corpo del messaggio.</span><span class="sxs-lookup"><span data-stu-id="bbc41-131">To facilitate interoperability with non-.NET clients, use only .NET types that can be serialized directly into AMQP types for the body of the message.</span></span> <span data-ttu-id="bbc41-132">La tabella seguente descrive in modo dettagliato questi tipi e il mapping corrispondente al sistema di tipi AMQP.</span><span class="sxs-lookup"><span data-stu-id="bbc41-132">The following table details those types and the corresponding mapping to the AMQP type system.</span></span>

| <span data-ttu-id="bbc41-133">Tipo di oggetto del corpo .NET</span><span class="sxs-lookup"><span data-stu-id="bbc41-133">.NET Body Object Type</span></span> | <span data-ttu-id="bbc41-134">Tipo AMQP mappato</span><span class="sxs-lookup"><span data-stu-id="bbc41-134">Mapped AMQP Type</span></span> | <span data-ttu-id="bbc41-135">Tipo di sezione del corpo AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-135">AMQP Body Section Type</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bbc41-136">bool</span><span class="sxs-lookup"><span data-stu-id="bbc41-136">bool</span></span> |<span data-ttu-id="bbc41-137">boolean</span><span class="sxs-lookup"><span data-stu-id="bbc41-137">boolean</span></span> |<span data-ttu-id="bbc41-138">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-138">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-139">byte</span><span class="sxs-lookup"><span data-stu-id="bbc41-139">byte</span></span> |<span data-ttu-id="bbc41-140">ubyte</span><span class="sxs-lookup"><span data-stu-id="bbc41-140">ubyte</span></span> |<span data-ttu-id="bbc41-141">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-141">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-142">ushort</span><span class="sxs-lookup"><span data-stu-id="bbc41-142">ushort</span></span> |<span data-ttu-id="bbc41-143">ushort</span><span class="sxs-lookup"><span data-stu-id="bbc41-143">ushort</span></span> |<span data-ttu-id="bbc41-144">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-144">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-145">uint</span><span class="sxs-lookup"><span data-stu-id="bbc41-145">uint</span></span> |<span data-ttu-id="bbc41-146">uint</span><span class="sxs-lookup"><span data-stu-id="bbc41-146">uint</span></span> |<span data-ttu-id="bbc41-147">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-147">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-148">ulong</span><span class="sxs-lookup"><span data-stu-id="bbc41-148">ulong</span></span> |<span data-ttu-id="bbc41-149">ulong</span><span class="sxs-lookup"><span data-stu-id="bbc41-149">ulong</span></span> |<span data-ttu-id="bbc41-150">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-150">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-151">sbyte</span><span class="sxs-lookup"><span data-stu-id="bbc41-151">sbyte</span></span> |<span data-ttu-id="bbc41-152">byte</span><span class="sxs-lookup"><span data-stu-id="bbc41-152">byte</span></span> |<span data-ttu-id="bbc41-153">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-153">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-154">short</span><span class="sxs-lookup"><span data-stu-id="bbc41-154">short</span></span> |<span data-ttu-id="bbc41-155">short</span><span class="sxs-lookup"><span data-stu-id="bbc41-155">short</span></span> |<span data-ttu-id="bbc41-156">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-156">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-157">int</span><span class="sxs-lookup"><span data-stu-id="bbc41-157">int</span></span> |<span data-ttu-id="bbc41-158">int</span><span class="sxs-lookup"><span data-stu-id="bbc41-158">int</span></span> |<span data-ttu-id="bbc41-159">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-159">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-160">long</span><span class="sxs-lookup"><span data-stu-id="bbc41-160">long</span></span> |<span data-ttu-id="bbc41-161">long</span><span class="sxs-lookup"><span data-stu-id="bbc41-161">long</span></span> |<span data-ttu-id="bbc41-162">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-162">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-163">float</span><span class="sxs-lookup"><span data-stu-id="bbc41-163">float</span></span> |<span data-ttu-id="bbc41-164">float</span><span class="sxs-lookup"><span data-stu-id="bbc41-164">float</span></span> |<span data-ttu-id="bbc41-165">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-165">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-166">double</span><span class="sxs-lookup"><span data-stu-id="bbc41-166">double</span></span> |<span data-ttu-id="bbc41-167">double</span><span class="sxs-lookup"><span data-stu-id="bbc41-167">double</span></span> |<span data-ttu-id="bbc41-168">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-168">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-169">decimal</span><span class="sxs-lookup"><span data-stu-id="bbc41-169">decimal</span></span> |<span data-ttu-id="bbc41-170">decimal128</span><span class="sxs-lookup"><span data-stu-id="bbc41-170">decimal128</span></span> |<span data-ttu-id="bbc41-171">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-171">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-172">char</span><span class="sxs-lookup"><span data-stu-id="bbc41-172">char</span></span> |<span data-ttu-id="bbc41-173">char</span><span class="sxs-lookup"><span data-stu-id="bbc41-173">char</span></span> |<span data-ttu-id="bbc41-174">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-174">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-175">DateTime</span><span class="sxs-lookup"><span data-stu-id="bbc41-175">DateTime</span></span> |<span data-ttu-id="bbc41-176">timestamp</span><span class="sxs-lookup"><span data-stu-id="bbc41-176">timestamp</span></span> |<span data-ttu-id="bbc41-177">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-177">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-178">Guid</span><span class="sxs-lookup"><span data-stu-id="bbc41-178">Guid</span></span> |<span data-ttu-id="bbc41-179">uuid</span><span class="sxs-lookup"><span data-stu-id="bbc41-179">uuid</span></span> |<span data-ttu-id="bbc41-180">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-180">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-181">byte[]</span><span class="sxs-lookup"><span data-stu-id="bbc41-181">byte[]</span></span> |<span data-ttu-id="bbc41-182">binary</span><span class="sxs-lookup"><span data-stu-id="bbc41-182">binary</span></span> |<span data-ttu-id="bbc41-183">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-183">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-184">string</span><span class="sxs-lookup"><span data-stu-id="bbc41-184">string</span></span> |<span data-ttu-id="bbc41-185">stringa</span><span class="sxs-lookup"><span data-stu-id="bbc41-185">string</span></span> |<span data-ttu-id="bbc41-186">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-186">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-187">System.Collections.IList</span><span class="sxs-lookup"><span data-stu-id="bbc41-187">System.Collections.IList</span></span> |<span data-ttu-id="bbc41-188">list</span><span class="sxs-lookup"><span data-stu-id="bbc41-188">list</span></span> |<span data-ttu-id="bbc41-189">Valore AMQP: la raccolta può includere solo gli elementi definiti in questa tabella.</span><span class="sxs-lookup"><span data-stu-id="bbc41-189">AMQP Value: items contained in the collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="bbc41-190">System.Array</span><span class="sxs-lookup"><span data-stu-id="bbc41-190">System.Array</span></span> |<span data-ttu-id="bbc41-191">array</span><span class="sxs-lookup"><span data-stu-id="bbc41-191">array</span></span> |<span data-ttu-id="bbc41-192">Valore AMQP: la raccolta può includere solo gli elementi definiti in questa tabella.</span><span class="sxs-lookup"><span data-stu-id="bbc41-192">AMQP Value: items contained in the collection can only be those that are defined in this table.</span></span> |
| <span data-ttu-id="bbc41-193">System.Collections.IDictionary</span><span class="sxs-lookup"><span data-stu-id="bbc41-193">System.Collections.IDictionary</span></span> |<span data-ttu-id="bbc41-194">map</span><span class="sxs-lookup"><span data-stu-id="bbc41-194">map</span></span> |<span data-ttu-id="bbc41-195">Valore AMQP: la raccolta può includere solo gli elementi definiti in questa tabella. Nota: sono supportate solo chiavi di tipo String.</span><span class="sxs-lookup"><span data-stu-id="bbc41-195">AMQP Value: items contained in the collection can only be those that are defined in this table.Note: only String keys are supported.</span></span> |
| <span data-ttu-id="bbc41-196">Uri</span><span class="sxs-lookup"><span data-stu-id="bbc41-196">Uri</span></span> |<span data-ttu-id="bbc41-197">Stringa descritta (vedere la tabella seguente)</span><span class="sxs-lookup"><span data-stu-id="bbc41-197">Described string(see the following table)</span></span> |<span data-ttu-id="bbc41-198">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-198">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-199">DateTimeOffset</span><span class="sxs-lookup"><span data-stu-id="bbc41-199">DateTimeOffset</span></span> |<span data-ttu-id="bbc41-200">Elemento Long descritto (vedere la tabella seguente)</span><span class="sxs-lookup"><span data-stu-id="bbc41-200">Described long(see the following table)</span></span> |<span data-ttu-id="bbc41-201">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-201">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-202">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="bbc41-202">TimeSpan</span></span> |<span data-ttu-id="bbc41-203">Elemento Long descritto (vedere la tabella seguente)</span><span class="sxs-lookup"><span data-stu-id="bbc41-203">Described long(see the following)</span></span> |<span data-ttu-id="bbc41-204">Valore AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-204">AMQP Value</span></span> |
| <span data-ttu-id="bbc41-205">Flusso</span><span class="sxs-lookup"><span data-stu-id="bbc41-205">Stream</span></span> |<span data-ttu-id="bbc41-206">binary</span><span class="sxs-lookup"><span data-stu-id="bbc41-206">binary</span></span> |<span data-ttu-id="bbc41-207">Dati AMQP (possono essere multipli).</span><span class="sxs-lookup"><span data-stu-id="bbc41-207">AMQP Data (may be multiple).</span></span> <span data-ttu-id="bbc41-208">Le sezioni Data contengono i byte non elaborati dall'oggetto Stream.</span><span class="sxs-lookup"><span data-stu-id="bbc41-208">The Data sections contain the raw bytes read from the Stream object.</span></span> |
| <span data-ttu-id="bbc41-209">Altro oggetto</span><span class="sxs-lookup"><span data-stu-id="bbc41-209">Other Object</span></span> |<span data-ttu-id="bbc41-210">binary</span><span class="sxs-lookup"><span data-stu-id="bbc41-210">binary</span></span> |<span data-ttu-id="bbc41-211">Dati AMQP (possono essere multipli).</span><span class="sxs-lookup"><span data-stu-id="bbc41-211">AMQP Data (may be multiple).</span></span> <span data-ttu-id="bbc41-212">Contiene i dati binari serializzati dell'oggetto che usa DataContractSerializer o un serializzatore fornito dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="bbc41-212">Contains the serialized binary of the object that uses the DataContractSerializer or a serializer supplied by the application.</span></span> |

| <span data-ttu-id="bbc41-213">Tipo .NET</span><span class="sxs-lookup"><span data-stu-id="bbc41-213">.NET Type</span></span> | <span data-ttu-id="bbc41-214">Tipo descritto AMQP mappato</span><span class="sxs-lookup"><span data-stu-id="bbc41-214">Mapped AMQP Described Type</span></span> | <span data-ttu-id="bbc41-215">Note</span><span class="sxs-lookup"><span data-stu-id="bbc41-215">Notes</span></span> |
| --- | --- | --- |
| <span data-ttu-id="bbc41-216">Uri</span><span class="sxs-lookup"><span data-stu-id="bbc41-216">Uri</span></span> |`<type name=”uri” class=restricted source=”string”> <descriptor name=”com.microsoft:uri” /></type>` |<span data-ttu-id="bbc41-217">Uri.AbsoluteUri</span><span class="sxs-lookup"><span data-stu-id="bbc41-217">Uri.AbsoluteUri</span></span> |
| <span data-ttu-id="bbc41-218">Datetimeoffset</span><span class="sxs-lookup"><span data-stu-id="bbc41-218">DateTimeOffset</span></span> |`<type name=”datetime-offset” class=restricted source=”long”> <descriptor name=”com.microsoft:datetime-offset” /></type>` |<span data-ttu-id="bbc41-219">DateTimeOffset.UtcTicks</span><span class="sxs-lookup"><span data-stu-id="bbc41-219">DateTimeOffset.UtcTicks</span></span> |
| <span data-ttu-id="bbc41-220">TimeSpan</span><span class="sxs-lookup"><span data-stu-id="bbc41-220">TimeSpan</span></span> |`<type name=”timespan” class=restricted source=”long”> <descriptor name=”com.microsoft:timespan” /></type> ` |<span data-ttu-id="bbc41-221">TimeSpan.Ticks</span><span class="sxs-lookup"><span data-stu-id="bbc41-221">TimeSpan.Ticks</span></span> |

## <a name="unsupported-features-restrictions-and-behavioral-differences"></a><span data-ttu-id="bbc41-222">Funzionalità non supportate, restrizioni e differenze di comportamento</span><span class="sxs-lookup"><span data-stu-id="bbc41-222">Unsupported features, restrictions, and behavioral differences</span></span>

<span data-ttu-id="bbc41-223">Le seguenti funzionalità dell'API .NET del bus di servizio non sono al momento supportate con AMQP:</span><span class="sxs-lookup"><span data-stu-id="bbc41-223">The following features of the Service Bus .NET API are not currently supported when using AMQP:</span></span>

* <span data-ttu-id="bbc41-224">Transazioni</span><span class="sxs-lookup"><span data-stu-id="bbc41-224">Transactions</span></span>
* <span data-ttu-id="bbc41-225">Invio tramite destinazione del trasferimento</span><span class="sxs-lookup"><span data-stu-id="bbc41-225">Send via transfer destination</span></span>

<span data-ttu-id="bbc41-226">Esistono anche alcune piccole differenze di comportamento dell'API .NET del bus di servizio durante l'uso di AMQP, rispetto al protocollo predefinito:</span><span class="sxs-lookup"><span data-stu-id="bbc41-226">There are also some small differences in the behavior of the Service Bus .NET API when using AMQP, compared to the default protocol:</span></span>

* <span data-ttu-id="bbc41-227">La proprietà [OperationTimeout][OperationTimeout] viene ignorata.</span><span class="sxs-lookup"><span data-stu-id="bbc41-227">The [OperationTimeout][OperationTimeout] property is ignored.</span></span>
* <span data-ttu-id="bbc41-228">`MessageReceiver.Receive(TimeSpan.Zero)` viene implementato come `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`.</span><span class="sxs-lookup"><span data-stu-id="bbc41-228">`MessageReceiver.Receive(TimeSpan.Zero)` is implemented as `MessageReceiver.Receive(TimeSpan.FromSeconds(10))`.</span></span>
* <span data-ttu-id="bbc41-229">Il completamento di messaggi tramite token di blocco può essere eseguito solo dai destinatari che hanno ricevuto i messaggi all'inizio.</span><span class="sxs-lookup"><span data-stu-id="bbc41-229">Completing messages by lock tokens can only be done by the message receivers that initially received the messages.</span></span>

## <a name="controlling-amqp-protocol-settings"></a><span data-ttu-id="bbc41-230">Controllo delle impostazioni del protocollo AMQP</span><span class="sxs-lookup"><span data-stu-id="bbc41-230">Controlling AMQP protocol settings</span></span>

<span data-ttu-id="bbc41-231">Le [API .NET](/dotnet/api/) espongono diverse impostazioni per controllare il comportamento del protocollo AMQP:</span><span class="sxs-lookup"><span data-stu-id="bbc41-231">The [.NET APIs](/dotnet/api/) expose several settings to control the behavior of the AMQP protocol:</span></span>

* <span data-ttu-id="bbc41-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**: controlla il credito iniziale applicato a un collegamento.</span><span class="sxs-lookup"><span data-stu-id="bbc41-232">**[MessageReceiver.PrefetchCount](/dotnet/api/microsoft.servicebus.messaging.messagereceiver.prefetchcount?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessageReceiver_PrefetchCount)**: Controls the initial credit applied to a link.</span></span> <span data-ttu-id="bbc41-233">Il valore predefinito è 0.</span><span class="sxs-lookup"><span data-stu-id="bbc41-233">The default is 0.</span></span>
* <span data-ttu-id="bbc41-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**: controlla la dimensione massima del frame AMQP offerta durante la negoziazione in fase di apertura della connessione.</span><span class="sxs-lookup"><span data-stu-id="bbc41-234">**[MessagingFactorySettings.AmqpTransportSettings.MaxFrameSize](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.maxframesize?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_MaxFrameSize)**: Controls the maximum AMQP frame size offered during the negotiation at connection open time.</span></span> <span data-ttu-id="bbc41-235">Il valore predefinito è 65.536 byte.</span><span class="sxs-lookup"><span data-stu-id="bbc41-235">The default is 65,536 bytes.</span></span>
* <span data-ttu-id="bbc41-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**: se i trasferimenti possono essere eseguiti in batch, questo valore determina il ritardo massimo per l'invio di disposizioni.</span><span class="sxs-lookup"><span data-stu-id="bbc41-236">**[MessagingFactorySettings.AmqpTransportSettings.BatchFlushInterval](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.batchflushinterval?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_BatchFlushInterval)**: If transfers are batchable, this value determines the maximum delay for sending dispositions.</span></span> <span data-ttu-id="bbc41-237">Per impostazione predefinita, il valore viene ereditato dai mittenti/destinatari.</span><span class="sxs-lookup"><span data-stu-id="bbc41-237">Inherited by senders/receivers by default.</span></span> <span data-ttu-id="bbc41-238">Un singolo mittente/destinatario può sostituire il valore predefinito di 20 millisecondi.</span><span class="sxs-lookup"><span data-stu-id="bbc41-238">Individual sender/receiver can override the default, which is 20 milliseconds.</span></span>
* <span data-ttu-id="bbc41-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)**: controlla se le connessioni AMQP vengono stabilite su una connessione SSL.</span><span class="sxs-lookup"><span data-stu-id="bbc41-239">**[MessagingFactorySettings.AmqpTransportSettings.UseSslStreamSecurity](/dotnet/api/microsoft.servicebus.messaging.amqp.amqptransportsettings.usesslstreamsecurity?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_Amqp_AmqpTransportSettings_UseSslStreamSecurity)**: Controls whether AMQP connections are established over an SSL connection.</span></span> <span data-ttu-id="bbc41-240">Il valore predefinito è **true**.</span><span class="sxs-lookup"><span data-stu-id="bbc41-240">The default is **true**.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bbc41-241">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="bbc41-241">Next steps</span></span>

<span data-ttu-id="bbc41-242">Per altre informazioni,</span><span class="sxs-lookup"><span data-stu-id="bbc41-242">Ready to learn more?</span></span> <span data-ttu-id="bbc41-243">vedere i collegamenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="bbc41-243">Visit the following links:</span></span>

* <span data-ttu-id="bbc41-244">[Panoramica di AMQP per il bus di servizio]</span><span class="sxs-lookup"><span data-stu-id="bbc41-244">[Service Bus AMQP overview]</span></span>
* <span data-ttu-id="bbc41-245">[Supporto di AMQP 1.0 per code e argomenti partizionati del bus di servizio]</span><span class="sxs-lookup"><span data-stu-id="bbc41-245">[AMQP 1.0 support for Service Bus partitioned queues and topics]</span></span>
* <span data-ttu-id="bbc41-246">[AMQP nel bus di servizio per Windows Server]</span><span class="sxs-lookup"><span data-stu-id="bbc41-246">[AMQP in Service Bus for Windows Server]</span></span>

[Create a Service Bus namespace using the Azure portal]: service-bus-create-namespace-portal.md
[DataContractSerializer]: https://msdn.microsoft.com/library/system.runtime.serialization.datacontractserializer.aspx
[BrokeredMessage]: /dotnet/api/microsoft.servicebus.messaging.brokeredmessage?view=azureservicebus-4.0.0
[Microsoft.ServiceBus.Messaging.MessagingFactory.AcceptMessageSession]: /dotnet/api/microsoft.servicebus.messaging.messagingfactory.acceptmessagesession?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactory_AcceptMessageSession
[OperationTimeout]: /dotnet/api/microsoft.servicebus.messaging.messagingfactorysettings.operationtimeout?view=azureservicebus-4.0.0#Microsoft_ServiceBus_Messaging_MessagingFactorySettings_OperationTimeout
[NuGet]: http://nuget.org/packages/WindowsAzure.ServiceBus/
[Azure portal]: https://portal.azure.com
<span data-ttu-id="bbc41-247">[Panoramica di AMQP per il bus di servizio]: service-bus-amqp-overview.md</span><span class="sxs-lookup"><span data-stu-id="bbc41-247">[Service Bus AMQP overview]: service-bus-amqp-overview.md</span></span>
<span data-ttu-id="bbc41-248">[Supporto di AMQP 1.0 per code e argomenti partizionati del bus di servizio]: service-bus-partitioned-queues-and-topics-amqp-overview.md</span><span class="sxs-lookup"><span data-stu-id="bbc41-248">[AMQP 1.0 support for Service Bus partitioned queues and topics]: service-bus-partitioned-queues-and-topics-amqp-overview.md</span></span>
<span data-ttu-id="bbc41-249">[AMQP nel bus di servizio per Windows Server]: https://msdn.microsoft.com/library/dn574799.aspx</span><span class="sxs-lookup"><span data-stu-id="bbc41-249">[AMQP in Service Bus for Windows Server]: https://msdn.microsoft.com/library/dn574799.aspx</span></span>
