<span data-ttu-id="5f115-101">Se la macchina virtuale (VM) in Azure rileva un errore di avvio o un disco, potrebbe essere tooperform risoluzione dei problemi in disco rigido virtuale hello stesso.</span><span class="sxs-lookup"><span data-stu-id="5f115-101">If your virtual machine (VM) in Azure encounters a boot or disk error, you may need tooperform troubleshooting steps on hello virtual hard disk itself.</span></span> <span data-ttu-id="5f115-102">Un esempio comune sarebbe un aggiornamento di applicazione non riuscita che impedisce l'avvio correttamente hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-102">A common example would be a failed application update that prevents hello VM from booting successfully.</span></span> <span data-ttu-id="5f115-103">Questo articolo viene descritto come toouse tooconnect portale Azure toofix VM tooanother il disco rigido virtuale gli eventuali errori e quindi ricreare la macchina virtuale originale.</span><span class="sxs-lookup"><span data-stu-id="5f115-103">This article describes how toouse Azure portal tooconnect your virtual hard disk tooanother VM toofix any errors and then re-create your original VM.</span></span>

## <a name="recovery-process-overview"></a><span data-ttu-id="5f115-104">Panoramica del processo di ripristino</span><span class="sxs-lookup"><span data-stu-id="5f115-104">Recovery process overview</span></span>
<span data-ttu-id="5f115-105">processo di risoluzione dei problemi di Hello è indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="5f115-105">hello troubleshooting process is as follows:</span></span>

1. <span data-ttu-id="5f115-106">Eliminare hello macchina virtuale che si è verificati problemi, ma Mantieni i dischi rigidi virtuali hello.</span><span class="sxs-lookup"><span data-stu-id="5f115-106">Delete hello VM that's encountering issues, but retain hello virtual hard disks.</span></span>
2. <span data-ttu-id="5f115-107">Collegare e montare hello tooanother di disco rigido virtuale a macchina virtuale per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="5f115-107">Attach and mount hello virtual hard disk tooanother VM for troubleshooting.</span></span>
3. <span data-ttu-id="5f115-108">Connettersi toohello risoluzione dei problemi di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-108">Connect toohello troubleshooting VM.</span></span> <span data-ttu-id="5f115-109">Modificare i file o eseguire gli strumenti toofix errori nel disco rigido virtuale originale di hello.</span><span class="sxs-lookup"><span data-stu-id="5f115-109">Edit files or run tools toofix errors on hello original virtual hard disk.</span></span>
4. <span data-ttu-id="5f115-110">Smontare e scollegare hello disco rigido virtuale da hello risoluzione dei problemi di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-110">Unmount and detach hello virtual hard disk from hello troubleshooting VM.</span></span>
5. <span data-ttu-id="5f115-111">Creare una macchina virtuale con disco rigido virtuale originale di hello.</span><span class="sxs-lookup"><span data-stu-id="5f115-111">Create a VM by using hello original virtual hard disk.</span></span>

## <a name="delete-hello-original-vm"></a><span data-ttu-id="5f115-112">Eliminare hello macchina virtuale originale</span><span class="sxs-lookup"><span data-stu-id="5f115-112">Delete hello original VM</span></span>
<span data-ttu-id="5f115-113">In Azure, i dischi rigidi virtuali e le macchine virtuali sono due risorse distinte.</span><span class="sxs-lookup"><span data-stu-id="5f115-113">Virtual hard disks and VMs are two distinct resources in Azure.</span></span> <span data-ttu-id="5f115-114">Un disco rigido virtuale è in cui sono archiviate hello del sistema operativo, applicazioni e le configurazioni.</span><span class="sxs-lookup"><span data-stu-id="5f115-114">A virtual hard disk is where hello operating system, applications, and configurations are stored.</span></span> <span data-ttu-id="5f115-115">Hello VM è esclusivamente i metadati che definisce dimensioni hello o il percorso e che fa riferimento a risorse, ad esempio un disco rigido virtuale o di una scheda di interfaccia di rete virtuale (NIC).</span><span class="sxs-lookup"><span data-stu-id="5f115-115">hello VM is just metadata that defines hello size or location and that references resources such as a virtual hard disk or virtual network interface card (NIC).</span></span> <span data-ttu-id="5f115-116">Ogni disco rigido virtuale Ottiene un lease assegnato quando tale disco è collegato tooa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-116">Each virtual hard disk gets a lease assigned when that disk is attached tooa VM.</span></span> <span data-ttu-id="5f115-117">Anche se è possano collegare e scollegare anche durante l'esecuzione di hello VM dischi dati, non è possibile scollegare disco del sistema operativo hello, a meno che non viene eliminato hello risorsa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-117">Although data disks can be attached and detached even while hello VM is running, hello OS disk cannot be detached unless hello VM resource is deleted.</span></span> <span data-ttu-id="5f115-118">lease Hello continua tooassociate hello del sistema operativo disco tooa macchina virtuale, anche quando tale macchina virtuale è in uno stato arrestato e deallocato.</span><span class="sxs-lookup"><span data-stu-id="5f115-118">hello lease continues tooassociate hello OS disk tooa VM even when that VM is in a stopped and deallocated state.</span></span>

<span data-ttu-id="5f115-119">primo passaggio toorecovering Hello la macchina virtuale è una risorsa di macchina virtuale hello toodelete stesso.</span><span class="sxs-lookup"><span data-stu-id="5f115-119">hello first step toorecovering your VM is toodelete hello VM resource itself.</span></span> <span data-ttu-id="5f115-120">L'eliminazione hello VM lascia i dischi rigidi virtuali hello nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="5f115-120">Deleting hello VM leaves hello virtual hard disks in your storage account.</span></span> <span data-ttu-id="5f115-121">Dopo aver hello che macchina virtuale viene eliminata, è possibile collegare hello disco rigido virtuale tooanother VM tootroubleshoot e risolvere gli errori di hello.</span><span class="sxs-lookup"><span data-stu-id="5f115-121">After hello VM is deleted, you can attach hello virtual hard disk tooanother VM tootroubleshoot and resolve hello errors.</span></span> 

1. <span data-ttu-id="5f115-122">Accedi toohello [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="5f115-122">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="5f115-123">Scegliere dal menu hello sul lato sinistro hello **macchine virtuali (classico)**.</span><span class="sxs-lookup"><span data-stu-id="5f115-123">On hello menu on hello left side, click **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="5f115-124">Fare clic su macchina virtuale che presenta il problema di hello, seleziona hello **dischi**e quindi identificare il nome di hello del disco rigido virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="5f115-124">Select hello VM that has hello problem, click **Disks**, and then identify hello name of hello virtual hard disk.</span></span> 
4. <span data-ttu-id="5f115-125">Selezionare il disco rigido virtuale di hello del sistema operativo e controllare hello **percorso** account di archiviazione hello tooidentify contenente tale disco rigido virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-125">Select hello OS virtual hard disk and check hello **Location** tooidentify hello storage account that contains that virtual hard disk.</span></span> <span data-ttu-id="5f115-126">Nell'esempio seguente di hello, hello immediatamente prima stringa ". n e t" hello nome di account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="5f115-126">In hello following example, hello string immediately before ".blob.core.windows.net" is hello storage account name.</span></span>

    ```
    https://portalvhds73fmhrw5xkp43.blob.core.windows.net/vhds/SCCM2012-2015-08-28.vhd
    ```

    ![immagine di Hello sulla posizione della macchina virtuale](./media/virtual-machines-classic-recovery-disks-portal/vm-location.png)

5. <span data-ttu-id="5f115-128">Hello macchina virtuale e quindi scegliere **eliminare**.</span><span class="sxs-lookup"><span data-stu-id="5f115-128">Right-click hello VM and then select **Delete**.</span></span> <span data-ttu-id="5f115-129">Assicurarsi che i dischi di hello non selezionati quando si elimina hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-129">Make sure that hello disks are not selected when you delete hello VM.</span></span>
6. <span data-ttu-id="5f115-130">Creare una nuova VM di ripristino.</span><span class="sxs-lookup"><span data-stu-id="5f115-130">Create a new recovery VM.</span></span> <span data-ttu-id="5f115-131">Questa macchina virtuale deve essere in hello stessa regione e risorse gruppo (servizio Cloud) come problema hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-131">This VM must be in hello same region and resource group (Cloud Service) as hello problem VM.</span></span>
7. <span data-ttu-id="5f115-132">Selezionare il ripristino di hello macchina virtuale, quindi **dischi** > **collegare esistente**.</span><span class="sxs-lookup"><span data-stu-id="5f115-132">Select hello recovery VM, and then select **Disks** > **Attach Existing**.</span></span>
8. <span data-ttu-id="5f115-133">tooselect il disco rigido virtuale esistente, fare clic su **File VHD**:</span><span class="sxs-lookup"><span data-stu-id="5f115-133">tooselect your existing virtual hard disk, click **VHD File**:</span></span>

    ![Cercare il disco rigido virtuale esistente](./media/virtual-machines-classic-recovery-disks-portal/select-vhd-location.png)

9. <span data-ttu-id="5f115-135">Selezionare l'account di archiviazione hello > contenitore di disco rigido virtuale > hello disco rigido virtuale, fare clic su hello **selezionare** pulsante tooconfirm prescelto.</span><span class="sxs-lookup"><span data-stu-id="5f115-135">Select hello storage account > VHD container > hello virtual hard disk, click hello **Select** button tooconfirm your choice.</span></span>

    ![Selezionare il disco rigido virtuale esistente](./media/virtual-machines-classic-recovery-disks-portal/select-vhd.png)

10. <span data-ttu-id="5f115-137">Con il disco rigido virtuale ora selezionato, selezionare **OK** tooattach hello disco rigido virtuale esistente.</span><span class="sxs-lookup"><span data-stu-id="5f115-137">With your VHD now selected, select **OK** tooattach hello existing virtual hard disk.</span></span>
11. <span data-ttu-id="5f115-138">Dopo alcuni secondi, hello **dischi** riquadro per la macchina virtuale verrà visualizzato il disco rigido virtuale esistente collegato come disco dati:</span><span class="sxs-lookup"><span data-stu-id="5f115-138">After a few seconds, hello **Disks** pane for your VM will display your existing virtual hard disk connected as a data disk:</span></span>

    ![Disco rigido virtuale esistente collegato come disco dati](./media/virtual-machines-classic-recovery-disks-portal/attached-disk.png)

## <a name="fix-issues-on-hello-original-virtual-hard-disk"></a><span data-ttu-id="5f115-140">Risolvere i problemi del disco rigido virtuale originale di hello</span><span class="sxs-lookup"><span data-stu-id="5f115-140">Fix issues on hello original virtual hard disk</span></span>
<span data-ttu-id="5f115-141">Quando si monta hello disco rigido virtuale esistente, è ora possibile eseguire operazioni di manutenzione e risoluzione dei problemi in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="5f115-141">When hello existing virtual hard disk is mounted, you can now perform any maintenance and troubleshooting steps as needed.</span></span> <span data-ttu-id="5f115-142">Dopo avere risolto i problemi di hello, continuare con hello alla procedura seguente.</span><span class="sxs-lookup"><span data-stu-id="5f115-142">Once you have addressed hello issues, continue with hello following steps.</span></span>

## <a name="unmount-and-detach-hello-original-virtual-hard-disk"></a><span data-ttu-id="5f115-143">Smontare e scollegare il disco rigido virtuale originale di hello</span><span class="sxs-lookup"><span data-stu-id="5f115-143">Unmount and detach hello original virtual hard disk</span></span>
<span data-ttu-id="5f115-144">Dopo aver risolti eventuali errori, smontare e scollegare hello disco rigido virtuale esistente dalla VM sulla risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="5f115-144">Once any errors are resolved, unmount and detach hello existing virtual hard disk from your troubleshooting VM.</span></span> <span data-ttu-id="5f115-145">È possibile utilizzare il disco rigido virtuale insieme a qualsiasi altra macchina virtuale finché non viene rilasciato il lease hello che collega hello disco rigido virtuale toohello risoluzione dei problemi di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-145">You cannot use your virtual hard disk together with any other VM until hello lease that attaches hello virtual hard disk toohello troubleshooting VM is released.</span></span>  

1. <span data-ttu-id="5f115-146">Accedi toohello [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="5f115-146">Sign in toohello [Azure portal](https://portal.azure.com).</span></span> 
2. <span data-ttu-id="5f115-147">Scegliere dal menu hello sul lato sinistro hello **macchine virtuali (classico)**.</span><span class="sxs-lookup"><span data-stu-id="5f115-147">On hello menu on hello left side, select **Virtual Machines (classic)**.</span></span>
3. <span data-ttu-id="5f115-148">Individuare il ripristino di hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-148">Locate hello recovery VM.</span></span> <span data-ttu-id="5f115-149">Selezionare i dischi, disco hello pulsante destro del mouse, quindi **scollegamento**.</span><span class="sxs-lookup"><span data-stu-id="5f115-149">Select Disks, right-click hello disk, and then select **Detach**.</span></span>

## <a name="create-a-vm-from-hello-original-hard-disk"></a><span data-ttu-id="5f115-150">Creare una macchina virtuale dal disco rigido originale hello</span><span class="sxs-lookup"><span data-stu-id="5f115-150">Create a VM from hello original hard disk</span></span>

<span data-ttu-id="5f115-151">utilizzare una macchina virtuale dal disco rigido virtuale originale, toocreate [portale di Azure classico](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="5f115-151">toocreate a VM from your original virtual hard disk, use [Azure classic portal](https://manage.windowsazure.com).</span></span>

1. <span data-ttu-id="5f115-152">Accedere al [portale di Azure classico](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="5f115-152">Sign into [Azure classic portal](https://manage.windowsazure.com).</span></span>
2. <span data-ttu-id="5f115-153">Nella parte inferiore di hello del portale hello, selezionare **New** > **calcolo** > **macchina virtuale** > **dalla raccolta** .</span><span class="sxs-lookup"><span data-stu-id="5f115-153">At hello bottom of hello portal, select **New** > **Compute** > **Virtual Machine** > **From Gallery**.</span></span>
3. <span data-ttu-id="5f115-154">In hello **scegliere un'immagine** selezionare **dischi personali**, e quindi selezionare hello disco rigido virtuale originale.</span><span class="sxs-lookup"><span data-stu-id="5f115-154">In hello **Choose an Image** section, select **My disks**, and then select hello original virtual hard disk.</span></span> <span data-ttu-id="5f115-155">Controllare le informazioni sul percorso hello.</span><span class="sxs-lookup"><span data-stu-id="5f115-155">Check hello location information.</span></span> <span data-ttu-id="5f115-156">Questo è l'area di hello in cui deve essere distribuito hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-156">This is hello region where hello VM must be deployed.</span></span> <span data-ttu-id="5f115-157">Selezionare il pulsante Avanti hello.</span><span class="sxs-lookup"><span data-stu-id="5f115-157">Select hello next button.</span></span>
4. <span data-ttu-id="5f115-158">In hello **configurazione della macchina virtuale** sezione, digitare il nome di macchina virtuale hello e selezionare una dimensione per hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="5f115-158">In hello **Virtual machine configuration** section, type hello VM name and select a size for hello VM.</span></span>
