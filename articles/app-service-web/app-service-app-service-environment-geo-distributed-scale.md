---
title: "Scalabilità distribuita a livello geografico con ambienti del servizio app"
description: "Informazioni sulla scalabilità orizzontale delle app mediante la distribuzione a livello geografico con Gestione traffico e ambienti del servizio app"
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: c1b05ca8-3703-4d87-a9ae-819d741787fb
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/07/2016
ms.author: stefsch
ms.openlocfilehash: 505301b2650c9b8bafdad352055f30e55148ab0c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="geo-distributed-scale-with-app-service-environments"></a><span data-ttu-id="67968-103">Scalabilità distribuita a livello geografico con ambienti del servizio app</span><span class="sxs-lookup"><span data-stu-id="67968-103">Geo Distributed Scale with App Service Environments</span></span>
## <a name="overview"></a><span data-ttu-id="67968-104">Overview</span><span class="sxs-lookup"><span data-stu-id="67968-104">Overview</span></span>
<span data-ttu-id="67968-105">Gli scenari di applicazioni che richiedono una scalabilità molto elevata possono superare la capacità delle risorse di calcolo disponibili per una singola distribuzione di un'app.</span><span class="sxs-lookup"><span data-stu-id="67968-105">Application scenarios which require very high scale can exceed the compute resource capacity available to a single deployment of an app.</span></span>  <span data-ttu-id="67968-106">Applicazioni di voto, eventi sportivi ed eventi di intrattenimento televisivi sono tutti esempi di scenari che richiedono una scalabilità estremamente elevata.</span><span class="sxs-lookup"><span data-stu-id="67968-106">Voting applications, sporting events, and televised entertainment events are all examples of scenarios that require extremely high scale.</span></span> <span data-ttu-id="67968-107">I requisiti di scalabilità elevata possono essere soddisfatti con la scalabilità orizzontale delle applicazioni, con più distribuzioni di app eseguite in una singola area geografica, oltre che in diverse aree, per gestire i requisiti di carico particolarmente intenso.</span><span class="sxs-lookup"><span data-stu-id="67968-107">High scale requirements can be met by horizontally scaling out apps, with multiple app deployments being made within a single region, as well as across regions, to handle extreme load requirements.</span></span>

<span data-ttu-id="67968-108">Gli ambienti del servizio app sono una piattaforma ideale per la scalabilità orizzontale.</span><span class="sxs-lookup"><span data-stu-id="67968-108">App Service Environments are an ideal platform for horizontal scale out.</span></span>  <span data-ttu-id="67968-109">Una volta selezionata una configurazione di Ambiente del servizio app che possa supportare una frequenza di richieste nota, gli sviluppatori possono distribuire altre istanze di ambienti del servizio app usando modelli di progetto (o "cookiecutter") per ottenere una capacità di carico di picco desiderata.</span><span class="sxs-lookup"><span data-stu-id="67968-109">Once an App Service Environment configuration has been selected that can support a known request rate, developers can deploy additional App Service Environments in "cookie cutter" fashion to attain a desired peak load capacity.</span></span>

<span data-ttu-id="67968-110">Si supponga ad esempio che un'app eseguita in una configurazione di Ambiente del servizio app sia stata testata per la gestione di 20 KB di richieste al secondo (RPS).</span><span class="sxs-lookup"><span data-stu-id="67968-110">For example suppose an app running on an App Service Environment configuration has been tested to handle 20K requests per second (RPS).</span></span>  <span data-ttu-id="67968-111">Se la capacità di carico di picco desiderata è pari a 100 KB RPS, è possibile creare cinque (5) ambienti del servizio app per assicurare che l'applicazione possa gestire il carico massimo previsto.</span><span class="sxs-lookup"><span data-stu-id="67968-111">If the desired peak load capacity is 100K RPS, then five (5) App Service Environments can be created and configured to ensure the application can handle the maximum projected load.</span></span>

<span data-ttu-id="67968-112">Poiché in genere i clienti accedono alle app usando un dominio personalizzato, o personale, gli sviluppatori hanno bisogno di un modo per distribuire le richieste di app tra tutte le istanze di Ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="67968-112">Since customers typically access apps using a custom (or vanity) domain, developers need a way to distribute app requests across all of the App Service Environment instances.</span></span>  <span data-ttu-id="67968-113">Un modo ottimale per ottenere questo risultato consiste nel risolvere il dominio personalizzato usando un [profilo di Gestione traffico di Azure][AzureTrafficManagerProfile].</span><span class="sxs-lookup"><span data-stu-id="67968-113">A great way to accomplish this is to resolve the custom domain using an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="67968-114">Il profilo di Gestione traffico può essere configurato in modo che punti a tutti i singoli ambienti del servizio app.</span><span class="sxs-lookup"><span data-stu-id="67968-114">The Traffic Manager profile can be configured to point at all of the individual App Service Environments.</span></span>  <span data-ttu-id="67968-115">Gestione traffico gestirà automaticamente la distribuzione dei clienti tra tutti gli ambienti del servizio app in base alle impostazioni di bilanciamento del carico nel profilo di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="67968-115">Traffic Manager will automatically handle distributing customers across all of the App Service Environments based on the load balancing settings in the Traffic Manager profile.</span></span>  <span data-ttu-id="67968-116">Questo approccio funziona indipendentemente dal fatto che tutti gli ambienti del servizio app siano distribuiti in una singola area di Azure o a livello mondiale tra più aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="67968-116">This approach works regardless of whether all of the App Service Environments are deployed in a single Azure region, or deployed worldwide across multiple Azure regions.</span></span>

<span data-ttu-id="67968-117">Inoltre, poiché i clienti accedono alle app tramite il dominio personale, non conoscono il numero di ambienti del servizio app che eseguono un'app.</span><span class="sxs-lookup"><span data-stu-id="67968-117">Furthermore, since customers access apps through the vanity domain, customers are unaware of the number of App Service Environments running an app.</span></span>  <span data-ttu-id="67968-118">Di conseguenza, gli sviluppatori possono aggiungere e rimuovere in modo rapido e facile ambienti del servizio app in base al carico di traffico osservato.</span><span class="sxs-lookup"><span data-stu-id="67968-118">As a result developers can quickly and easily add, and remove, App Service Environments based on observed traffic load.</span></span>

<span data-ttu-id="67968-119">Il diagramma concettuale seguente illustra un'app con scalabilità orizzontale fra tre ambienti del servizio app in una singola area geografica.</span><span class="sxs-lookup"><span data-stu-id="67968-119">The conceptual diagram below depicts an app horizontally scaled out across three App Service Environments within a single region.</span></span>

![Architettura concettuale][ConceptualArchitecture] 

<span data-ttu-id="67968-121">Il resto di questo argomento illustra in dettaglio la procedura prevista per configurare una topologia distribuita per l'app di esempio con più ambienti del servizio app.</span><span class="sxs-lookup"><span data-stu-id="67968-121">The remainder of this topic walks through the steps involved with setting up a distributed topology for the sample app using multiple App Service Environments.</span></span>

## <a name="planning-the-topology"></a><span data-ttu-id="67968-122">Pianificazione della topologia</span><span class="sxs-lookup"><span data-stu-id="67968-122">Planning the Topology</span></span>
<span data-ttu-id="67968-123">Prima di compilare il footprint di un'app distribuita, è utile avere anticipatamente alcune informazioni.</span><span class="sxs-lookup"><span data-stu-id="67968-123">Before building out a distributed app footprint, it helps to have a few pieces information ahead of time.</span></span>

* <span data-ttu-id="67968-124">**Dominio personalizzato per l'app**: definire qual è il nome del dominio personalizzato che i clienti useranno per accedere all'app.</span><span class="sxs-lookup"><span data-stu-id="67968-124">**Custom domain for the app:**  What is the custom domain name that customers will use to access the app?</span></span>  <span data-ttu-id="67968-125">Per l'app di esempio il nome di dominio personalizzato è *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="67968-125">For the sample app the custom domain name is *www.scalableasedemo.com*</span></span>
* <span data-ttu-id="67968-126">**Dominio di Gestione traffico:** è necessario scegliere un nome di dominio quando si crea un profilo di [Gestione traffico di Azure][AzureTrafficManagerProfile].</span><span class="sxs-lookup"><span data-stu-id="67968-126">**Traffic Manager domain:**  A domain name needs to be chosen when creating an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="67968-127">Questo nome sarà combinato con il suffisso *trafficmanager.net* per registrare una voce di dominio gestita da Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="67968-127">This name will be combined with the *trafficmanager.net* suffix to register a domain entry that is managed by Traffic Manager.</span></span>  <span data-ttu-id="67968-128">Per l'app di esempio il nome scelto è *scalable-ase-demo*.</span><span class="sxs-lookup"><span data-stu-id="67968-128">For the sample app, the name chosen is *scalable-ase-demo*.</span></span>  <span data-ttu-id="67968-129">Il nome di dominio completo gestito da Gestione traffico sarà quindi *scalable-ase-demo.trafficmanager.net*.</span><span class="sxs-lookup"><span data-stu-id="67968-129">As a result the full domain name that is managed by Traffic Manager is *scalable-ase-demo.trafficmanager.net*.</span></span>
* <span data-ttu-id="67968-130">**Strategia per la scalabilità del footprint dell'app:** definire se il footprint dell'applicazione sarà distribuito tra più ambienti del servizio app in una singola area geografica,</span><span class="sxs-lookup"><span data-stu-id="67968-130">**Strategy for scaling the app footprint:**  Will the application footprint be distributed across multiple App Service Environments in a single region?</span></span>  <span data-ttu-id="67968-131">in più aree geografiche</span><span class="sxs-lookup"><span data-stu-id="67968-131">Multiple regions?</span></span>  <span data-ttu-id="67968-132">o con una combinazione di entrambi gli approcci.</span><span class="sxs-lookup"><span data-stu-id="67968-132">A mix-and-match of both approaches?</span></span>  <span data-ttu-id="67968-133">La decisione dovrà essere basata sulla previsione dell'origine del traffico dei clienti, oltre che sull'efficacia della scalabilità del resto dell'infrastruttura di back-end di supporto di un'app.</span><span class="sxs-lookup"><span data-stu-id="67968-133">The decision should be based on expectations of where customer traffic will originate, as well as how well the rest of an app's supporting back-end infrastructure can scale.</span></span>  <span data-ttu-id="67968-134">Ad esempio, un'applicazione al 100% senza stato può essere considerevolmente ridimensionata usando una combinazione di più ambienti del servizio app per ogni area di Azure, moltiplicati per gli ambienti del servizio app distribuiti tra più aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="67968-134">For example, with a 100% stateless application, an app can be massively scaled using a combination of multiple App Service Environments per Azure region,  multiplied by App Service Environments deployed across multiple Azure regions.</span></span>  <span data-ttu-id="67968-135">Con la disponibilità di oltre 15 aree di Azure pubbliche da cui scegliere, i clienti possono veramente creare un footprint dell'applicazione iperscalabile in tutto il mondo.</span><span class="sxs-lookup"><span data-stu-id="67968-135">With 15+ public Azure regions available to choose from, customers can truly build a world-wide hyper-scale application footprint.</span></span>  <span data-ttu-id="67968-136">Per l'app di esempio usata per questo articolo sono stati creati tre ambienti del servizio app in una singola area di Azure (Stati Uniti centro-meridionali).</span><span class="sxs-lookup"><span data-stu-id="67968-136">For the sample app used for this article, three App Service Environments were created in a single Azure region (South Central US).</span></span>
* <span data-ttu-id="67968-137">**Convenzione di denominazione per gli ambienti del servizio app**: ogni ambiente del servizio app richiede un nome univoco.</span><span class="sxs-lookup"><span data-stu-id="67968-137">**Naming convention for the App Service Environments:**  Each App Service Environment requires a unique name.</span></span>  <span data-ttu-id="67968-138">Oltre a uno o due ambienti del servizio app, è utile avere una convenzione di denominazione per facilitare l'identificazione di ogni ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="67968-138">Beyond one or two App Service Environments it is helpful to have a naming convention to help identify each App Service Environment.</span></span>  <span data-ttu-id="67968-139">Per l'app di esempio è stata usata una convenzione di denominazione semplice.</span><span class="sxs-lookup"><span data-stu-id="67968-139">For the sample app a simple naming convention was used.</span></span>  <span data-ttu-id="67968-140">I nomi dei tre ambienti del servizio app sono *fe1ase*, *fe2ase* e *fe3ase*.</span><span class="sxs-lookup"><span data-stu-id="67968-140">The names of the three App Service Environments are *fe1ase*, *fe2ase*, and *fe3ase*.</span></span>
* <span data-ttu-id="67968-141">**Convenzione di denominazione per le app:** poiché saranno distribuite più istanze dell'app, è necessario un nome per ogni istanza dell'app distribuita.</span><span class="sxs-lookup"><span data-stu-id="67968-141">**Naming convention for the apps:**  Since multiple instances of the app will be deployed, a name is needed for each instance of the deployed app.</span></span>  <span data-ttu-id="67968-142">Una funzionalità poco conosciuta ma molto pratica degli ambienti del servizio app è la possibilità di usare lo stesso nome tra più ambienti.</span><span class="sxs-lookup"><span data-stu-id="67968-142">One little-known but very convenient feature of App Service Environments is that the same app name can be used across multiple App Service Environments.</span></span>  <span data-ttu-id="67968-143">Poiché ogni ambiente del servizio app ha un suffisso univoco, gli sviluppatori possono scegliere di riutilizzare esattamente lo stesso nome dell'app in ogni ambiente.</span><span class="sxs-lookup"><span data-stu-id="67968-143">Since each App Service Environment has a unique domain suffix, developers can choose to re-use the exact same app name in each environment.</span></span>  <span data-ttu-id="67968-144">Ad esempio, uno sviluppatore può avere app denominate come segue: *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net* e così via.  Per l'app di esempio ogni istanza dell'app ha tuttavia anche un nome univoco.</span><span class="sxs-lookup"><span data-stu-id="67968-144">For example a developer could have apps named as follows:  *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net*, etc.  For the sample app though each app instance also has a unique name.</span></span>  <span data-ttu-id="67968-145">I nomi delle istanze dell'app usati sono *webfrontend1*, *webfrontend2* e *webfrontend3*.</span><span class="sxs-lookup"><span data-stu-id="67968-145">The app instance names used are *webfrontend1*, *webfrontend2*, and *webfrontend3*.</span></span>

## <a name="setting-up-the-traffic-manager-profile"></a><span data-ttu-id="67968-146">Configurazione del profilo di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="67968-146">Setting up the Traffic Manager Profile</span></span>
<span data-ttu-id="67968-147">Dopo la distribuzione di più istanze di un'app in più ambienti del servizio app, è possibile registrare le singole istanze con Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="67968-147">Once multiple instances of an app are deployed on multiple App Service Environments, the  individual app instances can be registered with Traffic Manager.</span></span>  <span data-ttu-id="67968-148">Per l'app di esempio è necessario un profilo di Gestione traffico per *scalable-ase-demo.trafficmanager.net* che possa indirizzare i clienti a una qualsiasi delle istanze seguenti dell'app distribuita:</span><span class="sxs-lookup"><span data-stu-id="67968-148">For the sample app a Traffic Manager profile is needed for *scalable-ase-demo.trafficmanager.net* that can route customers to any of the following deployed app instances:</span></span>

* <span data-ttu-id="67968-149">**webfrontend1.fe1ase.p.azurewebsites.net**: istanza dell'app di esempio distribuita nel primo ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="67968-149">**webfrontend1.fe1ase.p.azurewebsites.net:**  An instance of the sample app deployed on the first App Service Environment.</span></span>
* <span data-ttu-id="67968-150">**webfrontend2.fe2ase.p.azurewebsites.net**: istanza dell'app di esempio distribuita nel secondo ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="67968-150">**webfrontend2.fe2ase.p.azurewebsites.net:**  An instance of the sample app deployed on the second App Service Environment.</span></span>
* <span data-ttu-id="67968-151">**webfrontend3.fe3ase.p.azurewebsites.net**: istanza dell'app di esempio distribuita nel terzo ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="67968-151">**webfrontend3.fe3ase.p.azurewebsites.net:**  An instance of the sample app deployed on the third App Service Environment.</span></span>

<span data-ttu-id="67968-152">Il modo più semplice per registrare più endpoint di servizio app di Azure in esecuzione nella **stessa** area di Azure consiste nell'usare il [supporto di Azure Resource Manager per Gestione traffico di Azure][ARMTrafficManager] con PowerShell.</span><span class="sxs-lookup"><span data-stu-id="67968-152">The easiest way to register multiple Azure App Service endpoints, all running in the **same** Azure region, is with the Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

<span data-ttu-id="67968-153">Come primo passaggio creare un profilo di Gestione traffico di Azure.</span><span class="sxs-lookup"><span data-stu-id="67968-153">The first step is to create an Azure Traffic Manager profile.</span></span>  <span data-ttu-id="67968-154">Il codice seguente illustra come è stato creato il profilo per l'app di esempio:</span><span class="sxs-lookup"><span data-stu-id="67968-154">The code below shows how the profile was created for the sample app:</span></span>

    $profile = New-AzureTrafficManagerProfile –Name scalableasedemo -ResourceGroupName yourRGNameHere -TrafficRoutingMethod Weighted -RelativeDnsName scalable-ase-demo -Ttl 30 -MonitorProtocol HTTP -MonitorPort 80 -MonitorPath "/"

<span data-ttu-id="67968-155">Si noti che il parametro *RelativeDnsName* è stato impostato su *scalable-ase-demo*.</span><span class="sxs-lookup"><span data-stu-id="67968-155">Notice how the *RelativeDnsName* parameter was set to *scalable-ase-demo*.</span></span>  <span data-ttu-id="67968-156">È così che il nome di dominio *scalable-ase-demo.trafficmanager.net* viene creato e associato al profilo di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="67968-156">This is how the domain name *scalable-ase-demo.trafficmanager.net* is created and associated with a Traffic Manager profile.</span></span>

<span data-ttu-id="67968-157">Il parametro *TrafficRoutingMethod* definisce i criteri di bilanciamento del carico che saranno usati da Gestione traffico per determinare come distribuire il carico del cliente tra tutti gli endpoint disponibili.</span><span class="sxs-lookup"><span data-stu-id="67968-157">The *TrafficRoutingMethod* parameter defines the load balancing policy Traffic Manager will use to determine how to spread customer load across all of the available endpoints.</span></span>  <span data-ttu-id="67968-158">In questo esempio è stato usato il metodo *Weighted* .</span><span class="sxs-lookup"><span data-stu-id="67968-158">In this example the *Weighted* method was chosen.</span></span>  <span data-ttu-id="67968-159">Le richieste del cliente saranno quindi distribuite tra tutti gli endpoint dell'applicazione registrata in base ai pesi associati a ogni endpoint.</span><span class="sxs-lookup"><span data-stu-id="67968-159">This will result in customer requests being spread across all of the registered application endpoints based on the relative weights associated with each endpoint.</span></span> 

<span data-ttu-id="67968-160">Dopo la creazione del profilo, ogni istanza dell'app viene aggiunta al profilo come endpoint nativo di Azure.</span><span class="sxs-lookup"><span data-stu-id="67968-160">With the profile created, each app instance is added to the profile as a native Azure endpoint.</span></span>  <span data-ttu-id="67968-161">Il codice seguente recupera un riferimento a ogni app Web front-end e quindi aggiunge ogni app come endpoint di Gestione traffico tramite il parametro *TargetResourceId* .</span><span class="sxs-lookup"><span data-stu-id="67968-161">The code below fetches a reference to each front end web app, and then adds each app as a Traffic Manager endpoint by way of the *TargetResourceId* parameter.</span></span>

    $webapp1 = Get-AzureRMWebApp -Name webfrontend1
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend1 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp1.Id –EndpointStatus Enabled –Weight 10

    $webapp2 = Get-AzureRMWebApp -Name webfrontend2
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend2 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp2.Id –EndpointStatus Enabled –Weight 10

    $webapp3 = Get-AzureRMWebApp -Name webfrontend3
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend3 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp3.Id –EndpointStatus Enabled –Weight 10

    Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile

<span data-ttu-id="67968-162">Come si noterà, è presente una chiamata a *Add-AzureTrafficManagerEndpointConfig* per ogni singola istanza dell'app.</span><span class="sxs-lookup"><span data-stu-id="67968-162">Notice how there is one call to *Add-AzureTrafficManagerEndpointConfig* for each individual app instance.</span></span>  <span data-ttu-id="67968-163">Il parametro *TargetResourceId* in ogni comando di Powershell fa riferimento a una delle tre istanze dell'app distribuite.</span><span class="sxs-lookup"><span data-stu-id="67968-163">The *TargetResourceId* parameter in each Powershell command references one of the three deployed app instances.</span></span>  <span data-ttu-id="67968-164">Il profilo di Gestione traffico distribuirà il carico tra tutti e tre gli endpoint registrati nel profilo.</span><span class="sxs-lookup"><span data-stu-id="67968-164">The Traffic Manager profile will spread load across all three endpoints registered in the profile.</span></span>

<span data-ttu-id="67968-165">Tutti e tre gli endpoint usano lo stesso valore (10) per il parametro *Weight* .</span><span class="sxs-lookup"><span data-stu-id="67968-165">All of the three endpoints use the same value (10) for the *Weight* parameter.</span></span>  <span data-ttu-id="67968-166">Gestione traffico distribuirà quindi le richieste dei clienti tra tutte e tre le istanze dell'app in modo relativamente uniforme.</span><span class="sxs-lookup"><span data-stu-id="67968-166">This results in Traffic Manager spreading customer requests across all three app instances relatively evenly.</span></span> 

## <a name="pointing-the-apps-custom-domain-at-the-traffic-manager-domain"></a><span data-ttu-id="67968-167">Indirizzamento del dominio personalizzato dell'app al dominio di Gestione traffico</span><span class="sxs-lookup"><span data-stu-id="67968-167">Pointing the App's Custom Domain at the Traffic Manager Domain</span></span>
<span data-ttu-id="67968-168">Come passaggio finale è necessario che il dominio personalizzato dell'app punti al dominio di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="67968-168">The final step necessary is to point the custom domain of the app at the Traffic Manager domain.</span></span>  <span data-ttu-id="67968-169">Per l'app di esempio *www.scalableasedemo.com* deve puntare a *scalable-ase-demo.trafficmanager.net*.</span><span class="sxs-lookup"><span data-stu-id="67968-169">For the sample app this means pointing *www.scalableasedemo.com* at *scalable-ase-demo.trafficmanager.net*.</span></span>  <span data-ttu-id="67968-170">Questo passaggio deve essere completato con il registrar che gestisce il dominio personalizzato.</span><span class="sxs-lookup"><span data-stu-id="67968-170">This step needs to be completed with the domain registrar that manages the custom domain.</span></span>  

<span data-ttu-id="67968-171">Usando gli strumenti di gestione del dominio del registrar, è necessario creare un record CNAME che dal dominio personalizzato punti al dominio di Gestione traffico.</span><span class="sxs-lookup"><span data-stu-id="67968-171">Using your registrar's domain management tools, a CNAME records needs to be created which points the custom domain at the Traffic Manager domain.</span></span>  <span data-ttu-id="67968-172">L'immagine seguente mostra un esempio di come appare la configurazione di questo CNAME:</span><span class="sxs-lookup"><span data-stu-id="67968-172">The picture below shows an example of what this CNAME configuration looks like:</span></span>

![CNAME per il dominio personalizzato][CNAMEforCustomDomain] 

<span data-ttu-id="67968-174">Anche se questo aspetto non viene trattato in questo argomento, tenere presente che per ogni singola istanza dell'app deve essere registrato anche il dominio personalizzato.</span><span class="sxs-lookup"><span data-stu-id="67968-174">Although not covered in this topic, remember that each individual app instance needs to have the custom domain registered with it as well.</span></span>  <span data-ttu-id="67968-175">In caso contrario, se una richiesta raggiunge un'istanza dell'app e per l'app non è stato registrato il dominio personalizzato, la richiesta non riuscirà.</span><span class="sxs-lookup"><span data-stu-id="67968-175">Otherwise if a request makes it to an app instance, and the application does not have the custom domain registered with the app, the request will fail.</span></span>  

<span data-ttu-id="67968-176">In questo esempio il dominio personalizzato è *www.scalableasedemo.com*e a ogni istanza dell'applicazione è associato il dominio personalizzato.</span><span class="sxs-lookup"><span data-stu-id="67968-176">In this example the custom domain is *www.scalableasedemo.com*, and each application instance has the custom domain associated with it.</span></span>

![Dominio personalizzato][CustomDomain] 

<span data-ttu-id="67968-178">Per un riepilogo della procedura di registrazione di un dominio personalizzato con le app del Servizio app di Azure, vedere l'articolo seguente relativo alla [registrazione di domini personalizzati][RegisterCustomDomain].</span><span class="sxs-lookup"><span data-stu-id="67968-178">For a recap of of registering a custom domain with Azure App Service apps, see the following article on [registering custom domains][RegisterCustomDomain].</span></span>

## <a name="trying-out-the-distributed-topology"></a><span data-ttu-id="67968-179">Prova della topologia distribuita</span><span class="sxs-lookup"><span data-stu-id="67968-179">Trying out the Distributed Topology</span></span>
<span data-ttu-id="67968-180">Come risultato finale della configurazione di Gestione traffico e del DNS, il flusso delle richieste per *www.scalableasedemo.com* avviene con la sequenza seguente:</span><span class="sxs-lookup"><span data-stu-id="67968-180">The end result of the Traffic Manager and DNS configuration is that requests for *www.scalableasedemo.com* will flow through the following sequence:</span></span>

1. <span data-ttu-id="67968-181">Un browser o un dispositivo esegue una ricerca DNS di *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="67968-181">A browser or device will make a DNS lookup for *www.scalableasedemo.com*</span></span>
2. <span data-ttu-id="67968-182">La voce CNAME del registrar causa il reindirizzamento della ricerca DNS a Gestione traffico di Azure.</span><span class="sxs-lookup"><span data-stu-id="67968-182">The CNAME entry at the domain registrar causes the DNS lookup to be redirected to Azure Traffic Manager.</span></span>
3. <span data-ttu-id="67968-183">Viene eseguita una ricerca DNS di *scalable-ase-demo.trafficmanager.net* in uno dei server DNS di Gestione traffico di Azure.</span><span class="sxs-lookup"><span data-stu-id="67968-183">A DNS lookup is made for *scalable-ase-demo.trafficmanager.net* against one of the Azure Traffic Manager DNS servers.</span></span>
4. <span data-ttu-id="67968-184">In base ai criteri di bilanciamento del carico, ovvero il parametro *TrafficRoutingMethod* usato in precedenza durante la creazione del profilo di Gestione traffico, Gestione traffico sceglierà uno degli endpoint configurati e restituirà l'FQDN dell'endpoint al browser o al dispositivo.</span><span class="sxs-lookup"><span data-stu-id="67968-184">Based on the load balancing policy (the *TrafficRoutingMethod* parameter used earlier when creating the Traffic Manager profile), Traffic Manager will select one of the configured endpoints and return the FQDN of that endpoint to the browser or device.</span></span>
5. <span data-ttu-id="67968-185">Poiché l'FQDN dell'endpoint è l'URL di un'istanza dell'app in esecuzione in un ambiente del servizio app, il browser o il dispositivo chiederà a un server DNS di Microsoft Azure di risolvere l'FQDN in un indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="67968-185">Since the FQDN of the endpoint is the Url of an app instance running on an App Service Environment, the browser or device will ask a Microsoft Azure DNS server to resolve the FQDN to an IP address.</span></span> 
6. <span data-ttu-id="67968-186">Il browser o il dispositivo invierà la richiesta HTTP/S all'indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="67968-186">The browser or device will send the HTTP/S request to the IP address.</span></span>  
7. <span data-ttu-id="67968-187">La richiesta arriverà a una delle istanze dell'app in esecuzione in uno degli ambienti del servizio app.</span><span class="sxs-lookup"><span data-stu-id="67968-187">The request will arrive at one of the app instances running on one of the App Service Environments.</span></span>

<span data-ttu-id="67968-188">L'immagine della console seguente mostra una ricerca DNS del dominio personalizzato dell'app di esempio risolta correttamente in un'istanza dell'app eseguita in uno dei tre ambienti del servizio app di esempio, in questo caso il secondo dei tre ambienti del servizio app:</span><span class="sxs-lookup"><span data-stu-id="67968-188">The console picture below shows a DNS lookup for the sample app's custom domain successfully resolving to an app instance running on one of the three sample App Service Environments (in this case the second of the three App Service Environments):</span></span>

![Ricerca DNS][DNSLookup] 

## <a name="additional-links-and-information"></a><span data-ttu-id="67968-190">Informazioni e collegamenti aggiuntivi</span><span class="sxs-lookup"><span data-stu-id="67968-190">Additional Links and Information</span></span>
<span data-ttu-id="67968-191">Tutti gli articoli e le procedure sugli ambienti del servizio app sono disponibili nel [file LEGGIMI per gli ambienti di servizio dell'applicazione](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="67968-191">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="67968-192">Documentazione sul [supporto di Azure Resource Manager per Gestione traffico][ARMTrafficManager] con PowerShell.</span><span class="sxs-lookup"><span data-stu-id="67968-192">Documentation on the Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[AzureTrafficManagerProfile]: ../traffic-manager/traffic-manager-manage-profiles.md
[ARMTrafficManager]: ../traffic-manager/traffic-manager-powershell-arm.md
[RegisterCustomDomain]: app-service-web-tutorial-custom-domain.md


<!-- IMAGES -->
[ConceptualArchitecture]: ./media/app-service-app-service-environment-geo-distributed-scale/ConceptualArchitecture-1.png
[CNAMEforCustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CNAMECustomDomain-1.png
[DNSLookup]:  ./media/app-service-app-service-environment-geo-distributed-scale/DNSLookup-1.png
[CustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CustomDomain-1.png 
