---
title: Esercitazione sull'aggiornamento di un'app di Service Fabric | Documentazione Microsoft
description: Questo articolo esamina l'esperienza di distribuzione di un'applicazione di Service Fabric, la modifica del codice e l'implementazione di un aggiornamento tramite Visual Studio.
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: a3181a7a-9ab1-4216-b07a-05b79bd826a4
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 940440688ec770a4aeb932b574bd6be173f494d4
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="service-fabric-application-upgrade-tutorial-using-visual-studio"></a><span data-ttu-id="ae2df-103">Esercitazione sull'aggiornamento di un'applicazione di Service Fabric tramite Visual Studio</span><span class="sxs-lookup"><span data-stu-id="ae2df-103">Service Fabric application upgrade tutorial using Visual Studio</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="ae2df-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="ae2df-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="ae2df-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="ae2df-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="ae2df-106">Azure Service Fabric semplifica il processo di aggiornamento delle applicazioni cloud garantendo che solo i servizi modificati vengano aggiornati e che l'integrità delle applicazioni venga monitorata durante l'intero processo di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="ae2df-106">Azure Service Fabric simplifies the process of upgrading cloud applications by ensuring that only changed services are upgraded, and that application health is monitored throughout the upgrade process.</span></span> <span data-ttu-id="ae2df-107">Se rileva un problema, esegue automaticamente il rollback dell'applicazione alla versione precedente.</span><span class="sxs-lookup"><span data-stu-id="ae2df-107">It also automatically rolls back the application to the previous version upon encountering issues.</span></span> <span data-ttu-id="ae2df-108">Gli aggiornamenti delle applicazioni di Service Fabric, inoltre, sono *privi di tempi di inattività*.</span><span class="sxs-lookup"><span data-stu-id="ae2df-108">Service Fabric application upgrades are *Zero Downtime*, since the application can be upgraded with no downtime.</span></span> <span data-ttu-id="ae2df-109">Questa esercitazione illustra come completare un aggiornamento in sequenza da Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ae2df-109">This tutorial covers how to complete a rolling upgrade from Visual Studio.</span></span>

## <a name="step-1-build-and-publish-the-visual-objects-sample"></a><span data-ttu-id="ae2df-110">Passaggio 1: creare e pubblicare l'applicazione Oggetti visivi di esempio</span><span class="sxs-lookup"><span data-stu-id="ae2df-110">Step 1: Build and publish the Visual Objects sample</span></span>
<span data-ttu-id="ae2df-111">Innanzitutto scaricare l'applicazione [Visual Objects](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started/tree/classic/Actors/VisualObjects) da GitHub.</span><span class="sxs-lookup"><span data-stu-id="ae2df-111">First, download the [Visual Objects](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started/tree/classic/Actors/VisualObjects) application from GitHub.</span></span> <span data-ttu-id="ae2df-112">Quindi compilare e pubblicare l'applicazione facendo clic con il pulsante destro del mouse sul progetto dell'applicazione, **VisualObjects**, e selezionando il comando **Pubblica** dalla voce di menu Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="ae2df-112">Then, build and publish the application by right-clicking on the application project, **VisualObjects**, and selecting the **Publish** command in the Service Fabric menu item.</span></span>

![Menu di scelta rapida per un'applicazione di Service Fabric][image1]

<span data-ttu-id="ae2df-114">Selezionando **Pubblica** viene visualizzata una finestra popup in cui è possibile impostare il **Profilo di destinazione** su **PublishProfiles\Local.xml**.</span><span class="sxs-lookup"><span data-stu-id="ae2df-114">Selecting **Publish** brings up a popup, and you can set the **Target profile** to **PublishProfiles\Local.xml**.</span></span> <span data-ttu-id="ae2df-115">Fare clic su **Pubblica**: la finestra avrà un aspetto simile all'immagine seguente.</span><span class="sxs-lookup"><span data-stu-id="ae2df-115">The window should look like the following before you click **Publish**.</span></span>

![Pubblicazione di un'applicazione di Service Fabric][image2]

<span data-ttu-id="ae2df-117">Fare clic su **Pubblica** nella finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="ae2df-117">Now you can click **Publish** in the dialog box.</span></span> <span data-ttu-id="ae2df-118">È ora possibile usare [Service Fabric Explorer per visualizzare il cluster e l'applicazione](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="ae2df-118">You can use [Service Fabric Explorer to view the cluster and the application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="ae2df-119">L'applicazione Visual Objects include un servizio Web a cui è possibile accedere digitando [http://localhost:8081/visualobjects/](http://localhost:8081/visualobjects/) sulla barra degli indirizzi del browser.</span><span class="sxs-lookup"><span data-stu-id="ae2df-119">The Visual Objects application has a web service that you can go to by typing [http://localhost:8081/visualobjects/](http://localhost:8081/visualobjects/) in the address bar of your browser.</span></span>  <span data-ttu-id="ae2df-120">Sullo schermo verranno visualizzati dieci oggetti visivi mobili.</span><span class="sxs-lookup"><span data-stu-id="ae2df-120">You should see 10 floating visual objects moving around on the screen.</span></span>

<span data-ttu-id="ae2df-121">**NOTA:** in caso di distribuzione nel profilo `Cloud.xml` (Azure Service Fabric), l'applicazione deve quindi essere disponibile all'indirizzo **http://{NomeServiceFabric}.{Area}.cloudapp.azure.com:8081/visualobjects/**.</span><span class="sxs-lookup"><span data-stu-id="ae2df-121">**NOTE:** If deploying to `Cloud.xml` profile (Azure Service Fabric), the application should then be available at **http://{ServiceFabricName}.{Region}.cloudapp.azure.com:8081/visualobjects/**.</span></span> <span data-ttu-id="ae2df-122">Assicurarsi che `8081/TCP` sia stato configurato nel servizio di bilanciamento del carico (il servizio di bilanciamento del carico si trova nello stesso gruppo di risorse dell'istanza di Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="ae2df-122">Make sure you do have `8081/TCP` configured in the Load Balancer (find the Load Balancer in the same resource group as the Service Fabric instance).</span></span>

## <a name="step-2-update-the-visual-objects-sample"></a><span data-ttu-id="ae2df-123">Passaggio 2: aggiornare l'applicazione Oggetti visivi di esempio</span><span class="sxs-lookup"><span data-stu-id="ae2df-123">Step 2: Update the Visual Objects sample</span></span>
<span data-ttu-id="ae2df-124">È possibile osservare come con la versione distribuita al passaggio 1 gli oggetti visivi non ruotino.</span><span class="sxs-lookup"><span data-stu-id="ae2df-124">You might notice that with the version that was deployed in step 1, the visual objects do not rotate.</span></span> <span data-ttu-id="ae2df-125">L'applicazione può essere aggiornata in modo che gli oggetti visivi ruotino.</span><span class="sxs-lookup"><span data-stu-id="ae2df-125">Let's upgrade this application to one where the visual objects also rotate.</span></span>

<span data-ttu-id="ae2df-126">Selezionare il progetto VisualObjects.ActorService nella soluzione VisualObjects e aprire il file **VisualObjectActor.cs** .</span><span class="sxs-lookup"><span data-stu-id="ae2df-126">Select the VisualObjects.ActorService project within the VisualObjects solution, and open the **VisualObjectActor.cs** file.</span></span> <span data-ttu-id="ae2df-127">All'interno del file passare al metodo `MoveObject`, impostare come commento `visualObject.Move(false)` e rimuovere il commento `visualObject.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="ae2df-127">Within that file, go to the method `MoveObject`, comment out `visualObject.Move(false)`, and uncomment `visualObject.Move(true)`.</span></span> <span data-ttu-id="ae2df-128">Questa modifica del codice fa ruotare gli oggetti dopo l'aggiornamento del servizio.</span><span class="sxs-lookup"><span data-stu-id="ae2df-128">This code change rotates the objects after the service is upgraded.</span></span>  <span data-ttu-id="ae2df-129">**A questo punto è possibile compilare la soluzione (non ricompilarla)**, in modo che vengano compilati solo i progetti modificati.</span><span class="sxs-lookup"><span data-stu-id="ae2df-129">**Now you can build (not rebuild) the solution**, which builds the modified projects.</span></span> <span data-ttu-id="ae2df-130">Se si seleziona *Ricompila tutto*, è necessario aggiornare le versioni di tutti i progetti.</span><span class="sxs-lookup"><span data-stu-id="ae2df-130">If you select *Rebuild all*, you have to update the versions for all the projects.</span></span>

<span data-ttu-id="ae2df-131">È inoltre necessario specificare la versione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ae2df-131">We also need to version our application.</span></span> <span data-ttu-id="ae2df-132">Per apportare le modifiche di versione, fare clic con il pulsante destro del mouse sul progetto **VisualObjects** e scegliere l'opzione **Modifica versioni del manifesto** di Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ae2df-132">To make the version changes after you right-click on the **VisualObjects** project, you can use the Visual Studio **Edit Manifest Versions** option.</span></span> <span data-ttu-id="ae2df-133">Selezionando questa opzione viene visualizzata la finestra di dialogo per le versioni dell'edizione come segue:</span><span class="sxs-lookup"><span data-stu-id="ae2df-133">Selecting this option brings up the dialog box for edition versions as follows:</span></span>

![Finestra di dialogo del controllo delle versioni][image3]

<span data-ttu-id="ae2df-135">Aggiornare le versioni per i progetti modificati, i relativi pacchetti di codice e l'applicazione alla versione 2.0.0.</span><span class="sxs-lookup"><span data-stu-id="ae2df-135">Update the versions for the modified projects and their code packages, along with the application to version 2.0.0.</span></span> <span data-ttu-id="ae2df-136">Dopo aver apportate le modifiche, il manifesto dovrebbe essere simile al seguente (le parti in grassetto indicano le modifiche):</span><span class="sxs-lookup"><span data-stu-id="ae2df-136">After the changes are made, the manifest should look like the following (bold portions show the changes):</span></span>

![Aggiornamento di versioni][image4]

<span data-ttu-id="ae2df-138">Gli strumenti di Visual Studio possono eseguire il rollup automatico delle versioni quando si seleziona l'opzione **Aggiorna automaticamente le versioni di applicazioni e servizi**.</span><span class="sxs-lookup"><span data-stu-id="ae2df-138">The Visual Studio tools can do automatic rollups of versions upon selecting **Automatically update application and service versions**.</span></span> <span data-ttu-id="ae2df-139">Se si usa [SemVer](http://www.semver.org)è necessario aggiornare il codice e/o solo la versione del pacchetto di configurazione se è selezionata questa opzione.</span><span class="sxs-lookup"><span data-stu-id="ae2df-139">If you use [SemVer](http://www.semver.org), you need to update the code and/or configuration package version alone if that option is selected.</span></span>

<span data-ttu-id="ae2df-140">Salvare le modifiche e controllare la casella **Aggiorna l'applicazione** .</span><span class="sxs-lookup"><span data-stu-id="ae2df-140">Save the changes, and now check the **Upgrade the Application** box.</span></span>

## <a name="step-3--upgrade-your-application"></a><span data-ttu-id="ae2df-141">Passaggio 3: Aggiornare l'applicazione</span><span class="sxs-lookup"><span data-stu-id="ae2df-141">Step 3:  Upgrade your application</span></span>
<span data-ttu-id="ae2df-142">È consigliabile acquisire familiarità con i [parametri di aggiornamento dell'applicazione](service-fabric-application-upgrade-parameters.md) e con il [processo di aggiornamento](service-fabric-application-upgrade.md) per conoscere i vari parametri di aggiornamento, i valori di timeout e i criteri di integrità applicabili.</span><span class="sxs-lookup"><span data-stu-id="ae2df-142">Familiarize yourself with the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and the [upgrade process](service-fabric-application-upgrade.md) to get a good understanding of the various upgrade parameters, time-outs, and health criterion that can be applied.</span></span> <span data-ttu-id="ae2df-143">Per questa procedura dettagliata si usa l'impostazione predefinita per il criterio di valutazione dell'integrità del servizio (modalità UnMonitored).</span><span class="sxs-lookup"><span data-stu-id="ae2df-143">For this walkthrough, the service health evaluation criterion is set to the default (unmonitored mode).</span></span> <span data-ttu-id="ae2df-144">È possibile configurare queste impostazioni selezionando l'opzione **Configura le impostazioni di aggiornamento** e modificando i parametri in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="ae2df-144">You can configure these settings by selecting **Configure Upgrade Settings** and then modifying the parameters as desired.</span></span>

<span data-ttu-id="ae2df-145">È ora possibile avviare l'aggiornamento dell'applicazione selezionando il pulsante **Pubblica**.</span><span class="sxs-lookup"><span data-stu-id="ae2df-145">Now we are all set to start the application upgrade by selecting **Publish**.</span></span> <span data-ttu-id="ae2df-146">L'applicazione viene aggiornata alla versione 2.0.0, che supporta la rotazione degli oggetti.</span><span class="sxs-lookup"><span data-stu-id="ae2df-146">This option upgrades your application to version 2.0.0, in which the objects rotate.</span></span> <span data-ttu-id="ae2df-147">Service Fabric aggiorna un dominio di aggiornamento alla volta (alcuni oggetti vengono aggiornati prima, altri dopo) e durante l'aggiornamento il servizio rimane accessibile.</span><span class="sxs-lookup"><span data-stu-id="ae2df-147">Service Fabric upgrades one update domain at a time (some objects are updated first, followed by others), and the service remains accessible during the upgrade.</span></span> <span data-ttu-id="ae2df-148">L'accesso al servizio può essere controllato tramite il client (browser).</span><span class="sxs-lookup"><span data-stu-id="ae2df-148">Access to the service can be checked through your client (browser).</span></span>  

<span data-ttu-id="ae2df-149">È ora possibile monitorare lo stato di avanzamento dell'aggiornamento dell'applicazione tramite Service Fabric Explorer, usando la scheda **Upgrades in Progress** (Aggiornamenti in corso) sotto le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="ae2df-149">Now, as the application upgrade proceeds, you can monitor it with Service Fabric Explorer, by using the **Upgrades in Progress** tab under the applications.</span></span>

<span data-ttu-id="ae2df-150">In pochi minuti tutti i domini di aggiornamento devono essere aggiornati (completati) e la finestra di output di Visual Studio deve inoltre indicare che l'aggiornamento è stato completato.</span><span class="sxs-lookup"><span data-stu-id="ae2df-150">In a few minutes, all update domains should be upgraded (completed), and the Visual Studio output window should also state that the upgrade is completed.</span></span> <span data-ttu-id="ae2df-151">A questo punto *tutti* gli oggetti visivi nella finestra del browser avranno iniziato a ruotare.</span><span class="sxs-lookup"><span data-stu-id="ae2df-151">And you should find that *all* the visual objects in your browser window are now rotating!</span></span>

<span data-ttu-id="ae2df-152">Come esercitazione, è possibile provare a cambiare le versioni e a passare dalla versione 2.0.0 alla versione 3.0.0 oppure addirittura dalla versione 2.0.0 alla versione 1.0.0.</span><span class="sxs-lookup"><span data-stu-id="ae2df-152">You may want to try changing the versions, and moving from version 2.0.0 to version 3.0.0 as an exercise, or even from version 2.0.0 back to version 1.0.0.</span></span> <span data-ttu-id="ae2df-153">Esercitarsi inoltre con i timeout e i criteri di integrità per acquisire familiarità anche con questi concetti.</span><span class="sxs-lookup"><span data-stu-id="ae2df-153">Play with time-outs and health policies to make yourself familiar with them.</span></span> <span data-ttu-id="ae2df-154">Quando si esegue la distribuzione in un cluster di Azure, invece che in un cluster locale, i parametri usati possono essere diversi.</span><span class="sxs-lookup"><span data-stu-id="ae2df-154">When deploying to an Azure cluster as opposed to a local cluster, the parameters used may have to differ.</span></span> <span data-ttu-id="ae2df-155">È consigliabile impostare i timeout su valori contenuti.</span><span class="sxs-lookup"><span data-stu-id="ae2df-155">We recommend that you set the time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ae2df-156">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ae2df-156">Next steps</span></span>
<span data-ttu-id="ae2df-157">[Aggiornamento di un'applicazione di Service Fabric mediante PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) descrive la procedura di aggiornamento di un'applicazione tramite PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ae2df-157">[Upgrading your application using PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="ae2df-158">Controllare l'aggiornamento dell'applicazione tramite i [parametri di aggiornamento](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="ae2df-158">Control how your application is upgraded by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="ae2df-159">Rendere compatibili gli aggiornamenti dell'applicazione imparando a usare la [serializzazione dei dati](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="ae2df-159">Make your application upgrades compatible by learning how to use [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="ae2df-160">Per informazioni su come usare funzionalità avanzate durante l'aggiornamento dell'applicazione, vedere [Argomenti avanzati](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="ae2df-160">Learn how to use advanced functionality while upgrading your application by referring to [Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="ae2df-161">Per informazioni su come risolvere problemi comuni negli aggiornamenti dell'applicazione, vedere i passaggi indicati in [Risoluzione dei problemi relativi agli aggiornamenti dell'applicazione](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="ae2df-161">Fix common problems in application upgrades by referring to the steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image1]: media/service-fabric-application-upgrade-tutorial/upgrade7.png
[image2]: media/service-fabric-application-upgrade-tutorial/upgrade1.png
[image3]: media/service-fabric-application-upgrade-tutorial/upgrade5.png
[image4]: media/service-fabric-application-upgrade-tutorial/upgrade6.png
