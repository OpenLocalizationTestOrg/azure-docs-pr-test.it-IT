---
title: aaaWorking con moduli Node.js
description: Informazioni su come toowork con moduli Node.js quando si utilizza servizio App di Azure o i servizi Cloud.
services: 
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: c0e6cd3d-932d-433e-b72d-e513e23b4eb6
ms.service: multiple
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2016
ms.author: tarcher
ms.openlocfilehash: 926358b7eb80a659dbc1015686b06a30d8c9b8f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="using-nodejs-modules-with-azure-applications"></a><span data-ttu-id="f3363-103">Utilizzo di moduli Node.js con le applicazioni Azure</span><span class="sxs-lookup"><span data-stu-id="f3363-103">Using Node.js Modules with Azure applications</span></span>
<span data-ttu-id="f3363-104">In questo documento vengono fornite le linee guida per l'utilizzo dei moduli Node.js con le applicazioni ospitate in Azure.</span><span class="sxs-lookup"><span data-stu-id="f3363-104">This document provides guidance on using Node.js modules with applications hosted on Azure.</span></span> <span data-ttu-id="f3363-105">Queste indicazioni consentono di garantire che l'applicazione utilizzi una versione specifica di moduli, nonché di utilizzare i moduli nativi con Azure.</span><span class="sxs-lookup"><span data-stu-id="f3363-105">It provides guidance on ensuring that your application uses a specific version of module as well as using native modules with Azure.</span></span>

<span data-ttu-id="f3363-106">Se si ha già familiarità con l'utilizzo di moduli Node.js, **package. JSON** e **npm shrinkwrap.json** file, hello le seguenti informazioni fornisce un riepilogo rapido delle quali è descritto in questo articolo:</span><span class="sxs-lookup"><span data-stu-id="f3363-106">If you are already familiar with using Node.js modules, **package.json** and **npm-shrinkwrap.json** files, hello following information provides a quick summary of what is discussed in this article:</span></span>

* <span data-ttu-id="f3363-107">Nel Servizio app di Azure vengono riconosciuti i file **package.json** e **npm-shrinkwrap.json** ed è possibile installare moduli in base alle voci incluse in tali file.</span><span class="sxs-lookup"><span data-stu-id="f3363-107">Azure App Service understands **package.json** and **npm-shrinkwrap.json** files and can install modules based on entries in these files.</span></span>

* <span data-ttu-id="f3363-108">Servizi Cloud di Azure prevede che tutti i moduli toobe installato in ambiente di sviluppo hello e hello **nodo\_moduli** toobe directory incluso come parte del pacchetto di distribuzione hello.</span><span class="sxs-lookup"><span data-stu-id="f3363-108">Azure Cloud Services expect all modules toobe installed on hello development environment, and hello **node\_modules** directory toobe included as part of hello deployment package.</span></span> <span data-ttu-id="f3363-109">È possibile tooenable supporto per l'installazione di moduli utilizzando **package. JSON** o **npm shrinkwrap.json** file nei servizi Cloud; tuttavia, questa configurazione richiede la personalizzazione del valore predefinito di hello script utilizzati dai progetti servizio Cloud.</span><span class="sxs-lookup"><span data-stu-id="f3363-109">It is possible tooenable support for installing modules using **package.json** or **npm-shrinkwrap.json** files on Cloud Services; however, this configuration requires customization of hello default scripts used by Cloud Service projects.</span></span> <span data-ttu-id="f3363-110">Per un esempio di come tooconfigure questo ambiente, vedere [npm toorun attività di avvio di Azure installare tooavoid i moduli del nodo di distribuzione](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span><span class="sxs-lookup"><span data-stu-id="f3363-110">For an example of how tooconfigure this environment, see [Azure Startup task toorun npm install tooavoid deploying node modules](https://github.com/woloski/nodeonazure-blog/blob/master/articles/startup-task-to-run-npm-in-azure.markdown)</span></span>

> [!NOTE]
> <span data-ttu-id="f3363-111">Macchine virtuali di Azure non vengono trattati in questo articolo, in quanto dipende dal sistema operativo hello ospitato da hello macchina virtuale hello esperienza di distribuzione in una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="f3363-111">Azure Virtual Machines are not discussed in this article, as hello deployment experience in a VM is dependent on hello operating system hosted by hello Virtual Machine.</span></span>
> 
> 

## <a name="nodejs-modules"></a><span data-ttu-id="f3363-112">Moduli Node.js</span><span class="sxs-lookup"><span data-stu-id="f3363-112">Node.js Modules</span></span>
<span data-ttu-id="f3363-113">I moduli sono pacchetti JavaScript caricabili che forniscono funzionalità specifiche per l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f3363-113">Modules are loadable JavaScript packages that provide specific functionality for your application.</span></span> <span data-ttu-id="f3363-114">I moduli vengono in genere installati utilizzando hello **npm** della riga di comando dello strumento, tuttavia alcuni moduli (ad esempio, un modulo http hello) vengono forniti come parte del pacchetto di hello core Node.js.</span><span class="sxs-lookup"><span data-stu-id="f3363-114">Modules are usually installed using hello **npm** command-line tool, however some modules (such as hello http module) are provided as part of hello core Node.js package.</span></span>

<span data-ttu-id="f3363-115">Quando vengono installati i moduli, sono archiviati in hello **nodo\_moduli** directory radice di hello della struttura di directory dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f3363-115">When modules are installed, they are stored in hello **node\_modules** directory at hello root of your application directory structure.</span></span> <span data-ttu-id="f3363-116">Ogni modulo all'interno di hello **nodo\_moduli** directory mantiene il proprio **nodo\_moduli** directory che contiene tutti i moduli che dipende, e questo comportamento viene ripetuto per ogni modulo tutti senso hello catena delle dipendenze hello.</span><span class="sxs-lookup"><span data-stu-id="f3363-116">Each module within hello **node\_modules** directory maintains its own **node\_modules** directory that contains any modules that it depends on, and this behavior repeats for every module all hello way down hello dependency chain.</span></span> <span data-ttu-id="f3363-117">Questo ambiente consente toohave ogni modulo installato propri requisiti di versione per i moduli di hello che dipende, ma può causare una struttura di directory di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="f3363-117">This environment allows each module installed toohave its own version requirements for hello modules it depends on, however it can result in quite a large directory structure.</span></span>

<span data-ttu-id="f3363-118">Distribuzione hello **nodo\_moduli** directory come parte dell'applicazione comporta l'aumento di dimensioni hello della distribuzione di hello quando vengono confrontati toousing un **package. JSON** o  **npm shrinkwrap.json** file; tuttavia, garantisce che le versioni di hello dei moduli di hello utilizzati nell'ambiente di produzione sono hello stesso come moduli hello utilizzati in fase di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="f3363-118">Deploying hello **node\_modules** directory as part of your application increases hello size of hello deployment when compared toousing a **package.json** or **npm-shrinkwrap.json** file; however, it does guarantee that hello versions of hello modules used in production are hello same as hello modules used in development.</span></span>

### <a name="native-modules"></a><span data-ttu-id="f3363-119">Moduli nativi</span><span class="sxs-lookup"><span data-stu-id="f3363-119">Native Modules</span></span>
<span data-ttu-id="f3363-120">Sebbene la maggior parte dei moduli sia semplicemente costituita da file JavaScript in testo normale, alcuni di essi sono immagini binarie specifiche della piattaforma.</span><span class="sxs-lookup"><span data-stu-id="f3363-120">While most modules are simply plain-text JavaScript files, some modules are platform-specific binary images.</span></span> <span data-ttu-id="f3363-121">Questi moduli vengono compilati in fase di installazione, in genere tramite Python e node-gyp.</span><span class="sxs-lookup"><span data-stu-id="f3363-121">These modules are compiled at install time, usually by using Python and node-gyp.</span></span> <span data-ttu-id="f3363-122">Poiché i servizi Cloud di Azure si basano su hello **nodo\_moduli** cartella distribuito come parte di un'applicazione hello, qualsiasi modulo nativo, incluso come parte dei moduli installato hello dovrebbe funzionare in un servizio cloud, come era installato e compilato su un sistema di sviluppo di Windows.</span><span class="sxs-lookup"><span data-stu-id="f3363-122">Since Azure Cloud Services rely on hello **node\_modules** folder being deployed as part of hello application, any native module included as part of hello installed modules should work in a cloud service as long as it was installed and compiled on a Windows development system.</span></span>

<span data-ttu-id="f3363-123">Servizio app di Azure non supporta tutti i moduli nativi e potrebbe non riuscire a compilare i moduli con prerequisiti specifici.</span><span class="sxs-lookup"><span data-stu-id="f3363-123">Azure App Service does not support all native modules, and might fail when compiling modules with specific prerequisites.</span></span> <span data-ttu-id="f3363-124">Mentre alcuni moduli più diffusi, come MongoDB, hanno dipendenze native facoltative e funzionano anche senza di esse, due soluzioni alternative hanno fornito risultati positivi con quasi tutti i moduli nativi disponibili attualmente:</span><span class="sxs-lookup"><span data-stu-id="f3363-124">While some popular modules like MongoDB have optional native dependencies and work fine without them, two workarounds proved successful with almost all native modules available today:</span></span>

* <span data-ttu-id="f3363-125">Eseguire **npm installare** in un computer Windows che siano installati i prerequisiti del modulo tutti hello nativo.</span><span class="sxs-lookup"><span data-stu-id="f3363-125">Run **npm install** on a Windows machine that has all hello native module's prerequisites installed.</span></span> <span data-ttu-id="f3363-126">Distribuire quindi hello creato **nodo\_moduli** cartella come parte di hello applicazione tooAzure servizio App.</span><span class="sxs-lookup"><span data-stu-id="f3363-126">Then, deploy hello created **node\_modules** folder as part of hello application tooAzure App Service.</span></span>

  * <span data-ttu-id="f3363-127">Prima di compilare, verificare che l'installazione di Node.js locale è l'architettura corrispondente e versione di hello è il più vicino possibile toohello quello utilizzato in Azure (è possono verificare i valori correnti di hello sul runtime dalle proprietà **process.arch**e **process.version**).</span><span class="sxs-lookup"><span data-stu-id="f3363-127">Before compiling, check that your local Node.js installation has matching architecture and hello version is as close as possible toohello one used in Azure (hello current values can be checked on runtime from properties **process.arch** and **process.version**).</span></span>

* <span data-ttu-id="f3363-128">Servizio App di Azure può essere configurato tooexecute personalizzato bash o gli script della shell durante la distribuzione, offrendo hello comandi personalizzati tooexecute di opportunità e con precisione configurare hello modo **npm installare** è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="f3363-128">Azure App Service can be configured tooexecute custom bash or shell scripts during deployment, giving you hello opportunity tooexecute custom commands and precisely configure hello way **npm install** is being run.</span></span> <span data-ttu-id="f3363-129">Per un video mostra come tooconfigure tale ambiente, vedere [gli script di distribuzione del sito Web personalizzato con Kudu].</span><span class="sxs-lookup"><span data-stu-id="f3363-129">For a video showing how tooconfigure that environment, see [Custom Website Deployment Scripts with Kudu].</span></span>

### <a name="using-a-packagejson-file"></a><span data-ttu-id="f3363-130">Utilizzare un file package.json</span><span class="sxs-lookup"><span data-stu-id="f3363-130">Using a package.json file</span></span>
<span data-ttu-id="f3363-131">Hello **package. JSON** file è un modo toospecify hello principale delle dipendenze richieste dall'applicazione in modo che hello piattaforma di hosting possa installare le dipendenze di hello, anziché richiedere hello tooinclude **nodo \_pacchetti** cartella come parte della distribuzione hello.</span><span class="sxs-lookup"><span data-stu-id="f3363-131">hello **package.json** file is a way toospecify hello top-level dependencies your application requires so that hello hosting platform can install hello dependencies, rather than requiring you tooinclude hello **node\_packages** folder as part of hello deployment.</span></span> <span data-ttu-id="f3363-132">Dopo la distribuzione di un'applicazione hello, hello **installare npm** comando viene utilizzato tooparse hello **package. JSON** file e installare tutte le dipendenze di hello elencate.</span><span class="sxs-lookup"><span data-stu-id="f3363-132">After hello application has been deployed, hello **npm install** command is used tooparse hello **package.json** file and install all hello dependencies listed.</span></span>

<span data-ttu-id="f3363-133">Durante lo sviluppo, è possibile utilizzare hello **-Salva**, **-save-dev**, o **-save-facoltativo** parametri durante l'installazione di moduli tooadd una voce per il modulo di hello tooyour **package. JSON** automaticamente file.</span><span class="sxs-lookup"><span data-stu-id="f3363-133">During development, you can use hello **--save**, **--save-dev**, or **--save-optional** parameters when installing modules tooadd an entry for hello module tooyour **package.json** file automatically.</span></span> <span data-ttu-id="f3363-134">Per ulteriori informazioni, vedere [npm-install](https://docs.npmjs.com/cli/install).</span><span class="sxs-lookup"><span data-stu-id="f3363-134">For more information, see [npm-install](https://docs.npmjs.com/cli/install).</span></span>

<span data-ttu-id="f3363-135">Uno dei potenziali problemi hello **package. JSON** file è specifica solo la versione di hello per le dipendenze di primo livello.</span><span class="sxs-lookup"><span data-stu-id="f3363-135">One potential problem with hello **package.json** file is that it only specifies hello version for top-level dependencies.</span></span> <span data-ttu-id="f3363-136">Ogni modulo installato o non può specificare la versione di hello dei moduli di hello che dipende, e pertanto, è possibile che possono finire con una catena di dipendenze diverso rispetto a hello quello utilizzato in fase di sviluppo.</span><span class="sxs-lookup"><span data-stu-id="f3363-136">Each module installed may or may not specify hello version of hello modules it depends on, and so it is possible that you may end up with a different dependency chain than hello one used in development.</span></span>

> [!NOTE]
> <span data-ttu-id="f3363-137">Quando si distribuiscono tooAzure servizio App, se il <b>package. JSON</b> file fa riferimento a un modulo nativo, è possibile visualizzare un toohello simile di errore quando si pubblica un'applicazione hello usando Git di esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="f3363-137">When deploying tooAzure App Service, if your <b>package.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="f3363-138">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="f3363-138">npm ERR!</span></span> <span data-ttu-id="f3363-139">module-name@0.6.0 install: 'node-gyp configure build'</span><span class="sxs-lookup"><span data-stu-id="f3363-139">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="f3363-140">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="f3363-140">npm ERR!</span></span> <span data-ttu-id="f3363-141">'cmd "/c" "node-gyp configure build"' failed with 1</span><span class="sxs-lookup"><span data-stu-id="f3363-141">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

### <a name="using-a-npm-shrinkwrapjson-file"></a><span data-ttu-id="f3363-142">Utilizzare un file npm-shrinkwrap.json</span><span class="sxs-lookup"><span data-stu-id="f3363-142">Using a npm-shrinkwrap.json file</span></span>
<span data-ttu-id="f3363-143">Hello **npm shrinkwrap.json** file è un tentativo tooaddress hello modulo delle limitazioni di hello **package. JSON** file.</span><span class="sxs-lookup"><span data-stu-id="f3363-143">hello **npm-shrinkwrap.json** file is an attempt tooaddress hello module versioning limitations of hello **package.json** file.</span></span> <span data-ttu-id="f3363-144">Durante la hello **package. JSON** file include solo le versioni per i moduli di primo livello hello, hello **npm shrinkwrap.json** file contiene i requisiti di versione di hello per catena delle dipendenze hello modulo completo.</span><span class="sxs-lookup"><span data-stu-id="f3363-144">While hello **package.json** file only includes versions for hello top-level modules, hello **npm-shrinkwrap.json** file contains hello version requirements for hello full module dependency chain.</span></span>

<span data-ttu-id="f3363-145">Quando l'applicazione è pronta per la produzione, è possibile bloccare i requisiti di versione e creare un **npm shrinkwrap.json** file utilizzando hello **confezione npm** comando.</span><span class="sxs-lookup"><span data-stu-id="f3363-145">When your application is ready for production, you can lock down version requirements and create an **npm-shrinkwrap.json** file by using hello **npm shrinkwrap** command.</span></span> <span data-ttu-id="f3363-146">Questo comando utilizzerà le versioni di hello attualmente installate in hello **nodo\_moduli** cartella e registrare queste versioni toohello **npm shrinkwrap.json** file.</span><span class="sxs-lookup"><span data-stu-id="f3363-146">This command will use hello versions currently installed in hello **node\_modules** folder, and record these versions toohello **npm-shrinkwrap.json** file.</span></span> <span data-ttu-id="f3363-147">Dopo l'applicazione hello è stato distribuito toohello ambiente di hosting, hello **installare npm** comando viene utilizzato tooparse hello **npm shrinkwrap.json** file e installare tutte le dipendenze di hello elencate.</span><span class="sxs-lookup"><span data-stu-id="f3363-147">After hello application has been deployed toohello hosting environment, hello **npm install** command is used tooparse hello **npm-shrinkwrap.json** file and install all hello dependencies listed.</span></span> <span data-ttu-id="f3363-148">Per ulteriori informazioni, vedere [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span><span class="sxs-lookup"><span data-stu-id="f3363-148">For more information, see [npm-shrinkwrap](https://docs.npmjs.com/cli/shrinkwrap).</span></span>

> [!NOTE]
> <span data-ttu-id="f3363-149">Quando si distribuiscono tooAzure servizio App, se il <b>npm shrinkwrap.json</b> file fa riferimento a un modulo nativo, è possibile visualizzare un toohello simile di errore quando si pubblica un'applicazione hello usando Git di esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="f3363-149">When deploying tooAzure App Service, if your <b>npm-shrinkwrap.json</b> file references a native module you might see an error similar toohello following example when publishing hello application using Git:</span></span>
> 
> <span data-ttu-id="f3363-150">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="f3363-150">npm ERR!</span></span> <span data-ttu-id="f3363-151">module-name@0.6.0 install: 'node-gyp configure build'</span><span class="sxs-lookup"><span data-stu-id="f3363-151">module-name@0.6.0 install: 'node-gyp configure build'</span></span>
> 
> <span data-ttu-id="f3363-152">npm ERR!</span><span class="sxs-lookup"><span data-stu-id="f3363-152">npm ERR!</span></span> <span data-ttu-id="f3363-153">'cmd "/c" "node-gyp configure build"' failed with 1</span><span class="sxs-lookup"><span data-stu-id="f3363-153">'cmd "/c" "node-gyp configure build"' failed with 1</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="f3363-154">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="f3363-154">Next steps</span></span>
<span data-ttu-id="f3363-155">Ora che è comprendere come moduli Node.js toouse con Azure, ottengono le informazioni come troppo[specificare la versione di Node. js hello], [compilare e distribuire un'app web Node. js](app-service-web/app-service-web-get-started-nodejs.md), e [come toouse hello Azure della riga di comando Interfaccia per Mac e Linux].</span><span class="sxs-lookup"><span data-stu-id="f3363-155">Now that you understand how toouse Node.js modules with Azure, learn how too[specify hello Node.js version], [build and deploy a Node.js web app](app-service-web/app-service-web-get-started-nodejs.md), and [How toouse hello Azure Command-Line Interface for Mac and Linux].</span></span>

<span data-ttu-id="f3363-156">Per ulteriori informazioni, vedere hello [Centro per sviluppatori di Node.js](/nodejs/azure/).</span><span class="sxs-lookup"><span data-stu-id="f3363-156">For more information, see hello [Node.js Developer Center](/nodejs/azure/).</span></span>

[specificare la versione di Node. js hello]: nodejs-specify-node-version-azure-apps.md
[come toouse hello Azure della riga di comando Interfaccia per Mac e Linux]:cli-install-nodejs.md
[gli script di distribuzione del sito Web personalizzato con Kudu]: https://channel9.msdn.com/Shows/Azure-Friday/Custom-Web-Site-Deployment-Scripts-with-Kudu-with-David-Ebbo
