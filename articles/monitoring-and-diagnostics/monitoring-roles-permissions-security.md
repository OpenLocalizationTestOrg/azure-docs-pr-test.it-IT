---
title: aaaGet avviato con i ruoli, autorizzazioni e sicurezza con Monitor di Azure | Documenti Microsoft
description: Informazioni su come ruoli predefiniti e autorizzazioni toorestrict toouse Azure monitoraggio accedere alle risorse di toomonitoring.
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 2686e53b-72f0-4312-bcd3-3dc1b4a9b912
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/26/2016
ms.author: johnkem
ms.openlocfilehash: 44fdf2a697050309480dfc164ebab51445b19bc8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="get-started-with-roles-permissions-and-security-with-azure-monitor"></a><span data-ttu-id="dc337-103">Introduzione a ruoli, autorizzazioni e sicurezza con il monitoraggio di Azure</span><span class="sxs-lookup"><span data-stu-id="dc337-103">Get started with roles, permissions, and security with Azure Monitor</span></span>
<span data-ttu-id="dc337-104">Molti team necessario toostrictly regolare toomonitoring accedere ai dati e impostazioni.</span><span class="sxs-lookup"><span data-stu-id="dc337-104">Many teams need toostrictly regulate access toomonitoring data and settings.</span></span> <span data-ttu-id="dc337-105">Ad esempio, se si dispongono di membri del team che lavorano esclusivamente sul monitoraggio (tecnici del supporto, i tecnici devops) o se si utilizza un provider del servizio gestito, è opportuno toogrant tooonly dati di monitoraggio limitando la possibilità toocreate loro l'accesso, modificare, o eliminare le risorse.</span><span class="sxs-lookup"><span data-stu-id="dc337-105">For example, if you have team members who work exclusively on monitoring (support engineers, devops engineers) or if you use a managed service provider, you may want toogrant them access tooonly monitoring data while restricting their ability toocreate, modify, or delete resources.</span></span> <span data-ttu-id="dc337-106">Questo articolo illustra come tooquickly applicare un monitoraggio RBAC ruolo tooa utente incorporato in Azure o creare il proprio ruolo personalizzato per un utente che necessita di autorizzazioni limitate di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="dc337-106">This article shows how tooquickly apply a built-in monitoring RBAC role tooa user in Azure or build your own custom role for a user who needs limited monitoring permissions.</span></span> <span data-ttu-id="dc337-107">Quindi illustra le considerazioni sulla sicurezza per le risorse correlate al monitoraggio di Azure e come è possibile limitare l'accesso ai dati toohello contengono.</span><span class="sxs-lookup"><span data-stu-id="dc337-107">It then discusses security considerations for your Azure Monitor-related resources and how you can limit access toohello data they contain.</span></span>

## <a name="built-in-monitoring-roles"></a><span data-ttu-id="dc337-108">Ruoli di monitoraggio predefiniti</span><span class="sxs-lookup"><span data-stu-id="dc337-108">Built-in monitoring roles</span></span>
<span data-ttu-id="dc337-109">Ruoli predefiniti del monitoraggio di Azure sono progettate toohelp limite accesso tooresources in una sottoscrizione durante l'abilitazione di quelli ancora responsabili del monitoraggio dell'infrastruttura tooobtain e configurare dati hello che necessari.</span><span class="sxs-lookup"><span data-stu-id="dc337-109">Azure Monitor’s built-in roles are designed toohelp limit access tooresources in a subscription while still enabling those responsible for monitoring infrastructure tooobtain and configure hello data they need.</span></span> <span data-ttu-id="dc337-110">Il monitoraggio di Azure fornisce due ruoli predefiniti: un lettore di monitoraggio e un collaboratore al monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="dc337-110">Azure Monitor provides two out-of-the-box roles: A Monitoring Reader and a Monitoring Contributor.</span></span>

### <a name="monitoring-reader"></a><span data-ttu-id="dc337-111">Lettore di monitoraggio</span><span class="sxs-lookup"><span data-stu-id="dc337-111">Monitoring Reader</span></span>
<span data-ttu-id="dc337-112">Persone assegnate il ruolo di lettore monitoraggio hello possono visualizzare tutti i dati di monitoraggio in una sottoscrizione, ma non è possibile modificare qualsiasi risorsa o modificare tutte le risorse correlate toomonitoring impostazioni.</span><span class="sxs-lookup"><span data-stu-id="dc337-112">People assigned hello Monitoring Reader role can view all monitoring data in a subscription but cannot modify any resource or edit any settings related toomonitoring resources.</span></span> <span data-ttu-id="dc337-113">Questo ruolo è appropriato per gli utenti in un'organizzazione, ad esempio i tecnici del supporto o operazioni, che necessitano di toobe in grado di:</span><span class="sxs-lookup"><span data-stu-id="dc337-113">This role is appropriate for users in an organization, such as support or operations engineers, who need toobe able to:</span></span>

* <span data-ttu-id="dc337-114">Visualizzare i dashboard di monitoraggio nel portale di hello e creare i propri dashboard di monitoraggio privato.</span><span class="sxs-lookup"><span data-stu-id="dc337-114">View monitoring dashboards in hello portal and create their own private monitoring dashboards.</span></span>
* <span data-ttu-id="dc337-115">Query per le metriche utilizzando hello [API REST di Azure monitoraggio](https://msdn.microsoft.com/library/azure/dn931930.aspx), [i cmdlet di PowerShell](insights-powershell-samples.md), o [CLI multipiattaforma](insights-cli-samples.md).</span><span class="sxs-lookup"><span data-stu-id="dc337-115">Query for metrics using hello [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931930.aspx), [PowerShell cmdlets](insights-powershell-samples.md), or [cross-platform CLI](insights-cli-samples.md).</span></span>
* <span data-ttu-id="dc337-116">Query hello Log attività utilizzando portale hello, API REST di monitoraggio di Azure, i cmdlet di PowerShell o CLI multipiattaforma.</span><span class="sxs-lookup"><span data-stu-id="dc337-116">Query hello Activity Log using hello portal, Azure Monitor REST API, PowerShell cmdlets, or cross-platform CLI.</span></span>
* <span data-ttu-id="dc337-117">Hello vista [le impostazioni di diagnostica](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) per una risorsa.</span><span class="sxs-lookup"><span data-stu-id="dc337-117">View hello [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.</span></span>
* <span data-ttu-id="dc337-118">Hello vista [log profilo](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) per una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="dc337-118">View hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.</span></span>
* <span data-ttu-id="dc337-119">Visualizzare le impostazioni di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="dc337-119">View autoscale settings.</span></span>
* <span data-ttu-id="dc337-120">Visualizzare impostazioni e attività di avviso.</span><span class="sxs-lookup"><span data-stu-id="dc337-120">View alert activity and settings.</span></span>
* <span data-ttu-id="dc337-121">Accedere ai dati di Application Insights e visualizzarli in AI Analytics.</span><span class="sxs-lookup"><span data-stu-id="dc337-121">Access Application Insights data and view data in AI Analytics.</span></span>
* <span data-ttu-id="dc337-122">Cercare nei dati dell'area di lavoro Analitica Log (OMS) tra i dati di utilizzo per l'area di lavoro hello.</span><span class="sxs-lookup"><span data-stu-id="dc337-122">Search Log Analytics (OMS) workspace data including usage data for hello workspace.</span></span>
* <span data-ttu-id="dc337-123">Visualizzare i gruppi di gestione di Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="dc337-123">View Log Analytics (OMS) management groups.</span></span>
* <span data-ttu-id="dc337-124">Recuperare lo schema di ricerca di hello Analitica Log (OMS).</span><span class="sxs-lookup"><span data-stu-id="dc337-124">Retrieve hello Log Analytics (OMS) search schema.</span></span>
* <span data-ttu-id="dc337-125">Elencare gli Intelligence Pack di Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="dc337-125">List Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="dc337-126">Recuperare ed eseguire le ricerche salvate di Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="dc337-126">Retrieve and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="dc337-127">Recuperare la configurazione di archiviazione di hello Analitica Log (OMS).</span><span class="sxs-lookup"><span data-stu-id="dc337-127">Retrieve hello Log Analytics (OMS) storage configuration.</span></span>

> [!NOTE]
> <span data-ttu-id="dc337-128">Questo ruolo non fornisce l'accesso in lettura i dati di toolog hub eventi tooan con flusso o memorizzati in un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="dc337-128">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="dc337-129">[Vedere di seguito](#security-considerations-for-monitoring-data) per informazioni sulla configurazione toothese di accedere alle risorse.</span><span class="sxs-lookup"><span data-stu-id="dc337-129">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

### <a name="monitoring-contributor"></a><span data-ttu-id="dc337-130">Collaboratore al monitoraggio</span><span class="sxs-lookup"><span data-stu-id="dc337-130">Monitoring Contributor</span></span>
<span data-ttu-id="dc337-131">Gli utenti assegnati hello collaboratore monitoraggio ruolo può visualizzare tutti i dati di monitoraggio in una sottoscrizione e creare o modificare le impostazioni di monitoraggio, ma non è possibile modificare tutte le altre risorse.</span><span class="sxs-lookup"><span data-stu-id="dc337-131">People assigned hello Monitoring Contributor role can view all monitoring data in a subscription and create or modify monitoring settings, but cannot modify any other resources.</span></span> <span data-ttu-id="dc337-132">Questo ruolo è un superset del ruolo di lettore monitoraggio hello ed è appropriato per i membri del team di monitoraggio o provider di servizi gestiti che, inoltre autorizzazioni toohello precedente, nonché toobe in grado di un'organizzazione:</span><span class="sxs-lookup"><span data-stu-id="dc337-132">This role is a superset of hello Monitoring Reader role, and is appropriate for members of an organization’s monitoring team or managed service providers who, in addition toohello permissions above, also need toobe able to:</span></span>

* <span data-ttu-id="dc337-133">Pubblicare dashboard di monitoraggio come dashboard condivisi.</span><span class="sxs-lookup"><span data-stu-id="dc337-133">Publish monitoring dashboards as a shared dashboard.</span></span>
* <span data-ttu-id="dc337-134">Configurare le [impostazioni di diagnostica](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) per una risorsa.*</span><span class="sxs-lookup"><span data-stu-id="dc337-134">Set [diagnostic settings](monitoring-overview-of-diagnostic-logs.md#resource-diagnostic-settings) for a resource.*</span></span>
* <span data-ttu-id="dc337-135">Set hello [log profilo](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) per un subscription.*</span><span class="sxs-lookup"><span data-stu-id="dc337-135">Set hello [log profile](monitoring-overview-activity-logs.md#export-the-activity-log-with-a-log-profile) for a subscription.*</span></span>
* <span data-ttu-id="dc337-136">Configurare impostazioni e attività di avviso.</span><span class="sxs-lookup"><span data-stu-id="dc337-136">Set alert activity and settings.</span></span>
* <span data-ttu-id="dc337-137">Creare componenti e test Web di Application Insights.</span><span class="sxs-lookup"><span data-stu-id="dc337-137">Create Application Insights web tests and components.</span></span>
* <span data-ttu-id="dc337-138">Elencare le chiavi condivise dell'area di lavoro di Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="dc337-138">List Log Analytics (OMS) workspace shared keys.</span></span>
* <span data-ttu-id="dc337-139">Abilitare o disabilitare gli Intelligence Pack di Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="dc337-139">Enable or disable Log Analytics (OMS) intelligence packs.</span></span>
* <span data-ttu-id="dc337-140">Creare ed eliminare poi eseguire le ricerche salvate di Log Analytics (OMS).</span><span class="sxs-lookup"><span data-stu-id="dc337-140">Create and delete and execute Log Analytics (OMS) saved searches.</span></span>
* <span data-ttu-id="dc337-141">Creare ed eliminare le configurazioni di archiviazione di hello Analitica Log (OMS).</span><span class="sxs-lookup"><span data-stu-id="dc337-141">Create and delete hello Log Analytics (OMS) storage configuration.</span></span>

<span data-ttu-id="dc337-142">* utente separatamente anche concedere elenco chiavi dell'autorizzazione per tooset risorse (archiviazione account o l'evento hub dello spazio dei nomi) di destinazione hello un profilo di log o impostazione diagnostica.</span><span class="sxs-lookup"><span data-stu-id="dc337-142">*user must also separately be granted ListKeys permission on hello target resource (storage account or event hub namespace) tooset a log profile or diagnostic setting.</span></span>

> [!NOTE]
> <span data-ttu-id="dc337-143">Questo ruolo non fornisce l'accesso in lettura i dati di toolog hub eventi tooan con flusso o memorizzati in un account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="dc337-143">This role does not give read access toolog data that has been streamed tooan event hub or stored in a storage account.</span></span> <span data-ttu-id="dc337-144">[Vedere di seguito](#security-considerations-for-monitoring-data) per informazioni sulla configurazione toothese di accedere alle risorse.</span><span class="sxs-lookup"><span data-stu-id="dc337-144">[See below](#security-considerations-for-monitoring-data) for information on configuring access toothese resources.</span></span>
> 
> 

## <a name="monitoring-permissions-and-custom-rbac-roles"></a><span data-ttu-id="dc337-145">Autorizzazioni per il monitoraggio e ruoli personalizzati nel Controllo degli accessi in base al ruolo</span><span class="sxs-lookup"><span data-stu-id="dc337-145">Monitoring permissions and custom RBAC roles</span></span>
<span data-ttu-id="dc337-146">Se hello sopra ruoli predefiniti non soddisfa esigenze specifiche hello del team, è possibile [creare un ruolo RBAC personalizzato](../active-directory/role-based-access-control-custom-roles.md) con autorizzazioni più granulari.</span><span class="sxs-lookup"><span data-stu-id="dc337-146">If hello above built-in roles don’t meet hello exact needs of your team, you can [create a custom RBAC role](../active-directory/role-based-access-control-custom-roles.md) with more granular permissions.</span></span> <span data-ttu-id="dc337-147">Di seguito è hello operazioni comuni di Azure monitoraggio RBAC con le relative descrizioni.</span><span class="sxs-lookup"><span data-stu-id="dc337-147">Below are hello common Azure Monitor RBAC operations with their descriptions.</span></span>

| <span data-ttu-id="dc337-148">Operazione</span><span class="sxs-lookup"><span data-stu-id="dc337-148">Operation</span></span> | <span data-ttu-id="dc337-149">Descrizione</span><span class="sxs-lookup"><span data-stu-id="dc337-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="dc337-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span><span class="sxs-lookup"><span data-stu-id="dc337-150">Microsoft.Insights/AlertRules/[Read, Write, Delete]</span></span> |<span data-ttu-id="dc337-151">Regole di avviso di lettura, scrittura ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="dc337-151">Read/write/delete alert rules.</span></span> |
| <span data-ttu-id="dc337-152">Microsoft.Insights/AlertRules/Incidents/Read</span><span class="sxs-lookup"><span data-stu-id="dc337-152">Microsoft.Insights/AlertRules/Incidents/Read</span></span> |<span data-ttu-id="dc337-153">Elenco eventi imprevisti (cronologia della regola di avviso hello venga attivata) per le regole di avviso.</span><span class="sxs-lookup"><span data-stu-id="dc337-153">List incidents (history of hello alert rule being triggered) for alert rules.</span></span> <span data-ttu-id="dc337-154">Si applica solo toohello portale.</span><span class="sxs-lookup"><span data-stu-id="dc337-154">This only applies toohello portal.</span></span> |
| <span data-ttu-id="dc337-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span><span class="sxs-lookup"><span data-stu-id="dc337-155">Microsoft.Insights/AutoscaleSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="dc337-156">Impostazioni di scalabilità automatica di lettura, scrittura ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="dc337-156">Read/write/delete autoscale settings.</span></span> |
| <span data-ttu-id="dc337-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span><span class="sxs-lookup"><span data-stu-id="dc337-157">Microsoft.Insights/DiagnosticSettings/[Read, Write, Delete]</span></span> |<span data-ttu-id="dc337-158">Impostazioni di diagnostica di lettura, scrittura ed eliminazione.</span><span class="sxs-lookup"><span data-stu-id="dc337-158">Read/write/delete diagnostic settings.</span></span> |
| <span data-ttu-id="dc337-159">Microsoft.Insights/eventtypes/digestevents/Read</span><span class="sxs-lookup"><span data-stu-id="dc337-159">Microsoft.Insights/eventtypes/digestevents/Read</span></span> |<span data-ttu-id="dc337-160">Questa autorizzazione è necessaria per gli utenti che devono accedere tooActivity log tramite il portale di hello.</span><span class="sxs-lookup"><span data-stu-id="dc337-160">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="dc337-161">Microsoft.Insights/eventtypes/values/Read</span><span class="sxs-lookup"><span data-stu-id="dc337-161">Microsoft.Insights/eventtypes/values/Read</span></span> |<span data-ttu-id="dc337-162">Elenco degli eventi dei registri attività (eventi di gestione) in una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="dc337-162">List Activity Log events (management events) in a subscription.</span></span> <span data-ttu-id="dc337-163">Questa autorizzazione è applicabile tooboth accesso a livello di codice e portale toohello Log attività.</span><span class="sxs-lookup"><span data-stu-id="dc337-163">This permission is applicable tooboth programmatic and portal access toohello Activity Log.</span></span> |
| <span data-ttu-id="dc337-164">Microsoft.Insights/LogDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="dc337-164">Microsoft.Insights/LogDefinitions/Read</span></span> |<span data-ttu-id="dc337-165">Questa autorizzazione è necessaria per gli utenti che devono accedere tooActivity log tramite il portale di hello.</span><span class="sxs-lookup"><span data-stu-id="dc337-165">This permission is necessary for users who need access tooActivity Logs via hello portal.</span></span> |
| <span data-ttu-id="dc337-166">Microsoft.Insights/MetricDefinitions/Read</span><span class="sxs-lookup"><span data-stu-id="dc337-166">Microsoft.Insights/MetricDefinitions/Read</span></span> |<span data-ttu-id="dc337-167">Definizioni delle metriche (elenco dei tipi di metriche disponibili per una risorsa).</span><span class="sxs-lookup"><span data-stu-id="dc337-167">Read metric definitions (list of available metric types for a resource).</span></span> |
| <span data-ttu-id="dc337-168">Microsoft.Insights/Metrics/Read</span><span class="sxs-lookup"><span data-stu-id="dc337-168">Microsoft.Insights/Metrics/Read</span></span> |<span data-ttu-id="dc337-169">Metriche per una risorsa.</span><span class="sxs-lookup"><span data-stu-id="dc337-169">Read metrics for a resource.</span></span> |

> [!NOTE]
> <span data-ttu-id="dc337-170">Accedere a tooalerts, le impostazioni di diagnostica e le metriche per una risorsa, è necessario che l'utente hello è di tipo di risorsa toohello accesso in lettura e l'ambito di tale risorsa.</span><span class="sxs-lookup"><span data-stu-id="dc337-170">Access tooalerts, diagnostic settings, and metrics for a resource requires that hello user has Read access toohello resource type and scope of that resource.</span></span> <span data-ttu-id="dc337-171">Creazione ("scrittura"), un profilo di impostazione o di log diagnostico che gli archivi tooa storage account o flussi tooevent hub richiede hello utente tooalso dispone dell'autorizzazione di elenco chiavi sulla risorsa di destinazione hello.</span><span class="sxs-lookup"><span data-stu-id="dc337-171">Creating (“write”) a diagnostic setting or log profile that archives tooa storage account or streams tooevent hubs requires hello user tooalso have ListKeys permission on hello target resource.</span></span>
> 
> 

<span data-ttu-id="dc337-172">Ad esempio, utilizzando hello sopra tabella è possibile creare un ruolo RBAC personalizzato per un "attività di lettura Log" simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="dc337-172">For example, using hello above table you could create a custom RBAC role for an “Activity Log Reader” like this:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Activity Log Reader"
$role.Description = "Can view activity logs."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Insights/eventtypes/*")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription")
New-AzureRmRoleDefinition -Role $role 
```

## <a name="security-considerations-for-monitoring-data"></a><span data-ttu-id="dc337-173">Considerazioni sulla sicurezza per i dati sul monitoraggio</span><span class="sxs-lookup"><span data-stu-id="dc337-173">Security considerations for monitoring data</span></span>
<span data-ttu-id="dc337-174">I dati sul monitoraggio dei dati, in particolare i file di registro, possono contenere informazioni sensibili, come indirizzi IP o nomi utente.</span><span class="sxs-lookup"><span data-stu-id="dc337-174">Monitoring data—particularly log files—can contain sensitive information, such as IP addresses or user names.</span></span> <span data-ttu-id="dc337-175">I dati sul monitoraggio di Azure sono forniti in tre forme base:</span><span class="sxs-lookup"><span data-stu-id="dc337-175">Monitoring data from Azure comes in three basic forms:</span></span>

1. <span data-ttu-id="dc337-176">Hello registro attività, che descrive tutte le azioni del piano di controllo nella sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="dc337-176">hello Activity Log, which describes all control-plane actions on your Azure subscription.</span></span>
2. <span data-ttu-id="dc337-177">Registri di diagnostica, cioè registri generati da una risorsa.</span><span class="sxs-lookup"><span data-stu-id="dc337-177">Diagnostic Logs, which are logs emitted by a resource.</span></span>
3. <span data-ttu-id="dc337-178">Metriche, generate dalle risorse.</span><span class="sxs-lookup"><span data-stu-id="dc337-178">Metrics, which are emitted by resources.</span></span>

<span data-ttu-id="dc337-179">Tutte e tre questi tipi di dati possono essere archiviati in un account di archiviazione o trasmessi tooEvent Hub, entrambi i quali sono le risorse di Azure di uso generale.</span><span class="sxs-lookup"><span data-stu-id="dc337-179">All three of these data types can be stored in a storage account or streamed tooEvent Hub, both of which are general-purpose Azure resources.</span></span> <span data-ttu-id="dc337-180">Poiché si tratta di risorse di scopo generico, la creazione, l'eliminazione e l'accesso sono operazioni privilegiate e generalmente riservate agli amministratori.</span><span class="sxs-lookup"><span data-stu-id="dc337-180">Because these are general-purpose resources, creating, deleting, and accessing them is a privileged operation usually reserved for an administrator.</span></span> <span data-ttu-id="dc337-181">Si consiglia di utilizzare hello consigliate per l'utilizzo improprio tooprevent relativi al monitoraggio delle risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="dc337-181">We suggest that you use hello following practices for monitoring-related resources tooprevent misuse:</span></span>

* <span data-ttu-id="dc337-182">Usare un account di archiviazione singolo e dedicato per il monitoraggio dei dati.</span><span class="sxs-lookup"><span data-stu-id="dc337-182">Use a single, dedicated storage account for monitoring data.</span></span> <span data-ttu-id="dc337-183">Se è necessario tooseparate dati di monitoraggio in più account di archiviazione, non condividono mai l'utilizzo di un account di archiviazione tra il monitoraggio e dati sul monitoraggio, come si possono concedere inavvertitamente coloro che devono accedere solo ai dati toomonitoring (ad es.</span><span class="sxs-lookup"><span data-stu-id="dc337-183">If you need tooseparate monitoring data into multiple storage accounts, never share usage of a storage account between monitoring and non-monitoring data, as this may inadvertently give those who only need access toomonitoring data (eg.</span></span> <span data-ttu-id="dc337-184">un SIEM di terze parti) accedere ai dati di monitoraggio toonon.</span><span class="sxs-lookup"><span data-stu-id="dc337-184">a third-party SIEM) access toonon-monitoring data.</span></span>
* <span data-ttu-id="dc337-185">Utilizzare nomi di hub eventi o Bus di servizio dedicato in tutte le impostazioni di diagnostica per hello stesso motivo sopra.</span><span class="sxs-lookup"><span data-stu-id="dc337-185">Use a single, dedicated Service Bus or Event Hub namespace across all diagnostic settings for hello same reason as above.</span></span>
* <span data-ttu-id="dc337-186">Limitare gli account di accesso correlati toomonitoring archiviazione o hub eventi salvandole in un gruppo di risorse distinto, e [utilizzare ambito](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) nei ruoli monitoraggio toolimit accedere tooonly tale gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="dc337-186">Limit access toomonitoring-related storage accounts or event hubs by keeping them in a separate resource group, and [use scope](../active-directory/role-based-access-control-what-is.md#basics-of-access-management-in-azure) on your monitoring roles toolimit access tooonly that resource group.</span></span>
* <span data-ttu-id="dc337-187">Non concedere l'autorizzazione di elenco chiavi dell'hello per gli account di archiviazione o hub eventi nell'ambito di sottoscrizione quando un utente deve solo toomonitoring accedere ai dati.</span><span class="sxs-lookup"><span data-stu-id="dc337-187">Never grant hello ListKeys permission for either storage accounts or event hubs at subscription scope when a user only needs access toomonitoring data.</span></span> <span data-ttu-id="dc337-188">Ma è possibile ottenere questi toohello autorizzazioni degli utenti a una risorsa o un gruppo di risorse (se si dispone di un gruppo di risorse di monitoraggio dedicato) ambito.</span><span class="sxs-lookup"><span data-stu-id="dc337-188">Instead, give these permissions toohello user at a resource or resource group (if you have a dedicated monitoring resource group) scope.</span></span>

### <a name="limiting-access-toomonitoring-related-storage-accounts"></a><span data-ttu-id="dc337-189">Account di archiviazione correlati toomonitoring limitazione accesso</span><span class="sxs-lookup"><span data-stu-id="dc337-189">Limiting access toomonitoring-related storage accounts</span></span>
<span data-ttu-id="dc337-190">Quando un utente o un'applicazione deve accedere a dati toomonitoring in un account di archiviazione, è necessario [generare una firma di accesso condiviso](https://msdn.microsoft.com/library/azure/mt584140.aspx) nell'account di archiviazione hello che contiene i dati di monitoraggio con l'archiviazione tooblob accesso in sola lettura a livello di servizio.</span><span class="sxs-lookup"><span data-stu-id="dc337-190">When a user or application needs access toomonitoring data in a storage account, you should [generate an Account SAS](https://msdn.microsoft.com/library/azure/mt584140.aspx) on hello storage account that contains monitoring data with service-level read-only access tooblob storage.</span></span> <span data-ttu-id="dc337-191">In PowerShell, potrebbe avere un aspetto simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="dc337-191">In PowerShell, this might look like:</span></span>

```powershell
$context = New-AzureStorageContext -ConnectionString "[connection string for your monitoring Storage Account]"
$token = New-AzureStorageAccountSASToken -ResourceType Service -Service Blob -Permission "rl" -Context $context
```

<span data-ttu-id="dc337-192">È quindi possibile assegnare entità toohello token hello necessarie tooread dall'account di archiviazione e può elencare e leggere tutti i BLOB nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="dc337-192">You can then give hello token toohello entity that needs tooread from that storage account, and it can list and read from all blobs in that storage account.</span></span>

<span data-ttu-id="dc337-193">In alternativa, se è necessario toocontrol questa autorizzazione con RBAC, è possibile concedere tale autorizzazione Microsoft.Storage/storageAccounts/listkeys/action per tale account di archiviazione specifico di hello entità.</span><span class="sxs-lookup"><span data-stu-id="dc337-193">Alternatively, if you need toocontrol this permission with RBAC, you can grant that entity hello Microsoft.Storage/storageAccounts/listkeys/action permission on that particular storage account.</span></span> <span data-ttu-id="dc337-194">Ciò è necessario per gli utenti che necessitano di toobe in grado di tooset una diagnostica impostazione o log profilo tooarchive tooa account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="dc337-194">This is necessary for users who need toobe able tooset a diagnostic setting or log profile tooarchive tooa storage account.</span></span> <span data-ttu-id="dc337-195">Ad esempio, è possibile creare hello seguente ruolo RBAC personalizzato per un utente o applicazione che richiede solo tooread da un account di archiviazione:</span><span class="sxs-lookup"><span data-stu-id="dc337-195">For example, you could create hello following custom RBAC role for a user or application that only needs tooread from one storage account:</span></span>

```powershell
$role = Get-AzureRmRoleDefinition "Reader"
$role.Id = $null
$role.Name = "Monitoring Storage Account Reader"
$role.Description = "Can get hello storage account keys for a monitoring storage account."
$role.Actions.Clear()
$role.Actions.Add("Microsoft.Storage/storageAccounts/listkeys/action")
$role.Actions.Add("Microsoft.Storage/storageAccounts/Read")
$role.AssignableScopes.Clear()
$role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.Storage/storageAccounts/myMonitoringStorageAccount")
New-AzureRmRoleDefinition -Role $role 
```

> [!WARNING]
> <span data-ttu-id="dc337-196">elenco chiavi dell'autorizzazione Hello consente chiavi dell'account di hello utente toolist hello archiviazione primaria e secondaria.</span><span class="sxs-lookup"><span data-stu-id="dc337-196">hello ListKeys permission enables hello user toolist hello primary and secondary storage account keys.</span></span> <span data-ttu-id="dc337-197">Queste chiavi concedono hello tutti firmati autorizzazioni (lettura, scrittura, creare BLOB, eliminare i BLOB e così via) in tutti i servizi (blob, coda, tabella, file) in tale account di archiviazione firmato.</span><span class="sxs-lookup"><span data-stu-id="dc337-197">These keys grant hello user all signed permissions (read, write, create blobs, delete blobs, etc.) across all signed services (blob, queue, table, file) in that storage account.</span></span> <span data-ttu-id="dc337-198">Se possibile, si consiglia di usare una firma di accesso condiviso dell'account come descritto sopra.</span><span class="sxs-lookup"><span data-stu-id="dc337-198">We recommend using an Account SAS described above when possible.</span></span>
> 
> 

### <a name="limiting-access-toomonitoring-related-event-hubs"></a><span data-ttu-id="dc337-199">Hub di eventi correlati al toomonitoring limitazione accesso</span><span class="sxs-lookup"><span data-stu-id="dc337-199">Limiting access toomonitoring-related event hubs</span></span>
<span data-ttu-id="dc337-200">Un modello simile può essere seguito con hub eventi, ma è necessario innanzitutto toocreate una regola di autorizzazione di ascolto dedicata.</span><span class="sxs-lookup"><span data-stu-id="dc337-200">A similar pattern can be followed with event hubs, but first you need toocreate a dedicated Listen authorization rule.</span></span> <span data-ttu-id="dc337-201">Se si desidera toogrant accesso tooan applicazione necessarie solo per gli hub di eventi correlati al toomonitoring toolisten, hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="dc337-201">If you want toogrant access tooan application that only needs toolisten toomonitoring-related event hubs, do hello following:</span></span>

1. <span data-ttu-id="dc337-202">Creare un criterio di accesso condiviso in hub eventi resteranno hello che sono stati creati per il flusso di dati di monitoraggio con solo le attestazioni di attesa.</span><span class="sxs-lookup"><span data-stu-id="dc337-202">Create a shared access policy on hello event hub(s) that were created for streaming monitoring data with only Listen claims.</span></span> <span data-ttu-id="dc337-203">Questa operazione può essere eseguita nel portale di hello.</span><span class="sxs-lookup"><span data-stu-id="dc337-203">This can be done in hello portal.</span></span> <span data-ttu-id="dc337-204">Ad esempio, è possibile chiamarlo "monitoringReadOnly".</span><span class="sxs-lookup"><span data-stu-id="dc337-204">For example, you might call it “monitoringReadOnly.”</span></span> <span data-ttu-id="dc337-205">Se possibile, si desidererà toogive chiave direttamente toohello consumer e ignorare il passaggio successivo hello.</span><span class="sxs-lookup"><span data-stu-id="dc337-205">If possible, you will want toogive that key directly toohello consumer and skip hello next step.</span></span>
2. <span data-ttu-id="dc337-206">Se il consumer hello deve toobe tooget in grado di hello chiave ad hoc, concedere hello hello elenco chiavi dell'intervento per l'hub eventi.</span><span class="sxs-lookup"><span data-stu-id="dc337-206">If hello consumer needs toobe able tooget hello key ad-hoc, grant hello user hello ListKeys action for that event hub.</span></span> <span data-ttu-id="dc337-207">Questo è anche necessario per gli utenti che devono toobe in grado di tooset un'impostazione di diagnostica o di log hub tooevent toostream di profilo.</span><span class="sxs-lookup"><span data-stu-id="dc337-207">This is also necessary for users who need toobe able tooset a diagnostic setting or log profile toostream tooevent hubs.</span></span> <span data-ttu-id="dc337-208">Ad esempio, è possibile creare una regola nel Controllo degli accessi in base al ruolo:</span><span class="sxs-lookup"><span data-stu-id="dc337-208">For example, you might create an RBAC rule:</span></span>
   
   ```powershell
   $role = Get-AzureRmRoleDefinition "Reader"
   $role.Id = $null
   $role.Name = "Monitoring Event Hub Listener"
   $role.Description = "Can get hello key toolisten tooan event hub streaming monitoring data."
   $role.Actions.Clear()
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/authorizationrules/listkeys/action")
   $role.Actions.Add("Microsoft.ServiceBus/namespaces/Read")
   $role.AssignableScopes.Clear()
   $role.AssignableScopes.Add("/subscriptions/mySubscription/resourceGroups/myResourceGroup/providers/Microsoft.ServiceBus/namespaces/mySBNameSpace")
   New-AzureRmRoleDefinition -Role $role 
   ```

## <a name="next-steps"></a><span data-ttu-id="dc337-209">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="dc337-209">Next steps</span></span>
* [<span data-ttu-id="dc337-210">Controllo degli accessi in base al ruolo e autorizzazioni in Resource Manager</span><span class="sxs-lookup"><span data-stu-id="dc337-210">Read about RBAC and permissions in Resource Manager</span></span>](../active-directory/role-based-access-control-what-is.md)
* [<span data-ttu-id="dc337-211">Panoramica di hello di monitoraggio in Azure</span><span class="sxs-lookup"><span data-stu-id="dc337-211">Read hello overview of monitoring in Azure</span></span>](monitoring-overview.md)

