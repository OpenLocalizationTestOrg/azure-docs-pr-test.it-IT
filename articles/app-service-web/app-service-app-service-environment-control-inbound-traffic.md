---
title: aaaHow tooControl il traffico in ingresso tooan ambiente del servizio App
description: Informazioni su come tooconfigure rete sicurezza regole toocontrol in ingresso a traffico tooan ambiente del servizio App.
services: app-service
documentationcenter: 
author: ccompy
manager: erikre
editor: 
ms.assetid: 4cc82439-8791-48a4-9485-de6d8e1d1a08
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/11/2017
ms.author: stefsch
ms.openlocfilehash: e7c6e6201db6a1ea77f7a2eee29a3b5445175495
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="how-toocontrol-inbound-traffic-tooan-app-service-environment"></a><span data-ttu-id="1fade-103">Come tooControl il traffico in ingresso tooan ambiente del servizio App</span><span class="sxs-lookup"><span data-stu-id="1fade-103">How tooControl Inbound Traffic tooan App Service Environment</span></span>
## <a name="overview"></a><span data-ttu-id="1fade-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="1fade-104">Overview</span></span>
<span data-ttu-id="1fade-105">Un ambiente del servizio app può essere creato **o** in una rete virtuale di Azure Resource Manager **o** in una [rete virtuale][virtualnetwork] del modello di distribuzione classica.</span><span class="sxs-lookup"><span data-stu-id="1fade-105">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model [virtual network][virtualnetwork].</span></span>  <span data-ttu-id="1fade-106">È possibile definire una nuova rete virtuale e una nuova subnet in fase di hello che viene creato un ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-106">A new virtual network and new subnet can be defined at hello time an App Service Environment is created.</span></span>  <span data-ttu-id="1fade-107">In alternativa, è possibile creare un ambiente del servizio app in una rete virtuale e in una subnet preesistenti.</span><span class="sxs-lookup"><span data-stu-id="1fade-107">Alternatively, an App Service Environment can be created in a pre-existing virtual network and pre-existing subnet.</span></span>  <span data-ttu-id="1fade-108">Con una modifica apportata a giugno 2016, gli ambienti del servizio app possono essere distribuiti nelle reti virtuali che usano intervalli di indirizzi pubblici o spazi di indirizzi RFC1918 (ovvero indirizzi privati).</span><span class="sxs-lookup"><span data-stu-id="1fade-108">With a change made in June 2016, ASEs can also be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span>  <span data-ttu-id="1fade-109">Per ulteriori informazioni sulla creazione di un ambiente del servizio App vedere [come un ambiente del servizio App tooCreate][HowToCreateAnAppServiceEnvironment].</span><span class="sxs-lookup"><span data-stu-id="1fade-109">For more details on creating an App Service Environment see [How tooCreate an App Service Environment][HowToCreateAnAppServiceEnvironment].</span></span>

<span data-ttu-id="1fade-110">Un ambiente del servizio App deve sempre essere creato all'interno di una subnet perché una subnet offre un limite di rete che può essere utilizzato toolock verso il basso il traffico in entrata dietro a monte dispositivi e servizi in modo che il traffico HTTP e HTTPS è accettato solo da specifici a monte Indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="1fade-110">An App Service Environment must always be created within a subnet because a subnet provides a network boundary which can be used toolock down inbound traffic behind upstream devices and services such that HTTP and HTTPS traffic is only accepted from specific upstream IP addresses.</span></span>

<span data-ttu-id="1fade-111">Il traffico in ingresso e in uscita diretto verso e proveniente da una subnet è controllato tramite un [gruppo di sicurezza di rete][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="1fade-111">Inbound and outbound network traffic on a subnet is controlled using a [network security group][NetworkSecurityGroups].</span></span> <span data-ttu-id="1fade-112">Controllare il traffico in entrata richiede la creazione di regole di sicurezza di rete in un gruppo di sicurezza di rete e quindi assegnando hello rete sicurezza gruppo hello subnet contenente hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-112">Controlling inbound traffic requires creating network security rules in a network security group, and then assigning hello network security group hello subnet containing hello App Service Environment.</span></span>

<span data-ttu-id="1fade-113">Una volta assegnato un gruppo di sicurezza di rete tooa subnet, il traffico in entrata tooapps nell'ambiente del servizio App è consentita o bloccata in base alle hello hello di negazione e assenso regole definite nel gruppo di sicurezza di rete hello.</span><span class="sxs-lookup"><span data-stu-id="1fade-113">Once a network security group is assigned tooa subnet, inbound traffic tooapps in hello App Service Environment is allowed/blocked based on hello allow and deny rules defined in hello network security group.</span></span>

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="inbound-network-ports-used-in-an-app-service-environment"></a><span data-ttu-id="1fade-114">Porte di rete in ingresso usate in un ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="1fade-114">Inbound Network Ports Used in an App Service Environment</span></span>
<span data-ttu-id="1fade-115">Prima di bloccare il traffico di rete in ingresso con un gruppo di sicurezza di rete, è importante tooknow set di hello delle porte di rete obbligatorie e facoltative utilizzate da un ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-115">Before locking down inbound network traffic with a network security group, it is important tooknow hello set of required and optional network ports used by an App Service Environment.</span></span>  <span data-ttu-id="1fade-116">Chiude involontariamente off porte toosome traffico può comportare la perdita di funzionalità in un ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-116">Accidentally closing off traffic toosome ports can result in loss of functionality in an App Service Environment.</span></span>

<span data-ttu-id="1fade-117">Hello seguito è riportato un elenco delle porte utilizzate da un ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-117">hello following is a list of ports used by an App Service Environment.</span></span> <span data-ttu-id="1fade-118">Tutte le porte sono di tipo **TCP**, se non indicato diversamente in modo chiaro:</span><span class="sxs-lookup"><span data-stu-id="1fade-118">All ports are **TCP**, unless otherwise clearly noted:</span></span>

* <span data-ttu-id="1fade-119">454: **porta obbligatoria** usata dall'infrastruttura di Azure per la gestione e la manutenzione degli ambienti del servizio app tramite SSL.</span><span class="sxs-lookup"><span data-stu-id="1fade-119">454:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="1fade-120">Non bloccano la porta toothis traffico.</span><span class="sxs-lookup"><span data-stu-id="1fade-120">Do not block traffic toothis port.</span></span>  <span data-ttu-id="1fade-121">Questa porta è sempre associato toohello VIP pubblico di un tipo di base.</span><span class="sxs-lookup"><span data-stu-id="1fade-121">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="1fade-122">455: **porta obbligatoria** usata dall'infrastruttura di Azure per la gestione e la manutenzione degli ambienti del servizio app tramite SSL.</span><span class="sxs-lookup"><span data-stu-id="1fade-122">455:  **Required port** used by Azure infrastructure for managing and maintaining App Service Environments via SSL.</span></span>  <span data-ttu-id="1fade-123">Non bloccano la porta toothis traffico.</span><span class="sxs-lookup"><span data-stu-id="1fade-123">Do not block traffic toothis port.</span></span>  <span data-ttu-id="1fade-124">Questa porta è sempre associato toohello VIP pubblico di un tipo di base.</span><span class="sxs-lookup"><span data-stu-id="1fade-124">This port is always bound toohello public VIP of an ASE.</span></span>
* <span data-ttu-id="1fade-125">80: porta per tooapps di traffico HTTP in ingresso e in esecuzione in piani di servizio App in un ambiente del servizio App predefinita.</span><span class="sxs-lookup"><span data-stu-id="1fade-125">80:  Default port for inbound HTTP traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="1fade-126">In un ASE abilitata al bilanciamento del carico interno, questa porta è hello ASE indirizzo ILB toohello associato.</span><span class="sxs-lookup"><span data-stu-id="1fade-126">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="1fade-127">443: porta per tooapps di traffico SSL in ingresso e in esecuzione in piani di servizio App in un ambiente del servizio App predefinita.</span><span class="sxs-lookup"><span data-stu-id="1fade-127">443: Default port for inbound SSL traffic tooapps running in App Service Plans in an App Service Environment.</span></span>  <span data-ttu-id="1fade-128">In un ASE abilitata al bilanciamento del carico interno, questa porta è hello ASE indirizzo ILB toohello associato.</span><span class="sxs-lookup"><span data-stu-id="1fade-128">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="1fade-129">21: canale di controllo per il servizio FTP.</span><span class="sxs-lookup"><span data-stu-id="1fade-129">21:  Control channel for FTP.</span></span>  <span data-ttu-id="1fade-130">Questa porta può essere bloccata, se non si usa un servizio FTP.</span><span class="sxs-lookup"><span data-stu-id="1fade-130">This port can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="1fade-131">In un ASE abilitata al bilanciamento del carico interno, questa porta può essere indirizzi di bilanciamento del carico interno toohello associato per un tipo di base.</span><span class="sxs-lookup"><span data-stu-id="1fade-131">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="1fade-132">990: canale di controllo per il servizio FTPS.</span><span class="sxs-lookup"><span data-stu-id="1fade-132">990:  Control channel for FTPS.</span></span>  <span data-ttu-id="1fade-133">Questa porta può essere bloccata, se non si usa un servizio FTPS.</span><span class="sxs-lookup"><span data-stu-id="1fade-133">This port can be safely blocked if FTPS is not being used.</span></span>  <span data-ttu-id="1fade-134">In un ASE abilitata al bilanciamento del carico interno, questa porta può essere indirizzi di bilanciamento del carico interno toohello associato per un tipo di base.</span><span class="sxs-lookup"><span data-stu-id="1fade-134">On an ILB-enabled ASE, this port can be bound toohello ILB address for an ASE.</span></span>
* <span data-ttu-id="1fade-135">10001-10020: canali di dati per il servizio FTP.</span><span class="sxs-lookup"><span data-stu-id="1fade-135">10001-10020: Data channels for FTP.</span></span>  <span data-ttu-id="1fade-136">Come con il canale di controllo di hello, queste porte possono essere bloccate in modo sicuro se non viene utilizzato FTP.</span><span class="sxs-lookup"><span data-stu-id="1fade-136">As with hello control channel, these ports can be safely blocked if FTP is not being used.</span></span>  <span data-ttu-id="1fade-137">In un ASE abilitata al bilanciamento del carico interno, questa porta può essere associato toohello dell'ASE indirizzo di bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="1fade-137">On an ILB-enabled ASE, this port can be bound toohello ASE's ILB address.</span></span>
* <span data-ttu-id="1fade-138">4016: porta usata per il debug remoto con Visual Studio 2012.</span><span class="sxs-lookup"><span data-stu-id="1fade-138">4016: Used for remote debugging with Visual Studio 2012.</span></span>  <span data-ttu-id="1fade-139">Questa porta può essere bloccata in modo sicuro se non viene utilizzata la funzione hello.</span><span class="sxs-lookup"><span data-stu-id="1fade-139">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="1fade-140">In un ASE abilitata al bilanciamento del carico interno, questa porta è hello ASE indirizzo ILB toohello associato.</span><span class="sxs-lookup"><span data-stu-id="1fade-140">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="1fade-141">4018: porta usata per il debug remoto con Visual Studio 2013.</span><span class="sxs-lookup"><span data-stu-id="1fade-141">4018: Used for remote debugging with Visual Studio 2013.</span></span>  <span data-ttu-id="1fade-142">Questa porta può essere bloccata in modo sicuro se non viene utilizzata la funzione hello.</span><span class="sxs-lookup"><span data-stu-id="1fade-142">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="1fade-143">In un ASE abilitata al bilanciamento del carico interno, questa porta è hello ASE indirizzo ILB toohello associato.</span><span class="sxs-lookup"><span data-stu-id="1fade-143">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>
* <span data-ttu-id="1fade-144">4020: porta usata per il debug remoto con Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="1fade-144">4020: Used for remote debugging with Visual Studio 2015.</span></span>  <span data-ttu-id="1fade-145">Questa porta può essere bloccata in modo sicuro se non viene utilizzata la funzione hello.</span><span class="sxs-lookup"><span data-stu-id="1fade-145">This port can be safely blocked if hello feature is not being used.</span></span>  <span data-ttu-id="1fade-146">In un ASE abilitata al bilanciamento del carico interno, questa porta è hello ASE indirizzo ILB toohello associato.</span><span class="sxs-lookup"><span data-stu-id="1fade-146">On an ILB-enabled ASE, this port is bound toohello ILB address of hello ASE.</span></span>

## <a name="outbound-connectivity-and-dns-requirements"></a><span data-ttu-id="1fade-147">Requisiti per DNS e connettività in uscita</span><span class="sxs-lookup"><span data-stu-id="1fade-147">Outbound Connectivity and DNS Requirements</span></span>
<span data-ttu-id="1fade-148">Per un ambiente del servizio App di toofunction correttamente, è inoltre necessario endpoint toovarious accesso in uscita.</span><span class="sxs-lookup"><span data-stu-id="1fade-148">For an App Service Environment toofunction properly, it also requires outbound access toovarious endpoints.</span></span> <span data-ttu-id="1fade-149">È un elenco completo di endpoint esterni di hello utilizzato da un ASE nella sezione "Necessaria la connettività di rete" di hello hello [configurazione di rete per ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) articolo.</span><span class="sxs-lookup"><span data-stu-id="1fade-149">A full list of hello external endpoints used by an ASE is in hello "Required Network Connectivity" section of hello [Network Configuration for ExpressRoute](app-service-app-service-environment-network-configuration-expressroute.md#required-network-connectivity) article.</span></span>

<span data-ttu-id="1fade-150">Gli ambienti del servizio App richiedono un'infrastruttura DNS valida configurata per la rete virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="1fade-150">App Service Environments require a valid DNS infrastructure configured for hello virtual network.</span></span>  <span data-ttu-id="1fade-151">Se per qualsiasi hello motivo la configurazione del DNS viene modificata dopo aver creato un ambiente del servizio App, gli sviluppatori possono forzare toopick un ambiente del servizio App hello configurazione del nuovo DNS.</span><span class="sxs-lookup"><span data-stu-id="1fade-151">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="1fade-152">Attivazione di un riavvio di ambiente in sequenza utilizzando hello icona "Riavvia" si trova nella parte superiore di hello del pannello Gestione di ambiente del servizio App hello in hello [portale di Azure] [ NewPortal] causerà hello ambiente toopick la nuova configurazione DNS di hello.</span><span class="sxs-lookup"><span data-stu-id="1fade-152">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="1fade-153">È inoltre consigliabile che qualsiasi server DNS personalizzati in rete virtuale hello è necessario installare prima fase precedente toocreating un ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-153">It is also recommended that any custom DNS servers on hello vnet be setup ahead of time prior toocreating an App Service Environment.</span></span>  <span data-ttu-id="1fade-154">Se la configurazione DNS della rete virtuale viene modificata durante la creazione di un ambiente del servizio App, si avranno esito negativo processo di creazione dell'ambiente del servizio App di hello.</span><span class="sxs-lookup"><span data-stu-id="1fade-154">If a virtual network's DNS configuration is changed while an App Service Environment is being created, that will result in hello App Service Environment creation process failing.</span></span>  <span data-ttu-id="1fade-155">Infine proposta, se esiste un server DNS personalizzato su hello altra entità finale di un gateway VPN e server DNS hello è hello non è raggiungibile o non disponibile, non sarà possibile eseguire il processo di creazione dell'ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-155">In a similar vein, if a custom DNS server exists on hello other end of a VPN gateway, and hello DNS server is unreachable or unavailable, hello App Service Environment creation process will also fail.</span></span>

## <a name="creating-a-network-security-group"></a><span data-ttu-id="1fade-156">Creazione di un gruppo di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="1fade-156">Creating a Network Security Group</span></span>
<span data-ttu-id="1fade-157">Per ottenere informazioni complete sulla sicurezza di rete come gruppi di lavoro, vedere esempio hello [informazioni][NetworkSecurityGroups].</span><span class="sxs-lookup"><span data-stu-id="1fade-157">For full details on how network security groups work see hello following [information][NetworkSecurityGroups].</span></span>  <span data-ttu-id="1fade-158">esempio di gestione del servizio Azure Hello seguito ritocchi su Evidenzia dei gruppi di sicurezza di rete, con l'obiettivo di configurazione e applicazione di una subnet di tooa gruppo di sicurezza rete che contiene un ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-158">hello Azure Service Management example below touches on highlights of network security groups, with a focus on configuring and applying a network security group tooa subnet that contains an App Service Environment.</span></span>

<span data-ttu-id="1fade-159">**Nota:** gruppi di sicurezza di rete possono essere configurati tramite graficamente hello [portale Azure](https://portal.azure.com) o tramite Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="1fade-159">**Note:** Network security groups can be configured graphically using hello [Azure Portal](https://portal.azure.com) or through Azure PowerShell.</span></span>

<span data-ttu-id="1fade-160">I gruppi di sicurezza di rete vengono inizialmente creati come un'entità autonoma associata a una sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="1fade-160">Network security groups are first created as a standalone entity associated with a subscription.</span></span> <span data-ttu-id="1fade-161">Poiché in un'area di Azure vengono creati gruppi di sicurezza di rete, verificare che tale gruppo di sicurezza di rete hello viene creato in hello stessa area, come hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-161">Since network security groups are created in an Azure region, ensure that hello network security group is created in hello same region as hello App Service Environment.</span></span>

<span data-ttu-id="1fade-162">esempio Hello viene illustrata la creazione di un gruppo di sicurezza di rete:</span><span class="sxs-lookup"><span data-stu-id="1fade-162">hello following demonstrates creating a network security group:</span></span>

    New-AzureNetworkSecurityGroup -Name "testNSGexample" -Location "South Central US" -Label "Example network security group for an app service environment"

<span data-ttu-id="1fade-163">Dopo aver creato un gruppo di sicurezza di rete, uno o più regole di sicurezza di rete vengono aggiunti tooit.</span><span class="sxs-lookup"><span data-stu-id="1fade-163">Once a network security group is created, one or more network security rules are added tooit.</span></span>  <span data-ttu-id="1fade-164">Poiché set hello di regole potrebbe cambiare nel tempo, è consigliabile toospace out hello schema di numerazione utilizzata per regola priorità toomake regole aggiuntive tooinsert facilmente nel tempo.</span><span class="sxs-lookup"><span data-stu-id="1fade-164">Since hello set of rules may change over time, it is recommended toospace out hello numbering scheme used for rule priorities toomake it easy tooinsert additional rules over time.</span></span>

<span data-ttu-id="1fade-165">esempio Hello riportato di seguito è illustrata una regola che concede porte gestione toohello di accesso necessari per hello toomanage di infrastruttura di Azure e gestione un ambiente del servizio App in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="1fade-165">hello example below shows a rule that explicitly grants access toohello management ports needed by hello Azure infrastructure toomanage and maintain an App Service Environment.</span></span>  <span data-ttu-id="1fade-166">Si noti che tutto il traffico di gestione flussi tramite SSL ed è protetto dai certificati client, pertanto anche se hello porte siano aperte sono inaccessibili da qualsiasi entità diversa da infrastruttura di gestione di Azure.</span><span class="sxs-lookup"><span data-stu-id="1fade-166">Note that all management traffic flows over SSL and is secured by client certificates, so even though hello ports are opened they are inaccessible by any entity other than Azure management infrastructure.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "ALLOW AzureMngmt" -Type Inbound -Priority 100 -Action Allow -SourceAddressPrefix 'INTERNET'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '454-455' -Protocol TCP


<span data-ttu-id="1fade-167">Quando il blocco di accesso tooport 80 e 443 troppo "hide" un ambiente del servizio App dietro a monte dispositivi o servizi, sarà necessario indirizzo IP di tooknow hello a monte.</span><span class="sxs-lookup"><span data-stu-id="1fade-167">When locking down access tooport 80 and 443 too"hide" an App Service Environment behind upstream devices or services, you will need tooknow hello upstream IP address.</span></span>  <span data-ttu-id="1fade-168">Ad esempio, se si utilizza un firewall applicazione web (WAF), hello WAF avrà il proprio indirizzo IP (o gli indirizzi) che verrà utilizzato quando l'inoltro dei dati del traffico tooa downstream ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-168">For example, if you are using a web application firewall (WAF), hello WAF will have its own IP address (or addresses) which it uses when proxying traffic tooa downstream App Service Environment.</span></span>  <span data-ttu-id="1fade-169">Sarà necessario toouse questo indirizzo IP in hello *SourceAddressPrefix* parametro di una regola di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="1fade-169">You will need toouse this IP address in hello *SourceAddressPrefix* parameter of a network security rule.</span></span>

<span data-ttu-id="1fade-170">Nell'esempio hello seguente, è consentito in modo esplicito il traffico in ingresso da uno specifico indirizzo IP a monte.</span><span class="sxs-lookup"><span data-stu-id="1fade-170">In hello example below, inbound traffic from a specific upstream IP address is explicitly allowed.</span></span>  <span data-ttu-id="1fade-171">Hello indirizzo *1.2.3.4* viene utilizzato come segnaposto per indirizzo IP hello di un WAF a monte.</span><span class="sxs-lookup"><span data-stu-id="1fade-171">hello address *1.2.3.4* is used as a placeholder for hello IP address of an upstream WAF.</span></span>  <span data-ttu-id="1fade-172">Modificare l'indirizzo di hello valore toomatch hello utilizzato da un dispositivo a monte o di un servizio.</span><span class="sxs-lookup"><span data-stu-id="1fade-172">Change hello value toomatch hello address used by your upstream device or service.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTP" -Type Inbound -Priority 200 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '80' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT HTTPS" -Type Inbound -Priority 300 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '443' -Protocol TCP

<span data-ttu-id="1fade-173">Se si desidera supporto FTP, hello segue le regole può essere utilizzato come una porta di controllo modello toogrant accesso toohello FTP e porte canale dati.</span><span class="sxs-lookup"><span data-stu-id="1fade-173">If FTP support is desired, hello following rules can be used as a template toogrant access toohello FTP control port and data channel ports.</span></span>  <span data-ttu-id="1fade-174">Poiché FTP è un protocollo di stato, potrebbe non essere in grado di tooroute FTP traffico tramite un dispositivo firewall o proxy HTTP/HTTPS tradizionale.</span><span class="sxs-lookup"><span data-stu-id="1fade-174">Since FTP is a stateful protocol, you may not be able tooroute FTP traffic through a traditional HTTP/HTTPS firewall or proxy device.</span></span>  <span data-ttu-id="1fade-175">In questo caso sarà necessario hello tooset *SourceAddressPrefix* tooa valore diverso, ad esempio hello IP indirizzo serie di computer di sviluppo o distribuzione su FTP client in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="1fade-175">In this case you will need tooset hello *SourceAddressPrefix* tooa different value - for example hello IP address range of developer or deployment machines on which FTP clients are running.</span></span> 

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPCtrl" -Type Inbound -Priority 400 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '21' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT FTPDataRange" -Type Inbound -Priority 500 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '10001-10020' -Protocol TCP

<span data-ttu-id="1fade-176">(**Nota:** intervallo porte canale dati di hello potrebbe cambiare durante il periodo di anteprima di hello.)</span><span class="sxs-lookup"><span data-stu-id="1fade-176">(**Note:**  hello data channel port range may change during hello preview period.)</span></span>

<span data-ttu-id="1fade-177">Se viene utilizzato il debug remoto con Visual Studio, hello seguendo regole viene illustrato come accedere a toogrant.</span><span class="sxs-lookup"><span data-stu-id="1fade-177">If remote debugging with Visual Studio is used, hello following rules demonstrate how toogrant access.</span></span>  <span data-ttu-id="1fade-178">Esiste una regola separata per ogni versione supportata di Visual Studio, dal momento che ogni versione usa una porta diversa per il debug remoto.</span><span class="sxs-lookup"><span data-stu-id="1fade-178">There is a separate rule for each supported version of Visual Studio since each version uses a different port for remote debugging.</span></span>  <span data-ttu-id="1fade-179">Come per l'accesso FTP, il traffico di debug remoto potrebbe non transitare correttamente attraverso un dispositivo proxy o un firewall per applicazioni Web tradizionale.</span><span class="sxs-lookup"><span data-stu-id="1fade-179">As with FTP access, remote debugging traffic may not flow properly through a traditional WAF or proxy device.</span></span>  <span data-ttu-id="1fade-180">Hello *SourceAddressPrefix* possono invece essere impostate toohello intervallo di indirizzi IP del computer di sviluppo che esegue Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="1fade-180">hello *SourceAddressPrefix* can instead be set toohello IP address range of developer machines running Visual Studio.</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2012" -Type Inbound -Priority 600 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4016' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2013" -Type Inbound -Priority 700 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4018' -Protocol TCP
    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityRule -Name "RESTRICT RemoteDebuggingVS2015" -Type Inbound -Priority 800 -Action Allow -SourceAddressPrefix '1.2.3.4/32'  -SourcePortRange '*' -DestinationAddressPrefix '*' -DestinationPortRange '4020' -Protocol TCP

## <a name="assigning-a-network-security-group-tooa-subnet"></a><span data-ttu-id="1fade-181">L'assegnazione di una Subnet di tooa il gruppo di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="1fade-181">Assigning a Network Security Group tooa Subnet</span></span>
<span data-ttu-id="1fade-182">Un gruppo di sicurezza di rete dispone di una regola di sicurezza predefinita che nega il traffico esterno tooall di accesso.</span><span class="sxs-lookup"><span data-stu-id="1fade-182">A network security group has a default security rule which denies access tooall external traffic.</span></span>  <span data-ttu-id="1fade-183">risultati tramite la combinazione di regole di sicurezza di rete hello descritte in precedenza, Hello e hello regola di sicurezza predefinita che bloccano il traffico in ingresso, che solo il traffico da intervalli di indirizzi di origine è associato un *Consenti* sarà in grado di azione toosend tooapps di traffico in esecuzione in un ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-183">hello result from combining hello network security rules described above, and hello default security rule blocking inbound traffic, is that only traffic from source address ranges associated with an *Allow* action will be able toosend traffic tooapps running in an App Service Environment.</span></span>

<span data-ttu-id="1fade-184">Dopo un gruppo di sicurezza di rete viene popolato con le regole di sicurezza, è necessario toobe assegnato toohello subnet contenente hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-184">After a network security group is populated with security rules, it needs toobe assigned toohello subnet containing hello App Service Environment.</span></span>  <span data-ttu-id="1fade-185">comando assegnazione Hello fa riferimento sia nome hello della rete virtuale di hello in cui si trova hello ambiente del servizio App, nonché il nome di hello della subnet di hello in cui è stato creato hello ambiente del servizio App.</span><span class="sxs-lookup"><span data-stu-id="1fade-185">hello assignment command references both hello name of hello virtual network where hello App Service Environment resides, as well as hello name of hello subnet where hello App Service Environment was created.</span></span>  

<span data-ttu-id="1fade-186">esempio Hello riportato di seguito viene illustrato un gruppo di sicurezza di rete viene assegnato tooa subnet e la rete virtuale:</span><span class="sxs-lookup"><span data-stu-id="1fade-186">hello example below shows a network security group being assigned tooa subnet and virtual network:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Set-AzureNetworkSecurityGroupToSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

<span data-ttu-id="1fade-187">Al termine dell'assegnazione del gruppo di sicurezza rete hello (assegnazione hello è operazioni a esecuzione prolungata e può richiedere alcuni minuti toocomplete), solo connessioni in entrata corrispondenti traffico *Consenti* regole completato raggiungerà App in App hello Ambiente del servizio.</span><span class="sxs-lookup"><span data-stu-id="1fade-187">Once hello network security group assignment succeeds (hello assignment is a long-running operations and can take a few minutes toocomplete), only inbound traffic matching *Allow* rules will successfully reach apps in hello App Service Environment.</span></span>

<span data-ttu-id="1fade-188">Per hello completezza l'esempio seguente viene illustrato come associare DIS hello rete sicurezza tooremove e pertanto gruppo dalla subnet hello:</span><span class="sxs-lookup"><span data-stu-id="1fade-188">For completeness hello following example shows how tooremove and thus dis-associate hello network security group from hello subnet:</span></span>

    Get-AzureNetworkSecurityGroup -Name "testNSGexample" | Remove-AzureNetworkSecurityGroupFromSubnet -VirtualNetworkName 'testVNet' -SubnetName 'Subnet-test'

## <a name="special-considerations-for-explicit-ip-ssl"></a><span data-ttu-id="1fade-189">Considerazioni speciali su IP SSL esplicito</span><span class="sxs-lookup"><span data-stu-id="1fade-189">Special Considerations for Explicit IP-SSL</span></span>
<span data-ttu-id="1fade-190">Se un'app è configurata con un indirizzo IP SSL esplicito (applicabile *solo* tooASEs che hanno un VIP pubblico), anziché l'indirizzo IP predefinito di hello di hello ambiente del servizio App, HTTP e HTTPS traffico flussi in subnet hello su un set diverso di porte diverse porte 80 e 443.</span><span class="sxs-lookup"><span data-stu-id="1fade-190">If an app is configured with an explicit IP-SSL address (applicable *only* tooASEs that have a public VIP), instead of using hello default IP address of hello App Service Environment, both HTTP and HTTPS traffic flows into hello subnet over a different set of ports other than ports 80 and 443.</span></span>

<span data-ttu-id="1fade-191">coppia di singoli Hello delle porte utilizzate da ogni indirizzo IP SSL è reperibile nell'interfaccia utente del portale hello dal pannello UX di dettagli dell'ambiente del servizio App di hello.</span><span class="sxs-lookup"><span data-stu-id="1fade-191">hello individual pair of ports used by each IP-SSL address can be found in hello portal user interface from hello App Service Environment's details UX blade.</span></span>  <span data-ttu-id="1fade-192">Selezionare "Tutte le impostazioni" --> "Indirizzi IP".</span><span class="sxs-lookup"><span data-stu-id="1fade-192">Select "All settings" --> "IP addresses".</span></span>  <span data-ttu-id="1fade-193">Pannello Hello "indirizzi IP" Mostra una tabella di tutti gli indirizzi IP SSL configurati in modo esplicito per hello ambiente del servizio App, insieme a hello porta speciale coppia tooroute utilizzato traffico HTTP e HTTPS associata a ogni indirizzo IP SSL.</span><span class="sxs-lookup"><span data-stu-id="1fade-193">hello "IP addresses" blade shows a table of all explicitly configured IP-SSL addresses for hello App Service Environment, along with hello special port pair that is used tooroute HTTP and HTTPS traffic associated with each IP-SSL address.</span></span>  <span data-ttu-id="1fade-194">È questa coppia di porta che deve toobe utilizzato per i parametri DestinationPortRange hello durante la configurazione di regole in un gruppo di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="1fade-194">It is this port pair that needs toobe used for hello DestinationPortRange parameters when configuring rules in a network security group.</span></span>

<span data-ttu-id="1fade-195">Quando un'app su un ASE è toouse configurato SSL IP, clienti esterni non saranno visibile e non è necessario tooworry sul mapping di coppia porta speciale hello.</span><span class="sxs-lookup"><span data-stu-id="1fade-195">When an app on an ASE is configured toouse IP-SSL, external customers will not see and do not need tooworry about hello special port pair mapping.</span></span>  <span data-ttu-id="1fade-196">App toohello il traffico verrà trasferito in genere indirizzo IP SSL toohello configurato.</span><span class="sxs-lookup"><span data-stu-id="1fade-196">Traffic toohello apps will flow normally toohello configured IP-SSL address.</span></span>  <span data-ttu-id="1fade-197">coppia di porte speciali di Hello traduzione toohello automaticamente avviene internamente durante la parte finale di hello di routing del traffico in hello contenente subnet di hello ASE.</span><span class="sxs-lookup"><span data-stu-id="1fade-197">hello translation toohello special port pair automatically happens internally during hello final leg of routing traffic into hello subnet containing hello ASE.</span></span> 

## <a name="getting-started"></a><span data-ttu-id="1fade-198">introduttiva</span><span class="sxs-lookup"><span data-stu-id="1fade-198">Getting started</span></span>
<span data-ttu-id="1fade-199">tooget avviato con gli ambienti del servizio App, vedere [tooApp introduzione dell'ambiente del servizio][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="1fade-199">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="1fade-200">Tutti gli articoli e in che modo-per per gli ambienti del servizio App sono disponibili in hello [file Leggimi per gli ambienti del servizio dell'applicazione](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="1fade-200">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="1fade-201">Per informazioni dettagliate sugli App che si connettono in modo sicuro toobackend risorse da un ambiente del servizio App, vedere [connessione in modo sicuro le risorse tooBackend da un ambiente del servizio App][SecurelyConnecttoBackend]</span><span class="sxs-lookup"><span data-stu-id="1fade-201">For details around apps securely connecting toobackend resource from an App Service Environment, see [Securely connecting tooBackend resources from an App Service Environment][SecurelyConnecttoBackend]</span></span>

<span data-ttu-id="1fade-202">Per ulteriori informazioni sulla piattaforma Azure App Service hello, vedere [Azure App Service][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="1fade-202">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[SecurelyConnecttoBackend]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-securely-connecting-to-backend-resources/
[NewPortal]:  https://portal.azure.com  

<!-- IMAGES -->

