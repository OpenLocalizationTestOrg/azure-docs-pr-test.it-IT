---
title: aaaView e utilizzare il modello di gestione risorse di Azure di una macchina virtuale | Documenti Microsoft
description: Informazioni su come toouse hello modello di gestione risorse di Azure da una macchina virtuale di toocreate altre macchine virtuali
services: devtest-lab,virtual-machines,visual-studio-online
documentationcenter: na
author: tomarcher
manager: douge
editor: 
ms.assetid: a759d9ce-655c-4ac6-8834-cb29dd7d30dd
ms.service: devtest-lab
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/05/2017
ms.author: tarcher
ms.openlocfilehash: b79f7eb4171793681a0b654e6e72a83191c76bde
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="use-a-virtual-machines-azure-resource-manager-template"></a><span data-ttu-id="6fe98-103">Usare un modello di Azure Resource Manager di una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="6fe98-103">Use a virtual machine's Azure Resource Manager template</span></span>

<span data-ttu-id="6fe98-104">Quando si crea una macchina virtuale (VM) in DevTest Labs tramite hello [portale di Azure](http://go.microsoft.com/fwlink/p/?LinkID=525040), è possibile visualizzare il modello di Azure Resource Manager hello prima di salvare hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="6fe98-104">When you are creating a virtual machine (VM) in DevTest Labs through hello [Azure portal](http://go.microsoft.com/fwlink/p/?LinkID=525040), you can view hello Azure Resource Manager template before you save hello VM.</span></span> <span data-ttu-id="6fe98-105">Hello modello può quindi essere utilizzato come un toocreate base più macchine virtuali di laboratorio con hello stesse impostazioni.</span><span class="sxs-lookup"><span data-stu-id="6fe98-105">hello template can then be used as a basis toocreate more lab VMs with hello same settings.</span></span>

<span data-ttu-id="6fe98-106">In questo articolo viene descritto come tooview hello modello di gestione risorse durante la creazione di una macchina virtuale e come toodeploy è successiva creazione tooautomate di hello stessa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="6fe98-106">This article describes how tooview hello Resource Manager template when creating a VM, and how toodeploy it later tooautomate creation of hello same VM.</span></span>

## <a name="multi-vm-vs-single-vm-resource-manager-templates"></a><span data-ttu-id="6fe98-107">Modello di Resource Manager di più macchine virtuali rispetto al modello di Resource Manager di una singola macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="6fe98-107">Multi-VM vs. single-VM Resource Manager templates</span></span>
<span data-ttu-id="6fe98-108">Sono disponibili due modi per le macchine virtuali toocreate in un modello di gestione risorse di DevTest Labs: effettuare il provisioning di risorse Microsoft.DevTestLab/labs/virtualmachines hello o eseguire il provisioning di risorse Microsoft.Commpute/virtualmachines hello.</span><span class="sxs-lookup"><span data-stu-id="6fe98-108">There are two ways toocreate VMs in DevTest Labs using a Resource Manager template: provision hello Microsoft.DevTestLab/labs/virtualmachines resource or provision hello Microsoft.Commpute/virtualmachines resource.</span></span> <span data-ttu-id="6fe98-109">Ognuno viene usato in diversi scenari e richiede autorizzazioni diverse.</span><span class="sxs-lookup"><span data-stu-id="6fe98-109">Each is used in different scenarios and require different permissions.</span></span>

- <span data-ttu-id="6fe98-110">Possono eseguire il provisioning di macchine virtuali lab singoli modelli di gestione risorse che utilizzano un tipo di risorsa Microsoft.DevTestLab/labs/virtualmachines (come dichiarato nella proprietà "resource" hello nel modello hello).</span><span class="sxs-lookup"><span data-stu-id="6fe98-110">Resource Manager templates that use a Microsoft.DevTestLab/labs/virtualmachines resource type (as declared in hello “resource” property in hello template) can provision individual lab VMs.</span></span> <span data-ttu-id="6fe98-111">Ogni macchina virtuale viene quindi visualizzato come un singolo elemento nell'elenco di macchine virtuali di DevTest Labs hello:</span><span class="sxs-lookup"><span data-stu-id="6fe98-111">Each VM then shows up as a single item in hello DevTest Labs virtual machines list:</span></span>

   ![Elenco delle macchine virtuali come singoli elementi nell'elenco di macchine virtuali di DevTest Labs hello](./media/devtest-lab-use-arm-template/devtestlab-lab-vm-single-item.png)

   <span data-ttu-id="6fe98-113">Può eseguire il provisioning di questo tipo di modello di gestione risorse tramite il comando di Azure PowerShell hello **New AzureRmResourceGroupDeployment** o tramite comando CLI di Azure hello **distribuzione gruppo az creare** .</span><span class="sxs-lookup"><span data-stu-id="6fe98-113">This type of Resource Manager template can be provisioned through hello Azure PowerShell command **New-AzureRmResourceGroupDeployment** or through hello Azure CLI command **az group deployment create**.</span></span> <span data-ttu-id="6fe98-114">Richiede le autorizzazioni di amministratore, in modo che gli utenti assegnati a un ruolo utente DevTest Labs non è possibile eseguire la distribuzione di hello.</span><span class="sxs-lookup"><span data-stu-id="6fe98-114">It requires administrator permissions, so users who are assigned with a DevTest Labs user role can’t perform hello deployment.</span></span> 

- <span data-ttu-id="6fe98-115">Modelli di gestione risorse che utilizzano un tipo di risorsa Microsoft.Compute/virtualmachines è possono eseguire il provisioning di più macchine virtuali come un unico ambiente nell'elenco di macchine virtuali di DevTest Labs hello:</span><span class="sxs-lookup"><span data-stu-id="6fe98-115">Resource Manager templates that use a Microsoft.Compute/virtualmachines resource type can provision multiple VMs as a single environment in hello DevTest Labs virtual machines list:</span></span>

   ![Elenco delle macchine virtuali come singoli elementi nell'elenco di macchine virtuali di DevTest Labs hello](./media/devtest-lab-use-arm-template/devtestlab-lab-vm-single-environment.png)

   <span data-ttu-id="6fe98-117">Macchine virtuali in hello stesso ambiente può essere gestito insieme e condivisione hello stesso ciclo di vita.</span><span class="sxs-lookup"><span data-stu-id="6fe98-117">VMs in hello same environment can be managed together and share hello same lifecycle.</span></span> <span data-ttu-id="6fe98-118">Gli utenti assegnati a un ruolo utente DevTest Labs è possono creare gli ambienti che utilizzano tali modelli come messaggio per l'amministratore ha configurato lab hello in questo modo.</span><span class="sxs-lookup"><span data-stu-id="6fe98-118">Users who are assigned with a DevTest Labs user role can create environments using those templates as long as hello administrator has configured hello lab that way.</span></span>

<span data-ttu-id="6fe98-119">Hello parte restante di questo articolo sono descritti i modelli di gestione risorse che utilizzano Mirosoft.DevTestLab/labs/virtualmachines.</span><span class="sxs-lookup"><span data-stu-id="6fe98-119">hello remainder of this article discusses Resource Manager templates that use Mirosoft.DevTestLab/labs/virtualmachines.</span></span> <span data-ttu-id="6fe98-120">Questi vengono utilizzati dal lab admins tooautomate lab la creazione di VM (ad esempio, claimable VM) o la generazione di immagine finale (ad esempio, i factory immagine).</span><span class="sxs-lookup"><span data-stu-id="6fe98-120">These are used by lab admins tooautomate lab VM creation (for example, claimable VMs) or golden image generation (for example, image factory).</span></span>

<span data-ttu-id="6fe98-121">[Procedure consigliate per la creazione di modelli di Azure Resource Manager](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-template-best-practices) offre molti toohelp linee guida e suggerimenti si creano modelli di gestione risorse di Azure che sono toouse semplice e affidabile.</span><span class="sxs-lookup"><span data-stu-id="6fe98-121">[Best practices for creating Azure Resource Manager templates](https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-template-best-practices) offers many guidelines and suggestions toohelp you create Azure Resource Manager templates that are reliable and easy toouse.</span></span>

## <a name="view-and-save-a-virtual-machines-resource-manager-template"></a><span data-ttu-id="6fe98-122">Visualizzare e usare un modello di Resource Manager di Azure di una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="6fe98-122">View and save a virtual machine's Resource Manager template</span></span>
1. <span data-ttu-id="6fe98-123">Seguire i passaggi hello in [creare la prima macchina virtuale in un ambiente lab](devtest-lab-create-first-vm.md) toobegin la creazione di una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="6fe98-123">Follow hello steps at [Create your first VM in a lab](devtest-lab-create-first-vm.md) toobegin creating a virtual machine.</span></span>
1. <span data-ttu-id="6fe98-124">Immettere le informazioni di hello necessario per la macchina virtuale e aggiungere eventuali elementi desiderato per questa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="6fe98-124">Enter hello required information for your virtual machine and add any artifacts you want for this VM.</span></span>
1. <span data-ttu-id="6fe98-125">Nella parte inferiore di hello della finestra di hello Configura le impostazioni, scegliere **modello ARM vista**.</span><span class="sxs-lookup"><span data-stu-id="6fe98-125">At hello bottom of hello Configure settings window, choose **View ARM template**.</span></span>

   ![Pulsante View ARM template](./media/devtest-lab-use-arm-template/devtestlab-lab-view-rm-template.png)
1. <span data-ttu-id="6fe98-127">Copiare e salvare hello Gestione risorse modello toouse toocreate successive un'altra macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="6fe98-127">Copy and save hello Resource Manager template toouse later toocreate another virtual machine.</span></span>

   ![Toosave modello di gestione risorse per un utilizzo successivo](./media/devtest-lab-use-arm-template/devtestlab-lab-copy-rm-template.png)

<span data-ttu-id="6fe98-129">Dopo aver salvato il modello di gestione risorse di hello, è necessario aggiornare sezione parametri hello del modello di hello prima che sia possibile utilizzarlo.</span><span class="sxs-lookup"><span data-stu-id="6fe98-129">After you have saved hello Resource Manager template, you must update hello parameters section of hello template before you can use it.</span></span> <span data-ttu-id="6fe98-130">È possibile creare un parameter.json che consente di personalizzare solo i parametri di hello, di fuori di modello di gestione risorse hello effettivo.</span><span class="sxs-lookup"><span data-stu-id="6fe98-130">You can create a parameter.json that customizes just hello parameters, outside of hello actual Resource Manager template.</span></span> 

![Personalizzare i parametri usando un file JSON](./media/devtest-lab-use-arm-template/devtestlab-lab-custom-params.png)

## <a name="deploy-a-resource-manager-template-toocreate-a-vm"></a><span data-ttu-id="6fe98-132">Distribuire un toocreate di modello una macchina virtuale di gestione risorse</span><span class="sxs-lookup"><span data-stu-id="6fe98-132">Deploy a Resource Manager template toocreate a VM</span></span>
<span data-ttu-id="6fe98-133">Dopo aver salvato un modello di gestione delle risorse e personalizzarlo per le proprie esigenze, è possibile utilizzare la creazione di VM tooautomate.</span><span class="sxs-lookup"><span data-stu-id="6fe98-133">After you have saved a Resource Manager template and customized it for your needs, you can use it tooautomate VM creation.</span></span> <span data-ttu-id="6fe98-134">[Distribuire le risorse e modelli di gestione risorse di Azure PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy) viene descritto come toouse Azure PowerShell con Gestione risorse modelli toodeploy tooAzure le risorse.</span><span class="sxs-lookup"><span data-stu-id="6fe98-134">[Deploy resources with Resource Manager templates and Azure PowerShell](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy) describes how toouse Azure PowerShell with Resource Manager templates toodeploy your resources tooAzure.</span></span> <span data-ttu-id="6fe98-135">[Distribuire le risorse con i modelli di gestione risorse e CLI di Azure](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy-cli) viene descritto come toouse CLI di Azure con Gestione risorse modelli toodeploy tooAzure le risorse.</span><span class="sxs-lookup"><span data-stu-id="6fe98-135">[Deploy resources with Resource Manager templates and Azure CLI](https://docs.microsoft.com/azure/azure-resource-manager/resource-group-template-deploy-cli) describes how toouse Azure CLI with Resource Manager templates toodeploy your resources tooAzure.</span></span>

> [!NOTE]
> <span data-ttu-id="6fe98-136">Solo un utente con autorizzazioni di proprietario lab può creare macchine virtuali da un modello di Resource Manager usando Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6fe98-136">Only a user with lab owner permissions can create VMs from a Resource Manager template by using Azure PowerShell.</span></span> <span data-ttu-id="6fe98-137">Se si desidera la creazione di VM tooautomate utilizzando un modello di gestione delle risorse e si dispone solo delle autorizzazioni utente, è possibile utilizzare hello [ **creare vm lab az** comando hello CLI](https://docs.microsoft.com/cli/azure/lab/vm#create).</span><span class="sxs-lookup"><span data-stu-id="6fe98-137">If you want tooautomate VM creation using a Resource Manager template and you only have user permissions, you can use hello [**az lab vm create** command in hello CLI](https://docs.microsoft.com/cli/azure/lab/vm#create).</span></span>

### <a name="next-steps"></a><span data-ttu-id="6fe98-138">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="6fe98-138">Next steps</span></span>
* <span data-ttu-id="6fe98-139">Informazioni su come troppo[creare ambienti multi-VM con modelli di gestione risorse](devtest-lab-create-environment-from-arm.md).</span><span class="sxs-lookup"><span data-stu-id="6fe98-139">Learn how too[Create multi-VM environments with Resource Manager templates](devtest-lab-create-environment-from-arm.md).</span></span>
* <span data-ttu-id="6fe98-140">Esplorare altri modelli di gestione risorse di avvio rapido per l'automazione di DevTest Labs da hello [pubblica repository GitHub di DevTest Labs](https://github.com/Azure/azure-quickstart-templates).</span><span class="sxs-lookup"><span data-stu-id="6fe98-140">Explore more quick-start Resource Manager templates for DevTest Labs automation from hello [public DevTest Labs GitHub repo](https://github.com/Azure/azure-quickstart-templates).</span></span>
