---
title: Informazioni di riferimento sui token di Azure Active Directory 2.0 | Documentazione Microsoft
description: Tipi di token e attestazioni generati dall'endpoint di Azure AD 2.0.
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: dc58c282-9684-4b38-b151-f3e079f034fd
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/07/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: a3611a239fe044cf1b953220a6e96b0e101f47a4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="azure-active-directory-v20-tokens-reference"></a><span data-ttu-id="52645-103">Informazioni di riferimento sui token di Azure Active Directory 2.0</span><span class="sxs-lookup"><span data-stu-id="52645-103">Azure Active Directory v2.0 tokens reference</span></span>
<span data-ttu-id="52645-104">L'endpoint di Azure Active Directory (Azure AD) 2.0 genera tipi diversi di token di sicurezza in ogni [flusso di autenticazione](active-directory-v2-flows.md).</span><span class="sxs-lookup"><span data-stu-id="52645-104">The Azure Active Directory (Azure AD) v2.0 endpoint emits several types of security tokens in each [authentication flow](active-directory-v2-flows.md).</span></span> <span data-ttu-id="52645-105">Questo articolo di riferimento descrive il formato, le caratteristiche di sicurezza e i contenuti di ogni tipo di token.</span><span class="sxs-lookup"><span data-stu-id="52645-105">This reference describes the format, security characteristics, and contents of each type of token.</span></span>

> [!NOTE]
> <span data-ttu-id="52645-106">Non tutti gli scenari e le funzionalità di Azure Active Directory sono supportati dall'endpoint v2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-106">The v2.0 endpoint does not support all Azure Active Directory scenarios and features.</span></span> <span data-ttu-id="52645-107">Per determinare se è necessario usare l'endpoint 2.0, vedere l'articolo relativo alle [limitazioni della versione 2.0](active-directory-v2-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="52645-107">To determine whether you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
>
>

## <a name="types-of-tokens"></a><span data-ttu-id="52645-108">Tipi di token</span><span class="sxs-lookup"><span data-stu-id="52645-108">Types of tokens</span></span>
<span data-ttu-id="52645-109">L'endpoint 2.0 supporta il [protocollo di autorizzazione OAuth 2.0](active-directory-v2-protocols.md), che usa sia token di accesso che token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="52645-109">The v2.0 endpoint supports the [OAuth 2.0 authorization protocol](active-directory-v2-protocols.md), which uses access tokens and refresh tokens.</span></span> <span data-ttu-id="52645-110">L'endpoint 2.0 supporta anche l'autenticazione e l'accesso tramite [OpenID Connect](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="52645-110">The v2.0 endpoint also supports authentication and sign-in via [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="52645-111">OpenID Connect introduce un terzo tipo di token, il token ID.</span><span class="sxs-lookup"><span data-stu-id="52645-111">OpenID Connect introduces a third type of token, the ID token.</span></span> <span data-ttu-id="52645-112">Ognuno di questi token viene rappresentato come *token di connessione*.</span><span class="sxs-lookup"><span data-stu-id="52645-112">Each of these tokens is represented as a *bearer* token.</span></span>

<span data-ttu-id="52645-113">Un token di connessione è un token di sicurezza leggero che consente al portatore di accedere a una risorsa protetta.</span><span class="sxs-lookup"><span data-stu-id="52645-113">A bearer token is a lightweight security token that grants the bearer access to a protected resource.</span></span> <span data-ttu-id="52645-114">Per "portatore" si intende qualsiasi parte che possa presentare il token.</span><span class="sxs-lookup"><span data-stu-id="52645-114">The bearer is any party that can present the token.</span></span> <span data-ttu-id="52645-115">Anche se la ricezione del token di connessione è subordinata al processo di autenticazione in Azure AD, se non vengono adottate le misure necessarie per proteggere il token durante la trasmissione e l'archiviazione, è possibile che venga intercettato e usato da parti non autorizzate.</span><span class="sxs-lookup"><span data-stu-id="52645-115">Although a party must authenticate with Azure AD to receive the bearer token, if steps are not taken to secure the token during transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="52645-116">Alcuni token di sicurezza hanno un meccanismo predefinito che ne impedisce l'uso da parti non autorizzate, mentre i token di connessione non lo hanno</span><span class="sxs-lookup"><span data-stu-id="52645-116">Some security tokens have a built-in mechanism to prevent unauthorized parties from using them, but bearer tokens do not.</span></span> <span data-ttu-id="52645-117">e devono essere trasportati usando un canale protetto, ad esempio il protocollo Transport Layer Security (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="52645-117">Bearer tokens must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="52645-118">Se un token di connessione viene trasmesso senza questo tipo di sicurezza, un utente malintenzionato potrebbe ricorrere a un attacco man-in-the-middle per acquisire il token e usarlo per l'accesso non autorizzato a una risorsa protetta.</span><span class="sxs-lookup"><span data-stu-id="52645-118">If a bearer token is transmitted without this type of security, a malicious party could use a "man-in-the-middle attack" to acquire the token and use it for unauthorized access to a protected resource.</span></span> <span data-ttu-id="52645-119">Gli stessi principi di sicurezza si applicano quando un token di connessione viene archiviato o memorizzato nella cache per un uso futuro.</span><span class="sxs-lookup"><span data-stu-id="52645-119">The same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="52645-120">Assicurarsi sempre che l'app trasmetta e archivi i token di connessione in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="52645-120">Always ensure that your app securely transmits and stores bearer tokens.</span></span> <span data-ttu-id="52645-121">Per altre considerazioni sulla sicurezza dei token di connessione, vedere la [sezione 5 della specifica RFC 6750](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="52645-121">For more security considerations for bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="52645-122">Molti dei token generati dall'endpoint 2.0 vengono implementati come token JWT (token JSON Web).</span><span class="sxs-lookup"><span data-stu-id="52645-122">Many of the tokens issued by the v2.0 endpoint are implemented as JSON Web Tokens (JWTs).</span></span> <span data-ttu-id="52645-123">Un token JWT è una soluzione compatta e sicura per gli URL per trasferire informazioni tra due parti.</span><span class="sxs-lookup"><span data-stu-id="52645-123">A JWT is a compact, URL-safe way to transfer information between two parties.</span></span> <span data-ttu-id="52645-124">Le informazioni contenute in un token JWT sono dette *attestazioni*.</span><span class="sxs-lookup"><span data-stu-id="52645-124">The information in a JWT is called a *claim*.</span></span> <span data-ttu-id="52645-125">Si tratta di asserzioni di informazioni relative alla connessione e all'oggetto del token.</span><span class="sxs-lookup"><span data-stu-id="52645-125">It's an assertion of information about the bearer and subject of the token.</span></span> <span data-ttu-id="52645-126">Le attestazioni in un token JWT sono oggetti JavaScript Object Notation (JSON) codificati e serializzati per la trasmissione.</span><span class="sxs-lookup"><span data-stu-id="52645-126">The claims in a JWT are JavaScript Object Notation (JSON) objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="52645-127">Dato che i token JWT generati dall'endpoint 2.0 sono firmati, ma non crittografati, è possibile esaminarne facilmente i contenuti a scopo di debug.</span><span class="sxs-lookup"><span data-stu-id="52645-127">Because the JWTs issued by the v2.0 endpoint are signed but not encrypted, you can easily inspect the contents of a JWT for debugging purposes.</span></span> <span data-ttu-id="52645-128">Per altre informazioni sui token JWT, vedere le [specifiche dei token JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="52645-128">For more information about JWTs, see the [JWT specification](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="52645-129">Token ID</span><span class="sxs-lookup"><span data-stu-id="52645-129">ID tokens</span></span>
<span data-ttu-id="52645-130">I token ID sono un tipo di token di sicurezza di accesso che l'app riceve quando esegue l'autenticazione usando [OpenID Connect](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="52645-130">An ID token is a form of sign-in security token that your app receives when it performs authentication by using [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="52645-131">Vengono rappresentati come token [JWT](#types-of-tokens) e contengono attestazioni che è possibile usare per l'accesso degli utenti all'app.</span><span class="sxs-lookup"><span data-stu-id="52645-131">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to sign the user in to your app.</span></span> <span data-ttu-id="52645-132">Le attestazioni nei token ID possono essere usate in diversi modi.</span><span class="sxs-lookup"><span data-stu-id="52645-132">You can use the claims in an ID token in various ways.</span></span> <span data-ttu-id="52645-133">In genere, gli amministratori usano i token ID per visualizzare informazioni sull'account o per prendere decisioni relative al controllo di accesso in un'app.</span><span class="sxs-lookup"><span data-stu-id="52645-133">Typically, admins use ID tokens to display account information or to make access control decisions in an app.</span></span> <span data-ttu-id="52645-134">L'endpoint 2.0 genera solo un tipo di token ID che dispone di un set coerente di attestazioni, indipendentemente dal tipo di utente che ha eseguito l'accesso.</span><span class="sxs-lookup"><span data-stu-id="52645-134">The v2.0 endpoint issues only one type of ID token, which has a consistent set of claims, regardless of the type of user that is signed in.</span></span> <span data-ttu-id="52645-135">Il formato e il contenuto dei token ID sono identici per gli utenti con account Microsoft personali e per quelli con account aziendali o dell'istituto di istruzione.</span><span class="sxs-lookup"><span data-stu-id="52645-135">The format and content of ID tokens are the same for personal Microsoft account users and for work or school accounts.</span></span>

<span data-ttu-id="52645-136">Attualmente i token ID sono firmati, ma non crittografati.</span><span class="sxs-lookup"><span data-stu-id="52645-136">Currently, ID tokens are signed but not encrypted.</span></span> <span data-ttu-id="52645-137">Quando l'app riceve un token ID, deve [convalidare la firma](#validating-tokens) per dimostrare l'autenticità del token e convalidare alcune attestazioni nel token per dimostrarne la validità.</span><span class="sxs-lookup"><span data-stu-id="52645-137">When your app receives an ID token, it must [validate the signature](#validating-tokens) to prove the token's authenticity and validate a few claims in the token to prove its validity.</span></span> <span data-ttu-id="52645-138">A seconda dei requisiti dello scenario, le attestazioni convalidate da un'app possono variare, ma l'app deve eseguire alcune [operazioni comuni di convalida delle attestazioni](#validating-tokens) in ogni scenario.</span><span class="sxs-lookup"><span data-stu-id="52645-138">The claims validated by an app vary depending on scenario requirements, but your app must perform some [common claim validations](#validating-tokens) in every scenario.</span></span>

<span data-ttu-id="52645-139">Le sezioni seguenti contengono informazioni dettagliate sulle attestazioni nei token ID e un token ID di esempio.</span><span class="sxs-lookup"><span data-stu-id="52645-139">We give you the full details about claims in ID tokens in the following sections, in addition to a sample ID token.</span></span> <span data-ttu-id="52645-140">Si noti che le attestazioni nei token ID non vengono restituite in un ordine specifico.</span><span class="sxs-lookup"><span data-stu-id="52645-140">Note that claims in ID tokens are not returned in a specific order.</span></span> <span data-ttu-id="52645-141">Si noti anche che possono essere introdotte nuove attestazioni nei token ID in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="52645-141">Also, new claims can be introduced into ID tokens at any time.</span></span> <span data-ttu-id="52645-142">L'introduzione di nuove attestazioni non deve interrompere il funzionamento dell'app.</span><span class="sxs-lookup"><span data-stu-id="52645-142">Your app should not break when new claims are introduced.</span></span> <span data-ttu-id="52645-143">L'elenco seguente include le attestazioni che l'app può interpretare in modo affidabile allo stato attuale.</span><span class="sxs-lookup"><span data-stu-id="52645-143">The following list includes the claims that your app currently can reliably interpret.</span></span> <span data-ttu-id="52645-144">Per informazioni più dettagliate, vedere la [specifica di OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="52645-144">You can find more details in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="52645-145">Token ID di esempio</span><span class="sxs-lookup"><span data-stu-id="52645-145">Sample ID token</span></span>
```
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSJ9.eyJhdWQiOiI2NzMxZGU3Ni0xNGE2LTQ5YWUtOTdiYy02ZWJhNjkxNDM5MWUiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vYjk0MTk4MTgtMDlhZi00OWMyLWIwYzMtNjUzYWRjMWYzNzZlL3YyLjAiLCJpYXQiOjE0NTIyODUzMzEsIm5iZiI6MTQ1MjI4NTMzMSwiZXhwIjoxNDUyMjg5MjMxLCJuYW1lIjoiQmFiZSBSdXRoIiwibm9uY2UiOiIxMjM0NSIsIm9pZCI6ImExZGJkZGU4LWU0ZjktNDU3MS1hZDkzLTMwNTllMzc1MGQyMyIsInByZWZlcnJlZF91c2VybmFtZSI6InRoZWdyZWF0YmFtYmlub0BueXkub25taWNyb3NvZnQuY29tIiwic3ViIjoiTUY0Zi1nZ1dNRWppMTJLeW5KVU5RWnBoYVVUdkxjUXVnNWpkRjJubDAxUSIsInRpZCI6ImI5NDE5ODE4LTA5YWYtNDljMi1iMGMzLTY1M2FkYzFmMzc2ZSIsInZlciI6IjIuMCJ9.p_rYdrtJ1oCmgDBggNHB9O38KTnLCMGbMDODdirdmZbmJcTHiZDdtTc-hguu3krhbtOsoYM2HJeZM3Wsbp_YcfSKDY--X_NobMNsxbT7bqZHxDnA2jTMyrmt5v2EKUnEeVtSiJXyO3JWUq9R0dO-m4o9_8jGP6zHtR62zLaotTBYHmgeKpZgTFB9WtUq8DVdyMn_HSvQEfz-LWqckbcTwM_9RNKoGRVk38KChVJo4z5LkksYRarDo8QgQ7xEKmYmPvRr_I7gvM2bmlZQds2OeqWLB1NSNbFZqyFOCgYn3bAQ-nEQSKwBaA36jYGPOVG2r2Qv1uKcpSOxzxaQybzYpQ
```

> [!TIP]
> <span data-ttu-id="52645-146">A scopo di esercitazione, provare a verificare le attestazioni nel token ID di esempio incollando quest'ultimo in [calebb.net](http://calebb.net/).</span><span class="sxs-lookup"><span data-stu-id="52645-146">For practice, to inspect the claims in the sample ID token, paste the sample ID token into [calebb.net](http://calebb.net/).</span></span>
>
>

#### <a name="claims-in-id-tokens"></a><span data-ttu-id="52645-147">Attestazioni nei token ID</span><span class="sxs-lookup"><span data-stu-id="52645-147">Claims in ID tokens</span></span>
| <span data-ttu-id="52645-148">Nome</span><span class="sxs-lookup"><span data-stu-id="52645-148">Name</span></span> | <span data-ttu-id="52645-149">Attestazione</span><span class="sxs-lookup"><span data-stu-id="52645-149">Claim</span></span> | <span data-ttu-id="52645-150">Valore di esempio</span><span class="sxs-lookup"><span data-stu-id="52645-150">Example value</span></span> | <span data-ttu-id="52645-151">Descrizione</span><span class="sxs-lookup"><span data-stu-id="52645-151">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="52645-152">audience</span><span class="sxs-lookup"><span data-stu-id="52645-152">audience</span></span> |`aud` |`6731de76-14a6-49ae-97bc-6eba6914391e` |<span data-ttu-id="52645-153">Identifica il destinatario del token.</span><span class="sxs-lookup"><span data-stu-id="52645-153">Identifies the intended recipient of the token.</span></span> <span data-ttu-id="52645-154">Nei token ID il destinatario è l'ID applicazione dell'app, assegnato a quest'ultima nel portale di registrazione delle applicazioni di Microsoft.</span><span class="sxs-lookup"><span data-stu-id="52645-154">In ID tokens, the audience is your app's Application ID, assigned to your app in the Microsoft Application Registration Portal.</span></span> <span data-ttu-id="52645-155">L'app deve convalidare questo valore e rifiutare il token, se il valore non corrisponde.</span><span class="sxs-lookup"><span data-stu-id="52645-155">Your app should validate this value, and reject the token if the value does not match.</span></span> |
| <span data-ttu-id="52645-156">autorità di certificazione</span><span class="sxs-lookup"><span data-stu-id="52645-156">issuer</span></span> |`iss` |`https://login.microsoftonline.com/b9419818-09af-49c2-b0c3-653adc1f376e/v2.0 ` |<span data-ttu-id="52645-157">Identifica il servizio token di sicurezza (STS) che costruisce e restituisce il token e il tenant di Azure AD in cui l'utente è stato autenticato.</span><span class="sxs-lookup"><span data-stu-id="52645-157">Identifies the security token service (STS) that constructs and returns the token, and the Azure AD tenant in which the user was authenticated.</span></span> <span data-ttu-id="52645-158">L'app deve convalidare l'attestazione Autorità di certificazione per assicurarsi che il token sia stato fornito dall'endpoint 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-158">Your app should validate the issuer claim to ensure that the token came from the v2.0 endpoint.</span></span> <span data-ttu-id="52645-159">Deve usare la parte GUID dell'attestazione per limitare il set di tenant che può accedere all'app.</span><span class="sxs-lookup"><span data-stu-id="52645-159">It also should use the GUID portion of the claim to restrict the set of tenants that can sign in to the app.</span></span> <span data-ttu-id="52645-160">Il GUID che indica che l'utente è un utente consumer di un account Microsoft è `9188040d-6c67-4c5b-b112-36a304b66dad`.</span><span class="sxs-lookup"><span data-stu-id="52645-160">The GUID that indicates that the user is a consumer user from a Microsoft account is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> |
| <span data-ttu-id="52645-161">ora di emissione</span><span class="sxs-lookup"><span data-stu-id="52645-161">issued at</span></span> |`iat` |`1452285331` |<span data-ttu-id="52645-162">Ora in cui il token è stato generato, rappresentata dal valore epoch time.</span><span class="sxs-lookup"><span data-stu-id="52645-162">The time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="52645-163">scadenza</span><span class="sxs-lookup"><span data-stu-id="52645-163">expiration time</span></span> |`exp` |`1452289231` |<span data-ttu-id="52645-164">Ora in cui il token non è più valido, rappresentata dal valore epoch time.</span><span class="sxs-lookup"><span data-stu-id="52645-164">The time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="52645-165">L'app deve usare questa attestazione per verificare la validità della durata del token.</span><span class="sxs-lookup"><span data-stu-id="52645-165">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="52645-166">non prima</span><span class="sxs-lookup"><span data-stu-id="52645-166">not before</span></span> |`nbf` |`1452285331` |<span data-ttu-id="52645-167">L’ora in cui il token diventa valido, rappresentata dal valore epoch time.</span><span class="sxs-lookup"><span data-stu-id="52645-167">The time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="52645-168">È in genere uguale all’ora di emissione.</span><span class="sxs-lookup"><span data-stu-id="52645-168">It is usually the same as the issuance time.</span></span> <span data-ttu-id="52645-169">L'app deve usare questa attestazione per verificare la validità della durata del token.</span><span class="sxs-lookup"><span data-stu-id="52645-169">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="52645-170">version</span><span class="sxs-lookup"><span data-stu-id="52645-170">version</span></span> |`ver` |`2.0` |<span data-ttu-id="52645-171">Versione del token ID, come definito da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="52645-171">The version of the ID token, as defined by Azure AD.</span></span> <span data-ttu-id="52645-172">Per l'endpoint 2.0 il valore è `2.0`.</span><span class="sxs-lookup"><span data-stu-id="52645-172">For the v2.0 endpoint, the value is `2.0`.</span></span> |
| <span data-ttu-id="52645-173">ID tenant</span><span class="sxs-lookup"><span data-stu-id="52645-173">tenant ID</span></span> |`tid` |`b9419818-09af-49c2-b0c3-653adc1f376e` |<span data-ttu-id="52645-174">Valore GUID che rappresenta il tenant di Azure AD da cui proviene l'utente.</span><span class="sxs-lookup"><span data-stu-id="52645-174">A GUID that represents the Azure AD tenant that the user is from.</span></span> <span data-ttu-id="52645-175">Per gli account aziendali e dell'istituto di istruzione, il GUID è l'ID tenant non modificabile dell'organizzazione a cui appartiene l'utente.</span><span class="sxs-lookup"><span data-stu-id="52645-175">For work and school accounts, the GUID is the immutable tenant ID of the organization that the user belongs to.</span></span> <span data-ttu-id="52645-176">Per gli account personali il valore è `9188040d-6c67-4c5b-b112-36a304b66dad`.</span><span class="sxs-lookup"><span data-stu-id="52645-176">For personal accounts, the value is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> <span data-ttu-id="52645-177">Per ricevere questa attestazione, è necessario l'ambito `profile` .</span><span class="sxs-lookup"><span data-stu-id="52645-177">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="52645-178">hash del codice</span><span class="sxs-lookup"><span data-stu-id="52645-178">code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="52645-179">L'hash del codice è incluso in un token ID solo quando quest'ultimo viene generato con un codice di autorizzazione di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-179">The code hash is included in ID tokens only when the ID token is issued with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="52645-180">Può essere usato per convalidare l'autenticità di un codice di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="52645-180">It can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="52645-181">Per informazioni dettagliate su come eseguire la convalida, vedere la [specifica di OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="52645-181">For details about performing this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="52645-182">hash del token di accesso</span><span class="sxs-lookup"><span data-stu-id="52645-182">access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="52645-183">L'hash del token di accesso è incluso in un token ID solo quando quest'ultimo viene generato con un token di accesso di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-183">The access token hash is included in ID tokens only when the ID token is issued with an OAuth 2.0 access token.</span></span> <span data-ttu-id="52645-184">Può essere usato per convalidare l'autenticità di un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="52645-184">It can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="52645-185">Per informazioni dettagliate su come eseguire la convalida, vedere la [specifica di OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="52645-185">For details about performing this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="52645-186">nonce</span><span class="sxs-lookup"><span data-stu-id="52645-186">nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="52645-187">L'attestazione Nonce è una strategia per ridurre gli attacchi di riproduzione del token.</span><span class="sxs-lookup"><span data-stu-id="52645-187">The nonce is a strategy for mitigating token replay attacks.</span></span> <span data-ttu-id="52645-188">L'app può specificare un'attestazione Nonce in una richiesta di autorizzazione usando il parametro di query `nonce` .</span><span class="sxs-lookup"><span data-stu-id="52645-188">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="52645-189">Il valore specificato nella richiesta viene generato nell'attestazione `nonce` del token ID, senza essere modificato.</span><span class="sxs-lookup"><span data-stu-id="52645-189">The value you provide in the request is emitted in the ID token's `nonce` claim, unmodified.</span></span> <span data-ttu-id="52645-190">L'app può verificare il valore rispetto al valore specificato nella richiesta che associa la sessione dell'app a un token ID specifico.</span><span class="sxs-lookup"><span data-stu-id="52645-190">Your app can verify the value against the value it specified on the request, which associates the app's session with a specific ID token.</span></span> <span data-ttu-id="52645-191">L'app deve eseguire la convalida durante il processo di convalida del token ID.</span><span class="sxs-lookup"><span data-stu-id="52645-191">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="52645-192">name</span><span class="sxs-lookup"><span data-stu-id="52645-192">name</span></span> |`name` |`Babe Ruth` |<span data-ttu-id="52645-193">Questa attestazione fornisce un valore leggibile che identifica l'oggetto del token.</span><span class="sxs-lookup"><span data-stu-id="52645-193">The name claim provides a human-readable value that identifies the subject of the token.</span></span> <span data-ttu-id="52645-194">Il valore potrebbe non essere univoco, è modificabile e può essere usato solo per scopi di visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="52645-194">The value is not guaranteed to be unique, it is mutable, and it's designed to be used only for display purposes.</span></span> <span data-ttu-id="52645-195">Per ricevere questa attestazione, è necessario l'ambito `profile` .</span><span class="sxs-lookup"><span data-stu-id="52645-195">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="52645-196">email</span><span class="sxs-lookup"><span data-stu-id="52645-196">email</span></span> |`email` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="52645-197">Indirizzo di posta elettronica primario associato all'account utente, se presente.</span><span class="sxs-lookup"><span data-stu-id="52645-197">The primary email address associated with the user account, if one exists.</span></span> <span data-ttu-id="52645-198">Il valore è modificabile e può variare nel tempo.</span><span class="sxs-lookup"><span data-stu-id="52645-198">Its value is mutable and might change over time.</span></span> <span data-ttu-id="52645-199">Per ricevere questa attestazione, è necessario l'ambito `email` .</span><span class="sxs-lookup"><span data-stu-id="52645-199">The `email` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="52645-200">nome utente preferito</span><span class="sxs-lookup"><span data-stu-id="52645-200">preferred username</span></span> |`preferred_username` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="52645-201">Nome utente primario che rappresenta l'utente nell'endpoint 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-201">The primary username that represents the user in the v2.0 endpoint.</span></span> <span data-ttu-id="52645-202">Potrebbe trattarsi di un indirizzo di posta elettronica, di un numero di telefono o di un nome utente generico senza un formato specificato.</span><span class="sxs-lookup"><span data-stu-id="52645-202">It could be an email address, phone number, or a generic username without a specified format.</span></span> <span data-ttu-id="52645-203">Il valore è modificabile e può variare nel tempo.</span><span class="sxs-lookup"><span data-stu-id="52645-203">Its value is mutable and might change over time.</span></span> <span data-ttu-id="52645-204">Per ricevere questa attestazione, è necessario l'ambito `profile` .</span><span class="sxs-lookup"><span data-stu-id="52645-204">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="52645-205">subject</span><span class="sxs-lookup"><span data-stu-id="52645-205">subject</span></span> |`sub` |`MF4f-ggWMEji12KynJUNQZphaUTvLcQug5jdF2nl01Q` | <span data-ttu-id="52645-206">Entità su cui il token asserisce informazioni, ad esempio l'utente di un'app.</span><span class="sxs-lookup"><span data-stu-id="52645-206">The principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="52645-207">Questo valore non è modificabile e non può essere riassegnato o riutilizzato.</span><span class="sxs-lookup"><span data-stu-id="52645-207">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="52645-208">Può essere usato per eseguire controlli di autorizzazione in modo sicuro, ad esempio quando il token viene usato per accedere a una risorsa oppure come chiave nelle tabelle di database.</span><span class="sxs-lookup"><span data-stu-id="52645-208">It can be used to perform authorization checks safely, such as when the token is used to access a resource, and can be used as a key in database tables.</span></span> <span data-ttu-id="52645-209">Dato che il soggetto è sempre presente nei token generati da Azure AD, è consigliabile usare questo valore in un sistema di autorizzazione di uso generico.</span><span class="sxs-lookup"><span data-stu-id="52645-209">Because the subject is always present in the tokens that Azure AD issues, we recommend using this value in a general-purpose authorization system.</span></span> <span data-ttu-id="52645-210">L'oggetto è tuttavia un identificatore pairwise univoco per un ID di applicazione specifico.</span><span class="sxs-lookup"><span data-stu-id="52645-210">The subject is, however, a pairwise identifier - it is unique to a particular application ID.</span></span>  <span data-ttu-id="52645-211">Se quindi un singolo utente accede a due app diverse usando due ID client differenti, queste app riceveranno due valori differenti per l'attestazione dell'oggetto.</span><span class="sxs-lookup"><span data-stu-id="52645-211">Therefore, if a single user signs into two different apps using two different client IDs, those apps will receive two different values for the subject claim.</span></span>  <span data-ttu-id="52645-212">Questa condizione può non essere appropriata a seconda dei requisiti a livello di architettura e di privacy.</span><span class="sxs-lookup"><span data-stu-id="52645-212">This may or may not be desired depending on your architecture and privacy requirements.</span></span> |
| <span data-ttu-id="52645-213">ID oggetto</span><span class="sxs-lookup"><span data-stu-id="52645-213">object ID</span></span> |`oid` |`a1dbdde8-e4f9-4571-ad93-3059e3750d23` | <span data-ttu-id="52645-214">Identificatore non modificabile per un oggetto nel sistema di identità Microsoft, in questo caso, un account utente.</span><span class="sxs-lookup"><span data-stu-id="52645-214">The immutable identifier for an object in the Microsoft identity system, in this case, a user account.</span></span>  <span data-ttu-id="52645-215">Può essere usato anche per eseguire i controlli di autorizzazioni in modo sicuro e come chiave nelle tabelle di database.</span><span class="sxs-lookup"><span data-stu-id="52645-215">It can also be used to perform authorization checks safely and as a key in database tables.</span></span> <span data-ttu-id="52645-216">Questo ID identifica in modo univoco l'utente nelle applicazioni; due applicazioni differenti che consentono l'accesso dello stesso utente riceveranno lo stesso valore nell'attestazione `oid`.</span><span class="sxs-lookup"><span data-stu-id="52645-216">This ID uniquely identifies the user across applications - two different applications signing in the same user will receive the same value in the `oid` claim.</span></span>  <span data-ttu-id="52645-217">Ciò significa che può essere usato quando si eseguono query in Microsoft Online Services, ad esempio Microsoft Graph.</span><span class="sxs-lookup"><span data-stu-id="52645-217">This means that it can be used when making queries to Microsoft online services, such as the Microsoft Graph.</span></span>  <span data-ttu-id="52645-218">Microsoft Graph restituirà l'ID come proprietà `id` per un determinato account utente.</span><span class="sxs-lookup"><span data-stu-id="52645-218">The Microsoft Graph will return this ID as the `id` property for a given user account.</span></span>  <span data-ttu-id="52645-219">Poiché `oid` consente a più app di correlare utenti, per ricevere questa attestazione è necessario l'ambito `profile`.</span><span class="sxs-lookup"><span data-stu-id="52645-219">Because the `oid` allows multiple apps to correlate users, the `profile` scope is required in order to receive this claim.</span></span> <span data-ttu-id="52645-220">Si noti che se un singolo utente è presente in più tenant, l'utente conterrà un ID oggetto diverso in ogni tenant; vengono considerati account diversi, anche se l'utente accede a ogni account con le stesse credenziali.</span><span class="sxs-lookup"><span data-stu-id="52645-220">Note that if a single user exists in multiple tenants, the user will contain a different object ID in each tenant - they are considered different accounts, even though the user logs into each account with the same credentials.</span></span> |

### <a name="access-tokens"></a><span data-ttu-id="52645-221">Token di accesso</span><span class="sxs-lookup"><span data-stu-id="52645-221">Access tokens</span></span>
<span data-ttu-id="52645-222">Attualmente, i token di accesso generati dall'endpoint 2.0 possono essere utilizzati solo dai servizi Microsoft.</span><span class="sxs-lookup"><span data-stu-id="52645-222">Currently, access tokens issued by the v2.0 endpoint can be consumed only by Microsoft Services.</span></span> <span data-ttu-id="52645-223">Le app non devono eseguire la convalida o l'ispezione dei token di accesso per gli scenari attualmente supportati.</span><span class="sxs-lookup"><span data-stu-id="52645-223">Your apps shouldn't need to perform any validation or inspection of access tokens for any of the currently supported scenarios.</span></span> <span data-ttu-id="52645-224">I token di accesso possono essere considerati completamente opachi.</span><span class="sxs-lookup"><span data-stu-id="52645-224">You can treat access tokens as completely opaque.</span></span> <span data-ttu-id="52645-225">Si tratta semplicemente di stringhe che l'app può passare a Microsoft nelle richieste HTTP.</span><span class="sxs-lookup"><span data-stu-id="52645-225">They are just strings that your app can pass to Microsoft in HTTP requests.</span></span>

<span data-ttu-id="52645-226">In una fase successiva, l'endpoint 2.0 introdurrà la possibilità per l'app di ricevere i token di accesso da altri client.</span><span class="sxs-lookup"><span data-stu-id="52645-226">In the near future, the v2.0 endpoint will introduce the ability for your app to receive access tokens from other clients.</span></span> <span data-ttu-id="52645-227">A quel punto, il contenuto di questo articolo di riferimento verrà aggiornato con le informazioni necessarie perché l'app possa eseguire la convalida del token di accesso e altre operazioni simili.</span><span class="sxs-lookup"><span data-stu-id="52645-227">At that time, the information in this reference topic will be updated with the information that you need for your app to perform access token validation and other similar tasks.</span></span>

<span data-ttu-id="52645-228">Quando si richiede un token di accesso dall'endpoint 2.0, quest'ultimo restituisce anche alcuni metadati relativi al token di accesso che l'app deve usare.</span><span class="sxs-lookup"><span data-stu-id="52645-228">When you request an access token from the v2.0 endpoint, the v2.0 endpoint also returns metadata about the access token for your app to use.</span></span> <span data-ttu-id="52645-229">Queste informazioni includono l'ora di scadenza del token di accesso e gli ambiti per i quali è valido.</span><span class="sxs-lookup"><span data-stu-id="52645-229">This information includes the expiry time of the access token and the scopes for which it is valid.</span></span> <span data-ttu-id="52645-230">L'app usa i metadati per eseguire operazioni di memorizzazione intelligente dei token di accesso nella cache senza la necessità di analizzare il token di accesso stesso.</span><span class="sxs-lookup"><span data-stu-id="52645-230">Your app uses this metadata to perform intelligent caching of access tokens without having to parse open the access token itself.</span></span>

### <a name="refresh-tokens"></a><span data-ttu-id="52645-231">Token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="52645-231">Refresh tokens</span></span>
<span data-ttu-id="52645-232">I token di aggiornamento sono token di sicurezza che l'app può usare per ottenere nuovi token di accesso in un flusso di OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-232">Refresh tokens are security tokens that your app can use to get new access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="52645-233">Consentono all'app di ottenere l'accesso a lungo termine alle risorse per conto dell'utente senza richiedere l'interazione con l'utente.</span><span class="sxs-lookup"><span data-stu-id="52645-233">Your app can use refresh tokens to achieve long-term access to resources on behalf of a user without requiring interaction with the user.</span></span>

<span data-ttu-id="52645-234">Si tratta di token a più risorse,</span><span class="sxs-lookup"><span data-stu-id="52645-234">Refresh tokens are multi-resource.</span></span> <span data-ttu-id="52645-235">ossia un token di aggiornamento ricevuto durante una richiesta di token per una risorsa può essere riscattato per i token di accesso a una risorsa completamente diversa.</span><span class="sxs-lookup"><span data-stu-id="52645-235">A refresh token received during a token request for one resource can be redeemed for access tokens to a completely different resource.</span></span>

<span data-ttu-id="52645-236">Per ricevere un aggiornamento in una risposta del token, l'app deve richiedere e ottenere l'ambito `offline_acesss`.</span><span class="sxs-lookup"><span data-stu-id="52645-236">To receive a refresh in a token response, your app must request and be granted the `offline_acesss` scope.</span></span> <span data-ttu-id="52645-237">Per altre informazioni sull'ambito `offline_access`, vedere l'articolo relativo a [consenso e ambiti](active-directory-v2-scopes.md).</span><span class="sxs-lookup"><span data-stu-id="52645-237">To learn more about the `offline_access` scope, see the [consent and scopes](active-directory-v2-scopes.md) article.</span></span>

<span data-ttu-id="52645-238">I token di aggiornamento sono e saranno sempre completamente opachi per l'app.</span><span class="sxs-lookup"><span data-stu-id="52645-238">Refresh tokens are, and always will be, completely opaque to your app.</span></span> <span data-ttu-id="52645-239">Vengono generati dall'endpoint 2.0 di Azure AD e possono essere controllati e interpretati solo dall'endpoint 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-239">They are issued by the Azure AD v2.0 endpoint and can only be inspected and interpreted by the v2.0 endpoint.</span></span> <span data-ttu-id="52645-240">Hanno una durata elevata, ma l'app non deve essere scritta aspettandosi che un token di aggiornamento duri per un periodo indefinito.</span><span class="sxs-lookup"><span data-stu-id="52645-240">They are long-lived, but your app should not be written to expect that a refresh token will last for any period of time.</span></span> <span data-ttu-id="52645-241">I token di aggiornamento possono essere annullati in qualsiasi momento per vari motivi.</span><span class="sxs-lookup"><span data-stu-id="52645-241">Refresh tokens can be invalidated at any moment for various reasons.</span></span> <span data-ttu-id="52645-242">L'unico modo per l'app di sapere se un token di aggiornamento è valido è tentare di riscattarlo mediante una richiesta di token all'endpoint 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-242">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to the v2.0 endpoint.</span></span>

<span data-ttu-id="52645-243">Quando si riscatta un token di aggiornamento per un nuovo token di accesso e l'app ha ottenuto l'ambito `offline_access`, si riceve un nuovo token di aggiornamento nella risposta del token.</span><span class="sxs-lookup"><span data-stu-id="52645-243">When you redeem a refresh token for a new access token (and if your app had been granted the `offline_access` scope), you receive a new refresh token in the token response.</span></span> <span data-ttu-id="52645-244">Salvare il token di aggiornamento appena generato per sostituire quello usato nella richiesta.</span><span class="sxs-lookup"><span data-stu-id="52645-244">Save the newly issued refresh token, to replace the one you used in the request.</span></span> <span data-ttu-id="52645-245">In questo modo è possibile prolungare la validità dei token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="52645-245">This guarantees that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="validating-tokens"></a><span data-ttu-id="52645-246">Convalida dei token</span><span class="sxs-lookup"><span data-stu-id="52645-246">Validating tokens</span></span>
<span data-ttu-id="52645-247">Attualmente, l'unica convalida dei token che le app devono eseguire è la convalida dei token ID.</span><span class="sxs-lookup"><span data-stu-id="52645-247">Currently, the only token validation your apps should need to perform is validating ID tokens.</span></span> <span data-ttu-id="52645-248">Per convalidare un token ID, l'app deve convalidarne la firma e le attestazioni incluse.</span><span class="sxs-lookup"><span data-stu-id="52645-248">To validate an ID token, your app should validate both the ID token's signature and the claims in the ID token.</span></span>

<!-- TODO: Link -->
<span data-ttu-id="52645-249">Microsoft fornisce esempi di codice e librerie che illustrano come gestire in modo semplice la convalida dei token.</span><span class="sxs-lookup"><span data-stu-id="52645-249">Microsoft provides libraries and code samples that show you how to easily handle token validation.</span></span> <span data-ttu-id="52645-250">Le sezioni successive illustrano il processo sottostante.</span><span class="sxs-lookup"><span data-stu-id="52645-250">In the next sections, we describe the underlying process.</span></span> <span data-ttu-id="52645-251">Sono anche disponibili varie librerie open source di terze parti per la convalida dei token JWT.</span><span class="sxs-lookup"><span data-stu-id="52645-251">Several third-party open-source libraries also are available for JWT validation.</span></span> <span data-ttu-id="52645-252">È disponibile almeno una libreria per ogni piattaforma e linguaggio.</span><span class="sxs-lookup"><span data-stu-id="52645-252">There's at least one library option for almost every platform and language.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="52645-253">convalidare la firma</span><span class="sxs-lookup"><span data-stu-id="52645-253">Validate the signature</span></span>
<span data-ttu-id="52645-254">Un token JWT contiene tre segmenti separati dal carattere `.` .</span><span class="sxs-lookup"><span data-stu-id="52645-254">A JWT contains three segments, which are separated by the `.` character.</span></span> <span data-ttu-id="52645-255">Il primo segmento è noto come *intestazione*, il secondo come *corpo* e il terzo come *firma*.</span><span class="sxs-lookup"><span data-stu-id="52645-255">The first segment is known as the *header*, the second segment is the *body*, and the third segment is the *signature*.</span></span> <span data-ttu-id="52645-256">Il segmento della firma può essere usato per convalidare l'autenticità del token ID perché venga considerato attendibile dall'app.</span><span class="sxs-lookup"><span data-stu-id="52645-256">The signature segment can be used to validate the authenticity of the ID token so that it can be trusted by your app.</span></span>

<span data-ttu-id="52645-257">I token ID vengono firmati usando algoritmi di crittografia asimmetrica standard del settore, come RSA 256.</span><span class="sxs-lookup"><span data-stu-id="52645-257">ID tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="52645-258">L'intestazione del token ID contiene informazioni sulla chiave e sul metodo di crittografia usati per firmare il token,</span><span class="sxs-lookup"><span data-stu-id="52645-258">The header of the ID token has information about the key and encryption method used to sign the token.</span></span> <span data-ttu-id="52645-259">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="52645-259">For example:</span></span>

```
{
  "typ": "JWT",
  "alg": "RS256",
  "kid": "MnC_VZcATfM5pOYiJHMba9goEKY"
}
```

<span data-ttu-id="52645-260">L'attestazione `alg` indica l'algoritmo usato per firmare il token.</span><span class="sxs-lookup"><span data-stu-id="52645-260">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="52645-261">L'attestazione `kid` indica la chiave pubblica usata per firmare il token.</span><span class="sxs-lookup"><span data-stu-id="52645-261">The `kid` claim indicates the public key that was used to sign the token.</span></span>

<span data-ttu-id="52645-262">In qualsiasi momento, l'endpoint 2.0 può firmare un token ID usando una qualsiasi coppia di chiavi pubblica-privata di un set specifico.</span><span class="sxs-lookup"><span data-stu-id="52645-262">At any time, the v2.0 endpoint might sign an ID token by using any one of a specific set of public-private key pairs.</span></span> <span data-ttu-id="52645-263">L'endpoint 2.0 ruota periodicamente il set di chiavi, quindi l'app deve essere scritta in modo da gestire automaticamente le modifiche delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="52645-263">The v2.0 endpoint periodically rotates the possible set of keys, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="52645-264">Una frequenza ragionevole per la ricerca di aggiornamenti per le chiavi pubbliche usate dall'endpoint 2.0 è di circa 24 ore.</span><span class="sxs-lookup"><span data-stu-id="52645-264">A reasonable frequency to check for updates to the public keys used by the v2.0 endpoint is every 24 hours.</span></span>

<span data-ttu-id="52645-265">È possibile acquisire i dati della chiave di firma necessari per convalidare la firma usando il documento di metadati di OpenID Connect disponibile all'indirizzo:</span><span class="sxs-lookup"><span data-stu-id="52645-265">You can acquire the signing key data that you need to validate the signature by using the OpenID Connect metadata document located at:</span></span>

```
https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration
```

> [!TIP]
> <span data-ttu-id="52645-266">Provare l'URL in un browser.</span><span class="sxs-lookup"><span data-stu-id="52645-266">Try the URL in a browser!</span></span>
>
>

<span data-ttu-id="52645-267">Il documento di metadati è un oggetto JSON contenente diverse informazioni utili, ad esempio la posizione dei vari endpoint necessari per l'autenticazione di OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="52645-267">This metadata document is a JSON object that has several useful pieces of information, such as the location of the various endpoints required for OpenID Connect authentication.</span></span>  <span data-ttu-id="52645-268">Il documento include anche un oggetto *jwks_uri* che fornisce la posizione del set di chiavi pubbliche usate per firmare i token.</span><span class="sxs-lookup"><span data-stu-id="52645-268">The document also includes a *jwks_uri*, which gives the location of the set of public keys used to sign tokens.</span></span> <span data-ttu-id="52645-269">Il documento JSON in jwks_uri include tutte le informazioni sulla chiave pubblica corrente.</span><span class="sxs-lookup"><span data-stu-id="52645-269">The JSON document located at the jwks_uri has all the public key information that is currently in use.</span></span> <span data-ttu-id="52645-270">L'app può usare l'attestazione `kid` nell'intestazione del token JWT per selezionare la chiave pubblica del documento usata per firmare un token.</span><span class="sxs-lookup"><span data-stu-id="52645-270">Your app can use the `kid` claim in the JWT header to select which public key in this document has been used to sign a token.</span></span> <span data-ttu-id="52645-271">Esegue quindi la convalida della firma usando la chiave pubblica corretta e l'algoritmo indicato.</span><span class="sxs-lookup"><span data-stu-id="52645-271">It then performs signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="52645-272">La convalida della firma non rientra nelle finalità di questo documento.</span><span class="sxs-lookup"><span data-stu-id="52645-272">Performing signature validation is outside the scope of this document.</span></span> <span data-ttu-id="52645-273">A tale scopo è possibile consultare le varie librerie open source disponibili.</span><span class="sxs-lookup"><span data-stu-id="52645-273">Many open-source libraries are available to help you with this.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="52645-274">Convalidare le attestazioni</span><span class="sxs-lookup"><span data-stu-id="52645-274">Validate the claims</span></span>
<span data-ttu-id="52645-275">Quando l'app riceve un token ID all'accesso dell'utente, deve eseguire anche alcuni controlli in base alle attestazioni nel token ID.</span><span class="sxs-lookup"><span data-stu-id="52645-275">When your app receives an ID token upon user sign-in, it should also perform a few checks against the claims in the ID token.</span></span> <span data-ttu-id="52645-276">Sono incluse, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="52645-276">These include but are not limited to:</span></span>

* <span data-ttu-id="52645-277">Attestazione **destinatari**: verifica che il token ID fosse destinato all'app.</span><span class="sxs-lookup"><span data-stu-id="52645-277">**audience** claim, to verify that the ID token was intended to be given to your app</span></span>
* <span data-ttu-id="52645-278">Attestazioni **non prima** e **scadenza**: verificano che il token ID non sia scaduto.</span><span class="sxs-lookup"><span data-stu-id="52645-278">**not before** and **expiration time** claims, to verify that the ID token has not expired</span></span>
* <span data-ttu-id="52645-279">Attestazione **autorità di certificazione**: verifica che il token sia stato rilasciato all'app dall'endpoint 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-279">**issuer** claim, to verify that the token was issued to your app by the v2.0 endpoint</span></span>
* <span data-ttu-id="52645-280">Attestazione **nonce**: per ridurre gli attacchi di riproduzione dei token.</span><span class="sxs-lookup"><span data-stu-id="52645-280">**nonce**, as a token replay attack mitigation</span></span>

<span data-ttu-id="52645-281">Per un elenco completo delle convalide di attestazione che l'app deve eseguire, vedere la [specifica di OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span><span class="sxs-lookup"><span data-stu-id="52645-281">For a full list of claim validations that your app should perform, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span></span>

<span data-ttu-id="52645-282">Per informazioni dettagliate sui valori previsti per tali attestazioni, vedere la sezione [Token ID](# ID tokens).</span><span class="sxs-lookup"><span data-stu-id="52645-282">Details of the expected values for these claims are included in the [ID tokens](# ID tokens) section.</span></span>

## <a name="token-lifetimes"></a><span data-ttu-id="52645-283">Durata dei token</span><span class="sxs-lookup"><span data-stu-id="52645-283">Token lifetimes</span></span>
<span data-ttu-id="52645-284">Le indicazioni sulla durata dei token fornite di seguito sono solo a scopo informativo</span><span class="sxs-lookup"><span data-stu-id="52645-284">We provide the following token lifetimes for your information only.</span></span> <span data-ttu-id="52645-285">e possono risultare utili per lo sviluppo e il debug delle app.</span><span class="sxs-lookup"><span data-stu-id="52645-285">The information might help you as you develop and debug apps.</span></span> <span data-ttu-id="52645-286">Le app non devono essere scritte in base a una durata specifica prevista come costante.</span><span class="sxs-lookup"><span data-stu-id="52645-286">Your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="52645-287">La durata del token può cambiare in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="52645-287">Token lifetimes can and will change at any time.</span></span>

| <span data-ttu-id="52645-288">Token</span><span class="sxs-lookup"><span data-stu-id="52645-288">Token</span></span> | <span data-ttu-id="52645-289">Durata</span><span class="sxs-lookup"><span data-stu-id="52645-289">Lifetime</span></span> | <span data-ttu-id="52645-290">Descrizione</span><span class="sxs-lookup"><span data-stu-id="52645-290">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="52645-291">Token ID (account aziendale o dell'istituto di istruzione)</span><span class="sxs-lookup"><span data-stu-id="52645-291">ID tokens (work or school accounts)</span></span> |<span data-ttu-id="52645-292">1 ora</span><span class="sxs-lookup"><span data-stu-id="52645-292">1 hour</span></span> |<span data-ttu-id="52645-293">I token ID hanno in genere una validità di un'ora.</span><span class="sxs-lookup"><span data-stu-id="52645-293">ID tokens typically are valid for 1 hour.</span></span> <span data-ttu-id="52645-294">L'app Web può usare questa durata per la gestione di una sessione con l'utente (scelta consigliata) oppure è possibile scegliere una durata di sessione completamente diversa.</span><span class="sxs-lookup"><span data-stu-id="52645-294">Your web app can use this same lifetime to maintain its own session with the user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="52645-295">Per ottenere un nuovo token ID, l'app deve eseguire una nuova richiesta di accesso all'endpoint di autorizzazione 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-295">If your app needs to get a new ID token, it needs to make a new sign-in request to the v2.0 authorize endpoint.</span></span> <span data-ttu-id="52645-296">Se l'utente ha una sessione del browser valida con l'endpoint 2.0, può non essere necessario immettere nuovamente le credenziali.</span><span class="sxs-lookup"><span data-stu-id="52645-296">If the user has a valid browser session with the v2.0 endpoint, the user might not be required to enter their credentials again.</span></span> |
| <span data-ttu-id="52645-297">Token ID (account personale)</span><span class="sxs-lookup"><span data-stu-id="52645-297">ID tokens (personal accounts)</span></span> |<span data-ttu-id="52645-298">24 ore</span><span class="sxs-lookup"><span data-stu-id="52645-298">24 hours</span></span> |<span data-ttu-id="52645-299">I token ID per gli account personali hanno in genere una validità di 24 ore.</span><span class="sxs-lookup"><span data-stu-id="52645-299">ID tokens for personal accounts typically are valid for 24 hours.</span></span> <span data-ttu-id="52645-300">L'app Web può usare questa durata per la gestione di una sessione con l'utente (scelta consigliata) oppure è possibile scegliere una durata di sessione completamente diversa.</span><span class="sxs-lookup"><span data-stu-id="52645-300">Your web app can use this same lifetime to maintain its own session with the user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="52645-301">Per ottenere un nuovo token ID, l'app deve eseguire una nuova richiesta di accesso all'endpoint di autorizzazione 2.0.</span><span class="sxs-lookup"><span data-stu-id="52645-301">If your app needs to get a new ID token, it needs to make a new sign-in request to the v2.0 authorize endpoint.</span></span> <span data-ttu-id="52645-302">Se l'utente ha una sessione del browser valida con l'endpoint 2.0, può non essere necessario immettere nuovamente le credenziali.</span><span class="sxs-lookup"><span data-stu-id="52645-302">If the user has a valid browser session with the v2.0 endpoint, the user might not be required to enter their credentials again.</span></span> |
| <span data-ttu-id="52645-303">Token di accesso (account aziendale o dell'istituto di istruzione)</span><span class="sxs-lookup"><span data-stu-id="52645-303">Access tokens (work or school accounts)</span></span> |<span data-ttu-id="52645-304">1 ora</span><span class="sxs-lookup"><span data-stu-id="52645-304">1 hour</span></span> |<span data-ttu-id="52645-305">Indicati nelle risposte del token come parte dei metadati del token.</span><span class="sxs-lookup"><span data-stu-id="52645-305">Indicated in token responses as part of the token metadata.</span></span> |
| <span data-ttu-id="52645-306">Token di accesso (account personale)</span><span class="sxs-lookup"><span data-stu-id="52645-306">Access tokens (personal accounts)</span></span> |<span data-ttu-id="52645-307">1 ora</span><span class="sxs-lookup"><span data-stu-id="52645-307">1 hour</span></span> |<span data-ttu-id="52645-308">Indicati nelle risposte del token come parte dei metadati del token.</span><span class="sxs-lookup"><span data-stu-id="52645-308">Indicated in token responses as part of the token metadata.</span></span> <span data-ttu-id="52645-309">I token di accesso generati per conto di account personali possono essere configurati con una durata diversa, ma la durata tipica è un'ora.</span><span class="sxs-lookup"><span data-stu-id="52645-309">Access tokens that are issued on behalf of personal accounts can be configured for a different lifetime, but 1 hour is typical.</span></span> |
| <span data-ttu-id="52645-310">Token di aggiornamento (account aziendale o dell'istituto di istruzione)</span><span class="sxs-lookup"><span data-stu-id="52645-310">Refresh tokens (work or school account)</span></span> |<span data-ttu-id="52645-311">Fino a 14 giorni</span><span class="sxs-lookup"><span data-stu-id="52645-311">Up to 14 days</span></span> |<span data-ttu-id="52645-312">Un singolo token di aggiornamento è valido per un periodo massimo di 14 giorni.</span><span class="sxs-lookup"><span data-stu-id="52645-312">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="52645-313">Tuttavia, il token di aggiornamento può diventare non valido in qualsiasi momento per diversi motivi, quindi l'app deve continuare a provare a usare un token di aggiornamento fino a quando non si verifica un errore o fino a quando non lo sostituisce con uno nuovo.</span><span class="sxs-lookup"><span data-stu-id="52645-313">However, the refresh token might become invalid at any time for various reasons, so your app should continue to try to use a refresh token until it fails, or until your app replaces it with a new refresh token.</span></span> <span data-ttu-id="52645-314">Inoltre, il token di aggiornamento può diventare non valido dopo 90 giorni dall'immissione delle credenziali da parte dell'utente.</span><span class="sxs-lookup"><span data-stu-id="52645-314">A refresh token also becomes invalid if it has been 90 days since the user has entered their credentials.</span></span> |
| <span data-ttu-id="52645-315">Token di aggiornamento (account personale)</span><span class="sxs-lookup"><span data-stu-id="52645-315">Refresh tokens (personal accounts)</span></span> |<span data-ttu-id="52645-316">Fino a 1 anno</span><span class="sxs-lookup"><span data-stu-id="52645-316">Up to 1 year</span></span> |<span data-ttu-id="52645-317">Un singolo token di aggiornamento è valido per un periodo massimo di 1 anno.</span><span class="sxs-lookup"><span data-stu-id="52645-317">A single refresh token is valid for a maximum of 1 year.</span></span> <span data-ttu-id="52645-318">Tuttavia, il token di aggiornamento può diventare non valido in qualsiasi momento per diversi motivi, quindi l'app deve continuare a provare a usare un token di aggiornamento fino a quando non si verifica un errore.</span><span class="sxs-lookup"><span data-stu-id="52645-318">However, the refresh token might become invalid at any time for various reasons, so your app should continue to try to use a refresh token until it fails.</span></span> |
| <span data-ttu-id="52645-319">Codici di autorizzazione (account aziendale o dell'istituto di istruzione)</span><span class="sxs-lookup"><span data-stu-id="52645-319">Authorization codes (work or school accounts)</span></span> |<span data-ttu-id="52645-320">10 minuti</span><span class="sxs-lookup"><span data-stu-id="52645-320">10 minutes</span></span> |<span data-ttu-id="52645-321">I codici di autorizzazione sono intenzionalmente di breve durata e devono essere immediatamente riscattati per i token di accesso e di aggiornamento quando vengono ricevuti.</span><span class="sxs-lookup"><span data-stu-id="52645-321">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when the tokens are received.</span></span> |
| <span data-ttu-id="52645-322">Codici di autorizzazione (account personale)</span><span class="sxs-lookup"><span data-stu-id="52645-322">Authorization codes (personal accounts)</span></span> |<span data-ttu-id="52645-323">5 minuti</span><span class="sxs-lookup"><span data-stu-id="52645-323">5 minutes</span></span> |<span data-ttu-id="52645-324">I codici di autorizzazione sono intenzionalmente di breve durata e devono essere immediatamente riscattati per i token di accesso e di aggiornamento quando vengono ricevuti.</span><span class="sxs-lookup"><span data-stu-id="52645-324">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when the tokens are received.</span></span> <span data-ttu-id="52645-325">I codici di autorizzazione generati per conto degli account personali possono essere usati una sola volta.</span><span class="sxs-lookup"><span data-stu-id="52645-325">Authorization codes that are issued on behalf of personal accounts are for one-time use.</span></span> |
