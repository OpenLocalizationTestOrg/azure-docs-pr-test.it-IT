---
title: aaaEncryption in archivio Azure Data Lake | Documenti Microsoft
description: Informazioni sul funzionamento della crittografia e della rotazione delle chiavi in Azure Data Lake Store
services: data-lake-store
documentationcenter: 
author: yagupta
manager: 
editor: 
ms.assetid: 
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 4/14/2017
ms.author: yagupta
ms.openlocfilehash: a9f3a2dce8232deba93005594d1e6a21e9c0cbee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="encryption-of-data-in-azure-data-lake-store"></a><span data-ttu-id="c0de9-103">Crittografia dei dati in Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="c0de9-103">Encryption of data in Azure Data Lake Store</span></span>

<span data-ttu-id="c0de9-104">La crittografia in Azure Data Lake Store consente di proteggere i dati, implementare criteri di sicurezza aziendali e soddisfare i requisiti di conformità normativi.</span><span class="sxs-lookup"><span data-stu-id="c0de9-104">Encryption in Azure Data Lake Store helps you protect your data, implement enterprise security policies, and meet regulatory compliance requirements.</span></span> <span data-ttu-id="c0de9-105">In questo articolo viene fornita una panoramica di progettazione hello e vengono illustrati alcuni aspetti tecnici di hello dell'implementazione.</span><span class="sxs-lookup"><span data-stu-id="c0de9-105">This article provides an overview of hello design, and discusses some of hello technical aspects of implementation.</span></span>

<span data-ttu-id="c0de9-106">Data Lake Store supporta la crittografia dei dati sia inattivi che in transito.</span><span class="sxs-lookup"><span data-stu-id="c0de9-106">Data Lake Store supports encryption of data both at rest and in transit.</span></span> <span data-ttu-id="c0de9-107">Per i dati inattivi, Data Lake Store supporta la crittografia trasparente "attivata per impostazione predefinita".</span><span class="sxs-lookup"><span data-stu-id="c0de9-107">For data at rest, Data Lake Store supports "on by default," transparent encryption.</span></span> <span data-ttu-id="c0de9-108">Di seguito è riportata una spiegazione più dettagliata:</span><span class="sxs-lookup"><span data-stu-id="c0de9-108">Here is what these terms mean in a bit more detail:</span></span>

* <span data-ttu-id="c0de9-109">**In per impostazione predefinita**: quando si crea un nuovo account archivio Data Lake, impostazione predefinita hello abilita la crittografia.</span><span class="sxs-lookup"><span data-stu-id="c0de9-109">**On by default**: When you create a new Data Lake Store account, hello default setting enables encryption.</span></span> <span data-ttu-id="c0de9-110">Successivamente, i dati archiviati nell'archivio Data Lake sono sempre crittografato toostoring precedenti nel supporto permanente.</span><span class="sxs-lookup"><span data-stu-id="c0de9-110">Thereafter, data that is stored in Data Lake Store is always encrypted prior toostoring on persistent media.</span></span> <span data-ttu-id="c0de9-111">Questo è il comportamento di hello per tutti i dati e non può essere modificato dopo la creazione di un account.</span><span class="sxs-lookup"><span data-stu-id="c0de9-111">This is hello behavior for all data, and it cannot be changed after an account is created.</span></span>
* <span data-ttu-id="c0de9-112">**Transparent**: archivio Data Lake automaticamente crittografa i dati precedenti toopersisting e li decrittografa tooretrieval precedente dei dati.</span><span class="sxs-lookup"><span data-stu-id="c0de9-112">**Transparent**: Data Lake Store automatically encrypts data prior toopersisting, and decrypts data prior tooretrieval.</span></span> <span data-ttu-id="c0de9-113">crittografia Hello configurata e gestita a livello di archivio Data Lake hello da un amministratore.</span><span class="sxs-lookup"><span data-stu-id="c0de9-113">hello encryption is configured and managed at hello Data Lake Store level by an administrator.</span></span> <span data-ttu-id="c0de9-114">Non vengono apportate modifiche toohello dati alle API di accesso.</span><span class="sxs-lookup"><span data-stu-id="c0de9-114">No changes are made toohello data access APIs.</span></span> <span data-ttu-id="c0de9-115">Non sono quindi necessarie modifiche nelle applicazioni e nei servizi che interagiscono con Data Lake Store a causa della crittografia.</span><span class="sxs-lookup"><span data-stu-id="c0de9-115">Thus, no changes are required in applications and services that interact with Data Lake Store because of encryption.</span></span>

<span data-ttu-id="c0de9-116">Anche i dati in transito (noti anche come dati in movimento) vengono sempre crittografati in Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="c0de9-116">Data in transit (also known as data in motion) is also always encrypted in Data Lake Store.</span></span> <span data-ttu-id="c0de9-117">Inoltre supporto toopersistent toostoring precedenti dati tooencrypting hello dati vengono sempre anche protetti in transito tramite HTTPS.</span><span class="sxs-lookup"><span data-stu-id="c0de9-117">In addition tooencrypting data prior toostoring toopersistent media, hello data is also always secured in transit by using HTTPS.</span></span> <span data-ttu-id="c0de9-118">HTTPS è l'unico protocollo hello è supportato per hello che interfacce REST di archivio Data Lake.</span><span class="sxs-lookup"><span data-stu-id="c0de9-118">HTTPS is hello only protocol that is supported for hello Data Lake Store REST interfaces.</span></span> <span data-ttu-id="c0de9-119">Hello diagramma seguente illustra come dati diventano crittografati nell'archivio Data Lake:</span><span class="sxs-lookup"><span data-stu-id="c0de9-119">hello following diagram shows how data becomes encrypted in Data Lake Store:</span></span>

![Diagramma della crittografia dei dati in Data Lake Store](./media/data-lake-store-encryption/fig1.png)


## <a name="set-up-encryption-with-data-lake-store"></a><span data-ttu-id="c0de9-121">Configurare la crittografia con Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="c0de9-121">Set up encryption with Data Lake Store</span></span>

<span data-ttu-id="c0de9-122">La crittografia per Data Lake Store viene configurata durante la creazione di un account ed è sempre abilitata per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="c0de9-122">Encryption for Data Lake Store is set up during account creation, and it is always enabled by default.</span></span> <span data-ttu-id="c0de9-123">È possibile gestire le chiavi di hello autonomamente o consentire toomanage archivio Data Lake per si (si tratta di hello predefinito).</span><span class="sxs-lookup"><span data-stu-id="c0de9-123">You can either manage hello keys yourself, or allow Data Lake Store toomanage them for you (this is hello default).</span></span>

<span data-ttu-id="c0de9-124">Per altre informazioni, vedere la [Introduzione](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="c0de9-124">For more information, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

## <a name="how-encryption-works-in-data-lake-store"></a><span data-ttu-id="c0de9-125">Come funziona la crittografia in Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="c0de9-125">How encryption works in Data Lake Store</span></span>

<span data-ttu-id="c0de9-126">Hello informazioni seguenti sono descritte come chiavi di crittografia master toomanage e illustra hello tre diversi tipi di chiavi, è possibile usare nella crittografia dei dati per l'archivio Data Lake.</span><span class="sxs-lookup"><span data-stu-id="c0de9-126">hello following information covers how toomanage master encryption keys, and it explains hello three different types of keys you can use in data encryption for Data Lake Store.</span></span>

### <a name="master-encryption-keys"></a><span data-ttu-id="c0de9-127">Chiavi di crittografia master</span><span class="sxs-lookup"><span data-stu-id="c0de9-127">Master encryption keys</span></span>

<span data-ttu-id="c0de9-128">Data Lake Store offre due modalità per la gestione delle chiavi di crittografia master.</span><span class="sxs-lookup"><span data-stu-id="c0de9-128">Data Lake Store provides two modes for management of master encryption keys (MEKs).</span></span> <span data-ttu-id="c0de9-129">Per il momento, si supponga che la chiave di crittografia master hello è chiave di primo livello hello.</span><span class="sxs-lookup"><span data-stu-id="c0de9-129">For now, assume that hello master encryption key is hello top-level key.</span></span> <span data-ttu-id="c0de9-130">Chiave di crittografia master toohello di accesso è necessario toodecrypt tutti i dati archiviati in archivio Data Lake.</span><span class="sxs-lookup"><span data-stu-id="c0de9-130">Access toohello master encryption key is required toodecrypt any data stored in Data Lake Store.</span></span>

<span data-ttu-id="c0de9-131">come indicato di seguito sono riportati i Hello due modalità per gestire la chiave di crittografia master hello:</span><span class="sxs-lookup"><span data-stu-id="c0de9-131">hello two modes for managing hello master encryption key are as follows:</span></span>

*   <span data-ttu-id="c0de9-132">Chiavi gestite dal servizio</span><span class="sxs-lookup"><span data-stu-id="c0de9-132">Service managed keys</span></span>
*   <span data-ttu-id="c0de9-133">Chiavi gestite dal cliente</span><span class="sxs-lookup"><span data-stu-id="c0de9-133">Customer managed keys</span></span>

<span data-ttu-id="c0de9-134">In entrambe le modalità, la chiave di crittografia master hello è protetto da archiviare nell'insieme di credenziali chiave di Azure.</span><span class="sxs-lookup"><span data-stu-id="c0de9-134">In both modes, hello master encryption key is secured by storing it in Azure Key Vault.</span></span> <span data-ttu-id="c0de9-135">Insieme di credenziali chiave è un servizio completamente gestito, estremamente sicuro in Azure che può essere utilizzati toosafeguard le chiavi di crittografia.</span><span class="sxs-lookup"><span data-stu-id="c0de9-135">Key Vault is a fully managed, highly secure service on Azure that can be used toosafeguard cryptographic keys.</span></span> <span data-ttu-id="c0de9-136">Per altre informazioni, vedere [Key Vault](https://azure.microsoft.com/services/key-vault).</span><span class="sxs-lookup"><span data-stu-id="c0de9-136">For more information, see [Key Vault](https://azure.microsoft.com/services/key-vault).</span></span>

<span data-ttu-id="c0de9-137">Di seguito è riportato un confronto delle funzionalità fornite da due modalità di gestione MEKs hello di hello breve.</span><span class="sxs-lookup"><span data-stu-id="c0de9-137">Here is a brief comparison of capabilities provided by hello two modes of managing hello MEKs.</span></span>

|  | <span data-ttu-id="c0de9-138">Chiavi gestite dal servizio</span><span class="sxs-lookup"><span data-stu-id="c0de9-138">Service managed keys</span></span> | <span data-ttu-id="c0de9-139">Chiavi gestite dal cliente</span><span class="sxs-lookup"><span data-stu-id="c0de9-139">Customer managed keys</span></span> |
| --- | --- | --- |
|<span data-ttu-id="c0de9-140">Come vengono archiviati i dati?</span><span class="sxs-lookup"><span data-stu-id="c0de9-140">How is data stored?</span></span>|<span data-ttu-id="c0de9-141">Crittografia sempre attiva toobeing precedenti archiviati.</span><span class="sxs-lookup"><span data-stu-id="c0de9-141">Always encrypted prior toobeing stored.</span></span>|<span data-ttu-id="c0de9-142">Crittografia sempre attiva toobeing precedenti archiviati.</span><span class="sxs-lookup"><span data-stu-id="c0de9-142">Always encrypted prior toobeing stored.</span></span>|
|<span data-ttu-id="c0de9-143">In cui è archiviato hello chiave di crittografia Master?</span><span class="sxs-lookup"><span data-stu-id="c0de9-143">Where is hello Master Encryption Key stored?</span></span>|<span data-ttu-id="c0de9-144">Insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="c0de9-144">Key Vault</span></span>|<span data-ttu-id="c0de9-145">Insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="c0de9-145">Key Vault</span></span>|
|<span data-ttu-id="c0de9-146">Sono qualsiasi tipo di crittografia chiavi archiviate in hello deselezionare all'esterno dell'insieme di credenziali chiave?</span><span class="sxs-lookup"><span data-stu-id="c0de9-146">Are any encryption keys stored in hello clear outside of Key Vault?</span></span> |<span data-ttu-id="c0de9-147">No</span><span class="sxs-lookup"><span data-stu-id="c0de9-147">No</span></span>|<span data-ttu-id="c0de9-148">No</span><span class="sxs-lookup"><span data-stu-id="c0de9-148">No</span></span>|
|<span data-ttu-id="c0de9-149">Hello MEK può essere recuperato dall'insieme di credenziali chiave?</span><span class="sxs-lookup"><span data-stu-id="c0de9-149">Can hello MEK be retrieved by Key Vault?</span></span>|<span data-ttu-id="c0de9-150">No.</span><span class="sxs-lookup"><span data-stu-id="c0de9-150">No.</span></span> <span data-ttu-id="c0de9-151">Dopo aver hello che MEK viene archiviato nell'insieme di credenziali chiave, utilizzabile solo per la crittografia e decrittografia.</span><span class="sxs-lookup"><span data-stu-id="c0de9-151">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|<span data-ttu-id="c0de9-152">No.</span><span class="sxs-lookup"><span data-stu-id="c0de9-152">No.</span></span> <span data-ttu-id="c0de9-153">Dopo aver hello che MEK viene archiviato nell'insieme di credenziali chiave, utilizzabile solo per la crittografia e decrittografia.</span><span class="sxs-lookup"><span data-stu-id="c0de9-153">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|
|<span data-ttu-id="c0de9-154">Il proprietario dell'istanza di insieme di credenziali chiave hello e hello MEK?</span><span class="sxs-lookup"><span data-stu-id="c0de9-154">Who owns hello Key Vault instance and hello MEK?</span></span>|<span data-ttu-id="c0de9-155">Hello servizio archivio Data Lake</span><span class="sxs-lookup"><span data-stu-id="c0de9-155">hello Data Lake Store service</span></span>|<span data-ttu-id="c0de9-156">Si è proprietari di istanza di insieme di credenziali chiave hello, che appartiene alla sottoscrizione Azure.</span><span class="sxs-lookup"><span data-stu-id="c0de9-156">You own hello Key Vault instance, which belongs in your own Azure subscription.</span></span> <span data-ttu-id="c0de9-157">Hello MEK nell'insieme di credenziali chiave può essere gestito dal software o hardware.</span><span class="sxs-lookup"><span data-stu-id="c0de9-157">hello MEK in Key Vault can be managed by software or hardware.</span></span>|
|<span data-ttu-id="c0de9-158">È possibile revocare l'accesso toohello MEK per il servizio archivio Data Lake hello?</span><span class="sxs-lookup"><span data-stu-id="c0de9-158">Can you revoke access toohello MEK for hello Data Lake Store service?</span></span>|<span data-ttu-id="c0de9-159">No</span><span class="sxs-lookup"><span data-stu-id="c0de9-159">No</span></span>|<span data-ttu-id="c0de9-160">Sì.</span><span class="sxs-lookup"><span data-stu-id="c0de9-160">Yes.</span></span> <span data-ttu-id="c0de9-161">È possibile gestire gli elenchi di controllo di accesso nell'insieme di credenziali chiave e rimuovere l'accesso controllo voci toohello identità del servizio per il servizio archivio Data Lake hello.</span><span class="sxs-lookup"><span data-stu-id="c0de9-161">You can manage access control lists in Key Vault, and remove access control entries toohello service identity for hello Data Lake Store service.</span></span>|
|<span data-ttu-id="c0de9-162">È possibile in modo permanente eliminare hello MEK?</span><span class="sxs-lookup"><span data-stu-id="c0de9-162">Can you permanently delete hello MEK?</span></span>|<span data-ttu-id="c0de9-163">No</span><span class="sxs-lookup"><span data-stu-id="c0de9-163">No</span></span>|<span data-ttu-id="c0de9-164">Sì.</span><span class="sxs-lookup"><span data-stu-id="c0de9-164">Yes.</span></span> <span data-ttu-id="c0de9-165">Se si elimina hello MEK dall'insieme di credenziali chiave, non è possibile decrittografare i dati di hello in hello account archivio Data Lake a chiunque, inclusi il servizio di archivio Data Lake hello.</span><span class="sxs-lookup"><span data-stu-id="c0de9-165">If you delete hello MEK from Key Vault, hello data in hello Data Lake Store account cannot be decrypted by anyone, including hello Data Lake Store service.</span></span> <br><br> <span data-ttu-id="c0de9-166">Se è stato in modo esplicito backup hello MEK precedente toodeleting dall'insieme di credenziali chiave, può essere ripristinato hello MEK e dati hello possono quindi essere recuperati.</span><span class="sxs-lookup"><span data-stu-id="c0de9-166">If you have explicitly backed up hello MEK prior toodeleting it from Key Vault, hello MEK can be restored, and hello data can then be recovered.</span></span> <span data-ttu-id="c0de9-167">Tuttavia, se non backup hello MEK precedente toodeleting dall'insieme di credenziali chiave, hello dati in hello account archivio Data Lake non possono mai essere decrittografati successivamente.</span><span class="sxs-lookup"><span data-stu-id="c0de9-167">However, if you have not backed up hello MEK prior toodeleting it from Key Vault, hello data in hello Data Lake Store account can never be decrypted thereafter.</span></span>|


<span data-ttu-id="c0de9-168">A parte questa differenza di chi gestisce hello MEK e istanza insieme di credenziali chiave hello in cui si trova, rest hello della progettazione hello è hello uguale per entrambe le modalità.</span><span class="sxs-lookup"><span data-stu-id="c0de9-168">Aside from this difference of who manages hello MEK and hello Key Vault instance in which it resides, hello rest of hello design is hello same for both modes.</span></span>

<span data-ttu-id="c0de9-169">Quando si sceglie la modalità di hello per hello chiavi di crittografia master è seguente hello tooremember importanti:</span><span class="sxs-lookup"><span data-stu-id="c0de9-169">It's important tooremember hello following when you choose hello mode for hello master encryption keys:</span></span>

*   <span data-ttu-id="c0de9-170">È possibile scegliere se il cliente toouse gestita chiavi o le chiavi del servizio gestito quando si esegue il provisioning di un account archivio Data Lake.</span><span class="sxs-lookup"><span data-stu-id="c0de9-170">You can choose whether toouse customer managed keys or service managed keys when you provision a Data Lake Store account.</span></span>
*   <span data-ttu-id="c0de9-171">Dopo il provisioning di un account archivio Data Lake, non è possibile modificare la modalità di hello.</span><span class="sxs-lookup"><span data-stu-id="c0de9-171">After a Data Lake Store account is provisioned, hello mode cannot be changed.</span></span>

### <a name="encryption-and-decryption-of-data"></a><span data-ttu-id="c0de9-172">Crittografia e decrittografia dei dati</span><span class="sxs-lookup"><span data-stu-id="c0de9-172">Encryption and decryption of data</span></span>

<span data-ttu-id="c0de9-173">Esistono tre tipi di chiavi usate nella progettazione di hello crittografia dei dati.</span><span class="sxs-lookup"><span data-stu-id="c0de9-173">There are three types of keys that are used in hello design of data encryption.</span></span> <span data-ttu-id="c0de9-174">Hello nella tabella seguente fornisce un riepilogo:</span><span class="sxs-lookup"><span data-stu-id="c0de9-174">hello following table provides a summary:</span></span>

| <span data-ttu-id="c0de9-175">Chiave</span><span class="sxs-lookup"><span data-stu-id="c0de9-175">Key</span></span>                   | <span data-ttu-id="c0de9-176">Abbreviazione</span><span class="sxs-lookup"><span data-stu-id="c0de9-176">Abbreviation</span></span> | <span data-ttu-id="c0de9-177">Elemento associato</span><span class="sxs-lookup"><span data-stu-id="c0de9-177">Associated with</span></span> | <span data-ttu-id="c0de9-178">Posizione di archiviazione</span><span class="sxs-lookup"><span data-stu-id="c0de9-178">Storage location</span></span>                             | <span data-ttu-id="c0de9-179">Tipo</span><span class="sxs-lookup"><span data-stu-id="c0de9-179">Type</span></span>       | <span data-ttu-id="c0de9-180">Note</span><span class="sxs-lookup"><span data-stu-id="c0de9-180">Notes</span></span>                                                                                                   |
|-----------------------|--------------|-----------------|----------------------------------------------|------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="c0de9-181">Chiave di crittografia master</span><span class="sxs-lookup"><span data-stu-id="c0de9-181">Master Encryption Key</span></span> | <span data-ttu-id="c0de9-182">MEK</span><span class="sxs-lookup"><span data-stu-id="c0de9-182">MEK</span></span>          | <span data-ttu-id="c0de9-183">Un account Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="c0de9-183">A Data Lake Store account</span></span> | <span data-ttu-id="c0de9-184">Insieme di credenziali di chiave</span><span class="sxs-lookup"><span data-stu-id="c0de9-184">Key Vault</span></span>                              | <span data-ttu-id="c0de9-185">Asimmetrica</span><span class="sxs-lookup"><span data-stu-id="c0de9-185">Asymmetric</span></span> | <span data-ttu-id="c0de9-186">Può essere gestita da Data Lake Store o dall'utente.</span><span class="sxs-lookup"><span data-stu-id="c0de9-186">It can be managed by Data Lake Store or you.</span></span>                                                              |
| <span data-ttu-id="c0de9-187">Chiave di crittografia dei dati</span><span class="sxs-lookup"><span data-stu-id="c0de9-187">Data Encryption Key</span></span>   | <span data-ttu-id="c0de9-188">DEK</span><span class="sxs-lookup"><span data-stu-id="c0de9-188">DEK</span></span>          | <span data-ttu-id="c0de9-189">Un account Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="c0de9-189">A Data Lake Store account</span></span> | <span data-ttu-id="c0de9-190">Risorsa di archiviazione persistente, gestita dal servizio Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="c0de9-190">Persistent storage, managed by Data Lake Store service</span></span> | <span data-ttu-id="c0de9-191">Simmetrica</span><span class="sxs-lookup"><span data-stu-id="c0de9-191">Symmetric</span></span>  | <span data-ttu-id="c0de9-192">chiave di Decrittografia Hello viene crittografato hello MEK.</span><span class="sxs-lookup"><span data-stu-id="c0de9-192">hello DEK is encrypted by hello MEK.</span></span> <span data-ttu-id="c0de9-193">Hello che DEK crittografato è ciò che viene archiviato in un supporto permanente.</span><span class="sxs-lookup"><span data-stu-id="c0de9-193">hello encrypted DEK is what is stored on persistent media.</span></span> |
| <span data-ttu-id="c0de9-194">Chiave di crittografia a blocchi</span><span class="sxs-lookup"><span data-stu-id="c0de9-194">Block Encryption Key</span></span>  | <span data-ttu-id="c0de9-195">BEK</span><span class="sxs-lookup"><span data-stu-id="c0de9-195">BEK</span></span>          | <span data-ttu-id="c0de9-196">Un blocco di dati</span><span class="sxs-lookup"><span data-stu-id="c0de9-196">A block of data</span></span> | <span data-ttu-id="c0de9-197">Nessuno</span><span class="sxs-lookup"><span data-stu-id="c0de9-197">None</span></span>                                         | <span data-ttu-id="c0de9-198">Simmetrica</span><span class="sxs-lookup"><span data-stu-id="c0de9-198">Symmetric</span></span>  | <span data-ttu-id="c0de9-199">Hello BEK è derivato da hello chiave di Decrittografia e il blocco di dati di hello.</span><span class="sxs-lookup"><span data-stu-id="c0de9-199">hello BEK is derived from hello DEK and hello data block.</span></span>                                                      |

<span data-ttu-id="c0de9-200">Hello seguente diagramma vengono illustrati questi concetti:</span><span class="sxs-lookup"><span data-stu-id="c0de9-200">hello following diagram illustrates these concepts:</span></span>

![Chiavi nella crittografia dei dati](./media/data-lake-store-encryption/fig2.png)

#### <a name="pseudo-algorithm-when-a-file-is-toobe-decrypted"></a><span data-ttu-id="c0de9-202">Algoritmo di pseudo quando un file è toobe decrittografata:</span><span class="sxs-lookup"><span data-stu-id="c0de9-202">Pseudo algorithm when a file is toobe decrypted:</span></span>
1.  <span data-ttu-id="c0de9-203">Controllare se hello chiave di Decrittografia per account archivio Data Lake hello è memorizzato nella cache e pronta per l'utilizzo.</span><span class="sxs-lookup"><span data-stu-id="c0de9-203">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="c0de9-204">In caso contrario, leggere hello crittografato una chiave di Decrittografia dall'archivio permanente e inviarlo tooKey insieme di credenziali toobe decrittografato.</span><span class="sxs-lookup"><span data-stu-id="c0de9-204">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="c0de9-205">Hello cache decrittografata una chiave di Decrittografia in memoria.</span><span class="sxs-lookup"><span data-stu-id="c0de9-205">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="c0de9-206">È ora pronto toouse.</span><span class="sxs-lookup"><span data-stu-id="c0de9-206">It is now ready toouse.</span></span>
2.  <span data-ttu-id="c0de9-207">Per ogni blocco di dati nel file hello:</span><span class="sxs-lookup"><span data-stu-id="c0de9-207">For every block of data in hello file:</span></span>
    - <span data-ttu-id="c0de9-208">Blocco crittografato hello di lettura dei dati dall'archivio permanente.</span><span class="sxs-lookup"><span data-stu-id="c0de9-208">Read hello encrypted block of data from persistent storage.</span></span>
    - <span data-ttu-id="c0de9-209">Generare hello BEK dalla chiave di Decrittografia hello e blocco di crittografato hello di dati.</span><span class="sxs-lookup"><span data-stu-id="c0de9-209">Generate hello BEK from hello DEK and hello encrypted block of data.</span></span>
    - <span data-ttu-id="c0de9-210">Utilizzare i dati di toodecrypt BEK hello.</span><span class="sxs-lookup"><span data-stu-id="c0de9-210">Use hello BEK toodecrypt data.</span></span>


#### <a name="pseudo-algorithm-when-a-block-of-data-is-toobe-encrypted"></a><span data-ttu-id="c0de9-211">L'algoritmo pseudo quando un blocco di dati è toobe crittografato:</span><span class="sxs-lookup"><span data-stu-id="c0de9-211">Pseudo algorithm when a block of data is toobe encrypted:</span></span>
1.  <span data-ttu-id="c0de9-212">Controllare se hello chiave di Decrittografia per account archivio Data Lake hello è memorizzato nella cache e pronta per l'utilizzo.</span><span class="sxs-lookup"><span data-stu-id="c0de9-212">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="c0de9-213">In caso contrario, leggere hello crittografato una chiave di Decrittografia dall'archivio permanente e inviarlo tooKey insieme di credenziali toobe decrittografato.</span><span class="sxs-lookup"><span data-stu-id="c0de9-213">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="c0de9-214">Hello cache decrittografata una chiave di Decrittografia in memoria.</span><span class="sxs-lookup"><span data-stu-id="c0de9-214">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="c0de9-215">È ora pronto toouse.</span><span class="sxs-lookup"><span data-stu-id="c0de9-215">It is now ready toouse.</span></span>
2.  <span data-ttu-id="c0de9-216">Generare un BEK univoco per il blocco di hello di dati da hello chiave di Decrittografia.</span><span class="sxs-lookup"><span data-stu-id="c0de9-216">Generate a unique BEK for hello block of data from hello DEK.</span></span>
3.  <span data-ttu-id="c0de9-217">Crittografare il blocco di dati hello con hello BEK, utilizzando la crittografia AES-256.</span><span class="sxs-lookup"><span data-stu-id="c0de9-217">Encrypt hello data block with hello BEK, by using AES-256 encryption.</span></span>
4.  <span data-ttu-id="c0de9-218">Blocco di dati crittografati hello archivio dei dati in un archivio permanente.</span><span class="sxs-lookup"><span data-stu-id="c0de9-218">Store hello encrypted data block of data on persistent storage.</span></span>

> [!NOTE] 
> <span data-ttu-id="c0de9-219">Per motivi di prestazioni chiave DEK in hello deselezionare hello viene memorizzato nella cache in memoria per un breve periodo di tempo e immediatamente verrà cancellato in seguito.</span><span class="sxs-lookup"><span data-stu-id="c0de9-219">For performance reasons, hello DEK in hello clear is cached in memory for a short time, and is immediately erased afterward.</span></span> <span data-ttu-id="c0de9-220">Nel supporto permanente, vengono sempre archiviato crittografati da hello MEK.</span><span class="sxs-lookup"><span data-stu-id="c0de9-220">On persistent media, it is always stored encrypted by hello MEK.</span></span>

## <a name="key-rotation"></a><span data-ttu-id="c0de9-221">Rotazione delle chiavi</span><span class="sxs-lookup"><span data-stu-id="c0de9-221">Key rotation</span></span>

<span data-ttu-id="c0de9-222">Quando si utilizzano chiavi gestita dal cliente, è possibile ruotare hello MEK.</span><span class="sxs-lookup"><span data-stu-id="c0de9-222">When you are using customer-managed keys, you can rotate hello MEK.</span></span> <span data-ttu-id="c0de9-223">toolearn tooset di un account archivio Data Lake con chiavi gestita dal cliente, vedere [Introduzione](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span><span class="sxs-lookup"><span data-stu-id="c0de9-223">toolearn how tooset up a Data Lake Store account with customer-managed keys, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="c0de9-224">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="c0de9-224">Prerequisites</span></span>

<span data-ttu-id="c0de9-225">Quando si configura hello account archivio Data Lake, si sono scelto toouse chiavi personalizzate.</span><span class="sxs-lookup"><span data-stu-id="c0de9-225">When you set up hello Data Lake Store account, you have chosen toouse your own keys.</span></span> <span data-ttu-id="c0de9-226">Questa opzione non può essere modificata dopo la creazione di account hello.</span><span class="sxs-lookup"><span data-stu-id="c0de9-226">This option cannot be changed after hello account has been created.</span></span> <span data-ttu-id="c0de9-227">Hello passaggi seguenti presuppongono che si siano utilizzando chiavi gestita dal cliente (ovvero, si sono scelto chiavi personalizzate dall'insieme di credenziali chiave).</span><span class="sxs-lookup"><span data-stu-id="c0de9-227">hello following steps assume that you are using customer-managed keys (that is, you have chosen your own keys from Key Vault).</span></span>

<span data-ttu-id="c0de9-228">Si noti che se si utilizzano le opzioni predefinite di hello per la crittografia, i dati sono sempre crittografati utilizzando le chiavi gestite dall'archivio Data Lake.</span><span class="sxs-lookup"><span data-stu-id="c0de9-228">Note that if you use hello default options for encryption, your data is always encrypted by using keys managed by Data Lake Store.</span></span> <span data-ttu-id="c0de9-229">In questo caso, non si dispongono delle chiavi toorotate possibilità hello, come vengono gestite da archivio Data Lake.</span><span class="sxs-lookup"><span data-stu-id="c0de9-229">In this option, you don't have hello ability toorotate keys, as they are managed by Data Lake Store.</span></span>

### <a name="how-toorotate-hello-mek-in-data-lake-store"></a><span data-ttu-id="c0de9-230">Come toorotate hello MEK in archivio Data Lake</span><span class="sxs-lookup"><span data-stu-id="c0de9-230">How toorotate hello MEK in Data Lake Store</span></span>

1. <span data-ttu-id="c0de9-231">Accedi toohello [portale di Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="c0de9-231">Sign in toohello [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="c0de9-232">Selezionare l'istanza di insieme di credenziali chiave toohello che archivia le chiavi associate all'account archivio Data Lake.</span><span class="sxs-lookup"><span data-stu-id="c0de9-232">Browse toohello Key Vault instance that stores your keys associated with your Data Lake Store account.</span></span> <span data-ttu-id="c0de9-233">Selezionare **Chiavi**.</span><span class="sxs-lookup"><span data-stu-id="c0de9-233">Select **Keys**.</span></span>

    ![Screenshot di Key Vault](./media/data-lake-store-encryption/keyvault.png)

3.  <span data-ttu-id="c0de9-235">Selezionare hello chiave associate all'account archivio Data Lake e creare una nuova versione di questa chiave.</span><span class="sxs-lookup"><span data-stu-id="c0de9-235">Select hello key associated with your Data Lake Store account, and create a new version of this key.</span></span> <span data-ttu-id="c0de9-236">Si noti che archivio Data Lake attualmente supporta solo la rotazione delle chiavi tooa nuova versione di una chiave.</span><span class="sxs-lookup"><span data-stu-id="c0de9-236">Note that Data Lake Store currently only supports key rotation tooa new version of a key.</span></span> <span data-ttu-id="c0de9-237">Non supporta la rotazione tooa altra chiave.</span><span class="sxs-lookup"><span data-stu-id="c0de9-237">It doesn't support rotating tooa different key.</span></span>

   ![Screenshot della finestra Chiavi con Nuova versione in evidenza](./media/data-lake-store-encryption/keynewversion.png)

4.  <span data-ttu-id="c0de9-239">Selezionare l'account di archiviazione di archivio Data Lake toohello e scegliere **crittografia**.</span><span class="sxs-lookup"><span data-stu-id="c0de9-239">Browse toohello Data Lake Store storage account, and select **Encryption**.</span></span>

    ![Screenshot della finestra dell'account di archiviazione di Data Lake Store con Crittografia in evidenza](./media/data-lake-store-encryption/select-encryption.png)

5.  <span data-ttu-id="c0de9-241">Un messaggio informa che è disponibile una nuova versione di chiave della chiave di hello.</span><span class="sxs-lookup"><span data-stu-id="c0de9-241">A message notifies you that a new key version of hello key is available.</span></span> <span data-ttu-id="c0de9-242">Fare clic su **ruota chiave** nuova versione di tooupdate hello toohello chiave.</span><span class="sxs-lookup"><span data-stu-id="c0de9-242">Click **Rotate Key** tooupdate hello key toohello new version.</span></span>

    ![Screenshot della finestra Data Lake Store con il messaggio e Ruota chiave in evidenza](./media/data-lake-store-encryption/rotatekey.png)

<span data-ttu-id="c0de9-244">Questa operazione richiederà meno di due minuti, e nessun tempo di inattività previsto a causa di rotazione tookey.</span><span class="sxs-lookup"><span data-stu-id="c0de9-244">This operation should take less than two minutes, and there is no expected downtime due tookey rotation.</span></span> <span data-ttu-id="c0de9-245">Una volta completata l'operazione di hello, nuova versione di hello della chiave di hello è in uso.</span><span class="sxs-lookup"><span data-stu-id="c0de9-245">After hello operation is complete, hello new version of hello key is in use.</span></span>
