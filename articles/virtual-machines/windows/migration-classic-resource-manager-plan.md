---
title: Pianificazione della migrazione delle risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager | Documentazione Microsoft
description: Pianificazione della migrazione delle risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager
services: virtual-machines-windows
documentationcenter: 
author: singhkays
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 78492a2c-2694-4023-a7b8-c97d3708dcb7
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 04/01/2017
ms.author: kasing
ms.openlocfilehash: db23eba9ff8debd5268cd02bc4f37c4e6501bfac
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="planning-for-migration-of-iaas-resources-from-classic-to-azure-resource-manager"></a><span data-ttu-id="43119-103">Pianificazione della migrazione delle risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="43119-103">Planning for migration of IaaS resources from classic to Azure Resource Manager</span></span>
<span data-ttu-id="43119-104">Anche se Azure Resource Manager offre molte funzionalità straordinarie, è fondamentale pianificare la migrazione in modo che avvenga senza problemi.</span><span class="sxs-lookup"><span data-stu-id="43119-104">While Azure Resource Manager offers many amazing features, it is critical to plan out your migration journey to make sure things go smoothly.</span></span> <span data-ttu-id="43119-105">Dedicare tempo alla pianificazione garantisce che non si verifichino problemi durante l'esecuzione delle attività di migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-105">Spending time on planning will ensure that you do not encounter issues while executing migration activities.</span></span>

> [!NOTE]
> <span data-ttu-id="43119-106">Alle linee guida seguenti hanno fornito un importante contributo il team Azure Customer Advisory e gli architetti delle soluzioni cloud che lavorano con i clienti per la migrazione di ambienti di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="43119-106">The following guidance was heavily contributed to by the Azure Customer Advisory team and Cloud Solution architects working with customers on migrating large environments.</span></span> <span data-ttu-id="43119-107">È consigliabile controllare questo documento di tanto in tanto perché verrà aggiornato mano a mano che emergeranno nuovi modelli di successo.</span><span class="sxs-lookup"><span data-stu-id="43119-107">As such this document will continue to get updated as new patterns of success emerge, so check back from time to time to see if there are any new recommendations.</span></span>

<span data-ttu-id="43119-108">Il percorso di migrazione include quattro fasi generali:</span><span class="sxs-lookup"><span data-stu-id="43119-108">There are four general phases of the migration journey:</span></span><br>

![Fasi di migrazione](../media/virtual-machines-windows-migration-classic-resource-manager/plan-labtest-migrate-beyond.png)

## <a name="plan"></a><span data-ttu-id="43119-110">Pianificare</span><span class="sxs-lookup"><span data-stu-id="43119-110">Plan</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="43119-111">Considerazioni tecniche e compromessi</span><span class="sxs-lookup"><span data-stu-id="43119-111">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="43119-112">In base alla quantità di requisiti tecnici, alle aree geografiche e alle procedure operative, è necessario considerare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="43119-112">Depending on your technical requirements size, geographies and operational practices, you might want to consider:</span></span>

1. <span data-ttu-id="43119-113">Perché si vuole usare Azure Resource Manager per l'organizzazione?</span><span class="sxs-lookup"><span data-stu-id="43119-113">Why is Azure Resource Manager desired for your organization?</span></span>  <span data-ttu-id="43119-114">Quali sono i motivi aziendali della scelta della migrazione?</span><span class="sxs-lookup"><span data-stu-id="43119-114">What are the business reasons for a migration?</span></span>
2. <span data-ttu-id="43119-115">Quali sono i motivi tecnici della scelta di Azure Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="43119-115">What are the technical reasons for Azure Resource Manager?</span></span>  <span data-ttu-id="43119-116">Quali eventuali servizi aggiuntivi di Azure si desidera sfruttare?</span><span class="sxs-lookup"><span data-stu-id="43119-116">What (if any) additional Azure services would you like to leverage?</span></span>
3. <span data-ttu-id="43119-117">Quale applicazione (o set di macchine virtuali) è inclusa nella migrazione?</span><span class="sxs-lookup"><span data-stu-id="43119-117">Which application (or sets of virtual machines) is included in the migration?</span></span>
4. <span data-ttu-id="43119-118">Quali scenari sono supportati con l'API di migrazione?</span><span class="sxs-lookup"><span data-stu-id="43119-118">Which scenarios are supported with the migration API?</span></span>  <span data-ttu-id="43119-119">Esaminare le [funzionalità e configurazioni non supportate](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations).</span><span class="sxs-lookup"><span data-stu-id="43119-119">Review the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations).</span></span>
5. <span data-ttu-id="43119-120">I team operativi supporteranno le applicazioni/macchine virtuali sia nel modello di distribuzione classica che in Azure Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="43119-120">Will your operational teams now support applications/VMs in both Classic and Azure Resource Manager?</span></span>
6. <span data-ttu-id="43119-121">Come cambieranno eventualmente i processi di distribuzione, gestione, monitoraggio e report delle VM con Azure Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="43119-121">How (if at all) does Azure Resource Manager change your VM deployment, management, monitoring, and reporting processes?</span></span>  <span data-ttu-id="43119-122">Gli script di distribuzione devono essere aggiornati?</span><span class="sxs-lookup"><span data-stu-id="43119-122">Do your deployment scripts need to be updated?</span></span>
7. <span data-ttu-id="43119-123">Come è organizzato il piano delle comunicazioni per informare gli stakeholder ossia gli utenti finali, i proprietari delle applicazioni e i proprietari delle infrastrutture?</span><span class="sxs-lookup"><span data-stu-id="43119-123">What is the communications plan to alert stakeholders (end users, application owners, and infrastructure owners)?</span></span>
8. <span data-ttu-id="43119-124">A seconda della complessità dell'ambiente, è previsto un periodo di manutenzione in cui l'applicazione non sarà disponibile per gli utenti finali e i proprietari dell'applicazione?</span><span class="sxs-lookup"><span data-stu-id="43119-124">Depending on the complexity of the environment, should there be a maintenance period where the application is unavailable to end users and to application owners?</span></span>  <span data-ttu-id="43119-125">In questo caso, per quanto tempo?</span><span class="sxs-lookup"><span data-stu-id="43119-125">If so, for how long?</span></span>
9. <span data-ttu-id="43119-126">Come è organizzato il piano di formazione per l'addestramento e la conoscenza di Azure Resource Manager per gli stakeholder?</span><span class="sxs-lookup"><span data-stu-id="43119-126">What is the training plan to ensure stakeholders are knowledgeable and proficient in Azure Resource Manager?</span></span>
10. <span data-ttu-id="43119-127">Come è organizzato il piano di gestione del progetto o del programma per la migrazione?</span><span class="sxs-lookup"><span data-stu-id="43119-127">What is the program management or project management plan for the migration?</span></span>
11. <span data-ttu-id="43119-128">Quali sono le sequenze temporali della migrazione di Azure Resource Manager e gli altri piani d'azione correlati alla tecnologia?</span><span class="sxs-lookup"><span data-stu-id="43119-128">What are the timelines for the Azure Resource Manager migration and other related technology road maps?</span></span>  <span data-ttu-id="43119-129">Sono allineati in modo ottimale?</span><span class="sxs-lookup"><span data-stu-id="43119-129">Are they optimally aligned?</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="43119-130">Modelli di successo</span><span class="sxs-lookup"><span data-stu-id="43119-130">Patterns of success</span></span>

<span data-ttu-id="43119-131">I clienti di successo hanno piani dettagliati in cui le domande precedenti sono discusse, documentate e organizzate.</span><span class="sxs-lookup"><span data-stu-id="43119-131">Successful customers have detailed plans where the preceding questions are discussed, documented and governed.</span></span>  <span data-ttu-id="43119-132">Assicurarsi che i piani di migrazione vengano dettagliatamente comunicati agli sponsor e agli stakeholder.</span><span class="sxs-lookup"><span data-stu-id="43119-132">Ensure the migration plans are broadly communicated to sponsors and stakeholders.</span></span>  <span data-ttu-id="43119-133">Acquisire familiarità con le opzioni di migrazione; è consigliabile leggere i documenti sulla migrazione qui di seguito.</span><span class="sxs-lookup"><span data-stu-id="43119-133">Equip yourself with knowledge about your migration options; reading through this migration document set below is highly recommended.</span></span>

* <span data-ttu-id="43119-134">[Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Panoramica sulla migrazione supportata dalla piattaforma per risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="43119-134">[Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span></span>
* [<span data-ttu-id="43119-135">Approfondimento tecnico sulla migrazione supportata dalla piattaforma dal modello di distribuzione classica ad Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="43119-135">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-deep-dive.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* <span data-ttu-id="43119-136">[Planning for migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-plan.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Pianificazione della migrazione delle risorse IaaS dal modello di distribuzione classica al modello di distribuzione Azure Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="43119-136">[Planning for migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-plan.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span></span>
* [<span data-ttu-id="43119-137">Usare PowerShell per eseguire la migrazione di risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="43119-137">Use PowerShell to migrate IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-ps.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="43119-138">Usare l'interfaccia della riga di comando per eseguire la migrazione di risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="43119-138">Use CLI to migrate IaaS resources from classic to Azure Resource Manager</span></span>](../linux/migration-classic-resource-manager-cli.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* <span data-ttu-id="43119-139">[Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Strumenti della community per assistenza alla migrazione delle risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="43119-139">[Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span></span>
* [<span data-ttu-id="43119-140">Rivedere gli errori di migrazione più comuni</span><span class="sxs-lookup"><span data-stu-id="43119-140">Review most common migration errors</span></span>](migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="43119-141">Esaminare le domande frequenti sulla migrazione delle risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="43119-141">Review the most frequently asked questions about migrating IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-faq.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="43119-142">Errori da evitare</span><span class="sxs-lookup"><span data-stu-id="43119-142">Pitfalls to avoid</span></span>

- <span data-ttu-id="43119-143">Errori di pianificazione.</span><span class="sxs-lookup"><span data-stu-id="43119-143">Failure to plan.</span></span>  <span data-ttu-id="43119-144">I passaggi tecnici della migrazione sono collaudati e il risultato è prevedibile.</span><span class="sxs-lookup"><span data-stu-id="43119-144">The technology steps of this migration are proven and the outcome is predictable.</span></span>
- <span data-ttu-id="43119-145">Si presuppone che l'API per la migrazione supportata dalla piattaforma terrà in considerazione tutti gli scenari.</span><span class="sxs-lookup"><span data-stu-id="43119-145">Assumption that the platform supported migration API will account for all scenarios.</span></span> <span data-ttu-id="43119-146">Leggere la sezione [funzionalità e configurazioni non supportate](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) per comprendere quali sono gli scenari supportati.</span><span class="sxs-lookup"><span data-stu-id="43119-146">Read the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) to understand what scenarios are supported.</span></span>
- <span data-ttu-id="43119-147">Nessuna pianificazione di potenziali interruzioni delle applicazioni per gli utenti finali.</span><span class="sxs-lookup"><span data-stu-id="43119-147">Not planning potential application outage for end users.</span></span>  <span data-ttu-id="43119-148">Pianificare un buffer sufficiente per informare adeguatamente gli utenti finali della potenziale non disponibilità delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="43119-148">Plan enough buffer to adequately warn end users of potentially unavailable application time.</span></span>


## <a name="lab-test"></a><span data-ttu-id="43119-149">Test di laboratorio</span><span class="sxs-lookup"><span data-stu-id="43119-149">Lab Test</span></span>

<span data-ttu-id="43119-150">**Replicare l'ambiente ed eseguire una migrazione di test**</span><span class="sxs-lookup"><span data-stu-id="43119-150">**Replicate your environment and do a test migration**</span></span>
  > [!NOTE]
  > <span data-ttu-id="43119-151">La replica esatta dell'ambiente esistente viene eseguita tramite uno strumento creato dalla community che non è ufficialmente supportato dal supporto tecnico Microsoft.</span><span class="sxs-lookup"><span data-stu-id="43119-151">Exact replication of your existing environment is executed by using a community-contributed tool which is not officially supported by Microsoft Support.</span></span> <span data-ttu-id="43119-152">È pertanto un passaggio **facoltativo** ma è il modo migliore per individuare i problemi senza modificare gli ambienti di produzione.</span><span class="sxs-lookup"><span data-stu-id="43119-152">Therefore, it is an **optional** step but it is the best way to find out issues without touching your production environments.</span></span> <span data-ttu-id="43119-153">Se non è possibile usare uno strumento creato dalla community, leggere le raccomandazioni su convalida/preparazione/interruzione di prova qui di seguito.</span><span class="sxs-lookup"><span data-stu-id="43119-153">If using a community-contributed tool is not an option, then read about the Validate/Prepare/Abort Dry Run recommendation below.</span></span>
  >

  <span data-ttu-id="43119-154">L'esecuzione di un test di laboratorio dello scenario esatto ossia calcolo, rete e archiviazione è il modo migliore per garantire una migrazione senza problemi.</span><span class="sxs-lookup"><span data-stu-id="43119-154">Conducting a lab test of your exact scenario (compute, networking, and storage) is the best way to ensure a smooth migration.</span></span> <span data-ttu-id="43119-155">In modo da garantire:</span><span class="sxs-lookup"><span data-stu-id="43119-155">This will help ensure:</span></span>

  - <span data-ttu-id="43119-156">Un laboratorio completamente separato o un ambiente non di produzione esistente su cui eseguire test.</span><span class="sxs-lookup"><span data-stu-id="43119-156">A wholly separate lab or an existing non-production environment to test.</span></span> <span data-ttu-id="43119-157">È consigliabile un laboratorio totalmente separato che possa essere migrato ripetutamente e modificato in modo distruttivo.</span><span class="sxs-lookup"><span data-stu-id="43119-157">We recommend a wholly separate lab that can be migrated repeatedly and can be destructively modified.</span></span>  <span data-ttu-id="43119-158">Gli script per raccogliere/idratare i metadati delle sottoscrizioni reali sono elencati di seguito.</span><span class="sxs-lookup"><span data-stu-id="43119-158">Scripts to collect/hydrate metadata from the real subscriptions are listed below.</span></span>
  - <span data-ttu-id="43119-159">È consigliabile creare il laboratorio in una sottoscrizione separata.</span><span class="sxs-lookup"><span data-stu-id="43119-159">It's a good idea to create the lab in a separate subscription.</span></span> <span data-ttu-id="43119-160">Il motivo è che il lab verrà ripetutamente rimosso e avere una sottoscrizione separata riduce il rischio di eliminare accidentalmente componenti reali.</span><span class="sxs-lookup"><span data-stu-id="43119-160">The reason is that the lab will be torn down repeatedly, and having a separate, isolated subscription will reduce the chance that something real will get accidentally deleted.</span></span>

  <span data-ttu-id="43119-161">Questa operazione si può fare usando lo strumento AsmMetadataParser.</span><span class="sxs-lookup"><span data-stu-id="43119-161">This can be accomplished by using the AsmMetadataParser tool.</span></span> [<span data-ttu-id="43119-162">Per altre informazioni su questo strumento vedere qui</span><span class="sxs-lookup"><span data-stu-id="43119-162">Read more about this tool here</span></span>](https://github.com/Azure/classic-iaas-resourcemanager-migration/tree/master/AsmToArmMigrationApiToolset)

### <a name="patterns-of-success"></a><span data-ttu-id="43119-163">Modelli di successo</span><span class="sxs-lookup"><span data-stu-id="43119-163">Patterns of success</span></span>

<span data-ttu-id="43119-164">Di seguito sono elencati i problemi rilevati in molte migrazioni di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="43119-164">The following were issues discovered in many of the larger migrations.</span></span> <span data-ttu-id="43119-165">Non si tratta di un elenco completo. Per altri dettagli fare riferimento a [funzionalità e configurazioni non supportate](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations).</span><span class="sxs-lookup"><span data-stu-id="43119-165">This is not an exhaustive list and you should refer to the [unsupported features and configurations](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json#unsupported-features-and-configurations) for more detail.</span></span>  <span data-ttu-id="43119-166">Questi problemi tecnici potrebbero anche non verificarsi, ma se vengono risolti prima della migrazione, questa sarà più semplice.</span><span class="sxs-lookup"><span data-stu-id="43119-166">You may or may not encounter these technical issues but if you do solving these before attempting migration will ensure a smoother experience.</span></span>

- <span data-ttu-id="43119-167">**Eseguire una convalida/preparazione/interruzione di prova** - Questo passaggio è probabilmente quello più importante per garantire una corretta migrazione dal modello di distribuzione classica ad Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-167">**Do a Validate/Prepare/Abort Dry Run** -  This is perhaps the most important step to ensure Classic to Azure Resource Manager migration success.</span></span> <span data-ttu-id="43119-168">L'API di migrazione prevede tre passaggi principali: Convalida, Preparazione e Commit.</span><span class="sxs-lookup"><span data-stu-id="43119-168">The migration API has three main steps: Validate, Prepare and Commit.</span></span> <span data-ttu-id="43119-169">La convalida leggerà lo stato dell'ambiente di distribuzione classica e restituirà come risultato tutti i problemi.</span><span class="sxs-lookup"><span data-stu-id="43119-169">Validate will read the state of your classic environment and return a result of all issues.</span></span> <span data-ttu-id="43119-170">Alcuni problemi tuttavia potrebbero non essere rilevati in quanto presenti nello stack di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-170">However, because some issues might exist in the Azure Resource Manager stack, Validate will not catch everything.</span></span> <span data-ttu-id="43119-171">Il passaggio successivo nel processo di migrazione, la preparazione, consente di rilevare questi problemi.</span><span class="sxs-lookup"><span data-stu-id="43119-171">The next step in migration process, Prepare will help expose those issues.</span></span> <span data-ttu-id="43119-172">La preparazione sposterà i metadati dal modello di distribuzione classica ad Azure Resource Manager ma non eseguirà il commit dello spostamento e non rimuoverà o modificherà nulla nel modello di distribuzione classica.</span><span class="sxs-lookup"><span data-stu-id="43119-172">Prepare will move the metadata from Classic to Azure Resource Manager, but will not commit the move, and will not remove or change anything on the Classic side.</span></span> <span data-ttu-id="43119-173">L'interruzione di prova consiste nel preparare la migrazione e quindi di interrompere la preparazione ossia **non eseguire il commit**.</span><span class="sxs-lookup"><span data-stu-id="43119-173">The dry run involves preparing the migration, then aborting (**not committing**) the migration prepare.</span></span> <span data-ttu-id="43119-174">L'obiettivo di convalida/preparazione/interruzione di prova è visualizzare tutti i metadati nello stack Azure Resource Manager, esaminarli (*a livello di codice o nel portale*), verificare che la migrazione avvenga correttamente e risolvere i problemi tecnici.</span><span class="sxs-lookup"><span data-stu-id="43119-174">The goal of validate/prepare/abort dry run is to see all of the metadata in the Azure Resource Manager stack, examine it (*programmatically or in Portal*), and verify that everything migrates correctly, and work through technical issues.</span></span>  <span data-ttu-id="43119-175">Inoltre si avrà un'idea della durata della migrazione in modo che sia possibile pianificare di conseguenza i tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="43119-175">It will also give you a sense of migration duration so you can plan for downtime accordingly.</span></span>  <span data-ttu-id="43119-176">Una convalida/preparazione/interruzione di prova non causa tempi di inattività e pertanto non crea problemi per l'uso delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="43119-176">A validate/prepare/abort does not cause any user downtime; therefore, it is non-disruptive to application usage.</span></span>
  - <span data-ttu-id="43119-177">Gli elementi seguenti dovranno essere risolti prima della prova, ma un test di interruzione di prova rileverà anche eventuali passaggi di preparazione mancanti.</span><span class="sxs-lookup"><span data-stu-id="43119-177">The items below will need to be solved before the dry run, but a dry run test will also safely flush out these preparation steps if they are missed.</span></span> <span data-ttu-id="43119-178">Durante la migrazione al livello enterprise, è stato rilevato che la prova è un modo sicuro e prezioso per semplificare la migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-178">During enterprise migration, we've found the dry run to be a safe and invaluable way to ensure migration readiness.</span></span>
  - <span data-ttu-id="43119-179">Nella fase di preparazione il piano di controllo, ossia le operazioni di gestione di Azure, verrà bloccato per tutta la rete virtuale e pertanto non sarà possibile apportare modifiche ai metadati delle macchine virtuali durante la convalida/preparazione/interruzione.</span><span class="sxs-lookup"><span data-stu-id="43119-179">When prepare is running, the control plane (Azure management operations) will be locked for the whole virtual network, so no changes can be made to VM metadata during validate/prepare/abort.</span></span>  <span data-ttu-id="43119-180">A parte questo, tutte le funzioni delle applicazioni, ad esempio l'uso del desktop remoto, le macchine virtuali e così via, non saranno interessate.</span><span class="sxs-lookup"><span data-stu-id="43119-180">But otherwise any application function (RD, VM usage, etc.) will be unaffected.</span></span>  <span data-ttu-id="43119-181">Gli utenti delle VM non sapranno che è in esecuzione la prova.</span><span class="sxs-lookup"><span data-stu-id="43119-181">Users of the VMs will not know that the dry run is being executed.</span></span>

- <span data-ttu-id="43119-182">**Circuiti ExpressRoute e VPN**.</span><span class="sxs-lookup"><span data-stu-id="43119-182">**Express Route Circuits and VPN**.</span></span> <span data-ttu-id="43119-183">I gateway ExpressRoute con collegamenti di autorizzazione attualmente non possono essere migrati senza tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="43119-183">Currently Express Route Gateways with authorization links cannot be migrated without downtime.</span></span> <span data-ttu-id="43119-184">Per una soluzione vedere [Eseguire la migrazione di circuiti ExpressRoute e delle reti virtuali associate dalla distribuzione classica al modello di distribuzione Resource Manager](../../expressroute/expressroute-migration-classic-resource-manager.md).</span><span class="sxs-lookup"><span data-stu-id="43119-184">For the workaround, see [Migrate ExpressRoute circuits and associated virtual networks from the classic to the Resource Manager deployment model](../../expressroute/expressroute-migration-classic-resource-manager.md).</span></span>

- <span data-ttu-id="43119-185">**Estensioni VM** - Le estensioni macchina virtuale sono potenzialmente uno degli ostacoli principali della migrazione di macchine virtuali in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="43119-185">**VM Extensions** - Virtual Machine extensions are potentially one of the biggest roadblocks to migrating running VMs.</span></span> <span data-ttu-id="43119-186">Pianificare tenendo conto che la correzione delle estensioni VM potrebbe richiedere fino a 1-2 giorni.</span><span class="sxs-lookup"><span data-stu-id="43119-186">Remediation of VM Extensions could take upwards of 1-2 days, so plan accordingly.</span></span>  <span data-ttu-id="43119-187">È necessario un agente Azure funzionante per segnalare lo stato delle estensioni VM delle VM in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="43119-187">A working Azure agent is needed to report back VM Extension status of running VMs.</span></span> <span data-ttu-id="43119-188">Se per una VM in esecuzione viene restituito uno stato non valido, la migrazione si arresta.</span><span class="sxs-lookup"><span data-stu-id="43119-188">If the status comes back as bad for a running VM, this will halt migration.</span></span> <span data-ttu-id="43119-189">L'agente stesso non deve essere funzionante per abilitare la migrazione, ma se esistono estensioni nella macchina virtuale, per il progredire della migrazione saranno necessari sia un agente funzionante SIA una connessione Internet in uscita (con DNS).</span><span class="sxs-lookup"><span data-stu-id="43119-189">The agent itself does not need to be in working order to enable migration, but if extensions exist on the VM, then both a working agent AND outbound internet connectivity (with DNS) will be needed for migration to move forward.</span></span>
  - <span data-ttu-id="43119-190">Se la connettività a un server DNS viene persa durante la migrazione, tutte le estensioni delle VM tranne BGInfo versione 1.\* devono essere rimosse da ogni VM prima della preparazione della migrazione e riaggiunte alla VM dopo la migrazione ad Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-190">If connectivity to a DNS server is lost during migration, all VM Extensions except BGInfo version 1.\* need to first be removed from every VM before migration prepare, and subsequently re-added back to the VM after Azure Resource Manager migration.</span></span>  <span data-ttu-id="43119-191">**Questo vale solo per le VM in esecuzione.**</span><span class="sxs-lookup"><span data-stu-id="43119-191">**This is only for VMs that are running.**</span></span>  <span data-ttu-id="43119-192">Se le macchine virtuali sono arrestate (deallocate), non è necessario rimuovere le estensioni VM.</span><span class="sxs-lookup"><span data-stu-id="43119-192">If the VMs are stopped deallocated, VM Extensions do not need to be removed.</span></span>

  > [!NOTE]
  > <span data-ttu-id="43119-193">Molte estensioni come Diagnostica Azure e il monitoraggio del centro sicurezza si reinstalleranno automaticamente dopo la migrazione, per cui la loro rimozione non è un problema.</span><span class="sxs-lookup"><span data-stu-id="43119-193">Many extensions like Azure diagnostics and security center monitoring will reinstall themselves after migration, so removing them is not a problem.</span></span>

  - <span data-ttu-id="43119-194">Assicurarsi inoltre che non ci siano Gruppi di sicurezza di rete che limitano l'accesso Internet in uscita.</span><span class="sxs-lookup"><span data-stu-id="43119-194">In addition, make sure Network Security Groups are not restricting outbound internet access.</span></span> <span data-ttu-id="43119-195">Questa situazione può verificarsi con alcune configurazioni di Gruppi di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="43119-195">This can happen with some Network Security Groups configurations.</span></span> <span data-ttu-id="43119-196">Per la migrazione delle estensioni VM ad Azure Resource Manager è necessario l'accesso a Internet in uscita e DNS.</span><span class="sxs-lookup"><span data-stu-id="43119-196">Outbound internet access (and DNS) is needed for VM Extensions to be migrated to Azure Resource Manager.</span></span>
  - <span data-ttu-id="43119-197">Esistono due versioni dell'estensione BGInfo, denominate 1 e 2.</span><span class="sxs-lookup"><span data-stu-id="43119-197">Two versions of the BGInfo extension exist and are called versions 1 and 2.</span></span>  

      - <span data-ttu-id="43119-198">Se la VM usa l'estensione BGInfo versione 1, è possibile lasciare invariata questa estensione.</span><span class="sxs-lookup"><span data-stu-id="43119-198">If the VM is using the BGInfo version 1 extension, you can leave this extension as is.</span></span> <span data-ttu-id="43119-199">L'API di migrazione ignora questa estensione.</span><span class="sxs-lookup"><span data-stu-id="43119-199">The migration API skips this extension.</span></span> <span data-ttu-id="43119-200">L'estensione BGInfo può essere aggiunta dopo la migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-200">The BGInfo extension can be added after migration.</span></span>
      - <span data-ttu-id="43119-201">Se la VM usa l'estensione basata su JSON BGInfo versione 2, la VM è stata creata con il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="43119-201">If the VM is using the JSON-based BGInfo version 2 extension, the VM was created using the Azure portal.</span></span> <span data-ttu-id="43119-202">L'API di migrazione include questa estensione nella migrazione ad Azure Resource Manager, purché l'agente funzioni e abbia accesso a Internet in uscita (e DNS).</span><span class="sxs-lookup"><span data-stu-id="43119-202">The migration API includes this extension in the migration to Azure Resource Manager, provided the agent is working and has outbound internet access (and DNS).</span></span>

  - <span data-ttu-id="43119-203">**Opzione di correzione 1**.</span><span class="sxs-lookup"><span data-stu-id="43119-203">**Remediation Option 1**.</span></span> <span data-ttu-id="43119-204">Se si prevede che le macchine virtuali non disporranno di accesso a Internet in uscita, di un servizio DNS funzionante e di agenti di Azure funzionanti su di esse, disinstallare tutte le estensioni VM come parte della migrazione prima della preparazione, quindi reinstallarle dopo la migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-204">If you know your VMs will not have outbound internet access, a working DNS service, and working Azure agents on the VMs, then uninstall all VM extensions as part of the migration before Prepare, then reinstall the VM Extensions after migration.</span></span>
  - <span data-ttu-id="43119-205">**Opzione di correzione 2**.</span><span class="sxs-lookup"><span data-stu-id="43119-205">**Remediation Option 2**.</span></span> <span data-ttu-id="43119-206">Se le estensioni VM sono un ostacolo troppo grande, un'altra opzione è quella di arrestare/deallocare tutte le macchine virtuali prima della migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-206">If VM extensions are too big of a hurdle, another option is to shutdown/deallocate all VMs before migration.</span></span> <span data-ttu-id="43119-207">Eseguire la migrazione delle VM deallocate, quindi riavviarle in Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-207">Migrate the deallocated VMs, then restart them on the Azure Resource Manager side.</span></span> <span data-ttu-id="43119-208">Il vantaggio è che le estensioni VM verranno migrate.</span><span class="sxs-lookup"><span data-stu-id="43119-208">The benefit here is that VM extensions will migrate.</span></span> <span data-ttu-id="43119-209">Lo svantaggio è che tutti gli indirizzi IP virtuali pubblici andranno persi con esito potenzialmente negativo e ovviamente le VM si arresteranno causando un impatto maggiore sulle applicazioni in funzione.</span><span class="sxs-lookup"><span data-stu-id="43119-209">The downside is that all public facing Virtual IPs will be lost (this may be a non-starter), and obviously the VMs will shut down causing a much greater impact on working applications.</span></span>

    > [!NOTE]
    > <span data-ttu-id="43119-210">Se per le macchine virtuali che si stanno migrando sono configurati criteri del Centro sicurezza di Azure, i criteri di sicurezza devono essere arrestati prima di rimuovere le estensioni altrimenti l'estensione di monitoraggio della protezione verrà reinstallata automaticamente nella macchina virtuale dopo la sua rimozione.</span><span class="sxs-lookup"><span data-stu-id="43119-210">If an Azure Security Center policy is configured against the running VMs being migrated, the security policy needs to be stopped before removing extensions, otherwise the security monitoring extension will be reinstalled automatically on the VM after removing it.</span></span>

- <span data-ttu-id="43119-211">**Set di disponibilità**. Per una rete virtuale (vNet) da migrare ad Azure Resource Manager, è necessario che le macchine virtuali contenute nel modello di distribuzione classica, ossia il servizio cloud, siano tutte in un set di disponibilità oppure che nessuna di esse sia in un set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="43119-211">**Availability Sets** - For a virtual network (vNet) to be migrated to Azure Resource Manager, the Classic deployment (i.e. cloud service) contained VMs must all be in one availability set, or the VMs must all not be in any availability set.</span></span> <span data-ttu-id="43119-212">Il servizio cloud con più di un set di disponibilità non è compatibile con Azure Resource Manager e interromperà la migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-212">Having more than one availability set in the cloud service is not compatible with Azure Resource Manager and will halt migration.</span></span>  <span data-ttu-id="43119-213">Non ci possono essere inoltre alcune macchine virtuali in un set di disponibilità e alcune macchine virtuali non in un set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="43119-213">Additionally, there cannot be some VMs in an availability set, and some VMs not in an availability set.</span></span> <span data-ttu-id="43119-214">Per risolvere questo problema, è necessario correggere o ridisporre il servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="43119-214">To resolve this, you will need to remediate or reshuffle your cloud service.</span></span>  <span data-ttu-id="43119-215">Pianificare di conseguenza, in quanto questa operazione potrebbe richiedere molto tempo.</span><span class="sxs-lookup"><span data-stu-id="43119-215">Plan accordingly as this might be time consuming.</span></span>

- <span data-ttu-id="43119-216">**Distribuzioni del ruolo Web/di lavoro**. I servizi Cloud che contengono ruoli Web e di lavoro non possono migrare ad Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-216">**Web/Worker Role Deployments** -  Cloud Services containing web and worker roles cannot migrate to Azure Resource Manager.</span></span> <span data-ttu-id="43119-217">I ruoli Web/di lavoro devono essere rimossi dalla rete virtuale prima di avviare la migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-217">The web/worker roles must first be removed from the virtual network before migration can start.</span></span>  <span data-ttu-id="43119-218">Una soluzione tipica è quella di spostare le istanze del ruolo Web/di lavoro in una rete virtuale classica separata che è collegata anche a un circuito ExpressRoute o di migrare il codice a servizi app PaaS più recenti (questa discussione va oltre l'ambito di questo documento).</span><span class="sxs-lookup"><span data-stu-id="43119-218">A typical solution is to just move web/worker role instances to a separate Classic virtual network that is also linked to an ExpressRoute circuit, or to migrate the code to newer PaaS App Services (this discussion is beyond the scope of this document).</span></span> <span data-ttu-id="43119-219">Nel primo caso di ridistribuzione, creare una nuova rete virtuale classica, spostare/ridistribuire i ruoli Web/di lavoro nella nuova rete virtuale, quindi eliminare le distribuzioni dalla rete virtuale da spostare.</span><span class="sxs-lookup"><span data-stu-id="43119-219">In the former redeploy case, create a new Classic virtual network, move/redeploy the web/worker roles to that new virtual network, then delete the deployments from the virtual network being moved.</span></span> <span data-ttu-id="43119-220">Non è necessaria alcuna modifica nel codice.</span><span class="sxs-lookup"><span data-stu-id="43119-220">No code changes required.</span></span> <span data-ttu-id="43119-221">La nuova funzionalità [Peering reti virtuali](../../virtual-network/virtual-network-peering-overview.md) può essere usata per eseguire il peering della rete virtuale classica contenente i ruoli Web/di lavoro e di altre reti virtuali nella stessa area di Azure, ad esempio la rete virtuale che si sta migrando, **dopo il completamento della migrazione della rete virtuale poiché le reti virtuali sottoposte a peering non possono essere migrate**, garantendo le stesse funzionalità senza perdita di prestazioni e senza problemi di larghezza di banda/latenza.</span><span class="sxs-lookup"><span data-stu-id="43119-221">The new [Virtual Network Peering](../../virtual-network/virtual-network-peering-overview.md) capability can be used to peer together the classic virtual network containing the web/worker roles and other virtual networks in the same Azure region such as the virtual network being migrated (**after virtual network migration is completed as peered virtual networks cannot be migrated**), hence providing the same capabilities with no performance loss and no latency/bandwidth penalties.</span></span> <span data-ttu-id="43119-222">Con l'aggiunta del [Peering reti virtuali](../../virtual-network/virtual-network-peering-overview.md) le distribuzioni del ruolo Web/di lavoro ora possono essere facilmente ridotte e non bloccano la migrazione ad Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-222">Given the addition of [Virtual Network Peering](../../virtual-network/virtual-network-peering-overview.md), web/worker role deployments can now easily be mitigated and not block the migration to Azure Resource Manager.</span></span>

- <span data-ttu-id="43119-223">**Le quote di Azure Resource Manager** - Le aree di Azure hanno di quote/limiti separati per il modello di distribuzione classica e per Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-223">**Azure Resource Manager Quotas** - Azure regions have separate quotas/limits for both Classic and Azure Resource Manager.</span></span> <span data-ttu-id="43119-224">Anche se in uno scenario di migrazione non è usato nuovo hardware in quanto *si stanno scambiando macchine virtuali esistenti dalla distribuzione classica ad Azure Resource Manager*, le quote di Azure Resource Manager devono comunque avere una capacità sufficiente prima di avviare la migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-224">Even though in a migration scenario new hardware isn't being consumed *(we're swapping existing VMs from Classic to Azure Resource Manager)*, Azure Resource Manager quotas still need to be in place with enough capacity before migration can start.</span></span> <span data-ttu-id="43119-225">Di seguito sono elencati i principali limiti che causano problemi.</span><span class="sxs-lookup"><span data-stu-id="43119-225">Listed below are the major limits we've seen cause problems.</span></span>  <span data-ttu-id="43119-226">Aprire un ticket di supporto di quota per aumentare i limiti.</span><span class="sxs-lookup"><span data-stu-id="43119-226">Open a quota support ticket to raise the limits.</span></span>

    > [!NOTE]
    > <span data-ttu-id="43119-227">Questi limiti devono essere aumentati nella stessa area dell'ambiente di cui eseguire la migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-227">These limits need to be raised in the same region as your current environment to be migrated.</span></span>
    >

    - <span data-ttu-id="43119-228">Interfacce di rete</span><span class="sxs-lookup"><span data-stu-id="43119-228">Network Interfaces</span></span>
    - <span data-ttu-id="43119-229">Servizi di bilanciamento del carico</span><span class="sxs-lookup"><span data-stu-id="43119-229">Load Balancers</span></span>
    - <span data-ttu-id="43119-230">Indirizzi IP pubblici</span><span class="sxs-lookup"><span data-stu-id="43119-230">Public IPs</span></span>
    - <span data-ttu-id="43119-231">Indirizzi IP pubblici statici</span><span class="sxs-lookup"><span data-stu-id="43119-231">Static Public IPs</span></span>
    - <span data-ttu-id="43119-232">Core</span><span class="sxs-lookup"><span data-stu-id="43119-232">Cores</span></span>
    - <span data-ttu-id="43119-233">Gruppi di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="43119-233">Network Security Groups</span></span>
    - <span data-ttu-id="43119-234">Tabelle di route</span><span class="sxs-lookup"><span data-stu-id="43119-234">Route Tables</span></span>

    <span data-ttu-id="43119-235">È possibile controllare le quote correnti di Azure Resource Manager usando i comandi seguenti con la versione più recente di Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="43119-235">You can check your current Azure Resource Manager quotas using the following commands with the latest version of Azure PowerShell.</span></span>

    <span data-ttu-id="43119-236">**Calcolo** *(memoria centrale, set di disponibilità)*</span><span class="sxs-lookup"><span data-stu-id="43119-236">**Compute** *(Cores, Availability Sets)*</span></span>

    ```powershell
    Get-AzureRmVMUsage -Location <azure-region>
    ```

    <span data-ttu-id="43119-237">**Rete** *(reti virtuali, indirizzi IP statici, indirizzi IP pubblici, gruppi di sicurezza di rete, interfacce di rete, bilanciamenti del carico, tabelle route)*</span><span class="sxs-lookup"><span data-stu-id="43119-237">**Network** *(Virtual Networks, Static Public IPs, Public IPs, Network Security Groups, Network Interfaces, Load Balancers, Route Tables)*</span></span>

    ```powershell
    Get-AzureRmUsage /subscriptions/<subscription-id>/providers/Microsoft.Network/locations/<azure-region> -ApiVersion 2016-03-30 | Format-Table
    ```

    <span data-ttu-id="43119-238">**Risorsa di archiviazione** *(account di archiviazione)*</span><span class="sxs-lookup"><span data-stu-id="43119-238">**Storage** *(Storage Account)*</span></span>

    ```powershell
    Get-AzureRmStorageUsage
    ```

- <span data-ttu-id="43119-239">**Limitazioni dell'API di Azure Resource Manager** - In presenza di un ambiente sufficientemente grande, ad esempio,</span><span class="sxs-lookup"><span data-stu-id="43119-239">**Azure Resource Manager API throttling limits** - If you have a large enough environment (eg.</span></span> <span data-ttu-id="43119-240">> 400 macchine virtuali in una rete virtuale, è possibile che si raggiunga la limitazione di scritture predefinita dell'API (attualmente `1200 writes/hour`) in Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-240">> 400 VMs in a VNET), you might hit the default API throttling limits for writes (currently `1200 writes/hour`) in Azure Resource Manager.</span></span> <span data-ttu-id="43119-241">Prima di iniziare la migrazione, è necessario generare un ticket di supporto per aumentare questo limite per la sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="43119-241">Before starting migration, you should raise a support ticket to increase this limit for your subscription.</span></span>


- <span data-ttu-id="43119-242">**Il provisioning ha raggiunto il timeout dello stato della VM**: se qualsiasi VM ha lo stato `provisioning timed out`, questo problema deve essere risolto prima della migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-242">**Provisioning Timed Out VM Status** - If any VM has the status of `provisioning timed out`, this needs to be resolved pre-migration.</span></span> <span data-ttu-id="43119-243">L'unico modo per eseguire questa operazione è con il tempo di inattività mediante il deprovisioning/nuovo provisioning della macchina virtuale: eliminarla, mantenere il disco e ricreare la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="43119-243">The only way to do this is with downtime by deprovisioning/reprovisioning the VM (delete it, keep the disk, and recreate the VM).</span></span>

- <span data-ttu-id="43119-244">**Stato della macchina virtuale RoleStateUnknown** - Se la migrazione si arresta a causa di un messaggio di errore `role state unknown`, esaminare la macchina virtuale usando il portale e verificare sia in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="43119-244">**RoleStateUnknown VM Status** - If migration halts due to a `role state unknown` error message, inspect the VM using the portal and ensure it is running.</span></span> <span data-ttu-id="43119-245">Questo errore in genere scompare da solo (nessuna correzione necessaria) dopo alcuni minuti ed è spesso temporaneo e spesso si verifica durante operazioni `start`, `stop`, `restart` di una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="43119-245">This error will typically go away on its own (no remediation required) after a few minutes and is often a transient type often seen during a Virtual Machine `start`, `stop`, `restart` operations.</span></span> <span data-ttu-id="43119-246">**Procedura consigliata:** ritentare nuovamente la migrazione dopo alcuni minuti.</span><span class="sxs-lookup"><span data-stu-id="43119-246">**Recommended practice:** re-try migration again after a few minutes.</span></span>

- <span data-ttu-id="43119-247">**Cluster di infrastruttura inesistente**: in alcuni casi, alcune VM non possono essere migrate per vari motivi.</span><span class="sxs-lookup"><span data-stu-id="43119-247">**Fabric Cluster does not exist** -  In some cases, certain VMs cannot be migrated for various odd reasons.</span></span> <span data-ttu-id="43119-248">Uno di questi casi noti è se la VM è stata creata di recente, circa da una settimana, ed è stata indirizzata a un cluster di Azure non ancora configurato per carichi di lavoro di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-248">One of these known cases is if the VM was recently created (within the last week or so) and happened to land an Azure cluster that is not yet equipped for Azure Resource Manager workloads.</span></span>  <span data-ttu-id="43119-249">Si riceverà un errore `fabric cluster does not exist` e non è possibile eseguire la migrazione della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="43119-249">You will get an error that says `fabric cluster does not exist` and the VM cannot be migrated.</span></span> <span data-ttu-id="43119-250">Di solito è sufficiente attendere un paio di giorni per risolvere il problema in quanto il cluster verrà abilitato per Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-250">Waiting a couple of days will usually resolve this particular problem as the cluster will soon get Azure Resource Manager enabled.</span></span> <span data-ttu-id="43119-251">Una soluzione immediata è `stop-deallocate` la VM, quindi proseguire con la migrazione e riavviare la VM in Azure Resource Manager dopo la migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-251">However, one immediate workaround is to `stop-deallocate` the VM, then continue forward with migration, and start the VM back up in Azure Resource Manager after migrating.</span></span>

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="43119-252">Errori da evitare</span><span class="sxs-lookup"><span data-stu-id="43119-252">Pitfalls to avoid</span></span>

- <span data-ttu-id="43119-253">Non usare scorciatoie e non eseguire le operazioni di convalida/preparazione/interruzione di prova della migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-253">Do not take shortcuts and omit the validate/prepare/abort dry run migrations.</span></span>
- <span data-ttu-id="43119-254">La maggior parte, se non tutti i potenziali problemi, verrà rilevata durante i passaggi di convalida/preparare/interruzione.</span><span class="sxs-lookup"><span data-stu-id="43119-254">Most, if not all, of your potential issues will surface during the validate/prepare/abort steps.</span></span>

## <a name="migration"></a><span data-ttu-id="43119-255">Migrazione</span><span class="sxs-lookup"><span data-stu-id="43119-255">Migration</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="43119-256">Considerazioni tecniche e compromessi</span><span class="sxs-lookup"><span data-stu-id="43119-256">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="43119-257">A questo punto è possibile iniziare perché sono stati affrontati i problemi noti dell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="43119-257">Now you are ready because you have worked through the known issues with your environment.</span></span>

<span data-ttu-id="43119-258">Per le migrazioni reali, considerare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="43119-258">For the real migrations, you might want to consider:</span></span>

1. <span data-ttu-id="43119-259">Pianificare la rete virtuale, la più piccola unità di migrazione, con priorità crescente.</span><span class="sxs-lookup"><span data-stu-id="43119-259">Plan and schedule the virtual network (smallest unit of migration) with increasing priority.</span></span>  <span data-ttu-id="43119-260">Iniziare con le reti virtuali semplici e proseguire con le reti virtuali più complesse.</span><span class="sxs-lookup"><span data-stu-id="43119-260">Do the simple virtual networks first, and progress with the more complicated virtual networks.</span></span>
2. <span data-ttu-id="43119-261">La maggior parte dei clienti avrà ambienti non di produzione e di produzione.</span><span class="sxs-lookup"><span data-stu-id="43119-261">Most customers will have non-production and production environments.</span></span>  <span data-ttu-id="43119-262">Pianificare per ultimo l'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="43119-262">Schedule production last.</span></span>
3. <span data-ttu-id="43119-263">**(FACOLTATIVO)**  Pianificare un tempo di inattività di manutenzione con molto buffer nel caso in cui si verifichino problemi imprevisti.</span><span class="sxs-lookup"><span data-stu-id="43119-263">**(OPTIONAL)** Schedule a maintenance downtime with plenty of buffer in case unexpected issues arise.</span></span>
4. <span data-ttu-id="43119-264">Comunicare e allinearsi con i team di supporto nel caso in cui si verifichino problemi.</span><span class="sxs-lookup"><span data-stu-id="43119-264">Communicate with and align with your support teams in case issues arise.</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="43119-265">Modelli di successo</span><span class="sxs-lookup"><span data-stu-id="43119-265">Patterns of success</span></span>

<span data-ttu-id="43119-266">Le indicazioni tecniche fornite dalla sezione _Test Lab_ devono essere considerate e risolte prima della migrazione reale.</span><span class="sxs-lookup"><span data-stu-id="43119-266">The technical guidance from the _Lab Test_ section should be considered and mitigated prior to a real migration.</span></span>  <span data-ttu-id="43119-267">Grazie a test adeguati, la migrazione non è un avvenimento eccezionale.</span><span class="sxs-lookup"><span data-stu-id="43119-267">With adequate testing, the migration is actually a non-event.</span></span>  <span data-ttu-id="43119-268">Per gli ambienti di produzione, potrebbe essere utile disporre di ulteriore supporto, ad esempio un partner Microsoft attendibile o i servizi Microsoft Premier.</span><span class="sxs-lookup"><span data-stu-id="43119-268">For production environments, it might be helpful to have additional support, such as a trusted Microsoft partner or Microsoft Premier services.</span></span>

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="43119-269">Errori da evitare</span><span class="sxs-lookup"><span data-stu-id="43119-269">Pitfalls to avoid</span></span>

<span data-ttu-id="43119-270">Test incompleti possono causare problemi e ritardare la migrazione.</span><span class="sxs-lookup"><span data-stu-id="43119-270">Not fully testing may cause issues and delay in the migration.</span></span>  

## <a name="beyond-migration"></a><span data-ttu-id="43119-271">Oltre la migrazione</span><span class="sxs-lookup"><span data-stu-id="43119-271">Beyond Migration</span></span>

### <a name="technical-considerations-and-tradeoffs"></a><span data-ttu-id="43119-272">Considerazioni tecniche e compromessi</span><span class="sxs-lookup"><span data-stu-id="43119-272">Technical considerations and tradeoffs</span></span>

<span data-ttu-id="43119-273">Ora che si è in Azure Resource Manager, ottimizzare la piattaforma.</span><span class="sxs-lookup"><span data-stu-id="43119-273">Now that you are in Azure Resource Manager, maximize the platform.</span></span>  <span data-ttu-id="43119-274">Leggere la sezione [Panoramica di Gestione risorse di Microsoft Azure](../../azure-resource-manager/resource-group-overview.md) per scoprire i vantaggi aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="43119-274">Read the [overview of Azure Resource Manager](../../azure-resource-manager/resource-group-overview.md) to find out about additional benefits.</span></span>

<span data-ttu-id="43119-275">Ecco alcuni aspetti da considerare:</span><span class="sxs-lookup"><span data-stu-id="43119-275">Things to consider:</span></span>

- <span data-ttu-id="43119-276">Unire la migrazione ad altre attività.</span><span class="sxs-lookup"><span data-stu-id="43119-276">Bundling the migration with other activities.</span></span>  <span data-ttu-id="43119-277">La maggior parte dei clienti opta per una finestra di manutenzione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="43119-277">Most customers opt for an application maintenance window.</span></span>  <span data-ttu-id="43119-278">In questo caso, si potrebbe usare questo periodo di inattività per abilitare altre funzionalità di Azure Resource Manager come la crittografia e la migrazione a Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="43119-278">If so, you might want to use this downtime to enable other Azure Resource Manager capabilities like encryption and migration to Managed Disks.</span></span>
- <span data-ttu-id="43119-279">Riesaminare i motivi tecnici e aziendali della scelta di Azure Resource Manager; abilitare i servizi aggiuntivi disponibili solo in Azure Resource Manager che si applicano all'ambiente.</span><span class="sxs-lookup"><span data-stu-id="43119-279">Revisit the technical and business reasons for Azure Resource Manager; enable the additional services available only on Azure Resource Manager that apply to your environment.</span></span>
- <span data-ttu-id="43119-280">Aggiornare l'ambiente con servizi PaaS.</span><span class="sxs-lookup"><span data-stu-id="43119-280">Modernize your environment with PaaS services.</span></span>

### <a name="patterns-of-success"></a><span data-ttu-id="43119-281">Modelli di successo</span><span class="sxs-lookup"><span data-stu-id="43119-281">Patterns of success</span></span>

<span data-ttu-id="43119-282">Decidere quali servizi si desidera abilitare ora in Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-282">Be purposeful on what services you now want to enable in Azure Resource Manager.</span></span>  <span data-ttu-id="43119-283">Molti clienti ritengono efficace quanto segue per i propri ambienti Azure:</span><span class="sxs-lookup"><span data-stu-id="43119-283">Many customers find the below compelling for their Azure environments:</span></span>

- <span data-ttu-id="43119-284">[controllo degli accessi in base al ruolo](../../azure-resource-manager/resource-group-overview.md#access-control).</span><span class="sxs-lookup"><span data-stu-id="43119-284">[Role Based Access Control](../../azure-resource-manager/resource-group-overview.md#access-control).</span></span>
- <span data-ttu-id="43119-285">[Modelli di Azure Resource Manager per una distribuzione più semplice e controllata](../../azure-resource-manager/resource-group-overview.md#template-deployment).</span><span class="sxs-lookup"><span data-stu-id="43119-285">[Azure Resource Manager templates for easier and more controlled deployment](../../azure-resource-manager/resource-group-overview.md#template-deployment).</span></span>
- <span data-ttu-id="43119-286">[Tag](../../azure-resource-manager/resource-group-using-tags.md).</span><span class="sxs-lookup"><span data-stu-id="43119-286">[Tags](../../azure-resource-manager/resource-group-using-tags.md).</span></span>
- [<span data-ttu-id="43119-287">Controllo di attività</span><span class="sxs-lookup"><span data-stu-id="43119-287">Activity Control</span></span>](../../azure-resource-manager/resource-group-audit.md)
- [<span data-ttu-id="43119-288">Criteri delle risorse</span><span class="sxs-lookup"><span data-stu-id="43119-288">Resource Policies</span></span>](../../azure-resource-manager/resource-manager-policy.md)

### <a name="pitfalls-to-avoid"></a><span data-ttu-id="43119-289">Errori da evitare</span><span class="sxs-lookup"><span data-stu-id="43119-289">Pitfalls to avoid</span></span>

<span data-ttu-id="43119-290">Tenere a mente il motivo per cui è stata eseguita la migrazione dalla distribuzione classica ad Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="43119-290">Remember why you started this Classic to Azure Resource Manager migration journey.</span></span>  <span data-ttu-id="43119-291">Quali sono i motivi aziendali originali?</span><span class="sxs-lookup"><span data-stu-id="43119-291">What were the original business reasons?</span></span> <span data-ttu-id="43119-292">Sono stati raggiunti i motivi aziendali?</span><span class="sxs-lookup"><span data-stu-id="43119-292">Did you achieve the business reason?</span></span>


## <a name="next-steps"></a><span data-ttu-id="43119-293">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="43119-293">Next steps</span></span>

* <span data-ttu-id="43119-294">[Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Panoramica sulla migrazione supportata dalla piattaforma per risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="43119-294">[Overview of platform-supported migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span></span>
* [<span data-ttu-id="43119-295">Approfondimento tecnico sulla migrazione supportata dalla piattaforma dal modello di distribuzione classica ad Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="43119-295">Technical deep dive on platform-supported migration from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-deep-dive.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="43119-296">Usare PowerShell per eseguire la migrazione di risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="43119-296">Use PowerShell to migrate IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-ps.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="43119-297">Usare l'interfaccia della riga di comando per eseguire la migrazione di risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="43119-297">Use CLI to migrate IaaS resources from classic to Azure Resource Manager</span></span>](../linux/migration-classic-resource-manager-cli.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* <span data-ttu-id="43119-298">[Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Strumenti della community per assistenza alla migrazione delle risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="43119-298">[Community tools for assisting with migration of IaaS resources from classic to Azure Resource Manager](migration-classic-resource-manager-community-tools.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span></span>
* [<span data-ttu-id="43119-299">Rivedere gli errori di migrazione più comuni</span><span class="sxs-lookup"><span data-stu-id="43119-299">Review most common migration errors</span></span>](migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
* [<span data-ttu-id="43119-300">Esaminare le domande frequenti sulla migrazione delle risorse IaaS dal modello di distribuzione classica ad Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="43119-300">Review the most frequently asked questions about migrating IaaS resources from classic to Azure Resource Manager</span></span>](migration-classic-resource-manager-faq.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
