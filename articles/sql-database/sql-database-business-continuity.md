---
title: "continuità aziendale aaaCloud - ripristino del database - Database SQL | Documenti Microsoft"
description: "Informazioni su come il database SQL di Azure supporta la continuità aziendale cloud e il ripristino del database e consente di mantenere le applicazioni cloud cruciali in esecuzione."
keywords: "continuità aziendale, continuità aziendale cloud, ripristino di emergenza del database, ripristino del database"
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: 
ms.assetid: 18e5d3f1-bfe5-4089-b6fd-76988ab29822
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/15/2017
ms.author: sashan
ms.openlocfilehash: c9a6ff86fbbc04ce839a4fca79594b573b71644c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="overview-of-business-continuity-with-azure-sql-database"></a><span data-ttu-id="2014a-104">Panoramica della continuità aziendale del database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="2014a-104">Overview of business continuity with Azure SQL Database</span></span>

<span data-ttu-id="2014a-105">Questa panoramica descrive le funzionalità di hello fornito da un Database SQL di Azure per la continuità aziendale e ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="2014a-105">This overview describes hello capabilities that Azure SQL Database provides for business continuity and disaster recovery.</span></span> <span data-ttu-id="2014a-106">Informazioni sulle opzioni, indicazioni e le esercitazioni per il ripristino da eventi di arresto improvviso che potrebbero provocare la perdita di dati o il database e dell'applicazione toobecome è disponibile.</span><span class="sxs-lookup"><span data-stu-id="2014a-106">Learn about options, recommendations, and tutorials for recovering from disruptive events that could cause data loss or cause your database and application toobecome unavailable.</span></span> <span data-ttu-id="2014a-107">Informazioni su quali toodo quando un utente o un'applicazione di errore interessa l'integrità dei dati, un'area di Azure dispone di un'interruzione o l'applicazione richiede attività di manutenzione.</span><span class="sxs-lookup"><span data-stu-id="2014a-107">Learn what toodo when a user or application error affects data integrity, an Azure region has an outage, or your application requires maintenance.</span></span>

## <a name="sql-database-features-that-you-can-use-tooprovide-business-continuity"></a><span data-ttu-id="2014a-108">Funzionalità di Database SQL che è possibile usare la continuità aziendale tooprovide</span><span class="sxs-lookup"><span data-stu-id="2014a-108">SQL Database features that you can use tooprovide business continuity</span></span>

<span data-ttu-id="2014a-109">Il database SQL offre diverse funzionalità di continuità aziendale, inclusi i backup automatici e la replica facoltativa del database.</span><span class="sxs-lookup"><span data-stu-id="2014a-109">SQL Database provides several business continuity features, including automated backups and optional database replication.</span></span> <span data-ttu-id="2014a-110">Ogni funzionalità presenta caratteristiche diverse in termini di tempo di recupero stimato (ERT) e di potenziale perdita di dati per le transazioni recenti.</span><span class="sxs-lookup"><span data-stu-id="2014a-110">Each has different characteristics for estimated recovery time (ERT) and potential data loss for recent transactions.</span></span> <span data-ttu-id="2014a-111">Dopo aver compreso le opzioni disponibili, è possibile scegliere una di esse o, nella maggior parte dei casi, usarle in modo combinato per i diversi scenari.</span><span class="sxs-lookup"><span data-stu-id="2014a-111">Once you understand these options, you can choose among them - and, in most scenarios, use them together for different scenarios.</span></span> <span data-ttu-id="2014a-112">Quando si sviluppa il piano di continuità aziendale, è necessario toounderstand hello massimo accettabile tempo prima che un'applicazione hello completamente ripristinato dopo evento di arresto improvviso hello - questo è l'obiettivo del tempo di ripristino (RTO).</span><span class="sxs-lookup"><span data-stu-id="2014a-112">As you develop your business continuity plan, you need toounderstand hello maximum acceptable time before hello application fully recovers after hello disruptive event - this is your recovery time objective (RTO).</span></span> <span data-ttu-id="2014a-113">È inoltre necessario toounderstand quantità massima di hello di un'applicazione hello aggiornamenti (intervallo di tempo) dati recenti è in grado di tollerare perdere durante il recupero dopo l'evento di arresto improvviso hello - questo è l'obiettivo del punto di ripristino (RPO).</span><span class="sxs-lookup"><span data-stu-id="2014a-113">You also need toounderstand hello maximum amount of recent data updates (time interval) hello application can tolerate losing when recovering after hello disruptive event - this is your recovery point objective (RPO).</span></span>

<span data-ttu-id="2014a-114">Hello seguente tabella confronta hello ERT e RPO per scenari più comuni di hello tre.</span><span class="sxs-lookup"><span data-stu-id="2014a-114">hello following table compares hello ERT and RPO for hello three most common scenarios.</span></span>

| <span data-ttu-id="2014a-115">Funzionalità</span><span class="sxs-lookup"><span data-stu-id="2014a-115">Capability</span></span> | <span data-ttu-id="2014a-116">Livello Basic</span><span class="sxs-lookup"><span data-stu-id="2014a-116">Basic tier</span></span> | <span data-ttu-id="2014a-117">Livello Standard</span><span class="sxs-lookup"><span data-stu-id="2014a-117">Standard tier</span></span> | <span data-ttu-id="2014a-118">Livello Premium</span><span class="sxs-lookup"><span data-stu-id="2014a-118">Premium tier</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="2014a-119">Ripristino temporizzato dal backup</span><span class="sxs-lookup"><span data-stu-id="2014a-119">Point in Time Restore from backup</span></span> |<span data-ttu-id="2014a-120">Qualsiasi punto di ripristino entro 7 giorni</span><span class="sxs-lookup"><span data-stu-id="2014a-120">Any restore point within 7 days</span></span> |<span data-ttu-id="2014a-121">Qualsiasi punto di ripristino entro 35 giorni</span><span class="sxs-lookup"><span data-stu-id="2014a-121">Any restore point within 35 days</span></span> |<span data-ttu-id="2014a-122">Qualsiasi punto di ripristino entro 35 giorni</span><span class="sxs-lookup"><span data-stu-id="2014a-122">Any restore point within 35 days</span></span> |
| <span data-ttu-id="2014a-123">Ripristino geografico dai backup con replica geografica</span><span class="sxs-lookup"><span data-stu-id="2014a-123">Geo-restore from geo-replicated backups</span></span> |<span data-ttu-id="2014a-124">ERT < 12 ore, RPO < 1 ora</span><span class="sxs-lookup"><span data-stu-id="2014a-124">ERT < 12h, RPO < 1h</span></span> |<span data-ttu-id="2014a-125">ERT < 12 ore, RPO < 1 ora</span><span class="sxs-lookup"><span data-stu-id="2014a-125">ERT < 12h, RPO < 1h</span></span> |<span data-ttu-id="2014a-126">ERT < 12 ore, RPO < 1 ora</span><span class="sxs-lookup"><span data-stu-id="2014a-126">ERT < 12h, RPO < 1h</span></span> |
| <span data-ttu-id="2014a-127">Ripristino dall'insieme di credenziali di Backup di Azure</span><span class="sxs-lookup"><span data-stu-id="2014a-127">Restore from Azure Backup Vault</span></span> |<span data-ttu-id="2014a-128">ERT < 12 ore, RPO < 1 sett</span><span class="sxs-lookup"><span data-stu-id="2014a-128">ERT < 12h, RPO < 1 wk</span></span> |<span data-ttu-id="2014a-129">ERT < 12 ore, RPO < 1 sett</span><span class="sxs-lookup"><span data-stu-id="2014a-129">ERT < 12h, RPO < 1 wk</span></span> |<span data-ttu-id="2014a-130">ERT < 12 ore, RPO < 1 sett</span><span class="sxs-lookup"><span data-stu-id="2014a-130">ERT < 12h, RPO < 1 wk</span></span> |
| <span data-ttu-id="2014a-131">Replica geografica attiva</span><span class="sxs-lookup"><span data-stu-id="2014a-131">Active geo-replication</span></span> |<span data-ttu-id="2014a-132">ERT < 30 sec, RPO < 5 sec</span><span class="sxs-lookup"><span data-stu-id="2014a-132">ERT < 30s, RPO < 5s</span></span> |<span data-ttu-id="2014a-133">ERT < 30 sec, RPO < 5 sec</span><span class="sxs-lookup"><span data-stu-id="2014a-133">ERT < 30s, RPO < 5s</span></span> |<span data-ttu-id="2014a-134">ERT < 30 sec, RPO < 5 sec</span><span class="sxs-lookup"><span data-stu-id="2014a-134">ERT < 30s, RPO < 5s</span></span> |

### <a name="use-database-backups-toorecover-a-database"></a><span data-ttu-id="2014a-135">Utilizzare i backup di database toorecover un database</span><span class="sxs-lookup"><span data-stu-id="2014a-135">Use database backups toorecover a database</span></span>

<span data-ttu-id="2014a-136">Database SQL esegue automaticamente una combinazione di backup completi del database ogni settimana, ogni ora backup differenziale del database e transazioni i backup del log ogni 5-dieci minuti tooprotect azienda dalla perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="2014a-136">SQL Database automatically performs a combination of full database backups weekly, differential database backups hourly, and transaction log backups every five - ten minutes tooprotect your business from data loss.</span></span> <span data-ttu-id="2014a-137">Questi backup vengono archiviati nel servizio di archiviazione con ridondanza geografica per 35 giorni per i database nei livelli di servizio Standard e Premium hello e 7 giorni per i database nel livello di servizio Basic hello.</span><span class="sxs-lookup"><span data-stu-id="2014a-137">These backups are stored in geo-redundant storage for 35 days for databases in hello Standard and Premium service tiers and 7 days for databases in hello Basic service tier.</span></span> <span data-ttu-id="2014a-138">Per altre informazioni, vedere [livelli di servizio](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="2014a-138">For more information, see [service tiers](sql-database-service-tiers.md).</span></span> <span data-ttu-id="2014a-139">Se il periodo di memorizzazione hello per il livello di servizio non soddisfa i requisiti aziendali, è possibile aumentare il periodo di memorizzazione hello da [modifica il livello di servizio hello](sql-database-service-tiers.md).</span><span class="sxs-lookup"><span data-stu-id="2014a-139">If hello retention period for your service tier does not meet your business requirements, you can increase hello retention period by [changing hello service tier](sql-database-service-tiers.md).</span></span> <span data-ttu-id="2014a-140">Hello backup completi e differenziali del database vengono inoltre replicato tooa [centro dati associato](../best-practices-availability-paired-regions.md) per la protezione da un'interruzione del centro dati.</span><span class="sxs-lookup"><span data-stu-id="2014a-140">hello full and differential database backups are also replicated tooa [paired data center](../best-practices-availability-paired-regions.md) for protection against a data center outage.</span></span> <span data-ttu-id="2014a-141">Per altre informazioni, vedere [backup automatici del database SQL](sql-database-automated-backups.md).</span><span class="sxs-lookup"><span data-stu-id="2014a-141">For more information, see [automatic database backups](sql-database-automated-backups.md).</span></span>

<span data-ttu-id="2014a-142">Se il periodo di memorizzazione predefinite di hello non sono sufficiente per l'applicazione, è possibile estenderlo configurando un criterio di conservazione a lungo termine di database.</span><span class="sxs-lookup"><span data-stu-id="2014a-142">If hello built-in retention period is not sufficient for your application, you can extend it by configuring a database long-term retention policy.</span></span> <span data-ttu-id="2014a-143">Per altre informazioni, vedere [Long-term retention](sql-database-long-term-retention.md) (Conservazione a lungo termine).</span><span class="sxs-lookup"><span data-stu-id="2014a-143">For more information, see [long-term retention](sql-database-long-term-retention.md).</span></span>

<span data-ttu-id="2014a-144">È possibile utilizzare questi toorecover backup automatica del database un database da vari eventi di arresto improvviso, sia all'interno del centro dati e tooanother data center.</span><span class="sxs-lookup"><span data-stu-id="2014a-144">You can use these automatic database backups toorecover a database from various disruptive events, both within your data center and tooanother data center.</span></span> <span data-ttu-id="2014a-145">Utilizzo dei backup automatica del database, hello stimato momento del ripristino dipende da diversi fattori, incluso il numero totale di hello di ripristinare in hello stesso database area di hello stesso tempo, hello dimensioni del database, dimensioni del log delle transazioni, hello e larghezza di banda di rete.</span><span class="sxs-lookup"><span data-stu-id="2014a-145">Using automatic database backups, hello estimated time of recovery depends on several factors including hello total number of databases recovering in hello same region at hello same time, hello database size, hello transaction log size, and network bandwidth.</span></span> <span data-ttu-id="2014a-146">tempo di recupero Hello è in genere meno di 12 ore.</span><span class="sxs-lookup"><span data-stu-id="2014a-146">hello recovery time is usually less than 12 hours.</span></span> <span data-ttu-id="2014a-147">Quando si ripristina l'area dati tooanother, hello perdita di dati è ora too1 limitato per l'archiviazione con ridondanza geografica hello del backup differenziale del database ogni ora.</span><span class="sxs-lookup"><span data-stu-id="2014a-147">When recovering tooanother data region, hello potential data loss is limited too1 hour by hello geo-redundant storage of hourly differential database backups.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2014a-148">toorecover utilizzando backup automatici, è necessario essere un membro del ruolo di collaboratore di SQL Server hello o il proprietario della sottoscrizione hello: vedere [RBAC: ruoli predefiniti](../active-directory/role-based-access-built-in-roles.md).</span><span class="sxs-lookup"><span data-stu-id="2014a-148">toorecover using automated backups, you must be a member of hello SQL Server Contributor role or hello subscription owner - see [RBAC: Built-in roles](../active-directory/role-based-access-built-in-roles.md).</span></span> <span data-ttu-id="2014a-149">È possibile ripristinare utilizzando hello portale di Azure, PowerShell o hello API REST.</span><span class="sxs-lookup"><span data-stu-id="2014a-149">You can recover using hello Azure portal, PowerShell, or hello REST API.</span></span> <span data-ttu-id="2014a-150">Non è possibile usare Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="2014a-150">You cannot use Transact-SQL.</span></span>
>

<span data-ttu-id="2014a-151">Usare i backup automatici come meccanismo di continuità e ripristino aziendale, se l'applicazione:</span><span class="sxs-lookup"><span data-stu-id="2014a-151">Use automated backups as your business continuity and recovery mechanism if your application:</span></span>

* <span data-ttu-id="2014a-152">Non è considerata cruciale.</span><span class="sxs-lookup"><span data-stu-id="2014a-152">Is not considered mission critical.</span></span>
* <span data-ttu-id="2014a-153">Non ha un contratto di servizio vincolante: un tempo di inattività di 24 o più ore non comporta alcuna responsabilità finanziaria.</span><span class="sxs-lookup"><span data-stu-id="2014a-153">Doesn't have a binding SLA - a downtime of 24 hours or longer does not result in financial liability.</span></span>
* <span data-ttu-id="2014a-154">Ha una bassa frequenza di modifica dei dati (basse transazioni all'ora) e la perdita di tooan una perdita di dati accettabile è un'ora di modifica.</span><span class="sxs-lookup"><span data-stu-id="2014a-154">Has a low rate of data change (low transactions per hour) and losing up tooan hour of change is an acceptable data loss.</span></span>
* <span data-ttu-id="2014a-155">Dipende dal costo.</span><span class="sxs-lookup"><span data-stu-id="2014a-155">Is cost sensitive.</span></span>

<span data-ttu-id="2014a-156">Se è necessario un ripristino più veloce, usare la [Replica geografica attiva](sql-database-geo-replication-overview.md) (più avanti).</span><span class="sxs-lookup"><span data-stu-id="2014a-156">If you need faster recovery, use [active geo-replication](sql-database-geo-replication-overview.md) (discussed next).</span></span> <span data-ttu-id="2014a-157">Se è necessario toobe toorecover in grado di dati di un periodo antecedente a 35 giorni, utilizzare [conservazione dei backup a lungo termine](sql-database-long-term-retention.md).</span><span class="sxs-lookup"><span data-stu-id="2014a-157">If you need toobe able toorecover data from a period older than 35 days, use [long-term backup retention](sql-database-long-term-retention.md).</span></span> 

### <a name="use-active-geo-replication-and-auto-failover-groups-in-preview-tooreduce-recovery-time-and-limit-data-loss-associated-with-a-recovery"></a><span data-ttu-id="2014a-158">Utilizzare attivo con failover automatico e la replica geografica gruppi (in anteprima) tooreduce ripristino ora e limitare la perdita di dati associata a un ripristino</span><span class="sxs-lookup"><span data-stu-id="2014a-158">Use active geo-replication and auto-failover groups (in-preview) tooreduce recovery time and limit data loss associated with a recovery</span></span>

<span data-ttu-id="2014a-159">Inoltre toousing i backup di database per il ripristino del database se si verifica un'interruzione di business, è possibile utilizzare [replica geografica attiva](sql-database-geo-replication-overview.md) tooconfigure toohave un database di toofour database secondari leggibili in aree hello del scelta.</span><span class="sxs-lookup"><span data-stu-id="2014a-159">In addition toousing database backups for database recovery if a business disruption occurs, you can use [active geo-replication](sql-database-geo-replication-overview.md) tooconfigure a database toohave up toofour readable secondary databases in hello regions of your choice.</span></span> <span data-ttu-id="2014a-160">Questi database secondari vengono mantenuti sincronizzati con il database primario di hello utilizzando un meccanismo di replica asincrona.</span><span class="sxs-lookup"><span data-stu-id="2014a-160">These secondary databases are kept synchronized with hello primary database using an asynchronous replication mechanism.</span></span> <span data-ttu-id="2014a-161">Questa funzionalità è utilizzata tooprotect interruzioni delle attività aziendali se si verifica un'interruzione del centro dati o durante un aggiornamento dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2014a-161">This feature is used tooprotect against business disruption if a data center outage occurs or during an application upgrade.</span></span> <span data-ttu-id="2014a-162">Replica geografica attiva può essere anche usato tooprovide migliori le prestazioni delle query per gli utenti toogeographically in diverse località geografiche di query di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="2014a-162">Active geo-replication can also be used tooprovide better query performance for read-only queries toogeographically dispersed users.</span></span>

<span data-ttu-id="2014a-163">tooenable automatico e il failover trasparente è necessario organizzare i database di replica geografica in gruppi utilizzando hello [con failover automatico gruppo](sql-database-geo-replication-overview.md) funzionalità del Database SQL (in anteprima).</span><span class="sxs-lookup"><span data-stu-id="2014a-163">tooenable automated and transparent failover you should organize your geo-replicated databases into groups using hello [auto-failover group](sql-database-geo-replication-overview.md) feature of SQL Database (in-preview).</span></span>

<span data-ttu-id="2014a-164">Se il database primario hello passa alla modalità offline in modo imprevisto o se è necessario tootake non in linea per attività di manutenzione, è possibile rapidamente promuovere un database primario hello toobecome secondario (detto anche un failover) e configurare primario toohello alzate di livello tooconnect di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="2014a-164">If hello primary database goes offline unexpectedly or you need tootake it offline for maintenance activities, you can quickly promote a secondary toobecome hello primary (also called a failover) and configure applications tooconnect toohello promoted primary.</span></span> <span data-ttu-id="2014a-165">Se l'applicazione si connette database toohello tramite hello listener del gruppo di failover, è necessario toochange configurazione di stringa di connessione SQL a hello dopo il failover.</span><span class="sxs-lookup"><span data-stu-id="2014a-165">If your application is connecting toohello databases using hello failover group listener, you don’t need toochange hello SQL connection string configuration after failover.</span></span> <span data-ttu-id="2014a-166">Con un failover pianificato, non si verificano perdite di dati.</span><span class="sxs-lookup"><span data-stu-id="2014a-166">With a planned failover, there is no data loss.</span></span> <span data-ttu-id="2014a-167">Con un failover non pianificato, potrebbero essere presenti alcune piccole quantità di perdita di dati per le transazioni molto recente a causa di natura toohello di replica asincrona.</span><span class="sxs-lookup"><span data-stu-id="2014a-167">With an unplanned failover, there may be some small amount of data loss for very recent transactions due toohello nature of asynchronous replication.</span></span> <span data-ttu-id="2014a-168">Se si utilizzano i gruppi con failover automatico (in anteprima), è possibile personalizzare hello failover criteri toominimize hello potenziale perdita di dati.</span><span class="sxs-lookup"><span data-stu-id="2014a-168">Using auto-failover groups (in-preview), you can customize hello failover policy toominimize hello potential data loss.</span></span> <span data-ttu-id="2014a-169">Dopo un failover, è possibile eseguire il failback successive - secondo piano tooa o quando hello del data center torna online.</span><span class="sxs-lookup"><span data-stu-id="2014a-169">After a failover, you can later failback - either according tooa plan or when hello data center comes back online.</span></span> <span data-ttu-id="2014a-170">In tutti i casi, gli utenti verificano una piccola quantità di tempo di inattività e necessario tooreconnect.</span><span class="sxs-lookup"><span data-stu-id="2014a-170">In all cases, users experience a small amount of downtime and need tooreconnect.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2014a-171">toouse la replica geografica attiva e gruppi con failover automatico (in anteprima), è necessario essere proprietario della sottoscrizione hello o disporre di autorizzazioni amministrative in SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2014a-171">toouse active geo-replication and auto-failover groups (in-preview), you must either be hello subscription owner or have administrative permissions in SQL Server.</span></span> <span data-ttu-id="2014a-172">È possibile configurare il failover utilizzando hello portale di Azure PowerShell o hello API REST di utilizzo delle autorizzazioni di sottoscrizione di Azure o tramite Transact-SQL con autorizzazioni di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="2014a-172">You can configure and fail over using hello Azure portal, PowerShell, or hello REST API using Azure subscription permissions or using Transact-SQL with SQL Server permissions.</span></span>
> 

<span data-ttu-id="2014a-173">Usare la replica geografica attiva e i gruppi con failover automatico (in anteprima) se l'applicazione soddisfa qualcuno dei criteri seguenti:</span><span class="sxs-lookup"><span data-stu-id="2014a-173">Use active geo-replication and auto-failover groups (in preview) if your application meets any of these criteria:</span></span>

* <span data-ttu-id="2014a-174">È considerata cruciale.</span><span class="sxs-lookup"><span data-stu-id="2014a-174">Is mission critical.</span></span>
* <span data-ttu-id="2014a-175">Ha un contratto di servizio che non consente più di 24 ore di inattività.</span><span class="sxs-lookup"><span data-stu-id="2014a-175">Has a service level agreement (SLA) that does not allow for 24 hours or more of downtime.</span></span>
* <span data-ttu-id="2014a-176">Il tempo di inattività può implicare responsabilità finanziaria.</span><span class="sxs-lookup"><span data-stu-id="2014a-176">Downtime may result in financial liability.</span></span>
* <span data-ttu-id="2014a-177">Ha una frequenza elevata di modifica dei dati e la perdita di un'ora di dati non è accettabile.</span><span class="sxs-lookup"><span data-stu-id="2014a-177">Has a high rate of data change is high and losing an hour of data is not acceptable.</span></span>
* <span data-ttu-id="2014a-178">Hello costi aggiuntivi per la replica geografica attiva sono inferiori a responsabilità finanziaria potenziali hello e perdite di business.</span><span class="sxs-lookup"><span data-stu-id="2014a-178">hello additional cost of active geo-replication is lower than hello potential financial liability and associated loss of business.</span></span>

>
> [!VIDEO https://channel9.msdn.com/Blogs/Azure/Azure-SQL-Database-protecting-important-DBs-from-regional-disasters-is-easy/player]
>

## <a name="recover-a-database-after-a-user-or-application-error"></a><span data-ttu-id="2014a-179">Ripristinare un database in seguito a errore di un'applicazione o un utente</span><span class="sxs-lookup"><span data-stu-id="2014a-179">Recover a database after a user or application error</span></span>
<span data-ttu-id="2014a-180">* Nessuno è perfetto!</span><span class="sxs-lookup"><span data-stu-id="2014a-180">*No one is perfect!</span></span> <span data-ttu-id="2014a-181">Un utente potrebbe accidentalmente eliminare alcuni dati, una tabella importante o addirittura un intero database.</span><span class="sxs-lookup"><span data-stu-id="2014a-181">A user might accidentally delete some data, inadvertently drop an important table, or even drop an entire database.</span></span> <span data-ttu-id="2014a-182">In alternativa, un'applicazione potrebbe sovrascrivere accidentalmente dati validi con i dati non validi a causa di errore di applicazione tooan.</span><span class="sxs-lookup"><span data-stu-id="2014a-182">Or, an application might accidentally overwrite good data with bad data due tooan application defect.</span></span>

<span data-ttu-id="2014a-183">In questo scenario, ecco sono le opzioni di ripristino.</span><span class="sxs-lookup"><span data-stu-id="2014a-183">In this scenario, these are your recovery options.</span></span>

### <a name="perform-a-point-in-time-restore"></a><span data-ttu-id="2014a-184">Eseguire un ripristino temporizzato</span><span class="sxs-lookup"><span data-stu-id="2014a-184">Perform a point-in-time restore</span></span>
<span data-ttu-id="2014a-185">È possibile utilizzare toorecover backup automatizzato hello una copia di tooa il database noti buon punto nel tempo, condizione che ora è nel periodo di memorizzazione del database hello.</span><span class="sxs-lookup"><span data-stu-id="2014a-185">You can use hello automated backups toorecover a copy of your database tooa known good point in time, provided that time is within hello database retention period.</span></span> <span data-ttu-id="2014a-186">Dopo il ripristino di database hello, è possibile sostituire database originale hello con il database ripristinato hello o copiare i dati di hello necessita da dati hello ripristinato nel database originale hello.</span><span class="sxs-lookup"><span data-stu-id="2014a-186">After hello database is restored, you can either replace hello original database with hello restored database or copy hello needed data from hello restored data into hello original database.</span></span> <span data-ttu-id="2014a-187">Se il database di hello utilizza la replica geografica attiva, è consigliabile la copia dei dati di hello richiesto dalla copia hello ripristinato nel database originale hello.</span><span class="sxs-lookup"><span data-stu-id="2014a-187">If hello database uses active geo-replication, we recommend copying hello required data from hello restored copy into hello original database.</span></span> <span data-ttu-id="2014a-188">Se si sostituisce database originale hello con database hello ripristinato, è necessario tooreconfigure e risincronizzare la replica geografica attiva (che può richiedere molto tempo per un database di grandi dimensioni).</span><span class="sxs-lookup"><span data-stu-id="2014a-188">If you replace hello original database with hello restored database, you need tooreconfigure and resynchronize active geo-replication (which can take quite some time for a large database).</span></span>

<span data-ttu-id="2014a-189">Per ulteriori informazioni e per i passaggi dettagliati per il ripristino di un punto di tooa database in esecuzione utilizzando hello portale di Azure o tramite PowerShell, vedere [in fase di punto di ripristino](sql-database-recovery-using-backups.md#point-in-time-restore).</span><span class="sxs-lookup"><span data-stu-id="2014a-189">For more information and for detailed steps for restoring a database tooa point in time using hello Azure portal or using PowerShell, see [point-in-time restore](sql-database-recovery-using-backups.md#point-in-time-restore).</span></span> <span data-ttu-id="2014a-190">Non è possibile eseguire il ripristino tramite Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="2014a-190">You cannot recover using Transact-SQL.</span></span>

### <a name="restore-a-deleted-database"></a><span data-ttu-id="2014a-191">Ripristino di un database eliminato</span><span class="sxs-lookup"><span data-stu-id="2014a-191">Restore a deleted database</span></span>
<span data-ttu-id="2014a-192">Se hello database viene eliminato ma non è stata eliminata server logico hello, è possibile ripristinare i punti di toohello database hello eliminato in corrispondenza del quale è stato eliminato.</span><span class="sxs-lookup"><span data-stu-id="2014a-192">If hello database is deleted but hello logical server has not been deleted, you can restore hello deleted database toohello point at which it was deleted.</span></span> <span data-ttu-id="2014a-193">Ciò consente di ripristinare un toohello di backup del database stesso server SQL logico da cui è stato eliminato.</span><span class="sxs-lookup"><span data-stu-id="2014a-193">This restores a database backup toohello same logical SQL server from which it was deleted.</span></span> <span data-ttu-id="2014a-194">È possibile ripristinarla utilizzando nome originale hello o fornire un nuovo nome o un database ripristinato hello.</span><span class="sxs-lookup"><span data-stu-id="2014a-194">You can restore it using hello original name or provide a new name or hello restored database.</span></span>

<span data-ttu-id="2014a-195">Per ulteriori informazioni e per i passaggi dettagliati per il ripristino di un database eliminato utilizzando hello portale di Azure o tramite PowerShell, vedere [ripristinare un database eliminato](sql-database-recovery-using-backups.md#deleted-database-restore).</span><span class="sxs-lookup"><span data-stu-id="2014a-195">For more information and for detailed steps for restoring a deleted database using hello Azure portal or using PowerShell, see [restore a deleted database](sql-database-recovery-using-backups.md#deleted-database-restore).</span></span> <span data-ttu-id="2014a-196">Non è possibile eseguire il recupero tramite Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="2014a-196">You cannot restore using Transact-SQL.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2014a-197">Se il server logico hello viene eliminato, è possibile ripristinare un database eliminato.</span><span class="sxs-lookup"><span data-stu-id="2014a-197">If hello logical server is deleted, you cannot recover a deleted database.</span></span>
>
>

### <a name="restore-from-azure-backup-vault"></a><span data-ttu-id="2014a-198">Ripristino dall'insieme di credenziali di Backup di Azure</span><span class="sxs-lookup"><span data-stu-id="2014a-198">Restore from Azure Backup Vault</span></span>
<span data-ttu-id="2014a-199">Se si è verificato la perdita di dati hello esterno hello periodo di memorizzazione corrente per i backup automatici e il database è configurato per la conservazione a lungo termine, è possibile ripristinare da un backup nel nuovo database di archivio di Backup di Azure tooa settimana.</span><span class="sxs-lookup"><span data-stu-id="2014a-199">If hello data loss occurred outside hello current retention period for automated backups and your database is configured for long-term retention, you can restore from a weekly backup in Azure Backup Vault tooa new database.</span></span> <span data-ttu-id="2014a-200">A questo punto, è possibile sostituire database originale hello con il database ripristinato hello o copiare i dati di hello necessita dal database di hello ripristinato nel database originale hello.</span><span class="sxs-lookup"><span data-stu-id="2014a-200">At this point, you can either replace hello original database with hello restored database or copy hello needed data from hello restored database into hello original database.</span></span> <span data-ttu-id="2014a-201">Se è necessario tooretrieve una versione precedente dell'aggiornamento del database precedente tooa principale dell'applicazione, soddisfare una richiesta da controllori o un ordine valido, che è possibile creare un database utilizzando un backup completo, salvato in hello insieme di credenziali di Azure Backup.</span><span class="sxs-lookup"><span data-stu-id="2014a-201">If you need tooretrieve an old version of your database prior tooa major application upgrade, satisfy a request from auditors or a legal order, you can create a database using a full backup saved in hello Azure Backup Vault.</span></span>  <span data-ttu-id="2014a-202">Per altre informazioni, vedere [Long-term retention](sql-database-long-term-retention.md) (Conservazione a lungo termine).</span><span class="sxs-lookup"><span data-stu-id="2014a-202">For more information, see [Long-term retention](sql-database-long-term-retention.md).</span></span>

## <a name="recover-a-database-tooanother-region-from-an-azure-regional-data-center-outage"></a><span data-ttu-id="2014a-203">Ripristinare un'area tooanother database da un'interruzione del centro dati regionale di Azure</span><span class="sxs-lookup"><span data-stu-id="2014a-203">Recover a database tooanother region from an Azure regional data center outage</span></span>
<!-- Explain this scenario -->

<span data-ttu-id="2014a-204">Anche se raramente, un data center di Azure può subire un'interruzione del servizio.</span><span class="sxs-lookup"><span data-stu-id="2014a-204">Although rare, an Azure data center can have an outage.</span></span> <span data-ttu-id="2014a-205">Quando si verifica un'interruzione, viene generata un'interruzione delle attività che potrebbe durare solo pochi minuti oppure ore.</span><span class="sxs-lookup"><span data-stu-id="2014a-205">When an outage occurs, it causes a business disruption that might only last a few minutes or might last for hours.</span></span>

* <span data-ttu-id="2014a-206">Un'opzione è toowait per il toocome database online quando si trova sull'interruzione di hello data center.</span><span class="sxs-lookup"><span data-stu-id="2014a-206">One option is toowait for your database toocome back online when hello data center outage is over.</span></span> <span data-ttu-id="2014a-207">Questo procedimento funziona per le applicazioni che possono permettersi di database non in linea di toohave hello.</span><span class="sxs-lookup"><span data-stu-id="2014a-207">This works for applications that can afford toohave hello database offline.</span></span> <span data-ttu-id="2014a-208">Ad esempio, un progetto di sviluppo o di una versione di valutazione gratuita non è necessario toowork su costantemente.</span><span class="sxs-lookup"><span data-stu-id="2014a-208">For example, a development project or free trial you don't need toowork on constantly.</span></span> <span data-ttu-id="2014a-209">Quando un data center dispone di un'interruzione del servizio, non si conosce interruzione hello potrebbe durata, pertanto questa opzione funziona solo se il database non è necessario per un periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="2014a-209">When a data center has an outage, you do not know how long hello outage might last, so this option only works if you don't need your database for a while.</span></span>
* <span data-ttu-id="2014a-210">Un'altra opzione è tooeither fail sull'area dati tooanother se si utilizza la replica geografica attiva o hello ripristinare un database tramite backup di database archiviazione con ridondanza geografica (ripristino a livello geografico).</span><span class="sxs-lookup"><span data-stu-id="2014a-210">Another option is tooeither fail over tooanother data region if you are using active geo-replication or hello recover a database using geo-redundant database backups (geo-restore).</span></span> <span data-ttu-id="2014a-211">Il failover richiede solo pochi secondi mentre il ripristino del database da backup richiede ore.</span><span class="sxs-lookup"><span data-stu-id="2014a-211">Failover takes only a few seconds while database recovery from backups takes hours.</span></span>

<span data-ttu-id="2014a-212">Quando si utilizza l'azione, il tempo impiegato per toorecover, e quanto si verifica la perdita di dati dipende da come si decide di toouse queste funzionalità di continuità aziendale nell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2014a-212">When you take action, how long it takes you toorecover, and how much data loss you incur depends upon how you decide toouse these business continuity features in your application.</span></span> <span data-ttu-id="2014a-213">In effetti, è possibile scegliere toouse una combinazione di backup del database e di replica geografica attiva varia a seconda dei requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2014a-213">Indeed, you may choose toouse a combination of database backups and active geo-replication depending upon your application requirements.</span></span> <span data-ttu-id="2014a-214">Per una descrizione delle considerazioni sulla progettazione di applicazioni per database autonomi e pool elastici tramite queste funzioni di continuità aziendale, vedere [Progettare un'applicazione per il ripristino di emergenza cloud](sql-database-designing-cloud-solutions-for-disaster-recovery.md) e [Strategie di ripristino di emergenza per applicazioni che usano il pool elastico del database SQL](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="2014a-214">For a discussion of application design considerations for stand-alone databases and for elastic pools using these business continuity features, see [Design an application for cloud disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md) and [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>

<span data-ttu-id="2014a-215">Hello nelle sezioni seguenti forniscono una panoramica di hello passaggi toorecover utilizzando backup di database o la replica geografica attiva.</span><span class="sxs-lookup"><span data-stu-id="2014a-215">hello following sections provide an overview of hello steps toorecover using either database backups or active geo-replication.</span></span> <span data-ttu-id="2014a-216">Per istruzioni dettagliate, inclusa la pianificazione di requisiti, i passaggi di ripristino post e informazioni su come toosimulate un tooperform interruzione un ripristino di emergenza eseguire il drill-, vedere [ripristinare un Database SQL di un'interruzione](sql-database-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="2014a-216">For detailed steps including planning requirements, post recovery steps, and information about how toosimulate an outage tooperform a disaster recovery drill, see [Recover a SQL Database from an outage](sql-database-disaster-recovery.md).</span></span>

### <a name="prepare-for-an-outage"></a><span data-ttu-id="2014a-217">Prepararsi a un'interruzione del servizio</span><span class="sxs-lookup"><span data-stu-id="2014a-217">Prepare for an outage</span></span>
<span data-ttu-id="2014a-218">Indipendentemente dalla funzionalità di continuità aziendale hello che è utilizzare, è necessario:</span><span class="sxs-lookup"><span data-stu-id="2014a-218">Regardless of hello business continuity feature you use, you must:</span></span>

* <span data-ttu-id="2014a-219">Identificare e preparare il server di destinazione hello, incluse le regole del firewall a livello di server, gli account di accesso e le autorizzazioni a livello di database master.</span><span class="sxs-lookup"><span data-stu-id="2014a-219">Identify and prepare hello target server, including server-level firewall rules, logins, and master database level permissions.</span></span>
* <span data-ttu-id="2014a-220">Determinare come tooredirect client e server nuovo toohello di applicazioni client</span><span class="sxs-lookup"><span data-stu-id="2014a-220">Determine how tooredirect clients and client applications toohello new server</span></span>
* <span data-ttu-id="2014a-221">Documentare altre dipendenze, ad esempio impostazioni di controllo e avvisi</span><span class="sxs-lookup"><span data-stu-id="2014a-221">Document other dependencies, such as auditing settings and alerts</span></span>

<span data-ttu-id="2014a-222">Se non ci si prepara adeguatamente al ripristino, riportare online le applicazioni dopo un failover o un ripristino del database richiederà ulteriore tempo e probabilmente la risoluzione di problemi aggiuntivi in un momento di stress: una combinazione da evitare.</span><span class="sxs-lookup"><span data-stu-id="2014a-222">If you do not prepare properly, bringing your applications online after a failover or a database recovery takes additional time and likely also require troubleshooting at a time of stress - a bad combination.</span></span>

### <a name="fail-over-tooa-geo-replicated-secondary-database"></a><span data-ttu-id="2014a-223">Eseguire il failover il database secondario di replica geografica tooa</span><span class="sxs-lookup"><span data-stu-id="2014a-223">Fail over tooa geo-replicated secondary database</span></span>
<span data-ttu-id="2014a-224">Se si usa la replica geografica attiva e i gruppi con failover automatico (in anteprima) come meccanismo di ripristino, è possibile configurare i criteri di failover automatico o usare il [failover manuale](sql-database-disaster-recovery.md#fail-over-to-geo-replicated-secondary-database).</span><span class="sxs-lookup"><span data-stu-id="2014a-224">If you are using active geo-replication and auto-failover groups (in-preview) as your recovery mechanism, you can configure an automatic failover policy or use [manual failover](sql-database-disaster-recovery.md#fail-over-to-geo-replicated-secondary-database).</span></span> <span data-ttu-id="2014a-225">Una volta avviata, hello failover cause hello secondario toobecome hello nuovo primario e pronto toorecord nuove transazioni e rispondere tooqueries - con perdita di dati minima per i dati di hello non ancora replicate.</span><span class="sxs-lookup"><span data-stu-id="2014a-225">Once initiated, hello failover causes hello secondary toobecome hello new primary and ready toorecord new transactions and respond tooqueries - with minimal data loss for hello data not yet replicated.</span></span> <span data-ttu-id="2014a-226">Per informazioni sulla progettazione di processo di failover di hello, vedere [progettare un'applicazione per il ripristino di emergenza cloud](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span><span class="sxs-lookup"><span data-stu-id="2014a-226">For information on designing hello failover process, see [Design an application for cloud disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

> [!NOTE]
> <span data-ttu-id="2014a-227">Quando torna online centro dati hello primari precedente hello automaticamente riconnettersi toohello nuovo database primario e diventano database secondari.</span><span class="sxs-lookup"><span data-stu-id="2014a-227">When hello data center comes back online hello old primaries automatically reconnect toohello new primary and become secondary databases.</span></span> <span data-ttu-id="2014a-228">Se è necessario l'area di toorelocate hello toohello indietro primaria originale, è possibile avviare manualmente un failover pianificato (failback).</span><span class="sxs-lookup"><span data-stu-id="2014a-228">If you need toorelocate hello primary back toohello original region, you can initiate a planned failover manually (failback).</span></span> 
> 

### <a name="perform-a-geo-restore"></a><span data-ttu-id="2014a-229">Eseguire un ripristino geografico</span><span class="sxs-lookup"><span data-stu-id="2014a-229">Perform a geo-restore</span></span>
<span data-ttu-id="2014a-230">Se si usano backup automatici con la replica dell'archiviazione con ridondanza geografica come meccanismo di ripristino, [avviare il ripristino del database tramite ripristino geografico](sql-database-disaster-recovery.md#recover-using-geo-restore).</span><span class="sxs-lookup"><span data-stu-id="2014a-230">If you are using automated backups with geo-redundant storage replication as your recovery mechanism, [initiate a database recovery using geo-restore](sql-database-disaster-recovery.md#recover-using-geo-restore).</span></span> <span data-ttu-id="2014a-231">Ripristino in genere avviene all'interno di 12 ore, con perdita di dati di backup ora tooone era al momento hello ultimo backup differenziale orario con eseguito e replicato.</span><span class="sxs-lookup"><span data-stu-id="2014a-231">Recovery usually takes place within 12 hours - with data loss of up tooone hour determined by when hello last hourly differential backup with taken and replicated.</span></span> <span data-ttu-id="2014a-232">Fino a quando non viene completato il ripristino di hello, database di hello è Impossibile toorecord tutte le transazioni o risposta tooany query.</span><span class="sxs-lookup"><span data-stu-id="2014a-232">Until hello recovery completes, hello database is unable toorecord any transactions or respond tooany queries.</span></span> <span data-ttu-id="2014a-233">Mentre ciò consente di ripristinare un database toohello ultimo disponibili punto nel tempo, ripristino hello geografica secondario tooany punto nel tempo non è attualmente supportato.</span><span class="sxs-lookup"><span data-stu-id="2014a-233">While this restores a database toohello last available point in time, restoring hello geo-secondary tooany point in time is not currently supported.</span></span>

> [!NOTE]
> <span data-ttu-id="2014a-234">Se centro dati hello ritorna online prima di passare all'applicazione nel database ripristinato toohello, è possibile annullare il ripristino di hello.</span><span class="sxs-lookup"><span data-stu-id="2014a-234">If hello data center comes back online before you switch your application over toohello recovered database, you can cancel hello recovery.</span></span>  
>
>

### <a name="perform-post-failover--recovery-tasks"></a><span data-ttu-id="2014a-235">Eseguire attività successive al filover/ripristino</span><span class="sxs-lookup"><span data-stu-id="2014a-235">Perform post failover / recovery tasks</span></span>
<span data-ttu-id="2014a-236">Dopo il ripristino da uno dei due meccanismi di ripristino, è necessario eseguire hello seguenti attività aggiuntive prima che gli utenti e applicazioni di eseguire il backup e in esecuzione:</span><span class="sxs-lookup"><span data-stu-id="2014a-236">After recovery from either recovery mechanism, you must perform hello following additional tasks before your users and applications are back up and running:</span></span>

* <span data-ttu-id="2014a-237">Reindirizzare i client e server nuovo toohello di applicazioni client e il database ripristinato</span><span class="sxs-lookup"><span data-stu-id="2014a-237">Redirect clients and client applications toohello new server and restored database</span></span>
* <span data-ttu-id="2014a-238">Verificare le regole del firewall a livello di server appropriati sono disponibili per gli utenti tooconnect (o utilizzare [firewall a livello di database](sql-database-firewall-configure.md#creating-and-managing-firewall-rules))</span><span class="sxs-lookup"><span data-stu-id="2014a-238">Ensure appropriate server-level firewall rules are in place for users tooconnect (or use [database-level firewalls](sql-database-firewall-configure.md#creating-and-managing-firewall-rules))</span></span>
* <span data-ttu-id="2014a-239">Verificare che siano presenti gli account di accesso appropriato e le autorizzazioni a livello di database master o usare gli [utenti contenuti](https://msdn.microsoft.com/library/ff929188.aspx)</span><span class="sxs-lookup"><span data-stu-id="2014a-239">Ensure appropriate logins and master database level permissions are in place (or use [contained users](https://msdn.microsoft.com/library/ff929188.aspx))</span></span>
* <span data-ttu-id="2014a-240">Configurare il controllo in base alle proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="2014a-240">Configure auditing, as appropriate</span></span>
* <span data-ttu-id="2014a-241">Configurare gli avvisi in base alle proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="2014a-241">Configure alerts, as appropriate</span></span>

## <a name="upgrade-an-application-with-minimal-downtime"></a><span data-ttu-id="2014a-242">Aggiornare un'applicazione con tempo di inattività minimo</span><span class="sxs-lookup"><span data-stu-id="2014a-242">Upgrade an application with minimal downtime</span></span>
<span data-ttu-id="2014a-243">A volte un'applicazione deve essere portata offline per ragioni di manutenzione pianificata, ad esempio un aggiornamento dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2014a-243">Sometimes an application must be taken offline because of planned maintenance such as an application upgrade.</span></span> <span data-ttu-id="2014a-244">[Gestire gli aggiornamenti dell'applicazione](sql-database-manage-application-rolling-upgrade.md) viene descritto come tooenable di replica geografica attiva toouse eseguire aggiornamenti di tempo di inattività di toominimize applicazione cloud durante l'aggiornamento e fornire un percorso di recupero in caso di errore.</span><span class="sxs-lookup"><span data-stu-id="2014a-244">[Manage application upgrades](sql-database-manage-application-rolling-upgrade.md) describes how toouse active geo-replication tooenable rolling upgrades of your cloud application toominimize downtime during upgrades and provide a recovery path if something goes wrong.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="2014a-245">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="2014a-245">Next steps</span></span>
<span data-ttu-id="2014a-246">Per una descrizione delle considerazioni sulla progettazione di applicazioni per database autonomi e pool elastici, vedere [Progettare un'applicazione per il ripristino di emergenza cloud](sql-database-designing-cloud-solutions-for-disaster-recovery.md) e [Strategie di ripristino di emergenza per applicazioni che usano il pool elastico del database SQL](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="2014a-246">For a discussion of application design considerations for stand-alone databases and for elastic pools, see [Design an application for cloud disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md) and [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>
