---
title: indicazioni aaaPerformance - Database SQL di Azure | Documenti Microsoft
description: "Hello Database SQL di Azure vengono forniti consigli per i database di SQL che può migliorare le prestazioni di query corrente."
services: sql-database
documentationcenter: 
author: stevestein
manager: jhubbard
editor: monicar
ms.assetid: 1db441ff-58f5-45da-8d38-b54dc2aa6145
ms.service: sql-database
ms.custom: monitor & tune
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/05/2017
ms.author: sstein
ms.openlocfilehash: 77db338a0a395aec78c9e02849ae5ba4f2d01680
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="performance-recommendations"></a><span data-ttu-id="889c3-103">Raccomandazioni per le prestazioni</span><span class="sxs-lookup"><span data-stu-id="889c3-103">Performance recommendations</span></span>

<span data-ttu-id="889c3-104">Database SQL di Azure apprende e si adatta all'applicazione e vengono forniti consigli personalizzati consentendo prestazioni hello toomaximize dei database SQL.</span><span class="sxs-lookup"><span data-stu-id="889c3-104">Azure SQL Database learns and adapts with your application and provides customized recommendations enabling you toomaximize hello performance of your SQL databases.</span></span> <span data-ttu-id="889c3-105">Le prestazioni vengono valutate continuamente analizzando la cronologia relativa all'utilizzo del database SQL.</span><span class="sxs-lookup"><span data-stu-id="889c3-105">Your performance is continuously assessed by analyzing your SQL Database usage history.</span></span> <span data-ttu-id="889c3-106">consigli Hello forniti sono basati su un modello di carico di lavoro univoco del database e migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="889c3-106">hello recommendations that are provided are based on a database unique workload pattern and help improve its performance.</span></span>

> [!NOTE]
> <span data-ttu-id="889c3-107">Il modo consigliato per usare le raccomandazioni prevede l'abilitazione della funzionalità di 'Ottimizzazione automatica' nel database.</span><span class="sxs-lookup"><span data-stu-id="889c3-107">Recommended way of using recommendations is by enabling ‘Automatic tuning’ on your database.</span></span> <span data-ttu-id="889c3-108">Per altri dettagli, vedere [Ottimizzazione automatica](sql-database-automatic-tuning.md).</span><span class="sxs-lookup"><span data-stu-id="889c3-108">For details, see [Automatic tuning](sql-database-automatic-tuning.md).</span></span>
>

## <a name="create-index-recommendations"></a><span data-ttu-id="889c3-109">Raccomandazioni relative alla creazione di indici</span><span class="sxs-lookup"><span data-stu-id="889c3-109">Create index recommendations</span></span>
<span data-ttu-id="889c3-110">Database SQL di Azure in modo continuo consente di monitorare le query hello in esecuzione e identifica gli indici di hello che potrebbe migliorare le prestazioni di hello.</span><span class="sxs-lookup"><span data-stu-id="889c3-110">Azure SQL Database continuously monitors hello queries being executed and identifies hello indexes that could improve hello performance.</span></span> <span data-ttu-id="889c3-111">Dopo aver raccolto dati sufficienti per confermare la mancanza di un determinato indice, verrà creata una nuova raccomandazione **Crea indice**.</span><span class="sxs-lookup"><span data-stu-id="889c3-111">Once enough confidence is built that a certain index is missing, a new **Create index** recommendation will be created.</span></span> <span data-ttu-id="889c3-112">Periodo di tempo, potrebbe avere confidenza compilazioni di Database SQL Azure tramite la stima indice hello miglioramento delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="889c3-112">Azure SQL Database builds confidence by estimating performance gain hello index would bring through time.</span></span> <span data-ttu-id="889c3-113">A seconda di miglioramento delle prestazioni stimato hello, raccomandazioni vengono classificate come alta, Media o bassa.</span><span class="sxs-lookup"><span data-stu-id="889c3-113">Depending on hello estimated performance gain, recommendations are categorized as High, Medium,  or Low.</span></span> 

<span data-ttu-id="889c3-114">Gli indici creati usando le raccomandazioni vengono sempre contrassegnati come indici auto_created.</span><span class="sxs-lookup"><span data-stu-id="889c3-114">Indexes created using recommendations are always flagged as auto_created indexes.</span></span> <span data-ttu-id="889c3-115">È possibile scoprire quali indici sono auto_created esaminando la vista sys.indexes.</span><span class="sxs-lookup"><span data-stu-id="889c3-115">You can see which indexes are auto_created by looking at sys.indexes view.</span></span> <span data-ttu-id="889c3-116">Gli indici creati automaticamente non bloccano i comandi ALTER/RENAME.</span><span class="sxs-lookup"><span data-stu-id="889c3-116">Auto created indexes don’t block ALTER/RENAME commands.</span></span> <span data-ttu-id="889c3-117">Se si tenta di colonna hello toodrop dotato di un indice automaticamente su di esso, hello comando passa automaticamente hello creato l'indice viene quindi eliminato con il comando hello anche.</span><span class="sxs-lookup"><span data-stu-id="889c3-117">If you try toodrop hello column that has an auto created index over it, hello command passes and hello auto created index is dropped with hello command as well.</span></span> <span data-ttu-id="889c3-118">Comando ALTER/RINOMINA hello colonne indicizzate bloccano indici normali.</span><span class="sxs-lookup"><span data-stu-id="889c3-118">Regular indexes would block hello ALTER/RENAME command on columns that are indexed.</span></span>

<span data-ttu-id="889c3-119">Una volta creare hello viene applicata l'indicazione di un indice, Database SQL di Azure verranno confrontate le prestazioni delle query hello con hello linea di base.</span><span class="sxs-lookup"><span data-stu-id="889c3-119">Once hello create index recommendation is applied, Azure SQL Database will compare performance of hello queries with hello baseline performance.</span></span> <span data-ttu-id="889c3-120">Se il nuovo indice introdotti miglioramenti delle prestazioni di hello, indicazione verrà contrassegnata come esito positivo e report di impatto sarà disponibile.</span><span class="sxs-lookup"><span data-stu-id="889c3-120">If new index brought improvements in hello performance, recommendation will be flagged as successful and impact report will be available.</span></span> <span data-ttu-id="889c3-121">In caso di indice hello non offrire i vantaggi di hello, verrà ripristinato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="889c3-121">In case hello index didn’t bring hello benefits, it will be automatically reverted.</span></span> <span data-ttu-id="889c3-122">In questo modo il Database di SQL Azure garantisce che utilizzando indicazioni solo migliorare le prestazioni del database hello.</span><span class="sxs-lookup"><span data-stu-id="889c3-122">This way Azure SQL Database ensures that using recommendations will only improve hello database performance.</span></span>

<span data-ttu-id="889c3-123">Qualsiasi **Crea indice** raccomandazione è Backoff criteri che non consentono l'applicazione hello dell'indicazione se utilizzo di DTU di database o il pool di hello è superiore all'80% 20 minuti o se l'archiviazione hello è superiore al 90% di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="889c3-123">Any **Create index** recommendation has a back off policy that won’t allow applying hello recommendation if hello database or pool DTU usage was above 80% in last 20 minutes or if hello storage is above 90% of usage.</span></span> <span data-ttu-id="889c3-124">In questo caso, la raccomandazione hello verrà posticipata.</span><span class="sxs-lookup"><span data-stu-id="889c3-124">In this case, hello recommendation will be postponed.</span></span>

## <a name="drop-index-recommendations"></a><span data-ttu-id="889c3-125">Raccomandazioni relative all'eliminazione di indici</span><span class="sxs-lookup"><span data-stu-id="889c3-125">Drop index recommendations</span></span>
<span data-ttu-id="889c3-126">Un indice mancante, Database SQL di Azure in modo continuo toodetecting analizza inoltre prestazioni hello di indici esistente.</span><span class="sxs-lookup"><span data-stu-id="889c3-126">In addition toodetecting a missing index, Azure SQL Database continuously analyzes hello performance of existing indexes.</span></span> <span data-ttu-id="889c3-127">Se un indice è inutilizzato, il database SQL di Azure proporrà di eliminarlo.</span><span class="sxs-lookup"><span data-stu-id="889c3-127">If index is not used, Azure SQL Database will recommend dropping it.</span></span> <span data-ttu-id="889c3-128">L'eliminazione di un indice è consigliabile in due casi:</span><span class="sxs-lookup"><span data-stu-id="889c3-128">Dropping an index is recommended in two cases:</span></span>
* <span data-ttu-id="889c3-129">L'indice è un duplicato di un altro indice (include colonna, schema di partizione e filtri identici)</span><span class="sxs-lookup"><span data-stu-id="889c3-129">Index is a duplicate of another index (same indexed and included column, partition schema, and filters)</span></span>
* <span data-ttu-id="889c3-130">L'indice risulta inutilizzato per un periodo prolungato (93 giorni)</span><span class="sxs-lookup"><span data-stu-id="889c3-130">Index is unused for a prolonged period (93 days)</span></span>

<span data-ttu-id="889c3-131">Indicazioni relative agli indici di rilascio anche passare attraverso la verifica di hello dopo l'implementazione.</span><span class="sxs-lookup"><span data-stu-id="889c3-131">Drop index recommendations also go through hello verification after implementation.</span></span> <span data-ttu-id="889c3-132">Se un miglioramento delle prestazioni di hello report impatto hello sarà disponibile.</span><span class="sxs-lookup"><span data-stu-id="889c3-132">If hello performance is improved hello impact report will be available.</span></span> <span data-ttu-id="889c3-133">Se viene invece rilevata una riduzione delle prestazioni, la raccomandazione verrà annullata.</span><span class="sxs-lookup"><span data-stu-id="889c3-133">In case performance degradation is detected, recommendation will be reverted.</span></span>


## <a name="parameterize-queries-recommendations"></a><span data-ttu-id="889c3-134">Raccomandazioni relative alla creazione di query con parametri</span><span class="sxs-lookup"><span data-stu-id="889c3-134">Parameterize queries recommendations</span></span>
<span data-ttu-id="889c3-135">**Parametrizzare le query** indicazioni vengono visualizzati quando si dispone di uno o più query che vengono costantemente ricompilata ma finisce con hello stesso piano di esecuzione di query.</span><span class="sxs-lookup"><span data-stu-id="889c3-135">**Parameterize queries** recommendations appear when you have one or more queries that are constantly being recompiled but end up with hello same query execution plan.</span></span> <span data-ttu-id="889c3-136">Questa condizione apre tooapply un'opportunità forzata, che consentirà di piani di query toobe memorizzati nella cache e riutilizzati in hello futura miglioramento delle prestazioni e ridurre l'utilizzo delle risorse.</span><span class="sxs-lookup"><span data-stu-id="889c3-136">This condition opens up an opportunity tooapply forced parameterization, which will allow query plans toobe cached and reused in hello future improving performance and reducing resource usage.</span></span> 

<span data-ttu-id="889c3-137">Ogni query eseguita inizialmente in SQL Server deve toogenerate toobe compilato un piano di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="889c3-137">Every query issued against SQL Server initially needs toobe compiled toogenerate an execution plan.</span></span> <span data-ttu-id="889c3-138">Ogni piano generato viene aggiunto toohello cache dei piani e le esecuzioni successive di hello stessa query è possibile riutilizzare il piano dalla cache di hello, eliminando hello necessità di ulteriore compilazione.</span><span class="sxs-lookup"><span data-stu-id="889c3-138">Each generated plan is added toohello plan cache and subsequent executions of hello same query can reuse this plan from hello cache, eliminating hello need for additional compilation.</span></span> 

<span data-ttu-id="889c3-139">Le applicazioni che inviano query, inclusi i valori senza parametri, possono provocare un overhead delle prestazioni tooa, dove per ogni query con valori di parametro diversi piano di esecuzione hello viene compilata nuovamente.</span><span class="sxs-lookup"><span data-stu-id="889c3-139">Applications that send queries, which include non-parameterized values, can lead tooa performance overhead, where for every such query with different parameter values hello execution plan is compiled again.</span></span> <span data-ttu-id="889c3-140">In molti hello casi stesse query con parametri diversi, generano valori hello stessi piani di esecuzione, ma questi piani vengono aggiunti separatamente ancora toohello cache dei piani.</span><span class="sxs-lookup"><span data-stu-id="889c3-140">In many cases hello same queries with different parameter values generate hello same execution plans, but these plans are still separately added toohello plan cache.</span></span> <span data-ttu-id="889c3-141">Ricompilazione di piani di esecuzione utilizzare le risorse del database, incrementare hello durata ora e overflow hello piano di query causando cache dei piani toobe eliminato dalla cache di hello.</span><span class="sxs-lookup"><span data-stu-id="889c3-141">Recompiling execution plans use database resources, increase hello query duration time and overflow hello plan cache causing plans toobe evicted from hello cache.</span></span> <span data-ttu-id="889c3-142">Questo comportamento di SQL Server può essere modificato impostando l'opzione parameterization nel database di hello forzato hello.</span><span class="sxs-lookup"><span data-stu-id="889c3-142">This behavior of SQL Server can be altered by setting hello forced parameterization option on hello database.</span></span> 

<span data-ttu-id="889c3-143">toohelp è stimare l'impatto di hello questa raccomandazione, vengono fornite con un confronto tra CPU effettiva hello hello e utilizzo previsto l'utilizzo della CPU (come se è stato applicato l'indicazione di hello).</span><span class="sxs-lookup"><span data-stu-id="889c3-143">toohelp you estimate hello impact of this recommendation, you are provided with a comparison between hello actual CPU usage and hello projected CPU usage (as if hello recommendation was applied).</span></span> <span data-ttu-id="889c3-144">Inoltre risparmio tooCPU, la durata della query diminuisce per hello trascorso in compilazione.</span><span class="sxs-lookup"><span data-stu-id="889c3-144">In addition tooCPU savings, your query duration decreases for hello time spent in compilation.</span></span> <span data-ttu-id="889c3-145">Sarà inoltre necessario molto meno overhead nella cache dei piani, consentendo di maggioranza di hello toostay nella cache dei piani e riutilizzare.</span><span class="sxs-lookup"><span data-stu-id="889c3-145">There will also be much less overhead on plan cache, allowing majority of hello plans toostay in cache and be reused.</span></span> <span data-ttu-id="889c3-146">È possibile applicare questa raccomandazione rapidamente e facilmente facendo clic su hello **applica** comando.</span><span class="sxs-lookup"><span data-stu-id="889c3-146">You can apply this recommendation quickly and easily by clicking on hello **Apply** command.</span></span> 

<span data-ttu-id="889c3-147">Quando si applica questa raccomandazione, verrà attivata la parametrizzazione forzata in pochi minuti sul database e viene avviato il monitoraggio di processo che dura circa 24 ore hello.</span><span class="sxs-lookup"><span data-stu-id="889c3-147">Once you apply this recommendation, it will enable forced parameterization within minutes on your database and it starts hello monitoring process which approximately lasts for 24 hours.</span></span> <span data-ttu-id="889c3-148">Dopo questo periodo, sarà possibile essere in grado di toosee hello convalida report che mostra l'utilizzo della CPU del database di 24 ore prima e dopo l'applicazione di raccomandazione hello.</span><span class="sxs-lookup"><span data-stu-id="889c3-148">After this period, you will be able toosee hello validation report that shows CPU usage of your database 24 hours before and after hello recommendation has been applied.</span></span> <span data-ttu-id="889c3-149">Preparazione del Database SQL dispone di un meccanismo di sicurezza che verrà automaticamente ripristinato raccomandazione hello applicato nel caso in cui è stata rilevata una regressione delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="889c3-149">SQL Database Advisor has a safety mechanism that automatically reverts hello applied recommendation in case a performance regression has been detected.</span></span>

## <a name="fix-schema-issues-recommendations"></a><span data-ttu-id="889c3-150">Raccomandazioni relative alla correzione di problemi di schema</span><span class="sxs-lookup"><span data-stu-id="889c3-150">Fix schema issues recommendations</span></span>
<span data-ttu-id="889c3-151">**Risolvere i problemi dello schema** indicazioni vengono visualizzati quando hello servizio Database SQL notifiche un'anomalia numero hello correlate allo schema di errori di SQL nel Database SQL di Azure in corso.</span><span class="sxs-lookup"><span data-stu-id="889c3-151">**Fix schema issues** recommendations appear when hello SQL Database service notices an anomaly in hello number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="889c3-152">In genere questa indicazione viene visualizzata quando il database rileva più errori correlati allo schema (nome di colonna non valido, nome di oggetto non valido e così via) nell'arco di un'ora.</span><span class="sxs-lookup"><span data-stu-id="889c3-152">This recommendation typically appears when your database encounters multiple schema-related errors (invalid column name, invalid object name, etc.) within an hour.</span></span>

<span data-ttu-id="889c3-153">"I problemi dello schema" sono una classe di errori di sintassi in SQL Server che si verificano quando non sono allineate hello definizioni di query SQL hello e hello hello dello schema del database.</span><span class="sxs-lookup"><span data-stu-id="889c3-153">“Schema issues” are a class of syntax errors in SQL Server that happen when hello definition of hello SQL query and hello definition of hello database schema are not aligned.</span></span> <span data-ttu-id="889c3-154">Ad esempio, una delle colonne hello prevede dalla query hello potrebbe essere manca nella tabella di destinazione hello o viceversa.</span><span class="sxs-lookup"><span data-stu-id="889c3-154">For example, one of hello columns expected by hello query may be missing in hello target table, or vice versa.</span></span> 

<span data-ttu-id="889c3-155">Indicazione di "Correzione problema relativo allo schema" viene visualizzato quando il servizio di Database SQL di Azure rileva un'anomalia numero hello correlate allo schema di errori di SQL nel Database SQL di Azure in corso.</span><span class="sxs-lookup"><span data-stu-id="889c3-155">“Fix schema issue” recommendation appears when Azure SQL Database service notices an anomaly in hello number of schema-related SQL errors happening on your Azure SQL Database.</span></span> <span data-ttu-id="889c3-156">Hello gli errori di hello illustrato nella tabella che sono correlati tooschema problemi seguenti:</span><span class="sxs-lookup"><span data-stu-id="889c3-156">hello following table shows hello errors that are related tooschema issues:</span></span>

| <span data-ttu-id="889c3-157">Codice di errore SQL</span><span class="sxs-lookup"><span data-stu-id="889c3-157">SQL Error Code</span></span> | <span data-ttu-id="889c3-158">Message</span><span class="sxs-lookup"><span data-stu-id="889c3-158">Message</span></span> |
| --- | --- |
| <span data-ttu-id="889c3-159">201</span><span class="sxs-lookup"><span data-stu-id="889c3-159">201</span></span> |<span data-ttu-id="889c3-160">La procedura o funzione '*' richiede il parametro '*', che non è stato specificato.</span><span class="sxs-lookup"><span data-stu-id="889c3-160">Procedure or function '*' expects parameter '*', which was not supplied.</span></span> |
| <span data-ttu-id="889c3-161">207</span><span class="sxs-lookup"><span data-stu-id="889c3-161">207</span></span> |<span data-ttu-id="889c3-162">Il nome di colonna '*' non è valido.</span><span class="sxs-lookup"><span data-stu-id="889c3-162">Invalid column name '*'.</span></span> |
| <span data-ttu-id="889c3-163">208</span><span class="sxs-lookup"><span data-stu-id="889c3-163">208</span></span> |<span data-ttu-id="889c3-164">Il nome di oggetto '*' non è valido.</span><span class="sxs-lookup"><span data-stu-id="889c3-164">Invalid object name '*'.</span></span> |
| <span data-ttu-id="889c3-165">213</span><span class="sxs-lookup"><span data-stu-id="889c3-165">213</span></span> |<span data-ttu-id="889c3-166">Il nome della colonna o il numero dei valori specificati non corrisponde alla definizione della tabella.</span><span class="sxs-lookup"><span data-stu-id="889c3-166">Column name or number of supplied values does not match table definition.</span></span> |
| <span data-ttu-id="889c3-167">2812</span><span class="sxs-lookup"><span data-stu-id="889c3-167">2812</span></span> |<span data-ttu-id="889c3-168">Non è stato possibile trovare la stored procedure '*'.</span><span class="sxs-lookup"><span data-stu-id="889c3-168">Could not find stored procedure '*'.</span></span> |
| <span data-ttu-id="889c3-169">8144</span><span class="sxs-lookup"><span data-stu-id="889c3-169">8144</span></span> |<span data-ttu-id="889c3-170">Numero eccessivo di argomenti specificati per la procedura o la funzione *.</span><span class="sxs-lookup"><span data-stu-id="889c3-170">Procedure or function * has too many arguments specified.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="889c3-171">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="889c3-171">Next steps</span></span>
<span data-ttu-id="889c3-172">Monitorare le raccomandazioni e continuare tooapply li toorefine prestazioni.</span><span class="sxs-lookup"><span data-stu-id="889c3-172">Monitor your recommendations and continue tooapply them toorefine performance.</span></span> <span data-ttu-id="889c3-173">I carichi di lavoro dei database sono dinamici e cambiano in modo continuo.</span><span class="sxs-lookup"><span data-stu-id="889c3-173">Database workloads are dynamic and change continuously.</span></span> <span data-ttu-id="889c3-174">Preparazione del Database SQL continua toomonitor e fornire indicazioni che possono potenzialmente migliorare le prestazioni del database.</span><span class="sxs-lookup"><span data-stu-id="889c3-174">SQL Database advisor continues toomonitor and provide recommendations that can potentially improve your database's performance.</span></span> 

* <span data-ttu-id="889c3-175">Vedere [consigli relativi alle prestazioni nel portale di Azure hello](sql-database-advisor-portal.md) per i passaggi per la modalità consigli relativi alle prestazioni toouse in hello portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="889c3-175">See [Performance recommendations in hello Azure portal](sql-database-advisor-portal.md) for steps on how toouse performance recommendations in hello Azure portal.</span></span>
* <span data-ttu-id="889c3-176">Vedere [informazioni dettagliate prestazioni Query](sql-database-query-performance.md) toolearn sulle e visualizzazione hello impatto sulle prestazioni delle query top.</span><span class="sxs-lookup"><span data-stu-id="889c3-176">See [Query Performance Insights](sql-database-query-performance.md) toolearn about and view hello performance impact of your top queries.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="889c3-177">Risorse aggiuntive</span><span class="sxs-lookup"><span data-stu-id="889c3-177">Additional resources</span></span>
* [<span data-ttu-id="889c3-178">Archivio query</span><span class="sxs-lookup"><span data-stu-id="889c3-178">Query Store</span></span>](https://msdn.microsoft.com/library/dn817826.aspx)
* [<span data-ttu-id="889c3-179">CREATE INDEX</span><span class="sxs-lookup"><span data-stu-id="889c3-179">CREATE INDEX</span></span>](https://msdn.microsoft.com/library/ms188783.aspx)
* [<span data-ttu-id="889c3-180">Controllo degli accessi in base al ruolo</span><span class="sxs-lookup"><span data-stu-id="889c3-180">Role-based access control</span></span>](../active-directory/role-based-access-control-what-is.md)

