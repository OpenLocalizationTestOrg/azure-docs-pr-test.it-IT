---
title: Analisi degli eventi dell'infrastruttura di servizio con Application Insights aaaAzure | Documenti Microsoft
description: Informazioni sulla visualizzazione e l'analisi di eventi con Application Insights per il monitoraggio e la diagnostica dei cluster di Azure Service Fabric.
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/26/2017
ms.author: dekapur
ms.openlocfilehash: 59bb5a409f2951e5b2034049e782dd0da67f933c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="event-analysis-and-visualization-with-application-insights"></a><span data-ttu-id="b5aa2-103">Analisi e visualizzazione degli eventi con Application Insights</span><span class="sxs-lookup"><span data-stu-id="b5aa2-103">Event analysis and visualization with Application Insights</span></span>

<span data-ttu-id="b5aa2-104">Azure Application Insights è una piattaforma estendibile per la diagnostica e il monitoraggio dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-104">Azure Application Insights is an extensible platform for application monitoring and diagnostics.</span></span> <span data-ttu-id="b5aa2-105">Include un potente strumento di analisi ed esecuzione di query, visualizzazione e dashboard personalizzabili e altre opzioni tra cui gli avvisi automatizzati.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-105">It includes a powerful analytics and querying tool, customizable dashboard and visualizations, and further options including automated alerting.</span></span> <span data-ttu-id="b5aa2-106">È consigliata piattaforma per il monitoraggio e diagnostica per servizi e applicazioni di Service Fabric hello.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-106">It is hello recommended platform for monitoring and diagnostics for Service Fabric applications and services.</span></span>

## <a name="setting-up-application-insights"></a><span data-ttu-id="b5aa2-107">Configurazione di Application Insights</span><span class="sxs-lookup"><span data-stu-id="b5aa2-107">Setting up Application Insights</span></span>

### <a name="creating-an-ai-resource"></a><span data-ttu-id="b5aa2-108">Creazione di una risorsa AI</span><span class="sxs-lookup"><span data-stu-id="b5aa2-108">Creating an AI Resource</span></span>

<span data-ttu-id="b5aa2-109">risorsa toocreate AI, head toohello Azure Marketplace e cercare "Application Insights".</span><span class="sxs-lookup"><span data-stu-id="b5aa2-109">toocreate an AI resource, head over toohello Azure Marketplace, and search for "Application Insights".</span></span> <span data-ttu-id="b5aa2-110">È necessario visualizzate come prima soluzione hello (si trova nella categoria "Web + Mobile").</span><span class="sxs-lookup"><span data-stu-id="b5aa2-110">It should show up as hello first solution (it is under category "Web + Mobile").</span></span> <span data-ttu-id="b5aa2-111">Fare clic su **crea** quando si sta esaminando risorsa destro hello (verificare che il percorso corrisponde a immagine hello riportata di seguito).</span><span class="sxs-lookup"><span data-stu-id="b5aa2-111">Click **Create** when you are looking at hello right resource (confirm that your path matches hello image below).</span></span>

![Nuova risorsa di Application Insights](media/service-fabric-diagnostics-event-analysis-appinsights/create-new-ai-resource.png)

<span data-ttu-id="b5aa2-113">È necessario toofill out alcune risorse di informazioni tooprovision hello correttamente.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-113">You will need toofill out some information tooprovision hello resource correctly.</span></span> <span data-ttu-id="b5aa2-114">In hello *tipo di applicazione* campo, utilizzare "Applicazione web ASP.NET" Se si intende utilizzare uno qualsiasi di Service Fabric del modelli di programmazione o la pubblicazione di un cluster di toohello applicazione .NET.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-114">In hello *Application Type* field, use "ASP.NET web application" if you will be using any of Service Fabric's programming models or publishing a .NET application toohello cluster.</span></span> <span data-ttu-id="b5aa2-115">Se si intende distribuire contenitori e file eseguibili guest, usare "Generale".</span><span class="sxs-lookup"><span data-stu-id="b5aa2-115">Use "General" if you will be deploying guest executables and containers.</span></span> <span data-ttu-id="b5aa2-116">Predefinito toousing "Applicazione web ASP.NET" tookeep in generale, le opzioni di aprire in hello future.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-116">In general, default toousing "ASP.NET web application" tookeep your options open in hello future.</span></span> <span data-ttu-id="b5aa2-117">nome Hello è tooyour preferenza e sia il gruppo di risorse hello e la sottoscrizione siano modificabile post-distribuzione della risorsa hello.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-117">hello name is up tooyour preference, and both hello resource group and subscription are changeable post-deployment of hello resource.</span></span> <span data-ttu-id="b5aa2-118">È consigliabile che la risorsa AI sia in hello stesso gruppo di risorse del cluster.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-118">We recommend that your AI resource is in hello same resource group as your cluster.</span></span> <span data-ttu-id="b5aa2-119">Per altre informazioni, vedere [Creare una risorsa di Application Insights](../application-insights/app-insights-create-new-resource.md)</span><span class="sxs-lookup"><span data-stu-id="b5aa2-119">If you need more information, please see [Create an Application Insights resource](../application-insights/app-insights-create-new-resource.md)</span></span>

<span data-ttu-id="b5aa2-120">È necessario hello chiave di strumentazione AI tooconfigure AI con lo strumento di aggregazione di evento.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-120">You need hello AI Instrumentation Key tooconfigure AI with your event aggregation tool.</span></span> <span data-ttu-id="b5aa2-121">Una volta configurata la risorsa AI è (richiede alcuni minuti dopo la convalida di distribuzione hello), passare tooit e trovare hello **proprietà** sezione hello barra di spostamento a sinistra.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-121">Once your AI resource is set up (takes a few minutes after hello deployment is validated), navigate tooit and find hello **Properties** section on hello left navigation bar.</span></span> <span data-ttu-id="b5aa2-122">Verrà visualizzato un nuovo pannello che mostra una *CHIAVE DI STRUMENTAZIONE*.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-122">A new blade will open up that shows an *INSTRUMENTATION KEY*.</span></span> <span data-ttu-id="b5aa2-123">Se è necessario sottoscrizione hello toochange o gruppo di risorse della risorsa hello, può essere eseguita in questo caso anche.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-123">If you need toochange hello subscription or resource group of hello resource, it can be done here as well.</span></span>

### <a name="configuring-ai-with-wad"></a><span data-ttu-id="b5aa2-124">Configurazione di AI con WAD</span><span class="sxs-lookup"><span data-stu-id="b5aa2-124">Configuring AI with WAD</span></span>

<span data-ttu-id="b5aa2-125">Esistono due modi principali dati toosend di WAD tooAzure AI, ottenuto mediante l'aggiunta di una configurazione di WAD AI sink toohello, come descritto in dettaglio nella [questo articolo](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="b5aa2-125">There are two primary ways toosend data from WAD tooAzure AI, which is achieved by adding an AI sink toohello WAD configuration, as detailed in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

#### <a name="add-an-ai-instrumentation-key-when-creating-a-cluster-in-azure-portal"></a><span data-ttu-id="b5aa2-126">Aggiungere una chiave di strumentazione AI durante la creazione di un cluster nel portale di Azure</span><span class="sxs-lookup"><span data-stu-id="b5aa2-126">Add an AI Instrumentation Key when creating a cluster in Azure portal</span></span>

![Aggiunta di un AIKey](media/service-fabric-diagnostics-event-analysis-appinsights/azure-enable-diagnostics.png)

<span data-ttu-id="b5aa2-128">Quando si crea un cluster, se è attivata la diagnostica "On", verrà visualizzato un campo facoltativo di tooenter una chiave di strumentazione di Application Insights.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-128">When creating a cluster, if Diagnostics is turned "On", an optional field tooenter an Application Insights Instrumentation key will show.</span></span> <span data-ttu-id="b5aa2-129">Se si incolla qui il IKey AI, sink hello AI verrà automaticamente configurato per consentire in modello di gestione risorse hello toodeploy utilizzati il cluster.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-129">If you paste your AI IKey here, hello AI sink will be automatically configured for you in hello Resource Manager template that is used toodeploy your cluster.</span></span>

#### <a name="add-hello-ai-sink-toohello-resource-manager-template"></a><span data-ttu-id="b5aa2-130">Aggiungere modello di gestione risorse AI Sink toohello hello</span><span class="sxs-lookup"><span data-stu-id="b5aa2-130">Add hello AI Sink toohello Resource Manager template</span></span>

<span data-ttu-id="b5aa2-131">In hello "WadCfg" del modello di gestione risorse di hello, aggiungere "Sink" includendo hello seguenti due modifiche:</span><span class="sxs-lookup"><span data-stu-id="b5aa2-131">In hello "WadCfg" of hello Resource Manager template, add a "Sink" by including hello following two changes:</span></span>

1. <span data-ttu-id="b5aa2-132">Aggiungere hello sink configurazione:</span><span class="sxs-lookup"><span data-stu-id="b5aa2-132">Add hello sink configuration:</span></span>

    ```json
    "SinksConfig": {
        "Sink": [
            {
                "name": "applicationInsights",
                "ApplicationInsights": "***ADD INSTRUMENTATION KEY HERE***"
            }
        ]
    }

    ```

2. <span data-ttu-id="b5aa2-133">Includere hello Sink in hello DiagnosticMonitorConfiguration aggiungendo hello successiva riga in "DiagnosticMonitorConfiguration" di "WadCfg" hello:</span><span class="sxs-lookup"><span data-stu-id="b5aa2-133">Include hello Sink in hello DiagnosticMonitorConfiguration by adding hello following line in "DiagnosticMonitorConfiguration" of hello "WadCfg":</span></span>

    ```json
    "sinks": "applicationInsights"
    ```

<span data-ttu-id="b5aa2-134">In entrambi i frammenti di codice hello sopra, hello "applicationInsights" nome era sink hello toodescribe utilizzato.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-134">In both hello code snippets above, hello name "applicationInsights" was used toodescribe hello sink.</span></span> <span data-ttu-id="b5aa2-135">Questo non è un requisito e come nome di hello del sink hello è incluso in "sink", è possibile impostare tooany stringa del nome di hello.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-135">This is not a requirement and as long as hello name of hello sink is included in "sinks", you can set hello name tooany string.</span></span>

<span data-ttu-id="b5aa2-136">Attualmente, i registri dal cluster hello verranno visualizzati come tracce nel Visualizzatore di log del AI.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-136">Currently, logs from hello cluster will show up as traces in AI's log viewer.</span></span> <span data-ttu-id="b5aa2-137">Poiché la maggior parte delle tracce hello provenienti da piattaforma hello è di livello "Informativo", è anche possibile provare a modificare registri hello sink configurazione tooonly trasmissione di tipo "Critico" o "Error".</span><span class="sxs-lookup"><span data-stu-id="b5aa2-137">Since most of hello traces coming from hello platform are of level "Informational", you can also consider changing hello sink configuration tooonly send logs of type "Critical" or "Error".</span></span> <span data-ttu-id="b5aa2-138">Questa operazione può essere eseguita aggiungendo sink tooyour "Canali", come illustrato in [questo articolo](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span><span class="sxs-lookup"><span data-stu-id="b5aa2-138">This can be done by adding "Channels" tooyour sink, as demonstrated in [this article](../monitoring-and-diagnostics/azure-diagnostics-configure-application-insights.md).</span></span>

>[!NOTE]
><span data-ttu-id="b5aa2-139">Se si utilizza un IKey AI errato nel portale o nel modello di gestione risorse, sarà necessario toomanually Modifica chiave hello e aggiornare il cluster hello / ridistribuirla.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-139">If you use an incorrect AI IKey either in portal or in your Resource Manager template, you will have toomanually change hello key and update hello cluster / redeploy it.</span></span> 

### <a name="configuring-ai-with-eventflow"></a><span data-ttu-id="b5aa2-140">Configurazione di AI con EventFlow</span><span class="sxs-lookup"><span data-stu-id="b5aa2-140">Configuring AI with EventFlow</span></span>

<span data-ttu-id="b5aa2-141">Se si utilizza EventFlow tooaggregate eventi, assicurarsi che tooimport hello `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`pacchetto NuGet.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-141">If you are using EventFlow tooaggregate events, make sure tooimport hello `Microsoft.Diagnostics.EventFlow.Output.ApplicationInsights`NuGet package.</span></span> <span data-ttu-id="b5aa2-142">seguente Hello è incluso in hello toobe *restituisce* sezione di hello *eventFlowConfig.json*:</span><span class="sxs-lookup"><span data-stu-id="b5aa2-142">hello following has toobe included in hello *outputs* section of hello *eventFlowConfig.json*:</span></span>

```json
"outputs": [
    {
        "type": "ApplicationInsights",
        // (replace hello following value with your AI resource's instrumentation key)
        "instrumentationKey": "00000000-0000-0000-0000-000000000000"
    }
]
```

<span data-ttu-id="b5aa2-143">Apportare modifiche di hello necessario toomake che nei filtri, nonché includere tutti gli altri input (insieme ai rispettivi pacchetti NuGet).</span><span class="sxs-lookup"><span data-stu-id="b5aa2-143">Make sure toomake hello required changes in your filters, as well as include any other inputs (along with their respective NuGet packages).</span></span>

## <a name="aisdk"></a><span data-ttu-id="b5aa2-144">AI.SDK</span><span class="sxs-lookup"><span data-stu-id="b5aa2-144">AI.SDK</span></span>

<span data-ttu-id="b5aa2-145">Si consiglia in genere toouse EventFlow e WAD come soluzioni di aggregazione, perché consentono un toodiagnostics approccio più modulare e non monitoraggio, ad esempio se si desidera toochange l'output da EventFlow, richiede tooyour alcuna modifica effettiva strumentazione, solo un file di configurazione tooyour semplice modifica.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-145">It is generally recommended toouse EventFlow and WAD as aggregation solutions, because they allow for a more modular approach toodiagnostics and monitoring, i.e. if you want toochange your outputs from EventFlow, it requires no change tooyour actual instrumentation, just a simple modification tooyour config file.</span></span> <span data-ttu-id="b5aa2-146">Se, tuttavia, si decide tooinvest con Application Insights e non sono probabilmente toochange tooa altra piattaforma, è consigliabile esaminare tramite AI nuovo SDK per l'aggregazione degli eventi e inviarli tooAI.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-146">If, however, you decide tooinvest in using Application Insights and are not likely toochange tooa different platform, you should look into using AI's new SDK for aggregating events and sending them tooAI.</span></span> <span data-ttu-id="b5aa2-147">Ciò significa che non sarà più possibile tooconfigure EventFlow toosend tooAI i dati, ma invece installerà pacchetto NuGet di Service Fabric del ApplicationInsight hello.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-147">This means that you will no longer have tooconfigure EventFlow toosend your data tooAI, but instead will install hello ApplicationInsight's Service Fabric NuGet package.</span></span> <span data-ttu-id="b5aa2-148">Sono disponibili informazioni dettagliate sul pacchetto hello [qui](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span><span class="sxs-lookup"><span data-stu-id="b5aa2-148">Details on hello package can be found [here](https://github.com/Microsoft/ApplicationInsights-ServiceFabric).</span></span>

<span data-ttu-id="b5aa2-149">[Application Insights il supporto per i contenitori e Microservizi](https://azure.microsoft.com/app-insights-microservices/) vengono mostrate alcune hello nuove funzionalità che si sta lavorando (ancora attualmente in versione beta), che consentono di toohave più ricco di dialogo Opzioni di monitoraggio con AI.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-149">[Application Insights support for Microservices and Containers](https://azure.microsoft.com/app-insights-microservices/) shows you some of hello new features that are being worked on (currently still in beta), which allow you toohave richer out-of-the-box monitoring options with AI.</span></span> <span data-ttu-id="b5aa2-150">Sono inclusi il rilevamento delle dipendenze (utilizzato nella creazione di un AppMap di tutti i servizi e applicazioni in un cluster e hello comunicazione fra di esse) e una migliore correlazione di tracce provenienti dai servizi (tal modo è possibile una migliore individuazione di un problema di hello flusso di lavoro di un'applicazione o servizio).</span><span class="sxs-lookup"><span data-stu-id="b5aa2-150">These include dependency tracking (used in building an AppMap of all your services and applications in a cluster and hello communication between them), and better correlation of traces coming from your services (helps in better pinpointing an issue in hello workflow of an app or service).</span></span>

<span data-ttu-id="b5aa2-151">Se si sviluppa in .NET e verrà probabilmente usato alcuni dei modelli di programmazione dell'infrastruttura servizio e sono disposti toouse AI come piattaforma per la visualizzazione e analisi dei dati di evento e di log, si consiglia di utilizzare attraverso hello route AI SDK come il monitoraggio e flusso di lavoro di diagnostica.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-151">If you are developing in .NET and will likely be using some of Service Fabric's programming models, and are willing toouse AI as your platform for visualizing and analyzing event and log data, then we recommend that you go via hello AI SDK route as your monitoring and diagnostics workflow.</span></span> <span data-ttu-id="b5aa2-152">Lettura [questo](../application-insights/app-insights-asp-net-more.md) e [questo](../application-insights/app-insights-asp-net-trace-logs.md) tooget introduttive sull'utilizzo AI toocollect e visualizzare i log.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-152">Read [this](../application-insights/app-insights-asp-net-more.md) and [this](../application-insights/app-insights-asp-net-trace-logs.md) tooget started with using AI toocollect and display your logs.</span></span>

## <a name="navigating-hello-ai-resource-in-azure-portal"></a><span data-ttu-id="b5aa2-153">Esplorazione della risorsa AI hello nel portale di Azure</span><span class="sxs-lookup"><span data-stu-id="b5aa2-153">Navigating hello AI resource in Azure portal</span></span>

<span data-ttu-id="b5aa2-154">Dopo aver configurato AI come output per gli eventi e registri, informazioni devono avviare tooshow nella risorsa AI tra qualche minuto.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-154">Once you have configured AI as an output for your events and logs, information should start tooshow up in your AI resource in a few minutes.</span></span> <span data-ttu-id="b5aa2-155">Passare toohello AI risorsa alla quale avrà si toohello AI dashboard risorse.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-155">Navigate toohello AI resource, which will take you toohello AI resource dashboard.</span></span> <span data-ttu-id="b5aa2-156">Fare clic su **ricerca** hello AI barra delle applicazioni toosee hello più recente tracce che ha ricevuto e toofilter in grado di toobe al loro interno.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-156">Click **Search** in hello AI taskbar toosee hello latest traces that it has received, and toobe able toofilter through them.</span></span>

<span data-ttu-id="b5aa2-157">*Esplora metriche* è uno strumento utile per la creazione di dashboard personalizzati in base alle metriche che possono essere segnalate da applicazioni, servizi e cluster.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-157">*Metrics Explorer* is a useful tool for creating custom dashboards based on metrics that your applications, services, and cluster may be reporting.</span></span> <span data-ttu-id="b5aa2-158">Vedere [esplorazione metriche in Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset backup alcuni grafici per se stessi in base ai dati di hello raccogliere.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-158">See [Exploring Metrics in Application Insights](../application-insights/app-insights-metrics-explorer.md) tooset up a few charts for yourself based on hello data you are collecting.</span></span>

<span data-ttu-id="b5aa2-159">Fare clic su **Analitica** si passerà portale Application Insights Analitica toohello, in cui è possibile eseguire query eventi e le tracce con ambito e Facoltatività maggiori.</span><span class="sxs-lookup"><span data-stu-id="b5aa2-159">Clicking **Analytics** will take you toohello Application Insights Analytics portal, where you can query events and traces with greater scope and optionality.</span></span> <span data-ttu-id="b5aa2-160">Per altre informazioni su questo argomento leggere [Analytics in Application Insights](../application-insights/app-insights-analytics.md) (Analisi in Application Insights).</span><span class="sxs-lookup"><span data-stu-id="b5aa2-160">Read more about this at [Analytics in Application Insights](../application-insights/app-insights-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b5aa2-161">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="b5aa2-161">Next steps</span></span>

* <span data-ttu-id="b5aa2-162">[Impostazione di avvisi in AI](../application-insights/app-insights-alerts.md) toobe informato delle modifiche nell'utilizzo o di prestazioni</span><span class="sxs-lookup"><span data-stu-id="b5aa2-162">[Set up Alerts in AI](../application-insights/app-insights-alerts.md) toobe notified about changes in performance or usage</span></span>
* <span data-ttu-id="b5aa2-163">[Rilevamento in Application Insights smart](../application-insights/app-insights-proactive-diagnostics.md) esegue un'analisi proattiva dei dati di telemetria hello inviati tooAI toowarn di potenziali problemi di prestazioni</span><span class="sxs-lookup"><span data-stu-id="b5aa2-163">[Smart Detection in Application Insights](../application-insights/app-insights-proactive-diagnostics.md) performs a proactive analysis of hello telemetry being sent tooAI toowarn you of potential performance problems</span></span>
