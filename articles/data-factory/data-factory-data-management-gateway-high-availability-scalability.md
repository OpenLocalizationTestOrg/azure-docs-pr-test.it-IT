---
title: "Disponibilità elevata con il gateway di gestione dati in Azure Data Factory | Microsoft Docs"
description: "Questo articolo illustra come è possibile aumentare il numero di istanze di un gateway di gestione dati aggiungendo altri nodi e aumentare le prestazioni accrescendo il numero di processi simultanei che possono essere eseguiti in un nodo."
services: data-factory
documentationcenter: 
author: nabhishek
manager: jhubbard
editor: 
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: abnarain
ms.openlocfilehash: b6bf353a2bad28b0db3a88e971e5c6b209b7ab2b
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="data-management-gateway---high-availability-and-scalability-preview"></a><span data-ttu-id="ab778-103">Gateway di gestione dati: disponibilità elevata e scalabilità (anteprima)</span><span class="sxs-lookup"><span data-stu-id="ab778-103">Data Management Gateway - high availability and scalability (Preview)</span></span>
<span data-ttu-id="ab778-104">Questo articolo consente di configurare una soluzione di disponibilità elevata e scalabilità con Gateway di gestione dati.</span><span class="sxs-lookup"><span data-stu-id="ab778-104">This article helps you configure high availability and scalability solution with Data Management Gateway.</span></span>    

> [!NOTE]
> <span data-ttu-id="ab778-105">Questo articolo presuppone che l'utente abbia già familiarità con i concetti di base relativi a Gateway di gestione dati.</span><span class="sxs-lookup"><span data-stu-id="ab778-105">This article assumes that you are already familiar with basics of Data Management Gateway.</span></span> <span data-ttu-id="ab778-106">In caso contrario, vedere [Gateway di gestione dati](data-factory-data-management-gateway.md).</span><span class="sxs-lookup"><span data-stu-id="ab778-106">If you are not, see [Data Management Gateway](data-factory-data-management-gateway.md).</span></span>

><span data-ttu-id="ab778-107">**Questa funzionalità di anteprima è ufficialmente supportata in Gateway di gestione dati versione 2.12.xxxx.x e successive**.</span><span class="sxs-lookup"><span data-stu-id="ab778-107">**This preview feature is officially supported on Data Management Gateway version 2.12.xxxx.x and above**.</span></span> <span data-ttu-id="ab778-108">Assicurarsi quindi che sia in uso la versione 2.12.xxxx.x o successiva.</span><span class="sxs-lookup"><span data-stu-id="ab778-108">Please make sure you are using version 2.12.xxxx.x or above.</span></span> <span data-ttu-id="ab778-109">Scaricare la versione più recente di Gateway di gestione dati [qui](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="ab778-109">Download the latest version of Data Management Gateway [here](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>

## <a name="overview"></a><span data-ttu-id="ab778-110">Panoramica</span><span class="sxs-lookup"><span data-stu-id="ab778-110">Overview</span></span>
<span data-ttu-id="ab778-111">È possibile associare gateway di gestione dati installati in più computer locali a un solo gateway logico nel portale.</span><span class="sxs-lookup"><span data-stu-id="ab778-111">You can associate data management gateways that are installed on multiple on-premises machines with a single logical gateway from the portal.</span></span> <span data-ttu-id="ab778-112">Questi computer sono chiamati **nodi**.</span><span class="sxs-lookup"><span data-stu-id="ab778-112">These machines are called **nodes**.</span></span> <span data-ttu-id="ab778-113">È possibile avere fino a **quattro nodi** associati a un gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-113">You can have up to **four nodes** associated with a logical gateway.</span></span> <span data-ttu-id="ab778-114">I vantaggi di avere più nodi (computer locali con un gateway installato) per un gateway logico sono:</span><span class="sxs-lookup"><span data-stu-id="ab778-114">The benefits of having multiple nodes (on-premises machines with gateway installed) for a logical gateway are:</span></span>  

- <span data-ttu-id="ab778-115">Migliorare le prestazioni dello spostamento dati tra archivi dati locali e cloud.</span><span class="sxs-lookup"><span data-stu-id="ab778-115">Improve performance of data movement between on-premises and cloud data stores.</span></span>  
- <span data-ttu-id="ab778-116">Se uno dei nodi diventa inattivo per qualsiasi motivo, gli altri nodi rimangono disponibili per lo spostamento dei dati.</span><span class="sxs-lookup"><span data-stu-id="ab778-116">If one of the nodes goes down for some reason, other nodes are still available for moving the data.</span></span> 
- <span data-ttu-id="ab778-117">Se uno dei nodi deve essere portato offline per la manutenzione, gli altri nodi rimangono disponibili per lo spostamento dei dati.</span><span class="sxs-lookup"><span data-stu-id="ab778-117">If one of the nodes need to be taken offline for maintenance, other nodes are still available for moving the data.</span></span>

<span data-ttu-id="ab778-118">È anche possibile configurare il numero di **processi di spostamento dati simultanei** che possono essere eseguiti in un nodo per aumentare le prestazioni dello spostamento dei dati tra archivi dati locali e cloud.</span><span class="sxs-lookup"><span data-stu-id="ab778-118">You can also configure the number of **concurrent data movement jobs** that can run on a node to scale up the capability of moving data between on-premises and cloud data stores.</span></span> 

<span data-ttu-id="ab778-119">Usando il portale di Azure, è possibile monitorare lo stato di questi nodi, per poter decidere se aggiungere o rimuovere un nodo dal gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-119">Using the Azure portal, you can monitor the status of these nodes, which helps you decide whether to add or remove a node from the logical gateway.</span></span> 

## <a name="architecture"></a><span data-ttu-id="ab778-120">Architettura</span><span class="sxs-lookup"><span data-stu-id="ab778-120">Architecture</span></span> 
<span data-ttu-id="ab778-121">Il diagramma seguente offre una panoramica dell'architettura della funzionalità di scalabilità e disponibilità del gateway di gestione dati:</span><span class="sxs-lookup"><span data-stu-id="ab778-121">The following diagram provides the architecture overview of scalability and availability feature of the Data Management Gateway:</span></span> 

![Gateway di gestione dati: disponibilità elevata e scalabilità](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-high-availability-and-scalability.png)

<span data-ttu-id="ab778-123">Un **gateway logico** è il gateway che si aggiunge a una data factory nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ab778-123">A **logical gateway** is the gateway you add to a data factory in the Azure portal.</span></span> <span data-ttu-id="ab778-124">Prima era possibile associare a un gateway logico un solo computer Windows locale con Gateway di gestione dati installato.</span><span class="sxs-lookup"><span data-stu-id="ab778-124">Earlier, you could associate only one on-premises Windows machine with Data Management Gateway installed with a logical gateway.</span></span> <span data-ttu-id="ab778-125">Questo computer gateway locale è detto nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-125">This on-premises gateway machine is called a node.</span></span> <span data-ttu-id="ab778-126">Ora è possibile associare fino a **quattro nodi fisici** a un gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-126">Now, you can associate up to **four physical nodes** with a logical gateway.</span></span> <span data-ttu-id="ab778-127">Un gateway logico con più nodi è detto **gateway multinodo**.</span><span class="sxs-lookup"><span data-stu-id="ab778-127">A logical gateway with multiple nodes is called a **multi-node gateway**.</span></span>  

<span data-ttu-id="ab778-128">Tutti questi nodi sono **attivi**.</span><span class="sxs-lookup"><span data-stu-id="ab778-128">All these nodes are **active**.</span></span> <span data-ttu-id="ab778-129">Tutti possono elaborare i processi di spostamento dati per spostare i dati tra gli archivi dati locali e cloud.</span><span class="sxs-lookup"><span data-stu-id="ab778-129">They all can process data movement jobs to move data between on-premises and cloud data stores.</span></span> <span data-ttu-id="ab778-130">Uno dei nodi funge sia da dispatcher che da ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ab778-130">One of the nodes act as both dispatcher and worker.</span></span> <span data-ttu-id="ab778-131">Gli altri nodi dei gruppi sono nodi ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ab778-131">Other nodes in the groups are worker nodes.</span></span> <span data-ttu-id="ab778-132">Un nodo **dispatcher** esegue il pull di attività/processi di spostamento dati dal servizio cloud e li invia ai nodi ruolo di lavoro (incluso se stesso).</span><span class="sxs-lookup"><span data-stu-id="ab778-132">A **dispatcher** node pulls data movement tasks/jobs from the cloud service and dispatches them to worker nodes (including itself).</span></span> <span data-ttu-id="ab778-133">Un nodo **ruolo di lavoro** esegue processi di spostamento dati per spostare i dati tra gli archivi dati locali e cloud.</span><span class="sxs-lookup"><span data-stu-id="ab778-133">A **worker** node executes data movement jobs to move data between on-premises and cloud data stores.</span></span> <span data-ttu-id="ab778-134">Tutti i nodi sono ruoli di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ab778-134">All nodes are workers.</span></span> <span data-ttu-id="ab778-135">Solo un nodo può essere sia dispatcher che ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ab778-135">Only one node can be both dispatch and worker.</span></span>    

<span data-ttu-id="ab778-136">È in genere possibile iniziare con un nodo e **aumentare il numero di istanze** per aggiungere altri nodi man mano che i nodi esistenti vengono sovraccaricati dalle operazioni di spostamento dati.</span><span class="sxs-lookup"><span data-stu-id="ab778-136">You may typically start with one node and **scale out** to add more nodes as the existing node(s) are overwhelmed with the data movement load.</span></span> <span data-ttu-id="ab778-137">È anche possibile **aumentare le prestazioni** della funzionalità di spostamento dati di un nodo del gateway accrescendo il numero di processi simultanei che possono essere eseguiti nel nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-137">You can also **scale up** the data movement capability of a gateway node by increasing the number of concurrent jobs that are allowed to run on the node.</span></span> <span data-ttu-id="ab778-138">Questa capacità è disponibile anche con un gateway a nodo singolo, anche quando la funzionalità di scalabilità e disponibilità non è abilitata.</span><span class="sxs-lookup"><span data-stu-id="ab778-138">This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span></span> 

<span data-ttu-id="ab778-139">Un gateway con più nodi mantiene sincronizzate le credenziali degli archivi dati in tutti i nodi.</span><span class="sxs-lookup"><span data-stu-id="ab778-139">A gateway with multiple nodes keeps the data store credentials in sync across all nodes.</span></span> <span data-ttu-id="ab778-140">Se si verifica un problema di connettività tra nodi, le credenziali potrebbero non essere sincronizzate. Quando si impostano le credenziali per un archivio dati locale che usa un gateway, le credenziali vengono salvate nel nodo dispatcher/ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ab778-140">If there is a node-to-node connectivity issue, the credentials may be out of sync. When you set credentials for an on-premises data store that uses a gateway, it saves credentials on the dispatcher/worker node.</span></span> <span data-ttu-id="ab778-141">Il nodo dispatcher viene sincronizzato con gli altri nodi ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ab778-141">The dispatcher node syncs with other worker nodes.</span></span> <span data-ttu-id="ab778-142">Questo processo è noto come **sincronizzazione delle credenziali**. Il canale di comunicazione tra i nodi può essere **crittografato** da un certificato SSL/TLS pubblico.</span><span class="sxs-lookup"><span data-stu-id="ab778-142">This process is known as **credentials sync**. The communication channel between nodes can be **encrypted** by a public SSL/TLS certificate.</span></span> 

## <a name="set-up-a-multi-node-gateway"></a><span data-ttu-id="ab778-143">Configurare un gateway multinodo</span><span class="sxs-lookup"><span data-stu-id="ab778-143">Set up a multi-node gateway</span></span>
<span data-ttu-id="ab778-144">Questa sezione presuppone che siano stati letti i due articoli seguenti o che si abbia familiarità con i concetti illustrati in questi articoli:</span><span class="sxs-lookup"><span data-stu-id="ab778-144">This section assumes that you have gone through the following two articles or familiar with concepts in these articles:</span></span> 

- <span data-ttu-id="ab778-145">[Gateway di gestione dati](data-factory-data-management-gateway.md): offre una panoramica dettagliata del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-145">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span></span>
- <span data-ttu-id="ab778-146">[Spostare dati tra archivi dati locali e cloud](data-factory-move-data-between-onprem-and-cloud.md): contiene una procedura dettagliata con le istruzioni per usare un gateway a nodo singolo.</span><span class="sxs-lookup"><span data-stu-id="ab778-146">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span>  

> [!NOTE]
> <span data-ttu-id="ab778-147">Prima di installare un gateway di gestione dati in un computer Windows locale, vedere i prerequisiti elencati nell'[articolo principale](data-factory-data-management-gateway.md#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="ab778-147">Before you install a data management gateway on an on-premises Windows machine, see prerequisites listed in [the main article](data-factory-data-management-gateway.md#prerequisites).</span></span>

1. <span data-ttu-id="ab778-148">Nella [procedura dettagliata](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), durante la creazione di un gateway logico, abilitare la funzionalità **Disponibilità elevata e scalabilità**.</span><span class="sxs-lookup"><span data-stu-id="ab778-148">In the [walkthrough](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), while creating a logical gateway, enable the **High Availability & Scalability** feature.</span></span> 

    ![Gateway di gestione dati: abilitare disponibilità elevata e scalabilità](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-enable-high-availability-scalability.png)
2. <span data-ttu-id="ab778-150">Nella pagina **Configura** usare il collegamento **Installazione rapida** o **Installazione manuale** per installare un gateway nel primo nodo (un computer Windows locale).</span><span class="sxs-lookup"><span data-stu-id="ab778-150">In the **Configure** page, use either **Express Setup** or **Manual Setup** link to install a gateway on the first node (an on-premises Windows machine).</span></span>

    ![Gateway di gestione dati: installazione rapida o manuale](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-express-manual-setup.png)

    > [!NOTE]
    > <span data-ttu-id="ab778-152">Se si usa l'opzione Installazione rapida, la comunicazione tra nodi viene eseguita senza crittografia.</span><span class="sxs-lookup"><span data-stu-id="ab778-152">If you use the express setup option, the node-to-node communication is done without encryption.</span></span> <span data-ttu-id="ab778-153">Il nome del nodo è uguale al nome del computer.</span><span class="sxs-lookup"><span data-stu-id="ab778-153">The node name is same as the machine name.</span></span> <span data-ttu-id="ab778-154">Usare l'installazione manuale se la comunicazione tra nodi deve essere crittografata o per specificare un nome di nodo di propria scelta.</span><span class="sxs-lookup"><span data-stu-id="ab778-154">Use manual setup if the node-node communication needs to be encrypted or you want to specify a node name of your choice.</span></span> <span data-ttu-id="ab778-155">I nomi di nodo non possono essere modificati in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="ab778-155">Node names cannot be edited later.</span></span>
3. <span data-ttu-id="ab778-156">Se si sceglie **Installazione rapida**</span><span class="sxs-lookup"><span data-stu-id="ab778-156">If you choose **express setup**</span></span>
    1. <span data-ttu-id="ab778-157">Al termine dell'installazione del gateway, viene visualizzato il messaggio seguente:</span><span class="sxs-lookup"><span data-stu-id="ab778-157">You see the following message after the gateway is successfully installed:</span></span>

        ![Gateway di gestione dati: installazione rapida completata](media/data-factory-data-management-gateway-high-availability-scalability/express-setup-success.png)
    2. <span data-ttu-id="ab778-159">Avviare Gestione configurazione di Gateway di gestione dati per il gateway seguendo [queste istruzioni](data-factory-data-management-gateway.md#configuration-manager).</span><span class="sxs-lookup"><span data-stu-id="ab778-159">Launch Data Management Configuration Manager for the gateway by following [these instructions](data-factory-data-management-gateway.md#configuration-manager).</span></span> <span data-ttu-id="ab778-160">Vengono visualizzati il nome del gateway, il nome del nodo, lo stato e così via.</span><span class="sxs-lookup"><span data-stu-id="ab778-160">You see the gateway name, node name, status, etc.</span></span>

        ![Gateway di gestione dati: installazione completata](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)
4. <span data-ttu-id="ab778-162">Se si sceglie **Installazione manuale**:</span><span class="sxs-lookup"><span data-stu-id="ab778-162">If you choose **manual setup**:</span></span>
    1. <span data-ttu-id="ab778-163">Scaricare il pacchetto di installazione dall'Area download Microsoft ed eseguirlo per installare il gateway nel computer.</span><span class="sxs-lookup"><span data-stu-id="ab778-163">Download the installation package from the Microsoft Download Center, run it to install gateway on your machine.</span></span>
    2. <span data-ttu-id="ab778-164">Usare la **chiave di autenticazione** dalla pagina **Configura** per registrare il gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-164">Use the **authentication key** from the **Configure** page to register the gateway.</span></span>
    
        ![Gateway di gestione dati: installazione completata](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-authentication-key.png)
    3. <span data-ttu-id="ab778-166">Nella pagina **Nuovo nodo del gateway** è possibile specificare un **nome** personalizzato per il nodo del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-166">In the **New gateway node** page, you can provide a custom **name** to the gateway node.</span></span> <span data-ttu-id="ab778-167">Per impostazione predefinita, il nome del nodo è uguale al nome del computer.</span><span class="sxs-lookup"><span data-stu-id="ab778-167">By default, node name is same as the machine name.</span></span>    

        ![Gateway di gestione dati: specificare un nome](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-name.png)
    4. <span data-ttu-id="ab778-169">Nella pagina successiva è possibile scegliere se **abilitare la crittografia per la comunicazione tra nodi**.</span><span class="sxs-lookup"><span data-stu-id="ab778-169">In the next page, you can choose whether to **enable encryption for node-to-node communication**.</span></span> <span data-ttu-id="ab778-170">Fare clic su **Ignora** per disabilitare la crittografia (impostazione predefinita).</span><span class="sxs-lookup"><span data-stu-id="ab778-170">Click **Skip** to disable encryption (default).</span></span>

        ![Gateway di gestione dati: abilitare la crittografia](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-node-encryption.png)  
    
        > [!NOTE]
        > <span data-ttu-id="ab778-172">La modifica della modalità di crittografia è supportata solo quando si ha un nodo del gateway singolo nel gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-172">Changing of encryption mode is only supported when you have a single gateway node in the logical gateway.</span></span> <span data-ttu-id="ab778-173">Per modificare la modalità di crittografia, quando un gateway ha più nodi, seguire questa procedura: eliminare tutti i nodi tranne uno, modificare la modalità di crittografia e quindi aggiungere di nuovo i nodi.</span><span class="sxs-lookup"><span data-stu-id="ab778-173">To change the encryption mode when a gateway has multiple nodes, do the following steps: delete all the nodes except one node, change the encryption mode, and then add the nodes again.</span></span>
        > 
        > <span data-ttu-id="ab778-174">Per un elenco dei requisiti per l'uso di un certificato TLS/SSL, vedere la sezione [Requisiti dei certificati TLS/SSL](#tlsssl-certificate-requirements).</span><span class="sxs-lookup"><span data-stu-id="ab778-174">See [TLS/SSL certificate requirements](#tlsssl-certificate-requirements) section for a list of requirements for using an TLS/SSL certificate.</span></span> 
    5. <span data-ttu-id="ab778-175">Al termine dell'installazione del gateway, fare clic su Avvia Configuration Manager:</span><span class="sxs-lookup"><span data-stu-id="ab778-175">After the gateway is successfully installed, click Launch Configuration Manager:</span></span>
    
        ![Installazione manuale: avviare Gestione configurazione](media/data-factory-data-management-gateway-high-availability-scalability/manual-setup-launch-configuration-manager.png)   
    6. <span data-ttu-id="ab778-177">Nel nodo viene visualizzato Gestione configurazione di Gateway di gestione dati (computer Windows locale), che indica lo stato della connettività, il **nome del gateway** e il **nome del nodo**.</span><span class="sxs-lookup"><span data-stu-id="ab778-177">you see Data Management Gateway Configuration Manager on the node (on-premises Windows machine), which shows connectivity status, **gateway name**, and **node name**.</span></span>  

        ![Gateway di gestione dati: installazione completata](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)

        > [!NOTE]
        > <span data-ttu-id="ab778-179">Se si sta effettuando il provisioning del gateway in una VM di Azure, è possibile usare [questo modello di Azure Resource Manager in GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span><span class="sxs-lookup"><span data-stu-id="ab778-179">If you are provisioning the gateway on an Azure VM, you can use [this Azure Resource Manager template on GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span></span> <span data-ttu-id="ab778-180">Questo script crea un gateway di rete logico, configura le VM con il software di Gateway di gestione dati installato e le registra con il gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-180">This script creates a logical gateway, sets up VMs with Data Management Gateway software installed, and registers them with the logical gateway.</span></span> 
6. <span data-ttu-id="ab778-181">Nel portale di Azure avviare la pagina **Gateway**:</span><span class="sxs-lookup"><span data-stu-id="ab778-181">In Azure portal, launch the **Gateway** page:</span></span> 
    1. <span data-ttu-id="ab778-182">Nella home page della data factory nel portale fare clic su **Servizi collegati**.</span><span class="sxs-lookup"><span data-stu-id="ab778-182">On the data factory home page in the portal, click **Linked Services**.</span></span>
    
        ![Home page di Data factory](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-home-page.png)
    2. <span data-ttu-id="ab778-184">Selezionare il **gateway** per visualizzare la pagina **Gateway**:</span><span class="sxs-lookup"><span data-stu-id="ab778-184">select the **gateway** to see the **Gateway** page:</span></span>
    
        ![Home page di Data factory](media/data-factory-data-management-gateway-high-availability-scalability/linked-services-gateway.png)
    4. <span data-ttu-id="ab778-186">Viene visualizzata la pagina **Gateway**:</span><span class="sxs-lookup"><span data-stu-id="ab778-186">You see the **Gateway** page:</span></span>   

        ![Visualizzazione del gateway con un nodo singolo](media/data-factory-data-management-gateway-high-availability-scalability/gateway-first-node-portal-view.png) 
7. <span data-ttu-id="ab778-188">Fare clic su **Aggiungi nodo** sulla barra degli strumenti per aggiungere un nodo al gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-188">Click **Add Node** on the toolbar to add a node to the logical gateway.</span></span> <span data-ttu-id="ab778-189">Se si prevede di usare l'installazione rapida, eseguire questo passaggio dal computer locale che verrà aggiunto come nodo al gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-189">If you are planning to use express setup, do this step from the on-premises machine that will be added as a node to the gateway.</span></span> 

    ![Gateway di gestione dati: menu Aggiungi nodo](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)
8. <span data-ttu-id="ab778-191">La procedura è simile alla configurazione del primo nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-191">Steps are similar to setting up the first node.</span></span> <span data-ttu-id="ab778-192">L'interfaccia utente di Gestione configurazione consente di impostare il nome del nodo se si sceglie l'opzione di installazione manuale:</span><span class="sxs-lookup"><span data-stu-id="ab778-192">The Configuration Manager UI lets you set the node name if you choose the manual installation option:</span></span> 

    ![Gestione configurazione: installare il secondo gateway](media/data-factory-data-management-gateway-high-availability-scalability/install-second-gateway.png)
9. <span data-ttu-id="ab778-194">Al termine dell'installazione del gateway nel nodo, lo strumento Gestione configurazione visualizza la schermata seguente:</span><span class="sxs-lookup"><span data-stu-id="ab778-194">After the gateway is installed successfully on the node, the Configuration Manager tool displays the following screen:</span></span>  

    ![Gestione configurazione: installare il secondo gateway](media/data-factory-data-management-gateway-high-availability-scalability/second-gateway-installation-successful.png)
10. <span data-ttu-id="ab778-196">Se si apre la pagina **Gateway** nel portale, ora vengono visualizzati i due nodi del gateway:</span><span class="sxs-lookup"><span data-stu-id="ab778-196">If you open the **Gateway** page in the portal, you see two gateway nodes now:</span></span> 

    ![Gateway con due nodi nel portale](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)
11. <span data-ttu-id="ab778-198">Per eliminare un nodo del gateway, fare clic su **Elimina nodo** sulla barra degli strumenti, selezionare il nodo che si vuole eliminare e quindi fare clic su **Elimina** sulla barra degli strumenti.</span><span class="sxs-lookup"><span data-stu-id="ab778-198">To delete a gateway node, click **Delete Node** on the toolbar, select the node you want to delete, and then click **Delete** from the toolbar.</span></span> <span data-ttu-id="ab778-199">Questa azione elimina il nodo selezionato dal gruppo.</span><span class="sxs-lookup"><span data-stu-id="ab778-199">This action deletes the selected node from the group.</span></span> <span data-ttu-id="ab778-200">Si noti che questa azione non disinstalla il software del gateway di gestione dati dal nodo (computer Windows locale).</span><span class="sxs-lookup"><span data-stu-id="ab778-200">Note that this action does not uninstall the data management gateway software from the node (on-premises Windows machine).</span></span> <span data-ttu-id="ab778-201">Usare **Installazione applicazioni** nel Pannello di controllo nel computer locale per disinstallare il gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-201">Use **Add or remove programs** in Control Panel on the on-premises to uninstall the gateway.</span></span> <span data-ttu-id="ab778-202">Quando il nodo viene disinstallato dal gateway, viene automaticamente eliminato nel portale.</span><span class="sxs-lookup"><span data-stu-id="ab778-202">When you uninstall gateway from the node, it's automatically deleted in the portal.</span></span>   

## <a name="upgrade-an-existing-gateway"></a><span data-ttu-id="ab778-203">Aggiornare un gateway esistente</span><span class="sxs-lookup"><span data-stu-id="ab778-203">Upgrade an existing gateway</span></span>
<span data-ttu-id="ab778-204">È possibile aggiornare un gateway esistente per usare la funzionalità di disponibilità elevata e scalabilità.</span><span class="sxs-lookup"><span data-stu-id="ab778-204">You can upgrade an existing gateway to use the high availability and scalability feature.</span></span> <span data-ttu-id="ab778-205">Questa funzionalità può essere usata solo con i nodi che eseguono Gateway di gestione dati versione >= 2.12.xxxx.</span><span class="sxs-lookup"><span data-stu-id="ab778-205">This feature works only with nodes that have the data management gateway of version >= 2.12.xxxx.</span></span> <span data-ttu-id="ab778-206">È possibile visualizzare la versione del gateway di gestione dati installato in un computer nella scheda **Guida** di Gestione configurazione di Gateway di gestione dati.</span><span class="sxs-lookup"><span data-stu-id="ab778-206">You can see the version of data management gateway installed on a machine in the **Help** tab of the Data Management Gateway Configuration Manager.</span></span> 

1. <span data-ttu-id="ab778-207">Aggiornare il gateway nel computer locale alla versione più recente scaricando ed eseguendo un pacchetto di installazione MSI dall'[Area download Microsoft](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="ab778-207">Update the gateway on the on-premises machine to the latest version by following by downloading and running an MSI setup package from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span> <span data-ttu-id="ab778-208">Vedere la sezione [Installazione](data-factory-data-management-gateway.md#installation) per i dettagli.</span><span class="sxs-lookup"><span data-stu-id="ab778-208">See [installation](data-factory-data-management-gateway.md#installation) section for details.</span></span>  
2. <span data-ttu-id="ab778-209">Passare al portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ab778-209">Navigate to the Azure portal.</span></span> <span data-ttu-id="ab778-210">Avviare la **pagina Data Factory** per la data factory.</span><span class="sxs-lookup"><span data-stu-id="ab778-210">Launch the **Data Factory page** for your data factory.</span></span> <span data-ttu-id="ab778-211">Fare clic sul riquadro Servizi collegati per avviare la **pagina Servizi collegati**.</span><span class="sxs-lookup"><span data-stu-id="ab778-211">Click Linked services tile to launch the **linked services page**.</span></span> <span data-ttu-id="ab778-212">Selezionare il gateway per avviare la **pagina del gateway**.</span><span class="sxs-lookup"><span data-stu-id="ab778-212">Select the gateway to launch the **gateway page**.</span></span> <span data-ttu-id="ab778-213">Facendo clic abilitare **Anteprima funzionalità**, come mostrato nell'immagine seguente:</span><span class="sxs-lookup"><span data-stu-id="ab778-213">Click and enable **Preview Feature** as shown in the following image:</span></span> 

    ![Gateway di gestione dati: abilitare l'anteprima funzionalità](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-existing-gateway-enable-high-availability.png)   
2. <span data-ttu-id="ab778-215">Dopo avere abilitato l'anteprima funzionalità nel portale, chiudere tutte le pagine.</span><span class="sxs-lookup"><span data-stu-id="ab778-215">Once the preview feature is enabled in the portal, close all pages.</span></span> <span data-ttu-id="ab778-216">Riaprire la **pagina del gateway** per visualizzare la nuova interfaccia utente di anteprima.</span><span class="sxs-lookup"><span data-stu-id="ab778-216">Reopen the **gateway page** to see the new preview user interface (UI).</span></span>
 
    ![Gateway di gestione dati: abilitazione dell'anteprima funzionalità riuscita](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview-success.png)

    ![Gateway di gestione dati: interfaccia utente di anteprima](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview.png)

    > [!NOTE]
    > <span data-ttu-id="ab778-219">Durante l'aggiornamento, il nome del primo nodo è il nome del computer.</span><span class="sxs-lookup"><span data-stu-id="ab778-219">During the upgrade, name of the first node is the name of the machine.</span></span> 
3. <span data-ttu-id="ab778-220">Aggiungere ora un nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-220">Now, add a node.</span></span> <span data-ttu-id="ab778-221">Nella pagina **Gateway** fare clic su **Aggiungi nodo**.</span><span class="sxs-lookup"><span data-stu-id="ab778-221">In the **Gateway** page, click **Add Node**.</span></span>  

    ![Gateway di gestione dati: menu Aggiungi nodo](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)

    <span data-ttu-id="ab778-223">Seguire le istruzioni della sezione precedente per configurare il nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-223">Follow instructions from the previous section to set up the node.</span></span> 

### <a name="installation-best-practices"></a><span data-ttu-id="ab778-224">Procedure consigliate per l'installazione</span><span class="sxs-lookup"><span data-stu-id="ab778-224">Installation best practices</span></span>

- <span data-ttu-id="ab778-225">Configurare la combinazione per il risparmio di energia nel computer host del gateway in modo che il computer non entri in stato di ibernazione.</span><span class="sxs-lookup"><span data-stu-id="ab778-225">Configure power plan on the host machine for the gateway so that the machine does not hibernate.</span></span> <span data-ttu-id="ab778-226">Se il computer host entra in stato di ibernazione, il gateway non risponde alle richieste di dati.</span><span class="sxs-lookup"><span data-stu-id="ab778-226">If the host machine hibernates, the gateway does not respond to data requests.</span></span>
- <span data-ttu-id="ab778-227">Eseguire il backup del certificato associato al gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-227">Back up the certificate associated with the gateway.</span></span>
- <span data-ttu-id="ab778-228">Per prestazioni ottimali, assicurarsi che tutti i nodi abbiano un configurazione simile (consigliato).</span><span class="sxs-lookup"><span data-stu-id="ab778-228">Ensure all nodes are of similar configuration (recommended) for ideal performance.</span></span> 
- <span data-ttu-id="ab778-229">Aggiungere almeno due nodi per assicurare la disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="ab778-229">Add at least two nodes to ensure high availability.</span></span>  

### <a name="tlsssl-certificate-requirements"></a><span data-ttu-id="ab778-230">Requisiti del certificato TLS/SSL</span><span class="sxs-lookup"><span data-stu-id="ab778-230">TLS/SSL certificate requirements</span></span>
<span data-ttu-id="ab778-231">Ecco i requisiti per il certificato TLS/SSL usato per proteggere le comunicazioni tra i nodi del gateway:</span><span class="sxs-lookup"><span data-stu-id="ab778-231">Here are the requirements for the TLS/SSL certificate that is used for securing communications between gateway nodes:</span></span>

- <span data-ttu-id="ab778-232">Deve essere un certificato X509 v3 pubblicamente attendibile.</span><span class="sxs-lookup"><span data-stu-id="ab778-232">The certificate must be a publicly trusted X509 v3 certificate.</span></span>
- <span data-ttu-id="ab778-233">Tutti i nodi del gateway devono considerare attendibile questo certificato.</span><span class="sxs-lookup"><span data-stu-id="ab778-233">All gateway nodes must trust this certificate.</span></span> 
- <span data-ttu-id="ab778-234">È consigliabile usare certificati rilasciati da un'autorità di certificazione (CA) pubblica (terza parte).</span><span class="sxs-lookup"><span data-stu-id="ab778-234">We recommend that you use certificates that are issued by a public (third-party) certification authority (CA).</span></span>
- <span data-ttu-id="ab778-235">Deve supportare tutte le dimensioni chiave supportate da Windows Server 2012 R2 per i certificati SSL.</span><span class="sxs-lookup"><span data-stu-id="ab778-235">Supports any key size supported by Windows Server 2012 R2 for SSL certificates.</span></span>
- <span data-ttu-id="ab778-236">Non deve supportare certificati che usano chiavi CNG.</span><span class="sxs-lookup"><span data-stu-id="ab778-236">Does not support certificates that use CNG keys.</span></span>
- <span data-ttu-id="ab778-237">I certificati con caratteri jolly sono supportati.</span><span class="sxs-lookup"><span data-stu-id="ab778-237">Wild-card certificates are supported.</span></span> 


## <a name="monitor-a-multi-node-gateway"></a><span data-ttu-id="ab778-238">Monitorare un gateway multinodo</span><span class="sxs-lookup"><span data-stu-id="ab778-238">Monitor a multi-node gateway</span></span>
### <a name="multi-node-gateway-monitoring"></a><span data-ttu-id="ab778-239">Monitoraggio di un gateway multinodo</span><span class="sxs-lookup"><span data-stu-id="ab778-239">Multi-node gateway monitoring</span></span>
<span data-ttu-id="ab778-240">Nel portale di Azure è possibile visualizzare lo snapshot in tempo quasi reale dell'utilizzo delle risorse, ad esempio CPU, memoria, rete (ingresso/uscita) e così via, in ogni nodo con gli stati dei nodi del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-240">In the Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on each node along with statuses of gateway nodes.</span></span> 

![Gateway di gestione dati: monitoraggio di più nodi](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)

<span data-ttu-id="ab778-242">È possibile abilitare **Impostazioni avanzate** nella pagina **Gateway** per visualizzare le metriche avanzate, ad esempio **Rete (in/out)**, **Ruolo e Stato delle credenziali**, utile nel debug dei problemi del gateway, e **Processi simultanei (in esecuzione/limite)** che può essere modificata/cambiata in base alle esigenze durante l'ottimizzazione delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ab778-242">You can enable **Advanced Settings** in the **Gateway** page to see advanced metrics like **Network**(in/out), **Role & Credential Status**, which is helpful in debugging gateway issues, and **Concurrent Jobs** (Running/ Limit) which can be modified/ changed accordingly during performance tuning.</span></span> <span data-ttu-id="ab778-243">La tabella seguente contiene le descrizioni delle colonne dell'elenco **Nodi del gateway**:</span><span class="sxs-lookup"><span data-stu-id="ab778-243">The following table provides descriptions of columns in the **Gateway Nodes** list:</span></span>  

<span data-ttu-id="ab778-244">Proprietà monitoraggio</span><span class="sxs-lookup"><span data-stu-id="ab778-244">Monitoring Property</span></span> | <span data-ttu-id="ab778-245">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ab778-245">Description</span></span>
:------------------ | :---------- 
<span data-ttu-id="ab778-246">Nome</span><span class="sxs-lookup"><span data-stu-id="ab778-246">Name</span></span> | <span data-ttu-id="ab778-247">Nome del gateway logico e nodi associati al gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-247">Name of the logical gateway and nodes associated with the gateway.</span></span>  
<span data-ttu-id="ab778-248">Status</span><span class="sxs-lookup"><span data-stu-id="ab778-248">Status</span></span> | <span data-ttu-id="ab778-249">Stato del gateway logico e dei nodi del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-249">Status of the logical gateway and the gateway nodes.</span></span> <span data-ttu-id="ab778-250">Esempio: Online/Offline/Limitato e così via. Per informazioni su questi stati, vedere la sezione [Stato del gateway](#gateway-status).</span><span class="sxs-lookup"><span data-stu-id="ab778-250">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span></span> 
<span data-ttu-id="ab778-251">Versione</span><span class="sxs-lookup"><span data-stu-id="ab778-251">Version</span></span> | <span data-ttu-id="ab778-252">Indica la versione del gateway logico e di ogni nodo del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-252">Shows the version of the logical gateway and each gateway node.</span></span> <span data-ttu-id="ab778-253">La versione del gateway logico viene determinata in base alla versione della maggior parte dei nodi del gruppo.</span><span class="sxs-lookup"><span data-stu-id="ab778-253">The version of the logical gateway is determined based on version of majority of nodes in the group.</span></span> <span data-ttu-id="ab778-254">Se nella configurazione del gateway logico sono presenti nodi con versioni diverse, solo i nodi con lo stesso numero di versione del gateway logico funzionano correttamente.</span><span class="sxs-lookup"><span data-stu-id="ab778-254">If there are nodes with different versions in the logical gateway setup, only the nodes with the same version number as the logical gateway function properly.</span></span> <span data-ttu-id="ab778-255">Gli altri sono in modalità limitata e devono essere aggiornati manualmente (solo se l'aggiornamento automatico non riesce).</span><span class="sxs-lookup"><span data-stu-id="ab778-255">Others are in the limited mode and need to be manually updated (only in case auto-update fails).</span></span> 
<span data-ttu-id="ab778-256">Memoria disponibile</span><span class="sxs-lookup"><span data-stu-id="ab778-256">Available memory</span></span> | <span data-ttu-id="ab778-257">Memoria disponibile in un nodo del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-257">Available memory on a gateway node.</span></span> <span data-ttu-id="ab778-258">Questo valore è uno snapshot in tempo quasi reale.</span><span class="sxs-lookup"><span data-stu-id="ab778-258">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="ab778-259">Uso della CPU</span><span class="sxs-lookup"><span data-stu-id="ab778-259">CPU utilization</span></span> | <span data-ttu-id="ab778-260">Utilizzo della CPU di un nodo del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-260">CPU utilization of a gateway node.</span></span> <span data-ttu-id="ab778-261">Questo valore è uno snapshot in tempo quasi reale.</span><span class="sxs-lookup"><span data-stu-id="ab778-261">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="ab778-262">Rete (in/out)</span><span class="sxs-lookup"><span data-stu-id="ab778-262">Networking (In/Out)</span></span> | <span data-ttu-id="ab778-263">Utilizzo della rete da parte di un nodo del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-263">Network utilization of a gateway node.</span></span> <span data-ttu-id="ab778-264">Questo valore è uno snapshot in tempo quasi reale.</span><span class="sxs-lookup"><span data-stu-id="ab778-264">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="ab778-265">Processi simultanei (in esecuzione/limite)</span><span class="sxs-lookup"><span data-stu-id="ab778-265">Concurrent Jobs (Running/ Limit)</span></span> | <span data-ttu-id="ab778-266">Numero di processi o di attività in esecuzione in ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-266">Number of jobs or tasks running on each node.</span></span> <span data-ttu-id="ab778-267">Questo valore è uno snapshot in tempo quasi reale.</span><span class="sxs-lookup"><span data-stu-id="ab778-267">This value is a near real-time snapshot.</span></span> <span data-ttu-id="ab778-268">Per limite si intende il numero massimo di processi simultanei per ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-268">Limit signifies the maximum concurrent jobs for each node.</span></span> <span data-ttu-id="ab778-269">Questo valore viene definito in base alle dimensioni del computer.</span><span class="sxs-lookup"><span data-stu-id="ab778-269">This value is defined based on the machine size.</span></span> <span data-ttu-id="ab778-270">È possibile accrescere il limite per aumentare le prestazioni dell'esecuzione dei processi simultanei negli scenari avanzati, in cui CPU/memoria/rete sono sottoutilizzate, ma è in corso il timeout delle attività. Questa capacità è disponibile anche con un gateway a nodo singolo, anche quando la funzionalità di scalabilità e disponibilità non è abilitata.</span><span class="sxs-lookup"><span data-stu-id="ab778-270">You can increase the limit to scale up concurrent job execution in advanced scenarios, where CPU/ memory/ network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when the scalability and availability feature is not enabled).</span></span> <span data-ttu-id="ab778-271">Per altre informazioni, vedere la sezione [Considerazioni sulla scalabilità](#scale-considerations).</span><span class="sxs-lookup"><span data-stu-id="ab778-271">For more information, see [scale considerations](#scale-considerations) section.</span></span> 
<span data-ttu-id="ab778-272">Ruolo</span><span class="sxs-lookup"><span data-stu-id="ab778-272">Role</span></span> | <span data-ttu-id="ab778-273">Esistono due tipi di ruoli: dispatcher e ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ab778-273">There are two types of roles – Dispatcher and worker.</span></span> <span data-ttu-id="ab778-274">Tutti i nodi sono ruoli di lavoro e quindi possono essere tutti usati per eseguire i processi.</span><span class="sxs-lookup"><span data-stu-id="ab778-274">All nodes are workers, which means they can all be used to execute jobs.</span></span> <span data-ttu-id="ab778-275">Esiste un solo nodo dispatcher, che viene usato per eseguire il pull di attività/processi dai servizi cloud e inviarli a nodi ruolo di lavoro diversi (incluso lo stesso nodo dispatcher).</span><span class="sxs-lookup"><span data-stu-id="ab778-275">There is only one dispatcher node, which is used to pull tasks/jobs from cloud services and dispatch them to different worker nodes (including itself).</span></span> 

![Gateway di gestione dati: monitoraggio avanzato di più nodi](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-advanced.png)

### <a name="gateway-status"></a><span data-ttu-id="ab778-277">Stato del gateway</span><span class="sxs-lookup"><span data-stu-id="ab778-277">Gateway status</span></span>

<span data-ttu-id="ab778-278">La tabella seguente indica i possibili stati di un **nodo del gateway**:</span><span class="sxs-lookup"><span data-stu-id="ab778-278">The following table provides possible statuses of a **gateway node**:</span></span> 

<span data-ttu-id="ab778-279">Status</span><span class="sxs-lookup"><span data-stu-id="ab778-279">Status</span></span>  | <span data-ttu-id="ab778-280">Commenti/Scenari</span><span class="sxs-lookup"><span data-stu-id="ab778-280">Comments/Scenarios</span></span>
:------- | :------------------
<span data-ttu-id="ab778-281">Online</span><span class="sxs-lookup"><span data-stu-id="ab778-281">Online</span></span> | <span data-ttu-id="ab778-282">Nodo connesso al servizio Data Factory.</span><span class="sxs-lookup"><span data-stu-id="ab778-282">Node connected to Data Factory service.</span></span>
<span data-ttu-id="ab778-283">Offline</span><span class="sxs-lookup"><span data-stu-id="ab778-283">Offline</span></span> | <span data-ttu-id="ab778-284">Il nodo è offline.</span><span class="sxs-lookup"><span data-stu-id="ab778-284">Node is offline.</span></span>
<span data-ttu-id="ab778-285">Aggiornamento</span><span class="sxs-lookup"><span data-stu-id="ab778-285">Upgrading</span></span> | <span data-ttu-id="ab778-286">È in corso l'aggiornamento automatico del nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-286">The node is being auto-updated.</span></span>
<span data-ttu-id="ab778-287">Limitato</span><span class="sxs-lookup"><span data-stu-id="ab778-287">Limited</span></span> | <span data-ttu-id="ab778-288">La causa è un problema di connettività,</span><span class="sxs-lookup"><span data-stu-id="ab778-288">Due to Connectivity issue.</span></span> <span data-ttu-id="ab778-289">ad esempio un problema della porta HTTP 8050, di connettività del bus di servizio o di sincronizzazione delle credenziali.</span><span class="sxs-lookup"><span data-stu-id="ab778-289">May be due to HTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span></span> 
<span data-ttu-id="ab778-290">Inactive</span><span class="sxs-lookup"><span data-stu-id="ab778-290">Inactive</span></span> | <span data-ttu-id="ab778-291">Il nodo è in una configurazione diversa da quella della maggior parte degli altri nodi.</span><span class="sxs-lookup"><span data-stu-id="ab778-291">Node is in a configuration different from the configuration of other majority nodes.</span></span><br/><br/> <span data-ttu-id="ab778-292">Un nodo può essere inattivo quando non riesce a connettersi agli altri nodi.</span><span class="sxs-lookup"><span data-stu-id="ab778-292">A node can be inactive when it cannot connect to other nodes.</span></span> 


<span data-ttu-id="ab778-293">La tabella seguente indica i possibili stati di un **gateway logico**.</span><span class="sxs-lookup"><span data-stu-id="ab778-293">The following table provides possible statuses of a **logical gateway**.</span></span> <span data-ttu-id="ab778-294">Lo stato del gateway dipende dagli stati dei nodi del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-294">The gateway status depends on statuses of the gateway nodes.</span></span> 

<span data-ttu-id="ab778-295">Status</span><span class="sxs-lookup"><span data-stu-id="ab778-295">Status</span></span> | <span data-ttu-id="ab778-296">Commenti</span><span class="sxs-lookup"><span data-stu-id="ab778-296">Comments</span></span>
:----- | :-------
<span data-ttu-id="ab778-297">Needs Registration (Registrazione necessaria)</span><span class="sxs-lookup"><span data-stu-id="ab778-297">Needs Registration</span></span> | <span data-ttu-id="ab778-298">Nessun nodo è ancora registrato per questo gateway logico</span><span class="sxs-lookup"><span data-stu-id="ab778-298">No node is yet registered to this logical gateway</span></span>
<span data-ttu-id="ab778-299">Online</span><span class="sxs-lookup"><span data-stu-id="ab778-299">Online</span></span> | <span data-ttu-id="ab778-300">I nodi del gateway sono online</span><span class="sxs-lookup"><span data-stu-id="ab778-300">Gateway Nodes are online</span></span>
<span data-ttu-id="ab778-301">Offline</span><span class="sxs-lookup"><span data-stu-id="ab778-301">Offline</span></span> | <span data-ttu-id="ab778-302">Nessun nodo nello stato online.</span><span class="sxs-lookup"><span data-stu-id="ab778-302">No node in online status.</span></span>
<span data-ttu-id="ab778-303">Limitato</span><span class="sxs-lookup"><span data-stu-id="ab778-303">Limited</span></span> | <span data-ttu-id="ab778-304">Non tutti i nodi in questo gateway sono in uno stato integro.</span><span class="sxs-lookup"><span data-stu-id="ab778-304">Not all nodes in this gateway are in healthy state.</span></span> <span data-ttu-id="ab778-305">Questo stato è un avviso indicante che qualche nodo potrebbe essere inattivo.</span><span class="sxs-lookup"><span data-stu-id="ab778-305">This status is a warning that some node might be down!</span></span> <br/><br/><span data-ttu-id="ab778-306">La causa potrebbe essere un problema di sincronizzazione delle credenziali nel nodo dispatcher/ruolo di lavoro.</span><span class="sxs-lookup"><span data-stu-id="ab778-306">Could be due to credential sync issue on dispatcher/worker node.</span></span> 

### <a name="pipeline-activities-monitoring"></a><span data-ttu-id="ab778-307">Monitoraggio di pipeline/attività</span><span class="sxs-lookup"><span data-stu-id="ab778-307">Pipeline/ activities monitoring</span></span>
<span data-ttu-id="ab778-308">Il portale di Azure offre un'esperienza di monitoraggio della pipeline con dettagli granulari a livello di nodo,</span><span class="sxs-lookup"><span data-stu-id="ab778-308">The Azure portal provides a pipeline monitoring experience with granular node level details.</span></span> <span data-ttu-id="ab778-309">ad esempio mostra le attività eseguite in ogni nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-309">For example, it shows which activities ran on which node.</span></span> <span data-ttu-id="ab778-310">Queste informazioni possono essere utili per conoscere i problemi di prestazioni in un particolare nodo, ad esempio a causa della limitazione della larghezza di banda.</span><span class="sxs-lookup"><span data-stu-id="ab778-310">This information can be helpful in understanding performance issues on a particular node, say due to network throttling.</span></span> 

![Gateway di gestione dati: monitoraggio di più nodi per le pipeline](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-pipelines.png)

![Gateway di gestione dati: dettagli della pipeline](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-pipeline-details.png)

## <a name="scale-considerations"></a><span data-ttu-id="ab778-313">Considerazioni sulla scalabilità</span><span class="sxs-lookup"><span data-stu-id="ab778-313">Scale considerations</span></span>

### <a name="scale-out"></a><span data-ttu-id="ab778-314">Scalabilità orizzontale</span><span class="sxs-lookup"><span data-stu-id="ab778-314">Scale out</span></span>
<span data-ttu-id="ab778-315">Quando la **memoria disponibile non è sufficiente** e l'**utilizzo della CPU è elevato**, l'aggiunta di un nuovo nodo consente di aumentare il carico nei computer.</span><span class="sxs-lookup"><span data-stu-id="ab778-315">When the **available memory is low** and the **CPU usage is high**, adding a new node helps scale out the load across machines.</span></span> <span data-ttu-id="ab778-316">Se le attività hanno esito negativo perché si verifica un timeout o il nodo del gateway è offline, è utile aggiungere un nodo al gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-316">If activities are failing due to time-out or gateway node being offline, it helps if you add a node to the gateway.</span></span>
 
### <a name="scale-up"></a><span data-ttu-id="ab778-317">Aumentare le prestazioni</span><span class="sxs-lookup"><span data-stu-id="ab778-317">Scale up</span></span>
<span data-ttu-id="ab778-318">Quando la memoria disponibile e la CPU non vengono utilizzate correttamente, ma la capacità inattiva è 0, è consigliabile aumentare le prestazioni accrescendo il numero di processi simultanei che possono essere eseguiti in un nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-318">When the available memory and CPU are not utilized well, but the idle capacity is 0, you should scale up by increasing the number of concurrent jobs that can run on a node.</span></span> <span data-ttu-id="ab778-319">È anche possibile aumentare le prestazioni quando si verificano timeout delle attività perché il gateway è sovraccarico.</span><span class="sxs-lookup"><span data-stu-id="ab778-319">You may also want to scale up when activities are timing out because the gateway is overloaded.</span></span> <span data-ttu-id="ab778-320">Come illustrato nell'immagine seguente, è possibile aumentare la capacità massima di un nodo.</span><span class="sxs-lookup"><span data-stu-id="ab778-320">As shown in the following image, you can increase the maximum capacity for a node.</span></span> <span data-ttu-id="ab778-321">Per iniziare, è consigliabile raddoppiarla.</span><span class="sxs-lookup"><span data-stu-id="ab778-321">We suggest doubling it to start with.</span></span>  

![Gateway di gestione dati: considerazioni sulla scalabilità](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-scale-considerations.png)


## <a name="known-issuesbreaking-changes"></a><span data-ttu-id="ab778-323">Problemi noti/modifiche significative</span><span class="sxs-lookup"><span data-stu-id="ab778-323">Known issues/breaking changes</span></span>

- <span data-ttu-id="ab778-324">È attualmente possibile avere fino a quattro nodi fisici per ogni gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-324">Currently, you can have up to four physical gateway nodes for a single logical gateway.</span></span> <span data-ttu-id="ab778-325">Se sono necessari più di quattro nodi per motivi di prestazioni, inviare un messaggio di posta elettronica a [DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="ab778-325">If you need more than four nodes for performance reasons, send an email to [DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span></span>
- <span data-ttu-id="ab778-326">Non è possibile ripetere la registrazione di un nodo del gateway con la chiave di autenticazione da un altro gateway logico per eseguire il passaggio dal gateway logico corrente.</span><span class="sxs-lookup"><span data-stu-id="ab778-326">You cannot re-register a gateway node with the authentication key from another logical gateway to switch from the current logical gateway.</span></span> <span data-ttu-id="ab778-327">Per ripetere la registrazione, disinstallare il gateway dal nodo, reinstallare il gateway e registrarlo con la chiave di autenticazione dell'altro gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-327">To re-register, uninstall the gateway from the node, reinstall the gateway, and register it with the authentication key for the other logical gateway.</span></span> 
- <span data-ttu-id="ab778-328">Se per tutti i nodi del gateway è necessario il proxy HTTP, impostare il proxy in diahost.exe.config e diawp.exe.config e usare Server Manager per verificare che tutti i nodi abbiano gli stessi file diahost.exe.config e diawip.exe.config. Per informazioni dettagliate, vedere la sezione [Configurare le impostazioni del server proxy](data-factory-data-management-gateway.md#configure-proxy-server-settings).</span><span class="sxs-lookup"><span data-stu-id="ab778-328">If HTTP proxy is required for all your gateway nodes, set the proxy in diahost.exe.config and diawp.exe.config, and use the server manager to make sure all nodes have the same diahost.exe.config and diawip.exe.config. See [configure proxy settings](data-factory-data-management-gateway.md#configure-proxy-server-settings) section for details.</span></span> 
- <span data-ttu-id="ab778-329">Per modificare la modalità di crittografia per la comunicazione tra nodi in Gateway di gestione dati, eliminare tutti i nodi nel portale tranne uno,</span><span class="sxs-lookup"><span data-stu-id="ab778-329">To change encryption mode for node-to-node communication in Gateway Configuration Manager, delete all the nodes in the portal except one.</span></span> <span data-ttu-id="ab778-330">quindi aggiungerli di nuovo dopo avere modificato la modalità di crittografia.</span><span class="sxs-lookup"><span data-stu-id="ab778-330">Then, add nodes back after changing the encryption mode.</span></span>
- <span data-ttu-id="ab778-331">Usare un certificato SSL ufficiale se si sceglie di crittografare il canale di comunicazione tra nodi.</span><span class="sxs-lookup"><span data-stu-id="ab778-331">Use an official SSL certificate if you choose to encrypt the node-to-node communication channel.</span></span> <span data-ttu-id="ab778-332">Un certificato autofirmato può causare problemi di connettività perché lo stesso certificato potrebbe non essere considerato attendibile nell'elenco delle autorità di certificazione di altri computer.</span><span class="sxs-lookup"><span data-stu-id="ab778-332">Self-signed certificate may cause connectivity issues as the same certificate may not be trusted in certifying authority list on other machines.</span></span> 
- <span data-ttu-id="ab778-333">Non è possibile registrare un nodo del gateway in un gateway logico quando la versione del nodo è precedente alla versione del gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-333">You cannot register a gateway node to a logical gateway when the node version is lower than the logical gateway version.</span></span> <span data-ttu-id="ab778-334">Eliminare tutti i nodi del gateway logico dal portale per poter registrare un nodo con una versione precedente (effettuarne il downgrade).</span><span class="sxs-lookup"><span data-stu-id="ab778-334">Delete all nodes of the logical gateway from portal so that you can register a lower version node(downgrade) it.</span></span> <span data-ttu-id="ab778-335">Se si eliminano tutti i nodi di un gateway logico, installare manualmente e registrare i nuovi nodi per tale gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-335">If you delete all nodes of a logical gateway, manually install and register new nodes to that logical gateway.</span></span> <span data-ttu-id="ab778-336">In questo caso l'installazione rapida non è supportata.</span><span class="sxs-lookup"><span data-stu-id="ab778-336">Express setup is not supported in this case.</span></span>
- <span data-ttu-id="ab778-337">Non è possibile usare l'installazione rapida per installare i nodi in un gateway logico esistente che usa ancora le credenziali cloud.</span><span class="sxs-lookup"><span data-stu-id="ab778-337">You cannot use express setup to install nodes to an existing logical gateway, which is still using cloud credentials.</span></span> <span data-ttu-id="ab778-338">È possibile controllare se le credenziali vengono archiviate da Gestione configurazione di Gateway di gestione dati nella scheda Impostazioni.</span><span class="sxs-lookup"><span data-stu-id="ab778-338">You can check where the credentials are stored from the Gateway Configuration Manager on the Settings tab.</span></span>
- <span data-ttu-id="ab778-339">Non è possibile usare l'installazione rapida per installare i nodi in un gateway logico esistente che ha la crittografia da nodo a nodo abilitata.</span><span class="sxs-lookup"><span data-stu-id="ab778-339">You cannot use express setup to install nodes to an existing logical gateway, which has node-to-node encryption enabled.</span></span> <span data-ttu-id="ab778-340">Poiché l'impostazione della modalità di crittografia comporta l'aggiunta manuale dei certificati, l'installazione rapida non è più possibile.</span><span class="sxs-lookup"><span data-stu-id="ab778-340">As setting the encryption mode involves manually adding certificates, express install is no more an option.</span></span> 
- <span data-ttu-id="ab778-341">Per copiare i file dall'ambiente locale, non è più consigliabile usare \\localhost o C:\files perché localhost o l'unità locale potrebbe non essere accessibile tramite tutti i nodi.</span><span class="sxs-lookup"><span data-stu-id="ab778-341">For a file copy from on-premises environment, you should not use \\localhost or C:\files anymore since localhost or local drive might not be accessible via all nodes.</span></span> <span data-ttu-id="ab778-342">Usare invece \\ServerName\files per specificare il percorso dei file.</span><span class="sxs-lookup"><span data-stu-id="ab778-342">Instead, use \\ServerName\files to specify files’ location.</span></span>


## <a name="rolling-back-from-the-preview"></a><span data-ttu-id="ab778-343">Eseguire il rollback dall'anteprima</span><span class="sxs-lookup"><span data-stu-id="ab778-343">Rolling back from the preview</span></span> 
<span data-ttu-id="ab778-344">Per eseguire il rollback dall'anteprima, eliminare tutti i nodi tranne uno.</span><span class="sxs-lookup"><span data-stu-id="ab778-344">To roll back from the preview, delete all nodes but one node.</span></span> <span data-ttu-id="ab778-345">Non importa quali nodi si eliminano, ma assicurarsi di avere almeno un nodo nel gateway logico.</span><span class="sxs-lookup"><span data-stu-id="ab778-345">It doesn’t matter which nodes you delete, but ensure you have at least one node in the logical gateway.</span></span> <span data-ttu-id="ab778-346">È possibile eliminare un nodo disinstallando il gateway nel computer o usando il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ab778-346">You can delete a node either by uninstalling gateway on the machine or by using the Azure portal.</span></span> <span data-ttu-id="ab778-347">Nella pagina **Data factory** del portale di Azure fare clic su Servizi collegati per avviare la pagina **Servizi collegati**.</span><span class="sxs-lookup"><span data-stu-id="ab778-347">In the Azure portal, in the **Data Factory** page, click Linked services to launch the **Linked services** page.</span></span> <span data-ttu-id="ab778-348">Selezionare il gateway per avviare la pagina **Gateway**.</span><span class="sxs-lookup"><span data-stu-id="ab778-348">Select the gateway to launch the **Gateway** page.</span></span> <span data-ttu-id="ab778-349">Nella pagina Gateway è possibile visualizzare i nodi associati al gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-349">In the Gateway page, you can see the nodes associated with the gateway.</span></span> <span data-ttu-id="ab778-350">La pagina consente di eliminare un nodo dal gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-350">The page lets you delete a node from the gateway.</span></span>
 
<span data-ttu-id="ab778-351">Dopo l'eliminazione fare clic su **Funzionalità in anteprima** nella stessa pagina del portale di Azure e disabilitare la funzionalità di anteprima.</span><span class="sxs-lookup"><span data-stu-id="ab778-351">After deleting, click **preview features** in the same Azure portal page, and disable the preview feature.</span></span> <span data-ttu-id="ab778-352">Il gateway è stato reimpostato come gateway a un nodo con disponibilità generale.</span><span class="sxs-lookup"><span data-stu-id="ab778-352">You have reset your gateway to one node GA (general availability) gateway.</span></span>


## <a name="next-steps"></a><span data-ttu-id="ab778-353">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ab778-353">Next steps</span></span>
<span data-ttu-id="ab778-354">Vedere gli articoli seguenti:</span><span class="sxs-lookup"><span data-stu-id="ab778-354">Review the following articles:</span></span>
- <span data-ttu-id="ab778-355">[Gateway di gestione dati](data-factory-data-management-gateway.md): offre una panoramica dettagliata del gateway.</span><span class="sxs-lookup"><span data-stu-id="ab778-355">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of the gateway.</span></span>
- <span data-ttu-id="ab778-356">[Spostare dati tra archivi dati locali e cloud](data-factory-move-data-between-onprem-and-cloud.md): contiene una procedura dettagliata con le istruzioni per usare un gateway a nodo singolo.</span><span class="sxs-lookup"><span data-stu-id="ab778-356">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span> 
