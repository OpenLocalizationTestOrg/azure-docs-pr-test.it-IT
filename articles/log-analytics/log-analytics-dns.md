---
title: Soluzione DNS Analytics in Azure Log Analytics | Microsoft Docs
description: Configurare e usare la soluzione DNS Analytics in Log Analytics per raccogliere informazioni dettagliate nell'infrastruttura DNS relative a sicurezza, prestazioni e operazioni.
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: f44a40c4-820a-406e-8c40-70bd8dc67ae7
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/07/2017
ms.author: banders
ms.openlocfilehash: 0e8fc0ffb8e0d0bdf00bea46594fe050c00b6c8e
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="gather-insights-about-your-dns-infrastructure-with-the-dns-analytics-preview-solution"></a><span data-ttu-id="c3c83-103">Raccogliere informazioni dettagliate sull'infrastruttura DNS con la soluzione DNS Analytics (anteprima)</span><span class="sxs-lookup"><span data-stu-id="c3c83-103">Gather insights about your DNS infrastructure with the DNS Analytics Preview solution</span></span>

![Simbolo di Analisi DNS](./media/log-analytics-dns/dns-analytics-symbol.png)

<span data-ttu-id="c3c83-105">Questo articolo descrive come configurare e usare la soluzione Azure DNS Analytics in Azure Log Analytics per raccogliere informazioni dettagliate in DNS relative a sicurezza, prestazioni e operazioni.</span><span class="sxs-lookup"><span data-stu-id="c3c83-105">This article describes how to set up and use the Azure DNS Analytics solution in Azure Log Analytics to gather insights into DNS infrastructure on security, performance, and operations.</span></span>

<span data-ttu-id="c3c83-106">DNS Analytics consente di:</span><span class="sxs-lookup"><span data-stu-id="c3c83-106">DNS Analytics helps you to:</span></span>

- <span data-ttu-id="c3c83-107">Identificare i client che tentano di risolvere nomi di dominio dannosi.</span><span class="sxs-lookup"><span data-stu-id="c3c83-107">Identify clients that try to resolve malicious domain names.</span></span>
- <span data-ttu-id="c3c83-108">Identificare i record di risorse non aggiornati.</span><span class="sxs-lookup"><span data-stu-id="c3c83-108">Identify stale resource records.</span></span>
- <span data-ttu-id="c3c83-109">Identificare i nomi di dominio sottoposti frequentemente a query e i client DNS loquaci.</span><span class="sxs-lookup"><span data-stu-id="c3c83-109">Identify frequently queried domain names and talkative DNS clients.</span></span>
- <span data-ttu-id="c3c83-110">Visualizzare il carico di richieste nei server DNS.</span><span class="sxs-lookup"><span data-stu-id="c3c83-110">View request load on DNS servers.</span></span>
- <span data-ttu-id="c3c83-111">Visualizzare gli errori di registrazione di DNS dinamici.</span><span class="sxs-lookup"><span data-stu-id="c3c83-111">View dynamic DNS registration failures.</span></span>

<span data-ttu-id="c3c83-112">La soluzione raccoglie, analizza e mette in relazione i log di controllo e analisi DNS di Windows e altri dati correlati dei server DNS.</span><span class="sxs-lookup"><span data-stu-id="c3c83-112">The solution collects, analyzes, and correlates Windows DNS analytic and audit logs and other related data from your DNS servers.</span></span>

## <a name="connected-sources"></a><span data-ttu-id="c3c83-113">Origini connesse</span><span class="sxs-lookup"><span data-stu-id="c3c83-113">Connected sources</span></span>

<span data-ttu-id="c3c83-114">La tabella seguente descrive le origini connesse che sono supportate da questa soluzione:</span><span class="sxs-lookup"><span data-stu-id="c3c83-114">The following table describes the connected sources that are supported by this solution:</span></span>

| <span data-ttu-id="c3c83-115">**Origine connessa**</span><span class="sxs-lookup"><span data-stu-id="c3c83-115">**Connected source**</span></span> | <span data-ttu-id="c3c83-116">**Supporto**</span><span class="sxs-lookup"><span data-stu-id="c3c83-116">**Support**</span></span> | <span data-ttu-id="c3c83-117">**Descrizione**</span><span class="sxs-lookup"><span data-stu-id="c3c83-117">**Description**</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="c3c83-118">Agenti di Windows</span><span class="sxs-lookup"><span data-stu-id="c3c83-118">Windows agents</span></span>](log-analytics-windows-agents.md) | <span data-ttu-id="c3c83-119">Sì</span><span class="sxs-lookup"><span data-stu-id="c3c83-119">Yes</span></span> | <span data-ttu-id="c3c83-120">La soluzione raccoglie le informazioni DNS dagli agenti Windows.</span><span class="sxs-lookup"><span data-stu-id="c3c83-120">The solution collects DNS information from Windows agents.</span></span> |
| [<span data-ttu-id="c3c83-121">Agenti Linux</span><span class="sxs-lookup"><span data-stu-id="c3c83-121">Linux agents</span></span>](log-analytics-linux-agents.md) | <span data-ttu-id="c3c83-122">No</span><span class="sxs-lookup"><span data-stu-id="c3c83-122">No</span></span> | <span data-ttu-id="c3c83-123">La soluzione non raccoglie le informazioni DNS dagli agenti Linux diretti.</span><span class="sxs-lookup"><span data-stu-id="c3c83-123">The solution does not collect DNS information from direct Linux agents.</span></span> |
| [<span data-ttu-id="c3c83-124">Gruppo di gestione di System Center Operations Manager</span><span class="sxs-lookup"><span data-stu-id="c3c83-124">System Center Operations Manager management group</span></span>](log-analytics-om-agents.md) | <span data-ttu-id="c3c83-125">Sì</span><span class="sxs-lookup"><span data-stu-id="c3c83-125">Yes</span></span> | <span data-ttu-id="c3c83-126">La soluzione raccoglie le informazioni DNS dagli agenti di un gruppo di gestione di Operations Manager connesso.</span><span class="sxs-lookup"><span data-stu-id="c3c83-126">The solution collects DNS information from agents in a connected Operations Manager management group.</span></span> <span data-ttu-id="c3c83-127">Non è necessaria una connessione diretta dall'agente Operations Manager a Operations Management Suite.</span><span class="sxs-lookup"><span data-stu-id="c3c83-127">A direct connection from the Operations Manager agent to the Operations Management Suite is not required.</span></span> <span data-ttu-id="c3c83-128">I dati vengono inoltrati dal gruppo di gestione al repository Operations Management Suite.</span><span class="sxs-lookup"><span data-stu-id="c3c83-128">Data is forwarded from the management group to the Operations Management Suite repository.</span></span> |
| [<span data-ttu-id="c3c83-129">Account di archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="c3c83-129">Azure storage account</span></span>](log-analytics-azure-storage.md) | <span data-ttu-id="c3c83-130">No</span><span class="sxs-lookup"><span data-stu-id="c3c83-130">No</span></span> | <span data-ttu-id="c3c83-131">La soluzione non usa le risorse di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="c3c83-131">Azure storage isn't used by the solution.</span></span> |

### <a name="data-collection-details"></a><span data-ttu-id="c3c83-132">Informazioni dettagliate sulla raccolta di dati</span><span class="sxs-lookup"><span data-stu-id="c3c83-132">Data collection details</span></span>

<span data-ttu-id="c3c83-133">La soluzione raccoglie i dati relativi all'inventario e agli eventi DNS dai server DNS in cui è installato un agente Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="c3c83-133">The solution collects DNS inventory and DNS event-related data from the DNS servers where a Log Analytics agent is installed.</span></span> <span data-ttu-id="c3c83-134">Tali dati vengono quindi caricati in Log Analytics e visualizzati nel dashboard della soluzione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-134">This data is then uploaded to Log Analytics and displayed in the solution dashboard.</span></span> <span data-ttu-id="c3c83-135">I dati relativi all'inventario, come il numero di server, zone e record di risorse DNS, vengono raccolti eseguendo i cmdlet di PowerShell per DNS.</span><span class="sxs-lookup"><span data-stu-id="c3c83-135">Inventory-related data, such as the number of DNS servers, zones, and resource records, is collected by running the DNS PowerShell cmdlets.</span></span> <span data-ttu-id="c3c83-136">I dati vengono aggiornati ogni due giorni.</span><span class="sxs-lookup"><span data-stu-id="c3c83-136">The data is updated once every two days.</span></span> <span data-ttu-id="c3c83-137">I dati relativi agli eventi vengono raccolti quasi in tempo reale dai [log di analisi e di controllo](https://technet.microsoft.com/library/dn800669.aspx#enhanc) offerti dalle funzionalità avanzate di registrazione e diagnostica DNS di Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="c3c83-137">The event-related data is collected near real time from the [analytic and audit logs](https://technet.microsoft.com/library/dn800669.aspx#enhanc) provided by enhanced DNS logging and diagnostics in Windows Server 2012 R2.</span></span>

## <a name="configuration"></a><span data-ttu-id="c3c83-138">Configurazione</span><span class="sxs-lookup"><span data-stu-id="c3c83-138">Configuration</span></span>

<span data-ttu-id="c3c83-139">Per configurare la soluzione, usare le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="c3c83-139">Use the following information to configure the solution:</span></span>

- <span data-ttu-id="c3c83-140">È necessario un agente [Windows](log-analytics-windows-agents.md) o [Operations Manager](log-analytics-om-agents.md) in ogni server DNS che si vuole monitorare.</span><span class="sxs-lookup"><span data-stu-id="c3c83-140">You must have a [Windows](log-analytics-windows-agents.md) or [Operations Manager](log-analytics-om-agents.md) agent on each DNS server that you want to monitor.</span></span>
- <span data-ttu-id="c3c83-141">È possibile aggiungere la soluzione DNS Analytics nell'area di lavoro di Operations Management Suite da [Azure Marketplace](https://aka.ms/dnsanalyticsazuremarketplace).</span><span class="sxs-lookup"><span data-stu-id="c3c83-141">You can add the DNS Analytics solution to your Operations Management Suite workspace from the [Azure Marketplace](https://aka.ms/dnsanalyticsazuremarketplace).</span></span> <span data-ttu-id="c3c83-142">È anche possibile seguire la procedura descritta nell'articolo relativo all'[aggiunta di soluzioni di Log Analytics dalla raccolta soluzioni](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="c3c83-142">You can also use the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>

<span data-ttu-id="c3c83-143">La soluzione avvia la raccolta dati senza che siano necessarie operazioni di configurazione aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="c3c83-143">The solution starts collecting data without the need of further configuration.</span></span> <span data-ttu-id="c3c83-144">È tuttavia possibile usare la configurazione seguente per personalizzare la raccolta.</span><span class="sxs-lookup"><span data-stu-id="c3c83-144">However, you can use the following configuration to customize data collection.</span></span>

### <a name="configure-the-solution"></a><span data-ttu-id="c3c83-145">Configurare la soluzione</span><span class="sxs-lookup"><span data-stu-id="c3c83-145">Configure the solution</span></span>

<span data-ttu-id="c3c83-146">Nel dashboard della soluzione fare clic su **Configurazione** per aprire la pagina Configurazione di DNS Analytics.</span><span class="sxs-lookup"><span data-stu-id="c3c83-146">On the solution dashboard, click **Configuration** to open the DNS Analytics Configuration page.</span></span> <span data-ttu-id="c3c83-147">È possibile apportare due tipi di modifiche di configurazione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-147">There are two types of configuration changes that you can make:</span></span>

- <span data-ttu-id="c3c83-148">**Nomi di dominio consentiti**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-148">**Whitelisted Domain Names**.</span></span> <span data-ttu-id="c3c83-149">La soluzione non elabora tutte le query di ricerca,</span><span class="sxs-lookup"><span data-stu-id="c3c83-149">The solution does not process all the lookup queries.</span></span> <span data-ttu-id="c3c83-150">ma gestisce un elenco elementi consentiti per i suffissi dei nomi di dominio.</span><span class="sxs-lookup"><span data-stu-id="c3c83-150">It maintains a whitelist of domain name suffixes.</span></span> <span data-ttu-id="c3c83-151">Le query di ricerca che si risolvono nei nomi di dominio corrispondenti ai suffissi di questo elenco non vengono elaborate dalla soluzione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-151">The lookup queries that resolve to the domain names that match domain name suffixes in this whitelist are not processed by the solution.</span></span> <span data-ttu-id="c3c83-152">L'esclusione dall'elaborazione dei nomi di dominio consentiti consente di ottimizzare i dati inviati a Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="c3c83-152">Not processing whitelisted domain names helps to optimize the data sent to Log Analytics.</span></span> <span data-ttu-id="c3c83-153">L'elenco elementi consentiti predefinito include i nomi di dominio pubblici più diffusi, come www.google.com e www.facebook.com.</span><span class="sxs-lookup"><span data-stu-id="c3c83-153">The default whitelist includes popular public domain names, such as www.google.com and www.facebook.com.</span></span> <span data-ttu-id="c3c83-154">L'intero elenco predefinito può essere visualizzato tramite lo scorrimento.</span><span class="sxs-lookup"><span data-stu-id="c3c83-154">You can view the complete default list by scrolling.</span></span>

 <span data-ttu-id="c3c83-155">È possibile modificare l'elenco per aggiungere qualsiasi suffisso di nome di dominio per cui non si vogliono visualizzare informazioni dettagliate relative alla ricerca.</span><span class="sxs-lookup"><span data-stu-id="c3c83-155">You can modify the list to add any domain name suffix that you want to view lookup insights for.</span></span> <span data-ttu-id="c3c83-156">È anche possibile rimuovere qualsiasi suffisso di nome di dominio per cui non si vogliono visualizzare informazioni dettagliate relative alla ricerca.</span><span class="sxs-lookup"><span data-stu-id="c3c83-156">You can also remove any domain name suffix that you don't want to view lookup insights for.</span></span>

- <span data-ttu-id="c3c83-157">**Soglia client loquaci**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-157">**Talkative Client Threshold**.</span></span> <span data-ttu-id="c3c83-158">I client DNS che superano la soglia relativa al numero di richieste di ricerca vengono evidenziati nel pannello **Client DNS**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-158">DNS clients that exceed the threshold for the number of lookup requests are highlighted in the **DNS Clients** blade.</span></span> <span data-ttu-id="c3c83-159">La soglia predefinita è 1000.</span><span class="sxs-lookup"><span data-stu-id="c3c83-159">The default threshold is 1,000.</span></span> <span data-ttu-id="c3c83-160">È possibile modificare la soglia.</span><span class="sxs-lookup"><span data-stu-id="c3c83-160">You can edit the threshold.</span></span>

    ![Nomi di dominio consentiti](./media/log-analytics-dns/dns-config.png)

## <a name="management-packs"></a><span data-ttu-id="c3c83-162">Management Pack</span><span class="sxs-lookup"><span data-stu-id="c3c83-162">Management packs</span></span>

<span data-ttu-id="c3c83-163">Se per la connessione all'area di lavoro di Operations Management Suite si usa Microsoft Monitoring Agent, viene installato il Management Pack seguente:</span><span class="sxs-lookup"><span data-stu-id="c3c83-163">If you are using the Microsoft Monitoring Agent to connect to your Operations Management Suite workspace, the following management pack is installed:</span></span>

- <span data-ttu-id="c3c83-164">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span><span class="sxs-lookup"><span data-stu-id="c3c83-164">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span></span>

<span data-ttu-id="c3c83-165">Se il gruppo di gestione di Operations Manager è connesso all'area di lavoro di Operations Management Suite, in Operations Manager vengono installati i Management Pack seguenti quando si aggiunge questa soluzione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-165">If your Operations Manager management group is connected to your Operations Management Suite workspace, the following management packs are installed in Operations Manager when you add this solution.</span></span> <span data-ttu-id="c3c83-166">Per i Management Pack seguenti non è necessaria alcuna configurazione o manutenzione:</span><span class="sxs-lookup"><span data-stu-id="c3c83-166">There is no required configuration or maintenance of these management packs:</span></span>

- <span data-ttu-id="c3c83-167">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span><span class="sxs-lookup"><span data-stu-id="c3c83-167">Microsoft DNS Data Collector Intelligence Pack (Microsft.IntelligencePacks.Dns)</span></span>
- <span data-ttu-id="c3c83-168">Microsoft System Center Advisor DNS Analytics Configuration (Microsoft.IntelligencePack.Dns.Configuration)</span><span class="sxs-lookup"><span data-stu-id="c3c83-168">Microsoft System Center Advisor DNS Analytics Configuration (Microsoft.IntelligencePack.Dns.Configuration)</span></span>

<span data-ttu-id="c3c83-169">Per maggiori informazioni sulla modalità di aggiornamento dei Management Pack, vedere [Connettere Operations Manager a Log Analytics](log-analytics-om-agents.md).</span><span class="sxs-lookup"><span data-stu-id="c3c83-169">For more information on how solution management packs are updated, see [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span></span>

## <a name="use-the-dns-analytics-solution"></a><span data-ttu-id="c3c83-170">Usare la soluzione DNS Analytics</span><span class="sxs-lookup"><span data-stu-id="c3c83-170">Use the DNS Analytics solution</span></span>

<span data-ttu-id="c3c83-171">In questa sezione vengono illustrate tutte le funzioni del dashboard e si spiega come usarle.</span><span class="sxs-lookup"><span data-stu-id="c3c83-171">This section explains all the dashboard functions and how to use them.</span></span>

<span data-ttu-id="c3c83-172">Dopo aver aggiunto la soluzione all'area di lavoro, il riquadro della soluzione nella pagina di panoramica di Operations Management Suite offre un breve riepilogo dell'infrastruttura DNS,</span><span class="sxs-lookup"><span data-stu-id="c3c83-172">After you've added the solution to your workspace, the solution tile on the Operations Management Suite Overview page provides a quick summary of your DNS infrastructure.</span></span> <span data-ttu-id="c3c83-173">che include il numero di server DNS in cui vengono raccolti i dati</span><span class="sxs-lookup"><span data-stu-id="c3c83-173">It includes the number of DNS servers where the data is being collected.</span></span> <span data-ttu-id="c3c83-174">e il numero di richieste effettuato dai client per risolvere domini dannosi nelle ultime 24 ore.</span><span class="sxs-lookup"><span data-stu-id="c3c83-174">It also includes the number of requests made by clients to resolve malicious domains in the past 24 hours.</span></span> <span data-ttu-id="c3c83-175">Quando si fa clic sul riquadro, viene aperto il dashboard della soluzione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-175">When you click the tile, the solution dashboard opens.</span></span>

![Riquadro DNS Analytics](./media/log-analytics-dns/dns-tile.png)

### <a name="solution-dashboard"></a><span data-ttu-id="c3c83-177">Dashboard della soluzione</span><span class="sxs-lookup"><span data-stu-id="c3c83-177">Solution dashboard</span></span>

<span data-ttu-id="c3c83-178">Il dashboard della soluzione visualizza informazioni di riepilogo relative alle varie funzionalità</span><span class="sxs-lookup"><span data-stu-id="c3c83-178">The solution dashboard shows summarized information for the various features of the solution.</span></span> <span data-ttu-id="c3c83-179">e include anche collegamenti alla visualizzazione dettagliata per l'analisi e la diagnosi per scopi legali.</span><span class="sxs-lookup"><span data-stu-id="c3c83-179">It also includes links to the detailed view for forensic analysis and diagnosis.</span></span> <span data-ttu-id="c3c83-180">Per impostazione predefinita, vengono visualizzati i dati per gli ultimi sette giorni.</span><span class="sxs-lookup"><span data-stu-id="c3c83-180">By default, the data is shown for the last seven days.</span></span> <span data-ttu-id="c3c83-181">È possibile modificare l'intervallo di tempo con il **controllo di selezione di data e ora**, come nell'immagine seguente:</span><span class="sxs-lookup"><span data-stu-id="c3c83-181">You can change the date and time range by using the **date-time selection control**, as shown in the following image:</span></span>

![Controllo di selezione di data e ora](./media/log-analytics-dns/dns-time.png)

<span data-ttu-id="c3c83-183">Il dashboard visualizza i pannelli descritti di seguito.</span><span class="sxs-lookup"><span data-stu-id="c3c83-183">The solution dashboard shows the following blades:</span></span>

<span data-ttu-id="c3c83-184">**Sicurezza DNS**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-184">**DNS Security**.</span></span> <span data-ttu-id="c3c83-185">Segnala i client DNS che tentano di comunicare con domini dannosi.</span><span class="sxs-lookup"><span data-stu-id="c3c83-185">Reports the DNS clients that are trying to communicate with malicious domains.</span></span> <span data-ttu-id="c3c83-186">Usando i feed di intelligence per le minacce di Microsoft, DNS Analytics può rilevare gli indirizzi IP client che tentano di accedere ai domini dannosi.</span><span class="sxs-lookup"><span data-stu-id="c3c83-186">By using Microsoft threat intelligence feeds, DNS Analytics can detect client IPs that are trying to access malicious domains.</span></span> <span data-ttu-id="c3c83-187">In molti casi, i dispositivi infetti da malware "stabiliscono la connessione" con il "centro di comando e controllo" del dominio dannoso risolvendo il nome di dominio del malware.</span><span class="sxs-lookup"><span data-stu-id="c3c83-187">In many cases, malware-infected devices "dial out" to the "command and control" center of the malicious domain by resolving the malware domain name.</span></span>

![Pannello Sicurezza DNS](./media/log-analytics-dns/dns-security-blade.png)

<span data-ttu-id="c3c83-189">Facendo clic su un indirizzo IP client nell'elenco si apre Ricerca log con i dettagli della ricerca della rispettiva query.</span><span class="sxs-lookup"><span data-stu-id="c3c83-189">When you click a client IP in the list, Log Search opens and shows the lookup details of the respective query.</span></span> <span data-ttu-id="c3c83-190">Nell'esempio seguente, DNS Analytics ha rilevato una comunicazione con [IRCbot](https://www.microsoft.com/security/portal/threat/encyclopedia/entry.aspx?Name=Win32/IRCbot):</span><span class="sxs-lookup"><span data-stu-id="c3c83-190">In the following example, DNS Analytics detected that the communication was done with an [IRCbot](https://www.microsoft.com/security/portal/threat/encyclopedia/entry.aspx?Name=Win32/IRCbot):</span></span>

![Ricerca log: risultati con IRCbot](./media/log-analytics-dns/ircbot.png)

<span data-ttu-id="c3c83-192">Le informazioni consentono di identificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="c3c83-192">The information helps you to identify the:</span></span>

- <span data-ttu-id="c3c83-193">IP client che ha avviato la comunicazione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-193">Client IP that initiated the communication.</span></span>
- <span data-ttu-id="c3c83-194">Nome di dominio che viene risolto nell'indirizzo IP dannoso.</span><span class="sxs-lookup"><span data-stu-id="c3c83-194">Domain name that resolves to the malicious IP.</span></span>
- <span data-ttu-id="c3c83-195">Indirizzi IP in cui viene risolto il nome di dominio.</span><span class="sxs-lookup"><span data-stu-id="c3c83-195">IP addresses that the domain name resolves to.</span></span>
- <span data-ttu-id="c3c83-196">Indirizzo IP dannoso.</span><span class="sxs-lookup"><span data-stu-id="c3c83-196">Malicious IP address.</span></span>
- <span data-ttu-id="c3c83-197">Gravità del problema.</span><span class="sxs-lookup"><span data-stu-id="c3c83-197">Severity of the issue.</span></span>
- <span data-ttu-id="c3c83-198">Motivo per non consentire l'indirizzo IP dannoso.</span><span class="sxs-lookup"><span data-stu-id="c3c83-198">Reason for blacklisting the malicious IP.</span></span>
- <span data-ttu-id="c3c83-199">Data e ora di rilevamento.</span><span class="sxs-lookup"><span data-stu-id="c3c83-199">Detection time.</span></span>

<span data-ttu-id="c3c83-200">**Domini sottoposti a query**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-200">**Domains Queried**.</span></span> <span data-ttu-id="c3c83-201">Contiene i nomi di dominio su cui i client DNS eseguono più frequentemente query nell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="c3c83-201">Provides the most frequent domain names being queried by the DNS clients in your environment.</span></span> <span data-ttu-id="c3c83-202">È possibile visualizzare l'elenco di tutti i nomi di dominio sottoposti a query</span><span class="sxs-lookup"><span data-stu-id="c3c83-202">You can view the list of all the domain names queried.</span></span> <span data-ttu-id="c3c83-203">ed eseguire il drill-down nei dettagli delle richieste di ricerca per un nome di dominio specifico in Ricerca log.</span><span class="sxs-lookup"><span data-stu-id="c3c83-203">You can also drill down into the lookup request details of a specific domain name in Log Search.</span></span>

![Pannello Domini sottoposti a query](./media/log-analytics-dns/domains-queried-blade.png)

<span data-ttu-id="c3c83-205">**Client DNS**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-205">**DNS Clients**.</span></span> <span data-ttu-id="c3c83-206">Segnala i client che *violano la soglia* relativa al numero di query nel periodo di tempo selezionato.</span><span class="sxs-lookup"><span data-stu-id="c3c83-206">Reports the clients *breaching the threshold* for number of queries in the chosen time period.</span></span> <span data-ttu-id="c3c83-207">È possibile visualizzare l'elenco di tutti i client DNS e i dettagli delle query che hanno eseguito in Ricerca log.</span><span class="sxs-lookup"><span data-stu-id="c3c83-207">You can view the list of all the DNS clients and the details of the queries made by them in Log Search.</span></span>

![Pannello Client DNS](./media/log-analytics-dns/dns-clients-blade.png)

<span data-ttu-id="c3c83-209">**Registrazioni di DNS dinamici**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-209">**Dynamic DNS Registrations**.</span></span> <span data-ttu-id="c3c83-210">Segnala gli errori di registrazione dei nomi.</span><span class="sxs-lookup"><span data-stu-id="c3c83-210">Reports name registration failures.</span></span> <span data-ttu-id="c3c83-211">Vengono evidenziati tutti gli errori di registrazione relativi a [record di risorse](https://en.wikipedia.org/wiki/List_of_DNS_record_types) indirizzo (tipo A e AAAA), con gli indirizzi IP client che hanno effettuato le richieste di registrazione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-211">All registration failures for address [resource records](https://en.wikipedia.org/wiki/List_of_DNS_record_types) (Type A and AAAA) are highlighted along with the client IPs that made the registration requests.</span></span> <span data-ttu-id="c3c83-212">È quindi possibile usare queste informazioni per trovare la causa radice dell'errore di registrazione seguendo questa procedura:</span><span class="sxs-lookup"><span data-stu-id="c3c83-212">You can then use this information to find the root cause of the registration failure by following these steps:</span></span>

1. <span data-ttu-id="c3c83-213">Trovare la zona rilevante per il nome che il client sta tentando di aggiornare.</span><span class="sxs-lookup"><span data-stu-id="c3c83-213">Find the zone that is authoritative for the name that the client is trying to update.</span></span>

2. <span data-ttu-id="c3c83-214">Usare la soluzione per controllare le informazioni di inventario di tale zona.</span><span class="sxs-lookup"><span data-stu-id="c3c83-214">Use the solution to check the inventory information of that zone.</span></span>

3. <span data-ttu-id="c3c83-215">Verificare che per la zona sia abilitato l'aggiornamento dinamico.</span><span class="sxs-lookup"><span data-stu-id="c3c83-215">Verify that the dynamic update for the zone is enabled.</span></span>

4. <span data-ttu-id="c3c83-216">Controllare se la zona è configurata o meno per l'aggiornamento dinamico sicuro.</span><span class="sxs-lookup"><span data-stu-id="c3c83-216">Check whether the zone is configured for secure dynamic update or not.</span></span>

    ![Pannello Registrazioni di DNS dinamici](./media/log-analytics-dns/dynamic-dns-reg-blade.png)

<span data-ttu-id="c3c83-218">**Richieste di registrazione del nome**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-218">**Name registration requests**.</span></span> <span data-ttu-id="c3c83-219">Il riquadro superiore visualizza la tendenza del numero di richieste di aggiornamento dinamico di DNS riuscite e non riuscite.</span><span class="sxs-lookup"><span data-stu-id="c3c83-219">The upper tile shows a trendline of successful and failed DNS dynamic update requests.</span></span> <span data-ttu-id="c3c83-220">Il riquadro inferiore contiene l'elenco dei primi 10 client che hanno inviato richieste di aggiornamento di DNS non riuscite ai server DNS, ordinato in base al numero di errori.</span><span class="sxs-lookup"><span data-stu-id="c3c83-220">The lower tile lists the top 10 clients that are sending failed DNS update requests to the DNS servers, sorted by the number of failures.</span></span>

![<span data-ttu-id="c3c83-221">Pannello Richieste di registrazione del nome</span><span class="sxs-lookup"><span data-stu-id="c3c83-221">Name registration requests blade</span></span> ](./media/log-analytics-dns/name-reg-req-blade.png)

<span data-ttu-id="c3c83-222">**Query DDI Analytics di esempio**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-222">**Sample DDI Analytics Queries**.</span></span> <span data-ttu-id="c3c83-223">Contiene un elenco delle query di ricerca più comuni che recuperano direttamente dati di analisi non elaborati.</span><span class="sxs-lookup"><span data-stu-id="c3c83-223">Contains a list of the most common search queries that fetch raw analytics data directly.</span></span>

[!include[log-analytics-log-search-nextgeneration](../../includes/log-analytics-log-search-nextgeneration.md)]

![Query di esempio](./media/log-analytics-dns/queries.png)

<span data-ttu-id="c3c83-225">È possibile usare queste query come punto di partenza per creare le proprie query per l'elaborazione di report personalizzati.</span><span class="sxs-lookup"><span data-stu-id="c3c83-225">You can use these queries as a starting point for creating your own queries for customized reporting.</span></span> <span data-ttu-id="c3c83-226">Le query si collegano alla pagina di Ricerca log di DNS Analytics in cui vengono visualizzati i risultati:</span><span class="sxs-lookup"><span data-stu-id="c3c83-226">The queries link to the DNS Analytics Log Search page where results are displayed:</span></span>

- <span data-ttu-id="c3c83-227">**Elenco di server DNS**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-227">**List of DNS Servers**.</span></span> <span data-ttu-id="c3c83-228">Visualizza un elenco di tutti i server DNS con i nomi di dominio completo, i nomi di dominio, i nomi foresta e gli IP server associati.</span><span class="sxs-lookup"><span data-stu-id="c3c83-228">Shows a list of all DNS servers with their associated FQDN, domain name, forest name, and server IPs.</span></span>
- <span data-ttu-id="c3c83-229">**Elenco di zone DNS**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-229">**List of DNS Zones**.</span></span> <span data-ttu-id="c3c83-230">Visualizza un elenco di tutte le zone DNS con il nome della zona, lo stato di aggiornamento dinamico, i server dei nomi e lo stato della firma DNSSEC associati.</span><span class="sxs-lookup"><span data-stu-id="c3c83-230">Shows a list of all DNS zones with the associated zone name, dynamic update status, name servers, and DNSSEC signing status.</span></span>
- <span data-ttu-id="c3c83-231">**Record di risorse inutilizzati**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-231">**Unused Resource Records**.</span></span> <span data-ttu-id="c3c83-232">Visualizza un elenco di tutti i record di risorse non usati o non aggiornati.</span><span class="sxs-lookup"><span data-stu-id="c3c83-232">Shows a list of all the unused/stale resource records.</span></span> <span data-ttu-id="c3c83-233">L'elenco contiene il nome e il tipo dei record di risorse, il server DNS associato, la data e l'ora di generazione dei record e il nome della zona.</span><span class="sxs-lookup"><span data-stu-id="c3c83-233">This list contains the resource record name, resource record type, the associated DNS server, record generation time, and zone name.</span></span> <span data-ttu-id="c3c83-234">È possibile usare questo elenco per identificare i record di risorse DNS non più in uso</span><span class="sxs-lookup"><span data-stu-id="c3c83-234">You can use this list to identify the DNS resource records that are no longer in use.</span></span> <span data-ttu-id="c3c83-235">e quindi intervenire sulla base di tali informazioni per rimuovere tali voci dai server DNS.</span><span class="sxs-lookup"><span data-stu-id="c3c83-235">Based on this information, you can then remove those entries from the DNS servers.</span></span>
- <span data-ttu-id="c3c83-236">**Carico query server DNS**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-236">**DNS Servers Query Load**.</span></span> <span data-ttu-id="c3c83-237">Visualizza informazioni che consentono di ottenere una prospettiva del carico DNS sui server DNS.</span><span class="sxs-lookup"><span data-stu-id="c3c83-237">Shows information so that you can get a perspective of the DNS load on your DNS servers.</span></span> <span data-ttu-id="c3c83-238">Queste informazioni consentono di pianificare la capacità per i server.</span><span class="sxs-lookup"><span data-stu-id="c3c83-238">This information can help you plan the capacity for the servers.</span></span> <span data-ttu-id="c3c83-239">È possibile passare alla scheda **Metrica** per ottenere una visualizzazione grafica,</span><span class="sxs-lookup"><span data-stu-id="c3c83-239">You can go to the **Metrics** tab to change the view to a graphical visualization.</span></span> <span data-ttu-id="c3c83-240">che consente di comprendere la distribuzione del carico DNS nei server DNS</span><span class="sxs-lookup"><span data-stu-id="c3c83-240">This view helps you understand how the DNS load is distributed across your DNS servers.</span></span> <span data-ttu-id="c3c83-241">e mostra le tendenze nella frequenza di query DNS per ogni server.</span><span class="sxs-lookup"><span data-stu-id="c3c83-241">It shows DNS query rate trends for each server.</span></span>

    ![Ricerca log: risultati relativi alle query nei server DNS](./media/log-analytics-dns/dns-servers-query-load.png)

- <span data-ttu-id="c3c83-243">**Carico query zone DNS**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-243">**DNS Zones Query Load**.</span></span> <span data-ttu-id="c3c83-244">Visualizza le statistiche al secondo delle query di tutte le zone DNS nei server DNS gestiti dalla soluzione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-244">Shows the DNS zone-query-per-second statistics of all the zones on the DNS servers being managed by the solution.</span></span> <span data-ttu-id="c3c83-245">Fare clic sulla scheda **Metrica** per passare dalla visualizzazione di record dettagliati a una visualizzazione grafica dei risultati.</span><span class="sxs-lookup"><span data-stu-id="c3c83-245">Click the **Metrics** tab to change the view from detailed records to a graphical visualization of the results.</span></span>
- <span data-ttu-id="c3c83-246">**Eventi di configurazione**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-246">**Configuration Events**.</span></span> <span data-ttu-id="c3c83-247">Visualizza tutti gli eventi di modifica configurazione DNS e i messaggi associati.</span><span class="sxs-lookup"><span data-stu-id="c3c83-247">Shows all the DNS configuration change events and associated messages.</span></span> <span data-ttu-id="c3c83-248">È quindi possibile filtrare questi eventi in base a data e ora dell'evento, ID evento, server DNS o categoria di attività.</span><span class="sxs-lookup"><span data-stu-id="c3c83-248">You can then filter these events based on time of the event, event ID, DNS server, or task category.</span></span> <span data-ttu-id="c3c83-249">I dati consentono di controllare le modifiche apportate a specifici server DNS in date e ore specifiche.</span><span class="sxs-lookup"><span data-stu-id="c3c83-249">The data can help you audit changes made to specific DNS servers at specific times.</span></span>
- <span data-ttu-id="c3c83-250">**Log analitico DNS**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-250">**DNS Analytical Log**.</span></span> <span data-ttu-id="c3c83-251">Visualizza tutti gli eventi analitici in tutti i server DNS gestiti dalla soluzione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-251">Shows all the analytic events on all the DNS servers managed by the solution.</span></span> <span data-ttu-id="c3c83-252">È quindi possibile filtrare questi eventi in base a data e ora dell'evento, ID evento, server DNS, IP client che ha eseguito la query di ricerca e categoria di attività del tipo di query.</span><span class="sxs-lookup"><span data-stu-id="c3c83-252">You can then filter these events based on time of the event, event ID, DNS server, client IP that made the lookup query, and query type task category.</span></span> <span data-ttu-id="c3c83-253">Gli eventi di analisi dei server DNS consentono il rilevamento delle attività nel server DNS.</span><span class="sxs-lookup"><span data-stu-id="c3c83-253">DNS server analytic events enable activity tracking on the DNS server.</span></span> <span data-ttu-id="c3c83-254">Viene registrato un evento di analisi ogni volta che il server invia o riceve informazioni DNS.</span><span class="sxs-lookup"><span data-stu-id="c3c83-254">An analytic event is logged each time the server sends or receives DNS information.</span></span>

### <a name="search-by-using-dns-analytics-log-search"></a><span data-ttu-id="c3c83-255">Eseguire una ricerca usando la Ricerca log di DNS Analytics</span><span class="sxs-lookup"><span data-stu-id="c3c83-255">Search by using DNS Analytics Log Search</span></span>

<span data-ttu-id="c3c83-256">Nella pagina Ricerca log è possibile creare una query.</span><span class="sxs-lookup"><span data-stu-id="c3c83-256">On the Log Search page, you can create a query.</span></span> <span data-ttu-id="c3c83-257">È possibile filtrare i risultati usando i controlli facet.</span><span class="sxs-lookup"><span data-stu-id="c3c83-257">You can filter your search results by using facet controls.</span></span> <span data-ttu-id="c3c83-258">È anche possibile creare query avanzate per trasformare, filtrare e creare report sui risultati.</span><span class="sxs-lookup"><span data-stu-id="c3c83-258">You can also create advanced queries to transform, filter, and report on your results.</span></span> <span data-ttu-id="c3c83-259">Per iniziare, usare le query seguenti:</span><span class="sxs-lookup"><span data-stu-id="c3c83-259">Start by using the following queries:</span></span>

1. <span data-ttu-id="c3c83-260">Nella **casella della query di ricerca** digitare `Type=DnsEvents` per visualizzare tutti gli eventi DNS generati dai server DNS gestiti dalla soluzione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-260">In the **search query box**, type `Type=DnsEvents` to view all the DNS events generated by the DNS servers managed by the solution.</span></span> <span data-ttu-id="c3c83-261">Nei risultati sono elencati i dati di log per tutti gli eventi relativi a query di ricerca, registrazioni dinamiche e modifiche di configurazione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-261">The results list the log data for all events related to lookup queries, dynamic registrations, and configuration changes.</span></span>

    ![Ricerca log: eventi DNS](./media/log-analytics-dns/log-search-dnsevents.png)  

    <span data-ttu-id="c3c83-263">a.</span><span class="sxs-lookup"><span data-stu-id="c3c83-263">a.</span></span> <span data-ttu-id="c3c83-264">Per visualizzare i dati di log per query di ricerca, selezionare **LookUpQuery** come filtro **sottotipo** nel controllo facet sul lato sinistro.</span><span class="sxs-lookup"><span data-stu-id="c3c83-264">To view the log data for lookup queries, select **LookUpQuery** as the **Subtype** filter from the facet control on the left.</span></span> <span data-ttu-id="c3c83-265">Viene visualizzata una tabella contenente gli eventi relativi a query di ricerca per il periodo di tempo selezionato.</span><span class="sxs-lookup"><span data-stu-id="c3c83-265">A table that lists all the lookup query events for the selected time period is displayed.</span></span>

    <span data-ttu-id="c3c83-266">b.</span><span class="sxs-lookup"><span data-stu-id="c3c83-266">b.</span></span> <span data-ttu-id="c3c83-267">Per visualizzare i dati di log per registrazioni dinamiche, selezionare  **DynamicRegistration** come filtro **sottotipo** nel controllo facet sul lato sinistro.</span><span class="sxs-lookup"><span data-stu-id="c3c83-267">To view the log data for dynamic registrations, select **DynamicRegistration** as the **Subtype** filter from the facet control on the left.</span></span> <span data-ttu-id="c3c83-268">Viene visualizzata una tabella contenente tutti gli eventi relativi a registrazioni dinamiche per il periodo di tempo selezionato.</span><span class="sxs-lookup"><span data-stu-id="c3c83-268">A table that lists all the dynamic registration events for the selected time period is displayed.</span></span>

    <span data-ttu-id="c3c83-269">c.</span><span class="sxs-lookup"><span data-stu-id="c3c83-269">c.</span></span> <span data-ttu-id="c3c83-270">Per visualizzare i dati di log per modifiche di configurazione, selezionare **ConfigurationChange** come filtro **sottotipo** nel controllo facet sul lato sinistro.</span><span class="sxs-lookup"><span data-stu-id="c3c83-270">To view the log data for configuration changes, select **ConfigurationChange** as the **Subtype** filter from the facet control on the left.</span></span> <span data-ttu-id="c3c83-271">Viene visualizzata una tabella contenente tutti gli eventi relativi a modifiche di configurazione per il periodo di tempo selezionato.</span><span class="sxs-lookup"><span data-stu-id="c3c83-271">A table that lists all the configuration change events for the selected time period is displayed.</span></span>

2. <span data-ttu-id="c3c83-272">Nella **casella della query di ricerca** digitare `Type=DnsInventory` per visualizzare tutti i dati relativi all'inventario DNS per i server DNS gestiti dalla soluzione.</span><span class="sxs-lookup"><span data-stu-id="c3c83-272">In the **search query box**, type `Type=DnsInventory` to view all the DNS inventory-related data for the DNS servers managed by the solution.</span></span> <span data-ttu-id="c3c83-273">Nei risultati vengono elencati i dati di log relativi ai server DNS, alle zone DNS e ai record di risorse.</span><span class="sxs-lookup"><span data-stu-id="c3c83-273">The results list the log data for DNS servers, DNS zones, and resource records.</span></span>

    ![Ricerca log: inventario DNS](./media/log-analytics-dns/log-search-dnsinventory.png)

## <a name="feedback"></a><span data-ttu-id="c3c83-275">Commenti e suggerimenti</span><span class="sxs-lookup"><span data-stu-id="c3c83-275">Feedback</span></span>

<span data-ttu-id="c3c83-276">È possibile indicare commenti e suggerimenti in diversi modi:</span><span class="sxs-lookup"><span data-stu-id="c3c83-276">There are two ways you can give feedback:</span></span>

- <span data-ttu-id="c3c83-277">**UserVoice**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-277">**UserVoice**.</span></span> <span data-ttu-id="c3c83-278">È possibile pubblicare idee sulle funzionalità di DNS Analytics che possono essere migliorate.</span><span class="sxs-lookup"><span data-stu-id="c3c83-278">Post ideas for DNS Analytics features to work on.</span></span> <span data-ttu-id="c3c83-279">Visitare la pagina [UserVoice relativa a Operations Management Suite](https://aka.ms/dnsanalyticsuservoice).</span><span class="sxs-lookup"><span data-stu-id="c3c83-279">Visit the [Operations Management Suite UserVoice page](https://aka.ms/dnsanalyticsuservoice).</span></span>
- <span data-ttu-id="c3c83-280">**Partecipare alla coorte**.</span><span class="sxs-lookup"><span data-stu-id="c3c83-280">**Join our cohort**.</span></span> <span data-ttu-id="c3c83-281">Microsoft è sempre interessata a includere nelle coorti nuovi clienti, che otterranno un accesso in anteprima alle nuove funzionalità e contribuiranno al miglioramento di DNS Analytics.</span><span class="sxs-lookup"><span data-stu-id="c3c83-281">We're always interested in having new customers join our cohorts to get early access to new features and help us improve DNS Analytics.</span></span> <span data-ttu-id="c3c83-282">Per partecipare, compilare questo [rapido sondaggio](https://aka.ms/dnsanalyticssurvey).</span><span class="sxs-lookup"><span data-stu-id="c3c83-282">If you are interested in joining our cohorts, fill out [this quick survey](https://aka.ms/dnsanalyticssurvey).</span></span>

## <a name="next-steps"></a><span data-ttu-id="c3c83-283">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="c3c83-283">Next steps</span></span>

<span data-ttu-id="c3c83-284">[Eseguire ricerche nei log](log-analytics-log-searches.md) per visualizzare record di log dettagliati per DNS.</span><span class="sxs-lookup"><span data-stu-id="c3c83-284">[Search logs](log-analytics-log-searches.md) to view detailed DNS log records.</span></span>
