---
title: attributi di shadow del servizio di sincronizzazione di aaaAzure AD Connect | Documenti Microsoft
description: Descrive il funzionamento degli attributi shadow con il servizio di sincronizzazione Azure AD Connect.
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1b8665e7488c6078b655f8a3e35519145bacd898
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-service-shadow-attributes"></a><span data-ttu-id="37482-103">Attributi shadow del servizio di sincronizzazione Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="37482-103">Azure AD Connect sync service shadow attributes</span></span>
<span data-ttu-id="37482-104">La maggior parte degli attributi sono rappresentati stesso hello in Azure AD come se fossero in Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="37482-104">Most attributes are represented hello same way in Azure AD as they are in your on-premises Active Directory.</span></span> <span data-ttu-id="37482-105">Ma alcuni attributi hanno alcune una gestione speciale e il valore dell'attributo hello in Azure AD può essere diverso rispetto a ciò che esegue la sincronizzazione Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="37482-105">But some attributes have some special handling and hello attribute value in Azure AD might be different than what Azure AD Connect synchronizes.</span></span>

## <a name="introducing-shadow-attributes"></a><span data-ttu-id="37482-106">Introduzione agli attributi shadow</span><span class="sxs-lookup"><span data-stu-id="37482-106">Introducing shadow attributes</span></span>
<span data-ttu-id="37482-107">Alcuni attributi hanno due rappresentazioni in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="37482-107">Some attributes have two representations in Azure AD.</span></span> <span data-ttu-id="37482-108">Valore locale hello sia un valore calcolato vengono archiviati.</span><span class="sxs-lookup"><span data-stu-id="37482-108">Both hello on-premises value and a calculated value are stored.</span></span> <span data-ttu-id="37482-109">Questi attributi aggiuntivi sono chiamati attributi shadow.</span><span class="sxs-lookup"><span data-stu-id="37482-109">These extra attributes are called shadow attributes.</span></span> <span data-ttu-id="37482-110">Hello due attributi più comuni in cui si verifica questo problema sono **userPrincipalName** e **proxyAddress**.</span><span class="sxs-lookup"><span data-stu-id="37482-110">hello two most common attributes where you see this behavior are **userPrincipalName** and **proxyAddress**.</span></span> <span data-ttu-id="37482-111">modifica di Hello nei valori di attributo si verifica quando sono presenti valori in questi attributi che rappresentano i domini non verificati.</span><span class="sxs-lookup"><span data-stu-id="37482-111">hello change in attribute values happens when there are values in these attributes representing non-verified domains.</span></span> <span data-ttu-id="37482-112">Tuttavia, il motore di sincronizzazione hello in Connect legge hello valore nell'attributo shadow hello scopo dal relativo punto di vista, attributo hello è stata confermata da Azure AD.</span><span class="sxs-lookup"><span data-stu-id="37482-112">But hello sync engine in Connect reads hello value in hello shadow attribute so from its perspective, hello attribute has been confirmed by Azure AD.</span></span>

<span data-ttu-id="37482-113">È possibile visualizzare gli attributi di ombreggiatura hello utilizzando hello portale di Azure o con PowerShell.</span><span class="sxs-lookup"><span data-stu-id="37482-113">You cannot see hello shadow attributes using hello Azure portal or with PowerShell.</span></span> <span data-ttu-id="37482-114">Ma il concetto di hello comprensione aiuta si tootroubleshoot determinati scenari dove hello presenta valori diversi in locale e nel cloud hello.</span><span class="sxs-lookup"><span data-stu-id="37482-114">But understanding hello concept helps you tootroubleshoot certain scenarios where hello attribute has different values on-premises and in hello cloud.</span></span>

<span data-ttu-id="37482-115">toobetter comprendere il comportamento di hello, esaminare questo esempio da Fabrikam:</span><span class="sxs-lookup"><span data-stu-id="37482-115">toobetter understand hello behavior, look at this example from Fabrikam:</span></span>  
![Domini](./media/active-directory-aadconnectsyncservice-shadow-attributes/domains.png)  
<span data-ttu-id="37482-117">Includono più suffissi UPN nel servizio Active Directory locale, ma ne è stato verificato solo uno.</span><span class="sxs-lookup"><span data-stu-id="37482-117">They have multiple UPN suffixes in their on-premises Active Directory, but they have only verified one.</span></span>

### <a name="userprincipalname"></a><span data-ttu-id="37482-118">userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="37482-118">userPrincipalName</span></span>
<span data-ttu-id="37482-119">Un utente dispone di hello seguenti valori di attributo in un dominio non verificato:</span><span class="sxs-lookup"><span data-stu-id="37482-119">A user has hello following attribute values in a non-verified domain:</span></span>

| <span data-ttu-id="37482-120">Attributo</span><span class="sxs-lookup"><span data-stu-id="37482-120">Attribute</span></span> | <span data-ttu-id="37482-121">Valore</span><span class="sxs-lookup"><span data-stu-id="37482-121">Value</span></span> |
| --- | --- |
| <span data-ttu-id="37482-122">userPrincipalName locale</span><span class="sxs-lookup"><span data-stu-id="37482-122">on-premises userPrincipalName</span></span> | lee.sperry@fabrikam.com |
| <span data-ttu-id="37482-123">shadowUserPrincipalName in Azure AD</span><span class="sxs-lookup"><span data-stu-id="37482-123">Azure AD shadowUserPrincipalName</span></span> | lee.sperry@fabrikam.com |
| <span data-ttu-id="37482-124">userPrincipalName in Azure AD</span><span class="sxs-lookup"><span data-stu-id="37482-124">Azure AD userPrincipalName</span></span> | lee.sperry@fabrikam.onmicrosoft.com |

<span data-ttu-id="37482-125">attributo userPrincipalName Hello è il valore di hello che viene visualizzato quando l'utilizzo di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="37482-125">hello userPrincipalName attribute is hello value you see when using PowerShell.</span></span>

<span data-ttu-id="37482-126">Poiché il valore dell'attributo hello reale locale viene archiviato in Azure AD, quando si verifica dominio fabrikam.com hello, Azure Active Directory Aggiorna attributo userPrincipalName hello con valore hello shadowUserPrincipalName hello.</span><span class="sxs-lookup"><span data-stu-id="37482-126">Since hello real on-premises attribute value is stored in Azure AD, when you verify hello fabrikam.com domain, Azure AD updates hello userPrincipalName attribute with hello value from hello shadowUserPrincipalName.</span></span> <span data-ttu-id="37482-127">Non si dispone toosynchronize tutte le modifiche da Azure AD Connect per toobe questi valori aggiornati.</span><span class="sxs-lookup"><span data-stu-id="37482-127">You do not have toosynchronize any changes from Azure AD Connect for these values toobe updated.</span></span>

### <a name="proxyaddresses"></a><span data-ttu-id="37482-128">proxyAddresses</span><span class="sxs-lookup"><span data-stu-id="37482-128">proxyAddresses</span></span>
<span data-ttu-id="37482-129">Hello stesso processo per includere solo i domini verificati si verifica anche proxyAddresses, ma con una logica aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="37482-129">hello same process for only including verified domains also occurs for proxyAddresses, but with some additional logic.</span></span> <span data-ttu-id="37482-130">controllo Hello per domini verificati avviene solo per gli utenti delle cassette postali.</span><span class="sxs-lookup"><span data-stu-id="37482-130">hello check for verified domains only happens for mailbox users.</span></span> <span data-ttu-id="37482-131">Un utente abilitato alla posta elettronica o un contatto rappresentano un utente in un'altra organizzazione di Exchange ed è possibile aggiungere tutti i valori negli oggetti toothese proxyAddresses.</span><span class="sxs-lookup"><span data-stu-id="37482-131">A mail-enabled user or contact represent a user in another Exchange organization and you can add any values in proxyAddresses toothese objects.</span></span>

<span data-ttu-id="37482-132">Per un utente della cassetta postale, in locale o in Exchange Online, vengono visualizzati solo i valori per i domini verificati.</span><span class="sxs-lookup"><span data-stu-id="37482-132">For a mailbox user, either on-premises or in Exchange Online, only values for verified domains appear.</span></span> <span data-ttu-id="37482-133">L'aspetto è simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="37482-133">It could look like this:</span></span>

| <span data-ttu-id="37482-134">Attributo</span><span class="sxs-lookup"><span data-stu-id="37482-134">Attribute</span></span> | <span data-ttu-id="37482-135">Valore</span><span class="sxs-lookup"><span data-stu-id="37482-135">Value</span></span> |
| --- | --- |
| <span data-ttu-id="37482-136">proxyAddresses locale</span><span class="sxs-lookup"><span data-stu-id="37482-136">on-premises proxyAddresses</span></span> | SMTP:abbie.spencer@fabrikamonline.com</br>smtp:abbie.spencer@fabrikam.com</br>smtp:abbie@fabrikamonline.com |
| <span data-ttu-id="37482-137">proxyAddresses in Exchange Online</span><span class="sxs-lookup"><span data-stu-id="37482-137">Exchange Online proxyAddresses</span></span> | SMTP:abbie.spencer@fabrikamonline.com</br>smtp:abbie@fabrikamonline.com</br>SIP:abbie.spencer@fabrikamonline.com |

<span data-ttu-id="37482-138">In questo caso **smtp:abbie.spencer@fabrikam.com** è stato rimosso poiché tale dominio non è stato verificato.</span><span class="sxs-lookup"><span data-stu-id="37482-138">In this case **smtp:abbie.spencer@fabrikam.com** was removed since that domain has not been verified.</span></span> <span data-ttu-id="37482-139">Ma Exchange ha aggiunto anche **SIP:abbie.spencer@fabrikamonline.com**. Fabrikam non ha usato Lync/Skype in locale, ma Azure AD ed Exchange Online sono in fase di preparazione.</span><span class="sxs-lookup"><span data-stu-id="37482-139">But Exchange also added **SIP:abbie.spencer@fabrikamonline.com**. Fabrikam has not used Lync/Skype on-premises, but Azure AD and Exchange Online prepare for it.</span></span>

<span data-ttu-id="37482-140">Questa logica per proxyAddresses è tooas cui **ProxyCalc**.</span><span class="sxs-lookup"><span data-stu-id="37482-140">This logic for proxyAddresses is referred tooas **ProxyCalc**.</span></span> <span data-ttu-id="37482-141">ProxyCalc viene richiamato con ogni modifica a un utente quando:</span><span class="sxs-lookup"><span data-stu-id="37482-141">ProxyCalc is invoked with every change on a user when:</span></span>

- <span data-ttu-id="37482-142">utente Hello è stato assegnato un piano di servizio che include Exchange Online, anche se l'utente hello non è stato concesso in licenza per Exchange.</span><span class="sxs-lookup"><span data-stu-id="37482-142">hello user has been assigned a service plan that includes Exchange Online even if hello user was not licensed for Exchange.</span></span> <span data-ttu-id="37482-143">Ad esempio, se hello utente è assegnato hello SKU di Office E3, ma è stata assegnata solo SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="37482-143">For example, if hello user is assigned hello Office E3 SKU, but only was assigned SharePoint Online.</span></span> <span data-ttu-id="37482-144">Questo vale anche se la cassetta postale dell'utente è ancora in locale.</span><span class="sxs-lookup"><span data-stu-id="37482-144">This is true even if your mailbox is still on-premises.</span></span>
- <span data-ttu-id="37482-145">Hello msExchRecipientTypeDetails di attributo ha un valore.</span><span class="sxs-lookup"><span data-stu-id="37482-145">hello attribute msExchRecipientTypeDetails has a value.</span></span>
- <span data-ttu-id="37482-146">Rendere un tooproxyAddresses modifica userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="37482-146">You make a change tooproxyAddresses or userPrincipalName.</span></span>

<span data-ttu-id="37482-147">ProxyCalc potrebbe richiedere una modifica di alcune tooprocess tempo su un utente e non è sincrono con processo di esportazione hello Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="37482-147">ProxyCalc might take some time tooprocess a change on a user and is not synchronous with hello Azure AD Connect export process.</span></span>

> [!NOTE]
> <span data-ttu-id="37482-148">Hello ProxyCalc logica presenta alcuni comportamenti aggiuntivi per scenari avanzati non documentati in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="37482-148">hello ProxyCalc logic has some additional behaviors for advanced scenarios not documented in this topic.</span></span> <span data-ttu-id="37482-149">In questo argomento viene fornita automaticamente toounderstand hello comportamento e non tutta la logica interna del documento.</span><span class="sxs-lookup"><span data-stu-id="37482-149">This topic is provided for you toounderstand hello behavior and not document all internal logic.</span></span>

### <a name="quarantined-attribute-values"></a><span data-ttu-id="37482-150">Valori di attributo in quarantena</span><span class="sxs-lookup"><span data-stu-id="37482-150">Quarantined attribute values</span></span>
<span data-ttu-id="37482-151">Gli attributi shadow vengono usati anche quando sono presenti valori di attributo duplicati.</span><span class="sxs-lookup"><span data-stu-id="37482-151">Shadow attributes are also used when there are duplicate attribute values.</span></span> <span data-ttu-id="37482-152">Per altre informazioni, vedere [Resilienza degli attributi duplicati](active-directory-aadconnectsyncservice-duplicate-attribute-resiliency.md).</span><span class="sxs-lookup"><span data-stu-id="37482-152">For more information, see [duplicate attribute resiliency](active-directory-aadconnectsyncservice-duplicate-attribute-resiliency.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="37482-153">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="37482-153">See also</span></span>
* [<span data-ttu-id="37482-154">Servizio di sincronizzazione Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="37482-154">Azure AD Connect sync</span></span>](active-directory-aadconnectsync-whatis.md)
* <span data-ttu-id="37482-155">[Integrazione delle identità locali con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="37482-155">[Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
