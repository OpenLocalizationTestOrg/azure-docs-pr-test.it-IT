---
title: aaaHandling ordine degli eventi e lateness con Analitica di flusso di Azure | Documenti Microsoft
description: Informazioni su come funziona Analisi di flusso con gli eventi non in ordine o in ritardo nei flussi di dati.
keywords: non in ordine, in ritardo, eventi
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 87c028662fbafbf4f72f57f215d017f65bb649f0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-stream-analytics-event-order-handling"></a><span data-ttu-id="ec419-104">Gestione dell'ordine degli eventi con Analisi di flusso di Azure</span><span class="sxs-lookup"><span data-stu-id="ec419-104">Azure Stream Analytics event order handling</span></span>

<span data-ttu-id="ec419-105">In un flusso di dati temporali degli eventi, ogni evento viene registrato con il tempo di hello viene ricevuto l'evento hello.</span><span class="sxs-lookup"><span data-stu-id="ec419-105">In a temporal data stream of events, each event is recorded with hello time that hello event is received.</span></span> <span data-ttu-id="ec419-106">Alcune condizioni potrebbero produrre i flussi di eventi di ricezione toooccasionally alcuni eventi in un ordine diverso rispetto a cui sono stati inviati.</span><span class="sxs-lookup"><span data-stu-id="ec419-106">Some conditions might cause event streams toooccasionally receive some events in a different order than which they were sent.</span></span> <span data-ttu-id="ec419-107">La ritrasmissione TCP semplice, o anche un sfasamento tra l'invio di dispositivo e la ricezione di hub eventi hello hello può causare questo toooccur.</span><span class="sxs-lookup"><span data-stu-id="ec419-107">A simple TCP retransmit, or even a clock skew between hello sending device and hello receiving event hub might cause this toooccur.</span></span> <span data-ttu-id="ec419-108">Eventi "Punteggiatura" vengono aggiunti anche i flussi di eventi tooreceived, ora hello tooadvance in assenza di hello di arrivo di eventi.</span><span class="sxs-lookup"><span data-stu-id="ec419-108">“Punctuation” events also are added tooreceived event streams, tooadvance hello time in hello absence of event arrivals.</span></span> <span data-ttu-id="ec419-109">Questo è necessario negli scenari come "Inviare una notifica quando non si verificano accessi per 3 minuti".</span><span class="sxs-lookup"><span data-stu-id="ec419-109">These are needed in scenarios like “Notify me when no logins occur for 3 minutes."</span></span>

<span data-ttu-id="ec419-110">I flussi di input che non sono in ordine vengono:</span><span class="sxs-lookup"><span data-stu-id="ec419-110">Input streams that are not in order are either:</span></span>
* <span data-ttu-id="ec419-111">Ordinati (e perciò **ritardati**).</span><span class="sxs-lookup"><span data-stu-id="ec419-111">Sorted (and therefore **delayed**).</span></span>
* <span data-ttu-id="ec419-112">Regolato dal sistema hello, in base a criteri di tooa specificato dall'utente.</span><span class="sxs-lookup"><span data-stu-id="ec419-112">Adjusted by hello system, according tooa user-specified policy.</span></span>


## <a name="lateness-tolerance"></a><span data-ttu-id="ec419-113">Tolleranza ai ritardi</span><span class="sxs-lookup"><span data-stu-id="ec419-113">Lateness tolerance</span></span>
<span data-ttu-id="ec419-114">Analisi di flusso tollera questi tipi di scenari.</span><span class="sxs-lookup"><span data-stu-id="ec419-114">Stream Analytics tolerates these types of scenarios.</span></span> <span data-ttu-id="ec419-115">Analisi di flusso è in grado di gestire gli eventi "non in ordine" e "in ritardo".</span><span class="sxs-lookup"><span data-stu-id="ec419-115">Stream Analytics has handling for "out-of-order" and "late" events.</span></span> <span data-ttu-id="ec419-116">Gestisce questi eventi in hello seguenti modi:</span><span class="sxs-lookup"><span data-stu-id="ec419-116">It handles these events in hello following ways:</span></span>

* <span data-ttu-id="ec419-117">Gli eventi che arrivano senza ordine ma all'interno di hello, impostare la tolleranza sono **riordinati timestamp**.</span><span class="sxs-lookup"><span data-stu-id="ec419-117">Events that arrive out of order but within hello set tolerance are **reordered by timestamp**.</span></span>
* <span data-ttu-id="ec419-118">Gli eventi che arrivano con un ritardo maggiore della tolleranza vengono **eliminati o regolati**.</span><span class="sxs-lookup"><span data-stu-id="ec419-118">Events that arrive later than tolerance are **dropped or adjusted**.</span></span>
    * <span data-ttu-id="ec419-119">**Rettificato**: toohave tooappear rettificato ricevuti dal tempo accettabile più recente di hello.</span><span class="sxs-lookup"><span data-stu-id="ec419-119">**Adjusted**: Adjusted tooappear toohave arrived at hello latest acceptable time.</span></span>
    * <span data-ttu-id="ec419-120">**Eliminati**: rimossi.</span><span class="sxs-lookup"><span data-stu-id="ec419-120">**Dropped**: Discarded.</span></span>

![Gestione degli eventi con Analisi di flusso](media/stream-analytics-event-handling/stream-analytics-event-handling.png)

## <a name="reduce-hello-number-of-out-of-order-events"></a><span data-ttu-id="ec419-122">Ridurre il numero di hello di eventi in ordine</span><span class="sxs-lookup"><span data-stu-id="ec419-122">Reduce hello number of out-of-order events</span></span>

<span data-ttu-id="ec419-123">Poiché Analisi di flusso applica una trasformazione temporale quando elabora gli eventi in ingresso (ad esempio per le aggregazioni finestra o i join temporali), ordina gli eventi in ingresso per timestamp.</span><span class="sxs-lookup"><span data-stu-id="ec419-123">Because Stream Analytics applies a temporal transformation when it processes incoming events (for example, for windowed aggregates or temporal joins), Stream Analytics sorts incoming events by timestamp order.</span></span>

<span data-ttu-id="ec419-124">Quando la parola chiave da hello "timestamp" è **non** , tempo di accodamento eventi di hello hub eventi di Azure viene utilizzato per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="ec419-124">When hello “timestamp by” keyword is **not** used, hello Azure Event Hubs event enqueue time is used by default.</span></span> <span data-ttu-id="ec419-125">Hub eventi garantisce monotonicità di hello timestamp in ogni partizione dell'hub eventi hello.</span><span class="sxs-lookup"><span data-stu-id="ec419-125">Event Hubs guarantees monotonicity of hello timestamp on each partition of hello event hub.</span></span> <span data-ttu-id="ec419-126">Garantisce anche che gli eventi di tutte le partizioni saranno uniti in ordine di timestamp.</span><span class="sxs-lookup"><span data-stu-id="ec419-126">It also guarantees that events from all partitions will be merged in timestamp order.</span></span> <span data-ttu-id="ec419-127">Queste due garanzie di Hub eventi assicurano l'assenza di eventi non in ordine.</span><span class="sxs-lookup"><span data-stu-id="ec419-127">These two Event Hubs guarantees ensure no out-of-order events.</span></span>

<span data-ttu-id="ec419-128">In alcuni casi, è importante per il timestamp è toouse hello del mittente.</span><span class="sxs-lookup"><span data-stu-id="ec419-128">Sometimes, it’s important for you toouse hello sender’s timestamp.</span></span> <span data-ttu-id="ec419-129">In tal caso, un timestamp di payload dell'evento hello viene scelto utilizzando "timestamp da".</span><span class="sxs-lookup"><span data-stu-id="ec419-129">In that case, a timestamp from hello event payload is chosen by using “timestamp by.”</span></span> <span data-ttu-id="ec419-130">Questi scenari potrebbero introdurre una o più cause che determinano eventi non ordinati:</span><span class="sxs-lookup"><span data-stu-id="ec419-130">In these scenarios, one or more sources of event misorder might be introduced:</span></span>

* <span data-ttu-id="ec419-131">I producer di eventi presentano sfasamenti di orario.</span><span class="sxs-lookup"><span data-stu-id="ec419-131">Event producers have clock skews.</span></span> <span data-ttu-id="ec419-132">Questo è comune quando i producer provengono da computer diversi che inevitabilmente hanno orologi diversi.</span><span class="sxs-lookup"><span data-stu-id="ec419-132">This is common when producers are from different computers, so they have different clocks.</span></span>
* <span data-ttu-id="ec419-133">Si verifica un ritardo di rete dall'origine hello dell'hub di eventi di hello eventi toohello destinazione.</span><span class="sxs-lookup"><span data-stu-id="ec419-133">There's a network delay from hello source of hello events toohello destination event hub.</span></span>
* <span data-ttu-id="ec419-134">Esistono sfasamenti di orario tra le partizioni dell'hub eventi.</span><span class="sxs-lookup"><span data-stu-id="ec419-134">Clock skews exist between event hub partitions.</span></span> <span data-ttu-id="ec419-135">Analisi di flusso innanzitutto ordina gli eventi di tutte le partizioni dell'hub eventi in base all'ora di accodamento dell'evento.</span><span class="sxs-lookup"><span data-stu-id="ec419-135">Stream Analytics first sorts events from all event hub partitions by event enqueue time.</span></span> <span data-ttu-id="ec419-136">Quindi, viene esaminato il flusso di dati hello per misordered eventi.</span><span class="sxs-lookup"><span data-stu-id="ec419-136">Then, it examines hello data stream for misordered events.</span></span>

<span data-ttu-id="ec419-137">Nella scheda Configurazione hello, vedrai hello valori predefiniti seguenti:</span><span class="sxs-lookup"><span data-stu-id="ec419-137">On hello configuration tab, you see hello following defaults:</span></span>

![Gestione degli eventi non in ordine di Analisi di flusso](media/stream-analytics-event-handling/stream-analytics-out-of-order-handling.png)

<span data-ttu-id="ec419-139">Se si usano 0 secondi come finestra di tolleranza di errore in ordine di hello, asserito che tutti gli eventi sono in ordine tutto il tempo hello.</span><span class="sxs-lookup"><span data-stu-id="ec419-139">If you use 0 seconds as hello out-of-order tolerance window, you are asserting that all events are in order all hello time.</span></span> <span data-ttu-id="ec419-140">Dato origini hello tre eventi misordered, è improbabile che questo è true.</span><span class="sxs-lookup"><span data-stu-id="ec419-140">Given hello three sources of misordered events, it’s unlikely that this is true.</span></span> 

<span data-ttu-id="ec419-141">tooallow Analitica flusso toocorrect misorder un evento, è possibile specificare una finestra di tolleranza in ordine diverso da zero.</span><span class="sxs-lookup"><span data-stu-id="ec419-141">tooallow Stream Analytics toocorrect an event misorder, you can specify a non-zero out-of-order tolerance window.</span></span> <span data-ttu-id="ec419-142">Eventi di buffer flusso Analitica backup toothat finestra e quindi riordini che loro usando hello timestamp che scelto.</span><span class="sxs-lookup"><span data-stu-id="ec419-142">Stream Analytics buffers events up toothat window, and then reorders them by using hello timestamp you chose.</span></span> <span data-ttu-id="ec419-143">Si applica quindi la trasformazione temporale hello.</span><span class="sxs-lookup"><span data-stu-id="ec419-143">It then applies hello temporal transformation.</span></span> <span data-ttu-id="ec419-144">È possibile iniziare con una finestra di 3 secondi e ottimizzare hello valore tooreduce hello il numero di eventi che sono in base al tempo.</span><span class="sxs-lookup"><span data-stu-id="ec419-144">You can start with a 3-second window, and tune hello value tooreduce hello number of events that are time-adjusted.</span></span> 

<span data-ttu-id="ec419-145">Un effetto collaterale della memorizzazione nel buffer hello è che l'output di hello è **ritardato hello stesso periodo di tempo**.</span><span class="sxs-lookup"><span data-stu-id="ec419-145">A side effect of hello buffering is that hello output is **delayed by hello same amount of time**.</span></span> <span data-ttu-id="ec419-146">È possibile ottimizzare hello valore tooreduce hello il numero di eventi in ordine e mantenere la bassa latenza processo hello.</span><span class="sxs-lookup"><span data-stu-id="ec419-146">You can tune hello value tooreduce hello number of out-of-order events, and keep hello job latency low.</span></span>

## <a name="get-help"></a><span data-ttu-id="ec419-147">Ottenere aiuto</span><span class="sxs-lookup"><span data-stu-id="ec419-147">Get help</span></span>
<span data-ttu-id="ec419-148">Per ottenere assistenza aggiuntiva, provare ad accedere al [forum di Analisi di flusso di Azure](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="ec419-148">For additional assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="ec419-149">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ec419-149">Next steps</span></span>
* [<span data-ttu-id="ec419-150">Introduzione tooStream Analitica</span><span class="sxs-lookup"><span data-stu-id="ec419-150">Introduction tooStream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="ec419-151">Introduzione ad Analisi di flusso</span><span class="sxs-lookup"><span data-stu-id="ec419-151">Get started with Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="ec419-152">Scalabilità dei processi di Analisi di flusso</span><span class="sxs-lookup"><span data-stu-id="ec419-152">Scale Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="ec419-153">Informazioni di riferimento sul linguaggio di query di Analisi di flusso</span><span class="sxs-lookup"><span data-stu-id="ec419-153">Stream Analytics query language reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="ec419-154">Informazioni di riferimento sull'API REST di gestione di Analisi di flusso</span><span class="sxs-lookup"><span data-stu-id="ec419-154">Stream Analytics management REST API reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)