---
title: Risolvere i problemi relativi al backup di una macchina virtuale di Azure | Microsoft Docs
description: Risolvere i problemi relativi al backup e al ripristino delle macchine virtuali di Azure
services: backup
documentationcenter: 
author: trinadhk
manager: shreeshd
editor: 
ms.assetid: 73214212-57a4-4b57-a2e2-eaf9d7fde67f
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: trinadhk;markgal;jpallavi;
ms.openlocfilehash: dbd70bdbb17d99c5025018e76ea756b1b1528a3e
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="troubleshoot-azure-virtual-machine-backup"></a><span data-ttu-id="09228-103">Risolvere i problemi relativi al backup delle macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="09228-103">Troubleshoot Azure virtual machine backup</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="09228-104">Insieme di credenziali dei servizi di ripristino</span><span class="sxs-lookup"><span data-stu-id="09228-104">Recovery services vault</span></span>](backup-azure-vms-troubleshoot.md)
> * [<span data-ttu-id="09228-105">Insieme di credenziali per il backup</span><span class="sxs-lookup"><span data-stu-id="09228-105">Backup vault</span></span>](backup-azure-vms-troubleshoot-classic.md)
>
>

<span data-ttu-id="09228-106">È possibile risolvere gli errori rilevati durante l'uso di Backup di Azure con le informazioni elencate nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="09228-106">You can troubleshoot errors encountered while using Azure Backup with information listed in the table below.</span></span>

## <a name="backup"></a><span data-ttu-id="09228-107">Backup</span><span class="sxs-lookup"><span data-stu-id="09228-107">Backup</span></span>
| <span data-ttu-id="09228-108">Dettagli errore</span><span class="sxs-lookup"><span data-stu-id="09228-108">Error details</span></span> | <span data-ttu-id="09228-109">Soluzione alternativa</span><span class="sxs-lookup"><span data-stu-id="09228-109">Workaround</span></span> |
| --- | --- |
| <span data-ttu-id="09228-110">Impossibile eseguire l'operazione perché la VM non esiste più.</span><span class="sxs-lookup"><span data-stu-id="09228-110">Could not perform the operation as VM no longer exists.</span></span> <span data-ttu-id="09228-111">Arrestare la protezione della macchina virtuale senza eliminare i dati del backup.</span><span class="sxs-lookup"><span data-stu-id="09228-111">- Stop protecting virtual machine without deleting backup data.</span></span> <span data-ttu-id="09228-112">Per altre informazioni visitare la pagina Web http://go.microsoft.com/fwlink/?LinkId=808124</span><span class="sxs-lookup"><span data-stu-id="09228-112">More details at http://go.microsoft.com/fwlink/?LinkId=808124</span></span> |<span data-ttu-id="09228-113">Questo si verifica quando la macchina virtuale primaria viene eliminata, ma i criteri di backup continuano a cercare una macchina virtuale per il backup.</span><span class="sxs-lookup"><span data-stu-id="09228-113">This happens when the primary VM is deleted, but the backup policy continues looking for a VM to back up.</span></span> <span data-ttu-id="09228-114">Per correggere l'errore: </span><span class="sxs-lookup"><span data-stu-id="09228-114">To fix this error:</span></span> <ol><li> <span data-ttu-id="09228-115">Ricreare la macchina virtuale con lo stesso nome e lo stesso nome del gruppo di risorse [nome del servizio cloud],</span><span class="sxs-lookup"><span data-stu-id="09228-115">Recreate the virtual machine with the same name and same resource group name [cloud service name],</span></span><br><span data-ttu-id="09228-116">OPPURE</span><span class="sxs-lookup"><span data-stu-id="09228-116">(OR)</span></span></li><li> <span data-ttu-id="09228-117">Interrompere la protezione della macchina virtuale cancellando o senza eliminare i dati del backup.</span><span class="sxs-lookup"><span data-stu-id="09228-117">Stop protecting virtual machine with or without deleting the backup data.</span></span> [<span data-ttu-id="09228-118">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="09228-118">More details</span></span>](http://go.microsoft.com/fwlink/?LinkId=808124)</li></ol> |
| <span data-ttu-id="09228-119">Operazione di creazione snapshot non riuscita a causa dell'assenza della connettività di rete nella macchina virtuale. Assicurarsi che la VM abbia accesso alla rete.</span><span class="sxs-lookup"><span data-stu-id="09228-119">Snapshot operation failed due to no network connectivity on the virtual machine - Ensure that VM has network access.</span></span> <span data-ttu-id="09228-120">Per la corretta creazione dello snapshot, aggiungere all'elenco elementi consentiti gli intervalli IP del data center di Azure oppure configurare un server proxy per l'accesso di rete.</span><span class="sxs-lookup"><span data-stu-id="09228-120">For snapshot to succeed, either whitelist Azure datacenter IP ranges or set up a proxy server for network access.</span></span> <span data-ttu-id="09228-121">Per altri dettagli, vedere http://go.microsoft.com/fwlink/?LinkId=800034.</span><span class="sxs-lookup"><span data-stu-id="09228-121">For more details, refer to  http://go.microsoft.com/fwlink/?LinkId=800034.</span></span> <span data-ttu-id="09228-122">Se si usa già il server proxy, assicurarsi che le impostazioni del server proxy siano configurate correttamente.</span><span class="sxs-lookup"><span data-stu-id="09228-122">If you are already using proxy server, make sure that proxy server settings are configured correctly</span></span> | <span data-ttu-id="09228-123">Questo errore viene generato quando si nega la connettività Internet in uscita nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09228-123">This error is thrown when you deny the outbound internet connectivity on the virtual machine.</span></span> <span data-ttu-id="09228-124">La connettività Internet è necessaria per consentire all'estensione snapshot della VM di creare uno snapshot dei dischi sottostanti della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09228-124">Internet connectivity is required for VM snapshot extension to take a snapshot of underlying disks of the virtual machine.</span></span> <span data-ttu-id="09228-125">[Altre informazioni](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#snapshot-operation-failed-due-to-no-network-connectivity-on-the-virtual-machine) su come risolvere gli errori degli snapshot dovuti all'accesso di rete bloccato.</span><span class="sxs-lookup"><span data-stu-id="09228-125">[Learn more](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#snapshot-operation-failed-due-to-no-network-connectivity-on-the-virtual-machine) on how to fix snapshot failures due to blocked network access.</span></span> |
| <span data-ttu-id="09228-126">L'agente di macchine virtuali non riesce a comunicare con il servizio Backup di Azure.</span><span class="sxs-lookup"><span data-stu-id="09228-126">VM agent is unable to communicate with the Azure Backup Service.</span></span> <span data-ttu-id="09228-127">Verificare la connettività di rete della macchina virtuale e che l'agente di macchine virtuali sia in esecuzione con la versione più recente.</span><span class="sxs-lookup"><span data-stu-id="09228-127">- Ensure the VM has network connectivity and the VM agent is latest and running.</span></span> <span data-ttu-id="09228-128">Per altre informazioni, vedere http://go.microsoft.com/fwlink/?LinkId=800034.</span><span class="sxs-lookup"><span data-stu-id="09228-128">For more information, please refer to  http://go.microsoft.com/fwlink/?LinkId=800034</span></span> |<span data-ttu-id="09228-129">Questo errore viene generato se si verifica un problema con l'agente di VM o se l'accesso di rete all'infrastruttura di Azure è bloccato in qualche modo.</span><span class="sxs-lookup"><span data-stu-id="09228-129">This error is thrown if there is a problem with the VM Agent or network access to the Azure infrastructure is blocked in some way.</span></span> <span data-ttu-id="09228-130">Vedere [altre informazioni](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#vm-agent-unable-to-communicate-with-azure-backup) sul debug dei problemi di snapshot della VM.</span><span class="sxs-lookup"><span data-stu-id="09228-130">[Learn more](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#vm-agent-unable-to-communicate-with-azure-backup) about debugging up VM snapshot issues.</span></span><br> <span data-ttu-id="09228-131">Se l'agente VM non causa alcun problema, riavviare la VM.</span><span class="sxs-lookup"><span data-stu-id="09228-131">If the VM agent is not causing any issues, then restart the VM.</span></span> <span data-ttu-id="09228-132">Talvolta, uno stato della macchina virtuale non corretto genera problemi che vengono corretti riavviando la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09228-132">At times an incorrect VM state can cause issues, and restarting the VM resets this "bad state".</span></span> |
| <span data-ttu-id="09228-133">Lo stato di provisioning della macchina virtuale è Non riuscito. Riavviare la macchina virtuale e assicurarsi che lo stato della macchina virtuale sia In esecuzione o Arresto per il backup.</span><span class="sxs-lookup"><span data-stu-id="09228-133">VM is in Failed Provisioning State - Please restart the VM and make sure that the VM is in Running or Shut-down state for backup</span></span> | <span data-ttu-id="09228-134">Questo errore si verifica quando gli errori di una delle estensioni provocano lo stato non riuscito del provisioning della VM.</span><span class="sxs-lookup"><span data-stu-id="09228-134">This occurs when one of the extension failures leads VM state to be in failed provisioning state.</span></span> <span data-ttu-id="09228-135">Passare all'elenco di estensioni e verificare se è presente un'estensione con errore, rimuoverla e provare a riavviare la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09228-135">Go to extensions list and see if there is a failed extension, remove it and try restarting the virtual machine.</span></span> <span data-ttu-id="09228-136">Se tutte le estensioni sono in stato di esecuzione, verificare se è in esecuzione il servizio agente di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="09228-136">If all extensions are in running state, check if VM agent service is running.</span></span> <span data-ttu-id="09228-137">In caso contrario, riavviare il servizio agente di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="09228-137">If not, restart the VM agent service.</span></span> | 
| <span data-ttu-id="09228-138">L'operazione dell'estensione VMSnapshot non è riuscita per i dischi gestiti. Ripetere l'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="09228-138">VMSnapshot extension operation failed for managed disks - Please retry the backup operation.</span></span> <span data-ttu-id="09228-139">Se il problema si ripete, seguire le istruzioni illustrate nell'articolo 'http://go.microsoft.com/fwlink/?LinkId=800034'.</span><span class="sxs-lookup"><span data-stu-id="09228-139">If the issue repeats, follow the instructions at 'http://go.microsoft.com/fwlink/?LinkId=800034'.</span></span> <span data-ttu-id="09228-140">Se il problema continua a persistere, contattare il supporto tecnico Microsoft.</span><span class="sxs-lookup"><span data-stu-id="09228-140">If it fails further, please contact Microsoft support</span></span> | <span data-ttu-id="09228-141">Questo errore viene visualizzato quando il servizio Backup di Azure non riesce ad attivare uno snapshot.</span><span class="sxs-lookup"><span data-stu-id="09228-141">This error when Azure Backup service fails to trigger a snapshot.</span></span> <span data-ttu-id="09228-142">[Altre informazioni](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#vmsnapshot-extension-operation-failed) sul debug dei problemi delle VM relativi agli snapshot.</span><span class="sxs-lookup"><span data-stu-id="09228-142">[Learn more](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#vmsnapshot-extension-operation-failed) about debugging VM snapshot issues.</span></span> |
| <span data-ttu-id="09228-143">Non è stato possibile copiare lo snapshot della macchina virtuale a causa dello spazio disponibile insufficiente nell'account di archiviazione. Assicurarsi che lo spazio disponibile nell'account di archiviazione sia equivalente ai dati presenti nei dischi di archiviazione Premium collegati alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09228-143">Could not copy the snapshot of the virtual machine, due to insufficient free space in the storage account - Ensure that storage account has free space equivalent to the data present on the premium storage disks attached to the virtual machine</span></span> | <span data-ttu-id="09228-144">Nel caso delle VM Premium, lo snapshot deve essere copiato nell'account di archiviazione,</span><span class="sxs-lookup"><span data-stu-id="09228-144">In case of premium VMs, we copy the snapshot to storage account.</span></span> <span data-ttu-id="09228-145">in modo da assicurare che il traffico di gestione dei backup, che funziona sullo snapshot, non limiti il numero di IOPS disponibili all'applicazione che usa i dischi Premium.</span><span class="sxs-lookup"><span data-stu-id="09228-145">This is to make sure that backup management traffic, which works on snapshot, doesn't limit the number of IOPS available to the application using premium disks.</span></span> <span data-ttu-id="09228-146">Microsoft consiglia di allocare solo il 50% dello spazio totale dell'account di archiviazione, in modo che il servizio Backup di Azure possa copiare lo snapshot nell'account di archiviazione e trasferire i dati da questa posizione copiata nell'account di archiviazione all'insieme di credenziali.</span><span class="sxs-lookup"><span data-stu-id="09228-146">Microsoft recommends you allocate only 50% of the total storage account space so the Azure Backup service can copy the snapshot to storage account and transfer data from this copied location in storage account to the vault.</span></span> | 
| <span data-ttu-id="09228-147">Non è possibile eseguire l'operazione perché l'agente di macchine virtuali non risponde</span><span class="sxs-lookup"><span data-stu-id="09228-147">Unable to perform the operation as the VM agent is not responsive</span></span> |<span data-ttu-id="09228-148">Questo errore viene generato se si verifica un problema con l'agente di VM o se l'accesso di rete all'infrastruttura di Azure è bloccato in qualche modo.</span><span class="sxs-lookup"><span data-stu-id="09228-148">This error is thrown if there is a problem with the VM Agent or network access to the Azure infrastructure is blocked in some way.</span></span> <span data-ttu-id="09228-149">Per le macchine virtuali di Windows, controllare lo stato del servizio agente di macchine virtuali nella sezione dei servizi e verificare che l'agente venga visualizzato tra i programmi nel pannello di controllo.</span><span class="sxs-lookup"><span data-stu-id="09228-149">For Windows VMs, check the VM agent service status in services and whether the agent appears in programs in control panel.</span></span> <span data-ttu-id="09228-150">Provare a rimuovere il programma dal pannello di controllo e a reinstallare l'agente come indicato di [seguito](#vm-agent).</span><span class="sxs-lookup"><span data-stu-id="09228-150">Try removing the program from control panel and re-installing the agent as mentioned [below](#vm-agent).</span></span> <span data-ttu-id="09228-151">Dopo aver reinstallato l'agente, attivare un backup adhoc per verificare.</span><span class="sxs-lookup"><span data-stu-id="09228-151">After re-installing the agent, trigger an adhoc backup to verify.</span></span> |
| <span data-ttu-id="09228-152">Operazione di estensione dei servizi di ripristino non riuscita.</span><span class="sxs-lookup"><span data-stu-id="09228-152">Recovery services extension operation failed.</span></span> <span data-ttu-id="09228-153">Assicurarsi che nella macchina virtuale sia presente l'agente di macchine virtuali più recente e che il servizio agente sia in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="09228-153">- Please make sure that latest virtual machine agent is present on the virtual machine and agent service is running.</span></span> <span data-ttu-id="09228-154">Ripetere l'operazione di backup e, in caso di esito negativo, contattare il supporto tecnico Microsoft.</span><span class="sxs-lookup"><span data-stu-id="09228-154">Please retry backup operation and if it fails, contact Microsoft support.</span></span> |<span data-ttu-id="09228-155">Questo errore viene generato quando l'agente VM non è aggiornato.</span><span class="sxs-lookup"><span data-stu-id="09228-155">This error is thrown when VM agent is out of date.</span></span> <span data-ttu-id="09228-156">Per aggiornare l'agente VM, fare riferimento alla sezione "Aggiornamento dell'agente VM" riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="09228-156">Refer “Updating the VM Agent” section below to update the VM agent.</span></span> |
| <span data-ttu-id="09228-157">La macchina virtuale non esiste.</span><span class="sxs-lookup"><span data-stu-id="09228-157">Virtual machine doesn't exist.</span></span> <span data-ttu-id="09228-158">Verificare che la macchina virtuale sia presente o selezionarne un'altra.</span><span class="sxs-lookup"><span data-stu-id="09228-158">- Please make sure that virtual machine exists or select a different virtual machine.</span></span> |<span data-ttu-id="09228-159">Questo errore si verifica quando viene rilevata la macchina virtuale primaria ma i criteri di backup continuano a cercare una macchina virtuale per il backup.</span><span class="sxs-lookup"><span data-stu-id="09228-159">This happens when the primary VM is deleted but the backup policy continues to look for a VM to perform backup.</span></span> <span data-ttu-id="09228-160">Per correggere l'errore: </span><span class="sxs-lookup"><span data-stu-id="09228-160">To fix this error:</span></span> <ol><li> <span data-ttu-id="09228-161">Ricreare la macchina virtuale con lo stesso nome e lo stesso nome del gruppo di risorse [nome del servizio cloud],</span><span class="sxs-lookup"><span data-stu-id="09228-161">Recreate the virtual machine with the same name and same resource group name [cloud service name],</span></span><br><span data-ttu-id="09228-162">OPPURE</span><span class="sxs-lookup"><span data-stu-id="09228-162">(OR)</span></span><br></li><li><span data-ttu-id="09228-163">Interrompere la protezione della macchina virtuale senza eliminare i dati del backup.</span><span class="sxs-lookup"><span data-stu-id="09228-163">Stop protecting the virtual machine without deleting the backup data.</span></span> [<span data-ttu-id="09228-164">Altre informazioni</span><span class="sxs-lookup"><span data-stu-id="09228-164">More details</span></span>](http://go.microsoft.com/fwlink/?LinkId=808124)</li></ol> |
| <span data-ttu-id="09228-165">L'esecuzione del comando non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="09228-165">Command execution failed.</span></span> <span data-ttu-id="09228-166">In questo elemento è attualmente in corso un'altra operazione.</span><span class="sxs-lookup"><span data-stu-id="09228-166">- Another operation is currently in progress on this item.</span></span> <span data-ttu-id="09228-167">Attendere il completamento dell'operazione precedente, quindi riprovare.</span><span class="sxs-lookup"><span data-stu-id="09228-167">Please wait until the previous operation is completed, and then retry</span></span> |<span data-ttu-id="09228-168">È in esecuzione un processo di backup esistente per la VM e non è possibile avviare un nuovo processo mentre è in esecuzione il processo esistente.</span><span class="sxs-lookup"><span data-stu-id="09228-168">An existing backup on the VM is running, and a new job cannot be started while the existing job is running.</span></span> |
| <span data-ttu-id="09228-169">Si è verificato il timeout della copia dei dischi rigidi virtuali dall'insieme di credenziali per il backup. Attendere qualche minuto prima di ripetere l'operazione.</span><span class="sxs-lookup"><span data-stu-id="09228-169">Copying VHDs from the backup vault timed out - Please retry the operation in a few minutes.</span></span> <span data-ttu-id="09228-170">Se il problema persiste, contattare il supporto tecnico Microsoft.</span><span class="sxs-lookup"><span data-stu-id="09228-170">If the problem persists, contact Microsoft Support.</span></span> | <span data-ttu-id="09228-171">Questo problema si verifica in caso di errore temporaneo sul lato della risorsa di archiviazione o se il servizio di backup non riceve IOPS sufficienti dall'account di archiviazione che ospita la macchina virtuale per trasferire i dati all'insieme di credenziali entro il periodo di timeout.</span><span class="sxs-lookup"><span data-stu-id="09228-171">This happens if there is a transient error on storage side or if backup service is not getting sufficient IOPS from storage account hosting the VM in order to transfer data within timeout period to vault.</span></span> <span data-ttu-id="09228-172">Assicurarsi di seguire le [Procedure consigliate](backup-azure-vms-introduction.md#best-practices) durante la configurazione del backup.</span><span class="sxs-lookup"><span data-stu-id="09228-172">Make sure that you followed [Best practices](backup-azure-vms-introduction.md#best-practices) while setting up backup.</span></span> <span data-ttu-id="09228-173">Provare a spostare la macchina virtuale in un account di archiviazione diverso, non caricato, quindi provare a eseguire di nuovo il backup.</span><span class="sxs-lookup"><span data-stu-id="09228-173">Try moving VM to a different storage account which is not loaded and retry backup.</span></span>|
| <span data-ttu-id="09228-174">Il backup non è riuscito e si è verificato un errore interno. Attendere qualche minuto prima di ripetere l'operazione.</span><span class="sxs-lookup"><span data-stu-id="09228-174">Backup failed with an internal error - Please retry the operation in a few minutes.</span></span> <span data-ttu-id="09228-175">Se il problema persiste, contattare il supporto tecnico Microsoft.</span><span class="sxs-lookup"><span data-stu-id="09228-175">If the problem persists, contact Microsoft Support</span></span> |<span data-ttu-id="09228-176">Questo problema può verificarsi per 2 ragioni: </span><span class="sxs-lookup"><span data-stu-id="09228-176">You can get this error for 2 reasons:</span></span> <ol><li> <span data-ttu-id="09228-177">È stato riscontrato un problema temporaneo nell'accesso all'archiviazione della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09228-177">There is a transient issue in accessing the VM storage.</span></span> <span data-ttu-id="09228-178">Controllare lo [stato di Azure](https://azure.microsoft.com/en-us/status/) per verificare la presenza di un eventuale problema in corso relativo alle operazioni di calcolo/archiviazione/rete nell'area.</span><span class="sxs-lookup"><span data-stu-id="09228-178">Please check [Azure Status](https://azure.microsoft.com/en-us/status/) to see if there is any on-going issue related to compute, storage, or networking in the region.</span></span> <span data-ttu-id="09228-179">Dopo aver risolto il problema, riprovare a eseguire il backup.</span><span class="sxs-lookup"><span data-stu-id="09228-179">Then retry the backup job once the issue is resolved.</span></span> <li><span data-ttu-id="09228-180">La macchina virtuale originale è stata eliminata, pertanto non è possibile ricorrere al punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="09228-180">The original VM has been deleted and therefore, the recovery point cannot be taken.</span></span> <span data-ttu-id="09228-181">Per mantenere i dati di backup per una macchina virtuale eliminata, evitando gli errori di backup, interrompere la protezione della macchina virtuale e selezionare l'opzione di conservazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="09228-181">To keep the backup data for a deleted VM, but remove the backup errors: Unprotect the VM and choose the option to keep the data.</span></span> <span data-ttu-id="09228-182">Questa operazione interrompe il processo di backup pianificato e i messaggi di errore ricorrenti.</span><span class="sxs-lookup"><span data-stu-id="09228-182">This action stops the scheduled backup job and the recurring error messages.</span></span> |
| <span data-ttu-id="09228-183">Non è stato possibile installare l'estensione Servizi di ripristino di Azure nell'elemento selezionato. L'agente VM è un prerequisito dell'estensione Servizi di ripristino di Azure.</span><span class="sxs-lookup"><span data-stu-id="09228-183">Failed to install the Azure Recovery Services extension on the selected item - The VM agent is a prerequisite for the Azure Recovery Services Extension.</span></span> <span data-ttu-id="09228-184">Installare l'agente VM di Azure e riavviare l'operazione di registrazione</span><span class="sxs-lookup"><span data-stu-id="09228-184">Install the Azure VM agent and restart the registration operation</span></span> |<ol> <li><span data-ttu-id="09228-185">Controllare se l'agente di VM è stato installato correttamente.</span><span class="sxs-lookup"><span data-stu-id="09228-185">Check if the VM agent has been installed correctly.</span></span> <li><span data-ttu-id="09228-186">Assicurarsi che il flag sul file di configurazione della macchina virtuale sia impostato correttamente.</span><span class="sxs-lookup"><span data-stu-id="09228-186">Ensure the flag on the VM config is set correctly.</span></span></ol> <span data-ttu-id="09228-187">[Altre informazioni](#validating-vm-agent-installation) sull'installazione dell'agente VM e su come convalidarla.</span><span class="sxs-lookup"><span data-stu-id="09228-187">[Read more](#validating-vm-agent-installation) about installing the VM agent, and how to validate the VM agent installation.</span></span> |
| <span data-ttu-id="09228-188">L'installazione dell'estensione non è riuscita con un errore che indica che il servizio COM+ non può comunicare con Microsoft Distributed Transaction Coordinator</span><span class="sxs-lookup"><span data-stu-id="09228-188">Extension installation failed with the error "COM+ was unable to talk to the Microsoft Distributed Transaction Coordinator</span></span> |<span data-ttu-id="09228-189">Questo errore in genere indica che il servizio COM+ non è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="09228-189">This usually means that the COM+ service is not running.</span></span> <span data-ttu-id="09228-190">Per informazioni su come correggere l'errore, contattare il supporto tecnico Microsoft.</span><span class="sxs-lookup"><span data-stu-id="09228-190">Contact Microsoft support for help on fixing this issue.</span></span> |
| <span data-ttu-id="09228-191">L'operazione di snapshot non è riuscita con un errore dell'operazione del Servizio Copia Shadow del volume che indica che l'unità è bloccata da Crittografia unità BitLocker.</span><span class="sxs-lookup"><span data-stu-id="09228-191">Snapshot operation failed with the VSS operation error "This drive is locked by BitLocker Drive Encryption.</span></span> <span data-ttu-id="09228-192">È necessario sbloccare l'unità dal Pannello di controllo.</span><span class="sxs-lookup"><span data-stu-id="09228-192">You must unlock this drive from the Control Panel.</span></span> |<span data-ttu-id="09228-193">Disattivare BitLocker per tutte le unità della macchina virtuale e verificare se il problema relativo al Servizio Copia Shadow del volume è stato risolto</span><span class="sxs-lookup"><span data-stu-id="09228-193">Turn off BitLocker for all drives on the VM and observe if the VSS issue is resolved</span></span> |
| <span data-ttu-id="09228-194">Lo stato della macchina virtuale non consente i backup.</span><span class="sxs-lookup"><span data-stu-id="09228-194">VM is not in a state that allows backups.</span></span> |<ul><li><span data-ttu-id="09228-195">Verificare se la macchina virtuale ha uno stato temporaneo intermedio tra In esecuzione e Arresto.</span><span class="sxs-lookup"><span data-stu-id="09228-195">Check if VM is in a transient state between Running and Shut down.</span></span> <span data-ttu-id="09228-196">In questo caso, attendere che lo stato della macchina virtuale corrisponda a uno dei due stati indicati e riattivare il backup.</span><span class="sxs-lookup"><span data-stu-id="09228-196">If it is, wait for the VM state to be one of them and trigger backup again.</span></span> <li> <span data-ttu-id="09228-197">Se la macchina virtuale è Linux e usa il modulo del kernel [Security Enhanced Linux], è necessario escludere il percorso dell'agente Linux (_/var/lib/waagent_) dai criteri di sicurezza per assicurare l'installazione dell'estensione di backup.</span><span class="sxs-lookup"><span data-stu-id="09228-197">If the VM is a Linux VM and uses [Security Enhanced Linux] kernel module, you need to exclude the Linux Agent path(_/var/lib/waagent_) from security policy to make sure backup extension gets installed.</span></span>  |
| <span data-ttu-id="09228-198">La macchina virtuale di Azure non è stata trovata.</span><span class="sxs-lookup"><span data-stu-id="09228-198">Azure Virtual Machine Not Found.</span></span> |<span data-ttu-id="09228-199">Questo errore si verifica quando viene rilevata la macchina virtuale primaria ma i criteri di backup continuano a cercare una macchina virtuale per il backup.</span><span class="sxs-lookup"><span data-stu-id="09228-199">This happens when the primary VM is deleted but the backup policy continues to look for a VM to perform back up.</span></span> <span data-ttu-id="09228-200">Per correggere l'errore: </span><span class="sxs-lookup"><span data-stu-id="09228-200">To fix this error:</span></span> <ol><li><span data-ttu-id="09228-201">Ricreare la macchina virtuale con lo stesso nome e lo stesso nome del gruppo di risorse [nome del servizio cloud],</span><span class="sxs-lookup"><span data-stu-id="09228-201">Recreate the virtual machine with the same name and same resource group name [cloud service name],</span></span> <br><span data-ttu-id="09228-202">OPPURE</span><span class="sxs-lookup"><span data-stu-id="09228-202">(OR)</span></span> <li> <span data-ttu-id="09228-203">Disabilitare la protezione per questa macchina virtuale affinché i processi di backup non vengano creati.</span><span class="sxs-lookup"><span data-stu-id="09228-203">Disable protection for this VM so the backup jobs will not be created.</span></span> </ol> |
| <span data-ttu-id="09228-204">L'agente di macchine virtuali non è presente nella macchina virtuale. Installare i prerequisiti necessari, l'agente VM, quindi ripetere l'operazione.</span><span class="sxs-lookup"><span data-stu-id="09228-204">Virtual machine agent is not present on the virtual machine - Please install any prerequisite and the VM agent, and then restart the operation.</span></span> |<span data-ttu-id="09228-205">[Altre informazioni](#vm-agent) sull'installazione dell'agente di VM e su come convalidare l'installazione dell'agente di VM.</span><span class="sxs-lookup"><span data-stu-id="09228-205">[Read more](#vm-agent) about VM agent installation, and how to validate the VM agent installation.</span></span> |
| <span data-ttu-id="09228-206">L'operazione di snapshot non è riuscita a causa dello stato non corretto dei VSS writer</span><span class="sxs-lookup"><span data-stu-id="09228-206">Snapshot operation failed due to VSS Writers in bad state</span></span> |<span data-ttu-id="09228-207">È necessario riavviare i VSS (servizio Copia Shadow del volume) writer con stato non corretto.</span><span class="sxs-lookup"><span data-stu-id="09228-207">You need to restart VSS(Volume Shadow copy Service) writers that are in bad state.</span></span> <span data-ttu-id="09228-208">A questo scopo, da un prompt dei comandi con privilegi elevati eseguire _vssadmin list writers_.</span><span class="sxs-lookup"><span data-stu-id="09228-208">To achieve this, from an elevated command prompt, run _vssadmin list writers_.</span></span> <span data-ttu-id="09228-209">L'output contiene tutti i VSS writer con lo stato.</span><span class="sxs-lookup"><span data-stu-id="09228-209">Output contains all VSS writers and their state.</span></span> <span data-ttu-id="09228-210">Riavviare ogni VSS writer con stato diverso da "[1] Stable" usando i comandi seguenti da un prompt dei comandi con privilegi elevati:</span><span class="sxs-lookup"><span data-stu-id="09228-210">For every VSS writer whose state is not "[1] Stable", restart VSS writer by running following commands from an elevated command prompt:</span></span><br> <span data-ttu-id="09228-211">_net stop serviceName_</span><span class="sxs-lookup"><span data-stu-id="09228-211">_net stop serviceName_</span></span> <br> <span data-ttu-id="09228-212">_net start serviceName_</span><span class="sxs-lookup"><span data-stu-id="09228-212">_net start serviceName_</span></span>|
| <span data-ttu-id="09228-213">L'operazione di snapshot non è riuscita a causa di un errore di analisi della configurazione</span><span class="sxs-lookup"><span data-stu-id="09228-213">Snapshot operation failed due to a parsing failure of the configuration</span></span> |<span data-ttu-id="09228-214">Questo problema si verifica a causa della modifica delle autorizzazioni nella directory MachineKeys: _%systemdrive%\programdata\microsoft\crypto\rsa\machinekeys_</span><span class="sxs-lookup"><span data-stu-id="09228-214">This happens due to changed permissions on the MachineKeys directory: _%systemdrive%\programdata\microsoft\crypto\rsa\machinekeys_</span></span> <br><span data-ttu-id="09228-215">Eseguire il comando sotto e verificare che le autorizzazioni per la directory MachineKeys siano quelle predefinite:</span><span class="sxs-lookup"><span data-stu-id="09228-215">Please run below command and verify that permissions on MachineKeys directory are default-ones:</span></span><br><span data-ttu-id="09228-216">_icacls %systemdrive%\programdata\microsoft\crypto\rsa\machinekeys_</span><span class="sxs-lookup"><span data-stu-id="09228-216">_icacls %systemdrive%\programdata\microsoft\crypto\rsa\machinekeys_</span></span> <br><br> <span data-ttu-id="09228-217">Le autorizzazioni predefinite sono:</span><span class="sxs-lookup"><span data-stu-id="09228-217">Default permissions are:</span></span><br><span data-ttu-id="09228-218">Everyone:(R,W)</span><span class="sxs-lookup"><span data-stu-id="09228-218">Everyone:(R,W)</span></span> <br><span data-ttu-id="09228-219">BUILTIN\Administrators:(F)</span><span class="sxs-lookup"><span data-stu-id="09228-219">BUILTIN\Administrators:(F)</span></span><br><br><span data-ttu-id="09228-220">Se vengono visualizzate autorizzazioni per la directory MachineKeys diverse da quelle predefinite, seguire i passaggi sotto per correggere le autorizzazioni, eliminare il certificato e attivare il backup.</span><span class="sxs-lookup"><span data-stu-id="09228-220">If you see permissions on MachineKeys directory different than default, please follow below steps to correct permissions, delete the certificate and trigger the backup.</span></span><ol><li><span data-ttu-id="09228-221">Correggere le autorizzazioni per la directory MachineKeys.</span><span class="sxs-lookup"><span data-stu-id="09228-221">Fix permissions on MachineKeys directory.</span></span><br><span data-ttu-id="09228-222">Usando le impostazioni di sicurezza avanzate e le proprietà di sicurezza di Explorer per la directory, reimpostare le autorizzazioni sui valori predefiniti, rimuovere eventuali oggetti utente aggiuntivi (diversi da quelli predefiniti) dalla directory e assicurarsi che le autorizzazioni "Everyone" abbiano l'accesso speciale per:</span><span class="sxs-lookup"><span data-stu-id="09228-222">Using Explorer Security Properties and Advanced Security Settings on the directory, reset permissions back to the default values, remove any extra (than default) user object from the directory, and ensure that the ‘Everyone’ permissions had special access for:</span></span><br><span data-ttu-id="09228-223">-Elencare cartelle/leggere dati</span><span class="sxs-lookup"><span data-stu-id="09228-223">-List folder / read data</span></span> <br><span data-ttu-id="09228-224">-Leggere attributi</span><span class="sxs-lookup"><span data-stu-id="09228-224">-Read attributes</span></span> <br><span data-ttu-id="09228-225">-Leggere attributi estesi</span><span class="sxs-lookup"><span data-stu-id="09228-225">-Read extended attributes</span></span> <br><span data-ttu-id="09228-226">-Creare file/scrivere dati</span><span class="sxs-lookup"><span data-stu-id="09228-226">-Create files / write data</span></span> <br><span data-ttu-id="09228-227">-Creare cartelle/aggiungere dati</span><span class="sxs-lookup"><span data-stu-id="09228-227">-Create folders / append data</span></span><br><span data-ttu-id="09228-228">-Scrivere attributi</span><span class="sxs-lookup"><span data-stu-id="09228-228">-Write attributes</span></span><br><span data-ttu-id="09228-229">-Scrivere attributi estesi</span><span class="sxs-lookup"><span data-stu-id="09228-229">-Write extended attributes</span></span><br><span data-ttu-id="09228-230">-Leggere autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="09228-230">-Read permissions</span></span><br><br><li><span data-ttu-id="09228-231">Eliminare tutti i certificati con il campo "Rilasciato a" = "Windows Azure Service Management for Extensions" (Microsoft Azure Service Management per le estensioni) o "Windows Azure CRP Certificate Generator" (Generatore certificati CRP Microsoft Azure).</span><span class="sxs-lookup"><span data-stu-id="09228-231">Delete all certificates with field ‘Issued To’ = "Windows Azure Service Management for Extensions" or "Windows Azure CRP Certificate Generator”.</span></span><ul><li><span data-ttu-id="09228-232">[Aprire la console certificati (computer locale)](https://msdn.microsoft.com/library/ms788967(v=vs.110).aspx)</span><span class="sxs-lookup"><span data-stu-id="09228-232">[Open Certificates(Local computer) console](https://msdn.microsoft.com/library/ms788967(v=vs.110).aspx)</span></span><li><span data-ttu-id="09228-233">Eliminare tutti i certificati (in Personale -> Certificati) con il campo "Rilasciato a" = "Windows Azure Service Management for Extensions" (Microsoft Azure Service Management per le estensioni) o "Windows Azure CRP Certificate Generator" (Generatore certificati CRP Microsoft Azure).</span><span class="sxs-lookup"><span data-stu-id="09228-233">Delete all certificates (under Personal -> Certificates) with field ‘Issued To’ = "Windows Azure Service Management for Extensions" or "Windows Azure CRP Certificate Generator”.</span></span></ul><li><span data-ttu-id="09228-234">Attivare il backup della VM.</span><span class="sxs-lookup"><span data-stu-id="09228-234">Trigger VM backup.</span></span> </ol>|
| <span data-ttu-id="09228-235">Convalida non riuscita perché la macchina virtuale è crittografata con il solo BEK.</span><span class="sxs-lookup"><span data-stu-id="09228-235">Validation failed as virtual machine is encrypted with BEK alone.</span></span> <span data-ttu-id="09228-236">I backup possono essere abilitati solo per le macchine virtuali crittografate con BEK e KEK.</span><span class="sxs-lookup"><span data-stu-id="09228-236">Backups can be enabled only for virtual machines encrypted with both BEK and KEK.</span></span> |<span data-ttu-id="09228-237">La macchina virtuale deve essere crittografata mediante la chiave di crittografia BitLocker e la chiave di crittografia delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="09228-237">Virtual machine should be encrypted using both BitLocker Encryption Key and Key Encryption Key.</span></span> <span data-ttu-id="09228-238">In seguito, il backup deve essere abilitato.</span><span class="sxs-lookup"><span data-stu-id="09228-238">After that, backup should be enabled.</span></span> |
| <span data-ttu-id="09228-239">Il servizio backup di Azure non possiede autorizzazioni sufficienti nel Key Vault per il backup di macchine virtuali crittografate.</span><span class="sxs-lookup"><span data-stu-id="09228-239">Azure Backup Service does not have sufficient permissions to Key Vault for Backup of Encrypted Virtual Machines.</span></span> |<span data-ttu-id="09228-240">Il servizio di backup deve ricevere queste autorizzazioni in PowerShell tramite la procedura indicata nella sezione **Abilitazione del backup** della [Documentazione di PowerShell](backup-azure-vms-automation.md).</span><span class="sxs-lookup"><span data-stu-id="09228-240">Backup service should be provided these permissions in PowerShell using steps mentioned in **Enable Backup** section of [PowerShell documentation](backup-azure-vms-automation.md).</span></span> |
|<span data-ttu-id="09228-241">L'installazione dell'estensione dello snapshot non è riuscita con un errore che indica che il servizio COM+ non può comunicare con Microsoft Distributed Transaction Coordinator</span><span class="sxs-lookup"><span data-stu-id="09228-241">Installation of snapshot extension failed with error - COM+ was unable to talk to the Microsoft Distributed Transaction Coordinator</span></span> | <span data-ttu-id="09228-242">Provare ad avviare il servizio di Windows "Applicazione di sistema COM+" (da un prompt dei comandi con privilegi elevati - _net start COMSysApp_).</span><span class="sxs-lookup"><span data-stu-id="09228-242">Please try to start windows service "COM+ System Application" (from an elevated command prompt - _net start COMSysApp_).</span></span> <br><span data-ttu-id="09228-243">In caso di errore durante l'avvio, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="09228-243">If it fails while starting, please follow below steps:</span></span><ol><li> <span data-ttu-id="09228-244">Verificare che l'account di accesso del servizio "Distributed Transaction Coordinator" sia "Servizio di rete".</span><span class="sxs-lookup"><span data-stu-id="09228-244">Validate that the Logon account of service "Distributed Transaction Coordinator" is "Network Service".</span></span> <span data-ttu-id="09228-245">In caso contrario, modificarlo in "Servizio di rete", riavviare il servizio e quindi provare ad avviare il servizio "Applicazione di sistema COM+".</span><span class="sxs-lookup"><span data-stu-id="09228-245">If it is not, please change it to "Network Service", restart this service and then try to start service "COM+ System Application".'</span></span><li><span data-ttu-id="09228-246">Se il problema persiste, disinstallare/installare il servizio "Distributed Transaction Coordinator" seguendo questa procedura:</span><span class="sxs-lookup"><span data-stu-id="09228-246">If it still fails to start, uninstall/install service "Distributed Transaction Coordinator" by following below steps:</span></span><br> <span data-ttu-id="09228-247">- Arrestare il servizio MSDTC</span><span class="sxs-lookup"><span data-stu-id="09228-247">- Stop the MSDTC service</span></span><br> <span data-ttu-id="09228-248">- Aprire un prompt dei comandi (cmd)</span><span class="sxs-lookup"><span data-stu-id="09228-248">- Open a command prompt (cmd)</span></span> <br> <span data-ttu-id="09228-249">- Eseguire il comando "msdtc -uninstall"</span><span class="sxs-lookup"><span data-stu-id="09228-249">- Run command “msdtc -uninstall”</span></span> <br> <span data-ttu-id="09228-250">- Eseguire il comando "msdtc -install"</span><span class="sxs-lookup"><span data-stu-id="09228-250">- Run command “msdtc -install”</span></span> <br> <span data-ttu-id="09228-251">- Avviare il servizio MSDTC</span><span class="sxs-lookup"><span data-stu-id="09228-251">- Start the MSDTC service</span></span><li><span data-ttu-id="09228-252">Avviare il servizio di Windows "Applicazione di sistema COM+" e quindi attivare il backup dal portale.</span><span class="sxs-lookup"><span data-stu-id="09228-252">Start windows service "COM+ System Application" and after it is started, trigger backup from portal.</span></span></ol> |
|  <span data-ttu-id="09228-253">L'operazione di creazione snapshot non è riuscita a causa di un errore COM+</span><span class="sxs-lookup"><span data-stu-id="09228-253">Snapshot operation failed due to COM+ error</span></span> | <span data-ttu-id="09228-254">L'azione consigliata è di riavviare il servizio di Windows "Applicazione di sistema COM+" (da un prompt dei comandi con privilegi elevati - _net start COMSysApp_).</span><span class="sxs-lookup"><span data-stu-id="09228-254">The recommended action is to restart windows service "COM+ System Application" (from an elevated command prompt - _net start COMSysApp_).</span></span> <span data-ttu-id="09228-255">Se il problema persiste, riavviare la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09228-255">If the issue persists, restart the VM.</span></span> <span data-ttu-id="09228-256">Se anche il riavvio della macchina virtuale non consente di risolvere il problema, provare a [rimuovere l'estensione VMSnapshot](https://docs.microsoft.com/en-us/azure/backup/backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout#cause-3-the-backup-extension-fails-to-update-or-load) e ad attivare il backup manualmente.</span><span class="sxs-lookup"><span data-stu-id="09228-256">If restarting the VM doesn't help, try [removing the VMSnapshot Extension](https://docs.microsoft.com/en-us/azure/backup/backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout#cause-3-the-backup-extension-fails-to-update-or-load) and trigger the backup manually.</span></span> |
| <span data-ttu-id="09228-257">Impossibile bloccare uno o più punti di montaggio della macchina virtuale per creare uno snapshot coerente con il file system</span><span class="sxs-lookup"><span data-stu-id="09228-257">Failed to freeze one or more mount-points of the VM to take a file-system consistent snapshot</span></span> | <span data-ttu-id="09228-258">Seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="09228-258">Use the following steps:</span></span> <ol><li><span data-ttu-id="09228-259">Controllare lo stato del file system di tutti i dispositivi montati tramite il comando _'tune2fs'_.</span><span class="sxs-lookup"><span data-stu-id="09228-259">Check the file-system state of all mounted devices using _'tune2fs'_ command.</span></span><br> <span data-ttu-id="09228-260">Ad esempio: tune2fs -l /dev/sdb1 \\</span><span class="sxs-lookup"><span data-stu-id="09228-260">Eg: tune2fs -l /dev/sdb1 \\</span></span>| <span data-ttu-id="09228-261">grep "Filesystem state"</span><span class="sxs-lookup"><span data-stu-id="09228-261">grep "Filesystem state"</span></span> <li><span data-ttu-id="09228-262">Smontare i dispositivi il cui stato del file system non è pulito tramite il comando _'umount'_.</span><span class="sxs-lookup"><span data-stu-id="09228-262">Unmount the devices for which filesystem state is not clean using _'umount'_ command</span></span> <li> <span data-ttu-id="09228-263">Eseguire il controllo FileSystemConsistency su tali dispositivi tramite il comando _'fsck'_.</span><span class="sxs-lookup"><span data-stu-id="09228-263">Run FileSystemConsistency Check on these devices using _'fsck'_ command</span></span> <li> <span data-ttu-id="09228-264">Montare di nuovo i dispositivi e provare a eseguire il backup.</span><span class="sxs-lookup"><span data-stu-id="09228-264">Mount the devices again and try backup.</span></span></ol> |
| <span data-ttu-id="09228-265">L'operazione di snapshot non è riuscita a causa di un errore durante la creazione del canale di comunicazione di rete protetta</span><span class="sxs-lookup"><span data-stu-id="09228-265">Snapshot operation failed due to failure in creating secure network communication channel</span></span> | <ol><Li> <span data-ttu-id="09228-266">Aprire l'editor del Registro di sistema eseguendo regedit.exe con privilegi elevati.</span><span class="sxs-lookup"><span data-stu-id="09228-266">Open Registry Editor by running regedit.exe in an elevated mode.</span></span> <li> <span data-ttu-id="09228-267">Identificare tutte le versioni di .NetFramework presenti nel sistema,</span><span class="sxs-lookup"><span data-stu-id="09228-267">Identify all versions of .NetFramework present in system.</span></span> <span data-ttu-id="09228-268">disponibili nella gerarchia della chiave del Registro di sistema "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft"</span><span class="sxs-lookup"><span data-stu-id="09228-268">They are present under the hierarchy of registry key "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft"</span></span> <li> <span data-ttu-id="09228-269">Per ogni versione di .NetFramework presente nella chiave del Registro di sistema, aggiungere la seguente chiave:</span><span class="sxs-lookup"><span data-stu-id="09228-269">For each .NetFramework present in registry key, add following key:</span></span> <br> <span data-ttu-id="09228-270">"SchUseStrongCrypto"=dword:00000001</span><span class="sxs-lookup"><span data-stu-id="09228-270">"SchUseStrongCrypto"=dword:00000001</span></span> </ol>|
| <span data-ttu-id="09228-271">L'operazione di snapshot non è riuscita a causa di un errore durante l'installazione di Visual C++ Redistributable per Visual Studio 2012</span><span class="sxs-lookup"><span data-stu-id="09228-271">Snapshot operation failed due to failure in installation of Visual C++ Redistributable for Visual Studio 2012</span></span> | <span data-ttu-id="09228-272">Andare a C:\Packages\Plugins\Microsoft.Azure.RecoveryServices.VMSnapshot\agentVersion e installare vcredist2012_x64.</span><span class="sxs-lookup"><span data-stu-id="09228-272">Navigate to C:\Packages\Plugins\Microsoft.Azure.RecoveryServices.VMSnapshot\agentVersion and install vcredist2012_x64.</span></span> <span data-ttu-id="09228-273">Assicurarsi che il valore della chiave del Registro di sistema per consentire l'installazione del servizio sia impostato correttamente: il valore della chiave del Registro di sistema _HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Msiserver_ deve essere impostato su 3, non su 4.</span><span class="sxs-lookup"><span data-stu-id="09228-273">Make sure that registry key value for allowing this service installation is set to correct value i.e. value of registry key  _HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Msiserver_ is set to 3 and not 4.</span></span> <span data-ttu-id="09228-274">Se i problemi di installazione persistono, riavviare il servizio di installazione eseguendo _MSIEXEC /UNREGISTER_ e quindi _MSIEXEC /REGISTER_ da un prompt dei comandi con privilegi elevati.</span><span class="sxs-lookup"><span data-stu-id="09228-274">If you are still facing issues with installation, restart installation service by running _MSIEXEC /UNREGISTER_ followed by _MSIEXEC /REGISTER_ from an elevated command prompt.</span></span>  |


## <a name="jobs"></a><span data-ttu-id="09228-275">Processi</span><span class="sxs-lookup"><span data-stu-id="09228-275">Jobs</span></span>
| <span data-ttu-id="09228-276">Dettagli errore</span><span class="sxs-lookup"><span data-stu-id="09228-276">Error details</span></span> | <span data-ttu-id="09228-277">Soluzione alternativa</span><span class="sxs-lookup"><span data-stu-id="09228-277">Workaround</span></span> |
| --- | --- |
| <span data-ttu-id="09228-278">L'annullamento non è supportato per questo tipo di processo. Attendere il completamento del processo.</span><span class="sxs-lookup"><span data-stu-id="09228-278">Cancellation is not supported for this job type - Please wait until the job completes.</span></span> |<span data-ttu-id="09228-279">None</span><span class="sxs-lookup"><span data-stu-id="09228-279">None</span></span> |
| <span data-ttu-id="09228-280">Il processo non si trova in uno stato annullabile. Attendere il completamento del processo.</span><span class="sxs-lookup"><span data-stu-id="09228-280">The job is not in a cancelable state - Please wait until the job completes.</span></span> <br><span data-ttu-id="09228-281">OPPURE</span><span class="sxs-lookup"><span data-stu-id="09228-281">OR</span></span><br> <span data-ttu-id="09228-282">Il processo selezionato non si trova in uno stato annullabile. Attendere il completamento del processo.</span><span class="sxs-lookup"><span data-stu-id="09228-282">The selected job is not in a cancelable state - Please wait for the job to complete.</span></span> |<span data-ttu-id="09228-283">Con tutta probabilità, il processo è quasi completo.</span><span class="sxs-lookup"><span data-stu-id="09228-283">In all likelihood, the job is almost completed.</span></span> <span data-ttu-id="09228-284">Attendere che il processo venga completato.</span><span class="sxs-lookup"><span data-stu-id="09228-284">Please wait until the job is completed.</span></span>|
| <span data-ttu-id="09228-285">Non è possibile annullare il processo perché non è in corso. L'annullamento è supportato solo per i processi in corso.</span><span class="sxs-lookup"><span data-stu-id="09228-285">Cannot cancel the job because it is not in progress - Cancellation is only supported for jobs which are in progress.</span></span> <span data-ttu-id="09228-286">Tentare l'annullamento solo per un processo in corso.</span><span class="sxs-lookup"><span data-stu-id="09228-286">Please attempt cancel on an in progress job.</span></span> |<span data-ttu-id="09228-287">Questo errore è causato da uno stato temporaneo.</span><span class="sxs-lookup"><span data-stu-id="09228-287">This happens due to a transitory state.</span></span> <span data-ttu-id="09228-288">Attendere un minuto e ripetere l'operazione di annullamento.</span><span class="sxs-lookup"><span data-stu-id="09228-288">Wait for a minute and retry the cancel operation.</span></span> |
| <span data-ttu-id="09228-289">Non è stato possibile annullare il processo. Attendere il completamento del processo.</span><span class="sxs-lookup"><span data-stu-id="09228-289">Failed to cancel the Job - Please wait till job finishes.</span></span> |<span data-ttu-id="09228-290">None</span><span class="sxs-lookup"><span data-stu-id="09228-290">None</span></span> |

## <a name="restore"></a><span data-ttu-id="09228-291">Ripristino</span><span class="sxs-lookup"><span data-stu-id="09228-291">Restore</span></span>
| <span data-ttu-id="09228-292">Dettagli errore</span><span class="sxs-lookup"><span data-stu-id="09228-292">Error details</span></span> | <span data-ttu-id="09228-293">Soluzione alternativa</span><span class="sxs-lookup"><span data-stu-id="09228-293">Workaround</span></span> |
| --- | --- |
| <span data-ttu-id="09228-294">Ripristino non riuscito con errore interno del cloud</span><span class="sxs-lookup"><span data-stu-id="09228-294">Restore failed with Cloud Internal error</span></span> |<ol><li><span data-ttu-id="09228-295">Il servizio cloud in cui si sta tentando di eseguire il ripristino è configurato con le impostazioni DNS.</span><span class="sxs-lookup"><span data-stu-id="09228-295">Cloud service to which you are trying to restore is configured with DNS settings.</span></span> <span data-ttu-id="09228-296">Verificare </span><span class="sxs-lookup"><span data-stu-id="09228-296">You can check</span></span> <br><span data-ttu-id="09228-297">$deployment = Get-AzureDeployment -ServiceName "ServiceName" -Slot "Production"     Get-AzureDns -DnsSettings $deployment.DnsSettings</span><span class="sxs-lookup"><span data-stu-id="09228-297">$deployment = Get-AzureDeployment -ServiceName "ServiceName" -Slot "Production"     Get-AzureDns -DnsSettings $deployment.DnsSettings</span></span><br><span data-ttu-id="09228-298">Se è presente un indirizzo configurato, significa che le impostazioni DNS sono configurate.</span><span class="sxs-lookup"><span data-stu-id="09228-298">If there is Address configured, this means that DNS settings are configured.</span></span><br> <li><span data-ttu-id="09228-299">Il servizio cloud che si sta tentando di ripristinare è configurato con ReservedIP e le macchine virtuali esistenti nel servizio cloud sono in stato di arresto.</span><span class="sxs-lookup"><span data-stu-id="09228-299">Cloud service to which to you are trying to restore is configured with ReservedIP and existing VMs in cloud service are in stopped state.</span></span><br><span data-ttu-id="09228-300">È possibile controllare che il servizio cloud disponga di IP riservato tramite i cmdlet di PowerShell seguenti:</span><span class="sxs-lookup"><span data-stu-id="09228-300">You can check a cloud service has reserved IP by using following powershell cmdlets:</span></span><br><span data-ttu-id="09228-301">$deployment = Get-AzureDeployment -ServiceName "servicename" -Slot "Production" $dep.ReservedIPName</span><span class="sxs-lookup"><span data-stu-id="09228-301">$deployment = Get-AzureDeployment -ServiceName "servicename" -Slot "Production" $dep.ReservedIPName</span></span> <br><li><span data-ttu-id="09228-302">Si sta tentando di ripristinare una macchina virtuale con le configurazioni di rete speciali seguenti nello stesso servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="09228-302">You are trying to restore a virtual machine with following special network configurations in to same cloud service.</span></span> <br><span data-ttu-id="09228-303">- Macchine virtuali con configurazione del servizio di bilanciamento del carico (interno ed esterno)</span><span class="sxs-lookup"><span data-stu-id="09228-303">- Virtual machines under load balancer configuration (Internal and external)</span></span><br><span data-ttu-id="09228-304">- Macchine virtuali con più indirizzi IP riservati</span><span class="sxs-lookup"><span data-stu-id="09228-304">- Virtual machines with multiple Reserved IPs</span></span><br><span data-ttu-id="09228-305">- Macchine virtuali con più schede di rete</span><span class="sxs-lookup"><span data-stu-id="09228-305">- Virtual machines with multiple NICs</span></span><br><span data-ttu-id="09228-306">Selezionare un nuovo servizio cloud nell'interfaccia utente o consultare le [considerazioni sul ripristino](backup-azure-arm-restore-vms.md#restoring-vms-with-special-network-configurations) per le macchine virtuali con configurazioni di rete speciali.</span><span class="sxs-lookup"><span data-stu-id="09228-306">Please select a new cloud service in the UI or please refer to [restore considerations](backup-azure-arm-restore-vms.md#restoring-vms-with-special-network-configurations) for VMs with special network configurations.</span></span></ol> |
| <span data-ttu-id="09228-307">Il nome DNS selezionato è già in uso. Specificare un nome DNS diverso e riprovare.</span><span class="sxs-lookup"><span data-stu-id="09228-307">The selected DNS name is already taken - Please specify a different DNS name and try again.</span></span> |<span data-ttu-id="09228-308">Il nome DNS fa riferimento al nome del servizio cloud, che in genere termina con .cloudapp.net.</span><span class="sxs-lookup"><span data-stu-id="09228-308">The DNS name here refers to the cloud service name (usually ending with .cloudapp.net).</span></span> <span data-ttu-id="09228-309">Questo nome deve essere univoco.</span><span class="sxs-lookup"><span data-stu-id="09228-309">This needs to be unique.</span></span> <span data-ttu-id="09228-310">Se si verifica questo errore, è necessario scegliere un altro nome di macchina virtuale durante il ripristino.</span><span class="sxs-lookup"><span data-stu-id="09228-310">If you encounter this error, you need to choose a different VM name during restore.</span></span> <br><br> <span data-ttu-id="09228-311">Questo errore viene visualizzato solo dagli utenti del portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="09228-311">This error is shown only to users of the Azure portal.</span></span> <span data-ttu-id="09228-312">L'operazione di ripristino tramite PowerShell riuscirà perché ripristina solo i dischi e non crea la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="09228-312">The restore operation through PowerShell will succeed because it only restores the disks and doesn't create the VM.</span></span> <span data-ttu-id="09228-313">L'errore viene restituito quando la macchina virtuale viene creata in modo esplicito dall'utente dopo l'operazione di ripristino dei dischi.</span><span class="sxs-lookup"><span data-stu-id="09228-313">The error will be faced when the VM is explicitly created by you after the disk restore operation.</span></span> |
| <span data-ttu-id="09228-314">La configurazione di rete virtuale specificata non è corretta. Specificare un'altra configurazione di rete virtuale e riprovare.</span><span class="sxs-lookup"><span data-stu-id="09228-314">The specified virtual network configuration is not correct - Please specify a different virtual network configuration and try again.</span></span> |<span data-ttu-id="09228-315">None</span><span class="sxs-lookup"><span data-stu-id="09228-315">None</span></span> |
| <span data-ttu-id="09228-316">Il servizio cloud specificato usa un indirizzo IP riservato che non corrisponde alla configurazione della macchina virtuale in fase di ripristino. Specificare un altro servizio cloud che non usa un indirizzo IP riservato o scegliere un altro punto di ripristino da cui eseguire l'operazione.</span><span class="sxs-lookup"><span data-stu-id="09228-316">The specified cloud service is using a reserved IP, which doesn't match with the configuration of the virtual machine being restored - Please specify a different cloud service, which is not using reserved IP, or choose another recovery point to restore from.</span></span> |<span data-ttu-id="09228-317">None</span><span class="sxs-lookup"><span data-stu-id="09228-317">None</span></span> |
| <span data-ttu-id="09228-318">Il servizio cloud ha raggiunto il limite consentito per il numero di endpoint di input. Ripetere l'operazione specificando un altro servizio cloud o usando un endpoint esistente.</span><span class="sxs-lookup"><span data-stu-id="09228-318">Cloud service has reached limit on number of input end points - Retry the operation by specifying a different cloud service or by using an existing endpoint.</span></span> |<span data-ttu-id="09228-319">None</span><span class="sxs-lookup"><span data-stu-id="09228-319">None</span></span> |
| <span data-ttu-id="09228-320">L'insieme di credenziali di backup e l'account di archiviazione di destinazione si trovano in due aree diverse. Assicurarsi che l'account di archiviazione specificato nell'operazione di ripristino si trovi nella stessa area di Azure dell'insieme di credenziali di backup.</span><span class="sxs-lookup"><span data-stu-id="09228-320">Backup vault and target storage account are in two different regions - Ensure that the storage account specified in restore operation is in the same Azure region as the backup vault.</span></span> |<span data-ttu-id="09228-321">None</span><span class="sxs-lookup"><span data-stu-id="09228-321">None</span></span> |
| <span data-ttu-id="09228-322">L'account di archiviazione specificato per l'operazione di ripristino non è supportato. Sono supportati solo gli account di archiviazione dei piani Basic/Standard con le impostazioni di replica con ridondanza locale o ridondanza geografica.</span><span class="sxs-lookup"><span data-stu-id="09228-322">Storage Account specified for the restore operation is not supported - Only Basic/Standard storage accounts with locally redundant or geo redundant replication settings are supported.</span></span> <span data-ttu-id="09228-323">Selezionare un account di archiviazione supportato</span><span class="sxs-lookup"><span data-stu-id="09228-323">Please select a supported storage account</span></span> |<span data-ttu-id="09228-324">None</span><span class="sxs-lookup"><span data-stu-id="09228-324">None</span></span> |
| <span data-ttu-id="09228-325">Il tipo di account di archiviazione specificato per l'operazione di ripristino non è online. Assicurarsi che l'account di archiviazione specificato nell'operazione di ripristino sia online</span><span class="sxs-lookup"><span data-stu-id="09228-325">Type of Storage Account specified for restore operation is not online - Make sure that the storage account specified in restore operation is online</span></span> |<span data-ttu-id="09228-326">Questo problema può essere provocato da un errore temporaneo nel servizio di archiviazione di Azure o da un'interruzione del servizio.</span><span class="sxs-lookup"><span data-stu-id="09228-326">This might happen because of a transient error in Azure Storage or due to an outage.</span></span> <span data-ttu-id="09228-327">Scegliere un altro account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="09228-327">Please choose another storage account.</span></span> |
| <span data-ttu-id="09228-328">È stata raggiunta la quota del gruppo di risorse. Eliminare alcuni gruppi di risorse dal portale di Azure o contattare il supporto tecnico di Azure per richiedere un aumento dei limiti.</span><span class="sxs-lookup"><span data-stu-id="09228-328">Resource Group Quota has been reached - Please delete some resource groups from Azure portal or contact Azure support to increase the limits.</span></span> |<span data-ttu-id="09228-329">None</span><span class="sxs-lookup"><span data-stu-id="09228-329">None</span></span> |
| <span data-ttu-id="09228-330">La subnet selezionata non esiste. Selezionare una subnet esistente</span><span class="sxs-lookup"><span data-stu-id="09228-330">Selected subnet does not exist - Please select a subnet which exists</span></span> |<span data-ttu-id="09228-331">Nessuno</span><span class="sxs-lookup"><span data-stu-id="09228-331">None</span></span> |
| <span data-ttu-id="09228-332">Il servizio Backup non ha l'autorizzazione per accedere alle risorse nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="09228-332">Backup Service does not have authorization to access resources in your subscription.</span></span> |<span data-ttu-id="09228-333">Per risolvere questo problema, ripristinare prima di tutto i dischi seguendo la procedura illustrata nella sezione **Ripristino dei dischi sottoposti a backup** in [Scelta di una configurazione di ripristino per la macchina virtuale](backup-azure-arm-restore-vms.md#choosing-a-vm-restore-configuration).</span><span class="sxs-lookup"><span data-stu-id="09228-333">To resolve this, first Restore Disks using steps mentioned in section **Restore backed up disks** in [Choosing VM restore configuration](backup-azure-arm-restore-vms.md#choosing-a-vm-restore-configuration).</span></span> <span data-ttu-id="09228-334">Seguire quindi la procedura di PowerShell illustrata in [Creare una macchina virtuale da dischi ripristinati](backup-azure-vms-automation.md#create-a-vm-from-restored-disks) per creare una macchina virtuale completa dai dischi ripristinati.</span><span class="sxs-lookup"><span data-stu-id="09228-334">After that, use PowerShell steps mentioned in [Create a VM from restored disks](backup-azure-vms-automation.md#create-a-vm-from-restored-disks) to create full VM from restored disks.</span></span> |

## <a name="backup-or-restore-taking-time"></a><span data-ttu-id="09228-335">Il backup o il ripristino richiede del tempo</span><span class="sxs-lookup"><span data-stu-id="09228-335">Backup or Restore taking time</span></span>
<span data-ttu-id="09228-336">In caso di eccessivo allungamento del tempo di backup (> 12 ore) o di ripristino (> 6 ore):</span><span class="sxs-lookup"><span data-stu-id="09228-336">If you see your backup(>12 hours) or restore taking time(>6 hours):</span></span>
* <span data-ttu-id="09228-337">Comprendere i [fattori che incidono sul tempo di backup](backup-azure-vms-introduction.md#total-vm-backup-time) e i [fattori che incidono sul tempo di ripristino](backup-azure-vms-introduction.md#total-restore-time).</span><span class="sxs-lookup"><span data-stu-id="09228-337">Understand [factors contributing to backup time](backup-azure-vms-introduction.md#total-vm-backup-time) and [factors contributing to restore time](backup-azure-vms-introduction.md#total-restore-time).</span></span>
* <span data-ttu-id="09228-338">Assicurarsi di seguire le [Procedure consigliate per il backup](backup-azure-vms-introduction.md#best-practices).</span><span class="sxs-lookup"><span data-stu-id="09228-338">Make sure that you follow [Backup best practices](backup-azure-vms-introduction.md#best-practices).</span></span> 

## <a name="vm-agent"></a><span data-ttu-id="09228-339">Agente di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="09228-339">VM Agent</span></span>
### <a name="setting-up-the-vm-agent"></a><span data-ttu-id="09228-340">Configurazione dell'agente di VM</span><span class="sxs-lookup"><span data-stu-id="09228-340">Setting up the VM Agent</span></span>
<span data-ttu-id="09228-341">L'agente di VM è in genere già presente nelle VM create dalla raccolta di Azure.</span><span class="sxs-lookup"><span data-stu-id="09228-341">Typically, the VM Agent is already present in VMs that are created from the Azure gallery.</span></span> <span data-ttu-id="09228-342">Nelle macchine virtuali di cui viene eseguita la migrazione da data center locali non è installato l'agente di VM.</span><span class="sxs-lookup"><span data-stu-id="09228-342">However, virtual machines that are migrated from on-premises datacenters would not have the VM Agent installed.</span></span> <span data-ttu-id="09228-343">Per queste VM è necessario installare esplicitamente l'agente di VM.</span><span class="sxs-lookup"><span data-stu-id="09228-343">For such VMs, the VM Agent needs to be installed explicitly.</span></span>

<span data-ttu-id="09228-344">Per VM di Windows:</span><span class="sxs-lookup"><span data-stu-id="09228-344">For Windows VMs:</span></span>

* <span data-ttu-id="09228-345">Scaricare e installare il file [MSI per l'agente](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="09228-345">Download and install the [agent MSI](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span></span> <span data-ttu-id="09228-346">Per completare l'installazione sono necessari privilegi di amministratore.</span><span class="sxs-lookup"><span data-stu-id="09228-346">You need Administrator privileges to complete the installation.</span></span>
* <span data-ttu-id="09228-347">Per le macchine virtuali classiche, [aggiornare le proprietà della macchina virtuale](http://blogs.msdn.com/b/mast/archive/2014/04/08/install-the-vm-agent-on-an-existing-azure-vm.aspx) per indicare che l'agente è stato installato.</span><span class="sxs-lookup"><span data-stu-id="09228-347">For Classic virtual machines, [Update the VM property](http://blogs.msdn.com/b/mast/archive/2014/04/08/install-the-vm-agent-on-an-existing-azure-vm.aspx) to indicate that the agent is installed.</span></span> <span data-ttu-id="09228-348">Questo passaggio non è necessario per le macchine virtuali di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="09228-348">This step is not required for Resource Manager virtual machines.</span></span>

<span data-ttu-id="09228-349">Per le macchine virtuali Linux:</span><span class="sxs-lookup"><span data-stu-id="09228-349">For Linux VMs:</span></span>

* <span data-ttu-id="09228-350">Installare l'archivio di distribuzione più recente.</span><span class="sxs-lookup"><span data-stu-id="09228-350">Install latest from distribution repository.</span></span> <span data-ttu-id="09228-351">È **fortemente consigliato** installare l'agente solo tramite l'archivio di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="09228-351">We **strongly recommend** installing agent only through distribution repository.</span></span> <span data-ttu-id="09228-352">Per informazioni dettagliate sul nome del pacchetto, vedere [archivio agente Linux](https://github.com/Azure/WALinuxAgent)</span><span class="sxs-lookup"><span data-stu-id="09228-352">For details on package name, please refer to [Linux agent repository](https://github.com/Azure/WALinuxAgent)</span></span> 
* <span data-ttu-id="09228-353">Per le macchine virtuali classiche, [aggiornare le proprietà della macchina virtuale](http://blogs.msdn.com/b/mast/archive/2014/04/08/install-the-vm-agent-on-an-existing-azure-vm.aspx) per indicare che l'agente è stato installato.</span><span class="sxs-lookup"><span data-stu-id="09228-353">For classic VMs, [Update the VM property](http://blogs.msdn.com/b/mast/archive/2014/04/08/install-the-vm-agent-on-an-existing-azure-vm.aspx) to indicate that the agent is installed.</span></span> <span data-ttu-id="09228-354">Questo passaggio non è necessario per le macchine virtuali di Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="09228-354">This step is not required for Resource Manager virtual machines.</span></span>

### <a name="updating-the-vm-agent"></a><span data-ttu-id="09228-355">Aggiornamento dell'agente di VM</span><span class="sxs-lookup"><span data-stu-id="09228-355">Updating the VM Agent</span></span>
<span data-ttu-id="09228-356">Per VM di Windows:</span><span class="sxs-lookup"><span data-stu-id="09228-356">For Windows VMs:</span></span>

* <span data-ttu-id="09228-357">L'aggiornamento dell'agente di VM è semplice quanto la reinstallazione dei [file binari dell'agente di VM](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span><span class="sxs-lookup"><span data-stu-id="09228-357">Updating the VM Agent is as simple as reinstalling the [VM Agent binaries](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span></span> <span data-ttu-id="09228-358">È tuttavia necessario assicurarsi che non siano in esecuzione operazioni di backup durante l'aggiornamento dell'agente di VM.</span><span class="sxs-lookup"><span data-stu-id="09228-358">However, you need to ensure that no backup operation is running while the VM Agent is being updated.</span></span>

<span data-ttu-id="09228-359">Per le macchine virtuali Linux:</span><span class="sxs-lookup"><span data-stu-id="09228-359">For Linux VMs:</span></span>

* <span data-ttu-id="09228-360">Seguire le istruzioni in [Come aggiornare l'agente Linux di Azure su una macchina virtuale per la versione più recente da GitHub](../virtual-machines/linux/update-agent.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="09228-360">Follow the instructions on [Updating Linux VM Agent](../virtual-machines/linux/update-agent.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>
<span data-ttu-id="09228-361">È **fortemente consigliato** aggiornare l'agente solo tramite il repository di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="09228-361">We **strongly recommend** updating agent only through distribution repository.</span></span> <span data-ttu-id="09228-362">Non è consigliabile scaricare il codice dell'agente direttamente da GitHub e aggiornarlo.</span><span class="sxs-lookup"><span data-stu-id="09228-362">We do not recommend downloading the agent code from directly github and updating it.</span></span> <span data-ttu-id="09228-363">Se l'agente più recente non è disponibile per la distribuzione, contattare il supporto per la distribuzione per istruzioni su come installare l'agente più recente.</span><span class="sxs-lookup"><span data-stu-id="09228-363">If latest agent is not available for your distribution, please reach out to distribution support for instructions on how to install latest agent.</span></span> <span data-ttu-id="09228-364">È possibile trovare le informazioni più recenti sull'[agente Linux di Microsoft Azure](https://github.com/Azure/WALinuxAgent/releases) nel repository GitHub.</span><span class="sxs-lookup"><span data-stu-id="09228-364">You can check latest [Windows Azure Linux agent](https://github.com/Azure/WALinuxAgent/releases) information in github repository.</span></span>

### <a name="validating-vm-agent-installation"></a><span data-ttu-id="09228-365">Convalida dell'installazione dell'agente di VM</span><span class="sxs-lookup"><span data-stu-id="09228-365">Validating VM Agent installation</span></span>
<span data-ttu-id="09228-366">Come controllare la versione dell'agente di VM nelle macchine virtuali di Windows:</span><span class="sxs-lookup"><span data-stu-id="09228-366">How to check for the VM Agent version on Windows VMs:</span></span>

1. <span data-ttu-id="09228-367">Accedere alla macchina virtuale di Azure e passare alla cartella *C:\WindowsAzure\Packages*.</span><span class="sxs-lookup"><span data-stu-id="09228-367">Log on to the Azure virtual machine and navigate to the folder *C:\WindowsAzure\Packages*.</span></span> <span data-ttu-id="09228-368">che dovrebbe includere il file WaAppAgent.exe.</span><span class="sxs-lookup"><span data-stu-id="09228-368">You should find the WaAppAgent.exe file present.</span></span>
2. <span data-ttu-id="09228-369">Fare clic con il pulsante destro del mouse sul file, scegliere **Proprietà** e quindi selezionare la scheda **Dettagli**. Il campo Versione prodotto deve essere 2.6.1198.718 o superiore.</span><span class="sxs-lookup"><span data-stu-id="09228-369">Right-click the file, go to **Properties**, and then select the **Details** tab. The Product Version field should be 2.6.1198.718 or higher</span></span>

## <a name="troubleshoot-vm-snapshot-issues"></a><span data-ttu-id="09228-370">Risoluzione dei problemi relativi allo snapshot della macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="09228-370">Troubleshoot VM Snapshot Issues</span></span>
<span data-ttu-id="09228-371">Il backup delle macchine virtuali si basa sull'esecuzione dei comandi di snapshot sull'archiviazione sottostante.</span><span class="sxs-lookup"><span data-stu-id="09228-371">VM backup relies on issuing snapshot commands to underlying storage.</span></span> <span data-ttu-id="09228-372">Non disporre dell'accesso all'archiviazione o il ritardo nell'esecuzione dell'attività dello snapshot può causare il fallimento del processo di backup.</span><span class="sxs-lookup"><span data-stu-id="09228-372">Not having access to storage, or delays in a snapshot task execution can cause the backup job to fail.</span></span> <span data-ttu-id="09228-373">I seguenti elementi possono causare il fallimento dell'attività di backup.</span><span class="sxs-lookup"><span data-stu-id="09228-373">The following can cause snapshot task failure.</span></span>

1. <span data-ttu-id="09228-374">L'accesso alla rete per l'archiviazione è bloccato mediante NSG</span><span class="sxs-lookup"><span data-stu-id="09228-374">Network access to Storage is blocked using NSG</span></span><br>
    <span data-ttu-id="09228-375">Vedere altre informazioni su come [abilitare l'accesso alla rete](backup-azure-vms-prepare.md#network-connectivity) per l'archiviazione tramite gli elenchi di indirizzi IP consentiti o il server proxy.</span><span class="sxs-lookup"><span data-stu-id="09228-375">Learn more on how to [enable network access](backup-azure-vms-prepare.md#network-connectivity) to Storage using either WhiteListing of IPs or through proxy server.</span></span>
2. <span data-ttu-id="09228-376">Le VM con il backup di SQL Server configurato possono causare ritardi nelle attività di snapshot </span><span class="sxs-lookup"><span data-stu-id="09228-376">VMs with Sql Server backup configured can cause snapshot task delay</span></span> <br>
   <span data-ttu-id="09228-377">Per impostazione predefinita, il backup delle VM genera un backup VSS completo sulle VM Windows.</span><span class="sxs-lookup"><span data-stu-id="09228-377">By default VM backup issues VSS Full backup on Windows VMs.</span></span> <span data-ttu-id="09228-378">In VM che eseguono SQL Server e se è configurato il backup di SQL Server, potrebbero verificarsi ritardi nell'esecuzione di snapshot.</span><span class="sxs-lookup"><span data-stu-id="09228-378">On VMs that are running Sql Servers and if Sql Server backup is configured, this might cause delay in snapshot execution.</span></span> <span data-ttu-id="09228-379">Impostare la seguente chiave del Registro di sistema se si verificano errori di backup a causa di problemi di snapshot.</span><span class="sxs-lookup"><span data-stu-id="09228-379">Please set following registry key if you are experiencing backup failures because of snapshot issues.</span></span>

   ```
   [HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\BCDRAGENT]
   "USEVSSCOPYBACKUP"="TRUE"
   ```
3. <span data-ttu-id="09228-380">Stato della VM segnalato in modo non corretto perché la VM viene arrestata in RDP.</span><span class="sxs-lookup"><span data-stu-id="09228-380">VM status reported incorrectly because VM is shut down in RDP.</span></span>  <br>
   <span data-ttu-id="09228-381">Se la macchina virtuale si è fermata in RDP, verificare nel portale che lo stato della VM venga indicato correttamente.</span><span class="sxs-lookup"><span data-stu-id="09228-381">If you have Shut down the virtual machine in RDP, please check back in the portal that VM status is reflected correctly.</span></span> <span data-ttu-id="09228-382">In caso contrario, arrestare la VM nel portale usando l'opzione ''Arresta'' nel dashboard della VM.</span><span class="sxs-lookup"><span data-stu-id="09228-382">If not, please shut down the VM in portal using 'Shutdown' option in VM dashboard.</span></span>
4. <span data-ttu-id="09228-383">Se più di quattro VM condividono lo stesso servizio cloud, configurare criteri di backup multipli per organizzare i tempi di backup in modo che non vengano eseguiti più di quattro backup delle VM allo stesso tempo.</span><span class="sxs-lookup"><span data-stu-id="09228-383">If more than four VMs share the same cloud service, configure multiple backup policies to stage the backup times so no more than four VM backups are started at the same time.</span></span> <span data-ttu-id="09228-384">Provare a distribuire i tempi di avvio del backup ogni ora tra i criteri.</span><span class="sxs-lookup"><span data-stu-id="09228-384">Try to spread the backup start times an hour apart between policies.</span></span>
5. <span data-ttu-id="09228-385">La VM è in esecuzione con un uso elevato di CPU/memoria.</span><span class="sxs-lookup"><span data-stu-id="09228-385">VM is running at High CPU/Memory.</span></span><br>
   <span data-ttu-id="09228-386">Se la macchina virtuale è in esecuzione con un uso elevato della CPU (&gt; 90%) o della memoria, l'attività di snapshot viene messa in coda, ritardata e infine messa in timeout. In tali situazioni, provare a eseguire un backup su richiesta.</span><span class="sxs-lookup"><span data-stu-id="09228-386">If the virtual machine is running at High CPU usage(>90%) or memory, snapshot task is queued, delayed and will eventually gets timed-out. Try on-demand backup in such situations.</span></span>

<br>

## <a name="networking"></a><span data-ttu-id="09228-387">Rete</span><span class="sxs-lookup"><span data-stu-id="09228-387">Networking</span></span>
<span data-ttu-id="09228-388">Analogamente a tutte le estensioni, per il funzionamento delle estensioni di Backup è necessario l'accesso a Internet pubblico.</span><span class="sxs-lookup"><span data-stu-id="09228-388">Like all extensions, Backup extension need access to the public internet to work.</span></span> <span data-ttu-id="09228-389">L'assenza di accesso a Internet pubblico può manifestarsi in diversi modi:</span><span class="sxs-lookup"><span data-stu-id="09228-389">Not having access to the public internet can manifest itself in various ways:</span></span>

* <span data-ttu-id="09228-390">Possono verificarsi errori di installazione dell'estensione.</span><span class="sxs-lookup"><span data-stu-id="09228-390">The extension installation can fail</span></span>
* <span data-ttu-id="09228-391">Possono verificarsi errori delle operazioni di backup, ad esempio lo snapshot del disco.</span><span class="sxs-lookup"><span data-stu-id="09228-391">The backup operations (like disk snapshot) can fail</span></span>
* <span data-ttu-id="09228-392">Possono verificarsi errori di visualizzazione dello stato dell'operazione di backup.</span><span class="sxs-lookup"><span data-stu-id="09228-392">Displaying the status of the backup operation can fail</span></span>

<span data-ttu-id="09228-393">La necessità di risolvere gli indirizzi Internet pubblici è stata illustrata [qui](http://blogs.msdn.com/b/mast/archive/2014/06/18/azure-vm-provisioning-stuck-on-quot-installing-extensions-on-virtual-machine-quot.aspx).</span><span class="sxs-lookup"><span data-stu-id="09228-393">The need for resolving public internet addresses has been articulated [here](http://blogs.msdn.com/b/mast/archive/2014/06/18/azure-vm-provisioning-stuck-on-quot-installing-extensions-on-virtual-machine-quot.aspx).</span></span> <span data-ttu-id="09228-394">È necessario controllare le configurazioni DNS per la rete virtuale e assicurarsi che sia possibile risolvere gli URI di Azure.</span><span class="sxs-lookup"><span data-stu-id="09228-394">You need to check the DNS configurations for the VNET and ensure that the Azure URIs can be resolved.</span></span>

<span data-ttu-id="09228-395">Dopo la corretta risoluzione dei nomi, sarà necessario fornire anche l'accesso agli IP di Azure.</span><span class="sxs-lookup"><span data-stu-id="09228-395">Once the name resolution is done correctly, access to the Azure IPs also needs to be provided.</span></span> <span data-ttu-id="09228-396">Per sbloccare l'accesso all'infrastruttura di Azure, eseguire la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="09228-396">To unblock access to the Azure infrastructure, follow one of these steps:</span></span>

1. <span data-ttu-id="09228-397">Aggiungere all'elenco elementi consentiti gli intervalli IP dei data center di Azure.</span><span class="sxs-lookup"><span data-stu-id="09228-397">WhiteList the Azure datacenter IP ranges.</span></span>
   * <span data-ttu-id="09228-398">Ottenere l'elenco di [IP dei data center di Azure](https://www.microsoft.com/download/details.aspx?id=41653) da aggiungere all'elenco di IP consentiti.</span><span class="sxs-lookup"><span data-stu-id="09228-398">Get the list of [Azure datacenter IPs](https://www.microsoft.com/download/details.aspx?id=41653) to be whitelisted.</span></span>
   * <span data-ttu-id="09228-399">Sbloccare gli IP mediante il cmdlet [New-NetRoute](https://technet.microsoft.com/library/hh826148.aspx) .</span><span class="sxs-lookup"><span data-stu-id="09228-399">Unblock the IPs using the [New-NetRoute](https://technet.microsoft.com/library/hh826148.aspx) cmdlet.</span></span> <span data-ttu-id="09228-400">Eseguire questo cmdlet all’interno della macchina virtuale di Azure, in una finestra di PowerShell con privilegi elevati, eseguita come amministratore.</span><span class="sxs-lookup"><span data-stu-id="09228-400">Run this cmdlet within the Azure VM, in an elevated PowerShell window (run as Administrator).</span></span>
   * <span data-ttu-id="09228-401">Aggiungere regole al gruppo di sicurezza di rete (se esistente) per consentire l'accesso agli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="09228-401">Add rules to the NSG (if you have one in place) to allow access to the IPs.</span></span>
2. <span data-ttu-id="09228-402">Creare un percorso per il flusso del traffico HTTP</span><span class="sxs-lookup"><span data-stu-id="09228-402">Create a path for HTTP traffic to flow</span></span>
   * <span data-ttu-id="09228-403">Se si dispone di alcune limitazioni di rete (un gruppo di sicurezza di rete, ad esempio) distribuire un server proxy HTTP per indirizzare il traffico.</span><span class="sxs-lookup"><span data-stu-id="09228-403">If you have some network restriction in place (a Network Security Group, for example) deploy an HTTP proxy server to route the traffic.</span></span> <span data-ttu-id="09228-404">I passaggi per distribuire un server proxy HTTP sono reperibili [qui](backup-azure-vms-prepare.md#network-connectivity).</span><span class="sxs-lookup"><span data-stu-id="09228-404">Steps to deploy an HTTP Proxy server can found [here](backup-azure-vms-prepare.md#network-connectivity).</span></span>
   * <span data-ttu-id="09228-405">Aggiungere regole al gruppo di sicurezza di rete (se esistente) per consentire l'accesso a INTERNET dal proxy HTTP.</span><span class="sxs-lookup"><span data-stu-id="09228-405">Add rules to the NSG (if you have one in place) to allow access to the INTERNET from the HTTP Proxy.</span></span>

> [!NOTE]
> <span data-ttu-id="09228-406">DHCP deve essere abilitato nel computer guest per consentire il funzionamento del backup delle VM IaaS.</span><span class="sxs-lookup"><span data-stu-id="09228-406">DHCP must be enabled inside the guest for IaaS VM Backup to work.</span></span>  <span data-ttu-id="09228-407">Se è necessario un indirizzo IP privato statico, è necessario configurarlo tramite la piattaforma.</span><span class="sxs-lookup"><span data-stu-id="09228-407">If you need a static private IP, you should configure it through the platform.</span></span> <span data-ttu-id="09228-408">L'opzione DHCP all'interno della VM deve essere abilitata.</span><span class="sxs-lookup"><span data-stu-id="09228-408">The DHCP option inside the VM should be left enabled.</span></span>
> <span data-ttu-id="09228-409">Vedere altre informazioni sull' [impostazione di un indirizzo IP privato interno statico](../virtual-network/virtual-networks-reserved-private-ip.md).</span><span class="sxs-lookup"><span data-stu-id="09228-409">View more information about [Setting a Static Internal Private IP](../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
>
>
