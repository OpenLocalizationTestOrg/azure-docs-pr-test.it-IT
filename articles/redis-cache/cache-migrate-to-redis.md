---
title: Eseguire la migrazione di applicazioni di Servizio cache gestita in Redis - Azure | Documentazione Microsoft
description: Informazioni su come eseguire la migrazione di applicazioni di Servizio cache gestita e di Cache nel ruolo per Cache Redis di Azure
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 041f077b-8c8e-4d7c-a3fc-89d334ed70d6
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 05/30/2017
ms.author: sdanie
ms.openlocfilehash: 0fbfb945c66926794721f2ce8cc183dac51ecb27
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="migrate-from-managed-cache-service-to-azure-redis-cache"></a><span data-ttu-id="f63d7-103">Eseguire la migrazione dal Servizio cache gestita alla Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="f63d7-103">Migrate from Managed Cache Service to Azure Redis Cache</span></span>
<span data-ttu-id="f63d7-104">La migrazione di un'applicazione che usa il Servizio cache gestita di Azure alla Cache Redis di Azure può essere eseguita con modifiche minime all'applicazione, a seconda delle funzionalità del Servizio cache gestita usate dall'applicazione di memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-104">Migrating your applications that use Azure Managed Cache Service to Azure Redis Cache can be accomplished with minimal changes to your application, depending on the Managed Cache Service features used by your caching application.</span></span> <span data-ttu-id="f63d7-105">Le API non sono identiche, ma sono simili e gran parte del codice esistente che usa il Servizio cache gestita per accedere a una cache può essere riutilizzata con modifiche minime.</span><span class="sxs-lookup"><span data-stu-id="f63d7-105">While the APIs are not exactly the same they are similar, and much of your existing code that uses Managed Cache Service to access a cache can be reused with minimal changes.</span></span> <span data-ttu-id="f63d7-106">Questo argomento illustra come apportare le modifiche necessarie alla configurazione e all'applicazione per eseguire la migrazione delle applicazioni che usano il Servizio cache gestita alla Cache Redis di Azure e illustra come alcune delle funzioni della Cache Redis di Azure possano essere usate per implementare la funzionalità di una cache del Servizio cache gestita.</span><span class="sxs-lookup"><span data-stu-id="f63d7-106">This topic shows how to make the necessary configuration and application changes to migrate your Managed Cache Service applications to use Azure Redis Cache, and shows how some of the features of Azure Redis Cache can be used to implement the functionality of a Managed Cache Service cache.</span></span>

>[!NOTE]
><span data-ttu-id="f63d7-107">Servizio cache gestita e Cache nel ruolo sono stati [ritirati](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) il 30 novembre 2016.</span><span class="sxs-lookup"><span data-stu-id="f63d7-107">Managed Cache Service and In-Role Cache were [retired](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) November 30, 2016.</span></span> <span data-ttu-id="f63d7-108">Se sono presenti distribuzioni di Cache nel ruolo di cui si vuole eseguire la migrazione a Cache Redis di Azure, è possibile seguire la procedura illustrata in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="f63d7-108">If you have any In-Role Cache deployments that you want to migrate to Azure Redis Cache, you can follow the steps in this article.</span></span>

## <a name="migration-steps"></a><span data-ttu-id="f63d7-109">Passaggi della migrazione</span><span class="sxs-lookup"><span data-stu-id="f63d7-109">Migration Steps</span></span>
<span data-ttu-id="f63d7-110">I passaggi seguenti sono necessari per eseguire la migrazione di un'applicazione che usa il Servizio cache gestita alla Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="f63d7-110">The following steps are required to migrate a Managed Cache Service application to use Azure Redis Cache.</span></span>

* <span data-ttu-id="f63d7-111">Eseguire il mapping delle funzionalità del Servizio cache gestita alla Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="f63d7-111">Map Managed Cache Service features to Azure Redis Cache</span></span>
* <span data-ttu-id="f63d7-112">Scegliere un'offerta per il servizio cache</span><span class="sxs-lookup"><span data-stu-id="f63d7-112">Choose a Cache Offering</span></span>
* <span data-ttu-id="f63d7-113">Creare una cache</span><span class="sxs-lookup"><span data-stu-id="f63d7-113">Create a Cache</span></span>
* <span data-ttu-id="f63d7-114">Configurare i client della cache</span><span class="sxs-lookup"><span data-stu-id="f63d7-114">Configure the Cache Clients</span></span>
  * <span data-ttu-id="f63d7-115">Rimuovere la configurazione del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="f63d7-115">Remove the Managed Cache Service Configuration</span></span>
  * <span data-ttu-id="f63d7-116">Configurare un client della cache con il pacchetto NuGet StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="f63d7-116">Configure a cache client using the StackExchange.Redis NuGet Package</span></span>
* <span data-ttu-id="f63d7-117">Eseguire la migrazione del codice del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="f63d7-117">Migrate Managed Cache Service code</span></span>
  * <span data-ttu-id="f63d7-118">Connettersi alla cache con la classe ConnectionMultiplexer</span><span class="sxs-lookup"><span data-stu-id="f63d7-118">Connect to the cache using the ConnectionMultiplexer class</span></span>
  * <span data-ttu-id="f63d7-119">Accedere ai tipi di dati primitivi nella cache</span><span class="sxs-lookup"><span data-stu-id="f63d7-119">Access primitive data types in the cache</span></span>
  * <span data-ttu-id="f63d7-120">Gestire gli oggetti .NET nella cache</span><span class="sxs-lookup"><span data-stu-id="f63d7-120">Work with .NET objects in the cache</span></span>
* <span data-ttu-id="f63d7-121">Eseguire la migrazione dello stato della sessione ASP.NET e della memorizzazione nella cache di output alla Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="f63d7-121">Migrate ASP.NET Session State and Output caching to Azure Redis Cache</span></span> 

## <a name="map-managed-cache-service-features-to-azure-redis-cache"></a><span data-ttu-id="f63d7-122">Eseguire il mapping delle funzionalità del Servizio cache gestita alla Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="f63d7-122">Map Managed Cache Service features to Azure Redis Cache</span></span>
<span data-ttu-id="f63d7-123">Il Servizio cache gestita di Azure e la Cache Redis di Azure sono simili, ma implementano alcune funzionalità in modi diversi.</span><span class="sxs-lookup"><span data-stu-id="f63d7-123">Azure Managed Cache Service and Azure Redis Cache are similar but implement some of their features in different ways.</span></span> <span data-ttu-id="f63d7-124">Questa sezione descrive alcune delle differenze e fornisce materiale sussidiario sull'implementazione delle funzionalità del Servizio cache gestita nella Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="f63d7-124">This section describes some of the differences and provides guidance on implementing the features of Managed Cache Service in Azure Redis Cache.</span></span>

| <span data-ttu-id="f63d7-125">Funzionalità del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="f63d7-125">Managed Cache Service feature</span></span> | <span data-ttu-id="f63d7-126">Supporto del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="f63d7-126">Managed Cache Service support</span></span> | <span data-ttu-id="f63d7-127">Supporto della Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="f63d7-127">Azure Redis Cache support</span></span> |
| --- | --- | --- |
| <span data-ttu-id="f63d7-128">Cache denominate</span><span class="sxs-lookup"><span data-stu-id="f63d7-128">Named caches</span></span> |<span data-ttu-id="f63d7-129">Viene configurata una cache predefinita e nelle offerte cache Standard e Premium possono essere configurate fino a nove cache denominate aggiuntive, se necessario.</span><span class="sxs-lookup"><span data-stu-id="f63d7-129">A default cache is configured, and in the Standard and Premium cache offerings, up to nine additional named caches can be configured if desired.</span></span> |<span data-ttu-id="f63d7-130">Le cache Redis di Azure hanno un numero di database configurabile, 16 database per impostazione predefinita, che possono essere usati per implementare una funzionalità simile alle cache denominate.</span><span class="sxs-lookup"><span data-stu-id="f63d7-130">Azure Redis caches have a configurable number of databases (default of 16) that can be used to implement a similar functionality to named caches.</span></span> <span data-ttu-id="f63d7-131">Per altre informazioni, vedere [Cosa sono i database Redis?](cache-faq.md#what-are-redis-databases) e [Configurazione predefinita del server Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="f63d7-131">For more information, see [What are Redis databases?](cache-faq.md#what-are-redis-databases) and [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="f63d7-132">Disponibilità elevata</span><span class="sxs-lookup"><span data-stu-id="f63d7-132">High Availability</span></span> |<span data-ttu-id="f63d7-133">Fornisce disponibilità elevata per gli elementi nella cache nelle offerte cache Standard e Premium.</span><span class="sxs-lookup"><span data-stu-id="f63d7-133">Provides high availability for items in the cache in the Standard and Premium cache offerings.</span></span> <span data-ttu-id="f63d7-134">Se gli elementi vengono persi a causa di un errore, sono ancora disponibili le copie di backup degli elementi nella cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-134">If items are lost due to a failure, backup copies of the items in the cache are still available.</span></span> <span data-ttu-id="f63d7-135">Le scritture nella cache secondaria vengono eseguite in modo sincrono.</span><span class="sxs-lookup"><span data-stu-id="f63d7-135">Writes to the secondary cache are made synchronously.</span></span> |<span data-ttu-id="f63d7-136">La disponibilità elevata è disponibile nelle offerte cache Standard e Premium, che hanno una configurazione primaria/di replica a due nodi (ogni condivisione in una cache Premium ha una coppia primaria/ di replica).</span><span class="sxs-lookup"><span data-stu-id="f63d7-136">High availability is available in the Standard and Premium cache offerings, which have a two node Primary/Replica configuration (each shard in a Premium cache has a primary/replica pair).</span></span> <span data-ttu-id="f63d7-137">Le scritture nella replica vengono eseguite in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="f63d7-137">Writes to the replica are made asynchronously.</span></span> <span data-ttu-id="f63d7-138">Per altre informazioni, vedere [Prezzi di Cache Redis di Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="f63d7-138">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> |
| <span data-ttu-id="f63d7-139">Notifiche</span><span class="sxs-lookup"><span data-stu-id="f63d7-139">Notifications</span></span> |<span data-ttu-id="f63d7-140">Consente ai client di ricevere notifiche asincrone quando in una cache denominata si verificano svariate operazioni della cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-140">Allows clients to receive asynchronous notifications when a variety of cache operations occur on a named cache.</span></span> |<span data-ttu-id="f63d7-141">Le applicazioni client possono usare la pubblicazione/sottoscrizione di Redis o le [notifiche dello spazio delle chiavi](cache-configure.md#keyspace-notifications-advanced-settings) per ottenere una funzionalità simile alle notifiche.</span><span class="sxs-lookup"><span data-stu-id="f63d7-141">Client applications can use Redis pub/sub or [Keyspace notifications](cache-configure.md#keyspace-notifications-advanced-settings) to achieve a similar functionality to notifications.</span></span> |
| <span data-ttu-id="f63d7-142">Cache locale</span><span class="sxs-lookup"><span data-stu-id="f63d7-142">Local cache</span></span> |<span data-ttu-id="f63d7-143">Archivia una copia degli oggetti memorizzati nella cache in locale nel client per un accesso velocissimo.</span><span class="sxs-lookup"><span data-stu-id="f63d7-143">Stores a copy of cached objects locally on the client for extra-fast access.</span></span> |<span data-ttu-id="f63d7-144">Le applicazioni client dovrebbero implementare questa funzionalità usando un dizionario o una struttura di dati simile.</span><span class="sxs-lookup"><span data-stu-id="f63d7-144">Client applications would need to implement this functionality using a dictionary or similar data structure.</span></span> |
| <span data-ttu-id="f63d7-145">Criteri di rimozione</span><span class="sxs-lookup"><span data-stu-id="f63d7-145">Eviction Policy</span></span> |<span data-ttu-id="f63d7-146">Nessuno o utilizzati meno di recente (LRU).</span><span class="sxs-lookup"><span data-stu-id="f63d7-146">None or LRU.</span></span> <span data-ttu-id="f63d7-147">Il criterio predefinito è LRU.</span><span class="sxs-lookup"><span data-stu-id="f63d7-147">The default policy is LRU.</span></span> |<span data-ttu-id="f63d7-148">La Cache Redis di Azure supporta i criteri di rimozione seguenti: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span><span class="sxs-lookup"><span data-stu-id="f63d7-148">Azure Redis Cache supports the following eviction policies: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span></span> <span data-ttu-id="f63d7-149">Il criterio predefinito è volatile-lru.</span><span class="sxs-lookup"><span data-stu-id="f63d7-149">The default policy is volatile-lru.</span></span> <span data-ttu-id="f63d7-150">Per altre informazioni, vedere [Configurazione predefinita del server Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="f63d7-150">For more information, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="f63d7-151">Criteri di scadenza</span><span class="sxs-lookup"><span data-stu-id="f63d7-151">Expiration Policy</span></span> |<span data-ttu-id="f63d7-152">Il criterio di scadenza predefinito è Assoluto e l'intervallo di scadenza predefinito è di dieci minuti.</span><span class="sxs-lookup"><span data-stu-id="f63d7-152">The default expiration policy is Absolute and the default expiration interval is ten minutes.</span></span> <span data-ttu-id="f63d7-153">Sono disponibili anche i criteri Scorrevole e Mai.</span><span class="sxs-lookup"><span data-stu-id="f63d7-153">Sliding and Never policies are also available.</span></span> |<span data-ttu-id="f63d7-154">Per impostazione predefinita, gli elementi nella cache non scadono, ma è possibile impostare una scadenza per ogni scrittura usando gli overload impostati della cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-154">By default items in the cache do not expire, but an expiration can be configured on a per write basis using cache set overloads.</span></span> <span data-ttu-id="f63d7-155">Per altre informazioni, vedere [Aggiungere e recuperare oggetti dalla cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span><span class="sxs-lookup"><span data-stu-id="f63d7-155">For more information, see [Add and retrieve objects from the cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span></span> |
| <span data-ttu-id="f63d7-156">Aree e aggiunta di tag</span><span class="sxs-lookup"><span data-stu-id="f63d7-156">Regions and Tagging</span></span> |<span data-ttu-id="f63d7-157">Le aree sono sottogruppi degli elementi memorizzati nella cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-157">Regions are subgroups for cached items.</span></span> <span data-ttu-id="f63d7-158">Le aree supportano anche l'annotazione degli elementi memorizzati nella cache con stringhe descrittive aggiuntive chiamate tag.</span><span class="sxs-lookup"><span data-stu-id="f63d7-158">Regions also support the annotation of cached items with additional descriptive strings called tags.</span></span> <span data-ttu-id="f63d7-159">Le aree supportano l'esecuzione di operazioni di ricerca in tutti gli elementi con tag di tale area.</span><span class="sxs-lookup"><span data-stu-id="f63d7-159">Regions support the ability to perform search operations on any tagged items in that region.</span></span> <span data-ttu-id="f63d7-160">Tutti gli elementi in un'area si trovano in un singolo nodo del cluster di cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-160">All items within a region are located within a single node of the cache cluster.</span></span> |<span data-ttu-id="f63d7-161">Una cache Redis è costituita da un singolo nodo (a meno che non sia abilitato il cluster Redis) e quindi il concetto di aree del Servizio cache gestita non è applicabile.</span><span class="sxs-lookup"><span data-stu-id="f63d7-161">A Redis cache consists of a single node (unless Redis cluster is enabled) so the concept of Managed Cache Service regions does not apply.</span></span> <span data-ttu-id="f63d7-162">Poiché Redis supporta le operazioni di ricerca e con caratteri jolly quando si recuperano le chiavi, i tag descrittivi possono essere incorporati nei nomi delle chiavi e usati per recuperare gli elementi in seguito.</span><span class="sxs-lookup"><span data-stu-id="f63d7-162">Redis supports searching and wildcard operations when retrieving keys so descriptive tags can be embedded within the key names and used to retrieve the items later.</span></span> <span data-ttu-id="f63d7-163">Per un esempio di implementazione di una soluzione di aggiunta di tag con Redis, vedere la pagina relativa all' [implementazione dell'aggiunta di tag della cache con Redis](http://stackify.com/implementing-cache-tagging-redis/).</span><span class="sxs-lookup"><span data-stu-id="f63d7-163">For an example of implementing a tagging solution using Redis, see [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/).</span></span> |
| <span data-ttu-id="f63d7-164">Serializzazione</span><span class="sxs-lookup"><span data-stu-id="f63d7-164">Serialization</span></span> |<span data-ttu-id="f63d7-165">La cache gestita supporta NetDataContractSerializer, BinaryFormatter e l'uso di serializzatori personalizzati.</span><span class="sxs-lookup"><span data-stu-id="f63d7-165">Managed Cache supports NetDataContractSerializer, BinaryFormatter, and the use of custom serializers.</span></span> <span data-ttu-id="f63d7-166">Il valore predefinito è NetDataContractSerializer.</span><span class="sxs-lookup"><span data-stu-id="f63d7-166">The default is NetDataContractSerializer.</span></span> |<span data-ttu-id="f63d7-167">È responsabilità dell'applicazione client serializzare gli oggetti .NET prima di inserirli nella cache, con il serializzatore scelto dallo sviluppatore dell'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="f63d7-167">It is the responsibility of the client application to serialize .NET objects before placing them into the cache, with the choice of the serializer up to the client application developer.</span></span> <span data-ttu-id="f63d7-168">Per altre informazioni e per il codice di esempio, vedere [Gestire gli oggetti .NET nella cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="f63d7-168">For more information and sample code, see [Work with .NET objects in the cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span> |
| <span data-ttu-id="f63d7-169">Emulatore di cache</span><span class="sxs-lookup"><span data-stu-id="f63d7-169">Cache emulator</span></span> |<span data-ttu-id="f63d7-170">Il servizio Cache gestita offre un emulatore di cache locale.</span><span class="sxs-lookup"><span data-stu-id="f63d7-170">Managed Cache provides a local cache emulator.</span></span> |<span data-ttu-id="f63d7-171">Cache Redis di Azure non ha un emulatore, ma per ottenere un'esperienza di emulazione è possibile [eseguire la build MSOpenTech di redis-server.exe in locale](cache-faq.md#cache-emulator) .</span><span class="sxs-lookup"><span data-stu-id="f63d7-171">Azure Redis Cache does not have an emulator, but you can [run the MSOpenTech build of redis-server.exe locally](cache-faq.md#cache-emulator) to provide an emulator experience.</span></span> |

## <a name="choose-a-cache-offering"></a><span data-ttu-id="f63d7-172">Scegliere un'offerta per il servizio cache</span><span class="sxs-lookup"><span data-stu-id="f63d7-172">Choose a Cache Offering</span></span>
<span data-ttu-id="f63d7-173">Cache Redis di Microsoft Azure è disponibile nei seguenti livelli:</span><span class="sxs-lookup"><span data-stu-id="f63d7-173">Microsoft Azure Redis Cache is available in the following tiers:</span></span>

* <span data-ttu-id="f63d7-174">**Basic**: singolo nodo.</span><span class="sxs-lookup"><span data-stu-id="f63d7-174">**Basic** – Single node.</span></span> <span data-ttu-id="f63d7-175">Più dimensioni fino a 53 GB.</span><span class="sxs-lookup"><span data-stu-id="f63d7-175">Multiple sizes up to 53 GB.</span></span>
* <span data-ttu-id="f63d7-176">**Standard**: principale/replica a due nodi.</span><span class="sxs-lookup"><span data-stu-id="f63d7-176">**Standard** – Two-node Primary/Replica.</span></span> <span data-ttu-id="f63d7-177">Più dimensioni fino a 53 GB.</span><span class="sxs-lookup"><span data-stu-id="f63d7-177">Multiple sizes up to 53 GB.</span></span> <span data-ttu-id="f63d7-178">Contratti di servizio del 99,9%.</span><span class="sxs-lookup"><span data-stu-id="f63d7-178">99.9% SLA.</span></span>
* <span data-ttu-id="f63d7-179">**Premium** : principale/replica a due nodi con fino a 10 partizioni.</span><span class="sxs-lookup"><span data-stu-id="f63d7-179">**Premium** – Two-node Primary/Replica with up to 10 shards.</span></span> <span data-ttu-id="f63d7-180">Più dimensioni da 6 GB a 530 GB.</span><span class="sxs-lookup"><span data-stu-id="f63d7-180">Multiple sizes from 6 GB to 530 GB.</span></span> <span data-ttu-id="f63d7-181">Supporto per tutte le funzionalità del piano Standard e altre, tra cui [cluster Redis](cache-how-to-premium-clustering.md), [persistenza Redis](cache-how-to-premium-persistence.md) e [Rete virtuale di Azure](cache-how-to-premium-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="f63d7-181">All Standard tier features and more including support for [Redis cluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md), and [Azure Virtual Network](cache-how-to-premium-vnet.md).</span></span> <span data-ttu-id="f63d7-182">Contratti di servizio del 99,9%.</span><span class="sxs-lookup"><span data-stu-id="f63d7-182">99.9% SLA.</span></span>

<span data-ttu-id="f63d7-183">Ogni livello presenta differenze in termini di funzionalità e prezzi.</span><span class="sxs-lookup"><span data-stu-id="f63d7-183">Each tier differs in terms of features and pricing.</span></span> <span data-ttu-id="f63d7-184">Le funzionalità vengono illustrate più avanti in questa guida. Per altre informazioni sui prezzi, vedere [Dettagli prezzi del servizio Cache](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="f63d7-184">The features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details](https://azure.microsoft.com/pricing/details/cache/).</span></span>

<span data-ttu-id="f63d7-185">Per iniziare la migrazione, scegliere la dimensione corrispondente a quella della cache del Servizio cache gestita precedente e quindi aumentarla o ridurla a seconda dei requisiti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f63d7-185">A starting point for migration is to pick the size that matches the size of your previous Managed Cache Service cache, and then scale up or down depending on the requirements of your application.</span></span> <span data-ttu-id="f63d7-186">Per altro materiale sussidiario sulla scelta dell'offerta appropriata per la Cache Redis di Azure, vedere [Quali offerte e dimensioni della Cache Redis è consigliabile usare?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span><span class="sxs-lookup"><span data-stu-id="f63d7-186">For more guidance on choosing the right Azure Redis Cache offering, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span></span>

## <a name="create-a-cache"></a><span data-ttu-id="f63d7-187">Creare una cache</span><span class="sxs-lookup"><span data-stu-id="f63d7-187">Create a Cache</span></span>
[!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]

## <a name="configure-the-cache-clients"></a><span data-ttu-id="f63d7-188">Configurare i client della cache</span><span class="sxs-lookup"><span data-stu-id="f63d7-188">Configure the Cache Clients</span></span>
<span data-ttu-id="f63d7-189">Una volta creata e configurata la cache, il passaggio successivo consiste nel rimuovere la configurazione del Servizio cache gestita e nell'aggiungere la configurazione e i riferimenti della Cache Redis di Azure in modo che i client della cache possano accedere alla cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-189">Once the cache is created and configured, the next step is to remove the Managed Cache Service configuration, and add the add the Azure Redis Cache configuration and references so that cache clients can access the cache.</span></span>

* <span data-ttu-id="f63d7-190">Rimuovere la configurazione del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="f63d7-190">Remove the Managed Cache Service Configuration</span></span>
* <span data-ttu-id="f63d7-191">Configurare un client della cache con il pacchetto NuGet StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="f63d7-191">Configure a cache client using the StackExchange.Redis NuGet Package</span></span>

### <a name="remove-the-managed-cache-service-configuration"></a><span data-ttu-id="f63d7-192">Rimuovere la configurazione del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="f63d7-192">Remove the Managed Cache Service Configuration</span></span>
<span data-ttu-id="f63d7-193">Prima che le applicazioni client possano essere configurate per la Cache Redis di Azure, è necessario rimuovere la configurazione e i riferimenti ad assembly del Servizio cache gestita esistenti disinstallando il pacchetto NuGet del Servizio cache gestita.</span><span class="sxs-lookup"><span data-stu-id="f63d7-193">Before the client applications can be configured for Azure Redis Cache, the existing Managed Cache Service configuration and assembly references must be removed by uninstalling the Managed Cache Service NuGet package.</span></span>

<span data-ttu-id="f63d7-194">Per disinstallare il pacchetto NuGet del Servizio cache gestita, fare clic con il pulsante destro del mouse sul progetto in **Esplora soluzioni** e scegliere **Gestisci pacchetti NuGet**.</span><span class="sxs-lookup"><span data-stu-id="f63d7-194">To uninstall the Managed Cache Service NuGet package, right-click the client project in **Solution Explorer** and choose **Manage NuGet Packages**.</span></span> <span data-ttu-id="f63d7-195">Selezionare il nodo  **installati** e digitare **WindowsAzure.Caching** nella casella di ricerca dei pacchetti installati.</span><span class="sxs-lookup"><span data-stu-id="f63d7-195">Select the **Installed packages** node, and type W**indowsAzure.Caching** into the Search installed packages box.</span></span> <span data-ttu-id="f63d7-196">Selezionare **Windows** **Azure Cache** (o **Windows** **Azure Caching** a seconda della versione del pacchetto NuGet), fare clic su **Disinstalla** e su **Chiudi**.</span><span class="sxs-lookup"><span data-stu-id="f63d7-196">Select **Windows** **Azure Cache** (or **Windows** **Azure Caching** depending on the version of the NuGet package), click **Uninstall**, and then click **Close**.</span></span>

![Disinstallare il pacchetto NuGet del Servizio cache gestita di Azure](./media/cache-migrate-to-redis/IC757666.jpg)

<span data-ttu-id="f63d7-198">La disinstallazione del pacchetto NuGet del Servizio cache gestita rimuove gli assembly del Servizio cache gestita e le voci del Servizio cache gestita dal file app.config o web.config dell'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="f63d7-198">Uninstalling the Managed Cache Service NuGet package removes the Managed Cache Service assemblies and the Managed Cache Service entries in the app.config or web.config of the client application.</span></span> <span data-ttu-id="f63d7-199">Poiché alcune impostazioni personalizzate potrebbero non essere rimosse quando si disinstalla il pacchetto NuGet, aprire web.config o app.config e verificare che gli elementi seguenti siano stati completamente rimossi.</span><span class="sxs-lookup"><span data-stu-id="f63d7-199">Because some customized settings may not be removed when uninstalling the NuGet package, open web.config or app.config and ensure that the following elements are completely removed.</span></span>

<span data-ttu-id="f63d7-200">Verificare che la voce `dataCacheClients` sia stata rimossa dall'elemento `configSections`.</span><span class="sxs-lookup"><span data-stu-id="f63d7-200">Ensure that the `dataCacheClients` entry is removed from the `configSections` element.</span></span> <span data-ttu-id="f63d7-201">Non rimuovere l'intero elemento `configSections`, ma solo la voce `dataCacheClients`, se presente.</span><span class="sxs-lookup"><span data-stu-id="f63d7-201">Do not remove the entire `configSections` element; just remove the `dataCacheClients` entry, if it is present.</span></span>

```xml
<configSections>
  <!-- Existing sections omitted for clarity. -->
  <section name="dataCacheClients"type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
</configSections>
```

<span data-ttu-id="f63d7-202">Verificare che la sezione `dataCacheClients` sia stata rimossa.</span><span class="sxs-lookup"><span data-stu-id="f63d7-202">Ensure that the `dataCacheClients` section is removed.</span></span> <span data-ttu-id="f63d7-203">La sezione `dataCacheClients` sarà simile all'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="f63d7-203">The `dataCacheClients` section will be similar to the following example.</span></span>

```xml
<dataCacheClients>
  <dataCacheClientname="default">
    <!--To use the in-role flavor of Azure Cache, set identifier to be the cache cluster role name -->
    <!--To use the Azure Managed Cache Service, set identifier to be the endpoint of the cache cluster -->
    <autoDiscoverisEnabled="true"identifier="[Cache role name or Service Endpoint]"/>

    <!--<localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" />-->
    <!--Use this section to specify security settings for connecting to your cache. This section is not required if your cache is hosted on a role that is a part of your cloud service. -->
    <!--<securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[Authentication Key]" />
    </securityProperties>-->
  </dataCacheClient>
</dataCacheClients>
```

<span data-ttu-id="f63d7-204">Una volta rimossa la configurazione del Servizio cache gestita, è possibile configurare il client della cache, come descritto nella sezione seguente.</span><span class="sxs-lookup"><span data-stu-id="f63d7-204">Once the Managed Cache Service configuration is removed, you can configure the cache client as described in the following section.</span></span>

### <a name="configure-a-cache-client-using-the-stackexchangeredis-nuget-package"></a><span data-ttu-id="f63d7-205">Configurare un client della cache con il pacchetto NuGet StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="f63d7-205">Configure a cache client using the StackExchange.Redis NuGet Package</span></span>
[!INCLUDE [redis-cache-configure](../../includes/redis-cache-configure-stackexchange-redis-nuget.md)]

## <a name="migrate-managed-cache-service-code"></a><span data-ttu-id="f63d7-206">Eseguire la migrazione del codice del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="f63d7-206">Migrate Managed Cache Service code</span></span>
<span data-ttu-id="f63d7-207">L'API del client della cache StackExchange.Redis è simile al Servizio cache gestita.</span><span class="sxs-lookup"><span data-stu-id="f63d7-207">The API for the StackExchange.Redis cache client is similar to the Managed Cache Service.</span></span> <span data-ttu-id="f63d7-208">Questa sezione contiene una panoramica delle differenze.</span><span class="sxs-lookup"><span data-stu-id="f63d7-208">This section provides an overview of the differences.</span></span>

### <a name="connect-to-the-cache-using-the-connectionmultiplexer-class"></a><span data-ttu-id="f63d7-209">Connettersi alla cache con la classe ConnectionMultiplexer</span><span class="sxs-lookup"><span data-stu-id="f63d7-209">Connect to the cache using the ConnectionMultiplexer class</span></span>
<span data-ttu-id="f63d7-210">Nel Servizio cache gestita le connessioni alla cache sono gestite dalle classi `DataCacheFactory` e `DataCache`.</span><span class="sxs-lookup"><span data-stu-id="f63d7-210">In Managed Cache Service, connections to the cache were handled by the `DataCacheFactory` and `DataCache` classes.</span></span> <span data-ttu-id="f63d7-211">Nella Cache Redis di Azure queste connessioni sono gestite dalla classe `ConnectionMultiplexer` .</span><span class="sxs-lookup"><span data-stu-id="f63d7-211">In Azure Redis Cache, these connections are managed by the `ConnectionMultiplexer` class.</span></span>

<span data-ttu-id="f63d7-212">Aggiungere l'istruzione using seguente nella parte superiore di ogni file da cui si vuole accedere alla cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-212">Add the following using statement to the top of any file from which you want to access the cache.</span></span>

```c#
using StackExchange.Redis
```

<span data-ttu-id="f63d7-213">Se questo spazio dei nomi non viene risolto, verificare di avere aggiunto il pacchetto NuGet StackExchange.Redis, come descritto in [Configurare i client della cache](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="f63d7-213">If this namespace doesn’t resolve, be sure that you have added the StackExchange.Redis NuGet package as described in [Configure the cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

> [!NOTE]
> <span data-ttu-id="f63d7-214">Tenere presente che con il client StackExchange.Redis è richiesto .NET Framework 4 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="f63d7-214">Note that the StackExchange.Redis client requires .NET Framework 4 or higher.</span></span>
> 
> 

<span data-ttu-id="f63d7-215">Per connettersi a un'istanza della Cache Redis di Azure, chiamare il metodo statico `ConnectionMultiplexer.Connect` e passare l'endpoint e la chiave.</span><span class="sxs-lookup"><span data-stu-id="f63d7-215">To connect to an Azure Redis Cache instance, call the static `ConnectionMultiplexer.Connect` method and pass in the endpoint and key.</span></span> <span data-ttu-id="f63d7-216">Un approccio per la condivisione di un'istanza di `ConnectionMultiplexer` nell'applicazione prevede una proprietà statica che restituisce un'istanza connessa, simile a quanto illustrato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="f63d7-216">One approach to sharing a `ConnectionMultiplexer` instance in your application is to have a static property that returns a connected instance, similar to the following example.</span></span> <span data-ttu-id="f63d7-217">Questo costituisce un modo thread-safe per inizializzare solo una singola istanza di `ConnectionMultiplexer` connessa.</span><span class="sxs-lookup"><span data-stu-id="f63d7-217">This provides a thread-safe way to initialize only a single connected `ConnectionMultiplexer` instance.</span></span> <span data-ttu-id="f63d7-218">In questo esempio la proprietà `abortConnect` è impostata su false, a indicare che la chiamata riuscirà anche se non viene stabilita una connessione alla cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-218">In this example `abortConnect` is set to false, which means that the call will succeed even if a connection to the cache is not established.</span></span> <span data-ttu-id="f63d7-219">Una delle funzionalità principali di `ConnectionMultiplexer` è il ripristino automatico della connettività alla cache non appena l'errore di rete o eventuali altri problemi vengono risolti.</span><span class="sxs-lookup"><span data-stu-id="f63d7-219">One key feature of `ConnectionMultiplexer` is that it will automatically restore connectivity to the cache once the network issue or other causes are resolved.</span></span>

```c#
private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
{
    return ConnectionMultiplexer.Connect("contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
});

public static ConnectionMultiplexer Connection
{
    get
    {
        return lazyConnection.Value;
    }
}
```

<span data-ttu-id="f63d7-220">L'endpoint, le chiavi e le porte della cache sono disponibili nel pannello **Cache Redis** dell'istanza della cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-220">The cache endpoint, keys, and ports can be obtained from the **Redis Cache** blade for your cache instance.</span></span> <span data-ttu-id="f63d7-221">Per altre informazioni, vedere [Proprietà di Cache Redis](cache-configure.md#properties).</span><span class="sxs-lookup"><span data-stu-id="f63d7-221">For more information, see [Redis Cache properties](cache-configure.md#properties).</span></span>

<span data-ttu-id="f63d7-222">Dopo avere stabilito la connessione, restituire un riferimento al database di Cache Redis chiamando il metodo `ConnectionMultiplexer.GetDatabase` .</span><span class="sxs-lookup"><span data-stu-id="f63d7-222">Once the connection is established, return a reference to the Redis cache database by calling the `ConnectionMultiplexer.GetDatabase` method.</span></span> <span data-ttu-id="f63d7-223">L’oggetto restituito dal metodo `GetDatabase` è un oggetto pass-through leggero che non è necessario archiviare.</span><span class="sxs-lookup"><span data-stu-id="f63d7-223">The object returned from the `GetDatabase` method is a lightweight pass-through object and does not need to be stored.</span></span>

```c#
IDatabase cache = Connection.GetDatabase();

// Perform cache operations using the cache object...
// Simple put of integral data types into the cache
cache.StringSet("key1", "value");
cache.StringSet("key2", 25);

// Simple get of data types from the cache
string key1 = cache.StringGet("key1");
int key2 = (int)cache.StringGet("key2");
```

<span data-ttu-id="f63d7-224">Il client StackExchange.Redis usa i tipi `RedisKey` e `RedisValue` per accedere agli elementi e archiviarli nella cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-224">The StackExchange.Redis client uses the `RedisKey` and `RedisValue` types for accessing and storing items in the cache.</span></span> <span data-ttu-id="f63d7-225">Questi tipi eseguono il mapping ai tipi di linguaggio più primitivi, incluse le stringhe, e spesso non vengono usati direttamente.</span><span class="sxs-lookup"><span data-stu-id="f63d7-225">These types map onto most primitive language types, including string, and often are not used directly.</span></span> <span data-ttu-id="f63d7-226">Le stringhe di Redis sono la tipologia più semplice di valore Redis e possono contenere diversi tipi di dati, inclusi i flussi binari serializzati, e, anche se non è possibile usare il tipo direttamente, si useranno metodi contenenti `String` nel nome.</span><span class="sxs-lookup"><span data-stu-id="f63d7-226">Redis Strings are the most basic kind of Redis value, and can contain many types of data, including serialized binary streams, and while you may not use the type directly, you will use methods that contain `String` in the name.</span></span> <span data-ttu-id="f63d7-227">Per i tipi di dati più primitivi, gli elementi vengono archiviati e recuperati nella cache usando i metodi `StringSet` e `StringGet`, a meno che non si debbano archiviare raccolte o altri tipi di dati Redis nella cache.</span><span class="sxs-lookup"><span data-stu-id="f63d7-227">For most primitive data types you store and retrieve items from the cache using the `StringSet` and `StringGet` methods, unless you are storing collections or other Redis data types in the cache.</span></span> 

<span data-ttu-id="f63d7-228">`StringSet` e `StringGet` sono molto simili ai metodi `Put` e `Get` del Servizio cache gestita, con l'importante differenza che, prima di impostare e ottenere un oggetto .NET nella cache, è necessario serializzarlo.</span><span class="sxs-lookup"><span data-stu-id="f63d7-228">`StringSet` and `StringGet` are very similar to the Managed Cache Service `Put` and `Get` methods, with one major difference being that before you set and get a .NET object into the cache you must serialize it first.</span></span> 

<span data-ttu-id="f63d7-229">Quando si chiama `StringGet`, viene restituito l'oggetto, se esistente; in caso contrario, viene restituito Null.</span><span class="sxs-lookup"><span data-stu-id="f63d7-229">When calling `StringGet`, if the object exists, it is returned, and if it does not, null is returned.</span></span> <span data-ttu-id="f63d7-230">In questo caso è possibile recuperare il valore dall'origine dati desiderata e memorizzarlo nella cache per usarlo in seguito.</span><span class="sxs-lookup"><span data-stu-id="f63d7-230">In this case you can retrieve the value from the desired data source and store it in the cache for subsequent use.</span></span> <span data-ttu-id="f63d7-231">Questa operazione è nota come modello cache-aside.</span><span class="sxs-lookup"><span data-stu-id="f63d7-231">This is known as the cache-aside pattern.</span></span>

<span data-ttu-id="f63d7-232">Per specificare la scadenza di un elemento nella cache, usare il parametro `TimeSpan` di `StringSet`.</span><span class="sxs-lookup"><span data-stu-id="f63d7-232">To specify the expiration of an item in the cache, use the `TimeSpan` parameter of `StringSet`.</span></span>

```c#
cache.StringSet("key1", "value1", TimeSpan.FromMinutes(90));
```

<span data-ttu-id="f63d7-233">Cache Redis di Azure può usare sia oggetti .NET che tipi di dati primitivi, ma prima della memorizzazione nella cache un oggetto .NET deve essere serializzato.</span><span class="sxs-lookup"><span data-stu-id="f63d7-233">Azure Redis Cache can work with .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.</span></span> <span data-ttu-id="f63d7-234">Questa operazione spetta allo sviluppatore dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="f63d7-234">This is the responsibility of the application developer.</span></span> <span data-ttu-id="f63d7-235">In questo modo lo sviluppatore può scegliere il serializzatore che preferisce.</span><span class="sxs-lookup"><span data-stu-id="f63d7-235">This gives the developer flexibility in the choice of the serializer.</span></span> <span data-ttu-id="f63d7-236">Per altre informazioni e per il codice di esempio, vedere [Gestire gli oggetti .NET nella cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="f63d7-236">For more information and sample code, see [Work with .NET objects in the cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span>

## <a name="migrate-aspnet-session-state-and-output-caching-to-azure-redis-cache"></a><span data-ttu-id="f63d7-237">Eseguire la migrazione dello stato della sessione ASP.NET e della memorizzazione nella cache di output alla Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="f63d7-237">Migrate ASP.NET Session State and Output caching to Azure Redis Cache</span></span>
<span data-ttu-id="f63d7-238">La Cache Redis di Azure include provider sia per lo stato della sessione ASP.NET che per la memorizzazione nella cache dell'output delle pagine.</span><span class="sxs-lookup"><span data-stu-id="f63d7-238">Azure Redis Cache has providers for both ASP.NET Session State and Page Output caching.</span></span> <span data-ttu-id="f63d7-239">Per eseguire la migrazione dell'applicazione che usa le versioni del Servizio cache gestita di questi provider, rimuovere prima le sezioni esistenti dal file web.config e quindi configurare le versioni della Cache Redis di Azure dei provider.</span><span class="sxs-lookup"><span data-stu-id="f63d7-239">To migrate your application that uses the Managed Cache Service versions of these providers, first remove the existing sections from your web.config, and then configure the Azure Redis Cache versions of the providers.</span></span> <span data-ttu-id="f63d7-240">Per istruzioni sull'uso dei provider ASP.NET della Cache Redis di Azure, vedere [Provider di stato della sessione ASP.NET per Cache Redis di Azure](cache-aspnet-session-state-provider.md) e [Provider di cache di output ASP.NET per la Cache Redis di Azure](cache-aspnet-output-cache-provider.md).</span><span class="sxs-lookup"><span data-stu-id="f63d7-240">For instructions on using the Azure Redis Cache ASP.NET providers, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [ASP.NET Output Cache Provider for Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f63d7-241">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="f63d7-241">Next steps</span></span>
<span data-ttu-id="f63d7-242">Per esercitazioni, esempi, video e altro ancora, vedere la [documentazione sulla Cache Redis di Azure](https://azure.microsoft.com/documentation/services/cache/) .</span><span class="sxs-lookup"><span data-stu-id="f63d7-242">Explore the [Azure Redis Cache documentation](https://azure.microsoft.com/documentation/services/cache/) for tutorials, samples, videos, and more.</span></span>

