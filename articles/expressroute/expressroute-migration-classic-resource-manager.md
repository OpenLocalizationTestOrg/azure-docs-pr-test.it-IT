---
title: 'Eseguire la migrazione delle reti virtuali associate ExpressRoute da tooResource classico Manager: Azure: PowerShell | Documenti Microsoft'
description: Questa pagina vengono descritti come toomigrate associate reti virtuali tooResource Manager dopo lo spostamento del circuito.
documentationcenter: na
services: expressroute
author: ganesr
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: expressroute
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2017
ms.author: ganesr;cherylmc
ms.openlocfilehash: e64506c6909296f98c5dd23b1437bc0b81f31c75
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-expressroute-associated-virtual-networks-from-classic-tooresource-manager"></a><span data-ttu-id="8bc63-103">Eseguire la migrazione delle reti virtuali associate ExpressRoute da tooResource classico Manager</span><span class="sxs-lookup"><span data-stu-id="8bc63-103">Migrate ExpressRoute associated virtual networks from classic tooResource Manager</span></span>

<span data-ttu-id="8bc63-104">Questo articolo spiega come Azure ExpressRoute toomigrate associata le reti virtuali del modello di distribuzione Azure Resource Manager hello distribuzione classica modello toohello dopo lo spostamento del circuito ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="8bc63-104">This article explains how toomigrate Azure ExpressRoute associated virtual networks from hello classic deployment model toohello Azure Resource Manager deployment model after moving your ExpressRoute circuit.</span></span> 


## <a name="before-you-begin"></a><span data-ttu-id="8bc63-105">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="8bc63-105">Before you begin</span></span>
* <span data-ttu-id="8bc63-106">Verificare di disporre di più recente dei moduli di Azure PowerShell hello hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-106">Verify that you have hello latest version of hello Azure PowerShell modules.</span></span> <span data-ttu-id="8bc63-107">Per ulteriori informazioni, vedere [come tooinstall e configurare Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="8bc63-107">For more information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>
* <span data-ttu-id="8bc63-108">Assicurarsi di aver esaminato hello [prerequisiti](expressroute-prerequisites.md), [requisiti di routing](expressroute-routing.md), e [flussi di lavoro](expressroute-workflows.md) prima di iniziare la configurazione.</span><span class="sxs-lookup"><span data-stu-id="8bc63-108">Make sure that you have reviewed hello [prerequisites](expressroute-prerequisites.md), [routing requirements](expressroute-routing.md), and [workflows](expressroute-workflows.md) before you begin configuration.</span></span>
* <span data-ttu-id="8bc63-109">Esaminare le informazioni di hello previsti [lo spostamento di un circuito ExpressRoute da tooResource classico Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="8bc63-109">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span> <span data-ttu-id="8bc63-110">Assicurarsi di aver compreso i limiti di hello e limitazioni.</span><span class="sxs-lookup"><span data-stu-id="8bc63-110">Make sure that you fully understand hello limits and limitations.</span></span>
* <span data-ttu-id="8bc63-111">Verificare che il circuito hello è completamente operativo nel modello di distribuzione classica hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-111">Verify that hello circuit is fully operational in hello classic deployment model.</span></span>
* <span data-ttu-id="8bc63-112">Verificare di disporre di un gruppo di risorse creati nel modello di distribuzione di gestione risorse di hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-112">Ensure that you have a resource group that was created in hello Resource Manager deployment model.</span></span>
* <span data-ttu-id="8bc63-113">Esaminare hello documentazione per la migrazione di risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="8bc63-113">Review hello following resource-migration documentation:</span></span>

    * [<span data-ttu-id="8bc63-114">Piattaforma supportata la migrazione di risorse IaaS tooAzure classico Gestione risorse</span><span class="sxs-lookup"><span data-stu-id="8bc63-114">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="8bc63-115">Tecnica di informazioni approfondite su piattaforma supportata la migrazione da Gestione risorse di tooAzure classico</span><span class="sxs-lookup"><span data-stu-id="8bc63-115">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
    * [<span data-ttu-id="8bc63-116">Domande frequenti: Piattaforma supportata migrazione delle risorse IaaS da Gestione risorse di tooAzure classico</span><span class="sxs-lookup"><span data-stu-id="8bc63-116">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="8bc63-117">Rivedere gli errori di migrazione più comuni e le soluzioni</span><span class="sxs-lookup"><span data-stu-id="8bc63-117">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)

## <a name="supported-and-unsupported-scenarios"></a><span data-ttu-id="8bc63-118">Scenari supportati e non supportati</span><span class="sxs-lookup"><span data-stu-id="8bc63-118">Supported and unsupported scenarios</span></span>

* <span data-ttu-id="8bc63-119">Un circuito ExpressRoute può essere spostato dall'ambiente di gestione risorse hello classic toohello senza alcun tempo di inattività.</span><span class="sxs-lookup"><span data-stu-id="8bc63-119">An ExpressRoute circuit can be moved from hello classic toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="8bc63-120">È possibile spostare qualsiasi circuito ExpressRoute da hello classic toohello ambiente di gestione delle risorse senza tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="8bc63-120">You can move any ExpressRoute circuit from hello classic toohello Resource Manager environment with no downtime.</span></span> <span data-ttu-id="8bc63-121">Seguire le istruzioni hello [lo spostamento di circuiti ExpressRoute dal modello di distribuzione del hello toohello classico di gestione delle risorse con PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="8bc63-121">Follow hello instructions in [moving ExpressRoute circuits from hello classic toohello Resource Manager deployment model using PowerShell](expressroute-howto-move-arm.md).</span></span> <span data-ttu-id="8bc63-122">Si tratta di una rete virtuale di risorse collegate toohello toomove dei prerequisiti.</span><span class="sxs-lookup"><span data-stu-id="8bc63-122">This is a prerequisite toomove resources connected toohello virtual network.</span></span>
* <span data-ttu-id="8bc63-123">Reti virtuali, i gateway e le distribuzioni associate all'interno di rete virtuale hello sono collegati tooan circuito ExpressRoute nella stessa sottoscrizione può essere hello migrate ambiente di gestione risorse toohello senza alcun tempo di inattività.</span><span class="sxs-lookup"><span data-stu-id="8bc63-123">Virtual networks, gateways, and associated deployments within hello virtual network that are attached tooan ExpressRoute circuit in hello same subscription can be migrated toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="8bc63-124">È possibile seguire hello passaggi descritti più avanti toomigrate risorse, ad esempio le reti virtuali, i gateway e macchine virtuali distribuite in una rete virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-124">You can follow hello steps described later toomigrate resources such as virtual networks, gateways, and virtual machines deployed within hello virtual network.</span></span> <span data-ttu-id="8bc63-125">È necessario assicurarsi che le reti virtuali hello siano configurate correttamente prima di eseguirne la migrazione.</span><span class="sxs-lookup"><span data-stu-id="8bc63-125">You must ensure that hello virtual networks are configured correctly before they are migrated.</span></span> 
* <span data-ttu-id="8bc63-126">Distribuzioni associate all'interno di rete virtuale hello che non si trovano in reti virtuali e gateway hello stessa sottoscrizione come hello circuito ExpressRoute richiedono alcuni migrazione hello toocomplete di tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="8bc63-126">Virtual networks, gateways, and associated deployments within hello virtual network that are not in hello same subscription as hello ExpressRoute circuit require some downtime toocomplete hello migration.</span></span> <span data-ttu-id="8bc63-127">ultima sezione del documento hello in Hello descrive hello passaggi toobe seguito toomigrate risorse.</span><span class="sxs-lookup"><span data-stu-id="8bc63-127">hello last section of hello document describes hello steps toobe followed toomigrate resources.</span></span>
* <span data-ttu-id="8bc63-128">Non è possibile eseguire la migrazione di una rete virtuale con Gateway ExpressRoute e Gateway VPN.</span><span class="sxs-lookup"><span data-stu-id="8bc63-128">A virtual network with both ExpressRoute Gateway and VPN Gateway can't be migrated.</span></span>

## <a name="move-an-expressroute-circuit-from-classic-tooresource-manager"></a><span data-ttu-id="8bc63-129">Spostare un circuito ExpressRoute da tooResource classico Manager</span><span class="sxs-lookup"><span data-stu-id="8bc63-129">Move an ExpressRoute circuit from classic tooResource Manager</span></span>
<span data-ttu-id="8bc63-130">È necessario spostare un circuito ExpressRoute da hello classic toohello ambiente di gestione delle risorse prima di provare toomigrate risorse che sono collegati circuito ExpressRoute toohello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-130">You must move an ExpressRoute circuit from hello classic toohello Resource Manager environment before you try toomigrate resources that are attached toohello ExpressRoute circuit.</span></span> <span data-ttu-id="8bc63-131">tooaccomplish questa attività, vedere hello seguenti articoli:</span><span class="sxs-lookup"><span data-stu-id="8bc63-131">tooaccomplish this task, see hello following articles:</span></span>

* <span data-ttu-id="8bc63-132">Esaminare le informazioni di hello previsti [lo spostamento di un circuito ExpressRoute da tooResource classico Manager](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="8bc63-132">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span>
* <span data-ttu-id="8bc63-133">[Spostare un circuito da tooResource classico gestione tramite Azure PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="8bc63-133">[Move a circuit from classic tooResource Manager using Azure PowerShell](expressroute-howto-move-arm.md).</span></span>
* <span data-ttu-id="8bc63-134">Utilizzare il portale di gestione del servizio Azure hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-134">Use hello Azure Service Management portal.</span></span> <span data-ttu-id="8bc63-135">È possibile seguire del flusso di lavoro hello troppo[creare un nuovo circuito ExpressRoute](expressroute-howto-circuit-portal-resource-manager.md) e selezionare l'opzione di importazione hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-135">You can follow hello workflow too[create a new ExpressRoute circuit](expressroute-howto-circuit-portal-resource-manager.md) and select hello import option.</span></span> 

<span data-ttu-id="8bc63-136">Questa operazione non comporta tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="8bc63-136">This operation does not involve downtime.</span></span> <span data-ttu-id="8bc63-137">È possibile continuare tootransfer dati tra la rete locale e Microsoft mentre è in corso la migrazione di hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-137">You can continue tootransfer data between your premises and Microsoft while hello migration is in progress.</span></span>

## <a name="migrate-virtual-networks-gateways-and-associated-deployments"></a><span data-ttu-id="8bc63-138">Eseguire la migrazione di reti virtuali, i gateway e distribuzioni associate</span><span class="sxs-lookup"><span data-stu-id="8bc63-138">Migrate virtual networks, gateways, and associated deployments</span></span>

<span data-ttu-id="8bc63-139">Hello passaggi toomigrate variano a seconda che le risorse vengano hello stessa sottoscrizione, diverse sottoscrizioni o entrambi.</span><span class="sxs-lookup"><span data-stu-id="8bc63-139">hello steps you follow toomigrate depend on whether your resources are in hello same subscription, different subscriptions, or both.</span></span>

### <a name="migrate-virtual-networks-gateways-and-associated-deployments-in-hello-same-subscription-as-hello-expressroute-circuit"></a><span data-ttu-id="8bc63-140">Eseguire la migrazione delle reti virtuali, i gateway, e distribuzioni associate in hello stessa sottoscrizione come hello circuito ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="8bc63-140">Migrate virtual networks, gateways, and associated deployments in hello same subscription as hello ExpressRoute circuit</span></span>
<span data-ttu-id="8bc63-141">In questa sezione descrive hello passaggi toobe seguito toomigrate una rete virtuale, gateway e le distribuzioni associate in hello stessa sottoscrizione come hello circuito ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="8bc63-141">This section describes hello steps toobe followed toomigrate a virtual network, gateway, and associated deployments in hello same subscription as hello ExpressRoute circuit.</span></span> <span data-ttu-id="8bc63-142">Questa migrazione non comporta tempi di inattività.</span><span class="sxs-lookup"><span data-stu-id="8bc63-142">No downtime is associated with this migration.</span></span> <span data-ttu-id="8bc63-143">È possibile continuare toouse tutte le risorse tramite il processo di migrazione hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-143">You can continue toouse all resources through hello migration process.</span></span> <span data-ttu-id="8bc63-144">il piano di gestione di Hello è bloccato mentre è in corso la migrazione di hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-144">hello management plane is locked while hello migration is in progress.</span></span> 

1. <span data-ttu-id="8bc63-145">Verificare che il circuito ExpressRoute hello è stato spostato dall'ambiente di gestione risorse di hello toohello classico.</span><span class="sxs-lookup"><span data-stu-id="8bc63-145">Ensure that hello ExpressRoute circuit has been moved from hello classic toohello Resource Manager environment.</span></span>
2. <span data-ttu-id="8bc63-146">Verificare che tale rete virtuale hello è stato preparato in modo appropriato per la migrazione di hello.</span><span class="sxs-lookup"><span data-stu-id="8bc63-146">Ensure that hello virtual network has been prepared appropriately for hello migration.</span></span>
3. <span data-ttu-id="8bc63-147">Registrare la sottoscrizione per la migrazione delle risorse.</span><span class="sxs-lookup"><span data-stu-id="8bc63-147">Register your subscription for resource migration.</span></span> <span data-ttu-id="8bc63-148">tooregister la sottoscrizione per la migrazione di risorse, utilizzare hello seguente frammento di PowerShell:</span><span class="sxs-lookup"><span data-stu-id="8bc63-148">tooregister your subscription for resource migration, use hello following PowerShell snippet:</span></span>

  ```powershell 
  Select-AzureRmSubscription -SubscriptionName <Your Subscription Name>
  Register-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  Get-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  ```
4. <span data-ttu-id="8bc63-149">Convalidare, preparare ed eseguire la migrazione.</span><span class="sxs-lookup"><span data-stu-id="8bc63-149">Validate, prepare, and migrate.</span></span> <span data-ttu-id="8bc63-150">toomove hello rete virtuale hello utilizzare seguente frammento di PowerShell:</span><span class="sxs-lookup"><span data-stu-id="8bc63-150">toomove hello virtual network, use hello following PowerShell snippet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Prepare $vnetName  
  Move-AzureVirtualNetwork -Commit $vnetName
  ```

  <span data-ttu-id="8bc63-151">È anche possibile interrompere la migrazione eseguendo hello cmdlet di PowerShell seguente:</span><span class="sxs-lookup"><span data-stu-id="8bc63-151">You can also abort migration by running hello following PowerShell cmdlet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Abort $vnetName
  ```

## <a name="next-steps"></a><span data-ttu-id="8bc63-152">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8bc63-152">Next steps</span></span>
* [<span data-ttu-id="8bc63-153">Piattaforma supportata la migrazione di risorse IaaS tooAzure classico Gestione risorse</span><span class="sxs-lookup"><span data-stu-id="8bc63-153">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="8bc63-154">Tecnica di informazioni approfondite su piattaforma supportata la migrazione da Gestione risorse di tooAzure classico</span><span class="sxs-lookup"><span data-stu-id="8bc63-154">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
* [<span data-ttu-id="8bc63-155">Domande frequenti: Piattaforma supportata migrazione delle risorse IaaS da Gestione risorse di tooAzure classico</span><span class="sxs-lookup"><span data-stu-id="8bc63-155">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="8bc63-156">Rivedere gli errori di migrazione più comuni e le soluzioni</span><span class="sxs-lookup"><span data-stu-id="8bc63-156">Review most common migration errors and mitigations</span></span>](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)
