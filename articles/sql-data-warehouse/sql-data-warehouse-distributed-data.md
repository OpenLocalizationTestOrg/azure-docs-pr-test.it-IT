---
title: Funzionamento dei dati distribuiti in Azure SQL Data Warehouse | Documentazione Microsoft
description: Informazioni sulla distribuzione dei dati per l'elaborazione parallela elevata (Massively Parallel Processing, MPP) e sulle opzioni di distribuzione delle tabelle in Azure SQL Data Warehouse e Parallel Data Warehouse.
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: jhubbard
editor: 
ms.assetid: bae494a6-7ac5-4c38-8ca3-ab2696c63a9f
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: tables
ms.date: 07/12/2017
ms.author: jrj;barbkess
ms.openlocfilehash: 3c166acb17193caae32d7bad133ec510ff679353
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="distributed-data-and-distributed-tables-for-massively-parallel-processing-mpp"></a><span data-ttu-id="38d19-103">Dati distribuiti e tabelle distribuite per l'elaborazione parallela elevata (Massively Parallel Processing, MPP)</span><span class="sxs-lookup"><span data-stu-id="38d19-103">Distributed data and distributed tables for Massively Parallel Processing (MPP)</span></span>
<span data-ttu-id="38d19-104">Informazioni sulla distribuzione dei dati utente in Azure SQL Data Warehouse e Parallel Data Warehouse, i sistemi di elaborazione parallela elevata (Massively Parallel Processing, MPP) di Microsoft.</span><span class="sxs-lookup"><span data-stu-id="38d19-104">Learn how user data is distributed in Azure SQL Data Warehouse and Parallel Data Warehouse, which are Microsoft's Massively Parallel Processing (MPP) systems.</span></span> <span data-ttu-id="38d19-105">La progettazione di un data warehouse che usa dati distribuiti consente di ottenere i vantaggi derivanti dall'elaborazione di query dell'architettura MPP.</span><span class="sxs-lookup"><span data-stu-id="38d19-105">Designing your data warehouse to use distributed data effectively helps you to achieve the query processing benefits of the MPP architecture.</span></span> <span data-ttu-id="38d19-106">Un numero limitato di scelte nella progettazione dei database può avere un impatto significativo nel miglioramento delle prestazioni delle query.</span><span class="sxs-lookup"><span data-stu-id="38d19-106">A few database design choices can have a significant impact on improving query performance.</span></span>  

> [!NOTE]
> <span data-ttu-id="38d19-107">Azure SQL Data Warehouse e Parallel Data Warehouse usano la stessa struttura di elaborazione parallela elevata (Massively Parallel Processing, MPP), con alcune differenze dovute alla piattaforma sottostante.</span><span class="sxs-lookup"><span data-stu-id="38d19-107">Azure SQL Data Warehouse and Parallel Data Warehouse use the same Massively Parallel Processing (MPP) design, but they have a few differences because of the underlying platform.</span></span> <span data-ttu-id="38d19-108">SQL Data Warehouse è una piattaforma distribuita come servizio (PaaS) eseguita in Azure.</span><span class="sxs-lookup"><span data-stu-id="38d19-108">SQL Data Warehouse is a Platform as a Service (PaaS) that runs on Azure.</span></span> <span data-ttu-id="38d19-109">Parallel Data Warehouse viene eseguita in APS (Analytics Platform System) un'appliance locale eseguita in Windows Server.</span><span class="sxs-lookup"><span data-stu-id="38d19-109">Parallel Data Warehouse runs on Analytics Platform System (APS) which is an on-premises appliance that runs on Windows Server.</span></span>
> 
> 

## <a name="what-is-distributed-data"></a><span data-ttu-id="38d19-110">Che cosa sono i dati distribuiti?</span><span class="sxs-lookup"><span data-stu-id="38d19-110">What is distributed data?</span></span>
<span data-ttu-id="38d19-111">In SQL Data Warehouse e Parallel Data Warehouse, i dati distribuiti fanno riferimento a dati utente archiviati in più percorsi nel sistema MPP.</span><span class="sxs-lookup"><span data-stu-id="38d19-111">In SQL Data Warehouse and Parallel Data Warehouse, distributed data refers to user data that is stored in multiple locations across the MPP system.</span></span> <span data-ttu-id="38d19-112">Ognuno di questi percorsi svolge la funzione di archivio indipendente e unità di elaborazione che esegue query nella relativa parte di dati.</span><span class="sxs-lookup"><span data-stu-id="38d19-112">Each of those locations functions as an independent storage and processing unit that runs queries on its portion of the data.</span></span> <span data-ttu-id="38d19-113">I dati distribuiti sono fondamentali per l'esecuzione parallela di query per ottenere prestazioni elevate.</span><span class="sxs-lookup"><span data-stu-id="38d19-113">Distributed data is fundamental to running queries in parallel to achieve high query performance.</span></span>

<span data-ttu-id="38d19-114">Per distribuire i dati, il data warehouse assegna ogni riga della tabella utente a un unico percorso distribuito.</span><span class="sxs-lookup"><span data-stu-id="38d19-114">To distribute data, the data warehouse assigns each row of a user table to one distributed location.</span></span>  <span data-ttu-id="38d19-115">È possibile distribuire le tabelle con un metodo di distribuzione hash o un metodo round robin.</span><span class="sxs-lookup"><span data-stu-id="38d19-115">You can distribute tables with a hash-distribution method or a round-robin method.</span></span> <span data-ttu-id="38d19-116">Il metodo di distribuzione è specificato nell'istruzione CREATE TABLE.</span><span class="sxs-lookup"><span data-stu-id="38d19-116">The distribution method is specified in the CREATE TABLE statement.</span></span> 

## <a name="hash-distributed-tables"></a><span data-ttu-id="38d19-117">Tabelle con distribuzione hash</span><span class="sxs-lookup"><span data-stu-id="38d19-117">Hash-distributed tables</span></span>
<span data-ttu-id="38d19-118">La figura seguente illustra come una tabella completa non distribuita viene archiviata come tabella con distribuzione hash.</span><span class="sxs-lookup"><span data-stu-id="38d19-118">The following diagram illustrates how a full (non-distributed table) gets stored as a hash-distributed table.</span></span> <span data-ttu-id="38d19-119">Una funzione deterministica assegna ogni riga in modo che appartenga a una sola distribuzione.</span><span class="sxs-lookup"><span data-stu-id="38d19-119">A deterministic function assigns each row to belong to one distribution.</span></span> <span data-ttu-id="38d19-120">Nella definizione della tabella una delle colonne è definita come colonna di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="38d19-120">In the table definition, one of the columns is designated as the distribution column.</span></span> <span data-ttu-id="38d19-121">La funzione hash usa il valore della colonna di distribuzione per assegnare ciascuna riga a una distribuzione.</span><span class="sxs-lookup"><span data-stu-id="38d19-121">The hash function uses the value in the distribution column to assign each row to a distribution.</span></span>

<span data-ttu-id="38d19-122">Ai fini delle prestazioni, per la selezione di una colonna di distribuzione è necessario considerare alcuni aspetti, ad esempio la specificità, la differenza dei dati e i tipi di query eseguite nel sistema.</span><span class="sxs-lookup"><span data-stu-id="38d19-122">There are performance considerations for the selection of a distribution column, such as distinctness, data skew, and the types of queries run on the system.</span></span>

<span data-ttu-id="38d19-123">![Tabella distribuita](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Tabella distribuita")</span><span class="sxs-lookup"><span data-stu-id="38d19-123">![Distributed table](media/sql-data-warehouse-distributed-data/hash-distributed-table.png "Distributed table")</span></span>  

* <span data-ttu-id="38d19-124">Ogni riga appartiene a una sola distribuzione.</span><span class="sxs-lookup"><span data-stu-id="38d19-124">Each row belongs to one distribution.</span></span>  
* <span data-ttu-id="38d19-125">Un algoritmo hash deterministico assegna ogni riga a una sola distribuzione.</span><span class="sxs-lookup"><span data-stu-id="38d19-125">A deterministic hash algorithm assigns each row to one distribution.</span></span>  
* <span data-ttu-id="38d19-126">Il numero di righe di tabella per distribuzione varia come mostrano le diverse dimensioni delle tabelle.</span><span class="sxs-lookup"><span data-stu-id="38d19-126">The number of table rows per distribution varies as shown by the different sizes of tables.</span></span>

## <a name="round-robin-distributed-tables"></a><span data-ttu-id="38d19-127">Tabelle con distribuzione round robin</span><span class="sxs-lookup"><span data-stu-id="38d19-127">Round-robin distributed tables</span></span>
<span data-ttu-id="38d19-128">Una tabella con distribuzione round robin distribuisce le righe assegnando ciascuna riga a una distribuzione in modo sequenziale.</span><span class="sxs-lookup"><span data-stu-id="38d19-128">A round-robin distributed table distributes the rows by assigning each row to a distribution in a sequential manner.</span></span> <span data-ttu-id="38d19-129">Il caricamento dei dati in una tabella round robin è rapido, ma le prestazioni delle query potrebbero essere inferiori.</span><span class="sxs-lookup"><span data-stu-id="38d19-129">It is quick to load data into a round-robin table, but query performance might be slower.</span></span>  <span data-ttu-id="38d19-130">L'aggiunta di una tabella round robin richiede in genere una ridistribuzione delle righe per consentire alla query di restituire un risultato accurato, un'operazione che richiede tempo.</span><span class="sxs-lookup"><span data-stu-id="38d19-130">Joining a round-robin table usually requires reshuffling the rows to enable the query to produce an accurate result, which takes time.</span></span>

## <a name="distributed-storage-locations-are-called-distributions"></a><span data-ttu-id="38d19-131">Le posizioni di archiviazione distribuite sono chiamate distribuzioni</span><span class="sxs-lookup"><span data-stu-id="38d19-131">Distributed storage locations are called distributions</span></span>
<span data-ttu-id="38d19-132">Ogni posizione distribuita è una distribuzione.</span><span class="sxs-lookup"><span data-stu-id="38d19-132">Each distributed location is called a distribution.</span></span> <span data-ttu-id="38d19-133">Quando viene eseguita una query in parallelo, ogni distribuzione esegue una query SQL nella relativa parte di dati.</span><span class="sxs-lookup"><span data-stu-id="38d19-133">When a query runs in parallel, each distribution performs a SQL query on its portion of the data.</span></span> <span data-ttu-id="38d19-134">SQL Data Warehouse usa il database SQL per eseguire la query.</span><span class="sxs-lookup"><span data-stu-id="38d19-134">SQL Data Warehouse uses SQL Database to run the query.</span></span> <span data-ttu-id="38d19-135">Parallel Data Warehouse usa SQL Server per eseguire la query.</span><span class="sxs-lookup"><span data-stu-id="38d19-135">Parallel Data Warehouse uses SQL Server to run the query.</span></span> <span data-ttu-id="38d19-136">Questa architettura priva di condivisione è fondamentale per ottenere un'elaborazione parallela con scalabilità orizzontale.</span><span class="sxs-lookup"><span data-stu-id="38d19-136">This shared-nothing architecture design is fundamental to achieving scale-out parallel computing.</span></span>

### <a name="can-i-view-the-distributions"></a><span data-ttu-id="38d19-137">È possibile visualizzare le distribuzioni?</span><span class="sxs-lookup"><span data-stu-id="38d19-137">Can I view the distributions?</span></span>
<span data-ttu-id="38d19-138">Ogni distribuzione ha un ID distribuzione ed è visibile nelle visualizzazioni di sistema relative a SQL Data Warehouse e Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="38d19-138">Each distribution has a distribution ID and is visible in system views that pertain to SQL Data Warehouse and Parallel Data Warehouse.</span></span> <span data-ttu-id="38d19-139">È possibile usare l'ID distribuzione per risolvere i problemi di prestazioni delle query e altri problemi.</span><span class="sxs-lookup"><span data-stu-id="38d19-139">You can use the distribution ID to troubleshoot query performance and other problems.</span></span> <span data-ttu-id="38d19-140">Per un elenco delle visualizzazioni di sistema, vedere la [visualizzazione di sistema MPP](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="38d19-140">For a list of the system views, see the [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <a name="difference-between-a-distribution-and-a-compute-node"></a><span data-ttu-id="38d19-141">Differenza tra una distribuzione e un nodo di calcolo</span><span class="sxs-lookup"><span data-stu-id="38d19-141">Difference between a distribution and a Compute node</span></span>
<span data-ttu-id="38d19-142">Una distribuzione è l'unità di base per l'archiviazione dei dati distribuiti e l'elaborazione di query parallela.</span><span class="sxs-lookup"><span data-stu-id="38d19-142">A distribution is the basic unit for storing distributed data and processing parallel queries.</span></span> <span data-ttu-id="38d19-143">Le distribuzioni sono raggruppate in nodi di calcolo.</span><span class="sxs-lookup"><span data-stu-id="38d19-143">Distributions are grouped into Compute nodes.</span></span> <span data-ttu-id="38d19-144">Ogni nodo di calcolo tiene traccia di una o più distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="38d19-144">Each Compute node tracks one or more distributions.</span></span>  

* <span data-ttu-id="38d19-145">Analytics Platform System usa i nodi di calcolo come componente fondamentale dell'architettura hardware e delle funzionalità di scalabilità orizzontale.</span><span class="sxs-lookup"><span data-stu-id="38d19-145">Analytics Platform System uses Compute nodes as a central component of the hardware architecture and scale-out capabilities.</span></span> <span data-ttu-id="38d19-146">Vengono sempre usate otto distribuzioni per ogni nodo di calcolo, come illustrato nella figura per le tabelle con distribuzione hash.</span><span class="sxs-lookup"><span data-stu-id="38d19-146">It always uses eight distributions per Compute node, as shown in the diagram for hash-distributed tables.</span></span> <span data-ttu-id="38d19-147">Il numero di nodi di calcolo e pertanto il numero di distribuzioni è determinato dal numero di nodi di calcolo acquistati per il dispositivo.</span><span class="sxs-lookup"><span data-stu-id="38d19-147">The number of Compute nodes, and therefore the number of distributions, is determined by the number of Compute nodes you purchase for the appliance.</span></span> <span data-ttu-id="38d19-148">Ad esempio, se si acquistano otto nodi di calcolo, si avranno a disposizione 64 distribuzioni (8 nodi di calcolo x 8 distribuzioni/nodo).</span><span class="sxs-lookup"><span data-stu-id="38d19-148">For example, if you purchase eight Compute nodes, you get 64 distributions (8 Compute nodes x 8 distributions/node).</span></span> 
* <span data-ttu-id="38d19-149">SQL Data Warehouse ha un numero fisso di 60 distribuzioni e un numero variabile di nodi di calcolo.</span><span class="sxs-lookup"><span data-stu-id="38d19-149">SQL Data Warehouse has a fixed number of 60 distributions and a flexible number of Compute nodes.</span></span> <span data-ttu-id="38d19-150">I nodi di calcolo vengono implementati con le risorse di elaborazione e di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="38d19-150">The Compute nodes are implemented with Azure computing and storage resources.</span></span> <span data-ttu-id="38d19-151">Il numero di nodi di calcolo può variare in base al carico di lavoro del servizio back-end e alla capacità di elaborazione (DWU) specificata per il data warehouse.</span><span class="sxs-lookup"><span data-stu-id="38d19-151">The number of Compute nodes can change according to the backend service workload and the computing capacity (DWUs) you specify for the data warehouse.</span></span> <span data-ttu-id="38d19-152">Quando il numero di nodi di calcolo viene modificato, viene modificato anche il numero di distribuzioni per nodo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="38d19-152">When the number of Compute nodes changes, the number of distributions per Compute node also changes.</span></span> 

### <a name="can-i-view-the-compute-nodes"></a><span data-ttu-id="38d19-153">È possibile visualizzare i nodi di calcolo?</span><span class="sxs-lookup"><span data-stu-id="38d19-153">Can I view the Compute nodes?</span></span>
<span data-ttu-id="38d19-154">Ogni nodo di calcolo ha un ID nodo ed è visibile nelle visualizzazioni di sistema relative a SQL Data Warehouse e Parallel Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="38d19-154">Each Compute node has a node ID and is visible in system views that pertain to SQL Data Warehouse and Parallel Data Warehouse.</span></span>  <span data-ttu-id="38d19-155">È possibile visualizzare il nodo di calcolo cercando la colonna node_id nelle visualizzazioni di sistema il cui nome inizia con sys.pdw_nodes.</span><span class="sxs-lookup"><span data-stu-id="38d19-155">You can see the Compute node by looking for the node_id column in system views whose names begin with sys.pdw_nodes.</span></span> <span data-ttu-id="38d19-156">Per un elenco delle visualizzazioni di sistema, vedere la [visualizzazione di sistema MPP](sql-data-warehouse-reference-tsql-statements.md).</span><span class="sxs-lookup"><span data-stu-id="38d19-156">For a list of the system views, see the [MPP system view](sql-data-warehouse-reference-tsql-statements.md).</span></span>

## <span data-ttu-id="38d19-157"><a name="Replicated"></a>Tabelle replicate</span><span class="sxs-lookup"><span data-stu-id="38d19-157"><a name="Replicated"></a>Replicated Tables</span></span>
<span data-ttu-id="38d19-158">Una tabella replicata include una copia completa della tabella archiviata in ogni nodo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="38d19-158">A table that is replicated has a fully copy of the table stored on each Compute node.</span></span> <span data-ttu-id="38d19-159">La replica di una tabella elimina la necessità di trasferire dati tra i nodi di calcolo prima di un join o un'aggregazione.</span><span class="sxs-lookup"><span data-stu-id="38d19-159">Replicating a table removes the need to transfer data among Compute nodes before a join or aggregation.</span></span> <span data-ttu-id="38d19-160">Le tabelle replicate sono realizzabili con tabelle di piccole dimensioni a causa della memoria aggiuntiva necessaria per archiviare l'intera tabella in ogni nodo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="38d19-160">Replicated tables are only feasible with small tables because of the extra storage required to store the full table on each compute node.</span></span>  

<span data-ttu-id="38d19-161">La figura seguente illustra una tabella replicata archiviata in ogni nodo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="38d19-161">The following diagram shows a replicated table that is stored on each Compute node.</span></span> <span data-ttu-id="38d19-162">Per SQL Data Warehouse, la tabella replicata viene copiata per intero in un database di distribuzione in ogni nodo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="38d19-162">For SQL Data Warehouse, the replicated table is fully copied to a distribution database on each Compute node.</span></span> <span data-ttu-id="38d19-163">Per Parallel Data Warehouse, la tabella replicata è archiviata in tutti i dischi assegnati al nodo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="38d19-163">For Parallel Data Warehouse, the replicated table is stored across all disks assigned to the Compute node.</span></span>  <span data-ttu-id="38d19-164">Questa strategia di archiviazione su disco viene implementata usando i filegroup di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="38d19-164">This disk strategy is implemented by using SQL Server filegroups.</span></span>  

<span data-ttu-id="38d19-165">![Tabella replicata](media/sql-data-warehouse-distributed-data/replicated-table.png "Tabella replicata")</span><span class="sxs-lookup"><span data-stu-id="38d19-165">![Replicated table](media/sql-data-warehouse-distributed-data/replicated-table.png "Replicated table")</span></span> 

## <a name="next-steps"></a><span data-ttu-id="38d19-166">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="38d19-166">Next steps</span></span>
<span data-ttu-id="38d19-167">Per un uso efficace delle tabelle distribuite, vedere [Distributing tables in SQL Data Warehouse](sql-data-warehouse-tables-distribute.md) (Distribuzione di tabelle in SQL Data Warehouse)</span><span class="sxs-lookup"><span data-stu-id="38d19-167">To use distributed tables effectively, see [Distributing tables in SQL Data Warehouse](sql-data-warehouse-tables-distribute.md)</span></span>  

