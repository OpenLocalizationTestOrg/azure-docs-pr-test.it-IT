---
<span data-ttu-id="aea00-101">titolo: aaa "lezione supplementare di Azure Analysis Services tutorial: sicurezza dinamica | Descrizione di "Microsoft Docs: viene descritto come toouse sicurezza dinamica mediante riga filtri nell'esercitazione di hello Azure Analysis Services.</span><span class="sxs-lookup"><span data-stu-id="aea00-101">title: aaa"Azure Analysis Services tutorial supplemental lesson: Dynamic security | Microsoft Docs" description: Describes how toouse dynamic security by using row filters in hello Azure Analysis Services tutorial.</span></span>
<span data-ttu-id="aea00-102">servizi: documentationcenter di analysis services: ' autore: manager minewiskan: erikre editor: ' tag: '</span><span class="sxs-lookup"><span data-stu-id="aea00-102">services: analysis-services documentationcenter: '' author: minewiskan manager: erikre editor: '' tags: ''</span></span>

<span data-ttu-id="aea00-103">ms. AssetID: ms. Service: ms. DevLang analysis services: ms. topic NA: ms. tgt_pltfrm get-started-article: Workload NA: ms. date na: author 26/05/2017: owend</span><span class="sxs-lookup"><span data-stu-id="aea00-103">ms.assetid: ms.service: analysis-services ms.devlang: NA ms.topic: get-started-article ms.tgt_pltfrm: NA ms.workload: na ms.date: 05/26/2017 ms.author: owend</span></span>
---
# <a name="supplemental-lesson---dynamic-security"></a><span data-ttu-id="aea00-104">Lezione supplementare: Sicurezza dinamica</span><span class="sxs-lookup"><span data-stu-id="aea00-104">Supplemental lesson - Dynamic security</span></span>

[!INCLUDE[analysis-services-appliesto-aas-sql2017-later](../../../includes/analysis-services-appliesto-aas-sql2017-later.md)]

<span data-ttu-id="aea00-105">In questa lezione supplementare si creerà un ruolo aggiuntivo che implementa la sicurezza dinamica.</span><span class="sxs-lookup"><span data-stu-id="aea00-105">In this supplemental lesson, you create an additional role that implements dynamic security.</span></span> <span data-ttu-id="aea00-106">Sicurezza dinamica offre sicurezza a livello di riga in base alle hello Nome account di accesso o l'id di hello utente attualmente connesso.</span><span class="sxs-lookup"><span data-stu-id="aea00-106">Dynamic security provides row-level security based on hello user name or login id of hello user currently logged on.</span></span> 
  
<span data-ttu-id="aea00-107">sicurezza dinamica tooimplement, si aggiunge un modello di tooyour di tabella contenente i nomi utente hello degli utenti che possono connettersi toohello modello e visualizzare dati e oggetti modello.</span><span class="sxs-lookup"><span data-stu-id="aea00-107">tooimplement dynamic security, you add a table tooyour model containing hello user names of those users that can connect toohello model and browse model objects and data.</span></span> <span data-ttu-id="aea00-108">modello di Hello creato in questa esercitazione è nel contesto di hello di Adventure Works; Tuttavia, toocomplete questa lezione, è necessario aggiungere una tabella contenente gli utenti del proprio dominio.</span><span class="sxs-lookup"><span data-stu-id="aea00-108">hello model you create using this tutorial is in hello context of Adventure Works; however, toocomplete this lesson, you must add a table containing users from your own domain.</span></span> <span data-ttu-id="aea00-109">Le password hello non è necessario per i nomi utente hello che vengono aggiunti.</span><span class="sxs-lookup"><span data-stu-id="aea00-109">You do not need hello passwords for hello user names that are added.</span></span> <span data-ttu-id="aea00-110">toocreate una tabella EmployeeSecurity, con una piccola parte degli utenti del proprio dominio, utilizzare funzionalità Incolla hello, incollare i dati dei dipendenti da un foglio di calcolo di Excel.</span><span class="sxs-lookup"><span data-stu-id="aea00-110">toocreate an EmployeeSecurity table, with a small sample of users from your own domain, you use hello Paste feature, pasting employee data from an Excel spreadsheet.</span></span> <span data-ttu-id="aea00-111">In uno scenario reale, tabella hello contenente i nomi utente in genere sarebbe una tabella da un database effettivo come un'origine dati. ad esempio, una tabella DimEmployee reale.</span><span class="sxs-lookup"><span data-stu-id="aea00-111">In a real-world scenario, hello table containing user names would typically be a table from an actual database as a data source; for example, a real DimEmployee table.</span></span>  
  
<span data-ttu-id="aea00-112">sicurezza dinamica tooimplement, utilizzare due funzioni DAX: [funzione USERNAME (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) e [funzione LOOKUPVALUE (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span><span class="sxs-lookup"><span data-stu-id="aea00-112">tooimplement dynamic security, you use two DAX functions: [USERNAME Function (DAX)](http://msdn.microsoft.com/22dddc4b-1648-4c89-8c93-f1151162b93f) and [LOOKUPVALUE Function (DAX)](http://msdn.microsoft.com/73a51c4d-131c-4c33-a139-b1342d10caab).</span></span> <span data-ttu-id="aea00-113">Queste funzioni, applicate in una formula di filtro di riga, vengono definite in un nuovo ruolo.</span><span class="sxs-lookup"><span data-stu-id="aea00-113">These functions, applied in a row filter formula, are defined in a new role.</span></span> <span data-ttu-id="aea00-114">Tramite la funzione LOOKUPVALUE hello, formula hello specifica un valore dalla tabella EmployeeSecurity hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-114">By using hello LOOKUPVALUE function, hello formula specifies a value from hello EmployeeSecurity table.</span></span> <span data-ttu-id="aea00-115">formula Hello passa quindi funzione USERNAME toohello di valore, che specifica il nome utente hello dell'utente hello connesso appartiene toothis ruolo.</span><span class="sxs-lookup"><span data-stu-id="aea00-115">hello formula then passes that value toohello USERNAME function, which specifies hello user name of hello user logged on belongs toothis role.</span></span> <span data-ttu-id="aea00-116">utente Hello possibile passare solo i dati specificati dai filtri di riga del ruolo hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-116">hello user can then browse only data specified by hello role’s row filters.</span></span> <span data-ttu-id="aea00-117">In questo scenario, si specifica che addetti alle vendite possono esplorare solo i dati delle vendite Internet per territori di vendita hello in cui sono membri.</span><span class="sxs-lookup"><span data-stu-id="aea00-117">In this scenario, you specify that sales employees can only browse Internet sales data for hello sales territories in which they are a member.</span></span>  
  
<span data-ttu-id="aea00-118">Le attività che sono univoci toothis scenario di modello tabulare Adventure Works, ma potrebbero non applicarsi necessariamente uno scenario reale tooa vengono identificate come tali.</span><span class="sxs-lookup"><span data-stu-id="aea00-118">Those tasks that are unique toothis Adventure Works tabular model scenario, but would not necessarily apply tooa real-world scenario are identified as such.</span></span> <span data-ttu-id="aea00-119">Ogni attività include informazioni aggiuntive che descrivono hello scopo hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-119">Each task includes additional information describing hello purpose of hello task.</span></span>  
  
<span data-ttu-id="aea00-120">Stimato toocomplete ora questa lezione: **30 minuti**</span><span class="sxs-lookup"><span data-stu-id="aea00-120">Estimated time toocomplete this lesson: **30 minutes**</span></span>  
  
## <a name="prerequisites"></a><span data-ttu-id="aea00-121">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="aea00-121">Prerequisites</span></span>  
<span data-ttu-id="aea00-122">L'argomento di questa lezione supplementare fa parte di un'esercitazione sulla creazione di modelli tabulari, con lezioni che è consigliabile completare nell'ordine indicato.</span><span class="sxs-lookup"><span data-stu-id="aea00-122">This supplemental lesson topic is part of a tabular modeling tutorial, which should be completed in order.</span></span> <span data-ttu-id="aea00-123">Prima di eseguire attività di hello in questa lezione supplementare, è necessario avere completato tutte le lezioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="aea00-123">Before performing hello tasks in this supplemental lesson, you should have completed all previous lessons.</span></span>  
  
## <a name="add-hello-dimsalesterritory-table-toohello-aw-internet-sales-tabular-model-project"></a><span data-ttu-id="aea00-124">Aggiungere hello DimSalesTerritory tabella toohello progetto AW Internet Sales Tabular Model</span><span class="sxs-lookup"><span data-stu-id="aea00-124">Add hello DimSalesTerritory table toohello AW Internet Sales Tabular Model Project</span></span>  
<span data-ttu-id="aea00-125">tooimplement sicurezza dinamica per questo scenario di Adventure Works, è necessario aggiungere due modelli di tooyour tabelle aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="aea00-125">tooimplement dynamic security for this Adventure Works scenario, you must add two additional tables tooyour model.</span></span> <span data-ttu-id="aea00-126">prima tabella Hello aggiungere è DimSalesTerritory (come territorio vendita) da hello stesso database AdventureWorksDW.</span><span class="sxs-lookup"><span data-stu-id="aea00-126">hello first table you add is DimSalesTerritory (as Sales Territory) from hello same AdventureWorksDW database.</span></span> <span data-ttu-id="aea00-127">Successivamente, si applica una riga toohello SalesTerritory tabella dei filtri che definisce i dati specifici di hello hello utente connesso può esplorare.</span><span class="sxs-lookup"><span data-stu-id="aea00-127">You later apply a row filter toohello SalesTerritory table that defines hello particular data hello logged on user can browse.</span></span>  
  
#### <a name="tooadd-hello-dimsalesterritory-table"></a><span data-ttu-id="aea00-128">tabella DimSalesTerritory di hello tooadd</span><span class="sxs-lookup"><span data-stu-id="aea00-128">tooadd hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="aea00-129">In Esplora modelli tabulari espandere **Origini dati**, fare clic con il pulsante destro del mouse sulla connessione e quindi scegliere **Importa nuove tabelle**.</span><span class="sxs-lookup"><span data-stu-id="aea00-129">In Tabular Model Explorer > **Data Sources**, right-click your connection, and then click **Import New Tables**.</span></span>  

    <span data-ttu-id="aea00-130">Se viene visualizzata la finestra di dialogo credenziali di rappresentazione di hello, digitare le credenziali di rappresentazione hello è utilizzata nella lezione 2: aggiungere dati.</span><span class="sxs-lookup"><span data-stu-id="aea00-130">If hello Impersonation Credentials dialog box appears, type hello impersonation credentials you used in Lesson 2: Add Data.</span></span>
  
2.  <span data-ttu-id="aea00-131">Nel Pannello di navigazione, selezionare hello **DimSalesTerritory** tabella e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="aea00-131">In Navigator, select hello **DimSalesTerritory** table, and then click **OK**.</span></span>    
  
3.  <span data-ttu-id="aea00-132">Nell'Editor di Query, fare clic su hello **DimSalesTerritory** eseguire una query, quindi rimuovere **SalesTerritoryAlternateKey** colonna.</span><span class="sxs-lookup"><span data-stu-id="aea00-132">In Query Editor, click hello **DimSalesTerritory** query, and then remove **SalesTerritoryAlternateKey** column.</span></span>  
  
7.  <span data-ttu-id="aea00-133">Fare clic su **Importa**.</span><span class="sxs-lookup"><span data-stu-id="aea00-133">Click **Import**.</span></span>  
  
    <span data-ttu-id="aea00-134">Hello nuova tabella verrà aggiunta l'area di lavoro modello toohello.</span><span class="sxs-lookup"><span data-stu-id="aea00-134">hello new table is added toohello model workspace.</span></span> <span data-ttu-id="aea00-135">Oggetti e dati dalla tabella DimSalesTerritory di origine hello vengono quindi importati nel modello tabulare AW Internet Sales.</span><span class="sxs-lookup"><span data-stu-id="aea00-135">Objects and data from hello source DimSalesTerritory table are then imported into your AW Internet Sales Tabular Model.</span></span>  
  
9. <span data-ttu-id="aea00-136">Dopo la tabella hello è stata importata correttamente, fare clic su **Chiudi**.</span><span class="sxs-lookup"><span data-stu-id="aea00-136">After hello table has been imported successfully, click **Close**.</span></span>  

## <a name="add-a-table-with-user-name-data"></a><span data-ttu-id="aea00-137">Aggiungere una tabella con i dati dei nomi utente</span><span class="sxs-lookup"><span data-stu-id="aea00-137">Add a table with user name data</span></span>  
<span data-ttu-id="aea00-138">tabella DimEmployee Hello nel database di esempio AdventureWorksDW hello contiene gli utenti del dominio AdventureWorks hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-138">hello DimEmployee table in hello AdventureWorksDW sample database contains users from hello AdventureWorks domain.</span></span> <span data-ttu-id="aea00-139">Questo nomi utente, tuttavia, non esistono nel proprio ambiente.</span><span class="sxs-lookup"><span data-stu-id="aea00-139">Those user names do not exist in your own environment.</span></span> <span data-ttu-id="aea00-140">È necessario quindi creare una tabella nel modello che contenga un piccolo campione (almeno tre) di utenti reali dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="aea00-140">You must create a table in your model that contains a small sample (at least three) of actual users from your organization.</span></span> <span data-ttu-id="aea00-141">È quindi possibile aggiungere questi utenti come membri toohello nuovo ruolo.</span><span class="sxs-lookup"><span data-stu-id="aea00-141">You then add these users as members toohello new role.</span></span> <span data-ttu-id="aea00-142">Non è necessario per i nomi utente di esempio hello password hello, ma è necessario nomi utente di Windows effettivi presenti nel proprio dominio.</span><span class="sxs-lookup"><span data-stu-id="aea00-142">You do not need hello passwords for hello sample user names, but you do need actual Windows user names from your own domain.</span></span>  
  
#### <a name="tooadd-an-employeesecurity-table"></a><span data-ttu-id="aea00-143">una tabella EmployeeSecurity tooadd</span><span class="sxs-lookup"><span data-stu-id="aea00-143">tooadd an EmployeeSecurity table</span></span>  
  
1.  <span data-ttu-id="aea00-144">Aprire Microsoft Excel per creare un foglio di lavoro.</span><span class="sxs-lookup"><span data-stu-id="aea00-144">Open Microsoft Excel, creating a worksheet.</span></span>  
  
2.  <span data-ttu-id="aea00-145">Copiare hello seguente tabella, incluse le righe di intestazione hello e quindi incollarlo nel foglio di lavoro hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-145">Copy hello following table, including hello header row, and then paste it into hello worksheet.</span></span>  

    ```
      |EmployeeId|SalesTerritoryId|FirstName|LastName|LoginId|  
      |---------------|----------------------|--------------|-------------|------------|  
      |1|2|<user first name>|<user last name>|\<domain\username>|  
      |1|3|<user first name>|<user last name>|\<domain\username>|  
      |2|4|<user first name>|<user last name>|\<domain\username>|  
      |3|5|<user first name>|<user last name>|\<domain\username>|  
    ```

3.  <span data-ttu-id="aea00-146">Sostituire hello nome, cognome e dominio omeutente con nomi di hello e gli ID di accesso dei tre utenti dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="aea00-146">Replace hello first name, last name, and domain\username with hello names and login ids of three users in your organization.</span></span> <span data-ttu-id="aea00-147">Inserire hello stesso utente su hello prime due righe per EmployeeId 1, che mostra toomore rispetto a un territorio di vendita a cui appartiene questo utente.</span><span class="sxs-lookup"><span data-stu-id="aea00-147">Put hello same user on hello first two rows, for EmployeeId 1, showing this user belongs toomore than one sales territory.</span></span> <span data-ttu-id="aea00-148">Lasciare hello campi EmployeeId e SalesTerritoryId così come sono.</span><span class="sxs-lookup"><span data-stu-id="aea00-148">Leave hello EmployeeId and SalesTerritoryId fields as they are.</span></span>  
  
4.  <span data-ttu-id="aea00-149">Salvare il foglio di lavoro hello **SampleEmployee**.</span><span class="sxs-lookup"><span data-stu-id="aea00-149">Save hello worksheet as **SampleEmployee**.</span></span>  
  
5.  <span data-ttu-id="aea00-150">Nel foglio di lavoro hello, selezionare tutte le celle di hello con i dati dei dipendenti, incluse le intestazioni di hello, quindi fare doppio clic su dati hello selezionata e quindi fare clic su **copia**.</span><span class="sxs-lookup"><span data-stu-id="aea00-150">In hello worksheet, select all hello cells with employee data, including hello headers, then right-click hello selected data, and then click **Copy**.</span></span>  
  
6.  <span data-ttu-id="aea00-151">In SSDT, fare clic su hello **modifica** menu e quindi fare clic su **Incolla**.</span><span class="sxs-lookup"><span data-stu-id="aea00-151">In SSDT, click hello **Edit** menu, and then click **Paste**.</span></span>  
  
    <span data-ttu-id="aea00-152">Se Incolla è disattivato, fare clic su qualsiasi colonna di qualsiasi tabella nella finestra di progettazione modelli di hello e riprovare.</span><span class="sxs-lookup"><span data-stu-id="aea00-152">If Paste is grayed out, click any column in any table in hello model designer window, and try again.</span></span>  
  
7.  <span data-ttu-id="aea00-153">In hello **anteprima Incolla** della finestra di dialogo **nome tabella**, tipo **EmployeeSecurity**.</span><span class="sxs-lookup"><span data-stu-id="aea00-153">In hello **Paste Preview** dialog box, in **Table Name**, type **EmployeeSecurity**.</span></span>  
  
8.  <span data-ttu-id="aea00-154">In **toobe dati incollati**, verificare che i dati di hello includono tutti i dati utente hello e le intestazioni dal foglio di lavoro SampleEmployee hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-154">In **Data toobe pasted**, verify hello data includes all hello user data and headers from hello SampleEmployee worksheet.</span></span>  
  
9. <span data-ttu-id="aea00-155">Verificare che l'opzione **Usa la prima riga per le intestazioni di colonna** sia selezionata e quindi fare clic su **Ok**.</span><span class="sxs-lookup"><span data-stu-id="aea00-155">Verify **Use first row as column headers** is checked, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="aea00-156">Viene creata una nuova tabella denominata EmployeeSecurity con i dati dei dipendenti copiati dal foglio di lavoro SampleEmployee hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-156">A new table named EmployeeSecurity with employee data copied from hello SampleEmployee worksheet is created.</span></span>  
  
## <a name="create-relationships-between-factinternetsales-dimgeography-and-dimsalesterritory-table"></a><span data-ttu-id="aea00-157">Creare relazioni tra le tabelle FactInternetSales, DimGeography e DimSalesTerritory</span><span class="sxs-lookup"><span data-stu-id="aea00-157">Create relationships between FactInternetSales, DimGeography, and DimSalesTerritory table</span></span>  
<span data-ttu-id="aea00-158">Hello FactInternetSales e DimGeography DimSalesTerritory tabella tutti contenere una colonna comune, SalesTerritoryId.</span><span class="sxs-lookup"><span data-stu-id="aea00-158">hello FactInternetSales, DimGeography, and DimSalesTerritory table all contain a common column, SalesTerritoryId.</span></span> <span data-ttu-id="aea00-159">Hello SalesTerritoryId colonna tabella DimSalesTerritory hello contiene i valori con un Id diverso per ogni territorio di vendita.</span><span class="sxs-lookup"><span data-stu-id="aea00-159">hello SalesTerritoryId column in hello DimSalesTerritory table contains values with a different Id for each sales territory.</span></span>  
  
#### <a name="toocreate-relationships-between-hello-factinternetsales-dimgeography-and-hello-dimsalesterritory-table"></a><span data-ttu-id="aea00-160">tabella DimSalesTerritory hello hello FactInternetSales e DimGeography toocreate relazioni</span><span class="sxs-lookup"><span data-stu-id="aea00-160">toocreate relationships between hello FactInternetSales, DimGeography, and hello DimSalesTerritory table</span></span>  
  
1.  <span data-ttu-id="aea00-161">Nella visualizzazione Diagramma, hello **DimGeography** tabella, fare clic e tenere premuto hello **SalesTerritoryId** colonna, quindi trascinare hello cursore toohello **SalesTerritoryId** colonna hello **DimSalesTerritory** tabella e infine rilasciare.</span><span class="sxs-lookup"><span data-stu-id="aea00-161">In Diagram View, in hello **DimGeography** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
2.  <span data-ttu-id="aea00-162">In hello **FactInternetSales** tabella, fare clic e tenere premuto hello **SalesTerritoryId** colonna, quindi trascinare hello cursore toohello **SalesTerritoryId** colonna hello  **DimSalesTerritory** tabella e infine rilasciare.</span><span class="sxs-lookup"><span data-stu-id="aea00-162">In hello **FactInternetSales** table, click, and hold on hello **SalesTerritoryId** column, then drag hello cursor toohello **SalesTerritoryId** column in hello **DimSalesTerritory** table, and then release.</span></span>  
  
    <span data-ttu-id="aea00-163">Hello avviso proprietà Active di questa relazione è False, ovvero che non è attivo.</span><span class="sxs-lookup"><span data-stu-id="aea00-163">Notice hello Active property for this relationship is False, meaning it's inactive.</span></span> <span data-ttu-id="aea00-164">tabella FactInternetSales Hello esiste già un'altra relazione attiva.</span><span class="sxs-lookup"><span data-stu-id="aea00-164">hello FactInternetSales table already has another active relationship.</span></span>  
  
## <a name="hide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="aea00-165">Nascondere hello EmployeeSecurity tabella dalle applicazioni client</span><span class="sxs-lookup"><span data-stu-id="aea00-165">Hide hello EmployeeSecurity Table from client applications</span></span>  
<span data-ttu-id="aea00-166">In questa attività si nasconde tabella EmployeeSecurity hello, mantenendolo venga visualizzato nell'elenco di campi di un'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="aea00-166">In this task, you hide hello EmployeeSecurity table, keeping it from appearing in a client application’s field list.</span></span> <span data-ttu-id="aea00-167">Tenere presente che nascondere una tabella non significa proteggerla.</span><span class="sxs-lookup"><span data-stu-id="aea00-167">Keep in mind that hiding a table does not secure it.</span></span> <span data-ttu-id="aea00-168">Gli utenti possono comunque eseguire query per recuperare dati dalla tabella EmployeeSecurity, se sanno come farlo.</span><span class="sxs-lookup"><span data-stu-id="aea00-168">Users can still query EmployeeSecurity table data if they know how.</span></span> <span data-ttu-id="aea00-169">toosecure hello EmployeeSecurity dati della tabella, impedendo agli utenti in grado di tooquery i relativi dati, si applica un filtro in un'attività successiva.</span><span class="sxs-lookup"><span data-stu-id="aea00-169">toosecure hello EmployeeSecurity table data, preventing users from being able tooquery any of its data, you apply a filter in a later task.</span></span>  
  
#### <a name="toohide-hello-employeesecurity-table-from-client-applications"></a><span data-ttu-id="aea00-170">Nella tabella EmployeeSecurity hello toohide dalle applicazioni client</span><span class="sxs-lookup"><span data-stu-id="aea00-170">toohide hello EmployeeSecurity table from client applications</span></span>  
  
-   <span data-ttu-id="aea00-171">In Progettazione modelli di hello, in vista diagramma, fare doppio clic su hello **dipendente** sull'intestazione di tabella e quindi fare clic su **Nascondi a strumenti Client**.</span><span class="sxs-lookup"><span data-stu-id="aea00-171">In hello model designer, in Diagram View, right-click hello **Employee** table heading, and then click **Hide from Client Tools**.</span></span>  
  
## <a name="create-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="aea00-172">Creare un ruolo utente Sales Employees by Territory</span><span class="sxs-lookup"><span data-stu-id="aea00-172">Create a Sales Employees by Territory user role</span></span>  
<span data-ttu-id="aea00-173">In questa attività si creerà un ruolo utente.</span><span class="sxs-lookup"><span data-stu-id="aea00-173">In this task, you create a user role.</span></span> <span data-ttu-id="aea00-174">Questo ruolo include un filtro di riga che definisce quali righe della tabella DimSalesTerritory hello sono toousers visibile.</span><span class="sxs-lookup"><span data-stu-id="aea00-174">This role includes a row filter defining which rows of hello DimSalesTerritory table are visible toousers.</span></span> <span data-ttu-id="aea00-175">Hello filtro viene applicato in relazione uno-a-molti hello direzione tooall altre tabelle correlate tooDimSalesTerritory.</span><span class="sxs-lookup"><span data-stu-id="aea00-175">hello filter is then applied in hello one-to-many relationship direction tooall other tables related tooDimSalesTerritory.</span></span> <span data-ttu-id="aea00-176">È inoltre possibile applicare un filtro che protegge l'intera tabella EmployeeSecurity hello impedendone da qualsiasi utente che è un membro del ruolo hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-176">You also apply a filter that secures hello entire EmployeeSecurity table from being queryable by any user that is a member of hello role.</span></span>  
  
> [!NOTE]  
> <span data-ttu-id="aea00-177">Hello addetti alle vendite dal ruolo territorio creato in questa lezione consente di limitare i membri toobrowse (o query) solo i dati di vendita per hello territorio di vendita toowhich che appartengono.</span><span class="sxs-lookup"><span data-stu-id="aea00-177">hello Sales Employees by Territory role you create in this lesson restricts members toobrowse (or query) only sales data for hello sales territory toowhich they belong.</span></span> <span data-ttu-id="aea00-178">Se si aggiunge un utente come un membro toohello addetti alle vendite, dal ruolo di territorio che esiste anche un membro di un ruolo creato nella [lezione 11: creare ruoli](../tutorials/aas-lesson-11-create-roles.md), si ottiene una combinazione di autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="aea00-178">If you add a user as a member toohello Sales Employees by Territory role that also exists as a member in a role created in [Lesson 11: Create Roles](../tutorials/aas-lesson-11-create-roles.md), you get a combination of permissions.</span></span> <span data-ttu-id="aea00-179">Quando un utente è un membro di più ruoli, autorizzazioni hello e i filtri di riga definiti per ogni ruolo sono cumulativi.</span><span class="sxs-lookup"><span data-stu-id="aea00-179">When a user is a member of multiple roles, hello permissions, and row filters defined for each role are cumulative.</span></span> <span data-ttu-id="aea00-180">Vale a dire hello autorizzazioni utente hello maggiore determinato dalla combinazione di hello dei ruoli.</span><span class="sxs-lookup"><span data-stu-id="aea00-180">That is, hello user has hello greater permissions determined by hello combination of roles.</span></span>  
  
#### <a name="toocreate-a-sales-employees-by-territory-user-role"></a><span data-ttu-id="aea00-181">toocreate un addetti alle vendite per il ruolo di utente territorio</span><span class="sxs-lookup"><span data-stu-id="aea00-181">toocreate a Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="aea00-182">In SSDT, fare clic su hello **modello** menu e quindi fare clic su **ruoli**.</span><span class="sxs-lookup"><span data-stu-id="aea00-182">In SSDT, click hello **Model** menu, and then click **Roles**.</span></span>  
  
2.  <span data-ttu-id="aea00-183">In **Gestione ruoli** fare clic su **Nuovo**.</span><span class="sxs-lookup"><span data-stu-id="aea00-183">In **Role Manager**, click **New**.</span></span>  
  
    <span data-ttu-id="aea00-184">Un nuovo ruolo con hello Nessuna autorizzazione è stato aggiunto toohello elenco.</span><span class="sxs-lookup"><span data-stu-id="aea00-184">A new role with hello None permission is added toohello list.</span></span>  
  
3.  <span data-ttu-id="aea00-185">Fare clic su nuovo ruolo hello e quindi in hello **nome** colonna, rinominare il ruolo di hello troppo**addetti alle vendite per territorio**.</span><span class="sxs-lookup"><span data-stu-id="aea00-185">Click hello new role, and then in hello **Name** column, rename hello role too**Sales Employees by Territory**.</span></span>  
  
4.  <span data-ttu-id="aea00-186">In hello **autorizzazioni** colonna, fare clic su elenco a discesa hello e quindi selezionare hello **lettura** autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="aea00-186">In hello **Permissions** column, click hello dropdown list, and then select hello **Read** permission.</span></span>  
  
5.  <span data-ttu-id="aea00-187">Fare clic su hello **membri** scheda e quindi fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="aea00-187">Click hello **Members** tab, and then click **Add**.</span></span>  
  
6.  <span data-ttu-id="aea00-188">In hello **Seleziona utente o gruppo** della finestra di dialogo **oggetto hello invio denominato tooselect**, digitare hello primo esempio il nome utente utilizzato per la creazione tabella EmployeeSecurity hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-188">In hello **Select User or Group** dialog box, in **Enter hello object named tooselect**, type hello first sample user name you used when creating hello EmployeeSecurity table.</span></span> <span data-ttu-id="aea00-189">Fare clic su **Controlla nomi** tooverify hello utente nome valido e quindi fare clic su **Ok**.</span><span class="sxs-lookup"><span data-stu-id="aea00-189">Click **Check Names** tooverify hello user name is valid, and then click **Ok**.</span></span>  
  
    <span data-ttu-id="aea00-190">Ripetere questo passaggio, aggiunta di hello altri nomi utente di esempio utilizzati per la creazione tabella EmployeeSecurity hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-190">Repeat this step, adding hello other sample user names you used when creating hello EmployeeSecurity table.</span></span>  
  
7.  <span data-ttu-id="aea00-191">Fare clic su hello **i filtri di riga** scheda.</span><span class="sxs-lookup"><span data-stu-id="aea00-191">Click hello **Row Filters** tab.</span></span>  
  
8.  <span data-ttu-id="aea00-192">Per hello **EmployeeSecurity** tabella, in hello **filtro DAX** colonna, hello di tipo formula seguente:</span><span class="sxs-lookup"><span data-stu-id="aea00-192">For hello **EmployeeSecurity** table, in hello **DAX Filter** column, type hello following formula:</span></span>  
  
    ```
      =FALSE()  
    ```
  
    <span data-ttu-id="aea00-193">Questa formula specifica che tutte le colonne vengono risolte condizione booleana false toohello.</span><span class="sxs-lookup"><span data-stu-id="aea00-193">This formula specifies that all columns resolve toohello false Boolean condition.</span></span> <span data-ttu-id="aea00-194">Nessuna colonna per tabella EmployeeSecurity hello è possibile eseguire query da un membro di hello addetti alle vendite dal ruolo utente di territorio.</span><span class="sxs-lookup"><span data-stu-id="aea00-194">No columns for hello EmployeeSecurity table can be queried by a member of hello Sales Employees by Territory user role.</span></span>  
  
9. <span data-ttu-id="aea00-195">Per hello **DimSalesTerritory** tabella, hello di tipo formula seguente:</span><span class="sxs-lookup"><span data-stu-id="aea00-195">For hello **DimSalesTerritory** table, type hello following formula:</span></span>  

    ```  
    ='Sales Territory'[Sales Territory Id]=LOOKUPVALUE('Employee Security'[Sales Territory Id], 
      'Employee Security'[Login Id], USERNAME(), 
      'Employee Security'[Sales Territory Id], 
      'Sales Territory'[Sales Territory Id]) 
    ```
  
    <span data-ttu-id="aea00-196">In questa formula, hello funzione LOOKUPVALUE restituisce tutti i valori per la colonna [SalesTerritoryId] DimEmployeeSecurity hello, in cui hello EmployeeSecurity [LoginId] è hello stesso come connesso nome utente di Windows ed EmployeeSecurity [hello corrente SalesTerritoryId] è hello come hello DimSalesTerritory [SalesTerritoryId].</span><span class="sxs-lookup"><span data-stu-id="aea00-196">In this formula, hello LOOKUPVALUE function returns all values for hello DimEmployeeSecurity[SalesTerritoryId] column, where hello EmployeeSecurity[LoginId] is hello same as hello current logged on Windows user name, and EmployeeSecurity[SalesTerritoryId] is hello same as hello DimSalesTerritory[SalesTerritoryId].</span></span>  
  
    <span data-ttu-id="aea00-197">Hello set di ID territorio vendita restituito da LOOKUPVALUE viene quindi utilizzato toorestrict hello righe visualizzate nella tabella DimSalesTerritory hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-197">hello set of sales territory IDs returned by LOOKUPVALUE is then used toorestrict hello rows shown in hello DimSalesTerritory table.</span></span> <span data-ttu-id="aea00-198">Vengono visualizzate solo le righe in cui hello SalesTerritoryID per riga hello è nel set di hello di ID restituiti da lookupvalue hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-198">Only rows where hello SalesTerritoryID for hello row is in hello set of IDs returned by hello LOOKUPVALUE function are displayed.</span></span>  
  
10. <span data-ttu-id="aea00-199">In Gestione ruoli fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="aea00-199">In Role Manager, click **Ok**.</span></span>  
  
## <a name="test-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="aea00-200">Test addetti alle vendite hello dal ruolo utente territorio</span><span class="sxs-lookup"><span data-stu-id="aea00-200">Test hello Sales Employees by Territory User Role</span></span>  
<span data-ttu-id="aea00-201">In questa attività, utilizzare hello analizza nella funzionalità di Excel efficacia hello tootest SSDT di hello addetti alle vendite dal ruolo utente di territorio.</span><span class="sxs-lookup"><span data-stu-id="aea00-201">In this task, you use hello Analyze in Excel feature in SSDT tootest hello efficacy of hello Sales Employees by Territory user role.</span></span> <span data-ttu-id="aea00-202">Specificare uno dei nomi utente hello è stata aggiunta toohello EmployeeSecurity tabella e come membro del ruolo hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-202">You specify one of hello user names you added toohello EmployeeSecurity table and as a member of hello role.</span></span> <span data-ttu-id="aea00-203">Questo nome utente viene quindi utilizzato come nome utente effettivo hello in connessione hello creata tra Excel e hello modello.</span><span class="sxs-lookup"><span data-stu-id="aea00-203">This user name is then used as hello effective user name in hello connection created between Excel and hello model.</span></span>  
  
#### <a name="tootest-hello-sales-employees-by-territory-user-role"></a><span data-ttu-id="aea00-204">tootest hello addetti alle vendite dal ruolo utente territorio</span><span class="sxs-lookup"><span data-stu-id="aea00-204">tootest hello Sales Employees by Territory user role</span></span>  
  
1.  <span data-ttu-id="aea00-205">In SSDT, fare clic su hello **modello** menu e quindi fare clic su **analizza in Excel**.</span><span class="sxs-lookup"><span data-stu-id="aea00-205">In SSDT, click hello **Model** menu, and then click **Analyze in Excel**.</span></span>  
  
2.  <span data-ttu-id="aea00-206">In hello **analizza in Excel** della finestra di dialogo **specificare hello nome o ruolo toouse tooconnect toohello modello utente**selezionare **altro utente di Windows**, quindi fare clic su **Sfoglia**.</span><span class="sxs-lookup"><span data-stu-id="aea00-206">In hello **Analyze in Excel** dialog box, in **Specify hello user name or role toouse tooconnect toohello model**, select **Other Windows User**, and then click **Browse**.</span></span>  
  
3.  <span data-ttu-id="aea00-207">In hello **Seleziona utente o gruppo** della finestra di dialogo **immettere hello oggetto nome tooselect**, digitare un nome utente incluso nella tabella EmployeeSecurity hello e quindi fare clic su **Controlla nomi**.</span><span class="sxs-lookup"><span data-stu-id="aea00-207">In hello **Select User or Group** dialog box, in **Enter hello object name tooselect**, type a user name you included in hello EmployeeSecurity table, and then click **Check Names**.</span></span>  
  
4.  <span data-ttu-id="aea00-208">Fare clic su **Ok** tooclose hello **Seleziona utente o gruppo** la finestra di dialogo e quindi fare clic su **Ok** tooclose hello **analizza in Excel** la finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="aea00-208">Click **Ok** tooclose hello **Select User or Group** dialog box, and then click **Ok** tooclose hello **Analyze in Excel** dialog box.</span></span>  
  
    <span data-ttu-id="aea00-209">Excel verrà aperto con una nuova cartella di lavoro.</span><span class="sxs-lookup"><span data-stu-id="aea00-209">Excel opens with a new workbook.</span></span> <span data-ttu-id="aea00-210">Viene creata automaticamente una tabella pivot.</span><span class="sxs-lookup"><span data-stu-id="aea00-210">A PivotTable is automatically created.</span></span> <span data-ttu-id="aea00-211">Hello elenco PivotTable Fields include la maggior parte dei campi dati hello disponibile nel nuovo modello.</span><span class="sxs-lookup"><span data-stu-id="aea00-211">hello PivotTable Fields list includes most of hello data fields available in your new model.</span></span>  
  
    <span data-ttu-id="aea00-212">Tabella EmployeeSecurity hello di notifica non è visibile nell'elenco PivotTable Fields hello.</span><span class="sxs-lookup"><span data-stu-id="aea00-212">Notice hello EmployeeSecurity table is not visible in hello PivotTable Fields list.</span></span> <span data-ttu-id="aea00-213">perché è stata nascosta dagli strumenti client in un'attività precedente.</span><span class="sxs-lookup"><span data-stu-id="aea00-213">You hid this table from client tools in a previous task.</span></span>  
  
5.  <span data-ttu-id="aea00-214">In hello **campi** elenco **∑ Internet Sales** (misure) Seleziona hello **InternetTotalSales** misura.</span><span class="sxs-lookup"><span data-stu-id="aea00-214">In hello **Fields** list, in **∑ Internet Sales** (measures), select hello **InternetTotalSales** measure.</span></span> <span data-ttu-id="aea00-215">misura Hello viene inserito hello **valori** campi.</span><span class="sxs-lookup"><span data-stu-id="aea00-215">hello measure is entered into hello **Values** fields.</span></span>  
  
6.  <span data-ttu-id="aea00-216">Seleziona hello **SalesTerritoryId** colonna hello **DimSalesTerritory** tabella.</span><span class="sxs-lookup"><span data-stu-id="aea00-216">Select hello **SalesTerritoryId** column from hello **DimSalesTerritory** table.</span></span> <span data-ttu-id="aea00-217">colonna Hello viene inserito hello **etichette di riga** campi.</span><span class="sxs-lookup"><span data-stu-id="aea00-217">hello column is entered into hello **Row Labels** fields.</span></span>  
  
    <span data-ttu-id="aea00-218">Avviso Internet cifre di vendita vengono visualizzate solo per hello una regione toowhich hello nome utente effettivo utilizzato appartiene.</span><span class="sxs-lookup"><span data-stu-id="aea00-218">Notice Internet sales figures appear only for hello one region toowhich hello effective user name you used belongs.</span></span> <span data-ttu-id="aea00-219">Se si seleziona un'altra colonna, ad esempio città dalla tabella DimGeography hello come campo etichette di riga, solo le città utente effettivo hello hello territorio di vendita toowhich appartiene vengono visualizzati.</span><span class="sxs-lookup"><span data-stu-id="aea00-219">If you select another column, like City from hello DimGeography table as Row Label field, only cities in hello sales territory toowhich hello effective user belongs are displayed.</span></span>  
  
    <span data-ttu-id="aea00-220">Questo utente non è possibile individuare o query di dati delle vendite Internet per territori diversi da hello uno a che cui appartengono.</span><span class="sxs-lookup"><span data-stu-id="aea00-220">This user cannot browse or query any Internet sales data for territories other than hello one they belong to.</span></span> <span data-ttu-id="aea00-221">Questa restrizione è dato che il filtro di riga definito per la tabella DimSalesTerritory hello in hello addetti alle vendite dal ruolo utente territorio, hello protegge tutti i dati correlati tooother i territori di vendita.</span><span class="sxs-lookup"><span data-stu-id="aea00-221">This restriction is because hello row filter defined for hello DimSalesTerritory table, in hello Sales Employees by Territory user role, secures data for all data related tooother sales territories.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="aea00-222">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="aea00-222">See Also</span></span>  
[<span data-ttu-id="aea00-223">USERNAME Function (DAX) (Funzione DAX USERNAME)</span><span class="sxs-lookup"><span data-stu-id="aea00-223">USERNAME Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh230954.aspx)  
[<span data-ttu-id="aea00-224">LOOKUPVALUE Function (DAX) (Funzione DAX LOOKUPVALUE)</span><span class="sxs-lookup"><span data-stu-id="aea00-224">LOOKUPVALUE Function (DAX)</span></span>](https://msdn.microsoft.com/library/gg492170.aspx)  
[<span data-ttu-id="aea00-225">CUSTOMDATA Function (DAX) (Funzione DAX CUSTOMDATA)</span><span class="sxs-lookup"><span data-stu-id="aea00-225">CUSTOMDATA Function (DAX)</span></span>](https://msdn.microsoft.com/library/hh213140.aspx)  