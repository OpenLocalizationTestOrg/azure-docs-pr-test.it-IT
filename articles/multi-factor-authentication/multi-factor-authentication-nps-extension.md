---
title: "Usare i server di Server dei criteri di rete esistenti per offrire le funzionalità MFA di Azure | Microsoft Docs"
description: "L'estensione di Server dei criteri di rete per Multi-Factor Authentication di Azure è una soluzione semplice per aggiungere le funzionalità di verifica in due passaggi basata sul cloud nell'infrastruttura di autenticazione esistente."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/14/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: H1Hack27Feb2017; it-pro
ms.openlocfilehash: fa125292ee85bd9b5329cffeff7f076d3002cbf3
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="integrate-your-existing-nps-infrastructure-with-azure-multi-factor-authentication"></a><span data-ttu-id="28ffc-103">Integrare l'infrastruttura NPS esistente con Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="28ffc-103">Integrate your existing NPS infrastructure with Azure Multi-Factor Authentication</span></span>

<span data-ttu-id="28ffc-104">L'estensione di Server dei criteri di rete (NPS) per Azure MFA aggiunge funzionalità MFA basate su cloud per l'infrastruttura di autenticazione usando i server esistenti.</span><span class="sxs-lookup"><span data-stu-id="28ffc-104">The Network Policy Server (NPS) extension for Azure MFA adds cloud-based MFA capabilities to your authentication infrastructure using your existing servers.</span></span> <span data-ttu-id="28ffc-105">Con l'estensione di Server dei criteri di rete, è possibile aggiungere la verifica con telefonata, messaggio di testo o app telefonica al flusso di autenticazione esistente senza dover installare, configurare e gestire nuovi server.</span><span class="sxs-lookup"><span data-stu-id="28ffc-105">With the NPS extension, you can add phone call, text message, or phone app verification to your existing authentication flow without having to install, configure, and maintain new servers.</span></span> 

<span data-ttu-id="28ffc-106">Questa estensione è stata creata per le organizzazioni che vogliono proteggere le connessioni VPN senza distribuire Azure MFA Server.</span><span class="sxs-lookup"><span data-stu-id="28ffc-106">This extension was created for organizations that want to protect VPN connections without deploying the Azure MFA Server.</span></span> <span data-ttu-id="28ffc-107">L'estensione del server dei criteri di rete funge da adattatore tra RADIUS e Azure MFA basato su cloud per fornire un secondo fattore di autenticazione per utenti federati o sincronizzati.</span><span class="sxs-lookup"><span data-stu-id="28ffc-107">The NPS extension acts as an adapter between RADIUS and cloud-based Azure MFA to provide a second factor of authentication for federated or synced users.</span></span>

<span data-ttu-id="28ffc-108">Quando si usa l'estensione dei criteri di rete per di Azure MFA, il flusso di autenticazione include i componenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="28ffc-108">When using the NPS extension for Azure MFA, the authentication flow includes the following components:</span></span> 

1. <span data-ttu-id="28ffc-109">Il **Server NAS/VPN** riceve le richieste dei client VPN e le converte in richieste RADIUS per il Server dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-109">**NAS/VPN Server** receives requests from VPN clients and converts them into RADIUS requests to NPS servers.</span></span> 
2. <span data-ttu-id="28ffc-110">Il **Server dei criteri di rete** si connette ad Active Directory per eseguire l'autenticazione principale per le richieste RADIUS e, al completamento dell'operazione, passa la richiesta alle estensioni installate.</span><span class="sxs-lookup"><span data-stu-id="28ffc-110">**NPS Server** connects to Active Directory to perform the primary authentication for the RADIUS requests and, upon success, passes the request to any installed extensions.</span></span>  
3. <span data-ttu-id="28ffc-111">L'**estensione di Server dei criteri di rete** attiva una richiesta di autenticazione secondaria per Azure MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-111">**NPS Extension** triggers a request to Azure MFA for the secondary authentication.</span></span> <span data-ttu-id="28ffc-112">Dopo che l'estensione riceve la risposta e se la richiesta di verifica MFA ha esito positivo, la richiesta di autenticazione viene completata, fornendo al server di Server dei criteri di rete i token di sicurezza che includono un'attestazione MFA, emessa dal servizio token di sicurezza di Azure.</span><span class="sxs-lookup"><span data-stu-id="28ffc-112">Once the extension receives the response, and if the MFA challenge succeeds, it completes the authentication request by providing the NPS server with security tokens that include an MFA claim, issued by Azure STS.</span></span>  
4. <span data-ttu-id="28ffc-113">**Azure MFA** comunica con Azure Active Directory per recuperare i dettagli dell'utente ed esegue l'autenticazione secondaria grazie al metodo di verifica configurato per l'utente.</span><span class="sxs-lookup"><span data-stu-id="28ffc-113">**Azure MFA** communicates with Azure Active Directory to retrieve the user’s details and performs the secondary authentication using a verification method configured to the user.</span></span>

<span data-ttu-id="28ffc-114">Il diagramma seguente illustra questo flusso di richiesta di autenticazione ad alto livello:</span><span class="sxs-lookup"><span data-stu-id="28ffc-114">The following diagram illustrates this high-level authentication request flow:</span></span> 

![Diagramma del flusso di autenticazione](./media/multi-factor-authentication-nps-extension/auth-flow.png)

## <a name="plan-your-deployment"></a><span data-ttu-id="28ffc-116">Pianificare la distribuzione</span><span class="sxs-lookup"><span data-stu-id="28ffc-116">Plan your deployment</span></span>

<span data-ttu-id="28ffc-117">L'estensione di Server dei criteri di rete gestisce automaticamente la ridondanza, pertanto non è necessaria una configurazione speciale.</span><span class="sxs-lookup"><span data-stu-id="28ffc-117">The NPS extension automatically handles redundancy, so you don't need a special configuration.</span></span>

<span data-ttu-id="28ffc-118">È possibile creare un qualsiasi numero di Server dei criteri di rete abilitati per Azure MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-118">You can create as many Azure MFA-enabled NPS servers as you need.</span></span> <span data-ttu-id="28ffc-119">Se si installano più server, è consigliabile usare un certificato client di differenza per ciascuno.</span><span class="sxs-lookup"><span data-stu-id="28ffc-119">If you do install multiple servers, you should use a difference client certificate for each one of them.</span></span> <span data-ttu-id="28ffc-120">La creazione di un certificato per ogni server significa che è possibile aggiornare singolarmente ogni certificato senza doversi preoccupare dei tempi di inattività in tutti i server.</span><span class="sxs-lookup"><span data-stu-id="28ffc-120">Creating a cert for each server means that you can update each cert individually, and not worry about downtime across all your servers.</span></span>

<span data-ttu-id="28ffc-121">I server VPN indirizzano le richieste di autenticazione, quindi è necessario essere a conoscenza dei nuovi Server dei criteri di rete abilitati per Azure MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-121">VPN servers route authentication requests, so they need to be aware of the new Azure MFA-enabled NPS servers.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="28ffc-122">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="28ffc-122">Prerequisites</span></span>

<span data-ttu-id="28ffc-123">L'estensione di Server dei criteri di rete è progettata per funzionare con l'infrastruttura esistente.</span><span class="sxs-lookup"><span data-stu-id="28ffc-123">The NPS extension is meant to work with your existing infrastructure.</span></span> <span data-ttu-id="28ffc-124">Prima di iniziare, verificare che i prerequisiti seguenti siano disponibili.</span><span class="sxs-lookup"><span data-stu-id="28ffc-124">Make sure you have the following prerequisites before you begin.</span></span>

### <a name="licenses"></a><span data-ttu-id="28ffc-125">Licenze</span><span class="sxs-lookup"><span data-stu-id="28ffc-125">Licenses</span></span>

<span data-ttu-id="28ffc-126">L'estensione di Server dei criteri di rete per Azure MFA è disponibile per i clienti dotati di [licenze per Multi-Factor Authentication di Azure](multi-factor-authentication.md) (tra cui una sottoscrizione con Azure AD Premium, EMS o MFA).</span><span class="sxs-lookup"><span data-stu-id="28ffc-126">The NPS Extension for Azure MFA is available to customers with [licenses for Azure Multi-Factor Authentication](multi-factor-authentication.md) (included with Azure AD Premium, EMS, or an MFA subscription).</span></span>

### <a name="software"></a><span data-ttu-id="28ffc-127">Software</span><span class="sxs-lookup"><span data-stu-id="28ffc-127">Software</span></span>

<span data-ttu-id="28ffc-128">Windows Server 2008 R2 SP1 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="28ffc-128">Windows Server 2008 R2 SP1 or above.</span></span>

### <a name="libraries"></a><span data-ttu-id="28ffc-129">Librerie</span><span class="sxs-lookup"><span data-stu-id="28ffc-129">Libraries</span></span>

<span data-ttu-id="28ffc-130">Queste librerie vengono installate automaticamente con l'estensione.</span><span class="sxs-lookup"><span data-stu-id="28ffc-130">These libraries are installed automatically with the extension.</span></span>
-   [<span data-ttu-id="28ffc-131">Visual C++ Redistributable Packages per Visual Studio 2013 (X64)</span><span class="sxs-lookup"><span data-stu-id="28ffc-131">Visual C++ Redistributable Packages for Visual Studio 2013 (X64)</span></span>](https://www.microsoft.com/download/details.aspx?id=40784)
-   [<span data-ttu-id="28ffc-132">Modulo di Microsoft Azure Active Directory per Windows PowerShell versione 1.1.166.0</span><span class="sxs-lookup"><span data-stu-id="28ffc-132">Microsoft Azure Active Directory Module for Windows PowerShell version 1.1.166.0</span></span>](https://connect.microsoft.com/site1164/Downloads/DownloadDetails.aspx?DownloadID=59185)

### <a name="azure-active-directory"></a><span data-ttu-id="28ffc-133">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="28ffc-133">Azure Active Directory</span></span>

<span data-ttu-id="28ffc-134">Gli utenti che usano l'estensione di Server dei criteri di rete devono essere sincronizzati con Azure Active Directory tramite Azure AD Connect ed essere registrati a MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-134">Everyone using the NPS extension must be synced to Azure Active Directory using Azure AD Connect, and must be registered for MFA.</span></span>

<span data-ttu-id="28ffc-135">Quando si installa l'estensione, per il tenant di Azure AD sono necessarie le credenziali di amministrazione e l'ID della directory.</span><span class="sxs-lookup"><span data-stu-id="28ffc-135">When you install the extension, you need the directory ID and admin credentials for your Azure AD tenant.</span></span> <span data-ttu-id="28ffc-136">L'ID della directory si trova nel [Portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="28ffc-136">You can find your directory ID in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="28ffc-137">Accedere come amministratore, selezionare l'icona di **Azure Active Directory** sulla sinistra, quindi selezionare **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="28ffc-137">Sign in as an administrator, select the **Azure Active Directory** icon on the left, then select **Properties**.</span></span> <span data-ttu-id="28ffc-138">Copiare il GUID nella casella **ID directory** e salvare.</span><span class="sxs-lookup"><span data-stu-id="28ffc-138">Copy the GUID in the **Directory ID** box and save it.</span></span> <span data-ttu-id="28ffc-139">Questo GUID verrà usato come ID tenant quando si installerà l'estensione di Server dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-139">You use this GUID as the tenant ID when you install the NPS extension.</span></span>

![L'ID directory si trova nelle proprietà di Azure Active Directory](./media/multi-factor-authentication-nps-extension/find-directory-id.png)

## <a name="prepare-your-environment"></a><span data-ttu-id="28ffc-141">Preparare l'ambiente</span><span class="sxs-lookup"><span data-stu-id="28ffc-141">Prepare your environment</span></span>

<span data-ttu-id="28ffc-142">Prima di installare l'estensione di Server dei criteri di rete, è necessario preparare l'ambiente per gestire il traffico di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="28ffc-142">Before you install the NPS extension, you want to prepare you environment to handle the authentication traffic.</span></span>

### <a name="enable-the-nps-role-on-a-domain-joined-server"></a><span data-ttu-id="28ffc-143">Abilitare il ruolo del Server dei criteri di rete in un server appartenente a un dominio</span><span class="sxs-lookup"><span data-stu-id="28ffc-143">Enable the NPS role on a domain-joined server</span></span>

<span data-ttu-id="28ffc-144">Il Server dei criteri di rete si connette ad Azure Active Directory e autentica le richieste di MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-144">The NPS server connects to Azure Active Directory and authenticates the MFA requests.</span></span> <span data-ttu-id="28ffc-145">Scegliere un server per questo ruolo.</span><span class="sxs-lookup"><span data-stu-id="28ffc-145">Choose one server for this role.</span></span> <span data-ttu-id="28ffc-146">Si consiglia di scegliere un server che non gestisce le richieste provenienti da altri servizi, poiché l'estensione di Server dei criteri di rete genera errori per qualsiasi richiesta non RADIUS.</span><span class="sxs-lookup"><span data-stu-id="28ffc-146">We recommend choosing a server that doesn't handle requests from other services, because the NPS extension throws errors for any requests that aren't RADIUS.</span></span>

1. <span data-ttu-id="28ffc-147">Sul server avviare l'**aggiunta guidata ruoli e funzionalità** dal menu Avvio rapido di Server Manager.</span><span class="sxs-lookup"><span data-stu-id="28ffc-147">On your server, open the **Add Roles and Features Wizard** from the Server Manager Quickstart menu.</span></span>
2. <span data-ttu-id="28ffc-148">Come tipo di installazione scegliere **Installazione basata su ruoli o basata su funzionalità**.</span><span class="sxs-lookup"><span data-stu-id="28ffc-148">Choose **Role-based or feature-based installation** for your installation type.</span></span>
3. <span data-ttu-id="28ffc-149">Selezionare il ruolo del server **Servizi di accesso e criteri di rete**.</span><span class="sxs-lookup"><span data-stu-id="28ffc-149">Select the **Network Policy and Access Services** server role.</span></span> <span data-ttu-id="28ffc-150">Potrebbe essere visualizzata una finestra per informare l'utente riguardo alle funzionalità necessarie per eseguire questo ruolo.</span><span class="sxs-lookup"><span data-stu-id="28ffc-150">A window may pop up to inform you of required features to run this role.</span></span>
4. <span data-ttu-id="28ffc-151">Continuare la procedura guidata fino alla pagina di conferma.</span><span class="sxs-lookup"><span data-stu-id="28ffc-151">Continue through the wizard until the Confirmation page.</span></span> <span data-ttu-id="28ffc-152">Selezionare **Installa**.</span><span class="sxs-lookup"><span data-stu-id="28ffc-152">Select **Install**.</span></span>

<span data-ttu-id="28ffc-153">Ora che si dispone di un server designato come Server dei criteri di rete, è inoltre necessario configurarlo per gestire le richieste RADIUS in ingresso dalla soluzione VPN.</span><span class="sxs-lookup"><span data-stu-id="28ffc-153">Now that you have a server designated for NPS, you should also configure this server to handle incoming RADIUS requests from the VPN solution.</span></span>

### <a name="configure-your-vpn-solution-to-communicate-with-the-nps-server"></a><span data-ttu-id="28ffc-154">Configurare la soluzione VPN in modo che comunichi con il Server dei criteri di rete</span><span class="sxs-lookup"><span data-stu-id="28ffc-154">Configure your VPN solution to communicate with the NPS server</span></span>

<span data-ttu-id="28ffc-155">La procedura per configurare i criteri di autenticazione RADIUS può variare a seconda della soluzione VPN in uso.</span><span class="sxs-lookup"><span data-stu-id="28ffc-155">Depending on which VPN solution you use, the steps to configure your RADIUS authentication policy vary.</span></span> <span data-ttu-id="28ffc-156">Configurare i criteri in modo che la soluzione punti al Server dei criteri di rete RADIUS.</span><span class="sxs-lookup"><span data-stu-id="28ffc-156">Configure this policy to point to your RADIUS NPS server.</span></span>

### <a name="sync-domain-users-to-the-cloud"></a><span data-ttu-id="28ffc-157">Sincronizzare gli utenti del dominio con il cloud</span><span class="sxs-lookup"><span data-stu-id="28ffc-157">Sync domain users to the cloud</span></span>

<span data-ttu-id="28ffc-158">Questo passaggio potrebbe essere già completato nel tenant, tuttavia è consigliabile verificare che Azure AD Connect abbia sincronizzato i database di recente.</span><span class="sxs-lookup"><span data-stu-id="28ffc-158">This step may already be complete on your tenant, but it's good to double-check that Azure AD Connect has synchronized your databases recently.</span></span>

1. <span data-ttu-id="28ffc-159">Accedere al [portale di Azure](https://portal.azure.com) come amministratore.</span><span class="sxs-lookup"><span data-stu-id="28ffc-159">Sign in to the [Azure portal](https://portal.azure.com) as an administrator.</span></span>
2. <span data-ttu-id="28ffc-160">Selezionare **Azure Active Directory** > **Azure AD Connect**</span><span class="sxs-lookup"><span data-stu-id="28ffc-160">Select **Azure Active Directory** > **Azure AD Connect**</span></span>
3. <span data-ttu-id="28ffc-161">Verificare che lo stato della sincronizzazione sia **Abilitata** e che l'ultima sincronizzazione sia stata eseguita da meno di un'ora.</span><span class="sxs-lookup"><span data-stu-id="28ffc-161">Verify that your sync status is **Enabled** and that your last sync was less than an hour ago.</span></span>

<span data-ttu-id="28ffc-162">Se si desidera avviare un nuovo ciclo di sincronizzazione, usare istruzioni presenti in [Servizio di sincronizzazione Azure AD Connect: utilità di pianificazione](../active-directory/connect/active-directory-aadconnectsync-feature-scheduler.md#start-the-scheduler).</span><span class="sxs-lookup"><span data-stu-id="28ffc-162">If you need to kick off a new round of synchronization, us the instructions in [Azure AD Connect sync: Scheduler](../active-directory/connect/active-directory-aadconnectsync-feature-scheduler.md#start-the-scheduler).</span></span>

### <a name="determine-which-authentication-methods-your-users-can-use"></a><span data-ttu-id="28ffc-163">Determinare i metodi di autenticazione che è possibile usare</span><span class="sxs-lookup"><span data-stu-id="28ffc-163">Determine which authentication methods your users can use</span></span>

<span data-ttu-id="28ffc-164">Sono due i fattori che determinano i metodi di autenticazione disponibili con una distribuzione dell'estensione di Server dei criteri di rete:</span><span class="sxs-lookup"><span data-stu-id="28ffc-164">There are two factors that affect which authentication methods are available with an NPS extension deployment:</span></span>

1. <span data-ttu-id="28ffc-165">L'algoritmo di crittografia della password usato tra il client RADIUS (VPN, server Netscaler o altri) e i Server dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-165">The password encryption algorithm used between the RADIUS client (VPN, Netscaler server, or other) and the NPS servers.</span></span>
   - <span data-ttu-id="28ffc-166">**PAP** supporta tutti i metodi di autenticazione di Azure MFA nel cloud: chiamata telefonica, SMS unidirezionale, notifica dell'app per dispositivi mobili e codice di verifica dell'app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="28ffc-166">**PAP** supports all the authentication methods of Azure MFA in the cloud: phone call, one-way text message, mobile app notification, and mobile app verification code.</span></span>
   - <span data-ttu-id="28ffc-167">**CHAPV2** e **EAP** supportano la chiamata telefonica e la notifica dell'app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="28ffc-167">**CHAPV2** and **EAP** support phone call and mobile app notification.</span></span>
2. <span data-ttu-id="28ffc-168">I metodi di input che l'applicazione client (VPN, server Netscaler o altra) può gestire.</span><span class="sxs-lookup"><span data-stu-id="28ffc-168">The input methods that the client application (VPN, Netscaler server, or other) can handle.</span></span> <span data-ttu-id="28ffc-169">Ad esempio, gli strumenti usati dal client VPN per consentire all'utente di digitare un codice di verifica da un testo o da un'app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="28ffc-169">For example, does the VPN client have some means to allow the user to type in a verification code from a text or mobile app?</span></span>

<span data-ttu-id="28ffc-170">Quando si distribuisce l'estensione di Server dei criteri di rete, usare questi fattori per valutare i metodi disponibili per gli utenti.</span><span class="sxs-lookup"><span data-stu-id="28ffc-170">When you deploy the NPS extension, use these factors to evaluate which methods are available for your users.</span></span> <span data-ttu-id="28ffc-171">Se il client RADIUS supporta PAP, ma nel client non esistono campi di input per un codice di verifica, la chiamata telefonica e la notifica dell'app per dispositivi mobili sono le due opzioni supportate.</span><span class="sxs-lookup"><span data-stu-id="28ffc-171">If your RADIUS client supports PAP, but the client UX doesn't have input fields for a verification code, then phone call and mobile app notification are the two supported options.</span></span>

<span data-ttu-id="28ffc-172">È possibile [disabilitare i metodi di autenticazione non supportati](multi-factor-authentication-whats-next.md#selectable-verification-methods) in Azure.</span><span class="sxs-lookup"><span data-stu-id="28ffc-172">You can [disable unsupported authentication methods](multi-factor-authentication-whats-next.md#selectable-verification-methods) in Azure.</span></span>

### <a name="enable-users-for-mfa"></a><span data-ttu-id="28ffc-173">Abilitare gli utenti per l'MFA</span><span class="sxs-lookup"><span data-stu-id="28ffc-173">Enable users for MFA</span></span>

<span data-ttu-id="28ffc-174">Prima di distribuire l'estensione completa di Server dei criteri di rete, è necessario abilitare l'MFA per gli utenti su cui si desidera eseguire la verifica in due passaggi.</span><span class="sxs-lookup"><span data-stu-id="28ffc-174">Before you deploy the full NPS extension, you need to enable MFA for the users that you want to perform two-step verification.</span></span> <span data-ttu-id="28ffc-175">Per testare l'estensione in modo più immediato mentre viene distribuita, è necessario almeno un account di test completamente registrato per l'MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-175">More immediately, to test the extension as you deploy it, you need at least one test account that is fully registered for Multi-Factor Authentication.</span></span>

<span data-ttu-id="28ffc-176">Seguire questa procedura per avviare un account di test:</span><span class="sxs-lookup"><span data-stu-id="28ffc-176">Use these steps to get a test account started:</span></span>
1. <span data-ttu-id="28ffc-177">Accedere a [https://aka.ms/mfasetup](https://aka.ms/mfasetup) con un account di test.</span><span class="sxs-lookup"><span data-stu-id="28ffc-177">Sign in to [https://aka.ms/mfasetup](https://aka.ms/mfasetup) with a test account.</span></span> 
2. <span data-ttu-id="28ffc-178">Seguire le richieste per configurare un metodo di verifica.</span><span class="sxs-lookup"><span data-stu-id="28ffc-178">Follow the prompts to set up a verification method.</span></span>
3. <span data-ttu-id="28ffc-179">Creare un criterio di accesso condizionale o [modificare lo stato dell'utente](multi-factor-authentication-get-started-user-states.md) per richiedere la verifica in due passaggi per l'account di test.</span><span class="sxs-lookup"><span data-stu-id="28ffc-179">Either create a conditional access policy or [change the user state](multi-factor-authentication-get-started-user-states.md) to require two-step verification for the test account.</span></span> 

<span data-ttu-id="28ffc-180">Gli utenti devono inoltre eseguire la procedura per la registrazione prima di potersi autenticare con l'estensione del server dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-180">Your users also need to follow these steps to enroll before they can authenticate with the NPS extension.</span></span>

## <a name="install-the-nps-extension"></a><span data-ttu-id="28ffc-181">Installare l'estensione di Server dei criteri di rete</span><span class="sxs-lookup"><span data-stu-id="28ffc-181">Install the NPS extension</span></span>

> [!IMPORTANT]
> <span data-ttu-id="28ffc-182">Installare l'estensione di Server dei criteri di rete in un server diverso rispetto al punto di accesso della VPN.</span><span class="sxs-lookup"><span data-stu-id="28ffc-182">Install the NPS extension on a different server than the VPN access point.</span></span>

### <a name="download-and-install-the-nps-extension-for-azure-mfa"></a><span data-ttu-id="28ffc-183">Scaricare e installare l'estensione di Server dei criteri di rete per Azure MFA</span><span class="sxs-lookup"><span data-stu-id="28ffc-183">Download and install the NPS extension for Azure MFA</span></span>

1.  <span data-ttu-id="28ffc-184">[Scaricare l'estensione di Server dei criteri di rete](https://aka.ms/npsmfa) dall'Area download di Microsoft.</span><span class="sxs-lookup"><span data-stu-id="28ffc-184">[Download the NPS Extension](https://aka.ms/npsmfa) from the Microsoft Download Center.</span></span>
2.  <span data-ttu-id="28ffc-185">Copiare il file binario nel Server dei criteri di rete da configurare.</span><span class="sxs-lookup"><span data-stu-id="28ffc-185">Copy the binary to the Network Policy Server you want to configure.</span></span>
3.  <span data-ttu-id="28ffc-186">Eseguire *setup.exe* e seguire le istruzioni di installazione.</span><span class="sxs-lookup"><span data-stu-id="28ffc-186">Run *setup.exe* and follow the installation instructions.</span></span> <span data-ttu-id="28ffc-187">Se si verificano errori, controllare che le due librerie indicate nella sezione sui prerequisiti siano state installate correttamente.</span><span class="sxs-lookup"><span data-stu-id="28ffc-187">If you encounter errors, double-check that the two libraries from the prerequisite section were successfully installed.</span></span>

### <a name="run-the-powershell-script"></a><span data-ttu-id="28ffc-188">Eseguire lo script di PowerShell</span><span class="sxs-lookup"><span data-stu-id="28ffc-188">Run the PowerShell script</span></span>

<span data-ttu-id="28ffc-189">Il programma di installazione crea uno script di PowerShell in questa posizione: `C:\Program Files\Microsoft\AzureMfa\Config` (dove C:\ è l'unità di installazione).</span><span class="sxs-lookup"><span data-stu-id="28ffc-189">The installer creates a PowerShell script in this location: `C:\Program Files\Microsoft\AzureMfa\Config` (where C:\ is your installation drive).</span></span> <span data-ttu-id="28ffc-190">Lo script di PowerShell esegue le azioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="28ffc-190">This PowerShell script performs the following actions:</span></span>

-   <span data-ttu-id="28ffc-191">Creare un certificato autofirmato.</span><span class="sxs-lookup"><span data-stu-id="28ffc-191">Create a self-signed certificate.</span></span>
-   <span data-ttu-id="28ffc-192">Associare la chiave pubblica del certificato all'entità servizio su Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28ffc-192">Associate the public key of the certificate to the service principal on Azure AD.</span></span>
-   <span data-ttu-id="28ffc-193">Archiviare il certificato nell'archivio certificati del computer locale.</span><span class="sxs-lookup"><span data-stu-id="28ffc-193">Store the cert in the local machine cert store.</span></span>
-   <span data-ttu-id="28ffc-194">Concedere l'accesso alla chiave privata del certificato all'utente di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-194">Grant access to the certificate’s private key to Network User.</span></span>
-   <span data-ttu-id="28ffc-195">Riavviare il Server dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-195">Restart the NPS.</span></span>

<span data-ttu-id="28ffc-196">A meno che non si desideri utilizzare i propri certificati (invece dei certificati autofirmati generati dallo script di PowerShell), eseguire lo script di PowerShell per completare l'installazione.</span><span class="sxs-lookup"><span data-stu-id="28ffc-196">Unless you want to use your own certificates (instead of the self-signed certificates that the PowerShell script generates), run the PowerShell Script to complete the installation.</span></span> <span data-ttu-id="28ffc-197">Se si installa l'estensione su più server, ciascun server dovrebbe avere il proprio certificato.</span><span class="sxs-lookup"><span data-stu-id="28ffc-197">If you install the extension on multiple servers, each one should have its own certificate.</span></span>

1. <span data-ttu-id="28ffc-198">Eseguire Windows PowerShell come amministratore.</span><span class="sxs-lookup"><span data-stu-id="28ffc-198">Run Windows PowerShell as an administrator.</span></span>
2. <span data-ttu-id="28ffc-199">Cambiare le directory.</span><span class="sxs-lookup"><span data-stu-id="28ffc-199">Change directories.</span></span>

   `cd "C:\Program Files\Microsoft\AzureMfa\Config"`

3. <span data-ttu-id="28ffc-200">Eseguire lo script di PowerShell creato dal programma di installazione.</span><span class="sxs-lookup"><span data-stu-id="28ffc-200">Run the PowerShell script created by the installer.</span></span>

   `.\AzureMfaNpsExtnConfigSetup.ps1`

4. <span data-ttu-id="28ffc-201">Prompt di PowerShell per l'ID tenant.</span><span class="sxs-lookup"><span data-stu-id="28ffc-201">PowerShell prompts for your tenant ID.</span></span> <span data-ttu-id="28ffc-202">Usare il GUID dell'ID directory copiato dal portale di Azure nella sezione relativa ai prerequisiti.</span><span class="sxs-lookup"><span data-stu-id="28ffc-202">Use the Directory ID GUID that you copied from the Azure portal in the prerequisites section.</span></span>
5. <span data-ttu-id="28ffc-203">Accedere ad Azure AD come amministratore.</span><span class="sxs-lookup"><span data-stu-id="28ffc-203">Sign in to Azure AD as an administrator.</span></span>
6. <span data-ttu-id="28ffc-204">Al termine dello script, PowerShell mostra un messaggio di conferma.</span><span class="sxs-lookup"><span data-stu-id="28ffc-204">PowerShell shows a success message when the script is finished.</span></span>  

<span data-ttu-id="28ffc-205">Ripetere questi passaggi per tutti i server dei criteri di rete aggiuntivi che si intende configurare per il bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="28ffc-205">Repeat these steps on any additional NPS servers that you want to set up for load balancing.</span></span>

>[!NOTE]
><span data-ttu-id="28ffc-206">Se si usano i propri certificati invece di generare certificati con lo script di PowerShell, verificare che rispettino la convenzione di denominazione di Server dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-206">If you use your own certificates instead of generating certificates with the PowerShell script, make sure that they align to the NPS naming convention.</span></span> <span data-ttu-id="28ffc-207">Il nome oggetto deve essere **CN=\<TenantID\>,OU=Estensione di Server dei criteri di rete Microsoft**.</span><span class="sxs-lookup"><span data-stu-id="28ffc-207">The subject name must be **CN=\<TenantID\>,OU=Microsoft NPS Extension**.</span></span> 

## <a name="configure-your-nps-extension"></a><span data-ttu-id="28ffc-208">Configurare l'estensione di Server dei criteri di rete</span><span class="sxs-lookup"><span data-stu-id="28ffc-208">Configure your NPS extension</span></span>

<span data-ttu-id="28ffc-209">In questa sezione sono disponibili considerazioni e suggerimenti sulla progettazione per una corretta distribuzione dell'estensione di Server dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-209">This section includes design considerations and suggestions for successful NPS extension deployments.</span></span>

### <a name="configuration-limitations"></a><span data-ttu-id="28ffc-210">Limitazioni di configurazione</span><span class="sxs-lookup"><span data-stu-id="28ffc-210">Configuration limitations</span></span>

- <span data-ttu-id="28ffc-211">L'estensione di Server dei criteri di rete per Azure MFA non include strumenti per la migrazione degli utenti e impostazioni dal Server MFA al cloud.</span><span class="sxs-lookup"><span data-stu-id="28ffc-211">The NPS extension for Azure MFA does not include tools to migrate users and settings from MFA Server to the cloud.</span></span> <span data-ttu-id="28ffc-212">Per questo motivo, è consigliabile usare l'estensione per le distribuzioni nuove piuttosto che per quelle esistenti.</span><span class="sxs-lookup"><span data-stu-id="28ffc-212">For this reason, we suggest using the extension for new deployments, rather than existing deployment.</span></span> <span data-ttu-id="28ffc-213">Se si usano le estensioni in una distribuzione esistente, gli utenti dovranno ripetere il processo di registrazione per popolare i dettagli di Azure MFA nel cloud.</span><span class="sxs-lookup"><span data-stu-id="28ffc-213">If you use the extension on an existing deployment, your users have to perform proof-up again to populate their MFA details in the cloud.</span></span>  
- <span data-ttu-id="28ffc-214">L'estensione di Server dei criteri di rete usa UPN dell'Active Directory locale per identificare l'utente in Azure MFA che deve eseguire l'autenticazione secondaria. L'estensione può essere configurata per usare un identificatore differente come ID di accesso alternativo o campo Active Directory personalizzato diverso dall'UPN.</span><span class="sxs-lookup"><span data-stu-id="28ffc-214">The NPS extension uses the UPN from the on-premises Active directory to identify the user on Azure MFA for performing the Secondary Auth. The extension can be configured to use a different identifier like alternate login ID or custom Active Directory field other than UPN.</span></span> <span data-ttu-id="28ffc-215">Per altre informazioni, vedere [Opzioni di configurazione avanzate per l'estensione NPS per Multi-Factor Authentication](multi-factor-authentication-advanced-vpn-configurations.md).</span><span class="sxs-lookup"><span data-stu-id="28ffc-215">See [Advanced configuration options for the NPS extension for Multi-Factor Authentication](multi-factor-authentication-advanced-vpn-configurations.md) for more information.</span></span>
- <span data-ttu-id="28ffc-216">Non tutti i protocolli di crittografia supportano tutti i metodi di verifica.</span><span class="sxs-lookup"><span data-stu-id="28ffc-216">Not all encryption protocols support all verification methods.</span></span>
   - <span data-ttu-id="28ffc-217">**PAP** supporta la chiamata telefonica, gli SMS unidirezionali, la notifica dell'app per dispositivi mobili e il codice di verifica app per dispositivi mobili</span><span class="sxs-lookup"><span data-stu-id="28ffc-217">**PAP** supports phone call, one-way text message, mobile app notification, and mobile app verification code</span></span>
   - <span data-ttu-id="28ffc-218">**CHAPV2** e **EAP** supportano la chiamata telefonica e la notifica dell'app per dispositivi mobili</span><span class="sxs-lookup"><span data-stu-id="28ffc-218">**CHAPV2** and **EAP** support phone call and mobile app notification</span></span>

### <a name="control-radius-clients-that-require-mfa"></a><span data-ttu-id="28ffc-219">Client RADIUS di controllo che richiedono MFA</span><span class="sxs-lookup"><span data-stu-id="28ffc-219">Control RADIUS clients that require MFA</span></span>

<span data-ttu-id="28ffc-220">Dopo aver abilitato MFA per un client RADIUS utilizzando l'estensione di Server dei criteri di rete, tutte le autenticazioni per questo client devono eseguire MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-220">Once you enable MFA for a RADIUS client using the NPS Extension, all authentications for this client are required to perform MFA.</span></span> <span data-ttu-id="28ffc-221">Se si desidera abilitare MFA solo per alcuni client RADIUS, è possibile configurare due server di Server dei criteri di rete e installare l'estensione solo su uno di questi.</span><span class="sxs-lookup"><span data-stu-id="28ffc-221">If you want to enable MFA for some RADIUS clients but not others, you can configure two NPS servers and install the extension on only one of them.</span></span> <span data-ttu-id="28ffc-222">Configurare i client RADIUS per cui si vuole fare in modo che MFA invii richieste al server di Server dei criteri di rete configurato con l'estensione e gli altri client RADIUS al server di Server dei criteri di rete senza configurazione per l'estensione.</span><span class="sxs-lookup"><span data-stu-id="28ffc-222">Configure RADIUS clients that you want to require MFA to send requests to the NPS server configured with the extension, and other RADIUS clients to the NPS server not configured with the extension.</span></span>

### <a name="prepare-for-users-that-arent-enrolled-for-mfa"></a><span data-ttu-id="28ffc-223">Impostazioni per gli utenti che non sono registrati per MFA</span><span class="sxs-lookup"><span data-stu-id="28ffc-223">Prepare for users that aren't enrolled for MFA</span></span>

<span data-ttu-id="28ffc-224">Se sono presenti utenti che non sono registrati per MFA, è possibile stabilire cosa succede quando questi tentano di eseguire l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="28ffc-224">If you have users that aren't enrolled for MFA, you can determine what happens when they try to authenticate.</span></span> <span data-ttu-id="28ffc-225">Usare l'impostazione del registro di sistema *REQUIRE_USER_MATCH* nel percorso del registro di sistema *HKLM\Software\Microsoft\AzureMFA* per controllare il comportamento della funzionalità.</span><span class="sxs-lookup"><span data-stu-id="28ffc-225">Use the registry setting *REQUIRE_USER_MATCH* in the registry path *HKLM\Software\Microsoft\AzureMFA* to control the feature behavior.</span></span> <span data-ttu-id="28ffc-226">Questa impostazione non ha un'unica opzione di configurazione:</span><span class="sxs-lookup"><span data-stu-id="28ffc-226">This setting has a single configuration option:</span></span>

| <span data-ttu-id="28ffc-227">Chiave</span><span class="sxs-lookup"><span data-stu-id="28ffc-227">Key</span></span> | <span data-ttu-id="28ffc-228">Valore</span><span class="sxs-lookup"><span data-stu-id="28ffc-228">Value</span></span> | <span data-ttu-id="28ffc-229">Default</span><span class="sxs-lookup"><span data-stu-id="28ffc-229">Default</span></span> |
| --- | ----- | ------- |
| <span data-ttu-id="28ffc-230">REQUIRE_USER_MATCH</span><span class="sxs-lookup"><span data-stu-id="28ffc-230">REQUIRE_USER_MATCH</span></span> | <span data-ttu-id="28ffc-231">VERO/FALSO</span><span class="sxs-lookup"><span data-stu-id="28ffc-231">TRUE/FALSE</span></span> | <span data-ttu-id="28ffc-232">Non impostato (equivalente a VERO)</span><span class="sxs-lookup"><span data-stu-id="28ffc-232">Not set (equivalent to TRUE)</span></span> |

<span data-ttu-id="28ffc-233">Lo scopo di questa impostazione è stabilire cosa fare quando un utente non è registrato per MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-233">The purpose of this setting is to determine what to do when a user is not enrolled for MFA.</span></span> <span data-ttu-id="28ffc-234">Quando la chiave non esiste, non è impostata o è impostata su VERO e l'utente non è registrato, allora l'estensione non esegue correttamente la richiesta di verifica MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-234">When the key does not exist, is not set, or is set to TRUE, and the user is not enrolled, then the extension fails the MFA challenge.</span></span> <span data-ttu-id="28ffc-235">Quando la chiave è impostata su FALSO e l'utente non è registrato, l'autenticazione procede senza eseguire MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-235">When the key is set to FALSE and the user is not enrolled, authentication proceeds without performing MFA.</span></span>

<span data-ttu-id="28ffc-236">È possibile scegliere di creare questa chiave e impostarla su FALSE, durante il caricamento degli utenti che potrebbero non essere ancora registrati per Azure MFA.</span><span class="sxs-lookup"><span data-stu-id="28ffc-236">You can choose to create this key and set it to FALSE while your users are onboarding, and may not all be enrolled for Azure MFA yet.</span></span> <span data-ttu-id="28ffc-237">Poiché l'impostazione della chiave consente agli utenti che non sono registrati all'MFA di accedere, è necessario rimuovere la chiave prima di passare all'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="28ffc-237">However, since setting the key permits users that aren't enrolled for MFA to sign in, you should remove this key before going to production.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="28ffc-238">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="28ffc-238">Troubleshooting</span></span>

### <a name="how-do-i-verify-that-the-client-cert-is-installed-as-expected"></a><span data-ttu-id="28ffc-239">Come verificare che il certificato client sia installato come previsto?</span><span class="sxs-lookup"><span data-stu-id="28ffc-239">How do I verify that the client cert is installed as expected?</span></span>

<span data-ttu-id="28ffc-240">Cercare il certificato autofirmato creato dal programma di installazione nell'archivio dei certificati e verificare che la chiave privata disponga delle autorizzazioni concesse all'utente **Servizio di rete**.</span><span class="sxs-lookup"><span data-stu-id="28ffc-240">Look for the self-signed certificate created by the installer in the cert store, and check that the private key has permissions granted to user **NETWORK SERVICE**.</span></span> <span data-ttu-id="28ffc-241">Il certificato ha come nome oggetto **CN \<tenantid\>, OU = Estensione di Server dei criteri di rete Microsoft**</span><span class="sxs-lookup"><span data-stu-id="28ffc-241">The cert has a subject name of **CN \<tenantid\>, OU = Microsoft NPS Extension**</span></span>

-------------------------------------------------------------

### <a name="how-can-i-verify-that-my-client-cert-is-associated-to-my-tenant-in-azure-active-directory"></a><span data-ttu-id="28ffc-242">Come verificare che il certificato client sia associato al tenant in Azure Active Directory?</span><span class="sxs-lookup"><span data-stu-id="28ffc-242">How can I verify that my client cert is associated to my tenant in Azure Active Directory?</span></span>

<span data-ttu-id="28ffc-243">Aprire il prompt dei comandi di PowerShell ed eseguire i comandi seguenti:</span><span class="sxs-lookup"><span data-stu-id="28ffc-243">Open PowerShell command prompt and run the following commands:</span></span>

```
import-module MSOnline
Connect-MsolService
Get-MsolServicePrincipalCredential -AppPrincipalId "981f26a1-7f43-403b-a875-f8b09b8cd720" -ReturnKeyValues 1 
```

<span data-ttu-id="28ffc-244">Questi comandi consentono di stampare tutti i certificati associando il tenant con l'istanza dell'estensione di Server dei criteri di rete nella sessione di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="28ffc-244">These commands print all the certificates associating your tenant with your instance of the NPS extension in your PowerShell session.</span></span> <span data-ttu-id="28ffc-245">Cercare il certificato esportando il certificato client come file "Codificato Base 64 X.509 (.CER)" senza la chiave privata e confrontarlo con l'elenco di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="28ffc-245">Look for your certificate by exporting your client cert as a "Base-64 encoded X.509(.cer)" file without the private key, and compare it with the list from PowerShell.</span></span>

<span data-ttu-id="28ffc-246">I timbri data/ora Valido-dal e Valido-fino al, che sono in formato leggibile, possono essere usati per filtrare i risultati errati se il comando restituisce più di un certificato.</span><span class="sxs-lookup"><span data-stu-id="28ffc-246">Valid-From and Valid-Until timestamps, which are in human-readable form, can be used to filter out obvious misfits if the command returns more than one cert.</span></span>

-------------------------------------------------------------

### <a name="why-are-my-requests-failing-with-adal-token-error"></a><span data-ttu-id="28ffc-247">Perché le richieste hanno esito negativo con errore di token ADAL?</span><span class="sxs-lookup"><span data-stu-id="28ffc-247">Why are my requests failing with ADAL token error?</span></span>

<span data-ttu-id="28ffc-248">Questo errore potrebbe essere dovuto a diverse ragioni.</span><span class="sxs-lookup"><span data-stu-id="28ffc-248">This error could be due to one of several reasons.</span></span> <span data-ttu-id="28ffc-249">Usare la procedura seguente per la risoluzione:</span><span class="sxs-lookup"><span data-stu-id="28ffc-249">Use these steps to help troubleshoot:</span></span>

1. <span data-ttu-id="28ffc-250">Riavviare il server di Server dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-250">Restart your NPS server.</span></span>
2. <span data-ttu-id="28ffc-251">Verificare che il certificato client sia installato come previsto.</span><span class="sxs-lookup"><span data-stu-id="28ffc-251">Verify that that client cert is installed as expected.</span></span>
3. <span data-ttu-id="28ffc-252">Verificare che il certificato sia associato al tenant in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="28ffc-252">Verify that the certificate is associated with your tenant on Azure AD.</span></span>
4. <span data-ttu-id="28ffc-253">Verificare che https://login.microsoftonline.com/ sia accessibile dal server che esegue l'estensione.</span><span class="sxs-lookup"><span data-stu-id="28ffc-253">Verify that https://login.microsoftonline.com/ is accessible from the server running the extension.</span></span>

-------------------------------------------------------------

### <a name="why-does-authentication-fail-with-an-error-in-http-logs-stating-that-the-user-is-not-found"></a><span data-ttu-id="28ffc-254">Perché l'autenticazione ha esito negativo e restituisce un errore nei log HTTP che indica che l'utente non è stato trovato?</span><span class="sxs-lookup"><span data-stu-id="28ffc-254">Why does authentication fail with an error in HTTP logs stating that the user is not found?</span></span>

<span data-ttu-id="28ffc-255">Verificare che AD Connect sia in esecuzione e che l'utente sia presente sia in Active Directory di Windows sia in Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="28ffc-255">Verify that AD Connect is running, and that the user is present in both Windows Active Directory and Azure Active Directory.</span></span>

------------------------------------------------------------

### <a name="why-do-i-see-http-connect-errors-in-logs-with-all-my-authentications-failing"></a><span data-ttu-id="28ffc-256">Perché vengono visualizzati errori di connessione HTTP nei log che contengono le autenticazioni non riuscite?</span><span class="sxs-lookup"><span data-stu-id="28ffc-256">Why do I see HTTP connect errors in logs with all my authentications failing?</span></span>

<span data-ttu-id="28ffc-257">Verificare che https://adnotifications.windowsazure.com sia raggiungibile dal server che esegue l'estensione di Server dei criteri di rete.</span><span class="sxs-lookup"><span data-stu-id="28ffc-257">Verify that https://adnotifications.windowsazure.com is reachable from the server running the NPS extension.</span></span>


## <a name="next-steps"></a><span data-ttu-id="28ffc-258">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="28ffc-258">Next steps</span></span>

- <span data-ttu-id="28ffc-259">Configurare gli ID alternativi per l'accesso o impostare un elenco di eccezioni per gli indirizzi IP che non devono eseguire la verifica in due passaggi in [Advanced configuration options for the NPS extension for Multi-Factor Authentication](nps-extension-advanced-configuration.md) (Opzioni di configurazione avanzate per l'estensione del server dei criteri di rete per Multi-Factor Authentication).</span><span class="sxs-lookup"><span data-stu-id="28ffc-259">Configure alternate IDs for login, or set up an exception list for IPs that shouldn't perform two-step verification in [Advanced configuration options for the NPS extension for Multi-Factor Authentication](nps-extension-advanced-configuration.md)</span></span>

- [<span data-ttu-id="28ffc-260">Risolvere i messaggi di errore dall'estensione del Server dei criteri di rete per Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="28ffc-260">Resolve error messages from the NPS extension for Azure Multi-Factor Authentication</span></span>](multi-factor-authentication-nps-errors.md)
