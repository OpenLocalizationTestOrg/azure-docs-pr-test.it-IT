---
title: Preparazione della distribuzione di Service Fabric autonomo Cluster aaaAzure | Documenti Microsoft
description: Documentazione correlata ambiente hello toopreparing e la creazione di configurazione del cluster hello toobe considerato toodeploying precedente un cluster previsto per la gestione di un carico di lavoro di produzione.
services: service-fabric
documentationcenter: .net
author: maburlik
manager: timlt
editor: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 1/17/2017
ms.author: maburlik;chackdan
ms.openlocfilehash: e503c61a64b408af3f22bd75ab02f1c34ac9f380
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
<a id="preparemachines"></a>

## <a name="plan-and-prepare-your-service-fabric-standalone-cluster-deployment"></a><span data-ttu-id="1cdab-103">Pianificare e preparare la distribuzione del cluster autonomo di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="1cdab-103">Plan and prepare your Service Fabric standalone cluster deployment</span></span>
<span data-ttu-id="1cdab-104">Eseguire hello seguendo i passaggi prima di creare il cluster.</span><span class="sxs-lookup"><span data-stu-id="1cdab-104">Perform hello following steps before you create your cluster.</span></span>

### <a name="step-1-plan-your-cluster-infrastructure"></a><span data-ttu-id="1cdab-105">Passaggio 1: pianificazione dell’infrastruttura del cluster</span><span class="sxs-lookup"><span data-stu-id="1cdab-105">Step 1: Plan your cluster infrastructure</span></span>
<span data-ttu-id="1cdab-106">Si sta toocreate un cluster di Service Fabric nel computer che si è proprietari, pertanto è possibile decidere quali tipi di errori che si desidera hello toosurvive cluster.</span><span class="sxs-lookup"><span data-stu-id="1cdab-106">You are about toocreate a Service Fabric cluster on machines you own, so you can decide what kinds of failures you want hello cluster toosurvive.</span></span> <span data-ttu-id="1cdab-107">Ad esempio, è necessario linee di alimentazione separate o connessioni Internet fornito macchine toothese?</span><span class="sxs-lookup"><span data-stu-id="1cdab-107">For example, do you need separate power lines or Internet connections supplied toothese machines?</span></span> <span data-ttu-id="1cdab-108">Inoltre, prendere in considerazione sicurezza fisica di hello di tali macchine.</span><span class="sxs-lookup"><span data-stu-id="1cdab-108">In addition, consider hello physical security of these machines.</span></span> <span data-ttu-id="1cdab-109">Dove si trovano le macchine hello e necessita di accesso toothem?</span><span class="sxs-lookup"><span data-stu-id="1cdab-109">Where are hello machines located and who needs access toothem?</span></span> <span data-ttu-id="1cdab-110">Dopo aver apportato queste decisioni, è possibile logicamente hello macchine toohello diversi domini di errore (vedere il passaggio 4).</span><span class="sxs-lookup"><span data-stu-id="1cdab-110">After you make these decisions, you can logically map hello machines toohello various fault domains (see Step 4).</span></span> <span data-ttu-id="1cdab-111">la pianificazione per i cluster di produzione dell'infrastruttura di Hello è più complessa di quella per i cluster di test.</span><span class="sxs-lookup"><span data-stu-id="1cdab-111">hello infrastructure planning for production clusters is more involved than for test clusters.</span></span>

### <a name="step-2-prepare-hello-machines-toomeet-hello-prerequisites"></a><span data-ttu-id="1cdab-112">Passaggio 2: Preparare i prerequisiti di hello hello macchine toomeet</span><span class="sxs-lookup"><span data-stu-id="1cdab-112">Step 2: Prepare hello machines toomeet hello prerequisites</span></span>
<span data-ttu-id="1cdab-113">Prerequisiti per ogni computer che si desidera tooadd toohello cluster:</span><span class="sxs-lookup"><span data-stu-id="1cdab-113">Prerequisites for each machine that you want tooadd toohello cluster:</span></span>

* <span data-ttu-id="1cdab-114">Consigliati minimo 16 GB di RAM.</span><span class="sxs-lookup"><span data-stu-id="1cdab-114">A minimum of 16 GB of RAM is recommended.</span></span>
* <span data-ttu-id="1cdab-115">Consigliati minimo 40 GB di spazio disponibile su disco.</span><span class="sxs-lookup"><span data-stu-id="1cdab-115">A minimum of 40 of GB available disk space is recommended.</span></span>
* <span data-ttu-id="1cdab-116">Consigliata una CPU 4 core o superiore.</span><span class="sxs-lookup"><span data-stu-id="1cdab-116">A 4 core or greater CPU is recommended.</span></span>
* <span data-ttu-id="1cdab-117">Rete sicura tooa di connettività o di rete per tutte le macchine.</span><span class="sxs-lookup"><span data-stu-id="1cdab-117">Connectivity tooa secure network or networks for all machines.</span></span>
* <span data-ttu-id="1cdab-118">Windows Server 2012 R2 o Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="1cdab-118">Windows Server 2012 R2 or Windows Server 2016.</span></span> 
* <span data-ttu-id="1cdab-119">[.NET Framework 4.5.1 o versione successiva](https://www.microsoft.com/download/details.aspx?id=40773), installazione completa.</span><span class="sxs-lookup"><span data-stu-id="1cdab-119">[.NET Framework 4.5.1 or higher](https://www.microsoft.com/download/details.aspx?id=40773), full install.</span></span>
* <span data-ttu-id="1cdab-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="1cdab-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span></span>
* <span data-ttu-id="1cdab-121">Hello [RemoteRegistry servizio](https://technet.microsoft.com/library/cc754820) deve essere in esecuzione in tutti i computer hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-121">hello [RemoteRegistry service](https://technet.microsoft.com/library/cc754820) should be running on all hello machines.</span></span>

<span data-ttu-id="1cdab-122">Hello Amministrazione cluster, distribuzione e configurazione dei cluster hello deve avere [privilegi di amministratore](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) in ciascun computer hello di.</span><span class="sxs-lookup"><span data-stu-id="1cdab-122">hello cluster administrator deploying and configuring hello cluster must have [administrator privileges](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) on each of hello machines.</span></span> <span data-ttu-id="1cdab-123">Non è possibile installare Service Fabric in un controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="1cdab-123">You cannot install Service Fabric on a domain controller.</span></span>

### <a name="step-3-determine-hello-initial-cluster-size"></a><span data-ttu-id="1cdab-124">Passaggio 3: Determinare le dimensioni di cluster iniziale hello</span><span class="sxs-lookup"><span data-stu-id="1cdab-124">Step 3: Determine hello initial cluster size</span></span>
<span data-ttu-id="1cdab-125">Ogni nodo in un cluster di Service Fabric autonomo è hello Service Fabric runtime distribuito ed è un membro del cluster di hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-125">Each node in a standalone Service Fabric cluster has hello Service Fabric runtime deployed and is a member of hello cluster.</span></span> <span data-ttu-id="1cdab-126">In una distribuzione di produzione tipica è presente un nodo per istanza (fisica o virtuale) del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="1cdab-126">In a typical production deployment, there is one node per OS instance (physical or virtual).</span></span> <span data-ttu-id="1cdab-127">dimensione del cluster Hello è determinato dalle esigenze aziendali.</span><span class="sxs-lookup"><span data-stu-id="1cdab-127">hello cluster size is determined by your business needs.</span></span> <span data-ttu-id="1cdab-128">È tuttavia necessario avere una dimensione minima del cluster di tre nodi (computer o macchine virtuali).</span><span class="sxs-lookup"><span data-stu-id="1cdab-128">However, you must have a minimum cluster size of three nodes (machines or virtual machines).</span></span>
<span data-ttu-id="1cdab-129">A scopi di sviluppo è possibile configurare più di un nodo in una macchina specifica.</span><span class="sxs-lookup"><span data-stu-id="1cdab-129">For development purposes, you can have more than one node on a given machine.</span></span> <span data-ttu-id="1cdab-130">In un ambiente di produzione, il Service Fabric supporta solo un nodo per ogni macchina virtuale o fisica.</span><span class="sxs-lookup"><span data-stu-id="1cdab-130">In a production environment, Service Fabric supports only one node per physical or virtual machine.</span></span>

### <a name="step-4-determine-hello-number-of-fault-domains-and-upgrade-domains"></a><span data-ttu-id="1cdab-131">Passaggio 4: Determinare il numero di hello di domini di errore e domini di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="1cdab-131">Step 4: Determine hello number of fault domains and upgrade domains</span></span>
<span data-ttu-id="1cdab-132">Oggetto *dominio di errore* (FD) è un'unità fisica di errore e dell'infrastruttura fisica toohello direttamente correlati nei centri dati hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-132">A *fault domain* (FD) is a physical unit of failure and is directly related toohello physical infrastructure in hello data centers.</span></span> <span data-ttu-id="1cdab-133">È costituito da componenti hardware (computer, commutatori, rete e altro) che condividono un singolo punto di guasto.</span><span class="sxs-lookup"><span data-stu-id="1cdab-133">A fault domain consists of hardware components (computers, switches, networks, and more) that share a single point of failure.</span></span> <span data-ttu-id="1cdab-134">Sebbene non sia presente una mappatura 1:1 tra domini di errore e rack, ogni rack può essere considerato in senso lato un dominio di errore.</span><span class="sxs-lookup"><span data-stu-id="1cdab-134">Although there is no 1:1 mapping between fault domains and racks, loosely speaking, each rack can be considered a fault domain.</span></span> <span data-ttu-id="1cdab-135">Quando si considera i nodi del cluster hello, è consigliabile che i nodi di hello distribuito tra almeno tre domini di errore.</span><span class="sxs-lookup"><span data-stu-id="1cdab-135">When considering hello nodes in your cluster, we strongly recommend that hello nodes be distributed among at least three fault domains.</span></span>

<span data-ttu-id="1cdab-136">Quando si specificano i domini di errore in Clusterconfig, è possibile scegliere il nome di hello per ogni FD.</span><span class="sxs-lookup"><span data-stu-id="1cdab-136">When you specify FDs in ClusterConfig.json, you can choose hello name for each FD.</span></span> <span data-ttu-id="1cdab-137">Il Service Fabric supporta i domini di errore gerarchici, in modo che possano rispecchiare la topologia infrastrutturale.</span><span class="sxs-lookup"><span data-stu-id="1cdab-137">Service Fabric supports hierarchical FDs, so you can reflect your infrastructure topology in them.</span></span>  <span data-ttu-id="1cdab-138">Ad esempio, hello domini di errore seguenti è valido:</span><span class="sxs-lookup"><span data-stu-id="1cdab-138">For example, hello following FDs are valid:</span></span>

* <span data-ttu-id="1cdab-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span><span class="sxs-lookup"><span data-stu-id="1cdab-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span></span>
* <span data-ttu-id="1cdab-140">"faultDomain": "fd:/FD1"</span><span class="sxs-lookup"><span data-stu-id="1cdab-140">"faultDomain": "fd:/FD1"</span></span>
* <span data-ttu-id="1cdab-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span><span class="sxs-lookup"><span data-stu-id="1cdab-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span></span>

<span data-ttu-id="1cdab-142">Un *dominio di aggiornamento* è un'unità logica di nodi.</span><span class="sxs-lookup"><span data-stu-id="1cdab-142">An *upgrade domain* (UD) is a logical unit of nodes.</span></span> <span data-ttu-id="1cdab-143">Durante gli aggiornamenti orchestrati di Service Fabric (un aggiornamento dell'applicazione o un aggiornamento del cluster), tutti i nodi in un UD vengono portati aggiornamento hello tooperform mentre i nodi in altri domini di aggiornamento rimangono disponibili tooserve richieste.</span><span class="sxs-lookup"><span data-stu-id="1cdab-143">During Service Fabric orchestrated upgrades (either an application upgrade or a cluster upgrade), all nodes in a UD are taken down tooperform hello upgrade while nodes in other UDs remain available tooserve requests.</span></span> <span data-ttu-id="1cdab-144">Hello gli aggiornamenti del firmware eseguite nei computer che non rispettano UD, pertanto è necessario eseguire in una macchina alla volta.</span><span class="sxs-lookup"><span data-stu-id="1cdab-144">hello firmware upgrades you perform on your machines do not honor UDs, so you must do them one machine at a time.</span></span>

<span data-ttu-id="1cdab-145">toothink modo più semplice di Hello su questi concetti è tooconsider Fd come unità hello di errore non pianificato e domini di aggiornamento come unità hello di manutenzione pianificata.</span><span class="sxs-lookup"><span data-stu-id="1cdab-145">hello simplest way toothink about these concepts is tooconsider FDs as hello unit of unplanned failure and UDs as hello unit of planned maintenance.</span></span>

<span data-ttu-id="1cdab-146">Quando si specifica UD in Clusterconfig, è possibile scegliere il nome di hello per ogni ID.</span><span class="sxs-lookup"><span data-stu-id="1cdab-146">When you specify UDs in ClusterConfig.json, you can choose hello name for each UD.</span></span> <span data-ttu-id="1cdab-147">Ad esempio, hello seguente i nomi è valido:</span><span class="sxs-lookup"><span data-stu-id="1cdab-147">For example, hello following names are valid:</span></span>

* <span data-ttu-id="1cdab-148">"upgradeDomain": "UD0"</span><span class="sxs-lookup"><span data-stu-id="1cdab-148">"upgradeDomain": "UD0"</span></span>
* <span data-ttu-id="1cdab-149">"upgradeDomain": "UD1A"</span><span class="sxs-lookup"><span data-stu-id="1cdab-149">"upgradeDomain": "UD1A"</span></span>
* <span data-ttu-id="1cdab-150">"upgradeDomain": "DomainRed"</span><span class="sxs-lookup"><span data-stu-id="1cdab-150">"upgradeDomain": "DomainRed"</span></span>
* <span data-ttu-id="1cdab-151">"upgradeDomain": "Blue"</span><span class="sxs-lookup"><span data-stu-id="1cdab-151">"upgradeDomain": "Blue"</span></span>

<span data-ttu-id="1cdab-152">Per informazioni più dettagliate sui domini di aggiornamento e di errore, vedere [Descrizione di un cluster di Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md).</span><span class="sxs-lookup"><span data-stu-id="1cdab-152">For more detailed information on upgrade domains and fault domains, see [Describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md).</span></span>

### <a name="step-5-download-hello-service-fabric-standalone-package-for-windows-server"></a><span data-ttu-id="1cdab-153">Passaggio 5: Scaricare pacchetto autonomo di hello Service Fabric per Windows Server</span><span class="sxs-lookup"><span data-stu-id="1cdab-153">Step 5: Download hello Service Fabric standalone package for Windows Server</span></span>
<span data-ttu-id="1cdab-154">[Scaricare Windows Server di collegamento - pacchetto autonomo di Service Fabric -](http://go.microsoft.com/fwlink/?LinkId=730690) e decomprimere il pacchetto di hello, vale a dire dei entrambi distribuzione tooa computer non fa parte del cluster hello o tooone macchine hello che farà parte del cluster.</span><span class="sxs-lookup"><span data-stu-id="1cdab-154">[Download Link - Service Fabric Standalone Package - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) and unzip hello package, either tooa deployment machine that is not part of hello cluster, or tooone of hello machines that will be a part of your cluster.</span></span>

### <a name="step-6-modify-cluster-configuration"></a><span data-ttu-id="1cdab-155">Passaggio 6: modificare la configurazione del cluster</span><span class="sxs-lookup"><span data-stu-id="1cdab-155">Step 6: Modify cluster configuration</span></span>
<span data-ttu-id="1cdab-156">un cluster autonomo toocreate è toocreate un autonomo cluster Clusterconfig file di configurazione che descrive la specifica di hello del cluster di hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-156">toocreate a standalone cluster you have toocreate a standalone cluster configuration ClusterConfig.json file, which describes hello specification of hello cluster.</span></span> <span data-ttu-id="1cdab-157">È possibile basare i file di configurazione hello nei modelli di hello nella hello collegamento sottostante.</span><span class="sxs-lookup"><span data-stu-id="1cdab-157">You can base hello configuration file on hello templates found at hello below link.</span></span> <br><span data-ttu-id="1cdab-158">
[Configurazioni di cluster autonomi](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span><span class="sxs-lookup"><span data-stu-id="1cdab-158">
[Standalone Cluster Configurations](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span></span>

<span data-ttu-id="1cdab-159">Per informazioni dettagliate sulle sezioni hello in questo file, vedere [le impostazioni di configurazione per il cluster di Windows autonoma](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="1cdab-159">For details on hello sections in this file, see [Configuration settings for standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span>

<span data-ttu-id="1cdab-160">Aprire uno dei file Clusterconfig hello dal pacchetto hello scaricato e modificare hello seguenti impostazioni:</span><span class="sxs-lookup"><span data-stu-id="1cdab-160">Open one of hello ClusterConfig.json files from hello package you downloaded and modify hello following settings:</span></span>
| <span data-ttu-id="1cdab-161">**Impostazioni di configurazione**</span><span class="sxs-lookup"><span data-stu-id="1cdab-161">**Configuration Setting**</span></span> | <span data-ttu-id="1cdab-162">**Descrizione**</span><span class="sxs-lookup"><span data-stu-id="1cdab-162">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="1cdab-163">**NodeTypes**</span><span class="sxs-lookup"><span data-stu-id="1cdab-163">**NodeTypes**</span></span> |<span data-ttu-id="1cdab-164">Tipi di nodo consentono tooseparate i nodi del cluster in gruppi diversi.</span><span class="sxs-lookup"><span data-stu-id="1cdab-164">Node types allow you tooseparate your cluster nodes into various groups.</span></span> <span data-ttu-id="1cdab-165">Un cluster deve avere almeno un NodeType.</span><span class="sxs-lookup"><span data-stu-id="1cdab-165">A cluster must have at least one NodeType.</span></span> <span data-ttu-id="1cdab-166">Tutti i nodi in un gruppo sia hello caratteristiche comuni seguenti:</span><span class="sxs-lookup"><span data-stu-id="1cdab-166">All nodes in a group have hello following common characteristics:</span></span> <br> <span data-ttu-id="1cdab-167">**Nome** -si tratta del tipo di nodo hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-167">**Name** - This is hello node type name.</span></span> <br><span data-ttu-id="1cdab-168">**Porte di endpoint** : endpoint con nomi diversi (porte) associati a questo tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="1cdab-168">**Endpoint Ports** - These are various named end points (ports) that are associated with this node type.</span></span> <span data-ttu-id="1cdab-169">È possibile utilizzare qualsiasi numero di porta che si desidera, purché non siano in conflitto con qualsiasi altro in questo manifesto e non sono già in uso da un'altra applicazione in esecuzione nella macchina hello/macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="1cdab-169">You can use any port number that you wish, as long as they do not conflict with anything else in this manifest and are not already in use by any other application running on hello machine/VM.</span></span> <br> <span data-ttu-id="1cdab-170">**Proprietà di posizionamento** -questi descrivono le proprietà per questo tipo di nodo che si utilizza come vincoli di posizionamento per servizi di sistema hello o i servizi.</span><span class="sxs-lookup"><span data-stu-id="1cdab-170">**Placement Properties** - These describe properties for this node type that you use as placement constraints for hello system services or your services.</span></span> <span data-ttu-id="1cdab-171">Queste proprietà sono coppie chiave-valore definite dall'utente che forniscono metadati aggiuntivi per un determinato nodo.</span><span class="sxs-lookup"><span data-stu-id="1cdab-171">These properties are user-defined key/value pairs that provide extra meta data for a given node.</span></span> <span data-ttu-id="1cdab-172">Esempi di proprietà del nodo sarebbe se il nodo hello dispone di un disco rigido o scheda grafica, il numero di hello di assi nel relativo disco rigido, Core e altre proprietà fisiche.</span><span class="sxs-lookup"><span data-stu-id="1cdab-172">Examples of node properties would be whether hello node has a hard drive or graphics card, hello number of spindles in its hard drive, cores, and other physical properties.</span></span> <br> <span data-ttu-id="1cdab-173">**Capacità** -capacità nodo definire hello nome e la quantità di una risorsa specifica che un determinato nodo è disponibile per l'utilizzo.</span><span class="sxs-lookup"><span data-stu-id="1cdab-173">**Capacities** - Node capacities define hello name and amount of a particular resource that a particular node has available for consumption.</span></span> <span data-ttu-id="1cdab-174">Ad esempio, un nodo può definire la propria capacità per una metrica denominata "MemoryInMb" con un valore predefinito di 2048 MB di memoria disponibile.</span><span class="sxs-lookup"><span data-stu-id="1cdab-174">For example, a node may define that it has capacity for a metric called “MemoryInMb” and that it has 2048 MB available by default.</span></span> <span data-ttu-id="1cdab-175">Queste capacità vengono usati servizi che richiedono una determinata quantità di risorse vengono inseriti nei nodi hello sono le risorse disponibili in hello necessarie quantità tooensure di runtime.</span><span class="sxs-lookup"><span data-stu-id="1cdab-175">These capacities are used at runtime tooensure that services that require particular amounts of resources are placed on hello nodes that have those resources available in hello required amounts.</span></span><br><span data-ttu-id="1cdab-176">**IsPrimary** : se presente più di un tipo di nodo definito assicurarsi che solo uno è impostato tooprimary con valore hello *true*, che è in esecuzione dei servizi di sistema hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-176">**IsPrimary** - If you have more than one NodeType defined ensure that only one is set tooprimary with hello value *true*, which is where hello system services run.</span></span> <span data-ttu-id="1cdab-177">Tutti gli altri tipi di nodo devono essere impostati come valore toohello *false*</span><span class="sxs-lookup"><span data-stu-id="1cdab-177">All other node types should be set toohello value *false*</span></span> |
| <span data-ttu-id="1cdab-178">**Nodi**</span><span class="sxs-lookup"><span data-stu-id="1cdab-178">**Nodes**</span></span> |<span data-ttu-id="1cdab-179">Questi sono i dettagli di hello per ognuno dei nodi di hello che fanno parte del cluster di hello (tipo di nodo, il nome del nodo, IP indirizzo, dominio di errore e dominio di aggiornamento del nodo hello).</span><span class="sxs-lookup"><span data-stu-id="1cdab-179">These are hello details for each of hello nodes that are part of hello cluster (node type, node name, IP address, fault domain, and upgrade domain of hello node).</span></span> <span data-ttu-id="1cdab-180">macchine Hello desiderato hello cluster toobe creato in toobe necessità elencati di seguito con gli indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="1cdab-180">hello machines you want hello cluster toobe created on need toobe listed here with their IP addresses.</span></span> <br> <span data-ttu-id="1cdab-181">Se si utilizza hello stesso indirizzo IP di tutti i nodi di hello, viene creato un cluster di una casella, che è possibile utilizzare a scopo di test.</span><span class="sxs-lookup"><span data-stu-id="1cdab-181">If you use hello same IP address for all hello nodes, then a one-box cluster is created, which you can use for testing purposes.</span></span> <span data-ttu-id="1cdab-182">Non usare cluster di una casella per la distribuzione dei carichi di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="1cdab-182">Do not use One-box clusters for deploying production workloads.</span></span> |

<span data-ttu-id="1cdab-183">Dopo la configurazione del cluster hello ha tutte le impostazioni configurate toohello ambiente, può essere testato in ambiente cluster hello (passaggio 7).</span><span class="sxs-lookup"><span data-stu-id="1cdab-183">After hello cluster configuration has had all settings configured toohello environment, it can be tested against hello cluster environment (step 7).</span></span>

<a id="environmentsetup"></a>

### <a name="step-7-environment-setup"></a><span data-ttu-id="1cdab-184">Passaggio 7.</span><span class="sxs-lookup"><span data-stu-id="1cdab-184">Step 7.</span></span> <span data-ttu-id="1cdab-185">Configurazione dell'ambiente</span><span class="sxs-lookup"><span data-stu-id="1cdab-185">Environment setup</span></span>

<span data-ttu-id="1cdab-186">Quando un amministratore di cluster consente di configurare un cluster di Service Fabric autonomo, ambiente hello è deve toobe impostato con hello seguenti criteri:</span><span class="sxs-lookup"><span data-stu-id="1cdab-186">When a cluster administrator configures a Service Fabric standalone cluster, hello environment is needs toobe set up with hello following criteria:</span></span> <br>
1. <span data-ttu-id="1cdab-187">utente di Hello creazione hello cluster deve disporre di macchine di tooall privilegi di sicurezza a livello di amministratore elencati come nodi nel file di configurazione del cluster hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-187">hello user creating hello cluster should have administrator-level security privileges tooall machines that are listed as nodes in hello cluster configuration file.</span></span>
2. <span data-ttu-id="1cdab-188">Computer da cui hello cluster è stato creato, nonché a ogni computer del nodo del cluster deve:</span><span class="sxs-lookup"><span data-stu-id="1cdab-188">Machine from which hello cluster is created, as well as each cluster node machine must:</span></span>
* <span data-ttu-id="1cdab-189">Service Fabric SDK non installato</span><span class="sxs-lookup"><span data-stu-id="1cdab-189">Have Service Fabric SDK uninstalled</span></span>
* <span data-ttu-id="1cdab-190">Runtime di Service Fabric non installato</span><span class="sxs-lookup"><span data-stu-id="1cdab-190">Have Service Fabric runtime uninstalled</span></span> 
* <span data-ttu-id="1cdab-191">Avrà hello servizio Windows Firewall (mpssvc) abilitato</span><span class="sxs-lookup"><span data-stu-id="1cdab-191">Have hello Windows Firewall service (mpssvc) enabled</span></span>
* <span data-ttu-id="1cdab-192">Hello servizio Registro di sistema remoto (remoteregistry) è stato abilitato</span><span class="sxs-lookup"><span data-stu-id="1cdab-192">Have hello Remote Registry Service (remoteregistry) enabled</span></span>
* <span data-ttu-id="1cdab-193">Condivisione file (SMB) abilitata</span><span class="sxs-lookup"><span data-stu-id="1cdab-193">Have file sharing (SMB) enabled</span></span>
* <span data-ttu-id="1cdab-194">Porte aperte necessarie in base alle porte di configurazione del cluster</span><span class="sxs-lookup"><span data-stu-id="1cdab-194">Have necessary ports opened, based on cluster configuration ports</span></span>
* <span data-ttu-id="1cdab-195">Porte aperte necessarie per il servizio Registro di sistema remoto e Windows SMB: 135, 137, 138, 139 e 445</span><span class="sxs-lookup"><span data-stu-id="1cdab-195">Have necessary ports opened for Windows SMB and Remote Registry service: 135, 137, 138, 139, and 445</span></span>
* <span data-ttu-id="1cdab-196">Tooone di connettività di rete hanno un altro</span><span class="sxs-lookup"><span data-stu-id="1cdab-196">Have network connectivity tooone another</span></span>
3. <span data-ttu-id="1cdab-197">Nessuno dei computer del nodo cluster hello deve essere un Controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="1cdab-197">None of hello cluster node machines should be a Domain Controller.</span></span>
4. <span data-ttu-id="1cdab-198">Se hello cluster toobe distribuita è un cluster protetto, convalidare la sicurezza hello prerequisiti siano posizionare e sono configurati correttamente con configurazione hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-198">If hello cluster toobe deployed is a secure cluster, validate hello necessary security prerequisites are in place, and are configured correctly against hello configuration.</span></span>
5. <span data-ttu-id="1cdab-199">Se i computer del cluster hello non sono accessibili da internet, configurazione dei cluster di set seguente di hello in hello:</span><span class="sxs-lookup"><span data-stu-id="1cdab-199">If hello cluster machines are not internet-accessible, set hello following in hello cluster configuration:</span></span>
* <span data-ttu-id="1cdab-200">Disabilitare la telemetria: in *properties* impostare *"enableTelemetry": false*</span><span class="sxs-lookup"><span data-stu-id="1cdab-200">Disable telemetry:   Under *properties* set   *"enableTelemetry": false*</span></span>
* <span data-ttu-id="1cdab-201">Disabilitare il download di versione di Fabric & notifiche tale versione del cluster corrente hello è vicina al termine del supporto automatico: in *proprietà* impostare *"fabricClusterAutoupgradeEnabled": false*</span><span class="sxs-lookup"><span data-stu-id="1cdab-201">Disable automatic Fabric version downloading & notifications that hello current cluster version is nearing end of support:   Under *properties* set   *"fabricClusterAutoupgradeEnabled": false*</span></span>
* <span data-ttu-id="1cdab-202">In alternativa se l'accesso alla rete internet è limitati domini elencati toowhite, domini hello riportato di seguito sono necessari per l'aggiornamento automatico: go.microsoft.com download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="1cdab-202">Alternatively if network internet access is limited toowhite-listed domains, hello domains below are required for automatic upgrade:   go.microsoft.com   download.microsoft.com</span></span>

6. <span data-ttu-id="1cdab-203">Impostare le esclusioni antivirus di Service Fabric appropriate:</span><span class="sxs-lookup"><span data-stu-id="1cdab-203">Set appropriate Service Fabric antivirus exclusions:</span></span>

| <span data-ttu-id="1cdab-204">**Directory escluse dall'antivirus**</span><span class="sxs-lookup"><span data-stu-id="1cdab-204">**Antivirus Excluded directories**</span></span> |
| --- |
| <span data-ttu-id="1cdab-205">Program Files\Microsoft Service Fabric</span><span class="sxs-lookup"><span data-stu-id="1cdab-205">Program Files\Microsoft Service Fabric</span></span> |
| <span data-ttu-id="1cdab-206">FabricDataRoot (dalla configurazione del cluster)</span><span class="sxs-lookup"><span data-stu-id="1cdab-206">FabricDataRoot (from cluster configuration)</span></span> |
| <span data-ttu-id="1cdab-207">FabricLogRoot (dalla configurazione del cluster)</span><span class="sxs-lookup"><span data-stu-id="1cdab-207">FabricLogRoot (from cluster configuration)</span></span> |

| <span data-ttu-id="1cdab-208">**Processi esclusi dall'antivirus**</span><span class="sxs-lookup"><span data-stu-id="1cdab-208">**Antivirus Excluded processes**</span></span> |
| --- |
| <span data-ttu-id="1cdab-209">Fabric.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-209">Fabric.exe</span></span> |
| <span data-ttu-id="1cdab-210">FabricHost.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-210">FabricHost.exe</span></span> |
| <span data-ttu-id="1cdab-211">FabricInstallerService.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-211">FabricInstallerService.exe</span></span> |
| <span data-ttu-id="1cdab-212">FabricSetup.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-212">FabricSetup.exe</span></span> |
| <span data-ttu-id="1cdab-213">FabricDeployer.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-213">FabricDeployer.exe</span></span> |
| <span data-ttu-id="1cdab-214">ImageBuilder.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-214">ImageBuilder.exe</span></span> |
| <span data-ttu-id="1cdab-215">FabricGateway.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-215">FabricGateway.exe</span></span> |
| <span data-ttu-id="1cdab-216">FabricDCA.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-216">FabricDCA.exe</span></span> |
| <span data-ttu-id="1cdab-217">FabricFAS.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-217">FabricFAS.exe</span></span> |
| <span data-ttu-id="1cdab-218">FabricUOS.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-218">FabricUOS.exe</span></span> |
| <span data-ttu-id="1cdab-219">FabricRM.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-219">FabricRM.exe</span></span> |
| <span data-ttu-id="1cdab-220">FileStoreService.exe</span><span class="sxs-lookup"><span data-stu-id="1cdab-220">FileStoreService.exe</span></span> |

### <a name="step-8-validate-environment-using-testconfiguration-script"></a><span data-ttu-id="1cdab-221">Passaggio 8.</span><span class="sxs-lookup"><span data-stu-id="1cdab-221">Step 8.</span></span> <span data-ttu-id="1cdab-222">Convalidare l'ambiente con lo script TestConfiguration</span><span class="sxs-lookup"><span data-stu-id="1cdab-222">Validate environment using TestConfiguration script</span></span>
<span data-ttu-id="1cdab-223">Hello TestConfiguration.ps1 script può essere trovato nel pacchetto autonomo di hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-223">hello TestConfiguration.ps1 script can be found in hello standalone package.</span></span> <span data-ttu-id="1cdab-224">È utilizzato come un toovalidate Best Practices Analyzer alcuni criteri hello precedente e deve essere utilizzato come un toovalidate di controllo di integrità, se un cluster può essere distribuito in un determinato ambiente.</span><span class="sxs-lookup"><span data-stu-id="1cdab-224">It is used as a Best Practices Analyzer toovalidate some of hello criteria above and should be used as a sanity check toovalidate whether a cluster can be deployed on a given environment.</span></span> <span data-ttu-id="1cdab-225">Se si verifica qualsiasi errore, vedere elenco toohello [impostazione dell'ambiente](service-fabric-cluster-standalone-deployment-preparation.md) per la risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="1cdab-225">If there is any failure, refer toohello list under [Environment Setup](service-fabric-cluster-standalone-deployment-preparation.md) for troubleshooting.</span></span> 

<span data-ttu-id="1cdab-226">Questo script può essere eseguito su qualsiasi computer che dispone di amministratore accesso tooall hello computer elencati come nodi nel file di configurazione del cluster hello.</span><span class="sxs-lookup"><span data-stu-id="1cdab-226">This script can be run on any machine that has administrator access tooall hello machines that are listed as nodes in hello cluster configuration file.</span></span> <span data-ttu-id="1cdab-227">macchina Hello che questo script viene eseguito in non è una parte del cluster hello toobe.</span><span class="sxs-lookup"><span data-stu-id="1cdab-227">hello machine that this script is run on does not have toobe part of hello cluster.</span></span>

```powershell
PS C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer> .\TestConfiguration.ps1 -ClusterConfigFilePath .\ClusterConfig.Unsecure.DevCluster.json
Trace folder already exists. Traces will be written tooexisting trace folder: C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer\DeploymentTraces
Running Best Practices Analyzer...
Best Practices Analyzer completed successfully.


LocalAdminPrivilege        : True
IsJsonValid                : True
IsCabValid                 : True
RequiredPortsOpen          : True
RemoteRegistryAvailable    : True
FirewallAvailable          : True
RpcCheckPassed             : True
NoConflictingInstallations : True
FabricInstallable          : True
Passed                     : True
```

<span data-ttu-id="1cdab-228">Questo modulo di configurazione di test attualmente non convalida la configurazione di sicurezza hello pertanto ha toobe eseguita in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="1cdab-228">Currently this configuration testing module does not validate hello security configuration so this has toobe done independently.</span></span>  

> [!NOTE]
> <span data-ttu-id="1cdab-229">Vengono continuamente apportati miglioramenti toomake questo modulo più affidabile, pertanto se si verifica un guasto o mancante case che si ritiene che non è attualmente rilevata da TestConfiguration, segnalarlo tramite il nostro [supportano i canali](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span><span class="sxs-lookup"><span data-stu-id="1cdab-229">We are continually making improvements toomake this module more robust, so if there is a faulty or missing case which you believe isn't currently caught by TestConfiguration, please let us know through our [support channels](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span></span>   
> 
> 

## <a name="next-steps"></a><span data-ttu-id="1cdab-230">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="1cdab-230">Next steps</span></span>
* [<span data-ttu-id="1cdab-231">Creare un cluster autonomo in esecuzione su Windows Server</span><span class="sxs-lookup"><span data-stu-id="1cdab-231">Create a standalone cluster running on Windows Server</span></span>](service-fabric-cluster-creation-for-windows-server.md)
