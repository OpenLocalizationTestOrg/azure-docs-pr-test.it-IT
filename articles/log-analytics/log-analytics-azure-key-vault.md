---
title: Soluzione Insieme di credenziali delle chiavi di Azure in Log Analytics | Documentazione Microsoft
description: "È possibile usare la soluzione Insieme di credenziali delle chiavi di Azure in Log Analytics per esaminare i log dell'Insieme di credenziali delle chiavi di Azure."
services: log-analytics
documentationcenter: 
author: richrundmsft
manager: jochan
editor: 
ms.assetid: 5e25e6d6-dd20-4528-9820-6e2958a40dae
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/09/2017
ms.author: richrund
ms.openlocfilehash: 651586e0846ffb22a23e64b73c2cc614980d9b92
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="azure-key-vault-analytics-solution-in-log-analytics"></a><span data-ttu-id="e8a60-103">Soluzione di Azure Key Vault Analytics in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="e8a60-103">Azure Key Vault Analytics solution in Log Analytics</span></span>

![Simbolo di Key Vault](./media/log-analytics-azure-keyvault/key-vault-analytics-symbol.png)

<span data-ttu-id="e8a60-105">È possibile usare la soluzione Insieme di credenziali delle chiavi di Azure in Log Analytics per esaminare i log AuditEvent dell'Insieme di credenziali delle chiavi di Azure.</span><span class="sxs-lookup"><span data-stu-id="e8a60-105">You can use the Azure Key Vault solution in Log Analytics to review Azure Key Vault AuditEvent logs.</span></span>

<span data-ttu-id="e8a60-106">Per usare la soluzione, è necessario abilitare la registrazione diagnostica di Azure Key Vault e indirizzare la diagnostica a un'area di lavoro di Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="e8a60-106">To use the solution, you need to enable logging of Azure Key Vault diagnostics and direct the diagnostics to a Log Analytics workspace.</span></span> <span data-ttu-id="e8a60-107">Non è necessario inserire i log nell'Archiviazione BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="e8a60-107">It is not necessary to write the logs to Azure Blob storage.</span></span>

> [!NOTE]
> <span data-ttu-id="e8a60-108">Nel gennaio 2017, il metodo supportato per l'invio dei log da Key Vault a Log Analytics è cambiato.</span><span class="sxs-lookup"><span data-stu-id="e8a60-108">In January 2017, the supported way of sending logs from Key Vault to Log Analytics changed.</span></span> <span data-ttu-id="e8a60-109">Se per la soluzione Key Vault in uso è indicato *(obsoleto)* nel titolo, fare riferimento alla sezione [Migrazione dalla soluzione Key Vault precedente](#migrating-from-the-old-key-vault-solution) per i passaggi da seguire.</span><span class="sxs-lookup"><span data-stu-id="e8a60-109">If the Key Vault solution you are using shows *(deprecated)* in the title, refer to [migrating from the old Key Vault solution](#migrating-from-the-old-key-vault-solution) for steps you need to follow.</span></span>
>
>

## <a name="install-and-configure-the-solution"></a><span data-ttu-id="e8a60-110">Installare e configurare la soluzione</span><span class="sxs-lookup"><span data-stu-id="e8a60-110">Install and configure the solution</span></span>
<span data-ttu-id="e8a60-111">Usare le istruzioni seguenti per installare e configurare la soluzione Insieme di credenziali delle chiavi di Azure:</span><span class="sxs-lookup"><span data-stu-id="e8a60-111">Use the following instructions to install and configure the Azure Key Vault solution:</span></span>

1. <span data-ttu-id="e8a60-112">Abilitare la soluzione Azure Key Vault da [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview) o seguendo la procedura illustrata in [Aggiungere soluzioni di Log Analytics dalla Raccolta soluzioni](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="e8a60-112">Enable the Azure Key Vault solution from [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview) or by using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>
2. <span data-ttu-id="e8a60-113">Abilitare la registrazione diagnostica per le risorse di Key Vault da monitorare, usando il [portale](#enable-key-vault-diagnostics-in-the-portal) o [PowerShell](#enable-key-vault-diagnostics-using-powershell)</span><span class="sxs-lookup"><span data-stu-id="e8a60-113">Enable diagnostics logging for the Key Vault resources to monitor, using either the [portal](#enable-key-vault-diagnostics-in-the-portal) or [PowerShell](#enable-key-vault-diagnostics-using-powershell)</span></span>

### <a name="enable-key-vault-diagnostics-in-the-portal"></a><span data-ttu-id="e8a60-114">Abilitare la diagnostica di Key Vault nel portale</span><span class="sxs-lookup"><span data-stu-id="e8a60-114">Enable Key Vault diagnostics in the portal</span></span>

1. <span data-ttu-id="e8a60-115">Nel portale di Azure passare alla risorsa Key Vault da monitorare</span><span class="sxs-lookup"><span data-stu-id="e8a60-115">In the Azure portal, navigate to the Key Vault resource to monitor</span></span>
2. <span data-ttu-id="e8a60-116">Selezionare *Log di diagnostica* per aprire la pagina seguente</span><span class="sxs-lookup"><span data-stu-id="e8a60-116">Select *Diagnostics logs* to open the following page</span></span>

   ![Immagine del riquadro Insieme di credenziali delle chiavi di Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault-enable-diagnostics01.png)
3. <span data-ttu-id="e8a60-118">Fare clic su *Attiva diagnostica* per aprire la pagina seguente</span><span class="sxs-lookup"><span data-stu-id="e8a60-118">Click *Turn on diagnostics* to open the following page</span></span>

   ![Immagine del riquadro Insieme di credenziali delle chiavi di Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault-enable-diagnostics02.png)
4. <span data-ttu-id="e8a60-120">Per attivare la diagnostica, fare clic su *Attivato* in *Stato*</span><span class="sxs-lookup"><span data-stu-id="e8a60-120">To turn on diagnostics, click *On* under *Status*</span></span>
5. <span data-ttu-id="e8a60-121">Selezionare la casella di controllo *Send to Log Analytics* (Invia a Log Analytics)</span><span class="sxs-lookup"><span data-stu-id="e8a60-121">Click the checkbox for *Send to Log Analytics*</span></span>
6. <span data-ttu-id="e8a60-122">Selezionare un'area di lavoro Log Analytics esistente o creare una</span><span class="sxs-lookup"><span data-stu-id="e8a60-122">Select an existing Log Analytics workspace, or create a workspace</span></span>
7. <span data-ttu-id="e8a60-123">Per abilitare i log *AuditEvent*, fare clic sulla casella di controllo in Log</span><span class="sxs-lookup"><span data-stu-id="e8a60-123">To enable *AuditEvent* logs, click the checkbox under Log</span></span>
8. <span data-ttu-id="e8a60-124">Fare clic su *Salva* per abilitare la registrazione della diagnostica per Log Analytics</span><span class="sxs-lookup"><span data-stu-id="e8a60-124">Click *Save* to enable the logging of diagnostics to Log Analytics</span></span>

### <a name="enable-key-vault-diagnostics-using-powershell"></a><span data-ttu-id="e8a60-125">Abilitare la diagnostica di Key Vault utilizzando PowerShell</span><span class="sxs-lookup"><span data-stu-id="e8a60-125">Enable Key Vault diagnostics using PowerShell</span></span>
<span data-ttu-id="e8a60-126">Il seguente script PowerShell contiene un esempio su come utilizzare `Set-AzureRmDiagnosticSetting` per abilitare la registrazione della diagnostica per Key Vault:</span><span class="sxs-lookup"><span data-stu-id="e8a60-126">The following PowerShell script provides an example of how to use `Set-AzureRmDiagnosticSetting` to enable diagnostic logging for Key Vault:</span></span>
```
$workspaceId = "/subscriptions/d2e37fee-1234-40b2-5678-0b2199de3b50/resourcegroups/oi-default-east-us/providers/microsoft.operationalinsights/workspaces/rollingbaskets"

$kv = Get-AzureRmKeyVault -VaultName 'ContosoKeyVault'

Set-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId  -WorkspaceId $workspaceId -Enabled $true
```



## <a name="review-azure-key-vault-data-collection-details"></a><span data-ttu-id="e8a60-127">Esaminare i dettagli della raccolta di dati dell'Insieme di credenziali delle chiavi di Azure</span><span class="sxs-lookup"><span data-stu-id="e8a60-127">Review Azure Key Vault data collection details</span></span>
<span data-ttu-id="e8a60-128">La soluzione Azure Key Vault raccoglie i log di diagnostica direttamente da Key Vault.</span><span class="sxs-lookup"><span data-stu-id="e8a60-128">Azure Key Vault solution collects diagnostics logs directly from the Key Vault.</span></span>
<span data-ttu-id="e8a60-129">Non è necessario inserire i log in Archiviazione BLOB di Azure né è necessario alcun agente per la raccolta dati.</span><span class="sxs-lookup"><span data-stu-id="e8a60-129">It is not necessary to write the logs to Azure Blob storage and no agent is required for data collection.</span></span>

<span data-ttu-id="e8a60-130">La tabella seguente illustra i metodi di raccolta dei dati e altri dettagli sulla modalità di raccolta dei dati per l'Insieme di credenziali delle chiavi di Azure.</span><span class="sxs-lookup"><span data-stu-id="e8a60-130">The following table shows data collection methods and other details about how data is collected for Azure Key Vault.</span></span>

| <span data-ttu-id="e8a60-131">Piattaforma</span><span class="sxs-lookup"><span data-stu-id="e8a60-131">Platform</span></span> | <span data-ttu-id="e8a60-132">Agente diretto</span><span class="sxs-lookup"><span data-stu-id="e8a60-132">Direct agent</span></span> | <span data-ttu-id="e8a60-133">Agente di Systems Center Operations Manager</span><span class="sxs-lookup"><span data-stu-id="e8a60-133">Systems Center Operations Manager agent</span></span> | <span data-ttu-id="e8a60-134">Azure</span><span class="sxs-lookup"><span data-stu-id="e8a60-134">Azure</span></span> | <span data-ttu-id="e8a60-135">È necessario Operations Manager?</span><span class="sxs-lookup"><span data-stu-id="e8a60-135">Operations Manager required?</span></span> | <span data-ttu-id="e8a60-136">Dati dell'agente Operations Manager inviati con il gruppo di gestione</span><span class="sxs-lookup"><span data-stu-id="e8a60-136">Operations Manager agent data sent via management group</span></span> | <span data-ttu-id="e8a60-137">Frequenza della raccolta</span><span class="sxs-lookup"><span data-stu-id="e8a60-137">Collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="e8a60-138">Azure</span><span class="sxs-lookup"><span data-stu-id="e8a60-138">Azure</span></span> |  |  |<span data-ttu-id="e8a60-139">&#8226;</span><span class="sxs-lookup"><span data-stu-id="e8a60-139">&#8226;</span></span> |  |  | <span data-ttu-id="e8a60-140">all'arrivo</span><span class="sxs-lookup"><span data-stu-id="e8a60-140">on arrival</span></span> |

## <a name="use-azure-key-vault"></a><span data-ttu-id="e8a60-141">Usare l'Insieme di credenziali delle chiavi di Azure</span><span class="sxs-lookup"><span data-stu-id="e8a60-141">Use Azure Key Vault</span></span>
<span data-ttu-id="e8a60-142">Dopo aver [installato la soluzione](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview), è possibile visualizzare i dati Key Vault facendo clic sul riquadro **Azure Key Vault** dalla pagina **Panoramica** di Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="e8a60-142">After you [install the solution](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.KeyVaultAnalyticsOMS?tab=Overview), view the Key Vault data by clicking the **Azure Key Vault** tile from the **Overview** page of Log Analytics.</span></span>

![Immagine del riquadro Insieme di credenziali delle chiavi di Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault-tile.png)

<span data-ttu-id="e8a60-144">Dopo avere selezionato il riquadro **Panoramica**, è possibile visualizzare i riepiloghi dei log e quindi analizzare i dettagli per le categorie seguenti:</span><span class="sxs-lookup"><span data-stu-id="e8a60-144">After you click the **Overview** tile, you can view summaries of your logs and then drill in to details for the following categories:</span></span>

* <span data-ttu-id="e8a60-145">Volume di tutte le operazioni dell'insieme di credenziali delle chiavi nel tempo</span><span class="sxs-lookup"><span data-stu-id="e8a60-145">Volume of all key vault operations over time</span></span>
* <span data-ttu-id="e8a60-146">Volumi di operazioni non riuscite nel tempo</span><span class="sxs-lookup"><span data-stu-id="e8a60-146">Failed operation volumes over time</span></span>
* <span data-ttu-id="e8a60-147">Latenza operativa media per operazione</span><span class="sxs-lookup"><span data-stu-id="e8a60-147">Average operational latency by operation</span></span>
* <span data-ttu-id="e8a60-148">Qualità del servizio per operazioni con numero delle operazioni che richiedono più di 1000 ms ed elenco di operazioni che richiedono più di 1000 ms</span><span class="sxs-lookup"><span data-stu-id="e8a60-148">Quality of service for operations with the number of operations that take more than 1000 ms and a list of operations that take more than 1000 ms</span></span>

![Immagine del dashboard dell'Insieme di credenziali delle chiavi di Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault01.png)

![Immagine del dashboard dell'Insieme di credenziali delle chiavi di Azure](./media/log-analytics-azure-keyvault/log-analytics-keyvault02.png)

### <a name="to-view-details-for-any-operation"></a><span data-ttu-id="e8a60-151">Per visualizzare i dettagli per un'operazione</span><span class="sxs-lookup"><span data-stu-id="e8a60-151">To view details for any operation</span></span>
1. <span data-ttu-id="e8a60-152">Nella pagina **Panoramica** fare clic sul riquadro **Insieme di credenziali delle chiavi di Azure**.</span><span class="sxs-lookup"><span data-stu-id="e8a60-152">On the **Overview** page, click the **Azure Key Vault** tile.</span></span>
2. <span data-ttu-id="e8a60-153">Nel dashboard **Insieme di credenziali delle chiavi di Azure** esaminare le informazioni di riepilogo in uno dei pannelli, quindi fare clic su un pannello per visualizzare le informazioni dettagliate corrispondenti nella pagina di ricerca di log.</span><span class="sxs-lookup"><span data-stu-id="e8a60-153">On the **Azure Key Vault** dashboard, review the summary information in one of the blades, and then click one to view detailed information about it in the log search page.</span></span>

    <span data-ttu-id="e8a60-154">In una pagina di ricerca di log qualsiasi è possibile visualizzare i risultati in base all'ora, ai dettagli e alla cronologia di ricerca.</span><span class="sxs-lookup"><span data-stu-id="e8a60-154">On any of the log search pages, you can view results by time, detailed results, and your log search history.</span></span> <span data-ttu-id="e8a60-155">È anche possibile filtrare per facet in modo da limitare i risultati.</span><span class="sxs-lookup"><span data-stu-id="e8a60-155">You can also filter by facets to narrow the results.</span></span>

## <a name="log-analytics-records"></a><span data-ttu-id="e8a60-156">Record di Log Analytics</span><span class="sxs-lookup"><span data-stu-id="e8a60-156">Log Analytics records</span></span>
<span data-ttu-id="e8a60-157">La soluzione Insieme di credenziali delle chiavi di Azure analizza i record con tipo **KeyVaults**, raccolti dai [log AuditEvent](../key-vault/key-vault-logging.md) in Diagnostica di Azure.</span><span class="sxs-lookup"><span data-stu-id="e8a60-157">The Azure Key Vault solution analyzes records that have a type of **KeyVaults** that are collected from [AuditEvent logs](../key-vault/key-vault-logging.md) in Azure Diagnostics.</span></span>  <span data-ttu-id="e8a60-158">Le proprietà per questi record sono disponibili nella tabella seguente:</span><span class="sxs-lookup"><span data-stu-id="e8a60-158">Properties for these records are in the following table:</span></span>  

| <span data-ttu-id="e8a60-159">Proprietà</span><span class="sxs-lookup"><span data-stu-id="e8a60-159">Property</span></span> | <span data-ttu-id="e8a60-160">Descrizione</span><span class="sxs-lookup"><span data-stu-id="e8a60-160">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="e8a60-161">Tipo</span><span class="sxs-lookup"><span data-stu-id="e8a60-161">Type</span></span> |<span data-ttu-id="e8a60-162">*AzureDiagnostics*</span><span class="sxs-lookup"><span data-stu-id="e8a60-162">*AzureDiagnostics*</span></span> |
| <span data-ttu-id="e8a60-163">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="e8a60-163">SourceSystem</span></span> |<span data-ttu-id="e8a60-164">*Azzurro*</span><span class="sxs-lookup"><span data-stu-id="e8a60-164">*Azure*</span></span> |
| <span data-ttu-id="e8a60-165">CallerIpAddress</span><span class="sxs-lookup"><span data-stu-id="e8a60-165">CallerIpAddress</span></span> |<span data-ttu-id="e8a60-166">Indirizzo IP del client che ha eseguito la richiesta</span><span class="sxs-lookup"><span data-stu-id="e8a60-166">IP address of the client who made the request</span></span> |
| <span data-ttu-id="e8a60-167">Categoria</span><span class="sxs-lookup"><span data-stu-id="e8a60-167">Category</span></span> | <span data-ttu-id="e8a60-168">*AuditEvent*</span><span class="sxs-lookup"><span data-stu-id="e8a60-168">*AuditEvent*</span></span> |
| <span data-ttu-id="e8a60-169">CorrelationId</span><span class="sxs-lookup"><span data-stu-id="e8a60-169">CorrelationId</span></span> |<span data-ttu-id="e8a60-170">GUID facoltativo che il client può passare per correlare i log sul lato client con quelli sul lato servizio (insieme di credenziali delle chiavi).</span><span class="sxs-lookup"><span data-stu-id="e8a60-170">An optional GUID that the client can pass to correlate client-side logs with service-side (Key Vault) logs.</span></span> |
| <span data-ttu-id="e8a60-171">DurationMs</span><span class="sxs-lookup"><span data-stu-id="e8a60-171">DurationMs</span></span> |<span data-ttu-id="e8a60-172">Tempo impiegato per soddisfare la richiesta API REST, in millisecondi.</span><span class="sxs-lookup"><span data-stu-id="e8a60-172">Time it took to service the REST API request, in milliseconds.</span></span> <span data-ttu-id="e8a60-173">Il tempo non include la latenza di rete, quindi il tempo misurato sul lato client potrebbe non corrispondere a questo valore.</span><span class="sxs-lookup"><span data-stu-id="e8a60-173">This time does not include network latency, so the time that you measure on the client side might not match this time.</span></span> |
| <span data-ttu-id="e8a60-174">httpStatusCode_d</span><span class="sxs-lookup"><span data-stu-id="e8a60-174">httpStatusCode_d</span></span> |<span data-ttu-id="e8a60-175">Codice di stato HTTP restituito dalla richiesta (ad esempio *200*)</span><span class="sxs-lookup"><span data-stu-id="e8a60-175">HTTP status code returned by the request (for example, *200*)</span></span> |
| <span data-ttu-id="e8a60-176">id_s</span><span class="sxs-lookup"><span data-stu-id="e8a60-176">id_s</span></span> |<span data-ttu-id="e8a60-177">ID univoco della richiesta</span><span class="sxs-lookup"><span data-stu-id="e8a60-177">Unique ID of the request</span></span> |
| <span data-ttu-id="e8a60-178">identity_claim_appid_g</span><span class="sxs-lookup"><span data-stu-id="e8a60-178">identity_claim_appid_g</span></span> | <span data-ttu-id="e8a60-179">GUID per l'ID applicazione</span><span class="sxs-lookup"><span data-stu-id="e8a60-179">GUID for the application id</span></span> |
| <span data-ttu-id="e8a60-180">OperationName</span><span class="sxs-lookup"><span data-stu-id="e8a60-180">OperationName</span></span> |<span data-ttu-id="e8a60-181">Nome dell'operazione, come illustrato in [Registrazione dell'Insieme di credenziali delle chiavi di Azure](../key-vault/key-vault-logging.md)</span><span class="sxs-lookup"><span data-stu-id="e8a60-181">Name of the operation, as documented in [Azure Key Vault Logging](../key-vault/key-vault-logging.md)</span></span> |
| <span data-ttu-id="e8a60-182">OperationVersion</span><span class="sxs-lookup"><span data-stu-id="e8a60-182">OperationVersion</span></span> |<span data-ttu-id="e8a60-183">Versione dell'API REST richiesta dal client (ad esempio *2015-06-01*)</span><span class="sxs-lookup"><span data-stu-id="e8a60-183">REST API version requested by the client (for example *2015-06-01*)</span></span> |
| <span data-ttu-id="e8a60-184">requestUri_s</span><span class="sxs-lookup"><span data-stu-id="e8a60-184">requestUri_s</span></span> |<span data-ttu-id="e8a60-185">URI della richiesta</span><span class="sxs-lookup"><span data-stu-id="e8a60-185">Uri of the request</span></span> |
| <span data-ttu-id="e8a60-186">Risorsa</span><span class="sxs-lookup"><span data-stu-id="e8a60-186">Resource</span></span> |<span data-ttu-id="e8a60-187">Nome dell'insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="e8a60-187">Name of the key vault</span></span> |
| <span data-ttu-id="e8a60-188">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="e8a60-188">ResourceGroup</span></span> |<span data-ttu-id="e8a60-189">Gruppo di risorse dell'insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="e8a60-189">Resource group of the key vault</span></span> |
| <span data-ttu-id="e8a60-190">ResourceId</span><span class="sxs-lookup"><span data-stu-id="e8a60-190">ResourceId</span></span> |<span data-ttu-id="e8a60-191">ID della risorsa Gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="e8a60-191">Azure Resource Manager Resource ID.</span></span> <span data-ttu-id="e8a60-192">Per i log di Key Vault, questo è l'ID della risorsa Key Vault.</span><span class="sxs-lookup"><span data-stu-id="e8a60-192">For Key Vault logs, this is the Key Vault resource ID.</span></span> |
| <span data-ttu-id="e8a60-193">ResourceProvider</span><span class="sxs-lookup"><span data-stu-id="e8a60-193">ResourceProvider</span></span> |<span data-ttu-id="e8a60-194">*MICROSOFT.KEYVAULT*</span><span class="sxs-lookup"><span data-stu-id="e8a60-194">*MICROSOFT.KEYVAULT*</span></span> |
| <span data-ttu-id="e8a60-195">ResourceType</span><span class="sxs-lookup"><span data-stu-id="e8a60-195">ResourceType</span></span> | <span data-ttu-id="e8a60-196">*VAULTS*</span><span class="sxs-lookup"><span data-stu-id="e8a60-196">*VAULTS*</span></span> |
| <span data-ttu-id="e8a60-197">ResultSignature</span><span class="sxs-lookup"><span data-stu-id="e8a60-197">ResultSignature</span></span> |<span data-ttu-id="e8a60-198">Stato HTTP (ad esempio *OK*)</span><span class="sxs-lookup"><span data-stu-id="e8a60-198">HTTP status (for example, *OK*)</span></span> |
| <span data-ttu-id="e8a60-199">ResultType</span><span class="sxs-lookup"><span data-stu-id="e8a60-199">ResultType</span></span> |<span data-ttu-id="e8a60-200">Risultato della richiesta dell'API REST (ad esempio *Operazione completata*)</span><span class="sxs-lookup"><span data-stu-id="e8a60-200">Result of REST API request (for example, *Success*)</span></span> |
| <span data-ttu-id="e8a60-201">SubscriptionId</span><span class="sxs-lookup"><span data-stu-id="e8a60-201">SubscriptionId</span></span> |<span data-ttu-id="e8a60-202">ID sottoscrizione di Azure della sottoscrizione che include l'insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="e8a60-202">Azure subscription ID of the subscription containing the Key Vault</span></span> |

## <a name="migrating-from-the-old-key-vault-solution"></a><span data-ttu-id="e8a60-203">Migrazione dalla soluzione Key Vault precedente</span><span class="sxs-lookup"><span data-stu-id="e8a60-203">Migrating from the old Key Vault solution</span></span>
<span data-ttu-id="e8a60-204">Nel gennaio 2017, il metodo supportato per l'invio dei log da Key Vault a Log Analytics è cambiato.</span><span class="sxs-lookup"><span data-stu-id="e8a60-204">In January 2017, the supported way of sending logs from Key Vault to Log Analytics changed.</span></span> <span data-ttu-id="e8a60-205">In questo modo si otterranno i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="e8a60-205">These changes provide the following advantages:</span></span>
+ <span data-ttu-id="e8a60-206">I log vengono scritti direttamente in Log Analytics senza la necessità di utilizzare un account di archiviazione</span><span class="sxs-lookup"><span data-stu-id="e8a60-206">Logs are written directly to Log Analytics without the need to use a storage account</span></span>
+ <span data-ttu-id="e8a60-207">Minore latenza dal momento in cui i log vengono generati essendo immediatamente disponibili in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="e8a60-207">Less latency from the time when logs are generated to them being available in Log Analytics</span></span>
+ <span data-ttu-id="e8a60-208">Meno passaggi di configurazione</span><span class="sxs-lookup"><span data-stu-id="e8a60-208">Fewer configuration steps</span></span>
+ <span data-ttu-id="e8a60-209">Un formato comune per tutti i tipi di diagnostica di Azure</span><span class="sxs-lookup"><span data-stu-id="e8a60-209">A common format for all types of Azure diagnostics</span></span>

<span data-ttu-id="e8a60-210">Per utilizzare la soluzione aggiornata:</span><span class="sxs-lookup"><span data-stu-id="e8a60-210">To use the updated solution:</span></span>

1. [<span data-ttu-id="e8a60-211">Configurare la diagnostica in modo che venga inviata direttamente a Log Analytics da Key Vault</span><span class="sxs-lookup"><span data-stu-id="e8a60-211">Configure diagnostics to be sent directly to Log Analytics from Key Vault</span></span>](#enable-key-vault-diagnostics-in-the-portal)  
2. <span data-ttu-id="e8a60-212">Abilitare la soluzione Azure Key Vault seguendo la procedura illustrata in [Aggiungere soluzioni di Log Analytics dalla Raccolta soluzioni](log-analytics-add-solutions.md)</span><span class="sxs-lookup"><span data-stu-id="e8a60-212">Enable the Azure Key Vault solution by using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md)</span></span>
3. <span data-ttu-id="e8a60-213">Aggiornare tutte le query salvate, i dashboard o gli avvisi per utilizzare il nuovo tipo di dati</span><span class="sxs-lookup"><span data-stu-id="e8a60-213">Update any saved queries, dashboards, or alerts to use the new data type</span></span>
  + <span data-ttu-id="e8a60-214">Il tipo è cambiato da KeyVaults a AzureDiagnostics.</span><span class="sxs-lookup"><span data-stu-id="e8a60-214">Type is change from: KeyVaults to AzureDiagnostics.</span></span> <span data-ttu-id="e8a60-215">È possibile utilizzare ResourceType per filtrare i log di Key Vault.</span><span class="sxs-lookup"><span data-stu-id="e8a60-215">You can use the ResourceType to filter to Key Vault Logs.</span></span>
  - <span data-ttu-id="e8a60-216">Invece di: `Type=KeyVaults`, utilizzare i campi `Type=AzureDiagnostics ResourceType=VAULTS`:</span><span class="sxs-lookup"><span data-stu-id="e8a60-216">Instead of: `Type=KeyVaults`, use `Type=AzureDiagnostics ResourceType=VAULTS`</span></span>
  + <span data-ttu-id="e8a60-217">I nomi dei campi distinguono tra maiuscole e minuscole</span><span class="sxs-lookup"><span data-stu-id="e8a60-217">Fields: (Field names are case-sensitive)</span></span>
  - <span data-ttu-id="e8a60-218">Per ogni campo con suffisso \_s, \_d o \_g nel nome, modificare il primo carattere in lettere minuscole</span><span class="sxs-lookup"><span data-stu-id="e8a60-218">For any field that has a suffix of \_s, \_d, or \_g in the name, change the first character to lower case</span></span>
  - <span data-ttu-id="e8a60-219">Per ogni campo con suffisso \_o nel nome, i dati sono suddivisi in singoli campi in base ai nomi dei campi nidificati.</span><span class="sxs-lookup"><span data-stu-id="e8a60-219">For any field that has a suffix of \_o in name, the data is split into individual fields based on the nested field names.</span></span> <span data-ttu-id="e8a60-220">Ad esempio, il nome UPN del chiamante viene archiviato in un campo `identity_claim_http_schemas_xmlsoap_org_ws_2005_05_identity_claims_upn_s`</span><span class="sxs-lookup"><span data-stu-id="e8a60-220">For example, the UPN of the caller is stored in a field `identity_claim_http_schemas_xmlsoap_org_ws_2005_05_identity_claims_upn_s`</span></span>
   - <span data-ttu-id="e8a60-221">Il campo CallerIpAddress viene modificato in CallerIPAddress</span><span class="sxs-lookup"><span data-stu-id="e8a60-221">Field CallerIpAddress changed to CallerIPAddress</span></span>
   - <span data-ttu-id="e8a60-222">Il campo RemoteIPCountry non è più presente</span><span class="sxs-lookup"><span data-stu-id="e8a60-222">Field RemoteIPCountry is no longer present</span></span>
4. <span data-ttu-id="e8a60-223">Rimuovere la soluzione *Key Vault Analytics (obsoleta)*.</span><span class="sxs-lookup"><span data-stu-id="e8a60-223">Remove the *Key Vault Analytics (Deprecated)* solution.</span></span> <span data-ttu-id="e8a60-224">Se si utilizza PowerShell, usare `Set-AzureOperationalInsightsIntelligencePack -ResourceGroupName <resource group that the workspace is in> -WorkspaceName <name of the log analytics workspace> -IntelligencePackName "KeyVault" -Enabled $false`</span><span class="sxs-lookup"><span data-stu-id="e8a60-224">If you are using PowerShell, use `Set-AzureOperationalInsightsIntelligencePack -ResourceGroupName <resource group that the workspace is in> -WorkspaceName <name of the log analytics workspace> -IntelligencePackName "KeyVault" -Enabled $false`</span></span>

<span data-ttu-id="e8a60-225">I dati raccolti prima della modifica non sono visibili nella nuova soluzione.</span><span class="sxs-lookup"><span data-stu-id="e8a60-225">Data collected before the change is not visible in the new solution.</span></span> <span data-ttu-id="e8a60-226">È possibile continuare a eseguire query per questi dati utilizzando i nomi di campo e il tipo vecchi.</span><span class="sxs-lookup"><span data-stu-id="e8a60-226">You can continue to query for this data using the old Type and field names.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="e8a60-227">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="e8a60-227">Troubleshooting</span></span>
[!INCLUDE [log-analytics-troubleshoot-azure-diagnostics](../../includes/log-analytics-troubleshoot-azure-diagnostics.md)]

## <a name="next-steps"></a><span data-ttu-id="e8a60-228">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="e8a60-228">Next steps</span></span>
* <span data-ttu-id="e8a60-229">Usare le [Ricerche nei log in Log Analytics](log-analytics-log-searches.md) per visualizzare i dati dettagliati per l'Insieme di credenziali delle chiavi di Azure.</span><span class="sxs-lookup"><span data-stu-id="e8a60-229">Use [Log searches in Log Analytics](log-analytics-log-searches.md) to view detailed Azure Key Vault data.</span></span>
