---
title: Procedure consigliate relative alle prestazioni per SQL Server in Azure | Microsoft Docs
description: In questo argomento vengono fornite le procedure consigliate per ottimizzare le prestazioni di SQL Server in Macchine virtuali di Microsoft Azure.
services: virtual-machines-windows
documentationcenter: na
author: rothja
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: a0c85092-2113-4982-b73a-4e80160bac36
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 06/27/2017
ms.author: jroth
ms.openlocfilehash: 5595ea016ab01d20cee82b75f56623bb0727a1b3
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="performance-best-practices-for-sql-server-in-azure-virtual-machines"></a><span data-ttu-id="d2c48-103">Procedure consigliate per le prestazioni per SQL Server in Macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="d2c48-103">Performance best practices for SQL Server in Azure Virtual Machines</span></span>

## <a name="overview"></a><span data-ttu-id="d2c48-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="d2c48-104">Overview</span></span>

<span data-ttu-id="d2c48-105">Questo argomento illustra le procedure consigliate per ottimizzare le prestazioni di SQL Server in Macchine virtuali di Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d2c48-105">This topic provides best practices for optimizing SQL Server performance in Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="d2c48-106">Durante l'esecuzione di SQL Server in Macchine virtuali di Azure, è consigliabile continuare a usare le stesse opzioni di ottimizzazione delle prestazioni dei database applicabili a SQL Server nell'ambiente server locale.</span><span class="sxs-lookup"><span data-stu-id="d2c48-106">While running SQL Server in Azure Virtual Machines, we recommend that you continue using the same database performance tuning options that are applicable to SQL Server in on-premises server environment.</span></span> <span data-ttu-id="d2c48-107">Tuttavia, le prestazioni di un database relazionale in un cloud pubblico dipendono da molti fattori, ad esempio dalle dimensioni della macchina virtuale e dalla configurazione dei dischi dati.</span><span class="sxs-lookup"><span data-stu-id="d2c48-107">However, the performance of a relational database in a public cloud depends on many factors such as the size of a virtual machine, and the configuration of the data disks.</span></span>

<span data-ttu-id="d2c48-108">Durante la creazione di immagini di SQL Server, [è possibile eseguire il provisioning delle VM nel portale di Azure](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="d2c48-108">When creating SQL Server images, [consider provisioning your VMs in the Azure portal](virtual-machines-windows-portal-sql-server-provision.md).</span></span> <span data-ttu-id="d2c48-109">Tutte queste procedure consigliate, tra cui la configurazione dell'archiviazione, vengono implementate in VM di SQL Server di cui è stato eseguito il provisioning nel portale con Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d2c48-109">SQL Server VMs provisioned in the Portal with Resource Manager implement all these best practices, including the storage configuration.</span></span>

<span data-ttu-id="d2c48-110">Questo articolo riporta informazioni su come ottenere le *migliori* prestazioni per SQL Server nelle VM Azure.</span><span class="sxs-lookup"><span data-stu-id="d2c48-110">This article is focused on getting the *best* performance for SQL Server on Azure VMs.</span></span> <span data-ttu-id="d2c48-111">Se il carico di lavoro è contenuto, potrebbero non essere necessarie tutte le ottimizzazione elencate di seguito.</span><span class="sxs-lookup"><span data-stu-id="d2c48-111">If your workload is less demanding, you might not require every optimization listed below.</span></span> <span data-ttu-id="d2c48-112">Prendere in considerazione le esigenze di prestazioni e i modelli di carico di lavoro durante la valutazione di queste indicazioni.</span><span class="sxs-lookup"><span data-stu-id="d2c48-112">Consider your performance needs and workload patterns as you evaluate these recommendations.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="quick-check-list"></a><span data-ttu-id="d2c48-113">Elenco di controllo rapido</span><span class="sxs-lookup"><span data-stu-id="d2c48-113">Quick check list</span></span>

<span data-ttu-id="d2c48-114">Di seguito è riportato un elenco controllo rapido per ottimizzare le prestazioni di SQL Server in Macchine virtuali di Azure:</span><span class="sxs-lookup"><span data-stu-id="d2c48-114">The following is a quick check list for optimal performance of SQL Server on Azure Virtual Machines:</span></span>

| <span data-ttu-id="d2c48-115">Area</span><span class="sxs-lookup"><span data-stu-id="d2c48-115">Area</span></span> | <span data-ttu-id="d2c48-116">Ottimizzazioni</span><span class="sxs-lookup"><span data-stu-id="d2c48-116">Optimizations</span></span> |
| --- | --- |
| [<span data-ttu-id="d2c48-117">Dimensioni macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="d2c48-117">VM size</span></span>](#vm-size-guidance) |<span data-ttu-id="d2c48-118">[DS3](../../virtual-machines-windows-sizes-memory.md) o superiore per SQL Enterprise.</span><span class="sxs-lookup"><span data-stu-id="d2c48-118">[DS3](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Enterprise edition.</span></span><br/><br/><span data-ttu-id="d2c48-119">[DS2](../../virtual-machines-windows-sizes-memory.md) o superiore per SQL Standard Edition e Web Edition.</span><span class="sxs-lookup"><span data-stu-id="d2c48-119">[DS2](../../virtual-machines-windows-sizes-memory.md) or higher for SQL Standard and Web editions.</span></span> |
| [<span data-ttu-id="d2c48-120">Archiviazione</span><span class="sxs-lookup"><span data-stu-id="d2c48-120">Storage</span></span>](#storage-guidance) |<span data-ttu-id="d2c48-121">Usare [Archiviazione Premium](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="d2c48-121">Use [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="d2c48-122">Archiviazione Standard è consigliata solo per i carichi di lavoro di sviluppo/test.</span><span class="sxs-lookup"><span data-stu-id="d2c48-122">Standard storage is only recommended for dev/test.</span></span><br/><br/><span data-ttu-id="d2c48-123">Mantenere l'[account di archiviazione](../../../storage/common/storage-create-storage-account.md) e la macchina virtuale di SQL Server nella stessa area.</span><span class="sxs-lookup"><span data-stu-id="d2c48-123">Keep the [storage account](../../../storage/common/storage-create-storage-account.md) and SQL Server VM in the same region.</span></span><br/><br/><span data-ttu-id="d2c48-124">Disabilitare l' [archiviazione con ridondanza geografica](../../../storage/common/storage-redundancy.md) (replica geografica) di Azure nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d2c48-124">Disable Azure [geo-redundant storage](../../../storage/common/storage-redundancy.md) (geo-replication) on the storage account.</span></span> |
| [<span data-ttu-id="d2c48-125">Dischi</span><span class="sxs-lookup"><span data-stu-id="d2c48-125">Disks</span></span>](#disks-guidance) |<span data-ttu-id="d2c48-126">Usare almeno 2 [dischi P30](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 per i file di log, 1 per i file di dati e TempDB).</span><span class="sxs-lookup"><span data-stu-id="d2c48-126">Use a minimum of 2 [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) (1 for log files; 1 for data files and TempDB).</span></span><br/><br/><span data-ttu-id="d2c48-127">Evitare l'uso del sistema operativo o di dischi temporanei per la registrazione o l'archiviazione di database.</span><span class="sxs-lookup"><span data-stu-id="d2c48-127">Avoid using operating system or temporary disks for database storage or logging.</span></span><br/><br/><span data-ttu-id="d2c48-128">Abilitare la lettura della cache sui dischi che ospitano i file di dati e TempDB.</span><span class="sxs-lookup"><span data-stu-id="d2c48-128">Enable read caching on the disk(s) hosting the data files and TempDB.</span></span><br/><br/><span data-ttu-id="d2c48-129">Non abilitare la memorizzazione nella cache sui dischi che ospitano il file di log.</span><span class="sxs-lookup"><span data-stu-id="d2c48-129">Do not enable caching on disk(s) hosting the log file.</span></span><br/><br/><span data-ttu-id="d2c48-130">Importante: arrestare SQL Server quando si modificano le impostazioni della cache per un disco di una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="d2c48-130">Important: Stop the SQL Server service when changing the cache settings for an Azure VM disk.</span></span><br/><br/><span data-ttu-id="d2c48-131">Eseguire lo striping di più dischi dati di Azure per ottenere una maggiore velocità effettiva I/O.</span><span class="sxs-lookup"><span data-stu-id="d2c48-131">Stripe multiple Azure data disks to get increased IO throughput.</span></span><br/><br/><span data-ttu-id="d2c48-132">Formattare con dimensioni di allocazione documentate.</span><span class="sxs-lookup"><span data-stu-id="d2c48-132">Format with documented allocation sizes.</span></span> |
| [<span data-ttu-id="d2c48-133">I/O</span><span class="sxs-lookup"><span data-stu-id="d2c48-133">I/O</span></span>](#io-guidance) |<span data-ttu-id="d2c48-134">Abilitare la compressione di pagina di database.</span><span class="sxs-lookup"><span data-stu-id="d2c48-134">Enable database page compression.</span></span><br/><br/><span data-ttu-id="d2c48-135">Abilitare l'inizializzazione immediata dei file per i file di dati.</span><span class="sxs-lookup"><span data-stu-id="d2c48-135">Enable instant file initialization for data files.</span></span><br/><br/><span data-ttu-id="d2c48-136">Limitare o disabilitare l'aumento automatico delle dimensioni per il database.</span><span class="sxs-lookup"><span data-stu-id="d2c48-136">Limit or disable autogrow on the database.</span></span><br/><br/><span data-ttu-id="d2c48-137">Disabilitare la compattazione automatica per il database.</span><span class="sxs-lookup"><span data-stu-id="d2c48-137">Disable autoshrink on the database.</span></span><br/><br/><span data-ttu-id="d2c48-138">Spostare tutti i database su dischi dati, inclusi i database di sistema.</span><span class="sxs-lookup"><span data-stu-id="d2c48-138">Move all databases to data disks, including system databases.</span></span><br/><br/><span data-ttu-id="d2c48-139">Spostare le directory dei file di traccia e dei log degli errori di SQL Server sui dischi dati.</span><span class="sxs-lookup"><span data-stu-id="d2c48-139">Move SQL Server error log and trace file directories to data disks.</span></span><br/><br/><span data-ttu-id="d2c48-140">Configurare il percorso predefinito del file di backup e del file di database.</span><span class="sxs-lookup"><span data-stu-id="d2c48-140">Setup default backup and database file locations.</span></span><br/><br/><span data-ttu-id="d2c48-141">Abilitare le pagine bloccate.</span><span class="sxs-lookup"><span data-stu-id="d2c48-141">Enable locked pages.</span></span><br/><br/><span data-ttu-id="d2c48-142">Applicare le correzioni delle prestazioni di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d2c48-142">Apply SQL Server performance fixes.</span></span> |
| [<span data-ttu-id="d2c48-143">Specifiche della funzione</span><span class="sxs-lookup"><span data-stu-id="d2c48-143">Feature specific</span></span>](#feature-specific-guidance) |<span data-ttu-id="d2c48-144">Eseguire il backup direttamente nell'archivio BLOB.</span><span class="sxs-lookup"><span data-stu-id="d2c48-144">Back up directly to blob storage.</span></span> |

<span data-ttu-id="d2c48-145">Per altre informazioni su *come* e *perché* eseguire queste ottimizzazioni, vedere i dettagli e le linee guida riportate nelle sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="d2c48-145">For more information on *how* and *why* to make these optimizations, please review the details and guidance provided in following sections.</span></span>

## <a name="vm-size-guidance"></a><span data-ttu-id="d2c48-146">Linee guida per le dimensioni delle VM</span><span class="sxs-lookup"><span data-stu-id="d2c48-146">VM size guidance</span></span>

<span data-ttu-id="d2c48-147">Per le applicazioni sensibili alle prestazioni, è consigliabile usare le seguenti [dimensioni per le macchine virtuali](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json):</span><span class="sxs-lookup"><span data-stu-id="d2c48-147">For performance sensitive applications, it’s recommended that you use the following [virtual machines sizes](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json):</span></span>

* <span data-ttu-id="d2c48-148">**SQL Server Enterprise Edition**: DS3 o superiore</span><span class="sxs-lookup"><span data-stu-id="d2c48-148">**SQL Server Enterprise Edition**: DS3 or higher</span></span>
* <span data-ttu-id="d2c48-149">**SQL Server Standard e Web Edition**: DS2 o superiore</span><span class="sxs-lookup"><span data-stu-id="d2c48-149">**SQL Server Standard and Web Editions**: DS2 or higher</span></span>

## <a name="storage-guidance"></a><span data-ttu-id="d2c48-150">Linee guida per l'archiviazione</span><span class="sxs-lookup"><span data-stu-id="d2c48-150">Storage guidance</span></span>

<span data-ttu-id="d2c48-151">Le VM serie DS, oltre alle serie DSv2 e GS, supportano [Archiviazione Premium](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="d2c48-151">DS-series (along with DSv2-series and GS-series) VMs support [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span> <span data-ttu-id="d2c48-152">Archiviazione Premium è l'impostazione consigliata per tutti i carichi di lavoro di produzione.</span><span class="sxs-lookup"><span data-stu-id="d2c48-152">Premium Storage is recommended for all production workloads.</span></span>

> [!WARNING]
> <span data-ttu-id="d2c48-153">Archiviazione Standard è caratterizzata da latenze e larghezze di banda variabili ed è consigliata solo per i carichi di lavoro di sviluppo e test.</span><span class="sxs-lookup"><span data-stu-id="d2c48-153">Standard Storage has varying latencies and bandwidth and is only recommended for dev/test workloads.</span></span> <span data-ttu-id="d2c48-154">Per i carichi di lavoro di produzione si consiglia di usare Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="d2c48-154">Production workloads should use Premium Storage.</span></span>

<span data-ttu-id="d2c48-155">È inoltre consigliabile creare account di archiviazione di Azure nello stesso data center delle macchine virtuali di SQL Server per ridurre i tempi di trasferimento.</span><span class="sxs-lookup"><span data-stu-id="d2c48-155">In addition, we recommend that you create your Azure storage account in the same data center as your SQL Server virtual machines to reduce transfer delays.</span></span> <span data-ttu-id="d2c48-156">Quando si crea un account di archiviazione, disabilitare la replica geografica in quanto l'ordine di scrittura coerente su più dischi non è garantito.</span><span class="sxs-lookup"><span data-stu-id="d2c48-156">When creating a storage account, disable geo-replication as consistent write order across multiple disks is not guaranteed.</span></span> <span data-ttu-id="d2c48-157">In alternativa, si consiglia di configurare una tecnologia di ripristino di emergenza di SQL Server tra due data center di Azure.</span><span class="sxs-lookup"><span data-stu-id="d2c48-157">Instead, consider configuring a SQL Server disaster recovery technology between two Azure data centers.</span></span> <span data-ttu-id="d2c48-158">Per altre informazioni, vedere [Disponibilità elevata e ripristino di emergenza per SQL Server in Macchine virtuali di Azure](virtual-machines-windows-sql-high-availability-dr.md).</span><span class="sxs-lookup"><span data-stu-id="d2c48-158">For more information, see [High Availability and Disaster Recovery for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-high-availability-dr.md).</span></span>

## <a name="disks-guidance"></a><span data-ttu-id="d2c48-159">Linee guida per i dischi</span><span class="sxs-lookup"><span data-stu-id="d2c48-159">Disks guidance</span></span>

<span data-ttu-id="d2c48-160">Esistono tre tipi di disco principali in una VM Azure:</span><span class="sxs-lookup"><span data-stu-id="d2c48-160">There are three main disk types on an Azure VM:</span></span>

* <span data-ttu-id="d2c48-161">**Disco del sistema operativo**: quando si crea una macchina virtuale Azure, la piattaforma associa almeno un disco, contrassegnato come unità **C**, alla VM per il disco del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="d2c48-161">**OS disk**: When you create an Azure Virtual Machine, the platform will attach at least one disk (labeled as the **C** drive) to the VM for your operating system disk.</span></span> <span data-ttu-id="d2c48-162">Si tratta di un disco rigido virtuale memorizzato come BLOB di pagine nell'archivio.</span><span class="sxs-lookup"><span data-stu-id="d2c48-162">This disk is a VHD stored as a page blob in storage.</span></span>
* <span data-ttu-id="d2c48-163">**Disco temporaneo**: le macchine virtuali di Azure contengono un altro disco, chiamato disco temporaneo, contrassegnato come unità **D**.</span><span class="sxs-lookup"><span data-stu-id="d2c48-163">**Temporary disk**: Azure Virtual Machines contain another disk called the temporary disk (labeled as the **D**: drive).</span></span> <span data-ttu-id="d2c48-164">Questo è un disco sul nodo che può essere usato come area scratch.</span><span class="sxs-lookup"><span data-stu-id="d2c48-164">This is a disk on the node that can be used for scratch space.</span></span>
* <span data-ttu-id="d2c48-165">**Dischi dati**: è possibile associare dischi aggiuntivi alla macchina virtuale nella forma di dischi dati, che vengono memorizzati nell'archivio come BLOB di pagine.</span><span class="sxs-lookup"><span data-stu-id="d2c48-165">**Data disks**: You can also attach additional disks to your virtual machine as data disks, and these will be stored in storage as page blobs.</span></span>

<span data-ttu-id="d2c48-166">Nelle sezioni seguenti sono riportati alcuni consigli per l'uso di questi diversi dischi.</span><span class="sxs-lookup"><span data-stu-id="d2c48-166">The following sections describe recommendations for using these different disks.</span></span>

### <a name="operating-system-disk"></a><span data-ttu-id="d2c48-167">Disco del sistema operativo</span><span class="sxs-lookup"><span data-stu-id="d2c48-167">Operating system disk</span></span>

<span data-ttu-id="d2c48-168">Per disco del sistema operativo si intende un disco rigido virtuale che è possibile avviare e montare come versione in esecuzione di un sistema operativo ed è etichettato come unità **C** .</span><span class="sxs-lookup"><span data-stu-id="d2c48-168">An operating system disk is a VHD that you can boot and mount as a running version of an operating system and is labeled as **C** drive.</span></span>

<span data-ttu-id="d2c48-169">I criteri predefiniti di caching per il disco del sistema operativo predefinito sono **Lettura/Scrittura**.</span><span class="sxs-lookup"><span data-stu-id="d2c48-169">Default caching policy on the operating system disk is **Read/Write**.</span></span> <span data-ttu-id="d2c48-170">Per le applicazioni sensibili alle prestazioni, è consigliabile usare dischi dati anziché il disco del sistema operativo.</span><span class="sxs-lookup"><span data-stu-id="d2c48-170">For performance sensitive applications, we recommend that you use data disks instead of the operating system disk.</span></span> <span data-ttu-id="d2c48-171">Vedere la sezione relativa ai dischi di dati riportata di seguito.</span><span class="sxs-lookup"><span data-stu-id="d2c48-171">See the section on Data Disks below.</span></span>

### <a name="temporary-disk"></a><span data-ttu-id="d2c48-172">Disco temporaneo</span><span class="sxs-lookup"><span data-stu-id="d2c48-172">Temporary disk</span></span>

<span data-ttu-id="d2c48-173">L'unità di archiviazione temporanea, etichettata come unità **D**:, non è persistente nell'archiviazione BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="d2c48-173">The temporary storage drive, labeled as the **D**: drive, is not persisted to Azure blob storage.</span></span> <span data-ttu-id="d2c48-174">Non archiviare i file del database utente o i file di log delle transazioni utente nell'unità **D**.</span><span class="sxs-lookup"><span data-stu-id="d2c48-174">Do not store your user database files or user transaction log files on the **D**: drive.</span></span>

<span data-ttu-id="d2c48-175">Per le VM serie D, Dv2 e G, l'unità temporanea è basata su SSD.</span><span class="sxs-lookup"><span data-stu-id="d2c48-175">For D-series, Dv2-series, and G-series VMs, the temporary drive on these VMs is SSD-based.</span></span> <span data-ttu-id="d2c48-176">Se il carico di lavoro usa TempDB in modo intensivo, ad esempio per gli oggetti temporanei o join complessi, l'archiviazione di TempDB nell'unità **D** potrebbe comportare una maggiore velocità effettiva e una minore latenza di TempDB.</span><span class="sxs-lookup"><span data-stu-id="d2c48-176">If your workload makes heavy use of TempDB (e.g. for temporary objects or complex joins), storing TempDB on the **D** drive could result in higher TempDB throughput and lower TempDB latency.</span></span>

<span data-ttu-id="d2c48-177">Per le macchine virtuali che supportano Archiviazione Premium (serie DS, DSv2 e GS), si consiglia di archiviare TempDB su un disco che supporta Archiviazione Premium con il caching di lettura attivato.</span><span class="sxs-lookup"><span data-stu-id="d2c48-177">For VMs that support Premium Storage (DS-series, DSv2-series, and GS-series), we recommend storing TempDB on a disk that supports Premium Storage with read caching enabled.</span></span> <span data-ttu-id="d2c48-178">Esiste un'eccezione a questo consiglio: se TempDB è soggetto a uso intenso in scrittura, è possibile migliorare le prestazioni archiviando TempDB nell'unità locale **D** , che in macchine di queste dimensioni è anche basata su SSD.</span><span class="sxs-lookup"><span data-stu-id="d2c48-178">There is one exception to this recommendation; if your TempDB usage is write-intensive, you can achieve higher performance by storing TempDB on the local **D** drive, which is also SSD-based on these machine sizes.</span></span>

### <a name="data-disks"></a><span data-ttu-id="d2c48-179">Dischi dati</span><span class="sxs-lookup"><span data-stu-id="d2c48-179">Data disks</span></span>

* <span data-ttu-id="d2c48-180">**Usare i dischi dati per i file di dati e di log**: come minimo, usare 2 [dischi P30](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) con Archiviazione Premium di cui uno contenente i file di log e l'altro contenente i file di dati e TempDB.</span><span class="sxs-lookup"><span data-stu-id="d2c48-180">**Use data disks for data and log files**: At a minimum, use 2 Premium Storage [P30 disks](../../../storage/common/storage-premium-storage.md#scalability-and-performance-targets) where one disk contains the log file(s) and the other contains the data and TempDB file(s).</span></span> <span data-ttu-id="d2c48-181">Ogni disco di Archiviazione Premium dispone di un numero di IOPs e larghezza di banda (MB/s) a seconda delle dimensioni, come descritto nell'articolo seguente: [Uso di Archiviazione Premium per dischi](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="d2c48-181">Each Premium Storage disk provides a number of IOPs and bandwidth (MB/s) depending on its size, as described in the following article: [Using Premium Storage for Disks](../../../storage/common/storage-premium-storage.md).</span></span>

* <span data-ttu-id="d2c48-182">**Striping del disco**: per una maggiore velocità effettiva, è possibile aggiungere ulteriori dischi dati e usare lo striping del disco.</span><span class="sxs-lookup"><span data-stu-id="d2c48-182">**Disk Striping**: For more throughput, you can add additional data disks and use Disk Striping.</span></span> <span data-ttu-id="d2c48-183">Per determinare il numero di dischi dati, è necessario analizzare il numero di IOPS e larghezza di banda necessari per i file di log e i file di dati e TempDB.</span><span class="sxs-lookup"><span data-stu-id="d2c48-183">To determine the number of data disks, you need to analyze the number of IOPS and bandwidth required for your log file(s), and for your data and TempDB file(s).</span></span> <span data-ttu-id="d2c48-184">Si noti che a seconda delle dimensioni delle VM i limiti nel numero di IOPs e larghezza di banda supportati cambiano. Vedere le tabelle relative agli IOPS per [dimensione di VM](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="d2c48-184">Notice that different VM sizes have different limits on the number of IOPs and bandwidth supported, see the tables on IOPS per [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="d2c48-185">Usare le linee guida seguenti:</span><span class="sxs-lookup"><span data-stu-id="d2c48-185">Use the following guidelines:</span></span>

  * <span data-ttu-id="d2c48-186">Per Windows 8 e Windows Server 2012 o versioni successive, usare [Spazi di archiviazione](https://technet.microsoft.com/library/hh831739.aspx) applicando le indicazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="d2c48-186">For Windows 8/Windows Server 2012 or later, use [Storage Spaces](https://technet.microsoft.com/library/hh831739.aspx) with the following guidelines:</span></span>

      1. <span data-ttu-id="d2c48-187">Impostare l'interleave (dimensione di striping) su 64 KB (65536 byte) per carichi di lavoro OLTP e su 256 KB (262144 KB) per carichi di lavoro di data warehouse, in modo da evitare effetti sulle prestazioni a causa del mancato allineamento delle partizioni.</span><span class="sxs-lookup"><span data-stu-id="d2c48-187">Set the interleave (stripe size) to 64 KB (65536 bytes) for OLTP workloads and 256 KB (262144 bytes) for data warehousing workloads to avoid performance impact due to partition misalignment.</span></span> <span data-ttu-id="d2c48-188">Questo valore deve essere impostato con PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d2c48-188">This must be set with PowerShell.</span></span>
      1. <span data-ttu-id="d2c48-189">Impostare il numero di colonne sul numero di dischi fisici.</span><span class="sxs-lookup"><span data-stu-id="d2c48-189">Set column count = number of physical disks.</span></span> <span data-ttu-id="d2c48-190">Usare PowerShell (e non l'interfaccia utente di Server Manager) per configurare più di 8 dischi.</span><span class="sxs-lookup"><span data-stu-id="d2c48-190">Use PowerShell when configuring more than 8 disks (not Server Manager UI).</span></span> 

    <span data-ttu-id="d2c48-191">Ad esempio, lo script di PowerShell seguente crea un nuovo pool di archiviazione con la dimensione di interleave impostata su 64 KB e il numero di colonne impostato su 2:</span><span class="sxs-lookup"><span data-stu-id="d2c48-191">For example, the following PowerShell creates a new storage pool with the interleave size to 64 KB and the number of columns to 2:</span></span>

    ```powershell
    $PoolCount = Get-PhysicalDisk -CanPool $True
    $PhysicalDisks = Get-PhysicalDisk | Where-Object {$_.FriendlyName -like "*2" -or $_.FriendlyName -like "*3"}

    New-StoragePool -FriendlyName "DataFiles" -StorageSubsystemFriendlyName "Storage Spaces*" -PhysicalDisks $PhysicalDisks | New-VirtualDisk -FriendlyName "DataFiles" -Interleave 65536 -NumberOfColumns 2 -ResiliencySettingName simple –UseMaximumSize |Initialize-Disk -PartitionStyle GPT -PassThru |New-Partition -AssignDriveLetter -UseMaximumSize |Format-Volume -FileSystem NTFS -NewFileSystemLabel "DataDisks" -AllocationUnitSize 65536 -Confirm:$false 
    ```

  * <span data-ttu-id="d2c48-192">Per Windows 2008 R2 o versioni precedenti, è possibile usare i dischi dinamici (volumi con striping del sistema operativo) e la dimensione di striping è sempre di 64 KB.</span><span class="sxs-lookup"><span data-stu-id="d2c48-192">For Windows 2008 R2 or earlier, you can use dynamic disks (OS striped volumes) and the stripe size is always 64 KB.</span></span> <span data-ttu-id="d2c48-193">Si noti che questa opzione è deprecata a partire da Windows 8 e Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="d2c48-193">Note that this option is deprecated as of Windows 8/Windows Server 2012.</span></span> <span data-ttu-id="d2c48-194">Per informazioni, vedere l'informativa di supporto relativa al [passaggio dal servizio dischi virtuali all'API di gestione archiviazione di Windows](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2c48-194">For information, see the support statement at [Virtual Disk Service is transitioning to Windows Storage Management API](https://msdn.microsoft.com/library/windows/desktop/hh848071.aspx).</span></span>

  * <span data-ttu-id="d2c48-195">Se il carico di lavoro non usa in modo intensivo i log e non sono necessarie operazioni di input/output al secondo dedicate, è possibile configurare un solo pool di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="d2c48-195">If your workload is not log intensive and does not need dedicated IOPs, you can configure just one storage pool.</span></span> <span data-ttu-id="d2c48-196">In caso contrario, creare due pool di archiviazione, uno per i file di log e un altro pool di archiviazione per il file di dati e TempDB.</span><span class="sxs-lookup"><span data-stu-id="d2c48-196">Otherwise, create two storage pools, one for the log file(s) and another storage pool for the data file(s) and TempDB.</span></span> <span data-ttu-id="d2c48-197">Determinare il numero di dischi associati a ogni pool di archiviazione in base alle aspettative di carico.</span><span class="sxs-lookup"><span data-stu-id="d2c48-197">Determine the number of disks associated with each storage pool based on your load expectations.</span></span> <span data-ttu-id="d2c48-198">Tenere presente che le diverse dimensioni di macchine virtuali consentono diversi numeri di dischi dati associati.</span><span class="sxs-lookup"><span data-stu-id="d2c48-198">Keep in mind that different VM sizes allow different numbers of attached data disks.</span></span> <span data-ttu-id="d2c48-199">Per altre informazioni, vedere [Dimensioni delle macchine virtuali in Azure](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="d2c48-199">For more information, see [Sizes for Virtual Machines](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

  * <span data-ttu-id="d2c48-200">Se non si usa Archiviazione Premium (scenari di sviluppo e test), è consigliabile aggiungere il numero massimo di dischi dati supportato dalle [dimensioni della VM](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) e usare lo striping del disco.</span><span class="sxs-lookup"><span data-stu-id="d2c48-200">If you are not using Premium Storage (dev/test scenarios), the recommendation is to add the maximum number of data disks supported by your [VM size](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) and use Disk Striping.</span></span>

* <span data-ttu-id="d2c48-201">**Criteri di caching**: per i dischi dati con Archiviazione Premium, attivare il caching di lettura solo sui dischi dati che ospitano i file di dati e TempDB.</span><span class="sxs-lookup"><span data-stu-id="d2c48-201">**Caching policy**: For Premium Storage data disks, enable read caching on the data disks hosting your data files and TempDB only.</span></span> <span data-ttu-id="d2c48-202">Se non si usa Archiviazione Premium, non abilitare la memorizzazione nella cache per i dischi dati.</span><span class="sxs-lookup"><span data-stu-id="d2c48-202">If you are not using Premium Storage, do not enable any caching on any data disks.</span></span> <span data-ttu-id="d2c48-203">Per istruzioni sulla configurazione del caching su disco, vedere gli argomenti seguenti: [Set-AzureOSDisk](https://msdn.microsoft.com/library/azure/jj152847) e [Set-AzureDataDisk](https://msdn.microsoft.com/library/azure/jj152851.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2c48-203">For instructions on configuring disk caching, see the following topics: [Set-AzureOSDisk](https://msdn.microsoft.com/library/azure/jj152847) and [Set-AzureDataDisk](https://msdn.microsoft.com/library/azure/jj152851.aspx).</span></span>

  > [!WARNING]
  > <span data-ttu-id="d2c48-204">Arrestare il servizio SQL Server quando si modifica l'impostazione della cache dei dischi della VM di Azure per evitare danneggiamenti al database.</span><span class="sxs-lookup"><span data-stu-id="d2c48-204">Stop the SQL Server service when changing the cache setting of Azure VM disks to avoid the possibility of any database corruption.</span></span>

* <span data-ttu-id="d2c48-205">**Dimensioni unità di allocazione NTFS**: quando si formatta il disco dati, è consigliabile usare una dimensione di unità di allocazione di 64 KB per file di log e dati, nonché per TempDB.</span><span class="sxs-lookup"><span data-stu-id="d2c48-205">**NTFS allocation unit size**: When formatting the data disk, it is recommended that you use a 64-KB allocation unit size for data and log files as well as TempDB.</span></span>

* <span data-ttu-id="d2c48-206">**Procedure consigliate per la gestione del disco**: quando si rimuove un disco dati o si modifica il relativo tipo di cache, arrestare il servizio SQL Server durante la modifica.</span><span class="sxs-lookup"><span data-stu-id="d2c48-206">**Disk management best practices**: When removing a data disk or changing its cache type, stop the SQL Server service during the change.</span></span> <span data-ttu-id="d2c48-207">Quando vengono modificate le impostazioni del caching sul disco del sistema operativo, Azure arresta la VM, cambia il tipo di cache e riavvia la VM.</span><span class="sxs-lookup"><span data-stu-id="d2c48-207">When the caching settings are changed on the OS disk, Azure stops the VM, changes the cache type, and restarts the VM.</span></span> <span data-ttu-id="d2c48-208">Quando vengono modificate le impostazioni della cache di un disco dati, la VM non viene arrestata, ma il disco dati viene scollegato dalla VM durante la modifica e quindi ricollegato.</span><span class="sxs-lookup"><span data-stu-id="d2c48-208">When the cache settings of a data disk are changed, the VM is not stopped, but the data disk is detached from the VM during the change and then reattached.</span></span>

  > [!WARNING]
  > <span data-ttu-id="d2c48-209">Il mancato arresto del servizio SQL Server durante queste operazioni può danneggiare il database.</span><span class="sxs-lookup"><span data-stu-id="d2c48-209">Failure to stop the SQL Server service during these operations can cause database corruption.</span></span>

## <a name="io-guidance"></a><span data-ttu-id="d2c48-210">Linee guida per l'I/O</span><span class="sxs-lookup"><span data-stu-id="d2c48-210">I/O guidance</span></span>

* <span data-ttu-id="d2c48-211">Quando l'applicazione e le richieste vengono eseguite in parallelo, si ottengono i migliori risultati con Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="d2c48-211">The best results with Premium Storage are achieved when you parallelize your application and requests.</span></span> <span data-ttu-id="d2c48-212">Archiviazione Premium è progettato per scenari in cui la profondità della coda I/O è maggiore di 1, pertanto si noteranno eventualmente impercettibili miglioramenti delle prestazioni per le richieste seriali a thread singolo (anche se usano in modo intensivo l'archiviazione).</span><span class="sxs-lookup"><span data-stu-id="d2c48-212">Premium Storage is designed for scenarios where the IO queue depth is greater than 1, so you will see little or no performance gains for single-threaded serial requests (even if they are storage intensive).</span></span> <span data-ttu-id="d2c48-213">Ad esempio, ciò potrebbe influire sui risultati di test a thread singolo degli strumenti di analisi delle prestazioni, ad esempio SQLIO.</span><span class="sxs-lookup"><span data-stu-id="d2c48-213">For example, this could impact the single-threaded test results of performance analysis tools, such as SQLIO.</span></span>

* <span data-ttu-id="d2c48-214">È consigliabile usare la [compressione di pagina del database](https://msdn.microsoft.com/library/cc280449.aspx) in quanto consente di migliorare le prestazioni dei carichi di lavoro con utilizzo intensivo di I/O.</span><span class="sxs-lookup"><span data-stu-id="d2c48-214">Consider using [database page compression](https://msdn.microsoft.com/library/cc280449.aspx) as it can help improve performance of I/O intensive workloads.</span></span> <span data-ttu-id="d2c48-215">Tuttavia, la compressione dei dati potrebbe incrementare l'utilizzo della CPU nel server di database.</span><span class="sxs-lookup"><span data-stu-id="d2c48-215">However, the data compression might increase the CPU consumption on the database server.</span></span>

* <span data-ttu-id="d2c48-216">È possibile abilitare l'inizializzazione immediata dei file per ridurre il tempo necessario per l'allocazione iniziale dei file.</span><span class="sxs-lookup"><span data-stu-id="d2c48-216">Consider enabling instant file initialization to reduce the time that is required for initial file allocation.</span></span> <span data-ttu-id="d2c48-217">Per sfruttare l'inizializzazione immediata dei file, concedere SE_MANAGE_VOLUME_NAME all'account di servizio SQL Server (MSSQLSERVER) e aggiungerlo ai criteri di sicurezza **Esecuzione attività di manutenzione volume**.</span><span class="sxs-lookup"><span data-stu-id="d2c48-217">To take advantage of instant file initialization, you grant the SQL Server (MSSQLSERVER) service account with SE_MANAGE_VOLUME_NAME and add it to the **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="d2c48-218">Se si usa un'immagine della piattaforma SQL Server per Azure, l'account del servizio predefinito (NT Service\MSSQLSERVER) non viene aggiunto ai criteri di sicurezza **Esecuzione attività di manutenzione volume**.</span><span class="sxs-lookup"><span data-stu-id="d2c48-218">If you are using a SQL Server platform image for Azure, the default service account (NT Service\MSSQLSERVER) isn’t added to the **Perform Volume Maintenance Tasks** security policy.</span></span> <span data-ttu-id="d2c48-219">In altre parole, l'inizializzazione file immediata non è abilitata in un'immagine della piattaforma Server SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="d2c48-219">In other words, instant file initialization is not enabled in a SQL Server Azure platform image.</span></span> <span data-ttu-id="d2c48-220">Dopo aver aggiunto l'account del servizio SQL Server ai criteri di sicurezza **Esecuzione attività di manutenzione volume** , riavviare il servizio SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d2c48-220">After adding the SQL Server service account to the **Perform Volume Maintenance Tasks** security policy, restart the SQL Server service.</span></span> <span data-ttu-id="d2c48-221">Potrebbero essere presenti indicazioni sulla sicurezza da considerare per l'utilizzo di questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="d2c48-221">There could be security considerations for using this feature.</span></span> <span data-ttu-id="d2c48-222">Per altre informazioni, vedere [Inizializzazione di file di database](https://msdn.microsoft.com/library/ms175935.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2c48-222">For more information, see [Database File Initialization](https://msdn.microsoft.com/library/ms175935.aspx).</span></span>

* <span data-ttu-id="d2c48-223">**aumento automatico delle dimensioni** è considerato una semplice contingenza di crescita imprevista.</span><span class="sxs-lookup"><span data-stu-id="d2c48-223">**autogrow** is considered to be merely a contingency for unexpected growth.</span></span> <span data-ttu-id="d2c48-224">La crescita dei dati e dei log non viene gestita quotidianamente con l'aumento automatico delle dimensioni.</span><span class="sxs-lookup"><span data-stu-id="d2c48-224">Do not manage your data and log growth on a day-to-day basis with autogrow.</span></span> <span data-ttu-id="d2c48-225">Se si usa questa funzionalità, impostare la precrescita del file mediante l'opzione Dimensioni.</span><span class="sxs-lookup"><span data-stu-id="d2c48-225">If autogrow is used, pre-grow the file using the Size switch.</span></span>

* <span data-ttu-id="d2c48-226">Verificare che la **compattazione automatica** sia disabilitata per evitare inutili sovraccarichi che possono influire negativamente sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="d2c48-226">Make sure **autoshrink** is disabled to avoid unnecessary overhead that can negatively affect performance.</span></span>

* <span data-ttu-id="d2c48-227">Spostare tutti i database su dischi dati, inclusi i database di sistema.</span><span class="sxs-lookup"><span data-stu-id="d2c48-227">Move all databases to data disks, including system databases.</span></span> <span data-ttu-id="d2c48-228">Per altre informazioni vedere l'articolo [Spostare i database di sistema](https://msdn.microsoft.com/library/ms345408.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2c48-228">For more information, see [Move System Databases](https://msdn.microsoft.com/library/ms345408.aspx).</span></span>

* <span data-ttu-id="d2c48-229">Spostare le directory dei file di traccia e dei log degli errori di SQL Server sui dischi dati.</span><span class="sxs-lookup"><span data-stu-id="d2c48-229">Move SQL Server error log and trace file directories to data disks.</span></span> <span data-ttu-id="d2c48-230">È possibile farlo in Gestione configurazione SQL Server facendo clic con il pulsante destro del mouse sull'istanza di SQL Server e selezionando Proprietà.</span><span class="sxs-lookup"><span data-stu-id="d2c48-230">This can be done in SQL Server Configuration Manager by right-clicking your SQL Server instance and selecting properties.</span></span> <span data-ttu-id="d2c48-231">Le impostazioni per il log degli errori e il file di traccia possono essere modificate nella scheda **Parametri di avvio** . La Directory dump si specifica nella scheda **Avanzate** . La schermata illustra dove cercare il parametro di avvio del log degli errori.</span><span class="sxs-lookup"><span data-stu-id="d2c48-231">The error log and trace file settings can be changed in the **Startup Parameters** tab. The Dump Directory is specified in the **Advanced** tab. The following screenshot shows where to look for the error log startup parameter.</span></span>

    ![Schermata del log degli errori di SQL](./media/virtual-machines-windows-sql-performance/sql_server_error_log_location.png)

* <span data-ttu-id="d2c48-233">Configurare il percorso predefinito del file di backup e del file di database.</span><span class="sxs-lookup"><span data-stu-id="d2c48-233">Setup default backup and database file locations.</span></span> <span data-ttu-id="d2c48-234">Seguire i consigli elencati in questo argomento ed eseguire le modifiche nella finestra Proprietà server.</span><span class="sxs-lookup"><span data-stu-id="d2c48-234">Use the recommendations in this topic, and make the changes in the Server properties window.</span></span> <span data-ttu-id="d2c48-235">Per le istruzioni, vedere l'articolo dedicato alla [Visualizzazione o modifica dei percorsi predefiniti per i file di dati e di log (SQL Server Management Studio)](https://msdn.microsoft.com/library/dd206993.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2c48-235">For instructions, see [View or Change the Default Locations for Data and Log Files (SQL Server Management Studio)](https://msdn.microsoft.com/library/dd206993.aspx).</span></span> <span data-ttu-id="d2c48-236">Le schermata seguente illustra come apportare tali modifiche.</span><span class="sxs-lookup"><span data-stu-id="d2c48-236">The following screenshot demonstrates where to make these changes.</span></span>

    ![File di log e di backup di SQL](./media/virtual-machines-windows-sql-performance/sql_server_default_data_log_backup_locations.png)
* <span data-ttu-id="d2c48-238">Attivare le pagine bloccate per ridurre le operazioni di I/O e le attività di paging.</span><span class="sxs-lookup"><span data-stu-id="d2c48-238">Enable locked pages to reduce IO and any paging activities.</span></span> <span data-ttu-id="d2c48-239">Per altre informazioni, vedere l'articolo [Abilitazione dell'opzione Blocco di pagine in memoria (Windows)](https://msdn.microsoft.com/library/ms190730.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2c48-239">For more information, see [Enable the Lock Pages in Memory Option (Windows)](https://msdn.microsoft.com/library/ms190730.aspx).</span></span>

* <span data-ttu-id="d2c48-240">Se si esegue SQL Server 2012, installare l'aggiornamento cumulativo 10 del Service Pack 1.</span><span class="sxs-lookup"><span data-stu-id="d2c48-240">If you are running SQL Server 2012, install Service Pack 1 Cumulative Update 10.</span></span> <span data-ttu-id="d2c48-241">Questo aggiornamento contiene la correzione per le prestazioni ridotte delle operazioni I/O quando si esegue select nell'istruzione di una tabella temporanea in SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="d2c48-241">This update contains the fix for poor performance on I/O when you execute select into temporary table statement in SQL Server 2012.</span></span> <span data-ttu-id="d2c48-242">Per altre informazioni, vedere questo [articolo della Knowledge Base](http://support.microsoft.com/kb/2958012).</span><span class="sxs-lookup"><span data-stu-id="d2c48-242">For information, see this [knowledge base article](http://support.microsoft.com/kb/2958012).</span></span>

* <span data-ttu-id="d2c48-243">È consigliabile comprimere i file di dati durante il trasferimento in entrata e in uscita di Azure.</span><span class="sxs-lookup"><span data-stu-id="d2c48-243">Consider compressing any data files when transferring in/out of Azure.</span></span>

## <a name="feature-specific-guidance"></a><span data-ttu-id="d2c48-244">Linee guida per le specifiche della funzione</span><span class="sxs-lookup"><span data-stu-id="d2c48-244">Feature specific guidance</span></span>

<span data-ttu-id="d2c48-245">Alcune distribuzioni possono ottenere ulteriori miglioramenti delle prestazioni usando tecniche di configurazione più avanzate.</span><span class="sxs-lookup"><span data-stu-id="d2c48-245">Some deployments may achieve additional performance benefits using more advanced configuration techniques.</span></span> <span data-ttu-id="d2c48-246">Nell'elenco seguente vengono evidenziate alcune funzionalità di SQL Server che consentono di ottenere prestazioni migliori:</span><span class="sxs-lookup"><span data-stu-id="d2c48-246">The following list highlights some SQL Server features that can help you to achieve better performance:</span></span>

* <span data-ttu-id="d2c48-247">**Backup nell'archiviazione di Azure**: quando si eseguono backup per SQL Server in esecuzione in macchine virtuali di Azure, è possibile usare [Backup di SQL Server nell'URL](https://msdn.microsoft.com/library/dn435916.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2c48-247">**Backup to Azure storage**: When performing backups for SQL Server running in Azure virtual machines, you can use [SQL Server Backup to URL](https://msdn.microsoft.com/library/dn435916.aspx).</span></span> <span data-ttu-id="d2c48-248">Questa funzionalità è disponibile a partire da SQL Server 2012 SP1 CU2 ed è consigliata per il backup su dischi dati associati.</span><span class="sxs-lookup"><span data-stu-id="d2c48-248">This feature is available starting with SQL Server 2012 SP1 CU2 and recommended for backing up to the attached data disks.</span></span> <span data-ttu-id="d2c48-249">Quando si esegue il backup o il ripristino da e verso l'archiviazione di Azure, seguire le indicazioni offerte in [Procedure consigliate e risoluzione dei problemi per il backup di SQL Server nell'URL e Ripristino da backup archiviati nell'archiviazione di Azure](https://msdn.microsoft.com/library/jj919149.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2c48-249">When you backup/restore to/from Azure storage, follow the recommendations provided at [SQL Server Backup to URL Best Practices and Troubleshooting and Restoring from Backups Stored in Azure Storage](https://msdn.microsoft.com/library/jj919149.aspx).</span></span> <span data-ttu-id="d2c48-250">È anche possibile automatizzare i backup usando [Backup automatizzato per SQL Server in Macchine virtuali di Azure](virtual-machines-windows-sql-automated-backup.md).</span><span class="sxs-lookup"><span data-stu-id="d2c48-250">You can also automate these backups using [Automated Backup for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-automated-backup.md).</span></span>

    <span data-ttu-id="d2c48-251">Prima di SQL Server 2012, usare lo [strumento di backup di SQL Server in Azure](https://www.microsoft.com/download/details.aspx?id=40740).</span><span class="sxs-lookup"><span data-stu-id="d2c48-251">Prior to SQL Server 2012, you can use [SQL Server Backup to Azure Tool](https://www.microsoft.com/download/details.aspx?id=40740).</span></span> <span data-ttu-id="d2c48-252">Questo strumento consente di aumentare la velocità effettiva di backup usando più destinazioni di backup in striping.</span><span class="sxs-lookup"><span data-stu-id="d2c48-252">This tool can help to increase backup throughput using multiple backup stripe targets.</span></span>

* <span data-ttu-id="d2c48-253">**File di dati di SQL Server in Azure**: questa nuova funzionalità ( [file di dati di SQL Server in Azure](https://msdn.microsoft.com/library/dn385720.aspx)) è disponibile a partire da SQL Server 2014.</span><span class="sxs-lookup"><span data-stu-id="d2c48-253">**SQL Server Data Files in Azure**: This new feature, [SQL Server Data Files in Azure](https://msdn.microsoft.com/library/dn385720.aspx), is available starting with SQL Server 2014.</span></span> <span data-ttu-id="d2c48-254">L'esecuzione di SQL Server con file di dati in Azure dimostra le caratteristiche di prestazioni paragonabili a quelle dei dischi dati di Azure.</span><span class="sxs-lookup"><span data-stu-id="d2c48-254">Running SQL Server with data files in Azure demonstrates comparable performance characteristics as using Azure data disks.</span></span>

## <a name="next-steps"></a><span data-ttu-id="d2c48-255">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="d2c48-255">Next Steps</span></span>

<span data-ttu-id="d2c48-256">Per le procedure consigliate relative alla sicurezza, vedere [Considerazioni relative alla sicurezza per SQL Server in Macchine virtuali di Azure](virtual-machines-windows-sql-security.md).</span><span class="sxs-lookup"><span data-stu-id="d2c48-256">For security best practices, see [Security Considerations for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-security.md).</span></span>

<span data-ttu-id="d2c48-257">Esaminare altri argomenti relativi alle macchine virtuali di SQL Server in [Panoramica di SQL Server in Macchine virtuali di Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d2c48-257">Review other SQL Server Virtual Machine topics at [SQL Server on Azure Virtual Machines Overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>
