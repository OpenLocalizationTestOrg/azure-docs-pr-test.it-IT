---
title: dati del sensore veicolo aaaProcess con Apache Storm in HDInsight | Documenti Microsoft
description: Informazioni su come dati del sensore veicolo tooprocess dagli hub di eventi utilizzando Apache Storm in HDInsight. Aggiungere dati del modello dal database di Azure Cosmos e archiviare toostorage di output.
services: hdinsight,documentdb,notification-hubs
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: 78980635-8bef-4c33-96c3-fae50e932e31
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/03/2017
ms.author: larryfr
ms.openlocfilehash: 8f7b1dbb9072e095ea32160bb731bedd071288af
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="process-vehicle-sensor-data-from-azure-event-hubs-using-apache-storm-on-hdinsight"></a><span data-ttu-id="e8c6a-104">Elaborare i dati del sensore veicolo dagli hub eventi di Azure usando Apache Storm in HDInsight</span><span class="sxs-lookup"><span data-stu-id="e8c6a-104">Process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight</span></span>

<span data-ttu-id="e8c6a-105">Informazioni su come dati del sensore veicolo tooprocess dagli hub di eventi di Azure usando Apache Storm in HDInsight.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-105">Learn how tooprocess vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight.</span></span> <span data-ttu-id="e8c6a-106">In questo esempio legge i dati del sensore dagli hub di eventi di Azure, arricchisce dati hello facendo riferimento a dati archiviati nel database di Azure Cosmos.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-106">This example reads sensor data from Azure Event Hubs, enriches hello data by referencing data stored in Azure Cosmos DB.</span></span> <span data-ttu-id="e8c6a-107">Hello dati vengono archiviati in archiviazione di Azure usando hello del File System di Hadoop (HDFS).</span><span class="sxs-lookup"><span data-stu-id="e8c6a-107">hello data is stored into Azure Storage using hello Hadoop File System (HDFS).</span></span>

![HDInsight e hello diagramma dell'architettura di Internet delle cose (IoT)](./media/hdinsight-storm-iot-eventhub-documentdb/iot.png)

## <a name="overview"></a><span data-ttu-id="e8c6a-109">Panoramica</span><span class="sxs-lookup"><span data-stu-id="e8c6a-109">Overview</span></span>

<span data-ttu-id="e8c6a-110">Aggiunta di sensori toovehicles consente problemi attrezzature toopredict in base alle tendenze dei dati cronologici.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-110">Adding sensors toovehicles allows you toopredict equipment problems based on historical data trends.</span></span> <span data-ttu-id="e8c6a-111">Consente inoltre toomake miglioramenti versioni toofuture basate su Analisi utilizzo del modello.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-111">It also allows you toomake improvements toofuture versions based on usage pattern analysis.</span></span> <span data-ttu-id="e8c6a-112">È necessario essere in grado di tooquickly e caricare in modo efficiente i dati di hello da tutti i veicoli in Hadoop prima di poter eseguire l'elaborazione di MapReduce.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-112">You must be able tooquickly and efficiently load hello data from all vehicles into Hadoop before MapReduce processing can occur.</span></span> <span data-ttu-id="e8c6a-113">Inoltre, è preferibile toodo analisi per i percorsi di errore critico (temperatura del motore, freni, e così via) in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-113">Additionally, you may wish toodo analysis for critical failure paths (engine temperature, brakes, etc.) in real time.</span></span>

<span data-ttu-id="e8c6a-114">Hub eventi di Azure è compilato in volume di grande hello toohandle dei dati generati dai sensori.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-114">Azure Event Hubs is built toohandle hello massive volume of data generated by sensors.</span></span> <span data-ttu-id="e8c6a-115">Apache Storm può essere utilizzato tooload e hello elaborare i dati prima di essere archiviati in HDFS.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-115">Apache Storm can be used tooload and process hello data before storing it into HDFS.</span></span>

## <a name="solution"></a><span data-ttu-id="e8c6a-116">Soluzione</span><span class="sxs-lookup"><span data-stu-id="e8c6a-116">Solution</span></span>

<span data-ttu-id="e8c6a-117">I dati di telemetria relativi a temperatura del motore, temperatura ambiente e velocità del veicolo vengono registrati dai sensori.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-117">Telemetry data for engine temperature, ambient temperature, and vehicle speed is recorded by sensors.</span></span> <span data-ttu-id="e8c6a-118">Dati vengono quindi inviati hub tooEvent insieme veicolo identificazione numero (VPN dell'automobile hello) e un timestamp.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-118">Data is then sent tooEvent Hubs along with hello car's Vehicle Identification Number (VIN) and a time stamp.</span></span> <span data-ttu-id="e8c6a-119">Da qui, una topologia di Storm in esecuzione in un elevato numero di Apache nel cluster HDInsight legge i dati di hello, elabora e archivia in HDFS.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-119">From there, a Storm Topology running on an Apache Storm on HDInsight cluster reads hello data, processes it, and stores it into HDFS.</span></span>

<span data-ttu-id="e8c6a-120">Durante l'elaborazione, hello VPN è informazioni relative al modello tooretrieve utilizzato dal database Cosmos.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-120">During processing, hello VIN is used tooretrieve model information from Cosmos DB.</span></span> <span data-ttu-id="e8c6a-121">Questi dati viene aggiunto il flusso di dati toohello prima che venga archiviata.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-121">This data is added toohello data stream before it is stored.</span></span>

<span data-ttu-id="e8c6a-122">componenti di Hello utilizzati nella topologia Storm hello sono:</span><span class="sxs-lookup"><span data-stu-id="e8c6a-122">hello components used in hello Storm Topology are:</span></span>

* <span data-ttu-id="e8c6a-123">**EventHubSpout** : legge i dati dagli hub eventi di Azure</span><span class="sxs-lookup"><span data-stu-id="e8c6a-123">**EventHubSpout** - reads data from Azure Event Hubs</span></span>
* <span data-ttu-id="e8c6a-124">**TypeConversionBolt** -converte hello stringa JSON da hub eventi in una tupla contenente hello sensore dati seguenti:</span><span class="sxs-lookup"><span data-stu-id="e8c6a-124">**TypeConversionBolt** - converts hello JSON string from Event Hubs into a tuple containing hello following sensor data:</span></span>
    * <span data-ttu-id="e8c6a-125">engineTemperature</span><span class="sxs-lookup"><span data-stu-id="e8c6a-125">Engine temperature</span></span>
    * <span data-ttu-id="e8c6a-126">Temperatura ambiente</span><span class="sxs-lookup"><span data-stu-id="e8c6a-126">Ambient temperature</span></span>
    * <span data-ttu-id="e8c6a-127">speed</span><span class="sxs-lookup"><span data-stu-id="e8c6a-127">Speed</span></span>
    * <span data-ttu-id="e8c6a-128">vin</span><span class="sxs-lookup"><span data-stu-id="e8c6a-128">VIN</span></span>
    * <span data-ttu-id="e8c6a-129">Timestamp</span><span class="sxs-lookup"><span data-stu-id="e8c6a-129">Timestamp</span></span>
* <span data-ttu-id="e8c6a-130">**DataReferencBolt** -Cerca modello hello da DB Cosmos tramite VPN hello</span><span class="sxs-lookup"><span data-stu-id="e8c6a-130">**DataReferencBolt** - looks up hello vehicle model from Cosmos DB using hello VIN</span></span>
* <span data-ttu-id="e8c6a-131">**WasbStoreBolt** -archivi hello tooHDFS dati (archiviazione di Azure)</span><span class="sxs-lookup"><span data-stu-id="e8c6a-131">**WasbStoreBolt** - stores hello data tooHDFS (Azure Storage)</span></span>

<span data-ttu-id="e8c6a-132">Hello seguente immagine è un diagramma di questa soluzione:</span><span class="sxs-lookup"><span data-stu-id="e8c6a-132">hello following image is a diagram of this solution:</span></span>

![topologia storm](./media/hdinsight-storm-iot-eventhub-documentdb/iottopology.png)

## <a name="implementation"></a><span data-ttu-id="e8c6a-134">Implementazione</span><span class="sxs-lookup"><span data-stu-id="e8c6a-134">Implementation</span></span>

<span data-ttu-id="e8c6a-135">Una completa soluzione automatizzata per questo scenario è disponibile come parte di hello [esempi di Storm HDInsight](https://github.com/hdinsight/hdinsight-storm-examples) repository in GitHub.</span><span class="sxs-lookup"><span data-stu-id="e8c6a-135">A complete, automated solution for this scenario is available as part of hello [HDInsight-Storm-Examples](https://github.com/hdinsight/hdinsight-storm-examples) repository on GitHub.</span></span> <span data-ttu-id="e8c6a-136">toouse in questo esempio, seguire la procedura seguente hello in hello [IoTExample README. MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span><span class="sxs-lookup"><span data-stu-id="e8c6a-136">toouse this example, follow hello steps in hello [IoTExample README.MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="e8c6a-137">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="e8c6a-137">Next Steps</span></span>

<span data-ttu-id="e8c6a-138">Per altri esempi di topologie Storm, vedere [Topologie di esempio per Storm in HDInsight](hdinsight-storm-example-topology.md).</span><span class="sxs-lookup"><span data-stu-id="e8c6a-138">For more example Storm topologies, see [Example topologies for Storm on HDInsight](hdinsight-storm-example-topology.md).</span></span>

