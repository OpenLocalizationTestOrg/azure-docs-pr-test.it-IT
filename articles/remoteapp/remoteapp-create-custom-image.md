---
title: Come creare un'immagine modello personalizzata per Azure RemoteApp | Microsoft Docs
description: "Informazioni su come creare un'immagine modello personalizzata per Azure RemoteApp. È possibile usare questo modello con una raccolta ibrida o cloud."
services: remoteapp
documentationcenter: 
author: msmbaldwin
manager: mbaldwin
editor: 
ms.assetid: b9ec5b51-f7cd-470b-8545-d0fd714c5982
ms.service: remoteapp
ms.workload: compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/26/2017
ms.author: mbaldwin
ms.openlocfilehash: f529a5526f266c7dbac3c719b244d05ab7705941
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-create-a-custom-template-image-for-azure-remoteapp"></a><span data-ttu-id="39863-104">Come creare un'immagine modello personalizzata per Azure RemoteApp</span><span class="sxs-lookup"><span data-stu-id="39863-104">How to create a custom template image for Azure RemoteApp</span></span>
> [!IMPORTANT]
> <span data-ttu-id="39863-105">Azure RemoteApp verrà sospeso a partire dal 31 agosto 2017.</span><span class="sxs-lookup"><span data-stu-id="39863-105">Azure RemoteApp is being discontinued on August 31, 2017.</span></span> <span data-ttu-id="39863-106">Per i dettagli, vedere l' [annuncio](https://go.microsoft.com/fwlink/?linkid=821148) .</span><span class="sxs-lookup"><span data-stu-id="39863-106">Read the [announcement](https://go.microsoft.com/fwlink/?linkid=821148) for details.</span></span>
> 
> 

<span data-ttu-id="39863-107">Azure RemoteApp usa un'immagine modello di Windows Server 2012 R2 per ospitare tutti i programmi da condividere con gli utenti.</span><span class="sxs-lookup"><span data-stu-id="39863-107">Azure RemoteApp uses a Windows Server 2012 R2 template image to host all the programs that you want to share with your users.</span></span> <span data-ttu-id="39863-108">Per creare un'immagine modello di RemoteApp personalizzata, è possibile iniziare con un'immagine esistente o crearne una nuova.</span><span class="sxs-lookup"><span data-stu-id="39863-108">To create a custom RemoteApp template image, you can start with an existing image or create a new one.</span></span> 

> [!TIP]
> <span data-ttu-id="39863-109">E’ possibile creare un'immagine da una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="39863-109">Did you know you can create an image from an Azure VM?</span></span> <span data-ttu-id="39863-110">In questo modo viene ridotto il tempo necessario per importare l'immagine.</span><span class="sxs-lookup"><span data-stu-id="39863-110">True story, and it cuts down on the amount of time it takes to import the image.</span></span> <span data-ttu-id="39863-111">Consultare i passaggi [qui](remoteapp-image-on-azurevm.md)</span><span class="sxs-lookup"><span data-stu-id="39863-111">Check out the steps [here](remoteapp-image-on-azurevm.md).</span></span>
> 
> 

<span data-ttu-id="39863-112">I requisiti per l'immagine che possono essere caricati e usati con l'app Azure RemoteApp sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="39863-112">The requirements for the image that can be uploaded for use with Azure RemoteApp are:</span></span>

* <span data-ttu-id="39863-113">La dimensione dell'immagine dev'essere un multiplo di MB.</span><span class="sxs-lookup"><span data-stu-id="39863-113">The image size should be a multiple of MBs.</span></span> <span data-ttu-id="39863-114">Se si prova a caricare un'immagine che non è un multiplo esatto, l'operazione non andrà a buon fine.</span><span class="sxs-lookup"><span data-stu-id="39863-114">If you try to upload an image that is not an exact multiple, the upload will fail.</span></span>
* <span data-ttu-id="39863-115">L'immagine deve avere una dimensione massima di 127 GB.</span><span class="sxs-lookup"><span data-stu-id="39863-115">The image size must be 127 GB or smaller.</span></span>
* <span data-ttu-id="39863-116">Deve essere inclusa in un file VHD (i file VHDX [dischi rigidi virtuali Hyper-V] non sono attualmente supportati).</span><span class="sxs-lookup"><span data-stu-id="39863-116">It must be on a VHD file (VHDX files [Hyper-V virtual hard drives] are not currently supported).</span></span>
* <span data-ttu-id="39863-117">Il file VHD non deve essere una macchina virtuale di seconda generazione.</span><span class="sxs-lookup"><span data-stu-id="39863-117">The VHD must not be a generation 2 virtual machine.</span></span>
* <span data-ttu-id="39863-118">Il file VHD può essere di dimensioni fisse o a espansione dinamica.</span><span class="sxs-lookup"><span data-stu-id="39863-118">The VHD can be either fixed-size or dynamically expanding.</span></span> <span data-ttu-id="39863-119">È consigliabile un file VHD a espansione dinamica perché i tempi di caricamento di questo file in Azure sono inferiori rispetto a uno di dimensioni disse.</span><span class="sxs-lookup"><span data-stu-id="39863-119">A dynamically expanding VHD is recommended because it takes less time to upload to Azure than a fixed-size VHD file.</span></span>
* <span data-ttu-id="39863-120">Il disco deve essere inizializzato con lo stile di partizione MBR (Master Boot Record).</span><span class="sxs-lookup"><span data-stu-id="39863-120">The disk must be initialized using the Master Boot Record (MBR) partitioning style.</span></span> <span data-ttu-id="39863-121">Lo stile di partizione basato sulla tabella di partizione GUID (GPT) non è supportato.</span><span class="sxs-lookup"><span data-stu-id="39863-121">The GUID partition table (GPT) partition style is not supported.</span></span>
* <span data-ttu-id="39863-122">Il file VHD deve contenere una singola installazione di Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="39863-122">The VHD must contain a single installation of Windows Server 2012 R2.</span></span> <span data-ttu-id="39863-123">Può contenere più volumi, ma solo uno che contiene un'installazione di Windows.</span><span class="sxs-lookup"><span data-stu-id="39863-123">It can contain multiple volumes, but only one that contains an installation of Windows.</span></span>
* <span data-ttu-id="39863-124">È necessario installare il ruolo Host sessione Desktop remoto e la funzionalità Esperienza desktop.</span><span class="sxs-lookup"><span data-stu-id="39863-124">The Remote Desktop Session Host (RDSH) role and the Desktop Experience feature must be installed.</span></span>
* <span data-ttu-id="39863-125">Il ruolo Gestore connessione Desktop remoto *non* deve essere installato.</span><span class="sxs-lookup"><span data-stu-id="39863-125">The Remote Desktop Connection Broker role must *not* be installed.</span></span>
* <span data-ttu-id="39863-126">EFS (Encrypting File System) deve essere disabilitato.</span><span class="sxs-lookup"><span data-stu-id="39863-126">The Encrypting File System (EFS) must be disabled.</span></span>
* <span data-ttu-id="39863-127">L'immagine deve essere preparata con SYSPREP usando i parametri **/oobe /generalize /shutdown** (NON usare il parametro **/mode:vm**).</span><span class="sxs-lookup"><span data-stu-id="39863-127">The image must be SYSPREPed using the parameters **/oobe /generalize /shutdown** (DO NOT use the **/mode:vm** parameter).</span></span>
* <span data-ttu-id="39863-128">Il caricamento del disco VHD da una catena di snapshot non è supportato.</span><span class="sxs-lookup"><span data-stu-id="39863-128">Uploading your VHD from a snapshot chain is not supported.</span></span>

<span data-ttu-id="39863-129">**Prima di iniziare**</span><span class="sxs-lookup"><span data-stu-id="39863-129">**Before you begin**</span></span>

<span data-ttu-id="39863-130">Prima di creare il servizio, è necessario eseguire le seguenti operazioni:</span><span class="sxs-lookup"><span data-stu-id="39863-130">You need to do the following before creating the service:</span></span>

* <span data-ttu-id="39863-131">[Iscriversi](https://azure.microsoft.com/services/remoteapp/) a RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="39863-131">[Sign up](https://azure.microsoft.com/services/remoteapp/) for RemoteApp.</span></span>
* <span data-ttu-id="39863-132">Creare in Active Directory un account utente da usare come account del servizio RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="39863-132">Create a user account in Active Directory to use as the RemoteApp service account.</span></span> <span data-ttu-id="39863-133">Limitare le autorizzazioni per l'account in modo che possa aggiungere computer al dominio.</span><span class="sxs-lookup"><span data-stu-id="39863-133">Restrict the permissions for this account so that it can only join machines to the domain.</span></span> <span data-ttu-id="39863-134">Per altre informazioni, vedere [Configurare Azure Active Directory per RemoteApp](remoteapp-ad.md) .</span><span class="sxs-lookup"><span data-stu-id="39863-134">See [Configure Azure Active Directory for RemoteApp](remoteapp-ad.md) for more information.</span></span>
* <span data-ttu-id="39863-135">Raccogliere informazioni sulla rete locale: informazioni sull'indirizzo IP e dettagli sul dispositivo VPN.</span><span class="sxs-lookup"><span data-stu-id="39863-135">Gather information about your on-premises network: IP address information and VPN device details.</span></span>
* <span data-ttu-id="39863-136">Installare il modulo [Azure PowerShell](/powershell/azure/overview) .</span><span class="sxs-lookup"><span data-stu-id="39863-136">Install the [Azure PowerShell](/powershell/azure/overview) module.</span></span>
* <span data-ttu-id="39863-137">Raccogliere informazioni sugli utenti a cui concedere l'accesso.</span><span class="sxs-lookup"><span data-stu-id="39863-137">Gather information about the users that you want to grant access to.</span></span> <span data-ttu-id="39863-138">Le informazioni possono essere relative all'account Microsoft o all'account di lavoro Active Directory per gli utenti.</span><span class="sxs-lookup"><span data-stu-id="39863-138">This can be either Microsoft account information or Active Directory work account information for users.</span></span>

## <a name="create-a-template-image"></a><span data-ttu-id="39863-139">Creazione di un'immagine modello</span><span class="sxs-lookup"><span data-stu-id="39863-139">Create a template image</span></span>
<span data-ttu-id="39863-140">Questi sono i passaggi di alto livello per creare una nuova immagine modello da zero:</span><span class="sxs-lookup"><span data-stu-id="39863-140">These are the high level steps to create a new template image from scratch:</span></span>

1. <span data-ttu-id="39863-141">Procurarsi un DVD o un'immagine ISO di Windows Server 2012 R2 Update.</span><span class="sxs-lookup"><span data-stu-id="39863-141">Locate a Windows Server 2012 R2 Update DVD or ISO image.</span></span>
2. <span data-ttu-id="39863-142">Creare un file VHD.</span><span class="sxs-lookup"><span data-stu-id="39863-142">Create a VHD file.</span></span>
3. <span data-ttu-id="39863-143">Installare Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="39863-143">Install Windows Server 2012 R2.</span></span>
4. <span data-ttu-id="39863-144">Installare il ruolo Host sessione Desktop remoto e la funzionalità Esperienza desktop.</span><span class="sxs-lookup"><span data-stu-id="39863-144">Install the Remote Desktop Session Host (RDSH) role and the Desktop Experience feature.</span></span>
5. <span data-ttu-id="39863-145">Installare funzionalità aggiuntive richieste dalle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="39863-145">Install additional features required by your applications.</span></span>
6. <span data-ttu-id="39863-146">Installare e configurare le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="39863-146">Install and configure your applications.</span></span> <span data-ttu-id="39863-147">Per semplificare la condivisione delle applicazioni, aggiungere eventuali applicazioni o programmi che si desidera condividere nel menu **Start** dell'immagine, in particolare in **%systemdrive%\ProgramData\Microsoft\Windows\Start Menu\Programmi.</span><span class="sxs-lookup"><span data-stu-id="39863-147">To make sharing apps easier, add any apps or programs that you want to share to the **Start** menu of the image, specifically in **%systemdrive%\ProgramData\Microsoft\Windows\Start Menu\Programs.</span></span>
7. <span data-ttu-id="39863-148">Eseguire eventuali configurazioni aggiuntive di Windows richieste dalle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="39863-148">Perform any additional Windows configurations required by your applications.</span></span>
8. <span data-ttu-id="39863-149">Disabilitare EFS (Encrypting File System).</span><span class="sxs-lookup"><span data-stu-id="39863-149">Disable the Encrypting File System (EFS).</span></span>
9. <span data-ttu-id="39863-150">**OBBLIGATORIO:** accedere a Windows Update e installare tutti gli aggiornamenti importanti.</span><span class="sxs-lookup"><span data-stu-id="39863-150">**REQUIRED:** Go to Windows Update and install all important updates.</span></span>
10. <span data-ttu-id="39863-151">Preparare l'immagine con SYSPREP.</span><span class="sxs-lookup"><span data-stu-id="39863-151">SYSPREP the image.</span></span>

<span data-ttu-id="39863-152">I passaggi dettagliati per creare una nuova immagine sono:</span><span class="sxs-lookup"><span data-stu-id="39863-152">The detailed steps for creating a new image are:</span></span>

1. <span data-ttu-id="39863-153">Procurarsi un DVD o un'immagine ISO di Windows Server 2012 R2 Update.</span><span class="sxs-lookup"><span data-stu-id="39863-153">Locate a Windows Server 2012 R2 Update DVD or ISO image.</span></span>
2. <span data-ttu-id="39863-154">Creare un disco VHD usando Gestione disco.</span><span class="sxs-lookup"><span data-stu-id="39863-154">Create a VHD file by using Disk Management.</span></span>
   
   1. <span data-ttu-id="39863-155">Avviare Gestione disco (diskmgmt.msc).</span><span class="sxs-lookup"><span data-stu-id="39863-155">Launch Disk Management (diskmgmt.msc).</span></span>
   2. <span data-ttu-id="39863-156">Creare un file VHD a espansione dinamica di dimensioni non inferiori a 40 GB.</span><span class="sxs-lookup"><span data-stu-id="39863-156">Create a dynamically expanding VHD of 40 GB or more in size.</span></span> <span data-ttu-id="39863-157">Stimare la quantità di spazio necessaria per Windows, le applicazioni e le personalizzazioni.</span><span class="sxs-lookup"><span data-stu-id="39863-157">(Estimate the amount of space needed for Windows, your applications, and customizations.</span></span> <span data-ttu-id="39863-158">Per Windows Server con il ruolo Host sessione Desktop remoto e la funzionalità Esperienza desktop installata sono necessari circa 10 GB di spazio.</span><span class="sxs-lookup"><span data-stu-id="39863-158">Windows Server with the RDSH role and Desktop Experience feature installed will require about 10 GB of space).</span></span>
      
      1. <span data-ttu-id="39863-159">Fare clic su **Azione > Crea file VHD**.</span><span class="sxs-lookup"><span data-stu-id="39863-159">Click **Action > Create VHD**.</span></span>
      2. <span data-ttu-id="39863-160">Specificare il percorso, le dimensioni e il formato del file VHD.</span><span class="sxs-lookup"><span data-stu-id="39863-160">Specify the location, size, and VHD format.</span></span> <span data-ttu-id="39863-161">Selezionare **A espansione dinamica**, quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="39863-161">Select **Dynamically expanding**, and then click **OK**.</span></span>
      
      <span data-ttu-id="39863-162">L'operazione dura alcuni secondi.</span><span class="sxs-lookup"><span data-stu-id="39863-162">This will run for several seconds.</span></span> <span data-ttu-id="39863-163">Una volta completata la creazione del file VHD, dovrebbe essere visibile un nuovo disco senza lettera di unità e nello stato “Non inizializzato" nella console di Gestione disco.</span><span class="sxs-lookup"><span data-stu-id="39863-163">When the VHD creation is complete, you should see a new disk without any drive letter and in “Not initialized" state in the Disk Management console.</span></span>
      
      * <span data-ttu-id="39863-164">Fare clic con il pulsante destro del mouse sul disco (non lo spazio non allocato), quindi scegliere **Inizializza disco**.</span><span class="sxs-lookup"><span data-stu-id="39863-164">Right-click the disk (not the unallocated space), and then click **Initialize Disk**.</span></span> <span data-ttu-id="39863-165">Selezionare **MBR** (Master Boot Record) come stile di partizione e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="39863-165">Select **MBR** (Master Boot Record) as the partition style, and then click **OK**.</span></span>
      * <span data-ttu-id="39863-166">Creare un nuovo volume: fare clic con il pulsante destro del mouse sullo spazio non allocato, quindi fare clic su **Nuovo volume semplice**.</span><span class="sxs-lookup"><span data-stu-id="39863-166">Create a new volume: right-click the unallocated space, and then click **New Simple Volume**.</span></span> <span data-ttu-id="39863-167">È possibile accettare i valori predefiniti nella procedura guidata, ma assicurarsi di assegnare una lettera di unità per evitare possibili problemi durante il caricamento dell'immagine modello.</span><span class="sxs-lookup"><span data-stu-id="39863-167">You can accept the defaults in the wizard, but make sure you assign a drive letter to avoid potential problems when you upload the template image.</span></span>
      * <span data-ttu-id="39863-168">Fare clic con il pulsante destro del mouse e scegliere **Scollega file VHD**.</span><span class="sxs-lookup"><span data-stu-id="39863-168">Right-click the disk, and then click **Detach VHD**.</span></span>
3. <span data-ttu-id="39863-169">Installare Windows Server 2012 R2:</span><span class="sxs-lookup"><span data-stu-id="39863-169">Install Windows Server 2012 R2:</span></span>
   
   1. <span data-ttu-id="39863-170">Creare una nuova macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="39863-170">Create a new virtual machine.</span></span> <span data-ttu-id="39863-171">Usare la Creazione guidata macchina virtuale in Console di gestione di Hyper-V o Hyper-V client.</span><span class="sxs-lookup"><span data-stu-id="39863-171">Use the New Virtual Machine Wizard in Hyper-V Manager or Client Hyper-V.</span></span>
      1. <span data-ttu-id="39863-172">Nella pagina Specifica generazione, selezionare **Generazione 1**.</span><span class="sxs-lookup"><span data-stu-id="39863-172">On the Specify Generation page, choose  **Generation 1**.</span></span>
      2. <span data-ttu-id="39863-173">Nella pagina Connessione disco rigido virtuale selezionare **Usa disco rigido virtuale esistente**e passare al file VHD creato nel passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="39863-173">On the Connect Virtual Hard Disk page, select **Use an existing virtual hard disk**, and browse to the VHD you created in the previous step.</span></span>
      3. <span data-ttu-id="39863-174">Nella pagina Opzioni di installazione selezionare **Install an operating system from a boot CD/DVD_ROM** (Installa un sistema operativo da un CD/DVD-ROM di avvio), quindi selezionare il percorso del supporto di installazione di Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="39863-174">On the Installation Options page, select **Install an operating system from a boot CD/DVD_ROM**, and then select the location of your Windows Server 2012 R2 installation media.</span></span>
      4. <span data-ttu-id="39863-175">Selezionare altre opzioni della procedura guidata necessarie per installare Windows e le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="39863-175">Choose other options in the wizard necessary to install Windows and your applications.</span></span> <span data-ttu-id="39863-176">Terminare la procedura guidata.</span><span class="sxs-lookup"><span data-stu-id="39863-176">Finish the wizard.</span></span>
   2. <span data-ttu-id="39863-177">Una volta terminata la procedura guidata, modificare le impostazioni della macchina virtuale e apportare eventuali altre modifiche necessarie per installare Windows e i programmi, ad esempio il numero di processori virtuali, quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="39863-177">After the wizard finishes, edit the settings of the virtual machine and make any other changes necessary to install Windows and your programs, such as the number of virtual processors, and then click **OK**.</span></span>
   3. <span data-ttu-id="39863-178">Connettersi alla macchina virtuale e installare Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="39863-178">Connect to the virtual machine and install Windows Server 2012 R2.</span></span>
4. <span data-ttu-id="39863-179">Installare il ruolo Host sessione Desktop remoto e la funzionalità Esperienza desktop:</span><span class="sxs-lookup"><span data-stu-id="39863-179">Install the Remote Desktop Session Host (RDSH) role and the Desktop Experience feature:</span></span>
   1. <span data-ttu-id="39863-180">Avviare Server Manager.</span><span class="sxs-lookup"><span data-stu-id="39863-180">Launch Server Manager.</span></span>
   2. <span data-ttu-id="39863-181">Fare clic su **Aggiungi ruoli e funzionalità** nella schermata iniziale oppure nel menu **Gestisci**.</span><span class="sxs-lookup"><span data-stu-id="39863-181">Click **Add Roles and features** on the Welcome screen or from the **Manage** menu.</span></span>
   3. <span data-ttu-id="39863-182">Nella pagina Prima di iniziare fare clic su **Avanti** .</span><span class="sxs-lookup"><span data-stu-id="39863-182">Click **Next** on the Before You Begin page.</span></span>
   4. <span data-ttu-id="39863-183">Selezionare **Installazione basata su ruoli o basata su funzionalità**, quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="39863-183">Select **Role-based or feature-based installation**, and then click **Next**.</span></span>
   5. <span data-ttu-id="39863-184">Selezionare il computer locale nell'elenco e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="39863-184">Select the local machine from the list, and then click **Next**.</span></span>
   6. <span data-ttu-id="39863-185">Selezionare **Servizi Desktop remoto** e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="39863-185">Select **Remote Desktop Services**, and then click **Next**.</span></span>
   7. <span data-ttu-id="39863-186">Espandere **Interfacce utente e infrastruttura** e selezionare **Esperienza desktop**.</span><span class="sxs-lookup"><span data-stu-id="39863-186">Expand **User Interfaces and Infrastructure** and select **Desktop Experience**.</span></span>
   8. <span data-ttu-id="39863-187">Fare clic su **Aggiungi funzionalità** e quindi su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="39863-187">Click **Add Features**, and then click **Next**.</span></span>
   9. <span data-ttu-id="39863-188">Nella pagina Servizi Desktop remoto fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="39863-188">On the Remote Desktop Services page, click **Next**.</span></span>
   10. <span data-ttu-id="39863-189">Fare clic su **Host sessione Desktop remoto**.</span><span class="sxs-lookup"><span data-stu-id="39863-189">Click **Remote Desktop Session Host**.</span></span>
   11. <span data-ttu-id="39863-190">Fare clic su **Aggiungi funzionalità** e quindi su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="39863-190">Click **Add Features**, and then click **Next**.</span></span>
   12. <span data-ttu-id="39863-191">Nella pagina Conferma selezioni per l'installazione selezionare **Riavvia automaticamente il server di destinazione se necessario**, quindi fare clic su **Sì** nell'avviso di riavvio.</span><span class="sxs-lookup"><span data-stu-id="39863-191">On the Confirm installation selections page, select **Restart the destination server automatically if required**, and then click **Yes** on the restart warning.</span></span>
   13. <span data-ttu-id="39863-192">Fare clic su **Installa**.</span><span class="sxs-lookup"><span data-stu-id="39863-192">Click **Install**.</span></span> <span data-ttu-id="39863-193">Il computer verrà riavviato.</span><span class="sxs-lookup"><span data-stu-id="39863-193">The computer will restart.</span></span>
5. <span data-ttu-id="39863-194">Installare funzionalità aggiuntive richieste dalle applicazioni, ad esempio .NET Framework 3.5.</span><span class="sxs-lookup"><span data-stu-id="39863-194">Install additional features required by your applications, such as the .NET Framework 3.5.</span></span> <span data-ttu-id="39863-195">Per installare le funzionalità, eseguire l'Aggiunta guidata ruoli e funzionalità.</span><span class="sxs-lookup"><span data-stu-id="39863-195">To install the features, run the Add Roles and Features Wizard.</span></span>
6. <span data-ttu-id="39863-196">Installare e configurare i programmi e le applicazioni da pubblicare tramite RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="39863-196">Install and configure the programs and applications you want to publish through RemoteApp.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="39863-197">Installare il ruolo Host sessione Desktop remoto prima di installare le applicazioni in modo da garantire l'individuazione di problemi di compatibilità prima del caricamento dell'immagine in RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="39863-197">Install the RDSH role before installing applications to ensure that any issues with application compatibility are discovered before the image is uploaded to RemoteApp.</span></span>
> 
> <span data-ttu-id="39863-198">Assicurarsi che un collegamento all'applicazione (file **lnk**) venga visualizzato nel menu **Start** per tutti gli utenti (%systemdrive%\ProgramData\Microsoft\Windows\Start Menu\Programmi).</span><span class="sxs-lookup"><span data-stu-id="39863-198">Make sure a shortcut to your application (**.lnk** file) appears in the **Start** menu for all users (%systemdrive%\ProgramData\Microsoft\Windows\Start Menu\Programs).</span></span> <span data-ttu-id="39863-199">Assicurarsi inoltre che l'icona visualizzata nel menu **Start** sia quella che si vuole far visualizzare agli utenti.</span><span class="sxs-lookup"><span data-stu-id="39863-199">Also ensure that the icon you see in the **Start** menu is what you want users to see.</span></span> <span data-ttu-id="39863-200">In caso contrario, modificarla</span><span class="sxs-lookup"><span data-stu-id="39863-200">If not, change it.</span></span> <span data-ttu-id="39863-201">(non è *obbligatorio* aggiungere l'applicazione al menu Start, ma questo semplificherà notevolmente la pubblicazione dell'applicazione in RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="39863-201">(You do not *have* to add the application to the Start menu, but it makes it much easier to publish the application in RemoteApp.</span></span> <span data-ttu-id="39863-202">In caso contrario, sarà necessario fornire il percorso di installazione dell'applicazione al momento della pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="39863-202">Otherwise, you have to provide the installation path for the application when you publish the app.)</span></span>
> 
> 

1. <span data-ttu-id="39863-203">Eseguire eventuali configurazioni aggiuntive di Windows richieste dalle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="39863-203">Perform any additional Windows configurations required by your applications.</span></span>
2. <span data-ttu-id="39863-204">Disabilitare EFS (Encrypting File System).</span><span class="sxs-lookup"><span data-stu-id="39863-204">Disable the Encrypting File System (EFS).</span></span> <span data-ttu-id="39863-205">Eseguire il comando seguente a un prompt dei comandi con privilegi elevati:</span><span class="sxs-lookup"><span data-stu-id="39863-205">Run the following command at an elevated command window:</span></span>
   
     <span data-ttu-id="39863-206">Fsutil behavior set disableencryption 1</span><span class="sxs-lookup"><span data-stu-id="39863-206">Fsutil behavior set disableencryption 1</span></span>
   
   <span data-ttu-id="39863-207">In alternativa, è possibile impostare o aggiungere il seguente valore DWORD nel Registro di sistema:</span><span class="sxs-lookup"><span data-stu-id="39863-207">Alternatively, you can set or add the following DWORD value in the registry:</span></span>
   
     <span data-ttu-id="39863-208">HKLM\System\CurrentControlSet\Control\FileSystem\NtfsDisableEncryption = 1</span><span class="sxs-lookup"><span data-stu-id="39863-208">HKLM\System\CurrentControlSet\Control\FileSystem\NtfsDisableEncryption = 1</span></span>
3. <span data-ttu-id="39863-209">Se si intende creare l'immagine all'interno di una macchina virtuale di Azure, è necessario rinominare il file **\%windir%\Panther\Unattend.xml**, poiché impedisce l'esecuzione dello script di caricamento usato in seguito.</span><span class="sxs-lookup"><span data-stu-id="39863-209">If you are building your image inside an Azure virtual machine, rename the **\%windir%\Panther\Unattend.xml** file, as this will block the upload script used later from working.</span></span> <span data-ttu-id="39863-210">Cambiare il nome del file in Unattend.old, al fine di disporre del file in caso di ripristinare la distribuzione a uno fase precedente.</span><span class="sxs-lookup"><span data-stu-id="39863-210">Change the name of this file to Unattend.old so that you will still have the file in case you need to revert your deployment.</span></span>
4. <span data-ttu-id="39863-211">Andare a Windows Update e installare tutti gli aggiornamenti importanti.</span><span class="sxs-lookup"><span data-stu-id="39863-211">Go to Windows Update and install all important updates.</span></span> <span data-ttu-id="39863-212">Potrebbe essere necessario eseguire più volte Windows Update per ottenere tutti gli aggiornamenti</span><span class="sxs-lookup"><span data-stu-id="39863-212">You might need to run Windows Update multiple times to get all updates.</span></span> <span data-ttu-id="39863-213">(a volte un aggiornamento installato richiede a sua volta un aggiornamento).</span><span class="sxs-lookup"><span data-stu-id="39863-213">(Sometimes you install an update, and that update itself requires an update.)</span></span>
5. <span data-ttu-id="39863-214">Preparare l'immagine con SYSPREP.</span><span class="sxs-lookup"><span data-stu-id="39863-214">SYSPREP the image.</span></span> <span data-ttu-id="39863-215">Eseguire il comando seguente a un prompt dei comandi con privilegi elevati:</span><span class="sxs-lookup"><span data-stu-id="39863-215">At an elevated command prompt, run the following command:</span></span>
   
   <span data-ttu-id="39863-216">**C:\Windows\System32\sysprep\sysprep.exe /generalize /oobe /shutdown**</span><span class="sxs-lookup"><span data-stu-id="39863-216">**C:\Windows\System32\sysprep\sysprep.exe /generalize /oobe /shutdown**</span></span>
   
   <span data-ttu-id="39863-217">**Nota:** non usare l'opzione **/mode:vm** del comando SYSPREP anche se si tratta di una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="39863-217">**Note:** Do not use the **/mode:vm** switch of the SYSPREP command even though this is a virtual machine.</span></span>

## <a name="next-steps"></a><span data-ttu-id="39863-218">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="39863-218">Next steps</span></span>
<span data-ttu-id="39863-219">Ora che si dispone di un'immagine modello personalizzata, è necessario caricarla nelle propria raccolta di RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="39863-219">Now that you have your custom template image, you need to upload that image to your RemoteApp collection.</span></span> <span data-ttu-id="39863-220">Per creare la propria raccolta, consultare i seguenti articoli:</span><span class="sxs-lookup"><span data-stu-id="39863-220">Use the information in the following articles to create your collection:</span></span>

* [<span data-ttu-id="39863-221">Come creare una raccolta ibrida di RemoteApp</span><span class="sxs-lookup"><span data-stu-id="39863-221">How to create a hybrid collection of RemoteApp</span></span>](remoteapp-create-hybrid-deployment.md)
* [<span data-ttu-id="39863-222">Come creare una raccolta RemoteApp nel cloud</span><span class="sxs-lookup"><span data-stu-id="39863-222">How to create a cloud collection of RemoteApp</span></span>](remoteapp-create-cloud-deployment.md)

