---
title: Effettuare il provisioning dei pool di Azure Batch da immagini personalizzate | Microsoft Docs
description: "È possibile creare un pool di Batch da un'immagine personalizzata per effettuare il provisioning dei nodi di calcolo che contengono il software e i dati necessari per l'applicazione. Le immagini personalizzate sono uno strumento efficace per configurare i nodi di calcolo per l'esecuzione dei carichi di lavoro di Batch."
services: batch
author: tamram
manager: timlt
ms.service: batch
ms.topic: article
ms.date: 08/07/2017
ms.author: tamram
ms.openlocfilehash: 3d655766b4f2a5efb0c8c29ffa81a89f84b3e17c
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="use-a-custom-image-to-create-a-pool-of-virtual-machines"></a><span data-ttu-id="7eb2a-104">Usare un'immagine personalizzata per creare un pool di macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="7eb2a-104">Use a custom image to create a pool of virtual machines</span></span>

<span data-ttu-id="7eb2a-105">Quando si crea un pool di macchine virtuali in Azure Batch, è necessario specificare l'immagine di macchina virtuale (VM) che fornisce il sistema operativo per ogni nodo di calcolo nel pool.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-105">When you create a pool of virtual machines in Azure Batch, you specify a virtual machine (VM) image that provides the operating system for each compute node in the pool.</span></span> <span data-ttu-id="7eb2a-106">È possibile creare un pool di macchine virtuali usando un'immagine di Azure Marketplace oppure fornendo un'immagine di disco rigido virtuale personalizzata preparata.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-106">You can create a pool of virtual machines either by using an Azure Marketplace image, or by providing a custom VHD image that you have prepared.</span></span> <span data-ttu-id="7eb2a-107">Quando si fornisce un'immagine personalizzata, è possibile controllare il modo in cui viene configurato il sistema operativo al momento del provisioning di ogni nodo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-107">When you provide a custom image, you have control over how the operating system is configured at the time that each compute node is provisioned.</span></span> <span data-ttu-id="7eb2a-108">L'immagine personalizzata può includere anche applicazioni e dati di riferimento che diventano disponibili nel nodo di calcolo non appena viene effettuato il provisioning.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-108">Your custom image can also include applications and reference data that are available on the compute node as soon as it is provisioned.</span></span>

<span data-ttu-id="7eb2a-109">L'uso di un'immagine personalizzata permette di risparmiare tempo nel preparare i nodi di calcolo del pool per l'esecuzione del carico di lavoro di Batch.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-109">Using a custom image can save you time in getting your pool's compute nodes ready to run your Batch workload.</span></span> <span data-ttu-id="7eb2a-110">Benché sia sempre possibile usare un'immagine di Azure Marketplace e installare il software in ogni nodo di calcolo dopo averne effettuato il provisioning, questo approccio può rivelarsi meno efficiente rispetto all'uso di un'immagine personalizzata.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-110">While you can always use an Azure Marketplace image and install software on each compute node after it has been provisioned, this approach may be less efficient than using a custom image.</span></span> 

<span data-ttu-id="7eb2a-111">Tra i motivi per usare un'immagine personalizzata configurata per lo scenario è inclusa la necessità di:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-111">Some reasons to use a custom image that is configured for your scenario include needing to:</span></span>

- <span data-ttu-id="7eb2a-112">**Configurare il sistema operativo.** Le configurazioni speciali del sistema operativo possono essere eseguite sull'immagine personalizzata.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-112">**Configure the operating system (OS)** Any special configuration of the operating system can be performed on the custom image.</span></span> 
- <span data-ttu-id="7eb2a-113">**Installare applicazioni di grandi dimensioni.**</span><span class="sxs-lookup"><span data-stu-id="7eb2a-113">**Install large applications.**</span></span> <span data-ttu-id="7eb2a-114">L'installazione di applicazioni in un'immagine personalizzata è più efficiente che installarle in ogni nodo di calcolo dopo averne effettuato il provisioning.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-114">Installing applications on a custom image is more efficient than installing them on each compute node after it is provisioned.</span></span>
- <span data-ttu-id="7eb2a-115">**Copiare quantità significative di dati.**</span><span class="sxs-lookup"><span data-stu-id="7eb2a-115">**Copy significant amounts of data.**</span></span> <span data-ttu-id="7eb2a-116">Se i dati vengono copiati nell'immagine personalizzata, è necessario copiarli una sola volta, invece che in ogni nodo di calcolo, risparmiando tempo e larghezza di banda.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-116">If the data is copied to the custom image, it only needs to be copied once, rather than to each compute node, saving time and bandwidth.</span></span>
- <span data-ttu-id="7eb2a-117">**Riavviare la VM durante il processo di configurazione.**</span><span class="sxs-lookup"><span data-stu-id="7eb2a-117">**Reboot the VM during the setup process.**</span></span> <span data-ttu-id="7eb2a-118">Il riavvio della VM è un processo che può richiedere molto tempo, soprattutto se sono presenti più nodi di calcolo.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-118">Rebooting the VM can be a time-consuming process, especially if you have a number of compute nodes.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="7eb2a-119">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="7eb2a-119">Prerequisites</span></span>

- <span data-ttu-id="7eb2a-120">**Account Batch creato con la modalità di allocazione pool Sottoscrizione utente.**</span><span class="sxs-lookup"><span data-stu-id="7eb2a-120">**A Batch account created with the User Subscription pool allocation mode.**</span></span> <span data-ttu-id="7eb2a-121">Per usare un'immagine personalizzata per il provisioning di pool di macchine virtuali, creare l'account Batch con la [modalità di allocazione pool](batch-api-basics.md#pool-allocation-mode) Sottoscrizione utente.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-121">To use a custom image to provision Virtual Machine pools, create your Batch account with the User Subscription [pool allocation mode](batch-api-basics.md#pool-allocation-mode).</span></span> <span data-ttu-id="7eb2a-122">Con questa modalità, i pool di Batch vengono allocati nella sottoscrizione in cui si trova l'account.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-122">With this mode, Batch pools are allocated into the subscription where the account resides.</span></span> <span data-ttu-id="7eb2a-123">Per informazioni sull'impostazione della modalità di allocazione pool per la creazione di un account Batch, vedere la sezione [Account](batch-api-basics.md#account) in [Sviluppare soluzioni di calcolo parallele su larga scala con Batch](batch-api-basics.md).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-123">See the [Account](batch-api-basics.md#account) section in [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md) for information on setting the pool allocation mode when you create a Batch account.</span></span>

- <span data-ttu-id="7eb2a-124">Un **account di archiviazione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-124">**An Azure Storage account.**</span></span> <span data-ttu-id="7eb2a-125">Per creare un pool di macchine virtuali usando un'immagine personalizzata, è necessario un account di archiviazione di Azure standard per utilizzo generico nella stessa sottoscrizione e nella stessa area.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-125">To create a pool of virtual machines using a custom image, you need a standard, general-purpose Azure Storage account in the same subscription and region.</span></span> <span data-ttu-id="7eb2a-126">Se si crea un'immagine personalizzata da una VM di Azure, si copierà l'immagine nell'account di archiviazione in cui si trova il disco del sistema operativo della VM e non sarà necessario creare un account di archiviazione separato.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-126">If you create a custom image from an Azure VM, then you will copy the image to the storage account where the VM's OS disk resides, and you won't need to create a separate storage account.</span></span> 
    
## <a name="prepare-a-custom-image"></a><span data-ttu-id="7eb2a-127">Preparare un'immagine personalizzata</span><span class="sxs-lookup"><span data-stu-id="7eb2a-127">Prepare a custom image</span></span>

<span data-ttu-id="7eb2a-128">Per preparare un'immagine personalizzata da usare con Batch, è necessario generalizzare un'installazione esistente di Linux o Windows.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-128">To prepare a custom image for use with Batch, you must generalize an existing installation of Linux or Windows.</span></span> <span data-ttu-id="7eb2a-129">La generalizzazione di un'installazione del sistema operativo comporta la rimozione delle informazioni specifiche del computer.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-129">Generalizing an operating system installation removes machine-specific information.</span></span> <span data-ttu-id="7eb2a-130">Il risultato è un'immagine che può essere installata in altri computer o VM.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-130">The result is an image that can be installed on other computers or VMs.</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="7eb2a-131">Batch attualmente non supporta l'uso di immagini gestite di Azure per il provisioning di un pool.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-131">Batch does not currently support using Azure managed images to provision a pool.</span></span> <span data-ttu-id="7eb2a-132">L'immagine personalizzata usata per il provisioning di un pool deve essere archiviata in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-132">The custom image you use to provision a pool must be stored in Azure Storage.</span></span> 
>
> <span data-ttu-id="7eb2a-133">Durante la preparazione dell'immagine personalizzata, tenere presente i punti seguenti:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-133">When preparing your custom image, keep in mind the following points:</span></span>
> - <span data-ttu-id="7eb2a-134">Assicurarsi che l'immagine del sistema operativo di base usata per il provisioning dei pool di Batch non includa alcuna estensione di Azure preinstallata, ad esempio l'estensione Script personalizzato.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-134">Ensure that the base OS image you use to provision your Batch pools does not have any pre-installed Azure extensions, such as the Custom Script extension.</span></span> <span data-ttu-id="7eb2a-135">Se l'immagine contiene un'estensione preinstallata, è possibile che Azure rilevi problemi durante la distribuzione della VM.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-135">If the image contains a pre-installed extension, Azure may encounter problems deploying the VM.</span></span>
> - <span data-ttu-id="7eb2a-136">Assicurarsi che l'immagine del sistema operativo di base fornita usi l'unità temporanea predefinita, perché l'agente del nodo Batch prevede attualmente l'unità temporanea predefinita.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-136">Ensure that the base OS image you provide uses the default temp drive, as the Batch node agent currently expects the default temp drive.</span></span>
>
>

<span data-ttu-id="7eb2a-137">È possibile usare qualsiasi immagine Windows o Linux preparata esistente come immagine personalizzata.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-137">You can use any existing prepared Windows or Linux image as a custom image.</span></span> <span data-ttu-id="7eb2a-138">Per usare, ad esempio, un'immagine locale, caricare l'immagine in un account di archiviazione di Azure nella stessa sottoscrizione e nella stessa area dell'account Batch usando [AzCopy](../storage/storage-use-azcopy.md) o un altro strumento di caricamento.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-138">For example, if you wish to use a local image, then upload the image to an Azure Storage account that is in the same subscription and region as your Batch account using [AzCopy](../storage/storage-use-azcopy.md) or another upload tool.</span></span>

<span data-ttu-id="7eb2a-139">È anche possibile preparare un'immagine personalizzata da una VM di Azure nuova o esistente.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-139">You can also prepare a custom image from a new or existing Azure VM.</span></span> <span data-ttu-id="7eb2a-140">Se si crea una nuova VM, è possibile usare un'immagine di Azure Marketplace come immagine di base per l'immagine personalizzata e quindi personalizzarla.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-140">If you are creating a new VM, you can use an Azure Marketplace image as the base image for your custom image and then customize it.</span></span> <span data-ttu-id="7eb2a-141">Per personalizzare l'immagine di base, creare una VM di Azure e aggiungervi le applicazioni o i dati.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-141">To customize the base image, create an Azure VM and add your applications or data to it.</span></span> <span data-ttu-id="7eb2a-142">Generalizzare quindi la VM da usare come immagine personalizzata e salvarla in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-142">Then generalize the VM to serve as your custom image and save it to Azure Storage.</span></span> 

<span data-ttu-id="7eb2a-143">Per preparare un'immagine personalizzata da una VM di Azure, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-143">To prepare a custom image from an Azure VM, follow these steps:</span></span>

1. <span data-ttu-id="7eb2a-144">Creare una VM di Azure **non gestita** da un'immagine di Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-144">Create an **unmanaged** Azure VM from an Azure Marketplace image.</span></span> <span data-ttu-id="7eb2a-145">Azure Marketplace include immagini sia per [Windows](../virtual-machines/windows/quick-create-portal.md) che per [Linux](../virtual-machines/linux/quick-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-145">Azure Marketplace includes images for both [Windows](../virtual-machines/windows/quick-create-portal.md) and [Linux](../virtual-machines/linux/quick-create-portal.md).</span></span>
    
    <span data-ttu-id="7eb2a-146">Nel passaggio 3 del processo di creazione della VM selezionare **No** per l'opzione **Archiviazione: Usa il servizio Managed Disks**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-146">On step 3 of the VM creation process, make sure that you select **No** for **Storage: Use Managed Disks** option.</span></span> <span data-ttu-id="7eb2a-147">Prendere anche nota del nome dell'account di archiviazione per il disco del sistema operativo della VM, perché questo è anche l'account di archiviazione in cui Azure salverà l'immagine personalizzata:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-147">Also take note of the storage account name for the VM's OS disk, as this storage account is also where Azure will save your custom image:</span></span>

    ![Creare una VM non gestita e prendere nota del nome dell'account di archiviazione](media/batch-custom-images/vm-create-storage.png)
 
2. <span data-ttu-id="7eb2a-149">Completare il processo di creazione della VM e attendere che venga allocata da Azure.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-149">Complete the process of creating your VM, and wait for it to be allocated by Azure.</span></span> <span data-ttu-id="7eb2a-150">Ecco un'immagine che illustra una VM nel portale di Azure nello stato in corso di esecuzione:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-150">Here's an image that shows a VM in the Azure portal in the running state:</span></span>

    ![Creare una macchina virtuale da un'immagine del marketplace](media/batch-custom-images/vm-status-running.png)

3. <span data-ttu-id="7eb2a-152">Quando la VM è in esecuzione, connetterla tramite RDP (per Windows) o SSH (per Linux).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-152">Once the VM is running, connect to it via RDP (for Windows) or SSH (for Linux).</span></span> <span data-ttu-id="7eb2a-153">Installare il software necessario o copiare i dati desiderati e quindi generalizzare la VM.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-153">Install any necessary software or copy desired data, and then generalize the VM.</span></span> <span data-ttu-id="7eb2a-154">Seguire la procedura descritta in [Generalizzare la VM](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-154">Follow the steps described in [Generalize the VM](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized.md#generalize-the-vm).</span></span> 
   
4. <span data-ttu-id="7eb2a-155">Seguire la procedura descritta in [Accedere ad Azure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-155">Follow the steps to [Log in to Azure PowerShell](../virtual-machines/windows/sa-copy-generalized.md#log-in-to-azure-powershell).</span></span> <span data-ttu-id="7eb2a-156">Per installare Azure PowerShell, vedere [Panoramica di Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-156">To install Azure PowerShell, see [Overview of Azure PowerShell](https://docs.microsoft.com/powershell/azure/overview?view=azurermps-4.2.0).</span></span> 

5. <span data-ttu-id="7eb2a-157">Seguire quindi la procedura descritta in [Deallocare la VM e impostare lo stato generalizzato](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-157">Next, follow the steps to [Deallocate the VM and set the state to generalized](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/sa-copy-generalized#deallocate-the-vm-and-set-the-state-to-generalized).</span></span> 

    <span data-ttu-id="7eb2a-158">Nel portale di Azure si noti che la VM è deallocata:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-158">In the Azure portal, notice that the VM is deallocated:</span></span>

    ![Assicurarsi che la VM sia deallocata](media/batch-custom-images/vm-status-deallocated.png)

6.  <span data-ttu-id="7eb2a-160">Creare e salvare l'immagine della VM in Archiviazione di Azure usando il cmdlet di PowerShell [Save-AzureRmVMImage](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-160">Create and save the VM image to Azure Storage using the [Save-AzureRmVMImage](https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvmimage) PowerShell cmdlet.</span></span> <span data-ttu-id="7eb2a-161">Seguire le istruzioni descritte in [Creare l'immagine](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-161">Follow the instructions described in [Create the image](../virtual-machines/windows/sa-copy-generalized.md#create-the-image).</span></span>
    
    <span data-ttu-id="7eb2a-162">L'immagine della VM viene salvata nell'account di archiviazione di Azure creato quando è stata creata la VM, come illustrato nel passaggio 1 di questa procedura.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-162">The VM image is saved to the Azure Storage account created when the VM was created, as shown in step 1 of this procedure.</span></span> <span data-ttu-id="7eb2a-163">Il cmdlet Save-AzureRmVMImage salva l'immagine nel contenitore **system** in tale account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-163">the Save-AzureRmVMImage cmdlet saves the image to the **system** container in that storage account.</span></span> <span data-ttu-id="7eb2a-164">Il parametro `-DestinationContainername` assegna un nome a una directory virtuale nel contenitore **system**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-164">The `-DestinationContainername` parameter names a virtual directory within the **system** container.</span></span> <span data-ttu-id="7eb2a-165">Il parametro `-VHDNamePrefix` specifica un prefisso per il nome del BLOB.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-165">The `-VHDNamePrefix` parameter specifies a prefix for the blob name.</span></span> <span data-ttu-id="7eb2a-166">Questo prefisso viene aggiunto all'inizio del nome del BLOB con un trattino.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-166">This prefix is prepended to the blob name with a hyphen.</span></span> 

    <span data-ttu-id="7eb2a-167">Si supponga, ad esempio, di chiamare Save-AzureRmVMImage con i parametri seguenti:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-167">For example, suppose you call Save-AzureRmVMImage with the following parameters:</span></span>  

        Save-AzureRmVMImage -ResourceGroupName sample-resource-group -Name vm-custom-image -DestinationContainerName batchimages -VHDNamePrefix custom -Path C:\Temp\Images\vm-custom-image.json

    <span data-ttu-id="7eb2a-168">L'immagine risultante viene salvata nel percorso e con il nome di BLOB illustrati qui:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-168">The resulting image is saved to the location and blob name shown here:</span></span>

    ![Percorso del disco rigido virtuale salvato nel contenitore system](media/batch-custom-images/vhd-in-vm-storage-account.png)

    > [!NOTE]
    > <span data-ttu-id="7eb2a-170">Una VM non gestita di Azure crea più account di archiviazione per scopi diversi.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-170">An Azure unmanaged VM creates several storage accounts for different purposes.</span></span> <span data-ttu-id="7eb2a-171">Se non si è preso nota del nome del contenitore di archiviazione per il disco del sistema operativo quando è stata creata la VM, trovare l'account di archiviazione associato che include il contenitore **system**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-171">If you did not note the name of the storage container for the OS disk when the VM was created, then find the associated storage account that contains the **system** container.</span></span> <span data-ttu-id="7eb2a-172">Spostarsi nel contenitore **system** per trovare l'immagine personalizzata usando i valori specificati per il comando **Save-AzureRmVMImage**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-172">Navigate through the **system** container to find the custom image using the values you specified for the **Save-AzureRmVMImage** command.</span></span>

## <a name="create-a-pool-from-a-custom-image-in-the-portal"></a><span data-ttu-id="7eb2a-173">Per creare un pool da un'immagine personalizzata nel portale</span><span class="sxs-lookup"><span data-stu-id="7eb2a-173">Create a pool from a custom image in the portal</span></span>

<span data-ttu-id="7eb2a-174">Dopo avere salvato l'immagine personalizzata e conoscendone il percorso, è possibile creare un pool di Batch da tale immagine.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-174">Once you have saved your custom image and you know its location, you can create a Batch pool from that image.</span></span> <span data-ttu-id="7eb2a-175">Seguire questa procedura per creare un pool dal portale di Azure:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-175">Follow these steps to create a pool from the Azure portal:</span></span>

1. <span data-ttu-id="7eb2a-176">Passare all'account Batch nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-176">Navigate to your Batch account in the Azure portal.</span></span> <span data-ttu-id="7eb2a-177">Questo account deve trovarsi nella stessa area e nella stessa sottoscrizione dell'account di archiviazione contenente l'immagine personalizzata.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-177">This account must be in the same subscription and region as the storage account containing the custom image.</span></span> 
2. <span data-ttu-id="7eb2a-178">Nella finestra **Impostazioni** a sinistra scegliere la voce di menu **Pool**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-178">In the **Settings** window on the left, select the **Pools** menu item.</span></span>
3. <span data-ttu-id="7eb2a-179">Nella finestra **Pool** selezionare il comando **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-179">In the **Pools** window, select the **Add** command.</span></span>
4. <span data-ttu-id="7eb2a-180">Nella finestra **Aggiungi pool** selezionare **Immagine personalizzata (Linux/Windows)** nell'elenco a discesa **Tipo di immagine**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-180">On the **Add Pool** window, select **Custom Image (Linux/Windows)** from the **Image Type** dropdown.</span></span> <span data-ttu-id="7eb2a-181">Nel portale verrà visualizzato lo strumento di selezione **Immagine personalizzata**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-181">The portal displays the **Custom Image** picker.</span></span> <span data-ttu-id="7eb2a-182">Passare all'account di archiviazione in cui si trova l'immagine personalizzata e selezionare il disco rigido virtuale desiderato dal contenitore.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-182">Navigate to the storage account where your custom image is located, and select the desired VHD from the container.</span></span> 
5. <span data-ttu-id="7eb2a-183">Selezionare i valori corretti per il disco rigido virtuale in **Server di pubblicazione/Offerta/SKU**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-183">Select the correct **Publisher/Offer/Sku** for your custom VHD.</span></span>
6. <span data-ttu-id="7eb2a-184">Specificare le rimanenti impostazioni obbligatorie, incluse **Dimensioni nodo**, **Nodi dedicati target** e **Nodi per priorità bassa**, oltre alle impostazioni facoltative desiderate.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-184">Specify the remaining required settings, including the **Node size**, **Target dedicated nodes**, and **Low priority nodes**, as well as any desired optional settings.</span></span>

    <span data-ttu-id="7eb2a-185">Per un'immagine personalizzata di Microsoft Windows Server Datacenter 2016, ad esempio, la finestra **Aggiungi pool** viene visualizzata come illustrato qui:</span><span class="sxs-lookup"><span data-stu-id="7eb2a-185">For example, for a Microsoft Windows Server Datacenter 2016 custom image, the **Add Pool** window appears as shown here:</span></span>

    ![Aggiungere un pool da un'immagine di Windows personalizzata](media/batch-custom-images/add-pool-custom-image.png)
  
<span data-ttu-id="7eb2a-187">Per verificare se un pool esistente è basato su un'immagine personalizzata, vedere la proprietà **Sistema operativo** nella sezione di riepilogo delle risorse della finestra **Pool**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-187">To check whether an existing pool is based on a custom image, see the **Operating System** property in the resource summary section of the **Pool** window.</span></span> <span data-ttu-id="7eb2a-188">Se il pool è stato creato da un'immagine personalizzata, viene impostato su **Immagine di macchina virtuale personalizzata**.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-188">If the pool was created from a custom image, it is set to **Custom VM Image**.</span></span>

<span data-ttu-id="7eb2a-189">Tutti i dischi rigidi virtuali personalizzati associati a un pool vengono visualizzati nella finestra **Proprietà** del pool.</span><span class="sxs-lookup"><span data-stu-id="7eb2a-189">All custom VHDs associated with a pool are displayed on the pool's **Properties** window.</span></span>
 
## <a name="next-steps"></a><span data-ttu-id="7eb2a-190">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="7eb2a-190">Next steps</span></span>

- <span data-ttu-id="7eb2a-191">Per una panoramica dettagliata di Batch, vedere [Sviluppare soluzioni di calcolo parallele su larga scala con Batch](batch-api-basics.md).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-191">For an in-depth overview of Batch, see [Develop large-scale parallel compute solutions with Batch](batch-api-basics.md).</span></span>
- <span data-ttu-id="7eb2a-192">Per informazioni sulla creazione di un account Batch, vedere [Creare un account Batch nel portale di Azure](batch-account-create-portal.md).</span><span class="sxs-lookup"><span data-stu-id="7eb2a-192">For information about creating a Batch account, see [Create a Batch account with the Azure portal](batch-account-create-portal.md).</span></span>