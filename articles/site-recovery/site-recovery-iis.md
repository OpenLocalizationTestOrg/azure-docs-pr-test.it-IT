---
title: Eseguire la replica di un'applicazione Web multilivello basata su IIS usando Azure Site Recovery | Microsoft Docs
description: Questo articolo illustra come eseguire la replica di macchine virtuali della Web farm IIS usando Azure Site Recovery.
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 4ac79df703de00ac009d9845772d8be740e74f29
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="74b1e-103">Eseguire la replica di un'applicazione Web multilivello basata su IIS usando Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="74b1e-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="74b1e-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="74b1e-104">Overview</span></span>


<span data-ttu-id="74b1e-105">Il software applicativo è il motore della produttività aziendale di un'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="74b1e-105">Application software is the engine of business productivity in an organization.</span></span> <span data-ttu-id="74b1e-106">Le diverse applicazioni Web possono essere usate per scopi diversi in un'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="74b1e-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="74b1e-107">Alcune di queste, come le applicazioni per l'elaborazione delle retribuzioni, le applicazioni finanziarie e i siti Web rivolti ai clienti possono essere fondamentali.</span><span class="sxs-lookup"><span data-stu-id="74b1e-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="74b1e-108">Per l'organizzazione è importante che queste applicazioni siano sempre operative per prevenire la perdita di produttività e, aspetto ancora più importante, evitare eventuali danni all'immagine del marchio.</span><span class="sxs-lookup"><span data-stu-id="74b1e-108">It will be important for the organization to have them up and running at all times to prevent loss of productivity and more importantly prevent any damage to the brand image of the organization.</span></span>

<span data-ttu-id="74b1e-109">Le applicazioni Web critiche vengono in genere configurate come applicazioni multilivello, con il Web, il database e l'applicazione in livelli diversi.</span><span class="sxs-lookup"><span data-stu-id="74b1e-109">Critical web applications are typically set up as multi-tier applications with the web, database and application on different tiers.</span></span> <span data-ttu-id="74b1e-110">Oltre a essere distribuite in vari livelli, le applicazioni possono usare più server in ogni livello per bilanciare il carico del traffico.</span><span class="sxs-lookup"><span data-stu-id="74b1e-110">Apart from being spread across various tiers, the applications may also be using multiple servers in each tier to load balance the traffic.</span></span> <span data-ttu-id="74b1e-111">I mapping tra i vari livelli e nel server Web possono essere basati su indirizzi IP statici.</span><span class="sxs-lookup"><span data-stu-id="74b1e-111">Moreover, the mappings between various tiers and on the web server may be based on static IP addresses.</span></span> <span data-ttu-id="74b1e-112">In caso di failover, alcuni di questi mapping dovranno essere aggiornati, in particolare se sono stati configurati più siti Web nel server Web.</span><span class="sxs-lookup"><span data-stu-id="74b1e-112">On failover, some of these mappings will need to be updated, especially, if you have multiple websites configured on the web server.</span></span> <span data-ttu-id="74b1e-113">Nel caso di applicazioni Web che usano SSL sarà necessario aggiornare le associazioni dei certificati.</span><span class="sxs-lookup"><span data-stu-id="74b1e-113">In case of web applications using SSL, certificate bindings will need to be updated.</span></span>

<span data-ttu-id="74b1e-114">I metodi di ripristino di base tradizionali senza replica prevedono il backup di diversi file di configurazione, impostazioni del registro, binding, componenti personalizzati (COM o .NET), contenuti e certificati, con il recupero dei file tramite una serie di passaggi manuali.</span><span class="sxs-lookup"><span data-stu-id="74b1e-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering the files through a set of manual steps.</span></span> <span data-ttu-id="74b1e-115">Queste tecniche sono chiaramente complesse, soggette a errori e non scalabili.</span><span class="sxs-lookup"><span data-stu-id="74b1e-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="74b1e-116">È ad esempio facile dimenticare di eseguire il backup dei certificati e dover quindi necessariamente acquistare nuovi certificati per il server dopo il failover.</span><span class="sxs-lookup"><span data-stu-id="74b1e-116">It is, for example, easily possible for you to forget backing up certificates and be left with no choice but to buy new certificates for the server after failover.</span></span>

<span data-ttu-id="74b1e-117">Una soluzione di ripristino di emergenza valida deve consentire la modellazione dei piani di ripristino per le architetture di applicazioni complesse descritte in precedenza e consentire anche l'aggiunta di passaggi personalizzati per gestire i mapping delle applicazioni tra i vari livelli, fornendo una soluzione rapida e sicura in caso di emergenza, con un RTO inferiore.</span><span class="sxs-lookup"><span data-stu-id="74b1e-117">A good disaster recovery solution, should allow modeling of recovery plans around the above complex application architectures and also have the ability to add customized steps to handle application mappings between various tiers hence providing a single-click sure shot solution in the event of a disaster leading to a lower RTO.</span></span>


<span data-ttu-id="74b1e-118">Questo articolo descrive come proteggere un'applicazione Web basata su IIS con [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="74b1e-118">This article describes how to protect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="74b1e-119">Questo articolo illustra le procedure consigliate per la replica di un'applicazione Web a tre livelli basata su IIS in Azure, come eseguire un'analisi di ripristino di emergenza e come eseguire il failover dell'applicazione in Azure.</span><span class="sxs-lookup"><span data-stu-id="74b1e-119">This article will cover best practices for replicating a three tier IIS based web application to Azure, how you can do a disaster recovery drill, and how you can failover the application to Azure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="74b1e-120">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="74b1e-120">Prerequisites</span></span>

<span data-ttu-id="74b1e-121">Prima di iniziare, è necessario comprendere i concetti illustrati di seguito:</span><span class="sxs-lookup"><span data-stu-id="74b1e-121">Before you start, make sure you understand the following:</span></span>

1. [<span data-ttu-id="74b1e-122">Replica di una macchina virtuale in Azure</span><span class="sxs-lookup"><span data-stu-id="74b1e-122">Replicating a virtual machine to Azure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="74b1e-123">Come [progettare una rete di ripristino](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="74b1e-123">How to [design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="74b1e-124">Esecuzione di un failover di test in Azure</span><span class="sxs-lookup"><span data-stu-id="74b1e-124">Doing a test failover to Azure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="74b1e-125">Esecuzione di un failover in Azure</span><span class="sxs-lookup"><span data-stu-id="74b1e-125">Doing a failover to Azure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="74b1e-126">Come [replicare un controller di dominio](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="74b1e-126">How to [replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="74b1e-127">Come [replicare SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="74b1e-127">How to [replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="74b1e-128">Modelli di distribuzione</span><span class="sxs-lookup"><span data-stu-id="74b1e-128">Deployment patterns</span></span>
<span data-ttu-id="74b1e-129">Un'applicazione Web basata su IIS segue in genere uno dei modelli di distribuzione seguenti:</span><span class="sxs-lookup"><span data-stu-id="74b1e-129">An IIS based web application typically follows one of the following deployment patterns:</span></span>

<span data-ttu-id="74b1e-130">**Modello di distribuzione 1 ** Web farm basata su IIS con Application Request Routing (ARR), server IIS e Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="74b1e-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Modello di distribuzione](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="74b1e-132">**Modello di distribuzione 2** Web farm basata su IIS con Application Request Routing (ARR), server IIS, server applicazioni e Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="74b1e-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Modello di distribuzione](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="74b1e-134">Supporto di Site Recovery</span><span class="sxs-lookup"><span data-stu-id="74b1e-134">Site Recovery support</span></span>

<span data-ttu-id="74b1e-135">Ai fini di questo articolo sono state usate macchine virtuali VMware con server IIS versione 7.5 in Windows Server 2012 R2 Enterprise.</span><span class="sxs-lookup"><span data-stu-id="74b1e-135">For the purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="74b1e-136">La replica di Site Recovery è indipendente dall'applicazione, quindi si prevede che le indicazioni fornite in questo articolo funzionino anche per gli scenari seguenti e per versioni diverse di IIS.</span><span class="sxs-lookup"><span data-stu-id="74b1e-136">As site recovery replication is application agnostic, the recommendations provided here are expected to hold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="74b1e-137">Origine e destinazione</span><span class="sxs-lookup"><span data-stu-id="74b1e-137">Source and target</span></span>

<span data-ttu-id="74b1e-138">**Scenario**</span><span class="sxs-lookup"><span data-stu-id="74b1e-138">**Scenario**</span></span> | <span data-ttu-id="74b1e-139">**In un sito secondario**</span><span class="sxs-lookup"><span data-stu-id="74b1e-139">**To a secondary site**</span></span> | <span data-ttu-id="74b1e-140">**In Azure**</span><span class="sxs-lookup"><span data-stu-id="74b1e-140">**To Azure**</span></span>
--- | --- | ---
<span data-ttu-id="74b1e-141">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="74b1e-141">**Hyper-V**</span></span> | <span data-ttu-id="74b1e-142">Sì</span><span class="sxs-lookup"><span data-stu-id="74b1e-142">Yes</span></span> | <span data-ttu-id="74b1e-143">Sì</span><span class="sxs-lookup"><span data-stu-id="74b1e-143">Yes</span></span>
<span data-ttu-id="74b1e-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="74b1e-144">**VMware**</span></span> | <span data-ttu-id="74b1e-145">Sì</span><span class="sxs-lookup"><span data-stu-id="74b1e-145">Yes</span></span> | <span data-ttu-id="74b1e-146">Sì</span><span class="sxs-lookup"><span data-stu-id="74b1e-146">Yes</span></span>
<span data-ttu-id="74b1e-147">**Server fisico**</span><span class="sxs-lookup"><span data-stu-id="74b1e-147">**Physical server**</span></span> | <span data-ttu-id="74b1e-148">No</span><span class="sxs-lookup"><span data-stu-id="74b1e-148">No</span></span> | <span data-ttu-id="74b1e-149">Sì</span><span class="sxs-lookup"><span data-stu-id="74b1e-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="74b1e-150">Replicare le macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="74b1e-150">Replicate virtual machines</span></span>

<span data-ttu-id="74b1e-151">Seguire [queste linee guida](site-recovery-vmware-to-azure.md) per avviare la replica di tutte le macchine virtuali della Web farm IIS in Azure.</span><span class="sxs-lookup"><span data-stu-id="74b1e-151">Follow [this guidance](site-recovery-vmware-to-azure.md) to start replicating all the IIS web farm virtual machines to Azure.</span></span>

<span data-ttu-id="74b1e-152">Se si usa un indirizzo IP statico, specificare l'indirizzo IP che la macchina virtuale dovrà usare nell'impostazione [**IP di destinazione**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) di Calcolo e rete.</span><span class="sxs-lookup"><span data-stu-id="74b1e-152">If you are using a static IP then specify the IP that you want the virtual machine to take in the [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![IP di destinazione](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="74b1e-154">Creazione di un piano di ripristino</span><span class="sxs-lookup"><span data-stu-id="74b1e-154">Creating a recovery plan</span></span>

<span data-ttu-id="74b1e-155">Un piano di ripristino consente di definire la sequenza di failover di vari livelli in un'applicazione multilivello, conservando la coerenza dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="74b1e-155">A recovery plan allows sequencing the failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="74b1e-156">Seguire questa procedura durante la creazione di un piano di ripristino per un'applicazione Web multilivello.</span><span class="sxs-lookup"><span data-stu-id="74b1e-156">Follow the below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="74b1e-157">[Altre informazioni sulla creazione di un piano di ripristino](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="74b1e-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-to-failover-groups"></a><span data-ttu-id="74b1e-158">Aggiunta di macchine virtuali a gruppi di failover</span><span class="sxs-lookup"><span data-stu-id="74b1e-158">Adding virtual machines to failover groups</span></span>
<span data-ttu-id="74b1e-159">Una tipica applicazione Web IIS multilivello è costituita da un livello di database con le macchine virtuali SQL, il livello Web costituito da un server IIS e un livello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="74b1e-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, the web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="74b1e-160">Aggiungere tutte queste macchine virtuali a gruppi differenti in base al livello come descritto di seguito.</span><span class="sxs-lookup"><span data-stu-id="74b1e-160">Add all these virtual machines to different group based on tier as below.</span></span> <span data-ttu-id="74b1e-161">[Altre informazioni sulla personalizzazione dei piani di ripristino](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="74b1e-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="74b1e-162">Creare un piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="74b1e-162">Create a recovery plan.</span></span> <span data-ttu-id="74b1e-163">Aggiungere le macchine virtuali del livello database nel gruppo 1 in modo che vengano arrestate per ultime e aperte per prime.</span><span class="sxs-lookup"><span data-stu-id="74b1e-163">Add the database tier virtual machines under Group 1 to ensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="74b1e-164">Aggiungere le macchine virtuali del livello applicazione nel gruppo 2 in modo che vengano aperte dopo l'apertura del livello database.</span><span class="sxs-lookup"><span data-stu-id="74b1e-164">Add the application tier virtual machines under Group 2 such that they are brought up after the database tier has been brought up.</span></span>

1. <span data-ttu-id="74b1e-165">Aggiungere le macchine virtuali del livello Web nel gruppo 3 in modo che vengano aperte dopo l'apertura del livello applicazione.</span><span class="sxs-lookup"><span data-stu-id="74b1e-165">Add the web tier virtual machines in Group 3 such that they are brought up after the application tier has been brought up.</span></span>

1. <span data-ttu-id="74b1e-166">Aggiungere le macchine virtuali di bilanciamento del carico nel gruppo 4 in modo che vengano aperte dopo l'apertura del livello Web.</span><span class="sxs-lookup"><span data-stu-id="74b1e-166">Add load balance virtual machines in Group 4 such that they are brought up after the web tier has been brought up.</span></span>


### <a name="adding-scripts-to-the-recovery-plan"></a><span data-ttu-id="74b1e-167">Aggiunta di script al piano di ripristino</span><span class="sxs-lookup"><span data-stu-id="74b1e-167">Adding scripts to the recovery plan</span></span>
<span data-ttu-id="74b1e-168">Potrebbe essere necessario eseguire alcune operazioni nelle macchine virtuali di Azure dopo il failover o il failover di test per far sì che la Web farm IIS funzioni correttamente.</span><span class="sxs-lookup"><span data-stu-id="74b1e-168">You may need to do some operations on the Azure virtual machines post failover/Test failover to make IIS web farm function correctly.</span></span> <span data-ttu-id="74b1e-169">È possibile automatizzare le operazioni dopo il failover come l'aggiornamento della voce DNS e la modifica del binding del sito e della stringa di connessione aggiungendo script corrispondenti nel piano di ripristino come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="74b1e-169">You can automate the post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in the recovery plan as below.</span></span> <span data-ttu-id="74b1e-170">[Altre informazioni sull'aggiunta di script al piano di ripristino](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="74b1e-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="74b1e-171">Aggiornamento del DNS</span><span class="sxs-lookup"><span data-stu-id="74b1e-171">DNS Update</span></span>
<span data-ttu-id="74b1e-172">Se il DNS è configurato per l'aggiornamento dinamico, le macchine virtuali aggiornano in genere il DNS con il nuovo indirizzo IP all'avvio.</span><span class="sxs-lookup"><span data-stu-id="74b1e-172">If the DNS is configured for dynamic DNS update then virtual machines usually update the DNS with the new IP once they start.</span></span> <span data-ttu-id="74b1e-173">Se si vuole aggiungere un passaggio esplicito per l'aggiornamento del DNS con i nuovi indirizzi IP delle macchine virtuali, aggiungere questo [script per l'aggiornamento degli indirizzi IP nel DNS](https://aka.ms/asr-dns-update) come post-azione nei gruppi del piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="74b1e-173">If you want to add an explicit step to update DNS with the new IPs of the virtual machines then add this [script to update IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="74b1e-174">Stringa di connessione nel file web.config di un'applicazione</span><span class="sxs-lookup"><span data-stu-id="74b1e-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="74b1e-175">La stringa di connessione specifica il database con cui comunica il sito Web.</span><span class="sxs-lookup"><span data-stu-id="74b1e-175">The connection string specifies the database that the web site communicates with.</span></span>

<span data-ttu-id="74b1e-176">Se la stringa di connessione contiene il nome della macchina virtuale del database, non saranno necessari altri passaggi dopo il failover e l'applicazione potrà comunicare automaticamente con il database.</span><span class="sxs-lookup"><span data-stu-id="74b1e-176">If the connection string carries the name of the database virtual machine, no further steps will be needed post failover and the application will be able to automatically communicate to the DB.</span></span> <span data-ttu-id="74b1e-177">Se l'indirizzo IP della macchina virtuale del database viene conservato, non sarà necessario aggiornare la stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="74b1e-177">Also, if the IP address for the database virtual machine is retained, it will not be needed to update the connection string.</span></span> <span data-ttu-id="74b1e-178">Se la stringa di connessione fa riferimento alla macchina virtuale del database usando un indirizzo IP, dovrà essere aggiornata dopo il failover.</span><span class="sxs-lookup"><span data-stu-id="74b1e-178">If the connection string refers to the database virtual machine using an IP address, it will need to be updated post failover.</span></span> <span data-ttu-id="74b1e-179">Ad esempio,</span><span class="sxs-lookup"><span data-stu-id="74b1e-179">E.g.</span></span> <span data-ttu-id="74b1e-180">la stringa di connessione seguente punta al database con l'indirizzo IP 127.0.1.2</span><span class="sxs-lookup"><span data-stu-id="74b1e-180">the below connection string points to the DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="74b1e-181">È possibile aggiornare la stringa di connessione nel livello Web aggiungendo lo [script di aggiornamento della connessione IIS](https://aka.ms/asr-update-webtier-script-classic) dopo il gruppo 3 nel piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="74b1e-181">You can update the connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in the recovery plan.</span></span>

#### <a name="site-bindings-for-the-application"></a><span data-ttu-id="74b1e-182">Binding del sito per l'applicazione</span><span class="sxs-lookup"><span data-stu-id="74b1e-182">Site bindings for the application</span></span>
<span data-ttu-id="74b1e-183">Ogni sito è costituito da informazioni che includono il tipo di binding, l'indirizzo IP in cui il server IIS ascolta le richieste per il sito, il numero di porta e i nomi host per il sito.</span><span class="sxs-lookup"><span data-stu-id="74b1e-183">Every site consists of binding information that includes the type of binding, the IP address at which the IIS server listens to the requests for the site, the port number and the host names for the site.</span></span> <span data-ttu-id="74b1e-184">Al momento di un failover potrebbe essere necessario aggiornare questi binding se viene apportata una modifica all'indirizzo IP associato.</span><span class="sxs-lookup"><span data-stu-id="74b1e-184">At the time of a failover, these bindings might need to be updated if there is a change in the IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="74b1e-185">Se è stato selezionato "Non assegnati" per il binding del sito come nell'esempio seguente, non è necessario aggiornare questo binding dopo il failover.</span><span class="sxs-lookup"><span data-stu-id="74b1e-185">If you have marked ‘all unassigned’ for the site binding as in the example below, you will not need to update this binding post failover.</span></span> <span data-ttu-id="74b1e-186">Se l'indirizzo IP associato a un sito non viene modificato dopo il failover, non è necessario aggiornare il binding del sito. La conservazione dell'indirizzo IP dipende dall'architettura di rete e dalle subnet assegnate ai siti primari e di ripristino e potrebbe quindi non essere fattibile per l'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="74b1e-186">Also, if the IP address associated with a site is not changed post failover, the site binding need not be updated (Retention of the IP address depends on the network architecture and subnets assigned to the primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![Binding SSL](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="74b1e-188">Se è stato associato l'indirizzo IP a un sito, è necessario aggiornare tutti i binding del sito con il nuovo indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="74b1e-188">If you have associated the IP address with a site, you will need to update all site bindings with the new IP address.</span></span> <span data-ttu-id="74b1e-189">È possibile aggiungere lo [script di aggiornamento del livello Web IIS](https://aka.ms/asr-web-tier-update-runbook-classic) dopo il gruppo 3 nel piano di ripristino per modificare i binding del sito.</span><span class="sxs-lookup"><span data-stu-id="74b1e-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan to change the site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="74b1e-190">Aggiornare l'indirizzo IP del servizio di bilanciamento del carico</span><span class="sxs-lookup"><span data-stu-id="74b1e-190">Update load balancer IP address</span></span>
<span data-ttu-id="74b1e-191">Se è presente una macchina virtuale Application Request Routing, aggiungere lo [script di failover ARR IIS](https://aka.ms/asr-iis-arrtier-failover-script-classic) dopo il gruppo 4 per aggiornare l'indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="74b1e-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 to update the IP address.</span></span>

#### <a name="the-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="74b1e-192">Associazione di certificati SSL per una connessione HTTPS</span><span class="sxs-lookup"><span data-stu-id="74b1e-192">The SSL cert binding for an https connection</span></span>
<span data-ttu-id="74b1e-193">I siti Web possono avere un certificato SSL associato che consente una comunicazione sicura tra il server Web e il browser dell'utente.</span><span class="sxs-lookup"><span data-stu-id="74b1e-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between the webserver and the user’s browser.</span></span> <span data-ttu-id="74b1e-194">Se il sito Web ha una connessione HTTPS e un binding HTTPS del sito per l'indirizzo IP del server IIS con un'associazione di certificati SSL, sarà necessario aggiungere un nuovo binding del sito per il certificato con l'indirizzo IP della macchina virtuale IIS dopo il failover.</span><span class="sxs-lookup"><span data-stu-id="74b1e-194">If the website has an https connection and an associated https site binding to the IP address of the IIS server with an SSL cert binding, a new site binding will need to be added for the cert with the IP of the IIS virtual machine post failover.</span></span>

<span data-ttu-id="74b1e-195">Il certificato SSL può essere emesso per</span><span class="sxs-lookup"><span data-stu-id="74b1e-195">The SSL cert can be issued against-</span></span>

<span data-ttu-id="74b1e-196">a) Il nome di dominio completo del sito Web</span><span class="sxs-lookup"><span data-stu-id="74b1e-196">a) The fully qualified domain name of the website</span></span><br>
<span data-ttu-id="74b1e-197">b) Il nome del server</span><span class="sxs-lookup"><span data-stu-id="74b1e-197">b) The name of the server</span></span><br>
<span data-ttu-id="74b1e-198">c) Un certificato con caratteri jolly per il nome di dominio</span><span class="sxs-lookup"><span data-stu-id="74b1e-198">c) A wildcard certificate for the domain name</span></span><br>
<span data-ttu-id="74b1e-199">d) Un indirizzo IP. Se il certificato SSL viene emesso per l'indirizzo IP del server IIS, sarà necessario emettere un altro certificato SSL per l'indirizzo IP del server IIS nel sito di Azure e sarà necessario creare un'altra associazione SSL per questo certificato.</span><span class="sxs-lookup"><span data-stu-id="74b1e-199">d) An IP address – If the SSL cert is issued against the IP of the IIS server, another SSL cert needs to be issued against the IP address of the IIS server on the Azure site and an additional SSL binding for this certificate will need to be created.</span></span> <span data-ttu-id="74b1e-200">È quindi consigliabile non usare un certificato SSL emesso per un indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="74b1e-200">Hence, it is advisable to not use an SSL cert issued against IP.</span></span> <span data-ttu-id="74b1e-201">Si tratta di un'opzione meno usata e verrà presto deprecata in base alle nuove modifiche di CA/Browser Forum.</span><span class="sxs-lookup"><span data-stu-id="74b1e-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-the-dependency-between-the-web-and-the-application-tier"></a><span data-ttu-id="74b1e-202">Aggiornare la dipendenza tra il livello Web e il livello applicazione</span><span class="sxs-lookup"><span data-stu-id="74b1e-202">Update the dependency between the web and the application tier</span></span>
<span data-ttu-id="74b1e-203">Se è presente una dipendenza specifica dell'applicazione basata sull'indirizzo IP delle macchine virtuali, è necessario aggiornare questa dipendenza dopo il failover.</span><span class="sxs-lookup"><span data-stu-id="74b1e-203">If you have an application specific dependency based on the IP address of the virtual machines, you need to update this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="74b1e-204">Esecuzione di un failover di test</span><span class="sxs-lookup"><span data-stu-id="74b1e-204">Doing a test failover</span></span>
<span data-ttu-id="74b1e-205">Seguire [queste linee guida](site-recovery-test-failover-to-azure.md) per eseguire un failover di test.</span><span class="sxs-lookup"><span data-stu-id="74b1e-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) to do a test failover.</span></span>

1.  <span data-ttu-id="74b1e-206">Accedere al portale di Azure e selezionare l'insieme di credenziali di Servizi di ripristino.</span><span class="sxs-lookup"><span data-stu-id="74b1e-206">Go to Azure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="74b1e-207">Fare clic sul piano di ripristino creato per la Web farm IIS.</span><span class="sxs-lookup"><span data-stu-id="74b1e-207">Click on the recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="74b1e-208">Fare clic su 'Failover di test'.</span><span class="sxs-lookup"><span data-stu-id="74b1e-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="74b1e-209">Selezionare il punto di recupero e la rete virtuale di Azure per avviare il processo di failover di test.</span><span class="sxs-lookup"><span data-stu-id="74b1e-209">Select recovery point and Azure virtual network to start the test failover process.</span></span>
1.  <span data-ttu-id="74b1e-210">Quando l'ambiente secondario è disponibile, è possibile eseguire le convalide.</span><span class="sxs-lookup"><span data-stu-id="74b1e-210">Once the secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="74b1e-211">Al termine delle convalide è possibile selezionare 'Convalide complete' per pulire l'ambiente di failover di test.</span><span class="sxs-lookup"><span data-stu-id="74b1e-211">Once the validations are complete, you can select ‘Validations complete’ and the test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="74b1e-212">Esecuzione di un failover</span><span class="sxs-lookup"><span data-stu-id="74b1e-212">Doing a failover</span></span>
<span data-ttu-id="74b1e-213">Seguire [queste linee guida](site-recovery-failover.md) quando si esegue un failover.</span><span class="sxs-lookup"><span data-stu-id="74b1e-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="74b1e-214">Accedere al portale di Azure e selezionare l'insieme di credenziali di Servizi di ripristino.</span><span class="sxs-lookup"><span data-stu-id="74b1e-214">Go to Azure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="74b1e-215">Fare clic sul piano di ripristino creato per la Web farm IIS.</span><span class="sxs-lookup"><span data-stu-id="74b1e-215">Click on the recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="74b1e-216">Fare clic su 'Failover'.</span><span class="sxs-lookup"><span data-stu-id="74b1e-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="74b1e-217">Selezionare il punto di recupero per avviare il processo di failover.</span><span class="sxs-lookup"><span data-stu-id="74b1e-217">Select recovery point to start the failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="74b1e-218">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="74b1e-218">Next steps</span></span>
<span data-ttu-id="74b1e-219">Altre informazioni sulla [replica di altre applicazioni](site-recovery-workload.md) con Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="74b1e-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>
