---
title: aaaSecurity considerazioni per il Proxy di applicazione Azure AD | Documenti Microsoft
description: Tratta considerazioni relative alla sicurezza quando si usa il proxy applicazione di Azure AD
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: ebd14b9d1fc8f4629c5916e5a910595727d935d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-accessing-apps-remotely-with-azure-ad-application-proxy"></a><span data-ttu-id="b6451-103">Considerazioni relative alla sicurezza quando si accede alle app in remoto usando il proxy applicazione di Azure AD</span><span class="sxs-lookup"><span data-stu-id="b6451-103">Security considerations for accessing apps remotely with Azure AD Application Proxy</span></span>

<span data-ttu-id="b6451-104">Questo articolo spiega come il proxy di applicazione di Azure Active Directory fornisca un servizio sicuro per la pubblicazione e l'accesso alle applicazioni in remoto.</span><span class="sxs-lookup"><span data-stu-id="b6451-104">This article explains how Azure Active Directory Application Proxy provides a secure service for publishing and accessing your applications remotely.</span></span>

<span data-ttu-id="b6451-105">Hello seguente diagramma illustra come Azure AD consente alle applicazioni locali di tooyour di accesso remoto sicuro.</span><span class="sxs-lookup"><span data-stu-id="b6451-105">hello following diagram shows how Azure AD enables secure remote access tooyour on-premises applications.</span></span>

 ![Diagramma dell'accesso remoto sicuro con il proxy applicazione di Azure AD](./media/application-proxy-security-considerations/secure-remote-access.png)

## <a name="security-benefits"></a><span data-ttu-id="b6451-107">Vantaggi di sicurezza</span><span class="sxs-lookup"><span data-stu-id="b6451-107">Security benefits</span></span>

<span data-ttu-id="b6451-108">Proxy dell'applicazione Azure AD offre hello vantaggi di sicurezza seguenti:</span><span class="sxs-lookup"><span data-stu-id="b6451-108">Azure AD Application Proxy offers hello following security benefits:</span></span>

### <a name="authenticated-access"></a><span data-ttu-id="b6451-109">Accesso autenticato</span><span class="sxs-lookup"><span data-stu-id="b6451-109">Authenticated access</span></span> 

<span data-ttu-id="b6451-110">Se si sceglie toouse Azure Active Directory la preautenticazione, solo le connessioni autenticate possono accedere alla rete.</span><span class="sxs-lookup"><span data-stu-id="b6451-110">If you choose toouse Azure Active Directory preauthentication, then only authenticated connections can access your network.</span></span>

<span data-ttu-id="b6451-111">Proxy dell'applicazione Azure Active Directory si basa su hello Azure AD servizio token di sicurezza (STS) per tutte le autenticazioni.</span><span class="sxs-lookup"><span data-stu-id="b6451-111">Azure AD Application Proxy relies on hello Azure AD security token service (STS) for all authentication.</span></span>  <span data-ttu-id="b6451-112">La preautenticazione, per sua stessa natura, impedisce a un numero significativo di attacchi di tipo anonimi, poiché solo identità autenticate possono accedere a un'applicazione hello back-end.</span><span class="sxs-lookup"><span data-stu-id="b6451-112">Preauthentication, by its very nature, blocks a significant number of anonymous attacks, because only authenticated identities can access hello back-end application.</span></span>

<span data-ttu-id="b6451-113">Se si sceglie Pass-through come metodo di preautenticazione, non si otterrà questo vantaggio.</span><span class="sxs-lookup"><span data-stu-id="b6451-113">If you choose Passthrough as your preauthentication method, you don't get this benefit.</span></span> 

### <a name="conditional-access"></a><span data-ttu-id="b6451-114">Accesso condizionale</span><span class="sxs-lookup"><span data-stu-id="b6451-114">Conditional access</span></span>

<span data-ttu-id="b6451-115">Applicare più controlli dei criteri prima di connessioni vengono stabilite tooyour rete.</span><span class="sxs-lookup"><span data-stu-id="b6451-115">Apply richer policy controls before connections tooyour network are established.</span></span>

<span data-ttu-id="b6451-116">Con [accesso condizionale](active-directory-conditional-access-azuread-connected-apps.md), è possibile definire restrizioni per il traffico viene consentito tooaccess le applicazioni back-end.</span><span class="sxs-lookup"><span data-stu-id="b6451-116">With [conditional access](active-directory-conditional-access-azuread-connected-apps.md), you can define restrictions on what traffic is allowed tooaccess your back-end applications.</span></span> <span data-ttu-id="b6451-117">È possibile, ad esempio, creare criteri per definire restrizioni in base alla posizione, al livello di autenticazione e al profilo di rischio.</span><span class="sxs-lookup"><span data-stu-id="b6451-117">You can create policies that restrict sign-ins based on location, strength of authentication, and user risk profile.</span></span>

<span data-ttu-id="b6451-118">È anche possibile utilizzare criteri di accesso condizionale tooconfigure multi-Factor Authentication aggiunta di un altro livello di autenticazioni tooyour di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="b6451-118">You can also use conditional access tooconfigure Multi-Factor Authentication policies, adding another layer of security tooyour user authentications.</span></span> 

### <a name="traffic-termination"></a><span data-ttu-id="b6451-119">Terminazione di traffico</span><span class="sxs-lookup"><span data-stu-id="b6451-119">Traffic termination</span></span>

<span data-ttu-id="b6451-120">Tutto il traffico viene chiusa in cloud hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-120">All traffic is terminated in hello cloud.</span></span>

<span data-ttu-id="b6451-121">Poiché Azure AD applicazione Proxy è un proxy inverso, tutte le applicazioni di traffico tooback-end viene terminata nel servizio hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-121">Because Azure AD Application Proxy is a reverse-proxy, all traffic tooback-end applications is terminated at hello service.</span></span> <span data-ttu-id="b6451-122">Hello sessione può ottenere ristabilita solo con i server back-end hello, che significa che i server back-end non sono esposti traffico toodirect HTTP.</span><span class="sxs-lookup"><span data-stu-id="b6451-122">hello session can get reestablished only with hello back-end server, which means that your back-end servers are not exposed toodirect HTTP traffic.</span></span> <span data-ttu-id="b6451-123">Questa configurazione consente una protezione migliore da attacchi mirati.</span><span class="sxs-lookup"><span data-stu-id="b6451-123">This configuration means that you are better protected from targeted attacks.</span></span>

### <a name="all-access-is-outbound"></a><span data-ttu-id="b6451-124">Tutti gli accessi sono in uscita</span><span class="sxs-lookup"><span data-stu-id="b6451-124">All access is outbound</span></span> 

<span data-ttu-id="b6451-125">Rete aziendale toohello di tooopen le connessioni in entrata non è necessario.</span><span class="sxs-lookup"><span data-stu-id="b6451-125">You don't need tooopen inbound connections toohello corporate network.</span></span>

<span data-ttu-id="b6451-126">Connettori Proxy di applicazione utilizzano solo le connessioni in uscita toohello AD Azure Proxy applicazione del servizio, il che significa che non è necessario tooopen le porte del firewall per le connessioni in ingresso.</span><span class="sxs-lookup"><span data-stu-id="b6451-126">Application Proxy connectors only use outbound connections toohello Azure AD Application Proxy service, which means that there is no need tooopen firewall ports for incoming connections.</span></span> <span data-ttu-id="b6451-127">Proxy tradizionale è necessaria una rete perimetrale (nota anche come *DMZ*, *DMZ*, o *subnet schermata*) e toounauthenticated di accesso è consentito connessioni sul bordo rete hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-127">Traditional proxies required a perimeter network (also known as *DMZ*, *demilitarized zone*, or *screened subnet*) and allowed access toounauthenticated connections at hello network edge.</span></span> <span data-ttu-id="b6451-128">Questo scenario richiesto molti investimento aggiuntivo nell'applicazione web firewall traffico tooanalyze prodotti e offerta aggiunta protezioni toohello ambiente.</span><span class="sxs-lookup"><span data-stu-id="b6451-128">This scenario required many additional investments in web application firewall products tooanalyze traffic and offer addition protections toohello environment.</span></span> <span data-ttu-id="b6451-129">Con il proxy applicazione non è necessario disporre di una rete perimetrale perché tutte le connessioni sono in uscita e su un canale sicuro.</span><span class="sxs-lookup"><span data-stu-id="b6451-129">With Application Proxy, you don't need a perimeter network because all connections are outbound and take place over a secure channel.</span></span>

<span data-ttu-id="b6451-130">Per altre informazioni sui connettori, vedere [Understand Azure AD Application Proxy connectors](application-proxy-understand-connectors.md) (Informazioni sui connettori proxy di applicazione di Azure AD).</span><span class="sxs-lookup"><span data-stu-id="b6451-130">For more information about connectors, see [Understand Azure AD Application Proxy connectors](application-proxy-understand-connectors.md).</span></span>

### <a name="cloud-scale-analytics-and-machine-learning"></a><span data-ttu-id="b6451-131">Machine Learning e analisi di livello cloud</span><span class="sxs-lookup"><span data-stu-id="b6451-131">Cloud-scale analytics and machine learning</span></span> 

<span data-ttu-id="b6451-132">Ottenere una protezione all'avanguardia.</span><span class="sxs-lookup"><span data-stu-id="b6451-132">Get cutting-edge security protection.</span></span>

<span data-ttu-id="b6451-133">Perché è parte di Azure Active Directory, è possibile sfruttare il Proxy di applicazione [Azure AD Identity Protection](active-directory-identityprotection.md), con Business intelligence basate su learning macchina e dati di Microsoft Security Response Center hello e Digital Crimes Unit.</span><span class="sxs-lookup"><span data-stu-id="b6451-133">Because it's part of Azure Active Directory, Application Proxy can leverage [Azure AD Identity Protection](active-directory-identityprotection.md), with machine learning-driven intelligence and data from hello Microsoft Security Response Center and Digital Crimes Unit.</span></span> <span data-ttu-id="b6451-134">Insieme identifichiamo in modo proattivo gli account compromessi e offriamo una protezione in tempo reale contro gli accessi ad alto rischio. Vengono presi in considerazione diversi fattori, ad esempio l'accesso da dispositivi infetti e tramite reti anonime, da posizioni atipiche e improbabili.</span><span class="sxs-lookup"><span data-stu-id="b6451-134">Together we proactively identify compromised accounts and offer real-time protection from high-risk sign-ins. We take into account numerous factors, such as access from infected devices, through anonymizing networks, and from atypical and unlikely locations.</span></span>

<span data-ttu-id="b6451-135">Molti di questi eventi e segnalazioni sono già disponibili tramite un'API per l'integrazione con i sistemi SIEM (Security Information and Event Management, Sistema di gestione delle informazioni e degli eventi di sicurezza).</span><span class="sxs-lookup"><span data-stu-id="b6451-135">Many of these reports and events are already available through an API for integration with your security information and event management (SIEM) systems.</span></span>

### <a name="remote-access-as-a-service"></a><span data-ttu-id="b6451-136">Accesso remoto come servizio</span><span class="sxs-lookup"><span data-stu-id="b6451-136">Remote access as a service</span></span>

<span data-ttu-id="b6451-137">Non è necessario tooworry sulla manutenzione e l'applicazione di patch ai server locali.</span><span class="sxs-lookup"><span data-stu-id="b6451-137">You don’t have tooworry about maintaining and patching on-premises servers.</span></span>

<span data-ttu-id="b6451-138">Il software senza patch è tuttora responsabile di un numero elevato di attacchi.</span><span class="sxs-lookup"><span data-stu-id="b6451-138">Unpatched software still accounts for a large number of attacks.</span></span> <span data-ttu-id="b6451-139">Proxy dell'applicazione AD Azure è un servizio di su scala Internet di proprietà Microsoft, pertanto sarà sempre gli aggiornamenti e patch di sicurezza più recenti di hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-139">Azure AD Application Proxy is an Internet-scale service that Microsoft owns, so you always get hello latest security patches and upgrades.</span></span>

<span data-ttu-id="b6451-140">sicurezza di hello tooimprove di applicazioni pubblicate dal Proxy di applicazione AD Azure, è bloccata robot crawler dall'indicizzazione e l'archiviazione delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="b6451-140">tooimprove hello security of applications published by Azure AD Application Proxy, we block web crawler robots from indexing and archiving your applications.</span></span> <span data-ttu-id="b6451-141">Ogni volta che un robot dell'agente di ricerca Web prova a recuperare le impostazioni dei robot per un'app pubblicata, il proxy applicazione risponde con un file robots.txt che include `User-agent: * Disallow: /`.</span><span class="sxs-lookup"><span data-stu-id="b6451-141">Each time a web crawler robot tries to retrieve the robot's settings for a published app, Application Proxy replies with a robots.txt file that includes `User-agent: * Disallow: /`.</span></span>

## <a name="under-hello-hood"></a><span data-ttu-id="b6451-142">Quinte hello</span><span class="sxs-lookup"><span data-stu-id="b6451-142">Under hello hood</span></span>

<span data-ttu-id="b6451-143">Il proxy applicazione di Azure AD è costituito da due parti:</span><span class="sxs-lookup"><span data-stu-id="b6451-143">Azure AD Application Proxy consists of two parts:</span></span>

* <span data-ttu-id="b6451-144">Hello servizio basato sul cloud: questo servizio in esecuzione in Azure e in cui vengono eseguite le connessioni client esterne e utenti hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-144">hello cloud-based service: This service runs in Azure, and is where hello external client/user connections are made.</span></span>
* <span data-ttu-id="b6451-145">[Hello connettore locale](application-proxy-understand-connectors.md): un componente di on-premise, connettore hello ascolta le richieste dal servizio Proxy di applicazione hello Azure AD e gestisce le applicazioni interne toohello di connessioni.</span><span class="sxs-lookup"><span data-stu-id="b6451-145">[hello on-premises connector](application-proxy-understand-connectors.md): An on-premises component, hello connector listens for requests from hello Azure AD Application Proxy service and handles connections toohello internal applications.</span></span> 

<span data-ttu-id="b6451-146">Un flusso tra il connettore hello e servizio Proxy applicazione hello viene stabilito quando:</span><span class="sxs-lookup"><span data-stu-id="b6451-146">A flow between hello connector and hello Application Proxy service is established when:</span></span>

* <span data-ttu-id="b6451-147">connettore Hello viene prima configurato.</span><span class="sxs-lookup"><span data-stu-id="b6451-147">hello connector is first set up.</span></span>
* <span data-ttu-id="b6451-148">connettore Hello reperisce le informazioni di configurazione dal servizio Proxy applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-148">hello connector pulls configuration information from hello Application Proxy service.</span></span>
* <span data-ttu-id="b6451-149">Un utente accede a un'applicazione pubblicata.</span><span class="sxs-lookup"><span data-stu-id="b6451-149">A user accesses a published application.</span></span>

>[!NOTE]
><span data-ttu-id="b6451-150">Si verificano tutte le comunicazioni su SSL e sempre provengono in hello connettore toohello servizio Proxy di applicazione.</span><span class="sxs-lookup"><span data-stu-id="b6451-150">All communications occur over SSL, and they always originate at hello connector toohello Application Proxy service.</span></span> <span data-ttu-id="b6451-151">servizio Hello è solo in uscita.</span><span class="sxs-lookup"><span data-stu-id="b6451-151">hello service is outbound only.</span></span>

<span data-ttu-id="b6451-152">connettore di Hello utilizza toohello di tooauthenticate un certificato client del servizio Proxy di applicazione per quasi tutte le chiamate.</span><span class="sxs-lookup"><span data-stu-id="b6451-152">hello connector uses a client certificate tooauthenticate toohello Application Proxy service for nearly all calls.</span></span> <span data-ttu-id="b6451-153">Hello solo eccezione toothis processo è il passaggio di configurazione iniziale di hello, in cui è stato stabilito certificato client hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-153">hello only exception toothis process is hello initial setup step, where hello client certificate is established.</span></span>

### <a name="installing-hello-connector"></a><span data-ttu-id="b6451-154">Installazione di connector hello</span><span class="sxs-lookup"><span data-stu-id="b6451-154">Installing hello connector</span></span>

<span data-ttu-id="b6451-155">Quando il connettore hello prima di tutto è configurato, hello dopo gli eventi di flusso si verificano:</span><span class="sxs-lookup"><span data-stu-id="b6451-155">When hello connector is first set up, hello following flow events take place:</span></span>

1. <span data-ttu-id="b6451-156">il servizio Hello connettore registrazione toohello avviene come parte dell'installazione di hello del connettore hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-156">hello connector registration toohello service happens as part of hello installation of hello connector.</span></span> <span data-ttu-id="b6451-157">Gli utenti vengono richieste tooenter le proprie credenziali di amministratore di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="b6451-157">Users are prompted tooenter their Azure AD admin credentials.</span></span> <span data-ttu-id="b6451-158">Il token acquisito da questa autenticazione viene quindi presentato servizio Proxy di applicazione AD Azure toohello.</span><span class="sxs-lookup"><span data-stu-id="b6451-158">The token acquired from this authentication is then presented toohello Azure AD Application Proxy service.</span></span>
2. <span data-ttu-id="b6451-159">servizio Proxy applicazione Hello valuta token hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-159">hello Application Proxy service evaluates hello token.</span></span> <span data-ttu-id="b6451-160">Assicura che l'utente hello sia un amministratore della società all'interno di tenant hello che hello token emesso per.</span><span class="sxs-lookup"><span data-stu-id="b6451-160">It ensures that hello user is a company administrator within hello tenant that hello token was issued for.</span></span> <span data-ttu-id="b6451-161">Se l'utente hello non è un amministratore, viene terminato il processo di hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-161">If hello user is not an administrator, hello process is terminated.</span></span>
3. <span data-ttu-id="b6451-162">connettore Hello genera una richiesta di certificato client e lo passa, insieme a toohello token, hello servizio Proxy di applicazione.</span><span class="sxs-lookup"><span data-stu-id="b6451-162">hello connector generates a client certificate request and passes it, along with hello token, toohello Application Proxy service.</span></span> <span data-ttu-id="b6451-163">servizio Hello a sua volta verifica token hello e hello richiesta di certificato client.</span><span class="sxs-lookup"><span data-stu-id="b6451-163">hello service in turn verifies hello token and signs hello client certificate request.</span></span>
4. <span data-ttu-id="b6451-164">connettore di Hello utilizza certificato client hello per le comunicazioni future con hello servizio Proxy di applicazione.</span><span class="sxs-lookup"><span data-stu-id="b6451-164">hello connector uses hello client certificate for future communication with hello Application Proxy service.</span></span>
5. <span data-ttu-id="b6451-165">connettore Hello esegue un recupero iniziale dei dati di configurazione di sistema hello dal servizio di hello utilizzando il certificato client ed è ora pronto tootake richieste.</span><span class="sxs-lookup"><span data-stu-id="b6451-165">hello connector performs an initial pull of hello system configuration data from hello service using its client certificate, and it is now ready tootake requests.</span></span>

### <a name="updating-hello-configuration-settings"></a><span data-ttu-id="b6451-166">Aggiornamento delle impostazioni di configurazione hello</span><span class="sxs-lookup"><span data-stu-id="b6451-166">Updating hello configuration settings</span></span>

<span data-ttu-id="b6451-167">Ogni volta che il servizio Proxy di applicazione hello Aggiorna le impostazioni di configurazione di hello, vengono eseguite hello eventi di flusso seguente:</span><span class="sxs-lookup"><span data-stu-id="b6451-167">Whenever hello Application Proxy service updates hello configuration settings, hello following flow events take place:</span></span>

1. <span data-ttu-id="b6451-168">connettore di Hello connette toohello endpoint di configurazione all'interno di hello servizio Proxy di applicazione utilizzando il certificato client.</span><span class="sxs-lookup"><span data-stu-id="b6451-168">hello connector connects toohello configuration endpoint within hello Application Proxy service by using its client certificate.</span></span>
2. <span data-ttu-id="b6451-169">Dopo la convalida di certificati client hello, hello servizio Proxy applicazione restituisce connettore toohello dati di configurazione (ad esempio, gruppo di connettori hello che hello connettore deve essere parte di).</span><span class="sxs-lookup"><span data-stu-id="b6451-169">After hello client certificate has been validated, hello Application Proxy service returns configuration data toohello connector (for example, hello connector group that hello connector should be part of).</span></span>
3. <span data-ttu-id="b6451-170">Se il certificato corrente hello è più di 180 giorni, connettore hello genera una nuova richiesta di certificato, che aggiorna in modo efficace i certificati client hello ogni 180 giorni.</span><span class="sxs-lookup"><span data-stu-id="b6451-170">If hello current certificate is more than 180 days old, hello connector generates a new certificate request, which effectively updates hello client certificate every 180 days.</span></span>

### <a name="accessing-published-applications"></a><span data-ttu-id="b6451-171">Accesso alle applicazioni pubblicate</span><span class="sxs-lookup"><span data-stu-id="b6451-171">Accessing published applications</span></span>

<span data-ttu-id="b6451-172">Quando gli utenti accedono a un'applicazione pubblicata, hello gli eventi seguenti avvengono tra il servizio di Proxy applicazione hello e connettore del Proxy di applicazione hello:</span><span class="sxs-lookup"><span data-stu-id="b6451-172">When users access a published application, hello following events take place between hello Application Proxy service and hello Application Proxy connector:</span></span>

1. [<span data-ttu-id="b6451-173">servizio Hello autentica l'utente di hello per app hello</span><span class="sxs-lookup"><span data-stu-id="b6451-173">hello service authenticates hello user for hello app</span></span>](#the-service-checks-the-configuration-settings-for-the-app)
2. [<span data-ttu-id="b6451-174">servizio Hello inserisce la richiesta nella coda di connettore hello</span><span class="sxs-lookup"><span data-stu-id="b6451-174">hello service places a request in hello connector queue</span></span>](#The-service-places-a-request-in-the-connector-queue)
3. [<span data-ttu-id="b6451-175">Una richiesta di hello connettore processi dalla coda hello</span><span class="sxs-lookup"><span data-stu-id="b6451-175">A connector processes hello request from hello queue</span></span>](#the-connector-receives-the-request-from-the-queue)
4. [<span data-ttu-id="b6451-176">connettore Hello attende una risposta</span><span class="sxs-lookup"><span data-stu-id="b6451-176">hello connector waits for a response</span></span>](#the-connector-waits-for-a-response)
5. [<span data-ttu-id="b6451-177">utente di Hello servizio flussi dati toohello</span><span class="sxs-lookup"><span data-stu-id="b6451-177">hello service streams data toohello user</span></span>](#the-service-streams-data-to-the-user)

<span data-ttu-id="b6451-178">toolearn ulteriori informazioni su ciò che avviene in ognuno di questi passaggi, continuare a leggere.</span><span class="sxs-lookup"><span data-stu-id="b6451-178">toolearn more about what takes place in each of these steps, keep reading.</span></span>


#### <a name="1-hello-service-authenticates-hello-user-for-hello-app"></a><span data-ttu-id="b6451-179">1. servizio di hello autentica l'utente di hello per app hello</span><span class="sxs-lookup"><span data-stu-id="b6451-179">1. hello service authenticates hello user for hello app</span></span>

<span data-ttu-id="b6451-180">Se come metodo di preautenticazione è stata configurata hello app toouse pass-through, i passaggi di hello in questa sezione vengono ignorati.</span><span class="sxs-lookup"><span data-stu-id="b6451-180">If you configured hello app toouse Passthrough as its preauthentication method, hello steps in this section are skipped.</span></span>

<span data-ttu-id="b6451-181">Se è stato configurato hello app toopreauthenticate con Azure AD, gli utenti vengono reindirizzato toohello tooauthenticate servizio token di sicurezza di Azure AD e hello avviene segue:</span><span class="sxs-lookup"><span data-stu-id="b6451-181">If you configured hello app toopreauthenticate with Azure AD, users are redirected toohello Azure AD STS tooauthenticate, and hello following steps take place:</span></span>

1. <span data-ttu-id="b6451-182">Proxy dell'applicazione controlla eventuali requisiti di criteri di accesso condizionale per un'applicazione hello specifico.</span><span class="sxs-lookup"><span data-stu-id="b6451-182">Application Proxy checks for any conditional access policy requirements for hello specific application.</span></span> <span data-ttu-id="b6451-183">Questo passaggio garantisce che l'utente hello è stato assegnato l'applicazione toohello.</span><span class="sxs-lookup"><span data-stu-id="b6451-183">This step ensures that hello user has been assigned toohello application.</span></span> <span data-ttu-id="b6451-184">Se è necessaria la verifica in due passaggi, la sequenza di autenticazione hello richiesto hello un secondo metodo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="b6451-184">If two-step verification is required, hello authentication sequence prompts hello user for a second authentication method.</span></span>

2. <span data-ttu-id="b6451-185">Dopo che tutti i controlli sono stati superati, hello servizio token di sicurezza di Azure AD rilascia un token firmato di un'applicazione hello e reindirizzamenti hello toohello indietro utente servizio Proxy di applicazione.</span><span class="sxs-lookup"><span data-stu-id="b6451-185">After all checks have passed, hello Azure AD STS issues a signed token for hello application and redirects hello user back toohello Application Proxy service.</span></span>

3. <span data-ttu-id="b6451-186">Proxy dell'applicazione verifica il che applicazione hello toocorrect è stato rilasciato il token di hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-186">Application Proxy verifies that hello token was issued toocorrect hello application.</span></span> <span data-ttu-id="b6451-187">Vengono eseguiti anche altri controlli, ad esempio assicurandosi che hello token è stato firmato da Azure AD e che sia all'interno di finestra valido hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-187">It performs other checks also, such as ensuring that hello token was signed by Azure AD, and that it is still within hello valid window.</span></span>

4. <span data-ttu-id="b6451-188">Proxy dell'applicazione consente di impostare un tooindicate cookie di autenticazione crittografata che si è verificato un applicazione toohello l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="b6451-188">Application Proxy sets an encrypted authentication cookie tooindicate that authentication toohello application has occurred.</span></span> <span data-ttu-id="b6451-189">Hello cookie include un timestamp di scadenza basato su token hello da Azure AD e altri dati, ad esempio nome utente hello che hello autenticazione si basa su.</span><span class="sxs-lookup"><span data-stu-id="b6451-189">hello cookie includes an expiration timestamp that's based on hello token from Azure AD and other data, such as hello user name that hello authentication is based on.</span></span> <span data-ttu-id="b6451-190">Hello cookie viene crittografato con una chiave privata, nota solo toohello servizio Proxy di applicazione.</span><span class="sxs-lookup"><span data-stu-id="b6451-190">hello cookie is encrypted with a private key known only toohello Application Proxy service.</span></span>

5. <span data-ttu-id="b6451-191">Applicazione Proxy reindirizzamenti hello utente indietro toohello richiesto in origine URL.</span><span class="sxs-lookup"><span data-stu-id="b6451-191">Application Proxy redirects hello user back toohello originally requested URL.</span></span>

<span data-ttu-id="b6451-192">Se qualsiasi parte dei passaggi di preautenticazione hello non riesce, hello la richiesta dell'utente viene negata e utente hello viene visualizzato un messaggio che indica hello origine del problema hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-192">If any part of hello preauthentication steps fails, hello user’s request is denied, and hello user is shown a message indicating hello source of hello problem.</span></span>


#### <a name="2-hello-service-places-a-request-in-hello-connector-queue"></a><span data-ttu-id="b6451-193">2. servizio hello crea una richiesta nella coda di connettore hello</span><span class="sxs-lookup"><span data-stu-id="b6451-193">2. hello service places a request in hello connector queue</span></span>

<span data-ttu-id="b6451-194">Connettori di mantenere un toohello aprire Servizio Proxy di applicazione di connessione in uscita.</span><span class="sxs-lookup"><span data-stu-id="b6451-194">Connectors keep an outbound connection open toohello Application Proxy service.</span></span> <span data-ttu-id="b6451-195">Quando arriva una richiesta, il servizio hello accodato richiesta hello in uno di connessioni aperte hello per hello connettore toopick backup.</span><span class="sxs-lookup"><span data-stu-id="b6451-195">When a request comes in, hello service queues up hello request on one of hello open connections for hello connector toopick up.</span></span>

<span data-ttu-id="b6451-196">richiesta di Hello include gli elementi da un'applicazione hello, ad esempio le intestazioni di richiesta hello, dati del cookie crittografato hello, hello utente che esegue hello richiesta e hello ID richiesta</span><span class="sxs-lookup"><span data-stu-id="b6451-196">hello request includes items from hello application, such as hello request headers, data from hello encrypted cookie, hello user making hello request, and hello request ID.</span></span> <span data-ttu-id="b6451-197">Anche se i dati da cookie crittografato hello viene inviati con richiesta di hello, i cookie di autenticazione hello stesso non è.</span><span class="sxs-lookup"><span data-stu-id="b6451-197">Although data from hello encrypted cookie is sent with hello request, hello authentication cookie itself is not.</span></span>

#### <a name="3-hello-connector-processes-hello-request-from-hello-queue"></a><span data-ttu-id="b6451-198">3. hello connettore processi hello richiesta dalla coda hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-198">3. hello connector processes hello request from hello queue.</span></span> 

<span data-ttu-id="b6451-199">Proxy di applicazione basato su richiesta hello, esegue una delle seguenti azioni hello:</span><span class="sxs-lookup"><span data-stu-id="b6451-199">Based on hello request, Application Proxy performs one of hello following actions:</span></span>

* <span data-ttu-id="b6451-200">Se la richiesta hello è un'operazione semplice (ad esempio, non sono presenti dati all'interno del corpo hello come con un RESTful *ottenere* richiesta), il connettore di hello esegue una risorsa di connessione toohello destinazione interno e quindi attende una risposta.</span><span class="sxs-lookup"><span data-stu-id="b6451-200">If hello request is a simple operation (for example, there is no data within hello body as is with a RESTful *GET* request), hello connector makes a connection toohello target internal resource and then waits for a response.</span></span>

* <span data-ttu-id="b6451-201">Se hello richiesta dispone di dati associati nel corpo di hello (ad esempio, un RESTful *POST* operazione), connettore hello effettua una connessione in uscita utilizzando l'istanza del Proxy di applicazione toohello hello client certificato.</span><span class="sxs-lookup"><span data-stu-id="b6451-201">If hello request has data associated with it in hello body (for example, a RESTful *POST* operation), hello connector makes an outbound connection by using hello client certificate toohello Application Proxy instance.</span></span> <span data-ttu-id="b6451-202">Effettua dati connessione toorequest hello e aprire una risorsa di connessione toohello interno.</span><span class="sxs-lookup"><span data-stu-id="b6451-202">It makes this connection toorequest hello data and open a connection toohello internal resource.</span></span> <span data-ttu-id="b6451-203">Dopo aver ricevuto la richiesta hello dal connettore hello, servizio Proxy applicazione hello inizia ad accettare contenuto utente hello e inoltra connettore toohello di dati.</span><span class="sxs-lookup"><span data-stu-id="b6451-203">After it receives hello request from hello connector, hello Application Proxy service begins accepting content from hello user and forwards data toohello connector.</span></span> <span data-ttu-id="b6451-204">connettore di Hello, inoltra a sua volta, risorse interne di hello dati toohello.</span><span class="sxs-lookup"><span data-stu-id="b6451-204">hello connector, in turn, forwards hello data toohello internal resource.</span></span>

#### <a name="4-hello-connector-waits-for-a-response"></a><span data-ttu-id="b6451-205">4. connettore hello è in attesa di una risposta.</span><span class="sxs-lookup"><span data-stu-id="b6451-205">4. hello connector waits for a response.</span></span>

<span data-ttu-id="b6451-206">Dopo la richiesta hello e la trasmissione di toohello tutto il contenuto finale è stata completata, connettore hello attende una risposta.</span><span class="sxs-lookup"><span data-stu-id="b6451-206">After hello request and transmission of all content toohello back end is complete, hello connector waits for a response.</span></span>

<span data-ttu-id="b6451-207">Dopo aver ricevuto una risposta, il connettore hello rende un servizio Proxy di applicazione di connessione in uscita toohello, tooreturn hello dettagli intestazione e avviare il flusso di dati restituito hello.</span><span class="sxs-lookup"><span data-stu-id="b6451-207">After it receives a response, hello connector makes an outbound connection toohello Application Proxy service, tooreturn hello header details and begin streaming hello return data.</span></span>

#### <a name="5-hello-service-streams-data-toohello-user"></a><span data-ttu-id="b6451-208">5. utente di hello servizio flussi dati toohello.</span><span class="sxs-lookup"><span data-stu-id="b6451-208">5. hello service streams data toohello user.</span></span> 

<span data-ttu-id="b6451-209">Alcune operazioni di elaborazione di un'applicazione hello può verificarsi qui.</span><span class="sxs-lookup"><span data-stu-id="b6451-209">Some processing of hello application may occur here.</span></span> <span data-ttu-id="b6451-210">Se è configurato intestazioni tootranslate Proxy dell'applicazione o l'URL dell'applicazione, che l'elaborazione avviene in base alle necessità durante questo passaggio.</span><span class="sxs-lookup"><span data-stu-id="b6451-210">If you configured Application Proxy tootranslate headers or URLs in your application, that processing happens as needed during this step.</span></span>


## <a name="next-steps"></a><span data-ttu-id="b6451-211">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="b6451-211">Next steps</span></span>

[<span data-ttu-id="b6451-212">Considerazioni relative alla topologia di rete quando si usa il proxy applicazione di Azure AD</span><span class="sxs-lookup"><span data-stu-id="b6451-212">Network topology considerations when using Azure AD Application Proxy</span></span>](application-proxy-network-topology-considerations.md)

[<span data-ttu-id="b6451-213">Comprendere i connettori del proxy applicazione di Azure AD</span><span class="sxs-lookup"><span data-stu-id="b6451-213">Understand Azure AD Application Proxy connectors</span></span>](application-proxy-understand-connectors.md)
