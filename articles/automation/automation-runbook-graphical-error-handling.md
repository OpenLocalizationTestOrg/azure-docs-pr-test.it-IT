---
title: gestione nei runbook di automazione di Azure con interfaccia grafico aaaError | Documenti Microsoft
description: Questo articolo viene descritto come errore tooimplement logica nei runbook di automazione di Azure con interfaccia grafica di gestione.
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/26/2016
ms.author: magoedte
ms.openlocfilehash: b9ff01361d2ebd9c0174b074a7a290b1cc2fd1c8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="error-handling-in-azure-automation-graphical-runbooks"></a><span data-ttu-id="13773-103">Gestione degli errori nei runbook grafici di Automazione di Azure</span><span class="sxs-lookup"><span data-stu-id="13773-103">Error handling in Azure Automation graphical runbooks</span></span>

<span data-ttu-id="13773-104">Una progettazione di runbook chiave principale tooconsider prevede l'identificazione diversi problemi che potrebbe verificarsi un runbook.</span><span class="sxs-lookup"><span data-stu-id="13773-104">A key runbook design principal tooconsider is identifying different issues that a runbook might experience.</span></span> <span data-ttu-id="13773-105">ad esempio problemi relativi a esito positivo o negativo, stati di errore previsti e condizioni di errori imprevisti.</span><span class="sxs-lookup"><span data-stu-id="13773-105">These issues can include success, expected error states, and unexpected error conditions.</span></span>

<span data-ttu-id="13773-106">I runbook devono includere logica di gestione degli errori.</span><span class="sxs-lookup"><span data-stu-id="13773-106">Runbooks should include error handling.</span></span> <span data-ttu-id="13773-107">toovalidate hello output di un'attività o gestire un errore con i runbook grafici, è Impossibile utilizzare un'attività di codice Windows PowerShell, definire la logica condizionale nel collegamento di output di hello dell'attività hello o applicare un altro metodo.</span><span class="sxs-lookup"><span data-stu-id="13773-107">toovalidate hello output of an activity or handle an error with graphical runbooks, you could use a Windows PowerShell code activity, define conditional logic on hello output link of hello activity, or apply another method.</span></span>          

<span data-ttu-id="13773-108">Spesso, se si verifica un errore non irreversibile che si verifica con un'attività del runbook, qualsiasi attività che segue viene elaborata indipendentemente dall'errore hello.</span><span class="sxs-lookup"><span data-stu-id="13773-108">Often, if there is a non-terminating error that occurs with a runbook activity, any activity that follows is processed regardless of hello error.</span></span> <span data-ttu-id="13773-109">Errore Hello è probabilmente toogenerate un'eccezione, ma l'attività successiva hello è comunque consentita toorun.</span><span class="sxs-lookup"><span data-stu-id="13773-109">hello error is likely toogenerate an exception, but hello next activity is still allowed toorun.</span></span> <span data-ttu-id="13773-110">Questo è il modo di hello che PowerShell è progettato toohandle errori.</span><span class="sxs-lookup"><span data-stu-id="13773-110">This is hello way that PowerShell is designed toohandle errors.</span></span>    

<span data-ttu-id="13773-111">tipi di errori di PowerShell che possono verificarsi durante l'esecuzione di Hello sono interruzione o non irreversibile.</span><span class="sxs-lookup"><span data-stu-id="13773-111">hello types of PowerShell errors that can occur during execution are terminating or non-terminating.</span></span> <span data-ttu-id="13773-112">differenze di Hello tra gli errori di interruzione e non definitive sono i seguenti:</span><span class="sxs-lookup"><span data-stu-id="13773-112">hello differences between terminating and non-terminating errors are as follows:</span></span>

* <span data-ttu-id="13773-113">**Errore fatale**: un errore grave durante l'esecuzione si ferma completamente, il comando hello (o l'esecuzione dello script).</span><span class="sxs-lookup"><span data-stu-id="13773-113">**Terminating error**: A serious error during execution that halts hello command (or script execution) completely.</span></span> <span data-ttu-id="13773-114">Gli esempi includono cmdlet inesistenti, errori di sintassi che impediscono l'esecuzione di un cmdlet o altri errori irreversibili.</span><span class="sxs-lookup"><span data-stu-id="13773-114">Examples include non-existent cmdlets, syntax errors that prevent a cmdlet from running, or other fatal errors.</span></span>

* <span data-ttu-id="13773-115">**Errore non irreversibile**: un errore non grave che consente l'esecuzione toocontinue nonostante l'errore hello.</span><span class="sxs-lookup"><span data-stu-id="13773-115">**Non-terminating error**: A non-serious error that allows execution toocontinue despite hello failure.</span></span> <span data-ttu-id="13773-116">Gli esempi includono errori operativi come errori di file non trovati e problemi relativi alle autorizzazioni.</span><span class="sxs-lookup"><span data-stu-id="13773-116">Examples include operational errors such as file not found errors and permissions problems.</span></span>

<span data-ttu-id="13773-117">Automazione di Azure sono stati migliorati i runbook grafici hello funzionalità tooinclude la gestione degli errori.</span><span class="sxs-lookup"><span data-stu-id="13773-117">Azure Automation graphical runbooks have been improved with hello capability tooinclude error handling.</span></span> <span data-ttu-id="13773-118">È ora possibile trasformare le eccezioni in errori non irreversibili e creare collegamenti di errori tra le attività.</span><span class="sxs-lookup"><span data-stu-id="13773-118">You can now turn exceptions into non-terminating errors and create error links between activities.</span></span> <span data-ttu-id="13773-119">Questo processo consente a un autore runbook toocatch errori e gestire le condizioni realizzate o impreviste.</span><span class="sxs-lookup"><span data-stu-id="13773-119">This process allows a runbook author toocatch errors and manage realized or unexpected conditions.</span></span>  

## <a name="when-toouse-error-handling"></a><span data-ttu-id="13773-120">Quando la gestione degli errori toouse</span><span class="sxs-lookup"><span data-stu-id="13773-120">When toouse error handling</span></span>

<span data-ttu-id="13773-121">Ogni volta che è un'attività critica che genera un errore o eccezione, è importante tooprevent hello attività successiva del runbook dall'errore hello toohandle e l'elaborazione, in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="13773-121">Whenever there is a critical activity that throws an error or exception, it's important tooprevent hello next activity in your runbook from processing and toohandle hello error appropriately.</span></span> <span data-ttu-id="13773-122">Questo è essenziale soprattutto quando i runbook supportano un processo correlato alle operazioni aziendali o di servizio.</span><span class="sxs-lookup"><span data-stu-id="13773-122">This is especially critical when your runbooks are supporting a business or service operations process.</span></span>

<span data-ttu-id="13773-123">Per ogni attività in grado di produrre un errore, autore runbook hello possibile aggiungere un collegamento all'errore che punta tooany altre attività.</span><span class="sxs-lookup"><span data-stu-id="13773-123">For each activity that can produce an error, hello runbook author can add an error link pointing tooany other activity.</span></span>  <span data-ttu-id="13773-124">attività di destinazione Hello possono essere di qualsiasi tipo, incluse le attività di codice, la chiamata di un cmdlet, richiamare un altro runbook e così via.</span><span class="sxs-lookup"><span data-stu-id="13773-124">hello destination activity can be of any type, including code activities, invoking a cmdlet, invoking another runbook, and so on.</span></span>

<span data-ttu-id="13773-125">In attività di destinazione hello può inoltre essere collegamenti in uscita.</span><span class="sxs-lookup"><span data-stu-id="13773-125">In addition, hello destination activity can also have outgoing links.</span></span> <span data-ttu-id="13773-126">che possono essere collegamenti normali o collegamenti di errore.</span><span class="sxs-lookup"><span data-stu-id="13773-126">These links can be regular links or error links.</span></span> <span data-ttu-id="13773-127">Ciò significa che l'autore runbook hello può implementare la logica di gestione degli errori complessa senza ricorrere tooa attività del codice.</span><span class="sxs-lookup"><span data-stu-id="13773-127">This means hello runbook author can implement complex error-handling logic without resorting tooa code activity.</span></span> <span data-ttu-id="13773-128">Hello consigliato è toocreate un runbook di gestione degli errori dedicato con le funzionalità comuni, ma non è obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="13773-128">hello recommended practice is toocreate a dedicated error-handling runbook with common functionality, but it's not mandatory.</span></span> <span data-ttu-id="13773-129">La logica di gestione degli errori in un'attività di codice di PowerShell non è hello solo l'opzione.</span><span class="sxs-lookup"><span data-stu-id="13773-129">Error-handling logic in a PowerShell code activity it isn't hello only option.</span></span>  

<span data-ttu-id="13773-130">Ad esempio, si consideri un runbook che tenta di toostart una macchina virtuale e installare un'applicazione su di esso.</span><span class="sxs-lookup"><span data-stu-id="13773-130">For example, consider a runbook that tries toostart a VM and install an application on it.</span></span> <span data-ttu-id="13773-131">Se hello VM non viene avviato correttamente, esegue due azioni:</span><span class="sxs-lookup"><span data-stu-id="13773-131">If hello VM doesn't start correctly, it performs two actions:</span></span>

1. <span data-ttu-id="13773-132">Invio di una notifica relativa al problema.</span><span class="sxs-lookup"><span data-stu-id="13773-132">It sends a notification about this problem.</span></span>
2. <span data-ttu-id="13773-133">Avvio di un altro runbook che effettua automaticamente il provisioning di una nuova macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="13773-133">It starts another runbook that automatically provisions a new VM instead.</span></span>

<span data-ttu-id="13773-134">Una soluzione è toohave un collegamento all'errore che punta tooan attività che gli handle di passaggio uno.</span><span class="sxs-lookup"><span data-stu-id="13773-134">One solution is toohave an error link pointing tooan activity that handles step one.</span></span> <span data-ttu-id="13773-135">Ad esempio, è possibile connettersi hello **Write-Warning** cmdlet tooan attività per il passaggio 2, ad esempio hello **inizio AzureRmAutomationRunbook** cmdlet.</span><span class="sxs-lookup"><span data-stu-id="13773-135">For example, you could connect hello **Write-Warning** cmdlet tooan activity for step two, such as hello **Start-AzureRmAutomationRunbook** cmdlet.</span></span>

<span data-ttu-id="13773-136">È anche possibile generalizzare questo comportamento per l'uso nei runbook molti inserendo queste due attività in un runbook di gestione degli errori separata e linee guida seguenti di hello suggerito in precedenza.</span><span class="sxs-lookup"><span data-stu-id="13773-136">You could also generalize this behavior for use in many runbooks by putting these two activities in a separate error handling runbook and following hello guidance suggested earlier.</span></span> <span data-ttu-id="13773-137">Prima di chiamare questo runbook di gestione degli errori, è possibile costruire un messaggio personalizzato da dati hello in runbook originale hello e passarla come un runbook di gestione degli errori di parametro toohello.</span><span class="sxs-lookup"><span data-stu-id="13773-137">Before calling this error-handling runbook, you could construct a custom message from hello data in hello original runbook, and then pass it as a parameter toohello error-handling runbook.</span></span>

## <a name="how-toouse-error-handling"></a><span data-ttu-id="13773-138">La modalità di gestione degli errori toouse</span><span class="sxs-lookup"><span data-stu-id="13773-138">How toouse error handling</span></span>

<span data-ttu-id="13773-139">Ogni attività ha un'impostazione di configurazione che trasforma le eccezioni in errori non irreversibili.</span><span class="sxs-lookup"><span data-stu-id="13773-139">Each activity has a configuration setting that turns exceptions into non-terminating errors.</span></span> <span data-ttu-id="13773-140">Per impostazione predefinita, questa impostazione è disabilitata.</span><span class="sxs-lookup"><span data-stu-id="13773-140">By default, this setting is disabled.</span></span> <span data-ttu-id="13773-141">È consigliabile abilitare questa impostazione in qualsiasi attività in cui si desidera che gli errori toohandle.</span><span class="sxs-lookup"><span data-stu-id="13773-141">We recommend that you enable this setting on any activity where you want toohandle errors.</span></span>  

<span data-ttu-id="13773-142">Abilitando questa configurazione, sono garantire che gli errori di interruzione e non irreversibile nell'attività hello vengono gestiti come errori non irreversibili che possono essere gestiti con un collegamento all'errore.</span><span class="sxs-lookup"><span data-stu-id="13773-142">By enabling this configuration, you are assuring that both terminating and non-terminating errors in hello activity are handled as non-terminating errors, and can be handled with an error link.</span></span>  

<span data-ttu-id="13773-143">Dopo aver configurato questa impostazione, si crea un'attività che gestisce gli errori di hello.</span><span class="sxs-lookup"><span data-stu-id="13773-143">After configuring this setting, you create an activity that handles hello error.</span></span> <span data-ttu-id="13773-144">Se un'attività genera un errore, quindi hello in uscita di errore vengono seguiti i collegamenti e hello regolare i collegamenti sono, anche se l'attività hello produce anche output regolare.</span><span class="sxs-lookup"><span data-stu-id="13773-144">If an activity produces any error, then hello outgoing error links are followed, and hello regular links are not, even if hello activity produces regular output as well.</span></span><br><br> ![Esempio di collegamento di errore in un runbook di Automazione](media/automation-runbook-graphical-error-handling/error-link-example.png)

<span data-ttu-id="13773-146">Nel seguente esempio di hello, un runbook recupera una variabile che contiene il nome computer hello di una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="13773-146">In hello following example, a runbook retrieves a variable that contains hello computer name of a virtual machine.</span></span> <span data-ttu-id="13773-147">Tenta quindi di macchina virtuale di hello toostart con attività successiva hello.</span><span class="sxs-lookup"><span data-stu-id="13773-147">It then attempts toostart hello virtual machine with hello next activity.</span></span><br><br> ![Esempio di gestione degli errori in un runbook di Automazione](media/automation-runbook-graphical-error-handling/runbook-example-error-handling.png)<br><br>      

<span data-ttu-id="13773-149">Hello **Get-AutomationVariable** attività e **inizio AzureRmVm** sono tooerrors eccezioni tooconvert configurato.</span><span class="sxs-lookup"><span data-stu-id="13773-149">hello **Get-AutomationVariable** activity and **Start-AzureRmVm** are configured tooconvert exceptions tooerrors.</span></span>  <span data-ttu-id="13773-150">Se sono presenti problemi di funzionamento hello iniziale o variabile hello macchina virtuale, quindi vengono generati errori.</span><span class="sxs-lookup"><span data-stu-id="13773-150">If there are problems getting hello variable or starting hello VM, then errors are generated.</span></span><br><br> <span data-ttu-id="13773-151">![Impostazioni delle attività di gestione degli errori in un runbook di Automazione](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span><span class="sxs-lookup"><span data-stu-id="13773-151">![Automation runbook error-handling activity settings](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span></span>

<span data-ttu-id="13773-152">Flusso di errore collegamenti da questi tooa attività singola **la gestione degli errori** attività (un'attività del codice).</span><span class="sxs-lookup"><span data-stu-id="13773-152">Error links flow from these activities tooa single **error management** activity (a code activity).</span></span> <span data-ttu-id="13773-153">Questa attività è configurata con un'espressione PowerShell semplice che utilizza hello *generare* toostop (parola chiave) l'elaborazione, insieme con *$Error.Exception.Message* tooget messaggio che descrive hello eccezione corrente.</span><span class="sxs-lookup"><span data-stu-id="13773-153">This activity is configured with a simple PowerShell expression that uses hello *Throw* keyword toostop processing, along with *$Error.Exception.Message* tooget hello message that describes hello current exception.</span></span><br><br> <span data-ttu-id="13773-154">![Esempio di codice di gestione degli errori in un runbook di Automazione](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span><span class="sxs-lookup"><span data-stu-id="13773-154">![Automation runbook error-handling code example](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span></span>


## <a name="next-steps"></a><span data-ttu-id="13773-155">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="13773-155">Next steps</span></span>

* <span data-ttu-id="13773-156">toolearn ulteriori informazioni sui collegamenti e i tipi di collegamento nei runbook con interfaccia grafico, vedere [grafici per la modifica in automazione di Azure](automation-graphical-authoring-intro.md#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="13773-156">toolearn more about links and link types in graphical runbooks, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md#links-and-workflow).</span></span>

* <span data-ttu-id="13773-157">ulteriori sull'esecuzione di runbook, come i processi del runbook toomonitor e altri dettagli tecnici, vedere toolearn [tenere traccia di un processo del runbook](automation-runbook-execution.md).</span><span class="sxs-lookup"><span data-stu-id="13773-157">toolearn more about runbook execution, how toomonitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md).</span></span>
