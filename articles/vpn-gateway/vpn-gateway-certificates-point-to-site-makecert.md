---
title: 'Generare ed esportare certificati per connessioni da punto a sito: MakeCert: Azure | Microsoft Docs'
description: In questo articolo contiene passaggi toocreate un certificato radice autofirmato, esportare la chiave pubblica hello e generare i certificati client utilizzando MakeCert.
services: vpn-gateway
documentationcenter: na
author: cherylmc
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: vpn-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/09/2017
ms.author: cherylmc
ms.openlocfilehash: 0b795ccf74f1f97fbd3de8a0dc339f9cb0b48183
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="generate-and-export-certificates-for-point-to-site-connections-using-makecert"></a><span data-ttu-id="d7982-103">Generare ed esportare certificati per connessioni da punto a sito usando MakeCert</span><span class="sxs-lookup"><span data-stu-id="d7982-103">Generate and export certificates for Point-to-Site connections using MakeCert</span></span>

<span data-ttu-id="d7982-104">Le connessioni Point-to-Site, utilizzano tooauthenticate certificati.</span><span class="sxs-lookup"><span data-stu-id="d7982-104">Point-to-Site connections use certificates tooauthenticate.</span></span> <span data-ttu-id="d7982-105">In questo articolo viene illustrato come certificato radice toocreate a autofirmato e generare i certificati client utilizzando MakeCert.</span><span class="sxs-lookup"><span data-stu-id="d7982-105">This article shows you how toocreate a self-signed root certificate and generate client certificates using MakeCert.</span></span> <span data-ttu-id="d7982-106">Se si sta cercando i passaggi di configurazione da punto a sito, ad esempio come elenco di certificati radice tooupload, selezionare uno degli articoli hello ' Configure Point-to-Site' di hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="d7982-106">If you are looking for Point-to-Site configuration steps, such as how tooupload root certificates, select one of hello 'Configure Point-to-Site' articles from hello following list:</span></span>

> [!div class="op_single_selector"]
> * <span data-ttu-id="d7982-107">[Create self-signed certificates - PowerShell](vpn-gateway-certificates-point-to-site.md) (Creare certificati autofirmati - PowerShell)</span><span class="sxs-lookup"><span data-stu-id="d7982-107">[Create self-signed certificates - PowerShell](vpn-gateway-certificates-point-to-site.md)</span></span>
> * [<span data-ttu-id="d7982-108">Creare certificati autofirmati - MakeCert</span><span class="sxs-lookup"><span data-stu-id="d7982-108">Create self-signed certificates - MakeCert</span></span>](vpn-gateway-certificates-point-to-site-makecert.md)
> * <span data-ttu-id="d7982-109">[Configure Point-to-Site - Resource Manager - Azure portal](vpn-gateway-howto-point-to-site-resource-manager-portal.md) (Eseguire una configurazione da punto a sito - Resource Manager - Portale di Azure)</span><span class="sxs-lookup"><span data-stu-id="d7982-109">[Configure Point-to-Site - Resource Manager - Azure portal](vpn-gateway-howto-point-to-site-resource-manager-portal.md)</span></span>
> * [<span data-ttu-id="d7982-110">Configurazione da punto a sito - Gestione risorse - PowerShell</span><span class="sxs-lookup"><span data-stu-id="d7982-110">Configure Point-to-Site - Resource Manager - PowerShell</span></span>](vpn-gateway-howto-point-to-site-rm-ps.md)
> * <span data-ttu-id="d7982-111">[Configure Point-to-Site - Classic - Azure portal](vpn-gateway-howto-point-to-site-classic-azure-portal.md) (Eseguire una configurazione da punto a sito - Classica - Portale di Azure)</span><span class="sxs-lookup"><span data-stu-id="d7982-111">[Configure Point-to-Site - Classic - Azure portal](vpn-gateway-howto-point-to-site-classic-azure-portal.md)</span></span>
> 
> 

<span data-ttu-id="d7982-112">Mentre si consiglia di utilizzare hello [passaggi di PowerShell di Windows 10](vpn-gateway-certificates-point-to-site.md) toocreate ai certificati, è fornire queste istruzioni MakeCert come un metodo facoltativo.</span><span class="sxs-lookup"><span data-stu-id="d7982-112">While we recommend using hello [Windows 10 PowerShell steps](vpn-gateway-certificates-point-to-site.md) toocreate your certificates, we provide these MakeCert instructions as an optional method.</span></span> <span data-ttu-id="d7982-113">certificati Hello generate usando dei metodi possono essere installati su [qualsiasi sistema operativo client supportato](vpn-gateway-howto-point-to-site-resource-manager-portal.md#faq).</span><span class="sxs-lookup"><span data-stu-id="d7982-113">hello certificates that you generate using either method can be installed on [any supported client operating system](vpn-gateway-howto-point-to-site-resource-manager-portal.md#faq).</span></span> <span data-ttu-id="d7982-114">Tuttavia, MakeCert presenta hello seguente limitazione:</span><span class="sxs-lookup"><span data-stu-id="d7982-114">However, MakeCert has hello following limitation:</span></span>

* <span data-ttu-id="d7982-115">MakeCert è deprecato.</span><span class="sxs-lookup"><span data-stu-id="d7982-115">MakeCert is deprecated.</span></span> <span data-ttu-id="d7982-116">Questo strumento potrebbe quindi essere rimosso in qualsiasi momento.</span><span class="sxs-lookup"><span data-stu-id="d7982-116">This means that this tool could be removed at any point.</span></span> <span data-ttu-id="d7982-117">I certificati già generati con MakeCert non saranno interessati quando MakeCert non sarà più disponibile.</span><span class="sxs-lookup"><span data-stu-id="d7982-117">Any certificates that you already generated using MakeCert won't be affected when MakeCert is no longer available.</span></span> <span data-ttu-id="d7982-118">MakeCert solo i certificati hello toogenerate utilizzato, non è un meccanismo di convalida.</span><span class="sxs-lookup"><span data-stu-id="d7982-118">MakeCert is only used toogenerate hello certificates, not as a validating mechanism.</span></span>

## <span data-ttu-id="d7982-119"><a name="rootcert"></a>Creare un certificato radice autofirmato</span><span class="sxs-lookup"><span data-stu-id="d7982-119"><a name="rootcert"></a>Create a self-signed root certificate</span></span>

<span data-ttu-id="d7982-120">Hello alla procedura seguente viene illustrato come toocreate un autofirmato certificato utilizzando MakeCert.</span><span class="sxs-lookup"><span data-stu-id="d7982-120">hello following steps show you how toocreate a self-signed certificate using MakeCert.</span></span> <span data-ttu-id="d7982-121">Questi passaggi non sono specifici di un modello di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="d7982-121">These steps are not deployment-model specific.</span></span> <span data-ttu-id="d7982-122">Sono validi sia per Gestione risorse che per il modello classico.</span><span class="sxs-lookup"><span data-stu-id="d7982-122">They are valid for both Resource Manager and classic.</span></span>

1. <span data-ttu-id="d7982-123">Scaricare e installare [MakeCert](https://msdn.microsoft.com/library/windows/desktop/aa386968(v=vs.85).aspx).</span><span class="sxs-lookup"><span data-stu-id="d7982-123">Download and install [MakeCert](https://msdn.microsoft.com/library/windows/desktop/aa386968(v=vs.85).aspx).</span></span>
2. <span data-ttu-id="d7982-124">Dopo l'installazione, è possibile trovare utilità makecert.exe hello in questo percorso: ' C:\Program Files (x86) \Windows Kits\10\bin\<arch >'.</span><span class="sxs-lookup"><span data-stu-id="d7982-124">After installation, you can typically find hello makecert.exe utility under this path: 'C:\Program Files (x86)\Windows Kits\10\bin\<arch>'.</span></span> <span data-ttu-id="d7982-125">Tuttavia, è possibile che sia stato installato tooanother percorso.</span><span class="sxs-lookup"><span data-stu-id="d7982-125">Although, it's possible that it was installed tooanother location.</span></span> <span data-ttu-id="d7982-126">Aprire un prompt dei comandi come amministratore e passare percorso toohello di hello utilità MakeCert.</span><span class="sxs-lookup"><span data-stu-id="d7982-126">Open a command prompt as administrator and navigate toohello location of hello MakeCert utility.</span></span> <span data-ttu-id="d7982-127">È possibile utilizzare hello di esempio seguente, l'adattamento per la posizione corretta hello:</span><span class="sxs-lookup"><span data-stu-id="d7982-127">You can use hello following example, adjusting for hello proper location:</span></span>

  ```cmd
  cd C:\Program Files (x86)\Windows Kits\10\bin\x64
  ```
3. <span data-ttu-id="d7982-128">Creare e installare un certificato nell'archivio certificati personale hello nel computer in uso.</span><span class="sxs-lookup"><span data-stu-id="d7982-128">Create and install a certificate in hello Personal certificate store on your computer.</span></span> <span data-ttu-id="d7982-129">Hello esempio seguente viene creato un corrispondente *con estensione cer* file caricato tooAzure quando si configura P2S.</span><span class="sxs-lookup"><span data-stu-id="d7982-129">hello following example creates a corresponding *.cer* file that you upload tooAzure when configuring P2S.</span></span> <span data-ttu-id="d7982-130">Sostituire 'P2SRootCert' e 'P2SRootCert.cer' con nome hello che si desidera toouse certificato hello.</span><span class="sxs-lookup"><span data-stu-id="d7982-130">Replace 'P2SRootCert' and 'P2SRootCert.cer' with hello name that you want toouse for hello certificate.</span></span> <span data-ttu-id="d7982-131">Hello certificato si trova in 'Certificati - corrente\Personale\Certificati'.</span><span class="sxs-lookup"><span data-stu-id="d7982-131">hello certificate is located in your 'Certificates - Current User\Personal\Certificates'.</span></span>

  ```cmd
  makecert -sky exchange -r -n "CN=P2SRootCert" -pe -a sha256 -len 2048 -ss My
  ```

## <span data-ttu-id="d7982-132"><a name="cer"></a>Esportare la chiave pubblica hello (con estensione cer)</span><span class="sxs-lookup"><span data-stu-id="d7982-132"><a name="cer"></a>Export hello public key (.cer)</span></span>

[!INCLUDE [Export public key](../../includes/vpn-gateway-certificates-export-public-key-include.md)]

<span data-ttu-id="d7982-133">file exported.cer Hello deve essere caricato tooAzure.</span><span class="sxs-lookup"><span data-stu-id="d7982-133">hello exported.cer file must be uploaded tooAzure.</span></span> <span data-ttu-id="d7982-134">Per istruzioni, vedere [Configurare una connessione da punto a sito](vpn-gateway-howto-point-to-site-resource-manager-portal.md#uploadfile).</span><span class="sxs-lookup"><span data-stu-id="d7982-134">For instructions, see [Configure a Point-to-Site connection](vpn-gateway-howto-point-to-site-resource-manager-portal.md#uploadfile).</span></span> <span data-ttu-id="d7982-135">tooadd un certificato radice attendibile, vedere [in questa sezione](vpn-gateway-howto-point-to-site-resource-manager-portal.md#add) dell'articolo hello.</span><span class="sxs-lookup"><span data-stu-id="d7982-135">tooadd an additional trusted root certificate, see [this section](vpn-gateway-howto-point-to-site-resource-manager-portal.md#add) of hello article.</span></span>

### <a name="export-hello-self-signed-certificate-and-private-key-toostore-it-optional"></a><span data-ttu-id="d7982-136">Esporta certificato autofirmato hello e toostore chiave privata è (facoltativo)</span><span class="sxs-lookup"><span data-stu-id="d7982-136">Export hello self-signed certificate and private key toostore it (optional)</span></span>

<span data-ttu-id="d7982-137">È opportuno tooexport hello certificato radice autofirmato e archiviarlo in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="d7982-137">You may want tooexport hello self-signed root certificate and store it safely.</span></span> <span data-ttu-id="d7982-138">Se necessario, in seguito è possibile installarlo su un altro computer e generare altri certificati client oppure esportare un altro file.cer.</span><span class="sxs-lookup"><span data-stu-id="d7982-138">If need be, you can later install it on another computer and generate more client certificates, or export another .cer file.</span></span> <span data-ttu-id="d7982-139">hello tooexport autofirmato certificato radice come una con estensione pfx, un certificato radice hello selezionare e usare hello stessi passaggi, come descritto in [esportare un certificato client](#clientexport).</span><span class="sxs-lookup"><span data-stu-id="d7982-139">tooexport hello self-signed root certificate as a .pfx, select hello root certificate and use hello same steps as described in [Export a client certificate](#clientexport).</span></span>

## <a name="create-and-install-client-certificates"></a><span data-ttu-id="d7982-140">Creare e installare i certificati client</span><span class="sxs-lookup"><span data-stu-id="d7982-140">Create and install client certificates</span></span>

<span data-ttu-id="d7982-141">Non si installa certificato autofirmato hello direttamente in computer client hello.</span><span class="sxs-lookup"><span data-stu-id="d7982-141">You don't install hello self-signed certificate directly on hello client computer.</span></span> <span data-ttu-id="d7982-142">È necessario un certificato client dal certificato autofirmato hello toogenerate.</span><span class="sxs-lookup"><span data-stu-id="d7982-142">You need toogenerate a client certificate from hello self-signed certificate.</span></span> <span data-ttu-id="d7982-143">Quindi esportare e installare il computer client toohello di hello client certificato.</span><span class="sxs-lookup"><span data-stu-id="d7982-143">You then export and install hello client certificate toohello client computer.</span></span> <span data-ttu-id="d7982-144">Hello alla procedura seguente non è specifiche di modello di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="d7982-144">hello following steps are not deployment-model specific.</span></span> <span data-ttu-id="d7982-145">Sono validi sia per Gestione risorse che per il modello classico.</span><span class="sxs-lookup"><span data-stu-id="d7982-145">They are valid for both Resource Manager and classic.</span></span>

### <span data-ttu-id="d7982-146"><a name="clientcert"></a>Generazione di un certificato client</span><span class="sxs-lookup"><span data-stu-id="d7982-146"><a name="clientcert"></a>Generate a client certificate</span></span>

<span data-ttu-id="d7982-147">Ogni computer client che si connette tooa virtuale usando Point-to-Site deve avere installato un certificato client.</span><span class="sxs-lookup"><span data-stu-id="d7982-147">Each client computer that connects tooa VNet using Point-to-Site must have a client certificate installed.</span></span> <span data-ttu-id="d7982-148">Genera un certificato client dal certificato radice autofirmato hello e quindi esportare e installare il certificato client hello.</span><span class="sxs-lookup"><span data-stu-id="d7982-148">You generate a client certificate from hello self-signed root certificate, and then export and install hello client certificate.</span></span> <span data-ttu-id="d7982-149">Se non è stato installato il certificato client hello, l'autenticazione ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="d7982-149">If hello client certificate is not installed, authentication fails.</span></span> 

<span data-ttu-id="d7982-150">Hello passaggi seguenti consentono di eseguire la generazione di un certificato client da un certificato radice autofirmato.</span><span class="sxs-lookup"><span data-stu-id="d7982-150">hello following steps walk you through generating a client certificate from a self-signed root certificate.</span></span> <span data-ttu-id="d7982-151">È possibile generare più certificati client da hello stesso certificato radice.</span><span class="sxs-lookup"><span data-stu-id="d7982-151">You may generate multiple client certificates from hello same root certificate.</span></span> <span data-ttu-id="d7982-152">Quando si generano i certificati client con passaggi hello riportati di seguito, certificato hello del client viene installato automaticamente nel computer di hello utilizzato certificato hello toogenerate.</span><span class="sxs-lookup"><span data-stu-id="d7982-152">When you generate client certificates using hello steps below, hello client certificate is automatically installed on hello computer that you used toogenerate hello certificate.</span></span> <span data-ttu-id="d7982-153">Se si desidera tooinstall un certificato client in un altro computer client, è possibile esportare il certificato di hello.</span><span class="sxs-lookup"><span data-stu-id="d7982-153">If you want tooinstall a client certificate on another client computer, you can export hello certificate.</span></span>
 
1. <span data-ttu-id="d7982-154">In hello stesso computer utilizzato hello toocreate certificato autofirmato, aprire un prompt dei comandi come amministratore.</span><span class="sxs-lookup"><span data-stu-id="d7982-154">On hello same computer that you used toocreate hello self-signed certificate, open a command prompt as administrator.</span></span>
2. <span data-ttu-id="d7982-155">Modificare ed eseguire toogenerate esempio hello un certificato client.</span><span class="sxs-lookup"><span data-stu-id="d7982-155">Modify and run hello sample toogenerate a client certificate.</span></span>
  * <span data-ttu-id="d7982-156">Modifica *"P2SRootCert"* toohello nome radice autofirmato hello che si desidera generare il certificato client hello da.</span><span class="sxs-lookup"><span data-stu-id="d7982-156">Change *"P2SRootCert"* toohello name of hello self-signed root that you are generating hello client certificate from.</span></span> <span data-ttu-id="d7982-157">Assicurarsi che si sta utilizzando il nome di hello del certificato radice hello, ovvero qualsiasi hello ' CN =' valore è stato specificato al momento della creazione radice autofirmato hello.</span><span class="sxs-lookup"><span data-stu-id="d7982-157">Make sure you are using hello name of hello root certificate, which is whatever hello 'CN=' value was that you specified when you created hello self-signed root.</span></span>
  * <span data-ttu-id="d7982-158">Modifica *P2SChildCert* nome toohello da toogenerate un toobe certificato client.</span><span class="sxs-lookup"><span data-stu-id="d7982-158">Change *P2SChildCert* toohello name you want toogenerate a client certificate toobe.</span></span>

  <span data-ttu-id="d7982-159">Se si esegue l'esempio seguente senza modificarla hello, il risultato di hello è un certificato client denominato P2SChildcert nell'archivio certificati personale che è stato generato dal certificato radice P2SRootCert.</span><span class="sxs-lookup"><span data-stu-id="d7982-159">If you run hello following example without modifying it, hello result is a client certificate named P2SChildcert in your Personal certificate store that was generated from root certificate P2SRootCert.</span></span>

  ```cmd
  makecert.exe -n "CN=P2SChildCert" -pe -sky exchange -m 96 -ss My -in "P2SRootCert" -is my -a sha256
  ```

### <span data-ttu-id="d7982-160"><a name="clientexport"></a>Esportare un certificato client</span><span class="sxs-lookup"><span data-stu-id="d7982-160"><a name="clientexport"></a>Export a client certificate</span></span>

[!INCLUDE [Export client certificate](../../includes/vpn-gateway-certificates-export-client-cert-include.md)]

### <span data-ttu-id="d7982-161"><a name="install"></a>Installare un certificato client esportato</span><span class="sxs-lookup"><span data-stu-id="d7982-161"><a name="install"></a>Install an exported client certificate</span></span>

[!INCLUDE [Install client certificate](../../includes/vpn-gateway-certificates-install-client-cert-include.md)]

## <a name="next-steps"></a><span data-ttu-id="d7982-162">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="d7982-162">Next steps</span></span>

<span data-ttu-id="d7982-163">Continuare con la configurazione da punto a sito.</span><span class="sxs-lookup"><span data-stu-id="d7982-163">Continue with your Point-to-Site configuration.</span></span> 

* <span data-ttu-id="d7982-164">Per **Gestione risorse** passaggi di distribuzione del modello, vedere [configurare un tooa connessione Point-to-Site rete virtuale](vpn-gateway-howto-point-to-site-resource-manager-portal.md).</span><span class="sxs-lookup"><span data-stu-id="d7982-164">For **Resource Manager** deployment model steps, see [Configure a Point-to-Site connection tooa VNet](vpn-gateway-howto-point-to-site-resource-manager-portal.md).</span></span>
* <span data-ttu-id="d7982-165">Per **classico** passaggi di distribuzione del modello, vedere [configurare tooa di connessione tra reti virtuali (classico) un VPN Point-to-Site](vpn-gateway-howto-point-to-site-classic-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="d7982-165">For **classic** deployment model steps, see [Configure a Point-to-Site VPN connection tooa VNet (classic)](vpn-gateway-howto-point-to-site-classic-azure-portal.md).</span></span>
