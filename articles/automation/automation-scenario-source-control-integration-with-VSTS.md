---
title: aaaIntegrate automazione di Azure con controllo del codice sorgente di Visual Studio Team Services | Documenti Microsoft
description: Questo scenario illustra l'impostazione dell'integrazione con un account di Automazione di Azure e controllo del codice sorgente di Visual Studio Team Services.
services: automation
documentationcenter: 
author: eamono
manager: 
editor: 
keywords: Azure PowerShell, VSTS, controllo del codice sorgente, automazione
ms.assetid: a43b395a-e740-41a3-ae62-40eac9d0ec00
ms.service: automation
ms.workload: infrastructure-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/24/2017
ms.openlocfilehash: 8f6faa596a5ad1f8b72e820ca320b3e103d83579
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-automation-scenario---automation-source-control-integration-with-visual-studio-team-services"></a><span data-ttu-id="69471-104">Scenario di Automazione di Azure - Integrazione del controllo del codice sorgente con Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="69471-104">Azure Automation scenario - Automation source control integration with Visual Studio Team Services</span></span>

<span data-ttu-id="69471-105">In questo scenario, è necessario un progetto di Visual Studio Team Services che si utilizza toomanage runbook di automazione di Azure o le configurazioni DSC nel controllo del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="69471-105">In this scenario, you have a Visual Studio Team Services project that you are using toomanage Azure Automation runbooks or DSC configurations under source control.</span></span>
<span data-ttu-id="69471-106">Questo articolo viene descritto come toointegrate VSTS con l'ambiente di automazione di Azure in modo che l'integrazione continua venga eseguita per ogni archiviazione.</span><span class="sxs-lookup"><span data-stu-id="69471-106">This article describes how toointegrate VSTS with your Azure Automation environment so that continuous integration happens for each check-in.</span></span>

## <a name="getting-hello-scenario"></a><span data-ttu-id="69471-107">Scenario di recupero hello</span><span class="sxs-lookup"><span data-stu-id="69471-107">Getting hello scenario</span></span>

<span data-ttu-id="69471-108">Questo scenario è costituito da due runbook PowerShell che è possibile importare direttamente da hello [raccolta Runbook](automation-runbook-gallery.md) hello portale di Azure o scaricare da hello [PowerShell Gallery](https://www.powershellgallery.com).</span><span class="sxs-lookup"><span data-stu-id="69471-108">This scenario consists of two PowerShell runbooks that you can import directly from hello [Runbook Gallery](automation-runbook-gallery.md) in hello Azure portal or download from hello [PowerShell Gallery](https://www.powershellgallery.com).</span></span>

### <a name="runbooks"></a><span data-ttu-id="69471-109">Runbook</span><span class="sxs-lookup"><span data-stu-id="69471-109">Runbooks</span></span>

<span data-ttu-id="69471-110">Runbook</span><span class="sxs-lookup"><span data-stu-id="69471-110">Runbook</span></span> | <span data-ttu-id="69471-111">Descrizione</span><span class="sxs-lookup"><span data-stu-id="69471-111">Description</span></span>| 
--------|------------|
<span data-ttu-id="69471-112">Sincronizzazione VSTS</span><span class="sxs-lookup"><span data-stu-id="69471-112">Sync-VSTS</span></span> | <span data-ttu-id="69471-113">Importare runbook o configurazioni dal controllo del codice sorgente VSTS al termine di un'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="69471-113">Import runbooks or configurations from VSTS source control when a check-in is done.</span></span> <span data-ttu-id="69471-114">Se eseguito manualmente, sarà importare e pubblicare tutti i runbook o configurazioni in hello account di automazione.</span><span class="sxs-lookup"><span data-stu-id="69471-114">If run manually, it will import and publish all runbooks or configurations into hello Automation account.</span></span>| 
<span data-ttu-id="69471-115">Sincronizzazione VSTSGit</span><span class="sxs-lookup"><span data-stu-id="69471-115">Sync-VSTSGit</span></span> | <span data-ttu-id="69471-116">Importare runbook o configurazioni da VSTS nel controllo del codice sorgente Git al termine di un'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="69471-116">Import runbooks or configurations from VSTS under Git source control when a check-in is done.</span></span> <span data-ttu-id="69471-117">Se eseguito manualmente, sarà importare e pubblicare tutti i runbook o configurazioni in hello account di automazione.</span><span class="sxs-lookup"><span data-stu-id="69471-117">If run manually, it will import and publish all runbooks or configurations into hello Automation account.</span></span>|

### <a name="variables"></a><span data-ttu-id="69471-118">variables</span><span class="sxs-lookup"><span data-stu-id="69471-118">Variables</span></span>

<span data-ttu-id="69471-119">Variabile</span><span class="sxs-lookup"><span data-stu-id="69471-119">Variable</span></span> | <span data-ttu-id="69471-120">Descrizione</span><span class="sxs-lookup"><span data-stu-id="69471-120">Description</span></span>|
-----------|------------|
<span data-ttu-id="69471-121">VSToken</span><span class="sxs-lookup"><span data-stu-id="69471-121">VSToken</span></span> | <span data-ttu-id="69471-122">Proteggere asset della variabile verrà creato che contiene i token di accesso personale VSTS hello.</span><span class="sxs-lookup"><span data-stu-id="69471-122">Secure variable asset you will create that contains hello VSTS personal access token.</span></span> <span data-ttu-id="69471-123">È possibile ottenere informazioni di modalità di accesso personale VSTS di toocreate token su hello [pagina autenticazione VSTS](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview).</span><span class="sxs-lookup"><span data-stu-id="69471-123">You can learn how toocreate a VSTS personal access token on hello [VSTS authentication page](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview).</span></span> 
## <a name="installing-and-configuring-this-scenario"></a><span data-ttu-id="69471-124">Installazione e configurazione dello scenario</span><span class="sxs-lookup"><span data-stu-id="69471-124">Installing and configuring this scenario</span></span>

<span data-ttu-id="69471-125">Creare un [token di accesso personale](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview) in VSTS che si utilizzeranno i runbook hello toosync o configurazioni nell'account di automazione.</span><span class="sxs-lookup"><span data-stu-id="69471-125">Create a [personal access token](https://www.visualstudio.com/en-us/docs/integrate/get-started/auth/overview) in VSTS that you will use toosync hello runbooks or configurations into your automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPersonalToken.png) 

<span data-ttu-id="69471-126">Creare un [variabile secure](automation-variables.md) nel hello toohold account di automazione di accesso personale token in modo che i runbook hello può autenticarsi tooVSTS e sincronizzazione runbook hello o configurazioni in hello account di automazione.</span><span class="sxs-lookup"><span data-stu-id="69471-126">Create a [secure variable](automation-variables.md) in your automation account toohold hello personal access token so that hello runbook can authenticate tooVSTS and sync hello runbooks or configurations into hello Automation account.</span></span> <span data-ttu-id="69471-127">È possibile denominare questo token VSToken.</span><span class="sxs-lookup"><span data-stu-id="69471-127">You can name this VSToken.</span></span> 

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSTokenVariable.png)

<span data-ttu-id="69471-128">Importare runbook hello che verrà eseguita la sincronizzazione del runbook o configurazioni nell'account di automazione hello.</span><span class="sxs-lookup"><span data-stu-id="69471-128">Import hello runbook that will sync your runbooks or configurations into hello automation account.</span></span> <span data-ttu-id="69471-129">È possibile utilizzare hello [runbook di esempio VSTS](https://www.powershellgallery.com/packages/Sync-VSTS/1.0/DisplayScript) o hello [Visual Studio Team Services con i runbook di esempio Git] (https://www.powershellgallery.com/packages/Sync-VSTSGit/1.0/DisplayScript) da hello PowerShellGallery.com a seconda se si utilizza Visual Studio Team Services controllo o VSTS con Git di origine e distribuire tooyour account di automazione.</span><span class="sxs-lookup"><span data-stu-id="69471-129">You can use hello [VSTS sample runbook](https://www.powershellgallery.com/packages/Sync-VSTS/1.0/DisplayScript) or hello [VSTS with Git sample runbook] (https://www.powershellgallery.com/packages/Sync-VSTSGit/1.0/DisplayScript) from hello PowerShellGallery.com depending on if you use VSTS source control or VSTS with Git and deploy tooyour automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPowerShellGallery.png)

<span data-ttu-id="69471-130">È ora possibile [pubblicare](automation-creating-importing-runbook.md#publishing-a-runbook) questo runbook in modo da creare un webhook.</span><span class="sxs-lookup"><span data-stu-id="69471-130">You can now [publish](automation-creating-importing-runbook.md#publishing-a-runbook) this runbook so you can create a webhook.</span></span> 
![](media/automation-scenario-source-control-integration-with-VSTS/VSTSPublishRunbook.png)

<span data-ttu-id="69471-131">Creare un [webhook](automation-webhooks.md) per questo runbook VSTS di sincronizzazione e inserire parametri hello, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="69471-131">Create a [webhook](automation-webhooks.md) for this Sync-VSTS runbook and fill in hello parameters as shown below.</span></span> <span data-ttu-id="69471-132">Assicurarsi di copiare url del webhook hello perché sarà necessaria per una funzione hook del servizio in Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="69471-132">Make sure you copy hello webhook url as you will need it for a service hook in VSTS.</span></span> <span data-ttu-id="69471-133">Hello VSAccessTokenVariableName è il nome di hello (VSToken) della variabile di hello sicura creata dal token di accesso personale hello toohold precedenti.</span><span class="sxs-lookup"><span data-stu-id="69471-133">hello VSAccessTokenVariableName is hello name (VSToken) of hello secure variable that you created earlier toohold hello personal access token.</span></span> 

<span data-ttu-id="69471-134">L'integrazione con Visual Studio Team Services (Sync-VSTS.ps1) richiederà hello seguenti parametri.</span><span class="sxs-lookup"><span data-stu-id="69471-134">Integrating with VSTS (Sync-VSTS.ps1) will take hello following parameters.</span></span>
### <a name="sync-vsts-parameters"></a><span data-ttu-id="69471-135">Parametri di sincronizzazione VSTS</span><span class="sxs-lookup"><span data-stu-id="69471-135">Sync-VSTS Parameters</span></span>

<span data-ttu-id="69471-136">.</span><span class="sxs-lookup"><span data-stu-id="69471-136">Parameter</span></span> | <span data-ttu-id="69471-137">Descrizione</span><span class="sxs-lookup"><span data-stu-id="69471-137">Description</span></span>| 
--------|------------|
<span data-ttu-id="69471-138">WebhookData</span><span class="sxs-lookup"><span data-stu-id="69471-138">WebhookData</span></span> | <span data-ttu-id="69471-139">Questa conterrà le informazioni sull'archiviazione hello inviati da hello VSTS servizio hook.</span><span class="sxs-lookup"><span data-stu-id="69471-139">This will contain hello checkin information sent from hello VSTS service hook.</span></span> <span data-ttu-id="69471-140">È necessario lasciare vuoto questo parametro.</span><span class="sxs-lookup"><span data-stu-id="69471-140">You should leave this parameter blank.</span></span>| 
<span data-ttu-id="69471-141">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="69471-141">ResourceGroup</span></span> | <span data-ttu-id="69471-142">Questo è il nome di hello hello risorsa del gruppo di account di automazione hello in.</span><span class="sxs-lookup"><span data-stu-id="69471-142">This is hello name of hello resource group that hello automation account is in.</span></span>|
<span data-ttu-id="69471-143">AutomationAccountName</span><span class="sxs-lookup"><span data-stu-id="69471-143">AutomationAccountName</span></span> | <span data-ttu-id="69471-144">nome Hello dell'account di automazione hello che verrà eseguita la sincronizzazione con Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="69471-144">hello name of hello automation account that will sync with VSTS.</span></span>|
<span data-ttu-id="69471-145">VSFolder</span><span class="sxs-lookup"><span data-stu-id="69471-145">VSFolder</span></span> | <span data-ttu-id="69471-146">Il nome della cartella hello in Visual Studio Team Services in cui sono presenti runbook hello e configurazioni.</span><span class="sxs-lookup"><span data-stu-id="69471-146">The name of hello folder in VSTS where hello runbooks and configurations exist.</span></span>|
<span data-ttu-id="69471-147">VSAccount</span><span class="sxs-lookup"><span data-stu-id="69471-147">VSAccount</span></span> | <span data-ttu-id="69471-148">nome Hello di hello account Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="69471-148">hello name of hello Visual Studio Team Services account.</span></span>| 
<span data-ttu-id="69471-149">VSAccessTokenVariableName</span><span class="sxs-lookup"><span data-stu-id="69471-149">VSAccessTokenVariableName</span></span> | <span data-ttu-id="69471-150">nome di Hello di hello sicura variabile (VSToken) che contiene i token di accesso personale VSTS hello.</span><span class="sxs-lookup"><span data-stu-id="69471-150">hello name of hello secure variable (VSToken) that holds hello VSTS personal access token.</span></span>| 


![](media/automation-scenario-source-control-integration-with-VSTS/VSTSWebhook.png)

<span data-ttu-id="69471-151">Se si utilizza Visual Studio Team Services con GIT (Sync-VSTSGit.ps1) richiederà hello seguenti parametri.</span><span class="sxs-lookup"><span data-stu-id="69471-151">If you are using VSTS with GIT (Sync-VSTSGit.ps1) it will take hello following parameters.</span></span>

<span data-ttu-id="69471-152">.</span><span class="sxs-lookup"><span data-stu-id="69471-152">Parameter</span></span> | <span data-ttu-id="69471-153">Descrizione</span><span class="sxs-lookup"><span data-stu-id="69471-153">Description</span></span>|
--------|------------|
<span data-ttu-id="69471-154">WebhookData</span><span class="sxs-lookup"><span data-stu-id="69471-154">WebhookData</span></span> | <span data-ttu-id="69471-155">Questa conterrà le informazioni sull'archiviazione hello inviati da hello VSTS servizio hook.</span><span class="sxs-lookup"><span data-stu-id="69471-155">This will contain hello checkin information sent from hello VSTS service hook.</span></span> <span data-ttu-id="69471-156">È necessario lasciare vuoto questo parametro.</span><span class="sxs-lookup"><span data-stu-id="69471-156">You should leave this parameter blank.</span></span>| <span data-ttu-id="69471-157">ResourceGroup</span><span class="sxs-lookup"><span data-stu-id="69471-157">ResourceGroup</span></span> | <span data-ttu-id="69471-158">Questo nome hello hello risorsa del gruppo di account di automazione hello in.</span><span class="sxs-lookup"><span data-stu-id="69471-158">This hello name of hello resource group that hello automation account is in.</span></span>|
<span data-ttu-id="69471-159">AutomationAccountName</span><span class="sxs-lookup"><span data-stu-id="69471-159">AutomationAccountName</span></span> | <span data-ttu-id="69471-160">nome Hello dell'account di automazione hello che verrà eseguita la sincronizzazione con Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="69471-160">hello name of hello automation account that will sync with VSTS.</span></span>|
<span data-ttu-id="69471-161">VSAccount</span><span class="sxs-lookup"><span data-stu-id="69471-161">VSAccount</span></span> | <span data-ttu-id="69471-162">nome Hello di hello account Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="69471-162">hello name of hello Visual Studio Team Services account.</span></span>|
<span data-ttu-id="69471-163">VSProject</span><span class="sxs-lookup"><span data-stu-id="69471-163">VSProject</span></span> | <span data-ttu-id="69471-164">nome di Hello del progetto hello in Visual Studio Team Services in cui sono presenti runbook hello e configurazioni.</span><span class="sxs-lookup"><span data-stu-id="69471-164">hello name of hello project in VSTS where hello runbooks and configurations exist.</span></span>|
<span data-ttu-id="69471-165">GitRepo</span><span class="sxs-lookup"><span data-stu-id="69471-165">GitRepo</span></span> | <span data-ttu-id="69471-166">nome Hello del repository Git hello.</span><span class="sxs-lookup"><span data-stu-id="69471-166">hello name of hello Git repository.</span></span>|
<span data-ttu-id="69471-167">GitBranch</span><span class="sxs-lookup"><span data-stu-id="69471-167">GitBranch</span></span> | <span data-ttu-id="69471-168">nome di Hello di hello ramo nel repository Git di Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="69471-168">hello name of hello branch in VSTS Git repository.</span></span>|
<span data-ttu-id="69471-169">Cartella</span><span class="sxs-lookup"><span data-stu-id="69471-169">Folder</span></span> | <span data-ttu-id="69471-170">nome di Hello della cartella hello in ramo Git di Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="69471-170">hello name of hello folder in VSTS Git branch.</span></span>|
<span data-ttu-id="69471-171">VSAccessTokenVariableName</span><span class="sxs-lookup"><span data-stu-id="69471-171">VSAccessTokenVariableName</span></span> | <span data-ttu-id="69471-172">nome di Hello di hello sicura variabile (VSToken) che contiene i token di accesso personale VSTS hello.</span><span class="sxs-lookup"><span data-stu-id="69471-172">hello name of hello secure variable (VSToken) that holds hello VSTS personal access token.</span></span>|

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSGitWebhook.png)

<span data-ttu-id="69471-173">Creare un hook del servizio in Visual Studio Team Services per la cartella toohello archiviazioni che attiva il webhook check-in codice.</span><span class="sxs-lookup"><span data-stu-id="69471-173">Create a service hook in VSTS for check-ins toohello folder that triggers this webhook on code check-in.</span></span> <span data-ttu-id="69471-174">Selezionare Web hook come hello servizio toointegrate con quando si crea una nuova sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="69471-174">Select Web Hooks as hello service toointegrate with when you create a new subscription.</span></span> <span data-ttu-id="69471-175">È possibile acquisire familiarità con gli hook del servizio nella [documentazione relativa agli hook del servizio VSTS](https://www.visualstudio.com/en-us/docs/marketplace/integrate/service-hooks/get-started).</span><span class="sxs-lookup"><span data-stu-id="69471-175">You can learn more about service hooks on [VSTS Service Hooks documentation](https://www.visualstudio.com/en-us/docs/marketplace/integrate/service-hooks/get-started).</span></span>
![](media/automation-scenario-source-control-integration-with-VSTS/VSTSServiceHook.png)

<span data-ttu-id="69471-176">Deve essere in grado di toodo tutte le archiviazioni dei runbook e le configurazioni in VSTS e sono automaticamente sincronizzati era nell'account di automazione.</span><span class="sxs-lookup"><span data-stu-id="69471-176">You should now be able toodo all check-ins of your runbooks and configurations into VSTS and have these automatically sync’d into your automation account.</span></span>

![](media/automation-scenario-source-control-integration-with-VSTS/VSTSSyncRunbookOutput.png)

<span data-ttu-id="69471-177">Se si esegue manualmente il runbook senza avviato da Visual Studio Team Services, è possibile lasciare vuoto il parametro webhookdata hello e eseguirà una sincronizzazione completa dalla cartella VSTS hello specificata.</span><span class="sxs-lookup"><span data-stu-id="69471-177">If you run this runbook manually without being triggered by VSTS, you can leave hello webhookdata parameter empty and it will do a full sync from hello VSTS folder specified.</span></span>

<span data-ttu-id="69471-178">Se si desidera scenario hello toouninstall, rimuovere hello servizio hook da Visual Studio Team Services, eliminare runbook hello e hello VSToken variabile.</span><span class="sxs-lookup"><span data-stu-id="69471-178">If you wish toouninstall hello scenario, remove hello service hook from VSTS, delete hello runbook, and hello VSToken variable.</span></span>
