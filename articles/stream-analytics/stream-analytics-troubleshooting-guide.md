---
title: Guida per la risoluzione dei problemi di Analisi di flusso di Azure | Documentazione Microsoft
description: Come risolvere i problemi del processo di Analisi di flusso
keywords: guida per la risoluzione dei problemi
documentationcenter: 
services: stream-analytics
author: jeffstokes72
manager: jhubbard
editor: cgronlun
ms.assetid: 
ms.service: stream-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 04/20/2017
ms.author: jeffstok
ms.openlocfilehash: 8ecf279047f06691cef1bc0db06888974405a9f0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="troubleshooting-guide-for-azure-stream-analytics"></a><span data-ttu-id="f5e1e-104">Guida per la risoluzione dei problemi di Analisi di flusso di Azure</span><span class="sxs-lookup"><span data-stu-id="f5e1e-104">Troubleshooting guide for Azure Stream Analytics</span></span>

<span data-ttu-id="f5e1e-105">La risoluzione dei problemi di Azure di flusso di Azure può risultare complessa a prima vista.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-105">Azure Stream Analytics troubleshooting can appear to be a complex effort at first glance.</span></span> <span data-ttu-id="f5e1e-106">Dopo aver lavorato con molti utenti, è stata creata questa guida al fine di semplificare la procedura e rimuovere le ambiguità sugli input, gli output, le query e le funzioni.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-106">After working with many users, we have created this guide to help streamline the process and remove the guesswork about your inputs, outputs, queries, and functions.</span></span>

## <a name="troubleshoot-your-stream-analytics-job"></a><span data-ttu-id="f5e1e-107">Risoluzione dei problemi del processo di Analisi di flusso</span><span class="sxs-lookup"><span data-stu-id="f5e1e-107">Troubleshoot your Stream Analytics job</span></span>

<span data-ttu-id="f5e1e-108">Per ottenere i migliori risultati nella risoluzione dei problemi del processo di Analisi di flusso, applicare le linee guida seguenti:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-108">For best results in troubleshooting your Stream Analytics job, use the following guidelines:</span></span>

1.  <span data-ttu-id="f5e1e-109">Testare la connettività:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-109">Test your connectivity:</span></span>
    - <span data-ttu-id="f5e1e-110">Verificare la connettività agli input e output con il pulsante **Verifica connessione** per ogni input e output.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-110">Verify connectivity to inputs and outputs by using the **Test Connection** button for each input and output.</span></span>

2.  <span data-ttu-id="f5e1e-111">Esaminare i dati di input:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-111">Examine your input data:</span></span>
    - <span data-ttu-id="f5e1e-112">Per verificare che è attivo il flusso dei dati di input verso l'hub eventi, usare [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) per connettersi all'hub eventi di Azure, se in uso.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-112">To verify that input data is flowing into Event Hub, use [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a) to connect to Azure Event Hub (if Event Hub input is used).</span></span>  
    - <span data-ttu-id="f5e1e-113">Usare il pulsante [**Dati di esempio**](stream-analytics-sample-data-input.md) per ogni input e scaricare i dati di esempio dell'input.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-113">Use the [**Sample Data**](stream-analytics-sample-data-input.md) button for each input, and download the input sample data.</span></span>
    - <span data-ttu-id="f5e1e-114">Esaminare i dati di esempio per comprendere la forma dei dati, ovvero lo schema e i [tipi di dati](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span><span class="sxs-lookup"><span data-stu-id="f5e1e-114">Inspect the sample data to understand the shape of the data: the schema and the [data types](https://msdn.microsoft.com/library/azure/dn835065.aspx).</span></span>

3.  <span data-ttu-id="f5e1e-115">Testare la query:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-115">Test your query:</span></span>
    - <span data-ttu-id="f5e1e-116">Nella scheda **Query** usare il pulsante **Verifica** e i dati di esempio scaricati per [testare la query](stream-analytics-test-query.md).</span><span class="sxs-lookup"><span data-stu-id="f5e1e-116">On the **Query** tab, use the **Test** button to test the query, and use the downloaded sample data to [test the query](stream-analytics-test-query.md).</span></span> <span data-ttu-id="f5e1e-117">Esaminare eventuali errori e provare a risolverli.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-117">Examine any errors and attempt to correct them.</span></span>
    - <span data-ttu-id="f5e1e-118">Se si usa [**Timestamp By**](https://msdn.microsoft.com/library/azure/mt573293.aspx), assicurarsi che i timestamp degli eventi siano successivi all'[ora di inizio del processo](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="f5e1e-118">If you use [**Timestamp By**](https://msdn.microsoft.com/library/azure/mt573293.aspx), verify that the events have timestamps greater than the [job start time](stream-analytics-out-of-order-and-late-events.md).</span></span>

4.  <span data-ttu-id="f5e1e-119">Eseguire il debug della query:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-119">Debug your query:</span></span>
    - <span data-ttu-id="f5e1e-120">Ricreare la query progressivamente, partendo dalla semplice istruzione di selezione per arrivare agli aggregati più complessi, attenendosi alla procedura illustrata.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-120">Rebuild the query progressively from simple select statement to more complex aggregates by using steps.</span></span> <span data-ttu-id="f5e1e-121">Usare la clausola [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx) per creare la logica di query passo per passo.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-121">To build up the query logic step by step, use [WITH](https://msdn.microsoft.com/library/azure/dn835049.aspx) clauses.</span></span>
    - <span data-ttu-id="f5e1e-122">Usare [SELECT INTO](stream-analytics-select-into.md) per eseguire il debug dei passaggi della query.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-122">Use [SELECT INTO](stream-analytics-select-into.md) to debug query steps.</span></span>

5.  <span data-ttu-id="f5e1e-123">Eliminare i problemi comuni, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-123">Eliminate common pitfalls, such as:</span></span>
    - <span data-ttu-id="f5e1e-124">Una clausola [**WHERE**](https://msdn.microsoft.com/library/azure/dn835048.aspx) della query ha filtrato tutti gli eventi impedendo la generazione dell'output.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-124">A [**WHERE**](https://msdn.microsoft.com/library/azure/dn835048.aspx) clause in the query filtered out all events, preventing any output from being generated.</span></span>
    - <span data-ttu-id="f5e1e-125">Quando si usano le funzioni finestra, attendere la durata dell'intera finestra per vedere l'output dalla query.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-125">When you use window functions, wait for the entire window duration to see an output from the query.</span></span>
    - <span data-ttu-id="f5e1e-126">Il timestamp per gli eventi precede l'ora di inizio del processo, perciò gli eventi vengono eliminati.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-126">The timestamp for events precedes the job start time and, therefore, events are being dropped.</span></span>

6.  <span data-ttu-id="f5e1e-127">Usare l'ordine degli eventi:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-127">Use event ordering:</span></span>
    - <span data-ttu-id="f5e1e-128">Se tutti i passaggi precedenti hanno avuto esito positivo, accedere al pannello **Impostazioni** e selezionare [**Ordinamento eventi**](stream-analytics-out-of-order-and-late-events.md).</span><span class="sxs-lookup"><span data-stu-id="f5e1e-128">If all the previous steps worked fine, go to the **Settings** blade and select [**Event Ordering**](stream-analytics-out-of-order-and-late-events.md).</span></span> <span data-ttu-id="f5e1e-129">Verificare che questo criterio sia configurato in modo sensato per lo scenario.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-129">Verify that this policy is configured for what makes sense in your scenario.</span></span> <span data-ttu-id="f5e1e-130">Il criterio *non* viene applicato quando si usa il pulsante **Test** per testare la query.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-130">The policy is *not* applied when you use the **Test** button to test the query.</span></span> <span data-ttu-id="f5e1e-131">Questo aspetto rappresenta una differenza tra il test nel browser e l'esecuzione del processo in produzione.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-131">This result is one difference between testing in-browser versus running the job in production.</span></span>

7.  <span data-ttu-id="f5e1e-132">Eseguire il debug usando le metriche:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-132">Debug by using metrics:</span></span>
    - <span data-ttu-id="f5e1e-133">Se non si ottiene alcun output al termine della durata prevista (in base alla query), provare la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-133">If you obtain no output after the expected duration (based on the query), try the following:</span></span>
        - <span data-ttu-id="f5e1e-134">Esaminare le [**metriche di monitoraggio**](stream-analytics-monitoring.md) nella scheda **Monitor**. Poiché i valori sono aggregati, le metriche sono posticipate di alcuni minuti.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-134">Look at [**Monitoring Metrics**](stream-analytics-monitoring.md) on the **Monitor** tab. Because the values are aggregated, the metrics are delayed by a few minutes.</span></span>
            - <span data-ttu-id="f5e1e-135">Se Eventi di input è maggiore di zero, il processo è in grado di leggere i dati di input.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-135">If Input Events > 0, the job is able to read input data.</span></span> <span data-ttu-id="f5e1e-136">Se Eventi di input non è maggiore di zero:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-136">If Input Events is not > 0, then:</span></span>
                - <span data-ttu-id="f5e1e-137">Per vedere se l'origine dati contiene dati validi, verificarla tramite [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span><span class="sxs-lookup"><span data-stu-id="f5e1e-137">To see whether the data source has valid data, check it by using [Service Bus Explorer](https://code.msdn.microsoft.com/windowsapps/Service-Bus-Explorer-f2abca5a).</span></span> <span data-ttu-id="f5e1e-138">Questa verifica viene eseguita se il processo usa Hub eventi come input.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-138">This check applies if the job is using Event Hub as input.</span></span>
                - <span data-ttu-id="f5e1e-139">Controllare se il formato di serializzazione dei dati e la codifica dei dati sono quelli previsti.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-139">Check to see whether the data serialization format and data encoding are as expected.</span></span>
                - <span data-ttu-id="f5e1e-140">Se il processo usa un Hub eventi, verificare se il corpo del messaggio è *Null*.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-140">If the job is using an Event Hub, check to see whether the body of the message is *Null*.</span></span>
            - <span data-ttu-id="f5e1e-141">Se Errori di conversione dati è maggiore di zero, significa che probabilmente:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-141">If Data Conversion Errors > 0 and climbing, the following might be true:</span></span>
                - <span data-ttu-id="f5e1e-142">Il processo potrebbe non riuscire a deserializzare gli eventi.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-142">The job might not be able to de-serialize the events.</span></span>
                - <span data-ttu-id="f5e1e-143">Lo schema degli eventi potrebbe non corrispondere allo schema definito o previsto degli eventi nella query.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-143">The event schema might not match the defined or expected schema of the events in the query.</span></span>
                - <span data-ttu-id="f5e1e-144">I tipi di dati di alcuni dei campi nell'evento potrebbero non corrispondere alle aspettative.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-144">The datatypes of some of the fields in the event might not match expectations.</span></span>
            - <span data-ttu-id="f5e1e-145">Se Errori di runtime è maggiore di zero significa che il processo è in grado di ricevere i dati ma genera errori durante l'elaborazione della query.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-145">If Runtime Errors > 0, it means that the job can receive the data but is generating errors while processing the query.</span></span>
                - <span data-ttu-id="f5e1e-146">Per trovare gli errori, consultare i [log di controllo](../azure-resource-manager/resource-group-audit.md) e filtrare lo stato *non riuscito*.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-146">To find the errors, go to the [Audit Logs](../azure-resource-manager/resource-group-audit.md) and filter on *Failed* status.</span></span>
            - <span data-ttu-id="f5e1e-147">Se InputEvents è maggiore di zero e OutputEvents è uguale a zero, significa che una delle seguenti cose è vera:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-147">If InputEvents > 0 and OutputEvents = 0, it means that one of the following is true:</span></span>
                - <span data-ttu-id="f5e1e-148">L'elaborazione della query non ha prodotto eventi di output.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-148">Query processing resulted in zero output events.</span></span>
                - <span data-ttu-id="f5e1e-149">Il formato degli eventi o dei relativi campi potrebbe non essere valido, di conseguenza l'elaborazione della query non ha prodotto output.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-149">Events or its fields might be malformed, resulting in zero output after query processing.</span></span>
                - <span data-ttu-id="f5e1e-150">Il processo non è riuscito a eseguire il push dei dati al [sink di output](stream-analytics-select-into.md) per motivi di connettività o autenticazione.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-150">The job was unable to push data to the [output sink](stream-analytics-select-into.md) for connectivity or authentication reasons.</span></span>
        - <span data-ttu-id="f5e1e-151">In tutti i casi di errore menzionati sopra, i messaggi di log delle operazioni specificano altri dettagli e la spiegazione della situazione, tranne nei casi in cui la logica della query ha filtrato tutti gli eventi.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-151">In all the previously mentioned error cases, operations log messages explain additional details (including what is happening), except in cases where the query logic filtered out all events.</span></span> <span data-ttu-id="f5e1e-152">Se l'elaborazione di più eventi ha generato errori, Analisi di flusso registra i primi tre messaggi di errore dello stesso tipo entro 10 minuti nei log operazioni.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-152">If the processing of multiple events generates errors, Stream Analytics logs the first three error messages of the same type within 10 minutes to Operations logs.</span></span> <span data-ttu-id="f5e1e-153">Elimina quindi gli altri errori identici con il messaggio "Gli errori si verificano troppo rapidamente e verranno eliminati".</span><span class="sxs-lookup"><span data-stu-id="f5e1e-153">It then suppresses additional identical errors with a message that reads “Errors are happening too rapidly, these are being suppressed.”</span></span>

8. <span data-ttu-id="f5e1e-154">Eseguire il debug usando i log di controllo e diagnostica:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-154">Debug by using audit and diagnostic logs:</span></span>
    - <span data-ttu-id="f5e1e-155">Usare i [log di controllo](../azure-resource-manager/resource-group-audit.md) e filtrare per identificare gli errori ed eseguirne il debug.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-155">Use [Audit Logs](../azure-resource-manager/resource-group-audit.md), and filter to identify and debug errors.</span></span>
    - <span data-ttu-id="f5e1e-156">Usare i [log di diagnostica del processo](stream-analytics-job-diagnostic-logs.md) per identificare gli errori ed eseguirne il debug.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-156">Use [job diagnostic logs](stream-analytics-job-diagnostic-logs.md) to identify and debug errors.</span></span>

9. <span data-ttu-id="f5e1e-157">Esaminare gli output:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-157">Examine the outputs:</span></span>
    - <span data-ttu-id="f5e1e-158">Quando lo stato del processo è *In esecuzione*, a seconda della durata prevista nella query è possibile vedere l'output nell'origine dati di sink.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-158">When the job status is *Running*, depending on the duration that's stipulated in the query, you can see the output in the sink data source.</span></span>
    - <span data-ttu-id="f5e1e-159">Se non si vedono output che procedono verso un tipo di output specifico, reindirizzarli a un tipo di output che sia meno complesso, ad esempio un BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-159">If you cannot see outputs that are going to a specific output type, redirect them to an output type that is less complex, such as an Azure Blob.</span></span> <span data-ttu-id="f5e1e-160">Usando Storage Explorer, verificare se è possibile vedere l'output.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-160">By using Storage Explorer, check to see whether the output can be seen.</span></span> <span data-ttu-id="f5e1e-161">Verificare inoltre se le limitazioni dell'output impediscono la ricezione dei dati.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-161">Additionally, verify whether throttling limits at the output are preventing data from being received.</span></span>

10. <span data-ttu-id="f5e1e-162">Usare l'analisi del flusso di dati con le metriche del diagramma di processo:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-162">Use data-flow analysis with job diagram metrics:</span></span>
    - <span data-ttu-id="f5e1e-163">Per analizzare il flusso di dati e identificare i problemi, usare il [diagramma del processo con le metriche](stream-analytics-job-diagram-with-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="f5e1e-163">To analyze data flow and identify issues, use the [job diagram with metrics](stream-analytics-job-diagram-with-metrics.md).</span></span>

11. <span data-ttu-id="f5e1e-164">Aprire un caso di supporto:</span><span class="sxs-lookup"><span data-stu-id="f5e1e-164">Open a support case:</span></span>
    - <span data-ttu-id="f5e1e-165">Infine, se tutto il resto non dà risultati, aprire un caso di supporto tecnico Microsoft usando l'ID sottoscrizione che contiene il processo.</span><span class="sxs-lookup"><span data-stu-id="f5e1e-165">Finally, if all else fails, open a Microsoft support case by using the SubscriptionID that contains your job.</span></span>

## <a name="get-help"></a><span data-ttu-id="f5e1e-166">Ottenere aiuto</span><span class="sxs-lookup"><span data-stu-id="f5e1e-166">Get help</span></span>

<span data-ttu-id="f5e1e-167">Per ulteriore assistenza, provare il [Forum di Analisi dei flussi di Azure](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="f5e1e-167">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f5e1e-168">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="f5e1e-168">Next steps</span></span>

* [<span data-ttu-id="f5e1e-169">Introduzione ad Analisi dei flussi di Azure</span><span class="sxs-lookup"><span data-stu-id="f5e1e-169">Introduction to Azure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="f5e1e-170">Introduzione all'uso di Analisi dei flussi di Azure</span><span class="sxs-lookup"><span data-stu-id="f5e1e-170">Get started using Azure Stream Analytics</span></span>](stream-analytics-real-time-fraud-detection.md)
* [<span data-ttu-id="f5e1e-171">Ridimensionare i processi di Analisi dei flussi di Azure</span><span class="sxs-lookup"><span data-stu-id="f5e1e-171">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="f5e1e-172">Informazioni di riferimento sul linguaggio di query di Analisi dei flussi di Azure</span><span class="sxs-lookup"><span data-stu-id="f5e1e-172">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="f5e1e-173">Informazioni di riferimento sulle API REST di gestione di Analisi di flusso di Azure</span><span class="sxs-lookup"><span data-stu-id="f5e1e-173">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
