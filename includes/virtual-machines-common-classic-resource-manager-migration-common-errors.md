# <a name="common-errors-during-classic-tooazure-resource-manager-migration"></a><span data-ttu-id="20921-101">Errori comuni durante la classica tooAzure migrazione di gestione risorse</span><span class="sxs-lookup"><span data-stu-id="20921-101">Common errors during Classic tooAzure Resource Manager migration</span></span>
<span data-ttu-id="20921-102">I cataloghi di questo articolo hello errori e le misure di attenuazione più comuni durante la migrazione di hello delle risorse IaaS dallo stack Azure Resource Manager toohello modello di distribuzione classico di Azure.</span><span class="sxs-lookup"><span data-stu-id="20921-102">This article catalogs hello most common errors and mitigations during hello migration of IaaS resources from Azure classic deployment model toohello Azure Resource Manager stack.</span></span>

## <a name="list-of-errors"></a><span data-ttu-id="20921-103">Elenco degli errori</span><span class="sxs-lookup"><span data-stu-id="20921-103">List of errors</span></span>
| <span data-ttu-id="20921-104">Stringa di errore</span><span class="sxs-lookup"><span data-stu-id="20921-104">Error string</span></span> | <span data-ttu-id="20921-105">Mitigazione</span><span class="sxs-lookup"><span data-stu-id="20921-105">Mitigation</span></span> |
| --- | --- |
| <span data-ttu-id="20921-106">Errore interno del server</span><span class="sxs-lookup"><span data-stu-id="20921-106">Internal server error</span></span> |<span data-ttu-id="20921-107">In alcuni casi, si tratta di un errore temporaneo che si risolve con un nuovo tentativo.</span><span class="sxs-lookup"><span data-stu-id="20921-107">In some cases, this is a transient error that goes away with a retry.</span></span> <span data-ttu-id="20921-108">Se continua, toopersist [contattare il supporto tecnico di Azure](../articles/azure-supportability/how-to-create-azure-support-request.md) poiché necessita di analisi dei log di piattaforma.</span><span class="sxs-lookup"><span data-stu-id="20921-108">If it continues toopersist, [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) as it needs investigation of platform logs.</span></span> <br><br> <span data-ttu-id="20921-109">**Nota:** dopo l'evento imprevisto di hello verrà rilevato dal team di supporto hello, non tentare qualsiasi mitigazione automatica come ciò potrebbe avere conseguenze impreviste nell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="20921-109">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="20921-110">La migrazione non è supportata per la distribuzione {nome-distribuzione} in HostedService {nome-servizio-ospitato} perché si tratta di una distribuzione PaaS (Web/di lavoro).</span><span class="sxs-lookup"><span data-stu-id="20921-110">Migration is not supported for Deployment {deployment-name}  in HostedService {hosted-service-name} because it is a PaaS deployment (Web/Worker).</span></span> |<span data-ttu-id="20921-111">Ciò si verifica quando una distribuzione contiene un ruolo Web o di lavoro.</span><span class="sxs-lookup"><span data-stu-id="20921-111">This happens when a deployment contains a web/worker role.</span></span> <span data-ttu-id="20921-112">Poiché la migrazione è supportata solo per le macchine virtuali, rimuovere ruoli web/di lavoro hello dalla distribuzione hello e ripetere la migrazione.</span><span class="sxs-lookup"><span data-stu-id="20921-112">Since migration is only supported for Virtual Machines, please remove hello web/worker role from hello deployment and try migration again.</span></span> |
| <span data-ttu-id="20921-113">Distribuzione del modello {nome modello} non riuscita.</span><span class="sxs-lookup"><span data-stu-id="20921-113">Template {template-name} deployment failed.</span></span> <span data-ttu-id="20921-114">CorrelationId={guid}</span><span class="sxs-lookup"><span data-stu-id="20921-114">CorrelationId={guid}</span></span> |<span data-ttu-id="20921-115">In hello back-end del servizio di migrazione, si usa risorse di Azure Resource Manager modelli toocreate nello stack di hello Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="20921-115">In hello backend of migration service, we use Azure Resource Manager templates toocreate resources in hello Azure Resource Manager stack.</span></span> <span data-ttu-id="20921-116">In genere perché i modelli sono idempotente, è possibile ritentare in modo sicuro hello migrazione operazione tooget dopo questo errore.</span><span class="sxs-lookup"><span data-stu-id="20921-116">Since templates are idempotent, usually you can safely retry hello migration operation tooget past this error.</span></span> <span data-ttu-id="20921-117">Se questo errore si ripresenta toopersist, [contattare il supporto tecnico di Azure](../articles/azure-supportability/how-to-create-azure-support-request.md) e fornire loro hello CorrelationId.</span><span class="sxs-lookup"><span data-stu-id="20921-117">If this error continues toopersist, please [contact Azure support](../articles/azure-supportability/how-to-create-azure-support-request.md) and give them hello CorrelationId.</span></span> <br><br> <span data-ttu-id="20921-118">**Nota:** dopo l'evento imprevisto di hello verrà rilevato dal team di supporto hello, non tentare qualsiasi mitigazione automatica come ciò potrebbe avere conseguenze impreviste nell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="20921-118">**NOTE:** Once hello incident is tracked by hello support team, please do not attempt any self-mitigation as this might have unintended consequences on your environment.</span></span> |
| <span data-ttu-id="20921-119">rete virtuale Hello {virtual-network-name} non esiste.</span><span class="sxs-lookup"><span data-stu-id="20921-119">hello virtual network {virtual-network-name} does not exist.</span></span> |<span data-ttu-id="20921-120">Questa situazione può verificarsi se è stato creato hello rete virtuale nel nuovo portale di Azure hello.</span><span class="sxs-lookup"><span data-stu-id="20921-120">This can happen if you created hello Virtual Network in hello new Azure portal.</span></span> <span data-ttu-id="20921-121">nome di rete virtuale effettivo Hello segue il modello di hello "gruppo * <VNET name>"</span><span class="sxs-lookup"><span data-stu-id="20921-121">hello actual Virtual Network name follows hello pattern "Group * <VNET name>"</span></span> |
| <span data-ttu-id="20921-122">La VM {nome-vm} in HostedService {nome-servizio-ospitato} contiene l'estensione {nome-estensione} non supportata in Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="20921-122">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} which is not supported in Azure Resource Manager.</span></span> <span data-ttu-id="20921-123">È consigliabile toouninstall dalla hello VM prima di continuare con la migrazione.</span><span class="sxs-lookup"><span data-stu-id="20921-123">It is recommended toouninstall it from hello VM before continuing with migration.</span></span> |<span data-ttu-id="20921-124">Le estensioni XML, ad esempio BGInfo 1.*, non sono supportate in Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="20921-124">XML extensions such as BGInfo 1.* are not supported in Azure Resource Manager.</span></span> <span data-ttu-id="20921-125">Queste estensioni non possono essere migrate.</span><span class="sxs-lookup"><span data-stu-id="20921-125">Therefore, these extensions cannot be migrated.</span></span> <span data-ttu-id="20921-126">Se queste estensioni sono macchina virtuale hello installato su a sinistra, vengono disinstallate automaticamente prima del completamento della migrazione hello.</span><span class="sxs-lookup"><span data-stu-id="20921-126">If these extensions are left installed on hello virtual machine, they are automatically uninstalled before completing hello migration.</span></span> |
| <span data-ttu-id="20921-127">La macchina virtuale {nome-vm} nel servizio ospitato {nome-servizio-ospitato} contiene l'estensione VMSnapshot/VMSnapshotLinux che non è attualmente supportata per la migrazione.</span><span class="sxs-lookup"><span data-stu-id="20921-127">VM {vm-name} in HostedService {hosted-service-name} contains Extension VMSnapshot/VMSnapshotLinux, which is currently not supported for Migration.</span></span> <span data-ttu-id="20921-128">Disinstallarla dalla macchina virtuale hello e riaggiungerlo tramite Gestione risorse di Azure al termine della migrazione hello</span><span class="sxs-lookup"><span data-stu-id="20921-128">Uninstall it from hello VM and add it back using Azure Resource Manager after hello Migration is Complete</span></span> |<span data-ttu-id="20921-129">Si tratta di uno scenario di hello in macchina virtuale hello è configurato per il Backup di Azure.</span><span class="sxs-lookup"><span data-stu-id="20921-129">This is hello scenario where hello virtual machine is configured for Azure Backup.</span></span> <span data-ttu-id="20921-130">Poiché questo scenario non è attualmente non supportato, attenersi alla soluzione hello in https://aka.ms/vmbackupmigration</span><span class="sxs-lookup"><span data-stu-id="20921-130">Since this is currently an unsupported scenario, please follow hello workaround at https://aka.ms/vmbackupmigration</span></span> |
| <span data-ttu-id="20921-131">VM {vm-name} nel servizio ospitato {ospitato-service-name} contiene estensione {estensione-name} con stato non viene segnalato da hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="20921-131">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} whose Status is not being reported from hello VM.</span></span> <span data-ttu-id="20921-132">Di conseguenza, non è possibile eseguire la migrazione di questa VM.</span><span class="sxs-lookup"><span data-stu-id="20921-132">Hence, this VM cannot be migrated.</span></span> <span data-ttu-id="20921-133">Verificare che lo stato dell'estensione di hello viene segnalato o disinstallare l'estensione hello da hello macchina virtuale e ripetere la migrazione.</span><span class="sxs-lookup"><span data-stu-id="20921-133">Ensure that hello Extension status is being reported or uninstall hello extension from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="20921-134">La VM {nome-vm} in HostedService {nome-servizio-ospitato} contiene l'estensione {nome-estensione} con Stato Handler: {stato-handler}.</span><span class="sxs-lookup"><span data-stu-id="20921-134">VM {vm-name} in HostedService {hosted-service-name} contains Extension {extension-name} reporting Handler Status: {handler-status}.</span></span> <span data-ttu-id="20921-135">Di conseguenza, non può essere migrato hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="20921-135">Hence, hello VM cannot be migrated.</span></span> <span data-ttu-id="20921-136">Verificare che lo stato del gestore dell'estensione hello da segnalare è {gestore-status} o disinstallarla dalla macchina virtuale hello e ripetere la migrazione.</span><span class="sxs-lookup"><span data-stu-id="20921-136">Ensure that hello Extension handler status being reported is {handler-status} or uninstall it from hello VM and retry migration.</span></span> <br><br> <span data-ttu-id="20921-137">Segnala l'agente di macchine Virtuali per la macchina virtuale {vm-name} nel servizio ospitato {ospitato-service-name} hello stato generale dell'agente non risulta pronta.</span><span class="sxs-lookup"><span data-stu-id="20921-137">VM Agent for VM {vm-name} in HostedService {hosted-service-name} is reporting hello overall agent status as Not Ready.</span></span> <span data-ttu-id="20921-138">Di conseguenza, hello macchina virtuale potrebbe non essere migrato, se possibile estensione.</span><span class="sxs-lookup"><span data-stu-id="20921-138">Hence, hello VM may not be migrated, if it has a migratable extension.</span></span> <span data-ttu-id="20921-139">Verificare che tale agente VM hello segnala stato agente generale come pronto.</span><span class="sxs-lookup"><span data-stu-id="20921-139">Ensure that hello VM Agent is reporting overall agent status as Ready.</span></span> <span data-ttu-id="20921-140">Fare riferimento toohttps://aka.ms/classiciaasmigrationfaqs.</span><span class="sxs-lookup"><span data-stu-id="20921-140">Refer toohttps://aka.ms/classiciaasmigrationfaqs.</span></span> |<span data-ttu-id="20921-141">Agente guest di Azure e le estensioni di macchina virtuale in uscita internet access toohello VM storage account toopopulate necessario relativo stato.</span><span class="sxs-lookup"><span data-stu-id="20921-141">Azure guest agent & VM Extensions need outbound internet access toohello VM storage account toopopulate their status.</span></span> <span data-ttu-id="20921-142">Le cause più comuni degli errori di stato includono</span><span class="sxs-lookup"><span data-stu-id="20921-142">Common causes of status failure include</span></span> <li> <span data-ttu-id="20921-143">un gruppo di sicurezza di rete che blocca l'accesso in uscita toohello internet</span><span class="sxs-lookup"><span data-stu-id="20921-143">a Network Security Group that blocks outbound access toohello internet</span></span> <li> <span data-ttu-id="20921-144">Se hello rete virtuale con i server DNS locale e si perde la connettività DNS</span><span class="sxs-lookup"><span data-stu-id="20921-144">If hello VNET has on-prem DNS servers and DNS connectivity is lost</span></span> <br><br> <span data-ttu-id="20921-145">Se si continua toosee uno stato non supportato, è possibile disinstallare hello estensioni tooskip questo controllo e continuare con la migrazione.</span><span class="sxs-lookup"><span data-stu-id="20921-145">If you continue toosee an unsupported status, you can uninstall hello extensions tooskip this check and move forward with migration.</span></span> |
| <span data-ttu-id="20921-146">La migrazione non è supportata per la distribuzione {nome-distribuzione} in HostedService {nome-servizio-ospitato} poiché esso dispone di più set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="20921-146">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name} because it has multiple Availability Sets.</span></span> |<span data-ttu-id="20921-147">Attualmente è possibile migrare solo i servizi ospitati che dispongono di un massimo di 1 set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="20921-147">Currently, only hosted services that have 1 or less Availability sets can be migrated.</span></span> <span data-ttu-id="20921-148">toowork questo problema, spostare hello altre set di disponibilità e le macchine virtuali in tali tooa di set di disponibilità diverso servizio ospitato.</span><span class="sxs-lookup"><span data-stu-id="20921-148">toowork around this problem, please move hello additional Availability sets and Virtual machines in those Availability sets tooa different hosted service.</span></span> |
| <span data-ttu-id="20921-149">Migrazione non è supportata per la distribuzione nel servizio ospitato di {deployment-name} {ospitato-service-name perché contiene macchine virtuali che non fanno parte del Set di disponibilità hello anche se è presente un servizio ospitato hello.</span><span class="sxs-lookup"><span data-stu-id="20921-149">Migration is not supported for Deployment {deployment-name} in HostedService {hosted-service-name because it has VMs that are not part of hello Availability Set even though hello HostedService contains one.</span></span> |<span data-ttu-id="20921-150">soluzione alternativa Hello per questo scenario è tooeither Sposta tutte le macchine virtuali hello in un singolo disponibilità impostare o rimuovere tutte le macchine virtuali dal set di disponibilità nel servizio ospitato hello hello.</span><span class="sxs-lookup"><span data-stu-id="20921-150">hello workaround for this scenario is tooeither move all hello virtual machines into a single Availability set or remove all Virtual machines from hello Availability set in hello hosted service.</span></span> |
| <span data-ttu-id="20921-151">Account di archiviazione/servizio ospitato/virtuale rete {virtual-network-name} è in corso di hello di viene eseguita la migrazione e quindi non può essere modificato</span><span class="sxs-lookup"><span data-stu-id="20921-151">Storage account/HostedService/Virtual Network {virtual-network-name} is in hello process of being migrated and hence cannot be changed</span></span> |<span data-ttu-id="20921-152">Questo errore si verifica quando è stata completata l'operazione di migrazione "Preparazione" hello sulla risorsa hello e viene attivata un'operazione che renderebbe una risorsa toohello di modifica.</span><span class="sxs-lookup"><span data-stu-id="20921-152">This error happens when hello "Prepare" migration operation has been completed on hello resource and an operation that would make a change toohello resource is triggered.</span></span> <span data-ttu-id="20921-153">A causa di blocco hello sul piano di gestione di hello dopo un'operazione "Preparare", qualsiasi risorsa toohello le modifiche vengono bloccate.</span><span class="sxs-lookup"><span data-stu-id="20921-153">Because of hello lock on hello management plane after "Prepare" operation, any changes toohello resource are blocked.</span></span> <span data-ttu-id="20921-154">piano di gestione di hello toounlock, è possibile eseguire hello "Commit" migrazione operazione toocomplete o hello "Interruzione" migrazione operazione tooroll nuovamente hello "Preparare" operazione.</span><span class="sxs-lookup"><span data-stu-id="20921-154">toounlock hello management plane, you can run hello "Commit" migration operation toocomplete migration or hello "Abort" migration operation tooroll back hello "Prepare" operation.</span></span> |
| <span data-ttu-id="20921-155">La migrazione non è consentita per HostedService {nome-servizio-ospitato} perché comprende una macchina virtuale {nome-vm} con stato: RoleStateUnknown.</span><span class="sxs-lookup"><span data-stu-id="20921-155">Migration is not allowed for HostedService {hosted-service-name} because it has VM {vm-name} in State: RoleStateUnknown.</span></span> <span data-ttu-id="20921-156">La migrazione è consentita solo quando hello macchina virtuale è in uno dei seguenti hello stati: in esecuzione, arrestato, arresto deallocazione.</span><span class="sxs-lookup"><span data-stu-id="20921-156">Migration is allowed only when hello VM is in one of hello following states - Running, Stopped, Stopped Deallocated.</span></span> |<span data-ttu-id="20921-157">Hello VM potrebbe essere in corso mediante una transizione di stato, in genere si verifica quando durante un'operazione di aggiornamento in hello servizio ospitato, ad esempio un riavvio, l'installazione dell'estensione e così via. È consigliabile per hello aggiornamento operazione toocomplete nel servizio ospitato hello prima di tentare la migrazione.</span><span class="sxs-lookup"><span data-stu-id="20921-157">hello VM might be undergoing through a state transition, which usually happens when during an update operation on hello HostedService such as a reboot, extension installation etc. It is recommended for hello update operation toocomplete on hello HostedService before trying migration.</span></span> |
| <span data-ttu-id="20921-158">Distribuzione {deployment-name} nel servizio ospitato {ospitato-service-name} contiene una macchina virtuale {vm-name} con un disco dati {dati-disco-name} i cui blob fisico {size-of-the-vhd-blob-backing-the-data-disk} dimensioni non corrisponde a {dimensione logica di hello disco dati della macchina virtuale Size-of-the-Data-Disk-specified-in-the-VM-API} byte.</span><span class="sxs-lookup"><span data-stu-id="20921-158">Deployment {deployment-name} in HostedService {hosted-service-name} contains a VM {vm-name} with Data Disk {data-disk-name} whose physical blob size {size-of-the-vhd-blob-backing-the-data-disk} bytes does not match hello VM Data Disk logical size {size-of-the-data-disk-specified-in-the-vm-api} bytes.</span></span> <span data-ttu-id="20921-159">La migrazione viene eseguita senza specificare una dimensione per il disco dati hello per hello VM di Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="20921-159">Migration will proceed without specifying a size for hello data disk for hello Azure Resource Manager VM.</span></span> | <span data-ttu-id="20921-160">Questo errore si verifica se è stato ridimensionato blob VHD hello senza aggiornare dimensioni hello nel modello di macchina virtuale API hello.</span><span class="sxs-lookup"><span data-stu-id="20921-160">This error happens if you've resized hello VHD blob without updating hello size in hello VM API model.</span></span> <span data-ttu-id="20921-161">Procedure di prevenzione dettagliate sono descritte [di seguito](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes).</span><span class="sxs-lookup"><span data-stu-id="20921-161">Detailed mitigation steps are outlined [below](#vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-the-vm-data-disk-logical-size-bytes).</span></span>|
| <span data-ttu-id="20921-162">Si è verificata un'eccezione di archiviazione durante la convalida del disco dati {nome del disco dati} con collegamento ai file multimediali {URI disco dati} per la macchina virtuale {nome VM} nel servizio Cloud {nome del servizio Cloud}.</span><span class="sxs-lookup"><span data-stu-id="20921-162">A storage exception occurred while validating data disk {data disk name} with media link {data disk Uri} for VM {VM name} in Cloud Service {Cloud Service name}.</span></span> <span data-ttu-id="20921-163">Verificare che il collegamento multimediale di disco rigido virtuale hello è accessibile per la macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="20921-163">Please ensure that hello VHD media link is accessible for this virtual machine</span></span> | <span data-ttu-id="20921-164">Questo errore può verificarsi se i dischi di hello di hello VM sia stato eliminato o non sono accessibili più.</span><span class="sxs-lookup"><span data-stu-id="20921-164">This error can happen if hello disks of hello VM have been deleted or are not accessible anymore.</span></span> <span data-ttu-id="20921-165">Verificare che hello i dischi per hello VM esiste.</span><span class="sxs-lookup"><span data-stu-id="20921-165">Please make sure hello disks for hello VM exist.</span></span>|
| <span data-ttu-id="20921-166">La macchina virtuale {vm-name} nel servizio ospitato {cloud-service-name} contiene un disco che presenta il collegamento multimediale {vhd-uri} e il nome di BLOB {vhd-blob-name} che non è supportato in Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="20921-166">VM {vm-name} in HostedService {cloud-service-name} contains Disk with MediaLink {vhd-uri} which has blob name {vhd-blob-name}  that is not supported in Azure Resource Manager.</span></span> | <span data-ttu-id="20921-167">Questo errore si verifica quando il nome di hello del blob hello ha un "/", che attualmente non è supportata nel Provider di risorse di calcolo.</span><span class="sxs-lookup"><span data-stu-id="20921-167">This error occurs when hello name of hello blob has a "/" in it which is not supported in Compute Resource Provider currently.</span></span> |
| <span data-ttu-id="20921-168">La migrazione non è consentita per la distribuzione nel servizio ospitato {cloud-service-name} di {deployment-name} perché non è nell'ambito regionale hello.</span><span class="sxs-lookup"><span data-stu-id="20921-168">Migration is not allowed for Deployment {deployment-name} in HostedService {cloud-service-name} as it is not in hello regional scope.</span></span> <span data-ttu-id="20921-169">Consultare toohttp://aka.ms/regionalscope per lo spostamento di questo ambito tooregional di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="20921-169">Please refer toohttp://aka.ms/regionalscope for moving this deployment tooregional scope.</span></span> | <span data-ttu-id="20921-170">Nel 2014, Azure ha annunciato che risorse di rete verranno spostati da un ambito tooregional ambito di livello di cluster.</span><span class="sxs-lookup"><span data-stu-id="20921-170">In 2014, Azure announced that networking resources will move from a cluster level scope tooregional scope.</span></span> <span data-ttu-id="20921-171">Vedere [http://aka.ms/regionalscope] per altri dettagli (http://aka.ms/regionalscope).</span><span class="sxs-lookup"><span data-stu-id="20921-171">See [http://aka.ms/regionalscope] for more details (http://aka.ms/regionalscope).</span></span> <span data-ttu-id="20921-172">Questo errore si verifica quando un'operazione di aggiornamento, che sposta automaticamente tooa internazionali ambito non è stato distribuzione hello viene eseguita la migrazione.</span><span class="sxs-lookup"><span data-stu-id="20921-172">This error happens when hello deployment being migrated has not had an update operation, which automatically moves it tooa regional scope.</span></span> <span data-ttu-id="20921-173">Soluzione alternativa migliore è tooeither aggiungere un tooa endpoint macchina virtuale o un tipo di dati disco toohello macchina virtuale, quindi ripetere la migrazione.</span><span class="sxs-lookup"><span data-stu-id="20921-173">Best workaround is tooeither add an endpoint tooa VM or a data disk toohello VM and then retry migration.</span></span> <br> <span data-ttu-id="20921-174">Vedere [come tooset degli endpoint in una macchina virtuale di Windows classica in Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) o [collegare una macchina virtuale di Windows di dati su disco tooa creata con il modello di distribuzione classica hello](../articles/virtual-machines/windows/classic/attach-disk.md)</span><span class="sxs-lookup"><span data-stu-id="20921-174">See [How tooset up endpoints on a classic Windows virtual machine in Azure](../articles/virtual-machines/windows/classic/setup-endpoints.md#create-an-endpoint) or [Attach a data disk tooa Windows virtual machine created with hello classic deployment model](../articles/virtual-machines/windows/classic/attach-disk.md)</span></span>|


## <a name="detailed-mitigations"></a><span data-ttu-id="20921-175">Soluzioni di prevenzione dettagliate</span><span class="sxs-lookup"><span data-stu-id="20921-175">Detailed mitigations</span></span>

### <a name="vm-with-data-disk-whose-physical-blob-size-bytes-does-not-match-hello-vm-data-disk-logical-size-bytes"></a><span data-ttu-id="20921-176">Macchina virtuale con un disco dati il cui fisica dimensione in byte del blob non corrisponde a byte la dimensione logica di hello disco dati della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="20921-176">VM with Data Disk whose physical blob size bytes does not match hello VM Data Disk logical size bytes.</span></span>

<span data-ttu-id="20921-177">Ciò accade quando hello dimensione logica del disco dati può ottenere sincronizzato con dimensioni di blob VHD effettive hello.</span><span class="sxs-lookup"><span data-stu-id="20921-177">This happens when hello Data disk logical size can get out of sync with hello actual VHD blob size.</span></span> <span data-ttu-id="20921-178">Ciò può essere verificato con facilità utilizzando hello seguenti comandi:</span><span class="sxs-lookup"><span data-stu-id="20921-178">This can be easily verified using hello following commands:</span></span>

#### <a name="verifying-hello-issue"></a><span data-ttu-id="20921-179">Verifica per determinare se il problema di hello</span><span class="sxs-lookup"><span data-stu-id="20921-179">Verifying hello issue</span></span>

```PowerShell
# Store hello VM details in hello VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

# Display hello data disk properties
# NOTE hello data disk LogicalDiskSizeInGB below which is 11GB. Also note hello MediaLink Uri of hello VHD blob as we'll use this in hello next step
$vm.VM.DataVirtualHardDisks


HostCaching         : None
DiskLabel           : 
DiskName            : coreosvm-coreosvm-0-201611230636240687
Lun                 : 0
LogicalDiskSizeInGB : 11
MediaLink           : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
SourceMediaLink     : 
IOType              : Standard
ExtensionData       : 

# Now get hello properties of hello blob backing hello data disk above
# NOTE hello size of hello blob is about 15 GB which is different from LogicalDiskSizeInGB above
$blob = Get-AzureStorageblob -Blob "coreosvm-dd1.vhd" -Container vhds 

$blob

ICloudBlob        : Microsoft.WindowsAzure.Storage.Blob.CloudPageBlob
BlobType          : PageBlob
Length            : 16106127872
ContentType       : application/octet-stream
LastModified      : 11/23/2016 7:16:22 AM +00:00
SnapshotTime      : 
ContinuationToken : 
Context           : Microsoft.WindowsAzure.Commands.Common.Storage.AzureStorageContext
Name              : coreosvm-dd1.vhd
```

#### <a name="mitigating-hello-issue"></a><span data-ttu-id="20921-180">Riduzione del rischio problema hello</span><span class="sxs-lookup"><span data-stu-id="20921-180">Mitigating hello issue</span></span>

```PowerShell
# Convert hello blob size in bytes tooGB into a variable which we'll use later
$newSize = [int]($blob.Length / 1GB)

# See hello calculated size in GB
$newSize

15

# Store hello disk name of hello data disk as we'll use this tooidentify hello disk toobe updated
$diskName = $vm.VM.DataVirtualHardDisks[0].DiskName

# Identify hello LUN of hello data disk tooremove
$lunToRemove = $vm.VM.DataVirtualHardDisks[0].Lun

# Now remove hello data disk from hello VM so that hello disk isn't leased by hello VM and it's size can be updated
Remove-AzureDataDisk -LUN $lunToRemove -VM $vm | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       213xx1-b44b-1v6n-23gg-591f2a13cd16   Succeeded  

# Verify we have hello right disk that's going toobe updated
Get-AzureDisk -DiskName $diskName

AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : 
Location             : East US
DiskSizeInGB         : 11
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 0c56a2b7-a325-123b-7043-74c27d5a61fd
OperationStatus      : Succeeded

# Now update hello disk toohello new size
Update-AzureDisk -DiskName $diskName -ResizedSizeInGB $newSize -Label $diskName

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureDisk     cv134b65-1b6n-8908-abuo-ce9e395ac3e7 Succeeded 

# Now verify that hello "DiskSizeInGB" property of hello disk matches hello size of hello blob 
Get-AzureDisk -DiskName $diskName


AffinityGroup        : 
AttachedTo           : 
IsCorrupted          : False
Label                : coreosvm-coreosvm-0-201611230636240687
Location             : East US
DiskSizeInGB         : 15
MediaLink            : https://contosostorage.blob.core.windows.net/vhds/coreosvm-dd1.vhd
DiskName             : coreosvm-coreosvm-0-201611230636240687
SourceImageName      : 
OS                   : 
IOType               : Standard
OperationDescription : Get-AzureDisk
OperationId          : 1v53bde5-cv56-5621-9078-16b9c8a0bad2
OperationStatus      : Succeeded

# Now we'll add hello disk back toohello VM as a data disk. First we need tooget an updated VM object
$vm = Get-AzureVM -ServiceName $servicename -Name $vmname

Add-AzureDataDisk -Import -DiskName $diskName -LUN 0 -VM $vm -HostCaching ReadWrite | Update-AzureVm -Name $vmname -ServiceName $servicename

OperationDescription OperationId                          OperationStatus
-------------------- -----------                          ---------------
Update-AzureVM       b0ad3d4c-4v68-45vb-xxc1-134fd010d0f8 Succeeded      
```

### <a name="moving-a-vm-tooa-different-subscription-after-completing-migration"></a><span data-ttu-id="20921-181">Lo spostamento di una sottoscrizione diversa tooa VM dopo il completamento della migrazione</span><span class="sxs-lookup"><span data-stu-id="20921-181">Moving a VM tooa different subscription after completing migration</span></span>

<span data-ttu-id="20921-182">Dopo aver completato il processo di migrazione hello, si consiglia di sottoscrizione di tooanother toomove hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="20921-182">After you complete hello migration process, you may want toomove hello VM tooanother subscription.</span></span> <span data-ttu-id="20921-183">Tuttavia, se è installato un certificato di chiave privata/hello Sposta macchina virtuale che fa riferimento a una risorsa dell'insieme di credenziali chiave, hello non è supportato.</span><span class="sxs-lookup"><span data-stu-id="20921-183">However, if you have a secret/certificate on hello VM that references a Key Vault resource, hello move is currently not supported.</span></span> <span data-ttu-id="20921-184">Hello istruzioni seguenti consentirà problema hello tooworkaround.</span><span class="sxs-lookup"><span data-stu-id="20921-184">hello below instructions will allow you tooworkaround hello issue.</span></span> 

#### <a name="powershell"></a><span data-ttu-id="20921-185">PowerShell</span><span class="sxs-lookup"><span data-stu-id="20921-185">PowerShell</span></span>
```powershell
$vm = Get-AzureRmVM -ResourceGroupName "MyRG" -Name "MyVM"
Remove-AzureRmVMSecret -VM $vm
Update-AzureRmVM -ResourceGroupName "MyRG" -VM $vm
```
#### <a name="azure-cli-20"></a><span data-ttu-id="20921-186">Interfaccia della riga di comando di Azure 2.0</span><span class="sxs-lookup"><span data-stu-id="20921-186">Azure CLI 2.0</span></span>

```bash
az vm update -g "myrg" -n "myvm" --set osProfile.Secrets=[]
```
