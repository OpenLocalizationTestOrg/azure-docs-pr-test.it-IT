---
title: aaaData dipendente routing con il Database SQL di Azure | Documenti Microsoft
description: "Come toouse hello ShardMapManager classe nelle applicazioni .NET per una funzionalità di database partizionati nel Database di SQL Azure routing dipendente dai dati"
services: sql-database
documentationcenter: 
manager: jhubbard
author: torsteng
editor: 
ms.assetid: cad09e15-5561-4448-aa18-b38f54cda004
ms.service: sql-database
ms.custom: scale out apps
ms.workload: sql-database
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/27/2017
ms.author: ddove
ms.openlocfilehash: 34014508ae01905686791fe096bb275cb84f53b4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="data-dependent-routing"></a><span data-ttu-id="da5a3-103">Routing dipendente dei dati</span><span class="sxs-lookup"><span data-stu-id="da5a3-103">Data dependent routing</span></span>
<span data-ttu-id="da5a3-104">**Routing dipendente dai dati** hello possibilità toouse hello dati in un query tooroute hello richiesta tooan database appropriato.</span><span class="sxs-lookup"><span data-stu-id="da5a3-104">**Data dependent routing** is hello ability toouse hello data in a query tooroute hello request tooan appropriate database.</span></span> <span data-ttu-id="da5a3-105">Questo costituisce un criterio fondamentale quando si usano database partizionati.</span><span class="sxs-lookup"><span data-stu-id="da5a3-105">This is a fundamental pattern when working with sharded databases.</span></span> <span data-ttu-id="da5a3-106">contesto della richiesta Hello può essere richiesta hello tooroute utilizzato, soprattutto se la chiave di partizionamento orizzontale hello non fa parte di query hello.</span><span class="sxs-lookup"><span data-stu-id="da5a3-106">hello request context may also be used tooroute hello request, especially if hello sharding key is not part of hello query.</span></span> <span data-ttu-id="da5a3-107">Ogni query specifica o la transazione in un'applicazione che utilizza il routing dipendente dai dati è limitato tooaccessing un singolo database per ogni richiesta.</span><span class="sxs-lookup"><span data-stu-id="da5a3-107">Each specific query or transaction in an application using data dependent routing is restricted tooaccessing a single database per request.</span></span> <span data-ttu-id="da5a3-108">Strumenti di Azure SQL Database elastico hello, questo ciclo viene eseguito con hello  **[ShardMapManager classe](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx)**  nelle applicazioni ADO.NET.</span><span class="sxs-lookup"><span data-stu-id="da5a3-108">For hello Azure SQL Database Elastic tools, this routing is accomplished with hello **[ShardMapManager class](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanager.aspx)** in ADO.NET applications.</span></span>

<span data-ttu-id="da5a3-109">un'applicazione Hello non è necessario tootrack diverse stringhe di connessione o percorsi DB associati a diversi intervalli di dati nell'ambiente partizionato hello.</span><span class="sxs-lookup"><span data-stu-id="da5a3-109">hello application does not need tootrack various connection strings or DB locations associated with different slices of data in hello sharded environment.</span></span> <span data-ttu-id="da5a3-110">In alternativa, hello [gestore mappe partizioni](sql-database-elastic-scale-shard-map-management.md) apre le connessioni toohello database corretti quando necessario, in base ai dati hello mappa partizioni hello e il valore di hello della chiave di partizionamento orizzontale hello hello destinazione della richiesta dell'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="da5a3-110">Instead, hello [Shard Map Manager](sql-database-elastic-scale-shard-map-management.md) opens connections toohello correct databases when needed, based on hello data in hello shard map and hello value of hello sharding key that is hello target of hello application’s request.</span></span> <span data-ttu-id="da5a3-111">chiave di Hello è in genere hello *customer_id*, *tenant_id*, *date_key*, o un altro identificatore specifico che è un parametro di richiesta di database hello fondamentale).</span><span class="sxs-lookup"><span data-stu-id="da5a3-111">hello key is typically hello *customer_id*, *tenant_id*, *date_key*, or some other specific identifier that is a fundamental parameter of hello database request).</span></span> 

<span data-ttu-id="da5a3-112">Per altre informazioni, vedere la pagina relativa [all'aumento del numero di istanze di SQL Server con il routing dipendente dai dati](https://technet.microsoft.com/library/cc966448.aspx).</span><span class="sxs-lookup"><span data-stu-id="da5a3-112">For more information, see [Scaling Out SQL Server with Data Dependent Routing](https://technet.microsoft.com/library/cc966448.aspx).</span></span>

## <a name="download-hello-client-library"></a><span data-ttu-id="da5a3-113">Scaricare la libreria client di hello</span><span class="sxs-lookup"><span data-stu-id="da5a3-113">Download hello client library</span></span>
<span data-ttu-id="da5a3-114">classe hello tooget, installare hello [libreria Client di Database elastico](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span><span class="sxs-lookup"><span data-stu-id="da5a3-114">tooget hello class, install hello [Elastic Database Client Library](http://www.nuget.org/packages/Microsoft.Azure.SqlDatabase.ElasticScale.Client/).</span></span> 

## <a name="using-a-shardmapmanager-in-a-data-dependent-routing-application"></a><span data-ttu-id="da5a3-115">Uso di ShardMapManager in un'applicazione di routing dipendente dai dati</span><span class="sxs-lookup"><span data-stu-id="da5a3-115">Using a ShardMapManager in a data dependent routing application</span></span>
<span data-ttu-id="da5a3-116">Le applicazioni devono creare un'istanza di hello **ShardMapManager** durante l'inizializzazione, tramite chiamata factory hello  **[GetSQLShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx)**.</span><span class="sxs-lookup"><span data-stu-id="da5a3-116">Applications should instantiate hello **ShardMapManager** during initialization, using hello factory call **[GetSQLShardMapManager](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmapmanagerfactory.getsqlshardmapmanager.aspx)**.</span></span> <span data-ttu-id="da5a3-117">In questo esempio, viene eseguita l'inizializzazione sia di **ShardMapManager** che una **ShardMap** specifica in essa contenuta.</span><span class="sxs-lookup"><span data-stu-id="da5a3-117">In this example, both a **ShardMapManager** and a specific **ShardMap** that it contains are initialized.</span></span> <span data-ttu-id="da5a3-118">In questo esempio mostra hello GetSqlShardMapManager e [GetRangeShardMap](https://msdn.microsoft.com/library/azure/dn824173.aspx) metodi.</span><span class="sxs-lookup"><span data-stu-id="da5a3-118">This example shows hello GetSqlShardMapManager and [GetRangeShardMap](https://msdn.microsoft.com/library/azure/dn824173.aspx) methods.</span></span>

    ShardMapManager smm = ShardMapManagerFactory.GetSqlShardMapManager(smmConnnectionString, 
                      ShardMapManagerLoadPolicy.Lazy);
    RangeShardMap<int> customerShardMap = smm.GetRangeShardMap<int>("customerMap"); 

### <a name="use-lowest-privilege-credentials-possible-for-getting-hello-shard-map"></a><span data-ttu-id="da5a3-119">Utilizzare credenziali con privilegi più basse possibile per ottenere una mappa partizioni hello</span><span class="sxs-lookup"><span data-stu-id="da5a3-119">Use lowest privilege credentials possible for getting hello shard map</span></span>
<span data-ttu-id="da5a3-120">Se un'applicazione non è la manipolazione dei mappa partizioni hello stesso, le credenziali di hello utilizzate nel metodo factory hello devono disporre di autorizzazioni solo di sola lettura in hello **globale mappa partizioni** database.</span><span class="sxs-lookup"><span data-stu-id="da5a3-120">If an application is not manipulating hello shard map itself, hello credentials used in hello factory method should have just read-only permissions on hello **Global Shard Map** database.</span></span> <span data-ttu-id="da5a3-121">Queste credenziali sono solitamente diverse da gestore mappe partizioni di credenziali utilizzate tooopen connessioni toohello.</span><span class="sxs-lookup"><span data-stu-id="da5a3-121">These credentials are typically different from credentials used tooopen connections toohello shard map manager.</span></span> <span data-ttu-id="da5a3-122">Vedere anche [utilizzate le credenziali della libreria client di Database elastico hello tooaccess](sql-database-elastic-scale-manage-credentials.md).</span><span class="sxs-lookup"><span data-stu-id="da5a3-122">See also [Credentials used tooaccess hello Elastic Database client library](sql-database-elastic-scale-manage-credentials.md).</span></span> 

## <a name="call-hello-openconnectionforkey-method"></a><span data-ttu-id="da5a3-123">Chiamare il metodo OpenConnectionForKey hello</span><span class="sxs-lookup"><span data-stu-id="da5a3-123">Call hello OpenConnectionForKey method</span></span>
<span data-ttu-id="da5a3-124">Hello  **[ShardMap.OpenConnectionForKey metodo](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx)**  restituisce una connessione ADO.Net pronto per il rilascio di comandi toohello appropriate del database in base al valore di hello di hello **chiave**parametro.</span><span class="sxs-lookup"><span data-stu-id="da5a3-124">hello **[ShardMap.OpenConnectionForKey method](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkey.aspx)** returns an ADO.Net connection ready for issuing commands toohello appropriate database based on hello value of hello **key** parameter.</span></span> <span data-ttu-id="da5a3-125">Informazioni di partizione memorizzati nella cache in un'applicazione hello hello **ShardMapManager**, pertanto queste richieste non in genere dovuti a una ricerca di database in hello **globale mappa partizioni** database.</span><span class="sxs-lookup"><span data-stu-id="da5a3-125">Shard information is cached in hello application by hello **ShardMapManager**, so these requests do not typically involve a database lookup against hello **Global Shard Map** database.</span></span> 

    // Syntax: 
    public SqlConnection OpenConnectionForKey<TKey>(
        TKey key,
        string connectionString,
        ConnectionOptions options
    )


* <span data-ttu-id="da5a3-126">Hello **chiave** parametro viene utilizzato come chiave di ricerca nel database appropriato di hello partizioni mappa toodetermine hello per richiesta hello.</span><span class="sxs-lookup"><span data-stu-id="da5a3-126">hello **key** parameter is used as a lookup key into hello shard map toodetermine hello appropriate database for hello request.</span></span> 
* <span data-ttu-id="da5a3-127">Hello **connectionString** è toopass utilizzate solo le credenziali utente hello per connessione hello desiderato.</span><span class="sxs-lookup"><span data-stu-id="da5a3-127">hello **connectionString** is used toopass only hello user credentials for hello desired connection.</span></span> <span data-ttu-id="da5a3-128">Nessun nome di database o server sono inclusi in questo *connectionString* poiché il metodo hello determinerà database hello e server mediante hello **ShardMap**.</span><span class="sxs-lookup"><span data-stu-id="da5a3-128">No database name or server name are included in this *connectionString* since hello method will determine hello database and server using hello **ShardMap**.</span></span> 
* <span data-ttu-id="da5a3-129">Hello  **[connectionOptions](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.connectionoptions.aspx)**  deve essere impostato troppo**ConnectionOptions.Validate** può modificare un ambiente in cui esegue il mapping di partizione e righe possono spostare i database tooother un risultato di operazioni di divisione o di unione.</span><span class="sxs-lookup"><span data-stu-id="da5a3-129">hello **[connectionOptions](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.connectionoptions.aspx)** should be set too**ConnectionOptions.Validate** if an environment where shard maps may change and rows may move tooother databases as a result of split or merge operations.</span></span> <span data-ttu-id="da5a3-130">L'operazione comporta una mappa di partizioni locale toohello breve query nel database di destinazione hello (non mappa partizioni globale toohello) prima della connessione hello viene recapitato toohello applicazione.</span><span class="sxs-lookup"><span data-stu-id="da5a3-130">This involves a brief query toohello local shard map on hello target database (not toohello global shard map) before hello connection is delivered toohello application.</span></span> 

<span data-ttu-id="da5a3-131">Se la convalida di hello rispetto a mappa di partizioni locale hello non riesce (che indica che non è corretta della cache di hello), hello gestore mappe partizioni richiederà hello partizioni globale mappa tooobtain hello nuovo valore corretto per la ricerca di hello, aggiornare la cache di hello e ottenere e restituiscono hello connessione al database appropriato.</span><span class="sxs-lookup"><span data-stu-id="da5a3-131">If hello validation against hello local shard map fails (indicating that hello cache is incorrect), hello Shard Map Manager will query hello global shard map tooobtain hello new correct value for hello lookup, update hello cache, and obtain and return hello appropriate database connection.</span></span> 

<span data-ttu-id="da5a3-132">Usare **ConnectionOptions.None** solo se non sono previste modifiche al mapping delle partizioni mentre l'applicazione è online.</span><span class="sxs-lookup"><span data-stu-id="da5a3-132">Use **ConnectionOptions.None** only when shard mapping changes are not expected while an application is online.</span></span> <span data-ttu-id="da5a3-133">In tal caso, i valori memorizzati nella cache di hello possano presupporre tooalways sia corretto e database di destinazione toohello chiamata hello convalida completa il round trip aggiuntivo può essere ignorata in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="da5a3-133">In that case, hello cached values can be assumed tooalways be correct, and hello extra round-trip validation call toohello target database can be safely skipped.</span></span> <span data-ttu-id="da5a3-134">Ciò riduce il traffico del database.</span><span class="sxs-lookup"><span data-stu-id="da5a3-134">That reduces database traffic.</span></span> <span data-ttu-id="da5a3-135">Hello **connectionOptions** può essere impostato tramite un valore in un tooindicate di file di configurazione anche se sono previste modifiche di partizionamento orizzontale o meno eseguito durante un periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="da5a3-135">hello **connectionOptions** may also be set via a value in a configuration file tooindicate whether sharding changes are expected or not during a period of time.</span></span>  

<span data-ttu-id="da5a3-136">Questo esempio viene utilizzato il valore di hello di una chiave integer **CustomerID**, usando un **ShardMap** oggetto denominato **customerShardMap**.</span><span class="sxs-lookup"><span data-stu-id="da5a3-136">This example uses hello value of an integer key **CustomerID**, using a **ShardMap** object named **customerShardMap**.</span></span>  

    int customerId = 12345; 
    int newPersonId = 4321; 

    // Connect toohello shard for that customer ID. No need toocall a SqlConnection 
    // constructor followed by hello Open method.
    using (SqlConnection conn = customerShardMap.OpenConnectionForKey(customerId, 
        Configuration.GetCredentialsConnectionString(), ConnectionOptions.Validate)) 
    { 
        // Execute a simple command. 
        SqlCommand cmd = conn.CreateCommand(); 
        cmd.CommandText = @"UPDATE Sales.Customer 
                            SET PersonID = @newPersonID 
                            WHERE CustomerID = @customerID"; 

        cmd.Parameters.AddWithValue("@customerID", customerId); 
        cmd.Parameters.AddWithValue("@newPersonID", newPersonId); 
        cmd.ExecuteNonQuery(); 
    }  

<span data-ttu-id="da5a3-137">Hello **OpenConnectionForKey** il metodo restituisce un nuovo database corretto toohello di connessione già aperta.</span><span class="sxs-lookup"><span data-stu-id="da5a3-137">hello **OpenConnectionForKey** method returns a new already-open connection toohello correct database.</span></span> <span data-ttu-id="da5a3-138">Le connessioni usate in questo modo usufruiscono comunque del pool di connessioni ADO.Net.</span><span class="sxs-lookup"><span data-stu-id="da5a3-138">Connections utilized in this way still take full advantage of ADO.Net connection pooling.</span></span> <span data-ttu-id="da5a3-139">Fino a quando le transazioni e le richieste possono essere soddisfatti da una partizione alla volta, deve essere modifica solo hello necessaria in un'applicazione ADO.Net già in uso.</span><span class="sxs-lookup"><span data-stu-id="da5a3-139">As long as transactions and requests can be satisfied by one shard at a time, this should be hello only modification necessary in an application already using ADO.Net.</span></span> 

<span data-ttu-id="da5a3-140">Hello  **[OpenConnectionForKeyAsync metodo](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkeyasync.aspx)**  disponibile anche se l'applicazione esegue la programmazione asincrona di utilizzo con ADO.Net.</span><span class="sxs-lookup"><span data-stu-id="da5a3-140">hello **[OpenConnectionForKeyAsync method](https://msdn.microsoft.com/library/azure/microsoft.azure.sqldatabase.elasticscale.shardmanagement.shardmap.openconnectionforkeyasync.aspx)** is also available if your application makes use asynchronous programming with ADO.Net.</span></span> <span data-ttu-id="da5a3-141">Il comportamento corrispondente non dati hello dipendenti routing equivalente di ADO. Del NET  **[Connection.OpenAsync](https://msdn.microsoft.com/library/hh223688\(v=vs.110\).aspx)**  metodo.</span><span class="sxs-lookup"><span data-stu-id="da5a3-141">Its behavior is hello data dependent routing equivalent of ADO.Net's **[Connection.OpenAsync](https://msdn.microsoft.com/library/hh223688\(v=vs.110\).aspx)** method.</span></span>

## <a name="integrating-with-transient-fault-handling"></a><span data-ttu-id="da5a3-142">Integrazione con la gestione degli errori temporanei</span><span class="sxs-lookup"><span data-stu-id="da5a3-142">Integrating with transient fault handling</span></span>
<span data-ttu-id="da5a3-143">Consigliata per lo sviluppo di applicazioni di accesso ai dati nel cloud hello è tooensure che gli errori temporanei vengono intercettati da app hello e che le operazioni di hello sono dopo diversi tentativi prima di generare un errore.</span><span class="sxs-lookup"><span data-stu-id="da5a3-143">A best practice in developing data access applications in hello cloud is tooensure that transient faults are caught by hello app, and that hello operations are retried several times before throwing an error.</span></span> <span data-ttu-id="da5a3-144">La gestione degli errori temporanei per le applicazioni cloud è illustrata nella pagina relativa alla [gestione degli errori temporanei](https://msdn.microsoft.com/library/dn440719\(v=pandp.60\).aspx).</span><span class="sxs-lookup"><span data-stu-id="da5a3-144">Transient fault handling for cloud applications is discussed at [Transient Fault Handling](https://msdn.microsoft.com/library/dn440719\(v=pandp.60\).aspx).</span></span> 

<span data-ttu-id="da5a3-145">Gestione degli errori temporanei possono coesistere naturalmente con modello di Routing dipendente dai dati hello.</span><span class="sxs-lookup"><span data-stu-id="da5a3-145">Transient fault handling can coexist naturally with hello Data Dependent Routing pattern.</span></span> <span data-ttu-id="da5a3-146">il requisito principale Hello è tooretry richiesta di accesso tutti i dati hello inclusi hello **utilizzando** blocco ottenuto connessione di routing dipendente dai dati hello.</span><span class="sxs-lookup"><span data-stu-id="da5a3-146">hello key requirement is tooretry hello entire data access request including hello **using** block that obtained hello data-dependent routing connection.</span></span> <span data-ttu-id="da5a3-147">esempio Hello precedente potrebbe essere riscritto come segue (notare modifiche evidenziato).</span><span class="sxs-lookup"><span data-stu-id="da5a3-147">hello example above could be rewritten as follows (note highlighted change).</span></span> 

### <a name="example---data-dependent-routing-with-transient-fault-handling"></a><span data-ttu-id="da5a3-148">Esempio: routing dipendente dai dati con gestione degli errori temporanei</span><span class="sxs-lookup"><span data-stu-id="da5a3-148">Example - data dependent routing with transient fault handling</span></span>
<pre><code>int customerId = 12345; 
int newPersonId = 4321; 

<span style="background-color:  #FFFF00">Configuration.SqlRetryPolicy.ExecuteAction(() =&gt; </span> 
<span style="background-color:  #FFFF00">    { </span>
        // Connect toohello shard for a customer ID. 
        using (SqlConnection conn = customerShardMap.OpenConnectionForKey(customerId,  
        Configuration.GetCredentialsConnectionString(), ConnectionOptions.Validate)) 
        { 
            // Execute a simple command 
            SqlCommand cmd = conn.CreateCommand(); 

            cmd.CommandText = @&quot;UPDATE Sales.Customer 
                            SET PersonID = @newPersonID 
                            WHERE CustomerID = @customerID&quot;; 

            cmd.Parameters.AddWithValue(&quot;@customerID&quot;, customerId); 
            cmd.Parameters.AddWithValue(&quot;@newPersonID&quot;, newPersonId); 
            cmd.ExecuteNonQuery(); 

            Console.WriteLine(&quot;Update completed&quot;); 
        } 
<span style="background-color:  #FFFF00">    }); </span> 
</code></pre>


<span data-ttu-id="da5a3-149">Pacchetti di gestione degli errori temporanei tooimplement necessarie vengono scaricati automaticamente quando si compila l'applicazione di esempio hello database elastico.</span><span class="sxs-lookup"><span data-stu-id="da5a3-149">Packages necessary tooimplement transient fault handling are downloaded automatically when you build hello elastic database sample application.</span></span> <span data-ttu-id="da5a3-150">I pacchetti sono disponibili anche separatamente nella pagina relativa al [blocco di applicazioni di gestione degli errori temporanei nella libreria Enterprise](http://www.nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/).</span><span class="sxs-lookup"><span data-stu-id="da5a3-150">Packages are also available separately at [Enterprise Library - Transient Fault Handling Application Block](http://www.nuget.org/packages/EnterpriseLibrary.TransientFaultHandling/).</span></span> <span data-ttu-id="da5a3-151">Usare la versione 6.0 o successiva.</span><span class="sxs-lookup"><span data-stu-id="da5a3-151">Use version 6.0 or later.</span></span> 

## <a name="transactional-consistency"></a><span data-ttu-id="da5a3-152">Coerenza delle transazioni</span><span class="sxs-lookup"><span data-stu-id="da5a3-152">Transactional consistency</span></span>
<span data-ttu-id="da5a3-153">Le proprietà di transazione vengono garantite per tutte le partizioni tooa locale di operazioni.</span><span class="sxs-lookup"><span data-stu-id="da5a3-153">Transactional properties are guaranteed for all operations local tooa shard.</span></span> <span data-ttu-id="da5a3-154">Ad esempio, le transazioni inviate tramite il routing dipendente dai dati eseguito entro l'ambito di hello della partizione di destinazione hello per connessione hello.</span><span class="sxs-lookup"><span data-stu-id="da5a3-154">For example, transactions submitted through data-dependent routing execute within hello scope of hello target shard for hello connection.</span></span> <span data-ttu-id="da5a3-155">Al momento, non sono disponibili funzionalità per l'inserimento di più connessioni in una transazione e pertanto non esistono garanzie transazionale per le operazioni eseguite tra partizioni.</span><span class="sxs-lookup"><span data-stu-id="da5a3-155">At this time, there are no capabilities provided for enlisting multiple connections into a transaction, and therefore there are no transactional guarantees for operations performed across shards.</span></span>

## <a name="next-steps"></a><span data-ttu-id="da5a3-156">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="da5a3-156">Next steps</span></span>
<span data-ttu-id="da5a3-157">vedere toodetach una partizione o una partizione, tooreattach [utilizzando i problemi di mappa partizioni toofix classe RecoveryManager hello](sql-database-elastic-database-recovery-manager.md)</span><span class="sxs-lookup"><span data-stu-id="da5a3-157">toodetach a shard, or tooreattach a shard, see [Using hello RecoveryManager class toofix shard map problems](sql-database-elastic-database-recovery-manager.md)</span></span>

[!INCLUDE [elastic-scale-include](../../includes/elastic-scale-include.md)]

