---
title: Monitoraggio e diagnostica dei contenitori di Azure Service Fabric | Microsoft Docs
description: "Informazioni su come eseguire attività di monitoraggio e diagnostica per i contenitori orchestrati in Microsoft Azure Service Fabric con la soluzione Contenitori di OMS."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: 874c1a5c4b399ff2254072b7282f05d83a005cc3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="a2c8d-103">Monitoraggio dei contenitori Windows Server con OMS</span><span class="sxs-lookup"><span data-stu-id="a2c8d-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="a2c8d-104">Soluzione Contenitori di OMS</span><span class="sxs-lookup"><span data-stu-id="a2c8d-104">OMS Containers Solution</span></span>

<span data-ttu-id="a2c8d-105">Il team di Operations Management Suite (OMS) ha pubblicato una soluzione Contenitori per la diagnostica e il monitoraggio dei contenitori.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-105">The Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="a2c8d-106">Insieme alla soluzione Service Fabric, questa soluzione è uno strumento straordinario per il monitoraggio delle distribuzioni di contenitori orchestrate in Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-106">Alongside their Service Fabric solution, this solution is a great tool to monitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="a2c8d-107">Ecco un semplice esempio di dashboard della soluzione:</span><span class="sxs-lookup"><span data-stu-id="a2c8d-107">Here's a simple example of what the dashboard in the solution looks like:</span></span>

![Dashboard OMS di base](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="a2c8d-109">Questo strumento raccoglie anche diversi tipi di log su cui è possibile eseguire query nello strumento Log Analytics di OMS e che è possibile usare per visualizzare le metriche o gli eventi generati.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-109">It also collects different kinds of logs that can be queried in the OMS Log Analytics tool, and can be used to visualize any metrics or events being generated.</span></span> <span data-ttu-id="a2c8d-110">I tipi di log raccolti sono:</span><span class="sxs-lookup"><span data-stu-id="a2c8d-110">The log types that are collected are:</span></span>

1. <span data-ttu-id="a2c8d-111">ContainerInventory: informazioni su posizione, nome e immagini dei contenitori</span><span class="sxs-lookup"><span data-stu-id="a2c8d-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="a2c8d-112">ContainerImageInventory: informazioni sulle immagini distribuite, inclusi ID o dimensioni</span><span class="sxs-lookup"><span data-stu-id="a2c8d-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="a2c8d-113">ContainerLog: log degli errori specifici, log Docker (stdout e così via) e altre voci</span><span class="sxs-lookup"><span data-stu-id="a2c8d-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="a2c8d-114">ContainerServiceLog: comandi del daemon Docker che sono stati eseguiti</span><span class="sxs-lookup"><span data-stu-id="a2c8d-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="a2c8d-115">Perf: contatori delle prestazioni, inclusi cpu, memoria, traffico di rete, I/O del disco e metriche personalizzate dei contenitori dai computer host</span><span class="sxs-lookup"><span data-stu-id="a2c8d-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from the host machines</span></span>

<span data-ttu-id="a2c8d-116">Questo articolo illustra i passaggi necessari per configurare il monitoraggio dei contenitori per il cluster.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-116">This article covers the steps required to set up container monitoring for your cluster.</span></span> <span data-ttu-id="a2c8d-117">Per altre informazioni sulla soluzione Contenitori di OMS, vedere la relativa [documentazione](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="a2c8d-117">To learn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="a2c8d-118">1. Configurare un cluster di Service Fabric</span><span class="sxs-lookup"><span data-stu-id="a2c8d-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="a2c8d-119">Creare un cluster usando il modello di Azure Resource Manager disponibile [qui](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="a2c8d-119">Create a cluster using the Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="a2c8d-120">Assicurarsi di aggiungere un nome di area di lavoro di OMS univoco.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-120">Make sure to add a unique OMS workspace name.</span></span> <span data-ttu-id="a2c8d-121">Questo modello per impostazione predefinita distribuisce un cluster nella versione di anteprima di Service Fabric (v255.255), il che significa che non può essere usato nell'ambiente di produzione e non può essere aggiornato a una versione di Service Fabric diversa.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-121">This template also defaults to deploying a cluster in the preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded to a different Service Fabric version.</span></span> <span data-ttu-id="a2c8d-122">Se si decide di usare questo modello a lungo termine o in produzione, modificare la versione impostando un numero di versione stabile.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-122">If you decide to use this template for long-term or production use, change the version to a stable version number.</span></span>

<span data-ttu-id="a2c8d-123">Una volta configurato il cluster, verificare di avere installato il certificato appropriato e assicurarsi di potersi connettere al cluster.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-123">Once the cluster is set up, confirm that you have installed the appropriate certificate, and make sure you are able to connect to the cluster.</span></span>

<span data-ttu-id="a2c8d-124">Verificare che il gruppo di risorse sia configurato correttamente passando al [portale di Azure](https://portal.azure.com/) e individuando la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-124">Confirm that your Resource Group is set up correctly by heading to the [Azure portal](https://portal.azure.com/) and finding the deployment.</span></span> <span data-ttu-id="a2c8d-125">Il gruppo di risorse deve contenere tutte le risorse di Service Fabric e anche una soluzione Log Analytics, oltre che la soluzione Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-125">The resource group should contain all the Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="a2c8d-126">Per la modifica di un cluster di Service Fabric esistente:</span><span class="sxs-lookup"><span data-stu-id="a2c8d-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="a2c8d-127">Verificare che la soluzione di diagnostica sia abilitata (in caso contrario, abilitarla tramite l'[aggiornamento del set di scalabilità di macchine virtuali](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="a2c8d-127">Confirm that Diagnostics is enabled (if not, enable it via [updating the virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="a2c8d-128">Aggiungere un'area di lavoro di OMS creando una soluzione di "Analisi Service Fabric" tramite Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="a2c8d-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via the Azure Marketplace</span></span>
* <span data-ttu-id="a2c8d-129">Modificare le origini dati della soluzione Service Fabric per prelevare dati dalle tabelle di Archiviazione di Azure appropriate (impostate da WAD) nel gruppo di risorse in cui si trova il cluster</span><span class="sxs-lookup"><span data-stu-id="a2c8d-129">Edit the data sources of the Service Fabric solution to pick up data from the appropriate Azure Storage tables (set up by WAD) in the Resource Group that the cluster is in</span></span>
* <span data-ttu-id="a2c8d-130">Aggiungere l'agente come [estensione del set di scalabilità di macchine virtuali](/powershell/module/azurerm.compute/add-azurermvmssextension) tramite PowerShell o aggiornando il set di scalabilità di macchine virtuali (stesso collegamento specificato sopra, per modificare il modello di Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="a2c8d-130">Add the agent as an [extension to the virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating the virtual machine scale set (same link as above, to modify the Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="a2c8d-131">2. Distribuire un contenitore</span><span class="sxs-lookup"><span data-stu-id="a2c8d-131">2. Deploy a container</span></span>

<span data-ttu-id="a2c8d-132">Una volta che il cluster è pronto e si è verificato di potervi accedere, distribuire un contenitore.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-132">Once the cluster is ready and you have confirmed that you can access it, deploy a container to it.</span></span> <span data-ttu-id="a2c8d-133">Se si sceglie di usare la versione di anteprima impostata dal modello, è possibile esaminare anche la nuova funzionalità Docker Compose di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-133">If you chose to use the preview version as set by the template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="a2c8d-134">Tenere presente che la prima volta che un'immagine del contenitore viene distribuita in un cluster, sono necessari alcuni minuti per scaricare l'immagine, a seconda delle dimensioni.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-134">Bear in mind that the first time a container image is deployed to a cluster, it takes several minutes to download the image depending on its size.</span></span>

## <a name="3-add-the-containers-solution"></a><span data-ttu-id="a2c8d-135">3. Aggiungere la soluzione Contenitori</span><span class="sxs-lookup"><span data-stu-id="a2c8d-135">3. Add the Containers solution</span></span>

<span data-ttu-id="a2c8d-136">Nel portale di Azure creare una risorsa Contenitori (nella categoria Monitoraggio e gestione) tramite Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-136">In the Azure portal, create a Containers resource (under the Monitoring + Management category) through Azure Marketplace.</span></span> 

![Aggiunta della soluzione Contenitori](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="a2c8d-138">Nel passaggio di creazione viene richiesta un'area di lavoro di OMS.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-138">In the creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="a2c8d-139">Selezionare l'area creata con la distribuzione precedente.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-139">Select the one that was created with the deployment above.</span></span> <span data-ttu-id="a2c8d-140">Questo passaggio aggiunge una soluzione Contenitori nell'area di lavoro di OMS e viene rilevato automaticamente dall'agente OMS distribuito dal modello.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by the OMS agent deployed by the template.</span></span> <span data-ttu-id="a2c8d-141">L'agente inizierà a raccogliere dati nei processi dei contenitori nel cluster e, in circa 10-15 minuti, si dovrebbe vedere la soluzione con i dati come nell'immagine del dashboard precedente.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-141">The agent will start gathering data on the containers processes in the cluster, and in about 10-15 minutes, you should see the solution light up with data as in the image of the dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="a2c8d-142">4. Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="a2c8d-142">4. Next steps</span></span>

<span data-ttu-id="a2c8d-143">OMS offre diversi strumenti utili nell'area di lavoro.</span><span class="sxs-lookup"><span data-stu-id="a2c8d-143">OMS offers various tools in the workspace to make if more useful for you.</span></span> <span data-ttu-id="a2c8d-144">Esaminare le opzioni seguenti per personalizzare la soluzione in base alle esigenze:</span><span class="sxs-lookup"><span data-stu-id="a2c8d-144">Explore the following options to customize the solution to your needs:</span></span>
- <span data-ttu-id="a2c8d-145">Acquisire familiarità con le funzionalità di [ricerca log e query](../log-analytics/log-analytics-log-searches.md) incluse in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="a2c8d-145">Get familiarized with the [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="a2c8d-146">Configurare l'agente OMS per prelevare contatori delle prestazioni specifici (dalla home page dell'area di lavoro > Impostazioni > Dati > Contatori delle prestazioni di Windows)</span><span class="sxs-lookup"><span data-stu-id="a2c8d-146">Configure the OMS agent to pick up specific performance counters (go to the workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="a2c8d-147">Configurare OMS per regole di [avvisi automatizzati](../log-analytics/log-analytics-alerts.md) per semplificare il rilevamento e la diagnostica</span><span class="sxs-lookup"><span data-stu-id="a2c8d-147">Configure OMS to set up [automated alerting](../log-analytics/log-analytics-alerts.md) rules to aid in detecting and diagnostics</span></span>