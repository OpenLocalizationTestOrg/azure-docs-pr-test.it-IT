---
title: "Panoramica delle funzionalità di Hub eventi di Azure | Microsoft Docs"
description: "Panoramica e informazioni dettagliate sulle funzionalità di Hub eventi di Azure"
services: event-hubs
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: a74d767d57eb5ce2b3a716f9ba908a451f25f538
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="event-hubs-features-overview"></a><span data-ttu-id="78ebd-103">Panoramica delle funzionalità di Hub eventi</span><span class="sxs-lookup"><span data-stu-id="78ebd-103">Event Hubs features overview</span></span>

<span data-ttu-id="78ebd-104">Hub eventi di Azure è una servizio di elaborazione degli eventi scalabile che inserisce ed elabora grandi volumi di eventi e dati, con bassa latenza e affidabilità elevata.</span><span class="sxs-lookup"><span data-stu-id="78ebd-104">Azure Event Hubs is a scalable event processing service that ingests and processes large volumes of events and data, with low latency and high reliability.</span></span> <span data-ttu-id="78ebd-105">Vedere [Che cos'è Hub eventi?](event-hubs-what-is-event-hubs.md) per una panoramica generale del servizio.</span><span class="sxs-lookup"><span data-stu-id="78ebd-105">See [What is Event Hubs?](event-hubs-what-is-event-hubs.md) for a high-level overview of the service.</span></span>

<span data-ttu-id="78ebd-106">Questo articolo si basa sulle informazioni presenti nella [panoramica](event-hubs-what-is-event-hubs.md) e contiene dettagli tecnici e informazioni sull'implementazione relativi ai componenti e alle funzionalità di Hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-106">This article builds on the information in the [overview](event-hubs-what-is-event-hubs.md), and provides technical and implementation details about Event Hubs components and features.</span></span>

## <a name="event-publishers"></a><span data-ttu-id="78ebd-107">Publisher di eventi</span><span class="sxs-lookup"><span data-stu-id="78ebd-107">Event publishers</span></span>

<span data-ttu-id="78ebd-108">Qualsiasi entità che invia dati a un hub eventi è un produttore di eventi o *autore di eventi*.</span><span class="sxs-lookup"><span data-stu-id="78ebd-108">Any entity that sends data to an event hub is an event producer, or *event publisher*.</span></span> <span data-ttu-id="78ebd-109">Gli autori di eventi possono pubblicare eventi usando HTTPS o AMQP 1.0.</span><span class="sxs-lookup"><span data-stu-id="78ebd-109">Event publishers can publish events using HTTPS or AMQP 1.0.</span></span> <span data-ttu-id="78ebd-110">Gli autori di eventi usano un token di firma di accesso condiviso per identificarsi con un hub eventi e possono avere un'identità univoca oppure usare un token di firma di accesso condiviso comune.</span><span class="sxs-lookup"><span data-stu-id="78ebd-110">Event publishers use a Shared Access Signature (SAS) token to identify themselves to an event hub, and can have a unique identity, or use a common SAS token.</span></span>

### <a name="publishing-an-event"></a><span data-ttu-id="78ebd-111">Pubblicazione di un evento</span><span class="sxs-lookup"><span data-stu-id="78ebd-111">Publishing an event</span></span>

<span data-ttu-id="78ebd-112">È possibile pubblicare un evento tramite AMQP 1.0 o HTTPS.</span><span class="sxs-lookup"><span data-stu-id="78ebd-112">You can publish an event via AMQP 1.0 or HTTPS.</span></span> <span data-ttu-id="78ebd-113">Hub eventi offre [classi e librerie client](event-hubs-dotnet-framework-api-overview.md) per la pubblicazione di eventi in un hub eventi dai client .NET.</span><span class="sxs-lookup"><span data-stu-id="78ebd-113">Event Hubs provides [client libraries and classes](event-hubs-dotnet-framework-api-overview.md) for publishing events to an event hub from .NET clients.</span></span> <span data-ttu-id="78ebd-114">Per altre piattaforme e runtime, è possibile utilizzare qualsiasi client AMQP 1.0, ad esempio [Apache Qpid](http://qpid.apache.org/).</span><span class="sxs-lookup"><span data-stu-id="78ebd-114">For other runtimes and platforms, you can use any AMQP 1.0 client, such as [Apache Qpid](http://qpid.apache.org/).</span></span> <span data-ttu-id="78ebd-115">È possibile pubblicare eventi singolarmente o in batch.</span><span class="sxs-lookup"><span data-stu-id="78ebd-115">You can publish events individually, or batched.</span></span> <span data-ttu-id="78ebd-116">Una singola pubblicazione (istanza dei dati dell'evento) ha un limite di 256 KB, indipendentemente dal fatto che si tratti di un singolo evento o di un batch.</span><span class="sxs-lookup"><span data-stu-id="78ebd-116">A single publication (event data instance) has a limit of 256 KB, regardless of whether it is a single event or a batch.</span></span> <span data-ttu-id="78ebd-117">La pubblicazione di eventi di dimensioni superiori alla soglia determina un errore.</span><span class="sxs-lookup"><span data-stu-id="78ebd-117">Publishing events larger than this threshold results in an error.</span></span> <span data-ttu-id="78ebd-118">È consigliabile che gli autori non rilevino le partizioni all'interno dell'hub eventi e specifichino solo una *chiave di partizione* (illustrata nella sezione successiva) o la propria identità tramite il token di firma di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="78ebd-118">It is a best practice for publishers to be unaware of partitions within the event hub and to only specify a *partition key* (introduced in the next section), or their identity via their SAS token.</span></span>

<span data-ttu-id="78ebd-119">La scelta di utilizzare AMQP o HTTPS dipende dallo scenario di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="78ebd-119">The choice to use AMQP or HTTPS is specific to the usage scenario.</span></span> <span data-ttu-id="78ebd-120">AMQP richiede di stabilire un socket bidirezionale persistente oltre alla sicurezza a livello di trasporto (TLS) o SSL/TLS.</span><span class="sxs-lookup"><span data-stu-id="78ebd-120">AMQP requires the establishment of a persistent bidirectional socket in addition to transport level security (TLS) or SSL/TLS.</span></span> <span data-ttu-id="78ebd-121">AMQP comporta costi di rete superiori in fase di inizializzazione della sessione, ma HTTPS richiede un costo generale SSL aggiuntivo per ogni richiesta.</span><span class="sxs-lookup"><span data-stu-id="78ebd-121">AMQP has higher network costs when initializing the session, however HTTPS requires additional SSL overhead for every request.</span></span> <span data-ttu-id="78ebd-122">AMQP offre prestazioni più elevate per i server di pubblicazione più attivi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-122">AMQP has higher performance for frequent publishers.</span></span>

![Hub eventi](./media/event-hubs-features/partition_keys.png)

<span data-ttu-id="78ebd-124">Hub eventi garantisce che tutti gli eventi che condividono un valore di chiave di partizione vengano recapitati in ordine e alla stessa partizione.</span><span class="sxs-lookup"><span data-stu-id="78ebd-124">Event Hubs ensures that all events sharing a partition key value are delivered in order, and to the same partition.</span></span> <span data-ttu-id="78ebd-125">Se si usano chiavi di partizione con i criteri di autore, l'identità dell’autore e il valore della chiave di partizione devono corrispondere.</span><span class="sxs-lookup"><span data-stu-id="78ebd-125">If partition keys are used with publisher policies, then the identity of the publisher and the value of the partition key must match.</span></span> <span data-ttu-id="78ebd-126">In caso contrario, si verifica un errore.</span><span class="sxs-lookup"><span data-stu-id="78ebd-126">Otherwise, an error occurs.</span></span>

### <a name="publisher-policy"></a><span data-ttu-id="78ebd-127">Criteri di autore</span><span class="sxs-lookup"><span data-stu-id="78ebd-127">Publisher policy</span></span>

<span data-ttu-id="78ebd-128">Hub eventi consente un controllo granulare degli autori di eventi tramite *criteri di autore*.</span><span class="sxs-lookup"><span data-stu-id="78ebd-128">Event Hubs enables granular control over event publishers through *publisher policies*.</span></span> <span data-ttu-id="78ebd-129">I criteri di autore sono funzionalità di runtime progettate per consentire un numero elevato di autori di eventi indipendenti.</span><span class="sxs-lookup"><span data-stu-id="78ebd-129">Publisher policies are run-time features designed to facilitate large numbers of independent event publishers.</span></span> <span data-ttu-id="78ebd-130">Con i criteri di autore, ogni autore usa il proprio identificatore univoco durante la pubblicazione di eventi in un hub eventi, con il meccanismo seguente:</span><span class="sxs-lookup"><span data-stu-id="78ebd-130">With publisher policies, each publisher uses its own unique identifier when publishing events to an event hub, using the following mechanism:</span></span>

```
//[my namespace].servicebus.windows.net/[event hub name]/publishers/[my publisher name]
```

<span data-ttu-id="78ebd-131">Non è necessario creare nomi di autore prima di procedere, ma devono corrispondere al token SAS utilizzato quando si pubblica un evento, al fine di garantire le identità di autore indipendenti.</span><span class="sxs-lookup"><span data-stu-id="78ebd-131">You don't have to create publisher names ahead of time, but they must match the SAS token used when publishing an event, in order to ensure independent publisher identities.</span></span> <span data-ttu-id="78ebd-132">Quando si utilizzano criteri di autore, il valore **PartitionKey** è impostato sul nome dell’autore.</span><span class="sxs-lookup"><span data-stu-id="78ebd-132">When using publisher policies, the **PartitionKey** value is set to the publisher name.</span></span> <span data-ttu-id="78ebd-133">Per il corretto funzionamento, questi valori devono corrispondere.</span><span class="sxs-lookup"><span data-stu-id="78ebd-133">To work properly, these values must match.</span></span>

## <a name="capture"></a><span data-ttu-id="78ebd-134">Acquisizione</span><span class="sxs-lookup"><span data-stu-id="78ebd-134">Capture</span></span>

<span data-ttu-id="78ebd-135">[Acquisizione di Hub eventi](event-hubs-capture-overview.md) consente di acquisire automaticamente i dati in streaming in Hub eventi e salvarli, a propria scelta, in un account di archiviazione BLOB o un account del servizio Azure Data Lake.</span><span class="sxs-lookup"><span data-stu-id="78ebd-135">[Event Hubs Capture](event-hubs-capture-overview.md) enables you to automatically capture the streaming data in Event Hubs and save it to your choice of either a Blob storage account, or an Azure Data Lake Service account.</span></span> <span data-ttu-id="78ebd-136">È possibile abilitare la funzione di acquisizione dal portale di Azure e specificare una dimensione minima e l'intervallo di tempo per eseguire l'acquisizione.</span><span class="sxs-lookup"><span data-stu-id="78ebd-136">You can enable Capture from the Azure portal, and specify a minimum size and time window to perform the capture.</span></span> <span data-ttu-id="78ebd-137">Acquisizione di Hub eventi consente di specificare un account di Archiviazione BLOB di Azure e un contenitore oppure un account del servizio Azure Data Lake da usare per archiviare i dati acquisiti.</span><span class="sxs-lookup"><span data-stu-id="78ebd-137">Using Event Hubs Capture, you specify your own Azure Blob Storage account and container, or Azure Data Lake Service account, which is used to store the captured data.</span></span> <span data-ttu-id="78ebd-138">I dati acquisiti vengono scritti nel formato di Apache Avro.</span><span class="sxs-lookup"><span data-stu-id="78ebd-138">Captured data is written in the Apache Avro format.</span></span>

## <a name="partitions"></a><span data-ttu-id="78ebd-139">Partitions</span><span class="sxs-lookup"><span data-stu-id="78ebd-139">Partitions</span></span>

<span data-ttu-id="78ebd-140">Hub eventi fornisce lo streaming di messaggi tramite un modello consumer partizionato in cui ogni consumer legge solo un sottoinsieme specifico, o partizione, del flusso di messaggi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-140">Event Hubs provides message streaming through a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of the message stream.</span></span> <span data-ttu-id="78ebd-141">Questo modello consente la scalabilità orizzontale per l'elaborazione di eventi e fornisce altre funzionalità incentrate sul flusso non disponibili in code e argomenti.</span><span class="sxs-lookup"><span data-stu-id="78ebd-141">This pattern enables horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span>

<span data-ttu-id="78ebd-142">Una partizione è una sequenza ordinata di eventi contenuta in un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-142">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="78ebd-143">Man mano che arrivano, i nuovi eventi vengono aggiunti alla fine di questa sequenza.</span><span class="sxs-lookup"><span data-stu-id="78ebd-143">As newer events arrive, they are added to the end of this sequence.</span></span> <span data-ttu-id="78ebd-144">Una partizione può essere considerata come "registro commit".</span><span class="sxs-lookup"><span data-stu-id="78ebd-144">A partition can be thought of as a "commit log."</span></span>

![Hub eventi](./media/event-hubs-features/partition.png)

<span data-ttu-id="78ebd-146">Hub eventi mantiene i dati per un periodo di conservazione configurato che viene applicato a tutte le partizioni nell'hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-146">Event Hubs retains data for a configured retention time that applies across all partitions in the event hub.</span></span> <span data-ttu-id="78ebd-147">Gli eventi scadono su base temporale; non è possibile eliminarli in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="78ebd-147">Events expire on a time basis; you cannot explicitly delete them.</span></span> <span data-ttu-id="78ebd-148">Poiché le partizioni sono indipendenti e contengono una sequenza specifica di dati, presentano spesso velocità di crescita diverse.</span><span class="sxs-lookup"><span data-stu-id="78ebd-148">Because partitions are independent and contain their own sequence of data, they often grow at different rates.</span></span>

![Hub eventi](./media/event-hubs-features/multiple_partitions.png)

<span data-ttu-id="78ebd-150">Il numero di partizioni viene specificato in fase di creazione e deve essere compreso tra 2 e 32.</span><span class="sxs-lookup"><span data-stu-id="78ebd-150">The number of partitions is specified at creation and must be between 2 and 32.</span></span> <span data-ttu-id="78ebd-151">Il numero di partizioni non può essere modificato. È quindi consigliabile valutare le dimensioni a lungo termine in fase di impostazione del numero di partizioni.</span><span class="sxs-lookup"><span data-stu-id="78ebd-151">The partition count is not changeable, so you should consider long-term scale when setting partition count.</span></span> <span data-ttu-id="78ebd-152">Le partizioni sono un meccanismo di organizzazione dei dati correlato al parallelismo downstream necessario per utilizzare le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="78ebd-152">Partitions are a data organization mechanism that relates to the downstream parallelism required in consuming applications.</span></span> <span data-ttu-id="78ebd-153">Il numero di partizioni in un hub eventi è direttamente correlato al numero di lettori simultanei previsti.</span><span class="sxs-lookup"><span data-stu-id="78ebd-153">The number of partitions in an event hub directly relates to the number of concurrent readers you expect to have.</span></span> <span data-ttu-id="78ebd-154">Per impostare un numero di partizioni superiore a 32, contattare il team di Hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-154">You can increase the number of partitions beyond 32 by contacting the Event Hubs team.</span></span>

<span data-ttu-id="78ebd-155">Anche se le partizioni sono identificabili e consentono l'invio diretto, questa operazione non è consigliata per una partizione.</span><span class="sxs-lookup"><span data-stu-id="78ebd-155">While partitions are identifiable and can be sent to directly, sending directly to a partition is not recommended.</span></span> <span data-ttu-id="78ebd-156">È invece possibile usare i costrutti più generici introdotti nelle sezioni [Autore di eventi](#event-publishers) e [Capacità](#capacity).</span><span class="sxs-lookup"><span data-stu-id="78ebd-156">Instead, you can use higher level constructs introduced in the [Event publisher](#event-publishers) and [Capacity](#capacity) sections.</span></span> 

<span data-ttu-id="78ebd-157">Nelle partizioni viene inserita una sequenza di dati evento, che include il corpo dell'evento, un contenitore delle proprietà definito dall'utente e metadati quali il rispettivo offset nella partizione e il rispettivo numero nella sequenza di flusso.</span><span class="sxs-lookup"><span data-stu-id="78ebd-157">Partitions are filled with a sequence of event data which contains the body of the event, a user-defined property bag, and metadata such as its offset in the partition and its number in the stream sequence.</span></span>

<span data-ttu-id="78ebd-158">Per altre informazioni sulle partizioni e il necessario equilibrio tra disponibilità e affidabilità, vedere la [Guida alla programmazione di Hub eventi](event-hubs-programming-guide.md#partition-key) e l'articolo [Disponibilità e coerenza nell'Hub eventi](event-hubs-availability-and-consistency.md).</span><span class="sxs-lookup"><span data-stu-id="78ebd-158">For more information about partitions and the trade-off between availability and reliability, see the [Event Hubs programming guide](event-hubs-programming-guide.md#partition-key) and the [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md) article.</span></span>

### <a name="partition-key"></a><span data-ttu-id="78ebd-159">Chiave di partizione</span><span class="sxs-lookup"><span data-stu-id="78ebd-159">Partition key</span></span>

<span data-ttu-id="78ebd-160">È possibile usare una [chiave di partizione](event-hubs-programming-guide.md#partition-key) per mappare i dati dell'evento in ingresso in partizioni specifiche ai fini dell'organizzazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="78ebd-160">You can use a [partition key](event-hubs-programming-guide.md#partition-key) to map incoming event data into specific partitions for the purpose of data organization.</span></span> <span data-ttu-id="78ebd-161">La chiave di partizione è un valore fornito dal mittente che viene passato a un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-161">The partition key is a sender-supplied value passed into an event hub.</span></span> <span data-ttu-id="78ebd-162">Viene elaborato tramite una funzione di hashing statica, che crea l'assegnazione di partizione.</span><span class="sxs-lookup"><span data-stu-id="78ebd-162">It is processed through a static hashing function, which creates the partition assignment.</span></span> <span data-ttu-id="78ebd-163">Se non si specifica una chiave di partizione quando si pubblica un evento, viene usata un'assegnazione round robin.</span><span class="sxs-lookup"><span data-stu-id="78ebd-163">If you don't specify a partition key when publishing an event, a round-robin assignment is used.</span></span>

<span data-ttu-id="78ebd-164">L'autore di eventi è a conoscenza solo della chiave di partizione, non la partizione in cui gli eventi vengono pubblicati.</span><span class="sxs-lookup"><span data-stu-id="78ebd-164">The event publisher is only aware of its partition key, not the partition to which the events are published.</span></span> <span data-ttu-id="78ebd-165">Questa separazione tra chiave e partizione evita che il mittente debba conoscere troppe informazioni sull'elaborazione downstream.</span><span class="sxs-lookup"><span data-stu-id="78ebd-165">This decoupling of key and partition insulates the sender from needing to know too much about the downstream processing.</span></span> <span data-ttu-id="78ebd-166">Un’identità univoca per dispositivo o utente crea una chiave di partizione efficace, ma è possibile utilizzare anche altri attributi, ad esempio l’area geografica, per raggruppare gli eventi correlati in un'unica partizione.</span><span class="sxs-lookup"><span data-stu-id="78ebd-166">A per-device or user unique identity makes a good partition key, but other attributes such as geography can also be used to group related events into a single partition.</span></span>

## <a name="sas-tokens"></a><span data-ttu-id="78ebd-167">Token di firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="78ebd-167">SAS tokens</span></span>

<span data-ttu-id="78ebd-168">Hub eventi usa *firme di accesso condiviso*, disponibili a livello di spazio dei nomi e di hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-168">Event Hubs uses *Shared Access Signatures*, which are available at the namespace and event hub level.</span></span> <span data-ttu-id="78ebd-169">Un token SAS viene generato da una chiave SAS ed è un hash SHA di un URL, codificato in un formato specifico.</span><span class="sxs-lookup"><span data-stu-id="78ebd-169">A SAS token is generated from a SAS key and is an SHA hash of a URL, encoded in a specific format.</span></span> <span data-ttu-id="78ebd-170">Usando il nome della chiave (criterio) e il token, Hub eventi può rigenerare l'hash e quindi autenticare il mittente.</span><span class="sxs-lookup"><span data-stu-id="78ebd-170">Using the name of the key (policy) and the token, Event Hubs can regenerate the hash and thus authenticate the sender.</span></span> <span data-ttu-id="78ebd-171">In genere, i token di firma di accesso condiviso per gli autori di eventi vengono creati con privilegi solo di **invio** per un hub eventi specifico.</span><span class="sxs-lookup"><span data-stu-id="78ebd-171">Normally, SAS tokens for event publishers are created with only **send** privileges on a specific event hub.</span></span> <span data-ttu-id="78ebd-172">Questo meccanismo di URL token SAS costituisce la base per l'identificazione dell’autore introdotta nei criteri di autore.</span><span class="sxs-lookup"><span data-stu-id="78ebd-172">This SAS token URL mechanism is the basis for publisher identification introduced in the publisher policy.</span></span> <span data-ttu-id="78ebd-173">Per altre informazioni sull'uso di SAS, vedere [Autenticazione della firma di accesso condiviso con il bus di servizio](../service-bus-messaging/service-bus-sas.md).</span><span class="sxs-lookup"><span data-stu-id="78ebd-173">For more information about working with SAS, see [Shared Access Signature Authentication with Service Bus](../service-bus-messaging/service-bus-sas.md).</span></span>

## <a name="event-consumers"></a><span data-ttu-id="78ebd-174">Consumer di eventi</span><span class="sxs-lookup"><span data-stu-id="78ebd-174">Event consumers</span></span>

<span data-ttu-id="78ebd-175">Qualsiasi entità che legge i dati dell'evento da un hub eventi è un *consumer eventi*.</span><span class="sxs-lookup"><span data-stu-id="78ebd-175">Any entity that reads event data from an event hub is an *event consumer*.</span></span> <span data-ttu-id="78ebd-176">Tutti i consumer di Hub eventi si connettono tramite la sessione AMQP 1.0 e gli eventi vengono recapitati tramite la sessione appena disponibili.</span><span class="sxs-lookup"><span data-stu-id="78ebd-176">All Event Hubs consumers connect via the AMQP 1.0 session and events are delivered through the session as they become available.</span></span> <span data-ttu-id="78ebd-177">Il client non deve eseguire il polling per la disponibilità dei dati.</span><span class="sxs-lookup"><span data-stu-id="78ebd-177">The client does not need to poll for data availability.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="78ebd-178">Gruppi di utenti</span><span class="sxs-lookup"><span data-stu-id="78ebd-178">Consumer groups</span></span>

<span data-ttu-id="78ebd-179">Il meccanismo di pubblicazione/sottoscrizione degli Hub eventi è abilitato tramite i *gruppi di consumer*.</span><span class="sxs-lookup"><span data-stu-id="78ebd-179">The publish/subscribe mechanism of Event Hubs is enabled through *consumer groups*.</span></span> <span data-ttu-id="78ebd-180">Un gruppo di consumer è una vista (stato, posizione o offset) di un intero hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-180">A consumer group is a view (state, position, or offset) of an entire event hub.</span></span> <span data-ttu-id="78ebd-181">I gruppi di consumer consentono a più applicazioni costose di avere una visualizzazione separata del flusso di eventi e di leggere il flusso in modo indipendente in base alle proprie esigenze e con i propri gli offset.</span><span class="sxs-lookup"><span data-stu-id="78ebd-181">Consumer groups enable multiple consuming applications to each have a separate view of the event stream, and to read the stream independently at their own pace and with their own offsets.</span></span>

<span data-ttu-id="78ebd-182">In un’architettura di elaborazione flusso, ogni applicazione a valle equivale a un gruppo di consumer.</span><span class="sxs-lookup"><span data-stu-id="78ebd-182">In a stream processing architecture, each downstream application equates to a consumer group.</span></span> <span data-ttu-id="78ebd-183">Se si desidera scrivere i dati dell’evento nell’archiviazione a lungo termine, tale applicazione writer di archiviazione è un gruppo di consumer.</span><span class="sxs-lookup"><span data-stu-id="78ebd-183">If you want to write event data to long-term storage, then that storage writer application is a consumer group.</span></span> <span data-ttu-id="78ebd-184">L'elaborazione di eventi complessi può essere quindi eseguita da un altro gruppo di consumer separato.</span><span class="sxs-lookup"><span data-stu-id="78ebd-184">Complex event processing can then be performed by another, separate consumer group.</span></span> <span data-ttu-id="78ebd-185">È possibile accedere alla partizioni solo tramite un gruppo di consumer.</span><span class="sxs-lookup"><span data-stu-id="78ebd-185">You can only access partitions through a consumer group.</span></span> <span data-ttu-id="78ebd-186">In una partizione per un gruppo di consumer ci possono essere al massimo cinque lettori simultanei; è tuttavia **consigliabile che in una partizione per un gruppo di consumer ci sia solo un ricevitore attivo**.</span><span class="sxs-lookup"><span data-stu-id="78ebd-186">There can be at most 5 concurrent readers on a partition per consumer group; however **it is recommended that there is only one active receiver on a partition per consumer group**.</span></span> <span data-ttu-id="78ebd-187">In un hub eventi è sempre presente un gruppo di consumer predefinito e per un hub eventi di livello Standard è possibile creare fino a 20 gruppi di consumer.</span><span class="sxs-lookup"><span data-stu-id="78ebd-187">There is always a default consumer group in an event hub, and you can create up to 20 consumer groups for a Standard tier event hub.</span></span>

<span data-ttu-id="78ebd-188">Di seguito sono riportati esempi della convenzione dell'URI del gruppo di consumer:</span><span class="sxs-lookup"><span data-stu-id="78ebd-188">The following are examples of the consumer group URI convention:</span></span>

```http
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #1]
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #2]
```

<span data-ttu-id="78ebd-189">La figura seguente illustra l'architettura di elaborazione del flusso di Hub eventi:</span><span class="sxs-lookup"><span data-stu-id="78ebd-189">The following figure shows the Event Hubs stream processing architecture:</span></span>

![Hub eventi](./media/event-hubs-features/event_hubs_architecture.png)

### <a name="stream-offsets"></a><span data-ttu-id="78ebd-191">Offset di flusso</span><span class="sxs-lookup"><span data-stu-id="78ebd-191">Stream offsets</span></span>

<span data-ttu-id="78ebd-192">Un *offset* è la posizione di un evento all'interno di una partizione.</span><span class="sxs-lookup"><span data-stu-id="78ebd-192">An *offset* is the position of an event within a partition.</span></span> <span data-ttu-id="78ebd-193">Un offset può essere considerato come un cursore sul lato client.</span><span class="sxs-lookup"><span data-stu-id="78ebd-193">You can think of an offset as a client-side cursor.</span></span> <span data-ttu-id="78ebd-194">L'offset è la numerazione di byte dell'evento.</span><span class="sxs-lookup"><span data-stu-id="78ebd-194">The offset is a byte numbering of the event.</span></span> <span data-ttu-id="78ebd-195">Questo offset consente a un consumer di eventi (lettore) di specificare un punto nel flusso di eventi da cui iniziare la lettura degli eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-195">This offset enables an event consumer (reader) to specify a point in the event stream from which they want to begin reading events.</span></span> <span data-ttu-id="78ebd-196">È possibile specificare l'offset come un timestamp o un valore di offset.</span><span class="sxs-lookup"><span data-stu-id="78ebd-196">You can specify the offset as a timestamp or as an offset value.</span></span> <span data-ttu-id="78ebd-197">I consumer sono responsabili di archiviare i propri valori di offset all'esterno del servizio Hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-197">Consumers are responsible for storing their own offset values outside of the Event Hubs service.</span></span> <span data-ttu-id="78ebd-198">All'interno di una partizione, ogni evento include un offset.</span><span class="sxs-lookup"><span data-stu-id="78ebd-198">Within a partition, each event includes an offset.</span></span>

![Hub eventi](./media/event-hubs-features/partition_offset.png)

### <a name="checkpointing"></a><span data-ttu-id="78ebd-200">Checkpoint</span><span class="sxs-lookup"><span data-stu-id="78ebd-200">Checkpointing</span></span>

<span data-ttu-id="78ebd-201">*Checkpoint* è un processo mediante il quale i lettori contrassegnano o eseguono il commit della propria posizione all'interno di una sequenza di eventi di partizione.</span><span class="sxs-lookup"><span data-stu-id="78ebd-201">*Checkpointing* is a process by which readers mark or commit their position within a partition event sequence.</span></span> <span data-ttu-id="78ebd-202">Il checkpoint è responsabilità del consumer e si verifica per partizione all'interno di un gruppo di consumer.</span><span class="sxs-lookup"><span data-stu-id="78ebd-202">Checkpointing is the responsibility of the consumer and occurs on a per-partition basis within a consumer group.</span></span> <span data-ttu-id="78ebd-203">Questa responsabilità significa che per ogni gruppo di consumer, ogni lettore di partizione deve tenere traccia della posizione corrente nel flusso di eventi e può informare il servizio quando considera completo il flusso di dati.</span><span class="sxs-lookup"><span data-stu-id="78ebd-203">This responsibility means that for each consumer group, each partition reader must keep track of its current position in the event stream, and can inform the service when it considers the data stream complete.</span></span>

<span data-ttu-id="78ebd-204">Se un lettore si disconnette da una partizione, quando riconnette inizia a leggere in corrispondenza del checkpoint inviato in precedenza dall’ulitimo lettore di tale partizione in tale gruppo di consumer.</span><span class="sxs-lookup"><span data-stu-id="78ebd-204">If a reader disconnects from a partition, when it reconnects it begins reading at the checkpoint that was previously submitted by the last reader of that partition in that consumer group.</span></span> <span data-ttu-id="78ebd-205">Quando il lettore si connette, passa l'offset all'hub eventi per specificare la posizione da cui iniziare la lettura.</span><span class="sxs-lookup"><span data-stu-id="78ebd-205">When the reader connects, it passes this offset to the event hub to specify the location at which to start reading.</span></span> <span data-ttu-id="78ebd-206">In questo modo è possibile usare la funzionalità di checkpoint sia per contrassegnare gli eventi come "completi" dalle applicazioni a valle sia per fornire la resilienza in caso di failover tra i lettori in esecuzione in computer diversi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-206">In this way, you can use checkpointing to both mark events as "complete" by downstream applications, and to provide resiliency if a failover between readers running on different machines occurs.</span></span> <span data-ttu-id="78ebd-207">È possibile tornare a dati precedenti specificando un offset inferiore da questo processo di checkpoint.</span><span class="sxs-lookup"><span data-stu-id="78ebd-207">It is possible to return to older data by specifying a lower offset from this checkpointing process.</span></span> <span data-ttu-id="78ebd-208">Tramite questo meccanismo il checkpoint consente sia la resilienza del failover che la riproduzione del flusso di eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-208">Through this mechanism, checkpointing enables both failover resiliency and event stream replay.</span></span>

### <a name="common-consumer-tasks"></a><span data-ttu-id="78ebd-209">Attività comuni del consumer</span><span class="sxs-lookup"><span data-stu-id="78ebd-209">Common consumer tasks</span></span>

<span data-ttu-id="78ebd-210">Tutti i consumer di Hub eventi si connettono tramite una sessione AMQP 1.0 e un canale di comunicazione bidirezionale in grado di riconoscere lo stato.</span><span class="sxs-lookup"><span data-stu-id="78ebd-210">All Event Hubs consumers connect via an AMQP 1.0 session, a state-aware bidirectional communication channel.</span></span> <span data-ttu-id="78ebd-211">Ogni partizione ha una sessione AMQP 1.0 che facilita il trasporto di eventi separati dalla partizione.</span><span class="sxs-lookup"><span data-stu-id="78ebd-211">Each partition has an AMQP 1.0 session that facilitates the transport of events segregated by partition.</span></span>

#### <a name="connect-to-a-partition"></a><span data-ttu-id="78ebd-212">Connettersi a una partizione</span><span class="sxs-lookup"><span data-stu-id="78ebd-212">Connect to a partition</span></span>

<span data-ttu-id="78ebd-213">Quando ci si connette direttamente a partizioni, viene in genere usato un meccanismo di leasing per coordinare le connessioni di lettura per partizioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="78ebd-213">When connecting to partitions, it is common practice to use a leasing mechanism to coordinate reader connections to specific partitions.</span></span> <span data-ttu-id="78ebd-214">In questo modo è possibile per ogni partizione in un gruppo di consumer avere un solo lettore attivo.</span><span class="sxs-lookup"><span data-stu-id="78ebd-214">This way, it is possible for every partition in a consumer group to have only one active reader.</span></span> <span data-ttu-id="78ebd-215">Il checkpoint, il leasing e la gestione dei lettori vengono semplificati tramite la classe [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) per i client .NET.</span><span class="sxs-lookup"><span data-stu-id="78ebd-215">Checkpointing, leasing, and managing readers are simplified by using the [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) class for .NET clients.</span></span> <span data-ttu-id="78ebd-216">L'host processore di eventi è un agente consumer intelligente.</span><span class="sxs-lookup"><span data-stu-id="78ebd-216">The Event Processor Host is an intelligent consumer agent.</span></span>

#### <a name="read-events"></a><span data-ttu-id="78ebd-217">Leggere gli eventi</span><span class="sxs-lookup"><span data-stu-id="78ebd-217">Read events</span></span>

<span data-ttu-id="78ebd-218">Dopo l'apertura di una sessione AMQP 1.0 e del collegamento per una partizione specifica, gli eventi vengono recapitati al client AMQP 1.0 dal servizio Hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-218">After an AMQP 1.0 session and link is opened for a specific partition, events are delivered to the AMQP 1.0 client by the Event Hubs service.</span></span> <span data-ttu-id="78ebd-219">Questo meccanismo di recapito permette una velocità effettiva più elevata e una latenza più bassa rispetto ai meccanismi basati su pull, ad esempio HTTP GET.</span><span class="sxs-lookup"><span data-stu-id="78ebd-219">This delivery mechanism enables higher throughput and lower latency than pull-based mechanisms such as HTTP GET.</span></span> <span data-ttu-id="78ebd-220">Quando gli eventi vengono inviati al client, ogni istanza dei dati dell'evento contiene metadati importanti, ad esempio l’offset e il numero di sequenza utilizzati per facilitare il checkpoint sulla in sequenza di eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-220">As events are sent to the client, each event data instance contains important metadata such as the offset and sequence number that are used to facilitate checkpointing on the event sequence.</span></span>

<span data-ttu-id="78ebd-221">Dati evento:</span><span class="sxs-lookup"><span data-stu-id="78ebd-221">Event data:</span></span>
* <span data-ttu-id="78ebd-222">Offset</span><span class="sxs-lookup"><span data-stu-id="78ebd-222">Offset</span></span>
* <span data-ttu-id="78ebd-223">Numero di sequenza</span><span class="sxs-lookup"><span data-stu-id="78ebd-223">Sequence number</span></span>
* <span data-ttu-id="78ebd-224">Corpo</span><span class="sxs-lookup"><span data-stu-id="78ebd-224">Body</span></span>
* <span data-ttu-id="78ebd-225">Proprietà utente</span><span class="sxs-lookup"><span data-stu-id="78ebd-225">User properties</span></span>
* <span data-ttu-id="78ebd-226">Proprietà di sistema</span><span class="sxs-lookup"><span data-stu-id="78ebd-226">System properties</span></span>

<span data-ttu-id="78ebd-227">L'utente è responsabile della gestione dell'offset.</span><span class="sxs-lookup"><span data-stu-id="78ebd-227">It is your responsibility to manage the offset.</span></span>

## <a name="capacity"></a><span data-ttu-id="78ebd-228">Capacità</span><span class="sxs-lookup"><span data-stu-id="78ebd-228">Capacity</span></span>

<span data-ttu-id="78ebd-229">Hub eventi è un'architettura parallela a scalabilità elevata ed è necessario valutare alcuni fattori chiave durante il ridimensionamento.</span><span class="sxs-lookup"><span data-stu-id="78ebd-229">Event Hubs has a highly scalable parallel architecture and there are several key factors to consider when sizing and scaling.</span></span>

### <a name="throughput-units"></a><span data-ttu-id="78ebd-230">Unità elaborate</span><span class="sxs-lookup"><span data-stu-id="78ebd-230">Throughput units</span></span>

<span data-ttu-id="78ebd-231">La capacità di velocità effettiva di Hub eventi è controllata dalle *unità elaborate*.</span><span class="sxs-lookup"><span data-stu-id="78ebd-231">The throughput capacity of Event Hubs is controlled by *throughput units*.</span></span> <span data-ttu-id="78ebd-232">Le unità elaborate sono unità di capacità pre-acquistate.</span><span class="sxs-lookup"><span data-stu-id="78ebd-232">Throughput units are pre-purchased units of capacity.</span></span> <span data-ttu-id="78ebd-233">Una singola unità elaborata include la capacità seguente:</span><span class="sxs-lookup"><span data-stu-id="78ebd-233">A single throughput unit includes the following capacity:</span></span>

* <span data-ttu-id="78ebd-234">Ingresso: fino a 1 MB al secondo o 1000 eventi al secondo, qualunque valore venga raggiunto per primo.</span><span class="sxs-lookup"><span data-stu-id="78ebd-234">Ingress: Up to 1 MB per second or 1000 events per second (whichever comes first)</span></span>
* <span data-ttu-id="78ebd-235">Uscita: fino a 2 MB al secondo</span><span class="sxs-lookup"><span data-stu-id="78ebd-235">Egress: Up to 2 MB per second</span></span>

<span data-ttu-id="78ebd-236">Oltre la capacità delle unità elaborate acquistate, i dati in ingresso vengono limitati e viene restituito un valore [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception).</span><span class="sxs-lookup"><span data-stu-id="78ebd-236">Beyond the capacity of the purchased throughput units, ingress is throttled and a [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) is returned.</span></span> <span data-ttu-id="78ebd-237">I dati in uscita non producono eccezioni di limitazione, ma sono ancora limitati alla capacità delle unità elaborate acquistate.</span><span class="sxs-lookup"><span data-stu-id="78ebd-237">Egress does not produce throttling exceptions, but is still limited to the capacity of the purchased throughput units.</span></span> <span data-ttu-id="78ebd-238">Se si ricevono eccezioni di velocità di pubblicazione o sono previste uscite maggiori, controllare il numero di unità elaborate acquistate per lo spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-238">If you receive publishing rate exceptions or are expecting to see higher egress, be sure to check how many throughput units you have purchased for the namespace.</span></span> <span data-ttu-id="78ebd-239">È possibile gestire le unità elaborate nel pannello **Ridimensionamento** dello spazio dei nomi nel [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="78ebd-239">You can manage throughput units on the **Scale** blade of the namespaces in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="78ebd-240">È anche possibile gestire le unità elaborate a livello di programmazione usando le [API degli hub eventi](event-hubs-api-overview.md).</span><span class="sxs-lookup"><span data-stu-id="78ebd-240">You can also manage throughput units programmatically using the [Event Hubs APIs](event-hubs-api-overview.md).</span></span>

<span data-ttu-id="78ebd-241">Le unità elaborate vengo o fatturate su base oraria e sono pre-acquistate.</span><span class="sxs-lookup"><span data-stu-id="78ebd-241">Throughput units are billed per hour and are pre-purchased.</span></span> <span data-ttu-id="78ebd-242">Una volta acquistate, le unità elaborate vengono fatturate per un minimo di un'ora.</span><span class="sxs-lookup"><span data-stu-id="78ebd-242">Once purchased, throughput units are billed for a minimum of one hour.</span></span> <span data-ttu-id="78ebd-243">È possibile acquistare fino a 20 unità elaborate per uno spazio dei nomi di Hub eventi, che vengono condivise in tutti gli Hub eventi nello spazio dei nomi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-243">Up to 20 throughput units can be purchased for an Event Hubs namespace and are shared across all Event Hubs in the namespace.</span></span>

<span data-ttu-id="78ebd-244">È possibile acquistare altre unità elaborate in blocchi di 20, fino a un massimo di 100 unità elaborate, contattando il Supporto tecnico di Azure.</span><span class="sxs-lookup"><span data-stu-id="78ebd-244">More throughput units can be purchased in blocks of 20, up to 100 throughput units, by contacting Azure support.</span></span> <span data-ttu-id="78ebd-245">Inoltre, è possibile acquistare blocchi di 100 unità elaborate.</span><span class="sxs-lookup"><span data-stu-id="78ebd-245">Beyond that, you can also purchase blocks of 100 throughput units.</span></span>

<span data-ttu-id="78ebd-246">È consigliabile bilanciare unità elaborate e partizioni per ottenere una scalabilità ottimale.</span><span class="sxs-lookup"><span data-stu-id="78ebd-246">We recommend that you balance throughput units and partitions to achieve optimal scale.</span></span> <span data-ttu-id="78ebd-247">Una singola partizione ha una scala massima di una unità elaborata.</span><span class="sxs-lookup"><span data-stu-id="78ebd-247">A single partition has a maximum scale of one throughput unit.</span></span> <span data-ttu-id="78ebd-248">Il numero di unità elaborate deve essere minore o uguale al numero di partizioni in un hub eventi.</span><span class="sxs-lookup"><span data-stu-id="78ebd-248">The number of throughput units should be less than or equal to the number of partitions in an event hub.</span></span>

<span data-ttu-id="78ebd-249">Per informazioni dettagliate sui prezzi di Hub eventi, vedere [Prezzi di Hub eventi ](https://azure.microsoft.com/pricing/details/event-hubs/).</span><span class="sxs-lookup"><span data-stu-id="78ebd-249">For detailed Event Hubs pricing information, see [Event Hubs pricing](https://azure.microsoft.com/pricing/details/event-hubs/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="78ebd-250">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="78ebd-250">Next steps</span></span>

<span data-ttu-id="78ebd-251">Per altre informazioni su Hub eventi, vedere i collegamenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="78ebd-251">For more information about Event Hubs, visit the following links:</span></span>

* <span data-ttu-id="78ebd-252">Iniziare con un'[esercitazione di Hub eventi][Event Hubs tutorial]</span><span class="sxs-lookup"><span data-stu-id="78ebd-252">Get started with an [Event Hubs tutorial][Event Hubs tutorial]</span></span>
* [<span data-ttu-id="78ebd-253">Guida alla programmazione di Hub eventi</span><span class="sxs-lookup"><span data-stu-id="78ebd-253">Event Hubs programming guide</span></span>](event-hubs-programming-guide.md)
* [<span data-ttu-id="78ebd-254">Disponibilità e coerenza nell'Hub eventi</span><span class="sxs-lookup"><span data-stu-id="78ebd-254">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="78ebd-255">Domande frequenti su Hub eventi</span><span class="sxs-lookup"><span data-stu-id="78ebd-255">Event Hubs FAQ</span></span>](event-hubs-faq.md)
* <span data-ttu-id="78ebd-256">[Esempi di Hub eventi][]</span><span class="sxs-lookup"><span data-stu-id="78ebd-256">[Event Hubs samples][]</span></span>

[Event Hubs tutorial]: event-hubs-dotnet-standard-getstarted-send.md
[Esempi di Hub eventi]: https://github.com/Azure/azure-event-hubs/tree/master/samples
