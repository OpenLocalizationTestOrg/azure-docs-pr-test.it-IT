---
title: aaaOverview di messaggistica code, argomenti e sottoscrizioni di Azure Service Bus | Documenti Microsoft
description: "Panoramica delle entità di messaggistica del bus di servizio."
services: service-bus-messaging
documentationcenter: na
author: sethmanheim
manager: timlt
editor: 
ms.assetid: a306ced4-74e9-47c6-990a-d9c47efa31d5
ms.service: service-bus-messaging
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/28/2017
ms.author: sethm
ms.openlocfilehash: 73135d2658e341c14dbb114ab938faed91578ff1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="service-bus-queues-topics-and-subscriptions"></a><span data-ttu-id="aa5d6-103">Code, argomenti e sottoscrizioni del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="aa5d6-103">Service Bus queues, topics, and subscriptions</span></span>

<span data-ttu-id="aa5d6-104">Il bus di servizio di Microsoft Azure supporta un set di tecnologie middleware orientate ai messaggi e basate sul cloud, incluso l'accodamento dei messaggi affidabile e la messaggistica di pubblicazione e sottoscrizione permanente.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-104">Microsoft Azure Service Bus supports a set of cloud-based, message-oriented middleware technologies including reliable message queuing and durable publish/subscribe messaging.</span></span> <span data-ttu-id="aa5d6-105">Queste funzionalità di messaggistica "negoziate" possono essere considerate separato funzionalità che supportano la pubblicazione-sottoscrizione di messaggistica, temporale disaccoppiamento e scenari con l'infrastruttura di messaggistica di hello Bus di servizio di bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-105">These "brokered" messaging capabilities can be thought of as decoupled messaging features that support publish-subscribe, temporal decoupling, and load balancing scenarios using hello Service Bus messaging fabric.</span></span> <span data-ttu-id="aa5d6-106">La comunicazione disaccoppiata presenta molti vantaggi, ad esempio client e server possono connettersi quando necessario ed eseguire le relative operazioni in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-106">Decoupled communication has many advantages; for example, clients and servers can connect as needed and perform their operations in an asynchronous fashion.</span></span>

<span data-ttu-id="aa5d6-107">le entità di messaggistica Hello che costituiscono il nucleo di hello del hello funzionalità nel Bus di servizio di messaggistica sono code, argomenti e sottoscrizioni e regole/azioni.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-107">hello messaging entities that form hello core of hello messaging capabilities in Service Bus are queues, topics and subscriptions, and rules/actions.</span></span>

## <a name="queues"></a><span data-ttu-id="aa5d6-108">Code</span><span class="sxs-lookup"><span data-stu-id="aa5d6-108">Queues</span></span>

<span data-ttu-id="aa5d6-109">Le code consentono *First In, First Out* tooone di recapito messaggi (FIFO) o più consumer concorrenti.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-109">Queues offer *First In, First Out* (FIFO) message delivery tooone or more competing consumers.</span></span> <span data-ttu-id="aa5d6-110">Ovvero, i messaggi sono toobe previsto in genere ricevuti ed elaborati dai ricevitori hello in hello ordine in cui sono stati aggiunti toohello coda e ogni messaggio viene ricevuto ed elaborato da un solo consumer di messaggi.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-110">That is, messages are typically expected toobe received and processed by hello receivers in hello order in which they were added toohello queue, and each message is received and processed by only one message consumer.</span></span> <span data-ttu-id="aa5d6-111">Un vantaggio chiave nell'utilizzo delle code è tooachieve "disaccoppiamento temporale" dei componenti dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-111">A key benefit of using queues is tooachieve "temporal decoupling" of application components.</span></span> <span data-ttu-id="aa5d6-112">Hello in altre parole, i producer (mittenti) e i consumer (ricevitori) non dispongono di toobe l'invio e ricezione di messaggi in hello stesso tempo, in quanto i messaggi vengono archiviati nella coda di hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-112">In other words, hello producers (senders) and consumers (receivers) do not have toobe sending and receiving messages at hello same time, because messages are stored durably in hello queue.</span></span> <span data-ttu-id="aa5d6-113">Inoltre, producer hello non ha toowait per una risposta dal consumer hello in ordine toocontinue tooprocess e inviare messaggi.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-113">Furthermore, hello producer does not have toowait for a reply from hello consumer in order toocontinue tooprocess and send messages.</span></span>

<span data-ttu-id="aa5d6-114">Un vantaggio correlato è "livellamento del carico," che consente di toosend producer e consumer e ricezione messaggi con ritmi diversi.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-114">A related benefit is "load leveling," which enables producers and consumers toosend and receive messages at different rates.</span></span> <span data-ttu-id="aa5d6-115">In molte applicazioni, il carico del sistema hello varia nel tempo; Tuttavia, il tempo di elaborazione di hello necessario per ogni unità di lavoro è in genere costante.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-115">In many applications, hello system load varies over time; however, hello processing time required for each unit of work is typically constant.</span></span> <span data-ttu-id="aa5d6-116">Interposizione messaggio producer e consumer una coda significa che hello utilizzano solo l'applicazione ha toobe toobe provisioning toohandle in grado di carico medio anziché il carico massimo.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-116">Intermediating message producers and consumers with a queue means that hello consuming application only has toobe provisioned toobe able toohandle average load instead of peak load.</span></span> <span data-ttu-id="aa5d6-117">profondità Hello della coda di hello aumentano e i contratti in base alla variazione carico in ingresso hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-117">hello depth of hello queue grows and contracts as hello incoming load varies.</span></span> <span data-ttu-id="aa5d6-118">Direttamente, ciò consente di risparmiare denaro con quantità toohello considerare infrastruttura richiesto tooservice hello carico dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-118">This directly saves money with regard toohello amount of infrastructure required tooservice hello application load.</span></span> <span data-ttu-id="aa5d6-119">Aumento del carico come hello, altri processi di lavoro possono essere aggiunto tooread dalla coda hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-119">As hello load increases, more worker processes can be added tooread from hello queue.</span></span> <span data-ttu-id="aa5d6-120">Ogni messaggio viene elaborato da un solo hello di processi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-120">Each message is processed by only one of hello worker processes.</span></span> <span data-ttu-id="aa5d6-121">Inoltre, il bilanciamento del carico basato su pull consente un uso ottimale dei computer di lavoro hello anche se il computer di lavoro hello differiscono con la potenza di tooprocessing, considerare come verrà estraggono i messaggi alla propria velocità massima.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-121">Furthermore, this pull-based load balancing allows for optimum use of hello worker computers even if hello worker computers differ with regard tooprocessing power, as they will pull messages at their own maximum rate.</span></span> <span data-ttu-id="aa5d6-122">Questo modello viene spesso definito modello "consumer concorrente" hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-122">This pattern is often termed hello "competing consumer" pattern.</span></span>

<span data-ttu-id="aa5d6-123">Utilizzo di code toointermediate tra messaggio producer e consumer fornisce un accoppiamento inerente tra i componenti di hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-123">Using queues toointermediate between message producers and consumers provides an inherent loose coupling between hello components.</span></span> <span data-ttu-id="aa5d6-124">Poiché producer e consumer non sono consapevoli di altra, è possibile aggiornare un consumer senza causare alcun effetto sul producer hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-124">Because producers and consumers are not aware of each other, a consumer can be upgraded without having any effect on hello producer.</span></span>

<span data-ttu-id="aa5d6-125">La creazione di una coda è un processo che prevede più passaggi. </span><span class="sxs-lookup"><span data-stu-id="aa5d6-125">Creating a queue is a multi-step process.</span></span> <span data-ttu-id="aa5d6-126">Eseguire operazioni di gestione per le entità (code e argomenti) tramite hello di messaggistica del Bus di servizio [Microsoft.ServiceBus.NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) (classe), che viene creato fornendo l'indirizzo di base hello di hello Bus di servizio spazio dei nomi e hello credenziali utente.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-126">You perform management operations for Service Bus messaging entities (both queues and topics) via hello [Microsoft.ServiceBus.NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) class, which is constructed by supplying hello base address of hello Service Bus namespace and hello user credentials.</span></span> <span data-ttu-id="aa5d6-127">[NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) fornisce i metodi toocreate, enumerare ed eliminare entità di messaggistica.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-127">[NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager#microsoft_servicebus_namespacemanager) provides methods toocreate, enumerate and delete messaging entities.</span></span> <span data-ttu-id="aa5d6-128">Dopo aver creato un [Microsoft.ServiceBus.TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) oggetto oggetto dal nome hello e chiave e una gestione dello spazio dei nomi del servizio, è possibile utilizzare hello [Microsoft.ServiceBus.NamespaceManager.CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) coda hello toocreate di metodo.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-128">After creating a [Microsoft.ServiceBus.TokenProvider](/dotnet/api/microsoft.servicebus.tokenprovider#microsoft_servicebus_tokenprovider) object from hello SAS name and key, and a service namespace management object, you can use hello [Microsoft.ServiceBus.NamespaceManager.CreateQueue](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateQueue_System_String_) method toocreate hello queue.</span></span> <span data-ttu-id="aa5d6-129">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-129">For example:</span></span>

```csharp
// Create management credentials
TokenProvider credentials = TokenProvider.CreateSharedAccessSignatureTokenProvider(sasKeyName,sasKeyValue);
// Create namespace client
NamespaceManager namespaceClient = new NamespaceManager(ServiceBusEnvironment.CreateServiceUri("sb", ServiceNamespace, string.Empty), credentials);
```

<span data-ttu-id="aa5d6-130">È quindi possibile creare un oggetto coda e una factory di messaggistica con hello URI del Bus di servizio come argomento.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-130">You can then create a queue object and a messaging factory with hello Service Bus URI as an argument.</span></span> <span data-ttu-id="aa5d6-131">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-131">For example:</span></span>

```csharp
QueueDescription myQueue;
myQueue = namespaceClient.CreateQueue("TestQueue");
MessagingFactory factory = MessagingFactory.Create(ServiceBusEnvironment.CreateServiceUri("sb", ServiceNamespace, string.Empty), credentials); 
QueueClient myQueueClient = factory.CreateQueueClient("TestQueue");
```

<span data-ttu-id="aa5d6-132">È quindi possibile inviare messaggi toohello coda.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-132">You can then send messages toohello queue.</span></span> <span data-ttu-id="aa5d6-133">Ad esempio, se si dispone di un elenco di messaggi negoziati denominato `MessageList`, codice di hello sembra simile toohello seguenti:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-133">For example, if you have a list of brokered messages called `MessageList`, hello code appears similar toohello following:</span></span>

```csharp
for (int count = 0; count < 6; count++)
{
    var issue = MessageList[count];
    issue.Label = issue.Properties["IssueTitle"].ToString();
    myQueueClient.Send(issue);
}
```

<span data-ttu-id="aa5d6-134">Quindi ricevere messaggi dalla coda hello come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-134">You then receive messages from hello queue as follows:</span></span>

```csharp
while ((message = myQueueClient.Receive(new TimeSpan(hours: 0, minutes: 0, seconds: 5))) != null)
    {
        Console.WriteLine(string.Format("Message received: {0}, {1}, {2}", message.SequenceNumber, message.Label, message.MessageId));
        message.Complete();

        Console.WriteLine("Processing message (sleeping...)");
        Thread.Sleep(1000);
    }
```

<span data-ttu-id="aa5d6-135">In hello [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode) ricezione hello modalità, l'operazione è l'unica; vale a dire quando Bus di servizio riceve una richiesta di hello, contrassegna il messaggio hello come usato e lo restituisce toohello applicazione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-135">In hello [ReceiveAndDelete](/dotnet/api/microsoft.servicebus.messaging.receivemode) mode, hello receive operation is single-shot; that is, when Service Bus receives hello request, it marks hello message as being consumed and returns it toohello application.</span></span> <span data-ttu-id="aa5d6-136">**ReceiveAndDelete** modalità modello più semplice di hello ed è adatta per scenari in cui hello un'applicazione può tollerare non elabora un messaggio di evento hello di un errore.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-136">**ReceiveAndDelete** mode is hello simplest model and works best for scenarios in which hello application can tolerate not processing a message in hello event of a failure.</span></span> <span data-ttu-id="aa5d6-137">toounderstand, si consideri uno scenario in cui problemi relativi ai consumer hello hello di ricezione richiesta e quindi si blocca prima dell'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-137">toounderstand this, consider a scenario in which hello consumer issues hello receive request and then crashes before processing it.</span></span> <span data-ttu-id="aa5d6-138">Poiché il Bus di servizio contrassegna il messaggio hello come usato, quando un'applicazione hello viene riavviata e inizia a usare nuovamente i messaggi, risulterà perso messaggio hello che è stato consumato toohello precedente arresto anomalo del sistema.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-138">Because Service Bus marks hello message as being consumed, when hello application restarts and begins consuming messages again, it will have missed hello message that was consumed prior toohello crash.</span></span>

<span data-ttu-id="aa5d6-139">In [PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode) hello di modalità di ricezione diventa un'operazione in due fasi, che rende possibile toosupport applicazioni che non sono in grado di tollerare messaggi mancanti.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-139">In [PeekLock](/dotnet/api/microsoft.servicebus.messaging.receivemode) mode, hello receive operation becomes two-stage, which makes it possible toosupport applications that cannot tolerate missing messages.</span></span> <span data-ttu-id="aa5d6-140">Quando Service Bus riceve una richiesta di hello, trova hello successivo messaggio toobe utilizzata, blocca tooprevent altri consumer di ricezione e lo restituisce quindi toohello applicazione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-140">When Service Bus receives hello request, it finds hello next message toobe consumed, locks it tooprevent other consumers from receiving it, and then returns it toohello application.</span></span> <span data-ttu-id="aa5d6-141">Dopo l'applicazione hello completa l'elaborazione messaggio hello o archiviarlo in modo affidabile per l'elaborazione futura, completa hello seconda fase di hello ricevere processo chiamando [completa](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) nel messaggio ricevuto.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-141">After hello application finishes processing hello message (or stores it reliably for future processing), it completes hello second stage of hello receive process by calling [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete) on hello received message.</span></span> <span data-ttu-id="aa5d6-142">Quando il Bus di servizio rileva hello **completa** chiamata, contrassegna il messaggio hello come usato.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-142">When Service Bus sees hello **Complete** call, it marks hello message as being consumed.</span></span>

<span data-ttu-id="aa5d6-143">Se è in grado di un'applicazione hello tooprocess hello messaggio per qualche motivo, è possibile chiamare hello [abbandonare](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) metodo sul messaggio ricevuto (invece di [completa](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span><span class="sxs-lookup"><span data-stu-id="aa5d6-143">If hello application is unable tooprocess hello message for some reason, it can call hello [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) method on hello received message (instead of [Complete](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Complete)).</span></span> <span data-ttu-id="aa5d6-144">In questo modo messaggio hello toounlock del Bus di servizio e renderlo disponibile toobe nuovamente ricevuto, tramite hello stesso consumer o da un altro consumer concorrente.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-144">This enables Service Bus toounlock hello message and make it available toobe received again, either by hello same consumer or by another competing consumer.</span></span> <span data-ttu-id="aa5d6-145">In secondo luogo, vi è un timeout associato blocco hello e se un'applicazione hello avrà esito negativo tooprocess hello messaggio prima che il timeout di blocco hello scade (ad esempio, se si blocca l'applicazione hello), quindi Sblocca messaggio hello e rende disponibili toobe Service Bus ricevuto nuovo (esecuzione essenzialmente un [abbandonare](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operazione per impostazione predefinita).</span><span class="sxs-lookup"><span data-stu-id="aa5d6-145">Secondly, there is a timeout associated with hello lock and if hello application fails tooprocess hello message before hello lock timeout expires (for example, if hello application crashes), then Service Bus unlocks hello message and makes it available toobe received again (essentially performing an [Abandon](/dotnet/api/microsoft.servicebus.messaging.brokeredmessage#Microsoft_ServiceBus_Messaging_BrokeredMessage_Abandon) operation by default).</span></span>

<span data-ttu-id="aa5d6-146">Si noti che in hello evento hello applicazione si blocca dopo l'elaborazione messaggio hello, ma prima di hello **completa** richiesta viene eseguita, il messaggio hello è applicazione toohello consegnati nuovamente dopo il riavvio.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-146">Note that in hello event that hello application crashes after processing hello message, but before hello **Complete** request is issued, hello message is redelivered toohello application when it restarts.</span></span> <span data-ttu-id="aa5d6-147">Questo processo di elaborazione viene spesso definito di tipo *At-Least-Once*, per indicare che ogni messaggio viene elaborato almeno una volta.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-147">This is often called *At Least Once* processing; that is, each message is processed at least once.</span></span> <span data-ttu-id="aa5d6-148">Tuttavia, in determinati hello situazioni stesso potrà essere recapitato.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-148">However, in certain situations hello same message may be redelivered.</span></span> <span data-ttu-id="aa5d6-149">Se hello scenario non tollera la doppia elaborazione, sarà necessaria logica aggiuntiva dei duplicati di toodetect applicazione hello che può essere raggiunto in base al hello **MessageId** proprietà del messaggio hello, che rimane costante tra i tentativi di recapito.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-149">If hello scenario cannot tolerate duplicate processing, then additional logic is required in hello application toodetect duplicates which can be achieved based upon hello **MessageId** property of hello message, which remains constant across delivery attempts.</span></span> <span data-ttu-id="aa5d6-150">Questo tipo di elaborazione viene definito di tipo *Exactly Once*.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-150">This is known as *Exactly Once* processing.</span></span>

## <a name="topics-and-subscriptions"></a><span data-ttu-id="aa5d6-151">Argomenti e sottoscrizioni</span><span class="sxs-lookup"><span data-stu-id="aa5d6-151">Topics and subscriptions</span></span>
<span data-ttu-id="aa5d6-152">In contrasto tooqueues, in cui ogni messaggio viene elaborato da un singolo consumer *argomenti* e *sottoscrizioni* forniscono una comunicazione, forma uno-a-molti un *dipubblicazione/sottoscrizione* modello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-152">In contrast tooqueues, in which each message is processed by a single consumer, *topics* and *subscriptions* provide a one-to-many form of communication, in a *publish/subscribe* pattern.</span></span> <span data-ttu-id="aa5d6-153">Utile per la scalabilità toovery un numero elevato di destinatari, ogni messaggio pubblicato viene reso disponibile tooeach sottoscrizione registrata con argomento hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-153">Useful for scaling toovery large numbers of recipients, each published message is made available tooeach subscription registered with hello topic.</span></span> <span data-ttu-id="aa5d6-154">I messaggi vengono inviati tooa argomento e recapitati tooone o più sottoscrizioni associate, a seconda delle regole di filtro che possono essere impostate su una base per ogni sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-154">Messages are sent tooa topic and delivered tooone or more associated subscriptions, depending on filter rules that can be set on a per-subscription basis.</span></span> <span data-ttu-id="aa5d6-155">le sottoscrizioni di Hello è possono utilizzare messaggi hello toorestrict di filtri aggiuntivi che desiderano tooreceive.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-155">hello subscriptions can use additional filters toorestrict hello messages that they want tooreceive.</span></span> <span data-ttu-id="aa5d6-156">I messaggi vengono inviati tooa argomento nella hello stesso modo vengono inviati tooa coda, ma i messaggi non vengono ricevuti direttamente dall'argomento hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-156">Messages are sent tooa topic in hello same way they are sent tooa queue, but messages are not received from hello topic directly.</span></span> <span data-ttu-id="aa5d6-157">Vengono ricevuti dalle sottoscrizioni.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-157">Instead, they are received from subscriptions.</span></span> <span data-ttu-id="aa5d6-158">Una sottoscrizione dell'argomento è simile a una coda virtuale che riceve copie dei messaggi hello inviati toohello argomento.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-158">A topic subscription resembles a virtual queue that receives copies of hello messages that are sent toohello topic.</span></span> <span data-ttu-id="aa5d6-159">I messaggi vengono ricevuti da una sottoscrizione in modo identico modo toohello vengono ricevuti da una coda.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-159">Messages are received from a subscription identically toohello way they are received from a queue.</span></span>

<span data-ttu-id="aa5d6-160">A scopo di confronto, hello funzionalità di invio di una coda viene eseguito il mapping direttamente tooa argomento e la relativa funzionalità di ricezione del messaggio mappe tooa sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-160">By way of comparison, hello message-sending functionality of a queue maps directly tooa topic and its message-receiving functionality maps tooa subscription.</span></span> <span data-ttu-id="aa5d6-161">Tra le altre cose, ciò significa che le sottoscrizioni supportano hello stessi modelli descritti in precedenza in questa sezione con considerare tooqueues: consumer concorrente, disaccoppiamento temporale, livellamento del carico e bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-161">Among other things, this means that subscriptions support hello same patterns described earlier in this section with regard tooqueues: competing consumer, temporal decoupling, load leveling, and load balancing.</span></span>

<span data-ttu-id="aa5d6-162">Creazione di un argomento è simile toocreating una coda, come illustrato nell'esempio hello nella sezione precedente hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-162">Creating a topic is similar toocreating a queue, as shown in hello example in hello previous section.</span></span> <span data-ttu-id="aa5d6-163">Creare l'URI del servizio hello e quindi utilizzare hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) client dello spazio dei nomi di classe toocreate hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-163">Create hello service URI, and then use hello [NamespaceManager](/dotnet/api/microsoft.servicebus.namespacemanager) class toocreate hello namespace client.</span></span> <span data-ttu-id="aa5d6-164">È quindi possibile creare un argomento utilizzando hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) metodo.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-164">You can then create a topic using hello [CreateTopic](/dotnet/api/microsoft.servicebus.namespacemanager#Microsoft_ServiceBus_NamespaceManager_CreateTopic_System_String_) method.</span></span> <span data-ttu-id="aa5d6-165">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-165">For example:</span></span>

```csharp
TopicDescription dataCollectionTopic = namespaceClient.CreateTopic("DataCollectionTopic");
```

<span data-ttu-id="aa5d6-166">Aggiungere quindi le sottoscrizioni desiderate:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-166">Next, add subscriptions as desired:</span></span>

```csharp
SubscriptionDescription myAgentSubscription = namespaceClient.CreateSubscription(myTopic.Path, "Inventory");
SubscriptionDescription myAuditSubscription = namespaceClient.CreateSubscription(myTopic.Path, "Dashboard");
```

<span data-ttu-id="aa5d6-167">Sarà quindi possibile creare un client dell'argomento.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-167">You can then create a topic client.</span></span> <span data-ttu-id="aa5d6-168">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-168">For example:</span></span>

```csharp
MessagingFactory factory = MessagingFactory.Create(serviceUri, tokenProvider);
TopicClient myTopicClient = factory.CreateTopicClient(myTopic.Path)
```

<span data-ttu-id="aa5d6-169">Utilizza mittente del messaggio hello, è possibile inviare e ricevere messaggi tooand dall'argomento hello, come illustrato nella sezione precedente hello.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-169">Using hello message sender, you can send and receive messages tooand from hello topic, as shown in hello previous section.</span></span> <span data-ttu-id="aa5d6-170">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-170">For example:</span></span>

```csharp
foreach (BrokeredMessage message in messageList)
{
    myTopicClient.Send(message);
    Console.WriteLine(
    string.Format("Message sent: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
}
```

<span data-ttu-id="aa5d6-171">Tooqueues simile, i messaggi vengono ricevuti da una sottoscrizione tramite un [SubscriptionClient](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient) oggetto anziché un [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) oggetto.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-171">Similar tooqueues, messages are received from a subscription using a [SubscriptionClient](/dotnet/api/microsoft.servicebus.messaging.subscriptionclient) object instead of a [QueueClient](/dotnet/api/microsoft.servicebus.messaging.queueclient) object.</span></span> <span data-ttu-id="aa5d6-172">Creare hello sottoscrizione client, passando il nome di hello di argomento hello, nome hello di sottoscrizione hello e (facoltativamente) hello modalità di ricezione come parametri.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-172">Create hello subscription client, passing hello name of hello topic, hello name of hello subscription, and (optionally) hello receive mode as parameters.</span></span> <span data-ttu-id="aa5d6-173">Ad esempio, con hello **inventario** sottoscrizione:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-173">For example, with hello **Inventory** subscription:</span></span>

```csharp
// Create hello subscription client
MessagingFactory factory = MessagingFactory.Create(serviceUri, tokenProvider); 

SubscriptionClient agentSubscriptionClient = factory.CreateSubscriptionClient("IssueTrackingTopic", "Inventory", ReceiveMode.PeekLock);
SubscriptionClient auditSubscriptionClient = factory.CreateSubscriptionClient("IssueTrackingTopic", "Dashboard", ReceiveMode.ReceiveAndDelete); 

while ((message = agentSubscriptionClient.Receive(TimeSpan.FromSeconds(5))) != null)
{
    Console.WriteLine("\nReceiving message from Inventory...");
    Console.WriteLine(string.Format("Message received: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
    message.Complete();
}          

// Create a receiver using ReceiveAndDelete mode
while ((message = auditSubscriptionClient.Receive(TimeSpan.FromSeconds(5))) != null)
{
    Console.WriteLine("\nReceiving message from Dashboard...");
    Console.WriteLine(string.Format("Message received: Id = {0}, Body = {1}", message.MessageId, message.GetBody<string>()));
}
```

### <a name="rules-and-actions"></a><span data-ttu-id="aa5d6-174">Regole e azioni</span><span class="sxs-lookup"><span data-stu-id="aa5d6-174">Rules and actions</span></span>
<span data-ttu-id="aa5d6-175">In molti scenari, i messaggi con caratteristiche specifiche devono essere elaborati in modi specifici.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-175">In many scenarios, messages that have specific characteristics must be processed in different ways.</span></span> <span data-ttu-id="aa5d6-176">tooenable, si possono configurare sottoscrizioni toofind messaggi che presentano le proprietà desiderate e quindi eseguono determinate proprietà toothose modifiche.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-176">tooenable this, you can configure subscriptions toofind messages that have desired properties and then perform certain modifications toothose properties.</span></span> <span data-ttu-id="aa5d6-177">Mentre le sottoscrizioni del Bus di servizio vedere tutti i messaggi inviati toohello argomento, è possibile copiare solo un subset della coda di sottoscrizione virtuale toohello tali messaggi.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-177">While Service Bus subscriptions see all messages sent toohello topic, you can only copy a subset of those messages toohello virtual subscription queue.</span></span> <span data-ttu-id="aa5d6-178">Questa operazione viene eseguita usando i filtri della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-178">This is accomplished using subscription filters.</span></span> <span data-ttu-id="aa5d6-179">Queste modifiche sono chiamate *azioni di filtro*.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-179">Such modifications are called *filter actions*.</span></span> <span data-ttu-id="aa5d6-180">Quando viene creata una sottoscrizione, è possibile fornire un'espressione di filtro che opera sulle proprietà hello del messaggio hello, entrambi hello le proprietà di sistema (ad esempio, **etichetta**) e le proprietà personalizzate dell'applicazione (ad esempio, **StoreName**.) hello espressione di filtro SQL è facoltativa. senza un'espressione di filtro SQL, verrà eseguita alcuna azione di filtro definita in una sottoscrizione in tutti i messaggi hello per la sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-180">When a subscription is created, you can supply a filter expression that operates on hello properties of hello message, both hello system properties (for example, **Label**) and custom application properties (for example, **StoreName**.) hello SQL filter expression is optional in this case; without a SQL filter expression, any filter action defined on a subscription will be performed on all hello messages for that subscription.</span></span>

<span data-ttu-id="aa5d6-181">Utilizzando hello esempio precedente, i messaggi toofilter provenienti solo da **Store1**, è necessario creare una sottoscrizione di hello Dashboard come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="aa5d6-181">Using hello previous example, toofilter messages coming only from **Store1**, you would create hello Dashboard subscription as follows:</span></span>

```csharp
namespaceManager.CreateSubscription("IssueTrackingTopic", "Dashboard", new SqlFilter("StoreName = 'Store1'"));
```

<span data-ttu-id="aa5d6-182">Con questo filtro di sottoscrizione sul posto, solo i messaggi hello `StoreName` impostata troppo`Store1` vengono copiati toohello coda virtuale hello `Dashboard` sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-182">With this subscription filter in place, only messages that have hello `StoreName` property set too`Store1` are copied toohello virtual queue for hello `Dashboard` subscription.</span></span>

<span data-ttu-id="aa5d6-183">Per ulteriori informazioni sui valori di filtro possibili, vedere la documentazione di hello per hello [SqlFilter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter) e [SqlRuleAction](/dotnet/api/microsoft.servicebus.messaging.sqlruleaction) classi.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-183">For more information about possible filter values, see hello documentation for hello [SqlFilter](/dotnet/api/microsoft.servicebus.messaging.sqlfilter) and [SqlRuleAction](/dotnet/api/microsoft.servicebus.messaging.sqlruleaction) classes.</span></span> <span data-ttu-id="aa5d6-184">Vedere anche hello [messaggistica negoziata: Advanced Filters](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749) e [argomento filtri](https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/TopicFilters) esempi.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-184">Also, see hello [Brokered Messaging: Advanced Filters](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749) and [Topic Filters](https://github.com/Azure-Samples/azure-servicebus-messaging-samples/tree/master/TopicFilters) samples.</span></span>

## <a name="next-steps"></a><span data-ttu-id="aa5d6-185">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="aa5d6-185">Next steps</span></span>
<span data-ttu-id="aa5d6-186">Vedere di seguito hello avanzata per ulteriori informazioni ed esempi di utilizzo di messaggistica del Bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="aa5d6-186">See hello following advanced topics for more information and examples of using Service Bus messaging.</span></span>

* [<span data-ttu-id="aa5d6-187">Panoramica della messaggistica del bus di servizio</span><span class="sxs-lookup"><span data-stu-id="aa5d6-187">Service Bus messaging overview</span></span>](service-bus-messaging-overview.md)
* [<span data-ttu-id="aa5d6-188">Esercitazione sulla messaggistica negoziata del bus di servizio - .NET</span><span class="sxs-lookup"><span data-stu-id="aa5d6-188">Service Bus brokered messaging .NET tutorial</span></span>](service-bus-brokered-tutorial-dotnet.md)
* [<span data-ttu-id="aa5d6-189">Esercitazione sulla messaggistica negoziata del bus di servizio - REST</span><span class="sxs-lookup"><span data-stu-id="aa5d6-189">Service Bus brokered messaging REST tutorial</span></span>](service-bus-brokered-tutorial-rest.md)
* <span data-ttu-id="aa5d6-190">[Topic filters sample](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/TopicFilters) (Esempio Filtri di argomento)</span><span class="sxs-lookup"><span data-stu-id="aa5d6-190">[Topic Filters sample ](https://github.com/Azure/azure-service-bus/tree/master/samples/DotNet/Microsoft.ServiceBus.Messaging/TopicFilters)</span></span>
* <span data-ttu-id="aa5d6-191">[Brokered Messaging: Advanced Filters sample](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749) (Esempio Messaggistica negoziata: filtri avanzati)</span><span class="sxs-lookup"><span data-stu-id="aa5d6-191">[Brokered Messaging: Advanced Filters sample](http://code.msdn.microsoft.com/Brokered-Messaging-6b0d2749)</span></span>

