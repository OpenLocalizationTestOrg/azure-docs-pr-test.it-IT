---
title: Uso della regressione lineare in Machine Learning | Microsoft Docs
description: Confronto tra i modelli di regressione lineare in Excel e in Azure Machine Learning Studio
metakeywords: 
services: machine-learning
documentationcenter: 
author: garyericson
manager: jhubbard
editor: cgronlun
ms.assetid: 417ae6ab-de4f-4bdd-957a-d96133234656
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/20/2017
ms.author: kbaroni;garye
ms.openlocfilehash: 7feb5d62415850e66f8eb7e22b9ada0d25a7058e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="using-linear-regression-in-azure-machine-learning"></a><span data-ttu-id="ec4b9-103">Uso della regressione lineare Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="ec4b9-103">Using linear regression in Azure Machine Learning</span></span>
> <span data-ttu-id="ec4b9-104">*Kate Baroni* e *Ben Boatman* sono architetti di soluzioni aziendali in Microsoft Data Insights Center of Excellence.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-104">*Kate Baroni* and *Ben Boatman* are enterprise solution architects in Microsoft’s Data Insights Center of Excellence.</span></span> <span data-ttu-id="ec4b9-105">In questo articolo descrivono la propria esperienza durante la migrazione di una suite esistente per l'analisi di regressione a una soluzione basata sul cloud tramite Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-105">In this article, they describe their experience migrating an existing regression analysis suite to a cloud-based solution using Azure Machine Learning.</span></span> 
> 
> 

&nbsp; 

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

## <a name="goal"></a><span data-ttu-id="ec4b9-106">Obiettivo</span><span class="sxs-lookup"><span data-stu-id="ec4b9-106">Goal</span></span>
<span data-ttu-id="ec4b9-107">Il progetto è iniziato con due obiettivi prefissati:</span><span class="sxs-lookup"><span data-stu-id="ec4b9-107">Our project started with two goals in mind:</span></span> 

1. <span data-ttu-id="ec4b9-108">Usare l'analisi predittiva per migliorare la precisione delle proiezioni dei ricavi mensili dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-108">Use predictive analytics to improve the accuracy of our organization’s monthly revenue projections</span></span> 
2. <span data-ttu-id="ec4b9-109">Usare Azure Machine Learning per confermare, ottimizzare e migliorare la velocità e la scalabilità dei risultati.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-109">Use Azure Machine Learning to confirm, optimize, increase velocity, and scale of our results.</span></span> 

<span data-ttu-id="ec4b9-110">Come molte aziende, anche questa organizzazione esegue un processo di previsione dei ricavi mensile.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-110">Like many businesses, our organization goes through a monthly revenue forecasting process.</span></span> <span data-ttu-id="ec4b9-111">A un piccolo team di analisti aziendali è stato assegnato il compito di usare Azure Machine Learning per supportare il processo e migliorare la precisione delle previsioni.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-111">Our small team of business analysts was tasked with using Azure Machine Learning to support the process and improve forecast accuracy.</span></span> <span data-ttu-id="ec4b9-112">Per diversi mesi, il team ha raccolto dati da più origini e ha eseguito diversi attributi dei dati usando l'analisi statistica per identificare gli attributi chiave rilevanti per la previsione delle vendite di servizi.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-112">The team spent several months collecting data from multiple sources and running the data attributes through statistical analysis identifying key attributes relevant to services sales forecasting.</span></span> <span data-ttu-id="ec4b9-113">Il passaggio successivo prevedeva la creazione di prototipi di modelli di regressione statistica basati sui dati in Excel.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-113">The next step was to begin prototyping statistical regression models on the data in Excel.</span></span> <span data-ttu-id="ec4b9-114">In poche settimane è stato prodotto un modello di regressione di Excel con prestazioni superiori rispetto ai processi correnti di previsione finanziaria e di campo.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-114">Within a few weeks, we had an Excel regression model that was outperforming the current field and finance forecasting processes.</span></span> <span data-ttu-id="ec4b9-115">Questo è diventato il risultato di previsione di base.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-115">This became the baseline prediction result.</span></span> 

<span data-ttu-id="ec4b9-116">Quindi, è stato avviato il passaggio dell'analisi predittiva ad Azure Machine Learning, per scoprire come quest'ultimo potesse migliorare le prestazioni predittive.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-116">We then took the next step to moving our predictive analytics over to Azure Machine Learning to find out how Machine Learning could improve on predictive performance.</span></span>

## <a name="achieving-predictive-performance-parity"></a><span data-ttu-id="ec4b9-117">Raggiungimento della parità delle prestazioni predittive</span><span class="sxs-lookup"><span data-stu-id="ec4b9-117">Achieving predictive performance parity</span></span>
<span data-ttu-id="ec4b9-118">La prima priorità consisteva nel raggiungere la parità tra i modelli di regressione di Machine Learning ed Excel.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-118">Our first priority was to achieve parity between Machine Learning and Excel regression models.</span></span> <span data-ttu-id="ec4b9-119">In base agli stessi dati e alla stessa suddivisione dei dati di training e di test, si voleva raggiungere la parità delle prestazioni predittive tra Excel e Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-119">Given the same data, and the same split for training and testing data, we wanted to achieve predictive performance parity between Excel and Machine Learning.</span></span> <span data-ttu-id="ec4b9-120">Inizialmente, l'obiettivo non è stato raggiunto.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-120">Initially we failed.</span></span> <span data-ttu-id="ec4b9-121">Le prestazioni del modello di Excel superavano quelle del modello di Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-121">The Excel model outperformed the Machine Learning model.</span></span> <span data-ttu-id="ec4b9-122">L'errore era dovuto alla scarsa comprensione dell'impostazione dello strumento di base in Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-122">The failure was due to a lack of understanding of the base tool setting in Machine Learning.</span></span> <span data-ttu-id="ec4b9-123">La collaborazione con il team del prodotto di Machine Learning ha permesso di comprendere meglio l'impostazione di base necessaria per i set di dati e di ottenere la parità tra i due modelli.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-123">After a sync with the Machine Learning product team, we gained a better understanding of the base setting required for our data sets, and achieved parity between the two models.</span></span> 

### <a name="create-regression-model-in-excel"></a><span data-ttu-id="ec4b9-124">Creare un modello di regressione in Excel</span><span class="sxs-lookup"><span data-stu-id="ec4b9-124">Create regression model in Excel</span></span>
<span data-ttu-id="ec4b9-125">La regressione di Excel usava il modello di regressione lineare standard disponibile in Strumenti di analisi di Excel.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-125">Our Excel Regression used the standard linear regression model found in the Excel Analysis ToolPak.</span></span> 

<span data-ttu-id="ec4b9-126">È stato calcolato l' *Errore assoluto medio (%)* , usato come misura delle prestazioni per il modello.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-126">We calculated *Mean Absolute % Error* and used it as the performance measure for the model.</span></span> <span data-ttu-id="ec4b9-127">Sono stati necessari tre mesi per arrivare al modello di lavoro usando Excel.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-127">It took 3 months to arrive at a working model using Excel.</span></span> <span data-ttu-id="ec4b9-128">Gran parte delle informazioni sono state trasferite nell'esperimento di Machine Learning Studio che ha consentito una migliore comprensione dei requisiti.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-128">We brought much of the learning into the Machine Learning Studio experiment which ultimately was beneficial in understanding requirements.</span></span>

### <a name="create-comparable-experiment-in-azure-machine-learning"></a><span data-ttu-id="ec4b9-129">Creare un esperimento confrontabile in Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="ec4b9-129">Create comparable experiment in Azure Machine Learning</span></span>
<span data-ttu-id="ec4b9-130">Per creare l'esperimento in Machine Learning Studio sono è stata seguita questa procedura:</span><span class="sxs-lookup"><span data-stu-id="ec4b9-130">We followed these steps to create our experiment in Machine Learning Studio:</span></span> 

1. <span data-ttu-id="ec4b9-131">È stato caricato il set di dati in Machine Learning Studio in formato CSV, che consente dimensioni molto ridotte</span><span class="sxs-lookup"><span data-stu-id="ec4b9-131">Uploaded the dataset as a csv file to Machine Learning Studio (very small file)</span></span>
2. <span data-ttu-id="ec4b9-132">È stato creato un nuovo esperimento ed è stato usato il modulo [Select Columns in Dataset][select-columns] (Seleziona colonne in set di dati) per selezionare le stesse funzionalità di dati usate in Excel</span><span class="sxs-lookup"><span data-stu-id="ec4b9-132">Created a new experiment and used the [Select Columns in Dataset][select-columns] module to select the same data features used in Excel</span></span> 
3. <span data-ttu-id="ec4b9-133">È stato usato il modulo [Split data][split] (Divisione dati) con modalità *Relative Expression* (Espressione relativa) per dividere i dati negli stessi set di dati di training di Excel</span><span class="sxs-lookup"><span data-stu-id="ec4b9-133">Used the [Split Data][split] module (with *Relative Expression* mode) to divide the data into the same training datasets as had been done in Excel</span></span> 
4. <span data-ttu-id="ec4b9-134">È stato eseguito l'esperimento con il modulo [Linear Regression][linear-regression] (Regressione lineare) (solo opzioni predefinite), quindi sono stati documentati e confrontati i risultati nel modello di regressione di Excel</span><span class="sxs-lookup"><span data-stu-id="ec4b9-134">Experimented with the [Linear Regression][linear-regression] module (default options only), documented, and compared the results to our Excel regression model</span></span>

### <a name="review-initial-results"></a><span data-ttu-id="ec4b9-135">Rivedere i risultati iniziali</span><span class="sxs-lookup"><span data-stu-id="ec4b9-135">Review initial results</span></span>
<span data-ttu-id="ec4b9-136">All'inizio, il modello di Excel ha superato nettamente le prestazioni del modello di Machine Learning Studio:</span><span class="sxs-lookup"><span data-stu-id="ec4b9-136">At first, the Excel model clearly outperformed the Machine Learning Studio model:</span></span> 

|  | <span data-ttu-id="ec4b9-137">Excel</span><span class="sxs-lookup"><span data-stu-id="ec4b9-137">Excel</span></span> | <span data-ttu-id="ec4b9-138">Studio</span><span class="sxs-lookup"><span data-stu-id="ec4b9-138">Studio</span></span> |
| --- |:---:|:---:|
| <span data-ttu-id="ec4b9-139">Prestazioni</span><span class="sxs-lookup"><span data-stu-id="ec4b9-139">Performance</span></span> | | |
| <ul style="list-style-type: none;"><li><span data-ttu-id="ec4b9-140">R-quadrato corretto</span><span class="sxs-lookup"><span data-stu-id="ec4b9-140">Adjusted R Square</span></span></li></ul> |<span data-ttu-id="ec4b9-141">0,96</span><span class="sxs-lookup"><span data-stu-id="ec4b9-141">0.96</span></span> |<span data-ttu-id="ec4b9-142">N/D</span><span class="sxs-lookup"><span data-stu-id="ec4b9-142">N/A</span></span> |
| <ul style="list-style-type: none;"><li><span data-ttu-id="ec4b9-143">Coefficiente di</span><span class="sxs-lookup"><span data-stu-id="ec4b9-143">Coefficient of</span></span> <br /><span data-ttu-id="ec4b9-144">determinazione</span><span class="sxs-lookup"><span data-stu-id="ec4b9-144">Determination</span></span></li></ul> |<span data-ttu-id="ec4b9-145">N/D</span><span class="sxs-lookup"><span data-stu-id="ec4b9-145">N/A</span></span> |<span data-ttu-id="ec4b9-146">0,78</span><span class="sxs-lookup"><span data-stu-id="ec4b9-146">0.78</span></span><br /><span data-ttu-id="ec4b9-147">(bassa precisione)</span><span class="sxs-lookup"><span data-stu-id="ec4b9-147">(low accuracy)</span></span> |
| <span data-ttu-id="ec4b9-148">Errore assoluto medio</span><span class="sxs-lookup"><span data-stu-id="ec4b9-148">Mean Absolute Error</span></span> |<span data-ttu-id="ec4b9-149">$ 9,5 milioni</span><span class="sxs-lookup"><span data-stu-id="ec4b9-149">$9.5M</span></span> |<span data-ttu-id="ec4b9-150">$ 19,4 milioni</span><span class="sxs-lookup"><span data-stu-id="ec4b9-150">$ 19.4M</span></span> |
| <span data-ttu-id="ec4b9-151">Errore assoluto medio (%)</span><span class="sxs-lookup"><span data-stu-id="ec4b9-151">Mean Absolute Error (%)</span></span> |<span data-ttu-id="ec4b9-152">6,03%</span><span class="sxs-lookup"><span data-stu-id="ec4b9-152">6.03%</span></span> |<span data-ttu-id="ec4b9-153">12,2%</span><span class="sxs-lookup"><span data-stu-id="ec4b9-153">12.2%</span></span> |

<span data-ttu-id="ec4b9-154">Il processo e i risultati sono stati sottoposti agli sviluppatori e ai data scientist del team di Machine Learning, che ha subito fornito alcuni suggerimenti utili.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-154">When we ran our process and results by the developers and data scientists on the Machine Learning team, they quickly provided some useful tips.</span></span> 

* <span data-ttu-id="ec4b9-155">Quando si usa il modulo [Linear Regression][linear-regression] (Regressione lineare) in Machine Learning Studio, sono disponibili due metodi:</span><span class="sxs-lookup"><span data-stu-id="ec4b9-155">When you use the [Linear Regression][linear-regression] module in Machine Learning Studio, two methods are provided:</span></span>
  * <span data-ttu-id="ec4b9-156">Online Gradient Descent: più adatto a problemi su larga scala</span><span class="sxs-lookup"><span data-stu-id="ec4b9-156">Online Gradient Descent: May be more suitable for larger-scale problems</span></span>
  * <span data-ttu-id="ec4b9-157">Ordinary Least Squares: il metodo generalmente associato alla regressione lineare.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-157">Ordinary Least Squares: This is the method most people think of when they hear linear regression.</span></span> <span data-ttu-id="ec4b9-158">Per set di dati di piccole dimensioni, il metodo Ordinary Least Squares è solitamente la scelta ottimale.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-158">For small datasets, Ordinary Least Squares can be a more optimal choice.</span></span>
* <span data-ttu-id="ec4b9-159">Provare a modificare il parametro L2 Regularization Weight per migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-159">Consider tweaking the L2 Regularization Weight parameter to improve performance.</span></span> <span data-ttu-id="ec4b9-160">Per impostazione predefinita è impostato su 0.001, ma per i set di dati di piccole dimensioni in questo caso è stato impostato su 0.005 per migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-160">It is set to 0.001 by default, but for our small data set we set it to 0.005 to improve performance.</span></span> 

### <a name="mystery-solved"></a><span data-ttu-id="ec4b9-161">Misero risolto</span><span class="sxs-lookup"><span data-stu-id="ec4b9-161">Mystery solved!</span></span>
<span data-ttu-id="ec4b9-162">Dopo aver applicato i suggerimenti, in Machine Learning Studio sono state raggiunte le stesse prestazioni di base di Excel:</span><span class="sxs-lookup"><span data-stu-id="ec4b9-162">When we applied the recommendations, we achieved the same baseline performance in Machine Learning Studio as with Excel:</span></span> 

|  | <span data-ttu-id="ec4b9-163">Excel</span><span class="sxs-lookup"><span data-stu-id="ec4b9-163">Excel</span></span> | <span data-ttu-id="ec4b9-164">Studio (iniziale)</span><span class="sxs-lookup"><span data-stu-id="ec4b9-164">Studio (Initial)</span></span> | <span data-ttu-id="ec4b9-165">Studio con Least Squares</span><span class="sxs-lookup"><span data-stu-id="ec4b9-165">Studio w/ Least Squares</span></span> |
| --- |:---:|:---:|:---:|
| <span data-ttu-id="ec4b9-166">Valore etichettato</span><span class="sxs-lookup"><span data-stu-id="ec4b9-166">Labeled value</span></span> |<span data-ttu-id="ec4b9-167">Valori effettivi (numerici)</span><span class="sxs-lookup"><span data-stu-id="ec4b9-167">Actuals (numeric)</span></span> |<span data-ttu-id="ec4b9-168">uguale</span><span class="sxs-lookup"><span data-stu-id="ec4b9-168">same</span></span> |<span data-ttu-id="ec4b9-169">uguale</span><span class="sxs-lookup"><span data-stu-id="ec4b9-169">same</span></span> |
| <span data-ttu-id="ec4b9-170">Strumento di apprendimento</span><span class="sxs-lookup"><span data-stu-id="ec4b9-170">Learner</span></span> |<span data-ttu-id="ec4b9-171">Excel -> Analisi dati -> Regressione</span><span class="sxs-lookup"><span data-stu-id="ec4b9-171">Excel -> Data Analysis -> Regression</span></span> |<span data-ttu-id="ec4b9-172">Regressione lineare.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-172">Linear Regression.</span></span> |<span data-ttu-id="ec4b9-173">Linear Regression</span><span class="sxs-lookup"><span data-stu-id="ec4b9-173">Linear Regression</span></span> |
| <span data-ttu-id="ec4b9-174">Opzioni strumento di apprendimento</span><span class="sxs-lookup"><span data-stu-id="ec4b9-174">Learner options</span></span> |<span data-ttu-id="ec4b9-175">N/D</span><span class="sxs-lookup"><span data-stu-id="ec4b9-175">N/A</span></span> |<span data-ttu-id="ec4b9-176">Valori predefiniti</span><span class="sxs-lookup"><span data-stu-id="ec4b9-176">Defaults</span></span> |<span data-ttu-id="ec4b9-177">Ordinary Least Squares</span><span class="sxs-lookup"><span data-stu-id="ec4b9-177">ordinary least squares</span></span><br /><span data-ttu-id="ec4b9-178">L2 = 0,005</span><span class="sxs-lookup"><span data-stu-id="ec4b9-178">L2 = 0.005</span></span> |
| <span data-ttu-id="ec4b9-179">Set di dati</span><span class="sxs-lookup"><span data-stu-id="ec4b9-179">Data Set</span></span> |<span data-ttu-id="ec4b9-180">26 righe, 3 funzionalità, 1 etichetta.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-180">26 rows, 3 features, 1 label.</span></span> <span data-ttu-id="ec4b9-181">Tutti valori numerici.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-181">All numeric.</span></span> |<span data-ttu-id="ec4b9-182">uguale</span><span class="sxs-lookup"><span data-stu-id="ec4b9-182">same</span></span> |<span data-ttu-id="ec4b9-183">uguale</span><span class="sxs-lookup"><span data-stu-id="ec4b9-183">same</span></span> |
| <span data-ttu-id="ec4b9-184">Divisione: training</span><span class="sxs-lookup"><span data-stu-id="ec4b9-184">Split: Train</span></span> |<span data-ttu-id="ec4b9-185">Excel con training sulle prime 18 righe, con test delle ultime 8 righe.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-185">Excel trained on the first 18 rows, tested on the last 8 rows.</span></span> |<span data-ttu-id="ec4b9-186">uguale</span><span class="sxs-lookup"><span data-stu-id="ec4b9-186">same</span></span> |<span data-ttu-id="ec4b9-187">uguale</span><span class="sxs-lookup"><span data-stu-id="ec4b9-187">same</span></span> |
| <span data-ttu-id="ec4b9-188">Divisione: test</span><span class="sxs-lookup"><span data-stu-id="ec4b9-188">Split: Test</span></span> |<span data-ttu-id="ec4b9-189">Formula di regressione Excel applicata alle ultime 8 righe</span><span class="sxs-lookup"><span data-stu-id="ec4b9-189">Excel regression formula applied to the last 8 rows</span></span> |<span data-ttu-id="ec4b9-190">uguale</span><span class="sxs-lookup"><span data-stu-id="ec4b9-190">same</span></span> |<span data-ttu-id="ec4b9-191">uguale</span><span class="sxs-lookup"><span data-stu-id="ec4b9-191">same</span></span> |
| <span data-ttu-id="ec4b9-192">**Prestazioni**</span><span class="sxs-lookup"><span data-stu-id="ec4b9-192">**Performance**</span></span> | | | |
| <span data-ttu-id="ec4b9-193">R-quadrato corretto</span><span class="sxs-lookup"><span data-stu-id="ec4b9-193">Adjusted R Square</span></span> |<span data-ttu-id="ec4b9-194">0,96</span><span class="sxs-lookup"><span data-stu-id="ec4b9-194">0.96</span></span> |<span data-ttu-id="ec4b9-195">N/D</span><span class="sxs-lookup"><span data-stu-id="ec4b9-195">N/A</span></span> | |
| <span data-ttu-id="ec4b9-196">Coefficiente di determinazione</span><span class="sxs-lookup"><span data-stu-id="ec4b9-196">Coefficient of Determination</span></span> |<span data-ttu-id="ec4b9-197">N/D</span><span class="sxs-lookup"><span data-stu-id="ec4b9-197">N/A</span></span> |<span data-ttu-id="ec4b9-198">0,78</span><span class="sxs-lookup"><span data-stu-id="ec4b9-198">0.78</span></span> |<span data-ttu-id="ec4b9-199">0,952049</span><span class="sxs-lookup"><span data-stu-id="ec4b9-199">0.952049</span></span> |
| <span data-ttu-id="ec4b9-200">Errore assoluto medio</span><span class="sxs-lookup"><span data-stu-id="ec4b9-200">Mean Absolute Error</span></span> |<span data-ttu-id="ec4b9-201">$ 9,5 milioni</span><span class="sxs-lookup"><span data-stu-id="ec4b9-201">$9.5M</span></span> |<span data-ttu-id="ec4b9-202">$ 19,4 milioni</span><span class="sxs-lookup"><span data-stu-id="ec4b9-202">$ 19.4M</span></span> |<span data-ttu-id="ec4b9-203">$ 9,5 milioni</span><span class="sxs-lookup"><span data-stu-id="ec4b9-203">$9.5M</span></span> |
| <span data-ttu-id="ec4b9-204">Errore assoluto medio (%)</span><span class="sxs-lookup"><span data-stu-id="ec4b9-204">Mean Absolute Error (%)</span></span> |<span data-ttu-id="ec4b9-205"><span style="background-color: 00FF00;"> 6,03%</span></span><span class="sxs-lookup"><span data-stu-id="ec4b9-205"><span style="background-color: 00FF00;"> 6.03%</span></span></span> |<span data-ttu-id="ec4b9-206">12,2%</span><span class="sxs-lookup"><span data-stu-id="ec4b9-206">12.2%</span></span> |<span data-ttu-id="ec4b9-207"><span style="background-color: 00FF00;"> 6,03%</span></span><span class="sxs-lookup"><span data-stu-id="ec4b9-207"><span style="background-color: 00FF00;"> 6.03%</span></span></span> |

<span data-ttu-id="ec4b9-208">Inoltre, i coefficienti di Excel hanno dato buoni risultati anche confrontati con i pesi delle funzionalità nel modello con training di Azure:</span><span class="sxs-lookup"><span data-stu-id="ec4b9-208">In addition, the Excel coefficients compared well to the feature weights in the Azure trained model:</span></span>

|  | <span data-ttu-id="ec4b9-209">Coefficienti di Excel</span><span class="sxs-lookup"><span data-stu-id="ec4b9-209">Excel Coefficients</span></span> | <span data-ttu-id="ec4b9-210">Pesi delle funzionalità di Azure</span><span class="sxs-lookup"><span data-stu-id="ec4b9-210">Azure Feature Weights</span></span> |
| --- |:---:|:---:|
| <span data-ttu-id="ec4b9-211">Intercetta/distorsione</span><span class="sxs-lookup"><span data-stu-id="ec4b9-211">Intercept/Bias</span></span> |<span data-ttu-id="ec4b9-212">19470209,88</span><span class="sxs-lookup"><span data-stu-id="ec4b9-212">19470209.88</span></span> |<span data-ttu-id="ec4b9-213">19328500</span><span class="sxs-lookup"><span data-stu-id="ec4b9-213">19328500</span></span> |
| <span data-ttu-id="ec4b9-214">Funzionalità A</span><span class="sxs-lookup"><span data-stu-id="ec4b9-214">Feature A</span></span> |<span data-ttu-id="ec4b9-215">0,832653063</span><span class="sxs-lookup"><span data-stu-id="ec4b9-215">0.832653063</span></span> |<span data-ttu-id="ec4b9-216">0,834156</span><span class="sxs-lookup"><span data-stu-id="ec4b9-216">0.834156</span></span> |
| <span data-ttu-id="ec4b9-217">Funzionalità B</span><span class="sxs-lookup"><span data-stu-id="ec4b9-217">Feature B</span></span> |<span data-ttu-id="ec4b9-218">11071967,08</span><span class="sxs-lookup"><span data-stu-id="ec4b9-218">11071967.08</span></span> |<span data-ttu-id="ec4b9-219">11007300</span><span class="sxs-lookup"><span data-stu-id="ec4b9-219">11007300</span></span> |
| <span data-ttu-id="ec4b9-220">Funzionalità C</span><span class="sxs-lookup"><span data-stu-id="ec4b9-220">Feature C</span></span> |<span data-ttu-id="ec4b9-221">25383318,09</span><span class="sxs-lookup"><span data-stu-id="ec4b9-221">25383318.09</span></span> |<span data-ttu-id="ec4b9-222">25140800</span><span class="sxs-lookup"><span data-stu-id="ec4b9-222">25140800</span></span> |

## <a name="next-steps"></a><span data-ttu-id="ec4b9-223">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ec4b9-223">Next Steps</span></span>
<span data-ttu-id="ec4b9-224">L'obiettivo, a questo punto, consisteva nell'includere il servizio Web di Machine Learning in Excel.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-224">We wanted to consume the Machine Learning web service within Excel.</span></span> <span data-ttu-id="ec4b9-225">Gli analisti aziendali usano Excel in modo estensivo, era quindi necessaria una soluzione che chiamasse il servizio Web di Machine Learning con una riga di dati di Excel e restituisse il valore previsto in Excel.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-225">Our business analysts rely on Excel and we needed a way to call the Machine Learning web service with a row of Excel data and have it return the predicted value to Excel.</span></span> 

<span data-ttu-id="ec4b9-226">Era anche necessario ottimizzare il modello usando le opzioni e gli algoritmi disponibili in Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-226">We also wanted to optimize our model, using the options and algorithms available in Machine Learning Studio.</span></span>

### <a name="integration-with-excel"></a><span data-ttu-id="ec4b9-227">Integrazione con Excel</span><span class="sxs-lookup"><span data-stu-id="ec4b9-227">Integration with Excel</span></span>
<span data-ttu-id="ec4b9-228">La soluzione consisteva nel rendere operativo il modello di regressione di Machine Learning creando un servizio Web dal modello con training.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-228">Our solution was to operationalize our Machine Learning regression model by creating a web service from the trained model.</span></span> <span data-ttu-id="ec4b9-229">Questo servizio Web è stato creato in pochi minuti ed è stato possibile chiamarlo direttamente da Excel per restituire un valore dei ricavi previsti.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-229">Within a few minutes, the web service was created and we could call it directly from Excel to return a predicted revenue value.</span></span> 

<span data-ttu-id="ec4b9-230">La sezione del *dashboard dei servizi Web* include una cartella di lavoro di Excel scaricabile.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-230">The *Web Services Dashboard* section includes a downloadable Excel workbook.</span></span> <span data-ttu-id="ec4b9-231">La cartella di lavoro viene fornita preformattata con l'API del servizio Web e le informazioni sullo schema incorporate.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-231">The workbook comes pre-formatted with the web service API and schema information embedded.</span></span> <span data-ttu-id="ec4b9-232">Quando si fa clic su *Download Excel Workbook* (Scarica cartella di lavoro di Excel), la cartella di lavoro si apre ed è possibile salvarla nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-232">When you click *Download Excel Workbook*, the workbook opens and you can save it to your local computer.</span></span> 

![][1]

<span data-ttu-id="ec4b9-233">Con la cartella di lavoro aperta, copiare i parametri predefiniti nella sezione Parameter di colore blu come mostrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-233">With the workbook open, copy your predefined parameters into the blue Parameter section as shown below.</span></span> <span data-ttu-id="ec4b9-234">Dopo aver immesso i parametri, Excel chiama il servizio Web di Machine Learning e le etichette con il punteggio previsto vengono visualizzate nella sezione Predicted Values (Valori previsti) di colore verde.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-234">Once the parameters are entered, Excel calls out to the Machine Learning web service and the predicted scored labels will display in the green Predicted Values section.</span></span> <span data-ttu-id="ec4b9-235">La cartella di lavoro continua a creare previsioni per i parametri in base al modello con training per tutti gli elementi di riga immessi in Parameters.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-235">The workbook will continue to create predictions for parameters based on your trained model for all row items entered under Parameters.</span></span> <span data-ttu-id="ec4b9-236">Per altre informazioni su come usare questa funzionalità, vedere [Utilizzo di un servizio Web Azure Machine Learning da Excel](machine-learning-consuming-from-excel.md).</span><span class="sxs-lookup"><span data-stu-id="ec4b9-236">For more information on how to use this feature, see [Consuming an Azure Machine Learning Web Service from Excel](machine-learning-consuming-from-excel.md).</span></span> 

![][2]

### <a name="optimization-and-further-experiments"></a><span data-ttu-id="ec4b9-237">Ottimizzazione e altri esperimenti</span><span class="sxs-lookup"><span data-stu-id="ec4b9-237">Optimization and further experiments</span></span>
<span data-ttu-id="ec4b9-238">Con una base disponibile con il modello di Excel, è stato possibile passare all'ottimizzazione del modello di regressione lineare di Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-238">Now that we had a baseline with our Excel model, we moved ahead to optimize our Machine Learning Linear Regression Model.</span></span> <span data-ttu-id="ec4b9-239">È stato usato il modulo [Filter-Based Feature Selection][filter-based-feature-selection] (Selezione di funzionalità in base al filtro) per ottimizzare la selezione degli elementi dei dati iniziali e ottenere un miglioramento delle prestazioni del 4,6% dell'errore assoluto medio.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-239">We used the module [Filter-Based Feature Selection][filter-based-feature-selection] to improve on our selection of initial data elements and it helped us achieve a performance improvement of 4.6% Mean Absolute Error.</span></span> <span data-ttu-id="ec4b9-240">Per i progetti futuri verrà usata questa funzionalità che consente di risparmiare settimane, normalmente impiegate nell'iterazione degli attributi dei dati per individuare il set di funzionalità più adatto per la modellazione.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-240">For future projects we will use this feature which could save us weeks in iterating through data attributes to find the right set of features to use for modelling.</span></span> 

<span data-ttu-id="ec4b9-241">È prevista l'aggiunta di altri algoritmi all'esperimento, ad esempio quelli [bayesiani][bayesian-linear-regression] o gli [alberi delle decisioni con boosting][boosted-decision-tree-regression], per confrontare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-241">Next we plan to include additional algorithms like [Bayesian][bayesian-linear-regression] or [Boosted Decision Trees][boosted-decision-tree-regression] in our experiment to compare performance.</span></span> 

<span data-ttu-id="ec4b9-242">Per eseguire un esperimento con regressione, si consiglia di provare il set di dati di esempio Energy Efficiency Regression, che contiene numerosi attributi numerici.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-242">If you want to experiment with regression, a good dataset to try is the Energy Efficiency Regression sample dataset, which has lots of numerical attributes.</span></span> <span data-ttu-id="ec4b9-243">Il set di dati viene fornito insieme ai set di dati di esempio in Machine Learning Studio.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-243">The dataset is provided as part of the sample datasets in Machine Learning Studio.</span></span> <span data-ttu-id="ec4b9-244">È possibile usare diversi moduli di apprendimento per la previsione di Heating Load o Cooling Load.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-244">You can use a variety of learning modules to predict either Heating Load or Cooling Load.</span></span> <span data-ttu-id="ec4b9-245">Il grafico seguente è un confronto delle prestazioni di diverse soluzioni di regressione rispetto alle previsioni del set di dati Energy Efficiency per l'elemento variabile Cooling Load di destinazione:</span><span class="sxs-lookup"><span data-stu-id="ec4b9-245">The chart below is a performance comparison of different regression learns against the Energy Efficiency dataset predicting for the target variable Cooling Load:</span></span> 

| <span data-ttu-id="ec4b9-246">Modello</span><span class="sxs-lookup"><span data-stu-id="ec4b9-246">Model</span></span> | <span data-ttu-id="ec4b9-247">Errore assoluto medio</span><span class="sxs-lookup"><span data-stu-id="ec4b9-247">Mean Absolute Error</span></span> | <span data-ttu-id="ec4b9-248">Radice dell'errore quadratico medio</span><span class="sxs-lookup"><span data-stu-id="ec4b9-248">Root Mean Squared Error</span></span> | <span data-ttu-id="ec4b9-249">Errore assoluto relativo</span><span class="sxs-lookup"><span data-stu-id="ec4b9-249">Relative Absolute Error</span></span> | <span data-ttu-id="ec4b9-250">Errore quadratico relativo</span><span class="sxs-lookup"><span data-stu-id="ec4b9-250">Relative Squared Error</span></span> | <span data-ttu-id="ec4b9-251">Coefficiente di determinazione</span><span class="sxs-lookup"><span data-stu-id="ec4b9-251">Coefficient of Determination</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="ec4b9-252">Albero delle decisioni con boosting scalabile</span><span class="sxs-lookup"><span data-stu-id="ec4b9-252">Boosted Decision Tree</span></span> |<span data-ttu-id="ec4b9-253">0,930113</span><span class="sxs-lookup"><span data-stu-id="ec4b9-253">0.930113</span></span> |<span data-ttu-id="ec4b9-254">1,4239</span><span class="sxs-lookup"><span data-stu-id="ec4b9-254">1.4239</span></span> |<span data-ttu-id="ec4b9-255">0,106647</span><span class="sxs-lookup"><span data-stu-id="ec4b9-255">0.106647</span></span> |<span data-ttu-id="ec4b9-256">0,021662</span><span class="sxs-lookup"><span data-stu-id="ec4b9-256">0.021662</span></span> |<span data-ttu-id="ec4b9-257">0,978338</span><span class="sxs-lookup"><span data-stu-id="ec4b9-257">0.978338</span></span> |
| <span data-ttu-id="ec4b9-258">Regressione lineare (Gradient Descent)</span><span class="sxs-lookup"><span data-stu-id="ec4b9-258">Linear Regression (Gradient Descent)</span></span> |<span data-ttu-id="ec4b9-259">2,035693</span><span class="sxs-lookup"><span data-stu-id="ec4b9-259">2.035693</span></span> |<span data-ttu-id="ec4b9-260">2,98006</span><span class="sxs-lookup"><span data-stu-id="ec4b9-260">2.98006</span></span> |<span data-ttu-id="ec4b9-261">0,233414</span><span class="sxs-lookup"><span data-stu-id="ec4b9-261">0.233414</span></span> |<span data-ttu-id="ec4b9-262">0,094881</span><span class="sxs-lookup"><span data-stu-id="ec4b9-262">0.094881</span></span> |<span data-ttu-id="ec4b9-263">0,905119</span><span class="sxs-lookup"><span data-stu-id="ec4b9-263">0.905119</span></span> |
| <span data-ttu-id="ec4b9-264">Regressione rete neurale</span><span class="sxs-lookup"><span data-stu-id="ec4b9-264">Neural Network Regression</span></span> |<span data-ttu-id="ec4b9-265">1,548195</span><span class="sxs-lookup"><span data-stu-id="ec4b9-265">1.548195</span></span> |<span data-ttu-id="ec4b9-266">2,114617</span><span class="sxs-lookup"><span data-stu-id="ec4b9-266">2.114617</span></span> |<span data-ttu-id="ec4b9-267">0,177517</span><span class="sxs-lookup"><span data-stu-id="ec4b9-267">0.177517</span></span> |<span data-ttu-id="ec4b9-268">0,047774</span><span class="sxs-lookup"><span data-stu-id="ec4b9-268">0.047774</span></span> |<span data-ttu-id="ec4b9-269">0,952226</span><span class="sxs-lookup"><span data-stu-id="ec4b9-269">0.952226</span></span> |
| <span data-ttu-id="ec4b9-270">Regressione lineare (Ordinary Least Squares)</span><span class="sxs-lookup"><span data-stu-id="ec4b9-270">Linear Regression (Ordinary Least Squares)</span></span> |<span data-ttu-id="ec4b9-271">1,428273</span><span class="sxs-lookup"><span data-stu-id="ec4b9-271">1.428273</span></span> |<span data-ttu-id="ec4b9-272">1,984461</span><span class="sxs-lookup"><span data-stu-id="ec4b9-272">1.984461</span></span> |<span data-ttu-id="ec4b9-273">0,163767</span><span class="sxs-lookup"><span data-stu-id="ec4b9-273">0.163767</span></span> |<span data-ttu-id="ec4b9-274">0,042074</span><span class="sxs-lookup"><span data-stu-id="ec4b9-274">0.042074</span></span> |<span data-ttu-id="ec4b9-275">0,957926</span><span class="sxs-lookup"><span data-stu-id="ec4b9-275">0.957926</span></span> |

## <a name="key-takeaways"></a><span data-ttu-id="ec4b9-276">Risultati principali</span><span class="sxs-lookup"><span data-stu-id="ec4b9-276">Key Takeaways</span></span>
<span data-ttu-id="ec4b9-277">L'esecuzione parallela della regressione di Excel e degli esperimenti di Azure Machine Learning ha aiutato a conoscere meglio questi strumenti.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-277">We learned a lot by from running Excel regression and Azure Machine Learning experiments in parallel.</span></span> <span data-ttu-id="ec4b9-278">La creazione del modello di base in Excel e il confronto con i modelli usando la [regressione lineare][linear-regression] di Machine Learning hanno illustrato il funzionamento di Azure Machine Learning e permesso di trovare opportunità di miglioramento della selezione dei dati e delle prestazioni del modello.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-278">Creating the baseline model in Excel and comparing it to models using Machine Learning [Linear Regression][linear-regression] helped us learn Azure Machine Learning, and we discovered opportunities to improve data selection and model performance.</span></span> 

<span data-ttu-id="ec4b9-279">Il modulo [Filter-Based Feature Selection][filter-based-feature-selection] (Selezione di funzionalità in base al filtro) si è rivelato molto utile per velocizzare i progetti di previsione.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-279">We also found that it is advisable to use [Filter-Based Feature Selection][filter-based-feature-selection] to accelerate future prediction projects.</span></span> <span data-ttu-id="ec4b9-280">Applicando la selezione delle funzionalità ai dati, è possibile creare un modello ottimizzato in Machine Learning con prestazioni complessivamente migliorate.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-280">By applying feature selection to your data, you can create an improved model in Machine Learning with better overall performance.</span></span> 

<span data-ttu-id="ec4b9-281">La possibilità di trasferire la previsione dell'analisi predittiva da Machine Learning a Excel comporta un aumento significativo della capacità a livello di sistema di fornire risultati a un pubblico molto più ampio di utenti aziendali.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-281">The ability to transfer the predictive analytic forecasting from Machine Learning to Excel systemically allows a significant increase in the ability to successfully provide results to a broad business user audience.</span></span> 

## <a name="resources"></a><span data-ttu-id="ec4b9-282">Risorse</span><span class="sxs-lookup"><span data-stu-id="ec4b9-282">Resources</span></span>
<span data-ttu-id="ec4b9-283">Di seguito sono elencate alcune risorse per agevolare l'uso della regressione:</span><span class="sxs-lookup"><span data-stu-id="ec4b9-283">Here are some resources for helping you work with regression:</span></span> 

* <span data-ttu-id="ec4b9-284">Regressione in Excel.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-284">Regression in Excel.</span></span> <span data-ttu-id="ec4b9-285">Se non è mai stata provata la regressione in Excel, questa esercitazione la spiega in modo molto chiaro: [http://www.excel-easy.com/examples/regression.html](http://www.excel-easy.com/examples/regression.html)</span><span class="sxs-lookup"><span data-stu-id="ec4b9-285">If you’ve never tried regression in Excel, this tutorial makes it easy: [http://www.excel-easy.com/examples/regression.html](http://www.excel-easy.com/examples/regression.html)</span></span>
* <span data-ttu-id="ec4b9-286">Regressione e previsione.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-286">Regression vs forecasting.</span></span> <span data-ttu-id="ec4b9-287">Tyler Chessman ha scritto un articolo di blog in cui spiega come fare previsioni di serie temporali in Excel, che contiene una valida descrizione di base della regressione lineare.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-287">Tyler Chessman wrote a blog article explaining how to do time series forecasting in Excel, which contains a good beginner’s description of linear regression.</span></span> [<span data-ttu-id="ec4b9-288">http://sqlmag.com/sql-server-analysis-services/understanding-time-series-forecasting-concepts</span><span class="sxs-lookup"><span data-stu-id="ec4b9-288">http://sqlmag.com/sql-server-analysis-services/understanding-time-series-forecasting-concepts</span></span>](http://sqlmag.com/sql-server-analysis-services/understanding-time-series-forecasting-concepts) 
* <span data-ttu-id="ec4b9-289">Regressione lineare Ordinary Least Squares: difetti, problemi e ostacoli.</span><span class="sxs-lookup"><span data-stu-id="ec4b9-289">Ordinary Least Squares Linear Regression: Flaws, Problems and Pitfalls.</span></span> <span data-ttu-id="ec4b9-290">Per un'introduzione e una discussione sulla regressione: [http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/ ](http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/)</span><span class="sxs-lookup"><span data-stu-id="ec4b9-290">For an introduction and discussion of Regression: [http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/ ](http://www.clockbackward.com/2009/06/18/ordinary-least-squares-linear-regression-flaws-problems-and-pitfalls/)</span></span>

[1]: ./media/machine-learning-linear-regression-in-azure/machine-learning-linear-regression-in-azure-1.png
[2]: ./media/machine-learning-linear-regression-in-azure/machine-learning-linear-regression-in-azure-2.png


<!-- Module References -->
[bayesian-linear-regression]: https://msdn.microsoft.com/library/azure/ee12de50-2b34-4145-aec0-23e0485da308/
[boosted-decision-tree-regression]: https://msdn.microsoft.com/library/azure/0207d252-6c41-4c77-84c3-73bdf1ac5960/
[filter-based-feature-selection]: https://msdn.microsoft.com/library/azure/918b356b-045c-412b-aa12-94a1d2dad90f/
[linear-regression]: https://msdn.microsoft.com/library/azure/31960a6f-789b-4cf7-88d6-2e1152c0bd1a/
[select-columns]: https://msdn.microsoft.com/library/azure/1ec722fa-b623-4e26-a44e-a50c6d726223/
[split]: https://msdn.microsoft.com/library/azure/70530644-c97a-4ab6-85f7-88bf30a8be5f/

