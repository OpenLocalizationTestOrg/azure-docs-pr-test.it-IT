---
title: "Pianificare la capacità e la scalabilità per la replica del server fisico in Azure con Azure Site Recovery | Microsoft Docs"
description: "Consultare questo articolo per pianificare la capacità e la scalabilità quando si esegue la replica di server fisici Windows/Linux in Azure con Azure Site Recovery"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: 554f59ee-0b49-4779-9737-90cb601ef6fe
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 06/27/2017
ms.author: rayne
ms.openlocfilehash: 971ad6dd39f94aa7944f6ed3b31bc3acc605d9a7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="step-3-plan-capacity-and-scaling-for-physical-server-to-azure-replication"></a><span data-ttu-id="d7525-103">Passaggio 3: Pianificare la capacità e la scalabilità per la replica dei server fisici in Azure</span><span class="sxs-lookup"><span data-stu-id="d7525-103">Step 3: Plan capacity and scaling for physical server to Azure replication</span></span>

<span data-ttu-id="d7525-104">Consultare questo articolo per determinare la capacità e la scalabilità durante la replica di server fisici Windows/Linux locali in Azure con [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d7525-104">Use this article to figure out capacity and scaling, when you're replicating on-premises Windows/Linux physical servers to Azure with [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="d7525-105">Inserire commenti e domande nella parte inferiore di questo articolo oppure nel [forum sui servizi di ripristino di Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="d7525-105">Post comments and questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>


## <a name="plan-deployment-capacity"></a><span data-ttu-id="d7525-106">Pianificare la capacità di distribuzione</span><span class="sxs-lookup"><span data-stu-id="d7525-106">Plan deployment capacity</span></span>

1. <span data-ttu-id="d7525-107">Vedere questo [articolo](site-recovery-plan-capacity-vmware.md) per informazioni sulla stima dei requisiti di replica e per indicazioni sul ridimensionamento dei componenti di Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="d7525-107">Read this [article](site-recovery-plan-capacity-vmware.md) to learn about estimating replication requirements, and guidance for sizing Site Recovery components.</span></span>
2. <span data-ttu-id="d7525-108">Vedere le considerazioni seguenti per informazioni sul ridimensionamento dei server del componente e sul controllo della larghezza di banda dei computer replicati.</span><span class="sxs-lookup"><span data-stu-id="d7525-108">Read the considerations below to learn about scaling component servers, and controlling replicated machine bandwidth.</span></span>

## <a name="replication-considerations"></a><span data-ttu-id="d7525-109">Considerazioni sulla replica</span><span class="sxs-lookup"><span data-stu-id="d7525-109">Replication considerations</span></span>

<span data-ttu-id="d7525-110">Usare queste considerazioni per determinare i requisiti dei server replicati.</span><span class="sxs-lookup"><span data-stu-id="d7525-110">Use these considerations to figure out replicated server requirements.</span></span>

<span data-ttu-id="d7525-111">**Componente**</span><span class="sxs-lookup"><span data-stu-id="d7525-111">**Component**</span></span> | <span data-ttu-id="d7525-112">**Dettagli**</span><span class="sxs-lookup"><span data-stu-id="d7525-112">**Details**</span></span> 
--- | --- 
<span data-ttu-id="d7525-113">**Replica**</span><span class="sxs-lookup"><span data-stu-id="d7525-113">**Replication**</span></span> | <span data-ttu-id="d7525-114">**Frequenza di modifica giornaliera massima**: un computer protetto può usare un solo server di elaborazione e la frequenza di modifica giornaliera gestita da un singolo server di elaborazione può arrivare fino a 2 TB.</span><span class="sxs-lookup"><span data-stu-id="d7525-114">**Maximum daily change rate:** A protected machine can only use one process server, and a single process server can handle a daily change rate up to 2 TB.</span></span> <span data-ttu-id="d7525-115">La massima frequenza di modifica dei dati giornaliera supportata per una macchina protetta è quindi di 2 TB.</span><span class="sxs-lookup"><span data-stu-id="d7525-115">Thus 2 TB is the maximum daily data change rate that’s supported for a protected machine.</span></span><br/><br/> <span data-ttu-id="d7525-116">**Velocità effettiva massima**: una macchina replicata può appartenere a un account di archiviazione in Azure.</span><span class="sxs-lookup"><span data-stu-id="d7525-116">**Maximum throughput:** A replicated machine can belong to one storage account in Azure.</span></span> <span data-ttu-id="d7525-117">Un account di archiviazione standard può gestire fino a 20.000 richieste al secondo ed è consigliabile fare in modo che il numero di operazioni di input/output al secondo (IOPS) in una macchina di origine rimanga impostato su 20.000.</span><span class="sxs-lookup"><span data-stu-id="d7525-117">A standard storage account can handle a maximum of 20,000 requests per second, and we recommend that you keep the number of input/output operations per second (IOPS) across a source machine to 20,000.</span></span> <span data-ttu-id="d7525-118">Se, ad esempio, si ha un computer di origine con 5 dischi e ogni disco genera 120 IOPS (dimensione pari a 8 K) nella macchina di origine, il computer rientra nel limite di Azure di 500 IOPS per disco.</span><span class="sxs-lookup"><span data-stu-id="d7525-118">For example, if you have a source machine with 5 disks, and each disk generates 120 IOPS (8K size) on the source machine, then it will be within the Azure per disk IOPS limit of 500.</span></span> <span data-ttu-id="d7525-119">Il numero di account di archiviazione necessari è uguale al numero complessivo di IOPS della macchina di origine diviso per 20.000.</span><span class="sxs-lookup"><span data-stu-id="d7525-119">(The number of storage accounts required is equal to the total source machine IOPS, divided by 20,000.)</span></span>

## <a name="configuration-server-capacity"></a><span data-ttu-id="d7525-120">Capacità del server di configurazione</span><span class="sxs-lookup"><span data-stu-id="d7525-120">Configuration server capacity</span></span>

<span data-ttu-id="d7525-121">Il server di configurazione deve poter gestire la capacità della frequenza di modifica giornaliera in tutti i carichi di lavoro in esecuzione nei computer protetti e avere a disposizione una larghezza di banda sufficiente per eseguire la replica continua dei dati in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="d7525-121">The configuration server should be able to handle the daily change rate capacity across all workloads running on protected machines, and needs sufficient bandwidth to continuously replicate data to Azure Storage.</span></span>

<span data-ttu-id="d7525-122">Come procedura consigliata, il server di configurazione deve trovarsi nella stessa rete e nello stesso segmento LAN dei computer da proteggere.</span><span class="sxs-lookup"><span data-stu-id="d7525-122">As a best practice, locate the configuration server on the same network and LAN segment as the machines you want to protect.</span></span> <span data-ttu-id="d7525-123">Se si trova in una rete diversa, i computer da proteggere devono avere la visibilità di rete L3 per il server.</span><span class="sxs-lookup"><span data-stu-id="d7525-123">It can be located on a different network, but machines you want to protect should have layer 3 network visibility to it.</span></span>

## <a name="sizing-recommendations"></a><span data-ttu-id="d7525-124">Consigli sul ridimensionamento</span><span class="sxs-lookup"><span data-stu-id="d7525-124">Sizing recommendations</span></span>

<span data-ttu-id="d7525-125">La tabella riepiloga alcuni consigli sul ridimensionamento in base alla CPU.</span><span class="sxs-lookup"><span data-stu-id="d7525-125">The table summarizes sizing recommendations based on CPU.</span></span>

<span data-ttu-id="d7525-126">**CPU**</span><span class="sxs-lookup"><span data-stu-id="d7525-126">**CPU**</span></span> | <span data-ttu-id="d7525-127">**Memoria**</span><span class="sxs-lookup"><span data-stu-id="d7525-127">**Memory**</span></span> | <span data-ttu-id="d7525-128">**Dimensione disco cache**</span><span class="sxs-lookup"><span data-stu-id="d7525-128">**Cache disk size**</span></span> | <span data-ttu-id="d7525-129">**Frequenza di modifica dei dati**</span><span class="sxs-lookup"><span data-stu-id="d7525-129">**Data change rate**</span></span> | <span data-ttu-id="d7525-130">**Computer protetti**</span><span class="sxs-lookup"><span data-stu-id="d7525-130">**Protected machines**</span></span>
--- | --- | --- | --- | ---
<span data-ttu-id="d7525-131">8 vCPU (2 socket * 4 core a 2.5 gigahertz [GHz])</span><span class="sxs-lookup"><span data-stu-id="d7525-131">8 vCPUs (2 sockets * 4 cores @ 2.5 gigahertz [GHz])</span></span> | <span data-ttu-id="d7525-132">16 GB</span><span class="sxs-lookup"><span data-stu-id="d7525-132">16 GB</span></span> | <span data-ttu-id="d7525-133">300 GB</span><span class="sxs-lookup"><span data-stu-id="d7525-133">300 GB</span></span> | <span data-ttu-id="d7525-134">500 GB o inferiore</span><span class="sxs-lookup"><span data-stu-id="d7525-134">500 GB or less</span></span> | <span data-ttu-id="d7525-135">Replicare meno di 100 computer.</span><span class="sxs-lookup"><span data-stu-id="d7525-135">Replicate less than 100 machines.</span></span>
<span data-ttu-id="d7525-136">12 vCPU (2 socket * 6 core a 2,5 GHz)</span><span class="sxs-lookup"><span data-stu-id="d7525-136">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz)</span></span> | <span data-ttu-id="d7525-137">18 GB</span><span class="sxs-lookup"><span data-stu-id="d7525-137">18 GB</span></span> | <span data-ttu-id="d7525-138">600 GB</span><span class="sxs-lookup"><span data-stu-id="d7525-138">600 GB</span></span> | <span data-ttu-id="d7525-139">Da 500 GB a 1 TB</span><span class="sxs-lookup"><span data-stu-id="d7525-139">500 GB to 1 TB</span></span> | <span data-ttu-id="d7525-140">Replicare tra 100 e 150 computer.</span><span class="sxs-lookup"><span data-stu-id="d7525-140">Replicate between 100-150 machines.</span></span>
<span data-ttu-id="d7525-141">16 vCPU (2 socket * 8 core a 2,5 GHz)</span><span class="sxs-lookup"><span data-stu-id="d7525-141">16 vCPUs (2 sockets * 8 cores @ 2.5 GHz)</span></span> | <span data-ttu-id="d7525-142">32 GB</span><span class="sxs-lookup"><span data-stu-id="d7525-142">32 GB</span></span> | <span data-ttu-id="d7525-143">1 TB</span><span class="sxs-lookup"><span data-stu-id="d7525-143">1 TB</span></span> | <span data-ttu-id="d7525-144">Da 1 TB a 2 TB</span><span class="sxs-lookup"><span data-stu-id="d7525-144">1 TB to 2 TB</span></span> | <span data-ttu-id="d7525-145">Replicare tra 150 e 200 computer.</span><span class="sxs-lookup"><span data-stu-id="d7525-145">Replicate between 150-200 machines.</span></span>
<span data-ttu-id="d7525-146">Distribuire un altro server di elaborazione</span><span class="sxs-lookup"><span data-stu-id="d7525-146">Deploy another process server</span></span> | | | <span data-ttu-id="d7525-147">Superiore a 2 TB</span><span class="sxs-lookup"><span data-stu-id="d7525-147">> 2 TB</span></span> | <span data-ttu-id="d7525-148">Distribuire server di elaborazione aggiuntivi se si esegue la replica di più di 200 computer o la frequenza di modifica dei dati giornaliera è superiore a 2 TB.</span><span class="sxs-lookup"><span data-stu-id="d7525-148">Deploy additional process servers if you're replicating more than 200 machines, or if the daily data change rate exceeds 2 TB.</span></span>

<span data-ttu-id="d7525-149">Dove:</span><span class="sxs-lookup"><span data-stu-id="d7525-149">Where:</span></span>

* <span data-ttu-id="d7525-150">Ogni computer di origine è configurato con 3 dischi da 100 GB.</span><span class="sxs-lookup"><span data-stu-id="d7525-150">Each source machine is configured with 3 disks of 100 GB each.</span></span>
* <span data-ttu-id="d7525-151">La risorsa di archiviazione di benchmarking usata per le misurazioni del disco della cache è di 8 unità SAS a 10.000 RPM con RAID 10.</span><span class="sxs-lookup"><span data-stu-id="d7525-151">We used benchmarking storage of 8 SAS drives of 10 K RPM, with RAID 10, for cache disk measurements.</span></span>

## <a name="process-server-capacity"></a><span data-ttu-id="d7525-152">Capacità del server di elaborazione</span><span class="sxs-lookup"><span data-stu-id="d7525-152">Process server capacity</span></span>


<span data-ttu-id="d7525-153">Il server di elaborazione riceve i dati di replica da computer protetti e li ottimizza attraverso la memorizzazione nella cache, la compressione e la crittografia,</span><span class="sxs-lookup"><span data-stu-id="d7525-153">The process server receives replication data from protected machines, and optimizes it with caching, compression, and encryption.</span></span> <span data-ttu-id="d7525-154">prima di inviarli ad Azure.</span><span class="sxs-lookup"><span data-stu-id="d7525-154">Then it sends the data to Azure.</span></span>

- <span data-ttu-id="d7525-155">Il computer server di elaborazione deve avere risorse sufficienti per eseguire queste attività.</span><span class="sxs-lookup"><span data-stu-id="d7525-155">The process server machine should have sufficient resources to perform these tasks.</span></span>
- <span data-ttu-id="d7525-156">Per impostazione predefinita, il primo server di elaborazione viene installato nel server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-156">The first process server is installed by default on the configuration server.</span></span> <span data-ttu-id="d7525-157">È possibile distribuire altri server di elaborazione per ridimensionare l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="d7525-157">You can deploy additional process servers to scale your environment.</span></span>
- <span data-ttu-id="d7525-158">Il server di elaborazione usa una cache basata su disco.</span><span class="sxs-lookup"><span data-stu-id="d7525-158">The process server uses a disk-based cache.</span></span> <span data-ttu-id="d7525-159">Usare un disco della cache separato di almeno 600 GB per gestire le modifiche ai dati archiviate in caso di colli di bottiglia o interruzioni della rete.</span><span class="sxs-lookup"><span data-stu-id="d7525-159">Use a separate cache disk of 600 GB or more to handle data changes stored in the event of a network bottleneck or outage.</span></span>
- <span data-ttu-id="d7525-160">Se è necessario proteggere più di 200 computer o la frequenza di modifica giornaliera è superiore a 2 TB, è possibile aggiungere altri server di elaborazione per gestire il carico di replica.</span><span class="sxs-lookup"><span data-stu-id="d7525-160">If you need to protect more than 200 machines, or the daily change rate is greater than 2 TB, you can add process servers to handle the replication load.</span></span> <span data-ttu-id="d7525-161">Per la scalabilità orizzontale è possibile:</span><span class="sxs-lookup"><span data-stu-id="d7525-161">To scale out, you can:</span></span>
    - <span data-ttu-id="d7525-162">Aumentare il numero di server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-162">Increase the number of configuration servers.</span></span> <span data-ttu-id="d7525-163">Ad esempio, è possibile proteggere fino a 400 computer con due server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-163">For example, you can protect up to 400 machines with two configuration servers.</span></span>
    - <span data-ttu-id="d7525-164">Aggiungere altri server di elaborazione e usarli per gestire il traffico al posto del server di gestione o in aggiunta al server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-164">Add more process servers, and use these to handle traffic instead of (or in addition to) the configuration server.</span></span>


### <a name="example-process-server-scaling"></a><span data-ttu-id="d7525-165">Ridimensionamento del server di elaborazione di esempio</span><span class="sxs-lookup"><span data-stu-id="d7525-165">Example process server scaling</span></span>

<span data-ttu-id="d7525-166">La tabella seguente descrive uno scenario in cui:</span><span class="sxs-lookup"><span data-stu-id="d7525-166">The following table describes a scenario in which:</span></span>

* <span data-ttu-id="d7525-167">Non si prevede di usare il server di configurazione come server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-167">You're not planning to use the configuration server as a process server.</span></span>
* <span data-ttu-id="d7525-168">È stato configurato un server di elaborazione aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="d7525-168">You've set up an additional process server.</span></span>
* <span data-ttu-id="d7525-169">Le macchine virtuali protette sono state configurate per l'uso del server di elaborazione aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="d7525-169">You've configured protected virtual machines to use the additional process server.</span></span>
* <span data-ttu-id="d7525-170">Ogni computer di origine protetto è configurato con tre dischi da 100 GB.</span><span class="sxs-lookup"><span data-stu-id="d7525-170">Each protected source machine is configured with three disks of 100 GB each.</span></span>

<span data-ttu-id="d7525-171">**Server di configurazione**</span><span class="sxs-lookup"><span data-stu-id="d7525-171">**Configuration server**</span></span> | <span data-ttu-id="d7525-172">**Server di elaborazione aggiuntivo**</span><span class="sxs-lookup"><span data-stu-id="d7525-172">**Additional process server**</span></span> | <span data-ttu-id="d7525-173">**Dimensione disco cache**</span><span class="sxs-lookup"><span data-stu-id="d7525-173">**Cache disk size**</span></span> | <span data-ttu-id="d7525-174">**Frequenza di modifica dei dati**</span><span class="sxs-lookup"><span data-stu-id="d7525-174">**Data change rate**</span></span> | <span data-ttu-id="d7525-175">**Computer protetti**</span><span class="sxs-lookup"><span data-stu-id="d7525-175">**Protected machines**</span></span>
--- | --- | --- | --- | ---
<span data-ttu-id="d7525-176">8 vCPU (2 socket * 4 core a 2,5 GHz), 16 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="d7525-176">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 16 GB memory</span></span> | <span data-ttu-id="d7525-177">4 vCPU (2 socket * 2 core a 2,5 GHz), 8 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="d7525-177">4 vCPUs (2 sockets * 2 cores @ 2.5 GHz), 8 GB memory</span></span> | <span data-ttu-id="d7525-178">300 GB</span><span class="sxs-lookup"><span data-stu-id="d7525-178">300 GB</span></span> | <span data-ttu-id="d7525-179">250 GB o inferiore</span><span class="sxs-lookup"><span data-stu-id="d7525-179">250 GB or less</span></span> | <span data-ttu-id="d7525-180">Eseguire la replica di un massimo di 85 macchine.</span><span class="sxs-lookup"><span data-stu-id="d7525-180">Replicate 85 or fewer machines.</span></span>
<span data-ttu-id="d7525-181">8 vCPU (2 socket * 4 core a 2,5 GHz), 16 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="d7525-181">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 16 GB memory</span></span> | <span data-ttu-id="d7525-182">8 vCPU (2 socket * 4 core a 2,5 GHz), 12 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="d7525-182">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 12 GB memory</span></span> | <span data-ttu-id="d7525-183">600 GB</span><span class="sxs-lookup"><span data-stu-id="d7525-183">600 GB</span></span> | <span data-ttu-id="d7525-184">Da 250 GB a 1 TB</span><span class="sxs-lookup"><span data-stu-id="d7525-184">250 GB to 1 TB</span></span> | <span data-ttu-id="d7525-185">Replicare tra 85 e 150 computer.</span><span class="sxs-lookup"><span data-stu-id="d7525-185">Replicate between 85-150 machines.</span></span>
<span data-ttu-id="d7525-186">12 vCPU (2 socket * 6 core a 2,5 GHz), 18 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="d7525-186">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz), 18 GB memory</span></span> | <span data-ttu-id="d7525-187">12 vCPU (2 socket * 6 core a 2,5 GHz), 24 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="d7525-187">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz) 24 GB memory</span></span> | <span data-ttu-id="d7525-188">1 TB</span><span class="sxs-lookup"><span data-stu-id="d7525-188">1 TB</span></span> | <span data-ttu-id="d7525-189">Da 1 TB a 2 TB</span><span class="sxs-lookup"><span data-stu-id="d7525-189">1 TB to 2 TB</span></span> | <span data-ttu-id="d7525-190">Replicare tra 150 e 225 computer.</span><span class="sxs-lookup"><span data-stu-id="d7525-190">Replicate between 150-225 machines.</span></span>

<span data-ttu-id="d7525-191">Il modo in cui i server vengono adattati dipende dalle preferenze personali in merito al modello di scalabilità orizzontale o verticale.</span><span class="sxs-lookup"><span data-stu-id="d7525-191">The way in which you scale your servers depends on your preference for a scale-up or scale-out model.</span></span>  <span data-ttu-id="d7525-192">L'aumento delle prestazioni si ottiene distribuendo alcuni server di configurazione e di elaborazione avanzati, mentre l'aumento del numero di istanze si ottiene distribuendo più server con meno risorse.</span><span class="sxs-lookup"><span data-stu-id="d7525-192">You scale up by deploying a few high-end configuration and process servers, or scale out by deploying more servers with fewer resources.</span></span> <span data-ttu-id="d7525-193">Ad esempio, per proteggere 220 computer è possibile eseguire una di queste operazioni:</span><span class="sxs-lookup"><span data-stu-id="d7525-193">For example, if you need to protect 220 machines, you could do either of the following:</span></span>

* <span data-ttu-id="d7525-194">Configurare il server di configurazione con 12 vCPU e 18 GB di memoria e un server di elaborazione aggiuntivo con 12 vCPU e 24 GB di memoria.</span><span class="sxs-lookup"><span data-stu-id="d7525-194">Set up the configuration server with 12 vCPU, 18 GB of memory, and an additional process server with 12 vCPU, 24 GB of memory.</span></span> <span data-ttu-id="d7525-195">Configurare quindi le macchine protette affinché usino solo il server di elaborazione aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="d7525-195">Configure protected machines to use the additional process server only.</span></span>
* <span data-ttu-id="d7525-196">Configurare due server di configurazione (2 x 8 vCPU, 16 GB di RAM) e due server di elaborazione aggiuntivi (1 x 8 vCPU e 1 x 4 vCPU per gestire 135 + 85 [220] macchine).</span><span class="sxs-lookup"><span data-stu-id="d7525-196">Set up two configuration servers (2 x 8 vCPU, 16 GB RAM) and two additional process servers (1 x 8 vCPU and 4 vCPU x 1 to handle 135 + 85 [220] machines).</span></span> <span data-ttu-id="d7525-197">Configurare quindi le macchine protette affinché usino solo i server di elaborazione aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="d7525-197">Configure protected machines to use the additional process servers only.</span></span>

## <a name="deploy-additional-process-servers"></a><span data-ttu-id="d7525-198">Distribuire server di elaborazione aggiuntivi</span><span class="sxs-lookup"><span data-stu-id="d7525-198">Deploy additional process servers</span></span>

1. <span data-ttu-id="d7525-199">Seguire [queste istruzioni](site-recovery-vmware-setup-azure-ps-resource-manager.md) per configurare un server di elaborazione aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="d7525-199">Follow [these instructions](site-recovery-vmware-setup-azure-ps-resource-manager.md) to set up an additional process server.</span></span>
2. <span data-ttu-id="d7525-200">Per ottenere la passphrase, eseguire **[CartellaInstallazioneSiteRecovery]\home\sysystems\bin\genpassphrase.exe –n** nel server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-200">If you don't have the passphrase, run **[SiteRecoveryInstallationFolder]\home\sysystems\bin\genpassphrase.exe –n** on the configuration server to get it.</span></span>
3. <span data-ttu-id="d7525-201">Dopo aver configurato il server di elaborazione, è possibile eseguire la migrazione dei computer di origine per usarlo.</span><span class="sxs-lookup"><span data-stu-id="d7525-201">After setting up the process server, you migrate source machines to use it.</span></span>

    1. <span data-ttu-id="d7525-202">In **Impostazioni** > **Server di Site Recovery** fare clic sul server di configurazione >**Server di elaborazione**.</span><span class="sxs-lookup"><span data-stu-id="d7525-202">In **Settings** > **Site Recovery servers**, click the configuration server > **Process servers**.</span></span>
    2. <span data-ttu-id="d7525-203">Fare clic con il pulsante destro del mouse sul server di elaborazione in uso e scegliere **Passa a**.</span><span class="sxs-lookup"><span data-stu-id="d7525-203">Right-click the process server currently in use > **Switch**.</span></span>
    3. <span data-ttu-id="d7525-204">In **Selezionare il server di elaborazione di destinazione** selezionare il nuovo server di elaborazione da usare e le macchine virtuali che dovranno essere gestite dal server.</span><span class="sxs-lookup"><span data-stu-id="d7525-204">In **Select target process server**, select the process server you want to use, and select the VMs that the server will handle.</span></span>
    4. <span data-ttu-id="d7525-205">Fare clic sull'icona delle informazioni.</span><span class="sxs-lookup"><span data-stu-id="d7525-205">Click the information icon.</span></span> <span data-ttu-id="d7525-206">Per facilitare le decisioni relative al carico, viene visualizzato lo spazio medio necessario per replicare ogni macchina virtuale selezionata nel nuovo server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-206">To help you make load decisions, the average space that's needed to replicate each selected VM to the new process server is displayed.</span></span>
    5. <span data-ttu-id="d7525-207">Fare clic sul segno di spunta per avviare la replica nel nuovo server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-207">Click the check mark to start replication to the new process server.</span></span>

## <a name="control-network-bandwidth"></a><span data-ttu-id="d7525-208">Controllare la larghezza di banda della rete</span><span class="sxs-lookup"><span data-stu-id="d7525-208">Control network bandwidth</span></span>

<span data-ttu-id="d7525-209">Dopo aver eseguito lo [strumento di pianificazione della distribuzione](site-recovery-deployment-planner.md) per calcolare la larghezza di banda necessaria per la replica (la replica iniziale e successivamente il delta), sono disponibili due opzioni per controllare la quantità di larghezza di banda usata per la replica:</span><span class="sxs-lookup"><span data-stu-id="d7525-209">After you run [the Deployment Planner tool](site-recovery-deployment-planner.md) to calculate the bandwidth you need for replication (the initial replication and then delta), you can control the amount of bandwidth used for replication using a couple of options:</span></span>

* <span data-ttu-id="d7525-210">**Limitare la larghezza di banda**: il traffico VMware che viene replicato in Azure passa attraverso un server di elaborazione specifico.</span><span class="sxs-lookup"><span data-stu-id="d7525-210">**Throttle bandwidth**: VMware traffic that replicates to Azure goes through a specific process server.</span></span> <span data-ttu-id="d7525-211">È possibile limitare la larghezza di banda nei computer eseguiti come server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-211">You can throttle bandwidth on the machines running as process servers.</span></span>
* <span data-ttu-id="d7525-212">**Influire sulla larghezza di banda**: è possibile influire sulla larghezza di banda usata per la replica tramite una coppia di chiavi del Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="d7525-212">**Influence bandwidth**: You can influence the bandwidth used for replication by using a couple of registry keys:</span></span>
  * <span data-ttu-id="d7525-213">Il valore del Registro di sistema **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\UploadThreadsPerVM** specifica il numero di thread usati per il trasferimento dati di un disco, durante la replica iniziale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="d7525-213">The **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\UploadThreadsPerVM** registry value specifies the number of threads that are used for data transfer (initial or delta replication) of a disk.</span></span> <span data-ttu-id="d7525-214">Un valore più elevato aumenta la larghezza di banda di rete usata per la replica.</span><span class="sxs-lookup"><span data-stu-id="d7525-214">A higher value increases the network bandwidth used for replication.</span></span>
  * <span data-ttu-id="d7525-215">Il valore **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\DownloadThreadsPerVM** specifica il numero di thread usati per il trasferimento dati durante il failback.</span><span class="sxs-lookup"><span data-stu-id="d7525-215">The **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\DownloadThreadsPerVM** specifies the number of threads used for data transfer during failback.</span></span>

### <a name="throttle-bandwidth"></a><span data-ttu-id="d7525-216">Limitare la larghezza di banda</span><span class="sxs-lookup"><span data-stu-id="d7525-216">Throttle bandwidth</span></span>

1. <span data-ttu-id="d7525-217">Aprire lo snap-in MMC di Azure Backup nel computer usato come server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-217">Open the Azure Backup MMC snap-in on the machine acting as the process server.</span></span> <span data-ttu-id="d7525-218">Per impostazione predefinita, è disponibile un collegamento a Backup sul desktop o nella cartella seguente: C:\Programmi\Microsoft Azure Recovery Services Agent\bin\wabadmin.</span><span class="sxs-lookup"><span data-stu-id="d7525-218">By default, a shortcut for Backup is available on the desktop, or in the following folder: C:\Program Files\Microsoft Azure Recovery Services Agent\bin\wabadmin.</span></span>
2. <span data-ttu-id="d7525-219">Nello snap-in fare clic su **Modifica proprietà**.</span><span class="sxs-lookup"><span data-stu-id="d7525-219">In the snap-in, click **Change Properties**.</span></span>
3. <span data-ttu-id="d7525-220">Nella scheda **Limitazione larghezza di banda rete** selezionare **Abilita la limitazione all'utilizzo della larghezza di banda Internet per le operazioni di backup**.</span><span class="sxs-lookup"><span data-stu-id="d7525-220">On the **Throttling** tab, select **Enable internet bandwidth usage throttling for backup operations**.</span></span>
4. <span data-ttu-id="d7525-221">Impostare i limiti per le ore lavorative e non lavorative.</span><span class="sxs-lookup"><span data-stu-id="d7525-221">Set the limits for work and non-work hours.</span></span> <span data-ttu-id="d7525-222">Gli intervalli validi sono compresi tra 512 Kbps e 102 Mbps al secondo.</span><span class="sxs-lookup"><span data-stu-id="d7525-222">Valid ranges are from 512 Kbps to 102 Mbps per second.</span></span>

    ![Limitazione](./media/physical-walkthrough-capacity/throttle2.png)

<span data-ttu-id="d7525-224">È anche possibile usare il cmdlet [Set-OBMachineSetting](https://technet.microsoft.com/library/hh770409.aspx) per impostare la limitazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-224">You can also use the [Set-OBMachineSetting](https://technet.microsoft.com/library/hh770409.aspx) cmdlet to set throttling.</span></span> <span data-ttu-id="d7525-225">Di seguito è riportato un esempio:</span><span class="sxs-lookup"><span data-stu-id="d7525-225">Here's a sample:</span></span>

    $mon = [System.DayOfWeek]::Monday
    $tue = [System.DayOfWeek]::Tuesday
    Set-OBMachineSetting -WorkDay $mon, $tue -StartWorkHour "9:00:00" -EndWorkHour "18:00:00" -WorkHourBandwidth  (512*1024) -NonWorkHourBandwidth (2048*1024)

<span data-ttu-id="d7525-226">**Set-OBMachineSetting -NoThrottle** indica che non è necessaria alcuna limitazione.</span><span class="sxs-lookup"><span data-stu-id="d7525-226">**Set-OBMachineSetting -NoThrottle** indicates that no throttling is required.</span></span>

### <a name="influence-network-bandwidth-for-a-vm"></a><span data-ttu-id="d7525-227">Influire sulla larghezza di banda della rete per una VM</span><span class="sxs-lookup"><span data-stu-id="d7525-227">Influence network bandwidth for a VM</span></span>

1. <span data-ttu-id="d7525-228">Nel Registro di sistema della VM passare a **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Replication**.</span><span class="sxs-lookup"><span data-stu-id="d7525-228">In registry of the VM, go to **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Replication**.</span></span>
   * <span data-ttu-id="d7525-229">Per intervenire sul traffico della larghezza di banda in un disco di replica, modificare il valore di **UploadThreadsPerVM** oppure creare la chiave, se non esiste.</span><span class="sxs-lookup"><span data-stu-id="d7525-229">To influence the bandwidth traffic on a replicating disk, modify the value of **UploadThreadsPerVM**, or create the key if it doesn't exist.</span></span>
   * <span data-ttu-id="d7525-230">Per intervenire sulla larghezza di banda per il traffico di failback da Azure, modificare il valore di **DownloadThreadsPerVM**.</span><span class="sxs-lookup"><span data-stu-id="d7525-230">To influence the bandwidth for failback traffic from Azure, modify the value of **DownloadThreadsPerVM**.</span></span>
2. <span data-ttu-id="d7525-231">Il valore predefinito è 4.</span><span class="sxs-lookup"><span data-stu-id="d7525-231">The default value is 4.</span></span> <span data-ttu-id="d7525-232">In una rete con provisioning eccessivo è necessario modificare queste chiavi del Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="d7525-232">In an overprovisioned network, these registry keys should be modified.</span></span> <span data-ttu-id="d7525-233">Il valore massimo è 32.</span><span class="sxs-lookup"><span data-stu-id="d7525-233">The maximum is 32.</span></span> <span data-ttu-id="d7525-234">Monitorare il traffico per ottimizzare il valore.</span><span class="sxs-lookup"><span data-stu-id="d7525-234">Monitor traffic to optimize the value.</span></span>




## <a name="next-steps"></a><span data-ttu-id="d7525-235">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="d7525-235">Next steps</span></span>

<span data-ttu-id="d7525-236">Andare a [Passaggio 4: Pianificare la rete](physical-walkthrough-network.md).</span><span class="sxs-lookup"><span data-stu-id="d7525-236">Go to [Step 4: Plan networking](physical-walkthrough-network.md).</span></span>
