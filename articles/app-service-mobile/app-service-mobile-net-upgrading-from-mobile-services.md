---
title: L'aggiornamento da Servizi mobili a Servizio app di Azure
description: Informazioni su come eseguire facilmente l'aggiornamento dell'applicazione Servizi mobili a un'app per dispositivi mobili del servizio app
services: app-service\mobile
documentationcenter: 
author: ggailey777
manager: syntaxc4
editor: 
ms.assetid: 9c0ac353-afb6-462b-ab94-d91b8247322f
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile
ms.devlang: dotnet
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: 81173b34d0d3b07c5c49d867b1dc5060c7311f12
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="upgrade-your-existing-net-azure-mobile-service-to-app-service"></a><span data-ttu-id="4f54d-103">Aggiornare il servizio mobile .NET di Azure esistente al servizio app</span><span class="sxs-lookup"><span data-stu-id="4f54d-103">Upgrade your existing .NET Azure Mobile Service to App Service</span></span>
<span data-ttu-id="4f54d-104">I dispositivi mobili del servizio app offrono un nuovo modo per creare applicazioni mobili usando Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="4f54d-104">App Service Mobile is a new way to build mobile applications using Microsoft Azure.</span></span> <span data-ttu-id="4f54d-105">Per altre informazioni, vedere [Che cosa sono le app per dispositivi mobili?].</span><span class="sxs-lookup"><span data-stu-id="4f54d-105">To learn more, see [What are Mobile Apps?].</span></span>

<span data-ttu-id="4f54d-106">Questo argomento descrive come eseguire la migrazione di un'applicazione back-end .NET esistente da Servizi mobili di Azure a una nuova app per dispositivi mobili del servizio app.</span><span class="sxs-lookup"><span data-stu-id="4f54d-106">This topic describes how to upgrade an existing .NET backend application from Azure Mobile Services to a new App Service Mobile Apps.</span></span> <span data-ttu-id="4f54d-107">Durante una migrazione, l'applicazione Servizi mobili esistente può continuare a funzionare.</span><span class="sxs-lookup"><span data-stu-id="4f54d-107">While you perform this upgrade, your existing Mobile Services application can continue to operate.</span></span>   <span data-ttu-id="4f54d-108">Se si deve aggiornare un'applicazione back-end Node.js, vedere [Aggiornamento dei servizi mobili Node.js](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span><span class="sxs-lookup"><span data-stu-id="4f54d-108">If you need to upgrade a Node.js backend application, refer to [Upgrading your Node.js Mobile Services](app-service-mobile-node-backend-upgrading-from-mobile-services.md).</span></span>

<span data-ttu-id="4f54d-109">Quando si esegue l'aggiornamento di un back-end per dispositivi mobili a Servizio app di Azure, questo ha accesso a tutte le funzionalità del servizio app e la fatturazione viene eseguita in base ai [prezzi del servizio app], non a quelli di Servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-109">When a mobile backend is upgraded to Azure App Service, it has access to all App Service features and are billed according to [App Service pricing], not Mobile Services pricing.</span></span>

## <a name="migrate-vs-upgrade"></a><span data-ttu-id="4f54d-110">Eseguire la migrazione o aggiornare</span><span class="sxs-lookup"><span data-stu-id="4f54d-110">Migrate vs. upgrade</span></span>
[!INCLUDE [app-service-mobile-migrate-vs-upgrade](../../includes/app-service-mobile-migrate-vs-upgrade.md)]

> [!TIP]
> <span data-ttu-id="4f54d-111">Prima di procedere a un aggiornamento, è consigliabile [eseguire una migrazione](app-service-mobile-migrating-from-mobile-services.md) .</span><span class="sxs-lookup"><span data-stu-id="4f54d-111">It is recommended that you [perform a migration](app-service-mobile-migrating-from-mobile-services.md) before going through an upgrade.</span></span> <span data-ttu-id="4f54d-112">In questo modo, è possibile inserire entrambe le versioni dell'applicazione nello stesso piano del servizio app, senza sostenere costi aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="4f54d-112">This way, you can put both versions of your application on the same App Service Plan and incur no additional cost.</span></span>
>
>

### <a name="improvements-in-mobile-apps-net-server-sdk"></a><span data-ttu-id="4f54d-113">Miglioramenti dell’SDK del server .NET di App per dispositivi mobili</span><span class="sxs-lookup"><span data-stu-id="4f54d-113">Improvements in Mobile Apps .NET server SDK</span></span>
<span data-ttu-id="4f54d-114">L'aggiornamento al nuovo [SDK delle app per dispositivi mobili](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) offre i vantaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="4f54d-114">Upgrading to the new [Mobile Apps SDK](https://www.nuget.org/packages/Microsoft.Azure.Mobile.Server/) provides the following benefits:</span></span>

* <span data-ttu-id="4f54d-115">Maggiore flessibilità alle dipendenze di NuGet.</span><span class="sxs-lookup"><span data-stu-id="4f54d-115">More flexibility on NuGet dependencies.</span></span> <span data-ttu-id="4f54d-116">L'ambiente di hosting non fornisce più le proprie versioni dei pacchetti NuGet, pertanto è possibile utilizzare le versioni compatibili alternative.</span><span class="sxs-lookup"><span data-stu-id="4f54d-116">The hosting environment no longer provides its own versions of NuGet packages, so you can use alternative compatible versions.</span></span> <span data-ttu-id="4f54d-117">Tuttavia, se sono presenti nuove correzioni critiche dei bug o aggiornamenti della protezione per l’SDK del Server mobile o dipendenze, è necessario aggiornare il servizio manualmente.</span><span class="sxs-lookup"><span data-stu-id="4f54d-117">However, if there are new critical bugfixes or security updates to the Mobile Server SDK or dependencies, you must update your service manually.</span></span>
* <span data-ttu-id="4f54d-118">Maggiore flessibilità nell’SDK per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-118">More flexibility in the mobile SDK.</span></span> <span data-ttu-id="4f54d-119">È possibile controllare in modo esplicito le funzionalità e le route impostate, come autenticazione, API di tabella e endpoint di registrazione push.</span><span class="sxs-lookup"><span data-stu-id="4f54d-119">You can explicitly control which features and routes are set up, such as authentication, table APIs, and the push registration endpoint.</span></span> <span data-ttu-id="4f54d-120">Per altre informazioni, vedere [Come usare l'SDK del server .NET per le app per dispositivi mobili di Azure](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="4f54d-120">To learn more, see [How to use the .NET server SDK for Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span></span>
* <span data-ttu-id="4f54d-121">Supporto per altri tipi di progetto ASP.NET e route.</span><span class="sxs-lookup"><span data-stu-id="4f54d-121">Support for other ASP.NET project types and routes.</span></span> <span data-ttu-id="4f54d-122">È ora possibile ospitare controller MVC e API Web nello stesso progetto del progetto di back-end per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-122">You can now host MVC and Web API controllers in the same project as your mobile backend project.</span></span>
* <span data-ttu-id="4f54d-123">Supporto per le nuove funzionalità di autenticazione del Servizio app, che consentono di utilizzare una configurazione di autenticazione comune tra web e app per dispositivi mobili:</span><span class="sxs-lookup"><span data-stu-id="4f54d-123">Support for new App Service authentication features, which allow you to use a common authentication configuration across your web and mobile apps.</span></span>

## <span data-ttu-id="4f54d-124"><a name="overview"></a>Panoramica sull'aggiornamento di base</span><span class="sxs-lookup"><span data-stu-id="4f54d-124"><a name="overview"></a>Basic upgrade overview</span></span>
<span data-ttu-id="4f54d-125">In molti casi, l'aggiornamento sarà semplice come passare al nuovo SDK del server di app per dispositivi mobili e ripubblicare il codice in una nuova istanza di app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-125">In many cases, upgrading will be as simple as switching to the new Mobile Apps server SDK and republishing your code onto a new Mobile App instance.</span></span> <span data-ttu-id="4f54d-126">Esistono, tuttavia, alcuni scenari che richiedono alcune configurazioni aggiuntive, ad esempio l'autenticazione avanzata e l'uso dei processi pianificati.</span><span class="sxs-lookup"><span data-stu-id="4f54d-126">There are, however some scenarios which will require some additional configuration, such as advanced authentication scenarios and working with scheduled jobs.</span></span> <span data-ttu-id="4f54d-127">Ciascuno di questi scenari viene trattato nelle sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="4f54d-127">Each of these is covered in the later sections.</span></span>

> [!TIP]
> <span data-ttu-id="4f54d-128">Si consiglia di leggere e comprendere integralmente il resto di questo argomento prima di avviare un aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="4f54d-128">It is advised that you read and understand the rest of this topic completely before starting an upgrade.</span></span> <span data-ttu-id="4f54d-129">Prendere nota delle funzionalità usate che sono indicate di seguito.</span><span class="sxs-lookup"><span data-stu-id="4f54d-129">Make note of any features you use which are called out below.</span></span>
>
>

<span data-ttu-id="4f54d-130">Gli SDK del client di Servizi mobili **non** sono compatibili con il nuovo SDK del server di App per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-130">The Mobile Services client SDKs are **not** compatible with the new Mobile Apps server SDK.</span></span> <span data-ttu-id="4f54d-131">Per garantire la continuità del servizio per l'app, non devono essere pubblicate modifiche in un sito che usa client pubblicati.</span><span class="sxs-lookup"><span data-stu-id="4f54d-131">In order to provide continuity of service for your app, you should not publish changes to a site currently serving published clients.</span></span> <span data-ttu-id="4f54d-132">È invece necessario creare una nuova app per dispositivi mobili che agisce da duplicato.</span><span class="sxs-lookup"><span data-stu-id="4f54d-132">Instead, you should create a new mobile app that serves as a duplicate.</span></span> <span data-ttu-id="4f54d-133">È possibile inserire questa applicazione nello stesso piano di servizio app per evitare di sostenere costi finanziari aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="4f54d-133">You can put this application on the same App Service plan to avoid incurring additional financial cost.</span></span>

<span data-ttu-id="4f54d-134">Si avranno quindi due versioni dell'applicazione: una che rimane invariata e usa le app pubblicate e l'altra che è possibile aggiornare e usare come destinazione con una nuova versione del client.</span><span class="sxs-lookup"><span data-stu-id="4f54d-134">You will then have two versions of the application: one which stays the same and serves published apps in the wild, and the other which you can then upgrade and target with a new client release.</span></span> <span data-ttu-id="4f54d-135">È possibile spostare e testare il codice in base alle esigenze, ma è necessario assicurarsi che tutte le correzioni di bug apportate vengano applicate a entrambe le versioni.</span><span class="sxs-lookup"><span data-stu-id="4f54d-135">You can move and test your code at your pace, but you should make sure that any bug fixes you make get applied to both.</span></span> <span data-ttu-id="4f54d-136">Quando si ritiene di avere aggiornato alla versione più recente il numero desiderato di app client in circostanze normali, è possibile eliminare l'app migrata originale, se lo si desidera.</span><span class="sxs-lookup"><span data-stu-id="4f54d-136">Once you feel that a desired number of client apps in the wild have updated to the latest version, you can delete the original migrated app if you desire.</span></span>

<span data-ttu-id="4f54d-137">La struttura completa del processo di aggiornamento è la seguente:</span><span class="sxs-lookup"><span data-stu-id="4f54d-137">The full outline for the upgrade process is as follows:</span></span>

1. <span data-ttu-id="4f54d-138">Creare una nuova app per dispositivi mobili</span><span class="sxs-lookup"><span data-stu-id="4f54d-138">Create a new Mobile App</span></span>
2. <span data-ttu-id="4f54d-139">Aggiornare il progetto per l'uso dei nuovi SDK del server</span><span class="sxs-lookup"><span data-stu-id="4f54d-139">Update the project to use the new Server SDKs</span></span>
3. <span data-ttu-id="4f54d-140">Rilasciare una nuova versione dell'applicazione client</span><span class="sxs-lookup"><span data-stu-id="4f54d-140">Release a new version of your client application</span></span>
4. <span data-ttu-id="4f54d-141">(Facoltativo) Eliminare l'istanza migrata originale</span><span class="sxs-lookup"><span data-stu-id="4f54d-141">(Optional) Delete your original migrated instance</span></span>

## <span data-ttu-id="4f54d-142"><a name="mobile-app-version"></a>Creazione di una seconda istanza dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="4f54d-142"><a name="mobile-app-version"></a>Creating a second application instance</span></span>
<span data-ttu-id="4f54d-143">Il primo passaggio per l'aggiornamento prevede la creazione della risorsa di app per dispositivi mobili che ospiterà la nuova versione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="4f54d-143">The first step in upgrading is to create the Mobile App resource which will host the new version of your application.</span></span> <span data-ttu-id="4f54d-144">Se è già stata eseguita la migrazione di un servizio mobile esistente, è consigliabile creare questa versione nello stesso piano di hosting.</span><span class="sxs-lookup"><span data-stu-id="4f54d-144">If you have already migrated an existing mobile service, you will want to create this version on the same hosting plan.</span></span> <span data-ttu-id="4f54d-145">Aprire il [portale di Azure] e passare all'applicazione migrata.</span><span class="sxs-lookup"><span data-stu-id="4f54d-145">Open the [Azure portal] and navigate to your migrated application.</span></span> <span data-ttu-id="4f54d-146">Prendere nota del piano di servizio app in cui è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="4f54d-146">Make note of the App Service Plan it is running on.</span></span>

<span data-ttu-id="4f54d-147">Creare quindi la seconda istanza dell'applicazione seguendo le [istruzioni per la creazione di back-end .NET](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span><span class="sxs-lookup"><span data-stu-id="4f54d-147">Next, create the second application instance by following the [.NET backend creation instructions](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#create-app).</span></span> <span data-ttu-id="4f54d-148">Quando viene richiesto di selezionare il piano di servizio app o "piano di hosting", scegliere il piano dell'applicazione migrata.</span><span class="sxs-lookup"><span data-stu-id="4f54d-148">When prompted to select you App Service Plan or "hosting plan" choose the plan of your migrated application.</span></span>

<span data-ttu-id="4f54d-149">Potrebbe essere utile usare lo stesso database e hub di notifica usati in Servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-149">You will likely want to use the same database and Notification Hub as you did in Mobile Services.</span></span> <span data-ttu-id="4f54d-150">È possibile copiare questi valori aprendo il [portale di Azure] e passando all'applicazione originale, quindi facendo clic su **Impostazioni** > **Impostazioni dell'applicazione**.</span><span class="sxs-lookup"><span data-stu-id="4f54d-150">You can copy these values by opening [Azure portal] and navigating to the original application, then click **Settings** > **Application settings**.</span></span> <span data-ttu-id="4f54d-151">In **Stringhe di connessione** copiare `MS_NotificationHubConnectionString` e `MS_TableConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="4f54d-151">Under **Connection Strings**, copy `MS_NotificationHubConnectionString` and `MS_TableConnectionString`.</span></span> <span data-ttu-id="4f54d-152">Passare al nuovo sito di aggiornamento e incollare i valori, sovrascrivendo gli eventuali valori esistenti.</span><span class="sxs-lookup"><span data-stu-id="4f54d-152">Navigate to your new upgrade site and paste them in, overwriting any existing values.</span></span> <span data-ttu-id="4f54d-153">Ripetere questo processo per tutte le altre impostazioni dell'applicazione necessarie per l'app.</span><span class="sxs-lookup"><span data-stu-id="4f54d-153">Repeat this process for any other application settings your app needs.</span></span> <span data-ttu-id="4f54d-154">Se non si usa un servizio migrato, è possibile leggere le stringhe di connessione e le impostazioni dell'app dalla scheda **Configura** della sezione Servizi mobili del [portale di Azure classico].</span><span class="sxs-lookup"><span data-stu-id="4f54d-154">If not using a migrated service, you can read connection strings and app settings from the **Configure** tab of the Mobile Services section of the [Azure classic portal].</span></span>

<span data-ttu-id="4f54d-155">Creare una copia del progetto ASP.NET per l'applicazione e pubblicarla nel nuovo sito.</span><span class="sxs-lookup"><span data-stu-id="4f54d-155">Make a copy of the ASP.NET project for your application and publish it to your new site.</span></span> <span data-ttu-id="4f54d-156">Usando una copia dell'applicazione client aggiornata con il nuovo URL, verificare che tutto funzioni come previsto.</span><span class="sxs-lookup"><span data-stu-id="4f54d-156">Using a copy of your client application updated with the new URL, validate that everything works as expected.</span></span>

## <a name="updating-the-server-project"></a><span data-ttu-id="4f54d-157">Aggiornamento del progetto server</span><span class="sxs-lookup"><span data-stu-id="4f54d-157">Updating the server project</span></span>
<span data-ttu-id="4f54d-158">Le app per dispositivi mobili forniscono un nuovo [Mobile App Server SDK] che offre molte delle funzionalità del runtime di Servizi per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-158">Mobile Apps provides a new [Mobile App Server SDK] which provides much of the same functionality as the Mobile Services runtime.</span></span> <span data-ttu-id="4f54d-159">È innanzitutto necessario rimuovere tutti i riferimenti ai pacchetti di Servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-159">First, you should remove all references to the Mobile Services packages.</span></span> <span data-ttu-id="4f54d-160">In Gestione pacchetti NuGet cercare `WindowsAzure.MobileServices.Backend`.</span><span class="sxs-lookup"><span data-stu-id="4f54d-160">In the NuGet package manager, search for `WindowsAzure.MobileServices.Backend`.</span></span> <span data-ttu-id="4f54d-161">Per la maggior parte delle app saranno presenti diversi pacchetti, tra cui `WindowsAzure.MobileServices.Backend.Tables` e `WindowsAzure.MobileServices.Backend.Entity`.</span><span class="sxs-lookup"><span data-stu-id="4f54d-161">Most apps will see several packages here, including `WindowsAzure.MobileServices.Backend.Tables` and `WindowsAzure.MobileServices.Backend.Entity`.</span></span> <span data-ttu-id="4f54d-162">In tal caso, iniziare dal pacchetto più basso nella struttura delle dipendenze, ad esempio `Entity`, e rimuoverlo.</span><span class="sxs-lookup"><span data-stu-id="4f54d-162">In such a case, start with the lowest package in the dependency tree, such as `Entity`, and remove it.</span></span> <span data-ttu-id="4f54d-163">Quando richiesto, non rimuovere tutti i pacchetti dipendenti.</span><span class="sxs-lookup"><span data-stu-id="4f54d-163">When prompted, do not remove all dependant packages.</span></span> <span data-ttu-id="4f54d-164">Ripetere questo processo finché non è stato rimosso `WindowsAzure.MobileServices.Backend` stesso.</span><span class="sxs-lookup"><span data-stu-id="4f54d-164">Repeat this process until you have removed `WindowsAzure.MobileServices.Backend` itself.</span></span>

<span data-ttu-id="4f54d-165">A questo punto si avrà un progetto che non fa più riferimento agli SDK di Servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-165">At this point you will have a project that no longer references Mobile Services SDKs.</span></span>

<span data-ttu-id="4f54d-166">Si aggiungeranno quindi i riferimenti agli SDK delle app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-166">Next you will add references the Mobile Apps SDK.</span></span> <span data-ttu-id="4f54d-167">Per questo aggiornamento, la maggior parte degli sviluppatori vorrà scaricare e installare il pacchetto `Microsoft.Azure.Mobile.Server.Quickstart` , che permette di ottenere l'intero set necessario.</span><span class="sxs-lookup"><span data-stu-id="4f54d-167">For this upgrade, most developers will want to download and install the `Microsoft.Azure.Mobile.Server.Quickstart` package, as this will pull in the entire required set.</span></span>

<span data-ttu-id="4f54d-168">Vi saranno alcuni errori del compilatore derivanti dalle differenze tra gli SDK, ma sono semplici da risolvere e vengono descritti nella parte rimanente di questa sezione.</span><span class="sxs-lookup"><span data-stu-id="4f54d-168">There will be quite a few compiler errors resulting from differences between the SDKs, but these are easy to address and are covered in the rest of this section.</span></span>

### <a name="base-configuration"></a><span data-ttu-id="4f54d-169">Configurazione di base</span><span class="sxs-lookup"><span data-stu-id="4f54d-169">Base configuration</span></span>
<span data-ttu-id="4f54d-170">In WebApiConfig.cs è quindi possibile sostituire:</span><span class="sxs-lookup"><span data-stu-id="4f54d-170">Then, in WebApiConfig.cs, you can replace:</span></span>

        // Use this class to set configuration options for your mobile service
        ConfigOptions options = new ConfigOptions();

        // Use this class to set WebAPI configuration options
        HttpConfiguration config = ServiceConfig.Initialize(new ConfigBuilder(options));

<span data-ttu-id="4f54d-171">con</span><span class="sxs-lookup"><span data-stu-id="4f54d-171">with</span></span>

        HttpConfiguration config = new HttpConfiguration();
        new MobileAppConfiguration()
            .UseDefaultConfiguration()
        .ApplyTo(config);

> [!NOTE]
> <span data-ttu-id="4f54d-172">Per altre informazioni sul nuovo SDK del server .NET e su come aggiungere/rimuovere funzionalità dall'app, vedere l'argomento [Come usare l'SDK del server .NET] .</span><span class="sxs-lookup"><span data-stu-id="4f54d-172">If you wish to learn more about the new .NET server SDK and how to add/remove features from your app, please see the [How to use the .NET server SDK] topic.</span></span>
>
>

<span data-ttu-id="4f54d-173">Se l'app fa uso delle funzionalità di autenticazione, sarà inoltre necessario registrare un middleware OWIN.</span><span class="sxs-lookup"><span data-stu-id="4f54d-173">If your app makes use of the authentication features, you will also need to register an OWIN middleware.</span></span> <span data-ttu-id="4f54d-174">In questo caso, è necessario spostare il codice di configurazione precedente in una nuova classe di avvio OWIN.</span><span class="sxs-lookup"><span data-stu-id="4f54d-174">In this case, you should move the above configuration code into a new OWIN Startup class.</span></span>

1. <span data-ttu-id="4f54d-175">Aggiungere il pacchetto NuGet `Microsoft.Owin.Host.SystemWeb` se non è già incluso nel progetto.</span><span class="sxs-lookup"><span data-stu-id="4f54d-175">Add the NuGet package `Microsoft.Owin.Host.SystemWeb` if it is not already included in your project.</span></span>
2. <span data-ttu-id="4f54d-176">In Visual Studio fare clic con il pulsante destro del mouse sul progetto e scegliere **Aggiungi** -> **Nuovo elemento**.</span><span class="sxs-lookup"><span data-stu-id="4f54d-176">In Visual Studio, right click on your project and select **Add** -> **New Item**.</span></span> <span data-ttu-id="4f54d-177">Selezionare **Web** -> **Generale** -> **Classe di avvio di OWIN**.</span><span class="sxs-lookup"><span data-stu-id="4f54d-177">Select **Web** -> **General** -> **OWIN Startup class**.</span></span>
3. <span data-ttu-id="4f54d-178">Spostare il codice precedente per MobileAppConfiguration da `WebApiConfig.Register()` nel metodo `Configuration()` per la nuova classe di avvio.</span><span class="sxs-lookup"><span data-stu-id="4f54d-178">Move the above code for MobileAppConfiguration from `WebApiConfig.Register()` to the `Configuration()` method of your new startup class.</span></span>

<span data-ttu-id="4f54d-179">Assicurarsi che il metodo `Configuration()` termini con:</span><span class="sxs-lookup"><span data-stu-id="4f54d-179">Make sure the `Configuration()` method ends with:</span></span>

        app.UseWebApi(config)
        app.UseAppServiceAuthentication(config);

<span data-ttu-id="4f54d-180">Vi sono ulteriori modifiche relative all'autenticazione, che sono illustrate di seguito nella sezione relativa all'autenticazione completa.</span><span class="sxs-lookup"><span data-stu-id="4f54d-180">There are additional changes related to authentication which are covered in the full authentication section below.</span></span>

### <a name="working-with-data"></a><span data-ttu-id="4f54d-181">Uso dei dati</span><span class="sxs-lookup"><span data-stu-id="4f54d-181">Working with Data</span></span>
<span data-ttu-id="4f54d-182">In Servizi mobili, il nome dell'app per dispositivi mobili veniva usato come nome dello schema predefinito nel programma di installazione di Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="4f54d-182">In Mobile Services, the mobile app name served as the default schema name in the Entity Framework setup.</span></span>

<span data-ttu-id="4f54d-183">Per assicurarsi di fare riferimento allo stesso schema, usare il codice seguente per impostare lo schema in DbContext per l'applicazione:</span><span class="sxs-lookup"><span data-stu-id="4f54d-183">To ensure that you have the same schema being referenced as before, use the following to set the schema in the DbContext for your application:</span></span>

        string schema = System.Configuration.ConfigurationManager.AppSettings.Get("MS_MobileServiceName");

<span data-ttu-id="4f54d-184">Assicurarsi di avere impostato MS_MobileServiceName se si esegue l'operazione precedente.</span><span class="sxs-lookup"><span data-stu-id="4f54d-184">Please make sure you have MS_MobileServiceName set if you do the above.</span></span> <span data-ttu-id="4f54d-185">È anche possibile fornire un altro nome di schema se l'applicazione lo ha personalizzato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="4f54d-185">You can also provide another schema name if your application customized this previously.</span></span>

### <a name="system-properties"></a><span data-ttu-id="4f54d-186">Proprietà di sistema</span><span class="sxs-lookup"><span data-stu-id="4f54d-186">System Properties</span></span>
#### <a name="naming"></a><span data-ttu-id="4f54d-187">Denominazione</span><span class="sxs-lookup"><span data-stu-id="4f54d-187">Naming</span></span>
<span data-ttu-id="4f54d-188">Nell'SDK del server di Servizi mobili di Azure le proprietà di sistema contengono sempre un prefisso con un doppio carattere di sottolineatura (`__`):</span><span class="sxs-lookup"><span data-stu-id="4f54d-188">In the Azure Mobile Services server SDK, system properties always contain a double underscore (`__`) prefix for the properties:</span></span>

* <span data-ttu-id="4f54d-189">__createdAt</span><span class="sxs-lookup"><span data-stu-id="4f54d-189">__createdAt</span></span>
* <span data-ttu-id="4f54d-190">__updatedAt</span><span class="sxs-lookup"><span data-stu-id="4f54d-190">__updatedAt</span></span>
* <span data-ttu-id="4f54d-191">__deleted</span><span class="sxs-lookup"><span data-stu-id="4f54d-191">__deleted</span></span>
* <span data-ttu-id="4f54d-192">__version</span><span class="sxs-lookup"><span data-stu-id="4f54d-192">__version</span></span>

<span data-ttu-id="4f54d-193">Gli SDK client di Servizi mobili hanno una logica speciale per l'analisi delle proprietà di sistema in questo formato.</span><span class="sxs-lookup"><span data-stu-id="4f54d-193">The Mobile Services client SDKs have special logic for parsing system properties in this format.</span></span>

<span data-ttu-id="4f54d-194">Nelle app per dispositivi mobili di Azure le proprietà di sistema non hanno più un formato speciale e sono denominate come segue:</span><span class="sxs-lookup"><span data-stu-id="4f54d-194">In Azure Mobile Apps, system properties no longer have a special format and have the following names:</span></span>

* <span data-ttu-id="4f54d-195">createdAt</span><span class="sxs-lookup"><span data-stu-id="4f54d-195">createdAt</span></span>
* <span data-ttu-id="4f54d-196">updatedAt</span><span class="sxs-lookup"><span data-stu-id="4f54d-196">updatedAt</span></span>
* <span data-ttu-id="4f54d-197">deleted</span><span class="sxs-lookup"><span data-stu-id="4f54d-197">deleted</span></span>
* <span data-ttu-id="4f54d-198">version</span><span class="sxs-lookup"><span data-stu-id="4f54d-198">version</span></span>

<span data-ttu-id="4f54d-199">Gli SDK client delle app per dispositivi mobili usano i nuovi nomi delle proprietà di sistema, pertanto non sono necessarie modifiche al codice client.</span><span class="sxs-lookup"><span data-stu-id="4f54d-199">The Mobile Apps client SDKs use the new system properties names, so no changes are required to client code.</span></span> <span data-ttu-id="4f54d-200">Tuttavia, se si effettuano direttamente chiamate REST al servizio, è necessario modificare le query di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="4f54d-200">However, if you are directly making REST calls to your service then you should change your queries accordingly.</span></span>

#### <a name="local-store"></a><span data-ttu-id="4f54d-201">Archivio locale</span><span class="sxs-lookup"><span data-stu-id="4f54d-201">Local store</span></span>
<span data-ttu-id="4f54d-202">Le modifiche ai nomi delle proprietà di sistema implicano che un database locale di sincronizzazione offline per Servizi mobili non è compatibile con le applicazioni per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-202">The changes to the names of system properties mean that an offline sync local database for Mobile Services is not compatible with Mobile Apps.</span></span> <span data-ttu-id="4f54d-203">Se possibile, evitare di eseguire l'aggiornamento di app client da Servizi mobili alle app per dispositivi mobili finché le modifiche in sospeso non sono state inviate al server.</span><span class="sxs-lookup"><span data-stu-id="4f54d-203">If possible, you should avoid upgrading client apps from Mobile Services to Mobile Apps until after pending changes have been sent to the server.</span></span> <span data-ttu-id="4f54d-204">L'app aggiornata deve quindi usare un nuovo nome di file di database.</span><span class="sxs-lookup"><span data-stu-id="4f54d-204">Then, the upgraded app should use a new database filename.</span></span>

<span data-ttu-id="4f54d-205">Se un'app client viene aggiornata da Servizi mobili alle app per dispositivi mobili mentre sono presenti modifiche offline in sospeso nella coda delle operazioni, il database di sistema deve essere aggiornato per l'uso dei nuovi nomi di colonna.</span><span class="sxs-lookup"><span data-stu-id="4f54d-205">If a client app is upgraded from Mobile Services to Mobile Apps while there are pending offline changes in the operation queue, then the system database must be updated to use the new column names.</span></span> <span data-ttu-id="4f54d-206">In iOS, questa operazione può essere eseguita usando migrazioni semplificate per modificare i nomi di colonna.</span><span class="sxs-lookup"><span data-stu-id="4f54d-206">On iOS, this can be achieved using lightweight migrations to change the column names.</span></span> <span data-ttu-id="4f54d-207">In Android e nel client gestito .NET, è necessario scrivere codice SQL personalizzato per rinominare le colonne per le tabelle degli oggetti dati.</span><span class="sxs-lookup"><span data-stu-id="4f54d-207">On Android and the .NET managed client, you should write custom SQL to rename the columns for your data object tables.</span></span>

<span data-ttu-id="4f54d-208">In iOS, è necessario modificare lo schema dei dati di base per le entità di dati in modo che corrispondano a quanto segue.</span><span class="sxs-lookup"><span data-stu-id="4f54d-208">On iOS, you should change your Core Data schema for your data entities to match the following.</span></span> <span data-ttu-id="4f54d-209">Si noti che le proprietà `createdAt`, `updatedAt` e `version` non hanno più un prefisso `ms_`:</span><span class="sxs-lookup"><span data-stu-id="4f54d-209">Note that the properties `createdAt`, `updatedAt` and `version` no longer have an `ms_` prefix:</span></span>

| <span data-ttu-id="4f54d-210">Attributo</span><span class="sxs-lookup"><span data-stu-id="4f54d-210">Attribute</span></span> | <span data-ttu-id="4f54d-211">Tipo</span><span class="sxs-lookup"><span data-stu-id="4f54d-211">Type</span></span> | <span data-ttu-id="4f54d-212">Nota</span><span class="sxs-lookup"><span data-stu-id="4f54d-212">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="4f54d-213">id</span><span class="sxs-lookup"><span data-stu-id="4f54d-213">id</span></span> |<span data-ttu-id="4f54d-214">Stringa, contrassegnata come obbligatoria</span><span class="sxs-lookup"><span data-stu-id="4f54d-214">String, marked required</span></span> |<span data-ttu-id="4f54d-215">chiave primaria nell'archivio remoto</span><span class="sxs-lookup"><span data-stu-id="4f54d-215">primary key in remote store</span></span> |
| <span data-ttu-id="4f54d-216">createdAt</span><span class="sxs-lookup"><span data-stu-id="4f54d-216">createdAt</span></span> |<span data-ttu-id="4f54d-217">Data</span><span class="sxs-lookup"><span data-stu-id="4f54d-217">Date</span></span> |<span data-ttu-id="4f54d-218">(facoltativo) viene mappato alla proprietà di sistema createdAt</span><span class="sxs-lookup"><span data-stu-id="4f54d-218">(optional) maps to createdAt system property</span></span> |
| <span data-ttu-id="4f54d-219">updatedAt</span><span class="sxs-lookup"><span data-stu-id="4f54d-219">updatedAt</span></span> |<span data-ttu-id="4f54d-220">Data</span><span class="sxs-lookup"><span data-stu-id="4f54d-220">Date</span></span> |<span data-ttu-id="4f54d-221">(facoltativo) viene mappato alla proprietà di sistema updatedAt</span><span class="sxs-lookup"><span data-stu-id="4f54d-221">(optional) maps to updatedAt system property</span></span> |
| <span data-ttu-id="4f54d-222">version</span><span class="sxs-lookup"><span data-stu-id="4f54d-222">version</span></span> |<span data-ttu-id="4f54d-223">String</span><span class="sxs-lookup"><span data-stu-id="4f54d-223">String</span></span> |<span data-ttu-id="4f54d-224">(facoltativo) usato per il rilevamento dei conflitti, viene mappato a version</span><span class="sxs-lookup"><span data-stu-id="4f54d-224">(optional) used to detect conflicts, maps to version</span></span> |

#### <a name="querying-system-properties"></a><span data-ttu-id="4f54d-225">Query delle proprietà di sistema</span><span class="sxs-lookup"><span data-stu-id="4f54d-225">Querying system properties</span></span>
<span data-ttu-id="4f54d-226">In Servizi mobili di Azure, le proprietà di sistema non vengono inviate per impostazione predefinita, ma solo quando vengono richieste usando la stringa di query `__systemProperties`.</span><span class="sxs-lookup"><span data-stu-id="4f54d-226">In Azure Mobile Services, system properties are not sent by default, but only when they are requested using the query string `__systemProperties`.</span></span> <span data-ttu-id="4f54d-227">Al contrario, nel sistema App per dispositivi mobili di Azure le proprietà sono **sempre selezionate** poiché fanno parte del modello a oggetti dell'SDK server.</span><span class="sxs-lookup"><span data-stu-id="4f54d-227">In contrast, in Azure Mobile Apps system properties are **always selected** since they are part of the server SDK object model.</span></span>

<span data-ttu-id="4f54d-228">Questa modifica influisce principalmente sulle implementazioni personalizzate di gestori di dominio, come le estensioni di `MappedEntityDomainManager`.</span><span class="sxs-lookup"><span data-stu-id="4f54d-228">This change mainly impacts custom implementations of domain managers, such as extensions of `MappedEntityDomainManager`.</span></span> <span data-ttu-id="4f54d-229">In Servizi mobili, se un client non richiede mai proprietà del sistema, è possibile usare un `MappedEntityDomainManager` che non esegue effettivamente il mapping di tutte le proprietà.</span><span class="sxs-lookup"><span data-stu-id="4f54d-229">In Mobile Services, if a client never requests any system properties, it is possible to use a `MappedEntityDomainManager` that does not actually map all properties.</span></span> <span data-ttu-id="4f54d-230">Tuttavia, in App per dispositivi mobili di Azure, queste proprietà non mappate genereranno un errore nelle query GET.</span><span class="sxs-lookup"><span data-stu-id="4f54d-230">However, in Azure Mobile Apps, these unmapped properties will cause an error in GET queries.</span></span>

<span data-ttu-id="4f54d-231">Il modo più semplice per risolvere il problema consiste nel modificare gli oggetti DTO in modo che ereditino da `ITableData` anziché `EntityData`.</span><span class="sxs-lookup"><span data-stu-id="4f54d-231">The easiest way to resolve the issue is to modify your DTOs so that they inherit from `ITableData` instead of `EntityData`.</span></span> <span data-ttu-id="4f54d-232">Aggiungere quindi l'attributo `[NotMapped]` ai campi che devono essere omessi.</span><span class="sxs-lookup"><span data-stu-id="4f54d-232">Then, add the `[NotMapped]` attribute to the fields that should be omitted.</span></span>

<span data-ttu-id="4f54d-233">Ad esempio, il codice seguente definisce `TodoItem` senza proprietà di sistema:</span><span class="sxs-lookup"><span data-stu-id="4f54d-233">For example, the following defines `TodoItem` with no system properties:</span></span>

    using System.ComponentModel.DataAnnotations.Schema;

    public class TodoItem : ITableData
    {
        public string Text { get; set; }

        public bool Complete { get; set; }

        public string Id { get; set; }

        [NotMapped]
        public DateTimeOffset? CreatedAt { get; set; }

        [NotMapped]
        public DateTimeOffset? UpdatedAt { get; set; }

        [NotMapped]
        public bool Deleted { get; set; }

        [NotMapped]
        public byte[] Version { get; set; }
    }

<span data-ttu-id="4f54d-234">Nota: se si verificano errori in `NotMapped`, aggiungere un riferimento all'assembly `System.ComponentModel.DataAnnotations`.</span><span class="sxs-lookup"><span data-stu-id="4f54d-234">Note: if you get errors on `NotMapped`, add a reference to the assembly `System.ComponentModel.DataAnnotations`.</span></span>

### <a name="cors"></a><span data-ttu-id="4f54d-235">CORS</span><span class="sxs-lookup"><span data-stu-id="4f54d-235">CORS</span></span>
<span data-ttu-id="4f54d-236">Servizi mobili includeva un certo supporto per CORS eseguendo il wrapping della soluzione CORS di ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4f54d-236">Mobile Services included some support for CORS by wrapping the ASP.NET CORS solution.</span></span> <span data-ttu-id="4f54d-237">Questo livello di wrapping è stato rimosso per offrire allo sviluppatore un maggiore controllo, pertanto è possibile sfruttare direttamente il [supporto per CORS di ASP.NET](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span><span class="sxs-lookup"><span data-stu-id="4f54d-237">This wrapping layer has been removed to give the developer more control, so you can directly leverage [ASP.NET CORS support](http://www.asp.net/web-api/overview/security/enabling-cross-origin-requests-in-web-api).</span></span>

<span data-ttu-id="4f54d-238">Le principali aree problematiche per l'uso di CORS sono rappresentate dal fatto che le intestazioni `eTag` e `Location` devono essere consentite per il corretto funzionamento degli SDK del client.</span><span class="sxs-lookup"><span data-stu-id="4f54d-238">The main areas of concern if using CORS are that the `eTag` and `Location` headers must be allowed in order for the client SDKs to work properly.</span></span>

### <a name="push-notifications"></a><span data-ttu-id="4f54d-239">Notifiche push</span><span class="sxs-lookup"><span data-stu-id="4f54d-239">Push Notifications</span></span>
<span data-ttu-id="4f54d-240">Per il push, l'elemento principale che potrebbe risultare mancante dall'SDK del server è la classe PushRegistrationHandler.</span><span class="sxs-lookup"><span data-stu-id="4f54d-240">For push, the main item that you may find missing from the Server SDK is the PushRegistrationHandler class.</span></span> <span data-ttu-id="4f54d-241">Le registrazioni vengono gestite in modo leggermente diverso nelle app per dispositivi mobili e le registrazioni prive di tag sono abilitate per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="4f54d-241">Registrations are handled slightly differently in Mobile Apps, and tagless registrations are enabled by default.</span></span> <span data-ttu-id="4f54d-242">La gestione dei tag può essere eseguita usando API personalizzate.</span><span class="sxs-lookup"><span data-stu-id="4f54d-242">Managing tags may be accomplished by using custom APIs.</span></span> <span data-ttu-id="4f54d-243">Per altre informazioni, vedere le istruzioni relative alla [registrazione per i tag](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) .</span><span class="sxs-lookup"><span data-stu-id="4f54d-243">Please see the [registering for tags](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#tags) instructions for more information.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="4f54d-244">Processi pianificati</span><span class="sxs-lookup"><span data-stu-id="4f54d-244">Scheduled Jobs</span></span>
<span data-ttu-id="4f54d-245">I processi pianificati non vengono compilati nelle app per dispositivi mobili, pertanto sarà necessario eseguire l'aggiornamento dei singoli processi esistenti eventualmente presenti nel back-end .NET.</span><span class="sxs-lookup"><span data-stu-id="4f54d-245">Scheduled jobs are not built into Mobile Apps, so any existing jobs that you have in your .NET backend will need to be upgraded individually.</span></span> <span data-ttu-id="4f54d-246">Una possibilità consiste nel creare un [processo Web] pianificato nel sito del codice dell'app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-246">One option is to create a scheduled [Web Job] on the Mobile App code site.</span></span> <span data-ttu-id="4f54d-247">È anche possibile impostare un controller che contiene il codice del processo e configurare l' [Utilità di pianificazione di Azure] per accedere a tale endpoint in base alla pianificazione prevista.</span><span class="sxs-lookup"><span data-stu-id="4f54d-247">You could also set up a controller that holds your job code and configure the [Azure Scheduler] to hit that endpoint on the expected schedule.</span></span>

### <a name="miscellaneous-changes"></a><span data-ttu-id="4f54d-248">Modifiche varie</span><span class="sxs-lookup"><span data-stu-id="4f54d-248">Miscellaneous changes</span></span>
<span data-ttu-id="4f54d-249">Tutti gli ApiController che verranno usati da un client mobile ora devono disporre dell'attributo `[MobileAppController]` .</span><span class="sxs-lookup"><span data-stu-id="4f54d-249">All ApiControllers which will be consumed by a mobile client must now have the `[MobileAppController]` attribute.</span></span> <span data-ttu-id="4f54d-250">Questo non è più incluso per impostazione predefinita, in modo che gli altri ApiController non siano interessati dai formattatori per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-250">This is no longer included by default so that other ApiControllers to go unaffected by the mobile formatters.</span></span>

<span data-ttu-id="4f54d-251">L'oggetto `ApiServices` non è più incluso nell'SDK.</span><span class="sxs-lookup"><span data-stu-id="4f54d-251">The `ApiServices` object is no longer part of the SDK.</span></span> <span data-ttu-id="4f54d-252">Per accedere alle impostazioni dell'app per dispositivi mobili, è possibile usare il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="4f54d-252">To access Mobile App settings, you can use the following:</span></span>

    MobileAppSettingsDictionary settings = this.Configuration.GetMobileAppSettingsProvider().GetMobileAppSettings();

<span data-ttu-id="4f54d-253">Analogamente, la registrazione viene ora effettuata mediante la scrittura di tracce ASP.NET standard:</span><span class="sxs-lookup"><span data-stu-id="4f54d-253">Similarly, logging is now accomplished using the standard ASP.NET trace writing:</span></span>

    ITraceWriter traceWriter = this.Configuration.Services.GetTraceWriter();
    traceWriter.Info("Hello, World");  

## <span data-ttu-id="4f54d-254"><a name="authentication"></a>Considerazioni sull'autenticazione</span><span class="sxs-lookup"><span data-stu-id="4f54d-254"><a name="authentication"></a>Authentication considerations</span></span>
<span data-ttu-id="4f54d-255">I componenti di autenticazione di Servizi mobili sono ora stati spostati nella funzionalità di autenticazione/autorizzazione del servizio app.</span><span class="sxs-lookup"><span data-stu-id="4f54d-255">The authentication components of Mobile Services have now been moved into the App Service Authentication/Authorization feature.</span></span> <span data-ttu-id="4f54d-256">Per informazioni sull'abilitazione di questa funzionalità per il sito, vedere l'argomento [Aggiungere l'autenticazione all'app per dispositivi mobili](app-service-mobile-ios-get-started-users.md) .</span><span class="sxs-lookup"><span data-stu-id="4f54d-256">You can learn about enabling this for your site by reading the [Add authentication to your mobile app](app-service-mobile-ios-get-started-users.md) topic.</span></span>

<span data-ttu-id="4f54d-257">Per alcuni provider, come AAD, Facebook e Google, dovrebbe essere possibile sfruttare la registrazione esistente dall'applicazione di copia.</span><span class="sxs-lookup"><span data-stu-id="4f54d-257">For some providers, such as AAD, Facebook, and Google, you should be able to leverage the existing registration from your copy application.</span></span> <span data-ttu-id="4f54d-258">È sufficiente passare al portale del provider di identità e aggiungere un nuovo URL di reindirizzamento alla registrazione.</span><span class="sxs-lookup"><span data-stu-id="4f54d-258">You simply need to navigate to the identity provider's portal and add a new redirect URL to the registration.</span></span> <span data-ttu-id="4f54d-259">Configurare quindi l'autenticazione/autorizzazione del servizio app con l'ID client e il segreto.</span><span class="sxs-lookup"><span data-stu-id="4f54d-259">Then configure App Service Authentication/Authorization with the client ID and secret.</span></span>

### <a name="controller-action-authorization"></a><span data-ttu-id="4f54d-260">Autorizzazione dell'azione del controller</span><span class="sxs-lookup"><span data-stu-id="4f54d-260">Controller action authorization</span></span>
<span data-ttu-id="4f54d-261">Tutte le istanze dell'attributo `[AuthorizeLevel(AuthorizationLevel.User)]` ora devono essere modificate per l'uso dell'attributo ASP.NET standard `[Authorize]`.</span><span class="sxs-lookup"><span data-stu-id="4f54d-261">Any instances of the `[AuthorizeLevel(AuthorizationLevel.User)]` attribute must now be changed to use the standard ASP.NET `[Authorize]` attribute.</span></span> <span data-ttu-id="4f54d-262">Inoltre, i controller ora sono anonimi per impostazione predefinita, come nelle altre applicazioni ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="4f54d-262">Additionally, controllers are now Anonymous by default, as in other ASP.NET applications.</span></span>
<span data-ttu-id="4f54d-263">Se si usava una delle altre opzioni AuthorizeLevel, ad esempio Admin o Application, tenere presente che ora non sono più disponibili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-263">If you were using one of the other AuthorizeLevel options, such as Admin or Application, please note that these are gone.</span></span> <span data-ttu-id="4f54d-264">È invece possibile impostare AuthorizationFilters per i segreti condivisi o configurare un'entità servizio AAD per abilitare le chiamate da servizio a servizio in modo sicuro.</span><span class="sxs-lookup"><span data-stu-id="4f54d-264">You can instead set up AuthorizationFilters for shared secrets or configure an AAD Service Principal to enable service-to-service calls securely.</span></span>

### <a name="getting-additional-user-information"></a><span data-ttu-id="4f54d-265">Recupero di informazioni aggiuntive sull'utente</span><span class="sxs-lookup"><span data-stu-id="4f54d-265">Getting additional user information</span></span>
<span data-ttu-id="4f54d-266">È possibile ottenere informazioni aggiuntive sull'utente, inclusi i token di accesso tramite il metodo `GetAppServiceIdentityAsync()` :</span><span class="sxs-lookup"><span data-stu-id="4f54d-266">You can get additional user information, including access tokens through the `GetAppServiceIdentityAsync()` method:</span></span>

        FacebookCredentials creds = await this.User.GetAppServiceIdentityAsync<FacebookCredentials>();

<span data-ttu-id="4f54d-267">Inoltre, se l'applicazione stabilisce dipendenze su ID utente, ad esempio memorizzandole in un database, è importante notare che gli ID utente tra Servizi mobili e App per dispositivi mobili del servizio app sono diversi.</span><span class="sxs-lookup"><span data-stu-id="4f54d-267">Additionally, if your application takes dependencies on user IDs, such as storing them in a database, it is important to note that the user IDs between Mobile Services and App Service Mobile Apps are different.</span></span> <span data-ttu-id="4f54d-268">È tuttavia ancora possibile ottenere l'ID utente di Servizi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-268">You can still get the Mobile Services User ID, though.</span></span> <span data-ttu-id="4f54d-269">Tutte le sottoclassi ProviderCredentials hanno una proprietà UserId.</span><span class="sxs-lookup"><span data-stu-id="4f54d-269">All of the ProviderCredentials subclasses have a UserId property.</span></span> <span data-ttu-id="4f54d-270">Pertanto, continuando dall'esempio precedente:</span><span class="sxs-lookup"><span data-stu-id="4f54d-270">So continuing from the example before:</span></span>

        string mobileServicesUserId = creds.Provider + ":" + creds.UserId;

<span data-ttu-id="4f54d-271">Se l'app stabilisce dipendenze sugli ID utente, è importante sfruttare la stessa registrazione con un provider di identità, se possibile.</span><span class="sxs-lookup"><span data-stu-id="4f54d-271">If your app does take any dependencies on user IDs, it is important that you leverage the same registration with an identity provider if possible.</span></span> <span data-ttu-id="4f54d-272">Gli ID utente sono in genere destinati alla registrazione dell'applicazione che è stata usata, pertanto l'introduzione di una nuova registrazione potrebbe creare problemi di associazione degli utenti ai relativi dati.</span><span class="sxs-lookup"><span data-stu-id="4f54d-272">User IDs are typically scoped to the application registration that was used, so introducing a new registration could create problems with matching users to their data.</span></span>

### <a name="custom-authentication"></a><span data-ttu-id="4f54d-273">Autenticazione personalizzata</span><span class="sxs-lookup"><span data-stu-id="4f54d-273">Custom authentication</span></span>
<span data-ttu-id="4f54d-274">Se l'app usa una soluzione di autenticazione personalizzata, è necessario assicurarsi che il sito aggiornato abbia accesso al sistema.</span><span class="sxs-lookup"><span data-stu-id="4f54d-274">If your app is using a custom authentication solution, you will want to make sure that the upgraded site has access to the system.</span></span> <span data-ttu-id="4f54d-275">Seguire le nuove istruzioni per l'autenticazione personalizzata nella [panoramica di .NET Server SDK] per integrare la soluzione.</span><span class="sxs-lookup"><span data-stu-id="4f54d-275">Follow the new instructions for custom authentication in the [.NET server SDK overview] to integrate your solution.</span></span> <span data-ttu-id="4f54d-276">Si noti che i componenti dell'autenticazione personalizzata sono ancora in versione di anteprima.</span><span class="sxs-lookup"><span data-stu-id="4f54d-276">Please note that the custom authentication components are still in preview.</span></span>

## <span data-ttu-id="4f54d-277"><a name="updating-clients"></a>Aggiornamento dei client</span><span class="sxs-lookup"><span data-stu-id="4f54d-277"><a name="updating-clients"></a>Updating clients</span></span>
<span data-ttu-id="4f54d-278">Dopo aver reso operativo un back-end dell'app per dispositivi mobili, è possibile lavorare su una nuova versione dell'applicazione client che ne faccia uso.</span><span class="sxs-lookup"><span data-stu-id="4f54d-278">Once you have an operational Mobile App backend, you can work on a new version of your client application which consumes it.</span></span> <span data-ttu-id="4f54d-279">App per dispositivi mobili include anche una nuova versione degli SDK del client e, come nel caso dell'aggiornamento del server descritto in precedenza, sarà necessario rimuovere tutti i riferimenti agli SDK di Servizi mobili prima di installare le versioni di App per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-279">Mobile Apps also includes a new version of the client SDKs, and similar to the server upgrade above, you will need to remove all references to the Mobile Services SDKs before installing the Mobile Apps versions.</span></span>

<span data-ttu-id="4f54d-280">Una delle principali modifiche tra le versioni è rappresentata dai costruttori che non richiedono più una chiave applicazione.</span><span class="sxs-lookup"><span data-stu-id="4f54d-280">One of the main changes between the versions is that the constructors no longer require an application key.</span></span> <span data-ttu-id="4f54d-281">Ora è sufficiente passare l'URL dell'app per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-281">You now simply pass in the URL of your Mobile App.</span></span> <span data-ttu-id="4f54d-282">Ad esempio, nei client .NET, il costruttore `MobileServiceClient` ora è:</span><span class="sxs-lookup"><span data-stu-id="4f54d-282">For example, on the .NET clients, the `MobileServiceClient` constructor is now:</span></span>

        public static MobileServiceClient MobileService = new MobileServiceClient(
            "https://contoso.azurewebsites.net", // URL of the Mobile App
        );

<span data-ttu-id="4f54d-283">Per altre informazioni sull'installazione dei nuovi SDK e sull'uso della nuova struttura, visitare i collegamenti seguenti:</span><span class="sxs-lookup"><span data-stu-id="4f54d-283">You can read about installing the new SDKs and using the new structure via the links below:</span></span>

* [<span data-ttu-id="4f54d-284">iOS versione 3.0.0 o successiva</span><span class="sxs-lookup"><span data-stu-id="4f54d-284">iOS version 3.0.0 or later</span></span>](app-service-mobile-ios-how-to-use-client-library.md)
* [<span data-ttu-id="4f54d-285">.NET (Windows/Xamarin) versione 2.0.0 o successiva</span><span class="sxs-lookup"><span data-stu-id="4f54d-285">.NET (Windows/Xamarin) version 2.0.0 or later</span></span>](app-service-mobile-dotnet-how-to-use-client-library.md)

<span data-ttu-id="4f54d-286">Se l'applicazione usa le notifiche push, prendere nota delle specifiche istruzioni di registrazione per ogni piattaforma, perché sono state apportate alcune modifiche anche in questo ambito.</span><span class="sxs-lookup"><span data-stu-id="4f54d-286">If your application makes use of push notifications, make note of the specific registration instructions for each platform, as there have been some changes there as well.</span></span>

<span data-ttu-id="4f54d-287">Quando la nuova versione del client è pronta, provarla con il progetto server aggiornato.</span><span class="sxs-lookup"><span data-stu-id="4f54d-287">When you have the new client version ready, try it out against your upgraded server project.</span></span> <span data-ttu-id="4f54d-288">Dopo averne verificato il funzionamento, è possibile rilasciare una nuova versione dell'applicazione per i clienti.</span><span class="sxs-lookup"><span data-stu-id="4f54d-288">After validating that it works, you can release a new version of your application to customers.</span></span> <span data-ttu-id="4f54d-289">Infine, quando i clienti avranno ricevuto gli aggiornamenti, sarà possibile eliminare la versione di Servizi mobili dell'app.</span><span class="sxs-lookup"><span data-stu-id="4f54d-289">Eventually, once your customers have had a chance to receive these updates, you can delete the Mobile Services version of your app.</span></span> <span data-ttu-id="4f54d-290">A questo punto, sono stati aggiornati completamente a un'App per dispositivi mobili del servizio app utilizzando l’SDK più recente del server di App per dispositivi mobili.</span><span class="sxs-lookup"><span data-stu-id="4f54d-290">At this point, you have completely upgraded to an App Service Mobile App using the latest Mobile Apps server SDK.</span></span>

<!-- URLs. -->

<span data-ttu-id="4f54d-291">[portale di Azure]: https://portal.azure.com/</span><span class="sxs-lookup"><span data-stu-id="4f54d-291">[Azure portal]: https://portal.azure.com/</span></span>
<span data-ttu-id="4f54d-292">[portale di Azure classico]: https://manage.windowsazure.com/</span><span class="sxs-lookup"><span data-stu-id="4f54d-292">[Azure classic portal]: https://manage.windowsazure.com/</span></span>
<span data-ttu-id="4f54d-293">[Che cosa sono le app per dispositivi mobili?]: app-service-mobile-value-prop.md</span><span class="sxs-lookup"><span data-stu-id="4f54d-293">[What are Mobile Apps?]: app-service-mobile-value-prop.md</span></span>
[I already use web sites and mobile services – how does App Service help me?]: /en-us/documentation/articles/app-service-mobile-value-prop-migration-from-mobile-services
<span data-ttu-id="4f54d-294">[Mobile App Server SDK]: http://www.nuget.org/packages/microsoft.azure.mobile.server</span><span class="sxs-lookup"><span data-stu-id="4f54d-294">[Mobile App Server SDK]: http://www.nuget.org/packages/microsoft.azure.mobile.server</span></span>
[Create a Mobile App]: app-service-mobile-xamarin-ios-get-started.md
[Add push notifications to your mobile app]: app-service-mobile-xamarin-ios-get-started-push.md
[Add authentication to your mobile app]: app-service-mobile-xamarin-ios-get-started-users.md
<span data-ttu-id="4f54d-295">[Utilità di pianificazione di Azure]: /en-us/documentation/services/scheduler/</span><span class="sxs-lookup"><span data-stu-id="4f54d-295">[Azure Scheduler]: /en-us/documentation/services/scheduler/</span></span>
<span data-ttu-id="4f54d-296">[processo Web]: ../app-service-web/websites-webjobs-resources.md</span><span class="sxs-lookup"><span data-stu-id="4f54d-296">[Web Job]: ../app-service-web/websites-webjobs-resources.md</span></span>
<span data-ttu-id="4f54d-297">[Come usare l'SDK del server .NET]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span><span class="sxs-lookup"><span data-stu-id="4f54d-297">[How to use the .NET server SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span></span>
[Migrate from Mobile Services to an App Service Mobile App]: app-service-mobile-migrating-from-mobile-services.md
[Migrate your existing Mobile Service to App Service]: app-service-mobile-migrating-from-mobile-services.md
<span data-ttu-id="4f54d-298">[prezzi del servizio app]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span><span class="sxs-lookup"><span data-stu-id="4f54d-298">[App Service pricing]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span></span>
<span data-ttu-id="4f54d-299">[panoramica di .NET Server SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span><span class="sxs-lookup"><span data-stu-id="4f54d-299">[.NET server SDK overview]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md</span></span>
