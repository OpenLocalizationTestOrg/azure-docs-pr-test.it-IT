---
title: Creare un peering di rete virtuale di Azure - Modelli di distribuzione diversa - Sottoscrizioni diverse | Microsoft Docs
description: Informazioni su come creare un peering di rete virtuale tra reti virtuali distribuite tramite modelli di distribuzione di Azure diversi e incluse in sottoscrizioni di Azure diverse.
services: virtual-network
documentationcenter: 
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/17/2017
ms.author: jdial;narayan;annahar
ms.openlocfilehash: 93d5676e9188e67f1f6a9bba1d4d30a93b3883d8
ms.sourcegitcommit: 422efcbac5b6b68295064bd545132fcc98349d01
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/29/2017
---
# <a name="create-a-virtual-network-peering---different-deployment-models-and-subscriptions"></a><span data-ttu-id="cfc62-103">Creare un peering di rete virtuale: diversi modelli di distribuzione e sottoscrizioni</span><span class="sxs-lookup"><span data-stu-id="cfc62-103">Create a virtual network peering - different deployment models and subscriptions</span></span>

<span data-ttu-id="cfc62-104">In questa esercitazione si apprenderà a creare un peering di rete virtuale tra reti virtuali create con modelli di distribuzione diversi.</span><span class="sxs-lookup"><span data-stu-id="cfc62-104">In this tutorial, you learn to create a virtual network peering between virtual networks created through different deployment models.</span></span> <span data-ttu-id="cfc62-105">Le reti virtuali sono incluse in sottoscrizioni diverse.</span><span class="sxs-lookup"><span data-stu-id="cfc62-105">The virtual networks exist in different subscriptions.</span></span> <span data-ttu-id="cfc62-106">Il peering di due reti virtuali consente alle risorse che si trovano in reti virtuali diverse di comunicare tra loro con la stessa larghezza di banda e la stessa latenza come se fossero nella stessa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="cfc62-106">Peering two virtual networks enables resources in different virtual networks to communicate with each other with the same bandwidth and latency as though the resources were in the same virtual network.</span></span> <span data-ttu-id="cfc62-107">Altre informazioni sul [Peering di rete virtuale](virtual-network-peering-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cfc62-107">Learn more about [Virtual network peering](virtual-network-peering-overview.md).</span></span> 

<span data-ttu-id="cfc62-108">I passaggi per creare un peering di rete virtuale sono diversi a seconda che le reti virtuali siano incluse nella stessa sottoscrizione o in sottoscrizioni diverse e in base al [modello di distribuzione di Azure](../azure-resource-manager/resource-manager-deployment-model.md?toc=%2fazure%2fvirtual-network%2ftoc.json) con il quale sono state create le reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="cfc62-108">The steps to create a virtual network peering are different, depending on whether the virtual networks are in the same, or different, subscriptions, and which [Azure deployment model](../azure-resource-manager/resource-manager-deployment-model.md?toc=%2fazure%2fvirtual-network%2ftoc.json) the virtual networks are created through.</span></span> <span data-ttu-id="cfc62-109">Per informazioni su come creare un peering di rete virtuale in altri scenari, fare clic sullo scenario nella tabella seguente:</span><span class="sxs-lookup"><span data-stu-id="cfc62-109">Learn how to create a virtual network peering in other scenarios by clicking the scenario from the following table:</span></span>

|<span data-ttu-id="cfc62-110">Modello di distribuzione di Azure</span><span class="sxs-lookup"><span data-stu-id="cfc62-110">Azure deployment model</span></span>  | <span data-ttu-id="cfc62-111">Sottoscrizione di Azure</span><span class="sxs-lookup"><span data-stu-id="cfc62-111">Azure subscription</span></span>  |
|--------- |---------|
|[<span data-ttu-id="cfc62-112">Entrambi con Resource Manager</span><span class="sxs-lookup"><span data-stu-id="cfc62-112">Both Resource Manager</span></span>](virtual-network-create-peering.md) |<span data-ttu-id="cfc62-113">Uguale</span><span class="sxs-lookup"><span data-stu-id="cfc62-113">Same</span></span>|
|[<span data-ttu-id="cfc62-114">Entrambi con Resource Manager</span><span class="sxs-lookup"><span data-stu-id="cfc62-114">Both Resource Manager</span></span>](create-peering-different-subscriptions.md) |<span data-ttu-id="cfc62-115">Diversa</span><span class="sxs-lookup"><span data-stu-id="cfc62-115">Different</span></span>|
|[<span data-ttu-id="cfc62-116">Uno con Resource Manager, uno con una distribuzione classica</span><span class="sxs-lookup"><span data-stu-id="cfc62-116">One Resource Manager, one classic</span></span>](create-peering-different-deployment-models.md) |<span data-ttu-id="cfc62-117">Uguale</span><span class="sxs-lookup"><span data-stu-id="cfc62-117">Same</span></span>|

<span data-ttu-id="cfc62-118">Non è possibile creare un peering di rete virtuale tra due reti virtuali distribuite tramite il modello di distribuzione classica.</span><span class="sxs-lookup"><span data-stu-id="cfc62-118">A virtual network peering cannot be created between two virtual networks deployed through the classic deployment model.</span></span> <span data-ttu-id="cfc62-119">È possibile creare un peering di rete virtuale solo tra due reti virtuali che si trovano nella stessa area di Azure.</span><span class="sxs-lookup"><span data-stu-id="cfc62-119">A virtual network peering can only be created between two virtual networks that exist in the same Azure region.</span></span> <span data-ttu-id="cfc62-120">Quando si crea un peering di rete virtuale tra reti virtuali incluse in sottoscrizioni diverse, entrambe le sottoscrizioni devono essere associate allo stesso tenant di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cfc62-120">When creating a virtual network peering between virtual networks that exist in different subscriptions, the subscriptions must both be associated to the same Azure Active Directory tenant.</span></span> <span data-ttu-id="cfc62-121">Se non si ha già un tenant di Azure Active Directory, è possibile [crearne uno](../active-directory/develop/active-directory-howto-tenant.md?toc=%2fazure%2fvirtual-network%2ftoc.json#start-from-scratch) rapidamente.</span><span class="sxs-lookup"><span data-stu-id="cfc62-121">If you don't already have an Azure Active Directory tenant, you can quickly [create one](../active-directory/develop/active-directory-howto-tenant.md?toc=%2fazure%2fvirtual-network%2ftoc.json#start-from-scratch).</span></span> <span data-ttu-id="cfc62-122">Se è necessario connettere reti virtuali create entrambe con il modello di distribuzione classica, che si trovano in aree di Azure diverse o che sono incluse in sottoscrizioni associate a tenant di Azure Active Directory diversi, è possibile usare il [Gateway VPN](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json) di Azure per connettere le reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="cfc62-122">If you need to connect virtual networks that were both created through the classic deployment model, or that exist in different Azure regions, or that exist in subscriptions associated to different Azure Active Directory tenants, you can use an Azure [VPN Gateway](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json) to connect the virtual networks.</span></span> 

> [!WARNING]
> <span data-ttu-id="cfc62-123">La creazione di un peering di rete virtuale tra reti virtuali create con modelli di distribuzione di Azure diversi e incluse in sottoscrizioni di Azure diverse è attualmente in anteprima.</span><span class="sxs-lookup"><span data-stu-id="cfc62-123">Creating a virtual network peering between virtual networks in created through different Azure deployment models that exist in different subscriptions is currently in preview.</span></span> <span data-ttu-id="cfc62-124">I peering di rete virtuale creati in questo scenario potrebbero non avere lo stesso livello di disponibilità e affidabilità di quelli creati in scenari di rilascio con disponibilità generale.</span><span class="sxs-lookup"><span data-stu-id="cfc62-124">Virtual network peerings created in this scenario may not have the same level of availability and reliability as creating a virtual network peering in scenarios in general availability release.</span></span> <span data-ttu-id="cfc62-125">I peering di rete virtuale creati in questo scenario non sono supportati, possono presentare funzionalità limitate e potrebbero non essere disponibili in tutte le aree di Azure.</span><span class="sxs-lookup"><span data-stu-id="cfc62-125">Virtual network peerings created in this scenario are not supported, may have constrained capabilities, and may not be available in all Azure regions.</span></span> <span data-ttu-id="cfc62-126">Per ricevere le notifiche più aggiornate su disponibilità e stato della funzionalità, vedere la pagina [Aggiornamenti della rete virtuale di Azure](https://azure.microsoft.com/updates/?product=virtual-network) .</span><span class="sxs-lookup"><span data-stu-id="cfc62-126">For the most up-to-date notifications on availability and status of this feature, check the [Azure Virtual Network updates](https://azure.microsoft.com/updates/?product=virtual-network) page.</span></span>

<span data-ttu-id="cfc62-127">Per creare un peering di rete virtuale, è possibile usare il [portale di Azure](#portal), l'[interfaccia della riga di comando](#cli) di Azure o [Azure PowerShell](#powershell).</span><span class="sxs-lookup"><span data-stu-id="cfc62-127">You can use the [Azure portal](#portal), the Azure [command-line interface](#cli) (CLI), or Azure [PowerShell](#powershell) to create a virtual network peering.</span></span> <span data-ttu-id="cfc62-128">Facendo clic sui collegamenti degli strumenti precedenti, si passa direttamente alle procedure per la creazione di un peering di rete virtuale con il determinato strumento.</span><span class="sxs-lookup"><span data-stu-id="cfc62-128">Click any of the previous tool links to go directly to the steps for creating a virtual network peering using your tool of choice.</span></span>

## <span data-ttu-id="cfc62-129"><a name="register"></a>Eseguire la registrazione per l'anteprima</span><span class="sxs-lookup"><span data-stu-id="cfc62-129"><a name="register"></a>Register for the preview</span></span>

<span data-ttu-id="cfc62-130">Per eseguire la registrazione all'anteprima, completare la procedura seguente per entrambe le sottoscrizioni che contengono le reti virtuali per cui si desidera eseguire il peering.</span><span class="sxs-lookup"><span data-stu-id="cfc62-130">To register for the preview, complete the steps that follow for both subscriptions that contain the virtual networks you want to peer.</span></span> <span data-ttu-id="cfc62-131">L'unico strumento che consente di registrare per l'anteprima è PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cfc62-131">The only tool you can use to register for the preview is PowerShell.</span></span>

1. <span data-ttu-id="cfc62-132">Installare la versione più recente del modulo [AzureRm](https://www.powershellgallery.com/packages/AzureRM/) di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cfc62-132">Install the latest version of the PowerShell [AzureRm](https://www.powershellgallery.com/packages/AzureRM/) module.</span></span> <span data-ttu-id="cfc62-133">Se non si ha familiarità con Azure PowerShell, vedere [Azure PowerShell overview](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json) (Panoramica di Azure PowerShell).</span><span class="sxs-lookup"><span data-stu-id="cfc62-133">If you're new to Azure PowerShell, see [Azure PowerShell overview](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>
2. <span data-ttu-id="cfc62-134">Avviare una sessione di PowerShell e accedere ad Azure usando il comando `login-azurermaccount`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-134">Start a PowerShell session and log in to Azure using the `login-azurermaccount` command.</span></span>
3. <span data-ttu-id="cfc62-135">Registrare la sottoscrizione all'anteprima immettendo i comandi seguenti:</span><span class="sxs-lookup"><span data-stu-id="cfc62-135">Register your subscription for the preview by entering the following commands:</span></span>

    ```powershell
    Register-AzureRmProviderFeature `
      -FeatureName AllowClassicCrossSubscriptionPeering `
      -ProviderNamespace Microsoft.Network
    
    Register-AzureRmResourceProvider `
      -ProviderNamespace Microsoft.Network
    ```
    <span data-ttu-id="cfc62-136">Non completare la procedura nelle sezioni del portale, dell'interfaccia della riga di comando di Azure o di PowerShell di questo articolo finché l'output **RegistrationState** che si riceve dopo aver immesso il comando seguente non è **Registrato** per entrambe le sottoscrizioni:</span><span class="sxs-lookup"><span data-stu-id="cfc62-136">Do not complete the steps in the Portal, Azure CLI, or PowerShell sections of this article until the **RegistrationState** output you receive after entering the following command is **Registered** for both subscriptions:</span></span>

    ```powershell    
    Get-AzureRmProviderFeature `
      -FeatureName AllowClassicCrossSubscriptionPeering `
      -ProviderNamespace Microsoft.Network
    ```

## <span data-ttu-id="cfc62-137"><a name="portal"></a>Creare un peering - Portale di Azure</span><span class="sxs-lookup"><span data-stu-id="cfc62-137"><a name="portal"></a>Create peering - Azure portal</span></span>

<span data-ttu-id="cfc62-138">Questa esercitazione usa account diversi per ogni sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-138">This tutorial uses different accounts for each subscription.</span></span> <span data-ttu-id="cfc62-139">Se si usa un account dotato di autorizzazioni per entrambe le sottoscrizioni, è possibile usare lo stesso account per tutti i passaggi, ignorando i passaggi per la disconnessione dal portale e quelli per l'assegnazione a un altro utente delle autorizzazioni per le reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="cfc62-139">If you're using an account that has permissions to both subscriptions, you can use the same account for all steps, skip the steps for logging out of the portal, and skip the steps for assigning another user permissions to the virtual networks.</span></span> <span data-ttu-id="cfc62-140">Prima di completare i passaggi seguenti, è necessario eseguire la registrazione per l'anteprima.</span><span class="sxs-lookup"><span data-stu-id="cfc62-140">Before completing any of the following steps, you must register for the preview.</span></span> <span data-ttu-id="cfc62-141">Per eseguire la registrazione per l'anteprima, completare i passaggi nella sezione [Eseguire la registrazione per l'anteprima](#register) di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-141">To register, complete the steps in the [Register for the preview](#register) section of this article.</span></span> <span data-ttu-id="cfc62-142">Non procedere con i passaggi rimanenti fino a quando entrambe le sottoscrizioni non sono state registrate per l'anteprima.</span><span class="sxs-lookup"><span data-stu-id="cfc62-142">Do not continue with the remaining steps until both subscriptions are registered for the preview.</span></span>
 
1. <span data-ttu-id="cfc62-143">Accedere al [portale di Azure](https://portal.azure.com) come UserA.</span><span class="sxs-lookup"><span data-stu-id="cfc62-143">Log in to the [Azure portal](https://portal.azure.com) as UserA.</span></span> <span data-ttu-id="cfc62-144">L'account con cui si esegue l'accesso deve avere le autorizzazioni necessarie per la creazione di un peering di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="cfc62-144">The account you log in with must have the necessary permissions to create a virtual network peering.</span></span> <span data-ttu-id="cfc62-145">Vedere la sezione [Autorizzazioni](#permissions) di questo articolo per informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="cfc62-145">See the [Permissions](#permissions) section of this article for details.</span></span>
2. <span data-ttu-id="cfc62-146">Fare clic su **+ Nuovo**, **Rete** e quindi **Rete virtuale**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-146">Click **+ New**, click **Networking**, then click **Virtual network**.</span></span>
3. <span data-ttu-id="cfc62-147">Nel pannello **Crea rete virtuale** immettere o selezionare i valori necessari per le impostazioni seguenti e quindi fare clic su **Crea**:</span><span class="sxs-lookup"><span data-stu-id="cfc62-147">In the **Create virtual network** blade, enter, or select values for the following settings, then click **Create**:</span></span>
    - <span data-ttu-id="cfc62-148">**Nome**: *myVnetA*</span><span class="sxs-lookup"><span data-stu-id="cfc62-148">**Name**: *myVnetA*</span></span>
    - <span data-ttu-id="cfc62-149">**Spazio indirizzi**: *10.0.0.0/16*</span><span class="sxs-lookup"><span data-stu-id="cfc62-149">**Address space**: *10.0.0.0/16*</span></span>
    - <span data-ttu-id="cfc62-150">**Nome subnet**: *predefinito*</span><span class="sxs-lookup"><span data-stu-id="cfc62-150">**Subnet name**: *default*</span></span>
    - <span data-ttu-id="cfc62-151">**Intervallo di indirizzi subnet**: *10.0.0.0/24*</span><span class="sxs-lookup"><span data-stu-id="cfc62-151">**Subnet address range**: *10.0.0.0/24*</span></span>
    - <span data-ttu-id="cfc62-152">**Sottoscrizione**: selezionare la sottoscrizione A.</span><span class="sxs-lookup"><span data-stu-id="cfc62-152">**Subscription**: Select subscription A.</span></span>
    - <span data-ttu-id="cfc62-153">**Gruppo di risorse**: selezionare **Crea nuovo** e immettere *myResourceGroupA*</span><span class="sxs-lookup"><span data-stu-id="cfc62-153">**Resource group**: Select **Create new** and enter *myResourceGroupA*</span></span>
    - <span data-ttu-id="cfc62-154">**Località**: *Stati Uniti orientali*</span><span class="sxs-lookup"><span data-stu-id="cfc62-154">**Location**: *East US*</span></span>
4. <span data-ttu-id="cfc62-155">Nella casella **Cerca risorse** nella parte superiore del portale digitare *myVnetA*.</span><span class="sxs-lookup"><span data-stu-id="cfc62-155">In the **Search resources** box at the top of the portal, type *myVnetA*.</span></span> <span data-ttu-id="cfc62-156">Fare clic su **myVnetA** quando viene visualizzato nei risultati della ricerca.</span><span class="sxs-lookup"><span data-stu-id="cfc62-156">Click **myVnetA** when it appears in the search results.</span></span> <span data-ttu-id="cfc62-157">Viene visualizzato un pannello per la rete virtuale **myVnetA**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-157">A blade appears for the **myVnetA** virtual network.</span></span>
5. <span data-ttu-id="cfc62-158">Nel pannello **myVnetA** visualizzato fare clic su **Controllo di accesso (IAM)** nell'elenco verticale di opzioni sul lato sinistro del pannello.</span><span class="sxs-lookup"><span data-stu-id="cfc62-158">In the **myVnetA** blade that appears, click **Access control (IAM)** from the vertical list of options on the left side of the blade.</span></span>
6. <span data-ttu-id="cfc62-159">Nel pannello **myVnetA - Controllo di accesso (IAM)** visualizzato fare clic su **+ Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-159">In the **myVnetA - Access control (IAM)** blade that appears, click **+ Add**.</span></span>
7. <span data-ttu-id="cfc62-160">Nel pannello **Aggiungi autorizzazioni** visualizzato selezionare **Collaboratore rete** nella casella **Ruolo**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-160">In the **Add permissions** blade that appears, select **Network contributor** in the **Role** box.</span></span>
8. <span data-ttu-id="cfc62-161">Nella casella **Seleziona** selezionare UserB o digitare l'indirizzo di posta elettronica di UserB per cercarlo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-161">In the **Select** box, select UserB, or type UserB's email address to search for it.</span></span> <span data-ttu-id="cfc62-162">L'elenco di utenti mostrato è tratto dallo stesso tenant di Azure Active Directory della rete virtuale per la quale si sta configurando il peering.</span><span class="sxs-lookup"><span data-stu-id="cfc62-162">The list of users shown is from the same Azure Active Directory tenant as the virtual network you're setting up the peering for.</span></span> <span data-ttu-id="cfc62-163">Quando viene visualizzato nell'elenco, fare clic su UserB.</span><span class="sxs-lookup"><span data-stu-id="cfc62-163">Click UserB when it appears in the list.</span></span>
9. <span data-ttu-id="cfc62-164">Fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-164">Click **Save**.</span></span>
10. <span data-ttu-id="cfc62-165">Disconnettersi dal portale come UserA e quindi accedere come UserB.</span><span class="sxs-lookup"><span data-stu-id="cfc62-165">Log out of the portal as UserA, then log in as UserB.</span></span>
11. <span data-ttu-id="cfc62-166">Fare clic su **+ Nuovo**, digitare *Rete virtuale* nella casella **Cerca nel Marketplace**, quindi fare clic su **Rete virtuale** nei risultati della ricerca.</span><span class="sxs-lookup"><span data-stu-id="cfc62-166">Click **+ New**, type *Virtual network* in the **Search the Marketplace** box, then click **Virtual network** in the search results.</span></span>
12. <span data-ttu-id="cfc62-167">Nel pannello **Rete virtuale** che viene visualizzato selezionare **Classico** nella casella **Selezionare un modello di distribuzione** e fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-167">In the **Virtual Network** blade that appears, select **Classic** in the **Select a deployment model** box, then click **Create**.</span></span>
13.   <span data-ttu-id="cfc62-168">Nella casella Crea rete virtuale (classico) visualizzata immettere i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="cfc62-168">In the Create virtual network (classic) box that appears, enter the following values:</span></span>

    - <span data-ttu-id="cfc62-169">**Nome**: *myVnetB*</span><span class="sxs-lookup"><span data-stu-id="cfc62-169">**Name**: *myVnetB*</span></span>
    - <span data-ttu-id="cfc62-170">**Spazio indirizzi**: *10.1.0.0/16*</span><span class="sxs-lookup"><span data-stu-id="cfc62-170">**Address space**: *10.1.0.0/16*</span></span>
    - <span data-ttu-id="cfc62-171">**Nome subnet**: *predefinito*</span><span class="sxs-lookup"><span data-stu-id="cfc62-171">**Subnet name**: *default*</span></span>
    - <span data-ttu-id="cfc62-172">**Intervallo di indirizzi subnet**: *10.1.0.0/24*</span><span class="sxs-lookup"><span data-stu-id="cfc62-172">**Subnet address range**: *10.1.0.0/24*</span></span>
    - <span data-ttu-id="cfc62-173">**Sottoscrizione**: selezionare la sottoscrizione B.</span><span class="sxs-lookup"><span data-stu-id="cfc62-173">**Subscription**: Select subscription B.</span></span>
    - <span data-ttu-id="cfc62-174">**Gruppo di risorse**: selezionare **Crea nuovo** e immettere *myResourceGroupB*</span><span class="sxs-lookup"><span data-stu-id="cfc62-174">**Resource group**: Select **Create new** and enter *myResourceGroupB*</span></span>
    - <span data-ttu-id="cfc62-175">**Località**: *Stati Uniti orientali*</span><span class="sxs-lookup"><span data-stu-id="cfc62-175">**Location**: *East US*</span></span>

14. <span data-ttu-id="cfc62-176">Nella casella **Cerca risorse** nella parte superiore del portale digitare *myVnetB*.</span><span class="sxs-lookup"><span data-stu-id="cfc62-176">In the **Search resources** box at the top of the portal, type *myVnetB*.</span></span> <span data-ttu-id="cfc62-177">Fare clic su **myVnetB** quando viene visualizzato nei risultati della ricerca.</span><span class="sxs-lookup"><span data-stu-id="cfc62-177">Click **myVnetB** when it appears in the search results.</span></span> <span data-ttu-id="cfc62-178">Viene visualizzato un pannello per la rete virtuale **myVnetB**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-178">A blade appears for the **myVnetB** virtual network.</span></span>
15. <span data-ttu-id="cfc62-179">Nel pannello **myVnetB** visualizzato fare clic su **Proprietà** nell'elenco verticale di opzioni sul lato sinistro del pannello.</span><span class="sxs-lookup"><span data-stu-id="cfc62-179">In the **myVnetB** blade that appears, click **Properties** from the vertical list of options on the left side of the blade.</span></span> <span data-ttu-id="cfc62-180">Copiare il valore di **ID RISORSA**, che verrà usato in un passaggio successivo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-180">Copy the **RESOURCE ID**, which is used in a later step.</span></span> <span data-ttu-id="cfc62-181">L'ID risorsa è simile all'esempio seguente: /subscriptions/<Susbscription ID>/resourceGroups/myResoureGroupB/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB</span><span class="sxs-lookup"><span data-stu-id="cfc62-181">The resource ID is similar to the following example: /subscriptions/<Susbscription ID>/resourceGroups/myResoureGroupB/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB</span></span>
16. <span data-ttu-id="cfc62-182">Completare i passaggi da 5 a 9 per myVnetB immettendo **UserA** nel passaggio 8.</span><span class="sxs-lookup"><span data-stu-id="cfc62-182">Complete steps 5-9 for myVnetB, entering **UserA** in step 8.</span></span>
17. <span data-ttu-id="cfc62-183">Disconnettersi dal portale come UserB e accedere come UserA.</span><span class="sxs-lookup"><span data-stu-id="cfc62-183">Log out of the portal as UserB and log in as UserA.</span></span>
18. <span data-ttu-id="cfc62-184">Nella casella **Cerca risorse** nella parte superiore del portale digitare *myVnetA*.</span><span class="sxs-lookup"><span data-stu-id="cfc62-184">In the **Search resources** box at the top of the portal, type *myVnetA*.</span></span> <span data-ttu-id="cfc62-185">Fare clic su **myVnetA** quando viene visualizzato nei risultati della ricerca.</span><span class="sxs-lookup"><span data-stu-id="cfc62-185">Click **myVnetA** when it appears in the search results.</span></span> <span data-ttu-id="cfc62-186">Viene visualizzato un pannello per la rete virtuale **myVnet**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-186">A blade appears for the **myVnet** virtual network.</span></span>
19. <span data-ttu-id="cfc62-187">Fare clic su **myVnetA**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-187">Click **myVnetA**.</span></span>
20. <span data-ttu-id="cfc62-188">Nel pannello **myVnetA** visualizzato fare clic su **Peer** nell'elenco di opzioni verticale sul lato sinistro del pannello.</span><span class="sxs-lookup"><span data-stu-id="cfc62-188">In the **myVnetA** blade that appears, click **Peerings** from the vertical list of options on the left side of the blade.</span></span>
21. <span data-ttu-id="cfc62-189">Nel pannello **myVnetA - Peer** visualizzato fare clic su **+ Aggiungi**</span><span class="sxs-lookup"><span data-stu-id="cfc62-189">In the **myVnetA - Peerings** blade that appeared, click **+ Add**</span></span>
22. <span data-ttu-id="cfc62-190">Nel pannello **Aggiungi peering** visualizzato immettere o selezionare le opzioni seguenti e quindi fare clic su **OK**:</span><span class="sxs-lookup"><span data-stu-id="cfc62-190">In the **Add peering** blade that appears, enter, or select the following options, then click **OK**:</span></span>
     - <span data-ttu-id="cfc62-191">**Nome**: *myVnetAToMyVnetB*</span><span class="sxs-lookup"><span data-stu-id="cfc62-191">**Name**: *myVnetAToMyVnetB*</span></span>
     - <span data-ttu-id="cfc62-192">**Modello di distribuzione della rete virtuale**: selezionare **Classica**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-192">**Virtual network deployment model**:  Select **Classic**.</span></span>
     - <span data-ttu-id="cfc62-193">**Conosco l'ID della risorsa**: selezionare questa casella di controllo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-193">**I know my resource ID**: Check this box.</span></span>
     - <span data-ttu-id="cfc62-194">**ID risorsa**: immettere l'ID risorsa indicato nel passaggio 15.</span><span class="sxs-lookup"><span data-stu-id="cfc62-194">**Resource ID**: Enter the resource ID of myVnetB from step 15.</span></span>
     - <span data-ttu-id="cfc62-195">**Consenti accesso alla rete virtuale:** assicurarsi che sia selezionato **Abilitato**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-195">**Allow virtual network access:** Ensure that **Enabled** is selected.</span></span>
    <span data-ttu-id="cfc62-196">Questa esercitazione non prevede l'uso di altre impostazioni.</span><span class="sxs-lookup"><span data-stu-id="cfc62-196">No other settings are used in this tutorial.</span></span> <span data-ttu-id="cfc62-197">Per informazioni su tutte le impostazioni per il peering, vedere [Gestire i peering di rete virtuale](virtual-network-manage-peering.md#create-a-peering).</span><span class="sxs-lookup"><span data-stu-id="cfc62-197">To learn about all peering settings, read [Manage virtual network peerings](virtual-network-manage-peering.md#create-a-peering).</span></span>
23. <span data-ttu-id="cfc62-198">Dopo aver fatto clic su **OK** nel passaggio precedente, il pannello **Aggiungi peering** si chiude e viene visualizzato di nuovo il pannello **myVnetA - Peer**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-198">After clicking **OK** in the previous step, the **Add peering** blade closes and you see the **myVnetA - Peerings** blade again.</span></span> <span data-ttu-id="cfc62-199">Dopo alcuni secondi, il peering creato viene visualizzato nel pannello.</span><span class="sxs-lookup"><span data-stu-id="cfc62-199">After a few seconds, the peering you created appears in the blade.</span></span> <span data-ttu-id="cfc62-200">Nella colonna **STATO PEERING** relativa al peering **myVnetAToMyVnetB** creato è specificato lo stato **Connesso**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-200">**Connected** is listed in the **PEERING STATUS** column for the **myVnetAToMyVnetB** peering you created.</span></span> <span data-ttu-id="cfc62-201">Il peering viene quindi stabilito.</span><span class="sxs-lookup"><span data-stu-id="cfc62-201">The peering is now established.</span></span> <span data-ttu-id="cfc62-202">Non è necessario eseguire il peering tra la rete virtuale creata con modello di distribuzione classica e la rete virtuale creata con Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cfc62-202">There is no need to peer the virtual network (classic) to the virtual network (Resource Manager).</span></span>

    <span data-ttu-id="cfc62-203">Tutte le risorse di Azure create in una delle reti virtuali possono ora comunicare tra loro tramite i relativi indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="cfc62-203">Any Azure resources you create in either virtual network are now able to communicate with each other through their IP addresses.</span></span> <span data-ttu-id="cfc62-204">Se si usa la risoluzione dei nomi di Azure predefinita per le reti virtuali, le risorse contenute nelle reti virtuali non sono in grado di risolvere i nomi tra le reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="cfc62-204">If you're using default Azure name resolution for the virtual networks, the resources in the virtual networks are not able to resolve names across the virtual networks.</span></span> <span data-ttu-id="cfc62-205">Se si intende risolvere i nomi tra le reti virtuali in peering, è necessario creare un proprio server DNS.</span><span class="sxs-lookup"><span data-stu-id="cfc62-205">If you want to resolve names across virtual networks in a peering, you must create your own DNS server.</span></span> <span data-ttu-id="cfc62-206">Per informazioni sulla configurazione, vedere [Risoluzione dei nomi usando il server DNS](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="cfc62-206">Learn how to set up [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>

24. <span data-ttu-id="cfc62-207">**Facoltativo**: anche se la creazione delle macchine virtuali non è illustrata in questa esercitazione, è possibile creare una macchina virtuale in ogni rete virtuale ed eseguire la connessione da una macchina virtuale all'altra per convalidare la connettività.</span><span class="sxs-lookup"><span data-stu-id="cfc62-207">**Optional**: Though creating virtual machines is not covered in this tutorial, you can create a virtual machine in each virtual network and connect from one virtual machine to the other, to validate connectivity.</span></span>
25. <span data-ttu-id="cfc62-208">**Facoltativo**: per eliminare le risorse create in questa esercitazione, completare i passaggi della sezione [Eliminare risorse](#delete-portal) di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-208">**Optional**: To delete the resources that you create in this tutorial, complete the steps in the [Delete resources](#delete-portal) section of this article.</span></span>

## <span data-ttu-id="cfc62-209"><a name="cli"></a>Creare un peering - Interfaccia della riga di comando di Azure</span><span class="sxs-lookup"><span data-stu-id="cfc62-209"><a name="cli"></a>Create peering - Azure CLI</span></span>

<span data-ttu-id="cfc62-210">Questa esercitazione usa account diversi per ogni sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-210">This tutorial uses different accounts for each subscription.</span></span> <span data-ttu-id="cfc62-211">Se si usa un account dotato di autorizzazioni per entrambe le sottoscrizioni, è possibile usare lo stesso account per tutti i passaggi, ignorando i passaggi per la disconnessione da Azure e rimuovendo le righe dello script per la creazione delle assegnazioni dei ruoli utente.</span><span class="sxs-lookup"><span data-stu-id="cfc62-211">If you're using an account that has permissions to both subscriptions, you can use the same account for all steps, skip the steps for logging out of Azure, and remove the lines of script that create user role assignments.</span></span> <span data-ttu-id="cfc62-212">Sostituire UserA@azure.com e UserB@azure.com in tutti gli script seguenti con i nomi utente usati per UserA e UserB.</span><span class="sxs-lookup"><span data-stu-id="cfc62-212">Replace UserA@azure.com and UserB@azure.com in all of the following scripts with the usernames you're using for UserA and UserB.</span></span> 

<span data-ttu-id="cfc62-213">Prima di completare i passaggi seguenti, è necessario eseguire la registrazione per l'anteprima.</span><span class="sxs-lookup"><span data-stu-id="cfc62-213">Before completing any of the following steps, you must register for the preview.</span></span> <span data-ttu-id="cfc62-214">Per eseguire la registrazione per l'anteprima, completare i passaggi nella sezione [Eseguire la registrazione per l'anteprima](#register) di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-214">To register, complete the steps in the [Register for the preview](#register) section of this article.</span></span> <span data-ttu-id="cfc62-215">Non procedere con i passaggi rimanenti fino a quando entrambe le sottoscrizioni non sono state registrate per l'anteprima.</span><span class="sxs-lookup"><span data-stu-id="cfc62-215">Do not continue with the remaining steps until both subscriptions are registered for the preview.</span></span>

1. <span data-ttu-id="cfc62-216">[Installare](../cli-install-nodejs.md?toc=%2fazure%2fvirtual-network%2ftoc.json) l'interfaccia della riga di comando di Azure 1.0 per creare la rete virtuale con modello di distribuzione classico.</span><span class="sxs-lookup"><span data-stu-id="cfc62-216">[Install](../cli-install-nodejs.md?toc=%2fazure%2fvirtual-network%2ftoc.json) the Azure CLI 1.0 to create the virtual network (classic).</span></span>
2. <span data-ttu-id="cfc62-217">Aprire una sessione dell'interfaccia della riga di comando e accedere ad Azure come UserB usando il comando `azure login`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-217">Open a CLI session and log in to Azure as UserB using the `azure login` command.</span></span>
3. <span data-ttu-id="cfc62-218">Eseguire l'interfaccia della riga di comando in modalità di gestione del servizio immettendo il comando `azure config mode asm`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-218">Run the CLI in Service Management mode by entering the `azure config mode asm` command.</span></span>
4. <span data-ttu-id="cfc62-219">Per creare una rete virtuale con modello di distribuzione classico, immettere il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="cfc62-219">Enter the following command to create the virtual network (classic):</span></span>
 
    ```azurecli
    azure network vnet create --vnet myVnetB --address-space 10.1.0.0 --cidr 16 --location "East US"
    ```
5. <span data-ttu-id="cfc62-220">I passaggi rimanenti devono essere completati con un bash shell con l'interfaccia della riga di comando di Azure 2.0.4 o versioni successive [installato](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json) o mediante Azure Cloud Shell.</span><span class="sxs-lookup"><span data-stu-id="cfc62-220">The remaining steps must be completed using a bash shell with the Azure CLI 2.0.4 or later [installed](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json), or by using the Azure Cloud Shell.</span></span> <span data-ttu-id="cfc62-221">Azure Cloud Shell è una shell Bash gratuita che può essere eseguita direttamente nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="cfc62-221">The Azure Cloud Shell is a free Bash shell that you can run directly within the Azure portal.</span></span> <span data-ttu-id="cfc62-222">Include l'interfaccia della riga di comando di Azure preinstallata e configurata per l'uso con l'account.</span><span class="sxs-lookup"><span data-stu-id="cfc62-222">It has the Azure CLI preinstalled and configured to use with your account.</span></span> <span data-ttu-id="cfc62-223">Fare clic sul pulsante **Prova** nello script seguente per aprire una Cloud Shell tramite cui è possibile accedere all'account di Azure personale.</span><span class="sxs-lookup"><span data-stu-id="cfc62-223">Click the **Try it** button in the scripts that follow, which opens a Cloud Shell that logs you in to your Azure account.</span></span> <span data-ttu-id="cfc62-224">Per le opzioni sull'esecuzione di script dell'interfaccia della riga di comando bash nel client Windows, vedere [Esecuzione dell'interfaccia della riga di comando di Azure in Windows](../virtual-machines/windows/cli-options.md?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="cfc62-224">For options on running bash CLI scripts on a Windows client, see [Running the Azure CLI in Windows](../virtual-machines/windows/cli-options.md?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> 
6. <span data-ttu-id="cfc62-225">Copiare lo script seguente in un editor di testo nel PC.</span><span class="sxs-lookup"><span data-stu-id="cfc62-225">Copy the following script to a text editor on your PC.</span></span> <span data-ttu-id="cfc62-226">Sostituire `<SubscriptionB-Id>` con l'ID della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-226">Replace `<SubscriptionB-Id>` with your subscription ID.</span></span> <span data-ttu-id="cfc62-227">Se l'ID della sottoscrizione non è noto, immettere il comando `az account show`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-227">If you don't know your subscription Id, enter the `az account show` command.</span></span> <span data-ttu-id="cfc62-228">Il valore per **id** nell'output è l'ID della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-228">The value for **id** in the output is your subscription Id.</span></span> <span data-ttu-id="cfc62-229">Copiare lo script modificato, incollarlo nella sessione dell'interfaccia della riga di comando 2.0 e quindi premere `Enter`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-229">Copy the modified script, paste it in to your CLI 2.0 session, and then press `Enter`.</span></span> 

    ```azurecli-interactive
    az role assignment create \
      --assignee UserA@azure.com \
      --role "Classic Network Contributor" \
      --scope /subscriptions/<SubscriptionB-Id>/resourceGroups/Default-Networking/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB
    ```

    <span data-ttu-id="cfc62-230">Durante la creazione della rete virtuale con distribuzione classica nel passaggio 4, Azure crea la rete virtuale nel gruppo di risorse *Default-Networking*.</span><span class="sxs-lookup"><span data-stu-id="cfc62-230">When you created the virtual network (classic) in step 4, Azure created the virtual network in the *Default-Networking* resource group.</span></span>
7. <span data-ttu-id="cfc62-231">Disconnettere UserB da Azure e accedere come a UserA nell'interfaccia della riga di comando 2.0.</span><span class="sxs-lookup"><span data-stu-id="cfc62-231">Log UserB out of Azure and log in as UserA in the CLI 2.0.</span></span>
8. <span data-ttu-id="cfc62-232">Creare un gruppo di risorse e una rete virtuale con Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cfc62-232">Create a resource group and a virtual network (Resource Manager).</span></span> <span data-ttu-id="cfc62-233">Copiare lo script seguente, incollarlo nella sessione dell'interfaccia della riga di comando e quindi premere `Enter`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-233">Copy the following script, paste it in to your CLI session, and then press `Enter`.</span></span> 

    ```azurecli-interactive
    #!/bin/bash

    # Variables for common values used throughout the script.
    rgName="myResourceGroupA"
    location="eastus"

    # Create a resource group.
    az group create \
      --name $rgName \
      --location $location

    # Create virtual network A (Resource Manager).
    az network vnet create \
      --name myVnetA \
      --resource-group $rgName \
      --location $location \
      --address-prefix 10.0.0.0/16

    # Get the id for myVnetA.
    vNetAId=$(az network vnet show \
      --resource-group $rgName \
      --name myVnetA \
      --query id --out tsv)

    # Assign UserB permissions to myVnetA.
    az role assignment create \
      --assignee UserB@azure.com \
      --role "Network Contributor" \
      --scope $vNetAId
    ```

9. <span data-ttu-id="cfc62-234">Creare un peering di rete virtuale tra due reti virtuali create con modelli di distribuzione diversi.</span><span class="sxs-lookup"><span data-stu-id="cfc62-234">Create a virtual network peering between the two virtual networks created through the different deployment models.</span></span> <span data-ttu-id="cfc62-235">Copiare lo script seguente in un editor di testo nel PC.</span><span class="sxs-lookup"><span data-stu-id="cfc62-235">Copy the following script to a text editor on your PC.</span></span> <span data-ttu-id="cfc62-236">Sostituire `<SubscriptionB-id>` con l'ID della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-236">Replace `<SubscriptionB-id>` with your subscription Id.</span></span> <span data-ttu-id="cfc62-237">Se l'ID della sottoscrizione non è noto, immettere il comando `az account show`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-237">If you don't know your subscription Id, enter the `az account show` command.</span></span> <span data-ttu-id="cfc62-238">Il valore per **id** nell'output è l'ID della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-238">The value for **id** in the output is your subscription Id.</span></span> <span data-ttu-id="cfc62-239">Azure ha creato la rete virtuale con distribuzione classica creata nel passaggio 4 in un gruppo di risorse denominato *Default-Networking*.</span><span class="sxs-lookup"><span data-stu-id="cfc62-239">Azure created the virtual network (classic) you created in step 4 in a resource group named *Default-Networking*.</span></span> <span data-ttu-id="cfc62-240">Incollare lo script modificato nella sessione dell'interfaccia della riga di comando e quindi premere `Enter`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-240">Paste the modified script in your CLI session, and then press `Enter`.</span></span>

    ```azurecli-interactive
    # Peer VNet1 to VNet2.
    az network vnet peering create \
      --name myVnetAToMyVnetB \
      --resource-group $rgName \
      --vnet-name myVnetA \
      --remote-vnet-id  /subscriptions/<SubscriptionB-id>/resourceGroups/Default-Networking/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB \
      --allow-vnet-access
    ```

10. <span data-ttu-id="cfc62-241">Dopo aver eseguito lo script, rivedere i peering di ciascuna rete virtuale creata con Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="cfc62-241">After the script executes, review the peering for the virtual network (Resource Manager).</span></span> <span data-ttu-id="cfc62-242">Copiare lo script seguente e incollarlo nella sessione dell'interfaccia della riga di comando:</span><span class="sxs-lookup"><span data-stu-id="cfc62-242">Copy the following script, and then paste it in your CLI session:</span></span>

    ```azurecli-interactive
    az network vnet peering list \
      --resource-group $rgName \
      --vnet-name myVnetA \
      --output table
    ```
    <span data-ttu-id="cfc62-243">L'output mostra **Connesso** nella colonna **PeeringState**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-243">The output shows **Connected** in the **PeeringState** column.</span></span>

    <span data-ttu-id="cfc62-244">Tutte le risorse di Azure create in una delle reti virtuali possono ora comunicare tra loro tramite i relativi indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="cfc62-244">Any Azure resources you create in either virtual network are now able to communicate with each other through their IP addresses.</span></span> <span data-ttu-id="cfc62-245">Se si usa la risoluzione dei nomi di Azure predefinita per le reti virtuali, le risorse contenute nelle reti virtuali non sono in grado di risolvere i nomi tra le reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="cfc62-245">If you're using default Azure name resolution for the virtual networks, the resources in the virtual networks are not able to resolve names across the virtual networks.</span></span> <span data-ttu-id="cfc62-246">Se si intende risolvere i nomi tra le reti virtuali in peering, è necessario creare un proprio server DNS.</span><span class="sxs-lookup"><span data-stu-id="cfc62-246">If you want to resolve names across virtual networks in a peering, you must create your own DNS server.</span></span> <span data-ttu-id="cfc62-247">Per informazioni sulla configurazione, vedere [Risoluzione dei nomi usando il server DNS](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="cfc62-247">Learn how to set up [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>

11. <span data-ttu-id="cfc62-248">**Facoltativo**: anche se la creazione delle macchine virtuali non è illustrata in questa esercitazione, è possibile creare una macchina virtuale in ogni rete virtuale ed eseguire la connessione da una macchina virtuale all'altra per convalidare la connettività.</span><span class="sxs-lookup"><span data-stu-id="cfc62-248">**Optional**: Though creating virtual machines is not covered in this tutorial, you can create a virtual machine in each virtual network and connect from one virtual machine to the other, to validate connectivity.</span></span>
12. <span data-ttu-id="cfc62-249">**Facoltativo:** per eliminare le risorse create in questa esercitazione, completare la procedura descritta in [Eliminare risorse](#delete-cli) in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-249">**Optional**: To delete the resources that you create in this tutorial, complete the steps in [Delete resources](#delete-cli) in this article.</span></span>

## <span data-ttu-id="cfc62-250"><a name="powershell"></a>Creare un peering - PowerShell</span><span class="sxs-lookup"><span data-stu-id="cfc62-250"><a name="powershell"></a>Create peering - PowerShell</span></span>

<span data-ttu-id="cfc62-251">Questa esercitazione usa account diversi per ogni sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-251">This tutorial uses different accounts for each subscription.</span></span> <span data-ttu-id="cfc62-252">Se si usa un account dotato di autorizzazioni per entrambe le sottoscrizioni, è possibile usare lo stesso account per tutti i passaggi, ignorando i passaggi per la disconnessione da Azure e rimuovendo le righe dello script per la creazione delle assegnazioni dei ruoli utente.</span><span class="sxs-lookup"><span data-stu-id="cfc62-252">If you're using an account that has permissions to both subscriptions, you can use the same account for all steps, skip the steps for logging out of Azure, and remove the lines of script that create user role assignments.</span></span> <span data-ttu-id="cfc62-253">Sostituire UserA@azure.com e UserB@azure.com in tutti gli script seguenti con i nomi utente usati per UserA e UserB.</span><span class="sxs-lookup"><span data-stu-id="cfc62-253">Replace UserA@azure.com and UserB@azure.com in all of the following scripts with the usernames you're using for UserA and UserB.</span></span> 

<span data-ttu-id="cfc62-254">Prima di completare i passaggi seguenti, è necessario eseguire la registrazione per l'anteprima.</span><span class="sxs-lookup"><span data-stu-id="cfc62-254">Before completing any of the following steps, you must register for the preview.</span></span> <span data-ttu-id="cfc62-255">Per eseguire la registrazione per l'anteprima, completare i passaggi nella sezione [Eseguire la registrazione per l'anteprima](#register) di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-255">To register, complete the steps in the [Register for the preview](#register) section of this article.</span></span> <span data-ttu-id="cfc62-256">Non procedere con i passaggi rimanenti fino a quando entrambe le sottoscrizioni non sono state registrate per l'anteprima.</span><span class="sxs-lookup"><span data-stu-id="cfc62-256">Do not continue with the remaining steps until both subscriptions are registered for the preview.</span></span>

1. <span data-ttu-id="cfc62-257">Installare la versione più recente di [Azure](https://www.powershellgallery.com/packages/Azure) PowerShell e i moduli [AzureRm](https://www.powershellgallery.com/packages/AzureRM/).</span><span class="sxs-lookup"><span data-stu-id="cfc62-257">Install the latest version of the PowerShell [Azure](https://www.powershellgallery.com/packages/Azure) and [AzureRm](https://www.powershellgallery.com/packages/AzureRM/) modules.</span></span> <span data-ttu-id="cfc62-258">Se non si ha familiarità con Azure PowerShell, vedere [Azure PowerShell overview](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json) (Panoramica di Azure PowerShell).</span><span class="sxs-lookup"><span data-stu-id="cfc62-258">If you're new to Azure PowerShell, see [Azure PowerShell overview](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>
2. <span data-ttu-id="cfc62-259">Avviare una sessione di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="cfc62-259">Start a PowerShell session.</span></span>
3. <span data-ttu-id="cfc62-260">In PowerShell accedere alla sottoscrizione di UserB come UserB immettendo il comando `Add-AzureAccount`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-260">In PowerShell, log in to UserB's subscription as UserB by entering the `Add-AzureAccount` command.</span></span>
4. <span data-ttu-id="cfc62-261">Per creare una rete virtuale con distribuzione classica con PowerShell, è necessario creare un nuovo file di configurazione di rete o modificarne uno esistente.</span><span class="sxs-lookup"><span data-stu-id="cfc62-261">To create a virtual network (classic) with PowerShell, you must create a new, or modify an existing, network configuration file.</span></span> <span data-ttu-id="cfc62-262">Informazioni su come [esportare, aggiornare e importare il file di configurazione di rete](virtual-networks-using-network-configuration-file.md).</span><span class="sxs-lookup"><span data-stu-id="cfc62-262">Learn how to [export, update, and import network configuration files](virtual-networks-using-network-configuration-file.md).</span></span> <span data-ttu-id="cfc62-263">Il file deve includere l'elemento **VirtualNetworkSite** seguente per la rete virtuale usata in questa esercitazione:</span><span class="sxs-lookup"><span data-stu-id="cfc62-263">The file should include the following **VirtualNetworkSite** element for the virtual network used in this tutorial:</span></span>

    ```xml
    <VirtualNetworkSite name="myVnetB" Location="East US">
      <AddressSpace>
        <AddressPrefix>10.1.0.0/16</AddressPrefix>
      </AddressSpace>
      <Subnets>
        <Subnet name="default">
          <AddressPrefix>10.1.0.0/24</AddressPrefix>
        </Subnet>
      </Subnets>
    </VirtualNetworkSite>
    ```

    > [!WARNING]
    > <span data-ttu-id="cfc62-264">L'importazione di un file di configurazione di rete modificato può modificare le reti virtuali esistenti create con distribuzione classica nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-264">Importing a changed network configuration file can cause changes to existing virtual networks (classic) in your subscription.</span></span> <span data-ttu-id="cfc62-265">Assicurarsi di aggiungere solo la rete virtuale precedente e di non modificare o rimuovere le reti virtuali esistenti dalla sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-265">Ensure you only add the previous virtual network and that you don't change or remove any existing virtual networks from your subscription.</span></span> 

5. <span data-ttu-id="cfc62-266">Accedere alla sottoscrizione di UserB come UserB per usare i comandi di Resource Manager immettendo il comando `login-azurermaccount`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-266">Log in to UserB's subscription as UserB to use Resource Manager commands by entering the `login-azurermaccount` command.</span></span>
6. <span data-ttu-id="cfc62-267">Assegnare le autorizzazioni utente di UserA alla rete virtuale B. Copiare lo script seguente in un editor di testo nel PC e sostituire `<SubscriptionB-id>` con l'ID della sottoscrizione B. Se non si conosce l'ID della sottoscrizione, immettere il comando `Get-AzureRmSubscription` per visualizzarlo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-267">Assign UserA permissions to virtual network B. Copy the following script to a text editor on your PC and replace `<SubscriptionB-id>` with the ID of subscription B. If you don't know the subscription Id, enter the `Get-AzureRmSubscription` command to view it.</span></span> <span data-ttu-id="cfc62-268">Il valore di **Id** nell'output restituito è l'ID della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-268">The value for **Id** in the returned output is your subscription ID.</span></span> <span data-ttu-id="cfc62-269">Azure ha creato la rete virtuale con distribuzione classica creata nel passaggio 4 in un gruppo di risorse denominato *Default-Networking*.</span><span class="sxs-lookup"><span data-stu-id="cfc62-269">Azure created the virtual network (classic) you created in step 4 in a resource group named *Default-Networking*.</span></span> <span data-ttu-id="cfc62-270">Per eseguire lo script, copiare lo script modificato, incollarlo in PowerShell e quindi premere `Enter`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-270">To execute the script, copy the modified script, paste it in to PowerShell, and then press `Enter`.</span></span>
    
    ```powershell 
    New-AzureRmRoleAssignment `
      -SignInName UserA@azure.com `
      -RoleDefinitionName "Classic Network Contributor" `
      -Scope /subscriptions/<SubscriptionB-id>/resourceGroups/Default-Networking/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB
    ```

7. <span data-ttu-id="cfc62-271">Disconnettersi da Azure come UserB e accedere alla sottoscrizione di UserA come UserA immettendo il comando `login-azurermaccount`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-271">Log out of Azure as UserB and log in to UserA's subscription as UserA by entering the `login-azurermaccount` command.</span></span> <span data-ttu-id="cfc62-272">L'account con cui si esegue l'accesso deve avere le autorizzazioni necessarie per la creazione di un peering di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="cfc62-272">The account you log in with must have the necessary permissions to create a virtual network peering.</span></span> <span data-ttu-id="cfc62-273">Vedere la sezione [Autorizzazioni](#permissions) di questo articolo per informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="cfc62-273">See the [Permissions](#permissions) section of this article for details.</span></span>
8. <span data-ttu-id="cfc62-274">Per creare la rete virtuale con Resource Manager copiare lo script seguente, incollarlo in PowerShell e premere `Enter`:</span><span class="sxs-lookup"><span data-stu-id="cfc62-274">Create the virtual network (Resource Manager) by copying the following script, pasting it in to PowerShell, and then pressing `Enter`:</span></span>

    ```powershell
    # Variables for common values
      $rgName='MyResourceGroupA'
      $location='eastus'

    # Create a resource group.
    New-AzureRmResourceGroup `
      -Name $rgName `
      -Location $location

    # Create virtual network A.
    $vnetA = New-AzureRmVirtualNetwork `
      -ResourceGroupName $rgName `
      -Name 'myVnetA' `
      -AddressPrefix '10.0.0.0/16' `
      -Location $location
    ```

9. <span data-ttu-id="cfc62-275">Assegnare le autorizzazioni di UserB a myVnetA.</span><span class="sxs-lookup"><span data-stu-id="cfc62-275">Assign UserB permissions to myVnetA.</span></span> <span data-ttu-id="cfc62-276">Copiare lo script seguente in un editor di testo nel PC e sostituire `<SubscriptionA-Id>` con l'ID della sottoscrizione A. Se non si conosce l'ID della sottoscrizione, immettere il comando `Get-AzureRmSubscription` per visualizzarlo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-276">Copy the following script to a text editor on your PC and replace `<SubscriptionA-Id>` with the ID of subscription A. If you don't know the subscription Id, enter the `Get-AzureRmSubscription` command to view it.</span></span> <span data-ttu-id="cfc62-277">Il valore di **Id** nell'output restituito è l'ID della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-277">The value for **Id** in the returned output is your subscription ID.</span></span> <span data-ttu-id="cfc62-278">Incollare la versione modificata dello script in PowerShell e quindi premere `Enter` per eseguirla.</span><span class="sxs-lookup"><span data-stu-id="cfc62-278">Paste the modified version of the script in PowerShell, and then press `Enter` to execute it.</span></span>

    ```powershell
    New-AzureRmRoleAssignment `
      -SignInName UserB@azure.com `
      -RoleDefinitionName "Network Contributor" `
      -Scope /subscriptions/<SubscriptionA-Id>/resourceGroups/myResourceGroupA/providers/Microsoft.Network/VirtualNetworks/myVnetA
    ```

10. <span data-ttu-id="cfc62-279">Copiare lo script seguente in un editor di testo nel PC, sostituire `<SubscriptionB-id>` con l'ID della sottoscrizione B. Per eseguire il peering di myVnetA a myVnetB copiare lo script modificato, incollarlo in PowerShell e premere `Enter`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-279">Copy the following script to a text editor on your PC, and replace `<SubscriptionB-id>` with the ID of subscription B. To peer myVnetA to myVNetB, copy the modified script, paste it in to PowerShell, and then press `Enter`.</span></span>

    ```powershell
    Add-AzureRmVirtualNetworkPeering `
      -Name 'myVnetAToMyVnetB' `
      -VirtualNetwork $vnetA `
      -RemoteVirtualNetworkId /subscriptions/<SubscriptionB-id>/resourceGroups/Default-Networking/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB
    ```

11. <span data-ttu-id="cfc62-280">Per visualizzare lo stato del peering di myVnetA copiare lo script seguente, incollarlo in PowerShell e premere `Enter`.</span><span class="sxs-lookup"><span data-stu-id="cfc62-280">View the peering state of myVnetA by copying the following script, pasting it into PowerShell, and pressing `Enter`.</span></span>

    ```powershell
    Get-AzureRmVirtualNetworkPeering `
      -ResourceGroupName $rgName `
      -VirtualNetworkName myVnetA `
      | Format-Table VirtualNetworkName, PeeringState
    ```

    <span data-ttu-id="cfc62-281">Lo stato è **Connesso**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-281">The state is **Connected**.</span></span> <span data-ttu-id="cfc62-282">Viene modificato in **Connesso** dopo la configurazione del peering a myVnetA da myVnetB.</span><span class="sxs-lookup"><span data-stu-id="cfc62-282">It changes to **Connected** once you setup the peering to myVnetA from myVnetB.</span></span>

    <span data-ttu-id="cfc62-283">Tutte le risorse di Azure create in una delle reti virtuali possono ora comunicare tra loro tramite i relativi indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="cfc62-283">Any Azure resources you create in either virtual network are now able to communicate with each other through their IP addresses.</span></span> <span data-ttu-id="cfc62-284">Se si usa la risoluzione dei nomi di Azure predefinita per le reti virtuali, le risorse contenute nelle reti virtuali non sono in grado di risolvere i nomi tra le reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="cfc62-284">If you're using default Azure name resolution for the virtual networks, the resources in the virtual networks are not able to resolve names across the virtual networks.</span></span> <span data-ttu-id="cfc62-285">Se si intende risolvere i nomi tra le reti virtuali in peering, è necessario creare un proprio server DNS.</span><span class="sxs-lookup"><span data-stu-id="cfc62-285">If you want to resolve names across virtual networks in a peering, you must create your own DNS server.</span></span> <span data-ttu-id="cfc62-286">Per informazioni sulla configurazione, vedere [Risoluzione dei nomi usando il server DNS](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="cfc62-286">Learn how to set up [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>

12. <span data-ttu-id="cfc62-287">**Facoltativo**: anche se la creazione delle macchine virtuali non è illustrata in questa esercitazione, è possibile creare una macchina virtuale in ogni rete virtuale ed eseguire la connessione da una macchina virtuale all'altra per convalidare la connettività.</span><span class="sxs-lookup"><span data-stu-id="cfc62-287">**Optional**: Though creating virtual machines is not covered in this tutorial, you can create a virtual machine in each virtual network and connect from one virtual machine to the other, to validate connectivity.</span></span>
13. <span data-ttu-id="cfc62-288">**Facoltativo:** per eliminare le risorse create in questa esercitazione, completare la procedura descritta in [Eliminare risorse](#delete-powershell) in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-288">**Optional**: To delete the resources that you create in this tutorial, complete the steps in [Delete resources](#delete-powershell) in this article.</span></span>

## <span data-ttu-id="cfc62-289"><a name="permissions"></a>Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="cfc62-289"><a name="permissions"></a>Permissions</span></span>

<span data-ttu-id="cfc62-290">Gli account usati per creare un peering di rete virtuale devono disporre del ruolo o delle autorizzazioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="cfc62-290">The accounts you use to create a virtual network peering must have the necessary role or permissions.</span></span> <span data-ttu-id="cfc62-291">Ad esempio, per eseguire il peering di due reti virtuali denominate myVNetA e myVNetB, è necessario assegnare all'account il ruolo minimo o le autorizzazioni minime seguenti per ogni rete virtuale:</span><span class="sxs-lookup"><span data-stu-id="cfc62-291">For example, if you were peering two virtual networks named myVnetA and myVnetB, your account must be assigned the following minimum role or permissions for each virtual network:</span></span>
    
|<span data-ttu-id="cfc62-292">Rete virtuale</span><span class="sxs-lookup"><span data-stu-id="cfc62-292">Virtual network</span></span>|<span data-ttu-id="cfc62-293">Modello di distribuzione</span><span class="sxs-lookup"><span data-stu-id="cfc62-293">Deployment model</span></span>|<span data-ttu-id="cfc62-294">Ruolo</span><span class="sxs-lookup"><span data-stu-id="cfc62-294">Role</span></span>|<span data-ttu-id="cfc62-295">Autorizzazioni</span><span class="sxs-lookup"><span data-stu-id="cfc62-295">Permissions</span></span>|
|---|---|---|---|
|<span data-ttu-id="cfc62-296">myVnetA</span><span class="sxs-lookup"><span data-stu-id="cfc62-296">myVnetA</span></span>|<span data-ttu-id="cfc62-297">Gestione risorse</span><span class="sxs-lookup"><span data-stu-id="cfc62-297">Resource Manager</span></span>|[<span data-ttu-id="cfc62-298">Collaboratore di rete</span><span class="sxs-lookup"><span data-stu-id="cfc62-298">Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)|<span data-ttu-id="cfc62-299">Microsoft.Network/virtualNetworks/virtualNetworkPeerings/write</span><span class="sxs-lookup"><span data-stu-id="cfc62-299">Microsoft.Network/virtualNetworks/virtualNetworkPeerings/write</span></span>|
| |<span data-ttu-id="cfc62-300">Classico</span><span class="sxs-lookup"><span data-stu-id="cfc62-300">Classic</span></span>|[<span data-ttu-id="cfc62-301">Collaboratore reti virtuali classiche</span><span class="sxs-lookup"><span data-stu-id="cfc62-301">Classic Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#classic-network-contributor)|<span data-ttu-id="cfc62-302">N/D</span><span class="sxs-lookup"><span data-stu-id="cfc62-302">N/A</span></span>|
|<span data-ttu-id="cfc62-303">myVnetB</span><span class="sxs-lookup"><span data-stu-id="cfc62-303">myVnetB</span></span>|<span data-ttu-id="cfc62-304">Gestione risorse</span><span class="sxs-lookup"><span data-stu-id="cfc62-304">Resource Manager</span></span>|[<span data-ttu-id="cfc62-305">Collaboratore di rete</span><span class="sxs-lookup"><span data-stu-id="cfc62-305">Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)|<span data-ttu-id="cfc62-306">Microsoft.Network/virtualNetworks/peer</span><span class="sxs-lookup"><span data-stu-id="cfc62-306">Microsoft.Network/virtualNetworks/peer</span></span>|
||<span data-ttu-id="cfc62-307">Classico</span><span class="sxs-lookup"><span data-stu-id="cfc62-307">Classic</span></span>|[<span data-ttu-id="cfc62-308">Collaboratore reti virtuali classiche</span><span class="sxs-lookup"><span data-stu-id="cfc62-308">Classic Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#classic-network-contributor)|<span data-ttu-id="cfc62-309">Microsoft.ClassicNetwork/virtualNetworks/peer</span><span class="sxs-lookup"><span data-stu-id="cfc62-309">Microsoft.ClassicNetwork/virtualNetworks/peer</span></span>|

<span data-ttu-id="cfc62-310">Altre informazioni sui [ruoli predefiniti](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) e sull'assegnazione di autorizzazioni specifiche ai [ruoli personalizzati](../active-directory/role-based-access-control-custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (solo Resource Manager).</span><span class="sxs-lookup"><span data-stu-id="cfc62-310">Learn more about [built-in roles](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) and assigning specific permissions to [custom roles](../active-directory/role-based-access-control-custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Resource Manager only).</span></span>

## <span data-ttu-id="cfc62-311"><a name="delete"></a>Eliminare risorse</span><span class="sxs-lookup"><span data-stu-id="cfc62-311"><a name="delete"></a>Delete resources</span></span>
<span data-ttu-id="cfc62-312">Al termine di questa esercitazione, è necessario eliminare le risorse create, per non incorrere in costi di utilizzo.</span><span class="sxs-lookup"><span data-stu-id="cfc62-312">When you've finished this tutorial, you might want to delete the resources you created in the tutorial, so you don't incur usage charges.</span></span> <span data-ttu-id="cfc62-313">Se si elimina un gruppo di risorse, vengono eliminate anche tutte le risorse all'interno di esso.</span><span class="sxs-lookup"><span data-stu-id="cfc62-313">Deleting a resource group also deletes all resources that are in the resource group.</span></span>

### <span data-ttu-id="cfc62-314"><a name="delete-portal"></a>Portale di Azure</span><span class="sxs-lookup"><span data-stu-id="cfc62-314"><a name="delete-portal"></a>Azure portal</span></span>

1. <span data-ttu-id="cfc62-315">Nella casella di ricerca del portale immettere **myResourceGroupA**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-315">In the portal search box, enter **myResourceGroupA**.</span></span> <span data-ttu-id="cfc62-316">Nei risultati della ricerca fare clic su **myResourceGroupA**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-316">In the search results, click **myResourceGroupA**.</span></span>
2. <span data-ttu-id="cfc62-317">Nel pannello **myResourceGroupA** fare clic sull'icona **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-317">On the **myResourceGroupA** blade, click the **Delete** icon.</span></span>
3. <span data-ttu-id="cfc62-318">Per confermare l'eliminazione, nella casella **DIGITARE IL NOME DEL GRUPPO DI RISORSE** immettere **myResourceGroupA** e quindi fare clic su **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-318">To confirm the deletion, in the **TYPE THE RESOURCE GROUP NAME** box, enter **myResourceGroupA**, and then click **Delete**.</span></span>
4. <span data-ttu-id="cfc62-319">Nella casella **Cerca risorse** nella parte superiore del portale digitare *myVnetB*.</span><span class="sxs-lookup"><span data-stu-id="cfc62-319">In the **Search resources** box at the top of the portal, type *myVnetB*.</span></span> <span data-ttu-id="cfc62-320">Fare clic su **myVnetB** quando viene visualizzato nei risultati della ricerca.</span><span class="sxs-lookup"><span data-stu-id="cfc62-320">Click **myVnetB** when it appears in the search results.</span></span> <span data-ttu-id="cfc62-321">Viene visualizzato un pannello per la rete virtuale **myVnetB**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-321">A blade appears for the **myVnetB** virtual network.</span></span>
5. <span data-ttu-id="cfc62-322">Nel pannello **myVnetB** fare clic su **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-322">In the **myVnetB** blade, click **Delete**.</span></span>
6. <span data-ttu-id="cfc62-323">Per confermare l'eliminazione, nella casella **Elimina rete virtuale** fare clic su **Sì**.</span><span class="sxs-lookup"><span data-stu-id="cfc62-323">To confirm the deletion, click **Yes** in the **Delete virtual network** box.</span></span>

### <span data-ttu-id="cfc62-324"><a name="delete-cli"></a></span><span class="sxs-lookup"><span data-stu-id="cfc62-324"><a name="delete-cli"></a>Azure CLI</span></span>

1. <span data-ttu-id="cfc62-325">Accedere ad Azure tramite l'interfaccia della riga di comando di Azure 2.0 per eliminare la rete virtuale creata con Resource Manager con il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="cfc62-325">Log in to Azure using the CLI 2.0 to delete the virtual network (Resource Manager) with the following command:</span></span>

    ```azurecli-interactive
    az group delete --name myResourceGroupA --yes
    ```

2. <span data-ttu-id="cfc62-326">Accedere ad Azure tramite l'interfaccia della riga di comando di Azure 1.0 per eliminare la rete virtuale creata con distribuzione classica con il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="cfc62-326">Log in to Azure using the Azure CLI 1.0 to delete the virtual network (classic) with the following commands:</span></span>

    ```azurecli
    azure config mode asm 

    azure network vnet delete --vnet myVnetB --quiet
    ```

### <span data-ttu-id="cfc62-327"><a name="delete-powershell"></a>PowerShell</span><span class="sxs-lookup"><span data-stu-id="cfc62-327"><a name="delete-powershell"></a>PowerShell</span></span>

1. <span data-ttu-id="cfc62-328">Al prompt dei comandi di PowerShell immettere il comando seguente per eliminare la rete virtuale creata con Resource Manager:</span><span class="sxs-lookup"><span data-stu-id="cfc62-328">At the PowerShell command prompt, enter the following command to delete the virtual network (Resource Manager):</span></span>

    ```powershell
    Remove-AzureRmResourceGroup -Name myResourceGroupA -Force
    ```

2. <span data-ttu-id="cfc62-329">Per eliminare una rete virtuale creata con distribuzione classica con PowerShell, è necessario modificare un file di configurazione di rete esistente.</span><span class="sxs-lookup"><span data-stu-id="cfc62-329">To delete the virtual network (classic) with PowerShell, you must modify an existing network configuration file.</span></span> <span data-ttu-id="cfc62-330">Informazioni su come [esportare, aggiornare e importare il file di configurazione di rete](virtual-networks-using-network-configuration-file.md).</span><span class="sxs-lookup"><span data-stu-id="cfc62-330">Learn how to [export, update, and import network configuration files](virtual-networks-using-network-configuration-file.md).</span></span> <span data-ttu-id="cfc62-331">Rimuovere l'elemento VirtualNetworkSite seguente dalla rete virtuale usata in questa esercitazione:</span><span class="sxs-lookup"><span data-stu-id="cfc62-331">Remove the following VirtualNetworkSite element for the virtual network used in this tutorial:</span></span>

    ```xml
    <VirtualNetworkSite name="myVnetB" Location="East US">
      <AddressSpace>
        <AddressPrefix>10.1.0.0/16</AddressPrefix>
      </AddressSpace>
      <Subnets>
        <Subnet name="default">
          <AddressPrefix>10.1.0.0/24</AddressPrefix>
        </Subnet>
      </Subnets>
    </VirtualNetworkSite>
    ```

    > [!WARNING]
    > <span data-ttu-id="cfc62-332">L'importazione di un file di configurazione di rete modificato può modificare le reti virtuali esistenti create con distribuzione classica nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-332">Importing a changed network configuration file can cause changes to existing virtual networks (classic) in your subscription.</span></span> <span data-ttu-id="cfc62-333">Assicurarsi di rimuovere solo la rete virtuale precedente e di non modificare o rimuovere altre reti virtuali esistenti dalla sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-333">Ensure you only remove the previous virtual network and that you don't change or remove any other existing virtual networks from your subscription.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="cfc62-334">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="cfc62-334">Next steps</span></span>

- <span data-ttu-id="cfc62-335">Acquisire familiarità con importanti [vincoli e comportamenti del peering di rete virtuale](virtual-network-manage-peering.md#requirements-and-constraints) prima di creare un peering di rete virtuale per l'uso in produzione.</span><span class="sxs-lookup"><span data-stu-id="cfc62-335">Thoroughly familiarize yourself with important [virtual network peering constraints and behaviors](virtual-network-manage-peering.md#requirements-and-constraints) before creating a virtual network peering for production use.</span></span>
- <span data-ttu-id="cfc62-336">Acquisire informazioni più dettagliate su tutte le [impostazioni per il peering di rete virtuale](virtual-network-manage-peering.md#create-a-peering).</span><span class="sxs-lookup"><span data-stu-id="cfc62-336">Learn about all [virtual network peering settings](virtual-network-manage-peering.md#create-a-peering).</span></span>
- <span data-ttu-id="cfc62-337">Acquisire informazioni su come [Creare una topologia di rete hub-spoke](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?toc=%2fazure%2fvirtual-network%2ftoc.json#vnet-peering) con il peering di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="cfc62-337">Learn how to [create a hub and spoke network topology](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?toc=%2fazure%2fvirtual-network%2ftoc.json#vnet-peering) with virtual network peering.</span></span>