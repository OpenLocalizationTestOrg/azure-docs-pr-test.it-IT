---
title: Registrazione dell'insieme di credenziali delle chiavi di Azure| Documentazione Microsoft
description: Usare questa esercitazione per un'introduzione alla registrazione dell'insieme di credenziali delle chiavi di Azure.
services: key-vault
documentationcenter: 
author: cabailey
manager: mbaldwin
tags: azure-resource-manager
ms.assetid: 43f96a2b-3af8-4adc-9344-bc6041fface8
ms.service: key-vault
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 07/19/2017
ms.author: cabailey
ms.openlocfilehash: e9a4f16f048833dab49f7db79892fe47a5aeff37
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="azure-key-vault-logging"></a><span data-ttu-id="fc864-103">Registrazione dell'insieme di credenziali delle chiavi di Azure</span><span class="sxs-lookup"><span data-stu-id="fc864-103">Azure Key Vault Logging</span></span>
<span data-ttu-id="fc864-104">L'insieme di credenziali delle chiavi di Azure è disponibile nella maggior parte delle aree.</span><span class="sxs-lookup"><span data-stu-id="fc864-104">Azure Key Vault is available in most regions.</span></span> <span data-ttu-id="fc864-105">Per altre informazioni, vedere la [pagina Insieme di credenziali delle chiavi - Prezzi](https://azure.microsoft.com/pricing/details/key-vault/).</span><span class="sxs-lookup"><span data-stu-id="fc864-105">For more information, see the [Key Vault pricing page](https://azure.microsoft.com/pricing/details/key-vault/).</span></span>

## <a name="introduction"></a><span data-ttu-id="fc864-106">Introduzione</span><span class="sxs-lookup"><span data-stu-id="fc864-106">Introduction</span></span>
<span data-ttu-id="fc864-107">Dopo aver creato una o più credenziali delle chiavi, può essere utile monitorare come, quando e da chi vengono usate.</span><span class="sxs-lookup"><span data-stu-id="fc864-107">After you have created one or more key vaults, you will likely want to monitor how and when your key vaults are accessed, and by whom.</span></span> <span data-ttu-id="fc864-108">A questo scopo è possibile abilitare la registrazione per l'insieme di credenziali delle chiavi, che salva le informazioni in un account di archiviazione di Azure specificato.</span><span class="sxs-lookup"><span data-stu-id="fc864-108">You can do this by enabling logging for Key Vault, which saves information in an Azure storage account that you provide.</span></span> <span data-ttu-id="fc864-109">Per tale account di archiviazione viene creato automaticamente un contenitore denominato **insights-log-auditevent** , che può essere usato per raccogliere i log relativi a più insiemi di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="fc864-109">A new container named **insights-logs-auditevent** is automatically created for your specified storage account, and you can use this same storage account for collecting logs for multiple key vaults.</span></span>

<span data-ttu-id="fc864-110">È possibile accedere alle informazioni di registrazione dopo un massimo di 10 minuti dall'operazione sull'insieme di credenziali delle chiavi,</span><span class="sxs-lookup"><span data-stu-id="fc864-110">You can access your logging information at most, 10 minutes after the key vault operation.</span></span> <span data-ttu-id="fc864-111">ma nella maggior parte dei casi si potrà farlo prima.</span><span class="sxs-lookup"><span data-stu-id="fc864-111">In most cases, it will be quicker than this.</span></span>  <span data-ttu-id="fc864-112">La gestione dei log nell'account di archiviazione è compito dell'utente:</span><span class="sxs-lookup"><span data-stu-id="fc864-112">It's up to you to manage your logs in your storage account:</span></span>

* <span data-ttu-id="fc864-113">Usare i metodi di controllo di accesso standard di Azure per proteggere i log limitando l'accesso agli utenti specificati.</span><span class="sxs-lookup"><span data-stu-id="fc864-113">Use standard Azure access control methods to secure your logs by restricting who can access them.</span></span>
* <span data-ttu-id="fc864-114">Eliminare i log che non è più necessario mantenere nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="fc864-114">Delete logs that you no longer want to keep in your storage account.</span></span>

<span data-ttu-id="fc864-115">Usare questa esercitazione per un'introduzione all'uso della registrazione dell'insieme di credenziali delle chiavi di Azure, per creare l'account di archiviazione, abilitare la registrazione e interpretare le informazioni di registrazione raccolte.</span><span class="sxs-lookup"><span data-stu-id="fc864-115">Use this tutorial to help you get started with Azure Key Vault logging, to create your storage account, enable logging, and interpret the logging information collected.</span></span>  

> [!NOTE]
> <span data-ttu-id="fc864-116">Questa esercitazione non include istruzioni per la creazione di insiemi di credenziali delle chiavi, chiavi o segreti.</span><span class="sxs-lookup"><span data-stu-id="fc864-116">This tutorial does not include instructions for how to create key vaults, keys, or secrets.</span></span> <span data-ttu-id="fc864-117">Per altre informazioni, vedere [Introduzione all'insieme di credenziali delle chiavi di Azure](key-vault-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="fc864-117">For this information, see [Get started with Azure Key Vault](key-vault-get-started.md).</span></span> <span data-ttu-id="fc864-118">In alternativa, per le istruzioni relative all'interfaccia della riga di comando multipiattaforma, vedere [questa esercitazione equivalente](key-vault-manage-with-cli2.md).</span><span class="sxs-lookup"><span data-stu-id="fc864-118">Or, for Cross-Platform Command-Line Interface instructions, see [this equivalent tutorial](key-vault-manage-with-cli2.md).</span></span>
>
> <span data-ttu-id="fc864-119">Attualmente non è possibile configurare l'insieme di credenziali delle chiavi di Azure nel portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="fc864-119">Currently, you cannot configure Azure Key Vault in the Azure portal.</span></span> <span data-ttu-id="fc864-120">Usare invece queste istruzioni per Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="fc864-120">Instead, use these Azure PowerShell instructions.</span></span>
>
>

<span data-ttu-id="fc864-121">Per informazioni generali sull'insieme di credenziali di Azure, vedere [Cos'è l'insieme di credenziali chiave di Azure?](key-vault-whatis.md)</span><span class="sxs-lookup"><span data-stu-id="fc864-121">For overview information about Azure Key Vault, see [What is Azure Key Vault?](key-vault-whatis.md)</span></span>

## <a name="prerequisites"></a><span data-ttu-id="fc864-122">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="fc864-122">Prerequisites</span></span>
<span data-ttu-id="fc864-123">Per completare l'esercitazione, sono necessari gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="fc864-123">To complete this tutorial, you must have the following:</span></span>

* <span data-ttu-id="fc864-124">Insieme di credenziali delle chiavi esistente e già in uso.</span><span class="sxs-lookup"><span data-stu-id="fc864-124">An existing key vault that you have been using.</span></span>  
* <span data-ttu-id="fc864-125">Azure PowerShell **versione minima 1.0.1**.</span><span class="sxs-lookup"><span data-stu-id="fc864-125">Azure PowerShell, **minimum version of 1.0.1**.</span></span> <span data-ttu-id="fc864-126">Per installare Azure PowerShell e associarlo alla sottoscrizione di Azure, vedere [Come installare e configurare Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="fc864-126">To install Azure PowerShell and associate it with your Azure subscription, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span> <span data-ttu-id="fc864-127">Se Azure PowerShell è già stato installato ma non si conosce la versione, dalla console di Azure PowerShell digitare `(Get-Module azure -ListAvailable).Version`.</span><span class="sxs-lookup"><span data-stu-id="fc864-127">If you have already installed Azure PowerShell and do not know the version, from the Azure PowerShell console, type `(Get-Module azure -ListAvailable).Version`.</span></span>  
* <span data-ttu-id="fc864-128">Spazio di archiviazione sufficiente in Azure per i log dell'insieme di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="fc864-128">Sufficient storage on Azure for your Key Vault logs.</span></span>

## <span data-ttu-id="fc864-129"><a id="connect"></a>Connettersi alle sottoscrizioni</span><span class="sxs-lookup"><span data-stu-id="fc864-129"><a id="connect"></a>Connect to your subscriptions</span></span>
<span data-ttu-id="fc864-130">Avviare una sessione di Azure PowerShell e accedere all'account Azure con il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="fc864-130">Start an Azure PowerShell session and sign in to your Azure account with the following command:</span></span>  

    Login-AzureRmAccount

<span data-ttu-id="fc864-131">Nella finestra del browser a comparsa, immettere il nome utente e la password dell'account Azure.</span><span class="sxs-lookup"><span data-stu-id="fc864-131">In the pop-up browser window, enter your Azure account user name and password.</span></span> <span data-ttu-id="fc864-132">Azure PowerShell recupera tutte le sottoscrizioni associate a questo account e, per impostazione predefinita, usa la prima.</span><span class="sxs-lookup"><span data-stu-id="fc864-132">Azure PowerShell will get all the subscriptions that are associated with this account and by default, uses the first one.</span></span>

<span data-ttu-id="fc864-133">Se sono disponibili più sottoscrizioni, potrebbe essere necessario indicarne una specifica usata per creare l'insieme di credenziali delle chiavi di Azure.</span><span class="sxs-lookup"><span data-stu-id="fc864-133">If you have multiple subscriptions, you might have to specify a specific one that was used to create your Azure Key Vault.</span></span> <span data-ttu-id="fc864-134">Digitare il comando seguente per visualizzare le sottoscrizioni relative all'account:</span><span class="sxs-lookup"><span data-stu-id="fc864-134">Type the following to see the subscriptions for your account:</span></span>

    Get-AzureRmSubscription

<span data-ttu-id="fc864-135">Per specificare quindi la sottoscrizione associata all'insieme di credenziali delle chiavi da registrare, digitare:</span><span class="sxs-lookup"><span data-stu-id="fc864-135">Then, to specify the subscription that's associated with your key vault you will be logging, type:</span></span>

    Set-AzureRmContext -SubscriptionId <subscription ID>

> [!NOTE]
> <span data-ttu-id="fc864-136">Si tratta di un passaggio importante e risulta particolarmente utile se si hanno più sottoscrizioni associate all'account.</span><span class="sxs-lookup"><span data-stu-id="fc864-136">This is an important step and especially helpful if you have multiple subscriptions associated with your account.</span></span> <span data-ttu-id="fc864-137">Se questo passaggio viene ignorato potrebbe essere visualizzato un messaggio di errore che chiede di eseguire la registrazione di Microsoft.Insights.</span><span class="sxs-lookup"><span data-stu-id="fc864-137">You may receive an error to register Microsoft.Insights if this step is skipped.</span></span>
>   
>

<span data-ttu-id="fc864-138">Per altre informazioni sulla configurazione di Azure PowerShell, vedere [Come installare e configurare Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="fc864-138">For more information about configuring Azure PowerShell, see  [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

## <span data-ttu-id="fc864-139"><a id="storage"></a>Creare un nuovo account di archiviazione per i log</span><span class="sxs-lookup"><span data-stu-id="fc864-139"><a id="storage"></a>Create a new storage account for your logs</span></span>
<span data-ttu-id="fc864-140">Anche se è possibile usare un account di archiviazione esistente per i log, si creerà un nuovo account di archiviazione dedicato ai log dell'insieme di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="fc864-140">Although you can use an existing storage account for your logs, we'll create a new storage account that will be dedicated to Key Vault logs.</span></span> <span data-ttu-id="fc864-141">Per praticità, si archivieranno i dettagli in una variabile denominata **sa**, in modo che siano disponibili quando sarà necessario specificarli in seguito.</span><span class="sxs-lookup"><span data-stu-id="fc864-141">For convenience for when we have to specify this later, we'll store the details into a variable named **sa**.</span></span>

<span data-ttu-id="fc864-142">Per rendere la gestione ancora più facile, si userà anche lo stesso gruppo di risorse che contiene l'insieme di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="fc864-142">For additional ease of management, we'll also use the same resource group as the one that contains our key vault.</span></span> <span data-ttu-id="fc864-143">Dall' [esercitazione introduttiva](key-vault-get-started.md)questo gruppo di risorse è denominato **ContosoResourceGroup** e si continuerà a usare l'area geografica East Asia.</span><span class="sxs-lookup"><span data-stu-id="fc864-143">From the [getting started tutorial](key-vault-get-started.md), this resource group is named **ContosoResourceGroup** and we'll continue to use the East Asia location.</span></span> <span data-ttu-id="fc864-144">Sostituire questi valori con i propri, a seconda dei casi:</span><span class="sxs-lookup"><span data-stu-id="fc864-144">Substitute these values for your own, as applicable:</span></span>

    $sa = New-AzureRmStorageAccount -ResourceGroupName ContosoResourceGroup -Name contosokeyvaultlogs -Type Standard_LRS -Location 'East Asia'


> [!NOTE]
> <span data-ttu-id="fc864-145">Se si sceglie di usare un account di archiviazione esistente, questo dovrà usare la stessa sottoscrizione dell'insieme di credenziali delle chiavi e il modello di distribuzione Resource Manager, anziché il modello di distribuzione classica.</span><span class="sxs-lookup"><span data-stu-id="fc864-145">If you decide to use an existing storage account, it must use the same subscription as your key vault and it must use the Resource Manager deployment model, rather than the Classic deployment model.</span></span>
>
>

## <span data-ttu-id="fc864-146"><a id="identify"></a>Identificare l'insieme di credenziali delle chiavi per i log</span><span class="sxs-lookup"><span data-stu-id="fc864-146"><a id="identify"></a>Identify the key vault for your logs</span></span>
<span data-ttu-id="fc864-147">Nell'esercitazione introduttiva, il nome dell'insieme di credenziali delle chiavi è **ContosoKeyVault**, quindi si continuerà a usarlo e si archivieranno i dettagli in una variabile denominata **kv**:</span><span class="sxs-lookup"><span data-stu-id="fc864-147">In our getting started tutorial, our key vault name was **ContosoKeyVault**, so we'll continue to use that name and store the details into a variable named **kv**:</span></span>

    $kv = Get-AzureRmKeyVault -VaultName 'ContosoKeyVault'


## <span data-ttu-id="fc864-148"><a id="enable"></a>Abilitare la registrazione</span><span class="sxs-lookup"><span data-stu-id="fc864-148"><a id="enable"></a>Enable logging</span></span>
<span data-ttu-id="fc864-149">Per abilitare la registrazione dell'insieme di credenziali delle chiavi, si userà il cmdlet Set-AzureRmDiagnosticSetting e le variabili create per il nuovo account di archiviazione e l'insieme di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="fc864-149">To enable logging for Key Vault, we'll use the Set-AzureRmDiagnosticSetting cmdlet, together with the variables we created for our new storage account and our key vault.</span></span> <span data-ttu-id="fc864-150">Il flag **-Enabled** verrà impostato su **$true** e la categoria su AuditEvent, la sola disponibile per la registrazione dell'insieme di credenziali delle chiavi:</span><span class="sxs-lookup"><span data-stu-id="fc864-150">We'll also set the **-Enabled** flag to **$true** and set the category to AuditEvent (the only category for Key Vault logging), :</span></span>

    Set-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId -StorageAccountId $sa.Id -Enabled $true -Categories AuditEvent

<span data-ttu-id="fc864-151">L'output includerà:</span><span class="sxs-lookup"><span data-stu-id="fc864-151">The output for this includes:</span></span>

    StorageAccountId   : /subscriptions/<subscription-GUID>/resourceGroups/ContosoResourceGroup/providers/Microsoft.Storage/storageAccounts/ContosoKeyVaultLogs
    ServiceBusRuleId   :
    StorageAccountName :
        Logs
        Enabled           : True
        Category          : AuditEvent
        RetentionPolicy
        Enabled : False
        Days    : 0


<span data-ttu-id="fc864-152">Conferma che la registrazione è abilitata per l'insieme di credenziali delle chiavi. Le informazioni vengono salvate nell'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="fc864-152">This confirms that logging is now enabled for your key vault, saving information to your storage account.</span></span>

<span data-ttu-id="fc864-153">Facoltativamente è possibile impostare criteri di conservazione per i log, in modo che i log meno recenti vengano eliminati automaticamente.</span><span class="sxs-lookup"><span data-stu-id="fc864-153">Optionally you can also set retention policy for your logs such that older logs will be automatically deleted.</span></span> <span data-ttu-id="fc864-154">Ad esempio, specificare i criteri di conservazione impostando il flag **-RetentionEnabled** su **$true** e il parametro **-RetentionInDays** su **90** per fare in modo che i log che risalgono a più di 90 giorni prima vengano eliminati automaticamente.</span><span class="sxs-lookup"><span data-stu-id="fc864-154">For example, set retention policy using **-RetentionEnabled** flag to **$true** and set **-RetentionInDays** parameter to **90** so that logs older than 90 days will be automatically deleted.</span></span>

    Set-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId -StorageAccountId $sa.Id -Enabled $true -Categories AuditEvent -RetentionEnabled $true -RetentionInDays 90

<span data-ttu-id="fc864-155">Informazioni registrate:</span><span class="sxs-lookup"><span data-stu-id="fc864-155">What's logged:</span></span>

* <span data-ttu-id="fc864-156">Vengono registrate tutte le richieste API REST autenticate, incluse le richieste non riuscite a causa di autorizzazioni di accesso, errori di sistema o richieste non valide.</span><span class="sxs-lookup"><span data-stu-id="fc864-156">All authenticated REST API requests are logged, which includes failed requests as a result of access permissions, system errors or bad requests.</span></span>
* <span data-ttu-id="fc864-157">Operazioni sull'insieme di credenziali delle chiavi stesso, ad esempio creazione, eliminazione e impostazione di criteri di accesso all'insieme di credenziali delle chiavi, nonché aggiornamento degli attributi dell'insieme di credenziali delle chiavi, quali i tag.</span><span class="sxs-lookup"><span data-stu-id="fc864-157">Operations on the key vault itself, which includes creation, deletion, setting key vault access policies, and updating key vault attributes such as tags.</span></span>
* <span data-ttu-id="fc864-158">Operazioni su chiavi e segreti nell'insieme di credenziali delle chiavi, ad esempio creazione, modifica o eliminazione di chiavi o segreti. Operazioni quali accesso, verifica, crittografia, decrittografia, esecuzione e annullamento del wrapping delle chiavi, recupero di segreti, nonché elenco di chiavi e segreti e delle relative versioni.</span><span class="sxs-lookup"><span data-stu-id="fc864-158">Operations on keys and secrets in the key vault, which includes creating, modifying, or deleting these keys or secrets; operations such as sign, verify, encrypt, decrypt, wrap and unwrap keys, get secrets, list keys and secrets and their versions.</span></span>
* <span data-ttu-id="fc864-159">Richieste non autenticate che generano una risposta 401.</span><span class="sxs-lookup"><span data-stu-id="fc864-159">Unauthenticated requests that result in a 401 response.</span></span> <span data-ttu-id="fc864-160">Ad esempio, richieste che non hanno un token di connessione, hanno un formato non valido, sono scadute o hanno un token non valido.</span><span class="sxs-lookup"><span data-stu-id="fc864-160">For example, requests that do not have a bearer token, or are malformed or expired, or have an invalid token.</span></span>  

## <span data-ttu-id="fc864-161"><a id="access"></a>Accedere ai log</span><span class="sxs-lookup"><span data-stu-id="fc864-161"><a id="access"></a>Access your logs</span></span>
<span data-ttu-id="fc864-162">I log dell'insieme di credenziali delle chiavi vengono archiviati nel contenitore **insights-log-auditevent** nell'account di archiviazione specificato.</span><span class="sxs-lookup"><span data-stu-id="fc864-162">Key vault logs are stored in the **insights-logs-auditevent** container in the storage account you provided.</span></span> <span data-ttu-id="fc864-163">Per elencare tutti i BLOB in questo contenitore, digitare:</span><span class="sxs-lookup"><span data-stu-id="fc864-163">To list all the blobs in this container, type:</span></span>

<span data-ttu-id="fc864-164">Creare prima una variabile per il nome contenitore.</span><span class="sxs-lookup"><span data-stu-id="fc864-164">First, create a variable for the container name.</span></span> <span data-ttu-id="fc864-165">Questa variabile verrà usata nel resto della procedura dettagliata.</span><span class="sxs-lookup"><span data-stu-id="fc864-165">This will be used throughout the rest of the walk through.</span></span>

    $container = 'insights-logs-auditevent'

<span data-ttu-id="fc864-166">Per elencare tutti i BLOB in questo contenitore, digitare:</span><span class="sxs-lookup"><span data-stu-id="fc864-166">To list all the blobs in this container, type:</span></span>

    Get-AzureStorageBlob -Container $container -Context $sa.Context
<span data-ttu-id="fc864-167">L'output sarà simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="fc864-167">The output will look something similar to this:</span></span>

<span data-ttu-id="fc864-168">**Uri contenitore: https://contosokeyvaultlogs.blob.core.windows.net/insights-logs-auditevent**</span><span class="sxs-lookup"><span data-stu-id="fc864-168">**Container Uri: https://contosokeyvaultlogs.blob.core.windows.net/insights-logs-auditevent**</span></span>

<span data-ttu-id="fc864-169">**Nome**</span><span class="sxs-lookup"><span data-stu-id="fc864-169">**Name**</span></span>

- - -
<span data-ttu-id="fc864-170">**resourceId=/SUBSCRIPTIONS/361DA5D4-A47A-4C79-AFDD-XXXXXXXXXXXX/RESOURCEGROUPS/CONTOSORESOURCEGROUP/PROVIDERS/MICROSOFT.KEYVAULT/VAULTS/CONTOSOKEYVAULT/y=2016/m=01/d=05/h=01/m=00/PT1H.json**</span><span class="sxs-lookup"><span data-stu-id="fc864-170">**resourceId=/SUBSCRIPTIONS/361DA5D4-A47A-4C79-AFDD-XXXXXXXXXXXX/RESOURCEGROUPS/CONTOSORESOURCEGROUP/PROVIDERS/MICROSOFT.KEYVAULT/VAULTS/CONTOSOKEYVAULT/y=2016/m=01/d=05/h=01/m=00/PT1H.json**</span></span>

<span data-ttu-id="fc864-171">**resourceId=/SUBSCRIPTIONS/361DA5D4-A47A-4C79-AFDD-XXXXXXXXXXXX/RESOURCEGROUPS/CONTOSORESOURCEGROUP/PROVIDERS/MICROSOFT.KEYVAULT/VAULTS/CONTOSOKEYVAULT/y=2016/m=01/d=04/h=02/m=00/PT1H.json**</span><span class="sxs-lookup"><span data-stu-id="fc864-171">**resourceId=/SUBSCRIPTIONS/361DA5D4-A47A-4C79-AFDD-XXXXXXXXXXXX/RESOURCEGROUPS/CONTOSORESOURCEGROUP/PROVIDERS/MICROSOFT.KEYVAULT/VAULTS/CONTOSOKEYVAULT/y=2016/m=01/d=04/h=02/m=00/PT1H.json**</span></span>

<span data-ttu-id="fc864-172">**resourceId=/SUBSCRIPTIONS/361DA5D4-A47A-4C79-AFDD-XXXXXXXXXXXX/RESOURCEGROUPS/CONTOSORESOURCEGROUP/PROVIDERS/MICROSOFT.KEYVAULT/VAULTS/CONTOSOKEYVAULT/y=2016/m=01/d=04/h=18/m=00/PT1H.json****</span><span class="sxs-lookup"><span data-stu-id="fc864-172">**resourceId=/SUBSCRIPTIONS/361DA5D4-A47A-4C79-AFDD-XXXXXXXXXXXX/RESOURCEGROUPS/CONTOSORESOURCEGROUP/PROVIDERS/MICROSOFT.KEYVAULT/VAULTS/CONTOSOKEYVAULT/y=2016/m=01/d=04/h=18/m=00/PT1H.json****</span></span>

<span data-ttu-id="fc864-173">Come si vede dall'output, i BLOB seguono una convenzione di denominazione: **resourceId=<ARM resource ID>/y=<year>/m=<month>/d=<day of month>/h=<hour>/m=<minute>/nomefile.json**</span><span class="sxs-lookup"><span data-stu-id="fc864-173">As you can see from this output, the blobs follow a naming convention: **resourceId=<ARM resource ID>/y=<year>/m=<month>/d=<day of month>/h=<hour>/m=<minute>/filename.json**</span></span>

<span data-ttu-id="fc864-174">I valori di data e ora sono nel formato UTC.</span><span class="sxs-lookup"><span data-stu-id="fc864-174">The date and time values use UTC.</span></span>

<span data-ttu-id="fc864-175">Poiché si può usare lo stesso account di archiviazione per raccogliere i log per più risorse, l'ID della risorsa completo nel nome del BLOB è molto utile per accedere solo ai BLOB necessari o per scaricarli.</span><span class="sxs-lookup"><span data-stu-id="fc864-175">Because the same storage account can be used to collect logs for multiple resources, the full resource ID in the blob name is very useful to access or download just the blobs that you need.</span></span> <span data-ttu-id="fc864-176">Prima di procedere, si vedrà però come scaricare tutti i BLOB.</span><span class="sxs-lookup"><span data-stu-id="fc864-176">But before we do that, we'll first cover how to download all the blobs.</span></span>

<span data-ttu-id="fc864-177">Creare prima di tutto una cartella per scaricare i BLOB.</span><span class="sxs-lookup"><span data-stu-id="fc864-177">First, create a folder to download the blobs.</span></span> <span data-ttu-id="fc864-178">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="fc864-178">For example:</span></span>

    New-Item -Path 'C:\Users\username\ContosoKeyVaultLogs' -ItemType Directory -Force

<span data-ttu-id="fc864-179">Ottenere quindi un elenco di tutti i BLOB:</span><span class="sxs-lookup"><span data-stu-id="fc864-179">Then get a list of all blobs:</span></span>  

    $blobs = Get-AzureStorageBlob -Container $container -Context $sa.Context

<span data-ttu-id="fc864-180">Inviare l'elenco tramite pipe con 'Get-AzureStorageBlobContent' per scaricare i BLOB nella cartella di destinazione:</span><span class="sxs-lookup"><span data-stu-id="fc864-180">Pipe this list through 'Get-AzureStorageBlobContent' to download the blobs into our destination folder:</span></span>

    $blobs | Get-AzureStorageBlobContent -Destination 'C:\Users\username\ContosoKeyVaultLogs'

<span data-ttu-id="fc864-181">Quando si esegue questo secondo comando, il delimitatore **/** nei nomi dei BLOB crea una struttura di cartelle completa nella cartella di destinazione. Questa struttura verrà usata per scaricare e archiviare i BLOB come file.</span><span class="sxs-lookup"><span data-stu-id="fc864-181">When you run this second command, the **/** delimiter in the blob names create a full folder structure under the destination folder, and this structure will be used to download and store the blobs as files.</span></span>

<span data-ttu-id="fc864-182">Per scaricare BLOB in modo selettivo, usare caratteri jolly.</span><span class="sxs-lookup"><span data-stu-id="fc864-182">To selectively download blobs, use wildcards.</span></span> <span data-ttu-id="fc864-183">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="fc864-183">For example:</span></span>

* <span data-ttu-id="fc864-184">Se sono disponibili più insiemi di credenziali delle chiavi e si vogliono scaricare i log per un solo insieme di credenziali delle chiavi denominato CONTOSOKEYVAULT3, usare:</span><span class="sxs-lookup"><span data-stu-id="fc864-184">If you have multiple key vaults and want to download logs for just one key vault, named CONTOSOKEYVAULT3:</span></span>

        Get-AzureStorageBlob -Container $container -Context $sa.Context -Blob '*/VAULTS/CONTOSOKEYVAULT3
* <span data-ttu-id="fc864-185">Se sono disponibili più gruppi di risorse e si vogliono scaricare i log per un solo gruppo di risorse, usare `-Blob '*/RESOURCEGROUPS/<resource group name>/*'`:</span><span class="sxs-lookup"><span data-stu-id="fc864-185">If you have multiple resource groups and want to download logs for just one resource group, use `-Blob '*/RESOURCEGROUPS/<resource group name>/*'`:</span></span>

        Get-AzureStorageBlob -Container $container -Context $sa.Context -Blob '*/RESOURCEGROUPS/CONTOSORESOURCEGROUP3/*'
* <span data-ttu-id="fc864-186">Per scaricare tutti i log per il mese di gennaio 2016, usare `-Blob '*/year=2016/m=01/*'`:</span><span class="sxs-lookup"><span data-stu-id="fc864-186">If you want to download all the logs for the month of January 2016, use `-Blob '*/year=2016/m=01/*'`:</span></span>

        Get-AzureStorageBlob -Container $container -Context $sa.Context -Blob '*/year=2016/m=01/*'

<span data-ttu-id="fc864-187">A questo punto si può iniziare a osservare il contenuto dei log.</span><span class="sxs-lookup"><span data-stu-id="fc864-187">You're now ready to start looking at what's in the logs.</span></span> <span data-ttu-id="fc864-188">Prima di continuare, ci sono altri due parametri di Get-AzureRmDiagnosticSetting che può essere necessario conoscere:</span><span class="sxs-lookup"><span data-stu-id="fc864-188">But before moving onto that, two more parameters for Get-AzureRmDiagnosticSetting that you might need to know:</span></span>

* <span data-ttu-id="fc864-189">Per eseguire una query sullo stato delle impostazioni di diagnostica per la risorsa insieme di credenziali delle chiavi, usare:`Get-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId`</span><span class="sxs-lookup"><span data-stu-id="fc864-189">To query the  status of diagnostic settings for your key vault resource: `Get-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId`</span></span>
* <span data-ttu-id="fc864-190">Per disabilitare la registrazione per la risorsa insieme di credenziali delle chiavi, usare: `Set-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId -StorageAccountId $sa.Id -Enabled $false -Categories AuditEvent`</span><span class="sxs-lookup"><span data-stu-id="fc864-190">To disable logging for your key vault resource: `Set-AzureRmDiagnosticSetting -ResourceId $kv.ResourceId -StorageAccountId $sa.Id -Enabled $false -Categories AuditEvent`</span></span>

## <span data-ttu-id="fc864-191"><a id="interpret"></a>Interpretare i log dell'insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="fc864-191"><a id="interpret"></a>Interpret your Key Vault logs</span></span>
<span data-ttu-id="fc864-192">I singoli BLOB vengono archiviati come testo, formattati come BLOB JSON.</span><span class="sxs-lookup"><span data-stu-id="fc864-192">Individual blobs are stored as text, formatted as a JSON blob.</span></span> <span data-ttu-id="fc864-193">Questo è un esempio di voce di log generata dall'esecuzione di `Get-AzureRmKeyVault -VaultName 'contosokeyvault'`:</span><span class="sxs-lookup"><span data-stu-id="fc864-193">This is an example log entry from running `Get-AzureRmKeyVault -VaultName 'contosokeyvault'`:</span></span>

    {
        "records":
        [
            {
                "time": "2016-01-05T01:32:01.2691226Z",
                "resourceId": "/SUBSCRIPTIONS/361DA5D4-A47A-4C79-AFDD-XXXXXXXXXXXX/RESOURCEGROUPS/CONTOSOGROUP/PROVIDERS/MICROSOFT.KEYVAULT/VAULTS/CONTOSOKEYVAULT",
                "operationName": "VaultGet",
                "operationVersion": "2015-06-01",
                "category": "AuditEvent",
                "resultType": "Success",
                "resultSignature": "OK",
                "resultDescription": "",
                "durationMs": "78",
                "callerIpAddress": "104.40.82.76",
                "correlationId": "",
                "identity": {"claim":{"http://schemas.microsoft.com/identity/claims/objectidentifier":"d9da5048-2737-4770-bd64-XXXXXXXXXXXX","http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn":"live.com#username@outlook.com","appid":"1950a258-227b-4e31-a9cf-XXXXXXXXXXXX"}},
                "properties": {"clientInfo":"azure-resource-manager/2.0","requestUri":"https://control-prod-wus.vaultcore.azure.net/subscriptions/361da5d4-a47a-4c79-afdd-XXXXXXXXXXXX/resourcegroups/contosoresourcegroup/providers/Microsoft.KeyVault/vaults/contosokeyvault?api-version=2015-06-01","id":"https://contosokeyvault.vault.azure.net/","httpStatusCode":200}
            }
        ]
    }


<span data-ttu-id="fc864-194">La tabella seguente elenca i nomi dei campi e le descrizioni.</span><span class="sxs-lookup"><span data-stu-id="fc864-194">The following table lists the field names and descriptions.</span></span>

| <span data-ttu-id="fc864-195">Nome campo</span><span class="sxs-lookup"><span data-stu-id="fc864-195">Field name</span></span> | <span data-ttu-id="fc864-196">Descrizione</span><span class="sxs-lookup"><span data-stu-id="fc864-196">Description</span></span> |
| --- | --- |
| <span data-ttu-id="fc864-197">time</span><span class="sxs-lookup"><span data-stu-id="fc864-197">time</span></span> |<span data-ttu-id="fc864-198">Data e ora (in formato UTC).</span><span class="sxs-lookup"><span data-stu-id="fc864-198">Date and time (UTC).</span></span> |
| <span data-ttu-id="fc864-199">resourceId</span><span class="sxs-lookup"><span data-stu-id="fc864-199">resourceId</span></span> |<span data-ttu-id="fc864-200">ID della risorsa Gestione risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="fc864-200">Azure Resource Manager Resource ID.</span></span> <span data-ttu-id="fc864-201">Per i log dell'insieme di credenziali delle chiavi questo è sempre l'ID della risorsa insieme di credenziali delle chiavi.</span><span class="sxs-lookup"><span data-stu-id="fc864-201">For Key Vault logs, this is always the  Key Vault resource ID.</span></span> |
| <span data-ttu-id="fc864-202">operationName</span><span class="sxs-lookup"><span data-stu-id="fc864-202">operationName</span></span> |<span data-ttu-id="fc864-203">Nome dell'operazione, come illustrato nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="fc864-203">Name of the operation, as documented in the next table.</span></span> |
| <span data-ttu-id="fc864-204">operationVersion</span><span class="sxs-lookup"><span data-stu-id="fc864-204">operationVersion</span></span> |<span data-ttu-id="fc864-205">Questa è la versione dell'API REST richiesta dal client.</span><span class="sxs-lookup"><span data-stu-id="fc864-205">This is the REST API version requested by the client.</span></span> |
| <span data-ttu-id="fc864-206">category</span><span class="sxs-lookup"><span data-stu-id="fc864-206">category</span></span> |<span data-ttu-id="fc864-207">Per i log dell'insieme di credenziali delle chiavi, AuditEvent è il solo valore disponibile.</span><span class="sxs-lookup"><span data-stu-id="fc864-207">For Key Vault logs, AuditEvent is the single, available value.</span></span> |
| <span data-ttu-id="fc864-208">resultType</span><span class="sxs-lookup"><span data-stu-id="fc864-208">resultType</span></span> |<span data-ttu-id="fc864-209">Risultato della richiesta API REST.</span><span class="sxs-lookup"><span data-stu-id="fc864-209">Result of REST API request.</span></span> |
| <span data-ttu-id="fc864-210">resultSignature</span><span class="sxs-lookup"><span data-stu-id="fc864-210">resultSignature</span></span> |<span data-ttu-id="fc864-211">Stato HTTP.</span><span class="sxs-lookup"><span data-stu-id="fc864-211">HTTP status.</span></span> |
| <span data-ttu-id="fc864-212">resultDescription</span><span class="sxs-lookup"><span data-stu-id="fc864-212">resultDescription</span></span> |<span data-ttu-id="fc864-213">Descrizione aggiuntiva del risultato, se disponibile.</span><span class="sxs-lookup"><span data-stu-id="fc864-213">Additional description about the result, when available.</span></span> |
| <span data-ttu-id="fc864-214">durationMs</span><span class="sxs-lookup"><span data-stu-id="fc864-214">durationMs</span></span> |<span data-ttu-id="fc864-215">Tempo impiegato per soddisfare la richiesta API REST, in millisecondi.</span><span class="sxs-lookup"><span data-stu-id="fc864-215">Time it took to service the REST API request, in milliseconds.</span></span> <span data-ttu-id="fc864-216">Non include la latenza di rete, quindi il tempo misurato sul lato client potrebbe non corrispondere a questo valore.</span><span class="sxs-lookup"><span data-stu-id="fc864-216">This does not include the network latency, so the time you measure on the client side might not match this time.</span></span> |
| <span data-ttu-id="fc864-217">callerIpAddress</span><span class="sxs-lookup"><span data-stu-id="fc864-217">callerIpAddress</span></span> |<span data-ttu-id="fc864-218">Indirizzo IP del client che ha eseguito la richiesta.</span><span class="sxs-lookup"><span data-stu-id="fc864-218">IP address of the client who made the request.</span></span> |
| <span data-ttu-id="fc864-219">correlationId</span><span class="sxs-lookup"><span data-stu-id="fc864-219">correlationId</span></span> |<span data-ttu-id="fc864-220">GUID facoltativo che il client può passare per correlare i log sul lato client con quelli sul lato servizio (insieme di credenziali delle chiavi).</span><span class="sxs-lookup"><span data-stu-id="fc864-220">An optional GUID that the client can pass to correlate client-side logs with service-side (Key Vault) logs.</span></span> |
| <span data-ttu-id="fc864-221">identity</span><span class="sxs-lookup"><span data-stu-id="fc864-221">identity</span></span> |<span data-ttu-id="fc864-222">Identità del token presentato al momento dell'esecuzione della richiesta API REST.</span><span class="sxs-lookup"><span data-stu-id="fc864-222">Identity from the token that was presented when making the REST API request.</span></span> <span data-ttu-id="fc864-223">In genere si tratta di un "utente", una "entità servizio" o una combinazione "utente+appId" come nel caso di una richiesta generata da un cmdlet di Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="fc864-223">This is usually a "user", a "service principal" or a combination "user+appId" as in case of a request resulting from a Azure PowerShell cmdlet.</span></span> |
| <span data-ttu-id="fc864-224">properties</span><span class="sxs-lookup"><span data-stu-id="fc864-224">properties</span></span> |<span data-ttu-id="fc864-225">Questo campo conterrà informazioni diverse in base all'operazione (operationName).</span><span class="sxs-lookup"><span data-stu-id="fc864-225">This field will contain different information based on the operation (operationName).</span></span> <span data-ttu-id="fc864-226">Nella maggior parte dei casi contiene informazioni sul client (la stringa useragent passata dal client), l'URI esatto della richiesta API REST e il codice di stato HTTP.</span><span class="sxs-lookup"><span data-stu-id="fc864-226">In most cases, contains client information (the useragent string passed by the client), the exact REST API request URI, and HTTP status code.</span></span> <span data-ttu-id="fc864-227">Quando un oggetto viene restituito come risultato di una richiesta, ad esempio KeyCreate o VaultGet, conterrà anche l'URI della chiave (come "id"), l'URI dell'insieme di credenziali o l'URI del segreto.</span><span class="sxs-lookup"><span data-stu-id="fc864-227">In addition, when an object is returned as a result of a request (for example, KeyCreate or VaultGet) it will also contain the Key URI (as "id"), Vault URI, or Secret URI.</span></span> |

<span data-ttu-id="fc864-228">I valori del campo **operationName** sono nel formato OggettoVerbo.</span><span class="sxs-lookup"><span data-stu-id="fc864-228">The **operationName** field values are in ObjectVerb format.</span></span> <span data-ttu-id="fc864-229">Ad esempio:</span><span class="sxs-lookup"><span data-stu-id="fc864-229">For example:</span></span>

* <span data-ttu-id="fc864-230">Tutte le operazioni sull'insieme di credenziali delle chiavi hanno il formato 'Vault`<action>`', ad esempio `VaultGet` e `VaultCreate`.</span><span class="sxs-lookup"><span data-stu-id="fc864-230">All key vault operations have the 'Vault`<action>`' format, such as `VaultGet` and `VaultCreate`.</span></span>
* <span data-ttu-id="fc864-231">Tutte le operazioni sulle chiavi hanno il formato 'Key`<action>`', ad esempio `KeySign` e `KeyList`.</span><span class="sxs-lookup"><span data-stu-id="fc864-231">All  key operations have the 'Key`<action>`' format, such as `KeySign` and `KeyList`.</span></span>
* <span data-ttu-id="fc864-232">Tutte le operazioni sui segreti hanno il formato 'Secret`<action>`', ad esempio `SecretGet` e `SecretListVersions`.</span><span class="sxs-lookup"><span data-stu-id="fc864-232">All secret operations have the 'Secret`<action>`' format, such as `SecretGet` and `SecretListVersions`.</span></span>

<span data-ttu-id="fc864-233">La tabella seguente include un elenco di operationName con il comando API REST corrispondente.</span><span class="sxs-lookup"><span data-stu-id="fc864-233">The following table lists the operationName and corresponding REST API command.</span></span>

| <span data-ttu-id="fc864-234">operationName</span><span class="sxs-lookup"><span data-stu-id="fc864-234">operationName</span></span> | <span data-ttu-id="fc864-235">Comando API REST</span><span class="sxs-lookup"><span data-stu-id="fc864-235">REST API Command</span></span> |
| --- | --- |
| <span data-ttu-id="fc864-236">Authentication</span><span class="sxs-lookup"><span data-stu-id="fc864-236">Authentication</span></span> |<span data-ttu-id="fc864-237">Tramite l'endpoint di Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="fc864-237">Via Azure Active Directory endpoint</span></span> |
| <span data-ttu-id="fc864-238">VaultGet</span><span class="sxs-lookup"><span data-stu-id="fc864-238">VaultGet</span></span> |[<span data-ttu-id="fc864-239">Ottenere informazioni su un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="fc864-239">Get information about a key vault</span></span>](https://msdn.microsoft.com/en-us/library/azure/mt620026.aspx) |
| <span data-ttu-id="fc864-240">VaultPut</span><span class="sxs-lookup"><span data-stu-id="fc864-240">VaultPut</span></span> |[<span data-ttu-id="fc864-241">Creare o aggiornare un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="fc864-241">Create or update a key vault</span></span>](https://msdn.microsoft.com/en-us/library/azure/mt620025.aspx) |
| <span data-ttu-id="fc864-242">VaultDelete</span><span class="sxs-lookup"><span data-stu-id="fc864-242">VaultDelete</span></span> |[<span data-ttu-id="fc864-243">Eliminare un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="fc864-243">Delete a key vault</span></span>](https://msdn.microsoft.com/en-us/library/azure/mt620022.aspx) |
| <span data-ttu-id="fc864-244">VaultPatch</span><span class="sxs-lookup"><span data-stu-id="fc864-244">VaultPatch</span></span> |[<span data-ttu-id="fc864-245">Aggiornare un insieme di credenziali delle chiavi</span><span class="sxs-lookup"><span data-stu-id="fc864-245">Update a key vault</span></span>](https://msdn.microsoft.com/library/azure/mt620025.aspx) |
| <span data-ttu-id="fc864-246">VaultList</span><span class="sxs-lookup"><span data-stu-id="fc864-246">VaultList</span></span> |[<span data-ttu-id="fc864-247">Elencare tutti gli insiemi di credenziali delle chiavi in un gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="fc864-247">List all key vaults in a resource group</span></span>](https://msdn.microsoft.com/en-us/library/azure/mt620027.aspx) |
| <span data-ttu-id="fc864-248">KeyCreate</span><span class="sxs-lookup"><span data-stu-id="fc864-248">KeyCreate</span></span> |[<span data-ttu-id="fc864-249">Creare una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-249">Create a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn903634.aspx) |
| <span data-ttu-id="fc864-250">KeyGet</span><span class="sxs-lookup"><span data-stu-id="fc864-250">KeyGet</span></span> |[<span data-ttu-id="fc864-251">Ottenere informazioni su una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-251">Get information about a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn878080.aspx) |
| <span data-ttu-id="fc864-252">KeyImport</span><span class="sxs-lookup"><span data-stu-id="fc864-252">KeyImport</span></span> |[<span data-ttu-id="fc864-253">Importare una chiave in un insieme di credenziali</span><span class="sxs-lookup"><span data-stu-id="fc864-253">Import a key into a vault</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn903626.aspx) |
| <span data-ttu-id="fc864-254">KeyBackup</span><span class="sxs-lookup"><span data-stu-id="fc864-254">KeyBackup</span></span> |<span data-ttu-id="fc864-255">[Eseguire il backup di una chiave](https://msdn.microsoft.com/en-us/library/azure/dn878058.aspx)</span><span class="sxs-lookup"><span data-stu-id="fc864-255">[Backup a key](https://msdn.microsoft.com/en-us/library/azure/dn878058.aspx).</span></span> |
| <span data-ttu-id="fc864-256">KeyDelete</span><span class="sxs-lookup"><span data-stu-id="fc864-256">KeyDelete</span></span> |[<span data-ttu-id="fc864-257">Eliminare una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-257">Delete a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn903611.aspx) |
| <span data-ttu-id="fc864-258">KeyRestore</span><span class="sxs-lookup"><span data-stu-id="fc864-258">KeyRestore</span></span> |[<span data-ttu-id="fc864-259">Ripristinare una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-259">Restore a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn878106.aspx) |
| <span data-ttu-id="fc864-260">KeySign</span><span class="sxs-lookup"><span data-stu-id="fc864-260">KeySign</span></span> |[<span data-ttu-id="fc864-261">Firmare con una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-261">Sign with a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn878096.aspx) |
| <span data-ttu-id="fc864-262">KeyVerify</span><span class="sxs-lookup"><span data-stu-id="fc864-262">KeyVerify</span></span> |[<span data-ttu-id="fc864-263">Verificare con una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-263">Verify with a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn878082.aspx) |
| <span data-ttu-id="fc864-264">KeyWrap</span><span class="sxs-lookup"><span data-stu-id="fc864-264">KeyWrap</span></span> |[<span data-ttu-id="fc864-265">Eseguire il wrapping di una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-265">Wrap a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn878066.aspx) |
| <span data-ttu-id="fc864-266">KeyUnwrap</span><span class="sxs-lookup"><span data-stu-id="fc864-266">KeyUnwrap</span></span> |[<span data-ttu-id="fc864-267">Annullare il wrapping di una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-267">Unwrap a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn878079.aspx) |
| <span data-ttu-id="fc864-268">KeyEncrypt</span><span class="sxs-lookup"><span data-stu-id="fc864-268">KeyEncrypt</span></span> |[<span data-ttu-id="fc864-269">Crittografare con una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-269">Encrypt with a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn878060.aspx) |
| <span data-ttu-id="fc864-270">KeyDecrypt</span><span class="sxs-lookup"><span data-stu-id="fc864-270">KeyDecrypt</span></span> |[<span data-ttu-id="fc864-271">Decrittografare con una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-271">Decrypt with a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn878097.aspx) |
| <span data-ttu-id="fc864-272">KeyUpdate</span><span class="sxs-lookup"><span data-stu-id="fc864-272">KeyUpdate</span></span> |[<span data-ttu-id="fc864-273">Aggiornare una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-273">Update a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn903616.aspx) |
| <span data-ttu-id="fc864-274">KeyList</span><span class="sxs-lookup"><span data-stu-id="fc864-274">KeyList</span></span> |[<span data-ttu-id="fc864-275">Elencare le chiavi in un insieme di credenziali</span><span class="sxs-lookup"><span data-stu-id="fc864-275">List the keys in a vault</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn903629.aspx) |
| <span data-ttu-id="fc864-276">KeyListVersions</span><span class="sxs-lookup"><span data-stu-id="fc864-276">KeyListVersions</span></span> |[<span data-ttu-id="fc864-277">Elencare le versioni di una chiave</span><span class="sxs-lookup"><span data-stu-id="fc864-277">List the versions of a key</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn986822.aspx) |
| <span data-ttu-id="fc864-278">SecretSet</span><span class="sxs-lookup"><span data-stu-id="fc864-278">SecretSet</span></span> |[<span data-ttu-id="fc864-279">Creare un segreto</span><span class="sxs-lookup"><span data-stu-id="fc864-279">Create a secret</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn903618.aspx) |
| <span data-ttu-id="fc864-280">SecretGet</span><span class="sxs-lookup"><span data-stu-id="fc864-280">SecretGet</span></span> |[<span data-ttu-id="fc864-281">Ottenere informazioni su un segreto</span><span class="sxs-lookup"><span data-stu-id="fc864-281">Get secret</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn903633.aspx) |
| <span data-ttu-id="fc864-282">SecretUpdate</span><span class="sxs-lookup"><span data-stu-id="fc864-282">SecretUpdate</span></span> |[<span data-ttu-id="fc864-283">Aggiornare un segreto</span><span class="sxs-lookup"><span data-stu-id="fc864-283">Update a secret</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn986818.aspx) |
| <span data-ttu-id="fc864-284">SecretDelete</span><span class="sxs-lookup"><span data-stu-id="fc864-284">SecretDelete</span></span> |[<span data-ttu-id="fc864-285">Eliminare un segreto</span><span class="sxs-lookup"><span data-stu-id="fc864-285">Delete a secret</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn903613.aspx) |
| <span data-ttu-id="fc864-286">SecretList</span><span class="sxs-lookup"><span data-stu-id="fc864-286">SecretList</span></span> |[<span data-ttu-id="fc864-287">Elencare i segreti in un insieme di credenziali</span><span class="sxs-lookup"><span data-stu-id="fc864-287">List secrets in a vault</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn903614.aspx) |
| <span data-ttu-id="fc864-288">SecretListVersions</span><span class="sxs-lookup"><span data-stu-id="fc864-288">SecretListVersions</span></span> |[<span data-ttu-id="fc864-289">Elencare le versioni di un segreto</span><span class="sxs-lookup"><span data-stu-id="fc864-289">List versions of a secret</span></span>](https://msdn.microsoft.com/en-us/library/azure/dn986824.aspx) |

## <span data-ttu-id="fc864-290"><a id="loganalytics"></a>Usare Log Analytics</span><span class="sxs-lookup"><span data-stu-id="fc864-290"><a id="loganalytics"></a>Use Log Analytics</span></span>

<span data-ttu-id="fc864-291">È possibile usare la soluzione Insieme di credenziali delle chiavi di Azure in Log Analytics per esaminare i log AuditEvent dell'Insieme di credenziali delle chiavi di Azure.</span><span class="sxs-lookup"><span data-stu-id="fc864-291">You can use the Azure Key Vault solution in Log Analytics to review Azure Key Vault AuditEvent logs.</span></span> <span data-ttu-id="fc864-292">Per altre informazioni e per approfondire l'impostazione di questa funzionalità vedere [Soluzione Insieme di credenziali delle chiavi di Azure in Log Analytics](../log-analytics/log-analytics-azure-key-vault.md).</span><span class="sxs-lookup"><span data-stu-id="fc864-292">For more information, including how to set this up, see [Azure Key Vault solution in Log Analytics](../log-analytics/log-analytics-azure-key-vault.md).</span></span> <span data-ttu-id="fc864-293">Questo articolo contiene inoltre istruzioni su come eseguire la migrazione, nel caso fosse necessario, dalla soluzione Key Vault offerta nell'anteprima di Log Analytics, dove sono stati indirizzati la prima volta i log a un account di Archiviazione di Azure e da dove è stato configurato Log Analytics per la lettura.</span><span class="sxs-lookup"><span data-stu-id="fc864-293">This article also contains instructions if you need to migrate from the old Key Vault solution that was offered during the Log Analytics preview, where you first routed your logs to an Azure Storage account and configured Log Analytics to read from there.</span></span>

## <span data-ttu-id="fc864-294"><a id="next"></a>Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="fc864-294"><a id="next"></a>Next steps</span></span>
<span data-ttu-id="fc864-295">Per un'esercitazione sull'uso dell'insieme di credenziali delle chiavi di Azure in un'applicazione Web, vedere [Usare l'insieme di credenziali delle chiavi di Azure da un'applicazione Web](key-vault-use-from-web-application.md).</span><span class="sxs-lookup"><span data-stu-id="fc864-295">For a tutorial that uses Azure Key Vault in a web application, see [Use Azure Key Vault from a Web Application](key-vault-use-from-web-application.md).</span></span>

<span data-ttu-id="fc864-296">Per i riferimenti alla programmazione, vedere [Guida per gli sviluppatori dell’insieme di credenziali chiave Azure](key-vault-developers-guide.md).</span><span class="sxs-lookup"><span data-stu-id="fc864-296">For programming references, see [the Azure Key Vault developer's guide](key-vault-developers-guide.md).</span></span>

<span data-ttu-id="fc864-297">Per un elenco di cmdlet di Azure PowerShell 1.0 per l'insieme di credenziali delle chiavi di Azure, vedere [Cmdlet per l'insieme di credenziali delle chiavi di Azure](/powershell/module/azurerm.keyvault/#key_vault).</span><span class="sxs-lookup"><span data-stu-id="fc864-297">For a list of Azure PowerShell 1.0 cmdlets for Azure Key Vault, see [Azure Key Vault Cmdlets](/powershell/module/azurerm.keyvault/#key_vault).</span></span>

<span data-ttu-id="fc864-298">Per un'esercitazione sulla rotazione delle chiavi e il controllo dei log con l'insieme di credenziali delle chiavi di Azure, vedere [Come configurare l'insieme di credenziali delle chiavi con rotazione e controllo delle chiavi end-to-end](key-vault-key-rotation-log-monitoring.md).</span><span class="sxs-lookup"><span data-stu-id="fc864-298">For a tutorial on key rotation and log auditing with Azure Key Vault, see [How to setup Key Vault with end to end key rotation and auditing](key-vault-key-rotation-log-monitoring.md).</span></span>
