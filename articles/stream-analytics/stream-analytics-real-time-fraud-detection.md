# <a name="get-started-using-azure-stream-analytics-real-time-fraud-detection"></a><span data-ttu-id="ea0b6-101">Introduzione all’uso di Analisi di flusso di Azure: rilevamento di illeciti in tempo reale</span><span class="sxs-lookup"><span data-stu-id="ea0b6-101">Get started using Azure Stream Analytics: Real-time fraud detection</span></span>

<span data-ttu-id="ea0b6-102">In questa esercitazione viene illustrato end-to-end come toouse Analitica di flusso di Azure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-102">This tutorial provides an end-to-end illustration of how toouse Azure Stream Analytics.</span></span> <span data-ttu-id="ea0b6-103">Si apprenderà come:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-103">You learn how to:</span></span> 

* <span data-ttu-id="ea0b6-104">Introdurre eventi di streaming in un'istanza degli hub eventi di Azure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-104">Bring streaming events into an instance of Azure Event Hubs.</span></span> <span data-ttu-id="ea0b6-105">In questa esercitazione si userà un'app che simula un flusso di record di metadati di un telefono cellulare.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-105">In this tutorial, you'll use an app that we provide that simulates a stream of mobile-phone metadata records.</span></span>

* <span data-ttu-id="ea0b6-106">Scrivere Analitica flusso simile a SQL Query tootransform dati, aggregazione delle informazioni o per i modelli.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-106">Write SQL-like Stream Analytics queries tootransform data, aggregating information or looking for patterns.</span></span> <span data-ttu-id="ea0b6-107">Verrà visualizzato come toouse tooexamine una query hello flusso in ingresso e individuare le chiamate che potrebbero essere falsi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-107">You will see how toouse a query tooexamine hello incoming stream and look for calls that might be fraudulent.</span></span>

* <span data-ttu-id="ea0b6-108">Inviare hello risultati tooan sink di output (archiviazione) che è possibile analizzare per informazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-108">Send hello results tooan output sink (storage) that you can analyze for additional insights.</span></span> <span data-ttu-id="ea0b6-109">In questo caso, inviare archiviazione Blob di hello chiamata sospette dati tooAzure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-109">In this case, you'll send hello suspicious call data tooAzure Blob storage.</span></span>

<span data-ttu-id="ea0b6-110">In questa esercitazione, si usa l'esempio hello di rilevazione delle frodi in tempo reale in base ai dati di chiamata telefonica.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-110">In  this tutorial, we use hello example of real-time fraud detection based on phone-call data.</span></span> <span data-ttu-id="ea0b6-111">Ma tecnica hello che è illustrare è adatto anche per altri tipi di rilevare le frodi, ad esempio furto di frode o identità della carta di credito.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-111">But hello technique we illustrate is also suited for other types of fraud detection, such as credit card fraud or identity theft.</span></span> 

## <a name="scenario-telecommunications-and-sim-fraud-detection-in-real-time"></a><span data-ttu-id="ea0b6-112">Scenario: telecomunicazioni e rilevamento di illecito relativo alle SIM in tempo reale</span><span class="sxs-lookup"><span data-stu-id="ea0b6-112">Scenario: Telecommunications and SIM fraud detection in real time</span></span>

<span data-ttu-id="ea0b6-113">Un'azienda di telecomunicazioni dispone di un volume di dati elevato relativamente alle chiamate in ingresso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-113">A telecommunications company has a large volume of data for incoming calls.</span></span> <span data-ttu-id="ea0b6-114">società di Hello vuole toodetect fraudolenti chiama in tempo reale in modo che possano inviare notifiche ai clienti o arrestare il servizio per un numero specifico.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-114">hello company wants toodetect fraudulent calls in real time so that they can notify customers or shut down service for a specific number.</span></span> <span data-ttu-id="ea0b6-115">Un tipo di frode SIM comporta più chiamate da hello stessa identità intorno hello stesso tempo ma in posizioni diverse località geografiche.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-115">One type of SIM fraud involves multiple calls from hello same identity around hello same time but in geographically different locations.</span></span> <span data-ttu-id="ea0b6-116">toodetect questo tipo di frode, hello società esigenze tooexamine phone i record in entrata e cercare modelli specifici, in questo caso, per le chiamate intorno hello contemporaneamente in diversi paesi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-116">toodetect this type of fraud, hello company needs tooexamine incoming phone records and look for specific patterns—in this case, for calls made around hello same time in different countries.</span></span> <span data-ttu-id="ea0b6-117">Qualsiasi record di telefono che rientrano in questa categoria vengono scritti toostorage per analisi successive.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-117">Any phone records that fall into this category are written toostorage for subsequent analysis.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ea0b6-118">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="ea0b6-118">Prerequisites</span></span>

<span data-ttu-id="ea0b6-119">In questa esercitazione si simuleranno i dati di una chiamata telefonica usando un'app client che genera metadati di esempio di chiamate.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-119">In this tutorial, you'll simulate phone-call data by using a client app that generates sample phone call metadata.</span></span> <span data-ttu-id="ea0b6-120">Alcuni record hello che hello app produce fraudolente chiamate è simile.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-120">Some of hello records that hello app produces look like fraudulent calls.</span></span> 

<span data-ttu-id="ea0b6-121">Prima di iniziare, verificare di che aver seguito hello:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-121">Before you start, make sure you have hello following:</span></span>

* <span data-ttu-id="ea0b6-122">Un account Azure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-122">An Azure account.</span></span>
* <span data-ttu-id="ea0b6-123">applicazione di generatore Hello evento di chiamata.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-123">hello call-event generator app.</span></span> <span data-ttu-id="ea0b6-124">È possibile ottenere questo scaricando hello [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) da hello Microsoft Download Center.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-124">You can get this by downloading hello [TelcoGenerator.zip file](http://download.microsoft.com/download/8/B/D/8BD50991-8D54-4F59-AB83-3354B69C8A7E/TelcoGenerator.zip) from hello Microsoft Download Center.</span></span> <span data-ttu-id="ea0b6-125">Decomprimere il pacchetto in una cartella nel computer.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-125">Unzip this package into a folder on your computer.</span></span> <span data-ttu-id="ea0b6-126">Se si desidera il codice sorgente toosee hello e dell'applicazione hello esecuzione di un debugger, è possibile ottenere il codice sorgente dell'applicazione hello dai [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-126">If you want toosee hello source code and run hello app in a debugger, you can get hello app source code from [GitHub](https://aka.ms/azure-stream-analytics-telcogenerator).</span></span> 

    >[!NOTE]
    ><span data-ttu-id="ea0b6-127">Windows potrebbero bloccare file con estensione ZIP scaricato hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-127">Windows might block hello downloaded .zip file.</span></span> <span data-ttu-id="ea0b6-128">Se non è possibile decomprimere il contenuto, fare clic sul file hello e selezionare **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-128">If you can't unzip it, right-click hello file and select **Properties**.</span></span> <span data-ttu-id="ea0b6-129">Se hello viene visualizzato il messaggio "il file proviene da un altro computer e potrebbero essere bloccati toohelp proteggere questo computer", seleziona hello **Unblock** opzione e quindi fare clic su **applica**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-129">If you see hello "This file came from another computer and might be blocked toohelp protect this computer" message, select hello **Unblock** option and then click **Apply**.</span></span>

<span data-ttu-id="ea0b6-130">Se si desidera che tooexamine hello risultati del processo di Streaming Analitica hello, è necessario uno strumento per la visualizzazione contenuto hello di un contenitore di archiviazione Blob di Azure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-130">If you want tooexamine hello results of hello Streaming Analytics job, you also need a tool for viewing hello contents of a Azure Blob Storage container.</span></span> <span data-ttu-id="ea0b6-131">Se si usa Visual Studio, è possibile usare [Strumenti di Microsoft Azure per Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) o [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-131">If you use Visual Studio, you can use [Azure Tools for Visual Studio](https://docs.microsoft.com/en-us/azure/vs-azure-tools-storage-resources-server-explorer-browse-manage) or [Visual Studio Cloud Explorer](https://docs.microsoft.com/en-us/azure/vs-azure-tools-resources-managing-with-cloud-explorer).</span></span> <span data-ttu-id="ea0b6-132">In alternativa, è possibile installare strumenti autonomi come [Azure Storage Explorer](http://storageexplorer.com/) o [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-132">Alternatively, you can install standalone tools like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

## <a name="create-an-azure-event-hubs-tooingest-events"></a><span data-ttu-id="ea0b6-133">Creare un evento Azure eventi tooingest hub</span><span class="sxs-lookup"><span data-stu-id="ea0b6-133">Create an Azure event hubs tooingest events</span></span>

<span data-ttu-id="ea0b6-134">tooanalyze un flusso di dati, si *inserimento* in Azure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-134">tooanalyze a data stream, you *ingest* it into Azure.</span></span> <span data-ttu-id="ea0b6-135">Tipico tooingest è presente un toouse [hub eventi di Azure](../event-hubs/event-hubs-what-is-event-hubs.md), che consente di inserire milioni di eventi al secondo e quindi elaborare e archiviare le informazioni sull'evento hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-135">A typical way tooingest data is toouse [Azure Event Hubs](../event-hubs/event-hubs-what-is-event-hubs.md), which lets you ingest millions of events per second and then process and store hello event information.</span></span> <span data-ttu-id="ea0b6-136">Per questa esercitazione, creare un hub eventi e quindi chiedere di hello evento chiamata generatore app trasmissione chiamata dati toothat hub eventi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-136">For this tutorial, you create an event hub and then have hello call-event generator app send call data toothat event hub.</span></span> <span data-ttu-id="ea0b6-137">Per ulteriori informazioni sugli hub di eventi, vedere hello [documentazione di Azure Service Bus](https://docs.microsoft.com/en-us/azure/service-bus/).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-137">For more about event hubs, see hello [Azure Service Bus documentation](https://docs.microsoft.com/en-us/azure/service-bus/).</span></span>

>[!NOTE]
><span data-ttu-id="ea0b6-138">Per una versione più dettagliata di questa procedura, vedere [creare uno spazio dei nomi dell'hub eventi e un hub di eventi utilizzando hello Azure portal](../event-hubs/event-hubs-create.md).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-138">For a more detailed version of this procedure, see [Create an Event Hubs namespace and an event hub using hello Azure portal](../event-hubs/event-hubs-create.md).</span></span> 

### <a name="create-a-namespace-and-event-hub"></a><span data-ttu-id="ea0b6-139">Creare uno spazio dei nomi e un hub eventi</span><span class="sxs-lookup"><span data-stu-id="ea0b6-139">Create a namespace and event hub</span></span>
<span data-ttu-id="ea0b6-140">In questa procedura, creare innanzitutto un spazio dei nomi dell'hub di eventi e quindi aggiungere un namepsace toothat hub di eventi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-140">In this procedure, you first create an event hub namespace, and then you add an event hub toothat namepsace.</span></span> <span data-ttu-id="ea0b6-141">Vengono utilizzati gli spazi dei nomi di evento hub gruppo toologically relative istanze di bus di eventi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-141">Event hub namespaces are used toologically group related event bus instances.</span></span> 

1. <span data-ttu-id="ea0b6-142">Accedere al portale di Azure hello e fare clic su **New** > **Internet of Things** > **Hub eventi**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-142">Log  into hello Azure portal and click **New** > **Internet of Things** > **Event Hub**.</span></span> 

2. <span data-ttu-id="ea0b6-143">In hello **Crea spazio dei nomi** pannello, immettere un nome di spazio dei nomi, ad esempio `<yourname>-eh-ns-demo`.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-143">In hello **Create namespace** blade, enter a namespace name such as `<yourname>-eh-ns-demo`.</span></span> <span data-ttu-id="ea0b6-144">È possibile utilizzare qualsiasi nome spazio dei nomi hello, ma il nome di hello deve essere valido per un URL e deve essere univoco in Azure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-144">You can use any name for hello namespace, but hello name must be valid for a URL and it must be unique across Azure.</span></span> 
    
3. <span data-ttu-id="ea0b6-145">Selezionare una sottoscrizione, creare o scegliere un gruppo di risorse e quindi fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-145">Select a subscription and create or choose a resource group , then click **Create**.</span></span> 

    ![Creare uno spazio dei nomi dell'hub eventi](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-namespace-new-portal.png)
 
4. <span data-ttu-id="ea0b6-147">Al termine dello spazio dei nomi hello distribuzione, è possibile trovare hello spazio dei nomi hub di eventi nell'elenco delle risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-147">When hello namespace has finished deploying, find hello event hub namespace in your list of Azure resources.</span></span> 

5. <span data-ttu-id="ea0b6-148">Fare clic su nuovo spazio dei nomi hello e nel Pannello di hello dello spazio dei nomi, fare clic su  **+ &nbsp;Hub eventi**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-148">Click hello new namespace, and in hello namespace blade, click **+&nbsp;Event Hub**.</span></span> 

    ![<span data-ttu-id="ea0b6-149">pulsante Aggiungi Hub eventi Hello per la creazione di un nuovo hub eventi</span><span class="sxs-lookup"><span data-stu-id="ea0b6-149">hello Add Event Hub button for creating a new event hub</span></span> ](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-button-new-portal.png)    
 
6. <span data-ttu-id="ea0b6-150">Nome hello nuovo hub eventi `sa-eh-frauddetection-demo`.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-150">Name hello new event hub `sa-eh-frauddetection-demo`.</span></span> <span data-ttu-id="ea0b6-151">È possibile usare un nome diverso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-151">You can use a different name.</span></span> <span data-ttu-id="ea0b6-152">In caso contrario, prendere nota di esso, in quanto è necessario il nome di hello in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-152">If you do, make a note of it, because you need hello name later.</span></span> <span data-ttu-id="ea0b6-153">Non è necessario tooset tutte le altre opzioni per l'hub di eventi hello ora.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-153">You don't need tooset any other options for hello event hub right now.</span></span>

    ![Pannello per creare un nuovo hub eventi](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-eventhub-new-portal.png)
    
 
7. <span data-ttu-id="ea0b6-155">Fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-155">Click **Create**.</span></span>
### <a name="grant-access-toohello-event-hub-and-get-a-connection-string"></a><span data-ttu-id="ea0b6-156">Concessione dell'hub di eventi di accesso toohello e ottenere una stringa di connessione</span><span class="sxs-lookup"><span data-stu-id="ea0b6-156">Grant access toohello event hub and get a connection string</span></span>

<span data-ttu-id="ea0b6-157">Prima di un processo può inviare hub di eventi di dati tooan, hub eventi hello deve disporre di criteri che consente l'accesso appropriato.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-157">Before a process can send data tooan event hub, hello event hub must have a policy that allows appropriate access.</span></span> <span data-ttu-id="ea0b6-158">i criteri di accesso Hello produce una stringa di connessione che include informazioni di autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-158">hello access policy produces a connection string that includes authorization information.</span></span>

1.  <span data-ttu-id="ea0b6-159">Nel Pannello di spazio dei nomi di evento hello, fare clic su **hub eventi** e quindi fare clic su nome hello del nuovo hub di eventi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-159">In hello event namespace blade, click **Event Hubs** and then click hello name of your new event hub.</span></span>

2.  <span data-ttu-id="ea0b6-160">Nel Pannello di hub eventi hello, fare clic su **criteri di accesso condiviso** e quindi fare clic su  **+ &nbsp;Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-160">In hello event hub blade, click **Shared access policies** and then click **+&nbsp;Add**.</span></span>

    >[!NOTE]
    ><span data-ttu-id="ea0b6-161">Verificare che si lavora con hub eventi hello, non nomi di hub eventi hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-161">Make sure you're working with hello event hub, not hello event hub namespace.</span></span>

3.  <span data-ttu-id="ea0b6-162">Aggiungere criteri denominati `sa-policy-manage-demo` e per **Attestazione** selezionare **Gestisci**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-162">Add a policy named `sa-policy-manage-demo` and for **Claim**, select **Manage**.</span></span>

    ![Pannello per creare nuovi criteri di accesso all'hub eventi](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-shared-access-policy-manage-new-portal.png)
 
4.  <span data-ttu-id="ea0b6-164">Fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-164">Click **Create**.</span></span>

5.  <span data-ttu-id="ea0b6-165">Dopo la distribuzione di criteri di hello, selezionarla nell'elenco di hello di criteri di accesso condiviso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-165">After hello policy has been deployed, click it in hello list of shared access policies.</span></span>

6.  <span data-ttu-id="ea0b6-166">Casella Trova hello **chiave primaria di stringa di connessione** e fare clic su hello copia pulsante Avanti toohello stringa di connessione.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-166">Find hello box labeled **CONNECTION STRING-PRIMARY KEY** and click hello copy button next toohello connection string.</span></span> 
    
    ![Copia chiave di stringa di connessione primaria hello dai criteri di accesso hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-shared-access-policy-copy-connection-string-new-portal.png)
 
7.  <span data-ttu-id="ea0b6-168">Incollare la stringa di connessione hello in un editor di testo.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-168">Paste hello connection string into a text editor.</span></span> <span data-ttu-id="ea0b6-169">La stringa di connessione è necessario per la sezione successiva hello, dopo aver apportato tooit alcune piccole modifiche.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-169">You need this connection string for hello next section, after you make some small edits tooit.</span></span>

    <span data-ttu-id="ea0b6-170">stringa di connessione Hello è simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-170">hello connection string looks like this:</span></span>

        Endpoint=sb://YOURNAME-eh-ns-demo.servicebus.windows.net/;SharedAccessKeyName=sa-policy-manage-demo;SharedAccessKey=Gw2NFZwU1Di+rxA2T+6hJYAtFExKRXaC2oSQa0ZsPkI=;EntityPath=sa-eh-frauddetection-demo

    <span data-ttu-id="ea0b6-171">Si noti che la stringa di connessione hello contiene più coppie chiave-valore, separate da punti e virgola: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, e `EntityPath`.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-171">Notice that hello connection string contains multiple key-value pairs, separated with semicolons: `Endpoint`, `SharedAccessKeyName`, `SharedAccessKey`, and `EntityPath`.</span></span>  

## <a name="configure-and-start-hello-event-generator-application"></a><span data-ttu-id="ea0b6-172">Configurare e avviare un'applicazione hello evento generatore</span><span class="sxs-lookup"><span data-stu-id="ea0b6-172">Configure and start hello event generator application</span></span>

<span data-ttu-id="ea0b6-173">Prima di iniziare hello TelcoGenerator app, è configurato in modo da invierà hub eventi di chiamata record toohello che appena creato.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-173">Before you start hello TelcoGenerator app, you configure it so that it will send call records toohello event hub you just created.</span></span>

### <a name="configure-hello-telcogeneratorapp"></a><span data-ttu-id="ea0b6-174">Configurare hello TelcoGeneratorapp</span><span class="sxs-lookup"><span data-stu-id="ea0b6-174">Configure hello TelcoGeneratorapp</span></span>

1.  <span data-ttu-id="ea0b6-175">Nell'editor di hello dove è stata copiata la stringa di connessione hello, prendere nota di hello `EntityPath` valore e quindi rimuovere hello `EntityPath` coppia (non dimenticare tooremove hello un punto e virgola che lo precede).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-175">In hello editor where you copied hello connection string, make a note of hello `EntityPath` value, and then remove hello `EntityPath` pair (don't forget tooremove hello semicolon that precedes it).</span></span> 

2.  <span data-ttu-id="ea0b6-176">Nella cartella hello in cui è stato decompresso file TelcoGenerator.zip hello, aprire il file telcodatagen.exe.config hello in un editor.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-176">In hello folder where you unzipped hello TelcoGenerator.zip file, open hello telcodatagen.exe.config file in an editor.</span></span> <span data-ttu-id="ea0b6-177">(È presente più di un file con estensione config, pertanto è necessario assicurarsi che si apre il diritto di hello uno).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-177">(There is more than one .config file, so be sure that you open hello right one.)</span></span>

3.  <span data-ttu-id="ea0b6-178">In hello `<appSettings>` elemento, eseguire questa operazione:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-178">In hello `<appSettings>` element, do this:</span></span>

    * <span data-ttu-id="ea0b6-179">Impostare il valore di hello di hello `EventHubName` nome hub di eventi chiave toohello (vale a dire toohello valore del percorso di entità hello).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-179">Set hello value of hello `EventHubName` key toohello event hub name (that is, toohello value of hello entity path).</span></span>
    * <span data-ttu-id="ea0b6-180">Impostare il valore di hello di hello `Microsoft.ServiceBus.ConnectionString` toohello stringa di connessione della chiave.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-180">Set hello value of hello `Microsoft.ServiceBus.ConnectionString` key toohello connection string.</span></span> 

    <span data-ttu-id="ea0b6-181">Hello `<appSettings>` sezione avrà un aspetto simile hello di esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-181">hello `<appSettings>` section will look like hello following example.</span></span> <span data-ttu-id="ea0b6-182">(Per maggiore chiarezza, è stato eseguito il wrapping righe hello e rimossi alcuni caratteri dal token di autorizzazione hello.)</span><span class="sxs-lookup"><span data-stu-id="ea0b6-182">(For clarity, we wrapped hello lines and removed some characters from hello authorization token.)</span></span>

    ![File di configurazione app TelcoGenerator hello evento hub nome stringa di connessione e di visualizzazione](./media/stream-analytics-real-time-fraud-detection/stream-analytics-telcogenerator-config-file-app-settings.png)
 
4.  <span data-ttu-id="ea0b6-184">Salvare il file hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-184">Save hello file.</span></span> 

### <a name="start-hello-app"></a><span data-ttu-id="ea0b6-185">Avviare l'applicazione hello</span><span class="sxs-lookup"><span data-stu-id="ea0b6-185">Start hello app</span></span>
1.  <span data-ttu-id="ea0b6-186">Aprire una finestra di comando e modificare toohello cartella in cui app TelcoGenerator hello viene decompresso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-186">Open a command window and change toohello folder where hello TelcoGenerator app is unzipped.</span></span>
2.  <span data-ttu-id="ea0b6-187">Immettere hello comando seguente:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-187">Enter hello following command:</span></span>

        telcodatagen.exe 1000 .2 2

    <span data-ttu-id="ea0b6-188">i parametri di Hello sono:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-188">hello parameters are:</span></span> 

    * <span data-ttu-id="ea0b6-189">Numero di CDR all'ora.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-189">Number of CDRs per hour.</span></span> 
    * <span data-ttu-id="ea0b6-190">Probabilità di frode scheda SIM: Frequenza, come una percentuale di tutte le chiamate, tale applicazione hello deve simulare una chiamata fraudolenta.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-190">SIM Card Fraud Probability: How often, as a percentage of all calls, that hello app should simulate a fraudulent call.</span></span> <span data-ttu-id="ea0b6-191">il valore di Hello 2 alla penultima copia indica che circa il 20% dei record di chiamata hello avrà un aspetto fraudolenti.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-191">hello value .2 means that about 20% of hello call records will look fraudulent.</span></span>
    * <span data-ttu-id="ea0b6-192">Durata in ore.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-192">Duration in hours.</span></span> <span data-ttu-id="ea0b6-193">numero di Hello di ore che hello app deve essere eseguito.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-193">hello number of hours that hello app should run.</span></span> <span data-ttu-id="ea0b6-194">È anche possibile arrestare app hello qualsiasi momento premendo Ctrl + C nella riga di comando hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-194">You can also stop hello app any time by pressing Ctrl+C at hello command line.</span></span>

    <span data-ttu-id="ea0b6-195">Dopo alcuni secondi, hello app inizia la visualizzazione di record telefonata nella schermata di hello come inviarli toohello hub di eventi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-195">After a few seconds, hello app starts displaying phone call records on hello screen as it sends them toohello event hub.</span></span>

<span data-ttu-id="ea0b6-196">Alcuni dei campi chiave hello che verrà utilizzato in questa applicazione di rilevamento di frodi in tempo reale sono di hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-196">Some of hello key fields that you will be using in this real-time fraud detection application are hello following:</span></span>

|<span data-ttu-id="ea0b6-197">**Record**</span><span class="sxs-lookup"><span data-stu-id="ea0b6-197">**Record**</span></span>|<span data-ttu-id="ea0b6-198">**Definizione**</span><span class="sxs-lookup"><span data-stu-id="ea0b6-198">**Definition**</span></span>|
|----------|--------------|
|`CallrecTime`|<span data-ttu-id="ea0b6-199">ora di inizio Hello timestamp per chiamata hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-199">hello timestamp for hello call start time.</span></span> |
|`SwitchNum`|<span data-ttu-id="ea0b6-200">telefonico Hello utilizzato chiamata hello tooconnect.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-200">hello telephone switch used tooconnect hello call.</span></span> <span data-ttu-id="ea0b6-201">Per questo esempio, le opzioni di hello sono stringhe che rappresentano il paese hello di origine (Stati Uniti, Cina, Regno Unito, Germania o Australia).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-201">For this example, hello switches are strings that represent hello country of origin (US, China, UK, Germany, or Australia).</span></span> |
|`CallingNum`|<span data-ttu-id="ea0b6-202">numero di telefono Hello del chiamante hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-202">hello phone number of hello caller.</span></span> |
|`CallingIMSI`|<span data-ttu-id="ea0b6-203">Hello International Mobile IMSI (Subscriber Identity).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-203">hello International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="ea0b6-204">Si tratta hello identificatore univoco del chiamante hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-204">This is hello Unique identifier of hello caller.</span></span> |
|`CalledNum`|<span data-ttu-id="ea0b6-205">numero di telefono Hello del destinatario chiamata hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-205">hello phone number of hello call recipient.</span></span> |
|`CalledIMSI`|<span data-ttu-id="ea0b6-206">Codice IMSI (International Mobile Subscriber Identity).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-206">International Mobile Subscriber Identity (IMSI).</span></span> <span data-ttu-id="ea0b6-207">Si tratta hello identificatore univoco del destinatario chiamata hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-207">This is hello unique identifier of hello call recipient.</span></span> |


## <a name="create-a-stream-analytics-job-toomanage-streaming-data"></a><span data-ttu-id="ea0b6-208">Creare un toomanage processo Analitica flusso dati di streaming</span><span class="sxs-lookup"><span data-stu-id="ea0b6-208">Create a Stream Analytics job toomanage streaming data</span></span>

<span data-ttu-id="ea0b6-209">Dopo aver creato un flusso di eventi di chiamata, sarà possibile configurare un processo di Analisi di flusso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-209">Now that you have a stream of call events, you can set up a Stream Analytics job.</span></span> <span data-ttu-id="ea0b6-210">processo Hello leggerà i dati provenienti dall'hub di eventi hello impostati.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-210">hello job will read data from hello event hub that you set up.</span></span> 

### <a name="create-hello-job"></a><span data-ttu-id="ea0b6-211">Creazione del processo di hello</span><span class="sxs-lookup"><span data-stu-id="ea0b6-211">Create hello job</span></span> 

1. <span data-ttu-id="ea0b6-212">Nel portale di Azure hello, fare clic su **New** > **Internet of Things** > **processo flusso Analitica**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-212">In hello Azure portal, click **New** > **Internet of Things** > **Stream Analytics job**.</span></span>

2. <span data-ttu-id="ea0b6-213">Nome del processo hello `sa_frauddetection_job_demo`, specificare una sottoscrizione, un gruppo di risorse e un percorso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-213">Name hello job `sa_frauddetection_job_demo`, specify a subscription, resource group, and location.</span></span>

    <span data-ttu-id="ea0b6-214">È una buona idea tooplace hello processo e hello hub eventi in hello stessa area per prestazioni ottimali e pertanto di non prestare tootransfer dati tra aree.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-214">It's a good idea tooplace hello job and hello event hub in hello same region for best performance and so that you don't pay tootransfer data between regions.</span></span>

    ![Creare un nuovo processo di Analisi di flusso](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-job-new-portal.png)

3. <span data-ttu-id="ea0b6-216">Fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-216">Click **Create**.</span></span>

    <span data-ttu-id="ea0b6-217">viene creato il processo di Hello e portale hello Visualizza i dettagli dei processi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-217">hello job is created and hello portal displays job details.</span></span> <span data-ttu-id="ea0b6-218">Non è ancora in esecuzione, tuttavia, è il processo di hello tooconfigure prima di poter essere avviato.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-218">Nothing is running yet, though—you have tooconfigure hello job before it can be started.</span></span>

### <a name="configure-job-input"></a><span data-ttu-id="ea0b6-219">Configurare l'input del processo</span><span class="sxs-lookup"><span data-stu-id="ea0b6-219">Configure job input</span></span>

1. <span data-ttu-id="ea0b6-220">Nel dashboard di hello o hello **tutte le risorse** pannello, trovare e seleziona hello `sa_frauddetection_job_demo` processo flusso Analitica.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-220">In hello dashboard or hello **All resources** blade, find and select hello `sa_frauddetection_job_demo` Stream Analytics job.</span></span> 
2. <span data-ttu-id="ea0b6-221">In hello **processo topologia** di hello pannello processo Analitica di flusso, fare clic su hello **Input** casella.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-221">In hello **Job Topology** section of hello Stream Analytics job blade, click hello **Input** box.</span></span>

    ![Casella di input in una topologia nel Pannello di processo di Streaming Analitica hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-input-box-new-portal.png)
 
3. <span data-ttu-id="ea0b6-223">Fare clic su  **+ &nbsp;Aggiungi** e compilare pannello hello con questi valori:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-223">Click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="ea0b6-224">**Alias di input**: utilizza il nome di hello `CallStream`.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-224">**Input alias**: Use hello name `CallStream`.</span></span> <span data-ttu-id="ea0b6-225">Se si usa un nome diverso, tenerne traccia, poiché sarà necessario in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-225">If you use a different name, make a note of it because you'll need it later.</span></span>
    * <span data-ttu-id="ea0b6-226">**Tipo di origine**: selezionare **Flusso dati**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-226">**Source type**: Select **Data stream**.</span></span> <span data-ttu-id="ea0b6-227">(**Dati di riferimento** fa riferimento a dati di ricerca toostatic, che non vengono utilizzati in questa esercitazione.)</span><span class="sxs-lookup"><span data-stu-id="ea0b6-227">(**Reference data** refers toostatic lookup data, which you won't use in this tutorial.)</span></span>
    * <span data-ttu-id="ea0b6-228">**Origine**: selezionare **Hub eventi**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-228">**Source**: Select **Event hub**.</span></span>
    * <span data-ttu-id="ea0b6-229">**Opzioni di importazione**: selezionare **Usa l'hub eventi della sottoscrizione corrente**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-229">**Import option**: Select **Use event hub from current subscription**.</span></span> 
    * <span data-ttu-id="ea0b6-230">**Spazio dei nomi di Service bus**: selezionare hello spazio dei nomi hub eventi creato in precedenza (`<yourname>-eh-ns-demo`).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-230">**Service bus namespace**: Select hello event hub namespace that you created earlier (`<yourname>-eh-ns-demo`).</span></span>
    * <span data-ttu-id="ea0b6-231">**Hub eventi**: hub eventi selezionare hello creato in precedenza (`sa-eh-frauddetection-demo`).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-231">**Event hub**: Select hello event hub that you created earlier (`sa-eh-frauddetection-demo`).</span></span>
    * <span data-ttu-id="ea0b6-232">**Nome criterio hub eventi**: selezionare i criteri di accesso hello creato in precedenza (`sa-policy-manage-demo`).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-232">**Event hub policy name**: Select hello access policy that you created earlier (`sa-policy-manage-demo`).</span></span>

    ![Creare un nuovo input per il processo di Analisi di flusso](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sa-input-new-portal.png)

4. <span data-ttu-id="ea0b6-234">Fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-234">Click **Create**.</span></span>

## <a name="create-queries-tootransform-real-time-data"></a><span data-ttu-id="ea0b6-235">Creare query di dati in tempo reale tootransform</span><span class="sxs-lookup"><span data-stu-id="ea0b6-235">Create queries tootransform real-time data</span></span>

<span data-ttu-id="ea0b6-236">A questo punto, aver configurato un processo di flusso Analitica tooread un flusso di dati in ingresso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-236">At this point, you have a Stream Analytics job set up tooread an incoming data stream.</span></span> <span data-ttu-id="ea0b6-237">passaggio successivo Hello è toocreate una trasformazione che analizza i dati di hello in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-237">hello next step is toocreate a transformation that analyzes hello data in real time.</span></span> <span data-ttu-id="ea0b6-238">A tale scopo, creare una query.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-238">You do this by creating a query.</span></span> <span data-ttu-id="ea0b6-239">Analisi di flusso supporta un semplice modello di query dichiarative che descrive le trasformazioni per l'elaborazione in tempo reale.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-239">Stream Analytics supports a simple, declarative query model that describes transformations for real-time processing.</span></span> <span data-ttu-id="ea0b6-240">le query di Hello utilizzano un linguaggio simile a SQL con alcuni analitica toostream specifiche estensioni.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-240">hello queries use a SQL-like language that has some extensions specific toostream analytics.</span></span> 

<span data-ttu-id="ea0b6-241">Una query molto semplice semplicemente potrebbe leggere tutti i dati in arrivo hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-241">A very simple query might simply read all hello incoming data.</span></span> <span data-ttu-id="ea0b6-242">Tuttavia, è spesso creare query che la ricerca per i dati specifici o per le relazioni nei dati hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-242">However, you often create queries that look for specific data or for relationships in hello data.</span></span> <span data-ttu-id="ea0b6-243">In questa sezione dell'esercitazione hello, creare e i test verranno toolearn query diversi modi in cui è possibile trasformare un flusso di input per l'analisi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-243">In this section of hello tutorial, you will create and test several queries toolearn a few ways in which you can transform an input stream for analysis.</span></span> 

<span data-ttu-id="ea0b6-244">le query Hello che qui creati solo visualizzano hello dati trasformati toohello schermata.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-244">hello queries you create here will just display hello transformed data toohello screen.</span></span> <span data-ttu-id="ea0b6-245">In una sezione successiva, è possibile configurare un sink di output e una query che scrive hello dati trasformati toothat sink.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-245">In a later section, you'll configure an output sink and a query that writes hello transformed data toothat sink.</span></span>

<span data-ttu-id="ea0b6-246">toolearn più sul linguaggio di hello, vedere hello [riferimenti al linguaggio di Query di Azure flusso Analitica](https://msdn.microsoft.com/library/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-246">toolearn more about hello language, see hello [Azure Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/dn834998.aspx).</span></span>

### <a name="get-sample-data-for-testing-queries"></a><span data-ttu-id="ea0b6-247">Ottenere dati di esempio per testare le query</span><span class="sxs-lookup"><span data-stu-id="ea0b6-247">Get sample data for testing queries</span></span>

<span data-ttu-id="ea0b6-248">hub di eventi di chiamata record toohello invia Hello TelcoGenerator app e del processo di flusso Analitica è tooread configurato dall'hub di eventi di hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-248">hello TelcoGenerator app is sending call records toohello event hub, and your Stream Analytics job is configured tooread from hello event hub.</span></span> <span data-ttu-id="ea0b6-249">È possibile utilizzare un assicurarsi che sta leggendo correttamente toomake query tootest hello processo.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-249">You can use a query tootest hello job toomake sure that it's reading correctly.</span></span> <span data-ttu-id="ea0b6-250">troppo test di una query in hello console Azure, è necessario che i dati di esempio.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-250">too test a query in hello Azure console, you need sample data.</span></span> <span data-ttu-id="ea0b6-251">Questa procedura dettagliata, si saranno estrarre dati di esempio dal flusso di hello provenienti in hub eventi hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-251">For this walkthrough, you'll extract sample data from hello stream that's coming into hello event hub.</span></span>

1. <span data-ttu-id="ea0b6-252">Verificare che tale app TelcoGenerator hello è in esecuzione e se producono chiamata vengono registrate.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-252">Make sure that hello TelcoGenerator app is running and producing call records.</span></span>
2. <span data-ttu-id="ea0b6-253">Nel portale di hello restituiscono pannello processo di Streaming Analitica toohello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-253">In hello portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="ea0b6-254">(Se è stata chiusa pannello hello, cercare `sa_frauddetection_job_demo` in hello **tutte le risorse** blade.)</span><span class="sxs-lookup"><span data-stu-id="ea0b6-254">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
3. <span data-ttu-id="ea0b6-255">Fare clic su hello **Query** casella.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-255">Click hello **Query** box.</span></span> <span data-ttu-id="ea0b6-256">Azure Elenca gli input hello e output che sono configurati per il processo di hello e consente di creare una query che consente di trasformare flusso di input hello inviata toohello output.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-256">Azure lists hello inputs and outputs that are configured for hello job, and lets you create a query that lets you transform hello input stream as it is sent toohello output.</span></span>
4. <span data-ttu-id="ea0b6-257">In hello **Query** pannello, fare clic su Avanti toohello di hello punti `CallStream` di input e quindi selezionare **dati da un input di esempio**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-257">In hello **Query** blade, click hello dots next toohello `CallStream` input and then select **Sample data from input**.</span></span>

    ![Dal menu Opzioni toouse dati di esempio per hello voce processi di Streaming Analitica, con "Dati di input" selezionati](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-sample-data-from-input.png)

    <span data-ttu-id="ea0b6-259">Verrà aperto un pannello che consente di specificare la quantità tooget di dati di esempio, definito in termini di tempo hello tooread flusso di input.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-259">This opens a blade that lets you specify how much sample data tooget, defined in terms of how long tooread hello input stream.</span></span>

5. <span data-ttu-id="ea0b6-260">Impostare **minuti** too3 e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-260">Set **Minutes** too3 and then click **OK**.</span></span> 
    
    ![Opzioni di campionamento di flusso di input hello, con "3 minuti" selezionati.](./media/stream-analytics-real-time-fraud-detection/stream-analytics-input-create-sample-data.png)

    <span data-ttu-id="ea0b6-262">Azure esempi relativi a 3 minuti dei dati dal flusso di input hello e invia una notifica quando i dati di esempio hello sono pronti.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-262">Azure samples 3 minutes' worth of data from hello input stream and notifies you when hello sample data is ready.</span></span> <span data-ttu-id="ea0b6-263">Questa operazione richiede un breve tempo.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-263">(This takes a short while.)</span></span> 

<span data-ttu-id="ea0b6-264">dati di esempio Hello vengono archiviati temporaneamente ed sono disponibili quando è aperta la finestra di query hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-264">hello sample data is stored temporarily and is available while you have hello query window open.</span></span> <span data-ttu-id="ea0b6-265">Se si chiude la finestra di query hello, vengono eliminati i dati di esempio hello e sarà necessario toocreate un nuovo set di dati di esempio.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-265">If you close hello query window, hello sample data is discarded, and you'll have toocreate a new set of sample data.</span></span> 

<span data-ttu-id="ea0b6-266">In alternativa, è possibile ottenere un file con estensione JSON che contiene dati di esempio [da GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json)e quindi caricare tale toouse file con estensione JSON come dati di esempio per hello `CallStream` input.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-266">As an alternative, you can get a .json file that has sample data in it [from GitHub](https://github.com/Azure/azure-stream-analytics/blob/master/Sample%20Data/telco.json), and then upload that .json file toouse as sample data for hello `CallStream` input .</span></span> 

### <a name="test-using-a-pass-through-query"></a><span data-ttu-id="ea0b6-267">Test mediante una query pass-through</span><span class="sxs-lookup"><span data-stu-id="ea0b6-267">Test using a pass-through query</span></span>

<span data-ttu-id="ea0b6-268">Se si desidera tooarchive ogni evento, è possibile utilizzare tutti i campi nel payload hello dell'evento hello hello tooread una query pass-through.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-268">If you want tooarchive every event, you can use a pass-through query tooread all hello fields in hello payload of hello event.</span></span>

1. <span data-ttu-id="ea0b6-269">Nella finestra query hello, immettere la query:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-269">In hello query window, enter this query:</span></span>

        SELECT 
            *
        FROM 
            CallStream

    >[!NOTE]
    ><span data-ttu-id="ea0b6-270">Come con SQL, le parole chiave non effettuano distinzione tra maiuscole e minuscole e gli spazi non sono rilevanti.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-270">As with SQL, keywords are not case sensitive, and whitespace is not significant.</span></span>

    <span data-ttu-id="ea0b6-271">In questa query `CallStream` è hello alias specificato durante la creazione di input hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-271">In this query, `CallStream` is hello alias that you specified when you created hello input.</span></span> <span data-ttu-id="ea0b6-272">In presenza di un alias diverso, usare questo nome.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-272">If you used a different alias, use that name instead.</span></span>

2. <span data-ttu-id="ea0b6-273">Fare clic su **Test**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-273">Click **Test**.</span></span>

    <span data-ttu-id="ea0b6-274">il processo di flusso Analitica Hello esegue hello query su dati di esempio hello e visualizza l'output di hello nella parte inferiore di hello della finestra hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-274">hello Stream Analytics job runs hello query against hello sample data and displays hello output at hello bottom of hello window.</span></span> <span data-ttu-id="ea0b6-275">Indica che hub eventi hello e il processo di Streaming Analitica hello siano configurati correttamente.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-275">This tells you that hello event hub and hello Streaming Analytics job are configured correctly.</span></span> <span data-ttu-id="ea0b6-276">(Come già indicato, in seguito si creerà un sink di output di hello query può scrivere i dati.)</span><span class="sxs-lookup"><span data-stu-id="ea0b6-276">(As noted, later you'll create an output sink that hello query can write data to.)</span></span>

    ![Output del processo di Analisi di flusso con 73 record generati](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output.png)

    <span data-ttu-id="ea0b6-278">numero esatto di Hello di record da visualizzare dipenderà dal numero di record sono stato acquisito nell'esempio 3 minuti.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-278">hello exact number of records you see will depend on how many records were captured in your 3-minute sample.</span></span>
 
### <a name="reduce-hello-number-of-fields-using-a-column-projection"></a><span data-ttu-id="ea0b6-279">Ridurre il numero di hello di campi utilizzando una proiezione di colonna</span><span class="sxs-lookup"><span data-stu-id="ea0b6-279">Reduce hello number of fields using a column projection</span></span>

<span data-ttu-id="ea0b6-280">In molti casi, l'analisi non deve necessariamente tutte le colonne di hello hello flusso di input.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-280">In many cases, your analysis doesn't need all hello columns from hello input stream.</span></span> <span data-ttu-id="ea0b6-281">È possibile utilizzare una query tooproject ridurre il numero di campi di restituiti nella query pass-through hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-281">You can use a query tooproject a smaller set of returned fields than in hello pass-through query.</span></span>

1. <span data-ttu-id="ea0b6-282">Modificare la query hello in hello codice editor toohello che segue:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-282">Change hello query in hello code editor toohello following:</span></span>

        SELECT CallRecTime, SwitchNum, CallingIMSI, CallingNum, CalledNum 
        FROM 
            CallStream

2. <span data-ttu-id="ea0b6-283">Fare di nuovo clic su **Test**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-283">Click **Test** again.</span></span> 

    ![Output del processo di Analisi di flusso per la proiezione con 25 record generati](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-projection.png)
 
### <a name="count-incoming-calls-by-region-tumbling-window-with-aggregation"></a><span data-ttu-id="ea0b6-285">Numero di chiamate in ingresso per area: finestra a cascata con aggregazione</span><span class="sxs-lookup"><span data-stu-id="ea0b6-285">Count incoming calls by region: Tumbling window with aggregation</span></span>

<span data-ttu-id="ea0b6-286">Si supponga che si desidera toocount hello numero di chiamate in ingresso per ogni area.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-286">Suppose you want toocount hello number of incoming calls per region.</span></span> <span data-ttu-id="ea0b6-287">Nel flusso di dati, quando si desidera che le funzioni di aggregazione tooperform come il conteggio dei, è necessario toosegment hello flusso in unità temporali (poiché hello flusso di dati in modo efficace infinito).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-287">In streaming data, when you want tooperform aggregate functions like counting, you need toosegment hello stream into temporal units (since hello data stream itself is effectively endless).</span></span> <span data-ttu-id="ea0b6-288">A tale scopo, usare una [funzione finestra](stream-analytics-window-functions.md) di Analisi di flusso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-288">You do this using a Streaming Analytics [window function](stream-analytics-window-functions.md).</span></span> <span data-ttu-id="ea0b6-289">È quindi possibile utilizzare dati hello all'interno di tale finestra come unità.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-289">You can then work with hello data inside that window as a unit.</span></span>

<span data-ttu-id="ea0b6-290">Per questa trasformazione si intende creare una sequenza di finestre temporali che non si sovrappongano. Ogni finestra includerà un set distinto di dati che è possibile raggruppare e aggregare.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-290">For this transformation, you want a sequence of temporal windows that don't overlap—each window will have a discrete set of data that you can group and aggregate.</span></span> <span data-ttu-id="ea0b6-291">Questo tipo di finestra è tooas di cui si fa riferimento un *finestra a cascata* .</span><span class="sxs-lookup"><span data-stu-id="ea0b6-291">This type of window is referred tooas a *Tumbling window* .</span></span> <span data-ttu-id="ea0b6-292">Nella finestra a cascata hello, è possibile ottenere un conteggio delle chiamate in ingresso di hello raggruppato `SwitchNum`, che rappresenta il paese hello in cui ha origine chiamata hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-292">Within hello Tumbling window, you can get a count of hello incoming calls grouped by `SwitchNum`, which represents hello country where hello call originated.</span></span> 

1. <span data-ttu-id="ea0b6-293">Modificare la query hello in hello codice editor toohello che segue:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-293">Change hello query in hello code editor toohello following:</span></span>

        SELECT 
            System.Timestamp as WindowEnd, SwitchNum, COUNT(*) as CallCount 
        FROM
            CallStream TIMESTAMP BY CallRecTime 
        GROUP BY TUMBLINGWINDOW(s, 5), SwitchNum

    <span data-ttu-id="ea0b6-294">Questa query utilizza hello `Timestamp By` parola chiave in hello `FROM` toospecify clausola quale campo timestamp hello finestra a cascata hello toodefine toouse del flusso di input.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-294">This query uses hello `Timestamp By` keyword in hello `FROM` clause toospecify which timestamp field in hello input stream toouse toodefine hello Tumbling window.</span></span> <span data-ttu-id="ea0b6-295">In questo caso, finestra hello divide i dati hello in segmenti per hello `CallRecTime` campo in ogni record.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-295">In this case, hello window divides hello data into segments by hello `CallRecTime` field in each record.</span></span> <span data-ttu-id="ea0b6-296">(Se non viene specificato alcun campo, operazione di windowing hello utilizza ora hello che ogni evento arriva all'hub eventi hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-296">(If no field is specified, hello windowing operation uses hello time that each event arrives at hello event hub.</span></span> <span data-ttu-id="ea0b6-297">Vedere la sezione relativa a tempo di arrivo e tempo di applicazione in [Informazioni di riferimento sul linguaggio di query per l'analisi di flusso](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-297">See "Arrival Time Vs Application Time" in [Stream Analytics Query Language Reference](https://msdn.microsoft.com/library/azure/dn834998.aspx).</span></span> 

    <span data-ttu-id="ea0b6-298">proiezione Hello include `System.Timestamp`, che restituisce un timestamp di fine hello di ogni finestra.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-298">hello projection includes `System.Timestamp`, which returns a timestamp for hello end of each window.</span></span> 

    <span data-ttu-id="ea0b6-299">toospecify che si desidera toouse una finestra a cascata, utilizzare hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) funzione hello `GROUP BY `clausola.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-299">toospecify that you want toouse a Tumbling window, you use hello [TUMBLINGWINDOW](https://msdn.microsoft.com/library/dn835055.aspx) function in hello `GROUP BY `clause.</span></span> <span data-ttu-id="ea0b6-300">Nella funzione hello, specificare un'unità di tempo (da un giorno tooa microsecondi) e una dimensione della finestra (il numero di unità).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-300">In hello function, you specify a time unit (anywhere from a microsecond tooa day) and a window size (how many units).</span></span> <span data-ttu-id="ea0b6-301">In questo esempio, finestra a cascata hello costituito da intervalli di 5 secondi, per ottenere un conteggio in base al paese per chiamate relativi a ogni 5 secondi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-301">In this example, hello Tumbling window consists of 5-second intervals, so you will get a count by country for every 5 seconds' worth of calls.</span></span>

2. <span data-ttu-id="ea0b6-302">Fare di nuovo clic su **Test**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-302">Click **Test** again.</span></span> <span data-ttu-id="ea0b6-303">Nei risultati di hello, si noti che i timestamp hello in **WindowEnd** in incrementi di 5 secondi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-303">In hello results, notice that hello timestamps under **WindowEnd** are in 5-second increments.</span></span>

    ![Output del processo di Analisi di flusso per l'aggregazione con 13 record generati](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-aggregation.png)
 
### <a name="detect-sim-fraud-using-a-self-join"></a><span data-ttu-id="ea0b6-305">Rilevare una frode SIM mediante self-join</span><span class="sxs-lookup"><span data-stu-id="ea0b6-305">Detect SIM fraud using a self-join</span></span>

<span data-ttu-id="ea0b6-306">Per questo esempio, è possibile prendere in considerazione utilizzo fraudolento toobe chiamate provenienti da hello stesso utente, ma in posizioni diverse all'interno di 5 secondi una da altra.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-306">For this example, we can consider fraudulent usage toobe calls that originate from hello same user but in different locations within 5 seconds of one another.</span></span> <span data-ttu-id="ea0b6-307">Ad esempio, hello stesso utente legittimamente effettuare una chiamata da hello Stati Uniti e Australia in hello contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-307">For example, hello same user can't legitimately make a call from hello US and Australia at hello same time.</span></span> 

<span data-ttu-id="ea0b6-308">toocheck in questi casi, è possibile utilizzare un self join della hello streaming tooitself flusso di dati toojoin hello in base a hello `CallRecTime` valore.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-308">toocheck for these cases, you can use a self-join of hello streaming data toojoin hello stream tooitself based on hello `CallRecTime` value.</span></span> <span data-ttu-id="ea0b6-309">Sarà quindi possibile esaminare per chiamata registra dove hello `CallingIMSI` valore (Buongiorno originari numero) è hello stesso, ma hello `SwitchNum` valore (paese di origine) non è hello stesso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-309">You can then look for call records where hello `CallingIMSI` value (hello originating number) is hello same, but hello `SwitchNum` value (country of origin) is not hello same.</span></span>

<span data-ttu-id="ea0b6-310">Quando si utilizza un join con il flusso di dati, deve fornire join hello sono alcuni limiti per la misura hello corrispondenti alle righe possono essere separati in tempo.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-310">When you use a join with streaming data, hello join must provide some limits on how far hello matching rows can be separated in time.</span></span> <span data-ttu-id="ea0b6-311">(Come indicato in precedenza, hello flusso di dati è effettivamente infinito). limiti di tempo Hello per relazione hello specificati all'interno di hello `ON` clausola join hello, utilizzando hello `DATEDIFF` (funzione).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-311">(As noted earlier, hello streaming data is effectively endless.) hello time bounds for hello relationship are specified inside hello `ON` clause of hello join, using hello `DATEDIFF` function .</span></span> <span data-ttu-id="ea0b6-312">In questo caso, il join di hello è basato su un intervallo di 5 secondi di dati della chiamata.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-312">In this case, hello join is based on a 5-second interval of call data .</span></span>

1. <span data-ttu-id="ea0b6-313">Modificare la query hello in hello codice editor toohello che segue:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-313">Change hello query in hello code editor toohello following:</span></span> 

        SELECT  System.Timestamp as Time, 
            CS1.CallingIMSI, 
            CS1.CallingNum as CallingNum1, 
            CS2.CallingNum as CallingNum2, 
            CS1.SwitchNum as Switch1, 
            CS2.SwitchNum as Switch2 
        FROM CallStream CS1 TIMESTAMP BY CallRecTime 
            JOIN CallStream CS2 TIMESTAMP BY CallRecTime 
            ON CS1.CallingIMSI = CS2.CallingIMSI 
            AND DATEDIFF(ss, CS1, CS2) BETWEEN 1 AND 5 
        WHERE CS1.SwitchNum != CS2.SwitchNum

    <span data-ttu-id="ea0b6-314">Questa query è simile a un join SQL, ad eccezione di hello `DATEDIFF` funzione join hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-314">This query is like any SQL join except for hello `DATEDIFF` function in hello join.</span></span> <span data-ttu-id="ea0b6-315">Si tratta di una versione di `DATEDIFF` tooStreaming specifico Analitica e deve essere visualizzato in hello `ON...BETWEEN` clausola.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-315">This is a version of `DATEDIFF` that's specific tooStreaming Analytics, and it must appear in hello `ON...BETWEEN` clause.</span></span> <span data-ttu-id="ea0b6-316">i parametri di Hello sono un'unità di tempo (secondi in questo esempio) e gli alias di hello due origini di hello per il join hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-316">hello parameters are a time unit (seconds in this example) and hello aliases of hello two sources for hello join.</span></span> <span data-ttu-id="ea0b6-317">(Questo comportamento è diverso da hello SQL standard `DATEDIFF` (funzione).)</span><span class="sxs-lookup"><span data-stu-id="ea0b6-317">(This is different from hello standard SQL `DATEDIFF` function.)</span></span> 

    <span data-ttu-id="ea0b6-318">Hello `WHERE` clausola include condizione hello che contrassegna chiamata fraudolenti hello: opzioni origine hello non sono hello stesso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-318">hello `WHERE` clause includes hello condition that flags hello fraudulent call: hello originating switches are not hello same.</span></span> 

2. <span data-ttu-id="ea0b6-319">Fare di nuovo clic su **Test**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-319">Click **Test** again.</span></span> 

    ![Output del processo di Analisi di flusso per il self-join con 6 record generati](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-sample-output-self-join.png)

3. <span data-ttu-id="ea0b6-321">Fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-321">Click **Save**.</span></span> <span data-ttu-id="ea0b6-322">Questa query di self join hello viene salvata come parte del processo di Streaming Analitica hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-322">This saves hello self-join query as part of hello Streaming Analytics job.</span></span> <span data-ttu-id="ea0b6-323">(Non salva i dati di esempio hello).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-323">(It doesn't save hello sample data.)</span></span>

    ![Salvare il processo di Analisi di flusso](./media/stream-analytics-real-time-fraud-detection/stream-analytics-query-editor-save-button-new-portal.png)

## <a name="create-an-output-sink-toostore-transformed-data"></a><span data-ttu-id="ea0b6-325">Creare un sink di output trasformati toostore dati</span><span class="sxs-lookup"><span data-stu-id="ea0b6-325">Create an output sink toostore transformed data</span></span>

<span data-ttu-id="ea0b6-326">Sono stati definiti un flusso di eventi, un input tooingest degli hub eventi e tooperform una query una trasformazione tramite flusso hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-326">You've defined an event stream, an event hub input tooingest events, and a query tooperform a transformation over hello stream.</span></span> <span data-ttu-id="ea0b6-327">ultimo passaggio Hello è toodefine sink di output per il processo di hello, vale a dire un hello toowrite sul posto trasformato flusso.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-327">hello last step is toodefine an output sink for hello job—that is, a place toowrite hello transformed stream to.</span></span> 

<span data-ttu-id="ea0b6-328">È possibile usare molte risorse come sink di output: un database di SQL Server, un'archiviazione tabelle, un'archiviazione Data Lake, Power BI e addirittura un altro hub eventi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-328">You can use many resources as output sinks—a SQL Server database, table storage, Data Lake storage, Power BI, and even another event hub.</span></span> <span data-ttu-id="ea0b6-329">Per questa esercitazione, verrà scritto il flusso di hello tooAzure archiviazione Blob, che è una scelta tipica per raccogliere informazioni sull'evento per analisi successive, in quanto avviene per dati non strutturati.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-329">For this tutorial, you'll write hello stream tooAzure Blob Storage, which is a typical choice for collecting event information for later analysis, since it accommodates unstructured data .</span></span>

<span data-ttu-id="ea0b6-330">Se esiste già un account di archiviazione BLOB, è possibile usarlo.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-330">If you have an existing blob storage account, you can use that.</span></span> <span data-ttu-id="ea0b6-331">Per questa esercitazione, vi mostreremo come toocreate account una nuova risorsa di archiviazione sufficiente per questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-331">For this tutorial, we'll show you how toocreate a new storage account just for this tutorial.</span></span>

### <a name="create-an-azure-blob-storage-account"></a><span data-ttu-id="ea0b6-332">Creare un account Archiviazione BLOB di Azure</span><span class="sxs-lookup"><span data-stu-id="ea0b6-332">Create an Azure Blob Storage account</span></span>

1. <span data-ttu-id="ea0b6-333">Nel portale di Azure hello, restituire pannello processo di Streaming Analitica toohello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-333">In hello Azure portal, return toohello Streaming Analytics job blade.</span></span> <span data-ttu-id="ea0b6-334">(Se è stata chiusa pannello hello, cercare `sa_frauddetection_job_demo` in hello **tutte le risorse** blade.)</span><span class="sxs-lookup"><span data-stu-id="ea0b6-334">(If you closed hello blade, search for `sa_frauddetection_job_demo` in hello **All resources** blade.)</span></span>
2. <span data-ttu-id="ea0b6-335">In hello **processo topologia** fare clic su hello **Output** casella.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-335">In hello **Job Topology** section, click hello **Output** box.</span></span> 
3. <span data-ttu-id="ea0b6-336">In hello **output** pannello, fare clic su  **+ &nbsp;Aggiungi** e compilare pannello hello con questi valori:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-336">In hello **Outputs** blade, click **+&nbsp;Add** and then fill out hello blade with these values:</span></span>

    * <span data-ttu-id="ea0b6-337">**Alias di output**: utilizza il nome di hello `CallStream-FraudulentCalls`.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-337">**Output alias**: Use hello name `CallStream-FraudulentCalls`.</span></span> 
    * <span data-ttu-id="ea0b6-338">**Sink**: selezionare **Archivio BLOB**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-338">**Sink**: Select **Blob storage**.</span></span>
    * <span data-ttu-id="ea0b6-339">**Opzioni di importazione**: selezionare **Usa l'archiviazione BLOB della sottoscrizione corrente**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-339">**Import options**: Select **Use blob storage from current subscription**.</span></span>
    * <span data-ttu-id="ea0b6-340">**Account di archiviazione**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-340">**Storage account**.</span></span> <span data-ttu-id="ea0b6-341">Selezionare **Crea un nuovo account di archiviazione**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-341">Select **Create new storage account.**</span></span>
    * <span data-ttu-id="ea0b6-342">**Account di archiviazione** (seconda casella).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-342">**Storage account** (second box).</span></span> <span data-ttu-id="ea0b6-343">Immettere `YOURNAMEsademo`, dove `YOURNAME` rappresenta il nome o un'altra stringa univoca.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-343">Enter `YOURNAMEsademo`, where `YOURNAME` is your name or another unique string.</span></span> <span data-ttu-id="ea0b6-344">nome Hello può utilizzare solo lettere minuscole e numeri e deve essere univoco in Azure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-344">hello name can use only lowercase letters and numbers, and it must be unique across Azure.</span></span> 
    * <span data-ttu-id="ea0b6-345">**Contenitore**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-345">**Container**.</span></span> <span data-ttu-id="ea0b6-346">Immettere `sa-fraudulentcalls-demo`.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-346">Enter `sa-fraudulentcalls-demo`.</span></span>
    <span data-ttu-id="ea0b6-347">nome account di archiviazione Hello e nome del contenitore sono tooprovide insieme usato un URI per l'archiviazione blob di hello, simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-347">hello storage account name and container name are used together tooprovide a URI for hello blob storage, like this:</span></span> 

    `http://yournamesademo.blob.core.windows.net/sa-fraudulentcalls-demo/...`
    
    ![Pannello "Nuovo output" per il processo di Analisi di flusso](./media/stream-analytics-real-time-fraud-detection/stream-analytics-create-output-blob-storage-new-console.png)
    
4. <span data-ttu-id="ea0b6-349">Fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-349">Click **Create**.</span></span> 

    <span data-ttu-id="ea0b6-350">Azure crea account di archiviazione hello e genera automaticamente una chiave.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-350">Azure creates hello storage account and generates a key automatically.</span></span> 

5. <span data-ttu-id="ea0b6-351">Chiude hello **output** blade.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-351">Close hello **Outputs** blade.</span></span> 

## <a name="start-hello-streaming-analytics-job"></a><span data-ttu-id="ea0b6-352">Avviare il processo di Streaming Analitica hello</span><span class="sxs-lookup"><span data-stu-id="ea0b6-352">Start hello Streaming Analytics job</span></span>

<span data-ttu-id="ea0b6-353">il processo di Hello è ora configurato.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-353">hello job is now configured.</span></span> <span data-ttu-id="ea0b6-354">È stato specificato un input (hub eventi hello), una trasformazione (toolook hello query per le chiamate fraudolente) e un output (archiviazione blob).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-354">You've specified an input (hello event hub), a transformation (hello query toolook for fraudulent calls), and an output (blob storage).</span></span> <span data-ttu-id="ea0b6-355">È ora possibile avviare il processo di hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-355">You can now start hello job.</span></span> 

1. <span data-ttu-id="ea0b6-356">Verificare che hello TelcoGenerator app è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-356">Make sure hello TelcoGenerator app is running.</span></span>

2. <span data-ttu-id="ea0b6-357">Nel Pannello di hello processo, fare clic su **avviare**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-357">In hello job blade, click **Start**.</span></span>

    ![Avviare il processo di flusso Analitica hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-output.png)

3. <span data-ttu-id="ea0b6-359">In hello **inizio processo** per processo output ora di inizio, seleziona pannello **ora**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-359">In hello **Start job** blade, for Job output start time, select **Now**.</span></span> 

4. <span data-ttu-id="ea0b6-360">Fare clic su **Avvia**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-360">Click **Start**.</span></span> 

    ![Pannello "Avvia processo" per il processo di flusso Analitica hello](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-start-job-blade.png)

    <span data-ttu-id="ea0b6-362">Azure notifica che ha avviato il processo di hello e nel Pannello di processo hello, viene visualizzato stato hello **esecuzione**.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-362">Azure notifies you when hello job has started, and in hello job blade, hello status is displayed as **Running**.</span></span>

    ![Stato del processo di Analisi di flusso indicante "In esecuzione"](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-running-status.png)
    

## <a name="examine-hello-transformed-data"></a><span data-ttu-id="ea0b6-364">Esaminare i dati trasformato hello</span><span class="sxs-lookup"><span data-stu-id="ea0b6-364">Examine hello transformed data</span></span>

<span data-ttu-id="ea0b6-365">È stato creato un processo di Analisi di flusso completo.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-365">You now have a complete Streaming Analytics job.</span></span> <span data-ttu-id="ea0b6-366">processo Hello è esaminare un flusso di metadati di chiamata telefonica, cercando fraudolenti telefonate in tempo reale e scrivere le informazioni relative a tali toostorage chiamate fraudolenti.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-366">hello job is examining a stream of phone call metadata, looking for fraudulent phone calls in real time, and writing information about those fraudulent calls toostorage.</span></span> 

<span data-ttu-id="ea0b6-367">toocomplete questa esercitazione, è possibile toolook dati hello vengono acquisiti dal processo di Streaming Analitica hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-367">toocomplete this tutorial, you might want toolook at hello data being captured by hello Streaming Analytics job.</span></span> <span data-ttu-id="ea0b6-368">dati Hello viene scritto tooAzure archiviazione BLOB in blocchi (file).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-368">hello data is being written tooAzure Blog Storage in chunks (files).</span></span> <span data-ttu-id="ea0b6-369">È possibile usare qualsiasi strumento che legga Archiviazione BLOB di Azure.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-369">You can use any tool that reads Azure Blob Storage.</span></span> <span data-ttu-id="ea0b6-370">Come indicato nella sezione Prerequisiti di hello, è possibile utilizzare le estensioni di Azure in Visual Studio o è possibile utilizzare uno strumento come [Azure Storage Explorer](http://storageexplorer.com/) o [Esplora Azure](http://www.cerebrata.com/products/azure-explorer/introduction).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-370">As noted in hello Prerequisites section, you can use Azure extensions in Visual Studio, or you can use a tool like [Azure Storage Explorer](http://storageexplorer.com/) or [Azure Explorer](http://www.cerebrata.com/products/azure-explorer/introduction).</span></span> 

<span data-ttu-id="ea0b6-371">Quando si esamina il contenuto di hello di un file nell'archiviazione blob, vedere simile alla seguente hello:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-371">When you examine hello contents of a file in blob storage, you see something like hello following :</span></span>

![Archiviazione BLOB di Azure con output di Analisi di flusso](./media/stream-analytics-real-time-fraud-detection/stream-analytics-sa-job-blob-storage-view.png)
 

## <a name="clean-up-resources"></a><span data-ttu-id="ea0b6-373">Pulire le risorse</span><span class="sxs-lookup"><span data-stu-id="ea0b6-373">Clean up resources</span></span>

<span data-ttu-id="ea0b6-374">Sono disponibili ulteriori articoli che continuano con uno scenario di rilevamento di frodi hello e che usano risorse hello creati in questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-374">We have additional articles that continue with hello fraud-detection scenario and that use hello resources that you've created in this tutorial.</span></span> <span data-ttu-id="ea0b6-375">Se si desidera toocontinue, vedere i suggerimenti di hello in **passaggi successivi** in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-375">If you want toocontinue, see hello suggestions under **Next steps** later.</span></span>

<span data-ttu-id="ea0b6-376">Tuttavia, se completato e non è necessario aver creato le risorse di hello, è possibile eliminarle in modo che non si incorrere in costi di Azure non necessari.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-376">However, if you're done and you don't need hello resources you've created, you can delete them so that you don't incur unnecessary Azure charges.</span></span> <span data-ttu-id="ea0b6-377">In tal caso, si consiglia di hello seguenti:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-377">In that case, we suggest that you do hello following:</span></span>

1. <span data-ttu-id="ea0b6-378">Arrestare il processo di Streaming Analitica hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-378">Stop hello Streaming Analytics job.</span></span> <span data-ttu-id="ea0b6-379">In hello **processi** pannello, fare clic su **arrestare** nella parte superiore di hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-379">In hello **Jobs** blade, click **Stop** at hello top.</span></span>
2. <span data-ttu-id="ea0b6-380">Arrestare l'app di telecomunicazioni generatore hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-380">Stop hello Telco Generator app.</span></span> <span data-ttu-id="ea0b6-381">Nella finestra di comando hello in cui è stato avviato app hello, premere Ctrl + C.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-381">In hello command window where you started hello app, press Ctrl+C.</span></span>
3. <span data-ttu-id="ea0b6-382">Se è stato creato un nuovo account di archiviazione BLOB solo per questa esercitazione, eliminarlo.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-382">If you created a new blob storage account just for this tutorial, delete it.</span></span> 
4. <span data-ttu-id="ea0b6-383">Eliminare il processo di Streaming Analitica hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-383">Delete hello Streaming Analytics job.</span></span>
5. <span data-ttu-id="ea0b6-384">Eliminazione dell'hub eventi hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-384">Delete hello event hub.</span></span>
6. <span data-ttu-id="ea0b6-385">Elimina spazio dei nomi hub di eventi hello.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-385">Delete hello event hub namespace.</span></span>

## <a name="get-support"></a><span data-ttu-id="ea0b6-386">Supporto</span><span class="sxs-lookup"><span data-stu-id="ea0b6-386">Get support</span></span>

<span data-ttu-id="ea0b6-387">Per ulteriore assistenza, provare il [Forum di Analisi dei flussi di Azure](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-387">For further assistance, try our [Azure Stream Analytics forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=AzureStreamAnalytics).</span></span>

## <a name="next-steps"></a><span data-ttu-id="ea0b6-388">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ea0b6-388">Next steps</span></span>

<span data-ttu-id="ea0b6-389">È possibile continuare questa esercitazione con hello seguenti articoli:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-389">You can continue this tutorial with hello following articles:</span></span>

* <span data-ttu-id="ea0b6-390">[Analisi di flusso e Power BI: dashboard di analisi in tempo reale per lo streaming dei dati](stream-analytics-power-bi-dashboard.md).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-390">[Stream Analytics and Power BI: A real-time analytics dashboard for streaming data](stream-analytics-power-bi-dashboard.md).</span></span> <span data-ttu-id="ea0b6-391">Questo articolo illustra come toosend hello telecomunicazioni output di hello Analitica flusso processo tooPower Business Intelligence per la visualizzazione in tempo reale e analisi.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-391">This article shows you how toosend hello TelCo output of hello Stream Analytics job tooPower BI for real-time visualization and analysis.</span></span>
* <span data-ttu-id="ea0b6-392">[Come dati toostore Analitica di flusso di Azure in una Cache di Redis di Azure utilizzando le funzioni di Azure](stream-analytics-functions-redis.md).</span><span class="sxs-lookup"><span data-stu-id="ea0b6-392">[How toostore data from Azure Stream Analytics in an Azure Redis Cache using Azure Functions](stream-analytics-functions-redis.md).</span></span> <span data-ttu-id="ea0b6-393">Questo articolo illustra come toouse Azure funzioni toowrite fraudolenti chiama tooan cache Redis di Azure tramite una coda del Bus di servizio.</span><span class="sxs-lookup"><span data-stu-id="ea0b6-393">This article shows how toouse Azure Functions toowrite fraudulent calls tooan Azure Redis cache via a Service Bus queue.</span></span>

<span data-ttu-id="ea0b6-394">Per altre informazioni generiche su Analisi di flusso, provare questi articoli:</span><span class="sxs-lookup"><span data-stu-id="ea0b6-394">For more information about Stream Analytics in general, try these articles:</span></span>

* [<span data-ttu-id="ea0b6-395">Introduzione tooAzure flusso Analitica</span><span class="sxs-lookup"><span data-stu-id="ea0b6-395">Introduction tooAzure Stream Analytics</span></span>](stream-analytics-introduction.md)
* [<span data-ttu-id="ea0b6-396">Ridimensionare i processi di Analisi dei flussi di Azure</span><span class="sxs-lookup"><span data-stu-id="ea0b6-396">Scale Azure Stream Analytics jobs</span></span>](stream-analytics-scale-jobs.md)
* [<span data-ttu-id="ea0b6-397">Informazioni di riferimento sul linguaggio di query di Analisi dei flussi di Azure</span><span class="sxs-lookup"><span data-stu-id="ea0b6-397">Azure Stream Analytics Query Language Reference</span></span>](https://msdn.microsoft.com/library/azure/dn834998.aspx)
* [<span data-ttu-id="ea0b6-398">Informazioni di riferimento sulle API REST di gestione di Analisi di flusso di Azure</span><span class="sxs-lookup"><span data-stu-id="ea0b6-398">Azure Stream Analytics Management REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/dn835031.aspx)
