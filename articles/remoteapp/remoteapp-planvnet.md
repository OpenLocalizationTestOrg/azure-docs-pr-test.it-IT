---
title: Come pianificare la rete virtuale per una raccolta Azure RemoteApp | Microsoft Docs
description: Informazioni su come pianificare la rete virtuale per una raccolta Azure RemoteApp.
services: remoteapp
documentationcenter: 
author: mghosh1616
manager: mbaldwin
ms.assetid: ad9aff0e-f374-49c0-951d-4a7be1c36de0
ms.service: remoteapp
ms.workload: compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 11/23/2016
ms.author: mbaldwin
ms.openlocfilehash: 1eb8115b13fb18074b4c4726b69e3d9faf387c32
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-plan-your-virtual-network-for-azure-remoteapp"></a><span data-ttu-id="3b6e0-103">Come pianificare la rete virtuale per Azure RemoteApp</span><span class="sxs-lookup"><span data-stu-id="3b6e0-103">How to plan your virtual network for Azure RemoteApp</span></span>
> [!IMPORTANT]
> <span data-ttu-id="3b6e0-104">Azure RemoteApp verrà sospeso a partire dal 31 agosto 2017.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-104">Azure RemoteApp is being discontinued on August 31, 2017.</span></span> <span data-ttu-id="3b6e0-105">Per i dettagli, vedere l' [annuncio](https://go.microsoft.com/fwlink/?linkid=821148) .</span><span class="sxs-lookup"><span data-stu-id="3b6e0-105">Read the [announcement](https://go.microsoft.com/fwlink/?linkid=821148) for details.</span></span>
> 
> 

<span data-ttu-id="3b6e0-106">Questo documento descrive come configurare la rete virtuale di Azure e la subnet per Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-106">This document describes how to set up your Azure virtual network (VNET) and the subnet for Azure RemoteApp.</span></span> <span data-ttu-id="3b6e0-107">Se non si ha familiarità con le reti virtuali di Azure, si tratta di una funzionalità che consente di virtualizzare l'infrastruttura di rete nel cloud e di creare soluzioni ibride con Azure e le risorse locali.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-107">If you are unfamiliar with Azure virtual networks, this is a capability that helps you to virtualize your network infrastructure to the cloud and to create hybrid solutions with Azure and your on-premises resources.</span></span> <span data-ttu-id="3b6e0-108">Per altre informazioni, leggere [qui](../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3b6e0-108">You can read more about it [here](../virtual-network/virtual-networks-overview.md).</span></span>

<span data-ttu-id="3b6e0-109">Per definire i criteri di protezione per il traffico, sia in ingresso che in uscita, nella rete virtuale in cui si distribuirà Azure RemoteApp, è consigliabile creare una subnet per Azure RemoteApp separata dal resto delle distribuzioni nella rete virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-109">If you want to define security policies for traffic (both incoming and outgoing) in your virtual network where you are deploying Azure RemoteApp, we strongly recommend creating a separate subnet for Azure RemoteApp from the rest of your deployments in the Azure virtual network.</span></span> <span data-ttu-id="3b6e0-110">Per altre informazioni sulla definizione dei criteri di sicurezza della subnet della rete virtuale di Azure, vedere [Che cos'è un gruppo di sicurezza di rete](../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="3b6e0-110">For more information on how to define security policies on your Azure virtual network subnet, please read [What is a Network Security Group (NSG)?](../virtual-network/virtual-networks-nsg.md).</span></span>

## <a name="types-of-azure-remoteapp-collections-with-azure-virtual-networks"></a><span data-ttu-id="3b6e0-111">Tipi di raccolte Azure RemoteApp con reti virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="3b6e0-111">Types of Azure RemoteApp collections with Azure virtual networks</span></span>
<span data-ttu-id="3b6e0-112">L'immagine seguente mostra le due diverse opzioni della raccolta per l'uso di una rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-112">The following graphics show the two different collection options when you want to use a virtual network.</span></span>

### <a name="azure-remoteapp-cloud-collection-with-vnet"></a><span data-ttu-id="3b6e0-113">Raccolta nel cloud di Azure RemoteApp con la rete virtuale</span><span class="sxs-lookup"><span data-stu-id="3b6e0-113">Azure RemoteApp cloud collection with VNET</span></span>
 ![Azure RemoteApp - Raccolta nel cloud con una rete virtuale](./media/remoteapp-planvpn/ra-cloudvpn.png)

<span data-ttu-id="3b6e0-115">L'immagine rappresenta una raccolta Azure RemoteApp dove tutte le risorse a cui gli host sessione di RemoteApp devono accedere sono distribuire in Azure.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-115">This represents an Azure RemoteApp collection where all the resources that the RemoteApp session hosts need to access are deployed in Azure.</span></span> <span data-ttu-id="3b6e0-116">Possono trovarsi nella stessa rete virtuale, ad esempio la rete virtuale di RemoteApp, o in una rete virtuale di Azure diversa.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-116">They can be in the same VNET as the RemoteApp VNET or a different VNET in Azure.</span></span>

### <a name="azure-remoteapp-hybrid-collection-with-vnet"></a><span data-ttu-id="3b6e0-117">Raccolta ibrida di Azure RemoteApp con la rete virtuale</span><span class="sxs-lookup"><span data-stu-id="3b6e0-117">Azure RemoteApp hybrid collection with VNET</span></span>
![Azure RemoteApp - Raccolta ibrida con una rete virtuale](./media/remoteapp-planvpn/ra-hybridvpn.png)

<span data-ttu-id="3b6e0-119">L'immagine rappresenta una raccolta Azure RemoteApp dove alcune risorse a cui gli host sessione di RemoteApp devono accedere sono distribuire in locale.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-119">This represents an Azure RemoteApp collection where some of the resources that the RemoteApp session hosts need to access are deployed on-premises.</span></span> <span data-ttu-id="3b6e0-120">La rete virtuale di RemoteApp è collegata alla rete locale usando le tecnologie ibride di Azure, ad esempio VPN da sito a sito o Express Route.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-120">The RemoteApp VNET is linked to the on-premises network using Azure hybrid technologies like site-to-site VPN or Express Route.</span></span>

## <a name="how-the-system-works"></a><span data-ttu-id="3b6e0-121">Funzionamento del sistema</span><span class="sxs-lookup"><span data-stu-id="3b6e0-121">How the system works</span></span>
<span data-ttu-id="3b6e0-122">Dietro le quinte Azure RemoteApp distribuisce le macchine virtuali di Azure (con l'immagine caricata dall'utente) alla subnet della rete virtuale scelta durante il provisioning.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-122">Under the covers Azure RemoteApp deploys Azure virtual machines (with your uploaded image) to the virtual network subnet that you chose during provisioning.</span></span> <span data-ttu-id="3b6e0-123">Se si è scelta una raccolta ibrida, la funzionalità prova a risolvere il nome di dominio completo del controller di dominio immesso nel flusso di lavoro di provisioning con il server DNS fornito nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-123">If you opted for a hybrid collection, we try to resolve the FQDN of the domain controller you entered in the provisioning workflow with the DNS server provided in the virtual network.</span></span>  
<span data-ttu-id="3b6e0-124">Se ci si connette a una rete virtuale esistente, assicurarsi di esporre le porte necessarie nei gruppi di sicurezza di rete della subnet di Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-124">If you are connecting to an existing virtual network, make sure to expose the necessary ports in your network security groups in your Azure RemoteApp subnet.</span></span> 

<span data-ttu-id="3b6e0-125">È consigliabile usare una [subnet sufficientemente estesa per Azure RemoteApp](remoteapp-vnetsizing.md).</span><span class="sxs-lookup"><span data-stu-id="3b6e0-125">We recommend you use a [large enough  subnet for Azure RemoteApp](remoteapp-vnetsizing.md).</span></span> <span data-ttu-id="3b6e0-126">La più estesa supportata da una rete virtuale di Azure è /8 (usando le definizioni della subnet CIDR).</span><span class="sxs-lookup"><span data-stu-id="3b6e0-126">The largest supported by Azure Virtual network is /8 (using CIDR subnet definitions).</span></span> <span data-ttu-id="3b6e0-127">La subnet deve essere sufficientemente estesa per contenere tutte le macchine virtuali di Azure RemoteApp nel momento in cui si verifica un aumento delle risorse quando più utenti accedono alle app.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-127">Your subnet should be large enough to accommodate all the Azure RemoteApp VMs during scale-up when more users are accessing the apps.</span></span> 

<span data-ttu-id="3b6e0-128">Di seguito sono elencati gli elementi che  è necessario abilitare nella subnet della rete virtuale:</span><span class="sxs-lookup"><span data-stu-id="3b6e0-128">Following are the things you will need to enable on your virtual network subnet:</span></span> 

1. <span data-ttu-id="3b6e0-129">Consentire il traffico in uscita dalla subnet sull'intervallo di porte da 10101 a 10175 per comunicare con uno dei servizi interni di Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-129">Outbound traffic from the subnet should be allowed on port range 10101-10175 to communicate with one of the internal Azure RemoteApp services.</span></span>
2. <span data-ttu-id="3b6e0-130">Consentire il traffico in uscita dalla subnet per connettersi al servizio di archiviazione di Azure sulla porta 443.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-130">Outbound traffic should be allowed from your subnet to connect to Azure Storage on port 443</span></span>
3. <span data-ttu-id="3b6e0-131">Se Active Directory è ospitato in Azure, assicurarsi che tutte le macchine virtuali nella subnet della rete virtuale per Azure RemoteApp possano connettersi al controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-131">If you have Active Directory hosted in Azure, make sure any VM within the virtual network subnet for Azure RemoteApp is able to connect to that domain controller.</span></span> <span data-ttu-id="3b6e0-132">Il DNS della rete virtuale dovrà essere in grado di risolvere il nome di dominio completo di questo controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-132">The DNS in the virtual network should be able to resolve the FQDN of this domain controller.</span></span>

## <a name="virtual-network-with-forced-tunneling"></a><span data-ttu-id="3b6e0-133">Rete virtuale con tunneling forzato</span><span class="sxs-lookup"><span data-stu-id="3b6e0-133">Virtual network with forced tunneling</span></span>
<span data-ttu-id="3b6e0-134">[tunneling forzato](../vpn-gateway/vpn-gateway-about-forced-tunneling.md) ora è supportato per tutte le nuove raccolte Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-134">[Forced tunneling](../vpn-gateway/vpn-gateway-about-forced-tunneling.md) is now supported for all new Azure RemoteApp collections.</span></span> <span data-ttu-id="3b6e0-135">Attualmente non è supportata la migrazione di una raccolta esistente per supportare il tunneling forzato.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-135">We currently do not support the migration of an existing collection to support forced tunneling.</span></span>  <span data-ttu-id="3b6e0-136">Sarà necessario eliminare tutte le raccolte esistenti usando la rete virtuale collegata ad Azure RemoteApp e crearne di nuove per abilitare il tunneling forzato nelle raccolte.</span><span class="sxs-lookup"><span data-stu-id="3b6e0-136">You will have to delete all your existing collections using the VNET that you are linking to Azure RemoteApp and create a new one to get forced tunneling enabled on your collections.</span></span> 

