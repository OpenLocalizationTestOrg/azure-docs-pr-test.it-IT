---
title: Configurare connessioni protette a cluster di Azure Service Fabric | Documentazione Microsoft
description: Scoprire come usare Visual Studio per configurare connessioni sicure supportate dal cluster di Service Fabric di Azure.
services: service-fabric
documentationcenter: na
author: cawaMS
manager: paulyuk
editor: tglee
ms.assetid: 80501867-dd7a-4648-8bd6-d4f26b68402d
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 8/04/2017
ms.author: cawa
ms.openlocfilehash: dc07b2f38d6fd2de941ebbe99303f6e63cbf122d
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="configure-secure-connections-to-a-service-fabric-cluster-from-visual-studio"></a><span data-ttu-id="6ff93-103">Configurare connessioni protette a un cluster Service Fabric da Visual Studio</span><span class="sxs-lookup"><span data-stu-id="6ff93-103">Configure secure connections to a Service Fabric cluster from Visual Studio</span></span>
<span data-ttu-id="6ff93-104">Scoprire come usare Visual Studio per accedere in modo sicuro a un cluster di Service Fabric di Azure con i criteri di controllo di accesso configurati.</span><span class="sxs-lookup"><span data-stu-id="6ff93-104">Learn how to use Visual Studio to securely access an Azure Service Fabric cluster with access control policies configured.</span></span>

## <a name="cluster-connection-types"></a><span data-ttu-id="6ff93-105">Tipi di connessione del cluster</span><span class="sxs-lookup"><span data-stu-id="6ff93-105">Cluster connection types</span></span>
<span data-ttu-id="6ff93-106">Il cluster di Service Fabric di Azure supporta due tipi di connessioni: connessioni **non sicure** e connessioni sicure **basate sui certificati x509**.</span><span class="sxs-lookup"><span data-stu-id="6ff93-106">Two types of connections are supported by the Azure Service Fabric cluster: **non-secure** connections and **x509 certificate-based** secure connections.</span></span> <span data-ttu-id="6ff93-107">Per i cluster di Service Fabric ospitati in locale, sono supportate anche le autenticazioni **Windows** e **dSTS**. È necessario configurare il tipo di connessione del cluster quando viene creato il cluster.</span><span class="sxs-lookup"><span data-stu-id="6ff93-107">(For Service Fabric clusters hosted on-premises, **Windows** and **dSTS** authentications are also supported.) You have to configure the cluster connection type when the cluster is being created.</span></span> <span data-ttu-id="6ff93-108">Una volta creato, il tipo di connessione non può essere modificato.</span><span class="sxs-lookup"><span data-stu-id="6ff93-108">Once it's created, the connection type can’t be changed.</span></span>

<span data-ttu-id="6ff93-109">Gli strumenti di Service Fabric di Visual Studio supportano tutti i tipi di autenticazione per la connessione a un cluster per la pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="6ff93-109">The Visual Studio Service Fabric tools support all authentication types for connecting to a cluster for publishing.</span></span> <span data-ttu-id="6ff93-110">Vedere [Configurazione di cluster di infrastruttura di servizi dal portale di Azure](service-fabric-cluster-creation-via-portal.md) per istruzioni su come configurare un cluster Service Fabric sicuro.</span><span class="sxs-lookup"><span data-stu-id="6ff93-110">See [Setting up a Service Fabric cluster from the Azure portal](service-fabric-cluster-creation-via-portal.md) for instructions on how to set up a secure Service Fabric cluster.</span></span>

## <a name="configure-cluster-connections-in-publish-profiles"></a><span data-ttu-id="6ff93-111">Configurare le connessioni del cluster in profili di pubblicazione</span><span class="sxs-lookup"><span data-stu-id="6ff93-111">Configure cluster connections in publish profiles</span></span>
<span data-ttu-id="6ff93-112">Se si pubblica un progetto di Service Fabric da Visual Studio, usare la finestra di dialogo **Pubblica applicazione di Service Fabric** per scegliere un cluster di Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="6ff93-112">If you publish a Service Fabric project from Visual Studio, use the **Publish Service Fabric Application** dialog box to choose an Azure Service Fabric cluster.</span></span> <span data-ttu-id="6ff93-113">In **Endpoint connessione** selezionare un cluster esistente nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="6ff93-113">Under **Connection endpoint**, select an existing cluster under your subscription.</span></span>

![La finestra di dialogo **Pubblica applicazione di Service Fabric** viene usata per configurare una connessione di Service Fabric.][publishdialog]

<span data-ttu-id="6ff93-115">La finestra di dialogo **Pubblica applicazione di Service Fabric** convalida automaticamente la connessione del cluster.</span><span class="sxs-lookup"><span data-stu-id="6ff93-115">The **Publish Service Fabric Application** dialog box automatically validates the cluster connection.</span></span> <span data-ttu-id="6ff93-116">Se richiesto, accedere all'account di Azure.</span><span class="sxs-lookup"><span data-stu-id="6ff93-116">If prompted, sign in to your Azure account.</span></span> <span data-ttu-id="6ff93-117">Se la convalida riesce, significa che il sistema ha i certificati corretti installati per la connessione al cluster in modo sicuro, o il cluster non è protetto.</span><span class="sxs-lookup"><span data-stu-id="6ff93-117">If validation passes, it means that your system has the correct certificates installed to connect to the cluster securely, or your cluster is non-secure.</span></span> <span data-ttu-id="6ff93-118">Gli errori di convalida possono essere causati da problemi di rete o se il sistema non è stato correttamente configurato per connettersi a un cluster sicuro.</span><span class="sxs-lookup"><span data-stu-id="6ff93-118">Validation failures can be caused by network issues or by not having your system correctly configured to connect to a secure cluster.</span></span>

![La finestra di dialogo **Pubblica applicazione di Service Fabric** convalida una connessione al cluster di Service Fabric esistente correttamente configurata.][selectsfcluster]

### <a name="to-connect-to-a-secure-cluster"></a><span data-ttu-id="6ff93-120">Per connettersi a un cluster protetto</span><span class="sxs-lookup"><span data-stu-id="6ff93-120">To connect to a secure cluster</span></span>
1. <span data-ttu-id="6ff93-121">Assicurarsi che sia possibile accedere a uno dei certificati client attendibili per il cluster di destinazione.</span><span class="sxs-lookup"><span data-stu-id="6ff93-121">Make sure you can access one of the client certificates that the destination cluster trusts.</span></span> <span data-ttu-id="6ff93-122">Il certificato viene condiviso in genere come un file di scambio di informazioni personali (.pfx).</span><span class="sxs-lookup"><span data-stu-id="6ff93-122">The certificate is usually shared as a Personal Information Exchange (.pfx) file.</span></span> <span data-ttu-id="6ff93-123">Vedere [Configurazione di cluster di infrastruttura di servizi dal portale di Azure](service-fabric-cluster-creation-via-portal.md) per informazioni su come configurare il server e garantire l'accesso a un client.</span><span class="sxs-lookup"><span data-stu-id="6ff93-123">See [Setting up a Service Fabric cluster from the Azure portal](service-fabric-cluster-creation-via-portal.md) for how to configure the server to grant access to a client.</span></span>
2. <span data-ttu-id="6ff93-124">Installare il certificato attendibile.</span><span class="sxs-lookup"><span data-stu-id="6ff93-124">Install the trusted certificate.</span></span> <span data-ttu-id="6ff93-125">A tale scopo, fare doppio clic sul file .pfx, o usare lo script di PowerShell Import-PfxCertificate per importare i certificati.</span><span class="sxs-lookup"><span data-stu-id="6ff93-125">To do this, double-click the .pfx file, or use the PowerShell script Import-PfxCertificate to import the certificates.</span></span> <span data-ttu-id="6ff93-126">Installare il certificato in **Cert:\LocalMachine\My**.</span><span class="sxs-lookup"><span data-stu-id="6ff93-126">Install the certificate to **Cert:\LocalMachine\My**.</span></span> <span data-ttu-id="6ff93-127">È anche possibile accettare tutte le impostazioni predefinite durante l'importazione del certificato.</span><span class="sxs-lookup"><span data-stu-id="6ff93-127">It's OK to accept all default settings while importing the certificate.</span></span>
3. <span data-ttu-id="6ff93-128">Scegliere il comando **Pubblica...** nel menu di scelta rapida del progetto per aprire la finestra di dialogo **Pubblica applicazione Azure** e quindi selezionare il cluster di destinazione.</span><span class="sxs-lookup"><span data-stu-id="6ff93-128">Choose the **Publish...** command on the shortcut menu of the project to open the **Publish Azure Application** dialog box and then select the target cluster.</span></span> <span data-ttu-id="6ff93-129">Lo strumento automaticamente risolve la connessione e salva i parametri di connessione protetta nel profilo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="6ff93-129">The tool automatically resolves the connection and saves the secure connection parameters in the publish profile.</span></span>
4. <span data-ttu-id="6ff93-130">Facoltativo: è possibile modificare il profilo di pubblicazione in modo da specificare una connessione sicura al cluster.</span><span class="sxs-lookup"><span data-stu-id="6ff93-130">Optional: You can edit the publish profile to specify a secure cluster connection.</span></span>
   
   <span data-ttu-id="6ff93-131">Poiché si sta modificando manualmente il file XML del profilo di pubblicazione per specificare le informazioni del certificato, assicurarsi di prendere nota del nome di archivio del certificati, la posizione dell’archivio e l’identificazione personale del certificato.</span><span class="sxs-lookup"><span data-stu-id="6ff93-131">Since you're manually editing the Publish Profile XML file to specify the certificate information, be sure to note the certificate store name, store location, and certificate thumbprint.</span></span> <span data-ttu-id="6ff93-132">È necessario fornire questi valori per il nome dell'archivio del certificato e il percorso dell'archivio.</span><span class="sxs-lookup"><span data-stu-id="6ff93-132">You'll need to provide these values for the certificate's store name and store location.</span></span> <span data-ttu-id="6ff93-133">Per altre informazioni, vedere [Procedura: recuperare l'identificazione personale di un certificato](https://msdn.microsoft.com/library/ms734695\(v=vs.110\).aspx).</span><span class="sxs-lookup"><span data-stu-id="6ff93-133">See [How to: Retrieve the Thumbprint of a Certificate](https://msdn.microsoft.com/library/ms734695\(v=vs.110\).aspx) for more information.</span></span>
   
   <span data-ttu-id="6ff93-134">È possibile usare i parametri *ClusterConnectionParameters* per specificare i parametri di PowerShell da utilizzare quando ci si connette al cluster di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="6ff93-134">You can use the *ClusterConnectionParameters* parameters to specify the PowerShell parameters to use when connecting to the Service Fabric cluster.</span></span> <span data-ttu-id="6ff93-135">I parametri validi sono quelli che vengono accettati dal cmdlet Connect-ServiceFabricCluster.</span><span class="sxs-lookup"><span data-stu-id="6ff93-135">Valid parameters are any that are accepted by the Connect-ServiceFabricCluster cmdlet.</span></span> <span data-ttu-id="6ff93-136">Per un elenco dei parametri disponibili, vedere [Connect-ServiceFabricCluster](https://msdn.microsoft.com/library/mt125938.aspx) .</span><span class="sxs-lookup"><span data-stu-id="6ff93-136">See [Connect-ServiceFabricCluster](https://msdn.microsoft.com/library/mt125938.aspx) for a list of available parameters.</span></span>
   
   <span data-ttu-id="6ff93-137">Se si pubblica in un cluster remoto, è necessario specificare i parametri appropriati per tale cluster specifico.</span><span class="sxs-lookup"><span data-stu-id="6ff93-137">If you’re publishing to a remote cluster, you need to specify the appropriate parameters for that specific cluster.</span></span> <span data-ttu-id="6ff93-138">Di seguito è riportato un esempio per la connessione a un cluster non sicuro:</span><span class="sxs-lookup"><span data-stu-id="6ff93-138">The following is an example of connecting to a non-secure cluster:</span></span>
   
   `<ClusterConnectionParameters ConnectionEndpoint="mycluster.westus.cloudapp.azure.com:19000" />`
   
   <span data-ttu-id="6ff93-139">Di seguito è riportato un esempio per la connessione a un cluster protetto basato sul certificato x509:</span><span class="sxs-lookup"><span data-stu-id="6ff93-139">Here’s an example for connecting to an x509 certificate-based secure cluster:</span></span>
   
   ```xml
   <ClusterConnectionParameters
   ConnectionEndpoint="mycluster.westus.cloudapp.azure.com:19000"
   X509Credential="true"
   ServerCertThumbprint="0123456789012345678901234567890123456789"
   FindType="FindByThumbprint"
   FindValue="9876543210987654321098765432109876543210"
   StoreLocation="CurrentUser"
   StoreName="My" />
   ```
5. <span data-ttu-id="6ff93-140">Modificare tutte le altre impostazioni necessarie, ad esempio i parametri di aggiornamento e la posizione del file del parametro dell'applicazione, quindi pubblicare l'applicazione dalla finestra di dialogo **Publish Service Fabric Application** in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="6ff93-140">Edit any other necessary settings, such as upgrade parameters and Application Parameter file location, and then publish your application from the **Publish Service Fabric Application** dialog box in Visual Studio.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6ff93-141">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="6ff93-141">Next steps</span></span>
<span data-ttu-id="6ff93-142">Per ulteriori informazioni sull'accesso ai cluster di Infrastruttura di servizi, vedere l'articolo relativo a come [visualizzare il cluster con Service Fabric Explorer](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="6ff93-142">For more information about accessing Service Fabric clusters, see [Visualizing your cluster by using Service Fabric Explorer](service-fabric-visualizing-your-cluster.md).</span></span>

<!--Image references-->
[publishdialog]:./media/service-fabric-visualstudio-configure-secure-connections/publishdialog.png
[selectsfcluster]:./media/service-fabric-visualstudio-configure-secure-connections/selectsfcluster.png
