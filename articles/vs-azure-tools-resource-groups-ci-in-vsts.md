---
title: Integrazione continua in VS Team Services con i progetti di gruppi di risorse di Azure | Microsoft Docs
description: Descrive come configurare l'integrazione continua in Visual Studio Team Services con i progetti di distribuzione Gruppo di risorse di Azure in Visual Studio.
services: visual-studio-online
documentationcenter: na
author: mlearned
manager: erickson-doug
editor: 
ms.assetid: b81c172a-be87-4adc-861e-d20b94be9e38
ms.service: azure-resource-manager
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/01/2016
ms.author: mlearned
ms.openlocfilehash: e7d98ca3fa281a136595c37ed9b7e71de0cf7bff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="continuous-integration-in-visual-studio-team-services-using-azure-resource-group-deployment-projects"></a><span data-ttu-id="aa739-103">Integrazione continua in Visual Studio Team Services con i progetti di distribuzione Gruppo di risorse di Azure</span><span class="sxs-lookup"><span data-stu-id="aa739-103">Continuous integration in Visual Studio Team Services using Azure Resource Group deployment projects</span></span>
<span data-ttu-id="aa739-104">Per distribuire un modello di Azure, eseguire attività in varie fasi, ovvero compilazione, test, copia in Azure (detta anche "staging") e distribuzione del modello.</span><span class="sxs-lookup"><span data-stu-id="aa739-104">To deploy an Azure template, you perform tasks in various stages: Build, Test, Copy to Azure (also called "Staging"), and Deploy Template.</span></span> <span data-ttu-id="aa739-105">Esistono due modi diversi per distribuire i modelli in Visual Studio Team Services (VS Team Services).</span><span class="sxs-lookup"><span data-stu-id="aa739-105">There are two different ways to deploy templates to Visual Studio Team Services (VS Team Services).</span></span> <span data-ttu-id="aa739-106">Entrambi i metodi forniscono gli stessi risultati, quindi è opportuno scegliere quello che meglio si adatta al proprio flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="aa739-106">Both methods provide the same results, so choose the one that best fits your workflow.</span></span>

1. <span data-ttu-id="aa739-107">Aggiungere un singolo passaggio alla definizione di compilazione che esegue lo script di PowerShell incluso nel progetto di distribuzione Gruppo di risorse di Azure (Deploy-AzureResourceGroup.ps1).</span><span class="sxs-lookup"><span data-stu-id="aa739-107">Add a single step to your build definition that runs the PowerShell script that’s included in the Azure Resource Group deployment project (Deploy-AzureResourceGroup.ps1).</span></span> <span data-ttu-id="aa739-108">Lo script copia gli elementi e quindi distribuisce il modello.</span><span class="sxs-lookup"><span data-stu-id="aa739-108">The script copies artifacts and then deploys the template.</span></span>
2. <span data-ttu-id="aa739-109">Aggiungere più istruzioni di compilazione di VS Team Services, ognuna delle quali esegue un'attività della fase.</span><span class="sxs-lookup"><span data-stu-id="aa739-109">Add multiple VS Team Services build steps, each one performing a stage task.</span></span>

<span data-ttu-id="aa739-110">Questo articolo illustra entrambe le opzioni.</span><span class="sxs-lookup"><span data-stu-id="aa739-110">This article demonstrates both options.</span></span> <span data-ttu-id="aa739-111">La prima opzione ha il vantaggio di usare lo stesso script usato dagli sviluppatori di Visual Studio e di fornire coerenza durante tutto il ciclo di vita.</span><span class="sxs-lookup"><span data-stu-id="aa739-111">The first option has the advantage of using the same script used by developers in Visual Studio and providing consistency throughout the lifecycle.</span></span> <span data-ttu-id="aa739-112">La seconda opzione offre una comoda alternativa allo script predefinito.</span><span class="sxs-lookup"><span data-stu-id="aa739-112">The second option offers a convenient alternative to the built-in script.</span></span> <span data-ttu-id="aa739-113">Entrambe le procedure presuppongono che sia già disponibile un progetto di distribuzione di Visual Studio archiviato in VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="aa739-113">Both procedures assume you already have a Visual Studio deployment project checked into VS Team Services.</span></span>

## <a name="copy-artifacts-to-azure"></a><span data-ttu-id="aa739-114">Copiare gli elementi in Azure</span><span class="sxs-lookup"><span data-stu-id="aa739-114">Copy artifacts to Azure</span></span>
<span data-ttu-id="aa739-115">Indipendentemente dallo scenario, se sono disponibili elementi necessari per la distribuzione del modello, occorre concedere ad Azure Resource Manager l'accesso a tali elementi.</span><span class="sxs-lookup"><span data-stu-id="aa739-115">Regardless of the scenario, if you have any artifacts that are needed for template deployment, you must give Azure Resource Manager access to them.</span></span> <span data-ttu-id="aa739-116">Questi elementi possono includere file, ad esempio:</span><span class="sxs-lookup"><span data-stu-id="aa739-116">These artifacts can include files such as:</span></span>

* <span data-ttu-id="aa739-117">Modelli annidati</span><span class="sxs-lookup"><span data-stu-id="aa739-117">Nested templates</span></span>
* <span data-ttu-id="aa739-118">Script di configurazione e script DSC</span><span class="sxs-lookup"><span data-stu-id="aa739-118">Configuration scripts and DSC scripts</span></span>
* <span data-ttu-id="aa739-119">File binari dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="aa739-119">Application binaries</span></span>

### <a name="nested-templates-and-configuration-scripts"></a><span data-ttu-id="aa739-120">Modelli annidati e script di configurazione</span><span class="sxs-lookup"><span data-stu-id="aa739-120">Nested Templates and Configuration Scripts</span></span>
<span data-ttu-id="aa739-121">Quando si usano i modelli forniti da Visual Studio, o compilati con frammenti di Visual Studio, lo script di PowerShell non solo prepara gli elementi, ma imposta anche l'URI con parametri per le risorse per le diverse distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="aa739-121">When you use the templates provided by Visual Studio (or built with Visual Studio snippets), the PowerShell script not only stages the artifacts, it also parameterizes the URI for the resources for different deployments.</span></span> <span data-ttu-id="aa739-122">Lo script copia quindi gli elementi in un contenitore protetto in Azure, crea un token di firma di accesso condiviso per tale contenitore e quindi passa le informazioni alla distribuzione del modello.</span><span class="sxs-lookup"><span data-stu-id="aa739-122">The script then copies the artifacts to a secure container in Azure, creates a SaS token for that container, and then passes that information on to the template deployment.</span></span> <span data-ttu-id="aa739-123">Per altre informazioni sui modelli annidati, vedere [Creare una distribuzione di modelli](https://msdn.microsoft.com/library/azure/dn790564.aspx) .</span><span class="sxs-lookup"><span data-stu-id="aa739-123">See [Create a template deployment](https://msdn.microsoft.com/library/azure/dn790564.aspx) to learn more about nested templates.</span></span>  <span data-ttu-id="aa739-124">Quando si usano le attività in VS Team Services, è necessario selezionare le attività appropriate per la distribuzione del modello e, se necessario, passare i valori dei parametri dal passaggio di gestione temporanea alla distribuzione del modello.</span><span class="sxs-lookup"><span data-stu-id="aa739-124">When using tasks in VS Team Services, you must select the appropriate tasks for your template deployment and if necessary, pass parameter values from the staging step to the template deployment.</span></span>

## <a name="set-up-continuous-deployment-in-vs-team-services"></a><span data-ttu-id="aa739-125">Configurare la distribuzione continua in VS Team Services</span><span class="sxs-lookup"><span data-stu-id="aa739-125">Set up continuous deployment in VS Team Services</span></span>
<span data-ttu-id="aa739-126">Per chiamare lo script di PowerShell in VS Team Services, è necessario aggiornare la definizione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="aa739-126">To call the PowerShell script in VS Team Services, you need to update your build definition.</span></span> <span data-ttu-id="aa739-127">In breve, ecco i passaggi:</span><span class="sxs-lookup"><span data-stu-id="aa739-127">In brief, the steps are:</span></span> 

1. <span data-ttu-id="aa739-128">Modificare la definizione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="aa739-128">Edit the build definition.</span></span>
2. <span data-ttu-id="aa739-129">Configurare l'autorizzazione di Azure in VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="aa739-129">Set up Azure authorization in VS Team Services.</span></span>
3. <span data-ttu-id="aa739-130">Aggiungere un'istruzione di compilazione di Azure PowerShell che fa riferimento allo script di PowerShell nel progetto di distribuzione Gruppo di risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="aa739-130">Add an Azure PowerShell build step that references the PowerShell script in the Azure Resource Group deployment project.</span></span>
4. <span data-ttu-id="aa739-131">Impostare il valore del parametro *-ArtifactsStagingDirectory* per l'interazione con un progetto compilato in VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="aa739-131">Set the value of the *-ArtifactsStagingDirectory* parameter to work with a project built in VS Team Services.</span></span>

### <a name="detailed-walkthrough-for-option-1"></a><span data-ttu-id="aa739-132">Procedura dettagliata per l'opzione 1</span><span class="sxs-lookup"><span data-stu-id="aa739-132">Detailed walkthrough for Option 1</span></span>
<span data-ttu-id="aa739-133">Le procedure seguenti illustrano i passaggi necessari per configurare la distribuzione continua in VS Team Services usando una singola attività che esegue lo script PowerShell nel progetto.</span><span class="sxs-lookup"><span data-stu-id="aa739-133">The following procedures walk you through the steps necessary to configure continuous deployment in VS Team Services using a single task that runs the PowerShell script in your project.</span></span> 

1. <span data-ttu-id="aa739-134">Modificare la definizione di compilazione di VS Team Services e aggiungere un'istruzione di compilazione di Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="aa739-134">Edit your VS Team Services build definition and add an Azure PowerShell build step.</span></span> <span data-ttu-id="aa739-135">Scegliere la definizione di compilazione nella categoria **Definizioni di compilazione** e quindi scegliere il collegamento **Modifica**.</span><span class="sxs-lookup"><span data-stu-id="aa739-135">Choose the build definition under the **Build definitions** category and then choose the **Edit** link.</span></span>
   
   ![Modificare la definizione di compilazione][0]
2. <span data-ttu-id="aa739-137">Aggiungere un'istruzione di compilazione di **Azure PowerShell** alla definizione di compilazione e quindi scegliere il pulsante **Aggiungi istruzione di compilazione...**.</span><span class="sxs-lookup"><span data-stu-id="aa739-137">Add a new **Azure PowerShell** build step to the build definition and then choose the **Add build step…**</span></span> <span data-ttu-id="aa739-138">.</span><span class="sxs-lookup"><span data-stu-id="aa739-138">button.</span></span>
   
   ![Aggiungere un'istruzione di compilazione][1]
3. <span data-ttu-id="aa739-140">Scegliere la categoria **Deploy task** (Distribuisci attività), selezionare l'attività **Azure PowerShell** e quindi scegliere il pulsante **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="aa739-140">Choose the **Deploy task** category, select the **Azure PowerShell** task, and then choose its **Add** button.</span></span>
   
   ![Aggiungere attività][2]
4. <span data-ttu-id="aa739-142">Scegliere l'istruzione di compilazione di **Azure PowerShell** e quindi compilare i relativi valori.</span><span class="sxs-lookup"><span data-stu-id="aa739-142">Choose the **Azure PowerShell** build step and then fill in its values.</span></span>
   
   1. <span data-ttu-id="aa739-143">Se è già stato aggiunto un endpoint di servizio di Azure a VS Team Services, scegliere la sottoscrizione nella casella di riepilogo a discesa **Sottoscrizione Azure** e quindi passare alla sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="aa739-143">If you already have an Azure service endpoint added to VS Team Services, choose the subscription in the **Azure Subscription** drop-down list box and then skip to the next section.</span></span> 
      
      <span data-ttu-id="aa739-144">Se non si ha un endpoint di servizio di Azure in VS Team Services, è necessario aggiungerne uno.</span><span class="sxs-lookup"><span data-stu-id="aa739-144">If you don’t have an Azure service endpoint in VS Team Services, you need to add one.</span></span> <span data-ttu-id="aa739-145">Questa sottosezione illustra il processo.</span><span class="sxs-lookup"><span data-stu-id="aa739-145">This subsection takes you through the process.</span></span> <span data-ttu-id="aa739-146">Se l'account Azure usa un account Microsoft, ad esempio Hotmail, è necessario eseguire i passaggi seguenti per ottenere un'autenticazione dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="aa739-146">If your Azure account uses a Microsoft account (such as Hotmail), you must take the following steps to get a Service Principal authentication.</span></span>
   2. <span data-ttu-id="aa739-147">Scegliere il collegamento **Gestisci** accanto all'elenco a discesa **Sottoscrizione Azure**.</span><span class="sxs-lookup"><span data-stu-id="aa739-147">Choose the **Manage** link next to the **Azure Subscription** drop-down list box.</span></span>
      
      ![Gestire le sottoscrizioni di Azure][3]
   3. <span data-ttu-id="aa739-149">Scegliere **Azure** nell'elenco a discesa **Nuovo endpoint servizio**.</span><span class="sxs-lookup"><span data-stu-id="aa739-149">Choose **Azure** in the **New Service Endpoint** drop-down list box.</span></span>
      
      ![Nuovo endpoint di servizio][4]
   4. <span data-ttu-id="aa739-151">Nella finestra di dialogo **Aggiungi sottoscrizione di Azure** selezionare l'opzione **Entità servizio**.</span><span class="sxs-lookup"><span data-stu-id="aa739-151">In the **Add Azure Subscription** dialog box, select the **Service Principal** option.</span></span>
      
      ![Oggetto entità servizio][5]
   5. <span data-ttu-id="aa739-153">Aggiungere le informazioni sulla sottoscrizione di Azure nella finestra di dialogo **Aggiungi sottoscrizione di Azure** .</span><span class="sxs-lookup"><span data-stu-id="aa739-153">Add your Azure subscription information to the **Add Azure Subscription** dialog box.</span></span> <span data-ttu-id="aa739-154">È necessario specificare gli elementi seguenti:</span><span class="sxs-lookup"><span data-stu-id="aa739-154">You need to provide the following items:</span></span>
      
      * <span data-ttu-id="aa739-155">ID sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="aa739-155">Subscription Id</span></span>
      * <span data-ttu-id="aa739-156">Nome sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="aa739-156">Subscription Name</span></span>
      * <span data-ttu-id="aa739-157">ID entità servizio</span><span class="sxs-lookup"><span data-stu-id="aa739-157">Service Principal Id</span></span>
      * <span data-ttu-id="aa739-158">Chiave entità servizio</span><span class="sxs-lookup"><span data-stu-id="aa739-158">Service Principal Key</span></span>
      * <span data-ttu-id="aa739-159">ID tenant</span><span class="sxs-lookup"><span data-stu-id="aa739-159">Tenant Id</span></span>
   6. <span data-ttu-id="aa739-160">Aggiungere un nome a propria scelta nella casella **Sottoscrizione** .</span><span class="sxs-lookup"><span data-stu-id="aa739-160">Add a name of your choice to the **Subscription** name box.</span></span> <span data-ttu-id="aa739-161">Questo valore verrà visualizzato in seguito nell'elenco a discesa **Sottoscrizione Azure** in VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="aa739-161">This value appears later in the **Azure Subscription** drop-down list in VS Team Services.</span></span> 
   7. <span data-ttu-id="aa739-162">Se non si conosce l'ID sottoscrizione di Azure, è possibile usare uno dei seguenti comandi per ottenerlo.</span><span class="sxs-lookup"><span data-stu-id="aa739-162">If you don’t know your Azure subscription ID, you can use one of the following commands to retrieve it.</span></span>
      
      <span data-ttu-id="aa739-163">Per gli script di Azure PowerShell usare:</span><span class="sxs-lookup"><span data-stu-id="aa739-163">For PowerShell scripts, use:</span></span>
      
      `Get-AzureRmSubscription`
      
      <span data-ttu-id="aa739-164">Per l'interfaccia della riga di comando di Azure usare:</span><span class="sxs-lookup"><span data-stu-id="aa739-164">For Azure CLI, use:</span></span>
      
      `azure account show`
   8. <span data-ttu-id="aa739-165">Per ottenere un ID entità servizio, una chiave entità servizio e un ID tenant, seguire la procedura in [Usare il portale per creare un'applicazione Active Directory e un'entità servizio](resource-group-create-service-principal-portal.md) o [Authenticating a service principal with Azure Resource Manager](resource-group-authenticate-service-principal.md) (Autenticazione di un'entità servizio con Azure Resource Manager).</span><span class="sxs-lookup"><span data-stu-id="aa739-165">To get a Service Principal ID, Service Principal Key, and Tenant ID, follow the procedure in [Create Active Directory application and service principal using portal](resource-group-create-service-principal-portal.md) or [Authenticating a service principal with Azure Resource Manager](resource-group-authenticate-service-principal.md).</span></span>
   9. <span data-ttu-id="aa739-166">Aggiungere i valori di ID entità servizio, chiave entità servizio e ID tenant alla finestra di dialogo **Aggiungi sottoscrizione di Azure**, quindi scegliere il pulsante **OK**.</span><span class="sxs-lookup"><span data-stu-id="aa739-166">Add the Service Principal ID, Service Principal Key, and Tenant ID values to the **Add Azure Subscription** dialog box and then choose the **OK** button.</span></span>
      
      <span data-ttu-id="aa739-167">Ora è disponibile un'entità servizio valida da usare per eseguire lo script di Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="aa739-167">You now have a valid Service Principal to use to run the Azure PowerShell script.</span></span>
5. <span data-ttu-id="aa739-168">Modificare la definizione di compilazione e scegliere l'istruzione di compilazione **Azure PowerShell** .</span><span class="sxs-lookup"><span data-stu-id="aa739-168">Edit the build definition and choose the **Azure PowerShell** build step.</span></span> <span data-ttu-id="aa739-169">Selezionare la sottoscrizione nella casella di riepilogo a discesa **Sottoscrizione Azure**.</span><span class="sxs-lookup"><span data-stu-id="aa739-169">Select the subscription in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="aa739-170">Se la sottoscrizione non viene visualizzata, scegliere il pulsante **Aggiorna** accanto al collegamento **Gestisci**.</span><span class="sxs-lookup"><span data-stu-id="aa739-170">(If the subscription doesn't appear, choose the **Refresh** button next the **Manage** link.)</span></span> 
   
   ![Configurare l'attività di compilazione di Azure PowerShell][8]
6. <span data-ttu-id="aa739-172">Fornire un percorso per lo script di PowerShell Deploy-AzureResourceGroup.ps1.</span><span class="sxs-lookup"><span data-stu-id="aa739-172">Provide a path to the Deploy-AzureResourceGroup.ps1 PowerShell script.</span></span> <span data-ttu-id="aa739-173">A tale scopo, scegliere il pulsante con i puntini di sospensione (...) accanto alla casella **Percorso script**, passare allo script di PowerShell Deploy-AzureResourceGroup.ps1 nella cartella **Script** del progetto, selezionarlo e quindi scegliere **OK**.</span><span class="sxs-lookup"><span data-stu-id="aa739-173">To do this, choose the ellipsis (…) button next to the **Script Path** box, navigate to the Deploy-AzureResourceGroup.ps1 PowerShell script in the **Scripts** folder of your project, select it, and then choose the **OK** button.</span></span>    
   
   ![Selezionare il percorso dello script][9]
7. <span data-ttu-id="aa739-175">Dopo aver selezionato lo script, aggiornare il percorso dello script in modo che venga eseguito da Build.StagingDirectory, la stessa directory su cui è impostato *ArtifactsLocation* .</span><span class="sxs-lookup"><span data-stu-id="aa739-175">After you select the script, update the path to the script so that it’s run from the Build.StagingDirectory (the same directory that *ArtifactsLocation* is set to).</span></span> <span data-ttu-id="aa739-176">A questo scopo è possibile aggiungere "$(Build.StagingDirectory)/" all'inizio del percorso dello script.</span><span class="sxs-lookup"><span data-stu-id="aa739-176">You can do this by adding “$(Build.StagingDirectory)/” to the beginning of the script path.</span></span>
   
    ![Modificare il percorso dello script][10]
8. <span data-ttu-id="aa739-178">Nella casella **Argomenti script** immettere i parametri seguenti, su una sola riga.</span><span class="sxs-lookup"><span data-stu-id="aa739-178">In the **Script Arguments** box, enter the following parameters (in a single line).</span></span> <span data-ttu-id="aa739-179">Quando si esegue lo script in Visual Studio, è possibile vedere come vengono usati i parametri nella finestra **Output** .</span><span class="sxs-lookup"><span data-stu-id="aa739-179">When you run the script in Visual Studio, you can see how VS uses the parameters in the **Output** window.</span></span> <span data-ttu-id="aa739-180">Si può usare questa finestra come punto di partenza per impostare i valori dei parametri nell'istruzione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="aa739-180">You can use this as a starting point for setting the parameter values in your build step.</span></span>
   
   | <span data-ttu-id="aa739-181">Parametro</span><span class="sxs-lookup"><span data-stu-id="aa739-181">Parameter</span></span> | <span data-ttu-id="aa739-182">Descrizione</span><span class="sxs-lookup"><span data-stu-id="aa739-182">Description</span></span> |
   | --- | --- |
   | <span data-ttu-id="aa739-183">-ResourceGroupLocation</span><span class="sxs-lookup"><span data-stu-id="aa739-183">-ResourceGroupLocation</span></span> |<span data-ttu-id="aa739-184">Valore dell'area geografica in cui si trova il gruppo di risorse, ad esempio **eastus** o **'East US'**.</span><span class="sxs-lookup"><span data-stu-id="aa739-184">The geo-location value where the resource group is located, such as **eastus** or **'East US'**.</span></span> <span data-ttu-id="aa739-185">Aggiungere virgolette singole se nel nome è presente uno spazio. Per altre informazioni, vedere [Aree di Azure](https://azure.microsoft.com/en-us/regions/).</span><span class="sxs-lookup"><span data-stu-id="aa739-185">(Add single quotes if there's a space in the name.) See [Azure Regions](https://azure.microsoft.com/en-us/regions/) for more information.</span></span> |
   | <span data-ttu-id="aa739-186">-ResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="aa739-186">-ResourceGroupName</span></span> |<span data-ttu-id="aa739-187">Nome del gruppo di risorse usato per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="aa739-187">The name of the resource group used for this deployment.</span></span> |
   | <span data-ttu-id="aa739-188">-UploadArtifacts</span><span class="sxs-lookup"><span data-stu-id="aa739-188">-UploadArtifacts</span></span> |<span data-ttu-id="aa739-189">Questo parametro, se presente, specifica che gli elementi devono essere caricati in Azure dal sistema locale.</span><span class="sxs-lookup"><span data-stu-id="aa739-189">This parameter, when present, specifies that artifacts that need to be uploaded to Azure from the local system.</span></span> <span data-ttu-id="aa739-190">È sufficiente impostare questa opzione se la distribuzione del modello richiede elementi aggiuntivi che si prevede di preparare usando lo script di PowerShell, ad esempio gli script di configurazione o i modelli annidati.</span><span class="sxs-lookup"><span data-stu-id="aa739-190">You only need to set this switch if your template deployment requires extra artifacts that you want to stage using the PowerShell script (such as configuration scripts or nested templates).</span></span> |
   | <span data-ttu-id="aa739-191">-StorageAccountName</span><span class="sxs-lookup"><span data-stu-id="aa739-191">-StorageAccountName</span></span> |<span data-ttu-id="aa739-192">Nome dell'account di archiviazione usato per la preparazione degli elementi per questa distribuzione.</span><span class="sxs-lookup"><span data-stu-id="aa739-192">The name of the storage account used to stage artifacts for this deployment.</span></span> <span data-ttu-id="aa739-193">Questo parametro viene usato solo se si sta eseguendo la gestione temporanea di elementi per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="aa739-193">This parameter is only used if you are staging artifacts for deployment.</span></span> <span data-ttu-id="aa739-194">Se questo parametro viene specificato, viene creato un nuovo account di archiviazione, se lo script non ne ha creato uno durante una distribuzione precedente.</span><span class="sxs-lookup"><span data-stu-id="aa739-194">If this parameter is supplied, a new storage account is created if the script has not created one during a previous deployment.</span></span> <span data-ttu-id="aa739-195">Se il parametro viene specificato, l'account di archiviazione deve esistere già.</span><span class="sxs-lookup"><span data-stu-id="aa739-195">If the parameter is specified, the storage account must already exist.</span></span> |
   | <span data-ttu-id="aa739-196">-StorageAccountResourceGroupName</span><span class="sxs-lookup"><span data-stu-id="aa739-196">-StorageAccountResourceGroupName</span></span> |<span data-ttu-id="aa739-197">Nome del gruppo di risorse associato all'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="aa739-197">The name of the resource group associated with the storage account.</span></span> <span data-ttu-id="aa739-198">Questo parametro è obbligatorio solo se si specifica un valore per il parametro StorageAccountName.</span><span class="sxs-lookup"><span data-stu-id="aa739-198">This parameter is required only if you provide a value for the StorageAccountName parameter.</span></span> |
   | <span data-ttu-id="aa739-199">-TemplateFile</span><span class="sxs-lookup"><span data-stu-id="aa739-199">-TemplateFile</span></span> |<span data-ttu-id="aa739-200">Percorso del file modello nel progetto di distribuzione del gruppo di risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="aa739-200">The path to the template file in the Azure Resource Group deployment project.</span></span> <span data-ttu-id="aa739-201">Per maggiore flessibilità, usare un percorso relativo alla posizione dello script di PowerShell per questo parametro, invece di un percorso assoluto.</span><span class="sxs-lookup"><span data-stu-id="aa739-201">To enhance flexibility, use a path for this parameter that is relative to the location of the PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="aa739-202">-TemplateParametersFile</span><span class="sxs-lookup"><span data-stu-id="aa739-202">-TemplateParametersFile</span></span> |<span data-ttu-id="aa739-203">Percorso del file modello nel progetto di distribuzione Gruppo di risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="aa739-203">The path to the parameters file in the Azure Resource Group deployment project.</span></span> <span data-ttu-id="aa739-204">Per maggiore flessibilità, usare un percorso relativo alla posizione dello script di PowerShell per questo parametro, invece di un percorso assoluto.</span><span class="sxs-lookup"><span data-stu-id="aa739-204">To enhance flexibility, use a path for this parameter that is relative to the location of the PowerShell script instead of an absolute path.</span></span> |
   | <span data-ttu-id="aa739-205">-ArtifactStagingDirectory</span><span class="sxs-lookup"><span data-stu-id="aa739-205">-ArtifactStagingDirectory</span></span> |<span data-ttu-id="aa739-206">Questo parametro indica allo script di PowerShell la cartella da cui devono essere copiati i file binari del progetto.</span><span class="sxs-lookup"><span data-stu-id="aa739-206">This parameter lets the PowerShell script know the folder from where the project’s binary files should be copied.</span></span> <span data-ttu-id="aa739-207">Il valore sostituisce quello predefinito usato dallo script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="aa739-207">This value overrides the default value used by the PowerShell script.</span></span> <span data-ttu-id="aa739-208">Per l'uso di VS Team Services, impostare il valore su: -ArtifactStagingDirectory $(Build.StagingDirectory)</span><span class="sxs-lookup"><span data-stu-id="aa739-208">For VS Team Services use, set the value to: -ArtifactStagingDirectory $(Build.StagingDirectory)</span></span> |
   
   <span data-ttu-id="aa739-209">Ecco un esempio di argomenti dello script, la riga è interrotta per facilitare la lettura:</span><span class="sxs-lookup"><span data-stu-id="aa739-209">Here’s a script arguments example (line broken for readability):</span></span>
   
   ```    
   -ResourceGroupName 'MyGroup' -ResourceGroupLocation 'eastus' -TemplateFile '..\templates\azuredeploy.json' 
   -TemplateParametersFile '..\templates\azuredeploy.parameters.json' -UploadArtifacts -StorageAccountName 'mystorageacct' 
   –StorageAccountResourceGroupName 'Default-Storage-EastUS' -ArtifactStagingDirectory '$(Build.StagingDirectory)'    
   ```
   
   <span data-ttu-id="aa739-210">Al termine, la casella **Argomenti script** sarà simile all'elenco seguente:</span><span class="sxs-lookup"><span data-stu-id="aa739-210">When you’re finished, the **Script Arguments** box should resemble the following list:</span></span>
   
   ![Argomenti script][11]
9. <span data-ttu-id="aa739-212">Dopo aver aggiunto tutti gli elementi richiesti per l'istruzione di compilazione di Azure PowerShell, scegliere il pulsante **Accoda compilazione** per compilare il progetto.</span><span class="sxs-lookup"><span data-stu-id="aa739-212">After you’ve added all the required items to the Azure PowerShell build step, choose the **Queue** build button to build the project.</span></span> <span data-ttu-id="aa739-213">La schermata **Compilazione** mostra l'output dello script di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="aa739-213">The **Build** screen shows the output from the PowerShell script.</span></span>

### <a name="detailed-walkthrough-for-option-2"></a><span data-ttu-id="aa739-214">Procedura dettagliata per l'opzione 2</span><span class="sxs-lookup"><span data-stu-id="aa739-214">Detailed walkthrough for Option 2</span></span>
<span data-ttu-id="aa739-215">Le procedure seguenti illustrano i passaggi necessari per configurare la distribuzione continua in VS Team Services usando le attività predefinite.</span><span class="sxs-lookup"><span data-stu-id="aa739-215">The following procedures walk you through the steps necessary to configure continuous deployment in VS Team Services using the built-in tasks.</span></span>

1. <span data-ttu-id="aa739-216">Modificare la definizione di compilazione di Visual Studio Team Services per aggiungere due nuove istruzioni di compilazione.</span><span class="sxs-lookup"><span data-stu-id="aa739-216">Edit your VS Team Services build definition to add two new build steps.</span></span> <span data-ttu-id="aa739-217">Scegliere la definizione di compilazione nella categoria **Definizioni di compilazione** e quindi scegliere il collegamento **Modifica**.</span><span class="sxs-lookup"><span data-stu-id="aa739-217">Choose the build definition under the **Build definitions** category and then choose the **Edit** link.</span></span>
   
   ![Modificare la definizione di compilazione][12]
2. <span data-ttu-id="aa739-219">Aggiungere le nuove istruzioni di compilazione alla definizione di compilazione usando **Aggiungi istruzione di compilazione...**</span><span class="sxs-lookup"><span data-stu-id="aa739-219">Add the new build steps to the build definition using the **Add build step…**</span></span> <span data-ttu-id="aa739-220">.</span><span class="sxs-lookup"><span data-stu-id="aa739-220">button.</span></span>
   
   ![Aggiungere un'istruzione di compilazione][13]
3. <span data-ttu-id="aa739-222">Scegliere la categoria **Deploy task** (Distribuisci attività), selezionare l'attività **Copia dei file di Azure** e quindi scegliere il pulsante **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="aa739-222">Choose the **Deploy** task category, select the **Azure File Copy** task, and then choose its **Add** button.</span></span>
   
   ![Aggiungere l'attività Copia dei file di Azure][14]
4. <span data-ttu-id="aa739-224">Scegliere l'attività **Distribuzione gruppo di risorse di Azure**, quindi scegliere il pulsante **Aggiungi** e quindi **Chiudi** per il **catalogo delle attività**.</span><span class="sxs-lookup"><span data-stu-id="aa739-224">Choose the **Azure Resource Group Deployment** task, then choose its **Add** button and then **Close** the **Task Catalog**.</span></span>
   
   ![Aggiungere attività Distribuzione gruppo di risorse di Azure][15]
5. <span data-ttu-id="aa739-226">Scegliere l'attività **Copia dei file di Azure** e compilare i relativi valori.</span><span class="sxs-lookup"><span data-stu-id="aa739-226">Choose the **Azure File Copy** task and fill in its values.</span></span>
   
   <span data-ttu-id="aa739-227">Se è già stato aggiunto un endpoint di servizio di Azure a VS Team Services, scegliere la sottoscrizione nell'elenco a discesa **Sottoscrizione Azure**.</span><span class="sxs-lookup"><span data-stu-id="aa739-227">If you already have an Azure service endpoint added to VS Team Services, choose the subscription in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="aa739-228">Se non si dispone di una sottoscrizione vedere l'[opzione 1](#detailed-walkthrough-for-option-1) per istruzioni sull'impostazione di una sottoscrizione in VS Team Services.</span><span class="sxs-lookup"><span data-stu-id="aa739-228">If you do not have a subscription, see [Option 1](#detailed-walkthrough-for-option-1) for instructions on setting one up in VS Team Services.</span></span>
   
   * <span data-ttu-id="aa739-229">Origine: immettere **$(Build.StagingDirectory)**</span><span class="sxs-lookup"><span data-stu-id="aa739-229">Source - enter **$(Build.StagingDirectory)**</span></span>
   * <span data-ttu-id="aa739-230">Tipo di connessione ad Azure: selezionare **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="aa739-230">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="aa739-231">Sottoscrizione di Azure Resource Manager: selezionare la sottoscrizione per l'account di archiviazione che si intende usare nell'elenco a discesa **Sottoscrizione Azure**.</span><span class="sxs-lookup"><span data-stu-id="aa739-231">Azure RM Subscription - select the subscription for the storage account you want to use in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="aa739-232">Se la sottoscrizione non viene visualizzata, scegliere il pulsante **Aggiorna** accanto al collegamento **Gestisci**.</span><span class="sxs-lookup"><span data-stu-id="aa739-232">If the subscription doesn't appear, choose the **Refresh** button next the **Manage** link.</span></span>
   * <span data-ttu-id="aa739-233">Tipo di destinazione: selezionare **Blob di Azure**</span><span class="sxs-lookup"><span data-stu-id="aa739-233">Destination Type - select **Azure Blob**</span></span>
   * <span data-ttu-id="aa739-234">Account di archiviazione di Resource Manager: selezionare l'account di archiviazione da usare per la gestione temporanea degli elementi</span><span class="sxs-lookup"><span data-stu-id="aa739-234">RM Storage Account - select the storage account you would like to use for staging artifacts</span></span>
   * <span data-ttu-id="aa739-235">Nome contenitore: immettere il nome del contenitore da usare per la gestione temporanea, che può essere qualsiasi nome di contenitore valido, ma usare un contenitore dedicato a questa definizione di compilazione</span><span class="sxs-lookup"><span data-stu-id="aa739-235">Container Name - enter the name of the container you would like to use for staging; it can be any valid container name, but use one dedicated to this build definition</span></span>
   
   <span data-ttu-id="aa739-236">Per i valori di output:</span><span class="sxs-lookup"><span data-stu-id="aa739-236">For the output values:</span></span>
   
   * <span data-ttu-id="aa739-237">URI contenitore di archiviazione: immettere **artifactsLocation**</span><span class="sxs-lookup"><span data-stu-id="aa739-237">Storage Container URI - enter **artifactsLocation**</span></span>
   * <span data-ttu-id="aa739-238">Token di firma di accesso condiviso contenitore di archiviazione: immettere **artifactsLocationSasToken**</span><span class="sxs-lookup"><span data-stu-id="aa739-238">Storage Container SAS Token - enter **artifactsLocationSasToken**</span></span>
   
   ![Configurare l'attività Copia dei file di Azure][16]
6. <span data-ttu-id="aa739-240">Scegliere l'istruzione di compilazione di **Distribuzione gruppo di risorse di Azure** e quindi compilare i relativi valori.</span><span class="sxs-lookup"><span data-stu-id="aa739-240">Choose the **Azure Resource Group Deployment** build step and then fill in its values.</span></span>
   
   * <span data-ttu-id="aa739-241">Tipo di connessione ad Azure: selezionare **Azure Resource Manager**</span><span class="sxs-lookup"><span data-stu-id="aa739-241">Azure Connection Type - select **Azure Resource Manager**</span></span>
   * <span data-ttu-id="aa739-242">Sottoscrizione di Azure Resource Manager: selezionare la sottoscrizione per la distribuzione nell'elenco a discesa **Sottoscrizione Azure**.</span><span class="sxs-lookup"><span data-stu-id="aa739-242">Azure RM Subscription - select the subscription for deployment in the **Azure Subscription** drop-down list box.</span></span> <span data-ttu-id="aa739-243">In genere, questa sarà la stessa sottoscrizione usata nel passaggio precedente</span><span class="sxs-lookup"><span data-stu-id="aa739-243">This will usually be the same subscription used in the previous step</span></span>
   * <span data-ttu-id="aa739-244">Azione - selezionare **Creare o aggiornare un gruppo di risorse**</span><span class="sxs-lookup"><span data-stu-id="aa739-244">Action - select **Create or Update Resource Group**</span></span>
   * <span data-ttu-id="aa739-245">Gruppo di risorse: selezionare un gruppo di risorse o immettere il nome del nuovo gruppo di risorse per la distribuzione</span><span class="sxs-lookup"><span data-stu-id="aa739-245">Resource Group - select a resource group or enter the name of a new resource group for the deployment</span></span>
   * <span data-ttu-id="aa739-246">Posizione: selezionare la posizione per il gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="aa739-246">Location - select the location for the resource group</span></span>
   * <span data-ttu-id="aa739-247">Modello: immettere il percorso e il nome del modello da distribuire anteponendo **$(Build.StagingDirectory)**, ad esempio: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span><span class="sxs-lookup"><span data-stu-id="aa739-247">Template - enter the path and name of the template to be deployed prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.json)**</span></span>
   * <span data-ttu-id="aa739-248">Parametri modello: immettere il percorso e il nome dei parametri da usare, anteponendo **$(Build.StagingDirectory)**, ad esempio: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span><span class="sxs-lookup"><span data-stu-id="aa739-248">Template Parameters - enter the path and name of the parameters to be used, prepending **$(Build.StagingDirectory)**, for example: **$(Build.StagingDirectory/DSC-CI/azuredeploy.parameters.json)**</span></span>
   * <span data-ttu-id="aa739-249">Esegui override dei parametri del modello: immettere o copiare e incollare il codice seguente:</span><span class="sxs-lookup"><span data-stu-id="aa739-249">Override Template Parameters - enter or copy and paste the following code:</span></span>
     
     ```    
     -_artifactsLocation $(artifactsLocation) -_artifactsLocationSasToken (ConvertTo-SecureString -String "$(artifactsLocationSasToken)" -AsPlainText -Force)
     ```
     ![Configurare l'attività Distribuzione gruppo di risorse di Azure][17]
7. <span data-ttu-id="aa739-251">Dopo avere aggiunto tutti gli elementi richiesti, salvare la definizione di compilazione e scegliere **Accoda nuova compilazione** nella parte superiore.</span><span class="sxs-lookup"><span data-stu-id="aa739-251">After you’ve added all the required items, save the build definition and choose **Queue new build** at the top.</span></span>

## <a name="next-steps"></a><span data-ttu-id="aa739-252">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="aa739-252">Next steps</span></span>
<span data-ttu-id="aa739-253">Per altre informazioni sui gruppi di risorse di Azure e su Azure Resource Manager, vedere [Panoramica di Azure Resource Manager](azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="aa739-253">Read [Azure Resource Manager overview](azure-resource-manager/resource-group-overview.md) to learn more about Azure Resource Manager and Azure resource groups.</span></span>

[0]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough1.png
[1]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough2.png
[2]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough3.png
[3]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough4.png
[4]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough5.png
[5]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough6.png
[8]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough9.png
[9]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough10.png
[10]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough11b.png
[11]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough12.png
[12]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough13.png
[13]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough14.png
[14]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough15.png
[15]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough16.png
[16]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough17.png
[17]: ./media/vs-azure-tools-resource-groups-ci-in-vsts/walkthrough18.png
