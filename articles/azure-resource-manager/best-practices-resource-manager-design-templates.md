---
title: aaaDesign Azure modelli per soluzioni complesse | Documenti Microsoft
description: Illustra le procedure consigliate per la progettazione di modelli di Azure Resource Manager per scenari complessi
services: azure-resource-manager
documentationcenter: 
author: tfitzmac
manager: timlt
editor: tysonn
ms.assetid: ce1141d6-ece7-4976-acea-1db1f775409e
ms.service: azure-resource-manager
ms.workload: multiple
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/19/2016
ms.author: tomfitz
ms.openlocfilehash: aa45e9a46d79a6336b696cff8fd37f65fa449f11
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-azure-resource-manager-templates-when-deploying-complex-solutions"></a><span data-ttu-id="e14a1-103">Modelli di progettazione per modelli di Azure Resource Manager durante la distribuzione di soluzioni complesse</span><span class="sxs-lookup"><span data-stu-id="e14a1-103">Design patterns for Azure Resource Manager templates when deploying complex solutions</span></span>
<span data-ttu-id="e14a1-104">Usando un approccio flessibile basato sui modelli di Azure Resource Manager, è possibile distribuire topologie complesse in modo rapido e coerente.</span><span class="sxs-lookup"><span data-stu-id="e14a1-104">Using a flexible approach based on Azure Resource Manager templates, you can deploy complex topologies quickly and consistently.</span></span> <span data-ttu-id="e14a1-105">È possibile adattare queste distribuzioni facilmente come core offerte evolvono o varianti di tooaccommodate per scenari di outlier o ai clienti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-105">You can adapt these deployments easily as core offerings evolve or tooaccommodate variants for outlier scenarios or customers.</span></span>

<span data-ttu-id="e14a1-106">Questo argomento fa parte di un white paper di dimensioni maggiori.</span><span class="sxs-lookup"><span data-stu-id="e14a1-106">This topic is part of a larger whitepaper.</span></span> <span data-ttu-id="e14a1-107">scaricare hello tooread completo carta, [World classe Azure Resource Manager modelli considerazioni e procedure consigliate di rivelati](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span><span class="sxs-lookup"><span data-stu-id="e14a1-107">tooread hello full paper, download [World Class Azure Resource Manager Templates Considerations and Proven Practices](http://download.microsoft.com/download/8/E/1/8E1DBEFA-CECE-4DC9-A813-93520A5D7CFE/World Class ARM Templates - Considerations and Proven Practices.pdf).</span></span>

<span data-ttu-id="e14a1-108">Modelli di combinano i vantaggi di hello di hello sottostante Gestione risorse di Azure con adattabilità hello e migliorare la leggibilità di JavaScript Object Notation (JSON).</span><span class="sxs-lookup"><span data-stu-id="e14a1-108">Templates combine hello benefits of hello underlying Azure Resource Manager with hello adaptability and readability of JavaScript Object Notation (JSON).</span></span> <span data-ttu-id="e14a1-109">Utilizzando i modelli, è possibile:</span><span class="sxs-lookup"><span data-stu-id="e14a1-109">Using templates, you can:</span></span>

* <span data-ttu-id="e14a1-110">Distribuire in modo coerente le topologie e i relativi carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="e14a1-110">Deploy topologies and their workloads consistently.</span></span>
* <span data-ttu-id="e14a1-111">Gestire tutte le risorse di un'applicazione contemporaneamente utilizzando gruppi di risorse.</span><span class="sxs-lookup"><span data-stu-id="e14a1-111">Manage all your resources in an application together using resource groups.</span></span>
* <span data-ttu-id="e14a1-112">Applicare l'accesso basato sui ruoli (RBAC) controllo toogrant accesso appropriato toousers, gruppi e servizi.</span><span class="sxs-lookup"><span data-stu-id="e14a1-112">Apply role-based access control (RBAC) toogrant appropriate access toousers, groups, and services.</span></span>
* <span data-ttu-id="e14a1-113">Usare le attività di toostreamline associazioni tag, ad esempio fatturazione rollup.</span><span class="sxs-lookup"><span data-stu-id="e14a1-113">Use tagging associations toostreamline tasks such as billing rollups.</span></span>

<span data-ttu-id="e14a1-114">In questo articolo vengono fornite informazioni dettagliate su scenari di utilizzo, architettura e modelli di implementazione identificati durante le sessioni di progettazione e implementazioni reali dei modelli con i clienti di Azure Customer Advisory Team (AzureCAT).</span><span class="sxs-lookup"><span data-stu-id="e14a1-114">This article provides details on consumption scenarios, architecture, and implementation patterns identified during our design sessions and real-world template implementations with Azure Customer Advisory Team (AzureCAT) customers.</span></span> <span data-ttu-id="e14a1-115">Lontano dal academic, questi approcci sono procedure consolidati informati dall'ambiente di sviluppo hello dei modelli per 12 di tecnologie di sistemi operativi basati su Linux top hello, tra cui: Apache Kafka Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise con tecnologia Cassandra Apache, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis e Nagios.</span><span class="sxs-lookup"><span data-stu-id="e14a1-115">Far from academic, these approaches are proven practices informed by hello development of templates for 12 of hello top Linux-based OSS technologies, including: Apache Kafka, Apache Spark, Cloudera, Couchbase, Hortonworks HDP, DataStax Enterprise powered by Apache Cassandra, Elasticsearch, Jenkins, MongoDB, PostgreSQL, Redis, and Nagios.</span></span> 

<span data-ttu-id="e14a1-116">In questo articolo condivide toohelp queste procedure comprovate progettare modelli di Azure Resource Manager classe world.</span><span class="sxs-lookup"><span data-stu-id="e14a1-116">This article shares these proven practices toohelp you architect world class Azure Resource Manager templates.</span></span>  

<span data-ttu-id="e14a1-117">Lavorando con i clienti, è stata identificata una serie di esperienze di utilizzo dei modelli di Resource Manager tra aziende, system integrator (SI) e CSV.</span><span class="sxs-lookup"><span data-stu-id="e14a1-117">In our work with customers, we have identified several Resource Manager template consumption experiences across enterprises, System Integrators (SI)s, and CSVs.</span></span> <span data-ttu-id="e14a1-118">Hello sezioni seguenti forniscono una panoramica generale di scenari comuni e i modelli per diversi tipi di cliente.</span><span class="sxs-lookup"><span data-stu-id="e14a1-118">hello following sections provide a high-level overview of common scenarios and patterns for different customer types.</span></span>

## <a name="enterprises-and-system-integrators"></a><span data-ttu-id="e14a1-119">Aziende e integratori di sistemi</span><span class="sxs-lookup"><span data-stu-id="e14a1-119">Enterprises and system integrators</span></span>
<span data-ttu-id="e14a1-120">Nelle organizzazioni di grandi dimensioni, si osservano comunemente due consumer di modelli di Resource Manager: team di sviluppo di software interno e IT aziendale.</span><span class="sxs-lookup"><span data-stu-id="e14a1-120">Within large organizations, we commonly see two consumers of Resource Manager templates: internal software development teams and corporate IT.</span></span> <span data-ttu-id="e14a1-121">Abbiamo scoperto che scenari hello per hello SIs mappati toohello scenari per le aziende, pertanto hello stesse considerazioni si applicano.</span><span class="sxs-lookup"><span data-stu-id="e14a1-121">We've found that hello scenarios for hello SIs map toohello scenarios for Enterprises, so hello same considerations apply.</span></span>

### <a name="internal-software-development-teams"></a><span data-ttu-id="e14a1-122">Team di sviluppo di software interno</span><span class="sxs-lookup"><span data-stu-id="e14a1-122">Internal software development teams</span></span>
<span data-ttu-id="e14a1-123">Se il team sviluppa toosupport software aziendali, modelli forniscono un modo semplice tooquickly distribuire le tecnologie da utilizzare nelle soluzioni di business specifici.</span><span class="sxs-lookup"><span data-stu-id="e14a1-123">If your team develops software toosupport your business, templates provide an easy way tooquickly deploy technologies for use in business-specific solutions.</span></span> <span data-ttu-id="e14a1-124">È inoltre possibile utilizzare modelli toorapidly creare ambienti di training che consentono di competenze necessarie toogain di membri del team.</span><span class="sxs-lookup"><span data-stu-id="e14a1-124">You can also use templates toorapidly create training environments that enable team members toogain necessary skills.</span></span>

<span data-ttu-id="e14a1-125">È possibile utilizzare modelli come-estendere o comporle tooaccommodate le proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="e14a1-125">You can use templates as-is or extend or compose them tooaccommodate your needs.</span></span> <span data-ttu-id="e14a1-126">Utilizzando l'associazione di tag all'interno dei modelli, è possibile fornire un riepilogo di fatturazione con varie viste quali team, progetto, utente e formazione.</span><span class="sxs-lookup"><span data-stu-id="e14a1-126">Using tagging within templates, you can provide a billing summary with various views such as team, project, individual, and education.</span></span>

<span data-ttu-id="e14a1-127">Le aziende è spesso necessario team di sviluppo software toocreate un modello per la distribuzione uniforme di una soluzione.</span><span class="sxs-lookup"><span data-stu-id="e14a1-127">Businesses often want software development teams toocreate a template for consistent deployment of a solution.</span></span> <span data-ttu-id="e14a1-128">modello Hello facilita vincoli in modo che alcuni elementi all'interno di tale ambiente rimangono fisse e non possono essere sottoposto a override.</span><span class="sxs-lookup"><span data-stu-id="e14a1-128">hello template facilitates constraints so certain items within that environment remain fixed and can't be overridden.</span></span> <span data-ttu-id="e14a1-129">Ad esempio, una banca potrebbe richiedere un tooinclude modello RBAC pertanto un programmatore non è possibile modificare una soluzione di servizi bancari account di archiviazione personale toosend dati tooa.</span><span class="sxs-lookup"><span data-stu-id="e14a1-129">For example, a bank might require a template tooinclude RBAC so a programmer can’t revise a banking solution toosend data tooa personal storage account.</span></span>

### <a name="corporate-it"></a><span data-ttu-id="e14a1-130">IT aziendale</span><span class="sxs-lookup"><span data-stu-id="e14a1-130">Corporate IT</span></span>
<span data-ttu-id="e14a1-131">Le organizzazioni IT aziendali in genere utilizzano modelli per la distribuzione di capacità cloud e funzionalità ospitate su cloud.</span><span class="sxs-lookup"><span data-stu-id="e14a1-131">Corporate IT organizations typically use templates for delivering cloud capacity and cloud-hosted capabilities.</span></span>

#### <a name="cloud-capacity"></a><span data-ttu-id="e14a1-132">Capacità cloud</span><span class="sxs-lookup"><span data-stu-id="e14a1-132">Cloud capacity</span></span>
<span data-ttu-id="e14a1-133">Un modo comune per aziendale IT gruppi tooprovide capacità del cloud per i team è con "dimensioni shirt", che sono standard offerta dimensioni piccole, medie e grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="e14a1-133">A common way for corporate IT groups tooprovide cloud capacity for teams is with "t-shirt sizes", which are standard offering sizes such as small, medium, and large.</span></span> <span data-ttu-id="e14a1-134">offerte di Hello shirt dimensioni è possono combinare diversi tipi di risorse e le quantità fornendo un livello di standardizzazione che rende possibile toouse modelli.</span><span class="sxs-lookup"><span data-stu-id="e14a1-134">hello t-shirt sized offerings can mix different resource types and quantities while providing a level of standardization that makes it possible toouse templates.</span></span> <span data-ttu-id="e14a1-135">modelli di Hello offrono capacità in modo coerente impone i criteri aziendali e che utilizza tag tooprovide chargeback tooconsuming organizzazioni.</span><span class="sxs-lookup"><span data-stu-id="e14a1-135">hello templates deliver capacity in a consistent way that enforces corporate policies and uses tagging tooprovide chargeback tooconsuming organizations.</span></span>

<span data-ttu-id="e14a1-136">Ad esempio, potrebbe essere necessario tooprovide sviluppo, test o ambienti di produzione all'interno delle quali hello team di sviluppo software possono distribuire le relative soluzioni.</span><span class="sxs-lookup"><span data-stu-id="e14a1-136">For example, you may need tooprovide development, test, or production environments within which hello software development teams can deploy their solutions.</span></span> <span data-ttu-id="e14a1-137">ambiente Hello con una topologia di rete predefinite e in cui è possono modificare gli elementi che salve team di sviluppo software, ad esempio le regole che controllano l'accesso toohello internet e dei pacchetti pubblico.</span><span class="sxs-lookup"><span data-stu-id="e14a1-137">hello environment has a predefined network topology and elements that hello software development teams cannot change, such as rules governing access toohello public internet and packet inspection.</span></span> <span data-ttu-id="e14a1-138">È possibile anche i ruoli specifici dell'organizzazione per questi ambienti con diritti di accesso distinti per ambiente hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-138">You may also have organization-specific roles for these environments with distinct access rights for hello environment.</span></span>

#### <a name="cloud-hosted-capabilities"></a><span data-ttu-id="e14a1-139">Funzionalità ospitate nel cloud</span><span class="sxs-lookup"><span data-stu-id="e14a1-139">Cloud-hosted capabilities</span></span>
<span data-ttu-id="e14a1-140">È possibile utilizzare modelli toosupport ospitato su cloud funzionalità, tra cui i pacchetti software singolo o composite offerte disponibili toointernal linee di business.</span><span class="sxs-lookup"><span data-stu-id="e14a1-140">You can use templates toosupport cloud-hosted capabilities, including individual software packages or composite offerings that are offered toointernal lines of business.</span></span> <span data-ttu-id="e14a1-141">Un esempio di offerta combinata è l'analytics-as-a-service, tecnologie di analisi, virtualizzazione e altre tecnologie, fornita in una configurazione ottimizzata e connessa in una topologia di rete predefinita.</span><span class="sxs-lookup"><span data-stu-id="e14a1-141">An example of a composite offering would be analytics-as-a-service—analytics, visualization, and other technologies—delivered in an optimized, connected configuration on a predefined network topology.</span></span>

<span data-ttu-id="e14a1-142">Funzionalità ospitato su cloud sono interessate da protezione hello e considerazioni di ruolo definite tramite la capacità del cloud hello offerta in cui sono compilate.</span><span class="sxs-lookup"><span data-stu-id="e14a1-142">Cloud-hosted capabilities are affected by hello security and role considerations established by hello cloud capacity offering on which they’re built.</span></span> <span data-ttu-id="e14a1-143">Queste funzionalità sono disponibili così come sono oppure come servizio gestito.</span><span class="sxs-lookup"><span data-stu-id="e14a1-143">These capabilities are offered as is or as a managed service.</span></span> <span data-ttu-id="e14a1-144">Per quest'ultimo hello, vincolato a livello di accesso ai ruoli sono richiesti accesso tooenable nell'ambiente di hello ai fini della gestione.</span><span class="sxs-lookup"><span data-stu-id="e14a1-144">For hello latter, access-constrained roles are required tooenable access into hello environment for management purposes.</span></span>

## <a name="cloud-service-vendors"></a><span data-ttu-id="e14a1-145">Fornitori di servizi cloud</span><span class="sxs-lookup"><span data-stu-id="e14a1-145">Cloud service vendors</span></span>
<span data-ttu-id="e14a1-146">Dopo la comunicazione con volumi condivisi cluster toomany, identificate più approcci toodeploy servizi per i clienti e i relativi requisiti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-146">After talking toomany CSVs, we identified multiple approaches you can take toodeploy services for your customers and associated requirements.</span></span>

### <a name="csv-hosted-offering"></a><span data-ttu-id="e14a1-147">Offerta ospitata su CSV</span><span class="sxs-lookup"><span data-stu-id="e14a1-147">CSV-hosted offering</span></span>
<span data-ttu-id="e14a1-148">Quando l'offerta viene ospitata nella propria sottoscrizione di Azure, sono comunemente adottati due approcci di hosting: distribuzione di una implementazione distinta per ogni cliente o distribuzione di unità di scala che supportano un'infrastruttura condivisa usata per tutti i clienti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-148">If you host your offering in your own Azure subscription, two hosting approaches are common: deploying a distinct deployment for every customer or deploying scale units that underpin a shared infrastructure used for all customers.</span></span>

* <span data-ttu-id="e14a1-149">**Distribuzioni distinte per ogni cliente.**</span><span class="sxs-lookup"><span data-stu-id="e14a1-149">**Distinct deployments for each customer.**</span></span> <span data-ttu-id="e14a1-150">Le distribuzioni distinte per ogni cliente richiedono topologie fisse di configurazioni note differenti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-150">Distinct deployments per customer require fixed topologies of different known configurations.</span></span> <span data-ttu-id="e14a1-151">Queste distribuzioni possono contenere macchine virtuali (VM) di dimensioni differenti, un numero variabile di nodi e volumi diversi di memoria associata.</span><span class="sxs-lookup"><span data-stu-id="e14a1-151">These deployments may have different virtual machine (VM) sizes, varying numbers of nodes, and different amounts of associated storage.</span></span> <span data-ttu-id="e14a1-152">L'associazione di tag alle distribuzioni è utilizzata per i roll-up di fatturazione per ogni cliente.</span><span class="sxs-lookup"><span data-stu-id="e14a1-152">Tagging of deployments is used for roll-up billing of each customer.</span></span> <span data-ttu-id="e14a1-153">RBAC può essere abilitato tooallow clienti accesso tooaspects del proprio ambiente cloud.</span><span class="sxs-lookup"><span data-stu-id="e14a1-153">RBAC may be enabled tooallow customers access tooaspects of their cloud environment.</span></span>
* <span data-ttu-id="e14a1-154">**Unità di scala in ambienti multi-tenant condivisi.**</span><span class="sxs-lookup"><span data-stu-id="e14a1-154">**Scale units in shared multi-tenant environments.**</span></span> <span data-ttu-id="e14a1-155">Un modello può rappresentare un'unità di scala per ambienti multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="e14a1-155">A template can represent a scale unit for multi-tenant environments.</span></span> <span data-ttu-id="e14a1-156">In questo caso, hello stessa infrastruttura è toosupport utilizzati tutti i clienti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-156">In this case, hello same infrastructure is used toosupport all customers.</span></span> <span data-ttu-id="e14a1-157">le distribuzioni di Hello rappresentano un gruppo di risorse che forniscono un livello di capacità per hello ospitato offerta, ad esempio numero di utenti e numero di transazioni.</span><span class="sxs-lookup"><span data-stu-id="e14a1-157">hello deployments represent a group of resources that deliver a level of capacity for hello hosted offering, such as number of users and number of transactions.</span></span> <span data-ttu-id="e14a1-158">Tali unità di scala sono aumentate o diminuite secondo necessità.</span><span class="sxs-lookup"><span data-stu-id="e14a1-158">These scale units are increased or decreased as demand requires.</span></span>

### <a name="csv-offering-injected-into-customer-subscription"></a><span data-ttu-id="e14a1-159">Offerta CSV inserita nella sottoscrizione del cliente</span><span class="sxs-lookup"><span data-stu-id="e14a1-159">CSV offering injected into customer subscription</span></span>
<span data-ttu-id="e14a1-160">È opportuno toodeploy il software in sottoscrizioni appartenenti a clienti finali.</span><span class="sxs-lookup"><span data-stu-id="e14a1-160">You may want toodeploy your software into subscriptions owned by end customers.</span></span> <span data-ttu-id="e14a1-161">È possibile utilizzare modelli toodeploy distinti le distribuzioni di Azure conto del cliente.</span><span class="sxs-lookup"><span data-stu-id="e14a1-161">You can use templates toodeploy distinct deployments into a customer’s Azure account.</span></span>

<span data-ttu-id="e14a1-162">Le distribuzioni utilizzano RBAC, pertanto è possibile aggiornare e gestire la distribuzione di hello all'interno di account del cliente hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-162">These deployments use RBAC so you can update and manage hello deployment within hello customer’s account.</span></span>

### <a name="azure-marketplace"></a><span data-ttu-id="e14a1-163">Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="e14a1-163">Azure Marketplace</span></span>
<span data-ttu-id="e14a1-164">tooadvertise e vendere le offerte tramite un marketplace, ad esempio Azure Marketplace, è possibile sviluppare tipi distinti di modelli toodeliver delle distribuzioni in esecuzione in account di Azure di un cliente.</span><span class="sxs-lookup"><span data-stu-id="e14a1-164">tooadvertise and sell your offerings through a marketplace, such as Azure Marketplace, you can develop templates toodeliver distinct types of deployments that run in a customer’s Azure account.</span></span> <span data-ttu-id="e14a1-165">Queste distribuzioni distinte possono essere descritte in genere come taglia (small, medium, large), tipo di prodotto/pubblico (community, sviluppatore, grande impresa) o tipo di funzionalità (di base, disponibilità elevata).</span><span class="sxs-lookup"><span data-stu-id="e14a1-165">These distinct deployments can be typically described as a t-shirt size (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>  <span data-ttu-id="e14a1-166">In alcuni casi, questi tipi consentono di toospecify alcuni attributi di distribuzione di hello, ad esempio il tipo di macchina virtuale o il numero di dischi.</span><span class="sxs-lookup"><span data-stu-id="e14a1-166">In some cases, these types allow you toospecify certain attributes of hello deployment, such as VM type or number of disks.</span></span>

## <a name="oss-projects"></a><span data-ttu-id="e14a1-167">Progetti OSS</span><span class="sxs-lookup"><span data-stu-id="e14a1-167">OSS projects</span></span>
<span data-ttu-id="e14a1-168">All'interno dei progetti di origine aperti, modelli di gestione risorse abilitare una soluzione rapidamente mediante procedure comprovate toodeploy una community.</span><span class="sxs-lookup"><span data-stu-id="e14a1-168">Within open source projects, Resource Manager templates enable a community toodeploy a solution quickly using proven practices.</span></span> <span data-ttu-id="e14a1-169">È possibile archiviare i modelli in un repository di GitHub in modo community hello possibile correggerle nel tempo.</span><span class="sxs-lookup"><span data-stu-id="e14a1-169">You can store templates in a GitHub repository so hello community can revise them over time.</span></span> <span data-ttu-id="e14a1-170">Gli utenti distribuiscono questi modelli nelle proprie sottoscrizioni di Azure.</span><span class="sxs-lookup"><span data-stu-id="e14a1-170">Users deploy these templates in their own Azure subscriptions.</span></span>

<span data-ttu-id="e14a1-171">Hello nelle sezioni seguenti identificano hello utili tooconsider prima di progettare la soluzione.</span><span class="sxs-lookup"><span data-stu-id="e14a1-171">hello following sections identify hello things you need tooconsider before designing your solution.</span></span>

## <a name="identifying-what-is-outside-and-inside-a-vm"></a><span data-ttu-id="e14a1-172">Identificazione degli elementi esterni e interni di una VM</span><span class="sxs-lookup"><span data-stu-id="e14a1-172">Identifying what is outside and inside a VM</span></span>
<span data-ttu-id="e14a1-173">Quando si progetta il modello, è utile toolook requisiti hello in termini di novità esternamente e internamente hello le macchine virtuali (VM):</span><span class="sxs-lookup"><span data-stu-id="e14a1-173">As you design your template, it’s helpful toolook at hello requirements in terms of what's outside and inside hello virtual machines (VMs):</span></span>

* <span data-ttu-id="e14a1-174">Di fuori di conseguenza hello macchine virtuali e altre risorse della distribuzione, ad esempio di topologia di rete hello, assegnazione di tag, riferimenti toohello certificati/i segreti e controllo di accesso basato sui ruoli.</span><span class="sxs-lookup"><span data-stu-id="e14a1-174">Outside means hello VMs and other resources of your deployment, such as hello network topology, tagging, references toohello certs/secrets, and role-based access control.</span></span> <span data-ttu-id="e14a1-175">Tutte queste risorse fanno parte del modello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-175">All these resources are part of your template.</span></span>
* <span data-ttu-id="e14a1-176">Configurazione di stato interno significa hello software installato e complessiva desiderato.</span><span class="sxs-lookup"><span data-stu-id="e14a1-176">Inside means hello installed software and overall desired state configuration.</span></span> <span data-ttu-id="e14a1-177">Altri meccanismi, ad esempio le estensioni di VM o gli script, vengono utilizzati in tutto o in parte.</span><span class="sxs-lookup"><span data-stu-id="e14a1-177">Other mechanisms, such as VM extensions or scripts, are used in whole or in part.</span></span> <span data-ttu-id="e14a1-178">Questi meccanismi possono essere individuati ed eseguiti dal modello hello ma non sono in essa contenuti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-178">These mechanisms may be identified and executed by hello template but aren’t in it.</span></span>

<span data-ttu-id="e14a1-179">Esempi comuni di attività che si voglia agire "casella hello" includono:</span><span class="sxs-lookup"><span data-stu-id="e14a1-179">Common examples of activities you would do “inside hello box” include -</span></span>  

* <span data-ttu-id="e14a1-180">Installare o rimuovere funzionalità e ruoli del server</span><span class="sxs-lookup"><span data-stu-id="e14a1-180">Install or remove server roles and features</span></span>
* <span data-ttu-id="e14a1-181">Installare e configurare il software a livello di nodo o un cluster di hello</span><span class="sxs-lookup"><span data-stu-id="e14a1-181">Install and configure software at hello node or cluster level</span></span>
* <span data-ttu-id="e14a1-182">Distribuire siti Web in un server Web</span><span class="sxs-lookup"><span data-stu-id="e14a1-182">Deploy websites on a web server</span></span>
* <span data-ttu-id="e14a1-183">Distribuire schemi di database</span><span class="sxs-lookup"><span data-stu-id="e14a1-183">Deploy database schemas</span></span>
* <span data-ttu-id="e14a1-184">Gestire il registro di sistema o altri tipi di impostazioni di configurazione</span><span class="sxs-lookup"><span data-stu-id="e14a1-184">Manage registry or other types of configuration settings</span></span>
* <span data-ttu-id="e14a1-185">Gestire file e directory</span><span class="sxs-lookup"><span data-stu-id="e14a1-185">Manage files and directories</span></span>
* <span data-ttu-id="e14a1-186">Avviare, arrestare e gestire processi e servizi</span><span class="sxs-lookup"><span data-stu-id="e14a1-186">Start, stop, and manage processes and services</span></span>
* <span data-ttu-id="e14a1-187">Gestire account utente e gruppi locali</span><span class="sxs-lookup"><span data-stu-id="e14a1-187">Manage local groups and user accounts</span></span>
* <span data-ttu-id="e14a1-188">Installare e gestire i pacchetti (file con estensione .msi, .exe, yum e così via)</span><span class="sxs-lookup"><span data-stu-id="e14a1-188">Install and manage packages (.msi, .exe, yum, etc.)</span></span>
* <span data-ttu-id="e14a1-189">Gestire le variabili di ambiente</span><span class="sxs-lookup"><span data-stu-id="e14a1-189">Manage environment variables</span></span>
* <span data-ttu-id="e14a1-190">Eseguire gli script nativi (Windows PowerShell, bash e così via)</span><span class="sxs-lookup"><span data-stu-id="e14a1-190">Run native scripts (Windows PowerShell, bash, etc.)</span></span>

### <a name="desired-state-configuration-dsc"></a><span data-ttu-id="e14a1-191">Configurazione dello stato desiderato (DSC)</span><span class="sxs-lookup"><span data-stu-id="e14a1-191">Desired state configuration (DSC)</span></span>
<span data-ttu-id="e14a1-192">Pensando di stato interno di hello delle macchine virtuali oltre la distribuzione, si desidera che la distribuzione non "dello sfasamento" dalla configurazione hello è definito e archiviato nel controllo del codice sorgente toomake.</span><span class="sxs-lookup"><span data-stu-id="e14a1-192">Thinking about hello internal state of your VMs beyond deployment, you want toomake sure this deployment doesn’t "drift" from hello configuration that you have defined and checked into source control.</span></span> <span data-ttu-id="e14a1-193">Questo approccio assicura che gli sviluppatori o personale addetto alle operazioni non rendere l'ambiente di tooan modifiche ad hoc che non esaminato, testare o registrato nel controllo del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="e14a1-193">This approach ensures your developers or operations staff don’t make ad-hoc changes tooan environment that are not vetted, tested, or recorded in source control.</span></span> <span data-ttu-id="e14a1-194">Questo controllo è importante, perché le modifiche manuali hello non sono presenti nel controllo del codice sorgente.</span><span class="sxs-lookup"><span data-stu-id="e14a1-194">This control is important, because hello manual changes are not in source control.</span></span> <span data-ttu-id="e14a1-195">Non sono inoltre parte della distribuzione standard di hello e avrà un impatto sulle distribuzioni automatiche future di software hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-195">They are also not part of hello standard deployment and will impact future automated deployments of hello software.</span></span>

<span data-ttu-id="e14a1-196">Oltre che dal punto di vista dei dipendenti interni, la configurazione dello stato desiderato è importante anche in termini di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="e14a1-196">Beyond your internal employees, desired state configuration is also important from a security perspective.</span></span> <span data-ttu-id="e14a1-197">Pirati informatici regolarmente sta toocompromise e sfruttare i sistemi software.</span><span class="sxs-lookup"><span data-stu-id="e14a1-197">Hackers are regularly trying toocompromise and exploit software systems.</span></span> <span data-ttu-id="e14a1-198">Quando ha esito positivo, è il file tooinstall comuni e in caso contrario modificare lo stato di hello di un sistema compromesso.</span><span class="sxs-lookup"><span data-stu-id="e14a1-198">When successful, it's common tooinstall files and otherwise change hello state of a compromised system.</span></span> <span data-ttu-id="e14a1-199">Usa configurazione dello stato desiderato, è possibile identificare delta tra hello desiderato e lo stato effettivo e il ripristino di una configurazione conosciuta.</span><span class="sxs-lookup"><span data-stu-id="e14a1-199">Using desired state configuration, you can identify deltas between hello desired and actual state and restore a known configuration.</span></span>

<span data-ttu-id="e14a1-200">Sono presenti estensioni di risorsa hello più diffusi meccanismi per DSC - PowerShell DSC, Chef e Puppet.</span><span class="sxs-lookup"><span data-stu-id="e14a1-200">There are resource extensions for hello most popular mechanisms for DSC - PowerShell DSC, Chef, and Puppet.</span></span> <span data-ttu-id="e14a1-201">Ognuna di queste estensioni possa distribuire stato iniziale di hello della macchina virtuale e anche essere utilizzati toomake che hello desiderato lo stato viene mantenuto.</span><span class="sxs-lookup"><span data-stu-id="e14a1-201">Each of these extensions can deploy hello initial state of your VM and also be used toomake sure hello desired state is maintained.</span></span>

## <a name="common-template-scopes"></a><span data-ttu-id="e14a1-202">Ambiti dei modello comuni</span><span class="sxs-lookup"><span data-stu-id="e14a1-202">Common template scopes</span></span>
<span data-ttu-id="e14a1-203">Nella nostra esperienza, abbiamo visto emergere tre ambiti principali per i modelli di soluzioni.</span><span class="sxs-lookup"><span data-stu-id="e14a1-203">In our experience, we’ve seen three key solution templates scopes emerge.</span></span> <span data-ttu-id="e14a1-204">Questi tre ambiti: capacità, funzionalità e soluzioni end-to-end: vengono descritte in hello le sezioni seguenti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-204">These three scopes – capacity, capability, and end-to-end solution – are described in hello following sections.</span></span>

### <a name="capacity-scope"></a><span data-ttu-id="e14a1-205">Ambito di capacità</span><span class="sxs-lookup"><span data-stu-id="e14a1-205">Capacity scope</span></span>
<span data-ttu-id="e14a1-206">Un ambito di capacità offre un set di risorse in una topologia standard che è preconfigurato toobe in conformità con i criteri e normative.</span><span class="sxs-lookup"><span data-stu-id="e14a1-206">A capacity scope delivers a set of resources in a standard topology that is pre-configured toobe in compliance with regulations and policies.</span></span> <span data-ttu-id="e14a1-207">esempio di Hello più comune consiste nel distribuire un ambiente di sviluppo standard in uno scenario IT dell'organizzazione o SI.</span><span class="sxs-lookup"><span data-stu-id="e14a1-207">hello most common example is deploying a standard development environment in an Enterprise IT or SI scenario.</span></span>

### <a name="capability-scope"></a><span data-ttu-id="e14a1-208">Ambito di funzionalità</span><span class="sxs-lookup"><span data-stu-id="e14a1-208">Capability scope</span></span>
<span data-ttu-id="e14a1-209">Un ambito di funzionalità è incentrato sulla distribuzione e configurazione di una topologia per una determinata tecnologia.</span><span class="sxs-lookup"><span data-stu-id="e14a1-209">A capability scope is focused on deploying and configuring a topology for a given technology.</span></span> <span data-ttu-id="e14a1-210">Scenari comuni includono tecnologie quali SQL Server, Cassandra, Hadoop.</span><span class="sxs-lookup"><span data-stu-id="e14a1-210">Common scenarios including technologies such as SQL Server, Cassandra, Hadoop.</span></span>

### <a name="end-to-end-solution-scope"></a><span data-ttu-id="e14a1-211">Ambito di soluzione end-to-end</span><span class="sxs-lookup"><span data-stu-id="e14a1-211">End-to-end solution scope</span></span>
<span data-ttu-id="e14a1-212">Un ambito della soluzione End-to-End oltre una singola funzionalità di destinazione è invece incentrato sulla fornitura di una soluzione di tooend end costituita da più funzionalità.</span><span class="sxs-lookup"><span data-stu-id="e14a1-212">An End-to-End Solution Scope is targeted beyond a single capability, and instead focused on delivering an end tooend solution comprised of multiple capabilities.</span></span>  

<span data-ttu-id="e14a1-213">Un ambito di modello con ambito soluzione si manifesta come un set di uno o più modelli con ambito funzionalità con risorse, logica e stato desiderato specifici della soluzione.</span><span class="sxs-lookup"><span data-stu-id="e14a1-213">A solution-scoped template scope manifests itself as a set of one or more capability-scoped templates with solution-specific resources, logic, and desired state.</span></span> <span data-ttu-id="e14a1-214">Un esempio di un modello di soluzione con ambito è un modello di soluzione fine tooend dati pipeline.</span><span class="sxs-lookup"><span data-stu-id="e14a1-214">An example of a solution-scoped template is an end tooend data pipeline solution template.</span></span> <span data-ttu-id="e14a1-215">modello Hello può combinare topologia specifici della soluzione e lo stato con diversi modelli di soluzione con ambito di funzionalità, ad esempio Kafka Storm e Hadoop.</span><span class="sxs-lookup"><span data-stu-id="e14a1-215">hello template might mix solution-specific topology and state with multiple capability-scoped solution templates such as Kafka, Storm, and Hadoop.</span></span>

## <a name="choosing-free-form-vs-known-configurations"></a><span data-ttu-id="e14a1-216">Scelta del formato libero rispetto a configurazioni note</span><span class="sxs-lookup"><span data-stu-id="e14a1-216">Choosing free-form vs. known configurations</span></span>
<span data-ttu-id="e14a1-217">Si pensi inizialmente un modello deve fornire i consumer flessibilità massima hello, ma in considerazione numerosi fattori influiscono sulla scelta di hello se le configurazioni in formato libero toouse e configurazioni note.</span><span class="sxs-lookup"><span data-stu-id="e14a1-217">You might initially think a template should give consumers hello utmost flexibility, but many considerations affect hello choice of whether toouse free-form configurations vs. known configurations.</span></span> <span data-ttu-id="e14a1-218">In questa sezione identifica i requisiti del cliente chiave hello e considerazioni tecniche a data shaping approccio hello condiviso in questo documento.</span><span class="sxs-lookup"><span data-stu-id="e14a1-218">This section identifies hello key customer requirements and technical considerations that shaped hello approach shared in this document.</span></span>

### <a name="free-form-configurations"></a><span data-ttu-id="e14a1-219">Configurazioni in formato libero</span><span class="sxs-lookup"><span data-stu-id="e14a1-219">Free-form configurations</span></span>
<span data-ttu-id="e14a1-220">Nell'area di hello in formato libero configurazioni audio ideale.</span><span class="sxs-lookup"><span data-stu-id="e14a1-220">On hello surface, free-form configurations sound ideal.</span></span> <span data-ttu-id="e14a1-221">Consentono di tooselect un tipo di macchina virtuale e specificare un numero arbitrario di nodi e i dischi per i nodi collegati, e questa operazione come modello tooa parametri.</span><span class="sxs-lookup"><span data-stu-id="e14a1-221">They allow you tooselect a VM type and provide an arbitrary number of nodes and attached disks for those nodes — and do so as parameters tooa template.</span></span> <span data-ttu-id="e14a1-222">Questo approccio, tuttavia, non è l'ideale per alcuni scenari.</span><span class="sxs-lookup"><span data-stu-id="e14a1-222">However, this approach is not ideal for some scenarios.</span></span>

<span data-ttu-id="e14a1-223">In [dimensioni per le macchine virtuali](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), vengono identificate i diversi tipi di macchine Virtuali hello e le dimensioni disponibili e ogni numero hello di durevole dischi (2, 4, 8, 16, 32) che può essere collegato.</span><span class="sxs-lookup"><span data-stu-id="e14a1-223">In [Sizes for virtual machines](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json), hello different VM types and available sizes are identified, and each of hello number of durable disks (2, 4, 8, 16, or 32) that can be attached.</span></span> <span data-ttu-id="e14a1-224">Ogni disco collegato fornisce 500 IOPS ed è possibile raggruppare più dischi per ottenere un multiplo di tale numero di IOPS.</span><span class="sxs-lookup"><span data-stu-id="e14a1-224">Each attached disk provides 500 IOPS and multiples of these disks can be pooled for a multiplier of that number of IOPS.</span></span> <span data-ttu-id="e14a1-225">Ad esempio, di 16 dischi può essere in pool tooprovide 8.000 IOPS.</span><span class="sxs-lookup"><span data-stu-id="e14a1-225">For example, 16 disks can be pooled tooprovide 8,000 IOPS.</span></span> <span data-ttu-id="e14a1-226">Il pool viene eseguito con la configurazione nel sistema operativo hello, utilizzando gli spazi di archiviazione di Microsoft Windows o un array of inexpensive disks (RAID) in Linux.</span><span class="sxs-lookup"><span data-stu-id="e14a1-226">Pooling is done with configuration in hello operating system, using Microsoft Windows Storage Spaces or redundant array of inexpensive disks (RAID) in Linux.</span></span>

<span data-ttu-id="e14a1-227">Una configurazione in formato libero consente la selezione di hello diverse istanze di macchina virtuale, macchina virtuale di vari tipi e formati per tali istanze, i dischi diversi per il tipo di macchina virtuale, hello e uno o più script contenuto di tooconfigure hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="e14a1-227">A free-form configuration enables hello selection several VM instances, various VM types and sizes for those instances, various disks for hello VM type, and one or more scripts tooconfigure hello VM contents.</span></span>

<span data-ttu-id="e14a1-228">È comune che una distribuzione disponga di più tipi di nodi, ad esempio nodi master e nodi dati, pertanto questa flessibilità viene spesso fornita per ogni tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="e14a1-228">It is common that a deployment may have multiple types of nodes, such as master and data nodes, so this flexibility is often provided for every node type.</span></span>

<span data-ttu-id="e14a1-229">Quando si inizia a cluster toodeploy di alcun significato, iniziare toowork con questi scenari complessi.</span><span class="sxs-lookup"><span data-stu-id="e14a1-229">As you start toodeploy clusters of any significance, you begin toowork with these complex scenarios.</span></span> <span data-ttu-id="e14a1-230">Se sono stati distribuiti un cluster Hadoop, ad esempio, con 8 nodi master nodi 200 dati e in pool 4 dischi collegati in ogni nodo principale e in pool 16 dischi collegati al nodo di dati, è necessario 208 macchine virtuali e 3,232 dischi toomanage.</span><span class="sxs-lookup"><span data-stu-id="e14a1-230">If you were deploying a Hadoop cluster, for example, with 8 master nodes and 200 data nodes, and pooled 4 attached disks on each master node and pooled 16 attached disks per data node, you would have 208 VMs and 3,232 disks toomanage.</span></span>

<span data-ttu-id="e14a1-231">Un account di archiviazione verrà limitare le richieste che relative 20.000 identificato transazioni al secondo limitare, pertanto è necessario esaminare il partizionamento di account di archiviazione e utilizzare calcoli numero appropriato di hello toodetermine di storage account tooaccommodate questa topologia precedente.</span><span class="sxs-lookup"><span data-stu-id="e14a1-231">A storage account will throttle requests above its identified 20,000 transactions/second limit, so you should look at storage account partitioning and use calculations toodetermine hello appropriate number of storage accounts tooaccommodate this topology.</span></span> <span data-ttu-id="e14a1-232">Dato numerose hello combinazioni supportate dall'approccio Freeform hello, calcoli dinamici sono necessari toodetermine hello partizionamento appropriato.</span><span class="sxs-lookup"><span data-stu-id="e14a1-232">Given hello multitude of combinations supported by hello free-form approach, dynamic calculations are required toodetermine hello appropriate partitioning.</span></span> <span data-ttu-id="e14a1-233">Hello linguaggio del modello di gestione risorse di Azure non fornisce attualmente le funzioni matematiche, pertanto è necessario eseguire tali calcoli nel codice, la generazione di un modello univoco, a livello di codice con i dettagli appropriati hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-233">hello Azure Resource Manager Template Language does not presently provide mathematical functions, so you must perform these calculations in code, generating a unique, hard-coded template with hello appropriate details.</span></span>

<span data-ttu-id="e14a1-234">In scenari di isolamento e IT aziendale, un utente deve mantenere modelli hello e supporta topologie hello distribuito per una o più organizzazioni.</span><span class="sxs-lookup"><span data-stu-id="e14a1-234">In enterprise IT and SI scenarios, someone must maintain hello templates and support hello deployed topologies for one or more organizations.</span></span> <span data-ttu-id="e14a1-235">Questo sovraccarico aggiuntivo, ovvero configurazioni e modelli differenti per ogni cliente, è tutt'altro che auspicabile.</span><span class="sxs-lookup"><span data-stu-id="e14a1-235">This additional overhead — different configurations and templates for each customer — is far from desirable.</span></span>

<span data-ttu-id="e14a1-236">È possibile utilizzare questi ambienti toodeploy modelli nella sottoscrizione di Azure del cliente, ma entrambi i team IT aziendali e i volumi condivisi cluster in genere distribuirli nelle proprie sottoscrizioni, utilizzando un toobill funzione chargeback ai clienti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-236">You can use these templates toodeploy environments in your customer’s Azure subscription, but both corporate IT teams and CSVs typically deploy them into their own subscriptions, using a chargeback function toobill their customers.</span></span> <span data-ttu-id="e14a1-237">In questi scenari, obiettivo hello è toodeploy capacità per più clienti in un pool di sottoscrizioni e le distribuzioni di keep compresse popolate i problemi di sottoscrizione toominimize sottoscrizioni hello, vale a dire altre sottoscrizioni toomanage.</span><span class="sxs-lookup"><span data-stu-id="e14a1-237">In these scenarios, hello goal is toodeploy capacity for multiple customers across a pool of subscriptions and keep deployments densely populated into hello subscriptions toominimize subscription sprawl—that is, more subscriptions toomanage.</span></span> <span data-ttu-id="e14a1-238">Con le dimensioni di distribuzione dinamico raggiungimento di questo tipo di densità richiede un'attenta pianificazione e sviluppo aggiuntive per lo scaffolding lavoro per conto dell'organizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-238">With truly dynamic deployment sizes, achieving this type of density requires careful planning and additional development for scaffolding work on behalf of hello organization.</span></span>

<span data-ttu-id="e14a1-239">Inoltre, Impossibile creare sottoscrizioni tramite una chiamata API è necessario procedere manualmente tramite il portale di hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-239">In addition, you can’t create subscriptions via an API call but must do so manually through hello portal.</span></span> <span data-ttu-id="e14a1-240">Man mano che aumenta il numero di hello di sottoscrizioni, eventuali problemi di sottoscrizione risultante è richiesto un intervento manuale, non può essere automatizzata.</span><span class="sxs-lookup"><span data-stu-id="e14a1-240">As hello number of subscriptions increases, any resulting subscription sprawl requires human intervention—it can’t be automated.</span></span> <span data-ttu-id="e14a1-241">Con così tanta variabilità in dimensioni hello delle distribuzioni, è necessario effettuare il provisioning di toopre un numero di sottoscrizioni manualmente tooensure sottoscrizioni disponibili.</span><span class="sxs-lookup"><span data-stu-id="e14a1-241">With so much variability in hello sizes of deployments, you would have toopre-provision a number of subscriptions manually tooensure subscriptions are available.</span></span>

<span data-ttu-id="e14a1-242">Considerando tutti questi fattori, l'adozione di una configurazione in formato libero risulta meno accattivante che a prima vista.</span><span class="sxs-lookup"><span data-stu-id="e14a1-242">Considering all these factors, a truly free-form configuration is less appealing than at first blush.</span></span>

### <a name="known-configurations--hello-t-shirt-sizing-approach"></a><span data-ttu-id="e14a1-243">Configurazioni noto: hello approccio ridimensionamento shirt</span><span class="sxs-lookup"><span data-stu-id="e14a1-243">Known configurations — hello t-shirt sizing approach</span></span>
<span data-ttu-id="e14a1-244">Piuttosto che offrono un modello che fornisce la massima flessibilità e le variazioni innumerevoli, nella nostra esperienza un modello comune è tooprovide hello possibilità tooselect noto configurazioni, in effetti, con dimensioni shirt standard, ad esempio sandbox, piccole, medie e grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="e14a1-244">Rather than offer a template that provides total flexibility and countless variations, in our experience a common pattern is tooprovide hello ability tooselect known configurations — in effect, standard t-shirt sizes such as sandbox, small, medium, and large.</span></span> <span data-ttu-id="e14a1-245">Altri esempi di taglie sono le offerte di prodotti, come Community Edition o Enterprise Edition.</span><span class="sxs-lookup"><span data-stu-id="e14a1-245">Other examples of t-shirt sizes are product offerings, such as community edition or enterprise edition.</span></span>  <span data-ttu-id="e14a1-246">In altri casi, potrebbero essere configurazioni specifiche per i carichi di lavoro di una determinata tecnologia, ad esempio map reduce o no sql.</span><span class="sxs-lookup"><span data-stu-id="e14a1-246">In other cases, it may be workload-specific configurations of a technology – such as map reduce or no sql.</span></span>

<span data-ttu-id="e14a1-247">Molteplici organizzazioni IT aziendali, fornitori di OSS e SI oggi rendono disponibili le loro offerte utilizzando questo approccio in ambienti locali virtualizzati (aziende) o come offerte software-as-a-service (SaaS) (CSV e OSV).</span><span class="sxs-lookup"><span data-stu-id="e14a1-247">Many enterprise IT organizations, OSS vendors, and SIs make their offerings available today in this way in on-premises, virtualized environments (enterprises) or as software-as-a-service (SaaS) offerings (CSVs and OSVs).</span></span>

<span data-ttu-id="e14a1-248">Questo approccio fornisce configurazioni note ed efficienti di dimensioni variabili, preconfigurate per i clienti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-248">This approach provides good, known configurations of varying sizes that are preconfigured for customers.</span></span> <span data-ttu-id="e14a1-249">Senza configurazioni note, utenti finali devono determinare dimensioni di cluster in modo autonomo, fattore nei vincoli di risorse di piattaforma ed eseguire matematiche tooidentify hello risultante partizionamento dell'account di archiviazione e altre risorse (a causa delle dimensioni toocluster e risorse vincoli).</span><span class="sxs-lookup"><span data-stu-id="e14a1-249">Without known configurations, end customers must determine cluster sizing on their own, factor in platform resource constraints, and do math tooidentify hello resulting partitioning of storage accounts and other resources (due toocluster size and resource constraints).</span></span> <span data-ttu-id="e14a1-250">Nota le configurazioni consentono ai clienti tooeasily hello selezionare destra magliette, vale a dire, una distribuzione specificata.</span><span class="sxs-lookup"><span data-stu-id="e14a1-250">Known configurations enable customers tooeasily select hello right t-shirt size—that is, a given deployment.</span></span> <span data-ttu-id="e14a1-251">Inoltre toomaking una migliore esperienza per cliente hello, un numero ridotto di configurazioni note è più facile toosupport e consentono di offrire un livello di densità.</span><span class="sxs-lookup"><span data-stu-id="e14a1-251">In addition toomaking a better experience for hello customer, a small number of known configurations is easier toosupport and can help you deliver a higher level of density.</span></span>

<span data-ttu-id="e14a1-252">In un approccio di configurazione nota incentrato sulle taglie, la taglia può inoltre contenere un numero variabile di nodi.</span><span class="sxs-lookup"><span data-stu-id="e14a1-252">A known configuration approach focused on t-shirt sizes may also have varying number of nodes within a size.</span></span> <span data-ttu-id="e14a1-253">Ad esempio, una taglia small può contenere dai 3 ai 10 nodi.</span><span class="sxs-lookup"><span data-stu-id="e14a1-253">For example, a small t-shirt size may be between 3 and 10 nodes.</span></span>  <span data-ttu-id="e14a1-254">magliette Hello verrà progettato tooaccommodate dei nodi too10 e fornire hello selezioni consumer hello possibilità toomake in formato libero di dimensioni massime di toohello identificato.</span><span class="sxs-lookup"><span data-stu-id="e14a1-254">hello t-shirt size would be designed tooaccommodate up too10 nodes and provide hello consumer hello ability toomake free form selections up toohello maximum size identified.</span></span>  

<span data-ttu-id="e14a1-255">Un magliette in base al tipo di carico di lavoro, potrebbe essere in formato libero ulteriori natura in termini di numero hello di nodi che possono essere distribuite ma disporrà del carico di lavoro distinti nodo dimensioni e la configurazione del software hello nel nodo hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-255">A t-shirt size based on workload type, may be more free form in nature in terms of hello number of nodes that can be deployed but will have workload distinct node size and configuration of hello software on hello node.</span></span>

<span data-ttu-id="e14a1-256">Dimensioni shirt in base alle offerte di prodotti, ad esempio community o Enterprise, potrebbe essere tipi di risorse distinto e numero massimo di nodi che possono essere distribuite, in genere legati considerazioni toolicensing o la disponibilità di funzionalità tra diverse offerte hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-256">T-shirt sizes based on product offerings, such as community or Enterprise, may have distinct resource types and maximum number of nodes that can be deployed, typically tied toolicensing considerations or feature availability across hello different offerings.</span></span>

<span data-ttu-id="e14a1-257">È anche possibile aumentare i clienti con varianti univoche utilizzando i modelli basati su JSON hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-257">You can also accommodate customers with unique variants using hello JSON-based templates.</span></span> <span data-ttu-id="e14a1-258">In presenza di outlier, è possibile incorporare la pianificazione appropriata hello e considerazioni per lo sviluppo, il supporto e la determinazione dei costi.</span><span class="sxs-lookup"><span data-stu-id="e14a1-258">When dealing with outliers, you can incorporate hello appropriate planning and considerations for development, support, and costing.</span></span>

<span data-ttu-id="e14a1-259">Basato su scenari di utilizzo modelli cliente hello e dai requisiti indicati all'inizio di hello di questo documento, è stato identificato un modello per la scomposizione di modello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-259">Based on hello customer template consumption scenarios, and requirements identified at hello start of this document, we identified a pattern for template decomposition.</span></span>

## <a name="capacity-and-capability-scoped-solution-templates"></a><span data-ttu-id="e14a1-260">Modelli di soluzione con ambito di capacità e funzionalità</span><span class="sxs-lookup"><span data-stu-id="e14a1-260">Capacity and capability-scoped solution templates</span></span>
<span data-ttu-id="e14a1-261">Scomposizione fornisce uno sviluppo tootemplate approccio modulare che supporta il riutilizzo, estendibilità, test e gli strumenti.</span><span class="sxs-lookup"><span data-stu-id="e14a1-261">Decomposition provides a modular approach tootemplate development that supports reuse, extensibility, testing, and tooling.</span></span> <span data-ttu-id="e14a1-262">In questa sezione vengono forniti dettagli su come un approccio di scomposizione può essere applicate tootemplates con un ambito di capacità o funzionalità.</span><span class="sxs-lookup"><span data-stu-id="e14a1-262">This section provides detail on how a decomposition approach can be applied tootemplates with a Capacity or Capability scope.</span></span>

<span data-ttu-id="e14a1-263">In questo caso, un modello principale riceve i valori dei parametri da un consumer di modello, quindi Collega a valle tooseveral tipi di modelli e gli script, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="e14a1-263">In this approach, a main template receives parameter values from a template consumer, then links tooseveral types of templates and scripts downstream as shown below.</span></span> <span data-ttu-id="e14a1-264">Parametri, variabili statiche e variabili generate sono valori tooprovide utilizzati da e verso i modelli di hello collegato.</span><span class="sxs-lookup"><span data-stu-id="e14a1-264">Parameters, static variables, and generated variables are used tooprovide values in and out of hello linked templates.</span></span>

![Parametri del modello](./media/best-practices-resource-manager-design-templates/template-parameters.png)

<span data-ttu-id="e14a1-266">**I parametri vengono passati al modello principale tooa quindi toolinked modelli**</span><span class="sxs-lookup"><span data-stu-id="e14a1-266">**Parameters are passed tooa main template then toolinked templates**</span></span>

<span data-ttu-id="e14a1-267">Hello seguendo lo stato attivo sezioni hello tipi di modelli e gli script che viene scomposto un singolo modello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-267">hello following sections focus on hello types of templates and scripts that a single template is decomposed into.</span></span> <span data-ttu-id="e14a1-268">Nelle sezioni Hello vengono presentati gli approcci per il passaggio di informazioni sullo stato tra modelli hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-268">hello sections present approaches for passing state information among hello templates.</span></span> <span data-ttu-id="e14a1-269">Insieme a esempi sono descritti i tipi di script ogni modello e hello nell'immagine di hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-269">Each template and hello script types in hello image are described along with examples.</span></span> <span data-ttu-id="e14a1-270">Per un esempio contestuale, vedere "Uso combinato: un'implementazione di esempio", più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="e14a1-270">For a contextual example, see "Putting it together: a sample implementation" later in this document.</span></span>

### <a name="template-metadata"></a><span data-ttu-id="e14a1-271">Metadati del modello</span><span class="sxs-lookup"><span data-stu-id="e14a1-271">Template metadata</span></span>
<span data-ttu-id="e14a1-272">I metadati del modello (file metadata.json hello) contengono coppie chiave/valore che descrivono un modello in JSON, che può essere letto da persone e i sistemi software.</span><span class="sxs-lookup"><span data-stu-id="e14a1-272">Template metadata (hello metadata.json file) contains key/value pairs that describe a template in JSON, which can be read by humans and software systems.</span></span>

![Metadati del modello](./media/best-practices-resource-manager-design-templates/template-metadata.png)

<span data-ttu-id="e14a1-274">**I metadati del modello sono descritto nel file metadata.json hello**</span><span class="sxs-lookup"><span data-stu-id="e14a1-274">**Template metadata is described in hello metadata.json file**</span></span>

<span data-ttu-id="e14a1-275">Gli agenti software possono recuperare file metadata.json hello e pubblicare informazioni hello e un modello di toohello collegamento in una pagina web o directory.</span><span class="sxs-lookup"><span data-stu-id="e14a1-275">Software agents can retrieve hello metadata.json file and publish hello information and a link toohello template in a web page or directory.</span></span> <span data-ttu-id="e14a1-276">Gli elementi includono *itemDisplayName*, *description*, *summary*, *githubUsername* e *dateUpdated*.</span><span class="sxs-lookup"><span data-stu-id="e14a1-276">Elements include *itemDisplayName*, *description*, *summary*, *githubUsername*, and *dateUpdated*.</span></span>

<span data-ttu-id="e14a1-277">Di seguito è riportato un file di esempio nel suo complesso.</span><span class="sxs-lookup"><span data-stu-id="e14a1-277">An example file is shown below in its entirety.</span></span>

    {
        "itemDisplayName": "PostgreSQL 9.3 on Ubuntu VMs",
        "description": "This template creates a PostgreSQL streaming-replication between a master and one or more slave servers each with 2 striped data disks. hello database servers are deployed into a private-only subnet with one publicly accessible jumpbox VM in a DMZ subnet with public IP.",
        "summary": "PostgreSQL stream-replication with multiple slave servers and a publicly accessible jumpbox VM",
        "githubUsername": "arsenvlad",
        "dateUpdated": "2015-04-24"
    }

### <a name="main-template"></a><span data-ttu-id="e14a1-278">Modello principale</span><span class="sxs-lookup"><span data-stu-id="e14a1-278">Main template</span></span>
<span data-ttu-id="e14a1-279">modello principale Hello riceve i parametri da un utente, vengono utilizzate le variabili di oggetto complesso che informazioni toopopulate ed esegue modelli hello collegato.</span><span class="sxs-lookup"><span data-stu-id="e14a1-279">hello main template receives parameters from a user, uses that information toopopulate complex object variables, and executes hello linked templates.</span></span>

![Modello principale](./media/best-practices-resource-manager-design-templates/main-template.png)

<span data-ttu-id="e14a1-281">**modello principale Hello riceve parametri da un utente**</span><span class="sxs-lookup"><span data-stu-id="e14a1-281">**hello main template receives parameters from a user**</span></span>

<span data-ttu-id="e14a1-282">Un parametro fornito è un tipo di configurazione, noto anche come parametro di dimensione shirt hello a causa di valori standard, ad esempio, piccole, medie o grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="e14a1-282">One parameter that is provided is a known configuration type also known as hello t-shirt size parameter because of its standardized values such as small, medium, or large.</span></span> <span data-ttu-id="e14a1-283">In pratica è possibile usare questo parametro in diversi modi.</span><span class="sxs-lookup"><span data-stu-id="e14a1-283">In practice, you can use this parameter in multiple ways.</span></span> <span data-ttu-id="e14a1-284">Per ulteriori informazioni, vedere "Modello di risorse di configurazione note", più avanti in questo documento.</span><span class="sxs-lookup"><span data-stu-id="e14a1-284">For details, see "Known configuration resources template" later in this document.</span></span>

<span data-ttu-id="e14a1-285">Alcune risorse vengono distribuite indipendentemente dalla configurazione hello specificata da un parametro di tipo utente.</span><span class="sxs-lookup"><span data-stu-id="e14a1-285">Some resources are deployed regardless of hello known configuration specified by a user parameter.</span></span> <span data-ttu-id="e14a1-286">Queste risorse vengono effettuato il provisioning con un modello di risorsa condivisa singolo e sono condivisi da altri modelli, pertanto il modello di risorsa condivisa hello viene eseguito per primo.</span><span class="sxs-lookup"><span data-stu-id="e14a1-286">These resources are provisioned using a single shared resource template and are shared by other templates, so hello shared resource template is run first.</span></span>

<span data-ttu-id="e14a1-287">Alcune risorse vengono distribuite facoltativamente indipendentemente dalla configurazione hello specificato.</span><span class="sxs-lookup"><span data-stu-id="e14a1-287">Some resources are deployed optionally regardless of hello specified known configuration.</span></span>

### <a name="shared-resources-template"></a><span data-ttu-id="e14a1-288">Modello di risorse condivise</span><span class="sxs-lookup"><span data-stu-id="e14a1-288">Shared resources template</span></span>
<span data-ttu-id="e14a1-289">Questo modello offre risorse comuni a tutte le configurazioni note.</span><span class="sxs-lookup"><span data-stu-id="e14a1-289">This template delivers resources that are common across all known configurations.</span></span> <span data-ttu-id="e14a1-290">Contiene la rete virtuale hello, set di disponibilità e altre risorse che sono necessari, indipendentemente dal modello di configurazione hello distribuito.</span><span class="sxs-lookup"><span data-stu-id="e14a1-290">It contains hello virtual network, availability sets, and other resources that are required regardless of hello known configuration template that is deployed.</span></span>

![Risorse del modello](./media/best-practices-resource-manager-design-templates/template-resources.png)

<span data-ttu-id="e14a1-292">**Modello di risorse condivise**</span><span class="sxs-lookup"><span data-stu-id="e14a1-292">**Shared resources template**</span></span>

<span data-ttu-id="e14a1-293">Nomi di risorse, ad esempio il nome di rete virtuale hello basati sul modello principale hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-293">Resource names, such as hello virtual network name, are based on hello main template.</span></span> <span data-ttu-id="e14a1-294">È possibile specificarli come una variabile all'interno di tale modello o ricevere come un parametro dall'utente hello, come richiesto dall'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="e14a1-294">You can specify them as a variable within that template or receive them as a parameter from hello user, as required by your organization.</span></span>

### <a name="optional-resources-template"></a><span data-ttu-id="e14a1-295">Modello di risorse facoltative</span><span class="sxs-lookup"><span data-stu-id="e14a1-295">Optional resources template</span></span>
<span data-ttu-id="e14a1-296">modello di risorse facoltativi Hello contiene risorse che vengono distribuite a livello di codice in base al valore di hello del parametro o variabile.</span><span class="sxs-lookup"><span data-stu-id="e14a1-296">hello optional resources template contains resources that are programmatically deployed based on hello value of a parameter or variable.</span></span>

![Risorse facoltative](./media/best-practices-resource-manager-design-templates/optional-resources.png)

<span data-ttu-id="e14a1-298">**Modello di risorse facoltative**</span><span class="sxs-lookup"><span data-stu-id="e14a1-298">**Optional resources template**</span></span>

<span data-ttu-id="e14a1-299">Ad esempio, è possibile utilizzare un tooconfigure modello di risorse facoltativi un jumpbox che consente l'accesso indiretto tooa distribuito ambiente da hello rete Internet pubblica.</span><span class="sxs-lookup"><span data-stu-id="e14a1-299">For example, you can use an optional resources template tooconfigure a jumpbox that enables indirect access tooa deployed environment from hello public Internet.</span></span> <span data-ttu-id="e14a1-300">Utilizzare tooidentify un parametro o variabile se devono essere attivati jumpbox hello e hello *concat* nome della funzione toobuild hello destinazione per il modello di hello, ad esempio *jumpbox_enabled.json*.</span><span class="sxs-lookup"><span data-stu-id="e14a1-300">You would use a parameter or variable tooidentify whether hello jumpbox should be enabled and hello *concat* function toobuild hello target name for hello template, such as *jumpbox_enabled.json*.</span></span> <span data-ttu-id="e14a1-301">Il collegamento di modello, è necessario utilizzare hello risultante tooinstall variabile hello jumpbox.</span><span class="sxs-lookup"><span data-stu-id="e14a1-301">Template linking would use hello resulting variable tooinstall hello jumpbox.</span></span>

<span data-ttu-id="e14a1-302">È possibile collegare il modello di risorse facoltativi hello da più posizioni:</span><span class="sxs-lookup"><span data-stu-id="e14a1-302">You can link hello optional resources template from multiple places:</span></span>

* <span data-ttu-id="e14a1-303">Quando applicabile tooevery distribuzione, creare un collegamento basati su parametri di modello di risorse condivise hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-303">When applicable tooevery deployment, create a parameter-driven link from hello shared resources template.</span></span>
* <span data-ttu-id="e14a1-304">Quando applicabile tooselect noto configurazioni, ad esempio, installare solo nelle distribuzioni di grandi dimensioni, creare un collegamento basati su parametri o sulla variabile dal modello di configurazione hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-304">When applicable tooselect known configurations—for example, only install on large deployments—create a parameter-driven or variable-driven link from hello known configuration template.</span></span>

<span data-ttu-id="e14a1-305">Se una determinata risorsa è facoltativa potrebbe non essere dovute consumer modello hello ma dal provider di modelli di hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-305">Whether a given resource is optional may not be driven by hello template consumer but instead by hello template provider.</span></span> <span data-ttu-id="e14a1-306">Ad esempio, potrebbe essere necessario toosatisfy un requisito specifico del prodotto o componente aggiuntivo di prodotto (comune per i volumi condivisi cluster) o criteri tooenforce (comuni per SIs e IT aziendale gruppi).</span><span class="sxs-lookup"><span data-stu-id="e14a1-306">For example, you may need toosatisfy a particular product requirement or product add-on (common for CSVs) or tooenforce policies (common for SIs and enterprise IT groups).</span></span> <span data-ttu-id="e14a1-307">In questi casi, è possibile utilizzare una variabile tooidentify se la risorsa hello deve essere distribuita.</span><span class="sxs-lookup"><span data-stu-id="e14a1-307">In these cases, you can use a variable tooidentify whether hello resource should be deployed.</span></span>

### <a name="known-configuration-resources-template"></a><span data-ttu-id="e14a1-308">Modello di risorse di configurazione note</span><span class="sxs-lookup"><span data-stu-id="e14a1-308">Known configuration resources template</span></span>
<span data-ttu-id="e14a1-309">Nel modello principale hello, un parametro può essere esposto tooallow hello modello consumer toospecify toodeploy una configurazione desiderata.</span><span class="sxs-lookup"><span data-stu-id="e14a1-309">In hello main template, a parameter can be exposed tooallow hello template consumer toospecify a desired known configuration toodeploy.</span></span> <span data-ttu-id="e14a1-310">Spesso, questa configurazione nota usa un approccio basato sulle taglie con un set di dimensioni di configurazione fisse quali sandbox, small, medium e large.</span><span class="sxs-lookup"><span data-stu-id="e14a1-310">Often, this known configuration uses a t-shirt size approach with a set of fixed configuration sizes such as sandbox, small, medium, and large.</span></span>

![Risorse di configurazione note](./media/best-practices-resource-manager-design-templates/known-config.png)

<span data-ttu-id="e14a1-312">**Modello di risorse di configurazione note**</span><span class="sxs-lookup"><span data-stu-id="e14a1-312">**Known configuration resources template**</span></span>

<span data-ttu-id="e14a1-313">approccio di dimensioni shirt Hello viene in genere utilizzato, ma i parametri di hello possono rappresentare qualsiasi set di configurazione conosciuta.</span><span class="sxs-lookup"><span data-stu-id="e14a1-313">hello t-shirt size approach is commonly used, but hello parameters can represent any set of known configurations.</span></span> <span data-ttu-id="e14a1-314">Ad esempio, è possibile specificare un set di ambienti per un'applicazione aziendale, ad esempio sviluppo, test e prodotto.</span><span class="sxs-lookup"><span data-stu-id="e14a1-314">For example, you can specify a set of environments for an enterprise application such as Development, Test, and Product.</span></span> <span data-ttu-id="e14a1-315">Oppure è possibile utilizzarlo per un servizio cloud per toorepresent diversa scala unità, versioni o configurazioni di prodotto, ad esempio Community, Developer o Enterprise.</span><span class="sxs-lookup"><span data-stu-id="e14a1-315">Or you could use it for a cloud service toorepresent different scale units, product versions, or product configurations such as Community, Developer, or Enterprise.</span></span>

<span data-ttu-id="e14a1-316">Come con il modello di risorsa condivisa hello, le variabili vengono passate modello configurazioni note toohello dal:</span><span class="sxs-lookup"><span data-stu-id="e14a1-316">As with hello shared resource template, variables are passed toohello known configurations template from either:</span></span>

* <span data-ttu-id="e14a1-317">Un utente finale, ovvero parametri hello inviato toohello principale dei modelli.</span><span class="sxs-lookup"><span data-stu-id="e14a1-317">An end user—that is, hello parameters sent toohello main template.</span></span>
* <span data-ttu-id="e14a1-318">Un'organizzazione: hello, ovvero le variabili nel modello principale hello che rappresentano i requisiti interni o i criteri.</span><span class="sxs-lookup"><span data-stu-id="e14a1-318">An organization—that is, hello variables in hello main template that represent internal requirements or policies.</span></span>

### <a name="member-resources-template"></a><span data-ttu-id="e14a1-319">Modello di risorse membro</span><span class="sxs-lookup"><span data-stu-id="e14a1-319">Member resources template</span></span>
<span data-ttu-id="e14a1-320">All'interno di una configurazione nota sono spesso inclusi uno o più tipi di nodi membro.</span><span class="sxs-lookup"><span data-stu-id="e14a1-320">Within a known configuration, one or more member node types are often included.</span></span> <span data-ttu-id="e14a1-321">Ad esempio, con Hadoop si hanno nodi master e nodi dati.</span><span class="sxs-lookup"><span data-stu-id="e14a1-321">For example, with Hadoop you have master nodes and data nodes.</span></span> <span data-ttu-id="e14a1-322">Installando MongoDB, si hanno nodi dati e un arbitro.</span><span class="sxs-lookup"><span data-stu-id="e14a1-322">If you are installing MongoDB, you have data nodes and an arbiter.</span></span> <span data-ttu-id="e14a1-323">Distribuendo DataStax, si hanno nodi dati e una VM con OpsCenter installato.</span><span class="sxs-lookup"><span data-stu-id="e14a1-323">If you are deploying DataStax, you have data nodes and a VM with OpsCenter installed.</span></span>

![Risorse membro](./media/best-practices-resource-manager-design-templates/member-resources.png)

<span data-ttu-id="e14a1-325">**Modello di risorse membro**</span><span class="sxs-lookup"><span data-stu-id="e14a1-325">**Member resources template**</span></span>

<span data-ttu-id="e14a1-326">Ogni tipo di nodi può avere dimensioni diverse delle macchine virtuali, i numeri di dischi collegati, gli script tooinstall e impostare i nodi di hello, configurazioni di porta per le macchine virtuali hello, numero di istanze e altri dettagli.</span><span class="sxs-lookup"><span data-stu-id="e14a1-326">Each type of nodes can have different sizes of VMs, numbers of attached disks, scripts tooinstall and set up hello nodes, port configurations for hello VMs, number of instances, and other details.</span></span> <span data-ttu-id="e14a1-327">In modo che ogni tipo di nodo ottenga il proprio modello di risorse di membro, che contiene hello informazioni dettagliate per la distribuzione e configurazione di un'infrastruttura nonché per l'esecuzione di script toodeploy e configurare software all'interno di hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="e14a1-327">So each node type gets its own member resource template, which contains hello details for deploying and configuring an infrastructure as well as executing scripts toodeploy and configure software within hello VM.</span></span>

<span data-ttu-id="e14a1-328">Per le VM, in genere vengono utilizzati due tipi di script, ovvero script ampiamente riutilizzabili e script personalizzati.</span><span class="sxs-lookup"><span data-stu-id="e14a1-328">For VMs, typically two types of scripts are used, widely reusable and custom scripts.</span></span>

### <a name="widely-reusable-scripts"></a><span data-ttu-id="e14a1-329">Script ampiamente riutilizzabili</span><span class="sxs-lookup"><span data-stu-id="e14a1-329">Widely reusable scripts</span></span>
<span data-ttu-id="e14a1-330">Gli script ampiamente riutilizzabili possono essere impiegati in più tipi di modelli.</span><span class="sxs-lookup"><span data-stu-id="e14a1-330">Widely reusable scripts can be used across multiple types of templates.</span></span> <span data-ttu-id="e14a1-331">Uno degli esempi di migliori hello di questi script riutilizzabili ampiamente imposta RAID su Linux toopool dischi e ottenere un numero maggiore di operazioni IOPS.</span><span class="sxs-lookup"><span data-stu-id="e14a1-331">One of hello better examples of these widely reusable scripts sets up RAID on Linux toopool disks and gain a greater number of IOPS.</span></span> <span data-ttu-id="e14a1-332">Indipendentemente dal software di hello viene installato nella macchina virtuale hello, questo script fornisce riutilizzo delle procedure comprovate per scenari comuni.</span><span class="sxs-lookup"><span data-stu-id="e14a1-332">Regardless of hello software being installed in hello VM, this script provides reuse of proven practices for common scenarios.</span></span>

![Script riutilizzabili](./media/best-practices-resource-manager-design-templates/reusable-scripts.png)

<span data-ttu-id="e14a1-334">**I modelli di risorse membro possono chiamare script ampiamente riutilizzabili**</span><span class="sxs-lookup"><span data-stu-id="e14a1-334">**Member resources templates can call widely reusable scripts**</span></span>

### <a name="custom-scripts"></a><span data-ttu-id="e14a1-335">Script personalizzati</span><span class="sxs-lookup"><span data-stu-id="e14a1-335">Custom scripts</span></span>
<span data-ttu-id="e14a1-336">I modelli chiamano comunemente uno o più script che consentono di installare e configurare il software all'interno delle VM.</span><span class="sxs-lookup"><span data-stu-id="e14a1-336">Templates commonly call one or more scripts that install and configure software within VMs.</span></span> <span data-ttu-id="e14a1-337">È stato osservato uno schema comune con le topologie di grandi dimensioni in cui vengono distribuite più istanze di uno o più tipi membro.</span><span class="sxs-lookup"><span data-stu-id="e14a1-337">A common pattern is seen with large topologies where multiple instances of one or more member types are deployed.</span></span> <span data-ttu-id="e14a1-338">Per ogni macchina virtuale viene avviato uno script di installazione eseguibile in parallelo, seguito da uno script di configurazione chiamato dopo la distribuzione di tutte le VM (o tutte le VM di un tipo di membro specificato).</span><span class="sxs-lookup"><span data-stu-id="e14a1-338">An installation script is initiated for every VM that can be run in parallel, followed by a setup script that is called after all VMs (or all VMs of a given member type) are deployed.</span></span>

![Script personalizzati](./media/best-practices-resource-manager-design-templates/custom-scripts.png)

<span data-ttu-id="e14a1-340">**I modelli di risorse membro possono chiamare script per uno scopo specifico, ad esempio la configurazione della VM**</span><span class="sxs-lookup"><span data-stu-id="e14a1-340">**Member resources templates can call scripts for a specific purpose such as VM configuration**</span></span>

## <a name="capability-scoped-solution-template-example---redis"></a><span data-ttu-id="e14a1-341">Esempio di modello di soluzione con ambito di funzionalità - Redis</span><span class="sxs-lookup"><span data-stu-id="e14a1-341">Capability-scoped solution template example - Redis</span></span>
<span data-ttu-id="e14a1-342">tooshow come un'implementazione potrebbe funzionare, esaminiamo un esempio pratico di compilazione di un modello che facilita la distribuzione di hello e configurazione di Redis in dimensioni che vanno shirt standard.</span><span class="sxs-lookup"><span data-stu-id="e14a1-342">tooshow how an implementation might work, let's look at a practical example of building a template that facilitates hello deployment and configuration of Redis in standard t-shirt sizes.</span></span>  

<span data-ttu-id="e14a1-343">Per la distribuzione di hello, esistono una serie di risorse condivise (rete virtuale, account di archiviazione, i set di disponibilità) e una risorsa facoltativa (jumpbox).</span><span class="sxs-lookup"><span data-stu-id="e14a1-343">For hello deployment, there are a set of shared resources (virtual network, storage account, availability sets) and an optional resource (jumpbox).</span></span> <span data-ttu-id="e14a1-344">Esistono più configurazioni note rappresentate come taglie (small, medium, large) ma ciascuna con un tipo di nodo singolo.</span><span class="sxs-lookup"><span data-stu-id="e14a1-344">There are multiple known configurations represented as t-shirt sizes (small, medium, large) but each with a single node type.</span></span> <span data-ttu-id="e14a1-345">Esistono anche due script specifici per lo scopo (installazione, configurazione).</span><span class="sxs-lookup"><span data-stu-id="e14a1-345">There are also two purpose-specific scripts (installation, configuration).</span></span>

### <a name="creating-hello-template-files"></a><span data-ttu-id="e14a1-346">Creazione di file modello hello</span><span class="sxs-lookup"><span data-stu-id="e14a1-346">Creating hello template files</span></span>
<span data-ttu-id="e14a1-347">Verrà creato un modello principale denominato azuredeploy.json.</span><span class="sxs-lookup"><span data-stu-id="e14a1-347">You would create a Main Template named azuredeploy.json.</span></span>

<span data-ttu-id="e14a1-348">Verrà creato un modello di risorse condivise denominato shared-resources.json</span><span class="sxs-lookup"><span data-stu-id="e14a1-348">You create Shared Resources Template named shared-resources.json</span></span>

<span data-ttu-id="e14a1-349">Si crea un modello di risorsa facoltativo tooenable hello di distribuzione di un jumpbox, denominato jumpbox_enabled.json</span><span class="sxs-lookup"><span data-stu-id="e14a1-349">You create an Optional Resource Template tooenable hello deployment of a jumpbox, named jumpbox_enabled.json</span></span>

<span data-ttu-id="e14a1-350">Redis usa solo un tipo di nodo singolo, in modo che venga creato un unico modello di risorsa membro denominato node-resources.json.</span><span class="sxs-lookup"><span data-stu-id="e14a1-350">Redis uses just a single node type, so you create a single Member Resource Template named node-resources.json.</span></span>

<span data-ttu-id="e14a1-351">Con Redis, desidera tooinstall ogni singolo nodo e quindi configurare il cluster hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-351">With Redis, you want tooinstall each individual node, and then set up hello cluster.</span></span>  <span data-ttu-id="e14a1-352">Si dispone di script tooaccommodate hello installazione e configurato, redis-cluster-install.sh e redis-cluster-setup.sh.</span><span class="sxs-lookup"><span data-stu-id="e14a1-352">You have scripts tooaccommodate hello installation and set up, redis-cluster-install.sh and redis-cluster-setup.sh.</span></span>

### <a name="linking-hello-templates"></a><span data-ttu-id="e14a1-353">Il collegamento modelli hello</span><span class="sxs-lookup"><span data-stu-id="e14a1-353">Linking hello templates</span></span>
<span data-ttu-id="e14a1-354">Collegamento di modello modello principale hello collega il modello di risorse condivise toohello crea rete virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-354">Using template linking, hello main template links out toohello shared resources template, which establishes hello virtual network.</span></span>

<span data-ttu-id="e14a1-355">Logica viene aggiunto all'interno di consumatori di tooenable hello principale dei modelli di hello modello toospecify se deve essere distribuito un jumpbox.</span><span class="sxs-lookup"><span data-stu-id="e14a1-355">Logic is added within hello main template tooenable consumers of hello template toospecify whether a jumpbox should be deployed.</span></span> <span data-ttu-id="e14a1-356">Un *abilitato* valore per hello *EnableJumpbox* parametro indica che hello clienti toodeploy un jumpbox.</span><span class="sxs-lookup"><span data-stu-id="e14a1-356">An *enabled* value for hello *EnableJumpbox* parameter indicates that hello customer wants toodeploy a jumpbox.</span></span> <span data-ttu-id="e14a1-357">Quando questo valore viene specificato, il modello di hello concatena *Enabled* come nome di modello di base tooa suffisso per la funzionalità jumpbox hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-357">When this value is provided, hello template concatenates *_enabled* as a suffix tooa base template name for hello jumpbox capability.</span></span>

<span data-ttu-id="e14a1-358">modello principale Hello applica hello *grandi* valore di parametro come nome suffisso tooa modello di base per le dimensioni shirt e quindi usa tale valore in un collegamento di modello out troppo*technology_on_os_large.json*.</span><span class="sxs-lookup"><span data-stu-id="e14a1-358">hello main template applies hello *large* parameter value as a suffix tooa base template name for t-shirt sizes, and then uses that value in a template link out too*technology_on_os_large.json*.</span></span>

<span data-ttu-id="e14a1-359">topologia Hello è simile al seguente illustrazione.</span><span class="sxs-lookup"><span data-stu-id="e14a1-359">hello topology would resemble this illustration.</span></span>

![Modello di Redis](./media/best-practices-resource-manager-design-templates/redis-template.png)

<span data-ttu-id="e14a1-361">**Struttura del modello per un modello di Redis**</span><span class="sxs-lookup"><span data-stu-id="e14a1-361">**Template structure for a Redis template**</span></span>

### <a name="configuring-state"></a><span data-ttu-id="e14a1-362">Configurazione dello stato</span><span class="sxs-lookup"><span data-stu-id="e14a1-362">Configuring state</span></span>
<span data-ttu-id="e14a1-363">Per i nodi nel cluster hello hello, sono disponibili due passaggi stato hello tooconfiguring, rappresentati da script specifico scopo.</span><span class="sxs-lookup"><span data-stu-id="e14a1-363">For hello nodes in hello cluster, there are two steps tooconfiguring hello state, both represented by Purpose Specific Scripts.</span></span>  <span data-ttu-id="e14a1-364">Redis le installazioni "cluster redis-install.sh" e "cluster-redis-setup.sh" imposta cluster hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-364">"redis-cluster-install.sh" installs Redis and "redis-cluster-setup.sh" sets up hello cluster.</span></span>

### <a name="supporting-different-size-deployments"></a><span data-ttu-id="e14a1-365">Supporto di distribuzioni di dimensioni diverse</span><span class="sxs-lookup"><span data-stu-id="e14a1-365">Supporting Different Size Deployments</span></span>
<span data-ttu-id="e14a1-366">All'interno di variabili, modello di dimensione shirt hello specifica il numero di hello dei nodi di ogni tipo toodeploy per hello dimensioni specificate (*grandi*).</span><span class="sxs-lookup"><span data-stu-id="e14a1-366">Inside variables, hello t-shirt size template specifies hello number of nodes of each type toodeploy for hello specified size (*large*).</span></span> <span data-ttu-id="e14a1-367">Distribuisce quindi il numero di istanze di macchina virtuale utilizzando i cicli di risorse, fornire nomi univoci tooresources mediante l'aggiunta di un nome di nodo con un numero di sequenza numerica da *copyIndex()*.</span><span class="sxs-lookup"><span data-stu-id="e14a1-367">It then deploys that number of VM instances using resource loops, providing unique names tooresources by appending a node name with a numeric sequence number from *copyIndex()*.</span></span> <span data-ttu-id="e14a1-368">Che questi passaggi per entrambe le macchine virtuali di area alto e medio, come definito nel modello di nome shirt hello</span><span class="sxs-lookup"><span data-stu-id="e14a1-368">It does these steps for both hot and warm zone VMs, as defined in hello t-shirt name template</span></span>

## <a name="decomposition-and-end-to-end-solution-scoped-templates"></a><span data-ttu-id="e14a1-369">Modelli con ambito di soluzione end-to-end e di scomposizione</span><span class="sxs-lookup"><span data-stu-id="e14a1-369">Decomposition and end-to-end solution scoped templates</span></span>
<span data-ttu-id="e14a1-370">Un modello di soluzione con ambito di soluzione end-to-end è incentrato sulla fornitura di una soluzione end-to-end.</span><span class="sxs-lookup"><span data-stu-id="e14a1-370">A solution template with an end-to-end solution scope is focused on delivering an end-to-end solution.</span></span>  <span data-ttu-id="e14a1-371">Questo approccio prevede in genere una composizione di più modelli con ambito di funzionalità con risorse aggiuntive, logica e stato.</span><span class="sxs-lookup"><span data-stu-id="e14a1-371">This approach is typically a composition of multiple capability-scoped templates with additional resources, logic, and state.</span></span>

<span data-ttu-id="e14a1-372">Come mostrato nell'immagine di hello riportata di seguito, hello stesso modello utilizzato per i modelli di funzionalità con ambito viene esteso per i modelli con un ambito della soluzione End-to-End.</span><span class="sxs-lookup"><span data-stu-id="e14a1-372">As highlighted in hello image below, hello same model used for capability scoped templates is extended for templates with an End-to-End Solution Scope.</span></span>

<span data-ttu-id="e14a1-373">Un modello di risorse condivise e facoltativo risorse modelli servire hello stessa funzione come capacità hello e funzionalità con ambito approcci di modello, ma hanno come ambito per la soluzione di tooend end hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-373">A Shared Resources Template and Optional Resources Templates serve hello same function as in hello capacity and capability scoped template approaches, but are scoped for hello end tooend solution.</span></span>

<span data-ttu-id="e14a1-374">Come soluzione tooend end ambito modelli, inoltre, possono in genere hanno dimensioni shirt, modello di risorse di configurazione noto hello riflette il contenuto richiesto per una determinata configurazione nota della soluzione hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-374">As end tooend solution scoped templates also can typically have t-shirt sizes, hello Known Configuration Resources template reflects what is required for a given known configuration of hello solution.</span></span>

<span data-ttu-id="e14a1-375">modelli di soluzione soluzione tooend toohello pertinenti, nonché modelli di membro di risorse che sono necessari per la soluzione di hello end tooend hello con ambito Hello noto modello di risorse di configurazione collegamenti tooone o altre funzionalità.</span><span class="sxs-lookup"><span data-stu-id="e14a1-375">hello Known Configuration Resources Template links tooone or more capability scoped solution templates that are relevant toohello end tooend solution as well as hello Member Resource Templates that are required for hello end tooend solution.</span></span>

<span data-ttu-id="e14a1-376">Come magliette hello della soluzione hello potrebbe essere diversi da hello singolo funzionalità con ambito di modello, le variabili all'interno di hello noto modello di risorse di configurazione sono utilizzati tooprovide hello i valori appropriati per la soluzione a valle funzionalità con ambita modelli toodeploy hello appropriato magliette.</span><span class="sxs-lookup"><span data-stu-id="e14a1-376">As hello t-shirt size of hello solution may be different than hello individual capability-scoped template, variables within hello Known Configuration Resources Template are used tooprovide hello appropriate values for downstream capability scoped solution templates toodeploy hello appropriate t-shirt size.</span></span>

![End-to-end](./media/best-practices-resource-manager-design-templates/end-to-end.png)

<span data-ttu-id="e14a1-378">**Hello modello utilizzato per la capacità o modelli di soluzioni di funzionalità con ambito possono essere facilmente esteso per gli ambiti di fine tooend Esplora modello**</span><span class="sxs-lookup"><span data-stu-id="e14a1-378">**hello model used for capacity or capability scoped solution templates can be readily extended for end tooend solution template scopes**</span></span>

## <a name="preparing-templates-for-hello-marketplace"></a><span data-ttu-id="e14a1-379">Preparazione di modelli per hello Marketplace</span><span class="sxs-lookup"><span data-stu-id="e14a1-379">Preparing templates for hello Marketplace</span></span>
<span data-ttu-id="e14a1-380">Hello precede immediatamente l'approccio supporta scenari in cui le aziende, SIs e volumi condivisi cluster tooeither si desidera distribuire i modelli di hello o abilitare toodeploy i clienti in modo autonomo.</span><span class="sxs-lookup"><span data-stu-id="e14a1-380">hello preceding approach readily accommodates scenarios where Enterprises, SIs, and CSVs want tooeither deploy hello templates themselves or enable their customers toodeploy on their own.</span></span>

<span data-ttu-id="e14a1-381">Un altro scenario desiderato è la distribuzione di un modello tramite il marketplace hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-381">Another desired scenario is deploying a template via hello marketplace.</span></span>  <span data-ttu-id="e14a1-382">Questo approccio di scomposizione funziona per marketplace hello, con alcune piccole modifiche.</span><span class="sxs-lookup"><span data-stu-id="e14a1-382">This decomposition approach works for hello marketplace as well, with some minor changes.</span></span>

<span data-ttu-id="e14a1-383">Come accennato in precedenza, i modelli possono essere tipi di distribuzione distinto toooffer utilizzato per la vendita nel marketplace hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-383">As mentioned previously, templates can be used toooffer distinct deployment types for sale in hello marketplace.</span></span> <span data-ttu-id="e14a1-384">Tipi di distribuzioni distinte possono essere le taglie (small, medium, large), il tipo di prodotto/pubblico (community, sviluppatore, grande impresa) o il tipo di funzionalità (di base, disponibilità elevata).</span><span class="sxs-lookup"><span data-stu-id="e14a1-384">Distinct deployment types may be t-shirt sizes (small, medium, large), product/audience type (community, developer, enterprise), or feature type (basic, high availability).</span></span>

<span data-ttu-id="e14a1-385">Come indicato di seguito, hello esistente tooend fine soluzione o funzionalità con ambito di modelli può essere facilmente utilizzati toolist hello diverse configurazioni note in marketplace hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-385">As shown below, hello existing end tooend solution or capability scoped templates can be readily utilized toolist hello different known configurations in hello marketplace.</span></span>

<span data-ttu-id="e14a1-386">Hello parametri toohello principale dei modelli vengono innanzitutto modificati tooremove hello denominato tshirtSize in ingresso.</span><span class="sxs-lookup"><span data-stu-id="e14a1-386">hello parameters toohello main template are first modified tooremove hello inbound parameter named tshirtSize.</span></span>

<span data-ttu-id="e14a1-387">Durante il mapping dei tipi di distribuzione distinto hello toohello noto modello di risorse di configurazione, sarà necessario anche risorse comuni hello e trovare la configurazione hello modello di risorse condivise e potenzialmente quelli nei modelli di risorsa facoltativo.</span><span class="sxs-lookup"><span data-stu-id="e14a1-387">While hello distinct deployment types map toohello Known Configuration Resources Template, they also need hello common resources and configuration found in hello Shared Resources Template and potentially those in Optional Resource Templates.</span></span>

<span data-ttu-id="e14a1-388">Se si desidera toopublish marketplace toohello modello, si stabilisce copie distinte del modello principale che sostituisce hello in precedenza disponibili in ingresso parametro della variabile tooa tshirtSize incorporata nel modello di hello.</span><span class="sxs-lookup"><span data-stu-id="e14a1-388">If you want toopublish your template toohello marketplace, you establish distinct copies of your Main template that replaces hello previously available inbound parameter of tshirtSize tooa variable embedded within hello template.</span></span>

![Marketplace](./media/best-practices-resource-manager-design-templates/marketplace.png)

<span data-ttu-id="e14a1-390">**Adattamento di una soluzione con ambito di modello per marketplace hello**</span><span class="sxs-lookup"><span data-stu-id="e14a1-390">**Adapting a solution scoped template for hello marketplace**</span></span>

## <a name="next-steps"></a><span data-ttu-id="e14a1-391">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="e14a1-391">Next steps</span></span>
* <span data-ttu-id="e14a1-392">toolearn sulla condivisione dello stato interno e all'esterno di modelli, vedere [condivisione dello stato nei modelli di Azure Resource Manager](best-practices-resource-manager-state.md).</span><span class="sxs-lookup"><span data-stu-id="e14a1-392">toolearn about sharing state into and out of templates, see [Sharing state in Azure Resource Manager templates](best-practices-resource-manager-state.md).</span></span>
* <span data-ttu-id="e14a1-393">Per istruzioni su come le aziende possono usare tooeffectively Gestione risorse di gestione di sottoscrizioni, vedere [lo scaffolding di Azure enterprise - governance sottoscrizione rigorosa](resource-manager-subscription-governance.md).</span><span class="sxs-lookup"><span data-stu-id="e14a1-393">For guidance on how enterprises can use Resource Manager tooeffectively manage subscriptions, see [Azure enterprise scaffold - prescriptive subscription governance](resource-manager-subscription-governance.md).</span></span>

