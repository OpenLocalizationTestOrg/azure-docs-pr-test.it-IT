---
title: "Attività aaaCopy ottimizzazione Guida e alle prestazioni | Documenti Microsoft"
description: "Informazioni sui fattori che influiscono sulle prestazioni di hello di trasferimento dei dati in Data Factory di Azure quando si utilizza l'attività di copia."
services: data-factory
documentationcenter: 
author: linda33wj
manager: jhubbard
editor: monicar
ms.assetid: 4b9a6a4f-8cf5-4e0a-a06f-8133a2b7bc58
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/10/2017
ms.author: jingwang
ms.openlocfilehash: b0fb5a76c34752d07e8ddfffbb799a05fb5d6be6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="copy-activity-performance-and-tuning-guide"></a><span data-ttu-id="712f7-103">Guida alle prestazioni dell'attività di copia e all'ottimizzazione</span><span class="sxs-lookup"><span data-stu-id="712f7-103">Copy Activity performance and tuning guide</span></span>
<span data-ttu-id="712f7-104">L'attività di copia di Azure Data Factory offre una soluzione di caricamento dei dati di primo livello in quanto a sicurezza, affidabilità e prestazioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-104">Azure Data Factory Copy Activity delivers a first-class secure, reliable, and high-performance data loading solution.</span></span> <span data-ttu-id="712f7-105">Consente di toocopy decine di terabyte di dati ogni giorno in un'ampia varietà di cloud e archivi dati locali.</span><span class="sxs-lookup"><span data-stu-id="712f7-105">It enables you toocopy tens of terabytes of data every day across a rich variety of cloud and on-premises data stores.</span></span> <span data-ttu-id="712f7-106">Velocissime dati prestazioni di caricamento sono tooensure chiave, è possibile concentrarsi sul problema di "big data" hello core: compilazione di soluzioni avanzate analitica e recupero approfondite da tutti i dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-106">Blazing-fast data loading performance is key tooensure you can focus on hello core “big data” problem: building advanced analytics solutions and getting deep insights from all that data.</span></span>

<span data-ttu-id="712f7-107">Azure offre un set di livello aziendale soluzioni warehouse dati e archiviazione di dati e attività di copia offre un caricamento esperienza semplice tooconfigure e set di backup di dati altamente ottimizzati.</span><span class="sxs-lookup"><span data-stu-id="712f7-107">Azure provides a set of enterprise-grade data storage and data warehouse solutions, and Copy Activity offers a highly optimized data loading experience that is easy tooconfigure and set up.</span></span> <span data-ttu-id="712f7-108">Con un'unica attività di copia, è possibile ottenere:</span><span class="sxs-lookup"><span data-stu-id="712f7-108">With just a single copy activity, you can achieve:</span></span>

* <span data-ttu-id="712f7-109">Caricamento dei dati in **Azure SQL Data Warehouse** a **1,2 GBps**.</span><span class="sxs-lookup"><span data-stu-id="712f7-109">Loading data into **Azure SQL Data Warehouse** at **1.2 GBps**.</span></span> <span data-ttu-id="712f7-110">Per la procedura dettagliata con un caso d'uso, vedere [Caricare 1 TB di dati in Azure SQL Data Warehouse in meno di 15 minuti con Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span><span class="sxs-lookup"><span data-stu-id="712f7-110">For a walkthrough with a use case, see [Load 1 TB into Azure SQL Data Warehouse under 15 minutes with Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span></span>
* <span data-ttu-id="712f7-111">Caricamento dei dati nell'**Archiviazione BLOB di Azure** a **1 GBps**</span><span class="sxs-lookup"><span data-stu-id="712f7-111">Loading data into **Azure Blob storage** at **1.0 GBps**</span></span>
* <span data-ttu-id="712f7-112">Caricamento dei dati in **Azure Data Lake Store** a **1 GBps**</span><span class="sxs-lookup"><span data-stu-id="712f7-112">Loading data into **Azure Data Lake Store** at **1.0 GBps**</span></span>

<span data-ttu-id="712f7-113">L'articolo illustra:</span><span class="sxs-lookup"><span data-stu-id="712f7-113">This article describes:</span></span>

* <span data-ttu-id="712f7-114">[Numeri di riferimento relativi alle prestazioni](#performance-reference) per supportati i toohelp dati archivi di origine e sink piano al progetto.</span><span class="sxs-lookup"><span data-stu-id="712f7-114">[Performance reference numbers](#performance-reference) for supported source and sink data stores toohelp you plan your project;</span></span>
* <span data-ttu-id="712f7-115">Funzionalità che è possibile migliorare la velocità effettiva copia in diversi scenari, tra cui di hello [cloud unità lo spostamento dei dati](#cloud-data-movement-units), [parallela copia](#parallel-copy), e [staging copia](#staged-copy);</span><span class="sxs-lookup"><span data-stu-id="712f7-115">Features that can boost hello copy throughput in different scenarios, including [cloud data movement units](#cloud-data-movement-units), [parallel copy](#parallel-copy), and [staged Copy](#staged-copy);</span></span>
* <span data-ttu-id="712f7-116">[Indicazioni di ottimizzazione delle prestazioni](#performance-tuning-steps) su come tootune hello hello e prestazioni fattori chiave che possono influire sulla copia delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-116">[Performance tuning guidance](#performance-tuning-steps) on how tootune hello performance and hello key factors that can impact copy performance.</span></span>

> [!NOTE]
> <span data-ttu-id="712f7-117">Se non si ha familiarità con l'attività di copia in generale, vedere [Spostare dati con l'attività di copia](data-factory-data-movement-activities.md) prima di continuare a leggere l'articolo.</span><span class="sxs-lookup"><span data-stu-id="712f7-117">If you are not familiar with Copy Activity in general, see [Move data by using Copy Activity](data-factory-data-movement-activities.md) before reading this article.</span></span>
>

## <a name="performance-reference"></a><span data-ttu-id="712f7-118">Informazioni di riferimento sulle prestazioni</span><span class="sxs-lookup"><span data-stu-id="712f7-118">Performance reference</span></span>

<span data-ttu-id="712f7-119">Come riferimento, sotto la tabella Mostra numero di velocità effettiva copia hello in MBps per hello assegnato in base a test interni coppie di origine e sink.</span><span class="sxs-lookup"><span data-stu-id="712f7-119">As a reference, below table shows hello copy throughput number in MBps for hello given source and sink pairs based on in-house testing.</span></span> <span data-ttu-id="712f7-120">A scopo di confronto, viene illustrato anche in che modo le diverse impostazioni di [unità di spostamento dati cloud](#cloud-data-movement-units) o la [scalabilità di Gateway di gestione dati](data-factory-data-management-gateway-high-availability-scalability.md) (nodi gateway multipli) possono favorire le prestazioni di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-120">For comparison, it also demonstrates how different settings of [cloud data movement units](#cloud-data-movement-units) or [Data Management Gateway scalability](data-factory-data-management-gateway-high-availability-scalability.md) (multiple gateway nodes) can help on copy performance.</span></span>

![Matrice delle prestazioni](./media/data-factory-copy-activity-performance/CopyPerfRef.png)


<span data-ttu-id="712f7-122">**Toonote punti:**</span><span class="sxs-lookup"><span data-stu-id="712f7-122">**Points toonote:**</span></span>
* <span data-ttu-id="712f7-123">Velocità effettiva viene calcolata utilizzando la formula seguente hello: [dimensioni dei dati letti dall'origine] / [Durata esecuzione attività di copia].</span><span class="sxs-lookup"><span data-stu-id="712f7-123">Throughput is calculated by using hello following formula: [size of data read from source]/[Copy Activity run duration].</span></span>
* <span data-ttu-id="712f7-124">numeri di riferimento relativi alle prestazioni Hello nella tabella hello misurati utilizzando [TPC-H](http://www.tpc.org/tpch/) set di dati di esecuzione dell'attività sola copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-124">hello performance reference numbers in hello table were measured using [TPC-H](http://www.tpc.org/tpch/) data set in a single copy activity run.</span></span>
* <span data-ttu-id="712f7-125">In archivi dati di Azure, hello origine e sink presenti hello stessa area di Azure.</span><span class="sxs-lookup"><span data-stu-id="712f7-125">In Azure data stores, hello source and sink are in hello same Azure region.</span></span>
* <span data-ttu-id="712f7-126">Per la copia ibrida tra sedi locali e cloud archivi dati, ogni nodo gateway era in esecuzione in un computer che è stato separato dal hello dati archivio locale con sotto specifica.</span><span class="sxs-lookup"><span data-stu-id="712f7-126">For hybrid copy between on-premises and cloud data stores, each gateway node was running on a machine that was separate from hello on-premises data store with below specification.</span></span> <span data-ttu-id="712f7-127">Durante l'esecuzione di una singola attività nel gateway, l'operazione di copia hello utilizzata solo una piccola parte della CPU, memoria o larghezza di banda di rete del computer di test hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-127">When a single activity was running on gateway, hello copy operation consumed only a small portion of hello test machine's CPU, memory, or network bandwidth.</span></span> <span data-ttu-id="712f7-128">Vedere [Considerazioni su Gateway di gestione dati](#considerations-for-data-management-gateway).</span><span class="sxs-lookup"><span data-stu-id="712f7-128">Learn more from [consideration for Data Management Gateway](#considerations-for-data-management-gateway).</span></span>
    <table>
    <tr>
        <td><span data-ttu-id="712f7-129">CPU</span><span class="sxs-lookup"><span data-stu-id="712f7-129">CPU</span></span></td>
        <td><span data-ttu-id="712f7-130">Intel Xeon E5-2660 v2 da 32 core a 2,20 GHz</span><span class="sxs-lookup"><span data-stu-id="712f7-130">32 cores 2.20 GHz Intel Xeon E5-2660 v2</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="712f7-131">Memoria</span><span class="sxs-lookup"><span data-stu-id="712f7-131">Memory</span></span></td>
        <td><span data-ttu-id="712f7-132">128 GB</span><span class="sxs-lookup"><span data-stu-id="712f7-132">128 GB</span></span></td>
    </tr>
    <tr>
        <td><span data-ttu-id="712f7-133">Rete</span><span class="sxs-lookup"><span data-stu-id="712f7-133">Network</span></span></td>
        <td><span data-ttu-id="712f7-134">Interfaccia Internet: 10 Gbps, interfaccia Intranet: 40 Gbps</span><span class="sxs-lookup"><span data-stu-id="712f7-134">Internet interface: 10 Gbps; intranet interface: 40 Gbps</span></span></td>
    </tr>
    </table>


> [!TIP]
> <span data-ttu-id="712f7-135">È possibile ottenere una velocità effettiva mediante l'utilizzo di più unità di spostamento dei dati (DMUs) di hello predefinito massimo DMUs, ovvero 32 per eseguire un'attività di copia da cloud a cloud.</span><span class="sxs-lookup"><span data-stu-id="712f7-135">You can achieve higher throughput by leveraging more data movement units (DMUs) than hello default maximum DMUs, which is 32 for a cloud-to-cloud copy activity run.</span></span> <span data-ttu-id="712f7-136">Ad esempio, con 100 unità di spostamento dati è possibile copiare i dati dal BLOB di Azure in Azure Data Lake Store a **1,0 GB al secondo**.</span><span class="sxs-lookup"><span data-stu-id="712f7-136">For example, with 100 DMUs, you can achieve copying data from Azure Blob into Azure Data Lake Store at **1.0GBps**.</span></span> <span data-ttu-id="712f7-137">Vedere hello [unità lo spostamento dei dati Cloud](#cloud-data-movement-units) sezione per informazioni dettagliate su questa funzionalità e hello scenario è supportato.</span><span class="sxs-lookup"><span data-stu-id="712f7-137">See hello [Cloud data movement units](#cloud-data-movement-units) section for details about this feature and hello supported scenario.</span></span> <span data-ttu-id="712f7-138">Contatto [supporto tecnico di Azure](https://azure.microsoft.com/support/) toorequest DMUs altre.</span><span class="sxs-lookup"><span data-stu-id="712f7-138">Contact [Azure support](https://azure.microsoft.com/support/) toorequest more DMUs.</span></span>

## <a name="parallel-copy"></a><span data-ttu-id="712f7-139">Copia parallela</span><span class="sxs-lookup"><span data-stu-id="712f7-139">Parallel copy</span></span>
<span data-ttu-id="712f7-140">È possibile leggere dati da hello di origine o destinazione toohello dati scrivere **in parallelo all'interno di un'attività di copia eseguire**.</span><span class="sxs-lookup"><span data-stu-id="712f7-140">You can read data from hello source or write data toohello destination **in parallel within a Copy Activity run**.</span></span> <span data-ttu-id="712f7-141">Questa funzionalità migliora la velocità effettiva di hello di un'operazione di copia e riduce hello tempo toomove dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-141">This feature enhances hello throughput of a copy operation and reduces hello time it takes toomove data.</span></span>

<span data-ttu-id="712f7-142">Questa impostazione è diversa da hello **concorrenza** proprietà nella definizione di attività hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-142">This setting is different from hello **concurrency** property in hello activity definition.</span></span> <span data-ttu-id="712f7-143">Hello **concorrenza** proprietà determina il numero di hello di **esegue attività di copia simultanea** tooprocess dati da windows attività differenti (1 too2 AM AM, STO too3 AM 2, 3 AM too4 e così via).</span><span class="sxs-lookup"><span data-stu-id="712f7-143">hello **concurrency** property determines hello number of **concurrent Copy Activity runs** tooprocess data from different activity windows (1 AM too2 AM, 2 AM too3 AM, 3 AM too4 AM, and so on).</span></span> <span data-ttu-id="712f7-144">Questa funzionalità è utile quando si esegue un caricamento cronologico.</span><span class="sxs-lookup"><span data-stu-id="712f7-144">This capability is helpful when you perform a historical load.</span></span> <span data-ttu-id="712f7-145">funzionalità di copia parallela Hello applica tooa **singola esecuzione dell'attività**.</span><span class="sxs-lookup"><span data-stu-id="712f7-145">hello parallel copy capability applies tooa **single activity run**.</span></span>

<span data-ttu-id="712f7-146">Verrà ora esaminato uno scenario di esempio.</span><span class="sxs-lookup"><span data-stu-id="712f7-146">Let's look at a sample scenario.</span></span> <span data-ttu-id="712f7-147">Nell'esempio seguente di hello, più sezioni da hello ultimi necessitano toobe elaborati.</span><span class="sxs-lookup"><span data-stu-id="712f7-147">In hello following example, multiple slices from hello past need toobe processed.</span></span> <span data-ttu-id="712f7-148">Data Factory esegue un'istanza dell'attività di copia, ovvero un'esecuzione attività, per ogni sezione:</span><span class="sxs-lookup"><span data-stu-id="712f7-148">Data Factory runs an instance of Copy Activity (an activity run) for each slice:</span></span>

* <span data-ttu-id="712f7-149">sezione di dati Hello dal primo periodo di attività hello (1 too2 AM AM) = = > esecuzione di attività 1</span><span class="sxs-lookup"><span data-stu-id="712f7-149">hello data slice from hello first activity window (1 AM too2 AM) ==> Activity run 1</span></span>
* <span data-ttu-id="712f7-150">sezione di dati Hello dalla seconda finestra dell'attività hello (2 AM too3 AM) = = > eseguire l'attività 2</span><span class="sxs-lookup"><span data-stu-id="712f7-150">hello data slice from hello second activity window (2 AM too3 AM) ==> Activity run 2</span></span>
* <span data-ttu-id="712f7-151">sezione di dati Hello dalla seconda finestra dell'attività hello (3 AM too4 AM) = = > esecuzione di attività 3</span><span class="sxs-lookup"><span data-stu-id="712f7-151">hello data slice from hello second activity window (3 AM too4 AM) ==> Activity run 3</span></span>

<span data-ttu-id="712f7-152">e così via.</span><span class="sxs-lookup"><span data-stu-id="712f7-152">And so on.</span></span>

<span data-ttu-id="712f7-153">In questo esempio, quando hello **concorrenza** too2, viene impostato **attività eseguita 1** e **attività eseguita 2** copiare i dati da due finestre attività **contemporaneamente**  tooimprove prestazioni lo spostamento dei dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-153">In this example, when hello **concurrency** value is set too2, **Activity run 1** and **Activity run 2** copy data from two activity windows **concurrently** tooimprove data movement performance.</span></span> <span data-ttu-id="712f7-154">Tuttavia, se più file sono associati con 1 di esecuzione dell'attività, il servizio di spostamento dati hello copia file da hello origine toohello destinazione un file alla volta.</span><span class="sxs-lookup"><span data-stu-id="712f7-154">However, if multiple files are associated with Activity run 1, hello data movement service copies files from hello source toohello destination one file at a time.</span></span>

### <a name="cloud-data-movement-units"></a><span data-ttu-id="712f7-155">Unità di spostamento dati cloud</span><span class="sxs-lookup"><span data-stu-id="712f7-155">Cloud data movement units</span></span>
<span data-ttu-id="712f7-156">Oggetto **unità lo spostamento dei dati di cloud (DMU)** è una misura che rappresenta la potenza hello (una combinazione di CPU, memoria e di allocazione delle risorse di rete) di una singola unità nella Data Factory.</span><span class="sxs-lookup"><span data-stu-id="712f7-156">A **cloud data movement unit (DMU)** is a measure that represents hello power (a combination of CPU, memory, and network resource allocation) of a single unit in Data Factory.</span></span> <span data-ttu-id="712f7-157">Una unità di spostamento dati può essere usata in un'operazione di copia da cloud a cloud, ma non in una copia ibrida.</span><span class="sxs-lookup"><span data-stu-id="712f7-157">A DMU might be used in a cloud-to-cloud copy operation, but not in a hybrid copy.</span></span>

<span data-ttu-id="712f7-158">Per impostazione predefinita, Data Factory viene utilizzata una tooperform DMU singolo cloud eseguire una singola attività di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-158">By default, Data Factory uses a single cloud DMU tooperform a single Copy Activity run.</span></span> <span data-ttu-id="712f7-159">toooverride questa impostazione predefinita, specificare un valore per hello **cloudDataMovementUnits** proprietà come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="712f7-159">toooverride this default, specify a value for hello **cloudDataMovementUnits** property as follows.</span></span> <span data-ttu-id="712f7-160">Per informazioni sul livello di hello miglioramento delle prestazioni è possibile che venga visualizzato quando si configurano più unità per una copia specifica origine e il sink, vedere hello [di riferimento delle prestazioni](#performance-reference).</span><span class="sxs-lookup"><span data-stu-id="712f7-160">For information about hello level of performance gain you might get when you configure more units for a specific copy source and sink, see hello [performance reference](#performance-reference).</span></span>

```json
"activities":[  
    {
        "name": "Sample copy activity",
        "description": "",
        "type": "Copy",
        "inputs": [{ "name": "InputDataset" }],
        "outputs": [{ "name": "OutputDataset" }],
        "typeProperties": {
            "source": {
                "type": "BlobSource",
            },
            "sink": {
                "type": "AzureDataLakeStoreSink"
            },
            "cloudDataMovementUnits": 32
        }
    }
]
```
<span data-ttu-id="712f7-161">Hello **i valori consentiti** per hello **cloudDataMovementUnits** proprietà sono 1 (impostazione predefinita), 2, 4, 8, 16, 32.</span><span class="sxs-lookup"><span data-stu-id="712f7-161">hello **allowed values** for hello **cloudDataMovementUnits** property are 1 (default), 2, 4, 8, 16, 32.</span></span> <span data-ttu-id="712f7-162">Hello **numero effettivo di cloud DMUs** che l'operazione di copia hello viene utilizzato in fase di esecuzione è uguale tooor minore hello configurato, a seconda del modello di dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-162">hello **actual number of cloud DMUs** that hello copy operation uses at run time is equal tooor less than hello configured value, depending on your data pattern.</span></span>

> [!NOTE]
> <span data-ttu-id="712f7-163">Se sono necessarie più unità di spostamento dati cloud per aumentare la velocità effettiva, contattare il [supporto di Azure](https://azure.microsoft.com/support/).</span><span class="sxs-lookup"><span data-stu-id="712f7-163">If you need more cloud DMUs for a higher throughput, contact [Azure support](https://azure.microsoft.com/support/).</span></span> <span data-ttu-id="712f7-164">L'impostazione di 8 e versioni successive attualmente funziona solo quando si **copiare più file da Blob archivio Data Lake/archiviazione/Amazon S3/cloud FTP/cloud SFTP tooBlob storage/archivio Data Lake/Azure SQL Database**.</span><span class="sxs-lookup"><span data-stu-id="712f7-164">Setting of 8 and above currently works only when you **copy multiple files from Blob storage/Data Lake Store/Amazon S3/cloud FTP/cloud SFTP tooBlob storage/Data Lake Store/Azure SQL Database**.</span></span>
>

### <a name="parallelcopies"></a><span data-ttu-id="712f7-165">parallelCopies</span><span class="sxs-lookup"><span data-stu-id="712f7-165">parallelCopies</span></span>
<span data-ttu-id="712f7-166">È possibile utilizzare hello **parallelCopies** parallelismo hello tooindicate di proprietà che si desidera toouse attività di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-166">You can use hello **parallelCopies** property tooindicate hello parallelism that you want Copy Activity toouse.</span></span> <span data-ttu-id="712f7-167">È possibile pensare di questa proprietà come numero massimo di hello di thread all'interno delle attività di copia di lettura dall'origine o la scrittura tooyour sink gli archivi dati in parallelo.</span><span class="sxs-lookup"><span data-stu-id="712f7-167">You can think of this property as hello maximum number of threads within Copy Activity that can read from your source or write tooyour sink data stores in parallel.</span></span>

<span data-ttu-id="712f7-168">Per eseguire ogni attività di copia, Data Factory determina il numero di hello di parallelo copie toouse toocopy dati dall'archivio dati di origine hello e toohello archivio dati di destinazione.</span><span class="sxs-lookup"><span data-stu-id="712f7-168">For each Copy Activity run, Data Factory determines hello number of parallel copies toouse toocopy data from hello source data store and toohello destination data store.</span></span> <span data-ttu-id="712f7-169">numero di copie parallele che utilizza predefinito Hello dipende dal tipo di hello di origine e sink in uso.</span><span class="sxs-lookup"><span data-stu-id="712f7-169">hello default number of parallel copies that it uses depends on hello type of source and sink that you are using.</span></span>  

| <span data-ttu-id="712f7-170">Origine e sink</span><span class="sxs-lookup"><span data-stu-id="712f7-170">Source and sink</span></span> | <span data-ttu-id="712f7-171">Numero predefinito di copie parallele determinato dal servizio</span><span class="sxs-lookup"><span data-stu-id="712f7-171">Default parallel copy count determined by service</span></span> |
| --- | --- |
| <span data-ttu-id="712f7-172">Copia di dati tra archivi basati su file, come archiviazione BLOB, Data Lake Store, Amazon S3, un file system locale, un HDFS locale</span><span class="sxs-lookup"><span data-stu-id="712f7-172">Copy data between file-based stores (Blob storage; Data Lake Store; Amazon S3; an on-premises file system; an on-premises HDFS)</span></span> |<span data-ttu-id="712f7-173">Tra 1 e 32.</span><span class="sxs-lookup"><span data-stu-id="712f7-173">Between 1 and 32.</span></span> <span data-ttu-id="712f7-174">Dipende dalla dimensione hello del file hello e numero di hello cloud lo spostamento delle unità di dati (DMUs) toocopy utilizzati dati tra due archivi di dati di cloud o configurazione fisica di hello di hello computer Gateway utilizzato per una copia ibrida (tooor di toocopy dati da un archivio dati locale ).</span><span class="sxs-lookup"><span data-stu-id="712f7-174">Depends on hello size of hello files and hello number of cloud data movement units (DMUs) used toocopy data between two cloud data stores, or hello physical configuration of hello Gateway machine used for a hybrid copy (toocopy data tooor from an on-premises data store).</span></span> |
| <span data-ttu-id="712f7-175">Copia i dati da **archiviazione tabelle tooAzure di archiviare i dati di origine**</span><span class="sxs-lookup"><span data-stu-id="712f7-175">Copy data from **any source data store tooAzure Table storage**</span></span> |<span data-ttu-id="712f7-176">4</span><span class="sxs-lookup"><span data-stu-id="712f7-176">4</span></span> |
| <span data-ttu-id="712f7-177">Tutte le altre coppie di origine e sink</span><span class="sxs-lookup"><span data-stu-id="712f7-177">All other source and sink pairs</span></span> |<span data-ttu-id="712f7-178">1</span><span class="sxs-lookup"><span data-stu-id="712f7-178">1</span></span> |

<span data-ttu-id="712f7-179">In genere, il comportamento predefinito di hello dovrebbe offrire la migliore velocità effettiva di hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-179">Usually, hello default behavior should give you hello best throughput.</span></span> <span data-ttu-id="712f7-180">Tuttavia, hello toocontrol carico nei computer che ospitano l'archivi dati o le prestazioni della copia tootune, è possibile scegliere di valore predefinito di toooverride hello e specificare un valore per hello **parallelCopies** proprietà.</span><span class="sxs-lookup"><span data-stu-id="712f7-180">However, toocontrol hello load on machines that host your data stores, or tootune copy performance, you may choose toooverride hello default value and specify a value for hello **parallelCopies** property.</span></span> <span data-ttu-id="712f7-181">il valore di Hello deve essere compreso tra 1 e 32 (inclusi).</span><span class="sxs-lookup"><span data-stu-id="712f7-181">hello value must be between 1 and 32 (both inclusive).</span></span> <span data-ttu-id="712f7-182">In fase di esecuzione per prestazioni ottimali hello, attività di copia viene utilizzato un valore che è minore o uguale toohello valore impostato.</span><span class="sxs-lookup"><span data-stu-id="712f7-182">At run time, for hello best performance, Copy Activity uses a value that is less than or equal toohello value that you set.</span></span>

```json
"activities":[  
    {
        "name": "Sample copy activity",
        "description": "",
        "type": "Copy",
        "inputs": [{ "name": "InputDataset" }],
        "outputs": [{ "name": "OutputDataset" }],
        "typeProperties": {
            "source": {
                "type": "BlobSource",
            },
            "sink": {
                "type": "AzureDataLakeStoreSink"
            },
            "parallelCopies": 8
        }
    }
]
```
<span data-ttu-id="712f7-183">Toonote punti:</span><span class="sxs-lookup"><span data-stu-id="712f7-183">Points toonote:</span></span>

* <span data-ttu-id="712f7-184">Quando si copiano dati tra archivi basati su file, hello **parallelCopies** determinare parallelismo hello a livello di file hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-184">When you copy data between file-based stores, hello **parallelCopies** determine hello parallelism at hello file level.</span></span> <span data-ttu-id="712f7-185">suddivisione in blocchi Hello all'interno di un singolo file accadrebbe sotto automatico e trasparente ed è concepita toouse hello migliore Adatta dimensioni del blocco per un archivio dati di origine specificata di tipo tooload in parallelo e ortogonali tooparallelCopies.</span><span class="sxs-lookup"><span data-stu-id="712f7-185">hello chunking within a single file would happen underneath automatically and transparently, and it's designed toouse hello best suitable chunk size for a given source data store type tooload data in parallel and orthogonal tooparallelCopies.</span></span> <span data-ttu-id="712f7-186">numero effettivo di Hello copie parallelo è non più di numero hello file hello dati lo spostamento del servizio Usa per operazione di copia hello in fase di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="712f7-186">hello actual number of parallel copies hello data movement service uses for hello copy operation at run time is no more than hello number of files you have.</span></span> <span data-ttu-id="712f7-187">Se il comportamento di copia hello è **mergeFile**, attività di copia non è possibile trarre vantaggio dal parallelismo a livello di file.</span><span class="sxs-lookup"><span data-stu-id="712f7-187">If hello copy behavior is **mergeFile**, Copy Activity cannot take advantage of file-level parallelism.</span></span>
* <span data-ttu-id="712f7-188">Quando si specifica un valore per hello **parallelCopies** proprietà, considerare l'aumento del carico hello sul archivi di dati di origine e sink e toogateway se è una copia ibrida.</span><span class="sxs-lookup"><span data-stu-id="712f7-188">When you specify a value for hello **parallelCopies** property, consider hello load increase on your source and sink data stores, and toogateway if it is a hybrid copy.</span></span> <span data-ttu-id="712f7-189">Questo errore si verifica soprattutto quando si dispone di più attività o esecuzioni simultanee di hello stesse attività eseguite su hello allo stesso archivio dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-189">This happens especially when you have multiple activities or concurrent runs of hello same activities that run against hello same data store.</span></span> <span data-ttu-id="712f7-190">Se si nota che l'archivio dati hello o Gateway viene sovraccaricato con carico hello, ridurre hello **parallelCopies** carico hello toorelieve di valore.</span><span class="sxs-lookup"><span data-stu-id="712f7-190">If you notice that either hello data store or Gateway is overwhelmed with hello load, decrease hello **parallelCopies** value toorelieve hello load.</span></span>
* <span data-ttu-id="712f7-191">Quando si copiano dati da archivi che non sono toostores basata su file che sono basate su file, il servizio di spostamento dati hello Ignora hello **parallelCopies** proprietà.</span><span class="sxs-lookup"><span data-stu-id="712f7-191">When you copy data from stores that are not file-based toostores that are file-based, hello data movement service ignores hello **parallelCopies** property.</span></span> <span data-ttu-id="712f7-192">Anche se viene specificato, in questo caso il parallelismo non viene applicato.</span><span class="sxs-lookup"><span data-stu-id="712f7-192">Even if parallelism is specified, it's not applied in this case.</span></span>

> [!NOTE]
> <span data-ttu-id="712f7-193">È necessario utilizzare hello toouse 1.11 o versione successiva versione di Gateway di gestione dati **parallelCopies** funzionalità quando si esegue una copia ibrida.</span><span class="sxs-lookup"><span data-stu-id="712f7-193">You must use Data Management Gateway version 1.11 or later toouse hello **parallelCopies** feature when you do a hybrid copy.</span></span>
>
>

<span data-ttu-id="712f7-194">toobetter utilizzare queste due proprietà e tooenhance la velocità effettiva lo spostamento dei dati, vedere hello [casi di utilizzo di esempio](#case-study-use-parallel-copy).</span><span class="sxs-lookup"><span data-stu-id="712f7-194">toobetter use these two properties, and tooenhance your data movement throughput, see hello [sample use cases](#case-study-use-parallel-copy).</span></span> <span data-ttu-id="712f7-195">Non è necessario tooconfigure **parallelCopies** tootake vantaggio del comportamento predefinito di hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-195">You don't need tooconfigure **parallelCopies** tootake advantage of hello default behavior.</span></span> <span data-ttu-id="712f7-196">Se si esegue la configurazione e il valore di **parallelCopies** è troppo basso, è possibile che più unità di spostamento dati cloud non vengano utilizzate appieno.</span><span class="sxs-lookup"><span data-stu-id="712f7-196">If you do configure and **parallelCopies** is too small, multiple cloud DMUs might not be fully utilized.</span></span>  

### <a name="billing-impact"></a><span data-ttu-id="712f7-197">Impatto della fatturazione</span><span class="sxs-lookup"><span data-stu-id="712f7-197">Billing impact</span></span>
<span data-ttu-id="712f7-198">Ha **importante** tooremember che vengono addebitati in base al tempo totale di hello dell'operazione di copia hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-198">It's **important** tooremember that you are charged based on hello total time of hello copy operation.</span></span> <span data-ttu-id="712f7-199">Se un processo di copia utilizzato tootake un'ora con l'unità di un cloud e ha ora 15 minuti con quattro unità cloud, hello generale rimane costi quasi hello stesso.</span><span class="sxs-lookup"><span data-stu-id="712f7-199">If a copy job used tootake one hour with one cloud unit and now it takes 15 minutes with four cloud units, hello overall bill remains almost hello same.</span></span> <span data-ttu-id="712f7-200">Si prenda ad esempio un utilizzo di quattro unità cloud.</span><span class="sxs-lookup"><span data-stu-id="712f7-200">For example, you use four cloud units.</span></span> <span data-ttu-id="712f7-201">la prima unità cloud di Hello impiega 10 minuti, hello terzo, 5 minuti, hello secondo, 10 minuti e hello quarto, 5 minuti, in esecuzione un'attività di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-201">hello first cloud unit spends 10 minutes, hello second one, 10 minutes, hello third one, 5 minutes, and hello fourth one, 5 minutes, all in one Copy Activity run.</span></span> <span data-ttu-id="712f7-202">Viene addebitato per volta (lo spostamento dei dati) di hello copia totale, ovvero 10 + 10 + 5 + 5 = 30 minuti.</span><span class="sxs-lookup"><span data-stu-id="712f7-202">You are charged for hello total copy (data movement) time, which is 10 + 10 + 5 + 5 = 30 minutes.</span></span> <span data-ttu-id="712f7-203">L'uso di **parallelCopies** non influisce sulla fatturazione.</span><span class="sxs-lookup"><span data-stu-id="712f7-203">Using **parallelCopies** does not affect billing.</span></span>

## <a name="staged-copy"></a><span data-ttu-id="712f7-204">copia di staging</span><span class="sxs-lookup"><span data-stu-id="712f7-204">Staged copy</span></span>
<span data-ttu-id="712f7-205">Quando si copiano dati da un archivio dati di origine dati archivio tooa sink, è possibile scegliere l'archiviazione Blob toouse come archivio di gestione temporanea provvisorio.</span><span class="sxs-lookup"><span data-stu-id="712f7-205">When you copy data from a source data store tooa sink data store, you might choose toouse Blob storage as an interim staging store.</span></span> <span data-ttu-id="712f7-206">Gestione temporanea è particolarmente utile nei seguenti casi hello:</span><span class="sxs-lookup"><span data-stu-id="712f7-206">Staging is especially useful in hello following cases:</span></span>

1. <span data-ttu-id="712f7-207">**Si desidera tooingest dati da diversi archivi dati in SQL Data Warehouse tramite PolyBase**.</span><span class="sxs-lookup"><span data-stu-id="712f7-207">**You want tooingest data from various data stores into SQL Data Warehouse via PolyBase**.</span></span> <span data-ttu-id="712f7-208">SQL Data Warehouse utilizza PolyBase come tooload un meccanismo di velocità effettiva elevata una grande quantità di dati in SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="712f7-208">SQL Data Warehouse uses PolyBase as a high-throughput mechanism tooload a large amount of data into SQL Data Warehouse.</span></span> <span data-ttu-id="712f7-209">Tuttavia, i dati di origine hello devono essere nell'archiviazione Blob e deve soddisfare i criteri aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="712f7-209">However, hello source data must be in Blob storage, and it must meet additional criteria.</span></span> <span data-ttu-id="712f7-210">Quando si caricano dati da un archivio dati non BLOB, è possibile attivare la copia di dati tramite un archivio BLOB di staging provvisorio.</span><span class="sxs-lookup"><span data-stu-id="712f7-210">When you load data from a data store other than Blob storage, you can activate data copying via interim staging Blob storage.</span></span> <span data-ttu-id="712f7-211">In tal caso, Data Factory esegue hello necessario tooensure di trasformazioni di dati che soddisfi i requisiti di hello di PolyBase.</span><span class="sxs-lookup"><span data-stu-id="712f7-211">In that case, Data Factory performs hello required data transformations tooensure that it meets hello requirements of PolyBase.</span></span> <span data-ttu-id="712f7-212">Quindi, Usa dati tooload PolyBase in SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="712f7-212">Then it uses PolyBase tooload data into SQL Data Warehouse.</span></span> <span data-ttu-id="712f7-213">Per ulteriori informazioni, vedere [dati tooload usare PolyBase in Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse).</span><span class="sxs-lookup"><span data-stu-id="712f7-213">For more details, see [Use PolyBase tooload data into Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse).</span></span> <span data-ttu-id="712f7-214">Per la procedura dettagliata con un caso d'uso, vedere [Caricare 1 TB di dati in Azure SQL Data Warehouse in meno di 15 minuti con Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span><span class="sxs-lookup"><span data-stu-id="712f7-214">For a walkthrough with a use case, see [Load 1 TB into Azure SQL Data Warehouse under 15 minutes with Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span></span>
2. <span data-ttu-id="712f7-215">**In alcuni casi occorre un po' di tempo tooperform lo spostamento di dati un ibrido (vale a dire toocopy tra un archivio dati locale e un archivio dati cloud) su una connessione di rete lenta**.</span><span class="sxs-lookup"><span data-stu-id="712f7-215">**Sometimes it takes a while tooperform a hybrid data movement (that is, toocopy between an on-premises data store and a cloud data store) over a slow network connection**.</span></span> <span data-ttu-id="712f7-216">tooimprove prestazioni, è possibile comprimere i dati in locale in modo che richiede meno tempo archiviano dati di gestione temporanea toohello toomove dati nel cloud hello hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-216">tooimprove performance, you can compress hello data on-premises so that it takes less time toomove data toohello staging data store in hello cloud.</span></span> <span data-ttu-id="712f7-217">È quindi possibile decomprimere i dati di hello nell'archivio di gestione temporanea prima di caricarli nell'archivio dati di destinazione hello hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-217">Then you can decompress hello data in hello staging store before you load it into hello destination data store.</span></span>
3. <span data-ttu-id="712f7-218">**Non si desidera tooopen porte diverso da porta 80 e la porta 443 nel firewall, a causa dei criteri IT aziendali**.</span><span class="sxs-lookup"><span data-stu-id="712f7-218">**You don't want tooopen ports other than port 80 and port 443 in your firewall, because of corporate IT policies**.</span></span> <span data-ttu-id="712f7-219">Ad esempio, quando si copiano dati da un sink di Database SQL di Azure locale dati archivio tooan o un sink di Azure SQL Data Warehouse, è necessario tooactivate le comunicazioni TCP in uscita sulla porta 1433 per hello Windows firewall e del firewall aziendale.</span><span class="sxs-lookup"><span data-stu-id="712f7-219">For example, when you copy data from an on-premises data store tooan Azure SQL Database sink or an Azure SQL Data Warehouse sink, you need tooactivate outbound TCP communication on port 1433 for both hello Windows firewall and your corporate firewall.</span></span> <span data-ttu-id="712f7-220">In questo scenario, sfruttare i vantaggi hello gateway toofirst copia tooa Blob archiviazione gestione temporanea dell'istanza di dati tramite HTTP o HTTPS sulla porta 443.</span><span class="sxs-lookup"><span data-stu-id="712f7-220">In this scenario, take advantage of hello gateway toofirst copy data tooa Blob storage staging instance over HTTP or HTTPS on port 443.</span></span> <span data-ttu-id="712f7-221">Quindi, è possibile caricare i dati di hello in Database SQL o SQL Data Warehouse di gestione temporanea di archiviazione Blob.</span><span class="sxs-lookup"><span data-stu-id="712f7-221">Then, load hello data into SQL Database or SQL Data Warehouse from Blob storage staging.</span></span> <span data-ttu-id="712f7-222">In questo flusso non è necessario tooenable porta 1433.</span><span class="sxs-lookup"><span data-stu-id="712f7-222">In this flow, you don't need tooenable port 1433.</span></span>

### <a name="how-staged-copy-works"></a><span data-ttu-id="712f7-223">Come funziona la copia di staging</span><span class="sxs-lookup"><span data-stu-id="712f7-223">How staged copy works</span></span>
<span data-ttu-id="712f7-224">Quando si attiva hello funzionalità di gestione temporanea, i primi dati hello viene copiati dal hello origine dati archivio toohello archivio dati di gestione temporanea (modalità).</span><span class="sxs-lookup"><span data-stu-id="712f7-224">When you activate hello staging feature, first hello data is copied from hello source data store toohello staging data store (bring your own).</span></span> <span data-ttu-id="712f7-225">Successivamente, i dati di hello vengono copiati dal hello dati archivio toohello sink dati archivio di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="712f7-225">Next, hello data is copied from hello staging data store toohello sink data store.</span></span> <span data-ttu-id="712f7-226">Data Factory gestisce automaticamente il flusso di hello in due fasi per l'utente.</span><span class="sxs-lookup"><span data-stu-id="712f7-226">Data Factory automatically manages hello two-stage flow for you.</span></span> <span data-ttu-id="712f7-227">Data Factory elimina anche i dati temporanei da gestione temporanea di archiviazione dopo aver completato lo spostamento dei dati di hello hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-227">Data Factory also cleans up temporary data from hello staging storage after hello data movement is complete.</span></span>

<span data-ttu-id="712f7-228">In caso di copia hello cloud (dati di origine e sink archivi sono nel cloud hello), non viene usato gateway.</span><span class="sxs-lookup"><span data-stu-id="712f7-228">In hello cloud copy scenario (both source and sink data stores are in hello cloud), gateway is not used.</span></span> <span data-ttu-id="712f7-229">servizio Data Factory Hello esegue operazioni di copia hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-229">hello Data Factory service performs hello copy operations.</span></span>

![Copia di staging: scenario cloud](media/data-factory-copy-activity-performance/staged-copy-cloud-scenario.png)

<span data-ttu-id="712f7-231">In caso di copia ibrida hello (origine si trova in locale e il sink è nel cloud hello), gateway hello sposta dati dai dati di origine hello archiviano tooa archivio dati di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="712f7-231">In hello hybrid copy scenario (source is on-premises and sink is in hello cloud), hello gateway moves data from hello source data store tooa staging data store.</span></span> <span data-ttu-id="712f7-232">Servizio Data Factory consente di spostare dati da dati di gestione temporanea hello toohello archiviano dati sink.</span><span class="sxs-lookup"><span data-stu-id="712f7-232">Data Factory service moves data from hello staging data store toohello sink data store.</span></span> <span data-ttu-id="712f7-233">Copia di dati da un tooan di archivio dati cloud locali archivio dati tramite gestione temporanea è supportato anche con flusso hello invertita.</span><span class="sxs-lookup"><span data-stu-id="712f7-233">Copying data from a cloud data store tooan on-premises data store via staging also is supported with hello reversed flow.</span></span>

![Copia di staging: scenario ibrido](media/data-factory-copy-activity-performance/staged-copy-hybrid-scenario.png)

<span data-ttu-id="712f7-235">Quando si attiva lo spostamento dei dati tramite un archivio di gestione temporanea, è possibile specificare se si desidera toobe dati hello compressi prima di passare dati dall'origine hello dati archiviano tooan provvisorio o archivio dati di gestione temporanea e quindi decompressi prima di spostare dati da un provvisorio o dati di gestione temporanea archiviano toohello sink dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-235">When you activate data movement by using a staging store, you can specify whether you want hello data toobe compressed before moving data from hello source data store tooan interim or staging data store, and then decompressed before moving data from an interim or staging data store toohello sink data store.</span></span>

<span data-ttu-id="712f7-236">Attualmente non è possibile copiare dati tra due archivi dati locali usando un archivio di staging.</span><span class="sxs-lookup"><span data-stu-id="712f7-236">Currently, you can't copy data between two on-premises data stores by using a staging store.</span></span> <span data-ttu-id="712f7-237">È probabile che non appena questo toobe opzione disponibile.</span><span class="sxs-lookup"><span data-stu-id="712f7-237">We expect this option toobe available soon.</span></span>

### <a name="configuration"></a><span data-ttu-id="712f7-238">Configurazione</span><span class="sxs-lookup"><span data-stu-id="712f7-238">Configuration</span></span>
<span data-ttu-id="712f7-239">Configurare hello **enableStaging** impostazione nell'attività di copia toospecify se si desidera toobe dati hello gestione temporanea nell'archiviazione Blob prima di caricarli in un archivio dati di destinazione.</span><span class="sxs-lookup"><span data-stu-id="712f7-239">Configure hello **enableStaging** setting in Copy Activity toospecify whether you want hello data toobe staged in Blob storage before you load it into a destination data store.</span></span> <span data-ttu-id="712f7-240">Quando si imposta **enableStaging** tooTRUE, specificare hello proprietà aggiuntive elencate nella tabella riportata di seguito hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-240">When you set **enableStaging** tooTRUE, specify hello additional properties listed in hello next table.</span></span> <span data-ttu-id="712f7-241">Se non si dispone di uno, è necessario anche toocreate una risorsa di archiviazione di Azure o l'archiviazione condivisa servizio collegato alla firma di accesso per la gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="712f7-241">If you don’t have one, you also need toocreate an Azure Storage or Storage shared access signature-linked service for staging.</span></span>

| <span data-ttu-id="712f7-242">Proprietà</span><span class="sxs-lookup"><span data-stu-id="712f7-242">Property</span></span> | <span data-ttu-id="712f7-243">Descrizione</span><span class="sxs-lookup"><span data-stu-id="712f7-243">Description</span></span> | <span data-ttu-id="712f7-244">Valore predefinito</span><span class="sxs-lookup"><span data-stu-id="712f7-244">Default value</span></span> | <span data-ttu-id="712f7-245">Obbligatorio</span><span class="sxs-lookup"><span data-stu-id="712f7-245">Required</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="712f7-246">**enableStaging**</span><span class="sxs-lookup"><span data-stu-id="712f7-246">**enableStaging**</span></span> |<span data-ttu-id="712f7-247">Specificare se si desidera toocopy dati tramite un provvisorio archivio di gestione temporanea.</span><span class="sxs-lookup"><span data-stu-id="712f7-247">Specify whether you want toocopy data via an interim staging store.</span></span> |<span data-ttu-id="712f7-248">False</span><span class="sxs-lookup"><span data-stu-id="712f7-248">False</span></span> |<span data-ttu-id="712f7-249">No</span><span class="sxs-lookup"><span data-stu-id="712f7-249">No</span></span> |
| <span data-ttu-id="712f7-250">**linkedServiceName**</span><span class="sxs-lookup"><span data-stu-id="712f7-250">**linkedServiceName**</span></span> |<span data-ttu-id="712f7-251">Specificare il nome di hello di un [AzureStorage](data-factory-azure-blob-connector.md#azure-storage-linked-service) o [AzureStorageSas](data-factory-azure-blob-connector.md#azure-storage-sas-linked-service) servizio, che fa riferimento istanza toohello di spazio di archiviazione utilizzato come archivio di gestione temporanea provvisorio collegato.</span><span class="sxs-lookup"><span data-stu-id="712f7-251">Specify hello name of an [AzureStorage](data-factory-azure-blob-connector.md#azure-storage-linked-service) or [AzureStorageSas](data-factory-azure-blob-connector.md#azure-storage-sas-linked-service) linked service, which refers toohello instance of Storage that you use as an interim staging store.</span></span> <br/><br/> <span data-ttu-id="712f7-252">È possibile utilizzare l'archiviazione dati tooload una firma di accesso condiviso in SQL Data Warehouse tramite PolyBase.</span><span class="sxs-lookup"><span data-stu-id="712f7-252">You cannot use Storage with a shared access signature tooload data into SQL Data Warehouse via PolyBase.</span></span> <span data-ttu-id="712f7-253">Può essere usata in tutti gli altri scenari.</span><span class="sxs-lookup"><span data-stu-id="712f7-253">You can use it in all other scenarios.</span></span> |<span data-ttu-id="712f7-254">N/D</span><span class="sxs-lookup"><span data-stu-id="712f7-254">N/A</span></span> |<span data-ttu-id="712f7-255">Sì, quando **enableStaging** è impostato tooTRUE</span><span class="sxs-lookup"><span data-stu-id="712f7-255">Yes, when **enableStaging** is set tooTRUE</span></span> |
| <span data-ttu-id="712f7-256">**path**</span><span class="sxs-lookup"><span data-stu-id="712f7-256">**path**</span></span> |<span data-ttu-id="712f7-257">Specificare percorso di archiviazione Blob hello di visualizzare i dati di gestione temporanea hello toocontain.</span><span class="sxs-lookup"><span data-stu-id="712f7-257">Specify hello Blob storage path that you want toocontain hello staged data.</span></span> <span data-ttu-id="712f7-258">Se non si specifica un percorso, il servizio di hello crea un contenitore toostore temporanea di dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-258">If you do not provide a path, hello service creates a container toostore temporary data.</span></span> <br/><br/> <span data-ttu-id="712f7-259">Specificare un percorso solo se si utilizza l'archiviazione con una firma di accesso condiviso, o si richiede dati temporanei toobe in una posizione specifica.</span><span class="sxs-lookup"><span data-stu-id="712f7-259">Specify a path only if you use Storage with a shared access signature, or you require temporary data toobe in a specific location.</span></span> |<span data-ttu-id="712f7-260">N/D</span><span class="sxs-lookup"><span data-stu-id="712f7-260">N/A</span></span> |<span data-ttu-id="712f7-261">No</span><span class="sxs-lookup"><span data-stu-id="712f7-261">No</span></span> |
| <span data-ttu-id="712f7-262">**enableCompression**</span><span class="sxs-lookup"><span data-stu-id="712f7-262">**enableCompression**</span></span> |<span data-ttu-id="712f7-263">Specifica se è necessario comprimere i dati prima che venga copiato toohello destinazione.</span><span class="sxs-lookup"><span data-stu-id="712f7-263">Specifies whether data should be compressed before it is copied toohello destination.</span></span> <span data-ttu-id="712f7-264">Questa impostazione consente di ridurre il volume di hello di dati trasferiti.</span><span class="sxs-lookup"><span data-stu-id="712f7-264">This setting reduces hello volume of data being transferred.</span></span> |<span data-ttu-id="712f7-265">False</span><span class="sxs-lookup"><span data-stu-id="712f7-265">False</span></span> |<span data-ttu-id="712f7-266">No</span><span class="sxs-lookup"><span data-stu-id="712f7-266">No</span></span> |

<span data-ttu-id="712f7-267">Di seguito è riportato un esempio della definizione attività di copia con proprietà hello descritte nella tabella precedente hello:</span><span class="sxs-lookup"><span data-stu-id="712f7-267">Here's a sample definition of Copy Activity with hello properties that are described in hello preceding table:</span></span>

```json
"activities":[  
{
    "name": "Sample copy activity",
    "type": "Copy",
    "inputs": [{ "name": "OnpremisesSQLServerInput" }],
    "outputs": [{ "name": "AzureSQLDBOutput" }],
    "typeProperties": {
        "source": {
            "type": "SqlSource",
        },
        "sink": {
            "type": "SqlSink"
        },
        "enableStaging": true,
        "stagingSettings": {
            "linkedServiceName": "MyStagingBlob",
            "path": "stagingcontainer/path",
            "enableCompression": true
        }
    }
}
]
```

### <a name="billing-impact"></a><span data-ttu-id="712f7-268">Impatto della fatturazione</span><span class="sxs-lookup"><span data-stu-id="712f7-268">Billing impact</span></span>
<span data-ttu-id="712f7-269">I costi addebitati si basano su due passaggi: durata della copia e tipo di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-269">You are charged based on two steps: copy duration and copy type.</span></span>

* <span data-ttu-id="712f7-270">Quando si utilizza Gestione temporanea durante una copia su cloud (copia di dati da un archivio dati cloud dati archivio tooanother cloud), vengono addebitati hello [somma della durata di copia per i passaggi 1 e 2] x [prezzo unitario di copia cloud].</span><span class="sxs-lookup"><span data-stu-id="712f7-270">When you use staging during a cloud copy (copying data from a cloud data store tooanother cloud data store), you are charged hello [sum of copy duration for step 1 and step 2] x [cloud copy unit price].</span></span>
* <span data-ttu-id="712f7-271">Quando si utilizza Gestione temporanea durante una copia ibrida (copia di dati da un archivio dati locale dati archivio tooa cloud), vengono addebitati i [durata copia ibrida] x [prezzo unitario di copia ibrida] + [cloud copia durata] x [prezzo unitario di copia cloud].</span><span class="sxs-lookup"><span data-stu-id="712f7-271">When you use staging during a hybrid copy (copying data from an on-premises data store tooa cloud data store), you are charged for [hybrid copy duration] x [hybrid copy unit price] + [cloud copy duration] x [cloud copy unit price].</span></span>

## <a name="performance-tuning-steps"></a><span data-ttu-id="712f7-272">Procedura di ottimizzazione delle prestazioni</span><span class="sxs-lookup"><span data-stu-id="712f7-272">Performance tuning steps</span></span>
<span data-ttu-id="712f7-273">Si consiglia di eseguire la procedura seguente prestazioni hello tootune del servizio Data Factory con attività di copia:</span><span class="sxs-lookup"><span data-stu-id="712f7-273">We suggest that you take these steps tootune hello performance of your Data Factory service with Copy Activity:</span></span>

1. <span data-ttu-id="712f7-274">**Stabilire una baseline**.</span><span class="sxs-lookup"><span data-stu-id="712f7-274">**Establish a baseline**.</span></span> <span data-ttu-id="712f7-275">Durante la fase di sviluppo hello, testare la pipeline con attività di copia su un campione di dati rappresentativo.</span><span class="sxs-lookup"><span data-stu-id="712f7-275">During hello development phase, test your pipeline by using Copy Activity against a representative data sample.</span></span> <span data-ttu-id="712f7-276">È possibile utilizzare Data Factory hello [sezionamento modello](data-factory-scheduling-and-execution.md) quantità hello toolimit si lavora con dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-276">You can use hello Data Factory [slicing model](data-factory-scheduling-and-execution.md) toolimit hello amount of data you work with.</span></span>

   <span data-ttu-id="712f7-277">Raccogliere il tempo di esecuzione e le caratteristiche di prestazioni tramite hello **monitoraggio e gestione App**.</span><span class="sxs-lookup"><span data-stu-id="712f7-277">Collect execution time and performance characteristics by using hello **Monitoring and Management App**.</span></span> <span data-ttu-id="712f7-278">Scegliere **Monitoraggio e gestione** nella home page di Data Factory.</span><span class="sxs-lookup"><span data-stu-id="712f7-278">Choose **Monitor & Manage** on your Data Factory home page.</span></span> <span data-ttu-id="712f7-279">Nella visualizzazione ad albero di hello, scegliere hello **set di dati di output**.</span><span class="sxs-lookup"><span data-stu-id="712f7-279">In hello tree view, choose hello **output dataset**.</span></span> <span data-ttu-id="712f7-280">In hello **attività Windows** scegliere hello eseguire attività di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-280">In hello **Activity Windows** list, choose hello Copy Activity run.</span></span> <span data-ttu-id="712f7-281">**Attività Windows** Elenca la durata di attività di copia hello e dimensione hello dati hello che viene copiato.</span><span class="sxs-lookup"><span data-stu-id="712f7-281">**Activity Windows** lists hello Copy Activity duration and hello size of hello data that's copied.</span></span> <span data-ttu-id="712f7-282">velocità effettiva di Hello è elencata nella **attività finestra Esplora**.</span><span class="sxs-lookup"><span data-stu-id="712f7-282">hello throughput is listed in **Activity Window Explorer**.</span></span> <span data-ttu-id="712f7-283">toolearn ulteriori informazioni sull'applicazione hello, vedere [Monitor e gestire le pipeline di Data Factory di Azure tramite hello monitoraggio e gestione App](data-factory-monitor-manage-app.md).</span><span class="sxs-lookup"><span data-stu-id="712f7-283">toolearn more about hello app, see [Monitor and manage Azure Data Factory pipelines by using hello Monitoring and Management App](data-factory-monitor-manage-app.md).</span></span>

   ![Dettagli esecuzione attività](./media/data-factory-copy-activity-performance/mmapp-activity-run-details.png)

   <span data-ttu-id="712f7-285">Più avanti in articolo hello, è possibile confrontare le prestazioni di hello e la configurazione del scenario tooCopy attività [di riferimento delle prestazioni](#performance-reference) dai nostri test.</span><span class="sxs-lookup"><span data-stu-id="712f7-285">Later in hello article, you can compare hello performance and configuration of your scenario tooCopy Activity’s [performance reference](#performance-reference) from our tests.</span></span>
2. <span data-ttu-id="712f7-286">**Diagnosticare e ottimizzare le prestazioni**.</span><span class="sxs-lookup"><span data-stu-id="712f7-286">**Diagnose and optimize performance**.</span></span> <span data-ttu-id="712f7-287">Se le prestazioni di hello che è osservare non soddisfano le aspettative, è necessario tooidentify eventuali colli di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="712f7-287">If hello performance you observe doesn't meet your expectations, you need tooidentify performance bottlenecks.</span></span> <span data-ttu-id="712f7-288">Quindi, ottimizzare le prestazioni tooremove o ridurre l'effetto di hello di colli di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="712f7-288">Then, optimize performance tooremove or reduce hello effect of bottlenecks.</span></span> <span data-ttu-id="712f7-289">Una descrizione completa della diagnosi delle prestazioni esula dall'ambito di hello di questo articolo, ma di seguito sono riportate alcune considerazioni comuni:</span><span class="sxs-lookup"><span data-stu-id="712f7-289">A full description of performance diagnosis is beyond hello scope of this article, but here are some common considerations:</span></span>

   * <span data-ttu-id="712f7-290">Funzionalità per le prestazioni:</span><span class="sxs-lookup"><span data-stu-id="712f7-290">Performance features:</span></span>
     * [<span data-ttu-id="712f7-291">Copia parallela</span><span class="sxs-lookup"><span data-stu-id="712f7-291">Parallel copy</span></span>](#parallel-copy)
     * [<span data-ttu-id="712f7-292">Unità di spostamento dati cloud</span><span class="sxs-lookup"><span data-stu-id="712f7-292">Cloud data movement units</span></span>](#cloud-data-movement-units)
     * [<span data-ttu-id="712f7-293">Copia di staging</span><span class="sxs-lookup"><span data-stu-id="712f7-293">Staged copy</span></span>](#staged-copy)
     * [<span data-ttu-id="712f7-294">Scalabilità di Gateway di gestione dati</span><span class="sxs-lookup"><span data-stu-id="712f7-294">Data Management Gateway scalability</span></span>](data-factory-data-management-gateway-high-availability-scalability.md)
   * [<span data-ttu-id="712f7-295">Gateway di gestione dati</span><span class="sxs-lookup"><span data-stu-id="712f7-295">Data Management Gateway</span></span>](#considerations-for-data-management-gateway)
   * [<span data-ttu-id="712f7-296">Origine</span><span class="sxs-lookup"><span data-stu-id="712f7-296">Source</span></span>](#considerations-for-the-source)
   * [<span data-ttu-id="712f7-297">Sink</span><span class="sxs-lookup"><span data-stu-id="712f7-297">Sink</span></span>](#considerations-for-the-sink)
   * [<span data-ttu-id="712f7-298">Serializzazione e deserializzazione</span><span class="sxs-lookup"><span data-stu-id="712f7-298">Serialization and deserialization</span></span>](#considerations-for-serialization-and-deserialization)
   * [<span data-ttu-id="712f7-299">Compressione</span><span class="sxs-lookup"><span data-stu-id="712f7-299">Compression</span></span>](#considerations-for-compression)
   * [<span data-ttu-id="712f7-300">Mapping di colonne</span><span class="sxs-lookup"><span data-stu-id="712f7-300">Column mapping</span></span>](#considerations-for-column-mapping)
   * [<span data-ttu-id="712f7-301">Altre considerazioni</span><span class="sxs-lookup"><span data-stu-id="712f7-301">Other considerations</span></span>](#other-considerations)
3. <span data-ttu-id="712f7-302">**Espandere hello configurazione tooyour intero set di dati**.</span><span class="sxs-lookup"><span data-stu-id="712f7-302">**Expand hello configuration tooyour entire data set**.</span></span> <span data-ttu-id="712f7-303">Quando si è soddisfatti dei risultati dell'esecuzione hello e prestazioni, è possibile espandere definizione hello e toocover periodo attivo di pipeline l'intero set di dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-303">When you're satisfied with hello execution results and performance, you can expand hello definition and pipeline active period toocover your entire data set.</span></span>

## <a name="considerations-for-data-management-gateway"></a><span data-ttu-id="712f7-304">Considerazioni su Gateway di gestione dati</span><span class="sxs-lookup"><span data-stu-id="712f7-304">Considerations for Data Management Gateway</span></span>
<span data-ttu-id="712f7-305">**Installazione del gateway**: È consigliabile usare un Gateway di gestione dati di toohost computer dedicato.</span><span class="sxs-lookup"><span data-stu-id="712f7-305">**Gateway setup**: We recommend that you use a dedicated machine toohost Data Management Gateway.</span></span> <span data-ttu-id="712f7-306">Vedere [Considerazioni sull'uso di Gateway di gestione dati](data-factory-data-management-gateway.md#considerations-for-using-gateway).</span><span class="sxs-lookup"><span data-stu-id="712f7-306">See [Considerations for using Data Management Gateway](data-factory-data-management-gateway.md#considerations-for-using-gateway).</span></span>  

<span data-ttu-id="712f7-307">**Monitoraggio di gateway e la scalabilità verticale/orizzontale**: un singolo gateway logico con uno o più nodi gateway può essere utilizzato più attività di copia viene eseguito nel hello stesso tempo contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="712f7-307">**Gateway monitoring and scale-up/out**: A single logical gateway with one or more gateway nodes can serve multiple Copy Activity runs at hello same time concurrently.</span></span> <span data-ttu-id="712f7-308">È possibile visualizzare snapshot tempo quasi reale di utilizzo delle risorse (CPU, memoria, network(in/out) e così via) nel computer gateway, nonché il numero di hello di processi simultanei in esecuzione e limite di hello portale di Azure, vedere [gateway monitoraggio nel portale di hello](data-factory-data-management-gateway.md#monitor-gateway-in-the-portal).</span><span class="sxs-lookup"><span data-stu-id="712f7-308">You can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on a gateway machine as well as hello number of concurrent jobs running versus limit in hello Azure portal, see [Monitor gateway in hello portal](data-factory-data-management-gateway.md#monitor-gateway-in-the-portal).</span></span> <span data-ttu-id="712f7-309">Se è necessario pesante nello spostamento dei dati ibrido con un numero elevato di sequenze di attività simultanee di copia o con volume elevato di dati toocopy, prendere in considerazione troppo[scalabilità verticale e scalabilità gateway](data-factory-data-management-gateway-high-availability-scalability.md#scale-considerations) così come toobetter utilizzare la risorsa o copiare ulteriori risorse tooempower di tooprovision.</span><span class="sxs-lookup"><span data-stu-id="712f7-309">If you have heavy need on hybrid data movement either with large number of concurrent copy activity runs or with large volume of data toocopy, consider too[scale up or scale out gateway](data-factory-data-management-gateway-high-availability-scalability.md#scale-considerations) so as toobetter utilize your resource or tooprovision more resource tooempower copy.</span></span> 

## <a name="considerations-for-hello-source"></a><span data-ttu-id="712f7-310">Considerazioni per l'origine hello</span><span class="sxs-lookup"><span data-stu-id="712f7-310">Considerations for hello source</span></span>
### <a name="general"></a><span data-ttu-id="712f7-311">Generale</span><span class="sxs-lookup"><span data-stu-id="712f7-311">General</span></span>
<span data-ttu-id="712f7-312">Assicurarsi che hello archivio dati sottostante non viene sovraccaricato di altri carichi di lavoro che sono in esecuzione su o su di essa.</span><span class="sxs-lookup"><span data-stu-id="712f7-312">Be sure that hello underlying data store is not overwhelmed by other workloads that are running on or against it.</span></span>

<span data-ttu-id="712f7-313">Per gli archivi di dati di Microsoft, vedere [di monitoraggio e ottimizzazione argomenti](#performance-reference) che sono specifici toodata archivi e consentono di comprendere dati memorizzare le caratteristiche di prestazioni, ridurre al minimo i tempi di risposta e ottimizzare la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="712f7-313">For Microsoft data stores, see [monitoring and tuning topics](#performance-reference) that are specific toodata stores, and help you understand data store performance characteristics, minimize response times, and maximize throughput.</span></span>

<span data-ttu-id="712f7-314">Se si copiano dati da tooSQL di archiviazione Blob del Data Warehouse, è consigliabile utilizzare **PolyBase** tooboost prestazioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-314">If you copy data from Blob storage tooSQL Data Warehouse, consider using **PolyBase** tooboost performance.</span></span> <span data-ttu-id="712f7-315">Vedere [dati tooload usare PolyBase in Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse) per informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="712f7-315">See [Use PolyBase tooload data into Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse) for details.</span></span> <span data-ttu-id="712f7-316">Per la procedura dettagliata con un caso d'uso, vedere [Caricare 1 TB di dati in Azure SQL Data Warehouse in meno di 15 minuti con Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span><span class="sxs-lookup"><span data-stu-id="712f7-316">For a walkthrough with a use case, see [Load 1 TB into Azure SQL Data Warehouse under 15 minutes with Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span></span>

### <a name="file-based-data-stores"></a><span data-ttu-id="712f7-317">Archivi dati basati su file</span><span class="sxs-lookup"><span data-stu-id="712f7-317">File-based data stores</span></span>
<span data-ttu-id="712f7-318">*Inclusi archiviazione BLOB, Data Lake Store, Amazon S3, file system locali e HDFS locale*</span><span class="sxs-lookup"><span data-stu-id="712f7-318">*(Includes Blob storage, Data Lake Store, Amazon S3, on-premises file systems, and on-premises HDFS)*</span></span>

* <span data-ttu-id="712f7-319">**Dimensioni medie dei file e numero medio di file**: l'attività di copia trasferisce i dati procedendo un file alla volta.</span><span class="sxs-lookup"><span data-stu-id="712f7-319">**Average file size and file count**: Copy Activity transfers data one file at a time.</span></span> <span data-ttu-id="712f7-320">Con hello stessa quantità di dati toobe spostato, hello velocità effettiva complessiva è minore, se i dati di hello è costituito da molti piccoli file anziché di alcuni file di grandi dimensioni a causa di toohello fase bootstrap per ogni file.</span><span class="sxs-lookup"><span data-stu-id="712f7-320">With hello same amount of data toobe moved, hello overall throughput is lower if hello data consists of many small files rather than a few large files due toohello bootstrap phase for each file.</span></span> <span data-ttu-id="712f7-321">Pertanto, se possibile, combinare piccoli file in più grandi file toogain una velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="712f7-321">Therefore, if possible, combine small files into larger files toogain higher throughput.</span></span>
* <span data-ttu-id="712f7-322">**File di formato e la compressione**: per prestazioni più elevate tooimprove modi, vedere hello [considerazioni per la serializzazione e deserializzazione](#considerations-for-serialization-and-deserialization) e [considerazioni per la compressione](#considerations-for-compression) sezioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-322">**File format and compression**: For more ways tooimprove performance, see hello [Considerations for serialization and deserialization](#considerations-for-serialization-and-deserialization) and [Considerations for compression](#considerations-for-compression) sections.</span></span>
* <span data-ttu-id="712f7-323">Per hello **locale del file system** scenario, in cui **Gateway di gestione dati** è obbligatorio, vedere hello [considerazioni per Gateway di gestione dati](#considerations-for-data-management-gateway) sezione.</span><span class="sxs-lookup"><span data-stu-id="712f7-323">For hello **on-premises file system** scenario, in which **Data Management Gateway** is required, see hello [Considerations for Data Management Gateway](#considerations-for-data-management-gateway) section.</span></span>

### <a name="relational-data-stores"></a><span data-ttu-id="712f7-324">Archivi dati relazionali</span><span class="sxs-lookup"><span data-stu-id="712f7-324">Relational data stores</span></span>
<span data-ttu-id="712f7-325">*Inclusi database SQL, SQL Data Warehouse, Amazon Redshift, database SQL Server e database Oracle, MySQL, DB2, Teradata, Sybase e PostgreSQL*</span><span class="sxs-lookup"><span data-stu-id="712f7-325">*(Includes SQL Database; SQL Data Warehouse; Amazon Redshift; SQL Server databases; and Oracle, MySQL, DB2, Teradata, Sybase, and PostgreSQL databases, etc.)*</span></span>

* <span data-ttu-id="712f7-326">**Modello di dati**: lo schema di tabella influisce sulla velocità effettiva di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-326">**Data pattern**: Your table schema affects copy throughput.</span></span> <span data-ttu-id="712f7-327">Toocopy hello stessa quantità di dati di grandi dimensioni offre prestazioni migliori di dimensioni della riga di piccole dimensioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-327">A large row size gives you a better performance than small row size, toocopy hello same amount of data.</span></span> <span data-ttu-id="712f7-328">motivo di Hello è che il database hello in modo più efficiente possibile recuperare un minor numero di batch di dati che contengono meno righe.</span><span class="sxs-lookup"><span data-stu-id="712f7-328">hello reason is that hello database can more efficiently retrieve fewer batches of data that contain fewer rows.</span></span>
* <span data-ttu-id="712f7-329">**Query o stored procedure**: ottimizzare logica hello di query di hello o stored procedure specificata nei dati di hello attività di copia origine toofetch in modo più efficiente.</span><span class="sxs-lookup"><span data-stu-id="712f7-329">**Query or stored procedure**: Optimize hello logic of hello query or stored procedure you specify in hello Copy Activity source toofetch data more efficiently.</span></span>
* <span data-ttu-id="712f7-330">Per **database relazionali locale**, ad esempio SQL Server e Oracle, che richiedono l'uso di hello di **Gateway di gestione dati**, vedere hello [considerazioni per il Gateway di gestione dati](#considerations-on-data-management-gateway) sezione.</span><span class="sxs-lookup"><span data-stu-id="712f7-330">For **on-premises relational databases**, such as SQL Server and Oracle, which require hello use of **Data Management Gateway**, see hello [Considerations for Data Management Gateway](#considerations-on-data-management-gateway) section.</span></span>

## <a name="considerations-for-hello-sink"></a><span data-ttu-id="712f7-331">Considerazioni per il sink hello</span><span class="sxs-lookup"><span data-stu-id="712f7-331">Considerations for hello sink</span></span>
### <a name="general"></a><span data-ttu-id="712f7-332">Generale</span><span class="sxs-lookup"><span data-stu-id="712f7-332">General</span></span>
<span data-ttu-id="712f7-333">Assicurarsi che hello archivio dati sottostante non viene sovraccaricato di altri carichi di lavoro che sono in esecuzione su o su di essa.</span><span class="sxs-lookup"><span data-stu-id="712f7-333">Be sure that hello underlying data store is not overwhelmed by other workloads that are running on or against it.</span></span>

<span data-ttu-id="712f7-334">Per gli archivi di dati di Microsoft, fare riferimento troppo[di monitoraggio e ottimizzazione argomenti](#performance-reference) che sono archivi toodata specifico.</span><span class="sxs-lookup"><span data-stu-id="712f7-334">For Microsoft data stores, refer too[monitoring and tuning topics](#performance-reference) that are specific toodata stores.</span></span> <span data-ttu-id="712f7-335">Questi argomenti consentono di comprendere le caratteristiche di prestazioni archivio dati e la modalità di tempi di risposta toominimize e ottimizzare la velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="712f7-335">These topics can help you understand data store performance characteristics and how toominimize response times and maximize throughput.</span></span>

<span data-ttu-id="712f7-336">Se si copiano dati da **nell'archiviazione Blob** troppo**SQL Data Warehouse**, è consigliabile utilizzare **PolyBase** tooboost prestazioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-336">If you are copying data from **Blob storage** too**SQL Data Warehouse**, consider using **PolyBase** tooboost performance.</span></span> <span data-ttu-id="712f7-337">Vedere [dati tooload usare PolyBase in Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse) per informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="712f7-337">See [Use PolyBase tooload data into Azure SQL Data Warehouse](data-factory-azure-sql-data-warehouse-connector.md#use-polybase-to-load-data-into-azure-sql-data-warehouse) for details.</span></span> <span data-ttu-id="712f7-338">Per la procedura dettagliata con un caso d'uso, vedere [Caricare 1 TB di dati in Azure SQL Data Warehouse in meno di 15 minuti con Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span><span class="sxs-lookup"><span data-stu-id="712f7-338">For a walkthrough with a use case, see [Load 1 TB into Azure SQL Data Warehouse under 15 minutes with Azure Data Factory](data-factory-load-sql-data-warehouse.md).</span></span>

### <a name="file-based-data-stores"></a><span data-ttu-id="712f7-339">Archivi dati basati su file</span><span class="sxs-lookup"><span data-stu-id="712f7-339">File-based data stores</span></span>
<span data-ttu-id="712f7-340">*Inclusi archiviazione BLOB, Data Lake Store, Amazon S3, file system locali e HDFS locale*</span><span class="sxs-lookup"><span data-stu-id="712f7-340">*(Includes Blob storage, Data Lake Store, Amazon S3, on-premises file systems, and on-premises HDFS)*</span></span>

* <span data-ttu-id="712f7-341">**Copiare il comportamento**: se si copiano dati da un archivio dati diverso basato su file, attività di copia sono disponibili tre opzioni tramite hello **copyBehavior** proprietà.</span><span class="sxs-lookup"><span data-stu-id="712f7-341">**Copy behavior**: If you copy data from a different file-based data store, Copy Activity has three options via hello **copyBehavior** property.</span></span> <span data-ttu-id="712f7-342">mantenere la gerarchia, rendere flat la gerarchia e unire i file.</span><span class="sxs-lookup"><span data-stu-id="712f7-342">It preserves hierarchy, flattens hierarchy, or merges files.</span></span> <span data-ttu-id="712f7-343">Mantenimento o rendere flat gerarchia presenta un overhead di prestazioni senza alcuna, ma l'unione di file provoca tooincrease overhead delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-343">Either preserving or flattening hierarchy has little or no performance overhead, but merging files causes performance overhead tooincrease.</span></span>
* <span data-ttu-id="712f7-344">**File di formato e la compressione**: hello vedere [considerazioni per la serializzazione e deserializzazione](#considerations-for-serialization-and-deserialization) e [considerazioni per la compressione](#considerations-for-compression) sezioni per le prestazioni di altre modalità tooimprove .</span><span class="sxs-lookup"><span data-stu-id="712f7-344">**File format and compression**: See hello [Considerations for serialization and deserialization](#considerations-for-serialization-and-deserialization) and [Considerations for compression](#considerations-for-compression) sections for more ways tooimprove performance.</span></span>
* <span data-ttu-id="712f7-345">**Archivio BLOB**: attualmente l'archivio BLOB supporta solo i BLOB in blocchi per l'ottimizzazione della velocità effettiva e del trasferimento dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-345">**Blob storage**: Currently, Blob storage supports only block blobs for optimized data transfer and throughput.</span></span>
* <span data-ttu-id="712f7-346">Per **locale file System** scenari che richiedono l'uso di hello di **Gateway di gestione dati**, vedere hello [considerazioni per Gateway di gestione dati](#considerations-for-data-management-gateway) sezione.</span><span class="sxs-lookup"><span data-stu-id="712f7-346">For **on-premises file systems** scenarios that require hello use of **Data Management Gateway**, see hello [Considerations for Data Management Gateway](#considerations-for-data-management-gateway) section.</span></span>

### <a name="relational-data-stores"></a><span data-ttu-id="712f7-347">Archivi dati relazionali</span><span class="sxs-lookup"><span data-stu-id="712f7-347">Relational data stores</span></span>
<span data-ttu-id="712f7-348">*Inclusi database SQL, SQL Data Warehouse, database SQL Server e database Oracle*</span><span class="sxs-lookup"><span data-stu-id="712f7-348">*(Includes SQL Database, SQL Data Warehouse, SQL Server databases, and Oracle databases)*</span></span>

* <span data-ttu-id="712f7-349">**Copiare il comportamento**: a seconda delle proprietà hello sono stati impostati per **sqlSink**, attività di copia scrive i database di destinazione toohello dati in modi diversi.</span><span class="sxs-lookup"><span data-stu-id="712f7-349">**Copy behavior**: Depending on hello properties you've set for **sqlSink**, Copy Activity writes data toohello destination database in different ways.</span></span>
  * <span data-ttu-id="712f7-350">Per impostazione predefinita, utilizza servizio di hello dati lo spostamento dei dati di tooinsert hello API della copia Bulk in modalità di aggiunta, che fornisce hello prestazioni ottimali.</span><span class="sxs-lookup"><span data-stu-id="712f7-350">By default, hello data movement service uses hello Bulk Copy API tooinsert data in append mode, which provides hello best performance.</span></span>
  * <span data-ttu-id="712f7-351">Se si configura una stored procedure nel sink hello, database di hello applica una riga di dati hello alla volta anziché come un caricamento bulk.</span><span class="sxs-lookup"><span data-stu-id="712f7-351">If you configure a stored procedure in hello sink, hello database applies hello data one row at a time instead of as a bulk load.</span></span> <span data-ttu-id="712f7-352">e le prestazioni ne risentono notevolmente.</span><span class="sxs-lookup"><span data-stu-id="712f7-352">Performance drops significantly.</span></span> <span data-ttu-id="712f7-353">Se il set di dati è grande, quando applicabile, valutare se passare hello toousing **sqlWriterCleanupScript** proprietà.</span><span class="sxs-lookup"><span data-stu-id="712f7-353">If your data set is large, when applicable, consider switching toousing hello **sqlWriterCleanupScript** property.</span></span>
  * <span data-ttu-id="712f7-354">Se si configura hello **sqlWriterCleanupScript** eseguire proprietà per ogni attività di copia, trigger servizio hello hello script e quindi utilizzare dati hello tooinsert API della copia Bulk di hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-354">If you configure hello **sqlWriterCleanupScript** property for each Copy Activity run, hello service triggers hello script, and then you use hello Bulk Copy API tooinsert hello data.</span></span> <span data-ttu-id="712f7-355">Ad esempio, toooverwrite hello intera tabella con dati più recenti di hello, è possibile specificare un toofirst script elimina tutti i record prima che nuovi dati di caricamento bulk hello dall'origine hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-355">For example, toooverwrite hello entire table with hello latest data, you can specify a script toofirst delete all records before bulk-loading hello new data from hello source.</span></span>
* <span data-ttu-id="712f7-356">**Modello di dati e dimensioni batch**:</span><span class="sxs-lookup"><span data-stu-id="712f7-356">**Data pattern and batch size**:</span></span>
  * <span data-ttu-id="712f7-357">Lo schema di tabella influisce sulla velocità effettiva di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-357">Your table schema affects copy throughput.</span></span> <span data-ttu-id="712f7-358">toocopy hello stessa quantità di dati di grandi dimensioni offre prestazioni migliori rispetto alla dimensione di una riga piccola perché il database di hello in modo più efficiente possibile eseguire il commit un minor numero di batch di dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-358">toocopy hello same amount of data, a large row size gives you better performance than a small row size because hello database can more efficiently commit fewer batches of data.</span></span>
  * <span data-ttu-id="712f7-359">L'attività di copia inserisce i dati in una serie di batch.</span><span class="sxs-lookup"><span data-stu-id="712f7-359">Copy Activity inserts data in a series of batches.</span></span> <span data-ttu-id="712f7-360">È possibile impostare il numero di hello di righe in un batch utilizzando hello **viene raggiunto writeBatchSize** proprietà.</span><span class="sxs-lookup"><span data-stu-id="712f7-360">You can set hello number of rows in a batch by using hello **writeBatchSize** property.</span></span> <span data-ttu-id="712f7-361">Se i dati includono le righe di piccole dimensioni, è possibile impostare hello **viene raggiunto writeBatchSize** proprietà con una maggiore toobenefit valore da un overhead minore di batch e una velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="712f7-361">If your data has small rows, you can set hello **writeBatchSize** property with a higher value toobenefit from lower batch overhead and higher throughput.</span></span> <span data-ttu-id="712f7-362">Se le dimensioni di riga hello dei dati sono grande, prestare attenzione quando si aumenta **viene raggiunto writeBatchSize**.</span><span class="sxs-lookup"><span data-stu-id="712f7-362">If hello row size of your data is large, be careful when you increase **writeBatchSize**.</span></span> <span data-ttu-id="712f7-363">Un valore elevato potrebbe causare l'errore di copia tooa tramite overload database hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-363">A high value might lead tooa copy failure caused by overloading hello database.</span></span>
* <span data-ttu-id="712f7-364">Per **database relazionali locale** , ad esempio SQL Server e Oracle, che richiedono l'uso di hello di **Gateway di gestione dati**, vedere hello [considerazioni per il Gateway di gestione dati](#considerations-for-data-management-gateway) sezione.</span><span class="sxs-lookup"><span data-stu-id="712f7-364">For **on-premises relational databases** like SQL Server and Oracle, which require hello use of **Data Management Gateway**, see hello [Considerations for Data Management Gateway](#considerations-for-data-management-gateway) section.</span></span>

### <a name="nosql-stores"></a><span data-ttu-id="712f7-365">Archivi NoSQL</span><span class="sxs-lookup"><span data-stu-id="712f7-365">NoSQL stores</span></span>
<span data-ttu-id="712f7-366">*Inclusi gli archivi tabelle e Azure Cosmos DB*</span><span class="sxs-lookup"><span data-stu-id="712f7-366">*(Includes Table storage and Azure Cosmos DB )*</span></span>

* <span data-ttu-id="712f7-367">Per gli **archivi tabelle**:</span><span class="sxs-lookup"><span data-stu-id="712f7-367">For **Table storage**:</span></span>
  * <span data-ttu-id="712f7-368">**Partizione**: scrittura di partizioni di dati toointerleaved notevolmente le prestazioni risultano inferiori.</span><span class="sxs-lookup"><span data-stu-id="712f7-368">**Partition**: Writing data toointerleaved partitions dramatically degrades performance.</span></span> <span data-ttu-id="712f7-369">Ordinare i dati di origine dalla chiave di partizione in modo che i dati di hello viene inseriti in modo efficiente una partizione dopo l'altro, oppure regolare hello logica toowrite hello tooa singola partizione di dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-369">Sort your source data by partition key so that hello data is inserted efficiently into one partition after another, or adjust hello logic toowrite hello data tooa single partition.</span></span>
* <span data-ttu-id="712f7-370">Per **Azure Cosmos DB**:</span><span class="sxs-lookup"><span data-stu-id="712f7-370">For **Azure Cosmos DB**:</span></span>
  * <span data-ttu-id="712f7-371">**Dimensione batch**: hello **viene raggiunto writeBatchSize** proprietà imposta il numero di hello di richieste in parallelo dei documenti toocreate toohello DB Cosmos Azure del servizio.</span><span class="sxs-lookup"><span data-stu-id="712f7-371">**Batch size**: hello **writeBatchSize** property sets hello number of parallel requests toohello Azure Cosmos DB service toocreate documents.</span></span> <span data-ttu-id="712f7-372">È possibile prevedere prestazioni migliori quando si aumenta **viene raggiunto writeBatchSize** perché altre richieste in parallelo vengono inviate tooAzure DB Cosmos.</span><span class="sxs-lookup"><span data-stu-id="712f7-372">You can expect better performance when you increase **writeBatchSize** because more parallel requests are sent tooAzure Cosmos DB.</span></span> <span data-ttu-id="712f7-373">Tuttavia, controllare la limitazione delle richieste quando si scrittura tooAzure DB Cosmos (messaggio di errore hello è "Richiesta frequenza è di grandi dimensioni").</span><span class="sxs-lookup"><span data-stu-id="712f7-373">However, watch for throttling when you write tooAzure Cosmos DB (hello error message is "Request rate is large").</span></span> <span data-ttu-id="712f7-374">Vari fattori possono causare la limitazione delle richieste, tra cui dimensioni del documento, numero hello di termini nei documenti di hello e hello criteri di indicizzazione della raccolta di destinazione.</span><span class="sxs-lookup"><span data-stu-id="712f7-374">Various factors can cause throttling, including document size, hello number of terms in hello documents, and hello target collection's indexing policy.</span></span> <span data-ttu-id="712f7-375">tooachieve una velocità effettiva copia, è consigliabile utilizzare una raccolta migliore, ad esempio, S3.</span><span class="sxs-lookup"><span data-stu-id="712f7-375">tooachieve higher copy throughput, consider using a better collection, for example, S3.</span></span>

## <a name="considerations-for-serialization-and-deserialization"></a><span data-ttu-id="712f7-376">Considerazioni sulla serializzazione e deserializzazione</span><span class="sxs-lookup"><span data-stu-id="712f7-376">Considerations for serialization and deserialization</span></span>
<span data-ttu-id="712f7-377">Serializzazione e deserializzazione possono verificarsi quando il set di dati di input o il set di dati di output è costituito da un file.</span><span class="sxs-lookup"><span data-stu-id="712f7-377">Serialization and deserialization can occur when your input data set or output data set is a file.</span></span> <span data-ttu-id="712f7-378">Per informazioni dettagliate sui formati di file supportati dall'attività di copia vedere [File supportati e formati di compressione](data-factory-supported-file-and-compression-formats.md).</span><span class="sxs-lookup"><span data-stu-id="712f7-378">See [Supported file and compression formats](data-factory-supported-file-and-compression-formats.md) with details on supported file formats by Copy Activity.</span></span>

<span data-ttu-id="712f7-379">**Comportamento di copia**:</span><span class="sxs-lookup"><span data-stu-id="712f7-379">**Copy behavior**:</span></span>

* <span data-ttu-id="712f7-380">Copia di file tra archivi dati basati su file:</span><span class="sxs-lookup"><span data-stu-id="712f7-380">Copying files between file-based data stores:</span></span>
  * <span data-ttu-id="712f7-381">Quando i set di dati di input e output che prevedono non hello stesso o impostazioni del file di formato, il servizio di spostamento dati hello esegue una copia binaria senza la serializzazione o deserializzazione.</span><span class="sxs-lookup"><span data-stu-id="712f7-381">When input and output data sets both have hello same or no file format settings, hello data movement service executes a binary copy without any serialization or deserialization.</span></span> <span data-ttu-id="712f7-382">Vedrai uno scenario di toohello maggiore velocità effettiva rispetto, in cui hello impostazioni di formato di file di origine e sink sono diverse tra loro.</span><span class="sxs-lookup"><span data-stu-id="712f7-382">You see a higher throughput compared toohello scenario, in which hello source and sink file format settings are different from each other.</span></span>
  * <span data-ttu-id="712f7-383">Quando l'input e output set di dati di entrambi sono in formato testo e codifica hello solo il tipo è diverso, il servizio di spostamento dati hello esegue solo la conversione di codifica.</span><span class="sxs-lookup"><span data-stu-id="712f7-383">When input and output data sets both are in text format and only hello encoding type is different, hello data movement service only does encoding conversion.</span></span> <span data-ttu-id="712f7-384">Non esegue qualsiasi serializzazione e la deserializzazione, che provoca un sovraccarico delle prestazioni rispetto copia binaria tooa.</span><span class="sxs-lookup"><span data-stu-id="712f7-384">It doesn't do any serialization and deserialization, which causes some performance overhead compared tooa binary copy.</span></span>
  * <span data-ttu-id="712f7-385">Quando l'input e output set di dati sia diversi formati di file o configurazioni diverse, come delimitatori, hello servizio di spostamento dati deserializza toostream dati di origine, trasformazione e quindi eseguirne la serializzazione in formato di output di hello che è indicato.</span><span class="sxs-lookup"><span data-stu-id="712f7-385">When input and output data sets both have different file formats or different configurations, like delimiters, hello data movement service deserializes source data toostream, transform, and then serialize it into hello output format you indicated.</span></span> <span data-ttu-id="712f7-386">Questa operazione comporta un sovraccarico prestazioni molto più significativo rispetto tooother scenari.</span><span class="sxs-lookup"><span data-stu-id="712f7-386">This operation results in a much more significant performance overhead compared tooother scenarios.</span></span>
* <span data-ttu-id="712f7-387">Quando si copiano i file per/da un archivio dati che non è basata su file (ad esempio, da un archivio relazionale tooa store basate su file), passaggio di serializzazione o deserializzazione di hello è obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="712f7-387">When you copy files to/from a data store that is not file-based (for example, from a file-based store tooa relational store), hello serialization or deserialization step is required.</span></span> <span data-ttu-id="712f7-388">Questo passaggio comporta un notevole overhead delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-388">This step results in significant performance overhead.</span></span>

<span data-ttu-id="712f7-389">**Formato di file**: formato scelto per il file hello potrebbe influire sulle prestazioni di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-389">**File format**: hello file format you choose might affect copy performance.</span></span> <span data-ttu-id="712f7-390">Ad esempio, Avro è un formato binario compresso che archivia i metadati con i dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-390">For example, Avro is a compact binary format that stores metadata with data.</span></span> <span data-ttu-id="712f7-391">Include un ampio supporto nell'ecosistema di hello Hadoop per l'elaborazione e l'esecuzione di query.</span><span class="sxs-lookup"><span data-stu-id="712f7-391">It has broad support in hello Hadoop ecosystem for processing and querying.</span></span> <span data-ttu-id="712f7-392">È tuttavia più costoso per la serializzazione e la deserializzazione, determinando una velocità effettiva copia inferiore rispetto a tootext formato Avro.</span><span class="sxs-lookup"><span data-stu-id="712f7-392">However, Avro is more expensive for serialization and deserialization, which results in lower copy throughput compared tootext format.</span></span> <span data-ttu-id="712f7-393">Effettuare la selezione del formato di file in tutta l'elaborazione del flusso olistico hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-393">Make your choice of file format throughout hello processing flow holistically.</span></span> <span data-ttu-id="712f7-394">Iniziare con il modulo hello vengono memorizzati in, archivi dati di origine toobe estratti da sistemi esterni. formato migliore di Hello per l'archiviazione, elaborazione analitica e l'esecuzione di query; e il relativo formato dati hello devono essere esportati nel data mart per strumenti di report e visualizzazioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-394">Start with what form hello data is stored in, source data stores or toobe extracted from external systems; hello best format for storage, analytical processing, and querying; and in what format hello data should be exported into data marts for reporting and visualization tools.</span></span> <span data-ttu-id="712f7-395">Talvolta un formato di file che non sia ottimale per leggere e scrivere prestazioni potrebbe essere una scelta ottimale quando si considera hello complessiva analitici processo.</span><span class="sxs-lookup"><span data-stu-id="712f7-395">Sometimes a file format that is suboptimal for read and write performance might be a good choice when you consider hello overall analytical process.</span></span>

## <a name="considerations-for-compression"></a><span data-ttu-id="712f7-396">Considerazioni sulla compressione</span><span class="sxs-lookup"><span data-stu-id="712f7-396">Considerations for compression</span></span>
<span data-ttu-id="712f7-397">Quando il set di dati di input o output è un file, è possibile impostare la compressione tooperform attività di copia o la decompressione durante la scrittura di destinazione toohello dei dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-397">When your input or output data set is a file, you can set Copy Activity tooperform compression or decompression as it writes data toohello destination.</span></span> <span data-ttu-id="712f7-398">La scelta della compressione comporta un compromesso tra input/output (I/O) e CPU.</span><span class="sxs-lookup"><span data-stu-id="712f7-398">When you choose compression, you make a tradeoff between input/output (I/O) and CPU.</span></span> <span data-ttu-id="712f7-399">Le risorse di calcolo la compressione dei dati hello comporta costi aggiuntivi in.</span><span class="sxs-lookup"><span data-stu-id="712f7-399">Compressing hello data costs extra in compute resources.</span></span> <span data-ttu-id="712f7-400">ma riduce l'I/O di rete e l'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="712f7-400">But in return, it reduces network I/O and storage.</span></span> <span data-ttu-id="712f7-401">A seconda dei dati, si potrebbe riscontrare un aumento della velocità effettiva di copia complessiva.</span><span class="sxs-lookup"><span data-stu-id="712f7-401">Depending on your data, you may see a boost in overall copy throughput.</span></span>

<span data-ttu-id="712f7-402">**Codec**: l'attività di copia supporta i tipi di compressione gzip, bzip2 e Deflate.</span><span class="sxs-lookup"><span data-stu-id="712f7-402">**Codec**: Copy Activity supports gzip, bzip2, and Deflate compression types.</span></span> <span data-ttu-id="712f7-403">Azure HDInsight può utilizzare tutti e tre i tipi per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="712f7-403">Azure HDInsight can consume all three types for processing.</span></span> <span data-ttu-id="712f7-404">Ogni codec di compressione presenta dei vantaggi.</span><span class="sxs-lookup"><span data-stu-id="712f7-404">Each compression codec has advantages.</span></span> <span data-ttu-id="712f7-405">Ad esempio, bzip2 con velocità effettiva copia più bassa hello, ma si otterrà hello Hive query prestazioni ottimali con bzip2 poiché dividerlo per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="712f7-405">For example, bzip2 has hello lowest copy throughput, but you get hello best Hive query performance with bzip2 because you can split it for processing.</span></span> <span data-ttu-id="712f7-406">Gzip è l'opzione di hello più bilanciato e viene utilizzato spesso hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-406">Gzip is hello most balanced option, and it is used hello most often.</span></span> <span data-ttu-id="712f7-407">Scegliere i codec hello che meglio si adatta allo scenario end-to-end.</span><span class="sxs-lookup"><span data-stu-id="712f7-407">Choose hello codec that best suits your end-to-end scenario.</span></span>

<span data-ttu-id="712f7-408">**Livello**: per ogni codec di compressione è possibile scegliere tra due opzioni, la compressione più veloce e la compressione ottimale.</span><span class="sxs-lookup"><span data-stu-id="712f7-408">**Level**: You can choose from two options for each compression codec: fastest compressed and optimally compressed.</span></span> <span data-ttu-id="712f7-409">Hello più rapido compresso opzione comprime hello dati più rapidamente possibile, anche se non viene compresso in modo ottimale file risultante hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-409">hello fastest compressed option compresses hello data as quickly as possible, even if hello resulting file is not optimally compressed.</span></span> <span data-ttu-id="712f7-410">Hello opzione compresso in modo ottimale impiega più tempo alla compressione e produce una quantità minima di dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-410">hello optimally compressed option spends more time on compression and yields a minimal amount of data.</span></span> <span data-ttu-id="712f7-411">È possibile testare entrambi toosee opzioni che fornisce migliori prestazioni complessive nel case.</span><span class="sxs-lookup"><span data-stu-id="712f7-411">You can test both options toosee which provides better overall performance in your case.</span></span>

<span data-ttu-id="712f7-412">**Una considerazione importante**: toocopy una grande quantità di dati tra un archivio locale e cloud hello, considerare l'utilizzo dell'archiviazione blob provvisorio con la compressione.</span><span class="sxs-lookup"><span data-stu-id="712f7-412">**A consideration**: toocopy a large amount of data between an on-premises store and hello cloud, consider using interim blob storage with compression.</span></span> <span data-ttu-id="712f7-413">Utilizzo dell'archiviazione provvisorio risulta utile quando hello di banda di rete aziendale e i servizi di Azure è fattore limitante hello e si desidera che il set di dati di input hello ed entrambi toobe set di dati di output in formato non compresso.</span><span class="sxs-lookup"><span data-stu-id="712f7-413">Using interim storage is helpful when hello bandwidth of your corporate network and your Azure services is hello limiting factor, and you want hello input data set and output data set both toobe in uncompressed form.</span></span> <span data-ttu-id="712f7-414">In particolare, è possibile dividere un'attività di copia singola in due attività di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-414">More specifically, you can break a single copy activity into two copy activities.</span></span> <span data-ttu-id="712f7-415">Hello prima attività Copia da provvisorio tooan di origine hello o blob di gestione temporanea in formato compresso.</span><span class="sxs-lookup"><span data-stu-id="712f7-415">hello first copy activity copies from hello source tooan interim or staging blob in compressed form.</span></span> <span data-ttu-id="712f7-416">attività di copia secondo Hello copia i dati compresso hello dalla gestione temporanea e quindi decomprime mentre scrive toohello sink.</span><span class="sxs-lookup"><span data-stu-id="712f7-416">hello second copy activity copies hello compressed data from staging, and then decompresses while it writes toohello sink.</span></span>

## <a name="considerations-for-column-mapping"></a><span data-ttu-id="712f7-417">Considerazioni sul mapping di colonne</span><span class="sxs-lookup"><span data-stu-id="712f7-417">Considerations for column mapping</span></span>
<span data-ttu-id="712f7-418">È possibile impostare hello **columnMappings** proprietà nell'attività di copia toomap tutti o un sottoinsieme di hello colonne di output toohello colonne di input.</span><span class="sxs-lookup"><span data-stu-id="712f7-418">You can set hello **columnMappings** property in Copy Activity toomap all or a subset of hello input columns toohello output columns.</span></span> <span data-ttu-id="712f7-419">Dopo il servizio di spostamento dati hello legge i dati di hello dall'origine hello, è necessario il mapping di colonne tooperform sui dati hello prima che vengano scritte hello dati toohello sink.</span><span class="sxs-lookup"><span data-stu-id="712f7-419">After hello data movement service reads hello data from hello source, it needs tooperform column mapping on hello data before it writes hello data toohello sink.</span></span> <span data-ttu-id="712f7-420">Questa ulteriore elaborazione riduce la velocità effettiva di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-420">This extra processing reduces copy throughput.</span></span>

<span data-ttu-id="712f7-421">Se l'archivio dati di origine è disponibile per query, se si tratta di un archivio relazionale come Database SQL o SQL Server o se è un archivio NoSQL come archiviazione tabelle o database Cosmos di Azure, si consideri ad esempio inserendo hello colonna filtro e il riordino degli logica toohello **query**  proprietà anziché i mapping della colonna.</span><span class="sxs-lookup"><span data-stu-id="712f7-421">If your source data store is queryable, for example, if it's a relational store like SQL Database or SQL Server, or if it's a NoSQL store like Table storage or Azure Cosmos DB, consider pushing hello column filtering and reordering logic toohello **query** property instead of using column mapping.</span></span> <span data-ttu-id="712f7-422">In questo modo, la proiezione hello si verifica quando il servizio di spostamento dati hello legge l'archivio dati dai dati di origine hello, in cui è molto più efficiente.</span><span class="sxs-lookup"><span data-stu-id="712f7-422">This way, hello projection occurs while hello data movement service reads data from hello source data store, where it is much more efficient.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="712f7-423">Altre considerazioni</span><span class="sxs-lookup"><span data-stu-id="712f7-423">Other considerations</span></span>
<span data-ttu-id="712f7-424">Se hello le dimensioni dei dati che si desidera toocopy è di grandi dimensioni, è possibile modificare i dati della regola business toofurther partizione hello utilizzando hello meccanismo di sezionamento in Data Factory.</span><span class="sxs-lookup"><span data-stu-id="712f7-424">If hello size of data you want toocopy is large, you can adjust your business logic toofurther partition hello data using hello slicing mechanism in Data Factory.</span></span> <span data-ttu-id="712f7-425">Pianificare il tempo di attività di copia toorun più frequentemente eseguire delle dimensioni dei dati hello tooreduce per ogni attività di copia.</span><span class="sxs-lookup"><span data-stu-id="712f7-425">Then, schedule Copy Activity toorun more frequently tooreduce hello data size for each Copy Activity run.</span></span>

<span data-ttu-id="712f7-426">Essere attenzione hello numerosi set di dati e attività di copia richiedendo Data Factory tooconnector toohello stesso archivio dati in hello stesso tempo.</span><span class="sxs-lookup"><span data-stu-id="712f7-426">Be cautious about hello number of data sets and copy activities requiring Data Factory tooconnector toohello same data store at hello same time.</span></span> <span data-ttu-id="712f7-427">Numero di processi simultanei copia potrebbe limitare un archivio dati e comportare prestazioni toodegraded, copiare i tentativi interni di processo e in alcuni casi, gli errori di esecuzione.</span><span class="sxs-lookup"><span data-stu-id="712f7-427">Many concurrent copy jobs might throttle a data store and lead toodegraded performance, copy job internal retries, and in some cases, execution failures.</span></span>

## <a name="sample-scenario-copy-from-an-on-premises-sql-server-tooblob-storage"></a><span data-ttu-id="712f7-428">Scenario di esempio: copia da un archivio di tooBlob di SQL Server locale</span><span class="sxs-lookup"><span data-stu-id="712f7-428">Sample scenario: Copy from an on-premises SQL Server tooBlob storage</span></span>
<span data-ttu-id="712f7-429">**Scenario**: una pipeline viene compilata toocopy dati da un archivio di tooBlob on-premise SQL Server in formato CSV.</span><span class="sxs-lookup"><span data-stu-id="712f7-429">**Scenario**: A pipeline is built toocopy data from an on-premises SQL Server tooBlob storage in CSV format.</span></span> <span data-ttu-id="712f7-430">toomake hello più velocemente il processo di copia, i file CSV hello devono essere compresso nel formato bzip2.</span><span class="sxs-lookup"><span data-stu-id="712f7-430">toomake hello copy job faster, hello CSV files should be compressed into bzip2 format.</span></span>

<span data-ttu-id="712f7-431">**Test e analisi**: velocità effettiva di hello delle attività di copia è minore di 2 MBps, che è molto più lente rispetto benchmark delle prestazioni hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-431">**Test and analysis**: hello throughput of Copy Activity is less than 2 MBps, which is much slower than hello performance benchmark.</span></span>

<span data-ttu-id="712f7-432">**Analisi delle prestazioni e ottimizzazione**: tootroubleshoot hello problema di prestazioni, si esaminerà come dati hello vengono elaborati e spostati.</span><span class="sxs-lookup"><span data-stu-id="712f7-432">**Performance analysis and tuning**: tootroubleshoot hello performance issue, let’s look at how hello data is processed and moved.</span></span>

1. <span data-ttu-id="712f7-433">**Leggere dati**: Gateway apre tooSQL una connessione Server e invia hello query.</span><span class="sxs-lookup"><span data-stu-id="712f7-433">**Read data**: Gateway opens a connection tooSQL Server and sends hello query.</span></span> <span data-ttu-id="712f7-434">SQL Server risponde inviando tooGateway di flusso di dati di hello tramite intranet hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-434">SQL Server responds by sending hello data stream tooGateway via hello intranet.</span></span>
2. <span data-ttu-id="712f7-435">**La serializzazione e comprimere i dati**: Gateway serializza formato tooCSV flusso di dati hello e comprime hello tooa bzip2 flusso dei dati.</span><span class="sxs-lookup"><span data-stu-id="712f7-435">**Serialize and compress data**: Gateway serializes hello data stream tooCSV format, and compresses hello data tooa bzip2 stream.</span></span>
3. <span data-ttu-id="712f7-436">**Scrivere dati**: Gateway carica archiviazione tooBlob di hello bzip2 flusso tramite hello Internet.</span><span class="sxs-lookup"><span data-stu-id="712f7-436">**Write data**: Gateway uploads hello bzip2 stream tooBlob storage via hello Internet.</span></span>

<span data-ttu-id="712f7-437">Come si può notare, i dati di hello vengono elaborati e spostati in modo sequenziale streaming: SQL Server > LAN > Gateway > WAN > nell'archiviazione Blob.</span><span class="sxs-lookup"><span data-stu-id="712f7-437">As you can see, hello data is being processed and moved in a streaming sequential manner: SQL Server > LAN > Gateway > WAN > Blob storage.</span></span> <span data-ttu-id="712f7-438">**Hello prestazioni complessive viene gestita dalla velocità effettiva minima di hello attraverso la pipeline hello**.</span><span class="sxs-lookup"><span data-stu-id="712f7-438">**hello overall performance is gated by hello minimum throughput across hello pipeline**.</span></span>

![Flusso di dati](./media/data-factory-copy-activity-performance/case-study-pic-1.png)

<span data-ttu-id="712f7-440">Uno o più dei seguenti fattori hello potrebbe causare colli di bottiglia delle prestazioni hello:</span><span class="sxs-lookup"><span data-stu-id="712f7-440">One or more of hello following factors might cause hello performance bottleneck:</span></span>

* <span data-ttu-id="712f7-441">**Origine**: SQL Server ha di per sé una velocità effettiva bassa a causa dei carichi elevati.</span><span class="sxs-lookup"><span data-stu-id="712f7-441">**Source**: SQL Server itself has low throughput because of heavy loads.</span></span>
* <span data-ttu-id="712f7-442">**Gateway di gestione dati**:</span><span class="sxs-lookup"><span data-stu-id="712f7-442">**Data Management Gateway**:</span></span>
  * <span data-ttu-id="712f7-443">**LAN**: Gateway si trova lontano dal computer di SQL Server hello e dispone di una connessione con larghezza di banda ridotta.</span><span class="sxs-lookup"><span data-stu-id="712f7-443">**LAN**: Gateway is located far from hello SQL Server machine and has a low-bandwidth connection.</span></span>
  * <span data-ttu-id="712f7-444">**Gateway**: Gateway ha raggiunto il hello tooperform limitazioni di carico seguenti operazioni:</span><span class="sxs-lookup"><span data-stu-id="712f7-444">**Gateway**: Gateway has reached its load limitations tooperform hello following operations:</span></span>
    * <span data-ttu-id="712f7-445">**Serializzazione**: serializzazione tooCSV flusso di dati hello formato è lento della velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="712f7-445">**Serialization**: Serializing hello data stream tooCSV format has slow throughput.</span></span>
    * <span data-ttu-id="712f7-446">**Compressione**: si è scelto un codec di compressione lenta, ad esempio bzip2 a 2,8 Mbps con core i7.</span><span class="sxs-lookup"><span data-stu-id="712f7-446">**Compression**: You chose a slow compression codec (for example, bzip2, which is 2.8 MBps with Core i7).</span></span>
  * <span data-ttu-id="712f7-447">**WAN**: larghezza di banda di hello tra la rete aziendale hello e i servizi di Azure è basso (ad esempio T1 = 1,544 kbps; T2 = 6,312 kbps).</span><span class="sxs-lookup"><span data-stu-id="712f7-447">**WAN**: hello bandwidth between hello corporate network and your Azure services is low (for example, T1 = 1,544 kbps; T2 = 6,312 kbps).</span></span>
* <span data-ttu-id="712f7-448">**Sink**: l'archivio BLOB ha una velocità effettiva bassa.</span><span class="sxs-lookup"><span data-stu-id="712f7-448">**Sink**: Blob storage has low throughput.</span></span> <span data-ttu-id="712f7-449">Questo scenario è poco probabile perché il relativo contratto di servizio garantisce un minimo di 60 Mbps.</span><span class="sxs-lookup"><span data-stu-id="712f7-449">(This scenario is unlikely because its SLA guarantees a minimum of 60 MBps.)</span></span>

<span data-ttu-id="712f7-450">In questo caso, la compressione dei dati bzip2 potrebbe rallentare pipeline intera hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-450">In this case, bzip2 data compression might be slowing down hello entire pipeline.</span></span> <span data-ttu-id="712f7-451">Cambio codec di compressione gzip tooa potrebbe facilitano il collo di bottiglia.</span><span class="sxs-lookup"><span data-stu-id="712f7-451">Switching tooa gzip compression codec might ease this bottleneck.</span></span>

## <a name="sample-scenarios-use-parallel-copy"></a><span data-ttu-id="712f7-452">Scenari di esempio: usare la copia parallela</span><span class="sxs-lookup"><span data-stu-id="712f7-452">Sample scenarios: Use parallel copy</span></span>
<span data-ttu-id="712f7-453">**Scenario di ricerca per categorie:** copiare i file di 1 MB 1.000 da archiviazione tooBlob nel file system hello in locale.</span><span class="sxs-lookup"><span data-stu-id="712f7-453">**Scenario I:** Copy 1,000 1-MB files from hello on-premises file system tooBlob storage.</span></span>

<span data-ttu-id="712f7-454">**Analisi e regolazione delle prestazioni**: per un esempio, se è stato installato un gateway in un computer quad-core, Data Factory utilizza 16 copie parallelo toomove file dall'archiviazione tooBlob nel file system hello contemporaneamente.</span><span class="sxs-lookup"><span data-stu-id="712f7-454">**Analysis and performance tuning**: For an example, if you have installed gateway on a quad core machine, Data Factory uses 16 parallel copies toomove files from hello file system tooBlob storage concurrently.</span></span> <span data-ttu-id="712f7-455">L'esecuzione parallela deve garantire una velocità effettiva elevata.</span><span class="sxs-lookup"><span data-stu-id="712f7-455">This parallel execution should result in high throughput.</span></span> <span data-ttu-id="712f7-456">È anche possibile specificare esplicitamente conteggio copie parallelo hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-456">You also can explicitly specify hello parallel copies count.</span></span> <span data-ttu-id="712f7-457">Quando si copiano molti file di piccole dimensioni, le copie parallele migliorano notevolmente la velocità effettiva garantendo un uso più efficiente delle risorse.</span><span class="sxs-lookup"><span data-stu-id="712f7-457">When you copy many small files, parallel copies dramatically help throughput by using resources more effectively.</span></span>

![Scenario 1](./media/data-factory-copy-activity-performance/scenario-1.png)

<span data-ttu-id="712f7-459">**Scenario II**: copiare 20 BLOB di 500 MB da archiviazione di Blob tooData Lake archivio Analitica e ottimizzare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="712f7-459">**Scenario II**: Copy 20 blobs of 500 MB each from Blob storage tooData Lake Store Analytics, and then tune performance.</span></span>

<span data-ttu-id="712f7-460">**Analisi e regolazione delle prestazioni**: In questo scenario, Data Factory copia dati hello da un archivio Blob archiviazione tooData Lake tramite una singola copia (**parallelCopies** impostare too1) e le unità di spostamento di dati singolo cloud.</span><span class="sxs-lookup"><span data-stu-id="712f7-460">**Analysis and performance tuning**: In this scenario, Data Factory copies hello data from Blob storage tooData Lake Store by using single-copy (**parallelCopies** set too1) and single-cloud data movement units.</span></span> <span data-ttu-id="712f7-461">Hello velocità effettiva è osservare verrà essere Chiudi toothat descritto in hello [sezione di riferimento delle prestazioni](#performance-reference).</span><span class="sxs-lookup"><span data-stu-id="712f7-461">hello throughput you observe will be close toothat described in hello [performance reference section](#performance-reference).</span></span>   

![Scenario 2](./media/data-factory-copy-activity-performance/scenario-2.png)

<span data-ttu-id="712f7-463">**Scenario III**: i singoli file hanno grandi dimensioni e il volume totale molto elevato.</span><span class="sxs-lookup"><span data-stu-id="712f7-463">**Scenario III**: Individual file size is greater than dozens of MBs and total volume is large.</span></span>

<span data-ttu-id="712f7-464">**Analisi e ottimizzazione delle prestazioni**: aumento **parallelCopies** non ottenere migliori prestazioni di copia a causa delle limitazioni delle risorse hello di DMU una singolo cloud.</span><span class="sxs-lookup"><span data-stu-id="712f7-464">**Analysis and performance turning**: Increasing **parallelCopies** doesn't result in better copy performance because of hello resource limitations of a single-cloud DMU.</span></span> <span data-ttu-id="712f7-465">Al contrario, è necessario specificare più cloud DMUs tooget spostamento dei dati di altre risorse tooperform hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-465">Instead, you should specify more cloud DMUs tooget more resources tooperform hello data movement.</span></span> <span data-ttu-id="712f7-466">Non si specifica un valore per hello **parallelCopies** proprietà.</span><span class="sxs-lookup"><span data-stu-id="712f7-466">Do not specify a value for hello **parallelCopies** property.</span></span> <span data-ttu-id="712f7-467">Data Factory gestisce il parallelismo hello.</span><span class="sxs-lookup"><span data-stu-id="712f7-467">Data Factory handles hello parallelism for you.</span></span> <span data-ttu-id="712f7-468">In questo caso, se si imposta **cloudDataMovementUnits** si verifica di too4, una velocità effettiva di circa quattro volte.</span><span class="sxs-lookup"><span data-stu-id="712f7-468">In this case, if you set **cloudDataMovementUnits** too4, a throughput of about four times occurs.</span></span>

![Scenario 3](./media/data-factory-copy-activity-performance/scenario-3.png)

## <a name="reference"></a><span data-ttu-id="712f7-470">riferimento</span><span class="sxs-lookup"><span data-stu-id="712f7-470">Reference</span></span>
<span data-ttu-id="712f7-471">Ecco il monitoraggio delle prestazioni e ottimizzazione di riferimenti per alcuni archivi dati hello è supportato:</span><span class="sxs-lookup"><span data-stu-id="712f7-471">Here are performance monitoring and tuning references for some of hello supported data stores:</span></span>

* <span data-ttu-id="712f7-472">Archiviazione di Azure, inclusi archivi BLOB e archivi tabelle: [Obiettivi di scalabilità e prestazioni per Archiviazione di Azure](../storage/common/storage-scalability-targets.md) ed [Elenco di controllo di prestazioni e scalabilità per Archiviazione di Microsoft Azure](../storage/common/storage-performance-checklist.md)</span><span class="sxs-lookup"><span data-stu-id="712f7-472">Azure Storage (including Blob storage and Table storage): [Azure Storage scalability targets](../storage/common/storage-scalability-targets.md) and [Azure Storage performance and scalability checklist](../storage/common/storage-performance-checklist.md)</span></span>
* <span data-ttu-id="712f7-473">Database SQL di Azure: È possibile [monitorare le prestazioni di hello](../sql-database/sql-database-single-database-monitor.md) e verificare la percentuale di hello database transaction unit (DTU)</span><span class="sxs-lookup"><span data-stu-id="712f7-473">Azure SQL Database: You can [monitor hello performance](../sql-database/sql-database-single-database-monitor.md) and check hello database transaction unit (DTU) percentage</span></span>
* <span data-ttu-id="712f7-474">Azure SQL Data Warehouse: la funzionalità viene misurata in unità data warehouse (DWU). Vedere in proposito [Gestire la potenza di calcolo in Azure SQL Data Warehouse (Panoramica)](../sql-data-warehouse/sql-data-warehouse-manage-compute-overview.md)</span><span class="sxs-lookup"><span data-stu-id="712f7-474">Azure SQL Data Warehouse: Its capability is measured in data warehouse units (DWUs); see [Manage compute power in Azure SQL Data Warehouse (Overview)](../sql-data-warehouse/sql-data-warehouse-manage-compute-overview.md)</span></span>
* <span data-ttu-id="712f7-475">Azure Cosmos DB: [livelli di prestazioni in Azure Cosmos DB](../documentdb/documentdb-performance-levels.md)</span><span class="sxs-lookup"><span data-stu-id="712f7-475">Azure Cosmos DB: [Performance levels in Azure Cosmos DB](../documentdb/documentdb-performance-levels.md)</span></span>
* <span data-ttu-id="712f7-476">SQL Server locale: [Monitoraggio e ottimizzazione delle prestazioni](https://msdn.microsoft.com/library/ms189081.aspx)</span><span class="sxs-lookup"><span data-stu-id="712f7-476">On-premises SQL Server: [Monitor and tune for performance](https://msdn.microsoft.com/library/ms189081.aspx)</span></span>
* <span data-ttu-id="712f7-477">File server locale: [Performance Tuning for File Servers](https://msdn.microsoft.com/library/dn567661.aspx)</span><span class="sxs-lookup"><span data-stu-id="712f7-477">On-premises file server: [Performance tuning for file servers](https://msdn.microsoft.com/library/dn567661.aspx)</span></span>
