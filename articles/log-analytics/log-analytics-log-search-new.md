---
title: esegue la ricerca in OMS Log Analitica aaaLog | Documenti Microsoft
description: "È necessario un tooretrieve di ricerca di log di tutti i dati dal Log Analitica.  Questo articolo descrive come nuovo log ricerche vengono utilizzate nel Log Analitica e vengono forniti i concetti che è necessario toounderstand prima di crearne uno nuovo."
services: log-analytics
documentationcenter: 
author: bwren
manager: carmonm
editor: 
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/25/2017
ms.author: bwren
ms.openlocfilehash: 08fda1d9eb9e6ab824ffb9e12af09832c3e3fad2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="understanding-log-searches-in-log-analytics"></a><span data-ttu-id="d9736-104">Informazioni sulle ricerche log in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="d9736-104">Understanding log searches in Log Analytics</span></span>

> [!NOTE]
> <span data-ttu-id="d9736-105">Questo articolo descrive ricerche nei log in Analitica di Log di Azure utilizzando il nuovo linguaggio di query hello.</span><span class="sxs-lookup"><span data-stu-id="d9736-105">This article describes log searches in Azure Log Analytics using hello new query language.</span></span>  <span data-ttu-id="d9736-106">È possibile acquisire familiarità con il nuovo linguaggio di hello e ottenere hello procedure tooupgrade l'area di lavoro in [aggiornare la ricerca di log di Azure Log Analitica dell'area di lavoro toonew](log-analytics-log-search-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="d9736-106">You can learn more about hello new language and get hello procedure tooupgrade your workspace at [Upgrade your Azure Log Analytics workspace toonew log search](log-analytics-log-search-upgrade.md).</span></span>  
>
> <span data-ttu-id="d9736-107">Se l'area di lavoro non è stato aggiornato toohello nuovo linguaggio di query, è consigliabile consultare troppo[trovare i dati tramite ricerche nei log nel Log Analitica](log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="d9736-107">If your workspace hasn't been upgraded toohello new query language, you should refer too[Find data using log searches in Log Analytics](log-analytics-log-searches.md).</span></span>

<span data-ttu-id="d9736-108">È necessario un tooretrieve di ricerca di log di tutti i dati dal Log Analitica.</span><span class="sxs-lookup"><span data-stu-id="d9736-108">You require a log search tooretrieve any data from Log Analytics.</span></span>  <span data-ttu-id="d9736-109">Se si sta analizzando i dati nel portale di hello, toobe una regola di avviso di configurazione una notifica di una determinata condizione, o il recupero dei dati utilizzando hello Log Analitica API, si utilizzerà un registro ricerca toospecify hello dati.</span><span class="sxs-lookup"><span data-stu-id="d9736-109">Whether you're analyzing data in hello portal, configuring an alert rule toobe notified of a particular condition, or retrieving data using hello Log Analytics API, you will use a log search toospecify hello data you want.</span></span>  <span data-ttu-id="d9736-110">Questo articolo descrive come vengono usate le ricerche log in Log Analytics e illustra i concetti con cui occorre avere familiarità prima di crearne una.</span><span class="sxs-lookup"><span data-stu-id="d9736-110">This article describes how log searches are used in Log Analytics and provides concepts that should understand before creating one.</span></span> <span data-ttu-id="d9736-111">Vedere hello [passaggi successivi](#next-steps) sezione per informazioni dettagliate sulla creazione e modifica ricerche nei log e per i riferimenti nel linguaggio di query hello.</span><span class="sxs-lookup"><span data-stu-id="d9736-111">See hello [Next steps](#next-steps) section for details on creating and editing log searches and for references on hello query language.</span></span>

## <a name="where-log-searches-are-used"></a><span data-ttu-id="d9736-112">Possibili usi delle ricerche log</span><span class="sxs-lookup"><span data-stu-id="d9736-112">Where log searches are used</span></span>

<span data-ttu-id="d9736-113">Hello modi diversi che si utilizzeranno ricerche nei log in Analitica Log includono hello informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="d9736-113">hello different ways that you will use log searches in Log Analytics include hello following:</span></span>

- <span data-ttu-id="d9736-114">**Portali.**</span><span class="sxs-lookup"><span data-stu-id="d9736-114">**Portals.**</span></span> <span data-ttu-id="d9736-115">È possibile eseguire un'analisi interattiva dei dati nel repository di hello con hello [portale ricerca nei Log](log-analytics-log-search-log-search-portal.md) o hello [portale avanzate Analitica](https://go.microsoft.com/fwlink/?linkid=856587).</span><span class="sxs-lookup"><span data-stu-id="d9736-115">You can perform interactive analysis of data in hello repository with hello [Log Search portal](log-analytics-log-search-log-search-portal.md) or hello [Advanced Analytics portal](https://go.microsoft.com/fwlink/?linkid=856587).</span></span>  <span data-ttu-id="d9736-116">In questo modo si tooedit le query e analizzare i risultati di hello in una vasta gamma di formati e le visualizzazioni.</span><span class="sxs-lookup"><span data-stu-id="d9736-116">This allows you tooedit your query and analyze hello results in a variety of formats and visualizations.</span></span>  <span data-ttu-id="d9736-117">La maggior parte delle query create verrà avviato in uno dei portali hello e quindi copiate dopo aver verificato che funziona come previsto.</span><span class="sxs-lookup"><span data-stu-id="d9736-117">Most queries that you create will start in one of hello portals and then copied once you verify that it works as expected.</span></span>
- <span data-ttu-id="d9736-118">**Regole di avviso.**</span><span class="sxs-lookup"><span data-stu-id="d9736-118">**Alert rules.**</span></span> <span data-ttu-id="d9736-119">Le [regole di avviso](log-analytics-alerts.md) consentono di identificare in modo proattivo i problemi dai dati nell'area di lavoro.</span><span class="sxs-lookup"><span data-stu-id="d9736-119">[Alert rules](log-analytics-alerts.md) proactively identify issues from data in your workspace.</span></span>  <span data-ttu-id="d9736-120">Ogni regola di avviso è basata su una ricerca log che viene eseguita automaticamente a intervalli regolari.</span><span class="sxs-lookup"><span data-stu-id="d9736-120">Each alert rule is based on a log search that is automatically run at regular intervals.</span></span>  <span data-ttu-id="d9736-121">risultati di Hello sono toodetermine ispezionata se è necessario creare un avviso.</span><span class="sxs-lookup"><span data-stu-id="d9736-121">hello results are inspected toodetermine if an alert should be created.</span></span>
- <span data-ttu-id="d9736-122">**Visualizzazioni.**</span><span class="sxs-lookup"><span data-stu-id="d9736-122">**Views.**</span></span>  <span data-ttu-id="d9736-123">È possibile creare visualizzazioni di dati toobe inclusi nel dashboard di utente con [Visualizza finestra di progettazione](log-analytics-view-designer.md).</span><span class="sxs-lookup"><span data-stu-id="d9736-123">You can create visualizations of data toobe included in user dashboards with [View Designer](log-analytics-view-designer.md).</span></span>  <span data-ttu-id="d9736-124">Ricerche nei log forniscono dati hello utilizzati da [riquadri](log-analytics-view-designer-tiles.md) e [parti visualizzazione](log-analytics-view-designer-parts.md) di ogni visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="d9736-124">Log searches provide hello data used by [tiles](log-analytics-view-designer-tiles.md) and [visualization parts](log-analytics-view-designer-parts.md) in each view.</span></span>  <span data-ttu-id="d9736-125">È possibile scorrere verso il basso dalle parti di visualizzazione hello un'ulteriore analisi portale tooperform ricerca dei registri dati hello.</span><span class="sxs-lookup"><span data-stu-id="d9736-125">You can drill down from visualization parts into hello Log Search portal tooperform further analysis on hello data.</span></span>
- <span data-ttu-id="d9736-126">**Esportazione.**</span><span class="sxs-lookup"><span data-stu-id="d9736-126">**Export.**</span></span>  <span data-ttu-id="d9736-127">Quando si esportano dati da hello Analitica di Log dell'area di lavoro tooExcel o [Power BI](log-analytics-powerbi.md), si crea un tooexport di dati di registro ricerca toodefine hello.</span><span class="sxs-lookup"><span data-stu-id="d9736-127">When you export data from hello Log Analytics workspace tooExcel or [Power BI](log-analytics-powerbi.md), you create a log search toodefine hello data tooexport.</span></span>
- <span data-ttu-id="d9736-128">**PowerShell.**</span><span class="sxs-lookup"><span data-stu-id="d9736-128">**PowerShell.**</span></span> <span data-ttu-id="d9736-129">È possibile eseguire uno script di PowerShell da una riga di comando o un runbook di automazione di Azure che utilizza [Get AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve dati dal Log Analitica.</span><span class="sxs-lookup"><span data-stu-id="d9736-129">You can run a PowerShell script from a command line or an Azure Automation runbook that uses [Get-AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve data from Log Analytics.</span></span>  <span data-ttu-id="d9736-130">Questo cmdlet richiede un tooretrieve di dati di query toodetermine hello.</span><span class="sxs-lookup"><span data-stu-id="d9736-130">This cmdlet requires a query toodetermine hello data tooretrieve.</span></span>
- <span data-ttu-id="d9736-131">**API di Log Analytics.**</span><span class="sxs-lookup"><span data-stu-id="d9736-131">**Log Analytics API.**</span></span>  <span data-ttu-id="d9736-132">Hello [API di ricerca di log Log Analitica](log-analytics-log-search-api.md) consente a qualsiasi client dell'API REST tooretrieve dati dall'area di lavoro hello.</span><span class="sxs-lookup"><span data-stu-id="d9736-132">hello [Log Analytics log search API](log-analytics-log-search-api.md) allows any REST API client tooretrieve data from hello workspace.</span></span>  <span data-ttu-id="d9736-133">richiesta di API Hello include una query che viene eseguita su un Log Analitica toodetermine hello dati tooretrieve.</span><span class="sxs-lookup"><span data-stu-id="d9736-133">hello API request includes a query that is run against Log Analytics toodetermine hello data tooretrieve.</span></span>

![Ricerche log](media/log-analytics-log-search-new/log-search-overview.png)

## <a name="how-log-analytics-data-is-organized"></a><span data-ttu-id="d9736-135">Organizzazione dei dati di Log Analytics</span><span class="sxs-lookup"><span data-stu-id="d9736-135">How Log Analytics data is organized</span></span>
<span data-ttu-id="d9736-136">Quando si compila una query, è necessario innanzitutto determinare quali tabelle presentano dati hello che si sta cercando.</span><span class="sxs-lookup"><span data-stu-id="d9736-136">When you build a query, you start by determining which tables have hello data that you're looking for.</span></span> <span data-ttu-id="d9736-137">Ogni [origine dati](log-analytics-data-sources.md) e [soluzione](../operations-management-suite/operations-management-suite-solutions.md) archivia i dati in tabelle dedicate nell'area di lavoro Log Analitica hello.</span><span class="sxs-lookup"><span data-stu-id="d9736-137">Each [data source](log-analytics-data-sources.md) and [solution](../operations-management-suite/operations-management-suite-solutions.md) stores its data in dedicated tables in hello Log Analytics workspace.</span></span>  <span data-ttu-id="d9736-138">Documentazione per ogni origine dati e la soluzione include hello nome del tipo di dati hello che crea e una descrizione di ciascuna delle relative proprietà.</span><span class="sxs-lookup"><span data-stu-id="d9736-138">Documentation for each data source and solution includes hello name of hello data type that it creates and a description of each of its properties.</span></span>     <span data-ttu-id="d9736-139">Molte query saranno necessari solo i dati dalle tabelle di un singolo, ma altri utenti possono utilizzare un'ampia gamma di opzioni tooinclude dati da più tabelle.</span><span class="sxs-lookup"><span data-stu-id="d9736-139">Many queries will only require data from a single tables, but others may use a variety of options tooinclude data from multiple tables.</span></span>

![Tabelle](media/log-analytics-log-search-new/queries-tables.png)


## <a name="writing-a-query"></a><span data-ttu-id="d9736-141">Scrittura di una query</span><span class="sxs-lookup"><span data-stu-id="d9736-141">Writing a query</span></span>
<span data-ttu-id="d9736-142">Hello nucleo del log delle ricerche nel Log Analitica è [un linguaggio di query completo](https://docs.loganalytics.io/) che consente di recuperare e analizzare dati dal repository hello in diversi modi.</span><span class="sxs-lookup"><span data-stu-id="d9736-142">At hello core of log searches in Log Analytics is [an extensive query language](https://docs.loganalytics.io/) that lets you retrieve and analyze data from hello repository in a variety of ways.</span></span>  <span data-ttu-id="d9736-143">Si tratta dello stesso linguaggio di query usato per [Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="d9736-143">This same query language is used for [Application Insights](../application-insights/app-insights-analytics.md).</span></span>  <span data-ttu-id="d9736-144">Apprendere come toowrite una query è critica toocreating ricerche nei log nel Log Analitica.</span><span class="sxs-lookup"><span data-stu-id="d9736-144">Learning how toowrite a query is critical toocreating log searches in Log Analytics.</span></span>  <span data-ttu-id="d9736-145">In genere si inizierà con query di base e quindi lo stato di avanzamento toouse più funzioni avanzate come esigenze diventano più complessi.</span><span class="sxs-lookup"><span data-stu-id="d9736-145">You'll typically start with basic queries and then progress toouse more advanced functions as your requirements become more complex.</span></span>

<span data-ttu-id="d9736-146">struttura di base di una query Hello è una tabella di origine seguita da una serie di operatori separati da un carattere barra verticale `|`.</span><span class="sxs-lookup"><span data-stu-id="d9736-146">hello basic structure of a query is a source table followed by a series of operators separated by a pipe character `|`.</span></span>  <span data-ttu-id="d9736-147">È possibile concatenare i dati di più operatori toorefine hello ed eseguire funzioni avanzate.</span><span class="sxs-lookup"><span data-stu-id="d9736-147">You can chain together multiple operators toorefine hello data and perform advanced functions.</span></span>

<span data-ttu-id="d9736-148">Si supponga, ad esempio, che si desiderava toofind hello prime dieci computer con hello la maggior parte degli eventi di errore su hello giorno precedente.</span><span class="sxs-lookup"><span data-stu-id="d9736-148">For example, suppose you wanted toofind hello top ten computers with hello most error events over hello past day.</span></span>

    Event
    | where (EventLevelName == "Error")
    | where (TimeGenerated > ago(1days))
    | summarize ErrorCount = count() by Computer
    | top 10 by ErrorCount desc

<span data-ttu-id="d9736-149">O forse si desidera toofind computer che non hanno avuto un heartbeat nell'ultimo giorno hello.</span><span class="sxs-lookup"><span data-stu-id="d9736-149">Or maybe you want toofind computers that haven't had a heartbeat in hello last day.</span></span>

    Heartbeat
    | where TimeGenerated > ago(7d)
    | summarize max(TimeGenerated) by Computer
    | where max_TimeGenerated < ago(1d)  

<span data-ttu-id="d9736-150">Su un grafico a linee con utilizzo del processore hello per ogni computer dall'ultima settimana?</span><span class="sxs-lookup"><span data-stu-id="d9736-150">How about a line chart with hello processor utilization for each computer from last week?</span></span>

    Perf
    | where ObjectName == "Processor" and CounterName == "% Processor Time"
    | where TimeGenerated  between (startofweek(ago(7d)) .. endofweek(ago(7d)) )
    | summarize avg(CounterValue) by Computer, bin(TimeGenerated, 5min)
    | render timechart    

<span data-ttu-id="d9736-151">È possibile visualizzare gli esempi rapidi che indipendentemente dal tipo di hello di dati che si sta lavorando, hello di struttura di query hello è simile.</span><span class="sxs-lookup"><span data-stu-id="d9736-151">You can see from these quick samples that regardless of hello kind of data that you're working with, hello structure of hello query is similar.</span></span>  <span data-ttu-id="d9736-152">È possibile suddividerla in passaggi distinti in cui i dati risultanti di hello da un comando viene inviati tramite comando successivo di hello pipeline toohello.</span><span class="sxs-lookup"><span data-stu-id="d9736-152">You can break it down into distinct steps where hello resulting data from one command is sent through hello pipeline toohello next command.</span></span>

<span data-ttu-id="d9736-153">Per una documentazione completa sul linguaggio di query Azure Log Analitica hello inclusi riferimenti al linguaggio ed esercitazioni, vedere hello [la documentazione del linguaggio di query Azure Log Analitica](https://docs.loganalytics.io/).</span><span class="sxs-lookup"><span data-stu-id="d9736-153">For complete documentation on hello Azure Log Analytics query language including tutorials and language reference, see hello [Azure Log Analytics query language documentation](https://docs.loganalytics.io/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d9736-154">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="d9736-154">Next steps</span></span>

- <span data-ttu-id="d9736-155">Informazioni su hello [portali utilizzare toocreate e ricerche nei log di modifica](log-analytics-log-search-portals.md).</span><span class="sxs-lookup"><span data-stu-id="d9736-155">Learn about hello [portals that you use toocreate and edit log searches](log-analytics-log-search-portals.md).</span></span>
- <span data-ttu-id="d9736-156">Estrarre un [esercitazione sulla scrittura di query](https://go.microsoft.com/fwlink/?linkid=856078) utilizzando il nuovo linguaggio di query hello.</span><span class="sxs-lookup"><span data-stu-id="d9736-156">Check out a [tutorial on writing queries](https://go.microsoft.com/fwlink/?linkid=856078) using hello new query language.</span></span>
