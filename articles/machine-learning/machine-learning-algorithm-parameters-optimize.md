---
title: Ottimizzare gli algoritmi in Azure Machine Learning | Documentazione Microsoft
description: Viene illustrato come scegliere il set di parametri ottimale per un algoritmo in Azure Machine Learning.
services: machine-learning
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 6717e30e-b8d8-4cc1-ad0b-1d4727928d32
ms.service: machine-learning
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/29/2017
ms.author: bradsev
ms.openlocfilehash: b3be7f31ac31c656744fb809e3972af0ac4ad4f1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="choose-parameters-to-optimize-your-algorithms-in-azure-machine-learning"></a><span data-ttu-id="50c9f-103">Scegliere i parametri per ottimizzare gli algoritmi in Azure Machine Learning</span><span class="sxs-lookup"><span data-stu-id="50c9f-103">Choose parameters to optimize your algorithms in Azure Machine Learning</span></span>
<span data-ttu-id="50c9f-104">In questo argomento viene descritto come scegliere il set di iperparametri corretto per un algoritmo in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="50c9f-104">This topic describes how to choose the right hyperparameter set for an algorithm in Azure Machine Learning.</span></span> <span data-ttu-id="50c9f-105">Per la maggior parte degli algoritmi di Machine Learning è necessario impostare i parametri.</span><span class="sxs-lookup"><span data-stu-id="50c9f-105">Most machine learning algorithms have parameters to set.</span></span> <span data-ttu-id="50c9f-106">Quando si esegue il training di un modello, è necessario specificare valori per questi parametri.</span><span class="sxs-lookup"><span data-stu-id="50c9f-106">When you train a model, you need to provide values for those parameters.</span></span> <span data-ttu-id="50c9f-107">L'efficacia del modello di cui è stato eseguito il training dipende dai parametri scelti per il modello.</span><span class="sxs-lookup"><span data-stu-id="50c9f-107">The efficacy of the trained model depends on the model parameters that you choose.</span></span> <span data-ttu-id="50c9f-108">Il processo per trovare il set ottimale di parametri è noto come *selezione del modello*.</span><span class="sxs-lookup"><span data-stu-id="50c9f-108">The process of finding the optimal set of parameters is known as *model selection*.</span></span>

[!INCLUDE [machine-learning-free-trial](../../includes/machine-learning-free-trial.md)]

<span data-ttu-id="50c9f-109">Ci sono vari modi per selezionare un modello.</span><span class="sxs-lookup"><span data-stu-id="50c9f-109">There are various ways to do model selection.</span></span> <span data-ttu-id="50c9f-110">In Machine Learning, la convalida incrociata è uno dei metodi più diffusi per la selezione del modello ed è il meccanismo di selezione del modello predefinito in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="50c9f-110">In machine learning, cross-validation is one of the most widely used methods for model selection, and it is the default model selection mechanism in Azure Machine Learning.</span></span> <span data-ttu-id="50c9f-111">Poiché Azure Machine Learning supporta R e Python, è sempre possibile implementare i relativi meccanismi di selezione del modello tramite R o Python.</span><span class="sxs-lookup"><span data-stu-id="50c9f-111">Because Azure Machine Learning supports both R and Python, you can always implement their own model selection mechanisms by using either R or Python.</span></span>

<span data-ttu-id="50c9f-112">Il processo per trovare il migliore set di parametri è costituito da quattro passaggi:</span><span class="sxs-lookup"><span data-stu-id="50c9f-112">There are four steps in the process of finding the best parameter set:</span></span>

1. <span data-ttu-id="50c9f-113">**Definire lo spazio del parametro**: prima decidere i valori esatti dei parametri che si vogliono prendere in considerazione per l'algoritmo.</span><span class="sxs-lookup"><span data-stu-id="50c9f-113">**Define the parameter space**: For the algorithm, first decide the exact parameter values you want to consider.</span></span>
2. <span data-ttu-id="50c9f-114">**Definire le impostazioni di convalida incrociata**: decidere come scegliere le riduzioni di convalida incrociata per il set di dati.</span><span class="sxs-lookup"><span data-stu-id="50c9f-114">**Define the cross-validation settings**: Decide how to choose cross-validation folds for the dataset.</span></span>
3. <span data-ttu-id="50c9f-115">**Definire la metrica**: decidere quale metrica usare per determinare il migliore set di parametri, ad esempio, l'accuratezza, l'errore quadratico medio, la precisione, il richiamo, o il punteggio f.</span><span class="sxs-lookup"><span data-stu-id="50c9f-115">**Define the metric**: Decide what metric to use for determining the best set of parameters, such as accuracy, root mean squared error, precision, recall, or f-score.</span></span>
4. <span data-ttu-id="50c9f-116">**Eseguire il training, valutare e confrontare**: per ogni combinazione univoca dei valori dei parametri, la convalida incrociata viene eseguita e basata sulla metrica di errore definita dall'utente.</span><span class="sxs-lookup"><span data-stu-id="50c9f-116">**Train, evaluate, and compare**: For each unique combination of the parameter values, cross-validation is carried out by and based on the error metric you define.</span></span> <span data-ttu-id="50c9f-117">Dopo valutazione e confronto, è possibile scegliere il modello con le prestazioni migliori.</span><span class="sxs-lookup"><span data-stu-id="50c9f-117">After evaluation and comparison, you can choose the best-performing model.</span></span>

<span data-ttu-id="50c9f-118">Le figure seguenti illustrano come raggiungere l'obiettivo in Azure Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="50c9f-118">The following image illustrates shows how this can be achieved in Azure Machine Learning.</span></span>

![Trovare il miglior set di parametri](./media/machine-learning-algorithm-parameters-optimize/fig1.png)

## <a name="define-the-parameter-space"></a><span data-ttu-id="50c9f-120">Definire lo spazio dei parametri</span><span class="sxs-lookup"><span data-stu-id="50c9f-120">Define the parameter space</span></span>
<span data-ttu-id="50c9f-121">Il set di parametri può essere definito nella fase di inizializzazione del modello.</span><span class="sxs-lookup"><span data-stu-id="50c9f-121">You can define the parameter set at the model initialization step.</span></span> <span data-ttu-id="50c9f-122">Il pannello dei parametri di tutti gli algoritmi di Machine Learning presenta due modalità di training: *parametro singolo* e *intervallo di parametri*.</span><span class="sxs-lookup"><span data-stu-id="50c9f-122">The parameter pane of all machine learning algorithms has two trainer modes: *Single Parameter* and *Parameter Range*.</span></span> <span data-ttu-id="50c9f-123">Scegliere la modalità intervallo di parametri.</span><span class="sxs-lookup"><span data-stu-id="50c9f-123">Choose Parameter Range mode.</span></span> <span data-ttu-id="50c9f-124">Nella modalità intervallo di parametri è possibile immettere più valori per ogni parametro.</span><span class="sxs-lookup"><span data-stu-id="50c9f-124">In Parameter Range mode, you can enter multiple values for each parameter.</span></span> <span data-ttu-id="50c9f-125">Nella casella di testo è possibile immettere valori delimitati da virgole.</span><span class="sxs-lookup"><span data-stu-id="50c9f-125">You can enter comma-separated values in the text box.</span></span>

![Albero delle decisioni a due classi con innalzamento, parametro singolo](./media/machine-learning-algorithm-parameters-optimize/fig2.png)

 <span data-ttu-id="50c9f-127">In alternativa è possibile definire il punto massimo e minimo della griglia e il numero totale dei punti da generare con **Use Range Builder**.</span><span class="sxs-lookup"><span data-stu-id="50c9f-127">Alternately, you can define the maximum and minimum points of the grid and the total number of points to be generated with **Use Range Builder**.</span></span> <span data-ttu-id="50c9f-128">Per impostazione predefinita, i valori dei parametri vengono generati su una scala lineare.</span><span class="sxs-lookup"><span data-stu-id="50c9f-128">By default, the parameter values are generated on a linear scale.</span></span> <span data-ttu-id="50c9f-129">Ma se è selezionata l'opzione **Scala logaritmica**, i valori vengono generati in scala logaritmica (ovvero, il rapporto dei punti adiacenti è costante invece di rappresentare la loro differenza).</span><span class="sxs-lookup"><span data-stu-id="50c9f-129">But if **Log Scale** is checked, the values are generated in the log scale (that is, the ratio of the adjacent points is constant instead of their difference).</span></span> <span data-ttu-id="50c9f-130">Per i parametri Integer, è possibile definire un intervallo tramite un segno meno.</span><span class="sxs-lookup"><span data-stu-id="50c9f-130">For integer parameters, you can define a range by using a hyphen.</span></span> <span data-ttu-id="50c9f-131">Ad esempio, "1-10" indica che tutti i numeri interi compresi tra 1 e 10 (entrambi compresi) costituiscono il set di parametri.</span><span class="sxs-lookup"><span data-stu-id="50c9f-131">For example, “1-10” means that all integers between 1 and 10 (both inclusive) form the parameter set.</span></span> <span data-ttu-id="50c9f-132">È supportata anche una modalità mista.</span><span class="sxs-lookup"><span data-stu-id="50c9f-132">A mixed mode is also supported.</span></span> <span data-ttu-id="50c9f-133">Ad esempio, il set di parametri "1-10, 20, 50" include numeri interi da 1 a 10, 20 e 50.</span><span class="sxs-lookup"><span data-stu-id="50c9f-133">For example, the parameter set “1-10, 20, 50” would include integers 1-10, 20, and 50.</span></span>

![Albero delle decisioni a due classi con innalzamento, intervallo di parametri](./media/machine-learning-algorithm-parameters-optimize/fig3.png)

## <a name="define-cross-validation-folds"></a><span data-ttu-id="50c9f-135">Definire le riduzioni di convalida incrociata</span><span class="sxs-lookup"><span data-stu-id="50c9f-135">Define cross-validation folds</span></span>
<span data-ttu-id="50c9f-136">Il modulo [Partition and Sample][partition-and-sample] (Partizionamento e campionamento) può essere usato per assegnare riduzioni ai dati in modo casuale.</span><span class="sxs-lookup"><span data-stu-id="50c9f-136">The [Partition and Sample][partition-and-sample] module can be used to randomly assign folds to the data.</span></span> <span data-ttu-id="50c9f-137">Nella configurazione di esempio seguente del modulo, vengono definite cinque riduzioni e viene assegnato in modo casuale un numero di riduzione alle istanze dell'esempio.</span><span class="sxs-lookup"><span data-stu-id="50c9f-137">In the following sample configuration for the module, we define five folds and randomly assign a fold number to the sample instances.</span></span>

![Partition and sample (Partizione ed esempio)](./media/machine-learning-algorithm-parameters-optimize/fig4.png)

## <a name="define-the-metric"></a><span data-ttu-id="50c9f-139">Definire la metrica</span><span class="sxs-lookup"><span data-stu-id="50c9f-139">Define the metric</span></span>
<span data-ttu-id="50c9f-140">Il modulo [Tune Model Hyperparameters][tune-model-hyperparameters] fornisce supporto per scegliere in modo empirico il miglior set di parametri per un algoritmo e un set di dati specifici.</span><span class="sxs-lookup"><span data-stu-id="50c9f-140">The [Tune Model Hyperparameters][tune-model-hyperparameters] module provides support for empirically choosing the best set of parameters for a given algorithm and dataset.</span></span> <span data-ttu-id="50c9f-141">Oltre ad altre informazioni sul training del modello, il riquadro **Properties** (Proprietà) di questo modulo include la metrica per determinare il miglior set di parametri.</span><span class="sxs-lookup"><span data-stu-id="50c9f-141">In addition to other information regarding training the model, the **Properties** pane of this module includes the metric for determining the best parameter set.</span></span> <span data-ttu-id="50c9f-142">E ha due elenchi a discesa rispettivamente per gli algoritmi di classificazione e di regressione.</span><span class="sxs-lookup"><span data-stu-id="50c9f-142">It has two different drop-down list boxes for classification and regression algorithms, respectively.</span></span> <span data-ttu-id="50c9f-143">Se l'algoritmo in esame è un algoritmo di classificazione, la metrica di regressione viene ignorata e viceversa.</span><span class="sxs-lookup"><span data-stu-id="50c9f-143">If the algorithm under consideration is a classification algorithm, the regression metric is ignored and vice versa.</span></span> <span data-ttu-id="50c9f-144">In questo esempio specifico la metrica è **Accuracy** (Accuratezza).</span><span class="sxs-lookup"><span data-stu-id="50c9f-144">In this specific example, the metric is **Accuracy**.</span></span>   

![Organizzare i parametri](./media/machine-learning-algorithm-parameters-optimize/fig5.png)

## <a name="train-evaluate-and-compare"></a><span data-ttu-id="50c9f-146">Eseguire il training, valutare e confrontare</span><span class="sxs-lookup"><span data-stu-id="50c9f-146">Train, evaluate, and compare</span></span>
<span data-ttu-id="50c9f-147">Lo stesso modulo [Tune Model Hyperparameters][tune-model-hyperparameters] esegue il training di tutti i modelli corrispondenti al set di parametri, valuta diverse metriche e crea il miglior modello in base alla metrica scelta.</span><span class="sxs-lookup"><span data-stu-id="50c9f-147">The same [Tune Model Hyperparameters][tune-model-hyperparameters] module trains all the models that correspond to the parameter set, evaluates various metrics, and then creates the best-trained model based on the metric you choose.</span></span> <span data-ttu-id="50c9f-148">Tale modulo dispone di due input obbligatori:</span><span class="sxs-lookup"><span data-stu-id="50c9f-148">This module has two mandatory inputs:</span></span>

* <span data-ttu-id="50c9f-149">Allievo non formato</span><span class="sxs-lookup"><span data-stu-id="50c9f-149">The untrained learner</span></span>
* <span data-ttu-id="50c9f-150">Set di dati</span><span class="sxs-lookup"><span data-stu-id="50c9f-150">The dataset</span></span>

<span data-ttu-id="50c9f-151">Il modulo contiene anche un set di dati di input facoltativo.</span><span class="sxs-lookup"><span data-stu-id="50c9f-151">The module also has an optional dataset input.</span></span> <span data-ttu-id="50c9f-152">Connettere il set di dati con le informazioni di riduzione all'input del set di dati obbligatorio.</span><span class="sxs-lookup"><span data-stu-id="50c9f-152">Connect the dataset with fold information to the mandatory dataset input.</span></span> <span data-ttu-id="50c9f-153">Se al set di dati non vengono assegnate informazioni di riduzione, per impostazione predefinita viene eseguita automaticamente una convalida incrociata a 10 riduzioni.</span><span class="sxs-lookup"><span data-stu-id="50c9f-153">If the dataset is not assigned any fold information, then a 10-fold cross-validation is automatically executed by default.</span></span> <span data-ttu-id="50c9f-154">Se non viene eseguita l'assegnazione di riduzione e viene specificato un set di dati di convalida nella porta del set di dati facoltativo, viene scelta la modalità di test del training e viene usato il primo set di dati per eseguire il training del modello per ogni combinazione di parametri.</span><span class="sxs-lookup"><span data-stu-id="50c9f-154">If the fold assignment is not done and a validation dataset is provided at the optional dataset port, then a train-test mode is chosen and the first dataset is used to train the model for each parameter combination.</span></span>

![Classificatore dell'albero delle decisioni con innalzamento](./media/machine-learning-algorithm-parameters-optimize/fig6a.png)

<span data-ttu-id="50c9f-156">Il modello viene quindi valutato sul set di dati di convalida.</span><span class="sxs-lookup"><span data-stu-id="50c9f-156">The model is then evaluated on the validation dataset.</span></span> <span data-ttu-id="50c9f-157">La porta di output sinistra del modulo visualizza metriche diverse come funzioni dei valori del parametro.</span><span class="sxs-lookup"><span data-stu-id="50c9f-157">The left output port of the module shows different metrics as functions of parameter values.</span></span> <span data-ttu-id="50c9f-158">La porta di output destra offre il modello di cui è stato eseguito il training che corrisponde al modello con le migliori prestazioni in base alla metrica scelta (in questo caso **Accuracy**).</span><span class="sxs-lookup"><span data-stu-id="50c9f-158">The right output port gives the trained model that corresponds to the best-performing model according to the chosen metric (**Accuracy** in this case).</span></span>  

![Set di dati di convalida](./media/machine-learning-algorithm-parameters-optimize/fig6b.png)

<span data-ttu-id="50c9f-160">È possibile vedere esattamente i parametri scelti visualizzando la porta di output destra.</span><span class="sxs-lookup"><span data-stu-id="50c9f-160">You can see the exact parameters chosen by visualizing the right output port.</span></span> <span data-ttu-id="50c9f-161">Questo modello può essere utilizzato per la valutazione in un set di test o in un servizio web operativo dopo il salvataggio come modello per il training.</span><span class="sxs-lookup"><span data-stu-id="50c9f-161">This model can be used in scoring a test set or in an operationalized web service after saving as a trained model.</span></span>

<!-- Module References -->
[partition-and-sample]: https://msdn.microsoft.com/library/azure/a8726e34-1b3e-4515-b59a-3e4a475654b8/
[tune-model-hyperparameters]: https://msdn.microsoft.com/library/azure/038d91b6-c2f2-42a1-9215-1f2c20ed1b40/
