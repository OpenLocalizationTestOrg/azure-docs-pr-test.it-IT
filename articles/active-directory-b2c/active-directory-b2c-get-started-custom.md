---
title: 'Azure Active Directory B2C: introduzione ai criteri personalizzati | Microsoft Docs'
description: "La modalità di avvio tooget con i criteri personalizzati di Azure Active Directory B2C"
services: active-directory-b2c
documentationcenter: 
author: rojasja
manager: krassk
editor: rojasja
ms.assetid: 658c597e-3787-465e-b377-26aebc94e46d
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 08/04/2017
ms.author: joroja;parahk;gsacavdm
ms.openlocfilehash: 5ee133806395cddf18682769a6cad149889d82d1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-b2c-get-started-with-custom-policies"></a><span data-ttu-id="598d6-103">Azure Active Directory B2C: introduzione ai criteri personalizzati</span><span class="sxs-lookup"><span data-stu-id="598d6-103">Azure Active Directory B2C: Get started with custom policies</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

<span data-ttu-id="598d6-104">Dopo aver completato i passaggi di hello in questo articolo, il criterio personalizzato supporterà "LocalAccount" iscrizione o accesso tramite un indirizzo di posta elettronica e una password.</span><span class="sxs-lookup"><span data-stu-id="598d6-104">After you complete hello steps in this article, your custom policy will support "local account" sign-up or sign-in via an email address and password.</span></span> <span data-ttu-id="598d6-105">Si preparerà anche l'ambiente per l'aggiunta di provider di identità (ad esempio Facebook o Azure Active Directory).</span><span class="sxs-lookup"><span data-stu-id="598d6-105">You will also prepare your environment for adding identity providers (like Facebook or Azure Active Directory).</span></span> <span data-ttu-id="598d6-106">Si consiglia di toocomplete questi passaggi prima della lettura su altri utilizzi di hello Azure Active Directory (Azure AD) B2C identità esperienza Framework.</span><span class="sxs-lookup"><span data-stu-id="598d6-106">We encourage you toocomplete these steps before reading about other uses of hello Azure Active Directory (Azure AD) B2C Identity Experience Framework.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="598d6-107">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="598d6-107">Prerequisites</span></span>

<span data-ttu-id="598d6-108">Prima di procedere, assicurarsi di disporre di un tenant di Azure AD B2C, che è un contenitore per tutti gli utenti, le app, i criteri e altro ancora.</span><span class="sxs-lookup"><span data-stu-id="598d6-108">Before proceeding, ensure that you have an Azure AD B2C tenant, which is a container for all your users, apps, policies, and more.</span></span> <span data-ttu-id="598d6-109">Se si non è ancora disponibile, è necessario troppo[creare un tenant di Azure Active Directory B2C](active-directory-b2c-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="598d6-109">If you don't have one already, you need too[create an Azure AD B2C tenant](active-directory-b2c-get-started.md).</span></span> <span data-ttu-id="598d6-110">È fortemente incoraggiare tutti gli sviluppatori toocomplete hello procedure dettagliate di Azure Active Directory B2C criteri predefiniti e configurare le applicazioni con i criteri predefiniti prima di procedere.</span><span class="sxs-lookup"><span data-stu-id="598d6-110">We strongly encourage all developers toocomplete hello Azure AD B2C built-in policy walkthroughs and configure their applications with built-in policies before proceeding.</span></span> <span data-ttu-id="598d6-111">Le applicazioni funziona con entrambi i tipi di criteri di una volta apportata un modifica secondaria toohello criteri nome tooinvoke hello criteri personalizzati.</span><span class="sxs-lookup"><span data-stu-id="598d6-111">Your applications will work with both types of policies once you make a minor change toohello policy name tooinvoke hello custom policy.</span></span>

>[!NOTE]
><span data-ttu-id="598d6-112">tooaccess Modifica criterio personalizzato, è necessario un tenant tooyour collegato la sottoscrizione di Azure valida.</span><span class="sxs-lookup"><span data-stu-id="598d6-112">tooaccess custom policy editing, you need a valid Azure subscription linked tooyour tenant.</span></span> <span data-ttu-id="598d6-113">Se non hai [collegato il tooan tenant di Azure Active Directory B2C sottoscrizione di Azure](active-directory-b2c-how-to-enable-billing.md) o la sottoscrizione di Azure è disabilitata, hello identità esperienza Framework pulsante non sarà disponibile.</span><span class="sxs-lookup"><span data-stu-id="598d6-113">If you haven't [linked your Azure AD B2C tenant tooan Azure subscription](active-directory-b2c-how-to-enable-billing.md) or your Azure subscription is disabled, hello Identity Experience Framework button won't be available.</span></span>

## <a name="add-signing-and-encryption-keys-tooyour-b2c-tenant-for-use-by-custom-policies"></a><span data-ttu-id="598d6-114">Aggiungere la firma e crittografia tenant tooyour B2C chiavi per l'utilizzo mediante criteri personalizzati</span><span class="sxs-lookup"><span data-stu-id="598d6-114">Add signing and encryption keys tooyour B2C tenant for use by custom policies</span></span>

1. <span data-ttu-id="598d6-115">Aprire hello **identità esperienza Framework** pannello nelle impostazioni del tenant di Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="598d6-115">Open hello **Identity Experience Framework** blade in your Azure AD B2C tenant settings.</span></span>
2. <span data-ttu-id="598d6-116">Selezionare **chiavi dei criteri** chiavi hello tooview disponibili nel tenant.</span><span class="sxs-lookup"><span data-stu-id="598d6-116">Select **Policy Keys** tooview hello keys available in your tenant.</span></span>
3. <span data-ttu-id="598d6-117">Se non esiste, creare B2C_1A_TokenSigningKeyContainer:</span><span class="sxs-lookup"><span data-stu-id="598d6-117">Create B2C_1A_TokenSigningKeyContainer if it does not exist:</span></span><br>
    <span data-ttu-id="598d6-118">a.</span><span class="sxs-lookup"><span data-stu-id="598d6-118">a.</span></span> <span data-ttu-id="598d6-119">Selezionare **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="598d6-119">Select **Add**.</span></span> <br>
    <span data-ttu-id="598d6-120">b.</span><span class="sxs-lookup"><span data-stu-id="598d6-120">b.</span></span> <span data-ttu-id="598d6-121">Selezionare **Genera**.</span><span class="sxs-lookup"><span data-stu-id="598d6-121">Select **Generate**.</span></span><br>
    <span data-ttu-id="598d6-122">c.</span><span class="sxs-lookup"><span data-stu-id="598d6-122">c.</span></span> <span data-ttu-id="598d6-123">Per **Nome** usare `TokenSigningKeyContainer`.</span><span class="sxs-lookup"><span data-stu-id="598d6-123">For **Name**, use `TokenSigningKeyContainer`.</span></span> <br> 
    <span data-ttu-id="598d6-124">prefisso Hello `B2C_1A_` potrebbero essere aggiunti automaticamente.</span><span class="sxs-lookup"><span data-stu-id="598d6-124">hello prefix `B2C_1A_` might be added automatically.</span></span><br>
    <span data-ttu-id="598d6-125">d.</span><span class="sxs-lookup"><span data-stu-id="598d6-125">d.</span></span> <span data-ttu-id="598d6-126">For **Tipo di chiave** usare **RSA**.</span><span class="sxs-lookup"><span data-stu-id="598d6-126">For **Key type**, use **RSA**.</span></span><br>
    <span data-ttu-id="598d6-127">e.</span><span class="sxs-lookup"><span data-stu-id="598d6-127">e.</span></span> <span data-ttu-id="598d6-128">Per **date**, utilizzare quelli predefiniti hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-128">For **Dates**, use hello defaults.</span></span> <br>
    <span data-ttu-id="598d6-129">f.</span><span class="sxs-lookup"><span data-stu-id="598d6-129">f.</span></span> <span data-ttu-id="598d6-130">Per **Uso chiave** usare **Firma**.</span><span class="sxs-lookup"><span data-stu-id="598d6-130">For **Key usage**, use **Signature**.</span></span><br>
    <span data-ttu-id="598d6-131">g.</span><span class="sxs-lookup"><span data-stu-id="598d6-131">g.</span></span> <span data-ttu-id="598d6-132">Selezionare **Crea**.</span><span class="sxs-lookup"><span data-stu-id="598d6-132">Select **Create**.</span></span><br>
4. <span data-ttu-id="598d6-133">Se non esiste, creare B2C_1A_TokenEncryptionKeyContainer:</span><span class="sxs-lookup"><span data-stu-id="598d6-133">Create B2C_1A_TokenEncryptionKeyContainer if it does not exist:</span></span><br>
 <span data-ttu-id="598d6-134">a.</span><span class="sxs-lookup"><span data-stu-id="598d6-134">a.</span></span> <span data-ttu-id="598d6-135">Selezionare **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="598d6-135">Select **Add**.</span></span><br>
 <span data-ttu-id="598d6-136">b.</span><span class="sxs-lookup"><span data-stu-id="598d6-136">b.</span></span> <span data-ttu-id="598d6-137">Selezionare **Genera**.</span><span class="sxs-lookup"><span data-stu-id="598d6-137">Select **Generate**.</span></span><br>
 <span data-ttu-id="598d6-138">c.</span><span class="sxs-lookup"><span data-stu-id="598d6-138">c.</span></span> <span data-ttu-id="598d6-139">Per **Nome** usare `TokenEncryptionKeyContainer`.</span><span class="sxs-lookup"><span data-stu-id="598d6-139">For **Name**, use `TokenEncryptionKeyContainer`.</span></span> <br>
   <span data-ttu-id="598d6-140">prefisso Hello `B2C_1A`_ potrebbero essere aggiunti automaticamente.</span><span class="sxs-lookup"><span data-stu-id="598d6-140">hello prefix `B2C_1A`_ might be added automatically.</span></span><br>
 <span data-ttu-id="598d6-141">d.</span><span class="sxs-lookup"><span data-stu-id="598d6-141">d.</span></span> <span data-ttu-id="598d6-142">For **Tipo di chiave** usare **RSA**.</span><span class="sxs-lookup"><span data-stu-id="598d6-142">For **Key type**, use **RSA**.</span></span><br>
 <span data-ttu-id="598d6-143">e.</span><span class="sxs-lookup"><span data-stu-id="598d6-143">e.</span></span> <span data-ttu-id="598d6-144">Per **date**, utilizzare quelli predefiniti hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-144">For **Dates**, use hello defaults.</span></span><br>
 <span data-ttu-id="598d6-145">f.</span><span class="sxs-lookup"><span data-stu-id="598d6-145">f.</span></span> <span data-ttu-id="598d6-146">Per **Uso chiave** usare **Crittografia**.</span><span class="sxs-lookup"><span data-stu-id="598d6-146">For **Key usage**, use **Encryption**.</span></span><br>
 <span data-ttu-id="598d6-147">g.</span><span class="sxs-lookup"><span data-stu-id="598d6-147">g.</span></span> <span data-ttu-id="598d6-148">Selezionare **Crea**.</span><span class="sxs-lookup"><span data-stu-id="598d6-148">Select **Create**.</span></span><br>
5. <span data-ttu-id="598d6-149">Creare B2C_1A_FacebookSecret.</span><span class="sxs-lookup"><span data-stu-id="598d6-149">Create B2C_1A_FacebookSecret.</span></span> <br>
<span data-ttu-id="598d6-150">Se si dispone già di un segreto dell'applicazione Facebook, aggiungerlo come tenant tooyour chiave dei criteri.</span><span class="sxs-lookup"><span data-stu-id="598d6-150">If you already have a Facebook application secret, add it as a policy key tooyour tenant.</span></span> <span data-ttu-id="598d6-151">In caso contrario, è necessario creare chiave hello con un valore segnaposto, in modo che i criteri di convalida.</span><span class="sxs-lookup"><span data-stu-id="598d6-151">Otherwise, you must create hello key with a placeholder value so that your policies pass validation.</span></span><br>
 <span data-ttu-id="598d6-152">a.</span><span class="sxs-lookup"><span data-stu-id="598d6-152">a.</span></span> <span data-ttu-id="598d6-153">Selezionare **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="598d6-153">Select **Add**.</span></span><br>
 <span data-ttu-id="598d6-154">b.</span><span class="sxs-lookup"><span data-stu-id="598d6-154">b.</span></span> <span data-ttu-id="598d6-155">Per **Opzioni** usare **Manuale**.</span><span class="sxs-lookup"><span data-stu-id="598d6-155">For **Options**, use **Manual**.</span></span><br>
 <span data-ttu-id="598d6-156">c.</span><span class="sxs-lookup"><span data-stu-id="598d6-156">c.</span></span> <span data-ttu-id="598d6-157">Per **Nome** usare `FacebookSecret`.</span><span class="sxs-lookup"><span data-stu-id="598d6-157">For **Name**, use `FacebookSecret`.</span></span> <br>
 <span data-ttu-id="598d6-158">prefisso Hello `B2C_1A_` potrebbero essere aggiunti automaticamente.</span><span class="sxs-lookup"><span data-stu-id="598d6-158">hello prefix `B2C_1A_` might be added automatically.</span></span><br>
 <span data-ttu-id="598d6-159">d.</span><span class="sxs-lookup"><span data-stu-id="598d6-159">d.</span></span> <span data-ttu-id="598d6-160">In hello **Secret** , immettere il FacebookSecret da developers.facebook.com o `0` come segnaposto.</span><span class="sxs-lookup"><span data-stu-id="598d6-160">In hello **Secret** box, enter your FacebookSecret from developers.facebook.com or `0` as a placeholder.</span></span> <span data-ttu-id="598d6-161">*Non si tratta dell'ID dell'app Facebook*.</span><span class="sxs-lookup"><span data-stu-id="598d6-161">*This is not your Facebook app ID.*</span></span> <br>
 <span data-ttu-id="598d6-162">e.</span><span class="sxs-lookup"><span data-stu-id="598d6-162">e.</span></span> <span data-ttu-id="598d6-163">Per **Uso chiave** usare **Firma**.</span><span class="sxs-lookup"><span data-stu-id="598d6-163">For **Key usage**, use **Signature**.</span></span> <br>
 <span data-ttu-id="598d6-164">f.</span><span class="sxs-lookup"><span data-stu-id="598d6-164">f.</span></span> <span data-ttu-id="598d6-165">Selezionare **Crea** e confermare la creazione.</span><span class="sxs-lookup"><span data-stu-id="598d6-165">Select **Create** and confirm creation.</span></span>

## <a name="register-identity-experience-framework-applications"></a><span data-ttu-id="598d6-166">Registrare le applicazioni del framework dell'esperienza di gestione delle identità</span><span class="sxs-lookup"><span data-stu-id="598d6-166">Register Identity Experience Framework applications</span></span>

<span data-ttu-id="598d6-167">Azure Active Directory B2C richiede tooregister due applicazioni aggiuntive che vengono utilizzate da hello motore toosign backup ed eseguire l'accesso agli utenti.</span><span class="sxs-lookup"><span data-stu-id="598d6-167">Azure AD B2C requires you tooregister two extra applications that are used by hello engine toosign up and sign in users.</span></span>

>[!NOTE]
><span data-ttu-id="598d6-168">È necessario creare due applicazioni che abilita Accedi con account locali: IdentityExperienceFramework (un'app web) e ProxyIdentityExperienceFramework (un'applicazione nativa) con delega autorizzazioni app IdentityExperienceFramework hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-168">You must create two applications that enable sign-in using local accounts: IdentityExperienceFramework (a web app) and ProxyIdentityExperienceFramework (a native app) with delegated permission from hello IdentityExperienceFramework app.</span></span> <span data-ttu-id="598d6-169">Gli account locali esistono solo nel tenant.</span><span class="sxs-lookup"><span data-stu-id="598d6-169">Local accounts exist only in your tenant.</span></span> <span data-ttu-id="598d6-170">Gli utenti iscriversi con un tooaccess combinazione/password dell'indirizzo di posta elettronica univoco applicazioni tenant registrato.</span><span class="sxs-lookup"><span data-stu-id="598d6-170">Your users sign up with a unique email address/password combination tooaccess your tenant-registered applications.</span></span>

### <a name="create-hello-identityexperienceframework-application"></a><span data-ttu-id="598d6-171">Creare un'applicazione hello IdentityExperienceFramework</span><span class="sxs-lookup"><span data-stu-id="598d6-171">Create hello IdentityExperienceFramework application</span></span>

1. <span data-ttu-id="598d6-172">In hello [portale di Azure](https://portal.azure.com), passare in hello [contesto del tenant di Azure Active Directory B2C](active-directory-b2c-navigate-to-b2c-context.md).</span><span class="sxs-lookup"><span data-stu-id="598d6-172">In hello [Azure portal](https://portal.azure.com), switch into hello [context of your Azure AD B2C tenant](active-directory-b2c-navigate-to-b2c-context.md).</span></span>
2. <span data-ttu-id="598d6-173">Aprire hello **Azure Active Directory** blade (non hello **Azure Active Directory B2C** pannello).</span><span class="sxs-lookup"><span data-stu-id="598d6-173">Open hello **Azure Active Directory** blade (not hello **Azure AD B2C** blade).</span></span> <span data-ttu-id="598d6-174">Potrebbe essere necessario tooselect **più servizi** toofind è.</span><span class="sxs-lookup"><span data-stu-id="598d6-174">You might need tooselect **More Services** toofind it.</span></span>
3. <span data-ttu-id="598d6-175">Selezionare **Registrazioni per l'app**.</span><span class="sxs-lookup"><span data-stu-id="598d6-175">Select **App registrations**.</span></span>
4. <span data-ttu-id="598d6-176">Selezionare **Registrazione nuova applicazione**.</span><span class="sxs-lookup"><span data-stu-id="598d6-176">Select **New application registration**.</span></span>
   * <span data-ttu-id="598d6-177">Per **Nome** usare `IdentityExperienceFramework`.</span><span class="sxs-lookup"><span data-stu-id="598d6-177">For **Name**, use `IdentityExperienceFramework`.</span></span>
   * <span data-ttu-id="598d6-178">Per **Tipo di applicazione** usare **App Web/API**.</span><span class="sxs-lookup"><span data-stu-id="598d6-178">For **Application type**, use **Web app/API**.</span></span>
   * <span data-ttu-id="598d6-179">Per **URL di accesso** usare `https://login.microsoftonline.com/yourtenant.onmicrosoft.com`, dove `yourtenant` è il nome del dominio del tenant di Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="598d6-179">For **Sign-on URL**, use `https://login.microsoftonline.com/yourtenant.onmicrosoft.com`, where `yourtenant` is your Azure AD B2C tenant domain name.</span></span>
5. <span data-ttu-id="598d6-180">Selezionare **Crea**.</span><span class="sxs-lookup"><span data-stu-id="598d6-180">Select **Create**.</span></span>
6. <span data-ttu-id="598d6-181">Una volta creato, selezionare un'applicazione hello appena creato **IdentityExperienceFramework**.</span><span class="sxs-lookup"><span data-stu-id="598d6-181">Once it is created, select hello newly created application **IdentityExperienceFramework**.</span></span><br>
   * <span data-ttu-id="598d6-182">Selezionare **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="598d6-182">Select **Properties**.</span></span><br>
   * <span data-ttu-id="598d6-183">Copiare l'ID dell'applicazione hello e salvarlo per un momento successivo.</span><span class="sxs-lookup"><span data-stu-id="598d6-183">Copy hello application ID and save it for later.</span></span>

### <a name="create-hello-proxyidentityexperienceframework-application"></a><span data-ttu-id="598d6-184">Creare un'applicazione hello ProxyIdentityExperienceFramework</span><span class="sxs-lookup"><span data-stu-id="598d6-184">Create hello ProxyIdentityExperienceFramework application</span></span>

1. <span data-ttu-id="598d6-185">Selezionare **Registrazioni per l'app**.</span><span class="sxs-lookup"><span data-stu-id="598d6-185">Select **App registrations**.</span></span>
1. <span data-ttu-id="598d6-186">Selezionare **Registrazione nuova applicazione**.</span><span class="sxs-lookup"><span data-stu-id="598d6-186">Select **New application registration**.</span></span>
   * <span data-ttu-id="598d6-187">Per **Nome** usare `ProxyIdentityExperienceFramework`.</span><span class="sxs-lookup"><span data-stu-id="598d6-187">For **Name**, use `ProxyIdentityExperienceFramework`.</span></span>
   * <span data-ttu-id="598d6-188">Per **Tipo di applicazione** usare **Nativo**.</span><span class="sxs-lookup"><span data-stu-id="598d6-188">For **Application type**, use **Native**.</span></span>
   * <span data-ttu-id="598d6-189">Per **URI di reindirizzamento** usare `https://login.microsoftonline.com/yourtenant.onmicrosoft.com`, dove `yourtenant` è il tenant di Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="598d6-189">For **Redirect URI**, use `https://login.microsoftonline.com/yourtenant.onmicrosoft.com`, where `yourtenant` is your Azure AD B2C tenant.</span></span>
1. <span data-ttu-id="598d6-190">Selezionare **Crea**.</span><span class="sxs-lookup"><span data-stu-id="598d6-190">Select **Create**.</span></span>
1. <span data-ttu-id="598d6-191">Dopo che è stato creato, selezionare un'applicazione hello **ProxyIdentityExperienceFramework**.</span><span class="sxs-lookup"><span data-stu-id="598d6-191">Once it has been created, select hello application **ProxyIdentityExperienceFramework**.</span></span><br>
   * <span data-ttu-id="598d6-192">Selezionare **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="598d6-192">Select **Properties**.</span></span> <br>
   * <span data-ttu-id="598d6-193">Copiare l'ID dell'applicazione hello e salvarlo per un momento successivo.</span><span class="sxs-lookup"><span data-stu-id="598d6-193">Copy hello application ID and save it for later.</span></span>
1. <span data-ttu-id="598d6-194">Selezionare **Autorizzazioni necessarie**.</span><span class="sxs-lookup"><span data-stu-id="598d6-194">Select **Required permissions**.</span></span>
1. <span data-ttu-id="598d6-195">Selezionare **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="598d6-195">Select **Add**.</span></span>
1. <span data-ttu-id="598d6-196">Fare clic su **Selezionare un'API**.</span><span class="sxs-lookup"><span data-stu-id="598d6-196">Select **Select an API**.</span></span>
1. <span data-ttu-id="598d6-197">Ricerca per nome hello IdentityExperienceFramework.</span><span class="sxs-lookup"><span data-stu-id="598d6-197">Search for hello name IdentityExperienceFramework.</span></span> <span data-ttu-id="598d6-198">Selezionare **IdentityExperienceFramework** in hello risultati e quindi fare clic su **selezionare**.</span><span class="sxs-lookup"><span data-stu-id="598d6-198">Select **IdentityExperienceFramework** in hello results, and then click **Select**.</span></span>
1. <span data-ttu-id="598d6-199">Selezionare la casella di controllo hello troppo Avanti**accesso IdentityExperienceFramework**, quindi fare clic su **selezionare**.</span><span class="sxs-lookup"><span data-stu-id="598d6-199">Select hello check box next too**Access IdentityExperienceFramework**, and then click **Select**.</span></span>
1. <span data-ttu-id="598d6-200">Selezionare **Operazione completata**.</span><span class="sxs-lookup"><span data-stu-id="598d6-200">Select **Done**.</span></span>
1. <span data-ttu-id="598d6-201">Selezionare **Concedi autorizzazioni** e quindi confermare selezionando **Sì**.</span><span class="sxs-lookup"><span data-stu-id="598d6-201">Select **Grant Permissions**, and then confirm by selecting **Yes**.</span></span>

## <a name="download-starter-pack-and-modify-policies"></a><span data-ttu-id="598d6-202">Scaricare lo starter pack e modificare i criteri</span><span class="sxs-lookup"><span data-stu-id="598d6-202">Download starter pack and modify policies</span></span>

<span data-ttu-id="598d6-203">Criteri personalizzati sono un set di file XML che è necessario tenant di Azure Active Directory B2C tooyour toobe caricato.</span><span class="sxs-lookup"><span data-stu-id="598d6-203">Custom policies are a set of XML files that need toobe uploaded tooyour Azure AD B2C tenant.</span></span> <span data-ttu-id="598d6-204">Offriamo starter Pack tooget si lavorare rapidamente.</span><span class="sxs-lookup"><span data-stu-id="598d6-204">We provide starter packs tooget you going quickly.</span></span> <span data-ttu-id="598d6-205">Ogni pacchetto nel seguente elenco hello contiene hello più piccolo numero di profili di tecnici e i percorsi utente necessari scenari hello tooachieve descritti:</span><span class="sxs-lookup"><span data-stu-id="598d6-205">Each starter pack in hello following list contains hello smallest number of technical profiles and user journeys needed tooachieve hello scenarios described:</span></span>
 * <span data-ttu-id="598d6-206">LocalAccounts.</span><span class="sxs-lookup"><span data-stu-id="598d6-206">LocalAccounts.</span></span> <span data-ttu-id="598d6-207">Consente l'utilizzo di hello di solo gli account locali.</span><span class="sxs-lookup"><span data-stu-id="598d6-207">Enables hello use of local accounts only.</span></span>
 * <span data-ttu-id="598d6-208">SocialAccounts.</span><span class="sxs-lookup"><span data-stu-id="598d6-208">SocialAccounts.</span></span> <span data-ttu-id="598d6-209">Consente l'utilizzo di hello dei conti social (o federazione).</span><span class="sxs-lookup"><span data-stu-id="598d6-209">Enables hello use of social (or federated) accounts only.</span></span>
 * <span data-ttu-id="598d6-210">**SocialAndLocalAccounts**.</span><span class="sxs-lookup"><span data-stu-id="598d6-210">**SocialAndLocalAccounts**.</span></span> <span data-ttu-id="598d6-211">Questo file è usato per questa procedura dettagliata hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-211">We use this file for hello walkthrough.</span></span>
 * <span data-ttu-id="598d6-212">SocialAndLocalAccountsWithMFA.</span><span class="sxs-lookup"><span data-stu-id="598d6-212">SocialAndLocalAccountsWithMFA.</span></span> <span data-ttu-id="598d6-213">Qui sono incluse le opzioni social, locale e Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="598d6-213">Social, local, and Multi-Factor Authentication options are included here.</span></span>

<span data-ttu-id="598d6-214">Ogni pacchetto Starter contiene:</span><span class="sxs-lookup"><span data-stu-id="598d6-214">Each starter pack contains:</span></span>

* <span data-ttu-id="598d6-215">Hello [file base](active-directory-b2c-overview-custom.md#policy-files) dei criteri di hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-215">hello [base file](active-directory-b2c-overview-custom.md#policy-files) of hello policy.</span></span> <span data-ttu-id="598d6-216">Alcune modifiche sono necessari toohello base.</span><span class="sxs-lookup"><span data-stu-id="598d6-216">Few modifications are required toohello base.</span></span>
* <span data-ttu-id="598d6-217">Hello [file di estensione](active-directory-b2c-overview-custom.md#policy-files) dei criteri di hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-217">hello [extension file](active-directory-b2c-overview-custom.md#policy-files) of hello policy.</span></span>  <span data-ttu-id="598d6-218">Questo file è quello in cui viene eseguita la maggior parte delle modifiche di configurazione.</span><span class="sxs-lookup"><span data-stu-id="598d6-218">This file is where most configuration changes are made.</span></span>
* <span data-ttu-id="598d6-219">I [file relying party](active-directory-b2c-overview-custom.md#policy-files) sono file specifici delle attività chiamati dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="598d6-219">[Relying party files](active-directory-b2c-overview-custom.md#policy-files) are task-specific files called by your application.</span></span>

>[!NOTE]
><span data-ttu-id="598d6-220">Se l'editor XML supporta la convalida, convalidare file hello rispetto allo schema XML TrustFrameworkPolicy_0.3.0.0.xsd hello che si trova nella directory radice di hello del pacchetto hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-220">If your XML editor supports validation, validate hello files against hello TrustFrameworkPolicy_0.3.0.0.xsd XML schema that is located in hello root directory of hello starter pack.</span></span> <span data-ttu-id="598d6-221">La convalida dello schema XML identifica gli errori prima del caricamento.</span><span class="sxs-lookup"><span data-stu-id="598d6-221">XML schema validation identifies errors before uploading.</span></span>

 <span data-ttu-id="598d6-222">Di seguito sono riportati i requisiti iniziali:</span><span class="sxs-lookup"><span data-stu-id="598d6-222">Let's get started:</span></span>

1. <span data-ttu-id="598d6-223">Scaricare active-directory-b2c-custom-policy-starterpack da GitHub.</span><span class="sxs-lookup"><span data-stu-id="598d6-223">Download active-directory-b2c-custom-policy-starterpack from GitHub.</span></span> <span data-ttu-id="598d6-224">[Scaricare i file con estensione zip hello](https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/archive/master.zip) o eseguire</span><span class="sxs-lookup"><span data-stu-id="598d6-224">[Download hello .zip file](https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack/archive/master.zip) or run</span></span>

    ```console
    git clone https://github.com/Azure-Samples/active-directory-b2c-custom-policy-starterpack
    ```
2. <span data-ttu-id="598d6-225">Apri cartella SocialAndLocalAccounts hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-225">Open hello SocialAndLocalAccounts folder.</span></span>  <span data-ttu-id="598d6-226">file base Hello (TrustFrameworkBase.xml) in questa cartella contiene contenuto necessario per gli account locali e sociale/aziendale.</span><span class="sxs-lookup"><span data-stu-id="598d6-226">hello base file (TrustFrameworkBase.xml) in this folder contains content needed for both local and social/corporate accounts.</span></span> <span data-ttu-id="598d6-227">contenuto social Hello non interferisce con i passaggi di hello per gli account locali di installare e in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="598d6-227">hello social content does not interfere with hello steps for getting local accounts up and running.</span></span>
3. <span data-ttu-id="598d6-228">Aprire TrustFrameworkBase.xml.</span><span class="sxs-lookup"><span data-stu-id="598d6-228">Open TrustFrameworkBase.xml.</span></span> <span data-ttu-id="598d6-229">Se occorre un editor XML, provare [Visual Studio Code](https://code.visualstudio.com/download), un editor multipiattaforma leggero.</span><span class="sxs-lookup"><span data-stu-id="598d6-229">If you need an XML editor, [try Visual Studio Code](https://code.visualstudio.com/download), a lightweight cross-platform editor.</span></span>
4. <span data-ttu-id="598d6-230">Nella radice di hello `TrustFrameworkPolicy` elemento, hello aggiornamento `TenantId` e `PublicPolicyUri` gli attributi, sostituendo `yourtenant.onmicrosoft.com` con il nome di dominio hello del tenant di Azure Active Directory B2C:</span><span class="sxs-lookup"><span data-stu-id="598d6-230">In hello root `TrustFrameworkPolicy` element, update hello `TenantId` and `PublicPolicyUri` attributes, replacing `yourtenant.onmicrosoft.com` with hello domain name of your Azure AD B2C tenant:</span></span>
   ```xml
    <TrustFrameworkPolicy
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns="http://schemas.microsoft.com/online/cpim/schemas/2013/06"
    PolicySchemaVersion="0.3.0.0"
    TenantId="yourtenant.onmicrosoft.com"
    PolicyId="B2C_1A_TrustFrameworkBase"
    PublicPolicyUri="http://yourtenant.onmicrosoft.com">
    ```
   >[!NOTE]
   ><span data-ttu-id="598d6-231">`PolicyId`è nome criterio hello che viene visualizzato nel portale di hello e nome hello mediante il quale il file di criteri viene fatto riferimento da altri file di criteri.</span><span class="sxs-lookup"><span data-stu-id="598d6-231">`PolicyId` is hello policy name that you see in hello portal and hello name by which this policy file is referenced by other policy files.</span></span>

5. <span data-ttu-id="598d6-232">Salvare il file hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-232">Save hello file.</span></span>
6. <span data-ttu-id="598d6-233">Aprire TrustFrameworkExtensions.xml.</span><span class="sxs-lookup"><span data-stu-id="598d6-233">Open TrustFrameworkExtensions.xml.</span></span> <span data-ttu-id="598d6-234">Modificare hello stesso due sostituendo `yourtenant.onmicrosoft.com` con il tenant di Azure Active Directory B2C.</span><span class="sxs-lookup"><span data-stu-id="598d6-234">Make hello same two changes by replacing `yourtenant.onmicrosoft.com` with your Azure AD B2C tenant.</span></span> <span data-ttu-id="598d6-235">Rendere hello stesso sostituzione in hello `<TenantId>` elemento per un totale di tre modifiche.</span><span class="sxs-lookup"><span data-stu-id="598d6-235">Make hello same replacement in hello `<TenantId>` element for a total of three changes.</span></span> <span data-ttu-id="598d6-236">Salvare il file hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-236">Save hello file.</span></span>
7. <span data-ttu-id="598d6-237">Aprire SignUpOrSignIn.xml.</span><span class="sxs-lookup"><span data-stu-id="598d6-237">Open SignUpOrSignIn.xml.</span></span> <span data-ttu-id="598d6-238">Modificare hello stesso sostituendo `yourtenant.onmicrosoft.com` con il tenant di Azure Active Directory B2C in tre posizioni.</span><span class="sxs-lookup"><span data-stu-id="598d6-238">Make hello same changes by replacing `yourtenant.onmicrosoft.com` with your Azure AD B2C tenant in three places.</span></span> <span data-ttu-id="598d6-239">Salvare il file hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-239">Save hello file.</span></span>
8. <span data-ttu-id="598d6-240">La reimpostazione della password hello aprire e modificare i file di profilo.</span><span class="sxs-lookup"><span data-stu-id="598d6-240">Open hello password reset and profile edit files.</span></span> <span data-ttu-id="598d6-241">Modificare hello stesso sostituendo `yourtenant.onmicrosoft.com` con il tenant di Azure Active Directory B2C nei tre punti in ogni file.</span><span class="sxs-lookup"><span data-stu-id="598d6-241">Make hello same changes by replacing `yourtenant.onmicrosoft.com` with your Azure AD B2C tenant in three places in each file.</span></span> <span data-ttu-id="598d6-242">Salvare i file hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-242">Save hello files.</span></span>

### <a name="add-hello-application-ids-tooyour-custom-policy"></a><span data-ttu-id="598d6-243">Aggiungere criteri personalizzati tooyour ID applicazione hello</span><span class="sxs-lookup"><span data-stu-id="598d6-243">Add hello application IDs tooyour custom policy</span></span>
<span data-ttu-id="598d6-244">Aggiungere file estensioni toohello ID dell'applicazione hello (`TrustFrameworkExtensions.xml`):</span><span class="sxs-lookup"><span data-stu-id="598d6-244">Add hello application IDs toohello extensions file (`TrustFrameworkExtensions.xml`):</span></span>

1. <span data-ttu-id="598d6-245">Nel file estensioni hello (TrustFrameworkExtensions.xml), trovare l'elemento hello `<TechnicalProfile Id="login-NonInteractive">`.</span><span class="sxs-lookup"><span data-stu-id="598d6-245">In hello extensions file (TrustFrameworkExtensions.xml), find hello element `<TechnicalProfile Id="login-NonInteractive">`.</span></span>
2. <span data-ttu-id="598d6-246">Sostituire le istanze di `IdentityExperienceFrameworkAppId` con ID applicazione hello hello applicazione identità esperienza Framework creato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="598d6-246">Replace both instances of `IdentityExperienceFrameworkAppId` with hello application ID of hello Identity Experience Framework application that you created earlier.</span></span> <span data-ttu-id="598d6-247">Di seguito è fornito un esempio:</span><span class="sxs-lookup"><span data-stu-id="598d6-247">Here is an example:</span></span>

   ```xml
   <Item Key="client_id">8322dedc-cbf4-43bc-8bb6-141d16f0f489</Item>
   ```
3. <span data-ttu-id="598d6-248">Sostituire le istanze di `ProxyIdentityExperienceFrameworkAppId` con ID applicazione hello hello applicazione Proxy identità esperienza Framework creato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="598d6-248">Replace both instances of `ProxyIdentityExperienceFrameworkAppId` with hello application ID of hello Proxy Identity Experience Framework application that you created earlier.</span></span>
4. <span data-ttu-id="598d6-249">Salvare il file delle estensioni.</span><span class="sxs-lookup"><span data-stu-id="598d6-249">Save your extensions file.</span></span>

## <a name="upload-hello-policies-tooyour-tenant"></a><span data-ttu-id="598d6-250">Caricare tenant tooyour di hello criteri</span><span class="sxs-lookup"><span data-stu-id="598d6-250">Upload hello policies tooyour tenant</span></span>

1. <span data-ttu-id="598d6-251">In hello [portale di Azure](https://portal.azure.com), passare in hello [contesto del tenant di Azure Active Directory B2C](active-directory-b2c-navigate-to-b2c-context.md), aprire hello e **Azure Active Directory B2C** blade.</span><span class="sxs-lookup"><span data-stu-id="598d6-251">In hello [Azure portal](https://portal.azure.com), switch into hello [context of your Azure AD B2C tenant](active-directory-b2c-navigate-to-b2c-context.md), and open hello **Azure AD B2C** blade.</span></span>
2. <span data-ttu-id="598d6-252">Fare clic su **Framework dell'esperienza di gestione delle identità**.</span><span class="sxs-lookup"><span data-stu-id="598d6-252">Select **Identity Experience Framework**.</span></span>
3. <span data-ttu-id="598d6-253">Selezionare **Carica criteri**.</span><span class="sxs-lookup"><span data-stu-id="598d6-253">Select **Upload Policy**.</span></span>

    >[!WARNING]
    ><span data-ttu-id="598d6-254">file di criteri personalizzati Hello devono essere caricati in hello seguente ordine:</span><span class="sxs-lookup"><span data-stu-id="598d6-254">hello custom policy files must be uploaded in hello following order:</span></span>

1. <span data-ttu-id="598d6-255">Caricare TrustFrameworkBase.xml.</span><span class="sxs-lookup"><span data-stu-id="598d6-255">Upload TrustFrameworkBase.xml.</span></span>
2. <span data-ttu-id="598d6-256">Caricare TrustFrameworkExtensions.xml.</span><span class="sxs-lookup"><span data-stu-id="598d6-256">Upload TrustFrameworkExtensions.xml.</span></span>
3. <span data-ttu-id="598d6-257">Caricare SignUpOrSignin.xml.</span><span class="sxs-lookup"><span data-stu-id="598d6-257">Upload SignUpOrSignin.xml.</span></span>
4. <span data-ttu-id="598d6-258">Caricare gli altri file dei criteri.</span><span class="sxs-lookup"><span data-stu-id="598d6-258">Upload your other policy files.</span></span>

<span data-ttu-id="598d6-259">Quando viene caricato un file, il nome di hello del file di criteri hello è preceduto da `B2C_1A_`.</span><span class="sxs-lookup"><span data-stu-id="598d6-259">When a file is uploaded, hello name of hello policy file is prepended with `B2C_1A_`.</span></span>

## <a name="test-hello-custom-policy-by-using-run-now"></a><span data-ttu-id="598d6-260">Test dei criteri personalizzati di hello tramite Esegui</span><span class="sxs-lookup"><span data-stu-id="598d6-260">Test hello custom policy by using Run Now</span></span>

1. <span data-ttu-id="598d6-261">Aprire **le impostazioni di Azure Active Directory B2C** e andare troppo**identità esperienza Framework**.</span><span class="sxs-lookup"><span data-stu-id="598d6-261">Open **Azure AD B2C Settings** and go too**Identity Experience Framework**.</span></span>

   >[!NOTE]
   ><span data-ttu-id="598d6-262">**Esegui ora** richiede almeno un'applicazione toobe preregistrate tenant hello.</span><span class="sxs-lookup"><span data-stu-id="598d6-262">**Run now** requires at least one application toobe preregistered on hello tenant.</span></span> <span data-ttu-id="598d6-263">Le applicazioni devono essere registrate nel tenant di hello B2C utilizzando hello **applicazioni** selezione dei menu in Azure Active Directory B2C o mediante hello identità esperienza Framework tooinvoke criteri incorporati e personalizzati.</span><span class="sxs-lookup"><span data-stu-id="598d6-263">Applications must be registered in hello B2C tenant, either by using hello **Applications** menu selection in Azure AD B2C or by using hello Identity Experience Framework tooinvoke both built-in and custom policies.</span></span> <span data-ttu-id="598d6-264">È necessaria una sola registrazione per applicazione.</span><span class="sxs-lookup"><span data-stu-id="598d6-264">Only one registration per application is needed.</span></span><br><br>
   <span data-ttu-id="598d6-265">toolearn tooregister applicazioni, vedere hello Azure Active Directory B2C [iniziare](active-directory-b2c-get-started.md) articolo o hello [registrazione dell'applicazione](active-directory-b2c-app-registration.md) articolo.</span><span class="sxs-lookup"><span data-stu-id="598d6-265">toolearn how tooregister applications, see hello Azure AD B2C [Get started](active-directory-b2c-get-started.md) article or hello [Application registration](active-directory-b2c-app-registration.md) article.</span></span>  

2. <span data-ttu-id="598d6-266">Aprire B2C_1A_signup_signin, hello criteri personalizzati di relying party (RP) che è stata caricata.</span><span class="sxs-lookup"><span data-stu-id="598d6-266">Open B2C_1A_signup_signin, hello relying party (RP) custom policy that you uploaded.</span></span> <span data-ttu-id="598d6-267">Selezionare **Esegui adesso**.</span><span class="sxs-lookup"><span data-stu-id="598d6-267">Select **Run now**.</span></span>

3. <span data-ttu-id="598d6-268">È necessario essere in grado di toosign utilizzando un indirizzo di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="598d6-268">You should be able toosign up using an email address.</span></span>

4. <span data-ttu-id="598d6-269">Accedere con hello stesso account tooconfirm che è necessario hello configurazione corretta.</span><span class="sxs-lookup"><span data-stu-id="598d6-269">Sign in with hello same account tooconfirm that you have hello correct configuration.</span></span>

>[!NOTE]
><span data-ttu-id="598d6-270">Una causa comune degli errori di accesso è la configurazione non corretta dell'app IdentityExperienceFramework.</span><span class="sxs-lookup"><span data-stu-id="598d6-270">A common cause of sign-in failure is an improperly configured IdentityExperienceFramework app.</span></span>


## <a name="next-steps"></a><span data-ttu-id="598d6-271">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="598d6-271">Next steps</span></span>

### <a name="add-facebook-as-an-identity-provider"></a><span data-ttu-id="598d6-272">Aggiungere Facebook come provider di identità</span><span class="sxs-lookup"><span data-stu-id="598d6-272">Add Facebook as an identity provider</span></span>
<span data-ttu-id="598d6-273">tooset di Facebook:</span><span class="sxs-lookup"><span data-stu-id="598d6-273">tooset up Facebook:</span></span>
1. <span data-ttu-id="598d6-274">[Configurare un'applicazione Facebook in developers.facebook.com](active-directory-b2c-setup-fb-app.md).</span><span class="sxs-lookup"><span data-stu-id="598d6-274">[Configure a Facebook application in developers.facebook.com](active-directory-b2c-setup-fb-app.md).</span></span>
2. <span data-ttu-id="598d6-275">[Aggiunta di un tenant di tooyour secret Azure Active Directory B2C applicazione Facebook hello](#add-signing-and-encryption-keys-to-your-b2c-tenant-for-use-by-custom-policies).</span><span class="sxs-lookup"><span data-stu-id="598d6-275">[Add hello Facebook application secret tooyour Azure AD B2C tenant](#add-signing-and-encryption-keys-to-your-b2c-tenant-for-use-by-custom-policies).</span></span>
3. <span data-ttu-id="598d6-276">Nel file di criteri TrustFrameworkExtensions hello, sostituire il valore di hello di `client_id` con l'ID dell'applicazione Facebook hello:</span><span class="sxs-lookup"><span data-stu-id="598d6-276">In hello TrustFrameworkExtensions policy file, replace hello value of `client_id` with hello Facebook application ID:</span></span>

   ```xml
   <TechnicalProfile Id="Facebook-OAUTH">
     <Metadata>
     <!--Replace hello value of client_id in this technical profile with hello Facebook app ID"-->
       <Item Key="client_id">00000000000000</Item>
   ```
4. <span data-ttu-id="598d6-277">Caricare tenant tooyour di hello TrustFrameworkExtensions.xml criteri file.</span><span class="sxs-lookup"><span data-stu-id="598d6-277">Upload hello TrustFrameworkExtensions.xml policy file tooyour tenant.</span></span>
5. <span data-ttu-id="598d6-278">Test utilizzando **Esegui ora** oppure richiamando criteri hello direttamente dall'applicazione registrata.</span><span class="sxs-lookup"><span data-stu-id="598d6-278">Test by using **Run now** or by invoking hello policy directly from your registered application.</span></span>

### <a name="add-azure-active-directory-as-an-identity-provider"></a><span data-ttu-id="598d6-279">Aggiungere Azure Active Directory come provider di identità</span><span class="sxs-lookup"><span data-stu-id="598d6-279">Add Azure Active Directory as an identity provider</span></span>
<span data-ttu-id="598d6-280">file di base Hello già utilizzato in questa Guida introduttiva contiene alcuni dei contenuti di hello che è necessario per l'aggiunta di altri provider di identità.</span><span class="sxs-lookup"><span data-stu-id="598d6-280">hello base file used in this getting started guide already contains some of hello content that you need for adding other identity providers.</span></span> <span data-ttu-id="598d6-281">Per informazioni sull'impostazione di accessi, vedere hello [Azure Active Directory B2C: l'accesso con account di Azure AD](active-directory-b2c-setup-aad-custom.md) articolo.</span><span class="sxs-lookup"><span data-stu-id="598d6-281">For information on setting up sign-ins, see hello [Azure Active Directory B2C: Sign in by using Azure AD accounts](active-directory-b2c-setup-aad-custom.md) article.</span></span>

<span data-ttu-id="598d6-282">Per una panoramica di criteri personalizzati di Azure Active Directory B2C che utilizzano hello identità esperienza Framework, vedere hello [Azure Active Directory B2C: i criteri personalizzati](active-directory-b2c-overview-custom.md) articolo.</span><span class="sxs-lookup"><span data-stu-id="598d6-282">For an overview of custom policies in Azure AD B2C that use hello Identity Experience Framework, see hello [Azure Active Directory B2C: Custom policies](active-directory-b2c-overview-custom.md) article.</span></span> 
