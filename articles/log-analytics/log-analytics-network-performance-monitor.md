---
title: Soluzione di monitoraggio delle prestazioni di rete in Azure Log Analytics | Microsoft Docs
description: Il monitoraggio delle prestazioni di rete in Azure Log Analytics consente di monitorare le prestazioni delle reti quasi in tempo reale per rilevare e trovare i colli di bottiglia delle prestazioni di rete.
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: 5b9c9c83-3435-488c-b4f6-7653003ae18a
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: banders
ms.openlocfilehash: c6568e491429f6046ab164ab5eacd0ae5846e201
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="network-performance-monitor-solution-in-log-analytics"></a><span data-ttu-id="71693-103">Soluzione di monitoraggio delle prestazioni di rete in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="71693-103">Network Performance Monitor solution in Log Analytics</span></span>

![Simbolo di Monitoraggio prestazioni rete](./media/log-analytics-network-performance-monitor/npm-symbol.png)

<span data-ttu-id="71693-105">Questo documento descrive come configurare e usare la soluzione di monitoraggio delle prestazioni di rete in Log Analytics, che consente di monitorare le prestazioni delle reti quasi in tempo reale per rilevare e trovare i colli di bottiglia delle prestazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-105">This document describes how to set-up and use the Network Performance Monitor solution in Log Analytics, which helps you monitor the performance of your networks-in near real-time-to detect and locate network performance bottlenecks.</span></span> <span data-ttu-id="71693-106">Con la soluzione di monitoraggio delle prestazioni di rete, è possibile monitorare la perdita e la latenza tra due reti, subnet o server.</span><span class="sxs-lookup"><span data-stu-id="71693-106">With the Network Performance Monitor solution, you can monitor the loss and latency between two networks, subnets or servers.</span></span> <span data-ttu-id="71693-107">Il monitoraggio delle prestazioni di rete rileva problemi di rete come il blackholing del traffico, gli errori di routing e i problemi che i metodi di monitoraggio della rete tradizionali non sono in grado di rilevare.</span><span class="sxs-lookup"><span data-stu-id="71693-107">Network Performance Monitor detects network issues like traffic blackholing, routing errors, and issues that conventional network monitoring methods are not able to detect.</span></span> <span data-ttu-id="71693-108">Il monitoraggio delle prestazioni di rete genera avvisi e invia notifiche quando viene superata una soglia per un collegamento di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-108">Network Performance Monitor generates alerts and notifies as and when a threshold is breached for a network link.</span></span> <span data-ttu-id="71693-109">Queste soglie possono essere acquisite automaticamente dal sistema oppure possono essere configurate in modo che usino regole di avviso personalizzate.</span><span class="sxs-lookup"><span data-stu-id="71693-109">These thresholds can be learned automatically by the system or you can configure them to use custom alert rules.</span></span> <span data-ttu-id="71693-110">Il monitoraggio delle prestazioni di rete garantisce una tempestiva individuazione dei problemi legati alle prestazioni di rete e localizza l'origine del problema in un particolare segmento di rete o un dispositivo.</span><span class="sxs-lookup"><span data-stu-id="71693-110">Network Performance Monitor ensures timely detection of network performance issues and localizes the source of the problem to a particular network segment or device.</span></span>

<span data-ttu-id="71693-111">È possibile rilevare i problemi di rete con il dashboard della soluzione, che mostra un riepilogo delle informazioni sulla rete, tra cui i recenti eventi di integrità di rete, i collegamenti di rete danneggiati e i collegamenti di subnet con problemi di grande perdita di pacchetti e di latenza elevata.</span><span class="sxs-lookup"><span data-stu-id="71693-111">You can detect network issues with the solution dashboard which displays summarized information about your network including recent network health events, unhealthy network links, and subnetwork links that are facing high packet loss and latency.</span></span> <span data-ttu-id="71693-112">È possibile eseguire il drill-down in un collegamento di rete per visualizzare lo stato di integrità corrente dei collegamenti di subnet, nonché dei collegamenti tra nodi.</span><span class="sxs-lookup"><span data-stu-id="71693-112">You can drill-down into a network link to view the current health status of subnetwork links as well as node-to-node links.</span></span> <span data-ttu-id="71693-113">È anche possibile visualizzare le tendenze cronologiche di perdita e latenza a livello di rete, subnet e tra nodi.</span><span class="sxs-lookup"><span data-stu-id="71693-113">You can also view the historical trend of loss and latency at the network, subnetwork, and node-to-node level.</span></span> <span data-ttu-id="71693-114">È possibile rilevare i problemi di rete temporanei visualizzando i grafici sulle tendenze cronologiche relative a perdita di pacchetti e latenza e individuare colli di bottiglia di rete su una mappa topologica.</span><span class="sxs-lookup"><span data-stu-id="71693-114">You can detect transient network issues by viewing historical trend charts for packet loss and latency and locate network bottlenecks on a topology map.</span></span> <span data-ttu-id="71693-115">Il grafico interattivo della topologia consente di visualizzare le route di rete hop-by-hop e determinare l'origine del problema.</span><span class="sxs-lookup"><span data-stu-id="71693-115">The interactive topology graph allows you to visualize the hop-by-hop network routes and determine the source of the problem.</span></span> <span data-ttu-id="71693-116">Come in qualsiasi altra soluzione, è possibile usare la ricerca nei log per i vari requisiti di analisi al fine di creare report personalizzati in base ai dati raccolti dal monitoraggio delle prestazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-116">Like any other solutions, you can use Log Search for various analytics requirements to create custom reports based on the data collected by Network Performance Monitor.</span></span>

<span data-ttu-id="71693-117">La soluzione usa le transazioni sintetiche come meccanismo principale per rilevare gli errori di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-117">The solution uses synthetic transactions as a primary mechanism to detect network faults.</span></span> <span data-ttu-id="71693-118">Pertanto, è possibile usarla senza tener conto del particolare fornitore o modello di un dispositivo di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-118">So, you can use it without regard for a specific network device's vendor or model.</span></span> <span data-ttu-id="71693-119">Funziona in ambienti ibridi, cloud (IaaS) e locali.</span><span class="sxs-lookup"><span data-stu-id="71693-119">It works across on-premises, cloud (IaaS), and hybrid environments.</span></span> <span data-ttu-id="71693-120">La soluzione rileva automaticamente la topologia di rete e le varie route della rete.</span><span class="sxs-lookup"><span data-stu-id="71693-120">The solution automatically discovers the network topology and various routes in your network.</span></span>

<span data-ttu-id="71693-121">I tipici prodotti di rete si concentrano sul monitoraggio dell'integrità dei dispositivi di rete (router, commutatori e così via) ma non forniscono informazioni approfondite sulla qualità effettiva della connettività di rete tra due punti, cosa che invece il monitoraggio delle prestazioni di rete fa.</span><span class="sxs-lookup"><span data-stu-id="71693-121">Typical network monitoring products focus on monitoring the network device (routers, switches etc.) health but do not provide insights into the actual quality of network connectivity between two points, which Network Performance Monitor does.</span></span>

### <a name="using-the-solution-standalone"></a><span data-ttu-id="71693-122">Uso della soluzione autonoma</span><span class="sxs-lookup"><span data-stu-id="71693-122">Using the solution standalone</span></span>
<span data-ttu-id="71693-123">Se si desidera monitorare la qualità delle connessioni di rete tra carichi di lavoro, reti, data center o uffici remoti critici, è possibile usare la soluzione di monitoraggio delle prestazioni di rete da sola per monitorare l'integrità della connettività tra:</span><span class="sxs-lookup"><span data-stu-id="71693-123">If you want to monitor the quality of network connections between their critical workloads, networks, datacenters or office sites, then you can use the Network Performance Monitor solution by itself to monitor connectivity health between:</span></span>

* <span data-ttu-id="71693-124">più data center o uffici remoti connessi con tramite una rete pubblica o privata</span><span class="sxs-lookup"><span data-stu-id="71693-124">multiple datacenters or office sites that are connected using a public or private network</span></span>
* <span data-ttu-id="71693-125">carichi di lavoro critici che eseguono applicazioni line-of-business</span><span class="sxs-lookup"><span data-stu-id="71693-125">critical workloads that are running line of business applications</span></span>
* <span data-ttu-id="71693-126">servizi di cloud pubblico come Microsoft Azure o Amazon Web Services (AWS) e reti locali, se si dispone di IaaS (VM) disponibile e di gateway configurati in modo da consentire la comunicazione tra reti locali e cloud</span><span class="sxs-lookup"><span data-stu-id="71693-126">public cloud services like Microsoft Azure or Amazon Web Services (AWS) and on-premises networks, if you have IaaS (VM) available and you have gateways configured to allow communication between on-premises networks and cloud networks</span></span>
* <span data-ttu-id="71693-127">Reti locali e Azure quando si usa ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="71693-127">Azure and on-premises networks when you use Express Route</span></span>

### <a name="using-the-solution-with-other-networking-tools"></a><span data-ttu-id="71693-128">Uso della soluzione con altri strumenti di rete</span><span class="sxs-lookup"><span data-stu-id="71693-128">Using the solution with other networking tools</span></span>
<span data-ttu-id="71693-129">Se si desidera monitorare un'applicazione line-of-business, è possibile usare la soluzione di monitoraggio delle prestazioni di rete come soluzione complementare ad altri strumenti di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-129">If you want to monitor a line of business application, you can use the Network Performance Monitor solution as a companion solution to other network tools.</span></span> <span data-ttu-id="71693-130">Una rete lenta può causare applicazioni lente e il monitoraggio delle prestazioni di rete può aiutare ad analizzare i problemi legati alle prestazioni delle applicazioni causati da problemi di rete sottostanti.</span><span class="sxs-lookup"><span data-stu-id="71693-130">A slow network can lead to slow applications and Network Performance Monitor can help you investigate application performance issues that are caused by underlying networking issues.</span></span> <span data-ttu-id="71693-131">Poiché la soluzione non richiede accesso ai dispositivi di rete, non è necessario che l'amministratore dell'applicazione si affidi a un team di rete per fornire informazioni su come la rete influisce sulle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="71693-131">Because the solution does not require any access to network devices, the application administrator doesn't need to rely on a networking team to provide information about how the network is affecting applications.</span></span>

<span data-ttu-id="71693-132">Inoltre, se si investe già in altri strumenti di monitoraggio della rete, la soluzione può completarli perché le più tradizionali soluzioni di monitoraggio di rete non forniscono informazioni dettagliate sulle metriche delle prestazioni di rete end-to-end come perdita e la latenza.</span><span class="sxs-lookup"><span data-stu-id="71693-132">Also, if you already invest in other network monitoring tools, then the solution can complement those tools because most traditional network monitoring solutions do not provide insights into end-to-end network performance metrics like loss and latency.</span></span>  <span data-ttu-id="71693-133">La soluzione di monitoraggio delle prestazioni di rete aiuterà a colmare il divario.</span><span class="sxs-lookup"><span data-stu-id="71693-133">The Network Performance Monitor solution can help fill that gap.</span></span>

## <a name="installing-and-configuring-agents-for-the-solution"></a><span data-ttu-id="71693-134">Installazione e configurazione degli agenti per la soluzione</span><span class="sxs-lookup"><span data-stu-id="71693-134">Installing and configuring agents for the solution</span></span>
<span data-ttu-id="71693-135">Usare i processi di base per installare gli agenti descritti in [Connettere computer Windows a Log Analytics](log-analytics-windows-agents.md) e [Connettere Operations Manager a Log Analytics](log-analytics-om-agents.md).</span><span class="sxs-lookup"><span data-stu-id="71693-135">Use the basic processes to install agents at [Connect Windows computers to Log Analytics](log-analytics-windows-agents.md) and [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span></span>

> [!NOTE]
> <span data-ttu-id="71693-136">Per poter avere dati sufficienti per individuare e monitorare le risorse di rete, è necessario installare almeno 2 agenti.</span><span class="sxs-lookup"><span data-stu-id="71693-136">You'll need to install at least 2 agents in order to have enough data to discover and monitor your network resources.</span></span> <span data-ttu-id="71693-137">In caso contrario, la soluzione rimarrà in uno stato di configurazione fino a quando non verranno installati e configurati altri agenti.</span><span class="sxs-lookup"><span data-stu-id="71693-137">Otherwise, the solution will remain in a configuring state until you install and configure additional agents.</span></span>
>
>

### <a name="where-to-install-the-agents"></a><span data-ttu-id="71693-138">Dove installare gli agenti</span><span class="sxs-lookup"><span data-stu-id="71693-138">Where to install the agents</span></span>
<span data-ttu-id="71693-139">Prima di installare gli agenti, prendere in considerazione la topologia della rete e le parti della rete che si desidera monitorare.</span><span class="sxs-lookup"><span data-stu-id="71693-139">Before you install agents, consider the topology of your network and what parts of the network you want to monitor.</span></span> <span data-ttu-id="71693-140">Si consiglia di installare più di un agente per ogni subnet che si desidera monitorare.</span><span class="sxs-lookup"><span data-stu-id="71693-140">We recommend that you install more than one agent for each subnet that you want to monitor.</span></span> <span data-ttu-id="71693-141">In altre parole, per ogni subnet che si desidera monitorare, selezionare due o più server o VM e installarvi l'agente.</span><span class="sxs-lookup"><span data-stu-id="71693-141">In other words, for every subnet that you want to monitor, choose two or more servers or VMs and install the agent on them.</span></span>

<span data-ttu-id="71693-142">Se non si conosce la topologia della propria rete, installare gli agenti sui server con carichi di lavoro critici in cui si desidera monitorare le prestazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-142">If you are unsure about the topology of your network, install the agents on servers with critical workloads where you want to monitor the network performance.</span></span> <span data-ttu-id="71693-143">Ad esempio, si potrebbe voler tenere traccia di una connessione di rete tra un server Web e un server che esegue SQL Server.</span><span class="sxs-lookup"><span data-stu-id="71693-143">For example, you might want to keep track of a network connection between a Web server and a server running SQL Server.</span></span> <span data-ttu-id="71693-144">In questo esempio, viene installato un agente su entrambi i server.</span><span class="sxs-lookup"><span data-stu-id="71693-144">In this example, you'd install an agent on both servers.</span></span>

<span data-ttu-id="71693-145">Gli agenti monitorano la connettività di rete (collegamenti) tra gli host, non gli host stessi.</span><span class="sxs-lookup"><span data-stu-id="71693-145">Agents monitor network connectivity (links) between hosts -- not the hosts themselves.</span></span> <span data-ttu-id="71693-146">Pertanto, per monitorare un collegamento di rete, è necessario installare gli agenti su entrambi gli endpoint del collegamento.</span><span class="sxs-lookup"><span data-stu-id="71693-146">So, to monitor a network link, you must install agents on both endpoints of that link.</span></span>

### <a name="configure-agents"></a><span data-ttu-id="71693-147">Configurazione degli agenti</span><span class="sxs-lookup"><span data-stu-id="71693-147">Configure agents</span></span>

<span data-ttu-id="71693-148">Se si prevede di usare il protocollo ICMP per le transazioni sintetiche, è necessario abilitare le seguenti regole firewall per usare in modo affidabile il protocollo:</span><span class="sxs-lookup"><span data-stu-id="71693-148">If you intend to use the ICMP protocol for synthetic transactions, you need to enable the following firewall rules for reliably utilizing ICMP:</span></span>

```
netsh advfirewall firewall add rule name="NPMDICMPV4Echo" protocol="icmpv4:8,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6Echo" protocol="icmpv6:128,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV4DestinationUnreachable" protocol="icmpv4:3,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6DestinationUnreachable" protocol="icmpv6:1,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV4TimeExceeded" protocol="icmpv4:11,any" dir=in action=allow
netsh advfirewall firewall add rule name="NPMDICMPV6TimeExceeded" protocol="icmpv6:3,any" dir=in action=allow
```


<span data-ttu-id="71693-149">Se si vuole usare il protocollo TCP, è necessario aprire le porte del firewall per questi computer per assicurarsi che gli agenti possano comunicare.</span><span class="sxs-lookup"><span data-stu-id="71693-149">If you intend to use the TCP protocol you need to open firewall ports for those computers to ensure that agents can communicate.</span></span> <span data-ttu-id="71693-150">È necessario scaricare ed eseguire lo [script di PowerShell EnableRules.ps1](https://gallery.technet.microsoft.com/OMS-Network-Performance-04a66634) senza parametri in una finestra di PowerShell con privilegi amministrativi.</span><span class="sxs-lookup"><span data-stu-id="71693-150">You need to download and then run the [EnableRules.ps1 PowerShell script](https://gallery.technet.microsoft.com/OMS-Network-Performance-04a66634) without any parameters in a PowerShell window with administrative privileges.</span></span>

<span data-ttu-id="71693-151">Lo script crea le chiavi del Registro di sistema richieste dal monitoraggio delle prestazioni di rete e crea regole del firewall Windows per consentire agli agenti di creare connessioni TCP tra loro.</span><span class="sxs-lookup"><span data-stu-id="71693-151">The script creates registry keys required by the Network Performance Monitor and it creates Windows firewall rules to allow agents to create TCP connections with each other.</span></span> <span data-ttu-id="71693-152">Le chiavi del Registro di sistema create dallo script inoltre specificano se registrare i log di debug e il percorso al file di log.</span><span class="sxs-lookup"><span data-stu-id="71693-152">The registry keys created by the script also specify whether to log the debug logs and the path for the logs file.</span></span> <span data-ttu-id="71693-153">Inoltre definiscono la porta TCP agente usata per la comunicazione.</span><span class="sxs-lookup"><span data-stu-id="71693-153">It also defines the agent TCP port used for communication.</span></span> <span data-ttu-id="71693-154">I valori per queste chiavi vengono impostati automaticamente dallo script, quindi non bisogna modificare manualmente le chiavi.</span><span class="sxs-lookup"><span data-stu-id="71693-154">The values for these keys are automatically set by the script, so you should not manually change these keys.</span></span>

<span data-ttu-id="71693-155">La porta aperta per impostazione predefinita è 8084.</span><span class="sxs-lookup"><span data-stu-id="71693-155">The port opened by default is 8084.</span></span> <span data-ttu-id="71693-156">È possibile usare una porta personalizzata fornendo il parametro `portNumber` allo script.</span><span class="sxs-lookup"><span data-stu-id="71693-156">You can use a custom port by providing the parameter `portNumber` to the script.</span></span> <span data-ttu-id="71693-157">Tuttavia, è necessario usare la stessa porta su tutti i computer in cui viene eseguito lo script.</span><span class="sxs-lookup"><span data-stu-id="71693-157">However, the same port should be used on all the computers where the script is run.</span></span>

> [!NOTE]
> <span data-ttu-id="71693-158">Lo script EnableRules.ps1 configura le regole del firewall Windows solo nel computer in cui viene eseguito lo script.</span><span class="sxs-lookup"><span data-stu-id="71693-158">The EnableRules.ps1 script configures Windows firewall rules only on the computer where the script is run.</span></span> <span data-ttu-id="71693-159">Se si dispone di un firewall di rete, è necessario assicurarsi che consenta il traffico destinato alla porta TCP usata dal monitoraggio delle prestazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-159">If you have a network firewall, you should make sure that it allows traffic destined for the TCP port being used by Network Performance Monitor.</span></span>
>
>

## <a name="configuring-the-solution"></a><span data-ttu-id="71693-160">Configurazione della soluzione</span><span class="sxs-lookup"><span data-stu-id="71693-160">Configuring the solution</span></span>
<span data-ttu-id="71693-161">Usare le informazioni seguenti per installare e configurare la soluzione.</span><span class="sxs-lookup"><span data-stu-id="71693-161">Use the following information to install and configure the solution.</span></span>

1. <span data-ttu-id="71693-162">La soluzione di monitoraggio delle prestazioni di rete acquisisce i dati dai computer che eseguono Windows Server 2008 SP 1 o versioni successive o Windows 7 SP1 o versioni successive, che sono gli stessi requisiti di Microsoft Monitoring Agent (MMA).</span><span class="sxs-lookup"><span data-stu-id="71693-162">The Network Performance Monitor solution acquires data from computers running Windows Server 2008 SP 1 or later or Windows 7 SP1 or later, which are the same requirements as the Microsoft Monitoring Agent (MMA).</span></span> <span data-ttu-id="71693-163">Gli agenti NPM possono essere eseguiti anche in sistemi operativi desktop/client Windows (Windows 10, Windows 8.1, Windows 8 e Windows 7).</span><span class="sxs-lookup"><span data-stu-id="71693-163">NPM agents can also run on Windows desktop/client operating systems (Windows 10, Windows 8.1, Windows 8 and Windows 7).</span></span>
    >[!NOTE]
    ><span data-ttu-id="71693-164">Gli agenti per i sistemi operativi server Windows supportano sia TCP che ICMP come protocolli per la transazione sintetica.</span><span class="sxs-lookup"><span data-stu-id="71693-164">The agents for Windows server operating systems support both TCP and ICMP as the protocols for synthetic transaction.</span></span> <span data-ttu-id="71693-165">Tuttavia, gli agenti per i sistemi operativi client Windows supportano solo TCP come protocollo per la transazione sintetica.</span><span class="sxs-lookup"><span data-stu-id="71693-165">However, the agents for Windows client operating systems only support ICMP as the protocol for synthetic transaction.</span></span>

2. <span data-ttu-id="71693-166">Aggiungere la soluzione di monitoraggio delle prestazioni di rete all'area di lavoro da [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.NetworkMonitoringOMS?tab=Overview) o usando la procedura descritta nell'articolo [Aggiungere soluzioni di Log Analytics dalla Raccolta soluzioni](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="71693-166">Add the Network Performance Monitor solution to your workspace from [Azure marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.NetworkMonitoringOMS?tab=Overview) or by using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>  
   <span data-ttu-id="71693-167">![Simbolo del monitoraggio delle prestazioni di rete](./media/log-analytics-network-performance-monitor/npm-symbol.png)</span><span class="sxs-lookup"><span data-stu-id="71693-167">![Network Performance Monitor symbol](./media/log-analytics-network-performance-monitor/npm-symbol.png)</span></span>
3. <span data-ttu-id="71693-168">Nel portale di OMS si noterà un nuovo riquadro chiamato **Monitoraggio delle prestazioni di rete** con il messaggio *La soluzione richiede configurazione aggiuntiva*.</span><span class="sxs-lookup"><span data-stu-id="71693-168">In the OMS portal, you'll see a new tile titled **Network Performance Monitor** with the message *Solution requires additional configuration*.</span></span> <span data-ttu-id="71693-169">È necessario configurare la soluzione in modo da aggiungere reti in base alle subnet e ai nodi rilevati dagli agenti.</span><span class="sxs-lookup"><span data-stu-id="71693-169">You'll need to configure the solution to add networks based on subnetworks and nodes that are discovered by agents.</span></span> <span data-ttu-id="71693-170">Fare clic su **Monitoraggio delle prestazioni di rete** per avviare la configurazione della rete predefinita.</span><span class="sxs-lookup"><span data-stu-id="71693-170">Click **Network Performance Monitor** to start configuring the default network.</span></span>  
   <span data-ttu-id="71693-171">![La soluzione richiede configurazione aggiuntiva](./media/log-analytics-network-performance-monitor/npm-config.png)</span><span class="sxs-lookup"><span data-stu-id="71693-171">![solution requires additional configuration](./media/log-analytics-network-performance-monitor/npm-config.png)</span></span>

### <a name="configure-the-solution-with-a-default-network"></a><span data-ttu-id="71693-172">Configurazione della soluzione con una rete predefinita</span><span class="sxs-lookup"><span data-stu-id="71693-172">Configure the solution with a default network</span></span>
<span data-ttu-id="71693-173">Nella pagina di configurazione si noterà una singola rete chiamata **Predefinita**.</span><span class="sxs-lookup"><span data-stu-id="71693-173">On the configuration page, you'll see a single network named **Default**.</span></span> <span data-ttu-id="71693-174">Quando non sono definite le reti, tutte le subnet individuate automaticamente si trovano nella rete predefinita.</span><span class="sxs-lookup"><span data-stu-id="71693-174">When you haven't defined any networks, all the automatically-discovered subnets are placed in the Default network.</span></span>

<span data-ttu-id="71693-175">Tutte le volte che si crea una rete, viene aggiunta una subnet che viene rimossa dalla rete predefinita.</span><span class="sxs-lookup"><span data-stu-id="71693-175">Whenever you create a network, you add a subnet to it and that subnet is removed from the Default network.</span></span> <span data-ttu-id="71693-176">Se si elimina una rete, tutte le sue subnet vengono restituite automaticamente alla rete predefinita.</span><span class="sxs-lookup"><span data-stu-id="71693-176">If you delete a network, all its subnets are automatically returned to the Default network.</span></span>

<span data-ttu-id="71693-177">In altre parole, la rete predefinita è il contenitore per tutte le subnet che non sono contenute in una rete definita dall'utente.</span><span class="sxs-lookup"><span data-stu-id="71693-177">In other words, the Default network is the container for all the subnets that are not contained in any user-defined network.</span></span> <span data-ttu-id="71693-178">Non è possibile modificare o eliminare la rete predefinita,</span><span class="sxs-lookup"><span data-stu-id="71693-178">You cannot edit or delete the Default network.</span></span> <span data-ttu-id="71693-179">che rimane sempre nel sistema.</span><span class="sxs-lookup"><span data-stu-id="71693-179">It always remains in the system.</span></span> <span data-ttu-id="71693-180">Tuttavia, è possibile creare tutte le reti necessarie.</span><span class="sxs-lookup"><span data-stu-id="71693-180">However, you can create as many networks as you need.</span></span>

<span data-ttu-id="71693-181">Nella maggior parte dei casi, le subnet all'interno dell'organizzazione verranno disposte in più di una rete e sarà necessario creare una o più reti per raggruppare logicamente le subnet.</span><span class="sxs-lookup"><span data-stu-id="71693-181">In most cases, the subnets in your organization will be arranged in more than one network and you should create one or more networks to logically group your subnets.</span></span>

### <a name="create-new-networks"></a><span data-ttu-id="71693-182">Creazione di nuove reti</span><span class="sxs-lookup"><span data-stu-id="71693-182">Create new networks</span></span>
<span data-ttu-id="71693-183">Una rete del monitoraggio delle prestazioni di rete è un contenitore per le subnet.</span><span class="sxs-lookup"><span data-stu-id="71693-183">A network in Network Performance Monitor is a container for subnets.</span></span> <span data-ttu-id="71693-184">È possibile creare una rete con qualsiasi nome e aggiungere subnet alla rete.</span><span class="sxs-lookup"><span data-stu-id="71693-184">You can create a network with any name that you want and add subnets to the network.</span></span> <span data-ttu-id="71693-185">Ad esempio, è possibile creare una rete di nome *Building1* e quindi aggiungere le subnet oppure è possibile creare una rete di nome *DMZ* e quindi aggiungere tutte le subnet appartenenti alla rete perimetrale.</span><span class="sxs-lookup"><span data-stu-id="71693-185">For example, you can create a network named *Building1* and then add subnets, or you can create a network named *DMZ* and then add all subnets belonging to demilitarized zone to this network.</span></span>

#### <a name="to-create-a-new-network"></a><span data-ttu-id="71693-186">Per creare una nuova rete</span><span class="sxs-lookup"><span data-stu-id="71693-186">To create a new network</span></span>
1. <span data-ttu-id="71693-187">Fare clic su **Aggiungi rete** e quindi digitare il nome e la descrizione della rete.</span><span class="sxs-lookup"><span data-stu-id="71693-187">Click **Add network** and then type the network name and description.</span></span>
2. <span data-ttu-id="71693-188">Selezionare una o più subnet e quindi fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="71693-188">Select one or more subnets, and then click **Add**.</span></span>
3. <span data-ttu-id="71693-189">Fare clic su **Salva** per salvare la configurazione.</span><span class="sxs-lookup"><span data-stu-id="71693-189">Click **Save** to save the configuration.</span></span>  
   <span data-ttu-id="71693-190">![aggiunta della rete](./media/log-analytics-network-performance-monitor/npm-add-network.png)</span><span class="sxs-lookup"><span data-stu-id="71693-190">![add network](./media/log-analytics-network-performance-monitor/npm-add-network.png)</span></span>

### <a name="wait-for-data-aggregation"></a><span data-ttu-id="71693-191">Attesa dell'aggregazione dei dati</span><span class="sxs-lookup"><span data-stu-id="71693-191">Wait for data aggregation</span></span>
<span data-ttu-id="71693-192">Dopo aver salvato la configurazione per la prima volta, la soluzione inizia a raccogliere informazioni su latenza e perdita di pacchetti di rete tra i nodi in cui sono installati gli agenti.</span><span class="sxs-lookup"><span data-stu-id="71693-192">After you've saved the configuration for first time, the solution starts collecting network packet loss and latency information between the nodes where agents are installed.</span></span> <span data-ttu-id="71693-193">Questo processo può richiedere del tempo, talvolta oltre 30 minuti.</span><span class="sxs-lookup"><span data-stu-id="71693-193">This process can take a while, sometimes over 30 minutes.</span></span> <span data-ttu-id="71693-194">In questo stato il riquadro Monitoraggio delle prestazioni di rete nella pagina di panoramica visualizza il messaggio *Aggregazione dei dati in corso*.</span><span class="sxs-lookup"><span data-stu-id="71693-194">During this state, the Network Performance Monitor tile in the overview page displays a message stating *Data aggregation in process*.</span></span>

![aggregazione dei dati in corso](./media/log-analytics-network-performance-monitor/npm-aggregation.png)

<span data-ttu-id="71693-196">Quando i dati sono stati caricati, il riquadro Monitoraggio delle prestazioni di rete aggiornato mostrerà i dati.</span><span class="sxs-lookup"><span data-stu-id="71693-196">When the data has been uploaded, you'll see the Network Performance Monitor tile updated showing data.</span></span>

![Riquadro Monitoraggio delle prestazioni di rete](./media/log-analytics-network-performance-monitor/npm-tile.png)

<span data-ttu-id="71693-198">Fare clic sul riquadro per visualizzare il dashboard di monitoraggio delle prestazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-198">Click the tile to view the Network Performance Monitor dashboard.</span></span>

![Dashboard di monitoraggio delle prestazioni di rete](./media/log-analytics-network-performance-monitor/npm-dash01.png)

### <a name="edit-monitoring-settings-for-subnets"></a><span data-ttu-id="71693-200">Modifica delle impostazioni di monitoraggio per le subnet</span><span class="sxs-lookup"><span data-stu-id="71693-200">Edit monitoring settings for subnets</span></span>
<span data-ttu-id="71693-201">Tutte le subnet in cui è stato installato almeno un agente sono elencate nella scheda **Subnet** della pagina di configurazione.</span><span class="sxs-lookup"><span data-stu-id="71693-201">All subnets where at least one agent was installed are listed on the **Subnetworks** tab in the configuration page.</span></span>

#### <a name="to-enable-or-disable-monitoring-for-particular-subnetworks"></a><span data-ttu-id="71693-202">Per abilitare o disabilitare il monitoraggio per determinate subnet</span><span class="sxs-lookup"><span data-stu-id="71693-202">To enable or disable monitoring for particular subnetworks</span></span>
1. <span data-ttu-id="71693-203">Selezionare o deselezionare la casella accanto all'**ID subnet** quindi verificare che sia selezionata o deselezionata l'opzione **Usa per il monitoraggio** in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="71693-203">Select or clear the box next to the **subnetwork ID** and then ensure that **Use for Monitoring** is selected or cleared, as appropriate.</span></span> <span data-ttu-id="71693-204">È possibile selezionare o deselezionare più subnet.</span><span class="sxs-lookup"><span data-stu-id="71693-204">You can select or clear multiple subnets.</span></span> <span data-ttu-id="71693-205">Se disabilitate, le subnet non vengono monitorate perché gli agenti verranno aggiornati in modo da interrompere l'esecuzione di ping di altri agenti.</span><span class="sxs-lookup"><span data-stu-id="71693-205">When disabled, subnetworks are not monitored as the agents will be updated to stop pinging other agents.</span></span>
2. <span data-ttu-id="71693-206">Scegliere i nodi da monitorare per una determinata subnet selezionando la subnet dall'elenco e spostando i nodi necessari tra gli elenchi che contengono nodi monitorati e non monitorati.</span><span class="sxs-lookup"><span data-stu-id="71693-206">Choose the nodes that you want to monitor for a particular subnetwork by selecting the subnetwork from the list and moving the required nodes between the lists containing unmonitored and monitored nodes.</span></span>
   <span data-ttu-id="71693-207">Se si desidera, è possibile aggiungere una **descrizione** alla subnet.</span><span class="sxs-lookup"><span data-stu-id="71693-207">You can add a custom **description** to the subnetwork, if you like.</span></span>
3. <span data-ttu-id="71693-208">Fare clic su **Salva** per salvare la configurazione.</span><span class="sxs-lookup"><span data-stu-id="71693-208">Click **Save** to save the configuration.</span></span>  
   <span data-ttu-id="71693-209">![modifica della subnet](./media/log-analytics-network-performance-monitor/npm-edit-subnet.png)</span><span class="sxs-lookup"><span data-stu-id="71693-209">![edit subnet](./media/log-analytics-network-performance-monitor/npm-edit-subnet.png)</span></span>

### <a name="choose-nodes-to-monitor"></a><span data-ttu-id="71693-210">Selezionare i nodi da monitorare</span><span class="sxs-lookup"><span data-stu-id="71693-210">Choose nodes to monitor</span></span>
<span data-ttu-id="71693-211">Tutti i nodi su cui è installato un agente sono elencati nella scheda **Nodi**.</span><span class="sxs-lookup"><span data-stu-id="71693-211">All the nodes that have an agent installed on them are listed in the **Nodes** tab.</span></span>

#### <a name="to-enable-or-disable-monitoring-for-nodes"></a><span data-ttu-id="71693-212">Per abilitare o disabilitare il monitoraggio per i nodi</span><span class="sxs-lookup"><span data-stu-id="71693-212">To enable or disable monitoring for nodes</span></span>
1. <span data-ttu-id="71693-213">Selezionare o deselezionare i nodi per cui si desidera abilitare o interrompere il monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="71693-213">Select or clear the nodes that you want to monitor or stop monitoring.</span></span>
2. <span data-ttu-id="71693-214">Fare clic su **Usa per il monitoraggio** oppure deselezionare l'opzione in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="71693-214">Click **Use for Monitoring**, or clear it, as appropriate.</span></span>
3. <span data-ttu-id="71693-215">Fare clic su **Save**.</span><span class="sxs-lookup"><span data-stu-id="71693-215">Click **Save**.</span></span>  
   <span data-ttu-id="71693-216">![abilitazione del monitoraggio dei nodi](./media/log-analytics-network-performance-monitor/npm-enable-node-monitor.png)</span><span class="sxs-lookup"><span data-stu-id="71693-216">![enable node monitoring](./media/log-analytics-network-performance-monitor/npm-enable-node-monitor.png)</span></span>

### <a name="set-monitoring-rules"></a><span data-ttu-id="71693-217">Set di regole di monitoraggio</span><span class="sxs-lookup"><span data-stu-id="71693-217">Set monitoring rules</span></span>
<span data-ttu-id="71693-218">Il monitoraggio delle prestazioni di rete genera eventi di integrità sulla connettività tra una coppia di nodi oppure collegamenti di rete o subnet quando viene superata una soglia.</span><span class="sxs-lookup"><span data-stu-id="71693-218">Network Performance Monitor generates health events about the connectivity between a pair of nodes or subnetwork or network links when a threshold is breached.</span></span> <span data-ttu-id="71693-219">Queste soglie possono essere acquisite automaticamente dal sistema oppure possono essere configurate come regole di avviso personalizzate.</span><span class="sxs-lookup"><span data-stu-id="71693-219">These thresholds can be learned automatically by the system or you can configure them custom alert rules.</span></span>

<span data-ttu-id="71693-220">La *regola predefinita* viene creata dal sistema e crea un evento di integrità ogni volta che la perdita o la latenza tra qualsiasi coppia di reti o collegamenti di subnet supera la soglia acquisita dal sistema.</span><span class="sxs-lookup"><span data-stu-id="71693-220">The *Default rule* is created by the system and it creates a health event whenever loss or latency between any pair of networks or subnetwork links breaches the system-learned threshold.</span></span> <span data-ttu-id="71693-221">È possibile scegliere di disabilitare la regola predefinita e creare regole di monitoraggio personalizzate</span><span class="sxs-lookup"><span data-stu-id="71693-221">You can choose to disable the default rule and create custom monitoring rules</span></span>

#### <a name="to-create-custom-monitoring-rules"></a><span data-ttu-id="71693-222">Per creare regole di monitoraggio personalizzate</span><span class="sxs-lookup"><span data-stu-id="71693-222">To create custom monitoring rules</span></span>
1. <span data-ttu-id="71693-223">Fare clic su **Aggiungi regola** nella scheda **Monitoraggio**, quindi immettere il nome e la descrizione della regola.</span><span class="sxs-lookup"><span data-stu-id="71693-223">Click **Add Rule** in the **Monitor** tab and enter the rule name and description.</span></span>
2. <span data-ttu-id="71693-224">Selezionare dall'elenco la coppia di collegamenti di rete o subnet da monitorare.</span><span class="sxs-lookup"><span data-stu-id="71693-224">Select the pair of network or subnetwork links to monitor from the lists.</span></span>
3. <span data-ttu-id="71693-225">Innanzitutto selezionare la rete che contiene una o più subnet di interesse nell'elenco a discesa di rete, quindi selezionare le subnet dal corrispondente elenco a discesa delle subnet.</span><span class="sxs-lookup"><span data-stu-id="71693-225">First select the network in which the first subnetwork/s of interest is contained from the network dropdown, and then select the subnetwork/s from the corresponding subnetwork dropdown.</span></span>
   <span data-ttu-id="71693-226">Se si desidera monitorare tutte le subnet in un collegamento di rete, scegliere **Tutte le subnet**.</span><span class="sxs-lookup"><span data-stu-id="71693-226">Select **All subnetworks** if you want to monitor all the subnetworks in a network link.</span></span> <span data-ttu-id="71693-227">Analogamente, selezionare una o più altre subnet di interesse.</span><span class="sxs-lookup"><span data-stu-id="71693-227">Similarly select the other subnetwork/s of interest.</span></span> <span data-ttu-id="71693-228">Inoltre è possibile fare clic su **Aggiungi eccezione** per escludere il monitoraggio per particolari collegamenti di subnet dalla selezione effettuata.</span><span class="sxs-lookup"><span data-stu-id="71693-228">And, you can click **Add Exception** to exclude monitoring for particular subnetwork links from the selection you've made.</span></span>
4. <span data-ttu-id="71693-229">Scegliere tra i protocolli TCP e ICMP per l'esecuzione di transazioni sintetiche.</span><span class="sxs-lookup"><span data-stu-id="71693-229">Choose between ICMP and TCP protocols for executing synthetic transactions.</span></span>
5. <span data-ttu-id="71693-230">Se non si desidera creare eventi di integrità per gli elementi selezionati, deselezionare **Abilita monitoraggio dell'integrità nei collegamenti interessati da questa regola**.</span><span class="sxs-lookup"><span data-stu-id="71693-230">If you don't want to create health events for the items you've selected, then clear **Enable health monitoring on the links covered by this rule**.</span></span>
6. <span data-ttu-id="71693-231">Scegliere le condizioni di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="71693-231">Choose monitoring conditions.</span></span>
   <span data-ttu-id="71693-232">È possibile impostare soglie personalizzate per la generazione di eventi di integrità digitando i valori di soglia.</span><span class="sxs-lookup"><span data-stu-id="71693-232">You can set custom thresholds for health event generation by typing threshold values.</span></span> <span data-ttu-id="71693-233">Ogni volta che il valore della condizione supera la soglia selezionata per la coppia di rete/subnet selezionata, viene generato un evento di integrità.</span><span class="sxs-lookup"><span data-stu-id="71693-233">Whenever the value of the condition goes above its selected threshold for the selected network/subnetwork pair, a health event is generated.</span></span>
7. <span data-ttu-id="71693-234">Fare clic su **Salva** per salvare la configurazione.</span><span class="sxs-lookup"><span data-stu-id="71693-234">Click **Save** to save the configuration.</span></span>  
   <span data-ttu-id="71693-235">![creazione di una regola di monitoraggio personalizzata](./media/log-analytics-network-performance-monitor/npm-monitor-rule.png)</span><span class="sxs-lookup"><span data-stu-id="71693-235">![create custom monitoring rule](./media/log-analytics-network-performance-monitor/npm-monitor-rule.png)</span></span>

<span data-ttu-id="71693-236">Dopo avere salvato una regola di monitoraggio, è possibile integrarla con Gestione avvisi facendo clic su **Crea avviso**.</span><span class="sxs-lookup"><span data-stu-id="71693-236">After you save a monitoring rule, you can integrate that rule with Alert Management by clicking **Create Alert**.</span></span> <span data-ttu-id="71693-237">Una regola di avviso viene creata automaticamente con la query di ricerca e altri parametri obbligatori automaticamente compilati.</span><span class="sxs-lookup"><span data-stu-id="71693-237">An alert rule is automatically created with the search query and other required parameters automatically filled-in.</span></span> <span data-ttu-id="71693-238">Usando una regola di avviso, è possibile ricevere avvisi basati sulla posta elettronica, oltre agli avvisi esistenti in NPM.</span><span class="sxs-lookup"><span data-stu-id="71693-238">Using an alert rule, you can receive email-based alerts, in addition to the existing alerts within NPM.</span></span> <span data-ttu-id="71693-239">Gli avvisi possono anche attivare azioni correttive con i runbook oppure possono essere integrati con le soluzione di gestione esistenti usando i webhook.</span><span class="sxs-lookup"><span data-stu-id="71693-239">Alerts can also trigger remedial actions with runbooks or they can integrate with existing service management solutions using webhooks.</span></span> <span data-ttu-id="71693-240">È possibile fare clic su **Manage Alert** (Gestisci avviso) per modificare le impostazioni dell'avviso.</span><span class="sxs-lookup"><span data-stu-id="71693-240">You can click **Manage Alert** to edit the alert settings.</span></span>

### <a name="choose-the-right-protocol-icmp-or-tcp"></a><span data-ttu-id="71693-241">Scegliere il protocollo ICMP o TCP corretto</span><span class="sxs-lookup"><span data-stu-id="71693-241">Choose the right protocol-ICMP or TCP</span></span>

<span data-ttu-id="71693-242">Monitoraggio prestazioni rete (NPM) usa le transazioni sintetiche per calcolare le metriche delle prestazioni di rete come la latenza di collegamento e la perdita di pacchetti.</span><span class="sxs-lookup"><span data-stu-id="71693-242">Network Performance Monitor (NPM) uses synthetic transactions to calculate network performance metrics like packet loss and link latency.</span></span> <span data-ttu-id="71693-243">Per comprendere meglio questo concetto, si consideri un agente NPM connesso a un'estremità di un collegamento di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-243">To understand this better, consider an NPM agent connected to one end of a network link.</span></span> <span data-ttu-id="71693-244">L'agente NPM invia pacchetti probe a un secondo agente NPM connesso a un'altra estremità della rete.</span><span class="sxs-lookup"><span data-stu-id="71693-244">This NPM agent sends probe packets to a second NPM agent connected to another end of the network.</span></span> <span data-ttu-id="71693-245">Il secondo agente risponde con pacchetti di risposta.</span><span class="sxs-lookup"><span data-stu-id="71693-245">The second agent replies with response packets.</span></span> <span data-ttu-id="71693-246">Questo processo viene ripetuto più volte.</span><span class="sxs-lookup"><span data-stu-id="71693-246">This process is repeated a few times.</span></span> <span data-ttu-id="71693-247">Misurando il numero di risposte e il tempo impiegato per ricevere ogni risposta, il primo agente NPM valuta la latenza del collegamento e la perdita dei pacchetti.</span><span class="sxs-lookup"><span data-stu-id="71693-247">By measuring the number of replies and time taken to receive each reply, the first NPM agent assesses link latency and packet drops.</span></span>

<span data-ttu-id="71693-248">Il formato, le dimensioni e la sequenza di questi pacchetti dipendono dal protocollo scelto durante la creazione delle regole di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="71693-248">The format, size and sequence of these packets is determined by the protocol that you choose when you create monitoring rules.</span></span> <span data-ttu-id="71693-249">In base al protocollo dei pacchetti, i dispositivi di rete intermedi (router, commutatori e così via) potrebbero elaborare questi pacchetti in modo diverso.</span><span class="sxs-lookup"><span data-stu-id="71693-249">Based on protocol of the packets, the intermediate network devices (routers, switches etc.) might process these packets differently.</span></span> <span data-ttu-id="71693-250">Di conseguenza, la scelta del protocollo influisce sulla precisione dei risultati.</span><span class="sxs-lookup"><span data-stu-id="71693-250">Consequently, your protocol choice affects the accuracy of the results.</span></span> <span data-ttu-id="71693-251">Inoltre la scelta del protocollo determina anche l'eventuale necessità di eseguire alcuni passaggi manuali dopo aver distribuito la soluzione NPM.</span><span class="sxs-lookup"><span data-stu-id="71693-251">And, your protocol choice also determines whether you must take any manual steps after you deploy the NPM solution.</span></span>

<span data-ttu-id="71693-252">NPM offre la possibilità di scegliere tra i protocolli TCP e ICMP per l'esecuzione di transazioni sintetiche.</span><span class="sxs-lookup"><span data-stu-id="71693-252">NPM offers you the choice between ICMP and TCP protocols for executing synthetic transactions.</span></span>
<span data-ttu-id="71693-253">Se si sceglie il protocollo ICMP quando si crea una regola di transazione sintetica, gli agenti NPM usano messaggi ICMP ECHO per calcolare la latenza di rete e la perdita di pacchetti.</span><span class="sxs-lookup"><span data-stu-id="71693-253">If you choose ICMP when you create a synthetic transaction rule, the NPM agents use ICMP ECHO messages to calculate the network latency and packet loss.</span></span> <span data-ttu-id="71693-254">ICMP ECHO usa lo stesso messaggio che viene inviato dall'utilità Ping convenzionale.</span><span class="sxs-lookup"><span data-stu-id="71693-254">ICMP ECHO uses the same message that is sent by the conventional Ping utility.</span></span> <span data-ttu-id="71693-255">Quando si usa il protocollo TCP, gli agenti NPM inviano pacchetti TCP SYN sulla rete.</span><span class="sxs-lookup"><span data-stu-id="71693-255">When you use TCP as the protocol, NPM agents send TCP SYN packet over the network.</span></span> <span data-ttu-id="71693-256">Questa operazione è seguita dal completamento di un handshake TCP e successivamente dalla rimozione della connessione tramite pacchetti RST.</span><span class="sxs-lookup"><span data-stu-id="71693-256">This is followed by a TCP handshake completion and then removing the connection using RST packets.</span></span>

#### <a name="points-to-consider-before-choosing-the-protocol"></a><span data-ttu-id="71693-257">Aspetti da considerare prima di scegliere il protocollo</span><span class="sxs-lookup"><span data-stu-id="71693-257">Points to consider before choosing the protocol</span></span>
<span data-ttu-id="71693-258">Prima scegliere il protocollo, tenere in considerazione le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="71693-258">Consider the following information before you choose a protocol to use:</span></span>

##### <a name="discovering-multiple-network-routes"></a><span data-ttu-id="71693-259">Individuazione di più route di rete</span><span class="sxs-lookup"><span data-stu-id="71693-259">Discovering multiple network routes</span></span>
<span data-ttu-id="71693-260">TCP offre una maggiore precisione nell'individuazione di più route e necessita di un minor numero di agenti in ogni subnet.</span><span class="sxs-lookup"><span data-stu-id="71693-260">TCP is more accurate when discovering multiple routes and it needs fewer agents in each subnet.</span></span> <span data-ttu-id="71693-261">Ad esempio, uno o due agenti con TCP possono individuare tutti i percorsi ridondanti tra subnet.</span><span class="sxs-lookup"><span data-stu-id="71693-261">For example, one or two agents using TCP can discover all redundant paths between subnets.</span></span> <span data-ttu-id="71693-262">Invece, per ottenere risultati simili con il protocollo ICMP, servono più agenti.</span><span class="sxs-lookup"><span data-stu-id="71693-262">However, you need several agents using ICMP to achieve similar results.</span></span> <span data-ttu-id="71693-263">Con ICMP, se si dispone di *N* numero di route tra due subnet, è necessario usare più di 5*N* agenti nella subnet di origine o destinazione.</span><span class="sxs-lookup"><span data-stu-id="71693-263">Using ICMP, if you have *N* number of routes between two subnets you need more than 5*N* agents in either a source or destination subnet.</span></span>

##### <a name="accuracy-of-results"></a><span data-ttu-id="71693-264">Precisione dei risultati</span><span class="sxs-lookup"><span data-stu-id="71693-264">Accuracy of results</span></span>
<span data-ttu-id="71693-265">I router e i commutatori tendono ad assegnare una priorità inferiore ai pacchetti ICMP ECHO rispetto ai pacchetti TCP.</span><span class="sxs-lookup"><span data-stu-id="71693-265">Routers and switches tend to assign lower priority to ICMP ECHO packets compared to TCP packets.</span></span> <span data-ttu-id="71693-266">In determinati casi, quando è presente un carico eccessivo dei dispositivi di rete, i dati ottenuti dal protocollo TCP riflettono più da vicino la perdita e la latenza sperimentate dalle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="71693-266">In certain situations, when network devices are heavily loaded, the data obtained by TCP more closely reflects the loss and latency experienced by applications.</span></span> <span data-ttu-id="71693-267">Ciò si verifica perché la maggior parte del traffico delle applicazioni fluisce attraverso TCP.</span><span class="sxs-lookup"><span data-stu-id="71693-267">This occurs because most of the application traffic flows over TCP.</span></span> <span data-ttu-id="71693-268">In questi casi, il protocollo ICMP fornisce risultati meno precisi rispetto a TCP.</span><span class="sxs-lookup"><span data-stu-id="71693-268">In such cases, ICMP provides less accurate results compared to TCP.</span></span>

##### <a name="firewall-configuration"></a><span data-ttu-id="71693-269">Configurazione del firewall</span><span class="sxs-lookup"><span data-stu-id="71693-269">Firewall configuration</span></span>
<span data-ttu-id="71693-270">Il protocollo TCP prevede che i pacchetti TCP vengano inviati a una porta di destinazione.</span><span class="sxs-lookup"><span data-stu-id="71693-270">TCP protocol requires that TCP packets are sent to a destination port.</span></span> <span data-ttu-id="71693-271">La porta predefinita usata dagli agenti NPM è la porta 8084, tuttavia è possibile cambiarla quando si configurano gli agenti.</span><span class="sxs-lookup"><span data-stu-id="71693-271">The default port used by NPM agents is 8084, however you can change this when you configure agents.</span></span> <span data-ttu-id="71693-272">È quindi necessario accertarsi che i firewall di rete o regole NSG (in Azure) consentano il traffico sulla porta.</span><span class="sxs-lookup"><span data-stu-id="71693-272">So, you need to ensure that your network firewalls or NSG rules (in Azure) are allowing traffic on the port.</span></span> <span data-ttu-id="71693-273">È necessario assicurarsi che anche il firewall locale nei computer in cui sono installati gli agenti sia configurato per consentire il traffico su questa porta.</span><span class="sxs-lookup"><span data-stu-id="71693-273">You also need to make sure that the local firewall on the computers where agents are installed is configured to allow traffic on this port.</span></span>

<span data-ttu-id="71693-274">È possibile usare gli script di PowerShell per configurare le regole del firewall nei computer che eseguono Windows. Il firewall di rete deve invece essere configurato manualmente.</span><span class="sxs-lookup"><span data-stu-id="71693-274">You can use PowerShell scripts to configure firewall rules on your computers running Windows, however you need to configure your network firewall manually.</span></span>

<span data-ttu-id="71693-275">Il protocollo ICMP invece non opera tramite porta.</span><span class="sxs-lookup"><span data-stu-id="71693-275">In contrast, ICMP does not operate using port.</span></span> <span data-ttu-id="71693-276">Nella maggior parte degli scenari aziendali, il traffico ICMP può fluire attraverso i firewall per consentire l'uso degli strumenti di diagnostica di rete come l'utilità Ping.</span><span class="sxs-lookup"><span data-stu-id="71693-276">In most enterprise scenarios, ICMP traffic is permitted through the firewalls to allow you to use network diagnostics tools like the Ping utility.</span></span> <span data-ttu-id="71693-277">Pertanto, se è possibile eseguire il Ping da un computer ad un altro, è possibile usare il protocollo ICMP senza dover configurare i firewall manualmente.</span><span class="sxs-lookup"><span data-stu-id="71693-277">So, if you can Ping one machine from another, then you can use the ICMP protocol without having to configure firewalls manually.</span></span>

> [!NOTE]
> <span data-ttu-id="71693-278">Nel caso in cui non si sia certi di quale protocollo usare, è consigliabile iniziare con il protocollo ICMP.</span><span class="sxs-lookup"><span data-stu-id="71693-278">In case you are not sure what protocol to use, choose ICMP to start with.</span></span> <span data-ttu-id="71693-279">Se non si è soddisfatti dei risultati, è sempre possibile passare a TCP in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="71693-279">If you are not satisfied with the results, you can always switch to TCP later.</span></span>


#### <a name="how-to-switch-the-protocol"></a><span data-ttu-id="71693-280">Come cambiare protocollo</span><span class="sxs-lookup"><span data-stu-id="71693-280">How to switch the protocol</span></span>

<span data-ttu-id="71693-281">Se si sceglie di usare ICMP durante la distribuzione, è possibile passare a TCP in qualsiasi momento modificando la regola di monitoraggio predefinita.</span><span class="sxs-lookup"><span data-stu-id="71693-281">If you chose to use ICMP during deployment, you can switch to TCP at any time by editing the default monitoring rule.</span></span>

##### <a name="to-edit-the-default-monitoring-rule"></a><span data-ttu-id="71693-282">Per modificare la regola di monitoraggio predefinita</span><span class="sxs-lookup"><span data-stu-id="71693-282">To edit the default monitoring rule</span></span>
1.  <span data-ttu-id="71693-283">Passare a **Monitoraggio prestazioni** > **rete** > **Configura** > **Monitor** e quindi fare clic su **Regola predefinita**.</span><span class="sxs-lookup"><span data-stu-id="71693-283">Navigate to **Network Performance** > **Monitor** > **Configure** > **Monitor** and then click **Default rule**.</span></span>
2.  <span data-ttu-id="71693-284">Passare alla sezione **Protocollo** e selezionare il protocollo che si desidera usare.</span><span class="sxs-lookup"><span data-stu-id="71693-284">Scroll to the **Protocol** section and select the protocol that you want to use.</span></span>
3.  <span data-ttu-id="71693-285">Fare clic su **Salva** per salvare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="71693-285">Click **Save** to apply the setting.</span></span>

<span data-ttu-id="71693-286">Anche se la regola predefinita usa un protocollo specifico, è possibile creare nuove regole con un protocollo diverso.</span><span class="sxs-lookup"><span data-stu-id="71693-286">Even if the default rule is using a specific protocol, you can create new rules with a different protocol.</span></span> <span data-ttu-id="71693-287">È anche possibile creare una combinazione di regole in cui alcune usano ICMP e altre usano TCP.</span><span class="sxs-lookup"><span data-stu-id="71693-287">You can even create a mix of rules where some of the rules use ICMP and another uses TCP.</span></span>




## <a name="data-collection-details"></a><span data-ttu-id="71693-288">Informazioni dettagliate sulla raccolta di dati</span><span class="sxs-lookup"><span data-stu-id="71693-288">Data collection details</span></span>
<span data-ttu-id="71693-289">Monitoraggio delle prestazioni di rete usa pacchetti di handshake TCP SYN-SYNACK-ACK quando viene scelto TCP e ICMP ECHO ICMP ECHO REPLY quando viene scelto ICMP come protocollo per raccogliere informazioni sulle perdite e sulla latenza.</span><span class="sxs-lookup"><span data-stu-id="71693-289">Network Performance Monitor uses TCP SYN-SYNACK-ACK handshake packets when TCP is chosen and ICMP ECHO ICMP ECHO REPLY when ICMP is chosen as the protocol to collect loss and latency information.</span></span> <span data-ttu-id="71693-290">Viene anche usato Traceroute per ottenere informazioni sulla topologia.</span><span class="sxs-lookup"><span data-stu-id="71693-290">Traceroute is also used to get topology information.</span></span>

<span data-ttu-id="71693-291">Nella tabella seguente vengono illustrati i metodi di raccolta dei dati e altri dettagli sulla modalità di raccolta dei dati per il monitoraggio delle prestazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-291">The following table shows data collection methods and other details about how data is collected for Network Performance Monitor.</span></span>

| <span data-ttu-id="71693-292">Piattaforma</span><span class="sxs-lookup"><span data-stu-id="71693-292">platform</span></span> | <span data-ttu-id="71693-293">Agente diretto</span><span class="sxs-lookup"><span data-stu-id="71693-293">Direct Agent</span></span> | <span data-ttu-id="71693-294">Agente SCOM</span><span class="sxs-lookup"><span data-stu-id="71693-294">SCOM agent</span></span> | <span data-ttu-id="71693-295">Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="71693-295">Azure Storage</span></span> | <span data-ttu-id="71693-296">SCOM obbligatorio?</span><span class="sxs-lookup"><span data-stu-id="71693-296">SCOM required?</span></span> | <span data-ttu-id="71693-297">Dati dell'agente SCOM inviati con il gruppo di gestione</span><span class="sxs-lookup"><span data-stu-id="71693-297">SCOM agent data sent via management group</span></span> | <span data-ttu-id="71693-298">frequenza della raccolta</span><span class="sxs-lookup"><span data-stu-id="71693-298">collection frequency</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="71693-299">Windows</span><span class="sxs-lookup"><span data-stu-id="71693-299">Windows</span></span> | <span data-ttu-id="71693-300">&#8226;</span><span class="sxs-lookup"><span data-stu-id="71693-300">&#8226;</span></span> | <span data-ttu-id="71693-301">&#8226;</span><span class="sxs-lookup"><span data-stu-id="71693-301">&#8226;</span></span> |  |  |  |<span data-ttu-id="71693-302">Handshake TCP/messaggi ICMP ECHO ogni 5 secondi, dati inviati ogni 3 minuti</span><span class="sxs-lookup"><span data-stu-id="71693-302">TCP handshakes/ICMP ECHO messages every 5 seconds, data sent every 3 minutes</span></span> |

<span data-ttu-id="71693-303">La soluzione usa le transazioni sintetiche per valutare l'integrità della rete.</span><span class="sxs-lookup"><span data-stu-id="71693-303">The solution uses synthetic transactions to assess the health of the network.</span></span> <span data-ttu-id="71693-304">Gli agenti OMS installati in vari punti della rete si scambiano pacchetti TCP o ICMP Echo (a seconda del protocollo selezionato per il monitoraggio).</span><span class="sxs-lookup"><span data-stu-id="71693-304">OMS agents installed at various point in the network exchange TCP packets or ICMP Echo (depending on the protocol selected for monitoring) with one another.</span></span> <span data-ttu-id="71693-305">Durante il processo, gli agenti vengono informati del tempo di round trip e di eventuali perdite di pacchetti.</span><span class="sxs-lookup"><span data-stu-id="71693-305">In the process, agents learn the round-trip time and packet loss, if any.</span></span> <span data-ttu-id="71693-306">Periodicamente, ogni agente esegue anche un comando di tracciamento delle route agli altri agenti per trovare tutte le varie route nella rete che devono essere verificate.</span><span class="sxs-lookup"><span data-stu-id="71693-306">Periodically, each agent also performs a trace route to other agents to find all the various routes in the network that must be tested.</span></span> <span data-ttu-id="71693-307">Usando questi dati, gli agenti possono dedurre i valori relativi a latenza di rete e perdita di pacchetti.</span><span class="sxs-lookup"><span data-stu-id="71693-307">Using this data, the agents can deduce the network latency and packet loss figures.</span></span> <span data-ttu-id="71693-308">I test vengono ripetuti ogni cinque secondi e i dati vengono aggregati per tre minuti dagli agenti prima del caricamento nel servizio Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="71693-308">The tests are repeated every five seconds and data is aggregated for a period of three minutes by the agents before uploading it to the Log Analytics service.</span></span>

> [!NOTE]
> <span data-ttu-id="71693-309">Anche se gli agenti comunicano spesso tra loro, non generano un traffico di rete intenso durante l'esecuzione dei test.</span><span class="sxs-lookup"><span data-stu-id="71693-309">Although agents communicate with each other frequently, they do not generate a lot of network traffic while conducting the tests.</span></span> <span data-ttu-id="71693-310">Gli agenti si basano solo sui pacchetti di handshake TCP SYN-SYNACK-ACK per determinare la perdita e la latenza, senza scambio di pacchetti di dati.</span><span class="sxs-lookup"><span data-stu-id="71693-310">Agents rely only on TCP SYN-SYNACK-ACK handshake packets to determine the loss and latency -- no data packets are exchanged.</span></span> <span data-ttu-id="71693-311">Durante questo processo, gli agenti comunicano tra loro solo quando è necessario e la topologia di comunicazione degli agenti è ottimizzata per ridurre il traffico di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-311">During this process, agents communicate with each other only when needed and the agent communication topology is optimized to reduce network traffic.</span></span>
>
>

## <a name="using-the-solution"></a><span data-ttu-id="71693-312">Uso della soluzione</span><span class="sxs-lookup"><span data-stu-id="71693-312">Using the solution</span></span>
<span data-ttu-id="71693-313">In questa sezione vengono illustrate tutte le funzioni del dashboard e si spiega come usarle.</span><span class="sxs-lookup"><span data-stu-id="71693-313">This section explains all the dashboard functions and how to use them.</span></span>

### <a name="solution-overview-tile"></a><span data-ttu-id="71693-314">Riquadro Panoramica della soluzione</span><span class="sxs-lookup"><span data-stu-id="71693-314">Solution Overview tile</span></span>
<span data-ttu-id="71693-315">Dopo aver abilitato la soluzione di monitoraggio delle prestazioni di rete, il riquadro della soluzione alla pagina Panoramica di OMS offre una rapida panoramica dell'integrità della rete.</span><span class="sxs-lookup"><span data-stu-id="71693-315">After you've enabled the Network Performance Monitor solution, the solution tile on the OMS Overview page provides a quick overview of the network health.</span></span> <span data-ttu-id="71693-316">Viene visualizzato un grafico ad anello che mostra il numero di collegamenti di subnet integri e non integri.</span><span class="sxs-lookup"><span data-stu-id="71693-316">It displays a doughnut chart showing the number of healthy and unhealthy subnetwork links.</span></span> <span data-ttu-id="71693-317">Quando si fa clic sul riquadro, viene aperto il dashboard della soluzione.</span><span class="sxs-lookup"><span data-stu-id="71693-317">When you click the tile, it opens the solution dashboard.</span></span>

![Riquadro Monitoraggio delle prestazioni di rete](./media/log-analytics-network-performance-monitor/npm-tile.png)

### <a name="network-performance-monitor-solution-dashboard"></a><span data-ttu-id="71693-319">Dashboard della soluzione di monitoraggio delle prestazioni di rete</span><span class="sxs-lookup"><span data-stu-id="71693-319">Network Performance Monitor solution dashboard</span></span>
<span data-ttu-id="71693-320">Il pannello **Riepilogo reti** mostra un riepilogo delle reti e le relative dimensioni.</span><span class="sxs-lookup"><span data-stu-id="71693-320">The **Network Summary** blade shows a summary of the networks along with their relative size.</span></span> <span data-ttu-id="71693-321">Il riepilogo è seguito da riquadri che mostrano il numero totale di collegamenti di rete, collegamenti di subnet e percorsi nel sistema (un percorso è costituito dagli indirizzi IP di due host con gli agenti e tutti gli hop tra di loro).</span><span class="sxs-lookup"><span data-stu-id="71693-321">This is followed by tiles showing total number of network links, subnet links and paths in the system (a path consists of the IP addresses of two hosts with agents and all the hops between them).</span></span>

<span data-ttu-id="71693-322">Il pannello **Principali eventi di integrità della rete** fornisce un elenco dei più recenti avvisi ed eventi di integrità nel sistema e specifica da quanto tempo è attivo l'evento.</span><span class="sxs-lookup"><span data-stu-id="71693-322">The **Top Network Health Events** blade provides a list of most recent health events and alerts in the system and the time since the event has been active.</span></span> <span data-ttu-id="71693-323">Un avviso o un evento di integrità viene generato ogni volta che la latenza o la perdita di pacchetti di un collegamento di rete o subnet supera una soglia.</span><span class="sxs-lookup"><span data-stu-id="71693-323">A health event or alert is generated whenever the packet loss or latency of a network or subnetwork link exceeds a threshold.</span></span>

<span data-ttu-id="71693-324">Nel pannello **Principali collegamenti di rete non integri** viene visualizzato un elenco di collegamenti di rete non integri.</span><span class="sxs-lookup"><span data-stu-id="71693-324">The **Top Unhealthy Network Links** blade shows a list of unhealthy network links.</span></span> <span data-ttu-id="71693-325">Si tratta dei collegamenti di rete che al momento presentano uno o più eventi di integrità collaterali.</span><span class="sxs-lookup"><span data-stu-id="71693-325">These are the network links that have one or more adverse health event for them at the moment.</span></span>

<span data-ttu-id="71693-326">Nei pannelli **Principali collegamenti di subnet con maggiore perdita** e **Collegamenti di subnet con maggiore latenza** vengono visualizzati i principali collegamenti di subnet rispettivamente in base alla perdita di pacchetti e alla latenza.</span><span class="sxs-lookup"><span data-stu-id="71693-326">The **Top Subnetwork Links with Most Loss** and **Subnetwork Links with Most Latency** blades show the top subnetwork links by packet loss and top subnetwork links by latency respectively.</span></span> <span data-ttu-id="71693-327">In determinati collegamenti di rete ci si può aspettare una latenza elevata o una certa perdita di pacchetti.</span><span class="sxs-lookup"><span data-stu-id="71693-327">High latency or some amount of packet loss might be expected on certain network links.</span></span> <span data-ttu-id="71693-328">Questi collegamenti vengono visualizzati fra i primi dieci in elenco ma non vengono contrassegnati come non integri.</span><span class="sxs-lookup"><span data-stu-id="71693-328">Such links appear in the top ten lists but are not marked unhealthy.</span></span>

<span data-ttu-id="71693-329">Il pannello **Query comuni** contiene una serie di query di ricerca che recuperano direttamente i dati di monitoraggio di rete non elaborati.</span><span class="sxs-lookup"><span data-stu-id="71693-329">The **Common Queries** blade contains a set of search queries that fetch raw network monitoring data directly.</span></span> <span data-ttu-id="71693-330">È possibile usare queste query come punto di partenza per creare le proprie query per l'elaborazione di report personalizzati.</span><span class="sxs-lookup"><span data-stu-id="71693-330">You can use these queries as a starting point for creating your own queries for customized reporting.</span></span>

![Dashboard di monitoraggio delle prestazioni di rete](./media/log-analytics-network-performance-monitor/npm-dash01.png)

### <a name="drill-down-for-depth"></a><span data-ttu-id="71693-332">Drill-down in profondità</span><span class="sxs-lookup"><span data-stu-id="71693-332">Drill-down for depth</span></span>
<span data-ttu-id="71693-333">È possibile fare clic su diversi collegamenti nel dashboard della soluzione per eseguire il drill-down più approfondito in qualsiasi area di interesse.</span><span class="sxs-lookup"><span data-stu-id="71693-333">You can click various links on the solution dashboard to drill-down deeper into any area of interest.</span></span> <span data-ttu-id="71693-334">Ad esempio, quando viene visualizzato un avviso o un collegamento di rete non integro del dashboard, è possibile fare clic per indagare più a fondo.</span><span class="sxs-lookup"><span data-stu-id="71693-334">For example, when you see an alert or an unhealthy network link appear on the dashboard, you can click it to investigate further.</span></span> <span data-ttu-id="71693-335">Si accederà a una pagina con un elenco di tutti i collegamenti di subnet per un particolare collegamento di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-335">You'll be taken to a page that lists all the subnetwork links for the particular network link.</span></span> <span data-ttu-id="71693-336">Sarà quindi possibile visualizzare lo stato di perdita, latenza e l'integrità di ogni collegamento di subnet e trovare rapidamente i collegamenti di subnet che causano il problema.</span><span class="sxs-lookup"><span data-stu-id="71693-336">You will be able to see the loss, latency and health status of each subnetwork link and quickly find out what subnetwork links are causing the problem.</span></span> <span data-ttu-id="71693-337">È quindi possibile fare clic su **Visualizza collegamenti nodo** per visualizzare tutti i collegamenti del nodo per il collegamento di subnet non integro.</span><span class="sxs-lookup"><span data-stu-id="71693-337">You can then click **View node links** to see all the node links for the unhealthy subnet link.</span></span> <span data-ttu-id="71693-338">È possibile vedere i singoli collegamenti tra nodi e trovare i collegamenti del nodo non integri.</span><span class="sxs-lookup"><span data-stu-id="71693-338">Then, you can see individual node-to-node links and find the unhealthy node links.</span></span>

<span data-ttu-id="71693-339">È possibile fare clic su **Visualizza topologia** per vedere la topologia hop-by-hop delle route tra i nodi di origine e di destinazione.</span><span class="sxs-lookup"><span data-stu-id="71693-339">You can click **View topology** to view the hop-by-hop topology of the routes between the source and destination nodes.</span></span> <span data-ttu-id="71693-340">Le route o gli hop non integri vengono mostrati in rosso per consentire di associare rapidamente il problema a una parte specifica della rete.</span><span class="sxs-lookup"><span data-stu-id="71693-340">The unhealthy routes or hops are shown in red so that you can quickly identify the problem to a particular portion of the network.</span></span>

![drill-down dei dati](./media/log-analytics-network-performance-monitor/npm-drill.png)

### <a name="network-state-recorder"></a><span data-ttu-id="71693-342">Utilità di registrazione dello stato di rete</span><span class="sxs-lookup"><span data-stu-id="71693-342">Network State Recorder</span></span>

<span data-ttu-id="71693-343">Ogni visualizzazione mostra uno snapshot dell'integrità della rete in un determinato momento.</span><span class="sxs-lookup"><span data-stu-id="71693-343">Each view displays a snapshot of your network health at a particular point in time.</span></span> <span data-ttu-id="71693-344">Per impostazione predefinita, viene visualizzato lo stato più recente.</span><span class="sxs-lookup"><span data-stu-id="71693-344">By default, the most recent state is shown.</span></span> <span data-ttu-id="71693-345">La barra nella parte superiore della pagina indica il momento per cui viene visualizzato lo stato.</span><span class="sxs-lookup"><span data-stu-id="71693-345">The bar at the top of the page shows the point in time for which the state is being displayed.</span></span> <span data-ttu-id="71693-346">È possibile scegliere di tornare indietro nel tempo e visualizzare lo snapshot dell'integrità della rete facendo clic su **Azioni** sulla barra.</span><span class="sxs-lookup"><span data-stu-id="71693-346">You can choose to go back in time and view the snapshot of your network health by clicking on the bar on **Actions**.</span></span> <span data-ttu-id="71693-347">È anche possibile scegliere di abilitare o disabilitare l'aggiornamento automatico per qualsiasi pagina mentre si visualizza lo stato più recente.</span><span class="sxs-lookup"><span data-stu-id="71693-347">You can also choose to enable or disable auto-refresh for any page while you view the latest state.</span></span>

![Stato della rete](./media/log-analytics-network-performance-monitor/network-state.png)

#### <a name="trend-charts"></a><span data-ttu-id="71693-349">Grafici delle tendenze</span><span class="sxs-lookup"><span data-stu-id="71693-349">Trend charts</span></span>
<span data-ttu-id="71693-350">In ogni livello del drill-down, è possibile vedere la tendenza di perdite e latenza per un collegamento di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-350">At each level that you drill-down, you can see the trend of loss and latency for a network link.</span></span> <span data-ttu-id="71693-351">I grafici di tendenza sono disponibili anche per i collegamenti della subnet e del nodo.</span><span class="sxs-lookup"><span data-stu-id="71693-351">Trend charts are also available for Subnetwork and Node links.</span></span> <span data-ttu-id="71693-352">È possibile modificare l'intervallo di tempo per il grafico da tracciare usando il controllo del tempo nella parte superiore del grafico.</span><span class="sxs-lookup"><span data-stu-id="71693-352">You can change the time interval for the graph to plot by using the time control at the top of the chart.</span></span>

<span data-ttu-id="71693-353">I grafici delle tendenze mostrano una prospettiva cronologica delle prestazioni di un collegamento di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-353">Trend charts show you a historical perspective of the performance of a network link.</span></span> <span data-ttu-id="71693-354">Alcuni problemi di rete sono di natura temporanea e sarebbero difficili da rilevare solo esaminando lo stato corrente della rete.</span><span class="sxs-lookup"><span data-stu-id="71693-354">Some network issues are transient in nature and would be hard to catch only by looking at the current state of the network.</span></span> <span data-ttu-id="71693-355">Infatti i problemi possono venire alla luce rapidamente e sparire prima che qualcuno li noti, per poi riapparire in un secondo momento.</span><span class="sxs-lookup"><span data-stu-id="71693-355">This is because issues can surface quickly and disappear before anyone notices, only to reappear at a later point in time.</span></span> <span data-ttu-id="71693-356">Tali problemi temporanei inoltre possono essere difficili per gli amministratori delle applicazioni, poiché spesso si presentano come aumenti inspiegabili nel tempo di risposta delle applicazioni, anche quando tutti i componenti delle applicazioni in apparenza vengono eseguiti correttamente.</span><span class="sxs-lookup"><span data-stu-id="71693-356">Such transient issues can also be difficult for application administrators because those issues often surface as unexplained increases in application response time, even when all application components appear to run smoothly.</span></span>

<span data-ttu-id="71693-357">È possibile rilevare facilmente questi tipi di problemi esaminando un grafico delle tendenze in cui il problema verrà visualizzato come un picco improvviso di latenza di rete o di perdita dei pacchetti.</span><span class="sxs-lookup"><span data-stu-id="71693-357">You can easily detect those kinds of issues by looking at a trend chart where the issue will appear as a sudden spike in network latency or packet loss.</span></span>

![grafico di tendenza](./media/log-analytics-network-performance-monitor/npm-trend.png)

#### <a name="hop-by-hop-topology-map"></a><span data-ttu-id="71693-359">Mappa topologica hop-by-hop</span><span class="sxs-lookup"><span data-stu-id="71693-359">Hop-by-hop topology map</span></span>
<span data-ttu-id="71693-360">Il monitoraggio delle prestazioni di rete mostra la topologia hop-by-hop delle route tra due nodi in una mappa topologica interattiva.</span><span class="sxs-lookup"><span data-stu-id="71693-360">Network Performance Monitor shows you the hop-by-hop topology of routes between two nodes on an interactive topology map.</span></span> <span data-ttu-id="71693-361">È possibile visualizzare la mappa topologica selezionando un collegamento del nodo e quindi facendo clic su **Visualizza topologia**.</span><span class="sxs-lookup"><span data-stu-id="71693-361">You can view the topology map by selecting a node link and then clicking **View topology**.</span></span> <span data-ttu-id="71693-362">Inoltre, è possibile visualizzare la mappa topologica facendo clic sul riquadro **Percorsi** del dashboard.</span><span class="sxs-lookup"><span data-stu-id="71693-362">Also, you can view the topology map by clicking **Paths** tile on the dashboard.</span></span> <span data-ttu-id="71693-363">Quando si fa clic sul riquadro **Percorsi** del dashboard, sarà necessario selezionare i nodi di origine e di destinazione dal pannello a sinistra, quindi fare clic su **Traccia** per tracciare le route tra i due nodi.</span><span class="sxs-lookup"><span data-stu-id="71693-363">When you click **Paths** on the dashboard, you'll have to select the source and destination nodes from the left hand panel and then click **Plot** to plot the routes between the two nodes.</span></span>

<span data-ttu-id="71693-364">La mappa topologica visualizza la quantità di route presenti tra i due nodi e i percorsi intrapresi dai pacchetti di dati.</span><span class="sxs-lookup"><span data-stu-id="71693-364">The topology map displays how many routes are between the two nodes and what paths the data packets take.</span></span> <span data-ttu-id="71693-365">I colli di bottiglia delle prestazioni di rete sono contrassegnati in rosso nella mappa topologica.</span><span class="sxs-lookup"><span data-stu-id="71693-365">Network performance bottlenecks are marked in red on the topology map.</span></span> <span data-ttu-id="71693-366">È possibile individuare connessioni o dispositivi di rete difettosi esaminando gli elementi in rosso sulla mappa topologica.</span><span class="sxs-lookup"><span data-stu-id="71693-366">You can locate a faulty network connection or a faulty network device by looking at red colored elements on the topology map.</span></span>

<span data-ttu-id="71693-367">Quando si fa clic su un nodo o si passa il puntatore del mouse su tale nodo nella mappa topologica, vengono visualizzate le proprietà del nodo, ad esempio FQDN e indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="71693-367">When you click a node or hover over it on the topology map, you'll see the properties of the node like FQDN and IP address.</span></span> <span data-ttu-id="71693-368">Fare clic su un hop per visualizzarne l'indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="71693-368">Click a hop to see it's IP address.</span></span> <span data-ttu-id="71693-369">È possibile scegliere di filtrare determinate route usando i filtri nel riquadro azioni comprimibile.</span><span class="sxs-lookup"><span data-stu-id="71693-369">You can choose to filter particular routes by using the filters in the collapsible action pane.</span></span> <span data-ttu-id="71693-370">È anche possibile semplificare le topologie di rete nascondendo gli hop intermedi con il dispositivo di scorrimento nel riquadro azioni.</span><span class="sxs-lookup"><span data-stu-id="71693-370">And, you can also simplify the network topologies by hiding the intermediate hops using the slider in the action pane.</span></span> <span data-ttu-id="71693-371">È possibile ingrandire o ridurre la mappa topologica usando la rotellina del mouse.</span><span class="sxs-lookup"><span data-stu-id="71693-371">You can zoom-in or out of the topology map by using your mouse wheel.</span></span>

<span data-ttu-id="71693-372">Si noti che la topologia illustrata sulla mappa è di livello 3 e non contiene connessioni e dispositivi di livello 2.</span><span class="sxs-lookup"><span data-stu-id="71693-372">Note that the topology shown in the map is layer 3 topology and doesn't contain layer 2 devices and connections.</span></span>

![mappa topologica hop-by-hop](./media/log-analytics-network-performance-monitor/npm-topology.png)

#### <a name="fault-localization"></a><span data-ttu-id="71693-374">Individuazione degli errori</span><span class="sxs-lookup"><span data-stu-id="71693-374">Fault localization</span></span>
<span data-ttu-id="71693-375">Il monitoraggio delle prestazioni di rete è in grado di individuare i colli di bottiglia di rete senza connettersi a dispositivi di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-375">Network Performance Monitor is able to find the network bottlenecks without connecting to the network devices.</span></span> <span data-ttu-id="71693-376">In base ai dati raccolti dalla rete e applicando algoritmi avanzati sul grafico della rete, il monitoraggio delle prestazioni di rete esegue una stima probabilistica delle parti della rete che hanno più probabilità di aver causato l'errore.</span><span class="sxs-lookup"><span data-stu-id="71693-376">Based on the data that it gathers from the network and by applying advanced algorithms on the network graph, Network Performance Monitor makes a probabilistic estimate of the parts of network that are most likely the source of the problem.</span></span>

<span data-ttu-id="71693-377">Questo approccio è utile per determinare i colli di bottiglia di rete quando l'accesso agli hop non è disponibile perché non richiede la raccolta di dati da dispositivi di rete come router o switch.</span><span class="sxs-lookup"><span data-stu-id="71693-377">This approach is useful to determine the network bottlenecks when access to hops isn't available because it doesn't require any data to be gathered from the network devices such as routers or switches.</span></span> <span data-ttu-id="71693-378">È utile anche quando l'utente non dispone del controllo amministrativo sugli hop tra due nodi.</span><span class="sxs-lookup"><span data-stu-id="71693-378">This is also useful when the hops between two nodes are not in your administrative control.</span></span> <span data-ttu-id="71693-379">Ad esempio, gli hop possono essere router ISP.</span><span class="sxs-lookup"><span data-stu-id="71693-379">For example, the hops may be ISP routers.</span></span>

### <a name="log-analytics-search"></a><span data-ttu-id="71693-380">Ricerca di Log Analytics</span><span class="sxs-lookup"><span data-stu-id="71693-380">Log Analytics search</span></span>
<span data-ttu-id="71693-381">Tutti i dati esposti graficamente attraverso il dashboard di monitoraggio delle prestazioni di rete e le pagine di drill-down sono disponibili in modalità nativa nella ricerca di Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="71693-381">All data that is exposed graphically through the Network Performance Monitor dashboard and drill-down pages is also available natively in Log Analytics search.</span></span> <span data-ttu-id="71693-382">È possibile eseguire query sui dati usando il linguaggio delle query di ricerca e creare report personalizzati esportando i dati in Excel o Power BI.</span><span class="sxs-lookup"><span data-stu-id="71693-382">You can query the data using the search query language and create custom reports by exporting the data to Excel or PowerBI.</span></span> <span data-ttu-id="71693-383">Nel pannello **Query comuni** del dashboard sono riportate alcune query utili che è possibile usare come punto di partenza per creare query e report.</span><span class="sxs-lookup"><span data-stu-id="71693-383">The **Common Queries** blade in the dashboard has some useful queries that you can use as the starting point for creating your own queries and reports.</span></span>

![query di ricerca](./media/log-analytics-network-performance-monitor/npm-queries.png)

## <a name="investigate-the-root-cause-of-a-health-alert"></a><span data-ttu-id="71693-385">Indagare sulla causa radice di un avviso di integrità</span><span class="sxs-lookup"><span data-stu-id="71693-385">Investigate the root cause of a health alert</span></span>
<span data-ttu-id="71693-386">Ora che è stata eseguita una panoramica sul monitoraggio delle prestazioni di rete, si passerà a una semplice indagine sulla causa radice di un avviso di integrità.</span><span class="sxs-lookup"><span data-stu-id="71693-386">Now that you've read about Network Performance Monitor, let's look at a simple investigation into the root-cause for a health event.</span></span>

1. <span data-ttu-id="71693-387">Nella pagina Panoramica è possibile trovare una rapida panoramica dell'integrità della rete osservando il riquadro **Monitoraggio delle prestazioni di rete**.</span><span class="sxs-lookup"><span data-stu-id="71693-387">On the Overview page, you'll get a quick snapshot of the health of your network by observing the **Network Performance Monitor** tile.</span></span> <span data-ttu-id="71693-388">Notare che, sui 6 collegamenti di subnet, 2 non sono integri.</span><span class="sxs-lookup"><span data-stu-id="71693-388">Notice that out of the 6 subnetworks links being monitored, 2 are unhealthy.</span></span> <span data-ttu-id="71693-389">Questo rende necessaria un'analisi.</span><span class="sxs-lookup"><span data-stu-id="71693-389">This warrants investigation.</span></span> <span data-ttu-id="71693-390">Fare clic sul riquadro per visualizzare il dashboard della soluzione.</span><span class="sxs-lookup"><span data-stu-id="71693-390">Click the tile to view the solution dashboard.</span></span>  
   <span data-ttu-id="71693-391">![Riquadro Monitoraggio delle prestazioni di rete](./media/log-analytics-network-performance-monitor/npm-investigation01.png)</span><span class="sxs-lookup"><span data-stu-id="71693-391">![Network Performance Monitor tile](./media/log-analytics-network-performance-monitor/npm-investigation01.png)</span></span>
2. <span data-ttu-id="71693-392">Nell'immagine di esempio seguente si può notare un evento di integrità, un collegamento di rete non integro.</span><span class="sxs-lookup"><span data-stu-id="71693-392">In the example image below, you'll notice that there is a health event a network link that is unhealthy.</span></span> <span data-ttu-id="71693-393">Analizzare il problema e fare clic sul collegamento **DMZ2-DMZ1** per scoprire la radice del problema.</span><span class="sxs-lookup"><span data-stu-id="71693-393">You decide to investigate the issue and click on the **DMZ2-DMZ1** network link to find out the root of the problem.</span></span>  
   <span data-ttu-id="71693-394">![esempio di collegamento di rete non integro](./media/log-analytics-network-performance-monitor/npm-investigation02.png)</span><span class="sxs-lookup"><span data-stu-id="71693-394">![unhealthy network link example](./media/log-analytics-network-performance-monitor/npm-investigation02.png)</span></span>
3. <span data-ttu-id="71693-395">Nella pagina di drill-down vengono visualizzati tutti i collegamenti di subnet nel collegamento di rete **DMZ2-DMZ1**.</span><span class="sxs-lookup"><span data-stu-id="71693-395">The drill-down page shows all the subnetwork links in **DMZ2-DMZ1** network link.</span></span> <span data-ttu-id="71693-396">Si noterà che per entrambi i collegamenti di subnet, la latenza ha superato la soglia, rendendo non integro il collegamento di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-396">You'll notice that for both the subnetwork links, the latency has crossed the threshold making the network link unhealthy.</span></span> <span data-ttu-id="71693-397">È inoltre possibile visualizzare le tendenze di latenza di entrambi i collegamenti di subnet.</span><span class="sxs-lookup"><span data-stu-id="71693-397">You can also see the latency trends of both the subnetwork links.</span></span> <span data-ttu-id="71693-398">È possibile usare il controllo di selezione dell'ora nel grafico per concentrarsi sull'intervallo di tempo richiesto.</span><span class="sxs-lookup"><span data-stu-id="71693-398">You can use the time selection control in the graph to focus on the required time range.</span></span> <span data-ttu-id="71693-399">È possibile visualizzare l'ora del giorno in cui la latenza ha raggiunto il picco.</span><span class="sxs-lookup"><span data-stu-id="71693-399">You can see the time of the day when latency has reached its peak.</span></span> <span data-ttu-id="71693-400">In un secondo momento, è possibile cercare questo periodo di tempo nei log per analizzare il problema.</span><span class="sxs-lookup"><span data-stu-id="71693-400">You can later search the logs for this time period to investigate the issue.</span></span> <span data-ttu-id="71693-401">Fare clic su **Visualizza collegamenti del nodo** per un drill-down più approfondito.</span><span class="sxs-lookup"><span data-stu-id="71693-401">Click **View node links** to drill-down further.</span></span>  
   <span data-ttu-id="71693-402">![esempio di collegamenti della subnet non integri](./media/log-analytics-network-performance-monitor/npm-investigation03.png)</span><span class="sxs-lookup"><span data-stu-id="71693-402">![unhealthy subnet links example](./media/log-analytics-network-performance-monitor/npm-investigation03.png)</span></span>
4. <span data-ttu-id="71693-403">In modo simile alla pagina precedente, nella pagina di drill-down per un particolare collegamento di subnet vengono elencati i collegamenti del nodo che lo costituiscono.</span><span class="sxs-lookup"><span data-stu-id="71693-403">Similar to the previous page, the drill-down page for the particular subnetwork link lists down its constituent node links.</span></span> <span data-ttu-id="71693-404">È possibile eseguire azioni simili, come nel passaggio precedente.</span><span class="sxs-lookup"><span data-stu-id="71693-404">You can perform similar actions  here as you did in the previous step.</span></span> <span data-ttu-id="71693-405">Fare clic su **Visualizza topologia** per visualizzare la topologia tra i 2 nodi.</span><span class="sxs-lookup"><span data-stu-id="71693-405">Click **View topology** to view the topology between the 2 nodes.</span></span>  
   <span data-ttu-id="71693-406">![esempio di collegamenti del nodo non integri](./media/log-analytics-network-performance-monitor/npm-investigation04.png)</span><span class="sxs-lookup"><span data-stu-id="71693-406">![unhealthy node links example](./media/log-analytics-network-performance-monitor/npm-investigation04.png)</span></span>
5. <span data-ttu-id="71693-407">Tutti i percorsi tra i 2 nodi selezionati vengono tracciati nella mappa topologica.</span><span class="sxs-lookup"><span data-stu-id="71693-407">All the paths between the 2 selected nodes are plotted in the topology map.</span></span> <span data-ttu-id="71693-408">È possibile visualizzare la topologia hop-by-hop delle route tra due nodi nella mappa topologica.</span><span class="sxs-lookup"><span data-stu-id="71693-408">You can visualize the hop-by-hop topology of routes between two nodes on the topology map.</span></span> <span data-ttu-id="71693-409">Offre un quadro preciso del numero di route esistenti tra i due nodi e dei percorsi intrapresi dai pacchetti di dati.</span><span class="sxs-lookup"><span data-stu-id="71693-409">It gives you a clear picture of how many routes exist between the two nodes and what paths the data packets are taking.</span></span> <span data-ttu-id="71693-410">I colli di bottiglia delle prestazioni di rete sono contrassegnati in rosso.</span><span class="sxs-lookup"><span data-stu-id="71693-410">Network performance bottlenecks are marked in red color.</span></span> <span data-ttu-id="71693-411">È possibile individuare connessioni o dispositivi di rete difettosi esaminando gli elementi in rosso sulla mappa topologica.</span><span class="sxs-lookup"><span data-stu-id="71693-411">You can locate a faulty network connection or a faulty network device by looking at red colored elements on the topology map.</span></span>  
   ![esempio di visualizzazione della topologia non integra](./media/log-analytics-network-performance-monitor/npm-investigation05.png)
6. <span data-ttu-id="71693-413">È possibile visualizzare i dati relativi a perdita, latenza e numero di hop di ogni percorso nel riquadro **Azione**.</span><span class="sxs-lookup"><span data-stu-id="71693-413">The loss, latency, and the number of hops in each path can be reviewed in the **Action** pane.</span></span> <span data-ttu-id="71693-414">Usare la barra di scorrimento per visualizzare i dettagli di tali percorsi.</span><span class="sxs-lookup"><span data-stu-id="71693-414">Use the scrollbar to view the details of those unhealthy paths.</span></span>  <span data-ttu-id="71693-415">Usare i filtri per selezionare i percorsi con l'hop non integro, in modo che venga tracciata la topologia solo per i percorsi selezionati.</span><span class="sxs-lookup"><span data-stu-id="71693-415">Use the filters to select the paths with the unhealthy hop so that the topology for only the selected paths is plotted.</span></span> <span data-ttu-id="71693-416">È possibile usare la rotellina del mouse per ingrandire o ridurre la mappa topologica.</span><span class="sxs-lookup"><span data-stu-id="71693-416">You can use your mouse wheel to zoom in or out of the topology map.</span></span>

   <span data-ttu-id="71693-417">Nell'immagine seguente si può vedere chiaramente la causa radice delle aree relative al problema nella sezione specifica della rete analizzando i percorsi e gli hop in rosso.</span><span class="sxs-lookup"><span data-stu-id="71693-417">In the below image you can clearly see the root-cause of the problem areas to the specific section of the network by looking at the paths and hops in red color.</span></span> <span data-ttu-id="71693-418">Facendo clic su un nodo nella mappa topologica vengono visualizzate le proprietà del nodo, inclusi FQDN e indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="71693-418">Clicking on a node in the topology map reveals the properties of the node, including the FQDN, and IP address.</span></span> <span data-ttu-id="71693-419">Facendo clic su un hop viene mostrato il relativo indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="71693-419">Clicking on a hop shows the IP address of the hop.</span></span>  
   ![topologia non integra - esempio di dettagli del percorso](./media/log-analytics-network-performance-monitor/npm-investigation06.png)

## <a name="provide-feedback"></a><span data-ttu-id="71693-421">Fornire commenti e suggerimenti</span><span class="sxs-lookup"><span data-stu-id="71693-421">Provide feedback</span></span>

- <span data-ttu-id="71693-422">**UserVoice**: è possibile pubblicare le proprie idee sulle funzionalità di monitoraggio delle prestazioni di rete che si ritiene possano essere migliorate.</span><span class="sxs-lookup"><span data-stu-id="71693-422">**UserVoice** - You can post your ideas for Network Performance Monitor features that you want us to work on.</span></span> <span data-ttu-id="71693-423">Visitare la [pagina UserVoice](https://feedback.azure.com/forums/267889-log-analytics/category/188146-network-monitoring).</span><span class="sxs-lookup"><span data-stu-id="71693-423">Visit our [UserVoice page](https://feedback.azure.com/forums/267889-log-analytics/category/188146-network-monitoring).</span></span>
- <span data-ttu-id="71693-424">**Partecipa alla coorte**: l'aggiunta di nuovi clienti alla coorte è sempre motivo di grande interesse.</span><span class="sxs-lookup"><span data-stu-id="71693-424">**Join our cohort** - We’re always interested in having new customers join our cohort.</span></span> <span data-ttu-id="71693-425">In questo contesto si otterrà un accesso in anteprima alle nuove funzionalità e si contribuirà a migliorare il monitoraggio delle prestazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-425">As part of it, you'll get early access to new features and help us improve Network Performance Monitor.</span></span> <span data-ttu-id="71693-426">Per partecipare, compilare questo [sondaggio rapido](https://aka.ms/npmcohort).</span><span class="sxs-lookup"><span data-stu-id="71693-426">If you're interested in joining, fill-out this [quick survey](https://aka.ms/npmcohort).</span></span>

## <a name="next-steps"></a><span data-ttu-id="71693-427">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="71693-427">Next steps</span></span>
* <span data-ttu-id="71693-428">[Effettuare una ricerca nei log](log-analytics-log-searches.md) per visualizzare i record dettagliati dei dati delle prestazioni di rete.</span><span class="sxs-lookup"><span data-stu-id="71693-428">[Search logs](log-analytics-log-searches.md) to view detailed network performance data records.</span></span>
