---
title: aaaChild runbook in automazione di Azure | Documenti Microsoft
description: Descrive hello diversi metodi per l'avvio di un runbook in automazione di Azure da un altro runbook e la condivisione di informazioni tra di essi.
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 919887b9-43e2-4c16-883c-f81807fe37db
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/02/2017
ms.author: magoedte;bwren
ms.openlocfilehash: d3d06818d344b565d53cc4f4705b41dcfcf9a376
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="child-runbooks-in-azure-automation"></a><span data-ttu-id="8680a-103">Runbook figlio in Automazione di Azure</span><span class="sxs-lookup"><span data-stu-id="8680a-103">Child runbooks in Azure Automation</span></span>
<span data-ttu-id="8680a-104">È buona norma in automazione di Azure toowrite runbook modulari riutilizzabili con una funzione discreta che può essere utilizzato da altri runbook.</span><span class="sxs-lookup"><span data-stu-id="8680a-104">It is a best practice in Azure Automation toowrite reusable, modular runbooks with a discrete function that can be used by other runbooks.</span></span> <span data-ttu-id="8680a-105">Un runbook padre spesso chiama uno o più runbook figlio funzionalità tooperform richiesto.</span><span class="sxs-lookup"><span data-stu-id="8680a-105">A parent runbook will often call one or more child runbooks tooperform required functionality.</span></span> <span data-ttu-id="8680a-106">Esistono due modi toocall un runbook figlio e ognuno presenta delle differenze distinte che è necessario comprendere in modo che è possibile determinare che sarà migliore per i diversi scenari.</span><span class="sxs-lookup"><span data-stu-id="8680a-106">There are two ways toocall a child runbook, and each has distinct differences that you should understand so that you can determine which will be best for your different scenarios.</span></span>

## <a name="invoking-a-child-runbook-using-inline-execution"></a><span data-ttu-id="8680a-107">Richiamare un runbook figlio con esecuzione inline</span><span class="sxs-lookup"><span data-stu-id="8680a-107">Invoking a child runbook using inline execution</span></span>
<span data-ttu-id="8680a-108">tooinvoke un runbook inline da un altro runbook, utilizzare il nome di hello del runbook hello e fornire valori per i relativi parametri, esattamente come si farebbe un'attività o un cmdlet.</span><span class="sxs-lookup"><span data-stu-id="8680a-108">tooinvoke a runbook inline from another runbook, you use hello name of hello runbook and provide values for its parameters exactly like you would use an activity or cmdlet.</span></span>  <span data-ttu-id="8680a-109">Tutti i runbook hello stesso account di automazione sono disponibili tooall altre toobe usati in questo modo.</span><span class="sxs-lookup"><span data-stu-id="8680a-109">All runbooks in hello same Automation account are available tooall others toobe used in this manner.</span></span> <span data-ttu-id="8680a-110">Hello il runbook padre attenderà hello figlio runbook toocomplete prima di spostare la riga successiva toohello e qualsiasi output verrà restituito direttamente toohello padre.</span><span class="sxs-lookup"><span data-stu-id="8680a-110">hello parent runbook will wait for hello child runbook toocomplete before moving toohello next line, and any output is returned directly toohello parent.</span></span>

<span data-ttu-id="8680a-111">Quando si richiama un runbook inline, viene eseguito in hello stesso processo come hello del runbook padre.</span><span class="sxs-lookup"><span data-stu-id="8680a-111">When you invoke a runbook inline, it runs in hello same job as hello parent runbook.</span></span> <span data-ttu-id="8680a-112">Non ci sarà alcuna indicazione nella cronologia processo hello di hello i runbook figlio eseguito.</span><span class="sxs-lookup"><span data-stu-id="8680a-112">There will be no indication in hello job history of hello child runbook that it ran.</span></span> <span data-ttu-id="8680a-113">Tutte le eccezioni e gli output dal runbook figlio hello flusso sarà associati all'oggetto padre hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-113">Any exceptions and any stream output from hello child runbook will be associated with hello parent.</span></span> <span data-ttu-id="8680a-114">Ciò comporta un minor numero di processi e li rende più semplice tootrack e tootroubleshoot poiché le eccezioni generate dal runbook figlio hello e del relativo flusso di output presenti associati al processo padre hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-114">This results in fewer jobs and makes them easier tootrack and tootroubleshoot since any exceptions thrown by hello child runbook and any of its stream output are associated with hello parent job.</span></span>

<span data-ttu-id="8680a-115">Quando viene pubblicato un runbook, tutti i runbook figlio chiamati devono già essere pubblicati.</span><span class="sxs-lookup"><span data-stu-id="8680a-115">When a runbook is published, any child runbooks that it calls must already be published.</span></span> <span data-ttu-id="8680a-116">Questo avviene perché l'automazione di Azure crea un'associazione con i runbook figlio quando viene compilato un runbook.</span><span class="sxs-lookup"><span data-stu-id="8680a-116">This is because Azure Automation builds an association with any child runbooks when a runbook is compiled.</span></span> <span data-ttu-id="8680a-117">In caso contrario, verrà visualizzato correttamente toopublish hello il runbook padre, ma genererà un'eccezione quando viene avviata.</span><span class="sxs-lookup"><span data-stu-id="8680a-117">If they aren’t, hello parent runbook will appear toopublish properly, but will generate an exception when it’s started.</span></span> <span data-ttu-id="8680a-118">In questo caso, è possibile ripubblicare il runbook padre hello in ordine tooproperly riferimento hello figlio runbook.</span><span class="sxs-lookup"><span data-stu-id="8680a-118">If this happens, you can republish hello parent runbook in order tooproperly reference hello child runbooks.</span></span> <span data-ttu-id="8680a-119">Non è necessario il runbook padre hello toorepublish se uno dei runbook figlio hello viene modificato perché l'associazione di hello è già stata creata.</span><span class="sxs-lookup"><span data-stu-id="8680a-119">You do not need toorepublish hello parent runbook if any of hello child runbooks are changed because hello association will have already been created.</span></span>

<span data-ttu-id="8680a-120">parametri di Hello di un runbook figlio chiamato inline possono essere qualsiasi tipo di dati, compresi gli oggetti complessi e non esiste alcun [serializzazione JSON](automation-starting-a-runbook.md#runbook-parameters) come avviene quando si avvia runbook hello utilizzando hello portale di gestione di Azure o con hello Cmdlet Start-AzureRmAutomationRunbook.</span><span class="sxs-lookup"><span data-stu-id="8680a-120">hello parameters of a child runbook called inline can be any data type including complex objects, and there is no [JSON serialization](automation-starting-a-runbook.md#runbook-parameters) as there is when you start hello runbook using hello Azure Management Portal or with hello Start-AzureRmAutomationRunbook cmdlet.</span></span>

### <a name="runbook-types"></a><span data-ttu-id="8680a-121">Tipi di runbook</span><span class="sxs-lookup"><span data-stu-id="8680a-121">Runbook types</span></span>
<span data-ttu-id="8680a-122">Tipi che possono richiamarsi a vicenda:</span><span class="sxs-lookup"><span data-stu-id="8680a-122">Which types can call each other:</span></span>

* <span data-ttu-id="8680a-123">Un [runbook di PowerShell](automation-runbook-types.md#powershell-runbooks) e i [runbook grafici](automation-runbook-types.md#graphical-runbooks) possono chiamarsi reciprocamente inline (entrambi i tipi sono basati su PowerShell).</span><span class="sxs-lookup"><span data-stu-id="8680a-123">A [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) and [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) can call each other inline (both are PowerShell based).</span></span>
* <span data-ttu-id="8680a-124">Un [runbook del flusso di lavoro PowerShell](automation-runbook-types.md#powershell-workflow-runbooks) e i runbook grafici del flusso di lavoro PowerShell possono richiamarsi a vicenda inline (entrambi i tipi si basano su PowerShell).</span><span class="sxs-lookup"><span data-stu-id="8680a-124">A [PowerShell Workflow runbook](automation-runbook-types.md#powershell-workflow-runbooks) and Graphical PowerShell Workflow runbooks can call each other inline (both are PowerShell Workflow based)</span></span>
* <span data-ttu-id="8680a-125">Hello tipi PowerShell e hello che tipi di flusso di lavoro PowerShell non è possibile chiamare loro inline, deve utilizzare AzureRmAutomationRunbook di inizio.</span><span class="sxs-lookup"><span data-stu-id="8680a-125">hello PowerShell types and hello PowerShell Workflow types can’t call each other inline, and must use Start-AzureRmAutomationRunbook.</span></span>

<span data-ttu-id="8680a-126">Quando è importante l’ordine di pubblicazione:</span><span class="sxs-lookup"><span data-stu-id="8680a-126">When does publish order matter:</span></span>

* <span data-ttu-id="8680a-127">Hello pubblicare l'ordine dei è rilevante solo i runbook per i runbook del flusso di lavoro di PowerShell e con interfaccia grafica del flusso di lavoro di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8680a-127">hello publish order of runbooks only matters for PowerShell Workflow and Graphical PowerShell Workflow runbooks.</span></span>

<span data-ttu-id="8680a-128">Quando si chiama un runbook figlio grafico o del flusso di lavoro di PowerShell con l'esecuzione inline, è sufficiente utilizzare il nome di hello di hello runbook.</span><span class="sxs-lookup"><span data-stu-id="8680a-128">When you call a Graphical or PowerShell Workflow child runbook using inline execution, you just use hello name of hello runbook.</span></span>  <span data-ttu-id="8680a-129">Quando si chiama un runbook figlio di PowerShell, è necessario preceduto il proprio nome con *.\\*  toospecify che hello script si trova nella directory locale hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-129">When you call a PowerShell child runbook, you must preceded its name with *.\\* toospecify that hello script is located in hello local directory.</span></span> 

### <a name="example"></a><span data-ttu-id="8680a-130">Esempio</span><span class="sxs-lookup"><span data-stu-id="8680a-130">Example</span></span>
<span data-ttu-id="8680a-131">Hello di esempio seguente richiama un runbook figlio di prova che accetta tre parametri, un oggetto complesso, un numero intero e un valore booleano.</span><span class="sxs-lookup"><span data-stu-id="8680a-131">hello following example invokes a test child runbook that accepts three parameters, a complex object, an integer, and a boolean.</span></span> <span data-ttu-id="8680a-132">output di Hello del runbook figlio hello viene assegnato tooa variabile.</span><span class="sxs-lookup"><span data-stu-id="8680a-132">hello output of hello child runbook is assigned tooa variable.</span></span>  <span data-ttu-id="8680a-133">In questo caso, il runbook figlio hello è un runbook del flusso di lavoro di PowerShell</span><span class="sxs-lookup"><span data-stu-id="8680a-133">In this case, hello child runbook is a PowerShell Workflow runbook</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = PSWF-ChildRunbook –VM $vm –RepeatCount 2 –Restart $true

<span data-ttu-id="8680a-134">Di seguito è hello stesso esempio con un runbook PowerShell come elemento figlio di hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-134">Following is hello same example using a PowerShell runbook as hello child.</span></span>

    $vm = Get-AzureRmVM –ResourceGroupName "LabRG" –Name "MyVM"
    $output = .\PS-ChildRunbook.ps1 –VM $vm –RepeatCount 2 –Restart $true


## <a name="starting-a-child-runbook-using-cmdlet"></a><span data-ttu-id="8680a-135">Avvio di un runbook figlio utilizzando cmdlet</span><span class="sxs-lookup"><span data-stu-id="8680a-135">Starting a child runbook using cmdlet</span></span>
<span data-ttu-id="8680a-136">È possibile utilizzare hello [inizio AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) toostart cmdlet un runbook come descritto in [toostart un runbook con Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="8680a-136">You can use hello [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx) cmdlet toostart a runbook as described in [toostart a runbook with Windows PowerShell](automation-starting-a-runbook.md#starting-a-runbook-with-windows-powershell).</span></span> <span data-ttu-id="8680a-137">Sono disponibili due modalità di utilizzo di questo cmdlet.</span><span class="sxs-lookup"><span data-stu-id="8680a-137">There are two modes of use for this cmdlet.</span></span>  <span data-ttu-id="8680a-138">In modalità di hello cmdlet restituisce l'id di processo hello non appena viene creato il processo di figlio hello per runbook figlio hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-138">In one mode, hello cmdlet returns hello job id as soon as hello child job is created for hello child runbook.</span></span>  <span data-ttu-id="8680a-139">In altre modalità, che è abilitare specificando hello di hello **-attendere** parametro hello cmdlet attenderà figlio hello al termine del processo e verrà restituito l'output di hello dal runbook figlio hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-139">In hello other mode, which you enable by specifying hello **-wait** parameter, hello cmdlet will wait until hello child job finishes and will return hello output from hello child runbook.</span></span>

<span data-ttu-id="8680a-140">il processo di Hello da un runbook figlio avviato con un cmdlet verrà eseguito in un processo separato dal runbook padre hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-140">hello job from a child runbook started with a cmdlet will run in a separate job from hello parent runbook.</span></span> <span data-ttu-id="8680a-141">Questo comporta più processi rispetto al richiamo inline di runbook hello e li rende più difficile tootrack.</span><span class="sxs-lookup"><span data-stu-id="8680a-141">This results in more jobs than invoking hello runbook inline and makes them more difficult tootrack.</span></span> <span data-ttu-id="8680a-142">Hello padre può però avviare più runbook figlio in modo asincrono senza attendere che ogni toocomplete.</span><span class="sxs-lookup"><span data-stu-id="8680a-142">hello parent can start multiple child runbooks asynchronously without waiting for each toocomplete.</span></span> <span data-ttu-id="8680a-143">Per questo stesso tipo di esecuzione parallela chiamando i runbook figlio hello inline, il runbook padre hello sarebbe necessario hello toouse [parola chiave parallel](automation-powershell-workflow.md#parallel-processing).</span><span class="sxs-lookup"><span data-stu-id="8680a-143">For that same kind of parallel execution calling hello child runbooks inline, hello parent runbook would need toouse hello [parallel keyword](automation-powershell-workflow.md#parallel-processing).</span></span>

<span data-ttu-id="8680a-144">I parametri per un runbook figlio avviato con un cmdlet vengono forniti come una tabella hash, come descritto in [Parametri di Runbook](automation-starting-a-runbook.md#runbook-parameters).</span><span class="sxs-lookup"><span data-stu-id="8680a-144">Parameters for a child runbook started with a cmdlet are provided as a hashtable as described in [Runbook Parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span> <span data-ttu-id="8680a-145">Possono essere utilizzati solo tipi di dati semplici.</span><span class="sxs-lookup"><span data-stu-id="8680a-145">Only simple data types can be used.</span></span> <span data-ttu-id="8680a-146">Se hello runbook dispone di un parametro con un tipo di dati complesso, dovrà essere chiamato inline.</span><span class="sxs-lookup"><span data-stu-id="8680a-146">If hello runbook has a parameter with a complex data type, then it must be called inline.</span></span>

### <a name="example"></a><span data-ttu-id="8680a-147">Esempio</span><span class="sxs-lookup"><span data-stu-id="8680a-147">Example</span></span>
<span data-ttu-id="8680a-148">Hello esempio seguente avvia un runbook figlio con parametri e quindi attende toocomplete utilizzando hello inizio AzureRmAutomationRunbook-attendere parametro.</span><span class="sxs-lookup"><span data-stu-id="8680a-148">hello following example starts a child runbook with parameters and then waits for it toocomplete using hello Start-AzureRmAutomationRunbook -wait parameter.</span></span> <span data-ttu-id="8680a-149">Una volta completato, l'output viene raccolto dal runbook figlio hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-149">Once completed, its output is collected from hello child runbook.</span></span>

    $params = @{"VMName"="MyVM";"RepeatCount"=2;"Restart"=$true} 
    $joboutput = Start-AzureRmAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "Test-ChildRunbook" -ResourceGroupName "LabRG" –Parameters $params –wait


## <a name="comparison-of-methods-for-calling-a-child-runbook"></a><span data-ttu-id="8680a-150">Confronto di metodi per chiamare un runbook figlio</span><span class="sxs-lookup"><span data-stu-id="8680a-150">Comparison of methods for calling a child runbook</span></span>
<span data-ttu-id="8680a-151">Hello nella tabella seguente sono riepilogate differenze di hello tra hello due metodi per chiamare un runbook da un altro runbook.</span><span class="sxs-lookup"><span data-stu-id="8680a-151">hello following table summarizes hello differences between hello two methods for calling a runbook from another runbook.</span></span>

|  | <span data-ttu-id="8680a-152">Inline</span><span class="sxs-lookup"><span data-stu-id="8680a-152">Inline</span></span> | <span data-ttu-id="8680a-153">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="8680a-153">Cmdlet</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="8680a-154">Job</span><span class="sxs-lookup"><span data-stu-id="8680a-154">Job</span></span> |<span data-ttu-id="8680a-155">Runbook figlio vengono eseguiti nello stesso processo come padre hello hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-155">Child runbooks run in hello same job as hello parent.</span></span> |<span data-ttu-id="8680a-156">Viene creato un processo separato per runbook figlio hello.</span><span class="sxs-lookup"><span data-stu-id="8680a-156">A separate job is created for hello child runbook.</span></span> |
| <span data-ttu-id="8680a-157">Esecuzione</span><span class="sxs-lookup"><span data-stu-id="8680a-157">Execution</span></span> |<span data-ttu-id="8680a-158">Il runbook padre attende hello figlio runbook toocomplete prima di continuare.</span><span class="sxs-lookup"><span data-stu-id="8680a-158">Parent runbook waits for hello child runbook toocomplete before continuing.</span></span> |<span data-ttu-id="8680a-159">Il runbook padre continua subito dopo l'avvio del runbook figlio *o* runbook padre attende hello figlio processo toofinish.</span><span class="sxs-lookup"><span data-stu-id="8680a-159">Parent runbook continues immediately after child runbook is started *or* parent runbook waits for hello child job toofinish.</span></span> |
| <span data-ttu-id="8680a-160">Output</span><span class="sxs-lookup"><span data-stu-id="8680a-160">Output</span></span> |<span data-ttu-id="8680a-161">Il runbook padre può ottenere output direttamente dal runbook figlio.</span><span class="sxs-lookup"><span data-stu-id="8680a-161">Parent runbook can directly get output from child runbook.</span></span> |<span data-ttu-id="8680a-162">Il runbook padre deve recuperare l'output dal processo del runbook figlio *o* può ottenere direttamente l'output dal runbook figlio.</span><span class="sxs-lookup"><span data-stu-id="8680a-162">Parent runbook must retrieve output from child runbook job *or* parent runbook can directly get output from child runbook.</span></span> |
| <span data-ttu-id="8680a-163">parameters</span><span class="sxs-lookup"><span data-stu-id="8680a-163">Parameters</span></span> |<span data-ttu-id="8680a-164">I valori per parametri del runbook figlio hello vengono specificati separatamente e possono utilizzare qualsiasi tipo di dati.</span><span class="sxs-lookup"><span data-stu-id="8680a-164">Values for hello child runbook parameters are specified separately and can use any data type.</span></span> |<span data-ttu-id="8680a-165">I valori per il runbook figlio hello parametri devono essere combinati in una singola tabella hash e possono includere solo semplice, matrice e oggetto JSON che sfruttano la serializzazione di tipi di dati.</span><span class="sxs-lookup"><span data-stu-id="8680a-165">Values for hello child runbook parameters must be combined into a single hashtable and can only include simple, array, and object data types that leverage JSON serialization.</span></span> |
| <span data-ttu-id="8680a-166">Account di automazione</span><span class="sxs-lookup"><span data-stu-id="8680a-166">Automation Account</span></span> |<span data-ttu-id="8680a-167">Il runbook padre può usare solo runbook figlio hello stesso account di automazione.</span><span class="sxs-lookup"><span data-stu-id="8680a-167">Parent runbook can only use child runbook in hello same automation account.</span></span> |<span data-ttu-id="8680a-168">Il runbook padre può usare runbook figlio da qualsiasi account di automazione da hello stessa sottoscrizione di Azure e anche una sottoscrizione diversa se si dispone di un tooit di connessione.</span><span class="sxs-lookup"><span data-stu-id="8680a-168">Parent runbook can use child runbook from any automation account from hello same Azure subscription and even a different subscription if you have a connection tooit.</span></span> |
| <span data-ttu-id="8680a-169">Pubblicazione</span><span class="sxs-lookup"><span data-stu-id="8680a-169">Publishing</span></span> |<span data-ttu-id="8680a-170">Il runbook figlio deve essere pubblicato prima della pubblicazione del runbook padre.</span><span class="sxs-lookup"><span data-stu-id="8680a-170">Child runbook must be published before parent runbook is published.</span></span> |<span data-ttu-id="8680a-171">Il runbook figlio deve essere pubblicato prima che il runbook padre venga avviato.</span><span class="sxs-lookup"><span data-stu-id="8680a-171">Child runbook must be published any time before parent runbook is started.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="8680a-172">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8680a-172">Next steps</span></span>
* [<span data-ttu-id="8680a-173">Avvio di un runbook in Automazione di Azure</span><span class="sxs-lookup"><span data-stu-id="8680a-173">Starting a runbook in Azure Automation</span></span>](automation-starting-a-runbook.md)
* [<span data-ttu-id="8680a-174">Output di runbook e messaggi in automazione di Azure</span><span class="sxs-lookup"><span data-stu-id="8680a-174">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)

