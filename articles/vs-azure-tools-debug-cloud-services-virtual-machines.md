---
title: Debug di un servizio cloud o di una macchina virtuale di Azure in Visual Studio | Documentazione Microsoft
description: Debug di un servizio cloud o di una macchina virtuale in Visual Studio
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 945e06e0-2100-41af-b218-72347367ddab
ms.service: visual-studio-online
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 2ea3a9d6b3bdd873c139064b3c400eff5977eda4
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="debugging-an-azure-cloud-service-or-virtual-machine-in-visual-studio"></a><span data-ttu-id="ab2d7-103">Debug di un servizio cloud o di una macchina virtuale di Azure in Visual Studio</span><span class="sxs-lookup"><span data-stu-id="ab2d7-103">Debugging an Azure cloud service or virtual machine in Visual Studio</span></span>
<span data-ttu-id="ab2d7-104">Visual Studio offre diverse opzioni per il debug dei servizi cloud e delle macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-104">Visual Studio gives you different options for debugging Azure cloud services and virtual machines.</span></span>

## <a name="debug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="ab2d7-105">Eseguire il debug del servizio cloud sul computer locale</span><span class="sxs-lookup"><span data-stu-id="ab2d7-105">Debug your cloud service on your local computer</span></span>
<span data-ttu-id="ab2d7-106">È possibile risparmiare tempo e denaro usando l'emulatore di calcolo di Azure per il debug del servizio cloud su un computer locale.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-106">You can save time and money by using the Azure compute emulator to debug your cloud service on a local machine.</span></span> <span data-ttu-id="ab2d7-107">Eseguendo il debug di un servizio in locale prima della distribuzione, è possibile migliorare l'affidabilità e le prestazioni senza pagare per il tempo di calcolo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-107">By debugging a service locally before you deploy it, you can improve reliability and performance without paying for compute time.</span></span> <span data-ttu-id="ab2d7-108">Tuttavia, potrebbero verificarsi alcuni errori solo quando si esegue un servizio cloud in Azure stesso.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-108">However, some errors might occur only when you run a cloud service in Azure itself.</span></span> <span data-ttu-id="ab2d7-109">È possibile eseguire il debug di questi errori se si abilita il debug remoto quando si pubblica il servizio e poi si collega il debugger a un'istanza del ruolo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-109">You can debug these errors if you enable remote debugging when you publish your service and then attach the debugger to a role instance.</span></span>

<span data-ttu-id="ab2d7-110">L'emulatore simula il servizio di calcolo di Azure e viene eseguito nell'ambiente locale in modo da poter testare ed eseguire il debug del servizio cloud prima della distribuzione.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-110">The emulator simulates the Azure Compute service and runs in your local environment so that you can test and debug your cloud service before you deploy it.</span></span> <span data-ttu-id="ab2d7-111">L'emulatore gestisce il ciclo di vita delle istanze del ruolo e fornisce l'accesso alle risorse simulate, ad esempio l'archiviazione locale.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-111">The emulator handles the lifecycle of your role instances and provides access to simulated resources, such as local storage.</span></span> <span data-ttu-id="ab2d7-112">Durante il debug o l’esecuzione del servizio da Visual Studio, esso avvia automaticamente l’emulatore come applicazione in background e il servizio viene distribuito all'emulatore.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-112">When you debug or run your service from Visual Studio, it automatically starts the emulator as a background application and then deploys your service to the emulator.</span></span> <span data-ttu-id="ab2d7-113">È possibile usare l'emulatore per visualizzare il servizio quando è in esecuzione nell'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-113">You can use the emulator to view your service when it runs in the local environment.</span></span> <span data-ttu-id="ab2d7-114">È possibile eseguire la versione completa o la versione express dell'emulatore.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-114">You can run the full version or the express version of the emulator.</span></span> <span data-ttu-id="ab2d7-115">(A partire da Azure 2.3, la versione express dell'emulatore è l'impostazione predefinita). Vedere [Uso dell'emulatore Express per l'esecuzione e il debug in locale di un servizio cloud](https://msdn.microsoft.com/library/dn339018.aspx).</span><span class="sxs-lookup"><span data-stu-id="ab2d7-115">(Starting with Azure 2.3, the express version of the emulator is the default.) See [Using Emulator Express to Run and Debug a Cloud Service Locally](https://msdn.microsoft.com/library/dn339018.aspx).</span></span>

### <a name="to-debug-your-cloud-service-on-your-local-computer"></a><span data-ttu-id="ab2d7-116">Per eseguire il debug del servizio cloud nel computer locale</span><span class="sxs-lookup"><span data-stu-id="ab2d7-116">To debug your cloud service on your local computer</span></span>
1. <span data-ttu-id="ab2d7-117">Sulla barra dei menu scegliere **Debug**, **Avvia debug** per eseguire il progetto servizio cloud di Azure.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-117">On the menu bar, choose **Debug**, **Start Debugging** to run your Azure cloud service project.</span></span> <span data-ttu-id="ab2d7-118">In alternativa, è possibile premere F5.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-118">As an alternative, you can press F5.</span></span> <span data-ttu-id="ab2d7-119">Verrà visualizzato un messaggio che indica l'avvio dell'emulatore di calcolo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-119">You’ll see a message that the Compute Emulator is starting.</span></span> <span data-ttu-id="ab2d7-120">Quando l'emulatore viene avviato, l'icona della barra delle applicazioni conferma l'operazione.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-120">When the emulator starts, the system tray icon confirms it.</span></span>

    ![Emulatore di Azure nella barra delle applicazioni](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC783828.png)
2. <span data-ttu-id="ab2d7-122">Per visualizzare l'interfaccia utente dell'emulatore di calcolo, aprire il menu di scelta rapida dell'icona di Azure nell'area di notifica e selezionare **Show Compute Emulator UI**(Mostra interfaccia emulatore di calcolo).</span><span class="sxs-lookup"><span data-stu-id="ab2d7-122">Display the user interface for the compute emulator by opening the shortcut menu for the Azure icon in the notification area, and then select **Show Compute Emulator UI**.</span></span>

    <span data-ttu-id="ab2d7-123">Il riquadro sinistro dell'interfaccia utente mostra i servizi attualmente distribuiti nell'emulatore di calcolo e le istanze del ruolo in esecuzione in ogni servizio.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-123">The left pane of the UI shows the services that are currently deployed to the compute emulator and the role instances that each service is running.</span></span> <span data-ttu-id="ab2d7-124">È possibile scegliere il servizio o i ruoli per visualizzare le informazioni di diagnostica, registrazione e ciclo di vita nel riquadro di destra.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-124">You can choose the service or roles to display lifecycle, logging, and diagnostic information in the right pane.</span></span> <span data-ttu-id="ab2d7-125">Se si seleziona il margine superiore di una finestra inclusa, essa si espande per riempire il riquadro destro.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-125">If you put the focus in the top margin of an included window, it expands to fill the right pane.</span></span>
3. <span data-ttu-id="ab2d7-126">È possibile eseguire l'applicazione un'istruzione alla volta selezionando i comandi del menu **Debug** e impostando punti di interruzione nel codice.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-126">Step through the application by selecting commands on the **Debug** menu and setting breakpoints in your code.</span></span> <span data-ttu-id="ab2d7-127">Mentre si esegue l'applicazione un'istruzione alla volta nel debugger, i riquadri vengono aggiornati con lo stato corrente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-127">As you step through the application in the debugger, the panes are updated with the current status of the application.</span></span> <span data-ttu-id="ab2d7-128">Quando si arresta il debug, la distribuzione dell'applicazione viene eliminata.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-128">When you stop debugging, the application deployment is deleted.</span></span> <span data-ttu-id="ab2d7-129">Se l'applicazione include un ruolo Web e la proprietà dell'azione di avvio è stata impostata per l'avvio del Web browser, Visual Studio avvia l'applicazione Web nel browser.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-129">If your application includes a web role and you've set the Startup action property to start the web browser, Visual Studio starts your web application in the browser.</span></span> <span data-ttu-id="ab2d7-130">Se si modifica il numero di istanze di un ruolo nella configurazione del servizio, è necessario arrestare il servizio cloud e quindi riavviare il debug perché sia possibile eseguire il debug delle nuove istanze del ruolo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-130">If you change the number of instances of a role in the service configuration, you must stop your cloud service and then restart debugging so that you can debug these new instances of the role.</span></span>

    <span data-ttu-id="ab2d7-131">**Nota:** quando si arresta l'esecuzione o il debug del servizio, l'emulatore di calcolo locale e l'emulatore di archiviazione non vengono arrestati.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-131">**Note:** When you stop running or debugging your service, the local compute emulator and storage emulator aren't stopped.</span></span> <span data-ttu-id="ab2d7-132">È necessario arrestarli in modo esplicito dall'area di notifica.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-132">You must stop them explicitly from the notification area.</span></span>

## <a name="debug-a-cloud-service-in-azure"></a><span data-ttu-id="ab2d7-133">Debug di un servizio cloud in Azure</span><span class="sxs-lookup"><span data-stu-id="ab2d7-133">Debug a cloud service in Azure</span></span>
<span data-ttu-id="ab2d7-134">Per eseguire il debug di un servizio cloud da un computer remoto, è necessario abilitare tale funzionalità in modo esplicito quando si distribuisce il servizio cloud, in modo che i servizi richiesti (ad esempio msvsmon.exe) siano installati nelle macchine virtuali che eseguono le istanze del ruolo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-134">To debug a cloud service from a remote machine, you must enable that functionality explicitly when you deploy your cloud service so that required services (msvsmon.exe, for example) are installed on the virtual machines that run your role instances.</span></span> <span data-ttu-id="ab2d7-135">Se si non abilita il debug remoto quando il servizio è pubblicato, è necessario ripubblicare il servizio con il debug remoto abilitato.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-135">If you didn't enable remote debugging when you published the service, you have to republish the service with remote debugging enabled.</span></span>

<span data-ttu-id="ab2d7-136">Se si abilita il debug remoto per un servizio cloud, esso non produce una riduzione delle prestazioni o costi aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-136">If you enable remote debugging for a cloud service, it doesn't exhibit degraded performance or incur additional charges.</span></span> <span data-ttu-id="ab2d7-137">È consigliabile non usare il debug remoto in un servizio di produzione, poiché i client che usano il servizio potrebbero essere compromessi.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-137">You shouldn't use remote debugging on a production service, because clients who use the service might be adversely affected.</span></span>

> [!NOTE]
> <span data-ttu-id="ab2d7-138">Quando si pubblica un servizio cloud da Visual Studio, è possibile abilitare **IntelliTrace** per qualsiasi ruolo del servizio destinato a .NET Framework 4 o .NET Framework 4.5.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-138">When you publish a cloud service from Visual Studio, you can enable **IntelliTrace** for any roles in that service that target the .NET Framework 4 or the .NET Framework 4.5.</span></span> <span data-ttu-id="ab2d7-139">Tramite **IntelliTrace**è possibile esaminare gli eventi verificatisi in un'istanza del ruolo in passato e riprodurre il contesto da quel momento.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-139">By using **IntelliTrace**, you can examine events that occurred in a role instance in the past and reproduce the context from that time.</span></span> <span data-ttu-id="ab2d7-140">Vedere [Debug di un servizio cloud pubblicato con IntelliTrace e Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) e [Uso di IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span><span class="sxs-lookup"><span data-stu-id="ab2d7-140">See [Debugging a published cloud service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016) and [Using IntelliTrace](https://msdn.microsoft.com/library/dd264915.aspx).</span></span>
>
>

### <a name="to-enable-remote-debugging-for-a-cloud-service"></a><span data-ttu-id="ab2d7-141">Per abilitare il debug remoto per un servizio cloud</span><span class="sxs-lookup"><span data-stu-id="ab2d7-141">To enable remote debugging for a cloud service</span></span>
1. <span data-ttu-id="ab2d7-142">Aprire il menu di scelta rapida per il progetto Azure e quindi selezionare **Pubblica**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-142">Open the shortcut menu for the Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="ab2d7-143">Selezionare l'ambiente di **Gestione temporanea** e la configurazione di **Debug**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-143">Select the **Staging** environment and the **Debug** configuration.</span></span>

    <span data-ttu-id="ab2d7-144">Questa è solo un'indicazione.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-144">This is only a guideline.</span></span> <span data-ttu-id="ab2d7-145">È possibile scegliere di eseguire ambienti di test in un ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-145">You can opt to run your test environments in a Production environment.</span></span> <span data-ttu-id="ab2d7-146">Tuttavia, possono verificarsi effetti negativi per gli utenti se si abilita il debug remoto nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-146">However, you may adversely affect users if you enable remote debugging on the Production environment.</span></span> <span data-ttu-id="ab2d7-147">È possibile scegliere la configurazione di rilascio, ma la configurazione di debug semplifica il debug.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-147">You can choose the Release configuration, but the Debug configuration makes debugging easier.</span></span>

    ![Scegliere la configurazione di debug](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746717.gif)
3. <span data-ttu-id="ab2d7-149">Seguire la procedura consueta, ma selezionare la casella di controllo **Abilita debug remoto per tutti i ruoli** nella scheda **Impostazioni avanzate**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-149">Follow the usual steps, but select the **Enable Remote Debugger for all roles** check box on the **Advanced Settings** tab.</span></span>

    ![Configurazione di debug](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746718.gif)

### <a name="to-attach-the-debugger-to-a-cloud-service-in-azure"></a><span data-ttu-id="ab2d7-151">Per collegare il debugger a un servizio cloud in Azure</span><span class="sxs-lookup"><span data-stu-id="ab2d7-151">To attach the debugger to a cloud service in Azure</span></span>
1. <span data-ttu-id="ab2d7-152">In Esplora server espandere il nodo del servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-152">In Server Explorer, expand the node for your cloud service.</span></span>
2. <span data-ttu-id="ab2d7-153">Aprire il menu di scelta rapida per il ruolo o l'istanza del ruolo a cui si vuole collegarlo, quindi selezionare **Collega debugger**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-153">Open the shortcut menu for the role or role instance to which you want to attach, and then select **Attach Debugger**.</span></span>

    <span data-ttu-id="ab2d7-154">Se si esegue il debug di un ruolo, il debugger di Visual Studio si connette a ogni istanza di tale ruolo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-154">If you debug a role, the Visual Studio debugger attaches to each instance of that role.</span></span> <span data-ttu-id="ab2d7-155">Il debugger si interrompe in un punto di interruzione per la prima istanza del ruolo che esegue la riga di codice e soddisfa le condizioni del punto di interruzione.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-155">The debugger will break on a breakpoint for the first role instance that runs that line of code and meets any conditions of that breakpoint.</span></span> <span data-ttu-id="ab2d7-156">Se si esegue il debug di un'istanza, il debugger si collega solo a tale istanza e si interrompe in un punto di interruzione solo quando l’istanza specifica esegue la riga di codice e soddisfa le condizioni del punto di interruzione.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-156">If you debug an instance, the debugger attaches to only that instance and breaks on a breakpoint only when that specific instance runs that line of code and meets the breakpoint's conditions.</span></span>

    ![Collega debugger](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746719.gif)
3. <span data-ttu-id="ab2d7-158">Dopo che il debugger si connette a un'istanza, eseguire il debug come di consueto.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-158">After the debugger attaches to an instance, debug as usual.</span></span> <span data-ttu-id="ab2d7-159">Il debugger si connette automaticamente al processo host appropriato per il ruolo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-159">The debugger automatically attaches to the appropriate host process for your role.</span></span> <span data-ttu-id="ab2d7-160">In base al ruolo, il debugger si collega a w3wp.exe, WaWorkerHost.exe o WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-160">Depending on what the role is, the debugger attaches to w3wp.exe, WaWorkerHost.exe, or WaIISHost.exe.</span></span> <span data-ttu-id="ab2d7-161">Per verificare il processo a cui è collegato il debugger, espandere il nodo dell'istanza in Esplora server.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-161">To verify the process to which the debugger is attached, expand the instance node in Server Explorer.</span></span> <span data-ttu-id="ab2d7-162">Vedere [Architettura del ruolo di Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) per altre informazioni sui processi di Azure.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-162">See [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information about Azure processes.</span></span>

    ![Finestra di dialogo Seleziona tipo di codice](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
4. <span data-ttu-id="ab2d7-164">Per identificare i processi a cui è collegato il debugger, aprire la finestra di dialogo Processi, nella barra dei menu, selezionando Debug, Windows, Processi.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-164">To identify the processes to which the debugger is attached, open the Processes dialog box by, on the menu bar, choosing Debug, Windows, Processes.</span></span> <span data-ttu-id="ab2d7-165">(Tastiera: Ctrl+Alt+Z) Per disconnettere un processo specifico, aprire il menu di scelta rapida e quindi selezionare **Disconnetti processo**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-165">(Keyboard: Ctrl+Alt+Z)To detach a specific process, open its shortcut menu, and then select **Detach Process**.</span></span> <span data-ttu-id="ab2d7-166">In alternativa, individuare il nodo dell'istanza in Esplora server, individuare il processo, aprire il relativo menu di scelta rapida e quindi selezionare **Disconnetti processo**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-166">Or, locate the instance node in Server Explorer, find the process, open its shortcut menu, and then select **Detach Process**.</span></span>

    ![Debug di processi](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC690787.gif)

> [!WARNING]
> <span data-ttu-id="ab2d7-168">Evitare interruzioni prolungate in corrispondenza dei punti di interruzione durante il debug remoto.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-168">Avoid long stops at breakpoints when remote debugging.</span></span> <span data-ttu-id="ab2d7-169">Azure considera un processo che è stato arrestato per più di pochi minuti come processo che non risponde e interrompe l'invio di traffico a tale istanza.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-169">Azure treats a process that's stopped for longer than a few minutes as unresponsive and stops sending traffic to that instance.</span></span> <span data-ttu-id="ab2d7-170">Se si arresta per troppo tempo, msvsmon.exe si disconnette dal processo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-170">If you stop for too long, msvsmon.exe detaches from the process.</span></span>
>
>

<span data-ttu-id="ab2d7-171">Per disconnettere il debugger da tutti i processi nell'istanza o nel ruolo, aprire il menu di scelta rapida per il ruolo o l'istanza di cui si esegue il debug e quindi selezionare **Scollega debugger**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-171">To detach the debugger from all processes in your instance or role, open the shortcut menu for the role or instance that you're debugging, and then select **Detach Debugger**.</span></span>

## <a name="limitations-of-remote-debugging-in-azure"></a><span data-ttu-id="ab2d7-172">Limitazioni del debug remoto in Azure</span><span class="sxs-lookup"><span data-stu-id="ab2d7-172">Limitations of remote debugging in Azure</span></span>
<span data-ttu-id="ab2d7-173">Da Azure SDK 2.3, il debug remoto presenta le seguenti limitazioni.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-173">From Azure SDK 2.3, remote debugging has the following limitations.</span></span>

* <span data-ttu-id="ab2d7-174">Con il debug remoto abilitato, non è possibile pubblicare un servizio cloud in cui un ruolo contiene più di 25 istanze.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-174">With remote debugging enabled, you can't publish a cloud service in which any role has more than 25 instances.</span></span>
* <span data-ttu-id="ab2d7-175">Il debugger usa le porte da 30400 a 30424, da 31400 a 31424e da 32400 a 32424.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-175">The debugger uses ports 30400 to 30424, 31400 to 31424 and 32400 to 32424.</span></span> <span data-ttu-id="ab2d7-176">Se prova a usare una di queste porte, non sarà possibile pubblicare il servizio e verrà visualizzato uno dei seguenti messaggi di errore nel log delle attività per Azure:</span><span class="sxs-lookup"><span data-stu-id="ab2d7-176">If you try to use any of these ports, you won't be able to publish your service, and one of the following error messages will appear in the activity log for Azure:</span></span>

  * <span data-ttu-id="ab2d7-177">Errore durante la convalida del file con estensione cscfg in base al file con estensione csdef.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-177">Error validating the .cscfg file against the .csdef file.</span></span>
    <span data-ttu-id="ab2d7-178">L'intervallo di porte riservate 'intervallo' per l’endpoint Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector del ruolo 'ruolo' si sovrappone con una porta o un intervallo già definiti.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-178">The reserved port range 'range' for endpoint Microsoft.WindowsAzure.Plugins.RemoteDebugger.Connector of role 'role' overlaps with an already defined port or range.</span></span>
  * <span data-ttu-id="ab2d7-179">Allocazione non riuscita.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-179">Allocation failed.</span></span> <span data-ttu-id="ab2d7-180">Riprovare più tardi, provare a ridurre la dimensione della VM o il numero di istanze del ruolo oppure provare a distribuire in un'area diversa.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-180">Please retry later, try reducing the VM size or number of role instances, or try deploying to a different region.</span></span>

## <a name="debugging-azure-virtual-machines"></a><span data-ttu-id="ab2d7-181">Debug di macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="ab2d7-181">Debugging Azure virtual machines</span></span>
<span data-ttu-id="ab2d7-182">È possibile eseguire il debug di programmi in esecuzione su macchine virtuali di Azure tramite Esplora server in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-182">You can debug programs that run on Azure virtual machines by using Server Explorer in Visual Studio.</span></span> <span data-ttu-id="ab2d7-183">Quando si abilita il debug remoto su una macchina virtuale di Azure, Azure installa l'estensione di debug remoto nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-183">When you enable remote debugging on an Azure virtual machine, Azure installs the remote debugging extension on the virtual machine.</span></span> <span data-ttu-id="ab2d7-184">Quindi, è possibile connettersi a processi sulla macchina virtuale ed eseguire il debug come di consueto.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-184">Then, you can attach to processes on the virtual machine and debug as you normally would.</span></span>

> [!NOTE]
> <span data-ttu-id="ab2d7-185">Il debug di macchine virtuali create tramite lo stack di gestione risorse di Azure può essere eseguito in modalità remota usando Esplora cloud in Visual Studio 2015.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-185">Virtual machines created through the Azure resource manager stack can be remotely debugged by using Cloud Explorer in Visual Studio 2015.</span></span> <span data-ttu-id="ab2d7-186">Per altre informazioni, vedere [Gestione delle risorse di Azure con Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span><span class="sxs-lookup"><span data-stu-id="ab2d7-186">For more information, see [Managing Azure Resources with Cloud Explorer](http://go.microsoft.com/fwlink/?LinkId=623031).</span></span>
>
>

### <a name="to-debug-an-azure-virtual-machine"></a><span data-ttu-id="ab2d7-187">Per eseguire il debug di una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-187">To debug an Azure virtual machine</span></span>
1. <span data-ttu-id="ab2d7-188">In Esplora server espandere il nodo Macchine virtuali e selezionare il nodo della macchina virtuale di cui si desidera eseguire il debug.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-188">In Server Explorer, expand the Virtual Machines node and select the node of the virtual machine that you want to debug.</span></span>
2. <span data-ttu-id="ab2d7-189">Aprire il menu di scelta rapida e selezionare **Abilita debug**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-189">Open the context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="ab2d7-190">Quando viene chiesto se si è certi di voler abilitare il debug nella macchina virtuale, selezionare **Sì**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-190">When asked if you're sure if you want to enable debugging on the virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="ab2d7-191">Azure installa l'estensione di debug remoto nella macchina virtuale per abilitare il debug.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-191">Azure installs the remote debugging extension on the virtual machine to enable debugging.</span></span>

    ![Comando di debug di abilitazione della macchina virtuale](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Finestra Log attività di Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
3. <span data-ttu-id="ab2d7-194">Al termine dell'installazione dell'estensione di debug remoto, aprire il menu di scelta rapida della macchina virtuale e selezionare **Collega debugger...**</span><span class="sxs-lookup"><span data-stu-id="ab2d7-194">After the remote debugging extension finishes installing, open the virtual machine's context menu and select **Attach Debugger...**</span></span>

    <span data-ttu-id="ab2d7-195">Azure ottiene un elenco dei processi nella macchina virtuale e li visualizza nella finestra di dialogo Connetti a processo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-195">Azure gets a list of the processes on the virtual machine and shows them in the Attach to Process dialog box.</span></span>

    ![Comando Collega debugger](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
4. <span data-ttu-id="ab2d7-197">Nella finestra di dialogo **Connetti a processo** scegliere **Seleziona** per limitare l'elenco di risultati in modo che visualizzi solo i tipi di codice da sottoporre a debug.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-197">In the **Attach to Process** dialog box, select **Select** to limit the results list to show only the types of code you want to debug.</span></span> <span data-ttu-id="ab2d7-198">È possibile eseguire il debug di codice gestito, codice nativo o entrambi a 32 o 64 bit.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-198">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Finestra di dialogo Seleziona tipo di codice](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
5. <span data-ttu-id="ab2d7-200">Selezionare i processi da sottoporre a debug nella macchina virtuale e quindi scegliere **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-200">Select the processes you want to debug on the virtual machine and then select **Attach**.</span></span> <span data-ttu-id="ab2d7-201">Ad esempio, è possibile scegliere il processo w3wp.exe se si desidera eseguire il debug di un'applicazione Web nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-201">For example, you might choose the w3wp.exe process if you wanted to debug a web app on the virtual machine.</span></span> <span data-ttu-id="ab2d7-202">Per altre informazioni, vedere [Debug di uno o più processi in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) e [Architettura del ruolo di Azure](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx).</span><span class="sxs-lookup"><span data-stu-id="ab2d7-202">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) and [Azure Role Architecture](http://blogs.msdn.com/b/kwill/archive/2011/05/05/windows-azure-role-architecture.aspx) for more information.</span></span>

## <a name="create-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="ab2d7-203">Creare un progetto Web e una macchina virtuale per il debug</span><span class="sxs-lookup"><span data-stu-id="ab2d7-203">Create a web project and a virtual machine for debugging</span></span>
<span data-ttu-id="ab2d7-204">Prima di pubblicare il progetto Azure, può risultare utile per eseguire il test in un ambiente indipendente che supporti scenari di debug e di test e in cui sia possibile installare programmi di test e di controllo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-204">Before publishing your Azure project, you might find it useful to test it in a contained environment that supports debugging and testing scenarios, and where you can install testing and monitoring programs.</span></span> <span data-ttu-id="ab2d7-205">Per eseguire questa operazione, è possibile eseguire il debug remoto dell'applicazione in una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-205">One way to do this is to remotely debug your app on a virtual machine.</span></span>

<span data-ttu-id="ab2d7-206">I progetti ASP.NET di Visual Studio offrono un'opzione per creare una macchina virtuale utile che è possibile usare per il test delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-206">Visual Studio ASP.NET projects offer an option to create a handy virtual machine that you can use for app testing.</span></span> <span data-ttu-id="ab2d7-207">La macchina virtuale include endpoint comunemente necessari, come PowerShell, desktop remoto e WebDeploy.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-207">The virtual machine includes commonly-needed endpoints such as PowerShell, remote desktop, and WebDeploy.</span></span>

### <a name="to-create-a-web-project-and-a-virtual-machine-for-debugging"></a><span data-ttu-id="ab2d7-208">Per creare un progetto Web e una macchina virtuale per il debug</span><span class="sxs-lookup"><span data-stu-id="ab2d7-208">To create a web project and a virtual machine for debugging</span></span>
1. <span data-ttu-id="ab2d7-209">Creare un'applicazione Web ASP.NET in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-209">In Visual Studio, create a new ASP.NET Web Application.</span></span>
2. <span data-ttu-id="ab2d7-210">Scegliere **Macchina virtuale** dall'elenco a discesa nella sezione Azure della finestra di dialogo Nuovo progetto ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-210">In the New ASP.NET Project dialog, in the Azure section, choose **Virtual Machine** in the dropdown list box.</span></span> <span data-ttu-id="ab2d7-211">Lasciare selezionata la casella di controllo **Crea risorse remote** .</span><span class="sxs-lookup"><span data-stu-id="ab2d7-211">Leave the **Create remote resources** check box selected.</span></span> <span data-ttu-id="ab2d7-212">Selezionare **OK** per procedere.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-212">Select **OK** to proceed.</span></span>

    <span data-ttu-id="ab2d7-213">Verrà visualizzata la finestra di dialogo per la **creazione di una macchina virtuale in Azure**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-213">The **Create virtual machine on Azure** dialog box appears.</span></span>

    ![Finestra di dialogo Crea progetto Web ASP.NET](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746723.png)

    <span data-ttu-id="ab2d7-215">**Nota:** verrà chiesto di accedere al proprio account Azure, se non è ancora stato effettuato l'accesso.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-215">**Note:** You'll be asked to sign in to your Azure account if you're not already signed in.</span></span>

1. <span data-ttu-id="ab2d7-216">Selezionare le varie impostazioni per la macchina virtuale e quindi scegliere **OK**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-216">Select the various settings for the virtual machine and then select **OK**.</span></span> <span data-ttu-id="ab2d7-217">Per altre informazioni, vedere [Macchine virtuali](http://go.microsoft.com/fwlink/?LinkId=623033) .</span><span class="sxs-lookup"><span data-stu-id="ab2d7-217">See [Virtual Machines](http://go.microsoft.com/fwlink/?LinkId=623033) for more information.</span></span>

    <span data-ttu-id="ab2d7-218">Il valore specificato per il nome DNS sarà il nome della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-218">The name you enter for DNS name will be the name of the virtual machine.</span></span>

    ![Finestra di dialogo Crea macchina virtuale di Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746724.png)

    <span data-ttu-id="ab2d7-220">Azure crea la macchina virtuale e quindi esegue il provisioning e la configurazione degli endpoint, ad esempio Desktop remoto e Distribuzione Web</span><span class="sxs-lookup"><span data-stu-id="ab2d7-220">Azure creates the virtual machine and then provisions and configures the endpoints, such as Remote Desktop and Web Deploy</span></span>
2. <span data-ttu-id="ab2d7-221">Dopo aver configurato completamente la macchina virtuale, selezionare il relativo nodo in Esplora server.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-221">After the virtual machine is fully configured, select the virtual machine’s node in Server Explorer.</span></span>
3. <span data-ttu-id="ab2d7-222">Aprire il menu di scelta rapida e selezionare **Abilita debug**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-222">Open the context menu and select **Enable Debugging**.</span></span> <span data-ttu-id="ab2d7-223">Quando viene chiesto se si è certi di voler abilitare il debug nella macchina virtuale, selezionare **Sì**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-223">When asked if you're sure if you want to enable debugging on the virtual machine, select **Yes**.</span></span>

    <span data-ttu-id="ab2d7-224">Azure installa l'estensione di debug remoto nella macchina virtuale per abilitare il debug.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-224">Azure installs the remote debugging extension to the virtual machine to enable debugging.</span></span>

    ![Comando di debug di abilitazione della macchina virtuale](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746720.png)

    ![Finestra Log attività di Azure](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746721.png)
4. <span data-ttu-id="ab2d7-227">Pubblicare il progetto come descritto in [Procedura: Distribuire un progetto Web tramite la pubblicazione con un clic in Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span><span class="sxs-lookup"><span data-stu-id="ab2d7-227">Publish your project as outlined in [How to: Deploy a Web Project Using One-Click Publish in Visual Studio](https://msdn.microsoft.com/library/dd465337.aspx).</span></span> <span data-ttu-id="ab2d7-228">Poiché si intende eseguire il debug nella macchina virtuale, nella pagina **Impostazioni** della procedura guidata **Pubblica sul Web** selezionare **Debug** come configurazione.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-228">Because you want to debug on the virtual machine, on the **Settings** page of the **Publish Web** wizard, select **Debug** as the configuration.</span></span> <span data-ttu-id="ab2d7-229">Ciò assicura che i simboli del codice siano disponibili durante il debug.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-229">This makes sure that code symbols are available while debugging.</span></span>

    ![Impostazioni di pubblicazione](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718349.png)
5. <span data-ttu-id="ab2d7-231">In **Opzioni pubblicazione file** selezionare **Rimuovi i file aggiuntivi nella destinazione** se il progetto è già stato distribuito in precedenza.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-231">In the **File Publish Options**, select **Remove additional files at destination** if the project was already deployed at an earlier time.</span></span>
6. <span data-ttu-id="ab2d7-232">Dopo la pubblicazione del progetto, selezionare **Collega debugger...**</span><span class="sxs-lookup"><span data-stu-id="ab2d7-232">After the project publishes, on the virtual machine's context menu in Server Explorer, select **Attach Debugger...**</span></span>

    <span data-ttu-id="ab2d7-233">Azure ottiene un elenco dei processi nella macchina virtuale e li visualizza nella finestra di dialogo Connetti a processo.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-233">Azure gets a list of the processes on the virtual machine and shows them in the Attach to Process dialog box.</span></span>

    ![Comando Collega debugger](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC746722.png)
7. <span data-ttu-id="ab2d7-235">Nella finestra di dialogo **Connetti a processo** scegliere **Seleziona** per limitare l'elenco di risultati in modo che visualizzi solo i tipi di codice da sottoporre a debug.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-235">In the **Attach to Process** dialog box, select **Select** to limit the results list to show only the types of code you want to debug.</span></span> <span data-ttu-id="ab2d7-236">È possibile eseguire il debug di codice gestito, codice nativo o entrambi a 32 o 64 bit.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-236">You can debug 32- or 64-bit managed code, native code, or both.</span></span>

    ![Finestra di dialogo Seleziona tipo di codice](./media/vs-azure-tools-debug-cloud-services-virtual-machines/IC718346.png)
8. <span data-ttu-id="ab2d7-238">Selezionare i processi da sottoporre a debug nella macchina virtuale e quindi scegliere **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-238">Select the processes you want to debug on the virtual machine and then select **Attach**.</span></span> <span data-ttu-id="ab2d7-239">Ad esempio, è possibile scegliere il processo w3wp.exe se si desidera eseguire il debug di un'applicazione Web nella macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-239">For example, you might choose the w3wp.exe process if you wanted to debug a web app on the virtual machine.</span></span> <span data-ttu-id="ab2d7-240">Per altre informazioni, vedere [Debug di uno o più processi in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) .</span><span class="sxs-lookup"><span data-stu-id="ab2d7-240">See [Debug One or More Processes in Visual Studio](https://msdn.microsoft.com/library/jj919165.aspx) for more information.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ab2d7-241">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ab2d7-241">Next steps</span></span>
* <span data-ttu-id="ab2d7-242">Usare **Intellitrace** per raccogliere un registro degli eventi e delle chiamate da un server di rilascio.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-242">Use **Intellitrace** to collect a log of calls and events from a release server.</span></span> <span data-ttu-id="ab2d7-243">Vedere [Debug di un servizio cloud pubblicato con IntelliTrace e Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span><span class="sxs-lookup"><span data-stu-id="ab2d7-243">See [Debugging a Published Cloud Service with IntelliTrace and Visual Studio](http://go.microsoft.com/fwlink/?LinkID=623016).</span></span>
* <span data-ttu-id="ab2d7-244">Usare **Diagnostica di Azure** per registrare informazioni dettagliate dal codice eseguito all'interno dei ruoli, sia che essi siano eseguiti nell'ambiente di sviluppo o in Azure.</span><span class="sxs-lookup"><span data-stu-id="ab2d7-244">Use **Azure Diagnostics** to log detailed information from code running within roles, whether the roles are running in the development environment or in Azure.</span></span> <span data-ttu-id="ab2d7-245">Vedere [Raccogliere dati di registrazione usando Diagnostica di Azure](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span><span class="sxs-lookup"><span data-stu-id="ab2d7-245">See [Collecting logging data by using Azure Diagnostics](http://go.microsoft.com/fwlink/p/?LinkId=400450).</span></span>
