---
title: Implementare la sincronizzazione password con il servizio di sincronizzazione Azure AD Connect | Microsoft Docs
description: Contiene informazioni sul funzionamento e sulla configurazione della sincronizzazione password.
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 05f16c3e-9d23-45dc-afca-3d0fa9dbf501
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: billmath
ms.openlocfilehash: db9b1578a235be9018fc1985cc75a0a05ee47b3a
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="implement-password-synchronization-with-azure-ad-connect-sync"></a><span data-ttu-id="f290d-103">Implementare la sincronizzazione password con il servizio di sincronizzazione Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="f290d-103">Implement password synchronization with Azure AD Connect sync</span></span>
<span data-ttu-id="f290d-104">Questo articolo contiene le informazioni necessarie per sincronizzare le password utente da un'istanza di Active Directory locale a un'istanza di Azure Active Directory (Azure AD) basata sul cloud.</span><span class="sxs-lookup"><span data-stu-id="f290d-104">This article provides information that you need to synchronize your user passwords from an on-premises Active Directory instance to a cloud-based Azure Active Directory (Azure AD) instance.</span></span>

## <a name="what-is-password-synchronization"></a><span data-ttu-id="f290d-105">Informazioni sulla sincronizzazione password</span><span class="sxs-lookup"><span data-stu-id="f290d-105">What is password synchronization</span></span>
<span data-ttu-id="f290d-106">La probabilità di restare bloccati e di non poter portare a termine il proprio lavoro per aver dimenticato una password è proporzionale al numero di password diverse che è necessario ricordare.</span><span class="sxs-lookup"><span data-stu-id="f290d-106">The probability that you're blocked from getting your work done due to a forgotten password is related to the number of different passwords you need to remember.</span></span> <span data-ttu-id="f290d-107">Più password si devono ricordare, maggiore sarà la probabilità di dimenticarne una.</span><span class="sxs-lookup"><span data-stu-id="f290d-107">The more passwords you need to remember, the higher the probability to forget one.</span></span> <span data-ttu-id="f290d-108">Le domande e le chiamate relative alla reimpostazione della password e ad altri problemi correlati impegnano la maggior parte delle risorse di supporto tecnico.</span><span class="sxs-lookup"><span data-stu-id="f290d-108">Questions and calls about password resets and other password-related issues demand the most helpdesk resources.</span></span>

<span data-ttu-id="f290d-109">La sincronizzazione password è una funzionalità usata per sincronizzare le password utente da un'istanza di Active Directory locale a un'istanza di Azure AD basata sul cloud.</span><span class="sxs-lookup"><span data-stu-id="f290d-109">Password synchronization is a feature used to synchronize user passwords from an on-premises Active Directory instance to a cloud-based Azure AD instance.</span></span>
<span data-ttu-id="f290d-110">Usare questa funzionalità per accedere a servizi di Azure AD come Office 365, Microsoft Intune, CRM Online e Azure Active Directory Domain Services.</span><span class="sxs-lookup"><span data-stu-id="f290d-110">Use this feature to sign in to Azure AD services like Office 365, Microsoft Intune, CRM Online, and Azure Active Directory Domain Services (Azure AD DS).</span></span> <span data-ttu-id="f290d-111">Per accedere al servizio, è necessario usare la stessa password usata per accedere all'istanza di Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="f290d-111">You sign in to the service by using the same password you use to sign in to your on-premises Active Directory instance.</span></span>

![Cos'è Azure AD Connect](./media/active-directory-aadconnectsync-implement-password-synchronization/arch1.png)

<span data-ttu-id="f290d-113">La riduzione del numero di password permette agli utenti di mantenerne una sola.</span><span class="sxs-lookup"><span data-stu-id="f290d-113">By reducing the number of passwords, your users need to maintain to just one.</span></span> <span data-ttu-id="f290d-114">La sincronizzazione password permette di:</span><span class="sxs-lookup"><span data-stu-id="f290d-114">Password synchronization helps you to:</span></span>

* <span data-ttu-id="f290d-115">Migliorare la produttività degli utenti.</span><span class="sxs-lookup"><span data-stu-id="f290d-115">Improve the productivity of your users.</span></span>
* <span data-ttu-id="f290d-116">Ridurre i costi del supporto tecnico.</span><span class="sxs-lookup"><span data-stu-id="f290d-116">Reduce your helpdesk costs.</span></span>  

<span data-ttu-id="f290d-117">Inoltre, se si decide di usare la [federazione con Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), è possibile configurare la sincronizzazione password come backup in caso di errore dell'infrastruttura di AD FS.</span><span class="sxs-lookup"><span data-stu-id="f290d-117">Also, if you decide to use [Federation with Active Directory Federation Services (AD FS)](https://channel9.msdn.com/Series/Azure-Active-Directory-Videos-Demos/Configuring-AD-FS-for-user-sign-in-with-Azure-AD-Connect), you can optionally set up password synchronization as a backup in case your AD FS infrastructure fails.</span></span>

<span data-ttu-id="f290d-118">La sincronizzazione password è un'estensione della funzionalità di sincronizzazione della directory implementata dal relativo servizio Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f290d-118">Password synchronization is an extension to the directory synchronization feature implemented by Azure AD Connect sync.</span></span> <span data-ttu-id="f290d-119">Per usare la sincronizzazione password nel proprio ambiente, è necessario:</span><span class="sxs-lookup"><span data-stu-id="f290d-119">To use password synchronization in your environment, you need to:</span></span>

* <span data-ttu-id="f290d-120">Installare Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="f290d-120">Install Azure AD Connect.</span></span>  
* <span data-ttu-id="f290d-121">Configurare la sincronizzazione della directory tra l'istanza di Active Directory locale e l'istanza di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f290d-121">Configure directory synchronization between your on-premises Active Directory instance and your Azure Active Directory instance.</span></span>
* <span data-ttu-id="f290d-122">Abilitare la sincronizzazione password.</span><span class="sxs-lookup"><span data-stu-id="f290d-122">Enable password synchronization.</span></span>

<span data-ttu-id="f290d-123">Per altri dettagli, vedere [Integrazione delle identità locali con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="f290d-123">For more details, see [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

> [!NOTE]
> <span data-ttu-id="f290d-124">Per altre informazioni su Azure Active Directory Domain Services configurato per FIPS e la sincronizzazione password, vedere "Sincronizzazione password e FIPS" più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="f290d-124">For more details about Azure Active Directory Domain Services configured for FIPS and password synchronization, see "Password synchronization and FIPS" later in this article.</span></span>
>
>

## <a name="how-password-synchronization-works"></a><span data-ttu-id="f290d-125">Funzionamento della sincronizzazione password</span><span class="sxs-lookup"><span data-stu-id="f290d-125">How password synchronization works</span></span>
<span data-ttu-id="f290d-126">Active Directory Domain Services archivia le password sotto forma di valore hash dell'effettiva password utente.</span><span class="sxs-lookup"><span data-stu-id="f290d-126">The Active Directory domain service stores passwords in the form of a hash value representation of the actual user password.</span></span> <span data-ttu-id="f290d-127">Un valore hash è il risultato di una funzione matematica unidirezionale, chiamata *algoritmo di hash*.</span><span class="sxs-lookup"><span data-stu-id="f290d-127">A hash value is a result of a one-way mathematical function (the *hashing algorithm*).</span></span> <span data-ttu-id="f290d-128">Non esiste un metodo per ripristinare la versione in testo normale di una password dal risultato di una funzione unidirezionale.</span><span class="sxs-lookup"><span data-stu-id="f290d-128">There is no method to revert the result of a one-way function to the plain text version of a password.</span></span> <span data-ttu-id="f290d-129">Non è possibile usare l'hash della password per accedere alla rete locale.</span><span class="sxs-lookup"><span data-stu-id="f290d-129">You cannot use a password hash to sign in to your on-premises network.</span></span>

<span data-ttu-id="f290d-130">Per sincronizzare la password, il servizio di sincronizzazione Azure AD Connect estrae l'hash della password dall'istanza di Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="f290d-130">To synchronize your password, Azure AD Connect sync extracts your password hash from the on-premises Active Directory instance.</span></span> <span data-ttu-id="f290d-131">All'hash della password viene applicata un'elaborazione di sicurezza aggiuntiva prima della sincronizzazione con il servizio di autenticazione di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f290d-131">Extra security processing is applied to the password hash before it is synchronized to the Azure Active Directory authentication service.</span></span> <span data-ttu-id="f290d-132">Le password vengono sincronizzate per ogni singolo utente e in ordine cronologico.</span><span class="sxs-lookup"><span data-stu-id="f290d-132">Passwords are synchronized on a per-user basis and in chronological order.</span></span>

<span data-ttu-id="f290d-133">L'effettivo flusso di dati del processo di sincronizzazione password è simile alla sincronizzazione degli dati utente come il nome visualizzato o gli indirizzi di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="f290d-133">The actual data flow of the password synchronization process is similar to the synchronization of user data such as DisplayName or Email Addresses.</span></span> <span data-ttu-id="f290d-134">Le password vengono tuttavia sincronizzate con una frequenza maggiore rispetto alla finestra di sincronizzazione standard della directory per altri attributi.</span><span class="sxs-lookup"><span data-stu-id="f290d-134">However, passwords are synchronized more frequently than the standard directory synchronization window for other attributes.</span></span> <span data-ttu-id="f290d-135">Il processo di sincronizzazione password viene eseguito ogni 2 minuti.</span><span class="sxs-lookup"><span data-stu-id="f290d-135">The password synchronization process runs every 2 minutes.</span></span> <span data-ttu-id="f290d-136">Non è possibile modificare la frequenza del processo.</span><span class="sxs-lookup"><span data-stu-id="f290d-136">You cannot modify the frequency of this process.</span></span> <span data-ttu-id="f290d-137">Se si sincronizza una password, la password sincronizzata sovrascrive quella esistente nel cloud.</span><span class="sxs-lookup"><span data-stu-id="f290d-137">When you synchronize a password, it overwrites the existing cloud password.</span></span>

<span data-ttu-id="f290d-138">Quando si abilita la funzionalità di sincronizzazione password per la prima volta, viene eseguita una sincronizzazione iniziale delle password di tutti gli utenti inclusi nell'ambito.</span><span class="sxs-lookup"><span data-stu-id="f290d-138">The first time you enable the password synchronization feature, it performs an initial synchronization of the passwords of all in-scope users.</span></span> <span data-ttu-id="f290d-139">Non è possibile definire in modo esplicito un subset di password utente da sincronizzare.</span><span class="sxs-lookup"><span data-stu-id="f290d-139">You cannot explicitly define a subset of user passwords that you want to synchronize.</span></span>

<span data-ttu-id="f290d-140">Quando si modifica una password locale, la password aggiornata viene sincronizzata, spesso in pochi minuti.</span><span class="sxs-lookup"><span data-stu-id="f290d-140">When you change an on-premises password, the updated password is synchronized, most often in a matter of minutes.</span></span>
<span data-ttu-id="f290d-141">In caso di sincronizzazioni non riuscite, la funzionalità di sincronizzazione password esegue anche automaticamente nuovi tentativi di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="f290d-141">The password synchronization feature automatically retries failed synchronization attempts.</span></span> <span data-ttu-id="f290d-142">Se si verifica un errore durante un tentativo di sincronizzazione di una password, viene registrato un errore nel visualizzatore eventi.</span><span class="sxs-lookup"><span data-stu-id="f290d-142">If an error occurs during an attempt to synchronize a password, an error is logged in your event viewer.</span></span>

<span data-ttu-id="f290d-143">La sincronizzazione di una password non ha alcun impatto sull'utente attualmente connesso.</span><span class="sxs-lookup"><span data-stu-id="f290d-143">The synchronization of a password has no impact on the user  who is currently signed in.</span></span>
<span data-ttu-id="f290d-144">Se si modifica una password sincronizzata dopo aver eseguito l'accesso a un servizio cloud, la sessione corrente del servizio cloud non è immediatamente interessata.</span><span class="sxs-lookup"><span data-stu-id="f290d-144">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you are signed in to a cloud service.</span></span> <span data-ttu-id="f290d-145">Tuttavia, quando il servizio cloud richiede di nuovo l'autenticazione, è necessario specificare la nuova password.</span><span class="sxs-lookup"><span data-stu-id="f290d-145">However, when the cloud service requires you to authenticate again, you need to provide your new password.</span></span>

<span data-ttu-id="f290d-146">Un utente deve immettere le proprie credenziali aziendali una seconda volta per l'autenticazione in Azure AD, indipendentemente dal fatto che abbia effettuato l'accesso alla rete aziendale.</span><span class="sxs-lookup"><span data-stu-id="f290d-146">A user must enter their corporate credentials a second time to authenticate to Azure AD, regardless of whether they're signed in to their corporate network.</span></span> <span data-ttu-id="f290d-147">Questo modello può essere ridotto al minimo se al momento dell'accesso l'utente seleziona la casella di controllo Mantieni l'accesso.</span><span class="sxs-lookup"><span data-stu-id="f290d-147">These pattern can be minimized, however, if the user selects the Keep me signed in (KMSI) check box at sign in.</span></span> <span data-ttu-id="f290d-148">La selezione di questa opzione imposta un cookie di sessione che permette di ignorare l'autenticazione per un breve periodo.</span><span class="sxs-lookup"><span data-stu-id="f290d-148">This selection sets a session cookie that bypasses authentication for a short period.</span></span> <span data-ttu-id="f290d-149">Il comportamento dell'opzione Mantieni l'accesso può essere abilitato o disabilitato dall'amministratore di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f290d-149">KMSI behavior can be enabled or disabled by the Azure AD administrator.</span></span>

> [!NOTE]
> <span data-ttu-id="f290d-150">La sincronizzazione delle password è supportata solo per l'utente del tipo di oggetto in Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f290d-150">Password sync is only supported for the object type user in Active Directory.</span></span> <span data-ttu-id="f290d-151">Non è supportata per il tipo di oggetto iNetOrgPerson.</span><span class="sxs-lookup"><span data-stu-id="f290d-151">It is not supported for the iNetOrgPerson object type.</span></span>

### <a name="detailed-description-of-how-password-synchronization-works"></a><span data-ttu-id="f290d-152">Descrizione dettagliata del funzionamento della sincronizzazione password</span><span class="sxs-lookup"><span data-stu-id="f290d-152">Detailed description of how password synchronization works</span></span>
<span data-ttu-id="f290d-153">Di seguito viene descritto in dettaglio il funzionamento della sincronizzazione password tra Active Directory e Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f290d-153">The following describes in-depth how password synchronization works between Active Directory and Azure AD.</span></span>

![Flusso dettagliato della sincronizzazione password](./media/active-directory-aadconnectsync-implement-password-synchronization/arch3.png)


1. <span data-ttu-id="f290d-155">Ogni due minuti, l'agente di sincronizzazione password nel server di AD Connect richiede gli hash delle password archiviate (attributo unicodePwd) da un controller di dominio tramite il protocollo di replica [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) standard usato per sincronizzare i dati tra i controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="f290d-155">Every two minutes, the password synchronization agent on the AD Connect server requests stored password hashes (the unicodePwd attribute) from a DC via the standard [MS-DRSR](https://msdn.microsoft.com/library/cc228086.aspx) replication protocol used to synchronize data between DCs.</span></span> <span data-ttu-id="f290d-156">L'account di servizio deve disporre delle autorizzazioni di Azure AD Replica modifiche directory e Replica modifiche directory - Tutto (concesse per impostazione predefinita in fase di installazione) per ottenere gli hash delle password.</span><span class="sxs-lookup"><span data-stu-id="f290d-156">The service account must have Replicate Directory Changes and Replicate Directory Changes All AD permissions (granted by default on installation) to obtain the password hashes.</span></span>
2. <span data-ttu-id="f290d-157">Prima dell'invio, il controller di dominio crittografa l'hash della password MD4 tramite una chiave corrispondente a un hash [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) della chiave di sessione RPC e a un valore salt.</span><span class="sxs-lookup"><span data-stu-id="f290d-157">Before sending, the DC encrypts the MD4 password hash by using a key that is a [MD5](http://www.rfc-editor.org/rfc/rfc1321.txt) hash of the RPC session key and a salt.</span></span> <span data-ttu-id="f290d-158">Invia quindi il risultato dell'agente di sincronizzazione password tramite RPC.</span><span class="sxs-lookup"><span data-stu-id="f290d-158">It then sends the result to the password synchronization agent over RPC.</span></span> <span data-ttu-id="f290d-159">Il controller di dominio passa inoltre il valore salt all'agente di sincronizzazione usando il protocollo di replica del controller di dominio, in modo che l'agente sia in grado di decrittografare la busta.</span><span class="sxs-lookup"><span data-stu-id="f290d-159">The DC also passes the salt to the synchronization agent by using the DC replication protocol, so the agent will be able to decrypt the envelope.</span></span>
3.  <span data-ttu-id="f290d-160">Dopo che l'agente di sincronizzazione password ha ottenuto la busta crittografata, usa [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) e il valore salt per generare una chiave per decrittografare i dati ricevuti riportandoli nel formato MD4 originale.</span><span class="sxs-lookup"><span data-stu-id="f290d-160">After the password synchronization agent has the encrypted envelope, it uses [MD5CryptoServiceProvider](https://msdn.microsoft.com/library/System.Security.Cryptography.MD5CryptoServiceProvider.aspx) and the salt to generate a key to decrypt the received data back to its original MD4 format.</span></span> <span data-ttu-id="f290d-161">In nessun momento l'agente di sincronizzazione password ha accesso alla password non crittografata.</span><span class="sxs-lookup"><span data-stu-id="f290d-161">At no point does the password synchronization agent have access to the clear text password.</span></span> <span data-ttu-id="f290d-162">L'uso di MD5 da parte dell'agente di sincronizzazione password è esclusivamente per la compatibilità del protocollo di replica con il controller di dominio e viene usato solo in locale tra il controller di dominio e l'agente di sincronizzazione password.</span><span class="sxs-lookup"><span data-stu-id="f290d-162">The password synchronization agent’s use of MD5 is strictly for replication protocol compatibility with the DC, and it is only used on premises between the DC and the password synchronization agent.</span></span>
4.  <span data-ttu-id="f290d-163">L'agente di sincronizzazione password espande l'hash della password binario a 16 byte in 64 byte convertendo per prima cosa l'hash in una stringa esadecimale a 32 byte e quindi riconvertendo questa stessa stringa in formato binario con la codifica UTF-16.</span><span class="sxs-lookup"><span data-stu-id="f290d-163">The password synchronization agent expands the 16-byte binary password hash to 64 bytes by first converting the hash to a 32-byte hexadecimal string, then converting this string back into binary with UTF-16 encoding.</span></span>
5.  <span data-ttu-id="f290d-164">L'agente di sincronizzazione password aggiunge un valore salt lungo 10 byte al file binario a 64 byte per proteggere ulteriormente l'hash originale.</span><span class="sxs-lookup"><span data-stu-id="f290d-164">The password synchronization agent adds a salt, consisting of a 10-byte length salt, to the 64-byte binary to further protect the original hash.</span></span>
6.  <span data-ttu-id="f290d-165">L'agente di sincronizzazione password combina quindi l'hash MD4 con il valore salt e li inserisce nella funzione [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt).</span><span class="sxs-lookup"><span data-stu-id="f290d-165">The password synchronization agent then combines the MD4 hash plus salt, and inputs it into the [PBKDF2](https://www.ietf.org/rfc/rfc2898.txt) function.</span></span> <span data-ttu-id="f290d-166">Vengono usate 1000 iterazioni dell'algoritmo di hash con chiave [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx).</span><span class="sxs-lookup"><span data-stu-id="f290d-166">1000 iterations of the [HMAC-SHA256](https://msdn.microsoft.com/library/system.security.cryptography.hmacsha256.aspx) keyed hashing algorithm is used.</span></span> 
7.  <span data-ttu-id="f290d-167">L'agente di sincronizzazione password concatena all'hash a 32 byte risultante sia il valore salt sia il numero di iterazioni SHA256 (per l'uso con Azure AD) e quindi trasmette la stringa da Azure AD Connect ad Azure AD tramite SSL.</span><span class="sxs-lookup"><span data-stu-id="f290d-167">The password synchronization agent takes the resulting 32-byte hash, concatenates both the salt and the number of SHA256 iterations to it (for use by Azure AD), then transmits the string from Azure AD Connect to Azure AD over SSL.</span></span></br> 
8.  <span data-ttu-id="f290d-168">Quando un utente prova ad accedere ad Azure AD e immette la password, la password viene eseguita tramite lo stesso processo MD4 + valore salt + PBKDF2 + HMAC-SHA256.</span><span class="sxs-lookup"><span data-stu-id="f290d-168">When a user attempts to sign in to Azure AD and enters their password, the password is run through the same MD4+salt+PBKDF2+HMAC-SHA256 process.</span></span> <span data-ttu-id="f290d-169">Se l'hash risultante corrisponde all'hash archiviato in Azure AD, l'utente ha immesso la password corretta e viene autenticato.</span><span class="sxs-lookup"><span data-stu-id="f290d-169">If the resulting hash matches the hash stored in Azure AD, the user has entered the correct password and is authenticated.</span></span> 

>[!Note] 
><span data-ttu-id="f290d-170">L'hash MD4 originale non viene trasmesso ad Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f290d-170">The original MD4 hash is not transmitted to Azure AD.</span></span> <span data-ttu-id="f290d-171">Viene invece trasmesso l'hash SHA256 dell'hash MD4 originale.</span><span class="sxs-lookup"><span data-stu-id="f290d-171">Instead, the SHA256 hash of the original MD4 hash is transmitted.</span></span> <span data-ttu-id="f290d-172">Di conseguenza, se si riesce a ottenere l'hash archiviato in Azure AD, questo non può essere usato in un attacco di tipo Pass-the-Hash locale.</span><span class="sxs-lookup"><span data-stu-id="f290d-172">As a result, if the hash stored in Azure AD is obtained, it cannot be used in an on-premises pass-the-hash attack.</span></span>

### <a name="how-password-synchronization-works-with-azure-active-directory-domain-services"></a><span data-ttu-id="f290d-173">Funzionamento della sincronizzazione password con Azure Active Directory Domain Services</span><span class="sxs-lookup"><span data-stu-id="f290d-173">How password synchronization works with Azure Active Directory Domain Services</span></span>
<span data-ttu-id="f290d-174">È possibile usare la funzionalità di sincronizzazione password per sincronizzare le password locali con [Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="f290d-174">You can also use the password synchronization feature to synchronize your on-premises passwords to [Azure Active Directory Domain Services](../../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="f290d-175">In questo scenario l'istanza di Azure Active Directory Domain Services autentica gli utenti nel cloud con tutti i metodi disponibili nell'istanza di Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="f290d-175">In this scenario, the Azure Active Directory Domain Services instance authenticates your users in the cloud with all the methods available in your on-premises Active Directory instance.</span></span> <span data-ttu-id="f290d-176">L'esperienza di questo scenario è simile all'uso dell'Utilità di migrazione ad Active Directory (ADMT) in un ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="f290d-176">The experience of this scenario is similar to using the Active Directory Migration Tool (ADMT) in an on-premises environment.</span></span>

### <a name="security-considerations"></a><span data-ttu-id="f290d-177">Considerazioni relative alla sicurezza</span><span class="sxs-lookup"><span data-stu-id="f290d-177">Security considerations</span></span>
<span data-ttu-id="f290d-178">Quando si sincronizzano le password, la versione in testo normale della password non viene esposta alla funzionalità di sincronizzazione password, né ad Azure AD o a qualsiasi servizio associato.</span><span class="sxs-lookup"><span data-stu-id="f290d-178">When synchronizing passwords, the plain-text version of your password is not exposed to the password synchronization feature, to Azure AD, or any of the associated services.</span></span>

<span data-ttu-id="f290d-179">L'autenticazione utente viene eseguita in Azure AD e non nell'istanza di Active Directory dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="f290d-179">User authentication takes place against Azure AD rather than against the organization's own Active Directory instance.</span></span> <span data-ttu-id="f290d-180">Se l'organizzazione teme che la trasmissione dei dati relativi alle password all'esterno dell'organizzazione possa creare problemi, tenere presente che i dati delle password SHA256 archiviati in Azure AD, ovvero un hash dell'hash MD4 originale, sono notevolmente più sicuri rispetto a quello che viene archiviato in Active Directory.</span><span class="sxs-lookup"><span data-stu-id="f290d-180">If your organization has concerns about password data in any form leaving the premises, consider the fact that the SHA256 password data stored in Azure AD--a hash of the original MD4 hash--is significantly more secure than what is stored in Active Directory.</span></span> <span data-ttu-id="f290d-181">Inoltre, dal momento che questo hash SHA256 non può essere decrittografato, non potrà essere ripresentato nell'ambiente Active Directory dell'organizzazione come una password utente valida in un attacco di tipo Pass-the-Hash.</span><span class="sxs-lookup"><span data-stu-id="f290d-181">Further, because this SHA256 hash cannot be decrypted, it cannot be brought back to the organization's Active Directory environment and presented as a valid user password in a pass-the-hash attack.</span></span>





### <a name="password-policy-considerations"></a><span data-ttu-id="f290d-182">Considerazioni relative ai criteri password</span><span class="sxs-lookup"><span data-stu-id="f290d-182">Password policy considerations</span></span>
<span data-ttu-id="f290d-183">L'abilitazione della sincronizzazione password influisce su due tipi di criteri password:</span><span class="sxs-lookup"><span data-stu-id="f290d-183">There are two types of password policies that are affected by enabling password synchronization:</span></span>

* <span data-ttu-id="f290d-184">Criteri di complessità delle password</span><span class="sxs-lookup"><span data-stu-id="f290d-184">Password complexity policy</span></span>
* <span data-ttu-id="f290d-185">Criteri di scadenza delle password</span><span class="sxs-lookup"><span data-stu-id="f290d-185">Password expiration policy</span></span>

#### <a name="password-complexity-policy"></a><span data-ttu-id="f290d-186">Criteri di complessità delle password</span><span class="sxs-lookup"><span data-stu-id="f290d-186">Password complexity policy</span></span>  
<span data-ttu-id="f290d-187">Quando la sincronizzazione password è abilitata, i criteri di complessità delle password presenti nell'istanza di Active Directory locale sostituiscono i criteri di complessità definiti nel cloud per gli utenti sincronizzati.</span><span class="sxs-lookup"><span data-stu-id="f290d-187">When password synchronization is enabled, the password complexity policies in your on-premises Active Directory instance override complexity policies in the cloud for synchronized users.</span></span> <span data-ttu-id="f290d-188">È possibile usare tutte le password valide dell'istanza di Active Directory locale per accedere ai servizi Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f290d-188">You can use all of the valid passwords from your on-premises Active Directory instance to access Azure AD services.</span></span>

> [!NOTE]
> <span data-ttu-id="f290d-189">Le password degli utenti create direttamente nel cloud restano soggette ai criteri password definiti nel cloud.</span><span class="sxs-lookup"><span data-stu-id="f290d-189">Passwords for users that are created directly in the cloud are still subject to password policies as defined in the cloud.</span></span>

#### <a name="password-expiration-policy"></a><span data-ttu-id="f290d-190">Criteri di scadenza delle password</span><span class="sxs-lookup"><span data-stu-id="f290d-190">Password expiration policy</span></span>  
<span data-ttu-id="f290d-191">Se un utente è incluso nell'ambito della sincronizzazione password, la password dell'account cloud viene impostata su *Non scade mai*.</span><span class="sxs-lookup"><span data-stu-id="f290d-191">If a user is in the scope of password synchronization, the cloud account password is set to *Never Expire*.</span></span>

<span data-ttu-id="f290d-192">È possibile continuare ad accedere ai servizi cloud usando una password sincronizzata che è in realtà scaduta nell'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="f290d-192">You can continue to sign in to your cloud services by using a synchronized password that is expired in your on-premises environment.</span></span> <span data-ttu-id="f290d-193">La password cloud viene aggiornata alla modifica successiva della password nell'ambiente locale.</span><span class="sxs-lookup"><span data-stu-id="f290d-193">Your cloud password is updated the next time you change the password in the on-premises environment.</span></span>

#### <a name="account-expiration"></a><span data-ttu-id="f290d-194">Scadenza dell'account</span><span class="sxs-lookup"><span data-stu-id="f290d-194">Account expiration</span></span>
<span data-ttu-id="f290d-195">Se l'organizzazione usa l'attributo accountExpires come parte della gestione degli account utente, tenere presente che questo attributo non viene sincronizzato con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f290d-195">If your organization uses the accountExpires attribute as part of user account management, be aware that this attribute is not synchronized to Azure AD.</span></span> <span data-ttu-id="f290d-196">Di conseguenza, un account Active Directory scaduto in un ambiente configurato per la sincronizzazione password continuerà a essere attivo in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f290d-196">As a result, an expired Active Directory account in an environment configured for password synchronization will still be active in Azure AD.</span></span> <span data-ttu-id="f290d-197">Se l'account è scaduto, è consigliabile fare in modo che un'azione del flusso di lavoro attivi uno script di PowerShell per disabilitare l'account Azure AD dell'utente.</span><span class="sxs-lookup"><span data-stu-id="f290d-197">We recommend that if the account is expired, a workflow action should trigger a PowerShell script that disables the user's Azure AD account.</span></span> <span data-ttu-id="f290d-198">Al contrario, quando l'account è attivato, è necessario attivare anche l'istanza di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="f290d-198">Conversely, when the account is turned on, the Azure AD instance should be turned on.</span></span>

### <a name="overwrite-synchronized-passwords"></a><span data-ttu-id="f290d-199">Sovrascrivere password sincronizzate</span><span class="sxs-lookup"><span data-stu-id="f290d-199">Overwrite synchronized passwords</span></span>
<span data-ttu-id="f290d-200">Un amministratore può reimpostare manualmente la password usando Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f290d-200">An administrator can manually reset your password by using Windows PowerShell.</span></span>

<span data-ttu-id="f290d-201">In questo caso, la password sincronizzata viene sostituita dalla nuova password, a cui si applicano tutti i criteri password definiti nel cloud.</span><span class="sxs-lookup"><span data-stu-id="f290d-201">In this case, the new password overrides your synchronized password, and all password policies defined in the cloud are applied to the new password.</span></span>

<span data-ttu-id="f290d-202">Se si modifica di nuovo la password locale, la nuova password viene sincronizzata nel cloud e sostituisce la password aggiornata manualmente.</span><span class="sxs-lookup"><span data-stu-id="f290d-202">If you change your on-premises password again, the new password is synchronized to the cloud, and it overrides the manually updated password.</span></span>

<span data-ttu-id="f290d-203">La sincronizzazione di una password non ha alcun impatto sull'utente di Azure connesso.</span><span class="sxs-lookup"><span data-stu-id="f290d-203">The synchronization of a password has no impact on the Azure user who is signed in.</span></span> <span data-ttu-id="f290d-204">Se si modifica una password sincronizzata dopo aver eseguito l'accesso a un servizio cloud, questa operazione non ha un impatto immediato sulla sessione corrente del servizio cloud.</span><span class="sxs-lookup"><span data-stu-id="f290d-204">Your current cloud service session is not immediately affected by a synchronized password change that occurs while you're signed in to a cloud service.</span></span> <span data-ttu-id="f290d-205">L'opzione Mantieni l'accesso estende la durata in base a questa differenza.</span><span class="sxs-lookup"><span data-stu-id="f290d-205">KMSI extends the duration of this difference.</span></span> <span data-ttu-id="f290d-206">Quando il servizio cloud richiede di nuovo l'autenticazione, è necessario specificare la nuova password.</span><span class="sxs-lookup"><span data-stu-id="f290d-206">When the cloud service requires you to authenticate again, you need to provide your new password.</span></span>

### <a name="additional-advantages"></a><span data-ttu-id="f290d-207">Vantaggi aggiuntivi</span><span class="sxs-lookup"><span data-stu-id="f290d-207">Additional advantages</span></span>

- <span data-ttu-id="f290d-208">In genere, la sincronizzazione password è più semplice da implementare rispetto a un servizio federativo.</span><span class="sxs-lookup"><span data-stu-id="f290d-208">Generally, password synchronization is simpler to implement than a federation service.</span></span> <span data-ttu-id="f290d-209">Non richiede altri server e permette di eliminare la dipendenza da un servizio federativo a disponibilità elevata per l'autenticazione degli utenti.</span><span class="sxs-lookup"><span data-stu-id="f290d-209">It doesn't require any additional servers, and eliminates dependence on a highly available federation service to authenticate users.</span></span> 
- <span data-ttu-id="f290d-210">La sincronizzazione password può anche essere abilitata in aggiunta alla federazione.</span><span class="sxs-lookup"><span data-stu-id="f290d-210">Password synchronization can also be enabled in addition to federation.</span></span> <span data-ttu-id="f290d-211">Può inoltre essere usata come fallback in caso di interruzione del servizio federativo.</span><span class="sxs-lookup"><span data-stu-id="f290d-211">It may be used as a fallback if your federation service experiences an outage.</span></span>












## <a name="enable-password-synchronization"></a><span data-ttu-id="f290d-212">Abilitare la sincronizzazione password</span><span class="sxs-lookup"><span data-stu-id="f290d-212">Enable password synchronization</span></span>
<span data-ttu-id="f290d-213">Quando si installa Azure AD Connect usando l'opzione **Impostazioni rapide**, la sincronizzazione password viene automaticamente abilitata.</span><span class="sxs-lookup"><span data-stu-id="f290d-213">When you install Azure AD Connect by using the **Express Settings** option, password synchronization is automatically enabled.</span></span> <span data-ttu-id="f290d-214">Per altre informazioni dettagliate, vedere [Introduzione alle impostazioni rapide per Azure AD Connect](active-directory-aadconnect-get-started-express.md).</span><span class="sxs-lookup"><span data-stu-id="f290d-214">For more details, see [Getting started with Azure AD Connect using express settings](active-directory-aadconnect-get-started-express.md).</span></span>

<span data-ttu-id="f290d-215">Se si usano impostazioni personalizzate quando si installa Azure AD Connect, la sincronizzazione password è disponibile nella pagina di accesso dell'utente.</span><span class="sxs-lookup"><span data-stu-id="f290d-215">If you use custom settings when you install Azure AD Connect, password synchronization is available on the user sign-in page.</span></span> <span data-ttu-id="f290d-216">Per altre informazioni dettagliate, vedere [Installazione personalizzata di Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span><span class="sxs-lookup"><span data-stu-id="f290d-216">For more details, see [Custom installation of Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span></span>

![Abilitazione della sincronizzazione password](./media/active-directory-aadconnectsync-implement-password-synchronization/usersignin.png)

### <a name="password-synchronization-and-fips"></a><span data-ttu-id="f290d-218">Sincronizzazione password e FIPS</span><span class="sxs-lookup"><span data-stu-id="f290d-218">Password synchronization and FIPS</span></span>
<span data-ttu-id="f290d-219">Se il server è stato bloccato in conformità allo standard FIPS (Federal Information Processing Standard), MD5 è disabilitato.</span><span class="sxs-lookup"><span data-stu-id="f290d-219">If your server has been locked down according to Federal Information Processing Standard (FIPS), then MD5 is disabled.</span></span>

<span data-ttu-id="f290d-220">**Per abilitare MD5 per la sincronizzazione password, seguire questa procedura:**</span><span class="sxs-lookup"><span data-stu-id="f290d-220">**To enable MD5 for password synchronization, perform the following steps:**</span></span>

1. <span data-ttu-id="f290d-221">Passare a %programmi%\Azure AD Sync\Bin.</span><span class="sxs-lookup"><span data-stu-id="f290d-221">Go to %programfiles%\Azure AD Sync\Bin.</span></span>
2. <span data-ttu-id="f290d-222">Aprire miiserver.exe.config.</span><span class="sxs-lookup"><span data-stu-id="f290d-222">Open miiserver.exe.config.</span></span>
3. <span data-ttu-id="f290d-223">Passare al nodo configuration/runtime alla fine del file.</span><span class="sxs-lookup"><span data-stu-id="f290d-223">Go to the configuration/runtime node at the end of the file.</span></span>
4. <span data-ttu-id="f290d-224">Aggiungere il nodo seguente: `<enforceFIPSPolicy enabled="false"/>`</span><span class="sxs-lookup"><span data-stu-id="f290d-224">Add the following node: `<enforceFIPSPolicy enabled="false"/>`</span></span>
5. <span data-ttu-id="f290d-225">Salvare le modifiche.</span><span class="sxs-lookup"><span data-stu-id="f290d-225">Save your changes.</span></span>

<span data-ttu-id="f290d-226">Come riferimento, il frammento di codice dovrà essere simile al seguente:</span><span class="sxs-lookup"><span data-stu-id="f290d-226">For reference, this snippet is what it should look like:</span></span>

```
    <configuration>
        <runtime>
            <enforceFIPSPolicy enabled="false"/>
        </runtime>
    </configuration>
```

<span data-ttu-id="f290d-227">Per informazioni sulla sicurezza e su FIPS, vedere [AAD Password Sync, encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/) (Sincronizzazione password, crittografia e conformità con FIPS di Azure AD).</span><span class="sxs-lookup"><span data-stu-id="f290d-227">For information about security and FIPS, see [AAD Password Sync, encryption and FIPS compliance](https://blogs.technet.microsoft.com/enterprisemobility/2014/06/28/aad-password-sync-encryption-and-fips-compliance/).</span></span>

## <a name="troubleshoot-password-synchronization"></a><span data-ttu-id="f290d-228">Risolvere i problemi di sincronizzazione password</span><span class="sxs-lookup"><span data-stu-id="f290d-228">Troubleshoot password synchronization</span></span>
<span data-ttu-id="f290d-229">In caso di problemi di sincronizzazione password, vedere [Risolvere i problemi di sincronizzazione delle password](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span><span class="sxs-lookup"><span data-stu-id="f290d-229">If you have problems with password synchronization, see [Troubleshoot password synchronization](active-directory-aadconnectsync-troubleshoot-password-synchronization.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f290d-230">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="f290d-230">Next steps</span></span>
* [<span data-ttu-id="f290d-231">Servizio di sincronizzazione Azure AD Connect: personalizzazione delle opzioni di sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="f290d-231">Azure AD Connect sync: Customizing synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="f290d-232">Integrazione delle identità locali con Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="f290d-232">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
