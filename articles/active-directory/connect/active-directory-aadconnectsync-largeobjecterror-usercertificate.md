---
title: 'Sincronizzazione di Azure AD Connect: gestione degli errori LargeObject causati dall''attributo userCertificate | Microsoft Docs'
description: In questo argomento vengono illustrati i passaggi per la correzione degli errori LargeObject causati dall'attributo userCertificate.
services: active-directory
documentationcenter: 
author: cychua
manager: femila
editor: 
ms.assetid: 146ad5b3-74d9-4a83-b9e8-0973a19828d9
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 2a5418ff61e07793fceca5a8207c1c5aa18847b4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-handling-largeobject-errors-caused-by-usercertificate-attribute"></a><span data-ttu-id="7e069-103">Sincronizzazione di Azure AD Connect: gestione degli errori LargeObject causati dall'attributo userCertificate</span><span class="sxs-lookup"><span data-stu-id="7e069-103">Azure AD Connect sync: Handling LargeObject errors caused by userCertificate attribute</span></span>

<span data-ttu-id="7e069-104">Azure AD applica un limite massimo di **15** valori del certificato nell'attributo **userCertificate**.</span><span class="sxs-lookup"><span data-stu-id="7e069-104">Azure AD enforces a maximum limit of **15** certificate values on the **userCertificate** attribute.</span></span> <span data-ttu-id="7e069-105">Se Azure AD Connect esporta un oggetto con più di 15 valori in Azure AD, Azure AD restituisce un errore **LargeObject** con il messaggio:</span><span class="sxs-lookup"><span data-stu-id="7e069-105">If Azure AD Connect exports an object with more than 15 values to Azure AD, Azure AD returns a **LargeObject** error with message:</span></span>

><span data-ttu-id="7e069-106">*"L'oggetto di cui è stato eseguito il provisioning presenta dimensioni troppo elevate. Ridurre il numero di valori attributo dell'oggetto. L'operazione sarà ritentata durante il successivo ciclo di sincronizzazione...."*</span><span class="sxs-lookup"><span data-stu-id="7e069-106">*"The provisioned object is too large. Trim the number of attribute values on this object. The operation will be retried in the next synchronization cycle..."*</span></span>

<span data-ttu-id="7e069-107">L'errore LargeObject può essere causato da altri attributi di AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-107">The LargeObject error may be caused by other AD attributes.</span></span> <span data-ttu-id="7e069-108">Per verificare che sia effettivamente causato dall'attributo userCertificate, è necessario confrontarlo con l'oggetto in AD locale o in [Ricerca metaverse di Synchronization Service Manager](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-mvsearch).</span><span class="sxs-lookup"><span data-stu-id="7e069-108">To confirm it is indeed caused by the userCertificate attribute, you need to verify against the object either in on-premises AD or in the [Synchronization Service Manager Metaverse Search](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-mvsearch).</span></span>

<span data-ttu-id="7e069-109">Per ottenere l'elenco di oggetti nel tenant con gli errori LargeObject, usare uno dei metodi seguenti:</span><span class="sxs-lookup"><span data-stu-id="7e069-109">To obtain the list of objects in your tenant with LargeObject errors, use one of the following methods:</span></span>

 * <span data-ttu-id="7e069-110">Se il tenant è abilitato per la sincronizzazione di Azure AD Connect Health, è possibile fare riferimento al [Report degli errori di sincronizzazione](https://docs.microsoft.com/azure/active-directory/connect-health/active-directory-aadconnect-health-sync#object-level-synchronization-error-report-preview) indicato.</span><span class="sxs-lookup"><span data-stu-id="7e069-110">If your tenant is enabled for Azure AD Connect Health for sync, you can refer to the [Synchronization Error Report](https://docs.microsoft.com/azure/active-directory/connect-health/active-directory-aadconnect-health-sync#object-level-synchronization-error-report-preview) provided.</span></span>
 
 * <span data-ttu-id="7e069-111">La notifica tramite posta elettronica relativa agli errori di sincronizzazione della directory inviata alla fine di ogni ciclo di sincronizzazione contiene l'elenco di oggetti con errori LargeObject.</span><span class="sxs-lookup"><span data-stu-id="7e069-111">The notification email for directory synchronization errors that is sent at the end of each sync cycle has the list of objects with LargeObject errors.</span></span> 
 * <span data-ttu-id="7e069-112">La [scheda Synchronization Service Manager Operations](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-operations) (Operazioni di Synchronization Service Manager) mostra l'elenco di oggetti con gli errori LargeObject se si sceglie l'esportazione più recente per il funzionamento di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-112">The [Synchronization Service Manager Operations tab](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-operations) displays the list of objects with LargeObject errors if you click the latest Export to Azure AD operation.</span></span>
 
## <a name="mitigation-options"></a><span data-ttu-id="7e069-113">Opzioni di mitigazione</span><span class="sxs-lookup"><span data-stu-id="7e069-113">Mitigation options</span></span>
<span data-ttu-id="7e069-114">Finché l'errore LargeObject non viene risolto, non è possibile esportare altre modifiche dell'attributo allo stesso oggetto in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-114">Until the LargeObject error is resolved, other attribute changes to the same object cannot be exported to Azure AD.</span></span> <span data-ttu-id="7e069-115">Per risolvere l'errore, è possibile considerare le seguenti opzioni:</span><span class="sxs-lookup"><span data-stu-id="7e069-115">To resolve the error, you can consider the following options:</span></span>

 * <span data-ttu-id="7e069-116">Aggiornare Azure AD Connect alla build 1.1.524.0 o successiva.</span><span class="sxs-lookup"><span data-stu-id="7e069-116">Upgrade Azure AD Connect to build 1.1.524.0 or after.</span></span> <span data-ttu-id="7e069-117">Nella build 1.1.524.0 di Azure AD Connect, le regole di sincronizzazione predefinite sono state aggiornate in modo da non esportare gli attributi userCertificate e userSMIMECertificate se gli attributi hanno più di 15 valori.</span><span class="sxs-lookup"><span data-stu-id="7e069-117">In Azure AD Connect build 1.1.524.0, the out-of-box synchronization rules have been updated to not export attributes userCertificate and userSMIMECertificate if the attributes have more than 15 values.</span></span> <span data-ttu-id="7e069-118">Per informazioni dettagliate sull'aggiornamento di Azure AD Connect, vedere l'articolo [Azure AD Connect: Eseguire l'aggiornamento da una versione precedente alla versione più recente](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version).</span><span class="sxs-lookup"><span data-stu-id="7e069-118">For details on how to upgrade Azure AD Connect, refer to article [Azure AD Connect: Upgrade from a previous version to the latest](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version).</span></span>

 * <span data-ttu-id="7e069-119">Implementare una **regola di sincronizzazione in uscita** in Azure AD Connect che esporta un **valore null anziché i valori effettivi per gli oggetti con più di 15 valori per certificato**.</span><span class="sxs-lookup"><span data-stu-id="7e069-119">Implement an **outbound sync rule** in Azure AD Connect that exports a **null value instead of the actual values for objects with more than 15 certificate values**.</span></span> <span data-ttu-id="7e069-120">Questa opzione è appropriata se non è necessario esportare uno dei valori del certificato in Azure AD per gli oggetti con più di 15 valori.</span><span class="sxs-lookup"><span data-stu-id="7e069-120">This option is suitable if you do not require any of the certificate values to be exported to Azure AD for objects with more than 15 values.</span></span> <span data-ttu-id="7e069-121">Per informazioni dettagliate su come implementare questa regola di sincronizzazione, fare riferimento alla sezione successiva [Implementing sync rule to limit export of userCertificate attribute](#implementing-sync-rule-to-limit-export-of-usercertificate-attribute) (Implementare la regola di sincronizzazione per limitare l'esportazione dell'attributo userCertificate).</span><span class="sxs-lookup"><span data-stu-id="7e069-121">For details on how to implement this sync rule, refer to next section [Implementing sync rule to limit export of userCertificate attribute](#implementing-sync-rule-to-limit-export-of-usercertificate-attribute).</span></span>

 * <span data-ttu-id="7e069-122">Ridurre il numero di valori del certificato nell'oggetto AD locale, a 15 o a un numero inferiore, rimuovendo i valori che non sono usati dall'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="7e069-122">Reduce the number of certificate values on the on-premises AD object (15 or less) by removing values that are no longer in use by your organization.</span></span> <span data-ttu-id="7e069-123">Questa operazione è adeguata se il software boat dell'attributo è dovuto a certificati scaduti o non usati.</span><span class="sxs-lookup"><span data-stu-id="7e069-123">This is suitable if the attribute bloat is caused by expired or unused certificates.</span></span> <span data-ttu-id="7e069-124">È possibile usare lo [script PowerShell disponibile qui](https://gallery.technet.microsoft.com/Remove-Expired-Certificates-0517e34f) per trovare, eseguire il backup ed eliminare i certificati scaduti in AD locale.</span><span class="sxs-lookup"><span data-stu-id="7e069-124">You can use the [PowerShell script available here](https://gallery.technet.microsoft.com/Remove-Expired-Certificates-0517e34f) to help find, backup, and delete expired certificates in your on-premises AD.</span></span> <span data-ttu-id="7e069-125">Prima di eliminare i certificati, è consigliabile confrontarsi con gli amministratori dell'infrastruttura a chiave pubblica dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="7e069-125">Before deleting the certificates, it is recommended that you verify with the Public-Key-Infrastructure administrators in your organization.</span></span>

 * <span data-ttu-id="7e069-126">Configurare Azure AD Connect per escludere l'attributo userCertificate dall'esportazione in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-126">Configure Azure AD Connect to exclude the userCertificate attribute from being exported to Azure AD.</span></span> <span data-ttu-id="7e069-127">In generale, si sconsiglia questa opzione perché l'attributo potrebbe essere usato da Microsoft Online Services per abilitare scenari specifici.</span><span class="sxs-lookup"><span data-stu-id="7e069-127">In general, we do not recommend this option since the attribute may be used by Microsoft Online Services to enable specific scenarios.</span></span> <span data-ttu-id="7e069-128">In particolare:</span><span class="sxs-lookup"><span data-stu-id="7e069-128">In particular:</span></span>
    * <span data-ttu-id="7e069-129">L'attributo userCertificate nell'oggetto Utente viene usato da Exchange Online e dai client di Outlook per la crittografia e la firma dei messaggi.</span><span class="sxs-lookup"><span data-stu-id="7e069-129">The userCertificate attribute on the User object is used by Exchange Online and Outlook clients for message signing and encryption.</span></span> <span data-ttu-id="7e069-130">Per altre informazioni su questa funzionalità, vedere l'articolo [S/MIME per la crittografia e firma dei messaggi](https://technet.microsoft.com/library/dn626158(v=exchg.150).aspx).</span><span class="sxs-lookup"><span data-stu-id="7e069-130">To learn more about this feature, refer to article [S/MIME for message signing and encryption](https://technet.microsoft.com/library/dn626158(v=exchg.150).aspx).</span></span>

    * <span data-ttu-id="7e069-131">L'attributo userCertificate sull'oggetto Computer viene usato da Azure AD per consentire ai dispositivi locali aggiunti a un dominio di Windows 10 di connettersi ad Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-131">The userCertificate attribute on the Computer object is used by Azure AD to allow Windows 10 on-premises domain-joined devices to connect to Azure AD.</span></span> <span data-ttu-id="7e069-132">Per altre informazioni su questa funzionalità, fare riferimento all'articolo [Connettere dispositivi aggiunti a un dominio ad Azure AD in ambiente Windows 10](https://docs.microsoft.com/azure/active-directory/active-directory-azureadjoin-devices-group-policy).</span><span class="sxs-lookup"><span data-stu-id="7e069-132">To learn more about this feature, please refer to article [Connect domain-joined devices to Azure AD for Windows 10 experiences](https://docs.microsoft.com/azure/active-directory/active-directory-azureadjoin-devices-group-policy).</span></span>

## <a name="implementing-sync-rule-to-limit-export-of-usercertificate-attribute"></a><span data-ttu-id="7e069-133">Implementazione della regola di sincronizzazione per limitare l'esportazione dell'attributo userCertificate</span><span class="sxs-lookup"><span data-stu-id="7e069-133">Implementing sync rule to limit export of userCertificate attribute</span></span>
<span data-ttu-id="7e069-134">Per risolvere l'errore LargeObject causato dall'attributo userCertificate, è possibile implementare una regola di sincronizzazione in uscita in Azure AD Connect che esporta un **valore null anziché i valori effettivi per gli oggetti con più di 15 valori per certificato**.</span><span class="sxs-lookup"><span data-stu-id="7e069-134">To resolve the LargeObject error caused by the userCertificate attribute, you can implement an outbound sync rule in Azure AD Connect that exports a **null value instead of the actual values for objects with more than 15 certificate values**.</span></span> <span data-ttu-id="7e069-135">In questa sezione viene descritta la procedura necessaria per implementare la regola di sincronizzazione per l'oggetto **Utente**.</span><span class="sxs-lookup"><span data-stu-id="7e069-135">This section describes the steps required to implement the sync rule for **User** objects.</span></span> <span data-ttu-id="7e069-136">La procedura può essere adattata per gli oggetti **Contatto** e **Computer**.</span><span class="sxs-lookup"><span data-stu-id="7e069-136">The steps can be adapted for **Contact** and **Computer** objects.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7e069-137">L'esportazione di un valore null rimuove i valori del certificato esportati precedentemente in modo corretto in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-137">Exporting null value removes certificate values previously exported successfully to Azure AD.</span></span>

<span data-ttu-id="7e069-138">La procedura può essere riepilogata nel modo seguente:</span><span class="sxs-lookup"><span data-stu-id="7e069-138">The steps can be summarized as:</span></span>

1. <span data-ttu-id="7e069-139">Disabilitare l'utilità di pianificazione della sincronizzazione e verificare che non ci sia alcuna sincronizzazione in corso.</span><span class="sxs-lookup"><span data-stu-id="7e069-139">Disable sync scheduler and verify there is no synchronization in progress.</span></span>
3. <span data-ttu-id="7e069-140">Trovare la regola di sincronizzazione in uscita esistente per l'attributo userCertificate.</span><span class="sxs-lookup"><span data-stu-id="7e069-140">Find the existing outbound sync rule for userCertificate attribute.</span></span>
4. <span data-ttu-id="7e069-141">Creare la regola di sincronizzazione in uscita necessaria.</span><span class="sxs-lookup"><span data-stu-id="7e069-141">Create the outbound sync rule required.</span></span>
5. <span data-ttu-id="7e069-142">Verificare la nuova regola di sincronizzazione in un oggetto esistente con errore LargeObject.</span><span class="sxs-lookup"><span data-stu-id="7e069-142">Verify the new sync rule on an existing object with LargeObject error.</span></span>
6. <span data-ttu-id="7e069-143">Applicare la nuova regola di sincronizzazione agli oggetti restanti con errore LargeObject.</span><span class="sxs-lookup"><span data-stu-id="7e069-143">Apply the new sync rule to remaining objects with LargeObject error.</span></span>
7. <span data-ttu-id="7e069-144">Verificare che non siano presenti modifiche impreviste in attesa di esportazione in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-144">Verify there are no unexpected changes waiting to be exported to Azure AD.</span></span>
8. <span data-ttu-id="7e069-145">Esportare le modifiche in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-145">Export the changes to Azure AD.</span></span>
9. <span data-ttu-id="7e069-146">Riattivare l'utilità di pianificazione della sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="7e069-146">Re-enable sync scheduler.</span></span>

### <a name="step-1-disable-sync-scheduler-and-verify-there-is-no-synchronization-in-progress"></a><span data-ttu-id="7e069-147">Passaggio 1.</span><span class="sxs-lookup"><span data-stu-id="7e069-147">Step 1.</span></span> <span data-ttu-id="7e069-148">Disabilitare l'utilità di pianificazione della sincronizzazione e verificare che non ci sia alcuna sincronizzazione in corso</span><span class="sxs-lookup"><span data-stu-id="7e069-148">Disable sync scheduler and verify there is no synchronization in progress</span></span>
<span data-ttu-id="7e069-149">Verificare che non venga eseguita alcuna sincronizzazione durante l'implementazione di una nuova regola di sincronizzazione per evitare l'esportazione di modifiche accidentali in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-149">Ensure no synchronization takes place while you are in the middle of implementing a new sync rule to avoid unintended changes being exported to Azure AD.</span></span> <span data-ttu-id="7e069-150">Per disabilitare l'utilità di pianificazione della sincronizzazione predefinita:</span><span class="sxs-lookup"><span data-stu-id="7e069-150">To disable the built-in sync scheduler:</span></span>
1. <span data-ttu-id="7e069-151">Avviare una sessione di PowerShell nel server di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="7e069-151">Start PowerShell session on the Azure AD Connect server.</span></span>

2. <span data-ttu-id="7e069-152">Disabilitare la sincronizzazione pianificata eseguendo di cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="7e069-152">Disable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>

> [!Note]
> <span data-ttu-id="7e069-153">I passaggi precedenti sono applicabili solo alle versioni più recenti (1.1.xxx.x) di Azure AD Connect con l'utilità di pianificazione integrata.</span><span class="sxs-lookup"><span data-stu-id="7e069-153">The preceding steps are only applicable to newer versions (1.1.xxx.x) of Azure AD Connect with the built-in scheduler.</span></span> <span data-ttu-id="7e069-154">Se si usano versioni precedenti (1.0.xxx.x) di Azure AD Connect che usano il servizio Utilità di pianificazione di Windows o se si usa l'utilità di pianificazione personalizzata, non comune, per attivare la sincronizzazione periodica, è necessario disabilitarle di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="7e069-154">If you are using older versions (1.0.xxx.x) of Azure AD Connect that uses Windows Task Scheduler, or you are using your own custom scheduler (not common) to trigger periodic synchronization, you need to disable them accordingly.</span></span>

3. <span data-ttu-id="7e069-155">Avviare **Synchronization Service Manager** passando ad AVVIA → Servizio di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="7e069-155">Start the **Synchronization Service Manager** by going to START → Synchronization Service.</span></span>

4. <span data-ttu-id="7e069-156">Andare nella scheda **Operazioni** e verificare che nessuna operazione presenti lo stato *"in corso"*.</span><span class="sxs-lookup"><span data-stu-id="7e069-156">Go to the **Operations** tab and confirm there is no operation whose status is *“in progress.”*</span></span>

### <a name="step-2-find-the-existing-outbound-sync-rule-for-usercertificate-attribute"></a><span data-ttu-id="7e069-157">Passaggio 2.</span><span class="sxs-lookup"><span data-stu-id="7e069-157">Step 2.</span></span> <span data-ttu-id="7e069-158">Trovare la regola di sincronizzazione in uscita esistente per l'attributo userCertificate</span><span class="sxs-lookup"><span data-stu-id="7e069-158">Find the existing outbound sync rule for userCertificate attribute</span></span>
<span data-ttu-id="7e069-159">Una regola di sincronizzazione esistente dovrebbe essere abilitata e configurata per l'esportazione dell'attributo userCertificate per gli oggetti Utente in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-159">There should be an existing sync rule that is enabled and configured to export userCertificate attribute for User objects to Azure AD.</span></span> <span data-ttu-id="7e069-160">Individuare questa regola di sincronizzazione per scoprirne la configurazione **precedente** e il **filtro ambito**:</span><span class="sxs-lookup"><span data-stu-id="7e069-160">Locate this sync rule to find out its **precedence** and **scoping filter** configuration:</span></span>

1. <span data-ttu-id="7e069-161">Avviare l'**editor per le regole di sincronizzazione** passando ad AVVIA → Synchronization Rules Editor (Editor per le regole di sincronizzazione).</span><span class="sxs-lookup"><span data-stu-id="7e069-161">Start the **Synchronization Rules Editor** by going to START → Synchronization Rules Editor.</span></span>

2. <span data-ttu-id="7e069-162">Configurare i filtri della ricerca con i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="7e069-162">Configure the search filters with the following values:</span></span>

    | <span data-ttu-id="7e069-163">Attributo</span><span class="sxs-lookup"><span data-stu-id="7e069-163">Attribute</span></span> | <span data-ttu-id="7e069-164">Valore</span><span class="sxs-lookup"><span data-stu-id="7e069-164">Value</span></span> |
    | --- | --- |
    | <span data-ttu-id="7e069-165">Direzione</span><span class="sxs-lookup"><span data-stu-id="7e069-165">Direction</span></span> |<span data-ttu-id="7e069-166">**Outbound**</span><span class="sxs-lookup"><span data-stu-id="7e069-166">**Outbound**</span></span> |
    | <span data-ttu-id="7e069-167">MV Object Type</span><span class="sxs-lookup"><span data-stu-id="7e069-167">MV Object Type</span></span> |<span data-ttu-id="7e069-168">**Person**</span><span class="sxs-lookup"><span data-stu-id="7e069-168">**Person**</span></span> |
    | <span data-ttu-id="7e069-169">Connettore</span><span class="sxs-lookup"><span data-stu-id="7e069-169">Connector</span></span> |<span data-ttu-id="7e069-170">*nome del connettore Azure AD*</span><span class="sxs-lookup"><span data-stu-id="7e069-170">*name of your Azure AD connector*</span></span> |
    | <span data-ttu-id="7e069-171">Connector Object Type</span><span class="sxs-lookup"><span data-stu-id="7e069-171">Connector Object Type</span></span> |<span data-ttu-id="7e069-172">**user**</span><span class="sxs-lookup"><span data-stu-id="7e069-172">**user**</span></span> |
    | <span data-ttu-id="7e069-173">MV attribute</span><span class="sxs-lookup"><span data-stu-id="7e069-173">MV attribute</span></span> |<span data-ttu-id="7e069-174">**userCertificate**</span><span class="sxs-lookup"><span data-stu-id="7e069-174">**userCertificate**</span></span> |

3. <span data-ttu-id="7e069-175">Se si usano le regole di sincronizzazione predefinite in Azure AD Connector per esportare l'attributo userCertficiate per gli oggetti Utente, è necessario ritornare alla regola *"Out to AAD – User ExchangeOnline"* ("Per AAD: utente ExchangeOnline").</span><span class="sxs-lookup"><span data-stu-id="7e069-175">If you are using OOB (out-of-box) sync rules to Azure AD connector to export userCertficiate attribute for User objects, you should get back the *“Out to AAD – User ExchangeOnline”* rule.</span></span>
4. <span data-ttu-id="7e069-176">Annotare il valore **precedence** della regola di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="7e069-176">Note down the **precedence** value of this sync rule.</span></span>
5. <span data-ttu-id="7e069-177">Selezionare la regola di sincronizzazione e fare clic su **Modifica**.</span><span class="sxs-lookup"><span data-stu-id="7e069-177">Select the sync rule and click **Edit**.</span></span>
6. <span data-ttu-id="7e069-178">Nel finestra di dialogo popup *"Edit Reserved Rule Confirmation"* (Modifica la conferma di regola riservata) fare clic su **No**.</span><span class="sxs-lookup"><span data-stu-id="7e069-178">In the *“Edit Reserved Rule Confirmation”* pop-up dialog, click **No**.</span></span> <span data-ttu-id="7e069-179">Non apportata alcuna modifica a questa regola di sincronizzazione.</span><span class="sxs-lookup"><span data-stu-id="7e069-179">(Don’t worry, we are not going to make any change to this sync rule).</span></span>
7. <span data-ttu-id="7e069-180">Nella schermata di modifica, selezionare la scheda **Scoping filter** (Filtro ambito).</span><span class="sxs-lookup"><span data-stu-id="7e069-180">In the edit screen, select the **Scoping filter** tab.</span></span>
8. <span data-ttu-id="7e069-181">Annotare la configurazione del filtro ambito.</span><span class="sxs-lookup"><span data-stu-id="7e069-181">Note down the scoping filter configuration.</span></span> <span data-ttu-id="7e069-182">Se si usa la regola di sincronizzazione predefinita, devono essere presenti esattamente **un gruppo di filtri ambito contenente due clausole**, tra cui:</span><span class="sxs-lookup"><span data-stu-id="7e069-182">If you are using the OOB sync rule, there should exactly be **one scoping filter group containing two clauses**, including:</span></span>

    | <span data-ttu-id="7e069-183">Attributo</span><span class="sxs-lookup"><span data-stu-id="7e069-183">Attribute</span></span> | <span data-ttu-id="7e069-184">operatore</span><span class="sxs-lookup"><span data-stu-id="7e069-184">Operator</span></span> | <span data-ttu-id="7e069-185">Valore</span><span class="sxs-lookup"><span data-stu-id="7e069-185">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="7e069-186">sourceObjectType</span><span class="sxs-lookup"><span data-stu-id="7e069-186">sourceObjectType</span></span> | <span data-ttu-id="7e069-187">EQUAL</span><span class="sxs-lookup"><span data-stu-id="7e069-187">EQUAL</span></span> | <span data-ttu-id="7e069-188">Utente</span><span class="sxs-lookup"><span data-stu-id="7e069-188">User</span></span> |
    | <span data-ttu-id="7e069-189">cloudMastered</span><span class="sxs-lookup"><span data-stu-id="7e069-189">cloudMastered</span></span> | <span data-ttu-id="7e069-190">NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="7e069-190">NOTEQUAL</span></span> | <span data-ttu-id="7e069-191">True </span><span class="sxs-lookup"><span data-stu-id="7e069-191">True</span></span> |

### <a name="step-3-create-the-outbound-sync-rule-required"></a><span data-ttu-id="7e069-192">Passaggio 3.</span><span class="sxs-lookup"><span data-stu-id="7e069-192">Step 3.</span></span> <span data-ttu-id="7e069-193">Creare la regola di sincronizzazione in uscita necessaria</span><span class="sxs-lookup"><span data-stu-id="7e069-193">Create the outbound sync rule required</span></span>
<span data-ttu-id="7e069-194">La nuova regola di sincronizzazione deve avere lo stesso **filtro ambito** e la stessa **priorità elevata** della regola di sincronizzazione esistente.</span><span class="sxs-lookup"><span data-stu-id="7e069-194">The new sync rule must have the same **scoping filter** and **higher precedence** than the existing sync rule.</span></span> <span data-ttu-id="7e069-195">Ciò garantisce che la nuova regola di sincronizzazione si applichi allo stesso set di oggetti della regola di sincronizzazione esistente e sostituisca la regola di sincronizzazione esistente per l'attributo userCertificate.</span><span class="sxs-lookup"><span data-stu-id="7e069-195">This ensures that the new sync rule applies to the same set of objects as the existing sync rule and overrides the existing sync rule for the userCertificate attribute.</span></span> <span data-ttu-id="7e069-196">Per creare la regola di sincronizzazione:</span><span class="sxs-lookup"><span data-stu-id="7e069-196">To create the sync rule:</span></span>
1. <span data-ttu-id="7e069-197">Nell'editor per le regole di sincronizzazione, fare clic sul pulsante **Aggiungi nuova regola**.</span><span class="sxs-lookup"><span data-stu-id="7e069-197">In the Synchronization Rules Editor, click the **Add new rule** button.</span></span>
2. <span data-ttu-id="7e069-198">Nella **scheda Descrizione**, inserire la configurazione seguente:</span><span class="sxs-lookup"><span data-stu-id="7e069-198">Under the **Description tab**, provide the following configuration:</span></span>

    | <span data-ttu-id="7e069-199">Attributo</span><span class="sxs-lookup"><span data-stu-id="7e069-199">Attribute</span></span> | <span data-ttu-id="7e069-200">Valore</span><span class="sxs-lookup"><span data-stu-id="7e069-200">Value</span></span> | <span data-ttu-id="7e069-201">Dettagli</span><span class="sxs-lookup"><span data-stu-id="7e069-201">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="7e069-202">Nome</span><span class="sxs-lookup"><span data-stu-id="7e069-202">Name</span></span> | <span data-ttu-id="7e069-203">*Specificare un nome*</span><span class="sxs-lookup"><span data-stu-id="7e069-203">*Provide a name*</span></span> | <span data-ttu-id="7e069-204">Ad esempio *"Per AAD: esegue l'override personalizzato per userCertificate"*</span><span class="sxs-lookup"><span data-stu-id="7e069-204">E.g., *“Out to AAD – Custom override for userCertificate”*</span></span> |
    | <span data-ttu-id="7e069-205">Descrizione</span><span class="sxs-lookup"><span data-stu-id="7e069-205">Description</span></span> | <span data-ttu-id="7e069-206">*Inserire una descrizione*</span><span class="sxs-lookup"><span data-stu-id="7e069-206">*Provide a description*</span></span> | <span data-ttu-id="7e069-207">Ad esempio *"Se l'attributo userCertificate contiene più di 15 valori, esportare NULL".*</span><span class="sxs-lookup"><span data-stu-id="7e069-207">E.g., *“If userCertificate attribute has more than 15 values, export NULL.”*</span></span> |
    | <span data-ttu-id="7e069-208">Connected System</span><span class="sxs-lookup"><span data-stu-id="7e069-208">Connected System</span></span> | <span data-ttu-id="7e069-209">*Selezionare il connettore di Azure AD*</span><span class="sxs-lookup"><span data-stu-id="7e069-209">*Select the Azure AD Connector*</span></span> |
    | <span data-ttu-id="7e069-210">Connected System Object Type</span><span class="sxs-lookup"><span data-stu-id="7e069-210">Connected System Object Type</span></span> | <span data-ttu-id="7e069-211">**user**</span><span class="sxs-lookup"><span data-stu-id="7e069-211">**user**</span></span> | |
    | <span data-ttu-id="7e069-212">Metaverse Object Type</span><span class="sxs-lookup"><span data-stu-id="7e069-212">Metaverse Object Type</span></span> | <span data-ttu-id="7e069-213">**person**</span><span class="sxs-lookup"><span data-stu-id="7e069-213">**person**</span></span> | |
    | <span data-ttu-id="7e069-214">Tipo di collegamento</span><span class="sxs-lookup"><span data-stu-id="7e069-214">Link Type</span></span> | <span data-ttu-id="7e069-215">**Join**</span><span class="sxs-lookup"><span data-stu-id="7e069-215">**Join**</span></span> | |
    | <span data-ttu-id="7e069-216">Precedenza</span><span class="sxs-lookup"><span data-stu-id="7e069-216">Precedence</span></span> | <span data-ttu-id="7e069-217">*Scegliere un numero compreso tra 1 e 99*</span><span class="sxs-lookup"><span data-stu-id="7e069-217">*Chose a number between 1 - 99*</span></span> | <span data-ttu-id="7e069-218">Il numero scelto non deve essere usato da una regola di sincronizzazione esistente e deve avere un valore inferiore, e pertanto priorità più alta, rispetto alla regola di sincronizzazione esistente.</span><span class="sxs-lookup"><span data-stu-id="7e069-218">The number chosen must not be used by any existing sync rule and has a lower value (and therefore, higher precedence) than the existing sync rule.</span></span> |

3. <span data-ttu-id="7e069-219">Andare nella scheda **Filtro ambito** e implementare lo stesso filtro ambito che usa la regola di sincronizzazione esistente.</span><span class="sxs-lookup"><span data-stu-id="7e069-219">Go to the **Scoping filter** tab and implement the same scoping filter the existing sync rule is using.</span></span>
4. <span data-ttu-id="7e069-220">Ignora la scheda **Join rules** (Regole di unione).</span><span class="sxs-lookup"><span data-stu-id="7e069-220">Skip the **Join rules** tab.</span></span>
5. <span data-ttu-id="7e069-221">Andare nella scheda **Trasformazioni** per aggiungere una nuova trasformazione tramite la configurazione seguente:</span><span class="sxs-lookup"><span data-stu-id="7e069-221">Go to the **Transformations** tab to add a new transformation using following configuration:</span></span>

    | <span data-ttu-id="7e069-222">Attributo</span><span class="sxs-lookup"><span data-stu-id="7e069-222">Attribute</span></span> | <span data-ttu-id="7e069-223">Valore</span><span class="sxs-lookup"><span data-stu-id="7e069-223">Value</span></span> |
    | --- | --- |
    | <span data-ttu-id="7e069-224">Flow Type</span><span class="sxs-lookup"><span data-stu-id="7e069-224">Flow Type</span></span> |<span data-ttu-id="7e069-225">**Expression**</span><span class="sxs-lookup"><span data-stu-id="7e069-225">**Expression**</span></span> |
    | <span data-ttu-id="7e069-226">Target Attribute</span><span class="sxs-lookup"><span data-stu-id="7e069-226">Target Attribute</span></span> |<span data-ttu-id="7e069-227">**userCertificate**</span><span class="sxs-lookup"><span data-stu-id="7e069-227">**userCertificate**</span></span> |
    | <span data-ttu-id="7e069-228">Source Attribute</span><span class="sxs-lookup"><span data-stu-id="7e069-228">Source Attribute</span></span> |<span data-ttu-id="7e069-229">*usare l'espressione seguente*: `IIF(IsNullOrEmpty([userCertificate]), NULL, IIF((Count([userCertificate])> 15),AuthoritativeNull,[userCertificate]))`</span><span class="sxs-lookup"><span data-stu-id="7e069-229">*Use the following expression*: `IIF(IsNullOrEmpty([userCertificate]), NULL, IIF((Count([userCertificate])> 15),AuthoritativeNull,[userCertificate]))`</span></span> |
    
6. <span data-ttu-id="7e069-230">Per creare la regola di sincronizzazione, fare clic sul pulsante **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="7e069-230">Click the **Add** button to create the sync rule.</span></span>

### <a name="step-4-verify-the-new-sync-rule-on-an-existing-object-with-largeobject-error"></a><span data-ttu-id="7e069-231">Passaggio 4.</span><span class="sxs-lookup"><span data-stu-id="7e069-231">Step 4.</span></span> <span data-ttu-id="7e069-232">Verificare la nuova regola di sincronizzazione in un oggetto esistente con errore LargeObject</span><span class="sxs-lookup"><span data-stu-id="7e069-232">Verify the new sync rule on an existing object with LargeObject error</span></span>
<span data-ttu-id="7e069-233">Si tratta di verificare che la regola di sincronizzazione creata funzioni correttamente in un oggetto di AD esistente con errore LargeObject prima di applicarla ad altri oggetti:</span><span class="sxs-lookup"><span data-stu-id="7e069-233">This is to verify that the sync rule created is working correctly on an existing AD object with LargeObject error before you apply it to other objects:</span></span>
1. <span data-ttu-id="7e069-234">Passare alla scheda **Operazioni** in Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="7e069-234">Go to the **Operations** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="7e069-235">Selezionare l'operazione di esportazione più recente in Azure AD e fare clic su uno degli oggetti con errori LargeObject.</span><span class="sxs-lookup"><span data-stu-id="7e069-235">Select the most recent Export to Azure AD operation and click on one of the objects with LargeObject errors.</span></span>
3.  <span data-ttu-id="7e069-236">Nella schermata di popup Connector Space Object Properties (Proprietà dell'oggetto spazio connettore) fare clic sul pulsante **Anteprima**.</span><span class="sxs-lookup"><span data-stu-id="7e069-236">In the Connector Space Object Properties pop-up screen, click on the **Preview** button.</span></span>
4. <span data-ttu-id="7e069-237">Nella schermata di popup Anteprima selezionare **Sincronizzazione completa** e fare clic su **Anteprima commit**.</span><span class="sxs-lookup"><span data-stu-id="7e069-237">In the Preview pop-up screen, select **Full synchronization** and click **Commit Preview**.</span></span>
5. <span data-ttu-id="7e069-238">Chiudere la schermata Anteprima e la schermata Connector Space Object Properties (Proprietà dell'oggetto spazio connettore).</span><span class="sxs-lookup"><span data-stu-id="7e069-238">Close the Preview screen and the Connector Space Object Properties screen.</span></span>
6. <span data-ttu-id="7e069-239">Passare alla scheda **Connettori** in Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="7e069-239">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
7. <span data-ttu-id="7e069-240">Fare clic con il tasto destro del mouse sul connettore di **Azure AD** e selezionare **Esegui...**</span><span class="sxs-lookup"><span data-stu-id="7e069-240">Right-click on the **Azure AD** Connector and select **Run...**</span></span>
8. <span data-ttu-id="7e069-241">Nella finestra popup Run Connector (Esegui connettore) selezionare il passaggio **Esporta** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="7e069-241">In the Run Connector pop-up, select **Export** step and click **OK**.</span></span>
9. <span data-ttu-id="7e069-242">Attendere il completamento dell'esportazione in Azure AD e confermare che non siano presenti altri errori LargeObject in questo oggetto specifico.</span><span class="sxs-lookup"><span data-stu-id="7e069-242">Wait for Export to Azure AD to complete and confirm there is no more LargeObject error on this specific object.</span></span>

### <a name="step-5-apply-the-new-sync-rule-to-remaining-objects-with-largeobject-error"></a><span data-ttu-id="7e069-243">Passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="7e069-243">Step 5.</span></span> <span data-ttu-id="7e069-244">Applicare la nuova regola di sincronizzazione agli oggetti restanti con errore LargeObject</span><span class="sxs-lookup"><span data-stu-id="7e069-244">Apply the new sync rule to remaining objects with LargeObject error</span></span>
<span data-ttu-id="7e069-245">Dopo aver aggiunto la regola di sincronizzazione, è necessario eseguire un passaggio di sincronizzazione completa per il connettore AD:</span><span class="sxs-lookup"><span data-stu-id="7e069-245">Once the sync rule has been added, you need to run a full synchronization step on the AD Connector:</span></span>
1. <span data-ttu-id="7e069-246">Passare alla scheda **Connettori** in Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="7e069-246">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="7e069-247">Fare clic con il tasto destro del mouse sul connettore **AD** e selezionare **Esegui...**</span><span class="sxs-lookup"><span data-stu-id="7e069-247">Right-click on the **AD** Connector and select **Run...**</span></span>
3. <span data-ttu-id="7e069-248">Nella finestra popup Run Connector (Esegui connettore) selezionare il passaggio **Sincronizzazione completa** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="7e069-248">In the Run Connector pop-up, select **Full Synchronization** step and click **OK**.</span></span>
4. <span data-ttu-id="7e069-249">Attendere il completamento del passaggio Sincronizzazione completa.</span><span class="sxs-lookup"><span data-stu-id="7e069-249">Wait for the Full Synchronization step to complete.</span></span>
5. <span data-ttu-id="7e069-250">Ripetere i passaggi precedenti per i connettori AD restanti se si dispone di più connettori AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-250">Repeat the above steps for the remaining AD Connectors if you have more than one AD Connectors.</span></span> <span data-ttu-id="7e069-251">In genere, sono necessari più connettori se si dispone di più directory locali.</span><span class="sxs-lookup"><span data-stu-id="7e069-251">Usually, multiple connectors are required if you have multiple on-premises directories.</span></span>

### <a name="step-6-verify-there-are-no-unexpected-changes-waiting-to-be-exported-to-azure-ad"></a><span data-ttu-id="7e069-252">Passaggio 6.</span><span class="sxs-lookup"><span data-stu-id="7e069-252">Step 6.</span></span> <span data-ttu-id="7e069-253">Verificare che non siano presenti modifiche impreviste in attesa di esportazione in Azure AD</span><span class="sxs-lookup"><span data-stu-id="7e069-253">Verify there are no unexpected changes waiting to be exported to Azure AD</span></span>
1. <span data-ttu-id="7e069-254">Passare alla scheda **Connettori** in Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="7e069-254">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="7e069-255">Fare clic con il tasto destro del mouse sul connettore di **Azure AD** e selezionare **Search Connector Space** (Spazio connettore di ricerca).</span><span class="sxs-lookup"><span data-stu-id="7e069-255">Right-click on the **Azure AD** Connector and select **Search Connector Space**.</span></span>
3. <span data-ttu-id="7e069-256">Nella finestra popup Search Connector Space (Spazio connettore di ricerca):</span><span class="sxs-lookup"><span data-stu-id="7e069-256">In the Search Connector Space pop-up:</span></span>
    1. <span data-ttu-id="7e069-257">Impostare Ambito su **Pending Export** (Esportazione in sospeso).</span><span class="sxs-lookup"><span data-stu-id="7e069-257">Set Scope to **Pending Export**.</span></span>
    2. <span data-ttu-id="7e069-258">Selezionare tutte e 3 le caselle di controllo, tra cui **Aggiungi**, **Modifica** ed **Elimina**.</span><span class="sxs-lookup"><span data-stu-id="7e069-258">Check all 3 checkboxes, including **Add**, **Modify** and **Delete**.</span></span>
    3. <span data-ttu-id="7e069-259">Fare clic sul pulsante **Cerca** per restituire tutti gli oggetti con modifiche in attesa di essere esportati in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="7e069-259">Click **Search** button to return all objects with changes waiting to be exported to Azure AD.</span></span>
    4. <span data-ttu-id="7e069-260">Verificare che non siano presenti modifiche impreviste.</span><span class="sxs-lookup"><span data-stu-id="7e069-260">Verify there are no unexpected changes.</span></span> <span data-ttu-id="7e069-261">Per esaminare le modifiche per un determinato oggetto, fare doppio clic sull'oggetto.</span><span class="sxs-lookup"><span data-stu-id="7e069-261">To examine the changes for a given object, double-click on the object.</span></span>

### <a name="step-7-export-the-changes-to-azure-ad"></a><span data-ttu-id="7e069-262">Passaggio 7.</span><span class="sxs-lookup"><span data-stu-id="7e069-262">Step 7.</span></span> <span data-ttu-id="7e069-263">Esportare le modifiche in Azure AD</span><span class="sxs-lookup"><span data-stu-id="7e069-263">Export the changes to Azure AD</span></span>
<span data-ttu-id="7e069-264">Per esportare le modifiche in Azure AD:</span><span class="sxs-lookup"><span data-stu-id="7e069-264">To export the changes to Azure AD:</span></span>
1. <span data-ttu-id="7e069-265">Passare alla scheda **Connettori** in Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="7e069-265">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
2. <span data-ttu-id="7e069-266">Fare clic con il tasto destro del mouse sul connettore di **Azure AD** e selezionare **Esegui...**</span><span class="sxs-lookup"><span data-stu-id="7e069-266">Right-click on the **Azure AD** Connector and select **Run...**</span></span>
4. <span data-ttu-id="7e069-267">Nella finestra popup Run Connector (Esegui connettore) selezionare il passaggio **Esporta** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="7e069-267">In the Run Connector pop-up, select **Export** step and click **OK**.</span></span>
5. <span data-ttu-id="7e069-268">Attendere il completamento dell'esportazione in Azure AD e confermare che non siano presenti altri errori LargeObject.</span><span class="sxs-lookup"><span data-stu-id="7e069-268">Wait for Export to Azure AD to complete and confirm there are no more LargeObject errors.</span></span>

### <a name="step-8-re-enable-sync-scheduler"></a><span data-ttu-id="7e069-269">Passaggio 8.</span><span class="sxs-lookup"><span data-stu-id="7e069-269">Step 8.</span></span> <span data-ttu-id="7e069-270">Riattivare l'utilità di pianificazione della sincronizzazione</span><span class="sxs-lookup"><span data-stu-id="7e069-270">Re-enable sync scheduler</span></span>
<span data-ttu-id="7e069-271">Dopo aver risolto il problema, abilitare nuovamente l'utilità di pianificazione della sincronizzazione predefinita:</span><span class="sxs-lookup"><span data-stu-id="7e069-271">Now that the issue is resolved, re-enable the built-in sync scheduler:</span></span>
1. <span data-ttu-id="7e069-272">Avviare una sessione di PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7e069-272">Start PowerShell session.</span></span>
2. <span data-ttu-id="7e069-273">Riabilitare la sincronizzazione pianificata eseguendo di cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="7e069-273">Re-enable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

> [!Note]
> <span data-ttu-id="7e069-274">I passaggi precedenti sono applicabili solo alle versioni più recenti (1.1.xxx.x) di Azure AD Connect con l'utilità di pianificazione integrata.</span><span class="sxs-lookup"><span data-stu-id="7e069-274">The preceding steps are only applicable to newer versions (1.1.xxx.x) of Azure AD Connect with the built-in scheduler.</span></span> <span data-ttu-id="7e069-275">Se si usano versioni precedenti (1.0.xxx.x) di Azure AD Connect che usano il servizio Utilità di pianificazione di Windows o se si usa l'utilità di pianificazione personalizzata, non comune, per attivare la sincronizzazione periodica, è necessario disabilitarle di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="7e069-275">If you are using older versions (1.0.xxx.x) of Azure AD Connect that uses Windows Task Scheduler, or you are using your own custom scheduler (not common) to trigger periodic synchronization, you need to disable them accordingly.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7e069-276">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="7e069-276">Next steps</span></span>
<span data-ttu-id="7e069-277">Altre informazioni su [Integrazione delle identità locali con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="7e069-277">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

