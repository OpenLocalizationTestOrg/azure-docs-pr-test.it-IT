---
title: Creazione e uso di un servizio di bilanciamento del carico interno con un ambiente del servizio app | Documentazione Microsoft
description: Creazione e uso di un ambiente del servizio app con bilanciamento del carico interno
services: app-service
documentationcenter: 
author: ccompy
manager: stefsch
editor: 
ms.assetid: ad9a1e00-d5e5-413e-be47-e21e5b285dbf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: ccompy
ms.openlocfilehash: 9e5a40f18eb9eaf60579af21afc6f05c2d87f4c1
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="using-an-internal-load-balancer-with-an-app-service-environment"></a><span data-ttu-id="82c56-103">Uso di un servizio di bilanciamento del carico interno con un ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="82c56-103">Using an Internal Load Balancer with an App Service Environment</span></span>

> [!NOTE] 
> <span data-ttu-id="82c56-104">Questo articolo riguarda l'ambiente del servizio app v1.</span><span class="sxs-lookup"><span data-stu-id="82c56-104">This article is about the App Service Environment v1.</span></span> <span data-ttu-id="82c56-105">È disponibile una versione più recente dell'ambiente del servizio app più facile da usare ed eseguita in un'infrastruttura più potente.</span><span class="sxs-lookup"><span data-stu-id="82c56-105">There is a newer version of the App Service Environment that is easier to use and runs on more powerful infrastructure.</span></span> <span data-ttu-id="82c56-106">Per altre informazioni sulla nuova versione, vedere [Introduzione ad Ambiente del servizio app](../app-service/app-service-environment/intro.md).</span><span class="sxs-lookup"><span data-stu-id="82c56-106">To learn more about the new version start with the [Introduction to the App Service Environment](../app-service/app-service-environment/intro.md).</span></span>
>

<span data-ttu-id="82c56-107">La funzionalità degli ambienti del servizio app è un'opzione di servizio Premium del servizio app di Azure che offre una funzionalità di configurazione avanzata non disponibile negli stamp multi-tenant.</span><span class="sxs-lookup"><span data-stu-id="82c56-107">The App Service Environment (ASE) feature is a Premium service option of Azure App Service that delivers an enhanced configuration capability that is not available in the multi-tenant stamps.</span></span> <span data-ttu-id="82c56-108">In breve, la funzionalità Ambiente del servizio app distribuisce il servizio app di Azure nella rete virtuale di Azure (VNet).</span><span class="sxs-lookup"><span data-stu-id="82c56-108">The ASE feature essentially deploys the Azure App Service in your Azure Virtual Network(VNet).</span></span> <span data-ttu-id="82c56-109">Per informazioni approfondite delle funzionalità offerte dagli ambienti del servizio app, vedere [Informazioni sull'ambiente del servizio app][WhatisASE].</span><span class="sxs-lookup"><span data-stu-id="82c56-109">To gain a greater understanding of the capabilities offered by App Service Environments read the [What is an App Service Environment][WhatisASE] documentation.</span></span> <span data-ttu-id="82c56-110">Se non si conoscono i vantaggi derivanti dall'uso di una rete virtuale, vedere [Domande frequenti sulla rete virtuale di Azure][virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="82c56-110">If you don't know the benefits of operating in a VNet read the [Azure Virtual Network FAQ][virtualnetwork].</span></span> 

## <a name="overview"></a><span data-ttu-id="82c56-111">Panoramica</span><span class="sxs-lookup"><span data-stu-id="82c56-111">Overview</span></span>
<span data-ttu-id="82c56-112">Un ambiente del servizio app può essere distribuito con un endpoint accessibile da Internet o con un indirizzo IP nella rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="82c56-112">An ASE can be deployed with an internet accessible endpoint or with an IP address in your VNet.</span></span> <span data-ttu-id="82c56-113">Per impostare l'indirizzo IP su un indirizzo di rete virtuale, è necessario distribuire l'ambiente del servizio app con un bilanciamento del carico interno (ILB).</span><span class="sxs-lookup"><span data-stu-id="82c56-113">In order to set the IP address to a VNet address you need to deploy your ASE with an Internal Load Balancer(ILB).</span></span> <span data-ttu-id="82c56-114">Quando l'ambiente è configurato con un bilanciamento del carico interno, fornire:</span><span class="sxs-lookup"><span data-stu-id="82c56-114">When your ASE is configured with an ILB you provide:</span></span>

* <span data-ttu-id="82c56-115">il proprio dominio o sottodominio.</span><span class="sxs-lookup"><span data-stu-id="82c56-115">your own domain or subdomain.</span></span> <span data-ttu-id="82c56-116">Per maggiore semplicità, in questo documento si presuppone l'uso di un sottodominio, ma sono possibili entrambe le configurazioni.</span><span class="sxs-lookup"><span data-stu-id="82c56-116">To make it easy, this document assumes subdomain but you can configure it either way.</span></span> 
* <span data-ttu-id="82c56-117">il certificato usato per HTTPS</span><span class="sxs-lookup"><span data-stu-id="82c56-117">the certificate used for HTTPS</span></span>
* <span data-ttu-id="82c56-118">la gestione del DNS per il sottodominio.</span><span class="sxs-lookup"><span data-stu-id="82c56-118">DNS management for your subdomain.</span></span> 

<span data-ttu-id="82c56-119">È possibile eseguire operazioni come:</span><span class="sxs-lookup"><span data-stu-id="82c56-119">In return, you can do things such as:</span></span>

* <span data-ttu-id="82c56-120">l'hosting di applicazioni intranet, ad esempio applicazioni line of business, in modo sicuro nel cloud a cui si accede tramite una VPN ExpressRoute o da sito a sito</span><span class="sxs-lookup"><span data-stu-id="82c56-120">host intranet applications, like line of business applications, securely in the cloud which you access through a Site to Site or ExpressRoute VPN</span></span>
* <span data-ttu-id="82c56-121">l'hosting delle app nel cloud non presenti nei server DNS pubblici</span><span class="sxs-lookup"><span data-stu-id="82c56-121">host apps in the cloud that are not listed in public DNS servers</span></span>
* <span data-ttu-id="82c56-122">creazione di applicazioni back-end isolate da Internet con cui le app front-end possono integrarsi in modo sicuro</span><span class="sxs-lookup"><span data-stu-id="82c56-122">create internet isolated backend apps which your front end apps can securely integrate with</span></span>

#### <a name="disabled-functionality"></a><span data-ttu-id="82c56-123">Funzionalità disabilitata</span><span class="sxs-lookup"><span data-stu-id="82c56-123">Disabled functionality</span></span>
<span data-ttu-id="82c56-124">Non è possibile eseguire alcune operazioni quando si usa un ambiente del servizio app con bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="82c56-124">There are some things that you cannot do when using an ILB ASE.</span></span> <span data-ttu-id="82c56-125">Alcuni esempi sono:</span><span class="sxs-lookup"><span data-stu-id="82c56-125">Those things include:</span></span>

* <span data-ttu-id="82c56-126">uso di IPSSL</span><span class="sxs-lookup"><span data-stu-id="82c56-126">using IPSSL</span></span>
* <span data-ttu-id="82c56-127">assegnazione di indirizzi IP ad app specifiche</span><span class="sxs-lookup"><span data-stu-id="82c56-127">assigning IP addresses to specific apps</span></span>
* <span data-ttu-id="82c56-128">acquisto e uso di un certificato con un'app tramite il portale.</span><span class="sxs-lookup"><span data-stu-id="82c56-128">buying and using a certificate with an app through the portal.</span></span> <span data-ttu-id="82c56-129">È ovviamente ancora possibile ottenere i certificati direttamente con un'autorità di certificazione e usarli con le app, ma non tramite il portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="82c56-129">You can of course still obtain certificates directly with a Certificate Authority and use it with your apps, just not through the Azure portal.</span></span>

## <a name="creating-an-ilb-ase"></a><span data-ttu-id="82c56-130">Creazione di un ambiente del servizio app con bilanciamento del carico interno</span><span class="sxs-lookup"><span data-stu-id="82c56-130">Creating an ILB ASE</span></span>
<span data-ttu-id="82c56-131">La creazione di un ambiente del servizio app con bilanciamento del carico interno non è molto diversa dalla creazione di un ambiente del servizio app regolare.</span><span class="sxs-lookup"><span data-stu-id="82c56-131">Creating an ILB ASE is not much different from creating an ASE normally.</span></span> <span data-ttu-id="82c56-132">Per una trattazione più approfondita sulla creazione di un ambiente del servizio app, vedere [Come creare un ambiente del servizio app][HowtoCreateASE].</span><span class="sxs-lookup"><span data-stu-id="82c56-132">For a deeper discussion on creating an ASE read [How to Create an App Service Environment][HowtoCreateASE].</span></span> <span data-ttu-id="82c56-133">La procedura di creazione di un ambiente del servizio app con bilanciamento del carico interno è la stessa nella creazione di una rete virtuale durante la creazione dell'ambiente del servizio app o nella selezione di una rete virtuale già esistente.</span><span class="sxs-lookup"><span data-stu-id="82c56-133">The process to create an ILB ASE is the same between creating a VNet during ASE creation or selecting a pre-existing VNet.</span></span> <span data-ttu-id="82c56-134">Per creare un ambiente del servizio app con bilanciamento del carico interno:</span><span class="sxs-lookup"><span data-stu-id="82c56-134">To create an ILB ASE:</span></span> 

1. <span data-ttu-id="82c56-135">Nel portale di Azure selezionare **Nuovo -> Web e dispositivi mobili -> Ambiente del servizio app**</span><span class="sxs-lookup"><span data-stu-id="82c56-135">In the Azure portal select **New -> Web + Mobile -> App Service Environment**</span></span>
2. <span data-ttu-id="82c56-136">Selezionare la propria sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="82c56-136">Select your subscription</span></span>
3. <span data-ttu-id="82c56-137">Selezionare o creare un gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="82c56-137">Select or create a resource group</span></span>
4. <span data-ttu-id="82c56-138">Selezionare o creare una rete virtuale</span><span class="sxs-lookup"><span data-stu-id="82c56-138">Select or create a VNet</span></span>
5. <span data-ttu-id="82c56-139">Creare una subnet se si seleziona una rete virtuale</span><span class="sxs-lookup"><span data-stu-id="82c56-139">Create a subnet if selecting a VNet</span></span>
6. <span data-ttu-id="82c56-140">Selezionare **Rete virtuale/Località -> Configurazione rete virtuale** e impostare il tipo di indirizzo VIP per l'uso interno</span><span class="sxs-lookup"><span data-stu-id="82c56-140">Select **Virtual Network/Location -> VNet Configuration** and set the VIP Type to Internal</span></span>
7. <span data-ttu-id="82c56-141">Fornire un nome di sottodominio; questo sarà il sottodominio usato per le app create con questo ambiente del servizio app</span><span class="sxs-lookup"><span data-stu-id="82c56-141">Provide subdomain name (this will be the subdomain used for apps created in this ASE)</span></span>
8. <span data-ttu-id="82c56-142">Selezionare OK, quindi Crea</span><span class="sxs-lookup"><span data-stu-id="82c56-142">Select Ok and then Create</span></span>

![][1]

<span data-ttu-id="82c56-143">Nel pannello della rete virtuale è disponibile un'opzione di configurazione di rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="82c56-143">Within the Virtual Network blade there is a VNet Configuration option.</span></span> <span data-ttu-id="82c56-144">È possibile scegliere tra un indirizzo VIP esterno o interno.</span><span class="sxs-lookup"><span data-stu-id="82c56-144">This lets you select between an External VIP or Internal VIP.</span></span> <span data-ttu-id="82c56-145">L'opzione predefinita è Esterno.</span><span class="sxs-lookup"><span data-stu-id="82c56-145">The default is External.</span></span> <span data-ttu-id="82c56-146">Con questa impostazione, l'ambiente del servizio app userà un indirizzo VIP accessibile da internet.</span><span class="sxs-lookup"><span data-stu-id="82c56-146">If you have it set to External then your ASE will use an internet accessible VIP.</span></span> <span data-ttu-id="82c56-147">Se si seleziona l'opzione Interno, l'ambiente del servizio app verrà configurato con un bilanciamento del carico interno su un indirizzo IP all'interno della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="82c56-147">If you select Internal, your ASE will be configured with an ILB on an IP address within your VNet.</span></span> 

<span data-ttu-id="82c56-148">Dopo aver selezionato Interno, la possibilità di aggiungere più indirizzi IP dell'ambiente del servizio app viene rimossa ed è invece necessario fornire il sottodominio dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="82c56-148">After selecting Internal, the ability to add more IP addresses to your ASE is removed and instead you need to provide the subdomain of the ASE.</span></span> <span data-ttu-id="82c56-149">In un ambiente del servizio app con un indirizzo VIP esterno viene usato il nome dell'ambiente nel sottodominio delle app create in questo ambiente.</span><span class="sxs-lookup"><span data-stu-id="82c56-149">In an ASE with an External VIP the name of the ASE is used in the subdomain for apps created in that ASE.</span></span> <span data-ttu-id="82c56-150">Se l'ambiente del servizio app è stato denominato ***contosotest*** e l'app in questo ambiente è stata denominata ***mytest***, il formato del sottodominio sarà ***contosotest.p.azurewebsites.net*** e l'URL per questa app sarà ***mytest.contosotest.p.azurewebsites.net***.</span><span class="sxs-lookup"><span data-stu-id="82c56-150">If your ASE was called ***contosotest*** and your app in that ASE was called ***mytest*** then the subdomain would be of the format ***contosotest.p.azurewebsites.net*** and the URL for that app would be ***mytest.contosotest.p.azurewebsites.net***.</span></span> <span data-ttu-id="82c56-151">Se si imposta il tipo di indirizzo VIP su Interno, il nome dell'ambiente del servizio app non viene usato nel sottodominio per l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="82c56-151">If you set the VIP Type to Internal, your ASE name is not used in the subdomain for the ASE.</span></span> <span data-ttu-id="82c56-152">Specificare il sottodominio in modo esplicito.</span><span class="sxs-lookup"><span data-stu-id="82c56-152">You specify the subdomain explicitly.</span></span> <span data-ttu-id="82c56-153">Se il sottodominio è ***contoso.corp.net*** ed è stata creata un'app in ambiente del servizio app denominata ***timereporting***, l'URL per questa app sarà ***timereporting.contoso.corp.net***.</span><span class="sxs-lookup"><span data-stu-id="82c56-153">If your subdomain was ***contoso.corp.net*** and you made an app in that ASE named ***timereporting*** then the URL for that app would be ***timereporting.contoso.corp.net***.</span></span>

## <a name="apps-in-an-ilb-ase"></a><span data-ttu-id="82c56-154">App in un ambiente del servizio app con bilanciamento del carico interno</span><span class="sxs-lookup"><span data-stu-id="82c56-154">Apps in an ILB ASE</span></span>
<span data-ttu-id="82c56-155">La creazione di un'app in un ambiente del servizio app con bilanciamento del carico interno è la stessa che in un ambiente del servizio app regolare.</span><span class="sxs-lookup"><span data-stu-id="82c56-155">Creating an app in an ILB ASE is the same as creating an app in an ASE normally.</span></span> 

1. <span data-ttu-id="82c56-156">Nel portale di Azure selezionare **Nuovo -> Web e dispositivi mobili -> Web** o **Dispositivi mobili** o **App per le API**</span><span class="sxs-lookup"><span data-stu-id="82c56-156">In the Azure portal select **New -> Web + Mobile -> Web** or **Mobile** or **API App**</span></span>
2. <span data-ttu-id="82c56-157">Immettere il nome dell'app</span><span class="sxs-lookup"><span data-stu-id="82c56-157">Enter name of app</span></span>
3. <span data-ttu-id="82c56-158">Selezionare la sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="82c56-158">Select subscription</span></span>
4. <span data-ttu-id="82c56-159">Selezionare o creare un gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="82c56-159">Select or create resource group</span></span>
5. <span data-ttu-id="82c56-160">Selezionare o creare un piano di servizio app (ASP).</span><span class="sxs-lookup"><span data-stu-id="82c56-160">Select or create App Service Plan(ASP).</span></span> <span data-ttu-id="82c56-161">Se si crea un nuovo piano di servizio app, selezionare l'ambiente del servizio app come posizione e il pool di lavoro in cui si vuole creare l'ASP.</span><span class="sxs-lookup"><span data-stu-id="82c56-161">If creating a new ASP then select your ASE as the location and select the worker pool you want your ASP to be created in.</span></span> <span data-ttu-id="82c56-162">Quando si crea l'ASP selezionare l'ambiente del servizio app come posizione e il pool di lavoro.</span><span class="sxs-lookup"><span data-stu-id="82c56-162">When you create the ASP you select your ASE as the location and the worker pool.</span></span> <span data-ttu-id="82c56-163">Quando si specifica il nome dell'app, si noterà che il sottodominio sotto il nome dell'app verrà sostituito con il sottodominio dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="82c56-163">When you specify the name of the app you will see that the subdomain under your app name is replaced by the subdomain for your ASE.</span></span> 
6. <span data-ttu-id="82c56-164">Selezionare Crea.</span><span class="sxs-lookup"><span data-stu-id="82c56-164">Select Create.</span></span> <span data-ttu-id="82c56-165">Selezionare la casella di controllo **Aggiungi al dashboard** se si vuole che l'app venga visualizzata nel dashboard.</span><span class="sxs-lookup"><span data-stu-id="82c56-165">You should select the **Pin to dashboard** checkbox if you want the app to show up on your dashboard.</span></span> 

![][2]

<span data-ttu-id="82c56-166">Sotto il nome dell'app il nome del sottodominio viene aggiornato per riflettere il sottodominio dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="82c56-166">Under the app name the subdomain name gets updated to reflect the subdomain of your ASE.</span></span> 

## <a name="post-ilb-ase-creation-validation"></a><span data-ttu-id="82c56-167">Convalida dopo la creazione dell'ambiente del servizio app con bilanciamento del carico interno</span><span class="sxs-lookup"><span data-stu-id="82c56-167">Post ILB ASE creation validation</span></span>
<span data-ttu-id="82c56-168">Un ambiente del servizio app con bilanciamento del carico interno è leggermente diverso rispetto all'ambiente del servizio app senza bilanciamento del carico interno.</span><span class="sxs-lookup"><span data-stu-id="82c56-168">An ILB ASE is slightly different than the non-ILB ASE.</span></span> <span data-ttu-id="82c56-169">Come già notato è necessario gestire il proprio DNS e fornire un proprio certificato per le connessioni HTTPS.</span><span class="sxs-lookup"><span data-stu-id="82c56-169">As already noted you need to manage your own DNS and you also have to provide your own certificate for HTTPS connections.</span></span> 

<span data-ttu-id="82c56-170">Dopo la creazione dell'ambiente del servizio app, si noterà che il sottodominio mostra il sottodominio specificato e che esiste un nuovo elemento nel menu **Impostazione** denominato **Certificato ILB**.</span><span class="sxs-lookup"><span data-stu-id="82c56-170">After you create your ASE you will notice that the subdomain shows the subdomain you specified and there is a new item in the **Setting** menu called **ILB Certificate**.</span></span> <span data-ttu-id="82c56-171">L'ambiente del servizio app viene creato con un certificato autofirmato, che semplifica i test di HTTPS.</span><span class="sxs-lookup"><span data-stu-id="82c56-171">The ASE is created with a self-signed certificate which makes it easier to test HTTPS.</span></span> <span data-ttu-id="82c56-172">Il portale indicherà che è necessario specificare un certificato per HTTPS, in modo che sia disponibile un certificato associato al sottodominio.</span><span class="sxs-lookup"><span data-stu-id="82c56-172">The portal will tell you that you need to provide your own certificate for HTTPS but this is to drive you to have a certificate that goes with your subdomain.</span></span> 

![][3]

<span data-ttu-id="82c56-173">Se si sta semplicemente eseguendo alcune prove e non si conosce la procedura per creare un certificato, è possibile usare l'applicazione della console MMC di IIS per creare un certificato autofirmato.</span><span class="sxs-lookup"><span data-stu-id="82c56-173">If you are simply trying things out and don't know how to create a certificate, you can use the IIS MMC console application to create a self signed certificate.</span></span> <span data-ttu-id="82c56-174">Dopo la creazione è possibile esportarlo come file PFX e caricarlo nell'interfaccia utente dei certificati ILB.</span><span class="sxs-lookup"><span data-stu-id="82c56-174">Once it is created you can export it as a .pfx file and then upload it in the ILB Certificate UI.</span></span> <span data-ttu-id="82c56-175">Quando si accede a un sito protetto con un certificato autofirmato, il browser visualizzerà un avviso che il sito a cui si sta accedendo non è protetto poiché non è possibile convalidare il certificato.</span><span class="sxs-lookup"><span data-stu-id="82c56-175">When you access a site secured with a self-signed certificate, your browser will give you a warning that the site you are accessing is not secure due to the inability to validate the certificate.</span></span> <span data-ttu-id="82c56-176">Per evitare che venga visualizzato l'avviso, è necessario un certificato firmato correttamente che corrisponda al sottodominio e che disponga di una catena di certificati riconosciuta dal browser.</span><span class="sxs-lookup"><span data-stu-id="82c56-176">If you want to avoid that warning you need a properly signed certificate that matches your subdomain and has a chain of trust that is recognized by your browser.</span></span>

![][6]

<span data-ttu-id="82c56-177">Se si vuole provare il flusso con i propri certificati e testare l'accesso HTTP e HTTPS all'ambiente del servizio app:</span><span class="sxs-lookup"><span data-stu-id="82c56-177">If you want to try the flow with your own certificates and test both HTTP and HTTPS access to your ASE:</span></span>

1. <span data-ttu-id="82c56-178">Passare all'interfaccia utente dell'ambiente del servizio app dopo la creazione dell'ambiente **Ambiente del servizio app -> Impostazioni -> Certificati ILB**</span><span class="sxs-lookup"><span data-stu-id="82c56-178">Go to ASE UI after ASE is created **ASE -> Settings -> ILB Certificates**</span></span>
2. <span data-ttu-id="82c56-179">Impostare il certificato ILB selezionando il file PFX e fornire la password.</span><span class="sxs-lookup"><span data-stu-id="82c56-179">Set ILB certificate by selecting certificate pfx file and provide password.</span></span> <span data-ttu-id="82c56-180">L'elaborazione di questo passaggio richiede tempo e verrà visualizzato il messaggio indicante un'operazione di ridimensionamento in corso.</span><span class="sxs-lookup"><span data-stu-id="82c56-180">This step takes a little while to process and the message that a scaling operation is in progress will be shown.</span></span>
3. <span data-ttu-id="82c56-181">Ottenere l'indirizzo ILB per l'ambiente del servizio app (**Ambiente del servizio app -> Proprietà -> Indirizzo IP virtuale**)</span><span class="sxs-lookup"><span data-stu-id="82c56-181">Get the ILB address for your ASE (**ASE -> Properties -> Virtual IP Address**)</span></span>
4. <span data-ttu-id="82c56-182">Creare un'app Web nell'ambiente del servizio app dopo la creazione</span><span class="sxs-lookup"><span data-stu-id="82c56-182">Create a web app in ASE after creation</span></span> 
5. <span data-ttu-id="82c56-183">Creare una VM, se non è disponibile in questa rete virtuale; non crearla nella stessa subnet dell'ambiente del servizio app per evitare errori</span><span class="sxs-lookup"><span data-stu-id="82c56-183">Create a VM if you don't have one in that VNET (Not in the same subnet as the ASE or things break)</span></span>
6. <span data-ttu-id="82c56-184">Impostare il DNS per il sottodominio.</span><span class="sxs-lookup"><span data-stu-id="82c56-184">Set DNS for your subdomain.</span></span> <span data-ttu-id="82c56-185">È possibile usare un carattere jolly con il sottodominio nel DNS o se si vuole eseguire alcuni semplici test, modificare il file hosts nella VM per impostare il nome della app Web all'indirizzo IP VIP.</span><span class="sxs-lookup"><span data-stu-id="82c56-185">You can use a wildcard with your subdomain in your DNS or if you want to do some simple tests, edit the hosts file on your VM to set web app name to VIP IP address.</span></span> <span data-ttu-id="82c56-186">Se il nome di sottodominio dell'ambiente del servizio app è ilbase.com e mytestapp app della app Web è stata creata in modo da essere indirizzata a mytestapp.ilbase.com, impostare questo valore nel file hosts.</span><span class="sxs-lookup"><span data-stu-id="82c56-186">If your ASE had the subdomain name .ilbase.com and you made the web app mytestapp so that it would be addressed at mytestapp.ilbase.com then set that in your hosts file.</span></span> <span data-ttu-id="82c56-187">In Windows il file hosts si trova in C:\Windows\System32\drivers\etc\\</span><span class="sxs-lookup"><span data-stu-id="82c56-187">(On Windows the hosts file is at C:\Windows\System32\drivers\etc\ )</span></span>
7. <span data-ttu-id="82c56-188">Usare un browser in questa VM e passare a http://mytestapp.ilbase.com o qualunque sia il nome dell'app web con il sottodominio</span><span class="sxs-lookup"><span data-stu-id="82c56-188">Use a browser on that VM and go to http://mytestapp.ilbase.com (or whatever your web app name is with your subdomain)</span></span>
8. <span data-ttu-id="82c56-189">Usare un browser in questa VM e passare a https://mytestapp.ilbase.com. Sarà necessario accettare l'assenza di sicurezza se si usa un certificato autofirmato.</span><span class="sxs-lookup"><span data-stu-id="82c56-189">Use a browser on that VM and go to https://mytestapp.ilbase.com You will have to accept the lack of security if using a self-signed certificate.</span></span> 

<span data-ttu-id="82c56-190">L'indirizzo IP per il bilanciamento del carico interno è elencato nelle proprietà come indirizzo IP virtuale</span><span class="sxs-lookup"><span data-stu-id="82c56-190">The IP address for your ILB is listed in your Properties as the Virtual IP Address</span></span>

![][4]

## <a name="using-an-ilb-ase"></a><span data-ttu-id="82c56-191">Uso di un ambiente del servizio app con bilanciamento del carico interno</span><span class="sxs-lookup"><span data-stu-id="82c56-191">Using an ILB ASE</span></span>
#### <a name="network-security-groups"></a><span data-ttu-id="82c56-192">Gruppi di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="82c56-192">Network Security Groups</span></span>
<span data-ttu-id="82c56-193">Un ambiente del servizio app con bilanciamento del carico interno consente l'isolamento della rete per le app poiché le app non sono accessibili o persino note da Internet.</span><span class="sxs-lookup"><span data-stu-id="82c56-193">An ILB ASE enables network isolation for your apps as the apps are not accessible or even known by the internet.</span></span> <span data-ttu-id="82c56-194">Questa condizione è ideale per ospitare i siti intranet, ad esempio le applicazioni line of business.</span><span class="sxs-lookup"><span data-stu-id="82c56-194">This is excellent for hosting intranet sites such as line of business applications.</span></span> <span data-ttu-id="82c56-195">Quando è necessario limitare ulteriormente l'accesso, è possibile ancora usare i gruppi di sicurezza di rete (NSG) per controllare l'accesso a livello di rete.</span><span class="sxs-lookup"><span data-stu-id="82c56-195">When you need to restrict access even further you can still use Network Security Groups(NSGs) to control access at the network level.</span></span> 

<span data-ttu-id="82c56-196">Se si vuole usare i gruppi per limitare ulteriormente l'accesso, è necessario assicurarsi di non interrompere la comunicazione necessaria per il funzionamento dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="82c56-196">If you wish to use NSGs to further restrict access then you need to make sure you do not break the communication that the ASE needs in order to operate.</span></span> <span data-ttu-id="82c56-197">Anche se l'accesso HTTP/HTTPS avviene solo tramite il bilanciamento del carico interno usato dall'ambiente del servizio app, l'ambiente dipende ancora dalla risorsa all'esterno della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="82c56-197">Even though the HTTP/HTTPS access is only through the ILB used by the ASE the ASE still depends on resource outside of the VNet.</span></span> <span data-ttu-id="82c56-198">Per verificare quale accesso di rete è necessario, esaminare le informazioni disponibili nel documento [Come controllare il traffico in ingresso a un ambiente del servizio app][ControlInbound] e nel documento [Dettagli della configurazione di rete per gli ambienti del servizio app con ExpressRoute][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="82c56-198">To see what network access is still required look at the information in the document on [Controlling Inbound Traffic to an App Service Environment][ControlInbound] and the document on [Network Configuration Details for App Service Environments with ExpressRoute][ExpressRoute].</span></span> 

<span data-ttu-id="82c56-199">Per configurare i gruppi NSG è necessario conoscere l'indirizzo IP usato da Azure per la gestione dell'ambiente del servizio app.</span><span class="sxs-lookup"><span data-stu-id="82c56-199">To configure your NSGs you need to know the IP address that is used by Azure to manage your ASE.</span></span> <span data-ttu-id="82c56-200">Questo indirizzo IP è l'indirizzo IP in uscita dell'ambiente del servizio app se questo esegue richieste tramite internet.</span><span class="sxs-lookup"><span data-stu-id="82c56-200">That IP address is also the outbound IP address from your ASE if it makes internet requests.</span></span> <span data-ttu-id="82c56-201">L'indirizzo IP in uscita per l'ASE rimane statico per la durata dell'ASE.</span><span class="sxs-lookup"><span data-stu-id="82c56-201">The outbound IP address for your ASE will remain static for the life of your ASE.</span></span> <span data-ttu-id="82c56-202">Se si elimina e si ricrea l'ambiente del servizio app, si ottiene un nuovo indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="82c56-202">If you delete and recreate your ASE, you will get a new IP address.</span></span> <span data-ttu-id="82c56-203">Per trovare questo indirizzo IP, passare a **Impostazioni -> Proprietà** e trovare **Indirizzo IP in uscita**.</span><span class="sxs-lookup"><span data-stu-id="82c56-203">To find this IP address go to **Settings -> Properties** and find the **Outbound IP Address**.</span></span> 

![][5]

#### <a name="general-ilb-ase-management"></a><span data-ttu-id="82c56-204">Gestione generale dell'ambiente del servizio app con bilanciamento del carico interno</span><span class="sxs-lookup"><span data-stu-id="82c56-204">General ILB ASE management</span></span>
<span data-ttu-id="82c56-205">La gestione di un ambiente del servizio app con bilanciamento del carico interno è sostanzialmente la stessa che in un ambiente del servizio app regolare.</span><span class="sxs-lookup"><span data-stu-id="82c56-205">Managing an ILB ASE is largely the same as managing an ASE normally.</span></span> <span data-ttu-id="82c56-206">È necessario aumentare i pool di lavoro per ospitare più istanze ASP e aumentare i server front-end per gestire una maggiore quantità di traffico HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="82c56-206">You need to scale up your worker pools to host more ASP instances and scale up your Front End servers to handle increased amounts of HTTP/HTTPS traffic.</span></span> <span data-ttu-id="82c56-207">Per informazioni generali sulla gestione della configurazione di un ambiente del servizio app, vedere il documento [Configurazione di un ambiente del servizio app][ASEConfig].</span><span class="sxs-lookup"><span data-stu-id="82c56-207">For general information on managing the configuration of an ASE, read the document on [Configuring an App Service Environment][ASEConfig].</span></span> 

<span data-ttu-id="82c56-208">Le attività di gestione aggiuntive sono la gestione dei certificati e la gestione del DNS.</span><span class="sxs-lookup"><span data-stu-id="82c56-208">The additional management items are certificate management and DNS management.</span></span> <span data-ttu-id="82c56-209">È necessario ottenere e caricare il certificato usato per HTTPS dopo la creazione dell'ambiente del servizio app con bilanciamento del carico interno e sostituirlo prima della scadenza.</span><span class="sxs-lookup"><span data-stu-id="82c56-209">You need to obtain and upload the certificate used for HTTPS after ILB ASE creation and replace it before it expires.</span></span> <span data-ttu-id="82c56-210">Poiché Azure possiede il dominio base possiamo fornire i certificati per gli ambienti del servizio app con un indirizzo VIP esterno.</span><span class="sxs-lookup"><span data-stu-id="82c56-210">Because Azure owns the base domain we can provide certificates for ASEs with an External VIP.</span></span> <span data-ttu-id="82c56-211">Poiché il sottodominio usato da un ambiente del servizio app con bilanciamento del carico interno può essere un qualsiasi elemento, è necessario fornire un certificato per HTTPS.</span><span class="sxs-lookup"><span data-stu-id="82c56-211">Since the subdomain used by an ILB ASE can be anything, you need to provide your own certificate for HTTPS.</span></span> 

#### <a name="dns-configuration"></a><span data-ttu-id="82c56-212">Configurazione del DNS</span><span class="sxs-lookup"><span data-stu-id="82c56-212">DNS Configuration</span></span>
<span data-ttu-id="82c56-213">Quando si usa un indirizzo VIP esterno, il DNS viene gestito da Azure.</span><span class="sxs-lookup"><span data-stu-id="82c56-213">When using an External VIP the DNS is managed by Azure.</span></span> <span data-ttu-id="82c56-214">Qualsiasi app creata nell'ambiente del servizio app viene aggiunta automaticamente al DNS di Azure che è un DNS pubblico.</span><span class="sxs-lookup"><span data-stu-id="82c56-214">Any app created in your ASE is automatically added to Azure DNS which is a public DNS.</span></span> <span data-ttu-id="82c56-215">In un ambiente del servizio app con bilanciamento del carico interno è necessario gestire il proprio DNS.</span><span class="sxs-lookup"><span data-stu-id="82c56-215">In an ILB ASE you have to manage your own DNS.</span></span> <span data-ttu-id="82c56-216">Per un sottodominio specifico, ad esempio contoso.corp.net, è necessario creare record A DNS che puntano all'indirizzo del bilanciamento del carico interno per:</span><span class="sxs-lookup"><span data-stu-id="82c56-216">For a given subdomain such as contoso.corp.net you need to create DNS A records that point to your ILB address for:</span></span>

    * 
    <span data-ttu-id="82c56-217">*.scm ftp publish</span><span class="sxs-lookup"><span data-stu-id="82c56-217">*.scm ftp publish</span></span> 


## <a name="getting-started"></a><span data-ttu-id="82c56-218">Introduzione</span><span class="sxs-lookup"><span data-stu-id="82c56-218">Getting started</span></span>
<span data-ttu-id="82c56-219">Tutti gli articoli e le procedure sugli ambienti del servizio app sono disponibili nel [file LEGGIMI per gli ambienti di servizio dell'applicazione](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="82c56-219">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="82c56-220">Per iniziare a usare gli ambienti del servizio app, vedere [Introduzione all'ambiente del servizio app][WhatisASE]</span><span class="sxs-lookup"><span data-stu-id="82c56-220">To get started with App Service Environments, see [Introduction to App Service Environments][WhatisASE]</span></span>

<span data-ttu-id="82c56-221">Per altre informazioni sulla piattaforma del servizio app di Azure, vedere l'articolo relativo al [servizio app di Azure][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="82c56-221">For more information about the Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!--Image references-->
[1]: ./media/app-service-environment-with-internal-load-balancer/ilbase-createilbase.png
[2]: ./media/app-service-environment-with-internal-load-balancer/ilbase-createapp.png
[3]: ./media/app-service-environment-with-internal-load-balancer/ilbase-newase.png
[4]: ./media/app-service-environment-with-internal-load-balancer/ilbase-vip.png
[5]: ./media/app-service-environment-with-internal-load-balancer/ilbase-externalvip.png
[6]: ./media/app-service-environment-with-internal-load-balancer/ilbase-ilbcertificate.png

<!--Links-->
[WhatisASE]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[HowtoCreateASE]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[ControlInbound]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[virtualnetwork]: https://azure.microsoft.com/documentation/articles/virtual-networks-faq/
[AppServicePricing]: http://azure.microsoft.com/pricing/details/app-service/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[ASEAutoscale]: http://azure.microsoft.com/documentation/articles/app-service-environment-auto-scale/
[ExpressRoute]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/
[vnetnsgs]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[ASEConfig]: http://azure.microsoft.com/documentation/articles/app-service-web-configure-an-app-service-environment/
