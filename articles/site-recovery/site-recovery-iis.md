---
title: "aaaReplicate un server IIS a più livelli in base a un'applicazione web con Azure Site Recovery | Documenti Microsoft"
description: In questo articolo viene descritto come tooreplicate IIS web farm le macchine virtuali usando Azure Site Recovery.
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 1974265b3cb05f6dc57049876306d2e08424bb97
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="1d2bb-103">Eseguire la replica di un'applicazione Web multilivello basata su IIS usando Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="1d2bb-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="1d2bb-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="1d2bb-104">Overview</span></span>


<span data-ttu-id="1d2bb-105">Software dell'applicazione è il motore di hello di produttività aziendale in un'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-105">Application software is hello engine of business productivity in an organization.</span></span> <span data-ttu-id="1d2bb-106">Le diverse applicazioni Web possono essere usate per scopi diversi in un'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="1d2bb-107">Alcune di queste, come le applicazioni per l'elaborazione delle retribuzioni, le applicazioni finanziarie e i siti Web rivolti ai clienti possono essere fondamentali.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="1d2bb-108">È importante per hello organizzazione toohave i backup e in esecuzione in perdita tooprevent tutti gli orari di produttività e più importante evitare qualsiasi immagine di marchio toohello di danni di organizzazione hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-108">It will be important for hello organization toohave them up and running at all times tooprevent loss of productivity and more importantly prevent any damage toohello brand image of hello organization.</span></span>

<span data-ttu-id="1d2bb-109">Applicazioni web critici vengono in genere impostate come applicazioni a più livelli con web hello, database e dell'applicazione in livelli diversi.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-109">Critical web applications are typically set up as multi-tier applications with hello web, database and application on different tiers.</span></span> <span data-ttu-id="1d2bb-110">Oltre a essere disseminate in vari livelli, hello possono anche essere utilizzati dalle applicazioni più server in ogni livello tooload hello bilanciare.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-110">Apart from being spread across various tiers, hello applications may also be using multiple servers in each tier tooload balance hello traffic.</span></span> <span data-ttu-id="1d2bb-111">Mapping di hello tra i vari livelli e nel server web hello, inoltre, possono essere basati su indirizzi IP statici.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-111">Moreover, hello mappings between various tiers and on hello web server may be based on static IP addresses.</span></span> <span data-ttu-id="1d2bb-112">In caso di failover, alcuni di questi mapping sarà necessario toobe aggiornato, in particolare, se si dispone di più siti Web configurato nel server web hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-112">On failover, some of these mappings will need toobe updated, especially, if you have multiple websites configured on hello web server.</span></span> <span data-ttu-id="1d2bb-113">In caso di applicazioni web tramite SSL, le associazioni certificato saranno necessario toobe aggiornato.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-113">In case of web applications using SSL, certificate bindings will need toobe updated.</span></span>

<span data-ttu-id="1d2bb-114">Metodi di ripristino in base a non replica tradizionale implicano il backup di file di configurazione, le impostazioni del Registro di sistema, associazioni, i componenti personalizzati (COM o .NET), contenuto e anche i certificati e recupero file hello attraverso una serie di passaggi manuali.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering hello files through a set of manual steps.</span></span> <span data-ttu-id="1d2bb-115">Queste tecniche sono chiaramente complesse, soggette a errori e non scalabili.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="1d2bb-116">È, ad esempio, possibile facilmente per tooforget il backup dei certificati e rimasta con nessuna scelta ma toobuy nuovi certificati per server hello dopo il failover.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-116">It is, for example, easily possible for you tooforget backing up certificates and be left with no choice but toobuy new certificates for hello server after failover.</span></span>

<span data-ttu-id="1d2bb-117">Una soluzione di ripristino di emergenza valido, deve consentire di modellazione dei piani di ripristino intorno hello sopra architetture di applicazioni complesse e dispongano di hello possibilità tooadd personalizzato passaggi toohandle applicazione mapping tra i vari livelli fornendo un con clic singolo che cattura soluzione nell'evento hello un'emergenza iniziali tooa inferiore RTO.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-117">A good disaster recovery solution, should allow modeling of recovery plans around hello above complex application architectures and also have hello ability tooadd customized steps toohandle application mappings between various tiers hence providing a single-click sure shot solution in hello event of a disaster leading tooa lower RTO.</span></span>


<span data-ttu-id="1d2bb-118">Questo articolo viene descritto come tooprotect IIS basato su applicazione web mediante un [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1d2bb-118">This article describes how tooprotect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="1d2bb-119">In questo articolo verrà illustrate le procedure consigliate per la replica di una a tre livelli basati su IIS tooAzure applicazione web, come è possibile eseguire un'analisi di ripristino di emergenza e come è possibile tooAzure applicazione hello di failover.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-119">This article will cover best practices for replicating a three tier IIS based web application tooAzure, how you can do a disaster recovery drill, and how you can failover hello application tooAzure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="1d2bb-120">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="1d2bb-120">Prerequisites</span></span>

<span data-ttu-id="1d2bb-121">Prima di iniziare, assicurarsi di che aver compreso l'esempio hello:</span><span class="sxs-lookup"><span data-stu-id="1d2bb-121">Before you start, make sure you understand hello following:</span></span>

1. [<span data-ttu-id="1d2bb-122">La replica tooAzure una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="1d2bb-122">Replicating a virtual machine tooAzure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="1d2bb-123">Come troppo[progettare una rete di ripristino](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="1d2bb-123">How too[design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="1d2bb-124">Esegue un tooAzure di failover di test</span><span class="sxs-lookup"><span data-stu-id="1d2bb-124">Doing a test failover tooAzure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="1d2bb-125">Eseguire un failover tooAzure</span><span class="sxs-lookup"><span data-stu-id="1d2bb-125">Doing a failover tooAzure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="1d2bb-126">Come troppo[replicare un controller di dominio](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="1d2bb-126">How too[replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="1d2bb-127">Come troppo[la replica di SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="1d2bb-127">How too[replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="1d2bb-128">Modelli di distribuzione</span><span class="sxs-lookup"><span data-stu-id="1d2bb-128">Deployment patterns</span></span>
<span data-ttu-id="1d2bb-129">Un'applicazione web IIS basato in genere si basa su uno di hello seguenti modelli di distribuzione:</span><span class="sxs-lookup"><span data-stu-id="1d2bb-129">An IIS based web application typically follows one of hello following deployment patterns:</span></span>

<span data-ttu-id="1d2bb-130">**Modello di distribuzione 1 ** Web farm basata su IIS con Application Request Routing (ARR), server IIS e Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Modello di distribuzione](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="1d2bb-132">**Modello di distribuzione 2** Web farm basata su IIS con Application Request Routing (ARR), server IIS, server applicazioni e Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Modello di distribuzione](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="1d2bb-134">Supporto di Site Recovery</span><span class="sxs-lookup"><span data-stu-id="1d2bb-134">Site Recovery support</span></span>

<span data-ttu-id="1d2bb-135">Sono stati utilizzati a scopo di hello di creazione di questo articolo le macchine virtuali VMware con Server IIS versione 7.5 in Windows Server 2012 R2 Enterprise.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-135">For hello purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="1d2bb-136">Replica di ripristino del sito è indipendente dall'applicazione, indicazioni di hello forniti sono toohold previsto negli scenari seguenti e per diverse versioni di IIS.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-136">As site recovery replication is application agnostic, hello recommendations provided here are expected toohold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="1d2bb-137">Origine e destinazione</span><span class="sxs-lookup"><span data-stu-id="1d2bb-137">Source and target</span></span>

<span data-ttu-id="1d2bb-138">**Scenario**</span><span class="sxs-lookup"><span data-stu-id="1d2bb-138">**Scenario**</span></span> | <span data-ttu-id="1d2bb-139">**sito secondario tooa**</span><span class="sxs-lookup"><span data-stu-id="1d2bb-139">**tooa secondary site**</span></span> | <span data-ttu-id="1d2bb-140">**tooAzure**</span><span class="sxs-lookup"><span data-stu-id="1d2bb-140">**tooAzure**</span></span>
--- | --- | ---
<span data-ttu-id="1d2bb-141">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="1d2bb-141">**Hyper-V**</span></span> | <span data-ttu-id="1d2bb-142">Sì</span><span class="sxs-lookup"><span data-stu-id="1d2bb-142">Yes</span></span> | <span data-ttu-id="1d2bb-143">Sì</span><span class="sxs-lookup"><span data-stu-id="1d2bb-143">Yes</span></span>
<span data-ttu-id="1d2bb-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="1d2bb-144">**VMware**</span></span> | <span data-ttu-id="1d2bb-145">Sì</span><span class="sxs-lookup"><span data-stu-id="1d2bb-145">Yes</span></span> | <span data-ttu-id="1d2bb-146">Sì</span><span class="sxs-lookup"><span data-stu-id="1d2bb-146">Yes</span></span>
<span data-ttu-id="1d2bb-147">**Server fisico**</span><span class="sxs-lookup"><span data-stu-id="1d2bb-147">**Physical server**</span></span> | <span data-ttu-id="1d2bb-148">No</span><span class="sxs-lookup"><span data-stu-id="1d2bb-148">No</span></span> | <span data-ttu-id="1d2bb-149">Sì</span><span class="sxs-lookup"><span data-stu-id="1d2bb-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="1d2bb-150">Replicare le macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="1d2bb-150">Replicate virtual machines</span></span>

<span data-ttu-id="1d2bb-151">Seguire [questa Guida](site-recovery-vmware-to-azure.md) toostart tooAzure tutti hello IIS web farm macchine virtuali di replica.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-151">Follow [this guidance](site-recovery-vmware-to-azure.md) toostart replicating all hello IIS web farm virtual machines tooAzure.</span></span>

<span data-ttu-id="1d2bb-152">Se si utilizza un indirizzo IP statico, specificare hello IP che si desidera hello tootake macchina virtuale in hello [ **indirizzo IP di destinazione** ](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) impostazione nelle impostazioni di calcolo e di rete.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-152">If you are using a static IP then specify hello IP that you want hello virtual machine tootake in hello [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![IP di destinazione](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="1d2bb-154">Creazione di un piano di ripristino</span><span class="sxs-lookup"><span data-stu-id="1d2bb-154">Creating a recovery plan</span></span>

<span data-ttu-id="1d2bb-155">Un piano di ripristino consente di sequenziazione failover hello di vari livelli di un'applicazione multilivello, di conseguenza, mantenendo la coerenza delle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-155">A recovery plan allows sequencing hello failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="1d2bb-156">Seguire hello passaggi seguenti durante la creazione di un piano di ripristino per un'applicazione web a più livelli.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-156">Follow hello below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="1d2bb-157">[Altre informazioni sulla creazione di un piano di ripristino](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="1d2bb-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-toofailover-groups"></a><span data-ttu-id="1d2bb-158">Aggiunta di gruppi toofailover macchine virtuali</span><span class="sxs-lookup"><span data-stu-id="1d2bb-158">Adding virtual machines toofailover groups</span></span>
<span data-ttu-id="1d2bb-159">Una tipica applicazione web IIS a più livelli sarà costituito da un livello di database con le macchine virtuali SQL, livello web hello costituita da un server IIS e un livello di applicazione.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, hello web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="1d2bb-160">Aggiungere tutti questi gruppo toodifferent macchine virtuali in base a livello di seguito.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-160">Add all these virtual machines toodifferent group based on tier as below.</span></span> <span data-ttu-id="1d2bb-161">[Altre informazioni sulla personalizzazione dei piani di ripristino](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="1d2bb-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="1d2bb-162">Creare un piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-162">Create a recovery plan.</span></span> <span data-ttu-id="1d2bb-163">Aggiungere macchine virtuali del livello database hello in gruppo 1 tooensure che sono ultimo arresto e portato per primo.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-163">Add hello database tier virtual machines under Group 1 tooensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="1d2bb-164">Aggiungere macchine virtuali del livello applicazione hello gruppo 2, in modo che essi vengono attivati dopo aver portato il livello di database hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-164">Add hello application tier virtual machines under Group 2 such that they are brought up after hello database tier has been brought up.</span></span>

1. <span data-ttu-id="1d2bb-165">Aggiungere macchine virtuali del livello web hello in gruppo 3 in modo che essi vengono attivati dopo aver portato il livello di applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-165">Add hello web tier virtual machines in Group 3 such that they are brought up after hello application tier has been brought up.</span></span>

1. <span data-ttu-id="1d2bb-166">Aggiungere bilanciare il carico di macchine virtuali nel gruppo 4 in modo che essi vengono attivati dopo che è stata portata livello web hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-166">Add load balance virtual machines in Group 4 such that they are brought up after hello web tier has been brought up.</span></span>


### <a name="adding-scripts-toohello-recovery-plan"></a><span data-ttu-id="1d2bb-167">Aggiunta di script toohello piano di ripristino</span><span class="sxs-lookup"><span data-stu-id="1d2bb-167">Adding scripts toohello recovery plan</span></span>
<span data-ttu-id="1d2bb-168">Potrebbe essere necessario toodo alcune operazioni su macchine virtuali di Azure post failover o Test failover toomake IIS web farm funzione hello correttamente.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-168">You may need toodo some operations on hello Azure virtual machines post failover/Test failover toomake IIS web farm function correctly.</span></span> <span data-ttu-id="1d2bb-169">È possibile automatizzare operazione di failover hello post come aggiornamento voce DNS, la modifica di associazione del sito, modificare nella stringa di connessione mediante l'aggiunta di script corrispondenti nel piano di ripristino hello come indicato di seguito.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-169">You can automate hello post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in hello recovery plan as below.</span></span> <span data-ttu-id="1d2bb-170">[Altre informazioni sull'aggiunta di script al piano di ripristino](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="1d2bb-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="1d2bb-171">Aggiornamento del DNS</span><span class="sxs-lookup"><span data-stu-id="1d2bb-171">DNS Update</span></span>
<span data-ttu-id="1d2bb-172">Se hello DNS è configurato per l'aggiornamento dinamico DNS, quindi le macchine virtuali, in genere, aggiornare hello DNS con hello nuovo indirizzo IP quando vengono avviati.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-172">If hello DNS is configured for dynamic DNS update then virtual machines usually update hello DNS with hello new IP once they start.</span></span> <span data-ttu-id="1d2bb-173">Se si desidera tooadd tooupdate un passaggio esplicita DNS con hello nuovi indirizzi IP delle macchine virtuali hello quindi aggiungere questo [script tooupdate IP nel DNS](https://aka.ms/asr-dns-update) come un'azione post su gruppi del piano di ripristino.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-173">If you want tooadd an explicit step tooupdate DNS with hello new IPs of hello virtual machines then add this [script tooupdate IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="1d2bb-174">Stringa di connessione nel file web.config di un'applicazione</span><span class="sxs-lookup"><span data-stu-id="1d2bb-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="1d2bb-175">stringa di connessione Hello specifica database hello hello sito web comunica con.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-175">hello connection string specifies hello database that hello web site communicates with.</span></span>

<span data-ttu-id="1d2bb-176">Se la stringa di connessione hello viene assegnato il nome di hello della macchina virtuale di hello database, non altri passaggi saranno necessari post failover e applicazione hello sarà in grado di comunicare tooautomatically toohello DB.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-176">If hello connection string carries hello name of hello database virtual machine, no further steps will be needed post failover and hello application will be able tooautomatically communicate toohello DB.</span></span> <span data-ttu-id="1d2bb-177">Inoltre, se l'indirizzo IP hello per la macchina virtuale di hello database viene mantenuto, non sarà necessaria una stringa di connessione tooupdate hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-177">Also, if hello IP address for hello database virtual machine is retained, it will not be needed tooupdate hello connection string.</span></span> <span data-ttu-id="1d2bb-178">Se la stringa di connessione hello fa riferimento toohello macchina virtuale di database utilizzando un indirizzo IP, sarà necessario failover post toobe aggiornato.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-178">If hello connection string refers toohello database virtual machine using an IP address, it will need toobe updated post failover.</span></span> <span data-ttu-id="1d2bb-179">Ad esempio,</span><span class="sxs-lookup"><span data-stu-id="1d2bb-179">E.g.</span></span> <span data-ttu-id="1d2bb-180">Hello di sotto di stringa di connessione punti toohello DB con IP 127.0.1.2</span><span class="sxs-lookup"><span data-stu-id="1d2bb-180">hello below connection string points toohello DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="1d2bb-181">È possibile aggiornare la stringa di connessione hello nel livello web aggiungendo [script di aggiornamento di connessione IIS](https://aka.ms/asr-update-webtier-script-classic) dopo 3 gruppo nel piano di ripristino hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-181">You can update hello connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in hello recovery plan.</span></span>

#### <a name="site-bindings-for-hello-application"></a><span data-ttu-id="1d2bb-182">Associazioni di sito per un'applicazione hello</span><span class="sxs-lookup"><span data-stu-id="1d2bb-182">Site bindings for hello application</span></span>
<span data-ttu-id="1d2bb-183">Ogni sito consiste in informazioni che include il tipo di hello di associazione, l'indirizzo IP di hello sul quale hello server IIS è in ascolto di richieste toohello per sito hello, numero di porta hello e hello host per il sito hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-183">Every site consists of binding information that includes hello type of binding, hello IP address at which hello IIS server listens toohello requests for hello site, hello port number and hello host names for hello site.</span></span> <span data-ttu-id="1d2bb-184">In fase di hello di un failover, queste associazioni potrebbe essere necessario toobe aggiornata se è presente una modifica dell'indirizzo IP di hello associata.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-184">At hello time of a failover, these bindings might need toobe updated if there is a change in hello IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="1d2bb-185">Se è stato contrassegnato come 'all unassigned' per il binding del sito hello come esempio hello seguente, non occorre tooupdate questo failover post di associazione.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-185">If you have marked ‘all unassigned’ for hello site binding as in hello example below, you will not need tooupdate this binding post failover.</span></span> <span data-ttu-id="1d2bb-186">Inoltre, se l'indirizzo IP hello associata a un sito non viene modificato post-failover, binding del sito hello necessario non aggiornate (memorizzazione dell'indirizzo IP hello dipende dall'architettura di rete hello e subnet assegnato toohello siti primario e di ripristino e pertanto potrebbero essere o non possono essere fattibile per l'organizzazione.)</span><span class="sxs-lookup"><span data-stu-id="1d2bb-186">Also, if hello IP address associated with a site is not changed post failover, hello site binding need not be updated (Retention of hello IP address depends on hello network architecture and subnets assigned toohello primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![Binding SSL](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="1d2bb-188">Se è stato associato l'indirizzo IP hello con un sito, è necessario tooupdate tutte le associazioni del sito con il nuovo indirizzo IP di hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-188">If you have associated hello IP address with a site, you will need tooupdate all site bindings with hello new IP address.</span></span> <span data-ttu-id="1d2bb-189">È possibile aggiungere [script di aggiornamento di livello Web IIS](https://aka.ms/asr-web-tier-update-runbook-classic) dopo il gruppo 3 nei binding del sito di ripristino piano toochange hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan toochange hello site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="1d2bb-190">Aggiornare l'indirizzo IP del servizio di bilanciamento del carico</span><span class="sxs-lookup"><span data-stu-id="1d2bb-190">Update load balancer IP address</span></span>
<span data-ttu-id="1d2bb-191">Se si dispone di Application Request Routing macchina virtuale, aggiungere [script failover ARR IIS](https://aka.ms/asr-iis-arrtier-failover-script-classic) dopo l'indirizzo IP di hello tooupdate gruppo 4.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 tooupdate hello IP address.</span></span>

#### <a name="hello-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="1d2bb-192">associazione certificato SSL di Hello per una connessione https</span><span class="sxs-lookup"><span data-stu-id="1d2bb-192">hello SSL cert binding for an https connection</span></span>
<span data-ttu-id="1d2bb-193">Siti Web può avere un certificato SSL associato che consente di garantire una comunicazione sicura tra i server Web hello e browser dell'utente hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between hello webserver and hello user’s browser.</span></span> <span data-ttu-id="1d2bb-194">Se il sito Web di hello disponga di una connessione https e un indirizzo IP di toohello associazione di sito associato https del server IIS hello con un'associazione certificato SSL, una nuova associazione di sito sarà necessario toobe aggiunto per cert hello con hello IP della macchina virtuale IIS hello post-failover.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-194">If hello website has an https connection and an associated https site binding toohello IP address of hello IIS server with an SSL cert binding, a new site binding will need toobe added for hello cert with hello IP of hello IIS virtual machine post failover.</span></span>

<span data-ttu-id="1d2bb-195">certificato SSL Hello può essere eseguito in base-</span><span class="sxs-lookup"><span data-stu-id="1d2bb-195">hello SSL cert can be issued against-</span></span>

<span data-ttu-id="1d2bb-196">) nome di dominio completo hello del sito Web di hello</span><span class="sxs-lookup"><span data-stu-id="1d2bb-196">a) hello fully qualified domain name of hello website</span></span><br>
<span data-ttu-id="1d2bb-197">b) nome hello del server di hello</span><span class="sxs-lookup"><span data-stu-id="1d2bb-197">b) hello name of hello server</span></span><br>
<span data-ttu-id="1d2bb-198">c) un certificato con caratteri jolly per il nome di dominio hello</span><span class="sxs-lookup"><span data-stu-id="1d2bb-198">c) A wildcard certificate for hello domain name</span></span><br>
<span data-ttu-id="1d2bb-199">d) è un indirizzo IP: se certificato SSL hello viene eseguita in IP hello del server IIS hello, toobe esigenze di un'altra SSL cert eseguita sull'indirizzo IP hello di hello server IIS in Azure site hello e un'associazione SSL aggiuntiva per il certificato sarà necessario toobe creato.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-199">d) An IP address – If hello SSL cert is issued against hello IP of hello IIS server, another SSL cert needs toobe issued against hello IP address of hello IIS server on hello Azure site and an additional SSL binding for this certificate will need toobe created.</span></span> <span data-ttu-id="1d2bb-200">Di conseguenza, è consigliabile toonot utilizzare un certificato SSL emesso in base IP.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-200">Hence, it is advisable toonot use an SSL cert issued against IP.</span></span> <span data-ttu-id="1d2bb-201">Si tratta di un'opzione meno usata e verrà presto deprecata in base alle nuove modifiche di CA/Browser Forum.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-hello-dependency-between-hello-web-and-hello-application-tier"></a><span data-ttu-id="1d2bb-202">Aggiornamento hello dipendenza tra web hello e livello di applicazione hello</span><span class="sxs-lookup"><span data-stu-id="1d2bb-202">Update hello dependency between hello web and hello application tier</span></span>
<span data-ttu-id="1d2bb-203">Se si dispone di una dipendenza specifico dell'applicazione in base all'indirizzo IP hello delle macchine virtuali hello, è necessario tooupdate questa dipendenza post di failover.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-203">If you have an application specific dependency based on hello IP address of hello virtual machines, you need tooupdate this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="1d2bb-204">Esecuzione di un failover di test</span><span class="sxs-lookup"><span data-stu-id="1d2bb-204">Doing a test failover</span></span>
<span data-ttu-id="1d2bb-205">Seguire [questa Guida](site-recovery-test-failover-to-azure.md) toodo un failover di test.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) toodo a test failover.</span></span>

1.  <span data-ttu-id="1d2bb-206">Passare tooAzure portale e selezionare l'insieme di credenziali del servizio di ripristino.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-206">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="1d2bb-207">Fare clic sul piano di ripristino hello creato per una web farm IIS.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-207">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="1d2bb-208">Fare clic su 'Failover di test'.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="1d2bb-209">Selezionare un punto di ripristino e il processo di failover di test di rete virtuale di Azure toostart hello.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-209">Select recovery point and Azure virtual network toostart hello test failover process.</span></span>
1.  <span data-ttu-id="1d2bb-210">Una volta ambiente secondario hello è attivo, è possibile eseguire le convalide.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-210">Once hello secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="1d2bb-211">Dopo aver complete le convalide hello, è possibile selezionare 'Convalide completare' e ambiente di failover di test hello verrà pulita.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-211">Once hello validations are complete, you can select ‘Validations complete’ and hello test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="1d2bb-212">Esecuzione di un failover</span><span class="sxs-lookup"><span data-stu-id="1d2bb-212">Doing a failover</span></span>
<span data-ttu-id="1d2bb-213">Seguire [queste linee guida](site-recovery-failover.md) quando si esegue un failover.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="1d2bb-214">Passare tooAzure portale e selezionare l'insieme di credenziali del servizio di ripristino.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-214">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="1d2bb-215">Fare clic sul piano di ripristino hello creato per una web farm IIS.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-215">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="1d2bb-216">Fare clic su 'Failover'.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="1d2bb-217">Seleziona processo di failover hello toostart punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-217">Select recovery point toostart hello failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1d2bb-218">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="1d2bb-218">Next steps</span></span>
<span data-ttu-id="1d2bb-219">Altre informazioni sulla [replica di altre applicazioni](site-recovery-workload.md) con Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="1d2bb-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>
