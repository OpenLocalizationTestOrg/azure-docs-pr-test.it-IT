---
title: aggiornamento di App Fabric aaaService mediante PowerShell | Documenti Microsoft
description: In questo articolo vengono esaminati esperienza hello di distribuzione di un'applicazione di Service Fabric, modificare il codice hello e implementazione di un aggiornamento tramite PowerShell.
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 9bc75748-96b0-49ca-8d8a-41fe08398f25
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: f31212264de45c3b257a0efafb75c10c279b989f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade-using-powershell"></a><span data-ttu-id="a9753-103">Aggiornamento di un'applicazione di Service Fabric mediante PowerShell</span><span class="sxs-lookup"><span data-stu-id="a9753-103">Service Fabric application upgrade using PowerShell</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="a9753-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="a9753-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="a9753-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="a9753-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="a9753-106">Hello utilizzati più di frequente e approccio di aggiornamento consigliato è l'aggiornamento in sequenza hello monitorato.</span><span class="sxs-lookup"><span data-stu-id="a9753-106">hello most frequently used and recommended upgrade approach is hello monitored rolling upgrade.</span></span>  <span data-ttu-id="a9753-107">Azure Service Fabric esegue monitoraggio hello di un'applicazione hello viene aggiornata in base a un set di criteri di integrità.</span><span class="sxs-lookup"><span data-stu-id="a9753-107">Azure Service Fabric monitors hello health of hello application being upgraded based on a set of health policies.</span></span> <span data-ttu-id="a9753-108">Dopo aver aggiornato un dominio di aggiornamento (UD), Service Fabric valuta l'integrità dell'applicazione hello e procede toohello successivo dominio di aggiornamento o si verifica un errore di aggiornamento hello in base a criteri di integrità hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-108">Once an update domain (UD) is upgraded, Service Fabric evaluates hello application health and either proceeds toohello next update domain or fails hello upgrade depending on hello health policies.</span></span>

<span data-ttu-id="a9753-109">Un aggiornamento dell'applicazione monitorata può essere eseguito mediante hello gestito o le API native, PowerShell o REST.</span><span class="sxs-lookup"><span data-stu-id="a9753-109">A monitored application upgrade can be performed using hello managed or native APIs, PowerShell, or REST.</span></span> <span data-ttu-id="a9753-110">Per istruzioni su come eseguire un aggiornamento usando Visual Studio, vedere [Esercitazione sull'aggiornamento di un'applicazione di Service Fabric tramite Visual Studio](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="a9753-110">For instructions on performing an upgrade using Visual Studio, see [Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md).</span></span>

<span data-ttu-id="a9753-111">Con Service Fabric monitorati aggiornamenti in sequenza, amministratore dell'applicazione hello possibile configurare i criteri di valutazione salute hello utilizzato Service Fabric toodetermine se un'applicazione hello è integra.</span><span class="sxs-lookup"><span data-stu-id="a9753-111">With Service Fabric monitored rolling upgrades, hello application administrator can configure hello health evaluation policy that Service Fabric uses toodetermine if hello application is healthy.</span></span> <span data-ttu-id="a9753-112">Inoltre, messaggio per l'amministratore può configurare hello toobe di azione eseguita quando si verifica un errore di valutazione dell'integrità hello (ad esempio, eseguire il rollback automatico). In questa sezione vengono illustrati un aggiornamento per uno degli esempi SDK hello che utilizza PowerShell monitorato.</span><span class="sxs-lookup"><span data-stu-id="a9753-112">In addition, hello administrator can configure hello action toobe taken when hello health evaluation fails (for example, doing an automatic rollback.) This section walks through a monitored upgrade for one of hello SDK samples that uses PowerShell.</span></span> <span data-ttu-id="a9753-113">Hello video Microsoft Virtual Academy seguente illustra anche un aggiornamento di app:<center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="a9753-113">hello following Microsoft Virtual Academy video also walks you through an app upgrade: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

## <a name="step-1-build-and-deploy-hello-visual-objects-sample"></a><span data-ttu-id="a9753-114">Passaggio 1: Creare e distribuire: esempio hello oggetti visivi</span><span class="sxs-lookup"><span data-stu-id="a9753-114">Step 1: Build and deploy hello Visual Objects sample</span></span>
<span data-ttu-id="a9753-115">Compilare e pubblicare un'applicazione hello facendo clic sul progetto di applicazione hello **VisualObjectsApplication,** e selezionando hello **pubblica** comando.</span><span class="sxs-lookup"><span data-stu-id="a9753-115">Build and publish hello application by right-clicking on hello application project, **VisualObjectsApplication,** and selecting hello **Publish** command.</span></span>  <span data-ttu-id="a9753-116">Per altre informazioni, vedere [Esercitazione sull'aggiornamento di un'applicazione di Service Fabric tramite Visual Studio](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="a9753-116">For more information, see [Service Fabric application upgrade tutorial](service-fabric-application-upgrade-tutorial.md).</span></span>  <span data-ttu-id="a9753-117">In alternativa, è possibile utilizzare PowerShell toodeploy l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a9753-117">Alternatively, you can use PowerShell toodeploy your application.</span></span>

> [!NOTE]
> <span data-ttu-id="a9753-118">Prima di tutti i comandi di Service Fabric hello possono essere usati in PowerShell, è necessario innanzitutto tooconnect toohello cluster utilizzando hello `Connect-ServiceFabricCluster` cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a9753-118">Before any of hello Service Fabric commands may be used in PowerShell, you first need tooconnect toohello cluster by using hello `Connect-ServiceFabricCluster` cmdlet.</span></span> <span data-ttu-id="a9753-119">Analogamente, si presuppone che hello che cluster è già stato configurato nel computer locale.</span><span class="sxs-lookup"><span data-stu-id="a9753-119">Similarly, it is assumed that hello Cluster has already been set up on your local machine.</span></span> <span data-ttu-id="a9753-120">Vedere l'articolo hello in [impostazione dell'ambiente di sviluppo di Service Fabric](service-fabric-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="a9753-120">See hello article on [setting up your Service Fabric development environment](service-fabric-get-started.md).</span></span>
> 
> 

<span data-ttu-id="a9753-121">Dopo aver compilato il progetto hello in Visual Studio, è possibile utilizzare il comando di PowerShell hello [copia ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) toohello pacchetto di applicazione hello toocopy ImageStore.</span><span class="sxs-lookup"><span data-stu-id="a9753-121">After building hello project in Visual Studio, you can use hello PowerShell command [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) toocopy hello application package toohello ImageStore.</span></span> <span data-ttu-id="a9753-122">Se si desidera localmente pacchetto dell'applicazione hello tooverify, utilizzare hello [Test ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a9753-122">If you want tooverify hello app package locally, use hello [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span> <span data-ttu-id="a9753-123">passaggio successivo Hello è tooregister hello toohello Service Fabric runtime dell'applicazione utilizzando hello [registro ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a9753-123">hello next step is tooregister hello application toohello Service Fabric runtime using hello [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span></span> <span data-ttu-id="a9753-124">Hello passaggio finale è un'istanza di un'applicazione hello toostart utilizzando hello [New ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet.</span><span class="sxs-lookup"><span data-stu-id="a9753-124">hello final step is toostart an instance of hello application by using hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span>  <span data-ttu-id="a9753-125">Questi tre passaggi sono analoghi toousing hello **Distribuisci** voce di menu in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a9753-125">These three steps are analogous toousing hello **Deploy** menu item in Visual Studio.</span></span>

<span data-ttu-id="a9753-126">A questo punto, è possibile utilizzare [Service Fabric Explorer tooview cluster e hello applicazione hello](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="a9753-126">Now, you can use [Service Fabric Explorer tooview hello cluster and hello application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="a9753-127">applicazione Hello è un servizio web che è possibile spostarsi tooin Internet Explorer digitare [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) nella barra degli indirizzi hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-127">hello application has a web service that can be navigated tooin Internet Explorer by typing [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) in hello address bar.</span></span>  <span data-ttu-id="a9753-128">Si noterà che alcuni oggetti visivi Mobile gli spostamenti nella schermata di hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-128">You should see some floating visual objects moving around in hello screen.</span></span>  <span data-ttu-id="a9753-129">Inoltre, è possibile utilizzare [Get ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) toocheck stato dell'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-129">Additionally, you can use [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) toocheck hello application status.</span></span>

## <a name="step-2-update-hello-visual-objects-sample"></a><span data-ttu-id="a9753-130">Passaggio 2: Aggiornare: esempio hello oggetti visivi</span><span class="sxs-lookup"><span data-stu-id="a9753-130">Step 2: Update hello Visual Objects sample</span></span>
<span data-ttu-id="a9753-131">È possibile notare che con la versione di hello che è stato distribuito nel passaggio 1, gli oggetti visivi hello non ruotare.</span><span class="sxs-lookup"><span data-stu-id="a9753-131">You might notice that with hello version that was deployed in Step 1, hello visual objects do not rotate.</span></span> <span data-ttu-id="a9753-132">Eseguire l'aggiornamento si tooone questa applicazione in cui gli oggetti visivi hello inoltre ruotare.</span><span class="sxs-lookup"><span data-stu-id="a9753-132">Let's upgrade this application tooone where hello visual objects also rotate.</span></span>

<span data-ttu-id="a9753-133">Selezionare il progetto VisualObjects.ActorService hello all'interno di hello VisualObjects soluzione e aprire il file StatefulVisualObjectActor.cs hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-133">Select hello VisualObjects.ActorService project within hello VisualObjects solution, and open hello StatefulVisualObjectActor.cs file.</span></span> <span data-ttu-id="a9753-134">All'interno del file, passare il metodo toohello `MoveObject`, impostare come commento `this.State.Move()`e rimuovere il commento `this.State.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="a9753-134">Within that file, navigate toohello method `MoveObject`, comment out `this.State.Move()`, and uncomment `this.State.Move(true)`.</span></span> <span data-ttu-id="a9753-135">Questa modifica consente di ruotare oggetti hello dopo l'aggiornamento di servizio hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-135">This change rotates hello objects after hello service is upgraded.</span></span>

<span data-ttu-id="a9753-136">È anche necessario hello tooupdate *ServiceManifest.xml* file (in PackageRoot) del progetto hello **VisualObjects.ActorService**.</span><span class="sxs-lookup"><span data-stu-id="a9753-136">We also need tooupdate hello *ServiceManifest.xml* file (under PackageRoot) of hello project **VisualObjects.ActorService**.</span></span> <span data-ttu-id="a9753-137">Hello aggiornamento *CodePackage* hello servizio versione too2.0 e hello righe corrispondenti hello *ServiceManifest.xml* file.</span><span class="sxs-lookup"><span data-stu-id="a9753-137">Update hello *CodePackage* and hello service version too2.0, and hello corresponding lines in hello *ServiceManifest.xml* file.</span></span>
<span data-ttu-id="a9753-138">È possibile utilizzare Visual Studio hello *modifica file manifesto* opzione dopo fare clic su modifiche al file manifesto di hello soluzione toomake hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-138">You can use hello Visual Studio *Edit Manifest Files* option after you right-click on hello solution toomake hello manifest file changes.</span></span>

<span data-ttu-id="a9753-139">Dopo aver apportato modifiche di hello, manifesto hello dovrebbe essere simile hello seguente (parti evidenziate mostrano modifiche hello):</span><span class="sxs-lookup"><span data-stu-id="a9753-139">After hello changes are made, hello manifest should look like hello following (highlighted portions show hello changes):</span></span>

```xml
<ServiceManifestName="VisualObjects.ActorService" Version="2.0" xmlns="http://schemas.microsoft.com/2011/01/fabric" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<CodePackageName="Code" Version="2.0">
```

<span data-ttu-id="a9753-140">Ora hello *ApplicationManifest.xml* file (in hello **VisualObjects** progetto sottoposto a hello **VisualObjects** soluzione) viene aggiornato tooversion 2.0 di hello  **VisualObjects.ActorService** progetto.</span><span class="sxs-lookup"><span data-stu-id="a9753-140">Now hello *ApplicationManifest.xml* file (found under hello **VisualObjects** project under hello **VisualObjects** solution) is updated tooversion 2.0 of hello **VisualObjects.ActorService** project.</span></span> <span data-ttu-id="a9753-141">Inoltre, versione dell'applicazione hello è too2.0.0.0 aggiornata dalla 1.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="a9753-141">In addition, hello Application version is updated too2.0.0.0 from 1.0.0.0.</span></span> <span data-ttu-id="a9753-142">Hello *ApplicationManifest.xml* deve hello l'aspetto seguente frammento di codice:</span><span class="sxs-lookup"><span data-stu-id="a9753-142">hello *ApplicationManifest.xml* should look like hello following snippet:</span></span>

```xml
<ApplicationManifestxmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="VisualObjects" ApplicationTypeVersion="2.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">

 <ServiceManifestRefServiceManifestName="VisualObjects.ActorService" ServiceManifestVersion="2.0" />
```


<span data-ttu-id="a9753-143">A questo punto, compilare il progetto di hello selezionando solo hello **ActorService** progetto, quindi facendo clic e selezionare hello **compilare** opzione in Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a9753-143">Now, build hello project by selecting just hello **ActorService** project, and then right-clicking and selecting hello **Build** option in Visual Studio.</span></span> <span data-ttu-id="a9753-144">Se si seleziona **Ricompila tutto**, è necessario aggiornare le versioni di hello per tutti i progetti, poiché potrebbe aver modificato il codice hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-144">If you select **Rebuild all**, you should update hello versions for all projects, since hello code would have changed.</span></span> <span data-ttu-id="a9753-145">Successivamente, si hello pacchetto applicazione aggiornata facendo clic su ***VisualObjectsApplication***, selezionando hello Menu dell'infrastruttura del servizio e scegliere **pacchetto**.</span><span class="sxs-lookup"><span data-stu-id="a9753-145">Next, let's package hello updated application by right-clicking on ***VisualObjectsApplication***, selecting hello Service Fabric Menu, and choosing **Package**.</span></span> <span data-ttu-id="a9753-146">In questo modo viene creato un pacchetto dell'applicazione che può essere distribuito.</span><span class="sxs-lookup"><span data-stu-id="a9753-146">This action creates an application package that can be deployed.</span></span>  <span data-ttu-id="a9753-147">L'applicazione aggiornata è pronto toobe distribuito.</span><span class="sxs-lookup"><span data-stu-id="a9753-147">Your updated application is ready toobe deployed.</span></span>

## <a name="step-3--decide-on-health-policies-and-upgrade-parameters"></a><span data-ttu-id="a9753-148">Passaggio 3: Scegliere i criteri di integrità e i parametri di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="a9753-148">Step 3:  Decide on health policies and upgrade parameters</span></span>
<span data-ttu-id="a9753-149">Acquisire familiarità con hello [parametri di aggiornamento dell'applicazione](service-fabric-application-upgrade-parameters.md) hello e [processo di aggiornamento](service-fabric-application-upgrade.md) tooget una buona conoscenza di hello vari parametri, valori di timeout e il criterio di integrità applicato l'aggiornamento .</span><span class="sxs-lookup"><span data-stu-id="a9753-149">Familiarize yourself with hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and hello [upgrade process](service-fabric-application-upgrade.md) tooget a good understanding of hello various upgrade parameters, time-outs, and health criterion applied.</span></span> <span data-ttu-id="a9753-150">Questa procedura dettagliata, criteri di valutazione di integrità servizio hello sono impostare il valore predefinito di toohello (e consigliabile) valori, il che significa che tutti i servizi e le istanze devono essere *integro* dopo l'aggiornamento di hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-150">For this walkthrough, hello service health evaluation criterion is set toohello default (and recommended) values, which means that all services and instances should be *healthy* after hello upgrade.</span></span>  

<span data-ttu-id="a9753-151">Tuttavia, si aumenta hello *HealthCheckStableDuration* too60 secondi (in modo che i servizi di hello siano integri per almeno 20 secondi prima di avviare l'aggiornamento di hello toohello successivamente aggiornare il dominio).</span><span class="sxs-lookup"><span data-stu-id="a9753-151">However, let's increase hello *HealthCheckStableDuration* too60 seconds (so that hello services are healthy for at least 20 seconds before hello upgrade proceeds toohello next update domain).</span></span>  <span data-ttu-id="a9753-152">Impostiamo anche hello *UpgradeDomainTimeout* toobe 1200 secondi e hello *UpgradeTimeout* toobe 3.000 secondi.</span><span class="sxs-lookup"><span data-stu-id="a9753-152">Let's also set hello *UpgradeDomainTimeout* toobe 1200 seconds and hello *UpgradeTimeout* toobe 3000 seconds.</span></span>

<span data-ttu-id="a9753-153">Infine, anche impostiamo hello *UpgradeFailureAction* toorollback.</span><span class="sxs-lookup"><span data-stu-id="a9753-153">Finally, let's also set hello *UpgradeFailureAction* toorollback.</span></span> <span data-ttu-id="a9753-154">Questa opzione richiede la versione precedente di Service Fabric tooroll hello indietro applicazione toohello se vengono rilevati problemi durante l'aggiornamento di hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-154">This option requires Service Fabric tooroll back hello application toohello previous version if it encounters any issues during hello upgrade.</span></span> <span data-ttu-id="a9753-155">Pertanto, quando si avvia l'aggiornamento di hello (nel passaggio 4), hello seguenti parametri vengono specificati:</span><span class="sxs-lookup"><span data-stu-id="a9753-155">Thus, when starting hello upgrade (in Step 4), hello following parameters are specified:</span></span>

<span data-ttu-id="a9753-156">FailureAction = Rollback</span><span class="sxs-lookup"><span data-stu-id="a9753-156">FailureAction = Rollback</span></span>

<span data-ttu-id="a9753-157">HealthCheckStableDurationSec = 60</span><span class="sxs-lookup"><span data-stu-id="a9753-157">HealthCheckStableDurationSec = 60</span></span>

<span data-ttu-id="a9753-158">UpgradeDomainTimeoutSec = 1200</span><span class="sxs-lookup"><span data-stu-id="a9753-158">UpgradeDomainTimeoutSec = 1200</span></span>

<span data-ttu-id="a9753-159">UpgradeTimeout = 3000</span><span class="sxs-lookup"><span data-stu-id="a9753-159">UpgradeTimeout = 3000</span></span>

## <a name="step-4-prepare-application-for-upgrade"></a><span data-ttu-id="a9753-160">Passaggio 4: preparare l'applicazione per l'aggiornamento</span><span class="sxs-lookup"><span data-stu-id="a9753-160">Step 4: Prepare application for upgrade</span></span>
<span data-ttu-id="a9753-161">Ora di compilazione dell'applicazione hello e pronto toobe aggiornato.</span><span class="sxs-lookup"><span data-stu-id="a9753-161">Now hello application is built and ready toobe upgraded.</span></span> <span data-ttu-id="a9753-162">Se si apre una finestra di PowerShell come amministratore e si digita [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), verrà indicato che è stato distribuito il tipo di applicazione 1.0.0.0 di **VisualObject**.</span><span class="sxs-lookup"><span data-stu-id="a9753-162">If you open up a PowerShell window as an administrator and type [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), it should let you know that it is application type 1.0.0.0 of **VisualObjects** that's been deployed.</span></span>  

<span data-ttu-id="a9753-163">Hello pacchetto dell'applicazione viene archiviato in seguito hello percorso relativo in cui non compressi hello Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span><span class="sxs-lookup"><span data-stu-id="a9753-163">hello application package is stored under hello following relative path where you uncompressed hello Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span></span> <span data-ttu-id="a9753-164">In questa directory in cui è archiviato il pacchetto di applicazione hello, è necessario trovare una cartella "Package".</span><span class="sxs-lookup"><span data-stu-id="a9753-164">You should find a "Package" folder in that directory, where hello application package is stored.</span></span> <span data-ttu-id="a9753-165">Controllare tooensure timestamp hello è costituito da build più recente di hello (potrebbe essere necessario in modo appropriato anche i percorsi hello toomodify).</span><span class="sxs-lookup"><span data-stu-id="a9753-165">Check hello timestamps tooensure that it is hello latest build (you may need toomodify hello paths appropriately as well).</span></span>

<span data-ttu-id="a9753-166">Ora si hello copia aggiornata toohello pacchetto di applicazione nell'archivio immagini dell'infrastruttura di servizio (in cui i pacchetti di applicazione hello sono archiviati dall'infrastruttura di servizio).</span><span class="sxs-lookup"><span data-stu-id="a9753-166">Now let's copy hello updated application package toohello Service Fabric ImageStore (where hello application packages are stored by Service Fabric).</span></span> <span data-ttu-id="a9753-167">parametro Hello *ApplicationPackagePathInImageStore* informa Service Fabric in cui è possibile trovare il pacchetto di applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-167">hello parameter *ApplicationPackagePathInImageStore* informs Service Fabric where it can find hello application package.</span></span> <span data-ttu-id="a9753-168">È stato creato l'applicazione hello aggiornato "VisualObjects\_V2" con hello (potrebbe essere necessario toomodify percorsi nuovamente in modo appropriato) di comando seguente.</span><span class="sxs-lookup"><span data-stu-id="a9753-168">We have put hello updated application in "VisualObjects\_V2" with hello following command (you may need toomodify paths again appropriately).</span></span>

```powershell
Copy-ServiceFabricApplicationPackage  -ApplicationPackagePath .\Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug\Package
-ImageStoreConnectionString fabric:ImageStore   -ApplicationPackagePathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="a9753-169">passaggio successivo Hello è tooregister dell'applicazione con Service Fabric, che può essere eseguita mediante hello [registro ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) comando:</span><span class="sxs-lookup"><span data-stu-id="a9753-169">hello next step is tooregister this application with Service Fabric, which can be performed using hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) command:</span></span>

```powershell
Register-ServiceFabricApplicationType -ApplicationPathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="a9753-170">Se hello comando precedente non riesce, è probabile che sia necessario ricompilare tutti i servizi.</span><span class="sxs-lookup"><span data-stu-id="a9753-170">If hello preceding command doesn't succeed, it is likely that you need a rebuild of all services.</span></span> <span data-ttu-id="a9753-171">Come indicato nel passaggio 2, è possibile tooupdate anche la versione del servizio Web.</span><span class="sxs-lookup"><span data-stu-id="a9753-171">As mentioned in Step 2, you may have tooupdate your WebService version as well.</span></span>

## <a name="step-5-start-hello-application-upgrade"></a><span data-ttu-id="a9753-172">Passaggio 5: Avviare l'aggiornamento dell'applicazione hello</span><span class="sxs-lookup"><span data-stu-id="a9753-172">Step 5: Start hello application upgrade</span></span>
<span data-ttu-id="a9753-173">A questo punto, siamo tutti i set di un'applicazione hello toostart aggiornamento utilizzando hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) comando:</span><span class="sxs-lookup"><span data-stu-id="a9753-173">Now, we're all set toostart hello application upgrade by using hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) command:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/VisualObjects -ApplicationTypeVersion 2.0.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000   -FailureAction Rollback -Monitored
```


<span data-ttu-id="a9753-174">Hello nome dell'applicazione è hello stesso descritta in hello *ApplicationManifest.xml* file.</span><span class="sxs-lookup"><span data-stu-id="a9753-174">hello application name is hello same as it was described in hello *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="a9753-175">Service Fabric utilizza tooidentify questo nome è aggiornamento l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="a9753-175">Service Fabric uses this name tooidentify which application is getting upgraded.</span></span> <span data-ttu-id="a9753-176">Se si imposta hello toobe di timeout troppo breve, è possibile riscontrare un messaggio di errore che stati hello problema.</span><span class="sxs-lookup"><span data-stu-id="a9753-176">If you set hello time-outs toobe too short, you may encounter a failure message that states hello problem.</span></span> <span data-ttu-id="a9753-177">Riferimento toohello risoluzione dei problemi di sezione o aumentare il timeout di hello.</span><span class="sxs-lookup"><span data-stu-id="a9753-177">Refer toohello troubleshooting section, or increase hello time-outs.</span></span>

<span data-ttu-id="a9753-178">A questo punto, come hello viene eseguito l'aggiornamento dell'applicazione, è possibile monitorare l'utilizzo di Service Fabric Explorer, oppure utilizzando hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) comando di PowerShell:</span><span class="sxs-lookup"><span data-stu-id="a9753-178">Now, as hello application upgrade proceeds, you can monitor it using Service Fabric Explorer, or by using hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell command:</span></span> 

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/VisualObjects
```

<span data-ttu-id="a9753-179">In pochi minuti, lo stato di hello ottenuti utilizzando hello precedente comando di PowerShell, devono indicare che sono stati aggiornati tutti i domini di aggiornamento (completato).</span><span class="sxs-lookup"><span data-stu-id="a9753-179">In a few minutes, hello status that you got by using hello preceding PowerShell command, should state that all update domains were upgraded (completed).</span></span> <span data-ttu-id="a9753-180">E si rileverà che gli oggetti visivi hello nella finestra del browser siano stati avviati rotazione!</span><span class="sxs-lookup"><span data-stu-id="a9753-180">And you should find that hello visual objects in your browser window have started rotating!</span></span>

<span data-ttu-id="a9753-181">È possibile provare a effettuare l'aggiornamento dalla versione 2 tooversion 3 o dalla versione 2 tooversion 1 come esercizio.</span><span class="sxs-lookup"><span data-stu-id="a9753-181">You can try upgrading from version 2 tooversion 3, or from version 2 tooversion 1 as an exercise.</span></span> <span data-ttu-id="a9753-182">Lo spostamento da versione 2 tooversion 1 viene considerato anche un aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="a9753-182">Moving from version 2 tooversion 1 is also considered an upgrade.</span></span> <span data-ttu-id="a9753-183">Provare a usare toomake di criteri di integrità e timeout manualmente familiarità con esse.</span><span class="sxs-lookup"><span data-stu-id="a9753-183">Play with time-outs and health policies toomake yourself familiar with them.</span></span> <span data-ttu-id="a9753-184">Quando si distribuiscono cluster Azure tooan, hello set di parametri necessario toobe in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="a9753-184">When you are deploying tooan Azure cluster, hello parameters need toobe set appropriately.</span></span> <span data-ttu-id="a9753-185">È buona tooset i timeout di hello conservativamente.</span><span class="sxs-lookup"><span data-stu-id="a9753-185">It is good tooset hello time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a9753-186">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="a9753-186">Next steps</span></span>
<span data-ttu-id="a9753-187">[Esercitazione sull'aggiornamento di un'applicazione di Service Fabric tramite Visual Studio](service-fabric-application-upgrade-tutorial.md) descrive la procedura di aggiornamento di un'applicazione con Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a9753-187">[Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="a9753-188">Controllare l'aggiornamento dell'applicazione tramite [Parametri di aggiornamento](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="a9753-188">Control how your application upgrades by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="a9753-189">Apportare aggiornamenti applicazione compatibile da learning come toouse [la serializzazione dei dati](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="a9753-189">Make your application upgrades compatible by learning how toouse [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="a9753-190">Informazioni su come toouse funzionalità avanzate durante l'aggiornamento dell'applicazione riferendosi troppo[argomenti avanzati](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="a9753-190">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="a9753-191">Risolvere i problemi comuni negli aggiornamenti dell'applicazione riferendosi passaggi toohello [gli aggiornamenti dell'applicazione di risoluzione dei problemi](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="a9753-191">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

