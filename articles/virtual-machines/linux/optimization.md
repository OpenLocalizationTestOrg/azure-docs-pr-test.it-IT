---
title: Ottimizzare una macchina virtuale Linux su Azure | Microsoft Docs
description: Suggerimenti sull'ottimizzazione per assicurare di configurare la VM Linux per prestazioni ottimali su Azure
keywords: linux macchina virtuale,macchina virtuale linux,macchina virtuale ubuntu
services: virtual-machines-linux
documentationcenter: 
author: rickstercdn
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: 8baa30c8-d40e-41ac-93d0-74e96fe18d4c
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: rclaus
ms.openlocfilehash: eb79d574fd4dddfb986660cc338bc8748f2082c2
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="optimize-your-linux-vm-on-azure"></a><span data-ttu-id="91b9b-104">Ottimizzare la VM Linux su Azure</span><span class="sxs-lookup"><span data-stu-id="91b9b-104">Optimize your Linux VM on Azure</span></span>
<span data-ttu-id="91b9b-105">La creazione di una macchina virtuale (VM) di Linux è facile da eseguire dalla riga di comando o dal portale.</span><span class="sxs-lookup"><span data-stu-id="91b9b-105">Creating a Linux virtual machine (VM) is easy to do from the command line or from the portal.</span></span> <span data-ttu-id="91b9b-106">Questa esercitazione illustra come assicurarsi di averla configurata in modo da ottimizzarne le prestazioni sulla piattaforma Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="91b9b-106">This tutorial shows you how to ensure you have set it up to optimize its performance on the Microsoft Azure platform.</span></span> <span data-ttu-id="91b9b-107">Questo argomento usa una VM di Ubuntu Server, ma è anche possibile creare una macchina virtuale Linux usando le [proprie immagini come modelli](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="91b9b-107">This topic uses an Ubuntu Server VM, but you can also create Linux virtual machine using [your own images as templates](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="91b9b-108">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="91b9b-108">Prerequisites</span></span>
<span data-ttu-id="91b9b-109">Questo argomento presuppone che sia disponibile una sottoscrizione di Azure attiva ([registrazione alla versione di valutazione gratuita](https://azure.microsoft.com/pricing/free-trial/)) e che sia già stato eseguito il provisioning di una macchina virtuale nella sottoscrizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="91b9b-109">This topic assumes you already have a working Azure subscription ([free trial signup](https://azure.microsoft.com/pricing/free-trial/)) and have already provisioned a VM into your Azure subscription.</span></span> <span data-ttu-id="91b9b-110">Assicurarsi che sia installata la versione più recente dell'[interfaccia della riga di comando 2.0 di Azure](/cli/azure/install-az-cli2) e che sia stato effettuato l'accesso alla sottoscrizione di Azure con [az login](/cli/azure/#login) prima di [creare una macchina virtuale](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="91b9b-110">Make sure that you have the latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in to your Azure subscription with [az login](/cli/azure/#login) before you [create a VM](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

## <a name="azure-os-disk"></a><span data-ttu-id="91b9b-111">Disco del sistema operativo di Azure</span><span class="sxs-lookup"><span data-stu-id="91b9b-111">Azure OS Disk</span></span>
<span data-ttu-id="91b9b-112">Dopo la creazione, alla macchina virtuale Linux in Azure sono associati due dischi.</span><span class="sxs-lookup"><span data-stu-id="91b9b-112">Once you create a Linux VM in Azure, it has two disks associated with it.</span></span> <span data-ttu-id="91b9b-113">**/dev/sda** è il disco del sistema operativo mentre **/dev/sdb** è il disco temporaneo.</span><span class="sxs-lookup"><span data-stu-id="91b9b-113">**/dev/sda** is your OS disk, **/dev/sdb** is your temporary disk.</span></span>  <span data-ttu-id="91b9b-114">Usare il disco principale del sistema operativo (**/dev/sda**) esclusivamente per il sistema operativo, perché è ottimizzato per tempi di avvio della macchina virtuale ridotti e non offre prestazioni ideali per i carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="91b9b-114">Do not use the main OS disk (**/dev/sda**) for anything except the operating system as it is optimized for fast VM boot time and does not provide good performance for your workloads.</span></span> <span data-ttu-id="91b9b-115">È consigliabile collegare uno o più dischi alla VM per ottenere l'archiviazione persistente e ottimizzata per i dati.</span><span class="sxs-lookup"><span data-stu-id="91b9b-115">You want to attach one or more disks to your VM to get persistent and optimized storage for your data.</span></span> 

## <a name="adding-disks-for-size-and-performance-targets"></a><span data-ttu-id="91b9b-116">Aggiunta di dischi per risultati a livello di dimensioni e prestazioni</span><span class="sxs-lookup"><span data-stu-id="91b9b-116">Adding Disks for Size and Performance targets</span></span>
<span data-ttu-id="91b9b-117">In base alle dimensioni della VM, è possibile collegare fino a 16 dischi aggiuntivi su una macchina virtuale di Serie A, 32 dischi su una di Serie D e 64 dischi su una di Serie G, fino a un massimo di 1 TB di dimensioni per ogni VM.</span><span class="sxs-lookup"><span data-stu-id="91b9b-117">Based on the VM size, you can attach up to 16 additional disks on an A-Series, 32 disks on a D-Series and 64 disks on a G-Series machine - each up to 1 TB in size.</span></span> <span data-ttu-id="91b9b-118">Aggiungere altri dischi in base alle necessità specificate dai requisiti per spazio e IOps.</span><span class="sxs-lookup"><span data-stu-id="91b9b-118">You add extra disks as needed per your space and IOps requirements.</span></span> <span data-ttu-id="91b9b-119">Ogni disco ha un obiettivo a livello di prestazioni pari a 500 IOps per l'Archiviazione Standard e 5000 IOps per disco per l'Archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="91b9b-119">Each disk has a performance target of 500 IOps for Standard Storage and up to 5000 IOps per disk for Premium Storage.</span></span>  <span data-ttu-id="91b9b-120">Per altre informazioni sui dischi di Archiviazione Premium vedere [Archiviazione Premium: archiviazione a prestazioni elevate per macchine virtuali di Azure](../../storage/common/storage-premium-storage.md)</span><span class="sxs-lookup"><span data-stu-id="91b9b-120">For more information about Premium Storage disks, see [Premium Storage: High-Performance Storage for Azure VMs](../../storage/common/storage-premium-storage.md)</span></span>

<span data-ttu-id="91b9b-121">Per ottenere i valori IOps più elevati nei dischi di Archiviazione Premium in cui le impostazioni della cache sono state impostate su **ReadOnly** o **None**, è necessario disabilitare le **barriere** durante il montaggio del file system in Linux.</span><span class="sxs-lookup"><span data-stu-id="91b9b-121">To achieve the highest IOps on Premium Storage disks where their cache settings have been set to either **ReadOnly** or **None**, you must disable **barriers** while mounting the file system in Linux.</span></span> <span data-ttu-id="91b9b-122">Non sono necessarie barriere perché le scritture relative ai dischi supportati da Archiviazione Premium assicurano la durabilità per queste impostazioni della cache.</span><span class="sxs-lookup"><span data-stu-id="91b9b-122">You do not need barriers because the writes to Premium Storage backed disks are durable for these cache settings.</span></span>

* <span data-ttu-id="91b9b-123">Se si usa **reiserFS**, disabilitare le barriere tramite l'opzione di montaggio `barrier=none`. Per abilitarle usare `barrier=flush`.</span><span class="sxs-lookup"><span data-stu-id="91b9b-123">If you use **reiserFS**, disable barriers using the mount option `barrier=none` (For enabling barriers, use `barrier=flush`)</span></span>
* <span data-ttu-id="91b9b-124">Se si usa **ext3/ext4**, disabilitare le barriere tramite l'opzione di montaggio `barrier=0`. Per abilitarle usare `barrier=1`.</span><span class="sxs-lookup"><span data-stu-id="91b9b-124">If you use **ext3/ext4**, disable barriers using the mount option `barrier=0` (For enabling barriers, use `barrier=1`)</span></span>
* <span data-ttu-id="91b9b-125">Se si usa **XFS**, disabilitare le barriere tramite l'opzione di montaggio `nobarrier`. Per abilitarle usare l'opzione `barrier`.</span><span class="sxs-lookup"><span data-stu-id="91b9b-125">If you use **XFS**, disable barriers using the mount option `nobarrier` (For enabling barriers, use the option `barrier`)</span></span>

## <a name="unmanaged-storage-account-considerations"></a><span data-ttu-id="91b9b-126">Considerazioni sull'account di archiviazione non gestito</span><span class="sxs-lookup"><span data-stu-id="91b9b-126">Unmanaged storage account considerations</span></span>
<span data-ttu-id="91b9b-127">L'azione predefinita quando si crea una macchina virtuale con l'interfaccia della riga di comando 2.0 di Azure consiste nell'uso di Azure Managed Disks.</span><span class="sxs-lookup"><span data-stu-id="91b9b-127">The default action when you create a VM with the Azure CLI 2.0 is to use Azure Managed Disks.</span></span>  <span data-ttu-id="91b9b-128">Questi dischi vengono gestiti dalla piattaforma Azure e non richiedono alcuna pianificazione o alcuna posizione per l'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="91b9b-128">These disks are handled by the Azure platform and do not require any preparation or location to store them.</span></span>  <span data-ttu-id="91b9b-129">I dischi non gestiti richiedono un account di archiviazione e presentano alcune considerazioni aggiuntive sulle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="91b9b-129">Unmanaged disks require a storage account and have some additional performance considerations.</span></span>  <span data-ttu-id="91b9b-130">Per altre informazioni sui dischi gestiti, vedere [Azure Managed Disks overview](../windows/managed-disks-overview.md) (Panoramica di Azure Managed Disks).</span><span class="sxs-lookup"><span data-stu-id="91b9b-130">For more information about managed disks, see [Azure Managed Disks overview](../windows/managed-disks-overview.md).</span></span>  <span data-ttu-id="91b9b-131">Nella sezione seguente vengono descritte le considerazioni sulle prestazioni applicabili solo quando si usano dischi non gestiti.</span><span class="sxs-lookup"><span data-stu-id="91b9b-131">The following section outlines performance considerations only when you use unmanaged disks.</span></span>  <span data-ttu-id="91b9b-132">Anche in questo caso la soluzione di archiviazione predefinita e consigliata consiste nell'usare dischi gestiti.</span><span class="sxs-lookup"><span data-stu-id="91b9b-132">Again, the default and recommended storage solution is to use managed disks.</span></span>

<span data-ttu-id="91b9b-133">Quando si crea una macchina virtuale con dischi non gestiti è consigliabile assicurarsi di collegare dischi da account di archiviazione che si trovano nella stessa area della macchina virtuale, per garantire la prossimità e ridurre al minimo la latenza di rete.</span><span class="sxs-lookup"><span data-stu-id="91b9b-133">If you create a VM with unmanaged disks, make sure that you attach disks from storage accounts residing in the same region as your VM to ensure close proximity and minimize network latency.</span></span>  <span data-ttu-id="91b9b-134">Ogni account di archiviazione Standard ha capacitò pari ad almeno 20.000 IOps e a dimensioni di 500 TB.</span><span class="sxs-lookup"><span data-stu-id="91b9b-134">Each Standard storage account has a maximum of 20k IOps and a 500 TB size capacity.</span></span>  <span data-ttu-id="91b9b-135">Ciò consente di ottenere circa 40 dischi a uso elevato, inclusi il disco del sistema operativo ed eventuali dischi dati creati.</span><span class="sxs-lookup"><span data-stu-id="91b9b-135">This  limit works out to approximately 40 heavily used disks including both the OS disk and any data disks you create.</span></span> <span data-ttu-id="91b9b-136">Per gli account di archiviazione Premium non sono previsti limiti massimi per IOps ma è previsto un limite di 32 TB per le dimensioni.</span><span class="sxs-lookup"><span data-stu-id="91b9b-136">For Premium Storage accounts, there is no Maximum IOps limit but there is a 32 TB size limit.</span></span> 

<span data-ttu-id="91b9b-137">Quando si gestiscono carichi di lavoro con IOps elevati ed è stata scelta l'Archiviazione Standard per i dischi, potrebbe essere necessario suddividere i dischi in più account di archiviazione, per assicurarsi di non superare il limite di 20.000 IOps per gli account di archiviazione Standard.</span><span class="sxs-lookup"><span data-stu-id="91b9b-137">When dealing with high IOps workloads and you have chosen Standard Storage for your disks, you might need to split the disks across multiple storage accounts to make sure you have not hit the 20,000 IOps limit for Standard Storage accounts.</span></span> <span data-ttu-id="91b9b-138">La VM può includere una combinazione di dischi da diversi account di archiviazione e tipi di account di archiviazione per ottenere una configurazione ottimale.</span><span class="sxs-lookup"><span data-stu-id="91b9b-138">Your VM can contain a mix of disks from across different storage accounts and storage account types to achieve your optimal configuration.</span></span>
 

## <a name="your-vm-temporary-drive"></a><span data-ttu-id="91b9b-139">Unità temporanea per la VM</span><span class="sxs-lookup"><span data-stu-id="91b9b-139">Your VM Temporary drive</span></span>
<span data-ttu-id="91b9b-140">Per impostazione predefinita, quando si crea una macchina virtuale, Azure mette a disposizione un disco del sistema operativo (**/dev/sda**) e un disco temporaneo (**/dev/sdb**).</span><span class="sxs-lookup"><span data-stu-id="91b9b-140">By default when you create a VM, Azure provides you with an OS disk (**/dev/sda**) and a temporary disk (**/dev/sdb**).</span></span>  <span data-ttu-id="91b9b-141">Tutti gli altri dischi aggiuntivi verranno visualizzati come **/dev/sdc**, **/dev/sdd**, **/dev/sde** e così via.</span><span class="sxs-lookup"><span data-stu-id="91b9b-141">All additional disks you add show up as **/dev/sdc**, **/dev/sdd**, **/dev/sde** and so on.</span></span> <span data-ttu-id="91b9b-142">Tutti i dati nei dischi temporanei (**/dev/sdb**) non sono durevoli e possono andare persi se eventi specifici come il ridimensionamento, la ridistribuzione o la manutenzione della macchina virtuale impongono un riavvio.</span><span class="sxs-lookup"><span data-stu-id="91b9b-142">All data on your temporary disk (**/dev/sdb**) is not durable, and can be lost if specific events like VM Resizing, redeployment, or maintenance forces a restart of your VM.</span></span>  <span data-ttu-id="91b9b-143">Le dimensioni e il tipo del disco temporaneo sono correlati alle dimensioni della VM scelte in fase di distribuzione.</span><span class="sxs-lookup"><span data-stu-id="91b9b-143">The size and type of your temporary disk is related to the VM size you chose at deployment time.</span></span> <span data-ttu-id="91b9b-144">Nel caso di macchine virtuali con dimensioni Premium (serie DS, G e DS_V2) l'unità temporanea sarà supportata da un'unità SSD locale per assicurare prestazioni aggiuntive fino a un massimo di 48.000 IOps.</span><span class="sxs-lookup"><span data-stu-id="91b9b-144">All of the premium size VMs (DS, G, and DS_V2 series) the temporary drive are backed by a local SSD for additional performance of up to 48k IOps.</span></span> 

## <a name="linux-swap-file"></a><span data-ttu-id="91b9b-145">File di scambio Linux</span><span class="sxs-lookup"><span data-stu-id="91b9b-145">Linux Swap File</span></span>
<span data-ttu-id="91b9b-146">Se la VM di Azure proviene da un'immagine Ubuntu o CoreOS, è possibile usare CustomData per inviare un file cloud-config a cloud-init.</span><span class="sxs-lookup"><span data-stu-id="91b9b-146">If your Azure VM is from an Ubuntu or CoreOS image, then you can use CustomData to send a cloud-config to cloud-init.</span></span> <span data-ttu-id="91b9b-147">Se è stata [caricata un'immagine Linux personalizzata](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) che usa cloud-init, si configurano anche partizioni di scambio con cloud-init.</span><span class="sxs-lookup"><span data-stu-id="91b9b-147">If you [uploaded a custom Linux image](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) that uses cloud-init, you also configure swap partitions using cloud-init.</span></span>

<span data-ttu-id="91b9b-148">Nelle immagini cloud Ubuntu, è necessario usare cloud-init per configurare la partizione di scambio.</span><span class="sxs-lookup"><span data-stu-id="91b9b-148">On Ubuntu Cloud Images, you must use cloud-init to configure the swap partition.</span></span> <span data-ttu-id="91b9b-149">Per altre informazioni vedere [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span><span class="sxs-lookup"><span data-stu-id="91b9b-149">For more information, see [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span></span>

<span data-ttu-id="91b9b-150">Per le immagini senza supporto cloud-init, le immagini delle VM distribuite da Azure Marketplace includono un agente Linux integrato per la VM con il sistema operativo, che consente alla VM di interagire con</span><span class="sxs-lookup"><span data-stu-id="91b9b-150">For images without cloud-init support, VM images deployed from the Azure Marketplace have a VM Linux Agent integrated with the OS.</span></span> <span data-ttu-id="91b9b-151">diversi servizi di Azure.</span><span class="sxs-lookup"><span data-stu-id="91b9b-151">This agent allows the VM to interact with various Azure services.</span></span> <span data-ttu-id="91b9b-152">Supponendo che sia stata distribuita un'immagine standard da Azure Marketplace, sarà necessario seguire questa procedura per configurare correttamente le impostazioni del file di scambio Linux:</span><span class="sxs-lookup"><span data-stu-id="91b9b-152">Assuming you have deployed a standard image from the Azure Marketplace, you would need to do the following to correctly configure your Linux swap file settings:</span></span>

<span data-ttu-id="91b9b-153">Trovare e modificare due voci nel file **/etc/waagent.conf** .</span><span class="sxs-lookup"><span data-stu-id="91b9b-153">Locate and modify two entries in the **/etc/waagent.conf** file.</span></span> <span data-ttu-id="91b9b-154">Queste voci controllano l'esistenza di un file di scambio dedicato e le dimensioni del file di scambio.</span><span class="sxs-lookup"><span data-stu-id="91b9b-154">They control the existence of a dedicated swap file and size of the swap file.</span></span> <span data-ttu-id="91b9b-155">I parametri che si sta cercando di modificare sono `ResourceDisk.EnableSwap=N` e `ResourceDisk.SwapSizeMB=0`</span><span class="sxs-lookup"><span data-stu-id="91b9b-155">The parameters you are looking to modify are `ResourceDisk.EnableSwap=N` and `ResourceDisk.SwapSizeMB=0`</span></span> 

<span data-ttu-id="91b9b-156">Modificarli secondo le impostazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="91b9b-156">Change the parameters to the following settings:</span></span>

* <span data-ttu-id="91b9b-157">ResourceDisk.EnableSwap=Y</span><span class="sxs-lookup"><span data-stu-id="91b9b-157">ResourceDisk.EnableSwap=Y</span></span>
* <span data-ttu-id="91b9b-158">ResourceDisk.SwapSizeMB={dimensione in MB che soddisfa le esigenze}</span><span class="sxs-lookup"><span data-stu-id="91b9b-158">ResourceDisk.SwapSizeMB={size in MB to meet your needs}</span></span> 

<span data-ttu-id="91b9b-159">Dopo aver apportato le modifiche, è necessario riavviare il waagent o la macchina virtuale Linux.</span><span class="sxs-lookup"><span data-stu-id="91b9b-159">Once you have made the change, you need to restart the waagent or restart your Linux VM to reflect those changes.</span></span>  <span data-ttu-id="91b9b-160">Per verificare l'implementazione delle modifiche e la creazione di un file di scambio, provare a usare il comando `free` per visualizzare lo spazio disponibile.</span><span class="sxs-lookup"><span data-stu-id="91b9b-160">You know the changes have been implemented and a swap file has been created when you use the `free` command to view free space.</span></span> <span data-ttu-id="91b9b-161">L'esempio seguente consente di creare un file di scambio di 512 MB come risultato della modifica del file **waagent.conf**:</span><span class="sxs-lookup"><span data-stu-id="91b9b-161">The following example has a 512MB swap file created as a result of modifying the **waagent.conf** file:</span></span>

```bash
azuseruser@myVM:~$ free
            total       used       free     shared    buffers     cached
Mem:       3525156     804168    2720988        408       8428     633192
-/+ buffers/cache:     162548    3362608
Swap:       524284          0     524284
```

## <a name="io-scheduling-algorithm-for-premium-storage"></a><span data-ttu-id="91b9b-162">Algoritmo di pianificazione I/O per l'Archiviazione Premium</span><span class="sxs-lookup"><span data-stu-id="91b9b-162">I/O scheduling algorithm for Premium Storage</span></span>
<span data-ttu-id="91b9b-163">Con il kernel Linux 2.6.18, l'algoritmo di pianificazione I/O predefinito è stato modificato da algoritmo Deadline a CFQ (Completely Fair Queuing).</span><span class="sxs-lookup"><span data-stu-id="91b9b-163">With the 2.6.18 Linux kernel, the default I/O scheduling algorithm was changed from Deadline to CFQ (Completely fair queuing algorithm).</span></span> <span data-ttu-id="91b9b-164">Per modelli I/O ad accesso casuale, la differenza tra le prestazioni per CFQ e Deadline è minima.</span><span class="sxs-lookup"><span data-stu-id="91b9b-164">For random access I/O patterns, there is negligible difference in performance differences between CFQ and Deadline.</span></span>  <span data-ttu-id="91b9b-165">Per i dischi basati su SSD in cui il modello I/O del disco è prevalentemente sequenziale, il ritorno all'algoritmo NOOP o Deadline può consentire di ottenere prestazioni migliori per I/O.</span><span class="sxs-lookup"><span data-stu-id="91b9b-165">For SSD-based disks where the disk I/O pattern is predominantly sequential, switching back to the NOOP or Deadline algorithm can achieve better I/O performance.</span></span>

### <a name="view-the-current-io-scheduler"></a><span data-ttu-id="91b9b-166">Visualizzare l'utilità di pianificazione di I/O corrente</span><span class="sxs-lookup"><span data-stu-id="91b9b-166">View the current I/O scheduler</span></span>
<span data-ttu-id="91b9b-167">Usare il comando seguente:</span><span class="sxs-lookup"><span data-stu-id="91b9b-167">Use the following command:</span></span>  

```bash
cat /sys/block/sda/queue/scheduler
```

<span data-ttu-id="91b9b-168">Verrà visualizzato l'output seguente, che indica l'utilità di pianificazione corrente.</span><span class="sxs-lookup"><span data-stu-id="91b9b-168">You see following output, which indicates the current scheduler.</span></span>  

```bash
noop [deadline] cfq
```

### <a name="change-the-current-device-devsda-of-io-scheduling-algorithm"></a><span data-ttu-id="91b9b-169">Modificare il dispositivo corrente (/dev/sda) dell'algoritmo di pianificazione di I/O</span><span class="sxs-lookup"><span data-stu-id="91b9b-169">Change the current device (/dev/sda) of I/O scheduling algorithm</span></span>
<span data-ttu-id="91b9b-170">Usare il seguente comando:</span><span class="sxs-lookup"><span data-stu-id="91b9b-170">Use the following commands:</span></span>  

```bash
azureuser@myVM:~$ sudo su -
root@myVM:~# echo "noop" >/sys/block/sda/queue/scheduler
root@myVM:~# sed -i 's/GRUB_CMDLINE_LINUX=""/GRUB_CMDLINE_LINUX_DEFAULT="quiet splash elevator=noop"/g' /etc/default/grub
root@myVM:~# update-grub
```

> [!NOTE]
> <span data-ttu-id="91b9b-171">Applicare questa impostazione esclusivamente a **/dev/sda** non serve a niente.</span><span class="sxs-lookup"><span data-stu-id="91b9b-171">Applying this setting for **/dev/sda** alone is not useful.</span></span> <span data-ttu-id="91b9b-172">È necessario che sia impostata su tutti i dischi dati in cui la modalità I/O sequenziale domina il modello I/O.</span><span class="sxs-lookup"><span data-stu-id="91b9b-172">Set on all data disks where sequential I/O dominates the I/O pattern.</span></span>  

<span data-ttu-id="91b9b-173">Si dovrebbe visualizzare l'output seguente, che indica che **grub.cfg** è stato ricompilato correttamente e che l'utilità di pianificazione predefinita è stata aggiornata a NOOP.</span><span class="sxs-lookup"><span data-stu-id="91b9b-173">You should see the following output, indicating that **grub.cfg** has been rebuilt successfully and that the default scheduler has been updated to NOOP.</span></span>  

```bash
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.13.0-34-generic
Found initrd image: /boot/initrd.img-3.13.0-34-generic
Found linux image: /boot/vmlinuz-3.13.0-32-generic
Found initrd image: /boot/initrd.img-3.13.0-32-generic
Found memtest86+ image: /memtest86+.elf
Found memtest86+ image: /memtest86+.bin
done
```

<span data-ttu-id="91b9b-174">Per il gruppo di distribuzione Redhat è necessario solo il seguente comando:</span><span class="sxs-lookup"><span data-stu-id="91b9b-174">For the Redhat distribution family, you only need the following command:</span></span>   

```bash
echo 'echo noop >/sys/block/sda/queue/scheduler' >> /etc/rc.local
```

## <a name="using-software-raid-to-achieve-higher-iops"></a><span data-ttu-id="91b9b-175">Uso di Software RAID per ottenere valori I/Ops più elevati</span><span class="sxs-lookup"><span data-stu-id="91b9b-175">Using Software RAID to achieve higher I/Ops</span></span>
<span data-ttu-id="91b9b-176">Se i carichi di lavoro richiedono un valore di IOps superiore a quello consentito da un singolo disco, sarà necessario usare una configurazione Software RAID con più dischi.</span><span class="sxs-lookup"><span data-stu-id="91b9b-176">If your workloads require more IOps than a single disk can provide, you need to use a software RAID configuration of multiple disks.</span></span> <span data-ttu-id="91b9b-177">Poiché Azure esegue già la resilienza del disco a livello di infrastruttura locale, è possibile ottenere il livello massimo di prestazioni mediante una configurazione con striping RAID-0.</span><span class="sxs-lookup"><span data-stu-id="91b9b-177">Because Azure already performs disk resiliency at the local fabric layer, you achieve the highest level of performance from a RAID-0 striping configuration.</span></span>  <span data-ttu-id="91b9b-178">È necessario effettuare il provisioning e creare dischi nell'ambiente Azure, poi collegarli alla macchina virtuale Linux prima del partizionamento, della formattazione e del montaggio delle unità.</span><span class="sxs-lookup"><span data-stu-id="91b9b-178">Provision and create disks in the Azure environment and attach them to your Linux VM before partitioning, formatting and mounting the drives.</span></span>  <span data-ttu-id="91b9b-179">Altri dettagli sulla configurazione di un'installazione RAID software nella VM Linux in Azure sono disponibili nel documento **[Configurare RAID software in Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**.</span><span class="sxs-lookup"><span data-stu-id="91b9b-179">More details on configuring a software RAID setup on your Linux VM in azure can be found in the **[Configuring Software RAID on Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)** document.</span></span>

## <a name="next-steps"></a><span data-ttu-id="91b9b-180">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="91b9b-180">Next Steps</span></span>
<span data-ttu-id="91b9b-181">Come per tutte le considerazioni sull'ottimizzazione, sarà necessario eseguire test prima e dopo ogni modifica per misurare l'impatto della modifica stessa.</span><span class="sxs-lookup"><span data-stu-id="91b9b-181">Remember, as with all optimization discussions, you need to perform tests before and after each change to measure the impact the change has.</span></span>  <span data-ttu-id="91b9b-182">L'ottimizzazione è un processo graduale che potrà avere risultati diversi in diversi computer nell'ambiente.</span><span class="sxs-lookup"><span data-stu-id="91b9b-182">Optimization is a step by step process that has different results across different machines in your environment.</span></span>  <span data-ttu-id="91b9b-183">Le impostazioni ottimali per una configurazione potrebbero non essere appropriate per altre.</span><span class="sxs-lookup"><span data-stu-id="91b9b-183">What works for one configuration may not work for others.</span></span>

<span data-ttu-id="91b9b-184">Ecco alcuni collegamenti utili a risorse aggiuntive:</span><span class="sxs-lookup"><span data-stu-id="91b9b-184">Some useful links to additional resources:</span></span> 

* [<span data-ttu-id="91b9b-185">Archiviazione Premium: archiviazione ad alte prestazioni per carichi di lavoro delle macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="91b9b-185">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](../../storage/common/storage-premium-storage.md)
* [<span data-ttu-id="91b9b-186">Guida dell'utente dell'agente Linux di Azure</span><span class="sxs-lookup"><span data-stu-id="91b9b-186">Azure Linux Agent User Guide</span></span>](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="91b9b-187">Ottimizzazione delle prestazioni di MySQL in macchine virtuali Linux di Azure</span><span class="sxs-lookup"><span data-stu-id="91b9b-187">Optimizing MySQL Performance on Azure Linux VMs</span></span>](classic/optimize-mysql.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json)
* [<span data-ttu-id="91b9b-188">Configurare RAID software in Linux</span><span class="sxs-lookup"><span data-stu-id="91b9b-188">Configure Software RAID on Linux</span></span>](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

