---
title: "disponibilità Server aaaSQL gruppi - macchine virtuali di Azure - prerequisiti | Documenti Microsoft"
description: "Questa esercitazione viene illustrato come raggruppare i prerequisiti di hello tooconfigure per la creazione di una disponibilità di SQL Server Always On nelle macchine virtuali di Azure."
services: virtual-machines
documentationCenter: na
authors: MikeRayMSFT
manager: jhubbard
editor: monicar
tags: azure-service-management
ms.assetid: c492db4c-3faa-4645-849f-5a1a663be55a
ms.service: virtual-machines-sql
ms.devlang: na
ms.custom: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/09/2017
ms.author: mikeray
ms.openlocfilehash: eed0729ead25c7793bb17a04cd7fd996c7dc8c9d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="complete-hello-prerequisites-for-creating-always-on-availability-groups-on-azure-virtual-machines"></a><span data-ttu-id="c6b78-103">Completare hello prerequisiti per la creazione di gruppi di disponibilità Always On su macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="c6b78-103">Complete hello prerequisites for creating Always On availability groups on Azure virtual machines</span></span>

<span data-ttu-id="c6b78-104">Questa esercitazione viene illustrato come toocomplete hello prerequisiti per la creazione di un [SQL Server Always On gruppo di disponibilità nelle macchine virtuali di Azure (VM)](virtual-machines-windows-portal-sql-availability-group-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="c6b78-104">This tutorial shows how toocomplete hello prerequisites for creating a [SQL Server Always On availability group on Azure virtual machines (VMs)](virtual-machines-windows-portal-sql-availability-group-tutorial.md).</span></span> <span data-ttu-id="c6b78-105">Al termine dei prerequisiti di hello, è un controller di dominio, due macchine virtuali di SQL Server e un server di controllo in un singolo gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="c6b78-105">When you've finished hello prerequisites, you have a domain controller, two SQL Server VMs, and a witness server in a single resource group.</span></span>

<span data-ttu-id="c6b78-106">**Tempo stimato**: potrebbe richiedere alcune ore prerequisiti hello toocomplete.</span><span class="sxs-lookup"><span data-stu-id="c6b78-106">**Time estimate**: It might take a couple of hours toocomplete hello prerequisites.</span></span> <span data-ttu-id="c6b78-107">Il tempo è dedicato principalmente alla creazione delle macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="c6b78-107">Much of this time is spent creating virtual machines.</span></span>

<span data-ttu-id="c6b78-108">Hello diagramma seguente illustra ciò che si compila in esercitazione hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-108">hello following diagram illustrates what you build in hello tutorial.</span></span>

![Gruppo di disponibilità](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/00-EndstateSampleNoELB.png)

## <a name="review-availability-group-documentation"></a><span data-ttu-id="c6b78-110">Esaminare la documentazione relativa ai gruppi di disponibilità</span><span class="sxs-lookup"><span data-stu-id="c6b78-110">Review availability group documentation</span></span>

<span data-ttu-id="c6b78-111">L'esercitazione presuppone una conoscenza di base dei gruppi di disponibilità AlwaysOn di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-111">This tutorial assumes that you have a basic understanding of SQL Server Always On availability groups.</span></span> <span data-ttu-id="c6b78-112">Se non si ha familiarità con questa tecnologia, vedere [Panoramica di gruppi di disponibilità AlwaysOn (SQL Server)](http://msdn.microsoft.com/library/ff877884.aspx).</span><span class="sxs-lookup"><span data-stu-id="c6b78-112">If you're not familiar with this technology, see [Overview of Always On Availability Groups (SQL Server)](http://msdn.microsoft.com/library/ff877884.aspx).</span></span>


## <a name="create-an-azure-account"></a><span data-ttu-id="c6b78-113">Creare un account Azure</span><span class="sxs-lookup"><span data-stu-id="c6b78-113">Create an Azure account</span></span>
<span data-ttu-id="c6b78-114">È necessario un account Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-114">You need an Azure account.</span></span> <span data-ttu-id="c6b78-115">È possibile [aprire un account Azure gratuito](/pricing/free-trial/?WT.mc_id=A261C142F) o [attivare i benefici della sottoscrizione di Visual Studio](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F).</span><span class="sxs-lookup"><span data-stu-id="c6b78-115">You can [open a free Azure account](/pricing/free-trial/?WT.mc_id=A261C142F) or [activate Visual Studio subscriber benefits](/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F).</span></span>

## <a name="create-a-resource-group"></a><span data-ttu-id="c6b78-116">Creare un gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="c6b78-116">Create a resource group</span></span>
1. <span data-ttu-id="c6b78-117">Accedi toohello [portale di Azure](http://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="c6b78-117">Sign in toohello [Azure portal](http://portal.azure.com).</span></span>
2. <span data-ttu-id="c6b78-118">Fare clic su  **+**  toocreate un nuovo oggetto nel portale di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-118">Click **+** toocreate a new object in hello portal.</span></span>

   ![Nuovo oggetto](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-portalplus.png)

3. <span data-ttu-id="c6b78-120">Tipo **gruppo di risorse** in hello **Marketplace** finestra di ricerca.</span><span class="sxs-lookup"><span data-stu-id="c6b78-120">Type **resource group** in hello **Marketplace** search window.</span></span>

   ![Gruppo di risorse](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-resourcegroupsymbol.png)
4. <span data-ttu-id="c6b78-122">Fare clic su **Gruppo di risorse**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-122">Click **Resource group**.</span></span>
5. <span data-ttu-id="c6b78-123">Fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-123">Click **Create**.</span></span>
6. <span data-ttu-id="c6b78-124">In hello **gruppo di risorse** pannello, in **nome gruppo di risorse**, digitare un nome per il gruppo di risorse hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-124">On hello **Resource group** blade, under **Resource group name**, type a name for hello resource group.</span></span> <span data-ttu-id="c6b78-125">ad esempio digitare **sql-ha-rg**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-125">For example, type **sql-ha-rg**.</span></span>
7. <span data-ttu-id="c6b78-126">Se si dispone di più sottoscrizioni di Azure, verificare che la sottoscrizione hello hello sottoscrizione di Azure che si desidera il gruppo di disponibilità toocreate hello in.</span><span class="sxs-lookup"><span data-stu-id="c6b78-126">If you have multiple Azure subscriptions, verify that hello subscription is hello Azure subscription that you want toocreate hello availability group in.</span></span>
8. <span data-ttu-id="c6b78-127">Selezionare una località.</span><span class="sxs-lookup"><span data-stu-id="c6b78-127">Select a location.</span></span> <span data-ttu-id="c6b78-128">percorso Hello è hello Azure area in cui il gruppo di disponibilità toocreate hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-128">hello location is hello Azure region where you want toocreate hello availability group.</span></span> <span data-ttu-id="c6b78-129">Per questa esercitazione, verrà toobuild tutte le risorse in un'unica posizione di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-129">For this tutorial, we're going toobuild all resources in one Azure location.</span></span>
9. <span data-ttu-id="c6b78-130">Verificare che **toodashboard Pin** sia selezionata.</span><span class="sxs-lookup"><span data-stu-id="c6b78-130">Verify that **Pin toodashboard** is checked.</span></span> <span data-ttu-id="c6b78-131">Questa impostazione facoltativa viene inserito un collegamento per il gruppo di risorse hello in hello dashboard del portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-131">This optional setting places a shortcut for hello resource group on hello Azure portal dashboard.</span></span>

   ![Gruppo di risorse](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/01-resourcegroup.png)

10. <span data-ttu-id="c6b78-133">Fare clic su **crea** toocreate gruppo di risorse hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-133">Click **Create** toocreate hello resource group.</span></span>

<span data-ttu-id="c6b78-134">Azure Crea gruppo di risorse hello e PIN di un gruppo di risorse toohello di scelta rapida nel portale di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-134">Azure creates hello resource group and pins a shortcut toohello resource group in hello portal.</span></span>

## <a name="create-hello-network-and-subnets"></a><span data-ttu-id="c6b78-135">Creare subnet e la rete hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-135">Create hello network and subnets</span></span>
<span data-ttu-id="c6b78-136">passaggio successivo Hello è toocreate hello reti e subnet nel gruppo di risorse di Azure hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-136">hello next step is toocreate hello networks and subnets in hello Azure resource group.</span></span>

<span data-ttu-id="c6b78-137">soluzione Hello Usa una rete virtuale con due subnet.</span><span class="sxs-lookup"><span data-stu-id="c6b78-137">hello solution uses one virtual network with two subnets.</span></span> <span data-ttu-id="c6b78-138">Hello [Panoramica di rete virtuale](../../../virtual-network/virtual-networks-overview.md) vengono fornite ulteriori informazioni sulle reti in Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-138">hello [Virtual network overview](../../../virtual-network/virtual-networks-overview.md) provides more information about networks in Azure.</span></span>

<span data-ttu-id="c6b78-139">rete virtuale hello toocreate:</span><span class="sxs-lookup"><span data-stu-id="c6b78-139">toocreate hello virtual network:</span></span>

1. <span data-ttu-id="c6b78-140">In hello portale di Azure, nel gruppo di risorse, fare clic su **+ Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-140">In hello Azure portal, in your resource group, click **+ Add**.</span></span> <span data-ttu-id="c6b78-141">Apre Azure hello **tutto** blade.</span><span class="sxs-lookup"><span data-stu-id="c6b78-141">Azure opens hello **Everything** blade.</span></span>

   ![Nuovo elemento](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/02-newiteminrg.png)
2. <span data-ttu-id="c6b78-143">Cercare **rete virtuale**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-143">Search for **virtual network**.</span></span>

     ![Cercare la rete virtuale](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/04-findvirtualnetwork.png)
3. <span data-ttu-id="c6b78-145">Fare clic su **Rete virtuale**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-145">Click **Virtual network**.</span></span>
4. <span data-ttu-id="c6b78-146">In hello **rete virtuale** pannello, fare clic su hello **Gestione risorse** modello di distribuzione e quindi fare clic su **crea**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-146">On hello **Virtual network** blade, click hello **Resource Manager** deployment model, and then click **Create**.</span></span>

    <span data-ttu-id="c6b78-147">Hello nella tabella seguente vengono mostrate hello impostazioni per la rete virtuale hello:</span><span class="sxs-lookup"><span data-stu-id="c6b78-147">hello following table shows hello settings for hello virtual network:</span></span>

   | <span data-ttu-id="c6b78-148">**Campo**</span><span class="sxs-lookup"><span data-stu-id="c6b78-148">**Field**</span></span> | <span data-ttu-id="c6b78-149">Valore</span><span class="sxs-lookup"><span data-stu-id="c6b78-149">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="c6b78-150">**Nome**</span><span class="sxs-lookup"><span data-stu-id="c6b78-150">**Name**</span></span> |<span data-ttu-id="c6b78-151">autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="c6b78-151">autoHAVNET</span></span> |
   | <span data-ttu-id="c6b78-152">**Spazio degli indirizzi**</span><span class="sxs-lookup"><span data-stu-id="c6b78-152">**Address space**</span></span> |<span data-ttu-id="c6b78-153">10.33.0.0/24</span><span class="sxs-lookup"><span data-stu-id="c6b78-153">10.33.0.0/24</span></span> |
   | <span data-ttu-id="c6b78-154">**Nome della subnet**</span><span class="sxs-lookup"><span data-stu-id="c6b78-154">**Subnet name**</span></span> |<span data-ttu-id="c6b78-155">Admin</span><span class="sxs-lookup"><span data-stu-id="c6b78-155">Admin</span></span> |
   | <span data-ttu-id="c6b78-156">**Intervallo di indirizzi subnet**</span><span class="sxs-lookup"><span data-stu-id="c6b78-156">**Subnet address range**</span></span> |<span data-ttu-id="c6b78-157">10.33.0.0/29</span><span class="sxs-lookup"><span data-stu-id="c6b78-157">10.33.0.0/29</span></span> |
   | <span data-ttu-id="c6b78-158">**Sottoscrizione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-158">**Subscription**</span></span> |<span data-ttu-id="c6b78-159">Specificare una sottoscrizione di hello che si desidera toouse.</span><span class="sxs-lookup"><span data-stu-id="c6b78-159">Specify hello subscription that you intend toouse.</span></span> <span data-ttu-id="c6b78-160">Se è disponibile una sola sottoscrizione, il valore di **Sottoscrizione** non è impostato.</span><span class="sxs-lookup"><span data-stu-id="c6b78-160">**Subscription** is blank if you only have one subscription.</span></span> |
   | <span data-ttu-id="c6b78-161">**Gruppo di risorse**</span><span class="sxs-lookup"><span data-stu-id="c6b78-161">**Resource group**</span></span> |<span data-ttu-id="c6b78-162">Scegliere **utilizzare esistente** e selezionare il nome di hello hello del gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="c6b78-162">Choose **Use existing** and pick hello name of hello resource group.</span></span> |
   | <span data-ttu-id="c6b78-163">**Posizione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-163">**Location**</span></span> |<span data-ttu-id="c6b78-164">Specificare hello località di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-164">Specify hello Azure location.</span></span> |

   <span data-ttu-id="c6b78-165">L'intervallo di indirizzi indirizzo spazio e la subnet potrebbe essere diverso dalla tabella hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-165">Your address space and subnet address range might be different from hello table.</span></span> <span data-ttu-id="c6b78-166">A seconda della sottoscrizione, hello portale viene suggerito un spazio degli indirizzi disponibili e l'intervallo di indirizzi subnet corrispondente.</span><span class="sxs-lookup"><span data-stu-id="c6b78-166">Depending on your subscription, hello portal suggests an available address space and corresponding subnet address range.</span></span> <span data-ttu-id="c6b78-167">Se non è disponibile uno spazio indirizzi sufficiente, usare un'altra sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-167">If no sufficient address space is available, use a different subscription.</span></span>

   <span data-ttu-id="c6b78-168">esempio Hello utilizza hello Nome subnet **Admin**. Questa subnet è hello ai controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="c6b78-168">hello example uses hello subnet name **Admin**. This subnet is for hello domain controllers.</span></span>

5. <span data-ttu-id="c6b78-169">Fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-169">Click **Create**.</span></span>

   ![Configurare la rete virtuale hello](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/06-configurevirtualnetwork.png)

<span data-ttu-id="c6b78-171">Azure torna toohello dashboard del portale e invia una notifica quando viene creata nuova rete hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-171">Azure returns you toohello portal dashboard and notifies you when hello new network is created.</span></span>

### <a name="create-a-second-subnet"></a><span data-ttu-id="c6b78-172">Creare una seconda subnet</span><span class="sxs-lookup"><span data-stu-id="c6b78-172">Create a second subnet</span></span>
<span data-ttu-id="c6b78-173">nuova rete virtuale Hello presenta una subnet, denominata **Admin**. i controller di dominio hello usare questa subnet.</span><span class="sxs-lookup"><span data-stu-id="c6b78-173">hello new virtual network has one subnet, named **Admin**. hello domain controllers use this subnet.</span></span> <span data-ttu-id="c6b78-174">Hello macchine virtuali di SQL Server utilizza una seconda subnet denominata **SQL**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-174">hello SQL Server VMs use a second subnet named **SQL**.</span></span> <span data-ttu-id="c6b78-175">tooconfigure questa subnet:</span><span class="sxs-lookup"><span data-stu-id="c6b78-175">tooconfigure this subnet:</span></span>

1. <span data-ttu-id="c6b78-176">Nel dashboard, fare clic su gruppo di risorse hello che è stato creato, **SQL a disponibilità elevata-RG**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-176">On your dashboard, click hello resource group that you created, **SQL-HA-RG**.</span></span> <span data-ttu-id="c6b78-177">Individuare il gruppo di risorse hello in rete hello **risorse**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-177">Locate hello network in hello resource group under **Resources**.</span></span>

    <span data-ttu-id="c6b78-178">Se **SQL a disponibilità elevata-RG** non è visibile, individuarlo facendo **gruppi di risorse** e applicando un filtro per nome gruppo di risorse hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-178">If **SQL-HA-RG** isn't visible, find it by clicking **Resource Groups** and filtering by hello resource group name.</span></span>
2. <span data-ttu-id="c6b78-179">Fare clic su **autoHAVNET** nell'elenco di hello delle risorse.</span><span class="sxs-lookup"><span data-stu-id="c6b78-179">Click **autoHAVNET** on hello list of resources.</span></span> <span data-ttu-id="c6b78-180">Azure apre il pannello di configurazione di rete hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-180">Azure opens hello network configuration blade.</span></span>
3. <span data-ttu-id="c6b78-181">In hello **autoHAVNET** blade di rete virtuale, in **impostazioni** , fare clic su **subnet**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-181">On hello **autoHAVNET** virtual network blade, under **Settings** , click **Subnets**.</span></span>

    <span data-ttu-id="c6b78-182">Subnet hello si noti che già stato creato.</span><span class="sxs-lookup"><span data-stu-id="c6b78-182">Note hello subnet that you already created.</span></span>

   ![Configurare la rete virtuale hello](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/07-addsubnet.png)
5. <span data-ttu-id="c6b78-184">Creare una seconda subnet.</span><span class="sxs-lookup"><span data-stu-id="c6b78-184">Create a second subnet.</span></span> <span data-ttu-id="c6b78-185">Fare clic su **+ Subnet**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-185">Click **+ Subnet**.</span></span>
6. <span data-ttu-id="c6b78-186">In hello **aggiungere subnet** pannello configurare subnet hello digitando **sqlsubnet** in **nome**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-186">On hello **Add subnet** blade, configure hello subnet by typing **sqlsubnet** under **Name**.</span></span> <span data-ttu-id="c6b78-187">Azure specifica automaticamente un **Intervallo di indirizzi**valido.</span><span class="sxs-lookup"><span data-stu-id="c6b78-187">Azure automatically specifies a valid **Address range**.</span></span> <span data-ttu-id="c6b78-188">Verificare che questo intervallo di indirizzi includa almeno 10 indirizzi.</span><span class="sxs-lookup"><span data-stu-id="c6b78-188">Verify that this address range has at least 10 addresses in it.</span></span> <span data-ttu-id="c6b78-189">In un ambiente di produzione potrebbero essere necessari più indirizzi.</span><span class="sxs-lookup"><span data-stu-id="c6b78-189">In a production environment, you might require more addresses.</span></span>
7. <span data-ttu-id="c6b78-190">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-190">Click **OK**.</span></span>

    ![Configurare la rete virtuale hello](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/08-configuresubnet.png)

<span data-ttu-id="c6b78-192">Hello nella tabella seguente vengono riepilogate le impostazioni di configurazione di rete hello:</span><span class="sxs-lookup"><span data-stu-id="c6b78-192">hello following table summarizes hello network configuration settings:</span></span>

| <span data-ttu-id="c6b78-193">**Campo**</span><span class="sxs-lookup"><span data-stu-id="c6b78-193">**Field**</span></span> | <span data-ttu-id="c6b78-194">Valore</span><span class="sxs-lookup"><span data-stu-id="c6b78-194">Value</span></span> |
| --- | --- |
| <span data-ttu-id="c6b78-195">**Nome**</span><span class="sxs-lookup"><span data-stu-id="c6b78-195">**Name**</span></span> |<span data-ttu-id="c6b78-196">**autoHAVNET**</span><span class="sxs-lookup"><span data-stu-id="c6b78-196">**autoHAVNET**</span></span> |
| <span data-ttu-id="c6b78-197">**Spazio degli indirizzi**</span><span class="sxs-lookup"><span data-stu-id="c6b78-197">**Address space**</span></span> |<span data-ttu-id="c6b78-198">Questo valore dipende da spazi di indirizzi disponibili hello nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-198">This value depends on hello available address spaces in your subscription.</span></span> <span data-ttu-id="c6b78-199">Un valore tipico è 10.0.0.0/16.</span><span class="sxs-lookup"><span data-stu-id="c6b78-199">A typical value is 10.0.0.0/16.</span></span> |
| <span data-ttu-id="c6b78-200">**Nome della subnet**</span><span class="sxs-lookup"><span data-stu-id="c6b78-200">**Subnet name**</span></span> |<span data-ttu-id="c6b78-201">**admin**</span><span class="sxs-lookup"><span data-stu-id="c6b78-201">**admin**</span></span> |
| <span data-ttu-id="c6b78-202">**Intervallo di indirizzi subnet**</span><span class="sxs-lookup"><span data-stu-id="c6b78-202">**Subnet address range**</span></span> |<span data-ttu-id="c6b78-203">Questo valore dipende da intervalli di indirizzi disponibili hello nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-203">This value depends on hello available address ranges in your subscription.</span></span> <span data-ttu-id="c6b78-204">Un valore tipico è 10.0.0.0/24</span><span class="sxs-lookup"><span data-stu-id="c6b78-204">A typical value is 10.0.0.0/24.</span></span> |
| <span data-ttu-id="c6b78-205">**Nome della subnet**</span><span class="sxs-lookup"><span data-stu-id="c6b78-205">**Subnet name**</span></span> |<span data-ttu-id="c6b78-206">**sqlsubnet**</span><span class="sxs-lookup"><span data-stu-id="c6b78-206">**sqlsubnet**</span></span> |
| <span data-ttu-id="c6b78-207">**Intervallo di indirizzi subnet**</span><span class="sxs-lookup"><span data-stu-id="c6b78-207">**Subnet address range**</span></span> |<span data-ttu-id="c6b78-208">Questo valore dipende da intervalli di indirizzi disponibili hello nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-208">This value depends on hello available address ranges in your subscription.</span></span> <span data-ttu-id="c6b78-209">Un valore tipico è 10.0.1.0/24</span><span class="sxs-lookup"><span data-stu-id="c6b78-209">A typical value is 10.0.1.0/24.</span></span> |
| <span data-ttu-id="c6b78-210">**Sottoscrizione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-210">**Subscription**</span></span> |<span data-ttu-id="c6b78-211">Specificare una sottoscrizione di hello che si desidera toouse.</span><span class="sxs-lookup"><span data-stu-id="c6b78-211">Specify hello subscription that you intend toouse.</span></span> |
| <span data-ttu-id="c6b78-212">**Gruppo di risorse**</span><span class="sxs-lookup"><span data-stu-id="c6b78-212">**Resource Group**</span></span> |<span data-ttu-id="c6b78-213">**SQL-HA-RG**</span><span class="sxs-lookup"><span data-stu-id="c6b78-213">**SQL-HA-RG**</span></span> |
| <span data-ttu-id="c6b78-214">**Posizione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-214">**Location**</span></span> |<span data-ttu-id="c6b78-215">Specificare hello stesso percorso scelto per il gruppo di risorse hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-215">Specify hello same location that you chose for hello resource group.</span></span> |

## <a name="create-availability-sets"></a><span data-ttu-id="c6b78-216">Creare set di disponibilità</span><span class="sxs-lookup"><span data-stu-id="c6b78-216">Create availability sets</span></span>

<span data-ttu-id="c6b78-217">Prima di creare macchine virtuali, è necessario toocreate set di disponibilità.</span><span class="sxs-lookup"><span data-stu-id="c6b78-217">Before you create virtual machines, you need toocreate availability sets.</span></span> <span data-ttu-id="c6b78-218">Set di disponibilità di riducono i tempi di inattività hello per gli eventi di manutenzione pianificato o.</span><span class="sxs-lookup"><span data-stu-id="c6b78-218">Availability sets reduce hello downtime for planned or unplanned maintenance events.</span></span> <span data-ttu-id="c6b78-219">Un set di disponibilità di Azure è un gruppo logico di risorse che Azure inserisce in domini di errore e domini di aggiornamento fisici.</span><span class="sxs-lookup"><span data-stu-id="c6b78-219">An Azure availability set is a logical group of resources that Azure places on physical fault domains and update domains.</span></span> <span data-ttu-id="c6b78-220">Un dominio di errore garantisce che i membri del gruppo di disponibilità hello hello dispongano di risorse di rete e di alimentazione separate.</span><span class="sxs-lookup"><span data-stu-id="c6b78-220">A fault domain ensures that hello members of hello availability set have separate power and network resources.</span></span> <span data-ttu-id="c6b78-221">Un dominio di aggiornamento assicura che i membri del gruppo di disponibilità hello non diventa inattivo per manutenzione nella hello stesso tempo.</span><span class="sxs-lookup"><span data-stu-id="c6b78-221">An update domain ensures that members of hello availability set aren't brought down for maintenance at hello same time.</span></span> <span data-ttu-id="c6b78-222">Per ulteriori informazioni, vedere [gestione hello disponibilità delle macchine virtuali](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="c6b78-222">For more information, see [Manage hello availability of virtual machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="c6b78-223">Sono necessari due set di disponibilità,</span><span class="sxs-lookup"><span data-stu-id="c6b78-223">You need two availability sets.</span></span> <span data-ttu-id="c6b78-224">Uno è hello ai controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="c6b78-224">One is for hello domain controllers.</span></span> <span data-ttu-id="c6b78-225">in secondo luogo, Hello è per le macchine virtuali di hello SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-225">hello second is for hello SQL Server VMs.</span></span>

<span data-ttu-id="c6b78-226">toocreate una disponibilità impostato, il gruppo di risorse toohello scegliere **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-226">toocreate an availability set, go toohello resource group and click **Add**.</span></span> <span data-ttu-id="c6b78-227">Filtrare i risultati di hello digitando **set di disponibilità**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-227">Filter hello results by typing **availability set**.</span></span> <span data-ttu-id="c6b78-228">Fare clic su **Set di disponibilità** in hello risultati e quindi fare clic su **crea**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-228">Click **Availability Set** in hello results, and then click **Create**.</span></span>

<span data-ttu-id="c6b78-229">Configurare due set di disponibilità in base a parametri toohello hello nella tabella seguente:</span><span class="sxs-lookup"><span data-stu-id="c6b78-229">Configure two availability sets according toohello parameters in hello following table:</span></span>

| <span data-ttu-id="c6b78-230">**Campo**</span><span class="sxs-lookup"><span data-stu-id="c6b78-230">**Field**</span></span> | <span data-ttu-id="c6b78-231">Set di disponibilità del controller di dominio</span><span class="sxs-lookup"><span data-stu-id="c6b78-231">Domain controller availability set</span></span> | <span data-ttu-id="c6b78-232">Set di disponibilità di SQL Server</span><span class="sxs-lookup"><span data-stu-id="c6b78-232">SQL Server availability set</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c6b78-233">**Nome**</span><span class="sxs-lookup"><span data-stu-id="c6b78-233">**Name**</span></span> |<span data-ttu-id="c6b78-234">adavailabilityset</span><span class="sxs-lookup"><span data-stu-id="c6b78-234">adavailabilityset</span></span> |<span data-ttu-id="c6b78-235">sqlavailabilityset</span><span class="sxs-lookup"><span data-stu-id="c6b78-235">sqlavailabilityset</span></span> |
| <span data-ttu-id="c6b78-236">**Gruppo di risorse**</span><span class="sxs-lookup"><span data-stu-id="c6b78-236">**Resource group**</span></span> |<span data-ttu-id="c6b78-237">Nome gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="c6b78-237">SQL-HA-RG</span></span> |<span data-ttu-id="c6b78-238">Nome gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="c6b78-238">SQL-HA-RG</span></span> |
| <span data-ttu-id="c6b78-239">**Domini di errore**</span><span class="sxs-lookup"><span data-stu-id="c6b78-239">**Fault domains**</span></span> |<span data-ttu-id="c6b78-240">3</span><span class="sxs-lookup"><span data-stu-id="c6b78-240">3</span></span> |<span data-ttu-id="c6b78-241">3</span><span class="sxs-lookup"><span data-stu-id="c6b78-241">3</span></span> |
| <span data-ttu-id="c6b78-242">**Domini di aggiornamento**</span><span class="sxs-lookup"><span data-stu-id="c6b78-242">**Update domains**</span></span> |<span data-ttu-id="c6b78-243">5</span><span class="sxs-lookup"><span data-stu-id="c6b78-243">5</span></span> |<span data-ttu-id="c6b78-244">3</span><span class="sxs-lookup"><span data-stu-id="c6b78-244">3</span></span> |

<span data-ttu-id="c6b78-245">Dopo aver creato il set di disponibilità di hello, restituisce il gruppo di risorse toohello hello portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-245">After you create hello availability sets, return toohello resource group in hello Azure portal.</span></span>

## <a name="create-domain-controllers"></a><span data-ttu-id="c6b78-246">Creare controller di dominio</span><span class="sxs-lookup"><span data-stu-id="c6b78-246">Create domain controllers</span></span>
<span data-ttu-id="c6b78-247">Dopo aver creato rete hello, subnet, set di disponibilità e un servizio di bilanciamento del carico con connessione Internet, è possibile macchine virtuali di hello toocreate pronto per il controller di dominio di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-247">After you've created hello network, subnets, availability sets, and an Internet-facing load balancer, you're ready toocreate hello virtual machines for hello domain controllers.</span></span>

### <a name="create-virtual-machines-for-hello-domain-controllers"></a><span data-ttu-id="c6b78-248">Creare macchine virtuali per hello controller di dominio</span><span class="sxs-lookup"><span data-stu-id="c6b78-248">Create virtual machines for hello domain controllers</span></span>
<span data-ttu-id="c6b78-249">toocreate e configurare il controller di dominio di hello, restituire toohello **SQL a disponibilità elevata-RG** gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="c6b78-249">toocreate and configure hello domain controllers, return toohello **SQL-HA-RG** resource group.</span></span>

1. <span data-ttu-id="c6b78-250">Fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-250">Click **Add**.</span></span> <span data-ttu-id="c6b78-251">Hello **tutto** apre blade.</span><span class="sxs-lookup"><span data-stu-id="c6b78-251">hello **Everything** blade opens.</span></span>
2. <span data-ttu-id="c6b78-252">Digitare **Windows Server 2016 Datacenter**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-252">Type **Windows Server 2016 Datacenter**.</span></span>
3. <span data-ttu-id="c6b78-253">Fare clic su **Windows Server 2016 Datacenter**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-253">Click **Windows Server 2016 Datacenter**.</span></span> <span data-ttu-id="c6b78-254">In hello **Data Center di Windows Server 2016** pannello, verificare che sia il modello di distribuzione hello **Gestione risorse**e quindi fare clic su **crea**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-254">In hello **Windows Server 2016 Datacenter** blade, verify that hello deployment model is **Resource Manager**, and then click **Create**.</span></span> <span data-ttu-id="c6b78-255">Apre Azure hello **crea macchina virtuale** blade.</span><span class="sxs-lookup"><span data-stu-id="c6b78-255">Azure opens hello **Create virtual machine** blade.</span></span>

<span data-ttu-id="c6b78-256">Ripetere hello precedenti passaggi toocreate due macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="c6b78-256">Repeat hello preceding steps toocreate two virtual machines.</span></span> <span data-ttu-id="c6b78-257">Nome hello due macchine virtuali:</span><span class="sxs-lookup"><span data-stu-id="c6b78-257">Name hello two virtual machines:</span></span>

* <span data-ttu-id="c6b78-258">ad-primary-dc</span><span class="sxs-lookup"><span data-stu-id="c6b78-258">ad-primary-dc</span></span>
* <span data-ttu-id="c6b78-259">ad-secondary-dc</span><span class="sxs-lookup"><span data-stu-id="c6b78-259">ad-secondary-dc</span></span>

  > [!NOTE]
  > <span data-ttu-id="c6b78-260">Hello **ad-secondario-dc** macchina virtuale è facoltativa, tooprovide la disponibilità elevata per servizi di dominio Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c6b78-260">hello **ad-secondary-dc** virtual machine is optional, tooprovide high availability for Active Directory Domain Services.</span></span>
  >
  >

<span data-ttu-id="c6b78-261">Hello nella tabella seguente vengono mostrate hello impostazioni per questi due computer:</span><span class="sxs-lookup"><span data-stu-id="c6b78-261">hello following table shows hello settings for these two machines:</span></span>

| <span data-ttu-id="c6b78-262">**Campo**</span><span class="sxs-lookup"><span data-stu-id="c6b78-262">**Field**</span></span> | <span data-ttu-id="c6b78-263">Valore</span><span class="sxs-lookup"><span data-stu-id="c6b78-263">Value</span></span> |
| --- | --- |
| <span data-ttu-id="c6b78-264">**Nome**</span><span class="sxs-lookup"><span data-stu-id="c6b78-264">**Name**</span></span> |<span data-ttu-id="c6b78-265">Primo controller di dominio: *ad-primary-dc*.</span><span class="sxs-lookup"><span data-stu-id="c6b78-265">First domain controller: *ad-primary-dc*.</span></span></br><span data-ttu-id="c6b78-266">Secondo controller di dominio: *ad-secondary-dc*.</span><span class="sxs-lookup"><span data-stu-id="c6b78-266">Second domain controller *ad-secondary-dc*.</span></span> |
| <span data-ttu-id="c6b78-267">**Tipo di disco VM**</span><span class="sxs-lookup"><span data-stu-id="c6b78-267">**VM disk type**</span></span> |<span data-ttu-id="c6b78-268">SSD</span><span class="sxs-lookup"><span data-stu-id="c6b78-268">SSD</span></span> |
| <span data-ttu-id="c6b78-269">**Nome utente**</span><span class="sxs-lookup"><span data-stu-id="c6b78-269">**User name**</span></span> |<span data-ttu-id="c6b78-270">DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="c6b78-270">DomainAdmin</span></span> |
| <span data-ttu-id="c6b78-271">**Password**</span><span class="sxs-lookup"><span data-stu-id="c6b78-271">**Password**</span></span> |<span data-ttu-id="c6b78-272">Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="c6b78-272">Contoso!0000</span></span> |
| <span data-ttu-id="c6b78-273">**Sottoscrizione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-273">**Subscription**</span></span> |<span data-ttu-id="c6b78-274">*Sottoscrizione in uso*</span><span class="sxs-lookup"><span data-stu-id="c6b78-274">*Your subscription*</span></span> |
| <span data-ttu-id="c6b78-275">**Gruppo di risorse**</span><span class="sxs-lookup"><span data-stu-id="c6b78-275">**Resource group**</span></span> |<span data-ttu-id="c6b78-276">Nome gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="c6b78-276">SQL-HA-RG</span></span> |
| <span data-ttu-id="c6b78-277">**Posizione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-277">**Location**</span></span> |<span data-ttu-id="c6b78-278">*Località corrente*</span><span class="sxs-lookup"><span data-stu-id="c6b78-278">*Your location*</span></span> |
| <span data-ttu-id="c6b78-279">**Dimensione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-279">**Size**</span></span> |<span data-ttu-id="c6b78-280">DS1_V2</span><span class="sxs-lookup"><span data-stu-id="c6b78-280">DS1_V2</span></span> |
| <span data-ttu-id="c6b78-281">**Archiviazione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-281">**Storage**</span></span> | <span data-ttu-id="c6b78-282">**Usa dischi gestiti** - **Sì**</span><span class="sxs-lookup"><span data-stu-id="c6b78-282">**Use managed disks** - **Yes**</span></span> |
| <span data-ttu-id="c6b78-283">**Rete virtuale**</span><span class="sxs-lookup"><span data-stu-id="c6b78-283">**Virtual network**</span></span> |<span data-ttu-id="c6b78-284">autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="c6b78-284">autoHAVNET</span></span> |
| <span data-ttu-id="c6b78-285">**Subnet**</span><span class="sxs-lookup"><span data-stu-id="c6b78-285">**Subnet**</span></span> |<span data-ttu-id="c6b78-286">admin</span><span class="sxs-lookup"><span data-stu-id="c6b78-286">admin</span></span> |
| <span data-ttu-id="c6b78-287">**Indirizzo IP pubblico**</span><span class="sxs-lookup"><span data-stu-id="c6b78-287">**Public IP address**</span></span> |<span data-ttu-id="c6b78-288">*Stesso nome hello VM*</span><span class="sxs-lookup"><span data-stu-id="c6b78-288">*Same name as hello VM*</span></span> |
| <span data-ttu-id="c6b78-289">**Gruppo di sicurezza di rete**</span><span class="sxs-lookup"><span data-stu-id="c6b78-289">**Network security group**</span></span> |<span data-ttu-id="c6b78-290">*Stesso nome hello VM*</span><span class="sxs-lookup"><span data-stu-id="c6b78-290">*Same name as hello VM*</span></span> |
| <span data-ttu-id="c6b78-291">**Set di disponibilità**</span><span class="sxs-lookup"><span data-stu-id="c6b78-291">**Availability set**</span></span> |<span data-ttu-id="c6b78-292">adavailabilityset</span><span class="sxs-lookup"><span data-stu-id="c6b78-292">adavailabilityset</span></span> </br><span data-ttu-id="c6b78-293">**Domini di errore**:2</span><span class="sxs-lookup"><span data-stu-id="c6b78-293">**Fault domains**:2</span></span></br><span data-ttu-id="c6b78-294">**Domini di aggiornamento**:2</span><span class="sxs-lookup"><span data-stu-id="c6b78-294">**Update domains**:2</span></span>|
| <span data-ttu-id="c6b78-295">**Diagnostica**</span><span class="sxs-lookup"><span data-stu-id="c6b78-295">**Diagnostics**</span></span> |<span data-ttu-id="c6b78-296">Enabled</span><span class="sxs-lookup"><span data-stu-id="c6b78-296">Enabled</span></span> |
| <span data-ttu-id="c6b78-297">**Account di archiviazione di diagnostica**</span><span class="sxs-lookup"><span data-stu-id="c6b78-297">**Diagnostics storage account**</span></span> |<span data-ttu-id="c6b78-298">*Creato automaticamente*</span><span class="sxs-lookup"><span data-stu-id="c6b78-298">*Automatically created*</span></span> |

   >[!IMPORTANT]
   ><span data-ttu-id="c6b78-299">È possibile inserire una VM in un set di disponibilità solo in fase di creazione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-299">You can only place a VM in an availability set when you create it.</span></span> <span data-ttu-id="c6b78-300">È possibile modificare la disponibilità di hello impostata dopo la creazione di una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6b78-300">You can't change hello availability set after a VM is created.</span></span> <span data-ttu-id="c6b78-301">Vedere [gestione hello disponibilità delle macchine virtuali](../manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="c6b78-301">See [Manage hello availability of virtual machines](../manage-availability.md).</span></span>

<span data-ttu-id="c6b78-302">Azure consente di creare macchine virtuali hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-302">Azure creates hello virtual machines.</span></span>

<span data-ttu-id="c6b78-303">Dopo aver create le macchine virtuali hello, configurare il controller di dominio di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-303">After hello virtual machines are created, configure hello domain controller.</span></span>

### <a name="configure-hello-domain-controller"></a><span data-ttu-id="c6b78-304">Configurare il controller di dominio hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-304">Configure hello domain controller</span></span>
<span data-ttu-id="c6b78-305">In hello i passaggi seguenti, configurare hello **ad-primary-dc** computer come controller di dominio per corp.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="c6b78-305">In hello following steps, configure hello **ad-primary-dc** machine as a domain controller for corp.contoso.com.</span></span>

1. <span data-ttu-id="c6b78-306">Nel portale di hello aprire hello **SQL a disponibilità elevata-RG** gruppo di risorse e seleziona hello **ad-primary-dc** macchina.</span><span class="sxs-lookup"><span data-stu-id="c6b78-306">In hello portal, open hello **SQL-HA-RG** resource group and select hello **ad-primary-dc** machine.</span></span> <span data-ttu-id="c6b78-307">In hello **ad-primary-dc** pannello, fare clic su **Connetti** tooopen un RDP file per l'accesso desktop remoto.</span><span class="sxs-lookup"><span data-stu-id="c6b78-307">On hello **ad-primary-dc** blade, click **Connect** tooopen an RDP file for remote desktop access.</span></span>

    ![Connettere la macchina virtuale di tooa](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/20-connectrdp.png)
2. <span data-ttu-id="c6b78-309">Accedere con l'account amministratore (**\DomainAdmin**) e la password (**Contoso!0000**) configurati.</span><span class="sxs-lookup"><span data-stu-id="c6b78-309">Sign in with your configured administrator account (**\DomainAdmin**) and password (**Contoso!0000**).</span></span>
3. <span data-ttu-id="c6b78-310">Per impostazione predefinita, hello **Server Manager** dashboard deve essere visualizzato.</span><span class="sxs-lookup"><span data-stu-id="c6b78-310">By default, hello **Server Manager** dashboard should be displayed.</span></span>
4. <span data-ttu-id="c6b78-311">Fare clic su hello **Aggiungi ruoli e funzionalità** collegamento nel dashboard di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-311">Click hello **Add roles and features** link on hello dashboard.</span></span>

    ![Server Manager - Aggiungere ruoli](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
5. <span data-ttu-id="c6b78-313">Selezionare **Avanti** fino a ottenere toohello **i ruoli del Server** sezione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-313">Select **Next** until you get toohello **Server Roles** section.</span></span>
6. <span data-ttu-id="c6b78-314">Seleziona hello **servizi di dominio Active Directory** e **Server DNS** ruoli.</span><span class="sxs-lookup"><span data-stu-id="c6b78-314">Select hello **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="c6b78-315">Quando richiesto, aggiungere eventuali funzionalità aggiuntive necessarie per questi ruoli.</span><span class="sxs-lookup"><span data-stu-id="c6b78-315">When you're prompted, add any additional features that are required by these roles.</span></span>

   > [!NOTE]
   > <span data-ttu-id="c6b78-316">Windows visualizza un avviso per indicare che non è presente alcun indirizzo IP statico.</span><span class="sxs-lookup"><span data-stu-id="c6b78-316">Windows warns you that there is no static IP address.</span></span> <span data-ttu-id="c6b78-317">Se si sta testando configurazione hello, fare clic su **continua**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-317">If you're testing hello configuration, click **Continue**.</span></span> <span data-ttu-id="c6b78-318">Per gli scenari di produzione, impostare toostatic indirizzo IP di hello in hello portale di Azure o [utilizzare PowerShell tooset hello indirizzo IP statico del computer controller di dominio hello](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span><span class="sxs-lookup"><span data-stu-id="c6b78-318">For production scenarios, set hello IP address toostatic in hello Azure portal, or [use PowerShell tooset hello static IP address of hello domain controller machine](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
   >
   >

    ![Finestra di dialogo Aggiungi ruoli](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/23-addroles.png)
7. <span data-ttu-id="c6b78-320">Fare clic su **Avanti** fino a raggiungere hello **conferma** sezione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-320">Click **Next** until you reach hello **Confirmation** section.</span></span> <span data-ttu-id="c6b78-321">Seleziona hello **riavvio del server di destinazione hello automaticamente se necessario** casella di controllo.</span><span class="sxs-lookup"><span data-stu-id="c6b78-321">Select hello **Restart hello destination server automatically if required** check box.</span></span>
8. <span data-ttu-id="c6b78-322">Fare clic su **Installa**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-322">Click **Install**.</span></span>
9. <span data-ttu-id="c6b78-323">Dopo funzionalità hello completato l'installazione, restituire toohello **Server Manager** dashboard.</span><span class="sxs-lookup"><span data-stu-id="c6b78-323">After hello features finish installing, return toohello **Server Manager** dashboard.</span></span>
10. <span data-ttu-id="c6b78-324">Seleziona hello nuovo **AD DS** opzione nel riquadro sinistro di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-324">Select hello new **AD DS** option on hello left-hand pane.</span></span>
11. <span data-ttu-id="c6b78-325">Fare clic su hello **più** collegamento sulla barra di avviso gialla hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-325">Click hello **More** link on hello yellow warning bar.</span></span>

    ![Finestra di dialogo di AD DS su hello macchina virtuale di Server DNS](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/24-addsmore.png)
12. <span data-ttu-id="c6b78-327">In hello **azione** colonna di hello **tutti i Server-dettagli attività** finestra di dialogo, fare clic su **alzare di livello questo controller di dominio server tooa**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-327">In hello **Action** column of hello **All Server Task Details** dialog, click **Promote this server tooa domain controller**.</span></span>
13. <span data-ttu-id="c6b78-328">In hello **guidata configurazione di servizi di dominio di Active Directory**, utilizzare hello seguenti valori:</span><span class="sxs-lookup"><span data-stu-id="c6b78-328">In hello **Active Directory Domain Services Configuration Wizard**, use hello following values:</span></span>

    | <span data-ttu-id="c6b78-329">**Page**</span><span class="sxs-lookup"><span data-stu-id="c6b78-329">**Page**</span></span> | <span data-ttu-id="c6b78-330">Impostazione</span><span class="sxs-lookup"><span data-stu-id="c6b78-330">Setting</span></span> |
    | --- | --- |
    | <span data-ttu-id="c6b78-331">**Configurazione distribuzione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-331">**Deployment Configuration**</span></span> |<span data-ttu-id="c6b78-332">**Aggiungi una nuova foresta**</span><span class="sxs-lookup"><span data-stu-id="c6b78-332">**Add a new forest**</span></span><br/> <span data-ttu-id="c6b78-333">**Nome di dominio radice** = corp.contoso.com</span><span class="sxs-lookup"><span data-stu-id="c6b78-333">**Root domain name** = corp.contoso.com</span></span> |
    | <span data-ttu-id="c6b78-334">**Opzioni controller di dominio**</span><span class="sxs-lookup"><span data-stu-id="c6b78-334">**Domain Controller Options**</span></span> |<span data-ttu-id="c6b78-335">**Password DSRM** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="c6b78-335">**DSRM Password** = Contoso!0000</span></span><br/><span data-ttu-id="c6b78-336">**Conferma password** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="c6b78-336">**Confirm Password** = Contoso!0000</span></span> |
14. <span data-ttu-id="c6b78-337">Fare clic su **Avanti** toogo tramite hello altre pagine della procedura guidata hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-337">Click **Next** toogo through hello other pages in hello wizard.</span></span> <span data-ttu-id="c6b78-338">In hello **controllo dei prerequisiti** pagina, verificare che venga visualizzato hello seguente messaggio: **tutti i controlli dei prerequisiti sono riusciti**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-338">On hello **Prerequisites Check** page, verify that you see hello following message: **All prerequisite checks passed successfully**.</span></span> <span data-ttu-id="c6b78-339">È possibile esaminare i messaggi di avviso applicabile, ma è possibile toocontinue con installazione hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-339">You can review any applicable warning messages, but it's possible toocontinue with hello installation.</span></span>
15. <span data-ttu-id="c6b78-340">Fare clic su **Installa**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-340">Click **Install**.</span></span> <span data-ttu-id="c6b78-341">Hello **ad-primary-dc** macchina virtuale verrà riavviata automaticamente.</span><span class="sxs-lookup"><span data-stu-id="c6b78-341">hello **ad-primary-dc** virtual machine automatically reboots.</span></span>

### <a name="note-hello-ip-address-of-hello-primary-domain-controller"></a><span data-ttu-id="c6b78-342">Prendere nota hello di indirizzo IP del controller di dominio primario hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-342">Note hello IP address of hello primary domain controller</span></span>

<span data-ttu-id="c6b78-343">Utilizzare il controller di dominio primario hello per DNS.</span><span class="sxs-lookup"><span data-stu-id="c6b78-343">Use hello primary domain controller for DNS.</span></span> <span data-ttu-id="c6b78-344">Nota l'indirizzo IP del controller di dominio primario hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-344">Note hello primary domain controller IP address.</span></span>

<span data-ttu-id="c6b78-345">Indirizzo IP di un modo tooget hello dominio primario del controller viene eseguita tramite hello portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-345">One way tooget hello primary domain controller IP address is through hello Azure portal.</span></span>

1. <span data-ttu-id="c6b78-346">Nel portale di Azure hello, aprire il gruppo di risorse hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-346">On hello Azure portal, open hello resource group.</span></span>

2. <span data-ttu-id="c6b78-347">Fare clic su controller di dominio primario hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-347">Click hello primary domain controller.</span></span>

3. <span data-ttu-id="c6b78-348">Nel Pannello di controller di dominio primario hello, fare clic su **interfacce di rete**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-348">On hello primary domain controller blade, click **Network interfaces**.</span></span>

![Interfacce di rete](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/25-primarydcip.png)

<span data-ttu-id="c6b78-350">Nota l'indirizzo IP privato hello per questo server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-350">Note hello private IP address for this server.</span></span>

### <a name="configure-hello-virtual-network-dns"></a><span data-ttu-id="c6b78-351">Configurare la rete virtuale hello DNS</span><span class="sxs-lookup"><span data-stu-id="c6b78-351">Configure hello virtual network DNS</span></span>
<span data-ttu-id="c6b78-352">Dopo aver creato il primo controller di dominio hello e abilitare il DNS nel server prima di hello, configurare hello rete virtuale toouse questo server per DNS.</span><span class="sxs-lookup"><span data-stu-id="c6b78-352">After you create hello first domain controller and enable DNS on hello first server, configure hello virtual network toouse this server for DNS.</span></span>

1. <span data-ttu-id="c6b78-353">Nel portale di Azure hello, fare clic su rete virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-353">In hello Azure portal, click on hello virtual network.</span></span>

2. <span data-ttu-id="c6b78-354">In **Impostazioni** fare clic su **Server DNS**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-354">Under **Settings**, click **DNS Server**.</span></span>

3. <span data-ttu-id="c6b78-355">Fare clic su **personalizzata**e digitare l'indirizzo IP privato hello hello primario del controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="c6b78-355">Click **Custom**, and type hello private IP address of hello primary domain controller.</span></span>

4. <span data-ttu-id="c6b78-356">Fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-356">Click **Save**.</span></span>

### <a name="configure-hello-second-domain-controller"></a><span data-ttu-id="c6b78-357">Configurare il secondo controller di dominio hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-357">Configure hello second domain controller</span></span>
<span data-ttu-id="c6b78-358">Dopo il riavvio di controller di dominio primario hello, è possibile configurare il secondo controller di dominio hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-358">After hello primary domain controller reboots, you can configure hello second domain controller.</span></span> <span data-ttu-id="c6b78-359">Questo passaggio facoltativo serve a garantire una disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="c6b78-359">This optional step is for high availability.</span></span> <span data-ttu-id="c6b78-360">Seguire questi passaggi tooconfigure hello secondo controller di dominio:</span><span class="sxs-lookup"><span data-stu-id="c6b78-360">Follow these steps tooconfigure hello second domain controller:</span></span>

1. <span data-ttu-id="c6b78-361">Nel portale di hello aprire hello **SQL a disponibilità elevata-RG** gruppo di risorse e seleziona hello **ad-secondario-dc** macchina.</span><span class="sxs-lookup"><span data-stu-id="c6b78-361">In hello portal, open hello **SQL-HA-RG** resource group and select hello **ad-secondary-dc** machine.</span></span> <span data-ttu-id="c6b78-362">In hello **ad-secondario-dc** pannello, fare clic su **Connetti** tooopen un RDP file per l'accesso desktop remoto.</span><span class="sxs-lookup"><span data-stu-id="c6b78-362">On hello **ad-secondary-dc** blade, click **Connect** tooopen an RDP file for remote desktop access.</span></span>
2. <span data-ttu-id="c6b78-363">Accedi toohello VM utilizzando l'account amministratore configurato (**BUILTIN\DomainAdmin**) e la password (**Contoso! 0000**).</span><span class="sxs-lookup"><span data-stu-id="c6b78-363">Sign in toohello VM by using your configured administrator account (**BUILTIN\DomainAdmin**) and password (**Contoso!0000**).</span></span>
3. <span data-ttu-id="c6b78-364">Modifica hello preferito DNS server toohello indirizzo hello del controller di dominio.</span><span class="sxs-lookup"><span data-stu-id="c6b78-364">Change hello preferred DNS server address toohello address of hello domain controller.</span></span>
4. <span data-ttu-id="c6b78-365">In **centro rete e condivisione**, fare clic su interfaccia di rete hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-365">In **Network and Sharing Center**, click hello network interface.</span></span>
   <span data-ttu-id="c6b78-366">![Interfaccia di rete](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/26-networkinterface.png)</span><span class="sxs-lookup"><span data-stu-id="c6b78-366">![Network interface](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/26-networkinterface.png)</span></span>

5. <span data-ttu-id="c6b78-367">Fare clic su **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-367">Click **Properties**.</span></span>
6. <span data-ttu-id="c6b78-368">Selezionare **Protocollo Internet versione 4 (TCP/IPv4)** e fare clic su **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-368">Select **Internet Protocol Version 4 (TCP/IPv4)** and click **Properties**.</span></span>
7. <span data-ttu-id="c6b78-369">Selezionare **hello utilizzare seguenti indirizzi server DNS** e specificare l'indirizzo di hello del controller di dominio primario hello in **server DNS preferito**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-369">Select **Use hello following DNS server addresses** and specify hello address of hello primary domain controller in **Preferred DNS server**.</span></span>
8. <span data-ttu-id="c6b78-370">Fare clic su **OK**e quindi **Chiudi** modifiche hello toocommit.</span><span class="sxs-lookup"><span data-stu-id="c6b78-370">Click **OK**, and then **Close** toocommit hello changes.</span></span> <span data-ttu-id="c6b78-371">Questo punto si è in grado di toojoin hello VM troppo**corp.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-371">You are now able toojoin hello VM too**corp.contoso.com**.</span></span>

   >[!IMPORTANT]
   ><span data-ttu-id="c6b78-372">Se si perde desktop remoto di hello connessione tooyour dopo la modifica delle impostazioni DNS hello, andare toohello portal e riavviare hello macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-372">If you lose hello connection tooyour remote desktop after changing hello DNS setting, go toohello Azure portal and restart hello virtual machine.</span></span>

9. <span data-ttu-id="c6b78-373">Controller di dominio secondario hello toohello desktop remoto aprire **Dashboard di Server Manager**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-373">From hello remote desktop toohello secondary domain controller, open **Server Manager Dashboard**.</span></span>
10. <span data-ttu-id="c6b78-374">Fare clic su hello **Aggiungi ruoli e funzionalità** collegamento nel dashboard di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-374">Click hello **Add roles and features** link on hello dashboard.</span></span>

    ![Server Manager - Aggiungere ruoli](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
11. <span data-ttu-id="c6b78-376">Selezionare **Avanti** fino a ottenere toohello **i ruoli del Server** sezione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-376">Select **Next** until you get toohello **Server Roles** section.</span></span>
12. <span data-ttu-id="c6b78-377">Seleziona hello **servizi di dominio Active Directory** e **Server DNS** ruoli.</span><span class="sxs-lookup"><span data-stu-id="c6b78-377">Select hello **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="c6b78-378">Quando richiesto, aggiungere eventuali funzionalità aggiuntive necessarie per questi ruoli.</span><span class="sxs-lookup"><span data-stu-id="c6b78-378">When you're prompted, add any additional features that are required by these roles.</span></span>
13. <span data-ttu-id="c6b78-379">Dopo funzionalità hello completato l'installazione, restituire toohello **Server Manager** dashboard.</span><span class="sxs-lookup"><span data-stu-id="c6b78-379">After hello features finish installing, return toohello **Server Manager** dashboard.</span></span>
14. <span data-ttu-id="c6b78-380">Seleziona hello nuovo **AD DS** opzione nel riquadro sinistro di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-380">Select hello new **AD DS** option on hello left-hand pane.</span></span>
15. <span data-ttu-id="c6b78-381">Fare clic su hello **più** collegamento sulla barra di avviso gialla hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-381">Click hello **More** link on hello yellow warning bar.</span></span>
16. <span data-ttu-id="c6b78-382">In hello **azione** colonna di hello **tutti i Server-dettagli attività** finestra di dialogo, fare clic su **alzare di livello questo controller di dominio server tooa**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-382">In hello **Action** column of hello **All Server Task Details** dialog, click **Promote this server tooa domain controller**.</span></span>
17. <span data-ttu-id="c6b78-383">In **configurazione distribuzione**selezionare **aggiungere un controller di dominio tooan esistente dominio**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-383">Under **Deployment Configuration**, select **Add a domain controller tooan existing domain**.</span></span>
   <span data-ttu-id="c6b78-384">![Configurazione distribuzione](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/28-deploymentconfig.png)</span><span class="sxs-lookup"><span data-stu-id="c6b78-384">![Deployment configuration](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/28-deploymentconfig.png)</span></span>
18. <span data-ttu-id="c6b78-385">Fare clic su **Seleziona**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-385">Click **Select**.</span></span>
19. <span data-ttu-id="c6b78-386">Connettersi con un account amministratore hello (**CORP. Contoso.COM\domainadmin**) e la password (**Contoso! 0000**).</span><span class="sxs-lookup"><span data-stu-id="c6b78-386">Connect by using hello administrator account (**CORP.CONTOSO.COM\domainadmin**) and password (**Contoso!0000**).</span></span>
20. <span data-ttu-id="c6b78-387">In **selezionare un dominio dalla foresta hello**, selezionare il dominio e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-387">In **Select a domain from hello forest**, click your domain, and then click **OK**.</span></span>
21. <span data-ttu-id="c6b78-388">In **opzioni Controller di dominio**, utilizzare i valori predefiniti di hello e una password modalità ripristino servizi directory.</span><span class="sxs-lookup"><span data-stu-id="c6b78-388">In **Domain Controller Options**, use hello default values and set a DSRM password.</span></span>

   >[!NOTE]
   ><span data-ttu-id="c6b78-389">Hello **opzioni DNS** pagina potrebbe informare l'utente che non è possibile creare una delega per questo server DNS.</span><span class="sxs-lookup"><span data-stu-id="c6b78-389">hello **DNS Options** page might warn you that a delegation for this DNS server can't be created.</span></span> <span data-ttu-id="c6b78-390">È possibile ignorare questo avviso in ambienti non di produzione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-390">You can ignore this warning in non-production environments.</span></span>
22. <span data-ttu-id="c6b78-391">Fare clic su **Avanti** fino hello nella finestra di dialogo hello **prerequisiti** controllare.</span><span class="sxs-lookup"><span data-stu-id="c6b78-391">Click **Next** until hello dialog reaches hello **Prerequisites** check.</span></span> <span data-ttu-id="c6b78-392">Fare clic su **Installa**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-392">Then click **Install**.</span></span>

<span data-ttu-id="c6b78-393">Dopo aver hello server termina modifiche alla configurazione di hello, riavviare il server hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-393">After hello server finishes hello configuration changes, restart hello server.</span></span>

### <a name="add-hello-private-ip-address-toohello-second-domain-controller-toohello-vpn-dns-server"></a><span data-ttu-id="c6b78-394">Aggiungere l'indirizzo IP privato toohello secondo dominio controller toohello Server DNS VPN hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-394">Add hello Private IP Address toohello second domain controller toohello VPN DNS Server</span></span>

<span data-ttu-id="c6b78-395">Nel portale di Azure in rete virtuale, hello modificare l'indirizzo IP del controller di dominio secondario hello hello Server DNS tooinclude hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-395">In hello Azure portal, under virtual network, change hello DNS Server tooinclude hello IP address of hello secondary domain controller.</span></span> <span data-ttu-id="c6b78-396">In questo modo la ridondanza del servizio DNS di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-396">This allows hello DNS service redundancy.</span></span>

### <span data-ttu-id="c6b78-397"><a name=DomainAccounts></a>Configurare gli account di dominio hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-397"><a name=DomainAccounts></a> Configure hello domain accounts</span></span>

<span data-ttu-id="c6b78-398">Nei passaggi successivi hello, configurare gli account di Active Directory hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-398">In hello next steps, you configure hello Active Directory accounts.</span></span> <span data-ttu-id="c6b78-399">Hello nella tabella seguente mostra gli account hello:</span><span class="sxs-lookup"><span data-stu-id="c6b78-399">hello following table shows hello accounts:</span></span>

| |<span data-ttu-id="c6b78-400">Account di installazione</span><span class="sxs-lookup"><span data-stu-id="c6b78-400">Installation account</span></span><br/> |<span data-ttu-id="c6b78-401">sqlserver-0</span><span class="sxs-lookup"><span data-stu-id="c6b78-401">sqlserver-0</span></span> <br/><span data-ttu-id="c6b78-402">Account del servizio SQL Agent e SQL Server</span><span class="sxs-lookup"><span data-stu-id="c6b78-402">SQL Server and SQL Agent Service account</span></span> |<span data-ttu-id="c6b78-403">sqlserver-1</span><span class="sxs-lookup"><span data-stu-id="c6b78-403">sqlserver-1</span></span><br/><span data-ttu-id="c6b78-404">Account del servizio SQL Agent e SQL Server</span><span class="sxs-lookup"><span data-stu-id="c6b78-404">SQL Server and SQL Agent Service account</span></span>
| --- | --- | --- | ---
|<span data-ttu-id="c6b78-405">**Nome**</span><span class="sxs-lookup"><span data-stu-id="c6b78-405">**First Name**</span></span> |<span data-ttu-id="c6b78-406">Installa</span><span class="sxs-lookup"><span data-stu-id="c6b78-406">Install</span></span> |<span data-ttu-id="c6b78-407">SQLSvc1</span><span class="sxs-lookup"><span data-stu-id="c6b78-407">SQLSvc1</span></span> | <span data-ttu-id="c6b78-408">SQLSvc2</span><span class="sxs-lookup"><span data-stu-id="c6b78-408">SQLSvc2</span></span>
|<span data-ttu-id="c6b78-409">**Utente SamAccountName**</span><span class="sxs-lookup"><span data-stu-id="c6b78-409">**User SamAccountName**</span></span> |<span data-ttu-id="c6b78-410">Installa</span><span class="sxs-lookup"><span data-stu-id="c6b78-410">Install</span></span> |<span data-ttu-id="c6b78-411">SQLSvc1</span><span class="sxs-lookup"><span data-stu-id="c6b78-411">SQLSvc1</span></span> | <span data-ttu-id="c6b78-412">SQLSvc2</span><span class="sxs-lookup"><span data-stu-id="c6b78-412">SQLSvc2</span></span>

<span data-ttu-id="c6b78-413">Questa procedura hello utilizzare toocreate ogni account.</span><span class="sxs-lookup"><span data-stu-id="c6b78-413">Use hello following steps toocreate each account.</span></span>

1. <span data-ttu-id="c6b78-414">Accedi toohello **ad-primary-dc** macchina.</span><span class="sxs-lookup"><span data-stu-id="c6b78-414">Sign in toohello **ad-primary-dc** machine.</span></span>
2. <span data-ttu-id="c6b78-415">In **Server Manager** selezionare **Strumenti** e quindi fare clic su **Centro di amministrazione di Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-415">In **Server Manager**, select **Tools**, and then click **Active Directory Administrative Center**.</span></span>   
3. <span data-ttu-id="c6b78-416">Selezionare **corp (locale)** hello nel riquadro di sinistra.</span><span class="sxs-lookup"><span data-stu-id="c6b78-416">Select **corp (local)** from hello left pane.</span></span>
4. <span data-ttu-id="c6b78-417">In hello destra **attività** riquadro, selezionare **New**, quindi fare clic su **utente**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-417">On hello right **Tasks** pane, select **New**, and then click **User**.</span></span>
   <span data-ttu-id="c6b78-418">![Centro di amministrazione di Active Directory](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/29-addcnewuser.png)</span><span class="sxs-lookup"><span data-stu-id="c6b78-418">![Active Directory Administrative Center](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/29-addcnewuser.png)</span></span>

   >[!TIP]
   ><span data-ttu-id="c6b78-419">Impostare una password complessa per ogni account.</span><span class="sxs-lookup"><span data-stu-id="c6b78-419">Set a complex password for each account.</span></span><br/> <span data-ttu-id="c6b78-420">Per gli ambienti non di produzione, toonever di account utente hello set scadrà.</span><span class="sxs-lookup"><span data-stu-id="c6b78-420">For non-production environments, set hello user account toonever expire.</span></span>

5. <span data-ttu-id="c6b78-421">Fare clic su **OK** utente hello toocreate.</span><span class="sxs-lookup"><span data-stu-id="c6b78-421">Click **OK** toocreate hello user.</span></span>
6. <span data-ttu-id="c6b78-422">Ripetere i passaggi precedenti per ognuno dei tre account hello hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-422">Repeat hello preceding steps for each of hello three accounts.</span></span>

### <a name="grant-hello-required-permissions-toohello-installation-account"></a><span data-ttu-id="c6b78-423">Concedere le autorizzazioni di hello necessario account di installazione toohello</span><span class="sxs-lookup"><span data-stu-id="c6b78-423">Grant hello required permissions toohello installation account</span></span>
1. <span data-ttu-id="c6b78-424">In hello **il centro di amministrazione di Active Directory**selezionare **corp (locale)** nel riquadro di sinistra hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-424">In hello **Active Directory Administrative Center**, select **corp (local)** in hello left pane.</span></span> <span data-ttu-id="c6b78-425">Quindi nella finestra di destra hello **attività** riquadro, fare clic su **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-425">Then in hello right-hand **Tasks** pane, click **Properties**.</span></span>

    ![Proprietà utente CORP](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/31-addcproperties.png)
2. <span data-ttu-id="c6b78-427">Selezionare **estensioni**, quindi fare clic su hello **avanzate** pulsante hello **sicurezza** scheda.</span><span class="sxs-lookup"><span data-stu-id="c6b78-427">Select **Extensions**, and then click hello **Advanced** button on hello **Security** tab.</span></span>
3. <span data-ttu-id="c6b78-428">In hello **impostazioni di sicurezza avanzate per corp** finestra di dialogo, fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-428">In hello **Advanced Security Settings for corp** dialog, click **Add**.</span></span>
4. <span data-ttu-id="c6b78-429">Fare clic su **Seleziona un'entità**, cercare **CORP\Install** e quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-429">Click **Select a principal**, search for **CORP\Install**, and then click **OK**.</span></span>
5. <span data-ttu-id="c6b78-430">Seleziona hello **Leggi tutte le proprietà** casella di controllo.</span><span class="sxs-lookup"><span data-stu-id="c6b78-430">Select hello **Read all properties** check box.</span></span>

6. <span data-ttu-id="c6b78-431">Seleziona hello **crea oggetti Computer** casella di controllo.</span><span class="sxs-lookup"><span data-stu-id="c6b78-431">Select hello **Create Computer objects** check box.</span></span>

     ![Autorizzazioni utente Corp](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/33-addpermissions.png)
7. <span data-ttu-id="c6b78-433">Fare clic su **OK** e quindi di nuovo clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-433">Click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="c6b78-434">Chiude hello **corp** finestra Proprietà.</span><span class="sxs-lookup"><span data-stu-id="c6b78-434">Close hello **corp** properties window.</span></span>

<span data-ttu-id="c6b78-435">Ora che è stata completata la configurazione di Active Directory e gli oggetti utente hello, creare due macchine virtuali di SQL Server e un server di controllo macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6b78-435">Now that you've finished configuring Active Directory and hello user objects, create two SQL Server VMs and a witness server VM.</span></span> <span data-ttu-id="c6b78-436">Aggiungere quindi tutti i tre dominio toohello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-436">Then join all three toohello domain.</span></span>

## <a name="create-sql-server-vms"></a><span data-ttu-id="c6b78-437">Creare le macchine virtuali di SQL Server</span><span class="sxs-lookup"><span data-stu-id="c6b78-437">Create SQL Server VMs</span></span>

<span data-ttu-id="c6b78-438">Creare altre tre macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="c6b78-438">Create three additional virtual machines.</span></span> <span data-ttu-id="c6b78-439">soluzione Hello richiede due macchine virtuali con istanze di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-439">hello solution requires two virtual machines with SQL Server instances.</span></span> <span data-ttu-id="c6b78-440">Una terza macchina virtuale fungerà da controllo.</span><span class="sxs-lookup"><span data-stu-id="c6b78-440">A third virtual machine will function as a witness.</span></span> <span data-ttu-id="c6b78-441">Windows Server 2016 può usare un [cloud di controllo](http://docs.microsoft.com/windows-server/failover-clustering/deploy-cloud-witness); tuttavia, per uniformità con sistemi operativi precedenti, in questo documento si usa una macchina virtuale come controllo.</span><span class="sxs-lookup"><span data-stu-id="c6b78-441">Windows Server 2016 can use a [cloud witness](http://docs.microsoft.com/windows-server/failover-clustering/deploy-cloud-witness), however for consistency with previous operating systems this document uses a virtual machine for a witness.</span></span>  

<span data-ttu-id="c6b78-442">Prima di procedere, è consigliabile hello seguente deisign decisioni.</span><span class="sxs-lookup"><span data-stu-id="c6b78-442">Before you proceed consider hello following deisign decisions.</span></span>

* <span data-ttu-id="c6b78-443">**Archiviazione - Azure Managed Disks**</span><span class="sxs-lookup"><span data-stu-id="c6b78-443">**Storage - Azure Managed Disks**</span></span>

   <span data-ttu-id="c6b78-444">Per l'archiviazione della macchina virtuale hello, utilizzare i dischi gestiti di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-444">For hello virtual machine storage, use Azure Managed Disks.</span></span> <span data-ttu-id="c6b78-445">Microsoft consiglia Managed Disks per le macchine virtuali di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-445">Microsoft recommends Managed Disks for SQL Server virtual machines.</span></span> <span data-ttu-id="c6b78-446">Archivio di handle di dischi in background hello gestito.</span><span class="sxs-lookup"><span data-stu-id="c6b78-446">Managed Disks handles storage behind hello scenes.</span></span> <span data-ttu-id="c6b78-447">Inoltre, quando le macchine virtuali con dischi gestiti sono hello stesso set di disponibilità, Azure distribuisce hello risorse tooprovide appropriato la ridondanza dell'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-447">In addition, when virtual machines with Managed Disks are in hello same availability set, Azure distributes hello storage resources tooprovide appropriate redundancy.</span></span> <span data-ttu-id="c6b78-448">Per altre informazioni, vedere [Panoramica di Azure Managed Disks](../managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c6b78-448">For additional information, see [Azure Managed Disks Overview](../managed-disks-overview.md).</span></span> <span data-ttu-id="c6b78-449">Per informazioni dettagliate sui dischi gestiti in un set di disponibilità, vedere [Usare Managed Disks per le macchine virtuali nel set di disponibilità](../manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="c6b78-449">For specifics about managed disks in an availability set, see [Use Managed Disks for VMs in an availability set](../manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span>

* <span data-ttu-id="c6b78-450">**Rete - Indirizzi IP privati nell'ambiente di produzione**</span><span class="sxs-lookup"><span data-stu-id="c6b78-450">**Network - Private IP addresses in production**</span></span>

   <span data-ttu-id="c6b78-451">Per le macchine virtuali hello, questa esercitazione vengono utilizzati indirizzi IP pubblici.</span><span class="sxs-lookup"><span data-stu-id="c6b78-451">For hello virtual machines, this tutorial uses public IP addresses.</span></span> <span data-ttu-id="c6b78-452">In questo modo di connessione remota direttamente toohello di macchina virtuale tramite hello internet - semplifica i passaggi di configurazione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-452">This enables remote connection directly toohello virtual machine over hello internet - it makes configuration steps easier.</span></span> <span data-ttu-id="c6b78-453">Negli ambienti di produzione è consigliabile solo gli indirizzi IP privati footprint della vulnerabilità hello tooreduce ordine dell'istanza di SQL Server hello risorsa macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="c6b78-453">In production environments, Microsoft recommends only private IP addresses in order tooreduce hello vulnerability footprint of hello SQL Server instance VM resource.</span></span>

### <a name="create-and-configure-hello-sql-server-vms"></a><span data-ttu-id="c6b78-454">Creare e configurare macchine virtuali di hello SQL Server</span><span class="sxs-lookup"><span data-stu-id="c6b78-454">Create and configure hello SQL Server VMs</span></span>
<span data-ttu-id="c6b78-455">Creare successivamente tre VM, tra cui due VM di SQL Server e una VM per un nodo del cluster aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="c6b78-455">Next, create three VMs--two SQL Server VMs and a VM for an additional cluster node.</span></span> <span data-ttu-id="c6b78-456">toocreate delle macchine virtuali di hello, tornare indietro toohello **SQL a disponibilità elevata-RG** gruppo di risorse, fare clic su **Aggiungi**, cercare l'elemento della raccolta appropriato hello, fare clic su **macchina virtuale**e quindi Fare clic su **dalla raccolta**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-456">toocreate each of hello VMs, go back toohello **SQL-HA-RG** resource group, click **Add**, search for hello appropriate gallery item, click **Virtual Machine**, and then click **From Gallery**.</span></span> <span data-ttu-id="c6b78-457">Utilizzare le informazioni di hello nella seguente tabella toohelp è creare macchine virtuali hello hello:</span><span class="sxs-lookup"><span data-stu-id="c6b78-457">Use hello information in hello following table toohelp you create hello VMs:</span></span>


| <span data-ttu-id="c6b78-458">Page</span><span class="sxs-lookup"><span data-stu-id="c6b78-458">Page</span></span> | <span data-ttu-id="c6b78-459">VM1</span><span class="sxs-lookup"><span data-stu-id="c6b78-459">VM1</span></span> | <span data-ttu-id="c6b78-460">VM2</span><span class="sxs-lookup"><span data-stu-id="c6b78-460">VM2</span></span> | <span data-ttu-id="c6b78-461">VM3</span><span class="sxs-lookup"><span data-stu-id="c6b78-461">VM3</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="c6b78-462">Selezionare l'elemento della raccolta appropriato hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-462">Select hello appropriate gallery item</span></span> |<span data-ttu-id="c6b78-463">**Windows Server 2016 Datacenter**</span><span class="sxs-lookup"><span data-stu-id="c6b78-463">**Windows Server 2016 Datacenter**</span></span> |<span data-ttu-id="c6b78-464">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span><span class="sxs-lookup"><span data-stu-id="c6b78-464">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span></span> |<span data-ttu-id="c6b78-465">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span><span class="sxs-lookup"><span data-stu-id="c6b78-465">**SQL Server 2016 SP1 Enterprise on Windows Server 2016**</span></span> |
| <span data-ttu-id="c6b78-466">**Elementi di base**</span><span class="sxs-lookup"><span data-stu-id="c6b78-466">Virtual machine configuration **Basics**</span></span> |<span data-ttu-id="c6b78-467">**Nome** = cluster-fsw</span><span class="sxs-lookup"><span data-stu-id="c6b78-467">**Name** = cluster-fsw</span></span><br/><span data-ttu-id="c6b78-468">**Nome utente** = DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="c6b78-468">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="c6b78-469">**Password** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="c6b78-469">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="c6b78-470">**Sottoscrizione** = sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="c6b78-470">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="c6b78-471">**Gruppo di risorse** = SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="c6b78-471">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="c6b78-472">**Posizione** = posizione di Azure</span><span class="sxs-lookup"><span data-stu-id="c6b78-472">**Location** = Your azure location</span></span> |<span data-ttu-id="c6b78-473">**Nome** = sqlserver-0</span><span class="sxs-lookup"><span data-stu-id="c6b78-473">**Name** = sqlserver-0</span></span><br/><span data-ttu-id="c6b78-474">**Nome utente** = DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="c6b78-474">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="c6b78-475">**Password** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="c6b78-475">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="c6b78-476">**Sottoscrizione** = sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="c6b78-476">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="c6b78-477">**Gruppo di risorse** = SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="c6b78-477">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="c6b78-478">**Posizione** = posizione di Azure</span><span class="sxs-lookup"><span data-stu-id="c6b78-478">**Location** = Your azure location</span></span> |<span data-ttu-id="c6b78-479">**Nome** = sqlserver-1</span><span class="sxs-lookup"><span data-stu-id="c6b78-479">**Name** = sqlserver-1</span></span><br/><span data-ttu-id="c6b78-480">**Nome utente** = DomainAdmin</span><span class="sxs-lookup"><span data-stu-id="c6b78-480">**User Name** = DomainAdmin</span></span><br/><span data-ttu-id="c6b78-481">**Password** = Contoso!0000</span><span class="sxs-lookup"><span data-stu-id="c6b78-481">**Password** = Contoso!0000</span></span><br/><span data-ttu-id="c6b78-482">**Sottoscrizione** = sottoscrizione</span><span class="sxs-lookup"><span data-stu-id="c6b78-482">**Subscription** = Your subscription</span></span><br/><span data-ttu-id="c6b78-483">**Gruppo di risorse** = SQL-HA-RG</span><span class="sxs-lookup"><span data-stu-id="c6b78-483">**Resource group** = SQL-HA-RG</span></span><br/><span data-ttu-id="c6b78-484">**Posizione** = posizione di Azure</span><span class="sxs-lookup"><span data-stu-id="c6b78-484">**Location** = Your azure location</span></span> |
| <span data-ttu-id="c6b78-485">Configurazione della macchina virtuale - **Dimensioni**</span><span class="sxs-lookup"><span data-stu-id="c6b78-485">Virtual machine configuration **Size**</span></span> |<span data-ttu-id="c6b78-486">**DIMENSIONI** = DS1\_V2 (1 memoria centrale, 3,5 GB)</span><span class="sxs-lookup"><span data-stu-id="c6b78-486">**SIZE** = DS1\_V2 (1 core, 3.5 GB)</span></span> |<span data-ttu-id="c6b78-487">**DIMENSIONI** = DS2\_V2 (2 memorie centrali, 7 GB)</span><span class="sxs-lookup"><span data-stu-id="c6b78-487">**SIZE** = DS2\_V2 (2 cores, 7 GB)</span></span></br><span data-ttu-id="c6b78-488">dimensioni Hello devono supportare l'archiviazione sull'unità SSD (supporto per dischi Premium.</span><span class="sxs-lookup"><span data-stu-id="c6b78-488">hello size must support SSD storage (Premium disk support.</span></span> <span data-ttu-id="c6b78-489">))</span><span class="sxs-lookup"><span data-stu-id="c6b78-489">))</span></span> |<span data-ttu-id="c6b78-490">**DIMENSIONI** = DS2\_V2 (2 memorie centrali, 7 GB)</span><span class="sxs-lookup"><span data-stu-id="c6b78-490">**SIZE** = DS2\_V2 (2 cores, 7 GB)</span></span> |
| <span data-ttu-id="c6b78-491">Configurazione della macchina virtuale - **Impostazioni**</span><span class="sxs-lookup"><span data-stu-id="c6b78-491">Virtual machine configuration **Settings**</span></span> |<span data-ttu-id="c6b78-492">**Archiviazione**: Usa dischi gestiti.</span><span class="sxs-lookup"><span data-stu-id="c6b78-492">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="c6b78-493">**Rete virtuale** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="c6b78-493">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="c6b78-494">**Subnet** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="c6b78-494">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="c6b78-495">**Indirizzo IP pubblico** generato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="c6b78-495">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="c6b78-496">**Gruppo di sicurezza di rete** = nessuno</span><span class="sxs-lookup"><span data-stu-id="c6b78-496">**Network security group** = None</span></span><br/><span data-ttu-id="c6b78-497">**Monitoraggio e diagnostica** = abilitato</span><span class="sxs-lookup"><span data-stu-id="c6b78-497">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="c6b78-498">**Account di archiviazione di diagnostica**: usare un account di archiviazione generato automaticamente</span><span class="sxs-lookup"><span data-stu-id="c6b78-498">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="c6b78-499">**Set di disponibilità** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="c6b78-499">**Availability set** = sqlAvailabilitySet</span></span><br/> |<span data-ttu-id="c6b78-500">**Archiviazione**: Usa dischi gestiti.</span><span class="sxs-lookup"><span data-stu-id="c6b78-500">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="c6b78-501">**Rete virtuale** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="c6b78-501">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="c6b78-502">**Subnet** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="c6b78-502">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="c6b78-503">**Indirizzo IP pubblico** generato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="c6b78-503">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="c6b78-504">**Gruppo di sicurezza di rete** = nessuno</span><span class="sxs-lookup"><span data-stu-id="c6b78-504">**Network security group** = None</span></span><br/><span data-ttu-id="c6b78-505">**Monitoraggio e diagnostica** = abilitato</span><span class="sxs-lookup"><span data-stu-id="c6b78-505">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="c6b78-506">**Account di archiviazione di diagnostica**: usare un account di archiviazione generato automaticamente</span><span class="sxs-lookup"><span data-stu-id="c6b78-506">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="c6b78-507">**Set di disponibilità** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="c6b78-507">**Availability set** = sqlAvailabilitySet</span></span><br/> |<span data-ttu-id="c6b78-508">**Archiviazione**: Usa dischi gestiti.</span><span class="sxs-lookup"><span data-stu-id="c6b78-508">**Storage**: Use managed disks.</span></span><br/><span data-ttu-id="c6b78-509">**Rete virtuale** = autoHAVNET</span><span class="sxs-lookup"><span data-stu-id="c6b78-509">**Virtual network** = autoHAVNET</span></span><br/><span data-ttu-id="c6b78-510">**Subnet** = sqlsubnet(10.1.1.0/24)</span><span class="sxs-lookup"><span data-stu-id="c6b78-510">**Subnet** = sqlsubnet(10.1.1.0/24)</span></span><br/><span data-ttu-id="c6b78-511">**Indirizzo IP pubblico** generato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="c6b78-511">**Public IP address** automatically generated.</span></span><br/><span data-ttu-id="c6b78-512">**Gruppo di sicurezza di rete** = nessuno</span><span class="sxs-lookup"><span data-stu-id="c6b78-512">**Network security group** = None</span></span><br/><span data-ttu-id="c6b78-513">**Monitoraggio e diagnostica** = abilitato</span><span class="sxs-lookup"><span data-stu-id="c6b78-513">**Monitoring Diagnostics** = Enabled</span></span><br/><span data-ttu-id="c6b78-514">**Account di archiviazione di diagnostica**: usare un account di archiviazione generato automaticamente</span><span class="sxs-lookup"><span data-stu-id="c6b78-514">**Diagnostics storage account** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="c6b78-515">**Set di disponibilità** = sqlAvailabilitySet</span><span class="sxs-lookup"><span data-stu-id="c6b78-515">**Availability set** = sqlAvailabilitySet</span></span><br/> |
| <span data-ttu-id="c6b78-516">Configurazione della macchina virtuale - **Impostazioni SQL Server**</span><span class="sxs-lookup"><span data-stu-id="c6b78-516">Virtual machine configuration **SQL Server settings**</span></span> |<span data-ttu-id="c6b78-517">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="c6b78-517">Not applicable</span></span> |<span data-ttu-id="c6b78-518">**Connettività SQL** = privata (nella rete virtuale)</span><span class="sxs-lookup"><span data-stu-id="c6b78-518">**SQL connectivity** = Private (within Virtual Network)</span></span><br/><span data-ttu-id="c6b78-519">**Porta** = 1433</span><span class="sxs-lookup"><span data-stu-id="c6b78-519">**Port** = 1433</span></span><br/><span data-ttu-id="c6b78-520">**Autenticazione SQL** = disabilitata</span><span class="sxs-lookup"><span data-stu-id="c6b78-520">**SQL Authentication** = Disable</span></span><br/><span data-ttu-id="c6b78-521">**Configurazione dell'archiviazione** = generale</span><span class="sxs-lookup"><span data-stu-id="c6b78-521">**Storage configuration** = General</span></span><br/><span data-ttu-id="c6b78-522">**Applicazione automatica delle patch** = domenica alle 2:00</span><span class="sxs-lookup"><span data-stu-id="c6b78-522">**Automated patching** = Sunday at 2:00</span></span><br/><span data-ttu-id="c6b78-523">**Backup automatizzato** = disabilitato</span><span class="sxs-lookup"><span data-stu-id="c6b78-523">**Automated backup** = Disabled</span></span></br><span data-ttu-id="c6b78-524">**Integrazione dell'insieme di credenziali delle chiavi di Azure** = Disabilitata</span><span class="sxs-lookup"><span data-stu-id="c6b78-524">**Azure Key Vault integration** = Disabled</span></span> |<span data-ttu-id="c6b78-525">**Connettività SQL** = privata (nella rete virtuale)</span><span class="sxs-lookup"><span data-stu-id="c6b78-525">**SQL connectivity** = Private (within Virtual Network)</span></span><br/><span data-ttu-id="c6b78-526">**Porta** = 1433</span><span class="sxs-lookup"><span data-stu-id="c6b78-526">**Port** = 1433</span></span><br/><span data-ttu-id="c6b78-527">**Autenticazione SQL** = disabilitata</span><span class="sxs-lookup"><span data-stu-id="c6b78-527">**SQL Authentication** = Disable</span></span><br/><span data-ttu-id="c6b78-528">**Configurazione dell'archiviazione** = generale</span><span class="sxs-lookup"><span data-stu-id="c6b78-528">**Storage configuration** = General</span></span><br/><span data-ttu-id="c6b78-529">**Applicazione automatica delle patch** = domenica alle 2:00</span><span class="sxs-lookup"><span data-stu-id="c6b78-529">**Automated patching** = Sunday at 2:00</span></span><br/><span data-ttu-id="c6b78-530">**Backup automatizzato** = disabilitato</span><span class="sxs-lookup"><span data-stu-id="c6b78-530">**Automated backup** = Disabled</span></span></br><span data-ttu-id="c6b78-531">**Integrazione dell'insieme di credenziali delle chiavi di Azure** = Disabilitata</span><span class="sxs-lookup"><span data-stu-id="c6b78-531">**Azure Key Vault integration** = Disabled</span></span> |

<br/>

> [!NOTE]
> <span data-ttu-id="c6b78-532">le dimensioni della macchina Hello qui suggerite sono concepite per il test di gruppi di disponibilità in macchine virtuali di Azure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-532">hello machine sizes suggested here are meant for testing availability groups in Azure VMs.</span></span> <span data-ttu-id="c6b78-533">Per prestazioni ottimali di hello sui carichi di lavoro di produzione, visualizzare le raccomandazioni hello per le dimensioni della macchina SQL Server e la configurazione in [procedure consigliate per SQL Server in macchine virtuali di Azure](virtual-machines-windows-sql-performance.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="c6b78-533">For hello best performance on production workloads, see hello recommendations for SQL Server machine sizes and configuration in [Performance best practices for SQL Server in Azure virtual machines](virtual-machines-windows-sql-performance.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>
>
>

<span data-ttu-id="c6b78-534">Dopo che le macchine virtuali hello tre completamente sono a provisioning, è necessario toojoin li toohello **corp.contoso.com** dominio e concedere le macchine toohello CORP\Install diritti amministrativi.</span><span class="sxs-lookup"><span data-stu-id="c6b78-534">After hello three VMs are fully provisioned, you need toojoin them toohello **corp.contoso.com** domain and grant CORP\Install administrative rights toohello machines.</span></span>

### <span data-ttu-id="c6b78-535"><a name="joinDomain"></a>Dominio hello server toohello</span><span class="sxs-lookup"><span data-stu-id="c6b78-535"><a name="joinDomain"></a>Join hello servers toohello domain</span></span>

<span data-ttu-id="c6b78-536">Si è ora in grado di toojoin hello macchine virtuali troppo**corp.contoso.com**. Esempio hello per le macchine virtuali di hello SQL Server e file hello condivisione di server di controllo:</span><span class="sxs-lookup"><span data-stu-id="c6b78-536">You're now able toojoin hello VMs too**corp.contoso.com**. Do hello following for both hello SQL Server VMs and hello file share witness server:</span></span>

1. <span data-ttu-id="c6b78-537">Connettersi in modalità remota la macchina virtuale con toohello **BUILTIN\DomainAdmin**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-537">Remotely connect toohello virtual machine with **BUILTIN\DomainAdmin**.</span></span>
2. <span data-ttu-id="c6b78-538">In **Server Manager** fare clic su **Server locale**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-538">In **Server Manager**, click **Local Server**.</span></span>
3. <span data-ttu-id="c6b78-539">Fare clic su hello **WORKGROUP** collegamento.</span><span class="sxs-lookup"><span data-stu-id="c6b78-539">Click hello **WORKGROUP** link.</span></span>
4. <span data-ttu-id="c6b78-540">In hello **nome Computer** fare clic su **modifica**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-540">In hello **Computer Name** section, click **Change**.</span></span>
5. <span data-ttu-id="c6b78-541">Seleziona hello **dominio** casella di controllo e il tipo **corp.contoso.com** nella casella di testo hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-541">Select hello **Domain** check box and type **corp.contoso.com** in hello text box.</span></span> <span data-ttu-id="c6b78-542">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-542">Click **OK**.</span></span>
6. <span data-ttu-id="c6b78-543">In hello **la sicurezza di Windows** finestra di dialogo popup, specificare le credenziali di hello per account di amministratore di dominio predefinito hello (**CORP\DomainAdmin**) e la password di hello (**Contoso! 0000**).</span><span class="sxs-lookup"><span data-stu-id="c6b78-543">In hello **Windows Security** popup dialog, specify hello credentials for hello default domain administrator account (**CORP\DomainAdmin**) and hello password (**Contoso!0000**).</span></span>
7. <span data-ttu-id="c6b78-544">Quando viene visualizzato il messaggio "dominio corp.contoso.com toohello iniziale" hello, fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-544">When you see hello "Welcome toohello corp.contoso.com domain" message, click **OK**.</span></span>
8. <span data-ttu-id="c6b78-545">Fare clic su **Chiudi**, quindi fare clic su **Riavvia ora** nella finestra di dialogo popup hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-545">Click **Close**, and then click **Restart Now** in hello popup dialog.</span></span>

### <a name="add-hello-corpinstall-user-as-an-administrator-on-each-cluster-vm"></a><span data-ttu-id="c6b78-546">Aggiungere l'utente Corp\Install hello come amministratore in ogni macchina virtuale del cluster</span><span class="sxs-lookup"><span data-stu-id="c6b78-546">Add hello Corp\Install user as an administrator on each cluster VM</span></span>

<span data-ttu-id="c6b78-547">Dopo il riavvio di ogni macchina virtuale come membro del dominio hello, aggiungere **CORP\Install** come membro del gruppo administrators locale hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-547">After each virtual machine restarts as a member of hello domain, add **CORP\Install** as a member of hello local administrators group.</span></span>

1. <span data-ttu-id="c6b78-548">Attendere fino a quando non viene riavviato hello macchina virtuale, quindi avviare nuovamente da toosign di controller di dominio primario hello in file con estensione RDP hello troppo**sqlserver 0** utilizzando hello **CORP\DomainAdmin** account.</span><span class="sxs-lookup"><span data-stu-id="c6b78-548">Wait until hello VM is restarted, then launch hello RDP file again from hello primary domain controller toosign in too**sqlserver-0** by using hello **CORP\DomainAdmin** account.</span></span>
   >[!TIP]
   ><span data-ttu-id="c6b78-549">Assicurarsi che si accede con l'account amministratore di dominio hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-549">Make sure that you sign in with hello domain administrator account.</span></span> <span data-ttu-id="c6b78-550">Nei passaggi precedenti hello, si utilizzano account di amministratore predefiniti IN hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-550">In hello previous steps, you were using hello BUILT IN administrator account.</span></span> <span data-ttu-id="c6b78-551">Dopo avere hello server dominio hello, utilizzare account di dominio hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-551">Now that hello server is in hello domain, use hello domain account.</span></span> <span data-ttu-id="c6b78-552">Nella sessione RDP specificare *DOMINIO*\\*NOME UTENTE*.</span><span class="sxs-lookup"><span data-stu-id="c6b78-552">In your RDP session, specify *DOMAIN*\\*username*.</span></span>

2. <span data-ttu-id="c6b78-553">In **Server Manager** selezionare **Strumenti**, quindi fare clic su **Gestione computer**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-553">In **Server Manager**, select **Tools**, and then click **Computer Management**.</span></span>
3. <span data-ttu-id="c6b78-554">In hello **Gestione Computer** finestra, espandere **utenti e gruppi locali**, quindi selezionare **gruppi**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-554">In hello **Computer Management** window, expand **Local Users and Groups**, and then select **Groups**.</span></span>
4. <span data-ttu-id="c6b78-555">Fare doppio clic su hello **amministratori** gruppo.</span><span class="sxs-lookup"><span data-stu-id="c6b78-555">Double-click hello **Administrators** group.</span></span>
5. <span data-ttu-id="c6b78-556">In hello **proprietà amministratori** finestra di dialogo, fare clic su hello **Aggiungi** pulsante.</span><span class="sxs-lookup"><span data-stu-id="c6b78-556">In hello **Administrators Properties** dialog, click hello **Add** button.</span></span>
6. <span data-ttu-id="c6b78-557">Immettere nome utente hello **CORP\Install**, quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-557">Enter hello user **CORP\Install**, and then click **OK**.</span></span>
7. <span data-ttu-id="c6b78-558">Fare clic su **OK** tooclose hello **proprietà amministratore** finestra di dialogo.</span><span class="sxs-lookup"><span data-stu-id="c6b78-558">Click **OK** tooclose hello **Administrator Properties** dialog.</span></span>
8. <span data-ttu-id="c6b78-559">Ripetere i passaggi precedenti hello in **sqlserver 1** e **cluster fsw**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-559">Repeat hello previous steps on **sqlserver-1** and **cluster-fsw**.</span></span>

### <span data-ttu-id="c6b78-560"><a name="setServiceAccount"></a>Impostare gli account del servizio SQL Server hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-560"><a name="setServiceAccount"></a>Set hello SQL Server service accounts</span></span>

<span data-ttu-id="c6b78-561">In ogni macchina virtuale di SQL Server, impostare l'account del servizio SQL Server hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-561">On each SQL Server VM, set hello SQL Server service account.</span></span> <span data-ttu-id="c6b78-562">Utilizzare account hello creati quando si [configurato gli account di dominio hello](#DomainAccounts).</span><span class="sxs-lookup"><span data-stu-id="c6b78-562">Use hello accounts that you created when you [configured hello domain accounts](#DomainAccounts).</span></span>

1. <span data-ttu-id="c6b78-563">Aprire **Gestione configurazione SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-563">Open **SQL Server Configuration Manager**.</span></span>
2. <span data-ttu-id="c6b78-564">Fare doppio clic su servizio di SQL Server hello e quindi fare clic su **proprietà**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-564">Right-click hello SQL Server service, and then click **Properties**.</span></span>
3. <span data-ttu-id="c6b78-565">Impostare l'account hello e una password.</span><span class="sxs-lookup"><span data-stu-id="c6b78-565">Set hello account and password.</span></span>
4. <span data-ttu-id="c6b78-566">Ripetere questi passaggi in hello altre VM SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-566">Repeat these steps on hello other SQL Server VM.</span></span>  

<span data-ttu-id="c6b78-567">Per i gruppi di disponibilità di SQL Server, ogni macchina virtuale di SQL Server deve toorun come account di dominio.</span><span class="sxs-lookup"><span data-stu-id="c6b78-567">For SQL Server availability groups, each SQL Server VM needs toorun as a domain account.</span></span>

### <a name="create-a-sign-in-on-each-sql-server-vm-for-hello-installation-account"></a><span data-ttu-id="c6b78-568">Creare un accesso in ogni macchina virtuale di SQL Server per l'account di installazione di hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-568">Create a sign-in on each SQL Server VM for hello installation account</span></span>

<span data-ttu-id="c6b78-569">Utilizzare il gruppo di disponibilità hello hello installazione account (CORP\install) tooconfigure.</span><span class="sxs-lookup"><span data-stu-id="c6b78-569">Use hello installation account (CORP\install) tooconfigure hello availability group.</span></span> <span data-ttu-id="c6b78-570">Questo account deve toobe un membro di hello **sysadmin** ruolo predefinito del server in ogni macchina virtuale di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-570">This account needs toobe a member of hello **sysadmin** fixed server role on each SQL Server VM.</span></span> <span data-ttu-id="c6b78-571">Hello seguenti passaggi necessari per creare un Accedi per account di installazione hello:</span><span class="sxs-lookup"><span data-stu-id="c6b78-571">hello following steps create a sign-in for hello installation account:</span></span>

1. <span data-ttu-id="c6b78-572">Connessione server toohello tramite hello Remote Desktop Protocol (RDP) con hello  *\<MachineName\>\DomainAdmin* account.</span><span class="sxs-lookup"><span data-stu-id="c6b78-572">Connect toohello server through hello Remote Desktop Protocol (RDP) by using hello *\<MachineName\>\DomainAdmin* account.</span></span>

1. <span data-ttu-id="c6b78-573">Aprire SQL Server Management Studio e connettersi toohello istanza locale di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-573">Open SQL Server Management Studio and connect toohello local instance of SQL Server.</span></span>

1. <span data-ttu-id="c6b78-574">In **Esplora oggetti** fare clic su **Sicurezza**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-574">In **Object Explorer**, click **Security**.</span></span>

1. <span data-ttu-id="c6b78-575">Fare clic con il pulsante destro del mouse su **Account di accesso**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-575">Right-click **Logins**.</span></span> <span data-ttu-id="c6b78-576">Fare clic su **Nuovo account di accesso**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-576">Click **New Login**.</span></span>

1. <span data-ttu-id="c6b78-577">In **Account di accesso - Nuovo** fare clic su **Cerca**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-577">In **Login - New**, click **Search**.</span></span>

1. <span data-ttu-id="c6b78-578">Fare clic su **Località**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-578">Click **Locations**.</span></span>

1. <span data-ttu-id="c6b78-579">Immettere le credenziali di rete hello dominio amministratore.</span><span class="sxs-lookup"><span data-stu-id="c6b78-579">Enter hello domain administrator network credentials.</span></span>

1. <span data-ttu-id="c6b78-580">Usare l'account di installazione di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-580">Use hello installation account.</span></span>

1. <span data-ttu-id="c6b78-581">Un membro di hello del set di hello Accedi toobe **sysadmin** ruolo predefinito del server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-581">Set hello sign-in toobe a member of hello **sysadmin** fixed server role.</span></span>

1. <span data-ttu-id="c6b78-582">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-582">Click **OK**.</span></span>

<span data-ttu-id="c6b78-583">Ripetere hello precedenti passaggi in hello altre VM SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-583">Repeat hello preceding steps on hello other SQL Server VM.</span></span>

## <a name="add-failover-clustering-features-tooboth-sql-server-vms"></a><span data-ttu-id="c6b78-584">Aggiungere tooboth di funzionalità Clustering di Failover le macchine virtuali di SQL Server</span><span class="sxs-lookup"><span data-stu-id="c6b78-584">Add Failover Clustering features tooboth SQL Server VMs</span></span>

<span data-ttu-id="c6b78-585">funzionalità di Clustering di Failover tooadd, hello in entrambe le macchine virtuali di SQL Server:</span><span class="sxs-lookup"><span data-stu-id="c6b78-585">tooadd Failover Clustering features, do hello following on both SQL Server VMs:</span></span>

1. <span data-ttu-id="c6b78-586">Connettersi toohello macchina virtuale di SQL Server tramite hello Remote Desktop Protocol (RDP) con hello *CORP\install* account.</span><span class="sxs-lookup"><span data-stu-id="c6b78-586">Connect toohello SQL Server virtual machine through hello Remote Desktop Protocol (RDP) by using hello *CORP\install* account.</span></span> <span data-ttu-id="c6b78-587">Aprire **Server Manager > Dashboard**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-587">Open **Server Manager Dashboard**.</span></span>
2. <span data-ttu-id="c6b78-588">Fare clic su hello **Aggiungi ruoli e funzionalità** collegamento nel dashboard di hello.</span><span class="sxs-lookup"><span data-stu-id="c6b78-588">Click hello **Add roles and features** link on hello dashboard.</span></span>

    ![Server Manager - Aggiungere ruoli](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/22-addfeatures.png)
3. <span data-ttu-id="c6b78-590">Selezionare **Avanti** fino a ottenere toohello **funzionalità Server** sezione.</span><span class="sxs-lookup"><span data-stu-id="c6b78-590">Select **Next** until you get toohello **Server Features** section.</span></span>
4. <span data-ttu-id="c6b78-591">In **Funzionalità** selezionare **Clustering di failover**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-591">In **Features**, select **Failover Clustering**.</span></span>
5. <span data-ttu-id="c6b78-592">Aggiungere le altre funzionalità necessarie.</span><span class="sxs-lookup"><span data-stu-id="c6b78-592">Add any additional required features.</span></span>
6. <span data-ttu-id="c6b78-593">Fare clic su **installare** funzionalità hello tooadd.</span><span class="sxs-lookup"><span data-stu-id="c6b78-593">Click **Install** tooadd hello features.</span></span>

<span data-ttu-id="c6b78-594">Ripetere i passaggi di hello in hello altre VM SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-594">Repeat hello steps on hello other SQL Server VM.</span></span>

## <a name="a-nameendpoint-firewall-configure-hello-firewall-on-each-sql-server-vm"></a><span data-ttu-id="c6b78-595"><a name="endpoint-firewall">Configurare firewall hello in ogni macchina virtuale di SQL Server</span><span class="sxs-lookup"><span data-stu-id="c6b78-595"><a name="endpoint-firewall"> Configure hello firewall on each SQL Server VM</span></span>

<span data-ttu-id="c6b78-596">soluzione Hello richiede hello seguendo le porte TCP toobe aprire nel firewall hello:</span><span class="sxs-lookup"><span data-stu-id="c6b78-596">hello solution requires hello following TCP ports toobe open in hello firewall:</span></span>

- <span data-ttu-id="c6b78-597">**VM di SQL Server**:</span><span class="sxs-lookup"><span data-stu-id="c6b78-597">**SQL Server VM**:</span></span><br/>
   <span data-ttu-id="c6b78-598">Porta 1433 per un'istanza predefinita di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-598">Port 1433 for a default instance of SQL Server.</span></span>
- <span data-ttu-id="c6b78-599">**Probe di Azure Load Balancer:**</span><span class="sxs-lookup"><span data-stu-id="c6b78-599">**Azure load balancer probe:**</span></span><br/>
   <span data-ttu-id="c6b78-600">Qualsiasi porta disponibile.</span><span class="sxs-lookup"><span data-stu-id="c6b78-600">Any available port.</span></span> <span data-ttu-id="c6b78-601">Negli esempi si usa spesso 59999.</span><span class="sxs-lookup"><span data-stu-id="c6b78-601">Examples frequently use 59999.</span></span>
- <span data-ttu-id="c6b78-602">**Endpoint del mirroring del database:**</span><span class="sxs-lookup"><span data-stu-id="c6b78-602">**Database mirroring endpoint:**</span></span> <br/>
   <span data-ttu-id="c6b78-603">Qualsiasi porta disponibile.</span><span class="sxs-lookup"><span data-stu-id="c6b78-603">Any available port.</span></span> <span data-ttu-id="c6b78-604">Negli esempi si usa spesso 5022.</span><span class="sxs-lookup"><span data-stu-id="c6b78-604">Examples frequently use 5022.</span></span>

<span data-ttu-id="c6b78-605">Hello firewall porte esigenza toobe aperti in entrambe le macchine virtuali di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-605">hello firewall ports need toobe open on both SQL Server VMs.</span></span>

<span data-ttu-id="c6b78-606">metodo Hello dell'apertura di porte hello dipende dalla soluzione di firewall hello in uso.</span><span class="sxs-lookup"><span data-stu-id="c6b78-606">hello method of opening hello ports depends on hello firewall solution that you use.</span></span> <span data-ttu-id="c6b78-607">la sezione successiva di Hello spiega come hello tooopen porte in Windows Firewall.</span><span class="sxs-lookup"><span data-stu-id="c6b78-607">hello next section explains how tooopen hello ports in Windows Firewall.</span></span> <span data-ttu-id="c6b78-608">Aprire le porte necessarie hello in ognuna delle macchine virtuali SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-608">Open hello required ports on each of your SQL Server VMs.</span></span>

### <a name="open-a-tcp-port-in-hello-firewall"></a><span data-ttu-id="c6b78-609">Aprire una porta TCP nel firewall hello</span><span class="sxs-lookup"><span data-stu-id="c6b78-609">Open a TCP port in hello firewall</span></span>

1. <span data-ttu-id="c6b78-610">Nel primo Server SQL di hello **avviare** schermata, avviare **Windows Firewall con sicurezza avanzata**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-610">On hello first SQL Server **Start** screen, launch **Windows Firewall with Advanced Security**.</span></span>
2. <span data-ttu-id="c6b78-611">Nel riquadro sinistro di hello selezionare **regole connessioni in entrata**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-611">On hello left pane, select **Inbound Rules**.</span></span> <span data-ttu-id="c6b78-612">Nel riquadro di destra hello, fare clic su **nuova regola**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-612">On hello right pane, click **New Rule**.</span></span>
3. <span data-ttu-id="c6b78-613">Per **Tipo di regola** scegliere **Porta**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-613">For **Rule Type**, choose **Port**.</span></span>
4. <span data-ttu-id="c6b78-614">Per la porta hello, specificare **TCP** e hello tipo appropriato di numeri di porta.</span><span class="sxs-lookup"><span data-stu-id="c6b78-614">For hello port, specify **TCP** and type hello appropriate port numbers.</span></span> <span data-ttu-id="c6b78-615">Vedere hello di esempio seguente:</span><span class="sxs-lookup"><span data-stu-id="c6b78-615">See hello following example:</span></span>

   ![Firewall SQL](./media/virtual-machines-windows-portal-sql-availability-group-tutorial/35-tcpports.png)

5. <span data-ttu-id="c6b78-617">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-617">Click **Next**.</span></span>
6. <span data-ttu-id="c6b78-618">In hello **azione** pagina, mantenere **Consenti connessione hello** selezionata e quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-618">On hello **Action** page, keep **Allow hello connection** selected, and then click **Next**.</span></span>
7. <span data-ttu-id="c6b78-619">In hello **profilo** pagina, accettare le impostazioni predefinite di hello e quindi fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-619">On hello **Profile** page, accept hello default settings, and then click **Next**.</span></span>
8. <span data-ttu-id="c6b78-620">In hello **nome** , specificare un nome di regola (ad esempio **Azure LB Probe**) in hello **nome** casella di testo e quindi fare clic su **fine**.</span><span class="sxs-lookup"><span data-stu-id="c6b78-620">On hello **Name** page, specify a rule name (such as **Azure LB Probe**) in hello **Name** text box, and then click **Finish**.</span></span>

<span data-ttu-id="c6b78-621">Ripetere questi passaggi su hello seconda macchina virtuale di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c6b78-621">Repeat these steps on hello second SQL Server VM.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c6b78-622">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="c6b78-622">Next steps</span></span>

* [<span data-ttu-id="c6b78-623">Creare un gruppo di disponibilità AlwaysOn in Macchine virtuali di Azure</span><span class="sxs-lookup"><span data-stu-id="c6b78-623">Create a SQL Server Always On availability group on Azure virtual machines</span></span>](virtual-machines-windows-portal-sql-availability-group-tutorial.md)
