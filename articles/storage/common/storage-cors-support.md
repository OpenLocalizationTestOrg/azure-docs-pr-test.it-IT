---
title: Supporto di origine aaaCross risorsa condivisione (CORS) | Documenti Microsoft
description: Informazioni su come il supporto CORS tooenable per hello servizi di archiviazione di Microsoft Azure.
services: storage
documentationcenter: .net
author: cbrooksmsft
manager: carmonm
editor: tysonn
ms.assetid: a0229595-5b64-4898-b8d6-fa2625ea6887
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 2/22/2017
ms.author: cbrooks
ms.openlocfilehash: 0a6ec3bf6999c5faa7f0912dc2a47921aa01d3d4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="cross-origin-resource-sharing-cors-support-for-hello-azure-storage-services"></a><span data-ttu-id="39491-103">Supporto di condivisione delle risorse Multiorigine (CORS) per servizi di archiviazione Azure hello</span><span class="sxs-lookup"><span data-stu-id="39491-103">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services</span></span>
<span data-ttu-id="39491-104">A partire dalla versione 2013-08-15, i servizi di archiviazione Azure hello supportano la condivisione delle risorse Multiorigine (CORS) per i servizi Blob, tabella, di accodamento e File hello.</span><span class="sxs-lookup"><span data-stu-id="39491-104">Beginning with version 2013-08-15, hello Azure storage services support Cross-Origin Resource Sharing (CORS) for hello Blob, Table, Queue, and File services.</span></span> <span data-ttu-id="39491-105">Condivisione CORS è una funzionalità HTTP che consente a un'applicazione web in esecuzione risorse di tooaccess in un dominio in un altro dominio.</span><span class="sxs-lookup"><span data-stu-id="39491-105">CORS is an HTTP feature that enables a web application running under one domain tooaccess resources in another domain.</span></span> <span data-ttu-id="39491-106">Browser Web implementano una restrizione di sicurezza nota come [criteri stessa origine](http://www.w3.org/Security/wiki/Same_Origin_Policy) che impedisce a una pagina web da chiamare API in un dominio diverso. Condivisione CORS offre un toocall (dominio di origine hello) di un dominio tooallow in modo sicuro le API in un altro dominio.</span><span class="sxs-lookup"><span data-stu-id="39491-106">Web browsers implement a security restriction known as [same-origin policy](http://www.w3.org/Security/wiki/Same_Origin_Policy) that prevents a web page from calling APIs in a different domain; CORS provides a secure way tooallow one domain (hello origin domain) toocall APIs in another domain.</span></span> <span data-ttu-id="39491-107">Vedere hello [specifica CORS](http://www.w3.org/TR/cors/) per ulteriori dettagli sull'argomento.</span><span class="sxs-lookup"><span data-stu-id="39491-107">See hello [CORS specification](http://www.w3.org/TR/cors/) for details on CORS.</span></span>

<span data-ttu-id="39491-108">È possibile impostare le regole CORS singolarmente per ogni hello servizi di archiviazione, mediante la chiamata [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), e [impostare proprietà del servizio tabelle](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="39491-108">You can set CORS rules individually for each of hello storage services, by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span> <span data-ttu-id="39491-109">Dopo aver impostato le regole CORS hello per servizio hello, una richiesta correttamente autenticata effettuata nel servizio hello da un altro dominio sarà valutata toodetermine se è consentito in base a regole toohello che è stato specificato.</span><span class="sxs-lookup"><span data-stu-id="39491-109">Once you set hello CORS rules for hello service, then a properly authenticated request made against hello service from a different domain will be evaluated toodetermine whether it is allowed according toohello rules you have specified.</span></span>

> [!NOTE]
> <span data-ttu-id="39491-110">CORS non è un meccanismo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="39491-110">Note that CORS is not an authentication mechanism.</span></span> <span data-ttu-id="39491-111">Qualsiasi richiesta eseguita a una risorsa di archiviazione quando è abilitata la condivisione CORS deve disporre di una firma di autenticazione appropriata o deve essere eseguita su una risorsa pubblica.</span><span class="sxs-lookup"><span data-stu-id="39491-111">Any request made against a storage resource when CORS is enabled must either have a proper authentication signature, or must be made against a public resource.</span></span>
> 
> 

## <a name="understanding-cors-requests"></a><span data-ttu-id="39491-112">Informazioni sulle richieste CORS</span><span class="sxs-lookup"><span data-stu-id="39491-112">Understanding CORS requests</span></span>
<span data-ttu-id="39491-113">Una richiesta CORS proveniente da un dominio di origine può essere costituita da due richieste distinte:</span><span class="sxs-lookup"><span data-stu-id="39491-113">A CORS request from an origin domain may consist of two separate requests:</span></span>

* <span data-ttu-id="39491-114">Una richiesta preliminare, che esegue una query sulle restrizioni di condivisione CORS hello imposte dal servizio hello.</span><span class="sxs-lookup"><span data-stu-id="39491-114">A preflight request, which queries hello CORS restrictions imposed by hello service.</span></span> <span data-ttu-id="39491-115">richiesta preliminare Hello è obbligatorio a meno che il metodo di richiesta di hello è un [metodo semplice](http://www.w3.org/TR/cors/), vale a dire GET, HEAD o POST.</span><span class="sxs-lookup"><span data-stu-id="39491-115">hello preflight request is required unless hello request method is a [simple method](http://www.w3.org/TR/cors/), meaning GET, HEAD, or POST.</span></span>
* <span data-ttu-id="39491-116">richiesta effettiva Hello, effettuata hello desiderato di risorse.</span><span class="sxs-lookup"><span data-stu-id="39491-116">hello actual request, made against hello desired resource.</span></span>

### <a name="preflight-request"></a><span data-ttu-id="39491-117">Richiesta preliminare</span><span class="sxs-lookup"><span data-stu-id="39491-117">Preflight request</span></span>
<span data-ttu-id="39491-118">le query di richiesta preliminare Hello hello sulle restrizioni di condivisione CORS definite per il servizio di archiviazione hello dal proprietario dell'account hello.</span><span class="sxs-lookup"><span data-stu-id="39491-118">hello preflight request queries hello CORS restrictions that have been established for hello storage service by hello account owner.</span></span> <span data-ttu-id="39491-119">browser web Hello (o un altro agente utente) invia una richiesta OPTIONS che include intestazioni di richiesta hello, dominio di origine e di metodo.</span><span class="sxs-lookup"><span data-stu-id="39491-119">hello web browser (or other user agent) sends an OPTIONS request that includes hello request headers, method and origin domain.</span></span> <span data-ttu-id="39491-120">il servizio di archiviazione Hello valuta operazione hello previsto in base a un set preconfigurato di regole CORS per specificare i domini di origine, metodi di richiesta e intestazioni di richiesta possono essere specificate in una richiesta effettiva rispetto a una risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="39491-120">hello storage service evaluates hello intended operation based on a pre-configured set of CORS rules that specify which origin domains, request methods, and request headers may be specified on an actual request against a storage resource.</span></span>

<span data-ttu-id="39491-121">Se è abilitata la condivisione CORS per servizio hello ed è presente una regola CORS corrispondente alla richiesta preliminare hello, hello servizio risponde con il codice di stato 200 (OK) e include le intestazioni di controllo di accesso richiesto hello in risposta hello.</span><span class="sxs-lookup"><span data-stu-id="39491-121">If CORS is enabled for hello service and there is a CORS rule that matches hello preflight request, hello service responds with status code 200 (OK), and includes hello required Access-Control headers in hello response.</span></span>

<span data-ttu-id="39491-122">Se non è abilitata la condivisione CORS per servizio hello o alcuna regola CORS corrispondente richiesta preliminare hello, servizio hello risponderà con codice di stato 403 (accesso negato).</span><span class="sxs-lookup"><span data-stu-id="39491-122">If CORS is not enabled for hello service or no CORS rule matches hello preflight request, hello service will respond with status code 403 (Forbidden).</span></span>

<span data-ttu-id="39491-123">Se non contiene richiesta OPTIONS hello hello intestazioni CORS obbligatorie (hello origine e le intestazioni Access-Control-Request-Method), servizio hello risponderà con codice di stato 400 (richiesta non valida).</span><span class="sxs-lookup"><span data-stu-id="39491-123">If hello OPTIONS request doesn't contain hello required CORS headers (hello Origin and Access-Control-Request-Method headers), hello service will respond with status code 400 (Bad request).</span></span>

<span data-ttu-id="39491-124">Si noti che una richiesta preliminare viene valutata rispetto a servizio hello (Blob, coda e tabella) e non rispetto hello la risorsa richiesta.</span><span class="sxs-lookup"><span data-stu-id="39491-124">Note that a preflight request is evaluated against hello service (Blob, Queue, and Table) and not against hello requested resource.</span></span> <span data-ttu-id="39491-125">proprietario dell'account Hello è necessario aver abilitato CORS come parte delle proprietà di hello account del servizio affinché toosucceed richiesta hello.</span><span class="sxs-lookup"><span data-stu-id="39491-125">hello account owner must have enabled CORS as part of hello account service properties in order for hello request toosucceed.</span></span>

### <a name="actual-request"></a><span data-ttu-id="39491-126">Richiesta effettiva</span><span class="sxs-lookup"><span data-stu-id="39491-126">Actual request</span></span>
<span data-ttu-id="39491-127">Quando viene accettata la richiesta preliminare hello, viene restituita la risposta hello browser hello invierà richiesta effettiva di hello nei confronti di risorsa di archiviazione hello.</span><span class="sxs-lookup"><span data-stu-id="39491-127">Once hello preflight request is accepted and hello response is returned, hello browser will dispatch hello actual request against hello storage resource.</span></span> <span data-ttu-id="39491-128">browser Hello rifiuterà la richiesta effettiva hello immediatamente se hello richiesta preliminare viene rifiutata.</span><span class="sxs-lookup"><span data-stu-id="39491-128">hello browser will deny hello actual request immediately if hello preflight request is rejected.</span></span>

<span data-ttu-id="39491-129">la richiesta effettiva Hello viene considerata come una normale richiesta nel servizio di archiviazione hello.</span><span class="sxs-lookup"><span data-stu-id="39491-129">hello actual request is treated as normal request against hello storage service.</span></span> <span data-ttu-id="39491-130">presenza di Hello dell'intestazione di origine hello indica che hello tratta di una richiesta CORS e hello controllerà hello corrispondenti regole CORS.</span><span class="sxs-lookup"><span data-stu-id="39491-130">hello presence of hello Origin header indicates that hello request is a CORS request and hello service will check hello matching CORS rules.</span></span> <span data-ttu-id="39491-131">Se viene trovata una corrispondenza, le intestazioni di hello controllo di accesso vengono aggiunti toohello risposta e inviato client toohello indietro.</span><span class="sxs-lookup"><span data-stu-id="39491-131">If a match is found, hello Access-Control headers are added toohello response and sent back toohello client.</span></span> <span data-ttu-id="39491-132">Se non viene trovata una corrispondenza, le intestazioni Access-Control CORS hello non vengono restituite.</span><span class="sxs-lookup"><span data-stu-id="39491-132">If a match is not found, hello CORS Access-Control headers are not returned.</span></span>

## <a name="enabling-cors-for-hello-azure-storage-services"></a><span data-ttu-id="39491-133">Abilitazione di CORS per servizi di archiviazione di Azure hello</span><span class="sxs-lookup"><span data-stu-id="39491-133">Enabling CORS for hello Azure Storage services</span></span>
<span data-ttu-id="39491-134">Le regole CORS vengono impostate a livello di servizio hello, pertanto è necessario tooenable o si disabilita CORS per ogni servizio (Blob, coda e tabella) separatamente.</span><span class="sxs-lookup"><span data-stu-id="39491-134">CORS rules are set at hello service level, so you need tooenable or disable CORS for each service (Blob, Queue and Table) separately.</span></span> <span data-ttu-id="39491-135">Per impostazione predefinita, la condivisione CORS è disabilitata per ciascun servizio.</span><span class="sxs-lookup"><span data-stu-id="39491-135">By default, CORS is disabled for each service.</span></span> <span data-ttu-id="39491-136">tooenable CORS, è necessario tooset hello servizio appropriato le proprietà utilizzando la versione 2013-08-15 o versioni successive e aggiungere le proprietà del servizio toohello regole CORS.</span><span class="sxs-lookup"><span data-stu-id="39491-136">tooenable CORS, you need tooset hello appropriate service properties using version 2013-08-15 or later, and add CORS rules toohello service properties.</span></span> <span data-ttu-id="39491-137">Per informazioni dettagliate su come tooenable o disabilita CORS per un servizio e come tooset CORS regole, fare riferimento troppo[Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), e [impostata tabella Le proprietà del servizio](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="39491-137">For details about how tooenable or disable CORS for a service and how tooset CORS rules, please refer too[Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span>

<span data-ttu-id="39491-138">Di seguito è riportato un esempio di una regola CORS singola, specificata tramite un'operazione Set Service Properties:</span><span class="sxs-lookup"><span data-stu-id="39491-138">Here is a sample of a single CORS rule, specified via a Set Service Properties operation:</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="39491-139">Ogni elemento incluso nella regola CORS hello è descritta di seguito:</span><span class="sxs-lookup"><span data-stu-id="39491-139">Each element included in hello CORS rule is described below:</span></span>

* <span data-ttu-id="39491-140">**AllowedOrigins**: i domini di origine hello consentiti toomake una richiesta nel servizio di archiviazione hello del servizio tramite CORS.</span><span class="sxs-lookup"><span data-stu-id="39491-140">**AllowedOrigins**: hello origin domains that are permitted toomake a request against hello storage service via CORS.</span></span> <span data-ttu-id="39491-141">dominio di origine Hello è hello dal quale hello origine della richiesta.</span><span class="sxs-lookup"><span data-stu-id="39491-141">hello origin domain is hello domain from which hello request originates.</span></span> <span data-ttu-id="39491-142">Si noti che l'origine hello deve essere una corrispondenza esatta con origine hello che età utente hello invia toohello servizio.</span><span class="sxs-lookup"><span data-stu-id="39491-142">Note that hello origin must be an exact case-sensitive match with hello origin that hello user age sends toohello service.</span></span> <span data-ttu-id="39491-143">È inoltre possibile utilizzare caratteri jolly hello ' *' tooallow tutte le richieste origine toomake domini tramite CORS.</span><span class="sxs-lookup"><span data-stu-id="39491-143">You can also use hello wildcard character '*' tooallow all origin domains toomake requests via CORS.</span></span> <span data-ttu-id="39491-144">Nell'esempio hello sopra, hello domini [http://www.contoso.com](http://www.contoso.com) e [http://www.fabrikam.com](http://www.fabrikam.com) può effettuare richieste nel servizio di hello tramite condivisione CORS.</span><span class="sxs-lookup"><span data-stu-id="39491-144">In hello example above, hello domains [http://www.contoso.com](http://www.contoso.com) and [http://www.fabrikam.com](http://www.fabrikam.com) can make requests against hello service using CORS.</span></span>
* <span data-ttu-id="39491-145">**AllowedMethods**: hello i metodi (verbi di richiesta HTTP) che dominio di origine hello può utilizzare per una richiesta CORS.</span><span class="sxs-lookup"><span data-stu-id="39491-145">**AllowedMethods**: hello methods (HTTP request verbs) that hello origin domain may use for a CORS request.</span></span> <span data-ttu-id="39491-146">Nell'esempio hello sopra, sono consentite solo richieste PUT e GET.</span><span class="sxs-lookup"><span data-stu-id="39491-146">In hello example above, only PUT and GET requests are permitted.</span></span>
* <span data-ttu-id="39491-147">**AllowedHeaders**: le intestazioni di richiesta hello tale dominio di origine hello può specificare nella richiesta CORS hello.</span><span class="sxs-lookup"><span data-stu-id="39491-147">**AllowedHeaders**: hello request headers that hello origin domain may specify on hello CORS request.</span></span> <span data-ttu-id="39491-148">Nell'esempio hello sopra, sono consentite tutte le intestazioni di metadati a partire da x-ms-meta-data, x-ms-meta-destinazione e x-ms-meta-abc.</span><span class="sxs-lookup"><span data-stu-id="39491-148">In hello example above, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="39491-149">Si noti il carattere jolly hello ' *' indica che qualsiasi intestazione che inizi con hello specificato è consentito un prefisso.</span><span class="sxs-lookup"><span data-stu-id="39491-149">Note that hello wildcard character '*' indicates that any header beginning with hello specified prefix is allowed.</span></span>
* <span data-ttu-id="39491-150">**ExposedHeaders**: hello intestazioni di risposta che possono essere inviate nella richiesta di hello risposta toohello CORS ed esposte dall'autorità di certificazione hello browser toohello richiesta.</span><span class="sxs-lookup"><span data-stu-id="39491-150">**ExposedHeaders**: hello response headers that may be sent in hello response toohello CORS request and exposed by hello browser toohello request issuer.</span></span> <span data-ttu-id="39491-151">Nell'esempio riportato in precedenza, il browser hello hello è tooexpose istruzioni riportate qualsiasi intestazione che inizi con x-ms-meta.</span><span class="sxs-lookup"><span data-stu-id="39491-151">In hello example above, hello browser is instructed tooexpose any header beginning with x-ms-meta.</span></span>
* <span data-ttu-id="39491-152">**MaxAgeInSeconds**: hello quantità di tempo massima che un browser deve memorizzare nella cache richiesta OPTIONS preliminare hello.</span><span class="sxs-lookup"><span data-stu-id="39491-152">**MaxAgeInSeconds**: hello maximum amount time that a browser should cache hello preflight OPTIONS request.</span></span>

<span data-ttu-id="39491-153">Hello servizi di archiviazione di Azure supportano la specifica di intestazioni con prefissata per entrambi hello **AllowedHeaders** e **ExposedHeaders** elementi.</span><span class="sxs-lookup"><span data-stu-id="39491-153">hello Azure storage services support specifying prefixed headers for both hello **AllowedHeaders** and **ExposedHeaders** elements.</span></span> <span data-ttu-id="39491-154">tooallow una categoria di intestazioni, è possibile specificare una categoria di toothat prefisso comune.</span><span class="sxs-lookup"><span data-stu-id="39491-154">tooallow a category of headers, you can specify a common prefix toothat category.</span></span> <span data-ttu-id="39491-155">Ad esempio, specificando *x-ms-meta** come intestazione con prefisso, viene impostata una regola corrispondente a tutte le intestazioni che iniziano con x-ms-meta.</span><span class="sxs-lookup"><span data-stu-id="39491-155">For example, specifying *x-ms-meta** as a prefixed header establishes a rule that will match all headers that begin with x-ms-meta.</span></span>

<span data-ttu-id="39491-156">Hello limitazioni seguenti si applica le regole di tooCORS:</span><span class="sxs-lookup"><span data-stu-id="39491-156">hello following limitations apply tooCORS rules:</span></span>

* <span data-ttu-id="39491-157">È possibile specificare di toofive regole CORS per il servizio di archiviazione (Blob, tabelle e code).</span><span class="sxs-lookup"><span data-stu-id="39491-157">You can specify up toofive CORS rules per storage service (Blob, Table, and Queue).</span></span>
* <span data-ttu-id="39491-158">dimensione massima di Hello di tutte le impostazioni delle regole CORS nella richiesta di hello, esclusi i tag XML, non deve superare 2 KB.</span><span class="sxs-lookup"><span data-stu-id="39491-158">hello maximum size of all CORS rules settings on hello request, excluding XML tags, should not exceed 2 KB.</span></span>
* <span data-ttu-id="39491-159">lunghezza Hello di un'intestazione consentita, intestazione esposta o origine consentita non deve superare i 256 caratteri.</span><span class="sxs-lookup"><span data-stu-id="39491-159">hello length of an allowed header, exposed header, or allowed origin should not exceed 256 characters.</span></span>
* <span data-ttu-id="39491-160">Le intestazioni consentite e quelle esposte possono essere:</span><span class="sxs-lookup"><span data-stu-id="39491-160">Allowed headers and exposed headers may be either:</span></span>
  * <span data-ttu-id="39491-161">Intestazioni letterali, dove nome esatto dell'intestazione hello viene specificato, ad esempio **x-ms-meta-processed**.</span><span class="sxs-lookup"><span data-stu-id="39491-161">Literal headers, where hello exact header name is provided, such as **x-ms-meta-processed**.</span></span> <span data-ttu-id="39491-162">Un massimo di 64 intestazioni letterali può essere specificato nella richiesta di hello.</span><span class="sxs-lookup"><span data-stu-id="39491-162">A maximum of 64 literal headers may be specified on hello request.</span></span>
  * <span data-ttu-id="39491-163">Intestazioni con prefisso, in cui un prefisso dell'intestazione hello viene specificato, ad esempio **x-ms-meta-data***.</span><span class="sxs-lookup"><span data-stu-id="39491-163">Prefixed headers, where a prefix of hello header is provided, such as **x-ms-meta-data***.</span></span> <span data-ttu-id="39491-164">Specificando un prefisso in questo modo consente o espone qualsiasi intestazione che inizia con hello prefisso specificato.</span><span class="sxs-lookup"><span data-stu-id="39491-164">Specifying a prefix in this manner allows or exposes any header that begins with hello given prefix.</span></span> <span data-ttu-id="39491-165">Un massimo di due intestazioni con prefisso può essere specificato nella richiesta di hello.</span><span class="sxs-lookup"><span data-stu-id="39491-165">A maximum of two prefixed headers may be specified on hello request.</span></span>
* <span data-ttu-id="39491-166">Hello metodi (o verbi HTTP) specificati in hello **AllowedMethods** toohello metodi supportati dalle API del Servizio archiviazione di Azure devono essere conformi.</span><span class="sxs-lookup"><span data-stu-id="39491-166">hello methods (or HTTP verbs) specified in hello **AllowedMethods** element must conform toohello methods supported by Azure storage service APIs.</span></span> <span data-ttu-id="39491-167">I metodi supportati sono DELETE, GET, HEAD, MERGE, POST, OPTIONS e PUT.</span><span class="sxs-lookup"><span data-stu-id="39491-167">Supported methods are DELETE, GET, HEAD, MERGE, POST, OPTIONS and PUT.</span></span>

## <a name="understanding-cors-rule-evaluation-logic"></a><span data-ttu-id="39491-168">Informazioni sulla logica di valutazione delle regole CORS</span><span class="sxs-lookup"><span data-stu-id="39491-168">Understanding CORS rule evaluation logic</span></span>
<span data-ttu-id="39491-169">Quando un servizio di archiviazione riceve una richiesta preliminare o effettiva, valuta quest'ultima in base alle regole CORS hello definite per il servizio di hello tramite l'operazione Set Service Properties appropriata hello.</span><span class="sxs-lookup"><span data-stu-id="39491-169">When a storage service receives a preflight or actual request, it evaluates that request based on hello CORS rules you have established for hello service via hello appropriate Set Service Properties operation.</span></span> <span data-ttu-id="39491-170">Le regole CORS vengono valutate in ordine di hello in cui sono state impostate nel corpo della richiesta hello di hello operazione Set Service Properties.</span><span class="sxs-lookup"><span data-stu-id="39491-170">CORS rules are evaluated in hello order in which they were set in hello request body of hello Set Service Properties operation.</span></span>

<span data-ttu-id="39491-171">Le regole CORS vengono valutate come segue:</span><span class="sxs-lookup"><span data-stu-id="39491-171">CORS rules are evaluated as follows:</span></span>

1. <span data-ttu-id="39491-172">In primo luogo, il dominio di origine hello della richiesta di hello rispetto a domini hello elencati per hello **AllowedOrigins** elemento.</span><span class="sxs-lookup"><span data-stu-id="39491-172">First, hello origin domain of hello request is checked against hello domains listed for hello **AllowedOrigins** element.</span></span> <span data-ttu-id="39491-173">Se il dominio di origine hello è incluso nell'elenco di hello o tutti i domini sono consentiti con carattere jolly hello ' *', valutazione delle regole prosegue.</span><span class="sxs-lookup"><span data-stu-id="39491-173">If hello origin domain is included in hello list, or all domains are allowed with hello wildcard character '*', then rules evaluation proceeds.</span></span> <span data-ttu-id="39491-174">Se non è incluso il dominio di origine di hello, richiesta di hello ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="39491-174">If hello origin domain is not included, then hello request fails.</span></span>
2. <span data-ttu-id="39491-175">Successivamente, il metodo hello (o verbo HTTP) della richiesta di hello rispetto a metodi di hello in hello **AllowedMethods** elemento.</span><span class="sxs-lookup"><span data-stu-id="39491-175">Next, hello method (or HTTP verb) of hello request is checked against hello methods listed in hello **AllowedMethods** element.</span></span> <span data-ttu-id="39491-176">Se il metodo hello è incluso nell'elenco di hello, valutazione delle regole prosegue; in caso contrario, la richiesta hello avrà esito negativo.</span><span class="sxs-lookup"><span data-stu-id="39491-176">If hello method is included in hello list, then rules evaluation proceeds; if not, then hello request fails.</span></span>
3. <span data-ttu-id="39491-177">Se hello richiesta corrisponde a una regola nel relativo dominio di origine e il relativo metodo, tale regola è richiesta hello tooprocess selezionato e non altre regole vengono valutate.</span><span class="sxs-lookup"><span data-stu-id="39491-177">If hello request matches a rule in its origin domain and its method, that rule is selected tooprocess hello request and no further rules are evaluated.</span></span> <span data-ttu-id="39491-178">Prima di richiesta di hello può avere esito positivo, tuttavia, tutte le intestazioni specificate nella richiesta di hello vengono confrontate con intestazioni hello elencate in hello **AllowedHeaders** elemento.</span><span class="sxs-lookup"><span data-stu-id="39491-178">Before hello request can succeed, however, any headers specified on hello request are checked against hello headers listed in hello **AllowedHeaders** element.</span></span> <span data-ttu-id="39491-179">Se le intestazioni di hello inviate non corrispondono hello le intestazioni autorizzata, richiesta di hello ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="39491-179">If hello headers sent do not match hello allowed headers, hello request fails.</span></span>

<span data-ttu-id="39491-180">Poiché le regole di hello vengono elaborate nell'ordine di hello che sono presenti nel corpo della richiesta hello, è consigliabile specificare le regole più restrittive hello con rispettano tooorigins prima nell'elenco di hello, in modo che vengano valutate per prime.</span><span class="sxs-lookup"><span data-stu-id="39491-180">Since hello rules are processed in hello order they are present in hello request body, best practices recommend that you specify hello most restrictive rules with respect tooorigins first in hello list, so that these are evaluated first.</span></span> <span data-ttu-id="39491-181">Specificare le regole meno restrittive, ad esempio, un tooallow regola tutte le origini, al fine di hello dell'elenco di hello.</span><span class="sxs-lookup"><span data-stu-id="39491-181">Specify rules that are less restrictive – for example, a rule tooallow all origins – at hello end of hello list.</span></span>

### <a name="example--cors-rules-evaluation"></a><span data-ttu-id="39491-182">Esempio: valutazione di regole CORS</span><span class="sxs-lookup"><span data-stu-id="39491-182">Example – CORS rules evaluation</span></span>
<span data-ttu-id="39491-183">Hello esempio seguente viene illustrato un corpo della richiesta parziale per le regole CORS tooset un'operazione per i servizi di archiviazione hello.</span><span class="sxs-lookup"><span data-stu-id="39491-183">hello following example shows a partial request body for an operation tooset CORS rules for hello storage services.</span></span> <span data-ttu-id="39491-184">Vedere [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), e [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx) per informazioni dettagliate sulla costruzione richiesta hello.</span><span class="sxs-lookup"><span data-stu-id="39491-184">See [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx) for details on constructing hello request.</span></span>

```xml
<Cors>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>PUT,HEAD</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>*</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-client-request-id</AllowedHeaders>
    </CorsRule>
</Cors>
```

<span data-ttu-id="39491-185">Successivamente, si consideri hello seguenti richieste CORS:</span><span class="sxs-lookup"><span data-stu-id="39491-185">Next, consider hello following CORS requests:</span></span>

| <span data-ttu-id="39491-186">Richiesta</span><span class="sxs-lookup"><span data-stu-id="39491-186">Request</span></span> |  |  | <span data-ttu-id="39491-187">Response</span><span class="sxs-lookup"><span data-stu-id="39491-187">Response</span></span> |  |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="39491-188">**Metodo**</span><span class="sxs-lookup"><span data-stu-id="39491-188">**Method**</span></span> |<span data-ttu-id="39491-189">**Origine**</span><span class="sxs-lookup"><span data-stu-id="39491-189">**Origin**</span></span> |<span data-ttu-id="39491-190">**Intestazioni della richiesta**</span><span class="sxs-lookup"><span data-stu-id="39491-190">**Request Headers**</span></span> |<span data-ttu-id="39491-191">**Corrispondenza regola**</span><span class="sxs-lookup"><span data-stu-id="39491-191">**Rule Match**</span></span> |<span data-ttu-id="39491-192">**Risultato**</span><span class="sxs-lookup"><span data-stu-id="39491-192">**Result**</span></span> |
| <span data-ttu-id="39491-193">**PUT**</span><span class="sxs-lookup"><span data-stu-id="39491-193">**PUT**</span></span> |<span data-ttu-id="39491-194">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="39491-194">http://www.contoso.com</span></span> |<span data-ttu-id="39491-195">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="39491-195">x-ms-blob-content-type</span></span> |<span data-ttu-id="39491-196">Prima regola</span><span class="sxs-lookup"><span data-stu-id="39491-196">First rule</span></span> |<span data-ttu-id="39491-197">Success</span><span class="sxs-lookup"><span data-stu-id="39491-197">Success</span></span> |
| <span data-ttu-id="39491-198">**GET**</span><span class="sxs-lookup"><span data-stu-id="39491-198">**GET**</span></span> |<span data-ttu-id="39491-199">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="39491-199">http://www.contoso.com</span></span> |<span data-ttu-id="39491-200">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="39491-200">x-ms-blob-content-type</span></span> |<span data-ttu-id="39491-201">Seconda regola</span><span class="sxs-lookup"><span data-stu-id="39491-201">Second rule</span></span> |<span data-ttu-id="39491-202">Success</span><span class="sxs-lookup"><span data-stu-id="39491-202">Success</span></span> |
| <span data-ttu-id="39491-203">**GET**</span><span class="sxs-lookup"><span data-stu-id="39491-203">**GET**</span></span> |<span data-ttu-id="39491-204">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="39491-204">http://www.contoso.com</span></span> |<span data-ttu-id="39491-205">x-ms-client-request-id</span><span class="sxs-lookup"><span data-stu-id="39491-205">x-ms-client-request-id</span></span> |<span data-ttu-id="39491-206">Seconda regola</span><span class="sxs-lookup"><span data-stu-id="39491-206">Second rule</span></span> |<span data-ttu-id="39491-207">Esito negativo</span><span class="sxs-lookup"><span data-stu-id="39491-207">Failure</span></span> |

<span data-ttu-id="39491-208">Hello prima richiesta corrisponde prima regola hello: dominio di origine di hello corrisponde hello le origini consentita, metodo hello corrisponde hello consentito metodi e intestazione hello corrisponde consentito intestazioni: hello e quindi ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="39491-208">hello first request matches hello first rule – hello origin domain matches hello allowed origins, hello method matches hello allowed methods, and hello header matches hello allowed headers – and so succeeds.</span></span>

<span data-ttu-id="39491-209">seconda richiesta Hello non corrisponde prima regola hello metodo hello non corrisponde a hello metodi consentito.</span><span class="sxs-lookup"><span data-stu-id="39491-209">hello second request does not match hello first rule because hello method does not match hello allowed methods.</span></span> <span data-ttu-id="39491-210">Tuttavia, corrisponde seconda regola hello, pertanto ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="39491-210">It does, however, match hello second rule, so it succeeds.</span></span>

<span data-ttu-id="39491-211">Hello terza richiesta corrisponde seconda regola di hello nel relativo dominio di origine e di un metodo, pertanto nessun altre regole vengono valutate.</span><span class="sxs-lookup"><span data-stu-id="39491-211">hello third request matches hello second rule in its origin domain and method, so no further rules are evaluated.</span></span> <span data-ttu-id="39491-212">Tuttavia, hello *intestazione x-ms-client-request-id* non è consentita dalla seconda regola hello, in modo hello richiesta ha esito negativo, nonostante hello che semantica hello della terza regola hello ne avrebbe consentito toosucceed.</span><span class="sxs-lookup"><span data-stu-id="39491-212">However, hello *x-ms-client-request-id header* is not allowed by hello second rule, so hello request fails, despite hello fact that hello semantics of hello third rule would have allowed it toosucceed.</span></span>

> [!NOTE]
> <span data-ttu-id="39491-213">Anche se in questo esempio mostra una regola meno restrittiva prima di una più restrittiva, in genere consigliata hello è regole più restrittive di hello toolist prima.</span><span class="sxs-lookup"><span data-stu-id="39491-213">Although this example shows a less restrictive rule before a more restrictive one, in general hello best practice is toolist hello most restrictive rules first.</span></span>
> 
> 

## <a name="understanding-how-hello-vary-header-is-set"></a><span data-ttu-id="39491-214">Informazioni sulla configurazione intestazione Vary hello</span><span class="sxs-lookup"><span data-stu-id="39491-214">Understanding how hello Vary header is set</span></span>
<span data-ttu-id="39491-215">Hello *Vary* intestazione è un'intestazione HTTP/1.1 standard costituito da un set di campi di intestazione di richiesta che indichino hello browser o all'agente utente sui criteri hello che sono stati selezionati dall'hello server tooprocess hello richiesta.</span><span class="sxs-lookup"><span data-stu-id="39491-215">hello *Vary* header is a standard HTTP/1.1 header consisting of a set of request header fields that advise hello browser or user agent about hello criteria that were selected by hello server tooprocess hello request.</span></span> <span data-ttu-id="39491-216">Hello *Vary* intestazione viene utilizzata principalmente per la memorizzazione nella cache dal proxy, browser e reti CDN, che la impiegano toodetermine come hello risposta deve essere memorizzata nella cache.</span><span class="sxs-lookup"><span data-stu-id="39491-216">hello *Vary* header is mainly used for caching by proxies, browsers, and CDNs, which use it toodetermine how hello response should be cached.</span></span> <span data-ttu-id="39491-217">Per informazioni dettagliate, vedere Specifica hello hello [intestazione Vary](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span><span class="sxs-lookup"><span data-stu-id="39491-217">For details, see hello specification for hello [Vary header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span></span>

<span data-ttu-id="39491-218">Quando il browser hello o un altro agente utente memorizza nella cache la risposta hello da una richiesta CORS, il dominio di origine hello viene memorizzato nella cache come hello origine consentita.</span><span class="sxs-lookup"><span data-stu-id="39491-218">When hello browser or another user agent caches hello response from a CORS request, hello origin domain is cached as hello allowed origin.</span></span> <span data-ttu-id="39491-219">Quando un secondo problemi dominio hello stessa richiesta per una risorsa di archiviazione mentre è attiva cache di hello, agente utente hello recupera il dominio di origine memorizzato nella cache di hello.</span><span class="sxs-lookup"><span data-stu-id="39491-219">When a second domain issues hello same request for a storage resource while hello cache is active, hello user agent retrieves hello cached origin domain.</span></span> <span data-ttu-id="39491-220">dominio di secondo Hello corrisponde dominio memorizzate nella cache di hello, in modo richiesta hello ha esito negativo quando avrebbe potuto essere positivo.</span><span class="sxs-lookup"><span data-stu-id="39491-220">hello second domain does not match hello cached domain, so hello request fails when it would otherwise succeed.</span></span> <span data-ttu-id="39491-221">In alcuni casi, archiviazione di Azure Imposta intestazione Vary hello troppo**origine** tooinstruct hello agente toosend hello successive CORS richiesta toohello servizio utente quando la richiesta di dominio è diverso dall'hello hello memorizzato nella cache di origine.</span><span class="sxs-lookup"><span data-stu-id="39491-221">In certain cases, Azure Storage sets hello Vary header too**Origin** tooinstruct hello user agent toosend hello subsequent CORS request toohello service when hello requesting domain differs from hello cached origin.</span></span>

<span data-ttu-id="39491-222">Archiviazione di Azure imposta hello *Vary* intestazione troppo**origine** per le richieste GET/HEAD effettive in hello seguenti casi:</span><span class="sxs-lookup"><span data-stu-id="39491-222">Azure Storage sets hello *Vary* header too**Origin** for actual GET/HEAD requests in hello following cases:</span></span>

* <span data-ttu-id="39491-223">Quando richiesta hello origine corrisponde esattamente hello consentito origine definito da una regola CORS.</span><span class="sxs-lookup"><span data-stu-id="39491-223">When hello request origin exactly matches hello allowed origin defined by a CORS rule.</span></span> <span data-ttu-id="39491-224">toobe una corrispondenza esatta, regola CORS hello non può includere un carattere jolly ' * ' caratteri.</span><span class="sxs-lookup"><span data-stu-id="39491-224">toobe an exact match, hello CORS rule may not include a wildcard ' * ' character.</span></span>
* <span data-ttu-id="39491-225">Non vi è alcuna origine della richiesta regola hello corrispondente, ma è abilitata la condivisione CORS per il servizio di archiviazione hello.</span><span class="sxs-lookup"><span data-stu-id="39491-225">There is no rule matching hello request origin, but CORS is enabled for hello storage service.</span></span>

<span data-ttu-id="39491-226">In caso di hello in cui una richiesta GET/HEAD corrisponde a una regola CORS che consente tutte le origini, risposta hello indica che sono consentite tutte le origini e cache dell'agente utente hello consentirà le richieste successive da qualsiasi dominio di origine mentre è attiva cache di hello.</span><span class="sxs-lookup"><span data-stu-id="39491-226">In hello case where a GET/HEAD request matches a CORS rule that allows all origins, hello response indicates that all origins are allowed, and hello user agent cache will allow subsequent requests from any origin domain while hello cache is active.</span></span>

<span data-ttu-id="39491-227">Si noti che per le richieste utilizzando metodi diversi da GET/HEAD, i servizi di archiviazione hello non imposterà intestazione Vary hello, poiché i metodi toothese risposte non memorizzate nella cache per gli agenti utente.</span><span class="sxs-lookup"><span data-stu-id="39491-227">Note that for requests using methods other than GET/HEAD, hello storage services will not set hello Vary header, since responses toothese methods are not cached by user agents.</span></span>

<span data-ttu-id="39491-228">Nella tabella seguente Hello indica come Azure storage risponderà richieste tooGET/HEAD in base hello precedentemente menzionato casi:</span><span class="sxs-lookup"><span data-stu-id="39491-228">hello following table indicates how Azure storage will respond tooGET/HEAD requests based on hello previously mentioned cases:</span></span>

| <span data-ttu-id="39491-229">Richiesta</span><span class="sxs-lookup"><span data-stu-id="39491-229">Request</span></span> | <span data-ttu-id="39491-230">Impostazione account e risultato della valutazione della regola</span><span class="sxs-lookup"><span data-stu-id="39491-230">Account setting and result of rule evaluation</span></span> |  |  | <span data-ttu-id="39491-231">Response</span><span class="sxs-lookup"><span data-stu-id="39491-231">Response</span></span> |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="39491-232">**Intestazione di origine presente sulla richiesta**</span><span class="sxs-lookup"><span data-stu-id="39491-232">**Origin header present on request**</span></span> |<span data-ttu-id="39491-233">**Regole CORS specificate per questo servizio**</span><span class="sxs-lookup"><span data-stu-id="39491-233">**CORS rule(s) specified for this service**</span></span> |<span data-ttu-id="39491-234">**Presenza di una regola di corrispondenza che consente tutte le origini (*)**</span><span class="sxs-lookup"><span data-stu-id="39491-234">**Matching rule exists that allows all origins(*)**</span></span> |<span data-ttu-id="39491-235">**Presenza di una regola per l'esatta corrispondenza dell'origine**</span><span class="sxs-lookup"><span data-stu-id="39491-235">**Matching rule exists for exact origin match**</span></span> |<span data-ttu-id="39491-236">**Risposta include tooOrigin set di intestazione Vary**</span><span class="sxs-lookup"><span data-stu-id="39491-236">**Response includes Vary header set tooOrigin**</span></span> |<span data-ttu-id="39491-237">**Risposta che include Access-Control-Allowed-Origin: "*"**</span><span class="sxs-lookup"><span data-stu-id="39491-237">**Response includes Access-Control-Allowed-Origin: "*"**</span></span> |<span data-ttu-id="39491-238">**Risposta che include Access-Control-Exposed-Headers**</span><span class="sxs-lookup"><span data-stu-id="39491-238">**Response includes Access-Control-Exposed-Headers**</span></span> |
| <span data-ttu-id="39491-239">No</span><span class="sxs-lookup"><span data-stu-id="39491-239">No</span></span> |<span data-ttu-id="39491-240">No</span><span class="sxs-lookup"><span data-stu-id="39491-240">No</span></span> |<span data-ttu-id="39491-241">No</span><span class="sxs-lookup"><span data-stu-id="39491-241">No</span></span> |<span data-ttu-id="39491-242">No</span><span class="sxs-lookup"><span data-stu-id="39491-242">No</span></span> |<span data-ttu-id="39491-243">No</span><span class="sxs-lookup"><span data-stu-id="39491-243">No</span></span> |<span data-ttu-id="39491-244">No</span><span class="sxs-lookup"><span data-stu-id="39491-244">No</span></span> |<span data-ttu-id="39491-245">No</span><span class="sxs-lookup"><span data-stu-id="39491-245">No</span></span> |
| <span data-ttu-id="39491-246">No</span><span class="sxs-lookup"><span data-stu-id="39491-246">No</span></span> |<span data-ttu-id="39491-247">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-247">Yes</span></span> |<span data-ttu-id="39491-248">No</span><span class="sxs-lookup"><span data-stu-id="39491-248">No</span></span> |<span data-ttu-id="39491-249">No</span><span class="sxs-lookup"><span data-stu-id="39491-249">No</span></span> |<span data-ttu-id="39491-250">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-250">Yes</span></span> |<span data-ttu-id="39491-251">No</span><span class="sxs-lookup"><span data-stu-id="39491-251">No</span></span> |<span data-ttu-id="39491-252">No</span><span class="sxs-lookup"><span data-stu-id="39491-252">No</span></span> |
| <span data-ttu-id="39491-253">No</span><span class="sxs-lookup"><span data-stu-id="39491-253">No</span></span> |<span data-ttu-id="39491-254">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-254">Yes</span></span> |<span data-ttu-id="39491-255">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-255">Yes</span></span> |<span data-ttu-id="39491-256">No</span><span class="sxs-lookup"><span data-stu-id="39491-256">No</span></span> |<span data-ttu-id="39491-257">No</span><span class="sxs-lookup"><span data-stu-id="39491-257">No</span></span> |<span data-ttu-id="39491-258">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-258">Yes</span></span> |<span data-ttu-id="39491-259">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-259">Yes</span></span> |
| <span data-ttu-id="39491-260">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-260">Yes</span></span> |<span data-ttu-id="39491-261">No</span><span class="sxs-lookup"><span data-stu-id="39491-261">No</span></span> |<span data-ttu-id="39491-262">No</span><span class="sxs-lookup"><span data-stu-id="39491-262">No</span></span> |<span data-ttu-id="39491-263">No</span><span class="sxs-lookup"><span data-stu-id="39491-263">No</span></span> |<span data-ttu-id="39491-264">No</span><span class="sxs-lookup"><span data-stu-id="39491-264">No</span></span> |<span data-ttu-id="39491-265">No</span><span class="sxs-lookup"><span data-stu-id="39491-265">No</span></span> |<span data-ttu-id="39491-266">No</span><span class="sxs-lookup"><span data-stu-id="39491-266">No</span></span> |
| <span data-ttu-id="39491-267">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-267">Yes</span></span> |<span data-ttu-id="39491-268">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-268">Yes</span></span> |<span data-ttu-id="39491-269">No</span><span class="sxs-lookup"><span data-stu-id="39491-269">No</span></span> |<span data-ttu-id="39491-270">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-270">Yes</span></span> |<span data-ttu-id="39491-271">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-271">Yes</span></span> |<span data-ttu-id="39491-272">No</span><span class="sxs-lookup"><span data-stu-id="39491-272">No</span></span> |<span data-ttu-id="39491-273">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-273">Yes</span></span> |
| <span data-ttu-id="39491-274">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-274">Yes</span></span> |<span data-ttu-id="39491-275">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-275">Yes</span></span> |<span data-ttu-id="39491-276">No</span><span class="sxs-lookup"><span data-stu-id="39491-276">No</span></span> |<span data-ttu-id="39491-277">No</span><span class="sxs-lookup"><span data-stu-id="39491-277">No</span></span> |<span data-ttu-id="39491-278">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-278">Yes</span></span> |<span data-ttu-id="39491-279">No</span><span class="sxs-lookup"><span data-stu-id="39491-279">No</span></span> |<span data-ttu-id="39491-280">No</span><span class="sxs-lookup"><span data-stu-id="39491-280">No</span></span> |
| <span data-ttu-id="39491-281">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-281">Yes</span></span> |<span data-ttu-id="39491-282">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-282">Yes</span></span> |<span data-ttu-id="39491-283">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-283">Yes</span></span> |<span data-ttu-id="39491-284">No</span><span class="sxs-lookup"><span data-stu-id="39491-284">No</span></span> |<span data-ttu-id="39491-285">No</span><span class="sxs-lookup"><span data-stu-id="39491-285">No</span></span> |<span data-ttu-id="39491-286">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-286">Yes</span></span> |<span data-ttu-id="39491-287">Sì</span><span class="sxs-lookup"><span data-stu-id="39491-287">Yes</span></span> |

## <a name="billing-for-cors-requests"></a><span data-ttu-id="39491-288">Fatturazione per le richieste CORS</span><span class="sxs-lookup"><span data-stu-id="39491-288">Billing for CORS requests</span></span>
<span data-ttu-id="39491-289">Preliminari con esito positivo delle richieste vengono fatturati se è stata abilitata la condivisione CORS per hello servizi di archiviazione per l'account (chiamando [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), o [ Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx)).</span><span class="sxs-lookup"><span data-stu-id="39491-289">Successful preflight requests are billed if you have enabled CORS for any of hello storage services for your account (by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), or [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx)).</span></span> <span data-ttu-id="39491-290">gli addebiti toominimize, provare a impostare hello **MaxAgeInSeconds** elemento CORS regole tooa valori di grandi dimensioni in modo che hello agente utente memorizza nella cache richiesta hello.</span><span class="sxs-lookup"><span data-stu-id="39491-290">toominimize charges, consider setting hello **MaxAgeInSeconds** element in your CORS rules tooa large value so that hello user agent caches hello request.</span></span>

<span data-ttu-id="39491-291">Le richieste preliminari con esito negativo non verranno fatturate.</span><span class="sxs-lookup"><span data-stu-id="39491-291">Unsuccessful preflight requests will not be billed.</span></span>

## <a name="next-steps"></a><span data-ttu-id="39491-292">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="39491-292">Next steps</span></span>
[<span data-ttu-id="39491-293">Set Blob Service Properties</span><span class="sxs-lookup"><span data-stu-id="39491-293">Set Blob Service Properties</span></span>](https://msdn.microsoft.com/library/hh452235.aspx)

[<span data-ttu-id="39491-294">Set Queue Service Properties</span><span class="sxs-lookup"><span data-stu-id="39491-294">Set Queue Service Properties</span></span>](https://msdn.microsoft.com/library/hh452232.aspx)

[<span data-ttu-id="39491-295">Set Table Service Properties</span><span class="sxs-lookup"><span data-stu-id="39491-295">Set Table Service Properties</span></span>](https://msdn.microsoft.com/library/hh452240.aspx)

[<span data-ttu-id="39491-296">Specifica del W3C relativa alla condivisione delle risorse multiorigine (CORS)</span><span class="sxs-lookup"><span data-stu-id="39491-296">W3C Cross-Origin Resource Sharing Specification</span></span>](http://www.w3.org/TR/cors/)

