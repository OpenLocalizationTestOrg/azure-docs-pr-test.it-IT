---
title: Servizio Cache gestita applicazioni tooRedis - Azure aaaMigrate | Documenti Microsoft
description: Informazioni su come toomigrate servizio Cache gestita e Cache nel ruolo di applicazioni tooAzure Cache Redis
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 041f077b-8c8e-4d7c-a3fc-89d334ed70d6
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 05/30/2017
ms.author: sdanie
ms.openlocfilehash: bd81722820acf0d2637828fbb6100c723aafeba5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-from-managed-cache-service-tooazure-redis-cache"></a><span data-ttu-id="51280-103">Eseguire la migrazione da servizio Cache gestita tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="51280-103">Migrate from Managed Cache Service tooAzure Redis Cache</span></span>
<span data-ttu-id="51280-104">La migrazione delle applicazioni che utilizzano tooAzure servizio Cache gestita di Azure Redis Cache può essere eseguita con applicazione tooyour modifiche minime, a seconda delle funzionalità del servizio Cache gestito di hello utilizzati dall'applicazione di memorizzazione nella cache.</span><span class="sxs-lookup"><span data-stu-id="51280-104">Migrating your applications that use Azure Managed Cache Service tooAzure Redis Cache can be accomplished with minimal changes tooyour application, depending on hello Managed Cache Service features used by your caching application.</span></span> <span data-ttu-id="51280-105">Hello API non sono esattamente hello stesso sono simili, mentre la maggior parte del codice esistente che utilizza tooaccess servizio Cache gestita una cache può essere riutilizzata con modifiche minime.</span><span class="sxs-lookup"><span data-stu-id="51280-105">While hello APIs are not exactly hello same they are similar, and much of your existing code that uses Managed Cache Service tooaccess a cache can be reused with minimal changes.</span></span> <span data-ttu-id="51280-106">In questo argomento viene illustrato come applicazione e configurazione necessarie di hello toomake cambia toomigrate toouse di applicazioni del servizio Cache gestita Cache Redis di Azure e viene illustrato come alcune delle funzionalità di hello di Cache Redis di Azure può essere utilizzato tooimplement hello funzionalità di una cache del servizio Cache gestita.</span><span class="sxs-lookup"><span data-stu-id="51280-106">This topic shows how toomake hello necessary configuration and application changes toomigrate your Managed Cache Service applications toouse Azure Redis Cache, and shows how some of hello features of Azure Redis Cache can be used tooimplement hello functionality of a Managed Cache Service cache.</span></span>

>[!NOTE]
><span data-ttu-id="51280-107">Servizio cache gestita e Cache nel ruolo sono stati [ritirati](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) il 30 novembre 2016.</span><span class="sxs-lookup"><span data-stu-id="51280-107">Managed Cache Service and In-Role Cache were [retired](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) November 30, 2016.</span></span> <span data-ttu-id="51280-108">Se si dispone di tutte le distribuzioni di Cache nel ruolo che si desidera toomigrate tooAzure Cache Redis, è possibile seguire i passaggi di hello in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="51280-108">If you have any In-Role Cache deployments that you want toomigrate tooAzure Redis Cache, you can follow hello steps in this article.</span></span>

## <a name="migration-steps"></a><span data-ttu-id="51280-109">Passaggi della migrazione</span><span class="sxs-lookup"><span data-stu-id="51280-109">Migration Steps</span></span>
<span data-ttu-id="51280-110">Hello seguendo i passaggi è necessari toomigrate un toouse di applicazione del servizio Cache gestito Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="51280-110">hello following steps are required toomigrate a Managed Cache Service application toouse Azure Redis Cache.</span></span>

* <span data-ttu-id="51280-111">Eseguire il mapping del servizio Cache gestito funzionalità tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="51280-111">Map Managed Cache Service features tooAzure Redis Cache</span></span>
* <span data-ttu-id="51280-112">Scegliere un'offerta per il servizio cache</span><span class="sxs-lookup"><span data-stu-id="51280-112">Choose a Cache Offering</span></span>
* <span data-ttu-id="51280-113">Creare una cache</span><span class="sxs-lookup"><span data-stu-id="51280-113">Create a Cache</span></span>
* <span data-ttu-id="51280-114">Configurare i client della Cache di hello</span><span class="sxs-lookup"><span data-stu-id="51280-114">Configure hello Cache Clients</span></span>
  * <span data-ttu-id="51280-115">Rimuovere hello configurazione del servizio Cache gestito</span><span class="sxs-lookup"><span data-stu-id="51280-115">Remove hello Managed Cache Service Configuration</span></span>
  * <span data-ttu-id="51280-116">Configurare un client della cache mediante hello pacchetto NuGet stackexchange. Redis</span><span class="sxs-lookup"><span data-stu-id="51280-116">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
* <span data-ttu-id="51280-117">Eseguire la migrazione del codice del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="51280-117">Migrate Managed Cache Service code</span></span>
  * <span data-ttu-id="51280-118">La connessione della cache toohello utilizzando classe ConnectionMultiplexer hello</span><span class="sxs-lookup"><span data-stu-id="51280-118">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
  * <span data-ttu-id="51280-119">Tipi di dati primitivi di accesso nella cache di hello</span><span class="sxs-lookup"><span data-stu-id="51280-119">Access primitive data types in hello cache</span></span>
  * <span data-ttu-id="51280-120">Utilizzo di oggetti .NET nella cache di hello</span><span class="sxs-lookup"><span data-stu-id="51280-120">Work with .NET objects in hello cache</span></span>
* <span data-ttu-id="51280-121">Eseguire la migrazione di stato della sessione ASP.NET e la memorizzazione nella cache tooAzure Redis Cache di Output</span><span class="sxs-lookup"><span data-stu-id="51280-121">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span> 

## <a name="map-managed-cache-service-features-tooazure-redis-cache"></a><span data-ttu-id="51280-122">Eseguire il mapping del servizio Cache gestito funzionalità tooAzure Cache Redis</span><span class="sxs-lookup"><span data-stu-id="51280-122">Map Managed Cache Service features tooAzure Redis Cache</span></span>
<span data-ttu-id="51280-123">Il Servizio cache gestita di Azure e la Cache Redis di Azure sono simili, ma implementano alcune funzionalità in modi diversi.</span><span class="sxs-lookup"><span data-stu-id="51280-123">Azure Managed Cache Service and Azure Redis Cache are similar but implement some of their features in different ways.</span></span> <span data-ttu-id="51280-124">In questa sezione vengono descritte alcune delle differenze di hello e vengono fornite informazioni aggiuntive sull'implementazione della funzionalità di hello del servizio Cache gestita in Cache Redis di Azure.</span><span class="sxs-lookup"><span data-stu-id="51280-124">This section describes some of hello differences and provides guidance on implementing hello features of Managed Cache Service in Azure Redis Cache.</span></span>

| <span data-ttu-id="51280-125">Funzionalità del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="51280-125">Managed Cache Service feature</span></span> | <span data-ttu-id="51280-126">Supporto del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="51280-126">Managed Cache Service support</span></span> | <span data-ttu-id="51280-127">Supporto della Cache Redis di Azure</span><span class="sxs-lookup"><span data-stu-id="51280-127">Azure Redis Cache support</span></span> |
| --- | --- | --- |
| <span data-ttu-id="51280-128">Cache denominate</span><span class="sxs-lookup"><span data-stu-id="51280-128">Named caches</span></span> |<span data-ttu-id="51280-129">La cache predefinita è configurata e in hello Standard e Premium offerte di cache, backup toonine altre cache denominate possono essere configurate se si desidera.</span><span class="sxs-lookup"><span data-stu-id="51280-129">A default cache is configured, and in hello Standard and Premium cache offerings, up toonine additional named caches can be configured if desired.</span></span> |<span data-ttu-id="51280-130">Cache Redis di Azure dispone di un numero configurabile di database (valore predefinito è 16) che possono essere utilizzati tooimplement memorizza nella cache un toonamed funzionalità simili.</span><span class="sxs-lookup"><span data-stu-id="51280-130">Azure Redis caches have a configurable number of databases (default of 16) that can be used tooimplement a similar functionality toonamed caches.</span></span> <span data-ttu-id="51280-131">Per altre informazioni, vedere [Informazioni sui database Redis](cache-faq.md#what-are-redis-databases) e [Configurazione predefinita del server Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="51280-131">For more information, see [What are Redis databases?](cache-faq.md#what-are-redis-databases) and [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="51280-132">Disponibilità elevata</span><span class="sxs-lookup"><span data-stu-id="51280-132">High Availability</span></span> |<span data-ttu-id="51280-133">Fornisce la disponibilità elevata per gli elementi nella cache di hello nelle offerte di cache Standard e Premium hello.</span><span class="sxs-lookup"><span data-stu-id="51280-133">Provides high availability for items in hello cache in hello Standard and Premium cache offerings.</span></span> <span data-ttu-id="51280-134">Se gli elementi vengono persi a causa di un errore tooa, le copie di backup di elementi di hello nella cache di hello sono ancora disponibili.</span><span class="sxs-lookup"><span data-stu-id="51280-134">If items are lost due tooa failure, backup copies of hello items in hello cache are still available.</span></span> <span data-ttu-id="51280-135">Scrive la cache secondaria toohello vengono eseguite in modo sincrono.</span><span class="sxs-lookup"><span data-stu-id="51280-135">Writes toohello secondary cache are made synchronously.</span></span> |<span data-ttu-id="51280-136">Disponibilità elevata è disponibile in hello Standard e Premium offerte di cache, che dispongono di una configurazione principale/Replica due nodi (ogni partizione in una cache Premium ha una coppia di principale/replica).</span><span class="sxs-lookup"><span data-stu-id="51280-136">High availability is available in hello Standard and Premium cache offerings, which have a two node Primary/Replica configuration (each shard in a Premium cache has a primary/replica pair).</span></span> <span data-ttu-id="51280-137">Replica toohello operazioni di scrittura vengono eseguite in modo asincrono.</span><span class="sxs-lookup"><span data-stu-id="51280-137">Writes toohello replica are made asynchronously.</span></span> <span data-ttu-id="51280-138">Per altre informazioni, vedere [Prezzi di Cache Redis di Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="51280-138">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> |
| <span data-ttu-id="51280-139">Notifiche</span><span class="sxs-lookup"><span data-stu-id="51280-139">Notifications</span></span> |<span data-ttu-id="51280-140">Consente ai client tooreceive le notifiche asincrone quando un'ampia gamma di operazioni della cache si verificano in una cache denominata.</span><span class="sxs-lookup"><span data-stu-id="51280-140">Allows clients tooreceive asynchronous notifications when a variety of cache operations occur on a named cache.</span></span> |<span data-ttu-id="51280-141">Applicazioni client possono utilizzare Redis pub/sub o [le notifiche di spazio delle chiavi](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve un toonotifications funzionalità simili.</span><span class="sxs-lookup"><span data-stu-id="51280-141">Client applications can use Redis pub/sub or [Keyspace notifications](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve a similar functionality toonotifications.</span></span> |
| <span data-ttu-id="51280-142">Cache locale</span><span class="sxs-lookup"><span data-stu-id="51280-142">Local cache</span></span> |<span data-ttu-id="51280-143">Archivia una copia di oggetti memorizzati nella cache in locale sul client hello per un accesso molto veloce.</span><span class="sxs-lookup"><span data-stu-id="51280-143">Stores a copy of cached objects locally on hello client for extra-fast access.</span></span> |<span data-ttu-id="51280-144">Applicazioni client dovrebbero essere tooimplement questa funzionalità usando un dizionario o una simile struttura dei dati.</span><span class="sxs-lookup"><span data-stu-id="51280-144">Client applications would need tooimplement this functionality using a dictionary or similar data structure.</span></span> |
| <span data-ttu-id="51280-145">Criteri di rimozione</span><span class="sxs-lookup"><span data-stu-id="51280-145">Eviction Policy</span></span> |<span data-ttu-id="51280-146">Nessuno o utilizzati meno di recente (LRU).</span><span class="sxs-lookup"><span data-stu-id="51280-146">None or LRU.</span></span> <span data-ttu-id="51280-147">criteri predefiniti Hello sono LRU.</span><span class="sxs-lookup"><span data-stu-id="51280-147">hello default policy is LRU.</span></span> |<span data-ttu-id="51280-148">Cache Redis di Azure supporta i seguenti criteri di eliminazione hello: volatile-lru, allkeys-lru, volatile-casuali, allkeys casuale volatile-durata (TTL), noeviction.</span><span class="sxs-lookup"><span data-stu-id="51280-148">Azure Redis Cache supports hello following eviction policies: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span></span> <span data-ttu-id="51280-149">criteri predefiniti Hello sono volatile-lru.</span><span class="sxs-lookup"><span data-stu-id="51280-149">hello default policy is volatile-lru.</span></span> <span data-ttu-id="51280-150">Per altre informazioni, vedere [Configurazione predefinita del server Redis](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="51280-150">For more information, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="51280-151">Criteri di scadenza</span><span class="sxs-lookup"><span data-stu-id="51280-151">Expiration Policy</span></span> |<span data-ttu-id="51280-152">il criterio di scadenza predefinito Hello è assoluto e intervallo di scadenza predefinita hello è dieci minuti.</span><span class="sxs-lookup"><span data-stu-id="51280-152">hello default expiration policy is Absolute and hello default expiration interval is ten minutes.</span></span> <span data-ttu-id="51280-153">Sono disponibili anche i criteri Scorrevole e Mai.</span><span class="sxs-lookup"><span data-stu-id="51280-153">Sliding and Never policies are also available.</span></span> |<span data-ttu-id="51280-154">Per impostazione predefinita gli elementi nella cache di hello non scadono, ma una data di scadenza può essere configurata in base a ogni scrittura usando gli overload di set di cache.</span><span class="sxs-lookup"><span data-stu-id="51280-154">By default items in hello cache do not expire, but an expiration can be configured on a per write basis using cache set overloads.</span></span> <span data-ttu-id="51280-155">Per ulteriori informazioni, vedere [aggiungere e recuperare oggetti dalla cache di hello](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span><span class="sxs-lookup"><span data-stu-id="51280-155">For more information, see [Add and retrieve objects from hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span></span> |
| <span data-ttu-id="51280-156">Aree e aggiunta di tag</span><span class="sxs-lookup"><span data-stu-id="51280-156">Regions and Tagging</span></span> |<span data-ttu-id="51280-157">Le aree sono sottogruppi degli elementi memorizzati nella cache.</span><span class="sxs-lookup"><span data-stu-id="51280-157">Regions are subgroups for cached items.</span></span> <span data-ttu-id="51280-158">Le aree supportano anche l'annotazione di hello degli elementi della cache con stringhe descrittive aggiuntive denominate tag.</span><span class="sxs-lookup"><span data-stu-id="51280-158">Regions also support hello annotation of cached items with additional descriptive strings called tags.</span></span> <span data-ttu-id="51280-159">Le aree supportano operazioni di ricerca di hello possibilità tooperform sugli elementi con tag in tale area.</span><span class="sxs-lookup"><span data-stu-id="51280-159">Regions support hello ability tooperform search operations on any tagged items in that region.</span></span> <span data-ttu-id="51280-160">Tutti gli elementi all'interno di un'area si trovano all'interno di un singolo nodo del cluster di cache di hello.</span><span class="sxs-lookup"><span data-stu-id="51280-160">All items within a region are located within a single node of hello cache cluster.</span></span> |<span data-ttu-id="51280-161">Una cache Redis costituito da un singolo nodo (a meno che non è stato abilitato cluster Redis) in modo hello concetto di aree del servizio Cache gestito non è applicabile.</span><span class="sxs-lookup"><span data-stu-id="51280-161">A Redis cache consists of a single node (unless Redis cluster is enabled) so hello concept of Managed Cache Service regions does not apply.</span></span> <span data-ttu-id="51280-162">Redis supporta la ricerca e operazioni con caratteri jolly durante il recupero delle chiavi in modo che tag descrittivi può essere incorporato all'interno dei nomi chiave hello e utilizzati in un secondo momento gli elementi di hello tooretrieve.</span><span class="sxs-lookup"><span data-stu-id="51280-162">Redis supports searching and wildcard operations when retrieving keys so descriptive tags can be embedded within hello key names and used tooretrieve hello items later.</span></span> <span data-ttu-id="51280-163">Per un esempio di implementazione di una soluzione di aggiunta di tag con Redis, vedere la pagina relativa all' [implementazione dell'aggiunta di tag della cache con Redis](http://stackify.com/implementing-cache-tagging-redis/).</span><span class="sxs-lookup"><span data-stu-id="51280-163">For an example of implementing a tagging solution using Redis, see [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/).</span></span> |
| <span data-ttu-id="51280-164">Serializzazione</span><span class="sxs-lookup"><span data-stu-id="51280-164">Serialization</span></span> |<span data-ttu-id="51280-165">Cache gestita supporta NetDataContractSerializer, BinaryFormatter e utilizzo di hello di serializzatori personalizzati.</span><span class="sxs-lookup"><span data-stu-id="51280-165">Managed Cache supports NetDataContractSerializer, BinaryFormatter, and hello use of custom serializers.</span></span> <span data-ttu-id="51280-166">Hello predefinito è NetDataContractSerializer.</span><span class="sxs-lookup"><span data-stu-id="51280-166">hello default is NetDataContractSerializer.</span></span> |<span data-ttu-id="51280-167">È responsabilità di hello hello oggetti del client dell'applicazione tooserialize .NET prima di inserirli nella cache di hello, con la scelta hello del serializzatore hello backup toohello sviluppatore dell'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="51280-167">It is hello responsibility of hello client application tooserialize .NET objects before placing them into hello cache, with hello choice of hello serializer up toohello client application developer.</span></span> <span data-ttu-id="51280-168">Per ulteriori informazioni e codice di esempio, vedere [funziona con oggetti .NET nella cache di hello](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="51280-168">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span> |
| <span data-ttu-id="51280-169">Emulatore di cache</span><span class="sxs-lookup"><span data-stu-id="51280-169">Cache emulator</span></span> |<span data-ttu-id="51280-170">Il servizio Cache gestita offre un emulatore di cache locale.</span><span class="sxs-lookup"><span data-stu-id="51280-170">Managed Cache provides a local cache emulator.</span></span> |<span data-ttu-id="51280-171">Cache Redis di Azure non dispone di un emulatore, ma è possibile [eseguito localmente compilazione MSOpenTech hello di redis server.exe](cache-faq.md#cache-emulator) tooprovide un'esperienza di emulatore.</span><span class="sxs-lookup"><span data-stu-id="51280-171">Azure Redis Cache does not have an emulator, but you can [run hello MSOpenTech build of redis-server.exe locally](cache-faq.md#cache-emulator) tooprovide an emulator experience.</span></span> |

## <a name="choose-a-cache-offering"></a><span data-ttu-id="51280-172">Scegliere un'offerta per il servizio cache</span><span class="sxs-lookup"><span data-stu-id="51280-172">Choose a Cache Offering</span></span>
<span data-ttu-id="51280-173">Cache Redis di Microsoft Azure è disponibile in hello livelli seguenti:</span><span class="sxs-lookup"><span data-stu-id="51280-173">Microsoft Azure Redis Cache is available in hello following tiers:</span></span>

* <span data-ttu-id="51280-174">**Basic**: singolo nodo.</span><span class="sxs-lookup"><span data-stu-id="51280-174">**Basic** – Single node.</span></span> <span data-ttu-id="51280-175">Più dimensioni too53 GB.</span><span class="sxs-lookup"><span data-stu-id="51280-175">Multiple sizes up too53 GB.</span></span>
* <span data-ttu-id="51280-176">**Standard**: principale/replica a due nodi.</span><span class="sxs-lookup"><span data-stu-id="51280-176">**Standard** – Two-node Primary/Replica.</span></span> <span data-ttu-id="51280-177">Più dimensioni too53 GB.</span><span class="sxs-lookup"><span data-stu-id="51280-177">Multiple sizes up too53 GB.</span></span> <span data-ttu-id="51280-178">Contratti di servizio del 99,9%.</span><span class="sxs-lookup"><span data-stu-id="51280-178">99.9% SLA.</span></span>
* <span data-ttu-id="51280-179">**Premium** : due nodi primario/Replica con backup too10 partizioni.</span><span class="sxs-lookup"><span data-stu-id="51280-179">**Premium** – Two-node Primary/Replica with up too10 shards.</span></span> <span data-ttu-id="51280-180">Più dimensioni che vanno da 6 GB too530 GB.</span><span class="sxs-lookup"><span data-stu-id="51280-180">Multiple sizes from 6 GB too530 GB.</span></span> <span data-ttu-id="51280-181">Supporto per tutte le funzionalità del piano Standard e altre, tra cui [cluster Redis](cache-how-to-premium-clustering.md), [persistenza Redis](cache-how-to-premium-persistence.md) e [Rete virtuale di Azure](cache-how-to-premium-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="51280-181">All Standard tier features and more including support for [Redis cluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md), and [Azure Virtual Network](cache-how-to-premium-vnet.md).</span></span> <span data-ttu-id="51280-182">Contratti di servizio del 99,9%.</span><span class="sxs-lookup"><span data-stu-id="51280-182">99.9% SLA.</span></span>

<span data-ttu-id="51280-183">Ogni livello presenta differenze in termini di funzionalità e prezzi.</span><span class="sxs-lookup"><span data-stu-id="51280-183">Each tier differs in terms of features and pricing.</span></span> <span data-ttu-id="51280-184">Hello funzionalità sono illustrate più avanti in questa Guida e per ulteriori informazioni sui prezzi, vedere [dettagli prezzi di Cache](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="51280-184">hello features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details](https://azure.microsoft.com/pricing/details/cache/).</span></span>

<span data-ttu-id="51280-185">Un punto di partenza per la migrazione è toopick hello dimensione che corrisponde alle dimensioni della cache del servizio Cache gestito precedente hello e quindi aumentare o diminuire a seconda dei requisiti di hello dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="51280-185">A starting point for migration is toopick hello size that matches hello size of your previous Managed Cache Service cache, and then scale up or down depending on hello requirements of your application.</span></span> <span data-ttu-id="51280-186">Per ulteriori informazioni sulla scelta hello destra offerta di Cache Redis di Azure, vedere [quali offerta di Cache Redis e dimensioni è consigliabile usare?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span><span class="sxs-lookup"><span data-stu-id="51280-186">For more guidance on choosing hello right Azure Redis Cache offering, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span></span>

## <a name="create-a-cache"></a><span data-ttu-id="51280-187">Creare una cache</span><span class="sxs-lookup"><span data-stu-id="51280-187">Create a Cache</span></span>
[!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]

## <a name="configure-hello-cache-clients"></a><span data-ttu-id="51280-188">Configurare i client della Cache di hello</span><span class="sxs-lookup"><span data-stu-id="51280-188">Configure hello Cache Clients</span></span>
<span data-ttu-id="51280-189">Dopo aver creato e configurata cache di hello, configurazione del servizio Cache gestito di hello tooremove passaggio successivo hello e aggiungere hello aggiungere i riferimenti e configurazione di Cache Redis di Azure di hello in modo che i client della cache possono accedere alle cache di hello.</span><span class="sxs-lookup"><span data-stu-id="51280-189">Once hello cache is created and configured, hello next step is tooremove hello Managed Cache Service configuration, and add hello add hello Azure Redis Cache configuration and references so that cache clients can access hello cache.</span></span>

* <span data-ttu-id="51280-190">Rimuovere hello configurazione del servizio Cache gestito</span><span class="sxs-lookup"><span data-stu-id="51280-190">Remove hello Managed Cache Service Configuration</span></span>
* <span data-ttu-id="51280-191">Configurare un client della cache mediante hello pacchetto NuGet stackexchange. Redis</span><span class="sxs-lookup"><span data-stu-id="51280-191">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>

### <a name="remove-hello-managed-cache-service-configuration"></a><span data-ttu-id="51280-192">Rimuovere hello configurazione del servizio Cache gestito</span><span class="sxs-lookup"><span data-stu-id="51280-192">Remove hello Managed Cache Service Configuration</span></span>
<span data-ttu-id="51280-193">Prima di hello applicazioni client possono essere configurate per Cache Redis di Azure, configurazione del servizio Cache gestito esistente hello e riferimenti all'assembly deve essere rimossa mediante disinstallazione del pacchetto NuGet del servizio Cache gestito di hello.</span><span class="sxs-lookup"><span data-stu-id="51280-193">Before hello client applications can be configured for Azure Redis Cache, hello existing Managed Cache Service configuration and assembly references must be removed by uninstalling hello Managed Cache Service NuGet package.</span></span>

<span data-ttu-id="51280-194">hello toouninstall pacchetto NuGet del servizio Cache gestito, fare doppio clic su progetto client hello in **Esplora** e scegliere **Gestisci pacchetti NuGet**.</span><span class="sxs-lookup"><span data-stu-id="51280-194">toouninstall hello Managed Cache Service NuGet package, right-click hello client project in **Solution Explorer** and choose **Manage NuGet Packages**.</span></span> <span data-ttu-id="51280-195">Seleziona hello **i pacchetti installati** nodo e tipo W**indowsAzure.Caching** in hello Cerca in casella pacchetti installati.</span><span class="sxs-lookup"><span data-stu-id="51280-195">Select hello **Installed packages** node, and type W**indowsAzure.Caching** into hello Search installed packages box.</span></span> <span data-ttu-id="51280-196">Selezionare **Windows** **Cache di Azure** (o **Windows** **la memorizzazione nella cache di Azure** a seconda della versione di hello del pacchetto NuGet hello), fare clic su  **Disinstallare**, quindi fare clic su **Chiudi**.</span><span class="sxs-lookup"><span data-stu-id="51280-196">Select **Windows** **Azure Cache** (or **Windows** **Azure Caching** depending on hello version of hello NuGet package), click **Uninstall**, and then click **Close**.</span></span>

![Disinstallare il pacchetto NuGet del Servizio cache gestita di Azure](./media/cache-migrate-to-redis/IC757666.jpg)

<span data-ttu-id="51280-198">Pacchetto NuGet del servizio Cache gestito di hello disinstallazione rimuove gli assembly del servizio Cache gestito di hello e le voci del servizio Cache gestito di hello hello file app. config o Web. config dell'applicazione client hello.</span><span class="sxs-lookup"><span data-stu-id="51280-198">Uninstalling hello Managed Cache Service NuGet package removes hello Managed Cache Service assemblies and hello Managed Cache Service entries in hello app.config or web.config of hello client application.</span></span> <span data-ttu-id="51280-199">Poiché alcune impostazioni personalizzate non possono essere rimossi quando si disinstalla il pacchetto NuGet di hello, aprire Web. config o App. config e verificare che hello segue gli elementi vengono completamente rimossi.</span><span class="sxs-lookup"><span data-stu-id="51280-199">Because some customized settings may not be removed when uninstalling hello NuGet package, open web.config or app.config and ensure that hello following elements are completely removed.</span></span>

<span data-ttu-id="51280-200">Verificare che hello `dataCacheClients` voce viene rimossa dal hello `configSections` elemento.</span><span class="sxs-lookup"><span data-stu-id="51280-200">Ensure that hello `dataCacheClients` entry is removed from hello `configSections` element.</span></span> <span data-ttu-id="51280-201">Non rimuovere hello intero `configSections` elemento; solo remove hello `dataCacheClients` voce, se presente.</span><span class="sxs-lookup"><span data-stu-id="51280-201">Do not remove hello entire `configSections` element; just remove hello `dataCacheClients` entry, if it is present.</span></span>

```xml
<configSections>
  <!-- Existing sections omitted for clarity. -->
  <section name="dataCacheClients"type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
</configSections>
```

<span data-ttu-id="51280-202">Verificare che hello `dataCacheClients` sezione è stata rimossa.</span><span class="sxs-lookup"><span data-stu-id="51280-202">Ensure that hello `dataCacheClients` section is removed.</span></span> <span data-ttu-id="51280-203">Hello `dataCacheClients` sezione sarà simile toohello esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="51280-203">hello `dataCacheClients` section will be similar toohello following example.</span></span>

```xml
<dataCacheClients>
  <dataCacheClientname="default">
    <!--toouse hello in-role flavor of Azure Cache, set identifier toobe hello cache cluster role name -->
    <!--toouse hello Azure Managed Cache Service, set identifier toobe hello endpoint of hello cache cluster -->
    <autoDiscoverisEnabled="true"identifier="[Cache role name or Service Endpoint]"/>

    <!--<localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" />-->
    <!--Use this section toospecify security settings for connecting tooyour cache. This section is not required if your cache is hosted on a role that is a part of your cloud service. -->
    <!--<securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[Authentication Key]" />
    </securityProperties>-->
  </dataCacheClient>
</dataCacheClients>
```

<span data-ttu-id="51280-204">Dopo la rimozione di configurazione del servizio Cache gestito di hello, è possibile configurare i client della cache di hello come descritto nella seguente sezione hello.</span><span class="sxs-lookup"><span data-stu-id="51280-204">Once hello Managed Cache Service configuration is removed, you can configure hello cache client as described in hello following section.</span></span>

### <a name="configure-a-cache-client-using-hello-stackexchangeredis-nuget-package"></a><span data-ttu-id="51280-205">Configurare un client della cache mediante hello pacchetto NuGet stackexchange. Redis</span><span class="sxs-lookup"><span data-stu-id="51280-205">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
[!INCLUDE [redis-cache-configure](../../includes/redis-cache-configure-stackexchange-redis-nuget.md)]

## <a name="migrate-managed-cache-service-code"></a><span data-ttu-id="51280-206">Eseguire la migrazione del codice del Servizio cache gestita</span><span class="sxs-lookup"><span data-stu-id="51280-206">Migrate Managed Cache Service code</span></span>
<span data-ttu-id="51280-207">Hello API per client della cache di hello stackexchange. Redis è simile toohello servizio Cache gestito.</span><span class="sxs-lookup"><span data-stu-id="51280-207">hello API for hello StackExchange.Redis cache client is similar toohello Managed Cache Service.</span></span> <span data-ttu-id="51280-208">In questa sezione viene fornita una panoramica delle differenze di hello.</span><span class="sxs-lookup"><span data-stu-id="51280-208">This section provides an overview of hello differences.</span></span>

### <a name="connect-toohello-cache-using-hello-connectionmultiplexer-class"></a><span data-ttu-id="51280-209">La connessione della cache toohello utilizzando classe ConnectionMultiplexer hello</span><span class="sxs-lookup"><span data-stu-id="51280-209">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
<span data-ttu-id="51280-210">Nel servizio Cache gestita, cache toohello le connessioni gestite dalla hello `DataCacheFactory` e `DataCache` classi.</span><span class="sxs-lookup"><span data-stu-id="51280-210">In Managed Cache Service, connections toohello cache were handled by hello `DataCacheFactory` and `DataCache` classes.</span></span> <span data-ttu-id="51280-211">In Cache Redis di Azure, queste connessioni vengono gestite dall'hello `ConnectionMultiplexer` classe.</span><span class="sxs-lookup"><span data-stu-id="51280-211">In Azure Redis Cache, these connections are managed by hello `ConnectionMultiplexer` class.</span></span>

<span data-ttu-id="51280-212">Aggiungere il seguente hello utilizzando l'istruzione toohello superiore di qualsiasi file da cui si desidera tooaccess hello cache.</span><span class="sxs-lookup"><span data-stu-id="51280-212">Add hello following using statement toohello top of any file from which you want tooaccess hello cache.</span></span>

```c#
using StackExchange.Redis
```

<span data-ttu-id="51280-213">Se questo spazio dei nomi non viene risolto, assicurarsi di aver aggiunto hello pacchetto NuGet stackexchange. Redis come descritto in [configurare i client della cache di hello](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="51280-213">If this namespace doesn’t resolve, be sure that you have added hello StackExchange.Redis NuGet package as described in [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

> [!NOTE]
> <span data-ttu-id="51280-214">Si noti che il client stackexchange. Redis hello richiede .NET Framework 4 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="51280-214">Note that hello StackExchange.Redis client requires .NET Framework 4 or higher.</span></span>
> 
> 

<span data-ttu-id="51280-215">istanza di Cache Redis di Azure tooan tooconnect, chiamata hello statico `ConnectionMultiplexer.Connect` (metodo) e passare hello endpoint e la chiave.</span><span class="sxs-lookup"><span data-stu-id="51280-215">tooconnect tooan Azure Redis Cache instance, call hello static `ConnectionMultiplexer.Connect` method and pass in hello endpoint and key.</span></span> <span data-ttu-id="51280-216">Un approccio toosharing un `ConnectionMultiplexer` istanza dell'applicazione è toohave una proprietà statica che restituisce un'istanza connessa, simile toohello esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="51280-216">One approach toosharing a `ConnectionMultiplexer` instance in your application is toohave a static property that returns a connected instance, similar toohello following example.</span></span> <span data-ttu-id="51280-217">Fornisce un modo thread-safe di tooinitialize solo una singola connessione `ConnectionMultiplexer` istanza.</span><span class="sxs-lookup"><span data-stu-id="51280-217">This provides a thread-safe way tooinitialize only a single connected `ConnectionMultiplexer` instance.</span></span> <span data-ttu-id="51280-218">In questo esempio `abortConnect` è toofalse set, il che significa che la chiamata hello avrà esito positivo anche se non viene stabilita una cache toohello di connessione.</span><span class="sxs-lookup"><span data-stu-id="51280-218">In this example `abortConnect` is set toofalse, which means that hello call will succeed even if a connection toohello cache is not established.</span></span> <span data-ttu-id="51280-219">Una caratteristica fondamentale di `ConnectionMultiplexer` è che ripristinare automaticamente la cache toohello connettività quando vengono risolte i problemi di rete hello o altre cause.</span><span class="sxs-lookup"><span data-stu-id="51280-219">One key feature of `ConnectionMultiplexer` is that it will automatically restore connectivity toohello cache once hello network issue or other causes are resolved.</span></span>

```c#
private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
{
    return ConnectionMultiplexer.Connect("contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
});

public static ConnectionMultiplexer Connection
{
    get
    {
        return lazyConnection.Value;
    }
}
```

<span data-ttu-id="51280-220">Hello endpoint della cache, le chiavi e porte possono essere ottenute dalla hello **Cache Redis** pannello per l'istanza di cache.</span><span class="sxs-lookup"><span data-stu-id="51280-220">hello cache endpoint, keys, and ports can be obtained from hello **Redis Cache** blade for your cache instance.</span></span> <span data-ttu-id="51280-221">Per altre informazioni, vedere [Proprietà di Cache Redis](cache-configure.md#properties).</span><span class="sxs-lookup"><span data-stu-id="51280-221">For more information, see [Redis Cache properties](cache-configure.md#properties).</span></span>

<span data-ttu-id="51280-222">Una volta stabilita la connessione hello, restituire un database di riferimento toohello Redis cache dal chiamante hello `ConnectionMultiplexer.GetDatabase` metodo.</span><span class="sxs-lookup"><span data-stu-id="51280-222">Once hello connection is established, return a reference toohello Redis cache database by calling hello `ConnectionMultiplexer.GetDatabase` method.</span></span> <span data-ttu-id="51280-223">oggetto Hello restituito da hello `GetDatabase` metodo è un oggetto passthrough semplice e non è necessario toobe archiviati.</span><span class="sxs-lookup"><span data-stu-id="51280-223">hello object returned from hello `GetDatabase` method is a lightweight pass-through object and does not need toobe stored.</span></span>

```c#
IDatabase cache = Connection.GetDatabase();

// Perform cache operations using hello cache object...
// Simple put of integral data types into hello cache
cache.StringSet("key1", "value");
cache.StringSet("key2", 25);

// Simple get of data types from hello cache
string key1 = cache.StringGet("key1");
int key2 = (int)cache.StringGet("key2");
```

<span data-ttu-id="51280-224">client stackexchange. Redis Hello utilizza hello `RedisKey` e `RedisValue` tipi per l'accesso e l'archiviazione di elementi nella cache di hello.</span><span class="sxs-lookup"><span data-stu-id="51280-224">hello StackExchange.Redis client uses hello `RedisKey` and `RedisValue` types for accessing and storing items in hello cache.</span></span> <span data-ttu-id="51280-225">Questi tipi eseguono il mapping ai tipi di linguaggio più primitivi, incluse le stringhe, e spesso non vengono usati direttamente.</span><span class="sxs-lookup"><span data-stu-id="51280-225">These types map onto most primitive language types, including string, and often are not used directly.</span></span> <span data-ttu-id="51280-226">Redis stringhe sono hello il tipo di base del valore di Redis e possono contenere molti tipi di dati, inclusi flussi binari serializzati, mentre non è possibile utilizzare direttamente il tipo di hello, si utilizzerà metodi contenenti `String` nel nome hello.</span><span class="sxs-lookup"><span data-stu-id="51280-226">Redis Strings are hello most basic kind of Redis value, and can contain many types of data, including serialized binary streams, and while you may not use hello type directly, you will use methods that contain `String` in hello name.</span></span> <span data-ttu-id="51280-227">Per i tipi di dati primitivi più archiviare e recuperare elementi dalla cache di hello con hello `StringSet` e `StringGet` metodi, a meno che non si desidera archiviare le raccolte o altri tipi di dati Redis nella cache di hello.</span><span class="sxs-lookup"><span data-stu-id="51280-227">For most primitive data types you store and retrieve items from hello cache using hello `StringSet` and `StringGet` methods, unless you are storing collections or other Redis data types in hello cache.</span></span> 

<span data-ttu-id="51280-228">`StringSet`e `StringGet` sono molto simile toohello servizio Cache gestito `Put` e `Get` metodi, con uno principali differenze che prima di impostare e ottenere un oggetto .NET nella cache di hello è necessario serializzare prima.</span><span class="sxs-lookup"><span data-stu-id="51280-228">`StringSet` and `StringGet` are very similar toohello Managed Cache Service `Put` and `Get` methods, with one major difference being that before you set and get a .NET object into hello cache you must serialize it first.</span></span> 

<span data-ttu-id="51280-229">Quando si chiama `StringGet`, viene restituito se l'oggetto hello esiste, e in caso contrario, viene restituito null.</span><span class="sxs-lookup"><span data-stu-id="51280-229">When calling `StringGet`, if hello object exists, it is returned, and if it does not, null is returned.</span></span> <span data-ttu-id="51280-230">In questo caso è possibile recuperare il valore di hello dall'origine dati desiderata hello e memorizzarlo nella cache di hello per un utilizzo successivo.</span><span class="sxs-lookup"><span data-stu-id="51280-230">In this case you can retrieve hello value from hello desired data source and store it in hello cache for subsequent use.</span></span> <span data-ttu-id="51280-231">Questo è noto come modello cache-aside hello.</span><span class="sxs-lookup"><span data-stu-id="51280-231">This is known as hello cache-aside pattern.</span></span>

<span data-ttu-id="51280-232">scadenza hello toospecify di un elemento nella cache di hello, utilizzare hello `TimeSpan` parametro di `StringSet`.</span><span class="sxs-lookup"><span data-stu-id="51280-232">toospecify hello expiration of an item in hello cache, use hello `TimeSpan` parameter of `StringSet`.</span></span>

```c#
cache.StringSet("key1", "value1", TimeSpan.FromMinutes(90));
```

<span data-ttu-id="51280-233">Cache Redis di Azure può usare sia oggetti .NET che tipi di dati primitivi, ma prima della memorizzazione nella cache un oggetto .NET deve essere serializzato.</span><span class="sxs-lookup"><span data-stu-id="51280-233">Azure Redis Cache can work with .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.</span></span> <span data-ttu-id="51280-234">Si tratta di sviluppatore hello dell'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="51280-234">This is hello responsibility of hello application developer.</span></span> <span data-ttu-id="51280-235">In questo modo hello developer scelta hello del serializzatore hello.</span><span class="sxs-lookup"><span data-stu-id="51280-235">This gives hello developer flexibility in hello choice of hello serializer.</span></span> <span data-ttu-id="51280-236">Per ulteriori informazioni e codice di esempio, vedere [funziona con oggetti .NET nella cache di hello](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="51280-236">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span>

## <a name="migrate-aspnet-session-state-and-output-caching-tooazure-redis-cache"></a><span data-ttu-id="51280-237">Eseguire la migrazione di stato della sessione ASP.NET e la memorizzazione nella cache tooAzure Redis Cache di Output</span><span class="sxs-lookup"><span data-stu-id="51280-237">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span>
<span data-ttu-id="51280-238">La Cache Redis di Azure include provider sia per lo stato della sessione ASP.NET che per la memorizzazione nella cache dell'output delle pagine.</span><span class="sxs-lookup"><span data-stu-id="51280-238">Azure Redis Cache has providers for both ASP.NET Session State and Page Output caching.</span></span> <span data-ttu-id="51280-239">toomigrate l'applicazione che utilizza le versioni del servizio Cache gestito di hello di questi provider, rimuovere innanzitutto hello sezioni esistenti dal file Web. config e quindi configurare le versioni di Cache Redis di Azure hello dei provider hello.</span><span class="sxs-lookup"><span data-stu-id="51280-239">toomigrate your application that uses hello Managed Cache Service versions of these providers, first remove hello existing sections from your web.config, and then configure hello Azure Redis Cache versions of hello providers.</span></span> <span data-ttu-id="51280-240">Per istruzioni sull'utilizzo di hello provider ASP.NET di Cache Redis di Azure, vedere [Provider di stato sessione ASP.NET per Cache Redis di Azure](cache-aspnet-session-state-provider.md) e [Provider di Cache di Output ASP.NET per Cache Redis di Azure](cache-aspnet-output-cache-provider.md).</span><span class="sxs-lookup"><span data-stu-id="51280-240">For instructions on using hello Azure Redis Cache ASP.NET providers, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [ASP.NET Output Cache Provider for Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="51280-241">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="51280-241">Next steps</span></span>
<span data-ttu-id="51280-242">Esplorare hello [documentazione Cache Redis di Azure](https://azure.microsoft.com/documentation/services/cache/) per esercitazioni, esempi, video e altro ancora.</span><span class="sxs-lookup"><span data-stu-id="51280-242">Explore hello [Azure Redis Cache documentation](https://azure.microsoft.com/documentation/services/cache/) for tutorials, samples, videos, and more.</span></span>

