---
title: scala aaaAutomatically nodi di calcolo in un pool di Azure Batch | Documenti Microsoft
description: "Abilitare la scalabilità automatica in un toodynamically pool cloud regolare il numero di hello di nodi di calcolo nel pool di hello."
services: batch
documentationcenter: 
author: tamram
manager: timlt
editor: tysonn
ms.assetid: c624cdfc-c5f2-4d13-a7d7-ae080833b779
ms.service: batch
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: multiple
ms.date: 06/20/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: b6d1e0c5d8e0e56e15a4d3588150f2466a689f19
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="create-an-automatic-scaling-formula-for-scaling-compute-nodes-in-a-batch-pool"></a><span data-ttu-id="9875b-103">Creare una formula di scalabilità automatica per la scalabilità dei nodi di calcolo in un pool Batch</span><span class="sxs-lookup"><span data-stu-id="9875b-103">Create an automatic scaling formula for scaling compute nodes in a Batch pool</span></span>

<span data-ttu-id="9875b-104">Azure Batch supporta la scalabilità automatica dei pool in base ai parametri definiti.</span><span class="sxs-lookup"><span data-stu-id="9875b-104">Azure Batch can automatically scale pools based on parameters that you define.</span></span> <span data-ttu-id="9875b-105">Con il ridimensionamento automatico, Batch consente di aggiungere in modo dinamico i nodi tooa pool come attività aumento della richiesta e rimuove i nodi di calcolo come riducono.</span><span class="sxs-lookup"><span data-stu-id="9875b-105">With automatic scaling, Batch dynamically adds nodes tooa pool as task demands increase, and removes compute nodes as they decrease.</span></span> <span data-ttu-id="9875b-106">È possibile salvare tempo e denaro modificando automaticamente il numero di hello dei nodi di calcolo utilizzato dall'applicazione di Batch.</span><span class="sxs-lookup"><span data-stu-id="9875b-106">You can save both time and money by automatically adjusting hello number of compute nodes used by your Batch application.</span></span> 

<span data-ttu-id="9875b-107">Per abilitare la scalabilità automatica in un pool di nodi di calcolo, definire e associare al pool una *formula di scalabilità automatica*.</span><span class="sxs-lookup"><span data-stu-id="9875b-107">You enable automatic scaling on a pool of compute nodes by associating with it an *autoscale formula* that you define.</span></span> <span data-ttu-id="9875b-108">Hello servizio Batch Usa numero di hello toodetermine formula di scalabilità automatica hello dei nodi di calcolo che sono necessari tooexecute il carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="9875b-108">hello Batch service uses hello autoscale formula toodetermine hello number of compute nodes that are needed tooexecute your workload.</span></span> <span data-ttu-id="9875b-109">I nodi di calcolo possono essere nodi dedicati o [nodi con priorità bassa](batch-low-pri-vms.md).</span><span class="sxs-lookup"><span data-stu-id="9875b-109">Compute nodes may be dedicated nodes or [low-priority nodes](batch-low-pri-vms.md).</span></span> <span data-ttu-id="9875b-110">I dati di metrica tooservice raccolti periodicamente di risposta batch.</span><span class="sxs-lookup"><span data-stu-id="9875b-110">Batch responds tooservice metrics data that is collected periodically.</span></span> <span data-ttu-id="9875b-111">Utilizza i dati di metrica, Batch regola numero hello dei nodi di calcolo nel pool di hello in base a intervalli configurabili e formule.</span><span class="sxs-lookup"><span data-stu-id="9875b-111">Using this metrics data, Batch adjusts hello number of compute nodes in hello pool based on your formula and at a configurable interval.</span></span>

<span data-ttu-id="9875b-112">È possibile abilitare la scalabilità automatica al momento della creazione di un pool o in un pool esistente.</span><span class="sxs-lookup"><span data-stu-id="9875b-112">You can enable automatic scaling either when a pool is created, or on an existing pool.</span></span> <span data-ttu-id="9875b-113">Si può anche modificare una formula esistente in un pool configurato per la scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-113">You can also change an existing formula on a pool that is configured for autoscaling.</span></span> <span data-ttu-id="9875b-114">Batch consente tooevaluate formule prima dell'assegnazione di stato di hello toopools e toomonitor di ridimensionamento automatico viene eseguito.</span><span class="sxs-lookup"><span data-stu-id="9875b-114">Batch enables you tooevaluate your formulas before assigning them toopools and toomonitor hello status of automatic scaling runs.</span></span>

<span data-ttu-id="9875b-115">Questo articolo illustra hello varie entità che costituiscono le formule di scalabilità automatica, ad esempio variabili, operatori, operazioni e funzioni.</span><span class="sxs-lookup"><span data-stu-id="9875b-115">This article discusses hello various entities that make up your autoscale formulas, including variables, operators, operations, and functions.</span></span> <span data-ttu-id="9875b-116">Viene illustrato come tooobtain varie metriche relative a risorse e attività all'interno di Batch di calcolo.</span><span class="sxs-lookup"><span data-stu-id="9875b-116">We discuss how tooobtain various compute resource and task metrics within Batch.</span></span> <span data-ttu-id="9875b-117">È possibile utilizzare questi tooadjust metrica conteggio dei nodi del pool in base allo stato di attività e l'utilizzo della risorsa.</span><span class="sxs-lookup"><span data-stu-id="9875b-117">You can use these metrics tooadjust your pool's node count based on resource usage and task status.</span></span> <span data-ttu-id="9875b-118">È quindi descrivere la modalità tooconstruct una formula e abilitare utilizzando sia la scalabilità in un pool automatico hello Batch REST e le API .NET.</span><span class="sxs-lookup"><span data-stu-id="9875b-118">We then describe how tooconstruct a formula and enable automatic scaling on a pool by using both hello Batch REST and .NET APIs.</span></span> <span data-ttu-id="9875b-119">concludendo con alcune formule di esempio.</span><span class="sxs-lookup"><span data-stu-id="9875b-119">Finally, we finish up with a few example formulas.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9875b-120">Quando si crea un account Batch, è possibile specificare hello [configurazione dell'account](batch-api-basics.md#account), che determina se i pool vengono allocati in una sottoscrizione al servizio Batch (impostazione predefinita hello) o nella sottoscrizione utente.</span><span class="sxs-lookup"><span data-stu-id="9875b-120">When you create a Batch account, you can specify hello [account configuration](batch-api-basics.md#account), which determines whether pools are allocated in a Batch service subscription (hello default), or in your user subscription.</span></span> <span data-ttu-id="9875b-121">Se l'account Batch è stato creato con la configurazione di servizio Batch hello predefinita, l'account è tooa limitato il numero massimo di core che può essere utilizzato per l'elaborazione.</span><span class="sxs-lookup"><span data-stu-id="9875b-121">If you created your Batch account with hello default Batch Service configuration, then your account is limited tooa maximum number of cores that can be used for processing.</span></span> <span data-ttu-id="9875b-122">servizio Batch Hello Ridimensiona i nodi di calcolo solo backup toothat limite di core.</span><span class="sxs-lookup"><span data-stu-id="9875b-122">hello Batch service scales compute nodes only up toothat core limit.</span></span> <span data-ttu-id="9875b-123">Per questo motivo, hello servizio Batch potrebbe non raggiungere il numero di destinazione hello dei nodi di calcolo specificata da una formula di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-123">For this reason, hello Batch service may not reach hello target number of compute nodes specified by an autoscale formula.</span></span> <span data-ttu-id="9875b-124">Vedere [quote e limiti per il servizio Azure Batch hello](batch-quota-limit.md) per informazioni sulla visualizzazione e ad aumentare le quote di account.</span><span class="sxs-lookup"><span data-stu-id="9875b-124">See [Quotas and limits for hello Azure Batch service](batch-quota-limit.md) for information on viewing and increasing your account quotas.</span></span>
>
><span data-ttu-id="9875b-125">Se l'account è stato creato con la configurazione della sottoscrizione utente hello, l'account nelle condivisioni di quota di core hello per sottoscrizione hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-125">If you created your account with hello User Subscription configuration, then your account shares in hello core quota for hello subscription.</span></span> <span data-ttu-id="9875b-126">Per altre informazioni, vedere [Limiti relativi a Macchine virtuali](../azure-subscription-service-limits.md#virtual-machines-limits) in [Sottoscrizione di Azure e limiti, quote e vincoli dei servizi](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="9875b-126">For more information, see [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) in [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span>
>
>

## <a name="automatic-scaling-formulas"></a><span data-ttu-id="9875b-127">Formule di ridimensionamento automatico</span><span class="sxs-lookup"><span data-stu-id="9875b-127">Automatic scaling formulas</span></span>
<span data-ttu-id="9875b-128">Una formula di scalabilità automatica è un valore stringa definito che contiene una o più istruzioni.</span><span class="sxs-lookup"><span data-stu-id="9875b-128">An automatic scaling formula is a string value that you define that contains one or more statements.</span></span> <span data-ttu-id="9875b-129">formula di scalabilità automatica Hello viene assegnato del pool tooa [autoScaleFormula] [ rest_autoscaleformula] elemento (Batch REST) o [CloudPool.AutoScaleFormula] [ net_cloudpool_autoscaleformula] proprietà (.NET per Batch).</span><span class="sxs-lookup"><span data-stu-id="9875b-129">hello autoscale formula is assigned tooa pool's [autoScaleFormula][rest_autoscaleformula] element (Batch REST) or [CloudPool.AutoScaleFormula][net_cloudpool_autoscaleformula] property (Batch .NET).</span></span> <span data-ttu-id="9875b-130">Hello servizio Batch utilizza il numero di destinazione toodetermine formula hello di nodi di calcolo nel pool di hello per successivo intervallo di elaborazione di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-130">hello Batch service uses your formula toodetermine hello target number of compute nodes in hello pool for hello next interval of processing.</span></span> <span data-ttu-id="9875b-131">formula la stringa Hello non può superare gli 8 KB, è possibile includere i rendiconti too100 che sono separati da punti e virgola e possono includere interruzioni di riga e i commenti.</span><span class="sxs-lookup"><span data-stu-id="9875b-131">hello formula string cannot exceed 8 KB, can include up too100 statements that are separated by semicolons, and can include line breaks and comments.</span></span>

<span data-ttu-id="9875b-132">È possibile paragonare le formule di ridimensionamento automatico a un "linguaggio" di ridimensionamento automatico di Batch.</span><span class="sxs-lookup"><span data-stu-id="9875b-132">You can think of automatic scaling formulas as a Batch autoscale "language."</span></span> <span data-ttu-id="9875b-133">Le istruzioni formula sono espressioni in formato libero che possono includere sia definito dal servizio variabili (variabili definite dal servizio Batch hello) variabili definite dall'utente (variabili che definiscono).</span><span class="sxs-lookup"><span data-stu-id="9875b-133">Formula statements are free-formed expressions that can include both service-defined variables (variables defined by hello Batch service) and user-defined variables (variables that you define).</span></span> <span data-ttu-id="9875b-134">Possono eseguire diverse operazioni su questi valori usando funzioni, operatori e tipi predefiniti.</span><span class="sxs-lookup"><span data-stu-id="9875b-134">They can perform various operations on these values by using built-in types, operators, and functions.</span></span> <span data-ttu-id="9875b-135">Ad esempio, un'istruzione potrebbe richiedere hello seguente formato:</span><span class="sxs-lookup"><span data-stu-id="9875b-135">For example, a statement might take hello following form:</span></span>

```
$myNewVariable = function($ServiceDefinedVariable, $myCustomVariable);
```

<span data-ttu-id="9875b-136">Le formule contengono in genere più istruzioni che eseguono operazioni su valori ottenuti nelle istruzioni precedenti.</span><span class="sxs-lookup"><span data-stu-id="9875b-136">Formulas generally contain multiple statements that perform operations on values that are obtained in previous statements.</span></span> <span data-ttu-id="9875b-137">Ad esempio, prima è ottenere un valore per `variable1`, quindi passarlo tooa funzione toopopulate `variable2`:</span><span class="sxs-lookup"><span data-stu-id="9875b-137">For example, first we obtain a value for `variable1`, then pass it tooa function toopopulate `variable2`:</span></span>

```
$variable1 = function1($ServiceDefinedVariable);
$variable2 = function2($OtherServiceDefinedVariable, $variable1);
```

<span data-ttu-id="9875b-138">Dichiarazioni del tooarrive formula di scalabilità automatica in un numero di nodi di calcolo di destinazione.</span><span class="sxs-lookup"><span data-stu-id="9875b-138">Include these statements in your autoscale formula tooarrive at a target number of compute nodes.</span></span> <span data-ttu-id="9875b-139">I nodi dedicati e i nodi con priorità bassa hanno impostazioni proprie per la destinazione, in modo da poter definire una destinazione per ogni tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="9875b-139">Dedicated nodes and low-priority nodes each have their own target settings, so that you can define a target for each type of node.</span></span> <span data-ttu-id="9875b-140">Una formula di scalabilità automatica può includere un valore di destinazione per i nodi dedicati, un valore di destinazione per i nodi con priorità bassa o entrambi.</span><span class="sxs-lookup"><span data-stu-id="9875b-140">An autoscale formula can include a target value for dedicated nodes, a target value for low-priority nodes, or both.</span></span>

<span data-ttu-id="9875b-141">numero di destinazione Hello dei nodi potrebbe essere superiore, inferiore o uguale hello numero corrente di nodi di quel tipo nel pool di hello hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-141">hello target number of nodes may be higher, lower, or hello same as hello current number of nodes of that type in hello pool.</span></span> <span data-ttu-id="9875b-142">Batch valuta la formula di scalabilità automatica del pool a intervalli specifici (vedere gli [intervalli di scalabilità automatica](#automatic-scaling-interval)).</span><span class="sxs-lookup"><span data-stu-id="9875b-142">Batch evaluates a pool's autoscale formula at a specific interval (see [automatic scaling intervals](#automatic-scaling-interval)).</span></span> <span data-ttu-id="9875b-143">Batch consente di regolare il numero di destinazione hello di ogni tipo di nodo nel numero di toohello pool hello che specifica la formula di scalabilità automatica in fase di valutazione di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-143">Batch adjusts hello target number of each type of node in hello pool toohello number that your autoscale formula specifies at hello time of evaluation.</span></span>

### <a name="sample-autoscale-formula"></a><span data-ttu-id="9875b-144">Esempio di formula di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="9875b-144">Sample autoscale formula</span></span>

<span data-ttu-id="9875b-145">Di seguito è riportato un esempio di una formula di scalabilità automatica che può essere adattato toowork per la maggior parte degli scenari.</span><span class="sxs-lookup"><span data-stu-id="9875b-145">Here is an example of an autoscale formula that can be adjusted toowork for most scenarios.</span></span> <span data-ttu-id="9875b-146">Hello variabili `startingNumberOfVMs` e `maxNumberofVMs` in hello formula di esempio può essere adattato tooyour esigenze.</span><span class="sxs-lookup"><span data-stu-id="9875b-146">hello variables `startingNumberOfVMs` and `maxNumberofVMs` in hello example formula can be adjusted tooyour needs.</span></span> <span data-ttu-id="9875b-147">Questa formula viene ridimensionata nodi dedicati, ma può essere modificato tooapply tooscale anche i nodi con priorità bassa.</span><span class="sxs-lookup"><span data-stu-id="9875b-147">This formula scales dedicated nodes, but can be modified tooapply tooscale low-priority nodes as well.</span></span> 

```
startingNumberOfVMs = 1;
maxNumberofVMs = 25;
pendingTaskSamplePercent = $PendingTasks.GetSamplePercent(180 * TimeInterval_Second);
pendingTaskSamples = pendingTaskSamplePercent < 70 ? startingNumberOfVMs : avg($PendingTasks.GetSample(180 * TimeInterval_Second));
$TargetDedicatedNodes=min(maxNumberofVMs, pendingTaskSamples);
```

<span data-ttu-id="9875b-148">Con questa formula di scalabilità automatica, il pool di hello viene inizialmente creato con una singola macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="9875b-148">With this autoscale formula, hello pool is initially created with a single VM.</span></span> <span data-ttu-id="9875b-149">Hello `$PendingTasks` metrica definisce il numero di hello di attività che sono in esecuzione o in coda.</span><span class="sxs-lookup"><span data-stu-id="9875b-149">hello `$PendingTasks` metric defines hello number of tasks that are running or queued.</span></span> <span data-ttu-id="9875b-150">formula Hello trova numero medio di hello attività in sospeso in hello ultimi 180 secondi e imposta hello `$TargetDedicatedNodes` variabile di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="9875b-150">hello formula finds hello average number of pending tasks in hello last 180 seconds and sets hello `$TargetDedicatedNodes` variable accordingly.</span></span> <span data-ttu-id="9875b-151">formula di Hello garantisce che il numero di destinazione hello dei nodi dedicati non superi mai il 25 macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="9875b-151">hello formula ensures that hello target number of dedicated nodes never exceeds 25 VMs.</span></span> <span data-ttu-id="9875b-152">Quando vengono inviate nuove attività, si espande automaticamente pool hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-152">As new tasks are submitted, hello pool automatically grows.</span></span> <span data-ttu-id="9875b-153">Come attività di completamento, le macchine virtuali diventano disponibile uno alla volta e la formula di scalabilità automatica hello hello ridotta.</span><span class="sxs-lookup"><span data-stu-id="9875b-153">As tasks complete, VMs become free one by one and hello autoscaling formula shrinks hello pool.</span></span>

## <a name="variables"></a><span data-ttu-id="9875b-154">variables</span><span class="sxs-lookup"><span data-stu-id="9875b-154">Variables</span></span>
<span data-ttu-id="9875b-155">Nelle formule di scalabilità automatica è possibile usare sia **variabili definite dal servizio** sia **variabili definite dall'utente**.</span><span class="sxs-lookup"><span data-stu-id="9875b-155">You can use both **service-defined** and **user-defined** variables in your autoscale formulas.</span></span> <span data-ttu-id="9875b-156">le variabili di Hello definito dal servizio vengono compilate in toohello servizio Batch.</span><span class="sxs-lookup"><span data-stu-id="9875b-156">hello service-defined variables are built in toohello Batch service.</span></span> <span data-ttu-id="9875b-157">Alcune sono in lettura/scrittura e altre di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="9875b-157">Some service-defined variables are read-write, and some are read-only.</span></span> <span data-ttu-id="9875b-158">Le variabili definite dall'utente vengono configurate dall'utente.</span><span class="sxs-lookup"><span data-stu-id="9875b-158">User-defined variables are variables that you define.</span></span> <span data-ttu-id="9875b-159">Nella formula di esempio hello illustrato nella sezione precedente hello `$TargetDedicatedNodes` e `$PendingTasks` sono variabili definito dal servizio.</span><span class="sxs-lookup"><span data-stu-id="9875b-159">In hello example formula shown in hello previous section, `$TargetDedicatedNodes` and `$PendingTasks` are service-defined variables.</span></span> <span data-ttu-id="9875b-160">Le variabili `startingNumberOfVMs` e `maxNumberofVMs` sono definite dall'utente.</span><span class="sxs-lookup"><span data-stu-id="9875b-160">Variables `startingNumberOfVMs` and `maxNumberofVMs` are user-defined variables.</span></span>

> [!NOTE]
> <span data-ttu-id="9875b-161">Le variabili definite dal servizio sono sempre precedute da un segno di dollaro ($).</span><span class="sxs-lookup"><span data-stu-id="9875b-161">Service-defined variables are always preceded by a dollar sign ($).</span></span> <span data-ttu-id="9875b-162">Variabili definite dall'utente, il segno di dollaro hello è facoltativo.</span><span class="sxs-lookup"><span data-stu-id="9875b-162">For user-defined variables, hello dollar sign is optional.</span></span>
>
>

<span data-ttu-id="9875b-163">Hello le tabelle seguenti Mostra sia in lettura / scrittura e le variabili di sola lettura che sono definite hello servizio Batch.</span><span class="sxs-lookup"><span data-stu-id="9875b-163">hello following tables show both read-write and read-only variables that are defined by hello Batch service.</span></span>

<span data-ttu-id="9875b-164">È possibile ottenere e impostare i valori hello di queste variabili definito dal servizio numero hello toomanage di nodi di calcolo in un pool di:</span><span class="sxs-lookup"><span data-stu-id="9875b-164">You can get and set hello values of these service-defined variables toomanage hello number of compute nodes in a pool:</span></span>

| <span data-ttu-id="9875b-165">Variabili in lettura/scrittura definite dal servizio</span><span class="sxs-lookup"><span data-stu-id="9875b-165">Read-write service-defined variables</span></span> | <span data-ttu-id="9875b-166">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9875b-166">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9875b-167">$TargetDedicatedNodes</span><span class="sxs-lookup"><span data-stu-id="9875b-167">$TargetDedicatedNodes</span></span> |<span data-ttu-id="9875b-168">numero di destinazione Hello di dedicato nodi per il pool di hello di calcolo.</span><span class="sxs-lookup"><span data-stu-id="9875b-168">hello target number of dedicated compute nodes for hello pool.</span></span> <span data-ttu-id="9875b-169">numero di Hello dei nodi dedicati viene specificato come destinazione, perché un pool non può ottenere sempre numero desiderato di hello di nodi.</span><span class="sxs-lookup"><span data-stu-id="9875b-169">hello number of dedicated nodes is specified as a target because a pool may not always achieve hello desired number of nodes.</span></span> <span data-ttu-id="9875b-170">Ad esempio, se viene modificato il numero di destinazione hello dei nodi dedicati da una versione di valutazione di scalabilità automatica prima di hello pool ha raggiunto la destinazione iniziale hello e quindi pool hello potrebbero non raggiungere la destinazione hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-170">For example, if hello target number of dedicated nodes is modified by an autoscale evaluation before hello pool has reached hello initial target, then hello pool may not reach hello target.</span></span> <br /><br /> <span data-ttu-id="9875b-171">Un pool in un account creato con la configurazione del servizio Batch hello potrebbe non raggiungere la destinazione se destinazione hello supera una quota di nodi o core account Batch.</span><span class="sxs-lookup"><span data-stu-id="9875b-171">A pool in an account created with hello Batch Service configuration may not achieve its target if hello target exceeds a Batch account node or core quota.</span></span> <span data-ttu-id="9875b-172">Un pool in un account creato con la configurazione della sottoscrizione utente hello non può ottenere la relativa destinazione destinazione hello supera la quota di core condiviso hello per sottoscrizione hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-172">A pool in an account created with hello User Subscription configuration may not achieve its target if hello target exceeds hello shared core quota for hello subscription.</span></span>|
| <span data-ttu-id="9875b-173">$TargetLowPriorityNodes</span><span class="sxs-lookup"><span data-stu-id="9875b-173">$TargetLowPriorityNodes</span></span> |<span data-ttu-id="9875b-174">numero di destinazione Hello di bassa priorità nodi per il pool di hello di calcolo.</span><span class="sxs-lookup"><span data-stu-id="9875b-174">hello target number of low-priority compute nodes for hello pool.</span></span> <span data-ttu-id="9875b-175">numero di Hello di nodi con priorità bassa viene specificato come destinazione, perché un pool non può ottenere sempre numero desiderato di hello di nodi.</span><span class="sxs-lookup"><span data-stu-id="9875b-175">hello number of low-priority nodes is specified as a target because a pool may not always achieve hello desired number of nodes.</span></span> <span data-ttu-id="9875b-176">Ad esempio, se il numero di destinazione hello di nodi con priorità bassa viene modificato da una versione di valutazione di scalabilità automatica prima di hello pool ha raggiunto la destinazione iniziale hello, quindi pool hello potrebbero non raggiungere la destinazione hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-176">For example, if hello target number of low-priority nodes is modified by an autoscale evaluation before hello pool has reached hello initial target, then hello pool may not reach hello target.</span></span> <span data-ttu-id="9875b-177">Un pool di anche potrebbe non raggiungere la destinazione se destinazione hello supera una quota di nodi o core account Batch.</span><span class="sxs-lookup"><span data-stu-id="9875b-177">A pool may also not achieve its target if hello target exceeds a Batch account node or core quota.</span></span> <br /><br /> <span data-ttu-id="9875b-178">Per altre informazioni sui nodi calcolo con priorità bassa, vedere [Usare le VM con priorità bassa in Batch (anteprima)](batch-low-pri-vms.md).</span><span class="sxs-lookup"><span data-stu-id="9875b-178">For more information on low-priority compute nodes, see [Use low-priority VMs with Batch (Preview)](batch-low-pri-vms.md).</span></span> |
| <span data-ttu-id="9875b-179">$NodeDeallocationOption</span><span class="sxs-lookup"><span data-stu-id="9875b-179">$NodeDeallocationOption</span></span> |<span data-ttu-id="9875b-180">azione di Hello che si verifica quando i nodi di calcolo vengono rimossi da un pool.</span><span class="sxs-lookup"><span data-stu-id="9875b-180">hello action that occurs when compute nodes are removed from a pool.</span></span> <span data-ttu-id="9875b-181">I valori possibili sono:</span><span class="sxs-lookup"><span data-stu-id="9875b-181">Possible values are:</span></span><ul><li><span data-ttu-id="9875b-182">**riaccodamento**-termina immediatamente le attività e le inserisce nuovamente nella coda processi hello in modo che vengano ripianificate.</span><span class="sxs-lookup"><span data-stu-id="9875b-182">**requeue**--Terminates tasks immediately and puts them back on hello job queue so that they are rescheduled.</span></span><li><span data-ttu-id="9875b-183">**terminare**-termina le attività immediatamente e li rimuove dalla coda dei processi di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-183">**terminate**--Terminates tasks immediately and removes them from hello job queue.</span></span><li><span data-ttu-id="9875b-184">**taskcompletion**-attende attualmente in esecuzione attività toofinish e quindi rimuove il nodo hello dal pool di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-184">**taskcompletion**--Waits for currently running tasks toofinish and then removes hello node from hello pool.</span></span><li><span data-ttu-id="9875b-185">**retaineddata**-attende tutti hello mantenuti attività dati locali nel hello nodo toobe puliti prima di rimuovere il nodo hello dal pool hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-185">**retaineddata**--Waits for all hello local task-retained data on hello node toobe cleaned up before removing hello node from hello pool.</span></span></ul> |

<span data-ttu-id="9875b-186">È possibile ottenere il valore di hello di queste modifiche toomake definito dal servizio variabili che sono in base alle metriche dal servizio Batch hello:</span><span class="sxs-lookup"><span data-stu-id="9875b-186">You can get hello value of these service-defined variables toomake adjustments that are based on metrics from hello Batch service:</span></span>

| <span data-ttu-id="9875b-187">Variabili di sola lettura definite dal servizio</span><span class="sxs-lookup"><span data-stu-id="9875b-187">Read-only service-defined variables</span></span> | <span data-ttu-id="9875b-188">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9875b-188">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9875b-189">$CPUPercent</span><span class="sxs-lookup"><span data-stu-id="9875b-189">$CPUPercent</span></span> |<span data-ttu-id="9875b-190">percentuale media di Hello di utilizzo della CPU.</span><span class="sxs-lookup"><span data-stu-id="9875b-190">hello average percentage of CPU usage.</span></span> |
| <span data-ttu-id="9875b-191">$WallClockSeconds</span><span class="sxs-lookup"><span data-stu-id="9875b-191">$WallClockSeconds</span></span> |<span data-ttu-id="9875b-192">numero di Hello di secondi usati.</span><span class="sxs-lookup"><span data-stu-id="9875b-192">hello number of seconds consumed.</span></span> |
| <span data-ttu-id="9875b-193">$MemoryBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-193">$MemoryBytes</span></span> |<span data-ttu-id="9875b-194">numero medio di Hello di megabyte usati.</span><span class="sxs-lookup"><span data-stu-id="9875b-194">hello average number of megabytes used.</span></span> |
| <span data-ttu-id="9875b-195">$DiskBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-195">$DiskBytes</span></span> |<span data-ttu-id="9875b-196">numero medio di Hello di gigabyte usati nei dischi locali hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-196">hello average number of gigabytes used on hello local disks.</span></span> |
| <span data-ttu-id="9875b-197">$DiskReadBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-197">$DiskReadBytes</span></span> |<span data-ttu-id="9875b-198">numero di Hello di byte letti.</span><span class="sxs-lookup"><span data-stu-id="9875b-198">hello number of bytes read.</span></span> |
| <span data-ttu-id="9875b-199">$DiskWriteBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-199">$DiskWriteBytes</span></span> |<span data-ttu-id="9875b-200">numero di Hello di byte scritti.</span><span class="sxs-lookup"><span data-stu-id="9875b-200">hello number of bytes written.</span></span> |
| <span data-ttu-id="9875b-201">$DiskReadOps</span><span class="sxs-lookup"><span data-stu-id="9875b-201">$DiskReadOps</span></span> |<span data-ttu-id="9875b-202">eseguita il conteggio di Hello delle operazioni di lettura del disco.</span><span class="sxs-lookup"><span data-stu-id="9875b-202">hello count of read disk operations performed.</span></span> |
| <span data-ttu-id="9875b-203">$DiskWriteOps</span><span class="sxs-lookup"><span data-stu-id="9875b-203">$DiskWriteOps</span></span> |<span data-ttu-id="9875b-204">conteggio di Hello di eseguire operazioni di scrittura su disco.</span><span class="sxs-lookup"><span data-stu-id="9875b-204">hello count of write disk operations performed.</span></span> |
| <span data-ttu-id="9875b-205">$NetworkInBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-205">$NetworkInBytes</span></span> |<span data-ttu-id="9875b-206">numero di Hello di byte in ingresso.</span><span class="sxs-lookup"><span data-stu-id="9875b-206">hello number of inbound bytes.</span></span> |
| <span data-ttu-id="9875b-207">$NetworkOutBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-207">$NetworkOutBytes</span></span> |<span data-ttu-id="9875b-208">numero di Hello di byte in uscita.</span><span class="sxs-lookup"><span data-stu-id="9875b-208">hello number of outbound bytes.</span></span> |
| <span data-ttu-id="9875b-209">$SampleNodeCount</span><span class="sxs-lookup"><span data-stu-id="9875b-209">$SampleNodeCount</span></span> |<span data-ttu-id="9875b-210">conteggio di Hello dei nodi di calcolo.</span><span class="sxs-lookup"><span data-stu-id="9875b-210">hello count of compute nodes.</span></span> |
| <span data-ttu-id="9875b-211">$ActiveTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-211">$ActiveTasks</span></span> |<span data-ttu-id="9875b-212">numero di Hello di attività che sono pronti tooexecute ma non ancora in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="9875b-212">hello number of tasks that are ready tooexecute but are not yet executing.</span></span> <span data-ttu-id="9875b-213">conteggio di Hello $ActiveTasks include tutte le attività che si trovano in stato attivo hello e le cui dipendenze sono state soddisfatte.</span><span class="sxs-lookup"><span data-stu-id="9875b-213">hello $ActiveTasks count includes all tasks that are in hello active state and whose dependencies have been satisfied.</span></span> <span data-ttu-id="9875b-214">Tutte le attività che sono in stato attivo hello ma non sono stati soddisfatti le cui dipendenze sono escluse dal conteggio hello $ActiveTasks.</span><span class="sxs-lookup"><span data-stu-id="9875b-214">Any tasks that are in hello active state but whose dependencies have not been satisfied are excluded from hello $ActiveTasks count.</span></span>|
| <span data-ttu-id="9875b-215">$RunningTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-215">$RunningTasks</span></span> |<span data-ttu-id="9875b-216">numero di Hello di attività in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="9875b-216">hello number of tasks in a running state.</span></span> |
| <span data-ttu-id="9875b-217">$PendingTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-217">$PendingTasks</span></span> |<span data-ttu-id="9875b-218">somma di Hello di $ActiveTasks e $RunningTasks.</span><span class="sxs-lookup"><span data-stu-id="9875b-218">hello sum of $ActiveTasks and $RunningTasks.</span></span> |
| <span data-ttu-id="9875b-219">$SucceededTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-219">$SucceededTasks</span></span> |<span data-ttu-id="9875b-220">numero di Hello di attività che è stata completata.</span><span class="sxs-lookup"><span data-stu-id="9875b-220">hello number of tasks that finished successfully.</span></span> |
| <span data-ttu-id="9875b-221">$FailedTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-221">$FailedTasks</span></span> |<span data-ttu-id="9875b-222">numero di Hello di attività che non è riuscita.</span><span class="sxs-lookup"><span data-stu-id="9875b-222">hello number of tasks that failed.</span></span> |
| <span data-ttu-id="9875b-223">$CurrentDedicatedNodes</span><span class="sxs-lookup"><span data-stu-id="9875b-223">$CurrentDedicatedNodes</span></span> |<span data-ttu-id="9875b-224">numero corrente di Hello di dedicato nodi di calcolo.</span><span class="sxs-lookup"><span data-stu-id="9875b-224">hello current number of dedicated compute nodes.</span></span> |
| <span data-ttu-id="9875b-225">$CurrentLowPriorityNodes</span><span class="sxs-lookup"><span data-stu-id="9875b-225">$CurrentLowPriorityNodes</span></span> |<span data-ttu-id="9875b-226">numero corrente di Hello di bassa priorità nodi di calcolo, inclusi tutti i nodi che sono stati rimovibile.</span><span class="sxs-lookup"><span data-stu-id="9875b-226">hello current number of low-priority compute nodes, including any nodes that have been pre-empted.</span></span> |
| <span data-ttu-id="9875b-227">$PreemptedNodeCount</span><span class="sxs-lookup"><span data-stu-id="9875b-227">$PreemptedNodeCount</span></span> | <span data-ttu-id="9875b-228">numero di Hello di nodi nel pool di hello che sono in uno stato rimovibile.</span><span class="sxs-lookup"><span data-stu-id="9875b-228">hello number of nodes in hello pool that are in a pre-empted state.</span></span> |

> [!TIP]
> <span data-ttu-id="9875b-229">sono Hello le variabili di sola lettura, definito dal servizio vengono visualizzate nella tabella precedente hello *oggetti* vari metodi che forniscono dati tooaccess associati a ognuna.</span><span class="sxs-lookup"><span data-stu-id="9875b-229">hello read-only, service-defined variables that are shown in hello previous table are *objects* that provide various methods tooaccess data associated with each.</span></span> <span data-ttu-id="9875b-230">Per altre informazioni, vedere [Ottenere dati di esempio](#getsampledata) più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="9875b-230">For more information, see [Obtain sample data](#getsampledata) later in this article.</span></span>
>
>

## <a name="types"></a><span data-ttu-id="9875b-231">Tipi</span><span class="sxs-lookup"><span data-stu-id="9875b-231">Types</span></span>
<span data-ttu-id="9875b-232">Questi sono i tipi supportati in una formula:</span><span class="sxs-lookup"><span data-stu-id="9875b-232">These types are supported in a formula:</span></span>

* <span data-ttu-id="9875b-233">double</span><span class="sxs-lookup"><span data-stu-id="9875b-233">double</span></span>
* <span data-ttu-id="9875b-234">doubleVec</span><span class="sxs-lookup"><span data-stu-id="9875b-234">doubleVec</span></span>
* <span data-ttu-id="9875b-235">doubleVecList</span><span class="sxs-lookup"><span data-stu-id="9875b-235">doubleVecList</span></span>
* <span data-ttu-id="9875b-236">string</span><span class="sxs-lookup"><span data-stu-id="9875b-236">string</span></span>
* <span data-ttu-id="9875b-237">timestamp - timestamp è una struttura composta che contiene i seguenti membri hello:</span><span class="sxs-lookup"><span data-stu-id="9875b-237">timestamp--timestamp is a compound structure that contains hello following members:</span></span>

  * <span data-ttu-id="9875b-238">year</span><span class="sxs-lookup"><span data-stu-id="9875b-238">year</span></span>
  * <span data-ttu-id="9875b-239">month (1-12)</span><span class="sxs-lookup"><span data-stu-id="9875b-239">month (1-12)</span></span>
  * <span data-ttu-id="9875b-240">day (1-31)</span><span class="sxs-lookup"><span data-stu-id="9875b-240">day (1-31)</span></span>
  * <span data-ttu-id="9875b-241">giorno della settimana (in formato hello del numero; ad esempio, 1 per lunedì)</span><span class="sxs-lookup"><span data-stu-id="9875b-241">weekday (in hello format of number; for example, 1 for Monday)</span></span>
  * <span data-ttu-id="9875b-242">hour (in formato 24 ore, ad esempio 13 per indicare le ore 13.00)</span><span class="sxs-lookup"><span data-stu-id="9875b-242">hour (in 24-hour number format; for example, 13 means 1 PM)</span></span>
  * <span data-ttu-id="9875b-243">minute (00-59)</span><span class="sxs-lookup"><span data-stu-id="9875b-243">minute (00-59)</span></span>
  * <span data-ttu-id="9875b-244">second (00-59)</span><span class="sxs-lookup"><span data-stu-id="9875b-244">second (00-59)</span></span>
* <span data-ttu-id="9875b-245">timeInterval</span><span class="sxs-lookup"><span data-stu-id="9875b-245">timeinterval</span></span>

  * <span data-ttu-id="9875b-246">TimeInterval_Zero</span><span class="sxs-lookup"><span data-stu-id="9875b-246">TimeInterval_Zero</span></span>
  * <span data-ttu-id="9875b-247">TimeInterval_100ns</span><span class="sxs-lookup"><span data-stu-id="9875b-247">TimeInterval_100ns</span></span>
  * <span data-ttu-id="9875b-248">TimeInterval_Microsecond</span><span class="sxs-lookup"><span data-stu-id="9875b-248">TimeInterval_Microsecond</span></span>
  * <span data-ttu-id="9875b-249">TimeInterval_Millisecond</span><span class="sxs-lookup"><span data-stu-id="9875b-249">TimeInterval_Millisecond</span></span>
  * <span data-ttu-id="9875b-250">TimeInterval_Second</span><span class="sxs-lookup"><span data-stu-id="9875b-250">TimeInterval_Second</span></span>
  * <span data-ttu-id="9875b-251">TimeInterval_Minute</span><span class="sxs-lookup"><span data-stu-id="9875b-251">TimeInterval_Minute</span></span>
  * <span data-ttu-id="9875b-252">TimeInterval_Hour</span><span class="sxs-lookup"><span data-stu-id="9875b-252">TimeInterval_Hour</span></span>
  * <span data-ttu-id="9875b-253">TimeInterval_Day</span><span class="sxs-lookup"><span data-stu-id="9875b-253">TimeInterval_Day</span></span>
  * <span data-ttu-id="9875b-254">TimeInterval_Week</span><span class="sxs-lookup"><span data-stu-id="9875b-254">TimeInterval_Week</span></span>
  * <span data-ttu-id="9875b-255">TimeInterval_Year</span><span class="sxs-lookup"><span data-stu-id="9875b-255">TimeInterval_Year</span></span>

## <a name="operations"></a><span data-ttu-id="9875b-256">Operazioni</span><span class="sxs-lookup"><span data-stu-id="9875b-256">Operations</span></span>
<span data-ttu-id="9875b-257">Queste operazioni sono consentite sui tipi di hello elencati nella sezione precedente hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-257">These operations are allowed on hello types that are listed in hello previous section.</span></span>

| <span data-ttu-id="9875b-258">Operazione</span><span class="sxs-lookup"><span data-stu-id="9875b-258">Operation</span></span> | <span data-ttu-id="9875b-259">Operatori supportati</span><span class="sxs-lookup"><span data-stu-id="9875b-259">Supported operators</span></span> | <span data-ttu-id="9875b-260">Tipo di risultato</span><span class="sxs-lookup"><span data-stu-id="9875b-260">Result type</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9875b-261">double *operatore* double</span><span class="sxs-lookup"><span data-stu-id="9875b-261">double *operator* double</span></span> |<span data-ttu-id="9875b-262">+, -, *, /</span><span class="sxs-lookup"><span data-stu-id="9875b-262">+, -, *, /</span></span> |<span data-ttu-id="9875b-263">double</span><span class="sxs-lookup"><span data-stu-id="9875b-263">double</span></span> |
| <span data-ttu-id="9875b-264">double *operatore* timeinterval</span><span class="sxs-lookup"><span data-stu-id="9875b-264">double *operator* timeinterval</span></span> |* |<span data-ttu-id="9875b-265">timeInterval</span><span class="sxs-lookup"><span data-stu-id="9875b-265">timeinterval</span></span> |
| <span data-ttu-id="9875b-266">doubleVec *operatore* double</span><span class="sxs-lookup"><span data-stu-id="9875b-266">doubleVec *operator* double</span></span> |<span data-ttu-id="9875b-267">+, -, *, /</span><span class="sxs-lookup"><span data-stu-id="9875b-267">+, -, *, /</span></span> |<span data-ttu-id="9875b-268">doubleVec</span><span class="sxs-lookup"><span data-stu-id="9875b-268">doubleVec</span></span> |
| <span data-ttu-id="9875b-269">doubleVec *operatore* doubleVec</span><span class="sxs-lookup"><span data-stu-id="9875b-269">doubleVec *operator* doubleVec</span></span> |<span data-ttu-id="9875b-270">+, -, *, /</span><span class="sxs-lookup"><span data-stu-id="9875b-270">+, -, *, /</span></span> |<span data-ttu-id="9875b-271">doubleVec</span><span class="sxs-lookup"><span data-stu-id="9875b-271">doubleVec</span></span> |
| <span data-ttu-id="9875b-272">timeinterval *operatore* double</span><span class="sxs-lookup"><span data-stu-id="9875b-272">timeinterval *operator* double</span></span> |<span data-ttu-id="9875b-273">*, /</span><span class="sxs-lookup"><span data-stu-id="9875b-273">*, /</span></span> |<span data-ttu-id="9875b-274">timeInterval</span><span class="sxs-lookup"><span data-stu-id="9875b-274">timeinterval</span></span> |
| <span data-ttu-id="9875b-275">timeinterval *operatore* timeinterval</span><span class="sxs-lookup"><span data-stu-id="9875b-275">timeinterval *operator* timeinterval</span></span> |<span data-ttu-id="9875b-276">+, -</span><span class="sxs-lookup"><span data-stu-id="9875b-276">+, -</span></span> |<span data-ttu-id="9875b-277">timeInterval</span><span class="sxs-lookup"><span data-stu-id="9875b-277">timeinterval</span></span> |
| <span data-ttu-id="9875b-278">timeinterval *operatore* timestamp</span><span class="sxs-lookup"><span data-stu-id="9875b-278">timeinterval *operator* timestamp</span></span> |+ |<span data-ttu-id="9875b-279">timestamp</span><span class="sxs-lookup"><span data-stu-id="9875b-279">timestamp</span></span> |
| <span data-ttu-id="9875b-280">timestamp *operatore* timeinterval</span><span class="sxs-lookup"><span data-stu-id="9875b-280">timestamp *operator* timeinterval</span></span> |+ |<span data-ttu-id="9875b-281">timestamp</span><span class="sxs-lookup"><span data-stu-id="9875b-281">timestamp</span></span> |
| <span data-ttu-id="9875b-282">timestamp *operatore* timestamp</span><span class="sxs-lookup"><span data-stu-id="9875b-282">timestamp *operator* timestamp</span></span> |- |<span data-ttu-id="9875b-283">timeInterval</span><span class="sxs-lookup"><span data-stu-id="9875b-283">timeinterval</span></span> |
| <span data-ttu-id="9875b-284">*operatoree*double</span><span class="sxs-lookup"><span data-stu-id="9875b-284">*operator*double</span></span> |<span data-ttu-id="9875b-285">-, !</span><span class="sxs-lookup"><span data-stu-id="9875b-285">-, !</span></span> |<span data-ttu-id="9875b-286">double</span><span class="sxs-lookup"><span data-stu-id="9875b-286">double</span></span> |
| <span data-ttu-id="9875b-287">*operatoree*timeInterval</span><span class="sxs-lookup"><span data-stu-id="9875b-287">*operator*timeinterval</span></span> |- |<span data-ttu-id="9875b-288">timeInterval</span><span class="sxs-lookup"><span data-stu-id="9875b-288">timeinterval</span></span> |
| <span data-ttu-id="9875b-289">double *operatore* double</span><span class="sxs-lookup"><span data-stu-id="9875b-289">double *operator* double</span></span> |<span data-ttu-id="9875b-290"><, <=, ==, >=, >, !=</span><span class="sxs-lookup"><span data-stu-id="9875b-290"><, <=, ==, >=, >, !=</span></span> |<span data-ttu-id="9875b-291">double</span><span class="sxs-lookup"><span data-stu-id="9875b-291">double</span></span> |
| <span data-ttu-id="9875b-292">string *operatore* string</span><span class="sxs-lookup"><span data-stu-id="9875b-292">string *operator* string</span></span> |<span data-ttu-id="9875b-293"><, <=, ==, >=, >, !=</span><span class="sxs-lookup"><span data-stu-id="9875b-293"><, <=, ==, >=, >, !=</span></span> |<span data-ttu-id="9875b-294">double</span><span class="sxs-lookup"><span data-stu-id="9875b-294">double</span></span> |
| <span data-ttu-id="9875b-295">timestamp *operatore* timestamp</span><span class="sxs-lookup"><span data-stu-id="9875b-295">timestamp *operator* timestamp</span></span> |<span data-ttu-id="9875b-296"><, <=, ==, >=, >, !=</span><span class="sxs-lookup"><span data-stu-id="9875b-296"><, <=, ==, >=, >, !=</span></span> |<span data-ttu-id="9875b-297">double</span><span class="sxs-lookup"><span data-stu-id="9875b-297">double</span></span> |
| <span data-ttu-id="9875b-298">timeinterval *operatore* timeinterval</span><span class="sxs-lookup"><span data-stu-id="9875b-298">timeinterval *operator* timeinterval</span></span> |<span data-ttu-id="9875b-299"><, <=, ==, >=, >, !=</span><span class="sxs-lookup"><span data-stu-id="9875b-299"><, <=, ==, >=, >, !=</span></span> |<span data-ttu-id="9875b-300">double</span><span class="sxs-lookup"><span data-stu-id="9875b-300">double</span></span> |
| <span data-ttu-id="9875b-301">double *operatore* double</span><span class="sxs-lookup"><span data-stu-id="9875b-301">double *operator* double</span></span> |<span data-ttu-id="9875b-302">&&, &#124;&#124;</span><span class="sxs-lookup"><span data-stu-id="9875b-302">&&, &#124;&#124;</span></span> |<span data-ttu-id="9875b-303">double</span><span class="sxs-lookup"><span data-stu-id="9875b-303">double</span></span> |

<span data-ttu-id="9875b-304">Durante il test di un valore double con un operatore ternario (`double ? statement1 : statement2`), diverso da zero è **true** e zero è **false**.</span><span class="sxs-lookup"><span data-stu-id="9875b-304">When testing a double with a ternary operator (`double ? statement1 : statement2`), nonzero is **true**, and zero is **false**.</span></span>

## <a name="functions"></a><span data-ttu-id="9875b-305">Funzioni</span><span class="sxs-lookup"><span data-stu-id="9875b-305">Functions</span></span>
<span data-ttu-id="9875b-306">Questi predefiniti **funzioni** sono disponibili per toouse nella definizione di una formula di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-306">These predefined **functions** are available for you toouse in defining an automatic scaling formula.</span></span>

| <span data-ttu-id="9875b-307">Funzione</span><span class="sxs-lookup"><span data-stu-id="9875b-307">Function</span></span> | <span data-ttu-id="9875b-308">Tipo restituito</span><span class="sxs-lookup"><span data-stu-id="9875b-308">Return type</span></span> | <span data-ttu-id="9875b-309">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9875b-309">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9875b-310">avg(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-310">avg(doubleVecList)</span></span> |<span data-ttu-id="9875b-311">double</span><span class="sxs-lookup"><span data-stu-id="9875b-311">double</span></span> |<span data-ttu-id="9875b-312">Restituisce hello valore medio per tutti i valori in doubleVecList hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-312">Returns hello average value for all values in hello doubleVecList.</span></span> |
| <span data-ttu-id="9875b-313">len(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-313">len(doubleVecList)</span></span> |<span data-ttu-id="9875b-314">double</span><span class="sxs-lookup"><span data-stu-id="9875b-314">double</span></span> |<span data-ttu-id="9875b-315">Restituisce hello lunghezza del vettore hello creato da doubleVecList hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-315">Returns hello length of hello vector that is created from hello doubleVecList.</span></span> |
| <span data-ttu-id="9875b-316">lg(double)</span><span class="sxs-lookup"><span data-stu-id="9875b-316">lg(double)</span></span> |<span data-ttu-id="9875b-317">double</span><span class="sxs-lookup"><span data-stu-id="9875b-317">double</span></span> |<span data-ttu-id="9875b-318">Restituisce hello logaritmo in base 2 di hello double.</span><span class="sxs-lookup"><span data-stu-id="9875b-318">Returns hello log base 2 of hello double.</span></span> |
| <span data-ttu-id="9875b-319">lg(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-319">lg(doubleVecList)</span></span> |<span data-ttu-id="9875b-320">doubleVec</span><span class="sxs-lookup"><span data-stu-id="9875b-320">doubleVec</span></span> |<span data-ttu-id="9875b-321">Restituisce hello component-wise logaritmo in base 2 di hello doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="9875b-321">Returns hello component-wise log base 2 of hello doubleVecList.</span></span> <span data-ttu-id="9875b-322">Un vec (Double) deve essere passato in modo esplicito per il parametro hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-322">A vec(double) must be explicitly passed for hello parameter.</span></span> <span data-ttu-id="9875b-323">In caso contrario, verrà utilizzato versione double LG (Double) hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-323">Otherwise, hello double lg(double) version is assumed.</span></span> |
| <span data-ttu-id="9875b-324">ln(double)</span><span class="sxs-lookup"><span data-stu-id="9875b-324">ln(double)</span></span> |<span data-ttu-id="9875b-325">double</span><span class="sxs-lookup"><span data-stu-id="9875b-325">double</span></span> |<span data-ttu-id="9875b-326">Restituisce hello logaritmo naturale di hello double.</span><span class="sxs-lookup"><span data-stu-id="9875b-326">Returns hello natural log of hello double.</span></span> |
| <span data-ttu-id="9875b-327">ln(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-327">ln(doubleVecList)</span></span> |<span data-ttu-id="9875b-328">doubleVec</span><span class="sxs-lookup"><span data-stu-id="9875b-328">doubleVec</span></span> |<span data-ttu-id="9875b-329">Restituisce hello component-wise logaritmo in base 2 di hello doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="9875b-329">Returns hello component-wise log base 2 of hello doubleVecList.</span></span> <span data-ttu-id="9875b-330">Un vec (Double) deve essere passato in modo esplicito per il parametro hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-330">A vec(double) must be explicitly passed for hello parameter.</span></span> <span data-ttu-id="9875b-331">In caso contrario, verrà utilizzato versione double LG (Double) hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-331">Otherwise, hello double lg(double) version is assumed.</span></span> |
| <span data-ttu-id="9875b-332">log(double)</span><span class="sxs-lookup"><span data-stu-id="9875b-332">log(double)</span></span> |<span data-ttu-id="9875b-333">double</span><span class="sxs-lookup"><span data-stu-id="9875b-333">double</span></span> |<span data-ttu-id="9875b-334">Restituisce hello logaritmo in base 10 di hello double.</span><span class="sxs-lookup"><span data-stu-id="9875b-334">Returns hello log base 10 of hello double.</span></span> |
| <span data-ttu-id="9875b-335">log(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-335">log(doubleVecList)</span></span> |<span data-ttu-id="9875b-336">doubleVec</span><span class="sxs-lookup"><span data-stu-id="9875b-336">doubleVec</span></span> |<span data-ttu-id="9875b-337">Restituisce hello component-wise logaritmo in base 10 di hello doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="9875b-337">Returns hello component-wise log base 10 of hello doubleVecList.</span></span> <span data-ttu-id="9875b-338">Un vec (Double) deve essere passato in modo esplicito per il singolo parametro double hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-338">A vec(double) must be explicitly passed for hello single double parameter.</span></span> <span data-ttu-id="9875b-339">In caso contrario, verrà utilizzato versione double log (Double) hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-339">Otherwise, hello double log(double) version is assumed.</span></span> |
| <span data-ttu-id="9875b-340">max(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-340">max(doubleVecList)</span></span> |<span data-ttu-id="9875b-341">double</span><span class="sxs-lookup"><span data-stu-id="9875b-341">double</span></span> |<span data-ttu-id="9875b-342">Restituisce hello valore massimo in doubleVecList hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-342">Returns hello maximum value in hello doubleVecList.</span></span> |
| <span data-ttu-id="9875b-343">min(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-343">min(doubleVecList)</span></span> |<span data-ttu-id="9875b-344">double</span><span class="sxs-lookup"><span data-stu-id="9875b-344">double</span></span> |<span data-ttu-id="9875b-345">Restituisce hello valore minimo in doubleVecList hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-345">Returns hello minimum value in hello doubleVecList.</span></span> |
| <span data-ttu-id="9875b-346">norm(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-346">norm(doubleVecList)</span></span> |<span data-ttu-id="9875b-347">double</span><span class="sxs-lookup"><span data-stu-id="9875b-347">double</span></span> |<span data-ttu-id="9875b-348">Restituisce hello seminorma del vettore hello creato da doubleVecList hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-348">Returns hello two-norm of hello vector that is created from hello doubleVecList.</span></span> |
| <span data-ttu-id="9875b-349">percentile(doubleVec v, double p)</span><span class="sxs-lookup"><span data-stu-id="9875b-349">percentile(doubleVec v, double p)</span></span> |<span data-ttu-id="9875b-350">double</span><span class="sxs-lookup"><span data-stu-id="9875b-350">double</span></span> |<span data-ttu-id="9875b-351">Restituisce hello elemento percentile del vettore hello v.</span><span class="sxs-lookup"><span data-stu-id="9875b-351">Returns hello percentile element of hello vector v.</span></span> |
| <span data-ttu-id="9875b-352">rand()</span><span class="sxs-lookup"><span data-stu-id="9875b-352">rand()</span></span> |<span data-ttu-id="9875b-353">double</span><span class="sxs-lookup"><span data-stu-id="9875b-353">double</span></span> |<span data-ttu-id="9875b-354">Restituisce un valore casuale compreso tra 0,0 e 1,0.</span><span class="sxs-lookup"><span data-stu-id="9875b-354">Returns a random value between 0.0 and 1.0.</span></span> |
| <span data-ttu-id="9875b-355">range(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-355">range(doubleVecList)</span></span> |<span data-ttu-id="9875b-356">double</span><span class="sxs-lookup"><span data-stu-id="9875b-356">double</span></span> |<span data-ttu-id="9875b-357">Restituisce la differenza di hello tra valori hello minimo e massimo in doubleVecList hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-357">Returns hello difference between hello min and max values in hello doubleVecList.</span></span> |
| <span data-ttu-id="9875b-358">std(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-358">std(doubleVecList)</span></span> |<span data-ttu-id="9875b-359">double</span><span class="sxs-lookup"><span data-stu-id="9875b-359">double</span></span> |<span data-ttu-id="9875b-360">Restituisce hello deviazione standard del campione di valori hello in hello doubleVecList.</span><span class="sxs-lookup"><span data-stu-id="9875b-360">Returns hello sample standard deviation of hello values in hello doubleVecList.</span></span> |
| <span data-ttu-id="9875b-361">stop()</span><span class="sxs-lookup"><span data-stu-id="9875b-361">stop()</span></span> | |<span data-ttu-id="9875b-362">Arresta la valutazione dell'espressione per la scalabilità automatica hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-362">Stops evaluation of hello autoscaling expression.</span></span> |
| <span data-ttu-id="9875b-363">sum(doubleVecList)</span><span class="sxs-lookup"><span data-stu-id="9875b-363">sum(doubleVecList)</span></span> |<span data-ttu-id="9875b-364">double</span><span class="sxs-lookup"><span data-stu-id="9875b-364">double</span></span> |<span data-ttu-id="9875b-365">Restituisce hello somma di tutti i componenti di doubleVecList hello hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-365">Returns hello sum of all hello components of hello doubleVecList.</span></span> |
| <span data-ttu-id="9875b-366">time(string dateTime="")</span><span class="sxs-lookup"><span data-stu-id="9875b-366">time(string dateTime="")</span></span> |<span data-ttu-id="9875b-367">timestamp</span><span class="sxs-lookup"><span data-stu-id="9875b-367">timestamp</span></span> |<span data-ttu-id="9875b-368">Restituisce timestamp hello di hello ora corrente, se nessun parametro viene passato o hello timestamp della stringa dateTime hello se viene passato.</span><span class="sxs-lookup"><span data-stu-id="9875b-368">Returns hello time stamp of hello current time if no parameters are passed, or hello time stamp of hello dateTime string if it is passed.</span></span> <span data-ttu-id="9875b-369">I formati dateTime supportati sono W3C-DTF e RFC 1123.</span><span class="sxs-lookup"><span data-stu-id="9875b-369">Supported dateTime formats are W3C-DTF and RFC 1123.</span></span> |
| <span data-ttu-id="9875b-370">val(doubleVec v, double i)</span><span class="sxs-lookup"><span data-stu-id="9875b-370">val(doubleVec v, double i)</span></span> |<span data-ttu-id="9875b-371">double</span><span class="sxs-lookup"><span data-stu-id="9875b-371">double</span></span> |<span data-ttu-id="9875b-372">Restituisce il valore di hello dell'elemento hello nella posizione i nel vettore v con un indice iniziale pari a zero.</span><span class="sxs-lookup"><span data-stu-id="9875b-372">Returns hello value of hello element that is at location i in vector v, with a starting index of zero.</span></span> |

<span data-ttu-id="9875b-373">Alcune funzioni che sono descritte nella tabella precedente hello hello può accettare un elenco come argomento.</span><span class="sxs-lookup"><span data-stu-id="9875b-373">Some of hello functions that are described in hello previous table can accept a list as an argument.</span></span> <span data-ttu-id="9875b-374">elenco delimitato da virgole di Hello è qualsiasi combinazione di *doppie* e *doubleVec*.</span><span class="sxs-lookup"><span data-stu-id="9875b-374">hello comma-separated list is any combination of *double* and *doubleVec*.</span></span> <span data-ttu-id="9875b-375">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="9875b-375">For example:</span></span>

`doubleVecList := ( (double | doubleVec)+(, (double | doubleVec) )* )?`

<span data-ttu-id="9875b-376">Hello *doubleVecList* valore viene convertito tooa singolo *doubleVec* prima della valutazione.</span><span class="sxs-lookup"><span data-stu-id="9875b-376">hello *doubleVecList* value is converted tooa single *doubleVec* before evaluation.</span></span> <span data-ttu-id="9875b-377">Ad esempio, se `v = [1,2,3]`, quindi chiamare `avg(v)` è equivalente toocalling `avg(1,2,3)`.</span><span class="sxs-lookup"><span data-stu-id="9875b-377">For example, if `v = [1,2,3]`, then calling `avg(v)` is equivalent toocalling `avg(1,2,3)`.</span></span> <span data-ttu-id="9875b-378">La chiamata `avg(v, 7)` è equivalente toocalling `avg(1,2,3,7)`.</span><span class="sxs-lookup"><span data-stu-id="9875b-378">Calling `avg(v, 7)` is equivalent toocalling `avg(1,2,3,7)`.</span></span>

## <span data-ttu-id="9875b-379"><a name="getsampledata"></a>Ottenere dati di esempio</span><span class="sxs-lookup"><span data-stu-id="9875b-379"><a name="getsampledata"></a>Obtain sample data</span></span>
<span data-ttu-id="9875b-380">Formule di scalabilità automatica agiscono su dati di metrica (esempi) fornito dal servizio Batch hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-380">Autoscale formulas act on metrics data (samples) that is provided by hello Batch service.</span></span> <span data-ttu-id="9875b-381">Una formula aumenta o riduce le dimensioni del pool in base a valori hello ottenuto dal servizio hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-381">A formula grows or shrinks pool size based on hello values that it obtains from hello service.</span></span> <span data-ttu-id="9875b-382">Hello definito dal servizio le variabili sono stati descritti in precedenza sono oggetti che forniscono vari metodi tooaccess dati associato a tale oggetto.</span><span class="sxs-lookup"><span data-stu-id="9875b-382">hello service-defined variables that were described previously are objects that provide various methods tooaccess data that is associated with that object.</span></span> <span data-ttu-id="9875b-383">Ad esempio, hello espressione riportata di seguito viene illustrato un hello tooget richiesta ultimi 5 minuti di utilizzo della CPU:</span><span class="sxs-lookup"><span data-stu-id="9875b-383">For example, hello following expression shows a request tooget hello last five minutes of CPU usage:</span></span>

```
$CPUPercent.GetSample(TimeInterval_Minute * 5)
```

| <span data-ttu-id="9875b-384">Metodo</span><span class="sxs-lookup"><span data-stu-id="9875b-384">Method</span></span> | <span data-ttu-id="9875b-385">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9875b-385">Description</span></span> |
| --- | --- |
| <span data-ttu-id="9875b-386">GetSample()</span><span class="sxs-lookup"><span data-stu-id="9875b-386">GetSample()</span></span> |<span data-ttu-id="9875b-387">Hello `GetSample()` metodo restituisce un vettore di esempi di dati.</span><span class="sxs-lookup"><span data-stu-id="9875b-387">hello `GetSample()` method returns a vector of data samples.</span></span><br/><br/><span data-ttu-id="9875b-388">Un campione rappresenta 30 secondi di dati di metrica.</span><span class="sxs-lookup"><span data-stu-id="9875b-388">A sample is 30 seconds worth of metrics data.</span></span> <span data-ttu-id="9875b-389">In altre parole i campioni vengono raccolti ogni 30 secondi,</span><span class="sxs-lookup"><span data-stu-id="9875b-389">In other words, samples are obtained every 30 seconds.</span></span> <span data-ttu-id="9875b-390">Ma, come indicato di seguito, si verifica un ritardo tra quando viene raccolto un campione e quando è disponibile tooa formula.</span><span class="sxs-lookup"><span data-stu-id="9875b-390">But as noted below, there is a delay between when a sample is collected and when it is available tooa formula.</span></span> <span data-ttu-id="9875b-391">Di conseguenza, i campioni per un determinato periodo di tempo potrebbero non essere tutti disponibili per la valutazione da parte di una formula.</span><span class="sxs-lookup"><span data-stu-id="9875b-391">As such, not all samples for a given time period may be available for evaluation by a formula.</span></span><ul><li>`doubleVec GetSample(double count)`<br/><span data-ttu-id="9875b-392">Specifica il numero di hello di esempi tooobtain dagli esempi più recenti hello che sono stati raccolti.</span><span class="sxs-lookup"><span data-stu-id="9875b-392">Specifies hello number of samples tooobtain from hello most recent samples that were collected.</span></span><br/><br/><span data-ttu-id="9875b-393">`GetSample(1)`Restituisce l'ultimo esempio disponibile di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-393">`GetSample(1)` returns hello last available sample.</span></span> <span data-ttu-id="9875b-394">Per le metriche quali `$CPUPercent`, tuttavia, questo non deve essere utilizzato perché è Impossibile tooknow *quando* è stato raccolto il campione hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-394">For metrics like `$CPUPercent`, however, this should not be used because it is impossible tooknow *when* hello sample was collected.</span></span> <span data-ttu-id="9875b-395">Potrebbe essere recente o risultare molto meno recente a causa di problemi di sistema.</span><span class="sxs-lookup"><span data-stu-id="9875b-395">It might be recent, or, because of system issues, it might be much older.</span></span> <span data-ttu-id="9875b-396">È preferibile in tali toouse casi un intervallo di tempo, come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="9875b-396">It is better in such cases toouse a time interval as shown below.</span></span><li>`doubleVec GetSample((timestamp or timeinterval) startTime [, double samplePercent])`<br/><span data-ttu-id="9875b-397">Specifica un intervallo di tempo per la raccolta di dati di esempio.</span><span class="sxs-lookup"><span data-stu-id="9875b-397">Specifies a time frame for gathering sample data.</span></span> <span data-ttu-id="9875b-398">Facoltativamente, specifica inoltre percentuale hello di campioni che deve essere disponibile in hello richiesto l'intervallo di tempo.</span><span class="sxs-lookup"><span data-stu-id="9875b-398">Optionally, it also specifies hello percentage of samples that must be available in hello requested time frame.</span></span><br/><br/><span data-ttu-id="9875b-399">`$CPUPercent.GetSample(TimeInterval_Minute * 10)`restituisce 20 campioni se sono presenti nella cronologia CPUPercent hello tutti i campioni per hello ultimi 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="9875b-399">`$CPUPercent.GetSample(TimeInterval_Minute * 10)` would return 20 samples if all samples for hello last 10 minutes are present in hello CPUPercent history.</span></span> <span data-ttu-id="9875b-400">Se hello ultimo minuto della cronologia non è disponibile, tuttavia, verranno restituiti solo 18 esempi.</span><span class="sxs-lookup"><span data-stu-id="9875b-400">If hello last minute of history was not available, however, only 18 samples would be returned.</span></span> <span data-ttu-id="9875b-401">In questo caso:</span><span class="sxs-lookup"><span data-stu-id="9875b-401">In this case:</span></span><br/><br/><span data-ttu-id="9875b-402">`$CPUPercent.GetSample(TimeInterval_Minute * 10, 95)`avrà esito negativo perché solo il 90% di campioni di hello sono disponibili.</span><span class="sxs-lookup"><span data-stu-id="9875b-402">`$CPUPercent.GetSample(TimeInterval_Minute * 10, 95)` would fail because only 90 percent of hello samples are available.</span></span><br/><br/><span data-ttu-id="9875b-403">`$CPUPercent.GetSample(TimeInterval_Minute * 10, 80)` avrà esito positivo.</span><span class="sxs-lookup"><span data-stu-id="9875b-403">`$CPUPercent.GetSample(TimeInterval_Minute * 10, 80)` would succeed.</span></span><li>`doubleVec GetSample((timestamp or timeinterval) startTime, (timestamp or timeinterval) endTime [, double samplePercent])`<br/><span data-ttu-id="9875b-404">Specifica un intervallo di tempo per la raccolta dei dati, con un'ora di inizio e un'ora di fine.</span><span class="sxs-lookup"><span data-stu-id="9875b-404">Specifies a time frame for gathering data, with both a start time and an end time.</span></span><br/><br/><span data-ttu-id="9875b-405">Come indicato in precedenza, si verifica un ritardo tra quando viene raccolto un campione e quando è disponibile tooa formula.</span><span class="sxs-lookup"><span data-stu-id="9875b-405">As mentioned above, there is a delay between when a sample is collected and when it is available tooa formula.</span></span> <span data-ttu-id="9875b-406">Considerare questo ritardo quando si utilizza hello `GetSample` metodo.</span><span class="sxs-lookup"><span data-stu-id="9875b-406">Consider this delay when you use hello `GetSample` method.</span></span> <span data-ttu-id="9875b-407">Vedere `GetSamplePercent` di seguito.</span><span class="sxs-lookup"><span data-stu-id="9875b-407">See `GetSamplePercent` below.</span></span> |
| <span data-ttu-id="9875b-408">GetSamplePeriod()</span><span class="sxs-lookup"><span data-stu-id="9875b-408">GetSamplePeriod()</span></span> |<span data-ttu-id="9875b-409">Restituisce il periodo di hello di campioni che sono stati eseguiti in un set di dati cronologici di esempio.</span><span class="sxs-lookup"><span data-stu-id="9875b-409">Returns hello period of samples that were taken in a historical sample data set.</span></span> |
| <span data-ttu-id="9875b-410">Count()</span><span class="sxs-lookup"><span data-stu-id="9875b-410">Count()</span></span> |<span data-ttu-id="9875b-411">Restituisce hello numero totale di campioni nella cronologia di metrica hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-411">Returns hello total number of samples in hello metric history.</span></span> |
| <span data-ttu-id="9875b-412">HistoryBeginTime()</span><span class="sxs-lookup"><span data-stu-id="9875b-412">HistoryBeginTime()</span></span> |<span data-ttu-id="9875b-413">Restituisce hello timestamp dell'esempio di dati disponibili per metrica hello meno recente hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-413">Returns hello time stamp of hello oldest available data sample for hello metric.</span></span> |
| <span data-ttu-id="9875b-414">GetSamplePercent()</span><span class="sxs-lookup"><span data-stu-id="9875b-414">GetSamplePercent()</span></span> |<span data-ttu-id="9875b-415">Restituisce hello percentuali di campioni che sono disponibili per un determinato intervallo di tempo.</span><span class="sxs-lookup"><span data-stu-id="9875b-415">Returns hello percentage of samples that are available for a given time interval.</span></span> <span data-ttu-id="9875b-416">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="9875b-416">For example:</span></span><br/><br/>`doubleVec GetSamplePercent( (timestamp or timeinterval) startTime [, (timestamp or timeinterval) endTime] )`<br/><br/><span data-ttu-id="9875b-417">Poiché hello `GetSample` metodo ha esito negativo se la percentuale di hello di campioni restituito è minore di hello `samplePercent` specificato, è possibile utilizzare hello `GetSamplePercent` metodo toocheck prima.</span><span class="sxs-lookup"><span data-stu-id="9875b-417">Because hello `GetSample` method fails if hello percentage of samples returned is less than hello `samplePercent` specified, you can use hello `GetSamplePercent` method toocheck first.</span></span> <span data-ttu-id="9875b-418">È quindi possibile eseguire un'azione alternativa se sufficienti esempi sono presenti, senza interrompere la valutazione di scalabilità automatica di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-418">Then you can perform an alternate action if insufficient samples are present, without halting hello automatic scaling evaluation.</span></span> |

### <a name="samples-sample-percentage-and-hello-getsample-method"></a><span data-ttu-id="9875b-419">Esempi, la percentuale di campionamento e hello *GetSample()* (metodo)</span><span class="sxs-lookup"><span data-stu-id="9875b-419">Samples, sample percentage, and hello *GetSample()* method</span></span>
<span data-ttu-id="9875b-420">funzionamento di base Hello di una formula di scalabilità automatica è tooobtain attività e risorse dati di metrica e quindi modificare le dimensioni del pool in base a tali dati.</span><span class="sxs-lookup"><span data-stu-id="9875b-420">hello core operation of an autoscale formula is tooobtain task and resource metric data and then adjust pool size based on that data.</span></span> <span data-ttu-id="9875b-421">Di conseguenza, è importante toohave una comprensione chiara della modalità di interazione delle formule di scalabilità automatica con i dati di metrica (esempi).</span><span class="sxs-lookup"><span data-stu-id="9875b-421">As such, it is important toohave a clear understanding of how autoscale formulas interact with metrics data (samples).</span></span>

<span data-ttu-id="9875b-422">**Esempi**</span><span class="sxs-lookup"><span data-stu-id="9875b-422">**Samples**</span></span>

<span data-ttu-id="9875b-423">Hello servizio Batch periodicamente accetta gli esempi di metriche di attività e risorse e li rende disponibili tooyour formule di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-423">hello Batch service periodically takes samples of task and resource metrics and makes them available tooyour autoscale formulas.</span></span> <span data-ttu-id="9875b-424">Questi esempi vengono registrati ogni 30 secondi per hello servizio Batch.</span><span class="sxs-lookup"><span data-stu-id="9875b-424">These samples are recorded every 30 seconds by hello Batch service.</span></span> <span data-ttu-id="9875b-425">Tuttavia, si verifica in genere un ritardo tra registrati quando tali esempi e quando vengono resi disponibili troppo (e può essere letto da) delle formule di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-425">However, there is typically a delay between when those samples were recorded and when they are made available too(and can be read by) your autoscale formulas.</span></span> <span data-ttu-id="9875b-426">Inoltre, a causa di fattori toovarious, ad esempio una rete o altri problemi di infrastruttura, gli esempi potrebbero non essere registrati per un determinato intervallo.</span><span class="sxs-lookup"><span data-stu-id="9875b-426">Additionally, due toovarious factors such as network or other infrastructure issues, samples may not be recorded for a particular interval.</span></span>

<span data-ttu-id="9875b-427">**Percentuale di campioni**</span><span class="sxs-lookup"><span data-stu-id="9875b-427">**Sample percentage**</span></span>

<span data-ttu-id="9875b-428">Quando `samplePercent` viene passato toohello `GetSample()` metodo o hello `GetSamplePercent()` metodo viene chiamato, _%_ fa riferimento confronto tooa tra hello possibile totale di campioni che vengono registrati dal servizio Batch hello e numero di Hello di campioni che sono disponibili tooyour formula di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-428">When `samplePercent` is passed toohello `GetSample()` method or hello `GetSamplePercent()` method is called, _percent_ refers tooa comparison between hello total possible number of samples that are recorded by hello Batch service and hello number of samples that are available tooyour autoscale formula.</span></span>

<span data-ttu-id="9875b-429">Come esempio, si esaminerà un intervallo di tempo di 10 minuti.</span><span class="sxs-lookup"><span data-stu-id="9875b-429">Let's look at a 10-minute timespan as an example.</span></span> <span data-ttu-id="9875b-430">Poiché gli esempi vengono registrati ogni 30 secondi all'interno di un intervallo di tempo di 10 minuti, hello numero massimo totale di campioni che vengono registrati dal Batch sarà 20 campioni (2 al minuto).</span><span class="sxs-lookup"><span data-stu-id="9875b-430">Because samples are recorded every 30 seconds within a 10-minute timespan, hello maximum total number of samples that are recorded by Batch would be 20 samples (2 per minute).</span></span> <span data-ttu-id="9875b-431">Tuttavia, a causa di latenza inerente a toohello di hello reporting meccanismo e altri problemi all'interno di Azure, è possibile solo 15 esempi disponibili tooyour formula di scalabilità automatica per la lettura.</span><span class="sxs-lookup"><span data-stu-id="9875b-431">However, due toohello inherent latency of hello reporting mechanism and other issues within Azure, there may be only 15 samples that are available tooyour autoscale formula for reading.</span></span> <span data-ttu-id="9875b-432">In tal caso, ad esempio, per tale periodo di 10 minuti, solo il 75% del numero totale di hello di campioni registrati possibile formula tooyour disponibili.</span><span class="sxs-lookup"><span data-stu-id="9875b-432">So, for example, for that 10-minute period, only 75% of hello total number of samples recorded may be available tooyour formula.</span></span>

<span data-ttu-id="9875b-433">**GetSample() e intervalli di campioni**</span><span class="sxs-lookup"><span data-stu-id="9875b-433">**GetSample() and sample ranges**</span></span>

<span data-ttu-id="9875b-434">Le formule di scalabilità automatica sono in corso toobe espansione e riduzione del pool di &mdash; aggiunta di nodi o rimozione di nodi.</span><span class="sxs-lookup"><span data-stu-id="9875b-434">Your autoscale formulas are going toobe growing and shrinking your pools &mdash; adding nodes or removing nodes.</span></span> <span data-ttu-id="9875b-435">Poiché i nodi una perdita di denaro, si desidera tooensure che le formule utilizzano un metodo di analisi che si basa su dati sufficienti intelligente.</span><span class="sxs-lookup"><span data-stu-id="9875b-435">Because nodes cost you money, you want tooensure that your formulas use an intelligent method of analysis that is based on sufficient data.</span></span> <span data-ttu-id="9875b-436">È quindi consigliabile usare un tipo di analisi delle tendenze nelle formule,</span><span class="sxs-lookup"><span data-stu-id="9875b-436">Therefore, we recommend that you use a trending-type analysis in your formulas.</span></span> <span data-ttu-id="9875b-437">aumentando e riducendo i pool in base a un intervallo di campioni raccolti.</span><span class="sxs-lookup"><span data-stu-id="9875b-437">This type grows and shrinks your pools based on a range of collected samples.</span></span>

<span data-ttu-id="9875b-438">toodo in tal caso, utilizzare `GetSample(interval look-back start, interval look-back end)` tooreturn un vettore di campioni:</span><span class="sxs-lookup"><span data-stu-id="9875b-438">toodo so, use `GetSample(interval look-back start, interval look-back end)` tooreturn a vector of samples:</span></span>

```
$runningTasksSample = $RunningTasks.GetSample(1 * TimeInterval_Minute, 6 * TimeInterval_Minute);
```

<span data-ttu-id="9875b-439">Quando hello sopra linea viene valutata dal Batch, restituisce un elenco di esempi di come un vettore di valori.</span><span class="sxs-lookup"><span data-stu-id="9875b-439">When hello above line is evaluated by Batch, it returns a range of samples as a vector of values.</span></span> <span data-ttu-id="9875b-440">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="9875b-440">For example:</span></span>

```
$runningTasksSample=[1,1,1,1,1,1,1,1,1,1];
```

<span data-ttu-id="9875b-441">Dopo aver raccolto il vettore di hello di esempi, è quindi possibile utilizzare funzioni quali `min()`, `max()`, e `avg()` tooderive valori significativi da hello raccolti intervallo.</span><span class="sxs-lookup"><span data-stu-id="9875b-441">Once you've collected hello vector of samples, you can then use functions like `min()`, `max()`, and `avg()` tooderive meaningful values from hello collected range.</span></span>

<span data-ttu-id="9875b-442">Per una maggiore sicurezza, è possibile forzare una formula di valutazione toofail se inferiore a una determinata percentuale di esempio è disponibile per un determinato periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="9875b-442">For additional security, you can force a formula evaluation toofail if less than a certain sample percentage is available for a particular time period.</span></span> <span data-ttu-id="9875b-443">Se si forza toofail una formula di valutazione, è indicare toocease Batch un'ulteriore valutazione della formula hello se hello specificato percentuali di campioni non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="9875b-443">When you force a formula evaluation toofail, you instruct Batch toocease further evaluation of hello formula if hello specified percentage of samples is not available.</span></span> <span data-ttu-id="9875b-444">In questo caso, dimensioni del pool toohello viene apportata alcuna modifica.</span><span class="sxs-lookup"><span data-stu-id="9875b-444">In this case, no change is made toohello pool size.</span></span> <span data-ttu-id="9875b-445">toospecify una percentuale di campioni per toosucceed valutazione hello, obbligatoria specificarlo come hello terzo parametro troppo`GetSample()`.</span><span class="sxs-lookup"><span data-stu-id="9875b-445">toospecify a required percentage of samples for hello evaluation toosucceed, specify it as hello third parameter too`GetSample()`.</span></span> <span data-ttu-id="9875b-446">Qui è specificato un requisito pari al 75% dei campioni:</span><span class="sxs-lookup"><span data-stu-id="9875b-446">Here, a requirement of 75 percent of samples is specified:</span></span>

```
$runningTasksSample = $RunningTasks.GetSample(60 * TimeInterval_Second, 120 * TimeInterval_Second, 75);
```

<span data-ttu-id="9875b-447">Poiché possono essere presenti un ritardo nella disponibilità di esempio, è importante tooalways specificare un intervallo di tempo con un'ora di inizio ricerca back antecedenti a un minuto.</span><span class="sxs-lookup"><span data-stu-id="9875b-447">Because there may be a delay in sample availability, it is important tooalways specify a time range with a look-back start time that is older than one minute.</span></span> <span data-ttu-id="9875b-448">Per esempi toopropagate attraverso il sistema di hello, pertanto esempi nell'intervallo di hello, richiede circa un minuto `(0 * TimeInterval_Second, 60 * TimeInterval_Second)` potrebbe non essere disponibile.</span><span class="sxs-lookup"><span data-stu-id="9875b-448">It takes approximately one minute for samples toopropagate through hello system, so samples in hello range `(0 * TimeInterval_Second, 60 * TimeInterval_Second)` may not be available.</span></span> <span data-ttu-id="9875b-449">Nuovamente, è possibile utilizzare il parametro di percentuale hello di `GetSample()` tooforce un requisito di percentuale di esempio specifico.</span><span class="sxs-lookup"><span data-stu-id="9875b-449">Again, you can use hello percentage parameter of `GetSample()` tooforce a particular sample percentage requirement.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="9875b-450">È **consigliabile** **evitare di basarsi *solo* su `GetSample(1)` nelle formule di scalabilità automatica**.</span><span class="sxs-lookup"><span data-stu-id="9875b-450">We **strongly recommend** that you **avoid relying *only* on `GetSample(1)` in your autoscale formulas**.</span></span> <span data-ttu-id="9875b-451">In questo modo `GetSample(1)` essenzialmente afferma servizio Batch toohello, "Offrono me hello ultimo esempio si dispone, indipendentemente dal tempo trascorso che è stato recuperato."</span><span class="sxs-lookup"><span data-stu-id="9875b-451">This is because `GetSample(1)` essentially says toohello Batch service, "Give me hello last sample you have, no matter how long ago you retrieved it."</span></span> <span data-ttu-id="9875b-452">Poiché è solo un singolo campione e può essere un esempio precedente, potrebbe non essere rappresentativo di immagine hello dell'attività recente o lo stato della risorsa.</span><span class="sxs-lookup"><span data-stu-id="9875b-452">Since it is only a single sample, and it may be an older sample, it may not be representative of hello larger picture of recent task or resource state.</span></span> <span data-ttu-id="9875b-453">Se si utilizza `GetSample(1)`, assicurarsi che è parte di un'istruzione più grande e non hello solo punto dati da cui dipende la formula.</span><span class="sxs-lookup"><span data-stu-id="9875b-453">If you do use `GetSample(1)`, make sure that it's part of a larger statement and not hello only data point that your formula relies on.</span></span>
>
>

## <a name="metrics"></a><span data-ttu-id="9875b-454">Metrica</span><span class="sxs-lookup"><span data-stu-id="9875b-454">Metrics</span></span>
<span data-ttu-id="9875b-455">Quando si definisce una formula, è possibile usare metriche di risorse e di attività.</span><span class="sxs-lookup"><span data-stu-id="9875b-455">You can use both resource and task metrics when you're defining a formula.</span></span> <span data-ttu-id="9875b-456">È regolare il numero di destinazione hello dei nodi dedicati in pool hello in base ai dati di metrica hello che è possibile ottenere e valutare.</span><span class="sxs-lookup"><span data-stu-id="9875b-456">You adjust hello target number of dedicated nodes in hello pool based on hello metrics data that you obtain and evaluate.</span></span> <span data-ttu-id="9875b-457">Vedere hello [variabili](#variables) precedente sezione per ulteriori informazioni su ogni metrica.</span><span class="sxs-lookup"><span data-stu-id="9875b-457">See hello [Variables](#variables) section above for more information on each metric.</span></span>

<table>
  <tr>
    <th><span data-ttu-id="9875b-458">Metrica</span><span class="sxs-lookup"><span data-stu-id="9875b-458">Metric</span></span></th>
    <th><span data-ttu-id="9875b-459">Descrizione</span><span class="sxs-lookup"><span data-stu-id="9875b-459">Description</span></span></th>
  </tr>
  <tr>
    <td><span data-ttu-id="9875b-460"><b>Risorsa</b></span><span class="sxs-lookup"><span data-stu-id="9875b-460"><b>Resource</b></span></span></td>
    <td><p><span data-ttu-id="9875b-461">Metriche delle risorse basati su hello CPU, larghezza di banda hello, utilizzo della memoria hello di nodi di calcolo e hello numero di nodi.</span><span class="sxs-lookup"><span data-stu-id="9875b-461">Resource metrics are based on hello CPU, hello bandwidth, hello memory usage of compute nodes, and hello number of nodes.</span></span></p>
        <p> <span data-ttu-id="9875b-462">Queste variabili definite dal servizio sono utili per eseguire adeguamenti in base al conteggio dei nodi:</span><span class="sxs-lookup"><span data-stu-id="9875b-462">These service-defined variables are useful for making adjustments based on node count:</span></span></p>
    <p><ul>
            <li><span data-ttu-id="9875b-463">$TargetDedicatedNodes</span><span class="sxs-lookup"><span data-stu-id="9875b-463">$TargetDedicatedNodes</span></span></li>
            <li><span data-ttu-id="9875b-464">$TargetLowPriorityNodes</span><span class="sxs-lookup"><span data-stu-id="9875b-464">$TargetLowPriorityNodes</span></span></li>
            <li><span data-ttu-id="9875b-465">$CurrentDedicatedNodes</span><span class="sxs-lookup"><span data-stu-id="9875b-465">$CurrentDedicatedNodes</span></span></li>
            <li><span data-ttu-id="9875b-466">$CurrentLowPriorityNodes</span><span class="sxs-lookup"><span data-stu-id="9875b-466">$CurrentLowPriorityNodes</span></span></li>
            <li><span data-ttu-id="9875b-467">$preemptedNodeCount</span><span class="sxs-lookup"><span data-stu-id="9875b-467">$preemptedNodeCount</span></span></li>
            <li><span data-ttu-id="9875b-468">$SampleNodeCount</span><span class="sxs-lookup"><span data-stu-id="9875b-468">$SampleNodeCount</span></span></li>
    </ul></p>
    <p><span data-ttu-id="9875b-469">Queste variabili definite dal servizio sono utili per eseguire adeguamenti in base all'utilizzo delle risorse dei nodi:</span><span class="sxs-lookup"><span data-stu-id="9875b-469">These service-defined variables are useful for making adjustments based on node resource usage:</span></span></p>
    <p><ul>
      <li><span data-ttu-id="9875b-470">$CPUPercent</span><span class="sxs-lookup"><span data-stu-id="9875b-470">$CPUPercent</span></span></li>
      <li><span data-ttu-id="9875b-471">$WallClockSeconds</span><span class="sxs-lookup"><span data-stu-id="9875b-471">$WallClockSeconds</span></span></li>
      <li><span data-ttu-id="9875b-472">$MemoryBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-472">$MemoryBytes</span></span></li>
      <li><span data-ttu-id="9875b-473">$DiskBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-473">$DiskBytes</span></span></li>
      <li><span data-ttu-id="9875b-474">$DiskReadBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-474">$DiskReadBytes</span></span></li>
      <li><span data-ttu-id="9875b-475">$DiskWriteBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-475">$DiskWriteBytes</span></span></li>
      <li><span data-ttu-id="9875b-476">$DiskReadOps</span><span class="sxs-lookup"><span data-stu-id="9875b-476">$DiskReadOps</span></span></li>
      <li><span data-ttu-id="9875b-477">$DiskWriteOps</span><span class="sxs-lookup"><span data-stu-id="9875b-477">$DiskWriteOps</span></span></li>
      <li><span data-ttu-id="9875b-478">$NetworkInBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-478">$NetworkInBytes</span></span></li>
      <li><span data-ttu-id="9875b-479">$NetworkOutBytes</span><span class="sxs-lookup"><span data-stu-id="9875b-479">$NetworkOutBytes</span></span></li></ul></p>
  </tr>
  <tr>
    <td><span data-ttu-id="9875b-480"><b>Task</b></span><span class="sxs-lookup"><span data-stu-id="9875b-480"><b>Task</b></span></span></td>
    <td><p><span data-ttu-id="9875b-481">Le metriche di attività sono in base allo stato di hello di attività, come ad esempio attivo, in sospeso e completate.</span><span class="sxs-lookup"><span data-stu-id="9875b-481">Task metrics are based on hello status of tasks, such as Active, Pending, and Completed.</span></span> <span data-ttu-id="9875b-482">Hello seguenti variabili definito dal servizio sono utili per apportare modifiche di dimensione del pool in base alle metriche di attività:</span><span class="sxs-lookup"><span data-stu-id="9875b-482">hello following service-defined variables are useful for making pool-size adjustments based on task metrics:</span></span></p>
    <p><ul>
      <li><span data-ttu-id="9875b-483">$ActiveTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-483">$ActiveTasks</span></span></li>
      <li><span data-ttu-id="9875b-484">$RunningTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-484">$RunningTasks</span></span></li>
      <li><span data-ttu-id="9875b-485">$PendingTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-485">$PendingTasks</span></span></li>
      <li><span data-ttu-id="9875b-486">$SucceededTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-486">$SucceededTasks</span></span></li>
            <li><span data-ttu-id="9875b-487">$FailedTasks</span><span class="sxs-lookup"><span data-stu-id="9875b-487">$FailedTasks</span></span></li></ul></p>
        </td>
  </tr>
</table>

## <a name="write-an-autoscale-formula"></a><span data-ttu-id="9875b-488">Scrivere una formula di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="9875b-488">Write an autoscale formula</span></span>
<span data-ttu-id="9875b-489">Per compilare una formula di scalabilità automatica che costituiscono le istruzioni che utilizzano hello in precedenza componenti, quindi combinare tali istruzioni in una formula completa.</span><span class="sxs-lookup"><span data-stu-id="9875b-489">You build an autoscale formula by forming statements that use hello above components, then combine those statements into a complete formula.</span></span> <span data-ttu-id="9875b-490">In questa sezione si crea una formula di scalabilità automatica di esempio che può assumere alcune decisioni di scalabilità in scenari del mondo reale.</span><span class="sxs-lookup"><span data-stu-id="9875b-490">In this section, we create an example autoscale formula that can perform some real-world scaling decisions.</span></span>

<span data-ttu-id="9875b-491">In primo luogo, è pertanto possibile definire i requisiti di hello per la nuova formula di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-491">First, let's define hello requirements for our new autoscale formula.</span></span> <span data-ttu-id="9875b-492">formula Hello deve:</span><span class="sxs-lookup"><span data-stu-id="9875b-492">hello formula should:</span></span>

1. <span data-ttu-id="9875b-493">Aumentare il numero di destinazione di hello dedicato di nodi di calcolo in un pool se l'utilizzo della CPU è elevato.</span><span class="sxs-lookup"><span data-stu-id="9875b-493">Increase hello target number of dedicated compute nodes in a pool if CPU usage is high.</span></span>
2. <span data-ttu-id="9875b-494">Ridurre il numero di destinazione di hello dedicato di nodi di calcolo in un pool quando l'utilizzo della CPU è insufficiente.</span><span class="sxs-lookup"><span data-stu-id="9875b-494">Decrease hello target number of dedicated compute nodes in a pool when CPU usage is low.</span></span>
3. <span data-ttu-id="9875b-495">Sempre limitare hello massimo numero di nodi dedicato too400.</span><span class="sxs-lookup"><span data-stu-id="9875b-495">Always restrict hello maximum number of dedicated nodes too400.</span></span>

<span data-ttu-id="9875b-496">Consente di definire i nodi durante l'utilizzo elevato della CPU, svariate hello tooincrease istruzione hello che popola una variabile definita dall'utente (`$totalDedicatedNodes`) con un valore che corrisponde al 110% del numero di destinazione corrente di hello di nodi dedicati, ma solo se hello minimo utilizzo medio della CPU durante l'hello ultimi 10 minuti è superiore al 70%.</span><span class="sxs-lookup"><span data-stu-id="9875b-496">tooincrease hello number of nodes during high CPU usage, define hello statement that populates a user-defined variable (`$totalDedicatedNodes`) with a value that is 110 percent of hello current target number of dedicated nodes, but only if hello minimum average CPU usage during hello last 10 minutes was above 70 percent.</span></span> <span data-ttu-id="9875b-497">In caso contrario, è possibile utilizzare il valore di hello per numero corrente di hello di nodi dedicati.</span><span class="sxs-lookup"><span data-stu-id="9875b-497">Otherwise, use hello value for hello current number of dedicated nodes.</span></span>

```
$totalDedicatedNodes =
    (min($CPUPercent.GetSample(TimeInterval_Minute * 10)) > 0.7) ?
    ($CurrentDedicatedNodes * 1.1) : $CurrentDedicatedNodes;
```

<span data-ttu-id="9875b-498">troppo*diminuire* hello numero di nodi dedicati durante un basso utilizzo della CPU, hello stessa istruzione successiva nel nostro hello set formula `$totalDedicatedNodes` too90 variabile percentuale del numero di destinazione corrente di hello di nodi dedicati se hello utilizzo medio CPU hello negli ultimi 60 minuti è stato in % 20.</span><span class="sxs-lookup"><span data-stu-id="9875b-498">too*decrease* hello number of dedicated nodes during low CPU usage, hello next statement in our formula sets hello same `$totalDedicatedNodes` variable too90 percent of hello current target number of dedicated nodes if hello average CPU usage in hello past 60 minutes was under 20 percent.</span></span> <span data-ttu-id="9875b-499">In caso contrario, utilizzare il valore corrente di hello di `$totalDedicatedNodes` è popolati nell'istruzione hello precedente.</span><span class="sxs-lookup"><span data-stu-id="9875b-499">Otherwise, use hello current value of `$totalDedicatedNodes` that we populated in hello statement above.</span></span>

```
$totalDedicatedNodes =
    (avg($CPUPercent.GetSample(TimeInterval_Minute * 60)) < 0.2) ?
    ($CurrentDedicatedNodes * 0.9) : $totalDedicatedNodes;
```

<span data-ttu-id="9875b-500">Ora limite hello destinazione numero massimo di tooa di nodi di calcolo dedicato di 400:</span><span class="sxs-lookup"><span data-stu-id="9875b-500">Now limit hello target number of dedicated compute nodes tooa maximum of 400:</span></span>

```
$TargetDedicatedNodes = min(400, $totalDedicatedNodes)
```

<span data-ttu-id="9875b-501">Di seguito è riportata la formula completa hello:</span><span class="sxs-lookup"><span data-stu-id="9875b-501">Here's hello complete formula:</span></span>

```
$totalDedicatedNodes =
    (min($CPUPercent.GetSample(TimeInterval_Minute * 10)) > 0.7) ?
    ($CurrentDedicatedNodes * 1.1) : $CurrentDedicatedNodes;
$totalDedicatedNodes =
    (avg($CPUPercent.GetSample(TimeInterval_Minute * 60)) < 0.2) ?
    ($CurrentDedicatedNodes * 0.9) : $totalDedicatedNodes;
$TargetDedicatedNodes = min(400, $totalDedicatedNodes)
```

## <a name="create-an-autoscale-enabled-pool-with-net"></a><span data-ttu-id="9875b-502">Creare un pool abilitato per la scalabilità automatica con .NET</span><span class="sxs-lookup"><span data-stu-id="9875b-502">Create an autoscale-enabled pool with .NET</span></span>

<span data-ttu-id="9875b-503">toocreate un pool con scalabilità automatica abilitata in .NET, seguire questi passaggi:</span><span class="sxs-lookup"><span data-stu-id="9875b-503">toocreate a pool with autoscaling enabled in .NET, follow these steps:</span></span>

1. <span data-ttu-id="9875b-504">Creare pool di hello con [BatchClient.PoolOperations.CreatePool](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.createpool).</span><span class="sxs-lookup"><span data-stu-id="9875b-504">Create hello pool with [BatchClient.PoolOperations.CreatePool](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.createpool).</span></span>
2. <span data-ttu-id="9875b-505">Set hello [CloudPool.AutoScaleEnabled](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleenabled) proprietà troppo`true`.</span><span class="sxs-lookup"><span data-stu-id="9875b-505">Set hello [CloudPool.AutoScaleEnabled](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleenabled) property too`true`.</span></span>
3. <span data-ttu-id="9875b-506">Set hello [CloudPool.AutoScaleFormula](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleformula) proprietà con la formula di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-506">Set hello [CloudPool.AutoScaleFormula](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleformula) property with your autoscale formula.</span></span>
4. <span data-ttu-id="9875b-507">(Facoltativo) Set hello [CloudPool.AutoScaleEvaluationInterval](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleevaluationinterval) proprietà (valore predefinito è 15 minuti).</span><span class="sxs-lookup"><span data-stu-id="9875b-507">(Optional) Set hello [CloudPool.AutoScaleEvaluationInterval](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleevaluationinterval) property (default is 15 minutes).</span></span>
5. <span data-ttu-id="9875b-508">Eseguire il commit pool hello con [CloudPool.Commit](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.commit) o [a CommitAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.commitasync).</span><span class="sxs-lookup"><span data-stu-id="9875b-508">Commit hello pool with [CloudPool.Commit](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.commit) or [CommitAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.commitasync).</span></span>

<span data-ttu-id="9875b-509">Hello frammento di codice seguente crea un pool di scalabilità automatica abilitata in .NET.</span><span class="sxs-lookup"><span data-stu-id="9875b-509">hello following code snippet creates an autoscale-enabled pool in .NET.</span></span> <span data-ttu-id="9875b-510">Hello formula di scalabilità automatica del pool imposta hello destinazione numero di nodi dedicato too5 lunedì e 1 il giorno della settimana hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-510">hello pool's autoscale formula sets hello target number of dedicated nodes too5 on Mondays, and 1 on every other day of hello week.</span></span> <span data-ttu-id="9875b-511">Hello [intervallo di ridimensionamento automatico](#automatic-scaling-interval) è impostato too30 minuti.</span><span class="sxs-lookup"><span data-stu-id="9875b-511">hello [automatic scaling interval](#automatic-scaling-interval) is set too30 minutes.</span></span> <span data-ttu-id="9875b-512">In questo e altri frammenti c# in questo articolo, hello `myBatchClient` è un'istanza di hello inizializzata correttamente [BatchClient] [ net_batchclient] classe.</span><span class="sxs-lookup"><span data-stu-id="9875b-512">In this and hello other C# snippets in this article, `myBatchClient` is a properly initialized instance of hello [BatchClient][net_batchclient] class.</span></span>

```csharp
CloudPool pool = myBatchClient.PoolOperations.CreatePool(
                    poolId: "mypool",
                    virtualMachineSize: "small", // single-core, 1.75 GB memory, 225 GB disk
                    cloudServiceConfiguration: new CloudServiceConfiguration(osFamily: "5"));    
pool.AutoScaleEnabled = true;
pool.AutoScaleFormula = "$TargetDedicatedNodes = (time().weekday == 1 ? 5:1);";
pool.AutoScaleEvaluationInterval = TimeSpan.FromMinutes(30);
await pool.CommitAsync();
```

> [!IMPORTANT]
> <span data-ttu-id="9875b-513">Quando si crea un pool di scalabilità automatica abilitata, non si specifica hello _targetDedicatedComputeNodes_ parametro o hello _targetLowPriorityComputeNodes_ parametro hello chiamare troppo **CreatePool**.</span><span class="sxs-lookup"><span data-stu-id="9875b-513">When you create an autoscale-enabled pool, do not specify hello _targetDedicatedComputeNodes_ parameter or hello _targetLowPriorityComputeNodes_ parameter on hello call too**CreatePool**.</span></span> <span data-ttu-id="9875b-514">Specificare invece hello **AutoScaleEnabled** e **AutoScaleFormula** proprietà nel pool di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-514">Instead, specify hello **AutoScaleEnabled** and **AutoScaleFormula** properties on hello pool.</span></span> <span data-ttu-id="9875b-515">valori di Hello per queste proprietà determinano il numero di destinazione hello di ogni tipo di nodo.</span><span class="sxs-lookup"><span data-stu-id="9875b-515">hello values for these properties determine hello target number of each type of node.</span></span> <span data-ttu-id="9875b-516">Inoltre, toomanually ridimensionare un pool di scalabilità automatica abilitata (ad esempio, con [BatchClient.PoolOperations.ResizePoolAsync][net_poolops_resizepoolasync]), primo **disabilitare** la scalabilità automatica in Hello pool, quindi ridimensionarlo.</span><span class="sxs-lookup"><span data-stu-id="9875b-516">Also, toomanually resize an autoscale-enabled pool (for example, with [BatchClient.PoolOperations.ResizePoolAsync][net_poolops_resizepoolasync]), first **disable** automatic scaling on hello pool, then resize it.</span></span>
>
>

<span data-ttu-id="9875b-517">Inoltre tooBatch .NET, è possibile utilizzare una delle altre hello [Batch SDK](batch-apis-tools.md#azure-accounts-for-batch-development), [Batch REST](https://docs.microsoft.com/rest/api/batchservice/), [i cmdlet di PowerShell Batch](batch-powershell-cmdlets-get-started.md), hello e [CLI Batch](batch-cli-get-started.md)tooconfigure per la scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-517">In addition tooBatch .NET, you can use any of hello other [Batch SDKs](batch-apis-tools.md#azure-accounts-for-batch-development), [Batch REST](https://docs.microsoft.com/rest/api/batchservice/), [Batch PowerShell cmdlets](batch-powershell-cmdlets-get-started.md), and hello [Batch CLI](batch-cli-get-started.md) tooconfigure autoscaling.</span></span>


### <a name="automatic-scaling-interval"></a><span data-ttu-id="9875b-518">Intervallo di ridimensionamento automatico</span><span class="sxs-lookup"><span data-stu-id="9875b-518">Automatic scaling interval</span></span>
<span data-ttu-id="9875b-519">Per impostazione predefinita, hello servizio Batch consente di regolare le dimensioni di un pool in base tooits formula di scalabilità automatica ogni 15 minuti.</span><span class="sxs-lookup"><span data-stu-id="9875b-519">By default, hello Batch service adjusts a pool's size according tooits autoscale formula every 15 minutes.</span></span> <span data-ttu-id="9875b-520">Questo intervallo è configurabile tramite hello seguenti proprietà del pool:</span><span class="sxs-lookup"><span data-stu-id="9875b-520">This interval is configurable by using hello following pool properties:</span></span>

* <span data-ttu-id="9875b-521">[CloudPool.AutoScaleEvaluationInterval][net_cloudpool_autoscaleevalinterval] (Batch .NET)</span><span class="sxs-lookup"><span data-stu-id="9875b-521">[CloudPool.AutoScaleEvaluationInterval][net_cloudpool_autoscaleevalinterval] (Batch .NET)</span></span>
* <span data-ttu-id="9875b-522">[autoScaleEvaluationInterval][rest_autoscaleinterval] (API REST)</span><span class="sxs-lookup"><span data-stu-id="9875b-522">[autoScaleEvaluationInterval][rest_autoscaleinterval] (REST API)</span></span>

<span data-ttu-id="9875b-523">intervallo minimo Hello è cinque minuti e hello massimo è 168 ore.</span><span class="sxs-lookup"><span data-stu-id="9875b-523">hello minimum interval is five minutes, and hello maximum is 168 hours.</span></span> <span data-ttu-id="9875b-524">Se viene specificato un intervallo all'esterno di questo intervallo, hello servizio Batch restituisce un errore di richiesta non valida (400).</span><span class="sxs-lookup"><span data-stu-id="9875b-524">If an interval outside this range is specified, hello Batch service returns a Bad Request (400) error.</span></span>

> [!NOTE]
> <span data-ttu-id="9875b-525">La scalabilità automatica non è attualmente previsto toorespond toochanges in meno di un minuto, ma è invece destinato dimensioni hello tooadjust del pool di gradualmente durante l'esecuzione di un carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="9875b-525">Autoscaling is not currently intended toorespond toochanges in less than a minute, but rather is intended tooadjust hello size of your pool gradually as you run a workload.</span></span>
>
>

## <a name="enable-autoscaling-on-an-existing-pool"></a><span data-ttu-id="9875b-526">Abilitare la scalabilità automatica in un pool esistente</span><span class="sxs-lookup"><span data-stu-id="9875b-526">Enable autoscaling on an existing pool</span></span>

<span data-ttu-id="9875b-527">Ogni Batch di SDK fornisce un adattamento automatico tooenable modo.</span><span class="sxs-lookup"><span data-stu-id="9875b-527">Each Batch SDK provides a way tooenable autoscaling.</span></span> <span data-ttu-id="9875b-528">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="9875b-528">For example:</span></span>

* <span data-ttu-id="9875b-529">[BatchClient.PoolOperations.EnableAutoScaleAsync][net_enableautoscaleasync] (Batch .NET)</span><span class="sxs-lookup"><span data-stu-id="9875b-529">[BatchClient.PoolOperations.EnableAutoScaleAsync][net_enableautoscaleasync] (Batch .NET)</span></span>
* <span data-ttu-id="9875b-530">[Abilitare la scalabilità automatica in un pool][rest_enableautoscale] (API REST)</span><span class="sxs-lookup"><span data-stu-id="9875b-530">[Enable automatic scaling on a pool][rest_enableautoscale] (REST API)</span></span>

<span data-ttu-id="9875b-531">Quando si abilita il ridimensionamento automatico in un pool esistente, tenere hello presente seguenti punti:</span><span class="sxs-lookup"><span data-stu-id="9875b-531">When you enable autoscaling on an existing pool, keep in mind hello following points:</span></span>

* <span data-ttu-id="9875b-532">Se la scalabilità automatica è attualmente disabilitata nel pool di hello quando si esegue il ridimensionamento automatico di hello richiesta tooenable, è necessario specificare una formula di scalabilità automatica valido quando si esegue una richiesta di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-532">If automatic scaling is currently disabled on hello pool when you issue hello request tooenable autoscaling, you must specify a valid autoscale formula when you issue hello request.</span></span> <span data-ttu-id="9875b-533">Facoltativamente, è possibile specificare un intervallo di valutazione della scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-533">You can optionally specify an autoscale evaluation interval.</span></span> <span data-ttu-id="9875b-534">Se non si specifica un intervallo, viene utilizzato il valore predefinito hello di 15 minuti.</span><span class="sxs-lookup"><span data-stu-id="9875b-534">If you do not specify an interval, hello default value of 15 minutes is used.</span></span>
* <span data-ttu-id="9875b-535">Se scalabilità automatica sono attualmente abilitata nel pool di hello, è possibile specificare una formula di scalabilità automatica, un intervallo di valutazione o entrambi.</span><span class="sxs-lookup"><span data-stu-id="9875b-535">If autoscale is currently enabled on hello pool, you can specify an autoscale formula, an evaluation interval, or both.</span></span> <span data-ttu-id="9875b-536">È necessario specificare almeno una di queste proprietà.</span><span class="sxs-lookup"><span data-stu-id="9875b-536">You must specify at least one of these properties.</span></span>

  * <span data-ttu-id="9875b-537">Se si specifica un nuovo intervallo di valutazione di scalabilità automatica, pianificazione valutazione esistente hello viene arrestato e viene avviata una nuova pianificazione.</span><span class="sxs-lookup"><span data-stu-id="9875b-537">If you specify a new autoscale evaluation interval, then hello existing evaluation schedule is stopped and a new schedule is started.</span></span> <span data-ttu-id="9875b-538">ora di inizio della pianificazione nuova Hello è ora hello in cui hello è stato inviato il ridimensionamento automatico tooenable richiesta.</span><span class="sxs-lookup"><span data-stu-id="9875b-538">hello new schedule's start time is hello time at which hello request tooenable autoscaling was issued.</span></span>
  * <span data-ttu-id="9875b-539">Se si omette entrambi intervallo hello formula o evaluation di scalabilità automatica, hello servizio Batch continua valore corrente di hello toouse di tale impostazione.</span><span class="sxs-lookup"><span data-stu-id="9875b-539">If you omit either hello autoscale formula or evaluation interval, hello Batch service continues toouse hello current value of that setting.</span></span>

> [!NOTE]
> <span data-ttu-id="9875b-540">Se sono specificati valori per hello *targetDedicatedComputeNodes* o *targetLowPriorityComputeNodes* parametri di hello **CreatePool** metodo durante la creazione di hello pool in .NET, o per i parametri di confrontabili hello in un'altra lingua, quindi tali valori vengono ignorati quando viene valutata hello formula di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-540">If you specified values for hello *targetDedicatedComputeNodes* or *targetLowPriorityComputeNodes* parameters of hello **CreatePool** method when you created hello pool in .NET, or for hello comparable parameters in another language, then those values are ignored when hello automatic scaling formula is evaluated.</span></span>
>
>

<span data-ttu-id="9875b-541">Questo frammento di codice c# utilizza hello [.NET per Batch] [ net_api] la scalabilità automatica tooenable libreria in un pool esistente:</span><span class="sxs-lookup"><span data-stu-id="9875b-541">This C# code snippet uses hello [Batch .NET][net_api] library tooenable autoscaling on an existing pool:</span></span>

```csharp
// Define hello autoscaling formula. This formula sets hello target number of nodes
// too5 on Mondays, and 1 on every other day of hello week
string myAutoScaleFormula = "$TargetDedicatedNodes = (time().weekday == 1 ? 5:1);";

// Set hello autoscale formula on hello existing pool
await myBatchClient.PoolOperations.EnableAutoScaleAsync(
    "myexistingpool",
    autoscaleFormula: myAutoScaleFormula);
```

### <a name="update-an-autoscale-formula"></a><span data-ttu-id="9875b-542">Aggiornare una formula di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="9875b-542">Update an autoscale formula</span></span>

<span data-ttu-id="9875b-543">formula di hello tooupdate esistente di scalabilità automatica abilitata pool, la scalabilità automatica tooenable operazione chiamata hello con nuova formula hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-543">tooupdate hello formula on an existing autoscale-enabled pool, call hello operation tooenable autoscaling again with hello new formula.</span></span> <span data-ttu-id="9875b-544">Se, ad esempio, la scalabilità automatica è già abilitata nel `myexistingpool` quando viene eseguita dopo il codice .NET hello, la formula di scalabilità automatica viene sostituita con il contenuto di hello di `myNewFormula`.</span><span class="sxs-lookup"><span data-stu-id="9875b-544">For example, if autoscaling is already enabled on `myexistingpool` when hello following .NET code is executed, its autoscale formula is replaced with hello contents of `myNewFormula`.</span></span>

```csharp
await myBatchClient.PoolOperations.EnableAutoScaleAsync(
    "myexistingpool",
    autoscaleFormula: myNewFormula);
```

### <a name="update-hello-autoscale-interval"></a><span data-ttu-id="9875b-545">Intervallo di aggiornamento hello scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="9875b-545">Update hello autoscale interval</span></span>

<span data-ttu-id="9875b-546">tooupdate hello scalabilità automatica l'intervallo di valutazione di un di scalabilità automatica abilitata pool esistente, la scalabilità automatica tooenable operazione chiamata hello nuovamente con il nuovo intervallo di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-546">tooupdate hello autoscale evaluation interval of an existing autoscale-enabled pool, call hello operation tooenable autoscaling again with hello new interval.</span></span> <span data-ttu-id="9875b-547">Ad esempio, tooset hello scalabilità automatica valutazione intervallo too60 minuti per un pool è già abilitato per la scalabilità automatica in .NET:</span><span class="sxs-lookup"><span data-stu-id="9875b-547">For example, tooset hello autoscale evaluation interval too60 minutes for a pool that's already autoscale-enabled in .NET:</span></span>

```csharp
await myBatchClient.PoolOperations.EnableAutoScaleAsync(
    "myexistingpool",
    autoscaleEvaluationInterval: TimeSpan.FromMinutes(60));
```

## <a name="evaluate-an-autoscale-formula"></a><span data-ttu-id="9875b-548">Valutare la formula di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="9875b-548">Evaluate an autoscale formula</span></span>

<span data-ttu-id="9875b-549">È possibile valutare una formula prima di applicarla tooa pool.</span><span class="sxs-lookup"><span data-stu-id="9875b-549">You can evaluate a formula before applying it tooa pool.</span></span> <span data-ttu-id="9875b-550">In questo modo, è possibile testare toosee formula di hello come le relative istruzioni valutano prima di inserire la formula hello nell'ambiente di produzione.</span><span class="sxs-lookup"><span data-stu-id="9875b-550">In this way, you can test hello formula toosee how its statements evaluate before you put hello formula into production.</span></span>

<span data-ttu-id="9875b-551">tooevaluate una formula di scalabilità automatica, è innanzitutto necessario abilitare la scalabilità automatica nel pool di hello con una formula valida.</span><span class="sxs-lookup"><span data-stu-id="9875b-551">tooevaluate an autoscale formula, you must first enable autoscaling on hello pool with a valid formula.</span></span> <span data-ttu-id="9875b-552">tootest una formula in un pool che non dispone ancora di scalabilità automatica è abilitata, utilizzare hello una sola riga formula `$TargetDedicatedNodes = 0` quando si attiva prima di tutto la scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-552">tootest a formula on a pool that doesn't yet have autoscaling enabled, use hello one-line formula `$TargetDedicatedNodes = 0` when you first enable autoscaling.</span></span> <span data-ttu-id="9875b-553">Quindi, utilizzare uno dei hello tooevaluate hello formula desiderata tootest seguente:</span><span class="sxs-lookup"><span data-stu-id="9875b-553">Then, use one of hello following tooevaluate hello formula you want tootest:</span></span>

* <span data-ttu-id="9875b-554">[BatchClient.PoolOperations.EvaluateAutoScale](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.evaluateautoscale) o [EvaluateAutoScaleAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.evaluateautoscaleasync)</span><span class="sxs-lookup"><span data-stu-id="9875b-554">[BatchClient.PoolOperations.EvaluateAutoScale](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.evaluateautoscale) or [EvaluateAutoScaleAsync](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.evaluateautoscaleasync)</span></span>

    <span data-ttu-id="9875b-555">Questi metodi .NET per Batch richiedono hello ID di un pool esistente e una stringa contenente hello tooevaluate di formula di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-555">These Batch .NET methods require hello ID of an existing pool and a string containing hello autoscale formula tooevaluate.</span></span>

* [<span data-ttu-id="9875b-556">Valutare la formula di scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="9875b-556">Evaluate an automatic scaling formula</span></span>](https://docs.microsoft.com/rest/api/batchservice/evaluate-an-automatic-scaling-formula)

    <span data-ttu-id="9875b-557">In questa richiesta di API REST, specificare l'ID del pool di hello in hello URI e hello formula di scalabilità automatica in hello *autoScaleFormula* elemento del corpo della richiesta hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-557">In this REST API request, specify hello pool ID in hello URI, and hello autoscale formula in hello *autoScaleFormula* element of hello request body.</span></span> <span data-ttu-id="9875b-558">risposta di Hello dell'operazione hello contiene eventuali informazioni sugli errori che potrebbero essere correlati toohello formula.</span><span class="sxs-lookup"><span data-stu-id="9875b-558">hello response of hello operation contains any error information that might be related toohello formula.</span></span>

<span data-ttu-id="9875b-559">Questo frammento di codice [Batch .NET][net_api] valuta una formula di scalabilità automatica.</span><span class="sxs-lookup"><span data-stu-id="9875b-559">In this [Batch .NET][net_api] code snippet, we evaluate an autoscale formula.</span></span> <span data-ttu-id="9875b-560">Se il pool di hello non dispone di scalabilità automatica abilitata, è abilitarlo prima.</span><span class="sxs-lookup"><span data-stu-id="9875b-560">If hello pool does not have autoscaling enabled, we enable it first.</span></span>

```csharp
// First obtain a reference tooan existing pool
CloudPool pool = await batchClient.PoolOperations.GetPoolAsync("myExistingPool");

// If autoscaling isn't already enabled on hello pool, enable it.
// You can't evaluate an autoscale formula on non-autoscale-enabled pool.
if (pool.AutoScaleEnabled == false)
{
    // We need a valid autoscale formula tooenable autoscaling on the
    // pool. This formula is valid, but won't resize hello pool:
    await pool.EnableAutoScaleAsync(
        autoscaleFormula: "$TargetDedicatedNodes = {pool.CurrentDedicatedNodes};",
        autoscaleEvaluationInterval: TimeSpan.FromMinutes(5));

    // Batch limits EnableAutoScaleAsync calls tooonce every 30 seconds.
    // Because we want tooapply our new autoscale formula below if it
    // evaluates successfully, and we *just* enabled autoscaling on
    // this pool, we pause here tooensure we pass that threshold.
    Thread.Sleep(TimeSpan.FromSeconds(31));

    // Refresh hello properties of hello pool so that we've got the
    // latest value for AutoScaleEnabled
    await pool.RefreshAsync();
}

// We must ensure that autoscaling is enabled on hello pool prior to
// evaluating a formula
if (pool.AutoScaleEnabled == true)
{
    // hello formula tooevaluate - adjusts target number of nodes based on
    // day of week and time of day
    string myFormula = @"
        $curTime = time();
        $workHours = $curTime.hour >= 8 && $curTime.hour < 18;
        $isWeekday = $curTime.weekday >= 1 && $curTime.weekday <= 5;
        $isWorkingWeekdayHour = $workHours && $isWeekday;
        $TargetDedicatedNodes = $isWorkingWeekdayHour ? 20:10;
    ";

    // Perform hello autoscale formula evaluation. Note that this code does not
    // actually apply hello formula toohello pool.
    AutoScaleRun eval =
        await batchClient.PoolOperations.EvaluateAutoScaleAsync(pool.Id, myFormula);

    if (eval.Error == null)
    {
        // Evaluation success - print hello results of hello AutoScaleRun.
        // This will display hello values of each variable as evaluated by the
        // autoscale formula.
        Console.WriteLine("AutoScaleRun.Results: " +
            eval.Results.Replace("$", "\n    $"));

        // Apply hello formula toohello pool since it evaluated successfully
        await batchClient.PoolOperations.EnableAutoScaleAsync(pool.Id, myFormula);
    }
    else
    {
        // Evaluation failed, output hello message associated with hello error
        Console.WriteLine("AutoScaleRun.Error.Message: " +
            eval.Error.Message);
    }
}
```

<span data-ttu-id="9875b-561">Valutazione con esito positivo della formula hello illustrata in questo frammento di codice produce risultati simili a:</span><span class="sxs-lookup"><span data-stu-id="9875b-561">Successful evaluation of hello formula shown in this code snippet produces results similar to:</span></span>

```
AutoScaleRun.Results:
    $TargetDedicatedNodes=10;
    $NodeDeallocationOption=requeue;
    $curTime=2016-10-13T19:18:47.805Z;
    $isWeekday=1;
    $isWorkingWeekdayHour=0;
    $workHours=0
```

## <a name="get-information-about-autoscale-runs"></a><span data-ttu-id="9875b-562">Visualizzare informazioni sulle esecuzioni della scalabilità automatica</span><span class="sxs-lookup"><span data-stu-id="9875b-562">Get information about autoscale runs</span></span>

<span data-ttu-id="9875b-563">tooensure che sta eseguendo la formula come previsto, è consigliabile verificare periodicamente risultati hello di viene eseguito il ridimensionamento automatico hello che esegue il pool di Batch.</span><span class="sxs-lookup"><span data-stu-id="9875b-563">tooensure that your formula is performing as expected, we recommend that you periodically check hello results of hello autoscaling runs that Batch performs on your pool.</span></span> <span data-ttu-id="9875b-564">toodo in tal caso, get (o aggiornare) toohello un riferimento pool e, esaminare le proprietà di hello della scalabilità automatica ultima esecuzione.</span><span class="sxs-lookup"><span data-stu-id="9875b-564">toodo so, get (or refresh) a reference toohello pool, and examine hello properties of its last autoscale run.</span></span>

<span data-ttu-id="9875b-565">In .NET per Batch, hello [CloudPool.AutoScaleRun](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscalerun) proprietà ha diverse proprietà che forniscono informazioni su hello più recente il ridimensionamento automatico eseguire eseguita nel pool di hello:</span><span class="sxs-lookup"><span data-stu-id="9875b-565">In Batch .NET, hello [CloudPool.AutoScaleRun](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscalerun) property has several properties that provide information about hello latest automatic scaling run performed on hello pool:</span></span>

* [<span data-ttu-id="9875b-566">AutoScaleRun.Timestamp</span><span class="sxs-lookup"><span data-stu-id="9875b-566">AutoScaleRun.Timestamp</span></span>](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.autoscalerun.timestamp)
* [<span data-ttu-id="9875b-567">AutoScaleRun.Results</span><span class="sxs-lookup"><span data-stu-id="9875b-567">AutoScaleRun.Results</span></span>](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.autoscalerun.results)
* [<span data-ttu-id="9875b-568">AutoScaleRun.Error</span><span class="sxs-lookup"><span data-stu-id="9875b-568">AutoScaleRun.Error</span></span>](https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.autoscalerun.error)

<span data-ttu-id="9875b-569">In hello API REST, hello [ottenere informazioni su un pool](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-pool) richiesta restituisce informazioni sul pool di hello, che include hello più recente il ridimensionamento automatico le informazioni sull'esecuzione di hello [autoScaleRun](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-pool#bk_autrun) proprietà.</span><span class="sxs-lookup"><span data-stu-id="9875b-569">In hello REST API, hello [Get information about a pool](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-pool) request returns information about hello pool, which includes hello latest automatic scaling run information in hello [autoScaleRun](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-pool#bk_autrun) property.</span></span>

<span data-ttu-id="9875b-570">Hello seguente frammento di codice c# utilizza le hello .NET per Batch libreria tooprint informazioni hello ultima per la scalabilità automatica eseguire sul pool _myPool_:</span><span class="sxs-lookup"><span data-stu-id="9875b-570">hello following C# code snippet uses hello Batch .NET library tooprint information about hello last autoscaling run on pool _myPool_:</span></span>

```csharp
await Cloud pool = myBatchClient.PoolOperations.GetPoolAsync("myPool");
Console.WriteLine("Last execution: " + pool.AutoScaleRun.Timestamp);
Console.WriteLine("Result:" + pool.AutoScaleRun.Results.Replace("$", "\n  $"));
Console.WriteLine("Error: " + pool.AutoScaleRun.Error);
```

<span data-ttu-id="9875b-571">Esempio di output di hello precedente frammento di codice:</span><span class="sxs-lookup"><span data-stu-id="9875b-571">Sample output of hello preceding snippet:</span></span>

```
Last execution: 10/14/2016 18:36:43
Result:
  $TargetDedicatedNodes=10;
  $NodeDeallocationOption=requeue;
  $curTime=2016-10-14T18:36:43.282Z;
  $isWeekday=1;
  $isWorkingWeekdayHour=0;
  $workHours=0
Error:
```

## <a name="example-autoscale-formulas"></a><span data-ttu-id="9875b-572">Formule di scalabilità automatica di esempio</span><span class="sxs-lookup"><span data-stu-id="9875b-572">Example autoscale formulas</span></span>
<span data-ttu-id="9875b-573">Esaminiamo alcune formule che mostrano l'importo di hello tooadjust modi diversi delle risorse di calcolo in un pool.</span><span class="sxs-lookup"><span data-stu-id="9875b-573">Let's look at a few formulas that show different ways tooadjust hello amount of compute resources in a pool.</span></span>

### <a name="example-1-time-based-adjustment"></a><span data-ttu-id="9875b-574">Esempio 1: Adeguamento basato sul tempo</span><span class="sxs-lookup"><span data-stu-id="9875b-574">Example 1: Time-based adjustment</span></span>
<span data-ttu-id="9875b-575">Si supponga di dimensioni del pool hello tooadjust in base a hello giorno della settimana hello e l'ora del giorno.</span><span class="sxs-lookup"><span data-stu-id="9875b-575">Suppose you want tooadjust hello pool size based on hello day of hello week and time of day.</span></span> <span data-ttu-id="9875b-576">Questo esempio mostra come tooincrease o diminuire il numero di hello di nodi in hello del pool di conseguenza.</span><span class="sxs-lookup"><span data-stu-id="9875b-576">This example shows how tooincrease or decrease hello number of nodes in hello pool accordingly.</span></span>

<span data-ttu-id="9875b-577">formula Hello ottiene innanzitutto hello ora corrente.</span><span class="sxs-lookup"><span data-stu-id="9875b-577">hello formula first obtains hello current time.</span></span> <span data-ttu-id="9875b-578">Se si tratta di un giorno della settimana (1-5) e nelle ore lavorative (8 AM too6 PM), dimensione del pool di destinazione hello è impostato too20 nodi.</span><span class="sxs-lookup"><span data-stu-id="9875b-578">If it's a weekday (1-5) and within working hours (8 AM too6 PM), hello target pool size is set too20 nodes.</span></span> <span data-ttu-id="9875b-579">In caso contrario, è stata impostata too10 nodi.</span><span class="sxs-lookup"><span data-stu-id="9875b-579">Otherwise, it's set too10 nodes.</span></span>

```
$curTime = time();
$workHours = $curTime.hour >= 8 && $curTime.hour < 18;
$isWeekday = $curTime.weekday >= 1 && $curTime.weekday <= 5;
$isWorkingWeekdayHour = $workHours && $isWeekday;
$TargetDedicatedNodes = $isWorkingWeekdayHour ? 20:10;
```

### <a name="example-2-task-based-adjustment"></a><span data-ttu-id="9875b-580">Esempio 2: Adeguamento basato sulle attività</span><span class="sxs-lookup"><span data-stu-id="9875b-580">Example 2: Task-based adjustment</span></span>
<span data-ttu-id="9875b-581">In questo esempio hello pool viene ridimensionata in base al numero di hello delle attività nella coda di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-581">In this example, hello pool size is adjusted based on hello number of tasks in hello queue.</span></span> <span data-ttu-id="9875b-582">Sia i commenti che le interruzioni di riga sono accettabili nelle stringhe della formula.</span><span class="sxs-lookup"><span data-stu-id="9875b-582">Both comments and line breaks are acceptable in formula strings.</span></span>

```csharp
// Get pending tasks for hello past 15 minutes.
$samples = $ActiveTasks.GetSamplePercent(TimeInterval_Minute * 15);
// If we have fewer than 70 percent data points, we use hello last sample point,
// otherwise we use hello maximum of last sample point and hello history average.
$tasks = $samples < 70 ? max(0,$ActiveTasks.GetSample(1)) : max( $ActiveTasks.GetSample(1), avg($ActiveTasks.GetSample(TimeInterval_Minute * 15)));
// If number of pending tasks is not 0, set targetVM toopending tasks, otherwise
// half of current dedicated.
$targetVMs = $tasks > 0? $tasks:max(0, $TargetDedicatedNodes/2);
// hello pool size is capped at 20, if target VM value is more than that, set it
// too20. This value should be adjusted according tooyour use case.
$TargetDedicatedNodes = max(0, min($targetVMs, 20));
// Set node deallocation mode - keep nodes active only until tasks finish
$NodeDeallocationOption = taskcompletion;
```

### <a name="example-3-accounting-for-parallel-tasks"></a><span data-ttu-id="9875b-583">Esempio 3: Considerazioni sulle attività parallele</span><span class="sxs-lookup"><span data-stu-id="9875b-583">Example 3: Accounting for parallel tasks</span></span>
<span data-ttu-id="9875b-584">Questo esempio Adatta dimensioni del pool hello in base al numero di hello delle attività.</span><span class="sxs-lookup"><span data-stu-id="9875b-584">This example adjusts hello pool size based on hello number of tasks.</span></span> <span data-ttu-id="9875b-585">Questa formula accetta anche in hello account [MaxTasksPerComputeNode] [ net_maxtasks] valore impostato per il pool di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-585">This formula also takes into account hello [MaxTasksPerComputeNode][net_maxtasks] value that has been set for hello pool.</span></span> <span data-ttu-id="9875b-586">Questo approccio è utile nelle situazioni in cui l'[esecuzione di attività parallele](batch-parallel-node-tasks.md) è abilitata nel pool.</span><span class="sxs-lookup"><span data-stu-id="9875b-586">This approach is useful in situations where [parallel task execution](batch-parallel-node-tasks.md) has been enabled on your pool.</span></span>

```csharp
// Determine whether 70 percent of hello samples have been recorded in hello past
// 15 minutes; if not, use last sample
$samples = $ActiveTasks.GetSamplePercent(TimeInterval_Minute * 15);
$tasks = $samples < 70 ? max(0,$ActiveTasks.GetSample(1)) : max( $ActiveTasks.GetSample(1),avg($ActiveTasks.GetSample(TimeInterval_Minute * 15)));
// Set hello number of nodes tooadd tooone-fourth hello number of active tasks (the
// MaxTasksPerComputeNode property on this pool is set too4, adjust this number
// for your use case)
$cores = $TargetDedicatedNodes * 4;
$extraVMs = (($tasks - $cores) + 3) / 4;
$targetVMs = ($TargetDedicatedNodes + $extraVMs);
// Attempt toogrow hello number of compute nodes toomatch hello number of active
// tasks, with a maximum of 3
$TargetDedicatedNodes = max(0,min($targetVMs,3));
// Keep hello nodes active until hello tasks finish
$NodeDeallocationOption = taskcompletion;
```

### <a name="example-4-setting-an-initial-pool-size"></a><span data-ttu-id="9875b-587">Esempio 4: Impostazione di dimensioni iniziali del pool</span><span class="sxs-lookup"><span data-stu-id="9875b-587">Example 4: Setting an initial pool size</span></span>
<span data-ttu-id="9875b-588">In questo esempio mostra frammento con una formula di scalabilità automatica che imposta di codice c# hello tooa dimensioni pool specificato numero di nodi per un periodo di tempo iniziale.</span><span class="sxs-lookup"><span data-stu-id="9875b-588">This example shows a C# code snippet with an autoscale formula that sets hello pool size tooa specified number of nodes for an initial time period.</span></span> <span data-ttu-id="9875b-589">Modifica dimensioni del pool hello in base al numero di hello dell'esecuzione e le attività attive dopo hello iniziale periodo di tempo trascorso.</span><span class="sxs-lookup"><span data-stu-id="9875b-589">Then it adjusts hello pool size based on hello number of running and active tasks after hello initial time period has elapsed.</span></span>

<span data-ttu-id="9875b-590">formula Hello nel seguente frammento di codice hello:</span><span class="sxs-lookup"><span data-stu-id="9875b-590">hello formula in hello following code snippet:</span></span>

* <span data-ttu-id="9875b-591">Imposta pool iniziale di hello nodi toofour dimensioni.</span><span class="sxs-lookup"><span data-stu-id="9875b-591">Sets hello initial pool size toofour nodes.</span></span>
* <span data-ttu-id="9875b-592">Non ridimensionare hello pool all'interno di hello primi 10 minuti del ciclo di vita del pool di hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-592">Does not adjust hello pool size within hello first 10 minutes of hello pool's lifecycle.</span></span>
* <span data-ttu-id="9875b-593">Dopo 10 minuti, ottiene il valore massimo di hello hello active e numero di esecuzione di attività all'interno di hello negli ultimi 60 minuti.</span><span class="sxs-lookup"><span data-stu-id="9875b-593">After 10 minutes, obtains hello max value of hello number of running and active tasks within hello past 60 minutes.</span></span>
  * <span data-ttu-id="9875b-594">Se entrambi i valori sono 0 (che indica che nessuna attività erano in esecuzione o attivi in hello 60 minuti), dimensione del pool di hello è impostato too0.</span><span class="sxs-lookup"><span data-stu-id="9875b-594">If both values are 0 (indicating that no tasks were running or active in hello last 60 minutes), hello pool size is set too0.</span></span>
  * <span data-ttu-id="9875b-595">Se uno dei valori è maggiore di zero, non viene apportata alcuna modifica.</span><span class="sxs-lookup"><span data-stu-id="9875b-595">If either value is greater than zero, no change is made.</span></span>

```csharp
string now = DateTime.UtcNow.ToString("r");
string formula = string.Format(@"
    $TargetDedicatedNodes = {1};
    lifespan         = time() - time(""{0}"");
    span             = TimeInterval_Minute * 60;
    startup          = TimeInterval_Minute * 10;
    ratio            = 50;

    $TargetDedicatedNodes = (lifespan > startup ? (max($RunningTasks.GetSample(span, ratio), $ActiveTasks.GetSample(span, ratio)) == 0 ? 0 : $TargetDedicatedNodes) : {1});
    ", now, 4);
```

## <a name="next-steps"></a><span data-ttu-id="9875b-596">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="9875b-596">Next steps</span></span>
* <span data-ttu-id="9875b-597">[Ottimizzare l'utilizzo delle risorse di calcolo di Azure Batch con le attività simultanee nodo](batch-parallel-node-tasks.md) contiene informazioni dettagliate su come è possibile eseguire più attività contemporaneamente sui nodi di calcolo hello del pool.</span><span class="sxs-lookup"><span data-stu-id="9875b-597">[Maximize Azure Batch compute resource usage with concurrent node tasks](batch-parallel-node-tasks.md) contains details about how you can execute multiple tasks simultaneously on hello compute nodes in your pool.</span></span> <span data-ttu-id="9875b-598">Inoltre tooautoscaling, questa funzionalità può aiutare a toolower la durata del processo per alcuni carichi di lavoro, riducendo i costi.</span><span class="sxs-lookup"><span data-stu-id="9875b-598">In addition tooautoscaling, this feature may help toolower job duration for some workloads, saving you money.</span></span>
* <span data-ttu-id="9875b-599">Per un altro ottimizzatore di efficienza, verificare che le query dell'applicazione di Batch hello servizio Batch in modo ottimale la maggior parte delle hello.</span><span class="sxs-lookup"><span data-stu-id="9875b-599">For another efficiency booster, ensure that your Batch application queries hello Batch service in hello most optimal way.</span></span> <span data-ttu-id="9875b-600">Vedere [Query in modo efficiente il servizio di Azure Batch hello](batch-efficient-list-queries.md) toolearn come toolimit hello quantità di dati che attraversa il transito hello quando si esegue una query sullo stato di hello di potenzialmente migliaia di calcolo nodi o attività.</span><span class="sxs-lookup"><span data-stu-id="9875b-600">See [Query hello Azure Batch service efficiently](batch-efficient-list-queries.md) toolearn how toolimit hello amount of data that crosses hello wire when you query hello status of potentially thousands of compute nodes or tasks.</span></span>

[net_api]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch
[net_batchclient]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.batchclient
[net_cloudpool_autoscaleformula]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleformula
[net_cloudpool_autoscaleevalinterval]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.autoscaleevaluationinterval
[net_enableautoscaleasync]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.enableautoscaleasync
[net_maxtasks]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.cloudpool.maxtaskspercomputenode
[net_poolops_resizepoolasync]: https://docs.microsoft.com/dotnet/api/microsoft.azure.batch.pooloperations.resizepoolasync

[rest_api]: https://docs.microsoft.com/rest/api/batchservice/
[rest_autoscaleformula]: https://docs.microsoft.com/rest/api/batchservice/enable-automatic-scaling-on-a-pool
[rest_autoscaleinterval]: https://docs.microsoft.com/rest/api/batchservice/enable-automatic-scaling-on-a-pool
[rest_enableautoscale]: https://docs.microsoft.com/rest/api/batchservice/enable-automatic-scaling-on-a-pool
