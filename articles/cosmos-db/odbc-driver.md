---
title: Connettersi ad Azure Cosmos DB con gli strumenti di analisi BI | Microsoft Docs
description: Informazioni su come usare il driver ODBC di Azure Cosmos DB per creare tabelle e viste in modo che i dati normalizzati possano essere visualizzati in BI e nel software di analisi dei dati.
keywords: ODBC, driver ODBC
services: cosmos-db
author: mimig1
manager: jhubbard
editor: 
documentationcenter: 
ms.assetid: 9967f4e5-4b71-4cd7-8324-221a8c789e6b
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: rest-api
ms.topic: article
ms.date: 05/24/2017
ms.author: mimig
ms.openlocfilehash: 2df792c00b7a789dbefa64bfe0245f1ad73c3faa
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="connect-to-azure-cosmos-db-using-bi-analytics-tools-with-the-odbc-driver"></a><span data-ttu-id="b5c57-104">Connettersi ad Azure Cosmos DB usando gli strumenti di analisi BI con il driver ODBC</span><span class="sxs-lookup"><span data-stu-id="b5c57-104">Connect to Azure Cosmos DB using BI analytics tools with the ODBC driver</span></span>

<span data-ttu-id="b5c57-105">Il driver ODBC di Azure Cosmos DB consente di connettersi ad Azure Cosmos DB usando gli strumenti di analisi BI, ad esempio SQL Server Integration Services, Power BI Desktop e Tableau, in modo da analizzare e creare visualizzazioni dei dati di Azure Cosmos DB in tali soluzioni.</span><span class="sxs-lookup"><span data-stu-id="b5c57-105">The Azure Cosmos DB ODBC driver enables you to connect to Azure Cosmos DB using BI analytics tools such as SQL Server Integration Services, Power BI Desktop, and Tableau so that you can analyze and create visualizations of your Azure Cosmos DB data in those solutions.</span></span>

<span data-ttu-id="b5c57-106">Il driver ODBC di Azure Cosmos DB è conforme a ODBC 3.8 e supporta la sintassi ANSI SQL-92.</span><span class="sxs-lookup"><span data-stu-id="b5c57-106">The Azure Cosmos DB ODBC driver is ODBC 3.8 compliant and supports ANSI SQL-92 syntax.</span></span> <span data-ttu-id="b5c57-107">Il driver offre funzionalità avanzate che consentono di rinormalizzare i dati in Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b5c57-107">The driver offers rich features to help you renormalize data in Azure Cosmos DB.</span></span> <span data-ttu-id="b5c57-108">Usando il driver è possibile rappresentare i dati in Azure Cosmos DB come tabelle e viste.</span><span class="sxs-lookup"><span data-stu-id="b5c57-108">Using the driver, you can represent data in Azure Cosmos DB as tables and views.</span></span> <span data-ttu-id="b5c57-109">Il driver consente di eseguire operazioni SQL su tabelle e viste, ad esempio raggruppamenti in base alle query, inserimenti, aggiornamenti ed eliminazioni.</span><span class="sxs-lookup"><span data-stu-id="b5c57-109">The driver enables you to perform SQL operations against the tables and views including group by queries, inserts, updates, and deletes.</span></span>

## <a name="why-do-i-need-to-normalize-my-data"></a><span data-ttu-id="b5c57-110">Perché è necessario normalizzare i dati?</span><span class="sxs-lookup"><span data-stu-id="b5c57-110">Why do I need to normalize my data?</span></span>
<span data-ttu-id="b5c57-111">Azure Cosmos DB è un database senza schema, che consente quindi un rapido sviluppo di app permettendo a queste ultime di eseguire in tempo reale l'iterazione del modello di dati senza limitarle a uno schema rigoroso.</span><span class="sxs-lookup"><span data-stu-id="b5c57-111">Azure Cosmos DB is a schemaless database, so it enables rapid development of apps by enabling applications to iterate their data model on the fly and not confine them to a strict schema.</span></span> <span data-ttu-id="b5c57-112">Un singolo database di Azure Cosmos DB può contenere documenti JSON con varie strutture.</span><span class="sxs-lookup"><span data-stu-id="b5c57-112">A single Azure Cosmos DB database can contain JSON documents of various structures.</span></span> <span data-ttu-id="b5c57-113">Questa novità è ideale per lo sviluppo rapido delle applicazioni, ma quando si desidera analizzare e creare report dei dati usando gli strumenti di analisi e BI, è spesso necessario adattare e conformare tali dati a uno schema specifico.</span><span class="sxs-lookup"><span data-stu-id="b5c57-113">This is great for rapid application development, but when you want to analyze and create reports of your data using data analytics and BI tools, the data often needs to be flattened and adhere to a specific schema.</span></span>

<span data-ttu-id="b5c57-114">È qui che entra in gioco il driver ODBC.</span><span class="sxs-lookup"><span data-stu-id="b5c57-114">This is where the ODBC driver comes in.</span></span> <span data-ttu-id="b5c57-115">Tramite questo driver è ora possibile organizzare i dati rinormalizzati in Azure Cosmos DB in tabelle e visualizzazione in base alle proprie esigenze di analisi e creazione di report.</span><span class="sxs-lookup"><span data-stu-id="b5c57-115">By using the ODBC driver, you can now renormalized data in Azure Cosmos DB into tables and views fitting to your data analytic and reporting needs.</span></span> <span data-ttu-id="b5c57-116">Gli schemi rinormalizzati non hanno effetto sui dati sottostanti e non costringono gli sviluppatori a conformarli a essi, ma permettono semplicemente di sfruttare gli strumenti conformi a ODBC per accedere ai dati.</span><span class="sxs-lookup"><span data-stu-id="b5c57-116">The renormalized schemas have no impact on the underlying data and do not confine developers to adhere to them, they simply enable you to leverage ODBC-compliant tools to access the data.</span></span> <span data-ttu-id="b5c57-117">A questo punto il database di Azure Cosmos DB non sarà apprezzato solo dal team di sviluppo, ma anche dagli analisti dei dati.</span><span class="sxs-lookup"><span data-stu-id="b5c57-117">So now your Azure Cosmos DB database will not only be a favorite for your development team, but your data analysts will love it too.</span></span>

<span data-ttu-id="b5c57-118">Verranno illustrate ora le procedure iniziali riguardanti il driver ODBC.</span><span class="sxs-lookup"><span data-stu-id="b5c57-118">Now lets get started with the ODBC driver.</span></span>

## <span data-ttu-id="b5c57-119"><a id="install"></a>Passaggio 1: Installare il driver ODBC di Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="b5c57-119"><a id="install"></a>Step 1: Install the Azure Cosmos DB ODBC driver</span></span>

1. <span data-ttu-id="b5c57-120">Scaricare i driver per l'ambiente:</span><span class="sxs-lookup"><span data-stu-id="b5c57-120">Download the drivers for your environment:</span></span>

    * <span data-ttu-id="b5c57-121">[Microsoft Azure Cosmos DB ODBC 64-bit.msi](https://aka.ms/documentdb-odbc-64x64) per Windows a 64 bit</span><span class="sxs-lookup"><span data-stu-id="b5c57-121">[Microsoft Azure Cosmos DB ODBC 64-bit.msi](https://aka.ms/documentdb-odbc-64x64) for 64-bit Windows</span></span>
    * <span data-ttu-id="b5c57-122">[Microsoft Azure Cosmos DB ODBC 32x64-bit.msi](https://aka.ms/documentdb-odbc-32x64) per Windows a 32 bit in Windows a 64 bit</span><span class="sxs-lookup"><span data-stu-id="b5c57-122">[Microsoft Azure Cosmos DB ODBC 32x64-bit.msi](https://aka.ms/documentdb-odbc-32x64) for 32-bit on 64-bit Windows</span></span>
    * <span data-ttu-id="b5c57-123">[Microsoft Azure Cosmos DB ODBC 32-bit.msi](https://aka.ms/documentdb-odbc-32x32) per Windows a 32 bit</span><span class="sxs-lookup"><span data-stu-id="b5c57-123">[Microsoft Azure Cosmos DB ODBC 32-bit.msi](https://aka.ms/documentdb-odbc-32x32) for 32-bit Windows</span></span>

    <span data-ttu-id="b5c57-124">Eseguire il file msi in locale, avviando così l'**installazione guidata del driver ODBC di Microsoft Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-124">Run the msi file locally, which starts the **Microsoft Azure Cosmos DB ODBC Driver Installation Wizard**.</span></span> 
2. <span data-ttu-id="b5c57-125">Completare l'installazione guidata usando l'input predefinito per installare il driver ODBC.</span><span class="sxs-lookup"><span data-stu-id="b5c57-125">Complete the installation wizard using the default input to install the ODBC driver.</span></span>
3. <span data-ttu-id="b5c57-126">Aprire l'app **Amministrazione origine dati ODBC** nel computer. Per farlo è possibile digitare **ODBC Data sources** nella casella di ricerca di Windows.</span><span class="sxs-lookup"><span data-stu-id="b5c57-126">Open the **ODBC Data source Administrator** app on your computer, you can do this by typing **ODBC Data sources** in the Windows search box.</span></span> 
    <span data-ttu-id="b5c57-127">È possibile verificare la corretta installazione del driver facendo clic sulla scheda **Driver** e assicurandosi che sia elencato **Microsoft Azure Cosmos DB ODBC Driver**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-127">You can confirm the driver was installed by clicking the **Drivers** tab and ensuring **Microsoft Azure Cosmos DB ODBC Driver** is listed.</span></span>

    ![Amministrazione origine dati ODBC di Azure Cosmos DB](./media/odbc-driver/odbc-driver.png)

## <span data-ttu-id="b5c57-129"><a id="connect"></a>Passaggio 2: Connettersi al database Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="b5c57-129"><a id="connect"></a>Step 2: Connect to your Azure Cosmos DB database</span></span>

1. <span data-ttu-id="b5c57-130">Dopo aver [installato il driver ODBC di Azure Cosmos DB](#install), nella finestra **Amministrazione origine dati ODBC** fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-130">After [Installing the Azure Cosmos DB ODBC driver](#install), in the **ODBC Data Source Administrator** window, click **Add**.</span></span> <span data-ttu-id="b5c57-131">È possibile creare un DSN utente o di sistema.</span><span class="sxs-lookup"><span data-stu-id="b5c57-131">You can create a User or System DSN.</span></span> <span data-ttu-id="b5c57-132">In questo esempio viene creato un DSN utente.</span><span class="sxs-lookup"><span data-stu-id="b5c57-132">In this example, we are creating a User DSN.</span></span>
2. <span data-ttu-id="b5c57-133">Nella finestra **Crea origine dati** selezionare **Microsoft Azure Cosmos DB ODBC Driver** e fare clic su **Fine**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-133">In the **Create New Data Source** window, select **Microsoft Azure Cosmos DB ODBC Driver**, and then click **Finish**.</span></span>
3. <span data-ttu-id="b5c57-134">Nella finestra **Azure Cosmos DB ODBC Driver DSN Setup** (Configurazione DSN driver ODBC di Azure Cosmos DB) inserire le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="b5c57-134">In the **Azure Cosmos DB ODBC Driver SDN Setup** window, fill in the following:</span></span> 

    ![Finestra Azure Cosmos DB ODBC Driver DSN Setup (Configurazione DSN driver ODBC di Azure Cosmos DB)](./media/odbc-driver/odbc-driver-dsn-setup.png)
    - <span data-ttu-id="b5c57-136">**Nome origine dati**: nome descrittivo per il DSN di ODBC.</span><span class="sxs-lookup"><span data-stu-id="b5c57-136">**Data Source Name**: Your own friendly name for the ODBC DSN.</span></span> <span data-ttu-id="b5c57-137">Questo nome è univoco per l'account Azure Cosmos DB. Si consiglia quindi di assegnarne uno appropriato se si hanno più account.</span><span class="sxs-lookup"><span data-stu-id="b5c57-137">This name is unique to your Azure Cosmos DB account, so name it appropriately if you have multiple accounts.</span></span>
    - <span data-ttu-id="b5c57-138">**Descrizione**: breve descrizione dell'origine dati.</span><span class="sxs-lookup"><span data-stu-id="b5c57-138">**Description**: A brief description of the data source.</span></span>
    - <span data-ttu-id="b5c57-139">**Host**: URI dell'account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b5c57-139">**Host**: URI for your Azure Cosmos DB account.</span></span> <span data-ttu-id="b5c57-140">È possibile recuperarlo dal pannello Chiavi di Azure Cosmos DB del portale di Azure, come illustrato nello screenshot seguente.</span><span class="sxs-lookup"><span data-stu-id="b5c57-140">You can retrieve this from the Azure Cosmos DB Keys blade in the Azure portal, as shown in the following screenshot.</span></span> 
    - <span data-ttu-id="b5c57-141">**Chiave di accesso**: la chiave di lettura/scrittura o di sola lettura primaria e secondaria indicata nel pannello Chiavi di Azure Cosmos DB del portale di Azure, come illustrato nello screenshot seguente.</span><span class="sxs-lookup"><span data-stu-id="b5c57-141">**Access Key**: The primary or secondary, read-write or read-only key from the Azure Cosmos DB Keys blade in the Azure portal as shown in the following screenshot.</span></span> <span data-ttu-id="b5c57-142">È consigliabile usare la chiave di sola lettura se il DSN viene usato per l'elaborazione e la creazione di report su dati di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="b5c57-142">We recommend you use the read-only key if the DSN is used for read-only data processing and reporting.</span></span>
    <span data-ttu-id="b5c57-143">![Pannello Chiavi di Azure Cosmos DB](./media/odbc-driver/odbc-driver-keys.png)</span><span class="sxs-lookup"><span data-stu-id="b5c57-143">![Azure Cosmos DB Keys blade](./media/odbc-driver/odbc-driver-keys.png)</span></span>
    - <span data-ttu-id="b5c57-144">**Encrypt Access Key for** (Crittografa chiave di accesso per): selezionare la scelta migliore in base agli utenti del computer.</span><span class="sxs-lookup"><span data-stu-id="b5c57-144">**Encrypt Access Key for**: Select the best choice based on the users of this machine.</span></span> 
4. <span data-ttu-id="b5c57-145">Fare clic sul pulsante **Test** per assicurarsi che sia possibile connettersi all'account di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b5c57-145">Click the **Test** button to make sure you can connect to your Azure Cosmos DB account.</span></span> 
5. <span data-ttu-id="b5c57-146">Fare clic su **Opzioni avanzate** e impostare i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="b5c57-146">Click **Advanced Options** and set the following values:</span></span>
    - <span data-ttu-id="b5c57-147">**Coerenza delle query**: selezionare il [livello di coerenza](consistency-levels.md) per le operazioni.</span><span class="sxs-lookup"><span data-stu-id="b5c57-147">**Query Consistency**: Select the [consistency level](consistency-levels.md) for your operations.</span></span> <span data-ttu-id="b5c57-148">Il valore predefinito è Session.</span><span class="sxs-lookup"><span data-stu-id="b5c57-148">The default is Session.</span></span>
    - <span data-ttu-id="b5c57-149">**Numero di tentativi**: immettere il numero di tentativi di un'operazione se la richiesta iniziale non viene completata a causa della limitazione del servizio.</span><span class="sxs-lookup"><span data-stu-id="b5c57-149">**Number of Retries**: Enter the number of times to retry an operation if the initial request does not complete due to service throttling.</span></span>
    - <span data-ttu-id="b5c57-150">**File di schema**: si dispone di una serie di opzioni.</span><span class="sxs-lookup"><span data-stu-id="b5c57-150">**Schema File**: You have a number of options here.</span></span>
        - <span data-ttu-id="b5c57-151">Per impostazione predefinita, lasciando vuota questa voce, il driver analizzerà i dati nella prima pagina per tutte le raccolte per individuare lo schema di ciascuna raccolta.</span><span class="sxs-lookup"><span data-stu-id="b5c57-151">By default, leaving this entry as is (blank), the driver scans the first page data for all collections to determine the schema of each collection.</span></span> <span data-ttu-id="b5c57-152">L'operazione è definita Mapping raccolta.</span><span class="sxs-lookup"><span data-stu-id="b5c57-152">This is known as Collection Mapping.</span></span> <span data-ttu-id="b5c57-153">Senza un file di schema definito, il driver deve eseguire l'analisi per ogni sessione di driver, il che potrebbe comportare in un tempo di avvio più elevato per un'applicazione che usa DSN.</span><span class="sxs-lookup"><span data-stu-id="b5c57-153">Without a schema file defined, the driver has to perform the scan for each driver session and could result in a higher start up time of an application using the DSN.</span></span> <span data-ttu-id="b5c57-154">È consigliabile associare sempre un file di schema per un DSN.</span><span class="sxs-lookup"><span data-stu-id="b5c57-154">We recommend that you always associate a schema file for a DSN.</span></span>
        - <span data-ttu-id="b5c57-155">Se si dispone già di un file di schema, probabilmente creato con l'[Editor schema](#schema-editor), è possibile fare clic su **Sfoglia**, selezionare il file, fare clic su **Salva** e quindi su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-155">If you already have a schema file (possibly one that you created using the [Schema Editor](#schema-editor)), you can click **Browse**, navigate to your file, click **Save**, and then click **OK**.</span></span>
        - <span data-ttu-id="b5c57-156">Per creare un nuovo schema, fare clic su **OK** e quindi su **Editor schema** nella finestra principale.</span><span class="sxs-lookup"><span data-stu-id="b5c57-156">If you want to create a new schema, click **OK**, and then click **Schema Editor** in the main window.</span></span> <span data-ttu-id="b5c57-157">Procedere quindi alle informazioni di [Editor schema](#schema-editor).</span><span class="sxs-lookup"><span data-stu-id="b5c57-157">Then proceed to the [Schema Editor](#schema-editor) information.</span></span> <span data-ttu-id="b5c57-158">Dopo la creazione, assicurarsi di tornare alla finestra **Opzioni avanzate** per includere il file di schema appena creato.</span><span class="sxs-lookup"><span data-stu-id="b5c57-158">Upon creating the new schema file, please remember to go back to the **Advanced Options** window to include the newly created schema file.</span></span>

6. <span data-ttu-id="b5c57-159">Una volta completato e chiusa la finestra **Azure Cosmos DB ODBC Driver DSN Setup** (Configurazione DSN driver ODBC di Azure Cosmos DB), il nuovo DSN utente verrà aggiunto alla scheda User DSN (DSN utente).</span><span class="sxs-lookup"><span data-stu-id="b5c57-159">Once you complete and close the **Azure Cosmos DB ODBC Driver DSN Setup** window, the new User DSN is added to the User DSN tab.</span></span>

    ![Nuovo DSN ODBC di Azure Cosmos DB nella scheda User DSN (DSN utente)](./media/odbc-driver/odbc-driver-user-dsn.png)

## <span data-ttu-id="b5c57-161"><a id="#collection-mapping"></a>Passaggio 3: Creare una definizione dello schema usando il metodo di mapping raccolta</span><span class="sxs-lookup"><span data-stu-id="b5c57-161"><a id="#collection-mapping"></a>Step 3: Create a schema definition using the collection mapping method</span></span>

<span data-ttu-id="b5c57-162">Esistono due tipi di metodi di campionamento da utilizzare: il **mapping raccolta** o i **delimitatori di tabella**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-162">There are two types of sampling methods that you can use: **collection mapping** or **table-delimiters**.</span></span> <span data-ttu-id="b5c57-163">Una sessione di campionamento può usare entrambi i metodi, ma ogni raccolta può usarne solo uno specifico.</span><span class="sxs-lookup"><span data-stu-id="b5c57-163">A sampling session can utilize both sampling methods, but each collection can only use a specific sampling method.</span></span> <span data-ttu-id="b5c57-164">La procedura seguente crea uno schema per i dati in una o più raccolte mediante il metodo di mapping raccolta.</span><span class="sxs-lookup"><span data-stu-id="b5c57-164">The steps below create a schema for the data in one or more collections using the collection mapping method.</span></span> <span data-ttu-id="b5c57-165">Questo metodo di campionamento recupera i dati nella pagina di una raccolta per determinare la struttura degli stessi</span><span class="sxs-lookup"><span data-stu-id="b5c57-165">This sampling method retrieves the data in the page of a collection to determine the structure of the data.</span></span> <span data-ttu-id="b5c57-166">e trasforma la raccolta in una tabella in ODBC.</span><span class="sxs-lookup"><span data-stu-id="b5c57-166">It transposes a collection to a table on the ODBC side.</span></span> <span data-ttu-id="b5c57-167">Questo metodo di campionamento è rapido ed efficiente quando i dati in una raccolta sono omogenei.</span><span class="sxs-lookup"><span data-stu-id="b5c57-167">This sampling method is efficient and fast when the data in a collection is homogenous.</span></span> <span data-ttu-id="b5c57-168">Se una raccolta contiene tipi eterogenei di dati, è consigliabile usare il metodo di [mapping con delimitatori di tabelle](#table-mapping) in quanto consente un campionamento più efficiente per determinare le strutture di dati nella raccolta.</span><span class="sxs-lookup"><span data-stu-id="b5c57-168">If a collection contains heterogenous type of data, we recommend you use the [table-delimiters mapping method](#table-mapping) as it provides a more robust sampling method to determine the data structures in the collection.</span></span> 

1. <span data-ttu-id="b5c57-169">Dopo aver completato i passaggi 1-4 in [Connettersi al database Azure Cosmos DB](#connect), fare clic su **Editor schemi** nella finestra **Azure Cosmos DB ODBC Driver DSN Setup** (Configurazione DSN driver ODBC di Azure Cosmos DB).</span><span class="sxs-lookup"><span data-stu-id="b5c57-169">After completing steps 1-4 in [Connect to your Azure Cosmos DB database](#connect), click **Schema Editor** in the **Azure Cosmos DB ODBC Driver DSN Setup** window.</span></span>

    ![Pulsante Editor schemi nella finestra Azure Cosmos DB ODBC Driver DSN Setup (Configurazione DSN driver ODBC di Azure Cosmos DB)](./media/odbc-driver/odbc-driver-schema-editor.png)
2. <span data-ttu-id="b5c57-171">Nella finestra **Editor schema**, fare clic su **Crea nuovo**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-171">In the **Schema Editor** window, click **Create New**.</span></span>
    <span data-ttu-id="b5c57-172">La finestra **Generate Schema** (Genera schema) mostra tutte le raccolte nell'account di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b5c57-172">The **Generate Schema** window displays all the collections in the Azure Cosmos DB account.</span></span> 
3. <span data-ttu-id="b5c57-173">Selezionare uno o più raccolte da campionare e fare clic su **Campiona**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-173">Select one or more collections to sample, and then click **Sample**.</span></span> 
4. <span data-ttu-id="b5c57-174">Nella scheda **Visualizzazione progettazione** vengono rappresentati il database, lo schema e la tabella.</span><span class="sxs-lookup"><span data-stu-id="b5c57-174">In the **Design View** tab, the database, schema, and table are represented.</span></span> <span data-ttu-id="b5c57-175">Nella visualizzazione tabella, l'analisi mostra il set di proprietà associate ai nomi delle colonne: SQL Name, Source Name e così via.</span><span class="sxs-lookup"><span data-stu-id="b5c57-175">In the table view, the scan displays the set of properties associated with the column names (SQL Name, Source Name, etc.).</span></span>
    <span data-ttu-id="b5c57-176">Per ogni colonna è possibile modificare i valori nome SQL della colonna, tipo SQL, lunghezza SQL (se applicabile) e le proprietà Scale (se applicabile), Precision (se applicabile) e Nullable.</span><span class="sxs-lookup"><span data-stu-id="b5c57-176">For each column, you can modify the column SQL name, the SQL type, SQL length (if applicable), Scale (if applicable), Precision (if applicable) and Nullable.</span></span>
    - <span data-ttu-id="b5c57-177">È possibile impostare **Nascondi colonna** su **true** se si desidera escludere la colonna dai risultati delle query.</span><span class="sxs-lookup"><span data-stu-id="b5c57-177">You can set **Hide Column** to **true** if you want to exclude that column from query results.</span></span> <span data-ttu-id="b5c57-178">Le colonne contrassegnate con Nascondi colonna = true non vengono incluse nei risultati di selezione e proiezione, anche se fanno comunque parte dello schema.</span><span class="sxs-lookup"><span data-stu-id="b5c57-178">Columns marked Hide Column = true are not returned for selection and projection, although they are still part of the schema.</span></span> <span data-ttu-id="b5c57-179">È ad esempio possibile nascondere tutte le proprietà di sistema richieste di Azure Cosmos DB che iniziano con "_".</span><span class="sxs-lookup"><span data-stu-id="b5c57-179">For example, you can hide all of the Azure Cosmos DB system required properties starting with “_”.</span></span>
    - <span data-ttu-id="b5c57-180">La colonna **id** è l'unico campo che non è possibile nascondere, poiché è usato come chiave primaria nello schema normalizzato.</span><span class="sxs-lookup"><span data-stu-id="b5c57-180">The **id** column is the only field that cannot be hidden as it is used as the primary key in the normalized schema.</span></span> 
5. <span data-ttu-id="b5c57-181">Dopo aver completato la definizione dello schema, fare clic su **File** | **Salva**, passare alla directory in cui salvare lo schema e fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-181">Once you have finished defining the schema, click **File** | **Save**, navigate to the directory to save the schema, and then click **Save**.</span></span>

    <span data-ttu-id="b5c57-182">Se in futuro si vuole usare questo schema con un DSN, aprire la finestra Azure Cosmos DB ODBC Driver DSN Setup (Configurazione DSN driver ODBC di Azure Cosmos DB) tramite Amministrazione origine dati ODBC, fare clic su Opzioni avanzate e nel riquadro File di schema passare allo schema salvato.</span><span class="sxs-lookup"><span data-stu-id="b5c57-182">If in the future you want to use this schema with a DSN, open the Azure Cosmos DB ODBC Driver DSN Setup window (via the ODBC Data Source Administrator), click Advanced Options, and then in the Schema File box, navigate to the saved schema.</span></span> <span data-ttu-id="b5c57-183">Salvare un file di schema in un DSN esistente modifica l'ambito della connessione DSN includendo i dati e le strutture definiti dallo schema.</span><span class="sxs-lookup"><span data-stu-id="b5c57-183">Saving a schema file to an existing DSN modifies the DSN connection to scope to the data and structure defined by schema.</span></span>

## <span data-ttu-id="b5c57-184"><a id="table-mapping"></a>Passaggio 4: Creare una definizione dello schema usando il metodo di delimitatori di tabella</span><span class="sxs-lookup"><span data-stu-id="b5c57-184"><a id="table-mapping"></a>Step 4: Create a schema definition using the table-delimiters mapping method</span></span>

<span data-ttu-id="b5c57-185">Esistono due tipi di metodi di campionamento da utilizzare: il **mapping raccolta** o i **delimitatori di tabella**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-185">There are two types of sampling methods that you can use: **collection mapping** or **table-delimiters**.</span></span> <span data-ttu-id="b5c57-186">Una sessione di campionamento può usare entrambi i metodi, ma ogni raccolta può usarne solo uno specifico.</span><span class="sxs-lookup"><span data-stu-id="b5c57-186">A sampling session can utilize both sampling methods, but each collection can only use a specific sampling method.</span></span> 

<span data-ttu-id="b5c57-187">La procedura seguente crea uno schema per i dati in una o più raccolte mediante il metodo di **delimitatori di tabella**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-187">The following steps create a schema for the data in one or more collections using the **table-delimiters** mapping method.</span></span> <span data-ttu-id="b5c57-188">È consigliabile usare questo metodo di campionamento quando le raccolte contengono tipi eterogenei di dati.</span><span class="sxs-lookup"><span data-stu-id="b5c57-188">We recommend that you use this sampling method when your collections contain heterogeneous type of data.</span></span> <span data-ttu-id="b5c57-189">È possibile usare questo metodo per definire come ambito di campionamento un set di attributi e i valori corrispondenti.</span><span class="sxs-lookup"><span data-stu-id="b5c57-189">You can use this method to scope the sampling to a set of attributes and its corresponding values.</span></span> <span data-ttu-id="b5c57-190">Ad esempio, se un documento contiene una proprietà "Tipo", è possibile definire il campionamento per i valori di questa proprietà.</span><span class="sxs-lookup"><span data-stu-id="b5c57-190">For example, if a document contains a “Type” property, you can scope the sampling to the values of this property.</span></span> <span data-ttu-id="b5c57-191">Il risultato finale del campionamento sarà un set di tabelle per ciascun valore della proprietà Tipo specificata.</span><span class="sxs-lookup"><span data-stu-id="b5c57-191">The end result of the sampling would be a set of tables for each of the values for Type you have specified.</span></span> <span data-ttu-id="b5c57-192">Ad esempio, Tipo = Car produrrà una tabella Car mentre Tipo = Plane produrrà una tabella Plane.</span><span class="sxs-lookup"><span data-stu-id="b5c57-192">For example, Type = Car will produce a Car table while Type = Plane would produce a Plane table.</span></span>

1. <span data-ttu-id="b5c57-193">Dopo aver completato i passaggi 1-4 in [Connettersi al database Azure Cosmos DB](#connect), fare clic su **Editor schemi** nella finestra Azure Cosmos DB ODBC Driver DSN Setup (Configurazione DSN driver ODBC di Azure Cosmos DB).</span><span class="sxs-lookup"><span data-stu-id="b5c57-193">After completing steps 1-4 in [Connect to your Azure Cosmos DB database](#connect), click **Schema Editor** in the Azure Cosmos DB ODBC Driver DSN Setup window.</span></span>
2. <span data-ttu-id="b5c57-194">Nella finestra **Editor schema**, fare clic su **Crea nuovo**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-194">In the **Schema Editor** window, click **Create New**.</span></span>
    <span data-ttu-id="b5c57-195">La finestra **Generate Schema** (Genera schema) mostra tutte le raccolte nell'account di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b5c57-195">The **Generate Schema** window displays all the collections in the Azure Cosmos DB account.</span></span> 
3. <span data-ttu-id="b5c57-196">Selezionare una raccolta nella scheda **Visualizzazione di esempio**. Nella colonna **Mapping Definition** (Definizione mapping) della raccolta fare clic su **Modifica**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-196">Select a collection on the **Sample View** tab, in the **Mapping Definition** column for the collection, click **Edit**.</span></span> <span data-ttu-id="b5c57-197">A quel punto, nella finestra **Mapping Definition** (Definizione mapping) selezionare il metodo **Table Delimiters** (Delimitatori di tabella).</span><span class="sxs-lookup"><span data-stu-id="b5c57-197">Then in the **Mapping Definition** window, select **Table Delimiters** method.</span></span> <span data-ttu-id="b5c57-198">Eseguire quindi le operazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="b5c57-198">Then do the following:</span></span>

    <span data-ttu-id="b5c57-199">a.</span><span class="sxs-lookup"><span data-stu-id="b5c57-199">a.</span></span> <span data-ttu-id="b5c57-200">Nel riquadro **Attributi** digitare il nome di una proprietà delimitatore.</span><span class="sxs-lookup"><span data-stu-id="b5c57-200">In the **Attributes** box, type the name of a delimiter property.</span></span> <span data-ttu-id="b5c57-201">Si tratta di una proprietà nel documento per cui si desidera eseguire il campionamento. Digitare ad esempio City e premere INVIO.</span><span class="sxs-lookup"><span data-stu-id="b5c57-201">This is a property in your document that you want to scope the sampling to, for instance, City and press enter.</span></span> 

    <span data-ttu-id="b5c57-202">b.</span><span class="sxs-lookup"><span data-stu-id="b5c57-202">b.</span></span> <span data-ttu-id="b5c57-203">Se si desidera definire limitare il campionamento a determinati valori per l'attributo appena immesso, selezionare l'attributo nel riquadro di selezione, quindi immettere un valore nel riquadro **Valore**, ad esempio Seattle, e premere INVIO.</span><span class="sxs-lookup"><span data-stu-id="b5c57-203">If you only want to scope the sampling to certain values for the attribute you just entered, select the attribute in the selection box, then enter a value in the **Value** box, for example, Seattle and press enter.</span></span> <span data-ttu-id="b5c57-204">È possibile continuare ad aggiungere più valori per gli attributi.</span><span class="sxs-lookup"><span data-stu-id="b5c57-204">You can continue to add multiple values for attributes.</span></span> <span data-ttu-id="b5c57-205">Assicurarsi che sia selezionato l'attributo corretto quando si immettono i valori.</span><span class="sxs-lookup"><span data-stu-id="b5c57-205">Just ensure that the correct attribute is selected when you're entering values.</span></span>

    <span data-ttu-id="b5c57-206">Ad esempio, se si include un valore City per gli **Attributi** e si desidera limitare la tabella in modo che includa solamente le righe con un valore City di New York e Dubai, si inserirà City nel riquadro Attributi e New York e Dubai nel riquadro **Valori**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-206">For example, if you include an **Attributes** value of City, and you want to limit your table to only include rows with a city value of New York and Dubai, you would enter City in the Attributes box, and New York and then Dubai in the **Values** box.</span></span>
4. <span data-ttu-id="b5c57-207">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-207">Click **OK**.</span></span> 
5. <span data-ttu-id="b5c57-208">Dopo aver completato le definizioni di mapping per le raccolte da campionare, nella finestra **Editor schemi** fare clic su **Campiona**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-208">After completing the mapping definitions for the collections you want to sample, in the **Schema Editor** window, click **Sample**.</span></span>
     <span data-ttu-id="b5c57-209">Per ogni colonna è possibile modificare i valori nome SQL della colonna, tipo SQL, lunghezza SQL (se applicabile) e le proprietà Scale (se applicabile), Precision (se applicabile) e Nullable.</span><span class="sxs-lookup"><span data-stu-id="b5c57-209">For each column, you can modify the column SQL name, the SQL type, SQL length (if applicable), Scale (if applicable), Precision (if applicable) and Nullable.</span></span>
    - <span data-ttu-id="b5c57-210">È possibile impostare **Nascondi colonna** su **true** se si desidera escludere la colonna dai risultati delle query.</span><span class="sxs-lookup"><span data-stu-id="b5c57-210">You can set **Hide Column** to **true** if you want to exclude that column from query results.</span></span> <span data-ttu-id="b5c57-211">Le colonne contrassegnate con Nascondi colonna = true non vengono incluse nei risultati di selezione e proiezione, anche se fanno comunque parte dello schema.</span><span class="sxs-lookup"><span data-stu-id="b5c57-211">Columns marked Hide Column = true are not returned for selection and projection, although they are still part of the schema.</span></span> <span data-ttu-id="b5c57-212">È ad esempio possibile nascondere tutte le proprietà di sistema richieste di Azure Cosmos DB che iniziano con "_".</span><span class="sxs-lookup"><span data-stu-id="b5c57-212">For example, you can hide all the Azure Cosmos DB system required properties starting with “_”.</span></span>
    - <span data-ttu-id="b5c57-213">La colonna **id** è l'unico campo che non è possibile nascondere, poiché è usato come chiave primaria nello schema normalizzato.</span><span class="sxs-lookup"><span data-stu-id="b5c57-213">The **id** column is the only field that cannot be hidden as it is used as the primary key in the normalized schema.</span></span> 
6. <span data-ttu-id="b5c57-214">Dopo aver completato la definizione dello schema, fare clic su **File** | **Salva**, passare alla directory in cui salvare lo schema e fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-214">Once you have finished defining the schema, click **File** | **Save**, navigate to the directory to save the schema, and then click **Save**.</span></span>
7. <span data-ttu-id="b5c57-215">Nella finestra **Azure Cosmos DB ODBC Driver DSN Setup** (Configurazione DSN driver ODBC di Azure Cosmos DB) fare clic su **Opzioni avanzate**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-215">Back in the **Azure Cosmos DB ODBC Driver DSN Setup** window, click ** Advanced Options**.</span></span> <span data-ttu-id="b5c57-216">Quindi, nel riquadro **File di schema**, passare al file di schema salvato e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-216">Then, in the **Schema File** box, navigate to the saved schema file and click **OK**.</span></span> <span data-ttu-id="b5c57-217">Fare nuovamente clic su **OK** e salvare il DSN.</span><span class="sxs-lookup"><span data-stu-id="b5c57-217">Click **OK** again to save the DSN.</span></span> <span data-ttu-id="b5c57-218">In questo modo lo schema creato viene salvato nel DSN.</span><span class="sxs-lookup"><span data-stu-id="b5c57-218">This saves the schema you created to the DSN.</span></span> 

## <a name="optional-creating-views"></a><span data-ttu-id="b5c57-219">(Facoltativo) Creazione di visualizzazioni</span><span class="sxs-lookup"><span data-stu-id="b5c57-219">(Optional) Creating views</span></span>
<span data-ttu-id="b5c57-220">È possibile definire e creare visualizzazioni come parte del processo di campionamento.</span><span class="sxs-lookup"><span data-stu-id="b5c57-220">You can define and create views as part of the sampling process.</span></span> <span data-ttu-id="b5c57-221">Le visualizzazioni equivalgono alle visualizzazioni SQL.</span><span class="sxs-lookup"><span data-stu-id="b5c57-221">These views are equivalent to SQL views.</span></span> <span data-ttu-id="b5c57-222">Sono di sola lettura e corrispondono alle selezioni e proiezioni definite in SQL di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b5c57-222">They are read-only and are scope the selections and projections of the Azure Cosmos DB SQL defined.</span></span> 

<span data-ttu-id="b5c57-223">Per creare una visualizzazione dei dati, nella finestra **Editor schemi** passare alla colonna **Definizioni visualizzazioni** e fare clic su **Aggiungi** nella riga delle raccolte da campionare.</span><span class="sxs-lookup"><span data-stu-id="b5c57-223">To create a view for your data, in the **Schema Editor** window, in the **View Definitions** column, click **Add** on the row of the collection to sample.</span></span> <span data-ttu-id="b5c57-224">Quindi eseguire le operazioni seguenti nella finestra **Definizioni visualizzazioni**:</span><span class="sxs-lookup"><span data-stu-id="b5c57-224">Then in the **View Definitions** window, do the following:</span></span>
1. <span data-ttu-id="b5c57-225">Fare clic su **Nuova**, immettere un nome per la visualizzazione, ad esempio EmployeesfromSeattleView, e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-225">Click **New**, enter a name for the view, for example, EmployeesfromSeattleView and then click **OK**.</span></span>
2. <span data-ttu-id="b5c57-226">Nella finestra **Modifica visualizzazione** inserire una query di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="b5c57-226">In the **Edit view** window, enter an Azure Cosmos DB query.</span></span> <span data-ttu-id="b5c57-227">Deve trattarsi di una query SQL di Azure Cosmos DB, ad esempio `SELECT c.City, c.EmployeeName, c.Level, c.Age, c.Gender, c.Manager FROM c WHERE c.City = “Seattle”`. Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-227">This must be an Azure Cosmos DB SQL query, for example`SELECT c.City, c.EmployeeName, c.Level, c.Age, c.Gender, c.Manager FROM c WHERE c.City = “Seattle”`, and then click **OK**.</span></span>

<span data-ttu-id="b5c57-228">È possibile creare un numero illimitato di visualizzazioni.</span><span class="sxs-lookup"><span data-stu-id="b5c57-228">You can create a many views as you like.</span></span> <span data-ttu-id="b5c57-229">Dopo aver definito le visualizzazioni, è possibile campionare i dati.</span><span class="sxs-lookup"><span data-stu-id="b5c57-229">Once you are done defining the views, you can then sample the data.</span></span> 

## <a name="step-5-view-your-data-in-bi-tools-such-as-power-bi-desktop"></a><span data-ttu-id="b5c57-230">Passaggio 5: Visualizzare i dati in strumenti di BI quali Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="b5c57-230">Step 5: View your data in BI tools such as Power BI Desktop</span></span>

<span data-ttu-id="b5c57-231">È possibile usare il nuovo DSN per connettere DocumentADB con qualsiasi strumento conforme a ODBC. Questo passaggio illustra semplicemente come connettersi a Power BI Desktop e creare una visualizzazione di Power BI.</span><span class="sxs-lookup"><span data-stu-id="b5c57-231">You can use your new DSN to connect DocumentADB with any ODBC-compliant tools - this step simply shows you how to connect to Power BI Desktop and create a Power BI visualization.</span></span>

1. <span data-ttu-id="b5c57-232">Aprire Power BI Desktop.</span><span class="sxs-lookup"><span data-stu-id="b5c57-232">Open Power BI Desktop.</span></span>
2. <span data-ttu-id="b5c57-233">Fare clic su **Recupera dati**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-233">Click **Get Data**.</span></span>
3. <span data-ttu-id="b5c57-234">Nella finestra **Recupera dati** fare clic su **Altri** | **ODBC** | **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-234">In the **Get Data** window, click **Other** | **ODBC** | **Connect**.</span></span>
4. <span data-ttu-id="b5c57-235">Nella finestra **Da ODBC**, selezionare il nome dell'origine dati creato, quindi fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-235">In the **From ODBC** window, select the data source name you created, and then click **OK**.</span></span> <span data-ttu-id="b5c57-236">È possibile lasciare vuote le voci **Opzioni avanzate**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-236">You can leave the **Advanced Options** entries blank.</span></span>
5. <span data-ttu-id="b5c57-237">Nella finestra **Accedere a un'origine dati tramite un driver ODBC**, selezionare **Predefinito o personalizzato**, quindi fare clic su **Connetti**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-237">In the **Access a data source using an ODBC driver** window, select **Default or Custom** and then click **Connect**.</span></span> <span data-ttu-id="b5c57-238">Non è necessario includere le **proprietà stringa di connessione delle credenziali**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-238">You do not need to include the **Credential connection string properties**.</span></span>
6. <span data-ttu-id="b5c57-239">Nella finestra **Strumento di spostamento**, espandere il database e lo schema nel riquadro a sinistra, quindi selezionare la tabella.</span><span class="sxs-lookup"><span data-stu-id="b5c57-239">In the **Navigator** window, in the left pane, expand the database, the schema, and then select the table.</span></span> <span data-ttu-id="b5c57-240">Il riquadro dei risultati include i dati che usano lo schema creato.</span><span class="sxs-lookup"><span data-stu-id="b5c57-240">The results pane includes the data using the schema you created.</span></span>
7. <span data-ttu-id="b5c57-241">Per visualizzare i dati in Power BI Desktop, selezionare la casella davanti al nome di tabella e fare clic su **Carica**.</span><span class="sxs-lookup"><span data-stu-id="b5c57-241">To visualize the data in Power BI desktop, check the box in front of the table name, and then click **Load**.</span></span>
8. <span data-ttu-id="b5c57-242">In Power BI Desktop selezionare la scheda Dati a sinistra</span><span class="sxs-lookup"><span data-stu-id="b5c57-242">In Power BI Desktop, on the far left, select the Data tab</span></span> ![Scheda dati in Power BI Desktop](./media/odbc-driver/odbc-driver-data-tab.png) <span data-ttu-id="b5c57-244">per confermare l'importazione dei dati.</span><span class="sxs-lookup"><span data-stu-id="b5c57-244">to confirm your data was imported.</span></span>
9. <span data-ttu-id="b5c57-245">È ora possibile creare oggetti visivi usando Power BI e facendo clic sulla scheda Report ![Scheda Report in Power BI Desktop](./media/odbc-driver/odbc-driver-report-tab.png), quindi su **Nuovo oggetto visivo** e personalizzando il riquadro.</span><span class="sxs-lookup"><span data-stu-id="b5c57-245">You can now create visuals using Power BI by clicking on the Report tab ![Report tab in Power BI Desktop](./media/odbc-driver/odbc-driver-report-tab.png), clicking **New Visual**, and then customizing your tile.</span></span> <span data-ttu-id="b5c57-246">Per altre informazioni sulla creazione di visualizzazioni in Power BI Desktop, vedere [Tipi di visualizzazioni in Power BI](https://powerbi.microsoft.com/documentation/powerbi-service-visualization-types-for-reports-and-q-and-a/).</span><span class="sxs-lookup"><span data-stu-id="b5c57-246">For more information about creating visualizations in Power BI Desktop, see [Visualization types in Power BI](https://powerbi.microsoft.com/documentation/powerbi-service-visualization-types-for-reports-and-q-and-a/).</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="b5c57-247">Risoluzione dei problemi</span><span class="sxs-lookup"><span data-stu-id="b5c57-247">Troubleshooting</span></span>

<span data-ttu-id="b5c57-248">Se viene visualizzato il seguente errore, verificare che i valori **Host** e **Chiave di accesso** copiati nel portale di Azure nel [passaggio 2](#connect) siano corretti, quindi riprovare.</span><span class="sxs-lookup"><span data-stu-id="b5c57-248">If you receive the following error, ensure the **Host** and **Access Key** values you copied the Azure portal in [Step 2](#connect) are correct and then retry.</span></span> <span data-ttu-id="b5c57-249">Usare i pulsanti di copia a destra dei valori **Host** e **Chiave di accesso** nel portale di Azure per evitare errori.</span><span class="sxs-lookup"><span data-stu-id="b5c57-249">Use the copy buttons to the right of the **Host** and **Access Key** values in the Azure portal to copy the values error free.</span></span>

    [HY000]: [Microsoft][Azure Cosmos DB] (401) HTTP 401 Authentication Error: {"code":"Unauthorized","message":"The input authorization token can't serve the request. Please check that the expected payload is built as per the protocol, and check the key being used. Server used the following payload to sign: 'get\ndbs\n\nfri, 20 jan 2017 03:43:55 gmt\n\n'\r\nActivityId: 9acb3c0d-cb31-4b78-ac0a-413c8d33e373"}`

## <a name="next-steps"></a><span data-ttu-id="b5c57-250">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="b5c57-250">Next steps</span></span>

<span data-ttu-id="b5c57-251">Per altre informazioni su Azure Cosmos DB, vedere [Introduzione ad Azure Cosmos DB](introduction.md).</span><span class="sxs-lookup"><span data-stu-id="b5c57-251">To learn more about Azure Cosmos DB, see [What is Azure Cosmos DB?](introduction.md).</span></span>
