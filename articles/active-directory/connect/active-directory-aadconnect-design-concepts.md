---
title: Concetti relativi alla progettazione per Azure AD Connect | Documentazione Microsoft
description: Questo argomento illustra alcune aree di progettazione dell'implementazione.
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f23443d438c95a784f655fb9a5f20dfcf37be189
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="99378-103">Azure AD Connect: Concetti relativi alla progettazione</span><span class="sxs-lookup"><span data-stu-id="99378-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="99378-104">L'obiettivo di questo argomento consiste nell'illustrare le aree da esaminare durante la progettazione dell'implementazione di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="99378-104">The purpose of this topic is to describe areas that must be thought through during the implementation design of Azure AD Connect.</span></span> <span data-ttu-id="99378-105">Si tratta di un'analisi approfondita di determinate aree e questi concetti vengono illustrati brevemente anche in altri argomenti.</span><span class="sxs-lookup"><span data-stu-id="99378-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="99378-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="99378-106">sourceAnchor</span></span>
<span data-ttu-id="99378-107">L'attributo sourceAnchor viene definito come *un attributo immutabile durante il ciclo di vita di un oggetto*.</span><span class="sxs-lookup"><span data-stu-id="99378-107">The sourceAnchor attribute is defined as *an attribute immutable during the lifetime of an object*.</span></span> <span data-ttu-id="99378-108">Identifica in modo univoco un oggetto come corrispondente all'oggetto locale in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="99378-108">It uniquely identifies an object as being the same object on-premises and in Azure AD.</span></span> <span data-ttu-id="99378-109">L'attributo viene definito anche **immutableId** e i due nomi sono usati in modo intercambiabile.</span><span class="sxs-lookup"><span data-stu-id="99378-109">The attribute is also called **immutableId** and the two names are used interchangeable.</span></span>

<span data-ttu-id="99378-110">Il termine immutabile, ovvero "non modificabile", è importante in questo argomento.</span><span class="sxs-lookup"><span data-stu-id="99378-110">The word immutable, that is "cannot be changed", is important to this topic.</span></span> <span data-ttu-id="99378-111">Poiché il valore di questo attributo non può essere modificato dopo la configurazione, è essenziale scegliere una progettazione in grado di supportare lo scenario specifico.</span><span class="sxs-lookup"><span data-stu-id="99378-111">Since this attribute’s value cannot be changed after it has been set, it is important to pick a design that supports your scenario.</span></span>

<span data-ttu-id="99378-112">L'attributo viene usato per gli scenari seguenti:</span><span class="sxs-lookup"><span data-stu-id="99378-112">The attribute is used for the following scenarios:</span></span>

* <span data-ttu-id="99378-113">Quando viene compilato un nuovo motore di sincronizzazione o quando il motore viene ricompilato dopo uno scenario di ripristino di emergenza, questo attributo collega gli oggetti esistenti in Azure AD con gli oggetti locali.</span><span class="sxs-lookup"><span data-stu-id="99378-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="99378-114">Se si passa da un modello di identità solo cloud a un modello di identità sincronizzato, questo attributo consente la "corrispondenza rigida" degli oggetti esistenti in Azure AD con gli oggetti locali.</span><span class="sxs-lookup"><span data-stu-id="99378-114">If you move from a cloud-only identity to a synchronized identity model, then this attribute allows objects to "hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="99378-115">Se si usa la federazione, questo attributo viene usato insieme a **userPrincipalName** nell'attestazione per identificare in modo univoco un utente.</span><span class="sxs-lookup"><span data-stu-id="99378-115">If you use federation, then this attribute together with the **userPrincipalName** is used in the claim to uniquely identify a user.</span></span>

<span data-ttu-id="99378-116">Questo argomento esamina sourceAnchor solo relativamente agli utenti.</span><span class="sxs-lookup"><span data-stu-id="99378-116">This topic only talks about sourceAnchor as it relates to users.</span></span> <span data-ttu-id="99378-117">Le stesse regole sono applicabili a tutti i tipi di oggetto, ma in genere presentano problemi solo per gli utenti.</span><span class="sxs-lookup"><span data-stu-id="99378-117">The same rules apply to all object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="99378-118">Selezione di un attributo sourceAnchor valido</span><span class="sxs-lookup"><span data-stu-id="99378-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="99378-119">Il valore dell'attributo deve rispettare le regole seguenti:</span><span class="sxs-lookup"><span data-stu-id="99378-119">The attribute value must follow the following rules:</span></span>

* <span data-ttu-id="99378-120">La lunghezza del testo deve essere inferiore a 60 caratteri</span><span class="sxs-lookup"><span data-stu-id="99378-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="99378-121">I caratteri diversi da a-z, A-Z o 0-9 vengono codificati e conteggiati come 3 caratteri</span><span class="sxs-lookup"><span data-stu-id="99378-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="99378-122">Non deve contenere un carattere speciale: &#92; !</span><span class="sxs-lookup"><span data-stu-id="99378-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="99378-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="99378-123"># $ % & * + / = ?</span></span> <span data-ttu-id="99378-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="99378-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="99378-125">Deve essere globalmente univoco</span><span class="sxs-lookup"><span data-stu-id="99378-125">Must be globally unique</span></span>
* <span data-ttu-id="99378-126">Deve essere una stringa, un valore intero o un numero binario</span><span class="sxs-lookup"><span data-stu-id="99378-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="99378-127">Non deve essere basato sul nome dell'utente, queste modifiche</span><span class="sxs-lookup"><span data-stu-id="99378-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="99378-128">Non devono fare distinzione tra maiuscole e minuscole e devono evitare valori che possono variare in base alle maiuscole/minuscole</span><span class="sxs-lookup"><span data-stu-id="99378-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="99378-129">Deve essere assegnato quando viene creato l'oggetto</span><span class="sxs-lookup"><span data-stu-id="99378-129">Should be assigned when the object is created</span></span>

<span data-ttu-id="99378-130">Se l'attributo sourceAnchor selezionato non è di tipo stringa, Azure AD Connect usa Base64Encode per il valore dell'attributo per assicurare che non vengano visualizzati caratteri speciali.</span><span class="sxs-lookup"><span data-stu-id="99378-130">If the selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode the attribute value to ensure no special characters appear.</span></span> <span data-ttu-id="99378-131">Se si usa un altro server federativo, assicurarsi che il server sia in grado di applicare Base64Encode all'attributo.</span><span class="sxs-lookup"><span data-stu-id="99378-131">If you use another federation server than ADFS, make sure your server can also Base64Encode the attribute.</span></span>

<span data-ttu-id="99378-132">L'attributo sourceAnchor rispetta la distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="99378-132">The sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="99378-133">Un valore quale "DavideMilano" è diverso da "davidemilano".</span><span class="sxs-lookup"><span data-stu-id="99378-133">A value of “JohnDoe” is not the same as “johndoe”.</span></span> <span data-ttu-id="99378-134">Non è tuttavia consigliabile creare due oggetti che si differenziano solo per la distinzione tra maiuscole e minuscole.</span><span class="sxs-lookup"><span data-stu-id="99378-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="99378-135">Se è presente una singola foresta locale, l'attributo da usare è **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="99378-135">If you have a single forest on-premises, then the attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="99378-136">Questo attributo deve essere usato anche con le impostazioni rapide in Azure AD Connect e viene usato anche da DirSync.</span><span class="sxs-lookup"><span data-stu-id="99378-136">This is also the attribute used when you use express settings in Azure AD Connect and also the attribute used by DirSync.</span></span>

<span data-ttu-id="99378-137">Se sono presenti più foreste e gli utenti non vengono spostati tra foreste e domini, è possibile usare comunque l'attributo **objectGUID** .</span><span class="sxs-lookup"><span data-stu-id="99378-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute to use even in this case.</span></span>

<span data-ttu-id="99378-138">Se si spostano gli utenti tra foreste e domini, è necessario trovare un attributo che non viene modificato o che possa essere spostato con gli utenti durante lo spostamento.</span><span class="sxs-lookup"><span data-stu-id="99378-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with the users during the move.</span></span> <span data-ttu-id="99378-139">Un approccio consigliato consiste nell'introdurre un attributo sintetico.</span><span class="sxs-lookup"><span data-stu-id="99378-139">A recommended approach is to introduce a synthetic attribute.</span></span> <span data-ttu-id="99378-140">È possibile usare un attributo che include un elemento analogo a un GUID.</span><span class="sxs-lookup"><span data-stu-id="99378-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="99378-141">Un nuovo GUID viene creato e assegnato all'utente durante la creazione di un oggetto.</span><span class="sxs-lookup"><span data-stu-id="99378-141">During object creation, a new GUID is created and stamped on the user.</span></span> <span data-ttu-id="99378-142">Una regola di sincronizzazione personalizzata può essere creata nel server del motore di sincronizzazione per creare questo valore in base all’ **objectGUID** e aggiornare l'attributo selezionato in ADDS.</span><span class="sxs-lookup"><span data-stu-id="99378-142">A custom sync rule can be created in the sync engine server to create this value based on the **objectGUID** and update the selected attribute in ADDS.</span></span> <span data-ttu-id="99378-143">Quando si sposta l'oggetto, assicurarsi di copiare anche il contenuto di questo valore.</span><span class="sxs-lookup"><span data-stu-id="99378-143">When you move the object, make sure to also copy the content of this value.</span></span>

<span data-ttu-id="99378-144">Un'altra soluzione consiste nello scegliere un attributo esistente che si sa che non cambierà.</span><span class="sxs-lookup"><span data-stu-id="99378-144">Another solution is to pick an existing attribute you know does not change.</span></span> <span data-ttu-id="99378-145">Uno degli attributi più comunemente usati è **employeeID**.</span><span class="sxs-lookup"><span data-stu-id="99378-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="99378-146">Se si prende in considerazione un attributo che contiene lettere, assicurarsi che non vi sia alcuna possibilità che le lettere maiuscole e/o minuscole usate per il valore dell'attributo vengano modificate.</span><span class="sxs-lookup"><span data-stu-id="99378-146">If you consider an attribute that contains letters, make sure there is no chance the case (upper case vs. lower case) can change for the attribute's value.</span></span> <span data-ttu-id="99378-147">Gli attributi non validi che non devono essere usati includono gli attributi con il nome dell'utente.</span><span class="sxs-lookup"><span data-stu-id="99378-147">Bad attributes that should not be used include those attributes with the name of the user.</span></span> <span data-ttu-id="99378-148">In caso di matrimonio o divorzio è possibile che il nome venga modificato e ciò non è consentito per questo attributo.</span><span class="sxs-lookup"><span data-stu-id="99378-148">In a marriage or divorce, the name is expected to change, which is not allowed for this attribute.</span></span> <span data-ttu-id="99378-149">Per questo motivo non è nemmeno possibile selezionare attributi quali **userPrincipalName**, **mail** e **targetAddress** nell'installazione guidata di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="99378-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible to select in the Azure AD Connect installation wizard.</span></span> <span data-ttu-id="99378-150">Questi attributi contengono anche il carattere "@", che non è consentito in sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-150">Those attributes also contain the "@" character, which is not allowed in the sourceAnchor.</span></span>

### <a name="changing-the-sourceanchor-attribute"></a><span data-ttu-id="99378-151">Modifica dell'attributo sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="99378-151">Changing the sourceAnchor attribute</span></span>
<span data-ttu-id="99378-152">Il valore dell'attributo sourceAnchor non può essere modificato dopo la creazione dell'oggetto in Azure AD e la sincronizzazione dell'identità.</span><span class="sxs-lookup"><span data-stu-id="99378-152">The sourceAnchor attribute value cannot be changed after the object has been created in Azure AD and the identity is synchronized.</span></span>

<span data-ttu-id="99378-153">Le restrizioni seguenti sono quindi applicabili ad Azure AD Connect:</span><span class="sxs-lookup"><span data-stu-id="99378-153">For this reason, the following restrictions apply to Azure AD Connect:</span></span>

* <span data-ttu-id="99378-154">L'attributo sourceAnchor può essere configurato solo durante l'installazione iniziale.</span><span class="sxs-lookup"><span data-stu-id="99378-154">The sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="99378-155">Se si esegue di nuovo l'installazione guidata, questa opzione sarà di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="99378-155">If you rerun the installation wizard, this option is read-only.</span></span> <span data-ttu-id="99378-156">Per modificare questa impostazione, è necessario eseguire la disinstallazione e la reinstallazione.</span><span class="sxs-lookup"><span data-stu-id="99378-156">If you need to change this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="99378-157">Se si installa un altro server di Azure AD Connect, sarà necessario selezionare lo stesso attributo sourceAnchor usato in precedenza.</span><span class="sxs-lookup"><span data-stu-id="99378-157">If you install another Azure AD Connect server, then you must select the same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="99378-158">Se si passa ad Azure AD Connect dopo avere usato DirSync, sarà necessario usare **objectGUID** , perché questo è l'attributo usato da DirSync.</span><span class="sxs-lookup"><span data-stu-id="99378-158">If you have earlier been using DirSync and move to Azure AD Connect, then you must use **objectGUID** since that is the attribute used by DirSync.</span></span>
* <span data-ttu-id="99378-159">Se il valore di sourceAnchor viene modificato dopo l'esportazione dell'oggetto in Azure AD, il servizio di sincronizzazione Azure AD Connect genera un errore e non consente altre modifiche all'oggetto prima della risoluzione del problema e della reimpostazione del valore precedente di sourceAnchor nella directory di origine.</span><span class="sxs-lookup"><span data-stu-id="99378-159">If the value for sourceAnchor is changed after the object has been exported to Azure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before the issue has been fixed and the sourceAnchor is changed back in the source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="99378-160">Uso di msDS-ConsistencyGuid come sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="99378-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="99378-161">Per impostazione predefinita, Azure AD Connect (versione 1.1.486.0 e precedenti) usa objectGUID come attributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as the sourceAnchor attribute.</span></span> <span data-ttu-id="99378-162">ObjectGUID è generato dal sistema.</span><span class="sxs-lookup"><span data-stu-id="99378-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="99378-163">Non è possibile specificare il relativo valore durante la creazione di oggetti di AD locale.</span><span class="sxs-lookup"><span data-stu-id="99378-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="99378-164">Come illustrato nella sezione [sourceAnchor](#sourceanchor), in alcuni scenari è necessario specificare il valore di sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need to specify the sourceAnchor value.</span></span> <span data-ttu-id="99378-165">Se gli scenari sono applicabili all'utente, è necessario usare un attributo AD configurabile, ad esempio msDS-ConsistencyGuid, come attributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-165">If the scenarios are applicable to you, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as the sourceAnchor attribute.</span></span>

<span data-ttu-id="99378-166">In Azure AD Connect (versione 1.1.524.0 e successive) è ora facilitato l'uso dell'attributo msDS-ConsistencyGuid come attributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates the use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="99378-167">Quando si usa questa funzionalità, Azure AD Connect configura automaticamente le regole di sincronizzazione per:</span><span class="sxs-lookup"><span data-stu-id="99378-167">When using this feature, Azure AD Connect automatically configures the synchronization rules to:</span></span>

1. <span data-ttu-id="99378-168">Usare msDS-ConsistencyGuid come attributo sourceAnchor per gli oggetti User.</span><span class="sxs-lookup"><span data-stu-id="99378-168">Use msDS-ConsistencyGuid as the sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="99378-169">ObjectGUID è usato per altri tipi di oggetto.</span><span class="sxs-lookup"><span data-stu-id="99378-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="99378-170">Per ogni oggetto User di AD locale il cui attributo msDS-ConsistencyGuid non è popolato, Azure AD Connect scrive il valore di objectGUID nell'attributo msDS-ConsistencyGuid in AD locale.</span><span class="sxs-lookup"><span data-stu-id="99378-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="99378-171">Dopo aver popolato l'attributo msDS-ConsistencyGuid, Azure AD Connect esporta l'oggetto in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="99378-171">After the msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports the object to Azure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="99378-172">Se un oggetto AD locale viene importato in Azure AD Connect (ovvero importato nello spazio connettore di AD e proiettato in Metaverse), non è più possibile modificarne il valore sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into the AD Connector Space and projected into the Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="99378-173">Per specificare il valore sourceAnchor di un determinato oggetto AD locale, configurare il relativo attributo msDS-ConsistencyGuid prima che venga importato in Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="99378-173">To specify the sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="99378-174">È necessaria l'autorizzazione</span><span class="sxs-lookup"><span data-stu-id="99378-174">Permission required</span></span>
<span data-ttu-id="99378-175">Per usare questa funzionalità, l'account AD DS usato per la sincronizzazione con Active Directory locale deve disporre dell'autorizzazione di scrittura per l'attributo msDS-ConsistencyGuid in Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="99378-175">For this feature to work, the AD DS account used to synchronize with on-premises Active Directory must be granted write permission to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature---new-installation"></a><span data-ttu-id="99378-176">Come abilitare la funzionalità ConsistencyGuid: nuova installazione</span><span class="sxs-lookup"><span data-stu-id="99378-176">How to enable the ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="99378-177">È possibile abilitare l'uso di ConsistencyGuid come sourceAnchor durante una nuova installazione.</span><span class="sxs-lookup"><span data-stu-id="99378-177">You can enable the use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="99378-178">Questa sezione descrive dettagliatamente sia l'installazione rapida che quella personalizzata.</span><span class="sxs-lookup"><span data-stu-id="99378-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="99378-179">Solo le versioni più recenti di Azure AD Connect, 1.1.524.0 e successive, supportano l'uso di ConsistencyGuid come sourceAnchor durante una nuova installazione.</span><span class="sxs-lookup"><span data-stu-id="99378-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports the use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature"></a><span data-ttu-id="99378-180">Come abilitare la funzionalità ConsistencyGuid</span><span class="sxs-lookup"><span data-stu-id="99378-180">How to enable the ConsistencyGuid feature</span></span>
<span data-ttu-id="99378-181">Al momento la funzionalità può essere abilitata solo durante una nuova installazione di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="99378-181">Currently, the feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="99378-182">Installazione rapida</span><span class="sxs-lookup"><span data-stu-id="99378-182">Express Installation</span></span>
<span data-ttu-id="99378-183">Quando si installa Azure AD Connect in modalità rapida, la procedura guidata di Azure AD Connect determina automaticamente l'attributo AD più appropriato da usare come attributo sourceAnchor mediante la logica seguente:</span><span class="sxs-lookup"><span data-stu-id="99378-183">When installing Azure AD Connect with Express mode, the Azure AD Connect wizard automatically determines the most appropriate AD attribute to use as the sourceAnchor attribute using the following logic:</span></span>

* <span data-ttu-id="99378-184">In primo luogo, la procedura guidata di Azure AD Connect invia una query al tenant di Azure AD per recuperare l'attributo AD usato come attributo sourceAnchor nell'installazione di Azure AD Connect precedente (se presente).</span><span class="sxs-lookup"><span data-stu-id="99378-184">First, the Azure AD Connect wizard queries your Azure AD tenant to retrieve the AD attribute used as the sourceAnchor attribute in the previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="99378-185">Se queste informazioni sono disponibili, Azure AD Connect usa lo stesso attributo AD.</span><span class="sxs-lookup"><span data-stu-id="99378-185">If this information is available, Azure AD Connect uses the same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="99378-186">Solo le versioni più recenti di Azure AD Connect, 1.1.524.0 e successive, consentono di archiviare nel tenant di Azure AD le informazioni relative all'attributo sourceAnchor usato durante l'installazione.</span><span class="sxs-lookup"><span data-stu-id="99378-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about the sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="99378-187">Le versioni precedenti di Azure AD Connect non lo consentono.</span><span class="sxs-lookup"><span data-stu-id="99378-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="99378-188">Se le informazioni sull'attributo sourceAnchor usato non sono disponibili, la procedura guidata controlla lo stato dell'attributo msDS-ConsistencyGuid in Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="99378-188">If information about the sourceAnchor attribute used isn't available, the wizard checks the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="99378-189">Se l'attributo non è configurato in un qualsiasi oggetto nella directory, la procedura usa l'attributo msDS-ConsistencyGuid come attributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-189">If the attribute isn't configured on any object in the directory, the wizard uses the msDS-ConsistencyGuid as the sourceAnchor attribute.</span></span> <span data-ttu-id="99378-190">Se l'attributo è configurato su uno o più oggetti nella directory, la procedura conclude che l'attributo è usato da altre applicazioni e non è adatto come attributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-190">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="99378-191">In questo caso, la procedura guidata esegue il fallback usando objectGUID come attributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-191">In which case, the wizard falls back to using objectGUID as the sourceAnchor attribute.</span></span>

* <span data-ttu-id="99378-192">Dopo aver definito l'attributo sourceAnchor, la procedura guidata archivia le informazioni nel tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="99378-192">Once the sourceAnchor attribute is decided, the wizard stores the information in your Azure AD tenant.</span></span> <span data-ttu-id="99378-193">Le informazioni verranno usate nelle installazioni future di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="99378-193">The information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="99378-194">Dopo aver completato l'installazione rapida, la procedura guidata informa l'utente dell'attributo selezionato come attributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-194">Once Express installation completes, the wizard informs you which attribute has been picked as the Source Anchor attribute.</span></span>

![La procedura guidata segnala l'attributo di AD selezionato come sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="99378-196">Installazione personalizzata</span><span class="sxs-lookup"><span data-stu-id="99378-196">Custom installation</span></span>
<span data-ttu-id="99378-197">Quando si installa Azure AD Connect in modalità personalizzata, la procedura guidata di Azure AD Connect offre due opzioni per la configurazione dell'attributo sourceAnchor:</span><span class="sxs-lookup"><span data-stu-id="99378-197">When installing Azure AD Connect with Custom mode, the Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Installazione personalizzata - Configurazione di sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="99378-199">Impostazione</span><span class="sxs-lookup"><span data-stu-id="99378-199">Setting</span></span> | <span data-ttu-id="99378-200">Descrizione</span><span class="sxs-lookup"><span data-stu-id="99378-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="99378-201">Consenti ad Azure di gestire automaticamente l'ancoraggio di origine</span><span class="sxs-lookup"><span data-stu-id="99378-201">Let Azure manage the source anchor for me</span></span> | <span data-ttu-id="99378-202">Selezionare questa opzione se si vuole che Azure AD selezioni automaticamente l'attributo.</span><span class="sxs-lookup"><span data-stu-id="99378-202">Select this option if you want Azure AD to pick the attribute for you.</span></span> <span data-ttu-id="99378-203">Se si seleziona questa opzione, la procedura guidata di Azure AD Connect applica la stessa [logica di selezione dell'attributo sourceAnchor usata durante l'installazione rapida](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="99378-203">If you select this option, Azure AD Connect wizard applies the same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="99378-204">Alla stregua dell'installazione rapida, la procedura guidata informa l'utente sull'attributo selezionato come attributo sourceAnchor al termine dell'installazione personalizzata.</span><span class="sxs-lookup"><span data-stu-id="99378-204">Similar to Express installation, the wizard informs you which attribute has been picked as the Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="99378-205">Attributo specifico</span><span class="sxs-lookup"><span data-stu-id="99378-205">A specific attribute</span></span> | <span data-ttu-id="99378-206">Selezionare questa opzione se si vuole specificare un attributo di AD esistente come attributo sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-206">Select this option if you wish to specify an existing AD attribute as the sourceAnchor attribute.</span></span> |

### <a name="how-to-enable-the-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="99378-207">Come abilitare la funzionalità ConsistencyGuid: distribuzione esistente</span><span class="sxs-lookup"><span data-stu-id="99378-207">How to enable the ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="99378-208">Se si ha una distribuzione di Azure AD Connect esistente che usa objectGUID come attributo dell'ancoraggio di origine, è possibile far sì che al suo posto usi ConsistencyGuid.</span><span class="sxs-lookup"><span data-stu-id="99378-208">If you have an existing Azure AD Connect deployment which is using objectGUID as the Source Anchor attribute, you can switch it to using ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="99378-209">Solo le versioni più recenti di Azure AD Connect, 1.1.552.0 e successive, supportano il passaggio da ObjectGuid a ConsistencyGuid come attributo dell'ancoraggio di origine.</span><span class="sxs-lookup"><span data-stu-id="99378-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid to ConsistencyGuid as the Source Anchor attribute.</span></span>

<span data-ttu-id="99378-210">Per passare da objectGUID a ConsistencyGuid come attributo dell'ancoraggio di origine:</span><span class="sxs-lookup"><span data-stu-id="99378-210">To switch from objectGUID to ConsistencyGuid as the Source Anchor attribute:</span></span>

1. <span data-ttu-id="99378-211">Avviare la procedura guidata di Azure AD Connect e fare clic su **Configurazione** per passare alla schermata Attività.</span><span class="sxs-lookup"><span data-stu-id="99378-211">Start the Azure AD Connect wizard and click **Configure** to go to the Tasks screen.</span></span>

2. <span data-ttu-id="99378-212">Selezionare l'opzione attività **Configura ancoraggio di origine** e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="99378-212">Select the **Configure Source Anchor** task option and click **Next**.</span></span>

   ![Abilitare ConsistencyGuid per una distribuzione esistente: passaggio 2](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="99378-214">Immettere le credenziali di amministratore di Azure AD e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="99378-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="99378-215">La procedura guidata di Azure AD Connect analizza lo stato dell'attributo msDS-ConsistencyGuid in Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="99378-215">Azure AD Connect wizard analyzes the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="99378-216">Se l'attributo non è configurato in uno qualsiasi degli oggetti della directory, Azure AD Connect conclude che nessun'altra applicazione sta usando l'attributo e che quindi sia possibile usarlo come attributo dell'ancoraggio di origine.</span><span class="sxs-lookup"><span data-stu-id="99378-216">If the attribute isn't configured on any object in the directory, Azure AD Connect concludes that no other application is currently using the attribute and is safe to use it as the Source Anchor attribute.</span></span> <span data-ttu-id="99378-217">Fare clic su **Avanti** per continuare.</span><span class="sxs-lookup"><span data-stu-id="99378-217">Click **Next** to continue.</span></span>

   ![Abilitare ConsistencyGuid per una distribuzione esistente: passaggio 4](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="99378-219">Nella schermata **Pronto per la configurazione** fare clic su **Configurazione** per modificare la configurazione.</span><span class="sxs-lookup"><span data-stu-id="99378-219">In the **Ready to Configure** screen, click **Configure** to make the configuration change.</span></span>

   ![Abilitare ConsistencyGuid per una distribuzione esistente: passaggio 5](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="99378-221">Una volta completata la configurazione, la procedura guidata indica che ora viene usato msDS-ConsistencyGuid come attributo dell'ancoraggio di origine.</span><span class="sxs-lookup"><span data-stu-id="99378-221">Once the configuration completes, the wizard indicates that msDS-ConsistencyGuid is now being used as the Source Anchor attribute.</span></span>

   ![Abilitare ConsistencyGuid per una distribuzione esistente: passaggio 6](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="99378-223">Durante l'analisi, al passaggio 4, se l'attributo è configurato su uno o più oggetti nella directory, la procedura conclude che l'attributo è usato da un'altra applicazione e restituisce un errore, come illustrato nel diagramma di seguito.</span><span class="sxs-lookup"><span data-stu-id="99378-223">During the analysis (step 4), if the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by another application and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="99378-224">Se si è certi che l'attributo non è usato dalle applicazioni esistenti, è necessario contattare il supporto tecnico per informazioni su come eliminare l'errore.</span><span class="sxs-lookup"><span data-stu-id="99378-224">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![Abilitare ConsistencyGuid per una distribuzione esistente: errore](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="99378-226">Impatto su AD FS o configurazione della federazione di terze parti</span><span class="sxs-lookup"><span data-stu-id="99378-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="99378-227">Se si usa Azure AD Connect per gestire la distribuzione di AD FS locale, Azure AD Connect aggiorna automaticamente le regole attestazioni per usare lo stesso attributo di AD come sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="99378-227">If you are using Azure AD Connect to manage on-premises AD FS deployment, the Azure AD Connect automatically updates the claim rules to use the same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="99378-228">Ciò garantisce che l'attestazione ImmutableID generata da AD FS sia coerente con i valori di sourceAnchor esportati in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="99378-228">This ensures that the ImmutableID claim generated by ADFS is consistent with the sourceAnchor values exported to Azure AD.</span></span>

<span data-ttu-id="99378-229">Se si gestisce AD FS dall'esterno di Azure AD Connect o se per l'autenticazione si usano server federativi di terze parti, è necessario aggiornare manualmente le regole attestazioni affinché l'attestazione ImmutableID sia coerente con i valori di sourceAnchor esportati in Azure AD, come descritto nella sezione dell'articolo [Modificare le regole attestazioni per AD FS](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="99378-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update the claim rules for ImmutableID claim to be consistent with the sourceAnchor values exported to Azure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="99378-230">Al termine dell'installazione, viene visualizzato l'avviso seguente:</span><span class="sxs-lookup"><span data-stu-id="99378-230">The wizard returns the following warning after installation completes:</span></span>

![Configurazione della federazione di terze parti](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-to-existing-deployment"></a><span data-ttu-id="99378-232">Aggiunta di nuove directory alla distribuzione esistente</span><span class="sxs-lookup"><span data-stu-id="99378-232">Adding new directories to existing deployment</span></span>
<span data-ttu-id="99378-233">Si supponga di aver distribuito Azure AD Connect con la funzionalità ConsistencyGuid abilitata e di voler aggiungere un'altra directory alla distribuzione.</span><span class="sxs-lookup"><span data-stu-id="99378-233">Suppose you have deployed Azure AD Connect with the ConsistencyGuid feature enabled, and now you would like to add another directory to the deployment.</span></span> <span data-ttu-id="99378-234">Quando si tenta di aggiungere la directory, la procedura guidata di Azure AD Connect controlla lo stato dell'attributo mSDS-ConsistencyGuid nella directory.</span><span class="sxs-lookup"><span data-stu-id="99378-234">When you try to add the directory, Azure AD Connect wizard checks the state of the mSDS-ConsistencyGuid attribute in the directory.</span></span> <span data-ttu-id="99378-235">Se l'attributo è configurato su uno o più oggetti nella directory, la procedura conclude che l'attributo è usato da altre applicazioni e restituisce un errore, come mostrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="99378-235">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="99378-236">Se si è certi che l'attributo non è usato dalle applicazioni esistenti, è necessario contattare il supporto tecnico per informazioni su come eliminare l'errore.</span><span class="sxs-lookup"><span data-stu-id="99378-236">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![Aggiunta di nuove directory alla distribuzione esistente](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="99378-238">Accesso ad Azure AD</span><span class="sxs-lookup"><span data-stu-id="99378-238">Azure AD sign-in</span></span>
<span data-ttu-id="99378-239">Durante l'integrazione della directory locale con Azure AD, è importante capire come le impostazioni di sincronizzazione possono influire sul modo in cui l'utente esegue l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="99378-239">While integrating your on-premises directory with Azure AD, it is important to understand how the synchronization settings can affect the way user authenticates.</span></span> <span data-ttu-id="99378-240">Azure AD usa userPrincipalName (UPN) per autenticare l'utente.</span><span class="sxs-lookup"><span data-stu-id="99378-240">Azure AD uses userPrincipalName (UPN) to authenticate the user.</span></span> <span data-ttu-id="99378-241">Quando si sincronizzano gli utenti è tuttavia necessario scegliere con attenzione l'attributo da usare per userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="99378-241">However, when you synchronize your users, you must choose the attribute to be used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-the-attribute-for-userprincipalname"></a><span data-ttu-id="99378-242">Scegliere l'attributo per userPrincipalName</span><span class="sxs-lookup"><span data-stu-id="99378-242">Choosing the attribute for userPrincipalName</span></span>
<span data-ttu-id="99378-243">Quando si seleziona l'attributo per specificare il valore di UPN da usare in Azure è necessario verificare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="99378-243">When you are selecting the attribute for providing the value of UPN to be used in Azure one should ensure</span></span>

* <span data-ttu-id="99378-244">I valori di attributo devono essere conformi alla sintassi UPN (RFC 822), ovvero devono essere nel formato username@domain</span><span class="sxs-lookup"><span data-stu-id="99378-244">The attribute values conform to the UPN syntax (RFC 822), that is it should be of the format username@domain</span></span>
* <span data-ttu-id="99378-245">Il suffisso nei valori deve corrispondere a uno dei domini personalizzati verificati in Azure AD</span><span class="sxs-lookup"><span data-stu-id="99378-245">The suffix in the values matches to one of the verified custom domains in Azure AD</span></span>

<span data-ttu-id="99378-246">Nelle impostazioni rapide come attributo deve essere scelto userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="99378-246">In express settings, the assumed choice for the attribute is userPrincipalName.</span></span> <span data-ttu-id="99378-247">Se l'attributo userPrincipalName non contiene il valore che si vuole che gli utenti usino per accedere ad Azure, è necessario scegliere l'opzione **Installazione personalizzata**.</span><span class="sxs-lookup"><span data-stu-id="99378-247">If the userPrincipalName attribute does not contain the value you want your users to sign in to Azure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="99378-248">Stato del dominio personalizzato e UPN</span><span class="sxs-lookup"><span data-stu-id="99378-248">Custom domain state and UPN</span></span>
<span data-ttu-id="99378-249">È importante verificare che esista un dominio verificato per il suffisso UPN.</span><span class="sxs-lookup"><span data-stu-id="99378-249">It is important to ensure that there is a verified domain for the UPN suffix.</span></span>

<span data-ttu-id="99378-250">John è un utente di contoso.com.</span><span class="sxs-lookup"><span data-stu-id="99378-250">John is a user in contoso.com.</span></span> <span data-ttu-id="99378-251">Si vuole fare in modo che John usi l'UPN locale john@contoso.com per l'accesso ad Azure dopo che è stata eseguita la sincronizzazione degli utenti con la directory di Azure AD contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="99378-251">You want John to use the on-premises UPN john@contoso.com to sign in to Azure after you have synced users to your Azure AD directory contoso.onmicrosoft.com.</span></span> <span data-ttu-id="99378-252">A tale scopo, è necessario aggiungere e verificare contoso.com come dominio personalizzato in Azure AD per poter avviare la sincronizzazione degli utenti.</span><span class="sxs-lookup"><span data-stu-id="99378-252">To do so, you need to add and verify contoso.com as a custom domain in Azure AD before you can start syncing the users.</span></span> <span data-ttu-id="99378-253">Se il suffisso UPN di John, ad esempio contoso.com, non corrisponde a un dominio verificato in Azure AD, il suffisso UPN viene sostituito con contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="99378-253">If the UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces the UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="99378-254">Domini locali non instradabili e UPN per Azure AD</span><span class="sxs-lookup"><span data-stu-id="99378-254">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="99378-255">Alcune organizzazioni usano domini non instradabili, ad esempio contoso.local, o domini semplici con etichetta singola come contoso.</span><span class="sxs-lookup"><span data-stu-id="99378-255">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="99378-256">In Azure AD non è possibile verificare un dominio non instradabile.</span><span class="sxs-lookup"><span data-stu-id="99378-256">You are not able to verify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="99378-257">Azure AD Connect è in grado eseguire la sincronizzazione con un solo dominio verificato in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="99378-257">Azure AD Connect can sync to only a verified domain in Azure AD.</span></span> <span data-ttu-id="99378-258">Quando si crea una directory di Azure AD, viene creato un dominio instradabile che diventa dominio predefinito per Azure AD, ad esempio contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="99378-258">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com.</span></span> <span data-ttu-id="99378-259">Si rende quindi necessario verificare eventuali altri domini instradabili nello stesso scenario, nel caso in cui non si voglia eseguire la sincronizzazione con il dominio .onmicrosoft.com predefinito.</span><span class="sxs-lookup"><span data-stu-id="99378-259">Therefore, it becomes necessary to verify any other routable domain in such a scenario in case you don't want to sync to the default onmicrosoft.com domain.</span></span>

<span data-ttu-id="99378-260">Per altre informazioni sull'aggiunta e la verifica dei domini, vedere [Aggiungere un nome di dominio personalizzato ad Azure Active Directory](../active-directory-add-domain.md) .</span><span class="sxs-lookup"><span data-stu-id="99378-260">Read [Add your custom domain name to Azure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="99378-261">Azure AD Connect rileva se l'esecuzione avviene in un ambiente di dominio non instradabile e avvisa che è opportuno non proseguire con le impostazioni rapide.</span><span class="sxs-lookup"><span data-stu-id="99378-261">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="99378-262">Se si opera in un dominio non instradabile, è probabile che anche l'UPN degli utenti abbia suffissi non instradabili.</span><span class="sxs-lookup"><span data-stu-id="99378-262">If you are operating in a non-routable domain, then it is likely that the UPN of the users have non-routable suffixes too.</span></span> <span data-ttu-id="99378-263">Ad esempio, se si opera in contoso.local, Azure AD Connect suggerisce di usare le impostazioni personalizzate anziché le impostazioni rapide.</span><span class="sxs-lookup"><span data-stu-id="99378-263">For example, if you are running under contoso.local, Azure AD Connect suggests you to use custom settings rather than using express settings.</span></span> <span data-ttu-id="99378-264">Con le impostazioni personalizzate è possibile specificare l'attributo che deve essere usato come nome UPN per l'accesso ad Azure dopo la sincronizzazione degli utenti con Azure AD.</span><span class="sxs-lookup"><span data-stu-id="99378-264">Using custom settings, you are able to specify the attribute that should be used as UPN to sign in to Azure after the users are synced to Azure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="99378-265">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="99378-265">Next steps</span></span>
<span data-ttu-id="99378-266">Altre informazioni su [Integrazione delle identità locali con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="99378-266">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
