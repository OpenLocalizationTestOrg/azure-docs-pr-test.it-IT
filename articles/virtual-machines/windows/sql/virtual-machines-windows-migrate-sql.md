---
title: Eseguire la migrazione di un database di SQL Server a SQL Server in una macchina virtuale di Azure | Microsoft Docs
description: Leggere le informazioni su come eseguire la migrazione di un database utente locale a SQL Server in una macchina virtuale di Azure.
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 68767534298783083a441aa295611914d0df9db0
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="migrate-a-sql-server-database-to-sql-server-in-an-azure-vm"></a><span data-ttu-id="b74f3-103">Eseguire la migrazione di un database di SQL Server a SQL Server in una macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-103">Migrate a SQL Server database to SQL Server in an Azure VM</span></span>

<span data-ttu-id="b74f3-104">Esistono diversi metodi per eseguire la migrazione di un database utente di SQL Server locale a SQL Server in una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="b74f3-104">There are a number of methods to migrate an on-premises SQL Server user database to SQL Server in an Azure VM.</span></span> <span data-ttu-id="b74f3-105">Questo articolo illustra brevemente vari metodi e consiglia quello più adatto ai diversi scenari.</span><span class="sxs-lookup"><span data-stu-id="b74f3-105">This article will briefly discuss various methods and recommend the best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-the-primary-migration-methods"></a><span data-ttu-id="b74f3-106">Quali sono i metodi di migrazione principali?</span><span class="sxs-lookup"><span data-stu-id="b74f3-106">What are the primary migration methods?</span></span>
<span data-ttu-id="b74f3-107">I metodi di migrazione principali sono:</span><span class="sxs-lookup"><span data-stu-id="b74f3-107">The primary migration methods are:</span></span>

* <span data-ttu-id="b74f3-108">Esecuzione del backup locale tramite la compressione e copia manuale del file di backup nella macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-108">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>
* <span data-ttu-id="b74f3-109">Esecuzione di un backup nell’URL e ripristino nella macchina virtuale di Azure dall'URL</span><span class="sxs-lookup"><span data-stu-id="b74f3-109">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>
* <span data-ttu-id="b74f3-110">Scollegamento e successiva copia dei dati e dei file di log sull’archivio BLOB di Azure, quindi collegamento a SQL Server nella macchina virtuale di Azure dall'URL</span><span class="sxs-lookup"><span data-stu-id="b74f3-110">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="b74f3-111">Conversione della macchina fisica locale a disco rigido virtuale Hyper-V, caricamento sull'archivio BLOB di Azure e successiva distribuzione come nuova macchina virtuale tramite il disco rigido virtuale caricato</span><span class="sxs-lookup"><span data-stu-id="b74f3-111">Convert on-premises physical machine to Hyper-V VHD, upload to Azure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="b74f3-112">Spedizione del disco rigido tramite il servizio di Importazione/Esportazione di Windows</span><span class="sxs-lookup"><span data-stu-id="b74f3-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="b74f3-113">Se si ha una distribuzione locale di AlwaysOn, uso dell' [aggiunta guidata di una replica di Azure](../classic/sql-onprem-availability.md) per creare una replica in Azure e quindi eseguire il failover, indirizzando gli utenti all'istanza del database di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-113">If you have an AlwaysOn deployment on-premises, use the [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) to create a replica in Azure and then failover, pointing users to the Azure database instance</span></span>
* <span data-ttu-id="b74f3-114">Uso della [replica transazionale](https://msdn.microsoft.com/library/ms151176.aspx) di SQL Server per configurare l'istanza del server SQL di Azure come server di sottoscrizione e quindi disabilitare la replica, indirizzando gli utenti all'istanza del database di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) to configure the Azure SQL Server instance as a subscriber and then disable replication, pointing users to the Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="b74f3-115">È possibile anche usare queste tecniche per spostare database tra diverse macchine virtuali di SQL Server in Azure.</span><span class="sxs-lookup"><span data-stu-id="b74f3-115">You can also use these same techniques to move databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="b74f3-116">Ad esempio, non esiste un modo supportato per aggiornare una macchina virtuale immagine della raccolta di SQL Server da una versione/edizione a un'altra.</span><span class="sxs-lookup"><span data-stu-id="b74f3-116">For example, there is no supported way to upgrade a SQL Server gallery-image VM from one version/edition to another.</span></span> <span data-ttu-id="b74f3-117">In questo caso si deve creare una nuova macchina virtuale di SQL Server con la nuova versione/edizione e usare una delle tecniche di migrazione descritte in questo articolo per spostare i database.</span><span class="sxs-lookup"><span data-stu-id="b74f3-117">In this case, you should create a new SQL Server VM with the new version/edition, and then use one of the migration techniques in this article to move your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="b74f3-118">Scelta del metodo di migrazione</span><span class="sxs-lookup"><span data-stu-id="b74f3-118">Choosing your migration method</span></span>
<span data-ttu-id="b74f3-119">Per prestazioni ottimali di trasferimento dei dati, eseguire la migrazione dei file del database alla macchina virtuale di Azure usando un file di backup compresso.</span><span class="sxs-lookup"><span data-stu-id="b74f3-119">For optimum data transfer performance, migrate the database files into the Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="b74f3-120">Per ridurre al minimo il tempo di inattività durante il processo di migrazione del database, usare l'opzione AlwaysOn o la replica transazionale.</span><span class="sxs-lookup"><span data-stu-id="b74f3-120">To minimize downtime during the database migration process, use either the AlwaysOn option or the transactional replication option.</span></span>

<span data-ttu-id="b74f3-121">Se non è possibile usare i metodi sopra indicati, eseguire manualmente la migrazione del database.</span><span class="sxs-lookup"><span data-stu-id="b74f3-121">If it is not possible to use the above methods, manually migrate your database.</span></span> <span data-ttu-id="b74f3-122">Se si adotta questo metodo, per prima cosa si esegue il backup del database, quindi si copia il backup del database in Azure e infine si esegue un ripristino del database.</span><span class="sxs-lookup"><span data-stu-id="b74f3-122">Using this method, you will generally start with a database backup followed by a copy of the database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="b74f3-123">In alternativa, è possibile copiare i file del database in Azure e collegarli.</span><span class="sxs-lookup"><span data-stu-id="b74f3-123">You can also copy the database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="b74f3-124">Esistono diversi metodi che consentono di eseguire questo processo di migrazione manuale di un database in una macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="b74f3-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="b74f3-125">Durante l'aggiornamento a SQL Server 2014 o SQL Server 2016 da versioni precedenti di SQL Server, è necessario considerare se sono necessarie modifiche.</span><span class="sxs-lookup"><span data-stu-id="b74f3-125">When you upgrade to SQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="b74f3-126">È consigliabile prendere in considerazione tutte le dipendenze sulle funzionalità non supportate dalla nuova versione di SQL Server come parte del progetto di migrazione.</span><span class="sxs-lookup"><span data-stu-id="b74f3-126">We recommend that you address all dependencies on features not supported by the new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="b74f3-127">Per altre informazioni sulle edizioni e sugli scenari supportati, vedere [Aggiornamento a SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="b74f3-127">For more information on the supported editions and scenarios, see [Upgrade to SQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="b74f3-128">Nella tabella seguente sono elencati tutti i principali metodi di migrazione e viene illustrato quando l'utilizzo di ciascun metodo è più appropriato.</span><span class="sxs-lookup"><span data-stu-id="b74f3-128">The following table lists each of the primary migration methods and discusses when the use of each method is most appropriate.</span></span>

| <span data-ttu-id="b74f3-129">Metodo</span><span class="sxs-lookup"><span data-stu-id="b74f3-129">Method</span></span> | <span data-ttu-id="b74f3-130">Versione del database di origine</span><span class="sxs-lookup"><span data-stu-id="b74f3-130">Source database version</span></span> | <span data-ttu-id="b74f3-131">Versione del database di destinazione</span><span class="sxs-lookup"><span data-stu-id="b74f3-131">Destination database version</span></span> | <span data-ttu-id="b74f3-132">Vincolo di dimensioni del backup del database di origine</span><span class="sxs-lookup"><span data-stu-id="b74f3-132">Source database backup size constraint</span></span> | <span data-ttu-id="b74f3-133">Note</span><span class="sxs-lookup"><span data-stu-id="b74f3-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="b74f3-134">Esecuzione del backup locale tramite la compressione e copia manuale del file di backup nella macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-134">Perform on-premises backup using compression and manually copy the backup file into the Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="b74f3-135">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="b74f3-136">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="b74f3-137">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="b74f3-138">È una tecnica molto semplice e ben collaudata per spostare i database tra più computer.</span><span class="sxs-lookup"><span data-stu-id="b74f3-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="b74f3-139">Esecuzione di un backup nell’URL e ripristino nella macchina virtuale di Azure dall'URL</span><span class="sxs-lookup"><span data-stu-id="b74f3-139">Perform a backup to URL and restore into the Azure virtual machine from the URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="b74f3-140">SQL Server 2012 SP1 CU2 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="b74f3-141">SQL Server 2012 SP1 CU2 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="b74f3-142">< 12.8 TB per SQL Server 2016, in caso contrario < 1 TB</span><span class="sxs-lookup"><span data-stu-id="b74f3-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="b74f3-143">Questo è un altro metodo per spostare il file di backup nella macchina virtuale usando l'archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="b74f3-143">This method is just another way to move the backup file to the VM using Azure storage.</span></span> |
| [<span data-ttu-id="b74f3-144">Scollegamento e successiva copia dei dati e dei file di log sull’archivio BLOB di Azure, quindi collegamento a SQL Server nella macchina virtuale di Azure dall'URL</span><span class="sxs-lookup"><span data-stu-id="b74f3-144">Detach and then copy the data and log files to Azure blob storage and then attach to SQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="b74f3-145">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="b74f3-146">SQL Server 2014 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="b74f3-147">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="b74f3-148">Usare questo metodo quando si prevede di [archiviare i file tramite il servizio di archiviazione BLOB di Azure](https://msdn.microsoft.com/library/dn385720.aspx) e di collegarli a SQL Server in esecuzione su una macchina virtuale di Azure, in particolare con database di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="b74f3-148">Use this method when you plan to [store these files using the Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them to SQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="b74f3-149">Conversione della macchina locale a dischi rigidi virtuali Hyper-V, caricamento sull'archivio BLOB di Azure e successiva distribuzione di una nuova macchina virtuale tramite il disco rigido virtuale caricato</span><span class="sxs-lookup"><span data-stu-id="b74f3-149">Convert on-premises machine to Hyper-V VHDs, upload to Azure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="b74f3-150">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="b74f3-151">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="b74f3-152">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="b74f3-153">Usare per la [propria licenza di SQL Server](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), per la migrazione di un database che verrà eseguito su una versione precedente di SQL Server o per la migrazione combinata dei database di sistema e utente nell'ambito della migrazione di database dipendenti da altri database utente e/o di sistema.</span><span class="sxs-lookup"><span data-stu-id="b74f3-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of the migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="b74f3-154">Spedizione del disco rigido tramite il servizio di Importazione/Esportazione di Windows</span><span class="sxs-lookup"><span data-stu-id="b74f3-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="b74f3-155">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="b74f3-156">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="b74f3-157">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="b74f3-158">Usare il [servizio di importazione/esportazione di Windows](../../../storage/common/storage-import-export-service.md) quando il metodo della copia manuale è troppo lento, ad esempio con database di grandi dimensioni</span><span class="sxs-lookup"><span data-stu-id="b74f3-158">Use the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="b74f3-159">Uso della procedura guidata per l'aggiunta della replica di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-159">Use the Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="b74f3-160">SQL Server 2012 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="b74f3-161">SQL Server 2012 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="b74f3-162">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="b74f3-163">Riduce al minimo il tempo di inattività; da usare quando si ha una distribuzione locale di AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="b74f3-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="b74f3-164">Uso della replica transazionale di SQL Server</span><span class="sxs-lookup"><span data-stu-id="b74f3-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="b74f3-165">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="b74f3-166">SQL Server 2005 o versione successiva</span><span class="sxs-lookup"><span data-stu-id="b74f3-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="b74f3-167">Limite di archiviazione della macchina virtuale di Azure</span><span class="sxs-lookup"><span data-stu-id="b74f3-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="b74f3-168">Da usare quando è necessario ridurre al minimo il tempo di inattività e si ha una distribuzione locale di AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="b74f3-168">Use when you need to minimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="b74f3-169">Backup e ripristino</span><span class="sxs-lookup"><span data-stu-id="b74f3-169">Backup and restore</span></span>
<span data-ttu-id="b74f3-170">Eseguire il backup del database con la compressione, copiare il backup nella macchina virtuale e ripristinare il database.</span><span class="sxs-lookup"><span data-stu-id="b74f3-170">Back up your database with compression, copy the backup to the VM, and then restore the database.</span></span> <span data-ttu-id="b74f3-171">Se il file di backup è superiore a 1 TB, è necessario eseguirne lo striping perché le dimensioni massime del disco di una macchina virtuale sono pari a 1 TB.</span><span class="sxs-lookup"><span data-stu-id="b74f3-171">If your backup file is larger than 1 TB, you must stripe it because the maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="b74f3-172">Per eseguire la migrazione di un database utente tramite il metodo manuale, attenersi ai passaggi generali seguenti:</span><span class="sxs-lookup"><span data-stu-id="b74f3-172">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="b74f3-173">Eseguire un backup completo del database su una posizione locale.</span><span class="sxs-lookup"><span data-stu-id="b74f3-173">Perform a full database backup to an on-premises location.</span></span>
2. <span data-ttu-id="b74f3-174">Creare o caricare una macchina virtuale con la versione di SQL Server desiderata.</span><span class="sxs-lookup"><span data-stu-id="b74f3-174">Create or upload a virtual machine with the version of SQL Server desired.</span></span>
3. <span data-ttu-id="b74f3-175">Configurare la connettività in base ai requisiti specifici.</span><span class="sxs-lookup"><span data-stu-id="b74f3-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="b74f3-176">Vedere [Connettersi a una macchina virtuale di SQL Server in Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="b74f3-176">See [Connect to a SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="b74f3-177">Copiare i file di backup sulla macchina virtuale utilizzando il desktop remoto, Esplora risorse o il comando di copia da un prompt dei comandi.</span><span class="sxs-lookup"><span data-stu-id="b74f3-177">Copy your backup file(s) to your VM using remote desktop, Windows Explorer or the copy command from a command prompt.</span></span>

## <a name="backup-to-url-and-restore"></a><span data-ttu-id="b74f3-178">Backup nell’URL e ripristino</span><span class="sxs-lookup"><span data-stu-id="b74f3-178">Backup to URL and restore</span></span>
<span data-ttu-id="b74f3-179">Invece di eseguire il backup in un file locale è possibile usare il [backup nell'URL](https://msdn.microsoft.com/library/dn435916.aspx) e quindi eseguire il ripristino dall'URL alla macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="b74f3-179">Instead of backing up to a local file, you can use the [backup to URL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL to the VM.</span></span> <span data-ttu-id="b74f3-180">Con SQL Server 2016, i set di backup con striping sono supportati, sono consigliati per le prestazioni e necessari per superare i limiti di dimensione per BLOB.</span><span class="sxs-lookup"><span data-stu-id="b74f3-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required to exceed the size limits per blob.</span></span> <span data-ttu-id="b74f3-181">Per i database di dimensioni molto grandi è consigliabile usare il [servizio di importazione/esportazione di Windows](../../../storage/common/storage-import-export-service.md) .</span><span class="sxs-lookup"><span data-stu-id="b74f3-181">For very large databases, the use of the [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="b74f3-182">Rimuovere e allegare dall'URL</span><span class="sxs-lookup"><span data-stu-id="b74f3-182">Detach and attach from URL</span></span>
<span data-ttu-id="b74f3-183">Rimuovere il database e i file di log e trasferirli nell'[archivio BLOB di Azure](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="b74f3-183">Detach your database and log files and transfer them to [Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="b74f3-184">Allegare il database dall'URL nella macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="b74f3-184">Then attach the database from the URL on your Azure VM.</span></span> <span data-ttu-id="b74f3-185">Usare questa opzione se si desidera che i file del database fisico risiedano nell'archivio BLOB.</span><span class="sxs-lookup"><span data-stu-id="b74f3-185">Use this if you want the physical database files to reside in Blob storage.</span></span> <span data-ttu-id="b74f3-186">Ciò può risultare utile per i database di dimensioni molto grandi.</span><span class="sxs-lookup"><span data-stu-id="b74f3-186">This might be useful for very large databases.</span></span> <span data-ttu-id="b74f3-187">Per eseguire la migrazione di un database utente tramite il metodo manuale, attenersi ai passaggi generali seguenti:</span><span class="sxs-lookup"><span data-stu-id="b74f3-187">Use the following general steps to migrate a user database using this manual method:</span></span>

1. <span data-ttu-id="b74f3-188">Scollegare i file del database dall'istanza del database locale.</span><span class="sxs-lookup"><span data-stu-id="b74f3-188">Detach the database files from the on-premises database instance.</span></span>
2. <span data-ttu-id="b74f3-189">Copiare i file del database scollegati nell'archivio BLOB di Azure usando l' [utilità della riga di comando AZCopy](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="b74f3-189">Copy the detached database files into Azure blob storage using the [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="b74f3-190">Collegare i file del database dall'URL di Azure all'istanza di SQL Server nella macchina virtuale di Azure.</span><span class="sxs-lookup"><span data-stu-id="b74f3-190">Attach the database files from the Azure URL to the SQL Server instance in the Azure VM.</span></span>

## <a name="convert-to-vm-and-upload-to-url-and-deploy-as-new-vm"></a><span data-ttu-id="b74f3-191">Conversione alla macchina virtuale, caricamento nell’URL e distribuzione come nuova macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="b74f3-191">Convert to VM and upload to URL and deploy as new VM</span></span>
<span data-ttu-id="b74f3-192">Utilizzare questo metodo per eseguire la migrazione di tutti i database di sistema e utente in un'istanza di SQL Server locale alla macchina virtuale Azure.</span><span class="sxs-lookup"><span data-stu-id="b74f3-192">Use this method to migrate all system and user databases in an on-premises SQL Server instance to Azure virtual machine.</span></span> <span data-ttu-id="b74f3-193">Per eseguire la migrazione di un'intera istanza di SQL Server utilizzando il metodo manuale, attenersi ai passaggi generali seguenti:</span><span class="sxs-lookup"><span data-stu-id="b74f3-193">Use the following general steps to migrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="b74f3-194">Convertire le macchine fisiche o virtuali in dischi rigidi virtuali Hyper-V usando [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="b74f3-194">Convert physical or virtual machines to Hyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="b74f3-195">Caricare i file dei dischi rigidi virtuali su Archiviazione di Azure usando il [cmdlet Add-AzureVHD](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="b74f3-195">Upload VHD files to Azure Storage by using the [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="b74f3-196">Distribuire una nuova macchina virtuale utilizzando il disco rigido virtuale caricato.</span><span class="sxs-lookup"><span data-stu-id="b74f3-196">Deploy a new virtual machine by using the uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="b74f3-197">Per eseguire la migrazione di un'intera applicazione, è consigliabile usare [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b74f3-197">To migrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="b74f3-198">Spedizione del disco rigido</span><span class="sxs-lookup"><span data-stu-id="b74f3-198">Ship hard drive</span></span>
<span data-ttu-id="b74f3-199">Usare il [metodo del servizio di importazione/esportazione di Windows](../../../storage/common/storage-import-export-service.md) per trasferire grandi quantità di dati di file sull'archivio BLOB di Azure in situazioni in cui il caricamento in rete è eccessivamente costoso o non è possibile.</span><span class="sxs-lookup"><span data-stu-id="b74f3-199">Use the [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) to transfer large amounts of file data to Azure Blob storage in situations where uploading over the network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="b74f3-200">Con questo servizio, è possibile inviare uno o più dischi rigidi contenenti tali dati a un datacenter di Azure, dove i dati verranno caricati sull'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="b74f3-200">With this service, you send one or more hard drives containing that data to an Azure data center, where your data will be uploaded to your storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b74f3-201">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="b74f3-201">Next Steps</span></span>
<span data-ttu-id="b74f3-202">Per altre informazioni sull'esecuzione di SQL Server in Macchine virtuali di Azure, vedere [Panoramica di SQL Server in Macchine virtuali di Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b74f3-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="b74f3-203">Per istruzioni sulla creazione di una macchina virtuale di SQL Server di Azure da un'immagine acquisita, vedere [Tips & Tricks on 'cloning' Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) (Suggerimenti per clonare macchine virtuali di SQL Server di Azure da immagini acquisite) nel blog dei tecnici di SQL Server CSS.</span><span class="sxs-lookup"><span data-stu-id="b74f3-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on the CSS SQL Server Engineers blog.</span></span>

