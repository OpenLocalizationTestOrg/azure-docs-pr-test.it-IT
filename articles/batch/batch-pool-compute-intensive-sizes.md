---
title: aaaUse complesse macchine virtuali di Azure batch | Documenti Microsoft
description: Come vantaggio tootake della macchina virtuale che supportano RDMA o abilitata GPU dimensioni nei pool di Azure Batch
services: batch
documentationcenter: 
author: dlepow
manager: timlt
editor: 
ms.assetid: 
ms.service: batch
ms.workload: big-compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: danlep
ms.openlocfilehash: 6a462a5f2a44ddcec8bf4e5c200d444cac8fafe6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="use-rdma-capable-or-gpu-enabled-instances-in-batch-pools"></a><span data-ttu-id="a85dc-103">Usare istanze con supporto per RDMA o abilitate per GPU in pool di Batch</span><span class="sxs-lookup"><span data-stu-id="a85dc-103">Use RDMA-capable or GPU-enabled instances in Batch pools</span></span>

<span data-ttu-id="a85dc-104">toorun determinati processi Batch, è possibile usare tootake dimensioni delle macchine Virtuali di Azure progettata per il calcolo su larga scala.</span><span class="sxs-lookup"><span data-stu-id="a85dc-104">toorun certain Batch jobs, you might want tootake advantage of Azure VM sizes designed for large-scale computation.</span></span> <span data-ttu-id="a85dc-105">Ad esempio, toorun multi-istanza [carichi di lavoro MPI](batch-mpi.md), è possibile scegliere A8, A9, o le dimensioni della serie H che dispone di una rete di interfaccia per RDMA Remote Direct Memory Access ().</span><span class="sxs-lookup"><span data-stu-id="a85dc-105">For example, toorun multi-instance [MPI workloads](batch-mpi.md), you can choose A8, A9, or H-series sizes that have a network interface for Remote Direct Memory Access (RDMA).</span></span> <span data-ttu-id="a85dc-106">Queste dimensioni connettono di rete InfiniBand tooan per la comunicazione tra i nodi, che consente di velocizzare le applicazioni MPI.</span><span class="sxs-lookup"><span data-stu-id="a85dc-106">These sizes connect tooan InfiniBand network for inter-node communication, which can accelerate MPI applications.</span></span> <span data-ttu-id="a85dc-107">Per le applicazioni CUDA è possibile scegliere le dimensioni della serie N, che includono schede GPU (Graphics Processing Unit, unità di elaborazione grafica) NVIDIA Tesla.</span><span class="sxs-lookup"><span data-stu-id="a85dc-107">Or for CUDA applications, you can choose N-series sizes that include NVIDIA Tesla graphics processing unit (GPU) cards.</span></span>

<span data-ttu-id="a85dc-108">Questo articolo fornisce informazioni aggiuntive e toouse esempi le dimensioni di specializzata di Azure nei pool di Batch.</span><span class="sxs-lookup"><span data-stu-id="a85dc-108">This article provides guidance and examples toouse some of Azure's specialized sizes in Batch pools.</span></span> <span data-ttu-id="a85dc-109">Per le specifiche e le informazioni di base, vedere:</span><span class="sxs-lookup"><span data-stu-id="a85dc-109">For specs and background, see:</span></span>

* <span data-ttu-id="a85dc-110">Dimensioni delle VM High Performance Computing ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span><span class="sxs-lookup"><span data-stu-id="a85dc-110">High performance compute VM sizes ([Linux](../virtual-machines/linux/sizes-hpc.md), [Windows](../virtual-machines/windows/sizes-hpc.md))</span></span> 

* <span data-ttu-id="a85dc-111">Dimensioni delle VM con supporto per GPU ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span><span class="sxs-lookup"><span data-stu-id="a85dc-111">GPU-enabled VM sizes ([Linux](../virtual-machines/linux/sizes-gpu.md), [Windows](../virtual-machines/windows/sizes-gpu.md))</span></span> 


## <a name="subscription-and-account-limits"></a><span data-ttu-id="a85dc-112">Limiti della sottoscrizione e dell'account</span><span class="sxs-lookup"><span data-stu-id="a85dc-112">Subscription and account limits</span></span>

* <span data-ttu-id="a85dc-113">**Le quote** -uno o più quote di Azure possono limitare il numero di hello o un tipo di nodi è possibile aggiungere il pool di Batch tooa.</span><span class="sxs-lookup"><span data-stu-id="a85dc-113">**Quotas** - One or more Azure quotas may limit hello number or type of nodes you can add tooa Batch pool.</span></span> <span data-ttu-id="a85dc-114">Si è più probabile toobe limitato quando si sceglie il supporto per RDMA, basate su GPU o altre dimensioni delle macchine Virtuali multicore.</span><span class="sxs-lookup"><span data-stu-id="a85dc-114">You are more likely toobe limited when you choose RDMA-capable, GPU-enabled, or other multicore VM sizes.</span></span> <span data-ttu-id="a85dc-115">In base al tipo di hello dell'account Batch che è stato creato, è possibile applicare quote hello account toohello stesso o tooyour sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="a85dc-115">Depending on hello type of Batch account you created, hello quotas could apply toohello account itself or tooyour subscription.</span></span>

    * <span data-ttu-id="a85dc-116">Se è stato creato l'account Batch in hello **Batch servizio** configurazione, è limitata dalle hello [quota core dedicati per l'account Batch](batch-quota-limit.md#resource-quotas).</span><span class="sxs-lookup"><span data-stu-id="a85dc-116">If you created your Batch account in hello **Batch service** configuration, you are limited by hello [dedicated cores quota per Batch account](batch-quota-limit.md#resource-quotas).</span></span> <span data-ttu-id="a85dc-117">Per impostazione predefinita, la quota è pari a 20 core.</span><span class="sxs-lookup"><span data-stu-id="a85dc-117">By default, this quota is 20 cores.</span></span> <span data-ttu-id="a85dc-118">Una quota separata viene applicata troppo[macchine virtuali con priorità bassa](batch-low-pri-vms.md), se vengono usati.</span><span class="sxs-lookup"><span data-stu-id="a85dc-118">A separate quota applies too[low-priority VMs](batch-low-pri-vms.md), if you use them.</span></span> 

    * <span data-ttu-id="a85dc-119">Se è stato creato account hello in hello **sottoscrizione utente** configurazione, la sottoscrizione consente di limitare il numero di hello di core VM per ogni area.</span><span class="sxs-lookup"><span data-stu-id="a85dc-119">If you created hello account in hello **User subscription** configuration, your subscription limits hello number of VM cores per region.</span></span> <span data-ttu-id="a85dc-120">Vedere [Sottoscrizione di Azure e limiti, quote e vincoli dei servizi](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="a85dc-120">See [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span> <span data-ttu-id="a85dc-121">La sottoscrizione si applica anche una dimensioni di macchina virtuale toocertain internazionali quota, incluse le istanze HPC e GPU.</span><span class="sxs-lookup"><span data-stu-id="a85dc-121">Your subscription also applies a regional quota toocertain VM sizes, including HPC and GPU instances.</span></span> <span data-ttu-id="a85dc-122">Nella configurazione di sottoscrizione utente hello, nessun quote aggiuntive si applicano account Batch toohello.</span><span class="sxs-lookup"><span data-stu-id="a85dc-122">In hello user subscription configuration, no additional quotas apply toohello Batch account.</span></span> 

  <span data-ttu-id="a85dc-123">Potrebbe essere necessario tooincrease uno o più quote quando si utilizza una dimensione di macchina virtuale specializzata in Batch.</span><span class="sxs-lookup"><span data-stu-id="a85dc-123">You might need tooincrease one or more quotas when using a specialized VM size in Batch.</span></span> <span data-ttu-id="a85dc-124">toorequest un aumento della quota, aprire un [richiesta di supporto clienti online](../azure-supportability/how-to-create-azure-support-request.md) senza alcun costo.</span><span class="sxs-lookup"><span data-stu-id="a85dc-124">toorequest a quota increase, open an [online customer support request](../azure-supportability/how-to-create-azure-support-request.md) at no charge.</span></span>

* <span data-ttu-id="a85dc-125">**Disponibilità area** con utilizzo intensivo di calcolo - macchine virtuali potrebbero non essere disponibili in aree hello in cui si crea l'account Batch.</span><span class="sxs-lookup"><span data-stu-id="a85dc-125">**Region availability** - Compute-intensive VMs might not be available in hello regions where you create your Batch accounts.</span></span> <span data-ttu-id="a85dc-126">toocheck che una dimensione è disponibile, vedere [i prodotti disponibili per area](https://azure.microsoft.com/regions/services/).</span><span class="sxs-lookup"><span data-stu-id="a85dc-126">toocheck that a size is available, see [Products available by region](https://azure.microsoft.com/regions/services/).</span></span>


## <a name="dependencies"></a><span data-ttu-id="a85dc-127">Dipendenze</span><span class="sxs-lookup"><span data-stu-id="a85dc-127">Dependencies</span></span>

<span data-ttu-id="a85dc-128">funzionalità GPU di dimensioni elevate e Hello RDMA sono supportate solo in determinati sistemi operativi.</span><span class="sxs-lookup"><span data-stu-id="a85dc-128">hello RDMA and GPU capabilities of compute-intensive sizes are supported only in certain operating systems.</span></span> <span data-ttu-id="a85dc-129">A seconda del sistema operativo, si potrebbe essere necessario tooinstall o configura aggiuntive per i driver o altro software.</span><span class="sxs-lookup"><span data-stu-id="a85dc-129">Depending on your operating system, you might need tooinstall or configure additional driver or other software.</span></span> <span data-ttu-id="a85dc-130">Hello le tabelle seguenti riepiloga queste dipendenze.</span><span class="sxs-lookup"><span data-stu-id="a85dc-130">hello following tables summarize these dependencies.</span></span> <span data-ttu-id="a85dc-131">Vedere gli articoli correlati per informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="a85dc-131">See linked articles for details.</span></span> <span data-ttu-id="a85dc-132">Per i pool di Batch tooconfigure opzioni, vedere più avanti in questo articolo.</span><span class="sxs-lookup"><span data-stu-id="a85dc-132">For options tooconfigure Batch pools, see later in this article.</span></span>


### <a name="linux-pools---virtual-machine-configuration"></a><span data-ttu-id="a85dc-133">Pool Linux - Configurazione della macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="a85dc-133">Linux pools - Virtual machine configuration</span></span>

| <span data-ttu-id="a85dc-134">Dimensione</span><span class="sxs-lookup"><span data-stu-id="a85dc-134">Size</span></span> | <span data-ttu-id="a85dc-135">Funzionalità</span><span class="sxs-lookup"><span data-stu-id="a85dc-135">Capability</span></span> | <span data-ttu-id="a85dc-136">Sistemi operativi</span><span class="sxs-lookup"><span data-stu-id="a85dc-136">Operating systems</span></span> | <span data-ttu-id="a85dc-137">Requisiti software</span><span class="sxs-lookup"><span data-stu-id="a85dc-137">Required software</span></span> | <span data-ttu-id="a85dc-138">Impostazioni pool</span><span class="sxs-lookup"><span data-stu-id="a85dc-138">Pool settings</span></span> |
| -------- | -------- | ----- |  -------- | ----- |
| [<span data-ttu-id="a85dc-139">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="a85dc-139">H16r, H16mr, A8, A9</span></span>](../virtual-machines/linux/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="a85dc-140">RDMA</span><span class="sxs-lookup"><span data-stu-id="a85dc-140">RDMA</span></span> | <span data-ttu-id="a85dc-141">HPC SUSE Linux Enterprise Server 12 oppure</span><span class="sxs-lookup"><span data-stu-id="a85dc-141">SUSE Linux Enterprise Server 12 HPC or</span></span><br/><span data-ttu-id="a85dc-142">HPC basato su CentOS</span><span class="sxs-lookup"><span data-stu-id="a85dc-142">CentOS-based HPC</span></span><br/><span data-ttu-id="a85dc-143">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="a85dc-143">(Azure Marketplace)</span></span> | <span data-ttu-id="a85dc-144">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="a85dc-144">Intel MPI 5</span></span> | <span data-ttu-id="a85dc-145">Abilitare la comunicazione tra i nodi, disabilitare l'esecuzione di attività simultanee</span><span class="sxs-lookup"><span data-stu-id="a85dc-145">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="a85dc-146">Serie NC*</span><span class="sxs-lookup"><span data-stu-id="a85dc-146">NC series*</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms) | <span data-ttu-id="a85dc-147">GPU NVIDIA Tesla K80</span><span class="sxs-lookup"><span data-stu-id="a85dc-147">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="a85dc-148">Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="a85dc-148">Ubuntu 16.04 LTS.</span></span><br/><span data-ttu-id="a85dc-149">Red Hat Enterprise Linux 7.3 oppure</span><span class="sxs-lookup"><span data-stu-id="a85dc-149">Red Hat Enterprise Linux 7.3, or</span></span><br/><span data-ttu-id="a85dc-150">CentOS-based 7.3</span><span class="sxs-lookup"><span data-stu-id="a85dc-150">CentOS-based 7.3</span></span><br/><span data-ttu-id="a85dc-151">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="a85dc-151">(Azure Marketplace)</span></span> | <span data-ttu-id="a85dc-152">Driver NVIDIA CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="a85dc-152">NVIDIA CUDA Toolkit 8.0 drivers</span></span> | <span data-ttu-id="a85dc-153">N/D</span><span class="sxs-lookup"><span data-stu-id="a85dc-153">N/A</span></span> | 
| [<span data-ttu-id="a85dc-154">Serie NV</span><span class="sxs-lookup"><span data-stu-id="a85dc-154">NV series</span></span>](../virtual-machines/linux/n-series-driver-setup.md#install-grid-drivers-for-nv-vms) | <span data-ttu-id="a85dc-155">GPU NVIDIA Tesla M60</span><span class="sxs-lookup"><span data-stu-id="a85dc-155">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="a85dc-156">Ubuntu 16.04 LTS</span><span class="sxs-lookup"><span data-stu-id="a85dc-156">Ubuntu 16.04 LTS</span></span><br/><span data-ttu-id="a85dc-157">Red Hat Enterprise Linux 7.3</span><span class="sxs-lookup"><span data-stu-id="a85dc-157">Red Hat Enterprise Linux 7.3</span></span><br/><span data-ttu-id="a85dc-158">CentOS-based 7.3</span><span class="sxs-lookup"><span data-stu-id="a85dc-158">CentOS-based 7.3</span></span><br/><span data-ttu-id="a85dc-159">(Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="a85dc-159">(Azure Marketplace)</span></span> | <span data-ttu-id="a85dc-160">Driver NVIDIA GRID 4.3</span><span class="sxs-lookup"><span data-stu-id="a85dc-160">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="a85dc-161">N/D</span><span class="sxs-lookup"><span data-stu-id="a85dc-161">N/A</span></span> |

<span data-ttu-id="a85dc-162">*La connettività RDMA nelle macchine virtuali NC24r è supportata in HPC basato su CentOS 7.3 con Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="a85dc-162">*RDMA connectivity on NC24r VMs is supported on CentOS-based 7.3 HPC with Intel MPI.</span></span>



### <a name="windows-pools---virtual-machine-configuration"></a><span data-ttu-id="a85dc-163">Pool Windows - Configurazione della macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="a85dc-163">Windows pools - Virtual machine configuration</span></span>

| <span data-ttu-id="a85dc-164">Dimensione</span><span class="sxs-lookup"><span data-stu-id="a85dc-164">Size</span></span> | <span data-ttu-id="a85dc-165">Funzionalità</span><span class="sxs-lookup"><span data-stu-id="a85dc-165">Capability</span></span> | <span data-ttu-id="a85dc-166">Sistemi operativi</span><span class="sxs-lookup"><span data-stu-id="a85dc-166">Operating systems</span></span> | <span data-ttu-id="a85dc-167">Requisiti software</span><span class="sxs-lookup"><span data-stu-id="a85dc-167">Required software</span></span> | <span data-ttu-id="a85dc-168">Impostazioni pool</span><span class="sxs-lookup"><span data-stu-id="a85dc-168">Pool settings</span></span> |
| -------- | ------ | -------- | -------- | ----- |
| [<span data-ttu-id="a85dc-169">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="a85dc-169">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="a85dc-170">RDMA</span><span class="sxs-lookup"><span data-stu-id="a85dc-170">RDMA</span></span> | <span data-ttu-id="a85dc-171">Windows Server 2012 R2 oppure</span><span class="sxs-lookup"><span data-stu-id="a85dc-171">Windows Server 2012 R2 or</span></span><br/><span data-ttu-id="a85dc-172">Windows Server 2012 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="a85dc-172">Windows Server 2012 (Azure Marketplace)</span></span> | <span data-ttu-id="a85dc-173">Microsoft MPI 2012 R2 o versioni successive oppure</span><span class="sxs-lookup"><span data-stu-id="a85dc-173">Microsoft MPI 2012 R2 or later, or</span></span><br/> <span data-ttu-id="a85dc-174">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="a85dc-174">Intel MPI 5</span></span><br/><br/><span data-ttu-id="a85dc-175">Estensione di VM Azure HpcVMDrivers</span><span class="sxs-lookup"><span data-stu-id="a85dc-175">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="a85dc-176">Abilitare la comunicazione tra i nodi, disabilitare l'esecuzione di attività simultanee</span><span class="sxs-lookup"><span data-stu-id="a85dc-176">Enable inter-node communication, disable concurrent task execution</span></span> |
| [<span data-ttu-id="a85dc-177">Serie NC*</span><span class="sxs-lookup"><span data-stu-id="a85dc-177">NC series*</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="a85dc-178">GPU NVIDIA Tesla K80</span><span class="sxs-lookup"><span data-stu-id="a85dc-178">NVIDIA Tesla K80 GPU</span></span> | <span data-ttu-id="a85dc-179">Windows Server 2016 oppure</span><span class="sxs-lookup"><span data-stu-id="a85dc-179">Windows Server 2016 or</span></span> <br/><span data-ttu-id="a85dc-180">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="a85dc-180">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="a85dc-181">Driver NVIDIA Tesla o CUDA Toolkit 8.0</span><span class="sxs-lookup"><span data-stu-id="a85dc-181">NVIDIA Tesla drivers or CUDA Toolkit 8.0 drivers</span></span>| <span data-ttu-id="a85dc-182">N/D</span><span class="sxs-lookup"><span data-stu-id="a85dc-182">N/A</span></span> | 
| [<span data-ttu-id="a85dc-183">Serie NV</span><span class="sxs-lookup"><span data-stu-id="a85dc-183">NV series</span></span>](../virtual-machines/windows/n-series-driver-setup.md) | <span data-ttu-id="a85dc-184">GPU NVIDIA Tesla M60</span><span class="sxs-lookup"><span data-stu-id="a85dc-184">NVIDIA Tesla M60 GPU</span></span> | <span data-ttu-id="a85dc-185">Windows Server 2016 oppure</span><span class="sxs-lookup"><span data-stu-id="a85dc-185">Windows Server 2016 or</span></span><br/><span data-ttu-id="a85dc-186">Windows Server 2012 R2 (Azure Marketplace)</span><span class="sxs-lookup"><span data-stu-id="a85dc-186">Windows Server 2012 R2 (Azure Marketplace)</span></span> | <span data-ttu-id="a85dc-187">Driver NVIDIA GRID 4.3</span><span class="sxs-lookup"><span data-stu-id="a85dc-187">NVIDIA GRID 4.3 drivers</span></span> | <span data-ttu-id="a85dc-188">N/D</span><span class="sxs-lookup"><span data-stu-id="a85dc-188">N/A</span></span> |

<span data-ttu-id="a85dc-189">*La connettività RDMA nelle macchine virtuali NC24r è supportata in Windows Server 2012 R2 con estensione HpcVMDrivers e Microsoft MPI o Intel MPI.</span><span class="sxs-lookup"><span data-stu-id="a85dc-189">*RDMA connectivity on NC24r VMs is supported on Windows Server 2012 R2 with HpcVMDrivers extension and Microsoft MPI or Intel MPI.</span></span>

### <a name="windows-pools---cloud-services-configuration"></a><span data-ttu-id="a85dc-190">Pool Windows - Configurazione servizi cloud</span><span class="sxs-lookup"><span data-stu-id="a85dc-190">Windows pools - Cloud services configuration</span></span>

> [!NOTE]
> <span data-ttu-id="a85dc-191">Le dimensioni della serie di N non sono supportate nel pool di Batch con la configurazione di servizi cloud hello.</span><span class="sxs-lookup"><span data-stu-id="a85dc-191">N-series sizes are not supported in Batch pools with hello cloud services configuration.</span></span>
>

| <span data-ttu-id="a85dc-192">Dimensione</span><span class="sxs-lookup"><span data-stu-id="a85dc-192">Size</span></span> | <span data-ttu-id="a85dc-193">Funzionalità</span><span class="sxs-lookup"><span data-stu-id="a85dc-193">Capability</span></span> | <span data-ttu-id="a85dc-194">Sistemi operativi</span><span class="sxs-lookup"><span data-stu-id="a85dc-194">Operating systems</span></span> | <span data-ttu-id="a85dc-195">Requisiti software</span><span class="sxs-lookup"><span data-stu-id="a85dc-195">Required software</span></span> | <span data-ttu-id="a85dc-196">Impostazioni pool</span><span class="sxs-lookup"><span data-stu-id="a85dc-196">Pool settings</span></span> |
| -------- | ------- | -------- | -------- | ----- |
| [<span data-ttu-id="a85dc-197">H16r, H16mr, A8, A9</span><span class="sxs-lookup"><span data-stu-id="a85dc-197">H16r, H16mr, A8, A9</span></span>](../virtual-machines/windows/sizes-hpc.md#rdma-capable-instances) | <span data-ttu-id="a85dc-198">RDMA</span><span class="sxs-lookup"><span data-stu-id="a85dc-198">RDMA</span></span> | <span data-ttu-id="a85dc-199">Windows Server 2012 R2,</span><span class="sxs-lookup"><span data-stu-id="a85dc-199">Windows Server 2012 R2,</span></span><br/><span data-ttu-id="a85dc-200">Windows Server 2012 oppure</span><span class="sxs-lookup"><span data-stu-id="a85dc-200">Windows Server 2012, or</span></span><br/><span data-ttu-id="a85dc-201">Windows Server 2008 R2 (famiglia di sistemi operativi guest)</span><span class="sxs-lookup"><span data-stu-id="a85dc-201">Windows Server 2008 R2 (Guest OS family)</span></span> | <span data-ttu-id="a85dc-202">Microsoft MPI 2012 R2 o versioni successive oppure</span><span class="sxs-lookup"><span data-stu-id="a85dc-202">Microsoft MPI 2012 R2 or later, or</span></span><br/><span data-ttu-id="a85dc-203">Intel MPI 5</span><span class="sxs-lookup"><span data-stu-id="a85dc-203">Intel MPI 5</span></span><br/><br/><span data-ttu-id="a85dc-204">Estensione di VM Azure HpcVMDrivers</span><span class="sxs-lookup"><span data-stu-id="a85dc-204">HpcVMDrivers Azure VM extension</span></span> | <span data-ttu-id="a85dc-205">Abilitare la comunicazione tra i nodi,</span><span class="sxs-lookup"><span data-stu-id="a85dc-205">Enable inter-node communication,</span></span><br/> <span data-ttu-id="a85dc-206">disabilitare l'esecuzione di attività simultanee</span><span class="sxs-lookup"><span data-stu-id="a85dc-206">disable concurrent task execution</span></span> |





## <a name="pool-configuration-options"></a><span data-ttu-id="a85dc-207">Opzioni di configurazione pool</span><span class="sxs-lookup"><span data-stu-id="a85dc-207">Pool configuration options</span></span>

<span data-ttu-id="a85dc-208">tooconfigure una dimensione di macchina virtuale specializzata per pool Batch, hello Batch API e strumenti di fornire più software tooinstall necessarie opzioni o i driver, inclusi:</span><span class="sxs-lookup"><span data-stu-id="a85dc-208">tooconfigure a specialized VM size for your Batch pool, hello Batch APIs and tools provide several options tooinstall required software or drivers, including:</span></span>

* <span data-ttu-id="a85dc-209">[Attività di avvio](batch-api-basics.md#start-task) -caricare un pacchetto di installazione come un tooan di file di risorse account di archiviazione di Azure in hello stessa area hello account Batch.</span><span class="sxs-lookup"><span data-stu-id="a85dc-209">[Start task](batch-api-basics.md#start-task) - Upload an installation package as a resource file tooan Azure storage account in hello same region as hello Batch account.</span></span> <span data-ttu-id="a85dc-210">Creare automaticamente un file di risorse inizio attività riga di comando tooinstall hello pool hello all'avvio.</span><span class="sxs-lookup"><span data-stu-id="a85dc-210">Create a start task command line tooinstall hello resource file silently when hello pool starts.</span></span> <span data-ttu-id="a85dc-211">Per ulteriori informazioni, vedere hello [documentazione dell'API REST](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span><span class="sxs-lookup"><span data-stu-id="a85dc-211">For more information, see hello [REST API documentation](/rest/api/batchservice/add-a-pool-to-an-account#bk_starttask).</span></span>

  > [!NOTE] 
  > <span data-ttu-id="a85dc-212">attività di avvio Hello deve essere eseguito con autorizzazioni con privilegi elevati (amministratore) e perché deve attendere l'esito positivo.</span><span class="sxs-lookup"><span data-stu-id="a85dc-212">hello start task must run with elevated (admin) permissions, and it must wait for success.</span></span>
  >

* <span data-ttu-id="a85dc-213">[Pacchetto di applicazione](batch-application-packages.md) : aggiungere un tooyour pacchetto di installazione compresso account Batch e configurare un riferimento al pacchetto nel pool di hello.</span><span class="sxs-lookup"><span data-stu-id="a85dc-213">[Application package](batch-application-packages.md) - Add a zipped installation package tooyour Batch account, and configure a package reference in hello pool.</span></span> <span data-ttu-id="a85dc-214">Questa impostazione consente di caricare e decomprime i pacchetti hello in tutti i nodi nel pool di hello.</span><span class="sxs-lookup"><span data-stu-id="a85dc-214">This setting uploads and unzips hello package on all nodes in hello pool.</span></span> <span data-ttu-id="a85dc-215">Se il pacchetto di hello è un programma di installazione, creare un'app installazione hello toosilently riga di comando di inizio attività in tutti i nodi del pool.</span><span class="sxs-lookup"><span data-stu-id="a85dc-215">If hello package is an installer, create a start task command line toosilently install hello app on all pool nodes.</span></span> <span data-ttu-id="a85dc-216">Facoltativamente, installare il pacchetto di hello quando un'attività è pianificata toorun in un nodo.</span><span class="sxs-lookup"><span data-stu-id="a85dc-216">Optionally, install hello package when a task is scheduled toorun on a node.</span></span>

* <span data-ttu-id="a85dc-217">[Immagine personalizzata pool](batch-api-basics.md#pool) : creare Windows personalizzata o l'immagine VM Linux che contiene i driver, software o altre impostazioni necessarie per hello dimensioni della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="a85dc-217">[Custom pool image](batch-api-basics.md#pool) - Create a custom Windows or Linux VM image that contains drivers, software, or other settings required for hello VM size.</span></span> <span data-ttu-id="a85dc-218">Se è stato creato l'account Batch nella configurazione di sottoscrizione utente hello, specificare l'immagine personalizzata di hello per il pool di Batch.</span><span class="sxs-lookup"><span data-stu-id="a85dc-218">If you created your Batch account in hello user subscription configuration, specify hello custom image for your Batch pool.</span></span> <span data-ttu-id="a85dc-219">(Le immagini personalizzate non sono supportate negli account di configurazione del servizio Batch hello.) Immagini personalizzate sono utilizzabili solo con i pool di configurazione della macchina virtuale hello.</span><span class="sxs-lookup"><span data-stu-id="a85dc-219">(Custom images are not supported in accounts in hello Batch service configuration.) Custom images can only be used with pools in hello virtual machine configuration.</span></span>

  > [!IMPORTANT]
  > <span data-ttu-id="a85dc-220">Nei pool di Batch non è attualmente possibile usare un'immagine personalizzata creata con dischi gestiti o con l'archiviazione Premium.</span><span class="sxs-lookup"><span data-stu-id="a85dc-220">In Batch pools, you can't currently use a custom image created with managed disks or with Premium storage.</span></span>
  >



* <span data-ttu-id="a85dc-221">[Batch ambientali](https://github.com/Azure/batch-shipyard) configura automaticamente in modo trasparente hello GPU e RDMA toowork con carichi di lavoro nei contenitori nel Batch di Azure.</span><span class="sxs-lookup"><span data-stu-id="a85dc-221">[Batch Shipyard](https://github.com/Azure/batch-shipyard) automatically configures hello GPU and RDMA toowork transparently with containerized workloads on Azure Batch.</span></span> <span data-ttu-id="a85dc-222">Batch Shipyard si basa interamente su file di configurazione.</span><span class="sxs-lookup"><span data-stu-id="a85dc-222">Batch Shipyard is entirely driven with configuration files.</span></span> <span data-ttu-id="a85dc-223">Esistono molti recipe configurazioni di esempio disponibili che consentono di carichi di lavoro GPU e RDMA, ad esempio hello [CNTK GPU Recipe](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI) che configuri i driver GPU in macchine virtuali serie N e si carica software Microsoft cognitivi Toolkit come un'immagine Docker.</span><span class="sxs-lookup"><span data-stu-id="a85dc-223">There are many sample recipe configurations available that enable GPU and RDMA workloads such as hello [CNTK GPU Recipe](https://github.com/Azure/batch-shipyard/tree/master/recipes/CNTK-GPU-OpenMPI)  which preconfigures GPU drivers on N-series VMs and loads Microsoft Cognitive Toolkit software as a Docker image.</span></span>


## <a name="example-microsoft-mpi-on-an-a8-vm-pool"></a><span data-ttu-id="a85dc-224">Esempio: Microsoft MPI in un pool di VM A8</span><span class="sxs-lookup"><span data-stu-id="a85dc-224">Example: Microsoft MPI on an A8 VM pool</span></span>

<span data-ttu-id="a85dc-225">applicazioni di Windows MPI toorun in un pool di nodi di Azure A8, è necessario tooinstall un'implementazione MPI supportata.</span><span class="sxs-lookup"><span data-stu-id="a85dc-225">toorun Windows MPI applications on a pool of Azure A8 nodes, you need tooinstall a supported MPI implementation.</span></span> <span data-ttu-id="a85dc-226">Ecco l'esempio passaggi tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) in un Windows pool utilizzando un pacchetto di applicazione di Batch.</span><span class="sxs-lookup"><span data-stu-id="a85dc-226">Here are sample steps tooinstall [Microsoft MPI](https://msdn.microsoft.com/library/bb524831(v=vs.85).aspx) on a Windows pool using a Batch application package.</span></span>

1. <span data-ttu-id="a85dc-227">Scaricare hello [pacchetto di installazione](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) per la versione più recente di hello di Microsoft MPI.</span><span class="sxs-lookup"><span data-stu-id="a85dc-227">Download hello [setup package](http://go.microsoft.com/FWLink/p/?LinkID=389556) (MSMpiSetup.exe) for hello latest version of Microsoft MPI.</span></span>
2. <span data-ttu-id="a85dc-228">Creare un file zip del pacchetto di hello.</span><span class="sxs-lookup"><span data-stu-id="a85dc-228">Create a zip file of hello package.</span></span>
3. <span data-ttu-id="a85dc-229">Caricare l'account di Batch di hello pacchetto tooyour.</span><span class="sxs-lookup"><span data-stu-id="a85dc-229">Upload hello package tooyour Batch account.</span></span> <span data-ttu-id="a85dc-230">Per istruzioni, vedere hello [pacchetti di applicazioni](batch-application-packages.md) informazioni aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="a85dc-230">For steps, see hello [application packages](batch-application-packages.md) guidance.</span></span> <span data-ttu-id="a85dc-231">Specificare un ID applicazione, ad esempio *MSMPI*, e una versione come *8.1*.</span><span class="sxs-lookup"><span data-stu-id="a85dc-231">Specify an application id such as *MSMPI*, and a version such as *8.1*.</span></span> 
4. <span data-ttu-id="a85dc-232">Utilizza hello API Batch o il portale di Azure, creare un pool nella configurazione di servizi cloud hello con numero di hello desiderato di nodi e la scala.</span><span class="sxs-lookup"><span data-stu-id="a85dc-232">Using hello Batch APIs or Azure portal, create a pool in hello cloud services configuration with hello desired number of nodes and scale.</span></span> <span data-ttu-id="a85dc-233">Hello nella tabella seguente mostra tooset le impostazioni di esempio di MPI in modalità automatica utilizzando un'attività di avvio:</span><span class="sxs-lookup"><span data-stu-id="a85dc-233">hello following table shows sample settings tooset up MPI in unattended mode using a start task:</span></span>

| <span data-ttu-id="a85dc-234">Impostazione</span><span class="sxs-lookup"><span data-stu-id="a85dc-234">Setting</span></span> | <span data-ttu-id="a85dc-235">Valore</span><span class="sxs-lookup"><span data-stu-id="a85dc-235">Value</span></span> |
| ---- | ----- | 
| <span data-ttu-id="a85dc-236">**Tipo di immagine**</span><span class="sxs-lookup"><span data-stu-id="a85dc-236">**Image Type**</span></span> | <span data-ttu-id="a85dc-237">Servizi cloud</span><span class="sxs-lookup"><span data-stu-id="a85dc-237">Cloud Services</span></span> |
| <span data-ttu-id="a85dc-238">**Famiglia del sistema operativo**</span><span class="sxs-lookup"><span data-stu-id="a85dc-238">**OS family**</span></span> | <span data-ttu-id="a85dc-239">Windows Server 2012 R2 (famiglia del sistema operativo 4)</span><span class="sxs-lookup"><span data-stu-id="a85dc-239">Windows Server 2012 R2 (OS family 4)</span></span> |
| <span data-ttu-id="a85dc-240">**Dimensioni nodo**</span><span class="sxs-lookup"><span data-stu-id="a85dc-240">**Node size**</span></span> | <span data-ttu-id="a85dc-241">A8 Standard</span><span class="sxs-lookup"><span data-stu-id="a85dc-241">A8 Standard</span></span> |
| <span data-ttu-id="a85dc-242">**Comunicazione tra nodi abilitata**</span><span class="sxs-lookup"><span data-stu-id="a85dc-242">**Internode communication enabled**</span></span> | <span data-ttu-id="a85dc-243">True </span><span class="sxs-lookup"><span data-stu-id="a85dc-243">True</span></span> |
| <span data-ttu-id="a85dc-244">**Numero massimo di attività per ogni nodo**</span><span class="sxs-lookup"><span data-stu-id="a85dc-244">**Max tasks per node**</span></span> | <span data-ttu-id="a85dc-245">1</span><span class="sxs-lookup"><span data-stu-id="a85dc-245">1</span></span> |
| <span data-ttu-id="a85dc-246">**Riferimenti ai pacchetti dell'applicazione**</span><span class="sxs-lookup"><span data-stu-id="a85dc-246">**Application package references**</span></span> | <span data-ttu-id="a85dc-247">MSMPI</span><span class="sxs-lookup"><span data-stu-id="a85dc-247">MSMPI</span></span> |
| <span data-ttu-id="a85dc-248">**Attività di avvio abilitate**</span><span class="sxs-lookup"><span data-stu-id="a85dc-248">**Start task enabled**</span></span> | <span data-ttu-id="a85dc-249">True </span><span class="sxs-lookup"><span data-stu-id="a85dc-249">True</span></span><br><span data-ttu-id="a85dc-250">**Riga di comando** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span><span class="sxs-lookup"><span data-stu-id="a85dc-250">**Command line** - `"cmd /c %AZ_BATCH_APP_PACKAGE_MSMPI#8.1%\\MSMpiSetup.exe -unattend -force"`</span></span><br/><span data-ttu-id="a85dc-251">**Identità utente**: utente automatico pool, amministratore</span><span class="sxs-lookup"><span data-stu-id="a85dc-251">**User identity** - Pool autouser, admin</span></span><br/><span data-ttu-id="a85dc-252">**Attendere il completamento dell'operazione**: True</span><span class="sxs-lookup"><span data-stu-id="a85dc-252">**Wait for success** - True</span></span>

## <a name="example-nvidia-tesla-drivers-on-nc-vm-pool"></a><span data-ttu-id="a85dc-253">Esempio: Driver NVIDIA Tesla in pool di VM NC</span><span class="sxs-lookup"><span data-stu-id="a85dc-253">Example: NVIDIA Tesla drivers on NC VM pool</span></span>

<span data-ttu-id="a85dc-254">applicazioni di CUDA toorun in un pool di nodi di Linux NC, è necessario tooinstall CUDA Toolkit 8.0 nei nodi hello.</span><span class="sxs-lookup"><span data-stu-id="a85dc-254">toorun CUDA applications on a pool of Linux NC nodes, you need tooinstall CUDA Toolkit 8.0 on hello nodes.</span></span> <span data-ttu-id="a85dc-255">Hello Toolkit consente di installare i driver GPU Tesla NVIDIA hello necessari.</span><span class="sxs-lookup"><span data-stu-id="a85dc-255">hello Toolkit installs hello necessary NVIDIA Tesla GPU drivers.</span></span> <span data-ttu-id="a85dc-256">Ecco i passaggi di esempio toodeploy un'immagine personalizzata Ubuntu 16.04 LTS con i driver GPU hello:</span><span class="sxs-lookup"><span data-stu-id="a85dc-256">Here are sample steps toodeploy a custom Ubuntu 16.04 LTS image with hello GPU drivers:</span></span>

1. <span data-ttu-id="a85dc-257">Distribuire una macchina virtuale NC6 di Azure che esegue Ubuntu 16.04 LTS.</span><span class="sxs-lookup"><span data-stu-id="a85dc-257">Deploy an Azure NC6 VM running Ubuntu 16.04 LTS.</span></span> <span data-ttu-id="a85dc-258">Ad esempio, è possibile creare VM hello in hello ci meridionale area centrale.</span><span class="sxs-lookup"><span data-stu-id="a85dc-258">For example, create hello VM in hello US South Central region.</span></span> <span data-ttu-id="a85dc-259">Assicurarsi di creare hello macchina virtuale con archiviazione standard, e *senza* dischi gestiti.</span><span class="sxs-lookup"><span data-stu-id="a85dc-259">Make sure that you create hello VM with standard storage, and *without* managed disks.</span></span>
2. <span data-ttu-id="a85dc-260">Seguire hello passaggi tooconnect toohello VM e [installare i driver CUDA](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span><span class="sxs-lookup"><span data-stu-id="a85dc-260">Follow hello steps tooconnect toohello VM and [install CUDA drivers](../virtual-machines/linux/n-series-driver-setup.md#install-cuda-drivers-for-nc-vms).</span></span>
3. <span data-ttu-id="a85dc-261">Eseguire il deprovisioning agente Linux di hello e quindi acquisire l'immagine VM Linux utilizzando i comandi CLI di Azure 1.0 hello.</span><span class="sxs-lookup"><span data-stu-id="a85dc-261">Deprovision hello Linux agent, and then capture Linux VM image using hello Azure CLI 1.0 commands.</span></span> <span data-ttu-id="a85dc-262">Per la procedura, vedere [Acquisire una VM Linux in esecuzione su Azure](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="a85dc-262">For steps, see [Capture a Linux virtual machine running on Azure](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="a85dc-263">Prendere nota dell'immagine di hello URI.</span><span class="sxs-lookup"><span data-stu-id="a85dc-263">Make a note of hello image URI.</span></span>
  > [!IMPORTANT]
  > <span data-ttu-id="a85dc-264">Non usare immagini di hello toocapture comandi CLI di Azure 2.0 per Azure Batch.</span><span class="sxs-lookup"><span data-stu-id="a85dc-264">Do not use Azure CLI 2.0 commands toocapture hello image for Azure Batch.</span></span> <span data-ttu-id="a85dc-265">Attualmente, i comandi CLI 2.0 hello acquisire solo macchine virtuali create utilizzando dischi gestiti.</span><span class="sxs-lookup"><span data-stu-id="a85dc-265">Currently hello CLI 2.0 commands only capture VMs created using managed disks.</span></span>
  >
4. <span data-ttu-id="a85dc-266">Creare un account di Batch, con la configurazione di sottoscrizione utente hello, in un'area che supporta le macchine virtuali dal controller.</span><span class="sxs-lookup"><span data-stu-id="a85dc-266">Create a Batch account, with hello user subscription configuration, in a region that supports NC VMs.</span></span>
5. <span data-ttu-id="a85dc-267">Utilizzando le API Batch hello o il portale di Azure, creare un pool utilizzando l'immagine personalizzata hello e con hello numero desiderato di nodi e la scala.</span><span class="sxs-lookup"><span data-stu-id="a85dc-267">Using hello Batch APIs or Azure portal, create a pool using hello custom image and with hello desired number of nodes and scale.</span></span> <span data-ttu-id="a85dc-268">Hello nella tabella seguente mostra le impostazioni del pool di esempio per l'immagine di hello:</span><span class="sxs-lookup"><span data-stu-id="a85dc-268">hello following table shows sample pool settings for hello image:</span></span>

| <span data-ttu-id="a85dc-269">Impostazione</span><span class="sxs-lookup"><span data-stu-id="a85dc-269">Setting</span></span> | <span data-ttu-id="a85dc-270">Valore</span><span class="sxs-lookup"><span data-stu-id="a85dc-270">Value</span></span> |
| ---- | ---- |
| <span data-ttu-id="a85dc-271">**Tipo di immagine**</span><span class="sxs-lookup"><span data-stu-id="a85dc-271">**Image Type**</span></span> | <span data-ttu-id="a85dc-272">Immagine personalizzata</span><span class="sxs-lookup"><span data-stu-id="a85dc-272">Custom Image</span></span> |
| <span data-ttu-id="a85dc-273">**Immagine personalizzata**</span><span class="sxs-lookup"><span data-stu-id="a85dc-273">**Custom Image**</span></span> | <span data-ttu-id="a85dc-274">URI del modulo hello dell'immagine`https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span><span class="sxs-lookup"><span data-stu-id="a85dc-274">Image URI of hello form `https://yourstorageaccountdisks.blob.core.windows.net/system/Microsoft.Compute/Images/vhds/MyVHDNamePrefix-osDisk.xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx.vhd`</span></span> |
| <span data-ttu-id="a85dc-275">**SKU agente nodo**</span><span class="sxs-lookup"><span data-stu-id="a85dc-275">**Node agent SKU**</span></span> | <span data-ttu-id="a85dc-276">batch.node.ubuntu 16.04</span><span class="sxs-lookup"><span data-stu-id="a85dc-276">batch.node.ubuntu 16.04</span></span> |
| <span data-ttu-id="a85dc-277">**Dimensioni nodo**</span><span class="sxs-lookup"><span data-stu-id="a85dc-277">**Node size**</span></span> | <span data-ttu-id="a85dc-278">NC6 Standard</span><span class="sxs-lookup"><span data-stu-id="a85dc-278">NC6 Standard</span></span> |



## <a name="next-steps"></a><span data-ttu-id="a85dc-279">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="a85dc-279">Next steps</span></span>

* <span data-ttu-id="a85dc-280">i processi MPI toorun in un pool di Batch di Azure, vedere hello [Windows](batch-mpi.md) o [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) esempi.</span><span class="sxs-lookup"><span data-stu-id="a85dc-280">toorun MPI jobs on an Azure Batch pool, see hello [Windows](batch-mpi.md) or [Linux](https://blogs.technet.microsoft.com/windowshpc/2016/07/20/introducing-mpi-support-for-linux-on-azure-batch/) examples.</span></span>

* <span data-ttu-id="a85dc-281">Per esempi di carichi di lavoro GPU in Batch, vedere hello [ambientali Batch](https://github.com/Azure/batch-shipyard/) ricette.</span><span class="sxs-lookup"><span data-stu-id="a85dc-281">For examples of GPU workloads on Batch, see hello [Batch Shipyard](https://github.com/Azure/batch-shipyard/) recipes.</span></span>
