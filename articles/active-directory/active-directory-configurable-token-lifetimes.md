---
title: Durata dei token configurabili in Azure Active Directory | Microsoft Docs
description: Informazioni su come impostare la durata per i token rilasciati da Azure AD.
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 06f5b317-053e-44c3-aaaa-cf07d8692735
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/20/2017
ms.author: billmath
ms.custom: aaddev
ms.reviewer: anchitn
ms.openlocfilehash: d23721eba308096a05211eb6e26e1338a69cae0c
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="configurable-token-lifetimes-in-azure-active-directory-public-preview"></a><span data-ttu-id="503ea-103">Durata dei token configurabili in Azure Active Directory (anteprima pubblica)</span><span class="sxs-lookup"><span data-stu-id="503ea-103">Configurable token lifetimes in Azure Active Directory (Public Preview)</span></span>
<span data-ttu-id="503ea-104">È possibile specificare la durata di un token rilasciato da Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="503ea-104">You can specify the lifetime of a token issued by Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="503ea-105">La durata dei token può essere impostata per tutte le app di un'organizzazione, per un'applicazione multi-tenant (più organizzazioni) o per un'entità servizio specifica in un'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-105">You can set token lifetimes for all apps in your organization, for a multi-tenant (multi-organization) application, or for a specific service principal in your organization.</span></span>

> [!NOTE]
> <span data-ttu-id="503ea-106">Questa funzionalità è attualmente disponibile in anteprima pubblica.</span><span class="sxs-lookup"><span data-stu-id="503ea-106">This capability currently is in Public Preview.</span></span> <span data-ttu-id="503ea-107">Potrebbe essere necessario ripristinare o rimuovere eventuali modifiche.</span><span class="sxs-lookup"><span data-stu-id="503ea-107">Be prepared to revert or remove any changes.</span></span> <span data-ttu-id="503ea-108">La funzionalità è disponibile in tutte le sottoscrizioni di Azure Active Directory durante l'anteprima pubblica.</span><span class="sxs-lookup"><span data-stu-id="503ea-108">The feature is available in any Azure Active Directory subscription during Public Preview.</span></span> <span data-ttu-id="503ea-109">Tuttavia, quando la funzionalità sarà disponibile a livello generale, alcuni aspetti potrebbero richiedere una sottoscrizione di [Azure Active Directory Premium](active-directory-get-started-premium.md).</span><span class="sxs-lookup"><span data-stu-id="503ea-109">However, when the feature becomes generally available, some aspects of the feature might require an [Azure Active Directory Premium](active-directory-get-started-premium.md) subscription.</span></span>
>
>

<span data-ttu-id="503ea-110">In Azure AD, un oggetto criteri rappresenta un set di regole applicate a singole applicazioni o a tutte le applicazioni di un'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-110">In Azure AD, a policy object represents a set of rules that are enforced on individual applications or on all applications in an organization.</span></span> <span data-ttu-id="503ea-111">Ogni tipo di criteri ha una struttura univoca con un set di proprietà che vengono applicate agli oggetti a cui sono assegnate.</span><span class="sxs-lookup"><span data-stu-id="503ea-111">Each policy type has a unique structure, with a set of properties that are applied to objects to which they are assigned.</span></span>

<span data-ttu-id="503ea-112">È possibile designare un oggetto criteri come predefinito per l'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-112">You can designate a policy as the default policy for your organization.</span></span> <span data-ttu-id="503ea-113">I criteri predefiniti vengono applicati a tutte le applicazioni all'interno dell'organizzazione, fino a quando non vengono sostituiti da criteri con priorità più alta.</span><span class="sxs-lookup"><span data-stu-id="503ea-113">The policy is applied to any application in the organization, as long as it is not overridden by a policy with a higher priority.</span></span> <span data-ttu-id="503ea-114">È anche possibile assegnare criteri ad applicazioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="503ea-114">You also can assign a policy to specific applications.</span></span> <span data-ttu-id="503ea-115">L'ordine di priorità varia in base al tipo di criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-115">The order of priority varies by policy type.</span></span>


## <a name="token-types"></a><span data-ttu-id="503ea-116">Tipi di token</span><span class="sxs-lookup"><span data-stu-id="503ea-116">Token types</span></span>

<span data-ttu-id="503ea-117">È possibile impostare i criteri di durata dei token per i token di aggiornamento, i token di accesso, i token di sessione e i token ID.</span><span class="sxs-lookup"><span data-stu-id="503ea-117">You can set token lifetime policies for refresh tokens, access tokens, session tokens, and ID tokens.</span></span>

### <a name="access-tokens"></a><span data-ttu-id="503ea-118">Token di accesso</span><span class="sxs-lookup"><span data-stu-id="503ea-118">Access tokens</span></span>
<span data-ttu-id="503ea-119">I client usano i token di accesso per accedere a una risorsa protetta.</span><span class="sxs-lookup"><span data-stu-id="503ea-119">Clients use access tokens to access a protected resource.</span></span> <span data-ttu-id="503ea-120">I token di accesso possono essere usati solo per una combinazione specifica di utente, client e risorsa.</span><span class="sxs-lookup"><span data-stu-id="503ea-120">An access token can be used only for a specific combination of user, client, and resource.</span></span> <span data-ttu-id="503ea-121">Non è possibile revocare i token di accesso, che rimangono validi fino alla scadenza.</span><span class="sxs-lookup"><span data-stu-id="503ea-121">Access tokens cannot be revoked and are valid until their expiry.</span></span> <span data-ttu-id="503ea-122">Un attore malintenzionato può usare un eventuale token di accesso ottenuto per la sua intera durata.</span><span class="sxs-lookup"><span data-stu-id="503ea-122">A malicious actor that has obtained an access token can use it for extent of its lifetime.</span></span> <span data-ttu-id="503ea-123">Regolare la durata dei token di accesso significa trovare un compromesso tra il miglioramento delle prestazioni di sistema e l'aumento dell'intervallo di tempo durante il quale il client conserva l'accesso dopo che l'account dell'utente è stato disabilitato.</span><span class="sxs-lookup"><span data-stu-id="503ea-123">Adjusting the lifetime of an access token is a trade-off between improving system performance and increasing the amount of time that the client retains access after the user’s account is disabled.</span></span> <span data-ttu-id="503ea-124">Il miglioramento delle prestazioni di sistema si ottiene riducendo il numero delle volte in cui un client deve acquisire un token di accesso aggiornato.</span><span class="sxs-lookup"><span data-stu-id="503ea-124">Improved system performance is achieved by reducing the number of times a client needs to acquire a fresh access token.</span></span>

### <a name="refresh-tokens"></a><span data-ttu-id="503ea-125">Token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="503ea-125">Refresh tokens</span></span>
<span data-ttu-id="503ea-126">Quando un client acquisisce un token di accesso per accedere a una risorsa protetta, riceve sia un token di aggiornamento che un token di accesso.</span><span class="sxs-lookup"><span data-stu-id="503ea-126">When a client acquires an access token to access a protected resource, the client receives both a refresh token and an access token.</span></span> <span data-ttu-id="503ea-127">Il token di aggiornamento consente di ottenere nuove coppie di token di accesso/aggiornamento alla scadenza del token di accesso attuale.</span><span class="sxs-lookup"><span data-stu-id="503ea-127">The refresh token is used to obtain new access/refresh token pairs when the current access token expires.</span></span> <span data-ttu-id="503ea-128">Il token di aggiornamento è associato a una combinazione di utente e client</span><span class="sxs-lookup"><span data-stu-id="503ea-128">A refresh token is bound to a combination of user and client.</span></span> <span data-ttu-id="503ea-129">e può essere revocato. La validità del token di aggiornamento viene quindi controllata ogni volta che viene usato.</span><span class="sxs-lookup"><span data-stu-id="503ea-129">A refresh token can be revoked, and the token's validity is checked every time the token is used.</span></span>

<span data-ttu-id="503ea-130">È importante distinguere tra client riservati e client pubblici.</span><span class="sxs-lookup"><span data-stu-id="503ea-130">It's important to make a distinction between confidential clients and public clients.</span></span> <span data-ttu-id="503ea-131">Per altre informazioni sui diversi tipi di client, vedere la specifica [RFC 6749](https://tools.ietf.org/html/rfc6749#section-2.1).</span><span class="sxs-lookup"><span data-stu-id="503ea-131">For more information about different types of clients, see [RFC 6749](https://tools.ietf.org/html/rfc6749#section-2.1).</span></span>

#### <a name="token-lifetimes-with-confidential-client-refresh-tokens"></a><span data-ttu-id="503ea-132">Durata dei token con token di aggiornamento per client riservati</span><span class="sxs-lookup"><span data-stu-id="503ea-132">Token lifetimes with confidential client refresh tokens</span></span>
<span data-ttu-id="503ea-133">I client riservati sono applicazioni che possono archiviare in modo sicuro una password client, ovvero un segreto,</span><span class="sxs-lookup"><span data-stu-id="503ea-133">Confidential clients are applications that can securely store a client password (secret).</span></span> <span data-ttu-id="503ea-134">e possono dimostrare che le richieste provengono dall'applicazione client e non da un attore malintenzionato.</span><span class="sxs-lookup"><span data-stu-id="503ea-134">They can prove that requests are coming from the client application and not from a malicious actor.</span></span> <span data-ttu-id="503ea-135">Un'app Web, ad esempio, è un client riservato perché può archiviare un segreto client nel server Web</span><span class="sxs-lookup"><span data-stu-id="503ea-135">For example, a web app is a confidential client because it can store a client secret on the web server.</span></span> <span data-ttu-id="503ea-136">e non viene esposto.</span><span class="sxs-lookup"><span data-stu-id="503ea-136">It is not exposed.</span></span> <span data-ttu-id="503ea-137">I token di aggiornamento rilasciati per questi flussi più sicuri hanno una durata `until-revoked`, che non può essere modificata tramite i criteri e non può essere revocata con reimpostazioni di password volontarie.</span><span class="sxs-lookup"><span data-stu-id="503ea-137">Because these flows are more secure, the default lifetimes of refresh tokens issued to these flows is `until-revoked`, cannot be changed by using policy, and will not be revoked on voluntary password resets.</span></span>

#### <a name="token-lifetimes-with-public-client-refresh-tokens"></a><span data-ttu-id="503ea-138">Durata dei token con token di aggiornamento per client pubblici</span><span class="sxs-lookup"><span data-stu-id="503ea-138">Token lifetimes with public client refresh tokens</span></span>

<span data-ttu-id="503ea-139">I client pubblici non possono archiviare in modo sicuro una password client, ovvero un segreto.</span><span class="sxs-lookup"><span data-stu-id="503ea-139">Public clients cannot securely store a client password (secret).</span></span> <span data-ttu-id="503ea-140">Un'app iOS o Android, ad esempio, non può offuscare un segreto dal proprietario della risorsa e per questo è considerata un client pubblico.</span><span class="sxs-lookup"><span data-stu-id="503ea-140">For example, an iOS/Android app cannot obfuscate a secret from the resource owner, so it is considered a public client.</span></span> <span data-ttu-id="503ea-141">È possibile impostare criteri sulle risorse per evitare che i token di aggiornamento di client pubblici precedenti a un periodo specificato ottengano una nuova coppia di token di accesso/aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="503ea-141">You can set policies on resources to prevent refresh tokens from public clients older than a specified period from obtaining a new access/refresh token pair.</span></span> <span data-ttu-id="503ea-142">A tale scopo, usare la proprietà Tempo inattività massimo token di aggiornamento. È anche possibile usare i criteri per impostare un intervallo di tempo oltre il quale i token di aggiornamento non vengono più accettati.</span><span class="sxs-lookup"><span data-stu-id="503ea-142">(To do this, use the Refresh Token Max Inactive Time property.) You also can use policies to set a period beyond which the refresh tokens are no longer accepted.</span></span> <span data-ttu-id="503ea-143">A tale scopo, usare la proprietà Validità massima del token di aggiornamento. È possibile regolare la durata dei token di aggiornamento per controllare quando e con quale frequenza viene richiesto all'utente di immettere di nuovo le credenziali durante l'uso di un'applicazione client pubblica, anziché rieseguirne automaticamente l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-143">(To do this, use the Refresh Token Max Age property.) You can adjust the lifetime of a refresh token to control when and how often the user is required to reenter credentials, instead of being silently reauthenticated, when using a public client application.</span></span>

### <a name="id-tokens"></a><span data-ttu-id="503ea-144">Token ID</span><span class="sxs-lookup"><span data-stu-id="503ea-144">ID tokens</span></span>
<span data-ttu-id="503ea-145">I token ID vengono passati a siti Web e client nativi</span><span class="sxs-lookup"><span data-stu-id="503ea-145">ID tokens are passed to websites and native clients.</span></span> <span data-ttu-id="503ea-146">e contengono informazioni relative al profilo di un utente.</span><span class="sxs-lookup"><span data-stu-id="503ea-146">ID tokens contain profile information about a user.</span></span> <span data-ttu-id="503ea-147">Ogni token ID è associato a una combinazione specifica di utente e client</span><span class="sxs-lookup"><span data-stu-id="503ea-147">An ID token is bound to a specific combination of user and client.</span></span> <span data-ttu-id="503ea-148">ed è considerato valido fino alla relativa scadenza.</span><span class="sxs-lookup"><span data-stu-id="503ea-148">ID tokens are considered valid until their expiry.</span></span> <span data-ttu-id="503ea-149">La durata della sessione di un utente in un'applicazione Web corrisponde in genere alla durata del token ID rilasciato per l'utente.</span><span class="sxs-lookup"><span data-stu-id="503ea-149">Usually, a web application matches a user’s session lifetime in the application to the lifetime of the ID token issued for the user.</span></span> <span data-ttu-id="503ea-150">È possibile regolare la durata del token ID per controllare con quale frequenza si verifica la scadenza di una sessione in un'applicazione Web ed è necessario rieseguire l'autenticazione dell'utente con Azure AD, in modo automatico o interattivo.</span><span class="sxs-lookup"><span data-stu-id="503ea-150">You can adjust the lifetime of an ID token to control how often the web application expires the application session, and how often it requires the user to be reauthenticated with Azure AD (either silently or interactively).</span></span>

### <a name="single-sign-on-session-tokens"></a><span data-ttu-id="503ea-151">Token di sessione Single Sign-On</span><span class="sxs-lookup"><span data-stu-id="503ea-151">Single sign-on session tokens</span></span>
<span data-ttu-id="503ea-152">Quando un utente esegue l'autenticazione con Azure AD e seleziona la casella di controllo **Mantieni l'accesso**, viene stabilita una sessione Single Sign-On (SSO) con Azure AD e il browser dell'utente.</span><span class="sxs-lookup"><span data-stu-id="503ea-152">When a user authenticates with Azure AD and selects the **Keep me signed in** check box, a single sign-on session (SSO) is established with the user’s browser and Azure AD.</span></span> <span data-ttu-id="503ea-153">Questa sessione è rappresentata dal token di sessione SSO, sotto forma di cookie.</span><span class="sxs-lookup"><span data-stu-id="503ea-153">The SSO token, in the form of a cookie, represents this session.</span></span> <span data-ttu-id="503ea-154">Si noti che il token di sessione SSO non è associato a un'applicazione client o a una risorsa specifica.</span><span class="sxs-lookup"><span data-stu-id="503ea-154">Note that the SSO session token is not bound to a specific resource/client application.</span></span> <span data-ttu-id="503ea-155">I token di sessione SSO possono essere revocati e la relativa validità viene verificata ogni volta che vengono usati.</span><span class="sxs-lookup"><span data-stu-id="503ea-155">SSO session tokens can be revoked, and their validity is checked every time they are used.</span></span>

<span data-ttu-id="503ea-156">Azure AD usa due tipi di token di sessione SSO, ovvero permanenti e non permanenti.</span><span class="sxs-lookup"><span data-stu-id="503ea-156">Azure AD uses two kinds of SSO session tokens: persistent and nonpersistent.</span></span> <span data-ttu-id="503ea-157">I token di sessione permanenti vengono archiviati dal browser come cookie permanenti.</span><span class="sxs-lookup"><span data-stu-id="503ea-157">Persistent session tokens are stored as persistent cookies by the browser.</span></span> <span data-ttu-id="503ea-158">I token di sessione non permanenti vengono archiviati come cookie di sessione</span><span class="sxs-lookup"><span data-stu-id="503ea-158">Nonpersistent session tokens are stored as session cookies.</span></span> <span data-ttu-id="503ea-159">e vengono eliminati alla chiusura del browser.</span><span class="sxs-lookup"><span data-stu-id="503ea-159">(Session cookies are destroyed when the browser is closed.)</span></span>

<span data-ttu-id="503ea-160">I token di sessione non permanenti hanno una durata di 24 ore,</span><span class="sxs-lookup"><span data-stu-id="503ea-160">Nonpersistent session tokens have a lifetime of 24 hours.</span></span> <span data-ttu-id="503ea-161">mentre i token permanenti hanno una durata di 180 giorni.</span><span class="sxs-lookup"><span data-stu-id="503ea-161">Persistent tokens have a lifetime of 180 days.</span></span> <span data-ttu-id="503ea-162">Ogni volta che un token di sessione SSO viene usato entro il relativo periodo di validità, tale periodo viene esteso per altre 24 ore o altri 180 giorni, a seconda del tipo di token.</span><span class="sxs-lookup"><span data-stu-id="503ea-162">Any time an SSO session token is used within its validity period, the validity period is extended another 24 hours or 180 days, depending on the token type.</span></span> <span data-ttu-id="503ea-163">Se un token di sessione SSO non viene usato entro il relativo periodo di validità, è considerato scaduto e non viene più accettato.</span><span class="sxs-lookup"><span data-stu-id="503ea-163">If an SSO session token is not used within its validity period, it is considered expired and is no longer accepted.</span></span>

<span data-ttu-id="503ea-164">È possibile usare criteri per impostare il periodo di tempo dopo il rilascio del primo token di sessione oltre il quale tale token non viene più accettato.</span><span class="sxs-lookup"><span data-stu-id="503ea-164">You can use a policy to set the time after the first session token was issued beyond which the session token is no longer accepted.</span></span> <span data-ttu-id="503ea-165">A tale scopo, usare la proprietà Validità massima del token di sessione. È possibile regolare la durata dei token di sessione per controllare quando e con quale frequenza viene richiesto all'utente di immettere di nuovo le credenziali durante l'uso di un'applicazione Web, anziché eseguirne automaticamente l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-165">(To do this, use the Session Token Max Age property.) You can adjust the lifetime of a session token to control when and how often a user is required to reenter credentials, instead of being silently authenticated, when using a web application.</span></span>

### <a name="token-lifetime-policy-properties"></a><span data-ttu-id="503ea-166">Proprietà dei criteri per la durata dei token</span><span class="sxs-lookup"><span data-stu-id="503ea-166">Token lifetime policy properties</span></span>
<span data-ttu-id="503ea-167">I criteri per la durata dei token rappresentano un tipo di oggetto criteri contenente le regole di durata dei token.</span><span class="sxs-lookup"><span data-stu-id="503ea-167">A token lifetime policy is a type of policy object that contains token lifetime rules.</span></span> <span data-ttu-id="503ea-168">Usare le proprietà dei criteri per controllare la durata di token specifici.</span><span class="sxs-lookup"><span data-stu-id="503ea-168">Use the properties of the policy to control specified token lifetimes.</span></span> <span data-ttu-id="503ea-169">Se non si impostano criteri, il valore di durata predefinito viene applicato dal sistema.</span><span class="sxs-lookup"><span data-stu-id="503ea-169">If no policy is set, the system enforces the default lifetime value.</span></span>

### <a name="configurable-token-lifetime-properties"></a><span data-ttu-id="503ea-170">Proprietà configurabili per la durata dei token</span><span class="sxs-lookup"><span data-stu-id="503ea-170">Configurable token lifetime properties</span></span>
| <span data-ttu-id="503ea-171">Proprietà</span><span class="sxs-lookup"><span data-stu-id="503ea-171">Property</span></span> | <span data-ttu-id="503ea-172">Stringa proprietà criteri</span><span class="sxs-lookup"><span data-stu-id="503ea-172">Policy property string</span></span> | <span data-ttu-id="503ea-173">Impatto</span><span class="sxs-lookup"><span data-stu-id="503ea-173">Affects</span></span> | <span data-ttu-id="503ea-174">Default</span><span class="sxs-lookup"><span data-stu-id="503ea-174">Default</span></span> | <span data-ttu-id="503ea-175">Minima</span><span class="sxs-lookup"><span data-stu-id="503ea-175">Minimum</span></span> | <span data-ttu-id="503ea-176">Massima</span><span class="sxs-lookup"><span data-stu-id="503ea-176">Maximum</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="503ea-177">Durata dei token di accesso</span><span class="sxs-lookup"><span data-stu-id="503ea-177">Access Token Lifetime</span></span> |<span data-ttu-id="503ea-178">AccessTokenLifetime</span><span class="sxs-lookup"><span data-stu-id="503ea-178">AccessTokenLifetime</span></span> |<span data-ttu-id="503ea-179">Token di accesso, token ID, token SAML2</span><span class="sxs-lookup"><span data-stu-id="503ea-179">Access tokens, ID tokens, SAML2 tokens</span></span> |<span data-ttu-id="503ea-180">1 ora</span><span class="sxs-lookup"><span data-stu-id="503ea-180">1 hour</span></span> |<span data-ttu-id="503ea-181">10 minuti</span><span class="sxs-lookup"><span data-stu-id="503ea-181">10 minutes</span></span> |<span data-ttu-id="503ea-182">1 giorno</span><span class="sxs-lookup"><span data-stu-id="503ea-182">1 day</span></span> |
| <span data-ttu-id="503ea-183">Tempo inattività massimo token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="503ea-183">Refresh Token Max Inactive Time</span></span> |<span data-ttu-id="503ea-184">MaxInactiveTime</span><span class="sxs-lookup"><span data-stu-id="503ea-184">MaxInactiveTime</span></span> |<span data-ttu-id="503ea-185">Token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="503ea-185">Refresh tokens</span></span> |<span data-ttu-id="503ea-186">14 giorni</span><span class="sxs-lookup"><span data-stu-id="503ea-186">14 days</span></span> |<span data-ttu-id="503ea-187">10 minuti</span><span class="sxs-lookup"><span data-stu-id="503ea-187">10 minutes</span></span> |<span data-ttu-id="503ea-188">90 giorni</span><span class="sxs-lookup"><span data-stu-id="503ea-188">90 days</span></span> |
| <span data-ttu-id="503ea-189">Validità massima token di aggiornamento a fattore singolo</span><span class="sxs-lookup"><span data-stu-id="503ea-189">Single-Factor Refresh Token Max Age</span></span> |<span data-ttu-id="503ea-190">MaxAgeSingleFactor</span><span class="sxs-lookup"><span data-stu-id="503ea-190">MaxAgeSingleFactor</span></span> |<span data-ttu-id="503ea-191">Token di aggiornamento (per tutti gli utenti)</span><span class="sxs-lookup"><span data-stu-id="503ea-191">Refresh tokens (for any users)</span></span> |<span data-ttu-id="503ea-192">Fino a revoca</span><span class="sxs-lookup"><span data-stu-id="503ea-192">Until-revoked</span></span> |<span data-ttu-id="503ea-193">10 minuti</span><span class="sxs-lookup"><span data-stu-id="503ea-193">10 minutes</span></span> |<span data-ttu-id="503ea-194">Fino alla revoca<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="503ea-194">Until-revoked<sup>1</sup></span></span> |
| <span data-ttu-id="503ea-195">Validità massima token di aggiornamento a più fattori</span><span class="sxs-lookup"><span data-stu-id="503ea-195">Multi-Factor Refresh Token Max Age</span></span> |<span data-ttu-id="503ea-196">MaxAgeMultiFactor</span><span class="sxs-lookup"><span data-stu-id="503ea-196">MaxAgeMultiFactor</span></span> |<span data-ttu-id="503ea-197">Token di aggiornamento (per tutti gli utenti)</span><span class="sxs-lookup"><span data-stu-id="503ea-197">Refresh tokens (for any users)</span></span> |<span data-ttu-id="503ea-198">Fino a revoca</span><span class="sxs-lookup"><span data-stu-id="503ea-198">Until-revoked</span></span> |<span data-ttu-id="503ea-199">10 minuti</span><span class="sxs-lookup"><span data-stu-id="503ea-199">10 minutes</span></span> |<span data-ttu-id="503ea-200">Fino alla revoca<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="503ea-200">Until-revoked<sup>1</sup></span></span> |
| <span data-ttu-id="503ea-201">Validità massima token di sessione a fattore singolo</span><span class="sxs-lookup"><span data-stu-id="503ea-201">Single-Factor Session Token Max Age</span></span> |<span data-ttu-id="503ea-202">MaxAgeSessionSingleFactor<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="503ea-202">MaxAgeSessionSingleFactor<sup>2</sup></span></span> |<span data-ttu-id="503ea-203">Token di sessione (permanenti e non permanenti)</span><span class="sxs-lookup"><span data-stu-id="503ea-203">Session tokens (persistent and nonpersistent)</span></span> |<span data-ttu-id="503ea-204">Fino a revoca</span><span class="sxs-lookup"><span data-stu-id="503ea-204">Until-revoked</span></span> |<span data-ttu-id="503ea-205">10 minuti</span><span class="sxs-lookup"><span data-stu-id="503ea-205">10 minutes</span></span> |<span data-ttu-id="503ea-206">Fino alla revoca<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="503ea-206">Until-revoked<sup>1</sup></span></span> |
| <span data-ttu-id="503ea-207">Validità massima token di sessione a più fattori</span><span class="sxs-lookup"><span data-stu-id="503ea-207">Multi-Factor Session Token Max Age</span></span> |<span data-ttu-id="503ea-208">MaxAgeSessionMultiFactor<sup>3</sup></span><span class="sxs-lookup"><span data-stu-id="503ea-208">MaxAgeSessionMultiFactor<sup>3</sup></span></span> |<span data-ttu-id="503ea-209">Token di sessione (permanenti e non permanenti)</span><span class="sxs-lookup"><span data-stu-id="503ea-209">Session tokens (persistent and nonpersistent)</span></span> |<span data-ttu-id="503ea-210">Fino a revoca</span><span class="sxs-lookup"><span data-stu-id="503ea-210">Until-revoked</span></span> |<span data-ttu-id="503ea-211">10 minuti</span><span class="sxs-lookup"><span data-stu-id="503ea-211">10 minutes</span></span> |<span data-ttu-id="503ea-212">Fino alla revoca<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="503ea-212">Until-revoked<sup>1</sup></span></span> |

* <span data-ttu-id="503ea-213"><sup>1</sup> La durata esplicita massima che è possibile impostare per questi attributi è 365 giorni.</span><span class="sxs-lookup"><span data-stu-id="503ea-213"><sup>1</sup>365 days is the maximum explicit length that can be set for these attributes.</span></span>
* <span data-ttu-id="503ea-214"><sup>2</sup> Se **MaxAgeSessionSingleFactor** non è impostato, questo valore assume il valore di **MaxAgeSingleFactor**.</span><span class="sxs-lookup"><span data-stu-id="503ea-214"><sup>2</sup>If  **MaxAgeSessionSingleFactor** is not set, this value takes the **MaxAgeSingleFactor** value.</span></span> <span data-ttu-id="503ea-215">Se nessuno dei due parametri è impostato, la proprietà assume il valore predefinito, vale a dire fino alla revoca.</span><span class="sxs-lookup"><span data-stu-id="503ea-215">If neither parameter is set, the property takes the default value (until-revoked).</span></span>
* <span data-ttu-id="503ea-216"><sup>3</sup> Se **MaxAgeSessionMultiFactor** non è impostato, questo valore assume il valore di **MaxAgeMultiFactor**.</span><span class="sxs-lookup"><span data-stu-id="503ea-216"><sup>3</sup>If  **MaxAgeSessionMultiFactor** is not set, this value takes the **MaxAgeMultiFactor** value.</span></span> <span data-ttu-id="503ea-217">Se nessuno dei due parametri è impostato, la proprietà assume il valore predefinito, vale a dire fino alla revoca.</span><span class="sxs-lookup"><span data-stu-id="503ea-217">If neither parameter is set, the property takes the default value (until-revoked).</span></span>

### <a name="exceptions"></a><span data-ttu-id="503ea-218">Eccezioni</span><span class="sxs-lookup"><span data-stu-id="503ea-218">Exceptions</span></span>
| <span data-ttu-id="503ea-219">Proprietà</span><span class="sxs-lookup"><span data-stu-id="503ea-219">Property</span></span> | <span data-ttu-id="503ea-220">Impatto</span><span class="sxs-lookup"><span data-stu-id="503ea-220">Affects</span></span> | <span data-ttu-id="503ea-221">Default</span><span class="sxs-lookup"><span data-stu-id="503ea-221">Default</span></span> |
| --- | --- | --- |
| <span data-ttu-id="503ea-222">Validità massima dei token di aggiornamento (rilasciati a utenti federati con informazioni sulla revoca insufficienti<sup>1</sup>)</span><span class="sxs-lookup"><span data-stu-id="503ea-222">Refresh Token Max Age (issued for federated users who have insufficient revocation information<sup>1</sup>)</span></span> |<span data-ttu-id="503ea-223">Token di aggiornamento (rilasciati a utenti federati con informazioni sulla revoca insufficienti<sup>1</sup>)</span><span class="sxs-lookup"><span data-stu-id="503ea-223">Refresh tokens (issued for federated users who have insufficient revocation information<sup>1</sup>)</span></span> |<span data-ttu-id="503ea-224">12 ore</span><span class="sxs-lookup"><span data-stu-id="503ea-224">12 hours</span></span> |
| <span data-ttu-id="503ea-225">Tempo inattività massimo token di aggiornamento (rilasciata a client riservati)</span><span class="sxs-lookup"><span data-stu-id="503ea-225">Refresh Token Max Inactive Time (issued for confidential clients)</span></span> |<span data-ttu-id="503ea-226">Token di aggiornamento (rilasciati a client riservati)</span><span class="sxs-lookup"><span data-stu-id="503ea-226">Refresh tokens (issued for confidential clients)</span></span> |<span data-ttu-id="503ea-227">90 giorni</span><span class="sxs-lookup"><span data-stu-id="503ea-227">90 days</span></span> |
| <span data-ttu-id="503ea-228">Validità massima token di aggiornamento (rilasciata a client riservati)</span><span class="sxs-lookup"><span data-stu-id="503ea-228">Refresh Token Max Age (issued for confidential clients)</span></span> |<span data-ttu-id="503ea-229">Token di aggiornamento (rilasciati a client riservati)</span><span class="sxs-lookup"><span data-stu-id="503ea-229">Refresh tokens (issued for confidential clients)</span></span> |<span data-ttu-id="503ea-230">Fino a revoca</span><span class="sxs-lookup"><span data-stu-id="503ea-230">Until-revoked</span></span> |

* <span data-ttu-id="503ea-231"><sup>1</sup>Gli utenti federati con informazioni di revoca insufficienti comprendono tutti gli utenti che non dispongono dell'attributo "LastPasswordChangeTimestamp" sincronizzato.</span><span class="sxs-lookup"><span data-stu-id="503ea-231"><sup>1</sup>Federated users who have insufficient revocation information include any users who do not have the "LastPasswordChangeTimestamp" attribute synced.</span></span> <span data-ttu-id="503ea-232">Questi utenti hanno una validità massima breve perché AAD non è in grado di verificare in quale momento revocare i token che sono collegati a una credenziale precedente (ad esempio una password che è stata modificata) e devono eseguire più spesso nuove verifiche per garantire che l'utente e i token associati siano ancora attivi.</span><span class="sxs-lookup"><span data-stu-id="503ea-232">These users are given this short Max Age because AAD is unable to verify when to revoke tokens that are tied to an old credential (such as a password that has been changed) and must check back in more frequently to ensure that the user and associated tokens are still in good standing.</span></span> <span data-ttu-id="503ea-233">Per migliorare questa esperienza, gli amministratori del tenant devono assicurare che la sincronizzazione dell'attributo "LastPasswordChangeTimestamp" sia in corso (può essere impostata sull'oggetto utente tramite Powershell o AADSync).</span><span class="sxs-lookup"><span data-stu-id="503ea-233">To improve this experience, tenant admins must ensure that they are syncing the “LastPasswordChangeTimestamp” attribute (this can be set on the user object using Powershell or through AADSync).</span></span>

### <a name="policy-evaluation-and-prioritization"></a><span data-ttu-id="503ea-234">Definizione della priorità e valutazione dei criteri</span><span class="sxs-lookup"><span data-stu-id="503ea-234">Policy evaluation and prioritization</span></span>
<span data-ttu-id="503ea-235">È possibile creare e quindi assegnare criteri per la durata dei token a un'applicazione specifica, all'organizzazione e alle entità servizio.</span><span class="sxs-lookup"><span data-stu-id="503ea-235">You can create and then assign a token lifetime policy to a specific application, to your organization, and to service principals.</span></span> <span data-ttu-id="503ea-236">A un'applicazione specifica si possono applicare più criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-236">Multiple policies might apply to a specific application.</span></span> <span data-ttu-id="503ea-237">Di seguito sono riportate le regole su cui si basano i criteri per la durata dei token validi:</span><span class="sxs-lookup"><span data-stu-id="503ea-237">The token lifetime policy that takes effect follows these rules:</span></span>

* <span data-ttu-id="503ea-238">Se i criteri sono assegnati in modo esplicito all'entità servizio, vengono applicati.</span><span class="sxs-lookup"><span data-stu-id="503ea-238">If a policy is explicitly assigned to the service principal, it is enforced.</span></span>
* <span data-ttu-id="503ea-239">Se all'entità servizio non sono assegnati criteri in modo esplicito, vengono applicati i criteri assegnati in modo esplicito all'elemento organizzazione padre dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="503ea-239">If no policy is explicitly assigned to the service principal, a policy explicitly assigned to the parent organization of the service principal is enforced.</span></span>
* <span data-ttu-id="503ea-240">Se all'entità servizio o all'organizzazione non sono assegnati criteri in modo esplicito, vengono applicati i criteri assegnati all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-240">If no policy is explicitly assigned to the service principal or to the organization, the policy assigned to the application is enforced.</span></span>
* <span data-ttu-id="503ea-241">Se all'entità servizio, all'organizzazione o all'oggetto applicazione non sono stati assegnati criteri, vengono applicati i valori predefiniti.</span><span class="sxs-lookup"><span data-stu-id="503ea-241">If no policy has been assigned to the service principal, the organization, or the application object, the default values is enforced.</span></span> <span data-ttu-id="503ea-242">Vedere in proposito la tabella in [Proprietà configurabili per la durata dei token](#configurable-token-lifetime-properties).</span><span class="sxs-lookup"><span data-stu-id="503ea-242">(See the table in [Configurable token lifetime properties](#configurable-token-lifetime-properties).)</span></span>

<span data-ttu-id="503ea-243">Per altre informazioni sulla relazione tra oggetti applicazione e oggetti entità servizio, vedere [Oggetti applicazione e oggetti entità servizio in Azure Active Directory](active-directory-application-objects.md).</span><span class="sxs-lookup"><span data-stu-id="503ea-243">For more information about the relationship between application objects and service principal objects, see [Application and service principal objects in Azure Active Directory](active-directory-application-objects.md).</span></span>

<span data-ttu-id="503ea-244">La validità di un token viene valutata quando questo viene usato.</span><span class="sxs-lookup"><span data-stu-id="503ea-244">A token’s validity is evaluated at the time the token is used.</span></span> <span data-ttu-id="503ea-245">Vengono applicati i criteri con la priorità più alta per l'applicazione a cui si accede.</span><span class="sxs-lookup"><span data-stu-id="503ea-245">The policy with the highest priority on the application that is being accessed takes effect.</span></span>

> [!NOTE]
> <span data-ttu-id="503ea-246">Di seguito è riportato uno scenario di esempio.</span><span class="sxs-lookup"><span data-stu-id="503ea-246">Here's an example scenario.</span></span>
>
> <span data-ttu-id="503ea-247">Un utente vuole accedere a due applicazioni Web: l'applicazione Web A e l'applicazione Web B.</span><span class="sxs-lookup"><span data-stu-id="503ea-247">A user wants to access two web applications: Web Application A and Web Application B.</span></span>
> 
> <span data-ttu-id="503ea-248">Fattori:</span><span class="sxs-lookup"><span data-stu-id="503ea-248">Factors:</span></span>
> * <span data-ttu-id="503ea-249">Entrambe le applicazioni Web si trovano nello stesso elemento organizzazione padre.</span><span class="sxs-lookup"><span data-stu-id="503ea-249">Both web applications are in the same parent organization.</span></span>
> * <span data-ttu-id="503ea-250">I criteri per la durata dei token 1 con una validità massima del token di sessione di otto ore vengono impostati come valore predefinito per l'elemento organizzazione padre.</span><span class="sxs-lookup"><span data-stu-id="503ea-250">Token Lifetime Policy 1 with a Session Token Max Age of eight hours is set as the parent organization’s default.</span></span>
> * <span data-ttu-id="503ea-251">L'applicazione Web A è di tipo normale e non è collegata a criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-251">Web Application A is a regular-use web application and isn’t linked to any policies.</span></span>
> * <span data-ttu-id="503ea-252">L'applicazione Web B viene usata per processi riservati.</span><span class="sxs-lookup"><span data-stu-id="503ea-252">Web Application B is used for highly sensitive processes.</span></span> <span data-ttu-id="503ea-253">La relativa entità servizio è collegata ai criteri per la durata dei token 2, che hanno una validità massima del token di sessione di 30 minuti.</span><span class="sxs-lookup"><span data-stu-id="503ea-253">Its service principal is linked to Token Lifetime Policy 2, which has a Session Token Max Age of 30 minutes.</span></span>
>
> <span data-ttu-id="503ea-254">Alle 12.00 l'utente avvia una nuova sessione del browser e tenta di accedere all'applicazione Web A. L'utente viene reindirizzato ad Azure AD a cui dovrà accedere.</span><span class="sxs-lookup"><span data-stu-id="503ea-254">At 12:00 PM, the user starts a new browser session and tries to access Web Application A. The user is redirected to Azure AD and is asked to sign in.</span></span> <span data-ttu-id="503ea-255">Nel browser viene creato un cookie con un token di sessione.</span><span class="sxs-lookup"><span data-stu-id="503ea-255">This creates a cookie that has a session token in the browser.</span></span> <span data-ttu-id="503ea-256">L'utente viene di nuovo reindirizzato all'applicazione Web A con un token ID che gli consente di accedere all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-256">The user is redirected back to Web Application A with an ID token that allows the user to access the application.</span></span>
>
> <span data-ttu-id="503ea-257">Alle 12.15 l'utente tenta di accedere all'applicazione Web B. Il browser lo reindirizza ad Azure AD che rileva il cookie di sessione.</span><span class="sxs-lookup"><span data-stu-id="503ea-257">At 12:15 PM, the user tries to access Web Application B. The browser redirects to Azure AD, which detects the session cookie.</span></span> <span data-ttu-id="503ea-258">L'entità servizio dell'applicazione Web B è collegata ai criteri per la durata dei token 2, ma è anche parte dell'elemento organizzazione padre associato ai criteri per la durata dei token 1 predefiniti.</span><span class="sxs-lookup"><span data-stu-id="503ea-258">Web Application B’s service principal is linked to Token Lifetime Policy 2, but it's also part of the parent organization, with default Token Lifetime Policy 1.</span></span> <span data-ttu-id="503ea-259">Vengono applicati i criteri per la durata dei token 2 perché i criteri collegati alle entità servizio hanno una priorità maggiore rispetto a quelli predefiniti dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-259">Token Lifetime Policy 2 takes effect because policies linked to service principals have a higher priority than organization default policies.</span></span> <span data-ttu-id="503ea-260">Il token di sessione è stato rilasciato negli ultimi 30 minuti, quindi è considerato valido.</span><span class="sxs-lookup"><span data-stu-id="503ea-260">The session token was originally issued within the last 30 minutes, so it is considered valid.</span></span> <span data-ttu-id="503ea-261">L'utente viene di nuovo reindirizzato all'applicazione Web B con un token ID che consente l'accesso.</span><span class="sxs-lookup"><span data-stu-id="503ea-261">The user is redirected back to Web Application B with an ID token that grants them access.</span></span>
>
> <span data-ttu-id="503ea-262">Alle 13.00 l'utente tenta di accedere all'applicazione Web A e viene reindirizzato ad Azure AD.</span><span class="sxs-lookup"><span data-stu-id="503ea-262">At 1:00 PM, the user tries to access Web Application A. The user is redirected to Azure AD.</span></span> <span data-ttu-id="503ea-263">L'applicazione Web A non è collegata a criteri, ma si trova in un'organizzazione con criteri per la durata dei token 1 predefiniti. Vengono quindi applicati tali criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-263">Web Application A is not linked to any policies, but because it is in an organization with default Token Lifetime Policy 1, that policy takes effect.</span></span> <span data-ttu-id="503ea-264">Viene rilevato il cookie di sessione rilasciato nelle ultime otto ore.</span><span class="sxs-lookup"><span data-stu-id="503ea-264">The session cookie that was originally issued within the last eight hours is detected.</span></span> <span data-ttu-id="503ea-265">L'utente viene reindirizzato automaticamente all'applicazione Web A con un nuovo token ID.</span><span class="sxs-lookup"><span data-stu-id="503ea-265">The user is silently redirected back to Web Application A with a new ID token.</span></span> <span data-ttu-id="503ea-266">Non è necessario che l'utente esegua l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-266">The user is not required to authenticate.</span></span>
>
> <span data-ttu-id="503ea-267">Immediatamente dopo, l'utente prova ad accedere all'applicazione Web B e viene reindirizzato ad Azure AD.</span><span class="sxs-lookup"><span data-stu-id="503ea-267">Immediately afterward, the user tries to access Web Application B. The user is redirected to Azure AD.</span></span> <span data-ttu-id="503ea-268">Come prima, vengono applicati i criteri per la durata dei token 2.</span><span class="sxs-lookup"><span data-stu-id="503ea-268">As before, Token Lifetime Policy 2 takes effect.</span></span> <span data-ttu-id="503ea-269">Dato che il token è stato rilasciato da oltre 30 minuti, all'utente viene richiesto di immettere nuovamente le credenziali di accesso.</span><span class="sxs-lookup"><span data-stu-id="503ea-269">Because the token was issued more than 30 minutes ago, the user is prompted to reenter their sign-in credentials.</span></span> <span data-ttu-id="503ea-270">Vengono rilasciati un nuovo token di sessione e un nuovo token ID.</span><span class="sxs-lookup"><span data-stu-id="503ea-270">A brand-new session token and ID token are issued.</span></span> <span data-ttu-id="503ea-271">L'utente può quindi accedere all'applicazione Web B.</span><span class="sxs-lookup"><span data-stu-id="503ea-271">The user can then access Web Application B.</span></span>
>
>

## <a name="configurable-policy-property-details"></a><span data-ttu-id="503ea-272">Dettagli sulla proprietà dei criteri configurabili</span><span class="sxs-lookup"><span data-stu-id="503ea-272">Configurable policy property details</span></span>
### <a name="access-token-lifetime"></a><span data-ttu-id="503ea-273">Durata dei token di accesso</span><span class="sxs-lookup"><span data-stu-id="503ea-273">Access Token Lifetime</span></span>
<span data-ttu-id="503ea-274">**Stringa:** AccessTokenLifetime</span><span class="sxs-lookup"><span data-stu-id="503ea-274">**String:** AccessTokenLifetime</span></span>

<span data-ttu-id="503ea-275">**Impatto:** token di accesso, token ID</span><span class="sxs-lookup"><span data-stu-id="503ea-275">**Affects:** Access tokens, ID tokens</span></span>

<span data-ttu-id="503ea-276">**Riepilogo:** questo tipo di criteri controlla per quanto tempo i token di accesso e ID della risorsa sono considerati validi.</span><span class="sxs-lookup"><span data-stu-id="503ea-276">**Summary:** This policy controls how long access and ID tokens for this resource are considered valid.</span></span> <span data-ttu-id="503ea-277">Riducendo la proprietà Durata dei token di accesso è possibile ridurre il rischio che un token di accesso o un token ID vengano usati da un attore malintenzionato per un lungo periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="503ea-277">Reducing the Access Token Lifetime property mitigates the risk of an access token or ID token being used by a malicious actor for an extended period of time.</span></span> <span data-ttu-id="503ea-278">Questi token non possono essere revocati. Questo però influisce negativamente sulle prestazioni, perché è necessario sostituire i token più spesso.</span><span class="sxs-lookup"><span data-stu-id="503ea-278">(These tokens cannot be revoked.) The trade-off is that performance is adversely affected, because the tokens have to be replaced more often.</span></span>

### <a name="refresh-token-max-inactive-time"></a><span data-ttu-id="503ea-279">Tempo inattività massimo token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="503ea-279">Refresh Token Max Inactive Time</span></span>
<span data-ttu-id="503ea-280">**Stringa:** MaxInactiveTime</span><span class="sxs-lookup"><span data-stu-id="503ea-280">**String:** MaxInactiveTime</span></span>

<span data-ttu-id="503ea-281">**Impatto:** token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="503ea-281">**Affects:** Refresh tokens</span></span>

<span data-ttu-id="503ea-282">**Riepilogo:** questo tipo di criteri controlla dopo quanto tempo dall'emissione un token di aggiornamento non potrà più essere usato da un client per il recupero di una nuova coppia di token di accesso/aggiornamento quando tenterà di accedere alla risorsa.</span><span class="sxs-lookup"><span data-stu-id="503ea-282">**Summary:** This policy controls how old a refresh token can be before a client can no longer use it to retrieve a new access/refresh token pair when attempting to access this resource.</span></span> <span data-ttu-id="503ea-283">Dal momento che quando viene usato un token di aggiornamento ne viene in genere restituito uno nuovo, questi criteri impediscono l'accesso se il client prova ad accedere a qualsiasi risorsa con il token di aggiornamento corrente durante il periodo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="503ea-283">Because a new refresh token usually is returned when a refresh token is used, this policy prevents access if the client tries to access any resource by using the current refresh token during the specified period of time.</span></span>

<span data-ttu-id="503ea-284">Questi criteri impongono agli utenti che non hanno svolto attività sul client nel tempo specificato di eseguire di nuovo l'autenticazione per recuperare un nuovo token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="503ea-284">This policy forces users who have not been active on their client to reauthenticate to retrieve a new refresh token.</span></span>

<span data-ttu-id="503ea-285">La proprietà Tempo inattività massimo token di aggiornamento deve essere impostata su un valore inferiore rispetto alle proprietà Validità massima token a fattore singolo e Validità massima token di aggiornamento a più fattori.</span><span class="sxs-lookup"><span data-stu-id="503ea-285">The Refresh Token Max Inactive Time property must be set to a lower value than the Single-Factor Token Max Age and the Multi-Factor Refresh Token Max Age properties.</span></span>

### <a name="single-factor-refresh-token-max-age"></a><span data-ttu-id="503ea-286">Validità massima token di aggiornamento a fattore singolo</span><span class="sxs-lookup"><span data-stu-id="503ea-286">Single-Factor Refresh Token Max Age</span></span>
<span data-ttu-id="503ea-287">**String:** MaxAgeSingleFactor</span><span class="sxs-lookup"><span data-stu-id="503ea-287">**String:** MaxAgeSingleFactor</span></span>

<span data-ttu-id="503ea-288">**Impatto:** token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="503ea-288">**Affects:** Refresh tokens</span></span>

<span data-ttu-id="503ea-289">**Riepilogo:** questo tipo di criteri controlla per quanto tempo un utente può usare un token di aggiornamento per ottenere una nuova coppia di token di accesso/aggiornamento dopo l'ultima autenticazione a fattore singolo.</span><span class="sxs-lookup"><span data-stu-id="503ea-289">**Summary:** This policy controls how long a user can use a refresh token to get a new access/refresh token pair after they last authenticated successfully by using only a single factor.</span></span> <span data-ttu-id="503ea-290">Dopo aver eseguito l'autenticazione e aver ricevuto un nuovo token di aggiornamento, l'utente può usare il flusso del token di aggiornamento per il periodo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="503ea-290">After a user authenticates and receives a new refresh token, the user can use the refresh token flow for the specified period of time.</span></span> <span data-ttu-id="503ea-291">Questo purché il token di aggiornamento corrente non venga revocato e non rimanga inutilizzato oltre il tempo di inattività. A questo punto, l'utente deve eseguire di nuovo l'autenticazione per ricevere un nuovo token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="503ea-291">(This is true as long as the current refresh token is not revoked, and it is not left unused for longer than the inactive time.) At that point, the user is forced to reauthenticate to receive a new refresh token.</span></span>

<span data-ttu-id="503ea-292">Riducendo la validità massima, gli utenti devono eseguire l'autenticazione più spesso.</span><span class="sxs-lookup"><span data-stu-id="503ea-292">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="503ea-293">Dal momento che l'autenticazione a fattore singolo è considerata meno sicura dell'autenticazione a più fattori, è consigliabile impostare questa proprietà su un valore minore o uguale a quello della proprietà Validità massima token di aggiornamento a più fattori.</span><span class="sxs-lookup"><span data-stu-id="503ea-293">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or lesser than the Multi-Factor Refresh Token Max Age property.</span></span>

### <a name="multi-factor-refresh-token-max-age"></a><span data-ttu-id="503ea-294">Validità massima token di aggiornamento a più fattori</span><span class="sxs-lookup"><span data-stu-id="503ea-294">Multi-Factor Refresh Token Max Age</span></span>
<span data-ttu-id="503ea-295">**Strings:** MaxAgeMultiFactor</span><span class="sxs-lookup"><span data-stu-id="503ea-295">**String:** MaxAgeMultiFactor</span></span>

<span data-ttu-id="503ea-296">**Impatto:** token di aggiornamento</span><span class="sxs-lookup"><span data-stu-id="503ea-296">**Affects:** Refresh tokens</span></span>

<span data-ttu-id="503ea-297">**Riepilogo:** questo tipo di criteri controlla per quanto tempo un utente può usare un token di aggiornamento per ottenere una nuova coppia di token di accesso/aggiornamento dopo l'ultima autenticazione a più fattori.</span><span class="sxs-lookup"><span data-stu-id="503ea-297">**Summary:** This policy controls how long a user can use a refresh token to get a new access/refresh token pair after they last authenticated successfully by using multiple factors.</span></span> <span data-ttu-id="503ea-298">Dopo aver eseguito l'autenticazione e aver ricevuto un nuovo token di aggiornamento, l'utente può usare il flusso del token di aggiornamento per il periodo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="503ea-298">After a user authenticates and receives a new refresh token, the user can use the refresh token flow for the specified period of time.</span></span> <span data-ttu-id="503ea-299">Questo purché il token di aggiornamento corrente non venga revocato e non rimanga inutilizzato oltre il tempo di inattività. A questo punto, gli utenti devono eseguire di nuovo l'autenticazione per ricevere un nuovo token di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="503ea-299">(This is true as long as the current refresh token is not revoked, and it is not unused for longer than the inactive time.) At that point, users are forced to reauthenticate to receive a new refresh token.</span></span>

<span data-ttu-id="503ea-300">Riducendo la validità massima, gli utenti devono eseguire l'autenticazione più spesso.</span><span class="sxs-lookup"><span data-stu-id="503ea-300">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="503ea-301">Dal momento che l'autenticazione a fattore singolo è considerata meno sicura dell'autenticazione a più fattori, è consigliabile impostare questa proprietà su un valore maggiore o uguale a quello della proprietà Validità massima token di aggiornamento a fattore singolo.</span><span class="sxs-lookup"><span data-stu-id="503ea-301">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or greater than the Single-Factor Refresh Token Max Age property.</span></span>

### <a name="single-factor-session-token-max-age"></a><span data-ttu-id="503ea-302">Validità massima token di sessione a fattore singolo</span><span class="sxs-lookup"><span data-stu-id="503ea-302">Single-Factor Session Token Max Age</span></span>
<span data-ttu-id="503ea-303">**Stringa** MaxAgeSessionSingleFactor</span><span class="sxs-lookup"><span data-stu-id="503ea-303">**String:** MaxAgeSessionSingleFactor</span></span>

<span data-ttu-id="503ea-304">**Impatto:** token di sessione (permanenti e non permanenti)</span><span class="sxs-lookup"><span data-stu-id="503ea-304">**Affects:** Session tokens (persistent and nonpersistent)</span></span>

<span data-ttu-id="503ea-305">**Riepilogo:** questo tipo di criteri controlla per quanto tempo un utente può usare un token di sessione per ottenere un nuovo token ID e un nuovo token di sessione dopo l'ultima autenticazione a fattore singolo.</span><span class="sxs-lookup"><span data-stu-id="503ea-305">**Summary:** This policy controls how long a user can use a session token to get a new ID and session token after they last authenticated successfully by using only a single factor.</span></span> <span data-ttu-id="503ea-306">Dopo aver eseguito l'autenticazione e aver ricevuto un nuovo token di sessione, l'utente può usare il flusso del token di sessione per il periodo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="503ea-306">After a user authenticates and receives a new session token, the user can use the session token flow for the specified period of time.</span></span> <span data-ttu-id="503ea-307">Questo purché il token di sessione corrente non venga revocato e non sia scaduto. Dopo il periodo di tempo specificato, l'utente deve eseguire di nuovo l'autenticazione per ricevere un nuovo token di sessione.</span><span class="sxs-lookup"><span data-stu-id="503ea-307">(This is true as long as the current session token is not revoked and has not expired.) After the specified period of time, the user is forced to reauthenticate to receive a new session token.</span></span>

<span data-ttu-id="503ea-308">Riducendo la validità massima, gli utenti devono eseguire l'autenticazione più spesso.</span><span class="sxs-lookup"><span data-stu-id="503ea-308">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="503ea-309">Dal momento che l'autenticazione a fattore singolo è considerata meno sicura dell'autenticazione a più fattori, è consigliabile impostare questa proprietà su un valore minore o uguale a quello della proprietà Validità massima token di sessione a più fattori.</span><span class="sxs-lookup"><span data-stu-id="503ea-309">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or less than the Multi-Factor Session Token Max Age property.</span></span>

### <a name="multi-factor-session-token-max-age"></a><span data-ttu-id="503ea-310">Validità massima token di sessione a più fattori</span><span class="sxs-lookup"><span data-stu-id="503ea-310">Multi-Factor Session Token Max Age</span></span>
<span data-ttu-id="503ea-311">**Stringa:** MaxAgeSessionMultiFactor</span><span class="sxs-lookup"><span data-stu-id="503ea-311">**String:** MaxAgeSessionMultiFactor</span></span>

<span data-ttu-id="503ea-312">**Impatto:** token di sessione (permanenti e non permanenti)</span><span class="sxs-lookup"><span data-stu-id="503ea-312">**Affects:** Session tokens (persistent and nonpersistent)</span></span>

<span data-ttu-id="503ea-313">**Riepilogo:** questo tipo di criteri controlla per quanto tempo un utente può usare un token di sessione per ottenere un nuovo token ID e un nuovo token di sessione dopo l'ultima autenticazione a più fattori.</span><span class="sxs-lookup"><span data-stu-id="503ea-313">**Summary:** This policy controls how long a user can use a session token to get a new ID and session token after the last time they authenticated successfully by using multiple factors.</span></span> <span data-ttu-id="503ea-314">Dopo aver eseguito l'autenticazione e aver ricevuto un nuovo token di sessione, l'utente può usare il flusso del token di sessione per il periodo di tempo specificato.</span><span class="sxs-lookup"><span data-stu-id="503ea-314">After a user authenticates and receives a new session token, the user can use the session token flow for the specified period of time.</span></span> <span data-ttu-id="503ea-315">Questo purché il token di sessione corrente non venga revocato e non sia scaduto. Dopo il periodo di tempo specificato, l'utente deve eseguire di nuovo l'autenticazione per ricevere un nuovo token di sessione.</span><span class="sxs-lookup"><span data-stu-id="503ea-315">(This is true as long as the current session token is not revoked and has not expired.) After the specified period of time, the user is forced to reauthenticate to receive a new session token.</span></span>

<span data-ttu-id="503ea-316">Riducendo la validità massima, gli utenti devono eseguire l'autenticazione più spesso.</span><span class="sxs-lookup"><span data-stu-id="503ea-316">Reducing the max age forces users to authenticate more often.</span></span> <span data-ttu-id="503ea-317">Dal momento che l'autenticazione a fattore singolo è considerata meno sicura dell'autenticazione a più fattori, è consigliabile impostare questa proprietà su un valore maggiore o uguale a quello della proprietà Validità massima token di sessione a fattore singolo.</span><span class="sxs-lookup"><span data-stu-id="503ea-317">Because single-factor authentication is considered less secure than multi-factor authentication, we recommend that you set this property to a value that is equal to or greater than the Single-Factor Session Token Max Age property.</span></span>

## <a name="example-token-lifetime-policies"></a><span data-ttu-id="503ea-318">Criteri per la durata dei token di esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-318">Example token lifetime policies</span></span>
<span data-ttu-id="503ea-319">In Azure AD sono disponibili diversi scenari che permettono di creare e gestire la durata dei token per le app, le entità servizio e l'intera organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-319">Many scenarios are possible in Azure AD when you can create and manage token lifetimes for apps, service principals, and your overall organization.</span></span> <span data-ttu-id="503ea-320">Questa sezione illustra alcuni scenari comuni relativi ai criteri che consentono di definire nuove regole per:</span><span class="sxs-lookup"><span data-stu-id="503ea-320">In this section, we walk through a few common policy scenarios that can help you impose new rules for:</span></span>

* <span data-ttu-id="503ea-321">Durata del token</span><span class="sxs-lookup"><span data-stu-id="503ea-321">Token Lifetime</span></span>
* <span data-ttu-id="503ea-322">Tempo di inattività massimo del token</span><span class="sxs-lookup"><span data-stu-id="503ea-322">Token Max Inactive Time</span></span>
* <span data-ttu-id="503ea-323">Validità massima del token</span><span class="sxs-lookup"><span data-stu-id="503ea-323">Token Max Age</span></span>

<span data-ttu-id="503ea-324">Gli esempi illustrano come:</span><span class="sxs-lookup"><span data-stu-id="503ea-324">In the examples, you can learn how to:</span></span>

* <span data-ttu-id="503ea-325">Gestire i criteri predefiniti di un'organizzazione</span><span class="sxs-lookup"><span data-stu-id="503ea-325">Manage an organization's default policy</span></span>
* <span data-ttu-id="503ea-326">Creare criteri per l'accesso Web</span><span class="sxs-lookup"><span data-stu-id="503ea-326">Create a policy for web sign-in</span></span>
* <span data-ttu-id="503ea-327">Creare criteri per un'app nativa che chiama un'API Web</span><span class="sxs-lookup"><span data-stu-id="503ea-327">Create a policy for a native app that calls a web API</span></span>
* <span data-ttu-id="503ea-328">Gestire criteri avanzati</span><span class="sxs-lookup"><span data-stu-id="503ea-328">Manage an advanced policy</span></span>

### <a name="prerequisites"></a><span data-ttu-id="503ea-329">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="503ea-329">Prerequisites</span></span>
<span data-ttu-id="503ea-330">Gli esempi seguenti mostrano come creare, aggiornare, collegare ed eliminare criteri per le app, le entità servizio e l'intera organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-330">In the following examples, you create, update, link, and delete policies for apps, service principals, and your overall organization.</span></span> <span data-ttu-id="503ea-331">Se non si ha familiarità con Azure AD, è consigliabile vedere [come ottenere un tenant di Azure AD](active-directory-howto-tenant.md) prima di procedere con questi esempi.</span><span class="sxs-lookup"><span data-stu-id="503ea-331">If you are new to Azure AD, we recommend that you learn about [how to get an Azure AD tenant](active-directory-howto-tenant.md) before you proceed with these examples.</span></span>  

<span data-ttu-id="503ea-332">Per iniziare, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="503ea-332">To get started, do the following steps:</span></span>

1. <span data-ttu-id="503ea-333">Scaricare l'ultima [versione di anteprima del modulo Azure AD PowerShell](https://www.powershellgallery.com/packages/AzureADPreview).</span><span class="sxs-lookup"><span data-stu-id="503ea-333">Download the latest [Azure AD PowerShell Module Public Preview release](https://www.powershellgallery.com/packages/AzureADPreview).</span></span>
2. <span data-ttu-id="503ea-334">Eseguire il comando `Connect` per accedere all'account amministratore di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="503ea-334">Run the `Connect` command to sign in to your Azure AD admin account.</span></span> <span data-ttu-id="503ea-335">Eseguire questo comando ogni volta che si avvia una nuova sessione.</span><span class="sxs-lookup"><span data-stu-id="503ea-335">Run this command each time you start a new session.</span></span>

    ```PowerShell
    Connect-AzureAD -Confirm
    ```

3. <span data-ttu-id="503ea-336">Per visualizzare tutti i criteri creati nell'organizzazione, eseguire questo comando.</span><span class="sxs-lookup"><span data-stu-id="503ea-336">To see all policies that have been created in your organization, run the following command.</span></span> <span data-ttu-id="503ea-337">Questo comando va usato dopo la maggior parte delle operazioni negli scenari indicato di seguito</span><span class="sxs-lookup"><span data-stu-id="503ea-337">Run this command after most operations in the following scenarios.</span></span> <span data-ttu-id="503ea-338">L'esecuzione del comando consente anche di ottenere ** ** dei criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-338">Running the command also helps you get the ** ** of your policies.</span></span>

    ```PowerShell
    Get-AzureADPolicy
    ```

### <a name="example-manage-an-organizations-default-policy"></a><span data-ttu-id="503ea-339">Esempio: gestire i criteri predefiniti di un'organizzazione</span><span class="sxs-lookup"><span data-stu-id="503ea-339">Example: Manage an organization's default policy</span></span>
<span data-ttu-id="503ea-340">In questo esempio vengono creati criteri che permettono agli utenti di eseguire l'accesso con una frequenza minore nell'intera organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-340">In this example, you create a policy that lets your users sign in less frequently across your entire organization.</span></span> <span data-ttu-id="503ea-341">A tale scopo, vengono creati criteri per la durata dei token di aggiornamento a fattore singolo che vengono applicati a tutta l'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-341">To do this, create a token lifetime policy for Single-Factor Refresh Tokens, which is applied across your organization.</span></span> <span data-ttu-id="503ea-342">Tali criteri vengono applicati a ogni applicazione nell'organizzazione e a ogni entità servizio per cui ancora non sono impostati criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-342">The policy is applied to every application in your organization, and to each service principal that doesn’t already have a policy set.</span></span>

1. <span data-ttu-id="503ea-343">Creare i criteri per la durata dei token.</span><span class="sxs-lookup"><span data-stu-id="503ea-343">Create a token lifetime policy.</span></span>

    1.  <span data-ttu-id="503ea-344">Impostare il token di aggiornamento a fattore singolo in modo che sia valido fino alla revoca.</span><span class="sxs-lookup"><span data-stu-id="503ea-344">Set the Single-Factor Refresh Token to "until-revoked."</span></span> <span data-ttu-id="503ea-345">In questo modo il token non scade fino a quando non viene revocato l'accesso.</span><span class="sxs-lookup"><span data-stu-id="503ea-345">The token doesn't expire until access is revoked.</span></span> <span data-ttu-id="503ea-346">Creare la definizione dei criteri seguente:</span><span class="sxs-lookup"><span data-stu-id="503ea-346">Create the following policy definition:</span></span>

        ```PowerShell
        @('{
            "TokenLifetimePolicy":
            {
                "Version":1,
                "MaxAgeSingleFactor":"until-revoked"
            }
        }')
        ```

    2.  <span data-ttu-id="503ea-347">Per creare i criteri, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-347">To create the policy, run the following command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1, "MaxAgeSingleFactor":"until-revoked"}}') -DisplayName "OrganizationDefaultPolicyScenario" -IsOrganizationDefault $true -Type "TokenLifetimePolicy"
        ```

    3.  <span data-ttu-id="503ea-348">Per visualizzare i nuovi criteri e ottenere il relativo **ObjectId**, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-348">To see your new policy, and to get the policy's **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2. <span data-ttu-id="503ea-349">Aggiornare i criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-349">Update the policy.</span></span>

    <span data-ttu-id="503ea-350">Il primo criterio impostato in questo esempio potrebbe non essere rigoroso quanto richiesto dal servizio.</span><span class="sxs-lookup"><span data-stu-id="503ea-350">You might decide that the first policy you set in this example is not as strict as your service requires.</span></span> <span data-ttu-id="503ea-351">Per impostare il token di aggiornamento a fattore singolo in modo che scada tra due giorni, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-351">To set your Single-Factor Refresh Token to expire in two days, run the following command:</span></span>

    ```PowerShell
    Set-AzureADPolicy -Id <ObjectId FROM GET COMMAND> -DisplayName "OrganizationDefaultPolicyUpdatedScenario" -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxAgeSingleFactor":"2.00:00:00"}}')
    ```

### <a name="example-create-a-policy-for-web-sign-in"></a><span data-ttu-id="503ea-352">Esempio: creare criteri per l'accesso Web</span><span class="sxs-lookup"><span data-stu-id="503ea-352">Example: Create a policy for web sign-in</span></span>

<span data-ttu-id="503ea-353">In questo esempio vengono creati i criteri in base ai quali viene richiesto agli utenti di eseguire più spesso l'autenticazione nell'app Web.</span><span class="sxs-lookup"><span data-stu-id="503ea-353">In this example, you create a policy that requires users to authenticate more frequently in your web app.</span></span> <span data-ttu-id="503ea-354">Questi criteri consentono di impostare la durata dei token di accesso/ID e la validità massima di un token di sessione a più fattori per l'entità servizio dell'app Web.</span><span class="sxs-lookup"><span data-stu-id="503ea-354">This policy sets the lifetime of the access/ID tokens and the max age of a multi-factor session token to the service principal of your web app.</span></span>

1. <span data-ttu-id="503ea-355">Creare i criteri per la durata dei token.</span><span class="sxs-lookup"><span data-stu-id="503ea-355">Create a token lifetime policy.</span></span>

    <span data-ttu-id="503ea-356">Questi criteri per l'accesso Web consentono di impostare su due ore la durata dei token di accesso/ID e la validità massima di un token di sessione a fattore singolo.</span><span class="sxs-lookup"><span data-stu-id="503ea-356">This policy, for web sign-in, sets the access/ID token lifetime and the max single-factor session token age to two hours.</span></span>

    1.  <span data-ttu-id="503ea-357">Per creare i criteri, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-357">To create the policy, run this command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"AccessTokenLifetime":"02:00:00","MaxAgeSessionSingleFactor":"02:00:00"}}') -DisplayName "WebPolicyScenario" -IsOrganizationDefault $false -Type "TokenLifetimePolicy"
        ```

    2.  <span data-ttu-id="503ea-358">Per visualizzare i nuovi criteri e ottenere il relativo **ObjectId**, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-358">To see your new policy, and to get the policy **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2.  <span data-ttu-id="503ea-359">Assegnare i criteri all'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="503ea-359">Assign the policy to your service principal.</span></span> <span data-ttu-id="503ea-360">È necessario ottenere anche l'**ObjectId** dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="503ea-360">You also need to get the **ObjectId** of your service principal.</span></span> 

    1.  <span data-ttu-id="503ea-361">Per visualizzare tutte le entità servizio dell'organizzazione, è possibile eseguire query in [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span><span class="sxs-lookup"><span data-stu-id="503ea-361">To see all your organization's service principals, you can query [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span></span> <span data-ttu-id="503ea-362">In alternativa, eseguire l'accesso con l'account Azure AD dallo strumento [Graph Explorer di Azure AD](https://graphexplorer.cloudapp.net/).</span><span class="sxs-lookup"><span data-stu-id="503ea-362">Or, in [Azure AD Graph Explorer](https://graphexplorer.cloudapp.net/), sign in to your Azure AD account.</span></span>

    2.  <span data-ttu-id="503ea-363">Dopo aver ottenuto l'**ObjectId** dell'entità servizio, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-363">When you have the **ObjectId** of your service principal, run the following command:</span></span>

        ```PowerShell
        Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
        ```


### <a name="example-create-a-policy-for-a-native-app-that-calls-a-web-api"></a><span data-ttu-id="503ea-364">Esempio: creare criteri per un'app nativa che chiama un'API Web</span><span class="sxs-lookup"><span data-stu-id="503ea-364">Example: Create a policy for a native app that calls a web API</span></span>
<span data-ttu-id="503ea-365">In questo esempio vengono creati i criteri in base ai quali viene richiesto agli utenti di eseguire l'autenticazione con minore frequenza.</span><span class="sxs-lookup"><span data-stu-id="503ea-365">In this example, you create a policy that requires users to authenticate less frequently.</span></span> <span data-ttu-id="503ea-366">Questi criteri prolungano anche l'intervallo di tempo di inattività dell'utente prima che sia necessario rieseguire l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-366">The policy also lengthens the amount of time a user can be inactive before the user must reauthenticate.</span></span> <span data-ttu-id="503ea-367">I criteri vengono applicati all'API web.</span><span class="sxs-lookup"><span data-stu-id="503ea-367">The policy is applied to the web API.</span></span> <span data-ttu-id="503ea-368">Quando l'app nativa richiede l'API Web come risorsa, vengono applicati questi criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-368">When the native app requests the web API as a resource, this policy is applied.</span></span>

1. <span data-ttu-id="503ea-369">Creare i criteri per la durata dei token.</span><span class="sxs-lookup"><span data-stu-id="503ea-369">Create a token lifetime policy.</span></span>

    1.  <span data-ttu-id="503ea-370">Per creare criteri rigidi per un'API Web, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-370">To create a strict policy for a web API, run the following command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxInactiveTime":"30.00:00:00","MaxAgeMultiFactor":"until-revoked","MaxAgeSingleFactor":"180.00:00:00"}}') -DisplayName "WebApiDefaultPolicyScenario" -IsOrganizationDefault $false -Type "TokenLifetimePolicy"
        ```

    2.  <span data-ttu-id="503ea-371">Per visualizzare i nuovi criteri e ottenere il relativo **ObjectId**, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-371">To see your new policy, and to get the policy **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2. <span data-ttu-id="503ea-372">Assegnare i criteri all'API Web.</span><span class="sxs-lookup"><span data-stu-id="503ea-372">Assign the policy to your web API.</span></span> <span data-ttu-id="503ea-373">È necessario ottenere anche l'**ObjectId** dell'app.</span><span class="sxs-lookup"><span data-stu-id="503ea-373">You also need to get the **ObjectId** of your application.</span></span> <span data-ttu-id="503ea-374">Il modo migliore per trovare l'**ObjectId** dell'app è tramite il [portale di Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="503ea-374">The best way to find your app's **ObjectId** is to use the [Azure portal](https://portal.azure.com/).</span></span>

   <span data-ttu-id="503ea-375">Dopo aver ottenuto l'**ObjectId** dell'app, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-375">When you have the **ObjectId** of your app, run the following command:</span></span>

        ```PowerShell
        Add-AzureADApplicationPolicy -Id <ObjectId of the Application> -RefObjectId <ObjectId of the Policy>
        ```


### <a name="example-manage-an-advanced-policy"></a><span data-ttu-id="503ea-376">Esempio: gestire criteri avanzati</span><span class="sxs-lookup"><span data-stu-id="503ea-376">Example: Manage an advanced policy</span></span>
<span data-ttu-id="503ea-377">In questo esempio vengono creati alcuni criteri per illustrare il funzionamento del sistema di priorità.</span><span class="sxs-lookup"><span data-stu-id="503ea-377">In this example, you create a few policies, to learn how the priority system works.</span></span> <span data-ttu-id="503ea-378">Viene illustrato anche come gestire più criteri applicati a vari oggetti.</span><span class="sxs-lookup"><span data-stu-id="503ea-378">You also can learn how to manage multiple policies that are applied to several objects.</span></span>

1. <span data-ttu-id="503ea-379">Creare i criteri per la durata dei token.</span><span class="sxs-lookup"><span data-stu-id="503ea-379">Create a token lifetime policy.</span></span>

    1.  <span data-ttu-id="503ea-380">Per creare i criteri predefiniti di un'organizzazione in base ai quali la durata dei token di aggiornamento a fattore singolo è impostata su 30 giorni, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-380">To create an organization default policy that sets the Single-Factor Refresh Token lifetime to 30 days, run the following command:</span></span>

        ```PowerShell
        New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxAgeSingleFactor":"30.00:00:00"}}') -DisplayName "ComplexPolicyScenario" -IsOrganizationDefault $true -Type "TokenLifetimePolicy"
        ```

    2.  <span data-ttu-id="503ea-381">Per visualizzare i nuovi criteri e ottenere il relativo **ObjectId**, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-381">To see your new policy, and to get the policy's **ObjectId**, run the following command:</span></span>

        ```PowerShell
        Get-AzureADPolicy
        ```

2. <span data-ttu-id="503ea-382">Assegnare i criteri a un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="503ea-382">Assign the policy to a service principal.</span></span>

    <span data-ttu-id="503ea-383">A questo punto sono disponibili criteri che si applicano all'intera organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-383">Now, you have a policy that applies to the entire organization.</span></span> <span data-ttu-id="503ea-384">Si supponga di voler conservare tali criteri della durata di 30 giorni per un'entità servizio specifica, impostando però i criteri predefiniti dell'organizzazione sul valore limite superiore, ovvero fino alla revoca.</span><span class="sxs-lookup"><span data-stu-id="503ea-384">You might want to preserve this 30-day policy for a specific service principal, but change the organization default policy to the upper limit of "until-revoked."</span></span>

    1.  <span data-ttu-id="503ea-385">Per visualizzare tutte le entità servizio dell'organizzazione, è possibile eseguire query in [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span><span class="sxs-lookup"><span data-stu-id="503ea-385">To see all your organization's service principals, you can query [Microsoft Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/entity-and-complex-type-reference#serviceprincipal-entity).</span></span> <span data-ttu-id="503ea-386">In alternativa, eseguire l'accesso con l'account Azure AD dallo strumento [Graph Explorer di Azure AD](https://graphexplorer.cloudapp.net/).</span><span class="sxs-lookup"><span data-stu-id="503ea-386">Or, in [Azure AD Graph Explorer](https://graphexplorer.cloudapp.net/), sign in by using your Azure AD account.</span></span>

    2.  <span data-ttu-id="503ea-387">Dopo aver ottenuto l'**ObjectId** dell'entità servizio, eseguire questo comando:</span><span class="sxs-lookup"><span data-stu-id="503ea-387">When you have the **ObjectId** of your service principal, run the following command:</span></span>

            ```PowerShell
            Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
            ```
        
3. <span data-ttu-id="503ea-388">Impostare il flag `IsOrganizationDefault` su false.</span><span class="sxs-lookup"><span data-stu-id="503ea-388">Set the `IsOrganizationDefault` flag to false:</span></span>

    ```PowerShell
    Set-AzureADPolicy -Id <ObjectId of Policy> -DisplayName "ComplexPolicyScenario" -IsOrganizationDefault $false
    ```

4. <span data-ttu-id="503ea-389">Creare nuovi criteri predefiniti dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-389">Create a new organization default policy:</span></span>

    ```PowerShell
    New-AzureADPolicy -Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxAgeSingleFactor":"until-revoked"}}') -DisplayName "ComplexPolicyScenarioTwo" -IsOrganizationDefault $true -Type "TokenLifetimePolicy"
    ```

    <span data-ttu-id="503ea-390">I criteri originali sono ora collegati all'entità servizio e i nuovi criteri sono impostati come criteri predefiniti dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-390">You now have the original policy linked to your service principal, and the new policy is set as your organization default policy.</span></span> <span data-ttu-id="503ea-391">È importante ricordare che i criteri applicati alle entità servizio hanno priorità rispetto a quelli predefiniti dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-391">It's important to remember that policies applied to service principals have priority over organization default policies.</span></span>

## <a name="cmdlet-reference"></a><span data-ttu-id="503ea-392">Informazioni di riferimento sui cmdlet</span><span class="sxs-lookup"><span data-stu-id="503ea-392">Cmdlet reference</span></span>

### <a name="manage-policies"></a><span data-ttu-id="503ea-393">Gestire i criteri</span><span class="sxs-lookup"><span data-stu-id="503ea-393">Manage policies</span></span>

<span data-ttu-id="503ea-394">È possibile usare i cmdlet riportati di seguito per gestire i criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-394">You can use the following cmdlets to manage policies.</span></span>

#### <a name="new-azureadpolicy"></a><span data-ttu-id="503ea-395">New-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-395">New-AzureADPolicy</span></span>

<span data-ttu-id="503ea-396">Crea nuovi criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-396">Creates a new policy.</span></span>

```PowerShell
New-AzureADPolicy -Definition <Array of Rules> -DisplayName <Name of Policy> -IsOrganizationDefault <boolean> -Type <Policy Type>
```

| <span data-ttu-id="503ea-397">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-397">Parameters</span></span> | <span data-ttu-id="503ea-398">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-398">Description</span></span> | <span data-ttu-id="503ea-399">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-399">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Definition</code> |<span data-ttu-id="503ea-400">Matrice del codice JSON in formato stringa contenente tutte le regole dei criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-400">Array of stringified JSON that contains all the policy's rules.</span></span> | `-Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxInactiveTime":"20:00:00"}}')` |
| <code>&#8209;DisplayName</code> |<span data-ttu-id="503ea-401">Stringa relativa al nome dei criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-401">String of the policy name.</span></span> |`-DisplayName "MyTokenPolicy"` |
| <code>&#8209;IsOrganizationDefault</code> |<span data-ttu-id="503ea-402">Se true, imposta i criteri come predefiniti dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-402">If true, sets the policy as the organization's default policy.</span></span> <span data-ttu-id="503ea-403">Se false, non esegue alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-403">If false, does nothing.</span></span> |`-IsOrganizationDefault $true` |
| <code>&#8209;Type</code> |<span data-ttu-id="503ea-404">Tipo di criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-404">Type of policy.</span></span> <span data-ttu-id="503ea-405">Per la durata dei token usare sempre "TokenLifetimePolicy".</span><span class="sxs-lookup"><span data-stu-id="503ea-405">For token lifetimes, always use "TokenLifetimePolicy."</span></span> | `-Type "TokenLifetimePolicy"` |
| <span data-ttu-id="503ea-406"><code>&#8209;AlternativeIdentifier</code>[Facoltativo]</span><span class="sxs-lookup"><span data-stu-id="503ea-406"><code>&#8209;AlternativeIdentifier</code> [Optional]</span></span> |<span data-ttu-id="503ea-407">Imposta un ID alternativo per i criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-407">Sets an alternative ID for the policy.</span></span> |`-AlternativeIdentifier "myAltId"` |

</br></br>

#### <a name="get-azureadpolicy"></a><span data-ttu-id="503ea-408">Get-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-408">Get-AzureADPolicy</span></span>
<span data-ttu-id="503ea-409">Ottiene tutti i criteri di Azure AD o i criteri specificati.</span><span class="sxs-lookup"><span data-stu-id="503ea-409">Gets all Azure AD policies or a specified policy.</span></span>

```PowerShell
Get-AzureADPolicy
```

| <span data-ttu-id="503ea-410">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-410">Parameters</span></span> | <span data-ttu-id="503ea-411">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-411">Description</span></span> | <span data-ttu-id="503ea-412">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-412">Example</span></span> |
| --- | --- | --- |
| <span data-ttu-id="503ea-413"><code>&#8209;Id</code>[Facoltativo]</span><span class="sxs-lookup"><span data-stu-id="503ea-413"><code>&#8209;Id</code> [Optional]</span></span> |<span data-ttu-id="503ea-414">**ObjectId (Id)** dei criteri da usare.</span><span class="sxs-lookup"><span data-stu-id="503ea-414">**ObjectId (Id)** of the policy you want.</span></span> |`-Id <ObjectId of Policy>` |

</br></br>

#### <a name="get-azureadpolicyappliedobject"></a><span data-ttu-id="503ea-415">Get-AzureADPolicyAppliedObject</span><span class="sxs-lookup"><span data-stu-id="503ea-415">Get-AzureADPolicyAppliedObject</span></span>
<span data-ttu-id="503ea-416">Ottiene tutte le app e le entità servizio collegate a criteri specifici.</span><span class="sxs-lookup"><span data-stu-id="503ea-416">Gets all apps and service principals that are linked to a policy.</span></span>

```PowerShell
Get-AzureADPolicyAppliedObject -Id <ObjectId of Policy>
```

| <span data-ttu-id="503ea-417">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-417">Parameters</span></span> | <span data-ttu-id="503ea-418">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-418">Description</span></span> | <span data-ttu-id="503ea-419">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-419">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="503ea-420">**ObjectId (Id)** dei criteri da usare.</span><span class="sxs-lookup"><span data-stu-id="503ea-420">**ObjectId (Id)** of the policy you want.</span></span> |`-Id <ObjectId of Policy>` |

</br></br>

#### <a name="set-azureadpolicy"></a><span data-ttu-id="503ea-421">Set-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-421">Set-AzureADPolicy</span></span>
<span data-ttu-id="503ea-422">Aggiorna i criteri esistenti.</span><span class="sxs-lookup"><span data-stu-id="503ea-422">Updates an existing policy.</span></span>

```PowerShell
Set-AzureADPolicy -Id <ObjectId of Policy> -DisplayName <string>
```

| <span data-ttu-id="503ea-423">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-423">Parameters</span></span> | <span data-ttu-id="503ea-424">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-424">Description</span></span> | <span data-ttu-id="503ea-425">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-425">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="503ea-426">**ObjectId (Id)** dei criteri da usare.</span><span class="sxs-lookup"><span data-stu-id="503ea-426">**ObjectId (Id)** of the policy you want.</span></span> |`-Id <ObjectId of Policy>` |
| <code>&#8209;DisplayName</code> |<span data-ttu-id="503ea-427">Stringa relativa al nome dei criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-427">String of the policy name.</span></span> |`-DisplayName "MyTokenPolicy"` |
| <span data-ttu-id="503ea-428"><code>&#8209;Definition</code>[Facoltativo]</span><span class="sxs-lookup"><span data-stu-id="503ea-428"><code>&#8209;Definition</code> [Optional]</span></span> |<span data-ttu-id="503ea-429">Matrice del codice JSON in formato stringa contenente tutte le regole dei criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-429">Array of stringified JSON that contains all the policy's rules.</span></span> |`-Definition @('{"TokenLifetimePolicy":{"Version":1,"MaxInactiveTime":"20:00:00"}}')` |
| <span data-ttu-id="503ea-430"><code>&#8209;IsOrganizationDefault</code>[Facoltativo]</span><span class="sxs-lookup"><span data-stu-id="503ea-430"><code>&#8209;IsOrganizationDefault</code> [Optional]</span></span> |<span data-ttu-id="503ea-431">Se true, imposta i criteri come predefiniti dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-431">If true, sets the policy as the organization's default policy.</span></span> <span data-ttu-id="503ea-432">Se false, non esegue alcuna operazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-432">If false, does nothing.</span></span> |`-IsOrganizationDefault $true` |
| <span data-ttu-id="503ea-433"><code>&#8209;Type</code>[Facoltativo]</span><span class="sxs-lookup"><span data-stu-id="503ea-433"><code>&#8209;Type</code> [Optional]</span></span> |<span data-ttu-id="503ea-434">Tipo di criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-434">Type of policy.</span></span> <span data-ttu-id="503ea-435">Per la durata dei token usare sempre "TokenLifetimePolicy".</span><span class="sxs-lookup"><span data-stu-id="503ea-435">For token lifetimes, always use "TokenLifetimePolicy."</span></span> |`-Type "TokenLifetimePolicy"` |
| <span data-ttu-id="503ea-436"><code>&#8209;AlternativeIdentifier</code>[Facoltativo]</span><span class="sxs-lookup"><span data-stu-id="503ea-436"><code>&#8209;AlternativeIdentifier</code> [Optional]</span></span> |<span data-ttu-id="503ea-437">Imposta un ID alternativo per i criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-437">Sets an alternative ID for the policy.</span></span> |`-AlternativeIdentifier "myAltId"` |

</br></br>

#### <a name="remove-azureadpolicy"></a><span data-ttu-id="503ea-438">Remove-AzureADPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-438">Remove-AzureADPolicy</span></span>
<span data-ttu-id="503ea-439">Elimina i criteri specificati.</span><span class="sxs-lookup"><span data-stu-id="503ea-439">Deletes the specified policy.</span></span>

```PowerShell
 Remove-AzureADPolicy -Id <ObjectId of Policy>
```

| <span data-ttu-id="503ea-440">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-440">Parameters</span></span> | <span data-ttu-id="503ea-441">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-441">Description</span></span> | <span data-ttu-id="503ea-442">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-442">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="503ea-443">**ObjectId (Id)** dei criteri da usare.</span><span class="sxs-lookup"><span data-stu-id="503ea-443">**ObjectId (Id)** of the policy you want.</span></span> | `-Id <ObjectId of Policy>` |

</br></br>

### <a name="application-policies"></a><span data-ttu-id="503ea-444">Criteri dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="503ea-444">Application policies</span></span>
<span data-ttu-id="503ea-445">È possibile usare i cmdlet riportati di seguito per i criteri dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-445">You can use the following cmdlets for application policies.</span></span></br></br>

#### <a name="add-azureadapplicationpolicy"></a><span data-ttu-id="503ea-446">Add-AzureADApplicationPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-446">Add-AzureADApplicationPolicy</span></span>
<span data-ttu-id="503ea-447">Collega i criteri specificati a un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-447">Links the specified policy to an application.</span></span>

```PowerShell
Add-AzureADApplicationPolicy -Id <ObjectId of Application> -RefObjectId <ObjectId of Policy>
```

| <span data-ttu-id="503ea-448">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-448">Parameters</span></span> | <span data-ttu-id="503ea-449">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-449">Description</span></span> | <span data-ttu-id="503ea-450">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-450">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="503ea-451">**ObjectId (Id)** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-451">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;RefObjectId</code> |<span data-ttu-id="503ea-452">**ObjectId** dei criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-452">**ObjectId** of the policy.</span></span> | `-RefObjectId <ObjectId of Policy>` |

</br></br>

#### <a name="get-azureadapplicationpolicy"></a><span data-ttu-id="503ea-453">Get-AzureADApplicationPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-453">Get-AzureADApplicationPolicy</span></span>
<span data-ttu-id="503ea-454">Ottiene i criteri assegnati a un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-454">Gets the policy that is assigned to an application.</span></span>

```PowerShell
Get-AzureADApplicationPolicy -Id <ObjectId of Application>
```

| <span data-ttu-id="503ea-455">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-455">Parameters</span></span> | <span data-ttu-id="503ea-456">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-456">Description</span></span> | <span data-ttu-id="503ea-457">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-457">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="503ea-458">**ObjectId (Id)** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-458">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |

</br></br>

#### <a name="remove-azureadapplicationpolicy"></a><span data-ttu-id="503ea-459">Remove-AzureADApplicationPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-459">Remove-AzureADApplicationPolicy</span></span>
<span data-ttu-id="503ea-460">Rimuove i criteri da un'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-460">Removes a policy from an application.</span></span>

```PowerShell
Remove-AzureADApplicationPolicy -Id <ObjectId of Application> -PolicyId <ObjectId of Policy>
```

| <span data-ttu-id="503ea-461">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-461">Parameters</span></span> | <span data-ttu-id="503ea-462">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-462">Description</span></span> | <span data-ttu-id="503ea-463">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-463">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="503ea-464">**ObjectId (Id)** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-464">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;PolicyId</code> |<span data-ttu-id="503ea-465">**ObjectId** dei criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-465">**ObjectId** of the policy.</span></span> | `-PolicyId <ObjectId of Policy>` |

</br></br>

### <a name="service-principal-policies"></a><span data-ttu-id="503ea-466">Criteri dell'entità servizio</span><span class="sxs-lookup"><span data-stu-id="503ea-466">Service principal policies</span></span>
<span data-ttu-id="503ea-467">È possibile usare i cmdlet riportati di seguito per i criteri dell'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="503ea-467">You can use the following cmdlets for service principal policies.</span></span>

#### <a name="add-azureadserviceprincipalpolicy"></a><span data-ttu-id="503ea-468">Add-AzureADServicePrincipalPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-468">Add-AzureADServicePrincipalPolicy</span></span>
<span data-ttu-id="503ea-469">Collega i criteri specificati a un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="503ea-469">Links the specified policy to a service principal.</span></span>

```PowerShell
Add-AzureADServicePrincipalPolicy -Id <ObjectId of ServicePrincipal> -RefObjectId <ObjectId of Policy>
```

| <span data-ttu-id="503ea-470">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-470">Parameters</span></span> | <span data-ttu-id="503ea-471">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-471">Description</span></span> | <span data-ttu-id="503ea-472">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-472">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="503ea-473">**ObjectId (Id)** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-473">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;RefObjectId</code> |<span data-ttu-id="503ea-474">**ObjectId** dei criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-474">**ObjectId** of the policy.</span></span> | `-RefObjectId <ObjectId of Policy>` |

</br></br>

#### <a name="get-azureadserviceprincipalpolicy"></a><span data-ttu-id="503ea-475">Get-AzureADServicePrincipalPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-475">Get-AzureADServicePrincipalPolicy</span></span>
<span data-ttu-id="503ea-476">Ottiene i criteri collegati all'entità servizio specificata.</span><span class="sxs-lookup"><span data-stu-id="503ea-476">Gets any policy linked to the specified service principal.</span></span>

```PowerShell
Get-AzureADServicePrincipalPolicy -Id <ObjectId of ServicePrincipal>
```

| <span data-ttu-id="503ea-477">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-477">Parameters</span></span> | <span data-ttu-id="503ea-478">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-478">Description</span></span> | <span data-ttu-id="503ea-479">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-479">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="503ea-480">**ObjectId (Id)** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-480">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |

</br></br>

#### <a name="remove-azureadserviceprincipalpolicy"></a><span data-ttu-id="503ea-481">Remove-AzureADServicePrincipalPolicy</span><span class="sxs-lookup"><span data-stu-id="503ea-481">Remove-AzureADServicePrincipalPolicy</span></span>
<span data-ttu-id="503ea-482">Rimuove i criteri dall'entità servizio specificata.</span><span class="sxs-lookup"><span data-stu-id="503ea-482">Removes the policy from the specified service principal.</span></span>

```PowerShell
Remove-AzureADServicePrincipalPolicy -Id <ObjectId of ServicePrincipal>  -PolicyId <ObjectId of Policy>
```

| <span data-ttu-id="503ea-483">Parametri</span><span class="sxs-lookup"><span data-stu-id="503ea-483">Parameters</span></span> | <span data-ttu-id="503ea-484">Descrizione</span><span class="sxs-lookup"><span data-stu-id="503ea-484">Description</span></span> | <span data-ttu-id="503ea-485">Esempio</span><span class="sxs-lookup"><span data-stu-id="503ea-485">Example</span></span> |
| --- | --- | --- |
| <code>&#8209;Id</code> |<span data-ttu-id="503ea-486">**ObjectId (Id)** dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="503ea-486">**ObjectId (Id)** of the application.</span></span> | `-Id <ObjectId of Application>` |
| <code>&#8209;PolicyId</code> |<span data-ttu-id="503ea-487">**ObjectId** dei criteri.</span><span class="sxs-lookup"><span data-stu-id="503ea-487">**ObjectId** of the policy.</span></span> | `-PolicyId <ObjectId of Policy>` |
