---
title: Impostare l'integrazione continua per i microservizi di Azure | Microsoft Docs
description: Panoramica di come configurare l'integrazione e la distribuzione continue per un'applicazione di Service Fabric tramite Visual Studio Team Services (VSTS).
services: service-fabric
documentationcenter: na
author: mthalman-msft
manager: timlt
editor: 
ms.assetid: 3e8c2290-9e7a-456a-9b2c-db44d1b3988d
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 12/06/2016
ms.author: mthalman;mikhegn
ms.openlocfilehash: 76a1e013e824910c7a489e345b6563ae3951378f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="set-up-service-fabric-continuous-integration-and-deployment-with-visual-studio-team-services"></a><span data-ttu-id="ee276-103">Configurare l'integrazione e la distribuzione continue di Service Fabric con Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="ee276-103">Set up Service Fabric continuous integration and deployment with Visual Studio Team Services</span></span>
<span data-ttu-id="ee276-104">Questo articolo descrive la procedura per configurare l'integrazione e la distribuzione continue per un'applicazione di Azure Service Fabric tramite Visual Studio Team Services (VSTS).</span><span class="sxs-lookup"><span data-stu-id="ee276-104">This article describes the steps to set up continuous integration and deployment for an Azure Service Fabric application by using Visual Studio Team Services (VSTS).</span></span>

<span data-ttu-id="ee276-105">Questo documento descrive la procedura corrente e può essere modificato nel tempo.</span><span class="sxs-lookup"><span data-stu-id="ee276-105">This document reflects the current procedure and is expected to change over time.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ee276-106">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="ee276-106">Prerequisites</span></span>
<span data-ttu-id="ee276-107">Attenersi alla procedura seguente per iniziare:</span><span class="sxs-lookup"><span data-stu-id="ee276-107">To get started, follow these steps:</span></span>

1. <span data-ttu-id="ee276-108">Assicurarsi di avere accesso a un account di Team Services o [crearlo](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) manualmente.</span><span class="sxs-lookup"><span data-stu-id="ee276-108">Ensure that you have access to a Team Services account or [create one](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) yourself.</span></span>
2. <span data-ttu-id="ee276-109">Assicurarsi di avere accesso a un progetto team di Team Services o [crearlo](https://www.visualstudio.com/docs/setup-admin/create-team-project) manualmente.</span><span class="sxs-lookup"><span data-stu-id="ee276-109">Ensure that you have access to a Team Services team project or [create one](https://www.visualstudio.com/docs/setup-admin/create-team-project) yourself.</span></span>
3. <span data-ttu-id="ee276-110">Assicurarsi di avere un cluster di Service Fabric in cui distribuire l'applicazione o crearne uno usando il [portale di Azure](service-fabric-cluster-creation-via-portal.md), un [modello di Azure Resource Manager](service-fabric-cluster-creation-via-arm.md) o [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="ee276-110">Ensure that you have a Service Fabric cluster to which you can deploy your application or create one using the [Azure portal](service-fabric-cluster-creation-via-portal.md), an [Azure Resource Manager template](service-fabric-cluster-creation-via-arm.md), or [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span></span>
4. <span data-ttu-id="ee276-111">Verificare di aver già creato un progetto di applicazione di Service Fabric (.sfproj).</span><span class="sxs-lookup"><span data-stu-id="ee276-111">Ensure that you have already created a Service Fabric Application (.sfproj) project.</span></span> <span data-ttu-id="ee276-112">È necessario che il progetto sia stato creato o aggiornato con Service Fabric SDK 2.1 o versione successiva; il valore di ProjectVersion del file con estensione SFPROJ deve essere 1.1 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="ee276-112">You must have a project that was created or upgraded with Service Fabric SDK 2.1 or higher (the .sfproj file should contain a ProjectVersion property value of 1.1 or higher).</span></span>

> [!NOTE]
> <span data-ttu-id="ee276-113">Non sono più necessari agenti di compilazione personalizzati.</span><span class="sxs-lookup"><span data-stu-id="ee276-113">Custom build agents are no longer required.</span></span> <span data-ttu-id="ee276-114">Gli agenti ospitati di Team Services sono ora preinstallati con il software di gestione dei cluster di Service Fabric, il che consente la distribuzione delle applicazioni direttamente dagli agenti.</span><span class="sxs-lookup"><span data-stu-id="ee276-114">Team Services hosted agents now come pre-installed with Service Fabric cluster management software, allowing for deployment of your applications directly from those agents.</span></span>
> 
> 

## <a name="configure-and-share-your-source-files"></a><span data-ttu-id="ee276-115">Configurare e condividere i file di origine</span><span class="sxs-lookup"><span data-stu-id="ee276-115">Configure and share your source files</span></span>
<span data-ttu-id="ee276-116">Prima di tutto è necessario preparare un profilo di pubblicazione destinato all'uso da parte del processo di distribuzione eseguito in Team Services.</span><span class="sxs-lookup"><span data-stu-id="ee276-116">The first thing you want to do is prepare a publish profile for use by the deployment process that executes within Team Services.</span></span>  <span data-ttu-id="ee276-117">Il profilo di pubblicazione deve essere configurato impostando il cluster preparato in precedenza come destinazione:</span><span class="sxs-lookup"><span data-stu-id="ee276-117">The publish profile should be configured to target the cluster that you've previously prepared:</span></span>

1. <span data-ttu-id="ee276-118">Scegliere un profilo di pubblicazione all'interno del progetto di applicazione che si vuole usare per il flusso di lavoro di integrazione continua.</span><span class="sxs-lookup"><span data-stu-id="ee276-118">Choose a publish profile within your Application project that you want to use for your continuous integration workflow.</span></span> <span data-ttu-id="ee276-119">Seguire le [istruzioni di pubblicazione](service-fabric-publish-app-remote-cluster.md) su come pubblicare un'applicazione in un cluster remoto.</span><span class="sxs-lookup"><span data-stu-id="ee276-119">Follow the [publish instructions](service-fabric-publish-app-remote-cluster.md) on how to publish an application to a remote cluster.</span></span> <span data-ttu-id="ee276-120">In realtà non è necessario pubblicare l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-120">You don't actually need to publish your application though.</span></span> <span data-ttu-id="ee276-121">È possibile fare clic sul collegamento ipertestuale **Save** (Salva) nella finestra di dialogo di pubblicazione dopo aver configurato le opzioni in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="ee276-121">You can click the **Save** hyperlink in the publish dialog once you have configured things appropriately.</span></span>
2. <span data-ttu-id="ee276-122">Se si vuole aggiornare l'applicazione per ogni distribuzione eseguita in Team Services, è necessario configurare il profilo di pubblicazione per consentire l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="ee276-122">If you want your application to be upgraded for each deployment that occurs within Team Services, you want to configure the publish profile to enable upgrade.</span></span> <span data-ttu-id="ee276-123">Nella stessa finestra di dialogo di pubblicazione del passaggio 1 assicurarsi che la casella di controllo **Upgrade the Application** (Aggiorna l'applicazione) sia selezionata.</span><span class="sxs-lookup"><span data-stu-id="ee276-123">In the same publish dialog used in step 1, ensure that the **Upgrade the Application** checkbox is checked.</span></span>  <span data-ttu-id="ee276-124">Sono disponibili maggiori informazioni sulla [configurazione delle impostazioni di aggiornamento aggiuntive](service-fabric-visualstudio-configure-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="ee276-124">Learn more about [configuring additional upgrade settings](service-fabric-visualstudio-configure-upgrade.md).</span></span> <span data-ttu-id="ee276-125">Fare clic sul collegamento ipertestuale **Save** (Salva) per salvare le impostazioni per il profilo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-125">Click the **Save** hyperlink to save the settings to the publish profile.</span></span>
3. <span data-ttu-id="ee276-126">Assicurarsi di aver salvato le modifiche nel profilo di pubblicazione e annullare la finestra di dialogo di pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-126">Ensure that you've saved your changes to the publish profile and cancel the publish dialog.</span></span>
4. <span data-ttu-id="ee276-127">Ora è il momento di [condividere i file di origine del progetto di applicazione](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) con Team Services.</span><span class="sxs-lookup"><span data-stu-id="ee276-127">Now it's time to [share your Application project source files](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) with Team Services.</span></span> <span data-ttu-id="ee276-128">Quando i file di origine sono accessibili in Team Services, è possibile procedere al passaggio successivo della generazione di compilazioni.</span><span class="sxs-lookup"><span data-stu-id="ee276-128">Once your source files are accessible in Team Services, you can now move on to the next step of generating builds.</span></span> 

## <a name="create-a-build-definition"></a><span data-ttu-id="ee276-129">Creare una definizione di compilazione</span><span class="sxs-lookup"><span data-stu-id="ee276-129">Create a build definition</span></span>
<span data-ttu-id="ee276-130">Una definizione di compilazione di Team Services descrive un flusso di lavoro costituito da un set di istruzioni di compilazione che vengono eseguite in sequenza.</span><span class="sxs-lookup"><span data-stu-id="ee276-130">A Team Services build definition describes a workflow that is composed of a set of build steps that are executed sequentially.</span></span> <span data-ttu-id="ee276-131">L'obiettivo della definizione di compilazione che viene creata è di produrre un pacchetto dell'applicazione di Service Fabric e altri elementi, che possono essere usati per distribuire l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-131">The goal of the build definition that you are creating is to produce a Service Fabric application package, and other artifacts, that can be used to deploy the application.</span></span> <span data-ttu-id="ee276-132">Sono disponibili maggiori informazioni sulle [definizioni di compilazione](https://www.visualstudio.com/docs/build/define/create)di Team Services.</span><span class="sxs-lookup"><span data-stu-id="ee276-132">Learn more about Team Services [build definitions](https://www.visualstudio.com/docs/build/define/create).</span></span>

### <a name="create-a-definition-from-the-build-template"></a><span data-ttu-id="ee276-133">Creare una definizione dal modello di build</span><span class="sxs-lookup"><span data-stu-id="ee276-133">Create a definition from the build template</span></span>
1. <span data-ttu-id="ee276-134">Aprire il progetto team in Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="ee276-134">Open your team project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="ee276-135">Selezionare la scheda **Build** (Compilazione).</span><span class="sxs-lookup"><span data-stu-id="ee276-135">Select the **Build** tab.</span></span>
3. <span data-ttu-id="ee276-136">Scegliere il segno **+** verde per creare una nuova definizione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-136">Select the green **+** sign to create a new build definition.</span></span>
4. <span data-ttu-id="ee276-137">Nella finestra di dialogo visualizzata selezionare **Applicazione di Azure Service Fabric** all'interno della categoria del modello **Build**.</span><span class="sxs-lookup"><span data-stu-id="ee276-137">In the dialog that opens, select **Azure Service Fabric Application** within the **Build** template category.</span></span>
5. <span data-ttu-id="ee276-138">Selezionare **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="ee276-138">Select **Next**.</span></span>
6. <span data-ttu-id="ee276-139">Selezionare il repository e il ramo associato all'applicazione di Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="ee276-139">Select the repository and branch associated with your Service Fabric application.</span></span>
7. <span data-ttu-id="ee276-140">Selezionare la coda dell'agente che si desidera usare.</span><span class="sxs-lookup"><span data-stu-id="ee276-140">Select the agent queue you wish to use.</span></span> <span data-ttu-id="ee276-141">Sono supportati agenti ospitati.</span><span class="sxs-lookup"><span data-stu-id="ee276-141">Hosted agents are supported.</span></span>
8. <span data-ttu-id="ee276-142">Selezionare **Create**.</span><span class="sxs-lookup"><span data-stu-id="ee276-142">Select **Create**.</span></span>
9. <span data-ttu-id="ee276-143">Salvare la definizione di compilazione e assegnare un nome.</span><span class="sxs-lookup"><span data-stu-id="ee276-143">Save the build definition and provide a name.</span></span>
10. <span data-ttu-id="ee276-144">Di seguito viene fornita una descrizione delle istruzioni di compilazione generate dal modello:</span><span class="sxs-lookup"><span data-stu-id="ee276-144">The following paragraph is a description of the build steps generated by the template:</span></span>

| <span data-ttu-id="ee276-145">Istruzione di compilazione</span><span class="sxs-lookup"><span data-stu-id="ee276-145">Build step</span></span> | <span data-ttu-id="ee276-146">Descrizione</span><span class="sxs-lookup"><span data-stu-id="ee276-146">Description</span></span> |
| --- | --- |
| <span data-ttu-id="ee276-147">NuGet restore</span><span class="sxs-lookup"><span data-stu-id="ee276-147">NuGet restore</span></span> |<span data-ttu-id="ee276-148">Consente di ripristinare i pacchetti NuGet per la soluzione.</span><span class="sxs-lookup"><span data-stu-id="ee276-148">Restores the NuGet packages for the solution.</span></span> |
| <span data-ttu-id="ee276-149">Compila la soluzione \*.sln</span><span class="sxs-lookup"><span data-stu-id="ee276-149">Build solution \*.sln</span></span> |<span data-ttu-id="ee276-150">Consente di compilare l'intera soluzione.</span><span class="sxs-lookup"><span data-stu-id="ee276-150">Builds the entire solution.</span></span> |
| <span data-ttu-id="ee276-151">Compila la soluzione \*.sfproj</span><span class="sxs-lookup"><span data-stu-id="ee276-151">Build solution \*.sfproj</span></span> |<span data-ttu-id="ee276-152">Consente di generare il pacchetto dell'applicazione di Service Fabric usato per distribuire l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-152">Generates the Service Fabric application package that is used to deploy the application.</span></span> <span data-ttu-id="ee276-153">Il percorso del pacchetto dell'applicazione viene specificato all'interno della directory degli elementi della compilazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-153">The application package location is specified to be within the build's artifact directory.</span></span> |
| <span data-ttu-id="ee276-154">Update Service Fabric App Versions</span><span class="sxs-lookup"><span data-stu-id="ee276-154">Update Service Fabric App Versions</span></span> |<span data-ttu-id="ee276-155">Consente di aggiornare i valori di versione contenuti nei file manifesto del pacchetto applicazione per consentire il supporto dell'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="ee276-155">Updates the version values contained in the application package's manifest files to allow for upgrade support.</span></span> <span data-ttu-id="ee276-156">Per altre informazioni, vedere la [pagina della documentazione delle attività](https://go.microsoft.com/fwlink/?LinkId=820529) .</span><span class="sxs-lookup"><span data-stu-id="ee276-156">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> |
| <span data-ttu-id="ee276-157">Copiare i file</span><span class="sxs-lookup"><span data-stu-id="ee276-157">Copy Files</span></span> |<span data-ttu-id="ee276-158">Consente di copiare i file di parametri del profilo di pubblicazione e dell'applicazione negli elementi della compilazione per poter essere usati per la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="ee276-158">Copies the publish profile and application parameters files to the build's artifacts to be consumed for deployment.</span></span> |
| <span data-ttu-id="ee276-159">Publish Artifact</span><span class="sxs-lookup"><span data-stu-id="ee276-159">Publish Artifact</span></span> |<span data-ttu-id="ee276-160">Consente di pubblicare gli elementi della compilazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-160">Publishes the build's artifacts.</span></span> <span data-ttu-id="ee276-161">Consente l'uso degli elementi della compilazione da parte di una definizione di versione.</span><span class="sxs-lookup"><span data-stu-id="ee276-161">Allows a release definition to consume the build's artifacts.</span></span> |

### <a name="verify-the-default-set-of-tasks"></a><span data-ttu-id="ee276-162">Verificare il set predefinito di attività</span><span class="sxs-lookup"><span data-stu-id="ee276-162">Verify the default set of tasks</span></span>
1. <span data-ttu-id="ee276-163">Verificare il campo di input **Soluzione** per le istruzioni di compilazione **NuGet restore** e **Compila la soluzione**.</span><span class="sxs-lookup"><span data-stu-id="ee276-163">Verify the **Solution** input field for the **NuGet restore** and **Build solution** build steps.</span></span>  <span data-ttu-id="ee276-164">Per impostazione predefinita, queste istruzioni vengono eseguite su tutti i file di soluzione contenuti nel repository associato.</span><span class="sxs-lookup"><span data-stu-id="ee276-164">By default, these build steps execute upon all solution files that are contained in the associated repository.</span></span>  <span data-ttu-id="ee276-165">Se si desidera che la definizione di compilazione operi solo su uno di questi file di soluzione, aggiornare in modo esplicito il percorso a tale file.</span><span class="sxs-lookup"><span data-stu-id="ee276-165">If you only want the build definition to operate on one of those solution files, you need to explicitly update the path to that file.</span></span>
2. <span data-ttu-id="ee276-166">Verificare il campo di input **Soluzione** per l'istruzione di compilazione **Package application** (Crea pacchetti applicazione).</span><span class="sxs-lookup"><span data-stu-id="ee276-166">Verify the **Solution** input field for the **Package application** build step.</span></span>  <span data-ttu-id="ee276-167">Per impostazione predefinita, questa istruzione di compilazione presuppone che nel repository sia presente solo un progetto di applicazione di Service Fabric (.sfproj).</span><span class="sxs-lookup"><span data-stu-id="ee276-167">By default, this build step assumes only one Service Fabric Application project (.sfproj) exists in the repository.</span></span>  <span data-ttu-id="ee276-168">Se nel repository sono presenti più file di questo tipo e si desidera usare solo uno di essi come destinazione per questa definizione di compilazione, è necessario aggiornare in modo esplicito il percorso a tale file.</span><span class="sxs-lookup"><span data-stu-id="ee276-168">If you have multiple such files in your repository and want to target only one of them for this build definition, you need to explicitly update the path to that file.</span></span>  <span data-ttu-id="ee276-169">Se si vuole creare un pacchetto di più progetti di applicazione nel repository, è necessario creare altre istruzioni di **Compilazione Visual Studio** nella definizione di compilazione, ognuna con un progetto di applicazione di destinazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-169">If you want to package multiple Application projects in your repository, you need to create additional **Visual Studio Build** steps in the build definition that each target an Application project.</span></span>  <span data-ttu-id="ee276-170">Sarà anche necessario aggiornare il campo **Argomenti MSBuild** per ognuna di queste istruzioni di compilazione in modo che il percorso del pacchetto sia univoco per ciascuna di esse.</span><span class="sxs-lookup"><span data-stu-id="ee276-170">You would then also need to update the **MSBuild Arguments** field for each of those build steps so that the package location is unique for each of them.</span></span>
3. <span data-ttu-id="ee276-171">Verificare il comportamento di controllo delle versioni definito nell'istruzione di compilazione **Update Service Fabric App Versions** .</span><span class="sxs-lookup"><span data-stu-id="ee276-171">Verify the versioning behavior defined in the **Update Service Fabric App Versions** build step.</span></span>  <span data-ttu-id="ee276-172">Per impostazione predefinita, questa istruzione aggiunge il numero di compilazione a tutti i valori di versione nei file manifesto del pacchetto applicazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-172">By default, this build step appends the build number to all version values in the application package's manifest files.</span></span> <span data-ttu-id="ee276-173">Per altre informazioni, vedere la [pagina della documentazione delle attività](https://go.microsoft.com/fwlink/?LinkId=820529) .</span><span class="sxs-lookup"><span data-stu-id="ee276-173">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820529) for more information.</span></span> <span data-ttu-id="ee276-174">Ciò è utile per supportare l'aggiornamento dell'applicazione in quanto ogni distribuzione dell'aggiornamento richiede valori di versione diversi rispetto alla distribuzione precedente.</span><span class="sxs-lookup"><span data-stu-id="ee276-174">This is useful for supporting upgrade of your application since each upgrade deployment requires different version values from the previous deployment.</span></span> <span data-ttu-id="ee276-175">Se non si intende usare l'aggiornamento dell'applicazione nel flusso di lavoro, è possibile disabilitare questa istruzione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-175">If you're not intending to use application upgrade in your workflow, you may consider disabling this build step.</span></span> <span data-ttu-id="ee276-176">Deve essere disabilitata se l'intenzione è quella di produrre una compilazione che può essere usata per sovrascrivere un'applicazione di Service Fabric esistente.</span><span class="sxs-lookup"><span data-stu-id="ee276-176">It must be disabled if your intention is to produce a build that can be used to overwrite an existing Service Fabric application.</span></span> <span data-ttu-id="ee276-177">La distribuzione non riesce se la versione dell'applicazione prodotta dalla compilazione non corrisponde alla versione dell'applicazione nel cluster.</span><span class="sxs-lookup"><span data-stu-id="ee276-177">The deployment fails if the version of the application produced by the build does not match the version of the application in the cluster.</span></span>
4. <span data-ttu-id="ee276-178">Se la soluzione contiene un progetto .NET Core, è necessario assicurarsi che la definizione di compilazione contenga un'istruzione per il ripristino delle dipendenze:</span><span class="sxs-lookup"><span data-stu-id="ee276-178">If your solution contains a .NET Core project, you must ensure that your build definition contains a build step that restores the dependencies:</span></span>
   1. <span data-ttu-id="ee276-179">Selezionare **Aggiungi istruzione di compilazione...**.</span><span class="sxs-lookup"><span data-stu-id="ee276-179">Select **Add build step...**.</span></span>
   2. <span data-ttu-id="ee276-180">Individuare l'attività **Riga di comando** all'interno della scheda Utilità e fare clic sul pulsante Aggiungi.</span><span class="sxs-lookup"><span data-stu-id="ee276-180">Locate the **Command-Line** task within the Utility tab and click its Add button.</span></span>
   3. <span data-ttu-id="ee276-181">Per i campi di input dell'attività, usare i valori seguenti:</span><span class="sxs-lookup"><span data-stu-id="ee276-181">For the task's input fields, use the following values:</span></span>
   4. <span data-ttu-id="ee276-182">Strumento: dotnet</span><span class="sxs-lookup"><span data-stu-id="ee276-182">Tool: dotnet</span></span>
   5. <span data-ttu-id="ee276-183">Argomenti: restore</span><span class="sxs-lookup"><span data-stu-id="ee276-183">Arguments: restore</span></span>
   6. <span data-ttu-id="ee276-184">Trascinare l'attività in modo da posizionarla immediatamente dopo il passaggio **NuGet restore** .</span><span class="sxs-lookup"><span data-stu-id="ee276-184">Drag the task so that it is immediately after the **NuGet restore** step.</span></span>
5. <span data-ttu-id="ee276-185">Salvare le modifiche apportate alla definizione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-185">Save any changes you've made to the build definition.</span></span>

### <a name="try-it"></a><span data-ttu-id="ee276-186">Prova</span><span class="sxs-lookup"><span data-stu-id="ee276-186">Try it</span></span>
<span data-ttu-id="ee276-187">Selezionare **Accoda compilazione** per avviare manualmente una compilazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-187">Select **Queue Build** to manually start a build.</span></span> <span data-ttu-id="ee276-188">Le compilazioni vengono attivate anche al momento del push o dell'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-188">Builds also triggers upon push or check-in.</span></span> <span data-ttu-id="ee276-189">Dopo aver verificato la corretta esecuzione della compilazione, è possibile procedere con la definizione di versione che distribuisce l'applicazione in un cluster.</span><span class="sxs-lookup"><span data-stu-id="ee276-189">Once you've verified that the build is executing successfully, you can now move on to defining a release definition that deploys your application to a cluster.</span></span>

## <a name="create-a-release-definition"></a><span data-ttu-id="ee276-190">Creare una definizione di versione</span><span class="sxs-lookup"><span data-stu-id="ee276-190">Create a release definition</span></span>
<span data-ttu-id="ee276-191">Una definizione di versione di Team Services descrive un flusso di lavoro costituito da un set di attività che vengono eseguite in sequenza.</span><span class="sxs-lookup"><span data-stu-id="ee276-191">A Team Services release definition describes a workflow that is composed of a set of tasks that are executed sequentially.</span></span> <span data-ttu-id="ee276-192">L'obiettivo della definizione di versione creata è prendere un pacchetto dell'applicazione e distribuirlo in un cluster.</span><span class="sxs-lookup"><span data-stu-id="ee276-192">The goal of the release definition that you are creating is to take an application package and deploy it to a cluster.</span></span> <span data-ttu-id="ee276-193">Quando usate insieme, la definizione di compilazione e la definizione di versione possono eseguire l'intero flusso di lavoro dall'avvio con file di origine alla fine con un'applicazione in esecuzione nel cluster.</span><span class="sxs-lookup"><span data-stu-id="ee276-193">When used together, the build definition and release definition can execute the entire workflow from starting with source files to ending with a running application in your cluster.</span></span> <span data-ttu-id="ee276-194">Sono disponibili maggiori informazioni sulle [definizioni di versione](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition)di Team Services.</span><span class="sxs-lookup"><span data-stu-id="ee276-194">Learn more about Team Services [release definitions](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition).</span></span>

### <a name="create-a-definition-from-the-release-template"></a><span data-ttu-id="ee276-195">Creare una definizione del modello di versione</span><span class="sxs-lookup"><span data-stu-id="ee276-195">Create a definition from the release template</span></span>
1. <span data-ttu-id="ee276-196">Aprire il progetto in Visual Studio Team Services.</span><span class="sxs-lookup"><span data-stu-id="ee276-196">Open your project in Visual Studio Team Services.</span></span>
2. <span data-ttu-id="ee276-197">Selezionare la scheda **Versione** .</span><span class="sxs-lookup"><span data-stu-id="ee276-197">Select the **Release** tab.</span></span>
3. <span data-ttu-id="ee276-198">Selezionare il segno verde **+** per creare una nuova definizione di versione e selezionare **Crea definizione di versione** nel menu.</span><span class="sxs-lookup"><span data-stu-id="ee276-198">Select the green **+** sign to create a new release definition and select **Create release definition** in the menu.</span></span>
4. <span data-ttu-id="ee276-199">Nella finestra di dialogo visualizzata selezionare **Distribuzione di Azure Service Fabric** all'interno della categoria del modello **Distribuzione**.</span><span class="sxs-lookup"><span data-stu-id="ee276-199">In the dialog that opens, select **Azure Service Fabric Deployment** within the **Deployment** template category.</span></span>
5. <span data-ttu-id="ee276-200">Selezionare **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="ee276-200">Select **Next**.</span></span>
6. <span data-ttu-id="ee276-201">Selezionare la definizione di compilazione da usare come origine di questa definizione di versione.</span><span class="sxs-lookup"><span data-stu-id="ee276-201">Select the build definition you want to use as the source of this release definition.</span></span>  <span data-ttu-id="ee276-202">La definizione di versione fa riferimento agli elementi che sono stati prodotti dalla definizione di compilazione selezionata.</span><span class="sxs-lookup"><span data-stu-id="ee276-202">The release definition references the artifacts that were produced by the selected build definition.</span></span>
7. <span data-ttu-id="ee276-203">Selezionare la casella di controllo **Distribuzione continua** se si vuole che Team Services crei automaticamente una nuova versione e distribuisca l'applicazione di Service Fabric ogni volta che viene completata una compilazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-203">Check the **Continuous deployment** check box if you wish to have Team Services automatically create a new release and deploy the Service Fabric application whenever a build completes.</span></span>
8. <span data-ttu-id="ee276-204">Selezionare la coda dell'agente che si desidera usare.</span><span class="sxs-lookup"><span data-stu-id="ee276-204">Select the agent queue you wish to use.</span></span> <span data-ttu-id="ee276-205">Sono supportati agenti ospitati.</span><span class="sxs-lookup"><span data-stu-id="ee276-205">Hosted agents are supported.</span></span>
9. <span data-ttu-id="ee276-206">Selezionare **Create**.</span><span class="sxs-lookup"><span data-stu-id="ee276-206">Select **Create**.</span></span>
10. <span data-ttu-id="ee276-207">Modificare il nome della definizione facendo clic sull'icona a forma di matita nella parte superiore della pagina.</span><span class="sxs-lookup"><span data-stu-id="ee276-207">Edit the definition name by clicking the pencil icon at the top of the page.</span></span>
11. <span data-ttu-id="ee276-208">Selezionare il cluster in cui deve essere distribuita l'applicazione dal campo di input **Cluster Connection** (Connessione cluster) dell'attività.</span><span class="sxs-lookup"><span data-stu-id="ee276-208">Select the cluster to which your application should be deployed from the **Cluster Connection** input field of the task.</span></span> <span data-ttu-id="ee276-209">La connessione del cluster fornisce le informazioni necessarie per consentire all'attività di distribuzione di connettersi al cluster.</span><span class="sxs-lookup"><span data-stu-id="ee276-209">The cluster connection provides the necessary information that allows the deployment task to connect to the cluster.</span></span> <span data-ttu-id="ee276-210">Se non si dispone ancora di una connessione per il cluster, selezionare il collegamento ipertestuale **Manage** (Gestisci) accanto al campo per aggiungerne una.</span><span class="sxs-lookup"><span data-stu-id="ee276-210">If you do not yet have a cluster connection for your cluster, select the **Manage** hyperlink next to the field to add one.</span></span> <span data-ttu-id="ee276-211">Nella pagina visualizzata seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="ee276-211">On the page that opens, perform the following steps:</span></span>
    1. <span data-ttu-id="ee276-212">Selezionare **Nuovo endpoint del servizio** e quindi **Azure Service Fabric** nel menu.</span><span class="sxs-lookup"><span data-stu-id="ee276-212">Select **New Service Endpoint** and then select **Azure Service Fabric** from the menu.</span></span>
    2. <span data-ttu-id="ee276-213">Selezionare il tipo di autenticazione usato dal cluster di destinazione per questo endpoint.</span><span class="sxs-lookup"><span data-stu-id="ee276-213">Select the type of authentication being used by the cluster targeted by this endpoint.</span></span>
    3. <span data-ttu-id="ee276-214">Definire un nome per la connessione nel campo **Nome connessione** .</span><span class="sxs-lookup"><span data-stu-id="ee276-214">Define a name for your connection in the **Connection Name** field.</span></span>  <span data-ttu-id="ee276-215">In genere, si userà il nome del cluster.</span><span class="sxs-lookup"><span data-stu-id="ee276-215">Typically, you would use the name of your cluster.</span></span>
    4. <span data-ttu-id="ee276-216">Definire l'URL dell'endpoint di connessione client nel campo **Cluster Endpoint** (Endpoint cluster).</span><span class="sxs-lookup"><span data-stu-id="ee276-216">Define the client connection endpoint URL in the **Cluster Endpoint** field.</span></span>  <span data-ttu-id="ee276-217">Esempio: tcp://contoso.westus.cloudapp.azure.com:19000.</span><span class="sxs-lookup"><span data-stu-id="ee276-217">Example: tcp://contoso.westus.cloudapp.azure.com:19000.</span></span>
    5. <span data-ttu-id="ee276-218">Definire le credenziali di Azure Active Directory da usare per connettersi al cluster nei campi **Nome utente** e **Password**.</span><span class="sxs-lookup"><span data-stu-id="ee276-218">For Azure Active Directory credentials, define the credentials you want to use to connect to the cluster in the **Username** and **Password** fields.</span></span>
    6. <span data-ttu-id="ee276-219">Per l'autenticazione basata su certificati, definire la codifica Base64 del file del certificato client nel campo **Client Certificate** (Certificato client).</span><span class="sxs-lookup"><span data-stu-id="ee276-219">For Certificate Based authentication, define the Base64 encoding of the client certificate file in the **Client Certificate** field.</span></span>  <span data-ttu-id="ee276-220">Per informazioni su come ottenere questo valore, vedere la finestra popup di guida su tale campo.</span><span class="sxs-lookup"><span data-stu-id="ee276-220">See the help pop-up on that field for info on how to get that value.</span></span>  <span data-ttu-id="ee276-221">Se il certificato è protetto da password, definire la password nel campo **Password** .</span><span class="sxs-lookup"><span data-stu-id="ee276-221">If your certificate is password-protected, define the password in the **Password** field.</span></span>
    7. <span data-ttu-id="ee276-222">Confermare le modifiche facendo clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="ee276-222">Confirm your changes by clicking **OK**.</span></span> <span data-ttu-id="ee276-223">Dopo essere tornati alla definizione di versione, fare clic sull'icona di aggiornamento sul campo **Cluster Connection** (Connessione cluster) per visualizzare l'endpoint appena aggiunto.</span><span class="sxs-lookup"><span data-stu-id="ee276-223">After navigating back to your release definition, click the refresh icon on the **Cluster Connection** field to see the endpoint you just added.</span></span>
12. <span data-ttu-id="ee276-224">Salvare la definizione di versione.</span><span class="sxs-lookup"><span data-stu-id="ee276-224">Save the release definition.</span></span>

> [!NOTE]
> <span data-ttu-id="ee276-225">Gli account Microsoft, ad esempio @hotmail.com o @outlook.com, non sono supportati con l'autenticazione di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ee276-225">Microsoft Accounts (for example, @hotmail.com or @outlook.com) are not supported with Azure Active Directory authentication.</span></span>
> 
> 

<span data-ttu-id="ee276-226">La definizione creata è costituita da un'attività di tipo **Service Fabric Application Deployment**(Distribuzione dell'applicazione Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="ee276-226">The definition that is created consists of one task of type **Service Fabric Application Deployment**.</span></span> <span data-ttu-id="ee276-227">Per altre informazioni su questa attività, vedere la [pagina della documentazione delle attività](https://go.microsoft.com/fwlink/?LinkId=820528) .</span><span class="sxs-lookup"><span data-stu-id="ee276-227">See the [task documentation page](https://go.microsoft.com/fwlink/?LinkId=820528) for more information about this task.</span></span>

### <a name="verify-the-template-defaults"></a><span data-ttu-id="ee276-228">Verificare le impostazioni predefinite del modello</span><span class="sxs-lookup"><span data-stu-id="ee276-228">Verify the template defaults</span></span>
1. <span data-ttu-id="ee276-229">Verificare il campo di input **Profilo di pubblicazione** per l'attività **Distribuisci applicazione di Service Fabric**.</span><span class="sxs-lookup"><span data-stu-id="ee276-229">Verify the **Publish Profile** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="ee276-230">Per impostazione predefinita, questo campo fa riferimento a un profilo di pubblicazione denominato Cloud.xml contenuto negli elementi della pubblicazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-230">By default, this field references a publish profile named Cloud.xml contained in the build's artifacts.</span></span> <span data-ttu-id="ee276-231">Se si desidera fare riferimento a un profilo di pubblicazione diverso o se la compilazione contiene più pacchetti di applicazioni nei relativi elementi, è necessario aggiornare il percorso in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="ee276-231">If you want to reference a different publish profile or if the build contains multiple application packages in its artifacts, you need to update the path appropriately.</span></span>
2. <span data-ttu-id="ee276-232">Verificare il campo di input **Pacchetto dell'applicazione** per l'attività **Distribuisci applicazione di Service Fabric**.</span><span class="sxs-lookup"><span data-stu-id="ee276-232">Verify the **Application Package** input field for the **Deploy Service Fabric Application** task.</span></span> <span data-ttu-id="ee276-233">Per impostazione predefinita, questo campo fa riferimento al percorso del pacchetto dell'applicazione predefinito usato nel modello di definizione di compilazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-233">By default, this field references the default application package path used in the build definition template.</span></span>  <span data-ttu-id="ee276-234">Se il percorso del pacchetto applicazione predefinito è stato modificato nella definizione di compilazione, è necessario aggiornarlo anche qui in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="ee276-234">If you've modified the default application package path in the build definition, you need to update the path appropriately here as well.</span></span>

### <a name="try-it"></a><span data-ttu-id="ee276-235">Prova</span><span class="sxs-lookup"><span data-stu-id="ee276-235">Try it</span></span>
<span data-ttu-id="ee276-236">Selezionare **Crea versione** nel menu pulsante **Versione** per creare manualmente una versione.</span><span class="sxs-lookup"><span data-stu-id="ee276-236">Select **Create Release** from the **Release** button menu to manually create a release.</span></span> <span data-ttu-id="ee276-237">Nella finestra di dialogo visualizzata selezionare la compilazione sulla quale si desidera basare la versione e quindi fare clic su **Crea**.</span><span class="sxs-lookup"><span data-stu-id="ee276-237">In the dialog that opens, select the build that you want to base the release on and then click **Create**.</span></span> <span data-ttu-id="ee276-238">Se è abilitata la distribuzione continua, le versioni verranno create automaticamente quando la definizione di compilazione associata completa una compilazione.</span><span class="sxs-lookup"><span data-stu-id="ee276-238">If you enabled continuous deployment, releases will be created automatically when the associated build definition completes a build.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ee276-239">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="ee276-239">Next steps</span></span>
<span data-ttu-id="ee276-240">Per sapere di più sull'integrazione continua con applicazioni di Service Fabric, leggere gli articoli seguenti:</span><span class="sxs-lookup"><span data-stu-id="ee276-240">To learn more about continuous integration with Service Fabric applications, read the following articles:</span></span>

* [<span data-ttu-id="ee276-241">Documentazione di Team Services</span><span class="sxs-lookup"><span data-stu-id="ee276-241">Team Services documentation home</span></span>](https://www.visualstudio.com/docs/overview)
* [<span data-ttu-id="ee276-242">Gestione della compilazione in Team Services</span><span class="sxs-lookup"><span data-stu-id="ee276-242">Build management in Team Services</span></span>](https://www.visualstudio.com/docs/build/overview)
* [<span data-ttu-id="ee276-243">Gestione della versione in Team Services</span><span class="sxs-lookup"><span data-stu-id="ee276-243">Release management in Team Services</span></span>](https://www.visualstudio.com/docs/release/overview)

