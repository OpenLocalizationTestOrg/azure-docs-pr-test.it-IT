---
title: gruppi di sicurezza aaaNetwork in Azure | Documenti Microsoft
description: Informazioni su come flusso di traffico tooisolate e il controllo all'interno di reti virtuali tramite firewall hello distribuito in Azure utilizzando i gruppi di sicurezza di rete.
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: tysonn
ms.assetid: 20e850fc-6456-4b5f-9a3f-a8379b052bc9
ms.service: virtual-network
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/11/2016
ms.author: jdial
ms.openlocfilehash: 3528ce833dab17977327c3c9ae0e78316e5e6a05
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="filter-network-traffic-with-network-security-groups"></a><span data-ttu-id="d6408-103">Filtrare il traffico di rete con gruppi di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="d6408-103">Filter network traffic with network security groups</span></span>

<span data-ttu-id="d6408-104">Un rete gruppo di sicurezza () contiene un elenco di regole di sicurezza che consentono o negano tooresources il traffico di rete connessa tooAzure reti virtuali (VNet).</span><span class="sxs-lookup"><span data-stu-id="d6408-104">A network security group (NSG) contains a list of security rules that allow or deny network traffic tooresources connected tooAzure Virtual Networks (VNet).</span></span> <span data-ttu-id="d6408-105">NSGs può essere associato toosubnets, singole macchine virtuali (classico), o interfacce di rete (NIC) collegati tooVMs Gestione risorse ().</span><span class="sxs-lookup"><span data-stu-id="d6408-105">NSGs can be associated toosubnets, individual VMs (classic), or individual network interfaces (NIC) attached tooVMs (Resource Manager).</span></span> <span data-ttu-id="d6408-106">Quando un gruppo è subnet tooa associato, hello regole tooall risorse toohello connesso subnet.</span><span class="sxs-lookup"><span data-stu-id="d6408-106">When an NSG is associated tooa subnet, hello rules apply tooall resources connected toohello subnet.</span></span> <span data-ttu-id="d6408-107">Il traffico può essere limitato ulteriormente associando anche un gruppo tooa macchina virtuale o scheda di rete.</span><span class="sxs-lookup"><span data-stu-id="d6408-107">Traffic can further be restricted by also associating an NSG tooa VM or NIC.</span></span>

> [!NOTE]
> <span data-ttu-id="d6408-108">Azure offre due modelli di distribuzione per creare e usare le risorse: [Gestione risorse e la distribuzione classica](../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="d6408-108">Azure has two different deployment models for creating and working with resources:  [Resource Manager and classic](../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="d6408-109">In questo articolo viene illustrato l'utilizzo di entrambi i modelli, ma Microsoft consiglia di utilizzano il modello di gestione risorse hello più nuove distribuzioni.</span><span class="sxs-lookup"><span data-stu-id="d6408-109">This article covers using both models, but Microsoft recommends that most new deployments use hello Resource Manager model.</span></span>

## <a name="nsg-resource"></a><span data-ttu-id="d6408-110">Risorsa del gruppo di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="d6408-110">NSG resource</span></span>
<span data-ttu-id="d6408-111">NSGs contenere hello le proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="d6408-111">NSGs contain hello following properties:</span></span>

| <span data-ttu-id="d6408-112">Proprietà</span><span class="sxs-lookup"><span data-stu-id="d6408-112">Property</span></span> | <span data-ttu-id="d6408-113">Descrizione</span><span class="sxs-lookup"><span data-stu-id="d6408-113">Description</span></span> | <span data-ttu-id="d6408-114">Vincoli</span><span class="sxs-lookup"><span data-stu-id="d6408-114">Constraints</span></span> | <span data-ttu-id="d6408-115">Considerazioni</span><span class="sxs-lookup"><span data-stu-id="d6408-115">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="d6408-116">Nome</span><span class="sxs-lookup"><span data-stu-id="d6408-116">Name</span></span> |<span data-ttu-id="d6408-117">Nome per hello NSG</span><span class="sxs-lookup"><span data-stu-id="d6408-117">Name for hello NSG</span></span> |<span data-ttu-id="d6408-118">Deve essere univoco all'interno di area hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-118">Must be unique within hello region.</span></span><br/><span data-ttu-id="d6408-119">Può contenere lettere, numeri, caratteri di sottolineatura, punti e trattini.</span><span class="sxs-lookup"><span data-stu-id="d6408-119">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="d6408-120">Deve iniziare con una lettera o un numero.</span><span class="sxs-lookup"><span data-stu-id="d6408-120">Must start with a letter or number.</span></span><br/><span data-ttu-id="d6408-121">Deve terminare con una lettera, un numero o un carattere di sottolineatura.</span><span class="sxs-lookup"><span data-stu-id="d6408-121">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="d6408-122">Non può superare gli 80 caratteri.</span><span class="sxs-lookup"><span data-stu-id="d6408-122">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="d6408-123">Poiché potrebbe essere necessario toocreate NSGs diversi, assicurarsi di avere una convenzione di denominazione che rende facile tooidentify funzione hello il NSGs.</span><span class="sxs-lookup"><span data-stu-id="d6408-123">Since you may need toocreate several NSGs, make sure you have a naming convention that makes it easy tooidentify hello function of your NSGs.</span></span> |
| <span data-ttu-id="d6408-124">Region</span><span class="sxs-lookup"><span data-stu-id="d6408-124">Region</span></span> |<span data-ttu-id="d6408-125">Azure [area](https://azure.microsoft.com/regions) in hello gruppo è stato creato.</span><span class="sxs-lookup"><span data-stu-id="d6408-125">Azure [region](https://azure.microsoft.com/regions) where hello NSG is created.</span></span> |<span data-ttu-id="d6408-126">NSGs può essere solo tooresources associato all'interno di hello hello NSG stessa area.</span><span class="sxs-lookup"><span data-stu-id="d6408-126">NSGs can only be associated tooresources within hello same region as hello NSG.</span></span> |<span data-ttu-id="d6408-127">toolearn su quanti NSGs per area, è possibile avere letto hello [Azure limita](../azure-subscription-service-limits.md#virtual-networking-limits-classic) articolo.</span><span class="sxs-lookup"><span data-stu-id="d6408-127">toolearn about how many NSGs you can have per region, read hello [Azure limits](../azure-subscription-service-limits.md#virtual-networking-limits-classic) article.</span></span>|
| <span data-ttu-id="d6408-128">Gruppo di risorse</span><span class="sxs-lookup"><span data-stu-id="d6408-128">Resource group</span></span> |<span data-ttu-id="d6408-129">Hello [gruppo di risorse](../azure-resource-manager/resource-group-overview.md#resource-groups) hello nel gruppo.</span><span class="sxs-lookup"><span data-stu-id="d6408-129">hello [resource group](../azure-resource-manager/resource-group-overview.md#resource-groups) hello NSG exists in.</span></span> |<span data-ttu-id="d6408-130">Anche se è presente un gruppo in un gruppo di risorse, può essere associato tooresources in qualsiasi gruppo di risorse come risorsa hello fa parte di hello stessa area Azure hello gruppo.</span><span class="sxs-lookup"><span data-stu-id="d6408-130">Although an NSG exists in a resource group, it can be associated tooresources in any resource group, as long as hello resource is part of hello same Azure region as hello NSG.</span></span> |<span data-ttu-id="d6408-131">Gruppi di risorse è toomanage utilizzati insieme, come un'unità di distribuzione di più risorse.</span><span class="sxs-lookup"><span data-stu-id="d6408-131">Resource groups are used toomanage multiple resources together, as a deployment unit.</span></span><br/><span data-ttu-id="d6408-132">È possibile considerare il raggruppamento hello NSG con risorse di cui che è associata.</span><span class="sxs-lookup"><span data-stu-id="d6408-132">You may consider grouping hello NSG with resources it is associated to.</span></span> |
| <span data-ttu-id="d6408-133">Regole</span><span class="sxs-lookup"><span data-stu-id="d6408-133">Rules</span></span> |<span data-ttu-id="d6408-134">Regole in ingresso e in uscita che definiscono il traffico consentito o rifiutato.</span><span class="sxs-lookup"><span data-stu-id="d6408-134">Inbound or outbound rules that define what traffic is allowed or denied.</span></span> | |<span data-ttu-id="d6408-135">Vedere hello [regole NSG](#Nsg-rules) sezione di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="d6408-135">See hello [NSG rules](#Nsg-rules) section of this article.</span></span> |

> [!NOTE]
> <span data-ttu-id="d6408-136">ACL basati su endpoint e sicurezza di rete gruppi non sono supportati in hello stessa istanza di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d6408-136">Endpoint-based ACLs and network security groups are not supported on hello same VM instance.</span></span> <span data-ttu-id="d6408-137">Se si desidera toouse un gruppo e si dispone già di un endpoint ACL sul posto, è necessario rimuovere prima endpoint hello ACL.</span><span class="sxs-lookup"><span data-stu-id="d6408-137">If you want toouse an NSG and have an endpoint ACL already in place, first remove hello endpoint ACL.</span></span> <span data-ttu-id="d6408-138">modalità di lettura di un ACL, tooremove toolearn hello [Gestione controllo elenchi accesso (ACL) per gli endpoint tramite PowerShell](virtual-networks-acl-powershell.md) articolo.</span><span class="sxs-lookup"><span data-stu-id="d6408-138">toolearn how tooremove an ACL, read hello [Managing Access Control Lists (ACLs) for Endpoints by using PowerShell](virtual-networks-acl-powershell.md) article.</span></span>
> 

### <a name="nsg-rules"></a><span data-ttu-id="d6408-139">Regole NSG</span><span class="sxs-lookup"><span data-stu-id="d6408-139">NSG rules</span></span>
<span data-ttu-id="d6408-140">Regole di NSG contengono hello le proprietà seguenti:</span><span class="sxs-lookup"><span data-stu-id="d6408-140">NSG rules contain hello following properties:</span></span>

| <span data-ttu-id="d6408-141">Proprietà</span><span class="sxs-lookup"><span data-stu-id="d6408-141">Property</span></span> | <span data-ttu-id="d6408-142">Descrizione</span><span class="sxs-lookup"><span data-stu-id="d6408-142">Description</span></span> | <span data-ttu-id="d6408-143">Vincoli</span><span class="sxs-lookup"><span data-stu-id="d6408-143">Constraints</span></span> | <span data-ttu-id="d6408-144">Considerazioni</span><span class="sxs-lookup"><span data-stu-id="d6408-144">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="d6408-145">**Nome**</span><span class="sxs-lookup"><span data-stu-id="d6408-145">**Name**</span></span> |<span data-ttu-id="d6408-146">Nome regola hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-146">Name for hello rule.</span></span> |<span data-ttu-id="d6408-147">Deve essere univoco all'interno di area hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-147">Must be unique within hello region.</span></span><br/><span data-ttu-id="d6408-148">Può contenere lettere, numeri, caratteri di sottolineatura, punti e trattini.</span><span class="sxs-lookup"><span data-stu-id="d6408-148">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="d6408-149">Deve iniziare con una lettera o un numero.</span><span class="sxs-lookup"><span data-stu-id="d6408-149">Must start with a letter or number.</span></span><br/><span data-ttu-id="d6408-150">Deve terminare con una lettera, un numero o un carattere di sottolineatura.</span><span class="sxs-lookup"><span data-stu-id="d6408-150">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="d6408-151">Non può superare gli 80 caratteri.</span><span class="sxs-lookup"><span data-stu-id="d6408-151">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="d6408-152">Si potrebbe dispone di diverse regole all'interno di un gruppo, quindi assicurarsi che seguire una convenzione di denominazione che consente di funzione hello tooidentify della regola.</span><span class="sxs-lookup"><span data-stu-id="d6408-152">You may have several rules within an NSG, so make sure you follow a naming convention that allows you tooidentify hello function of your rule.</span></span> |
| <span data-ttu-id="d6408-153">**Protocollo**</span><span class="sxs-lookup"><span data-stu-id="d6408-153">**Protocol**</span></span> |<span data-ttu-id="d6408-154">Protocollo toomatch per regola hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-154">Protocol toomatch for hello rule.</span></span> |<span data-ttu-id="d6408-155">TCP, UDP o *</span><span class="sxs-lookup"><span data-stu-id="d6408-155">TCP, UDP, or *</span></span> |<span data-ttu-id="d6408-156">Utilizzare * come un protocollo include ICMP (solo traffico est-ovest), come come TCP e UDP e può ridurre il numero di hello regole, è necessario.</span><span class="sxs-lookup"><span data-stu-id="d6408-156">Using * as a protocol includes ICMP (East-West traffic only), as well as UDP and TCP, and may reduce hello number of rules you need.</span></span><br/><span data-ttu-id="d6408-157">AT hello stesso tempo, utilizzando * potrebbe essere troppo ampia un approccio, pertanto è consigliabile utilizzare * solo quando necessario.</span><span class="sxs-lookup"><span data-stu-id="d6408-157">At hello same time, using * might be too broad an approach, so it's recommended that you use * only when necessary.</span></span> |
| <span data-ttu-id="d6408-158">**Intervallo porte di origine**</span><span class="sxs-lookup"><span data-stu-id="d6408-158">**Source port range**</span></span> |<span data-ttu-id="d6408-159">Origine toomatch intervallo di porte per la regola di hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-159">Source port range toomatch for hello rule.</span></span> |<span data-ttu-id="d6408-160">Numero di porta da 1 too65535, intervallo di porte singolo (esempio: 1-65535), o * (per tutte le porte).</span><span class="sxs-lookup"><span data-stu-id="d6408-160">Single port number from 1 too65535, port range (example: 1-65535), or * (for all ports).</span></span> |<span data-ttu-id="d6408-161">Le porte di origine potrebbero essere temporanee.</span><span class="sxs-lookup"><span data-stu-id="d6408-161">Source ports could be ephemeral.</span></span> <span data-ttu-id="d6408-162">A meno che il programma client non usi una porta specifica, usare * nella maggior parte dei casi.</span><span class="sxs-lookup"><span data-stu-id="d6408-162">Unless your client program is using a specific port, use * in most cases.</span></span><br/><span data-ttu-id="d6408-163">Provare gli intervalli di porte toouse come possibili tooavoid hello necessario per più regole.</span><span class="sxs-lookup"><span data-stu-id="d6408-163">Try toouse port ranges as much as possible tooavoid hello need for multiple rules.</span></span><br/><span data-ttu-id="d6408-164">Non è possibile raggruppare più porte o intervalli di porte con una virgola.</span><span class="sxs-lookup"><span data-stu-id="d6408-164">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="d6408-165">**Intervallo di porte di destinazione**</span><span class="sxs-lookup"><span data-stu-id="d6408-165">**Destination port range**</span></span> |<span data-ttu-id="d6408-166">Destinazione toomatch intervallo di porte per la regola di hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-166">Destination port range toomatch for hello rule.</span></span> |<span data-ttu-id="d6408-167">Numero di porta da 1 too65535, intervallo di porte singolo (esempio: 1-65535), o \* (per tutte le porte).</span><span class="sxs-lookup"><span data-stu-id="d6408-167">Single port number from 1 too65535, port range (example: 1-65535), or \* (for all ports).</span></span> |<span data-ttu-id="d6408-168">Provare gli intervalli di porte toouse come possibili tooavoid hello necessario per più regole.</span><span class="sxs-lookup"><span data-stu-id="d6408-168">Try toouse port ranges as much as possible tooavoid hello need for multiple rules.</span></span><br/><span data-ttu-id="d6408-169">Non è possibile raggruppare più porte o intervalli di porte con una virgola.</span><span class="sxs-lookup"><span data-stu-id="d6408-169">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="d6408-170">**Prefisso dell'indirizzo di origine**</span><span class="sxs-lookup"><span data-stu-id="d6408-170">**Source address prefix**</span></span> |<span data-ttu-id="d6408-171">Origine indirizzo prefisso o un tag toomatch per regola hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-171">Source address prefix or tag toomatch for hello rule.</span></span> |<span data-ttu-id="d6408-172">Singolo indirizzo IP (ad esempio, 10.10.10.10), subnet IP (ad esempio, 192.168.1.0/24), [tag predefinito](#default-tags) o * (per tutti gli indirizzi).</span><span class="sxs-lookup"><span data-stu-id="d6408-172">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="d6408-173">Considerare l'utilizzo di intervalli, i tag predefiniti, e * numero hello tooreduce di regole.</span><span class="sxs-lookup"><span data-stu-id="d6408-173">Consider using ranges, default tags, and * tooreduce hello number of rules.</span></span> |
| <span data-ttu-id="d6408-174">**Prefisso dell’indirizzo di destinazione**</span><span class="sxs-lookup"><span data-stu-id="d6408-174">**Destination address prefix**</span></span> |<span data-ttu-id="d6408-175">Destinazione indirizzo prefisso o un tag toomatch per regola hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-175">Destination address prefix or tag toomatch for hello rule.</span></span> | <span data-ttu-id="d6408-176">Singolo indirizzo IP (ad esempio, 10.10.10.10), subnet IP (ad esempio, 192.168.1.0/24), [tag predefinito](#default-tags) o * (per tutti gli indirizzi).</span><span class="sxs-lookup"><span data-stu-id="d6408-176">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="d6408-177">Considerare l'utilizzo di intervalli, i tag predefiniti, e * numero hello tooreduce di regole.</span><span class="sxs-lookup"><span data-stu-id="d6408-177">Consider using ranges, default tags, and * tooreduce hello number of rules.</span></span> |
| <span data-ttu-id="d6408-178">**Direzione**</span><span class="sxs-lookup"><span data-stu-id="d6408-178">**Direction**</span></span> |<span data-ttu-id="d6408-179">Direzione del traffico toomatch per regola hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-179">Direction of traffic toomatch for hello rule.</span></span> |<span data-ttu-id="d6408-180">In ingresso o in uscita.</span><span class="sxs-lookup"><span data-stu-id="d6408-180">Inbound or outbound.</span></span> |<span data-ttu-id="d6408-181">Le regole in ingresso e in uscita vengono elaborate separatamente, in base alla direzione.</span><span class="sxs-lookup"><span data-stu-id="d6408-181">Inbound and outbound rules are processed separately, based on direction.</span></span> |
| <span data-ttu-id="d6408-182">**Priorità**</span><span class="sxs-lookup"><span data-stu-id="d6408-182">**Priority**</span></span> |<span data-ttu-id="d6408-183">Le regole vengono controllate in ordine di hello di priorità.</span><span class="sxs-lookup"><span data-stu-id="d6408-183">Rules are checked in hello order of priority.</span></span> <span data-ttu-id="d6408-184">Dopo che è stata applicata una regola, non viene verificata la corrispondenza di altre regole.</span><span class="sxs-lookup"><span data-stu-id="d6408-184">Once a rule applies, no more rules are tested for matching.</span></span> | <span data-ttu-id="d6408-185">Numero compreso tra 100 e 4096.</span><span class="sxs-lookup"><span data-stu-id="d6408-185">Number between 100 and 4096.</span></span> | <span data-ttu-id="d6408-186">È consigliabile creare regole del passaggio di priorità per 100 per ogni spazio tooleave regola per le nuove regole che è possibile creare in hello future.</span><span class="sxs-lookup"><span data-stu-id="d6408-186">Consider creating rules jumping priorities by 100 for each rule tooleave space for new rules you might create in hello future.</span></span> |
| <span data-ttu-id="d6408-187">**Accedere**</span><span class="sxs-lookup"><span data-stu-id="d6408-187">**Access**</span></span> |<span data-ttu-id="d6408-188">Tipo di accesso tooapply se hello regola corrispondente.</span><span class="sxs-lookup"><span data-stu-id="d6408-188">Type of access tooapply if hello rule matches.</span></span> | <span data-ttu-id="d6408-189">Consentire o rifiutare.</span><span class="sxs-lookup"><span data-stu-id="d6408-189">Allow or deny.</span></span> | <span data-ttu-id="d6408-190">Tenere presente che se non è presente una regola di autorizzazione per un pacchetto, hello verrà ignorato.</span><span class="sxs-lookup"><span data-stu-id="d6408-190">Keep in mind that if an allow rule is not found for a packet, hello packet is dropped.</span></span> |

<span data-ttu-id="d6408-191">I gruppi di sicurezza di rete contengono due set di regole: le regola in ingresso e quelle in uscita.</span><span class="sxs-lookup"><span data-stu-id="d6408-191">NSGs contain two sets of rules: Inbound and outbound.</span></span> <span data-ttu-id="d6408-192">priorità di Hello per una regola deve essere univoca all'interno di ogni set.</span><span class="sxs-lookup"><span data-stu-id="d6408-192">hello priority for a rule must be unique within each set.</span></span> 

![Elaborazione delle regole dei gruppi di sicurezza di rete](./media/virtual-network-nsg-overview/figure3.png) 

<span data-ttu-id="d6408-194">immagine precedente Hello viene illustrata la modalità di elaborazione delle regole di gruppo.</span><span class="sxs-lookup"><span data-stu-id="d6408-194">hello previous picture shows how NSG rules are processed.</span></span>

### <a name="default-tags"></a><span data-ttu-id="d6408-195">Tag predefiniti</span><span class="sxs-lookup"><span data-stu-id="d6408-195">Default Tags</span></span>
<span data-ttu-id="d6408-196">I tag predefiniti sono identificatori forniti dal sistema tooaddress una categoria di indirizzi IP.</span><span class="sxs-lookup"><span data-stu-id="d6408-196">Default tags are system-provided identifiers tooaddress a category of IP addresses.</span></span> <span data-ttu-id="d6408-197">È possibile utilizzare i tag predefiniti in hello **il prefisso di indirizzo di origine** e **prefisso di indirizzo di destinazione** proprietà di qualsiasi regola.</span><span class="sxs-lookup"><span data-stu-id="d6408-197">You can use default tags in hello **source address prefix** and **destination address prefix** properties of any rule.</span></span> <span data-ttu-id="d6408-198">Esistono tre tag predefiniti utilizzabili.</span><span class="sxs-lookup"><span data-stu-id="d6408-198">There are three default tags you can use:</span></span>

* <span data-ttu-id="d6408-199">**VirtualNetwork** Gestione risorse () (**VIRTUAL_NETWORK** per classica): questo tag include spazio degli indirizzi di rete virtuale hello (intervalli CIDR definiti in Azure), tutti gli spazi degli indirizzi locale connesso e connesso Azure le reti virtuali (reti locali).</span><span class="sxs-lookup"><span data-stu-id="d6408-199">**VirtualNetwork** (Resource Manager) (**VIRTUAL_NETWORK** for classic): This tag includes hello virtual network address space (CIDR ranges defined in Azure), all connected on-premises address spaces, and connected Azure VNets (local networks).</span></span>
* <span data-ttu-id="d6408-200">**AzureLoadBalancer** (Resource Manager) o **AZURE_LOADBALANCER** (distribuzione classica): questo tag identifica il servizio di bilanciamento del carico dell'infrastruttura di Azure.</span><span class="sxs-lookup"><span data-stu-id="d6408-200">**AzureLoadBalancer** (Resource Manager) (**AZURE_LOADBALANCER** for classic): This tag denotes Azure’s infrastructure load balancer.</span></span> <span data-ttu-id="d6408-201">tag Hello traduce tooan derivano IP dei Data Center di Azure in cui di probe di integrità di Azure.</span><span class="sxs-lookup"><span data-stu-id="d6408-201">hello tag translates tooan Azure datacenter IP where Azure’s health probes originate.</span></span>
* <span data-ttu-id="d6408-202">**Internet** Gestione risorse () (**INTERNET** per classica): questo tag indica spazio di indirizzi IP hello che è di fuori di rete virtuale hello e raggiungibili dalla rete Internet pubblica.</span><span class="sxs-lookup"><span data-stu-id="d6408-202">**Internet** (Resource Manager) (**INTERNET** for classic): This tag denotes hello IP address space that is outside hello virtual network and reachable by public Internet.</span></span> <span data-ttu-id="d6408-203">intervallo di Hello include hello [spazio IP pubblico di Azure proprietà](https://www.microsoft.com/download/details.aspx?id=41653).</span><span class="sxs-lookup"><span data-stu-id="d6408-203">hello range includes hello [Azure owned public IP space](https://www.microsoft.com/download/details.aspx?id=41653).</span></span>

### <a name="default-rules"></a><span data-ttu-id="d6408-204">Regole predefinite</span><span class="sxs-lookup"><span data-stu-id="d6408-204">Default rules</span></span>
<span data-ttu-id="d6408-205">Tutti i gruppi di sicurezza di rete contengono un set di regole predefinite.</span><span class="sxs-lookup"><span data-stu-id="d6408-205">All NSGs contain a set of default rules.</span></span> <span data-ttu-id="d6408-206">le regole predefinite di Hello non possono essere eliminate, ma poiché vengono assegnati priorità più bassa hello, possono essere sostituite dalle regole di hello creati.</span><span class="sxs-lookup"><span data-stu-id="d6408-206">hello default rules cannot be deleted, but because they are assigned hello lowest priority, they can be overridden by hello rules that you create.</span></span> 

<span data-ttu-id="d6408-207">le regole predefinite di Hello consentono e non consentire il traffico come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="d6408-207">hello default rules allow and disallow traffic as follows:</span></span>
- <span data-ttu-id="d6408-208">**Rete virtuale:** il traffico che ha origine e termina in una rete virtuale è consentito sia in ingresso che in uscita.</span><span class="sxs-lookup"><span data-stu-id="d6408-208">**Virtual network:** Traffic originating and ending in a virtual network is allowed both in inbound and outbound directions.</span></span>
- <span data-ttu-id="d6408-209">**Internet:** il traffico in uscita è consentito, mentre il traffico in ingresso viene bloccato.</span><span class="sxs-lookup"><span data-stu-id="d6408-209">**Internet:** Outbound traffic is allowed, but inbound traffic is blocked.</span></span>
- <span data-ttu-id="d6408-210">**Bilanciamento del carico:** integrità hello tooprobe di Azure consente carico bilanciamento del carico delle macchine virtuali e istanze del ruolo.</span><span class="sxs-lookup"><span data-stu-id="d6408-210">**Load balancer:** Allow Azure’s load balancer tooprobe hello health of your VMs and role instances.</span></span> <span data-ttu-id="d6408-211">Se non si usa un set con bilanciamento del carico, è possibile eseguire l'override di questa regola.</span><span class="sxs-lookup"><span data-stu-id="d6408-211">If you are not using a load balanced set you can override this rule.</span></span>

<span data-ttu-id="d6408-212">**Regole predefinite In ingresso**</span><span class="sxs-lookup"><span data-stu-id="d6408-212">**Inbound default rules**</span></span>

| <span data-ttu-id="d6408-213">Nome</span><span class="sxs-lookup"><span data-stu-id="d6408-213">Name</span></span> | <span data-ttu-id="d6408-214">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-214">Priority</span></span> | <span data-ttu-id="d6408-215">IP di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-215">Source IP</span></span> | <span data-ttu-id="d6408-216">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-216">Source Port</span></span> | <span data-ttu-id="d6408-217">IP di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-217">Destination IP</span></span> | <span data-ttu-id="d6408-218">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-218">Destination Port</span></span> | <span data-ttu-id="d6408-219">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-219">Protocol</span></span> | <span data-ttu-id="d6408-220">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-220">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-221">AllowVNetInBound</span><span class="sxs-lookup"><span data-stu-id="d6408-221">AllowVNetInBound</span></span> |<span data-ttu-id="d6408-222">65000</span><span class="sxs-lookup"><span data-stu-id="d6408-222">65000</span></span> | <span data-ttu-id="d6408-223">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="d6408-223">VirtualNetwork</span></span> | * | <span data-ttu-id="d6408-224">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="d6408-224">VirtualNetwork</span></span> | * | * | <span data-ttu-id="d6408-225">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-225">Allow</span></span> |
| <span data-ttu-id="d6408-226">AllowAzureLoadBalancerInBound</span><span class="sxs-lookup"><span data-stu-id="d6408-226">AllowAzureLoadBalancerInBound</span></span> | <span data-ttu-id="d6408-227">65001</span><span class="sxs-lookup"><span data-stu-id="d6408-227">65001</span></span> | <span data-ttu-id="d6408-228">AzureLoadBalancer</span><span class="sxs-lookup"><span data-stu-id="d6408-228">AzureLoadBalancer</span></span> | * | * | * | * | <span data-ttu-id="d6408-229">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-229">Allow</span></span> |
| <span data-ttu-id="d6408-230">DenyAllInBound</span><span class="sxs-lookup"><span data-stu-id="d6408-230">DenyAllInBound</span></span> |<span data-ttu-id="d6408-231">65500</span><span class="sxs-lookup"><span data-stu-id="d6408-231">65500</span></span> | * | * | * | * | * | <span data-ttu-id="d6408-232">NEGA</span><span class="sxs-lookup"><span data-stu-id="d6408-232">Deny</span></span> |

<span data-ttu-id="d6408-233">**Regole predefinite In uscita**</span><span class="sxs-lookup"><span data-stu-id="d6408-233">**Outbound default rules**</span></span>

| <span data-ttu-id="d6408-234">Nome</span><span class="sxs-lookup"><span data-stu-id="d6408-234">Name</span></span> | <span data-ttu-id="d6408-235">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-235">Priority</span></span> | <span data-ttu-id="d6408-236">IP di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-236">Source IP</span></span> | <span data-ttu-id="d6408-237">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-237">Source Port</span></span> | <span data-ttu-id="d6408-238">IP di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-238">Destination IP</span></span> | <span data-ttu-id="d6408-239">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-239">Destination Port</span></span> | <span data-ttu-id="d6408-240">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-240">Protocol</span></span> | <span data-ttu-id="d6408-241">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-241">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-242">AllowVnetOutBound</span><span class="sxs-lookup"><span data-stu-id="d6408-242">AllowVnetOutBound</span></span> | <span data-ttu-id="d6408-243">65000</span><span class="sxs-lookup"><span data-stu-id="d6408-243">65000</span></span> | <span data-ttu-id="d6408-244">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="d6408-244">VirtualNetwork</span></span> | * | <span data-ttu-id="d6408-245">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="d6408-245">VirtualNetwork</span></span> | * | * | <span data-ttu-id="d6408-246">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-246">Allow</span></span> |
| <span data-ttu-id="d6408-247">AllowInternetOutBound</span><span class="sxs-lookup"><span data-stu-id="d6408-247">AllowInternetOutBound</span></span> | <span data-ttu-id="d6408-248">65001</span><span class="sxs-lookup"><span data-stu-id="d6408-248">65001</span></span> | * | * | <span data-ttu-id="d6408-249">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-249">Internet</span></span> | * | * | <span data-ttu-id="d6408-250">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-250">Allow</span></span> |
| <span data-ttu-id="d6408-251">DenyAllOutBound</span><span class="sxs-lookup"><span data-stu-id="d6408-251">DenyAllOutBound</span></span> | <span data-ttu-id="d6408-252">65500</span><span class="sxs-lookup"><span data-stu-id="d6408-252">65500</span></span> | * | * | * | * | * | <span data-ttu-id="d6408-253">NEGA</span><span class="sxs-lookup"><span data-stu-id="d6408-253">Deny</span></span> |

## <a name="associating-nsgs"></a><span data-ttu-id="d6408-254">Associazione di gruppi di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="d6408-254">Associating NSGs</span></span>
<span data-ttu-id="d6408-255">È possibile associare un tooVMs gruppo schede di rete e subnet, a seconda del modello di distribuzione hello in uso, come indicato di seguito:</span><span class="sxs-lookup"><span data-stu-id="d6408-255">You can associate an NSG tooVMs, NICs, and subnets, depending on hello deployment model you are using, as follows:</span></span>

* <span data-ttu-id="d6408-256">**Macchina virtuale (solo versione classica):** vengono applicate le regole di sicurezza tooall traffico da e verso hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d6408-256">**VM (classic only):** Security rules are applied tooall traffic to/from hello VM.</span></span> 
* <span data-ttu-id="d6408-257">**Scheda di rete (solo per Gestione risorse):** vengono applicate le regole di sicurezza tooall traffico da e verso hello NIC hello NSG è associato.</span><span class="sxs-lookup"><span data-stu-id="d6408-257">**NIC (Resource Manager only):** Security rules are applied tooall traffic to/from hello NIC hello NSG is associated to.</span></span> <span data-ttu-id="d6408-258">In una macchina virtuale multi-NIC, è possibile applicare diversi (o hello stesso) tooeach gruppo NIC singolarmente.</span><span class="sxs-lookup"><span data-stu-id="d6408-258">In a multi-NIC VM, you can apply different (or hello same) NSG tooeach NIC individually.</span></span> 
* <span data-ttu-id="d6408-259">**Subnet (Gestione risorse e classica):** vengono applicate le regole di sicurezza tooany traffico da e verso le risorse connesso toohello rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="d6408-259">**Subnet (Resource Manager and classic):** Security rules are applied tooany traffic to/from any resources connected toohello VNet.</span></span>

<span data-ttu-id="d6408-260">È possibile associare diversi NSGs tooa VM (o una scheda di rete, a seconda del modello di distribuzione hello) e hello subnet connessa a una scheda di rete o di una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d6408-260">You can associate different NSGs tooa VM (or NIC, depending on hello deployment model) and hello subnet that a NIC or VM is connected to.</span></span> <span data-ttu-id="d6408-261">Le regole di sicurezza applicato toohello traffico, in base alla priorità, in ogni gruppo, in hello segue ordine:</span><span class="sxs-lookup"><span data-stu-id="d6408-261">Security rules are applied toohello traffic, by priority, in each NSG, in hello following order:</span></span>

- <span data-ttu-id="d6408-262">**Traffico in ingresso**</span><span class="sxs-lookup"><span data-stu-id="d6408-262">**Inbound traffic**</span></span>

  1. <span data-ttu-id="d6408-263">**GRUPPO applicato toosubnet:** se una subnet gruppo ha un traffico toodeny regole di corrispondenza, hello verrà ignorato.</span><span class="sxs-lookup"><span data-stu-id="d6408-263">**NSG applied toosubnet:** If a subnet NSG has a matching rule toodeny traffic, hello packet is dropped.</span></span>

  2. <span data-ttu-id="d6408-264">**GRUPPO applicato tooNIC** Gestione risorse () o alla macchina virtuale (classico): NSG VM\NIC se dispone di una regola di corrispondenza che impedisca il traffico, i pacchetti vengono eliminati in hello VM\NIC, anche se una subnet gruppo dispone di una regola di corrispondenza che consenta il traffico.</span><span class="sxs-lookup"><span data-stu-id="d6408-264">**NSG applied tooNIC** (Resource Manager) or VM (classic): If VM\NIC NSG has a matching rule that denies traffic, packets are dropped at hello VM\NIC, even if a subnet NSG has a matching rule that allows traffic.</span></span>

- <span data-ttu-id="d6408-265">**Traffico in uscita**</span><span class="sxs-lookup"><span data-stu-id="d6408-265">**Outbound traffic**</span></span>

  1. <span data-ttu-id="d6408-266">**GRUPPO applicato tooNIC** Gestione risorse () o alla macchina virtuale (classico): se un gruppo VM\NIC dispone di una regola di corrispondenza che impedisca il traffico, i pacchetti vengono eliminati.</span><span class="sxs-lookup"><span data-stu-id="d6408-266">**NSG applied tooNIC** (Resource Manager) or VM (classic): If a VM\NIC NSG has a matching rule that denies traffic, packets are dropped.</span></span>

  2. <span data-ttu-id="d6408-267">**GRUPPO applicato toosubnet:** se una subnet gruppo dispone di una regola di corrispondenza che impedisca il traffico, vengono ignorati pacchetti, anche se un gruppo VM\NIC dispone di una regola di corrispondenza che consenta il traffico.</span><span class="sxs-lookup"><span data-stu-id="d6408-267">**NSG applied toosubnet:** If a subnet NSG has a matching rule that denies traffic, packets are dropped, even if a VM\NIC NSG has a matching rule that allows traffic.</span></span>

> [!NOTE]
> <span data-ttu-id="d6408-268">Anche se è possibile associare solo un singolo gruppo tooa subnet VM o NIC; è possibile associare hello molte risorse stesso tooas gruppo desiderato.</span><span class="sxs-lookup"><span data-stu-id="d6408-268">Although you can only associate a single NSG tooa subnet, VM, or NIC; you can associate hello same NSG tooas many resources as you want.</span></span>
>

## <a name="implementation"></a><span data-ttu-id="d6408-269">Implementazione</span><span class="sxs-lookup"><span data-stu-id="d6408-269">Implementation</span></span>
<span data-ttu-id="d6408-270">È possibile implementare NSGs hello Gestione risorse o i modelli di distribuzione classica utilizzando hello seguenti strumenti:</span><span class="sxs-lookup"><span data-stu-id="d6408-270">You can implement NSGs in hello Resource Manager or classic deployment models using hello following tools:</span></span>

| <span data-ttu-id="d6408-271">Documentazione di distribuzione</span><span class="sxs-lookup"><span data-stu-id="d6408-271">Deployment tool</span></span> | <span data-ttu-id="d6408-272">Classico</span><span class="sxs-lookup"><span data-stu-id="d6408-272">Classic</span></span> | <span data-ttu-id="d6408-273">Gestione risorse</span><span class="sxs-lookup"><span data-stu-id="d6408-273">Resource Manager</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d6408-274">Portale di Azure</span><span class="sxs-lookup"><span data-stu-id="d6408-274">Azure portal</span></span>   | <span data-ttu-id="d6408-275">Sì</span><span class="sxs-lookup"><span data-stu-id="d6408-275">Yes</span></span> | [<span data-ttu-id="d6408-276">Sì</span><span class="sxs-lookup"><span data-stu-id="d6408-276">Yes</span></span>](virtual-networks-create-nsg-arm-pportal.md) |
| <span data-ttu-id="d6408-277">PowerShell</span><span class="sxs-lookup"><span data-stu-id="d6408-277">PowerShell</span></span>     | [<span data-ttu-id="d6408-278">Sì</span><span class="sxs-lookup"><span data-stu-id="d6408-278">Yes</span></span>](virtual-networks-create-nsg-classic-ps.md) | [<span data-ttu-id="d6408-279">Sì</span><span class="sxs-lookup"><span data-stu-id="d6408-279">Yes</span></span>](virtual-networks-create-nsg-arm-ps.md) |
| <span data-ttu-id="d6408-280">Interfaccia della riga di comando di Azure **versione 1**</span><span class="sxs-lookup"><span data-stu-id="d6408-280">Azure CLI **V1**</span></span>   | [<span data-ttu-id="d6408-281">Sì</span><span class="sxs-lookup"><span data-stu-id="d6408-281">Yes</span></span>](virtual-networks-create-nsg-classic-cli.md) | [<span data-ttu-id="d6408-282">Sì</span><span class="sxs-lookup"><span data-stu-id="d6408-282">Yes</span></span>](virtual-networks-create-nsg-cli-nodejs.md) |
| <span data-ttu-id="d6408-283">Interfaccia della riga di comando di Azure **versione 2**</span><span class="sxs-lookup"><span data-stu-id="d6408-283">Azure CLI **V2**</span></span>   | <span data-ttu-id="d6408-284">No</span><span class="sxs-lookup"><span data-stu-id="d6408-284">No</span></span> | [<span data-ttu-id="d6408-285">Sì</span><span class="sxs-lookup"><span data-stu-id="d6408-285">Yes</span></span>](virtual-networks-create-nsg-arm-cli.md) |
| <span data-ttu-id="d6408-286">Modello di Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="d6408-286">Azure Resource Manager template</span></span>   | <span data-ttu-id="d6408-287">No</span><span class="sxs-lookup"><span data-stu-id="d6408-287">No</span></span>  | [<span data-ttu-id="d6408-288">Sì</span><span class="sxs-lookup"><span data-stu-id="d6408-288">Yes</span></span>](virtual-networks-create-nsg-arm-template.md) |

## <a name="planning"></a><span data-ttu-id="d6408-289">Pianificazione</span><span class="sxs-lookup"><span data-stu-id="d6408-289">Planning</span></span>
<span data-ttu-id="d6408-290">Prima di implementare NSGs, è necessario hello tooanswer seguenti domande:</span><span class="sxs-lookup"><span data-stu-id="d6408-290">Before implementing NSGs, you need tooanswer hello following questions:</span></span>

1. <span data-ttu-id="d6408-291">I tipi di risorse si vogliono toofilter traffico tooor da?</span><span class="sxs-lookup"><span data-stu-id="d6408-291">What types of resources do you want toofilter traffic tooor from?</span></span> <span data-ttu-id="d6408-292">È possibile connettere risorse come interfacce di rete (Resource Manager), VM (distribuzione classica), servizi cloud, ambienti del servizio dell'applicazione e set di scalabilità di macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="d6408-292">You can connect resources such as NICs (Resource Manager), VMs (classic), Cloud Services, Application Service Environments, and VM Scale Sets.</span></span> 
2. <span data-ttu-id="d6408-293">Sono risorse hello è toofilter traffico da e verso toosubnets connesso in reti virtuali esistenti?</span><span class="sxs-lookup"><span data-stu-id="d6408-293">Are hello resources you want toofilter traffic to/from connected toosubnets in existing VNets?</span></span>

<span data-ttu-id="d6408-294">Per ulteriori informazioni sulla pianificazione per la sicurezza di rete in Azure, leggere hello [servizi Cloud e di sicurezza di rete](../best-practices-network-security.md) articolo.</span><span class="sxs-lookup"><span data-stu-id="d6408-294">For more information on planning for network security in Azure, read hello [Cloud services and network security](../best-practices-network-security.md) article.</span></span> 

## <a name="design-considerations"></a><span data-ttu-id="d6408-295">Considerazioni sulla progettazione</span><span class="sxs-lookup"><span data-stu-id="d6408-295">Design considerations</span></span>
<span data-ttu-id="d6408-296">Dopo avere stabilito le risposte hello domande toohello hello [pianificazione](#Planning) sezione, esaminare le sezioni seguenti prima di definire il NSGs hello:</span><span class="sxs-lookup"><span data-stu-id="d6408-296">Once you know hello answers toohello questions in hello [Planning](#Planning) section, review hello following sections before defining your NSGs:</span></span>

### <a name="limits"></a><span data-ttu-id="d6408-297">Limiti</span><span class="sxs-lookup"><span data-stu-id="d6408-297">Limits</span></span>
<span data-ttu-id="d6408-298">Vi sono limiti numero toohello NSGs è consentito in una sottoscrizione e numero di regole per ogni gruppo.</span><span class="sxs-lookup"><span data-stu-id="d6408-298">There are limits toohello number of NSGs you can have in a subscription and number of rules per NSG.</span></span> <span data-ttu-id="d6408-299">informazioni sui limiti di hello, leggere hello toolearn [Azure limita](../azure-subscription-service-limits.md#networking-limits) articolo.</span><span class="sxs-lookup"><span data-stu-id="d6408-299">toolearn more about hello limits, read hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article.</span></span>

### <a name="vnet-and-subnet-design"></a><span data-ttu-id="d6408-300">Progettazione di reti virtuali e subnet</span><span class="sxs-lookup"><span data-stu-id="d6408-300">VNet and subnet design</span></span>
<span data-ttu-id="d6408-301">Poiché NSGs possono essere applicati toosubnets, è possibile ridurre il numero di hello di NSGs raggruppamento delle risorse in base alla subnet e applicando NSGs toosubnets.</span><span class="sxs-lookup"><span data-stu-id="d6408-301">Since NSGs can be applied toosubnets, you can minimize hello number of NSGs by grouping your resources by subnet, and applying NSGs toosubnets.</span></span>  <span data-ttu-id="d6408-302">Se si decide di tooapply NSGs toosubnets, è possibile che le reti virtuali esistenti e si dispone di subnet non definite con NSGs presente.</span><span class="sxs-lookup"><span data-stu-id="d6408-302">If you decide tooapply NSGs toosubnets, you may find that existing VNets and subnets you have were not defined with NSGs in mind.</span></span> <span data-ttu-id="d6408-303">È possibile necessario toodefine toosupport di reti virtuali e le subnet di nuovo la struttura di gruppo e distribuire le nuove subnet nuova tooyour di risorse.</span><span class="sxs-lookup"><span data-stu-id="d6408-303">You may need toodefine new VNets and subnets toosupport your NSG design and deploy your new resources tooyour new subnets.</span></span> <span data-ttu-id="d6408-304">È quindi possibile definire un toomove strategia di migrazione nuove subnet di risorse toohello esistente.</span><span class="sxs-lookup"><span data-stu-id="d6408-304">You could then define a migration strategy toomove existing resources toohello new subnets.</span></span> 

### <a name="special-rules"></a><span data-ttu-id="d6408-305">Regole speciali</span><span class="sxs-lookup"><span data-stu-id="d6408-305">Special rules</span></span>
<span data-ttu-id="d6408-306">Se si blocca il traffico consentito in base alle regole di hello, l'infrastruttura non può comunicare con servizi di Azure essenziali:</span><span class="sxs-lookup"><span data-stu-id="d6408-306">If you block traffic allowed by hello following rules, your infrastructure can't communicate with essential Azure services:</span></span>

* <span data-ttu-id="d6408-307">**Indirizzo IP virtuale del nodo host hello:** servizi di infrastruttura di base come DHCP, DNS e il monitoraggio dello stato vengono forniti tramite host virtualizzato hello 168.63.129.16 l'indirizzo IP.</span><span class="sxs-lookup"><span data-stu-id="d6408-307">**Virtual IP of hello host node:** Basic infrastructure services such as DHCP, DNS, and health monitoring are provided through hello virtualized host IP address 168.63.129.16.</span></span> <span data-ttu-id="d6408-308">Questo indirizzo IP pubblico appartiene tooMicrosoft ed è hello unico indirizzo IP virtualizzato usato in tutte le aree a questo scopo.</span><span class="sxs-lookup"><span data-stu-id="d6408-308">This public IP address belongs tooMicrosoft and is hello only virtualized IP address used in all regions for this purpose.</span></span> <span data-ttu-id="d6408-309">Questo indirizzo IP viene eseguito il mapping toohello indirizzo IP fisico del computer server hello (nodo host) hosting hello macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d6408-309">This IP address maps toohello physical IP address of hello server machine (host node) hosting hello VM.</span></span> <span data-ttu-id="d6408-310">nodo host Hello funge da origine probe hello per hello inoltro DHCP hello e resolver ricorsivo DNS di hello carico probe di integrità del servizio di bilanciamento e probe di integrità macchina hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-310">hello host node acts as hello DHCP relay, hello DNS recursive resolver, and hello probe source for hello load balancer health probe and hello machine health probe.</span></span> <span data-ttu-id="d6408-311">Indirizzo IP toothis di comunicazione non è un attacco.</span><span class="sxs-lookup"><span data-stu-id="d6408-311">Communication toothis IP address is not an attack.</span></span>
* <span data-ttu-id="d6408-312">**Licenze (Servizio di gestione delle chiavi)**: le immagini Windows in esecuzione nelle VM devono essere concesse in licenza.</span><span class="sxs-lookup"><span data-stu-id="d6408-312">**Licensing (Key Management Service):** Windows images running in VMs must be licensed.</span></span> <span data-ttu-id="d6408-313">tooensure licenze, una richiesta viene inviata server host di servizio di gestione delle chiavi toohello che gestiscono tali query.</span><span class="sxs-lookup"><span data-stu-id="d6408-313">tooensure licensing, a request is sent toohello Key Management Service host servers that handle such queries.</span></span> <span data-ttu-id="d6408-314">Hello richiesta in uscita attraverso la porta 1688.</span><span class="sxs-lookup"><span data-stu-id="d6408-314">hello request is made outbound through port 1688.</span></span>

### <a name="icmp-traffic"></a><span data-ttu-id="d6408-315">Traffico ICMP</span><span class="sxs-lookup"><span data-stu-id="d6408-315">ICMP traffic</span></span>
<span data-ttu-id="d6408-316">le regole di gruppo correnti Hello consentono solo i protocolli *TCP* o *UDP*.</span><span class="sxs-lookup"><span data-stu-id="d6408-316">hello current NSG rules only allow for protocols *TCP* or *UDP*.</span></span> <span data-ttu-id="d6408-317">Non esiste un tag specifico per *ICMP*.</span><span class="sxs-lookup"><span data-stu-id="d6408-317">There is not a specific tag for *ICMP*.</span></span> <span data-ttu-id="d6408-318">Tuttavia, il traffico ICMP è consentito all'interno di una rete virtuale dalla regola predefinita di hello AllowVNetInBound, che consente di tooand il traffico da qualsiasi porta e protocollo all'interno di hello rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="d6408-318">However, ICMP traffic is allowed within a VNet by hello AllowVNetInBound default rule, that allows traffic tooand from any port and protocol within hello VNet.</span></span>

### <a name="subnets"></a><span data-ttu-id="d6408-319">Subnet</span><span class="sxs-lookup"><span data-stu-id="d6408-319">Subnets</span></span>
* <span data-ttu-id="d6408-320">Si consideri hello numero di livelli che richiede il carico di lavoro.</span><span class="sxs-lookup"><span data-stu-id="d6408-320">Consider hello number of tiers your workload requires.</span></span> <span data-ttu-id="d6408-321">Tramite una subnet, con una subnet toohello di gruppo applicato, è possibile isolare ogni livello.</span><span class="sxs-lookup"><span data-stu-id="d6408-321">Each tier can be isolated by using a subnet, with an NSG applied toohello subnet.</span></span> 
* <span data-ttu-id="d6408-322">Se è necessario tooimplement una subnet per un gateway VPN o un circuito ExpressRoute, **non** si applicano a una subnet toothat di gruppo.</span><span class="sxs-lookup"><span data-stu-id="d6408-322">If you need tooimplement a subnet for a VPN gateway, or ExpressRoute circuit, do **not** apply an NSG toothat subnet.</span></span> <span data-ttu-id="d6408-323">In caso contrario, la connettività cross-premise o tra reti virtuali potrebbe non funzionare.</span><span class="sxs-lookup"><span data-stu-id="d6408-323">If you do so, cross-VNet or cross-premises connectivity may fail.</span></span> 
* <span data-ttu-id="d6408-324">Se è necessario tooimplement un accessorio virtuale di rete (NVA), connettersi proprie subnet di hello NVA tooits e il nome di route definite dall'utente (UDR) tooand hello NVA.</span><span class="sxs-lookup"><span data-stu-id="d6408-324">If you need tooimplement a network virtual appliance (NVA), connect hello NVA tooits own subnet and create user-defined routes (UDR) tooand from hello NVA.</span></span> <span data-ttu-id="d6408-325">È possibile implementare un livello di subnet del traffico toofilter NSG da e verso questa subnet.</span><span class="sxs-lookup"><span data-stu-id="d6408-325">You can implement a subnet level NSG toofilter traffic in and out of this subnet.</span></span> <span data-ttu-id="d6408-326">ulteriori informazioni sulla UDRs, leggere hello toolearn [le route definite dall'utente](virtual-networks-udr-overview.md) articolo.</span><span class="sxs-lookup"><span data-stu-id="d6408-326">toolearn more about UDRs, read hello [User-defined routes](virtual-networks-udr-overview.md) article.</span></span>

### <a name="load-balancers"></a><span data-ttu-id="d6408-327">Servizi di bilanciamento del carico</span><span class="sxs-lookup"><span data-stu-id="d6408-327">Load balancers</span></span>
* <span data-ttu-id="d6408-328">Considerare l'indirizzo di rete e di bilanciamento del carico hello regole translation (NAT) per ogni servizio di bilanciamento del carico utilizzato da tutti i carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="d6408-328">Consider hello load balancing and network address translation (NAT) rules for each load balancer used by each of your workloads.</span></span> <span data-ttu-id="d6408-329">Le regole NAT sono pool back-end tooa associato che contiene le schede NIC di gestione risorse () o le istanze del ruolo di servizi Cloud di macchine virtuali / (classico).</span><span class="sxs-lookup"><span data-stu-id="d6408-329">NAT rules are bound tooa back-end pool that contains NICs (Resource Manager) or VMs/Cloud Services role instances (classic).</span></span> <span data-ttu-id="d6408-330">È consigliabile creare un gruppo per ogni pool back-end, consentendo solo il traffico mappato in base alle regole hello implementati in servizi di bilanciamento del carico hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-330">Consider creating an NSG for each back-end pool, allowing only traffic mapped through hello rules implemented in hello load balancers.</span></span> <span data-ttu-id="d6408-331">Creazione di un gruppo per ogni pool back-end garantisce che il traffico in arrivo pool back-end toohello direttamente (anziché tramite bilanciamento del carico hello), viene inoltre filtrato.</span><span class="sxs-lookup"><span data-stu-id="d6408-331">Creating an NSG for each back-end pool guarantees that traffic coming toohello back-end pool directly (rather than through hello load balancer), is also filtered.</span></span>
* <span data-ttu-id="d6408-332">Nelle distribuzioni classiche è creare endpoint che eseguono il mapping delle porte in un tooports bilanciamento di carico in cui le macchine virtuali o le istanze del ruolo.</span><span class="sxs-lookup"><span data-stu-id="d6408-332">In classic deployments, you create endpoints that map ports on a load balancer tooports on your VMs or role instances.</span></span> <span data-ttu-id="d6408-333">È anche possibile creare un proprio servizio di bilanciamento del carico pubblico tramite Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="d6408-333">You can also create your own individual public-facing load balancer through Resource Manager.</span></span> <span data-ttu-id="d6408-334">porta di destinazione Hello per il traffico in ingresso è della porta effettivamente hello in hello macchina virtuale o istanza del ruolo, non la porta hello esposta da un servizio di bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="d6408-334">hello destination port for incoming traffic is hello actual port in hello VM or role instance, not hello port exposed by a load balancer.</span></span> <span data-ttu-id="d6408-335">porta di origine Hello e l'indirizzo per hello connessione toohello su che macchina virtuale è una porta e indirizzo hello computer remoto in hello Internet, non la porta hello e indirizzo esposto dal servizio di bilanciamento del carico hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-335">hello source port and address for hello connection toohello VM is a port and address on hello remote computer in hello Internet, not hello port and address exposed by hello load balancer.</span></span>
* <span data-ttu-id="d6408-336">Quando si crea il traffico toofilter NSGs in arrivo tramite un servizio di bilanciamento del carico interno (ILB), hello porta e indirizzo intervallo di origine applicato provengono da hello computer, non hello bilanciamento del carico di origine.</span><span class="sxs-lookup"><span data-stu-id="d6408-336">When you create NSGs toofilter traffic coming through an internal load balancer (ILB), hello source port and address range applied are  from hello originating computer, not hello load balancer.</span></span> <span data-ttu-id="d6408-337">intervallo di porte e indirizzi di destinazione Hello sono quelle del computer di destinazione hello, non hello bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="d6408-337">hello destination port and address range are those of hello destination computer, not hello load balancer.</span></span>

### <a name="other"></a><span data-ttu-id="d6408-338">Altre</span><span class="sxs-lookup"><span data-stu-id="d6408-338">Other</span></span>
* <span data-ttu-id="d6408-339">Gli elenchi di controllo di accesso basati su endpoint (ACL) e NSGs non sono supportate in hello stessa istanza di macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="d6408-339">Endpoint-based access control lists (ACL) and NSGs are not supported on hello same VM instance.</span></span> <span data-ttu-id="d6408-340">Se si desidera toouse un gruppo e si dispone già di un endpoint ACL sul posto, è necessario rimuovere prima endpoint hello ACL.</span><span class="sxs-lookup"><span data-stu-id="d6408-340">If you want toouse an NSG and have an endpoint ACL already in place, first remove hello endpoint ACL.</span></span> <span data-ttu-id="d6408-341">Per informazioni su come tooremove un endpoint ACL, vedere hello [gestire gli ACL endpoint](virtual-networks-acl-powershell.md) articolo.</span><span class="sxs-lookup"><span data-stu-id="d6408-341">For information about how tooremove an endpoint ACL, see hello [Manage endpoint ACLs](virtual-networks-acl-powershell.md) article.</span></span>
* <span data-ttu-id="d6408-342">In Gestione risorse, è possibile utilizzare un tooa associata gruppo NIC per le macchine virtuali con più schede di rete tooenable management (accesso remoto) in una base per ogni scheda di rete.</span><span class="sxs-lookup"><span data-stu-id="d6408-342">In Resource Manager, you can use an NSG associated tooa NIC for VMs with multiple NICs tooenable management (remote access) on a per NIC basis.</span></span> <span data-ttu-id="d6408-343">Associazione univoco NSGs tooeach NIC consente la separazione dei tipi di traffico tra schede di rete.</span><span class="sxs-lookup"><span data-stu-id="d6408-343">Associating unique NSGs tooeach NIC enables separation of traffic types across NICs.</span></span>
* <span data-ttu-id="d6408-344">Utilizzare toohello simile di bilanciamento del carico, per filtrare il traffico proveniente da altre reti virtuali, è necessario utilizzare l'intervallo di indirizzi di origine di hello del computer remoto hello, non i gateway hello connessione hello reti virtuali.</span><span class="sxs-lookup"><span data-stu-id="d6408-344">Similar toohello use of load balancers, when filtering traffic from other VNets, you must use hello source address range of hello remote computer, not hello gateway connecting hello VNets.</span></span>
* <span data-ttu-id="d6408-345">Molti servizi di Azure non possono essere connesso tooVNets.</span><span class="sxs-lookup"><span data-stu-id="d6408-345">Many Azure services cannot be connected tooVNets.</span></span> <span data-ttu-id="d6408-346">Se una risorsa di Azure non è connesso tooa rete virtuale, è possibile utilizzare una risorsa di toohello NSG toofilter il traffico.</span><span class="sxs-lookup"><span data-stu-id="d6408-346">If an Azure resource is not connected tooa VNet, you cannot use an NSG toofilter traffic toohello resource.</span></span>  <span data-ttu-id="d6408-347">Leggere la documentazione di hello per i servizi di hello utilizzare toodetermine se il servizio di hello può essere connesso tooa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="d6408-347">Read hello documentation for hello services you use toodetermine whether hello service can be connected tooa VNet.</span></span>

## <a name="sample-deployment"></a><span data-ttu-id="d6408-348">Distribuzione di esempio</span><span class="sxs-lookup"><span data-stu-id="d6408-348">Sample deployment</span></span>
<span data-ttu-id="d6408-349">un'applicazione hello tooillustrate delle informazioni di hello in questo articolo, si consideri uno scenario comune di un'applicazione di due livello mostrato nella seguente immagine hello:</span><span class="sxs-lookup"><span data-stu-id="d6408-349">tooillustrate hello application of hello information in this article, consider a common scenario of a two tier application shown in hello following picture:</span></span>

![Gruppi di sicurezza di rete](./media/virtual-network-nsg-overview/figure1.png)

<span data-ttu-id="d6408-351">Come illustrato nel diagramma hello, hello *Web1* e *Web2* le macchine virtuali sono connessa toohello *front-end* subnet e hello *DB1* e *DB2* le macchine virtuali sono connessa toohello *back-end* subnet.</span><span class="sxs-lookup"><span data-stu-id="d6408-351">As shown in hello diagram, hello *Web1* and *Web2* VMs are connected toohello *FrontEnd* subnet, and hello *DB1* and *DB2* VMs are connected toohello *BackEnd* subnet.</span></span>  <span data-ttu-id="d6408-352">Entrambe le subnet fanno parte di hello *TestVNet* rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="d6408-352">Both subnets are part of hello *TestVNet* VNet.</span></span> <span data-ttu-id="d6408-353">Hello componenti dell'applicazione ogni eseguito all'interno di una rete virtuale di tooa macchina virtuale di Azure connessa.</span><span class="sxs-lookup"><span data-stu-id="d6408-353">hello application components each run within an Azure VM connected tooa VNet.</span></span> <span data-ttu-id="d6408-354">scenario di Hello è hello seguenti requisiti:</span><span class="sxs-lookup"><span data-stu-id="d6408-354">hello scenario has hello following requirements:</span></span>

1. <span data-ttu-id="d6408-355">Separazione del traffico tra hello WEB e server di database.</span><span class="sxs-lookup"><span data-stu-id="d6408-355">Separation of traffic between hello WEB and DB servers.</span></span>
2. <span data-ttu-id="d6408-356">Inoltro del traffico regole dai server web sulla porta 80 hello carico bilanciamento tooall di bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="d6408-356">Load balancing rules forward traffic from hello load balancer tooall web servers on port 80.</span></span>
3. <span data-ttu-id="d6408-357">Caricare il servizio di bilanciamento NAT regole inoltrare il traffico proveniente nel bilanciamento del carico hello in tooport 50001 porta 3389 nel hello WEB1 VM.</span><span class="sxs-lookup"><span data-stu-id="d6408-357">Load balancer NAT rules forward traffic coming into hello load balancer on port 50001 tooport 3389 on hello WEB1 VM.</span></span>
4. <span data-ttu-id="d6408-358">Nessun toohello accesso front-end o back-end macchine virtuali da hello Internet, ad eccezione di requisiti, 2 e 3.</span><span class="sxs-lookup"><span data-stu-id="d6408-358">No access toohello front-end or back-end VMs from hello Internet, except requirements 2 and 3.</span></span>
5. <span data-ttu-id="d6408-359">Nessun accesso a Internet in uscita dal server WEB o di database di hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-359">No outbound Internet access from hello WEB or DB servers.</span></span>
6. <span data-ttu-id="d6408-360">Tooport 3389 dei server web è consentito l'accesso dalla subnet front-end hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-360">Access from hello FrontEnd subnet is allowed tooport 3389 of any web server.</span></span>
7. <span data-ttu-id="d6408-361">Tooport 3389 di qualsiasi server di database è consentito l'accesso dalla subnet front-end hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-361">Access from hello FrontEnd subnet is allowed tooport 3389 of any DB server.</span></span>
8. <span data-ttu-id="d6408-362">Tooport 1433 di tutti i server di database è consentito l'accesso dalla subnet front-end hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-362">Access from hello FrontEnd subnet is allowed tooport 1433 of all DB servers.</span></span>
9. <span data-ttu-id="d6408-363">Separazione del traffico di gestione (porta 3389) e del traffico di database (1433) su interfacce di rete diverse nei server DB.</span><span class="sxs-lookup"><span data-stu-id="d6408-363">Separation of management traffic (port 3389) and database traffic (1433) on different NICs in DB servers.</span></span>

<span data-ttu-id="d6408-364">Requisiti di 1 a 6 (eccetto i requisiti di 3 e 4) sono tutti gli spazi toosubnet ristretto.</span><span class="sxs-lookup"><span data-stu-id="d6408-364">Requirements 1-6 (except requirements 3 and 4) are all confined toosubnet spaces.</span></span> <span data-ttu-id="d6408-365">Hello NSGs seguenti requisiti hello precedente, riducendo al minimo il numero di hello di NSGs necessarie:</span><span class="sxs-lookup"><span data-stu-id="d6408-365">hello following NSGs meet hello previous requirements, while minimizing hello number of NSGs required:</span></span>

### <a name="frontend"></a><span data-ttu-id="d6408-366">FrontEnd</span><span class="sxs-lookup"><span data-stu-id="d6408-366">FrontEnd</span></span>
<span data-ttu-id="d6408-367">**Regole in ingresso**</span><span class="sxs-lookup"><span data-stu-id="d6408-367">**Inbound rules**</span></span>

| <span data-ttu-id="d6408-368">Regola</span><span class="sxs-lookup"><span data-stu-id="d6408-368">Rule</span></span> | <span data-ttu-id="d6408-369">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-369">Access</span></span> | <span data-ttu-id="d6408-370">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-370">Priority</span></span> | <span data-ttu-id="d6408-371">Intervallo di indirizzi di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-371">Source address range</span></span> | <span data-ttu-id="d6408-372">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-372">Source port</span></span> | <span data-ttu-id="d6408-373">Intervallo di indirizzi di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-373">Destination address range</span></span> | <span data-ttu-id="d6408-374">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-374">Destination port</span></span> | <span data-ttu-id="d6408-375">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-375">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-376">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-376">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="d6408-377">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-377">Allow</span></span> | <span data-ttu-id="d6408-378">100</span><span class="sxs-lookup"><span data-stu-id="d6408-378">100</span></span> | <span data-ttu-id="d6408-379">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-379">Internet</span></span> | * | * | <span data-ttu-id="d6408-380">80</span><span class="sxs-lookup"><span data-stu-id="d6408-380">80</span></span> | <span data-ttu-id="d6408-381">TCP</span><span class="sxs-lookup"><span data-stu-id="d6408-381">TCP</span></span> |
| <span data-ttu-id="d6408-382">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-382">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="d6408-383">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-383">Allow</span></span> | <span data-ttu-id="d6408-384">200</span><span class="sxs-lookup"><span data-stu-id="d6408-384">200</span></span> | <span data-ttu-id="d6408-385">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-385">Internet</span></span> | * | * | <span data-ttu-id="d6408-386">3389</span><span class="sxs-lookup"><span data-stu-id="d6408-386">3389</span></span> | <span data-ttu-id="d6408-387">TCP</span><span class="sxs-lookup"><span data-stu-id="d6408-387">TCP</span></span> |
| <span data-ttu-id="d6408-388">Deny-Inbound-All</span><span class="sxs-lookup"><span data-stu-id="d6408-388">Deny-Inbound-All</span></span> | <span data-ttu-id="d6408-389">NEGA</span><span class="sxs-lookup"><span data-stu-id="d6408-389">Deny</span></span> | <span data-ttu-id="d6408-390">300</span><span class="sxs-lookup"><span data-stu-id="d6408-390">300</span></span> | <span data-ttu-id="d6408-391">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-391">Internet</span></span> | * | * | * | <span data-ttu-id="d6408-392">TCP</span><span class="sxs-lookup"><span data-stu-id="d6408-392">TCP</span></span> |

<span data-ttu-id="d6408-393">**Regole in uscita**</span><span class="sxs-lookup"><span data-stu-id="d6408-393">**Outbound rules**</span></span>

| <span data-ttu-id="d6408-394">Regola</span><span class="sxs-lookup"><span data-stu-id="d6408-394">Rule</span></span> | <span data-ttu-id="d6408-395">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-395">Access</span></span> | <span data-ttu-id="d6408-396">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-396">Priority</span></span> | <span data-ttu-id="d6408-397">Intervallo di indirizzi di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-397">Source address range</span></span> | <span data-ttu-id="d6408-398">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-398">Source port</span></span> | <span data-ttu-id="d6408-399">Intervallo di indirizzi di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-399">Destination address range</span></span> | <span data-ttu-id="d6408-400">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-400">Destination port</span></span> | <span data-ttu-id="d6408-401">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-401">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-402">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="d6408-402">Deny-Internet-All</span></span> |<span data-ttu-id="d6408-403">NEGA</span><span class="sxs-lookup"><span data-stu-id="d6408-403">Deny</span></span> |<span data-ttu-id="d6408-404">100</span><span class="sxs-lookup"><span data-stu-id="d6408-404">100</span></span> | * | * | <span data-ttu-id="d6408-405">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-405">Internet</span></span> | * | * |

### <a name="backend"></a><span data-ttu-id="d6408-406">BackEnd</span><span class="sxs-lookup"><span data-stu-id="d6408-406">BackEnd</span></span>
<span data-ttu-id="d6408-407">**Regole in ingresso**</span><span class="sxs-lookup"><span data-stu-id="d6408-407">**Inbound rules**</span></span>

| <span data-ttu-id="d6408-408">Regola</span><span class="sxs-lookup"><span data-stu-id="d6408-408">Rule</span></span> | <span data-ttu-id="d6408-409">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-409">Access</span></span> | <span data-ttu-id="d6408-410">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-410">Priority</span></span> | <span data-ttu-id="d6408-411">Intervallo di indirizzi di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-411">Source address range</span></span> | <span data-ttu-id="d6408-412">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-412">Source port</span></span> | <span data-ttu-id="d6408-413">Intervallo di indirizzi di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-413">Destination address range</span></span> | <span data-ttu-id="d6408-414">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-414">Destination port</span></span> | <span data-ttu-id="d6408-415">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-415">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-416">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="d6408-416">Deny-Internet-All</span></span> | <span data-ttu-id="d6408-417">NEGA</span><span class="sxs-lookup"><span data-stu-id="d6408-417">Deny</span></span> | <span data-ttu-id="d6408-418">100</span><span class="sxs-lookup"><span data-stu-id="d6408-418">100</span></span> | <span data-ttu-id="d6408-419">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-419">Internet</span></span> | * | * | * | * |

<span data-ttu-id="d6408-420">**Regole in uscita**</span><span class="sxs-lookup"><span data-stu-id="d6408-420">**Outbound rules**</span></span>

| <span data-ttu-id="d6408-421">Regola</span><span class="sxs-lookup"><span data-stu-id="d6408-421">Rule</span></span> | <span data-ttu-id="d6408-422">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-422">Access</span></span> | <span data-ttu-id="d6408-423">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-423">Priority</span></span> | <span data-ttu-id="d6408-424">Intervallo di indirizzi di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-424">Source address range</span></span> | <span data-ttu-id="d6408-425">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-425">Source port</span></span> | <span data-ttu-id="d6408-426">Intervallo di indirizzi di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-426">Destination address range</span></span> | <span data-ttu-id="d6408-427">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-427">Destination port</span></span> | <span data-ttu-id="d6408-428">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-428">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-429">Deny-Internet-All</span><span class="sxs-lookup"><span data-stu-id="d6408-429">Deny-Internet-All</span></span> | <span data-ttu-id="d6408-430">NEGA</span><span class="sxs-lookup"><span data-stu-id="d6408-430">Deny</span></span> | <span data-ttu-id="d6408-431">100</span><span class="sxs-lookup"><span data-stu-id="d6408-431">100</span></span> | * | * | <span data-ttu-id="d6408-432">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-432">Internet</span></span> | * | * |

<span data-ttu-id="d6408-433">Hello NSGs seguente vengono create e associate tooNICs in hello macchine virtuali seguenti:</span><span class="sxs-lookup"><span data-stu-id="d6408-433">hello following NSGs are created and associated tooNICs in hello following VMs:</span></span>

### <a name="web1"></a><span data-ttu-id="d6408-434">WEB1</span><span class="sxs-lookup"><span data-stu-id="d6408-434">WEB1</span></span>
<span data-ttu-id="d6408-435">**Regole in ingresso**</span><span class="sxs-lookup"><span data-stu-id="d6408-435">**Inbound rules**</span></span>

| <span data-ttu-id="d6408-436">Regola</span><span class="sxs-lookup"><span data-stu-id="d6408-436">Rule</span></span> | <span data-ttu-id="d6408-437">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-437">Access</span></span> | <span data-ttu-id="d6408-438">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-438">Priority</span></span> | <span data-ttu-id="d6408-439">Intervallo di indirizzi di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-439">Source address range</span></span> | <span data-ttu-id="d6408-440">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-440">Source port</span></span> | <span data-ttu-id="d6408-441">Intervallo di indirizzi di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-441">Destination address range</span></span> | <span data-ttu-id="d6408-442">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-442">Destination port</span></span> | <span data-ttu-id="d6408-443">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-443">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-444">Allow-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-444">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="d6408-445">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-445">Allow</span></span> | <span data-ttu-id="d6408-446">100</span><span class="sxs-lookup"><span data-stu-id="d6408-446">100</span></span> | <span data-ttu-id="d6408-447">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-447">Internet</span></span> | * | * | <span data-ttu-id="d6408-448">3389</span><span class="sxs-lookup"><span data-stu-id="d6408-448">3389</span></span> | <span data-ttu-id="d6408-449">TCP</span><span class="sxs-lookup"><span data-stu-id="d6408-449">TCP</span></span> |
| <span data-ttu-id="d6408-450">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-450">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="d6408-451">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-451">Allow</span></span> | <span data-ttu-id="d6408-452">200</span><span class="sxs-lookup"><span data-stu-id="d6408-452">200</span></span> | <span data-ttu-id="d6408-453">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-453">Internet</span></span> | * | * | <span data-ttu-id="d6408-454">80</span><span class="sxs-lookup"><span data-stu-id="d6408-454">80</span></span> | <span data-ttu-id="d6408-455">TCP</span><span class="sxs-lookup"><span data-stu-id="d6408-455">TCP</span></span> |

> [!NOTE]
> <span data-ttu-id="d6408-456">intervallo di indirizzi di origine di Hello per le regole precedenti hello **Internet**, hello non l'indirizzo IP virtuale del servizio di bilanciamento del carico hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-456">hello source address range for hello previous rules is **Internet**, not hello virtual IP address of for hello load balancer.</span></span> <span data-ttu-id="d6408-457">porta di origine Hello è *, non 500001.</span><span class="sxs-lookup"><span data-stu-id="d6408-457">hello source port is *, not 500001.</span></span> <span data-ttu-id="d6408-458">Le regole NAT per servizi di bilanciamento del carico non sono hello come regole di sicurezza di gruppo.</span><span class="sxs-lookup"><span data-stu-id="d6408-458">NAT rules for load balancers are not hello same as NSG security rules.</span></span> <span data-ttu-id="d6408-459">Le regole di sicurezza di gruppo sono sempre correlati toohello origine e destinazione finale di traffico, **non** bilanciamento del carico hello tra due hello.</span><span class="sxs-lookup"><span data-stu-id="d6408-459">NSG security rules are always related toohello original source and final destination of traffic, **not** hello load balancer between hello two.</span></span> 
> 
> 

### <a name="web2"></a><span data-ttu-id="d6408-460">WEB2</span><span class="sxs-lookup"><span data-stu-id="d6408-460">WEB2</span></span>
<span data-ttu-id="d6408-461">**Regole in ingresso**</span><span class="sxs-lookup"><span data-stu-id="d6408-461">**Inbound rules**</span></span>

| <span data-ttu-id="d6408-462">Regola</span><span class="sxs-lookup"><span data-stu-id="d6408-462">Rule</span></span> | <span data-ttu-id="d6408-463">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-463">Access</span></span> | <span data-ttu-id="d6408-464">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-464">Priority</span></span> | <span data-ttu-id="d6408-465">Intervallo di indirizzi di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-465">Source address range</span></span> | <span data-ttu-id="d6408-466">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-466">Source port</span></span> | <span data-ttu-id="d6408-467">Intervallo di indirizzi di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-467">Destination address range</span></span> | <span data-ttu-id="d6408-468">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-468">Destination port</span></span> | <span data-ttu-id="d6408-469">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-469">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-470">Deny-Inbound-RDP-Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-470">Deny-Inbound-RDP-Internet</span></span> | <span data-ttu-id="d6408-471">NEGA</span><span class="sxs-lookup"><span data-stu-id="d6408-471">Deny</span></span> | <span data-ttu-id="d6408-472">100</span><span class="sxs-lookup"><span data-stu-id="d6408-472">100</span></span> | <span data-ttu-id="d6408-473">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-473">Internet</span></span> | * | * | <span data-ttu-id="d6408-474">3389</span><span class="sxs-lookup"><span data-stu-id="d6408-474">3389</span></span> | <span data-ttu-id="d6408-475">TCP</span><span class="sxs-lookup"><span data-stu-id="d6408-475">TCP</span></span> |
| <span data-ttu-id="d6408-476">Allow-Inbound-HTTP-Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-476">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="d6408-477">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-477">Allow</span></span> | <span data-ttu-id="d6408-478">200</span><span class="sxs-lookup"><span data-stu-id="d6408-478">200</span></span> | <span data-ttu-id="d6408-479">Internet</span><span class="sxs-lookup"><span data-stu-id="d6408-479">Internet</span></span> | * | * | <span data-ttu-id="d6408-480">80</span><span class="sxs-lookup"><span data-stu-id="d6408-480">80</span></span> | <span data-ttu-id="d6408-481">TCP</span><span class="sxs-lookup"><span data-stu-id="d6408-481">TCP</span></span> |

### <a name="db-servers-management-nic"></a><span data-ttu-id="d6408-482">Server DB (interfaccia di rete per gestione)</span><span class="sxs-lookup"><span data-stu-id="d6408-482">DB servers (Management NIC)</span></span>
<span data-ttu-id="d6408-483">**Regole in ingresso**</span><span class="sxs-lookup"><span data-stu-id="d6408-483">**Inbound rules**</span></span>

| <span data-ttu-id="d6408-484">Regola</span><span class="sxs-lookup"><span data-stu-id="d6408-484">Rule</span></span> | <span data-ttu-id="d6408-485">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-485">Access</span></span> | <span data-ttu-id="d6408-486">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-486">Priority</span></span> | <span data-ttu-id="d6408-487">Intervallo di indirizzi di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-487">Source address range</span></span> | <span data-ttu-id="d6408-488">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-488">Source port</span></span> | <span data-ttu-id="d6408-489">Intervallo di indirizzi di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-489">Destination address range</span></span> | <span data-ttu-id="d6408-490">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-490">Destination port</span></span> | <span data-ttu-id="d6408-491">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-491">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-492">Allow-Inbound-RDP-Front-end</span><span class="sxs-lookup"><span data-stu-id="d6408-492">Allow-Inbound-RDP-Front-end</span></span> | <span data-ttu-id="d6408-493">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-493">Allow</span></span> | <span data-ttu-id="d6408-494">100</span><span class="sxs-lookup"><span data-stu-id="d6408-494">100</span></span> | <span data-ttu-id="d6408-495">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="d6408-495">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="d6408-496">3389</span><span class="sxs-lookup"><span data-stu-id="d6408-496">3389</span></span> | <span data-ttu-id="d6408-497">TCP</span><span class="sxs-lookup"><span data-stu-id="d6408-497">TCP</span></span> |

### <a name="db-servers-database-traffic-nic"></a><span data-ttu-id="d6408-498">Server DB (interfaccia di rete per traffico di database)</span><span class="sxs-lookup"><span data-stu-id="d6408-498">DB servers (Database traffic NIC)</span></span>
<span data-ttu-id="d6408-499">**Regole in ingresso**</span><span class="sxs-lookup"><span data-stu-id="d6408-499">**Inbound rules**</span></span>

| <span data-ttu-id="d6408-500">Regola</span><span class="sxs-lookup"><span data-stu-id="d6408-500">Rule</span></span> | <span data-ttu-id="d6408-501">Accesso</span><span class="sxs-lookup"><span data-stu-id="d6408-501">Access</span></span> | <span data-ttu-id="d6408-502">Priorità</span><span class="sxs-lookup"><span data-stu-id="d6408-502">Priority</span></span> | <span data-ttu-id="d6408-503">Intervallo di indirizzi di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-503">Source address range</span></span> | <span data-ttu-id="d6408-504">Porta di origine</span><span class="sxs-lookup"><span data-stu-id="d6408-504">Source port</span></span> | <span data-ttu-id="d6408-505">Intervallo di indirizzi di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-505">Destination address range</span></span> | <span data-ttu-id="d6408-506">Porta di destinazione</span><span class="sxs-lookup"><span data-stu-id="d6408-506">Destination port</span></span> | <span data-ttu-id="d6408-507">Protocollo</span><span class="sxs-lookup"><span data-stu-id="d6408-507">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="d6408-508">Allow-Inbound-SQL-Front-end</span><span class="sxs-lookup"><span data-stu-id="d6408-508">Allow-Inbound-SQL-Front-end</span></span> | <span data-ttu-id="d6408-509">CONSENTI</span><span class="sxs-lookup"><span data-stu-id="d6408-509">Allow</span></span> | <span data-ttu-id="d6408-510">100</span><span class="sxs-lookup"><span data-stu-id="d6408-510">100</span></span> | <span data-ttu-id="d6408-511">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="d6408-511">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="d6408-512">1433</span><span class="sxs-lookup"><span data-stu-id="d6408-512">1433</span></span> | <span data-ttu-id="d6408-513">TCP</span><span class="sxs-lookup"><span data-stu-id="d6408-513">TCP</span></span> |

<span data-ttu-id="d6408-514">Poiché alcune delle NSGs hello sono associati tooindividual schede di rete, le regole di hello sono per le risorse distribuite tramite Gestione risorse.</span><span class="sxs-lookup"><span data-stu-id="d6408-514">Since some of hello NSGs are associated tooindividual NICs, hello rules are for resources deployed through Resource Manager.</span></span> <span data-ttu-id="d6408-515">La combinazione delle regole per la subnet e l'interfaccia di rete dipende dal modo in cui sono associate.</span><span class="sxs-lookup"><span data-stu-id="d6408-515">Rules are combined for subnet and NIC, depending on how they are associated.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="d6408-516">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="d6408-516">Next steps</span></span>
* <span data-ttu-id="d6408-517">[Distribuire gruppi di sicurezza di rete (Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="d6408-517">[Deploy NSGs (Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span></span>
* <span data-ttu-id="d6408-518">[Distribuire gruppi di sicurezza di rete (distribuzione classica)](virtual-networks-create-nsg-classic-ps.md).</span><span class="sxs-lookup"><span data-stu-id="d6408-518">[Deploy NSGs (classic)](virtual-networks-create-nsg-classic-ps.md).</span></span>
* <span data-ttu-id="d6408-519">[Gestire i log dei gruppi di sicurezza di rete](virtual-network-nsg-manage-log.md).</span><span class="sxs-lookup"><span data-stu-id="d6408-519">[Manage NSG logs](virtual-network-nsg-manage-log.md).</span></span>
* <span data-ttu-id="d6408-520">[Risolvere i problemi relativi ai gruppi di sicurezza di rete] (virtual-network-nsg-troubleshoot-portal.md)</span><span class="sxs-lookup"><span data-stu-id="d6408-520">[Troubleshoot NSGs] (virtual-network-nsg-troubleshoot-portal.md)</span></span>
