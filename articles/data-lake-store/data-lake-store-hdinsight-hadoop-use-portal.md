---
title: Usare il portale di Azure per creare cluster HDInsight con Data Lake Store | Microsoft Docs
description: Usare il portale di Azure per creare e usare cluster HDInsight con Azure Data Lake Store
services: data-lake-store,hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
ms.assetid: a8c45a83-a8e3-4227-8b02-1bc1e1de6767
ms.service: data-lake-store
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 08/14/2017
ms.author: nitinme
ms.openlocfilehash: 9dd56efb89e07ea61ae431d1ea2accd721cd6502
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="create-hdinsight-clusters-with-data-lake-store-by-using-the-azure-portal"></a><span data-ttu-id="2a05d-103">Creare cluster HDInsight con Data Lake Store tramite il portale di Azure</span><span class="sxs-lookup"><span data-stu-id="2a05d-103">Create HDInsight clusters with Data Lake Store by using the Azure portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="2a05d-104">Usare il portale di Azure</span><span class="sxs-lookup"><span data-stu-id="2a05d-104">Use the Azure portal</span></span>](data-lake-store-hdinsight-hadoop-use-portal.md)
> * [<span data-ttu-id="2a05d-105">Usare PowerShell (per l'archiviazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="2a05d-105">Use PowerShell (for default storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell-for-default-storage.md)
> * [<span data-ttu-id="2a05d-106">Usare PowerShell (per l'archiviazione aggiuntiva)</span><span class="sxs-lookup"><span data-stu-id="2a05d-106">Use PowerShell (for additional storage)</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)
> * [<span data-ttu-id="2a05d-107">Usare Resource Manager</span><span class="sxs-lookup"><span data-stu-id="2a05d-107">Use Resource Manager</span></span>](data-lake-store-hdinsight-hadoop-use-resource-manager-template.md)
>
>

<span data-ttu-id="2a05d-108">Informazioni su come usare il portale di Azure per creare un cluster HDInsight con un account Azure Data Lake Store come risorsa di archiviazione predefinita o risorsa di archiviazione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="2a05d-108">Learn how to use the Azure portal to create a HDInsight cluster with an Azure Data Lake Store account as the default storage or an additional storage.</span></span> <span data-ttu-id="2a05d-109">Anche se la risorsa di archiviazione aggiuntiva è facoltativa per un cluster HDInsight, è consigliabile archiviare i dati aziendali negli account di archiviazione aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="2a05d-109">Even though additional storage is optional for a HDInsight cluster, it is recommended to store your business data in the additional storage accounts.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="2a05d-110">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="2a05d-110">Prerequisites</span></span>
<span data-ttu-id="2a05d-111">Prima di iniziare l'esercitazione, verificare di aver soddisfatto i requisiti seguenti:</span><span class="sxs-lookup"><span data-stu-id="2a05d-111">Before you begin this tutorial, ensure that you've met the following requirements:</span></span>

* <span data-ttu-id="2a05d-112">**Una sottoscrizione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-112">**An Azure subscription**.</span></span> <span data-ttu-id="2a05d-113">Vedere [Ottenere una versione di valutazione gratuita di Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="2a05d-113">Go to [Get Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="2a05d-114">**Un account di Archivio Data Lake di Azure**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-114">**An Azure Data Lake Store account**.</span></span> <span data-ttu-id="2a05d-115">Seguire le istruzioni fornite in [Introduzione all'uso di Azure Data Lake Store tramite il portale di Azure](data-lake-store-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="2a05d-115">Follow the instructions from [Get started with Azure Data Lake Store by using the Azure portal](data-lake-store-get-started-portal.md).</span></span> <span data-ttu-id="2a05d-116">È anche necessario creare una cartella radice nell'account.</span><span class="sxs-lookup"><span data-stu-id="2a05d-116">You must also create a root folder on the account.</span></span>  <span data-ttu-id="2a05d-117">In questa esercitazione viene usata una cartella radice denominata __/clusters__.</span><span class="sxs-lookup"><span data-stu-id="2a05d-117">In this tutorial, a root folder called __/clusters__ is used.</span></span>
* <span data-ttu-id="2a05d-118">**Un'entità servizio di Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-118">**An Azure Active Directory service principal**.</span></span> <span data-ttu-id="2a05d-119">Questa esercitazione fornisce tutte le istruzioni utili su come creare un'entità servizio in Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="2a05d-119">This tutorial provides instructions on how to create a service principal in Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="2a05d-120">Tuttavia, per creare un'entità servizio è necessario essere un amministratore di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="2a05d-120">However, to create a service principal, you must be an Azure AD administrator.</span></span> <span data-ttu-id="2a05d-121">Se si è un amministratore, è possibile ignorare questo prerequisito e procedere con l'esercitazione.</span><span class="sxs-lookup"><span data-stu-id="2a05d-121">If you are an administrator, you can skip this prerequisite and proceed with the tutorial.</span></span>

    >[!NOTE]
    ><span data-ttu-id="2a05d-122">È possibile creare un'entità servizio solo se si è un amministratore di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="2a05d-122">You can create a service principal only if you are an Azure AD administrator.</span></span> <span data-ttu-id="2a05d-123">Prima di poter creare un cluster HDInsight con Data Lake Store, un amministratore di Azure AD deve creare un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2a05d-123">Your Azure AD administrator must create a service principal before you can create an HDInsight cluster with Data Lake Store.</span></span> <span data-ttu-id="2a05d-124">Inoltre, l'entità servizio deve essere creata usando un certificato, come descritto in [Creare un'entità servizio con certificato](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span><span class="sxs-lookup"><span data-stu-id="2a05d-124">Also, the service principal must be created with a certificate, as described at [Create a service principal with certificate](../azure-resource-manager/resource-group-authenticate-service-principal.md#create-service-principal-with-self-signed-certificate).</span></span>
    >

## <a name="create-an-hdinsight-cluster"></a><span data-ttu-id="2a05d-125">Creazione di un cluster HDInsight</span><span class="sxs-lookup"><span data-stu-id="2a05d-125">Create an HDInsight cluster</span></span>

<span data-ttu-id="2a05d-126">In questa sezione viene creato un cluster HDInsight con account Data Lake Store come risorsa di archiviazione predefinita o aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="2a05d-126">In this section, you create a HDInsight cluster with Data Lake Store accounts as the default or the additional storage.</span></span> <span data-ttu-id="2a05d-127">Questo articolo illustra solo la configurazione degli account Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="2a05d-127">This article only focuses the part of configuring Data Lake Store accounts.</span></span>  <span data-ttu-id="2a05d-128">Per informazioni generali sulla creazione di cluster e le relative procedure, vedere [Creare cluster Hadoop basati su Linux in HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span><span class="sxs-lookup"><span data-stu-id="2a05d-128">For the general cluster creation information and procedures, see [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-provision-linux-clusters.md).</span></span>

### <a name="create-a-cluster-with-data-lake-store-as-default-storage"></a><span data-ttu-id="2a05d-129">Creare un cluster con Data Lake Store come risorsa di archiviazione predefinita</span><span class="sxs-lookup"><span data-stu-id="2a05d-129">Create a cluster with Data Lake Store as default storage</span></span>

<span data-ttu-id="2a05d-130">**Per creare un cluster HDInsight con Data Lake Store come account di archiviazione predefinito**</span><span class="sxs-lookup"><span data-stu-id="2a05d-130">**To create a HDInsight cluster with a Data Lake Store as the default storage account**</span></span>

1. <span data-ttu-id="2a05d-131">Accedere al [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="2a05d-131">Sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="2a05d-132">Seguire [Creare i cluster](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) per informazioni generali sulla creazione di cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2a05d-132">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for the general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="2a05d-133">Nel pannello **Archiviazione**, in **Tipo di archiviazione primario** selezionare **Data Lake Store** e quindi immettere le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="2a05d-133">On the **Storage** blade, under **Primary storage type**, select **Data Lake Store**, and then enter the following information:</span></span>

    <span data-ttu-id="2a05d-134">![Aggiungere l'entità servizio al cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Aggiungere l'entità servizio al cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="2a05d-134">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.adls.storage.png "Add service principal to HDInsight cluster")</span></span>

    - <span data-ttu-id="2a05d-135">**Seleziona account Data Lake Store**: selezionare un account Data Lake Store esistente.</span><span class="sxs-lookup"><span data-stu-id="2a05d-135">**Select Data Lake Store account**: Select an existing Data Lake Store account.</span></span> <span data-ttu-id="2a05d-136">È necessario un account Data Lake Store esistente.</span><span class="sxs-lookup"><span data-stu-id="2a05d-136">An existing Data Lake Store account is required.</span></span>  <span data-ttu-id="2a05d-137">Vedere [Prerequisiti](#prereuisites).</span><span class="sxs-lookup"><span data-stu-id="2a05d-137">See [Prerequisites](#prereuisites).</span></span>
    - <span data-ttu-id="2a05d-138">**Percorso radice**: immettere un percorso in cui archiviare i file specifici del cluster.</span><span class="sxs-lookup"><span data-stu-id="2a05d-138">**Root path**: Enter a path where the cluster-specific files are to be stored.</span></span> <span data-ttu-id="2a05d-139">Nello screenshot è __/clusters/myhdiadlcluster/__, in cui la cartella __/clusters__ deve esistere e il portale crea la cartella *myhdicluster*.</span><span class="sxs-lookup"><span data-stu-id="2a05d-139">On the screenshot, it is __/clusters/myhdiadlcluster/__, in which the __/clusters__ folder must exist, and the Portal creates *myhdicluster* folder.</span></span>  <span data-ttu-id="2a05d-140">*myhdicluster* è il nome del cluster.</span><span class="sxs-lookup"><span data-stu-id="2a05d-140">The *myhdicluster* is the cluster name.</span></span>
    - <span data-ttu-id="2a05d-141">**Accesso a Data Lake Store**: configurare l'accesso tra l'account Data Lake Store e il cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2a05d-141">**Data Lake Store access**: Configure access between the Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="2a05d-142">Per istruzioni, vedere [Configurare l'accesso a Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="2a05d-142">For instructions, see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>
    - <span data-ttu-id="2a05d-143">**Account archiviazione aggiuntivi**: aggiungere account di archiviazione di Azure come account di archiviazione aggiuntivi per il cluster.</span><span class="sxs-lookup"><span data-stu-id="2a05d-143">**Additional storage accounts**: Add Azure Storage Accounts as additional storage accounts for the cluster.</span></span> <span data-ttu-id="2a05d-144">Per aggiungere altre istanze di Data Lake Store, assegnare al cluster le autorizzazioni per i dati in più account Data Lake Store durante la configurazione di un account Data Lake Store come tipo di archiviazione primario.</span><span class="sxs-lookup"><span data-stu-id="2a05d-144">To add additional Data Lake Stores is done by giving the cluster permissions on data in more Data Lake Store accounts while configuring a Data Lake Store account as the primary storage type.</span></span> <span data-ttu-id="2a05d-145">Vedere [Configurare l'accesso a Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="2a05d-145">See [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

4. <span data-ttu-id="2a05d-146">In **Accesso a Data Lake Store** fare clic su **Seleziona** e continuare con la creazione del cluster come descritto in [Creare cluster Hadoop in HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span><span class="sxs-lookup"><span data-stu-id="2a05d-146">On the **Data Lake Store access**, click **Select**, and then continue with cluster creation as described in [Create Hadoop clusters in HDInsight](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md).</span></span>


### <a name="create-a-cluster-with-data-lake-store-as-additional-storage"></a><span data-ttu-id="2a05d-147">Creare un cluster con Data Lake Store come risorsa di archiviazione aggiuntiva</span><span class="sxs-lookup"><span data-stu-id="2a05d-147">Create a cluster with Data Lake Store as additional storage</span></span>

<span data-ttu-id="2a05d-148">Le istruzioni seguenti illustrano come creare un cluster HDInsight con un account di archiviazione di Azure come risorsa di archiviazione predefinita e un account Data Lake Store come risorsa di archiviazione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="2a05d-148">The following instructions create a HDInsight cluster with an Azure Storage account as the default storage, and a Data Lake Store account as an additional storage.</span></span>
<span data-ttu-id="2a05d-149">**Per creare un cluster HDInsight con Data Lake Store come account di archiviazione predefinito**</span><span class="sxs-lookup"><span data-stu-id="2a05d-149">**To create a HDInsight cluster with a Data Lake Store as the default storage account**</span></span>

1. <span data-ttu-id="2a05d-150">Accedere al [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="2a05d-150">Sign in to the [Azure portal](https://portal.azure.com).</span></span>
2. <span data-ttu-id="2a05d-151">Seguire [Creare i cluster](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) per informazioni generali sulla creazione di cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2a05d-151">Follow [Create clusters](../hdinsight/hdinsight-hadoop-create-linux-clusters-portal.md#create-clusters) for the general information on creating HDInsight clusters.</span></span>
3. <span data-ttu-id="2a05d-152">Nel pannello **Archiviazione**, in **Tipo di archiviazione primario** selezionare **Archiviazione di Azure** e quindi immettere le informazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="2a05d-152">On the **Storage** blade, under **Primary storage type**, select **Azure Storage**, and then enter the following information:</span></span>

    <span data-ttu-id="2a05d-153">![Aggiungere l'entità servizio al cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Aggiungere l'entità servizio al cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="2a05d-153">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.1.png "Add service principal to HDInsight cluster")</span></span>

    - <span data-ttu-id="2a05d-154">**Metodo di selezione**: usare una delle opzioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="2a05d-154">**Selection method**: use one of the following options:</span></span>

        * <span data-ttu-id="2a05d-155">Per specificare un account di archiviazione che fa parte della sottoscrizione di Azure, selezionare **Sottoscrizioni personali**, quindi selezionare l'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="2a05d-155">To specify a storage account that is part of your Azure subscription, select **My subscriptions**, and then select the storage account.</span></span>
        * <span data-ttu-id="2a05d-156">Per specificare un account di archiviazione esterno alla sottoscrizione di Azure, selezionare **Chiave di accesso**, quindi immettere le informazioni per l'account di archiviazione esterno.</span><span class="sxs-lookup"><span data-stu-id="2a05d-156">To specify a storage account that is outside your Azure subscription, select **Access key**, and then provide the information for the outside storage account.</span></span>

    - <span data-ttu-id="2a05d-157">**Contenitore predefinito**: usare il valore predefinito o specificare un altro nome.</span><span class="sxs-lookup"><span data-stu-id="2a05d-157">**Default container**: use either the default value or specify your own name.</span></span>

    - <span data-ttu-id="2a05d-158">Account archiviazione aggiuntivi: aggiungere altri account di archiviazione di Azure come risorsa di archiviazione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="2a05d-158">Additional Storage accounts: add more Azure Storage accounts as the additional storage.</span></span>
    - <span data-ttu-id="2a05d-159">Accesso a Data Lake Store: configurare l'accesso tra l'account Data Lake Store e il cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2a05d-159">Data Lake Store access: configure access between the Data Lake Store account and HDInsight cluster.</span></span> <span data-ttu-id="2a05d-160">Per istruzioni, vedere [Configurare l'accesso a Data Lake Store](#configure-data-lake-store-access).</span><span class="sxs-lookup"><span data-stu-id="2a05d-160">For instructions see [Configure Data Lake Store access](#configure-data-lake-store-access).</span></span>

## <a name="configure-data-lake-store-access"></a><span data-ttu-id="2a05d-161">Configurare l'accesso a Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="2a05d-161">Configure Data Lake Store access</span></span> 

<span data-ttu-id="2a05d-162">In questa sezione è possibile configurare l'accesso a Data Lake Store dai cluster HDInsight usando un'entità servizio di Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2a05d-162">In this section, you configure Data Lake Store access from HDInsight clusters using an Azure Active Directory service principal.</span></span> 

### <a name="specify-a-service-principal"></a><span data-ttu-id="2a05d-163">Specificare un'entità servizio</span><span class="sxs-lookup"><span data-stu-id="2a05d-163">Specify a service principal</span></span>

<span data-ttu-id="2a05d-164">Dal portale di Azure è possibile usare un'entità servizio esistente o crearne una nuova.</span><span class="sxs-lookup"><span data-stu-id="2a05d-164">From the Azure portal, you can either use an existing service principal or create a new one.</span></span>

<span data-ttu-id="2a05d-165">**Per creare un'entità servizio dal portale di Azure**</span><span class="sxs-lookup"><span data-stu-id="2a05d-165">**To create a service principal from the Azure portal**</span></span>

1. <span data-ttu-id="2a05d-166">Fare clic su **Accesso a Data Lake Store** nel pannello Archiviazione.</span><span class="sxs-lookup"><span data-stu-id="2a05d-166">Click **Data Lake Store access** from the Store blade.</span></span>
2. <span data-ttu-id="2a05d-167">Nel pannello **Accesso a Data Lake Store** fare clic su **Crea nuovo**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-167">On the **Data Lake Store access** blade, click **Create new**.</span></span>
3. <span data-ttu-id="2a05d-168">Fare clic su **Entità servizio** e quindi seguire le istruzioni per creare un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2a05d-168">Click **Service Principal**, and then follow the instructions to create a service principal.</span></span>
4. <span data-ttu-id="2a05d-169">Scaricare il certificato se si decide di usarlo ancora in futuro.</span><span class="sxs-lookup"><span data-stu-id="2a05d-169">Download the certificate if you decide to use it again in the future.</span></span> <span data-ttu-id="2a05d-170">Il download del certificato è un'operazione utile se in futuro si vorrà usare la stessa entità servizio per creare altri cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2a05d-170">Downloading the certificate is useful if you want to use the same service principal when you create additional HDInsight clusters.</span></span>

    <span data-ttu-id="2a05d-171">![Aggiungere l'entità servizio al cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Aggiungere l'entità servizio al cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="2a05d-171">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.2.png "Add service principal to HDInsight cluster")</span></span>

4. <span data-ttu-id="2a05d-172">Fare clic su **Accesso** per configurare l'accesso alla cartella.</span><span class="sxs-lookup"><span data-stu-id="2a05d-172">Click **Access** to configure the folder access.</span></span>  <span data-ttu-id="2a05d-173">Vedere [Configurare le autorizzazioni file](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="2a05d-173">See [Configure file permissions](#configure-file-permissions).</span></span>


<span data-ttu-id="2a05d-174">**Per usare un'entità servizio esistente dal portale di Azure**</span><span class="sxs-lookup"><span data-stu-id="2a05d-174">**To use an existing service principal from the Azure portal**</span></span>

1. <span data-ttu-id="2a05d-175">Fare clic su **Accesso a Data Lake Store**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-175">Click **Data Lake Store access**.</span></span>
1. <span data-ttu-id="2a05d-176">Nel pannello **Accesso a Data Lake Store** fare clic su **Usa esistente**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-176">On the **Data Lake Store access** blade, click **Use existing**.</span></span>
2. <span data-ttu-id="2a05d-177">Fare clic su **Entità servizio** e quindi selezionare un'entità servizio.</span><span class="sxs-lookup"><span data-stu-id="2a05d-177">Click **Service Principal**, and then select a service principal.</span></span> 
3. <span data-ttu-id="2a05d-178">Caricare il certificato (file PFX) associato all'entità servizio selezionata e quindi immettere la password del certificato.</span><span class="sxs-lookup"><span data-stu-id="2a05d-178">Upload the certificate (.pfx file) that's associated with your selected service principal, and then enter the certificate password.</span></span>

    <span data-ttu-id="2a05d-179">![Aggiungere l'entità servizio al cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Aggiungere l'entità servizio al cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="2a05d-179">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.5.png "Add service principal to HDInsight cluster")</span></span>

4. <span data-ttu-id="2a05d-180">Fare clic su **Accesso** per configurare l'accesso alla cartella.</span><span class="sxs-lookup"><span data-stu-id="2a05d-180">Click **Access** to configure the folder access.</span></span>  <span data-ttu-id="2a05d-181">Vedere [Configurare le autorizzazioni file](#configure-file-permissions).</span><span class="sxs-lookup"><span data-stu-id="2a05d-181">See [Configure file permissions](#configure-file-permissions).</span></span>


### <span data-ttu-id="2a05d-182"><a name="configure-file-permissions"></a>Configurare le autorizzazioni file</span><span class="sxs-lookup"><span data-stu-id="2a05d-182"><a name="configure-file-permissions"></a>Configure file permissions</span></span>

<span data-ttu-id="2a05d-183">Le configurazioni sono diverse a seconda che l'account venga usato come risorsa di archiviazione predefinita o come account di archiviazione aggiuntivo:</span><span class="sxs-lookup"><span data-stu-id="2a05d-183">The configures are different depending on whether the account is used as the default storage or an additional storage account:</span></span>

- <span data-ttu-id="2a05d-184">Uso come risorsa di archiviazione predefinita</span><span class="sxs-lookup"><span data-stu-id="2a05d-184">Used as default storage</span></span>

    - <span data-ttu-id="2a05d-185">Autorizzazione a livello di radice dell'account Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="2a05d-185">permission at the root level of the Data Lake Store account</span></span>
    - <span data-ttu-id="2a05d-186">Autorizzazione a livello di radice dell'archiviazione cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2a05d-186">permission at the root level of the HDInsight cluster storage.</span></span> <span data-ttu-id="2a05d-187">Ad esempio, la cartella __/clusters__ usata prima nell'esercitazione.</span><span class="sxs-lookup"><span data-stu-id="2a05d-187">For example, the __/clusters__ folder used earlier in the tutorial.</span></span>
- <span data-ttu-id="2a05d-188">Uso come risorsa di archiviazione aggiuntiva</span><span class="sxs-lookup"><span data-stu-id="2a05d-188">Use as an additional storage</span></span>

    - <span data-ttu-id="2a05d-189">Autorizzazione a livello delle cartelle in cui è necessario l'accesso ai file.</span><span class="sxs-lookup"><span data-stu-id="2a05d-189">Permission at the folders where you need file access.</span></span>

<span data-ttu-id="2a05d-190">**Per assegnare l'autorizzazione a livello di radice dell'account Data Lake Store**</span><span class="sxs-lookup"><span data-stu-id="2a05d-190">**To assign permission at the Data Lake Store account root level**</span></span>

1. <span data-ttu-id="2a05d-191">Nel pannello **Accesso a Data Lake Store** fare clic su **Accesso**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-191">On the **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="2a05d-192">Viene aperto il pannello per la **Selezionare le autorizzazioni file**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-192">The **Select file permissions** blade is opened.</span></span> <span data-ttu-id="2a05d-193">Questo pannello elenca tutti gli account Data Lake Store nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="2a05d-193">It lists all the Data Lake Store accounts in your subscription.</span></span>
2. <span data-ttu-id="2a05d-194">Passare il mouse (non fare clic) sul nome dell'account Data Lake Store per rendere visibile la casella di controllo e selezionarla.</span><span class="sxs-lookup"><span data-stu-id="2a05d-194">Hover (do not click) the mouse over the name of the Data Lake Store account to make the check box visible, then select the check box.</span></span>

    <span data-ttu-id="2a05d-195">![Aggiungere l'entità servizio al cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Aggiungere l'entità servizio al cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="2a05d-195">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3.png "Add service principal to HDInsight cluster")</span></span>

  <span data-ttu-id="2a05d-196">Per impostazione predefinita, __LETTURA__, __SCRITTURA__ ed __ESECUZIONE__ sono selezionati.</span><span class="sxs-lookup"><span data-stu-id="2a05d-196">By default, __READ__, __WRITE__, AND __EXECUTE__ are all selected.</span></span>

3. <span data-ttu-id="2a05d-197">Fare clic su **Seleziona** nella parte inferiore della pagina.</span><span class="sxs-lookup"><span data-stu-id="2a05d-197">Click **Select** on the bottom of the page.</span></span>
4. <span data-ttu-id="2a05d-198">Fare clic su **Esegui** per assegnare l'autorizzazione.</span><span class="sxs-lookup"><span data-stu-id="2a05d-198">Click **Run** to assign permission.</span></span>
5. <span data-ttu-id="2a05d-199">Fare clic su **Done**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-199">Click **Done**.</span></span>

<span data-ttu-id="2a05d-200">**Per assegnare l'autorizzazione a livello di radice del cluster HDInsight**</span><span class="sxs-lookup"><span data-stu-id="2a05d-200">**To assign permission at the HDInsight cluster root level**</span></span>

1. <span data-ttu-id="2a05d-201">Nel pannello **Accesso a Data Lake Store** fare clic su **Accesso**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-201">On the **Data Lake Store access** blade, click **Access**.</span></span> <span data-ttu-id="2a05d-202">Viene aperto il pannello per la **Selezionare le autorizzazioni file**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-202">The **Select file permissions** blade is opened.</span></span> <span data-ttu-id="2a05d-203">Questo pannello elenca tutti gli account Data Lake Store nella sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="2a05d-203">It lists all the Data Lake Store accounts in your subscription.</span></span>
1. <span data-ttu-id="2a05d-204">Nel pannello **Selezionare le autorizzazioni file** fare clic sul nome Data Lake Store per visualizzarne il contenuto.</span><span class="sxs-lookup"><span data-stu-id="2a05d-204">From the **Select file permissions** blade, click the Data Lake Store name to show its content.</span></span>
2. <span data-ttu-id="2a05d-205">Selezionare la radice di archiviazione cluster HDInsight selezionando la casella di controllo a sinistra della cartella.</span><span class="sxs-lookup"><span data-stu-id="2a05d-205">Select the HDInsight cluster storage root by selecting the checkbox on the left of the folder.</span></span> <span data-ttu-id="2a05d-206">In base allo screenshot precedente, la radice di archiviazione del cluster è la cartella __/clusters__ specificata durante la selezione di Data Lake Store come risorsa di archiviazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="2a05d-206">According to the screenshot earlier, the cluster storage root is __/clusters__ folder that you specified while selecting the Data Lake Store as default storage.</span></span>
3. <span data-ttu-id="2a05d-207">Impostare le autorizzazioni per la cartella.</span><span class="sxs-lookup"><span data-stu-id="2a05d-207">Set the permissions on the folder.</span></span>  <span data-ttu-id="2a05d-208">Per impostazione predefinita, sono selezionate lettura, scrittura ed esecuzione.</span><span class="sxs-lookup"><span data-stu-id="2a05d-208">By default, read, write, and execute are all selected.</span></span>
4. <span data-ttu-id="2a05d-209">Fare clic su **Seleziona** nella parte inferiore della pagina.</span><span class="sxs-lookup"><span data-stu-id="2a05d-209">Click **Select** on the bottom of the page.</span></span>
5. <span data-ttu-id="2a05d-210">Fare clic su **Run**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-210">Click **Run**.</span></span>
6. <span data-ttu-id="2a05d-211">Fare clic su **Done**.</span><span class="sxs-lookup"><span data-stu-id="2a05d-211">Click **Done**.</span></span>

<span data-ttu-id="2a05d-212">Se si usa Data Lake Store come risorsa di archiviazione aggiuntiva, è necessario assegnare autorizzazioni solo per le cartella a cui si vuole accedere dal cluster HDInsight.</span><span class="sxs-lookup"><span data-stu-id="2a05d-212">If you are using Data Lake Store as additional storage, you must assign permission only for the folders that you want to access from the HDInsight cluster.</span></span> <span data-ttu-id="2a05d-213">Ad esempio, nella schermata seguente, garantire l'accesso solo alla cartella **hdiaddonstorage** in un account Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="2a05d-213">For example, in the screenshot below, you provide access only to **hdiaddonstorage** folder in a Data Lake Store account.</span></span>

<span data-ttu-id="2a05d-214">![Assegnare le autorizzazioni dell'entità servizio al cluster HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "Assegnare le autorizzazioni dell'entità servizio al cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="2a05d-214">![Assign service principal permissions to the HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.3-1.png "Assign service principal permissions to the HDInsight cluster")</span></span>


## <a name="verify-cluster-set-up"></a><span data-ttu-id="2a05d-215">Verificare la configurazione del cluster</span><span class="sxs-lookup"><span data-stu-id="2a05d-215">Verify cluster set up</span></span>

<span data-ttu-id="2a05d-216">Al termine della configurazione del cluster, nel pannello del cluster verificare i risultati eseguendo uno o entrambi i passaggi seguenti:</span><span class="sxs-lookup"><span data-stu-id="2a05d-216">After the cluster setup is complete, on the cluster blade, verify your results by doing either or both of the following steps:</span></span>

* <span data-ttu-id="2a05d-217">Per verificare che la risorsa di archiviazione associata per il cluster sia l'account Data Lake Store specificato, fare clic su **Account di archiviazione** nel riquadro sinistro.</span><span class="sxs-lookup"><span data-stu-id="2a05d-217">To verify that the associated storage for the cluster is the Data Lake Store account that you specified, click **Storage accounts** in the left pane.</span></span>

    <span data-ttu-id="2a05d-218">![Aggiungere l'entità servizio al cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Aggiungere l'entità servizio al cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="2a05d-218">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6-1.png "Add service principal to HDInsight cluster")</span></span>

* <span data-ttu-id="2a05d-219">Per verificare che l'entità servizio sia correttamente associata al cluster HDInsight, fare clic su **Accesso a Data Lake Store** nel riquadro sinistro.</span><span class="sxs-lookup"><span data-stu-id="2a05d-219">To verify that the service principal is correctly associated with the HDInsight cluster, click **Data Lake Store access** in the left pane.</span></span>

    <span data-ttu-id="2a05d-220">![Aggiungere l'entità servizio al cluster HDInsight](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Aggiungere l'entità servizio al cluster HDInsight")</span><span class="sxs-lookup"><span data-stu-id="2a05d-220">![Add service principal to HDInsight cluster](./media/data-lake-store-hdinsight-hadoop-use-portal/hdi.adl.6.png "Add service principal to HDInsight cluster")</span></span>


## <a name="examples"></a><span data-ttu-id="2a05d-221">esempi</span><span class="sxs-lookup"><span data-stu-id="2a05d-221">Examples</span></span>

<span data-ttu-id="2a05d-222">Dopo aver configurato il cluster con Data Lake Store come risorsa di archiviazione, fare riferimento a questi esempi su come usare il cluster HDInsight per analizzare i dati archiviati in Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="2a05d-222">After you have set up the cluster with Data Lake Store as your storage, refer to these examples of how to use HDInsight cluster to analyze the data that's stored in Data Lake Store.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-primary-storage"></a><span data-ttu-id="2a05d-223">Eseguire una query Hive sui dati archiviati in Data Lake Store (come risorsa di archiviazione primaria)</span><span class="sxs-lookup"><span data-stu-id="2a05d-223">Run a Hive query against data in a Data Lake Store (as primary storage)</span></span>

<span data-ttu-id="2a05d-224">Per eseguire una query Hive, usare l'interfaccia delle visualizzazioni Hive disponibile nel portale di Ambari.</span><span class="sxs-lookup"><span data-stu-id="2a05d-224">To run a Hive query, use the Hive views interface in the Ambari portal.</span></span> <span data-ttu-id="2a05d-225">Per istruzioni su come usare le visualizzazioni Hive di Ambari, vedere [Usare la visualizzazione Hive con Hadoop in HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span><span class="sxs-lookup"><span data-stu-id="2a05d-225">For instructions on how to use Ambari Hive views, see [Use the Hive View with Hadoop in HDInsight](../hdinsight/hdinsight-hadoop-use-hive-ambari-view.md).</span></span>

<span data-ttu-id="2a05d-226">Quando si usano dati in Data Lake Store, è necessario modificare alcune stringhe.</span><span class="sxs-lookup"><span data-stu-id="2a05d-226">When you work with data in a Data Lake Store, there are a few strings to change.</span></span>

<span data-ttu-id="2a05d-227">Ad esempio, se si usa il cluster creato con Data Lake Store come risorsa di archiviazione primaria, il percorso dei dati è: *adl://<nome_account_data_lake_store>/azuredatalakestore.net/path/to/file*.</span><span class="sxs-lookup"><span data-stu-id="2a05d-227">If you use, for example, the cluster that you created with Data Lake Store as primary storage, the path to the data is: *adl://<data_lake_store_account_name>/azuredatalakestore.net/path/to/file*.</span></span> <span data-ttu-id="2a05d-228">Una query Hive per creare una tabella dai dati di esempio archiviati nell'account Data Lake Store avrà un aspetto simile all'istruzione seguente:</span><span class="sxs-lookup"><span data-stu-id="2a05d-228">A Hive query to create a table from sample data that's stored in the Data Lake Store account looks like the following statement:</span></span>

    CREATE EXTERNAL TABLE websitelog (str string) LOCATION 'adl://hdiadlsstorage.azuredatalakestore.net/clusters/myhdiadlcluster/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/'

<span data-ttu-id="2a05d-229">Descrizioni:</span><span class="sxs-lookup"><span data-stu-id="2a05d-229">Descriptions:</span></span>
* <span data-ttu-id="2a05d-230">`adl://hdiadlstorage.azuredatalakestore.net/` è la radice dell'account di Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="2a05d-230">`adl://hdiadlstorage.azuredatalakestore.net/` is the root of the Data Lake Store account.</span></span>
* <span data-ttu-id="2a05d-231">`/clusters/myhdiadlcluster` è la radice dei dati del cluster specificata durante la creazione del cluster.</span><span class="sxs-lookup"><span data-stu-id="2a05d-231">`/clusters/myhdiadlcluster` is the root of the cluster data that you specified while creating the cluster.</span></span>
* <span data-ttu-id="2a05d-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/` è il percorso del file di esempio usato nella query.</span><span class="sxs-lookup"><span data-stu-id="2a05d-232">`/HdiSamples/HdiSamples/WebsiteLogSampleData/SampleLog/` is the location of the sample file that you used in the query.</span></span>

### <a name="run-a-hive-query-against-data-in-a-data-lake-store-as-additional-storage"></a><span data-ttu-id="2a05d-233">Eseguire una query Hive sui dati archiviati in Data Lake Store (come risorsa di archiviazione aggiuntiva)</span><span class="sxs-lookup"><span data-stu-id="2a05d-233">Run a Hive query against data in a Data Lake Store (as additional storage)</span></span>

<span data-ttu-id="2a05d-234">Se il cluster creato usa l'archiviazione BLOB come risorsa di archiviazione predefinita, i dati di esempio non si troveranno nell'account Azure Data Lake Store usato come risorsa di archiviazione aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="2a05d-234">If the cluster that you created uses Blob storage as default storage, the sample data is not contained in the Azure Data Lake Store account that's used as additional storage.</span></span> <span data-ttu-id="2a05d-235">In questi casi, trasferire innanzitutto i dati dall'archiviazione BLOB a Data Lake Store e quindi eseguire le query come mostrato nell'esempio precedente.</span><span class="sxs-lookup"><span data-stu-id="2a05d-235">In such a case, first transfer the data from Blob storage to the Data Lake Store, and then run the queries as shown in the preceding example.</span></span>

<span data-ttu-id="2a05d-236">Per informazioni su come copiare dati dall'archiviazione BLOB a Data Lake Store, vedere gli articoli seguenti:</span><span class="sxs-lookup"><span data-stu-id="2a05d-236">For information on how to copy data from Blob storage to a Data Lake Store, see the following articles:</span></span>

* [<span data-ttu-id="2a05d-237">Usare Distcp per copiare dati tra i BLOB di archiviazione di Azure e Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="2a05d-237">Use Distcp to copy data between Azure Storage blobs and Data Lake Store</span></span>](data-lake-store-copy-data-wasb-distcp.md)
* [<span data-ttu-id="2a05d-238">Usare lo strumento AdlCopy per copiare i dati da BLOB di Archiviazione di Azure a Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="2a05d-238">Use AdlCopy to copy data from Azure Storage blobs to Data Lake Store</span></span>](data-lake-store-copy-data-azure-storage-blob.md)

### <a name="use-data-lake-store-with-a-spark-cluster"></a><span data-ttu-id="2a05d-239">Usare Data Lake Store con un cluster Spark</span><span class="sxs-lookup"><span data-stu-id="2a05d-239">Use Data Lake Store with a Spark cluster</span></span>
<span data-ttu-id="2a05d-240">È possibile usare un cluster Spark per eseguire processi Spark sui dati archiviati in Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="2a05d-240">You can use a Spark cluster to run Spark jobs on data that is stored in a Data Lake Store.</span></span> <span data-ttu-id="2a05d-241">Per altre informazioni, vedere [Usare il cluster HDInsight Spark per analizzare i dati in Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="2a05d-241">For more information, see [Use HDInsight Spark cluster to analyze data in Data Lake Store](../hdinsight/hdinsight-apache-spark-use-with-data-lake-store.md).</span></span>


### <a name="use-data-lake-store-in-a-storm-topology"></a><span data-ttu-id="2a05d-242">Usare Data Lake Store in una topologia Storm</span><span class="sxs-lookup"><span data-stu-id="2a05d-242">Use Data Lake Store in a Storm topology</span></span>
<span data-ttu-id="2a05d-243">È possibile usare Data Lake Store per scrivere dati da una topologia Storm.</span><span class="sxs-lookup"><span data-stu-id="2a05d-243">You can use the Data Lake Store to write data from a Storm topology.</span></span> <span data-ttu-id="2a05d-244">Per istruzioni su come ottenere questo scenario, vedere [Usare Azure Data Lake Store con Apache Storm in HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span><span class="sxs-lookup"><span data-stu-id="2a05d-244">For instructions on how to achieve this scenario, see [Use Azure Data Lake Store with Apache Storm with HDInsight](../hdinsight/hdinsight-storm-write-data-lake-store.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="2a05d-245">Vedere anche</span><span class="sxs-lookup"><span data-stu-id="2a05d-245">See also</span></span>
* [<span data-ttu-id="2a05d-246">PowerShell: Creare un cluster HDInsight per usare Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="2a05d-246">PowerShell: Create an HDInsight cluster to use Data Lake Store</span></span>](data-lake-store-hdinsight-hadoop-use-powershell.md)

[makecert]: https://msdn.microsoft.com/library/windows/desktop/ff548309(v=vs.85).aspx
[pvk2pfx]: https://msdn.microsoft.com/library/windows/desktop/ff550672(v=vs.85).aspx
