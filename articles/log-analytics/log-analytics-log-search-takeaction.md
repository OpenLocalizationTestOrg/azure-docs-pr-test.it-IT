---
title: Operazioni su un runbook di automazione di Azure avviato dall'utente in Log Analytics | Microsoft Docs
description: Questo articolo descrive come eseguire un runbook di automazione on demand dai risultati della ricerca di Log Analytics.
services: log-analytics
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/04/2017
ms.author: magoedte
ms.openlocfilehash: ff938697add98f3d21b4971175432335ee2e39ba
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="take-action-with-an-automation-runbook-from-a-log-analytics-log-search-result"></a><span data-ttu-id="00dff-103">Eseguire operazioni con un runbook di automazione dai risultati della ricerca log di Log Analytics</span><span class="sxs-lookup"><span data-stu-id="00dff-103">Take Action with an Automation Runbook from a Log Analytics log search result</span></span>

<span data-ttu-id="00dff-104">Dai risultati della ricerca log di Azure Log Analytics è ora possibile selezionare **Take action** (Intervieni) per eseguire un runbook di automazione.</span><span class="sxs-lookup"><span data-stu-id="00dff-104">From a log search result in Azure Log Analytics, you can now select **Take action** to run an Automation runbook.</span></span>  <span data-ttu-id="00dff-105">Il runbook consente di risolvere il problema o eseguire altre operazioni, come raccogliere informazioni sulla risoluzione del problema, inviare un messaggio di posta elettronica o creare una richiesta di servizio.</span><span class="sxs-lookup"><span data-stu-id="00dff-105">The runbook can be used to remediate the issue or take some other action such as collect troubleshooting information, send an email, or create a service request.</span></span> 

## <a name="components-and-features-used"></a><span data-ttu-id="00dff-106">Componenti e le funzionalità usati</span><span class="sxs-lookup"><span data-stu-id="00dff-106">Components and features used</span></span>
* [<span data-ttu-id="00dff-107">Account di automazione di Azure</span><span class="sxs-lookup"><span data-stu-id="00dff-107">Azure Automation account</span></span>](../automation/automation-offering-get-started.md)
* [<span data-ttu-id="00dff-108">Area di lavoro di Log Analytics</span><span class="sxs-lookup"><span data-stu-id="00dff-108">Log Analytics workspace</span></span>](../log-analytics/log-analytics-overview.md)

## <a name="to-initiate-runbook-from-log-search"></a><span data-ttu-id="00dff-109">Per avviare il runbook dalla ricerca log</span><span class="sxs-lookup"><span data-stu-id="00dff-109">To initiate runbook from log search</span></span>

<span data-ttu-id="00dff-110">Per intervenire su un evento e avviare un runbook dai risultati della ricerca log, è necessario prima creare una ricerca log, dai cui risultati è possibile richiamare un runbook on demand.</span><span class="sxs-lookup"><span data-stu-id="00dff-110">To take action on an event and initiate a runbook from your log search results, you start by creating a log search and from the results you can invoke a runbook on-demand.</span></span>  <span data-ttu-id="00dff-111">A questo scopo, è possibile usare la funzionalità di ricerca log disponibile in Azure o nel [portale di OMS](../log-analytics/log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="00dff-111">This can be achieved from the log search feature in the Azure or [OMS portal](../log-analytics/log-analytics-log-searches.md).</span></span>  <span data-ttu-id="00dff-112">In questo esempio si eseguirà una ricerca log dal portale di Azure con una dimostrazione di base di questa funzionalità.</span><span class="sxs-lookup"><span data-stu-id="00dff-112">In this example, we perform a log search from the Azure portal with a basic demonstration of this feature.</span></span>

1. <span data-ttu-id="00dff-113">Nel portale di Azure scegliere **Altri servizi** dal menu Hub e selezionare **Log Analytics**.</span><span class="sxs-lookup"><span data-stu-id="00dff-113">In the Azure portal, on the Hub menu click **More services** and select **Log Analytics**.</span></span>  
2. <span data-ttu-id="00dff-114">Nel pannello di Log Analytics selezionare l'area di lavoro personale e nel pannello dell'area di lavoro selezionare **Log search** (Ricerca log).</span><span class="sxs-lookup"><span data-stu-id="00dff-114">On the Log Analytics blade, select your Log Analytics workspace and on the workspace blade select **Log Search**.</span></span>  
3. <span data-ttu-id="00dff-115">Nel pannello di ricerca log eseguire una ricerca log.</span><span class="sxs-lookup"><span data-stu-id="00dff-115">On the Log Search blade, perform a log search.</span></span>  
4. <span data-ttu-id="00dff-116">Nei risultati della ricerca log fare clic sui puntini di sospensione a sinistra di uno dei campi disponibili e nella finestra popup visualizzata selezionare **Take action on** (Intervieni su).</span><span class="sxs-lookup"><span data-stu-id="00dff-116">From the log search results, click the ellipse to the left of one of the fields and from the popup, select **Take action on**.</span></span><br><br> <span data-ttu-id="00dff-117">![Selezione dell'azione di intervento dai risultati della ricerca](./media/log-analytics-log-search-takeaction/log-search-takeaction-menuoption.png)</span><span class="sxs-lookup"><span data-stu-id="00dff-117">![Select Take Action from search result](./media/log-analytics-log-search-takeaction/log-search-takeaction-menuoption.png)</span></span> 
5. <span data-ttu-id="00dff-118">Nel pannello Take action (Intervieni) selezionare **Run a runbook** **(Esegui un runbook)** e nel pannello visualizzato selezionare un runbook da eseguire.</span><span class="sxs-lookup"><span data-stu-id="00dff-118">From the Take action blade, select **Run a runbook**, and on the **Run a runbook** blade you can select a runbook to run.</span></span>  <span data-ttu-id="00dff-119">È possibile selezionare qualsiasi runbook disponibile nell'account di automazione associato all'area di lavoro Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="00dff-119">You can select any runbook in the Automation account that is linked to the Log Analytics workspace.</span></span>  <span data-ttu-id="00dff-120">Tenere presente quanto segue:</span><span class="sxs-lookup"><span data-stu-id="00dff-120">Note the following:</span></span>

    * <span data-ttu-id="00dff-121">I runbook sono organizzati per tag</span><span class="sxs-lookup"><span data-stu-id="00dff-121">Runbooks are organized by tags</span></span>
    * <span data-ttu-id="00dff-122">I valori dei parametri di input dei runbook possono essere selezionati direttamente dai campi dei risultati della ricerca.</span><span class="sxs-lookup"><span data-stu-id="00dff-122">Runbook input parameter values can be selected directly from the fields of the search result.</span></span>  <span data-ttu-id="00dff-123">Viene visualizzato un elenco a discesa con tutti i campi disponibili nella pagina dei risultati tra cui scegliere.</span><span class="sxs-lookup"><span data-stu-id="00dff-123">A drop-down list will appear displaying all the available fields from the result to select from.</span></span>  
    * <span data-ttu-id="00dff-124">È possibile scegliere di eseguire il runbook su un [ruolo di lavoro ibrido per runbook](../automation/automation-hybrid-runbook-worker.md) installato nel computer in cui si è verificato il problema, se si dispone di un gruppo di ruoli di lavoro ibridi corrispondente in cui sia contenuto solo questo computer come membro.</span><span class="sxs-lookup"><span data-stu-id="00dff-124">You can choose to run the runbook on a [hybrid runbook worker](../automation/automation-hybrid-runbook-worker.md) that you have installed on the machine that has the issue if you have a corresponding Hybrid Runbook Worker group that only contains this machine as a member.</span></span>  <span data-ttu-id="00dff-125">Se il nome del gruppo di ruoli di lavoro ibridi corrisponde al nome del computer presente nei risultati della ricerca log, il gruppo viene selezionato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="00dff-125">If the name of the Hybrid Worker group matches the name of the computer that is in the log search result, then the group is selected automatically.</span></span>    

6. <span data-ttu-id="00dff-126">Dopo aver fatto clic su **Esegui** verrà visualizzato il pannello del processo di runbook, da cui sarà possibile rivedere lo stato del processo.</span><span class="sxs-lookup"><span data-stu-id="00dff-126">After you click **Run**, the runbook job blade will open to allow you to review the status of the job.</span></span>   

<span data-ttu-id="00dff-127">Se si seleziona un runbook configurato per essere [chiamato da un avviso di Log Analytics](../automation/automation-invoke-runbook-from-omsla-alert.md), presenta un parametro di input denominato **WebhookData** di tipo **Oggetto**.</span><span class="sxs-lookup"><span data-stu-id="00dff-127">If you select a runbook that was configured to be [called from a Log Analytics alert](../automation/automation-invoke-runbook-from-omsla-alert.md), it has an input parameter called **WebhookData** that is **Object** type.</span></span>  <span data-ttu-id="00dff-128">Se il parametro di input è obbligatorio, è necessario passare i risultati della ricerca al runbook, in modo che possa convertire la stringa in formato JSON in un tipo di oggetto che consenta di filtrare in base a elementi specifici a cui si farà riferimento nelle attività del runbook.</span><span class="sxs-lookup"><span data-stu-id="00dff-128">If the input parameter is mandatory, you need to pass the search results to the runbook so it can convert the JSON-formatted string into an object type allowing you to filter on specific items that you will reference in runbook activities.</span></span>  <span data-ttu-id="00dff-129">A questo scopo, è necessario scegliere **Search result (Object)** (Risultati ricerca (Oggetto)) dall'elenco a discesa.</span><span class="sxs-lookup"><span data-stu-id="00dff-129">You do this by selecting **Search result (Object)** from the drop-down list.</span></span><br><br> <span data-ttu-id="00dff-130">![Selezionare l'oggetto dati Webhook per il parametro del runbook](media/log-analytics-log-search-takeaction/select-runbook-and-properties.png)</span><span class="sxs-lookup"><span data-stu-id="00dff-130">![Select Webhook data object for runbook parameter](media/log-analytics-log-search-takeaction/select-runbook-and-properties.png)</span></span>   
    
## <a name="next-steps"></a><span data-ttu-id="00dff-131">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="00dff-131">Next steps</span></span>

* <span data-ttu-id="00dff-132">Vedere il [riferimento alla ricerca nei log di Log Analytics](log-analytics-search-reference.md) per visualizzare tutti i campi di ricerca e i facet disponibili in Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="00dff-132">Review the [Log Analytics log search reference](log-analytics-search-reference.md) to view all of the search fields and facets available in Log Analytics.</span></span>
* <span data-ttu-id="00dff-133">Per informazioni su come richiamare automaticamente un runbook di automazione, rivedere l'articolo [Chiamata di un runbook di automazione di Azure da un avviso di OMS Log Analytics](../automation/automation-invoke-runbook-from-omsla-alert.md).</span><span class="sxs-lookup"><span data-stu-id="00dff-133">To learn how to invoke an Automation runbook automatically, review [calling an Azure Automation runbook from an OMS Log Analytics alert](../automation/automation-invoke-runbook-from-omsla-alert.md).</span></span>  