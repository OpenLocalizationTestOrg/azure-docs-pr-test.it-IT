---
title: le route aaaTroubleshoot - portale | Documenti Microsoft
description: Informazioni su come route tootroubleshoot nel modello di distribuzione Azure Resource Manager hello utilizzando hello portale di Azure.
services: virtual-network
documentationcenter: na
author: AnithaAdusumilli
manager: narayan
editor: 
tags: azure-resource-manager
ms.assetid: bdd8b6dc-02fb-4057-bb23-8289caa9de89
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/23/2016
ms.author: anithaa
ms.openlocfilehash: 579bae91ef3200852032b3953d3cc5d26deada86
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-routes-using-hello-azure-portal"></a><span data-ttu-id="6f304-103">Risoluzione dei problemi delle route usando hello portale di Azure</span><span class="sxs-lookup"><span data-stu-id="6f304-103">Troubleshoot routes using hello Azure Portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="6f304-104">Portale di Azure</span><span class="sxs-lookup"><span data-stu-id="6f304-104">Azure Portal</span></span>](virtual-network-routes-troubleshoot-portal.md)
> * [<span data-ttu-id="6f304-105">PowerShell</span><span class="sxs-lookup"><span data-stu-id="6f304-105">PowerShell</span></span>](virtual-network-routes-troubleshoot-powershell.md)
>
>

<span data-ttu-id="6f304-106">Se si verificano tooor problemi connettività di rete dalla macchina virtuale di Azure (VM), le route possono influire dei flussi di traffico della macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="6f304-106">If you are experiencing network connectivity issues tooor from your Azure Virtual Machine (VM), routes may be impacting your VM traffic flows.</span></span> <span data-ttu-id="6f304-107">Questo articolo fornisce una panoramica delle funzionalità di diagnostica per le route toohelp risolvere il problema.</span><span class="sxs-lookup"><span data-stu-id="6f304-107">This article provides an overview of diagnostics capabilities for routes toohelp troubleshoot further.</span></span>

<span data-ttu-id="6f304-108">Le tabelle di route sono associate alle subnet e valgono per tutte le interfacce di rete della subnet.</span><span class="sxs-lookup"><span data-stu-id="6f304-108">Route tables are associated with subnets and are effective on all network interfaces (NIC) in that subnet.</span></span> <span data-ttu-id="6f304-109">Hello seguenti tipi di route può essere applicati tooeach interfaccia di rete:</span><span class="sxs-lookup"><span data-stu-id="6f304-109">hello following types of routes can be applied tooeach network interface:</span></span>

* <span data-ttu-id="6f304-110">**Route di sistema:** per impostazione predefinita, ogni subnet creata in una rete virtuale di Azure dispone di tabelle di route di sistema che consentono il traffico di rete virtuale locale, il traffico locale tramite gateway VPN e il traffico Internet.</span><span class="sxs-lookup"><span data-stu-id="6f304-110">**System routes:** By default, every subnet created in an Azure Virtual Network (VNet) has system route tables that allow local VNet traffic, on-premises traffic via VPN gateways, and Internet traffic.</span></span> <span data-ttu-id="6f304-111">Le route di sistema esistono anche per le reti virtuali con peering.</span><span class="sxs-lookup"><span data-stu-id="6f304-111">System routes also exist for peered VNets.</span></span>
* <span data-ttu-id="6f304-112">**Le route BGP:** propagate interfacce toonetwork attraverso ExpressRoute o le connessioni VPN da sito a sito.</span><span class="sxs-lookup"><span data-stu-id="6f304-112">**BGP routes:** Propagated toonetwork interfaces through ExpressRoute or site-to-site VPN connections.</span></span> <span data-ttu-id="6f304-113">Altre informazioni su routing BGP leggendo hello [BGP con gateway VPN](../vpn-gateway/vpn-gateway-bgp-overview.md) e [panoramica relativa a ExpressRoute](../expressroute/expressroute-introduction.md) articoli.</span><span class="sxs-lookup"><span data-stu-id="6f304-113">Learn more about BGP routing by reading hello [BGP with VPN gateways](../vpn-gateway/vpn-gateway-bgp-overview.md) and [ExpressRoute overview](../expressroute/expressroute-introduction.md) articles.</span></span>
* <span data-ttu-id="6f304-114">**Le route definite dall'utente (UDR):** se si usano dispositivi di rete virtuali o sono a tunneling forzato rete locale tooan del traffico tramite una VPN site-to-site, è possibile route definite dall'utente (UDRs) associate con la tabella di route della subnet.</span><span class="sxs-lookup"><span data-stu-id="6f304-114">**User-defined routes (UDR):** If you are using network virtual appliances or are forced-tunneling traffic tooan on-premises network via a site-to-site VPN, you may have user-defined routes (UDRs) associated with your subnet route table.</span></span> <span data-ttu-id="6f304-115">Se non si ha familiarità con UDRs, leggere hello [le route definite dall'utente](virtual-networks-udr-overview.md#user-defined-routes) articolo.</span><span class="sxs-lookup"><span data-stu-id="6f304-115">If you're not familiar with UDRs, read hello [user-defined routes](virtual-networks-udr-overview.md#user-defined-routes) article.</span></span>

<span data-ttu-id="6f304-116">Con hello route diverse che possono essere applicati tooa l'interfaccia di rete, può essere difficile toodetermine le route di aggregazione sono efficaci.</span><span class="sxs-lookup"><span data-stu-id="6f304-116">With hello various routes that can be applied tooa network interface, it can be difficult toodetermine which aggregate routes are effective.</span></span> <span data-ttu-id="6f304-117">toohelp risoluzione dei problemi di connettività di rete VM, è possibile visualizzare tutte le route efficaci hello per un'interfaccia di rete nel modello di distribuzione Azure Resource Manager hello.</span><span class="sxs-lookup"><span data-stu-id="6f304-117">toohelp troubleshoot VM network connectivity, you can view all hello effective routes for a network interface in hello Azure Resource Manager deployment model.</span></span>

## <a name="using-effective-routes-tootroubleshoot-vm-traffic-flow"></a><span data-ttu-id="6f304-118">Utilizzo di VM route valide tootroubleshoot il flusso del traffico</span><span class="sxs-lookup"><span data-stu-id="6f304-118">Using Effective Routes tootroubleshoot VM traffic flow</span></span>
<span data-ttu-id="6f304-119">In questo articolo Usa hello segue scenario come tooillustrate un esempio come tootroubleshoot hello effettiva instrada per un'interfaccia di rete:</span><span class="sxs-lookup"><span data-stu-id="6f304-119">This article uses hello following scenario as an example tooillustrate how tootroubleshoot hello effective routes for a network interface:</span></span>

<span data-ttu-id="6f304-120">Una macchina virtuale (*VM1*) connessi toohello rete virtuale (*VNet1*, prefisso: 10.9.0.0/16) ha esito negativo tooconnect tooa VM(VM3) in una rete virtuale appena peered (*VNet3*, prefisso 10.10.0.0/16).</span><span class="sxs-lookup"><span data-stu-id="6f304-120">A VM (*VM1*) connected toohello VNet (*VNet1*, prefix: 10.9.0.0/16) fails tooconnect tooa VM(VM3) in a newly peered VNet (*VNet3*, prefix 10.10.0.0/16).</span></span> <span data-ttu-id="6f304-121">Sono disponibili UDRs o BGP non instrada applicato tooVM1-NIC1 rete interfaccia connessa toohello macchina virtuale, vengono applicate solo le route di sistema.</span><span class="sxs-lookup"><span data-stu-id="6f304-121">There are no UDRs or BGP routes applied tooVM1-NIC1 network interface connected toohello VM, only system routes are applied.</span></span>

<span data-ttu-id="6f304-122">Questo articolo spiega come hello toodetermine causa dell'errore di connessione hello, utilizzando la funzionalità di route valide nel modello di distribuzione di gestione delle risorse di Azure.</span><span class="sxs-lookup"><span data-stu-id="6f304-122">This article explains how toodetermine hello cause of hello connection failure, using effective routes capability in Azure Resource Management deployment model.</span></span>
<span data-ttu-id="6f304-123">Mentre l'esempio hello Usa solo le route di sistema, hello stessi passaggi può essere utilizzati toodetermine errori di connessione in ingresso e in uscita su qualsiasi tipo di route.</span><span class="sxs-lookup"><span data-stu-id="6f304-123">While hello example uses only system routes, hello same steps can be used toodetermine inbound and outbound connection failures over any route type.</span></span>

> [!NOTE]
> <span data-ttu-id="6f304-124">Se la macchina virtuale è associata più di una scheda di rete, controllare route valide per ogni hello NIC tooand di problemi la connettività di rete toodiagnose da una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="6f304-124">If your VM has more than one NIC attached, check effective routes for each of hello NICs toodiagnose network connectivity issues tooand from a VM.</span></span>
>
>

### <a name="view-effective-routes-for-a-virtual-machine"></a><span data-ttu-id="6f304-125">Visualizzare le route valide per una macchina virtuale</span><span class="sxs-lookup"><span data-stu-id="6f304-125">View effective routes for a virtual machine</span></span>
<span data-ttu-id="6f304-126">toosee hello aggregazione route che vengono applicato tooa macchina virtuale, hello completo alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="6f304-126">toosee hello aggregate routes that are applied tooa VM, complete hello following steps:</span></span>

1. <span data-ttu-id="6f304-127">Portale di Azure all'indirizzo https://portal.azure.com toohello di account di accesso.</span><span class="sxs-lookup"><span data-stu-id="6f304-127">Login toohello Azure portal at https://portal.azure.com.</span></span>
2. <span data-ttu-id="6f304-128">Fare clic su **più servizi**, quindi fare clic su **macchine virtuali** nell'elenco visualizzato hello.</span><span class="sxs-lookup"><span data-stu-id="6f304-128">Click **More services**, then click **Virtual machines** in hello list that appears.</span></span>
3. <span data-ttu-id="6f304-129">Selezionare tootroubleshoot una macchina virtuale dall'elenco di hello che viene visualizzata e viene visualizzato un pannello della macchina virtuale con opzioni.</span><span class="sxs-lookup"><span data-stu-id="6f304-129">Select a VM tootroubleshoot from hello list that appears and a VM blade with options appears.</span></span>
4. <span data-ttu-id="6f304-130">Fare clic su **Diagnostica e risoluzione dei problemi** e quindi selezionare un problema comune.</span><span class="sxs-lookup"><span data-stu-id="6f304-130">Click **Diagnose & solve problems** and then select a common problem.</span></span> <span data-ttu-id="6f304-131">Per questo esempio, **toomy macchina virtuale di Windows non riesco a connettermi** è selezionata.</span><span class="sxs-lookup"><span data-stu-id="6f304-131">For this example, **I can’t connect toomy Windows VM** is selected.</span></span>

    ![](./media/virtual-network-routes-troubleshoot-portal/image1.png)
5. <span data-ttu-id="6f304-132">Passaggi appaiono sotto problema hello, come illustrato nella seguente immagine hello:</span><span class="sxs-lookup"><span data-stu-id="6f304-132">Steps appear under hello problem, as shown in hello following picture:</span></span>

    ![](./media/virtual-network-routes-troubleshoot-portal/image2.png)

    <span data-ttu-id="6f304-133">Fare clic su *route valide* nell'elenco di hello di procedure consigliate.</span><span class="sxs-lookup"><span data-stu-id="6f304-133">Click *effective routes* in hello list of recommended steps.</span></span>
6. <span data-ttu-id="6f304-134">Hello **route valide** pannello viene visualizzato, come illustrato nella seguente immagine hello:</span><span class="sxs-lookup"><span data-stu-id="6f304-134">hello **Effective routes** blade appears, as shown in hello following picture:</span></span>

    ![](./media/virtual-network-routes-troubleshoot-portal/image3.png)

    <span data-ttu-id="6f304-135">Se la VM ha una sola interfaccia di rete, sarà selezionata per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="6f304-135">If your VM has only one NIC, it is selected by default.</span></span> <span data-ttu-id="6f304-136">Se si dispone di più di una scheda di rete, selezionare hello NIC per cui si desidera route valide di tooview hello.</span><span class="sxs-lookup"><span data-stu-id="6f304-136">If you have more than one NIC, select hello NIC for which you want tooview hello effective routes.</span></span>

   > [!NOTE]
   > <span data-ttu-id="6f304-137">Se hello VM associata a hello NIC non è in esecuzione, non verranno visualizzate route valide.</span><span class="sxs-lookup"><span data-stu-id="6f304-137">If hello VM associated with hello NIC is not in a running state, effective routes will not be shown.</span></span> <span data-ttu-id="6f304-138">Solo i primi 200 route valide hello vengono visualizzate nel portale di hello.</span><span class="sxs-lookup"><span data-stu-id="6f304-138">Only hello first 200 effective routes are shown in hello portal.</span></span> <span data-ttu-id="6f304-139">Per l'elenco completo di hello, fare clic su **scaricare**.</span><span class="sxs-lookup"><span data-stu-id="6f304-139">For hello full list, click **Download**.</span></span> <span data-ttu-id="6f304-140">È possibile filtrare ulteriormente i risultati hello da file CSV scaricato hello.</span><span class="sxs-lookup"><span data-stu-id="6f304-140">You can further filter on hello results from hello downloaded .csv file.</span></span>
   >
   >

    <span data-ttu-id="6f304-141">Si noti seguenti hello nell'output di hello:</span><span class="sxs-lookup"><span data-stu-id="6f304-141">Notice hello following in hello output:</span></span>

   * <span data-ttu-id="6f304-142">**Origine**: indica il tipo di hello della route.</span><span class="sxs-lookup"><span data-stu-id="6f304-142">**Source**: Indicates hello type of route.</span></span> <span data-ttu-id="6f304-143">Le route di sistema vengono visualizzate come *Default*, le route definite dall'utente come *User* e le route del gateway (statiche o BGP) come *VPNGateway*.</span><span class="sxs-lookup"><span data-stu-id="6f304-143">System routes are shown as *Default*, UDRs are shown as *User* and gateway routes (static or BGP) are shown as *VPNGateway*.</span></span>
   * <span data-ttu-id="6f304-144">**Stato**: indica lo stato della route valida hello.</span><span class="sxs-lookup"><span data-stu-id="6f304-144">**State**: Indicates state of hello effective route.</span></span> <span data-ttu-id="6f304-145">Alcuni valori possibili sono *Active* o *Invalid*.</span><span class="sxs-lookup"><span data-stu-id="6f304-145">Possible values are *Active* or *Invalid*.</span></span>
   * <span data-ttu-id="6f304-146">**AddressPrefixes**: Specifica il prefisso di indirizzo hello della route valida hello in notazione CIDR.</span><span class="sxs-lookup"><span data-stu-id="6f304-146">**AddressPrefixes**: Specifies hello address prefix of hello effective route in CIDR notation.</span></span>
   * <span data-ttu-id="6f304-147">**nextHopType**: indica l'hop successivo di hello per hello route specificato.</span><span class="sxs-lookup"><span data-stu-id="6f304-147">**nextHopType**: Indicates hello next hop for hello given route.</span></span> <span data-ttu-id="6f304-148">I valori possibili sono *VirtualAppliance*, *Internet*, *VNetLocal*, *VNetPeering* e *Null*.</span><span class="sxs-lookup"><span data-stu-id="6f304-148">Possible values are *VirtualAppliance*, *Internet*, *VNetLocal*, *VNetPeering*, or *Null*.</span></span> <span data-ttu-id="6f304-149">Un valore *Null* per **nextHopType** in una route definita dall'utente potrebbe indicare una route non valida.</span><span class="sxs-lookup"><span data-stu-id="6f304-149">A value of *Null* for **nextHopType** in a UDR may indicate an invalid route.</span></span> <span data-ttu-id="6f304-150">Ad esempio, se **nextHopType** è *VirtualAppliance* e hello network appliance virtuale macchina virtuale non è in uno stato di provisioning/esecuzione.</span><span class="sxs-lookup"><span data-stu-id="6f304-150">For example, if **nextHopType** is *VirtualAppliance* and hello network virtual appliance VM is not in a provisioned/running state.</span></span> <span data-ttu-id="6f304-151">Se **nextHopType** è *VPNGateway* e non è stato eseguito il provisioning/in esecuzione nella rete virtuale specificata hello alcun gateway, route hello potrebbe diventare non valide.</span><span class="sxs-lookup"><span data-stu-id="6f304-151">If **nextHopType** is *VPNGateway* and there is no gateway provisioned/running in hello given VNet, hello route may become invalid.</span></span>
7. <span data-ttu-id="6f304-152">Non vi è alcun toohello route elencate *WestUS VNET3* rete virtuale (prefisso 10.10.0.0/16) da hello *WestUS VNet1* (prefisso 10.9.0.0/16) in immagine hello nel passaggio precedente hello.</span><span class="sxs-lookup"><span data-stu-id="6f304-152">There is no route listed toohello *WestUS-VNET3* VNet (Prefix 10.10.0.0/16) from hello *WestUS-VNet1* (Prefix 10.9.0.0/16) in hello picture in hello previous step.</span></span> <span data-ttu-id="6f304-153">Nella seguente immagine di hello, collegamento di peering hello è hello *Disconnected* stato:</span><span class="sxs-lookup"><span data-stu-id="6f304-153">In hello following picture, hello peering link is in hello *Disconnected* state:</span></span>

    ![](./media/virtual-network-routes-troubleshoot-portal/image4.png)

    <span data-ttu-id="6f304-154">collegamento bidirezionale Hello di peering hello è interrotta, che spiega perché VM1 Impossibile connettersi tooVM3 in hello *WestUS VNet3* rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="6f304-154">hello bi-directional link for hello peering is broken, which explains why VM1 could not connect tooVM3 in hello *WestUS-VNet3* VNet.</span></span>
8. <span data-ttu-id="6f304-155">Hello immagine seguente mostra le route hello dopo la definizione di collegamento di peering hello bidirezionale:</span><span class="sxs-lookup"><span data-stu-id="6f304-155">hello following picture shows hello routes after establishing hello bi-directional peering link:</span></span>

    ![](./media/virtual-network-routes-troubleshoot-portal/image5.png)

<span data-ttu-id="6f304-156">Per la risoluzione dei problemi più scenari per la valutazione di tunneling forzato e route, leggere hello [considerazioni](virtual-network-routes-troubleshoot-portal.md#considerations) sezione di questo articolo.</span><span class="sxs-lookup"><span data-stu-id="6f304-156">For more troubleshooting scenarios for forced-tunneling and route evaluation, read hello [Considerations](virtual-network-routes-troubleshoot-portal.md#considerations) section of this article.</span></span>

### <a name="view-effective-routes-for-a-network-interface"></a><span data-ttu-id="6f304-157">Visualizzare le route valide per un'interfaccia di rete</span><span class="sxs-lookup"><span data-stu-id="6f304-157">View effective routes for a network interface</span></span>
<span data-ttu-id="6f304-158">In caso di impatto sul flusso del traffico di rete per una determinata interfaccia di rete, è possibile visualizzare direttamente un elenco completo delle route valide nell'interfaccia di rete.</span><span class="sxs-lookup"><span data-stu-id="6f304-158">If network traffic flow is impacted for a particular network interface (NIC), you can view a full list of effective routes on a NIC directly.</span></span> <span data-ttu-id="6f304-159">toosee hello aggregazione route che vengono applicato tooa NIC, hello completo alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="6f304-159">toosee hello aggregate routes that are applied tooa NIC, complete hello following steps:</span></span>

1. <span data-ttu-id="6f304-160">Portale di Azure all'indirizzo https://portal.azure.com toohello di account di accesso.</span><span class="sxs-lookup"><span data-stu-id="6f304-160">Login toohello Azure portal at https://portal.azure.com.</span></span>
2. <span data-ttu-id="6f304-161">Fare clic su **Altri servizi** e quindi su **Interfacce di rete**</span><span class="sxs-lookup"><span data-stu-id="6f304-161">Click **More services**, then click **Network interfaces**</span></span>
3. <span data-ttu-id="6f304-162">Ricerca per nome hello di una scheda di rete nell'elenco di hello o selezionarlo dall'elenco di hello visualizzato.</span><span class="sxs-lookup"><span data-stu-id="6f304-162">Search hello list for hello name of a NIC, or select it from hello list that appears.</span></span> <span data-ttu-id="6f304-163">In questo esempio si seleziona **VM1-NIC1** .</span><span class="sxs-lookup"><span data-stu-id="6f304-163">In this example, **VM1-NIC1** is selected.</span></span>
4. <span data-ttu-id="6f304-164">Selezionare **route valide** in hello **interfaccia di rete** pannello, come illustrato nella seguente immagine hello:</span><span class="sxs-lookup"><span data-stu-id="6f304-164">Select **Effective routes** in hello **Network interface** blade, as shown in hello following picture:</span></span>

       ![](./media/virtual-network-routes-troubleshoot-portal/image6.png)

    <span data-ttu-id="6f304-165">Hello **ambito** interfaccia di rete toohello valori predefiniti selezionato.</span><span class="sxs-lookup"><span data-stu-id="6f304-165">hello **Scope** defaults toohello network interface selected.</span></span>

      ![](./media/virtual-network-routes-troubleshoot-portal/image7.png)

### <a name="view-effective-routes-for-a-route-table"></a><span data-ttu-id="6f304-166">Visualizzare le route valide per una tabella di route</span><span class="sxs-lookup"><span data-stu-id="6f304-166">View effective routes for a route table</span></span>
<span data-ttu-id="6f304-167">Quando si modificano le route definite dall'utente (UDRs) in una tabella di route, è consigliabile impatto hello tooreview delle route hello aggiunto in una determinata macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="6f304-167">When modifying user-defined routes (UDRs) in a route table, you may want tooreview hello impact of hello routes being added on a particular VM.</span></span> <span data-ttu-id="6f304-168">Una tabella di route può essere associata a qualsiasi numero di subnet.</span><span class="sxs-lookup"><span data-stu-id="6f304-168">A route table can be associated with any number of subnets.</span></span> <span data-ttu-id="6f304-169">È ora possibile visualizzare tutte le route effettiva di hello per tutti hello NIC che una tabella di routing specificato viene applicata, senza la necessità di contesto tooswitch da hello pannello tabella di route specificato.</span><span class="sxs-lookup"><span data-stu-id="6f304-169">You can now view all hello effective routes for all hello NICs that a given route table is applied to, without having tooswitch context from hello given route table blade.</span></span>

<span data-ttu-id="6f304-170">Per questo esempio, la route definita dall'utente *UDRoute* è specificata nella tabella di route *UDRouteTable*.</span><span class="sxs-lookup"><span data-stu-id="6f304-170">For this example, a UDR (*UDRoute*) is specified in a route table (*UDRouteTable*).</span></span> <span data-ttu-id="6f304-171">Questa route invia tutto il traffico Internet da *Subnet1* in hello *WestUS VNet1* rete virtuale, attraverso un accessorio virtuale di rete (NVA), in *Subnet2* di hello stessa rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="6f304-171">This route sends all Internet traffic from *Subnet1* in hello *WestUS-VNet1* VNet, through a network virtual appliance (NVA), in *Subnet2* of hello same VNet.</span></span> <span data-ttu-id="6f304-172">route Hello è illustrato nella seguente immagine hello:</span><span class="sxs-lookup"><span data-stu-id="6f304-172">hello route is shown in hello following picture:</span></span>

![](./media/virtual-network-routes-troubleshoot-portal/image8.png)

<span data-ttu-id="6f304-173">toosee hello aggregazione le route per una tabella di route, hello completo alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="6f304-173">toosee hello aggregate routes for a route table, complete hello following steps:</span></span>

1. <span data-ttu-id="6f304-174">Portale di Azure all'indirizzo https://portal.azure.com toohello di account di accesso.</span><span class="sxs-lookup"><span data-stu-id="6f304-174">Login toohello Azure portal at https://portal.azure.com.</span></span>
2. <span data-ttu-id="6f304-175">Fare clic su **Altri servizi** e quindi su **Tabelle route**</span><span class="sxs-lookup"><span data-stu-id="6f304-175">Click **More services**, then click **Route tables**</span></span>
3. <span data-ttu-id="6f304-176">Elenco di hello ricerca per la tabella di route hello desidera toosee le route di aggregazione per e selezionarlo.</span><span class="sxs-lookup"><span data-stu-id="6f304-176">Search hello list for hello route table you want toosee aggregate routes for and select it.</span></span> <span data-ttu-id="6f304-177">In questo esempio si seleziona **UDRouteTable** .</span><span class="sxs-lookup"><span data-stu-id="6f304-177">In this example, **UDRouteTable** is selected.</span></span> <span data-ttu-id="6f304-178">Viene visualizzato un pannello per la tabella di route hello selezionato, come illustrato nella seguente immagine hello:</span><span class="sxs-lookup"><span data-stu-id="6f304-178">A blade for hello selected route table appears, as shown in hello following picture:</span></span>

    ![](./media/virtual-network-routes-troubleshoot-portal/image9.png)
4. <span data-ttu-id="6f304-179">Selezionare **route valide** in hello **tabella di Route** blade.</span><span class="sxs-lookup"><span data-stu-id="6f304-179">Select **Effective Routes** in hello **Route table** blade.</span></span> <span data-ttu-id="6f304-180">Hello **ambito** è impostata una tabella di route toohello selezionata.</span><span class="sxs-lookup"><span data-stu-id="6f304-180">hello **Scope** is set toohello route table you selected.</span></span>
5. <span data-ttu-id="6f304-181">Una tabella di routing può essere applicato toomultiple subnet.</span><span class="sxs-lookup"><span data-stu-id="6f304-181">A route table can be applied toomultiple subnets.</span></span> <span data-ttu-id="6f304-182">Seleziona hello **Subnet** desiderato tooreview dall'elenco di hello.</span><span class="sxs-lookup"><span data-stu-id="6f304-182">Select hello **Subnet** you want tooreview from hello list.</span></span> <span data-ttu-id="6f304-183">In questo esempio si seleziona **Subnet1** .</span><span class="sxs-lookup"><span data-stu-id="6f304-183">In this example, **Subnet1** is selected.</span></span>
6. <span data-ttu-id="6f304-184">Selezionare un'opzione in **Interfaccia di rete**.</span><span class="sxs-lookup"><span data-stu-id="6f304-184">Select a **Network Interface**.</span></span> <span data-ttu-id="6f304-185">Sono elencate tutte le schede di rete connessa toohello selezionato subnet.</span><span class="sxs-lookup"><span data-stu-id="6f304-185">All NICs connected toohello selected subnet are listed.</span></span> <span data-ttu-id="6f304-186">In questo esempio si seleziona **VM1-NIC1** .</span><span class="sxs-lookup"><span data-stu-id="6f304-186">In this example, **VM1-NIC1** is selected.</span></span>

    ![](./media/virtual-network-routes-troubleshoot-portal/image10.png)

   > [!NOTE]
   > <span data-ttu-id="6f304-187">Se hello NIC non è associata a una macchina virtuale in esecuzione, non vengono visualizzati alcuna route valide.</span><span class="sxs-lookup"><span data-stu-id="6f304-187">If hello NIC is not associated with a running VM, no effective routes are shown.</span></span>
   >
   >

## <a name="considerations"></a><span data-ttu-id="6f304-188">Considerazioni</span><span class="sxs-lookup"><span data-stu-id="6f304-188">Considerations</span></span>
<span data-ttu-id="6f304-189">Alcuni aspetti tookeep presente durante la revisione elenco hello di route restituito:</span><span class="sxs-lookup"><span data-stu-id="6f304-189">A few things tookeep in mind when reviewing hello list of routes returned:</span></span>

* <span data-ttu-id="6f304-190">Il routing è basato sulla corrispondenza del prefisso più lunga (LPM) tra le route definite dall'utente, BGP e di sistema.</span><span class="sxs-lookup"><span data-stu-id="6f304-190">Routing is based on Longest Prefix Match (LPM) among UDRs, BGP and system routes.</span></span> <span data-ttu-id="6f304-191">Se è presente più di una route con hello stesso LPM corrispondono, quindi una route viene selezionata in base origine hello seguente ordine:</span><span class="sxs-lookup"><span data-stu-id="6f304-191">If there is more than one route with hello same LPM match, then a route is selected based on its origin in hello following order:</span></span>

  * <span data-ttu-id="6f304-192">Route definita dall'utente</span><span class="sxs-lookup"><span data-stu-id="6f304-192">User-defined route</span></span>
  * <span data-ttu-id="6f304-193">Route BGP</span><span class="sxs-lookup"><span data-stu-id="6f304-193">BGP route</span></span>
  * <span data-ttu-id="6f304-194">Route di sistema (predefinita)</span><span class="sxs-lookup"><span data-stu-id="6f304-194">System (Default) route</span></span>

    <span data-ttu-id="6f304-195">Con route efficaci, è possibile visualizzare solo le route efficaci che corrispondono a LPM in base a tutte le route di hello disponibile.</span><span class="sxs-lookup"><span data-stu-id="6f304-195">With effective routes, you can only see effective routes that are LPM match based on all hello availble routes.</span></span> <span data-ttu-id="6f304-196">Mostrando come route hello vengono effettivamente valutate per una scheda di rete specificato, questo rende molto più semplice tootroubleshoot specifica le route che potrebbero influire negativamente sulla connettività da e verso la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="6f304-196">By showing how hello routes are actually evaluated for a given NIC, this makes it a lot easier tootroubleshoot specific routes that may be impacting connectivity to/from your VM.</span></span>
* <span data-ttu-id="6f304-197">Se si dispone di UDRs e inviano traffico tooa virtuale altri dispositivi di rete (NVA), con *VirtualAppliance* come **nextHopType**, verificare che l'inoltro IP sia abilitato sul traffico di hello NVA ricevente hello o i pacchetti vengono eliminati.</span><span class="sxs-lookup"><span data-stu-id="6f304-197">If you have UDRs and are sending traffic tooa network virtual appliance (NVA), with *VirtualAppliance* as **nextHopType**, ensure that IP forwarding is enabled on hello NVA receiving hello traffic or packets are dropped.</span></span>
* <span data-ttu-id="6f304-198">Se è abilitato il tunneling forzato, tutto il traffico Internet in uscita sarà indirizzati tooon locale.</span><span class="sxs-lookup"><span data-stu-id="6f304-198">If Forced tunneling is enabled, all outbound Internet traffic will be routed tooon-premises.</span></span> <span data-ttu-id="6f304-199">RDP/SSH da Internet tooyour che macchina virtuale potrebbe non funzionare con questa impostazione, a seconda di come hello locale gestisce tale traffico.</span><span class="sxs-lookup"><span data-stu-id="6f304-199">RDP/SSH from Internet tooyour VM may not work with this setting, depending on how hello on-premises handles this traffic.</span></span>
  <span data-ttu-id="6f304-200">Il tunneling forzato può essere abilitato:</span><span class="sxs-lookup"><span data-stu-id="6f304-200">Forced-tunneling can be enabled:</span></span>
  * <span data-ttu-id="6f304-201">Se si usa una VPN site-to-site, impostando una route definita dall'utente con nextHopType come Gateway VPN</span><span class="sxs-lookup"><span data-stu-id="6f304-201">If using site-to-site VPN, by setting a user-defined route (UDR) with nextHopType as VPN Gateway</span></span>
  * <span data-ttu-id="6f304-202">Se una route predefinita è pubblicizzata su BGP</span><span class="sxs-lookup"><span data-stu-id="6f304-202">If a default route is advertised over BGP</span></span>
* <span data-ttu-id="6f304-203">Per la rete virtuale peering correttamente, il traffico toowork una route di sistema **nextHopType** *VNetPeering* deve essere presente per il peering hello intervallo prefisso della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="6f304-203">For VNet peering traffic toowork correctly, a system route with **nextHopType** *VNetPeering* must exist for hello peered VNet’s prefix range.</span></span> <span data-ttu-id="6f304-204">Se non esiste e hello peering reti virtuali, una route di tale collegamento ha un aspetto corretto:</span><span class="sxs-lookup"><span data-stu-id="6f304-204">If such a route doesn’t exist and hello VNet peering link looks OK:</span></span>
  * <span data-ttu-id="6f304-205">Attendere alcuni secondi e riprovare, se si tratta di un collegamento di peering appena stabilito.</span><span class="sxs-lookup"><span data-stu-id="6f304-205">Wait a few seconds and retry if it's a newly established peering link.</span></span> <span data-ttu-id="6f304-206">Occasionalmente Accetta route toopropagate più interfacce di rete tooall hello in una subnet.</span><span class="sxs-lookup"><span data-stu-id="6f304-206">It occasionally takes longer toopropagate routes tooall hello network interfaces in a subnet.</span></span>
  * <span data-ttu-id="6f304-207">Flussi di traffico hello potrebbero influire negativamente sulla regole Network Security Group (gruppo).</span><span class="sxs-lookup"><span data-stu-id="6f304-207">Network Security Group (NSG) rules may be impacting hello traffic flows.</span></span> <span data-ttu-id="6f304-208">Per ulteriori informazioni, vedere hello [risolvere i gruppi di sicurezza di rete](virtual-network-nsg-troubleshoot-portal.md) articolo.</span><span class="sxs-lookup"><span data-stu-id="6f304-208">For more information, see hello [Troubleshoot Network Security Groups](virtual-network-nsg-troubleshoot-portal.md) article.</span></span>
