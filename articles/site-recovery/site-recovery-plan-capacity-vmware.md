---
title: "Pianificare la capacità e la scalabilità per la replica VMware con Azure Site Recovery | Microsoft Docs"
description: "Consultare questo articolo per pianificare la capacità e la scalabilità quando si esegue la replica delle macchine virtuali VMware in Azure con Azure Site Recovery"
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: jwhit
editor: 
ms.assetid: 0a1cd8eb-a8f7-4228-ab84-9449e0b2887b
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 05/24/2017
ms.author: rayne
ms.openlocfilehash: 8b580ac239bfb6d7b633fb03d4cfb91b168b0610
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="plan-capacity-and-scaling-for-vmware-replication-with-azure-site-recovery"></a><span data-ttu-id="a1fb4-103">Pianificare la capacità e la scalabilità per la replica VMware con Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="a1fb4-103">Plan capacity and scaling for VMware replication with Azure Site Recovery</span></span>

<span data-ttu-id="a1fb4-104">Consultare questo articolo per scoprire come pianificare la capacità e la scalabilità durante la replica locale delle macchine virtuali VMware e dei server fisici in Azure, con [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a1fb4-104">Use this article to figure out planning for capacity and scaling, when replicating on-premises VMware VMs and physical servers to Azure with [Azure Site Recovery](site-recovery-overview.md).</span></span>

## <a name="how-do-i-start-capacity-planning"></a><span data-ttu-id="a1fb4-105">Come si inizia per pianificare la capacità?</span><span class="sxs-lookup"><span data-stu-id="a1fb4-105">How do I start capacity planning?</span></span>

<span data-ttu-id="a1fb4-106">Raccogliere informazioni sull'ambiente di replica usando [Azure Site Recovery Deployment Planner](https://aka.ms/asr-deployment-planner-doc) per la replica VMware.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-106">Gather information about your replication environment by running the [Azure Site Recovery Deployment Planner](https://aka.ms/asr-deployment-planner-doc) for VMware replication.</span></span> <span data-ttu-id="a1fb4-107">[Altre informazioni](site-recovery-deployment-planner.md) su questo strumento.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-107">[Learn more](site-recovery-deployment-planner.md) about this tool.</span></span> <span data-ttu-id="a1fb4-108">È possibile ottenere informazioni sulle macchine virtuali compatibili e non, i dischi per ogni macchina virtuale e la varianza di dati per ogni disco.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-108">You'll gather information about compatible and incompatible VMs, disks per VM, and data churn per disk.</span></span> <span data-ttu-id="a1fb4-109">Lo strumento specifica anche i requisiti della larghezza di banda di rete e l'infrastruttura di Azure necessaria per la corretta esecuzione della replica e il failover del test.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-109">The tool also covers network bandwidth requirements, and the Azure infrastructure needed for successful replication and test failover.</span></span>

## <a name="capacity-considerations"></a><span data-ttu-id="a1fb4-110">Considerazioni sulla capacità</span><span class="sxs-lookup"><span data-stu-id="a1fb4-110">Capacity considerations</span></span>

<span data-ttu-id="a1fb4-111">**Componente**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-111">**Component**</span></span> | <span data-ttu-id="a1fb4-112">**Dettagli**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-112">**Details**</span></span> |
--- | --- | ---
<span data-ttu-id="a1fb4-113">**Replica**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-113">**Replication**</span></span> | <span data-ttu-id="a1fb4-114">**Frequenza di modifica giornaliera massima**: un computer protetto può usare un solo server di elaborazione e la frequenza di modifica giornaliera gestita da un singolo server di elaborazione può arrivare fino a 2 TB.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-114">**Maximum daily change rate:** A protected machine can only use one process server, and a single process server can handle a daily change rate up to 2 TB.</span></span> <span data-ttu-id="a1fb4-115">La massima frequenza di modifica dei dati giornaliera supportata per una macchina protetta è quindi di 2 TB.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-115">Thus 2 TB is the maximum daily data change rate that’s supported for a protected machine.</span></span><br/><br/> <span data-ttu-id="a1fb4-116">**Velocità effettiva massima**: una macchina replicata può appartenere a un account di archiviazione in Azure.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-116">**Maximum throughput:** A replicated machine can belong to one storage account in Azure.</span></span> <span data-ttu-id="a1fb4-117">Un account di archiviazione standard può gestire fino a 20.000 richieste al secondo ed è consigliabile fare in modo che il numero di operazioni di input/output al secondo (IOPS) in una macchina di origine rimanga impostato su 20.000.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-117">A standard storage account can handle a maximum of 20,000 requests per second, and we recommend that you keep the number of input/output operations per second (IOPS) across a source machine to 20,000.</span></span> <span data-ttu-id="a1fb4-118">Se, ad esempio, si ha un computer di origine con 5 dischi e ogni disco genera 120 IOPS (dimensione pari a 8 K) nella macchina di origine, il computer rientra nel limite di Azure di 500 IOPS per disco.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-118">For example, if you have a source machine with 5 disks, and each disk generates 120 IOPS (8K size) on the source machine, then it will be within the Azure per disk IOPS limit of 500.</span></span> <span data-ttu-id="a1fb4-119">Il numero di account di archiviazione necessari è uguale al numero complessivo di IOPS della macchina di origine diviso per 20.000.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-119">(The number of storage accounts required is equal to the total source machine IOPS, divided by 20,000.)</span></span>
<span data-ttu-id="a1fb4-120">**Server di configurazione**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-120">**Configuration server**</span></span> | <span data-ttu-id="a1fb4-121">Il server di configurazione deve poter gestire la capacità della frequenza di modifica giornaliera in tutti i carichi di lavoro in esecuzione nei computer protetti e avere a disposizione una larghezza di banda sufficiente per eseguire la replica continua dei dati in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-121">The configuration server should be able to handle the daily change rate capacity across all workloads running on protected machines, and needs sufficient bandwidth to continuously replicate data to Azure Storage.</span></span><br/><br/> <span data-ttu-id="a1fb4-122">Come procedura consigliata, il server di configurazione deve trovarsi nella stessa rete e nello stesso segmento LAN dei computer da proteggere.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-122">As a best practice, locate the configuration server on the same network and LAN segment as the machines you want to protect.</span></span> <span data-ttu-id="a1fb4-123">Se si trova in una rete diversa, i computer da proteggere devono avere la visibilità di rete L3 per il server.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-123">It can be located on a different network, but machines you want to protect should have layer 3 network visibility to it.</span></span><br/><br/> <span data-ttu-id="a1fb4-124">Le dimensioni consigliate per il server di configurazione sono riepilogate nella tabella riportata nella sezione successiva.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-124">Size recommendations for the configuration server are summarized in the table in the following section.</span></span>
<span data-ttu-id="a1fb4-125">**Server di elaborazione**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-125">**Process server**</span></span> | <span data-ttu-id="a1fb4-126">Per impostazione predefinita, il primo server di elaborazione viene installato nel server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-126">The first process server is installed by default on the configuration server.</span></span> <span data-ttu-id="a1fb4-127">È possibile distribuire altri server di elaborazione per ridimensionare l'ambiente.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-127">You can deploy additional process servers to scale your environment.</span></span> <br/><br/> <span data-ttu-id="a1fb4-128">Il server di elaborazione riceve i dati di replica da computer protetti e li ottimizza attraverso la memorizzazione nella cache, la compressione e la crittografia,</span><span class="sxs-lookup"><span data-stu-id="a1fb4-128">The process server receives replication data from protected machines, and optimizes it with caching, compression, and encryption.</span></span> <span data-ttu-id="a1fb4-129">prima di inviarli ad Azure.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-129">Then it sends the data to Azure.</span></span> <span data-ttu-id="a1fb4-130">Il computer server di elaborazione deve avere risorse sufficienti per eseguire queste attività.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-130">The process server machine should have sufficient resources to perform these tasks.</span></span><br/><br/> <span data-ttu-id="a1fb4-131">Il server di elaborazione usa una cache basata su disco.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-131">The process server uses a disk-based cache.</span></span> <span data-ttu-id="a1fb4-132">Usare un disco della cache separato di almeno 600 GB per gestire le modifiche ai dati archiviate in caso di colli di bottiglia o interruzioni della rete.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-132">Use a separate cache disk of 600 GB or more to handle data changes stored in the event of a network bottleneck or outage.</span></span>

## <a name="size-recommendations-for-the-configuration-server"></a><span data-ttu-id="a1fb4-133">Dimensioni consigliate per il server di configurazione</span><span class="sxs-lookup"><span data-stu-id="a1fb4-133">Size recommendations for the configuration server</span></span>

<span data-ttu-id="a1fb4-134">**CPU**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-134">**CPU**</span></span> | <span data-ttu-id="a1fb4-135">**Memoria**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-135">**Memory**</span></span> | <span data-ttu-id="a1fb4-136">**Dimensione disco cache**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-136">**Cache disk size**</span></span> | <span data-ttu-id="a1fb4-137">**Frequenza di modifica dei dati**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-137">**Data change rate**</span></span> | <span data-ttu-id="a1fb4-138">**Computer protetti**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-138">**Protected machines**</span></span>
--- | --- | --- | --- | ---
<span data-ttu-id="a1fb4-139">8 vCPU (2 socket * 4 core a 2.5 gigahertz [GHz])</span><span class="sxs-lookup"><span data-stu-id="a1fb4-139">8 vCPUs (2 sockets * 4 cores @ 2.5 gigahertz [GHz])</span></span> | <span data-ttu-id="a1fb4-140">16 GB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-140">16 GB</span></span> | <span data-ttu-id="a1fb4-141">300 GB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-141">300 GB</span></span> | <span data-ttu-id="a1fb4-142">500 GB o inferiore</span><span class="sxs-lookup"><span data-stu-id="a1fb4-142">500 GB or less</span></span> | <span data-ttu-id="a1fb4-143">Replicare meno di 100 computer.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-143">Replicate less than 100 machines.</span></span>
<span data-ttu-id="a1fb4-144">12 vCPU (2 socket * 6 core a 2,5 GHz)</span><span class="sxs-lookup"><span data-stu-id="a1fb4-144">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz)</span></span> | <span data-ttu-id="a1fb4-145">18 GB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-145">18 GB</span></span> | <span data-ttu-id="a1fb4-146">600 GB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-146">600 GB</span></span> | <span data-ttu-id="a1fb4-147">Da 500 GB a 1 TB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-147">500 GB to 1 TB</span></span> | <span data-ttu-id="a1fb4-148">Replicare tra 100 e 150 computer.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-148">Replicate between 100-150 machines.</span></span>
<span data-ttu-id="a1fb4-149">16 vCPU (2 socket * 8 core a 2,5 GHz)</span><span class="sxs-lookup"><span data-stu-id="a1fb4-149">16 vCPUs (2 sockets * 8 cores @ 2.5 GHz)</span></span> | <span data-ttu-id="a1fb4-150">32 GB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-150">32 GB</span></span> | <span data-ttu-id="a1fb4-151">1 TB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-151">1 TB</span></span> | <span data-ttu-id="a1fb4-152">Da 1 TB a 2 TB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-152">1 TB to 2 TB</span></span> | <span data-ttu-id="a1fb4-153">Replicare tra 150 e 200 computer.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-153">Replicate between 150-200 machines.</span></span>
<span data-ttu-id="a1fb4-154">Distribuire un altro server di elaborazione</span><span class="sxs-lookup"><span data-stu-id="a1fb4-154">Deploy another process server</span></span> | | | <span data-ttu-id="a1fb4-155">Superiore a 2 TB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-155">> 2 TB</span></span> | <span data-ttu-id="a1fb4-156">Distribuire server di elaborazione aggiuntivi se si esegue la replica di più di 200 computer o la frequenza di modifica dei dati giornaliera è superiore a 2 TB.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-156">Deploy additional process servers if you're replicating more than 200 machines, or if the daily data change rate exceeds 2 TB.</span></span>

<span data-ttu-id="a1fb4-157">Dove:</span><span class="sxs-lookup"><span data-stu-id="a1fb4-157">Where:</span></span>

* <span data-ttu-id="a1fb4-158">Ogni computer di origine è configurato con 3 dischi da 100 GB.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-158">Each source machine is configured with 3 disks of 100 GB each.</span></span>
* <span data-ttu-id="a1fb4-159">La risorsa di archiviazione di benchmarking usata per le misurazioni del disco della cache è di 8 unità SAS a 10.000 RPM con RAID 10.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-159">We used benchmarking storage of 8 SAS drives of 10 K RPM, with RAID 10, for cache disk measurements.</span></span>

## <a name="size-recommendations-for-the-process-server"></a><span data-ttu-id="a1fb4-160">Dimensioni consigliate per il server di elaborazione</span><span class="sxs-lookup"><span data-stu-id="a1fb4-160">Size recommendations for the process server</span></span>

<span data-ttu-id="a1fb4-161">Se è necessario proteggere più di 200 computer o la frequenza di modifica giornaliera è superiore a 2 TB, è possibile aggiungere altri server di elaborazione per gestire il carico di replica.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-161">If you need to protect more than 200 machines, or the daily change rate is greater than 2 TB, you can add process servers to handle the replication load.</span></span> <span data-ttu-id="a1fb4-162">Per la scalabilità orizzontale è possibile:</span><span class="sxs-lookup"><span data-stu-id="a1fb4-162">To scale out, you can:</span></span>

* <span data-ttu-id="a1fb4-163">Aumentare il numero di server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-163">Increase the number of configuration servers.</span></span> <span data-ttu-id="a1fb4-164">Ad esempio, è possibile proteggere fino a 400 computer con due server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-164">For example, you can protect up to 400 machines with two configuration servers.</span></span>
* <span data-ttu-id="a1fb4-165">Aggiungere altri server di elaborazione e usarli per gestire il traffico al posto del server di gestione o in aggiunta al server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-165">Add more process servers, and use these to handle traffic instead of (or in addition to) the configuration server.</span></span>

<span data-ttu-id="a1fb4-166">La tabella seguente descrive uno scenario in cui:</span><span class="sxs-lookup"><span data-stu-id="a1fb4-166">The following table describes a scenario in which:</span></span>

* <span data-ttu-id="a1fb4-167">Non si prevede di usare il server di configurazione come server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-167">You're not planning to use the configuration server as a process server.</span></span>
* <span data-ttu-id="a1fb4-168">È stato configurato un server di elaborazione aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-168">You've set up an additional process server.</span></span>
* <span data-ttu-id="a1fb4-169">Le macchine virtuali protette sono state configurate per l'uso del server di elaborazione aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-169">You've configured protected virtual machines to use the additional process server.</span></span>
* <span data-ttu-id="a1fb4-170">Ogni computer di origine protetto è configurato con tre dischi da 100 GB.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-170">Each protected source machine is configured with three disks of 100 GB each.</span></span>

<span data-ttu-id="a1fb4-171">**Server di configurazione**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-171">**Configuration server**</span></span> | <span data-ttu-id="a1fb4-172">**Server di elaborazione aggiuntivo**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-172">**Additional process server**</span></span> | <span data-ttu-id="a1fb4-173">**Dimensione disco cache**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-173">**Cache disk size**</span></span> | <span data-ttu-id="a1fb4-174">**Frequenza di modifica dei dati**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-174">**Data change rate**</span></span> | <span data-ttu-id="a1fb4-175">**Computer protetti**</span><span class="sxs-lookup"><span data-stu-id="a1fb4-175">**Protected machines**</span></span>
--- | --- | --- | --- | ---
<span data-ttu-id="a1fb4-176">8 vCPU (2 socket * 4 core a 2,5 GHz), 16 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="a1fb4-176">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 16 GB memory</span></span> | <span data-ttu-id="a1fb4-177">4 vCPU (2 socket * 2 core a 2,5 GHz), 8 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="a1fb4-177">4 vCPUs (2 sockets * 2 cores @ 2.5 GHz), 8 GB memory</span></span> | <span data-ttu-id="a1fb4-178">300 GB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-178">300 GB</span></span> | <span data-ttu-id="a1fb4-179">250 GB o inferiore</span><span class="sxs-lookup"><span data-stu-id="a1fb4-179">250 GB or less</span></span> | <span data-ttu-id="a1fb4-180">Eseguire la replica di un massimo di 85 macchine.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-180">Replicate 85 or fewer machines.</span></span>
<span data-ttu-id="a1fb4-181">8 vCPU (2 socket * 4 core a 2,5 GHz), 16 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="a1fb4-181">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 16 GB memory</span></span> | <span data-ttu-id="a1fb4-182">8 vCPU (2 socket * 4 core a 2,5 GHz), 12 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="a1fb4-182">8 vCPUs (2 sockets * 4 cores @ 2.5 GHz), 12 GB memory</span></span> | <span data-ttu-id="a1fb4-183">600 GB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-183">600 GB</span></span> | <span data-ttu-id="a1fb4-184">Da 250 GB a 1 TB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-184">250 GB to 1 TB</span></span> | <span data-ttu-id="a1fb4-185">Replicare tra 85 e 150 computer.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-185">Replicate between 85-150 machines.</span></span>
<span data-ttu-id="a1fb4-186">12 vCPU (2 socket * 6 core a 2,5 GHz), 18 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="a1fb4-186">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz), 18 GB memory</span></span> | <span data-ttu-id="a1fb4-187">12 vCPU (2 socket * 6 core a 2,5 GHz), 24 GB di memoria</span><span class="sxs-lookup"><span data-stu-id="a1fb4-187">12 vCPUs (2 sockets * 6 cores @ 2.5 GHz) 24 GB memory</span></span> | <span data-ttu-id="a1fb4-188">1 TB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-188">1 TB</span></span> | <span data-ttu-id="a1fb4-189">Da 1 TB a 2 TB</span><span class="sxs-lookup"><span data-stu-id="a1fb4-189">1 TB to 2 TB</span></span> | <span data-ttu-id="a1fb4-190">Replicare tra 150 e 225 computer.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-190">Replicate between 150-225 machines.</span></span>

<span data-ttu-id="a1fb4-191">Il modo in cui i server vengono adattati dipende dalle preferenze personali in merito al modello di scalabilità orizzontale o verticale.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-191">The way in which you scale your servers depends on your preference for a scale-up or scale-out model.</span></span>  <span data-ttu-id="a1fb4-192">L'aumento delle prestazioni si ottiene distribuendo alcuni server di configurazione e di elaborazione avanzati, mentre l'aumento del numero di istanze si ottiene distribuendo più server con meno risorse.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-192">You scale up by deploying a few high-end configuration and process servers, or scale out by deploying more servers with fewer resources.</span></span> <span data-ttu-id="a1fb4-193">Ad esempio, per proteggere 220 computer è possibile eseguire una di queste operazioni:</span><span class="sxs-lookup"><span data-stu-id="a1fb4-193">For example, if you need to protect 220 machines, you could do either of the following:</span></span>

* <span data-ttu-id="a1fb4-194">Configurare il server di configurazione con 12 vCPU e 18 GB di memoria e un server di elaborazione aggiuntivo con 12 vCPU e 24 GB di memoria.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-194">Set up the configuration server with 12 vCPU, 18 GB of memory, and an additional process server with 12 vCPU, 24 GB of memory.</span></span> <span data-ttu-id="a1fb4-195">Configurare quindi le macchine protette affinché usino solo il server di elaborazione aggiuntivo.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-195">Configure protected machines to use the additional process server only.</span></span>
* <span data-ttu-id="a1fb4-196">Configurare due server di configurazione (2 x 8 vCPU, 16 GB di RAM) e due server di elaborazione aggiuntivi (1 x 8 vCPU e 1 x 4 vCPU per gestire 135 + 85 [220] macchine).</span><span class="sxs-lookup"><span data-stu-id="a1fb4-196">Set up two configuration servers (2 x 8 vCPU, 16 GB RAM) and two additional process servers (1 x 8 vCPU and 4 vCPU x 1 to handle 135 + 85 [220] machines).</span></span> <span data-ttu-id="a1fb4-197">Configurare quindi le macchine protette affinché usino solo i server di elaborazione aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-197">Configure protected machines to use the additional process servers only.</span></span>


## <a name="control-network-bandwidth"></a><span data-ttu-id="a1fb4-198">Controllare la larghezza di banda della rete</span><span class="sxs-lookup"><span data-stu-id="a1fb4-198">Control network bandwidth</span></span>

<span data-ttu-id="a1fb4-199">Dopo aver usato lo [strumento di pianificazione della distribuzione](site-recovery-deployment-planner.md) per calcolare la larghezza di banda necessaria per la replica, per la replica iniziale e poi delta, è possibile controllare la quantità di larghezza di banda usata per la replica con due opzioni:</span><span class="sxs-lookup"><span data-stu-id="a1fb4-199">After you've used the [the Deployment Planner tool](site-recovery-deployment-planner.md) to calculate the bandwidth you need for replication (the initial replication and then delta), you can control the amount of bandwidth used for replication using a couple of options:</span></span>

* <span data-ttu-id="a1fb4-200">**Limitare la larghezza di banda**: il traffico VMware che viene replicato in Azure passa attraverso un server di elaborazione specifico.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-200">**Throttle bandwidth**: VMware traffic that replicates to Azure goes through a specific process server.</span></span> <span data-ttu-id="a1fb4-201">È possibile limitare la larghezza di banda nei computer eseguiti come server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-201">You can throttle bandwidth on the machines running as process servers.</span></span>
* <span data-ttu-id="a1fb4-202">**Influire sulla larghezza di banda**: è possibile influire sulla larghezza di banda usata per la replica tramite una coppia di chiavi del Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-202">**Influence bandwidth**: You can influence the bandwidth used for replication by using a couple of registry keys:</span></span>
  * <span data-ttu-id="a1fb4-203">Il valore del Registro di sistema **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\UploadThreadsPerVM** specifica il numero di thread usati per il trasferimento dati di un disco, durante la replica iniziale o differenziale.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-203">The **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\UploadThreadsPerVM** registry value specifies the number of threads that are used for data transfer (initial or delta replication) of a disk.</span></span> <span data-ttu-id="a1fb4-204">Un valore più elevato aumenta la larghezza di banda di rete usata per la replica.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-204">A higher value increases the network bandwidth used for replication.</span></span>
  * <span data-ttu-id="a1fb4-205">Il valore **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\DownloadThreadsPerVM** specifica il numero di thread usati per il trasferimento dati durante il failback.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-205">The **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\DownloadThreadsPerVM** specifies the number of threads used for data transfer during failback.</span></span>

### <a name="throttle-bandwidth"></a><span data-ttu-id="a1fb4-206">Limitare la larghezza di banda</span><span class="sxs-lookup"><span data-stu-id="a1fb4-206">Throttle bandwidth</span></span>

1. <span data-ttu-id="a1fb4-207">Aprire lo snap-in MMC di Azure Backup nel computer usato come server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-207">Open the Azure Backup MMC snap-in on the machine acting as the process server.</span></span> <span data-ttu-id="a1fb4-208">Per impostazione predefinita, è disponibile un collegamento a Backup sul desktop o nella cartella seguente: C:\Programmi\Microsoft Azure Recovery Services Agent\bin\wabadmin.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-208">By default, a shortcut for Backup is available on the desktop, or in the following folder: C:\Program Files\Microsoft Azure Recovery Services Agent\bin\wabadmin.</span></span>
2. <span data-ttu-id="a1fb4-209">Nello snap-in fare clic su **Modifica proprietà**.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-209">In the snap-in, click **Change Properties**.</span></span>

    ![Screenshot dello snap-in MMC di Azure Backup facoltativo per modificare le proprietà](./media/site-recovery-vmware-to-azure/throttle1.png)
3. <span data-ttu-id="a1fb4-211">Nella scheda **Limitazione larghezza di banda rete** selezionare **Abilita la limitazione all'utilizzo della larghezza di banda Internet per le operazioni di backup**.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-211">On the **Throttling** tab, select **Enable internet bandwidth usage throttling for backup operations**.</span></span> <span data-ttu-id="a1fb4-212">Impostare i limiti per le ore lavorative e non lavorative.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-212">Set the limits for work and non-work hours.</span></span> <span data-ttu-id="a1fb4-213">Gli intervalli validi sono compresi tra 512 Kbps e 102 Mbps al secondo.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-213">Valid ranges are from 512 Kbps to 102 Mbps per second.</span></span>

    ![Screenshot della finestra di dialogo Proprietà di Azure Backup](./media/site-recovery-vmware-to-azure/throttle2.png)

<span data-ttu-id="a1fb4-215">È anche possibile usare il cmdlet [Set-OBMachineSetting](https://technet.microsoft.com/library/hh770409.aspx) per impostare la limitazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-215">You can also use the [Set-OBMachineSetting](https://technet.microsoft.com/library/hh770409.aspx) cmdlet to set throttling.</span></span> <span data-ttu-id="a1fb4-216">Di seguito è riportato un esempio:</span><span class="sxs-lookup"><span data-stu-id="a1fb4-216">Here's a sample:</span></span>

    $mon = [System.DayOfWeek]::Monday
    $tue = [System.DayOfWeek]::Tuesday
    Set-OBMachineSetting -WorkDay $mon, $tue -StartWorkHour "9:00:00" -EndWorkHour "18:00:00" -WorkHourBandwidth  (512*1024) -NonWorkHourBandwidth (2048*1024)

<span data-ttu-id="a1fb4-217">**Set-OBMachineSetting -NoThrottle** indica che non è necessaria alcuna limitazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-217">**Set-OBMachineSetting -NoThrottle** indicates that no throttling is required.</span></span>

### <a name="influence-network-bandwidth-for-a-vm"></a><span data-ttu-id="a1fb4-218">Influire sulla larghezza di banda della rete per una VM</span><span class="sxs-lookup"><span data-stu-id="a1fb4-218">Influence network bandwidth for a VM</span></span>

1. <span data-ttu-id="a1fb4-219">Nel Registro di sistema della VM passare a **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Replication**.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-219">In the VM's registry, navigate to **HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows Azure Backup\Replication**.</span></span>
   * <span data-ttu-id="a1fb4-220">Per intervenire sul traffico della larghezza di banda in un disco di replica, modificare il valore di **UploadThreadsPerVM** oppure creare la chiave, se non esiste.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-220">To influence the bandwidth traffic on a replicating disk, modify the value of **UploadThreadsPerVM**, or create the key if it doesn't exist.</span></span>
   * <span data-ttu-id="a1fb4-221">Per intervenire sulla larghezza di banda per il traffico di failback da Azure, modificare il valore di **DownloadThreadsPerVM**.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-221">To influence the bandwidth for failback traffic from Azure, modify the value of **DownloadThreadsPerVM**.</span></span>
2. <span data-ttu-id="a1fb4-222">Il valore predefinito è 4.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-222">The default value is 4.</span></span> <span data-ttu-id="a1fb4-223">In una rete con provisioning eccessivo è necessario modificare i valori predefiniti di queste chiavi del Registro di sistema.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-223">In an “overprovisioned” network, these registry keys should be changed from the default values.</span></span> <span data-ttu-id="a1fb4-224">Il valore massimo è 32.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-224">The maximum is 32.</span></span> <span data-ttu-id="a1fb4-225">Monitorare il traffico per ottimizzare il valore.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-225">Monitor traffic to optimize the value.</span></span>


## <a name="deploy-additional-process-servers"></a><span data-ttu-id="a1fb4-226">Distribuire server di elaborazione aggiuntivi</span><span class="sxs-lookup"><span data-stu-id="a1fb4-226">Deploy additional process servers</span></span>

<span data-ttu-id="a1fb4-227">Se è necessario ridimensionare la distribuzione oltre 200 computer di origine oppure la varianza totale giornaliera è superiore a 2 TB, sono necessari server di elaborazione aggiuntivi per gestire il volume di traffico.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-227">If you have to scale out your deployment beyond 200 source machines, or you have a total daily churn rate of more than 2 TB, you need additional process servers to handle the traffic volume.</span></span> <span data-ttu-id="a1fb4-228">Seguire queste istruzioni per configurare il server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-228">Follow these instructions to set up the process server.</span></span> <span data-ttu-id="a1fb4-229">Dopo aver configurato il server è possibile eseguire la migrazione dei computer di origine per usarlo.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-229">After setting up the server, you migrate source machines to use it.</span></span>

1. <span data-ttu-id="a1fb4-230">In **Site Recovery servers** (Server di Site Recovery) fare clic sul server di configurazione e quindi su **Server di elaborazione**.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-230">In **Site Recovery servers**, click the configuration server, and then click **Process Server**.</span></span>

    ![Screenshot dell'opzione relativa ai server Site Recovery da aggiungere a un server di elaborazione](./media/site-recovery-vmware-to-azure/migrate-ps1.png)
2. <span data-ttu-id="a1fb4-232">In **Tipo di server** fare clic su **Process server (on-premises)** (Server di elaborazione (locale)).</span><span class="sxs-lookup"><span data-stu-id="a1fb4-232">In **Server type**, click **Process server (on-premises)**.</span></span>

    ![Screenshot della finestra di dialogo Server di elaborazione](./media/site-recovery-vmware-to-azure/migrate-ps2.png)
3. <span data-ttu-id="a1fb4-234">Scaricare il file per l'Installazione unificata di Site Recovery ed eseguirlo per installare il server di elaborazione</span><span class="sxs-lookup"><span data-stu-id="a1fb4-234">Download the Site Recovery Unified Setup file, and run it to install the process server.</span></span> <span data-ttu-id="a1fb4-235">e registrarlo nell'insieme di credenziali.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-235">This also registers it in the vault.</span></span>
4. <span data-ttu-id="a1fb4-236">In **Prima di iniziare** selezionare **Add additional process servers to scale out deployment** (Aggiungere server di elaborazione per aumentare le istanze di distribuzione).</span><span class="sxs-lookup"><span data-stu-id="a1fb4-236">In **Before you begin**, select **Add additional process servers to scale out deployment**.</span></span>
5. <span data-ttu-id="a1fb4-237">Completare la procedura guidata come per la [configurazione](#step-2-set-up-the-source-environment) del server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-237">Complete the wizard in the same way you did when you [set up](#step-2-set-up-the-source-environment) the configuration server.</span></span>

    ![Screenshot della procedura guidata per l'installazione unificata di Azure Site Recovery](./media/site-recovery-vmware-to-azure/add-ps1.png)
6. <span data-ttu-id="a1fb4-239">In **Dettagli del server di configurazione** specificare l'indirizzo IP del server di configurazione e la passphrase.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-239">In **Configuration Server Details**, specify the IP address of the configuration server, and the passphrase.</span></span> <span data-ttu-id="a1fb4-240">Per ottenere la passphrase, eseguire **[SiteRecoveryInstallationFolder]\home\sysystems\bin\genpassphrase.exe –n** nel server di configurazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-240">To obtain the passphrase, run **[SiteRecoveryInstallationFolder]\home\sysystems\bin\genpassphrase.exe –n** on the configuration server.</span></span>

    ![Screenshot della pagina dei dettagli del server di configurazione](./media/site-recovery-vmware-to-azure/add-ps2.png)

### <a name="migrate-machines-to-use-the-new-process-server"></a><span data-ttu-id="a1fb4-242">Eseguire la migrazione dei computer per usare il nuovo server di elaborazione</span><span class="sxs-lookup"><span data-stu-id="a1fb4-242">Migrate machines to use the new process server</span></span>
1. <span data-ttu-id="a1fb4-243">In **Impostazioni** > **Server di Site Recovery** fare clic sul server di configurazione e quindi espandere **Server di elaborazione**.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-243">In **Settings** > **Site Recovery servers**, click the configuration server, and then expand **Process servers**.</span></span>

    ![Screenshot della finestra di dialogo Server di elaborazione](./media/site-recovery-vmware-to-azure/migrate-ps2.png)
2. <span data-ttu-id="a1fb4-245">Fare clic con il pulsante destro del mouse sul server di elaborazione corrente e scegliere **Passa a**.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-245">Right-click the process server currently in use, and click **Switch**.</span></span>

    ![Screenshot della finestra di dialogo Server di configurazione](./media/site-recovery-vmware-to-azure/migrate-ps3.png)
3. <span data-ttu-id="a1fb4-247">In **Selezionare il server di elaborazione di destinazione** selezionare il nuovo server di elaborazione da usare e le macchine virtuali che dovranno essere gestite dal server.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-247">In **Select target process server**, select the new process server you want to use, and then select the virtual machines that the server will handle.</span></span> <span data-ttu-id="a1fb4-248">Fare clic sull'icona informazioni per ottenere informazioni sul server.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-248">Click the information icon to get information about the server.</span></span> <span data-ttu-id="a1fb4-249">Per consentire di prendere le decisioni relative al carico, viene visualizzato lo spazio medio necessario per replicare ogni macchina virtuale selezionata nel nuovo server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-249">To help you make load decisions, the average space that's needed to replicate each selected virtual machine to the new process server is displayed.</span></span> <span data-ttu-id="a1fb4-250">Fare clic sul segno di spunta per avviare la replica nel nuovo server di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="a1fb4-250">Click the check mark to start replicating to the new process server.</span></span>


## <a name="next-steps"></a><span data-ttu-id="a1fb4-251">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="a1fb4-251">Next steps</span></span>

<span data-ttu-id="a1fb4-252">Scaricare ed eseguire [Azure Site Recovery Deployment Planner](https://aka.ms/asr-deployment-planner)</span><span class="sxs-lookup"><span data-stu-id="a1fb4-252">Download and run the [Azure Site Recovery Deployment Planner](https://aka.ms/asr-deployment-planner)</span></span>
