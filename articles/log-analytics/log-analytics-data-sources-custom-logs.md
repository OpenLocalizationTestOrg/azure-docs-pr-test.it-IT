---
title: Raccogliere log personalizzati in Log Analytics di OMS | Documentazione Microsoft
description: "Log Analytics può raccogliere gli eventi dai file di testo nei computer Windows e Linux.  Questo articolo descrive come definire un nuovo log personalizzato e i dettagli dei record creati nel repository OMS."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: aca7f6bb-6f53-4fd4-a45c-93f12ead4ae1
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/15/2017
ms.author: bwren
ms.openlocfilehash: b7f28868e3ffdf95dbe39872f382e7c97eae692c
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="custom-logs-in-log-analytics"></a><span data-ttu-id="419a0-104">Log personalizzati in Log Analytics</span><span class="sxs-lookup"><span data-stu-id="419a0-104">Custom logs in Log Analytics</span></span>
<span data-ttu-id="419a0-105">L'origine dati dei log personalizzati in Log Analytics consente di raccogliere gli eventi dai file di testo nei computer Windows e Linux.</span><span class="sxs-lookup"><span data-stu-id="419a0-105">The Custom Logs data source in Log Analytics allows you to collect events from text files on both Windows and Linux computers.</span></span> <span data-ttu-id="419a0-106">Molte applicazioni registrano le informazioni nei file di testo invece di usare servizi di registrazione standard come il registro eventi di Windows o Syslog.</span><span class="sxs-lookup"><span data-stu-id="419a0-106">Many applications log information to text files instead of standard logging services such as Windows Event log or Syslog.</span></span>  <span data-ttu-id="419a0-107">Al termine della raccolta, è possibile analizzare ogni record del log in singoli campi usando la funzionalità [Campi personalizzati](log-analytics-custom-fields.md) di Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="419a0-107">Once collected, you can parse each record in the log in to individual fields using the [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

![Raccolta di log personalizzati](media/log-analytics-data-sources-custom-logs/overview.png)

<span data-ttu-id="419a0-109">I file di log da raccogliere devono soddisfare i criteri seguenti.</span><span class="sxs-lookup"><span data-stu-id="419a0-109">The log files to be collected must match the following criteria.</span></span>

- <span data-ttu-id="419a0-110">Il log deve avere una sola voce per ogni riga o usare un timestamp che corrisponde a uno dei formati seguenti all'inizio di ogni voce.</span><span class="sxs-lookup"><span data-stu-id="419a0-110">The log must either have a single entry per line or use a timestamp matching one of the following formats at the start of each entry.</span></span>

    <span data-ttu-id="419a0-111">AAAA-MM-GG HH:MM:SS </span><span class="sxs-lookup"><span data-stu-id="419a0-111">YYYY-MM-DD HH:MM:SS</span></span><br><span data-ttu-id="419a0-112">M/G/AAAA HH:MM:SS AM/PM</span><span class="sxs-lookup"><span data-stu-id="419a0-112">M/D/YYYY HH:MM:SS AM/PM</span></span> <br><span data-ttu-id="419a0-113">Lun GG,AAAA HH:MM:SS</span><span class="sxs-lookup"><span data-stu-id="419a0-113">Mon DD,YYYY HH:MM:SS</span></span>

- <span data-ttu-id="419a0-114">Il file di log non deve consentire aggiornamenti circolari in cui il file viene sovrascritto con le nuove voci.</span><span class="sxs-lookup"><span data-stu-id="419a0-114">The log file must not allow circular updates where the file is overwritten with new entries.</span></span>
- <span data-ttu-id="419a0-115">Il file di log deve usare la codifica ASCII o UTF-8.</span><span class="sxs-lookup"><span data-stu-id="419a0-115">The log file must use ASCII or UTF-8 encoding.</span></span>  <span data-ttu-id="419a0-116">Non sono supportati altri formati, ad esempio UTF-16.</span><span class="sxs-lookup"><span data-stu-id="419a0-116">Other formats such as UTF-16 are not supported.</span></span>

>[!NOTE]
><span data-ttu-id="419a0-117">Se sono presenti voci duplicate nel file di log, Log Analytics le raccoglierà.</span><span class="sxs-lookup"><span data-stu-id="419a0-117">If there are duplicate entries in the log file, Log Analytics will collect them.</span></span>  <span data-ttu-id="419a0-118">Tuttavia, i risultati della ricerca non saranno coerenti se i risultati del filtro mostrano più eventi rispetto al numero di risultati.</span><span class="sxs-lookup"><span data-stu-id="419a0-118">However, the search results will be inconsistent where the filter results show more events than the result count.</span></span>  <span data-ttu-id="419a0-119">È importante convalidare il log per determinare se l'applicazione che lo crea è la causa di questo comportamento e indirizzarlo se possibile prima di creare la definizione della raccolta dei log personalizzati.</span><span class="sxs-lookup"><span data-stu-id="419a0-119">It will be important that you validate the log to determine if the application that creates it is causing this behavior and address it if possible before creating the custom log collection definition.</span></span>  
>
  
## <a name="defining-a-custom-log"></a><span data-ttu-id="419a0-120">Definizione di un log personalizzato</span><span class="sxs-lookup"><span data-stu-id="419a0-120">Defining a custom log</span></span>
<span data-ttu-id="419a0-121">Usare la procedura seguente per definire un file di log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-121">Use the following procedure to define a custom log file.</span></span>  <span data-ttu-id="419a0-122">Scorrere fino alla fine dell'articolo per la procedura dettagliata di un esempio che spiega come aggiungere un log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-122">Scroll to the end of this article for a walkthrough of a sample of adding a custom log.</span></span>

### <a name="step-1-open-the-custom-log-wizard"></a><span data-ttu-id="419a0-123">Passaggio 1.</span><span class="sxs-lookup"><span data-stu-id="419a0-123">Step 1.</span></span> <span data-ttu-id="419a0-124">Aprire la procedura guidata per i log personalizzati</span><span class="sxs-lookup"><span data-stu-id="419a0-124">Open the Custom Log Wizard</span></span>
<span data-ttu-id="419a0-125">La procedura guidata per i personalizzati viene eseguita nel portale di OMS e consente di definire un nuovo log personalizzato da raccogliere.</span><span class="sxs-lookup"><span data-stu-id="419a0-125">The Custom Log Wizard runs in the OMS portal and allows you to define a new custom log to collect.</span></span>

1. <span data-ttu-id="419a0-126">Nel portale di OMS passare a **Impostazioni**.</span><span class="sxs-lookup"><span data-stu-id="419a0-126">In the OMS portal, go to **Settings**.</span></span>
2. <span data-ttu-id="419a0-127">Fare clic su **Dati**, quindi su **Log personalizzati**.</span><span class="sxs-lookup"><span data-stu-id="419a0-127">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="419a0-128">Per impostazione predefinita, viene eseguito automaticamente il push di tutte le modifiche di configurazione in tutti gli agenti.</span><span class="sxs-lookup"><span data-stu-id="419a0-128">By default, all configuration changes are automatically pushed to all agents.</span></span>  <span data-ttu-id="419a0-129">Per gli agenti Linux, viene inviato un file di configurazione all'agente di raccolta dati Fluentd.</span><span class="sxs-lookup"><span data-stu-id="419a0-129">For Linux agents, a configuration file is sent to the Fluentd data collector.</span></span>  <span data-ttu-id="419a0-130">Per modificare questo file manualmente in ogni agente Linux, deselezionare la casella *Applica la configurazione seguente alle macchine virtuali Linux*.</span><span class="sxs-lookup"><span data-stu-id="419a0-130">If you wish to modify this file manually on each Linux agent, then uncheck the box *Apply below configuration to my Linux machines*.</span></span>
4. <span data-ttu-id="419a0-131">Fare clic su **Aggiungi+** per aprire la procedura guidata per i log personalizzati.</span><span class="sxs-lookup"><span data-stu-id="419a0-131">Click **Add+** to open the Custom Log Wizard.</span></span>

### <a name="step-2-upload-and-parse-a-sample-log"></a><span data-ttu-id="419a0-132">Passaggio 2.</span><span class="sxs-lookup"><span data-stu-id="419a0-132">Step 2.</span></span> <span data-ttu-id="419a0-133">Caricare e analizzare un log di esempio</span><span class="sxs-lookup"><span data-stu-id="419a0-133">Upload and parse a sample log</span></span>
<span data-ttu-id="419a0-134">Per iniziare, caricare un esempio del log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-134">You start by uploading a sample of the custom log.</span></span>  <span data-ttu-id="419a0-135">La procedura guidata analizza e visualizza le voci nel file da convalidare.</span><span class="sxs-lookup"><span data-stu-id="419a0-135">The wizard will parse and display the entries in this file for you to validate.</span></span>  <span data-ttu-id="419a0-136">Log Analytics usa il delimitatore specificato per identificare tutti i record.</span><span class="sxs-lookup"><span data-stu-id="419a0-136">Log Analytics will use the delimiter that you specify to identify each record.</span></span>

<span data-ttu-id="419a0-137">**Nuova riga** è il delimitatore predefinito e viene usato per i file di log con una sola voce per riga.</span><span class="sxs-lookup"><span data-stu-id="419a0-137">**New Line** is the default delimiter and is used for log files that have a single entry per line.</span></span>  <span data-ttu-id="419a0-138">Se la riga inizia con una data e ora in uno dei formati disponibili, è possibile specificare un delimitatore **Timestamp** che supporta le voci che si estendono su più righe.</span><span class="sxs-lookup"><span data-stu-id="419a0-138">If the line starts with a date and time in one of the available formats, then you can specify a **Timestamp** delimiter which supports entries that span more than one line.</span></span>

<span data-ttu-id="419a0-139">Se viene usato un delimitatore Timestamp, la proprietà TimeGenerated di ogni record archiviato in OMS viene popolata con la data/ora specificata per la voce nel file di log.</span><span class="sxs-lookup"><span data-stu-id="419a0-139">If a timestamp delimiter is used, then the TimeGenerated property of each record stored in OMS will be populated with the date/time specified for that entry in the log file.</span></span>  <span data-ttu-id="419a0-140">Se viene usato un delimitatore Nuova riga, TimeGenerated viene popolato con la data e l'ora in cui Log Analytics ha raccolto la voce.</span><span class="sxs-lookup"><span data-stu-id="419a0-140">If a new line delimiter is used, then TimeGenerated is populated with date and time that Log Analytics collected the entry.</span></span>

> [!NOTE]
> <span data-ttu-id="419a0-141">Al momento, Log Analytics gestisce la data/ora raccolta da un log usando un delimitatore Timestamp come UTC.</span><span class="sxs-lookup"><span data-stu-id="419a0-141">Log Analytics currently treats the date/time collected from a log using a timestamp delimiter as UTC.</span></span>  <span data-ttu-id="419a0-142">Questa impostazione verrà modificata a breve in modo che venga usato il fuso orario dell'agente.</span><span class="sxs-lookup"><span data-stu-id="419a0-142">This will soon be changed to use the time zone on the agent.</span></span>
>
>

1. <span data-ttu-id="419a0-143">Fare clic su **Sfoglia** e passare a un file di esempio.</span><span class="sxs-lookup"><span data-stu-id="419a0-143">Click **Browse** and browse to a sample file.</span></span>  <span data-ttu-id="419a0-144">In alcuni browser, questo pulsante potrebbe essere denominato **Scegli file** .</span><span class="sxs-lookup"><span data-stu-id="419a0-144">Note that this may button may be labeled **Choose File** in some browsers.</span></span>
2. <span data-ttu-id="419a0-145">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="419a0-145">Click **Next**.</span></span>
3. <span data-ttu-id="419a0-146">La procedura guidata per i log personalizzati carica il file ed elenca i record identificati.</span><span class="sxs-lookup"><span data-stu-id="419a0-146">The Custom Log Wizard will upload the file and list the records that it identifies.</span></span>
4. <span data-ttu-id="419a0-147">Modificare il delimitatore usato per identificare un nuovo record e selezionare il delimitatore che identifica meglio i record nel file di log.</span><span class="sxs-lookup"><span data-stu-id="419a0-147">Change the delimiter that is used to identify a new record and select the delimiter that best identifies the records in your log file.</span></span>
5. <span data-ttu-id="419a0-148">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="419a0-148">Click **Next**.</span></span>

### <a name="step-3-add-log-collection-paths"></a><span data-ttu-id="419a0-149">Passaggio 3.</span><span class="sxs-lookup"><span data-stu-id="419a0-149">Step 3.</span></span> <span data-ttu-id="419a0-150">Aggiungere percorsi di raccolta di log</span><span class="sxs-lookup"><span data-stu-id="419a0-150">Add log collection paths</span></span>
<span data-ttu-id="419a0-151">È necessario definire uno o più percorsi nell'agente in cui è possibile individuare il log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-151">You must define one or more paths on the agent where it can locate the custom log.</span></span>  <span data-ttu-id="419a0-152">È possibile fornire un percorso specifico e un nome per il file di log oppure specificare un percorso con un carattere jolly per il nome.</span><span class="sxs-lookup"><span data-stu-id="419a0-152">You can either provide a specific path and name for the log file, or you can specify a path with a wildcard for the name.</span></span>  <span data-ttu-id="419a0-153">Questa opzione è utile per le applicazioni che creano un nuovo file ogni giorno o quando un file raggiunge una determinata dimensione.</span><span class="sxs-lookup"><span data-stu-id="419a0-153">This supports applications that create a new file each day or when one file reaches a certain size.</span></span>  <span data-ttu-id="419a0-154">È anche possibile fornire più percorsi per un singolo file di log.</span><span class="sxs-lookup"><span data-stu-id="419a0-154">You can also provide multiple paths for a single log file.</span></span>

<span data-ttu-id="419a0-155">Ad esempio, un'applicazione potrebbe creare un file di log ogni giorno con la data inclusa nel nome, come in log20100316.txt.</span><span class="sxs-lookup"><span data-stu-id="419a0-155">For example, an application might create a log file each day with the date included in the name as in log20100316.txt.</span></span> <span data-ttu-id="419a0-156">Un modello per questo log potrebbe essere *log\*.txt*, applicabile a qualsiasi file di log in base allo schema di denominazione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="419a0-156">A pattern for such a log might be *log\*.txt* which would apply to any log file following the application’s naming scheme.</span></span>

<span data-ttu-id="419a0-157">La tabella seguente fornisce esempi di percorsi validi per specificare file di log diversi.</span><span class="sxs-lookup"><span data-stu-id="419a0-157">The following table provides examples of valid patterns to specify different log files.</span></span>

| <span data-ttu-id="419a0-158">Descrizione</span><span class="sxs-lookup"><span data-stu-id="419a0-158">Description</span></span> | <span data-ttu-id="419a0-159">Path</span><span class="sxs-lookup"><span data-stu-id="419a0-159">Path</span></span> |
|:--- |:--- |
| <span data-ttu-id="419a0-160">Tutti i file in *C:\Logs* con estensione txt nell'agente Windows</span><span class="sxs-lookup"><span data-stu-id="419a0-160">All files in *C:\Logs* with .txt extension on Windows agent</span></span> |<span data-ttu-id="419a0-161">C:\Logs\\\*.txt</span><span class="sxs-lookup"><span data-stu-id="419a0-161">C:\Logs\\\*.txt</span></span> |
| <span data-ttu-id="419a0-162">Tutti i file in *C:\Logs* il cui nome inizia con log e aventi un'estensione txt nell'agente Windows</span><span class="sxs-lookup"><span data-stu-id="419a0-162">All files in *C:\Logs* with a name starting with log and a .txt extension on Windows agent</span></span> |<span data-ttu-id="419a0-163">C:\Logs\log\*.txt</span><span class="sxs-lookup"><span data-stu-id="419a0-163">C:\Logs\log\*.txt</span></span> |
| <span data-ttu-id="419a0-164">Tutti i file in */var/log/audit* con estensione txt nell'agente di Linux</span><span class="sxs-lookup"><span data-stu-id="419a0-164">All files in */var/log/audit* with .txt extension on Linux agent</span></span> |<span data-ttu-id="419a0-165">/var/log/audit/*.txt</span><span class="sxs-lookup"><span data-stu-id="419a0-165">/var/log/audit/*.txt</span></span> |
| <span data-ttu-id="419a0-166">Tutti i file in */var/log/audit* con un nome che inizia con log e con l'estensione .txt nell'agente di Linux</span><span class="sxs-lookup"><span data-stu-id="419a0-166">All files in */var/log/audit* with a name starting with log and a .txt extension on Linux agent</span></span> |<span data-ttu-id="419a0-167">/var/log/audit/log\*.txt</span><span class="sxs-lookup"><span data-stu-id="419a0-167">/var/log/audit/log\*.txt</span></span> |

1. <span data-ttu-id="419a0-168">Selezionare Windows o Linux per specificare il formato del percorso che verrà aggiunto.</span><span class="sxs-lookup"><span data-stu-id="419a0-168">Select Windows or Linux to specify which path format you are adding.</span></span>
2. <span data-ttu-id="419a0-169">Digitare il percorso e fare clic sul pulsante **+** .</span><span class="sxs-lookup"><span data-stu-id="419a0-169">Type in the path and click the **+** button.</span></span>
3. <span data-ttu-id="419a0-170">Ripetere il processo per i percorsi aggiuntivi.</span><span class="sxs-lookup"><span data-stu-id="419a0-170">Repeat the process for any additional paths.</span></span>

### <a name="step-4-provide-a-name-and-description-for-the-log"></a><span data-ttu-id="419a0-171">Passaggio 4.</span><span class="sxs-lookup"><span data-stu-id="419a0-171">Step 4.</span></span> <span data-ttu-id="419a0-172">Specificare un nome e una descrizione per il log</span><span class="sxs-lookup"><span data-stu-id="419a0-172">Provide a name and description for the log</span></span>
<span data-ttu-id="419a0-173">Il nome specificato viene usato per il tipo di log come descritto in precedenza.</span><span class="sxs-lookup"><span data-stu-id="419a0-173">The name that you specify will be used for the log type as described above.</span></span>  <span data-ttu-id="419a0-174">Termina sempre con _CL per definirlo come log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-174">It will always end with _CL to distinguish it as a custom log.</span></span>

1. <span data-ttu-id="419a0-175">Digitare un nome per il log.</span><span class="sxs-lookup"><span data-stu-id="419a0-175">Type in a name for the log.</span></span>  <span data-ttu-id="419a0-176">Il suffisso **\_CL** viene applicato automaticamente.</span><span class="sxs-lookup"><span data-stu-id="419a0-176">The **\_CL** suffix is automatically provided.</span></span>
2. <span data-ttu-id="419a0-177">Aggiungere una **Descrizione**facoltativa.</span><span class="sxs-lookup"><span data-stu-id="419a0-177">Add an optional **Description**.</span></span>
3. <span data-ttu-id="419a0-178">Fare clic su **Avanti** per salvare la definizione del log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-178">Click **Next** to save the custom log definition.</span></span>

### <a name="step-5-validate-that-the-custom-logs-are-being-collected"></a><span data-ttu-id="419a0-179">Passaggio 5.</span><span class="sxs-lookup"><span data-stu-id="419a0-179">Step 5.</span></span> <span data-ttu-id="419a0-180">Verificare che i log personalizzati vengano raccolti</span><span class="sxs-lookup"><span data-stu-id="419a0-180">Validate that the custom logs are being collected</span></span>
<span data-ttu-id="419a0-181">La visualizzazione dei dati iniziali di un nuovo log personalizzato in Log Analytics potrebbe richiedere fino a un'ora.</span><span class="sxs-lookup"><span data-stu-id="419a0-181">It may take up to an hour for the initial data from a new custom log to appear in Log Analytics.</span></span>  <span data-ttu-id="419a0-182">La procedura inizia con la raccolta delle voci dai log trovati nel percorso specificato dal punto in cui è stato definito il log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-182">It will start collecting entries from the logs found in the path you specified from the point that you defined the custom log.</span></span>  <span data-ttu-id="419a0-183">Le voci caricate durante la creazione del log personalizzato non vengono mantenute, ma vengono raccolte le voci già esistenti nei file di log individuati.</span><span class="sxs-lookup"><span data-stu-id="419a0-183">It will not retain the entries that you uploaded during the custom log creation, but it will collect already existing entries in the log files that it locates.</span></span>

<span data-ttu-id="419a0-184">Dopo che Log Analytics avvia la raccolta dal log personalizzato, i record vengono resi disponibili con lo strumento di ricerca nei log.</span><span class="sxs-lookup"><span data-stu-id="419a0-184">Once Log Analytics starts collecting from the custom log, its records will be available with a Log Search.</span></span>  <span data-ttu-id="419a0-185">Usare il nome assegnato al log personalizzato come **Tipo** nella query.</span><span class="sxs-lookup"><span data-stu-id="419a0-185">Use the name that you gave the custom log as the **Type** in your query.</span></span>

> [!NOTE]
> <span data-ttu-id="419a0-186">Se la proprietà RawData non è presente nella ricerca, potrebbe essere necessario chiudere e riaprire il browser.</span><span class="sxs-lookup"><span data-stu-id="419a0-186">If the RawData property is missing from the search, you may need to close and reopen your browser.</span></span>
>
>

### <a name="step-6-parse-the-custom-log-entries"></a><span data-ttu-id="419a0-187">Passaggio 6.</span><span class="sxs-lookup"><span data-stu-id="419a0-187">Step 6.</span></span> <span data-ttu-id="419a0-188">Analizzare le voci del log personalizzato</span><span class="sxs-lookup"><span data-stu-id="419a0-188">Parse the custom log entries</span></span>
<span data-ttu-id="419a0-189">L'intera voce di log viene archiviata in una singola proprietà denominata **RawData**.</span><span class="sxs-lookup"><span data-stu-id="419a0-189">The entire log entry will be stored in a single property called **RawData**.</span></span>  <span data-ttu-id="419a0-190">È probabile che si preferisca separare le diverse parti di informazioni di ogni voce in singole proprietà archiviate nel record.</span><span class="sxs-lookup"><span data-stu-id="419a0-190">You will most likely want to separate the different pieces of information in each entry into individual properties stored in the record.</span></span>  <span data-ttu-id="419a0-191">Per farlo, usare la funzionalità [Campi personalizzati](log-analytics-custom-fields.md) di Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="419a0-191">You do this using the [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

<span data-ttu-id="419a0-192">La procedura dettagliata per l'analisi della voce del log personalizzato non viene fornita in questa sede.</span><span class="sxs-lookup"><span data-stu-id="419a0-192">Detailed steps for parsing the custom log entry are not provided here.</span></span>  <span data-ttu-id="419a0-193">Per queste informazioni, vedere la documentazione [Campi personalizzati](log-analytics-custom-fields.md) .</span><span class="sxs-lookup"><span data-stu-id="419a0-193">Please refer to the [Custom Fields](log-analytics-custom-fields.md) documentation for this information.</span></span>

## <a name="disabling-a-custom-log"></a><span data-ttu-id="419a0-194">Disabilitazione di un log personalizzato</span><span class="sxs-lookup"><span data-stu-id="419a0-194">Disabling a custom log</span></span>
<span data-ttu-id="419a0-195">Dopo la creazione, la definizione del log personalizzato non può essere rimossa, ma può essere disabilitata rimuovendo tutti i relativi percorsi di raccolta.</span><span class="sxs-lookup"><span data-stu-id="419a0-195">You cannot remove a custom log definition once it's been created, but you can disable it by removing all of its collection paths.</span></span>

1. <span data-ttu-id="419a0-196">Nel portale di OMS passare a **Impostazioni**.</span><span class="sxs-lookup"><span data-stu-id="419a0-196">In the OMS portal, go to **Settings**.</span></span>
2. <span data-ttu-id="419a0-197">Fare clic su **Dati**, quindi su **Log personalizzati**.</span><span class="sxs-lookup"><span data-stu-id="419a0-197">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="419a0-198">Fare clic su **Dettagli** accanto alla definizione del log personalizzato per disabilitarla.</span><span class="sxs-lookup"><span data-stu-id="419a0-198">Click **Details** next to the custom log definition to disable.</span></span>
4. <span data-ttu-id="419a0-199">Rimuovere ogni percorso di raccolta della definizione del log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-199">Remove each of the collection paths for the custom log definition.</span></span>

## <a name="data-collection"></a><span data-ttu-id="419a0-200">Raccolta dei dati</span><span class="sxs-lookup"><span data-stu-id="419a0-200">Data collection</span></span>
<span data-ttu-id="419a0-201">Log Analytics raccoglie nuove voci da ogni log personalizzato a intervalli di circa 5 minuti.</span><span class="sxs-lookup"><span data-stu-id="419a0-201">Log Analytics will collect new entries from each custom log approximately every 5 minutes.</span></span>  <span data-ttu-id="419a0-202">L'agente registra la propria posizione in ogni file di log da cui esegue la raccolta.</span><span class="sxs-lookup"><span data-stu-id="419a0-202">The agent will record its place in each log file that it collects from.</span></span>  <span data-ttu-id="419a0-203">Se l'agente risulta offline per un certo periodo di tempo, Log Analytics raccoglie le voci dal momento in cui è stato interrotto, anche se le voci sono state create mentre l'agente era offline.</span><span class="sxs-lookup"><span data-stu-id="419a0-203">If the agent goes offline for a period of time, then Log Analytics will collect entries from where it last left off, even if those entries were created while the agent was offline.</span></span>

<span data-ttu-id="419a0-204">L'intero contenuto della voce di log viene scritto in una singola proprietà denominata **RawData**.</span><span class="sxs-lookup"><span data-stu-id="419a0-204">The entire contents of the log entry are written to a single property called **RawData**.</span></span>  <span data-ttu-id="419a0-205">È possibile suddividerla in più proprietà che possono essere analizzate e ricercate separatamente definendo [Campi personalizzati](log-analytics-custom-fields.md) dopo aver creato il log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-205">You can parse this into multiple properties that can be analyzed and searched separately by defining [Custom Fields](log-analytics-custom-fields.md) after you have created the custom log.</span></span>

## <a name="custom-log-record-properties"></a><span data-ttu-id="419a0-206">Proprietà dei record del log personalizzato</span><span class="sxs-lookup"><span data-stu-id="419a0-206">Custom log record properties</span></span>
<span data-ttu-id="419a0-207">Il tipo dei record del log personalizzato corrisponde al nome del log specificato e le proprietà sono indicate nella tabella seguente.</span><span class="sxs-lookup"><span data-stu-id="419a0-207">Custom log records have a type with the log name that you provide and the properties in the following table.</span></span>

| <span data-ttu-id="419a0-208">Proprietà</span><span class="sxs-lookup"><span data-stu-id="419a0-208">Property</span></span> | <span data-ttu-id="419a0-209">Descrizione</span><span class="sxs-lookup"><span data-stu-id="419a0-209">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="419a0-210">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="419a0-210">TimeGenerated</span></span> |<span data-ttu-id="419a0-211">Data e ora di raccolta del record con Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="419a0-211">Date and time that the record was collected by Log Analytics.</span></span>  <span data-ttu-id="419a0-212">Se il log usa un delimitatore basato sul tempo, questa proprietà indica la data e l'ora raccolte dalla voce.</span><span class="sxs-lookup"><span data-stu-id="419a0-212">If the log uses a time-based delimiter then this is the time collected from the entry.</span></span> |
| <span data-ttu-id="419a0-213">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="419a0-213">SourceSystem</span></span> |<span data-ttu-id="419a0-214">Tipo di agente da cui è stato raccolto il record.</span><span class="sxs-lookup"><span data-stu-id="419a0-214">Type of agent the record was collected from.</span></span> <br> <span data-ttu-id="419a0-215">OpsManager: agente Windows, con connessione diretta o System Center Operations Manager</span><span class="sxs-lookup"><span data-stu-id="419a0-215">OpsManager – Windows agent, either direct connect or System Center Operations Manager</span></span> <br> <span data-ttu-id="419a0-216">Linux – Tutti gli agenti Linux</span><span class="sxs-lookup"><span data-stu-id="419a0-216">Linux – All Linux agents</span></span> |
| <span data-ttu-id="419a0-217">RawData</span><span class="sxs-lookup"><span data-stu-id="419a0-217">RawData</span></span> |<span data-ttu-id="419a0-218">Testo completo della voce raccolta.</span><span class="sxs-lookup"><span data-stu-id="419a0-218">Full text of the collected entry.</span></span> |
| <span data-ttu-id="419a0-219">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="419a0-219">ManagementGroupName</span></span> |<span data-ttu-id="419a0-220">Nome del gruppo di gestione per gli agenti System Center Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="419a0-220">Name of the management group for System Center Operations Manage agents.</span></span>  <span data-ttu-id="419a0-221">Per gli altri agenti, corrisponde ad AOI-\<ID area di lavoro\></span><span class="sxs-lookup"><span data-stu-id="419a0-221">For other agents, this is AOI-\<workspace ID\></span></span> |

## <a name="log-searches-with-custom-log-records"></a><span data-ttu-id="419a0-222">Ricerche nei log con i record del log personalizzato</span><span class="sxs-lookup"><span data-stu-id="419a0-222">Log searches with custom log records</span></span>
<span data-ttu-id="419a0-223">I record dei log personalizzati vengono archiviati nel repository OMS esattamente come i record di qualsiasi altra origine dati.</span><span class="sxs-lookup"><span data-stu-id="419a0-223">Records from custom logs are stored in the OMS repository just like records from any other data source.</span></span>  <span data-ttu-id="419a0-224">Hanno un tipo corrispondente al nome fornito quando si definisce il log, quindi è possibile usare la proprietà Tipo nella ricerca per recuperare i record raccolti da un log specifico.</span><span class="sxs-lookup"><span data-stu-id="419a0-224">They will have a type matching the name that you provide when you define the log, so you can use the Type property in your search to retrieve records collected from a specific log.</span></span>

<span data-ttu-id="419a0-225">La tabella seguente mostra alcuni esempi di ricerche nei log che recuperano i record dai log personalizzati.</span><span class="sxs-lookup"><span data-stu-id="419a0-225">The following table provides different examples of log searches that retrieve records from custom logs.</span></span>

| <span data-ttu-id="419a0-226">Query</span><span class="sxs-lookup"><span data-stu-id="419a0-226">Query</span></span> | <span data-ttu-id="419a0-227">Descrizione</span><span class="sxs-lookup"><span data-stu-id="419a0-227">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="419a0-228">Type=MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="419a0-228">Type=MyApp_CL</span></span> |<span data-ttu-id="419a0-229">Tutti gli eventi da un log personalizzato denominato MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="419a0-229">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="419a0-230">Type=MyApp_CL Severity_CF=error</span><span class="sxs-lookup"><span data-stu-id="419a0-230">Type=MyApp_CL Severity_CF=error</span></span> |<span data-ttu-id="419a0-231">Tutti gli eventi di un log personalizzato denominato MyApp_CL con un valore di *error* in un campo personalizzato denominato *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="419a0-231">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |

>[!NOTE]
> <span data-ttu-id="419a0-232">Se l'area di lavoro è stata aggiornata al [nuovo linguaggio di query di Log Analytics](log-analytics-log-search-upgrade.md), le query precedenti verranno sostituite dalle seguenti.</span><span class="sxs-lookup"><span data-stu-id="419a0-232">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>

> | <span data-ttu-id="419a0-233">Query</span><span class="sxs-lookup"><span data-stu-id="419a0-233">Query</span></span> | <span data-ttu-id="419a0-234">Descrizione</span><span class="sxs-lookup"><span data-stu-id="419a0-234">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="419a0-235">MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="419a0-235">MyApp_CL</span></span> |<span data-ttu-id="419a0-236">Tutti gli eventi da un log personalizzato denominato MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="419a0-236">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="419a0-237">MyApp_CL &#124; where Severity_CF=="error"</span><span class="sxs-lookup"><span data-stu-id="419a0-237">MyApp_CL &#124; where Severity_CF=="error"</span></span> |<span data-ttu-id="419a0-238">Tutti gli eventi di un log personalizzato denominato MyApp_CL con un valore di *error* in un campo personalizzato denominato *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="419a0-238">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |


## <a name="sample-walkthrough-of-adding-a-custom-log"></a><span data-ttu-id="419a0-239">Procedura dettagliata di esempio per l'aggiunta di un log personalizzato</span><span class="sxs-lookup"><span data-stu-id="419a0-239">Sample walkthrough of adding a custom log</span></span>
<span data-ttu-id="419a0-240">La sezione seguente descrive un esempio di creazione di un log personalizzato.</span><span class="sxs-lookup"><span data-stu-id="419a0-240">The following section walks through an example of creating a custom log.</span></span>  <span data-ttu-id="419a0-241">Il log di esempio raccolto ha una singola voce per ogni riga contenente una data e un'ora iniziali seguite da campi delimitati da virgole per il codice, lo stato e il messaggio.</span><span class="sxs-lookup"><span data-stu-id="419a0-241">The sample log being collected has a single entry on each line starting with a date and time and then comma-delimited fields for code, status, and message.</span></span>  <span data-ttu-id="419a0-242">Di seguito sono visualizzate alcune voci di esempio.</span><span class="sxs-lookup"><span data-stu-id="419a0-242">Several sample entries are shown below.</span></span>

    2016-03-10 01:34:36 207,Success,Client 05a26a97-272a-4bc9-8f64-269d154b0e39 connected
    2016-03-10 01:33:33 208,Warning,Client ec53d95c-1c88-41ae-8174-92104212de5d disconnected
    2016-03-10 01:35:44 209,Success,Transaction 10d65890-b003-48f8-9cfc-9c74b51189c8 succeeded
    2016-03-10 01:38:22 302,Error,Application could not connect to database
    2016-03-10 01:31:34 303,Error,Application lost connection to database

### <a name="upload-and-parse-a-sample-log"></a><span data-ttu-id="419a0-243">Caricare e analizzare un log di esempio</span><span class="sxs-lookup"><span data-stu-id="419a0-243">Upload and parse a sample log</span></span>
<span data-ttu-id="419a0-244">Viene fornito uno dei file di log per visualizzare gli eventi che saranno raccolti.</span><span class="sxs-lookup"><span data-stu-id="419a0-244">We provide one of the log files and can see the events that it will be collecting.</span></span>  <span data-ttu-id="419a0-245">In questo caso Nuova riga è un delimitatore sufficiente.</span><span class="sxs-lookup"><span data-stu-id="419a0-245">In this case New Line is a sufficient delimiter.</span></span>  <span data-ttu-id="419a0-246">Se una singola voce nel log può estendersi su più righe, è necessario usare un delimitatore Timestamp.</span><span class="sxs-lookup"><span data-stu-id="419a0-246">If a single entry in the log could span multiple lines though, then a timestamp delimiter would need to be used.</span></span>

![Caricare e analizzare un log di esempio](media/log-analytics-data-sources-custom-logs/delimiter.png)

### <a name="add-log-collection-paths"></a><span data-ttu-id="419a0-248">Aggiungere percorsi di raccolta di log</span><span class="sxs-lookup"><span data-stu-id="419a0-248">Add log collection paths</span></span>
<span data-ttu-id="419a0-249">I file di log si trovano in *C:\MyApp\Logs*.</span><span class="sxs-lookup"><span data-stu-id="419a0-249">The log files will be located in *C:\MyApp\Logs*.</span></span>  <span data-ttu-id="419a0-250">Ogni giorno viene creato un nuovo file con un nome che include la data nel modello *appYYYYMMDD.log*.</span><span class="sxs-lookup"><span data-stu-id="419a0-250">A new file will be created each day with a name that includes the date in the pattern *appYYYYMMDD.log*.</span></span>  <span data-ttu-id="419a0-251">Un modello sufficiente per questo registro è *C:\MyApp\Logs\\\*.log*.</span><span class="sxs-lookup"><span data-stu-id="419a0-251">A sufficient pattern for this log would be *C:\MyApp\Logs\\\*.log*.</span></span>

![Percorso di raccolta di log](media/log-analytics-data-sources-custom-logs/collection-path.png)

### <a name="provide-a-name-and-description-for-the-log"></a><span data-ttu-id="419a0-253">Specificare un nome e una descrizione per il log</span><span class="sxs-lookup"><span data-stu-id="419a0-253">Provide a name and description for the log</span></span>
<span data-ttu-id="419a0-254">Viene usato il nome *MyApp_CL* e viene digitata una **descrizione**.</span><span class="sxs-lookup"><span data-stu-id="419a0-254">We use a name of *MyApp_CL* and type in a **Description**.</span></span>

![Nome del log](media/log-analytics-data-sources-custom-logs/log-name.png)

### <a name="validate-that-the-custom-logs-are-being-collected"></a><span data-ttu-id="419a0-256">Verificare che i log personalizzati vengano raccolti</span><span class="sxs-lookup"><span data-stu-id="419a0-256">Validate that the custom logs are being collected</span></span>
<span data-ttu-id="419a0-257">Viene usata una query *Type=MyApp_CL* per restituire tutti i record dal log raccolto.</span><span class="sxs-lookup"><span data-stu-id="419a0-257">We use a query of *Type=MyApp_CL* to return all records from the collected log.</span></span>

![Query di log senza campi personalizzati](media/log-analytics-data-sources-custom-logs/query-01.png)

### <a name="parse-the-custom-log-entries"></a><span data-ttu-id="419a0-259">Analizzare le voci del log personalizzato</span><span class="sxs-lookup"><span data-stu-id="419a0-259">Parse the custom log entries</span></span>
<span data-ttu-id="419a0-260">Viene usato Campi personalizzati per definire i campi *EventTime*, *Code*, *Status* e *Message* ed è possibile osservare la differenza nei record restituiti dalla query.</span><span class="sxs-lookup"><span data-stu-id="419a0-260">We use Custom Fields to define the *EventTime*, *Code*, *Status*, and *Message* fields and we can see the difference in the records that are returned by the query.</span></span>

![Query di log con campi personalizzati](media/log-analytics-data-sources-custom-logs/query-02.png)

## <a name="next-steps"></a><span data-ttu-id="419a0-262">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="419a0-262">Next steps</span></span>
* <span data-ttu-id="419a0-263">Usare [Campi personalizzati](log-analytics-custom-fields.md) per analizzare le voci del log personalizzato nei singoli campi.</span><span class="sxs-lookup"><span data-stu-id="419a0-263">Use [Custom Fields](log-analytics-custom-fields.md) to parse the entries in the custom log in to individual fields.</span></span>
* <span data-ttu-id="419a0-264">Informazioni sulle [ricerche nei log](log-analytics-log-searches.md) per analizzare i dati raccolti dalle origini dati e dalle soluzioni.</span><span class="sxs-lookup"><span data-stu-id="419a0-264">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>
