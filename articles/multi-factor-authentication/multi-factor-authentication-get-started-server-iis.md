---
title: Autenticazione IIS e server Azure MFA | Microsoft Docs
description: "Questa è la pagina di Azure Multi-Factor Authentication contenente le informazioni utili per distribuire l'autenticazione IIS e il server Azure Multi-Factor Authentication."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: d1bf1c8a-2c10-4ae6-9f4b-75f0c3df43eb
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/16/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: H1Hack27Feb2017,it-pro
ms.openlocfilehash: ab6f9110dccd3cfc15092f535650e8d8cb1af13c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="configure-azure-multi-factor-authentication-server-for-iis-web-apps"></a><span data-ttu-id="1cb29-103">Configurazione di Azure Multi-Factor Authentication per le App Web IIS</span><span class="sxs-lookup"><span data-stu-id="1cb29-103">Configure Azure Multi-Factor Authentication Server for IIS web apps</span></span>

<span data-ttu-id="1cb29-104">Usare la sezione Autenticazione IIS del server Azure Multi-Factor Authentication (MFA) per abilitare e configurare l'autenticazione IIS per l'integrazione con le applicazioni Web Microsoft IIS.</span><span class="sxs-lookup"><span data-stu-id="1cb29-104">Use the IIS Authentication section of the Azure Multi-Factor Authentication (MFA) Server to enable and configure IIS authentication for integration with Microsoft IIS web applications.</span></span> <span data-ttu-id="1cb29-105">Il server Azure MFA installa un plug-in che può filtrare le richieste inoltrate al server Web IIS per aggiungere Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="1cb29-105">The Azure MFA Server installs a plug-in that can filter requests being made to the IIS web server to add Azure Multi-Factor Authentication.</span></span> <span data-ttu-id="1cb29-106">Il plug-in di IIS fornisce inoltre il supporto per l'autenticazione basata su form e l'autenticazione HTTP integrata di Windows.</span><span class="sxs-lookup"><span data-stu-id="1cb29-106">The IIS plug-in provides support for Form-Based Authentication and Integrated Windows HTTP Authentication.</span></span> <span data-ttu-id="1cb29-107">È possibile anche configurare gli indirizzi IP attendibili in modo da escludere gli indirizzi IP interni dall'autenticazione a due fattori.</span><span class="sxs-lookup"><span data-stu-id="1cb29-107">Trusted IPs can also be configured to exempt internal IP addresses from two-factor authentication.</span></span>

![Autenticazione IIS](./media/multi-factor-authentication-get-started-server-iis/iis.png)

## <a name="using-form-based-iis-authentication-with-azure-multi-factor-authentication-server"></a><span data-ttu-id="1cb29-109">Uso dell'autenticazione IIS basata su form con il server Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="1cb29-109">Using Form-Based IIS Authentication with Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="1cb29-110">Per proteggere un'applicazione Web IIS che usa l'autenticazione basata su form, installare il server Azure Multi-Factor Authentication nel server Web IIS e configurare il server seguendo questa procedura:</span><span class="sxs-lookup"><span data-stu-id="1cb29-110">To secure an IIS web application that uses form-based authentication, install the Azure Multi-Factor Authentication Server on the IIS web server and configure the Server per the following procedure:</span></span>

1. <span data-ttu-id="1cb29-111">Nel server Azure Multi-Factor Authentication fare clic sull'icona Autenticazione IIS nel menu a sinistra.</span><span class="sxs-lookup"><span data-stu-id="1cb29-111">In the Azure Multi-Factor Authentication Server, click the IIS Authentication icon in the left menu.</span></span>
2. <span data-ttu-id="1cb29-112">Fare clic sulla scheda **Basata su form**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-112">Click the **Form-Based** tab.</span></span>
3. <span data-ttu-id="1cb29-113">Fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-113">Click **Add**.</span></span>
4. <span data-ttu-id="1cb29-114">Per rilevare automaticamente le variabili di dominio, nome utente e password, immettere l'URL di accesso, ad esempio https://localhost/contoso/auth/login.aspx, nella finestra di dialogo Configura automaticamente sito Web basato su form e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-114">To detect username, password and domain variables automatically, enter the Login URL (like https://localhost/contoso/auth/login.aspx) within the Auto-Configure Form-Based Website dialog box and click **OK**.</span></span>
5. <span data-ttu-id="1cb29-115">Se tutti gli utenti sono già stati o verranno importati nel server e saranno soggetti all'autenticazione a più fattori, selezionare la casella **Richiedi corrispondenza utente di Multi-Factor Authentication**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-115">Check the **Require Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to multi-factor authentication.</span></span> <span data-ttu-id="1cb29-116">Se un numero significativo di utenti non è ancora stato importato nel Server e/o esenti dall'autenticazione a più fattori, lasciare deselezionata la casella.</span><span class="sxs-lookup"><span data-stu-id="1cb29-116">If a significant number of users have not yet been imported into the Server and/or will be exempt from multi-factor authentication, leave the box unchecked.</span></span>
6. <span data-ttu-id="1cb29-117">Se le variabili di pagina non possono essere rilevate automaticamente, fare clic su **Specifica manualmente** nella finestra di dialogo Configura automaticamente sito Web basato su form.</span><span class="sxs-lookup"><span data-stu-id="1cb29-117">If the page variables cannot be detected automatically, click **Specify Manually** in the Auto-Configure Form-Based Website dialog box.</span></span>
7. <span data-ttu-id="1cb29-118">Nella finestra di dialogo Aggiungi sito Web immettere l'URL alla pagina di accesso nel campo URL di invio e immettere un nome di applicazione (facoltativo).</span><span class="sxs-lookup"><span data-stu-id="1cb29-118">In the Add Form-Based Website dialog box, enter the URL to the login page in the Submit URL field and enter an Application name (optional).</span></span> <span data-ttu-id="1cb29-119">Il nome dell'applicazione viene visualizzato nei report di Azure multi-Factor Authentication e potrebbe essere visualizzato all'interno di messaggi di autenticazione dell'App Mobile o SMS.</span><span class="sxs-lookup"><span data-stu-id="1cb29-119">The Application name appears in Azure Multi-Factor Authentication reports and may be displayed within SMS or Mobile App authentication messages.</span></span>
8. <span data-ttu-id="1cb29-120">Selezionare il formato di richiesta corretto</span><span class="sxs-lookup"><span data-stu-id="1cb29-120">Select the correct Request format.</span></span> <span data-ttu-id="1cb29-121">È impostato su **POST or GET** (OTTIENI) per la maggior parte delle applicazioni Web.</span><span class="sxs-lookup"><span data-stu-id="1cb29-121">This is set to **POST or GET** for most web applications.</span></span>
9. <span data-ttu-id="1cb29-122">Immettere la variabile nome utente, la variabile password e la variabile dominio (se è presente nella pagina di accesso).</span><span class="sxs-lookup"><span data-stu-id="1cb29-122">Enter the Username variable, Password variable, and Domain variable (if it appears on the login page).</span></span> <span data-ttu-id="1cb29-123">Per individuare i nomi delle caselle di input, passare alla pagina di accesso in un Web browser, fare clic con il pulsante destro del mouse nella pagina e quindi scegliere **Visualizza origine**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-123">To find the names of the input boxes, navigate to the login page in a web browser, right-click on the page, and select **View Source**.</span></span>
10. <span data-ttu-id="1cb29-124">Selezionare la casella **Require Azure Multi-Factor Authentication user match** (Richiedi corrispondenza utente di Azure Multi-Factor Authentication) se tutti gli utenti sono già stati o verranno importati nel server e saranno soggetti all'autenticazione a più fattori.</span><span class="sxs-lookup"><span data-stu-id="1cb29-124">Check the **Require Azure Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to multi-factor authentication.</span></span> <span data-ttu-id="1cb29-125">Se un numero significativo di utenti non è ancora stato importato nel Server e/o esenti dall'autenticazione a più fattori, lasciare deselezionata la casella.</span><span class="sxs-lookup"><span data-stu-id="1cb29-125">If a significant number of users have not yet been imported into the Server and/or will be exempt from multi-factor authentication, leave the box unchecked.</span></span>
11. <span data-ttu-id="1cb29-126">Fare clic su **Avanzate** per rivedere le impostazioni avanzate, tra cui:</span><span class="sxs-lookup"><span data-stu-id="1cb29-126">Click **Advanced** to review advanced settings, including:</span></span>

  - <span data-ttu-id="1cb29-127">Selezionare un file di paging di rifiuto personalizzato</span><span class="sxs-lookup"><span data-stu-id="1cb29-127">Select a custom denial page file</span></span>
  - <span data-ttu-id="1cb29-128">Memorizzare nella cache le autenticazioni riuscite per il sito Web per un periodo di tempo tramite cookie</span><span class="sxs-lookup"><span data-stu-id="1cb29-128">Cache successful authentications to the website for a period of time using cookies</span></span>
  - <span data-ttu-id="1cb29-129">Scegliere se autenticare le credenziali primarie in un dominio di Windows, in una directory LDAP</span><span class="sxs-lookup"><span data-stu-id="1cb29-129">Select whether to authenticate the primary credentials against a Windows Domain, LDAP directory.</span></span> <span data-ttu-id="1cb29-130">o in un server RADIUS.</span><span class="sxs-lookup"><span data-stu-id="1cb29-130">or RADIUS server.</span></span>

12. <span data-ttu-id="1cb29-131">Fare clic su **OK** per tornare alla finestra di dialogo Aggiungi sito Web basato su form.</span><span class="sxs-lookup"><span data-stu-id="1cb29-131">Click **OK** to return to the Add Form-Based Website dialog box.</span></span>
13. <span data-ttu-id="1cb29-132">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-132">Click **OK**.</span></span>
14. <span data-ttu-id="1cb29-133">Dopo aver rilevato o immesso le variabili di pagina e URL, i dati del sito Web vengono visualizzati nel pannello Basata su form.</span><span class="sxs-lookup"><span data-stu-id="1cb29-133">Once the URL and page variables have been detected or entered, the website data displays in the Form-Based panel.</span></span>

## <a name="using-integrated-windows-authentication-with-azure-multi-factor-authentication-server"></a><span data-ttu-id="1cb29-134">Uso dell'autenticazione integrata di Windows con il server Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="1cb29-134">Using Integrated Windows Authentication with Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="1cb29-135">Per proteggere un'applicazione Web IIS che usa l'autenticazione HTTP integrata di Windows, installare il server Azure MFA nel server Web IIS e configurare il server seguendo questa procedura:</span><span class="sxs-lookup"><span data-stu-id="1cb29-135">To secure an IIS web application that uses Integrated Windows HTTP authentication, install the Azure MFA Server on the IIS web server, then configure the Server with the following steps:</span></span>

1. <span data-ttu-id="1cb29-136">Nel server Azure Multi-Factor Authentication fare clic sull'icona Autenticazione IIS nel menu a sinistra.</span><span class="sxs-lookup"><span data-stu-id="1cb29-136">In the Azure Multi-Factor Authentication Server, click the IIS Authentication icon in the left menu.</span></span>
2. <span data-ttu-id="1cb29-137">Fare clic sulla scheda **HTTP**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-137">Click the **HTTP** tab.</span></span>
3. <span data-ttu-id="1cb29-138">Fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-138">Click **Add**.</span></span>
4. <span data-ttu-id="1cb29-139">Nella finestra di dialogo Aggiungi URL di base immettere l'URL del sito Web in cui viene eseguita l'autenticazione HTTP, ad esempio http://localhost/owa, e immettere il nome dell'applicazione (facoltativo).</span><span class="sxs-lookup"><span data-stu-id="1cb29-139">In the Add Base URL dialogue box, enter the URL for the website where HTTP authentication is performed (like http://localhost/owa) and provide an Application name (optional).</span></span> <span data-ttu-id="1cb29-140">Il nome dell'applicazione viene visualizzato nei report di Azure multi-Factor Authentication e potrebbe essere visualizzato all'interno di messaggi di autenticazione dell'App Mobile o SMS.</span><span class="sxs-lookup"><span data-stu-id="1cb29-140">The Application name appears in Azure Multi-Factor Authentication reports and may be displayed within SMS or Mobile App authentication messages.</span></span>
5. <span data-ttu-id="1cb29-141">Modificare i valori relativi al timeout di inattività e al tempo massimo delle sessioni se i valori predefiniti non sono sufficienti.</span><span class="sxs-lookup"><span data-stu-id="1cb29-141">Adjust the Idle timeout and Maximum session times if the default is not sufficient.</span></span>
6. <span data-ttu-id="1cb29-142">Se tutti gli utenti sono già stati o verranno importati nel server e saranno soggetti all'autenticazione a più fattori, selezionare la casella **Richiedi corrispondenza utente di Multi-Factor Authentication**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-142">Check the **Require Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to multi-factor authentication.</span></span> <span data-ttu-id="1cb29-143">Se un numero significativo di utenti non è ancora stato importato nel Server e/o esenti dall'autenticazione a più fattori, lasciare deselezionata la casella.</span><span class="sxs-lookup"><span data-stu-id="1cb29-143">If a significant number of users have not yet been imported into the Server and/or will be exempt from multi-factor authentication, leave the box unchecked.</span></span>
7. <span data-ttu-id="1cb29-144">Se lo si desidera, selezionare la casella **Cookie cache** (Cache di cookie).</span><span class="sxs-lookup"><span data-stu-id="1cb29-144">Check the **Cookie cache** box if desired.</span></span>
8. <span data-ttu-id="1cb29-145">Fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-145">Click **OK**.</span></span>

## <a name="enable-iis-plug-ins-for-azure-multi-factor-authentication-server"></a><span data-ttu-id="1cb29-146">Abilitare i plug-in di IIS per il server Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="1cb29-146">Enable IIS Plug-ins for Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="1cb29-147">Dopo aver configurato gli URL e le impostazioni dell'autenticazione HTTP o basata su form, selezionare le destinazioni in cui i plug-in di IIS del server Azure Multi-Factor Authentication devono essere caricati e abilitati in IIS.</span><span class="sxs-lookup"><span data-stu-id="1cb29-147">After configuring the Form-Based or HTTP authentication URLs and settings, select the locations where the Azure Multi-Factor Authentication IIS plug-ins should be loaded and enabled in IIS.</span></span> <span data-ttu-id="1cb29-148">Usare la procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="1cb29-148">Use the following procedure:</span></span>

1. <span data-ttu-id="1cb29-149">Se si esegue IIS 6, fare clic sulla scheda **ISAPI**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-149">If running on IIS 6, click the **ISAPI** tab.</span></span> <span data-ttu-id="1cb29-150">Selezionare il sito Web che esegue l'applicazione Web (ad esempio "Sito Web predefinito") per abilitare il plug-in dei filtri ISAPI di Azure Multi-Factor Authentication per tale sito.</span><span class="sxs-lookup"><span data-stu-id="1cb29-150">Select the website that the web application is running under (e.g. Default Web Site) to enable the Azure Multi-Factor Authentication ISAPI filter plug-in for that site.</span></span>
2. <span data-ttu-id="1cb29-151">Se si esegue IIS 7 o versione successiva, fare clic sulla scheda **Modulo nativo**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-151">If running on IIS 7 or higher, click the **Native Module** tab.</span></span> <span data-ttu-id="1cb29-152">Selezionare il server, i siti Web o le applicazioni per abilitare il plug-in di IIS ai livelli desiderati.</span><span class="sxs-lookup"><span data-stu-id="1cb29-152">Select the server, websites, or applications to enable the IIS plug-in at the desired levels.</span></span>
3. <span data-ttu-id="1cb29-153">Scegliere la casella **Abilita autenticazione IIS** nella parte superiore della schermata.</span><span class="sxs-lookup"><span data-stu-id="1cb29-153">Click the **Enable IIS authentication** box at the top of the screen.</span></span> <span data-ttu-id="1cb29-154">A questo punto l'applicazione IIS selezionata è protetta da Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="1cb29-154">Azure Multi-Factor Authentication is now securing the selected IIS application.</span></span> <span data-ttu-id="1cb29-155">Verificare che gli utenti siano stati importati nel server.</span><span class="sxs-lookup"><span data-stu-id="1cb29-155">Ensure that users have been imported into the Server.</span></span>

## <a name="trusted-ips"></a><span data-ttu-id="1cb29-156">IP attendibili</span><span class="sxs-lookup"><span data-stu-id="1cb29-156">Trusted IPs</span></span>
<span data-ttu-id="1cb29-157">Il provider di identità attendibili consente agli utenti di ignorare Azure multi-Factor Authentication per le richieste del sito Web provenienti da specifici indirizzi IP o subnet.</span><span class="sxs-lookup"><span data-stu-id="1cb29-157">The Trusted IPs allows users to bypass Azure Multi-Factor Authentication for website requests originating from specific IP addresses or subnets.</span></span> <span data-ttu-id="1cb29-158">Ad esempio, è possibile escludere gli utenti da Azure multi-Factor Authentication durante l'accesso dall'ufficio.</span><span class="sxs-lookup"><span data-stu-id="1cb29-158">For example, you may want to exempt users from Azure Multi-Factor Authentication while logging in from the office.</span></span> <span data-ttu-id="1cb29-159">A tale scopo, specificare la subnet dell'ufficio come voce di Indirizzi IP attendibili.</span><span class="sxs-lookup"><span data-stu-id="1cb29-159">For this, you would specify the office subnet as a Trusted IPs entry.</span></span> <span data-ttu-id="1cb29-160">Per configurare gli indirizzi IP attendibili, seguire questa procedura:</span><span class="sxs-lookup"><span data-stu-id="1cb29-160">To configure Trusted IPs, use the following procedure:</span></span>

1. <span data-ttu-id="1cb29-161">Fare clic sulla scheda **IP attendibili** nella sezione Autenticazione IIS.</span><span class="sxs-lookup"><span data-stu-id="1cb29-161">In the IIS Authentication section, click the **Trusted IPs** tab.</span></span>
2. <span data-ttu-id="1cb29-162">Fare clic su **Aggiungi**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-162">Click **Add**.</span></span>
3. <span data-ttu-id="1cb29-163">Quando viene visualizzata la finestra di dialogo Add Trusted IPs (Aggiungi IP attendibili), selezionare il pulsante di opzione **IP singolo**, **Intervallo IP** o **Subnet**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-163">When the Add Trusted IPs dialog box appears, select the **Single IP**, **IP range**, or **Subnet** radio button.</span></span>
4. <span data-ttu-id="1cb29-164">Immettere l'indirizzo IP, intervallo di indirizzi IP o subnet devono essere incluse nell'elenco.</span><span class="sxs-lookup"><span data-stu-id="1cb29-164">Enter the IP address, range of IP addresses or subnet that should be whitelisted.</span></span> <span data-ttu-id="1cb29-165">Se si immette una subnet, selezionare la Netmask appropriata e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="1cb29-165">If entering a subnet, select the appropriate Netmask and click **OK**.</span></span> <span data-ttu-id="1cb29-166">L'elenco whitelist è stato aggiunto.</span><span class="sxs-lookup"><span data-stu-id="1cb29-166">The whitelist has now been added.</span></span>
