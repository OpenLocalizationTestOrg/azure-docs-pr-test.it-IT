---
title: Multi-Factor Authentication - Azure SQL | Microsoft Docs
description: Utilizzare Multi-Factored Authentication con SSMS per il database SQL e SQL Data Warehouse.
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: 
tags: 
ms.assetid: fbd6e644-0520-439c-8304-2e4fb6d6eb91
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 07/19/2017
ms.author: rickbyh
ms.openlocfilehash: 17c48626d85b833269bb7c4d1d34618cccffd03e
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="universal-authentication-with-sql-database-and-sql-data-warehouse-ssms-support-for-mfa"></a><span data-ttu-id="96cae-103">Autenticazione universale con database SQL e SQL Data Warehouse (supporto SSMS per MFA)</span><span class="sxs-lookup"><span data-stu-id="96cae-103">Universal Authentication with SQL Database and SQL Data Warehouse (SSMS support for MFA)</span></span>
<span data-ttu-id="96cae-104">Il database SQL e Azure SQL Data Warehouse supportano le connessioni da SQL Server Management Studio (SSMS) tramite l'*autenticazione universale di Active Directory*.</span><span class="sxs-lookup"><span data-stu-id="96cae-104">Azure SQL Database and Azure SQL Data Warehouse support connections from SQL Server Management Studio (SSMS) using *Active Directory Universal Authentication*.</span></span> 
<span data-ttu-id="96cae-105">**Scaricare la versione più recente di SSMS**: nel computer client scaricare la versione più recente di SSMS da [Scaricare SQL Server Management Studio (SSMS)](https://msdn.microsoft.com/library/mt238290.aspx).</span><span class="sxs-lookup"><span data-stu-id="96cae-105">**Download the latest SSMS** - On the client computer, download the latest version of SSMS, from [Download SQL Server Management Studio (SSMS)](https://msdn.microsoft.com/library/mt238290.aspx).</span></span> <span data-ttu-id="96cae-106">Per tutte le funzionalità illustrate in questo argomento, usare almeno la versione 17.2 di luglio 2017.</span><span class="sxs-lookup"><span data-stu-id="96cae-106">For all the features in this topic, use at least July 2017, version 17.2.</span></span>  <span data-ttu-id="96cae-107">La finestra di dialogo più recente per la connessione ha un aspetto simile al seguente: ![1mfa-universal-connect](./media/sql-database-ssms-mfa-auth/1mfa-universal-connect.png "Completare la casella del nome utente.")</span><span class="sxs-lookup"><span data-stu-id="96cae-107">The most recent connection dialog box, looks like this: ![1mfa-universal-connect](./media/sql-database-ssms-mfa-auth/1mfa-universal-connect.png "Completes the User name box.")</span></span>  

## <a name="the-five-authentication-options"></a><span data-ttu-id="96cae-108">Le cinque opzioni di autenticazione</span><span class="sxs-lookup"><span data-stu-id="96cae-108">The five authentication options</span></span>  
- <span data-ttu-id="96cae-109">L'autenticazione universale di Active Directory supporta due metodi di autenticazione non interattivi, ovvero `Active Directory - Password` e `Active Directory - Integrated`.</span><span class="sxs-lookup"><span data-stu-id="96cae-109">Active Directory Universal Authentication supports the two non-interactive authentication methods (`Active Directory - Password` authentication and `Active Directory - Integrated` authentication).</span></span> <span data-ttu-id="96cae-110">I metodi di autenticazione `Active Directory - Password` e `Active Directory - Integrated` non interattivi possono essere usati in svariate applicazioni (ADO.NET, JDBC, ODBC e così via).</span><span class="sxs-lookup"><span data-stu-id="96cae-110">Non-interactive `Active Directory - Password` and `Active Directory - Integrated` Authentication methods can be used in many different applications (ADO.NET, JDBC, ODBC, etc.).</span></span> <span data-ttu-id="96cae-111">Questi due metodi non aprono mai finestre di dialogo popup.</span><span class="sxs-lookup"><span data-stu-id="96cae-111">These two methods never result in pop-up dialog boxes.</span></span>

- <span data-ttu-id="96cae-112">L'autenticazione `Active Directory - Universal with MFA` è un metodo interattivo che supporta anche *Azure Multi-Factor Authentication* (MFA).</span><span class="sxs-lookup"><span data-stu-id="96cae-112">`Active Directory - Universal with MFA` authentication is an interactive method that also supports *Azure Multi-Factor Authentication* (MFA).</span></span> <span data-ttu-id="96cae-113">Azure MFA consente di proteggere l'accesso ai dati e alle applicazioni dell'utente, garantendo al tempo stesso una procedura di accesso semplice.</span><span class="sxs-lookup"><span data-stu-id="96cae-113">Azure MFA helps safeguard access to data and applications while meeting user demand for a simple sign-in process.</span></span> <span data-ttu-id="96cae-114">Offre funzionalità avanzate di autenticazione con una serie di semplici opzioni di verifica, tra cui telefonata, SMS, smart card con pin o notifica tramite app per dispositivi mobili, in modo che ogni utente possa scegliere il metodo che preferisce.</span><span class="sxs-lookup"><span data-stu-id="96cae-114">It delivers strong authentication with a range of easy verification options (phone call, text message, smart cards with pin, or mobile app notification), allowing users to choose the method they prefer.</span></span> <span data-ttu-id="96cae-115">La convalida di MFA interattiva con Azure AD può avvenire attraverso una finestra popup.</span><span class="sxs-lookup"><span data-stu-id="96cae-115">Interactive MFA with Azure AD can result in a pop-up dialog box for validation.</span></span>

<span data-ttu-id="96cae-116">Per una descrizione di Multi-Factor Authentication (autenticazione a più fattori), consultare [Multi-Factor Authentication](../multi-factor-authentication/multi-factor-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="96cae-116">For a description of Multi-Factor Authentication, see [Multi-Factor Authentication](../multi-factor-authentication/multi-factor-authentication.md).</span></span>
<span data-ttu-id="96cae-117">Per la procedura di configurazione, vedere [Configurare Multi-Factor Authentication con database SQL di Azure per SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span><span class="sxs-lookup"><span data-stu-id="96cae-117">For configuration steps, see [Configure Azure SQL Database multi-factor authentication for SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span></span>

### <a name="azure-ad-domain-name-or-tenant-id-parameter"></a><span data-ttu-id="96cae-118">Parametro nome di dominio o ID tenant di Azure AD</span><span class="sxs-lookup"><span data-stu-id="96cae-118">Azure AD domain name or tenant ID parameter</span></span>   

<span data-ttu-id="96cae-119">A partire dalla [versione 17 di SSMS](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms), gli utenti che vengono importati come utenti guest nell'istanza corrente di Active Directory da altre istanze di Azure Active Directory possono specificare il nome di dominio o l'ID tenant di Azure AD al momento della connessione.</span><span class="sxs-lookup"><span data-stu-id="96cae-119">Beginning with [SSMS version 17](https://docs.microsoft.com/sql/ssms/download-sql-server-management-studio-ssms), users that are imported into the current Active Directory from other Azure Active Directories as guest users, can provide the Azure AD domain name, or tenant ID when they connect.</span></span> <span data-ttu-id="96cae-120">Gli utenti guest includono quelli invitati da altre istanze di Azure AD, gli account Microsoft, ad esempio outlook.com, hotmail.com, live.com, o altri account come gmail.com. Queste informazioni consentono all'**autenticazione universale di Active Directory con MFA** di identificare l'autorità di autenticazione corretta.</span><span class="sxs-lookup"><span data-stu-id="96cae-120">Guest users include users invited from other Azure ADs, Microsoft accounts such as outlook.com, hotmail.com, live.com, or other accounts like gmail.com. This information, allows **Active Directory Universal with MFA Authentication** to identify the correct authenticating authority.</span></span> <span data-ttu-id="96cae-121">Questa opzione è necessaria anche per supportare gli account Microsoft (MSA), ad esempio outlook.com, hotmail.com e live.com, o altri account non MSA.</span><span class="sxs-lookup"><span data-stu-id="96cae-121">This option is also required to support Microsoft accounts (MSA) such as outlook.com, hotmail.com, live.com, or non-MSA accounts.</span></span> <span data-ttu-id="96cae-122">Tutti gli utenti che desiderano essere autenticati usando l'autenticazione universale devono immettere il nome di dominio o l'ID tenant di AD Azure.</span><span class="sxs-lookup"><span data-stu-id="96cae-122">All these users who want to be authenticated using Universal Authentication must enter their Azure AD domain name or tenant ID.</span></span> <span data-ttu-id="96cae-123">Questo parametro rappresenta il nome di dominio/ID tenant di Azure AD a cui è collegato il server di Azure.</span><span class="sxs-lookup"><span data-stu-id="96cae-123">This parameter represents the current Azure AD domain name/tenant ID the Azure Server is linked with.</span></span> <span data-ttu-id="96cae-124">Se ad esempio il server di Azure è associato al dominio di Azure AD `contosotest.onmicrosoft.com` in cui l'utente `joe@contosodev.onmicrosoft.com` è ospitato come utente importato dal dominio di Azure AD `contosodev.onmicrosoft.com`, il nome del dominio richiesto per l'autenticazione di questo utente è `contosotest.onmicrosoft.com`.</span><span class="sxs-lookup"><span data-stu-id="96cae-124">For example, if Azure Server is associated with Azure AD domain `contosotest.onmicrosoft.com` where user `joe@contosodev.onmicrosoft.com` is hosted as an imported user from Azure AD domain `contosodev.onmicrosoft.com`, the domain name required to authenticate this user is `contosotest.onmicrosoft.com`.</span></span> <span data-ttu-id="96cae-125">Se l'utente è un utente nativo di Azure AD collegato al server di Azure e non è un account MSA, non è necessario usare l'ID tenant o il nome di dominio.</span><span class="sxs-lookup"><span data-stu-id="96cae-125">When the user is a native user of the Azure AD linked to Azure Server, and is not an MSA account, no domain name or tenant ID is required.</span></span> <span data-ttu-id="96cae-126">Per specificare il parametro (a partire dalla versione 17.2 di SSMS), nella finestra di dialogo **Connetti al database** selezionare l'autenticazione **Active Directory - Universale con supporto MFA**, fare clic su **Opzioni**, immettere un nome nella casella **Nome utente** e quindi fare clic sulla scheda **Proprietà connessione**. Selezionare la casella **ID tenant o nome di dominio AD** e specificare l'autorità di autenticazione, ad esempio il nome di dominio (**contosotest.onmicrosoft.com**) o il GUID dell'ID tenant.</span><span class="sxs-lookup"><span data-stu-id="96cae-126">To enter the parameter (beginning with SSMS version 17.2), in the **Connect to Database** dialog box, complete the dialog box, selecting **Active Directory - Universal with MFA** authentication, click **Options**, complete the **User name** box, and then click the **Connection Properties** tab. Check the **AD domain name or tenant ID** box, and provide authenticating authority, such as the domain name (**contosotest.onmicrosoft.com**) or the GUID of the tenant ID.</span></span>  
   <span data-ttu-id="96cae-127">![mfa-tenant-ssms](./media/sql-database-ssms-mfa-auth/mfa-tenant-ssms.png)</span><span class="sxs-lookup"><span data-stu-id="96cae-127">![mfa-tenant-ssms](./media/sql-database-ssms-mfa-auth/mfa-tenant-ssms.png)</span></span>   

### <a name="azure-ad-business-to-business-support"></a><span data-ttu-id="96cae-128">Supporto per Azure AD business-to-business</span><span class="sxs-lookup"><span data-stu-id="96cae-128">Azure AD business to business support</span></span>   
<span data-ttu-id="96cae-129">Gli utenti di Azure AD supportati come guest per gli scenari di Azure AD B2B (vedere [Informazioni su Collaborazione B2B di Azure AD](../active-directory/active-directory-b2b-what-is-azure-ad-b2b.md)) possono connettersi al database SQL e a SQL Data Warehouse solo come membri di un gruppo creato nell'istanza corrente di Azure AD e mappato manualmente tramite l'istruzione Transact-SQL `CREATE USER` in un determinato database.</span><span class="sxs-lookup"><span data-stu-id="96cae-129">Azure AD users supported for Azure AD B2B scenarios as guest users (see [What is Azure B2B collaboration](../active-directory/active-directory-b2b-what-is-azure-ad-b2b.md)) can connect to SQL Database and SQL Data Warehouse only as part of members of a group created in current Azure AD and mapped manually using the Transact-SQL `CREATE USER` statement in a given database.</span></span> <span data-ttu-id="96cae-130">Se ad esempio `steve@gmail.com` viene invitato in `contosotest` di Azure AD (con dominio di Azure AD `contosotest.onmicrosoft.com`), è necessario creare un gruppo, ad esempio `usergroup`, nell'istanza di Azure AD che contiene il membro `steve@gmail.com`.</span><span class="sxs-lookup"><span data-stu-id="96cae-130">For example, if `steve@gmail.com` is invited to Azure AD `contosotest` (with the Azure Ad domain `contosotest.onmicrosoft.com`), an Azure AD group, such as `usergroup` must be created in the Azure AD that contains the `steve@gmail.com` member.</span></span> <span data-ttu-id="96cae-131">Questo gruppo deve quindi essere creato per un database specifico, ad esempio MyDatabase, dall'amministratore del database SQL o dal DBO di Azure AD tramite un'istruzione Transact-SQL `CREATE USER [usergroup] FROM EXTERNAL PROVIDER`.</span><span class="sxs-lookup"><span data-stu-id="96cae-131">Then, this group must be created for a specific  database (i.e. MyDatabase) by Azure AD SQL admin or Azure AD DBO  by executing a Transact-SQL `CREATE USER [usergroup] FROM EXTERNAL PROVIDER` statement.</span></span> <span data-ttu-id="96cae-132">Dopo che l'utente del database è stato creato, `steve@gmail.com` può accedere a `MyDatabase` usando l'opzione di autenticazione `Active Directory – Universal with MFA support` di SSMS.</span><span class="sxs-lookup"><span data-stu-id="96cae-132">After the database user is created, then the user `steve@gmail.com` can login to `MyDatabase` using the SSMS authentication option `Active Directory – Universal with MFA support`.</span></span> <span data-ttu-id="96cae-133">Per impostazione predefinita, al gruppo di utenti è concessa solo l'autorizzazione di connessione. Per qualsiasi altro tipo di accesso ai dati l'autorizzazione deve essere concessa secondo la normale procedura.</span><span class="sxs-lookup"><span data-stu-id="96cae-133">The usergroup, by default, has only the connect permission and any further data access that will need to be granted in the normal way.</span></span> <span data-ttu-id="96cae-134">Si noti che `steve@gmail.com`, in qualità di utente guest, deve selezionare la casella e aggiungere il nome di dominio AD `contosotest.onmicrosoft.com` nella finestra di dialogo **Proprietà connessione** di SSMS.</span><span class="sxs-lookup"><span data-stu-id="96cae-134">Please note that user `steve@gmail.com` as a guest user must check the box and add the AD domain name `contosotest.onmicrosoft.com` in the SSMS **Connection Property** dialog box.</span></span> <span data-ttu-id="96cae-135">L'opzione **ID tenant o nome di dominio AD** è supportata solo per le opzioni di connessione Universale con supporto MFA. Negli altri casi non è disponibile.</span><span class="sxs-lookup"><span data-stu-id="96cae-135">The **AD domain name or tenant ID** option is only supported for the Universal with MFA connection options, otherwise it is greyed out.</span></span>

## <a name="universal-authentication-limitations-for-sql-database-and-sql-data-warehouse"></a><span data-ttu-id="96cae-136">Limitazioni dell'autenticazione universale per il database SQL e SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="96cae-136">Universal Authentication limitations for SQL Database and SQL Data Warehouse</span></span>
* <span data-ttu-id="96cae-137">SSMS e SqlPackage.exe sono gli unici strumenti attualmente abilitati per MFA tramite l'autenticazione universale di Active Directory.</span><span class="sxs-lookup"><span data-stu-id="96cae-137">SSMS and SqlPackage.exe are the only tools currently enabled for MFA through Active Directory Universal Authentication.</span></span>
* <span data-ttu-id="96cae-138">La versione 17.2 di SSMS supporta l'accesso simultaneo di più utenti tramite l'autenticazione universale con supporto MFA.</span><span class="sxs-lookup"><span data-stu-id="96cae-138">SSMS version 17.2, supports multi-user concurrent access using Universal Authentication with MFA.</span></span> <span data-ttu-id="96cae-139">Nelle versioni 17.0 e 17.1 un solo account di Azure Active Directory può accedere a un'istanza di SSMS mediante l'autenticazione universale.</span><span class="sxs-lookup"><span data-stu-id="96cae-139">Version 17.0 and 17.1, restricted a log in for an instance of SSMS using Universal Authentication to a single Azure Active Directory account.</span></span> <span data-ttu-id="96cae-140">Per accedere come un altro account di Azure AD, è necessario utilizzare un'altra istanza di SSMS.</span><span class="sxs-lookup"><span data-stu-id="96cae-140">To log in as another Azure AD account, you must use another instance of SSMS.</span></span> <span data-ttu-id="96cae-141">Questa restrizione è limitata all'autenticazione universale di Active Directory; è possibile accedere a server differenti tramite l'autenticazione con password di Active Directory, l'autenticazione integrata di Active Directory o autenticazione SQL Server.</span><span class="sxs-lookup"><span data-stu-id="96cae-141">(This restriction is limited to Active Directory Universal Authentication; you can log in to different servers using Active Directory Password Authentication, Active Directory Integrated Authentication, or SQL Server Authentication).</span></span>
* <span data-ttu-id="96cae-142">SSMS supporta l'autenticazione universale di Active Directory per la visualizzazione di Esplora oggetti, Editor di query e Archivio query.</span><span class="sxs-lookup"><span data-stu-id="96cae-142">SSMS supports Active Directory Universal Authentication for Object Explorer, Query Editor, and Query Store visualization.</span></span>
* <span data-ttu-id="96cae-143">La versione 17.2 di SSMS fornisce il supporto di DacFx Wizard per le funzioni di esportazione, estrazione e distribuzione dei dati del database.</span><span class="sxs-lookup"><span data-stu-id="96cae-143">SSMS version 17.2 provides DacFx Wizard support for Export/Extract/Deploy Data database.</span></span> <span data-ttu-id="96cae-144">Quando un utente ha eseguito l'autenticazione mediante la finestra di dialogo iniziale usando l'autenticazione universale, DacFx Wizard funziona esattamente come per tutti gli altri metodi di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="96cae-144">Once a specific user is authenticated through the initial authentication dialog using Universal Authentication, the DacFx Wizard functions the same way it does for all other authentication methods.</span></span>
* <span data-ttu-id="96cae-145">Progettazione tabelle di SSMS non supporta l'autenticazione universale.</span><span class="sxs-lookup"><span data-stu-id="96cae-145">The SSMS Table Designer does not support Universal Authentication.</span></span>
* <span data-ttu-id="96cae-146">Non ci sono requisiti software aggiuntivi per l'autenticazione universale di Active Directory ad eccezione del fatto che si utilizzi una versione supportata di SSMS.</span><span class="sxs-lookup"><span data-stu-id="96cae-146">There are no additional software requirements for Active Directory Universal Authentication except that you must use a supported version of SSMS.</span></span>  
* <span data-ttu-id="96cae-147">La versione di Active Directory Authentication Library (ADAL) per l'autenticazione universale è stata aggiornata alla versione rilasciata disponibile più recente, ovvero ADAL.dll 3.13.9.</span><span class="sxs-lookup"><span data-stu-id="96cae-147">The Active Directory Authentication Library (ADAL) version for Universal authentication was updated to its latest ADAL.dll 3.13.9 available released version.</span></span> <span data-ttu-id="96cae-148">Vedere [Active Directory Authentication Library 3.14.1](http://www.nuget.org/packages/Microsoft.IdentityModel.Clients.ActiveDirectory/).</span><span class="sxs-lookup"><span data-stu-id="96cae-148">See [Active Directory Authentication Library 3.14.1](http://www.nuget.org/packages/Microsoft.IdentityModel.Clients.ActiveDirectory/).</span></span>


## <a name="next-steps"></a><span data-ttu-id="96cae-149">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="96cae-149">Next steps</span></span>

- <span data-ttu-id="96cae-150">Per la procedura di configurazione, vedere [Configurare Multi-Factor Authentication con database SQL di Azure per SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span><span class="sxs-lookup"><span data-stu-id="96cae-150">For configuration steps, see [Configure Azure SQL Database multi-factor authentication for SQL Server Management Studio](sql-database-ssms-mfa-authentication-configure.md).</span></span>
- <span data-ttu-id="96cae-151">Concedere ad altri utenti l'accesso al database: [Autenticazione e autorizzazione per il database SQL: concessione dell'accesso](sql-database-manage-logins.md)</span><span class="sxs-lookup"><span data-stu-id="96cae-151">Grant others access to your database: [SQL Database Authentication and Authorization: Granting Access](sql-database-manage-logins.md)</span></span>  
- <span data-ttu-id="96cae-152">Verificare che altri utenti possano connettersi tramite il firewall: [Configurare una regola firewall a livello di server per il database SQL di Azure tramite il portale di Azure](sql-database-configure-firewall-settings.md)</span><span class="sxs-lookup"><span data-stu-id="96cae-152">Make sure others can connect through the firewall: [Configure an Azure SQL Database server-level firewall rule using the Azure portal](sql-database-configure-firewall-settings.md)</span></span>  
- [<span data-ttu-id="96cae-153">Configurare e gestire l'autenticazione di Azure Active Directory con il database SQL oppure con SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="96cae-153">Configure and manage Azure Active Directory authentication with SQL Database or SQL Data Warehouse</span></span>](sql-database-aad-authentication-configure.md)  
- [<span data-ttu-id="96cae-154">Microsoft SQL Server Data-Tier Application Framework (17.0.0 GA)</span><span class="sxs-lookup"><span data-stu-id="96cae-154">Microsoft SQL Server Data-Tier Application Framework (17.0.0 GA)</span></span>](https://www.microsoft.com/download/details.aspx?id=55088)  
- [<span data-ttu-id="96cae-155">SQLPackage.exe</span><span class="sxs-lookup"><span data-stu-id="96cae-155">SQLPackage.exe</span></span>](https://msdn.microsoft.com/library/hh550080.aspx)  
- [<span data-ttu-id="96cae-156">Importare un file BACPAC in un nuovo database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="96cae-156">Import a BACPAC file to a new Azure SQL Database</span></span>](../sql-database/sql-database-import.md)  
- [<span data-ttu-id="96cae-157">Esportare un database SQL di Azure in un file BACPAC</span><span class="sxs-lookup"><span data-stu-id="96cae-157">Export an Azure SQL database to a BACPAC file</span></span>](../sql-database/sql-database-export.md)  
- <span data-ttu-id="96cae-158">Interfaccia C# [IUniversalAuthProvider](https://msdn.microsoft.com/library/microsoft.sqlserver.dac.iuniversalauthprovider.aspx)</span><span class="sxs-lookup"><span data-stu-id="96cae-158">C# interface [IUniversalAuthProvider Interface](https://msdn.microsoft.com/library/microsoft.sqlserver.dac.iuniversalauthprovider.aspx)</span></span>  
