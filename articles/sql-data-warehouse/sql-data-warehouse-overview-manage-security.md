---
title: Proteggere un database in SQL Data Warehouse | Documentazione Microsoft
description: Suggerimenti per proteggere un database in Azure SQL Data Warehouse per lo sviluppo di soluzioni.
services: sql-data-warehouse
documentationcenter: NA
author: ronortloff
manager: jhubbard
editor: 
ms.assetid: 8fa2f5ca-4cf5-4418-99a2-4dc745799850
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: security
ms.date: 10/31/2016
ms.author: rortloff;barbkess
ms.openlocfilehash: 6ea45c40bc428282faf24b4a08f8b0d345adb3fd
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="secure-a-database-in-sql-data-warehouse"></a><span data-ttu-id="b5e8b-103">Proteggere un database in SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="b5e8b-103">Secure a database in SQL Data Warehouse</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="b5e8b-104">Proteggere un database in SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="b5e8b-104">Security Overview</span></span>](sql-data-warehouse-overview-manage-security.md)
> * [<span data-ttu-id="b5e8b-105">Autenticazione</span><span class="sxs-lookup"><span data-stu-id="b5e8b-105">Authentication</span></span>](sql-data-warehouse-authentication.md)
> * [<span data-ttu-id="b5e8b-106">Introduzione a Transparent Data Encryption (TDE) di SQL Data Warehouse</span><span class="sxs-lookup"><span data-stu-id="b5e8b-106">Encryption (Portal)</span></span>](sql-data-warehouse-encryption-tde.md)
> * [<span data-ttu-id="b5e8b-107">Introduzione a Transparent Data Encryption (TDE)</span><span class="sxs-lookup"><span data-stu-id="b5e8b-107">Encryption (T-SQL)</span></span>](sql-data-warehouse-encryption-tde-tsql.md)
> 
> 

<span data-ttu-id="b5e8b-108">Questo articolo illustra i concetti di base relativi alla protezione del proprio database di Azure SQL Data Warehouse.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-108">This article walks through the basics of securing your Azure SQL Data Warehouse database.</span></span> <span data-ttu-id="b5e8b-109">In particolare l'articolo spiega come iniziare a usare le risorse per limitare l'accesso, proteggere i dati e monitorare le attività in un database.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-109">In particular, this article will get you started with resources for limiting access, protecting data, and monitoring activities on a database.</span></span>

## <a name="connection-security"></a><span data-ttu-id="b5e8b-110">Sicurezza delle connessioni</span><span class="sxs-lookup"><span data-stu-id="b5e8b-110">Connection security</span></span>
<span data-ttu-id="b5e8b-111">La sicurezza delle connessioni fa riferimento al modo che si limitano e proteggono le connessioni al database mediante regole del firewall e crittografia di connessione.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-111">Connection Security refers to how you restrict and secure connections to your database using firewall rules and connection encryption.</span></span>

<span data-ttu-id="b5e8b-112">Le regole del firewall vengono usate dal server e dal database per rifiutare i tentativi di connessione da indirizzi IP che non sono stati esplicitamente inclusi nell'elenco di IP consentiti.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-112">Firewall rules are used by both the server and the database to reject connection attempts from IP addresses that have not been explicitly whitelisted.</span></span> <span data-ttu-id="b5e8b-113">Prima di consentire le connessioni dall'applicazione o dall'indirizzo IP pubblico del computer client è necessario creare una regola firewall di livello server tramite il portale di Azure, l'API REST o PowerShell.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-113">To allow connections from your application or client machine's public IP address, you must first create a server-level firewall rule using the Azure Portal, REST API, or PowerShell.</span></span> <span data-ttu-id="b5e8b-114">Come procedura consigliata, si suggerisce di limitare gli intervalli di indirizzi IP consentiti attraverso il firewall del server quanto più possibile.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-114">As a best practice, you should restrict the IP address ranges allowed through your server firewall as much as possible.</span></span>  <span data-ttu-id="b5e8b-115">Per accedere ad Azure SQL Data Warehouse dal computer locale, verificare che il firewall in rete e nel computer locale consenta le comunicazioni in uscita sulla porta TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-115">To access Azure SQL Data Warehouse from your local computer, ensure the firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>  <span data-ttu-id="b5e8b-116">Per altre informazioni, vedere il [firewall per il database SQL di Azure][Azure SQL Database firewall], [sp_set_firewall_rule][sp_set_firewall_rule] e [sp_set_database_firewall_rule][sp_set_database_firewall_rule].</span><span class="sxs-lookup"><span data-stu-id="b5e8b-116">For more information, see [Azure SQL Database firewall][Azure SQL Database firewall], [sp_set_firewall_rule][sp_set_firewall_rule], and [sp_set_database_firewall_rule][sp_set_database_firewall_rule].</span></span>

<span data-ttu-id="b5e8b-117">Le connessioni a SQL Data Warehouse vengono crittografate per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-117">Connections to your SQL Data Warehouse are encrypted by default.</span></span>  <span data-ttu-id="b5e8b-118">La modifica delle impostazioni di connessione per disabilitare la crittografia viene ignorata.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-118">Modifying connection settings to disable encryption are ignored.</span></span>

## <a name="authentication"></a><span data-ttu-id="b5e8b-119">Autenticazione</span><span class="sxs-lookup"><span data-stu-id="b5e8b-119">Authentication</span></span>
<span data-ttu-id="b5e8b-120">Per autenticazione si intende il modo in cui viene dimostrata la propria identità durante la connessione al database.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-120">Authentication refers to how you prove your identity when connecting to the database.</span></span> <span data-ttu-id="b5e8b-121">SQL Data Warehouse attualmente supporta l'autenticazione di SQL Server con un nome utente e una password, nonché con Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-121">SQL Data Warehouse currently supports SQL Server Authentication with a username and password as well as a Azure Active Directory.</span></span> 

<span data-ttu-id="b5e8b-122">Durante la creazione del server logico per il database, è stato specificato un account di accesso "amministratore del server" con un nome utente e una password.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-122">When you created the logical server for your database, you specified a "server admin" login with a username and password.</span></span> <span data-ttu-id="b5e8b-123">Con queste credenziali è possibile eseguire l'autenticazione in qualsiasi database di tale server come proprietario del database, o "dbo", tramite l'autenticazione di SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-123">Using these credentials, you can authenticate to any database on that server as the database owner, or "dbo" through SQL Server Authentication.</span></span>

<span data-ttu-id="b5e8b-124">Tuttavia, come procedura consigliata, è opportuno che gli utenti dell'organizzazione usino un account diverso per l'autenticazione.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-124">However, as a best practice, your organization’s users should use a different account to authenticate.</span></span> <span data-ttu-id="b5e8b-125">Questo modo può possibile limitare le autorizzazioni concesse all'applicazione e ridurre i rischi di attività dannose nel caso in cui il codice dell'applicazione sia vulnerabile a un attacco SQL injection.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-125">This way you can limit the permissions granted to the application and reduce the risks of malicious activity in case your application code is vulnerable to a SQL injection attack.</span></span> 

<span data-ttu-id="b5e8b-126">Per creare un utente autenticato in SQL Server, connettersi al database **master** nel proprio server con l'account di accesso amministratore e creare un nuovo accesso al server.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-126">To create a SQL Server Authenticated user, connect to the **master** database on your server with your server admin login and create a new server login.</span></span>  <span data-ttu-id="b5e8b-127">Inoltre, è consigliabile creare un utente nel database master per gli utenti di SQL Data Warehouse di Azure.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-127">Additionally, it is a good idea to create a user in the master database for Azure SQL Data Warehouse users.</span></span> <span data-ttu-id="b5e8b-128">La creazione di un utente nel database master consente all'utente di accedere tramite strumenti come SSMS senza specificare un nome di database.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-128">Creating a user in master allows a user to login using tools like SSMS without specifying a database name.</span></span>  <span data-ttu-id="b5e8b-129">Consente inoltre di usare Esplora oggetti per visualizzare tutti i database in SQL server.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-129">It also allows them to use the object explorer to view all databases on a SQL server.</span></span>

```sql
-- Connect to master database and create a login
CREATE LOGIN ApplicationLogin WITH PASSWORD = 'Str0ng_password';
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

<span data-ttu-id="b5e8b-130">Quindi connettersi al **database di SQL Data Warehouse** con l'account di accesso amministratore server e creare un utente di database basato sull'account di accesso al server appena creato.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-130">Then, connect to your **SQL Data Warehouse database** with your server admin login and create a database user based on the server login you just created.</span></span>

```sql
-- Connect to SQL DW database and create a database user
CREATE USER ApplicationUser FOR LOGIN ApplicationLogin;
```

<span data-ttu-id="b5e8b-131">Se un utente esegue altre operazioni, ad esempio crea accessi o nuovi database, avrà anche bisogno dell'assegnazione dei ruoli `Loginmanager` e `dbmanager` nel database master.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-131">If a user will be doing additional operations such as creating logins or creating new databases, they will also need to be assigned to the `Loginmanager` and `dbmanager` roles in the master database.</span></span> <span data-ttu-id="b5e8b-132">Per altre informazioni sui questi ruoli aggiuntivi e sull'autenticazione a un database SQL, vedere [Gestione di database e account di accesso in database SQL di Azure][Managing databases and logins in Azure SQL Database].</span><span class="sxs-lookup"><span data-stu-id="b5e8b-132">For more information on these additonal roles and authenticating to a SQL Database, see [Managing databases and logins in Azure SQL Database][Managing databases and logins in Azure SQL Database].</span></span>  <span data-ttu-id="b5e8b-133">Per altre informazioni su Azure AD per SQL Data Warehouse, vedere [Connessione a SQL Data Warehouse con l'autenticazione di Azure Active Directory][Connecting to SQL Data Warehouse By Using Azure Active Directory Authentication].</span><span class="sxs-lookup"><span data-stu-id="b5e8b-133">For more details on Azure AD for SQL Data Warehouse, see [Connecting to SQL Data Warehouse By Using Azure Active Directory Authentication][Connecting to SQL Data Warehouse By Using Azure Active Directory Authentication].</span></span>

## <a name="authorization"></a><span data-ttu-id="b5e8b-134">Authorization</span><span class="sxs-lookup"><span data-stu-id="b5e8b-134">Authorization</span></span>
<span data-ttu-id="b5e8b-135">Per autorizzazione si intendono le operazioni che è possibile effettuare all'interno di un database di Azure SQL Data Warehouse e questa funzionalità viene controllata mediante le autorizzazioni e le appartenenze ai ruoli dell'account utente.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-135">Authorization refers to what you can do within an Azure SQL Data Warehouse database, and this is controlled by your user account's role memberships and permissions.</span></span> <span data-ttu-id="b5e8b-136">Come procedura consigliata, è opportuno concedere agli utenti i privilegi minimi necessari.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-136">As a best practice, you should grant users the least privileges necessary.</span></span> <span data-ttu-id="b5e8b-137">Azure SQL Data Warehouse ne semplifica la gestione con i ruoli in T-SQL:</span><span class="sxs-lookup"><span data-stu-id="b5e8b-137">Azure SQL Data Warehouse makes this easy to manage with roles in T-SQL:</span></span>

```sql
EXEC sp_addrolemember 'db_datareader', 'ApplicationUser'; -- allows ApplicationUser to read data
EXEC sp_addrolemember 'db_datawriter', 'ApplicationUser'; -- allows ApplicationUser to write data
```

<span data-ttu-id="b5e8b-138">L'account di amministrazione del server a cui ci si sta connettendo è un membro del ruolo db_owner, che è autorizzato a eseguire qualsiasi operazione all'interno del database.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-138">The server admin account you are connecting with is a member of db_owner, which has authority to do anything within the database.</span></span> <span data-ttu-id="b5e8b-139">Salvare questo account per la distribuzione degli aggiornamenti allo schema e altre operazioni di gestione.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-139">Save this account for deploying schema upgrades and other management operations.</span></span> <span data-ttu-id="b5e8b-140">Utilizzare l'account "ApplicationUser" con autorizzazioni più limitate per la connessione dall'applicazione al database con i privilegi minimi richiesti dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-140">Use the "ApplicationUser" account with more limited permissions to connect from your application to the database with the least privileges needed by your application.</span></span>

<span data-ttu-id="b5e8b-141">Esistono modi per limitare ulteriormente le operazioni possibili con il database SQL di Azure:</span><span class="sxs-lookup"><span data-stu-id="b5e8b-141">There are ways to further limit what a user can do with Azure SQL Database:</span></span>

* <span data-ttu-id="b5e8b-142">Le [autorizzazioni][Permissions] granulari consentono di controllare le operazioni possibili per le singole colonne, tabelle, viste, procedure e altri oggetti nel database.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-142">Granular [Permissions][Permissions] let you control which operations you can do on individual columns, tables, views, procedures, and other objects in the database.</span></span> <span data-ttu-id="b5e8b-143">Usare le autorizzazioni granulari per avere il massimo controllo e concedere solo le autorizzazioni necessarie.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-143">Use granular permissions to have the most control and grant the minimum permissions necessary.</span></span> <span data-ttu-id="b5e8b-144">Il sistema di autorizzazioni granulari è complesso; per usarlo in modo efficace è necessario un certo grado di preparazione.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-144">The granular permission system is somewhat complicated and will require some study to use effectively.</span></span>
* <span data-ttu-id="b5e8b-145">È possibile usare [ruoli del database][Database roles] diversi da db_datareader e db_datawriter per creare account utente dell'applicazione più potenti o account di gestione meno potenti.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-145">[Database roles][Database roles] other than db_datareader and db_datawriter can be used to create more powerful application user accounts or less powerful management accounts.</span></span> <span data-ttu-id="b5e8b-146">I ruoli del database predefiniti incorporati sono una soluzione semplice per la concessione di autorizzazioni, ma possono concedere più autorizzazioni di quelle necessarie.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-146">The built-in fixed database roles provide an easy way to grant permissions, but can result in granting more permissions than are necessary.</span></span>
* <span data-ttu-id="b5e8b-147">È possibile usare [stored procedure][Stored procedures] per limitare le operazioni che possono essere eseguite nel database.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-147">[Stored procedures][Stored procedures] can be used to limit the actions that can be taken on the database.</span></span>

<span data-ttu-id="b5e8b-148">La gestione di database e server logici dal portale di Azure classico o mediante l'API di gestione risorse di Azure viene controllata dalle assegnazioni di ruolo dell'account utente del portale.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-148">Managing databases and logical servers from the Azure Classic Portal or using the Azure Resource Manager API is controlled by your portal user account's role assignments.</span></span> <span data-ttu-id="b5e8b-149">Per altre informazioni su questo argomento, vedere [Controllo degli accessi in base al ruolo nel portale di Azure][Role-based access control in Azure Portal].</span><span class="sxs-lookup"><span data-stu-id="b5e8b-149">For more information on this topic, see [Role-based access control in Azure Portal][Role-based access control in Azure Portal].</span></span>

## <a name="encryption"></a><span data-ttu-id="b5e8b-150">Crittografia</span><span class="sxs-lookup"><span data-stu-id="b5e8b-150">Encryption</span></span>
<span data-ttu-id="b5e8b-151">La funzionalità Transparent Data Encryption (TDE) di Azure SQL Data Warehouse consente di proteggersi da attività dannose eseguendo in tempo reale la crittografia e la decrittografia dei dati inattivi.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-151">Azure SQL Data Warehouse Transparent Data Encryption (TDE) helps protect against the threat of malicious activity by performing real-time encryption and decryption of your data at rest.</span></span>  <span data-ttu-id="b5e8b-152">Quando si crittografa il database, i file di log delle transazioni e i backup associati vengono crittografati senza bisogno di apportare modifiche alle applicazioni.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-152">When you encrypt your database, associated backups and transaction log files are encrypted without requiring any changes to your applications.</span></span> <span data-ttu-id="b5e8b-153">TDE esegue la crittografia dell'archiviazione di un intero database usando una chiave simmetrica detta "chiave di crittografia del database".</span><span class="sxs-lookup"><span data-stu-id="b5e8b-153">TDE encrypts the storage of an entire database by using a symmetric key called the database encryption key.</span></span> <span data-ttu-id="b5e8b-154">Nel database SQL la chiave di crittografia del database è protetta da un certificato server incorporato.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-154">In SQL Database the database encryption key is protected by a built-in server certificate.</span></span> <span data-ttu-id="b5e8b-155">Il certificato server incorporato è univoco per ogni server di database SQL.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-155">The built-in server certificate is unique for each SQL Database server.</span></span> <span data-ttu-id="b5e8b-156">Microsoft ruota automaticamente questi certificati almeno ogni 90 giorni.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-156">Microsoft automatically rotates these certificates at least every 90 days.</span></span> <span data-ttu-id="b5e8b-157">L’algoritmo di crittografia utilizzato da SQL Data Warehouse è AES-256.</span><span class="sxs-lookup"><span data-stu-id="b5e8b-157">The encryption algorithm used by SQL Data Warehouse is AES-256.</span></span> <span data-ttu-id="b5e8b-158">Per una descrizione generale della funzionalità TDE, vedere [Transparent Data Encryption][Transparent Data Encryption].</span><span class="sxs-lookup"><span data-stu-id="b5e8b-158">For a general description of TDE, see [Transparent Data Encryption][Transparent Data Encryption].</span></span>

<span data-ttu-id="b5e8b-159">È possibile crittografare il database usando il [portale di Azure][Encryption with Portal] o [T-SQL][Encryption with TSQL].</span><span class="sxs-lookup"><span data-stu-id="b5e8b-159">You can encrypt your database using the [Azure Portal][Encryption with Portal] or [T-SQL][Encryption with TSQL].</span></span>

## <a name="next-steps"></a><span data-ttu-id="b5e8b-160">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="b5e8b-160">Next steps</span></span>
<span data-ttu-id="b5e8b-161">Per informazioni dettagliate ed esempi di connessione a SQL Data Warehouse con protocolli diversi, vedere [Connettersi ad Azure SQL Data Warehouse][Connect to SQL Data Warehouse].</span><span class="sxs-lookup"><span data-stu-id="b5e8b-161">For details and examples on connecting to your SQL Data Warehouse with different protocols, see [Connect to SQL Data Warehouse][Connect to SQL Data Warehouse].</span></span>

<!--Image references-->

<!--Article references-->
[Connect to SQL Data Warehouse]: ./sql-data-warehouse-connect-overview.md
[Encryption with Portal]: ./sql-data-warehouse-encryption-tde.md
[Encryption with TSQL]: ./sql-data-warehouse-encryption-tde-tsql.md
[Connecting to SQL Data Warehouse By Using Azure Active Directory Authentication]: ./sql-data-warehouse-authentication.md

<!--MSDN references-->
[Azure SQL Database firewall]: https://msdn.microsoft.com/library/ee621782.aspx
[sp_set_firewall_rule]: https://msdn.microsoft.com/library/dn270017.aspx
[sp_set_database_firewall_rule]: https://msdn.microsoft.com/library/dn270010.aspx
[Database roles]: https://msdn.microsoft.com/library/ms189121.aspx
[Managing databases and logins in Azure SQL Database]: https://msdn.microsoft.com/library/ee336235.aspx
[Permissions]: https://msdn.microsoft.com/library/ms191291.aspx
[Stored procedures]: https://msdn.microsoft.com/library/ms190782.aspx
[Transparent Data Encryption]: https://msdn.microsoft.com/library/bb934049.aspx
[Azure portal]: https://portal.azure.com/

<!--Other Web references-->
[Role-based access control in Azure Portal]: https://azure.microsoft.com/documentation/articles/role-based-access-control-configure
