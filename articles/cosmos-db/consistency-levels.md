---
title: Livelli di coerenza in Azure Cosmos DB | Microsoft Docs
description: "Cosmos DB ha cinque livelli di coerenza per consentire di compensare scompensi di coerenza, disponibilità e latenza finale."
keywords: coerenza finale, azure cosmos db, azure, Microsoft azure
services: cosmos-db
author: mimig1
manager: jhubbard
editor: cgronlun
documentationcenter: 
ms.assetid: 3fe51cfa-a889-4a4a-b320-16bf871fe74c
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a1ebec2285982c70aa9dc49950769fe18e2e2d0d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="456af-104">Livelli di coerenza dei dati ottimizzabili in Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="456af-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="456af-105">Azure Cosmos DB è stato progettato da zero pensando alla distribuzione globale di tutti i modelli di dati.</span><span class="sxs-lookup"><span data-stu-id="456af-105">Azure Cosmos DB is designed from the ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="456af-106">È pensato per offrire garanzie di bassa latenza stimabile, contratto di servizio con disponibilità al 99,99% e più modelli di coerenza ben definiti.</span><span class="sxs-lookup"><span data-stu-id="456af-106">It is designed to offer predictable low latency guarantees, a 99.99% availability SLA, and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="456af-107">Azure Cosmos DB offre attualmente cinque livelli di coerenza: assoluta, decadimento ristretto, sessione, prefisso coerente e finale.</span><span class="sxs-lookup"><span data-stu-id="456af-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> 

<span data-ttu-id="456af-108">Oltre ai modelli di **coerenza assoluta** e **finale** offerti in genere dai database distribuiti, Azure Cosmos DB offre altri tre modelli di coerenza attentamente codificati e operativi e ha convalidato la loro utilità in casi reali.</span><span class="sxs-lookup"><span data-stu-id="456af-108">Besides **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models, and has validated their usefulness against real world use cases.</span></span> <span data-ttu-id="456af-109">Si tratta di livelli coerenza di **decadimento ristretto**, **sessione** e **prefisso coerente**.</span><span class="sxs-lookup"><span data-stu-id="456af-109">These are the **bounded staleness**, **session**, and **consistent prefix** consistency levels.</span></span> <span data-ttu-id="456af-110">Questi cinque livelli di coerenza, collettivamente, consentono di bilanciare in modo informato coerenza, disponibilità e latenza.</span><span class="sxs-lookup"><span data-stu-id="456af-110">Collectively these five consistency levels enable you to make well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="456af-111">Coerenza e database distribuiti</span><span class="sxs-lookup"><span data-stu-id="456af-111">Distributed databases and consistency</span></span>
<span data-ttu-id="456af-112">I database distribuiti a livello commerciale rientrano in due categorie: database che non offrono opzioni di coerenza comprovabili e ben definite e database che offrono due opzioni di programmabilità estreme (coerenza assoluta e coerenza finale).</span><span class="sxs-lookup"><span data-stu-id="456af-112">Commercial distributed databases fall into two categories: databases that do not offer well-defined, provable consistency choices at all, and databases which offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="456af-113">Nel primo caso gli sviluppatori di applicazioni devono preoccuparsi della gestione di aspetti secondari come i protocolli di replica e si trovano a scendere a difficili compromessi tra coerenza, disponibilità, latenza e velocità effettiva.</span><span class="sxs-lookup"><span data-stu-id="456af-113">The former burdens application developers with minutia of their replication protocols and expects them to make difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="456af-114">Il secondo tipo di database, invece, implica una pressione per la scelta di uno dei due estremi.</span><span class="sxs-lookup"><span data-stu-id="456af-114">The latter puts a pressure to choose one of the two extremes.</span></span> <span data-ttu-id="456af-115">Nonostante il grande numero di ricerche e proposte per oltre 50 modelli di coerenza, la community dei database distribuiti non è riuscita a commercializzare livelli di coerenza che vadano oltre la coerenza assoluta e quella finale.</span><span class="sxs-lookup"><span data-stu-id="456af-115">Despite the abundance of research and proposals for more than 50 consistency models, the distributed database community has not been able to commercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="456af-116">Cosmos DB consente agli sviluppatori di scegliere tra cinque modelli di coerenza ben definiti nell'ambito della coerenza: assoluta, decadimento ristretto, [sessione](http://dl.acm.org/citation.cfm?id=383631), prefisso coerente e finale.</span><span class="sxs-lookup"><span data-stu-id="456af-116">Cosmos DB allows developers to choose between five well-defined consistency models along the consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![Azure Cosmos DB offre numerosi modelli di coerenza, ampi e ben definiti, tra cui scegliere](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="456af-118">La tabella seguente illustra le garanzie specifiche fornite da ciascun livello di coerenza.</span><span class="sxs-lookup"><span data-stu-id="456af-118">The following table illustrates the specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="456af-119">**Livelli di coerenza e garanzie**</span><span class="sxs-lookup"><span data-stu-id="456af-119">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="456af-120">Livello di coerenza</span><span class="sxs-lookup"><span data-stu-id="456af-120">Consistency Level</span></span> | <span data-ttu-id="456af-121">Garanzie</span><span class="sxs-lookup"><span data-stu-id="456af-121">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="456af-122">Assoluta</span><span class="sxs-lookup"><span data-stu-id="456af-122">Strong</span></span> | <span data-ttu-id="456af-123">Linearità</span><span class="sxs-lookup"><span data-stu-id="456af-123">Linearizability</span></span> |
| <span data-ttu-id="456af-124">Obsolescenza associata</span><span class="sxs-lookup"><span data-stu-id="456af-124">Bounded Staleness</span></span> | <span data-ttu-id="456af-125">Prefisso coerente.</span><span class="sxs-lookup"><span data-stu-id="456af-125">Consistent Prefix.</span></span> <span data-ttu-id="456af-126">Ritardo delle letture rispetto alle scritture in base a prefissi k o intervallo t</span><span class="sxs-lookup"><span data-stu-id="456af-126">Reads lag behind writes by k prefixes or t interval</span></span> |
| <span data-ttu-id="456af-127">sessione</span><span class="sxs-lookup"><span data-stu-id="456af-127">Session</span></span>   | <span data-ttu-id="456af-128">Prefisso coerente.</span><span class="sxs-lookup"><span data-stu-id="456af-128">Consistent Prefix.</span></span> <span data-ttu-id="456af-129">Letture costanti, scritture costanti, lettura delle proprie scritture, scrittura basata sulle letture</span><span class="sxs-lookup"><span data-stu-id="456af-129">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="456af-130">Prefisso coerente</span><span class="sxs-lookup"><span data-stu-id="456af-130">Consistent Prefix</span></span> | <span data-ttu-id="456af-131">Gli aggiornamenti restituiti sono un prefisso di tutti gli aggiornamenti, senza interruzioni</span><span class="sxs-lookup"><span data-stu-id="456af-131">Updates returned are some prefix of all the updates, with no gaps</span></span> |
| <span data-ttu-id="456af-132">Finale</span><span class="sxs-lookup"><span data-stu-id="456af-132">Eventual</span></span>  | <span data-ttu-id="456af-133">Letture non in ordine</span><span class="sxs-lookup"><span data-stu-id="456af-133">Out of order reads</span></span> |

<span data-ttu-id="456af-134">È possibile configurare il livello di coerenza predefinito per l'account Cosmos DB (e successivamente ignorare l'impostazione del livello di coerenza per una specifica richiesta di lettura).</span><span class="sxs-lookup"><span data-stu-id="456af-134">You can configure the default consistency level on your Cosmos DB account (and later override the consistency on a specific read request).</span></span> <span data-ttu-id="456af-135">Internamente, il livello di coerenza predefinito si applica ai dati all'interno dei set di partizioni che possono estendersi a più aree.</span><span class="sxs-lookup"><span data-stu-id="456af-135">Internally, the default consistency level applies to data within the partition sets which may span regions.</span></span> <span data-ttu-id="456af-136">Circa il 73% dei tenant di Microsoft usa il livello di coerenza sessione e il 20% il livello decadimento ristretto.</span><span class="sxs-lookup"><span data-stu-id="456af-136">About 73% of our tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="456af-137">È stato notato che circa il 3% dei clienti sperimenta i vari livelli di coerenza inizialmente prima di decidere quale sia il livello di coerenza specifico più adatto alla propria applicazione.</span><span class="sxs-lookup"><span data-stu-id="456af-137">We observe that approximately 3% of our customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="456af-138">È stato osservato anche che solo il 2% dei tenant eseguono l'override dei livelli di coerenza per ogni richiesta.</span><span class="sxs-lookup"><span data-stu-id="456af-138">We also observe that only 2% of our tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="456af-139">In Cosmos DB le operazioni di lettura servite con coerenza di sessione, prefisso coerente e finale sono due volte più economici delle operazioni di lettura con coerenza assoluta o decadimento ristretto.</span><span class="sxs-lookup"><span data-stu-id="456af-139">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="456af-140">Il 99,99% dei contratti di servizi di Cosmos DB riguarda complessivamente aziende leader nel settore. Tali contratti includono garanzie di coerenza per quanto riguarda disponibilità, velocità effettiva e latenza.</span><span class="sxs-lookup"><span data-stu-id="456af-140">Cosmos DB has industry leading comprehensive 99.99% SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="456af-141">Viene eseguito un [controllo della linearità](http://dl.acm.org/citation.cfm?id=1806634), che usa continuamente i dati di telemetria del servizio e segnala esplicitamente eventuali violazioni della coerenza.</span><span class="sxs-lookup"><span data-stu-id="456af-141">We employ a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over our service telemetry and openly reports any consistency violations to you.</span></span> <span data-ttu-id="456af-142">Per il decadimento ristretto, vengono controllate e segnalate le eventuali violazioni dei limiti k e t.</span><span class="sxs-lookup"><span data-stu-id="456af-142">For bounded staleness, we monitor and report any violations to k and t bounds.</span></span> <span data-ttu-id="456af-143">Per tutti i cinque livelli di coerenza flessibili, viene segnalata anche la [metrica probabilistica di decadimento ristretto](http://dl.acm.org/citation.cfm?id=2212359) direttamente all'utente.</span><span class="sxs-lookup"><span data-stu-id="456af-143">For all five relaxed consistency levels, we also report the [probabilistic bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly to you.</span></span>  

## <a name="scope-of-consistency"></a><span data-ttu-id="456af-144">Ambito di coerenza</span><span class="sxs-lookup"><span data-stu-id="456af-144">Scope of consistency</span></span>
<span data-ttu-id="456af-145">L'ambito di granularità della coerenza è limitato alla richiesta del singolo utente.</span><span class="sxs-lookup"><span data-stu-id="456af-145">The granularity of consistency is scoped to a single user request.</span></span> <span data-ttu-id="456af-146">Una richiesta di scrittura può corrispondere a un'operazione di inserimento, sostituzione, upsert o eliminazione.</span><span class="sxs-lookup"><span data-stu-id="456af-146">A write request may correspond to an insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="456af-147">Come per le operazioni di scrittura, anche per una transazione di lettura/query l'ambito equivale alla richiesta del singolo utente.</span><span class="sxs-lookup"><span data-stu-id="456af-147">As with writes, a read/query transaction is also scoped to a single user request.</span></span> <span data-ttu-id="456af-148">Potrebbe essere chiesto all'utente di scorrere le pagine di un ampio set di risultati, che occupa varie partizioni, ma ciascuna transazione di lettura ha come ambito una singola pagina ed è servita dall'interno di una singola partizione.</span><span class="sxs-lookup"><span data-stu-id="456af-148">The user may be required to paginate over a large result-set, spanning multiple partitions, but each read transaction is scoped to a single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="456af-149">Livelli di coerenza</span><span class="sxs-lookup"><span data-stu-id="456af-149">Consistency levels</span></span>
<span data-ttu-id="456af-150">È possibile configurare un livello di coerenza predefinito per l'account del database che si applica a tutte le raccolte e in tutti i database nel proprio account di Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="456af-150">You can configure a default consistency level on your database account that applies to all collections (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="456af-151">Per impostazione predefinita, tutte le operazioni di lettura e le query eseguite sulle risorse definite dall'utente useranno il livello di coerenza predefinito che è stato specificato nell'account del database.</span><span class="sxs-lookup"><span data-stu-id="456af-151">By default, all reads and queries issued against the user-defined resources use the default consistency level specified on the database account.</span></span> <span data-ttu-id="456af-152">È possibile ridurre il livello di coerenza di una richiesta di lettura/query specifica usato in ognuna delle API supportate.</span><span class="sxs-lookup"><span data-stu-id="456af-152">You can relax the consistency level of a specific read/query request using in each of the supported APIs.</span></span> <span data-ttu-id="456af-153">Esistono cinque tipi di livelli di coerenza supportati dal protocollo di replica di Azure Cosmos DB che offrono un chiaro compromesso tra garanzie di coerenza specifiche e prestazioni, come descritto in questa sezione.</span><span class="sxs-lookup"><span data-stu-id="456af-153">There are five types of consistency levels supported by the Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<span data-ttu-id="456af-154">**Assoluta**:</span><span class="sxs-lookup"><span data-stu-id="456af-154">**Strong**:</span></span> 

* <span data-ttu-id="456af-155">la coerenza assoluta offre una garanzia di [linearità](https://aphyr.com/posts/313-strong-consistency-models) ovvero la garanzia che le letture restituiscano la versione più recente di un elemento.</span><span class="sxs-lookup"><span data-stu-id="456af-155">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with the reads guaranteed to return the most recent version of an item.</span></span> 
* <span data-ttu-id="456af-156">la coerenza assoluta garantisce che una scrittura sia visibile solo dopo che ne è stato eseguito il commit in modo permanente dal quorum di maggioranza delle repliche.</span><span class="sxs-lookup"><span data-stu-id="456af-156">Strong consistency guarantees that a write is only visible after it is committed durably by the majority quorum of replicas.</span></span> <span data-ttu-id="456af-157">Una scrittura può ottenere o il commit sincrono e permanente da parte della replica primaria e della maggioranza delle repliche secondarie o l'interruzione.</span><span class="sxs-lookup"><span data-stu-id="456af-157">A write is either synchronously committed durably by both the primary and the quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="456af-158">Una lettura viene sempre confermata dalla quorum di maggioranza per le letture: un client non potrà mai vedere una scrittura parziale o di cui non sia stato eseguito il commit e leggerà sempre la più recente scrittura confermata.</span><span class="sxs-lookup"><span data-stu-id="456af-158">A read is always acknowledged by the majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed to read the latest acknowledged write.</span></span> 
* <span data-ttu-id="456af-159">Gli account Azure Cosmos DB configurati per usare la coerenza assoluta non possono associare più di un'area di Azure con il loro account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="456af-159">Azure Cosmos DB accounts that are configured to use strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="456af-160">Il costo di un'operazione di lettura (in termini di [unità richiesta](request-units.md) consumate) con il livello di coerenza assoluta è più alto rispetto ai livelli sessione e finale, ma uguale a quello del livello con obsolescenza associata.</span><span class="sxs-lookup"><span data-stu-id="456af-160">The cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but the same as bounded staleness.</span></span>

<span data-ttu-id="456af-161">**Obsolescenza associata**:</span><span class="sxs-lookup"><span data-stu-id="456af-161">**Bounded staleness**:</span></span> 

* <span data-ttu-id="456af-162">La coerenza con decadimento ristretto garantisce che il ritardo delle letture sulle scritture sia al massimo pari a *K* versioni o prefissi di un elemento o all'intervallo di tempo *t*.</span><span class="sxs-lookup"><span data-stu-id="456af-162">Bounded staleness consistency guarantees that the reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="456af-163">Pertanto, quando si sceglie il decadimento ristretto, il "decadimento" può essere configurato in due modi: numero di versioni *K* dell'elemento del ritardo delle operazioni di lettura sulle operazioni di scrittura e l'intervallo di tempo *t*</span><span class="sxs-lookup"><span data-stu-id="456af-163">Therefore, when choosing bounded staleness, the "staleness" can be configured in two ways: number of versions *K* of the item by which the reads lag behind the writes, and the time interval *t*</span></span> 
* <span data-ttu-id="456af-164">Il decadimento ristretto offre un ordine globale totale tranne all'interno della "finestra di decadimento".</span><span class="sxs-lookup"><span data-stu-id="456af-164">Bounded staleness offers total global order except within the "staleness window."</span></span> <span data-ttu-id="456af-165">La garanzia di lettura monotona esiste in un'area sia all'interno che all'esterno della "finestra di decadimento".</span><span class="sxs-lookup"><span data-stu-id="456af-165">The monotonic read guarantees exists within a region both inside and outside the "staleness window."</span></span> 
* <span data-ttu-id="456af-166">L'obsolescenza associata offre una maggiore garanzia di coerenza rispetto alla coerenza di sessione o finale.</span><span class="sxs-lookup"><span data-stu-id="456af-166">Bounded staleness provides a stronger consistency guarantee than session or eventual consistency.</span></span> <span data-ttu-id="456af-167">Per le applicazioni distribuite a livello globale, è consigliabile usare l'obsolescenza associata per gli scenari in cui si desidera una coerenza assoluta ma si desidera anche il 99,99% di disponibilità e bassa latenza.</span><span class="sxs-lookup"><span data-stu-id="456af-167">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like to have strong consistency but also want 99.99% availability and low latency.</span></span> 
* <span data-ttu-id="456af-168">Gli account Azure Cosmos DB configurati con la coerenza con decadimento ristretto possono associare qualsiasi numero di aree di Azure con il proprio account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="456af-168">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="456af-169">Il costo di un'operazione di lettura (in termini di unità richiesta consumate) con l'obsolescenza associata è più alto rispetto ai livelli sessione e finale, ma uguale a quello del livello assoluto.</span><span class="sxs-lookup"><span data-stu-id="456af-169">The cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but the same as strong consistency.</span></span>

<span data-ttu-id="456af-170">**Sessione**:</span><span class="sxs-lookup"><span data-stu-id="456af-170">**Session**:</span></span> 

* <span data-ttu-id="456af-171">a differenza dei modelli di coerenza globale offerti dai livelli di coerenza assoluta e con obsolescenza associata, la coerenza di "sessione" ha come ambito una sessione del client.</span><span class="sxs-lookup"><span data-stu-id="456af-171">Unlike the global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped to a client session.</span></span> 
* <span data-ttu-id="456af-172">La coerenza di sessione è ideale per tutti gli scenari in cui è coinvolto un dispositivo o una sessione utente poiché garantisce letture monotone, scritture monotone e garanzie di lettura di ciò che si scrive (RYW).</span><span class="sxs-lookup"><span data-stu-id="456af-172">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="456af-173">La coerenza di sessione offre una coerenza prevedibile per una sessione e la massima velocità di scrittura, con latenza minima per scrittura e lettura.</span><span class="sxs-lookup"><span data-stu-id="456af-173">Session consistency provides predictable consistency for a session, and maximum read throughput while offering the lowest latency writes and reads.</span></span> 
* <span data-ttu-id="456af-174">Gli account Azure Cosmos DB configurati con la coerenza sessione possono associare qualsiasi numero di aree di Azure con il proprio account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="456af-174">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="456af-175">Il costo di un'operazione di lettura (in termini di unità richiesta consumate) con il livello di coerenza di sessione è minore rispetto ai livelli assoluto e con obsolescenza associata, ma maggiore rispetto al livello finale</span><span class="sxs-lookup"><span data-stu-id="456af-175">The cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency</span></span>

<span data-ttu-id="456af-176"><a id="consistent-prefix"></a>
**Prefisso coerente**:</span><span class="sxs-lookup"><span data-stu-id="456af-176"><a id="consistent-prefix"></a>
**Consistent Prefix**:</span></span> 

* <span data-ttu-id="456af-177">il prefisso coerente garantisce che, in assenza di altre operazioni di scrittura, alla fine le repliche convergeranno all'interno del gruppo.</span><span class="sxs-lookup"><span data-stu-id="456af-177">Consistent prefix guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="456af-178">Il prefisso coerente garantisce che le operazioni di lettura non vedano mai il fuori sequenza delle operazioni di scrittura.</span><span class="sxs-lookup"><span data-stu-id="456af-178">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="456af-179">Se queste sono state eseguite nell'ordine `A, B, C`, il client vede `A`, `A,B` o `A,B,C`, ma mai il fuori sequenza ad esempio `A,C` o `B,A,C`.</span><span class="sxs-lookup"><span data-stu-id="456af-179">If writes were performed in the order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="456af-180">Gli account Azure Cosmos DB configurati con la coerenza con prefisso coerente possono associare qualsiasi numero di aree di Azure con il proprio account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="456af-180">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<span data-ttu-id="456af-181">**Finale**:</span><span class="sxs-lookup"><span data-stu-id="456af-181">**Eventual**:</span></span> 

* <span data-ttu-id="456af-182">la coerenza finale garantisce che, in assenza di altre scritture, alla fine le repliche all'interno del gruppo convergeranno.</span><span class="sxs-lookup"><span data-stu-id="456af-182">Eventual consistency guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="456af-183">La coerenza finale è la forma più debole di coerenza, in cui un client può ottenere nel tempo valori obsoleti rispetto a quelli già visualizzati in passato.</span><span class="sxs-lookup"><span data-stu-id="456af-183">Eventual consistency is the weakest form of consistency where a client may get the values that are older than the ones it had seen before.</span></span>
* <span data-ttu-id="456af-184">La coerenza finale rappresenta il livello più debole, ma offre la latenza più bassa sia per le letture sia le per scritture.</span><span class="sxs-lookup"><span data-stu-id="456af-184">Eventual consistency provides the weakest read consistency but offers the lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="456af-185">Gli account Azure Cosmos DB configurati con la coerenza finale possono associare qualsiasi numero di aree di Azure con il proprio account Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="456af-185">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="456af-186">Il costo di un'operazione di lettura, in termini di unità richieste consumate, con il livello di coerenza finale è il più basso fra tutti i livelli di coerenza di Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="456af-186">The cost of a read operation (in terms of RUs consumed) with the eventual consistency level is the lowest of all the Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-the-default-consistency-level"></a><span data-ttu-id="456af-187">Configurazione del livello di coerenza predefinito</span><span class="sxs-lookup"><span data-stu-id="456af-187">Configuring the default consistency level</span></span>
1. <span data-ttu-id="456af-188">Nell'indice del [portale di Azure](https://portal.azure.com/) fare clic su **Azure Cosmos DB**.</span><span class="sxs-lookup"><span data-stu-id="456af-188">In the [Azure portal](https://portal.azure.com/), in the Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="456af-189">Nel pannello **Azure Cosmos DB** selezionare l'account di database da modificare.</span><span class="sxs-lookup"><span data-stu-id="456af-189">In the **Azure Cosmos DB** blade, select the database account to modify.</span></span>
3. <span data-ttu-id="456af-190">Nel pannello dell'account fare clic su **Coerenza predefinita**.</span><span class="sxs-lookup"><span data-stu-id="456af-190">In the account blade, click **Default consistency**.</span></span>
4. <span data-ttu-id="456af-191">Nel pannello **Default Consistency** (Uniformità predefinita) selezionare il nuovo livello di coerenza e fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="456af-191">In the **Default Consistency** blade, select the new consistency level and click **Save**.</span></span>
   
    ![Schermata con icona Impostazioni e opzione Uniformità predefinita](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="456af-193">Livelli di coerenza per le query</span><span class="sxs-lookup"><span data-stu-id="456af-193">Consistency levels for queries</span></span>
<span data-ttu-id="456af-194">Per impostazione predefinita, per le risorse definite dall'utente, il livello di coerenza per le query è identico a quello delle letture.</span><span class="sxs-lookup"><span data-stu-id="456af-194">By default, for user-defined resources, the consistency level for queries is the same as the consistency level for reads.</span></span> <span data-ttu-id="456af-195">Per impostazione predefinita, l'indice è aggiornato in modo sincrono a ogni inserimento, sostituzione o eliminazione di un elemento nel contenitore di Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="456af-195">By default, the index is updated synchronously on each insert, replace, or delete of an item to the Cosmos DB container.</span></span> <span data-ttu-id="456af-196">Ciò permette alle query di rispettare lo stesso livello di coerenza delle letture di punti.</span><span class="sxs-lookup"><span data-stu-id="456af-196">This enables the queries to honor the same consistency level as that of point reads.</span></span> <span data-ttu-id="456af-197">Benché Azure Cosmos DB sia ottimizzato per la scrittura e supporti volumi elevati di scritture, la manutenzione sincrona dell'indice e la gestione di query coerenti, è possibile configurare determinate raccolte per l'aggiornamento differito dell'indice.</span><span class="sxs-lookup"><span data-stu-id="456af-197">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="456af-198">L'indicizzazione differita migliora ulteriormente le prestazioni di scrittura ed è ideale per scenari di inserimento in blocco quando un carico di lavoro presenta principalmente un'intensa attività di lettura.</span><span class="sxs-lookup"><span data-stu-id="456af-198">Lazy indexing further boosts the write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="456af-199">Modalità di indicizzazione</span><span class="sxs-lookup"><span data-stu-id="456af-199">Indexing Mode</span></span> | <span data-ttu-id="456af-200">Letture</span><span class="sxs-lookup"><span data-stu-id="456af-200">Reads</span></span> | <span data-ttu-id="456af-201">Query</span><span class="sxs-lookup"><span data-stu-id="456af-201">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="456af-202">Coerente (impostazione predefinita)</span><span class="sxs-lookup"><span data-stu-id="456af-202">Consistent (default)</span></span> |<span data-ttu-id="456af-203">Selezionare tra assoluta, con decadimento ristretto, sessione, prefisso coerente o finale</span><span class="sxs-lookup"><span data-stu-id="456af-203">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="456af-204">Selezionare tra assoluta, con obsolescenza associata, sessione o finale</span><span class="sxs-lookup"><span data-stu-id="456af-204">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="456af-205">Differita</span><span class="sxs-lookup"><span data-stu-id="456af-205">Lazy</span></span> |<span data-ttu-id="456af-206">Selezionare tra assoluta, con decadimento ristretto, sessione, prefisso coerente o finale</span><span class="sxs-lookup"><span data-stu-id="456af-206">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="456af-207">Finale</span><span class="sxs-lookup"><span data-stu-id="456af-207">Eventual</span></span> |
| <span data-ttu-id="456af-208">Nessuno</span><span class="sxs-lookup"><span data-stu-id="456af-208">None</span></span> |<span data-ttu-id="456af-209">Selezionare tra assoluta, con decadimento ristretto, sessione, prefisso coerente o finale</span><span class="sxs-lookup"><span data-stu-id="456af-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="456af-210">Non applicabile</span><span class="sxs-lookup"><span data-stu-id="456af-210">Not applicable</span></span> |

<span data-ttu-id="456af-211">Come per le richieste di lettura, è possibile abbassare il livello di coerenza per una particolare richiesta di query specifica in ogni API.</span><span class="sxs-lookup"><span data-stu-id="456af-211">As with read requests, you can lower the consistency level of a specific query request in each API.</span></span>

## <a name="next-steps"></a><span data-ttu-id="456af-212">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="456af-212">Next steps</span></span>
<span data-ttu-id="456af-213">Se si desidera eseguire ulteriori informazioni sui livelli di coerenza e i compromessi, è consigliabile che le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="456af-213">If you'd like to do more reading about consistency levels and tradeoffs, we recommend the following resources:</span></span>

* <span data-ttu-id="456af-214">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="456af-214">Doug Terry.</span></span> <span data-ttu-id="456af-215">Video: Replicated Data Consistency explained through baseball (La coerenza dei dati replicati illustrata attraverso il baseball).</span><span class="sxs-lookup"><span data-stu-id="456af-215">Replicated Data Consistency explained through baseball (video).</span></span>   
  [<span data-ttu-id="456af-216">https://www.youtube.com/watch?v=gluIh8zd26I</span><span class="sxs-lookup"><span data-stu-id="456af-216">https://www.youtube.com/watch?v=gluIh8zd26I</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* <span data-ttu-id="456af-217">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="456af-217">Doug Terry.</span></span> <span data-ttu-id="456af-218">Replicated Data Consistency explained through baseball.</span><span class="sxs-lookup"><span data-stu-id="456af-218">Replicated Data Consistency explained through baseball.</span></span>   
  [<span data-ttu-id="456af-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span><span class="sxs-lookup"><span data-stu-id="456af-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* <span data-ttu-id="456af-220">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="456af-220">Doug Terry.</span></span> <span data-ttu-id="456af-221">Session Guarantees for Weakly Consistent Replicated Data.</span><span class="sxs-lookup"><span data-stu-id="456af-221">Session Guarantees for Weakly Consistent Replicated Data.</span></span>   
  [<span data-ttu-id="456af-222">http://dl.acm.org/citation.cfm?id=383631</span><span class="sxs-lookup"><span data-stu-id="456af-222">http://dl.acm.org/citation.cfm?id=383631</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* <span data-ttu-id="456af-223">Daniel Abadi.</span><span class="sxs-lookup"><span data-stu-id="456af-223">Daniel Abadi.</span></span> <span data-ttu-id="456af-224">Svantaggi della coerenza nella Progettazione moderna distribuita di sistemi di Database: CAP è solo una parte del brano".</span><span class="sxs-lookup"><span data-stu-id="456af-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story”.</span></span>   
  [<span data-ttu-id="456af-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span><span class="sxs-lookup"><span data-stu-id="456af-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span></span>](http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html)
* <span data-ttu-id="456af-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span><span class="sxs-lookup"><span data-stu-id="456af-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span></span> <span data-ttu-id="456af-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span><span class="sxs-lookup"><span data-stu-id="456af-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span></span>   
  [<span data-ttu-id="456af-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span><span class="sxs-lookup"><span data-stu-id="456af-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* <span data-ttu-id="456af-229">Werner Vogels.</span><span class="sxs-lookup"><span data-stu-id="456af-229">Werner Vogels.</span></span> <span data-ttu-id="456af-230">Coerente Finale - Revisited.</span><span class="sxs-lookup"><span data-stu-id="456af-230">Eventual Consistent - Revisited.</span></span>    
  [<span data-ttu-id="456af-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span><span class="sxs-lookup"><span data-stu-id="456af-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* <span data-ttu-id="456af-232">Moni Naor , Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span><span class="sxs-lookup"><span data-stu-id="456af-232">Moni Naor , Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span></span>
  [<span data-ttu-id="456af-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span><span class="sxs-lookup"><span data-stu-id="456af-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* <span data-ttu-id="456af-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span><span class="sxs-lookup"><span data-stu-id="456af-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span></span>
* <span data-ttu-id="456af-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span><span class="sxs-lookup"><span data-stu-id="456af-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span></span>
