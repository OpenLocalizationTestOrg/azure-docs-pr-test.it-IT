---
title: aaaHow tooenable SSO tra app in Android utilizza la libreria ADAL | Documenti Microsoft
description: "Come funzionalità hello toouse di hello tooenable SDK ADAL Single Sign-On tra le applicazioni. "
services: active-directory
documentationcenter: 
author: danieldobalian
manager: mbaldwin
editor: 
ms.assetid: 40710225-05ab-40a3-9aec-8b4e96b6b5e7
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: android
ms.devlang: java
ms.topic: article
ms.date: 04/07/2017
ms.author: dadobali
ms.custom: aaddev
ms.openlocfilehash: 3867e15030e5516464e4dbd92ba35894430daf00
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooenable-cross-app-sso-on-android-using-adal"></a><span data-ttu-id="67b7b-103">Come tooenable SSO tra app in Android utilizza la libreria ADAL</span><span class="sxs-lookup"><span data-stu-id="67b7b-103">How tooenable cross-app SSO on Android using ADAL</span></span>
<span data-ttu-id="67b7b-104">Fornendo Single Sign-On (SSO) in modo che gli utenti solo tooenter le proprie credenziali una sola volta e le credenziali di lavoro automaticamente tutte le applicazioni è previsto dai clienti.</span><span class="sxs-lookup"><span data-stu-id="67b7b-104">Providing Single Sign-On (SSO) so that users only need tooenter their credentials once and have those credentials automatically work across applications is now expected by customers.</span></span> <span data-ttu-id="67b7b-105">immissione di nome utente e password su schermi di piccole dimensioni, spesso volte combinate con un fattore aggiuntivo (2FA), ad esempio una telefonata o un codice via SMS, la difficoltà di Hello risultati in rapida insoddisfazione dei clienti se un utente ha toodo più di una volta per il prodotto.</span><span class="sxs-lookup"><span data-stu-id="67b7b-105">hello difficulty in entering their username and password on a small screen, often times combined with an additional factor (2FA) like a phone call or a texted code, results in quick dissatisfaction if a user has toodo this more than one time for your product.</span></span>

<span data-ttu-id="67b7b-106">Inoltre, se si applica una piattaforma di identità che altre applicazioni possono utilizzare, ad esempio Accounts Microsoft o un account aziendale da Office 365, i clienti prevedere che toouse disponibili di toobe tali credenziali in tutte le proprie applicazioni indipendentemente dal fornitore hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-106">In addition, if you apply an identity platform that other applications may use such as Microsoft Accounts or a work account from Office365, customers expect that those credentials toobe available toouse across all their applications no matter hello vendor.</span></span>

<span data-ttu-id="67b7b-107">Hello piattaforma Microsoft Identity, con il SDK di identità di Microsoft, funziona disco rigido per l'utente e fornisce capacità toodelight hello i clienti con SSO sia nel proprio gruppo di applicazioni o, come con le funzionalità di Service broker e un autenticatore applicazioni, attraverso intero dispositivo hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-107">hello Microsoft Identity platform, along with our Microsoft Identity SDKs, does all this hard work for you and gives you hello ability toodelight your customers with SSO either within your own suite of applications or, as with our broker capability and Authenticator applications, across hello entire device.</span></span>

<span data-ttu-id="67b7b-108">Questa procedura dettagliata verrà specificato come tooconfigure Windows SDK all'interno di tooprovide l'applicazione ai clienti tooyour questo vantaggio.</span><span class="sxs-lookup"><span data-stu-id="67b7b-108">This walkthrough will tell you how tooconfigure our SDK within your application tooprovide this benefit tooyour customers.</span></span>

<span data-ttu-id="67b7b-109">Questa procedura si applica a:</span><span class="sxs-lookup"><span data-stu-id="67b7b-109">This walkthrough applies to:</span></span>

* <span data-ttu-id="67b7b-110">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="67b7b-110">Azure Active Directory</span></span>
* <span data-ttu-id="67b7b-111">Azure Active Directory B2C</span><span class="sxs-lookup"><span data-stu-id="67b7b-111">Azure Active Directory B2C</span></span>
* <span data-ttu-id="67b7b-112">Azure Active Directory B2B</span><span class="sxs-lookup"><span data-stu-id="67b7b-112">Azure Active Directory B2B</span></span>
* <span data-ttu-id="67b7b-113">Accesso condizionale di Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="67b7b-113">Azure Active Directory Conditional Access</span></span>

<span data-ttu-id="67b7b-114">documento Hello precedente presuppone che si conosca come troppo[provisioning delle applicazioni nel portale di hello legacy per Azure Active Directory](active-directory-how-to-integrate.md) e l'applicazione integrata con hello [Microsoft Identity Android SDK](https://github.com/AzureAD/azure-activedirectory-library-for-android) .</span><span class="sxs-lookup"><span data-stu-id="67b7b-114">hello document preceding assumes you know how too[provision applications in hello legacy portal for Azure Active Directory](active-directory-how-to-integrate.md) and integrated your application with hello [Microsoft Identity Android SDK](https://github.com/AzureAD/azure-activedirectory-library-for-android).</span></span>

## <a name="sso-concepts-in-hello-microsoft-identity-platform"></a><span data-ttu-id="67b7b-115">Concetti di SSO nella piattaforma delle identità Microsoft hello</span><span class="sxs-lookup"><span data-stu-id="67b7b-115">SSO Concepts in hello Microsoft Identity Platform</span></span>
### <a name="microsoft-identity-brokers"></a><span data-ttu-id="67b7b-116">Broker di Microsoft Identity</span><span class="sxs-lookup"><span data-stu-id="67b7b-116">Microsoft Identity Brokers</span></span>
<span data-ttu-id="67b7b-117">Microsoft fornisce le applicazioni per ogni piattaforma per dispositivi mobili che consentono il bridging delle credenziali tra le applicazioni di fornitori diversi hello e consente a particolari funzionalità avanzate che richiedono un'unica posizione sicura da cui toovalidate credenziali.</span><span class="sxs-lookup"><span data-stu-id="67b7b-117">Microsoft provides applications for every mobile platform that allow for hello bridging of credentials across applications from different vendors and allows for special enhanced features that require a single secure place from where toovalidate credentials.</span></span> <span data-ttu-id="67b7b-118">Queste applicazioni sono dette **broker**.</span><span class="sxs-lookup"><span data-stu-id="67b7b-118">We call these **brokers**.</span></span> <span data-ttu-id="67b7b-119">In iOS e Android forniti tramite applicazioni scaricabile che i clienti installare in modo indipendente o possono essere inseriti toohello dispositivo da una società che gestisce alcuni o tutti i dispositivi hello per i relativi dipendenti.</span><span class="sxs-lookup"><span data-stu-id="67b7b-119">On iOS and Android these are provided through downloadable applications that customers either install independently or can be pushed toohello device by a company who manages some or all of hello device for their employee.</span></span> <span data-ttu-id="67b7b-120">Questi gestori supportano la sicurezza di gestione solo per alcune applicazioni o l'intero dispositivo hello in base a ciò che gli amministratori IT desiderano.</span><span class="sxs-lookup"><span data-stu-id="67b7b-120">These brokers support managing security just for some applications or hello entire device based on what IT Administrators desire.</span></span> <span data-ttu-id="67b7b-121">In Windows, questa funzionalità è fornita dalla selezione account incorporato nel sistema operativo toohello, tecnicamente detto hello Broker di autenticazione Web.</span><span class="sxs-lookup"><span data-stu-id="67b7b-121">In Windows, this functionality is provided by an account chooser built in toohello operating system, known technically as hello Web Authentication Broker.</span></span>

<span data-ttu-id="67b7b-122">Per ulteriori informazioni su come vengono utilizzati questi intermediari e come i clienti potrebbero visualizzarli nel flusso di accesso per piattaforma di Microsoft Identity hello leggere.</span><span class="sxs-lookup"><span data-stu-id="67b7b-122">For more information on how we use these brokers and how your customers might see them in their login flow for hello Microsoft Identity platform read on.</span></span>

### <a name="patterns-for-logging-in-on-mobile-devices"></a><span data-ttu-id="67b7b-123">Modelli di accesso dai dispositivi mobili</span><span class="sxs-lookup"><span data-stu-id="67b7b-123">Patterns for logging in on mobile devices</span></span>
<span data-ttu-id="67b7b-124">Accesso toocredentials nei dispositivi seguire due modelli di base per la piattaforma di Microsoft Identity hello:</span><span class="sxs-lookup"><span data-stu-id="67b7b-124">Access toocredentials on devices follow two basic patterns for hello Microsoft Identity platform:</span></span>

* <span data-ttu-id="67b7b-125">Accessi non assistiti da broker</span><span class="sxs-lookup"><span data-stu-id="67b7b-125">Non-broker assisted logins</span></span>
* <span data-ttu-id="67b7b-126">Accessi assistiti da broker</span><span class="sxs-lookup"><span data-stu-id="67b7b-126">Broker assisted logins</span></span>

#### <a name="non-broker-assisted-logins"></a><span data-ttu-id="67b7b-127">Accessi non assistiti da broker</span><span class="sxs-lookup"><span data-stu-id="67b7b-127">Non-broker assisted logins</span></span>
<span data-ttu-id="67b7b-128">Account di accesso non broker assistito sono esperienze di accesso eseguite inline con un'applicazione hello e utilizzano l'archiviazione locale di hello sul dispositivo hello per tale applicazione.</span><span class="sxs-lookup"><span data-stu-id="67b7b-128">Non-broker assisted logins are login experiences that happen inline with hello application and use hello local storage on hello device for that application.</span></span> <span data-ttu-id="67b7b-129">Questa risorsa di archiviazione può essere condivisi tra le applicazioni, ma le credenziali di hello sono strettamente associati toohello app o un gruppo di applicazioni utilizzando credenziali.</span><span class="sxs-lookup"><span data-stu-id="67b7b-129">This storage may be shared across applications but hello credentials are tightly bound toohello app or suite of apps using that credential.</span></span> <span data-ttu-id="67b7b-130">Molto probabile che hai verificato in molte applicazioni per dispositivi mobili quando si immette un nome utente e una password all'interno di un'applicazione hello stesso.</span><span class="sxs-lookup"><span data-stu-id="67b7b-130">You've most likely experienced this in many mobile applications when you enter a username and password within hello application itself.</span></span>

<span data-ttu-id="67b7b-131">Questi account hanno hello seguenti vantaggi:</span><span class="sxs-lookup"><span data-stu-id="67b7b-131">These logins have hello following benefits:</span></span>

* <span data-ttu-id="67b7b-132">Esperienza utente esiste completamente all'interno di un'applicazione hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-132">User experience exists entirely within hello application.</span></span>
* <span data-ttu-id="67b7b-133">Le credenziali possono essere condivise tra le applicazioni firmate da hello stesso certificato, che fornisce una suite di tooyour esperienza single sign-on di applicazioni.</span><span class="sxs-lookup"><span data-stu-id="67b7b-133">Credentials can be shared across applications that are signed by hello same certificate, providing a single sign-on experience tooyour suite of applications.</span></span>
* <span data-ttu-id="67b7b-134">Controllo intorno esperienza hello della procedura di accesso viene fornito l'applicazione toohello prima e dopo l'accesso.</span><span class="sxs-lookup"><span data-stu-id="67b7b-134">Control around hello experience of logging in is provided toohello application before and after sign-in.</span></span>

<span data-ttu-id="67b7b-135">Questi account hanno hello seguenti svantaggi:</span><span class="sxs-lookup"><span data-stu-id="67b7b-135">These logins have hello following drawbacks:</span></span>

* <span data-ttu-id="67b7b-136">L'utente non può eseguire il Single Sign-On per tutte le app che usano un'identità Microsoft, ma solo per le identità Microsoft configurate dall'applicazione.</span><span class="sxs-lookup"><span data-stu-id="67b7b-136">User cannot experience single-sign on across all apps that use a Microsoft Identity, only across those Microsoft Identities that your application has configured.</span></span>
* <span data-ttu-id="67b7b-137">L'applicazione non può essere utilizzata con funzionalità più avanzate di business, ad esempio l'accesso condizionale o utilizzare hello InTune famiglia di prodotti.</span><span class="sxs-lookup"><span data-stu-id="67b7b-137">Your application cannot be used with more advanced business features such as Conditional Access or use hello InTune suite of products.</span></span>
* <span data-ttu-id="67b7b-138">L'applicazione non supporta l'autenticazione basata su certificati per gli utenti aziendali.</span><span class="sxs-lookup"><span data-stu-id="67b7b-138">Your application can't support certificate-based authentication for business users.</span></span>

<span data-ttu-id="67b7b-139">Ecco una rappresentazione del funzionamento con archiviazione condivisa hello del tooenable applicazioni SSO hello identità SDK:</span><span class="sxs-lookup"><span data-stu-id="67b7b-139">Here is a representation of how hello Microsoft Identity SDKs work with hello shared storage of your applications tooenable SSO:</span></span>

```
+------------+ +------------+  +-------------+
|            | |            |  |             |
|   App 1    | |   App 2    |  |   App 3     |
|            | |            |  |             |
|            | |            |  |             |
+------------+ +------------+  +-------------+
| Azure SDK  | | Azure SDK  |  | Azure SDK   |
+------------+-+------------+--+-------------+
|                                            |
|            App Shared Storage              |
+--------------------------------------------+
```

#### <a name="broker-assisted-logins"></a><span data-ttu-id="67b7b-140">Accessi assistiti da broker</span><span class="sxs-lookup"><span data-stu-id="67b7b-140">Broker assisted logins</span></span>
<span data-ttu-id="67b7b-141">Gli account di accesso assistita da Service Broker sono esperienze di accesso che si verificano all'interno di un'applicazione hello broker e utilizzare hello archiviazione e la protezione delle credenziali di hello broker tooshare a tutte le applicazioni sul dispositivo hello applicabili alla piattaforma di Microsoft Identity hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-141">Broker-assisted logins are login experiences that occur within hello broker application and use hello storage and security of hello broker tooshare credentials across all applications on hello device that apply hello Microsoft Identity platform.</span></span> <span data-ttu-id="67b7b-142">Ciò significa che le applicazioni utilizzano hello broker toosign gli utenti.</span><span class="sxs-lookup"><span data-stu-id="67b7b-142">This means that your applications rely on hello broker toosign users in.</span></span> <span data-ttu-id="67b7b-143">In iOS e Android tali gestori vengono forniti tramite applicazioni scaricabile che i clienti installare in modo indipendente o possono essere inseriti toohello dispositivo da una società che gestisce il dispositivo di hello per utente.</span><span class="sxs-lookup"><span data-stu-id="67b7b-143">On iOS and Android these brokers are provided through downloadable applications that customers either install independently or can be pushed toohello device by a company who manages hello device for their user.</span></span> <span data-ttu-id="67b7b-144">Un esempio di questo tipo di applicazione è un'applicazione Microsoft Authenticator hello in iOS.</span><span class="sxs-lookup"><span data-stu-id="67b7b-144">An example of this type of application is hello Microsoft Authenticator application on iOS.</span></span> <span data-ttu-id="67b7b-145">In Windows, questa funzionalità è fornita dalla selezione account incorporato nel sistema operativo toohello, tecnicamente detto hello Broker di autenticazione Web.</span><span class="sxs-lookup"><span data-stu-id="67b7b-145">In Windows this functionality is provided by an account chooser built in toohello operating system, known technically as hello Web Authentication Broker.</span></span>
<span data-ttu-id="67b7b-146">esperienza Hello varia in base alla piattaforma e a volte può risultare problematica toousers se non è gestita correttamente.</span><span class="sxs-lookup"><span data-stu-id="67b7b-146">hello experience varies by platform and can sometimes be disruptive toousers if not managed correctly.</span></span> <span data-ttu-id="67b7b-147">Si è probabilmente più familiarità con questo modello se è installata l'applicazione di Facebook hello e si usa Facebook Connect da un'altra applicazione.</span><span class="sxs-lookup"><span data-stu-id="67b7b-147">You're probably most familiar with this pattern if you have hello Facebook application installed and use Facebook Connect from another application.</span></span> <span data-ttu-id="67b7b-148">Hello utilizza piattaforma Microsoft Identity hello stesso modello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-148">hello Microsoft Identity platform uses hello same pattern.</span></span>

<span data-ttu-id="67b7b-149">Per iOS in tal modo animazione "transizione" tooa in cui l'applicazione viene inviato background toohello mentre le applicazioni Microsoft Authenticator hello provengono in primo piano toohello per hello utente tooselect account con cui desiderano ricevere toosign con.</span><span class="sxs-lookup"><span data-stu-id="67b7b-149">For iOS this leads tooa "transition" animation where your application is sent toohello background while hello Microsoft Authenticator applications comes toohello foreground for hello user tooselect which account they would like toosign in with.</span></span>  

<span data-ttu-id="67b7b-150">Per Android e Windows account hello selezione viene visualizzato all'interno dell'applicazione dell'utente toohello meno problematica.</span><span class="sxs-lookup"><span data-stu-id="67b7b-150">For Android and Windows hello account chooser is displayed on top of your application which is less disruptive toohello user.</span></span>

#### <a name="how-hello-broker-gets-invoked"></a><span data-ttu-id="67b7b-151">La modalità in cui viene richiamato il broker hello</span><span class="sxs-lookup"><span data-stu-id="67b7b-151">How hello broker gets invoked</span></span>
<span data-ttu-id="67b7b-152">Se è installato un broker compatibile hello dispositivo come applicazione di Microsoft Authenticator, hello identità SDK hello verrà automaticamente hello lavoro richiamare broker hello automaticamente quando un utente indica che desiderano toolog con qualsiasi account da piattaforma di Microsoft Identity Hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-152">If a compatible broker is installed on hello device, like hello Microsoft Authenticator application, hello Microsoft Identity SDKs will automatically do hello work of invoking hello broker for you when a user indicates they wish toolog in using any account from hello Microsoft Identity platform.</span></span> <span data-ttu-id="67b7b-153">Potrebbe trattarsi di un account Microsoft personale, di un account aziendale o dell'istituto di istruzione o di un account dato e ospitato in Azure con i prodotti B2C e B2B.</span><span class="sxs-lookup"><span data-stu-id="67b7b-153">This account could be a personal Microsoft Account, a work or school account, or an account that you provide and host in Azure using our B2C and B2B products.</span></span> 
 
 #### <a name="how-we-ensure-hello-application-is-valid"></a><span data-ttu-id="67b7b-154">Come è possibile garantire un'applicazione hello è valido</span><span class="sxs-lookup"><span data-stu-id="67b7b-154">How we ensure hello application is valid</span></span>
 
 <span data-ttu-id="67b7b-155">identità del Hello necessità tooensure hello di broker di hello chiamata di un'applicazione è fondamentale toohello sicurezza che forniamo nell'account di accesso di Service broker assistito.</span><span class="sxs-lookup"><span data-stu-id="67b7b-155">hello need tooensure hello identity of an application call hello broker is crucial toohello security we provide in broker assisted logins.</span></span> <span data-ttu-id="67b7b-156">IOS né Android applica gli identificatori univoci che sono validi solo per una determinata applicazione, in modo che applicazioni dannose potrebbero lo "spoofing" identificatore dell'applicazione legittimo e ricevere i token hello destinati a un'applicazione hello legittimi.</span><span class="sxs-lookup"><span data-stu-id="67b7b-156">Neither iOS nor Android enforces unique identifiers that are valid only for a given application, so malicious applications may "spoof" a legitimate application's identifier and receive hello tokens meant for hello legitimate application.</span></span> <span data-ttu-id="67b7b-157">tooensure che Microsoft segnala sempre con un'applicazione hello corretto in fase di esecuzione, chiediamo hello developer tooprovide un redirectURI personalizzato quando si registra l'applicazione con Microsoft.</span><span class="sxs-lookup"><span data-stu-id="67b7b-157">tooensure we are always communicating with hello right application at runtime, we ask hello developer tooprovide a custom redirectURI when registering their application with Microsoft.</span></span> <span data-ttu-id="67b7b-158">**Le modalità di creazione dell'URI di reindirizzamento da parte degli sviluppatori vengono trattate in dettaglio di seguito.**</span><span class="sxs-lookup"><span data-stu-id="67b7b-158">**How developers should craft this redirect URI is discussed in detail below.**</span></span> <span data-ttu-id="67b7b-159">Questo valore di redirectURI personalizzato contiene l'identificazione personale del certificato hello di un'applicazione hello ed è garantita l'applicazione univoco toohello toobe da Google Play Store hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-159">This custom redirectURI contains hello certificate thumbprint of hello application and is ensured toobe unique toohello application by hello Google Play Store.</span></span> <span data-ttu-id="67b7b-160">Quando un'applicazione chiama broker hello, broker hello chiede tooprovide sistema operativo Android hello con hello identificazione personale di certificato che Service broker denominato hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-160">When an application calls hello broker, hello broker asks hello Android operating system tooprovide it with hello certificate thumbprint that called hello broker.</span></span> <span data-ttu-id="67b7b-161">broker Hello fornisce questo tooMicrosoft di identificazione personale del certificato nel sistema di identità tooour chiamata hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-161">hello broker provides this certificate thumbprint tooMicrosoft in hello call tooour identity system.</span></span> <span data-ttu-id="67b7b-162">Certificato hello identificazione personale di un'applicazione hello non corrisponde a identificazione personale del certificato hello fornito toous dallo sviluppatore hello durante la registrazione, si consentirà l'accesso toohello token per un'applicazione hello risorse hello richiede.</span><span class="sxs-lookup"><span data-stu-id="67b7b-162">If hello certificate thumbprint of hello application does not match hello certificate thumbprint provided toous by hello developer during registration, we will deny access toohello tokens for hello resource hello application is requesting.</span></span> <span data-ttu-id="67b7b-163">Tale controllo garantisce che solo un'applicazione hello registrata dallo sviluppatore hello riceve i token.</span><span class="sxs-lookup"><span data-stu-id="67b7b-163">This check ensures that only hello application registered by hello developer receives tokens.</span></span>

<span data-ttu-id="67b7b-164">**sviluppatore di Hello ha scelta hello del se hello Microsoft Identity SDK chiama broker hello o utilizza hello non broker assistito flusso.**</span><span class="sxs-lookup"><span data-stu-id="67b7b-164">**hello developer has hello choice of if hello Microsoft Identity SDK calls hello broker or uses hello non-broker assisted flow.**</span></span> <span data-ttu-id="67b7b-165">Tuttavia se hello scelto non toouse hello assistito broker flusso perdono hello vantaggio derivante dall'utilizzo delle credenziali SSO utente hello potrà avere già aggiunto al dispositivo hello e impedisce loro applicazione in uso con le funzionalità di business Microsoft Fornisce i clienti, ad esempio l'accesso condizionale, funzionalità di gestione di Intune e l'autenticazione basata su certificato.</span><span class="sxs-lookup"><span data-stu-id="67b7b-165">However if hello developer chooses not toouse hello broker-assisted flow they lose hello benefit of using SSO credentials that hello user may have already added on hello device and prevents their application from being used with business features Microsoft provides its customers such as Conditional Access, Intune Management capabilities, and certificate-based authentication.</span></span>

<span data-ttu-id="67b7b-166">Questi account hanno hello seguenti vantaggi:</span><span class="sxs-lookup"><span data-stu-id="67b7b-166">These logins have hello following benefits:</span></span>

* <span data-ttu-id="67b7b-167">Utente di cui si verifichi SSO per tutte le loro applicazioni indipendentemente dal fornitore hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-167">User experiences SSO across all their applications no matter hello vendor.</span></span>
* <span data-ttu-id="67b7b-168">L'applicazione può utilizzare funzionalità più avanzate di business, ad esempio l'accesso condizionale o usare hello InTune suite di prodotti.</span><span class="sxs-lookup"><span data-stu-id="67b7b-168">Your application can use more advanced business features such as Conditional Access or use hello InTune suite of products.</span></span>
* <span data-ttu-id="67b7b-169">L'applicazione può supportare l'autenticazione basata su certificati per gli utenti aziendali.</span><span class="sxs-lookup"><span data-stu-id="67b7b-169">Your application can support certificate-based authentication for business users.</span></span>
* <span data-ttu-id="67b7b-170">Accedi molto più sicuro di riscontrare identità hello dell'applicazione hello e dell'utente hello vengono verificate dall'applicazione di Service broker hello con gli algoritmi di sicurezza aggiuntivo e la crittografia.</span><span class="sxs-lookup"><span data-stu-id="67b7b-170">Much more secure sign-in experience as hello identity of hello application and hello user are verified by hello broker application with additional security algorithms and encryption.</span></span>

<span data-ttu-id="67b7b-171">Questi account hanno hello seguenti svantaggi:</span><span class="sxs-lookup"><span data-stu-id="67b7b-171">These logins have hello following drawbacks:</span></span>

* <span data-ttu-id="67b7b-172">In iOS utente hello viene eseguita la transizione dall'esperienza dell'applicazione mentre si scelgono le credenziali.</span><span class="sxs-lookup"><span data-stu-id="67b7b-172">In iOS hello user is transitioned out of your application's experience while credentials are chosen.</span></span>
* <span data-ttu-id="67b7b-173">Perdita di account di accesso di hello possibilità toomanage hello esperienza per i clienti all'interno dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="67b7b-173">Loss of hello ability toomanage hello login experience for your customers within your application.</span></span>

<span data-ttu-id="67b7b-174">Ecco una rappresentazione di come utilizzare Microsoft Identity SDK hello hello broker tooenable applicazioni SSO:</span><span class="sxs-lookup"><span data-stu-id="67b7b-174">Here is a representation of how hello Microsoft Identity SDKs work with hello broker applications tooenable SSO:</span></span>

```
+------------+ +------------+   +-------------+
|            | |            |   |             |
|   App 1    | |   App 2    |   |   Someone   |
|            | |            |   |    Else's   |
|            | |            |   |     App     |
+------------+ +------------+   +-------------+
|  ADAL SDK  | |  ADAL SDK  |   |  ADAL SDK   |
+-----+------+-+-----+------+-  +-------+-----+
      |              |                  |
      |       +------v------+           |
      |       |             |           |
      |       | Microsoft   |           |
      +-------> Broker      |^----------+
              | Application
              |             |
              +-------------+
              |             |
              |   Broker    |
              |   Storage   |
              |             |
              +-------------+

```

<span data-ttu-id="67b7b-175">Grazie a queste informazioni di base deve essere toobetter in grado di comprendere e implementare SSO all'interno dell'applicazione utilizzando una piattaforma di Microsoft Identity hello e SDK.</span><span class="sxs-lookup"><span data-stu-id="67b7b-175">Armed with this background information you should be able toobetter understand and implement SSO within your application using hello Microsoft Identity platform and SDKs.</span></span>

## <a name="enabling-cross-app-sso-using-adal"></a><span data-ttu-id="67b7b-176">Abilitazione di SSO tra app tramite ADAL</span><span class="sxs-lookup"><span data-stu-id="67b7b-176">Enabling cross-app SSO using ADAL</span></span>
<span data-ttu-id="67b7b-177">In questo caso si usa hello ADAL Android SDK per:</span><span class="sxs-lookup"><span data-stu-id="67b7b-177">Here we use hello ADAL Android SDK to:</span></span>

* <span data-ttu-id="67b7b-178">Attivare SSO non assistito da broker per la suite di app</span><span class="sxs-lookup"><span data-stu-id="67b7b-178">Turn on non-broker assisted SSO for your suite of apps</span></span>
* <span data-ttu-id="67b7b-179">Attivare il supporto per SSO assistito da broker</span><span class="sxs-lookup"><span data-stu-id="67b7b-179">Turn on support for broker-assisted SSO</span></span>

### <a name="turning-on-sso-for-non-broker-assisted-sso"></a><span data-ttu-id="67b7b-180">Attivazione dell'SSO per l'SSO non assistito da broker</span><span class="sxs-lookup"><span data-stu-id="67b7b-180">Turning on SSO for non-broker assisted SSO</span></span>
<span data-ttu-id="67b7b-181">Per tutte le applicazioni di accesso non broker SSO assistito hello identità SDK gestisce gran parte delle complessità hello di SSO.</span><span class="sxs-lookup"><span data-stu-id="67b7b-181">For non-broker assisted SSO across applications hello Microsoft Identity SDKs manage much of hello complexity of SSO for you.</span></span> <span data-ttu-id="67b7b-182">Ciò include l'individuazione utente hello nella cache di hello e la gestione di un elenco di utenti ha effettuato l'accesso è tooquery.</span><span class="sxs-lookup"><span data-stu-id="67b7b-182">This includes finding hello right user in hello cache and maintaining a list of logged in users for you tooquery.</span></span>

<span data-ttu-id="67b7b-183">tooenable SSO tutte le applicazioni che si è proprietari che è necessario hello toodo seguenti:</span><span class="sxs-lookup"><span data-stu-id="67b7b-183">tooenable SSO across applications you own you need toodo hello following:</span></span>

1. <span data-ttu-id="67b7b-184">Verificare che tutte le hello di utente le applicazioni stesso Client o applicazione ID.</span><span class="sxs-lookup"><span data-stu-id="67b7b-184">Ensure all your applications user hello same Client ID or Application ID.</span></span>
2. <span data-ttu-id="67b7b-185">Verificare che tutte le applicazioni abbiano hello che impostare SharedUserID stesso.</span><span class="sxs-lookup"><span data-stu-id="67b7b-185">Ensure all your applications have hello same SharedUserID set.</span></span>
3. <span data-ttu-id="67b7b-186">Verificare che tutti i hello condivisione applicazioni stesso certificato di firma da Google Play hello archiviare in modo da poter condividere l'archiviazione.</span><span class="sxs-lookup"><span data-stu-id="67b7b-186">Ensure that all of your applications share hello same signing certificate from hello Google Play store so that you can share storage.</span></span>

#### <a name="step-1-using-hello-same-client-id--application-id-for-all-hello-applications-in-your-suite-of-apps"></a><span data-ttu-id="67b7b-187">Passaggio 1: Utilizzo hello lo stesso ID Client / applicazione ID per tutte le applicazioni nel gruppo di applicazioni di hello</span><span class="sxs-lookup"><span data-stu-id="67b7b-187">Step 1: Using hello same Client ID / Application ID for all hello applications in your suite of apps</span></span>
<span data-ttu-id="67b7b-188">Per consentire tooknow piattaforma di Microsoft Identity hello che ne sia consentita tooshare token tra le applicazioni, ognuna delle applicazioni sarà necessario tooshare hello stesso Client o applicazione ID.</span><span class="sxs-lookup"><span data-stu-id="67b7b-188">In order for hello Microsoft Identity platform tooknow that it's allowed tooshare tokens across your applications, each of your applications will need tooshare hello same Client ID or Application ID.</span></span> <span data-ttu-id="67b7b-189">Questo è l'identificatore hello tooyou fornito al momento della prima applicazione è stato registrato nel portale di hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-189">This is hello unique identifier that was provided tooyou when you registered your first application in hello portal.</span></span>

<span data-ttu-id="67b7b-190">Per comprendere come identificare diverse App toohello servizio Microsoft Identity se utilizza hello stesso ID applicazione.</span><span class="sxs-lookup"><span data-stu-id="67b7b-190">You may be wondering how you will identify different apps toohello Microsoft Identity service if it uses hello same Application ID.</span></span> <span data-ttu-id="67b7b-191">risposte Hello sono con hello **Redirect URIs**.</span><span class="sxs-lookup"><span data-stu-id="67b7b-191">hello answer is with hello **Redirect URIs**.</span></span> <span data-ttu-id="67b7b-192">Ogni applicazione può avere più URI di reindirizzamento registrato nel portale di onboarding hello.</span><span class="sxs-lookup"><span data-stu-id="67b7b-192">Each application can have multiple Redirect URIs registered in hello onboarding portal.</span></span> <span data-ttu-id="67b7b-193">Ogni app della suite avrà un URI di reindirizzamento diverso.</span><span class="sxs-lookup"><span data-stu-id="67b7b-193">Each app in your suite will have a different redirect URI.</span></span> <span data-ttu-id="67b7b-194">La situazione potrebbe essere simile alla seguente:</span><span class="sxs-lookup"><span data-stu-id="67b7b-194">An example of how this looks is below:</span></span>

<span data-ttu-id="67b7b-195">URI di reindirizzamento dell'app 1: `msauth://com.example.userapp/IcB5PxIyvbLkbFVtBI%2FitkW%2Fejk%3D`</span><span class="sxs-lookup"><span data-stu-id="67b7b-195">App1 Redirect URI: `msauth://com.example.userapp/IcB5PxIyvbLkbFVtBI%2FitkW%2Fejk%3D`</span></span>

<span data-ttu-id="67b7b-196">URI di reindirizzamento dell'app 2: `msauth://com.example.userapp1/KmB7PxIytyLkbGHuI%2UitkW%2Fejk%4E`</span><span class="sxs-lookup"><span data-stu-id="67b7b-196">App2 Redirect URI: `msauth://com.example.userapp1/KmB7PxIytyLkbGHuI%2UitkW%2Fejk%4E`</span></span>

<span data-ttu-id="67b7b-197">URI di reindirizzamento dell'app 3: `msauth://com.example.userapp2/Pt85PxIyvbLkbKUtBI%2SitkW%2Fejk%9F`</span><span class="sxs-lookup"><span data-stu-id="67b7b-197">App3 Redirect URI: `msauth://com.example.userapp2/Pt85PxIyvbLkbKUtBI%2SitkW%2Fejk%9F`</span></span>

<span data-ttu-id="67b7b-198">....</span><span class="sxs-lookup"><span data-stu-id="67b7b-198">....</span></span>

<span data-ttu-id="67b7b-199">Questi vengono nidificati sotto lo stesso ID client hello / ID dell'applicazione e ricercata hello in base a URI è restituire toous nella configurazione del SDK di reindirizzamento.</span><span class="sxs-lookup"><span data-stu-id="67b7b-199">These are nested under hello same client ID / application ID and looked up based on hello redirect URI you return toous in your SDK configuration.</span></span>

```
+-------------------+
|                   |
|  Client ID        |
+---------+---------+
          |
          |           +-----------------------------------+
          |           |  App 1 Redirect URI               |
          +----------^+                                   |
          |           +-----------------------------------+
          |
          |           +-----------------------------------+
          +----------^+  App 2 Redirect URI               |
          |           |                                   |
          |           +-----------------------------------+
          |
          +----------^+-----------------------------------+
                      |  App 3 Redirect URI               |
                      |                                   |
                      +-----------------------------------+

```


<span data-ttu-id="67b7b-200">*Si noti che hello formato degli URI di reindirizzamento vengono spiegate di seguito. È possibile utilizzare qualsiasi URI di reindirizzamento a meno che non si desidera broker hello toosupport, nel qual caso è necessario simile hello precedente*</span><span class="sxs-lookup"><span data-stu-id="67b7b-200">*Note that hello format of these Redirect URIs are explained below. You may use any Redirect URI unless you wish toosupport hello broker, in which case they must look something like hello above*</span></span>

#### <a name="step-2-configuring-shared-storage-in-android"></a><span data-ttu-id="67b7b-201">Passaggio 2: Configurazione dell'archiviazione condivisa in Android</span><span class="sxs-lookup"><span data-stu-id="67b7b-201">Step 2: Configuring shared storage in Android</span></span>
<span data-ttu-id="67b7b-202">Hello impostazione `SharedUserID` esula hello in questo documento, ma possono essere appresi leggendo la documentazione di Google Android su hello hello [manifesto](http://developer.android.com/guide/topics/manifest/manifest-element.html).</span><span class="sxs-lookup"><span data-stu-id="67b7b-202">Setting hello `SharedUserID` is beyond hello scope of this document but can be learned by reading hello Google Android documentation on hello [Manifest](http://developer.android.com/guide/topics/manifest/manifest-element.html).</span></span> <span data-ttu-id="67b7b-203">È importante decidere il nome di sharedUserID e usarlo in tutte le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="67b7b-203">What is important is that you decide what you want your sharedUserID will be called and use that across all your applications.</span></span>

<span data-ttu-id="67b7b-204">Dopo aver hello `SharedUserID` in tutte le applicazioni si è pronti toouse SSO.</span><span class="sxs-lookup"><span data-stu-id="67b7b-204">Once you have hello `SharedUserID` in all your applications you are ready toouse SSO.</span></span>

> [!WARNING]
> <span data-ttu-id="67b7b-205">Quando si condivide l'archiviazione tra le applicazioni tutte le applicazioni possono eliminare utenti o peggio eliminare tutti i token hello in tutta l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="67b7b-205">When you share storage across your applications any application can delete users, or worse delete all hello tokens across your application.</span></span> <span data-ttu-id="67b7b-206">Questo è particolarmente disastroso se si hanno applicazioni che si basano su hello token toodo operazioni in background.</span><span class="sxs-lookup"><span data-stu-id="67b7b-206">This is particularly disastrous if you have applications that rely on hello tokens toodo background work.</span></span> <span data-ttu-id="67b7b-207">Archiviazione di condivisione significa che è necessario prestare attenzione nel rimuovere tutte le operazioni tramite hello identità SDK.</span><span class="sxs-lookup"><span data-stu-id="67b7b-207">Sharing storage means that you must be very careful in any and all remove operations through hello Microsoft Identity SDKs.</span></span>
> 
> 

<span data-ttu-id="67b7b-208">L'operazione è terminata.</span><span class="sxs-lookup"><span data-stu-id="67b7b-208">That's it!</span></span> <span data-ttu-id="67b7b-209">Hello Microsoft Identity SDK ora condividono le credenziali in tutte le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="67b7b-209">hello Microsoft Identity SDK will now share credentials across all your applications.</span></span> <span data-ttu-id="67b7b-210">elenco di utenti Hello verrà inoltre essere condivisi tra le istanze dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="67b7b-210">hello user list will also be shared across application instances.</span></span>

### <a name="turning-on-sso-for-broker-assisted-sso"></a><span data-ttu-id="67b7b-211">Attivazione di SSO per SSO assistito da broker</span><span class="sxs-lookup"><span data-stu-id="67b7b-211">Turning on SSO for broker assisted SSO</span></span>
<span data-ttu-id="67b7b-212">consente a un'applicazione di toouse qualsiasi broker da cui è installato nel dispositivo hello è Hello **disattivata per impostazione predefinita**.</span><span class="sxs-lookup"><span data-stu-id="67b7b-212">hello ability for an application toouse any broker that is installed on hello device is **turned off by default**.</span></span> <span data-ttu-id="67b7b-213">Ordinare toouse l'applicazione con broker hello è necessario apportare alcune modifiche alla configurazione e aggiungere un'applicazione tooyour di codice.</span><span class="sxs-lookup"><span data-stu-id="67b7b-213">In order toouse your application with hello broker you must do some additional configuration and add some code tooyour application.</span></span>

<span data-ttu-id="67b7b-214">Hello passaggi toofollow sono:</span><span class="sxs-lookup"><span data-stu-id="67b7b-214">hello steps toofollow are:</span></span>

1. <span data-ttu-id="67b7b-215">Abilitare la modalità di Service broker in toohello di chiamata del codice dell'applicazione SDK MS</span><span class="sxs-lookup"><span data-stu-id="67b7b-215">Enable broker mode in your application code's call toohello MS SDK</span></span>
2. <span data-ttu-id="67b7b-216">Stabilire un nuovo URI di reindirizzamento e fornire tooboth hello app e la registrazione dell'app</span><span class="sxs-lookup"><span data-stu-id="67b7b-216">Establish a new redirect URI and provide that tooboth hello app and your app registration</span></span>
3. <span data-ttu-id="67b7b-217">Impostazione delle autorizzazioni corrette hello nel manifesto Android hello</span><span class="sxs-lookup"><span data-stu-id="67b7b-217">Setting up hello correct permissions in hello Android manifest</span></span>

#### <a name="step-1-enable-broker-mode-in-your-application"></a><span data-ttu-id="67b7b-218">Passaggio 1: Abilitare la modalità broker nell'applicazione</span><span class="sxs-lookup"><span data-stu-id="67b7b-218">Step 1: Enable broker mode in your application</span></span>
<span data-ttu-id="67b7b-219">possibilità di Hello per il broker di hello toouse applicazione è attivata quando si crea la configurazione iniziale dell'istanza di autenticazione o impostazioni"hello".</span><span class="sxs-lookup"><span data-stu-id="67b7b-219">hello ability for your application toouse hello broker is turned on when you create hello "settings" or initial setup of your Authentication instance.</span></span> <span data-ttu-id="67b7b-220">A tal fine, impostare il tipo ApplicationSettings nel codice:</span><span class="sxs-lookup"><span data-stu-id="67b7b-220">You do this by setting your ApplicationSettings type in your code:</span></span>

```
AuthenticationSettings.Instance.setUseBroker(true);
```


#### <a name="step-2-establish-a-new-redirect-uri-with-your-url-scheme"></a><span data-ttu-id="67b7b-221">Passaggio 2: Creare un nuovo URI di reindirizzamento con lo schema dell'URL</span><span class="sxs-lookup"><span data-stu-id="67b7b-221">Step 2: Establish a new redirect URI with your URL Scheme</span></span>
<span data-ttu-id="67b7b-222">In ordine tooensure che è sempre restituire credenziali hello token toohello corretta applicazione, è necessario toomake che è richiamata tooyour applicazione in modo che il sistema operativo Android hello è possibile verificare.</span><span class="sxs-lookup"><span data-stu-id="67b7b-222">In order tooensure that we always return hello credential tokens toohello correct application, we need toomake sure we call back tooyour application in a way that hello Android operating system can verify.</span></span> <span data-ttu-id="67b7b-223">sistema operativo Android Hello utilizza hello hash certificato hello in hello Google Play store.</span><span class="sxs-lookup"><span data-stu-id="67b7b-223">hello Android operating system uses hello hash of hello certificate in hello Google Play store.</span></span> <span data-ttu-id="67b7b-224">di cui un'applicazione non autorizzata non può effettuare lo spoofing.</span><span class="sxs-lookup"><span data-stu-id="67b7b-224">This cannot be spoofed by a rogue application.</span></span> <span data-ttu-id="67b7b-225">Pertanto, è usato insieme a hello URI del nostro tooensure applicazione Service broker token hello vengono restituiti toohello corretta applicazione.</span><span class="sxs-lookup"><span data-stu-id="67b7b-225">Therefore, we leverage this along with hello URI of our broker application tooensure that hello tokens are returned toohello correct application.</span></span> <span data-ttu-id="67b7b-226">È necessario è tooestablish questo reindirizzamento univoco sia nell'applicazione e set URI come URI di reindirizzamento nel nostro portale per sviluppatori.</span><span class="sxs-lookup"><span data-stu-id="67b7b-226">We require you tooestablish this unique redirect URI both in your application and set as a Redirect URI in our developer portal.</span></span>

<span data-ttu-id="67b7b-227">L'URI di reindirizzamento deve essere nel formato corretto di hello di:</span><span class="sxs-lookup"><span data-stu-id="67b7b-227">Your redirect URI must be in hello proper form of:</span></span>

`msauth://packagename/Base64UrlencodedSignature`

<span data-ttu-id="67b7b-228">Ad esempio: *msauth://com.example.userapp/IcB5PxIyvbLkbFVtBI%2FitkW%2Fejk%3D*</span><span class="sxs-lookup"><span data-stu-id="67b7b-228">ex: *msauth://com.example.userapp/IcB5PxIyvbLkbFVtBI%2FitkW%2Fejk%3D*</span></span>

<span data-ttu-id="67b7b-229">Questo URI di reindirizzamento deve toobe specificato con la registrazione di app utilizzando hello [portale di Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="67b7b-229">This Redirect URI needs toobe specified in your app registration using hello [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="67b7b-230">Per altre informazioni sulla registrazione di app Azure AD, vedere [Integrazione con Azure Active Directory](active-directory-how-to-integrate.md).</span><span class="sxs-lookup"><span data-stu-id="67b7b-230">For more information on Azure AD app registration, see [Integrating with Azure Active Directory](active-directory-how-to-integrate.md).</span></span>

#### <a name="step-3-set-up-hello-correct-permissions-in-your-application"></a><span data-ttu-id="67b7b-231">Passaggio 3: Impostare le autorizzazioni corrette di hello nell'applicazione</span><span class="sxs-lookup"><span data-stu-id="67b7b-231">Step 3: Set up hello correct permissions in your application</span></span>
<span data-ttu-id="67b7b-232">L'applicazione di Service broker in Android utilizza funzionalità di gestione degli account hello di credenziali di toomanage del sistema operativo Android hello tutte le applicazioni.</span><span class="sxs-lookup"><span data-stu-id="67b7b-232">Our broker application in Android uses hello Accounts Manager feature of hello Android OS toomanage credentials across applications.</span></span> <span data-ttu-id="67b7b-233">In Service broker di ordini toouse hello in Android il manifesto dell'applicazione deve disporre di autorizzazioni toouse ad AccountManager account.</span><span class="sxs-lookup"><span data-stu-id="67b7b-233">In order toouse hello broker in Android your app manifest must have permissions toouse AccountManager accounts.</span></span> <span data-ttu-id="67b7b-234">Questo argomento viene discusso in dettaglio in hello [Google documentazione per la gestione di Account](http://developer.android.com/reference/android/accounts/AccountManager.html)</span><span class="sxs-lookup"><span data-stu-id="67b7b-234">This is discussed in detail in hello [Google documentation for Account Manager here](http://developer.android.com/reference/android/accounts/AccountManager.html)</span></span>

<span data-ttu-id="67b7b-235">In particolare, le autorizzazioni sono:</span><span class="sxs-lookup"><span data-stu-id="67b7b-235">In particular, these permissions are:</span></span>

```
GET_ACCOUNTS
USE_CREDENTIALS
MANAGE_ACCOUNTS
```

### <a name="youve-configured-sso"></a><span data-ttu-id="67b7b-236">L'SSO è stato configurato!</span><span class="sxs-lookup"><span data-stu-id="67b7b-236">You've configured SSO!</span></span>
<span data-ttu-id="67b7b-237">Ora hello SDK identità Microsoft verrà automaticamente sia condivide le credenziali tra le applicazioni e richiamare broker hello se è presente sul dispositivo.</span><span class="sxs-lookup"><span data-stu-id="67b7b-237">Now hello Microsoft Identity SDK will automatically both share credentials across your applications and invoke hello broker if it's present on their device.</span></span>

