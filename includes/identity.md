La gestione delle identità è altrettanto importante nel cloud pubblico hello perché è in locale. toohelp con questo, Azure supporta diverse tecnologie di identità cloud diversi. tra cui:

* È possibile eseguire Windows Server Active Directory, comunemente denominato semplicemente Active Directory, in un cloud di hello tramite macchine virtuali create con macchine virtuali di Azure. Questo approccio ha senso quando si usa Azure tooextend Data Center locale nel cloud hello.
* È possibile usare Azure Active Directory toogive agli utenti di single sign-on troppo[Software come servizio (SaaS)](https://azure.microsoft.com/overview/what-is-saas/) applicazioni. Microsoft Office 365 ad esempio utilizza questa tecnologia che può essere utilizzata anche dalle applicazioni eseguite in Azure o in altre piattaforme cloud.
* Applicazioni in esecuzione in hello cloud o locali possono usare Azure Active Directory Access Control toolet utenti accedono mediante identità di Facebook, Google, Microsoft e altri provider di identità.

In questo articolo vengono descritte queste tre opzioni.

## <a name="table-of-contents"></a>Sommario
* [Esecuzione di Windows Server Active Directory nelle macchine virtuali](#adinvm)
* [Uso di Azure Active Directory](#ad)
* [Uso di Controllo di accesso di Azure Active Directory](#ac)

## <a name="adinvm"></a>Esecuzione di Windows Server Active Directory nelle macchine virtuali
L'esecuzione di Windows Server AD nelle macchine virtuali di Azure è molto simile all'esecuzione in locale. [figura 1](#fig1) è mostrato un esempio tipico.

![Azure Active Directory in macchina virtuale](./media/identity/identity_01_ADinVM.png)

<a name="Fig1"></a>Figura 1: È possibile eseguire Windows Server Active Directory nel data center locale dell'organizzazione di Azure le macchine virtuali connesse tooan tramite la rete virtuale di Azure.

Nell'esempio hello illustrato di seguito, Windows Server Active Directory è in esecuzione nelle macchine virtuali create utilizzando macchine virtuali di Azure, la tecnologia della piattaforma hello IaaS. Queste macchine virtuali e alcuni altri sono raggruppati in un data center locale tooan di rete virtuale connessa tramite la rete virtuale di Azure. rete virtuale Hello carves uscita di un gruppo di macchine virtuali cloud che interagiscono con la rete locale hello tramite una connessione di rete privata virtuale (VPN). Questo consente di eseguire queste macchine virtuali di Azure simile solo un'altra subnet toohello locale datacenter. Come mostrato nella figura hello, due di tali macchine virtuali sono in esecuzione il controller di dominio di Windows Server Active Directory. Hello altre macchine virtuali nella rete virtuale hello potrebbe essere in esecuzione applicazioni, ad esempio SharePoint o utilizzato in un altro modo, ad esempio per lo sviluppo e test. Data Center locale Hello esegue anche due controller di dominio di Windows Server Active Directory.

Esistono diverse opzioni per la connessione hello i controller di dominio cloud hello con quelli in esecuzione in locale:

* Renderle tutte parte di un unico dominio Active Directory.
* Creare separato AD domini locale e nel cloud hello che fanno parte di hello stessa foresta.
* Creare foreste di Active Directory nel cloud hello e in locale, quindi connettersi foreste hello tramite relazioni di trust tra foreste o Windows Server Active Directory Federation Services (ADFS), che può essere eseguita anche nelle macchine virtuali in Azure.

Indipendentemente dalla scelta viene effettuata, un amministratore deve assicurarsi che le richieste di autenticazione degli utenti locali indirizzate toocloud solo quando necessario, i controller di dominio poiché cloud toohello di collegamento hello toobe probabilmente più lento rispetto alle reti locali. Un altro fattore tooconsider connessione cloud e i controller di dominio locale è traffico hello generato dalla replica. I controller di dominio nel cloud hello sono in genere nel proprio sito di Active Directory, che consente a un amministratore tooschedule la frequenza con cui la replica viene eseguita. Azure addebita i costi per il traffico inviato da un Data Center di Azure, anche se non per i byte inviati in cui potrebbero influire sulle scelte di replica del messaggio per l'amministratore. È inoltre importante sottolineare che mentre Azure fornisce un proprio supporto Domain Name System (DNS), da questo servizio mancano le funzionalità richieste da Active Directory, ad esempio il supporto per il DNS dinamico e i record SRV. Per questo motivo, in esecuzione Windows Server Active Directory in Azure richiede l'impostazione di server DNS nel cloud hello.

L'esecuzione di Windows Server AD nelle macchine virtuali di Azure può risultare indicata in varie situazioni. Di seguito sono riportati alcuni esempi:

* Se si usa macchine virtuali di Azure come un'estensione del proprio Data Center, è possibile eseguire le applicazioni nel cloud hello necessarie operazioni toohandle i controller di dominio locale, ad esempio le richieste di autenticazione integrata di Windows o le query LDAP. SharePoint, ad esempio, interagisce frequentemente con Active Directory e, pertanto, sebbene sia possibile toorun una farm di SharePoint in Azure tramite una directory locale, impostazione di controller di dominio nel cloud hello verrà migliorare significativamente le prestazioni. (È importante toorealize che non è necessariamente richiesta, tuttavia, una notevole quantità di applicazioni può essere eseguito correttamente in un cloud di hello tramite solo i controller di dominio locale).
* Si supponga che una succursale lontani non dispone di hello risorse toorun proprio controller di dominio. Oggi, gli utenti devono autenticare controller toodomain hello altro lato di hello world - account di accesso sono particolarmente lunghi. In esecuzione Active Directory in Azure in un Data Center Microsoft più vicino possibile velocizzare questa senza la necessità di più server di succursale hello.
* Un'organizzazione che usa Azure per il ripristino di emergenza è possibile mantenere un piccolo set di macchine virtuali attive nel cloud hello, tra cui un controller di dominio. Può quindi essere preparato tooexpand questo sito come tootake necessari su per gli errori in un' posizione.

Sono inoltre disponibili altre possibilità. Ad esempio, non si è richiesto Windows Server Active Directory in hello cloud tooan tooconnect locale Data Center. Se si desidera toorun una farm di SharePoint che ha gestito un determinato gruppo di utenti, ad esempio, ognuno dei quali potrebbe accedere esclusivamente le identità basate su cloud, è possibile creare un insieme di strutture autonomo in Azure. Il modo in cui si utilizza questa tecnologia dipende dagli obiettivi. Per informazioni dettagliate sull'utilizzo di Windows Server AD con Azure, [vedere qui](http://msdn.microsoft.com/library/windowsazure/jj156090.aspx).

## <a name="ad"></a>Uso di Azure Active Directory
L'aumento della diffusione delle applicazioni SaaS fa sorgere una domanda ovvia relativa al tipo di servizio directory che deve essere usato da queste applicazioni basate sul cloud. Domanda toothat di risposta di Microsoft è Azure Active Directory.

Esistono due opzioni per l'utilizzo di questo servizio di directory nel cloud hello:

* I privati e le organizzazioni che utilizzano solo applicazioni SaaS possono utilizzare Azure Active Directory come unico servizio directory.
* Le organizzazioni che eseguono Windows Server Active Directory possono connettersi le tooAzure di directory Active Directory locale e quindi utilizzarlo toogive agli utenti di single sign-on tooSaaS applicazioni.

[Figura 2](#fig2) illustra hello prima di queste due opzioni, in Azure Active Directory è tutto ciò che ha richiesto.

![Azure Active Directory in macchina virtuale](./media/identity/identity_02_AD.png)

<a name="fig2"></a>Figura 2: Azure Active Directory consente agli utenti dell'organizzazione applicazioni single sign-on tooSaaS, inclusi Office 365.

Come mostrato nella figura hello, Azure AD è un servizio multi-tenant. Questo significa che può supportare contemporaneamente più organizzazioni diverse e archiviare informazioni directory relative agli utenti presso ognuna di esse. In questo esempio, un utente dell'organizzazione A tenta tooaccess un'applicazione SaaS. L'applicazione può essere un'applicazione di Office 365, ad esempio SharePoint Online o un'altra applicazione non Microsoft che utilizza questa stessa tecnologia. Poiché Azure AD supporta il protocollo SAML 2.0 hello, tutto ciò che ha richiesto da un'applicazione hello possibilità toointeract utilizza questo standard di settore. In realtà, le applicazioni che utilizzano Azure AD possono essere eseguite in qualsiasi data center e non solo in un data center Azure.

processo Hello inizia quando hello utente accede a un'applicazione SaaS (passaggio 1). toouse questa applicazione, utente hello deve presentare un token emesso da Azure AD.

Il token contiene informazioni che identificano l'utente hello ed è firmato digitalmente da Azure AD. token hello tooget, hello utente esegue l'autenticazione tooAzure AD fornendo un nome utente e password (passaggio 2). Azure AD quindi restituisce il token hello deve (passaggio 3).

Questo token viene quindi inviato applicazione SaaS toohello (passaggio 4), che convalida la firma del token hello e utilizza il relativo contenuto (passaggio 5). In genere, un'applicazione hello utilizzerà le informazioni di identità hello token hello contiene toodecide quali informazioni hello autorizzato tooaccess e forse in altri modi.

Se un'applicazione hello richiede ulteriori informazioni sull'utente hello rispetto a ciò che è contenuto nel token hello, è possibile richiedere direttamente da Azure AD tramite API di Azure AD Graph hello (passaggio 6). Nella versione iniziale di hello di Azure AD, lo schema di directory hello è piuttosto semplice: contiene solo gli utenti e gruppi e le relazioni tra loro. Le applicazioni possono utilizzare questo toolearn informazioni sulle connessioni tra gli utenti. Si supponga, ad esempio, che un'applicazione deve tooknow quali il manager dell'utente toodecide se è il blocco toosome consentito l'accesso di dati. È possibile apprendere questo eseguendo una query su Azure AD tramite API Graph hello.

Hello API Graph utilizza un protocollo REST normale, che rende semplice toouse dalla maggior parte dei client, inclusi i dispositivi mobili. Hello API supporta inoltre le estensioni di hello definite da OData, aggiunta, ad esempio, un linguaggio di query toolet client accedere ai dati in modi più utili. Per altre informazioni su OData, vedere [Introducing OData](http://download.microsoft.com/download/E/5/A/E5A59052-EE48-4D64-897B-5F7C608165B8/IntroducingOData.pdf) (Introduzione a OData). Poiché hello API Graph può essere utilizzati toolearn sulle relazioni tra gli utenti, consente alle applicazioni di comprendere grafico social hello incorporati nello schema di hello Azure AD per una determinata organizzazione (che è il motivo per cui viene chiamato hello API Graph). E tooauthenticate stesso richiede tooAzure Active Directory per l'API Graph, un'applicazione utilizza OAuth 2.0.

Se un'organizzazione non usa Windows Server Active Directory, non dispone di server locali o domini - e si basa unicamente sulla applicazioni cloud che usano Azure AD, usando solo la directory cloud concederebbe utenti single sign-on tooall dell'impresa hello di essi. Sebbene questo scenario stia diventando sempre più diffuso, la maggior parte delle organizzazioni si avvale ancora di domini locali creati con Windows Server Active Directory. Azure AD ha un ruolo utile di tooplay, nonché come [figura 3](#fig3) Mostra.

![Azure Active Directory nella macchina virtuale](./media/identity/identity_03_AD.png)
<a id="fig3"></a>figura 3: un'organizzazione può creare una federazione in Windows Server Active Directory con Azure Active Directory toogive le relative applicazioni single sign-on tooSaaS gli utenti.

In questo scenario, un utente dell'organizzazione B desidera tooaccess un'applicazione SaaS. Prima di procedere, gli amministratori della directory dell'organizzazione hello devono stabilire una relazione federativa con Azure AD con ADFS, come illustrato nella figura hello. Tali amministratori è inoltre necessario configurare la sincronizzazione dei dati tra locale Windows Server dell'organizzazione hello Active Directory e Azure AD. Questa copia automaticamente informazioni sull'utente e gruppo da hello locale directory tooAzure Active Directory. Si noti in questo modo: In effetti, organizzazione hello estende la directory locale al cloud hello. La combinazione di Windows Server Active Directory e Azure AD in questo modo offre un servizio di directory che può essere gestito come una singola entità, mantenendo un footprint sia in locale e nel cloud hello organizzazione hello.

toouse Azure AD, hello utente esegue il primo dominio di Active Directory locale tooher come di consueto (passaggio 1). Quando si tenta un'applicazione SaaS tooaccess hello (passaggio 2), il processo di federazione hello comporta in Azure AD Alice rilasciando un token per questa applicazione (passaggio 3). Per altre informazioni sul funzionamento della federazione, vedere il documento relativo a [tecnologie e scenari per l'identità basata sulle attestazioni per Windows](http://www.davidchappell.com/writing/white_papers/Claims-Based_Identity_for_Windows_v3.0--Chappell.docx). Come prima, questo token contiene informazioni che identificano l'utente hello ed è firmato digitalmente da Azure AD. Questo token viene quindi inviato applicazione SaaS toohello (passaggio 4), che convalida la firma del token hello e utilizza il relativo contenuto (passaggio 5). Ed è in uno scenario precedente hello, hello SaaS applicazione può utilizzare hello toolearn API Graph ulteriori sull'utente, se necessario (passaggio 6).

Attualmente, Azure AD non rappresenta un'alternativa completa rispetto a Windows Server AD locale. Come già accennato, la directory cloud hello dispone di uno schema molto di più semplice, e anche manca, ad esempio, i criteri di gruppo, hello possibilità toostore informazioni macchine e il supporto per LDAP. (In realtà, una macchina Windows non può essere configurato toolet tooit utilizzando unicamente AD Azure, gli utenti accedono - si tratta di uno scenario supportato.) Invece, obiettivi iniziale di hello di Azure Active Directory includono consentendo alle applicazioni di accesso agli utenti di enterprise cloud hello senza mantenere un account di accesso separato e liberando locale manualmente la sincronizzazione delle directory locali con gli amministratori della directory ogni applicazione SaaS l'organizzazione Usa. Nel corso del tempo, tuttavia, prevede che questo tooaddress servizio di directory cloud una vasta gamma di scenari.

## <a name="ac"></a>Uso di Controllo di accesso di Azure Active Directory
Tecnologie di identità basati su cloud possono essere utilizzati toosolve un'ampia gamma di problemi. Azure Active Directory può concedere agli utenti dell'organizzazione applicazioni SaaS di single sign-on toomultiple, ad esempio. Ma le tecnologie di identità nel cloud hello possono essere usate anche in altri modi.

Si supponga, ad esempio, che un'applicazione sarà toolet relativi utenti di accedono con i token emessi da più *il provider di identità (IdPs)*. Sono disponibili numerosi provider di identità, inclusi Facebook, Google, Microsoft e altri, e spesso le applicazioni consentono agli utenti di eseguire l'accesso mediante una di queste identità. Motivo per cui deve un'applicazione è necessario creare anche toomaintain il proprio elenco di utenti e password quando invece si basa su identità già esistenti? Accettare le identità esistenti semplifica sia per gli utenti sono meno tooremember nome utente e password, hello e utenti e creare un'applicazione hello, che non necessitano più toomaintain i propri elenchi di nomi utente e password.

Sebbene ogni provider di identità emetta un determinato tipo di token, questi token non sono standard, in quanto ogni provider di identità dispone di un formato personalizzato. Inoltre, le informazioni di hello in tali token inoltre non sono standard. Un'applicazione che desidera tooaccept token emessi, ad esempio, Facebook, Google e Microsoft è affrontare la sfida hello della scrittura di codice univoco toohandle ognuno di questi formati diversi.

A che scopo? Non converrebbe creare un intermediario in grado di generare un unico formato di token con una rappresentazione comune delle informazioni relative all'identità? Questo approccio renderebbe vita più semplice per gli sviluppatori di hello che creano applicazioni, poiché devono ora toohandle un solo tipo di token. Azure Active Directory Access Control avviene esattamente, fornendo un intermediario nel cloud hello per l'utilizzo di token diverse. come illustrato nella [figura 4](#fig4).

![Azure Active Directory nella macchina virtuale](./media/identity/identity_04_IdentityProviders.png)
<a id="fig4"></a>figura 4: controllo di accesso di Azure Active Directory rende più semplice per i token di identità tooaccept applicazioni rilasciati dal provider di identità diversi.

processo Hello inizia quando un utente tenta di un'applicazione hello tooaccess da un browser. un'applicazione Hello reindirizza proprio tooan IdP di propria scelta (e anche l'applicazione hello considera attendibile). Lei autentica stesso toothis IdP, ad esempio, immettere un nome utente e password (passaggio 1) e hello IdP restituisce un token contenente informazioni sul proprio (passaggio 2).

Come mostrato nella figura hello, controllo di accesso supporta una gamma di diversi IdPs basato su cloud, inclusi quelli creati da Google, Yahoo!, Facebook, Microsoft (precedentemente noto come Windows Live ID) e qualsiasi provider OpenID. Supporta inoltre le identità create mediante Azure Active Directory e attraverso la federazione con AD FS, Windows Server Active Directory. obiettivo di Hello è identità hello più diffuse toocover oggi stesso, se si sta emesso da IdPs in locale o cloud hello.

Una volta nel browser dell'utente hello contiene un token IdP dal proprio provider di identità scelto, invia questo token tooAccess controllo (passaggio 3). Controllo di accesso convalida token hello, assicurandosi che effettivamente è stato rilasciato da questo provider di identità, quindi crea un nuovo token in base a regole toohello che sono state definite per questa applicazione. Come Azure Active Directory, controllo di accesso è un servizio multi-tenant, ma i tenant di hello sono applicazioni anziché organizzazioni del cliente. Ogni applicazione può ottenere il proprio spazio dei nomi, come illustrato nella figura hello ed è possibile definire diverse regole sull'autorizzazione e così via.

Tali regole consentono all'amministratore di ogni applicazione di definire la modalità in cui i token di diversi provider di identità devono essere trasformati in un token di Controllo di accesso. Se ad esempio diversi provider di identità utilizzano tipi differenti per rappresentare i nomi utenti, le regole di Controllo di accesso possono trasformarli in un tipo di nome utente comune. Controllo di accesso invia quindi questo nuovo browser di token toohello indietro (passaggio 4), che invia toohello applicazione (passaggio 5). Contenente il token di controllo di accesso hello, un'applicazione hello verifica che il token effettivamente è stato emesso da Access Control, quindi utilizza le informazioni di hello contiene (passaggio 6).

Durante questo processo potrebbe sembrare un po' più complesso, effettivamente semplifica notevolmente più semplice per autore hello di un'applicazione hello. Anziché gestire vari token che contiene informazioni diverse, un'applicazione hello può accettare le identità emesso da più provider di identità durante continua a ricevere solo un singolo token con informazioni familiarità. Inoltre, anziché richiedere che toobe ogni applicazione configurata tootrust IdPs diversi, queste relazioni di trust vengono invece mantenute dal controllo di accesso: un'applicazione è necessario solo verificare l'attendibilità.

È importante precisare che non sul controllo di accesso collegati tooWindows - potrebbe anche essere utilizzata da un'applicazione Linux che accettate solo le identità di Google e Facebook. E anche se il controllo di accesso fa parte di hello famiglia di Azure Active Directory, può considerare come un servizio completamente distinto da quello illustrato nella sezione precedente hello. Se entrambe le tecnologie di funzionare con identità, consentono di risolvere problemi piuttosto diversi (anche se Microsoft ha detto che prevede toointegrate hello due a un certo punto).

L'utilizzo delle identità è importante per la maggior parte delle applicazioni. obiettivo di Hello del controllo di accesso è toomake più semplice per le applicazioni toocreate gli sviluppatori che accettano le identità di provider di identità diverse. Inserisce il servizio nel cloud hello, Microsoft ha reso disponibile tooany applicazione in esecuzione su qualsiasi piattaforma.

## <a name="about-hello-author"></a>Su hello autore
David Chappell è il titolare della società Chappell & Associates ([www.davidchappell.com](http://www.davidchappell.com)) di San Francisco, California.

