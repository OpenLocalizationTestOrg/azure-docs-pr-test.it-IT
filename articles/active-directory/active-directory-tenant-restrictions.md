---
title: aaaManage accesso toocloud App limitando - tenant di Azure | Documenti Microsoft
description: Come toouse restrizioni Tenant toomanage quali utenti possono accedere le applicazioni in base al proprio tenant di Azure AD.
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
editor: yossib
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/10/2017
ms.author: kgremban
ms.openlocfilehash: 6470fa217738b29104353ae17a2f53216f825c19
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="use-tenant-restrictions-toomanage-access-toosaas-cloud-applications"></a><span data-ttu-id="96d11-103">Utilizzare le applicazioni cloud Tenant restrizioni toomanage accesso tooSaaS</span><span class="sxs-lookup"><span data-stu-id="96d11-103">Use Tenant Restrictions toomanage access tooSaaS cloud applications</span></span>

<span data-ttu-id="96d11-104">Le organizzazioni di grandi dimensioni che evidenziano sicurezza desidera toomove toocloud servizi come Office 365, ma tooknow necessità che possono accedere solo agli utenti approvati risorse.</span><span class="sxs-lookup"><span data-stu-id="96d11-104">Large organizations that emphasize security want toomove toocloud services like Office 365, but need tooknow that their users only can access approved resources.</span></span> <span data-ttu-id="96d11-105">In genere, le aziende limitano i nomi di dominio o gli indirizzi IP quando desiderano accedere toomanage.</span><span class="sxs-lookup"><span data-stu-id="96d11-105">Traditionally, companies restrict domain names or IP addresses when they want toomanage access.</span></span> <span data-ttu-id="96d11-106">Questo approccio non è efficace in situazioni dove le app SaaS vengono ospitate in un cloud pubblico ed eseguite su nomi di dominio condivisi come outlook.office.com e login.microsoftonline.com. Questi indirizzi di blocco è consigliabile mantenere gli utenti di accedere a Outlook Web hello interamente, anziché semplicemente limitando le risorse e le identità tooapproved.</span><span class="sxs-lookup"><span data-stu-id="96d11-106">This approach fails in a world where SaaS apps are hosted in a public cloud, running on shared domain names like outlook.office.com and login.microsoftonline.com. Blocking these addresses would keep users from accessing Outlook on hello web entirely, instead of merely restricting them tooapproved identities and resources.</span></span>

<span data-ttu-id="96d11-107">Richiesta di verifica della Azure Active Directory soluzione toothis è una funzionalità denominata restrizioni Tenant.</span><span class="sxs-lookup"><span data-stu-id="96d11-107">Azure Active Directory's solution toothis challenge is a feature called Tenant Restrictions.</span></span> <span data-ttu-id="96d11-108">Tenant restrizioni consente alle organizzazioni toocontrol accesso tooSaaS cloud le applicazioni, in base all'utilizzo di applicazioni hello tenant hello Azure AD per single sign-on.</span><span class="sxs-lookup"><span data-stu-id="96d11-108">Tenant Restrictions enables organizations toocontrol access tooSaaS cloud applications, based on hello Azure AD tenant hello applications use for single sign-on.</span></span> <span data-ttu-id="96d11-109">È ad esempio, applicazioni di Office 365 dell'organizzazione di tooallow accesso tooyour, impedendo le istanze di accesso tooother delle organizzazioni di queste stesse applicazioni.</span><span class="sxs-lookup"><span data-stu-id="96d11-109">For example, you may want tooallow access tooyour organization’s Office 365 applications, while preventing access tooother organizations’ instances of these same applications.</span></span>  

<span data-ttu-id="96d11-110">Consente alle organizzazioni hello possibilità toospecify hello elenco di restrizioni di tenant che gli utenti sono autorizzati tooaccess del tenant.</span><span class="sxs-lookup"><span data-stu-id="96d11-110">Tenant Restrictions gives organizations hello ability toospecify hello list of tenants that their users are permitted tooaccess.</span></span> <span data-ttu-id="96d11-111">Azure AD quindi concede solo tenant toothese consentito l'accesso.</span><span class="sxs-lookup"><span data-stu-id="96d11-111">Azure AD then only grants access toothese permitted tenants.</span></span>

<span data-ttu-id="96d11-112">Questo articolo è incentrato sulle restrizioni di Tenant per Office 365, ma la funzionalità hello dovrebbe funzionare con qualsiasi app di cloud SaaS che usa i protocolli di autenticazione moderna con Azure AD per single sign-on.</span><span class="sxs-lookup"><span data-stu-id="96d11-112">This article focuses on Tenant Restrictions for Office 365, but hello feature should work with any SaaS cloud app that uses modern authentication protocols with Azure AD for single sign-on.</span></span> <span data-ttu-id="96d11-113">Se si usa l'App con un annuncio di Azure diversi tenant di hello tenant usato da Office 365 SaaS, assicurarsi che tutti necessari tenant sono consentiti.</span><span class="sxs-lookup"><span data-stu-id="96d11-113">If you use SaaS apps with a different Azure AD tenant from hello tenant used by Office 365, make sure that all required tenants are permitted.</span></span> <span data-ttu-id="96d11-114">Per ulteriori informazioni sulle app di SaaS cloud, vedere hello [Active Directory Marketplace](https://azure.microsoft.com/en-us/marketplace/active-directory/).</span><span class="sxs-lookup"><span data-stu-id="96d11-114">For more information about SaaS cloud apps, see hello [Active Directory Marketplace](https://azure.microsoft.com/en-us/marketplace/active-directory/).</span></span>

## <a name="how-it-works"></a><span data-ttu-id="96d11-115">Funzionamento</span><span class="sxs-lookup"><span data-stu-id="96d11-115">How it works</span></span>

<span data-ttu-id="96d11-116">Hello complessiva soluzione comprende hello seguenti componenti:</span><span class="sxs-lookup"><span data-stu-id="96d11-116">hello overall solution comprises hello following components:</span></span> 

1. <span data-ttu-id="96d11-117">**Azure AD** : se hello `Restrict-Access-To-Tenants: <permitted tenant list>` è presente, Azure AD rilascia token di sicurezza per hello consentito tenant.</span><span class="sxs-lookup"><span data-stu-id="96d11-117">**Azure AD** – If hello `Restrict-Access-To-Tenants: <permitted tenant list>` is present, Azure AD only issues security tokens for hello permitted tenants.</span></span> 

2. <span data-ttu-id="96d11-118">**Infrastruttura del server proxy locale** – un dispositivo proxy in grado di ispezione SSL intestazione hello tooinsert configurato contenente hello elenco di tenant è consentito in traffico di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="96d11-118">**On-premises proxy server infrastructure** – a proxy device capable of SSL inspection, configured tooinsert hello header containing hello list of permitted tenants into traffic destined for Azure AD.</span></span> 

3. <span data-ttu-id="96d11-119">**Il software client** – toosupport Tenant restrizioni, il software client deve richiedere i token direttamente da Azure AD, in modo che il traffico possa essere intercettato dall'infrastruttura del proxy hello.</span><span class="sxs-lookup"><span data-stu-id="96d11-119">**Client software** – toosupport Tenant Restrictions, client software must request tokens directly from Azure AD, so that traffic can be intercepted by hello proxy infrastructure.</span></span> <span data-ttu-id="96d11-120">Restrizioni dei tenant è attualmente supportata nelle applicazioni Office 365 basate su browser e nei client Office dove vengono usate tecniche di autenticazione moderne come OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="96d11-120">Tenant Restrictions is currently supported by browser-based Office 365 applications and by Office clients when modern authentication (like OAuth 2.0) is used.</span></span> 

4. <span data-ttu-id="96d11-121">**L'autenticazione moderna** : servizi cloud è necessario utilizzare l'autenticazione moderna toouse Tenant restrizioni e bloccare l'accesso a tooall non autorizzata tenant.</span><span class="sxs-lookup"><span data-stu-id="96d11-121">**Modern Authentication** – cloud services must use modern authentication toouse Tenant Restrictions and block access tooall non-permitted tenants.</span></span> <span data-ttu-id="96d11-122">Servizi di Office 365 cloud devono essere configurato toouse protocolli di autenticazione moderna per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="96d11-122">Office 365 cloud services must be configured toouse modern authentication protocols by default.</span></span> <span data-ttu-id="96d11-123">Per informazioni più recenti di hello sul supporto di Office 365 per l'autenticazione moderna, vedere [autenticazione moderna di Office 365 aggiornato](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/).</span><span class="sxs-lookup"><span data-stu-id="96d11-123">For hello latest information on Office 365 support for modern authentication, read [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/).</span></span>

<span data-ttu-id="96d11-124">Hello seguente diagramma illustra il flusso di traffico di alto livello hello.</span><span class="sxs-lookup"><span data-stu-id="96d11-124">hello following diagram illustrates hello high-level traffic flow.</span></span> <span data-ttu-id="96d11-125">Ispezione SSL è necessaria solo per il traffico tooAzure AD, non ai servizi cloud di toohello Office 365.</span><span class="sxs-lookup"><span data-stu-id="96d11-125">SSL inspection is only required on traffic tooAzure AD, not toohello Office 365 cloud services.</span></span> <span data-ttu-id="96d11-126">Questa distinzione è importante perché il volume di traffico hello per l'autenticazione tooAzure Active Directory è in genere molto inferiore di quelle applicazioni tooSaaS volume di traffico come Exchange Online e SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="96d11-126">This distinction is important because hello traffic volume for authentication tooAzure AD is typically much lower than traffic volume tooSaaS applications like Exchange Online and SharePoint Online.</span></span>

![Flusso di traffico di Restrizioni dei tenant, diagramma](./media/active-directory-tenant-restrictions/traffic-flow.png)

## <a name="set-up-tenant-restrictions"></a><span data-ttu-id="96d11-128">Impostare Restrizioni dei tenant</span><span class="sxs-lookup"><span data-stu-id="96d11-128">Set up Tenant Restrictions</span></span>

<span data-ttu-id="96d11-129">Esistono due passaggi tooget, avviata con restrizioni di Tenant.</span><span class="sxs-lookup"><span data-stu-id="96d11-129">There are two steps tooget started with Tenant Restrictions.</span></span> <span data-ttu-id="96d11-130">Hello primo passaggio è assicurarsi che i client possono connettersi indirizzi destra toohello toomake.</span><span class="sxs-lookup"><span data-stu-id="96d11-130">hello first step is toomake sure that your clients can connect toohello right addresses.</span></span> <span data-ttu-id="96d11-131">Hello in secondo luogo è tooconfigure l'infrastruttura del proxy.</span><span class="sxs-lookup"><span data-stu-id="96d11-131">hello second is tooconfigure your proxy infrastructure.</span></span>

### <a name="urls-and-ip-addresses"></a><span data-ttu-id="96d11-132">URL e indirizzi IP</span><span class="sxs-lookup"><span data-stu-id="96d11-132">URLs and IP addresses</span></span>

<span data-ttu-id="96d11-133">toouse Tenant restrizioni, i client devono essere in grado di tooconnect toohello seguenti URL di Azure AD tooauthenticate: login.microsoftonline.com login.microsoft.com e login.windows.net.</span><span class="sxs-lookup"><span data-stu-id="96d11-133">toouse Tenant Restrictions, your clients must be able tooconnect toohello following Azure AD URLs tooauthenticate: login.microsoftonline.com, login.microsoft.com, and login.windows.net.</span></span> <span data-ttu-id="96d11-134">Inoltre, tooaccess Office 365, i client devono essere in grado di tooconnect toohello FQDN o URL e gli indirizzi IP definito in [gli intervalli di indirizzi IP e gli URL di Office 365](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span><span class="sxs-lookup"><span data-stu-id="96d11-134">Additionally, tooaccess Office 365, your clients must also be able tooconnect toohello FQDNs/URLs and IP addresses defined in [Office 365 URLs and IP address ranges](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2).</span></span> 

### <a name="proxy-configuration-and-requirements"></a><span data-ttu-id="96d11-135">Configurazione e requisiti del proxy</span><span class="sxs-lookup"><span data-stu-id="96d11-135">Proxy configuration and requirements</span></span>

<span data-ttu-id="96d11-136">Hello seguente configurazione è necessario tooenable Tenant restrizioni tramite l'infrastruttura del proxy.</span><span class="sxs-lookup"><span data-stu-id="96d11-136">hello following configuration is required tooenable Tenant Restrictions through your proxy infrastructure.</span></span> <span data-ttu-id="96d11-137">Questa guida è generica, pertanto è consigliabile consultare la documentazione del fornitore di tooyour proxy per i passaggi di implementazione specifica.</span><span class="sxs-lookup"><span data-stu-id="96d11-137">This guidance is generic, so you should refer tooyour proxy vendor’s documentation for specific implementation steps.</span></span>

#### <a name="prerequisites"></a><span data-ttu-id="96d11-138">Prerequisiti</span><span class="sxs-lookup"><span data-stu-id="96d11-138">Prerequisites</span></span>

- <span data-ttu-id="96d11-139">proxy Hello deve essere tooperform in grado di intercettazione di SSL, l'inserimento di intestazione HTTP e le destinazioni di filtro con FQDN o URL.</span><span class="sxs-lookup"><span data-stu-id="96d11-139">hello proxy must be able tooperform SSL interception, HTTP header insertion, and filter destinations using FQDNs/URLs.</span></span> 

- <span data-ttu-id="96d11-140">I client devono considerare attendibile la catena di certificati hello presentata dal proxy hello per le comunicazioni SSL.</span><span class="sxs-lookup"><span data-stu-id="96d11-140">Clients must trust hello certificate chain presented by hello proxy for SSL communications.</span></span> <span data-ttu-id="96d11-141">Ad esempio, se si utilizzano i certificati rilasciati da un'infrastruttura PKI interna, hello interno emittente certificato certificato dell'autorità radice deve essere attendibile.</span><span class="sxs-lookup"><span data-stu-id="96d11-141">For example, if certificates from an internal PKI are used, hello internal issuing root certificate authority certificate must be trusted.</span></span>

- <span data-ttu-id="96d11-142">Questa funzionalità è inclusa nelle sottoscrizioni di Office 365, ma se si desidera che le app SaaS di toouse restrizioni Tenant toocontrol accesso tooother licenze di Azure AD Premium 1 sono necessari.</span><span class="sxs-lookup"><span data-stu-id="96d11-142">This feature is included in Office 365 subscriptions, but if you want toouse Tenant Restrictions toocontrol access tooother SaaS apps then Azure AD Premium 1 licenses are required.</span></span>

#### <a name="configuration"></a><span data-ttu-id="96d11-143">Configurazione</span><span class="sxs-lookup"><span data-stu-id="96d11-143">Configuration</span></span>

<span data-ttu-id="96d11-144">Per ogni toologin.microsoftonline.com richiesta in ingresso, login.microsoft.com e login.windows.net, inserire due intestazioni HTTP: *limitare l'accesso al tenant* e *contesto di limitare l'accesso*.</span><span class="sxs-lookup"><span data-stu-id="96d11-144">For each incoming request toologin.microsoftonline.com, login.microsoft.com, and login.windows.net, insert two HTTP headers: *Restrict-Access-To-Tenants* and *Restrict-Access-Context*.</span></span>

<span data-ttu-id="96d11-145">intestazioni Hello devono includere hello seguenti elementi:</span><span class="sxs-lookup"><span data-stu-id="96d11-145">hello headers should include hello following elements:</span></span> 
- <span data-ttu-id="96d11-146">Per *limitare l'accesso al tenant*, un valore di \<consentito elenco tenant\>, ovvero un elenco delimitato da virgole di tenant desiderato tooallow utenti tooaccess.</span><span class="sxs-lookup"><span data-stu-id="96d11-146">For *Restrict-Access-To-Tenants*, a value of \<permitted tenant list\>, which is a comma-separated list of tenants you want tooallow users tooaccess.</span></span> <span data-ttu-id="96d11-147">Qualsiasi dominio registrato con un tenant può essere tenant hello tooidentify utilizzati in questo elenco.</span><span class="sxs-lookup"><span data-stu-id="96d11-147">Any domain that is registered with a tenant can be used tooidentify hello tenant in this list.</span></span> <span data-ttu-id="96d11-148">Ad esempio, toopermit tooboth Contoso e Fabrikam tenant di accedere, hello coppia nome/valore aspetto:`Restrict-Access-To-Tenants: contoso.onmicrosoft.com,fabrikam.onmicrosoft.com`</span><span class="sxs-lookup"><span data-stu-id="96d11-148">For example, toopermit access tooboth Contoso and Fabrikam tenants, hello name/value pair looks like:  `Restrict-Access-To-Tenants: contoso.onmicrosoft.com,fabrikam.onmicrosoft.com`</span></span> 
- <span data-ttu-id="96d11-149">Per *contesto di limitare l'accesso*, un valore di un ID di directory singola dichiarazione tenant dall'impostazione di restrizioni di Tenant hello.</span><span class="sxs-lookup"><span data-stu-id="96d11-149">For *Restrict-Access-Context*, a value of a single directory ID, declaring which tenant is setting hello Tenant Restrictions.</span></span> <span data-ttu-id="96d11-150">Ad esempio, Contoso come tenant hello che impostare criteri di restrizione Tenant hello toodeclare, coppia nome/valore hello aspetto:`Restrict-Access-Context: 456ff232-35l2-5h23-b3b3-3236w0826f3d`</span><span class="sxs-lookup"><span data-stu-id="96d11-150">For example, toodeclare Contoso as hello tenant that set hello Tenant Restrictions policy, hello name/value pair looks like: `Restrict-Access-Context: 456ff232-35l2-5h23-b3b3-3236w0826f3d`</span></span>  

> [!TIP]
> <span data-ttu-id="96d11-151">È possibile trovare l'ID di directory in hello [portale di Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="96d11-151">You can find your directory ID in hello [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="96d11-152">Accedere come amministratore, selezionare **Azure Active Directory**, quindi selezionare **Proprietà**.</span><span class="sxs-lookup"><span data-stu-id="96d11-152">Sign in as an administrator, select **Azure Active Directory**, then select **Properties**.</span></span>

<span data-ttu-id="96d11-153">tooprevent agli utenti di inserire le proprie intestazione HTTP con i tenant non riconosciuta, proxy hello deve intestazione limitare l'accesso al tenant di hello tooreplace se è già presente nella richiesta in ingresso hello.</span><span class="sxs-lookup"><span data-stu-id="96d11-153">tooprevent users from inserting their own HTTP header with non-approved tenants, hello proxy needs tooreplace hello Restrict-Access-To-Tenants header if it is already present in hello incoming request.</span></span> 

<span data-ttu-id="96d11-154">I client devono essere forzato toouse hello proxy per tutte le richieste toologin.microsoftonline.com login.microsoft.com e login.windows.net.</span><span class="sxs-lookup"><span data-stu-id="96d11-154">Clients must be forced toouse hello proxy for all requests toologin.microsoftonline.com, login.microsoft.com, and login.windows.net.</span></span> <span data-ttu-id="96d11-155">Ad esempio, se i file PAC toodirect utilizzato client toouse hello proxy, gli utenti finali deve non essere in grado di tooedit o disabilitare file PAC hello.</span><span class="sxs-lookup"><span data-stu-id="96d11-155">For example, if PAC files are used toodirect clients toouse hello proxy, end users should not be able tooedit or disable hello PAC files.</span></span>

## <a name="hello-user-experience"></a><span data-ttu-id="96d11-156">esperienza utente Hello</span><span class="sxs-lookup"><span data-stu-id="96d11-156">hello user experience</span></span>

<span data-ttu-id="96d11-157">Questa sezione illustra l'esperienza di hello per gli utenti finali e amministratori.</span><span class="sxs-lookup"><span data-stu-id="96d11-157">This section shows hello experience for both end users and admins.</span></span>

### <a name="end-user-experience"></a><span data-ttu-id="96d11-158">Esperienza utente finale</span><span class="sxs-lookup"><span data-stu-id="96d11-158">End-user experience</span></span>

<span data-ttu-id="96d11-159">Un utente di esempio si trova in rete di Contoso hello, ma tenta tooaccess hello Fabrikam istanza un' condivisa applicazione SaaS come Outlook online.</span><span class="sxs-lookup"><span data-stu-id="96d11-159">An example user is on hello Contoso network, but is trying tooaccess hello Fabrikam instance of a shared SaaS application like Outlook online.</span></span> <span data-ttu-id="96d11-160">Se Contoso è un tenant non è consentito per l'istanza, l'utente hello Visualizza hello pagina seguente:</span><span class="sxs-lookup"><span data-stu-id="96d11-160">If Contoso is a non-permitted tenant for that instance, hello user sees hello following page:</span></span>

![Pagina di accesso negato per gli utenti in tenant non consentiti](./media/active-directory-tenant-restrictions/end-user-denied.png)

### <a name="admin-experience"></a><span data-ttu-id="96d11-162">Esperienza amministratore</span><span class="sxs-lookup"><span data-stu-id="96d11-162">Admin experience</span></span>

<span data-ttu-id="96d11-163">Mentre configurazione delle restrizioni di Tenant viene eseguita sull'infrastruttura di hello proxy aziendale, gli amministratori possono accedere direttamente i report di restrizioni Tenant hello in hello portale di Azure.</span><span class="sxs-lookup"><span data-stu-id="96d11-163">While configuration of Tenant Restrictions is done on hello corporate proxy infrastructure, admins can access hello Tenant Restrictions reports in hello Azure portal directly.</span></span> <span data-ttu-id="96d11-164">i report tooview hello, toohello pagina di panoramica di Azure Active Directory e quindi cercare nella casella 'Funzionalità'.</span><span class="sxs-lookup"><span data-stu-id="96d11-164">tooview hello reports, go toohello Azure Active Directory Overview page, then look under ‘Other capabilities’.</span></span>

<span data-ttu-id="96d11-165">salve per tenant hello specificato come tenant hello contesto di accesso con restrizioni, può utilizzare questo toosee report che accessi tutti bloccato a causa di hello criteri di restrizione di Tenant, tra cui identità hello utilizzata e l'ID di directory di destinazione hello.</span><span class="sxs-lookup"><span data-stu-id="96d11-165">hello admin for hello tenant specified as hello Restricted-Access-Context tenant can use this report toosee all sign-ins blocked because of hello Tenant Restrictions policy, including hello identity used and hello target directory ID.</span></span>

![Utilizzare hello Azure tooview portale con restrizioni tentativi di accesso riusciti](./media/active-directory-tenant-restrictions/portal-report.png)

<span data-ttu-id="96d11-167">Come altri report di hello portale di Azure, è possibile utilizzare i filtri toospecify hello ambito del report.</span><span class="sxs-lookup"><span data-stu-id="96d11-167">Like other reports in hello Azure portal, you can use filters toospecify hello scope of your report.</span></span> <span data-ttu-id="96d11-168">È possibile usare filtri per utenti, applicazioni, client o intervalli di tempo specifici.</span><span class="sxs-lookup"><span data-stu-id="96d11-168">You can filter on a specific user, application, client, or time interval.</span></span>

## <a name="office-365-support"></a><span data-ttu-id="96d11-169">Supporto di Office 365</span><span class="sxs-lookup"><span data-stu-id="96d11-169">Office 365 support</span></span>

<span data-ttu-id="96d11-170">Applicazioni di Office 365 devono soddisfare due criteri toofully supporto Tenant restrizioni:</span><span class="sxs-lookup"><span data-stu-id="96d11-170">Office 365 applications must meet two criteria toofully support Tenant Restrictions:</span></span>

1. <span data-ttu-id="96d11-171">client Hello utilizzato supporta l'autenticazione moderna</span><span class="sxs-lookup"><span data-stu-id="96d11-171">hello client used supports modern authentication</span></span>
2. <span data-ttu-id="96d11-172">L'autenticazione moderna è abilitato come protocollo di autenticazione hello predefinito per il servizio cloud hello.</span><span class="sxs-lookup"><span data-stu-id="96d11-172">Modern authentication is enabled as hello default authentication protocol for hello cloud service.</span></span>

<span data-ttu-id="96d11-173">Fare riferimento troppo[autenticazione moderna di Office 365 aggiornato](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/) per informazioni più recenti di hello in Office client supportano attualmente l'autenticazione moderna.</span><span class="sxs-lookup"><span data-stu-id="96d11-173">Refer too[Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/) for hello latest information on which Office clients currently support modern authentication.</span></span> <span data-ttu-id="96d11-174">Questa pagina include anche collegamenti tooinstructions per abilitare l'autenticazione moderna su specifici Exchange Online e Skype for Business Online tenant.</span><span class="sxs-lookup"><span data-stu-id="96d11-174">That page also includes links tooinstructions for enabling modern authentication on specific Exchange Online and Skype for Business Online tenants.</span></span> <span data-ttu-id="96d11-175">L'autenticazione moderna è già abilitata per impostazione predefinita in SharePoint Online.</span><span class="sxs-lookup"><span data-stu-id="96d11-175">Modern authentication is already enabled by default in SharePoint Online.</span></span>

<span data-ttu-id="96d11-176">Restrizioni tenant è attualmente supportato dalle applicazioni di Office 365 basati su browser (hello SharePoint del portale di Office, Yammer, siti, Outlook sul hello Web, ecc.).</span><span class="sxs-lookup"><span data-stu-id="96d11-176">Tenant Restrictions is currently supported by Office 365 browser-based applications (hello Office Portal, Yammer, SharePoint sites, Outlook on hello Web, etc.).</span></span> <span data-ttu-id="96d11-177">Per i thick client come Outlook, Skype for Business, Word, Excel, PowerPoint e così via, Restrizioni dei tenant può essere applicata solo quando si usa l'autenticazione moderna.</span><span class="sxs-lookup"><span data-stu-id="96d11-177">For thick clients (Outlook, Skype for Business, Word, Excel, PowerPoint, etc.) Tenant Restrictions can only be enforced when modern authentication is used.</span></span>  

<span data-ttu-id="96d11-178">Outlook e Skype per i client di Business che supportano l'autenticazione moderna sono comunque toouse protocolli legacy contro i tenant in cui non è abilitata l'autenticazione moderna, in modo efficace ignorando le restrizioni di Tenant.</span><span class="sxs-lookup"><span data-stu-id="96d11-178">Outlook and Skype for Business clients that support modern authentication are still able toouse legacy protocols against tenants where modern authentication is not enabled, effectively bypassing Tenant Restrictions.</span></span> <span data-ttu-id="96d11-179">Per Outlook su Windows, i clienti possono scegliere restrizioni tooimplement impedire agli utenti finali di aggiungere non approvato account tootheir profili di posta elettronica.</span><span class="sxs-lookup"><span data-stu-id="96d11-179">For Outlook on Windows, customers may choose tooimplement restrictions preventing end users from adding non-approved mail accounts tootheir profiles.</span></span> <span data-ttu-id="96d11-180">Ad esempio, vedere hello [impedisce l'aggiunta di account di Exchange non predefinito](http://gpsearch.azurewebsites.net/default.aspx?ref=1) impostazione di criteri di gruppo.</span><span class="sxs-lookup"><span data-stu-id="96d11-180">For example, see hello [Prevent adding non-default Exchange accounts](http://gpsearch.azurewebsites.net/default.aspx?ref=1) group policy setting.</span></span> <span data-ttu-id="96d11-181">Per Outlook su piattaforme non Windows e per Skype for Business su tutte le piattaforme, il supporto completo per le restrizioni del tenant non è attualmente disponibile.</span><span class="sxs-lookup"><span data-stu-id="96d11-181">For Outlook on non-Windows platforms, and for Skype for Business on all platforms, full support for Tenant Restrictions is not currently available.</span></span>

## <a name="testing"></a><span data-ttu-id="96d11-182">Test</span><span class="sxs-lookup"><span data-stu-id="96d11-182">Testing</span></span>

<span data-ttu-id="96d11-183">Se si desidera tootry le restrizioni di Tenant prima di implementarlo per l'intera organizzazione, sono disponibili due opzioni: un approccio basato su host utilizzando uno strumento come Fiddler o un'implementazione per fasi delle impostazioni del proxy.</span><span class="sxs-lookup"><span data-stu-id="96d11-183">If you want tootry out Tenant Restrictions before implementing it for your whole organization, there are two options: a host-based approach using a tool like Fiddler, or a staged rollout of proxy settings.</span></span>

### <a name="fiddler-for-a-host-based-approach"></a><span data-ttu-id="96d11-184">Fiddler per un approccio basato su host</span><span class="sxs-lookup"><span data-stu-id="96d11-184">Fiddler for a host-based approach</span></span>

<span data-ttu-id="96d11-185">Fiddler è un proxy che possono essere utilizzati toocapture e modificano il traffico HTTP/HTTPS, tra cui l'inserimento di intestazioni HTTP per debug gratuitamente dal web.</span><span class="sxs-lookup"><span data-stu-id="96d11-185">Fiddler is a free web debugging proxy that can be used toocapture and modify HTTP/HTTPS traffic, including inserting HTTP headers.</span></span> <span data-ttu-id="96d11-186">tooconfigure Fiddler tootest restrizioni Tenant, eseguire hello alla procedura seguente:</span><span class="sxs-lookup"><span data-stu-id="96d11-186">tooconfigure Fiddler tootest Tenant Restrictions, perform hello following steps:</span></span>

1.  <span data-ttu-id="96d11-187">[Scaricare e installare Fiddler](http://www.telerik.com/fiddler).</span><span class="sxs-lookup"><span data-stu-id="96d11-187">[Download and install Fiddler](http://www.telerik.com/fiddler).</span></span>
2.  <span data-ttu-id="96d11-188">Configurare il traffico HTTPS toodecrypt Fiddler, per ogni [documentazione della Guida di Fiddler](http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/DecryptHTTPS).</span><span class="sxs-lookup"><span data-stu-id="96d11-188">Configure Fiddler toodecrypt HTTPS traffic, per [Fiddler’s help documentation](http://docs.telerik.com/fiddler/Configure-Fiddler/Tasks/DecryptHTTPS).</span></span>
3.  <span data-ttu-id="96d11-189">Configurare hello tooinsert Fiddler *limitare l'accesso al tenant* e *contesto di limitare l'accesso* intestazioni usando le regole personalizzate:</span><span class="sxs-lookup"><span data-stu-id="96d11-189">Configure Fiddler tooinsert hello *Restrict-Access-To-Tenants* and *Restrict-Access-Context* headers using custom rules:</span></span>
  1. <span data-ttu-id="96d11-190">Nello strumento Debugger Web Fiddler hello selezionare hello **regole** dal menu **personalizzare le regole...**</span><span class="sxs-lookup"><span data-stu-id="96d11-190">In hello Fiddler Web Debugger tool, select hello **Rules** menu and select **Customize Rules…**</span></span> <span data-ttu-id="96d11-191">file di CustomRules tooopen hello.</span><span class="sxs-lookup"><span data-stu-id="96d11-191">tooopen hello CustomRules file.</span></span>
  2. <span data-ttu-id="96d11-192">Aggiungere hello seguenti righe all'inizio di hello di hello *OnBeforeRequest* (funzione).</span><span class="sxs-lookup"><span data-stu-id="96d11-192">Add hello following lines at hello beginning of hello *OnBeforeRequest* function.</span></span> <span data-ttu-id="96d11-193">Sostituire il \<dominio del tenant\> con un dominio registrato con il proprio tenant, ad esempio contoso.onmicrosoft.com. Sostituire \<l'ID della directory\> con l'identificatore GUID di Azure AD del proprio tenant.</span><span class="sxs-lookup"><span data-stu-id="96d11-193">Replace \<tenant domain\> with a domain registered with your tenant, for example, contoso.onmicrosoft.com. Replace \<directory ID\> with your tenant's Azure AD GUID identifier.</span></span>

  ```
  if (oSession.HostnameIs("login.microsoftonline.com") || oSession.HostnameIs("login.microsoft.com") || oSession.HostnameIs("login.windows.net")){      oSession.oRequest["Restrict-Access-To-Tenants"] = "<tenant domain>";      oSession.oRequest["Restrict-Access-Context"] = "<directory ID>";}
  ```

  <span data-ttu-id="96d11-194">Se è necessario tooallow più tenant, usare un nome di tenant hello tooseparate valori delimitati da virgole.</span><span class="sxs-lookup"><span data-stu-id="96d11-194">If you need tooallow multiple tenants, use a comma tooseparate hello tenant names.</span></span> <span data-ttu-id="96d11-195">ad esempio:</span><span class="sxs-lookup"><span data-stu-id="96d11-195">For example:</span></span>

  ```
  oSession.oRequest["Restrict-Access-To-Tenants"] = "contoso.onmicrosoft.com,fabrikam.onmicrosoft.com";
  ```

4. <span data-ttu-id="96d11-196">Salvare e chiudere file CustomRules hello.</span><span class="sxs-lookup"><span data-stu-id="96d11-196">Save and close hello CustomRules file.</span></span>

<span data-ttu-id="96d11-197">Dopo aver configurato Fiddler, è possibile acquisire il traffico da passare toohello **File** menu e selezionando **acquisire il traffico**.</span><span class="sxs-lookup"><span data-stu-id="96d11-197">After you configure Fiddler, you can capture traffic by going toohello **File** menu and selecting **Capture Traffic**.</span></span>

### <a name="staged-rollout-of-proxy-settings"></a><span data-ttu-id="96d11-198">Implementazione per fasi delle impostazioni del proxy</span><span class="sxs-lookup"><span data-stu-id="96d11-198">Staged rollout of proxy settings</span></span>

<span data-ttu-id="96d11-199">A seconda delle funzionalità di hello dell'infrastruttura di proxy, potrebbe essere implementazione hello toostage in grado di impostazioni tooyour che gli utenti.</span><span class="sxs-lookup"><span data-stu-id="96d11-199">Depending on hello capabilities of your proxy infrastructure, you may be able toostage hello rollout of settings tooyour users.</span></span> <span data-ttu-id="96d11-200">Di seguito sono indicate due opzioni generali da tenere in considerazione:</span><span class="sxs-lookup"><span data-stu-id="96d11-200">Here are a couple high-level options for consideration:</span></span>

1.  <span data-ttu-id="96d11-201">Utilizzare PAC file toopoint test utenti tooa test infrastruttura del proxy, dall'infrastruttura del proxy toouse hello produzione mentre agli utenti normali.</span><span class="sxs-lookup"><span data-stu-id="96d11-201">Use PAC files toopoint test users tooa test proxy infrastructure, while normal users continue toouse hello production proxy infrastructure.</span></span>
2.  <span data-ttu-id="96d11-202">Alcuni server proxy possono supportare configurazioni diverse usando i gruppi.</span><span class="sxs-lookup"><span data-stu-id="96d11-202">Some proxy servers may support different configurations using groups.</span></span>

<span data-ttu-id="96d11-203">Consultare la documentazione del server proxy tooyour per informazioni dettagliate.</span><span class="sxs-lookup"><span data-stu-id="96d11-203">Refer tooyour proxy server documentation for specific details.</span></span>

## <a name="next-steps"></a><span data-ttu-id="96d11-204">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="96d11-204">Next steps</span></span>

- <span data-ttu-id="96d11-205">Informazioni sull'[autenticazione moderna aggiornata di Office 365](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/)</span><span class="sxs-lookup"><span data-stu-id="96d11-205">Read about [Updated Office 365 modern authentication](https://blogs.office.com/2015/11/19/updated-office-365-modern-authentication-public-preview/)</span></span>

- <span data-ttu-id="96d11-206">Hello revisione [gli intervalli di indirizzi IP e gli URL di Office 365](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2)</span><span class="sxs-lookup"><span data-stu-id="96d11-206">Review hello [Office 365 URLs and IP address ranges](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2)</span></span>
