---
title: Supporto di condivisione delle risorse multiorigine (CORS) | Microsoft Docs
description: Informazioni su come attivare il supporto CORS per i servizi di archiviazione di Microsoft Azure.
services: storage
documentationcenter: .net
author: cbrooksmsft
manager: carmonm
editor: tysonn
ms.assetid: a0229595-5b64-4898-b8d6-fa2625ea6887
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 2/22/2017
ms.author: cbrooks
ms.openlocfilehash: 8d189d3ec3e6081dd37b912824f287cd75f39b35
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="cross-origin-resource-sharing-cors-support-for-the-azure-storage-services"></a><span data-ttu-id="875f6-103">Supporto di condivisione delle risorse multiorigine (CORS) per i servizi di archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="875f6-103">Cross-Origin Resource Sharing (CORS) Support for the Azure Storage Services</span></span>
<span data-ttu-id="875f6-104">A partire dalla versione del 15 agosto 2013, i servizi di archiviazione di Azure supportano la condivisione risorse tra le origini (CORS) per i servizi BLOB, tabelle, code e file.</span><span class="sxs-lookup"><span data-stu-id="875f6-104">Beginning with version 2013-08-15, the Azure storage services support Cross-Origin Resource Sharing (CORS) for the Blob, Table, Queue, and File services.</span></span> <span data-ttu-id="875f6-105">CORS è una funzionalità HTTP che consente a un'applicazione Web in esecuzione in un dominio di accedere alle risorse in un altro dominio.</span><span class="sxs-lookup"><span data-stu-id="875f6-105">CORS is an HTTP feature that enables a web application running under one domain to access resources in another domain.</span></span> <span data-ttu-id="875f6-106">Nei browser Web è implementata una restrizione di sicurezza nota come [criterio della stessa origine](http://www.w3.org/Security/wiki/Same_Origin_Policy) che impedisce a una pagina Web di chiamare API in un dominio differente. CORS offre una modalità sicura per consentire a un dominio (quello di origine) di chiamare API in un altro dominio.</span><span class="sxs-lookup"><span data-stu-id="875f6-106">Web browsers implement a security restriction known as [same-origin policy](http://www.w3.org/Security/wiki/Same_Origin_Policy) that prevents a web page from calling APIs in a different domain; CORS provides a secure way to allow one domain (the origin domain) to call APIs in another domain.</span></span> <span data-ttu-id="875f6-107">Per altri dettagli su CORS, vedere la [specifica CORS](http://www.w3.org/TR/cors/).</span><span class="sxs-lookup"><span data-stu-id="875f6-107">See the [CORS specification](http://www.w3.org/TR/cors/) for details on CORS.</span></span>

<span data-ttu-id="875f6-108">È possibile impostare regole CORS singolarmente per ogni servizio di archiviazione chiamando [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx) e [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="875f6-108">You can set CORS rules individually for each of the storage services, by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span> <span data-ttu-id="875f6-109">Una volta impostate le regole CORS per il servizio, una richiesta correttamente autenticata, eseguita al servizio e autenticata correttamente, verrà valutata per determinare se è consentita in base alle regole specificate.</span><span class="sxs-lookup"><span data-stu-id="875f6-109">Once you set the CORS rules for the service, then a properly authenticated request made against the service from a different domain will be evaluated to determine whether it is allowed according to the rules you have specified.</span></span>

> [!NOTE]
> <span data-ttu-id="875f6-110">CORS non è un meccanismo di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="875f6-110">Note that CORS is not an authentication mechanism.</span></span> <span data-ttu-id="875f6-111">Qualsiasi richiesta eseguita a una risorsa di archiviazione quando è abilitata la condivisione CORS deve disporre di una firma di autenticazione appropriata o deve essere eseguita su una risorsa pubblica.</span><span class="sxs-lookup"><span data-stu-id="875f6-111">Any request made against a storage resource when CORS is enabled must either have a proper authentication signature, or must be made against a public resource.</span></span>
> 
> 

## <a name="understanding-cors-requests"></a><span data-ttu-id="875f6-112">Informazioni sulle richieste CORS</span><span class="sxs-lookup"><span data-stu-id="875f6-112">Understanding CORS requests</span></span>
<span data-ttu-id="875f6-113">Una richiesta CORS proveniente da un dominio di origine può essere costituita da due richieste distinte:</span><span class="sxs-lookup"><span data-stu-id="875f6-113">A CORS request from an origin domain may consist of two separate requests:</span></span>

* <span data-ttu-id="875f6-114">Una richiesta preliminare, che esegue query sulle restrizioni di CORS imposte dal servizio.</span><span class="sxs-lookup"><span data-stu-id="875f6-114">A preflight request, which queries the CORS restrictions imposed by the service.</span></span> <span data-ttu-id="875f6-115">La richiesta preliminare è obbligatoria, a meno che il metodo di richiesta sia un [metodo semplice](http://www.w3.org/TR/cors/), ovvero GET, HEAD o POST.</span><span class="sxs-lookup"><span data-stu-id="875f6-115">The preflight request is required unless the request method is a [simple method](http://www.w3.org/TR/cors/), meaning GET, HEAD, or POST.</span></span>
* <span data-ttu-id="875f6-116">La richiesta effettiva, effettuata alla risorsa desiderata.</span><span class="sxs-lookup"><span data-stu-id="875f6-116">The actual request, made against the desired resource.</span></span>

### <a name="preflight-request"></a><span data-ttu-id="875f6-117">Richiesta preliminare</span><span class="sxs-lookup"><span data-stu-id="875f6-117">Preflight request</span></span>
<span data-ttu-id="875f6-118">La richiesta preliminare esegue una query sulle restrizioni per la condivisione CORS definite per il servizio di archiviazione dal proprietario dell'account.</span><span class="sxs-lookup"><span data-stu-id="875f6-118">The preflight request queries the CORS restrictions that have been established for the storage service by the account owner.</span></span> <span data-ttu-id="875f6-119">Dal Web browser (o da altro agente utente) viene inviata una richiesta OPTIONS che include le intestazioni della richiesta, il metodo e il dominio di origine.</span><span class="sxs-lookup"><span data-stu-id="875f6-119">The web browser (or other user agent) sends an OPTIONS request that includes the request headers, method and origin domain.</span></span> <span data-ttu-id="875f6-120">Il servizio di archiviazione valuta l'operazione desiderata in base a un set di regole preconfigurate per la condivisione CORS, che specificano quali domini di origine, metodi e intestazioni di richiesta possono essere specificati in una richiesta effettiva a una risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="875f6-120">The storage service evaluates the intended operation based on a pre-configured set of CORS rules that specify which origin domains, request methods, and request headers may be specified on an actual request against a storage resource.</span></span>

<span data-ttu-id="875f6-121">Se la condivisione CORS è abilitata per il servizio ed è presente una regola CORS che corrisponde alla richiesta preliminare, il servizio risponde con il codice di stato 200 (OK) e include nella risposta le intestazioni Access-Control obbligatorie.</span><span class="sxs-lookup"><span data-stu-id="875f6-121">If CORS is enabled for the service and there is a CORS rule that matches the preflight request, the service responds with status code 200 (OK), and includes the required Access-Control headers in the response.</span></span>

<span data-ttu-id="875f6-122">Se la condivisione CORS non è abilitata per il servizio o non è presente alcuna regola CORS corrispondente alla richiesta preliminare, il servizio risponderà con il codice di stato 403 (Accesso negato).</span><span class="sxs-lookup"><span data-stu-id="875f6-122">If CORS is not enabled for the service or no CORS rule matches the preflight request, the service will respond with status code 403 (Forbidden).</span></span>

<span data-ttu-id="875f6-123">Se nella richiesta OPTIONS non sono contenute le intestazioni CORS obbligatorie (intestazioni Origin e Access-Control-Request-Method), il servizio risponderà con un codice di stato 400 (Richiesta non valida).</span><span class="sxs-lookup"><span data-stu-id="875f6-123">If the OPTIONS request doesn't contain the required CORS headers (the Origin and Access-Control-Request-Method headers), the service will respond with status code 400 (Bad request).</span></span>

<span data-ttu-id="875f6-124">La richiesta preliminare viene valutata rispetto al servizio (BLOB, coda e tabella) e non rispetto alla risorsa richiesta.</span><span class="sxs-lookup"><span data-stu-id="875f6-124">Note that a preflight request is evaluated against the service (Blob, Queue, and Table) and not against the requested resource.</span></span> <span data-ttu-id="875f6-125">Affinché la richiesta abbia esito positivo, il proprietario dell'account deve aver abilitato la condivisione CORS come parte delle proprietà del servizio account.</span><span class="sxs-lookup"><span data-stu-id="875f6-125">The account owner must have enabled CORS as part of the account service properties in order for the request to succeed.</span></span>

### <a name="actual-request"></a><span data-ttu-id="875f6-126">Richiesta effettiva</span><span class="sxs-lookup"><span data-stu-id="875f6-126">Actual request</span></span>
<span data-ttu-id="875f6-127">Una volta che la richiesta preliminare viene accettata e viene restituita la risposta, il browser invierà la richiesta effettiva alla risorsa di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="875f6-127">Once the preflight request is accepted and the response is returned, the browser will dispatch the actual request against the storage resource.</span></span> <span data-ttu-id="875f6-128">Se la richiesta preliminare viene rifiutata, il browser negherà immediatamente la richiesta effettiva.</span><span class="sxs-lookup"><span data-stu-id="875f6-128">The browser will deny the actual request immediately if the preflight request is rejected.</span></span>

<span data-ttu-id="875f6-129">La richiesta effettiva viene trattata come una normale richiesta al servizio di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="875f6-129">The actual request is treated as normal request against the storage service.</span></span> <span data-ttu-id="875f6-130">La presenza dell'intestazione di origine indica che si tratta di una richiesta CORS e che il servizio controllerà le corrispondenti regole CORS.</span><span class="sxs-lookup"><span data-stu-id="875f6-130">The presence of the Origin header indicates that the request is a CORS request and the service will check the matching CORS rules.</span></span> <span data-ttu-id="875f6-131">Se viene rilevata una corrispondenza, le intestazioni Access-Control vengono aggiunte alla risposta e inviate di nuovo al client.</span><span class="sxs-lookup"><span data-stu-id="875f6-131">If a match is found, the Access-Control headers are added to the response and sent back to the client.</span></span> <span data-ttu-id="875f6-132">In caso contrario, le intestazioni Access-Control CORS non vengono restituite.</span><span class="sxs-lookup"><span data-stu-id="875f6-132">If a match is not found, the CORS Access-Control headers are not returned.</span></span>

## <a name="enabling-cors-for-the-azure-storage-services"></a><span data-ttu-id="875f6-133">Abilitazione della condivisione CORS per i servizi di archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="875f6-133">Enabling CORS for the Azure Storage services</span></span>
<span data-ttu-id="875f6-134">Le regole CORS vengono impostate a livello di servizio, pertanto è necessario abilitare o disabilitare la condivisione CORS separatamente per ciascun servizio (BLOB, coda e tabella).</span><span class="sxs-lookup"><span data-stu-id="875f6-134">CORS rules are set at the service level, so you need to enable or disable CORS for each service (Blob, Queue and Table) separately.</span></span> <span data-ttu-id="875f6-135">Per impostazione predefinita, la condivisione CORS è disabilitata per ciascun servizio.</span><span class="sxs-lookup"><span data-stu-id="875f6-135">By default, CORS is disabled for each service.</span></span> <span data-ttu-id="875f6-136">Per abilitare la condivisione CORS, è necessario definire le proprietà del servizio appropriate, tramite la versione del 15 agosto 2013 o successive e aggiungere le regole CORS alle proprietà del servizio.</span><span class="sxs-lookup"><span data-stu-id="875f6-136">To enable CORS, you need to set the appropriate service properties using version 2013-08-15 or later, and add CORS rules to the service properties.</span></span> <span data-ttu-id="875f6-137">Per informazioni su come abilitare o disabilitare la condivisione CORS per un servizio e su come impostare le relative regole, fare riferimento a [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx) e [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="875f6-137">For details about how to enable or disable CORS for a service and how to set CORS rules, please refer to [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span>

<span data-ttu-id="875f6-138">Di seguito è riportato un esempio di una regola CORS singola, specificata tramite un'operazione Set Service Properties:</span><span class="sxs-lookup"><span data-stu-id="875f6-138">Here is a sample of a single CORS rule, specified via a Set Service Properties operation:</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="875f6-139">Ciascun elemento incluso nella regola CORS è descritto di seguito:</span><span class="sxs-lookup"><span data-stu-id="875f6-139">Each element included in the CORS rule is described below:</span></span>

* <span data-ttu-id="875f6-140">**AllowedOrigins**: domini di origine ai quali è consentito effettuare una richiesta al servizio di archiviazione tramite condivisione CORS.</span><span class="sxs-lookup"><span data-stu-id="875f6-140">**AllowedOrigins**: The origin domains that are permitted to make a request against the storage service via CORS.</span></span> <span data-ttu-id="875f6-141">Il dominio di origine è quello da cui proviene la richiesta.</span><span class="sxs-lookup"><span data-stu-id="875f6-141">The origin domain is the domain from which the request originates.</span></span> <span data-ttu-id="875f6-142">L'origine deve corrispondere esattamente, anche con distinzione tra maiuscole e minuscole, all'origine inviata al servizio dall'agente utente.</span><span class="sxs-lookup"><span data-stu-id="875f6-142">Note that the origin must be an exact case-sensitive match with the origin that the user age sends to the service.</span></span> <span data-ttu-id="875f6-143">È inoltre possibile utilizzare il carattere jolly '*' per consentire a tutti i domini di origine di effettuare richieste tramite condivisione CORS.</span><span class="sxs-lookup"><span data-stu-id="875f6-143">You can also use the wildcard character '*' to allow all origin domains to make requests via CORS.</span></span> <span data-ttu-id="875f6-144">Nell'esempio precedente, ai domini [http://www.contoso.com](http://www.contoso.com) e [http://www.fabrikam.com](http://www.fabrikam.com) è consentito eseguire richieste al servizio tramite la condivisione CORS.</span><span class="sxs-lookup"><span data-stu-id="875f6-144">In the example above, the domains [http://www.contoso.com](http://www.contoso.com) and [http://www.fabrikam.com](http://www.fabrikam.com) can make requests against the service using CORS.</span></span>
* <span data-ttu-id="875f6-145">**AllowedMethods**: metodi (verbi di richiesta HTTP) che possono essere utilizzati dal dominio di origine per una richiesta CORS.</span><span class="sxs-lookup"><span data-stu-id="875f6-145">**AllowedMethods**: The methods (HTTP request verbs) that the origin domain may use for a CORS request.</span></span> <span data-ttu-id="875f6-146">Nell'esempio precedente, sono consentite solo le richieste PUT e GET.</span><span class="sxs-lookup"><span data-stu-id="875f6-146">In the example above, only PUT and GET requests are permitted.</span></span>
* <span data-ttu-id="875f6-147">**AllowedHeaders**: intestazioni di richiesta che possono essere specificate dal dominio di origine nella richiesta CORS.</span><span class="sxs-lookup"><span data-stu-id="875f6-147">**AllowedHeaders**: The request headers that the origin domain may specify on the CORS request.</span></span> <span data-ttu-id="875f6-148">Nell'esempio precedente, sono consentite tutte le intestazioni di metadati che iniziano con x-ms-meta-data, x-ms-meta-target e x-ms-meta-abc.</span><span class="sxs-lookup"><span data-stu-id="875f6-148">In the example above, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="875f6-149">Il carattere jolly "*" indica che è consentita qualsiasi intestazione che inizi col prefisso specificato.</span><span class="sxs-lookup"><span data-stu-id="875f6-149">Note that the wildcard character '*' indicates that any header beginning with the specified prefix is allowed.</span></span>
* <span data-ttu-id="875f6-150">**ExposedHeaders**: intestazioni di risposta che possono essere inviate in risposta alla richiesta CORS ed esposte al richiedente dal browser.</span><span class="sxs-lookup"><span data-stu-id="875f6-150">**ExposedHeaders**: The response headers that may be sent in the response to the CORS request and exposed by the browser to the request issuer.</span></span> <span data-ttu-id="875f6-151">Nell'esempio precedente, al browser viene indicato di esporre qualsiasi intestazione che inizi con x-ms-meta.</span><span class="sxs-lookup"><span data-stu-id="875f6-151">In the example above, the browser is instructed to expose any header beginning with x-ms-meta.</span></span>
* <span data-ttu-id="875f6-152">**MaxAgeInSeconds**: quantità di tempo massima in cui la richiesta preliminare OPTIONS deve essere memorizzata nella cache di un browser.</span><span class="sxs-lookup"><span data-stu-id="875f6-152">**MaxAgeInSeconds**: The maximum amount time that a browser should cache the preflight OPTIONS request.</span></span>

<span data-ttu-id="875f6-153">I servizi di archiviazione di Azure supportano la specifica di intestazioni con prefisso sia per gli elementi **AllowedHeaders**, sia per gli elementi **ExposedHeaders**.</span><span class="sxs-lookup"><span data-stu-id="875f6-153">The Azure storage services support specifying prefixed headers for both the **AllowedHeaders** and **ExposedHeaders** elements.</span></span> <span data-ttu-id="875f6-154">Per consentire una categoria di intestazioni, è possibile specificare un prefisso comune a tale categoria.</span><span class="sxs-lookup"><span data-stu-id="875f6-154">To allow a category of headers, you can specify a common prefix to that category.</span></span> <span data-ttu-id="875f6-155">Ad esempio, specificando *x-ms-meta** come intestazione con prefisso, viene impostata una regola corrispondente a tutte le intestazioni che iniziano con x-ms-meta.</span><span class="sxs-lookup"><span data-stu-id="875f6-155">For example, specifying *x-ms-meta** as a prefixed header establishes a rule that will match all headers that begin with x-ms-meta.</span></span>

<span data-ttu-id="875f6-156">Alle regole CORS vengono applicate le limitazioni seguenti:</span><span class="sxs-lookup"><span data-stu-id="875f6-156">The following limitations apply to CORS rules:</span></span>

* <span data-ttu-id="875f6-157">È possibile specificare un massimo di cinque regole CORS per servizio di archiviazione (BLOB, tabella e coda).</span><span class="sxs-lookup"><span data-stu-id="875f6-157">You can specify up to five CORS rules per storage service (Blob, Table, and Queue).</span></span>
* <span data-ttu-id="875f6-158">Le dimensioni massime di tutte le impostazioni delle regole CORS nella richiesta, esclusi i tag XML, non devono superare i 2 KB.</span><span class="sxs-lookup"><span data-stu-id="875f6-158">The maximum size of all CORS rules settings on the request, excluding XML tags, should not exceed 2 KB.</span></span>
* <span data-ttu-id="875f6-159">La lunghezza di un'intestazione consentita, di un'intestazione esposta o di un'origine consentita non deve superare 256 caratteri.</span><span class="sxs-lookup"><span data-stu-id="875f6-159">The length of an allowed header, exposed header, or allowed origin should not exceed 256 characters.</span></span>
* <span data-ttu-id="875f6-160">Le intestazioni consentite e quelle esposte possono essere:</span><span class="sxs-lookup"><span data-stu-id="875f6-160">Allowed headers and exposed headers may be either:</span></span>
  * <span data-ttu-id="875f6-161">Intestazioni letterali, per cui viene fornito il nome esatto dell'intestazione, ad esempio **x-ms-meta-processed**.</span><span class="sxs-lookup"><span data-stu-id="875f6-161">Literal headers, where the exact header name is provided, such as **x-ms-meta-processed**.</span></span> <span data-ttu-id="875f6-162">Nella richiesta è possibile specificare un massimo di 64 intestazioni letterali.</span><span class="sxs-lookup"><span data-stu-id="875f6-162">A maximum of 64 literal headers may be specified on the request.</span></span>
  * <span data-ttu-id="875f6-163">Intestazioni con prefisso, per cui viene fornito un prefisso dell'intestazione, ad esempio **x-ms-meta-data***.</span><span class="sxs-lookup"><span data-stu-id="875f6-163">Prefixed headers, where a prefix of the header is provided, such as **x-ms-meta-data***.</span></span> <span data-ttu-id="875f6-164">Specificando un prefisso in questo modo, si consente o si espone qualsiasi intestazione che inizi con il prefisso specificato.</span><span class="sxs-lookup"><span data-stu-id="875f6-164">Specifying a prefix in this manner allows or exposes any header that begins with the given prefix.</span></span> <span data-ttu-id="875f6-165">Nella richiesta è possibile specificare un massimo di due intestazioni con prefisso.</span><span class="sxs-lookup"><span data-stu-id="875f6-165">A maximum of two prefixed headers may be specified on the request.</span></span>
* <span data-ttu-id="875f6-166">I metodi (o verbi HTTP) specificati nell'elemento **AllowedMethods** devono essere conformi ai metodi supportati dalle API del servizio di archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="875f6-166">The methods (or HTTP verbs) specified in the **AllowedMethods** element must conform to the methods supported by Azure storage service APIs.</span></span> <span data-ttu-id="875f6-167">I metodi supportati sono DELETE, GET, HEAD, MERGE, POST, OPTIONS e PUT.</span><span class="sxs-lookup"><span data-stu-id="875f6-167">Supported methods are DELETE, GET, HEAD, MERGE, POST, OPTIONS and PUT.</span></span>

## <a name="understanding-cors-rule-evaluation-logic"></a><span data-ttu-id="875f6-168">Informazioni sulla logica di valutazione delle regole CORS</span><span class="sxs-lookup"><span data-stu-id="875f6-168">Understanding CORS rule evaluation logic</span></span>
<span data-ttu-id="875f6-169">Quando il servizio di archiviazione riceve una richiesta preliminare o effettiva, la valuta in base alle regole CORS definite per il servizio tramite l'operazione Set Service Properties appropriata.</span><span class="sxs-lookup"><span data-stu-id="875f6-169">When a storage service receives a preflight or actual request, it evaluates that request based on the CORS rules you have established for the service via the appropriate Set Service Properties operation.</span></span> <span data-ttu-id="875f6-170">Le regole CORS vengono valutate nell'ordine in cui sono state impostate nel corpo della richiesta relativo all'operazione Set Service Properties.</span><span class="sxs-lookup"><span data-stu-id="875f6-170">CORS rules are evaluated in the order in which they were set in the request body of the Set Service Properties operation.</span></span>

<span data-ttu-id="875f6-171">Le regole CORS vengono valutate come segue:</span><span class="sxs-lookup"><span data-stu-id="875f6-171">CORS rules are evaluated as follows:</span></span>

1. <span data-ttu-id="875f6-172">In primo luogo, il dominio di origine della richiesta viene confrontato con i domini elencati per l'elemento **AllowedOrigins** .</span><span class="sxs-lookup"><span data-stu-id="875f6-172">First, the origin domain of the request is checked against the domains listed for the **AllowedOrigins** element.</span></span> <span data-ttu-id="875f6-173">Se il dominio di origine è incluso nell'elenco oppure tramite il carattere jolly "*" sono consentiti tutti i domini, la valutazione delle regole prosegue.</span><span class="sxs-lookup"><span data-stu-id="875f6-173">If the origin domain is included in the list, or all domains are allowed with the wildcard character '*', then rules evaluation proceeds.</span></span> <span data-ttu-id="875f6-174">Se il dominio di origine non è incluso, la richiesta ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="875f6-174">If the origin domain is not included, then the request fails.</span></span>
2. <span data-ttu-id="875f6-175">Successivamente, il metodo (o verbo HTTP) della richiesta viene confrontato con i metodi elencati nell'elemento **AllowedMethods** .</span><span class="sxs-lookup"><span data-stu-id="875f6-175">Next, the method (or HTTP verb) of the request is checked against the methods listed in the **AllowedMethods** element.</span></span> <span data-ttu-id="875f6-176">Se il metodo è incluso nell'elenco, la valutazione delle regole prosegue; in caso contrario, la richiesta ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="875f6-176">If the method is included in the list, then rules evaluation proceeds; if not, then the request fails.</span></span>
3. <span data-ttu-id="875f6-177">Se la richiesta corrisponde a una regola nel relativo dominio di origine e nel relativo metodo, tale regola viene selezionata per elaborare la richiesta e non ne vengono valutate altre.</span><span class="sxs-lookup"><span data-stu-id="875f6-177">If the request matches a rule in its origin domain and its method, that rule is selected to process the request and no further rules are evaluated.</span></span> <span data-ttu-id="875f6-178">Tuttavia, prima che la richiesta possa avere esito positivo, vengono controllate tutte le intestazioni specificate nella richiesta rispetto alle intestazioni elencate nell'elemento **AllowedHeaders** .</span><span class="sxs-lookup"><span data-stu-id="875f6-178">Before the request can succeed, however, any headers specified on the request are checked against the headers listed in the **AllowedHeaders** element.</span></span> <span data-ttu-id="875f6-179">Se le intestazioni inviate non corrispondono alle intestazioni consentite, la richiesta ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="875f6-179">If the headers sent do not match the allowed headers, the request fails.</span></span>

<span data-ttu-id="875f6-180">Poiché le regole vengono elaborate nell'ordine in cui si trovano nel corpo della richiesta, nell'elenco è consigliabile specificare in primo luogo le regole più restrittive, in modo che vengano valutate per prime.</span><span class="sxs-lookup"><span data-stu-id="875f6-180">Since the rules are processed in the order they are present in the request body, best practices recommend that you specify the most restrictive rules with respect to origins first in the list, so that these are evaluated first.</span></span> <span data-ttu-id="875f6-181">Specificare le regole meno restrittive (ad esempio, una regola che consente tutte le origini) alla fine dell'elenco.</span><span class="sxs-lookup"><span data-stu-id="875f6-181">Specify rules that are less restrictive – for example, a rule to allow all origins – at the end of the list.</span></span>

### <a name="example--cors-rules-evaluation"></a><span data-ttu-id="875f6-182">Esempio: valutazione di regole CORS</span><span class="sxs-lookup"><span data-stu-id="875f6-182">Example – CORS rules evaluation</span></span>
<span data-ttu-id="875f6-183">Nell'esempio seguente viene illustrato il corpo di una richiesta parziale per un'operazione di impostazione delle regole CORS per i servizi di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="875f6-183">The following example shows a partial request body for an operation to set CORS rules for the storage services.</span></span> <span data-ttu-id="875f6-184">Per informazioni dettagliate sulla costruzione della richiesta, vedere [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx) e [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="875f6-184">See [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx) for details on constructing the request.</span></span>

```xml
<Cors>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>PUT,HEAD</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>*</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-client-request-id</AllowedHeaders>
    </CorsRule>
</Cors>
```

<span data-ttu-id="875f6-185">Successivamente, considerare le seguenti richieste CORS:</span><span class="sxs-lookup"><span data-stu-id="875f6-185">Next, consider the following CORS requests:</span></span>

| <span data-ttu-id="875f6-186">Richiesta</span><span class="sxs-lookup"><span data-stu-id="875f6-186">Request</span></span> |  |  | <span data-ttu-id="875f6-187">Response</span><span class="sxs-lookup"><span data-stu-id="875f6-187">Response</span></span> |  |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="875f6-188">**Metodo**</span><span class="sxs-lookup"><span data-stu-id="875f6-188">**Method**</span></span> |<span data-ttu-id="875f6-189">**Origine**</span><span class="sxs-lookup"><span data-stu-id="875f6-189">**Origin**</span></span> |<span data-ttu-id="875f6-190">**Intestazioni della richiesta**</span><span class="sxs-lookup"><span data-stu-id="875f6-190">**Request Headers**</span></span> |<span data-ttu-id="875f6-191">**Corrispondenza regola**</span><span class="sxs-lookup"><span data-stu-id="875f6-191">**Rule Match**</span></span> |<span data-ttu-id="875f6-192">**Risultato**</span><span class="sxs-lookup"><span data-stu-id="875f6-192">**Result**</span></span> |
| <span data-ttu-id="875f6-193">**PUT**</span><span class="sxs-lookup"><span data-stu-id="875f6-193">**PUT**</span></span> |<span data-ttu-id="875f6-194">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="875f6-194">http://www.contoso.com</span></span> |<span data-ttu-id="875f6-195">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="875f6-195">x-ms-blob-content-type</span></span> |<span data-ttu-id="875f6-196">Prima regola</span><span class="sxs-lookup"><span data-stu-id="875f6-196">First rule</span></span> |<span data-ttu-id="875f6-197">Success</span><span class="sxs-lookup"><span data-stu-id="875f6-197">Success</span></span> |
| <span data-ttu-id="875f6-198">**GET**</span><span class="sxs-lookup"><span data-stu-id="875f6-198">**GET**</span></span> |<span data-ttu-id="875f6-199">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="875f6-199">http://www.contoso.com</span></span> |<span data-ttu-id="875f6-200">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="875f6-200">x-ms-blob-content-type</span></span> |<span data-ttu-id="875f6-201">Seconda regola</span><span class="sxs-lookup"><span data-stu-id="875f6-201">Second rule</span></span> |<span data-ttu-id="875f6-202">Success</span><span class="sxs-lookup"><span data-stu-id="875f6-202">Success</span></span> |
| <span data-ttu-id="875f6-203">**GET**</span><span class="sxs-lookup"><span data-stu-id="875f6-203">**GET**</span></span> |<span data-ttu-id="875f6-204">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="875f6-204">http://www.contoso.com</span></span> |<span data-ttu-id="875f6-205">x-ms-client-request-id</span><span class="sxs-lookup"><span data-stu-id="875f6-205">x-ms-client-request-id</span></span> |<span data-ttu-id="875f6-206">Seconda regola</span><span class="sxs-lookup"><span data-stu-id="875f6-206">Second rule</span></span> |<span data-ttu-id="875f6-207">Esito negativo</span><span class="sxs-lookup"><span data-stu-id="875f6-207">Failure</span></span> |

<span data-ttu-id="875f6-208">La prima richiesta corrisponde alla prima regola (il dominio di origine corrisponde alle origini consentite, il metodo corrisponde ai metodi consentiti e l'intestazione corrisponde alle intestazioni consentite), pertanto ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="875f6-208">The first request matches the first rule – the origin domain matches the allowed origins, the method matches the allowed methods, and the header matches the allowed headers – and so succeeds.</span></span>

<span data-ttu-id="875f6-209">La seconda richiesta non corrisponde alla prima regola, perché il metodo non corrisponde ai metodi consentiti.</span><span class="sxs-lookup"><span data-stu-id="875f6-209">The second request does not match the first rule because the method does not match the allowed methods.</span></span> <span data-ttu-id="875f6-210">Tuttavia corrisponde alla seconda regola, pertanto ha esito positivo.</span><span class="sxs-lookup"><span data-stu-id="875f6-210">It does, however, match the second rule, so it succeeds.</span></span>

<span data-ttu-id="875f6-211">La terza richiesta corrisponde alla seconda regola nel relativo metodo e dominio di origine, pertanto non vengono valutate altre regole.</span><span class="sxs-lookup"><span data-stu-id="875f6-211">The third request matches the second rule in its origin domain and method, so no further rules are evaluated.</span></span> <span data-ttu-id="875f6-212">Tuttavia, l' *intestazione x-ms-client-request-id* non è consentita dalla seconda regola, quindi la richiesta ha esito negativo, anche se la semantica della terza regola ne avrebbe consentito l'esito positivo.</span><span class="sxs-lookup"><span data-stu-id="875f6-212">However, the *x-ms-client-request-id header* is not allowed by the second rule, so the request fails, despite the fact that the semantics of the third rule would have allowed it to succeed.</span></span>

> [!NOTE]
> <span data-ttu-id="875f6-213">Sebbene nell'esempio sia riportata una regola meno restrittiva prima di una più restrittiva, in generale è consigliabile elencare prima le regole più restrittive.</span><span class="sxs-lookup"><span data-stu-id="875f6-213">Although this example shows a less restrictive rule before a more restrictive one, in general the best practice is to list the most restrictive rules first.</span></span>
> 
> 

## <a name="understanding-how-the-vary-header-is-set"></a><span data-ttu-id="875f6-214">Informazioni sulla procedura per impostare l'intestazione Vary</span><span class="sxs-lookup"><span data-stu-id="875f6-214">Understanding how the Vary header is set</span></span>
<span data-ttu-id="875f6-215">*Vary* è un'intestazione standard HTTP/1.1 costituita da un set di campi di intestazione della richiesta che indicano al browser o all'agente utente i criteri selezionati dal server per l'elaborazione della richiesta.</span><span class="sxs-lookup"><span data-stu-id="875f6-215">The *Vary* header is a standard HTTP/1.1 header consisting of a set of request header fields that advise the browser or user agent about the criteria that were selected by the server to process the request.</span></span> <span data-ttu-id="875f6-216">L'intestazione *Vary* viene utilizzata principalmente per la memorizzazione nella cache da parte di proxy, browser e reti CDN, che la impiegano per determinare in che modo la risposta deve essere memorizzata nella cache.</span><span class="sxs-lookup"><span data-stu-id="875f6-216">The *Vary* header is mainly used for caching by proxies, browsers, and CDNs, which use it to determine how the response should be cached.</span></span> <span data-ttu-id="875f6-217">Per informazioni dettagliate, vedere la specifica dell' [intestazione Vary](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span><span class="sxs-lookup"><span data-stu-id="875f6-217">For details, see the specification for the [Vary header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span></span>

<span data-ttu-id="875f6-218">Quando la risposta a una richiesta CORS viene memorizzata nella cache dal browser o da un altro agente utente, il dominio di origine viene memorizzato nella cache come origine consentita.</span><span class="sxs-lookup"><span data-stu-id="875f6-218">When the browser or another user agent caches the response from a CORS request, the origin domain is cached as the allowed origin.</span></span> <span data-ttu-id="875f6-219">Se un secondo dominio invia la stessa richiesta per una risorsa di archiviazione mentre la cache è attiva, l'agente utente recupera il dominio di origine presente nella cache.</span><span class="sxs-lookup"><span data-stu-id="875f6-219">When a second domain issues the same request for a storage resource while the cache is active, the user agent retrieves the cached origin domain.</span></span> <span data-ttu-id="875f6-220">Il secondo dominio non corrisponde al dominio presente nella cache, pertanto l'esito della richiesta è negativo quando avrebbe potuto essere positivo.</span><span class="sxs-lookup"><span data-stu-id="875f6-220">The second domain does not match the cached domain, so the request fails when it would otherwise succeed.</span></span> <span data-ttu-id="875f6-221">In alcuni casi, nel servizio di archiviazione Azure l'intestazione Vary viene impostata su **Origin** per indicare all'agente utente di inviare la richiesta CORS successiva al servizio, quando il dominio della richiesta è diverso dall'origine memorizzata nella cache.</span><span class="sxs-lookup"><span data-stu-id="875f6-221">In certain cases, Azure Storage sets the Vary header to **Origin** to instruct the user agent to send the subsequent CORS request to the service when the requesting domain differs from the cached origin.</span></span>

<span data-ttu-id="875f6-222">Nel servizio di archiviazione di Azure l'intestazione *Vary* viene impostata su **Origin** per le richieste GET/HEAD effettive nei seguenti casi:</span><span class="sxs-lookup"><span data-stu-id="875f6-222">Azure Storage sets the *Vary* header to **Origin** for actual GET/HEAD requests in the following cases:</span></span>

* <span data-ttu-id="875f6-223">Quando l'origine della richiesta corrisponde esattamente all'origine consentita definita da una regola CORS.</span><span class="sxs-lookup"><span data-stu-id="875f6-223">When the request origin exactly matches the allowed origin defined by a CORS rule.</span></span> <span data-ttu-id="875f6-224">Affinché una corrispondenza sia esatta, la regola CORS non può includere il carattere jolly ' * '.</span><span class="sxs-lookup"><span data-stu-id="875f6-224">To be an exact match, the CORS rule may not include a wildcard ' * ' character.</span></span>
* <span data-ttu-id="875f6-225">Non esiste alcuna regola corrispondente all'origine della richiesta, ma la condivisione CORS è abilitata per il servizio di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="875f6-225">There is no rule matching the request origin, but CORS is enabled for the storage service.</span></span>

<span data-ttu-id="875f6-226">Se una richiesta GET/HEAD corrisponde a una regola CORS che consente tutte le origini, la risposta indica che tutte le origini sono consentite e, finché la cache resta attiva, la cache dell'agente utente consentirà le richieste successive provenienti da qualsiasi dominio di origine.</span><span class="sxs-lookup"><span data-stu-id="875f6-226">In the case where a GET/HEAD request matches a CORS rule that allows all origins, the response indicates that all origins are allowed, and the user agent cache will allow subsequent requests from any origin domain while the cache is active.</span></span>

<span data-ttu-id="875f6-227">Per le richieste che utilizzano metodi diversi da GET/HEAD, nei servizi di archiviazione non verrà impostata l'intestazione Vary, poiché le risposte a questi metodi non vengono memorizzate nella cache dagli agenti utente.</span><span class="sxs-lookup"><span data-stu-id="875f6-227">Note that for requests using methods other than GET/HEAD, the storage services will not set the Vary header, since responses to these methods are not cached by user agents.</span></span>

<span data-ttu-id="875f6-228">Nella tabella seguente viene indicata la risposta del servizio di archiviazione di Azure alle richieste GET/HEAD in base ai casi riportati in precedenza:</span><span class="sxs-lookup"><span data-stu-id="875f6-228">The following table indicates how Azure storage will respond to GET/HEAD requests based on the previously mentioned cases:</span></span>

| <span data-ttu-id="875f6-229">Richiesta</span><span class="sxs-lookup"><span data-stu-id="875f6-229">Request</span></span> | <span data-ttu-id="875f6-230">Impostazione account e risultato della valutazione della regola</span><span class="sxs-lookup"><span data-stu-id="875f6-230">Account setting and result of rule evaluation</span></span> |  |  | <span data-ttu-id="875f6-231">Response</span><span class="sxs-lookup"><span data-stu-id="875f6-231">Response</span></span> |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="875f6-232">**Intestazione di origine presente sulla richiesta**</span><span class="sxs-lookup"><span data-stu-id="875f6-232">**Origin header present on request**</span></span> |<span data-ttu-id="875f6-233">**Regole CORS specificate per questo servizio**</span><span class="sxs-lookup"><span data-stu-id="875f6-233">**CORS rule(s) specified for this service**</span></span> |<span data-ttu-id="875f6-234">**Presenza di una regola di corrispondenza che consente tutte le origini (*)**</span><span class="sxs-lookup"><span data-stu-id="875f6-234">**Matching rule exists that allows all origins(*)**</span></span> |<span data-ttu-id="875f6-235">**Presenza di una regola per l'esatta corrispondenza dell'origine**</span><span class="sxs-lookup"><span data-stu-id="875f6-235">**Matching rule exists for exact origin match**</span></span> |<span data-ttu-id="875f6-236">**Risposta che include l'intestazione Vary impostata su Origin**</span><span class="sxs-lookup"><span data-stu-id="875f6-236">**Response includes Vary header set to Origin**</span></span> |<span data-ttu-id="875f6-237">**Risposta che include Access-Control-Allowed-Origin: "*"**</span><span class="sxs-lookup"><span data-stu-id="875f6-237">**Response includes Access-Control-Allowed-Origin: "*"**</span></span> |<span data-ttu-id="875f6-238">**Risposta che include Access-Control-Exposed-Headers**</span><span class="sxs-lookup"><span data-stu-id="875f6-238">**Response includes Access-Control-Exposed-Headers**</span></span> |
| <span data-ttu-id="875f6-239">No</span><span class="sxs-lookup"><span data-stu-id="875f6-239">No</span></span> |<span data-ttu-id="875f6-240">No</span><span class="sxs-lookup"><span data-stu-id="875f6-240">No</span></span> |<span data-ttu-id="875f6-241">No</span><span class="sxs-lookup"><span data-stu-id="875f6-241">No</span></span> |<span data-ttu-id="875f6-242">No</span><span class="sxs-lookup"><span data-stu-id="875f6-242">No</span></span> |<span data-ttu-id="875f6-243">No</span><span class="sxs-lookup"><span data-stu-id="875f6-243">No</span></span> |<span data-ttu-id="875f6-244">No</span><span class="sxs-lookup"><span data-stu-id="875f6-244">No</span></span> |<span data-ttu-id="875f6-245">No</span><span class="sxs-lookup"><span data-stu-id="875f6-245">No</span></span> |
| <span data-ttu-id="875f6-246">No</span><span class="sxs-lookup"><span data-stu-id="875f6-246">No</span></span> |<span data-ttu-id="875f6-247">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-247">Yes</span></span> |<span data-ttu-id="875f6-248">No</span><span class="sxs-lookup"><span data-stu-id="875f6-248">No</span></span> |<span data-ttu-id="875f6-249">No</span><span class="sxs-lookup"><span data-stu-id="875f6-249">No</span></span> |<span data-ttu-id="875f6-250">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-250">Yes</span></span> |<span data-ttu-id="875f6-251">No</span><span class="sxs-lookup"><span data-stu-id="875f6-251">No</span></span> |<span data-ttu-id="875f6-252">No</span><span class="sxs-lookup"><span data-stu-id="875f6-252">No</span></span> |
| <span data-ttu-id="875f6-253">No</span><span class="sxs-lookup"><span data-stu-id="875f6-253">No</span></span> |<span data-ttu-id="875f6-254">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-254">Yes</span></span> |<span data-ttu-id="875f6-255">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-255">Yes</span></span> |<span data-ttu-id="875f6-256">No</span><span class="sxs-lookup"><span data-stu-id="875f6-256">No</span></span> |<span data-ttu-id="875f6-257">No</span><span class="sxs-lookup"><span data-stu-id="875f6-257">No</span></span> |<span data-ttu-id="875f6-258">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-258">Yes</span></span> |<span data-ttu-id="875f6-259">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-259">Yes</span></span> |
| <span data-ttu-id="875f6-260">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-260">Yes</span></span> |<span data-ttu-id="875f6-261">No</span><span class="sxs-lookup"><span data-stu-id="875f6-261">No</span></span> |<span data-ttu-id="875f6-262">No</span><span class="sxs-lookup"><span data-stu-id="875f6-262">No</span></span> |<span data-ttu-id="875f6-263">No</span><span class="sxs-lookup"><span data-stu-id="875f6-263">No</span></span> |<span data-ttu-id="875f6-264">No</span><span class="sxs-lookup"><span data-stu-id="875f6-264">No</span></span> |<span data-ttu-id="875f6-265">No</span><span class="sxs-lookup"><span data-stu-id="875f6-265">No</span></span> |<span data-ttu-id="875f6-266">No</span><span class="sxs-lookup"><span data-stu-id="875f6-266">No</span></span> |
| <span data-ttu-id="875f6-267">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-267">Yes</span></span> |<span data-ttu-id="875f6-268">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-268">Yes</span></span> |<span data-ttu-id="875f6-269">No</span><span class="sxs-lookup"><span data-stu-id="875f6-269">No</span></span> |<span data-ttu-id="875f6-270">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-270">Yes</span></span> |<span data-ttu-id="875f6-271">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-271">Yes</span></span> |<span data-ttu-id="875f6-272">No</span><span class="sxs-lookup"><span data-stu-id="875f6-272">No</span></span> |<span data-ttu-id="875f6-273">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-273">Yes</span></span> |
| <span data-ttu-id="875f6-274">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-274">Yes</span></span> |<span data-ttu-id="875f6-275">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-275">Yes</span></span> |<span data-ttu-id="875f6-276">No</span><span class="sxs-lookup"><span data-stu-id="875f6-276">No</span></span> |<span data-ttu-id="875f6-277">No</span><span class="sxs-lookup"><span data-stu-id="875f6-277">No</span></span> |<span data-ttu-id="875f6-278">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-278">Yes</span></span> |<span data-ttu-id="875f6-279">No</span><span class="sxs-lookup"><span data-stu-id="875f6-279">No</span></span> |<span data-ttu-id="875f6-280">No</span><span class="sxs-lookup"><span data-stu-id="875f6-280">No</span></span> |
| <span data-ttu-id="875f6-281">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-281">Yes</span></span> |<span data-ttu-id="875f6-282">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-282">Yes</span></span> |<span data-ttu-id="875f6-283">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-283">Yes</span></span> |<span data-ttu-id="875f6-284">No</span><span class="sxs-lookup"><span data-stu-id="875f6-284">No</span></span> |<span data-ttu-id="875f6-285">No</span><span class="sxs-lookup"><span data-stu-id="875f6-285">No</span></span> |<span data-ttu-id="875f6-286">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-286">Yes</span></span> |<span data-ttu-id="875f6-287">Sì</span><span class="sxs-lookup"><span data-stu-id="875f6-287">Yes</span></span> |

## <a name="billing-for-cors-requests"></a><span data-ttu-id="875f6-288">Fatturazione per le richieste CORS</span><span class="sxs-lookup"><span data-stu-id="875f6-288">Billing for CORS requests</span></span>
<span data-ttu-id="875f6-289">Le richieste preliminari con esito positivo vengono fatturate qualora la condivisione CORS sia stata abilitata per i servizi di archiviazione dell'account, chiamando [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx) o [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="875f6-289">Successful preflight requests are billed if you have enabled CORS for any of the storage services for your account (by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), or [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx)).</span></span> <span data-ttu-id="875f6-290">Per ridurre al minimo le spese, impostare l'elemento **MaxAgeInSeconds** nelle regole CORS su un valore elevato, in modo che la richiesta venga memorizzata nella cache dall'agente utente.</span><span class="sxs-lookup"><span data-stu-id="875f6-290">To minimize charges, consider setting the **MaxAgeInSeconds** element in your CORS rules to a large value so that the user agent caches the request.</span></span>

<span data-ttu-id="875f6-291">Le richieste preliminari con esito negativo non verranno fatturate.</span><span class="sxs-lookup"><span data-stu-id="875f6-291">Unsuccessful preflight requests will not be billed.</span></span>

## <a name="next-steps"></a><span data-ttu-id="875f6-292">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="875f6-292">Next steps</span></span>
[<span data-ttu-id="875f6-293">Set Blob Service Properties</span><span class="sxs-lookup"><span data-stu-id="875f6-293">Set Blob Service Properties</span></span>](https://msdn.microsoft.com/library/hh452235.aspx)

[<span data-ttu-id="875f6-294">Set Queue Service Properties</span><span class="sxs-lookup"><span data-stu-id="875f6-294">Set Queue Service Properties</span></span>](https://msdn.microsoft.com/library/hh452232.aspx)

[<span data-ttu-id="875f6-295">Set Table Service Properties</span><span class="sxs-lookup"><span data-stu-id="875f6-295">Set Table Service Properties</span></span>](https://msdn.microsoft.com/library/hh452240.aspx)

[<span data-ttu-id="875f6-296">Specifica del W3C relativa alla condivisione delle risorse multiorigine (CORS)</span><span class="sxs-lookup"><span data-stu-id="875f6-296">W3C Cross-Origin Resource Sharing Specification</span></span>](http://www.w3.org/TR/cors/)

