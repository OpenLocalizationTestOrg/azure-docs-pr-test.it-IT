---
title: "Risoluzione dei problemi di Archiviazione di Azure con le funzionalità di diagnostica e Message Analyzer | Documentazione Microsoft"
description: Esercitazione che illustra la risoluzione dei problemi end-to-end mediante Analisi archiviazione di Azure, AzCopy e Microsoft Message Analyzer
services: storage
documentationcenter: dotnet
author: robinsh
manager: timlt
ms.assetid: 6b23cba5-0d53-439e-870b-de8e406107d8
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 01/23/2017
ms.author: robinsh
ms.openlocfilehash: ca8c91ce4fe213d89c5bd10e86d5794be44f914b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="end-to-end-troubleshooting-using-azure-storage-metrics-and-logging-azcopy-and-message-analyzer"></a><span data-ttu-id="2118b-103">Risoluzione dei problemi end-to-end con le metriche e la registrazione di Archiviazione di Azure, AzCopy e Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="2118b-103">End-to-End Troubleshooting using Azure Storage metrics and logging, AzCopy, and Message Analyzer</span></span>
[!INCLUDE [storage-selector-portal-e2e-troubleshooting](../../includes/storage-selector-portal-e2e-troubleshooting.md)]

## <a name="overview"></a><span data-ttu-id="2118b-104">Panoramica</span><span class="sxs-lookup"><span data-stu-id="2118b-104">Overview</span></span>
<span data-ttu-id="2118b-105">Diagnostica e risoluzione dei problemi sono competenze fondamentali per la creazione e il supporto di applicazioni client con Archiviazione di Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-105">Diagnosing and troubleshooting is a key skill for building and supporting client applications with Microsoft Azure Storage.</span></span> <span data-ttu-id="2118b-106">Data la natura distribuita di un'applicazione Azure, la diagnostica e la risoluzione dei problemi di prestazioni possono risultare più complesse che in ambienti tradizionali.</span><span class="sxs-lookup"><span data-stu-id="2118b-106">Due to the distributed nature of an Azure application, diagnosing and troubleshooting errors and performance issues may be more complex than in traditional environments.</span></span>

<span data-ttu-id="2118b-107">In questa esercitazione viene illustrato come identificare alcuni errori che potrebbero influire sulle prestazioni e come risolverli in modo end-to-end usando gli strumenti forniti da Microsoft e Archiviazione di Azure, per ottimizzare l'applicazione client.</span><span class="sxs-lookup"><span data-stu-id="2118b-107">In this tutorial, we will demonstrate how to identify client certain errors that may affect performance, and troubleshoot those errors from end-to-end using tools provided by Microsoft and Azure Storage, in order to optimize the client application.</span></span>

<span data-ttu-id="2118b-108">Questa esercitazione offre un'esplorazione pratica di uno scenario di risoluzione dei problemi end-to-end.</span><span class="sxs-lookup"><span data-stu-id="2118b-108">This tutorial provides a hands-on exploration of an end-to-end troubleshooting scenario.</span></span> <span data-ttu-id="2118b-109">Per una guida approfondita sui concetti relativi alla risoluzione dei problemi delle applicazioni di archiviazione di Azure, vedere [Monitorare, diagnosticare e risolvere i problemi dell'Archiviazione di Microsoft Azure](storage-monitoring-diagnosing-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="2118b-109">For an in-depth conceptual guide to troubleshooting Azure storage applications, see [Monitor, diagnose, and troubleshoot Microsoft Azure Storage](storage-monitoring-diagnosing-troubleshooting.md).</span></span>

## <a name="tools-for-troubleshooting-azure-storage-applications"></a><span data-ttu-id="2118b-110">Strumenti per la risoluzione dei problemi delle applicazioni di archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="2118b-110">Tools for troubleshooting Azure Storage applications</span></span>
<span data-ttu-id="2118b-111">Per risolvere i problemi relativi alle applicazioni client mediante Archiviazione di Microsoft Azure, è possibile usare una combinazione di strumenti per determinare quando si è verificato un problema e quale potrebbe essere la sua causa.</span><span class="sxs-lookup"><span data-stu-id="2118b-111">To troubleshoot client applications using Microsoft Azure Storage, you can use a combination of tools to determine when an issue has occurred and what the cause of the problem may be.</span></span> <span data-ttu-id="2118b-112">Questi strumenti comprendono:</span><span class="sxs-lookup"><span data-stu-id="2118b-112">These tools include:</span></span>

* <span data-ttu-id="2118b-113">**Analisi archiviazione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="2118b-113">**Azure Storage Analytics**.</span></span> <span data-ttu-id="2118b-114">[Analisi archiviazione di Azure](http://msdn.microsoft.com/library/azure/hh343270.aspx) fornisce metriche e registrazioni per Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-114">[Azure Storage Analytics](http://msdn.microsoft.com/library/azure/hh343270.aspx) provides metrics and logging for Azure Storage.</span></span>

  * <span data-ttu-id="2118b-115">**metriche di archiviazione** tengono traccia delle metriche relative alle transazioni e alla capacità per l'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-115">**Storage metrics** tracks transaction metrics and capacity metrics for your storage account.</span></span> <span data-ttu-id="2118b-116">Le metriche consentono di determinare le prestazioni dell'applicazione in base a un'ampia gamma di misure diverse.</span><span class="sxs-lookup"><span data-stu-id="2118b-116">Using metrics, you can determine how your application is performing according to a variety of different measures.</span></span> <span data-ttu-id="2118b-117">Per altre informazioni sui tipi di metriche di cui Analisi archiviazione tiene traccia, vedere [Schema di tabella della metrica di Analisi archiviazione](http://msdn.microsoft.com/library/azure/hh343264.aspx) .</span><span class="sxs-lookup"><span data-stu-id="2118b-117">See [Storage Analytics Metrics Table Schema](http://msdn.microsoft.com/library/azure/hh343264.aspx) for more information about the types of metrics tracked by Storage Analytics.</span></span>
  * <span data-ttu-id="2118b-118">**registrazione di archiviazione** registra tutte le richieste in arrivo ai servizi di Archiviazione di Azure in un log sul lato server.</span><span class="sxs-lookup"><span data-stu-id="2118b-118">**Storage logging** logs each request to the Azure Storage services to a server-side log.</span></span> <span data-ttu-id="2118b-119">Nel log vengono registrati dati dettagliati per ogni richiesta, tra cui l'operazione eseguita, lo stato dell'operazione e le informazioni sulla latenza.</span><span class="sxs-lookup"><span data-stu-id="2118b-119">The log tracks detailed data for each request, including the operation performed, the status of the operation, and latency information.</span></span> <span data-ttu-id="2118b-120">Per altre informazioni sui dati di richiesta e risposta che vengono scritti nei log di Analisi di archiviazione, vedere [Formato del log di Analisi archiviazione](http://msdn.microsoft.com/library/azure/hh343259.aspx) .</span><span class="sxs-lookup"><span data-stu-id="2118b-120">See [Storage Analytics Log Format](http://msdn.microsoft.com/library/azure/hh343259.aspx) for more information about the request and response data that is written to the logs by Storage Analytics.</span></span>

> [!NOTE]
> <span data-ttu-id="2118b-121">Per gli account di archiviazione con un tipo di replica di archiviazione con ridondanza della zona (ZRS) al momento non sono abilitate le funzionalità di metrica e registrazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-121">Storage accounts with a replication type of Zone-Redundant Storage (ZRS) do not have the metrics or logging capability enabled at this time.</span></span>
>
>

* <span data-ttu-id="2118b-122">**Portale di Azure classico**.</span><span class="sxs-lookup"><span data-stu-id="2118b-122">**Azure Classic Portal**.</span></span> <span data-ttu-id="2118b-123">Nel [portale di Azure classico](https://manage.windowsazure.com)è possibile configurare le metriche e la registrazione per l'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-123">You can configure metrics and logging for your storage account in the [Azure Classic Portal](https://manage.windowsazure.com).</span></span> <span data-ttu-id="2118b-124">È possibile anche visualizzare grafici che mostrano le prestazioni dell'applicazione nel tempo e configurare gli avvisi per ricevere una notifica se le prestazioni dell'applicazione si discostano dal previsto per una determinata metrica.</span><span class="sxs-lookup"><span data-stu-id="2118b-124">You can also view charts and graphs that show how your application is performing over time, and configure alerts to notify you if your application performs differently than expected for a specified metric.</span></span>

    <span data-ttu-id="2118b-125">Per informazioni sulla configurazione del monitoraggio nel portale di Azure classico, vedere [Monitorare un account di archiviazione nel portale di Azure](storage-monitor-storage-account.md) .</span><span class="sxs-lookup"><span data-stu-id="2118b-125">See [Monitor a storage account in the Azure Portal](storage-monitor-storage-account.md) for information about configuring monitoring in the Azure Classic Portal.</span></span>
* <span data-ttu-id="2118b-126">**AzCopy**.</span><span class="sxs-lookup"><span data-stu-id="2118b-126">**AzCopy**.</span></span> <span data-ttu-id="2118b-127">I log di Archiviazione di Azure vengono memorizzati come BLOB, quindi è possibile usare AzCopy per copiare i BLOB di log in una directory locale per l'analisi mediante Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="2118b-127">Server logs for Azure Storage are stored as blobs, so you can use AzCopy to copy the log blobs to a local directory for analysis using Microsoft Message Analyzer.</span></span> <span data-ttu-id="2118b-128">Per altre informazioni su AzCopy, vedere [Trasferire dati con l'utilità della riga di comando AzCopy](storage-use-azcopy.md) .</span><span class="sxs-lookup"><span data-stu-id="2118b-128">See [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md) for more information about AzCopy.</span></span>
* <span data-ttu-id="2118b-129">**Microsoft Message Analyzer**.</span><span class="sxs-lookup"><span data-stu-id="2118b-129">**Microsoft Message Analyzer**.</span></span> <span data-ttu-id="2118b-130">Message Analyzer è uno strumento che utilizza i file di log e visualizza i dati di log in un formato visivo che ne semplifica il filtraggio, la ricerca e il raggruppamento in set utili da usare per analizzare gli errori e i problemi di prestazioni.</span><span class="sxs-lookup"><span data-stu-id="2118b-130">Message Analyzer is a tool that consumes log files and displays log data in a visual format that makes it easy to filter, search, and group log data into useful sets that you can use to analyze errors and performance issues.</span></span> <span data-ttu-id="2118b-131">Per altre informazioni su Message Analyzer, vedere [la guida operativa di Microsoft Message Analyzer](http://technet.microsoft.com/library/jj649776.aspx) .</span><span class="sxs-lookup"><span data-stu-id="2118b-131">See [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx) for more information about Message Analyzer.</span></span>

## <a name="about-the-sample-scenario"></a><span data-ttu-id="2118b-132">Informazioni sullo scenario di esempio</span><span class="sxs-lookup"><span data-stu-id="2118b-132">About the sample scenario</span></span>
<span data-ttu-id="2118b-133">In questa esercitazione verrà esaminato uno scenario in cui le metriche di Archiviazione di Azure indicano una bassa percentuale di operazioni riuscite per un'applicazione che chiama Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-133">For this tutorial, we'll examine a scenario where Azure Storage metrics indicates a low percent success rate for an application that calls Azure storage.</span></span> <span data-ttu-id="2118b-134">La metrica relativa alla bassa percentuale di operazioni riuscite (visualizzata come **PercentSuccess** nel portale di Azure classico e nelle tabelle metriche) tiene traccia delle operazioni che hanno esito positivo, ma che restituiscono con un codice di stato HTTP maggiore di 299.</span><span class="sxs-lookup"><span data-stu-id="2118b-134">The low percent success rate metric (shown as **PercentSuccess** in the Azure Classic Portal and in the metrics tables) tracks operations that succeed, but that return an HTTP status code that is greater than 299.</span></span> <span data-ttu-id="2118b-135">Nei file di log dell'archiviazione sul lato server, queste operazioni vengono registrate con stato della transazione **ClientOtherErrors**.</span><span class="sxs-lookup"><span data-stu-id="2118b-135">In the server-side storage log files, these operations are recorded with a transaction status of **ClientOtherErrors**.</span></span> <span data-ttu-id="2118b-136">Per maggiori dettagli sulla metrica relativa alla bassa percentuale di operazioni riuscite, vedere [Le metriche indicano un valore PercentSuccess basso o le voci del log contengono operazioni con stato della transazione ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success).</span><span class="sxs-lookup"><span data-stu-id="2118b-136">For more details about the low percent success metric, see [Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success).</span></span>

<span data-ttu-id="2118b-137">Le operazioni di Archiviazione di Azure possono restituire codici di stato HTTP maggiori di 299 in condizioni di funzionalità normali.</span><span class="sxs-lookup"><span data-stu-id="2118b-137">Azure Storage operations may return HTTP status codes greater than 299 as part of their normal functionality.</span></span> <span data-ttu-id="2118b-138">In alcuni casi, tuttavia, questi errori indicano che è possibile ottimizzare l'applicazione client per migliorare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="2118b-138">But these errors in some cases indicate that you may be able to optimize your client application for improved performance.</span></span>

<span data-ttu-id="2118b-139">In questo scenario la percentuale di operazioni riuscite sarà considerata bassa se inferiore al 100%.</span><span class="sxs-lookup"><span data-stu-id="2118b-139">In this scenario, we'll consider a low percent success rate to be anything below 100%.</span></span> <span data-ttu-id="2118b-140">È comunque possibile scegliere un diverso livello di metrica, in base alle esigenze.</span><span class="sxs-lookup"><span data-stu-id="2118b-140">You can choose a different metric level, however, according to your needs.</span></span> <span data-ttu-id="2118b-141">Durante il test dell'applicazione è consigliabile definire una tolleranza di base per le metriche delle prestazioni chiave.</span><span class="sxs-lookup"><span data-stu-id="2118b-141">We recommend that during testing of your application, you establish a baseline tolerance for your key performance metrics.</span></span> <span data-ttu-id="2118b-142">Ad esempio, sulla base dei test è possibile che si stabilisca che l'applicazione deve avere una percentuale di operazioni riuscite costante del 90% o 85%.</span><span class="sxs-lookup"><span data-stu-id="2118b-142">For example, you might determine, based on testing, that your application should have a consistent percent success rate of 90%, or 85%.</span></span> <span data-ttu-id="2118b-143">Se i dati di metrica mostrano una deviazione dell'applicazione da tale valore, è possibile indagare per individuare la causa dell'aumento.</span><span class="sxs-lookup"><span data-stu-id="2118b-143">If your metrics data shows that the application is deviating from that number, then you can investigate what may be causing the increase.</span></span>

<span data-ttu-id="2118b-144">Nello scenario di esempio, dopo avere stabilito che la metrica della percentuale di operazioni riuscite è inferiore al 100%, si esamineranno i log per individuare gli errori correlati alle metriche, che saranno usati per risalire al motivo per cui la percentuale di operazioni riuscite è inferiore.</span><span class="sxs-lookup"><span data-stu-id="2118b-144">For our sample scenario, once we've established that the percent success rate metric is below 100%, we will examine the logs to find the errors that correlate to the metrics, and use them to figure out what is causing the lower percent success rate.</span></span> <span data-ttu-id="2118b-145">Si osserveranno in particolare gli errori nella fascia 400,</span><span class="sxs-lookup"><span data-stu-id="2118b-145">We'll look specifically at errors in the 400 range.</span></span> <span data-ttu-id="2118b-146">esaminando in dettaglio gli errori 404 (Non trovato).</span><span class="sxs-lookup"><span data-stu-id="2118b-146">Then we'll more closely investigate 404 (Not Found) errors.</span></span>

### <a name="some-causes-of-400-range-errors"></a><span data-ttu-id="2118b-147">Alcune cause degli errori della fascia 400</span><span class="sxs-lookup"><span data-stu-id="2118b-147">Some causes of 400-range errors</span></span>
<span data-ttu-id="2118b-148">Gli esempi seguenti presentano un campione di errori della serie 400 per le richieste nell'archivio BLOB di Azure e le possibili cause.</span><span class="sxs-lookup"><span data-stu-id="2118b-148">The examples below shows a sampling of some 400-range errors for requests against Azure Blob Storage, and their possible causes.</span></span> <span data-ttu-id="2118b-149">Tutti questi errori, così come quelli nella fascia 300 e 500, possono contribuire a una bassa percentuale di operazioni riuscite.</span><span class="sxs-lookup"><span data-stu-id="2118b-149">Any of these errors, as well as errors in the 300 range and the 500 range, can contribute to a low percent success rate.</span></span>

<span data-ttu-id="2118b-150">Tenere presente che gli elenchi riportati sotto sono tutt'altro che completi.</span><span class="sxs-lookup"><span data-stu-id="2118b-150">Note that the lists below are far from complete.</span></span> <span data-ttu-id="2118b-151">Per informazioni dettagliate sugli errori generali di Archiviazione di Azure e sugli errori specifici dei singoli servizi di archiviazione, vedere [Codici di stato e di errore](http://msdn.microsoft.com/library/azure/dd179382.aspx) .</span><span class="sxs-lookup"><span data-stu-id="2118b-151">See [Status and Error Codes](http://msdn.microsoft.com/library/azure/dd179382.aspx) for details about general Azure Storage errors and about errors specific to each of the storage services.</span></span>

<span data-ttu-id="2118b-152">**Esempi di codice di stato 404 (Non trovato)**</span><span class="sxs-lookup"><span data-stu-id="2118b-152">**Status Code 404 (Not Found) Examples**</span></span>

<span data-ttu-id="2118b-153">Si verifica quando un'operazione di lettura in un contenitore o BLOB non riesce perché non viene trovato il BLOB o il contenitore.</span><span class="sxs-lookup"><span data-stu-id="2118b-153">Occurs when a read operation against a container or blob fails because the blob or container is not found.</span></span>

* <span data-ttu-id="2118b-154">Si verifica se un contenitore o BLOB è stato eliminato da un altro client prima di questa richiesta.</span><span class="sxs-lookup"><span data-stu-id="2118b-154">Occurs if a container or blob has been deleted by another client before this request.</span></span>
* <span data-ttu-id="2118b-155">Si verifica se si usa una chiamata API che crea il contenitore o il BLOB dopo averne controllato l'esistenza.</span><span class="sxs-lookup"><span data-stu-id="2118b-155">Occurs if you are using an API call that creates the container or blob after checking whether it exists.</span></span> <span data-ttu-id="2118b-156">Le API CreateIfNotExists effettuano una chiamata HEAD per verificare l'esistenza del contenitore o del BLOB. Se non esiste, viene restituito un errore 404 e quindi viene eseguita una seconda chiamata PUT per scrivere il contenitore o il BLOB.</span><span class="sxs-lookup"><span data-stu-id="2118b-156">The CreateIfNotExists APIs make a HEAD call first to check for the existence of the container or blob; if it does not exist, a 404 error is returned, and then a second PUT call is made to write the container or blob.</span></span>

<span data-ttu-id="2118b-157">**Esempi di codice di stato 409 (Conflitto)**</span><span class="sxs-lookup"><span data-stu-id="2118b-157">**Status Code 409 (Conflict) Examples**</span></span>

* <span data-ttu-id="2118b-158">Si verifica se si usa un'API di creazione per creare un nuovo contenitore o BLOB, senza controllarne prima l'esistenza, ed esiste già un contenitore o BLOB con lo stesso nome.</span><span class="sxs-lookup"><span data-stu-id="2118b-158">Occurs if you use a Create API to create a new container or blob, without checking for existence first, and a container or blob with that name already exists.</span></span>
* <span data-ttu-id="2118b-159">Si verifica se è in corso l'eliminazione di un contenitore e si tenta di crearne uno nuovo con lo stesso nome prima del completamento dell'operazione di eliminazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-159">Occurs if a container is being deleted, and you attempt to create a new container with the same name before the deletion operation is complete.</span></span>
* <span data-ttu-id="2118b-160">Si verifica se si specifica un lease in un contenitore o BLOB ed è già presente un lease.</span><span class="sxs-lookup"><span data-stu-id="2118b-160">Occurs if you specify a lease on a container or blob, and there is already a lease present.</span></span>

<span data-ttu-id="2118b-161">**Esempi di codice di stato 412 (Condizione preliminare non riuscita)**</span><span class="sxs-lookup"><span data-stu-id="2118b-161">**Status Code 412 (Precondition Failed) Examples**</span></span>

* <span data-ttu-id="2118b-162">Si verifica quando la condizione specificata da un'intestazione condizionale non viene soddisfatta.</span><span class="sxs-lookup"><span data-stu-id="2118b-162">Occurs when the condition specified by a conditional header has not been met.</span></span>
* <span data-ttu-id="2118b-163">Si verifica quando l'ID lease specificato non corrisponde all'ID lease per il contenitore o BLOB.</span><span class="sxs-lookup"><span data-stu-id="2118b-163">Occurs when the lease ID specified does not match the lease ID on the container or blob.</span></span>

## <a name="generate-log-files-for-analysis"></a><span data-ttu-id="2118b-164">Generare file di log per l'analisi</span><span class="sxs-lookup"><span data-stu-id="2118b-164">Generate log files for analysis</span></span>
<span data-ttu-id="2118b-165">In questa esercitazione viene usato Message Analyzer per utilizzare tre diversi tipi di file di log, anche se è possibile scegliere di utilizzarne uno:</span><span class="sxs-lookup"><span data-stu-id="2118b-165">In this tutorial, we'll use Message Analyzer to work with three different types of log files, although you could choose to work with any one of these:</span></span>

* <span data-ttu-id="2118b-166">Il **log del server**, che viene creato quando abilita la registrazione di Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-166">The **server log**, which is created when you enable Azure Storage logging.</span></span> <span data-ttu-id="2118b-167">Il log del server contiene dati relativi a ogni operazione chiamata in uno dei servizi di Archiviazione di Azure, ovvero BLOB, accodamento, tabelle e file.</span><span class="sxs-lookup"><span data-stu-id="2118b-167">The server log contains data about each operation called against one of the Azure Storage services - blob, queue, table, and file.</span></span> <span data-ttu-id="2118b-168">Il log del server indica l'operazione che è stato chiamata e il codice di stato restituito, nonché altri dettagli sulla richiesta e risposta.</span><span class="sxs-lookup"><span data-stu-id="2118b-168">The server log indicates which operation was called and what status code was returned, as well as other details about the request and response.</span></span>
* <span data-ttu-id="2118b-169">Il **log del client .NET**, che viene creato quando si abilita la registrazione sul lato client dall'applicazione .NET.</span><span class="sxs-lookup"><span data-stu-id="2118b-169">The **.NET client log**, which is created when you enable client-side logging from within your .NET application.</span></span> <span data-ttu-id="2118b-170">Il log del client include informazioni dettagliate sul modo in cui il client prepara la richiesta e riceve ed elabora la risposta.</span><span class="sxs-lookup"><span data-stu-id="2118b-170">The client log includes detailed information about how the client prepares the request and receives and processes the response.</span></span>
* <span data-ttu-id="2118b-171">Il **log di traccia di rete HTTP**, che raccoglie i dati relativi alle richieste e risposte HTTP/HTTPS, anche per le operazioni in Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-171">The **HTTP network trace log**, which collects data on HTTP/HTTPS request and response data, including for operations against Azure Storage.</span></span> <span data-ttu-id="2118b-172">In questa esercitazione, la traccia di rete verrà generata mediante Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="2118b-172">In this tutorial, we'll generate the network trace via Message Analyzer.</span></span>

### <a name="configure-server-side-logging-and-metrics"></a><span data-ttu-id="2118b-173">Configurare le metriche e la registrazione sul lato server</span><span class="sxs-lookup"><span data-stu-id="2118b-173">Configure server-side logging and metrics</span></span>
<span data-ttu-id="2118b-174">In primo luogo è necessario configurare la registrazione e le metriche di Archiviazione di Azure, in modo da disporre di dati dell'applicazione client per l'analisi.</span><span class="sxs-lookup"><span data-stu-id="2118b-174">First, we'll need to configure Azure Storage logging and metrics, so that we have data from the client application to analyze.</span></span> <span data-ttu-id="2118b-175">La registrazione e le metriche possono essere configurate in diversi modi: tramite il [portale di Azure classico](https://manage.windowsazure.com), tramite PowerShell o a livello di codice.</span><span class="sxs-lookup"><span data-stu-id="2118b-175">You can configure logging and metrics in a variety of ways - via the [Azure Classic Portal](https://manage.windowsazure.com), by using PowerShell, or programmatically.</span></span> <span data-ttu-id="2118b-176">Per informazioni dettagliate sulla configurazione di registrazione e metrica, vedere [Enabling Storage Metrics and Viewing Metrics Data](http://msdn.microsoft.com/library/azure/dn782843.aspx) (Abilitazione delle metriche di archiviazione e visualizzazione dei dati di metrica) e [Enabling Storage Logging and Accessing Log Data](http://msdn.microsoft.com/library/azure/dn782840.aspx) (Abilitazione della registrazione e accesso ai dati del log di archiviazione).</span><span class="sxs-lookup"><span data-stu-id="2118b-176">See [Enabling Storage Metrics and Viewing Metrics Data](http://msdn.microsoft.com/library/azure/dn782843.aspx) and [Enabling Storage Logging and Accessing Log Data](http://msdn.microsoft.com/library/azure/dn782840.aspx) for details about configuring logging and metrics.</span></span>

<span data-ttu-id="2118b-177">**Tramite il portale di Azure classico**</span><span class="sxs-lookup"><span data-stu-id="2118b-177">**Via the Azure Classic Portal**</span></span>

<span data-ttu-id="2118b-178">Per configurare la registrazione e la metrica per l'account di archiviazione tramite il portale, seguire le istruzioni in [Monitorare un account di archiviazione nel portale di Azure](storage-monitor-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="2118b-178">To configure logging and metrics for your storage account using the portal, follow the instructions at [Monitor a storage account in the Azure Portal](storage-monitor-storage-account.md).</span></span>

> [!NOTE]
> <span data-ttu-id="2118b-179">Non è possibile impostare la metrica al minuto mediante il portale di Azure classico.</span><span class="sxs-lookup"><span data-stu-id="2118b-179">It's not possible to set minute metrics using the Azure Classic Portal.</span></span> <span data-ttu-id="2118b-180">Tuttavia, è consigliabile impostarla ai fini di questa esercitazione e per l'analisi dei problemi di prestazioni relativi all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-180">However, we recommend that you do set them for the purposes of this tutorial, and for investigating performance issues with your application.</span></span> <span data-ttu-id="2118b-181">La metrica al minuto può essere impostata tramite PowerShell, come mostrato di seguito, a livello di codice o tramite il portale di Azure classico.</span><span class="sxs-lookup"><span data-stu-id="2118b-181">You can set minute metrics using PowerShell as shown below, or programmatically, or via the Azure Classic Portal.</span></span>
>
> <span data-ttu-id="2118b-182">Si noti che il portale di Azure classico non consente di visualizzare la metrica al minuto, ma solo la metrica oraria.</span><span class="sxs-lookup"><span data-stu-id="2118b-182">Note that the Azure Classic Portal cannot display minute metrics, only hourly metrics.</span></span>
>
>

<span data-ttu-id="2118b-183">**Tramite PowerShell**</span><span class="sxs-lookup"><span data-stu-id="2118b-183">**Via PowerShell**</span></span>

<span data-ttu-id="2118b-184">Per informazioni introduttive su PowerShell per Azure, vedere [Come installare e configurare Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="2118b-184">To get started with PowerShell for Azure, see [How to install and configure Azure PowerShell](/powershell/azure/overview).</span></span>

1. <span data-ttu-id="2118b-185">Usare il cmdlet [Add-AzureAccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) per aggiungere l'account utente di Azure alla finestra di PowerShell:</span><span class="sxs-lookup"><span data-stu-id="2118b-185">Use the [Add-AzureAccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) cmdlet to add your Azure user account to the PowerShell window:</span></span>

    ```powershell
     Add-AzureAccount
    ```

2. <span data-ttu-id="2118b-186">Nella finestra di **accesso a Microsoft Azure** digitare l'indirizzo di posta elettronica e la password associati all'account.</span><span class="sxs-lookup"><span data-stu-id="2118b-186">In the **Sign in to Microsoft Azure** window, type the email address and password associated with your account.</span></span> <span data-ttu-id="2118b-187">Le informazioni delle credenziali vengono autenticate e salvate in Azure, quindi la finestra viene chiusa.</span><span class="sxs-lookup"><span data-stu-id="2118b-187">Azure authenticates and saves the credential information, and then closes the window.</span></span>
3. <span data-ttu-id="2118b-188">Impostare l'account di archiviazione predefinito sull'account di archiviazione usato per l'esercitazione eseguendo i comandi seguenti nella finestra di PowerShell:</span><span class="sxs-lookup"><span data-stu-id="2118b-188">Set the default storage account to the storage account you are using for the tutorial by executing these commands in the PowerShell window:</span></span>

    ```powershell
    $SubscriptionName = 'Your subscription name'
    $StorageAccountName = 'yourstorageaccount'
    Set-AzureSubscription -CurrentStorageAccountName $StorageAccountName -SubscriptionName $SubscriptionName
    ```

4. <span data-ttu-id="2118b-189">Abilitare la registrazione di archiviazione per il servizio BLOB:</span><span class="sxs-lookup"><span data-stu-id="2118b-189">Enable storage logging for the Blob service:</span></span>

    ```powershell
    Set-AzureStorageServiceLoggingProperty -ServiceType Blob -LoggingOperations Read,Write,Delete -PassThru -RetentionDays 7 -Version 1.0
    ```

5. <span data-ttu-id="2118b-190">Abilitare la metrica di archiviazione per il servizio BLOB, assicurandosi di impostare **-MetricsType** su `Minute`:</span><span class="sxs-lookup"><span data-stu-id="2118b-190">Enable storage metrics for the Blob service, making sure to set **-MetricsType** to `Minute`:</span></span>

    ```powershell
    Set-AzureStorageServiceMetricsProperty -ServiceType Blob -MetricsType Minute -MetricsLevel ServiceAndApi -PassThru -RetentionDays 7 -Version 1.0
    ```

### <a name="configure-net-client-side-logging"></a><span data-ttu-id="2118b-191">Configurare la registrazione sul lato client .NET</span><span class="sxs-lookup"><span data-stu-id="2118b-191">Configure .NET client-side logging</span></span>
<span data-ttu-id="2118b-192">Per configurare la registrazione sul lato client per un'applicazione .NET, abilitare la diagnostica .NET nel file di configurazione dell'applicazione (web.config o app.config).</span><span class="sxs-lookup"><span data-stu-id="2118b-192">To configure client-side logging for a .NET application, enable .NET diagnostics in the application's configuration file (web.config or app.config).</span></span> <span data-ttu-id="2118b-193">Per informazioni dettagliate, vedere [Client-side Logging with the .NET Storage Client Library](http://msdn.microsoft.com/library/azure/dn782839.aspx) (Registrazione lato client con la libreria client di archiviazione .NET) e [Client-side Logging with the Microsoft Azure Storage SDK for Java](http://msdn.microsoft.com/library/azure/dn782844.aspx) (Registrazione lato client con Archiviazione di Microsoft Azure SDK per Java).</span><span class="sxs-lookup"><span data-stu-id="2118b-193">See [Client-side Logging with the .NET Storage Client Library](http://msdn.microsoft.com/library/azure/dn782839.aspx) and [Client-side Logging with the Microsoft Azure Storage SDK for Java](http://msdn.microsoft.com/library/azure/dn782844.aspx) for details.</span></span>

<span data-ttu-id="2118b-194">Il log lato client include informazioni dettagliate sul modo in cui il client prepara la richiesta e riceve ed elabora la risposta.</span><span class="sxs-lookup"><span data-stu-id="2118b-194">The client-side log includes detailed information about how the client prepares the request and receives and processes the response.</span></span>

<span data-ttu-id="2118b-195">La libreria client di archiviazione archivia i dati di log lato client nel percorso specificato nel file di configurazione dell'applicazione (web.config or app.config).</span><span class="sxs-lookup"><span data-stu-id="2118b-195">The Storage Client Library stores client-side log data in the location specified in the application's configuration file (web.config or app.config).</span></span>

### <a name="collect-a-network-trace"></a><span data-ttu-id="2118b-196">Raccogliere una traccia di rete</span><span class="sxs-lookup"><span data-stu-id="2118b-196">Collect a network trace</span></span>
<span data-ttu-id="2118b-197">È possibile usare Message Analyzer per raccogliere una traccia di rete HTTP/HTTPS mentre l'applicazione client è in esecuzione.</span><span class="sxs-lookup"><span data-stu-id="2118b-197">You can use Message Analyzer to collect an HTTP/HTTPS network trace while your client application is running.</span></span> <span data-ttu-id="2118b-198">Message Analyzer usa [Fiddler](http://www.telerik.com/fiddler) sul lato back-end.</span><span class="sxs-lookup"><span data-stu-id="2118b-198">Message Analyzer uses [Fiddler](http://www.telerik.com/fiddler) on the back end.</span></span> <span data-ttu-id="2118b-199">Prima di raccogliere la traccia di rete, è consigliabile configurare Fiddler per registrare il traffico HTTPS non crittografato:</span><span class="sxs-lookup"><span data-stu-id="2118b-199">Before you collect the network trace, we recommend that you configure Fiddler to record unencrypted HTTPS traffic:</span></span>

1. <span data-ttu-id="2118b-200">Installare [Fiddler](http://www.telerik.com/download/fiddler).</span><span class="sxs-lookup"><span data-stu-id="2118b-200">Install [Fiddler](http://www.telerik.com/download/fiddler).</span></span>
2. <span data-ttu-id="2118b-201">Avviare Fiddler.</span><span class="sxs-lookup"><span data-stu-id="2118b-201">Launch Fiddler.</span></span>
3. <span data-ttu-id="2118b-202">Selezionare **Tools | Fiddler Options** (Strumenti | Opzioni Fiddler).</span><span class="sxs-lookup"><span data-stu-id="2118b-202">Select **Tools | Fiddler Options**.</span></span>
4. <span data-ttu-id="2118b-203">Nella finestra di dialogo Options (Opzioni), verificare che siano selezionate le opzioni **Capture HTTPS CONNECTs** (Acquisisci HTTPS CONNECTs) e **Decrypt HTTPS Traffic** (Decrittografa il traffico HTTPS), come illustrato di seguito.</span><span class="sxs-lookup"><span data-stu-id="2118b-203">In the Options dialog, ensure that **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** are both selected, as shown below.</span></span>

![Configurare le opzioni Fiddler](./media/storage-e2e-troubleshooting-classic-portal/fiddler-options-1.png)

<span data-ttu-id="2118b-205">Per l'esercitazione, raccogliere e salvare una traccia di rete in Message Analyzer, quindi creare una sessione di analisi per analizzare la traccia e i log.</span><span class="sxs-lookup"><span data-stu-id="2118b-205">For the tutorial, collect and save a network trace first in Message Analyzer, then create an analysis session to analyze the trace and the logs.</span></span> <span data-ttu-id="2118b-206">Per raccogliere una traccia di rete in Message Analyzer:</span><span class="sxs-lookup"><span data-stu-id="2118b-206">To collect a network trace in Message Analyzer:</span></span>

1. <span data-ttu-id="2118b-207">In Message Analyzer selezionare **File | Quick Trace | Unencrypted HTTPS** (File | Traccia rapida | HTTPS non crittografato).</span><span class="sxs-lookup"><span data-stu-id="2118b-207">In Message Analyzer, select **File | Quick Trace | Unencrypted HTTPS**.</span></span>
2. <span data-ttu-id="2118b-208">La traccia inizierà immediatamente.</span><span class="sxs-lookup"><span data-stu-id="2118b-208">The trace will begin immediately.</span></span> <span data-ttu-id="2118b-209">Selezionare **Interrompi** per interrompere la traccia in modo da poterla configurare solo per il traffico di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-209">Select **Stop** to stop the trace so that we can configure it to trace storage traffic only.</span></span>
3. <span data-ttu-id="2118b-210">Selezionare **Modifica** per modificare la sessione di traccia.</span><span class="sxs-lookup"><span data-stu-id="2118b-210">Select **Edit** to edit the tracing session.</span></span>
4. <span data-ttu-id="2118b-211">Selezionare il collegamento **Configura** a destra del provider ETW **Microsoft-Pef-WebProxy**.</span><span class="sxs-lookup"><span data-stu-id="2118b-211">Select the **Configure** link to the right of the **Microsoft-Pef-WebProxy** ETW provider.</span></span>
5. <span data-ttu-id="2118b-212">Nella finestra di dialogo **Impostazioni avanzate** fare clic sulla scheda **Provider**.</span><span class="sxs-lookup"><span data-stu-id="2118b-212">In the **Advanced Settings** dialog, click the **Provider** tab.</span></span>
6. <span data-ttu-id="2118b-213">Nel campo **Filtro Hostname Filter** , specificare gli endpoint di archiviazione, separati da spazi.</span><span class="sxs-lookup"><span data-stu-id="2118b-213">In the **Hostname Filter** field, specify your storage endpoints, separated by spaces.</span></span> <span data-ttu-id="2118b-214">Ad esempio, è possibile specificare gli endpoint nel modo seguente, specificando il nome del proprio account di archiviazione al posto di `storagesample` :</span><span class="sxs-lookup"><span data-stu-id="2118b-214">For example, you can specify your endpoints as follows; change `storagesample` to the name of your storage account:</span></span>

    ```   
    storagesample.blob.core.windows.net storagesample.queue.core.windows.net storagesample.table.core.windows.net
    ```

7. <span data-ttu-id="2118b-215">Chiudere la finestra di dialogo e fare clic su **Riavvia** per avviare la raccolta della traccia con il filtro relativo al nome host impostato, in modo da includere nella traccia solo il traffico di rete di Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-215">Exit the dialog, and click **Restart** to begin collecting the trace with the hostname filter in place, so that only Azure Storage network traffic is included in the trace.</span></span>

> [!NOTE]
> <span data-ttu-id="2118b-216">Al termine della raccolta della traccia di rete, è consigliabile ripristinare le impostazioni modificate in Fiddler per decrittografare il traffico HTTPS.</span><span class="sxs-lookup"><span data-stu-id="2118b-216">After you have finished collecting your network trace, we strongly recommend that you revert the settings that you may have changed in Fiddler to decrypt HTTPS traffic.</span></span> <span data-ttu-id="2118b-217">Nella finestra di dialogo Fiddler Options (Opzioni Fiddler) deselezionare le caselle di controllo **Capture HTTPS CONNECTs** (Acquisisci HTTPS CONNECTs) e **Decrypt HTTPS Traffic** (Decrittografa il traffico HTTPS).</span><span class="sxs-lookup"><span data-stu-id="2118b-217">In the Fiddler Options dialog, deselect the **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** checkboxes.</span></span>
>
>

<span data-ttu-id="2118b-218">Per informazioni dettagliate, vedere [l'argomento relativo all'uso delle funzionalità di traccia di rete](http://technet.microsoft.com/library/jj674819.aspx) su Technet.</span><span class="sxs-lookup"><span data-stu-id="2118b-218">See [Using the Network Tracing Features](http://technet.microsoft.com/library/jj674819.aspx) on Technet for more details.</span></span>

## <a name="review-metrics-data-in-the-azure-classic-portal"></a><span data-ttu-id="2118b-219">Esaminare i dati di metrica nel portale di Azure classico</span><span class="sxs-lookup"><span data-stu-id="2118b-219">Review metrics data in the Azure Classic Portal</span></span>
<span data-ttu-id="2118b-220">Dopo un certo periodo di esecuzione dell'applicazione, è possibile esaminare i grafici delle metriche visualizzati nel portale di Azure classico per verificare le prestazioni del servizio.</span><span class="sxs-lookup"><span data-stu-id="2118b-220">Once your application has been running for a period of time, you can review the metrics charts that appear in the Azure Classic Portal to observe how your service has been performing.</span></span> <span data-ttu-id="2118b-221">Prima di tutto si aggiungerà la metrica **Percentuale di operazioni riuscite** alla pagina di monitoraggio:</span><span class="sxs-lookup"><span data-stu-id="2118b-221">First, we'll add the **Success Percentage** metric to the Monitoring page:</span></span>

1. <span data-ttu-id="2118b-222">Passare al dashboard dell'account di archiviazione nel [portale di Azure classico](https://manage.windowsazure.com), quindi selezionare **Monitoraggio** per visualizzare la pagina di monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="2118b-222">Navigate to the Dashboard for your storage account in the [Azure Classic Portal](https://manage.windowsazure.com), then select **Monitor** to view the monitoring page.</span></span>
2. <span data-ttu-id="2118b-223">Fare clic su **Aggiungi metriche** per visualizzare la finestra di dialogo **Scegli metriche**.</span><span class="sxs-lookup"><span data-stu-id="2118b-223">Click **Add Metrics** to display the **Choose Metrics** dialog.</span></span>
3. <span data-ttu-id="2118b-224">Scorrere fino al gruppo **Percentuale di operazioni riuscite**, espanderlo e selezionare **Aggregato** come illustrato nell'immagine seguente.</span><span class="sxs-lookup"><span data-stu-id="2118b-224">Scroll down to find the **Success Percentage** group, expand it, then select **Aggregate**, as shown in the picture below.</span></span> <span data-ttu-id="2118b-225">Questa metrica aggrega i dati delle percentuali di operazioni riuscite da tutte le operazioni BLOB.</span><span class="sxs-lookup"><span data-stu-id="2118b-225">This metric aggregates success percentage data from all Blob operations.</span></span>

![Scegli metriche](./media/storage-e2e-troubleshooting-classic-portal/choose-metrics-portal-1.png)

<span data-ttu-id="2118b-227">La metrica **Percentuale di operazioni riuscite** verrà aggiunta al grafico di monitoraggio nel portale di Azure classico, insieme alle altre metriche aggiunte in precedenza (il grafico ne può contenere al massimo sei).</span><span class="sxs-lookup"><span data-stu-id="2118b-227">In the Azure Classic Portal, you'll now see **Success Percentage** in the monitoring chart, along with any other metrics you may have added (up to six can be displayed on the chart at once).</span></span> <span data-ttu-id="2118b-228">Nell'immagine seguente si noterà che la percentuale di operazioni riuscite è leggermente inferiore al 100%. Questo è lo scenario che si passerà a esaminare analizzando i log in Message Analyzer:</span><span class="sxs-lookup"><span data-stu-id="2118b-228">In the picture below, you can see that the percent success rate is somewhat below 100%, which is the scenario we'll investigate next by analyzing the logs in Message Analyzer:</span></span>

![Grafico delle metriche nel portale](./media/storage-e2e-troubleshooting-classic-portal/portal-metrics-chart-1.png)

<span data-ttu-id="2118b-230">Per maggiori dettagli sull'aggiunta di metriche alla pagina di monitoraggio, vedere [Procedura: aggiungere metriche alla relativa tabella](storage-monitor-storage-account.md#add-metrics-charts-to-the-portal-dashboard).</span><span class="sxs-lookup"><span data-stu-id="2118b-230">For more details on adding metrics to the Monitoring page, see [How to: Add metrics to the metrics table](storage-monitor-storage-account.md#add-metrics-charts-to-the-portal-dashboard).</span></span>

> [!NOTE]
> <span data-ttu-id="2118b-231">Dopo avere abilitato la metrica di archiviazione, è possibile che la visualizzazione dei dati corrispondenti nel portale di Azure classico non sia immediata.</span><span class="sxs-lookup"><span data-stu-id="2118b-231">It may take some time for your metrics data to appear in the Azure Classic Portal after you enable storage metrics.</span></span> <span data-ttu-id="2118b-232">Questo dipende dal fatto che la metrica oraria per l'ora precedente viene visualizzata nel portale di Azure classico solo allo scadere dell'ora in corso.</span><span class="sxs-lookup"><span data-stu-id="2118b-232">This is because hourly metrics for the previous hour are not displayed in the Azure Classic Portal until the current hour has elapsed.</span></span> <span data-ttu-id="2118b-233">Inoltre, la metrica oraria non è visualizzata nel portale di Azure classico.</span><span class="sxs-lookup"><span data-stu-id="2118b-233">Also, minute metrics are not displayed in the Azure Classic Portal.</span></span> <span data-ttu-id="2118b-234">Quindi, per visualizzare i dati relativi alla metrica può essere necessaria fino a un'ora, a seconda del momento in cui è stata abilita.</span><span class="sxs-lookup"><span data-stu-id="2118b-234">So depending on when you enable metrics, it may take up to two hours to see metrics data.</span></span>
>
>

## <a name="use-azcopy-to-copy-server-logs-to-a-local-directory"></a><span data-ttu-id="2118b-235">Usare AzCopy per copiare i log del server in una directory locale</span><span class="sxs-lookup"><span data-stu-id="2118b-235">Use AzCopy to copy server logs to a local directory</span></span>
<span data-ttu-id="2118b-236">Archiviazione di Azure scrive i dati di log del server nei BLOB, mentre le metriche vengono scritti nelle tabelle.</span><span class="sxs-lookup"><span data-stu-id="2118b-236">Azure Storage writes server log data to blobs, while metrics are written to tables.</span></span> <span data-ttu-id="2118b-237">I BLOB di log sono disponibili nel noto contenitore `$logs` per l'account di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-237">Log blobs are available in the well-known `$logs` container for your storage account.</span></span> <span data-ttu-id="2118b-238">Dato che i BLOB sono denominati in modo gerarchico per anno, mese, giorno e ora, è possibile individuare facilmente l'intervallo di tempo da esaminare.</span><span class="sxs-lookup"><span data-stu-id="2118b-238">Log blobs are named hierarchically by year, month, day, and hour, so that you can easily locate the range of time you wish to investigate.</span></span> <span data-ttu-id="2118b-239">Ad esempio, nell'account `storagesample`, il contenitore per i BLOB di log relativi al 02/01/2015, dalle 8 alle 9, è `https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`.</span><span class="sxs-lookup"><span data-stu-id="2118b-239">For example, in the `storagesample` account, the container for the log blobs for 01/02/2015, from 8-9 am, is `https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`.</span></span> <span data-ttu-id="2118b-240">I singoli BLOB nel contenitore sono denominati in sequenza, a partire da `000000.log`.</span><span class="sxs-lookup"><span data-stu-id="2118b-240">The individual blobs in this container are named sequentially, beginning with `000000.log`.</span></span>

<span data-ttu-id="2118b-241">È possibile usare lo strumento da riga di comando AzCopy per scaricare questi file di log lato server nel percorso desiderato sul computer locale.</span><span class="sxs-lookup"><span data-stu-id="2118b-241">You can use the AzCopy command-line tool to download these server-side log files to a location of your choice on your local machine.</span></span> <span data-ttu-id="2118b-242">Ad esempio, tramite il comando seguente è possibile scaricare i file di log per le operazioni BLOB verificatesi il 2 gennaio 2015 nella cartella`C:\Temp\Logs\Server`, sostituendo `<storageaccountname>` con il nome del proprio account di archiviazione e `<storageaccountkey>` con la chiave di accesso dell'account:</span><span class="sxs-lookup"><span data-stu-id="2118b-242">For example, you can use the following command to download the log files for blob operations that took place on January 2, 2015 to the folder `C:\Temp\Logs\Server`; replace `<storageaccountname>` with the name of your storage account, and `<storageaccountkey>` with your account access key:</span></span>

```azcopy
AzCopy.exe /Source:http://<storageaccountname>.blob.core.windows.net/$logs /Dest:C:\Temp\Logs\Server /Pattern:"blob/2015/01/02" /SourceKey:<storageaccountkey> /S /V
```

<span data-ttu-id="2118b-243">AzCopy è disponibile per il download nella pagina [Download di Azure](https://azure.microsoft.com/downloads/) .</span><span class="sxs-lookup"><span data-stu-id="2118b-243">AzCopy is available for download on the [Azure Downloads](https://azure.microsoft.com/downloads/) page.</span></span> <span data-ttu-id="2118b-244">Per informazioni dettagliate sull'uso di AzCopy, vedere [Trasferire dati con l'utilità della riga di comando AzCopy](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="2118b-244">For details about using AzCopy, see [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

<span data-ttu-id="2118b-245">Per altre informazioni sul download dei log sul lato server, vedere [Download dei dati di log di Registrazione archiviazione](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata).</span><span class="sxs-lookup"><span data-stu-id="2118b-245">For additional information about downloading server-side logs, see [Downloading Storage Logging log data](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata).</span></span>

## <a name="use-microsoft-message-analyzer-to-analyze-log-data"></a><span data-ttu-id="2118b-246">Usare Microsoft Message Analyzer per analizzare i dati di log</span><span class="sxs-lookup"><span data-stu-id="2118b-246">Use Microsoft Message Analyzer to analyze log data</span></span>
<span data-ttu-id="2118b-247">Microsoft Message Analyzer è uno strumento per l'acquisizione, la visualizzazione e l'analisi del traffico di messaggistica del protocollo, degli eventi e di altri messaggi del sistema o dell'applicazione in scenari di diagnostica e risoluzione dei problemi.</span><span class="sxs-lookup"><span data-stu-id="2118b-247">Microsoft Message Analyzer is a tool for capturing, displaying, and analyzing protocol messaging traffic, events, and other system or application messages in troubleshooting and diagnostic scenarios.</span></span> <span data-ttu-id="2118b-248">Message Analyzer consente anche di caricare, aggregare e analizzare i dati da log e file di traccia salvati.</span><span class="sxs-lookup"><span data-stu-id="2118b-248">Message Analyzer also enables you to load, aggregate, and analyze data from log and saved trace files.</span></span> <span data-ttu-id="2118b-249">Per altre informazioni su Message Analyzer, vedere la [guida operativa di Microsoft Message Analyzer](http://technet.microsoft.com/library/jj649776.aspx).</span><span class="sxs-lookup"><span data-stu-id="2118b-249">For more information about Message Analyzer, see [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx).</span></span>

<span data-ttu-id="2118b-250">Message Analyzer include risorse per Archiviazione di Azure che consentono di analizzare i log di rete, client e server.</span><span class="sxs-lookup"><span data-stu-id="2118b-250">Message Analyzer includes assets for Azure Storage that help you to analyze server, client, and network logs.</span></span> <span data-ttu-id="2118b-251">In questa sezione viene spiegato come usare questi strumenti per risolvere il problema della bassa percentuale di operazioni riuscite nel log di archiviazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-251">In this section, we'll discuss how to use those tools to address the issue of low percent success in the storage logs.</span></span>

### <a name="download-and-install-message-analyzer-and-the-azure-storage-assets"></a><span data-ttu-id="2118b-252">Scaricare e installare Message Analyzer e le risorse per Archiviazione di Azure</span><span class="sxs-lookup"><span data-stu-id="2118b-252">Download and install Message Analyzer and the Azure Storage Assets</span></span>
1. <span data-ttu-id="2118b-253">Scaricare [Message Analyzer](http://www.microsoft.com/download/details.aspx?id=44226) dall'Area download Microsoft ed eseguire il programma di installazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-253">Download [Message Analyzer](http://www.microsoft.com/download/details.aspx?id=44226) from the Microsoft Download Center, and run the installer.</span></span>
2. <span data-ttu-id="2118b-254">Avviare Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="2118b-254">Launch Message Analyzer.</span></span>
3. <span data-ttu-id="2118b-255">Selezionare **Gestione asset** dal menu **Strumenti**.</span><span class="sxs-lookup"><span data-stu-id="2118b-255">From the **Tools** menu, select **Asset Manager**.</span></span> <span data-ttu-id="2118b-256">Nella finestra di dialogo **Gestione asset** selezionare **Download** e filtrare in base ad **Archiviazione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="2118b-256">In the **Asset Manager** dialog, select **Downloads**, then filter on **Azure Storage**.</span></span> <span data-ttu-id="2118b-257">Verranno visualizzate le risorse per Archiviazione di Azure, come mostrato nell'immagine seguente.</span><span class="sxs-lookup"><span data-stu-id="2118b-257">You will see the Azure Storage Assets, as shown in the picture below.</span></span>
4. <span data-ttu-id="2118b-258">Fare clic su **Sincronizza tutti gli elementi visualizzati** per installare le risorse per Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-258">Click **Sync All Displayed Items** to install the Azure Storage Assets.</span></span> <span data-ttu-id="2118b-259">Le risorse disponibili includono:</span><span class="sxs-lookup"><span data-stu-id="2118b-259">The available assets include:</span></span>
   * <span data-ttu-id="2118b-260">**Regole dei colori di Archiviazione di Azure:** le regole dei colori di Archiviazione di Azure consentono di definire filtri speciali che usano il colore, il testo e il tipo di carattere per evidenziare i messaggi contenenti specifiche informazioni in una traccia.</span><span class="sxs-lookup"><span data-stu-id="2118b-260">**Azure Storage Color Rules:** Azure Storage color rules enable you to define special filters that use color, text, and font styles to highlight messages that contain specific information in a trace.</span></span>
   * <span data-ttu-id="2118b-261">**Grafici di Archiviazione di Azure:** i grafici di Archiviazione di Azure sono grafici predefiniti in cui vengono riportati i dati di log del server.</span><span class="sxs-lookup"><span data-stu-id="2118b-261">**Azure Storage Charts:** Azure Storage charts are predefined charts that graph server log data.</span></span> <span data-ttu-id="2118b-262">Si noti che, per utilizzare grafici di Archiviazione di Azure in questa fase, è possibile unicamente caricare il log del server nella griglia di analisi.</span><span class="sxs-lookup"><span data-stu-id="2118b-262">Note that to use Azure Storage charts at this time, you may only load the server log into the Analysis Grid.</span></span>
   * <span data-ttu-id="2118b-263">**Parser di Archiviazione di Azure:** i parser di Archiviazione di Azure analizzano i log HTTP, client e server di Archiviazione di Azure per visualizzarli nella griglia di analisi.</span><span class="sxs-lookup"><span data-stu-id="2118b-263">**Azure Storage Parsers:** The Azure Storage parsers parse the Azure Storage client, server, and HTTP logs in order to display them in the Analysis Grid.</span></span>
   * <span data-ttu-id="2118b-264">**Filtri di Archiviazione di Azure:** i filtri di Archiviazione di Azure sono criteri predefiniti che è possibile usare per eseguire query sui dati nella griglia di analisi.</span><span class="sxs-lookup"><span data-stu-id="2118b-264">**Azure Storage Filters:** Azure Storage filters are predefined criteria that you can use to query your data in the Analysis Grid.</span></span>
   * <span data-ttu-id="2118b-265">**Layout di Archiviazione di Azure:** i layout di visualizzazione di Archiviazione di Azure sono layout di colonna e raggruppamenti predefiniti nella griglia di analisi.</span><span class="sxs-lookup"><span data-stu-id="2118b-265">**Azure Storage View Layouts:** Azure Storage view layouts are predefined column layouts and groupings in the Analysis Grid.</span></span>
5. <span data-ttu-id="2118b-266">Riavviare Message Analyzer dopo aver installato le risorse.</span><span class="sxs-lookup"><span data-stu-id="2118b-266">Restart Message Analyzer after you've installed the assets.</span></span>

![Gestione asset di Message Analyzer](./media/storage-e2e-troubleshooting-classic-portal/mma-start-page-1.png)

> [!NOTE]
> <span data-ttu-id="2118b-268">Installare tutte le risorse di Archiviazione di Azure per questa esercitazione.</span><span class="sxs-lookup"><span data-stu-id="2118b-268">Install all of the Azure Storage assets shown for the purposes of this tutorial.</span></span>
>
>

### <a name="import-your-log-files-into-message-analyzer"></a><span data-ttu-id="2118b-269">Importare i file di log in Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="2118b-269">Import your log files into Message Analyzer</span></span>
<span data-ttu-id="2118b-270">È possibile importare tutti i file di log salvati (lato server, lato client e rete) in un'unica sessione di Microsoft Message Analyzer per l'analisi.</span><span class="sxs-lookup"><span data-stu-id="2118b-270">You can import all of your saved log files (server-side, client-side, and network) into a single session in Microsoft Message Analyzer for analysis.</span></span>

1. <span data-ttu-id="2118b-271">Scegliere **Nuova sessione** dal menu **File** in Microsoft Message Analyzer e fare clic su **Sessione vuota**.</span><span class="sxs-lookup"><span data-stu-id="2118b-271">On the **File** menu in Microsoft Message Analyzer, click **New Session**, and then click **Blank Session**.</span></span> <span data-ttu-id="2118b-272">Nella finestra di dialogo **Nuova sessione** immettere un nome per la sessione di analisi.</span><span class="sxs-lookup"><span data-stu-id="2118b-272">In the **New Session** dialog, enter a name for your analysis session.</span></span> <span data-ttu-id="2118b-273">Nel pannello **Dettagli sessione** fare clic sul pulsante **File**.</span><span class="sxs-lookup"><span data-stu-id="2118b-273">In the **Session Details** panel, click on the **Files** button.</span></span>
2. <span data-ttu-id="2118b-274">Per caricare i dati della traccia di rete generati da Message Analyzer, fare clic su **Aggiungi file**, passare al percorso in cui è stato salvato il file con estensione matp della sessione di traccia Web, selezionare il file con estensione matp e fare clic su **Apri**.</span><span class="sxs-lookup"><span data-stu-id="2118b-274">To load the network trace data generated by Message Analyzer, click on **Add Files**, browse to the location where you saved your .matp file from your web tracing session, select the .matp file, and click **Open**.</span></span>
3. <span data-ttu-id="2118b-275">Per caricare i dati di log lato server, fare clic su **Aggiungi file**, passare al percorso in cui sono stati scaricati i log lato server, selezionare i file di log relativi all'intervallo di tempo che si vuole analizzare e fare clic su **Apri**.</span><span class="sxs-lookup"><span data-stu-id="2118b-275">To load the server-side log data, click on **Add Files**, browse to the location where you downloaded your server-side logs, select the log files for the time range you want to analyze, and click **Open**.</span></span> <span data-ttu-id="2118b-276">Nel pannello **Dettagli sessione** selezionare **AzureStorageLog** nell'elenco a discesa **Configurazione log di testo** per ogni file di log lato server, per assicurarsi che Microsoft Message Analyzer possa analizzare correttamente il file di log.</span><span class="sxs-lookup"><span data-stu-id="2118b-276">Then, in the **Session Details** panel, set the **Text Log Configuration** drop-down for each server-side log file to **AzureStorageLog** to ensure that Microsoft Message Analyzer can parse the log file correctly.</span></span>
4. <span data-ttu-id="2118b-277">Per caricare i dati di log lato client, fare clic su **Aggiungi file**, passare al percorso in cui sono stati salvati i log lato client, selezionare i file di log da analizzare e fare clic su **Apri**.</span><span class="sxs-lookup"><span data-stu-id="2118b-277">To load the client-side log data, click on **Add Files**, browse to the location where you saved your client-side logs, select the log files you want to analyze, and click **Open**.</span></span> <span data-ttu-id="2118b-278">Nel pannello **Dettagli sessione** selezionare **AzureStorageClientDotNetV4** nell'elenco a discesa **Configurazione log di testo** per ogni file di log lato client per assicurarsi che Microsoft Message Analyzer possa analizzare correttamente il file di log.</span><span class="sxs-lookup"><span data-stu-id="2118b-278">Then, in the **Session Details** panel, set the **Text Log Configuration** drop-down for each client-side log file to **AzureStorageClientDotNetV4** to ensure that Microsoft Message Analyzer can parse the log file correctly.</span></span>
5. <span data-ttu-id="2118b-279">Fare clic su **Avvia** nella finestra di dialogo **Nuova sessione** per caricare e analizzare i dati di log.</span><span class="sxs-lookup"><span data-stu-id="2118b-279">Click **Start** in the **New Session** dialog to load and parse the log data.</span></span> <span data-ttu-id="2118b-280">I dati di log vengono visualizzati nella griglia di analisi di Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="2118b-280">The log data displays in the Message Analyzer Analysis Grid.</span></span>

<span data-ttu-id="2118b-281">La figura seguente mostra una sessione di esempio configurata con i file di log di traccia di rete, client e server.</span><span class="sxs-lookup"><span data-stu-id="2118b-281">The picture below shows an example session configured with server, client, and network trace log files.</span></span>

![Configurare la sessione di Message Analyzer](./media/storage-e2e-troubleshooting-classic-portal/configure-mma-session-1.png)

<span data-ttu-id="2118b-283">Si noti che Message Analyzer carica i file di log in memoria.</span><span class="sxs-lookup"><span data-stu-id="2118b-283">Note that Message Analyzer loads log files into memory.</span></span> <span data-ttu-id="2118b-284">Se si dispone di un ampio set di dati di log, è consigliabile filtrarlo per ottenere prestazioni ottimali da Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="2118b-284">If you have a large set of log data, you will want to filter it in order to get the best performance from Message Analyzer.</span></span>

<span data-ttu-id="2118b-285">Determinare innanzitutto l'intervallo di tempo da esaminare e ridurlo al minimo.</span><span class="sxs-lookup"><span data-stu-id="2118b-285">First, determine the time frame that you are interested in reviewing, and keep this time frame as small as possible.</span></span> <span data-ttu-id="2118b-286">In molti casi è sufficiente esaminare al massimo un periodo di qualche minuto o ora.</span><span class="sxs-lookup"><span data-stu-id="2118b-286">In many cases you will want to review a period of minutes or hours at most.</span></span> <span data-ttu-id="2118b-287">Importare il set di log più piccolo possibile in grado di soddisfare le proprie esigenze.</span><span class="sxs-lookup"><span data-stu-id="2118b-287">Import the smallest set of logs that can meet your needs.</span></span>

<span data-ttu-id="2118b-288">Se la quantità di dati di log è comunque considerevole, è possibile specificare un filtro di sessione per filtrare i dati prima di caricarli.</span><span class="sxs-lookup"><span data-stu-id="2118b-288">If you still have a large amount of log data, then you may want to specify a session filter to filter your log data before you load it.</span></span> <span data-ttu-id="2118b-289">Nel riquadro **Filtro sessione** fare clic sul pulsante **Libreria** e selezionare un filtro predefinito. Ad esempio, scegliere **Global Time Filter I** (Filtro Tempo di esecuzione globale I) nei filtri di Archiviazione di Azure per filtrare in base a un intervallo di tempo.</span><span class="sxs-lookup"><span data-stu-id="2118b-289">In the **Session Filter** box, select the **Library** button to choose a predefined filter; for example, choose **Global Time Filter I** from the Azure Storage filters to filter on a time interval.</span></span> <span data-ttu-id="2118b-290">È quindi possibile modificare i criteri di filtro per specificare il timestamp di inizio e fine per l'intervallo che si vuole visualizzare.</span><span class="sxs-lookup"><span data-stu-id="2118b-290">You can then edit the filter criteria to specify the starting and ending timestamp for the interval you want to see.</span></span> <span data-ttu-id="2118b-291">È anche possibile filtrare in base a un codice di stato specifico, ad esempio caricando solo le voci di log il cui codice di stato è 404.</span><span class="sxs-lookup"><span data-stu-id="2118b-291">You can also filter on a particular status code; for example, you can choose to load only log entries where the status code is 404.</span></span>

<span data-ttu-id="2118b-292">Per altre informazioni sull'importazione dei dati di log in Microsoft Message Analyzer, vedere [l'argomento relativo al recupero dei dati dei messaggi su](http://technet.microsoft.com/library/dn772437.aspx) TechNet.</span><span class="sxs-lookup"><span data-stu-id="2118b-292">For more information about importing log data into Microsoft Message Analyzer, see [Retrieving Message Data](http://technet.microsoft.com/library/dn772437.aspx) on TechNet.</span></span>

### <a name="use-the-client-request-id-to-correlate-log-file-data"></a><span data-ttu-id="2118b-293">Usare l'ID richiesta client per correlare i dati dei file di log</span><span class="sxs-lookup"><span data-stu-id="2118b-293">Use the client request ID to correlate log file data</span></span>
<span data-ttu-id="2118b-294">La libreria client di archiviazione di Azure genera automaticamente un ID richiesta client univoco per ogni richiesta.</span><span class="sxs-lookup"><span data-stu-id="2118b-294">The Azure Storage Client Library automatically generates a unique client request ID for every request.</span></span> <span data-ttu-id="2118b-295">Questo valore viene scritto nel log del client, nel log del server e nella traccia di rete e può quindi essere usato per correlare i dati nei tre log all'interno di Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="2118b-295">This value is written to the client log, the server log, and the network trace, so you can use it to correlate data across all three logs within Message Analyzer.</span></span> <span data-ttu-id="2118b-296">Per altre informazioni sull'ID richiesta client, vedere [ID richiesta client](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) .</span><span class="sxs-lookup"><span data-stu-id="2118b-296">See [Client request ID](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) for additional information about the client request ID.</span></span>

<span data-ttu-id="2118b-297">Nelle sezioni seguenti viene descritto come usare i layout preconfigurati e personalizzati per correlare e raggruppare i dati in base all'ID richiesta client.</span><span class="sxs-lookup"><span data-stu-id="2118b-297">The sections below describe how to use pre-configured and custom layout views to correlate and group data based on the client request ID.</span></span>

### <a name="select-a-view-layout-to-display-in-the-analysis-grid"></a><span data-ttu-id="2118b-298">Selezionare un layout per la visualizzazione nella griglia di analisi</span><span class="sxs-lookup"><span data-stu-id="2118b-298">Select a view layout to display in the Analysis Grid</span></span>
<span data-ttu-id="2118b-299">Le risorse di archiviazione per Message Analyzer includono i layout di visualizzazione di Archiviazione di Azure, viste preconfigurate che è possibile usare per presentare i dati con colonne e raggruppamenti utili per i diversi scenari.</span><span class="sxs-lookup"><span data-stu-id="2118b-299">The Storage Assets for Message Analyzer include Azure Storage View Layouts, which are pre-configured views that you can use to display your data with useful groupings and columns for different scenarios.</span></span> <span data-ttu-id="2118b-300">È anche possibile creare layout di visualizzazione personalizzati e salvarli per riutilizzarli in futuro.</span><span class="sxs-lookup"><span data-stu-id="2118b-300">You can also create custom view layouts and save them for reuse.</span></span>

<span data-ttu-id="2118b-301">La figura seguente illustra il menu **Visualizza layout**, disponibile selezionando **Visualizza layout** sulla barra multifunzione.</span><span class="sxs-lookup"><span data-stu-id="2118b-301">The picture below shows the **View Layout** menu, available by selecting **View Layout** from the toolbar ribbon.</span></span> <span data-ttu-id="2118b-302">I layout di visualizzazione per Archiviazione di Azure sono raggruppati nel nodo **Archiviazione di Azure** del menu.</span><span class="sxs-lookup"><span data-stu-id="2118b-302">The view layouts for Azure Storage are grouped under the **Azure Storage** node in the menu.</span></span> <span data-ttu-id="2118b-303">È possibile cercare `Azure Storage` nella casella di ricerca per filtrare solo i layout di visualizzazione di Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-303">You can search for `Azure Storage` in the search box to filter on Azure Storage view layouts only.</span></span> <span data-ttu-id="2118b-304">È anche possibile fare clic sulla stella accanto a un layout di visualizzazione per impostarlo come preferito e visualizzarlo nella parte superiore del menu.</span><span class="sxs-lookup"><span data-stu-id="2118b-304">You can also select the star next to a view layout to make it a favorite and display it at the top of the menu.</span></span>

![Menu Visualizza layout](./media/storage-e2e-troubleshooting-classic-portal/view-layout-menu.png)

<span data-ttu-id="2118b-306">Per iniziare, selezionare **Raggruppati per ClientRequestID e modulo**.</span><span class="sxs-lookup"><span data-stu-id="2118b-306">To begin with, select **Grouped by ClientRequestID and Module**.</span></span> <span data-ttu-id="2118b-307">In questo layout di visualizzazione sono raggruppati i dati dei tre log prima in base all'ID richiesta client, quindi in base al file di log di origine (o **Modulo** in Message Analyzer).</span><span class="sxs-lookup"><span data-stu-id="2118b-307">This view layout groups log data from all three logs first by client request ID, then by source log file (or **Module** in Message Analyzer).</span></span> <span data-ttu-id="2118b-308">Questa visualizzazione consente di eseguire il drill-down in un particolare ID richiesta client e visualizzare i dati dei tre file di log per tale ID richiesta client.</span><span class="sxs-lookup"><span data-stu-id="2118b-308">With this view, you can drill down into a particular client request ID, and see data from all three log files for that client request ID.</span></span>

<span data-ttu-id="2118b-309">L'immagine seguente mostra questa visualizzazione di layout applicata ai dati di log di esempio, con un subset di colonne visualizzato.</span><span class="sxs-lookup"><span data-stu-id="2118b-309">The picture below shows this layout view applied to the sample log data, with a subset of columns displayed.</span></span> <span data-ttu-id="2118b-310">Si noterà che, per un determinato ID richiesta client, nella griglia di analisi sono visualizzati i dati tratti dal log del client, dal log del server e dalla traccia di rete.</span><span class="sxs-lookup"><span data-stu-id="2118b-310">You can see that for a particular client request ID, the Analysis Grid displays data from the client log, server log, and network trace.</span></span>

![Layout di visualizzazione di Archiviazione di Azure](./media/storage-e2e-troubleshooting-classic-portal/view-layout-client-request-id-module.png)

> [!NOTE]
> <span data-ttu-id="2118b-312">Dato che nei diversi file di log possono essere presenti colonne diverse, quando nella griglia di analisi vengono visualizzati i dati da più file di log, è possibile che alcune colonne non contengano dati per una particolare riga.</span><span class="sxs-lookup"><span data-stu-id="2118b-312">Different log files have different columns, so when data from multiple log files is displayed in the Analysis Grid, some columns may not contain any data for a given row.</span></span> <span data-ttu-id="2118b-313">Ad esempio, nell’immagine precedente, nelle righe relative al log del client non vengono visualizzati i dati per le colonne **Timestamp**, **TimeElapsed**, **Source** e **Destination**, in quanto queste colonne non sono presenti nel log del client, ma lo sono nella traccia di rete.</span><span class="sxs-lookup"><span data-stu-id="2118b-313">For example, in the picture above, the client log rows do not show any data for the **Timestamp**, **TimeElapsed**, **Source**, and **Destination** columns, because these columns do not exist in the client log, but do exist in the network trace.</span></span> <span data-ttu-id="2118b-314">Analogamente, nella colonna **Timestamp** vengono visualizzati i dati di timestamp del log del server, ma non vengono visualizzati dati per le colonne **TimeElapsed**, **Source** e **Destination**, che non fanno parte del log del server.</span><span class="sxs-lookup"><span data-stu-id="2118b-314">Similarly, the **Timestamp** column displays timestamp data from the server log, but no data is displayed for the **TimeElapsed**, **Source**, and **Destination** columns, which are not part of the server log.</span></span>
>
>

<span data-ttu-id="2118b-315">Oltre a usare i layout di visualizzazione di Archiviazione di Azure, è possibile definire e salvare un layout di visualizzazione personalizzato.</span><span class="sxs-lookup"><span data-stu-id="2118b-315">In addition to using the Azure Storage view layouts, you can also define and save your own view layouts.</span></span> <span data-ttu-id="2118b-316">È anche possibile selezionare altri campi per il raggruppamento dei dati e salvare questo raggruppamento all'interno del layout personalizzato.</span><span class="sxs-lookup"><span data-stu-id="2118b-316">You can select other desired fields for grouping data and save the grouping as part of your custom layout as well.</span></span>

### <a name="apply-color-rules-to-the-analysis-grid"></a><span data-ttu-id="2118b-317">Applicare le regole colore alla griglia di analisi</span><span class="sxs-lookup"><span data-stu-id="2118b-317">Apply color rules to the Analysis Grid</span></span>
<span data-ttu-id="2118b-318">Le risorse di archiviazione includono anche regole colore, che consentono di identificare visivamente i diversi tipi di errore nella griglia di analisi.</span><span class="sxs-lookup"><span data-stu-id="2118b-318">The Storage Assets also include color rules, which offer a visual means to identify different types of errors in the Analysis Grid.</span></span> <span data-ttu-id="2118b-319">Le regole colore predefinite sono valide per gli errori HTTP, quindi sono disponibili solo per il log del server e per la traccia di rete.</span><span class="sxs-lookup"><span data-stu-id="2118b-319">The predefined color rules apply to HTTP errors, so they appear only for the server log and network trace.</span></span>

<span data-ttu-id="2118b-320">Per applicare le regole colore, selezionare **Regole colori** sulla barra multifunzione.</span><span class="sxs-lookup"><span data-stu-id="2118b-320">To apply color rules, select **Color Rules** from the toolbar ribbon.</span></span> <span data-ttu-id="2118b-321">Nel menu sono presenti le regole colore di Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-321">You'll see the Azure Storage color rules in the menu.</span></span> <span data-ttu-id="2118b-322">Per l'esercitazione selezionare **Errori del client (StatusCode tra 400 e 499)**, come mostrato nell'immagine seguente.</span><span class="sxs-lookup"><span data-stu-id="2118b-322">For the tutorial, select **Client Errors (StatusCode between 400 and 499)**, as shown in the picture below.</span></span>

![Layout di visualizzazione di Archiviazione di Azure](./media/storage-e2e-troubleshooting-classic-portal/color-rules-menu.png)

<span data-ttu-id="2118b-324">Oltre a usare le regole colore di Archiviazione di Azure, è possibile definire e salvare regole colore personalizzate.</span><span class="sxs-lookup"><span data-stu-id="2118b-324">In addition to using the Azure Storage color rules, you can also define and save your own color rules.</span></span>

### <a name="group-and-filter-log-data-to-find-400-range-errors"></a><span data-ttu-id="2118b-325">Raggruppare e filtrare i dati di log per individuare gli errori nella fascia 400</span><span class="sxs-lookup"><span data-stu-id="2118b-325">Group and filter log data to find 400-range errors</span></span>
<span data-ttu-id="2118b-326">A questo punto i dati di log vengono raggruppati e filtrare per trovare tutti gli errori inclusi nella fascia 400.</span><span class="sxs-lookup"><span data-stu-id="2118b-326">Next, we'll group and filter the log data to find all errors in the 400 range.</span></span>

1. <span data-ttu-id="2118b-327">Individuare la colonna **StatusCode** nella griglia di analisi, fare clic con il pulsante destro del mouse sull'intestazione di colonna e scegliere **Gruppo**.</span><span class="sxs-lookup"><span data-stu-id="2118b-327">Locate the **StatusCode** column in the Analysis Grid, right-click the column heading, and select **Group**.</span></span>
2. <span data-ttu-id="2118b-328">Quindi raggruppare in base alla colonna **ClientRequestId** .</span><span class="sxs-lookup"><span data-stu-id="2118b-328">Next, group on the **ClientRequestId** column.</span></span> <span data-ttu-id="2118b-329">I dati nella grigli di analisi verranno organizzati in base al codice di stato e all'ID richiesta client.</span><span class="sxs-lookup"><span data-stu-id="2118b-329">You'll see that the data in the Analysis Grid is now organized by status code and by client request ID.</span></span>
3. <span data-ttu-id="2118b-330">Visualizzare la finestra degli strumenti View Filter se non è visualizzata.</span><span class="sxs-lookup"><span data-stu-id="2118b-330">Display the View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="2118b-331">Sulla barra multifunzione selezionare **Finestre degli strumenti** e **Filtro visualizzazione**.</span><span class="sxs-lookup"><span data-stu-id="2118b-331">On the toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
4. <span data-ttu-id="2118b-332">Per filtrare i dati di log in modo da visualizzare solo gli errori della fascia 400, aggiungere i criteri di filtro seguenti nella finestra **Filtro visualizzazione** e fare clic su **Applica**:</span><span class="sxs-lookup"><span data-stu-id="2118b-332">To filter the log data to display only 400-range errors, add the following filter criteria to the **View Filter** window, and click **Apply**:</span></span>

    ```   
    (AzureStorageLog.StatusCode >= 400 && AzureStorageLog.StatusCode <=499) || (HTTP.StatusCode >= 400 && HTTP.StatusCode <= 499)
    ```

<span data-ttu-id="2118b-333">L'immagine seguente mostra i risultati di questo raggruppamento e filtro.</span><span class="sxs-lookup"><span data-stu-id="2118b-333">The picture below shows the results of this grouping and filter.</span></span> <span data-ttu-id="2118b-334">Se si espande il campo **ClientRequestID** sotto il raggruppamento per codice di stato 409, ad esempio, viene visualizzata un'operazione che ha generato questo codice di stato.</span><span class="sxs-lookup"><span data-stu-id="2118b-334">Expanding the **ClientRequestID** field beneath the grouping for status code 409, for example, shows an operation that resulted in that status code.</span></span>

![Layout di visualizzazione di Archiviazione di Azure](./media/storage-e2e-troubleshooting-classic-portal/400-range-errors1.png)

<span data-ttu-id="2118b-336">Dopo aver applicato il filtro, si noterà che vengono escluse le righe del log del client, dato che in questo log non è presente la colonna **StatusCode** .</span><span class="sxs-lookup"><span data-stu-id="2118b-336">After applying this filter, you'll see that rows from the client log are excluded, as the client log does not include a **StatusCode** column.</span></span> <span data-ttu-id="2118b-337">Si inizierà esaminando i log di traccia di rete e del server per individuare gli errori 404, quindi si tornerà al log del client per esaminare le attività client da cui hanno avuto origine.</span><span class="sxs-lookup"><span data-stu-id="2118b-337">To begin with, we'll review the server and network trace logs to locate 404 errors, and then we'll return to the client log to examine the client operations that led to them.</span></span>

> [!NOTE]
> <span data-ttu-id="2118b-338">È possibile filtrare in base alla colonna **StatusCode** e visualizzare comunque i dati di tutti e tre i log, compreso il log del client, se si aggiunge un'espressione di filtro che include le voci di log in cui il codice di stato è null.</span><span class="sxs-lookup"><span data-stu-id="2118b-338">You can filter on the **StatusCode** column and still display data from all three logs, including the client log, if you add an expression to the filter that includes log entries where the status code is null.</span></span> <span data-ttu-id="2118b-339">Per costruire questa espressione di filtro, usare:</span><span class="sxs-lookup"><span data-stu-id="2118b-339">To construct this filter expression, use:</span></span>
>
> <code>&#42;StatusCode >= 400 or !&#42;StatusCode</code>
>
> <span data-ttu-id="2118b-340">Questo filtro restituisce tutte le righe del log del client e solo righe del log del server e del log HTTP in cui il codice di stato è maggiore di 400.</span><span class="sxs-lookup"><span data-stu-id="2118b-340">This filter returns all rows from the client log and only rows from the server log and HTTP log where the status code is greater than 400.</span></span> <span data-ttu-id="2118b-341">Se viene applicato al layout di visualizzazione raggruppato per ID richiesta client e modulo, è possibile cercare o scorrere le voci di log per trovare quelle in cui sono rappresentati tutte e tre i log.</span><span class="sxs-lookup"><span data-stu-id="2118b-341">If you apply it to the view layout grouped by client request ID and module, you can search or scroll through the log entries to find ones where all three logs are represented.</span></span>   
>
>

### <a name="filter-log-data-to-find-404-errors"></a><span data-ttu-id="2118b-342">Filtrare i dati di log per trovare gli errori 404</span><span class="sxs-lookup"><span data-stu-id="2118b-342">Filter log data to find 404 errors</span></span>
<span data-ttu-id="2118b-343">Le risorse di archiviazione includono filtri predefiniti che possono essere usati per limitare i dati di log per trovare gli errori o le tendenze che si stanno cercando.</span><span class="sxs-lookup"><span data-stu-id="2118b-343">The Storage Assets include predefined filters that you can use to narrow log data to find the errors or trends you are looking for.</span></span> <span data-ttu-id="2118b-344">A questo punto verranno applicati due filtri predefiniti: uno che filtra il log del server e il log della traccia di rete per trovare gli errori 404 e uno che filtra i dati in un determinato intervallo di tempo.</span><span class="sxs-lookup"><span data-stu-id="2118b-344">Next, we'll apply two predefined filters: one that filters the server and network trace logs for 404 errors, and one that filters the data on a specified time range.</span></span>

1. <span data-ttu-id="2118b-345">Visualizzare la finestra degli strumenti View Filter se non è visualizzata.</span><span class="sxs-lookup"><span data-stu-id="2118b-345">Display the View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="2118b-346">Sulla barra multifunzione selezionare **Finestre degli strumenti** e **Filtro visualizzazione**.</span><span class="sxs-lookup"><span data-stu-id="2118b-346">On the toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
2. <span data-ttu-id="2118b-347">Nella finestra Filtro visualizzazione selezionare **Libreria** e cercare in `Azure Storage` per trovare i filtri di Archiviazione di Azure.</span><span class="sxs-lookup"><span data-stu-id="2118b-347">In the View Filter window, select **Library**, and search on `Azure Storage` to find the Azure Storage filters.</span></span> <span data-ttu-id="2118b-348">Selezionare il filtro **Messaggi 404 (non trovato) in tutti i log**.</span><span class="sxs-lookup"><span data-stu-id="2118b-348">Select the filter for **404 (Not Found) messages in all logs**.</span></span>
3. <span data-ttu-id="2118b-349">Visualizzare nuovamente il menu **Libreria** e quindi individuare e selezionare **Global Time Filter** (Filtro tempo di esecuzione globale).</span><span class="sxs-lookup"><span data-stu-id="2118b-349">Display the **Library** menu again, and locate and select the **Global Time Filter**.</span></span>
4. <span data-ttu-id="2118b-350">Modificare i timestamp presenti nel filtro impostando l'intervallo che si vuole visualizzare.</span><span class="sxs-lookup"><span data-stu-id="2118b-350">Edit the timestamps shown in the filter to the range you wish to view.</span></span> <span data-ttu-id="2118b-351">In questo modo si limiterà l'intervallo di date da analizzare.</span><span class="sxs-lookup"><span data-stu-id="2118b-351">This will help to narrow the range of data to analyze.</span></span>
5. <span data-ttu-id="2118b-352">Il filtro dovrebbe risultare analogo a quello riportato nell'esempio seguente.</span><span class="sxs-lookup"><span data-stu-id="2118b-352">Your filter should appear similar to the example below.</span></span> <span data-ttu-id="2118b-353">Fare clic su **Applica** per applicare il filtro alla griglia di analisi.</span><span class="sxs-lookup"><span data-stu-id="2118b-353">Click **Apply** to apply the filter to the Analysis Grid.</span></span>

    ```   
    ((AzureStorageLog.StatusCode == 404 || HTTP.StatusCode == 404)) And
    (#Timestamp >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39)
    ```

![Layout di visualizzazione di Archiviazione di Azure](./media/storage-e2e-troubleshooting-classic-portal/404-filtered-errors1.png)

### <a name="analyze-your-log-data"></a><span data-ttu-id="2118b-355">Analizzare i dati di log</span><span class="sxs-lookup"><span data-stu-id="2118b-355">Analyze your log data</span></span>
<span data-ttu-id="2118b-356">Con i dati raggruppati e filtrati, è possibile esaminare i dettagli delle singole richieste che hanno generato errori 404.</span><span class="sxs-lookup"><span data-stu-id="2118b-356">Now that you have grouped and filtered your data, you can examine the details of individual requests that generated 404 errors.</span></span> <span data-ttu-id="2118b-357">Nel layout di visualizzazione corrente i dati sono raggruppati per ID richiesta client, quindi in base all'origine del log.</span><span class="sxs-lookup"><span data-stu-id="2118b-357">In the current view layout, the data is grouped by client request ID, then by log source.</span></span> <span data-ttu-id="2118b-358">Poiché vengono filtrate le richieste il cui campo StatusCode contiene 404, saranno visualizzati solo i dati del server e della traccia di rete, non i dati del log del client.</span><span class="sxs-lookup"><span data-stu-id="2118b-358">Since we are filtering on requests where the StatusCode field contains 404, we'll see only the server and network trace data, not the client log data.</span></span>

<span data-ttu-id="2118b-359">L'immagine seguente mostra una richiesta specifica in cui un'operazione Get Blob ha restituito un errore 404 perché il BLOB era inesistente.</span><span class="sxs-lookup"><span data-stu-id="2118b-359">The picture below shows a specific request where a Get Blob operation yielded a 404 because the blob did not exist.</span></span> <span data-ttu-id="2118b-360">Tenere presente che alcune colonne sono state rimosse dalla visualizzazione standard per mostrare i dati pertinenti.</span><span class="sxs-lookup"><span data-stu-id="2118b-360">Note that some columns have been removed from the standard view in order to display the relevant data.</span></span>

![Log della traccia di rete e del server filtrati](./media/storage-e2e-troubleshooting-classic-portal/server-filtered-404-error.png)

<span data-ttu-id="2118b-362">Successivamente, questo ID richiesta client verrà correlato con i dati del log del client per mostrare le azioni che il client stava effettuando quando si è verificato l'errore.</span><span class="sxs-lookup"><span data-stu-id="2118b-362">Next, we'll correlate this client request ID with the client log data to see what actions the client was taking when the error happened.</span></span> <span data-ttu-id="2118b-363">È possibile ottenere una nuova visualizzazione della griglia di analisi per la sessione corrente per visualizzare i dati del log del client, che viene aperto in una seconda scheda:</span><span class="sxs-lookup"><span data-stu-id="2118b-363">You can display a new Analysis Grid view for this session to view the client log data, which opens in a second tab:</span></span>

1. <span data-ttu-id="2118b-364">Copiare innanzitutto il valore del campo **ClientRequestId** negli Appunti.</span><span class="sxs-lookup"><span data-stu-id="2118b-364">First, copy the value of the **ClientRequestId** field to the clipboard.</span></span> <span data-ttu-id="2118b-365">A questo scopo, selezionare una delle due righe, trovare il campo **ClientRequestId**, fare clic con il pulsante destro del mouse sul valore dei dati e scegliere **Copia 'ClientRequestId'**.</span><span class="sxs-lookup"><span data-stu-id="2118b-365">You can do this by selecting either row, locating the **ClientRequestId** field, right-clicking on the data value, and choosing **Copy 'ClientRequestId'**.</span></span>
2. <span data-ttu-id="2118b-366">Sulla barra multifunzione selezionare **Nuovo visualizzatore** e selezionare **Griglia analisi** per aprire una nuova scheda.</span><span class="sxs-lookup"><span data-stu-id="2118b-366">On the toolbar ribbon, select **New Viewer**, then select **Analysis Grid** to open a new tab.</span></span> <span data-ttu-id="2118b-367">Nella nuova scheda sono visualizzati tutti i dati presenti dei file di log, senza raggruppamenti, filtri o regole colore.</span><span class="sxs-lookup"><span data-stu-id="2118b-367">The new tab shows all data in your log files, without grouping, filtering, or color rules.</span></span>
3. <span data-ttu-id="2118b-368">Sulla barra multifunzione selezionare **Visualizza layout** e scegliere **Tutte le colonne del client .NET** nella sezione **Archiviazione di Azure**.</span><span class="sxs-lookup"><span data-stu-id="2118b-368">On the toolbar ribbon, select **View Layout**, then select **All .NET Client Columns** under the **Azure Storage** section.</span></span> <span data-ttu-id="2118b-369">In questo layout di visualizzazione sono presenti dati tratti dal log del client, nonché dal log del server e dal log della traccia di rete.</span><span class="sxs-lookup"><span data-stu-id="2118b-369">This view layout shows data from the client log as well as the server and network trace logs.</span></span> <span data-ttu-id="2118b-370">Per impostazione predefinita, è ordinato in base alla colonna **MessageNumber** .</span><span class="sxs-lookup"><span data-stu-id="2118b-370">By default it is sorted on the **MessageNumber** column.</span></span>
4. <span data-ttu-id="2118b-371">Cercare quindi l'ID richiesta client nel log del client.</span><span class="sxs-lookup"><span data-stu-id="2118b-371">Next, search the client log for the client request ID.</span></span> <span data-ttu-id="2118b-372">Sulla barra multifunzione selezionare **Trova messaggi** e specificare un filtro personalizzato in base all'ID richiesta client nel campo **Trova**.</span><span class="sxs-lookup"><span data-stu-id="2118b-372">On the toolbar ribbon, select **Find Messages**, then specify a custom filter on the client request ID in the **Find** field.</span></span> <span data-ttu-id="2118b-373">Usare questa sintassi per il filtro, specificando il proprio ID richiesta client:</span><span class="sxs-lookup"><span data-stu-id="2118b-373">Use this syntax for the filter, specifying your own client request ID:</span></span>

    ```  
    *ClientRequestId == "398bac41-7725-484b-8a69-2a9e48fc669a"
    ```

<span data-ttu-id="2118b-374">Message Analyzer individua e seleziona la prima voce del log in cui i criterio di ricerca corrispondono all'ID richiesta client.</span><span class="sxs-lookup"><span data-stu-id="2118b-374">Message Analyzer locates and selects the first log entry where the search criteria matches the client request ID.</span></span> <span data-ttu-id="2118b-375">Nel log del client sono presenti varie voci per ogni ID richiesta client, pertanto è consigliabile raggrupparle nel campo **ClientRequestId** per visualizzarle facilmente tutte insieme.</span><span class="sxs-lookup"><span data-stu-id="2118b-375">In the client log, there are several entries for each client request ID, so you may want to group them on the **ClientRequestId** field to make it easier to see them all together.</span></span> <span data-ttu-id="2118b-376">L'immagine seguente mostra tutti i messaggi nel log del client per l'ID richiesta client specificato.</span><span class="sxs-lookup"><span data-stu-id="2118b-376">The picture below shows all of the messages in the client log for the specified client request ID.</span></span>

![Log del client con errori 404](./media/storage-e2e-troubleshooting-classic-portal/client-log-analysis-grid1.png)

<span data-ttu-id="2118b-378">Mediante i dati presenti nei layout di visualizzazione in queste due schede è possibile analizzare i dati della richiesta per determinare le possibili cause dell'errore.</span><span class="sxs-lookup"><span data-stu-id="2118b-378">Using the data shown in the view layouts in these two tabs, you can analyze the request data to determine what may have caused the error.</span></span> <span data-ttu-id="2118b-379">È anche possibile esaminare le richieste precedenti per stabilire se l'errore 404 può essere riconducibile a un evento precedente.</span><span class="sxs-lookup"><span data-stu-id="2118b-379">You can also look at requests that preceded this one to see if a previous event may have led to the 404 error.</span></span> <span data-ttu-id="2118b-380">Ad esempio, è possibile esaminare le voci del log del client precedenti rispetto a questo ID richiesta client per determinare se il BLOB è stato eliminato o se l'errore è dovuto a un'applicazione client che chiama un'API CreateIfNotExists in un contenitore o BLOB.</span><span class="sxs-lookup"><span data-stu-id="2118b-380">For example, you can review the client log entries preceding this client request ID to determine whether the blob may have been deleted, or if the error was due to the client application calling a CreateIfNotExists API on a container or blob.</span></span> <span data-ttu-id="2118b-381">Nel log del client è possibile trovare l'indirizzo del BLOB nel campo **Descrizione**, mentre nel log del server e nel log della traccia di rete queste informazioni sono riportate nel campo **Riepilogo**.</span><span class="sxs-lookup"><span data-stu-id="2118b-381">In the client log, you can find the blob's address in the **Description** field; in the server and network trace logs, this information appears in the **Summary** field.</span></span>

<span data-ttu-id="2118b-382">Quando si conosce l'indirizzo del BLOB che ha restituito l'errore 404, è possibile effettuare ulteriori approfondimenti.</span><span class="sxs-lookup"><span data-stu-id="2118b-382">Once you know the address of the blob that yielded the 404 error, you can investigate further.</span></span> <span data-ttu-id="2118b-383">Se esegue una ricerca nelle voci di log per individuare altri messaggi associati alle operazioni nello stesso BLOB, è possibile verificare se l'entità è stata eliminata in precedenza dal client.</span><span class="sxs-lookup"><span data-stu-id="2118b-383">If you search the log entries for other messages associated with operations on the same blob, you can check whether the client previously deleted the entity.</span></span>

## <a name="analyze-other-types-of-storage-errors"></a><span data-ttu-id="2118b-384">Analizzare altri tipi di errori di archiviazione</span><span class="sxs-lookup"><span data-stu-id="2118b-384">Analyze other types of storage errors</span></span>
<span data-ttu-id="2118b-385">Dopo avere acquisito familiarità con l'uso di Message Analyzer per analizzare i dati di log, è possibile analizzare altri tipi di errori usando i layout di visualizzazione, le regole colore e le funzionalità di ricerca/filtro.</span><span class="sxs-lookup"><span data-stu-id="2118b-385">Now that you are familiar with using Message Analyzer to analyze your log data, you can analyze other types of errors using view layouts, color rules, and searching/filtering.</span></span> <span data-ttu-id="2118b-386">Nelle tabelle seguenti sono elencati alcuni problemi che possono verificarsi e i criteri di filtro che è possibile usare per individuarli.</span><span class="sxs-lookup"><span data-stu-id="2118b-386">The tables below lists some issues you may encounter and the filter criteria you can use to locate them.</span></span> <span data-ttu-id="2118b-387">Per altre informazioni sulla creazione di filtri e sul linguaggio di filtro di Message Analyzer, vedere [l'argomento relativo al filtraggio dei dati dei messaggi](http://technet.microsoft.com/library/jj819365.aspx).</span><span class="sxs-lookup"><span data-stu-id="2118b-387">For more information on constructing filters and the Message Analyzer filtering language, see [Filtering Message Data](http://technet.microsoft.com/library/jj819365.aspx).</span></span>

| <span data-ttu-id="2118b-388">Per esaminare...</span><span class="sxs-lookup"><span data-stu-id="2118b-388">To Investigate…</span></span> | <span data-ttu-id="2118b-389">Usare l'espressione di filtro...</span><span class="sxs-lookup"><span data-stu-id="2118b-389">Use Filter Expression…</span></span> | <span data-ttu-id="2118b-390">Log a cui è applicabile l'espressione (client, server, rete, tutti)</span><span class="sxs-lookup"><span data-stu-id="2118b-390">Expression Applies to Log (Client, Server,   Network, All)</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2118b-391">Ritardi imprevisti nel recapito dei messaggi in una coda</span><span class="sxs-lookup"><span data-stu-id="2118b-391">Unexpected delays in message delivery on a queue</span></span> |<span data-ttu-id="2118b-392">AzureStorageClientDotNetV4.Description   contains "Retrying failed operation."</span><span class="sxs-lookup"><span data-stu-id="2118b-392">AzureStorageClientDotNetV4.Description   contains "Retrying failed operation."</span></span> |<span data-ttu-id="2118b-393">Client</span><span class="sxs-lookup"><span data-stu-id="2118b-393">Client</span></span> |
| <span data-ttu-id="2118b-394">Aumento di PercentThrottlingError HTTP</span><span class="sxs-lookup"><span data-stu-id="2118b-394">HTTP Increase in PercentThrottlingError</span></span> |<span data-ttu-id="2118b-395">HTTP.Response.StatusCode   == 500 &#124;&#124; HTTP.Response.StatusCode == 503</span><span class="sxs-lookup"><span data-stu-id="2118b-395">HTTP.Response.StatusCode   == 500 &#124;&#124; HTTP.Response.StatusCode == 503</span></span> |<span data-ttu-id="2118b-396">Rete</span><span class="sxs-lookup"><span data-stu-id="2118b-396">Network</span></span> |
| <span data-ttu-id="2118b-397">Aumento di PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="2118b-397">Increase in PercentTimeoutError</span></span> |<span data-ttu-id="2118b-398">HTTP.Response.StatusCode   == 500</span><span class="sxs-lookup"><span data-stu-id="2118b-398">HTTP.Response.StatusCode   == 500</span></span> |<span data-ttu-id="2118b-399">Rete</span><span class="sxs-lookup"><span data-stu-id="2118b-399">Network</span></span> |
| <span data-ttu-id="2118b-400">Aumento di PercentTimeoutError (tutti)</span><span class="sxs-lookup"><span data-stu-id="2118b-400">Increase in PercentTimeoutError (all)</span></span> |<span data-ttu-id="2118b-401">*StatusCode   == 500</span><span class="sxs-lookup"><span data-stu-id="2118b-401">*StatusCode   == 500</span></span> |<span data-ttu-id="2118b-402">Tutti</span><span class="sxs-lookup"><span data-stu-id="2118b-402">All</span></span> |
| <span data-ttu-id="2118b-403">Aumento di PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="2118b-403">Increase in PercentNetworkError</span></span> |<span data-ttu-id="2118b-404">AzureStorageClientDotNetV4.EventLogEntry.Level   < 2</span><span class="sxs-lookup"><span data-stu-id="2118b-404">AzureStorageClientDotNetV4.EventLogEntry.Level   < 2</span></span> |<span data-ttu-id="2118b-405">Client</span><span class="sxs-lookup"><span data-stu-id="2118b-405">Client</span></span> |
| <span data-ttu-id="2118b-406">Messaggi HTTP 403 (Accesso negato)</span><span class="sxs-lookup"><span data-stu-id="2118b-406">HTTP 403 (Forbidden) messages</span></span> |<span data-ttu-id="2118b-407">HTTP.Response.StatusCode   == 403</span><span class="sxs-lookup"><span data-stu-id="2118b-407">HTTP.Response.StatusCode   == 403</span></span> |<span data-ttu-id="2118b-408">Rete</span><span class="sxs-lookup"><span data-stu-id="2118b-408">Network</span></span> |
| <span data-ttu-id="2118b-409">Messaggi HTTP 404 (Non trovato)</span><span class="sxs-lookup"><span data-stu-id="2118b-409">HTTP 404 (Not found) messages</span></span> |<span data-ttu-id="2118b-410">HTTP.Response.StatusCode   == 404</span><span class="sxs-lookup"><span data-stu-id="2118b-410">HTTP.Response.StatusCode   == 404</span></span> |<span data-ttu-id="2118b-411">Rete</span><span class="sxs-lookup"><span data-stu-id="2118b-411">Network</span></span> |
| <span data-ttu-id="2118b-412">404 (tutti)</span><span class="sxs-lookup"><span data-stu-id="2118b-412">404 (all)</span></span> |<span data-ttu-id="2118b-413">*StatusCode   == 404</span><span class="sxs-lookup"><span data-stu-id="2118b-413">*StatusCode   == 404</span></span> |<span data-ttu-id="2118b-414">Tutti</span><span class="sxs-lookup"><span data-stu-id="2118b-414">All</span></span> |
| <span data-ttu-id="2118b-415">Problema di autorizzazione della firma di accesso condiviso</span><span class="sxs-lookup"><span data-stu-id="2118b-415">Shared Access Signature (SAS) authorization issue</span></span> |<span data-ttu-id="2118b-416">AzureStorageLog.RequestStatus ==  "SASAuthorizationError"</span><span class="sxs-lookup"><span data-stu-id="2118b-416">AzureStorageLog.RequestStatus ==  "SASAuthorizationError"</span></span> |<span data-ttu-id="2118b-417">Rete</span><span class="sxs-lookup"><span data-stu-id="2118b-417">Network</span></span> |
| <span data-ttu-id="2118b-418">Messaggi HTTP 409 (Conflitto)</span><span class="sxs-lookup"><span data-stu-id="2118b-418">HTTP 409 (Conflict) messages</span></span> |<span data-ttu-id="2118b-419">HTTP.Response.StatusCode   == 409</span><span class="sxs-lookup"><span data-stu-id="2118b-419">HTTP.Response.StatusCode   == 409</span></span> |<span data-ttu-id="2118b-420">Rete</span><span class="sxs-lookup"><span data-stu-id="2118b-420">Network</span></span> |
| <span data-ttu-id="2118b-421">409 (tutti)</span><span class="sxs-lookup"><span data-stu-id="2118b-421">409 (all)</span></span> |<span data-ttu-id="2118b-422">*StatusCode   == 409</span><span class="sxs-lookup"><span data-stu-id="2118b-422">*StatusCode   == 409</span></span> |<span data-ttu-id="2118b-423">Tutti</span><span class="sxs-lookup"><span data-stu-id="2118b-423">All</span></span> |
| <span data-ttu-id="2118b-424">Un valore PercentSuccess basso o le voci del log di analisi contengono operazioni con stato della transazione ClientOtherErrors</span><span class="sxs-lookup"><span data-stu-id="2118b-424">Low PercentSuccess or analytics log entries have   operations with transaction status of ClientOtherErrors</span></span> |<span data-ttu-id="2118b-425">AzureStorageLog.RequestStatus ==   "ClientOtherError"</span><span class="sxs-lookup"><span data-stu-id="2118b-425">AzureStorageLog.RequestStatus ==   "ClientOtherError"</span></span> |<span data-ttu-id="2118b-426">Server</span><span class="sxs-lookup"><span data-stu-id="2118b-426">Server</span></span> |
| <span data-ttu-id="2118b-427">Avviso Nagle</span><span class="sxs-lookup"><span data-stu-id="2118b-427">Nagle   Warning</span></span> |<span data-ttu-id="2118b-428">((AzureStorageLog.EndToEndLatencyMS   - AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS *   1.5)) e (AzureStorageLog.RequestPacketSize <1460) e (AzureStorageLog.EndToEndLatencyMS -   AzureStorageLog.ServerLatencyMS >= 200)</span><span class="sxs-lookup"><span data-stu-id="2118b-428">((AzureStorageLog.EndToEndLatencyMS   - AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS *   1.5)) and (AzureStorageLog.RequestPacketSize <1460) and (AzureStorageLog.EndToEndLatencyMS -   AzureStorageLog.ServerLatencyMS >= 200)</span></span> |<span data-ttu-id="2118b-429">Server</span><span class="sxs-lookup"><span data-stu-id="2118b-429">Server</span></span> |
| <span data-ttu-id="2118b-430">Intervallo di tempo nei log del server e di rete</span><span class="sxs-lookup"><span data-stu-id="2118b-430">Range of   time in Server and Network logs</span></span> |<span data-ttu-id="2118b-431">#Timestamp   >= 2014-10-20T16:36:38 e #Timestamp <= 2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="2118b-431">#Timestamp   >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39</span></span> |<span data-ttu-id="2118b-432">Server, Rete</span><span class="sxs-lookup"><span data-stu-id="2118b-432">Server, Network</span></span> |
| <span data-ttu-id="2118b-433">Intervallo di tempo nei log del server</span><span class="sxs-lookup"><span data-stu-id="2118b-433">Range of   time in Server logs</span></span> |<span data-ttu-id="2118b-434">AzureStorageLog.Timestamp   >= 2014-10-20T16:36:38 e AzureStorageLog.Timestamp <=   2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="2118b-434">AzureStorageLog.Timestamp   >= 2014-10-20T16:36:38 and AzureStorageLog.Timestamp <=   2014-10-20T16:36:39</span></span> |<span data-ttu-id="2118b-435">Server</span><span class="sxs-lookup"><span data-stu-id="2118b-435">Server</span></span> |

## <a name="next-steps"></a><span data-ttu-id="2118b-436">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="2118b-436">Next steps</span></span>
<span data-ttu-id="2118b-437">Per altre informazioni sugli scenari end-to-end di risoluzione dei problemi di archiviazione di Azure, vedere le risorse seguenti:</span><span class="sxs-lookup"><span data-stu-id="2118b-437">For more information about troubleshooting end-to-end scenarios in Azure Storage, see these resources:</span></span>

* [<span data-ttu-id="2118b-438">Monitoraggio, diagnosi e risoluzione dei problemi del servizio di archiviazione di Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="2118b-438">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>](storage-monitoring-diagnosing-troubleshooting.md)
* [<span data-ttu-id="2118b-439">Analisi dell'archiviazione</span><span class="sxs-lookup"><span data-stu-id="2118b-439">Storage Analytics</span></span>](http://msdn.microsoft.com/library/azure/hh343270.aspx)
* [<span data-ttu-id="2118b-440">Monitorare un account di archiviazione nel portale di Azure</span><span class="sxs-lookup"><span data-stu-id="2118b-440">Monitor a storage account in the Azure Portal</span></span>](storage-monitor-storage-account.md)
* [<span data-ttu-id="2118b-441">Trasferire dati con l'utilità della riga di comando AzCopy</span><span class="sxs-lookup"><span data-stu-id="2118b-441">Transfer data with the AzCopy command-line utility</span></span>](storage-use-azcopy.md)
* [<span data-ttu-id="2118b-442">Guida operativa di Microsoft Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="2118b-442">Microsoft Message Analyzer Operating Guide</span></span>](http://technet.microsoft.com/library/jj649776.aspx)
