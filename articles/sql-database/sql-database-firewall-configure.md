---
title: Regole del firewall per il database SQL di Azure | Documentazione Microsoft
description: Informazioni su come configurare un firewall del database SQL con regole del firewall a livello di server e a livello di database per la gestione dell'accesso.
keywords: firewall del database
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 583c91376418d20d34db17d57d3fa14a1e71cd3b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="dfe6e-104">Regole firewall a livello di server e di database per il database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="dfe6e-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="dfe6e-105">Il database SQL di Microsoft Azure fornisce un servizio di database relazionale per Azure e altre applicazioni basate su Internet.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="dfe6e-106">Per proteggere i dati, il firewall impedisce qualsiasi accesso al server di database finché non vengono specificati i computer autorizzati.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-106">To help protect your data, firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="dfe6e-107">Il firewall concede l'accesso ai database in base all'indirizzo IP di origine di ogni richiesta.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-107">The firewall grants access to databases based on the originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="dfe6e-108">Panoramica</span><span class="sxs-lookup"><span data-stu-id="dfe6e-108">Overview</span></span>

<span data-ttu-id="dfe6e-109">Inizialmente tutti gli accessi Transact-SQL al server di database SQL di Azure sono bloccati dal firewall.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-109">Initially, all Transact-SQL access to your Azure SQL server is blocked by the firewall.</span></span> <span data-ttu-id="dfe6e-110">Per iniziare a usare il server SQL di Azure, è necessario specificare una o più regole del firewall a livello di server che consentano di accedere al server SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-110">To begin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access to your Azure SQL server.</span></span> <span data-ttu-id="dfe6e-111">Usare le regole del firewall per specificare quali intervalli di indirizzi IP da Internet sono consentiti e se le applicazioni Azure possono provare a connettersi al server SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-111">Use the firewall rules to specify which IP address ranges from the Internet are allowed, and whether Azure applications can attempt to connect to your Azure SQL server.</span></span>

<span data-ttu-id="dfe6e-112">Per concedere in modo selettivo l'accesso solo a uno dei database in SQL Server di Azure, è necessario creare una regola a livello di database per il database richiesto.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-112">To selectively grant access to just one of the databases in your Azure SQL server, you must create a database-level rule for the required database.</span></span> <span data-ttu-id="dfe6e-113">Specificare un intervallo di indirizzi IP per la regola firewall del database che sia successivo all'indirizzo IP specificato nella regola firewall a livello di server e assicurarsi che l'indirizzo IP del client ricada nell'intervallo specificato nella regola a livello di database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-113">Specify an IP address range for the database firewall rule that is beyond the IP address range specified in the server-level firewall rule, and ensure that the IP address of the client falls in the range specified in the database-level rule.</span></span>

<span data-ttu-id="dfe6e-114">I tentativi di connessione da Internet e Azure devono prima superare il firewall per poter raggiungere il server SQL di Azure o un database SQL, come illustrato nel diagramma seguente:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-114">Connection attempts from the Internet and Azure must first pass through the firewall before they can reach your Azure SQL server or SQL Database, as shown in the following diagram:</span></span>

   ![Diagramma che descrive la configurazione del firewall.][1]

* <span data-ttu-id="dfe6e-116">**Regole del firewall a livello di server:** queste regole consentono ai client di accedere all'intero server SQL di Azure, ovvero tutti i database all'interno dello stesso server logico.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-116">**Server-level firewall rules:** These rules enable clients to access your entire Azure SQL server, that is, all the databases within the same logical server.</span></span> <span data-ttu-id="dfe6e-117">Queste regole sono archiviate nel database **master** .</span><span class="sxs-lookup"><span data-stu-id="dfe6e-117">These rules are stored in the **master** database.</span></span> <span data-ttu-id="dfe6e-118">Le regole del firewall a livello di server possono essere configurate usando il portale o istruzioni Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-118">Server-level firewall rules can be configured by using the portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="dfe6e-119">Per creare regole del firewall a livello di server usando il portale di Azure o PowerShell, è necessario essere il proprietario o un collaboratore della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-119">To create server-level firewall rules using the Azure portal or PowerShell, you must be the subscription owner or a subscription contributor.</span></span> <span data-ttu-id="dfe6e-120">Per creare una regola del firewall a livello di server usando Transact-SQL, è necessario connettersi all'istanza di database SQL come account di accesso entità di livello server o amministratore di Azure Active Directory, il che implica che una regola del firewall a livello di server debba essere prima creata da un utente con autorizzazioni a livello di Azure.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-120">To create a server-level firewall rule using Transact-SQL, you must connect to the SQL Database instance as the server-level principal login or the Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="dfe6e-121">**Regole del firewall a livello di database:**. Queste regole consentono ai client di accedere a determinati database (sicuri) nello stesso server logico.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-121">**Database-level firewall rules:** These rules enable clients to access certain (secure) databases within the same logical server.</span></span> <span data-ttu-id="dfe6e-122">È possibile creare queste regole per ogni database (incluso il database0 **master**) ed esse sono archiviate nei singoli database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-122">You can create these rules for each database (including the **master** database0) and they are stored in the individual databases.</span></span> <span data-ttu-id="dfe6e-123">Le regole del firewall a livello di database possono essere configurate solo usando le istruzioni Transact-SQL e solo dopo aver configurato il primo firewall a livello di server.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured the first server-level firewall.</span></span> <span data-ttu-id="dfe6e-124">Se nella regola del firewall a livello di database si specifica un intervallo di indirizzi IP che non rientra nell'intervallo specificato nella regola del firewall a livello di server, solo i client che dispongono di indirizzi IP compresi nell'intervallo a livello di database possono accedere al database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-124">If you specify an IP address range in the database-level firewall rule that is outside the range specified in the server-level firewall rule, only those clients that have IP addresses in the database-level range can access the database.</span></span> <span data-ttu-id="dfe6e-125">Per un database è possibile avere un massimo di 128 regole del firewall a livello di database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="dfe6e-126">Le regole del firewall a livello di database per database master e utente possono essere create e gestite solo tramite Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="dfe6e-127">Per altre informazioni su come configurare le regole del firewall a livello di database, vedere l'esempio presente in questo articolo e vedere [sp_set_database_firewall_rule (Database SQL di Azure)](https://msdn.microsoft.com/library/dn270010.aspx).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-127">For more information on configuring database-level firewall rules, see the example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="dfe6e-128">**Indicazione:** è consigliabile usare le regole del firewall a livello di database quando è possibile, allo scopo di migliorare la sicurezza e la portabilità del database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible to enhance security and to make your database more portable.</span></span> <span data-ttu-id="dfe6e-129">Usare le regole del firewall a livello di server per gli amministratori e quando sono disponibili molti database che presentano gli stessi requisiti di accesso e non si vuole dedicare tempo alla configurazione di ogni singolo database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-129">Use server-level firewall rules for administrators and when you have many databases that have the same access requirements and you don't want to spend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="dfe6e-130">Per informazioni sui database portabili per la continuità aziendale, vedere nel contesto della continuità aziendale, vedere i [requisiti di autenticazione per il ripristino di emergenza](sql-database-geo-replication-security-config.md).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-130">For information about portable databases in the context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-the-internet"></a><span data-ttu-id="dfe6e-131">Connessione da Internet</span><span class="sxs-lookup"><span data-stu-id="dfe6e-131">Connecting from the Internet</span></span>

<span data-ttu-id="dfe6e-132">Quando un computer cerca di connettersi al server di database da Internet, il firewall confronta prima l'indirizzo IP di origine della richiesta con le regole firewall a livello di database, per il database richiesto dalla connessione:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-132">When a computer attempts to connect to your database server from the Internet, the firewall first checks the originating IP address of the request against the database-level firewall rules, for the database that the connection is requesting:</span></span>

* <span data-ttu-id="dfe6e-133">Se l'indirizzo IP della richiesta rientra in uno degli intervalli specificati nelle regole firewall a livello di database, viene consentita la connessione al database SQL che contiene le regole.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-133">If the IP address of the request is within one of the ranges specified in the database-level firewall rules, the connection is granted to the SQL Database that contains the rule.</span></span>
* <span data-ttu-id="dfe6e-134">Se l'indirizzo IP della richiesta non rientra in uno degli intervalli specificati nelle regole firewall a livello di database, vengono controllate le regole firewall a livello di server.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-134">If the IP address of the request is not within one of the ranges specified in the database-level firewall rule, the server-level firewall rules are checked.</span></span> <span data-ttu-id="dfe6e-135">Se l'indirizzo IP della richiesta rientra in uno degli intervalli specificati nelle regole firewall a livello di server, viene consentita la connessione.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-135">If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted.</span></span> <span data-ttu-id="dfe6e-136">Le regole firewall a livello di server si applicano a tutti i database SQL nel server di Azure SQL.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-136">Server-level firewall rules apply to all SQL databases on the Azure SQL server.</span></span>  
* <span data-ttu-id="dfe6e-137">Se l'indirizzo IP della richiesta non rientra negli intervalli specificati in una delle regole firewall a livello di database o di server, la richiesta di connessione ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-137">If the IP address of the request is not within the ranges specified in any of the database-level or server-level firewall rules, the connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="dfe6e-138">Per accedere al database SQL di Azure dal computer locale, verificare che il firewall in rete e nel computer locale consenta le comunicazioni in uscita sulla porta TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-138">To access Azure SQL Database from your local computer, ensure the firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="dfe6e-139">Connessione da Azure</span><span class="sxs-lookup"><span data-stu-id="dfe6e-139">Connecting from Azure</span></span>
<span data-ttu-id="dfe6e-140">Per consentire alle applicazioni da Azure di stabilire la connessione al server di Azure SQL, è necessario abilitare le connessioni da Azure.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-140">To allow applications from Azure to connect to your Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="dfe6e-141">Quando si tenta di connettersi al server di database da un'applicazione di Azure, il firewall verifica che le connessioni da Azure siano consentite.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-141">When an application from Azure attempts to connect to your database server, the firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="dfe6e-142">Un'impostazione del firewall con indirizzo iniziale e finale uguale a 0.0.0.0 indica che queste connessioni sono consentite.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-142">A firewall setting with starting and ending address equal to 0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="dfe6e-143">Se il tentativo di connessione non è consentito, la richiesta non raggiungerà il server di Database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-143">If the connection attempt is not allowed, the request does not reach the Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="dfe6e-144">Questa opzione permette di configurare il firewall in maniera tale da consentire tutte le connessioni da Azure, incluse le connessioni dalle sottoscrizioni di altri clienti.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-144">This option configures the firewall to allow all connections from Azure including connections from the subscriptions of other customers.</span></span> <span data-ttu-id="dfe6e-145">Quando si seleziona questa opzione, assicurarsi che l'account di accesso e le autorizzazioni utente limitino l'accesso ai soli utenti autorizzati.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-145">When selecting this option, make sure your login and user permissions limit access to only authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="dfe6e-146">Creazione e gestione di regole del firewall</span><span class="sxs-lookup"><span data-stu-id="dfe6e-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="dfe6e-147">La prima impostazione del firewall a livello di server può essere creata usando il [Portale di Azure](https://portal.azure.com/) o a livello di programmazione tramite [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [l'interfaccia della riga di comando di Azure](/cli/azure/sql/server/firewall-rule#create), o l'[API REST](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-147">The first server-level firewall setting can be created using the [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or the [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="dfe6e-148">Le regole del firewall a livello di server successive possono essere create e gestite utilizzando questi metodi e tramite Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="dfe6e-149">Le regole del firewall a livello di database possono essere create e gestite solo con Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="dfe6e-150">Per migliorare le prestazioni, le regole del firewall a livello di server vengono temporaneamente memorizzate nella cache a livello di database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-150">To improve performance, server-level firewall rules are temporarily cached at the database level.</span></span> <span data-ttu-id="dfe6e-151">Per aggiornare la cache, vedere [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-151">To refresh the cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="dfe6e-152">È possibile usare il [servizio di controllo del database SQL](sql-database-auditing.md) per controllare le modifiche del firewall a livello di server e di database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-152">You can use [SQL Database Auditing](sql-database-auditing.md) to audit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="dfe6e-153">Portale di Azure</span><span class="sxs-lookup"><span data-stu-id="dfe6e-153">Azure portal</span></span>

<span data-ttu-id="dfe6e-154">Per impostare una regola del firewall a livello di server nel portale di Azure, è possibile passare alla pagina di Panoramica per il database SQL di Azure o alla pagina di Panoramica per il server logico del Database di Azure.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-154">To set a server-level firewall rule in the Azure portal, you can either go to the Overview page for your Azure SQL database or the Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="dfe6e-155">Per un'esercitazione, vedere [Creare un database tramite il portale di Azure](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-155">For a tutorial, see [Create a DB using the Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="dfe6e-156">**Dalla pagina di Panoramica del database**</span><span class="sxs-lookup"><span data-stu-id="dfe6e-156">**From database overview page**</span></span>

1. <span data-ttu-id="dfe6e-157">Per impostare una regola del firewall a livello di server dalla pagina di panoramica del database, fare clic su **Imposta firewall server** sulla barra degli strumenti, come illustrato nella figura seguente: la pagina **Impostazioni del Firewall** verrà visualizzata per il server del Database SQL.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-157">To set a server-level firewall rule from the database overview page, click **Set server firewall** on the toolbar as shown in the following image: The **Firewall settings** page for the SQL Database server opens.</span></span>

      ![Regola del firewall del server](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="dfe6e-159">Fare clic su **Aggiungi IP client** sulla barra degli strumenti per aggiungere l'indirizzo IP del computer attualmente in uso e quindi fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-159">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="dfe6e-160">Una regola del firewall a livello di server viene creata per l'indirizzo IP corrente.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![Impostare la regola del firewall del server](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="dfe6e-162">**Dalla pagina della panoramica del server**</span><span class="sxs-lookup"><span data-stu-id="dfe6e-162">**From server overview page**</span></span>

<span data-ttu-id="dfe6e-163">Si apre la pagina di panoramica per il server che visualizza il nome completo del server, ad esempio **mynewserver20170403.database.windows.net**, e offre altre opzioni di configurazione.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-163">The overview page for your server opens, showing you the fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="dfe6e-164">Per impostare una regola a livello di server dalla pagina di panoramica del server, fare clic su **Firewall** nel menu a sinistra sotto le Impostazioni come illustrato nell'immagine seguente:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-164">To set a server-level rule from server overview page, click **Firewall** in the left-hand menu under Settings as showed in the following image:</span></span> 

     ![panoramica del server logico](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="dfe6e-166">Fare clic su **Aggiungi IP client** sulla barra degli strumenti per aggiungere l'indirizzo IP del computer attualmente in uso e quindi fare clic su **Salva**.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-166">Click **Add client IP** on the toolbar to add the IP address of the computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="dfe6e-167">Una regola del firewall a livello di server viene creata per l'indirizzo IP corrente.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![Impostare la regola del firewall del server](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="dfe6e-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="dfe6e-169">Transact-SQL</span></span>
| <span data-ttu-id="dfe6e-170">Vista del catalogo o una Stored Procedure</span><span class="sxs-lookup"><span data-stu-id="dfe6e-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="dfe6e-171">Level</span><span class="sxs-lookup"><span data-stu-id="dfe6e-171">Level</span></span> | <span data-ttu-id="dfe6e-172">Descrizione</span><span class="sxs-lookup"><span data-stu-id="dfe6e-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="dfe6e-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="dfe6e-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="dfe6e-174">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-174">Server</span></span> |<span data-ttu-id="dfe6e-175">Visualizza le regole del firewall a livello di server correnti</span><span class="sxs-lookup"><span data-stu-id="dfe6e-175">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="dfe6e-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="dfe6e-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="dfe6e-177">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-177">Server</span></span> |<span data-ttu-id="dfe6e-178">Crea o aggiorna regole del firewall a livello di server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="dfe6e-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="dfe6e-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="dfe6e-180">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-180">Server</span></span> |<span data-ttu-id="dfe6e-181">Rimuove regole del firewall a livello di server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="dfe6e-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="dfe6e-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="dfe6e-183">Database</span><span class="sxs-lookup"><span data-stu-id="dfe6e-183">Database</span></span> |<span data-ttu-id="dfe6e-184">Visualizza le regole del firewall a livello di database correnti</span><span class="sxs-lookup"><span data-stu-id="dfe6e-184">Displays the current database-level firewall rules</span></span> |
| [<span data-ttu-id="dfe6e-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="dfe6e-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="dfe6e-186">Database</span><span class="sxs-lookup"><span data-stu-id="dfe6e-186">Database</span></span> |<span data-ttu-id="dfe6e-187">Crea o aggiorna regole del firewall a livello di database</span><span class="sxs-lookup"><span data-stu-id="dfe6e-187">Creates or updates the database-level firewall rules</span></span> |
| [<span data-ttu-id="dfe6e-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="dfe6e-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="dfe6e-189">Database</span><span class="sxs-lookup"><span data-stu-id="dfe6e-189">Databases</span></span> |<span data-ttu-id="dfe6e-190">Rimuove le regole del firewall a livello di database</span><span class="sxs-lookup"><span data-stu-id="dfe6e-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="dfe6e-191">Negli esempi seguenti si rivedono le regole esistenti, si attiva un intervallo di indirizzi IP nel server di Contoso e si elimina una regola del firewall:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-191">The following examples review the existing rules, enable a range of IP addresses on the server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="dfe6e-192">Successivamente, aggiungere una regola del firewall.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="dfe6e-193">Per eliminare una regola del firewall a livello di server, eseguire la stored procedure sp_delete_firewall_rule.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-193">To delete a server-level firewall rule, execute the sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="dfe6e-194">Nell'esempio seguente viene eliminata la regola denominata ContosoFirewallRule:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-194">The following example deletes the rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="dfe6e-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="dfe6e-195">Azure PowerShell</span></span>
| <span data-ttu-id="dfe6e-196">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="dfe6e-196">Cmdlet</span></span> | <span data-ttu-id="dfe6e-197">Level</span><span class="sxs-lookup"><span data-stu-id="dfe6e-197">Level</span></span> | <span data-ttu-id="dfe6e-198">Descrizione</span><span class="sxs-lookup"><span data-stu-id="dfe6e-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="dfe6e-199">Get-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="dfe6e-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="dfe6e-200">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-200">Server</span></span> |<span data-ttu-id="dfe6e-201">Restituisce le regole del firewall a livello di server correnti</span><span class="sxs-lookup"><span data-stu-id="dfe6e-201">Returns the current server-level firewall rules</span></span> |
| [<span data-ttu-id="dfe6e-202">New-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="dfe6e-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="dfe6e-203">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-203">Server</span></span> |<span data-ttu-id="dfe6e-204">Crea una nuova regola del firewall a livello di server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="dfe6e-205">Set-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="dfe6e-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="dfe6e-206">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-206">Server</span></span> |<span data-ttu-id="dfe6e-207">Aggiorna le proprietà di una regola del firewall a livello di server esistente</span><span class="sxs-lookup"><span data-stu-id="dfe6e-207">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="dfe6e-208">Remove-AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="dfe6e-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="dfe6e-209">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-209">Server</span></span> |<span data-ttu-id="dfe6e-210">Rimuove regole del firewall a livello di server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="dfe6e-211">Nell'esempio seguente si imposta una regola del firewall a livello di server con PowerShell:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-211">The following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="dfe6e-212">Per esempi di PowerShell nel contesto di una Guida introduttiva, vedere [Creare un singolo database SQL di Azure usando PowerShell](sql-database-get-started-powershell.md) e [Creare un singolo database SQL e configurare una regola del firewall usando PowerShell](scripts/sql-database-create-and-configure-database-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-212">For PowerShell examples in the context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="dfe6e-213">Interfaccia della riga di comando di Azure</span><span class="sxs-lookup"><span data-stu-id="dfe6e-213">Azure CLI</span></span>
| <span data-ttu-id="dfe6e-214">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="dfe6e-214">Cmdlet</span></span> | <span data-ttu-id="dfe6e-215">Level</span><span class="sxs-lookup"><span data-stu-id="dfe6e-215">Level</span></span> | <span data-ttu-id="dfe6e-216">Descrizione</span><span class="sxs-lookup"><span data-stu-id="dfe6e-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="dfe6e-217">az sql server firewall create</span><span class="sxs-lookup"><span data-stu-id="dfe6e-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="dfe6e-218">Consente di creare una regola del firewall per consentire l'accesso a tutti i database SQL presenti sul server dall'intervallo di indirizzi IP immesso.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-218">Creates a firewall rule to allow access to all SQL Databases on the server from the entered IP address range.</span></span>|
| [<span data-ttu-id="dfe6e-219">az sql server firewall delete</span><span class="sxs-lookup"><span data-stu-id="dfe6e-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="dfe6e-220">Elimina una regola del firewall.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="dfe6e-221">az sql server firewall list</span><span class="sxs-lookup"><span data-stu-id="dfe6e-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="dfe6e-222">Elenca le regole del firewall.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-222">Lists the firewall rules.</span></span>|
| [<span data-ttu-id="dfe6e-223">az sql server firewall rule show</span><span class="sxs-lookup"><span data-stu-id="dfe6e-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="dfe6e-224">Visualizza i dettagli di una regola del firewall.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-224">Shows the details of a firewall rule.</span></span>|
| [<span data-ttu-id="dfe6e-225">ax sql server firewall rule update</span><span class="sxs-lookup"><span data-stu-id="dfe6e-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="dfe6e-226">Aggiorna una regola del firewall.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-226">Updates a firewall rule.</span></span>

<span data-ttu-id="dfe6e-227">Nell'esempio seguente si imposta una regola del firewall a livello di server con l'interfaccia della riga di comando di Azure:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-227">The following example sets a server-level firewall rule using the Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="dfe6e-228">Per un esempio di interfaccia della riga di comando di Azure nel contesto di una Guida introduttiva, vedere [Creare un singolo database SQL di Azure usando l'interfaccia della riga di comando di Azure](sql-database-get-started-cli.md) e [Creare un singolo database SQL e configurare una regola del firewall tramite l'interfaccia della riga di comando di Azure](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="dfe6e-228">For an Azure CLI example in the context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using the Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="dfe6e-229">API REST</span><span class="sxs-lookup"><span data-stu-id="dfe6e-229">REST API</span></span>
| <span data-ttu-id="dfe6e-230">API</span><span class="sxs-lookup"><span data-stu-id="dfe6e-230">API</span></span> | <span data-ttu-id="dfe6e-231">Level</span><span class="sxs-lookup"><span data-stu-id="dfe6e-231">Level</span></span> | <span data-ttu-id="dfe6e-232">Descrizione</span><span class="sxs-lookup"><span data-stu-id="dfe6e-232">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="dfe6e-233">Elencare le regole del firewall</span><span class="sxs-lookup"><span data-stu-id="dfe6e-233">List Firewall Rules</span></span>](https://msdn.microsoft.com/library/azure/dn505715.aspx) |<span data-ttu-id="dfe6e-234">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-234">Server</span></span> |<span data-ttu-id="dfe6e-235">Visualizza le regole del firewall a livello di server correnti</span><span class="sxs-lookup"><span data-stu-id="dfe6e-235">Displays the current server-level firewall rules</span></span> |
| [<span data-ttu-id="dfe6e-236">Creare la regola del firewall</span><span class="sxs-lookup"><span data-stu-id="dfe6e-236">Create Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505712.aspx) |<span data-ttu-id="dfe6e-237">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-237">Server</span></span> |<span data-ttu-id="dfe6e-238">Crea o aggiorna regole del firewall a livello di server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-238">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="dfe6e-239">Impostare la regola del firewall</span><span class="sxs-lookup"><span data-stu-id="dfe6e-239">Set Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505707.aspx) |<span data-ttu-id="dfe6e-240">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-240">Server</span></span> |<span data-ttu-id="dfe6e-241">Aggiorna le proprietà di una regola del firewall a livello di server esistente</span><span class="sxs-lookup"><span data-stu-id="dfe6e-241">Updates the properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="dfe6e-242">Eliminare la regola del firewall</span><span class="sxs-lookup"><span data-stu-id="dfe6e-242">Delete Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505706.aspx) |<span data-ttu-id="dfe6e-243">Server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-243">Server</span></span> |<span data-ttu-id="dfe6e-244">Rimuove regole del firewall a livello di server</span><span class="sxs-lookup"><span data-stu-id="dfe6e-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="dfe6e-245">Regola del firewall a livello di server contro una regola del firewall a livello di database</span><span class="sxs-lookup"><span data-stu-id="dfe6e-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="dfe6e-246">D:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-246">Q.</span></span> <span data-ttu-id="dfe6e-247">Gli utenti di un database devono essere completamente isolati da un altro database?</span><span class="sxs-lookup"><span data-stu-id="dfe6e-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="dfe6e-248">In caso affermativo, concedere l'accesso tramite le regole del firewall a livello di database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="dfe6e-249">Per evitare di usare le regole del firewall a livello di server, consentendo l'accesso attraverso il firewall a tutti i database, ridurre la profondità delle difese.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-249">This avoids using server-level firewall rules, which permit access through the firewall to all databases, reducing the depth of your defenses.</span></span>   
 
<span data-ttu-id="dfe6e-250">D:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-250">Q.</span></span> <span data-ttu-id="dfe6e-251">Gli utenti degli indirizzi IP devono avere accesso a tutti i database?</span><span class="sxs-lookup"><span data-stu-id="dfe6e-251">Do users at the IP address’s need access to all databases?</span></span>   
  <span data-ttu-id="dfe6e-252">Usare le regole del firewall a livello di server per ridurre il numero di volte in cui è necessario configurare le regole del firewall.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-252">Use server-level firewall rules to reduce the number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="dfe6e-253">D:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-253">Q.</span></span> <span data-ttu-id="dfe6e-254">La persona o il team che configura le regole del firewall ha accesso solo attraverso il Portale di Azure, PowerShell o l'API REST?</span><span class="sxs-lookup"><span data-stu-id="dfe6e-254">Does the person or team configuring the firewall rules only have access through the Azure portal, PowerShell, or the REST API?</span></span>   
  <span data-ttu-id="dfe6e-255">È necessario usare le regole del firewall a livello di server.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="dfe6e-256">Le regole del firewall a livello di database possono essere configurate solo con Transact-SQL.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="dfe6e-257">D:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-257">Q.</span></span> <span data-ttu-id="dfe6e-258">Alla persona o al team che configura le regole del firewall è vietato avere autorizzazioni elevate a livello di database?</span><span class="sxs-lookup"><span data-stu-id="dfe6e-258">Is the person or team configuring the firewall rules prohibited from having high-level permission at the database level?</span></span>   
  <span data-ttu-id="dfe6e-259">Usare le regole del firewall a livello di server.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-259">Use server-level firewall rules.</span></span> <span data-ttu-id="dfe6e-260">Per configurare regole del firewall a livello di database tramite Transact-SQL, è necessaria almeno l'autorizzazione `CONTROL DATABASE` a livello di database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at the database level.</span></span>  

<span data-ttu-id="dfe6e-261">D:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-261">Q.</span></span> <span data-ttu-id="dfe6e-262">La persona o il team che configura o controlla le regole del firewall gestisce centralmente le regole del firewall per molti database (forse centinaia)?</span><span class="sxs-lookup"><span data-stu-id="dfe6e-262">Is the person or team configuring or auditing the firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="dfe6e-263">Questa selezione dipende dalle esigenze e degli ambienti.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="dfe6e-264">Le regole del firewall a livello di server potrebbero essere più facili da configurare, tuttavia lo scripting consente di configurare le regole a livello di database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-264">Server-level firewall rules might be easier to configure, but scripting can configure rules at the database-level.</span></span> <span data-ttu-id="dfe6e-265">E anche se si usano le regole del firewall a livello di server, potrebbe essere necessario controllare le regole del firewall di database, per verificare se gli utenti con l'autorizzazione `CONTROL` nel database hanno creato le regole del firewall a livello di database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-265">And even if you use server-level firewall rules, you might need to audit the database-firewall rules, to see if users with `CONTROL` permission on the database have created database-level firewall rules.</span></span>   

<span data-ttu-id="dfe6e-266">D:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-266">Q.</span></span> <span data-ttu-id="dfe6e-267">È possibile usare un insieme di regole del firewall a livello di server e di database?</span><span class="sxs-lookup"><span data-stu-id="dfe6e-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="dfe6e-268">Sì.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-268">Yes.</span></span> <span data-ttu-id="dfe6e-269">Alcuni utenti, ad esempio gli amministratori, potrebbero aver bisogno di regole del firewall a livello di server.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="dfe6e-270">Altri utenti, ad esempio gli utenti di un'applicazione di database, potrebbero aver bisogno di regole del firewall a livello di database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-the-database-firewall"></a><span data-ttu-id="dfe6e-271">Risoluzione dei problemi del firewall del database</span><span class="sxs-lookup"><span data-stu-id="dfe6e-271">Troubleshooting the database firewall</span></span>
<span data-ttu-id="dfe6e-272">Quando l'accesso al servizio di database SQL di Microsoft Azure non si comporta come previsto, considerare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-272">Consider the following points when access to the Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="dfe6e-273">**Configurazione del firewall locale:** prima che il computer possa accedere al database SQL di Azure, è necessario creare un'eccezione del firewall sul computer per la porta TCP 1433.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need to create a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="dfe6e-274">Se si effettuano connessioni all'interno dei confini del cloud di Azure, può essere necessario aprire porte aggiuntive.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-274">If you are making connections inside the Azure cloud boundary, you may have to open additional ports.</span></span> <span data-ttu-id="dfe6e-275">Per altre informazioni, vedere la sezione **Esterno rispetto all'interno** di [Porte successive alla 1433 per ADO.NET 4.5](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-275">For more information, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="dfe6e-276">**Rete NAT (Network address translation):** a causa di NAT, l'indirizzo IP utilizzato dal computer per connettersi al database SQL di Azure potrebbe essere diverso da quello indicato nelle impostazioni di configurazione IP del computer.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-276">**Network address translation (NAT):** Due to NAT, the IP address used by your computer to connect to Azure SQL Database may be different than the IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="dfe6e-277">Per visualizzare l'indirizzo IP usato dal computer per connettersi ad Azure, accedere al portale e passare alla scheda **Configura** del server che ospita il database.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-277">To view the IP address your computer is using to connect to Azure, log in to the portal and navigate to the **Configure** tab on the server that hosts your database.</span></span> <span data-ttu-id="dfe6e-278">Nella sezione **Indirizzi IP consentiti** viene visualizzato **lndirizzo IP client corrente**.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-278">Under the **Allowed IP Addresses** section, the **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="dfe6e-279">Fare clic su **Aggiungi** in **Indirizzi IP consentiti** per consentire al computer di accedere al server.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-279">Click **Add** to the **Allowed IP Addresses** to allow this computer to access the server.</span></span>
* <span data-ttu-id="dfe6e-280">**Le modifiche all'elenco di consentiti non sono state ancora applicate:** per rendere effettive le modifiche apportate alla configurazione del firewall del database SQL di Azure possono essere necessari fino a cinque minuti.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-280">**Changes to the allow list have not taken effect yet:** There may be as much as a five-minute delay for changes to the Azure SQL Database firewall configuration to take effect.</span></span>
* <span data-ttu-id="dfe6e-281">**L'accesso non è autorizzato oppure è stata usata una password errata:** quando un account di accesso non dispone di autorizzazioni per il server di database SQL di Azure o la password usata non è corretta, la connessione al server di database SQL di Azure verrà negata.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-281">**The login is not authorized or an incorrect password was used:** If a login does not have permissions on the Azure SQL Database server or the password used is incorrect, the connection to the Azure SQL Database server is denied.</span></span> <span data-ttu-id="dfe6e-282">La creazione di un'impostazione del firewall fornisce ai client soltanto un'opportunità di connessione al server; ogni client deve fornire le credenziali di sicurezza necessarie.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-282">Creating a firewall setting only provides clients with an opportunity to attempt connecting to your server; each client must provide the necessary security credentials.</span></span> <span data-ttu-id="dfe6e-283">Per ulteriori informazioni sulla preparazione degli account di accesso, vedere Gestione di database, account di accesso e utenti nel database SQL di Azure.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="dfe6e-284">**Indirizzo IP dinamico:** se si dispone di una connessione Internet con indirizzi IP dinamici e si verificano problemi di comunicazione attraverso il firewall, è possibile provare una delle seguenti soluzioni:</span><span class="sxs-lookup"><span data-stu-id="dfe6e-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through the firewall, you could try one of the following solutions:</span></span>
  
  * <span data-ttu-id="dfe6e-285">Chiedere al provider di servizi Internet (ISP) l'intervallo di indirizzi IP assegnato ai computer client che accedono al server di database SQL di Azure, quindi aggiungere l'intervallo di indirizzi IP come una regola del firewall.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-285">Ask your Internet Service Provider (ISP) for the IP address range assigned to your client computers that access the Azure SQL Database server, and then add the IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="dfe6e-286">Ottenere indirizzi IP statici per i computer client, quindi aggiungere gli indirizzi IP come regole del firewall.</span><span class="sxs-lookup"><span data-stu-id="dfe6e-286">Get static IP addressing instead for your client computers, and then add the IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="dfe6e-287">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="dfe6e-287">Next steps</span></span>

- <span data-ttu-id="dfe6e-288">Per una Guida introduttiva alla creazione di un database e di una regola del firewall a livello di server, vedere [Creare un database SQL di Azure nel portale di Azure](sql-database-get-started-portal.md).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="dfe6e-289">Per informazioni sulla connessione a un database SQL di Azure da applicazioni open source o di terze parti, vedere [Esempi di codice di avvio rapido del client per il database SQL](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-289">For help in connecting to an Azure SQL database from open source or third-party applications, see [Client quick-start code samples to SQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="dfe6e-290">Per informazioni sulle porte aggiuntive che si possono dover aprire vedere la sezione **Esterno rispetto all'interno** di [Porte successive alla 1433 per ADO.NET 4.5](sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="dfe6e-290">For information on additional ports that you may need to open, see the **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="dfe6e-291">Per una panoramica della sicurezza del Database SQL di Azure vedere [Protezione del Database SQL](sql-database-security-overview.md)</span><span class="sxs-lookup"><span data-stu-id="dfe6e-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
