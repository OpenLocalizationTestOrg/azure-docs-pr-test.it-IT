---
title: 'Azure AD Connect: topologie supportate | Microsoft Docs'
description: Questo argomento illustra in modo dettagliato le topologie supportate e non supportate per Azure AD Connect
services: active-directory
documentationcenter: 
author: AndKjell
manager: femila
editor: 
ms.assetid: 1034c000-59f2-4fc8-8137-2416fa5e4bfe
ms.service: active-directory
ms.devlang: na
ms.tgt_pltfrm: na
ms.workload: identity
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: d7af3a531bc1bcced1a3c48403a6f60afea0f82f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/03/2017
---
# <a name="topologies-for-azure-ad-connect"></a><span data-ttu-id="c3f92-103">Topologie per Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="c3f92-103">Topologies for Azure AD Connect</span></span>
<span data-ttu-id="c3f92-104">Questo articolo descrive diverse topologie locali e di Azure Active Directory (Azure AD) che usano il Servizio di sincronizzazione Azure AD Connect come soluzione di integrazione chiave.</span><span class="sxs-lookup"><span data-stu-id="c3f92-104">This article describes various on-premises and Azure Active Directory (Azure AD) topologies that use Azure AD Connect sync as the key integration solution.</span></span> <span data-ttu-id="c3f92-105">Questo articolo include le configurazioni supportate e non supportate.</span><span class="sxs-lookup"><span data-stu-id="c3f92-105">This article includes both supported and unsupported configurations.</span></span>

<span data-ttu-id="c3f92-106">Ecco la legenda delle immagini usate nell'articolo:</span><span class="sxs-lookup"><span data-stu-id="c3f92-106">Here's the legend for pictures in the article:</span></span>

| <span data-ttu-id="c3f92-107">Descrizione</span><span class="sxs-lookup"><span data-stu-id="c3f92-107">Description</span></span> | <span data-ttu-id="c3f92-108">Simbolo</span><span class="sxs-lookup"><span data-stu-id="c3f92-108">Symbol</span></span> |
| --- | --- |
| <span data-ttu-id="c3f92-109">Foresta locale di Active Directory</span><span class="sxs-lookup"><span data-stu-id="c3f92-109">On-premises Active Directory forest</span></span> |![Foresta locale di Active Directory](./media/active-directory-aadconnect-topologies/LegendAD1.png) |
| <span data-ttu-id="c3f92-111">Active Directory locale con importazione con filtri</span><span class="sxs-lookup"><span data-stu-id="c3f92-111">On-premises Active Directory with filtered import</span></span> |![Active Directory con importazione con filtri](./media/active-directory-aadconnect-topologies/LegendAD2.png) |
| <span data-ttu-id="c3f92-113">Server di sincronizzazione di Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="c3f92-113">Azure AD Connect sync server</span></span> |![Server di sincronizzazione di Azure AD Connect](./media/active-directory-aadconnect-topologies/LegendSync1.png) |
| <span data-ttu-id="c3f92-115">Server di sincronizzazione di Azure AD Connect in "modalità di staging"</span><span class="sxs-lookup"><span data-stu-id="c3f92-115">Azure AD Connect sync server “staging mode”</span></span> |![Server di sincronizzazione di Azure AD Connect in "modalità di staging"](./media/active-directory-aadconnect-topologies/LegendSync2.png) |
| <span data-ttu-id="c3f92-117">GALSync con Forefront Identity Manager (FIM) 2010 o Microsoft Identity Manager (MIM) 2016</span><span class="sxs-lookup"><span data-stu-id="c3f92-117">GALSync with Forefront Identity Manager (FIM) 2010 or Microsoft Identity Manager (MIM) 2016</span></span> |![GALSync con FIM 2010 o MIM 2016](./media/active-directory-aadconnect-topologies/LegendSync3.png) |
| <span data-ttu-id="c3f92-119">Dettagli relativi al server di sincronizzazione di Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="c3f92-119">Azure AD Connect sync server, detailed</span></span> |![Dettagli relativi al server di sincronizzazione di Azure AD Connect](./media/active-directory-aadconnect-topologies/LegendSync4.png) |
| <span data-ttu-id="c3f92-121">Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3f92-121">Azure AD</span></span> |![Azure Active Directory](./media/active-directory-aadconnect-topologies/LegendAAD.png) |
| <span data-ttu-id="c3f92-123">Scenario non supportato</span><span class="sxs-lookup"><span data-stu-id="c3f92-123">Unsupported scenario</span></span> |![Scenario non supportato](./media/active-directory-aadconnect-topologies/LegendUnsupported.png) |

## <a name="single-forest-single-azure-ad-tenant"></a><span data-ttu-id="c3f92-125">Foresta singola, tenant singolo di Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3f92-125">Single forest, single Azure AD tenant</span></span>
![Topologia per una foresta singola e un tenant singolo](./media/active-directory-aadconnect-topologies/SingleForestSingleDirectory.png)

<span data-ttu-id="c3f92-127">La topologia più comune è costituita da una singola foresta locale, con uno o più domini, e un tenant singolo di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-127">The most common topology is a single on-premises forest, with one or multiple domains, and a single Azure AD tenant.</span></span> <span data-ttu-id="c3f92-128">Per l'autenticazione di Azure AD viene usata la sincronizzazione delle password.</span><span class="sxs-lookup"><span data-stu-id="c3f92-128">For Azure AD authentication, password synchronization is used.</span></span> <span data-ttu-id="c3f92-129">L'installazione rapida di Azure AD Connect supporta unicamente questa topologia.</span><span class="sxs-lookup"><span data-stu-id="c3f92-129">The express installation of Azure AD Connect supports only this topology.</span></span>

### <a name="single-forest-multiple-sync-servers-to-one-azure-ad-tenant"></a><span data-ttu-id="c3f92-130">Foresta singola, più server di sincronizzazione a un tenant di Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="c3f92-130">Single forest, multiple sync servers to one Azure AD tenant</span></span>
![Topologia con filtri non supportata per una foresta singola](./media/active-directory-aadconnect-topologies/SingleForestFilteredUnsupported.png)

<span data-ttu-id="c3f92-132">Non è supportato lo scenario che prevede più server di sincronizzazione di Azure AD Connect connessi allo stesso tenant di Azure AD, a eccezione di un [server di staging](#staging-server).</span><span class="sxs-lookup"><span data-stu-id="c3f92-132">Having multiple Azure AD Connect sync servers connected to the same Azure AD tenant is not supported, except for a [staging server](#staging-server).</span></span> <span data-ttu-id="c3f92-133">Non è supportato neanche se i server sono configurati per la sincronizzazione con un set di oggetti che si escludono a vicenda.</span><span class="sxs-lookup"><span data-stu-id="c3f92-133">It's unsupported even if these servers are configured to synchronize with a mutually exclusive set of objects.</span></span> <span data-ttu-id="c3f92-134">Questa topologia potrebbe essere stata presa in considerazione se non è possibile raggiungere tutti i domini della foresta da un unico server o se si vuole distribuire il carico tra server diversi.</span><span class="sxs-lookup"><span data-stu-id="c3f92-134">You might have considered this topology if you can't reach all domains in the forest from a single server, or if you want to distribute load across several servers.</span></span>

## <a name="multiple-forests-single-azure-ad-tenant"></a><span data-ttu-id="c3f92-135">Più foreste, tenant singolo di Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3f92-135">Multiple forests, single Azure AD tenant</span></span>
![Topologia per più foreste e un tenant singolo](./media/active-directory-aadconnect-topologies/MultiForestSingleDirectory.png)

<span data-ttu-id="c3f92-137">In molte organizzazioni sono presenti ambienti con più foreste Active Directory locali.</span><span class="sxs-lookup"><span data-stu-id="c3f92-137">Many organizations have environments with multiple on-premises Active Directory forests.</span></span> <span data-ttu-id="c3f92-138">La presenza di più foreste Active Directory locali può essere dovuta a vari motivi.</span><span class="sxs-lookup"><span data-stu-id="c3f92-138">There are various reasons for having more than one on-premises Active Directory forest.</span></span> <span data-ttu-id="c3f92-139">Esempi tipici sono costituiti da progettazioni con foreste di account-risorse e dai risultati di fusioni o acquisizioni.</span><span class="sxs-lookup"><span data-stu-id="c3f92-139">Typical examples are designs with account-resource forests and the result of a merger or acquisition.</span></span>

<span data-ttu-id="c3f92-140">Quando sono presenti più foreste, devono essere tutte raggiungibili da un singolo server di sincronizzazione di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="c3f92-140">When you have multiple forests, all forests must be reachable by a single Azure AD Connect sync server.</span></span> <span data-ttu-id="c3f92-141">Non è necessario aggiungere il server a un dominio.</span><span class="sxs-lookup"><span data-stu-id="c3f92-141">You don't have to join the server to a domain.</span></span> <span data-ttu-id="c3f92-142">Se è necessario raggiungere tutte le foreste, è possibile inserire il server in una rete perimetrale.</span><span class="sxs-lookup"><span data-stu-id="c3f92-142">If necessary to reach all forests, you can place the server in a perimeter network (also known as DMZ, demilitarized zone, and screened subnet).</span></span>

<span data-ttu-id="c3f92-143">L'installazione guidata di Azure AD Connect offre diverse opzioni per consolidare gli utenti rappresentati in più foreste.</span><span class="sxs-lookup"><span data-stu-id="c3f92-143">The Azure AD Connect installation wizard offers several options to consolidate users who are represented in multiple forests.</span></span> <span data-ttu-id="c3f92-144">L'obiettivo è fare in modo che un utente sia rappresentato una sola volta in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-144">The goal is that a user is represented only once in Azure AD.</span></span> <span data-ttu-id="c3f92-145">Nell'installazione guidata sono disponibili alcune topologie comuni che è possibile configurare nel percorso di installazione personalizzato.</span><span class="sxs-lookup"><span data-stu-id="c3f92-145">There are some common topologies that you can configure in the custom installation path in the installation wizard.</span></span> <span data-ttu-id="c3f92-146">Nella pagina **Identificazione univoca per gli utenti** selezionare l'opzione corrispondente che rappresenta la topologia.</span><span class="sxs-lookup"><span data-stu-id="c3f92-146">On the **Uniquely identifying your users** page, select the corresponding option that represents your topology.</span></span> <span data-ttu-id="c3f92-147">Il consolidamento viene configurato solo per gli utenti.</span><span class="sxs-lookup"><span data-stu-id="c3f92-147">The consolidation is configured only for users.</span></span> <span data-ttu-id="c3f92-148">I gruppi duplicati non vengono consolidati con la configurazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="c3f92-148">Duplicated groups are not consolidated with the default configuration.</span></span>

<span data-ttu-id="c3f92-149">Le topologie comuni sono illustrate nelle sezioni su [topologie separate](#multiple-forests-separate-topologies), [a maglia completa](#multiple-forests-full-mesh-with-optional-galsync) e [topologie account-risorse](#multiple-forests-account-resource-forest).</span><span class="sxs-lookup"><span data-stu-id="c3f92-149">Common topologies are discussed in the sections about [separate topologies](#multiple-forests-separate-topologies), [full mesh](#multiple-forests-full-mesh-with-optional-galsync), and [the account-resource topology](#multiple-forests-account-resource-forest).</span></span>

<span data-ttu-id="c3f92-150">La configurazione predefinita del servizio di sincronizzazione Azure AD Connect presuppone quanto segue:</span><span class="sxs-lookup"><span data-stu-id="c3f92-150">The default configuration in Azure AD Connect sync assumes:</span></span>

* <span data-ttu-id="c3f92-151">Ogni utente ha solo un account abilitato e la foresta in cui si trova l'account viene usata per l'autenticazione dell'utente.</span><span class="sxs-lookup"><span data-stu-id="c3f92-151">Each user has only one enabled account, and the forest where this account is located is used to authenticate the user.</span></span> <span data-ttu-id="c3f92-152">Questo presupposto riguarda sia la sincronizzazione delle password che la federazione.</span><span class="sxs-lookup"><span data-stu-id="c3f92-152">This assumption is for both password sync and federation.</span></span> <span data-ttu-id="c3f92-153">userPrincipalName e sourceAnchor o immutableID provengono da questa foresta.</span><span class="sxs-lookup"><span data-stu-id="c3f92-153">UserPrincipalName and sourceAnchor/immutableID come from this forest.</span></span>
* <span data-ttu-id="c3f92-154">Ogni utente ha solo una cassetta postale.</span><span class="sxs-lookup"><span data-stu-id="c3f92-154">Each user has only one mailbox.</span></span>
* <span data-ttu-id="c3f92-155">La foresta che ospita la cassetta postale di un utente garantisce la migliore qualità dei dati per gli attributi visibili nell'Elenco indirizzi globale di Exchange.</span><span class="sxs-lookup"><span data-stu-id="c3f92-155">The forest that hosts the mailbox for a user has the best data quality for attributes visible in the Exchange Global Address List (GAL).</span></span> <span data-ttu-id="c3f92-156">Se non è presente una cassetta postale per l'utente, è possibile usare qualsiasi foresta per recuperare questi valori di attributi.</span><span class="sxs-lookup"><span data-stu-id="c3f92-156">If there's no mailbox for the user, any forest can be used to contribute these attribute values.</span></span>
* <span data-ttu-id="c3f92-157">Se è disponibile una cassetta postale collegata, è presente anche un account in una foresta diversa usato per l'accesso.</span><span class="sxs-lookup"><span data-stu-id="c3f92-157">If you have a linked mailbox, there's also an account in a different forest used for sign-in.</span></span>

<span data-ttu-id="c3f92-158">Se l'ambiente non soddisfa questi presupposti, si verifica quanto segue:</span><span class="sxs-lookup"><span data-stu-id="c3f92-158">If your environment does not match these assumptions, the following things happen:</span></span>

* <span data-ttu-id="c3f92-159">Se sono presenti più account attivi o più cassette postali, il motore di sincronizzazione ne seleziona uno e ignora gli altri.</span><span class="sxs-lookup"><span data-stu-id="c3f92-159">If you have more than one active account or more than one mailbox, the sync engine picks one and ignores the other.</span></span>
* <span data-ttu-id="c3f92-160">Una cassetta postale collegata priva di account attivi non viene esportata in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-160">A linked mailbox with no other active account is not exported to Azure AD.</span></span> <span data-ttu-id="c3f92-161">L'account utente non è rappresentato come membro in alcun gruppo.</span><span class="sxs-lookup"><span data-stu-id="c3f92-161">The user account is not represented as a member in any group.</span></span> <span data-ttu-id="c3f92-162">Una cassetta postale collegata in DirSync viene sempre rappresentata come cassetta postale normale.</span><span class="sxs-lookup"><span data-stu-id="c3f92-162">A linked mailbox in DirSync is always represented as a normal mailbox.</span></span> <span data-ttu-id="c3f92-163">Questa modifica introduce un comportamento diverso per migliorare il supporto degli scenari a più foreste.</span><span class="sxs-lookup"><span data-stu-id="c3f92-163">This change is intentionally a different behavior to better support multiple-forest scenarios.</span></span>

<span data-ttu-id="c3f92-164">Per altre informazioni, vedere [Informazioni sulla configurazione predefinita](active-directory-aadconnectsync-understanding-default-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="c3f92-164">You can find more details in [Understanding the default configuration](active-directory-aadconnectsync-understanding-default-configuration.md).</span></span>

### <a name="multiple-forests-multiple-sync-servers-to-one-azure-ad-tenant"></a><span data-ttu-id="c3f92-165">Più foreste, più server di sincronizzazione a un tenant di Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="c3f92-165">Multiple forests, multiple sync servers to one Azure AD tenant</span></span>
![Topologia non supportata per più foreste e più server di sincronizzazione](./media/active-directory-aadconnect-topologies/MultiForestMultiSyncUnsupported.png)

<span data-ttu-id="c3f92-167">Non è consentito connettere più server di sincronizzazione di Azure AD Connect a un tenant singolo di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-167">Having more than one Azure AD Connect sync server connected to a single Azure AD tenant is not supported.</span></span> <span data-ttu-id="c3f92-168">Fa eccezione l'uso di un [server di gestione temporanea](#staging-server).</span><span class="sxs-lookup"><span data-stu-id="c3f92-168">The exception is the use of a [staging server](#staging-server).</span></span>

### <a name="multiple-forests-separate-topologies"></a><span data-ttu-id="c3f92-169">Più foreste, topologie separate</span><span class="sxs-lookup"><span data-stu-id="c3f92-169">Multiple forests, separate topologies</span></span>
![Opzione per rappresentare gli utenti solo una volta in tutte le directory](./media/active-directory-aadconnect-topologies/MultiForestUsersOnce.png)

![Immagine di più foreste e topologie separate](./media/active-directory-aadconnect-topologies/MultiForestSeperateTopologies.png)

<span data-ttu-id="c3f92-172">In questo ambiente tutte le foreste locali vengono considerate entità separate.</span><span class="sxs-lookup"><span data-stu-id="c3f92-172">In this environment, all on-premises forests are treated as separate entities.</span></span> <span data-ttu-id="c3f92-173">Nessun utente è presente in nessuna altra foresta.</span><span class="sxs-lookup"><span data-stu-id="c3f92-173">No user is present in any other forest.</span></span> <span data-ttu-id="c3f92-174">Ogni foresta presenta un'organizzazione Exchange dedicata e non viene effettuata alcuna sincronizzazione dell'elenco di indirizzi globale (GALSync) tra le foreste.</span><span class="sxs-lookup"><span data-stu-id="c3f92-174">Each forest has its own Exchange organization, and there's no GALSync between the forests.</span></span> <span data-ttu-id="c3f92-175">Questa topologia può presentarsi dopo una fusione o acquisizione o in un'organizzazione in cui ogni business unit opera in modo indipendente.</span><span class="sxs-lookup"><span data-stu-id="c3f92-175">This topology might be the situation after a merger/acquisition or in an organization where each business unit operates independently.</span></span> <span data-ttu-id="c3f92-176">In Azure AD queste foreste si trovano nella stessa organizzazione e vengono visualizzate con un elenco di indirizzi globale unificato.</span><span class="sxs-lookup"><span data-stu-id="c3f92-176">These forests are in the same organization in Azure AD and appear with a unified GAL.</span></span> <span data-ttu-id="c3f92-177">Nell'immagine precedente ogni oggetto di ogni foresta viene rappresentato una sola volta nel metaverse e aggregato nel tenant di Azure AD di destinazione.</span><span class="sxs-lookup"><span data-stu-id="c3f92-177">In the preceding picture, each object in every forest is represented once in the metaverse and aggregated in the target Azure AD tenant.</span></span>

### <a name="multiple-forests-match-users"></a><span data-ttu-id="c3f92-178">Più foreste: corrispondenze con utenti</span><span class="sxs-lookup"><span data-stu-id="c3f92-178">Multiple forests: match users</span></span>
<span data-ttu-id="c3f92-179">Tutti gli scenari hanno in comune il fatto che i gruppi di distribuzione e di sicurezza possono contenere una combinazione di utenti, contatti ed entità di sicurezza esterne.</span><span class="sxs-lookup"><span data-stu-id="c3f92-179">Common to all these scenarios is that distribution and security groups can contain a mix of users, contacts, and Foreign Security Principals (FSPs).</span></span> <span data-ttu-id="c3f92-180">Le entità di sicurezza esterne vengono usate in Active Directory Domain Services (AD DS) per rappresentare i membri di altre foreste in un gruppo di sicurezza.</span><span class="sxs-lookup"><span data-stu-id="c3f92-180">FSPs are used in Active Directory Domain Services (AD DS) to represent members from other forests in a security group.</span></span> <span data-ttu-id="c3f92-181">Tutte le entità di sicurezza esterne vengono risolte nell'oggetto reale in Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-181">All FSPs are resolved to the real object in Azure AD.</span></span>

### <a name="multiple-forests-full-mesh-with-optional-galsync"></a><span data-ttu-id="c3f92-182">Più foreste: a maglia completa con GALSync facoltativo</span><span class="sxs-lookup"><span data-stu-id="c3f92-182">Multiple forests: full mesh with optional GALSync</span></span>
![Opzione per usare l'attributo Mail per trovare la corrispondenza quando le identità utenti sono presenti in più directory](./media/active-directory-aadconnect-topologies/MultiForestUsersMail.png)

![Topologia a maglia completa per più foreste](./media/active-directory-aadconnect-topologies/MultiForestFullMesh.png)

<span data-ttu-id="c3f92-185">Una topologia a maglia completa consente di individuare utenti e risorse in qualsiasi foresta.</span><span class="sxs-lookup"><span data-stu-id="c3f92-185">A full mesh topology allows users and resources to be located in any forest.</span></span> <span data-ttu-id="c3f92-186">In genere esistono trust bidirezionali tra le foreste.</span><span class="sxs-lookup"><span data-stu-id="c3f92-186">Commonly, there are two-way trusts between the forests.</span></span>

<span data-ttu-id="c3f92-187">Se Exchange è presente in più di una foresta, potrebbe essere disponibile (facoltativamente) una soluzione GALSync locale.</span><span class="sxs-lookup"><span data-stu-id="c3f92-187">If Exchange is present in more than one forest, there might be (optionally) an on-premises GALSync solution.</span></span> <span data-ttu-id="c3f92-188">Ogni utente viene quindi rappresentato come un contatto in tutte le altre foreste.</span><span class="sxs-lookup"><span data-stu-id="c3f92-188">Every user is then represented as a contact in all other forests.</span></span> <span data-ttu-id="c3f92-189">GALSync viene in genere implementato tramite FIM 2010 o MIM 2016.</span><span class="sxs-lookup"><span data-stu-id="c3f92-189">GALSync is commonly implemented through FIM 2010 or MIM 2016.</span></span> <span data-ttu-id="c3f92-190">Azure AD Connect non può essere usato per la soluzione GALSync locale.</span><span class="sxs-lookup"><span data-stu-id="c3f92-190">Azure AD Connect cannot be used for on-premises GALSync.</span></span>

<span data-ttu-id="c3f92-191">In questo scenario, gli oggetti relativi all'identità vengono aggiunti tramite l'attributo Mail.</span><span class="sxs-lookup"><span data-stu-id="c3f92-191">In this scenario, identity objects are joined via the mail attribute.</span></span> <span data-ttu-id="c3f92-192">Un utente che ha una cassetta postale in una foresta viene aggiunto ai contatti nelle altre foreste.</span><span class="sxs-lookup"><span data-stu-id="c3f92-192">A user who has a mailbox in one forest is joined with the contacts in the other forests.</span></span>

### <a name="multiple-forests-account-resource-forest"></a><span data-ttu-id="c3f92-193">Più foreste, foresta di tipo account-risorse</span><span class="sxs-lookup"><span data-stu-id="c3f92-193">Multiple forests: account-resource forest</span></span>
![Opzione per usare gli attributi ObjectSID e msExchMasterAccountSID per trovare la corrispondenza quando le identità sono presenti in più directory](./media/active-directory-aadconnect-topologies/MultiForestUsersObjectSID.png)

![Topologia di foresta di tipo account-risorse per più foreste](./media/active-directory-aadconnect-topologies/MultiForestAccountResource.png)

<span data-ttu-id="c3f92-196">In una topologia di foresta account-risorse sono presenti una o più foreste *account* con account utente attivi.</span><span class="sxs-lookup"><span data-stu-id="c3f92-196">In an account-resource forest topology, you have one or more *account* forests with active user accounts.</span></span> <span data-ttu-id="c3f92-197">Sono anche presenti una o più foreste *risorse* con account disabilitati.</span><span class="sxs-lookup"><span data-stu-id="c3f92-197">You also have one or more *resource* forests with disabled accounts.</span></span>

<span data-ttu-id="c3f92-198">In questo scenario una o più foreste risorse considerano attendibili tutte le foreste account.</span><span class="sxs-lookup"><span data-stu-id="c3f92-198">In this scenario, one (or more) resource forest trusts all account forests.</span></span> <span data-ttu-id="c3f92-199">La foresta risorse presenta in genere uno schema di Active Directory esteso con Exchange e Lync.</span><span class="sxs-lookup"><span data-stu-id="c3f92-199">The resource forest typically has an extended Active Directory schema with Exchange and Lync.</span></span> <span data-ttu-id="c3f92-200">Tutti i servizi Exchange e Lync, con altri servizi condivisi, si trovano in questa foresta.</span><span class="sxs-lookup"><span data-stu-id="c3f92-200">All Exchange and Lync services, along with other shared services, are located in this forest.</span></span> <span data-ttu-id="c3f92-201">Gli utenti hanno un account utente disabilitato in questa foresta e la cassetta postale è collegata alla foresta account.</span><span class="sxs-lookup"><span data-stu-id="c3f92-201">Users have a disabled user account in this forest, and the mailbox is linked to the account forest.</span></span>

## <a name="office-365-and-topology-considerations"></a><span data-ttu-id="c3f92-202">Considerazioni su Office 365 e sulle topologie</span><span class="sxs-lookup"><span data-stu-id="c3f92-202">Office 365 and topology considerations</span></span>
<span data-ttu-id="c3f92-203">Alcuni carichi di lavoro di Office 365 prevedono determinate restrizioni per le topologie supportate:</span><span class="sxs-lookup"><span data-stu-id="c3f92-203">Some Office 365 workloads have certain restrictions on supported topologies:</span></span>

| <span data-ttu-id="c3f92-204">Carico di lavoro</span><span class="sxs-lookup"><span data-stu-id="c3f92-204">Workload</span></span> | <span data-ttu-id="c3f92-205">Restrizioni</span><span class="sxs-lookup"><span data-stu-id="c3f92-205">Restrictions</span></span> |
--------- | ---------
| <span data-ttu-id="c3f92-206">Exchange Online</span><span class="sxs-lookup"><span data-stu-id="c3f92-206">Exchange Online</span></span> | <span data-ttu-id="c3f92-207">Se sono presenti più organizzazioni di Exchange locali, ovvero Exchange è stato distribuito in più di una foresta, sarà necessario usare Exchange 2013 SP1 o versione successiva.</span><span class="sxs-lookup"><span data-stu-id="c3f92-207">If there's more than one on-premises Exchange organization (that is, Exchange has been deployed to more than one forest), you must use Exchange 2013 SP1 or later.</span></span> <span data-ttu-id="c3f92-208">Per altre informazioni, vedere [Distribuzioni ibride con più foreste di Active Directory](https://technet.microsoft.com/library/jj873754.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3f92-208">For more information, see [Hybrid deployments with multiple Active Directory forests](https://technet.microsoft.com/library/jj873754.aspx).</span></span> |
| <span data-ttu-id="c3f92-209">Skype for Business Online</span><span class="sxs-lookup"><span data-stu-id="c3f92-209">Skype for Business</span></span> | <span data-ttu-id="c3f92-210">Quando si usano più foreste locali, sarà supportata solo la topologia di tipo foresta account-risorse.</span><span class="sxs-lookup"><span data-stu-id="c3f92-210">When you're using multiple on-premises forests, only the account-resource forest topology is supported.</span></span> <span data-ttu-id="c3f92-211">Per altre informazioni, vedere [Requisiti ambientali di Skype for Business Server 2015](https://technet.microsoft.com/library/dn933910.aspx).</span><span class="sxs-lookup"><span data-stu-id="c3f92-211">For more information, see [Environmental requirements for Skype for Business Server 2015](https://technet.microsoft.com/library/dn933910.aspx).</span></span> |


## <a name="staging-server"></a><span data-ttu-id="c3f92-212">server di gestione temporanea</span><span class="sxs-lookup"><span data-stu-id="c3f92-212">Staging server</span></span>
![Server di staging in una topologia](./media/active-directory-aadconnect-topologies/MultiForestStaging.png)

<span data-ttu-id="c3f92-214">Azure AD Connect supporta l'installazione di un secondo server in *modalità di staging*.</span><span class="sxs-lookup"><span data-stu-id="c3f92-214">Azure AD Connect supports installing a second server in *staging mode*.</span></span> <span data-ttu-id="c3f92-215">Un server in questa modalità legge dati da tutte le directory connesse, ma non vi esegue operazioni di scrittura.</span><span class="sxs-lookup"><span data-stu-id="c3f92-215">A server in this mode reads data from all connected directories but does not write anything to connected directories.</span></span> <span data-ttu-id="c3f92-216">Usa il normale ciclo di sincronizzazione e ha quindi a disposizione una copia aggiornata dei dati di identità.</span><span class="sxs-lookup"><span data-stu-id="c3f92-216">It uses the normal synchronization cycle and therefore has an updated copy of the identity data.</span></span>

<span data-ttu-id="c3f92-217">In una situazione di emergenza in cui si verifica un errore nel server primario è possibile eseguire il failover nel server di staging.</span><span class="sxs-lookup"><span data-stu-id="c3f92-217">In a disaster where the primary server fails, you can fail over to the staging server.</span></span> <span data-ttu-id="c3f92-218">A tale scopo è possibile usare la procedura guidata di Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="c3f92-218">You do this in the Azure AD Connect wizard.</span></span> <span data-ttu-id="c3f92-219">Il secondo server può trovarsi in un data center diverso perché nessuna infrastruttura viene condivisa con il server primario.</span><span class="sxs-lookup"><span data-stu-id="c3f92-219">This second server can be located in a different datacenter because no infrastructure is shared with the primary server.</span></span> <span data-ttu-id="c3f92-220">Eventuali modifiche di configurazione apportate al server primario devono essere copiate manualmente nel secondo server.</span><span class="sxs-lookup"><span data-stu-id="c3f92-220">You must manually copy any configuration change made on the primary server to the second server.</span></span>

<span data-ttu-id="c3f92-221">È possibile usare un server di staging per testare una nuova configurazione personalizzata e il relativo effetto sui dati.</span><span class="sxs-lookup"><span data-stu-id="c3f92-221">You can use a staging server to test a new custom configuration and the effect that it has on your data.</span></span> <span data-ttu-id="c3f92-222">È possibile visualizzare l'anteprima delle modifiche e perfezionare la configurazione.</span><span class="sxs-lookup"><span data-stu-id="c3f92-222">You can preview the changes and adjust the configuration.</span></span> <span data-ttu-id="c3f92-223">Dopo aver ottenuto la configurazione ottimale, sarà possibile rendere attivo il server di staging e impostare il server attivo precedente sulla modalità di staging.</span><span class="sxs-lookup"><span data-stu-id="c3f92-223">When you're happy with the new configuration, you can make the staging server the active server and set the old active server to staging mode.</span></span>

<span data-ttu-id="c3f92-224">È anche possibile usare questo metodo per sostituire il server di sincronizzazione attivo.</span><span class="sxs-lookup"><span data-stu-id="c3f92-224">You can also use this method to replace the active sync server.</span></span> <span data-ttu-id="c3f92-225">Preparare il nuovo server e impostarlo in modalità di staging.</span><span class="sxs-lookup"><span data-stu-id="c3f92-225">Prepare the new server and set it to staging mode.</span></span> <span data-ttu-id="c3f92-226">Verificarne lo stato di integrità, disabilitare la modalità di staging rendendolo attivo e arrestare il server attivo corrente.</span><span class="sxs-lookup"><span data-stu-id="c3f92-226">Make sure it's in a good state, disable staging mode (making it active), and shut down the currently active server.</span></span>

<span data-ttu-id="c3f92-227">Per avere a disposizione più backup in data center diversi, è possibile avere più di un server di staging.</span><span class="sxs-lookup"><span data-stu-id="c3f92-227">It's possible to have more than one staging server when you want to have multiple backups in different datacenters.</span></span>

## <a name="multiple-azure-ad-tenants"></a><span data-ttu-id="c3f92-228">Più tenant di Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3f92-228">Multiple Azure AD tenants</span></span>
<span data-ttu-id="c3f92-229">È consigliabile che in Azure AD sia presente un tenant singolo per un'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="c3f92-229">We recommend having a single tenant in Azure AD for an organization.</span></span>
<span data-ttu-id="c3f92-230">Prima di pianificare di usare più tenant di Azure AD, vedere l'articolo [Gestione delle unità amministrative in Azure AD](../active-directory-administrative-units-management.md)</span><span class="sxs-lookup"><span data-stu-id="c3f92-230">Before you plan to use multiple Azure AD tenants, see the article [Administrative units management in Azure AD](../active-directory-administrative-units-management.md).</span></span> <span data-ttu-id="c3f92-231">che illustra gli scenari comuni in cui è possibile usare un singolo tenant.</span><span class="sxs-lookup"><span data-stu-id="c3f92-231">It covers common scenarios where you can use a single tenant.</span></span>

![Topologia per più foreste e più tenant](./media/active-directory-aadconnect-topologies/MultiForestMultiDirectory.png)

<span data-ttu-id="c3f92-233">Esiste una relazione 1:1 tra un server di sincronizzazione di Azure AD Connect e un tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-233">There's a 1:1 relationship between an Azure AD Connect sync server and an Azure AD tenant.</span></span> <span data-ttu-id="c3f92-234">Per ogni tenant di Azure AD è necessaria un'installazione del server del servizio di sincronizzazione Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="c3f92-234">For each Azure AD tenant, you need one Azure AD Connect sync server installation.</span></span> <span data-ttu-id="c3f92-235">Le istanze del tenant di Azure AD sono isolate per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="c3f92-235">The Azure AD tenant instances are isolated by design.</span></span> <span data-ttu-id="c3f92-236">Gli utenti di un tenant infatti non possono visualizzare gli utenti dell'altro tenant.</span><span class="sxs-lookup"><span data-stu-id="c3f92-236">That is, users in one tenant can't see users in the other tenant.</span></span> <span data-ttu-id="c3f92-237">Se la separazione è necessaria, questa è una configurazione supportata.</span><span class="sxs-lookup"><span data-stu-id="c3f92-237">If you want this separation, this is a supported configuration.</span></span> <span data-ttu-id="c3f92-238">In caso contrario, è consigliabile usare il modello di tenant di Azure AD singolo.</span><span class="sxs-lookup"><span data-stu-id="c3f92-238">Otherwise, you should use the single Azure AD tenant model.</span></span>

### <a name="each-object-only-once-in-an-azure-ad-tenant"></a><span data-ttu-id="c3f92-239">Ogni oggetto una sola volta in un tenant di Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3f92-239">Each object only once in an Azure AD tenant</span></span>
![Topologia con filtri per una foresta singola](./media/active-directory-aadconnect-topologies/SingleForestFiltered.png)

<span data-ttu-id="c3f92-241">In questa topologia un server del servizio di sincronizzazione Azure AD Connect è connesso a ogni tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-241">In this topology, one Azure AD Connect sync server is connected to each Azure AD tenant.</span></span> <span data-ttu-id="c3f92-242">I server di sincronizzazione di Azure AD Connect devono essere configurati per l'applicazione di filtri, in modo che ogni server possa usare un set di oggetti che si escludono a vicenda.</span><span class="sxs-lookup"><span data-stu-id="c3f92-242">The Azure AD Connect sync servers must be configured for filtering so that each has a mutually exclusive set of objects to operate on.</span></span> <span data-ttu-id="c3f92-243">Ad esempio, è possibile definire l'ambito di ogni server in modo che corrisponda a un dominio oppure a un'unità organizzativa specifica.</span><span class="sxs-lookup"><span data-stu-id="c3f92-243">You can, for example, scope each server to a particular domain or organizational unit.</span></span>

<span data-ttu-id="c3f92-244">Un dominio DNS può essere registrato unicamente in un tenant singolo di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-244">A DNS domain can be registered in only a single Azure AD tenant.</span></span> <span data-ttu-id="c3f92-245">Anche gli UPN degli utenti nell'istanza locale di Active Directory devono usare spazi dei nomi separati.</span><span class="sxs-lookup"><span data-stu-id="c3f92-245">The UPNs of the users in the on-premises Active Directory instance must also use separate namespaces.</span></span> <span data-ttu-id="c3f92-246">Ad esempio, nella figura precedente tre suffissi UPN separati vengono registrati nell'istanza locale di Active Directory: contoso.com, fabrikam.com e wingtiptoys.com.</span><span class="sxs-lookup"><span data-stu-id="c3f92-246">For example, in the preceding picture, three separate UPN suffixes are registered in the on-premises Active Directory instance: contoso.com, fabrikam.com, and wingtiptoys.com.</span></span> <span data-ttu-id="c3f92-247">Gli utenti di ogni dominio di Active Directory locale usano uno spazio dei nomi diverso.</span><span class="sxs-lookup"><span data-stu-id="c3f92-247">The users in each on-premises Active Directory domain use a different namespace.</span></span>

<span data-ttu-id="c3f92-248">Non è presente alcun GALSync tra le istanze del tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-248">There is no GALSync between the Azure AD tenant instances.</span></span> <span data-ttu-id="c3f92-249">La rubrica di Exchange Online e Skype for Business mostra solo gli utenti nello stesso tenant.</span><span class="sxs-lookup"><span data-stu-id="c3f92-249">The address book in Exchange Online and Skype for Business shows only users in the same tenant.</span></span>

<span data-ttu-id="c3f92-250">Questa topologia presenta le restrizioni seguenti per scenari altrimenti supportati:</span><span class="sxs-lookup"><span data-stu-id="c3f92-250">This topology has the following restrictions on otherwise supported scenarios:</span></span>

* <span data-ttu-id="c3f92-251">Solo uno dei tenant di Azure AD può abilitare una distribuzione ibrida di Exchange con l'istanza di Active Directory locale.</span><span class="sxs-lookup"><span data-stu-id="c3f92-251">Only one of the Azure AD tenants can enable an Exchange hybrid with the on-premises Active Directory instance.</span></span>
* <span data-ttu-id="c3f92-252">I dispositivi Windows 10 possono essere associati a un solo tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-252">Windows 10 devices can be associated with only one Azure AD tenant.</span></span>
* <span data-ttu-id="c3f92-253">L'opzione Single Sign-On (SSO) per la sincronizzazione password e l'autenticazione pass-through può essere usata solo con un tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-253">The single sign-on (SSO) option for password synchronization and pass-through authentication can be used with only one Azure AD tenant.</span></span>

<span data-ttu-id="c3f92-254">Il requisito relativo a un set di oggetti che si escludono a vicenda si applica anche al writeback.</span><span class="sxs-lookup"><span data-stu-id="c3f92-254">The requirement for a mutually exclusive set of objects also applies to writeback.</span></span> <span data-ttu-id="c3f92-255">Alcune funzionalità di writeback non sono supportate con questa topologia, perché presuppongono una singola configurazione locale.</span><span class="sxs-lookup"><span data-stu-id="c3f92-255">Some writeback features are not supported with this topology because they assume a single on-premises configuration.</span></span> <span data-ttu-id="c3f92-256">Queste funzionalità includono:</span><span class="sxs-lookup"><span data-stu-id="c3f92-256">These features include:</span></span>

* <span data-ttu-id="c3f92-257">Writeback dei gruppi con la configurazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="c3f92-257">Group writeback with default configuration.</span></span>
* <span data-ttu-id="c3f92-258">Writeback dispositivi.</span><span class="sxs-lookup"><span data-stu-id="c3f92-258">Device writeback.</span></span>

### <a name="each-object-multiple-times-in-an-azure-ad-tenant"></a><span data-ttu-id="c3f92-259">Ogni oggetto più volte in un tenant di Azure AD</span><span class="sxs-lookup"><span data-stu-id="c3f92-259">Each object multiple times in an Azure AD tenant</span></span>
![Topologia non supportata per una foresta singola e più tenant](./media/active-directory-aadconnect-topologies/SingleForestMultiDirectoryUnsupported.png) ![Topologia non supportata per una foresta singola e più connettori](./media/active-directory-aadconnect-topologies/SingleForestMultiConnectorsUnsupported.png)

<span data-ttu-id="c3f92-262">Queste attività non sono supportate:</span><span class="sxs-lookup"><span data-stu-id="c3f92-262">These tasks are unsupported:</span></span>

* <span data-ttu-id="c3f92-263">Sincronizzazione dello stesso utente con più tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-263">Sync the same user to multiple Azure AD tenants.</span></span>
* <span data-ttu-id="c3f92-264">Modifica della configurazione per fare in modo che gli utenti di un tenant di Azure AD vengano visualizzati come contatti in un altro tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-264">Make a configuration change so that users in one Azure AD tenant appear as contacts in another Azure AD tenant.</span></span>
* <span data-ttu-id="c3f92-265">Modifica del servizio di sincronizzazione Azure AD Connect per la connessione a più tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-265">Modify Azure AD Connect sync to connect to multiple Azure AD tenants.</span></span>

### <a name="galsync-by-using-writeback"></a><span data-ttu-id="c3f92-266">GALSync tramite l'uso di writeback</span><span class="sxs-lookup"><span data-stu-id="c3f92-266">GALSync by using writeback</span></span>
![Topologia non supportata per più foreste e più directory, con GALSync incentrato su Azure AD](./media/active-directory-aadconnect-topologies/MultiForestMultiDirectoryGALSync1Unsupported.png) ![Topologia non supportata per più foreste e più directory, con GALSync incentrato su Active Directory locale](./media/active-directory-aadconnect-topologies/MultiForestMultiDirectoryGALSync2Unsupported.png)

<span data-ttu-id="c3f92-269">I tenant di Azure AD sono isolati per impostazione predefinita.</span><span class="sxs-lookup"><span data-stu-id="c3f92-269">Azure AD tenants are isolated by design.</span></span> <span data-ttu-id="c3f92-270">Queste attività non sono supportate:</span><span class="sxs-lookup"><span data-stu-id="c3f92-270">These tasks are unsupported:</span></span>

* <span data-ttu-id="c3f92-271">Modifica della configurazione del servizio di sincronizzazione Azure AD Connect per la lettura di dati da un altro tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-271">Change the configuration of Azure AD Connect sync to read data from another Azure AD tenant.</span></span>
* <span data-ttu-id="c3f92-272">Esportazione di utenti come contatti in un'altra istanza locale di Active Directory con il servizio di sincronizzazione Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="c3f92-272">Export users as contacts to another on-premises Active Directory instance by using Azure AD Connect sync.</span></span>

### <a name="galsync-with-on-premises-sync-server"></a><span data-ttu-id="c3f92-273">GALSync con server di sincronizzazione locale</span><span class="sxs-lookup"><span data-stu-id="c3f92-273">GALSync with on-premises sync server</span></span>
![GALSync in una topologia per più foreste e più directory](./media/active-directory-aadconnect-topologies/MultiForestMultiDirectoryGALSync.png)

<span data-ttu-id="c3f92-275">È possibile usare FIM 2010 o MIM 2016 locale per sincronizzare gli utenti (tramite GALSync) tra due organizzazioni di Exchange.</span><span class="sxs-lookup"><span data-stu-id="c3f92-275">You can use FIM 2010 or MIM 2016 on-premises to sync users (via GALSync) between two Exchange organizations.</span></span> <span data-ttu-id="c3f92-276">Gli utenti di un'organizzazione vengono visualizzati come utenti/contatti esterni nell'altra organizzazione.</span><span class="sxs-lookup"><span data-stu-id="c3f92-276">The users in one organization appear as foreign users/contacts in the other organization.</span></span> <span data-ttu-id="c3f92-277">Sarà quindi possibile sincronizzare le due istanze locali diverse di Active Directory con i rispettivi tenant di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="c3f92-277">These different on-premises Active Directory instances can then be synchronized with their own Azure AD tenants.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c3f92-278">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="c3f92-278">Next steps</span></span>
<span data-ttu-id="c3f92-279">Per informazioni su come installare Azure AD Connect per questi scenari, vedere [Installazione personalizzata di Azure Ad Connect](active-directory-aadconnect-get-started-custom.md).</span><span class="sxs-lookup"><span data-stu-id="c3f92-279">To learn how to install Azure AD Connect for these scenarios, see [Custom installation of Azure AD Connect](active-directory-aadconnect-get-started-custom.md).</span></span>

<span data-ttu-id="c3f92-280">Ulteriori informazioni sulla configurazione della [sincronizzazione di Azure AD Connect](active-directory-aadconnectsync-whatis.md) .</span><span class="sxs-lookup"><span data-stu-id="c3f92-280">Learn more about the [Azure AD Connect sync](active-directory-aadconnectsync-whatis.md) configuration.</span></span>

<span data-ttu-id="c3f92-281">Altre informazioni sull'[integrazione delle identità locali con Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="c3f92-281">Learn more about [integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
