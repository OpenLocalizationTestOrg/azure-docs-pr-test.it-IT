---
title: "aaaDesign servizio a disponibilità elevata utilizzando il Database SQL di Azure | Documenti Microsoft"
description: "Informazioni sulla progettazione di applicazioni per servizi a disponibilità elevata con database SQL di Azure."
keywords: "ripristino di emergenza cloud, soluzioni di ripristino di emergenza, backup dei dati delle app, replica geografica, pianificazione della continuità aziendale"
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: e8a346ac-dd08-41e7-9685-46cebca04582
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-management
ms.date: 04/21/2017
ms.author: sashan
ms.openlocfilehash: 815f754ba7014cd8a1108a2d84c2a8f71d7030a5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="designing-highly-available-services-using-azure-sql-database"></a><span data-ttu-id="edbaa-104">Progettazione di servizi a disponibilità elevata con database SQL di Azure</span><span class="sxs-lookup"><span data-stu-id="edbaa-104">Designing highly available services using Azure SQL Database</span></span>

<span data-ttu-id="edbaa-105">Per compilare e distribuire servizi a disponibilità elevata in un Database SQL di Azure, utilizzare [failover gruppi e replica geografica attiva](sql-database-geo-replication-overview.md) errori di tooregional tooprovide resilienza e irreversibile interruzioni e abilitare rapido ripristino toohello database secondari.</span><span class="sxs-lookup"><span data-stu-id="edbaa-105">When building and deploying highly available services on Azure SQL Database, you use [failover groups and active geo-replication](sql-database-geo-replication-overview.md) tooprovide resilience tooregional failures and catastrophic outages and enable fast recovery toohello secondary databases.</span></span> <span data-ttu-id="edbaa-106">In questo articolo è incentrato sui modelli di applicazione comuni e ne illustra vantaggi hello e i vantaggi e svantaggi di ogni opzione a seconda dei requisiti di distribuzione dell'applicazione hello, hello contratto di servizio di destinazione, la latenza di traffico e costi.</span><span class="sxs-lookup"><span data-stu-id="edbaa-106">This article focuses on common application patterns and discusses hello benefits and trade-offs of each option depending on hello application deployment requirements, hello service level agreement you are targeting, traffic latency, and costs.</span></span> <span data-ttu-id="edbaa-107">Per informazioni sulla replica geografica attiva con i pool elastici, vedere [Strategie di ripristino di emergenza per applicazioni che usano il pool elastico del database SQL](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="edbaa-107">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>

## <a name="design-pattern-1-active-passive-deployment-for-cloud-disaster-recovery-with-a-co-located-database"></a><span data-ttu-id="edbaa-108">Modello di progettazione 1: distribuzione attiva/passiva per il ripristino di emergenza cloud mediante un database con percorso condiviso</span><span class="sxs-lookup"><span data-stu-id="edbaa-108">Design pattern 1: Active-passive deployment for cloud disaster recovery with a co-located database</span></span>
<span data-ttu-id="edbaa-109">Questa opzione è più adatta per le applicazioni con hello seguenti caratteristiche:</span><span class="sxs-lookup"><span data-stu-id="edbaa-109">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="edbaa-110">Istanza attiva in una singola area di Azure</span><span class="sxs-lookup"><span data-stu-id="edbaa-110">Active instance in a single Azure region</span></span>
* <span data-ttu-id="edbaa-111">Dipendenza sicura toodata di accesso in lettura / scrittura (lettura/scrittura)</span><span class="sxs-lookup"><span data-stu-id="edbaa-111">Strong dependency on read-write (RW) access toodata</span></span>
* <span data-ttu-id="edbaa-112">La connettività tra più aree tra un'applicazione web hello e database hello non è accettabile a causa dei costi di traffico e toolatency</span><span class="sxs-lookup"><span data-stu-id="edbaa-112">Cross-region connectivity between hello web application and hello database is not acceptable due toolatency and traffic cost</span></span>    

<span data-ttu-id="edbaa-113">In questo caso, topologia di distribuzione dell'applicazione hello è ottimizzata per la gestione di calamità quando tutti i componenti dell'applicazione sono interessati ed è necessario toofailover come unità.</span><span class="sxs-lookup"><span data-stu-id="edbaa-113">In this case, hello application deployment topology is optimized for handling regional disasters when all application components are impacted and need toofailover as a unit.</span></span> <span data-ttu-id="edbaa-114">Per garantire ridondanza geografica, la logica dell'applicazione hello e database hello sono replicati tooanother area ma non vengono usati per carico di lavoro dell'applicazione hello in condizioni normali hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-114">For geographic redundancy, hello application logic and hello database are replicated tooanother region but they are not used for hello application workload under hello normal conditions.</span></span> <span data-ttu-id="edbaa-115">un'applicazione Hello nell'area secondaria hello deve essere configurato toouse in un database secondario SQL connection string toohello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-115">hello application in hello secondary region should be configured toouse a SQL connection string toohello secondary database.</span></span> <span data-ttu-id="edbaa-116">Gestione traffico è configurato toouse [metodo di routing failover](../traffic-manager/traffic-manager-configure-failover-routing-method.md).</span><span class="sxs-lookup"><span data-stu-id="edbaa-116">Traffic manager is set up toouse [failover routing method](../traffic-manager/traffic-manager-configure-failover-routing-method.md).</span></span>  

> [!NOTE]
> <span data-ttu-id="edbaa-117">[Gestione traffico di Azure](../traffic-manager/traffic-manager-overview.md) viene usato in questo articolo solo a scopi illustrativi.</span><span class="sxs-lookup"><span data-stu-id="edbaa-117">[Azure traffic manager](../traffic-manager/traffic-manager-overview.md) is used throughout this article for illustration purposes only.</span></span> <span data-ttu-id="edbaa-118">È possibile usare qualsiasi soluzione di bilanciamento del carico che supporta il metodo di routing di failover.</span><span class="sxs-lookup"><span data-stu-id="edbaa-118">You can use any load-balancing solution that supports failover routing method.</span></span>    
>

<span data-ttu-id="edbaa-119">Hello seguente diagramma viene illustrata questa configurazione prima di un'interruzione del servizio.</span><span class="sxs-lookup"><span data-stu-id="edbaa-119">hello following diagram shows this configuration before an outage.</span></span>

![Configurazione della replica geografica del database SQL.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-1.png)

<span data-ttu-id="edbaa-122">Dopo un'interruzione nell'area primaria hello, il servizio di Database SQL di hello rileva tale database primario hello non è accessibile e attivare un database secondario toohello failover in base ai parametri di hello dei criteri di failover automatico hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-122">After an outage in hello primary region, hello SQL Database service detects that hello primary database is not accessible and trigger a failover toohello secondary database based on hello parameters of hello automatic failover policy.</span></span> <span data-ttu-id="edbaa-123">A seconda del contratto di servizio dell'applicazione, è possibile decidere di tooconfigure un periodo di tolleranza tra rilevamento hello di interruzione hello e failover hello stesso.</span><span class="sxs-lookup"><span data-stu-id="edbaa-123">Depending on your application SLA, you can decide tooconfigure a grace period between hello detection of hello outage and hello failover itself.</span></span> <span data-ttu-id="edbaa-124">Configurazione di un periodo di tolleranza riduce il rischio di hello di casi di toohello perdita di dati dove interruzione hello è irreversibile e disponibilità in area hello non può essere ripristinata rapidamente.</span><span class="sxs-lookup"><span data-stu-id="edbaa-124">Configuring a grace period reduces hello risk of data loss toohello cases where hello outage is catastrophic and availability in hello region cannot be quickly restored.</span></span> <span data-ttu-id="edbaa-125">Se hello failover dell'endpoint viene avviato da Gestione traffico hello prima che i trigger di hello failover gruppo hello failover del database di hello, un'applicazione hello web non è in grado di tooreconnect toohello database.</span><span class="sxs-lookup"><span data-stu-id="edbaa-125">If hello endpoint failover is initiated by hello traffic manager before hello failover group triggers hello failover of hello database, hello web application is not able tooreconnect toohello database.</span></span> <span data-ttu-id="edbaa-126">tooreconnect tentativo dell'applicazione Hello viene completata automaticamente non appena viene completato hello failover del database.</span><span class="sxs-lookup"><span data-stu-id="edbaa-126">hello application’s attempt tooreconnect automatically succeeds as soon as hello database failover completes.</span></span> 

> [!NOTE]
> <span data-ttu-id="edbaa-127">tooachieve coordinato completamente failover dell'applicazione hello e i database di hello, è necessario definire il proprio metodo di monitoraggio e utilizzare il failover manuale di endpoint dell'applicazione web hello e database di hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-127">tooachieve fully coordinated failover of hello application and hello databases, you should devise your own monitoring method and use manual failover of hello web application endpoints and hello databases.</span></span>
>

<span data-ttu-id="edbaa-128">Al termine del processo di failover di hello dell'applicazione hello endpoint sia database hello, un'applicazione hello nuovamente avvierà l'elaborazione delle richieste utente hello in area hello B e rimarrà collocata insieme ai database hello database primario hello è ora in area B. Questo scenario è illustrato nel seguente diagramma hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-128">After hello failover of both hello application’s endpoints and hello database completes, hello application will re-start processing hello user requests in hello region B and will remain co-located with hello database because hello primary database is now in region B. This scenario is illustrated in hello following diagram.</span></span> <span data-ttu-id="edbaa-129">In tutti i diagrammi le linee continue indicano le connessioni attive, le linee con punti indicano le connessioni sospese e i segnali di stop indicano i trigger di azioni.</span><span class="sxs-lookup"><span data-stu-id="edbaa-129">In all diagrams, solid lines indicate active connections, dotted lines indicate suspended connections, and stop signs indicate action triggers.</span></span>

![La replica geografica: Il Failover toosecondary del database.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-2.png)

<span data-ttu-id="edbaa-132">In caso di un'interruzione del servizio nell'area secondaria hello, hello collegamento di replica tra hello primario e secondario hello viene sospeso ma hello failover non viene generato perché il database primario hello non è compromessa.</span><span class="sxs-lookup"><span data-stu-id="edbaa-132">If an outage happens in hello secondary region, hello replication link between hello primary and hello secondary database is suspended but hello failover is not triggered because hello primary database is not impacted.</span></span> <span data-ttu-id="edbaa-133">disponibilità dell'applicazione Hello non viene modificata in questo caso, ma un'applicazione hello opera esposto e pertanto a rischio più elevato nel caso in entrambe le aree esito negativo in successione.</span><span class="sxs-lookup"><span data-stu-id="edbaa-133">hello application's availability is not changed in this case, but hello application operates exposed and therefore at higher risk in case both regions fail in succession.</span></span>

> [!NOTE]
> <span data-ttu-id="edbaa-134">Per il ripristino di emergenza è consigliabile configurazione hello con aree tootwo distribuzione limitata di applicazione.</span><span class="sxs-lookup"><span data-stu-id="edbaa-134">For disaster recovery we recommend hello configuration with application deployment limited tootwo regions.</span></span> <span data-ttu-id="edbaa-135">In questo modo la maggior parte di hello aree geografiche di Azure sono solo due aree.</span><span class="sxs-lookup"><span data-stu-id="edbaa-135">This is because most of hello Azure geographies have only two regions.</span></span> <span data-ttu-id="edbaa-136">Questa configurazione non proteggerà l'applicazione da un errore simultaneo irreparabile di entrambe le aree.</span><span class="sxs-lookup"><span data-stu-id="edbaa-136">This configuration will not protect your application from a simultaneous catastrophic failure of both regions.</span></span>  <span data-ttu-id="edbaa-137">Nell'improbabile eventualità di un errore di questo genere, è possibile recuperare i database in una terza area con un'[operazione di ripristino geografico](sql-database-disaster-recovery.md#recover-using-geo-restore).</span><span class="sxs-lookup"><span data-stu-id="edbaa-137">In an unlikely event of such a failure, you can recover your databases in a third region using [geo-restore operation](sql-database-disaster-recovery.md#recover-using-geo-restore).</span></span>
>

<span data-ttu-id="edbaa-138">Dopo un'interruzione di hello viene ridotta, database secondario hello verrà automaticamente nuovamente la sincronizzazione con hello primario.</span><span class="sxs-lookup"><span data-stu-id="edbaa-138">Once hello outage is mitigated, hello secondary database will automatically re-synchronize with hello primary.</span></span> <span data-ttu-id="edbaa-139">Durante la sincronizzazione, le prestazioni di hello primaria possono essere interessate leggermente a seconda della quantità di hello di dati che devono essere toobe sincronizzato.</span><span class="sxs-lookup"><span data-stu-id="edbaa-139">During synchronization, performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="edbaa-140">Hello diagramma seguente illustra un'interruzione del servizio nell'area secondaria hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-140">hello following diagram illustrates an outage in hello secondary region.</span></span>

![Database secondario sincronizzato con il database primario.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-3.png)

<span data-ttu-id="edbaa-143">chiave Hello **vantaggi** di questo schema progettuale sono:</span><span class="sxs-lookup"><span data-stu-id="edbaa-143">hello key **advantages** of this design pattern are:</span></span>

* <span data-ttu-id="edbaa-144">Hello stessa applicazione web viene distribuito tooboth aree senza alcuna configurazione specifiche dell'area e di failover di toohello tooreact alcuna logica aggiuntiva.</span><span class="sxs-lookup"><span data-stu-id="edbaa-144">hello same web application is deployed tooboth regions without any region-specific configuration and no additional logic tooreact toohello failover.</span></span> 
* <span data-ttu-id="edbaa-145">le prestazioni dell'applicazione Hello non venga interessata da failover come applicazione web hello e database hello sono sempre posizionati.</span><span class="sxs-lookup"><span data-stu-id="edbaa-145">hello application's performance is not impacted by failover as hello web application and hello database are always co-located.</span></span>

<span data-ttu-id="edbaa-146">Hello principale **compromesso** è che un'applicazione hello ridondanti istanza nell'area secondaria hello viene utilizzata solo per il ripristino di emergenza.</span><span class="sxs-lookup"><span data-stu-id="edbaa-146">hello main **tradeoff** is that hello redundant application instance in hello secondary region is only used for disaster recovery.</span></span>

## <a name="design-pattern-2-active-active-deployment-for-application-load-balancing"></a><span data-ttu-id="edbaa-147">Modello di progettazione 2: Distribuzione attiva/attiva per il bilanciamento del carico dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="edbaa-147">Design pattern 2: Active-active deployment for application load balancing</span></span>
<span data-ttu-id="edbaa-148">Questa opzione di ripristino di emergenza cloud è ideale per applicazioni con hello seguenti caratteristiche:</span><span class="sxs-lookup"><span data-stu-id="edbaa-148">This cloud disaster recovery option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="edbaa-149">Rapporto elevato di database legge toowrites</span><span class="sxs-lookup"><span data-stu-id="edbaa-149">High ratio of database reads toowrites</span></span>
* <span data-ttu-id="edbaa-150">Database latenza di lettura è più importanti per un'esperienza utente finale hello la latenza di scrittura hello</span><span class="sxs-lookup"><span data-stu-id="edbaa-150">Database read latency is more critical for hello end-user experience than hello write latency</span></span> 
* <span data-ttu-id="edbaa-151">Logica di sola lettura che può essere separata dalla logica di lettura/scrittura usando una stringa di connessione diversa</span><span class="sxs-lookup"><span data-stu-id="edbaa-151">Read-only logic can be separated from read-write logic by using a different connection string</span></span>
* <span data-ttu-id="edbaa-152">La logica di sola lettura non dipendono dai dati completamente sincronizzati con gli aggiornamenti più recenti di hello</span><span class="sxs-lookup"><span data-stu-id="edbaa-152">Read-only logic does not depend on data being fully synchronized with hello latest updates</span></span>  

<span data-ttu-id="edbaa-153">Se le applicazioni presentano le caratteristiche, bilanciamento del carico le connessioni dell'utente finale di hello tra più istanze dell'applicazione in aree diverse possono migliorare notevolmente le hello complessiva dell'utente finale.</span><span class="sxs-lookup"><span data-stu-id="edbaa-153">If your applications have these characteristics, load balancing hello end-user connections across multiple application instances in different regions can substantially improve hello overall end-user experience.</span></span> <span data-ttu-id="edbaa-154">Due delle aree di hello selezionata deve essere hello coppia di ripristino di emergenza e il gruppo di failover di hello deve includere i database hello in queste aree.</span><span class="sxs-lookup"><span data-stu-id="edbaa-154">Two of hello regions should be selected as hello DR pair and hello failover group should include hello databases in these regions.</span></span> <span data-ttu-id="edbaa-155">tooimplement bilanciamento del carico, ogni area deve essere un'istanza attiva di un'applicazione hello con hello lettura-scrittura (lettura/scrittura) logica connessa toohello lettura-scrittura listener endpoint hello del gruppo del failover.</span><span class="sxs-lookup"><span data-stu-id="edbaa-155">tooimplement load-balancing, each region should have an active instance of hello application with hello read-write (RW) logic connected toohello read-write listener endpoint of hello failover group.</span></span> <span data-ttu-id="edbaa-156">Garantisce che il failover hello sarà avviato automaticamente se il database primario hello è stata interessata da un'interruzione del servizio.</span><span class="sxs-lookup"><span data-stu-id="edbaa-156">It will guarantee that hello failover will be automatically initiated if hello primary database is impacted by an outage.</span></span> <span data-ttu-id="edbaa-157">Hello sola lettura logica (RO) in un'applicazione web hello debba connettersi direttamente il database toohello in tale area.</span><span class="sxs-lookup"><span data-stu-id="edbaa-157">hello read-only logic (RO) in hello web application should connect directly toohello database in that region.</span></span> <span data-ttu-id="edbaa-158">Gestione traffico deve essere configurato toouse [prestazioni routing](../traffic-manager/traffic-manager-configure-performance-routing-method.md) con [monitoraggio endpoint](../traffic-manager/traffic-manager-monitoring.md) abilitato per ogni istanza dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="edbaa-158">Traffic manager should be set up toouse [performance routing](../traffic-manager/traffic-manager-configure-performance-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for each application instance.</span></span>

<span data-ttu-id="edbaa-159">È consigliabile distribuire un'applicazione di monitoraggio simile a quella del modello n. 1,</span><span class="sxs-lookup"><span data-stu-id="edbaa-159">As in pattern #1, you should consider deploying a similar monitoring application.</span></span> <span data-ttu-id="edbaa-160">A differenza modello #1, hello monitoraggio dell'applicazione non verrà tuttavia responsabile per l'attivazione di failover di endpoint hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-160">But unlike pattern #1, hello monitoring application will not be responsible for triggering hello end-point failover.</span></span>

> [!NOTE]
> <span data-ttu-id="edbaa-161">Mentre in questo modello viene utilizzato più di un database secondario, solo hello secondario area b viene utilizzata per il failover e deve far parte del gruppo di failover hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-161">While this pattern uses more than one secondary database, only hello secondary in Region B  would be used for failover and should be part of hello failover group.</span></span>
>

<span data-ttu-id="edbaa-162">Gestione traffico deve essere configurato per la posizione geografica prestazioni routing toodirect hello utente connessioni toohello istanza più vicino toohello dell'utente dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="edbaa-162">Traffic manager should be configured for performance routing toodirect hello user connections toohello application instance closest toohello user's geographic location.</span></span> <span data-ttu-id="edbaa-163">Hello seguente diagramma viene illustrata questa configurazione prima di un'interruzione del servizio.</span><span class="sxs-lookup"><span data-stu-id="edbaa-163">hello following diagram illustrates this configuration before an outage.</span></span>

![Nessuna interruzione: applicazione toonearest routing delle prestazioni.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-1.png)

<span data-ttu-id="edbaa-166">Se viene rilevata un'interruzione del database paese hello, il gruppo di failover di hello avvierà automaticamente il failover del database primario hello toohello area secondaria nell'area B. Hello in lettura / scrittura listener endpoint tooregion B si aggiornerà automaticamente anche in modo non saranno interessate connessioni di lettura / scrittura in un'applicazione web hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-166">If a database outage is detected in hello region A, hello failover group will automatically initiate failover of hello primary database in region A toohello secondary in region B. It will also automatically update hello read-write listener endpoint tooregion B so read-write connections in hello web application will not be impacted.</span></span> <span data-ttu-id="edbaa-167">gestione traffico Hello escluderà endpoint offline hello dalla tabella di routing hello ma continuerà routing hello dell'utente finale traffico toohello rimanenti istanze online.</span><span class="sxs-lookup"><span data-stu-id="edbaa-167">hello traffic manager will exclude hello offline end-point from hello routing table but will continue routing hello end-user traffic toohello remaining online instances.</span></span> <span data-ttu-id="edbaa-168">salve le stringhe di connessione SQL in sola lettura non saranno interessate come puntano sempre database toohello in hello stessa area.</span><span class="sxs-lookup"><span data-stu-id="edbaa-168">hello read-only SQL connection strings will not be impacted as they always point toohello database in hello same region.</span></span> 

<span data-ttu-id="edbaa-169">Hello seguente diagramma illustra una nuova configurazione di hello dopo il failover hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-169">hello following diagram illustrates hello new configuration after hello failover.</span></span>

![Configurazione dopo il failover.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-2.png)

<span data-ttu-id="edbaa-172">In caso di interruzione in una delle aree secondarie hello, gestione traffico hello rimuoverà automaticamente endpoint offline hello in tale regione dalla tabella di routing hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-172">In case of an outage in one of hello secondary regions, hello traffic manager will automatically remove hello offline end-point in that region from hello routing table.</span></span> <span data-ttu-id="edbaa-173">Hello replica canale toohello database secondario in tale area verrà sospesi.</span><span class="sxs-lookup"><span data-stu-id="edbaa-173">hello replication channel toohello secondary database in that region will be suspended.</span></span> <span data-ttu-id="edbaa-174">Poiché le altre aree hello ottengono il traffico utente aggiuntivi in questo scenario, le prestazioni dell'applicazione hello saranno interessate durante un'interruzione di hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-174">Because hello remaining regions get additional user traffic in this scenario, hello application's performance will be impacted during hello outage.</span></span> <span data-ttu-id="edbaa-175">Dopo un'interruzione di hello viene ridotta, hello database secondario nell'area interessata hello verrà immediatamente sincronizzata con hello primario.</span><span class="sxs-lookup"><span data-stu-id="edbaa-175">Once hello outage is mitigated, hello secondary database in hello impacted region will be immediately synchronized with hello primary.</span></span> <span data-ttu-id="edbaa-176">Durante la hello prestazioni di sincronizzazione di hello primaria possono essere interessate leggermente a seconda della quantità di hello di dati che devono essere sincronizzati toobe.</span><span class="sxs-lookup"><span data-stu-id="edbaa-176">During hello synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="edbaa-177">Hello seguente diagramma viene illustrata un'interruzione nell'area B.</span><span class="sxs-lookup"><span data-stu-id="edbaa-177">hello following diagram illustrates an outage in region B.</span></span>

![Interruzione nell'area secondaria.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-3.png)

<span data-ttu-id="edbaa-180">chiave Hello **vantaggio** di questo progetto di modello è che è possibile scalare il carico di lavoro dell'applicazione hello tra le prestazioni ottimali per l'utente finale di più database secondari tooachieve hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-180">hello key **advantage** of this design pattern is that you can scale hello application workload across multiple secondaries tooachieve hello optimal end-user performance.</span></span> <span data-ttu-id="edbaa-181">Hello **compromessi** di questa opzione sono:</span><span class="sxs-lookup"><span data-stu-id="edbaa-181">hello **tradeoffs** of this option are:</span></span>

* <span data-ttu-id="edbaa-182">Le connessioni di lettura / scrittura tra le istanze dell'applicazione hello e database hanno latenza e i costi vari</span><span class="sxs-lookup"><span data-stu-id="edbaa-182">Read-write connections between hello application instances and database have varying latency and cost</span></span>
* <span data-ttu-id="edbaa-183">Le prestazioni dell'applicazione sono stata interessata durante un'interruzione di hello</span><span class="sxs-lookup"><span data-stu-id="edbaa-183">Application performance is impacted during hello outage</span></span>

> [!NOTE]
> <span data-ttu-id="edbaa-184">Può essere utilizzato un approccio simile toooffload specializzato, ad esempio reporting processi, strumenti di business intelligence o i backup dei carichi di lavoro.</span><span class="sxs-lookup"><span data-stu-id="edbaa-184">A similar approach can be used toooffload specialized workloads such as reporting jobs, business intelligence tools, or backups.</span></span> <span data-ttu-id="edbaa-185">In genere, questi carichi di lavoro utilizzano le risorse del database significativo per questo motivo è consigliabile che per designare una di hello database secondari per tali con carico di lavoro previsto hello prestazioni livello toohello corrispondente.</span><span class="sxs-lookup"><span data-stu-id="edbaa-185">Typically, these workloads consume significant database resources therefore it is recommended that you designate one of hello secondary databases for them with hello performance level matched toohello anticipated workload.</span></span>
>

## <a name="design-pattern-3-active-passive-deployment-for-data-preservation"></a><span data-ttu-id="edbaa-186">Modello di progettazione 3: Distribuzione attiva/passiva per la conservazione dei dati</span><span class="sxs-lookup"><span data-stu-id="edbaa-186">Design pattern 3: Active-passive deployment for data preservation</span></span>
<span data-ttu-id="edbaa-187">Questa opzione è più adatta per le applicazioni con hello seguenti caratteristiche:</span><span class="sxs-lookup"><span data-stu-id="edbaa-187">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="edbaa-188">Qualsiasi perdita di dati rappresenta un rischio aziendale elevato.</span><span class="sxs-lookup"><span data-stu-id="edbaa-188">Any data loss is high business risk.</span></span> <span data-ttu-id="edbaa-189">failover del database Hello sono utilizzabili solo come ultima risorsa se l'interruzione di hello è irreversibile.</span><span class="sxs-lookup"><span data-stu-id="edbaa-189">hello database failover can only be used as a last resort if hello outage is catastrophic.</span></span>
* <span data-ttu-id="edbaa-190">un'applicazione Hello supporta le modalità di sola lettura e lettura / scrittura delle operazioni e può essere utilizzato in "modalità di sola lettura" per un periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="edbaa-190">hello application supports read-only and read-write modes of operations and can operate in "read-only mode" for a period of time.</span></span>

<span data-ttu-id="edbaa-191">In questo modello di applicazione hello passa tooread modalità di sola quando le connessioni di lettura / scrittura hello iniziano a ottenere gli errori di timeout.</span><span class="sxs-lookup"><span data-stu-id="edbaa-191">In this pattern, hello application switches tooread-only mode when hello read-write connections start getting time-out errors.</span></span> <span data-ttu-id="edbaa-192">Hello applicazione Web viene distribuito tooboth aree e includere un endpoint della connessione toohello listener di lettura / scrittura e l'endpoint di connessione diverse toohello listener di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="edbaa-192">hello Web Application is deployed tooboth regions and include a connection toohello read-write listener endpoint and different connection toohello read-only listener endpoint.</span></span> <span data-ttu-id="edbaa-193">gestione traffico Hello deve essere configurate toouse [failover routing](../traffic-manager/traffic-manager-configure-failover-routing-method.md) con [monitoraggio endpoint](../traffic-manager/traffic-manager-monitoring.md) abilitata per l'endpoint dell'applicazione hello in ogni area.</span><span class="sxs-lookup"><span data-stu-id="edbaa-193">hello Traffic manager should be set up toouse [failover routing](../traffic-manager/traffic-manager-configure-failover-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for hello application endpoint in each region.</span></span>

<span data-ttu-id="edbaa-194">Hello seguente diagramma viene illustrata questa configurazione prima di un'interruzione del servizio.</span><span class="sxs-lookup"><span data-stu-id="edbaa-194">hello following diagram illustrates this configuration before an outage.</span></span>

![Distribuzione attiva-passiva prima del failover.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-1.png)

<span data-ttu-id="edbaa-197">Quando Gestione traffico hello rileva un tooregion di errore di connettività A, si passa automaticamente l'istanza dell'applicazione utente traffico toohello nell'area B. Con questo modello, è importante impostare il periodo di tolleranza hello con valore sufficientemente elevato tooa perdita dei dati, ad esempio, 24 ore.</span><span class="sxs-lookup"><span data-stu-id="edbaa-197">When hello traffic manager detects a connectivity failure tooregion A, it automatically switches user traffic toohello application instance in region B. With this pattern, it is important that you set hello grace period with data loss tooa sufficiently high value, e.g. 24 hours.</span></span> <span data-ttu-id="edbaa-198">Garantisce che la perdita di dati, viene evitata se interruzione hello è attenuata entro tale periodo di tempo.</span><span class="sxs-lookup"><span data-stu-id="edbaa-198">It will ensure that data loss is prevented if hello outage is mitigated within that time.</span></span> <span data-ttu-id="edbaa-199">Quando viene attivata l'applicazione Web nell'area di hello B hello operazioni di lettura-scrittura hello ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="edbaa-199">When hello Web application in hello region B is activated hello read-write operations will start failing.</span></span> <span data-ttu-id="edbaa-200">A questo punto, è necessario passare toohello modalità di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="edbaa-200">At that point, it should switch toohello read-only mode.</span></span> <span data-ttu-id="edbaa-201">In hello questa modalità, le richieste verranno automaticamente indirizzato toohello database secondario.</span><span class="sxs-lookup"><span data-stu-id="edbaa-201">In this mode hello requests will be automatically routed toohello secondary database.</span></span> <span data-ttu-id="edbaa-202">Nel caso di hello di hello un errore irreversibile interruzione non essere risolti entro il periodo di prova hello e gruppo di failover hello attiverà hello failover.</span><span class="sxs-lookup"><span data-stu-id="edbaa-202">In hello case of a catastrophic failure hello outage will not be mitigated within hello grace period and hello failover group will trigger hello failover.</span></span> <span data-ttu-id="edbaa-203">Dopo tale hello listener di lettura / scrittura diventerà disponibile e verrà arrestata hello chiamate tooit esito negativo.</span><span class="sxs-lookup"><span data-stu-id="edbaa-203">After that hello read-write listener will become available and hello calls tooit will stop failing.</span></span> <span data-ttu-id="edbaa-204">Questo comportamento è illustrato hello seguente diagramma.</span><span class="sxs-lookup"><span data-stu-id="edbaa-204">This is illustrated by hello following diagram.</span></span>

![Interruzione: applicazione in modalità di sola lettura.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-2.png)

<span data-ttu-id="edbaa-207">Se l'interruzione di hello nell'area primaria hello è attenuata entro il periodo di prova hello, gestione traffico rileva ripristino hello di connettività area primaria hello e passa l'istanza dell'applicazione utente traffico toohello indietro nell'area A. Istanza di applicazione riprende e opera in modalità di lettura / scrittura utilizzando i database primario hello nell'area A.</span><span class="sxs-lookup"><span data-stu-id="edbaa-207">If hello outage in hello primary region is mitigated within hello grace period, traffic manager detects hello restoration of connectivity in hello primary region and switches user traffic back toohello application instance in region A. That application instance resumes and operates in read-write mode using hello primary database in region A.</span></span>

<span data-ttu-id="edbaa-208">In caso di interruzione nell'area di hello B, gestione traffico hello rileva gli errori di hello del punto finale dell'applicazione hello in area B e hello failover gruppo commutatori hello listener di sola lettura tooregion A. Questa interruzione non influisce sull'esperienza dell'utente finale di hello ma verrà esposto database primario hello durante un'interruzione di hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-208">In case of an outage in hello region B, hello traffic manager detects hello failure of hello application end-point in region B and hello failover group switches hello read-only listener tooregion A. This outage does not impact hello end-user experience but hello primary database will be exposed during hello outage.</span></span> <span data-ttu-id="edbaa-209">Questo comportamento è illustrato hello seguente diagramma.</span><span class="sxs-lookup"><span data-stu-id="edbaa-209">This is illustrated by hello following diagram.</span></span>

![Interruzione: database secondario.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-3.png)

<span data-ttu-id="edbaa-212">Una volta interruzione hello viene ridotta, hello database secondario viene immediatamente sincronizzata con hello primario e i listener di sola lettura hello viene switch toohello indietro il database secondario nell'area B. Durante la sincronizzazione delle prestazioni di hello primaria possono essere interessate leggermente a seconda della quantità di hello di dati che devono essere toobe sincronizzato.</span><span class="sxs-lookup"><span data-stu-id="edbaa-212">Once hello outage is mitigated, hello secondary database is immediately synchronized with hello primary and hello read-only listener is switched back toohello secondary database in region B. During synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span>

<span data-ttu-id="edbaa-213">Questo modello di progettazione presenta diversi **vantaggi**:</span><span class="sxs-lookup"><span data-stu-id="edbaa-213">This design pattern has several **advantages**:</span></span>

* <span data-ttu-id="edbaa-214">Evita la perdita di dati durante le interruzioni temporanee hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-214">It avoids data loss during hello temporary outages.</span></span>
* <span data-ttu-id="edbaa-215">Tempo di inattività dipende dal solo la rapidità con gestione traffico rileva un errore di connettività hello, che è configurabile.</span><span class="sxs-lookup"><span data-stu-id="edbaa-215">Downtime depends only on how quickly traffic manager detects hello connectivity failure, which is configurable.</span></span>

<span data-ttu-id="edbaa-216">Hello **compromesso** è:</span><span class="sxs-lookup"><span data-stu-id="edbaa-216">hello **tradeoff** is:</span></span>

* <span data-ttu-id="edbaa-217">Applicazione deve essere in grado di toooperate in modalità di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="edbaa-217">Application must be able toooperate in read-only mode.</span></span>

> [!NOTE]
> <span data-ttu-id="edbaa-218">In caso di un'interruzione del servizio permanente nell'area di hello, manualmente attivare failover del database e la perdita di dati hello.</span><span class="sxs-lookup"><span data-stu-id="edbaa-218">In case of a permanent service outage in hello region, you manually activate database failover and accept hello data loss.</span></span> <span data-ttu-id="edbaa-219">un'applicazione Hello saranno funzionale nell'area secondaria di hello con database toohello accesso in lettura-scrittura.</span><span class="sxs-lookup"><span data-stu-id="edbaa-219">hello application will be functional in hello secondary region with read-write access toohello database.</span></span>
>

## <a name="business-continuity-planning-choose-an-application-design-for-cloud-disaster-recovery"></a><span data-ttu-id="edbaa-220">Pianificazione della continuità aziendale: Scegliere una progettazione di applicazioni per il ripristino di emergenza cloud</span><span class="sxs-lookup"><span data-stu-id="edbaa-220">Business continuity planning: Choose an application design for cloud disaster recovery</span></span>
<span data-ttu-id="edbaa-221">La strategia di ripristino di emergenza cloud specifico è possibile combinare o estendere questi schemi progettuali toobest hello soddisfare le esigenze dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="edbaa-221">Your specific cloud disaster recovery strategy can combine or extend these design patterns toobest meet hello needs of your application.</span></span>  <span data-ttu-id="edbaa-222">Come accennato in precedenza, strategia hello che scelta si basa su hello contratto di servizio desiderato toooffer tooyour clienti e hello topologia di distribuzione dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="edbaa-222">As mentioned earlier, hello strategy you choose is based on hello SLA you want toooffer tooyour customers and hello application deployment topology.</span></span> <span data-ttu-id="edbaa-223">toohelp facilitare la decisione, hello nella tabella seguente confronta scelte di hello in base a hello dati stimata perdita o ripristino obiettivo del punto (RPO) e il tempo di recupero stimato (ERT).</span><span class="sxs-lookup"><span data-stu-id="edbaa-223">toohelp guide your decision, hello following table compares hello choices based on hello estimated data loss or recovery point objective (RPO) and estimated recovery time (ERT).</span></span>

| <span data-ttu-id="edbaa-224">Modello</span><span class="sxs-lookup"><span data-stu-id="edbaa-224">Pattern</span></span> | <span data-ttu-id="edbaa-225">RPO</span><span class="sxs-lookup"><span data-stu-id="edbaa-225">RPO</span></span> | <span data-ttu-id="edbaa-226">ERT</span><span class="sxs-lookup"><span data-stu-id="edbaa-226">ERT</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="edbaa-227">Distribuzione attiva/passiva per il ripristino di emergenza con accesso al database con percorso condiviso</span><span class="sxs-lookup"><span data-stu-id="edbaa-227">Active-passive deployment for disaster recovery with co-located database access</span></span> |<span data-ttu-id="edbaa-228">Accesso in lettura/scrittura < 5 sec</span><span class="sxs-lookup"><span data-stu-id="edbaa-228">Read-write access < 5 sec</span></span> |<span data-ttu-id="edbaa-229">Ora di rilevamento dell'errore + DNS TTL</span><span class="sxs-lookup"><span data-stu-id="edbaa-229">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="edbaa-230">Distribuzione attiva/attiva per il bilanciamento del carico dell'applicazione</span><span class="sxs-lookup"><span data-stu-id="edbaa-230">Active-active deployment for application load balancing</span></span> |<span data-ttu-id="edbaa-231">Accesso in lettura/scrittura < 5 sec</span><span class="sxs-lookup"><span data-stu-id="edbaa-231">Read-write access < 5 sec</span></span> |<span data-ttu-id="edbaa-232">Ora di rilevamento dell'errore + DNS TTL</span><span class="sxs-lookup"><span data-stu-id="edbaa-232">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="edbaa-233">Distribuzione attiva/passiva per la conservazione dei dati</span><span class="sxs-lookup"><span data-stu-id="edbaa-233">Active-passive deployment for data preservation</span></span> |<span data-ttu-id="edbaa-234">Accesso in sola lettura < 5 sec</span><span class="sxs-lookup"><span data-stu-id="edbaa-234">Read-only access < 5 sec</span></span> | <span data-ttu-id="edbaa-235">Accesso in sola lettura = 0</span><span class="sxs-lookup"><span data-stu-id="edbaa-235">Read-only access = 0</span></span> |
||<span data-ttu-id="edbaa-236">Accesso in lettura/scrittura = zero</span><span class="sxs-lookup"><span data-stu-id="edbaa-236">Read-write access = zero</span></span> | <span data-ttu-id="edbaa-237">Accesso in lettura-scrittura = ora di rilevamento dell'errore + periodo di tolleranza con perdita di dati</span><span class="sxs-lookup"><span data-stu-id="edbaa-237">Read-write access = Failure detection time + grace period with data loss</span></span> |
|||

## <a name="next-steps"></a><span data-ttu-id="edbaa-238">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="edbaa-238">Next steps</span></span>
* <span data-ttu-id="edbaa-239">toolearn sui backup di Database di SQL Azure automatizzati, vedere [backup automatici di Database SQL](sql-database-automated-backups.md)</span><span class="sxs-lookup"><span data-stu-id="edbaa-239">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md)</span></span>
* <span data-ttu-id="edbaa-240">Per la panoramica e gli scenari della continuità aziendale, vedere [Continuità aziendale del database SQL di Azure](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="edbaa-240">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="edbaa-241">toolearn sull'utilizzo di backup automatico per il ripristino, vedere [ripristinare un database dai backup avviate dal servizio hello](sql-database-recovery-using-backups.md)</span><span class="sxs-lookup"><span data-stu-id="edbaa-241">toolearn about using automated backups for recovery, see [restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md)</span></span>
* <span data-ttu-id="edbaa-242">toolearn sulle opzioni di ripristino più veloce, vedere [replica geografica attiva](sql-database-geo-replication-overview.md)</span><span class="sxs-lookup"><span data-stu-id="edbaa-242">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md)</span></span>  
* <span data-ttu-id="edbaa-243">toolearn sull'utilizzo di backup automatico per l'archiviazione, vedere [copia del database](sql-database-copy.md)</span><span class="sxs-lookup"><span data-stu-id="edbaa-243">toolearn about using automated backups for archiving, see [database copy](sql-database-copy.md)</span></span>
* <span data-ttu-id="edbaa-244">Per informazioni sulla replica geografica attiva con i pool elastici, vedere [Strategie di ripristino di emergenza per applicazioni che usano il pool elastico del database SQL](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span><span class="sxs-lookup"><span data-stu-id="edbaa-244">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>
