---
title: Comprendere i connettori del proxy applicazione Azure AD | Microsoft Docs
description: Tratta i fondamenti dei connettori del proxy applicazione Azure AD.
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: c18d0a2bff654573e6e28a7cd7fad853b3a11346
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/18/2017
---
# <a name="understand-azure-ad-application-proxy-connectors"></a><span data-ttu-id="8d793-103">Comprendere i connettori del proxy applicazione Azure AD</span><span class="sxs-lookup"><span data-stu-id="8d793-103">Understand Azure AD Application Proxy connectors</span></span>

<span data-ttu-id="8d793-104">I connettori sono ciò che rende possibile il proxy di applicazione di Azure AD.</span><span class="sxs-lookup"><span data-stu-id="8d793-104">Connectors are what make Azure AD Application Proxy possible.</span></span> <span data-ttu-id="8d793-105">Sono semplici, estremamente potenti e facile da distribuire e gestire.</span><span class="sxs-lookup"><span data-stu-id="8d793-105">They are simple, easy to deploy and maintain, and super powerful.</span></span> <span data-ttu-id="8d793-106">Questo articolo illustra i connettori, il loro funzionamento e alcune procedure consigliate per ottimizzare al meglio la distribuzione.</span><span class="sxs-lookup"><span data-stu-id="8d793-106">This article discusses what connectors are, how they work, and some suggestions for how to optimize your deployment.</span></span> 

## <a name="what-is-an-application-proxy-connector"></a><span data-ttu-id="8d793-107">Informazioni su un connettore proxy di applicazione</span><span class="sxs-lookup"><span data-stu-id="8d793-107">What is an Application Proxy connector</span></span>

<span data-ttu-id="8d793-108">I connettori sono agenti semplici che si trovano a livello locale e facilitano la connessione in uscita al servizio proxy di applicazione.</span><span class="sxs-lookup"><span data-stu-id="8d793-108">Connectors are lightweight agents that sit on-premises and facilitate the outbound connection to the Application Proxy service.</span></span> <span data-ttu-id="8d793-109">I connettori devono essere installati su un server Windows dotato di accesso all'applicazione back-end.</span><span class="sxs-lookup"><span data-stu-id="8d793-109">Connectors must be installed on a Windows Server that has access to the backend application.</span></span> <span data-ttu-id="8d793-110">È possibile organizzare i connettori in gruppi di connettori, con ogni gruppo che gestisce il traffico per applicazioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="8d793-110">You can organize connectors into connector groups, with each group handling traffic to specific applications.</span></span> <span data-ttu-id="8d793-111">I connettori eseguono automaticamente il bilanciamento del carico e consentono di ottimizzare la struttura di rete.</span><span class="sxs-lookup"><span data-stu-id="8d793-111">Connectors load-balance automatically, and can help to optimize your network structure.</span></span> 

## <a name="requirements-and-deployment"></a><span data-ttu-id="8d793-112">Requisiti e distribuzione</span><span class="sxs-lookup"><span data-stu-id="8d793-112">Requirements and deployment</span></span>

<span data-ttu-id="8d793-113">Per distribuire correttamente il proxy di applicazione, è necessario almeno un connettore, ma sono consigliati due o più connettori per assicurare maggiore resilienza.</span><span class="sxs-lookup"><span data-stu-id="8d793-113">To deploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span></span> <span data-ttu-id="8d793-114">Installare il connettore in computer con Windows Server 2012 R2 o 2016.</span><span class="sxs-lookup"><span data-stu-id="8d793-114">Install the connector on a Windows Server 2012 R2 or 2016 machine.</span></span> <span data-ttu-id="8d793-115">Il connettore deve poter comunicare con il servizio proxy di applicazione e con le applicazioni locali che vengono pubblicate.</span><span class="sxs-lookup"><span data-stu-id="8d793-115">The connector needs to be able to communicate with the Application Proxy service as well as the on-premises applications that you publish.</span></span> 

<span data-ttu-id="8d793-116">Per ulteriori informazioni sui requisiti di rete per il server del connettore, vedere [Introduzione al proxy dell'applicazione e installazione di un connettore](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="8d793-116">For more information about the network requirements for the connector server, see [Get started with Application Proxy and install a connector](active-directory-application-proxy-enable.md).</span></span>

## <a name="maintenance"></a><span data-ttu-id="8d793-117">Manutenzione </span><span class="sxs-lookup"><span data-stu-id="8d793-117">Maintenance</span></span>
<span data-ttu-id="8d793-118">I connettori e il servizio si occupano di tutte le attività che richiedono disponibilità elevata.</span><span class="sxs-lookup"><span data-stu-id="8d793-118">The connectors and the service take care of all the high availability tasks.</span></span> <span data-ttu-id="8d793-119">Possono essere aggiunti o rimossi in modo dinamico.</span><span class="sxs-lookup"><span data-stu-id="8d793-119">They can be added or removed dynamically.</span></span> <span data-ttu-id="8d793-120">Ogni volta che arriva una nuova richiesta, questa viene indirizzata a uno dei connettori attualmente disponibili.</span><span class="sxs-lookup"><span data-stu-id="8d793-120">Each time a new request arrives it is routed to one of the connectors that is currently available.</span></span> <span data-ttu-id="8d793-121">Se un connettore è temporaneamente non disponibile, non risponde a questo traffico.</span><span class="sxs-lookup"><span data-stu-id="8d793-121">If a connector is temporarily not available, it doesn't respond to this traffic.</span></span>

<span data-ttu-id="8d793-122">I connettori sono senza stato e senza dati di configurazione nel computer.</span><span class="sxs-lookup"><span data-stu-id="8d793-122">The connectors are stateless and have no configuration data on the machine.</span></span> <span data-ttu-id="8d793-123">Gli unici dati che archiviano sono le impostazioni per la connessione del servizio e il relativo certificato di autenticazione.</span><span class="sxs-lookup"><span data-stu-id="8d793-123">The only data they store is the settings for connecting the service and its authentication certificate.</span></span> <span data-ttu-id="8d793-124">Quando si connettono al servizio, eseguono il pull di tutti i dati di configurazione necessari e li aggiornano ogni due minuti.</span><span class="sxs-lookup"><span data-stu-id="8d793-124">When they connect to the service, they pull all the required configuration data and refresh it every couple of minutes.</span></span>

<span data-ttu-id="8d793-125">I connettori eseguono inoltre il polling del server per verificare se è disponibile una versione più recente del connettore.</span><span class="sxs-lookup"><span data-stu-id="8d793-125">Connectors also poll the server to find out whether there is a newer version of the connector.</span></span> <span data-ttu-id="8d793-126">Se ne viene individuata una, i connettori vengono aggiornati.</span><span class="sxs-lookup"><span data-stu-id="8d793-126">If one is found, the connectors update themselves.</span></span>

<span data-ttu-id="8d793-127">È possibile monitorare i connettori dal computer in cui vengono eseguiti usando il registro eventi e i contatori delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="8d793-127">You can monitor your connectors from the machine they are running on, using either the event log and performance counters.</span></span> <span data-ttu-id="8d793-128">In alternativa è possibile vedere lo stato dalla pagina del proxy di applicazione del portale di Azure:</span><span class="sxs-lookup"><span data-stu-id="8d793-128">Or you can view their status from the Application Proxy page of the Azure portal:</span></span>

 ![Connettori del proxy applicazione AzureAD](./media/application-proxy-understand-connectors/app-proxy-connectors.png)

<span data-ttu-id="8d793-130">Non è necessario eliminare manualmente i connettori che non vengono usati.</span><span class="sxs-lookup"><span data-stu-id="8d793-130">You don't have to manually delete connectors that are unused.</span></span> <span data-ttu-id="8d793-131">Quando un connettore è in esecuzione, rimane attivo quando si connette al servizio.</span><span class="sxs-lookup"><span data-stu-id="8d793-131">When a connector is running, it remains active as it connects to the service.</span></span> <span data-ttu-id="8d793-132">I connettori inutilizzati vengono contrassegnati come _inattivi_ e vengono rimossi dopo 10 giorni di inattività.</span><span class="sxs-lookup"><span data-stu-id="8d793-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span></span> <span data-ttu-id="8d793-133">Per disinstallare un connettore, disinstallare sia il servizio connettore che il servizio di aggiornamento dal server.</span><span class="sxs-lookup"><span data-stu-id="8d793-133">If you do want to uninstall a connector, though, uninstall both the Connector service and the Updater service from the server.</span></span> <span data-ttu-id="8d793-134">Riavviare il computer per rimuovere completamente il servizio.</span><span class="sxs-lookup"><span data-stu-id="8d793-134">Restart your computer to fully remove the service.</span></span>

## <a name="automatic-updates"></a><span data-ttu-id="8d793-135">Aggiornamenti automatici</span><span class="sxs-lookup"><span data-stu-id="8d793-135">Automatic updates</span></span>

<span data-ttu-id="8d793-136">Azure AD offre aggiornamenti automatici per tutti i connettori da distribuire.</span><span class="sxs-lookup"><span data-stu-id="8d793-136">Azure AD provides automatic updates for all the connectors that you deploy.</span></span> <span data-ttu-id="8d793-137">Fino a quando il servizio di aggiornamento del connettore proxy di applicazione è in esecuzione, i connettori vengono aggiornati automaticamente.</span><span class="sxs-lookup"><span data-stu-id="8d793-137">As long as the Application Proxy Connector Updater service is running, your connectors update automatically.</span></span> <span data-ttu-id="8d793-138">Se non viene visualizzato il servizio di aggiornamento del connettore nel server, è necessario [reinstallare il connettore](active-directory-application-proxy-enable.md) per ottenere gli aggiornamenti.</span><span class="sxs-lookup"><span data-stu-id="8d793-138">If you don’t see the Connector Updater service on your server, you need to [reinstall your connector](active-directory-application-proxy-enable.md) to get any updates.</span></span> 

<span data-ttu-id="8d793-139">Se non si vuole attendere l'aggiornamento automatico del connettore, è possibile eseguire un aggiornamento manuale.</span><span class="sxs-lookup"><span data-stu-id="8d793-139">If you don't want to wait for an automatic update to come to your connector, you can perform a manual upgrade.</span></span> <span data-ttu-id="8d793-140">Passare alla [pagina di download del connettore](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) nel server in cui si trova il connettore e selezionare **Download**.</span><span class="sxs-lookup"><span data-stu-id="8d793-140">Go to the [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on the server where your connector is located and select **Download**.</span></span> <span data-ttu-id="8d793-141">Grazie a questo processo viene avviato un aggiornamento del connettore locale.</span><span class="sxs-lookup"><span data-stu-id="8d793-141">This process kicks off an upgrade for the local connector.</span></span> 

<span data-ttu-id="8d793-142">In caso di tenant con più connettori, gli aggiornamenti automatici vengono applicati a un connettore per volta in ogni gruppo, al fine di evitare tempo di inattività nell'ambiente in uso.</span><span class="sxs-lookup"><span data-stu-id="8d793-142">For tenants with multiple connectors, the automatic updates target one connector at a time in each group to prevent downtime in your environment.</span></span> 

<span data-ttu-id="8d793-143">Potrebbero verificarsi tempi di inattività quando viene aggiornato il connettore se:</span><span class="sxs-lookup"><span data-stu-id="8d793-143">You may experience downtime when your connector updates if:</span></span>  
- <span data-ttu-id="8d793-144">Si ha un solo connettore.</span><span class="sxs-lookup"><span data-stu-id="8d793-144">You only have one connector.</span></span> <span data-ttu-id="8d793-145">Per evitare questo periodo di inattività e migliorare la disponibilità elevata, è consigliabile installare un altro connettore e [creare un gruppo di connettori](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="8d793-145">To avoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](active-directory-application-proxy-connectors-azure-portal.md).</span></span>  
- <span data-ttu-id="8d793-146">Un connettore si trovava nel mezzo di una transazione quando è iniziato l'aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="8d793-146">A connector was in the middle of a transaction when the update began.</span></span> <span data-ttu-id="8d793-147">Anche se la transazione iniziale viene persa, il browser dovrebbe ripetere automaticamente l'operazione. In caso contrario, è possibile aggiornare la pagina.</span><span class="sxs-lookup"><span data-stu-id="8d793-147">Although the initial transaction is lost, your browser should automatically retry the operation or you can refresh your page.</span></span> <span data-ttu-id="8d793-148">Quando la richiesta viene inviata di nuovo, il traffico viene indirizzato a un connettore di backup.</span><span class="sxs-lookup"><span data-stu-id="8d793-148">When the request is resent, the traffic is routed to a backup connector.</span></span>

## <a name="creating-connector-groups"></a><span data-ttu-id="8d793-149">Creazione di gruppi di connettori</span><span class="sxs-lookup"><span data-stu-id="8d793-149">Creating connector groups</span></span>

<span data-ttu-id="8d793-150">I gruppi di connettori consentono di assegnare connettori specifici per gestire applicazioni specifiche.</span><span class="sxs-lookup"><span data-stu-id="8d793-150">Connector groups enable you to assign specific connectors to serve specific applications.</span></span> <span data-ttu-id="8d793-151">È possibile raggruppare una serie di connettori e quindi assegnare ogni applicazione a un gruppo.</span><span class="sxs-lookup"><span data-stu-id="8d793-151">You can group a number of connectors together, and then assign each application to a group.</span></span> 

<span data-ttu-id="8d793-152">I gruppi di connettori rendono più semplice gestire le distribuzioni di grandi dimensioni.</span><span class="sxs-lookup"><span data-stu-id="8d793-152">Connector groups make it easier to manage large deployments.</span></span> <span data-ttu-id="8d793-153">Migliorano inoltre la latenza per i tenant che dispongono di applicazioni ospitate in diverse aree geografiche, poiché è possibile creare gruppi di connettori basati sulla posizione per gestire solo le applicazioni in locale.</span><span class="sxs-lookup"><span data-stu-id="8d793-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups to serve only local applications.</span></span> 

<span data-ttu-id="8d793-154">Per altre informazioni sui gruppi di connettori, vedere [Pubblicare applicazioni in reti e posizioni separate tramite i gruppi di connettori](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="8d793-154">To learn more about connector groups, see [Publish applications on separate networks and locations using connector groups](active-directory-application-proxy-connectors-azure-portal.md).</span></span>

## <a name="security-and-networking"></a><span data-ttu-id="8d793-155">Sicurezza e rete</span><span class="sxs-lookup"><span data-stu-id="8d793-155">Security and networking</span></span>

<span data-ttu-id="8d793-156">I connettori possono essere installati in qualsiasi punto della rete che consenta loro di inviare richieste al servizio proxy dell'applicazione.</span><span class="sxs-lookup"><span data-stu-id="8d793-156">Connectors can be installed anywhere on the network that allows them to send requests to the Application Proxy service.</span></span> <span data-ttu-id="8d793-157">È importante che il computer che esegue il connettore abbia anche accesso alle app.</span><span class="sxs-lookup"><span data-stu-id="8d793-157">What's important is that the computer running the connector also has access to your apps.</span></span> <span data-ttu-id="8d793-158">È possibile installare i connettori all'interno della rete aziendale o in una macchina virtuale che viene eseguita nel cloud.</span><span class="sxs-lookup"><span data-stu-id="8d793-158">You can install connectors inside of your corporate network or on a virtual machine that runs in the cloud.</span></span> <span data-ttu-id="8d793-159">I connettori possono essere eseguiti in una zona demilitarizzata (DMZ), ma non è necessario poiché tutto il traffico è in uscita, in modo che la rete è protetta.</span><span class="sxs-lookup"><span data-stu-id="8d793-159">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span></span>

<span data-ttu-id="8d793-160">I connettori inviano le richieste soltanto in uscita.</span><span class="sxs-lookup"><span data-stu-id="8d793-160">Connectors only send outbound requests.</span></span> <span data-ttu-id="8d793-161">Il traffico in uscita viene inviato al servizio proxy applicazione e alle applicazioni pubblicate.</span><span class="sxs-lookup"><span data-stu-id="8d793-161">The outbound traffic is sent to the Application Proxy service and to the published applications.</span></span> <span data-ttu-id="8d793-162">Non è necessario aprire porte in ingresso perché il traffico scorre in entrambe le direzioni, dopo aver stabilito una sessione.</span><span class="sxs-lookup"><span data-stu-id="8d793-162">You don't have to open inbound ports because traffic flows both ways once a session is established.</span></span> <span data-ttu-id="8d793-163">Non è necessario configurare il bilanciamento del carico tra i connettori o configurare l'accesso in ingresso attraverso firewall.</span><span class="sxs-lookup"><span data-stu-id="8d793-163">You don't have to set up load balancing between the connectors or configure inbound access through your firewalls.</span></span> 

<span data-ttu-id="8d793-164">Per maggiori informazioni sulla configurazione delle regole del firewall in uscita, vedere [Usare server proxy locali esistenti](application-proxy-working-with-proxy-servers.md).</span><span class="sxs-lookup"><span data-stu-id="8d793-164">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-working-with-proxy-servers.md).</span></span>

<span data-ttu-id="8d793-165">Usare lo [strumento per il test delle porte del connettore Proxy di applicazione Azure AD](https://aadap-portcheck.connectorporttest.msappproxy.net/) per verificare che il connettore possa raggiungere il servizio Proxy di applicazione.</span><span class="sxs-lookup"><span data-stu-id="8d793-165">Use the [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) to verify that your connector can reach the Application Proxy service.</span></span> <span data-ttu-id="8d793-166">Assicurarsi almeno che l'area Stati Uniti centrali e l'area più vicina all'utente abbiano segni di spunta verdi.</span><span class="sxs-lookup"><span data-stu-id="8d793-166">At a minimum, make sure that the Central US region and the region closest to you have all green checkmarks.</span></span> <span data-ttu-id="8d793-167">Tuttavia, la presenza di più segni di spunta verde indica una maggiore resilienza.</span><span class="sxs-lookup"><span data-stu-id="8d793-167">Beyond that, more green checkmarks means greater resiliency.</span></span> 

## <a name="performance-and-scalability"></a><span data-ttu-id="8d793-168">Prestazioni e scalabilità</span><span class="sxs-lookup"><span data-stu-id="8d793-168">Performance and scalability</span></span>

<span data-ttu-id="8d793-169">Anche se la scalabilità per il servizio proxy di applicazione è trasparente, è comunque un fattore per i connettori.</span><span class="sxs-lookup"><span data-stu-id="8d793-169">Scale for the Application Proxy service is transparent, but scale is a factor for connectors.</span></span> <span data-ttu-id="8d793-170">È necessario disporre di connettori sufficienti per gestire il traffico di picco.</span><span class="sxs-lookup"><span data-stu-id="8d793-170">You need to have enough connectors to handle peak traffic.</span></span> <span data-ttu-id="8d793-171">Tuttavia, non è necessario configurare il bilanciamento del carico perché tutti i connettori all'interno di un gruppo di connettori eseguono automaticamente il bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="8d793-171">However, you don't need to configure load balancing because all connectors within a connector group automatically load balance.</span></span>

<span data-ttu-id="8d793-172">Poiché i connettori sono senza stato, non vengono influenzati dal numero di utenti o sessioni.</span><span class="sxs-lookup"><span data-stu-id="8d793-172">Since connectors are stateless, they are not affected by the number of users or sessions.</span></span> <span data-ttu-id="8d793-173">Dipendono invece dal numero di richieste e dalle dimensioni del payload.</span><span class="sxs-lookup"><span data-stu-id="8d793-173">Instead, they respond to the number of requests and their payload size.</span></span> <span data-ttu-id="8d793-174">In un traffico Web standard, un computer medio può gestire circa duemila richieste al secondo.</span><span class="sxs-lookup"><span data-stu-id="8d793-174">With standard web traffic, an average machine can handle a couple thousand requests per second.</span></span> <span data-ttu-id="8d793-175">La capacità specifica dipende dalle esatte caratteristiche del computer.</span><span class="sxs-lookup"><span data-stu-id="8d793-175">The specific capacity depends on the exact machine characteristics.</span></span> 

<span data-ttu-id="8d793-176">Le prestazioni del connettore sono legate alla CPU e alla rete.</span><span class="sxs-lookup"><span data-stu-id="8d793-176">The connector performance is bound by CPU and networking.</span></span> <span data-ttu-id="8d793-177">Le prestazioni della CPU sono necessarie per la crittografia SSL e la decrittografia, mentre la rete è fondamentale per una connettività veloce alle applicazioni e al servizio online in Azure.</span><span class="sxs-lookup"><span data-stu-id="8d793-177">CPU performance is needed for SSL encryption and decryption, while networking is important to get fast connectivity to the applications and the online service in Azure.</span></span>

<span data-ttu-id="8d793-178">La memoria, al contrario, ha meno importanza per i connettori.</span><span class="sxs-lookup"><span data-stu-id="8d793-178">In contrast, memory is less of an issue for connectors.</span></span> <span data-ttu-id="8d793-179">Il servizio online si occupa di gran parte dell'elaborazione e di tutto il traffico non autenticato.</span><span class="sxs-lookup"><span data-stu-id="8d793-179">The online service takes care of much of the processing and all unauthenticated traffic.</span></span> <span data-ttu-id="8d793-180">Tutto ciò che può essere fatto nel cloud viene fatto nel cloud.</span><span class="sxs-lookup"><span data-stu-id="8d793-180">Everything that can be done in the cloud is done in the cloud.</span></span> 

<span data-ttu-id="8d793-181">Un altro fattore che influenza le prestazioni è la qualità della connessione di rete tra i connettori, inclusi:</span><span class="sxs-lookup"><span data-stu-id="8d793-181">Another factor that affects performance is the quality of the networking between the connectors, including:</span></span> 

* <span data-ttu-id="8d793-182">**Il servizio online**: connessioni lente o a elevata latenza al servizio proxy di applicazione in Azure influenzano le prestazioni del connettore.</span><span class="sxs-lookup"><span data-stu-id="8d793-182">**The online service**: Slow or high-latency connections to the Application Proxy service in Azure influence the connector performance.</span></span> <span data-ttu-id="8d793-183">Per ottenere prestazioni ottimali, connettere l'organizzazione ad Azure con Express Route.</span><span class="sxs-lookup"><span data-stu-id="8d793-183">For the best performance, connect your organization to Azure with Express Route.</span></span> <span data-ttu-id="8d793-184">In caso contrario, assicurarsi che il team di rete garantisca una gestione il più possibile efficiente delle connessioni ad Azure.</span><span class="sxs-lookup"><span data-stu-id="8d793-184">Otherwise, have your networking team ensure that connections to Azure are handled as efficiently as possible.</span></span> 
* <span data-ttu-id="8d793-185">**Applicazioni back-end:** in alcuni casi ci sono altri proxy tra il connettore e le applicazioni back-end che possono rallentare o impedire la connessione.</span><span class="sxs-lookup"><span data-stu-id="8d793-185">**The backend applications**: In some cases, there are additional proxies between the connector and the backend applications that can slow or prevent connections.</span></span> <span data-ttu-id="8d793-186">Per risolvere questo scenario, aprire un browser dal server del connettore e tentare di accedere all'applicazione.</span><span class="sxs-lookup"><span data-stu-id="8d793-186">To troubleshoot this scenario, open a browser from the connector server and try to access the application.</span></span> <span data-ttu-id="8d793-187">Se si eseguono i connettori in Azure, ma le applicazioni sono locali, l'esperienza degli utenti potrebbe essere diversa da quella prevista.</span><span class="sxs-lookup"><span data-stu-id="8d793-187">If you run the connectors in Azure but the applications are on-premises, the experience might not be what your users expect.</span></span>
* <span data-ttu-id="8d793-188">**I controller di dominio:** se i connettori eseguono l'accesso SSO mediante la delega vincolata Kerberos, essi contattano i controller di dominio prima di inviare la richiesta al back-end.</span><span class="sxs-lookup"><span data-stu-id="8d793-188">**The domain controllers**: If the connectors perform SSO using Kerberos Constrained Delegation, they contact the domain controllers before sending the request to the backend.</span></span> <span data-ttu-id="8d793-189">I connettori hanno una cache dei ticket Kerberos, ma in ambienti affollati la velocità di risposta dei controller di dominio può influenzare le prestazioni.</span><span class="sxs-lookup"><span data-stu-id="8d793-189">The connectors have a cache of Kerberos tickets, but in a busy environment the responsiveness of the domain controllers can affect performance.</span></span> <span data-ttu-id="8d793-190">Questa situazione è più comune per i connettori eseguiti in Azure, ma che comunicano con i controller di dominio locali.</span><span class="sxs-lookup"><span data-stu-id="8d793-190">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span></span> 

<span data-ttu-id="8d793-191">Per maggiori informazioni sull'ottimizzazione della rete, vedere [Considerazioni relative alla topologia di rete quando si usa il proxy di applicazione di Azure Active Directory](application-proxy-network-topology-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="8d793-191">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span></span>

## <a name="domain-joining"></a><span data-ttu-id="8d793-192">Aggiunta al dominio</span><span class="sxs-lookup"><span data-stu-id="8d793-192">Domain joining</span></span>

<span data-ttu-id="8d793-193">I connettori possono essere eseguiti in un computer che non fa parte del dominio.</span><span class="sxs-lookup"><span data-stu-id="8d793-193">Connectors can run on a machine that is not domain-joined.</span></span> <span data-ttu-id="8d793-194">È necessario tuttavia un computer appartenente al dominio se si sceglie di implementare un accesso Single Sign-On (SSO) per le applicazioni che usano l'autenticazione integrata di Windows (IWA).</span><span class="sxs-lookup"><span data-stu-id="8d793-194">However, if you want single sign-on (SSO) to applications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span></span> <span data-ttu-id="8d793-195">In questo caso i computer di connessione devono appartenere a un dominio che può eseguire la delega vincolata [Kerberos](https://web.mit.edu/kerberos) per conto degli utenti per le applicazioni pubblicate.</span><span class="sxs-lookup"><span data-stu-id="8d793-195">In this case, the connector machines must be joined to a domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of the users for the published applications.</span></span>

<span data-ttu-id="8d793-196">I connettori possono anche essere aggiunti a domini o foreste con attendibilità parziale o a controller di dominio di sola lettura.</span><span class="sxs-lookup"><span data-stu-id="8d793-196">Connectors can also be joined to domains or forests that have a partial trust, or to read-only domain controllers.</span></span>

## <a name="connector-deployments-on-hardened-environments"></a><span data-ttu-id="8d793-197">Distribuzione dei connettori in ambienti protetti</span><span class="sxs-lookup"><span data-stu-id="8d793-197">Connector deployments on hardened environments</span></span>

<span data-ttu-id="8d793-198">Nella maggior parte dei casi la distribuzione dei connettori è molto semplice e non richiede una configurazione speciale.</span><span class="sxs-lookup"><span data-stu-id="8d793-198">Usually, connector deployment is straightforward and requires no special configuration.</span></span> <span data-ttu-id="8d793-199">Esistono tuttavia alcune condizioni specifiche che devono essere considerate:</span><span class="sxs-lookup"><span data-stu-id="8d793-199">However, there are some unique conditions that should be considered:</span></span>

* <span data-ttu-id="8d793-200">Le organizzazioni che limitano il traffico in uscita devono [aprire le porte necessarie](active-directory-application-proxy-enable.md#open-your-ports).</span><span class="sxs-lookup"><span data-stu-id="8d793-200">Organizations that limit the outbound traffic must [open required ports](active-directory-application-proxy-enable.md#open-your-ports).</span></span>
* <span data-ttu-id="8d793-201">Per i computer conformi FIPS potrebbe essere necessario modificare la configurazione per consentire ai processi connettore di generare e archiviare un certificato.</span><span class="sxs-lookup"><span data-stu-id="8d793-201">FIPS-compliant machines might be required to change their configuration to allow the connector processes to generate and store a certificate.</span></span>
* <span data-ttu-id="8d793-202">Le organizzazioni, che bloccano il proprio ambiente in base ai processi che inviano le richieste di rete, devono assicurarsi che siano abilitati entrambi i servizi connettore per accedere a tutte le porte e agli indirizzi IP necessari.</span><span class="sxs-lookup"><span data-stu-id="8d793-202">Organizations that lock down their environment based on the processes that issue the networking requests have to make sure that both connector services are enabled to access all required ports and IPs.</span></span>
* <span data-ttu-id="8d793-203">In alcuni casi il proxy di inoltro in uscita può interrompere l'autenticazione bidirezionale con certificato e non consentire la comunicazione.</span><span class="sxs-lookup"><span data-stu-id="8d793-203">In some cases, outbound forward proxies may break the two-way certificate authentication and cause the communication to fail.</span></span>

## <a name="connector-authentication"></a><span data-ttu-id="8d793-204">Autenticazione del connettore</span><span class="sxs-lookup"><span data-stu-id="8d793-204">Connector authentication</span></span>

<span data-ttu-id="8d793-205">Per garantire un servizio sicuro, i connettori devono eseguire l'autenticazione verso il servizio e il servizio deve eseguire l'autenticazione verso il connettore.</span><span class="sxs-lookup"><span data-stu-id="8d793-205">To provide a secure service, connectors have to authenticate toward the service, and the service has to authenticate toward the connector.</span></span> <span data-ttu-id="8d793-206">Questa autenticazione viene eseguita usando i certificati client e server quando i connettori avviano la connessione.</span><span class="sxs-lookup"><span data-stu-id="8d793-206">This authentication is done using client and server certificates when the connectors initiate the connection.</span></span> <span data-ttu-id="8d793-207">In questo modo il nome utente e la password dell'amministratore non sono archiviati sul computer di connessione.</span><span class="sxs-lookup"><span data-stu-id="8d793-207">This way the administrator’s username and password are not stored on the connector machine.</span></span>

<span data-ttu-id="8d793-208">I certificati utilizzati sono specifici per il servizio proxy applicazione.</span><span class="sxs-lookup"><span data-stu-id="8d793-208">The certificates used are specific to the Application Proxy service.</span></span> <span data-ttu-id="8d793-209">Vengono creati durante la registrazione iniziale e rinnovati automaticamente dai connettori ogni due mesi.</span><span class="sxs-lookup"><span data-stu-id="8d793-209">They get created during the initial registration and are automatically renewed by the connectors every couple of months.</span></span> 

<span data-ttu-id="8d793-210">Se un connettore non viene connesso al servizio per molti mesi, i relativi certificati potrebbero non essere più aggiornati.</span><span class="sxs-lookup"><span data-stu-id="8d793-210">If a connector is not connected to the service for several months, its certificates may be outdated.</span></span> <span data-ttu-id="8d793-211">In questo caso, disinstallare e reinstallare il connettore per attivare la registrazione.</span><span class="sxs-lookup"><span data-stu-id="8d793-211">In this case, uninstall and reinstall the connector to trigger registration.</span></span> <span data-ttu-id="8d793-212">È possibile eseguire i seguenti comandi di PowerShell:</span><span class="sxs-lookup"><span data-stu-id="8d793-212">You can run the following PowerShell commands:</span></span>

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-the-hood"></a><span data-ttu-id="8d793-213">Dietro le quinte</span><span class="sxs-lookup"><span data-stu-id="8d793-213">Under the hood</span></span>

<span data-ttu-id="8d793-214">I connettori sono basati su proxy di applicazione Web di Windows Server, per cui condividono la maggior parte degli strumenti di gestione, inclusi i registri eventi di Windows</span><span class="sxs-lookup"><span data-stu-id="8d793-214">Connectors are based on Windows Server Web Application Proxy, so they have most of the same management tools including Windows Event Logs</span></span>

 ![Gestire i registri eventi con il Visualizzatore eventi](./media/application-proxy-understand-connectors/event-view-window.png)

<span data-ttu-id="8d793-216">e con i contatori delle prestazioni di Windows.</span><span class="sxs-lookup"><span data-stu-id="8d793-216">and Windows performance counters.</span></span> 

 ![Aggiungere contatori al connettore con Performance Monitor](./media/application-proxy-understand-connectors/performance-monitor.png)

<span data-ttu-id="8d793-218">I connettori hanno sia log di amministrazione che log di sessione.</span><span class="sxs-lookup"><span data-stu-id="8d793-218">The connectors have both admin and session logs.</span></span> <span data-ttu-id="8d793-219">I log di amministrazione includono gli eventi principali e i relativi errori.</span><span class="sxs-lookup"><span data-stu-id="8d793-219">The admin logs include key events and their errors.</span></span> <span data-ttu-id="8d793-220">I log di sessione includono tutte le transazioni e i relativi dettagli di elaborazione.</span><span class="sxs-lookup"><span data-stu-id="8d793-220">The session logs include all the transactions and their processing details.</span></span> 

<span data-ttu-id="8d793-221">Per visualizzare i registri, passare al Visualizzatore eventi, aprire il menu **Visualizza** e abilitare **Visualizza registri analitici e di debug**.</span><span class="sxs-lookup"><span data-stu-id="8d793-221">To see the logs, go to the Event Viewer, open the **View** menu, and enable **Show analytic and debug logs**.</span></span> <span data-ttu-id="8d793-222">È necessario abilitarli per avviare la raccolta degli eventi.</span><span class="sxs-lookup"><span data-stu-id="8d793-222">Then, enable them to start collecting events.</span></span> <span data-ttu-id="8d793-223">Questi log non appaiono nel proxy applicazione Web in Windows Server 2012 R2, in quanto i connettori sono basati su una versione più recente.</span><span class="sxs-lookup"><span data-stu-id="8d793-223">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as the connectors are based on a more recent version.</span></span>

<span data-ttu-id="8d793-224">È possibile esaminare lo stato del servizio nella finestra Servizi.</span><span class="sxs-lookup"><span data-stu-id="8d793-224">You can examine the state of the service in the Services window.</span></span> <span data-ttu-id="8d793-225">Il connettore è costituito da due servizi di Windows, ovvero il connettore stesso e il programma di aggiornamento.</span><span class="sxs-lookup"><span data-stu-id="8d793-225">The connector comprises two Windows Services: the actual connector, and the updater.</span></span> <span data-ttu-id="8d793-226">Entrambi devono essere eseguiti costantemente.</span><span class="sxs-lookup"><span data-stu-id="8d793-226">Both of them must run all the time.</span></span>

 ![Servizi Azure AD locali](./media/application-proxy-understand-connectors/aad-connector-services.png)

## <a name="next-steps"></a><span data-ttu-id="8d793-228">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="8d793-228">Next steps</span></span>


* [<span data-ttu-id="8d793-229">Pubblicare applicazioni in reti e posizioni separate tramite i gruppi di connettori</span><span class="sxs-lookup"><span data-stu-id="8d793-229">Publish applications on separate networks and locations using connector groups</span></span>](active-directory-application-proxy-connectors-azure-portal.md)
* [<span data-ttu-id="8d793-230">Usare server proxy locali esistenti</span><span class="sxs-lookup"><span data-stu-id="8d793-230">Work with existing on-premises proxy servers</span></span>](application-proxy-working-with-proxy-servers.md)
* [<span data-ttu-id="8d793-231">Risolvere i problemi di errore del proxy di applicazione e del connettore</span><span class="sxs-lookup"><span data-stu-id="8d793-231">Troubleshoot Application Proxy and connector errors</span></span>](active-directory-application-proxy-troubleshoot.md)
* [<span data-ttu-id="8d793-232">Come eseguire un'installazione invisibile all'utente del connettore del proxy di applicazione di Azure AD</span><span class="sxs-lookup"><span data-stu-id="8d793-232">How to silently install the Azure AD Application Proxy Connector</span></span>](active-directory-application-proxy-silent-installation.md)

