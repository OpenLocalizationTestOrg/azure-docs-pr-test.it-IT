---
title: Regole firewall per Database di Azure per il server PostgreSQL | Microsoft Docs
description: Descrive le regole firewall per il Database di Azure per il server PostgreSQL.
services: postgresql
author: jasonwhowell
ms.author: jasonh
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 05/10/2017
ms.openlocfilehash: 150c4f53c5ab6a6425b6af7d286d4c1518b006f8
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 08/29/2017
---
# <a name="azure-database-for-postgresql-server-firewall-rules"></a><span data-ttu-id="3ec11-103">Regole firewall per Database di Azure per PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="3ec11-103">Azure Database for PostgreSQL Server firewall rules</span></span>
<span data-ttu-id="3ec11-104">I firewall impediscono qualsiasi accesso al server del database finché non vengono specificati i computer autorizzati.</span><span class="sxs-lookup"><span data-stu-id="3ec11-104">Firewalls prevent all access to your database server until you specify which computers have permission.</span></span> <span data-ttu-id="3ec11-105">Il firewall concede l'accesso al server in base all'indirizzo IP di origine di ogni richiesta.</span><span class="sxs-lookup"><span data-stu-id="3ec11-105">The firewall grants access to the server based on the originating IP address of each request.</span></span>
<span data-ttu-id="3ec11-106">Per configurare il firewall, creare regole del firewall che specificano gli intervalli di indirizzi IP accettabili.</span><span class="sxs-lookup"><span data-stu-id="3ec11-106">To configure your firewall, you create firewall rules that specify ranges of acceptable IP addresses.</span></span> <span data-ttu-id="3ec11-107">È possibile creare regole firewall a livello di server.</span><span class="sxs-lookup"><span data-stu-id="3ec11-107">You can create firewall rules at the server level.</span></span>

<span data-ttu-id="3ec11-108">**Regole firewall:** queste regole consentono ai client di accedere all'intero Database di Azure per il server PostgreSQL, ovvero a tutti i database all'interno dello stesso server logico.</span><span class="sxs-lookup"><span data-stu-id="3ec11-108">**Firewall rules:** These rules enable clients to access your entire Azure Database for PostgreSQL Server, that is, all the databases within the same logical server.</span></span> <span data-ttu-id="3ec11-109">Le regole firewall a livello di server possono essere configurate usando il portale di Azure o i comandi dell'interfaccia della riga di comando di Azure.</span><span class="sxs-lookup"><span data-stu-id="3ec11-109">Server-level firewall rules can be configured by using the Azure portal or using Azure CLI commands.</span></span> <span data-ttu-id="3ec11-110">Per creare regole firewall a livello di server è necessario essere il proprietario o un collaboratore della sottoscrizione.</span><span class="sxs-lookup"><span data-stu-id="3ec11-110">To create server-level firewall rules, you must be the subscription owner or a subscription contributor.</span></span>

## <a name="firewall-overview"></a><span data-ttu-id="3ec11-111">Panoramica del firewall</span><span class="sxs-lookup"><span data-stu-id="3ec11-111">Firewall overview</span></span>
<span data-ttu-id="3ec11-112">Per impostazione predefinita, l'accesso al Database di Azure per il server PostgreSQL è bloccato dal firewall.</span><span class="sxs-lookup"><span data-stu-id="3ec11-112">All database access to your Azure Database for PostgreSQL server is blocked by the firewall by default.</span></span> <span data-ttu-id="3ec11-113">Per iniziare a usare il server da un altro computer è necessario specificare una o più regole firewall a livello di server che consentano di accedere al server.</span><span class="sxs-lookup"><span data-stu-id="3ec11-113">To begin using your server from another computer, you need to specify one or more server-level firewall rules to enable access to your server.</span></span> <span data-ttu-id="3ec11-114">Usare le regole firewall per specificare gli intervalli di indirizzi IP da Internet a cui concedere l'accesso.</span><span class="sxs-lookup"><span data-stu-id="3ec11-114">Use the firewall rules to specify which IP address ranges from the Internet to allow.</span></span> <span data-ttu-id="3ec11-115">L'accesso al sito Web del portale di Azure non è determinato dalle regole firewall.</span><span class="sxs-lookup"><span data-stu-id="3ec11-115">Access to the Azure portal website itself is not impacted by the firewall rules.</span></span>
<span data-ttu-id="3ec11-116">I tentativi di connessione da Internet e Azure devono superare il firewall prima di poter raggiungere il database PostgreSQL, come illustrato nel diagramma seguente:</span><span class="sxs-lookup"><span data-stu-id="3ec11-116">Connection attempts from the Internet and Azure must first pass through the firewall before they can reach your PostgreSQL Database, as shown in the following diagram:</span></span>

![Esempio del flusso di funzionamento del firewall](media/concepts-firewall-rules/1-firewall-concept.png)

## <a name="connecting-from-the-internet"></a><span data-ttu-id="3ec11-118">Connessione da Internet</span><span class="sxs-lookup"><span data-stu-id="3ec11-118">Connecting from the Internet</span></span>
<span data-ttu-id="3ec11-119">Le regole firewall a livello di server si applicano a tutti i database del Database di Azure per il server PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="3ec11-119">Server-level firewall rules apply to all databases on the Azure Database for PostgreSQL server.</span></span> <span data-ttu-id="3ec11-120">Se l'indirizzo IP della richiesta rientra in uno degli intervalli specificati nelle regole firewall a livello di server, viene consentita la connessione.</span><span class="sxs-lookup"><span data-stu-id="3ec11-120">If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted.</span></span>
<span data-ttu-id="3ec11-121">Se l'indirizzo IP della richiesta non rientra negli intervalli specificati in una delle regole firewall a livello di database o di server, la richiesta di connessione ha esito negativo.</span><span class="sxs-lookup"><span data-stu-id="3ec11-121">If the IP address of the request is not within the ranges specified in any of the database-level or server-level firewall rules, the connection request fails.</span></span>
<span data-ttu-id="3ec11-122">Ad esempio, se l'applicazione si connette con il driver JDBC per PostgreSQL, potrebbe verificarsi questo errore durante il tentativo di connessione quando il firewall blocca la connessione.</span><span class="sxs-lookup"><span data-stu-id="3ec11-122">For example, if your application connects with JDBC driver for PostgreSQL, you may encounter this error attempting to connect when the firewall is blocking the connection.</span></span>
> <span data-ttu-id="3ec11-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: nessuna voce pg\_hba.conf per l'host "123.45.67.890", utente "adminuser", database "postgresql", SSL</span><span class="sxs-lookup"><span data-stu-id="3ec11-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: no pg\_hba.conf entry for host "123.45.67.890", user "adminuser", database "postgresql", SSL</span></span>

## <a name="programmatically-managing-firewall-rules"></a><span data-ttu-id="3ec11-124">Gestione di regole del firewall a livello di programmazione</span><span class="sxs-lookup"><span data-stu-id="3ec11-124">Programmatically managing firewall rules</span></span>
<span data-ttu-id="3ec11-125">Oltre al portale di Azure, le regole firewall possono essere gestite a livello di programmazione usando l'interfaccia della riga di comando di Azure.</span><span class="sxs-lookup"><span data-stu-id="3ec11-125">In addition to the Azure portal, firewall rules can be managed programmatically using Azure CLI.</span></span>
<span data-ttu-id="3ec11-126">Vedere anche [Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md) (Creare e gestire regole firewall per il Database di Azure per PostgreSQL tramite l'interfaccia della riga di comando di Azure)</span><span class="sxs-lookup"><span data-stu-id="3ec11-126">See also [Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md)</span></span>

## <a name="troubleshooting-the-database-firewall"></a><span data-ttu-id="3ec11-127">Risoluzione dei problemi del firewall del database</span><span class="sxs-lookup"><span data-stu-id="3ec11-127">Troubleshooting the database firewall</span></span>
<span data-ttu-id="3ec11-128">Quando si effettua l'accesso al servizio Database di Microsoft Azure per il server PostgreSQL non si comporta come previsto, considerare quanto segue:</span><span class="sxs-lookup"><span data-stu-id="3ec11-128">Consider the following points when access to the Microsoft Azure Database for PostgreSQL Server service does not behave as you expect:</span></span>

* <span data-ttu-id="3ec11-129">**Le modifiche all'elenco Consentiti non sono state ancora applicate:** per rendere effettive le modifiche apportate al firewall del Database di Azure per il server PostgreSQL possono essere necessari fino a cinque minuti.</span><span class="sxs-lookup"><span data-stu-id="3ec11-129">**Changes to the allow list have not taken effect yet:** There may be as much as a five-minute delay for changes to the Azure Database for PostgreSQL Server firewall configuration to take effect.</span></span>

* <span data-ttu-id="3ec11-130">**L'accesso non è autorizzato oppure è stata usata una password errata:** quando un account di accesso non dispone delle autorizzazioni per il Database di Azure per il server PostgreSQL o la password usata non è corretta, la connessione al Database di Azure per il server PostgreSQL verrà negata.</span><span class="sxs-lookup"><span data-stu-id="3ec11-130">**The login is not authorized or an incorrect password was used:** If a login does not have permissions on the Azure Database for PostgreSQL server or the password used is incorrect, the connection to the Azure Database for PostgreSQL server is denied.</span></span> <span data-ttu-id="3ec11-131">La creazione di un'impostazione del firewall fornisce ai client soltanto un'opportunità di connessione al server; ogni client deve fornire le credenziali di sicurezza necessarie.</span><span class="sxs-lookup"><span data-stu-id="3ec11-131">Creating a firewall setting only provides clients with an opportunity to attempt connecting to your server; each client must provide the necessary security credentials.</span></span>

<span data-ttu-id="3ec11-132">Ad esempio, se si usa un client JDBC potrebbe essere visualizzato l'errore seguente.</span><span class="sxs-lookup"><span data-stu-id="3ec11-132">For example, using a JDBC client, the following error may appear.</span></span>
> <span data-ttu-id="3ec11-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: autenticazione della password non riuscita per l'utente "yourusername"</span><span class="sxs-lookup"><span data-stu-id="3ec11-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: password authentication failed for user "yourusername"</span></span>

* <span data-ttu-id="3ec11-134">**Indirizzo IP dinamico:** se si dispone di una connessione Internet con indirizzi IP dinamici e si verificano problemi di comunicazione attraverso il firewall, è possibile provare una delle seguenti soluzioni:</span><span class="sxs-lookup"><span data-stu-id="3ec11-134">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through the firewall, you could try one of the following solutions:</span></span>

* <span data-ttu-id="3ec11-135">Richiedere al provider di servizi Internet (ISP) l'intervallo di indirizzi IP assegnato ai computer client che accedono al Database di Azure per il server MySQL, quindi aggiungere l'intervallo di indirizzi IP come regola firewall.</span><span class="sxs-lookup"><span data-stu-id="3ec11-135">Ask your Internet Service Provider (ISP) for the IP address range assigned to your client computers that access the Azure Database for PostgreSQL Server, and then add the IP address range as a firewall rule.</span></span>

* <span data-ttu-id="3ec11-136">Ottenere indirizzi IP statici per i computer client, quindi aggiungere gli indirizzi IP come regole del firewall.</span><span class="sxs-lookup"><span data-stu-id="3ec11-136">Get static IP addressing instead for your client computers, and then add the IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3ec11-137">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="3ec11-137">Next steps</span></span>
<span data-ttu-id="3ec11-138">Per informazioni sulla creazione di regole del firewall a livello di server e di database, vedere:</span><span class="sxs-lookup"><span data-stu-id="3ec11-138">For articles on creating server-level and database-level firewall rules, see:</span></span>
* <span data-ttu-id="3ec11-139">[Create and manage Azure Database for PostgreSQL firewall rules using the Azure portal](howto-manage-firewall-using-portal.md) (Creare e gestire regole firewall per il Database di Azure per PostgreSQL usando il portale di Azure)</span><span class="sxs-lookup"><span data-stu-id="3ec11-139">[Create and manage Azure Database for PostgreSQL firewall rules using the Azure portal](howto-manage-firewall-using-portal.md)</span></span>
* <span data-ttu-id="3ec11-140">[Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md) (Creare e gestire regole firewall del Database di Azure per PostgreSQL tramite l'interfaccia della riga di comando di Azure)</span><span class="sxs-lookup"><span data-stu-id="3ec11-140">[Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md)</span></span>