---
title: Application Insights telemetria correlazione aaaAzure | Documenti Microsoft
description: Correlazione di dati di Application Insights Telemetry
services: application-insights
documentationcenter: .net
author: SergeyKanzhelev
manager: carmonm
ms.service: application-insights
ms.workload: TBD
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: article
ms.date: 04/25/2017
ms.author: bwren
ms.openlocfilehash: 3ed8c589d237cac5daceac939ca893b7d81a2967
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 10/06/2017
---
# <a name="telemetry-correlation-in-application-insights"></a><span data-ttu-id="96fd1-103">Correlazione di dati di telemetria in Application Insights</span><span class="sxs-lookup"><span data-stu-id="96fd1-103">Telemetry correlation in Application Insights</span></span>

<span data-ttu-id="96fd1-104">In HelloWorld dei servizi micro, ogni operazione logica richiede lavoro svolto in vari componenti del servizio hello.</span><span class="sxs-lookup"><span data-stu-id="96fd1-104">In hello world of micro services, every logical operation requires work done in various components of hello service.</span></span> <span data-ttu-id="96fd1-105">Ognuno di questi componenti può essere monitorato separatamente tramite [Application Insights](app-insights-overview.md).</span><span class="sxs-lookup"><span data-stu-id="96fd1-105">Each of these components can be separately monitored by [Application Insights](app-insights-overview.md).</span></span> <span data-ttu-id="96fd1-106">componente applicazione web di Hello comunica con le credenziali utente di autenticazione provider componente toovalidate e con dati tooget del componente hello API per la visualizzazione.</span><span class="sxs-lookup"><span data-stu-id="96fd1-106">hello web app component communicates with authentication provider component toovalidate user credentials, and with hello API component tooget data for visualization.</span></span> <span data-ttu-id="96fd1-107">componente API Hello sua può eseguire query sui dati provenienti da altri servizi e utilizzare i componenti di provider di cache e notificare hello componente fatturazione su questa chiamata.</span><span class="sxs-lookup"><span data-stu-id="96fd1-107">hello API component in its turn can query data from other services and use cache-provider components and notify hello billing component about this call.</span></span> <span data-ttu-id="96fd1-108">Application Insights supporta la correlazione di dati di telemetria distribuita.</span><span class="sxs-lookup"><span data-stu-id="96fd1-108">Application Insights supports distributed telemetry correlation.</span></span> <span data-ttu-id="96fd1-109">Consente di toodetect il componente è responsabile per errori o un calo delle prestazioni.</span><span class="sxs-lookup"><span data-stu-id="96fd1-109">It allows you toodetect which component is responsible for failures or performance degradation.</span></span>

<span data-ttu-id="96fd1-110">In questo articolo viene illustrato il modello di dati hello usato dai dati di telemetria di Application Insights toocorrelate inviati da più componenti.</span><span class="sxs-lookup"><span data-stu-id="96fd1-110">This article explains hello data model used by Application Insights toocorrelate telemetry sent by multiple components.</span></span> <span data-ttu-id="96fd1-111">Tratta i protocolli e le tecniche di propagazione contesto hello.</span><span class="sxs-lookup"><span data-stu-id="96fd1-111">It covers hello context propagation techniques and protocols.</span></span> <span data-ttu-id="96fd1-112">Vengono inoltre illustrate l'implementazione di hello dei concetti di correlazione hello in diversi linguaggi e piattaforme.</span><span class="sxs-lookup"><span data-stu-id="96fd1-112">It also covers hello implementation of hello correlation concepts on different languages and platforms.</span></span>

## <a name="telemetry-correlation-data-model"></a><span data-ttu-id="96fd1-113">Modello di dati per la correlazione di dati di telemetria</span><span class="sxs-lookup"><span data-stu-id="96fd1-113">Telemetry correlation data model</span></span>

<span data-ttu-id="96fd1-114">Application Insights definisce un [modello di dati](application-insights-data-model.md) per la correlazione di dati di telemetria distribuita.</span><span class="sxs-lookup"><span data-stu-id="96fd1-114">Application Insights defines a [data model](application-insights-data-model.md) for distributed telemetry correlation.</span></span> <span data-ttu-id="96fd1-115">dati di telemetria tooassociate con operazione logica hello, ogni elemento di dati di telemetria ha un campo di contesto denominato `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-115">tooassociate telemetry with hello logical operation, every telemetry item has a context field called `operation_Id`.</span></span> <span data-ttu-id="96fd1-116">Questo identificatore viene condiviso da ogni elemento di dati di telemetria in traccia hello distribuita.</span><span class="sxs-lookup"><span data-stu-id="96fd1-116">This identifier is shared by every telemetry item in hello distributed trace.</span></span> <span data-ttu-id="96fd1-117">Se quindi si verifica una perdita di dati di telemetria da un singolo livello, è comunque possibile associare i dati di telemetria segnalati da altri componenti.</span><span class="sxs-lookup"><span data-stu-id="96fd1-117">So even with loss of telemetry from a single layer you still can associate telemetry reported by other components.</span></span>

<span data-ttu-id="96fd1-118">Operazione logica distribuite è in genere costituito da un set di operazioni più piccoli - richieste di elaborazione da uno dei componenti di hello.</span><span class="sxs-lookup"><span data-stu-id="96fd1-118">Distributed logical operation typically consists of a set of smaller operations - requests processed by one of hello components.</span></span> <span data-ttu-id="96fd1-119">Tali operazioni sono definite dalla [telemetria delle richieste](application-insights-data-model-request-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="96fd1-119">Those operations are defined by [request telemetry](application-insights-data-model-request-telemetry.md).</span></span> <span data-ttu-id="96fd1-120">Ogni telemetria delle richieste è dotata di un proprio `id` che la identifica in modo univoco a livello globale.</span><span class="sxs-lookup"><span data-stu-id="96fd1-120">Every request telemetry has its own `id` that uniquely globally identifies it.</span></span> <span data-ttu-id="96fd1-121">E tutti i dati di telemetria - tracce, le eccezioni e così via associata a questa richiesta è necessario impostare hello `operation_parentId` valore toohello della richiesta di hello `id`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-121">And all telemetry - traces, exceptions, etc. associated with this request should set hello `operation_parentId` toohello value of hello request `id`.</span></span>

<span data-ttu-id="96fd1-122">Ogni operazione in uscita come componente di tooanother chiamata http rappresentato da [i dati di telemetria](application-insights-data-model-dependency-telemetry.md).</span><span class="sxs-lookup"><span data-stu-id="96fd1-122">Every outgoing operation like http call tooanother component represented by [dependency telemetry](application-insights-data-model-dependency-telemetry.md).</span></span> <span data-ttu-id="96fd1-123">Anche la telemetria delle dipendenze dispone di un proprio `id` globalmente univoco.</span><span class="sxs-lookup"><span data-stu-id="96fd1-123">Dependency telemetry also defines its own `id` that is globally unique.</span></span> <span data-ttu-id="96fd1-124">La telemetria delle richieste, avviata dalla chiamata di dipendenza, lo usa come `operation_parentId`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-124">Request telemetry, initiated by this dependency call, uses it as `operation_parentId`.</span></span>

<span data-ttu-id="96fd1-125">È possibile compilare una vista hello operazione logica distribuita utilizzando `operation_Id`, `operation_parentId`, e `request.id` con `dependency.id`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-125">You can build hello view of distributed logical operation using `operation_Id`, `operation_parentId`, and `request.id` with `dependency.id`.</span></span> <span data-ttu-id="96fd1-126">Tali campi anche definiscono ordine della causalità hello delle chiamate di telemetria.</span><span class="sxs-lookup"><span data-stu-id="96fd1-126">Those fields also define hello causality order of telemetry calls.</span></span>

<span data-ttu-id="96fd1-127">Nell'ambiente di servizi micro, le tracce da componenti torni toohello diversi archivi.</span><span class="sxs-lookup"><span data-stu-id="96fd1-127">In micro services environment, traces from components may go toohello different storages.</span></span> <span data-ttu-id="96fd1-128">Ogni componente può avere la propria chiave di strumentazione in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="96fd1-128">Every component may have its own instrumentation key in Application Insights.</span></span> <span data-ttu-id="96fd1-129">dati di telemetria tooget per operazione logica hello, è necessario tooquery dati da ogni archiviazione.</span><span class="sxs-lookup"><span data-stu-id="96fd1-129">tooget telemetry for hello logical operation, you need tooquery data from every storage.</span></span> <span data-ttu-id="96fd1-130">Quando il numero di spazio di archiviazione è elevato, è necessario toohave un suggerimento su dove toolook successivo.</span><span class="sxs-lookup"><span data-stu-id="96fd1-130">When number of storages is huge, you need toohave a hint on where toolook next.</span></span>

<span data-ttu-id="96fd1-131">Application Insights, modello di dati definisce due campi toosolve questo problema: `request.source` e `dependency.target`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-131">Application Insights data model defines two fields toosolve this problem: `request.source` and `dependency.target`.</span></span> <span data-ttu-id="96fd1-132">primo campo Hello identifica il componente hello che ha avviato hello dipendenza richiesta e hello secondo identifica il componente ha restituito una risposta hello di chiamata della dipendenza hello.</span><span class="sxs-lookup"><span data-stu-id="96fd1-132">hello first field identifies hello component that initiated hello dependency request, and hello second identifies which component returned hello response of hello dependency call.</span></span>


## <a name="example"></a><span data-ttu-id="96fd1-133">Esempio</span><span class="sxs-lookup"><span data-stu-id="96fd1-133">Example</span></span>

<span data-ttu-id="96fd1-134">Esaminiamo un esempio dei prezzi di STOCK applicazione che mostra hello prezzo di mercato corrente di un'azione utilizzando hello API esterna chiamata API di scorte.</span><span class="sxs-lookup"><span data-stu-id="96fd1-134">Let's take an example of an application STOCK PRICES showing hello current market price of a stock using hello external API called STOCKS API.</span></span> <span data-ttu-id="96fd1-135">applicazione dei prezzi AZIONARI Hello dispone di una pagina `Stock page` aperto usando hello client web browser `GET /Home/Stock`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-135">hello STOCK PRICES application has a page `Stock page` opened by hello client web browser using `GET /Home/Stock`.</span></span> <span data-ttu-id="96fd1-136">le query dell'applicazione Hello hello API AZIONARIO tramite una chiamata HTTP `GET /api/stock/value`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-136">hello application queries hello STOCK API by using an HTTP call `GET /api/stock/value`.</span></span>

<span data-ttu-id="96fd1-137">È possibile analizzare i dati di telemetria risultanti eseguendo una query:</span><span class="sxs-lookup"><span data-stu-id="96fd1-137">You can analyze resulting telemetry running a query:</span></span>

```
(requests | union dependencies | union pageViews) 
| where operation_Id == "STYz"
| project timestamp, itemType, name, id, operation_ParentId, operation_Id
```

<span data-ttu-id="96fd1-138">Nota di visualizzazione risultati hello che tutti gli elementi di dati di telemetria condivideranno radice hello `operation_Id`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-138">In hello result view note that all telemetry items share hello root `operation_Id`.</span></span> <span data-ttu-id="96fd1-139">Quando ajax chiama apportate dalla pagina hello - nuovo id univoco `qJSXU` è toohello assegnati i dati di telemetria e l'id del pageView viene utilizzato come `operation_ParentId`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-139">When ajax call made from hello page - new unique id `qJSXU` is assigned toohello dependency telemetry and pageView's id is used as `operation_ParentId`.</span></span> <span data-ttu-id="96fd1-140">La richiesta del server usa a sua volta l'ID ajax come `operation_ParentId` e così via.</span><span class="sxs-lookup"><span data-stu-id="96fd1-140">In turn server request uses ajax's id as `operation_ParentId`, etc.</span></span>

| <span data-ttu-id="96fd1-141">itemType</span><span class="sxs-lookup"><span data-stu-id="96fd1-141">itemType</span></span>   | <span data-ttu-id="96fd1-142">name</span><span class="sxs-lookup"><span data-stu-id="96fd1-142">name</span></span>                      | <span data-ttu-id="96fd1-143">id</span><span class="sxs-lookup"><span data-stu-id="96fd1-143">id</span></span>           | <span data-ttu-id="96fd1-144">operation_ParentId</span><span class="sxs-lookup"><span data-stu-id="96fd1-144">operation_ParentId</span></span> | <span data-ttu-id="96fd1-145">operation_Id</span><span class="sxs-lookup"><span data-stu-id="96fd1-145">operation_Id</span></span> |
|------------|---------------------------|--------------|--------------------|--------------|
| <span data-ttu-id="96fd1-146">pageView</span><span class="sxs-lookup"><span data-stu-id="96fd1-146">pageView</span></span>   | <span data-ttu-id="96fd1-147">Pagina Stock</span><span class="sxs-lookup"><span data-stu-id="96fd1-147">Stock page</span></span>                |              | <span data-ttu-id="96fd1-148">STYz</span><span class="sxs-lookup"><span data-stu-id="96fd1-148">STYz</span></span>               | <span data-ttu-id="96fd1-149">STYz</span><span class="sxs-lookup"><span data-stu-id="96fd1-149">STYz</span></span>         |
| <span data-ttu-id="96fd1-150">dipendenza</span><span class="sxs-lookup"><span data-stu-id="96fd1-150">dependency</span></span> | <span data-ttu-id="96fd1-151">GET /Home/Stock</span><span class="sxs-lookup"><span data-stu-id="96fd1-151">GET /Home/Stock</span></span>           | <span data-ttu-id="96fd1-152">qJSXU</span><span class="sxs-lookup"><span data-stu-id="96fd1-152">qJSXU</span></span>        | <span data-ttu-id="96fd1-153">STYz</span><span class="sxs-lookup"><span data-stu-id="96fd1-153">STYz</span></span>               | <span data-ttu-id="96fd1-154">STYz</span><span class="sxs-lookup"><span data-stu-id="96fd1-154">STYz</span></span>         |
| <span data-ttu-id="96fd1-155">richiesta</span><span class="sxs-lookup"><span data-stu-id="96fd1-155">request</span></span>    | <span data-ttu-id="96fd1-156">GET /Home/Stock</span><span class="sxs-lookup"><span data-stu-id="96fd1-156">GET Home/Stock</span></span>            | <span data-ttu-id="96fd1-157">KqKwlrSt9PA =</span><span class="sxs-lookup"><span data-stu-id="96fd1-157">KqKwlrSt9PA=</span></span> | <span data-ttu-id="96fd1-158">qJSXU</span><span class="sxs-lookup"><span data-stu-id="96fd1-158">qJSXU</span></span>              | <span data-ttu-id="96fd1-159">STYz</span><span class="sxs-lookup"><span data-stu-id="96fd1-159">STYz</span></span>         |
| <span data-ttu-id="96fd1-160">dipendenza</span><span class="sxs-lookup"><span data-stu-id="96fd1-160">dependency</span></span> | <span data-ttu-id="96fd1-161">GET /api/stock/value</span><span class="sxs-lookup"><span data-stu-id="96fd1-161">GET /api/stock/value</span></span>      | <span data-ttu-id="96fd1-162">bBrf2L7mm2g =</span><span class="sxs-lookup"><span data-stu-id="96fd1-162">bBrf2L7mm2g=</span></span> | <span data-ttu-id="96fd1-163">KqKwlrSt9PA =</span><span class="sxs-lookup"><span data-stu-id="96fd1-163">KqKwlrSt9PA=</span></span>       | <span data-ttu-id="96fd1-164">STYz</span><span class="sxs-lookup"><span data-stu-id="96fd1-164">STYz</span></span>         |

<span data-ttu-id="96fd1-165">Ora quando hello chiamata `GET /api/stock/value` apportate servizio esterno tooan desiderato tooknow hello identità di tale server.</span><span class="sxs-lookup"><span data-stu-id="96fd1-165">Now when hello call `GET /api/stock/value` made tooan external service you want tooknow hello identity of that server.</span></span> <span data-ttu-id="96fd1-166">È pertanto possibile impostare il campo `dependency.target` in modo appropriato.</span><span class="sxs-lookup"><span data-stu-id="96fd1-166">So you can set `dependency.target` field appropriately.</span></span> <span data-ttu-id="96fd1-167">Quando il servizio esterno hello non supporta il monitoraggio - `target` è impostato il nome host toohello del servizio, ad esempio hello `stock-prices-api.com`.</span><span class="sxs-lookup"><span data-stu-id="96fd1-167">When hello external service does not support monitoring - `target` is set toohello host name of hello service like `stock-prices-api.com`.</span></span> <span data-ttu-id="96fd1-168">Tuttavia se tale servizio identifica restituendo un oggetto predefinito dell'intestazione HTTP - `target` contiene l'identità del servizio hello che consente di traccia toobuild distribuita Application Insights eseguendo una query su dati di telemetria da tale servizio.</span><span class="sxs-lookup"><span data-stu-id="96fd1-168">However if that service identifies itself by returning a predefined HTTP header - `target` contains hello service identity that allows Application Insights toobuild distributed trace by querying telemetry from that service.</span></span> 

## <a name="correlation-headers"></a><span data-ttu-id="96fd1-169">Intestazioni di correlazione</span><span class="sxs-lookup"><span data-stu-id="96fd1-169">Correlation headers</span></span>

<span data-ttu-id="96fd1-170">Stiamo lavorando su proposta RFC per hello [correlazione protocollo HTTP](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span><span class="sxs-lookup"><span data-stu-id="96fd1-170">We are working on RFC proposal for hello [correlation HTTP protocol](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v1.md).</span></span> <span data-ttu-id="96fd1-171">Questa proposta definisce due intestazioni:</span><span class="sxs-lookup"><span data-stu-id="96fd1-171">This proposal defines two headers:</span></span>

- <span data-ttu-id="96fd1-172">`Request-Id`eseguire l'id univoco globale di hello della chiamata di hello</span><span class="sxs-lookup"><span data-stu-id="96fd1-172">`Request-Id` carry hello globally unique id of hello call</span></span>
- <span data-ttu-id="96fd1-173">`Correlation-Context`-eseguire raccolta coppie valore/nome hello di proprietà traccia hello distribuita</span><span class="sxs-lookup"><span data-stu-id="96fd1-173">`Correlation-Context` - carry hello name value pairs collection of hello distributed trace properties</span></span>

<span data-ttu-id="96fd1-174">Hello standard definisce anche due schemi di `Request-Id` generazione - gerarchica e piana.</span><span class="sxs-lookup"><span data-stu-id="96fd1-174">hello standard also defines two schemas of `Request-Id` generation - flat and hierarchical.</span></span> <span data-ttu-id="96fd1-175">Con schema flat hello, c'è un noto `Id` chiave definita per hello `Correlation-Context` insieme.</span><span class="sxs-lookup"><span data-stu-id="96fd1-175">With hello flat schema, there is a well-known `Id` key defined for hello `Correlation-Context` collection.</span></span>

<span data-ttu-id="96fd1-176">Application Insights definisce hello [estensione](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) per la correlazione hello protocollo HTTP.</span><span class="sxs-lookup"><span data-stu-id="96fd1-176">Application Insights defines hello [extension](https://github.com/lmolkova/correlation/blob/master/http_protocol_proposal_v2.md) for hello correlation HTTP protocol.</span></span> <span data-ttu-id="96fd1-177">Usa `Request-Context` coppie nome-valore raccolta hello toopropagate di proprietà utilizzate dalle hello immediato chiamante o chiamato.</span><span class="sxs-lookup"><span data-stu-id="96fd1-177">It uses `Request-Context` name value pairs toopropagate hello collection of properties used by hello immediate caller or callee.</span></span> <span data-ttu-id="96fd1-178">Application Insights SDK viene utilizzato questo tooset intestazione `dependency.target` e `request.source` campi.</span><span class="sxs-lookup"><span data-stu-id="96fd1-178">Application Insights SDK uses this header tooset `dependency.target` and `request.source` fields.</span></span>

## <a name="open-tracing-and-application-insights"></a><span data-ttu-id="96fd1-179">OpenTracing e Application Insights</span><span class="sxs-lookup"><span data-stu-id="96fd1-179">Open tracing and Application Insights</span></span>

<span data-ttu-id="96fd1-180">Ecco come si presentano i modelli di dati di [OpenTracing](http://opentracing.io/) e Application Insights:</span><span class="sxs-lookup"><span data-stu-id="96fd1-180">[Open Tracing](http://opentracing.io/) and Application Insights data models looks</span></span> 

- <span data-ttu-id="96fd1-181">`request`, `pageView` esegue il mapping troppo**intervallo** con`span.kind = server`</span><span class="sxs-lookup"><span data-stu-id="96fd1-181">`request`, `pageView` maps too**Span** with `span.kind = server`</span></span>
- <span data-ttu-id="96fd1-182">`dependency`esegue il mapping troppo**intervallo** con`span.kind = client`</span><span class="sxs-lookup"><span data-stu-id="96fd1-182">`dependency` maps too**Span** with `span.kind = client`</span></span>
- <span data-ttu-id="96fd1-183">`id`di un `request` e `dependency` esegue il mapping troppo**Span.Id**</span><span class="sxs-lookup"><span data-stu-id="96fd1-183">`id` of a `request` and `dependency` maps too**Span.Id**</span></span>
- <span data-ttu-id="96fd1-184">`operation_Id`esegue il mapping troppo**TraceId**</span><span class="sxs-lookup"><span data-stu-id="96fd1-184">`operation_Id` maps too**TraceId**</span></span>
- <span data-ttu-id="96fd1-185">`operation_ParentId`esegue il mapping troppo**riferimento** di tipo`ChileOf`</span><span class="sxs-lookup"><span data-stu-id="96fd1-185">`operation_ParentId` maps too**Reference** of type `ChileOf`</span></span>

<span data-ttu-id="96fd1-186">Per informazioni sul modello di dati e sui tipi di Application Insights, vedere il [modello di dati](application-insights-data-model.md).</span><span class="sxs-lookup"><span data-stu-id="96fd1-186">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>

<span data-ttu-id="96fd1-187">Per le definizioni di OpenTracing, vedere a [specifica](https://github.com/opentracing/specification/blob/master/specification.md) e le [convenzioni semantiche](https://github.com/opentracing/specification/blob/master/semantic_conventions.md).</span><span class="sxs-lookup"><span data-stu-id="96fd1-187">See [specification](https://github.com/opentracing/specification/blob/master/specification.md) and [semantic_conventions](https://github.com/opentracing/specification/blob/master/semantic_conventions.md) for definitions of Open Tracing concepts.</span></span>


## <a name="telemetry-correlation-in-net"></a><span data-ttu-id="96fd1-188">Correlazione di dati di telemetria in .NET</span><span class="sxs-lookup"><span data-stu-id="96fd1-188">Telemetry correlation in .NET</span></span>

<span data-ttu-id="96fd1-189">Nel corso del tempo .NET definiti numerosi modi toocorrelate telemetria e diagnostica registri.</span><span class="sxs-lookup"><span data-stu-id="96fd1-189">Over time .NET defined number of ways toocorrelate telemetry and diagnostics logs.</span></span> <span data-ttu-id="96fd1-190">È presente `System.Diagnostics.CorrelationManager` consentendo tootrack [LogicalOperationStack e ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span><span class="sxs-lookup"><span data-stu-id="96fd1-190">There is `System.Diagnostics.CorrelationManager` allowing tootrack [LogicalOperationStack and ActivityId](https://msdn.microsoft.com/library/system.diagnostics.correlationmanager.aspx).</span></span> <span data-ttu-id="96fd1-191">`System.Diagnostics.Tracing.EventSource`e Windows ETW definire metodo hello [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span><span class="sxs-lookup"><span data-stu-id="96fd1-191">`System.Diagnostics.Tracing.EventSource` and Windows ETW define hello method [SetCurrentThreadActivityId](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.setcurrentthreadactivityid.aspx).</span></span> <span data-ttu-id="96fd1-192">`ILogger` usa gli [ambiti dei log](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span><span class="sxs-lookup"><span data-stu-id="96fd1-192">`ILogger` uses [Log Scopes](https://docs.microsoft.com/aspnet/core/fundamentals/logging#log-scopes).</span></span> <span data-ttu-id="96fd1-193">WCF e Http collegano la propagazione del contesto "corrente".</span><span class="sxs-lookup"><span data-stu-id="96fd1-193">WCF and Http wire up "current" context propagation.</span></span>

<span data-ttu-id="96fd1-194">Queste soluzioni non consentono tuttavia il supporto automatico della traccia distribuita.</span><span class="sxs-lookup"><span data-stu-id="96fd1-194">However those methods didn't enable automatic distributed tracing support.</span></span> <span data-ttu-id="96fd1-195">`DiagnosticsSource`è toosupport un modo automatico: correlazione di computer.</span><span class="sxs-lookup"><span data-stu-id="96fd1-195">`DiagnosticsSource` is a way toosupport automatic cross machine correlation.</span></span> <span data-ttu-id="96fd1-196">Librerie .NET supportano la diagnostica di origine e consentono la propagazione automatica delle macchine cross del contesto di correlazione hello tramite trasporto hello come http.</span><span class="sxs-lookup"><span data-stu-id="96fd1-196">.NET libraries support Diagnostics Source and allow automatic cross machine propagation of hello correlation context via hello transport like http.</span></span>

<span data-ttu-id="96fd1-197">Hello [Guida tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) nell'origine di diagnostica vengono illustrati concetti fondamentali di hello di tenere traccia delle attività.</span><span class="sxs-lookup"><span data-stu-id="96fd1-197">hello [guide tooActivities](https://github.com/dotnet/corefx/blob/master/src/System.Diagnostics.DiagnosticSource/src/ActivityUserGuide.md) in Diagnostics Source explains hello basics of tracking Activities.</span></span> 

<span data-ttu-id="96fd1-198">Componenti di base di ASP.NET 2.0 supporta l'estrazione delle intestazioni Http e avvio hello nuova attività.</span><span class="sxs-lookup"><span data-stu-id="96fd1-198">ASP.NET Core 2.0 supports extraction of Http Headers and starting hello new Activity.</span></span> 

<span data-ttu-id="96fd1-199">`System.Net.HttpClient`versione di partenza `<fill in>` supporta l'inserimento automatico di correlazione hello intestazioni Http e chiamata di hello http come attività di rilevamento.</span><span class="sxs-lookup"><span data-stu-id="96fd1-199">`System.Net.HttpClient` starting version `<fill in>` supports automatic injection of hello correlation Http Headers and tracking hello http call as an Activity.</span></span>

<span data-ttu-id="96fd1-200">È disponibile un nuovo modulo Http [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) per hello Classic ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="96fd1-200">There is a new Http Module [Microsoft.AspNet.TelemetryCorrelation](https://www.nuget.org/packages/Microsoft.AspNet.TelemetryCorrelation/) for hello ASP.NET Classic.</span></span> <span data-ttu-id="96fd1-201">Questo modulo implementa correlazione di dati di telemetria usando DiagnosticsSource.</span><span class="sxs-lookup"><span data-stu-id="96fd1-201">This module implements telemetry correlation using DiagnosticsSource.</span></span> <span data-ttu-id="96fd1-202">Avvia l'attività in base alle intestazioni di richiesta in ingresso.</span><span class="sxs-lookup"><span data-stu-id="96fd1-202">It starts activity based on incoming request headers.</span></span> <span data-ttu-id="96fd1-203">Correla inoltre dati di telemetria da hello fasi diverse del processo di elaborazione della richiesta.</span><span class="sxs-lookup"><span data-stu-id="96fd1-203">It also correlates telemetry from hello different stages of request processing.</span></span> <span data-ttu-id="96fd1-204">Anche per i casi di hello quando ogni fase dell'elaborazione di IIS in esecuzione su un thread di gestione diversi.</span><span class="sxs-lookup"><span data-stu-id="96fd1-204">Even for hello cases when every stage of IIS processing runs on a different manage threads.</span></span>

<span data-ttu-id="96fd1-205">Versione iniziale di Application Insights SDK `2.4.0-beta1` utilizza telemetria toocollect DiagnosticsSource e attività e associarlo all'attività corrente hello.</span><span class="sxs-lookup"><span data-stu-id="96fd1-205">Application Insights SDK starting version `2.4.0-beta1` uses DiagnosticsSource and Activity toocollect telemetry and associate it with hello current activity.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="96fd1-206">Passaggi successivi</span><span class="sxs-lookup"><span data-stu-id="96fd1-206">Next steps</span></span>

- [<span data-ttu-id="96fd1-207">Scrivere dati di telemetria personalizzati</span><span class="sxs-lookup"><span data-stu-id="96fd1-207">Write custom telemetry</span></span>](app-insights-api-custom-events-metrics.md)
- <span data-ttu-id="96fd1-208">Caricare tutti i componenti del microservizio in Application Insights.</span><span class="sxs-lookup"><span data-stu-id="96fd1-208">Onboard all components of your micro service on Application Insights.</span></span> <span data-ttu-id="96fd1-209">Controllare le [piattaforme supportate](app-insights-platforms.md).</span><span class="sxs-lookup"><span data-stu-id="96fd1-209">Check out [supported platforms](app-insights-platforms.md).</span></span>
- <span data-ttu-id="96fd1-210">Per informazioni sul modello di dati e sui tipi di Application Insights, vedere il [modello di dati](application-insights-data-model.md).</span><span class="sxs-lookup"><span data-stu-id="96fd1-210">See [data model](application-insights-data-model.md) for Application Insights types and data model.</span></span>
- <span data-ttu-id="96fd1-211">Informazioni su come troppo[estendere e filtrare i dati di telemetria](app-insights-api-filtering-sampling.md).</span><span class="sxs-lookup"><span data-stu-id="96fd1-211">Learn how too[extend and filter telemetry](app-insights-api-filtering-sampling.md).</span></span>
