<span data-ttu-id="9d65e-101">gli endpoint di Hello approccio tooAzure funzionamento è leggermente diverso tra i modelli di distribuzione classica e Gestione risorse hello.</span><span class="sxs-lookup"><span data-stu-id="9d65e-101">hello approach tooAzure endpoints works a little differently between hello Classic and Resource Manager deployment models.</span></span> <span data-ttu-id="9d65e-102">Nel modello di distribuzione di gestione risorse hello, si dispongono di hello flessibilità toocreate rete filtri controllano hello flusso del traffico da e verso le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="9d65e-102">In hello Resource Manager deployment model, you now have hello flexibility toocreate network filters that control hello flow of traffic in and out of your VMs.</span></span> <span data-ttu-id="9d65e-103">Questi filtri consentono di toocreate complesso negli ambienti di rete oltre a un endpoint di tipo semplice come modello di distribuzione classica hello.</span><span class="sxs-lookup"><span data-stu-id="9d65e-103">These filters allow you toocreate complex networking environments beyond a simple endpoint as in hello Classic deployment model.</span></span> <span data-ttu-id="9d65e-104">Questo articolo offre una panoramica dei gruppi di sicurezza di rete, delle differenze rispetto all'uso degli endpoint del modello di distribuzione classica, della creazione di regole di filtro e di scenari di distribuzione di esempio.</span><span class="sxs-lookup"><span data-stu-id="9d65e-104">This article provides an overview of Network Security Groups and how they differ from using Classic endpoints, creating these filtering rules, and sample deployment scenarios.</span></span>

## <a name="overview-of-resource-manager-deployments"></a><span data-ttu-id="9d65e-105">Panoramica delle distribuzioni Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9d65e-105">Overview of Resource Manager deployments</span></span>
<span data-ttu-id="9d65e-106">Gli endpoint nel modello di distribuzione classica hello vengono sostituiti da gruppi di sicurezza di rete e le regole di controllo elenco (ACL) di accesso.</span><span class="sxs-lookup"><span data-stu-id="9d65e-106">Endpoints in hello Classic deployment model are replaced by Network Security Groups and access control list (ACL) rules.</span></span> <span data-ttu-id="9d65e-107">Le azioni rapide per implementare le regole ACL dei gruppi di sicurezza di rete sono le seguenti:</span><span class="sxs-lookup"><span data-stu-id="9d65e-107">Quick steps for implementing Network Security Group ACL rules are:</span></span>

* <span data-ttu-id="9d65e-108">Creare un gruppo di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-108">Create a Network Security Group.</span></span>
* <span data-ttu-id="9d65e-109">tooallow o negare il traffico, definire le regole ACL gruppo di sicurezza rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-109">tooallow or deny traffic, define your Network Security Group ACL rules.</span></span>
* <span data-ttu-id="9d65e-110">Assegnare l'interfaccia di rete tooa il gruppo di sicurezza di rete o subnet della rete virtuale.</span><span class="sxs-lookup"><span data-stu-id="9d65e-110">Assign your Network Security Group tooa network interface or virtual network subnet.</span></span>

<span data-ttu-id="9d65e-111">Se si sono che desiderano tooalso eseguire l'inoltro alla porta, è necessario tooplace un bilanciamento del carico davanti la macchina virtuale e utilizzare le regole NAT.</span><span class="sxs-lookup"><span data-stu-id="9d65e-111">If you are wanting tooalso perform port-forwarding, you need tooplace a load balancer in front of your VM and use NAT rules.</span></span> <span data-ttu-id="9d65e-112">Le azioni rapide per implementare un servizio di bilanciamento del carico e regole NAT saranno le seguenti:</span><span class="sxs-lookup"><span data-stu-id="9d65e-112">Quick steps for implementing a load balancer and NAT rules would be as follows:</span></span>

* <span data-ttu-id="9d65e-113">Creare un servizio di bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="9d65e-113">Create a load balancer.</span></span>
* <span data-ttu-id="9d65e-114">Creare un pool back-end e aggiungere il pool di toohello macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="9d65e-114">Create a backend pool and add your VMs toohello pool.</span></span>
* <span data-ttu-id="9d65e-115">Definire le regole NAT per inoltro alla porta hello necessario.</span><span class="sxs-lookup"><span data-stu-id="9d65e-115">Define your NAT rules for hello required port forwarding.</span></span>
* <span data-ttu-id="9d65e-116">Assegnare le regole NAT tooyour VM.</span><span class="sxs-lookup"><span data-stu-id="9d65e-116">Assign your NAT rules tooyour VMs.</span></span>

## <a name="network-security-group-overview"></a><span data-ttu-id="9d65e-117">Panoramica dei gruppi di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="9d65e-117">Network Security Group overview</span></span>
<span data-ttu-id="9d65e-118">Gruppi di sicurezza di rete forniscono un livello di protezione per l'utente tooallow determinate porte e subnet tooaccess le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="9d65e-118">Network Security Groups provide a layer of security for you tooallow specific ports and subnets tooaccess your VMs.</span></span> <span data-ttu-id="9d65e-119">In genere è sempre un gruppo di sicurezza di rete che fornisce il livello di sicurezza tra le macchine virtuali e hello world di fuori.</span><span class="sxs-lookup"><span data-stu-id="9d65e-119">You typically always have a Network Security Group providing this layer of security between your VMs and hello outside world.</span></span> <span data-ttu-id="9d65e-120">Gruppi di sicurezza di rete può essere applicato tooa subnet della rete virtuale o un'interfaccia di rete specifico per una macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="9d65e-120">Network Security Groups can be applied tooa virtual network subnet or a specific network interface for a VM.</span></span> <span data-ttu-id="9d65e-121">Invece di creare regole ACL di endpoint, si creano le regole ACL dei gruppi di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-121">Rather than creating endpoint ACL rules, you now create Network Security Group ACL rules.</span></span> <span data-ttu-id="9d65e-122">Queste regole ACL consentono di controllare maggiore rispetto alla creazione di un endpoint tooforward semplicemente una determinata porta.</span><span class="sxs-lookup"><span data-stu-id="9d65e-122">These ACL rules provide much greater control than simply creating an endpoint tooforward a given port.</span></span> <span data-ttu-id="9d65e-123">Per altre informazioni, vedere [Informazioni sui gruppi di sicurezza di rete](../articles/virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="9d65e-123">For more information, see [What is a Network Security Group?](../articles/virtual-network/virtual-networks-nsg.md)</span></span>

> [!TIP]
> <span data-ttu-id="9d65e-124">È possibile assegnare le subnet toomultiple gruppi di sicurezza di rete o interfacce di rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-124">You can assign Network Security Groups toomultiple subnets or network interfaces.</span></span> <span data-ttu-id="9d65e-125">Non esiste un mapping 1:1.</span><span class="sxs-lookup"><span data-stu-id="9d65e-125">There is no 1:1 mapping.</span></span> <span data-ttu-id="9d65e-126">È possibile creare un gruppo di sicurezza di rete con un set comune di regole ACL e applicare toomultiple subnet o le interfacce di rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-126">You can create a Network Security Group with a common set of ACL rules and apply toomultiple subnets or network interfaces.</span></span> <span data-ttu-id="9d65e-127">Inoltre, il gruppo di sicurezza di rete può essere applicato tooresources tra la sottoscrizione (in base a [i controlli di accesso basato su ruolo](../articles/active-directory/role-based-access-control-what-is.md).</span><span class="sxs-lookup"><span data-stu-id="9d65e-127">Further, Network Security Group can be applied tooresources across your subscription (based on [Role Based Access Controls](../articles/active-directory/role-based-access-control-what-is.md).</span></span>

## <a name="load-balancers-overview"></a><span data-ttu-id="9d65e-128">Panoramica dei servizi di bilanciamento del carico</span><span class="sxs-lookup"><span data-stu-id="9d65e-128">Load Balancers overview</span></span>
<span data-ttu-id="9d65e-129">Nel modello di distribuzione classica hello, Azure potrebbe eseguire hello tutti Network Address Translation (NAT) e inoltro in un servizio Cloud per consentire alla porta.</span><span class="sxs-lookup"><span data-stu-id="9d65e-129">In hello Classic deployment model, Azure would perform all hello Network Address Translation (NAT) and port forwarding on a Cloud Service for you.</span></span> <span data-ttu-id="9d65e-130">Quando si crea un endpoint, è necessario specificare hello porta esterna tooexpose insieme hello porta interna toodirect traffico.</span><span class="sxs-lookup"><span data-stu-id="9d65e-130">When creating an endpoint, you would specify hello external port tooexpose along with hello internal port toodirect traffic to.</span></span> <span data-ttu-id="9d65e-131">I gruppi di sicurezza di rete non eseguono autonomamente le stesse operazioni NAT e di port forwarding.</span><span class="sxs-lookup"><span data-stu-id="9d65e-131">Network Security Groups by themselves do not perform this same NAT and port forwarding.</span></span> 

<span data-ttu-id="9d65e-132">tooallow le regole NAT toocreate per tale porta di inoltro, creare un servizio di bilanciamento del carico di Azure nel gruppo di risorse.</span><span class="sxs-lookup"><span data-stu-id="9d65e-132">tooallow you toocreate NAT rules for such port forwarding, create an Azure load balancer in your resource group.</span></span> <span data-ttu-id="9d65e-133">Nuovo servizio di bilanciamento del carico hello è granulare sufficiente tooonly si applicano le macchine virtuali toospecific se necessario.</span><span class="sxs-lookup"><span data-stu-id="9d65e-133">Again, hello load balancer is granular enough tooonly apply toospecific VMs if needed.</span></span> <span data-ttu-id="9d65e-134">Hello Azure carico di lavoro di regole NAT di bilanciamento del carico insieme tooprovide regole ACL gruppo di sicurezza rete maggiore flessibilità e controllo rispetto a quello ottenibile utilizzando gli endpoint di servizio Cloud è stato.</span><span class="sxs-lookup"><span data-stu-id="9d65e-134">hello Azure load balancer NAT rules work alongside Network Security Group ACL rules tooprovide much more flexibility and control than was achievable using Cloud Service endpoints.</span></span> <span data-ttu-id="9d65e-135">Per ulteriori informazioni, vedere hello [Panoramica del servizio di bilanciamento di carico](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9d65e-135">For more information, see hello [load balancer overview](../articles/load-balancer/load-balancer-overview.md).</span></span>

## <a name="network-security-group-acl-rules"></a><span data-ttu-id="9d65e-136">Regole ACL dei gruppi di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="9d65e-136">Network Security Group ACL rules</span></span>
<span data-ttu-id="9d65e-137">Le regole ACL permettono di definire il traffico consentito in ingresso e in uscita dalla VM in base a porte, intervalli di porte o protocolli specifici.</span><span class="sxs-lookup"><span data-stu-id="9d65e-137">ACL rules let you define what traffic can flow in and out of your VM based on specific ports, port ranges, or protocols.</span></span> <span data-ttu-id="9d65e-138">Le regole vengono assegnate le macchine virtuali tooindividual o tooa subnet.</span><span class="sxs-lookup"><span data-stu-id="9d65e-138">Rules are assigned tooindividual VMs or tooa subnet.</span></span> <span data-ttu-id="9d65e-139">Hello schermata seguente è riportato un esempio di regole ACL per un server Web comuni:</span><span class="sxs-lookup"><span data-stu-id="9d65e-139">hello following screenshot is an example of ACL rules for a common webserver:</span></span>

![Elenco di regole ACL di un gruppo di sicurezza di rete](./media/virtual-machines-common-endpoints-in-resource-manager/example-acl-rules.png)

<span data-ttu-id="9d65e-141">Regole ACL vengono applicate in base a una metrica priorità che si specifica - valore hello hello, priorità hello hello.</span><span class="sxs-lookup"><span data-stu-id="9d65e-141">ACL rules are applied based on a priority metric that you specify - hello higher hello value, hello lower hello priority.</span></span> <span data-ttu-id="9d65e-142">Ogni gruppo di sicurezza di rete con valore predefinito di tre regole che vengono progettati flusso hello toohandle del traffico di rete Azure, con un'esplicita `DenyAllInbound` come regola finale hello.</span><span class="sxs-lookup"><span data-stu-id="9d65e-142">Every Network Security Group has three default rules that are designed toohandle hello flow of Azure networking traffic, with an explicit `DenyAllInbound` as hello final rule.</span></span> <span data-ttu-id="9d65e-143">Dato un toonot per priorità bassa regole ACL predefinito sono interferire con le regole create.</span><span class="sxs-lookup"><span data-stu-id="9d65e-143">Default ACL rules are given a low priority toonot interfere with rules you create.</span></span>

## <a name="assigning-network-security-groups"></a><span data-ttu-id="9d65e-144">Assegnazione dei gruppi di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="9d65e-144">Assigning Network Security Groups</span></span>
<span data-ttu-id="9d65e-145">Assegnare una subnet tooa il gruppo di sicurezza di rete o un'interfaccia di rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-145">You assign a Network Security Group tooa subnet or a network interface.</span></span> <span data-ttu-id="9d65e-146">Questo approccio consente toobe granularità in base alle esigenze quando è applicato l'ACL regole tooonly una macchina virtuale specifica, o verificare un set comune di ACL regole vengono applicate tooall parte delle macchine virtuali di una subnet:</span><span class="sxs-lookup"><span data-stu-id="9d65e-146">This approach allows you toobe as granular as needed when applying your ACL rules tooonly a specific VM, or ensure a common set of ACL rules are applied tooall VMs part of a subnet:</span></span>

![Applicare NSGs toonetwork interfacce o subnet](./media/virtual-machines-common-endpoints-in-resource-manager/apply-nsg-to-resources.png)

<span data-ttu-id="9d65e-148">comportamento di Hello di hello il gruppo di sicurezza di rete non variano a seconda assegnazione subnet tooa o un'interfaccia di rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-148">hello behavior of hello Network Security Group doesn't change depending on being assigned tooa subnet or a network interface.</span></span> <span data-ttu-id="9d65e-149">Uno scenario di distribuzione comune è hello che Network Security Group assegnato conformità di tooensure tooa subnet di tutte le macchine virtuali collegati toothat subnet.</span><span class="sxs-lookup"><span data-stu-id="9d65e-149">A common deployment scenario has hello Network Security Group assigned tooa subnet tooensure compliance of all VMs attached toothat subnet.</span></span> <span data-ttu-id="9d65e-150">Per ulteriori informazioni, vedere [l'applicazione di sicurezza di rete gruppi tooresources](../articles/virtual-network/virtual-networks-nsg.md#associating-nsgs).</span><span class="sxs-lookup"><span data-stu-id="9d65e-150">For more information, see [applying Network Security groups tooresources](../articles/virtual-network/virtual-networks-nsg.md#associating-nsgs).</span></span>

## <a name="default-behavior-of-network-security-groups"></a><span data-ttu-id="9d65e-151">Comportamento predefinito dei gruppi di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="9d65e-151">Default behavior of Network Security Groups</span></span>
<span data-ttu-id="9d65e-152">A seconda di come e quando si crea il gruppo di sicurezza di rete, possono creare regole predefinite per l'accesso RDP toopermit macchine virtuali di Windows sulla porta TCP 3389.</span><span class="sxs-lookup"><span data-stu-id="9d65e-152">Depending on how and when you create your Network Security Group, default rules may be created for Windows VMs toopermit RDP access on TCP port 3389.</span></span> <span data-ttu-id="9d65e-153">Le regole predefinite per le macchine virtuali Linux consentono l'accesso SSH sulla porta TCP 22.</span><span class="sxs-lookup"><span data-stu-id="9d65e-153">Default rules for Linux VMs permit SSH access on TCP port 22.</span></span> <span data-ttu-id="9d65e-154">Queste regole ACL automatica vengono create in hello seguenti condizioni:</span><span class="sxs-lookup"><span data-stu-id="9d65e-154">These automatic ACL rules are created under hello following conditions:</span></span>

* <span data-ttu-id="9d65e-155">Se si crea una macchina virtuale di Windows tramite il portale di hello e accetta hello predefinito azione toocreate un gruppo di sicurezza di rete, viene creata una ACL regola tooallow la porta TCP 3389 (RDP).</span><span class="sxs-lookup"><span data-stu-id="9d65e-155">If you create a Windows VM through hello portal and accept hello default action toocreate a Network Security Group, an ACL rule tooallow TCP port 3389 (RDP) is created.</span></span>
* <span data-ttu-id="9d65e-156">Se si crea una VM Linux tramite il portale di hello e accetta hello predefinito azione toocreate un gruppo di sicurezza di rete, viene creata una ACL regola tooallow la porta TCP 22 (SSH).</span><span class="sxs-lookup"><span data-stu-id="9d65e-156">If you create a Linux VM through hello portal and accept hello default action toocreate a Network Security Group, an ACL rule tooallow TCP port 22 (SSH) is created.</span></span>

<span data-ttu-id="9d65e-157">In tutte le altre condizioni, queste regole ACL predefinite non vengono create.</span><span class="sxs-lookup"><span data-stu-id="9d65e-157">Under all other conditions, these default ACL rules are not created.</span></span> <span data-ttu-id="9d65e-158">È possibile connettersi tooyour VM senza creare hello regole ACL appropriate.</span><span class="sxs-lookup"><span data-stu-id="9d65e-158">You cannot connect tooyour VM without creating hello appropriate ACL rules.</span></span> <span data-ttu-id="9d65e-159">Queste condizioni sono hello azioni comuni seguenti:</span><span class="sxs-lookup"><span data-stu-id="9d65e-159">These conditions include hello following common actions:</span></span>

* <span data-ttu-id="9d65e-160">Creazione di un gruppo di sicurezza di rete tramite il portale di hello come un hello toocreating azione distinta macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="9d65e-160">Creating a Network Security Group through hello portal as a separate action toocreating hello VM.</span></span>
* <span data-ttu-id="9d65e-161">Creazione di un gruppo di sicurezza di rete a livello di codice con PowerShell, l'interfaccia della riga di comando di Azure, API REST e così via.</span><span class="sxs-lookup"><span data-stu-id="9d65e-161">Creating a Network Security Group programmatically through PowerShell, Azure CLI, Rest APIs, etc.</span></span>
* <span data-ttu-id="9d65e-162">Creazione di una macchina virtuale e l'assegnazione gruppo di sicurezza di rete che non dispone già di hello esistente tooan appropriati regola ACL definita.</span><span class="sxs-lookup"><span data-stu-id="9d65e-162">Creating a VM and assigning it tooan existing Network Security Group that does not already have hello appropriate ACL rule defined.</span></span>

<span data-ttu-id="9d65e-163">In hello tutti i casi precedenti, è necessario toocreate le regole ACL per le connessioni di gestione remota appropriata hello tooallow macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="9d65e-163">In all hello preceding cases, you need toocreate ACL rules for your VM tooallow hello appropriate remote management connections.</span></span>

## <a name="default-behavior-of-a-vm-without-a-network-security-group"></a><span data-ttu-id="9d65e-164">Comportamento predefinito di una VM senza un gruppo di sicurezza di rete</span><span class="sxs-lookup"><span data-stu-id="9d65e-164">Default behavior of a VM without a Network Security Group</span></span>
<span data-ttu-id="9d65e-165">È possibile creare una VM senza creare un gruppo di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-165">You can create a VM without creating a Network Security Group.</span></span> <span data-ttu-id="9d65e-166">In questi casi, è possibile connettersi tooyour VM utilizzando il protocollo RDP o SSH senza creare tutte le regole ACL.</span><span class="sxs-lookup"><span data-stu-id="9d65e-166">In these situations, you can connect tooyour VM using RDP or SSH without creating any ACL rules.</span></span> <span data-ttu-id="9d65e-167">Analogamente, se è stato installato un servizio Web sulla porta 80, tale servizio è automaticamente accessibile in remoto.</span><span class="sxs-lookup"><span data-stu-id="9d65e-167">Similarly, if you installed a web service on port 80, that service is automatically accessible remotely.</span></span> <span data-ttu-id="9d65e-168">Hello VM siano tutte le porte aperte.</span><span class="sxs-lookup"><span data-stu-id="9d65e-168">hello VM has all ports open.</span></span>

> [!NOTE]
> <span data-ttu-id="9d65e-169">È comunque necessario toohave un tooa di indirizzo IP di pubblico VM affinché tutte le connessioni remote.</span><span class="sxs-lookup"><span data-stu-id="9d65e-169">You still need toohave a public IP address assigned tooa VM in order for any remote connections.</span></span> <span data-ttu-id="9d65e-170">Non dispone di un gruppo di sicurezza di rete per l'interfaccia di rete o subnet hello non espone il traffico esterno hello VM tooany.</span><span class="sxs-lookup"><span data-stu-id="9d65e-170">Not having a Network Security Group for hello subnet or network interface doesn't expose hello VM tooany external traffic.</span></span> <span data-ttu-id="9d65e-171">azione predefinita di Hello durante la creazione di una macchina virtuale tramite il portale di hello è toocreate un nuovo indirizzo IP pubblico.</span><span class="sxs-lookup"><span data-stu-id="9d65e-171">hello default action when creating a VM through hello portal is toocreate a new public IP.</span></span> <span data-ttu-id="9d65e-172">In tutte le altre forme di creazione di una VM, come PowerShell, l'interfaccia della riga di comando di Azure o un modello di Resource Manager, non viene creato automaticamente un IP pubblico se non esplicitamente richiesto.</span><span class="sxs-lookup"><span data-stu-id="9d65e-172">For all other forms of creating a VM such as PowerShell, Azure CLI, or Resource Manager template, a public IP is not automatically created unless explicitly requested.</span></span> <span data-ttu-id="9d65e-173">azione predefinita Hello tramite il portale di hello è inoltre toocreate un gruppo di sicurezza di rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-173">hello default action through hello portal is also toocreate a Network Security Group.</span></span> <span data-ttu-id="9d65e-174">Con questa azione predefinita non si dovrebbe quindi verificare la situazione di una VM esposta senza filtri di rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-174">This default action means you shouldn't end up in a situation with an exposed VM that has no network filtering in place.</span></span>

## <a name="understanding-load-balancers-and-nat-rules"></a><span data-ttu-id="9d65e-175">Informazioni su servizi di bilanciamento del carico e regole NAT</span><span class="sxs-lookup"><span data-stu-id="9d65e-175">Understanding Load Balancers and NAT rules</span></span>
<span data-ttu-id="9d65e-176">Nel modello di distribuzione classica hello, è possibile creare endpoint effettuate inoltro alla porta.</span><span class="sxs-lookup"><span data-stu-id="9d65e-176">In hello Classic deployment model, you could create endpoints that also performed port forwarding.</span></span> <span data-ttu-id="9d65e-177">Quando si crea una macchina virtuale nel modello di distribuzione classica hello, verranno create automaticamente regole ACL per RDP o SSH.</span><span class="sxs-lookup"><span data-stu-id="9d65e-177">When you create a VM in hello Classic deployment model, ACL rules for RDP or SSH would be automatically created.</span></span> <span data-ttu-id="9d65e-178">Queste regole non espone la porta TCP 3389 o la porta TCP 22 rispettivamente toohello all'esterno di world.</span><span class="sxs-lookup"><span data-stu-id="9d65e-178">These rules would not expose TCP port 3389 or TCP port 22 respectively toohello outside world.</span></span> <span data-ttu-id="9d65e-179">Al contrario, una porta TCP di alto valore viene esposto che esegue il mapping di porta interna di toohello appropriato.</span><span class="sxs-lookup"><span data-stu-id="9d65e-179">Instead, a high-value TCP port would be exposed that maps toohello appropriate internal port.</span></span> <span data-ttu-id="9d65e-180">È inoltre possibile creare proprie regole ACL in modo simile, ad esempio espongono un server Web su TCP porta 4280 toohello all'esterno di world.</span><span class="sxs-lookup"><span data-stu-id="9d65e-180">You could also create your own ACL rules in a similar manner, such as expose a webserver on TCP port 4280 toohello outside world.</span></span> <span data-ttu-id="9d65e-181">È possibile visualizzare queste regole ACL e i mapping delle porte nella seguente schermata dal portale di hello Classic hello:</span><span class="sxs-lookup"><span data-stu-id="9d65e-181">You can see these ACL rules and port mappings in hello following screenshot from hello Classic portal:</span></span>

![Port forwarding con endpoint del modello di distribuzione classica](./media/virtual-machines-common-endpoints-in-resource-manager/classic-endpoints-port-forwarding.png)

<span data-ttu-id="9d65e-183">Con i gruppi di sicurezza di rete, la funzione di port forwarding è gestita da un servizio di bilanciamento del carico.</span><span class="sxs-lookup"><span data-stu-id="9d65e-183">With Network Security Groups, that port-forwarding function is handled by a load balancer.</span></span> <span data-ttu-id="9d65e-184">Per altre informazioni, vedere la [panoramica dei servizi di bilanciamento del carico in Azure](../articles/load-balancer/load-balancer-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9d65e-184">For more information, see [load balancers in Azure](../articles/load-balancer/load-balancer-overview.md).</span></span> <span data-ttu-id="9d65e-185">Hello esempio seguente viene illustrato un servizio di bilanciamento del carico con un NAT regola tooperform inoltro alla porta TCP porta 4222 toohello interno la porta TCP 22 una macchina virtuale:</span><span class="sxs-lookup"><span data-stu-id="9d65e-185">hello following example shows a load balancer with a NAT rule tooperform port-forwarding TCP port 4222 toohello internal TCP port 22 a VM:</span></span>

![Regole NAT del servizio di bilanciamento del carico per il port forwarding](./media/virtual-machines-common-endpoints-in-resource-manager/load-balancer-nat-rules.png)

> [!NOTE]
> <span data-ttu-id="9d65e-187">Quando si implementa un servizio di bilanciamento del carico, in genere non si assegnano hello macchina virtuale un indirizzo IP pubblico.</span><span class="sxs-lookup"><span data-stu-id="9d65e-187">When you implement a load balancer, you typically don't assign hello VM itself a public IP address.</span></span> <span data-ttu-id="9d65e-188">Servizio di bilanciamento del carico hello dispone invece di un tooit di indirizzo IP pubblico.</span><span class="sxs-lookup"><span data-stu-id="9d65e-188">Instead, hello load balancer has a public IP address assigned tooit.</span></span> <span data-ttu-id="9d65e-189">È comunque necessario toocreate il gruppo di sicurezza di rete e ACL regole toodefine hello flusso del traffico da e verso la macchina virtuale.</span><span class="sxs-lookup"><span data-stu-id="9d65e-189">You still need toocreate your Network Security Group and ACL rules toodefine hello flow of traffic in and out of your VM.</span></span> <span data-ttu-id="9d65e-190">Hello regole NAT di bilanciamento del carico sono semplicemente toodefine quali porte siano consentiti attraverso bilanciamento del carico hello e come ottenere distribuite su hello back-end le macchine virtuali.</span><span class="sxs-lookup"><span data-stu-id="9d65e-190">hello load balancer NAT rules are simply toodefine what ports are allowed through hello load balancer and how they get distributed across hello backend VMs.</span></span> <span data-ttu-id="9d65e-191">Di conseguenza, è necessario toocreate una regola NAT per il traffico tooflow tramite bilanciamento del carico hello.</span><span class="sxs-lookup"><span data-stu-id="9d65e-191">As such, you need toocreate a NAT rule for traffic tooflow through hello load balancer.</span></span> <span data-ttu-id="9d65e-192">hello tooreach di traffico hello tooallow macchina virtuale, creare una regola ACL di gruppo di sicurezza rete.</span><span class="sxs-lookup"><span data-stu-id="9d65e-192">tooallow hello traffic tooreach hello VM, create a Network Security Group ACL rule.</span></span>
