---
title: Backup di Azure per carichi di lavoro SQL Server con DPM | Documentazione Microsoft
description: Introduzione al backup dei database SQL Server tramite il servizio Backup di Azure
services: backup
documentationcenter: 
author: adigan
manager: Nkolli
editor: 
ms.assetid: 59df5bec-d959-457d-8731-7b20f7f1013e
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/27/2016
ms.author: adigan;giridham;jimpark;markgal;trinadhk
ms.openlocfilehash: c9edc066ea2edc9cd4b8453047d5584a588174dc
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: it-IT
ms.lasthandoff: 07/11/2017
---
# <a name="back-up-sql-server-to-azure-as-a-dpm-workload"></a><span data-ttu-id="be357-103">Backup di SQL Server in Azure come carico di lavoro DPM</span><span class="sxs-lookup"><span data-stu-id="be357-103">Back up SQL Server to Azure as a DPM workload</span></span>
<span data-ttu-id="be357-104">In questo articolo viene avviata la procedura di configurazione per il backup dei database SQL Server mediante il Backup di Azure.</span><span class="sxs-lookup"><span data-stu-id="be357-104">This article leads you through the configuration steps for backup of SQL Server databases using Azure Backup.</span></span>

<span data-ttu-id="be357-105">Per eseguire il backup dei database di SQL server in Azure è necessario un account Azure.</span><span class="sxs-lookup"><span data-stu-id="be357-105">To back up SQL Server databases to Azure, you need an Azure account.</span></span> <span data-ttu-id="be357-106">Se non si ha un account, è possibile creare un account di valutazione gratuito in pochi minuti.</span><span class="sxs-lookup"><span data-stu-id="be357-106">If you don’t have an account, you can create a free trial account in just couple of minutes.</span></span> <span data-ttu-id="be357-107">Per informazioni dettagliate, vedere la pagina relativa alla [versione di valutazione gratuita di Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="be357-107">For details, see [Azure Free Trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>

<span data-ttu-id="be357-108">La gestione delle operazioni di backup del database SQL server in Azure e di ripristino da Azure prevede tre passaggi:</span><span class="sxs-lookup"><span data-stu-id="be357-108">The management of SQL Server database backup to Azure and recovery from Azure involves three steps:</span></span>

1. <span data-ttu-id="be357-109">Creare un criterio di backup per proteggere i database SQL Server in Azure.</span><span class="sxs-lookup"><span data-stu-id="be357-109">Create a backup policy to protect SQL Server databases to Azure.</span></span>
2. <span data-ttu-id="be357-110">Creare copie di backup su richiesta in Azure.</span><span class="sxs-lookup"><span data-stu-id="be357-110">Create on-demand backup copies to Azure.</span></span>
3. <span data-ttu-id="be357-111">Ripristinare il database da Azure.</span><span class="sxs-lookup"><span data-stu-id="be357-111">Recover the database from Azure.</span></span>

## <a name="before-you-start"></a><span data-ttu-id="be357-112">Prima di iniziare</span><span class="sxs-lookup"><span data-stu-id="be357-112">Before you start</span></span>
<span data-ttu-id="be357-113">Prima di procedere, assicurarsi che tutti i [prerequisiti](backup-azure-dpm-introduction.md#prerequisites) per l'uso di Backup di Microsoft Azure per proteggere i carichi di lavoro siano stati soddisfatti.</span><span class="sxs-lookup"><span data-stu-id="be357-113">Before you begin, ensure that all the [prerequisites](backup-azure-dpm-introduction.md#prerequisites) for using Microsoft Azure Backup to protect workloads have been met.</span></span> <span data-ttu-id="be357-114">I prerequisiti si applicano ad attività quali, ad esempio, la creazione di un archivio di backup, il download delle credenziali dell'insieme di credenziali, l'installazione dell'agente di Backup di Azure e la registrazione del server con l'insieme di credenziali.</span><span class="sxs-lookup"><span data-stu-id="be357-114">The prerequisites cover tasks such as: creating a backup vault, downloading vault credentials, installing the Azure Backup Agent, and registering the server with the vault.</span></span>

## <a name="create-a-backup-policy-to-protect-sql-server-databases-to-azure"></a><span data-ttu-id="be357-115">Creare un criterio di backup per proteggere i database SQL Server in Azure.</span><span class="sxs-lookup"><span data-stu-id="be357-115">Create a backup policy to protect SQL Server databases to Azure</span></span>
1. <span data-ttu-id="be357-116">Sul server DPM, fare clic nell'area di lavoro **Protezione** .</span><span class="sxs-lookup"><span data-stu-id="be357-116">On the DPM server, click the **Protection** workspace.</span></span>
2. <span data-ttu-id="be357-117">Nella barra degli strumenti, fare clic su **Nuovo** per creare un nuovo gruppo di protezione.</span><span class="sxs-lookup"><span data-stu-id="be357-117">On the tool ribbon, click **New** to create a new protection group.</span></span>

    ![Creazione di un gruppo di protezione](./media/backup-azure-backup-sql/protection-group.png)
3. <span data-ttu-id="be357-119">DPM mostra la schermata iniziale con le linee guida per creare un **Gruppo di protezione**.</span><span class="sxs-lookup"><span data-stu-id="be357-119">DPM shows the start screen with the guidance on creating a **Protection Group**.</span></span> <span data-ttu-id="be357-120">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="be357-120">Click **Next**.</span></span>
4. <span data-ttu-id="be357-121">Selezione dei **Server**.</span><span class="sxs-lookup"><span data-stu-id="be357-121">Select **Servers**.</span></span>

    ![Selezione del tipo di gruppo di protezione "Server"](./media/backup-azure-backup-sql/pg-servers.png)
5. <span data-ttu-id="be357-123">Espandere la macchina del server SQL in cui sono presenti i database da includere nel backup.</span><span class="sxs-lookup"><span data-stu-id="be357-123">Expand the SQL Server machine where the databases to be backed up are present.</span></span> <span data-ttu-id="be357-124">DPM mostra diverse origini dati di cui è possibile eseguire il backup in quel server.</span><span class="sxs-lookup"><span data-stu-id="be357-124">DPM shows various data sources that can be backed up from that server.</span></span> <span data-ttu-id="be357-125">Espandere **Tutti i server SQL** e selezionare i database (in questo caso sono stati selezionati ReportServer$MSDPM2012 e ReportServer$MSDPM2012TempDB) di cui eseguire il backup.</span><span class="sxs-lookup"><span data-stu-id="be357-125">Expand the **All SQL Shares** and select the databases (in this case we selected ReportServer$MSDPM2012 and ReportServer$MSDPM2012TempDB) to be backed up.</span></span> <span data-ttu-id="be357-126">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="be357-126">Click **Next**.</span></span>

    ![Selezione del database SQL](./media/backup-azure-backup-sql/pg-databases.png)
6. <span data-ttu-id="be357-128">Specificare un nome per il gruppo di protezione e selezionare la casella di controllo **Desidero la protezione dati online** .</span><span class="sxs-lookup"><span data-stu-id="be357-128">Provide a name for the protection group and select the **I want online Protection** checkbox.</span></span>

    ![Metodo di protezione dei dati - disco a breve termine e online in Azure](./media/backup-azure-backup-sql/pg-name.png)
7. <span data-ttu-id="be357-130">Nella schermata **Specifica obiettivi a breve termine** includere gli input necessari per creare punti di backup sul disco.</span><span class="sxs-lookup"><span data-stu-id="be357-130">In the **Specify Short-Term Goals** screen, include the necessary inputs to create backup points to disk.</span></span>

    <span data-ttu-id="be357-131">Come si può vedere nell'immagine, il **Periodo di mantenimento dati** è impostato su *5 giorni* e la **Frequenza di sincronizzazione** è impostata su una volta ogni *15 minuti*, che corrisponde alla frequenza con cui viene eseguito il backup.</span><span class="sxs-lookup"><span data-stu-id="be357-131">Here we see that **Retention range** is set to *5 days*, **Synchronization frequency** is set to once every *15 minutes* which is the frequency at which backup is taken.</span></span> <span data-ttu-id="be357-132">**Backup completo rapido** è impostato su *8.00 PM*.</span><span class="sxs-lookup"><span data-stu-id="be357-132">**Express Full Backup** is set to *8:00 P.M*.</span></span>

    ![Obiettivi a breve termine](./media/backup-azure-backup-sql/pg-shortterm.png)

   > [!NOTE]
   > <span data-ttu-id="be357-134">Alle 8.00 PM (secondo la schermata di input) viene creato un punto di backup ogni giorno con il trasferimento dei dati modificati rispetto al punto di backup delle 8.00 PM del giorno precedente.</span><span class="sxs-lookup"><span data-stu-id="be357-134">At 8:00 PM (according to the screen input) a backup point is created every day by transferring the data that has been modified from the previous day’s 8:00 PM backup point.</span></span> <span data-ttu-id="be357-135">Questo processo è detto **Backup completo rapido**.</span><span class="sxs-lookup"><span data-stu-id="be357-135">This process is called **Express Full Backup**.</span></span> <span data-ttu-id="be357-136">Mentre i log delle transazioni vengono sincronizzati ogni 15 minuti, se è necessario ripristinare il database alle 9.00 PM, il punto viene creato riproducendo i log dall'ultimo backup completo rapido (in questo caso le 8.00 PM).</span><span class="sxs-lookup"><span data-stu-id="be357-136">While the transaction logs are synchronized every 15 minutes, if there is a need to recover the database at 9:00 PM – then the point is created by replaying the logs from the last express full backup point (8pm in this case).</span></span>
   >
   >

8. <span data-ttu-id="be357-137">Fare clic su **Avanti**</span><span class="sxs-lookup"><span data-stu-id="be357-137">Click **Next**</span></span>

    <span data-ttu-id="be357-138">DPM mostra lo spazio di archiviazione complessivo e il potenziale utilizzo dello spazio su disco.</span><span class="sxs-lookup"><span data-stu-id="be357-138">DPM shows the overall storage space available and the potential disk space utilization.</span></span>

    ![Allocazione dei dischi](./media/backup-azure-backup-sql/pg-storage.png)

    <span data-ttu-id="be357-140">per impostazione predefinita, DPM crea un volume per origine dati (database SQL Server) usato per la creazione della copia di backup iniziale.</span><span class="sxs-lookup"><span data-stu-id="be357-140">By default, DPM creates one volume per data source (SQL Server database) which is used for the initial backup copy.</span></span> <span data-ttu-id="be357-141">Con questo approccio, il gestore dischi logici (LDM) limita la protezione DPM a 300 origini dati (database SQL Server).</span><span class="sxs-lookup"><span data-stu-id="be357-141">Using this approach, the Logical Disk Manager (LDM) limits DPM protection to 300 data sources (SQL Server databases).</span></span> <span data-ttu-id="be357-142">Per porre rimedio a questa limitazione, selezionare l'opzione **Condividi percorso dati nel pool di archiviazione DPM**.</span><span class="sxs-lookup"><span data-stu-id="be357-142">To work around this limitation, select the **Co-locate data in DPM Storage Pool**, option.</span></span> <span data-ttu-id="be357-143">Grazie a questa opzione, DPM usa un singolo volume per più origini dati, che consente a DPM di proteggere fino a 2.000 database SQL.</span><span class="sxs-lookup"><span data-stu-id="be357-143">If you use this option, DPM uses a single volume for multiple data sources, which allows DPM to protect up to 2000 SQL databases.</span></span>

    <span data-ttu-id="be357-144">Selezionando l'opzione **Aumenta automaticamente i volumi**, si consente a DPM di adeguare l'aumento del volume di backup all'aumento dei dati di produzione.</span><span class="sxs-lookup"><span data-stu-id="be357-144">If **Automatically grow the volumes** option is selected, DPM can account for the increased backup volume as the production data grows.</span></span> <span data-ttu-id="be357-145">Deselezionando l'opzione **Aumenta automaticamente i volumi**, DPM limiterà lo spazio di archiviazione backup usato per le origini dati nel gruppo di protezione.</span><span class="sxs-lookup"><span data-stu-id="be357-145">If **Automatically grow the volumes** option is not selected, DPM limits the backup storage used to the data sources in the protection group.</span></span>
9. <span data-ttu-id="be357-146">Gli amministratori possono scegliere di trasferire manualmente il backup iniziale (fuori rete) per evitare la congestione della larghezza di banda oppure di trasferirlo in rete.</span><span class="sxs-lookup"><span data-stu-id="be357-146">Administrators are given the choice of transferring this initial backup manually (off network) to avoid bandwidth congestion or over the network.</span></span> <span data-ttu-id="be357-147">Possono anche configurare la data e l'ora di inizio del trasferimento.</span><span class="sxs-lookup"><span data-stu-id="be357-147">They can also configure the time at which the initial transfer can happen.</span></span> <span data-ttu-id="be357-148">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="be357-148">Click **Next**.</span></span>

    ![Metodo di replica iniziale](./media/backup-azure-backup-sql/pg-manual.png)

    <span data-ttu-id="be357-150">La copia di backup iniziale richiede il trasferimento dell'intera origine dati (database SQL Server) dal server di produzione (macchina SQL Server) al server DPM.</span><span class="sxs-lookup"><span data-stu-id="be357-150">The initial backup copy requires transfer of the entire data source (SQL Server database) from production server (SQL Server machine) to the DPM server.</span></span> <span data-ttu-id="be357-151">Tali dati potrebbero essere di grandi dimensioni e trasferimento dei dati sulla rete potrebbe superare la larghezza di banda.</span><span class="sxs-lookup"><span data-stu-id="be357-151">This data might be large, and transferring the data over the network could exceed bandwidth.</span></span> <span data-ttu-id="be357-152">Per questo motivo, gli amministratori possono scegliere di trasferire il backup iniziale: **manualmente** (usando supporti rimovibili) per evitare la congestione della larghezza di banda o **automaticamente tramite la rete** (ad un orario specificato).</span><span class="sxs-lookup"><span data-stu-id="be357-152">For this reason, administrators can choose to transfer the initial backup: **Manually** (using removable media) to avoid bandwidth congestion, or **Automatically over the network** (at a specified time).</span></span>

    <span data-ttu-id="be357-153">Una volta completato il backup iniziale, quelli successivi saranno backup incrementali della copia di backup iniziale.</span><span class="sxs-lookup"><span data-stu-id="be357-153">Once the initial backup is complete, the rest of the backups are incremental backups on the initial backup copy.</span></span> <span data-ttu-id="be357-154">I backup incrementali tendono a essere di piccole dimensioni e facilmente trasferibili sulla rete.</span><span class="sxs-lookup"><span data-stu-id="be357-154">Incremental backups tend to be small and are easily transferred across the network.</span></span>
10. <span data-ttu-id="be357-155">Scegliere quando si vuole eseguire la verifica della coerenza e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="be357-155">Choose when you want the consistency check to run and click **Next**.</span></span>

    ![Verifica coerenza](./media/backup-azure-backup-sql/pg-consistent.png)

    <span data-ttu-id="be357-157">DPM può eseguire una verifica coerenza per controllare l'integrità del punto di backup.</span><span class="sxs-lookup"><span data-stu-id="be357-157">DPM can perform a consistency check to check the integrity of the backup point.</span></span> <span data-ttu-id="be357-158">Calcola il checksum del file di backup nel server di produzione (macchina SQL Server in questo scenario) e i dati di cui è stato eseguito il backup per quel file in DPM.</span><span class="sxs-lookup"><span data-stu-id="be357-158">It calculates the checksum of the backup file on the production server (SQL Server machine in this scenario) and the backed-up data for that file at DPM.</span></span> <span data-ttu-id="be357-159">In caso di conflitto, si presuppone che il file di backup in DPM sia danneggiato.</span><span class="sxs-lookup"><span data-stu-id="be357-159">In the case of a conflict, it is assumed that the backed-up file at DPM is corrupt.</span></span> <span data-ttu-id="be357-160">Data Protection Manager corregge i dati di backup inviando i blocchi che equivalgono alla mancata corrispondenza del checksum.</span><span class="sxs-lookup"><span data-stu-id="be357-160">DPM rectifies the backed-up data by sending the blocks corresponding to the checksum mismatch.</span></span> <span data-ttu-id="be357-161">Poiché verifica coerenza è un'operazione con esigenze di prestazioni elevate, gli amministratori hanno la possibilità di scegliere se pianificarla o eseguirla automaticamente.</span><span class="sxs-lookup"><span data-stu-id="be357-161">As the consistency check is a performance-intensive operation, administrators have the option of scheduling the consistency check or running it automatically.</span></span>
11. <span data-ttu-id="be357-162">Per specificare la protezione online delle origini dati, selezionare i database da proteggere in Azure e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="be357-162">To specify online protection of the datasources, select the databases to be protected to Azure and click **Next**.</span></span>

    ![Selezione delle origini dati](./media/backup-azure-backup-sql/pg-sqldatabases.png)
12. <span data-ttu-id="be357-164">Gli amministratori possono scegliere le pianificazioni di backup e i criteri di conservazione adatti a soddisfare i criteri dell'organizzazione.</span><span class="sxs-lookup"><span data-stu-id="be357-164">Administrators can choose backup schedules and retention policies that suit their organization policies.</span></span>

    ![Pianificazione e conservazione](./media/backup-azure-backup-sql/pg-schedule.png)

    <span data-ttu-id="be357-166">In questo esempio i backup vengono eseguiti una volta al giorno alle 12.00 PM e alle 8.00 PM (parte in basso della schermata)</span><span class="sxs-lookup"><span data-stu-id="be357-166">In this example, backups are taken once a day at 12:00 PM and 8 PM (bottom part of the screen)</span></span>

    > [!NOTE]
    > <span data-ttu-id="be357-167">È consigliabile avere sul disco alcuni punti di ripristino a breve termine per un ripristino rapido.</span><span class="sxs-lookup"><span data-stu-id="be357-167">It’s a good practice to have a few short-term recovery points on disk, for quick recovery.</span></span> <span data-ttu-id="be357-168">Questi punti di ripristino vengono usati per il "ripristino operativo".</span><span class="sxs-lookup"><span data-stu-id="be357-168">These recovery points are used for “operational recovery".</span></span> <span data-ttu-id="be357-169">Azure è una posizione esterna ottimale con contratti di servizio più elevati e disponibilità garantita.</span><span class="sxs-lookup"><span data-stu-id="be357-169">Azure serves as a good offsite location with higher SLAs and guaranteed availability.</span></span>
    >
    >

    <span data-ttu-id="be357-170">**Procedura consigliata**: verificare che i backup di Azure siano pianificati dopo il completamento dei backup su disco locali con DPM.</span><span class="sxs-lookup"><span data-stu-id="be357-170">**Best Practice**: Make sure that Azure Backups are scheduled after the completion of local disk backups using DPM.</span></span> <span data-ttu-id="be357-171">Ciò consente di copiare in Azure il backup su disco più recente.</span><span class="sxs-lookup"><span data-stu-id="be357-171">This enables the latest disk backup to be copied to Azure.</span></span>

13. <span data-ttu-id="be357-172">Scegliere la pianificazione per i criteri di conservazione.</span><span class="sxs-lookup"><span data-stu-id="be357-172">Choose the retention policy schedule.</span></span> <span data-ttu-id="be357-173">Per informazioni dettagliate sul funzionamento dei criteri di conservazione, vedere l'articolo [Usare Backup di Azure per sostituire l'infrastruttura basata su nastro](backup-azure-backup-cloud-as-tape.md).</span><span class="sxs-lookup"><span data-stu-id="be357-173">The details on how the retention policy works are provided at [Use Azure Backup to replace your tape infrastructure article](backup-azure-backup-cloud-as-tape.md).</span></span>

    ![Criteri di conservazione](./media/backup-azure-backup-sql/pg-retentionschedule.png)

    <span data-ttu-id="be357-175">In questo esempio:</span><span class="sxs-lookup"><span data-stu-id="be357-175">In this example:</span></span>

    * <span data-ttu-id="be357-176">I backup vengono eseguiti una volta al giorno alle 12.00 PM e alle 8.00 PM (parte in basso della schermata) e vengono conservati per 180 giorni.</span><span class="sxs-lookup"><span data-stu-id="be357-176">Backups are taken once a day at 12:00 PM and 8 PM (bottom part of the screen) and are retained for 180 days.</span></span>
    * <span data-ttu-id="be357-177">Il backup di sabato alle ore 12:00 P.M.</span><span class="sxs-lookup"><span data-stu-id="be357-177">The backup on Saturday at 12:00 P.M.</span></span> <span data-ttu-id="be357-178">viene conservato per 104 settimane</span><span class="sxs-lookup"><span data-stu-id="be357-178">is retained for 104 weeks</span></span>
    * <span data-ttu-id="be357-179">Il backup dell'ultimo sabato alle 12.00 P.M.</span><span class="sxs-lookup"><span data-stu-id="be357-179">The backup on Last Saturday at 12:00 P.M.</span></span> <span data-ttu-id="be357-180">viene conservato per 60 mesi</span><span class="sxs-lookup"><span data-stu-id="be357-180">is retained for 60 months</span></span>
    * <span data-ttu-id="be357-181">Il backup dell'ultimo sabato di marzo alle 12.00 P.M.</span><span class="sxs-lookup"><span data-stu-id="be357-181">The backup on Last Saturday of March at 12:00 P.M.</span></span> <span data-ttu-id="be357-182">viene conservato per 10 anni</span><span class="sxs-lookup"><span data-stu-id="be357-182">is retained for 10 years</span></span>
14. <span data-ttu-id="be357-183">Fare clic su **Avanti** e selezionare l'opzione appropriata per il trasferimento in Azure della copia di backup iniziale.</span><span class="sxs-lookup"><span data-stu-id="be357-183">Click **Next** and select the appropriate option for transferring the initial backup copy to Azure.</span></span> <span data-ttu-id="be357-184">È possibile scegliere **Automaticamente tramite la rete** o **Backup offline**.</span><span class="sxs-lookup"><span data-stu-id="be357-184">You can choose **Automatically over the network** or **Offline Backup**.</span></span>

    * <span data-ttu-id="be357-185">**automaticamente tramite la rete** i dati di backup vengono trasferiti in Azure in base alla pianificazione scelta per il backup.</span><span class="sxs-lookup"><span data-stu-id="be357-185">**Automatically over the network** transfers the backup data to Azure as per the schedule chosen for backup.</span></span>
    * <span data-ttu-id="be357-186">Il funzionamento di **Backup offline** è descritto in [Flusso di lavoro di Backup offline in Backup di Azure](backup-azure-backup-import-export.md).</span><span class="sxs-lookup"><span data-stu-id="be357-186">How **Offline Backup** works is explained at [Offline Backup workflow in Azure Backup](backup-azure-backup-import-export.md).</span></span>

    <span data-ttu-id="be357-187">Scegliere il meccanismo di trasferimento pertinente per l'invio ad Azure della copia di backup iniziale e fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="be357-187">Choose the relevant transfer mechanism to send the initial backup copy to Azure and click **Next**.</span></span>
15. <span data-ttu-id="be357-188">Dopo aver esaminato i dettagli dei criteri nella schermata **Riepilogo**, fare clic sul pulsante **Crea gruppo** per completare il flusso di lavoro.</span><span class="sxs-lookup"><span data-stu-id="be357-188">Once you review the policy details in the **Summary** screen, click on the **Create group** button to complete the workflow.</span></span> <span data-ttu-id="be357-189">È possibile fare clic sul pulsante **Chiudi** e monitorare l'avanzamento del processo nell'area di lavoro Monitoraggio.</span><span class="sxs-lookup"><span data-stu-id="be357-189">You can click the **Close** button and monitor the job progress in Monitoring workspace.</span></span>

    ![Creazione di un gruppo di protezione in corso](./media/backup-azure-backup-sql/pg-summary.png)

## <a name="on-demand-backup-of-a-sql-server-database"></a><span data-ttu-id="be357-191">Backup su richiesta di un database SQL Server</span><span class="sxs-lookup"><span data-stu-id="be357-191">On-demand backup of a SQL Server database</span></span>
<span data-ttu-id="be357-192">Mentre nei passaggi precedenti sono stati creati i criteri di backup, un "punto di ripristino" viene creato solo quando si verifica il primo backup.</span><span class="sxs-lookup"><span data-stu-id="be357-192">While the previous steps created a backup policy, a “recovery point” is created only when the first backup occurs.</span></span> <span data-ttu-id="be357-193">Anziché attendere l'avvio dell'Utilità di pianificazione, i passaggi seguenti attivano la creazione manuale di un punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="be357-193">Rather than waiting for the scheduler to kick in, the steps below trigger the creation of a recovery point manually.</span></span>

1. <span data-ttu-id="be357-194">Prima di creare il punto di ripristino, attendere finché nello stato del gruppo di protezione non viene visualizzato **OK** per il database.</span><span class="sxs-lookup"><span data-stu-id="be357-194">Wait until the protection group status shows **OK** for the database before creating the recovery point.</span></span>

    ![Membri del gruppo di protezione](./media/backup-azure-backup-sql/sqlbackup-recoverypoint.png)
2. <span data-ttu-id="be357-196">Fare clic con il pulsante destro del mouse sul database e scegliere **Crea punto di ripristino**.</span><span class="sxs-lookup"><span data-stu-id="be357-196">Right-click on the database and select **Create Recovery Point**.</span></span>

    ![Creazione di un punto di ripristino online](./media/backup-azure-backup-sql/sqlbackup-createrp.png)
3. <span data-ttu-id="be357-198">Nel menu a discesa scegliere **Protezione dati online** e fare clic su **OK**.</span><span class="sxs-lookup"><span data-stu-id="be357-198">Choose **Online Protection** in the drop-down menu and click **OK**.</span></span> <span data-ttu-id="be357-199">Si avvia la creazione di un punto di ripristino in Azure.</span><span class="sxs-lookup"><span data-stu-id="be357-199">This starts the creation of a recovery point in Azure.</span></span>

    ![Crea punto di ripristino](./media/backup-azure-backup-sql/sqlbackup-azure.png)
4. <span data-ttu-id="be357-201">È possibile visualizzare l'avanzamento del processo nell'area di lavoro **Monitoraggio** , dove si vedrà un processo in corso come quello illustrato nella figura seguente.</span><span class="sxs-lookup"><span data-stu-id="be357-201">You can view the job progress in the **Monitoring** workspace where you'll find an in progress job like the one depicted in the next figure.</span></span>

    ![Console di monitoraggio](./media/backup-azure-backup-sql/sqlbackup-monitoring.png)

## <a name="recover-a-sql-server-database-from-azure"></a><span data-ttu-id="be357-203">Ripristinare un database SQL Server da Azure</span><span class="sxs-lookup"><span data-stu-id="be357-203">Recover a SQL Server database from Azure</span></span>
<span data-ttu-id="be357-204">I passaggi seguenti sono necessari per ripristinare un'entità protetta (database SQL Server) da Azure.</span><span class="sxs-lookup"><span data-stu-id="be357-204">The following steps are required to recover a protected entity (SQL Server database) from Azure.</span></span>

1. <span data-ttu-id="be357-205">Aprire la console di gestione del server DPM.</span><span class="sxs-lookup"><span data-stu-id="be357-205">Open the DPM server Management Console.</span></span> <span data-ttu-id="be357-206">Passare all'area di lavoro **Ripristino** dove si vedono i server di cui DPM ha eseguito il backup.</span><span class="sxs-lookup"><span data-stu-id="be357-206">Navigate to **Recovery** workspace where you can see the servers backed up by DPM.</span></span> <span data-ttu-id="be357-207">Passare al database necessario (in questo caso ReportServer$MSDPM2012).</span><span class="sxs-lookup"><span data-stu-id="be357-207">Browse the required database (in this case ReportServer$MSDPM2012).</span></span> <span data-ttu-id="be357-208">In **Ripristino da** selezionare un orario che termina con **Online**.</span><span class="sxs-lookup"><span data-stu-id="be357-208">Select a **Recovery from** time which ends with **Online**.</span></span>

    ![Selezione di un punto di ripristino](./media/backup-azure-backup-sql/sqlbackup-restorepoint.png)
2. <span data-ttu-id="be357-210">Fare clic con il pulsante destro del mouse sul nome del database e scegliere **Ripristina**.</span><span class="sxs-lookup"><span data-stu-id="be357-210">Right-click the database name and click **Recover**.</span></span>

    ![Ripristino da Azure](./media/backup-azure-backup-sql/sqlbackup-recover.png)
3. <span data-ttu-id="be357-212">DPM mostra i dettagli del punto di ripristino.</span><span class="sxs-lookup"><span data-stu-id="be357-212">DPM shows the details of the recovery point.</span></span> <span data-ttu-id="be357-213">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="be357-213">Click **Next**.</span></span> <span data-ttu-id="be357-214">Per sovrascrivere il database, selezionare il tipo di ripristino **Ripristina nell'istanza originale di SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="be357-214">To overwrite the database, select the recovery type **Recover to original instance of SQL Server**.</span></span> <span data-ttu-id="be357-215">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="be357-215">Click **Next**.</span></span>

    ![Ripristino nel percorso originale](./media/backup-azure-backup-sql/sqlbackup-recoveroriginal.png)

    <span data-ttu-id="be357-217">In questo esempio DPM consente il ripristino del database in un'altra istanza di SQL server o in una cartella di rete autonoma.</span><span class="sxs-lookup"><span data-stu-id="be357-217">In this example, DPM allows recovery of the database to another SQL Server instance or to a standalone network folder.</span></span>
4. <span data-ttu-id="be357-218">Nella schermata **Specifica opzioni di ripristino** è possibile selezionare le opzioni di ripristino, ad esempio Limitazione all'utilizzo della larghezza di banda per controllare la larghezza di banda usata dal processo di ripristino.</span><span class="sxs-lookup"><span data-stu-id="be357-218">In the **Specify Recovery options** screen, you can select the recovery options like Network bandwidth usage throttling to throttle the bandwidth used by recovery.</span></span> <span data-ttu-id="be357-219">Fare clic su **Avanti**.</span><span class="sxs-lookup"><span data-stu-id="be357-219">Click **Next**.</span></span>
5. <span data-ttu-id="be357-220">Nella schermata **Riepilogo** vengono visualizzate le configurazioni di ripristino impostate finora.</span><span class="sxs-lookup"><span data-stu-id="be357-220">In the **Summary** screen, you see all the recovery configurations provided so far.</span></span> <span data-ttu-id="be357-221">Fare clic su **Ripristina**.</span><span class="sxs-lookup"><span data-stu-id="be357-221">Click **Recover**.</span></span>

    <span data-ttu-id="be357-222">In Stato ripristino è visualizzato il database in corso di ripristino.</span><span class="sxs-lookup"><span data-stu-id="be357-222">The Recovery status shows the database being recovered.</span></span> <span data-ttu-id="be357-223">È possibile fare clic **Chiudi** per chiudere la procedura guidata e visualizzare lo stato di avanzamento nell'area di lavoro **Monitoraggio**.</span><span class="sxs-lookup"><span data-stu-id="be357-223">You can click **Close** to close the wizard and view the progress in the **Monitoring** workspace.</span></span>

    ![Avvio del processo di ripristino](./media/backup-azure-backup-sql/sqlbackup-recoverying.png)

    <span data-ttu-id="be357-225">Al termine del ripristino, il database ripristinato sarà coerente con l'applicazione.</span><span class="sxs-lookup"><span data-stu-id="be357-225">Once the recovery is completed, the restored database is application consistent.</span></span>

### <a name="next-steps"></a><span data-ttu-id="be357-226">Passaggi successivi:</span><span class="sxs-lookup"><span data-stu-id="be357-226">Next Steps:</span></span>
<span data-ttu-id="be357-227">[Domande frequenti su Backup di Azure](backup-azure-backup-faq.md)</span><span class="sxs-lookup"><span data-stu-id="be357-227">•    [Azure Backup FAQ](backup-azure-backup-faq.md)</span></span>
